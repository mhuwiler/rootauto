cscope 15 $HOME/rootauto/root/tmva/tmva               0002204916
	@src/BDTEventWrapper.cxx

23 
	~"TMVA/BDTEvítWøµî.h
"

29 
	~"Rty≥sC‹e.h
"

31 
usög
 
«me•a˚
 
	gTMVA
;

36 
	gBDTEvítWøµî
::
	$BDTEvítWøµî
(c⁄° 
Evít
* 
e
Ë: 
	$fEvít
(
e
) {

38 
fBkgWeight
 = 0.0;

39 
fSigWeight
 = 0.0;

40 
	}
}

45 
	gBDTEvítWøµî
::~
	$BDTEvítWøµî
() {

46 
	}
}

54 
BDTEvítWøµî
::
	$SëCumuœtiveWeight
(
Boﬁ_t
 
ty≥
, 
DoubÀ_t
 
weight
) {

57 if(
ty≥
Ë
fSigWeight
 = 
weight
;

58 
fBkgWeight
 = 
weight
;

59 
	}
}

64 
DoubÀ_t
 
	gBDTEvítWøµî
::
	$GëCumuœtiveWeight
(
Boﬁ_t
 
ty≥
) const {

65 if(
ty≥
Ë 
fSigWeight
;

66  
fBkgWeight
;

67 
	}
}

	@src/BinarySearchTree.cxx

38 
	~<°dex˚±
>

39 
	~<c°dlib
>

40 
	~<queue
>

41 
	~<Æg‹ôhm
>

49 
	~"TM©h.h
"

53 
	~"TM©rixDBa£.h
"

54 
	~"TObjSåög.h
"

55 
	~"TTªe.h
"

57 
	~"TMVA/MsgLoggî.h
"

58 
	~"TMVA/MëhodBa£.h
"

59 
	~"TMVA/Toﬁs.h
"

60 
	~"TMVA/Evít.h
"

61 
	~"TMVA/Bö¨ySórchTªe.h
"

63 
	~"TMVA/Bö¨yTªe.h
"

64 
	~"TMVA/Ty≥s.h
"

65 
	~"TMVA/Node.h
"

67 
CœssImp
(
TMVA
::
Bö¨ySórchTªe
);

72 
	gTMVA
::
Bö¨ySórchTªe
::
	$Bö¨ySórchTªe
( ) :

73 
	`Bö¨yTªe
(),

74 
	`fPîiod
 ( 1 ),

75 
	`fCuºítDïth
( 0 ),

76 
	`fSèti°icsIsVÆid
–
kFALSE
 ),

77 
	`fSumOfWeights
( 0 ),

78 
	$fC™N‹mÆize
–
kFALSE
 )

80 
fNEvítsW
[0]=fNEventsW[1]=0.;

81 
	}
}

86 
	gTMVA
::
Bö¨ySórchTªe
::
	$Bö¨ySórchTªe
–c⁄° 
Bö¨ySórchTªe
 &
b
)

87 : 
	`Bö¨yTªe
(),

88 
	`fPîiod
 ( 
b
.
fPîiod
 ),

89 
	`fCuºítDïth
( 0 ),

90 
	`fSèti°icsIsVÆid
–
kFALSE
 ),

91 
	`fSumOfWeights
–
b
.
fSumOfWeights
 ),

92 
	$fC™N‹mÆize
–
kFALSE
 )

94 
fNEvítsW
[0]=fNEventsW[1]=0.;

95 
	`Log
(Ë<< 
kFATAL
 << " C›y c⁄°ru˘‹ÇŸ im∂emíãd yë " << 
Endl
;

96 
	}
}

101 
	gTMVA
::
Bö¨ySórchTªe
::~
	$Bö¨ySórchTªe
( )

103 
°d
::
ve˘‹
< std::
∑ú
<
DoubÀ_t
, c⁄° 
TMVA
::
Evít
*> >::
ôî©‹
 
pIt
 = 
fN‹mÆizeTªeTabÀ
.
	`begö
();

104 
pIt
 !
fN‹mÆizeTªeTabÀ
.
	`íd
();ÖIt++) {

105 
dñëe
 
pIt
->
£c⁄d
;

107 
	}
}

112 
	gTMVA
::
Bö¨ySórchTªe
* 
TMVA
::Bö¨ySórchTªe::
	$Cª©eFromXML
(* 
node
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 ) {

113 
°d
::
°rög
 
	`ty≥
("");

114 
	`gToﬁs
().
	`RódAâr
(
node
,"ty≥", 
ty≥
);

115 
Bö¨ySórchTªe
* 
bt
 = 
√w
 
	`Bö¨ySórchTªe
();

116 
bt
->
	`RódXML
–
node
, 
tmva_Vîsi⁄_Code
 );

117  
bt
;

118 
	}
}

123 
	gTMVA
::
Bö¨ySórchTªe
::
	$In£π
–c⁄° 
Evít
* 
evít
 )

125 
fCuºítDïth
=0;

126 
fSèti°icsIsVÆid
 = 
kFALSE
;

128 i‡(
this
->
	`GëRoŸ
(Ë=
NULL
) {

129 
this
->
	`SëRoŸ
–
√w
 
	`Bö¨ySórchTªeNode
(
evít
));

131 
this
->
	`GëRoŸ
()->
	`SëPos
('s');

132 
this
->
	`GëRoŸ
()->
	`SëDïth
(0);

133 
fNNodes
 = 1;

134 
fSumOfWeights
 = 
evít
->
	`GëWeight
();

135 ((
Bö¨ySórchTªeNode
*)
this
->
	`GëRoŸ
())->
	`SëSñe˘‹
((
UI¡_t
)0);

136 
this
->
	`SëPîiode
(
evít
->
	`GëNV¨übÀs
());

140 i‡(
evít
->
	`GëNV¨übÀs
(Ë!(
UI¡_t
)
this
->
	`GëPîiode
()) {

141 
	`Log
(Ë<< 
kFATAL
 << "<In£π>Évíàve˘‹Üígth !Pîiodê•ecifõd i¿Bö¨y Tªe" << 
Endl


142 << "---Évíàsize: " << 
evít
->
	`GëNV¨übÀs
(Ë<< " Pîiode: " << 
this
->
	`GëPîiode
(Ë<< 
Endl


143 << "---ándáŒÅhi†whíÅryög fûlögÅhê"<<
fNNodes
+1<<"th Node" << 
Endl
;

146 
this
->
	`In£π
(
evít
,Åhis->
	`GëRoŸ
());

150 i‡(
fC™N‹mÆize
Ë
fN‹mÆizeTªeTabÀ
.
	`push_back
–
°d
::
	`make_∑ú
(0.0,
√w
 c⁄° 
	`Evít
(*
evít
)) );

151 
	}
}

156 
	gTMVA
::
Bö¨ySórchTªe
::
	$In£π
–c⁄° 
Evít
 *
evít
,

157 
Node
 *
node
 )

159 
fCuºítDïth
++;

160 
fSèti°icsIsVÆid
 = 
kFALSE
;

162 i‡(
node
->
	`G€sLe·
(*
evít
)){

163 i‡(
node
->
	`GëLe·
(Ë!
NULL
){

165 
this
->
	`In£π
(
evít
, 
node
->
	`GëLe·
());

169 
Bö¨ySórchTªeNode
* 
cuºít
 = 
√w
 
	`Bö¨ySórchTªeNode
(
evít
);

170 
fNNodes
++;

171 
fSumOfWeights
 +
evít
->
	`GëWeight
();

172 
cuºít
->
	`SëSñe˘‹
(
fCuºítDïth
%((
I¡_t
)
evít
->
	`GëNV¨übÀs
()));

173 
cuºít
->
	`SëP¨ít
(
node
);

174 
cuºít
->
	`SëPos
('l');

175 
cuºít
->
	`SëDïth
–
node
->
	`GëDïth
() + 1 );

176 
node
->
	`SëLe·
(
cuºít
);

179 i‡(
node
->
	`G€sRight
(*
evít
)) {

180 i‡(
node
->
	`GëRight
(Ë!
NULL
) {

182 
this
->
	`In£π
(
evít
, 
node
->
	`GëRight
());

186 
Bö¨ySórchTªeNode
* 
cuºít
 = 
√w
 
	`Bö¨ySórchTªeNode
(
evít
);

187 
fNNodes
++;

188 
fSumOfWeights
 +
evít
->
	`GëWeight
();

189 
cuºít
->
	`SëSñe˘‹
(
fCuºítDïth
%((
I¡_t
)
evít
->
	`GëNV¨übÀs
()));

190 
cuºít
->
	`SëP¨ít
(
node
);

191 
cuºít
->
	`SëPos
('r');

192 
cuºít
->
	`SëDïth
–
node
->
	`GëDïth
() + 1 );

193 
node
->
	`SëRight
(
cuºít
);

196 
	`Log
(Ë<< 
kFATAL
 << "<In£π>ÇeôhîÜe·Ç‹Ñighà:)" << 
Endl
;

197 
	}
}

202 
	gTMVA
::
Bö¨ySórchTªeNode
* 
TMVA
::
Bö¨ySórchTªe
::
	$Sórch
–
Evít
* 
evít
 ) const

204  
this
->
	`Sórch
–
evít
,Åhis->
	`GëRoŸ
() );

205 
	}
}

210 
	gTMVA
::
Bö¨ySórchTªeNode
* 
TMVA
::
Bö¨ySórchTªe
::
	$Sórch
(
Evít
* 
evít
, 
Node
* 
node
) const

212 i‡(
node
 !
NULL
) {

214 i‡(((
Bö¨ySórchTªeNode
*)(
node
))->
	`EquÆsMe
(*
evít
))

215  (
Bö¨ySórchTªeNode
*)
node
;

216 i‡(
node
->
	`G€sLe·
(*
evít
))

217  
this
->
	`Sórch
(
evít
, 
node
->
	`GëLe·
());

219  
this
->
	`Sórch
(
evít
, 
node
->
	`GëRight
());

221  
NULL
;

222 
	}
}

227 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
	$GëSumOfWeights
( ) const

229 i‡(
fSumOfWeights
 <= 0) {

230 
	`Log
(Ë<< 
kWARNING
 << "youásked forÅhe SumOfWeights, which isÇot filled yet"

232 << 
Endl
;

234 i‡(
fSumOfWeights
 <0Ë
	`Log
(Ë<< 
kFATAL
 << " Zîÿevít†ö you∏Sórch Tªe" <<
Endl
;

236  
fSumOfWeights
;

237 
	}
}

242 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
	$GëSumOfWeights
–
I¡_t
 
theTy≥
 ) const

244 i‡(
fSumOfWeights
 <= 0) {

245 
	`Log
(Ë<< 
kWARNING
 << "youásked forÅhe SumOfWeights, which isÇot filled yet"

247 << 
Endl
;

249 i‡(
fSumOfWeights
 <0Ë
	`Log
(Ë<< 
kFATAL
 << " Zîÿevít†ö you∏Sórch Tªe" <<
Endl
;

251  
fNEvítsW
[ ( 
theTy≥
 =
Ty≥s
::
kSig«l
) ? 0 : 1 ];

252 
	}
}

258 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
Fûl
–c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
, c⁄° std::ve˘‹<
I¡_t
>& 
theV¨s
,

259 
I¡_t
 
theTy≥
 )

261 
	gfPîiod
 = 
theV¨s
.
size
();

262  
Fûl
(
evíts
, 
theTy≥
);

269 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
Fûl
–c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
, 
I¡_t
 
theTy≥
 )

271 
UI¡_t
 
	gn
=
evíts
.
size
();

273 
UI¡_t
 
	g√víts
 = 0;

274 i‡(
	gfSumOfWeights
 != 0) {

275 
Log
(Ë<< 
kWARNING


278 << 
Endl
;

280 
UI¡_t
 
	gõvt
=0; ievt<
	gn
; ievt++) {

282 i‡(
	gtheTy≥
 =-1 || (
I¡_t
(
evíts
[
õvt
]->
GëCœss
()Ë=
theTy≥
) ) {

283 
this
->
In£π
–
evíts
[
õvt
] );

284 
	g√víts
++;

285 
	gfSumOfWeights
 +
evíts
[
õvt
]->
GëWeight
();

288 
CÆcSèti°ics
(0);

290  
	gfSumOfWeights
;

297 
	gTMVA
::
Bö¨ySórchTªe
::
N‹mÆizeTªe
 ( 
°d
::
ve˘‹
< std::
∑ú
<
DoubÀ_t
, c⁄° 
TMVA
::
Evít
*> >::
ôî©‹
 
À·Bound
,

298 
°d
::
ve˘‹
< std::
∑ú
<
DoubÀ_t
, c⁄° 
TMVA
::
Evít
*> >::
ôî©‹
 
rightBound
,

299 
UI¡_t
 
a˘Dim
 )

302 i‡(
	gÀ·Bound
 =
rightBound
) ;

304 i‡(
	ga˘Dim
 =
fPîiod
Ë
a˘Dim
 = 0;

305 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
DoubÀ_t
, c⁄° 
	gTMVA
::
Evít
*> >::
ôî©‹
 
i
=
À·Bound
; 
	gi
!=
rightBound
; i++) {

306 
	gi
->
	gfú°
 = 
i
->
£c⁄d
->
GëVÆue
–
a˘Dim
 );

309 
	g°d
::
s‹t
–
À·Bound
, 
rightBound
 );

311 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
DoubÀ_t
, c⁄° 
	gTMVA
::
Evít
*> >::
ôî©‹
 
À·Temp
 = 
À·Bound
;

312 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
DoubÀ_t
, c⁄° 
	gTMVA
::
Evít
*> >::
ôî©‹
 
rightTemp
 = 
rightBound
;

315 
	gåue
) {

316 
	grightTemp
--;

317 i‡(
	grightTemp
 =
À·Temp
 ) {

320 
	gÀ·Temp
++;

321 i‡(
	gÀ·Temp
 =
rightTemp
) {

326 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
DoubÀ_t
, c⁄° 
	gTMVA
::
Evít
*> >::
ôî©‹
 
mid
 = 
À·Temp
;

327 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
DoubÀ_t
, c⁄° 
	gTMVA
::
Evít
*> >::
ôî©‹
 
midTemp
 = 
mid
;

329 i‡(
	gmid
!=
À·Bound
Ë
midTemp
--;

331 
	gmid
 !
À·Bound
 && 
mid
->
£c⁄d
->
GëVÆue
–
a˘Dim
 ) =
midTemp
->second->GetValue(áctDim )) {

332 
mid
--;

333 
	gmidTemp
--;

336 
In£π
–
mid
->
£c⁄d
 );

341 
N‹mÆizeTªe
–
À·Bound
, 
mid
, 
a˘Dim
+1 );

342 
	gmid
++;

345 
N‹mÆizeTªe
–
mid
, 
rightBound
, 
a˘Dim
+1 );

354 
	gTMVA
::
Bö¨ySórchTªe
::
	$N‹mÆizeTªe
()

356 
	`SëN‹mÆize
–
kFALSE
 );

357 
	`CÀ¨
–
NULL
 );

358 
this
->
	`SëRoŸ
(
NULL
);

359 
	`N‹mÆizeTªe
–
fN‹mÆizeTªeTabÀ
.
	`begö
(), fN‹mÆizeTªeTabÀ.
	`íd
(), 0 );

360 
	}
}

365 
	gTMVA
::
Bö¨ySórchTªe
::
	$CÀ¨
–
Node
* 
n
 )

367 
Bö¨ySórchTªeNode
* 
cuºítNode
 = (Bö¨ySórchTªeNode*)(
n
 =
NULL
 ? 
this
->
	`GëRoŸ
() :Ç);

369 i‡(
cuºítNode
->
	`GëLe·
(Ë!0Ë
	`CÀ¨
( currentNode->GetLeft() );

370 i‡(
cuºítNode
->
	`GëRight
(Ë!0Ë
	`CÀ¨
( currentNode->GetRight() );

372 i‡(
n
 !
NULL
Ë
dñëe
Ç;

375 
	}
}

381 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
SórchVﬁume
–
Vﬁume
* 
vﬁume
,

382 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>* 
evíts
 )

384  
SórchVﬁume
–
this
->
GëRoŸ
(), 
vﬁume
, 0, 
evíts
 );

391 
DoubÀ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
SórchVﬁume
–
Node
* 
t
, 
Vﬁume
* 
vﬁume
, 
I¡_t
 
dïth
,

392 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>* 
evíts
 )

394 i‡(
t
==
NULL
)  0;

396 
Bö¨ySórchTªeNode
* 
	g°
 = (Bö¨ySórchTªeNode*)
t
;

398 
DoubÀ_t
 
	gcou¡
 = 0.0;

399 i‡(
InVﬁume
–
°
->
GëEvítV
(), 
vﬁume
 )) {

400 
	gcou¡
 +
°
->
GëWeight
();

401 i‡(
	gNULL
 !
evíts
Ëevíts->
push_back
–
°
 );

403 i‡(
	g°
->
GëLe·
()==
NULL
 && 
°
->
GëRight
()==NULL) {

405  
cou¡
;

408 
Boﬁ_t
 
	gé
, 
	gå
;

409 
I¡_t
 
	gd
 = 
dïth
%
this
->
GëPîiode
();

410 i‡(
	gd
 !
°
->
GëSñe˘‹
()) {

411 
Log
(Ë<< 
kFATAL
 << "<SearchVolume> selector in Searchvolume "

412 << 
d
 << " !" << "nodê"<< 
°
->
GëSñe˘‹
(Ë<< 
Endl
;

414 
	gé
 = (*(
vﬁume
->
fLowî
))[
d
] < 
°
->
GëEvítV
()[d];

415 
	gå
 = (*(
vﬁume
->
fUµî
))[
d
] >
°
->
GëEvítV
()[d];

417 i‡(
	gé
Ë
	gcou¡
 +
SórchVﬁume
–
°
->
GëLe·
(), 
vﬁume
, (
dïth
+1), 
evíts
 );

418 i‡(
	gå
Ë
	gcou¡
 +
SórchVﬁume
–
°
->
GëRight
(), 
vﬁume
, (
dïth
+1), 
evíts
 );

420  
	gcou¡
;

426 
Boﬁ_t
 
	gTMVA
::
Bö¨ySórchTªe
::
InVﬁume
(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
evít
, 
Vﬁume
* 
vﬁume
 ) const

429 
Boﬁ_t
 
	gªsu…
 = 
Ál£
;

430 
UI¡_t
 
	giv¨
=0; iv¨< 
	gfPîiod
; ivar++) {

431 
	gªsu…
 = ( (*(
vﬁume
->
fLowî
))[
iv¨
] < 
evít
[ivar] &&

432 (*(
vﬁume
->
fUµî
))[
iv¨
] >
evít
[ivar] );

433 i‡(!
	gªsu…
) ;

435  
	gªsu…
;

441 
	gTMVA
::
Bö¨ySórchTªe
::
	$CÆcSèti°ics
–
Node
* 
n
 )

443 i‡(
fSèti°icsIsVÆid
) ;

445 
Bö¨ySórchTªeNode
 * 
cuºítNode
 = (Bö¨ySórchTªeNode*)
n
;

448 i‡(
n
 =
NULL
) {

449 
fSumOfWeights
 = 0;

450 
I¡_t
 
sb
=0; sb<2; sb++) {

451 
fNEvítsW
[
sb
] = 0;

452 
fMóns
[
sb
] = 
°d
::
ve˘‹
<
Flﬂt_t
>(
fPîiod
);

453 
fRMS
[
sb
] = 
°d
::
ve˘‹
<
Flﬂt_t
>(
fPîiod
);

454 
fMö
[
sb
] = 
°d
::
ve˘‹
<
Flﬂt_t
>(
fPîiod
);

455 
fMax
[
sb
] = 
°d
::
ve˘‹
<
Flﬂt_t
>(
fPîiod
);

456 
fSum
[
sb
] = 
°d
::
ve˘‹
<
DoubÀ_t
>(
fPîiod
);

457 
fSumSq
[
sb
] = 
°d
::
ve˘‹
<
DoubÀ_t
>(
fPîiod
);

458 
UI¡_t
 
j
=0; j<
fPîiod
; j++) {

459 
fMóns
[
sb
][
j
] = 
fRMS
[sb][j] = 
fSum
[sb][j] = 
fSumSq
[sb][j] = 0;

460 
fMö
[
sb
][
j
] = 
FLT_MAX
;

461 
fMax
[
sb
][
j
] = -
FLT_MAX
;

464 
cuºítNode
 = (
Bö¨ySórchTªeNode
*Ë
this
->
	`GëRoŸ
();

465 i‡(
cuºítNode
 =
NULL
) ;

468 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> & 
evtVec
 = 
cuºítNode
->
	`GëEvítV
();

469 
DoubÀ_t
 
weight
 = 
cuºítNode
->
	`GëWeight
();

472 
I¡_t
 
ty≥
 = 
	`I¡_t
(
cuºítNode
->
	`GëCœss
())=
Ty≥s
::
kSig«l
 ? 0 : 1;

474 
fNEvítsW
[
ty≥
] +
weight
;

475 
fSumOfWeights
 +
weight
;

477 
UI¡_t
 
j
=0; j<
fPîiod
; j++) {

478 
Flﬂt_t
 
vÆ
 = 
evtVec
[
j
];

479 
fSum
[
ty≥
][
j
] +
vÆ
*
weight
;

480 
fSumSq
[
ty≥
][
j
] +
vÆ
*vÆ*
weight
;

481 i‡(
vÆ
 < 
fMö
[
ty≥
][
j
]) fMin[type][j] = val;

482 i‡(
vÆ
 > 
fMax
[
ty≥
][
j
]) fMax[type][j] = val;

485 i‡–(
cuºítNode
->
	`GëLe·
(Ë!
NULL
ËË
	`CÆcSèti°ics
( currentNode->GetLeft() );

486 i‡–(
cuºítNode
->
	`GëRight
(Ë!
NULL
ËË
	`CÆcSèti°ics
( currentNode->GetRight() );

488 i‡(
n
 =
NULL
) {

489 
I¡_t
 
sb
=0; sb<2; sb++) {

490 
UI¡_t
 
j
=0; j<
fPîiod
; j++) {

491 i‡(
fNEvítsW
[
sb
] =0Ë{ 
fMóns
[sb][
j
] = 
fRMS
[sb][j] = 0; ; }

492 
fMóns
[
sb
][
j
] = 
fSum
[sb][j]/
fNEvítsW
[sb];

493 
fRMS
[
sb
][
j
] = 
TM©h
::
	`Sqπ
(
fSumSq
[sb][j]/
fNEvítsW
[sb] - 
fMóns
[sb][j]*fMeans[sb][j]);

496 
fSèti°icsIsVÆid
 = 
kTRUE
;

500 
	}
}

506 
I¡_t
 
	gTMVA
::
Bö¨ySórchTªe
::
SórchVﬁumeWôhMaxLimô
–
Vﬁume
 *
vﬁume
, 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>* 
evíts
,

507 
I¡_t
 
max_poöts
 )

509 i‡(
	gthis
->
GëRoŸ
(Ë=
NULL
)  0;

511 
	g°d
::
queue
< 
°d
::
∑ú
< c⁄° 
Bö¨ySórchTªeNode
*, 
	gI¡_t
 > > 
	gqueue
;

512 
	g°d
::
∑ú
< c⁄° 
Bö¨ySórchTªeNode
*, 
	gI¡_t
 > 
	g°
 = 
°d
::
make_∑ú
–(c⁄° Bö¨ySórchTªeNode*)
this
->
GëRoŸ
(), 0 );

513 
	gqueue
.
push
–
°
 );

515 
I¡_t
 
	gcou¡
 = 0;

517  !
	gqueue
.
em±y
() ) {

518 
	g°
 = 
queue
.
‰⁄t
(); 
	gqueue
.
p›
();

520 i‡(
	gcou¡
 =
max_poöts
)

521  
cou¡
;

523 i‡(
InVﬁume
–
°
.
fú°
->
GëEvítV
(), 
vﬁume
 )) {

524 
	gcou¡
++;

525 i‡(
	gNULL
 !
evíts
Ëevíts->
push_back
–
°
.
fú°
 );

528 
Boﬁ_t
 
	gé
, 
	gå
;

529 
I¡_t
 
	gd
 = 
°
.
£c⁄d
;

530 i‡–
	gd
 =
I¡_t
(
this
->
GëPîiode
()ËË
d
 = 0;

532 i‡(
	gd
 !
°
.
fú°
->
GëSñe˘‹
()) {

533 
Log
(Ë<< 
kFATAL
 << "<SearchVolume> selector in Searchvolume "

534 << 
d
 << " !" << "nodê"<< 
°
.
fú°
->
GëSñe˘‹
(Ë<< 
Endl
;

537 
	gé
 = (*(
vﬁume
->
fLowî
))[
d
] < 
°
.
fú°
->
GëEvítV
()[d] && st.fú°->
GëLe·
(Ë!
NULL
;

538 
	gå
 = (*(
vﬁume
->
fUµî
))[
d
] >
°
.
fú°
->
GëEvítV
()[d] && st.fú°->
GëRight
(Ë!
NULL
;

540 i‡(
	gé
Ë
	gqueue
.
push
–
°d
::
make_∑ú
–(c⁄° 
Bö¨ySórchTªeNode
*)
°
.
fú°
->
GëLe·
(), 
d
+1 ) );

541 i‡(
	gå
Ë
	gqueue
.
push
–
°d
::
make_∑ú
–(c⁄° 
Bö¨ySórchTªeNode
*)
°
.
fú°
->
GëRight
(), 
d
+1 ) );

544  
	gcou¡
;

	@src/BinarySearchTreeNode.cxx

41 
	~<°dex˚±
>

42 
	~<iom™ù
>

43 
	~<as£π.h
>

44 
	~<c°dlib
>

46 
	~"TSåög.h
"

48 
	~"TMVA/Bö¨ySórchTªeNode.h
"

49 
	~"TMVA/Evít.h
"

50 
	~"TMVA/MsgLoggî.h
"

51 
	~"TMVA/Node.h
"

52 
	~"TMVA/Toﬁs.h
"

54 
CœssImp
(
TMVA
::
Bö¨ySórchTªeNode
);

59 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$Bö¨ySórchTªeNode
–c⁄° 
Evít
* 
e
, 
UI¡_t
 )

60 : 
TMVA
::
	`Node
(),

61 
	`fEvítV
 ( 
°d
::
ve˘‹
<
Flﬂt_t
>() ),

62 
	`fT¨gës
 ( 
°d
::
ve˘‹
<
Flﬂt_t
>() ),

63 
	`fWeight
 ( 
e
==0?0:e->
	`GëWeight
() ),

64 
	`fCœss
 ( 
e
==0?0:e->
	`GëCœss
() ),

65 
	`fSñe˘‹
( -1 )

67 i‡(
e
!=0) {

68 
UI¡_t
 
iv¨
=0; iv¨<
e
->
	`GëNV¨übÀs
(); iv¨++Ë
fEvítV
.
	`push_back
”->
	`GëVÆue
(ivar));

69 
°d
::
ve˘‹
<
Flﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
e
->
	`GëT¨gës
().
	`begö
(); ià<É->GëT¨gës().
	`íd
(); it++ ) {

70 
fT¨gës
.
	`push_back
–(*
ô
) );

73 
	}
}

78 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$Bö¨ySórchTªeNode
–
Bö¨ySórchTªeNode
* 
∑ª¡
, 
pos
 ) :

79 
TMVA
::
	`Node
(
∑ª¡
,
pos
),

80 
	`fEvítV
 ( 
°d
::
ve˘‹
<
Flﬂt_t
>() ),

81 
	`fT¨gës
 ( 
°d
::
ve˘‹
<
Flﬂt_t
>() ),

82 
	`fWeight
 ( 0 ),

83 
	`fCœss
 ( 0 ),

84 
	`fSñe˘‹
( -1 )

86 
	}
}

92 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$Bö¨ySórchTªeNode
 ( c⁄° 
Bö¨ySórchTªeNode
 &
n
,

93 
Bö¨ySórchTªeNode
* 
∑ª¡
 ) :

94 
TMVA
::
	`Node
(
n
),

95 
	`fEvítV
 ( 
n
.
fEvítV
 ),

96 
	`fT¨gës
 ( 
n
.
fT¨gës
 ),

97 
	`fWeight
 ( 
n
.
fWeight
 ),

98 
	`fCœss
 ( 
n
.
fCœss
 ),

99 
	$fSñe˘‹
–
n
.
fSñe˘‹
 )

101 
this
->
	`SëP¨ít
–
∑ª¡
 );

102 i‡(
n
.
	`GëLe·
(Ë=0 ) 
this
->
	`SëLe·
(
NULL
);

103 
this
->
	`SëLe·
–
√w
 
	`Bö¨ySórchTªeNode
–*((
Bö¨ySórchTªeNode
*)(
n
.
	`GëLe·
())),this));

105 i‡(
n
.
	`GëRight
(Ë=0 ) 
this
->
	`SëRight
(
NULL
);

106 
this
->
	`SëRight
–
√w
 
	`Bö¨ySórchTªeNode
–*((
Bö¨ySórchTªeNode
*)(
n
.
	`GëRight
())),this));

108 
	}
}

113 
	gTMVA
::
Bö¨ySórchTªeNode
::~
	$Bö¨ySórchTªeNode
()

115 
	}
}

120 
Boﬁ_t
 
TMVA
::
Bö¨ySórchTªeNode
::
	$G€sRight
–c⁄° 
TMVA
::
Evít
& 
e
 ) const

122 i‡(
e
.
	`GëVÆue
(
fSñe˘‹
Ë> 
	`GëEvítV
()[fSñe˘‹]Ë 
åue
;

123  
Ál£
;

124 
	}
}

129 
Boﬁ_t
 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$G€sLe·
(c⁄° 
TMVA
::
Evít
& 
e
) const

131 i‡(
e
.
	`GëVÆue
(
fSñe˘‹
Ë<
	`GëEvítV
()[fSñe˘‹]Ë 
åue
;

132  
Ál£
;

133 
	}
}

139 
Boﬁ_t
 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$EquÆsMe
(c⁄° 
TMVA
::
Evít
& 
e
) const

141 
Boﬁ_t
 
ªsu…
 = 
åue
;

142 
UI¡_t
 
i
=0; i<
	`GëEvítV
().
	`size
(); i++) {

143 
ªsu…
&(
e
.
	`GëVÆue
(
i
Ë=
	`GëEvítV
()[i]);

145  
ªsu…
;

146 
	}
}

151 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$Pröt
–
°d
::
o°ªam
& 
os
 ) const

153 
os
 << "< *** " << 
°d
::
ídl
 << "Çode.Data: ";

154 
°d
::
ve˘‹
<
Flﬂt_t
>::
c⁄°_ôî©‹
 
ô
=
fEvítV
.
	`begö
();

155 
os
 << 
fEvítV
.
	`size
() << " vars: ";

156 ;
ô
!=
fEvítV
.
	`íd
(); it++Ë
os
 << " " << 
°d
::
	`£tw
(10) << *it;

157 
os
 << " EvtWeighà" << 
°d
::
	`£tw
(10Ë<< 
fWeight
;

158 
os
 << 
°d
::
	`£tw
(10Ë<< "Cœss: " << 
	`GëCœss
(Ë<< std::
ídl
;

160 
os
 << "Sñe˘‹: " << 
this
->
	`GëSñe˘‹
(Ë<<
°d
::
ídl
;

161 
os
 << "Myáddªs†i†" << (
this
) << ", ";

162 i‡(
this
->
	`GëP¨ít
(Ë!
NULL
Ë
os
 << "Öarentátáddr: " << (this->GetParent()) ;

163 i‡(
this
->
	`GëLe·
(Ë!
NULL
Ë
os
 << "Üeft daughterátáddr: " << (this->GetLeft());

164 i‡(
this
->
	`GëRight
(Ë!
NULL
Ë
os
 << "Ñight daughterátáddr: " << (this->GetRight()) ;

166 
os
 << " **** > "<< 
°d
::
ídl
;

167 
	}
}

172 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$PrötRec
–
°d
::
o°ªam
& 
os
 ) const

174 
os
 << 
this
->
	`GëDïth
(Ë<< " " <<Åhis->
	`GëPos
(Ë<< " " <<Åhis->
	`GëSñe˘‹
()

175 << " d©a: " << 
°d
::
ídl
;

176 
°d
::
ve˘‹
<
Flﬂt_t
>::
c⁄°_ôî©‹
 
ô
=
fEvítV
.
	`begö
();

177 
os
 << 
fEvítV
.
	`size
() << " vars: ";

178 ;
ô
!=
fEvítV
.
	`íd
(); it++Ë
os
 << " " << 
°d
::
	`£tw
(10) << *it;

179 
os
 << " EvtWeighà" << 
°d
::
	`£tw
(10Ë<< 
fWeight
;

180 
os
 << 
°d
::
	`£tw
(10Ë<< "Cœss: " << 
	`GëCœss
(Ë<< std::
ídl
;

182 i‡(
this
->
	`GëLe·
(Ë!
NULL
Èhis->GëLe·()->
	`PrötRec
(
os
) ;

183 i‡(
this
->
	`GëRight
(Ë!
NULL
Èhis->GëRight()->
	`PrötRec
(
os
);

184 
	}
}

189 
Boﬁ_t
 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$RódD©aRec‹d
–
°d
::
i°ªam
& 
is
, 
UI¡_t
 )

191 
I¡_t
 
ômp
;

192 
°d
::
°rög
 
tmp
;

193 
UI¡_t
 
dïth
, 
£lIdx
, 
nv¨
;

194 
Ch¨_t
 
pos
;

195 
TSåög
 
sigbkgd
;

196 
Flﬂt_t
 
evtVÆFlﬂt
;

199 
is
 >> 
ômp
;

200 i‡–
ômp
==-1 ) {  
kFALSE
; }

202 
dïth
=(
UI¡_t
)
ômp
;

203 
is
 >> 
pos
 >> 
£lIdx
;

204 
this
->
	`SëDïth
(
dïth
);

205 
this
->
	`SëPos
(
pos
);

206 
this
->
	`SëSñe˘‹
(
£lIdx
);

210 
is
 >> 
nv¨
;

211 
fEvítV
.
	`˛ór
();

212 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

213 
is
 >> 
evtVÆFlﬂt
; 
fEvítV
.
	`push_back
(evtValFloat);

215 
is
 >> 
tmp
 >> 
fWeight
;

216 
is
 >> 
sigbkgd
;

217 
fCœss
 = (
sigbkgd
=="S" || sigbkgd=="Signal")?0:1;

219  
kTRUE
;

220 
	}
}

225 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$RódAâribuãs
(* 
node
, 
UI¡_t
 )

227 
	`gToﬁs
().
	`RódAâr
(
node
, "£À˘‹", 
fSñe˘‹
 );

228 
	`gToﬁs
().
	`RódAâr
(
node
, "weight", 
fWeight
 );

229 
°d
::
°rög
 
sb
;

230 
	`gToﬁs
().
	`RódAâr
(
node
, "ty≥", 
sb
);

231 i‡(
sb
=="Signal" || sb=="0")

232 
fCœss
=0;

233 i‡(
sb
=="1")

234 
fCœss
=1;

236 
I¡_t
 
nv¨s
;

237 
	`gToﬁs
().
	`RódAâr
(
node
, "NV¨s",
nv¨s
);

238 
fEvítV
.
	`ªsize
(
nv¨s
);

239 
	}
}

245 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$AddAâribuãsToNode
(* 
node
) const {

246 
	`gToﬁs
().
	`AddAâr
(
node
, "£À˘‹", 
fSñe˘‹
 );

247 
	`gToﬁs
().
	`AddAâr
(
node
, "weight", 
fWeight
 );

249 
	`gToﬁs
().
	`AddAâr
(
node
, "ty≥", 
	`GëCœss
());

250 
	`gToﬁs
().
	`AddAâr
(
node
, "NV¨s", 
fEvítV
.
	`size
());

251 
	}
}

257 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$AddC⁄ã¡ToNode
–
°d
::
°rög°ªam
& 
s
 ) const

259 
°d
::
ios_ba£
::
fmtÊags
 
ff
 = 
s
.
	`Êags
();

260 
s
.
	`¥ecisi⁄
( 16 );

261 
UI¡_t
 
i
=0; i<
fEvítV
.
	`size
(); i++Ë
s
 << 
°d
::
scõ¡ific
 << " " << fEventV[i];

262 
UI¡_t
 
i
=0; i<
fT¨gës
.
	`size
(); i++Ë
s
 << 
°d
::
scõ¡ific
 << " " << fTargets[i];

263 
s
.
	`Êags
(
ff
);

264 
	}
}

268 
	gTMVA
::
Bö¨ySórchTªeNode
::
	$RódC⁄ã¡
–
°d
::
°rög°ªam
& 
s
 )

270 
Flﬂt_t
 
ãmp
=0;

271 
UI¡_t
 
i
=0; i<
fEvítV
.
	`size
(); i++){

272 
s
 >> 
ãmp
;

273 
fEvítV
[
i
]=
ãmp
;

275 
s
 >> 
ãmp
Ë
fT¨gës
.
	`push_back
(temp);

276 
	}
}

	@src/BinaryTree.cxx

38 
	~<°rög
>

39 
	~<°dex˚±
>

41 
	~"ThªadLoˇlSt‹age.h
"

43 
	~"TMVA/Bö¨yTªe.h
"

44 
	~"TMVA/MsgLoggî.h
"

45 
	~"TMVA/Evít.h
"

46 
	~"TMVA/Node.h
"

47 
	~"TMVA/Toﬁs.h
"

48 
	~"TMVA/Ty≥s.h
"

50 
CœssImp
(
TMVA
::
Bö¨yTªe
);

55 
	gTMVA
::
Bö¨yTªe
::
	$Bö¨yTªe
( )

56 : 
	`fRoŸ
 ( 
NULL
 ),

57 
	`fNNodes
( 0 ),

58 
	$fDïth
 ( 0 )

60 
	}
}

65 
	gTMVA
::
Bö¨yTªe
::~
	$Bö¨yTªe
( )

67 
this
->
	`DñëeNode
–
fRoŸ
 );

68 
fRoŸ
=0;

69 
	}
}

74 
	gTMVA
::
Bö¨yTªe
::
	$DñëeNode
–
TMVA
::
Node
* 
node
 )

76 i‡(
node
 !
NULL
) {

77 
this
->
	`DñëeNode
(
node
->
	`GëLe·
());

78 
this
->
	`DñëeNode
(
node
->
	`GëRight
());

80 
dñëe
 
node
;

82 
	}
}

87 
	gTMVA
::
Node
* 
TMVA
::
Bö¨yTªe
::
	$GëLe·Daughãr
–
Node
 *
n
)

89  (
Node
*Ë
n
->
	`GëLe·
();

90 
	}
}

95 
	gTMVA
::
Node
* 
TMVA
::
Bö¨yTªe
::
	$GëRightDaughãr
–
Node
 *
n
)

97  (
Node
*Ë
n
->
	`GëRight
();

98 
	}
}

103 
UI¡_t
 
	gTMVA
::
Bö¨yTªe
::
	$Cou¡Nodes
(
TMVA
::
Node
 *
n
)

105 i‡(
n
 =
NULL
){

106 
n
 = (
Node
*)
this
->
	`GëRoŸ
();

107 i‡(
n
 =
NULL
)  0 ;

110 
UI¡_t
 
cou¡Nodes
=1;

112 i‡(
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
){

113 
cou¡Nodes
 +
this
->
	`Cou¡Nodes
–this->
	`GëLe·Daughãr
(
n
) );

115 i‡(
this
->
	`GëRightDaughãr
(
n
Ë!
NULL
) {

116 
cou¡Nodes
 +
this
->
	`Cou¡Nodes
–this->
	`GëRightDaughãr
(
n
) );

119  
fNNodes
 = 
cou¡Nodes
;

120 
	}
}

125 
	gTMVA
::
Bö¨yTªe
::
	$Pröt
(
°d
::
o°ªam
 & 
os
) const

127 
this
->
	`GëRoŸ
()->
	`PrötRec
(
os
);

128 
os
 << "-1" << 
°d
::
ídl
;

129 
	}
}

134 * 
	gTMVA
::
Bö¨yTªe
::
	$AddXMLTo
(* 
∑ª¡
) const {

135 * 
bdt
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "BinaryTree");

136 
	`gToﬁs
().
	`AddAâr
–
bdt
, "ty≥" , 
	`CœssName
() );

137 
this
->
	`GëRoŸ
()->
	`AddXMLTo
(
bdt
);

138  
bdt
;

139 
	}
}

144 
	gTMVA
::
Bö¨yTªe
::
	$RódXML
(* 
node
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 ) {

145 
this
->
	`DñëeNode
–
fRoŸ
 );

146 
fRoŸ

	`Cª©eNode
();

148 * 
ånode
 = 
	`gToﬁs
().
	`GëChûd
(
node
);

149 
fRoŸ
->
	`RódXML
(
ånode
, 
tmva_Vîsi⁄_Code
);

151 
this
->
	`SëTŸÆTªeDïth
();

152 
	}
}

158 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<< (
°d
::o°ªam& 
os
, c⁄° 
	gTMVA
::
Bö¨yTªe
& 
åì
)

160 
åì
.
Pröt
(
os
);

161  
	gos
;

169 
	gTMVA
::
Bö¨yTªe
::
	$Ród
(
°d
::
i°ªam
 & 
i°r
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 )

171 
Node
 * 
cuºítNode
 = 
	`GëRoŸ
();

172 
Node
* 
∑ª¡
 = 0;

174 if(
cuºítNode
==0) {

175 
cuºítNode
=
	`Cª©eNode
();

176 
	`SëRoŸ
(
cuºítNode
);

180 i‡–! 
cuºítNode
->
	`RódD©aRec‹d
(
i°r
, 
tmva_Vîsi⁄_Code
) ) {

181 
dñëe
 
cuºítNode
;

182 
this
->
	`SëTŸÆTªeDïth
();

187  
∑ª¡
!=0 &&Ö¨ít->
	`GëDïth
(Ë!
cuºítNode
->GëDïth()-1Ë∑ª¡ı¨ít->
	`GëP¨ít
();

189 i‡(
∑ª¡
!=0) {

190 
cuºítNode
->
	`SëP¨ít
(
∑ª¡
);

191 i‡(
cuºítNode
->
	`GëPos
()=='l'Ë
∑ª¡
->
	`SëLe·
(currentNode);

192 i‡(
cuºítNode
->
	`GëPos
()=='r'Ë
∑ª¡
->
	`SëRight
(currentNode);

195 
∑ª¡
 = 
cuºítNode
;

197 
cuºítNode
 = 
	`Cª©eNode
();

199 
	}
}

204 
	g°d
::
i°ªam
& 
TMVA
::
›î©‹
>> (
°d
::i°ªam& 
i°r
, 
	gTMVA
::
Bö¨yTªe
& 
åì
)

206 
åì
.
Ród
(
i°r
);

207  
	gi°r
;

213 
	gTMVA
::
Bö¨yTªe
::
	$SëTŸÆTªeDïth
–
Node
 *
n
)

215 i‡(
n
 =
NULL
){

216 
n
 = (
Node
*Ë
this
->
	`GëRoŸ
();

217 i‡(
n
 =
NULL
) {

218 
	`Log
(Ë<< 
kFATAL
 << "SëTŸÆTªeDïth: sèπed wôh undeföed ROOTÇode" <<
Endl
;

222 i‡(
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
){

223 
this
->
	`SëTŸÆTªeDïth
–this->
	`GëLe·Daughãr
(
n
) );

225 i‡(
this
->
	`GëRightDaughãr
(
n
Ë!
NULL
) {

226 
this
->
	`SëTŸÆTªeDïth
–this->
	`GëRightDaughãr
(
n
) );

228 i‡(
n
->
	`GëDïth
(Ë> 
this
->
	`GëTŸÆTªeDïth
()Ëthis->
	`SëTŸÆTªeDïth
(n->GetDepth());

231 
	}
}

235 
	gTMVA
::
MsgLoggî
& 
TMVA
::
Bö¨yTªe
::
	$Log
() const {

236 
	`TTHREAD_TLS_DECL_ARG
(
MsgLoggî
,
loggî
,"BinaryTree");

237  
loggî
;

238 
	}
}

	@src/CCPruner.cxx

22 
	~"TMVA/CCPru√r.h
"

23 
	~"TMVA/Sï¨©i⁄Ba£.h
"

24 
	~"TMVA/GöiIndex.h
"

25 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

26 
	~"TMVA/CCTªeWøµî.h
"

27 
	~"TMVA/D©aSë.h
"

29 
	~"Rty≥s.h
"

31 
	~<io°ªam
>

32 
	~<f°ªam
>

33 
	~<limôs
>

34 
	~<m©h.h
>

60 
«me•a˚
 
	gTMVA
 {

61 
˛ass
 
	gDecisi⁄Tªe
;

64 
usög
 
«me•a˚
 
	gTMVA
;

69 
	gCCPru√r
::
	$CCPru√r
–
Decisi⁄Tªe
* 
t_max
, c⁄° 
EvítLi°
* 
vÆid©i⁄Sam∂e
,

70 
Sï¨©i⁄Ba£
* 
quÆôyIndex
 ) :

71 
	`fAÕha
(-1.0),

72 
	`fVÆid©i⁄Sam∂e
(
vÆid©i⁄Sam∂e
),

73 
	`fVÆid©i⁄D©aSë
(
NULL
),

74 
	`fO±imÆK
(-1)

76 
fTªe
 = 
t_max
;

78 if(
quÆôyIndex
 =
NULL
) {

79 
fOwnQIndex
 = 
åue
;

80 
fQuÆôyIndex
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

83 
fOwnQIndex
 = 
Ál£
;

84 
fQuÆôyIndex
 = 
quÆôyIndex
;

86 
fDebug
 = 
kTRUE
;

87 
	}
}

92 
	gCCPru√r
::
	$CCPru√r
–
Decisi⁄Tªe
* 
t_max
, c⁄° 
D©aSë
* 
vÆid©i⁄Sam∂e
,

93 
Sï¨©i⁄Ba£
* 
quÆôyIndex
 ) :

94 
	`fAÕha
(-1.0),

95 
	`fVÆid©i⁄Sam∂e
(
NULL
),

96 
	`fVÆid©i⁄D©aSë
(
vÆid©i⁄Sam∂e
),

97 
	`fO±imÆK
(-1)

99 
fTªe
 = 
t_max
;

101 if(
quÆôyIndex
 =
NULL
) {

102 
fOwnQIndex
 = 
åue
;

103 
fQuÆôyIndex
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

106 
fOwnQIndex
 = 
Ál£
;

107 
fQuÆôyIndex
 = 
quÆôyIndex
;

109 
fDebug
 = 
kTRUE
;

110 
	}
}

115 
	gCCPru√r
::~
	$CCPru√r
( )

117 if(
fOwnQIndex
Ë
dñëe
 
fQuÆôyIndex
;

119 
	}
}

124 
	gCCPru√r
::
	$O±imize
( )

126 
Boﬁ_t
 
HaveSt›C⁄dôi⁄
 = 
fAÕha
 > 0;

129 
CCTªeWøµî
* 
dTWøµî
 = 
√w
 
	`CCTªeWøµî
(
fTªe
, 
fQuÆôyIndex
);

131 
I¡_t
 
k
 = 0;

132 
DoubÀ_t
 
ïsû⁄
 = 
°d
::
numîic_limôs
<>::
	`ïsû⁄
();

133 
DoubÀ_t
 
Æpha
 = -1.0e10;

135 
°d
::
of°ªam
 
outfûe
;

136 i‡(
fDebug
Ë
outfûe
.
	`›í
("costcomplexity.log");

137 if(!
HaveSt›C⁄dôi⁄
 && (
fVÆid©i⁄Sam∂e
 =
NULL
 && 
fVÆid©i⁄D©aSë
 == NULL) ) {

138 i‡(
fDebug
Ë
outfûe
 << "ERROR:ÇÿvÆid©i⁄ sam∂e, sÿˇ¬Ÿ o±imizê¥unög!" << 
°d
::
ídl
;

139 
dñëe
 
dTWøµî
;

140 i‡(
fDebug
Ë
outfûe
.
	`˛o£
();

144 
CCTªeWøµî
::
CCTªeNode
* 
R
 = 
dTWøµî
->
	`GëRoŸ
();

145 
R
->
	`GëNLófDaughãrs
() > 1) {

146 if(
R
->
	`GëMöAÕhaC
(Ë> 
Æpha
)

147 
Æpha
 = 
R
->
	`GëMöAÕhaC
();

149 if(
HaveSt›C⁄dôi⁄
 && 
Æpha
 > 
fAÕha
) ;

151 
CCTªeWøµî
::
CCTªeNode
* 
t
 = 
R
;

153 
t
->
	`GëMöAÕhaC
(Ë<Å->
	`GëAÕhaC
()) {

155 if(
	`Ábs
(
t
->
	`GëMöAÕhaC
(Ë-Å->
	`GëLe·Daughãr
()->GëMöAÕhaC())/Ábs—->GëMöAÕhaC()Ë< 
ïsû⁄
)

156 
t
 =Å->
	`GëLe·Daughãr
();

158 
t
 =Å->
	`GëRightDaughãr
();

161 if–
t
 =
R
 ) {

162 i‡(
fDebug
Ë
outfûe
 << 
°d
::
ídl
 << "CaughtÅryingÅoÖruneÅheÑootÇode!" << std::endl;

166 
CCTªeWøµî
::
CCTªeNode
* 
n
 = 
t
;

168 i‡(
fDebug
){

169 
outfûe
 << "===========================" << 
°d
::
ídl


170 << "Prunög bønchÜi°ed bñow" << 
°d
::
ídl


171 << "===========================" << 
°d
::
ídl
;

172 
t
->
	`PrötRec
–
outfûe
 );

175 i‡(!(
t
->
	`GëLe·Daughãr
()Ë&& !—->
	`GëRightDaughãr
()) ) {

178 
dTWøµî
->
	`Pru√Node
(
t
);

180 
t
 !
R
) {

181 
t
 =Å->
	`GëMŸhî
();

182 
t
->
	`SëNLófDaughãrs
—->
	`GëLe·Daughãr
()->
	`GëNLófDaughãrs
(Ë+Å->
	`GëRightDaughãr
()->GetNLeafDaughters());

183 
t
->
	`SëResub°ôuti⁄E°im©e
—->
	`GëLe·Daughãr
()->
	`GëResub°ôuti⁄E°im©e
() +

184 
t
->
	`GëRightDaughãr
()->
	`GëResub°ôuti⁄E°im©e
());

185 
t
->
	`SëAÕhaC
(—->
	`GëNodeResub°ôuti⁄E°im©e
(Ë-Å->
	`GëResub°ôuti⁄E°im©e
())/—->
	`GëNLófDaughãrs
() - 1));

186 
t
->
	`SëMöAÕhaC
(
°d
::
	`mö
—->
	`GëAÕhaC
(), std::mö—->
	`GëLe·Daughãr
()->
	`GëMöAÕhaC
(),

187 
t
->
	`GëRightDaughãr
()->
	`GëMöAÕhaC
())));

189 
k
 += 1;

190 if(!
HaveSt›C⁄dôi⁄
) {

191 
DoubÀ_t
 
q
;

192 i‡(
fVÆid©i⁄D©aSë
 !
NULL
Ë
q
 = 
dTWøµî
->
	`Te°TªeQuÆôy
(fValidationDataSet);

193 
q
 = 
dTWøµî
->
	`Te°TªeQuÆôy
(
fVÆid©i⁄Sam∂e
);

194 
fQuÆôyIndexLi°
.
	`push_back
(
q
);

197 
fQuÆôyIndexLi°
.
	`push_back
(1.0);

199 
fPru√Sequí˚
.
	`push_back
(
n
->
	`GëDTNode
());

200 
fPru√SåígthLi°
.
	`push_back
(
Æpha
);

203 
DoubÀ_t
 
qmax
 = -1.0e6;

204 if(!
HaveSt›C⁄dôi⁄
) {

205 
UI¡_t
 
i
 = 0; i < 
fQuÆôyIndexLi°
.
	`size
(); i++) {

206 if(
fQuÆôyIndexLi°
[
i
] > 
qmax
) {

207 
qmax
 = 
fQuÆôyIndexLi°
[
i
];

208 
k
 = 
i
;

211 
fO±imÆK
 = 
k
;

214 
fO±imÆK
 = 
fPru√Sequí˚
.
	`size
() - 1;

217 i‡(
fDebug
){

218 
outfûe
 << 
°d
::
ídl
 << "************ Summary **************" << std::endl

219 << "Numbî o‡åì†öÅhê£quí˚: " << 
fPru√Sequí˚
.
	`size
(Ë<< 
°d
::
ídl
;

221 
outfûe
 << "Pruning strengthÖarameters: [";

222 
UI¡_t
 
i
 = 0; i < 
fPru√SåígthLi°
.
	`size
()-1; i++)

223 
outfûe
 << 
fPru√SåígthLi°
[
i
] << ", ";

224 
outfûe
 << 
fPru√SåígthLi°
[fPru√SåígthLi°.
	`size
()-1] << "]" << 
°d
::
ídl
;

226 
outfûe
 << "MisclassificationÑates: [";

227 
UI¡_t
 
i
 = 0; i < 
fQuÆôyIndexLi°
.
	`size
()-1; i++)

228 
outfûe
 << 
fQuÆôyIndexLi°
[
i
] << ", ";

229 
outfûe
 << 
fQuÆôyIndexLi°
[fQuÆôyIndexLi°.
	`size
()-1] << "]" << 
°d
::
ídl
;

231 
outfûe
 << "O±imÆ index: " << 
fO±imÆK
+1 << 
°d
::
ídl
;

232 
outfûe
.
	`˛o£
();

234 
dñëe
 
dTWøµî
;

235 
	}
}

240 
	g°d
::
ve˘‹
<
Decisi⁄TªeNode
*> 
CCPru√r
::
	$GëO±imÆPru√Sequí˚
( ) const

242 
°d
::
ve˘‹
<
Decisi⁄TªeNode
*> 
›timÆSequí˚
;

243 if–
fO±imÆK
 >= 0 ) {

244  
I¡_t
 
i
 = 0; i < 
fO±imÆK
; i++ ) {

245 
›timÆSequí˚
.
	`push_back
(
fPru√Sequí˚
[
i
]);

248  
›timÆSequí˚
;

249 
	}
}

	@src/CCTreeWrapper.cxx

28 
	~"TMVA/CCTªeWøµî.h
"

29 
	~"TMVA/Decisi⁄Tªe.h
"

31 
	~<io°ªam
>

32 
	~<limôs
>

34 
usög
 
«me•a˚
 
	gTMVA
;

39 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$CCTªeNode
–
Decisi⁄TªeNode
* 
n
 ) :

40 
	`Node
(),

41 
	`fNLófDaughãrs
(0),

42 
	`fNodeResub°ôuti⁄E°im©e
(-1.0),

43 
	`fResub°ôuti⁄E°im©e
(-1.0),

44 
	`fAÕhaC
(-1.0),

45 
	`fMöAÕhaC
(-1.0),

46 
	$fDTNode
(
n
)

48 i‡–
n
 !
NULL
 &&Ç->
	`GëRight
(Ë!NULL &&Ç->
	`GëLe·
() != NULL ) {

49 
	`SëRight
–
√w
 
	`CCTªeNode
–((
Decisi⁄TªeNode
*Ë
n
->
	`GëRight
()) ) );

50 
	`GëRight
()->
	`SëP¨ít
(
this
);

51 
	`SëLe·
–
√w
 
	`CCTªeNode
–((
Decisi⁄TªeNode
*Ë
n
->
	`GëLe·
()) ) );

52 
	`GëLe·
()->
	`SëP¨ít
(
this
);

54 
	}
}

59 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::~
	$CCTªeNode
() {

60 if(
	`GëLe·
(Ë!
NULL
Ë
dñëe
 
	`GëLe·Daughãr
();

61 if(
	`GëRight
(Ë!
NULL
Ë
dñëe
 
	`GëRightDaughãr
();

62 
	}
}

67 
Boﬁ_t
 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$RódD©aRec‹d
–
°d
::
i°ªam
& 
ö
, 
UI¡_t
 ) {

68 
°d
::
°rög
 
hódî
, 
tôÀ
;

69 
ö
 >> 
hódî
;

70 
ö
 >> 
tôÀ
; i¿>> 
fNLófDaughãrs
;

71 
ö
 >> 
tôÀ
; i¿>> 
fNodeResub°ôuti⁄E°im©e
;

72 
ö
 >> 
tôÀ
; i¿>> 
fResub°ôuti⁄E°im©e
;

73 
ö
 >> 
tôÀ
; i¿>> 
fAÕhaC
;

74 
ö
 >> 
tôÀ
; i¿>> 
fMöAÕhaC
;

75  
åue
;

76 
	}
}

81 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$Pröt
–
°d
::
o°ªam
& 
os
 ) const {

82 
os
 << "----------------------" << 
°d
::
ídl


83 << "|~T_t| " << 
fNLófDaughãrs
 << 
°d
::
ídl


84 << "R—): " << 
fNodeResub°ôuti⁄E°im©e
 << 
°d
::
ídl


85 << "R(T_t): " << 
fResub°ôuti⁄E°im©e
 << 
°d
::
ídl


86 << "g—): " << 
fAÕhaC
 << 
°d
::
ídl


87 << "G—): " << 
fMöAÕhaC
 << 
°d
::
ídl
;

88 
	}
}

93 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$PrötRec
–
°d
::
o°ªam
& 
os
 ) const {

94 
this
->
	`Pröt
(
os
);

95 if(
this
->
	`GëLe·
(Ë!
NULL
 &&Åhis->
	`GëRight
() != NULL) {

96 
this
->
	`GëLe·
()->
	`PrötRec
(
os
);

97 
this
->
	`GëRight
()->
	`PrötRec
(
os
);

99 
	}
}

104 
	gTMVA
::
CCTªeWøµî
::
	$CCTªeWøµî
–
Decisi⁄Tªe
* 
T
, 
Sï¨©i⁄Ba£
* 
quÆôyIndex
 ) :

105 
	$fRoŸ
(
NULL
)

107 
fDTP¨ít
 = 
T
;

108 
fRoŸ
 = 
√w
 
	`CCTªeNode
–
dy«mic_ˇ°
<
Decisi⁄TªeNode
*>(
T
->
	`GëRoŸ
()) );

109 
fQuÆôyIndex
 = 
quÆôyIndex
;

110 
	`InôTªe
(
fRoŸ
);

111 
	}
}

116 
	gTMVA
::
CCTªeWøµî
::~
	$CCTªeWøµî
( ) {

117 
dñëe
 
fRoŸ
;

118 
	}
}

123 
	gTMVA
::
CCTªeWøµî
::
	$InôTªe
–
CCTªeNode
* 
t
 )

125 
DoubÀ_t
 
s
 = 
t
->
	`GëDTNode
()->
	`GëNSigEvíts
();

126 
DoubÀ_t
 
b
 = 
t
->
	`GëDTNode
()->
	`GëNBkgEvíts
();

130 
t
->
	`SëNodeResub°ôuti⁄E°im©e
((
s
+
b
)*
fQuÆôyIndex
->
	`GëSï¨©i⁄Index
(s,b));

132 if(
t
->
	`GëLe·
(Ë!
NULL
 &&Å->
	`GëRight
() != NULL) {

134 
	`InôTªe
(
t
->
	`GëLe·Daughãr
());

135 
	`InôTªe
(
t
->
	`GëRightDaughãr
());

137 
t
->
	`SëNLófDaughãrs
—->
	`GëLe·Daughãr
()->
	`GëNLófDaughãrs
() +

138 
t
->
	`GëRightDaughãr
()->
	`GëNLófDaughãrs
());

140 
t
->
	`SëResub°ôuti⁄E°im©e
—->
	`GëLe·Daughãr
()->
	`GëResub°ôuti⁄E°im©e
() +

141 
t
->
	`GëRightDaughãr
()->
	`GëResub°ôuti⁄E°im©e
());

143 
t
->
	`SëAÕhaC
(—->
	`GëNodeResub°ôuti⁄E°im©e
(Ë-Å->
	`GëResub°ôuti⁄E°im©e
()) /

144 (
t
->
	`GëNLófDaughãrs
() - 1));

146 
t
->
	`SëMöAÕhaC
(
°d
::
	`mö
—->
	`GëAÕhaC
(), std::mö—->
	`GëLe·Daughãr
()->
	`GëMöAÕhaC
(),

147 
t
->
	`GëRightDaughãr
()->
	`GëMöAÕhaC
())));

150 
t
->
	`SëNLófDaughãrs
(1);

151 
t
->
	`SëResub°ôuti⁄E°im©e
((
s
+
b
)*
fQuÆôyIndex
->
	`GëSï¨©i⁄Index
(s,b));

152 
t
->
	`SëAÕhaC
(
°d
::
numîic_limôs
<>::
	`öföôy
( ));

153 
t
->
	`SëMöAÕhaC
(
°d
::
numîic_limôs
<>::
	`öföôy
( ));

155 
	}
}

160 
	gTMVA
::
CCTªeWøµî
::
	$Pru√Node
–
CCTªeNode
* 
t
 )

162 if–
t
->
	`GëLe·
(Ë!
NULL
 &&

163 
t
->
	`GëRight
(Ë!
NULL
 ) {

164 
CCTªeNode
* 
l
 = 
t
->
	`GëLe·Daughãr
();

165 
CCTªeNode
* 
r
 = 
t
->
	`GëRightDaughãr
();

166 
t
->
	`SëNLófDaughãrs
( 1 );

167 
t
->
	`SëResub°ôuti⁄E°im©e
–t->
	`GëNodeResub°ôuti⁄E°im©e
() );

168 
t
->
	`SëAÕhaC
–
°d
::
numîic_limôs
<>::
	`öföôy
( ) );

169 
t
->
	`SëMöAÕhaC
–
°d
::
numîic_limôs
<>::
	`öföôy
( ) );

170 
dñëe
 
l
;

171 
dñëe
 
r
;

172 
t
->
	`SëLe·
(
NULL
);

173 
t
->
	`SëRight
(
NULL
);

175 
°d
::
cout
 << " ERROR i¿CCTªeWøµî::Pru√Node: youÅryÅÿ¥u√áÜó‡node..Åh© d€†nŸ makê£n£ " << std::
ídl
;

177 
	}
}

183 
DoubÀ_t
 
	gTMVA
::
CCTªeWøµî
::
	$Te°TªeQuÆôy
–c⁄° 
EvítLi°
* 
vÆid©i⁄Sam∂e
 )

185 
DoubÀ_t
 
nc‹ª˘
=0, 
nÁl£
=0;

186 
UI¡_t
 
õvt
=0; ievà< 
vÆid©i⁄Sam∂e
->
	`size
(); ievt++) {

187 
Boﬁ_t
 
isSig«lTy≥
 = (
	`CheckEvít
(*(*
vÆid©i⁄Sam∂e
)[
õvt
]Ë> 
fDTP¨ít
->
	`GëNodePurôyLimô
() ) ? 1 : 0;

189 i‡(
isSig«lTy≥
 =((*
vÆid©i⁄Sam∂e
)[
õvt
]->
	`GëCœss
() == 0)) {

190 
nc‹ª˘
 +(*
vÆid©i⁄Sam∂e
)[
õvt
]->
	`GëWeight
();

193 
nÁl£
 +(*
vÆid©i⁄Sam∂e
)[
õvt
]->
	`GëWeight
();

196  
nc‹ª˘
 / (nc‹ª˘ + 
nÁl£
);

197 
	}
}

203 
DoubÀ_t
 
	gTMVA
::
CCTªeWøµî
::
	$Te°TªeQuÆôy
–c⁄° 
D©aSë
* 
vÆid©i⁄Sam∂e
 )

205 
vÆid©i⁄Sam∂e
->
	`SëCuºítTy≥
(
Ty≥s
::
kVÆid©i⁄
);

207 
DoubÀ_t
 
nc‹ª˘
=0, 
nÁl£
=0;

208 
L⁄g64_t
 
õvt
=0; ievt<
vÆid©i⁄Sam∂e
->
	`GëNEvíts
(); ievt++){

209 c⁄° 
Evít
 *
ev
 = 
vÆid©i⁄Sam∂e
->
	`GëEvít
(
õvt
);

211 
Boﬁ_t
 
isSig«lTy≥
 = (
	`CheckEvít
(*
ev
Ë> 
fDTP¨ít
->
	`GëNodePurôyLimô
() ) ? 1 : 0;

213 i‡(
isSig«lTy≥
 =(
ev
->
	`GëCœss
() == 0)) {

214 
nc‹ª˘
 +
ev
->
	`GëWeight
();

217 
nÁl£
 +
ev
->
	`GëWeight
();

220  
nc‹ª˘
 / (nc‹ª˘ + 
nÁl£
);

221 
	}
}

226 
DoubÀ_t
 
	gTMVA
::
CCTªeWøµî
::
	$CheckEvít
–c⁄° 
TMVA
::
Evít
 & 
e
, 
Boﬁ_t
 
u£YesNoLóf
 )

228 c⁄° 
Decisi⁄TªeNode
* 
cuºít
 = 
fRoŸ
->
	`GëDTNode
();

229 
CCTªeNode
* 
t
 = 
fRoŸ
;

232 
t
->
	`GëLe·
(Ë!
NULL
 &&

233 
t
->
	`GëRight
(Ë!
NULL
){

234 i‡(
cuºít
->
	`G€sRight
(
e
)) {

236 
t
 =Å->
	`GëRightDaughãr
();

237 
cuºít
 = 
t
->
	`GëDTNode
();

241 
t
 =Å->
	`GëLe·Daughãr
();

242 
cuºít
 = 
t
->
	`GëDTNode
();

246 i‡(
u£YesNoLóf
Ë (
cuºít
->
	`GëPurôy
(Ë> 
fDTP¨ít
->
	`GëNodePurôyLimô
() ? 1.0 : -1.0);

247  
cuºít
->
	`GëPurôy
();

248 
	}
}

252 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$AddAâribuãsToNode
( * ) const

253 {
	}
}

257 
TMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$AddC⁄ã¡ToNode
–
°d
::
°rög°ªam
& ) const

258 {
	}
}

262 
TMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$RódAâribuãs
–* , 
UI¡_t
 )

263 {
	}
}

267 
	gTMVA
::
CCTªeWøµî
::
CCTªeNode
::
	$RódC⁄ã¡
–
°d
::
°rög°ªam
& )

268 {
	}
}

	@src/ClassInfo.cxx

35 
	~"TMVA/CœssInfo.h
"

37 
	~<ve˘‹
>

39 
	~"TCut.h
"

40 
	~"TM©rixD.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/Ty≥s.h
"

48 
	gTMVA
::
CœssInfo
::
	$CœssInfo
–c⁄° 
TSåög
& 
«me
 )

49 : 
	`TNamed
(
«me
.
	`D©a
(),name.Data()),

50 
	`fWeight
( "" ),

51 
	`fCut
( "" ),

52 
	`fNumbî
( 0 ),

53 
	`fC‹rM©rix
( 0 ),

54 
	`fLoggî
–
√w
 
	`MsgLoggî
("CœssInfo", 
kINFO
) )

56 
	}
}

61 
	gTMVA
::
CœssInfo
::~
	$CœssInfo
()

63 i‡(
fC‹rM©rix
Ë
dñëe
 fCorrMatrix;

64 
dñëe
 
fLoggî
;

65 
	}
}

	@src/ClassifierFactory.cxx

29 
	~"TMVA/CœssifõrFa˘‹y.h
"

31 
	~"Rty≥sC‹e.h
"

32 
	~"TSåög.h
"

34 
	~<as£π.h
>

35 
	~<io°ªam
>

37 
˛ass
 
	gTSåög
;

42 
	gTMVA
::
CœssifõrFa˘‹y
* 
TMVA
::CœssifõrFa˘‹y::
fgIn°™˚
 = 0;

48 
	gTMVA
::
CœssifõrFa˘‹y
& 
TMVA
::CœssifõrFa˘‹y::
	$In°™˚
()

50 i‡(!
fgIn°™˚
ËfgIn°™˚ = 
√w
 
TMVA
::
	`CœssifõrFa˘‹y
();

52  *
fgIn°™˚
;

53 
	}
}

58 
	gTMVA
::
CœssifõrFa˘‹y
::
	$De°royIn°™˚
()

60 i‡(
fgIn°™˚
!=0Ë
dñëe
 fgInstance;

61 
	}
}

66 
Boﬁ_t
 
	gTMVA
::
CœssifõrFa˘‹y
::
	$Regi°î
–c⁄° 
°d
::
°rög
 &
«me
, 
Cª©‹
 
¸ót‹
 )

68 if(
fCÆls
.
	`föd
(
«me
Ë!fCÆls.
	`íd
())

70 
°d
::
˚º
 << "CœssifõrFa˘‹y<>::Regi°î - " << 
«me
 << "áÃódyÉxi°s" << std::
ídl
;

71  
Ál£
;

74  
fCÆls
.
	`ö£π
(
CÆlM≠
::
	`vÆue_ty≥
(
«me
, 
¸ót‹
)).
£c⁄d
;

75 
	}
}

80 
Boﬁ_t
 
	gTMVA
::
CœssifõrFa˘‹y
::
	$Uƒegi°î
–c⁄° 
°d
::
°rög
 &
«me
 )

82  
fCÆls
.
	`îa£
(
«me
) == 1;

83 
	}
}

89 
	gTMVA
::
IMëhod
* 
TMVA
::
CœssifõrFa˘‹y
::
	$Cª©e
–c⁄° 
°d
::
°rög
 &
«me
,

90 c⁄° 
TSåög
& 
job
,

91 c⁄° 
TSåög
& 
tôÀ
,

92 
D©aSëInfo
& 
dsi
,

93 c⁄° 
TSåög
& 
›ti⁄
 )

98 
CÆlM≠
::
c⁄°_ôî©‹
 
ô
 = 
fCÆls
.
	`föd
(
«me
);

101 i‡(
ô
 =
fCÆls
.
	`íd
()) {

102 
°d
::
˚º
 << "CœssifõrFa˘‹y<>::Cª©ê- d⁄'àknowánythögábouà" << 
«me
 << std::
ídl
;

103 
	`as£π
(0);

106  (
ô
->
£c⁄d
)(
job
, 
tôÀ
, 
dsi
, 
›ti⁄
);

107 
	}
}

113 
	gTMVA
::
IMëhod
* 
TMVA
::
CœssifõrFa˘‹y
::
	$Cª©e
–c⁄° 
°d
::
°rög
 &
«me
,

114 
D©aSëInfo
& 
dsi
,

115 c⁄° 
TSåög
& 
weightfûe
 )

120 
CÆlM≠
::
c⁄°_ôî©‹
 
ô
 = 
fCÆls
.
	`föd
(
«me
);

123 i‡(
ô
 =
fCÆls
.
	`íd
()) {

124 
°d
::
˚º
 << "CœssifõrFa˘‹y<>::Cª©ê- d⁄'àknowánythögábouà" << 
«me
 << std::
ídl
;

125 
	`as£π
(0);

128  (
ô
->
£c⁄d
)("", "", 
dsi
, 
weightfûe
);

129 
	}
}

134 c⁄° 
	g°d
::
ve˘‹
<
°d
::
°rög
> 
TMVA
::
CœssifõrFa˘‹y
::
	$Li°
() const

136 
°d
::
ve˘‹
<°d::
°rög
> 
svec
;

138 
CÆlM≠
::
c⁄°_ôî©‹
 
ô
 = 
fCÆls
.
	`begö
();

139 ; 
ô
 !
fCÆls
.
	`íd
(); ++ôË
svec
.
	`push_back
(ô -> 
fú°
);

141  
svec
;

142 
	}
}

147 
	gTMVA
::
CœssifõrFa˘‹y
::
	$Pröt
() const

149 
°d
::
cout
 << "Pröt: CœssifõrFa˘‹y<> know†abouà" << 
fCÆls
.
	`size
(Ë<< " obje˘s" << std::
ídl
;

151 
CÆlM≠
::
c⁄°_ôî©‹
 
ô
 = 
fCÆls
.
	`begö
();

152 ; 
ô
 !
fCÆls
.
	`íd
(); ++ôË
°d
::
cout
 << "Regi°îed obje˘Çamê" << ià-> 
fú°
 << std::
ídl
;

153 
	}
}

	@src/Config.cxx

36 
	~"TMVA/C⁄fig.h
"

37 
	~"TMVA/MsgLoggî.h
"

39 
	~"Rty≥s.h
"

40 
	~"TSåög.h
"

42 
CœssImp
(
TMVA
::
C⁄fig
);

44 #i‡
__˝lu•lus
 > 199711L

45 
	g°d
::
©omic
<
TMVA
::
C⁄fig
*> TMVA::C⁄fig::
fgC⁄figPå
{ 0 };

47 
	gTMVA
::
C⁄fig
* 
TMVA
::C⁄fig::
fgC⁄figPå
 = 0;

50 
	gTMVA
::
C⁄fig
& 
TMVA
::
	$gC⁄fig
(Ë{  
TMVA
::
C⁄fig
::
	`In°™˚
(); 
	}
}

55 
	gTMVA
::
C⁄fig
::
	$C⁄fig
() :

56 
	`fU£Cﬁ‹edC⁄sﬁe
 ( 
kTRUE
 ),

57 
	`fSûít
 ( 
kFALSE
 ),

58 
	`fWrôeO±i⁄sRe„ªn˚
–
kFALSE
 ),

59 
	`fDøwProgªssB¨
 ( 
kFALSE
 ),

60 
	`fLoggî
 ( 
√w
 
	`MsgLoggî
("Config") )

63 
fV¨übÀPlŸtög
.
fTimesRMS
 = 8.0;

64 
fV¨übÀPlŸtög
.
fNbös1D
 = 40;

65 
fV¨übÀPlŸtög
.
fNbös2D
 = 300;

66 
fV¨übÀPlŸtög
.
fMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
 = 20;

68 
fV¨übÀPlŸtög
.
fNbösMVAouçut
 = 40;

69 
fV¨übÀPlŸtög
.
fNbösXOfROCCurve
 = 100;

72 
fIONames
.
fWeightFûeDú
 = "weights";

73 
fIONames
.
fWeightFûeExãnsi⁄
 = "weights";

74 
fIONames
.
fO±i⁄sRe„ªn˚FûeDú
 = "optionInfo";

75 
	}
}

80 
	gTMVA
::
C⁄fig
::~
	$C⁄fig
()

82 
dñëe
 
fLoggî
;

83 
	}
}

88 
	gTMVA
::
C⁄fig
::
	$De°royIn°™˚
()

90 #i‡
__˝lu•lus
 > 199711L

91 
dñëe
 
fgC⁄figPå
.
	`exch™ge
(0);

93 i‡(
fgC⁄figPå
 !0Ë{ 
dñëe
 fgConfigPtr; fgConfigPtr = 0;}

95 
	}
}

100 
	gTMVA
::
C⁄fig
& 
TMVA
::C⁄fig::
	$In°™˚
()

102 #i‡
__˝lu•lus
 > 199711L

103 if(!
fgC⁄figPå
) {

104 
TMVA
::
C⁄fig
* 
tmp
 = 
√w
 
	`C⁄fig
();

105 
TMVA
::
C⁄fig
* 
ex≥˘ed
 = 0;

106 if(! 
fgC⁄figPå
.
	`com∑ª_exch™ge_°r⁄g
(
ex≥˘ed
,
tmp
) ) {

108 
dñëe
 
tmp
;

111  *
fgC⁄figPå
;

113  
fgC⁄figPå
 ? *fgC⁄figPå :*(fgC⁄figPå = 
√w
 
	`C⁄fig
());

115 
	}
}

	@src/Configurable.cxx

35 
	~<°rög
>

36 
	~<io°ªam
>

37 
	~<f°ªam
>

38 
	~<c°dlib
>

39 
	~<ve˘‹
>

41 
	~"TROOT.h
"

42 
	~"TSy°em.h
"

43 
	~"TSåög.h
"

44 
	~"TObjSåög.h
"

45 
	~"TQObje˘.h
"

46 
	~"TS∂öe.h
"

47 
	~"TM©rix.h
"

48 
	~"TM©h.h
"

49 
	~"TFûe.h
"

50 
	~"TKey.h
"

52 
	~"TMVA/C⁄figuøbÀ.h
"

53 
	~"TMVA/C⁄fig.h
"

54 
	~"TMVA/Toﬁs.h
"

55 
	~"TMVA/Ty≥s.h
"

60 
CœssImp
(
TMVA
::
C⁄figuøbÀ
);

62 #ifde‡
_WIN32


64 #¥agm®
w¨nög
 ( 
dißbÀ
 : 4355 )

70 
	gTMVA
::
C⁄figuøbÀ
::
	$C⁄figuøbÀ
–c⁄° 
TSåög
& 
theO±i⁄
)

71 : 
	`TNamed
("Configurable","Configurable"),

72 
	`fO±i⁄s
 ( 
theO±i⁄
 ),

73 
	`fLoo£O±i⁄CheckögE«bÀd
 ( 
kTRUE
 ),

74 
	`fLa°De˛¨edO±i⁄
 ( 0 ),

75 
	`fC⁄figDes¸ùti⁄
 ( "No description" ),

76 
	`fRe„ªn˚Fûe
 ( "None" ),

77 
	`fLoggî
 ( 
√w
 
	$MsgLoggî
(
this
) )

79 
fLi°OfO±i⁄s
.
	`SëOw√r
();

82 i‡(
	`gToﬁs
().
	`CheckF‹Vîbo£O±i⁄
–
theO±i⁄
 )Ë
	`Log
().
	`SëMöTy≥
–
kVERBOSE
 );

83 
	}
}

88 
	gTMVA
::
C⁄figuøbÀ
::~
	$C⁄figuøbÀ
()

90 
dñëe
 
fLoggî
;

91 
	}
}

96 
	gTMVA
::
C⁄figuøbÀ
::
	$S∂ôO±i⁄s
(c⁄° 
TSåög
& 
theO±
, 
TLi°
& 
loo
) const

98 
TSåög
 
	`•lôO±
(
theO±
);

99 
loo
.
	`SëOw√r
();

100 
•lôO±
.
	`Lígth
()>0) {

101 i‡(!
•lôO±
.
	`C⁄èös
(':')) {

102 
loo
.
	`Add
(
√w
 
	`TObjSåög
(
•lôO±
));

103 
•lôO±
 = "";

106 
TSåög
 
toSave
 = 
	`•lôO±
(0,
•lôO±
.
	`Fú°
(':'));

107 
loo
.
	`Add
(
√w
 
	`TObjSåög
(
toSave
.
	`D©a
()));

108 
•lôO±
 = 
	`•lôO±
(•lôO±.
	`Fú°
(':')+1,•lôO±.
	`Lígth
());

111 
	}
}

117 
	gTMVA
::
C⁄figuøbÀ
::
	$Re£tSëFœg
()

119 
TLi°Iãr
 
	`decO±It
(&
fLi°OfO±i⁄s
);

120 
O±i⁄Ba£
* 
decO±
 = (O±i⁄Ba£*Ë
	`decO±It
()) {

121 
decO±
->
fIsSë
 = 
kFALSE
;

123 
	}
}

128 
	gTMVA
::
C⁄figuøbÀ
::
	$P¨£O±i⁄s
()

130 
	`Log
(Ë<< 
kVERBOSE
 << "P¨sög o±i⁄ såög: " << 
Endl
;

131 
TSåög
 
	`›ti⁄sWôhoutTûde
(
fO±i⁄s
);

132 
›ti⁄sWôhoutTûde
.
	`Rïœ˚AŒ
(
	`TSåög
("~"),TString(""));

133 
	`Log
(Ë<< 
kVERBOSE
 << "... \"" << 
›ti⁄sWôhoutTûde
 << "\"" << 
Endl
;

135 
TLi°
 
loo
;

137 
fO±i⁄s
 = fO±i⁄s.
	`Såù
(
TSåög
::
kLódög
, ':');

140 
	`S∂ôO±i⁄s
(
fO±i⁄s
, 
loo
);

141 
fO±i⁄s
 = "";

144 
°d
::
m≠
<
TSåög
, std::
ve˘‹
<°d::
∑ú
<
I¡_t
, TSåög> > > 
¨øyTy≥O±i⁄s
;

146 
TLi°Iãr
 
	`decO±It
(&
fLi°OfO±i⁄s
);

147 
TLi°Iãr
 
	`£tO±It
(&
loo
);

148 
TObjSåög
 * 
os
 = (TObjSåög*Ë
	`£tO±It
()) {

150 
TSåög
 
s
 = 
os
->
	`GëSåög
();

159 
Boﬁ_t
 
¥e£rveTûde
 = 
s
.
	`BegösWôh
('~');

160 
s
 = s.
	`Såù
(
TSåög
::
kLódög
, '~');

162 
Boﬁ_t
 
∑ømP¨£d
 = 
kFALSE
;

163 i‡(
s
.
	`C⁄èös
('=')) {

164 
TSåög
 
›äame
 = 
	`s
(0,
s
.
	`Fú°
('=')); o±«me.
	`ToLowî
();

165 
TSåög
 
›tvÆ
 = 
	`s
(
s
.
	`Fú°
('=')+1,s.
	`Lígth
());

166 
I¡_t
 
idx
 = -1;

172 
O±i⁄Ba£
* 
decO±
 = (O±i⁄Ba£ *)
fLi°OfO±i⁄s
.
	`FödObje˘
(
›äame
);

173 i‡(
decO±
==0 && 
›äame
.
	`C⁄èös
('[')) {

176 
TSåög
 
°
 = 
	`›äame
(
›äame
.
	`Fú°
('[')+1,100);

177 
°
.
	`Remove
(°.
	`Fú°
(']'));

178 
°d
::
°rög°ªam
 
	`°r
(
°
.
	`D©a
());

179 
°r
 >> 
idx
;

180 
›äame
.
	`Remove
(›äame.
	`Fú°
('['));

181 
decO±
 = (
O±i⁄Ba£
 *)
fLi°OfO±i⁄s
.
	`FödObje˘
(
›äame
);

184 
TLi°Iãr
 
	`›tIt
(&
fLi°OfO±i⁄s
);

185 i‡(
decO±
!=0) {

186 i‡(
decO±
->
	`IsSë
())

187 
	`Log
(Ë<< 
kWARNING
 << "VÆuêf‹ o±i⁄ " << 
decO±
->
	`GëName
()

188 << " wa†¥eviou¶y sëÅÿ" << 
decO±
->
	`GëVÆue
(Ë<< 
Endl
;

190 i‡(!
decO±
->
	`HasPªDeföedVÆ
(Ë|| (decO±->HasPªDeföedVÆ(Ë&& decO±->
	`IsPªDeföedVÆ
(
›tvÆ
)) ) {

191 i‡(
decO±
->
	`IsAºayO±
()) {

193 i‡(
idx
==-1) {

194 
decO±
->
	`SëVÆue
(
›tvÆ
);

198 i‡(!
decO±
->
	`SëVÆue
(
›tvÆ
, 
idx
))

199 
	`Log
(Ë<< 
kFATAL
 << "Index " << 
idx
 << "Åoÿœrgêf‹ o±i⁄ " << 
decO±
->
	`TheName
()

200 << ",áŒowedÑ™gêi†[0," << 
decO±
->
	`GëAºaySize
()-1 << "]" << 
Endl
;

204 i‡(
idx
!=-1)

205 
	`Log
(Ë<< 
kFATAL
 << "O±i⁄ " << 
decO±
->
	`TheName
()

206 << " i†nŸá¿¨øy, buàyou s≥cifõdá¿ödex" << 
Endl
;

207 
decO±
->
	`SëVÆue
(
›tvÆ
);

209 
∑ømP¨£d
 = 
kTRUE
;

211 
	`Log
(Ë<< 
kFATAL
 << "O±i⁄ " << 
decO±
->
	`TheName
()

212 << " d€†nŸ havê¥edeföed vÆue: \"" << 
›tvÆ
 << "\"" << 
Endl
;

218 
Boﬁ_t
 
¥e£rveNŸSign
 = 
kFALSE
;

219 i‡(!
∑ømP¨£d
) {

220 
Boﬁ_t
 
hasNŸSign
 = 
kFALSE
;

221 i‡(
s
.
	`BegösWôh
("!")Ë{ s.
	`Remove
(0,1); 
¥e£rveNŸSign
 = 
hasNŸSign
 = 
kTRUE
; }

222 
TSåög
 
	`›äame
(
s
); 
›äame
.
	`ToLowî
();

223 
O±i⁄Ba£
* 
decO±
 = 0;

224 
Boﬁ_t
 
›ti⁄Exi°s
 = 
kFALSE
;

225 
TLi°Iãr
 
	`›tIt
(&
fLi°OfO±i⁄s
);

226 (
decO±
 = (
O±i⁄Ba£
*)
	`›tIt
()) !=0) {

227 
TSåög
 
	`¥edO±Name
(
decO±
->
	`GëName
());

228 
¥edO±Name
.
	`ToLowî
();

229 i‡(
¥edO±Name
 =
›äame
Ë
›ti⁄Exi°s
 = 
kTRUE
;

230 i‡(
dy«mic_ˇ°
<
O±i⁄
<
boﬁ
>*>(
decO±
)==0) ;

231 i‡(
¥edO±Name
 =
›äame
) ;

235 i‡(
decO±
 != 0) {

236 
decO±
->
	`SëVÆue
–
hasNŸSign
 ? "0" : "1" );

237 
∑ømP¨£d
 = 
kTRUE
;

240 i‡(
›ti⁄Exi°s
 && 
hasNŸSign
) {

241 
	`Log
(Ë<< 
kFATAL
 << "Neg©ögáÇ⁄-boﬁó¿v¨übÀ " << 
›äame


242 << ",ÖÀa£ checkÅhê›ti⁄†f‹ mëhod: " << 
	`GëName
(Ë<< 
Endl
;

248 i‡(!
∑ømP¨£d
 && 
	`Loo£O±i⁄CheckögE«bÀd
()) {

251 
decO±It
.
	`Re£t
();

252 
O±i⁄Ba£
* 
decO±
 = (O±i⁄Ba£*Ë
	`decO±It
()) {

253 i‡(
decO±
->
	`HasPªDeföedVÆ
(Ë&& decO±->
	`IsPªDeföedVÆ
(
s
) ) {

254 
∑ømP¨£d
 = 
decO±
->
	`SëVÆue
(
s
);

260 i‡(
fO±i⁄s
!="") fOptions += ":";

261 i‡(
∑ømP¨£d
 || 
¥e£rveTûde
Ë
fO±i⁄s
 += '~';

262 i‡(
¥e£rveNŸSign
Ë
fO±i⁄s
 += '!';

263 
fO±i⁄s
 +
s
;

267 
	`PrötO±i⁄s
();

268 i‡(
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
()Ë
	`WrôeO±i⁄sRe„ªn˚ToFûe
();

269 
	}
}

274 
	gTMVA
::
C⁄figuøbÀ
::
	$CheckF‹Unu£dO±i⁄s
() const

276 
TSåög
 
	`theO±
(
fO±i⁄s
);

277 
theO±
 =ÅheO±.
	`Såù
(
TSåög
::
kLódög
, ':');

280 
TLi°
 
loo
;

281 
	`S∂ôO±i⁄s
(
theO±
, 
loo
);

283 
TLi°Iãr
 
	`£tO±It
(&
loo
);

284 
TSåög
 
	`unu£dO±i⁄s
("");

285 
TObjSåög
 * 
os
 = (TObjSåög*Ë
	`£tO±It
()) {

287 
TSåög
 
s
 = 
os
->
	`GëSåög
();

288 i‡(!
s
.
	`BegösWôh
('~')) {

289 i‡(
unu£dO±i⁄s
 != "") unusedOptions += ':';

290 
unu£dO±i⁄s
 +
s
;

293 i‡(
unu£dO±i⁄s
 != "") {

294 
	`Log
(Ë<< 
kFATAL


296 << 
unu£dO±i⁄s
 << "\',ÖÀa£ check!" << 
Endl
;

298 
	}
}

303 
	gTMVA
::
C⁄figuøbÀ
::
	$PrötO±i⁄s
() const

305 
	`Log
(Ë<< 
kVERBOSE
 << "Thêfﬁlowög o±i⁄†¨ê£t:" << 
Endl
;

307 
TLi°Iãr
 
	`›tIt
–&
fLi°OfO±i⁄s
 );

308 
	`Log
(Ë<< 
kVERBOSE
 << "- By U£r:" << 
Endl
;

309 
Boﬁ_t
 
found
 = 
kFALSE
;

310 
O±i⁄Ba£
* 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
()) {

311 i‡(
›t
->
	`IsSë
()) {

312 
	`Log
(Ë<< 
kVERBOSE
 << " ";

313 
°d
::
o°rög°ªam
 
oss
;

314 
›t
->
	`Pröt
(
oss
);

315 
	`Log
(Ë<< 
oss
.
	`°r
();

316 
	`Log
(Ë<< 
Endl
; 
found
 = 
kTRUE
; }

318 i‡(!
found
Ë
	`Log
(Ë<< 
kVERBOSE
 << " <n⁄e>" << 
Endl
;

320 
›tIt
.
	`Re£t
();

321 
	`Log
(Ë<< 
kVERBOSE
 << "- DeÁu…:" << 
Endl
;

322 
found
 = 
kFALSE
;

323 
O±i⁄Ba£
* 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
()) {

324 i‡(!
›t
->
	`IsSë
()) {

325 
	`Log
(Ë<< 
kVERBOSE
 << " ";

326 
°d
::
o°rög°ªam
 
oss
;

327 
›t
->
	`Pröt
(
oss
);

328 
	`Log
(Ë<< 
oss
.
	`°r
();

329 
	`Log
(Ë<< 
Endl
; 
found
 = 
kTRUE
; }

331 i‡(!
found
Ë
	`Log
(Ë<< 
kVERBOSE
 << " <n⁄e>" << 
Endl
;

332 
	}
}

337 
	gTMVA
::
C⁄figuøbÀ
::
	$WrôeO±i⁄sToSåóm
–
°d
::
o°ªam
& 
o
, c⁄° 
TSåög
& 
¥efix
 ) const

339 
TLi°Iãr
 
	`›tIt
–&
fLi°OfO±i⁄s
 );

340 
o
 << 
¥efix
 << "# Së by U£r:" << 
°d
::
ídl
;

341 
O±i⁄Ba£
 * 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
())

342 i‡(
›t
->
	`IsSë
()Ë{ 
o
 << 
¥efix
; o±->
	`Pröt
(o); o << 
°d
::
ídl
; }

343 
›tIt
.
	`Re£t
();

344 
o
 << 
¥efix
 << "# DeÁu…:" << 
°d
::
ídl
;

345 
O±i⁄Ba£
 * 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
())

346 i‡(!
›t
->
	`IsSë
()Ë{ 
o
 << 
¥efix
; o±->
	`Pröt
(o); o << 
°d
::
ídl
; }

347 
o
 << 
¥efix
 << "##" << 
°d
::
ídl
;

348 
	}
}

353 
	gTMVA
::
C⁄figuøbÀ
::
	$AddO±i⁄sXMLTo
–* 
∑ª¡
 ) const

355 i‡(!
∑ª¡
) ;

356 * 
›ts
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Options");

357 
TLi°Iãr
 
	`›tIt
–&
fLi°OfO±i⁄s
 );

358 
O±i⁄Ba£
 * 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
()) {

359 * 
›äode
 = 0;

360 i‡(
›t
->
	`IsAºayO±
()) {

361 
°d
::
°rög°ªam
 
	`s
("");

362 
s
.
	`¥ecisi⁄
( 16 );

363 
I¡_t
 
i
=0; i<
›t
->
	`GëAºaySize
(); i++) {

364 if(
i
>0Ë
s
 << " ";

365 
s
 << 
°d
::
scõ¡ific
 << 
›t
->
	`GëVÆue
(
i
);

367 
›äode
 = 
	`gToﬁs
().
	`AddChûd
(
›ts
,"O±i⁄",
s
.
	`°r
().
	`c_°r
());

370 
›äode
 = 
	`gToﬁs
().
	`AddChûd
(
›ts
,"O±i⁄", 
›t
->
	`GëVÆue
());

372 
	`gToﬁs
().
	`AddAâr
(
›äode
, "«me", 
›t
->
	`TheName
());

373 i‡(
›t
->
	`IsAºayO±
()) {

374 
	`gToﬁs
().
	`AddAâr
(
›äode
, "size", 
›t
->
	`GëAºaySize
());

376 
	`gToﬁs
().
	`AddAâr
(
›äode
, "modifõd", (
›t
->
	`IsSë
()?"Yes":"No") );

378 
	}
}

382 
	gTMVA
::
C⁄figuøbÀ
::
	$RódO±i⁄sFromXML
–* 
node
 )

384 * 
›t
 = 
	`gToﬁs
().
	`GëChûd
(
node
);

385 
TSåög
 
›tName
, 
›tVÆue
;

386 
fO±i⁄s
="";

387 
›t
 != 0) {

388 i‡(
fO±i⁄s
.
	`Lígth
()!=0) fOptions += ":";

389 
	`gToﬁs
().
	`RódAâr
(
›t
, "«me", 
›tName
);

390 
›tVÆue
 = 
	`TSåög
–
	`gToﬁs
().
	`GëC⁄ã¡
(
›t
) );

391 
°d
::
°rög°ªam
 
	`s
("");

392 
s
.
	`¥ecisi⁄
( 16 );

393 i‡(
	`gToﬁs
().
	`HasAâr
(
›t
, "size")) {

394 
UI¡_t
 
size
;

395 
	`gToﬁs
().
	`RódAâr
(
›t
, "size", 
size
);

396 
°d
::
ve˘‹
<
TSåög
> 
vÆues
 = 
	`gToﬁs
().
	`S∂ôSåög
(
›tVÆue
, ' ');

397 
UI¡_t
 
i
=0; i<
size
; i++) {

398 if(
i
!=0Ë
s
 << ":";

399 
s
 << 
°d
::
scõ¡ific
 << 
›tName
 << "[" << 
i
 << "]=" << 
vÆues
[i];

403 
s
 << 
°d
::
scõ¡ific
 << 
›tName
 << "=" << 
›tVÆue
;

405 
fO±i⁄s
 +
s
.
	`°r
().
	`c_°r
();

406 
›t
 = 
	`gToﬁs
().
	`GëNextChûd
(opt);

408 
	}
}

413 
	gTMVA
::
C⁄figuøbÀ
::
	$WrôeO±i⁄sRe„ªn˚ToFûe
()

415 
TSåög
 
dú
 = 
	`gC⁄fig
().
	`GëIONames
().
fO±i⁄sRe„ªn˚FûeDú
;

416 
gSy°em
->
	`MakeDúe˘‹y
–
dú
 );

417 
fRe„ªn˚Fûe
 = 
dú
 + "/" + 
	`GëC⁄figName
() + "_optionsRef.txt";

418 
°d
::
of°ªam
 
	`o
–
fRe„ªn˚Fûe
 );

419 i‡(!
o
.
	`good
()) {

420 
	`Log
(Ë<< 
kFATAL
 << "<WrôeO±i⁄sToInfoFûe> U«bÀÅÿ›í ouçuàfûe: " << 
fRe„ªn˚Fûe
 << 
Endl
;

423 
TLi°Iãr
 
	`›tIt
–&
fLi°OfO±i⁄s
 );

424 
o
 << "# Li° o‡›ti⁄s:" << 
°d
::
ídl
;

425 
o
 << "# C⁄figuøbÀ: " << 
	`GëC⁄figName
(Ë<< 
°d
::
ídl
;

426 
o
 << "# Des¸ùti⁄: " << 
	`GëC⁄figDes¸ùti⁄
(Ë<< 
°d
::
ídl
;

427 
O±i⁄Ba£
 * 
›t
 = (O±i⁄Ba£ *Ë
	`›tIt
()) {

428 
›t
->
	`Pröt
–
o
, 1 );

429 
o
 << 
°d
::
ídl
 << "# ------------------------------------------------" << std::endl;

432 
o
.
	`˛o£
();

433 
	`Log
(Ë<< 
kVERBOSE
 << "WrŸê›ti⁄†ª„ªn˚ fûe: \"" << 
fRe„ªn˚Fûe
 << "\"" << 
Endl
;

434 
	}
}

439 
	gTMVA
::
C⁄figuøbÀ
::
	$RódO±i⁄sFromSåóm
(
°d
::
i°ªam
& 
i°r
)

444 
	`Re£tSëFœg
();

445 
fO±i⁄s
 = "";

446 
buf
[512];

447 
i°r
.
	`gëlöe
(
buf
,512);

448 
TSåög
 
°r›t
, 
°rvÆ
;

449 
i°r
.
	`good
(Ë&& !i°r.
	`eof
(Ë&& !(
buf
[0]=='#' && buf[1]=='#')) {

450 *
p
 = 
buf
;

451 *
p
==' ' || *p=='\t')Ö++;

452 i‡(*
p
=='#' || *p=='\0') {

453 
i°r
.
	`gëlöe
(
buf
,512);

456 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

457 
s°r
 >> 
°r›t
 >> 
°rvÆ
;

458 
°r›t
.
	`Rïœ˚AŒ
(':','=');

459 
°rvÆ
.
	`Rïœ˚AŒ
("\"","");

460 i‡(
fO±i⁄s
.
	`Lígth
()!=0) fOptions += ":";

461 
fO±i⁄s
 +
°r›t
;

462 
fO±i⁄s
 +
°rvÆ
;

463 
i°r
.
	`gëlöe
(
buf
,512);

465 
	}
}

	@src/ConvergenceTest.cxx

34 
	~"TMVA/C⁄vîgí˚Te°.h
"

35 
	~"TM©h.h
"

40 
	gTMVA
::
C⁄vîgí˚Te°
::
	$C⁄vîgí˚Te°
()

41 : 
	`fCuºítVÆue
( 0 ),

42 
	`fIm¥ovemít
( 0 ),

43 
	`fSãps
( 0 ),

44 
	`fCou¡î
( -1 ),

45 
	`fC⁄vVÆue
–
FLT_MAX
 ),

46 
	`fMaxCou¡î
( 0 ),

47 
	`fBe°Resu…
–
FLT_MAX
 ),

48 
	$fLa°Resu…
–
FLT_MAX
 )

50 
	}
}

55 
	gTMVA
::
C⁄vîgí˚Te°
::~
	$C⁄vîgí˚Te°
()

57 
	}
}

66 
Boﬁ_t
 
TMVA
::
C⁄vîgí˚Te°
::
	$HasC⁄vîged
–
Boﬁ_t
 
wôhöC⁄vîgí˚B™d
 )

68 if–
fSãps
 < 0 || 
fIm¥ovemít
 < 0 )  
kFALSE
;

70 i‡(
fCou¡î
 < 0) {

71 
fC⁄vVÆue
 = 
fCuºítVÆue
;

73 
Flﬂt_t
 
im¥ovemít
 = 0;

74 if–
wôhöC⁄vîgí˚B™d
 )

75 
im¥ovemít
 = 
TM©h
::
	`Abs
(
fCuºítVÆue
 - 
fC⁄vVÆue
);

77 
im¥ovemít
 = 
fC⁄vVÆue
 - 
fCuºítVÆue
;

78 i‡–
im¥ovemít
 <
fIm¥ovemít
 || 
fSãps
<0) {

79 
fCou¡î
 ++;

81 
fCou¡î
 = 0;

82 
fC⁄vVÆue
 = 
fCuºítVÆue
;

84 i‡(
fCou¡î
 < 
fSãps
Ë 
kFALSE
;

85  
kTRUE
;

86 
	}
}

91 
Flﬂt_t
 
	gTMVA
::
C⁄vîgí˚Te°
::
	$Progªss
()

93 if–
fCou¡î
 > 
fMaxCou¡î
 )

94 
fMaxCou¡î
 = 
fCou¡î
;

95  
	`Flﬂt_t
(
fMaxCou¡î
)/Flﬂt_t(
fSãps
);

96 
	}
}

112 
Flﬂt_t
 
	gTMVA
::
C⁄vîgí˚Te°
::
	$S≥edC⁄åﬁ
–
UI¡_t
 
ofSãps
 )

115 i‡–
fBe°Resu…
 > 
fLa°Resu…
 || 
fSuc˚ssLi°
.
	`size
() <=0 ) {

116 
fLa°Resu…
 = 
fBe°Resu…
;

117 
fSuc˚ssLi°
.
	`push_‰⁄t
( 1 );

119 
fSuc˚ssLi°
.
	`push_‰⁄t
( 0 );

121  
ofSãps
 <
fSuc˚ssLi°
.
	`size
() )

122 
fSuc˚ssLi°
.
	`îa£
–fSuc˚ssLi°.
	`begö
() );

123 
I¡_t
 
n
 = 0;

124 
I¡_t
 
sum
 = 0;

125 
°d
::
deque
<
Sh‹t_t
>::
ôî©‹
 
vec
 = 
fSuc˚ssLi°
.
	`begö
();

126 ; 
vec
 !
fSuc˚ssLi°
.
	`íd
() ; vec++) {

127 
sum
 +*
vec
;

128 
n
++;

131  
n
 ? 
sum
/
	`Flﬂt_t
(n) : 0;

132 
	}
}

	@src/CostComplexityPruneTool.cxx

51 
	~"TMVA/Co°Com∂exôyPru√Toﬁ.h
"

53 
	~"TMVA/MsgLoggî.h
"

54 
	~"TMVA/Sï¨©i⁄Ba£.h
"

55 
	~"TMVA/Decisi⁄Tªe.h
"

57 
	~"Rty≥sC‹e.h
"

59 
	~<f°ªam
>

60 
	~<limôs
>

61 
	~<m©h.h
>

63 
usög
 
«me•a˚
 
	gTMVA
;

69 
	gCo°Com∂exôyPru√Toﬁ
::
	$Co°Com∂exôyPru√Toﬁ
–
Sï¨©i⁄Ba£
* 
quÆôyIndex
 ) :

70 
	`IPru√Toﬁ
(),

71 
	`fLoggî
(
√w
 
	`MsgLoggî
("CostComplexityPruneTool") )

73 
fO±imÆK
 = -1;

81 
fQuÆôyIndexToﬁ
 = 
quÆôyIndex
;

84 
fLoggî
->
	`SëMöTy≥
–
kWARNING
 );

85 
	}
}

90 
	gCo°Com∂exôyPru√Toﬁ
::~
	$Co°Com∂exôyPru√Toﬁ
( ) {

91 if(
fQuÆôyIndexToﬁ
 !
NULL
Ë
dñëe
 fQualityIndexTool;

92 
	}
}

98 
PrunögInfo
*

99 
	gCo°Com∂exôyPru√Toﬁ
::
	$CÆcuœãPrunögInfo
–
Decisi⁄Tªe
* 
dt
,

100 c⁄° 
IPru√Toﬁ
::
EvítSam∂e
* 
vÆid©i⁄Sam∂e
,

101 
Boﬁ_t
 
isAutom©ic
 )

103 if–
isAutom©ic
 ) 
	`SëAutom©ic
();

105 if–
dt
 =
NULL
 || (
	`IsAutom©ic
(Ë&& 
vÆid©i⁄Sam∂e
 == NULL) ) {

109  
NULL
;

112 
DoubÀ_t
 
Q
 = -1.0;

113 
DoubÀ_t
 
W
 = 1.0;

115 if(
	`IsAutom©ic
()) {

117 
dt
->
	`AµlyVÆid©i⁄Sam∂e
(
vÆid©i⁄Sam∂e
);

118 
W
 = 
dt
->
	`GëSumWeights
(
vÆid©i⁄Sam∂e
);

120 
Q
 = 
dt
->
	`Te°Pru√dTªeQuÆôy
();

122 
	`Log
(Ë<< 
kDEBUG
 << "NodêpurôyÜimô is: " << 
dt
->
	`GëNodePurôyLimô
(Ë<< 
Endl
;

123 
	`Log
(Ë<< 
kDEBUG
 << "Sum o‡weight†öÖrunög vÆid©i⁄ sam∂e: " << 
W
 << 
Endl
;

124 
	`Log
(Ë<< 
kDEBUG
 << "QuÆôy o‡åìÖri‹Åÿ™yÖrunög i†" << 
Q
/
W
 << 
Endl
;

128 
åy
 {

129 
	`InôTªePrunögMëaD©a
((
Decisi⁄TªeNode
*)
dt
->
	`GëRoŸ
());

131 
	`ˇtch
(
°d
::
°rög
 
îr‹
) {

132 
	`Log
(Ë<< 
kERROR
 << "Couldn't initializeÅheÅree meta data because ofÉrror ("

133 << 
îr‹
 << ")" << 
Endl
;

134  
NULL
;

137 
	`Log
(Ë<< 
kDEBUG
 << "Autom©i¯co° com∂exôyÖrunög i†" << (
	`IsAutom©ic
()?"⁄":"off"Ë<< "." << 
Endl
;

139 
åy
 {

140 
	`O±imize
–
dt
, 
W
 );

142 
	`ˇtch
(
°d
::
°rög
 
îr‹
) {

143 
	`Log
(Ë<< 
kERROR
 << "Error optimizingÖruning sequence ("

144 << 
îr‹
 << ")" << 
Endl
;

145  
NULL
;

148 
	`Log
(Ë<< 
kDEBUG
 << "Index o‡¥unög sequí˚Åÿ°›át: " << 
fO±imÆK
 << 
Endl
;

150 
PrunögInfo
* 
öfo
 = 
√w
 
	`PrunögInfo
();

153 if(
fO±imÆK
 < 0) {

155 
öfo
->
Pru√Såígth
 = 0;

156 
öfo
->
QuÆôyIndex
 = 
Q
/
W
;

157 
öfo
->
Pru√Sequí˚
.
	`˛ór
();

158 
	`Log
(Ë<< 
kINFO
 << "noÖroperÖruning could be calculated. Tree "

159 << 
dt
->
	`GëTªeID
() << " willÇot beÖruned. DoÇot worry ifÅhis "

160 << " h≠≥n†f‹á fewÅªe†" << 
Endl
;

161  
öfo
;

163 
öfo
->
QuÆôyIndex
 = 
fQuÆôyIndexLi°
[
fO±imÆK
]/
W
;

164 
	`Log
(Ë<< 
kDEBUG
 << "Öru√ u¡û k=" << 
fO±imÆK
 << " wôháÕha="<<
fPru√SåígthLi°
[fO±imÆK]<< 
Endl
;

165  
I¡_t
 
i
 = 0; i < 
fO±imÆK
; i++ ){

166 
öfo
->
Pru√Sequí˚
.
	`push_back
(
fPru√Sequí˚
[
i
]);

168 if–
	`IsAutom©ic
() ){

169 
öfo
->
Pru√Såígth
 = 
fPru√SåígthLi°
[
fO±imÆK
];

172 
öfo
->
Pru√Såígth
 = 
fPru√Såígth
;

175  
öfo
;

176 
	}
}

182 
	gCo°Com∂exôyPru√Toﬁ
::
	$InôTªePrunögMëaD©a
–
Decisi⁄TªeNode
* 
n
 ) {

183 if–
n
 =
NULL
 ) ;

185 
DoubÀ_t
 
s
 = 
n
->
	`GëNSigEvíts
();

186 
DoubÀ_t
 
b
 = 
n
->
	`GëNBkgEvíts
();

188 i‡(
fQuÆôyIndexToﬁ
Ë
n
->
	`SëNodeR
–(
s
+
b
)*fQuÆôyIndexToﬁ->
	`GëSï¨©i⁄Index
(s,b));

189 
n
->
	`SëNodeR
–(
s
+
b
)*n->
	`GëSï¨©i⁄Index
() );

191 if(
n
->
	`GëLe·
(Ë!
NULL
 &&Ç->
	`GëRight
() != NULL) {

192 
n
->
	`SëTîmöÆ
(
kFALSE
);

194 
	`InôTªePrunögMëaD©a
(
n
->
	`GëLe·
());

195 
	`InôTªePrunögMëaD©a
(
n
->
	`GëRight
());

197 
n
->
	`SëNTîmöÆ
–n->
	`GëLe·
()->
	`GëNTîmöÆ
() +

198 
n
->
	`GëRight
()->
	`GëNTîmöÆ
());

200 
n
->
	`SëSubTªeR
–“->
	`GëLe·
()->
	`GëSubTªeR
() +

201 
n
->
	`GëRight
()->
	`GëSubTªeR
()));

203 
n
->
	`SëAÕha
–(“->
	`GëNodeR
(Ë-Ç->
	`GëSubTªeR
()) /

204 (
n
->
	`GëNTîmöÆ
() - 1)));

208 
n
->
	`SëAÕhaMöSubåì
–
°d
::
	`mö
“->
	`GëAÕha
(), std::mö“->
	`GëLe·
()->
	`GëAÕhaMöSubåì
(),

209 
n
->
	`GëRight
()->
	`GëAÕhaMöSubåì
())));

210 
n
->
	`SëCC
“->
	`GëAÕha
());

213 
n
->
	`SëNTîmöÆ
–1 );Ç->
	`SëTîmöÆ
( );

214 i‡(
fQuÆôyIndexToﬁ
Ë
n
->
	`SëSubTªeR
(((
s
+
b
)*fQuÆôyIndexToﬁ->
	`GëSï¨©i⁄Index
(s,b)));

215 
n
->
	`SëSubTªeR
–(
s
+
b
)*n->
	`GëSï¨©i⁄Index
() );

216 
n
->
	`SëAÕha
(
°d
::
numîic_limôs
<>::
	`öföôy
( ));

217 
n
->
	`SëAÕhaMöSubåì
(
°d
::
numîic_limôs
<>::
	`öföôy
( ));

218 
n
->
	`SëCC
“->
	`GëAÕha
());

224 
	}
}

237 
	gCo°Com∂exôyPru√Toﬁ
::
	$O±imize
–
Decisi⁄Tªe
* 
dt
, 
DoubÀ_t
 
weights
 ) {

238 
I¡_t
 
k
 = 1;

239 
DoubÀ_t
 
Æpha
 = -1.0e10;

240 
DoubÀ_t
 
ïsû⁄
 = 
°d
::
numîic_limôs
<>::
	`ïsû⁄
();

242 
fQuÆôyIndexLi°
.
	`˛ór
();

243 
fPru√Sequí˚
.
	`˛ór
();

244 
fPru√SåígthLi°
.
	`˛ór
();

246 
Decisi⁄TªeNode
* 
R
 = (Decisi⁄TªeNode*)
dt
->
	`GëRoŸ
();

248 
DoubÀ_t
 
qmö
 = 0.0;

249 if(
	`IsAutom©ic
()){

251 
qmö
 = 
dt
->
	`Te°Pru√dTªeQuÆôy
()/
weights
;

263 
R
->
	`GëNTîmöÆ
() > 1) {

266 
Æpha
 = 
TM©h
::
	`Max
(
R
->
	`GëAÕhaMöSubåì
(),álpha);

268 if–
R
->
	`GëAÕhaMöSubåì
(Ë>R->
	`GëAÕha
() ) {

269 
	`Log
(Ë<< 
kDEBUG
 << "\nCaughàåyögÅÿ¥u√ÅhêroŸÇode!" << 
Endl
;

274 
Decisi⁄TªeNode
* 
t
 = 
R
;

277 
t
->
	`GëAÕhaMöSubåì
(Ë<Å->
	`GëAÕha
()) {

282 if(
TM©h
::
	`Abs
(
t
->
	`GëAÕhaMöSubåì
(Ë-Å->
	`GëLe·
()->GëAÕhaMöSubåì()Ë< 
ïsû⁄
) {

283 
t
 =Å->
	`GëLe·
();

285 
t
 =Å->
	`GëRight
();

289 if–
t
 =
R
 ) {

290 
	`Log
(Ë<< 
kDEBUG
 << "\nCaughàåyögÅÿ¥u√ÅhêroŸÇode!" << 
Endl
;

294 
Decisi⁄TªeNode
* 
n
 = 
t
;

303 
dt
->
	`Pru√NodeInPœ˚
(
t
);

305 
t
 !
R
) {

306 
t
 =Å->
	`GëP¨ít
();

307 
t
->
	`SëNTîmöÆ
—->
	`GëLe·
()->
	`GëNTîmöÆ
(Ë+Å->
	`GëRight
()->GetNTerminal());

308 
t
->
	`SëSubTªeR
—->
	`GëLe·
()->
	`GëSubTªeR
(Ë+Å->
	`GëRight
()->GetSubTreeR());

309 
t
->
	`SëAÕha
(—->
	`GëNodeR
(Ë-Å->
	`GëSubTªeR
())/—->
	`GëNTîmöÆ
() - 1));

310 
t
->
	`SëAÕhaMöSubåì
(
°d
::
	`mö
—->
	`GëAÕha
(), std::mö—->
	`GëLe·
()->
	`GëAÕhaMöSubåì
(),

311 
t
->
	`GëRight
()->
	`GëAÕhaMöSubåì
())));

312 
t
->
	`SëCC
—->
	`GëAÕha
());

314 
k
 += 1;

316 
	`Log
(Ë<< 
kDEBUG
 << "a·îÅhi†¥unög sã∞I would havê" << 
R
->
	`GëNTîmöÆ
(Ë<< "ÑemaöögÅîmöÆÇode†" << 
Endl
;

318 if(
	`IsAutom©ic
()) {

319 
DoubÀ_t
 
q
 = 
dt
->
	`Te°Pru√dTªeQuÆôy
()/
weights
;

320 
fQuÆôyIndexLi°
.
	`push_back
(
q
);

323 
fQuÆôyIndexLi°
.
	`push_back
(1.0);

325 
fPru√Sequí˚
.
	`push_back
(
n
);

326 
fPru√SåígthLi°
.
	`push_back
(
Æpha
);

329 if(
fPru√Sequí˚
.
	`em±y
()) {

330 
fO±imÆK
 = -1;

334 if(
	`IsAutom©ic
()) {

335 
k
 = -1;

336 
UI¡_t
 
i
 = 0; i < 
fQuÆôyIndexLi°
.
	`size
(); i++) {

337 if(
fQuÆôyIndexLi°
[
i
] < 
qmö
) {

338 
qmö
 = 
fQuÆôyIndexLi°
[
i
];

339 
k
 = 
i
;

342 
fO±imÆK
 = 
k
;

346 
fO±imÆK
 = (
fPru√Såígth
/100.0 * 
fPru√Sequí˚
.
	`size
() );

347 
	`Log
(Ë<< 
kDEBUG
 << "SequízeSize="<<
fPru√Sequí˚
.
	`size
()

348 << " fO±imÆK " << 
fO±imÆK
 << 
Endl
;

352 
	`Log
(Ë<< 
kDEBUG
 << "\n************ Summ¨y f‹ Tªê" << 
dt
->
	`GëTªeID
(Ë<< " *******" << 
Endl


353 << "Numbî o‡åì†öÅhê£quí˚: " << 
fPru√Sequí˚
.
	`size
(Ë<< 
Endl
;

355 
	`Log
(Ë<< 
kDEBUG
 << "Pruning strengthÖarameters: [";

356 
UI¡_t
 
i
 = 0; i < 
fPru√SåígthLi°
.
	`size
()-1; i++)

357 
	`Log
(Ë<< 
kDEBUG
 << 
fPru√SåígthLi°
[
i
] << ", ";

358 
	`Log
(Ë<< 
kDEBUG
 << 
fPru√SåígthLi°
[fPru√SåígthLi°.
	`size
()-1] << "]" << 
Endl
;

360 
	`Log
(Ë<< 
kDEBUG
 << "MisclassificationÑates: [";

361 
UI¡_t
 
i
 = 0; i < 
fQuÆôyIndexLi°
.
	`size
()-1; i++)

362 
	`Log
(Ë<< 
kDEBUG
 << 
fQuÆôyIndexLi°
[
i
] << ", ";

363 
	`Log
(Ë<< 
kDEBUG
 << 
fQuÆôyIndexLi°
[fQuÆôyIndexLi°.
	`size
()-1] << "]" << 
Endl
;

365 
	`Log
(Ë<< 
kDEBUG
 << "Pru√ index: " << 
fO±imÆK
+1 << 
Endl
;

367 
	}
}

	@src/CrossEntropy.cxx

37 
	~"TM©h.h
"

38 
	~"TMVA/CrossE¡r›y.h
"

40 
CœssImp
(
TMVA
::
CrossE¡r›y
);

47 
DoubÀ_t
 
	gTMVA
::
CrossE¡r›y
::
	$GëSï¨©i⁄Index
–c⁄° 
DoubÀ_t
 
s
, c⁄° DoubÀ_à
b
 )

49 i‡(
s
+
b
 <= 0)  0;

50 
DoubÀ_t
 
p
 = 
s
/(s+
b
);

51 i‡(
p
<=0 ||Ö >=1)  0;

53  - ( 
p
 * 
TM©h
::
	`Log2
(p) + (1-p)*TMath::Log2(1-p) );

54 
	}
}

	@src/CrossValidation.cxx

4 
	~"TMVA/CrossVÆid©i⁄.h
"

6 
	~"TMVA/C⁄fig.h
"

7 
	~"TMVA/D©aSë.h
"

8 
	~"TMVA/Evít.h
"

9 
	~"TMVA/MëhodBa£.h
"

10 
	~"TMVA/MsgLoggî.h
"

11 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

12 
	~"TMVA/tmvaglob.h
"

13 
	~"TMVA/Ty≥s.h
"

15 
	~"TSy°em.h
"

16 
	~"TAxis.h
"

17 
	~"TC™vas.h
"

18 
	~"TGøph.h
"

19 
	~"TM©h.h
"

21 
	~<io°ªam
>

22 
	~<mem‹y
>

32 
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$CrossVÆid©i⁄Resu…
():
	`fROCCurves
(
√w
 
	$TMu…iGøph
())

34 
	}
}

36 
TMVA
::
CrossVÆid©i⁄Resu…
::
	$CrossVÆid©i⁄Resu…
(c⁄° 
CrossVÆid©i⁄Resu…
 &
obj
)

38 
fROCs
=
obj
.fROCs;

39 
fROCCurves
 = 
obj
.fROCCurves;

40 
	}
}

42 
TMu…iGøph
 *
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$GëROCCurves
(
Boﬁ_t
 )

44  
fROCCurves
.
	`gë
();

45 
	}
}

47 
Flﬂt_t
 
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$GëROCAvîage
() const

49 
Flﬂt_t
 
avg
=0;

50 autÿ&
roc
:
fROCs
Ë
avg
+Ùoc.
£c⁄d
;

51  
avg
/
fROCs
.
	`size
();

52 
	}
}

54 
Flﬂt_t
 
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$GëROCSènd¨dDevüti⁄
() const

57 
Flﬂt_t
 
°d
=0;

58 
Flﬂt_t
 
avg
=
	`GëROCAvîage
();

59 autÿ&
roc
:
fROCs
Ë
°d
+=
TM©h
::
	`Powî
‘oc.
£c⁄d
-
avg
, 2);

60  
TM©h
::
	`Sqπ
(
°d
/(
fROCs
.
	`size
()-1.0));

61 
	}
}

63 
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$Pröt
() const

65 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

66 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

68 
MsgLoggî
 
	`fLoggî
("CrossValidation");

69 
fLoggî
 << 
kHEADER
 << " ===Resu…†====" << 
Endl
;

70 autÿ&
ôem
:
fROCs
)

71 
fLoggî
 << 
kINFO
 << 
	`F‹m
("Fﬁd %òROC-I¡ : %.4f",
ôem
.
fú°
,ôem.
£c⁄d
Ë<< 
°d
::
ídl
;

73 
fLoggî
 << 
kINFO
 << "------------------------" << 
Endl
;

74 
fLoggî
 << 
kINFO
 << 
	`F‹m
("AvîagêROC-I¡ : %.4f",
	`GëROCAvîage
()Ë<< 
Endl
;

75 
fLoggî
 << 
kINFO
 << 
	`F‹m
("Std-Dev ROC-I¡ : %.4f",
	`GëROCSènd¨dDevüti⁄
()Ë<< 
Endl
;

77 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

78 
	}
}

80 
TC™vas
* 
	gTMVA
::
CrossVÆid©i⁄Resu…
::
	$Døw
(c⁄° 
TSåög
 
«me
) const

82 
TC™vas
 *
c
=
√w
 
	`TC™vas
(
«me
.
	`D©a
());

83 
fROCCurves
->
	`Døw
("AL");

84 
fROCCurves
->
	`GëXaxis
()->
	`SëTôÀ
(" Signal Efficiency ");

85 
fROCCurves
->
	`GëYaxis
()->
	`SëTôÀ
(" Background Rejection ");

86 
Flﬂt_t
 
adju°
=1+
fROCs
.
	`size
()*0.01;

87 
c
->
	`BuûdLegíd
(0.15,0.15,0.4*
adju°
,0.5*adjust);

88 
c
->
	`SëTôÀ
("Cross Validation ROC Curves");

89 
c
->
	`Døw
();

90  
c
;

91 
	}
}

93 
	gTMVA
::
CrossVÆid©i⁄
::
	$CrossVÆid©i⁄
(
TMVA
::
D©aLﬂdî
 *
d©Æﬂdî
):TMVA::
	`Envñ›e
("CrossValidation",dataloader),

94 
	`fNumFﬁds
(5),
	`fCœssifõr
(
√w
 
TMVA
::
	`Fa˘‹y
("CrossValidation","!V:!ROC:Silent:!ModelPersistence:!Color:!DrawProgressBar:AnalysisType=Classification"))

96 
fFﬁdSètus
=
kFALSE
;

97 
	}
}

99 
	gTMVA
::
CrossVÆid©i⁄
::~
	$CrossVÆid©i⁄
()

101 
fCœssifõr
=
nuŒ±r
;

102 
	}
}

104 
	gTMVA
::
CrossVÆid©i⁄
::
	$SëNumFﬁds
(
UI¡_t
 
i
)

106 
fNumFﬁds
=
i
;

107 
fD©aLﬂdî
->
	`MakeKFﬁdD©aSë
(
fNumFﬁds
);

108 
fFﬁdSètus
=
kTRUE
;

109 
	}
}

111 
	gTMVA
::
CrossVÆid©i⁄
::
	$EvÆu©e
()

113 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

114 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

115 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

116 if(
mëhodName
 =""Ë
	`Log
(Ë<< 
kFATAL
 << "Nÿmëhod booked f‹ cross-vÆid©i⁄" << 
Endl
;

118 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

119 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

120 
	`Log
(Ë<< 
kINFO
 << "EvÆu©êmëhod: " << 
mëhodTôÀ
 << 
Endl
;

121 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

124 if(!
fFﬁdSètus
){

125 
fD©aLﬂdî
->
	`MakeKFﬁdD©aSë
(
fNumFﬁds
);

126 
fFﬁdSètus
=
kTRUE
;

130 
UI¡_t
 
i
=0; i<
fNumFﬁds
; ++i){

131 
	`Log
(Ë<< 
kDEBUG
 << "Fﬁd (" << 
mëhodTôÀ
 << "): " << 
i
 << 
Endl
;

133 
TSåög
 
fﬁdTôÀ
 = 
mëhodTôÀ
;

134 
fﬁdTôÀ
 += "_fold";

135 
fﬁdTôÀ
 +
i
+1;

137 
fD©aLﬂdî
->
	`Pª∑ªFﬁdD©aSë
(
i
, 
TMVA
::
Ty≥s
::
kTe°ög
);

138 
MëhodBa£
* 
smëhod
 = 
fCœssifõr
->
	`BookMëhod
(
fD©aLﬂdî
.
	`gë
(), 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

141 
Evít
::
	`SëIsTøöög
(
kTRUE
);

142 
smëhod
->
	`TøöMëhod
();

145 
Evít
::
	`SëIsTøöög
(
kFALSE
);

146 
smëhod
->
	`AddOuçut
(
Ty≥s
::
kTe°ög
, smëhod->
	`GëA«lysisTy≥
());

147 
smëhod
->
	`Te°Cœssifiˇti⁄
();

150 
fResu…s
.
fROCs
[
i
] = 
fCœssifõr
->
	`GëROCI¡egøl
(
fD©aLﬂdî
->
	`GëName
(),
mëhodTôÀ
);

152 
TGøph
* 
gr
 = 
fCœssifõr
->
	`GëROCCurve
(
fD©aLﬂdî
->
	`GëName
(), 
mëhodTôÀ
, 
åue
);

153 
gr
->
	`SëLöeCﬁ‹
(
i
+1);

154 
gr
->
	`SëLöeWidth
(2);

155 
gr
->
	`SëTôÀ
(
fﬁdTôÀ
.
	`D©a
());

156 
fResu…s
.
fROCCurves
->
	`Add
(
gr
);

158 
fResu…s
.
fSigs
.
	`push_back
(
smëhod
->
	`GëSignifiˇn˚
());

159 
fResu…s
.
fSïs
.
	`push_back
(
smëhod
->
	`GëSï¨©i⁄
());

161 
DoubÀ_t
 
îr
;

162 
fResu…s
.
fEff01s
.
	`push_back
(
smëhod
->
	`GëEfficõncy
("Efficõncy:0.01",
Ty≥s
::
kTe°ög
, 
îr
));

163 
fResu…s
.
fEff10s
.
	`push_back
(
smëhod
->
	`GëEfficõncy
("Efficõncy:0.10",
Ty≥s
::
kTe°ög
,
îr
));

164 
fResu…s
.
fEff30s
.
	`push_back
(
smëhod
->
	`GëEfficõncy
("Efficõncy:0.30",
Ty≥s
::
kTe°ög
,
îr
));

165 
fResu…s
.
fEffAªas
.
	`push_back
(
smëhod
->
	`GëEfficõncy
("" ,
Ty≥s
::
kTe°ög
,
îr
));

166 
fResu…s
.
fTøöEff01s
.
	`push_back
(
smëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.01"));

167 
fResu…s
.
fTøöEff10s
.
	`push_back
(
smëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.10"));

168 
fResu…s
.
fTøöEff30s
.
	`push_back
(
smëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.30"));

171 
smëhod
->
	`D©a
()->
	`DñëeResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

172 
smëhod
->
	`D©a
()->
	`DñëeResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, Ty≥s::
kCœssifiˇti⁄
);

173 
fCœssifõr
->
	`DñëeAŒMëhods
();

174 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

177 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

178 
	`Log
(Ë<< 
kINFO
 << "EvÆu©i⁄ d⁄e." << 
Endl
;

179 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

180 
	}
}

182 c⁄° 
	gTMVA
::
CrossVÆid©i⁄Resu…
& 
TMVA
::
CrossVÆid©i⁄
::
	$GëResu…s
() const {

183 if(
fResu…s
.
fROCs
.
	`size
()==0Ë
	`Log
(Ë<< 
kFATAL
 << "Nÿ¸oss-vÆid©i⁄Ñesu…†avaûabÀ" << 
Endl
;

184  
fResu…s
;

185 
	}
}

	@src/DNN/Architectures/Cpu.cxx

16 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

18 
	~"Cpu/A˘iv©i⁄Fun˘i⁄s.cxx
"

19 
	~"Cpu/Arôhmëic.cxx
"

20 
	~"Cpu/Dr›out.cxx
"

21 
	~"Cpu/Inôüliz©i⁄.cxx
"

22 
	~"Cpu/LossFun˘i⁄s.cxx
"

23 
	~"Cpu/OuçutFun˘i⁄s.cxx
"

24 
	~"Cpu/Pr›ag©i⁄.cxx
"

25 
	~"Cpu/Reguœriz©i⁄.cxx
"

28 
«me•a˚
 
	gTMVA
 {

29 
«me•a˚
 
	gDNN
 {

30 
ãm∂©e
 
˛ass
 
	gTCpu
<
	gDoubÀ_t
>;

31 
ãm∂©e
 
˛ass
 
	gTCpu
<
	gRól_t
>;

	@src/DNN/Architectures/Cpu/ActivationFunctions.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

18 
	~<m©h.h
>

20 
«me•a˚
 
	gTMVA


22 
«me•a˚
 
	gDNN


26 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

27 
	gTCpu
<
	gAFlﬂt
>::
IdítôyDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

28 c⁄° 
TCpuM©rix
<
AFlﬂt
> & )

30 autÿ
	gf
 = [](
AFlﬂt
) { 1.0;};

31 
	gB
.
M≠
(
f
);

35 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

36 
	gTCpu
<
	gAFlﬂt
>::
Rñu
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

38 autÿ
f
 = [](
AFlﬂt
 
x
) { (x < 0.0) ? 0.0 : x;};

39 
	gB
.
M≠
(
f
);

43 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

44 
	gTCpu
<
	gAFlﬂt
>::
RñuDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

45 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

47 autÿ
	gf
 = [](
AFlﬂt
 
x
) { (x < 0.0) ? 0.0 : 1.0;};

48 
	gB
.
M≠From
(
f
, 
A
);

52 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

53 
	gTCpu
<
	gAFlﬂt
>::
Sigmoid
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

55 autÿ
f
 = [](
AFlﬂt
 
x
Ë{ 1.0 / (1.0 + 
exp
(-x));};

56 
	gB
.
M≠
(
f
);

60 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

61 
	gTCpu
<
	gAFlﬂt
>::
SigmoidDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

62 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

64 autÿ
	gf
 = [](
AFlﬂt
 
x
) {

65 
AFlﬂt
 
sig
 = 1.0 / (1.0 + 
exp
(-
x
));

66  
	gsig
 * (1.0 - sig);

68 
	gB
.
M≠From
(
f
, 
A
);

72 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

73 
	gTCpu
<
	gAFlﬂt
>::
T™h
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

75 autÿ
f
 = [](
AFlﬂt
 
x
Ë{ 
ènh
(x);};

76 
	gB
.
M≠
(
f
);

80 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

81 
	gTCpu
<
	gAFlﬂt
>::
T™hDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

82 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

84 autÿ
	gf
 = [](
AFlﬂt
 
x
) {

85 
AFlﬂt
 
t
 = 
ènh
(
x
);

86  1 - 
t
 * 
	gt
;

88 
	gB
.
M≠From
(
f
, 
A
);

92 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

93 
	gTCpu
<
	gAFlﬂt
>::
SymmëricRñu
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

95 autÿ
f
 = [](
AFlﬂt
 
x
Ë{ 
Ábs
(x);};

96 
	gB
.
M≠
(
f
);

100 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

101 
	gTCpu
<
	gAFlﬂt
>::
SymmëricRñuDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

102 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

104 autÿ
	gf
 = [](
AFlﬂt
 
x
) {

105  (
x
 < 0.0) ? -1.0 : 1.0;

107 
	gB
.
M≠From
(
f
, 
A
);

111 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

112 
	gTCpu
<
	gAFlﬂt
>::
So·Sign
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

114 autÿ
f
 = [](
AFlﬂt
 
x
Ë{ x / (1 + 
Ábs
(x));};

115 
	gB
.
M≠
(
f
);

119 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

120 
	gTCpu
<
	gAFlﬂt
>::
So·SignDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

121 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

123 autÿ
	gf
 = [](
AFlﬂt
 
x
) {

124 
x
 = 1.0 + 
Ábs
(x);

125 
	gx
 = 1.0 / (
x
 * x);

126  
	gx
;

128 
	gB
.
M≠From
(
f
, 
A
);

132 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

133 
	gTCpu
<
	gAFlﬂt
>::
Gauss
(
TCpuM©rix
<
AFlﬂt
> & 
B
)

135 autÿ
f
 = [](
AFlﬂt
 
x
Ë{ 
exp
(- x * x);};

136 
	gB
.
M≠
(
f
);

140 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

141 
	gTCpu
<
	gAFlﬂt
>::
GaussDîiv©ive
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

142 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
A
)

144 autÿ
	gf
 = [](
AFlﬂt
 
x
Ë{ - 2.0 * x * 
exp
(- x * x);};

145 
	gB
.
M≠From
(
f
, 
A
);

	@src/DNN/Architectures/Cpu/Arithmetic.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu/Bœs.h
"

19 
	~"tbb/tbb.h
"

21 
«me•a˚
 
	gTMVA


23 
«me•a˚
 
	gDNN


27 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

28 
	gTCpu
<
	gRól_t
>::
Mu…ùly
(
TCpuM©rix
<
Ról_t
> &
C
,

29 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
,

30 c⁄° 
TCpuM©rix
<
Ról_t
> &
B
)

32 
	gm
 = (Ë
A
.
GëNrows
();

33 
	gk
 = (Ë
A
.
GëNcﬁs
();

34 
	gn
 = (Ë
B
.
GëNcﬁs
();

36 
	gå™ß
 = 'N';

37 
	gå™sb
 = 'N';

39 
Ról_t
 
	gÆpha
 = 1.0;

40 
Ról_t
 
	gbëa
 = 0.0;

42 c⁄° 
Ról_t
 * 
	gAPoöãr
 = 
A
.
GëRawD©aPoöãr
();

43 c⁄° 
Ról_t
 * 
	gBPoöãr
 = 
B
.
GëRawD©aPoöãr
();

44 
Ról_t
 * 
	gCPoöãr
 = 
C
.
GëRawD©aPoöãr
();

46 ::
TMVA
::
DNN
::
Bœs
::
Gemm
(&
å™ß
, &
å™sb
, &
m
, &
n
, &
k
, &
Æpha
,

47 
APoöãr
, &
m
, 
BPoöãr
, &
k
, &
bëa
, 
CPoöãr
, &m);

51 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

52 
	gTCpu
<
	gRól_t
>::
Tøn•o£Mu…ùly
(
TCpuM©rix
<
Ról_t
> &
C
,

53 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
,

54 c⁄° 
TCpuM©rix
<
Ról_t
> &
B
)

56 
	gm
 = (Ë
A
.
GëNcﬁs
();

57 
	gk
 = (Ë
A
.
GëNrows
();

58 
	gn
 = (Ë
B
.
GëNcﬁs
();

60 
	gå™ß
 = 'T';

61 
	gå™sb
 = 'N';

63 
Ról_t
 
	gÆpha
 = 1.0;

64 
Ról_t
 
	gbëa
 = 0.0;

66 c⁄° 
Ról_t
 *
	gAPoöãr
 = 
A
.
GëRawD©aPoöãr
();

67 c⁄° 
Ról_t
 *
	gBPoöãr
 = 
B
.
GëRawD©aPoöãr
();

68 
Ról_t
 *
	gCPoöãr
 = 
C
.
GëRawD©aPoöãr
();

70 ::
TMVA
::
DNN
::
Bœs
::
Gemm
(&
å™ß
, &
å™sb
, &
m
, &
n
, &
k
, &
Æpha
,

71 
APoöãr
, &
k
, 
BPoöãr
, &k, &
bëa
, 
CPoöãr
, &
m
);

75 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

76 
	gTCpu
<
	gRól_t
>::
Hadam¨d
(
TCpuM©rix
<
Ról_t
> &
B
,

77 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
)

79 c⁄° 
Ról_t
 *
	gd©aA
 = 
A
.
GëRawD©aPoöãr
();

80 
Ról_t
 *
	gd©aB
 = 
B
.
GëRawD©aPoöãr
();

82 autÿ
	gf
 = [&
d©aA
, &
d©aB
](
UI¡_t
 
	gw‹kîID
)

84 
	gd©aB
[
w‹kîID
] *
d©aA
[workerID];

88 
	gB
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
B
.
GëNEÀmíts
()));

92 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

93 
	gTCpu
<
	gRól_t
>::
SumCﬁumns
(
TCpuM©rix
<
Ról_t
> &
B
,

94 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
)

96 
	gm
 = (Ë
A
.
GëNrows
();

97 
	gn
 = (Ë
A
.
GëNcﬁs
();

98 
	göc
 = 1;

100 
Ról_t
 
	gÆpha
 = 1.0;

101 
Ról_t
 
	gbëa
 = 0.0;

102 
	gå™s
 = 'T';

104 c⁄° 
Ról_t
 * 
	gAPoöãr
 = 
A
.
GëRawD©aPoöãr
();

105 
Ról_t
 * 
	gBPoöãr
 = 
B
.
GëRawD©aPoöãr
();

107 ::
TMVA
::
DNN
::
Bœs
::
Gemv
(&
å™s
, &
m
, &
n
, &
Æpha
, 
APoöãr
, &m,

108 
TCpuM©rix
<
Ról_t
>::
GëO√Poöãr
(), &
öc
,

109 &
bëa
, 
BPoöãr
, &
öc
);

113 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

114 
	gTCpu
<
	gRól_t
>::
SˇÀAdd
(
TCpuM©rix
<
Ról_t
> &
B
,

115 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
,

116 
Ról_t
 
Æpha
)

118 
	gn
 = (Ë(
A
.
GëNcﬁs
(Ë* A.
GëNrows
());

119 
	göc
 = 1;

121 c⁄° 
Ról_t
 *
	gx
 = 
A
.
GëRawD©aPoöãr
();

122 
Ról_t
 *
	gy
 = 
B
.
GëRawD©aPoöãr
();

124 ::
TMVA
::
DNN
::
Bœs
::
Axpy
(&
n
, &
Æpha
, 
x
, &
öc
, 
y
, &inc);

128 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

129 
	gTCpu
<
	gRól_t
>::
C›y
(
TCpuM©rix
<
Ról_t
> &
B
,

130 c⁄° 
TCpuM©rix
<
Ról_t
> &
A
)

132 autÿ
	gf
 = [](
Ról_t
 
x
) { x;};

133 
	gB
.
M≠From
(
f
, 
A
);

	@src/DNN/Architectures/Cpu/CpuBuffer.cxx

16 
	~<ve˘‹
>

17 
	~<mem‹y
>

18 
	~"TMVA/DNN/D©aLﬂdî.h
"

19 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

20 
	~"Rty≥s.h
"

21 
	~<io°ªam
>

23 
«me•a˚
 
	gTMVA


25 
«me•a˚
 
	gDNN


29 
	gãm∂©e
<
ty≥«me
 
	gARól
>

30 
	gTCpuBuf„r
<
	gARól
>::
TDe°ru˘‹
::
›î©‹
()(
ARól
 ** 
poöãr
)

32 
dñëe
[] * 
poöãr
;

33 
	gdñëe
[] 
	gpoöãr
;

37 
	gãm∂©e
<
ty≥«me
 
	gARól
>

38 
	gTCpuBuf„r
<
	gARól
>::
TCpuBuf„r
(
size_t
 
size
)

39 : 
fSize
(
size
), 
fOff£t
(0)

41 
ARól
 ** 
	gpoöãr
 = 
√w
 AReal * [1];

42 * 
	gpoöãr
 = 
√w
 
ARól
[
size
];

43 
	gfBuf„r
 = 
°d
::
sh¨ed_±r
<
ARól
 *>(
poöãr
, 
	gfDe°ru˘‹
);

47 
	gãm∂©e
<
ty≥«me
 
	gARól
>

48 
	gTCpuBuf„r
<
	gARól
> TCpuBuf„r<ARól>::
GëSubBuf„r
(
size_t
 
off£t
, size_à
size
)

50 
TCpuBuf„r
 
	gbuf„r
 = *
this
;

51 
	gbuf„r
.
	gfOff£t
 = 
off£t
;

52 
	gbuf„r
.
	gfSize
 = 
size
;

53  
	gbuf„r
;

57 
	gãm∂©e
<
ty≥«me
 
	gARól
>

58 
	gTCpuBuf„r
<
	gARól
>::
C›yFrom
(
TCpuBuf„r
 & 
Ÿhî
)

60 
°d
::
sw≠
(*
this
->
fBuf„r
, *
Ÿhî
.fBuffer);

64 
	gãm∂©e
<
ty≥«me
 
	gARól
>

65 
	gTCpuBuf„r
<
	gARól
>::
C›yTo
(
TCpuBuf„r
 & 
Ÿhî
)

67 
°d
::
sw≠
(*
this
->
fBuf„r
, *
Ÿhî
.fBuffer);

71 
	gãm∂©e
<>

72 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCpu
<
	gRól_t
>>::
C›yI≈ut
(

73 
TCpuBuf„r
<
Ról_t
> & 
buf„r
,

74 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

75 
size_t
 
b©chSize
)

77 c⁄° 
	gTM©rixT
<
	gRól_t
> &
	göputM©rix
 = 
°d
::
gë
<0>(
fD©a
);

78 
size_t
 
	gn
 = 
öputM©rix
.
GëNcﬁs
();

80 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

81 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

82 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

83 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

84 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<
Ról_t
>(
öputM©rix
(
ßm∂eIndex
, 
j
));

86 
	gßm∂eIãøt‹
++;

91 
	gãm∂©e
<>

92 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCpu
<
	gRól_t
>>::
C›yOuçut
(

93 
TCpuBuf„r
<
Ról_t
> & 
buf„r
,

94 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

95 
size_t
 
b©chSize
)

97 c⁄° 
	gTM©rixT
<
	gRól_t
> &
	gouçutM©rix
 = 
°d
::
gë
<1>(
fD©a
);

98 
size_t
 
	gn
 = 
ouçutM©rix
.
GëNcﬁs
();

100 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

101 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

102 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

103 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

104 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<
Ról_t
>(
ouçutM©rix
(
ßm∂eIndex
, 
j
));

106 
	gßm∂eIãøt‹
++;

111 
	gãm∂©e
<>

112 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCpu
<
	gDoubÀ_t
>>::
C›yI≈ut
(

113 
TCpuBuf„r
<
DoubÀ_t
> & 
buf„r
,

114 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

115 
size_t
 
b©chSize
)

117 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	göputM©rix
 = 
°d
::
gë
<0>(
fD©a
);

118 
size_t
 
	gn
 = 
öputM©rix
.
GëNcﬁs
();

120 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

121 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

122 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

123 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

124 
	gbuf„r
[
buf„rIndex
] = 
öputM©rix
(
ßm∂eIndex
, 
j
);

126 
	gßm∂eIãøt‹
++;

131 
	gãm∂©e
<>

132 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCpu
<
	gDoubÀ_t
>>::
C›yOuçut
(

133 
TCpuBuf„r
<
DoubÀ_t
> & 
buf„r
,

134 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

135 
size_t
 
b©chSize
)

137 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	gouçutM©rix
 = 
°d
::
gë
<1>(
fD©a
);

138 
size_t
 
	gn
 = 
ouçutM©rix
.
GëNcﬁs
();

140 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

141 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

142 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

143 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

144 
	gbuf„r
[
buf„rIndex
] = 
ouçutM©rix
(
ßm∂eIndex
, 
j
);

146 
	gßm∂eIãøt‹
++;

151 
	gãm∂©e
<>

152 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCpu
<
	gDoubÀ_t
>>::
C›yI≈ut
(

153 
TCpuBuf„r
<
DoubÀ_t
> & 
buf„r
,

154 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

155 
size_t
 
b©chSize
)

157 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

158 
size_t
 
	gn
 = 
evít
->
GëNV¨übÀs
();

162 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

163 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

164 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

165 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

166 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

167 
	gbuf„r
[
buf„rIndex
] = 
evít
->
GëVÆue
(
j
);

173 
	gãm∂©e
<>

174 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCpu
<
	gDoubÀ_t
>>::
C›yOuçut
(

175 
TCpuBuf„r
<
DoubÀ_t
> & 
buf„r
,

176 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

177 
size_t
 
b©chSize
)

179 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

180 
size_t
 
	gn
 = 
buf„r
.
GëSize
(Ë/ 
b©chSize
;

184 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

185 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

186 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

187 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

189 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

191 i‡(
	gevít
->
GëNT¨gës
() == 0) {

192 i‡(
n
 == 1) {

194 
buf„r
[
buf„rIndex
] = (
evít
->
GëCœss
() == 0) ? 1.0 : 0.0;

197 
	gbuf„r
[
buf„rIndex
] = 0.0;

198 i‡(
	gj
 =
evít
->
GëCœss
()) {

199 
buf„r
[
buf„rIndex
] = 1.0;

203 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<
Ról_t
>(
evít
->
GëT¨gë
(
j
));

210 
	gãm∂©e
<>

211 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCpu
<
	gRól_t
>>::
C›yI≈ut
(

212 
TCpuBuf„r
<
Ról_t
> & 
buf„r
,

213 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

214 
size_t
 
b©chSize
)

216 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

217 
size_t
 
	gn
 = 
evít
->
GëNV¨übÀs
();

221 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

222 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

223 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

224 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

225 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

226 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<
Ról_t
>(
evít
->
GëVÆue
(
j
));

232 
	gãm∂©e
<>

233 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCpu
<
	gRól_t
>>::
C›yOuçut
(

234 
TCpuBuf„r
<
Ról_t
> & 
buf„r
,

235 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

236 
size_t
 
b©chSize
)

238 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

239 
size_t
 
	gn
 = 
buf„r
.
GëSize
(Ë/ 
b©chSize
;

243 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

244 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

245 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

246 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

248 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

250 i‡(
	gevít
->
GëNT¨gës
() == 0) {

251 i‡(
n
 == 1) {

253 
buf„r
[
buf„rIndex
] = (
evít
->
GëCœss
() == 0) ? 1.0 : 0.0;

256 
	gbuf„r
[
buf„rIndex
] = 0.0;

257 i‡(
	gj
 =
evít
->
GëCœss
()) {

258 
buf„r
[
buf„rIndex
] = 1.0;

262 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<
Ról_t
>(
evít
->
GëT¨gë
(
j
));

269 
ãm∂©e
 
˛ass
 
	gTCpuBuf„r
<
	gDoubÀ_t
>;

270 
ãm∂©e
 
˛ass
 
	gTCpuBuf„r
<
	gRól_t
>;

	@src/DNN/Architectures/Cpu/CpuMatrix.cxx

16 
	~"TMVA/DNN/Archôe˘uªs/Cpu/CpuM©rix.h
"

18 
«me•a˚
 
	gTMVA
 {

19 
«me•a˚
 
	gDNN
 {

22 
	gãm∂©e
<
ty≥«me
 
	gARól
>

23 
	gTCpuM©rix
<
	gARól
>::
TCpuM©rix
(
size_t
 
nRows
, size_à
nCﬁs
)

24 : 
fBuf„r
(
nRows
 * 
nCﬁs
), 
fNCﬁs
“Cﬁs), 
fNRows
(nRows)

26 
Inôülize
();

30 
	gãm∂©e
<
ty≥«me
 
	gARól
>

31 
	gTCpuM©rix
<
	gARól
>::
TCpuM©rix
(c⁄° 
TM©rixT
<
DoubÀ_t
> & 
B
)

32 : 
fBuf„r
(
B
.
GëNoEÀmíts
()), 
fNCﬁs
(B.
GëNcﬁs
()), 
fNRows
(B.
GëNrows
())

34 
Inôülize
();

35 
size_t
 
	gj
 = 0; j < 
	gfNCﬁs
; j++) {

36 
size_t
 
	gi
 = 0; i < 
	gfNRows
; i++) {

37 (*
	gthis
)(
	gi
,
	gj
Ë
B
(
i
,
j
);

43 
	gãm∂©e
<
ty≥«me
 
	gARól
>

44 
	gTCpuM©rix
<
	gARól
>::
TCpuM©rix
(c⁄° 
TCpuBuf„r
<
ARól
> & 
buf„r
,

45 
size_t
 
m
,

46 
size_t
 
n
)

47 : 
fBuf„r
(
buf„r
), 
fNCﬁs
(
n
), 
fNRows
(
m
)

49 
Inôülize
();

53 
	gãm∂©e
<
ty≥«me
 
	gARól
>

54 
	gTCpuM©rix
<
	gARól
>::
›î©‹
 
TM©rixT
<
DoubÀ_t
>() const

56 
TM©rixT
<
ARól
> 
B
(
fNRows
, 
fNCﬁs
);

58 
size_t
 
	gj
 = 0; j < 
	gfNCﬁs
; j++) {

59 
size_t
 
	gi
 = 0; i < 
	gfNRows
; i++) {

60 
B
(
i
,
j
Ë(*
this
)(i, 
	gj
);

63  
	gB
;

68 
	gãm∂©e
<
ty≥«me
 
	gARól
>

69 
	gTCpuM©rix
<
	gARól
>::
Inôülize
()

71 i‡(
fNRows
 > 
fO√s
.
size
()) {

72 
fO√s
.
ª£rve
(
fNRows
);

73 
size_t
 
	gi
 = 
fO√s
.
size
(); i < 
	gfNRows
; i++) {

74 
	gfO√s
.
push_back
(1.0);

80 
ãm∂©e
 
˛ass
 
	gTCpuM©rix
<
	gRól_t
>;

81 
ãm∂©e
 
˛ass
 
	gTCpuM©rix
<
	gDoubÀ_t
>;

	@src/DNN/Architectures/Cpu/DataLoader.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Cpu/D©aLﬂdî.h
"

18 
	~"TMVA/Evít.h
"

19 
	~<io°ªam
>

21 
«me•a˚
 
	gTMVA


23 
«me•a˚
 
	gDNN


28 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

29 
	gTCpuB©chIãøt‹
<
	gD©a_t
, 
	gRól_t
>::
TCpuB©chIãøt‹
(

30 
TCpuD©aLﬂdî
<
D©a_t
, 
Ról_t
> & 
d©aLﬂdî
,

31 
size_t
 
b©chIndex
)

32 : 
fD©aLﬂdî
(
d©aLﬂdî
), 
fB©chIndex
(
b©chIndex
)

38 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

39 
	gTCpuB©ch
<
	gRól_t
> 
	gTCpuB©chIãøt‹
<
	gD©a_t
, Ról_t>::
›î©‹
*()

41  
fD©aLﬂdî
.
GëB©ch
(
fB©chIndex
);

45 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

46 
	gTCpuB©chIãøt‹
<
	gD©a_t
, 
	gRól_t
> & TCpuB©chIãøt‹<D©a_t, Ról_t>::
›î©‹
++()

48 
fB©chIndex
++;

49  *
	gthis
;

53 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

54 
boﬁ
 
	gTCpuB©chIãøt‹
<
	gD©a_t
, 
	gRól_t
>::
›î©‹
!=(c⁄° 
TCpuB©chIãøt‹
 & 
Ÿhî
)

56  
fB©chIndex
 !
Ÿhî
.
GëB©chIndex
();

60 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

61 
boﬁ
 
	gTCpuB©chIãøt‹
<
	gD©a_t
, 
	gRól_t
>::
›î©‹
==(c⁄° 
TCpuB©chIãøt‹
 & 
Ÿhî
)

63  
fB©chIndex
 =
Ÿhî
.
GëB©chIndex
();

68 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

69 
	gTCpuD©aLﬂdî
<
	gD©a_t
, 
	gRól_t
>::
TCpuD©aLﬂdî
(c⁄° 
D©a_t
 &
öput
,

70 
size_t
 
nßm∂es
,

71 
size_t
 
b©chSize
,

72 
size_t
 
nöputFótuªs
,

73 
size_t
 
nouçutFótuªs
,

74 
size_t
 
buf„rSize
)

75 : 
fI≈ut
(
öput
), 
fNSam∂es
(
nßm∂es
), 
fB©chSize
(
b©chSize
),

76 
fBuf„rSize
(
buf„rSize
), 
fNI≈utFótuªs
(
nöputFótuªs
),

77 
fNOuçutFótuªs
(
nouçutFótuªs
), 
fNB©ches
(
nßm∂es
 / 
b©chSize
),

78 
fI≈utM©ri˚s
(), 
fOuçutM©ri˚s
(), 
fSam∂eIndi˚s
()

80 
	gfI≈utM©ri˚s
.
ª£rve
(
fBuf„rSize
);

81 
	gfOuçutM©ri˚s
.
ª£rve
(
fBuf„rSize
);

82 
size_t
 
	gi
 = 0; i < 
	gfBuf„rSize
; i++) {

83 
	gfI≈utM©ri˚s
.
em∂a˚_back
(
fB©chSize
, 
fNI≈utFótuªs
);

84 
	gfOuçutM©ri˚s
.
em∂a˚_back
(
fB©chSize
, 
fNOuçutFótuªs
);

87 
	gfSam∂eIndi˚s
.
ª£rve
(
fNB©ches
);

88 
size_t
 
	gi
 = 0; i < 
	gfNSam∂es
; i++) {

89 
	gfSam∂eIndi˚s
.
em∂a˚_back
(
i
);

94 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

95 
ölöe
 
	gTCpuD©aLﬂdî
<
	gD©a_t
, 
	gRól_t
>::
C›yD©a
(
size_t
 
b©chIndex
)

97 autÿ
c›y
 = [
this
](
UI¡_t
 
w‹kîID
)

99 
C›yB©ch
(
this
->
fI≈utM©ri˚s
[
w‹kîID
 %Åhis->
fBuf„rSize
],

100 
this
->
fOuçutM©ri˚s
[
w‹kîID
 %Åhis->
fBuf„rSize
],

101 
this
->
fI≈ut
,

102 
this
->
fSam∂eIndi˚s
.
begö
(Ë+ 
ßm∂eIndex
,

103 
this
->
fSam∂eIndi˚s
.
begö
(Ë+ 
ßm∂eIndex
 +Åhis->
fB©chSize
);

104 
	gßm∂eIndex
 +
this
->
fB©chSize
;

108 
size_t
 
	gíd
 = 
°d
::
mö
(
b©chIndex
 + 
fBuf„rSize
, 
fNB©ches
);

109 
size_t
 
	g°¨t
 = 
b©chIndex
;

110 
	gROOT
::
TThªadExecut‹
 
poﬁ
{};

111 
	gpoﬁ
.
M≠
(
c›y
, 
ROOT
::
TSeqI
(
°¨t
, 
íd
));

115 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

116 
	gTCpuB©ch
<
	gRól_t
> 
	gTCpuD©aLﬂdî
<
	gD©a_t
, Ról_t>::
GëB©ch
(
size_t
 
b©chIndex
)

118 
size_t
 
fBuf„rIndex
 = 
b©chIndex
 % 
fBuf„rSize
;

119 i‡(
	gfBuf„rIndex
 == 0) {

120 
C›yD©a
(
b©chIndex
);

122  
	gTCpuB©ch
<
	gRól_t
>(
	gfI≈utM©ri˚s
[
fBuf„rIndex
],

123 
	gfOuçutM©ri˚s
[
fBuf„rIndex
]);

127 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

128 autÿ
	gTCpuD©aLﬂdî
<
	gD©a_t
, 
	gRól_t
>::
begö
()

129 -> 
B©chIãøt‹_t


131 
øndom_shufÊe
(
fSam∂eIndi˚s
.
begö
(), fSam∂eIndi˚s.
íd
());

132  
B©chIãøt‹_t
(*
this
, 0);

136 
	gãm∂©e
<
ty≥«me
 
	gD©a_t
,Åy≥«mê
	gRól_t
>

137 autÿ
	gTCpuD©aLﬂdî
<
	gD©a_t
, 
	gRól_t
>::
íd
()

138 -> 
B©chIãøt‹_t


140  
B©chIãøt‹_t
(*
this
, 
fNB©ches
);

144 
	gãm∂©e
 <>

145 
	gTCpuD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gDoubÀ_t
>::
C›yB©ch
(

146 
M©rix_t
 &
öputM©rix
,

147 
M©rix_t
 &
ouçutM©rix
,

148 c⁄° 
M©rixI≈ut_t
 &
öput
,

149 
IndexIãøt‹_t
 
ödexBegö
,

150 
IndexIãøt‹_t
 
ödexEnd
)

152 autÿ&
	gö
 = 
°d
::
gë
<0>(
öput
);

153 autÿ&
	gout
 = 
°d
::
gë
<1>(
öput
);

155 
size_t
 
	gb©chIndex
 = 0;

156 
IndexIãøt‹_t
 
	gi
 = 
ödexBegö
; i !
ödexEnd
; i++) {

157 
size_t
 
	gödex
 = *
i
;

158 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gö
.
GëNcﬁs
(); j++) {

159 
öputM©rix
(
b©chIndex
, 
j
Ë
ö
(
ödex
, j);

161 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gout
.
GëNcﬁs
(); j++) {

162 
ouçutM©rix
(
b©chIndex
, 
j
Ë
out
(
ödex
, j);

164 
	gb©chIndex
++;

169 
	gãm∂©e
 <>

170 
	gTCpuD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gDoubÀ_t
>::
C›yB©ch
(

171 
M©rix_t
 &
öputM©rix
,

172 
M©rix_t
 &
ouçutM©rix
,

173 c⁄° 
TMVAI≈ut_t
 &
öput
,

174 
IndexIãøt‹_t
 
ödexBegö
,

175 
IndexIãøt‹_t
 
ödexEnd
)

177 
size_t
 
	gb©chIndex
 = 0;

178 
IndexIãøt‹_t
 
	gi
 = 
ödexBegö
; i !
ödexEnd
; i++) {

179 
size_t
 
	gödex
 = *
i
;

180 
Evít
 *
	gevít
 = 
öput
.
©
(
ödex
);

181 
size_t
 
	gj
 = 0; j < 
	gevít
->
GëNV¨übÀs
(); j++) {

182 
öputM©rix
(
b©chIndex
, 
j
Ë
evít
->
GëVÆue
(j);

184 i‡(
	gevít
->
GëNT¨gës
() > 0) {

185 
size_t
 
	gj
 = 0; j < 
	gevít
->
GëNT¨gës
(); j++) {

186 
ouçutM©rix
(
b©chIndex
, 
j
Ë
evít
->
GëT¨gë
(j);

189 
ouçutM©rix
(
b©chIndex
, 0Ë(
evít
->
GëCœss
() == 0) ? 1.0 : 0.0;

190 
	gb©chIndex
++;

197 
ãm∂©e
 
˛ass
 
	gTCpuD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gDoubÀ_t
>;

198 
ãm∂©e
 
˛ass
 
	gTCpuD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gDoubÀ_t
>;

199 
ãm∂©e
 
˛ass
 
	gTCpuB©chIãøt‹
<
	gM©rixI≈ut_t
, 
	gDoubÀ_t
>;

200 
ãm∂©e
 
˛ass
 
	gTCpuB©chIãøt‹
<
	gTMVAI≈ut_t
, 
	gDoubÀ_t
>;

201 
ãm∂©e
 
˛ass
 
	gTCpuB©ch
<
	gDoubÀ_t
>;

	@src/DNN/Architectures/Cpu/DenoisePropagation.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

20 
«me•a˚
 
	gTMVA


22 
«me•a˚
 
	gDNN


27 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

28 
	gTCpu
<
	gAFlﬂt
>::
AddBü£s
(
TCpuM©rix
<
AFlﬂt
> &
A
,

29 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
bü£s
)

36 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

37 
	gTCpu
<
	gAFlﬂt
>::
Upd©eP¨ams
(
TCpuM©rix
<
AFlﬂt
> &
x
,

38 
TCpuM©rix
<
AFlﬂt
> &
z
,

39 
TCpuM©rix
<
AFlﬂt
> &
fVBü£s
,

40 
TCpuM©rix
<
AFlﬂt
> &
fHBü£s
,

41 
TCpuM©rix
<
AFlﬂt
> &
fWeights
,

42 
DoubÀ_t
 
À¨nögR©e
,

43 
DoubÀ_t
 
c‹ru±i⁄Levñ
,

44 
size_t
 
fB©chSize
)

53 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

54 
	gTCpu
<
	gAFlﬂt
>::
So·maxAE
(
TCpuM©rix
<
AFlﬂt
> & 
A
)

61 
ãm∂©e
<
ty≥«me
 
AFlﬂt
>

62 
TCpu
<
AFlﬂt
>::
C‹ru±I≈ut
(
TCpuM©rix
<AFlﬂt> & 
öput
,

63 
TCpuM©rix
<
AFlﬂt
> & 
c‹ru±edI≈ut
,

64 
AFlﬂt
 
c‹ru±i⁄Levñ
)

72 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

73 
	gTCpu
<
	gAFlﬂt
>::
EncodeI≈ut
(
TCpuM©rix
<
AFlﬂt
> & 
öput
,

74 
TCpuM©rix
<
AFlﬂt
> & 
com¥es£dI≈ut
,

75 
TCpuM©rixT
<
AFlﬂt
> &
fWeights
)

81 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

82 
	gTCpu
<
	gAFlﬂt
>::
Rec⁄°ru˘I≈ut
(
TCpuM©rix
<
AFlﬂt
> & 
com¥es£dI≈ut
,

83 
TCpuM©rix
<
AFlﬂt
> & 
ªc⁄°ru˘edI≈ut
,

84 
TCpuM©rix
<
AFlﬂt
> &
fWeights
)

95 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

96 
	gTCpu
<
	gAFlﬂt
>::
F‹w¨dLogReg
(
TCpuM©rix
<
AFlﬂt
> &
öput
,

97 
TCpuM©rix
<
AFlﬂt
> &
p
,

98 
TCpuM©rix
<
AFlﬂt
> &
fWeights
)

105 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

106 
	gTCpu
<
	gAFlﬂt
>::
Upd©eP¨amsLogReg
(
TCpuM©rix
<
AFlﬂt
> &
öput
,

107 
TCpuM©rix
<
AFlﬂt
> &
ouçut
,

108 
TCpuM©rix
<
AFlﬂt
> &
dif„ªn˚
,

109 
TCpuM©rix
<
AFlﬂt
> &
p
,

110 
TCpuM©rix
<
AFlﬂt
> &
fWeights
,

111 
TCpuM©rix
<
AFlﬂt
> &
fBü£s
,

112 
AFlﬂt
 
À¨nögR©e
,

113 
size_t
 
fB©chSize
)

119 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

120 
	gTCpu
<
	gAFlﬂt
>::
Tønsf‹m
(
TCpuM©rix
<
AFlﬂt
> &
öput
,

121 
TCpuM©rix
<
AFlﬂt
> &
å™sf‹med
,

122 
TCpuM©rix
<
AFlﬂt
> &
fWeights
,

123 
TCpuM©rix
<
AFlﬂt
> &
fBü£s
)

	@src/DNN/Architectures/Cpu/Dropout.cxx

12 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

13 
	~"TR™dom.h
"

19 
«me•a˚
 
	gTMVA
 {

20 
«me•a˚
 
	gDNN
 {

23 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

24 
	gTCpu
<
	gAFlﬂt
>::
Dr›out
(
TCpuM©rix
<
AFlﬂt
> &
A
,

25 
AFlﬂt
 
dr›outProbabûôy
)

27 
AFlﬂt
 *
	gd©a
 = 
A
.
GëRawD©aPoöãr
();

29 autÿ
	gf
 = [&
d©a
, 
dr›outProbabûôy
](
UI¡_t
 
	gw‹kîID
)

31 
TR™dom
 
ønd
(
time
(
nuŒ±r
Ë+ 
w‹kîID
);

32 
AFlﬂt
 
	gr
 = 
ønd
.
Unif‹m
();

33 
	gd©a
[
w‹kîID
] = (
r
 > 
dr›outProbabûôy
Ë? 0.0 : 
d©a
[workerID] / dropoutProbability;

37 
	gA
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
A
.
GëNEÀmíts
()));

	@src/DNN/Architectures/Cpu/Initialization.cxx

17 
	~"TR™dom.h
"

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

20 
«me•a˚
 
	gTMVA


22 
«me•a˚
 
	gDNN


26 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

27 
	gTCpu
<
	gAFlﬂt
>::
InôülizeGauss
(
TCpuM©rix
<
AFlﬂt
> & 
A
)

29 
size_t
 
m
,
	gn
;

30 
	gm
 = 
A
.
GëNrows
();

31 
	gn
 = 
A
.
GëNcﬁs
();

33 
TR™dom
 
ønd
(
time
(
nuŒ±r
));

35 
AFlﬂt
 
	gsigma
 = 
sqπ
(2.0 / ((AFlﬂtË
n
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
A
(
i
,
j
Ë
ønd
.
Gaus
(0.0, 
sigma
);

45 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

46 
	gTCpu
<
	gAFlﬂt
>::
InôülizeUnif‹m
(
TCpuM©rix
<
AFlﬂt
> & 
A
)

48 
size_t
 
m
,
	gn
;

49 
	gm
 = 
A
.
GëNrows
();

50 
	gn
 = 
A
.
GëNcﬁs
();

52 
TR™dom
 
ønd
(
time
(
nuŒ±r
));

54 
AFlﬂt
 
	gønge
 = 
sqπ
(2.0 / ((AFlﬂtË
n
));

56 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

57 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

58 
A
(
i
,
j
Ë
ønd
.
Unif‹m
(-
ønge
,Ñange);

64 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

65 
	gTCpu
<
	gAFlﬂt
>::
InôülizeIdítôy
(
TCpuM©rix
<
AFlﬂt
> & 
A
)

67 
size_t
 
m
,
	gn
;

68 
	gm
 = 
A
.
GëNrows
();

69 
	gn
 = 
A
.
GëNcﬁs
();

71 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

72 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

73 
A
(
i
,
j
) = 0.0;

76 i‡(
	gi
 < 
	gn
) {

77 
A
(
i
,i) = 1.0;

83 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

84 
	gTCpu
<
	gAFlﬂt
>::
InôülizeZîo
(
TCpuM©rix
<
AFlﬂt
> & 
A
)

86 
size_t
 
m
,
	gn
;

87 
	gm
 = 
A
.
GëNrows
();

88 
	gn
 = 
A
.
GëNcﬁs
();

90 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

91 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

92 
A
(
i
,
j
) = 0.0;

	@src/DNN/Architectures/Cpu/LossFunctions.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


25 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

26 
AFlﬂt
 
	gTCpu
<
	gAFlﬂt
>::
MónSqu¨edEº‹
(c⁄° 
TCpuM©rix
<AFlﬂt> &
Y
,

27 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
ouçut
)

29 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

30 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

31 
	g°d
::
ve˘‹
<
AFlﬂt
> 
ãmp
(
Y
.
GëNEÀmíts
());

32 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
Y
.
GëNrows
(Ë* Y.
GëNcﬁs
());

34 autÿ
	gf
 = [&
d©aY
, &
d©aOuçut
, &
ãmp
](
UI¡_t
 
	gw‹kîID
)

36 
AFlﬂt
 
	gdy
 = 
d©aY
[
w‹kîID
] - 
d©aOuçut
[workerID];

37 
	gãmp
[
w‹kîID
] = 
dy
 * dy;

42 autÿ
	gªdu˘i⁄
 = [](c⁄° 
°d
::
ve˘‹
<
AFlﬂt
> & 
v
 )

46  
°d
::
accumuœã
(
v
.
begö
(),v.
íd
(),
AFlﬂt
{});

49 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNEÀmíts
()));

50  
n‹m
 * 
	gY
.
GëThªadExecut‹
().
Redu˚
(
ãmp
, 
ªdu˘i⁄
);

54 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

55 
	gTCpu
<
	gAFlﬂt
>::
MónSqu¨edEº‹Gødõ¡s
(

56 
TCpuM©rix
<
AFlﬂt
> & 
dY
,

57 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
Y
,

58 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
ouçut
)

61 
AFlﬂt
 *
	gd©aDY
 = 
dY
.
GëRawD©aPoöãr
();

62 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

63 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

64 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
Y
.
GëNrows
(Ë* Y.
GëNcﬁs
());

66 autÿ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuçut
, 
n‹m
](
UI¡_t
 
	gw‹kîID
)

68 
	gd©aDY
[
w‹kîID
] = - 2.0 * 
n‹m
 * (
d©aY
[w‹kîID] - 
d©aOuçut
[workerID]);

72 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNEÀmíts
()));

76 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

77 
AFlﬂt
 
	gTCpu
<
	gAFlﬂt
>::
CrossE¡r›y
(c⁄° 
TCpuM©rix
<AFlﬂt> &
Y
,

78 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
ouçut
)

80 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

81 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

82 
	g°d
::
ve˘‹
<
AFlﬂt
> 
ãmp
(
Y
.
GëNEÀmíts
());

83 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
Y
.
GëNrows
(Ë* Y.
GëNcﬁs
());

85 autÿ
	gf
 = [&
d©aY
, &
d©aOuçut
, &
ãmp
](
UI¡_t
 
	gw‹kîID
)

87 
AFlﬂt
 
	gy
 = 
d©aY
[
w‹kîID
];

88 
AFlﬂt
 
	gsig
 = 1.0 / (1.0 + 
exp
(- 
d©aOuçut
[
w‹kîID
]));

89 
	gãmp
[
w‹kîID
] = - (
y
 * 
log
(
sig
) + (1.0 - y) *Üog(1.0 - sig));

97 autÿ
	gªdu˘i⁄
 = [](c⁄° 
°d
::
ve˘‹
<
AFlﬂt
> & 
v
 )

99  
°d
::
accumuœã
(
v
.
begö
(),v.
íd
(),
AFlﬂt
{});

103 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNEÀmíts
()));

104  
n‹m
 * 
	gY
.
GëThªadExecut‹
().
Redu˚
(
ãmp
, 
ªdu˘i⁄
);

108 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

109 
	gTCpu
<
	gAFlﬂt
>::
CrossE¡r›yGødõ¡s
(

110 
TCpuM©rix
<
AFlﬂt
> & 
dY
,

111 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
Y
,

112 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
ouçut
)

114 
AFlﬂt
 *
	gd©aDY
 = 
dY
.
GëRawD©aPoöãr
();

115 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

116 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

117 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
Y
.
GëNrows
(Ë* Y.
GëNcﬁs
());

119 autÿ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuçut
, 
n‹m
](
UI¡_t
 
	gw‹kîID
)

121 
AFlﬂt
 
	gy
 = 
d©aY
[
w‹kîID
];

122 
AFlﬂt
 
	gsig
 = 1.0 / (1.0 + 
exp
(- 
d©aOuçut
[
w‹kîID
]));

123 
	gd©aDY
[
w‹kîID
] = 
n‹m
 * (
sig
 - 
y
);

127 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNEÀmíts
()));

131 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

132 
AFlﬂt
 
	gTCpu
<
	gAFlﬂt
>::
So·maxCrossE¡r›y
(

133 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
Y
,

134 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
ouçut
)

136 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

137 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

138 
	g°d
::
ve˘‹
<
AFlﬂt
> 
ãmp
(
Y
.
GëNrows
());

139 
size_t
 
	gm
 = 
Y
.
GëNrows
();

140 
size_t
 
	gn
 = 
Y
.
GëNcﬁs
();

141 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
m
);

143 autÿ
	gf
 = [&
d©aY
, &
d©aOuçut
, &
ãmp
, 
n
, 
m
](
UI¡_t
 
	gw‹kîID
)

145 
AFlﬂt
 
	gsum
 = 0.0;

146 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

147 
	gsum
 +
exp
(
d©aOuçut
[
w‹kîID
 + 
j
 * 
m
]);

149 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

150 
	gãmp
[
w‹kîID
] -=

151 
d©aY
[
w‹kîID
 + 
j
 * 
m
] * 
log
(
exp
(
d©aOuçut
[w‹kîID + j * m]Ë/ 
sum
);

160 autÿ
	gªdu˘i⁄
 = [](c⁄° 
°d
::
ve˘‹
<
AFlﬂt
> & 
v
 )

162  
°d
::
accumuœã
(
v
.
begö
(),v.
íd
(),
AFlﬂt
{});

165 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNrows
()));

166  
n‹m
 * 
	gY
.
GëThªadExecut‹
().
Redu˚
(
ãmp
, 
ªdu˘i⁄
);

170 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

171 
	gTCpu
<
	gAFlﬂt
>::
So·maxCrossE¡r›yGødõ¡s
(

172 
TCpuM©rix
<
AFlﬂt
> & 
dY
,

173 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
Y
,

174 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
ouçut
)

176 
AFlﬂt
 *
	gd©aDY
 = 
dY
.
GëRawD©aPoöãr
();

177 c⁄° 
AFlﬂt
 *
	gd©aY
 = 
Y
.
GëRawD©aPoöãr
();

178 c⁄° 
AFlﬂt
 *
	gd©aOuçut
 = 
ouçut
.
GëRawD©aPoöãr
();

179 
size_t
 
	gm
 = 
Y
.
GëNrows
();

180 
size_t
 
	gn
 = 
Y
.
GëNcﬁs
();

181 
AFlﬂt
 
	gn‹m
 = 1.0 / ((AFlﬂtË
m
);

183 autÿ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuçut
, 
n‹m
, 
n
, 
m
](
UI¡_t
 
	gw‹kîID
)

185 
AFlﬂt
 
	gsum
 = 0.0;

186 
AFlﬂt
 
	gsumY
 = 0.0;

187 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

188 
	gsum
 +
exp
(
d©aOuçut
[
w‹kîID
 + 
j
 * 
m
]);

189 
	gsumY
 +
d©aY
[
w‹kîID
 + 
j
 * 
m
];

191 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

192 
	gd©aDY
[
w‹kîID
 + 
j
 * 
m
] =

193 
n‹m
 * (
exp
(
d©aOuçut
[
w‹kîID
 + 
j
 * 
m
]Ë/ 
sum
 * 
sumY
 - 
d©aY
[workerID + j * m]);

199 
	gY
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Y
.
GëNrows
()));

	@src/DNN/Architectures/Cpu/OutputFunctions.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


24 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

25 
	gTCpu
<
	gAFlﬂt
>::
Sigmoid
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

26 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
A
)

28 autÿ
	gf
 = [](
AFlﬂt
 
x
Ë{ 1.0 / (1.0 + 
exp
(-x));};

29 
	gB
.
M≠From
(
f
, 
A
);

32 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

33 
	gTCpu
<
	gAFlﬂt
>::
So·max
(
TCpuM©rix
<
AFlﬂt
> & 
B
,

34 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
A
)

36 c⁄° 
AFlﬂt
 *
	gd©aA
 = 
A
.
GëRawD©aPoöãr
();

37 
AFlﬂt
 *
	gd©aB
 = 
B
.
GëRawD©aPoöãr
();

38 
size_t
 
	gn
 = 
A
.
GëNcﬁs
();

39 
size_t
 
	gm
 = 
A
.
GëNrows
();

41 autÿ
	gf
 = [&
d©aA
, &
d©aB
, 
n
, 
m
](
UI¡_t
 
	gw‹kîID
)

43 
AFlﬂt
 
	gsum
 = 0.0;

44 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

45 
	gsum
 +
exp
(
d©aA
[
w‹kîID
 + 
i
 * 
m
]);

47 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

48 
	gd©aB
[
w‹kîID
 + 
i
 * 
m
] = 
exp
(
d©aA
[w‹kîID + i * m]Ë/ 
sum
;

53 
	gB
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
A
.
GëNrows
()));

	@src/DNN/Architectures/Cpu/Propagation.cxx

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

19 
	~"TMVA/DNN/Archôe˘uªs/Cpu/Bœs.h
"

21 
«me•a˚
 
	gTMVA


23 
«me•a˚
 
	gDNN


26 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

27 
	gTCpu
<
	gAFlﬂt
>::
Mu…ùlyTøn•o£
(
TCpuM©rix
<
AFlﬂt
> &
ouçut
,

28 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
öput
,

29 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
Weights
)

31 
	gm
 = (Ë
öput
.
GëNrows
();

32 
	gk
 = (Ë
öput
.
GëNcﬁs
();

33 
	gn
 = (Ë
Weights
.
GëNrows
();

35 
	gå™ß
 = 'N';

36 
	gå™sb
 = 'T';

38 
AFlﬂt
 
	gÆpha
 = 1.0;

39 
AFlﬂt
 
	gbëa
 = 0.0;

41 c⁄° 
AFlﬂt
 *
	gA
 = 
öput
.
GëRawD©aPoöãr
();

42 c⁄° 
AFlﬂt
 *
	gB
 = 
Weights
.
GëRawD©aPoöãr
();

43 
AFlﬂt
 *
	gC
 = 
ouçut
.
GëRawD©aPoöãr
();

45 ::
TMVA
::
DNN
::
Bœs
::
Gemm
(&
å™ß
, &
å™sb
, &
m
, &
n
, &
k
, &
Æpha
,

46 
A
, &
m
, 
B
, &
n
, &
bëa
, 
C
, &m);

49 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

50 
	gTCpu
<
	gAFlﬂt
>::
AddRowWi£
(

51 
TCpuM©rix
<
AFlﬂt
> &
ouçut
,

52 c⁄° 
TCpuM©rix
<
AFlﬂt
> &
bü£s
)

54 
	gm
 = (Ë
ouçut
.
GëNrows
();

55 
	gn
 = (Ë
ouçut
.
GëNcﬁs
();

57 
	göc
 = 1.0;

58 
AFlﬂt
 
	gÆpha
 = 1.0;

60 
AFlﬂt
 * 
	gA
 = 
ouçut
.
GëRawD©aPoöãr
();

61 c⁄° 
AFlﬂt
 * 
	gx
 = 
TCpuM©rix
<AFlﬂt>::
GëO√Poöãr
();

62 c⁄° 
AFlﬂt
 * 
	gy
 = 
bü£s
.
GëRawD©aPoöãr
();

64 ::
TMVA
::
DNN
::
Bœs
::
Gî
(&
m
, &
n
, &
Æpha
, 
x
, &
öc
, 
y
, &öc, 
A
, &m);

67 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

68 
	gTCpu
<
	gAFlﬂt
>::
Backw¨d
(

69 
TCpuM©rix
<
AFlﬂt
> & 
a˘iv©i⁄Gødõ¡sBackw¨d
,

70 
TCpuM©rix
<
AFlﬂt
> & 
weightGødõ¡s
,

71 
TCpuM©rix
<
AFlﬂt
> & 
büsGødõ¡s
,

72 
TCpuM©rix
<
AFlﬂt
> & 
df
,

73 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
a˘iv©i⁄Gødõ¡s
,

74 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
weights
,

75 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
a˘iv©i⁄sBackw¨d
)

78 
Hadam¨d
(
df
, 
a˘iv©i⁄Gødõ¡s
);

81 i‡(
	ga˘iv©i⁄Gødõ¡sBackw¨d
.
GëNEÀmíts
() > 0)

82 
Mu…ùly
(
a˘iv©i⁄Gødõ¡sBackw¨d
, 
df
, 
weights
);

85 i‡(
	gweightGødõ¡s
.
GëNEÀmíts
() > 0)

86 
Tøn•o£Mu…ùly
(
weightGødõ¡s
, 
df
, 
a˘iv©i⁄sBackw¨d
);

89 i‡(
	gbüsGødõ¡s
.
GëNEÀmíts
() > 0)

90 
SumCﬁumns
(
büsGødõ¡s
, 
df
);

	@src/DNN/Architectures/Cpu/Regularization.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


25 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

26 
AFlﬂt
 
	gTCpu
<
	gAFlﬂt
>::
L1Reguœriz©i⁄
(c⁄° 
TCpuM©rix
<AFlﬂt> &
Weights
)

28 c⁄° 
AFlﬂt
 *
d©a
 = 
Weights
.
GëRawD©aPoöãr
();

29 
	g°d
::
ve˘‹
<
AFlﬂt
> 
ãmp
(
Weights
.
GëNEÀmíts
());

31 autÿ
	gf
 = [&
d©a
, &
ãmp
](
UI¡_t
 
	gw‹kîID
)

33 
	gãmp
[
w‹kîID
] = 
Ábs
(
d©a
[workerID]);

37 autÿ
	gªdu˘i⁄
 = [](c⁄° 
°d
::
ve˘‹
<
AFlﬂt
> & 
v
 )

39  
°d
::
accumuœã
(
v
.
begö
(),v.
íd
(),
AFlﬂt
{});

46 
	gWeights
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Weights
.
GëNEÀmíts
()));

47  
	gWeights
.
GëThªadExecut‹
().
Redu˚
(
ãmp
, 
ªdu˘i⁄
);

51 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

52 
	gTCpu
<
	gAFlﬂt
>::
AddL1Reguœriz©i⁄Gødõ¡s
(

53 
TCpuM©rix
<
AFlﬂt
> & 
B
,

54 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
A
,

55 
AFlﬂt
 
weightDeˇy
)

57 
AFlﬂt
 *
	gd©aB
 = 
B
.
GëRawD©aPoöãr
();

58 c⁄° 
AFlﬂt
 *
	gd©aA
 = 
A
.
GëRawD©aPoöãr
();

60 autÿ
	gf
 = [&
d©aA
, &
d©aB
, 
weightDeˇy
](
UI¡_t
 
	gw‹kîID
)

62 
AFlﬂt
 
	gsign
 = (
d©aA
[
w‹kîID
] < 0.0) ? -1.0 : 1.0;

63 
	gd©aB
[
w‹kîID
] +
weightDeˇy
 * 
sign
;

67 
	gB
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
B
.
GëNEÀmíts
()));

71 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

72 
AFlﬂt
 
	gTCpu
<
	gAFlﬂt
>::
L2Reguœriz©i⁄
(c⁄° 
TCpuM©rix
<AFlﬂt> &
Weights
)

74 c⁄° 
AFlﬂt
 *
d©a
 = 
Weights
.
GëRawD©aPoöãr
();

75 
	g°d
::
ve˘‹
<
AFlﬂt
> 
ãmp
(
Weights
.
GëNEÀmíts
());

77 autÿ
	gf
 = [&
d©a
, &
ãmp
](
UI¡_t
 
	gw‹kîID
)

79 
	gãmp
[
w‹kîID
] = 
d©a
[workerID] * data[workerID];

83 autÿ
	gªdu˘i⁄
 = [](c⁄° 
°d
::
ve˘‹
<
AFlﬂt
> & 
v
 )

85  
°d
::
accumuœã
(
v
.
begö
(),v.
íd
(),
AFlﬂt
{});

92 
	gWeights
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
Weights
.
GëNEÀmíts
()));

93  
	gWeights
.
GëThªadExecut‹
().
Redu˚
(
ãmp
, 
ªdu˘i⁄
);

97 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

98 
	gTCpu
<
	gAFlﬂt
>::
AddL2Reguœriz©i⁄Gødõ¡s
(

99 
TCpuM©rix
<
AFlﬂt
> & 
B
,

100 c⁄° 
TCpuM©rix
<
AFlﬂt
> & 
A
,

101 
AFlﬂt
 
weightDeˇy
)

103 
AFlﬂt
 *
	gd©aB
 = 
B
.
GëRawD©aPoöãr
();

104 c⁄° 
AFlﬂt
 *
	gd©aA
 = 
A
.
GëRawD©aPoöãr
();

106 autÿ
	gf
 = [&
d©aA
, &
d©aB
, 
weightDeˇy
](
UI¡_t
 
	gw‹kîID
)

108 
	gd©aB
[
w‹kîID
] +2.0 * 
weightDeˇy
 * 
d©aA
[workerID];

112 
	gB
.
GëThªadExecut‹
().
M≠
(
f
, 
ROOT
::
TSeqI
(
B
.
GëNEÀmíts
()));

	@src/DNN/Architectures/Cuda/CudaBuffers.cxx

16 
	~"TMVA/DNN/D©aLﬂdî.h
"

17 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda/CudaBuf„rs.h
"

19 
	~"cuda_ru¡ime.h
"

20 
	~<io°ªam
>

22 
«me•a˚
 
	gTMVA
 {

23 
«me•a˚
 
	gDNN
 {

28 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

29 
	gTCudaHo°Buf„r
<
	gAFlﬂt
>::
TDe°ru˘‹
::
›î©‹
()(
AFlﬂt
 ** 
devi˚Poöãr
)

31 
cudaFªeHo°
(*
devi˚Poöãr
);

32 
	gdñëe
[] 
	gdevi˚Poöãr
;

36 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

37 
	gTCudaHo°Buf„r
<
	gAFlﬂt
>::
TCudaHo°Buf„r
(
size_t
 
size
)

38 : 
fOff£t
(0), 
fSize
(
size
), 
fCompuãSåóm
(0), 
fDe°ru˘‹
()

40 
AFlﬂt
 ** 
	gpoöãr
 = 
√w
 AFloat * [1];

41 
cudaMÆlocHo°
(
poöãr
, 
size
 * (
AFlﬂt
));

42 
	gfHo°Poöãr
 = 
°d
::
sh¨ed_±r
<
AFlﬂt
 *>(
poöãr
, 
	gfDe°ru˘‹
);

46 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

47 
	gTCudaHo°Buf„r
<
	gAFlﬂt
>::
›î©‹
 
AFlﬂt
 * () const

49  *
fHo°Poöãr
 + 
fOff£t
;

53 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

54 
	gTCudaHo°Buf„r
<
	gAFlﬂt
> TCudaHo°Buf„r<AFlﬂt>::
GëSubBuf„r
(
size_t
 
off£t
,

55 
size_t
 
size
)

57 
TCudaHo°Buf„r
 
	gbuf„r
 = *
this
;

58 
	gbuf„r
.
	gfOff£t
 = 
off£t
;

59 
	gbuf„r
.
	gfSize
 = 
size
;

60  
	gbuf„r
;

66 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

67 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
TDe°ru˘‹
::
›î©‹
()(
AFlﬂt
 ** 
devi˚Poöãr
)

69 
cudaFªe
(*
devi˚Poöãr
);

70 
	gdñëe
[] 
	gdevi˚Poöãr
;

74 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

75 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
TCudaDevi˚Buf„r
(
size_t
 
size
)

76 : 
fOff£t
(0), 
fSize
(
size
), 
fDe°ru˘‹
()

78 
AFlﬂt
 ** 
	gpoöãr
 = 
√w
 AFloat * [1];

79 
cudaMÆloc
(
poöãr
, 
size
 * (
AFlﬂt
));

80 
	gfDevi˚Poöãr
 = 
°d
::
sh¨ed_±r
<
AFlﬂt
 *>(
poöãr
, 
	gfDe°ru˘‹
);

81 
cudaSåómCª©e
(&
fCompuãSåóm
);

85 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

86 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
TCudaDevi˚Buf„r
(
size_t
 
size
,

87 
cudaSåóm_t
 
°ªam
)

88 : 
fOff£t
(0), 
fSize
(
size
), 
fCompuãSåóm
(
°ªam
), 
fDe°ru˘‹
()

90 
AFlﬂt
 ** 
	gpoöãr
 = 
√w
 AFloat * [1];

91 
cudaMÆloc
(
poöãr
, 
size
 * (
AFlﬂt
));

92 
	gfDevi˚Poöãr
 = 
°d
::
sh¨ed_±r
<
AFlﬂt
 *>(
poöãr
, 
	gfDe°ru˘‹
);

96 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

97 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
TCudaDevi˚Buf„r
(
AFlﬂt
 * 
devi˚Poöãr
,

98 
size_t
 
size
,

99 
cudaSåóm_t
 
°ªam
)

100 : 
fOff£t
(0), 
fSize
(
size
), 
fCompuãSåóm
(
°ªam
), 
fDe°ru˘‹
()

102 
AFlﬂt
 ** 
	gpoöãr
 = 
√w
 AFloat * [1];

103 *
	gpoöãr
 = 
devi˚Poöãr
;

104 
	gfDevi˚Poöãr
 = 
°d
::
sh¨ed_±r
<
AFlﬂt
 *>(
poöãr
, 
	gfDe°ru˘‹
);

108 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

109 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
> TCudaDevi˚Buf„r<AFlﬂt>::
GëSubBuf„r
(
size_t
 
off£t
,

110 
size_t
 
size
)

112 
TCudaDevi˚Buf„r
 
	gbuf„r
 = *
this
;

113 
	gbuf„r
.
	gfOff£t
 = 
off£t
;

114 
	gbuf„r
.
	gfSize
 = 
size
;

115  
	gbuf„r
;

119 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

120 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
›î©‹
 
AFlﬂt
 * () const

122  *
fDevi˚Poöãr
 + 
fOff£t
;

126 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

127 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
C›yFrom
(c⁄° 
TCudaHo°Buf„r
<
AFlﬂt
> &
buf„r
) const

129 
cudaSåómSynchr⁄ize
(
fCompuãSåóm
);

130 
cudaMem˝yAsync
(*
this
, 
buf„r
, 
fSize
 * (
AFlﬂt
),

131 
cudaMem˝yHo°ToDevi˚
, 
fCompuãSåóm
);

135 
	gãm∂©e
<
ty≥«me
 
	gAFlﬂt
>

136 
	gTCudaDevi˚Buf„r
<
	gAFlﬂt
>::
C›yTo
(c⁄° 
TCudaHo°Buf„r
<
AFlﬂt
> &
buf„r
) const

138 
cudaMem˝yAsync
(*
this
, 
buf„r
, 
fSize
 * (
AFlﬂt
),

139 
cudaMem˝yDevi˚ToHo°
, 
fCompuãSåóm
);

140 
	gbuf„r
.
	gfCompuãSåóm
 = 
fCompuãSåóm
;

144 
	gãm∂©e
<>

145 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>::
C›yI≈ut
(

146 
TCudaHo°Buf„r
<> & 
buf„r
,

147 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

148 
size_t
 
b©chSize
)

150 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	göputM©rix
 = 
°d
::
gë
<0>(
fD©a
);

151 
size_t
 
	gn
 = 
öputM©rix
.
GëNcﬁs
();

153 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

154 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

155 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

156 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

157 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<>(
öputM©rix
(
ßm∂eIndex
, 
j
));

159 
	gßm∂eIãøt‹
++;

164 
	gãm∂©e
<>

165 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>::
C›yOuçut
(

166 
TCudaHo°Buf„r
<> & 
buf„r
,

167 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

168 
size_t
 
b©chSize
)

170 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	gouçutM©rix
 = 
°d
::
gë
<1>(
fD©a
);

171 
size_t
 
	gn
 = 
ouçutM©rix
.
GëNcﬁs
();

173 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

174 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

175 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

176 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

177 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<>(
ouçutM©rix
(
ßm∂eIndex
, 
j
));

179 
	gßm∂eIãøt‹
++;

184 
	gãm∂©e
<>

185 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>::
C›yI≈ut
(

186 
TCudaHo°Buf„r
<> & 
buf„r
,

187 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

188 
size_t
 
b©chSize
)

190 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

191 
size_t
 
	gn
 = 
evít
->
GëNV¨übÀs
();

195 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

196 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

197 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

198 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

199 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

200 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<>(
evít
->
GëVÆue
(
j
));

206 
	gãm∂©e
<>

207 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>::
C›yOuçut
(

208 
TCudaHo°Buf„r
<> & 
buf„r
,

209 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

210 
size_t
 
b©chSize
)

212 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

213 
size_t
 
	gn
 = 
buf„r
.
GëSize
(Ë/ 
b©chSize
;

217 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

218 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

219 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

220 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

222 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

224 i‡(
	gevít
->
GëNT¨gës
() == 0) {

225 i‡(
n
 == 1) {

227 
buf„r
[
buf„rIndex
] = (
evít
->
GëCœss
() == 0) ? 1.0 : 0.0;

230 
	gbuf„r
[
buf„rIndex
] = 0.0;

231 i‡(
	gj
 =
evít
->
GëCœss
()) {

232 
buf„r
[
buf„rIndex
] = 1.0;

236 
	gbuf„r
[
buf„rIndex
] = 
°©ic_ˇ°
<>(
evít
->
GëT¨gë
(
j
));

243 
	gãm∂©e
<>

244 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>::
C›yI≈ut
(

245 
TCudaHo°Buf„r
<> & 
buf„r
,

246 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

247 
size_t
 
b©chSize
)

249 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	göputM©rix
 = 
°d
::
gë
<0>(
fD©a
);

250 
size_t
 
	gn
 = 
öputM©rix
.
GëNcﬁs
();

252 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

253 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

254 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

255 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

256 
	gbuf„r
[
buf„rIndex
] = 
öputM©rix
(
ßm∂eIndex
, 
j
);

258 
	gßm∂eIãøt‹
++;

263 
	gãm∂©e
<>

264 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>::
C›yOuçut
(

265 
TCudaHo°Buf„r
<> & 
buf„r
,

266 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

267 
size_t
 
b©chSize
)

269 c⁄° 
	gTM©rixT
<
	gDoubÀ_t
> &
	gouçutM©rix
 = 
°d
::
gë
<1>(
fD©a
);

270 
size_t
 
	gn
 = 
ouçutM©rix
.
GëNcﬁs
();

272 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

273 
size_t
 
	gßm∂eIndex
 = *
ßm∂eIãøt‹
;

274 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

275 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

276 
	gbuf„r
[
buf„rIndex
] = 
ouçutM©rix
(
ßm∂eIndex
, 
j
);

278 
	gßm∂eIãøt‹
++;

283 
	gãm∂©e
<>

284 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>::
C›yI≈ut
(

285 
TCudaHo°Buf„r
<> & 
buf„r
,

286 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

287 
size_t
 
b©chSize
)

289 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

290 
size_t
 
	gn
 = 
evít
->
GëNV¨übÀs
();

294 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

295 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

296 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

297 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

298 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

299 
	gbuf„r
[
buf„rIndex
] = 
evít
->
GëVÆue
(
j
);

305 
	gãm∂©e
<>

306 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>::
C›yOuçut
(

307 
TCudaHo°Buf„r
<> & 
buf„r
,

308 
IndexIãøt‹_t
 
ßm∂eIãøt‹
,

309 
size_t
 
b©chSize
)

311 
Evít
 * 
	gevít
 = 
fD©a
.
‰⁄t
();

312 
size_t
 
	gn
 = 
buf„r
.
GëSize
(Ë/ 
b©chSize
;

316 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

317 
size_t
 
	gßm∂eIndex
 = * 
ßm∂eIãøt‹
++;

318 
	gevít
 = 
fD©a
[
ßm∂eIndex
];

319 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

321 
size_t
 
	gbuf„rIndex
 = 
j
 * 
b©chSize
 + 
i
;

323 i‡(
	gevít
->
GëNT¨gës
() == 0) {

325 i‡(
n
 == 1) {

326 
buf„r
[
buf„rIndex
] = (
evít
->
GëCœss
() == 0) ? 1.0 : 0.0;

329 
	gbuf„r
[
buf„rIndex
] = 0.0;

330 i‡(
	gj
 =
evít
->
GëCœss
()) {

331 
buf„r
[
buf„rIndex
] = 1.0;

335 
	gbuf„r
[
buf„rIndex
] = 
evít
->
GëT¨gë
(
j
);

343 
ãm∂©e
 
˛ass
 
	gTCudaDevi˚Buf„r
<>;

344 
ãm∂©e
 
˛ass
 
	gTCudaDevi˚Buf„r
<>;

346 
ãm∂©e
 
˛ass
 
	gTCudaHo°Buf„r
<>;

347 
ãm∂©e
 
˛ass
 
	gTCudaHo°Buf„r
<>;

349 
ãm∂©e
 
˛ass
 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>;

350 
ãm∂©e
 
˛ass
 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>;

351 
ãm∂©e
 
˛ass
 
	gTD©aLﬂdî
<
	gM©rixI≈ut_t
, 
	gTCuda
<>>;

352 
ãm∂©e
 
˛ass
 
	gTD©aLﬂdî
<
	gTMVAI≈ut_t
, 
	gTCuda
<>>;

	@src/DNN/Architectures/Reference.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

20 
	~"Re„ªn˚/Pr›ag©i⁄.cxx
"

21 
	~"Re„ªn˚/A˘iv©i⁄Fun˘i⁄s.cxx
"

22 
	~"Re„ªn˚/OuçutFun˘i⁄s.cxx
"

23 
	~"Re„ªn˚/LossFun˘i⁄s.cxx
"

24 
	~"Re„ªn˚/Reguœriz©i⁄.cxx
"

25 
	~"Re„ªn˚/Inôüliz©i⁄.cxx
"

26 
	~"Re„ªn˚/Dr›out.cxx
"

27 
	~"Re„ªn˚/Díoi£Pr›ag©i⁄.cxx
"

29 
«me•a˚
 
	gTMVA
 {

30 
«me•a˚
 
	gDNN
 {

31 
ãm∂©e
 
˛ass
 
	gTRe„ªn˚
<
	gDoubÀ_t
>;

	@src/DNN/Architectures/Reference/ActivationFunctions.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

18 
	~<m©h.h
>

20 
«me•a˚
 
	gTMVA


22 
«me•a˚
 
	gDNN


26 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

27 
	gTRe„ªn˚
<
	gRól_t
>::
IdítôyDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

28 c⁄° 
TM©rixT
<
Ról_t
> & )

30 
size_t
 
	gm
,
	gn
;

31 
	gm
 = 
B
.
GëNrows
();

32 
	gn
 = 
B
.
GëNcﬁs
();

34 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

35 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

36 
B
(
i
,
j
) = 1.0;

42 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

43 
	gTRe„ªn˚
<
	gRól_t
>::
Rñu
(
TM©rixT
<
Ról_t
> &
A
)

45 
size_t
 
m
,
	gn
;

46 
	gm
 = 
A
.
GëNrows
();

47 
	gn
 = 
A
.
GëNcﬁs
();

49 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

50 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

51 
A
(
i
,
j
Ë
°d
::
max
((
Ról_t
) 0.0, A(i,j));

57 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

58 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
RñuDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

59 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

61 
size_t
 
	gm
,
	gn
;

62 
	gm
 = 
A
.
GëNrows
();

63 
	gn
 = 
A
.
GëNcﬁs
();

65 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

67 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

69 
B
(
i
,
j
Ë(
A
(i,j) < 0) ? 0.0 : 1.0;

75 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

76 
	gTRe„ªn˚
<
	gRól_t
>::
Sigmoid
(
TM©rixT
<
Ról_t
> & 
A
)

78 
size_t
 
m
,
	gn
;

79 
	gm
 = 
A
.
GëNrows
();

80 
	gn
 = 
A
.
GëNcﬁs
();

82 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

83 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

84 
Ról_t
 
	gsig
 = 1.0 / (1.0 + 
°d
::
exp
(-
A
(
i
,
j
)));

85 
A
(
i
,
j
Ë
sig
;

91 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

92 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
SigmoidDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

93 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

95 
size_t
 
	gm
,
	gn
;

96 
	gm
 = 
A
.
GëNrows
();

97 
	gn
 = 
A
.
GëNcﬁs
();

99 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

100 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

101 
Ról_t
 
	gsig
 = 1.0 / (1.0 + 
°d
::
exp
(-
A
(
i
,
j
)));

102 
B
(
i
,
j
Ë
sig
 * (1.0 - sig);

108 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

109 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
T™h
(
TM©rixT
<
Ról_t
> & 
B
)

111 
size_t
 
m
,
	gn
;

112 
	gm
 = 
B
.
GëNrows
();

113 
	gn
 = 
B
.
GëNcﬁs
();

115 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

116 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

117 
Ról_t
 
	gt
 = 
ènh
(
B
(
i
,
j
));

118 
B
(
i
,
j
Ë
t
;

124 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

125 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
T™hDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

126 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

128 
size_t
 
	gm
,
	gn
;

129 
	gm
 = 
A
.
GëNrows
();

130 
	gn
 = 
A
.
GëNcﬁs
();

132 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

133 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

134 
Ról_t
 
	gt
 = 
ènh
(
A
(
i
,
j
));

135 
B
(
i
,
j
Ë1 - 
t
 *Å;

141 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

142 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
SymmëricRñu
(
TM©rixT
<
Ról_t
> & 
B
)

144 
size_t
 
m
,
	gn
;

145 
	gm
 = 
B
.
GëNrows
();

146 
	gn
 = 
B
.
GëNcﬁs
();

148 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

149 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

150 
B
(
i
,
j
Ë
Ábs
(B(i,j));

156 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

157 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
SymmëricRñuDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

158 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

160 
size_t
 
	gm
,
	gn
;

161 
	gm
 = 
A
.
GëNrows
();

162 
	gn
 = 
A
.
GëNcﬁs
();

164 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

165 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

166 
B
(
i
,
j
Ë(
A
(i,j) < 0.0) ? -1.0 : 1.0;

172 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

173 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
So·Sign
(
TM©rixT
<
Ról_t
> & 
A
)

175 
size_t
 
m
,
	gn
;

176 
	gm
 = 
A
.
GëNrows
();

177 
	gn
 = 
A
.
GëNcﬁs
();

179 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

180 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

181 
Ról_t
 
	gx
 = 
A
(
i
,
j
);

182 
A
(
i
,
j
Ë
x
 / (1 + 
Ábs
(x));

188 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

189 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
So·SignDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

190 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

192 
size_t
 
	gm
,
	gn
;

193 
	gm
 = 
A
.
GëNrows
();

194 
	gn
 = 
A
.
GëNcﬁs
();

196 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

197 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

198 
Ról_t
 
	gx
 = 1.0 + 
Ábs
(
A
(
i
,
j
));

199 
B
(
i
,
j
Ë1.0 / (
x
 * x);

205 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

206 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
Gauss
(
TM©rixT
<
Ról_t
> & 
A
)

208 
size_t
 
m
,
	gn
;

209 
	gm
 = 
A
.
GëNrows
();

210 
	gn
 = 
A
.
GëNcﬁs
();

212 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

213 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

214 
Ról_t
 
	gx
 = 
A
(
i
,
j
);

215 
A
(
i
,
j
Ë
exp
(- 
x
 * x);

221 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

222 
ölöe
 
	gTRe„ªn˚
<
	gRól_t
>::
GaussDîiv©ive
(
TM©rixT
<
Ról_t
> & 
B
,

223 c⁄° 
TM©rixT
<
Ról_t
> & 
A
)

225 
size_t
 
	gm
,
	gn
;

226 
	gm
 = 
A
.
GëNrows
();

227 
	gn
 = 
A
.
GëNcﬁs
();

229 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

230 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

231 
Ról_t
 
	gx
 = 
A
(
i
,
j
);

232 
B
(
i
,
j
Ë- 2.0 * 
x
 * 
exp
(- x * x);

	@src/DNN/Architectures/Reference/DenoisePropagation.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~<cm©h
>

20 
	~<c°dlib
>

21 
	~<io°ªam
>

22 
«me•a˚
 
	gTMVA


24 
«me•a˚
 
	gDNN


29 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

30 
	gTRe„ªn˚
<
	gRól_t
>::
AddBü£s
(
TM©rixT
<
Ról_t
> &
A
,

31 c⁄° 
TM©rixT
<
Ról_t
> &
bü£s
)

33 
size_t
 
	gm
,
	gn
;

34 
	gm
 = 
A
.
GëNrows
();

35 
	gn

A
.
GëNcﬁs
();

36 
size_t
 
	gi
 = 0; i<
	gm
; i++)

38 
size_t
 
	gj
=0; j<
	gn
; j++)

40 
A
(
i
, 
j
Ë+
bü£s
(i, 0);

47 
	gãm∂©e
 <
ty≥«me
 
	gRól_t
>

48 
	gTRe„ªn˚
<
	gRól_t
>::
Upd©eP¨ams
(

49 
TM©rixT
<
Ról_t
> &
x
, TM©rixT<Ról_t> &
tûdeX
, TM©rixT<Ról_t> &
y
,

50 
TM©rixT
<
Ról_t
> &
z
, TM©rixT<Ról_t> &
fVBü£s
, TM©rixT<Ról_t> &
fHBü£s
,

51 
TM©rixT
<
Ról_t
> &
fWeights
, TM©rixT<Ról_t> &
VBüsEº‹
,

52 
TM©rixT
<
Ról_t
> &
HBüsEº‹
, Ról_à
À¨nögR©e
, 
size_t
 
fB©chSize
) {

55 
size_t
 
	gi
 = 0; i < (
	gsize_t
)
	gfVBü£s
.
GëNrows
(); i++)

57 
size_t
 
	gj
 = 0; j < (
	gsize_t
)
	gfVBü£s
.
GëNcﬁs
(); j++) {

58 
VBüsEº‹
(
i
, 
j
Ë
x
(i, jË- 
z
(i, j);

59 
fVBü£s
(
i
, 
j
Ë+
À¨nögR©e
 * 
VBüsEº‹
(i, jË/ 
	gfB©chSize
;

72 
size_t
 
	gi
 = 0; i < 
	gfHBü£s
.
GëNrows
(); i++)

74 
HBüsEº‹
(
i
,0) = 0;

75 
size_t
 
	gj
 = 0; j < 
	gfVBü£s
.
GëNrows
(); j++)

77 
HBüsEº‹
(
i
, 0Ë+
fWeights
(i, 
j
Ë* 
VBüsEº‹
(j, 0);

79 
HBüsEº‹
(
i
, 0Ë*
y
(i, 0) * (1 - y(i, 0));

80 
fHBü£s
(
i
, 0Ë+
À¨nögR©e
 * 
HBüsEº‹
(i, 0Ë/ 
	gfB©chSize
;

92 
size_t
 
	gi
 = 0; i < 
	gfHBü£s
.
GëNrows
(); i++)

94 
size_t
 
	gj
 = 0; j< 
	gfVBü£s
.
GëNrows
(); j++)

96 
fWeights
(
i
, 
j
Ë+
À¨nögR©e
 * (
HBüsEº‹
(i, 0Ë* 
tûdeX
(j, 0) +

97 
VBüsEº‹
(
j
, 0Ë* 
y
(
i
, 0)) /

98 
	gfB©chSize
;

114 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

115 
	gTRe„ªn˚
<
	gRól_t
>::
So·maxAE
(
TM©rixT
<
Ról_t
> & 
A
)

117 
size_t
 
m
,
	gn
;

118 
	gm
 = 
A
.
GëNrows
();

119 
	gn
 = 
A
.
GëNcﬁs
();

121 
Ról_t
 
	gsum
 = 0.0;

122 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

123 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

124 
	gsum
 +
exp
(
A
(
i
, 
j
));

128 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

129 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

130 
A
(
i
, 
j
Ë
exp
(A(i, j)Ë/ 
	gsum
;

137 
	gãm∂©e
 <
ty≥«me
 
	gRól_t
>

138 
	gTRe„ªn˚
<
	gRól_t
>::
C‹ru±I≈ut
(
TM©rixT
<
Ról_t
> &
öput
,

139 
TM©rixT
<
Ról_t
> &
c‹ru±edI≈ut
,

140 
Ról_t
 
c‹ru±i⁄Levñ
) {

141 
size_t
 
	gi
=0; i< (
	gsize_t
)
	göput
.
GëNrows
(); i++)

143 
size_t
 
	gj
=0; j<(
	gsize_t
)
	göput
.
GëNcﬁs
(); j++ )

146 i‡((
	gsize_t
)((
ønd
(Ë/ (
	gRAND_MAX
 + 1.0)) * 100) %

147 ((
	gsize_t
)(
	gc‹ru±i⁄Levñ
 * 10)) ==

149 
c‹ru±edI≈ut
(
i
, 
j
) = 0;

153 
c‹ru±edI≈ut
(
i
, 
j
Ë
öput
(i, j);

162 
	gãm∂©e
 <
ty≥«me
 
	gRól_t
>

163 
	gTRe„ªn˚
<
	gRól_t
>::
EncodeI≈ut
(
TM©rixT
<
Ról_t
> &
öput
,

164 
TM©rixT
<
Ról_t
> &
com¥es£dI≈ut
,

165 
TM©rixT
<
Ról_t
> &
Weights
) {

167 
size_t
 
	gm
, 
	ga
;

168 
	gm
 = 
com¥es£dI≈ut
.
GëNrows
();

169 
	ga
 = 
öput
.
GëNrows
();

171 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

172 
com¥es£dI≈ut
(
i
, 0) = 0;

173 
size_t
 
	gj
 = 0; j < 
	ga
; j++) {

174 
com¥es£dI≈ut
(
i
, 0) =

175 
com¥es£dI≈ut
(
i
, 0Ë+ (
Weights
(i, 
j
Ë* 
öput
(j, 0));

180 
	gãm∂©e
 <
ty≥«me
 
	gRól_t
>

181 
	gTRe„ªn˚
<
	gRól_t
>::
Rec⁄°ru˘I≈ut
(
TM©rixT
<
Ról_t
> &
com¥es£dI≈ut
,

182 
TM©rixT
<
Ról_t
> &
ªc⁄°ru˘edI≈ut
,

183 
TM©rixT
<
Ról_t
> &
fWeights
) {

184 
size_t
 
	gi
=0; i<(
	gsize_t
)
	gªc⁄°ru˘edI≈ut
.
GëNrows
(); i++)

186 
ªc⁄°ru˘edI≈ut
(
i
, 0) = 0;

187 
size_t
 
	gj
=0; j<(
	gsize_t
)
	gcom¥es£dI≈ut
.
GëNrows
();j++)

189 
ªc⁄°ru˘edI≈ut
(
i
, 0Ë+
fWeights
(
j
, iË* 
com¥es£dI≈ut
(j, 0);

200 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

201 
	gTRe„ªn˚
<
	gRól_t
>::
F‹w¨dLogReg
(
TM©rixT
<
Ról_t
> &
öput
,

202 
TM©rixT
<
Ról_t
> &
p
,

203 
TM©rixT
<
Ról_t
> &
fWeights
)

205 
size_t
 
	gm
,
	gn
;

206 
	gm
 = 
p
.
GëNrows
();

207 
	gn
 = 
öput
.
GëNrows
();

208 
size_t
 
	gi
0; i < 
	gm
; i++)

210 
p
(
i
, 0) = 0;

211 
size_t
 
	gj
=0; j < 
	gn
; j++)

213 
p
(
i
, 0Ë+
fWeights
(i, 
j
Ë* 
öput
(j, 0);

220 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

221 
	gTRe„ªn˚
<
	gRól_t
>::
Upd©eP¨amsLogReg
(
TM©rixT
<
Ról_t
> &
öput
,

222 
TM©rixT
<
Ról_t
> &
ouçut
,

223 
TM©rixT
<
Ról_t
> &
dif„ªn˚
,

224 
TM©rixT
<
Ról_t
> &
p
,

225 
TM©rixT
<
Ról_t
> &
fWeights
,

226 
TM©rixT
<
Ról_t
> &
fBü£s
,

227 
Ról_t
 
À¨nögR©e
,

228 
size_t
 
fB©chSize
)

230 
size_t
 
	gm
,
	gn
;

231 
	gm
 = 
p
.
GëNrows
();

232 
	gn
 = 
öput
.
GëNrows
();

234 
size_t
 
	gi
0; i<
	gm
; i++)

236 
dif„ªn˚
(
i
, 0Ë
ouçut
(i, 0Ë- 
p
(i, 0);

237 
size_t
 
	gj
=0; j<
	gn
; j++)

239 
fWeights
(
i
, 
j
) +=

240 
À¨nögR©e
 * 
dif„ªn˚
(
i
, 0Ë* 
öput
(
j
, 0Ë/ 
	gfB©chSize
;

243 
fBü£s
(
i
, 0Ë+
À¨nögR©e
 * 
dif„ªn˚
(i, 0Ë/ 
	gfB©chSize
;

250 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

251 
	gTRe„ªn˚
<
	gRól_t
>::
Tønsf‹m
(
TM©rixT
<
Ról_t
> &
öput
,

252 
TM©rixT
<
Ról_t
> &
å™sf‹med
,

253 
TM©rixT
<
Ról_t
> &
fWeights
,

254 
TM©rixT
<
Ról_t
> &
fBü£s
)

256 
size_t
 
	gm
,
	gn
;

257 
	gm
=
fWeights
.
GëNrows
();

258 
	gn
=
fWeights
.
GëNcﬁs
();

260 
size_t
 
	gi
 = 0; i < 
	gm
 ; i++)

262 
DoubÀ_t
 
	gouçut
 = 0.0;

263 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

265 
	gouçut
 +
fWeights
(
i
, 
j
Ë* 
öput
(j, 0);

267 
	gouçut
 +
fBü£s
(
i
, 0);

268 
å™sf‹med
(
i
, 0Ë
ouçut
;

	@src/DNN/Architectures/Reference/Dropout.cxx

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~"TR™dom.h
"

21 
«me•a˚
 
	gTMVA


23 
«me•a˚
 
	gDNN


28 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

29 
	gTRe„ªn˚
<
	gRól_t
>::
Dr›out
(
TM©rixT
<
Ról_t
> & 
B
, Ról_à
dr›outProbabûôy
)

31 
size_t
 
	gm
,
	gn
;

32 
	gm
 = 
B
.
GëNrows
();

33 
	gn
 = 
B
.
GëNcﬁs
();

35 
TR™dom
 
ønd
(
time
(
nuŒ±r
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
Ról_t
 
	gr
 = 
ønd
.
Unif‹m
();

40 i‡(
	gr
 >
dr›outProbabûôy
) {

41 
B
(
i
,
j
) = 0.0;

43 
B
(
i
,
j
Ë/
dr›outProbabûôy
;

	@src/DNN/Architectures/Reference/Initialization.cxx

17 
	~"TR™dom.h
"

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

20 
«me•a˚
 
	gTMVA


22 
«me•a˚
 
	gDNN


26 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

27 
	gTRe„ªn˚
<
	gRól_t
>::
InôülizeGauss
(
TM©rixT
<
Ról_t
> & 
A
)

29 
size_t
 
m
,
	gn
;

30 
	gm
 = 
A
.
GëNrows
();

31 
	gn
 = 
A
.
GëNcﬁs
();

33 
TR™dom
 
ønd
(
time
(
nuŒ±r
));

35 
Ról_t
 
	gsigma
 = 
sqπ
(2.0 / ((Ról_tË
n
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
A
(
i
,
j
Ë
ønd
.
Gaus
(0.0, 
sigma
);

45 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

46 
	gTRe„ªn˚
<
	gRól_t
>::
InôülizeUnif‹m
(
TM©rixT
<
Ról_t
> & 
A
)

48 
size_t
 
m
,
	gn
;

49 
	gm
 = 
A
.
GëNrows
();

50 
	gn
 = 
A
.
GëNcﬁs
();

52 
TR™dom
 
ønd
(
time
(
nuŒ±r
));

54 
Ról_t
 
	gønge
 = 
sqπ
(2.0 / ((Ról_tË
n
));

56 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

57 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

58 
A
(
i
,
j
Ë
ønd
.
Unif‹m
(-
ønge
,Ñange);

64 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

65 
	gTRe„ªn˚
<
	gRól_t
>::
InôülizeIdítôy
(
TM©rixT
<
Ról_t
> & 
A
)

67 
size_t
 
m
,
	gn
;

68 
	gm
 = 
A
.
GëNrows
();

69 
	gn
 = 
A
.
GëNcﬁs
();

71 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

72 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

73 
A
(
i
,
j
) = 0.0;

76 i‡(
	gi
 < 
	gn
) {

77 
A
(
i
,i) = 1.0;

82 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

83 
	gTRe„ªn˚
<
	gRól_t
>::
InôülizeZîo
(
TM©rixT
<
Ról_t
> & 
A
)

85 
size_t
 
m
,
	gn
;

86 
	gm
 = 
A
.
GëNrows
();

87 
	gn
 = 
A
.
GëNcﬁs
();

89 
size_t
 
	gi
 = 0; i < 
	gm
 ; i++) {

90 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

91 
A
(
i
,
j
) = 0.0;

	@src/DNN/Architectures/Reference/LossFunctions.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


24 
	gãm∂©e
<
ty≥«me
 
	gARól
>

25 
ARól
 
	gTRe„ªn˚
<
	gARól
>::
MónSqu¨edEº‹
(c⁄° 
TM©rixT
<ARól> &
Y
,

26 c⁄° 
TM©rixT
<
ARól
> &
ouçut
)

28 
size_t
 
	gm
,
	gn
;

29 
	gm
 = 
Y
.
GëNrows
();

30 
	gn
 = 
Y
.
GëNcﬁs
();

31 
ARól
 
	gªsu…
 = 0.0;

33 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

34 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

35 
ARól
 
	gdY
 = (
Y
(
i
,
j
Ë- 
ouçut
(i,j));

36 
	gªsu…
 +
dY
 * dY;

39 
	gªsu…
 /(
ARól
Ë(
m
 * 
n
);

40  
	gªsu…
;

44 
	gãm∂©e
<
ty≥«me
 
	gARól
>

45 
	gTRe„ªn˚
<
	gARól
>::
MónSqu¨edEº‹Gødõ¡s
(
TM©rixT
<
ARól
> & 
dY
,

46 c⁄° 
TM©rixT
<
ARól
> & 
Y
,

47 c⁄° 
TM©rixT
<
ARól
> & 
ouçut
)

49 
size_t
 
	gm
,
	gn
;

50 
	gm
 = 
Y
.
GëNrows
();

51 
	gn
 = 
Y
.
GëNcﬁs
();

53 
	gdY
.
Möus
(
Y
, 
ouçut
);

54 
	gdY
 *- 2.0 / ((
ARól
Ë(
m
*
n
));

58 
	gãm∂©e
<
ty≥«me
 
	gARól
>

59 
ARól
 
	gTRe„ªn˚
<
	gARól
>::
CrossE¡r›y
(c⁄° 
TM©rixT
<ARól> &
Y
,

60 c⁄° 
TM©rixT
<
ARól
> &
ouçut
)

62 
size_t
 
	gm
,
	gn
;

63 
	gm
 = 
Y
.
GëNrows
();

64 
	gn
 = 
Y
.
GëNcﬁs
();

65 
ARól
 
	gªsu…
 = 0.0;

67 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

68 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

69 
ARól
 
	gsig
 = 1.0 / (1.0 + 
°d
::
exp
(-
ouçut
(
i
,
j
)));

70 
	gªsu…
 +
Y
(
i
,
j
Ë* 
	g°d
::
log
(
sig
)

71 + (1.0 - 
Y
(
i
,
j
)Ë* 
	g°d
::
log
(1.0 - 
sig
);

74 
	gªsu…
 /- (
ARól
Ë(
m
 * 
n
);

75  
	gªsu…
;

79 
	gãm∂©e
<
ty≥«me
 
	gARól
>

80 
	gTRe„ªn˚
<
	gARól
>::
CrossE¡r›yGødõ¡s
(
TM©rixT
<
ARól
> & 
dY
,

81 c⁄° 
TM©rixT
<
ARól
> & 
Y
,

82 c⁄° 
TM©rixT
<
ARól
> & 
ouçut
)

84 
size_t
 
	gm
,
	gn
;

85 
	gm
 = 
Y
.
GëNrows
();

86 
	gn
 = 
Y
.
GëNcﬁs
();

88 
ARól
 
	gn‹m
 = 1.0 / ((ARólË(
m
 * 
n
));

89 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

91 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

93 
ARól
 
	gy
 = 
Y
(
i
,
j
);

94 
ARól
 
	gsig
 = 1.0 / (1.0 + 
°d
::
exp
(-
ouçut
(
i
,
j
)));

95 
dY
(
i
,
j
Ë
n‹m
 * (
sig
 - 
y
);

101 
	gãm∂©e
<
ty≥«me
 
	gARól
>

102 
ARól
 
	gTRe„ªn˚
<
	gARól
>::
So·maxCrossE¡r›y
(c⁄° 
TM©rixT
<ARól> &
Y
,

103 c⁄° 
TM©rixT
<
ARól
> &
ouçut
)

105 
size_t
 
	gm
,
	gn
;

106 
	gm
 = 
Y
.
GëNrows
();

107 
	gn
 = 
Y
.
GëNcﬁs
();

108 
ARól
 
	gªsu…
 = 0.0;

110 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

111 
ARól
 
	gsum
 = 0.0;

112 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

113 
	gsum
 +
exp
(
ouçut
(
i
,
j
));

115 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

116 
	gªsu…
 +
Y
(
i
,
j
Ë* 
log
(
exp
(
ouçut
(i,j)Ë/ 
sum
);

119 
	gªsu…
 /- 
m
;

120  
	gªsu…
;

124 
	gãm∂©e
<
ty≥«me
 
	gARól
>

125 
	gTRe„ªn˚
<
	gARól
>::
So·maxCrossE¡r›yGødõ¡s
(
TM©rixT
<
ARól
> & 
dY
,

126 c⁄° 
TM©rixT
<
ARól
> & 
Y
,

127 c⁄° 
TM©rixT
<
ARól
> & 
ouçut
)

129 
size_t
 
	gm
,
	gn
;

130 
	gm
 = 
Y
.
GëNrows
();

131 
	gn
 = 
Y
.
GëNcﬁs
();

132 
ARól
 
	gn‹m
 = 1.0 / 
m
 ;

134 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

136 
ARól
 
	gsum
 = 0.0;

137 
ARól
 
	gsumY
 = 0.0;

138 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

139 
	gsum
 +
exp
(
ouçut
(
i
,
j
));

140 
	gsumY
 +
Y
(
i
,
j
);

142 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

143 
dY
(
i
,
j
Ë
n‹m
 * (
exp
(
ouçut
(i,j)Ë/ 
sum
 * 
	gsumY
 - 
Y
(i,j));

	@src/DNN/Architectures/Reference/OutputFunctions.cxx

17 
«me•a˚
 
	gTMVA
 {

18 
«me•a˚
 
	gDNN
 {

20 
	gãm∂©e
<
ty≥«me
 
	gARól
>

21 
	gTRe„ªn˚
<
	gARól
>::
Sigmoid
(
TM©rixT
<
ARól
> & 
B
,

22 c⁄° 
TM©rixT
<
ARól
> & 
A
)

24 
size_t
 
	gm
,
	gn
;

25 
	gm
 = 
A
.
GëNrows
();

26 
	gn
 = 
A
.
GëNcﬁs
();

28 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

29 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

30 
ARól
 
	gsig
 = 1.0 / (1.0 + 
°d
::
exp
(-
A
(
i
,
j
)));

31 
B
(
i
,
j
Ë
sig
;

36 
	gãm∂©e
<
ty≥«me
 
	gARól
>

37 
	gTRe„ªn˚
<
	gARól
>::
So·max
(
TM©rixT
<
ARól
> & 
B
,

38 c⁄° 
TM©rixT
<
ARól
> & 
A
)

40 
size_t
 
	gm
,
	gn
;

41 
	gm
 = 
A
.
GëNrows
();

42 
	gn
 = 
A
.
GëNcﬁs
();

44 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

45 
ARól
 
	gsum
 = 0.0;

46 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

47 
	gsum
 +
exp
(
A
(
i
,
j
));

49 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

50 
B
(
i
,
j
Ë
exp
(
A
(i,j)Ë/ 
	gsum
;

	@src/DNN/Architectures/Reference/Propagation.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


24 
	gãm∂©e
<
ty≥«me
 
	gSˇœr_t
>

25 
	gTRe„ªn˚
<
	gSˇœr_t
>::
Mu…ùlyTøn•o£
(
TM©rixT
<
Sˇœr_t
> &
ouçut
,

26 c⁄° 
TM©rixT
<
Sˇœr_t
> &
öput
,

27 c⁄° 
TM©rixT
<
Sˇœr_t
> &
weights
)

29 
	gouçut
.
Mu…T
(
öput
, 
weights
);

32 
	gãm∂©e
<
ty≥«me
 
	gSˇœr_t
>

33 
	gTRe„ªn˚
<
	gSˇœr_t
>::
AddRowWi£
(
TM©rixT
<
Sˇœr_t
> &
ouçut
,

34 c⁄° 
TM©rixT
<
Sˇœr_t
> &
bü£s
)

36 
size_t
 
	gi
 = 0; i < (
	gsize_t
Ë
	gouçut
.
GëNrows
(); i++) {

37 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gouçut
.
GëNcﬁs
(); j++) {

38 
ouçut
(
i
,
j
Ë+
bü£s
(j,0);

43 
	gãm∂©e
<
ty≥«me
 
	gSˇœr_t
>

44 
	gTRe„ªn˚
<
	gSˇœr_t
>::
Backw¨d
(
TM©rixT
<
Sˇœr_t
> & 
a˘iv©i⁄_gødõ¡s_backw¨d
,

45 
TM©rixT
<
Sˇœr_t
> & 
weight_gødõ¡s
,

46 
TM©rixT
<
Sˇœr_t
> & 
büs_gødõ¡s
,

47 
TM©rixT
<
Sˇœr_t
> & 
df
,

48 c⁄° 
TM©rixT
<
Sˇœr_t
> & 
a˘iv©i⁄_gødõ¡s
,

49 c⁄° 
TM©rixT
<
Sˇœr_t
> & 
weights
,

50 c⁄° 
TM©rixT
<
Sˇœr_t
> & 
a˘iv©i⁄s_backw¨d
)

54 
size_t
 
	gi
 = 0; i < (
	gsize_t
Ë
	gdf
.
GëNrows
(); i++) {

55 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gdf
.
GëNcﬁs
(); j++) {

56 
df
(
i
,
j
Ë*
a˘iv©i⁄_gødõ¡s
(i,j);

61 i‡(
	ga˘iv©i⁄_gødõ¡s_backw¨d
.
GëNoEÀmíts
() > 0) {

62 
	ga˘iv©i⁄_gødõ¡s_backw¨d
.
Mu…
(
df
, 
weights
);

66 i‡(
	gweight_gødõ¡s
.
GëNoEÀmíts
() > 0) {

67 
	gweight_gødõ¡s
.
TMu…
(
df
, 
a˘iv©i⁄s_backw¨d
);

71 i‡(
	gbüs_gødõ¡s
.
GëNoEÀmíts
() > 0) {

72 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gdf
.
GëNcﬁs
(); j++) {

73 
Sˇœr_t
 
	gsum
 = 0.0;

74 
size_t
 
	gi
 = 0; i < (
	gsize_t
Ë
	gdf
.
GëNrows
(); i++) {

75 
	gsum
 +
df
(
i
,
j
);

77 
büs_gødõ¡s
(
j
,0Ë
sum
;

82 
	gãm∂©e
<
ty≥«me
 
	gSˇœr_t
>

83 
	gTRe„ªn˚
<
	gSˇœr_t
>::
SˇÀAdd
(
TM©rixT
<
Sˇœr_t
> & 
A
,

84 c⁄° 
TM©rixT
<
Sˇœr_t
> & 
B
,

85 
Sˇœr_t
 
bëa
)

87 
size_t
 
	gi
 = 0; i < (
	gsize_t
Ë
	gA
.
GëNrows
(); i++) {

88 
size_t
 
	gj
 = 0; j < (
	gsize_t
Ë
	gA
.
GëNcﬁs
(); j++) {

89 
A
(
i
,
j
Ë+
bëa
 * 
B
(i,j);

94 
	gãm∂©e
<
ty≥«me
 
	gSˇœr_t
>

95 
	gTRe„ªn˚
<
	gSˇœr_t
>::
C›y
(
TM©rixT
<
Sˇœr_t
> & 
A
,

96 c⁄° 
TM©rixT
<
Sˇœr_t
> & 
B
)

98 
	gA
 = 
B
;

	@src/DNN/Architectures/Reference/Regularization.cxx

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
«me•a˚
 
	gTMVA


21 
«me•a˚
 
	gDNN


25 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

26 
Ról_t
 
	gTRe„ªn˚
<
	gRól_t
>::
L1Reguœriz©i⁄
(c⁄° 
TM©rixT
<Ról_t> & 
W
)

28 
size_t
 
m
,
	gn
;

29 
	gm
 = 
W
.
GëNrows
();

30 
	gn
 = 
W
.
GëNcﬁs
();

32 
Ról_t
 
	gªsu…
 = 0.0;

34 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

35 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

36 
	gªsu…
 +
°d
::
abs
(
W
(
i
,
j
));

39  
	gªsu…
;

43 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

44 
	gTRe„ªn˚
<
	gRól_t
>::
AddL1Reguœriz©i⁄Gødõ¡s
(
TM©rixT
<
Ról_t
> & 
A
,

45 c⁄° 
TM©rixT
<
Ról_t
> & 
W
,

46 
Ról_t
 
weightDeˇy
)

48 
size_t
 
	gm
,
	gn
;

49 
	gm
 = 
W
.
GëNrows
();

50 
	gn
 = 
W
.
GëNcﬁs
();

52 
Ról_t
 
	gsign
 = 0.0;

54 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

55 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

56 
	gsign
 = (
W
(
i
,
j
) > 0.0) ? 1.0 : -1.0;

57 
A
(
i
,
j
Ë+
sign
 * 
weightDeˇy
;

63 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

64 
Ról_t
 
	gTRe„ªn˚
<
	gRól_t
>::
L2Reguœriz©i⁄
(c⁄° 
TM©rixT
<Ról_t> & 
W
)

66 
size_t
 
m
,
	gn
;

67 
	gm
 = 
W
.
GëNrows
();

68 
	gn
 = 
W
.
GëNcﬁs
();

70 
Ról_t
 
	gªsu…
 = 0.0;

72 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

73 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

74 
	gªsu…
 +
W
(
i
,
j
) * W(i,j);

77  
	gªsu…
;

81 
	gãm∂©e
<
ty≥«me
 
	gRól_t
>

82 
	gTRe„ªn˚
<
	gRól_t
>::
AddL2Reguœriz©i⁄Gødõ¡s
(
TM©rixT
<
Ról_t
> & 
A
,

83 c⁄° 
TM©rixT
<
Ról_t
> & 
W
,

84 
Ról_t
 
weightDeˇy
)

86 
size_t
 
	gm
,
	gn
;

87 
	gm
 = 
W
.
GëNrows
();

88 
	gn
 = 
W
.
GëNcﬁs
();

90 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

91 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

92 
A
(
i
,
j
Ë+
weightDeˇy
 * 2.0 * 
W
(i,j);

	@src/DNN/DataLoader.cxx

16 
«me•a˚
 
	gTMVA
 {

17 
«me•a˚
 
	gDNN
 {

	@src/DataInputHandler.cxx

34 
	~"TMVA/D©aI≈utH™dÀr.h
"

36 
	~"TMVA/D©aLﬂdî.h
"

37 
	~"TMVA/MsgLoggî.h
"

38 
	~"TMVA/Ty≥s.h
"

39 
	~"TEvítLi°.h
"

40 
	~"TCut.h
"

41 
	~"TFûe.h
"

42 
	~"TROOT.h
"

43 
	~"TTªe.h
"

45 
	~"TMVA/C⁄figuøbÀ.h
"

47 
	~<ve˘‹
>

48 
	~<io°ªam
>

53 
	gTMVA
::
D©aI≈utH™dÀr
::
	$D©aI≈utH™dÀr
()

54 : 
	`fLoggî
–
√w
 
	`MsgLoggî
("D©aI≈utH™dÀr", 
kINFO
) )

56 
fEx∂icôTøöTe°
["Sig«l"] = fEx∂icôTøöTe°["Background"] = 
kFALSE
;

57 
	}
}

62 
	gTMVA
::
D©aI≈utH™dÀr
::~
	$D©aI≈utH™dÀr
()

64 
dñëe
 
fLoggî
;

65 
	}
}

70 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddTªe
–c⁄° 
TSåög
& 
‚
,

71 c⁄° 
TSåög
& 
˛assName
,

72 
DoubÀ_t
 
weight
,

73 c⁄° 
TCut
& 
cut
,

74 
Ty≥s
::
ETªeTy≥
 
â
 )

76 
TTªe
 * 
å
 = 
	`RódI≈utTªe
(
‚
);

77 
å
->
	`SëName
–
	`TSåög
("Tªe")+
˛assName
 );

78 
	`AddTªe
–
å
, 
˛assName
, 
weight
, 
cut
, 
â
 );

79 
	}
}

84 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddTªe
–
TTªe
* 
åì
,

85 c⁄° 
TSåög
& 
˛assName
,

86 
DoubÀ_t
 
weight
,

87 c⁄° 
TCut
& 
cut
,

88 
Ty≥s
::
ETªeTy≥
 
â
 )

90 i‡(!
åì
Ë
	`Log
(Ë<< 
kFATAL
 << "Zîÿpoöã∏f‹Åªêo‡˛as†" << 
˛assName
.
	`D©a
(Ë<< 
Endl
;

91 i‡(
åì
->
	`GëE¡rõs
()==0Ë
	`Log
(Ë<< 
kFATAL
 << "Encou¡îedÉm±y TTªê‹ TChaö o‡˛as†" << 
˛assName
.
	`D©a
(Ë<< 
Endl
;

92 i‡(
fI≈utTªes
[
˛assName
.
	`D©a
()].
	`em±y
()) {

94 
fEx∂icôTøöTe°
[
˛assName
.
	`D©a
()] = (
â
 !
Ty≥s
::
kMaxTªeTy≥
);

98 i‡(
fEx∂icôTøöTe°
[
˛assName
.
	`D©a
()] !(
â
!=
Ty≥s
::
kMaxTªeTy≥
)) {

99 i‡(
â
==
Ty≥s
::
kMaxTªeTy≥
)

100 
	`Log
(Ë<< 
kFATAL
 << "F‹Åhêåì " << 
åì
->
	`GëName
(Ë<< " o‡˛as†" << 
˛assName
.
	`D©a
()

101 << " you did "<< (
â
==
Ty≥s
::
kMaxTªeTy≥
?"not ":"") << "specifyáÅype,"

102 << " whûêyou did "<< (
â
==
Ty≥s
::
kMaxTªeTy≥
?"":"not ") << "forÅhe firstÅree "

103 << 
fI≈utTªes
[
˛assName
.
	`D©a
()][0].
	`GëTªe
()->
	`GëName
() << " of class " << className.Data()

104 << 
Endl
;

107 i‡(
cut
.
	`GëTôÀ
()[0] != 0) {

108 
fI≈utTªes
[
˛assName
.
	`D©a
()].
	`push_back
(
	`TªeInfo
–
åì
->
	`C›yTªe
(
cut
.
	`GëTôÀ
()), cœssName, 
weight
, 
â
 ));

111 
fI≈utTªes
[
˛assName
.
	`D©a
()].
	`push_back
(
	`TªeInfo
–
åì
, cœssName, 
weight
, 
â
 ));

113 
	}
}

118 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddSig«lTªe
–
TTªe
* 
å
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
â
 )

120 
	`AddTªe
–
å
, "Sig«l", 
weight
, "", 
â
 );

121 
	}
}

126 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddBackgroundTªe
–
TTªe
* 
å
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
â
 )

128 
	`AddTªe
–
å
, "Background", 
weight
, "", 
â
 );

129 
	}
}

134 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddSig«lTªe
–c⁄° 
TSåög
& 
‚
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
â
 )

136 
TTªe
 * 
å
 = 
	`RódI≈utTªe
(
‚
);

137 
å
->
	`SëName
("TreeS");

138 
	`AddTªe
–
å
, "Sig«l", 
weight
, "", 
â
 );

139 
	}
}

144 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddBackgroundTªe
–c⁄° 
TSåög
& 
‚
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
â
 )

146 
TTªe
 * 
å
 = 
	`RódI≈utTªe
(
‚
);

147 
å
->
	`SëName
("TreeB");

148 
	`AddTªe
–
å
, "Background", 
weight
, "", 
â
 );

149 
	}
}

154 
TTªe
* 
	gTMVA
::
D©aI≈utH™dÀr
::
	$RódI≈utTªe
–c⁄° 
TSåög
& 
d©aFûe
 )

156 
TTªe
* 
å
 = 
√w
 
	`TTªe
–"tmp", 
d©aFûe
 );

157 
°d
::
if°ªam
 
	`ö
(
d©aFûe
);

158 
å
->
	`SëDúe˘‹y
(0); 
	`Log
(Ë<< 
kWARNING
 << "W©ch out, I (HñgeËmadêthêTªênŸássocüãdÅÿthêcuºíàdúe˘‹y .. H›efuŒyÅh© d€†nŸ havêunw™ãd c⁄£quí˚s" << 
Endl
;

159 i‡(!
ö
.
	`good
()Ë
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸ o≥¿fûe: " << 
d©aFûe
 << 
Endl
;

160 
ö
.
	`˛o£
();

162 
å
->
	`RódFûe
–
d©aFûe
 );

164  
å
;

165 
	}
}

172 
	gTMVA
::
D©aI≈utH™dÀr
::
	$AddI≈utTªes
(
TTªe
* 
öputTªe
, c⁄° 
TCut
& 
SigCut
, c⁄° TCut& 
BgCut
)

174 i‡(!
öputTªe
Ë
	`Log
(Ë<< 
kFATAL
 << "Zîÿpoöã∏f‹ i≈uàåì: " << i≈utTªê<< 
Endl
;

176 
	`AddTªe
–
öputTªe
, "Sig«l", 1.0, 
SigCut
 );

177 
	`AddTªe
–
öputTªe
, "Background", 1.0, 
BgCut
 );

178 
	}
}

183 
	gTMVA
::
D©aI≈utH™dÀr
::
	$CÀ¨TªeLi°
–c⁄° 
TSåög
& 
˛assName
 )

185 
åy
 {

186 
fI≈utTªes
.
	`föd
(
˛assName
)->
£c⁄d
.
	`˛ór
();

188 
	`ˇtch
() {

189 
	`Log
(Ë<< 
kINFO
 << " CÀ¨Åªñi° f‹ cœs†" << 
˛assName
 << " faûed, sö˚ cœs†d€†nŸÉxi°." << 
Endl
;

191 
	}
}

195 
	g°d
::
ve˘‹
< 
TSåög
 >* 
TMVA
::
D©aI≈utH™dÀr
::
	$GëCœssLi°
() const

197 
°d
::
ve˘‹
< 
TSåög
 >* 
ªt
 = 
√w
 std::vector< TString >();

198  
°d
::
m≠
< 
TSåög
, std::
ve˘‹
<
TªeInfo
> >::
ôî©‹
 
ô
 = 
fI≈utTªes
.
	`begö
(); ià!fI≈utTªes.
	`íd
(); it++ ){

199 
ªt
->
	`push_back
–
ô
->
fú°
 );

201  
ªt
;

202 
	}
}

207 
UI¡_t
 
	gTMVA
::
D©aI≈utH™dÀr
::
GëE¡rõs
(c⁄° 
°d
::
ve˘‹
<
TªeInfo
>& 
tiV
) const

209 
UI¡_t
 
íåõs
 = 0;

210 
	g°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
tiIt
 = 
tiV
.
begö
();

211 ;
	gtiIt
 !
tiV
.
íd
();ÅiIt++Ë
	gíåõs
 +
tiIt
->
GëE¡rõs
();

212  
	gíåõs
;

218 
UI¡_t
 
	gTMVA
::
D©aI≈utH™dÀr
::
	$GëE¡rõs
() const

220 
UI¡_t
 
numbî
 = 0;

221 
°d
::
m≠
< 
TSåög
, std::
ve˘‹
<
TªeInfo
> >::
ôî©‹
 
ô
 = 
fI≈utTªes
.
	`begö
(); ià!fI≈utTªes.
	`íd
(); it++) {

222 
numbî
 +
	`GëE¡rõs
–
ô
->
£c⁄d
 );

224  
numbî
;

225 
	}
}

	@src/DataLoader.cxx

35 
	~"TROOT.h
"

36 
	~"TFûe.h
"

37 
	~"TTªe.h
"

38 
	~"TLóf.h
"

39 
	~"TEvítLi°.h
"

40 
	~"TH2.h
"

41 
	~"TText.h
"

42 
	~"TStyÀ.h
"

43 
	~"TM©rixF.h
"

44 
	~"TM©rixDSym.h
"

45 
	~"TPÆëãAxis.h
"

46 
	~"TPröcùÆ.h
"

47 
	~"TM©h.h
"

48 
	~"TObjSåög.h
"

49 
	~"TR™dom3.h
"

51 
	~<°rög.h
>

53 
	~"TMVA/C⁄figuøbÀ.h
"

54 
	~"TMVA/D©aLﬂdî.h
"

55 
	~"TMVA/C⁄fig.h
"

56 
	~"TMVA/Toﬁs.h
"

57 
	~"TMVA/R™kög.h
"

58 
	~"TMVA/D©aSë.h
"

59 
	~"TMVA/IMëhod.h
"

60 
	~"TMVA/MëhodBa£.h
"

61 
	~"TMVA/D©aI≈utH™dÀr.h
"

62 
	~"TMVA/D©aSëM™agî.h
"

63 
	~"TMVA/D©aSëInfo.h
"

64 
	~"TMVA/MëhodBoo°.h
"

65 
	~"TMVA/MëhodC©eg‹y.h
"

67 
	~"TMVA/V¨übÀInfo.h
"

68 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

69 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

70 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

71 
	~"TMVA/V¨übÀGaussTønsf‹m.h
"

72 
	~"TMVA/V¨übÀN‹mÆizeTønsf‹m.h
"

73 
	~"TMVA/V¨Tønsf‹mH™dÀr.h
"

76 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

77 
	~"TMVA/Resu…sRegªssi⁄.h
"

78 
	~"TMVA/Resu…sMu…i˛ass.h
"

79 
	~"TMVA/Ty≥s.h
"

81 
CœssImp
(
TMVA
::
D©aLﬂdî
);

86 
	gTMVA
::
D©aLﬂdî
::
	$D©aLﬂdî
–
TSåög
 
thedlName
)

87 : 
	`C⁄figuøbÀ
( ),

88 
	`fD©aSëM™agî
 ( 
NULL
 ),

89 
	`fD©aI≈utH™dÀr
 ( 
√w
 
D©aI≈utH™dÀr
 ),

90 
	`fTønsf‹m©i⁄s
 ( "I" ),

91 
	`fVîbo£
 ( 
kFALSE
 ),

92 
	`fD©aAssignTy≥
 ( 
kAssignEvíts
 ),

93 
	`fATªeEvít
 (0),

94 
	$fMakeFﬁdD©aSë
 ( 
kFALSE
 )

96 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–*
fD©aI≈utH™dÀr
 );

97 
	`SëName
(
thedlName
.
	`D©a
());

98 
fLoggî
->
	`SëSour˚
("DataLoader");

99 
	}
}

103 
	gTMVA
::
D©aLﬂdî
::~
	$D©aLﬂdî
( )

107 
°d
::
ve˘‹
<
TMVA
::
V¨übÀTønsf‹mBa£
*>::
ôî©‹
 
åfIt
 = 
fDeÁu…Trfs
.
	`begö
();

108 ;
åfIt
 !
fDeÁu…Trfs
.
	`íd
();ÅrfIt++Ë
	`dñëe
 (*trfIt);

110 
dñëe
 
fD©aI≈utH™dÀr
;

114 
dñëe
 
fD©aSëM™agî
;

119 
Toﬁs
::
	`De°royIn°™˚
();

120 
C⁄fig
::
	`De°royIn°™˚
();

121 
	}
}

126 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
D©aLﬂdî
::
	$AddD©aSë
–
D©aSëInfo
 &
dsi
 )

128  
fD©aSëM™agî
->
	`AddD©aSëInfo
(
dsi
);

129 
	}
}

133 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
D©aLﬂdî
::
	$AddD©aSë
–c⁄° 
TSåög
& 
dsiName
 )

135 
D©aSëInfo
* 
dsi
 = 
fD©aSëM™agî
->
	`GëD©aSëInfo
(
dsiName
);

137 i‡(
dsi
!=0)  *dsi;

139  
fD©aSëM™agî
->
	`AddD©aSëInfo
(*(
√w
 
	`D©aSëInfo
(
dsiName
)));

140 
	}
}

144 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
D©aLﬂdî
::
	$GëD©aSëInfo
()

146  
	`DeÁu…D©aSëInfo
();

147 
	}
}

153 
	gTMVA
::
D©aLﬂdî
* 
TMVA
::D©aLﬂdî::
	$V¨Tønsf‹m
(
TSåög
 
åafoDeföôi⁄
)

155 
TSåög
 
åO±i⁄s
 = "0";

156 
TSåög
 
åName
 = "None";

157 i‡(
åafoDeföôi⁄
.
	`C⁄èös
("(")) {

160 
Ssiz_t
 
∑rSèπ
 = 
åafoDeföôi⁄
.
	`Index
( "(" );

161 
Ssiz_t
 
∑rLí
 = 
åafoDeföôi⁄
.
	`Index
–")", 
∑rSèπ
 )-parStart+1;

163 
åName
 = 
	`åafoDeföôi⁄
(0,
∑rSèπ
);

164 
åO±i⁄s
 = 
	`åafoDeföôi⁄
(
∑rSèπ
,
∑rLí
);

165 
åO±i⁄s
.
	`Remove
(
∑rLí
-1,1);

166 
åO±i⁄s
.
	`Remove
(0,1);

169 
åName
 = 
åafoDeföôi⁄
;

171 
V¨Tønsf‹mH™dÀr
* 
h™dÀr
 = 
√w
 
	`V¨Tønsf‹mH™dÀr
(
this
);

173 i‡(
åName
 == "VT") {

176 
DoubÀ_t
 
thªshﬁd
 = 0.0;

177 i‡(!
åO±i⁄s
.
	`IsFlﬂt
()){

178 
	`Log
(Ë<< 
kFATAL
 << " VTÅønsf‹m©i⁄ mu° bê∑s£dá flﬂtögÅhªshﬁd vÆue" << 
Endl
;

179 
dñëe
 
h™dÀr
;

180  
this
;

183 
thªshﬁd
 = 
åO±i⁄s
.
	`Atof
();

184 
TMVA
::
D©aLﬂdî
 *
å™sf‹medLﬂdî
 = 
h™dÀr
->
	`V¨ün˚Thªshﬁd
(
thªshﬁd
);

185 
dñëe
 
h™dÀr
;

186  
å™sf‹medLﬂdî
;

189 
	`Log
(Ë<< 
kFATAL
 << "Inc‹ª˘Åønsf‹m©i⁄ såögÖrovided,ÖÀa£ check" << 
Endl
;

191 
	`Log
(Ë<< 
kINFO
 << "Nÿå™sf‹m©i⁄áµlõd,Ñëu∫ög origöÆÜﬂdî" << 
Endl
;

192  
this
;

193 
	}
}

201 
TTªe
* 
	gTMVA
::
D©aLﬂdî
::
	$Cª©eEvítAssignTªes
–c⁄° 
TSåög
& 
«me
 )

203 
TTªe
 * 
assignTªe
 = 
√w
 
	`TTªe
–
«me
,Çame );

204 
assignTªe
->
	`SëDúe˘‹y
(0);

205 
assignTªe
->
	`Bønch
–"ty≥", &
fATªeTy≥
, "ATreeType/I" );

206 
assignTªe
->
	`Bønch
–"weight", &
fATªeWeight
, "ATreeWeight/F" );

208 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨s
 = 
	`DeÁu…D©aSëInfo
().
	`GëV¨übÀInfos
();

209 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
tgts
 = 
	`DeÁu…D©aSëInfo
().
	`GëT¨gëInfos
();

210 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
•ec
 = 
	`DeÁu…D©aSëInfo
().
	`GëS≥˘©‹Infos
();

212 i‡(
fATªeEvít
.
	`size
()==0ËfATªeEvít.
	`ªsize
(
v¨s
.size()+
tgts
.size()+
•ec
.size());

214 
UI¡_t
 
iv¨
=0; iv¨<
v¨s
.
	`size
(); ivar++) {

215 
TSåög
 
v«me
 = 
v¨s
[
iv¨
].
	`GëEx¥essi⁄
();

216 
assignTªe
->
	`Bønch
–
v«me
, &
fATªeEvít
[
iv¨
], vname + "/F" );

219 
UI¡_t
 
ôgt
=0; itgt<
tgts
.
	`size
(); itgt++) {

220 
TSåög
 
v«me
 = 
tgts
[
ôgt
].
	`GëEx¥essi⁄
();

221 
assignTªe
->
	`Bønch
–
v«me
, &
fATªeEvít
[
v¨s
.
	`size
()+
ôgt
], vname + "/F" );

224 
UI¡_t
 
i•c
=0; i•c<
•ec
.
	`size
(); ispc++) {

225 
TSåög
 
v«me
 = 
•ec
[
i•c
].
	`GëEx¥essi⁄
();

226 
assignTªe
->
	`Bønch
–
v«me
, &
fATªeEvít
[
v¨s
.
	`size
()+
tgts
.size()+
i•c
], vname + "/F" );

228  
assignTªe
;

229 
	}
}

234 
	gTMVA
::
D©aLﬂdî
::
AddSig«lTøöögEvít
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

236 
AddEvít
–"Sig«l", 
Ty≥s
::
kTøöög
, 
evít
, 
weight
 );

242 
	gTMVA
::
D©aLﬂdî
::
AddSig«lTe°Evít
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

244 
AddEvít
–"Sig«l", 
Ty≥s
::
kTe°ög
, 
evít
, 
weight
 );

250 
	gTMVA
::
D©aLﬂdî
::
AddBackgroundTøöögEvít
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

252 
AddEvít
–"Background", 
Ty≥s
::
kTøöög
, 
evít
, 
weight
 );

258 
	gTMVA
::
D©aLﬂdî
::
AddBackgroundTe°Evít
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

260 
AddEvít
–"Background", 
Ty≥s
::
kTe°ög
, 
evít
, 
weight
 );

266 
	gTMVA
::
D©aLﬂdî
::
AddTøöögEvít
–c⁄° 
TSåög
& 
˛assName
, c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

268 
AddEvít
–
˛assName
, 
Ty≥s
::
kTøöög
, 
evít
, 
weight
 );

274 
	gTMVA
::
D©aLﬂdî
::
AddTe°Evít
–c⁄° 
TSåög
& 
˛assName
, c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

276 
AddEvít
–
˛assName
, 
Ty≥s
::
kTe°ög
, 
evít
, 
weight
 );

283 
	gTMVA
::
D©aLﬂdî
::
AddEvít
–c⁄° 
TSåög
& 
˛assName
, 
Ty≥s
::
ETªeTy≥
 
â
,

284 c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
evít
, DoubÀ_à
weight
 )

286 
CœssInfo
* 
	gtheCœss
 = 
DeÁu…D©aSëInfo
().
AddCœss
(
˛assName
);

287 
UI¡_t
 
	g˛Index
 = 
theCœss
->
GëNumbî
();

291 if–
	gfA«lysisTy≥
 =
Ty≥s
::
kNoA«lysisTy≥
 && 
DeÁu…D©aSëInfo
().
GëNCœs£s
() > 2 )

292 
fA«lysisTy≥
 = 
Ty≥s
::
kMu…i˛ass
;

295 i‡(
	g˛Index
>=
fTøöAssignTªe
.
size
()) {

296 
fTøöAssignTªe
.
ªsize
(
˛Index
+1, 0);

297 
	gfTe°AssignTªe
.
ªsize
(
˛Index
+1, 0);

300 i‡(
	gfTøöAssignTªe
[
˛Index
]==0) {

301 
fTøöAssignTªe
[
˛Index
] = 
Cª©eEvítAssignTªes
–
F‹m
("TøöAssignTªe_%s", 
˛assName
.
D©a
()) );

302 
	gfTe°AssignTªe
[
˛Index
] = 
Cª©eEvítAssignTªes
–
F‹m
("Te°AssignTªe_%s", 
˛assName
.
D©a
()) );

305 
	gfATªeTy≥
 = 
˛Index
;

306 
	gfATªeWeight
 = 
weight
;

307 
UI¡_t
 
	giv¨
=0; iv¨<
	gevít
.
size
(); iv¨++Ë
	gfATªeEvít
[
iv¨
] = 
evít
[ivar];

309 if(
	gâ
==
Ty≥s
::
kTøöög
Ë
fTøöAssignTªe
[
˛Index
]->
Fûl
();

310 
	gfTe°AssignTªe
[
˛Index
]->
Fûl
();

317 
Boﬁ_t
 
	gTMVA
::
D©aLﬂdî
::
	$U£rAssignEvíts
(
UI¡_t
 
˛Index
)

319  
fTøöAssignTªe
[
˛Index
]!=0;

320 
	}
}

325 
	gTMVA
::
D©aLﬂdî
::
	$SëI≈utTªesFromEvítAssignTªes
()

327 
UI¡_t
 
size
 = 
fTøöAssignTªe
.
	`size
();

328 
UI¡_t
 
i
=0; i<
size
; i++) {

329 if(!
	`U£rAssignEvíts
(
i
)) ;

330 c⁄° 
TSåög
& 
˛assName
 = 
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
(
i
)->
	`GëName
();

331 
	`SëWeightEx¥essi⁄
–"weight", 
˛assName
 );

332 
	`AddTªe
(
fTøöAssignTªe
[
i
], 
˛assName
, 1.0, 
	`TCut
(""), 
Ty≥s
::
kTøöög
 );

333 
	`AddTªe
(
fTe°AssignTªe
[
i
], 
˛assName
, 1.0, 
	`TCut
(""), 
Ty≥s
::
kTe°ög
 );

335 
	}
}

340 
	gTMVA
::
D©aLﬂdî
::
	$AddTªe
–
TTªe
* 
åì
, c⁄° 
TSåög
& 
˛assName
, 
DoubÀ_t
 
weight
,

341 c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
åìty≥
 )

343 
Ty≥s
::
ETªeTy≥
 
â
 = Ty≥s::
kMaxTªeTy≥
;

344 
TSåög
 
tmpTªeTy≥
 = 
åìty≥
;ÅmpTªeTy≥.
	`ToLowî
();

345 i‡(
tmpTªeTy≥
.
	`C⁄èös
–"åaö" ) &&ÅmpTªeTy≥.C⁄èös–"ã°" )Ë
â
 = 
Ty≥s
::
kMaxTªeTy≥
;

346 i‡(
tmpTªeTy≥
.
	`C⁄èös
–"åaö" )Ë
â
 = 
Ty≥s
::
kTøöög
;

347 i‡(
tmpTªeTy≥
.
	`C⁄èös
–"ã°" )Ë
â
 = 
Ty≥s
::
kTe°ög
;

349 
	`Log
(Ë<< 
kFATAL
 << "<AddTªe> c™nŸ i¡î¥ëÅªêty≥: \"" << 
åìty≥


350 << "\" should bê\"Tøöög\" o∏\"Te°\" o∏\"Tøöögánd Te°ög\"" << 
Endl
;

352 
	`AddTªe
–
åì
, 
˛assName
, 
weight
, 
cut
, 
â
 );

353 
	}
}

357 
	gTMVA
::
D©aLﬂdî
::
	$AddTªe
–
TTªe
* 
åì
, c⁄° 
TSåög
& 
˛assName
, 
DoubÀ_t
 
weight
,

358 c⁄° 
TCut
& 
cut
, 
Ty≥s
::
ETªeTy≥
 
â
 )

360 if(!
åì
)

361 
	`Log
(Ë<< 
kFATAL
 << "Tªêd€†nŸÉxi° (em±yÖoöãr)." << 
Endl
;

363 
	`DeÁu…D©aSëInfo
().
	`AddCœss
–
˛assName
 );

366 if–
fA«lysisTy≥
 =
Ty≥s
::
kNoA«lysisTy≥
 && 
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
() > 2 )

367 
fA«lysisTy≥
 = 
Ty≥s
::
kMu…i˛ass
;

369 
	`Log
(Ë<< 
kINFO
<< "Add Tªê" << 
åì
->
	`GëName
(Ë<< " o‡ty≥ " << 
˛assName


370 << " wôh " << 
åì
->
	`GëE¡rõs
(Ë<< "Évíts" << 
Endl
;

371 
	`D©aI≈ut
().
	`AddTªe
–
åì
, 
˛assName
, 
weight
, 
cut
, 
â
 );

372 
	}
}

377 
	gTMVA
::
D©aLﬂdî
::
	$AddSig«lTªe
–
TTªe
* 
sig«l
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
åìty≥
 )

379 
	`AddTªe
–
sig«l
, "Sig«l", 
weight
, 
	`TCut
(""), 
åìty≥
 );

380 
	}
}

385 
	gTMVA
::
D©aLﬂdî
::
	$AddSig«lTªe
–
TSåög
 
d©FûeS
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
åìty≥
 )

388 
TTªe
* 
sig«lTªe
 = 
√w
 
	`TTªe
( "TreeS", "Tree (S)" );

389 
sig«lTªe
->
	`RódFûe
–
d©FûeS
 );

391 
	`Log
(Ë<< 
kINFO
 << "Create TTree objects from ASCII input files ... \n- Signal file : \""

392 << 
d©FûeS
 << 
Endl
;

395 
	`AddTªe
–
sig«lTªe
, "Sig«l", 
weight
, 
	`TCut
(""), 
åìty≥
 );

396 
	}
}

400 
	gTMVA
::
D©aLﬂdî
::
	$AddSig«lTªe
–
TTªe
* 
sig«l
, 
DoubÀ_t
 
weight
, c⁄° 
TSåög
& 
åìty≥
 )

402 
	`AddTªe
–
sig«l
, "Sig«l", 
weight
, 
	`TCut
(""), 
åìty≥
 );

403 
	}
}

408 
	gTMVA
::
D©aLﬂdî
::
	$AddBackgroundTªe
–
TTªe
* 
sig«l
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
åìty≥
 )

410 
	`AddTªe
–
sig«l
, "Background", 
weight
, 
	`TCut
(""), 
åìty≥
 );

411 
	}
}

416 
	gTMVA
::
D©aLﬂdî
::
	$AddBackgroundTªe
–
TSåög
 
d©FûeB
, 
DoubÀ_t
 
weight
, 
Ty≥s
::
ETªeTy≥
 
åìty≥
 )

419 
TTªe
* 
bkgTªe
 = 
√w
 
	`TTªe
( "TreeB", "Tree (B)" );

420 
bkgTªe
->
	`RódFûe
–
d©FûeB
 );

422 
	`Log
(Ë<< 
kINFO
 << "Create TTree objects from ASCII input files ... \n- Background file : \""

423 << 
d©FûeB
 << 
Endl
;

426 
	`AddTªe
–
bkgTªe
, "Background", 
weight
, 
	`TCut
(""), 
åìty≥
 );

427 
	}
}

431 
	gTMVA
::
D©aLﬂdî
::
	$AddBackgroundTªe
–
TTªe
* 
sig«l
, 
DoubÀ_t
 
weight
, c⁄° 
TSåög
& 
åìty≥
 )

433 
	`AddTªe
–
sig«l
, "Background", 
weight
, 
	`TCut
(""), 
åìty≥
 );

434 
	}
}

438 
	gTMVA
::
D©aLﬂdî
::
	$SëSig«lTªe
–
TTªe
* 
åì
, 
DoubÀ_t
 
weight
 )

440 
	`AddTªe
–
åì
, "Sig«l", 
weight
 );

441 
	}
}

445 
	gTMVA
::
D©aLﬂdî
::
	$SëBackgroundTªe
–
TTªe
* 
åì
, 
DoubÀ_t
 
weight
 )

447 
	`AddTªe
–
åì
, "Background", 
weight
 );

448 
	}
}

453 
	gTMVA
::
D©aLﬂdî
::
	$SëTªe
–
TTªe
* 
åì
, c⁄° 
TSåög
& 
˛assName
, 
DoubÀ_t
 
weight
 )

455 
	`AddTªe
–
åì
, 
˛assName
, 
weight
, 
	`TCut
(""), 
Ty≥s
::
kMaxTªeTy≥
 );

456 
	}
}

461 
	gTMVA
::
D©aLﬂdî
::
	$SëI≈utTªes
–
TTªe
* 
sig«l
, TTªe* 
background
,

462 
DoubÀ_t
 
sig«lWeight
, DoubÀ_à
backgroundWeight
 )

464 
	`AddTªe
–
sig«l
, "Sig«l", 
sig«lWeight
, 
	`TCut
(""), 
Ty≥s
::
kMaxTªeTy≥
 );

465 
	`AddTªe
–
background
, "Background", 
backgroundWeight
, 
	`TCut
(""), 
Ty≥s
::
kMaxTªeTy≥
 );

466 
	}
}

470 
	gTMVA
::
D©aLﬂdî
::
	$SëI≈utTªes
–c⁄° 
TSåög
& 
d©FûeS
, c⁄° TSåög& 
d©FûeB
,

471 
DoubÀ_t
 
sig«lWeight
, DoubÀ_à
backgroundWeight
 )

473 
	`D©aI≈ut
().
	`AddTªe
–
d©FûeS
, "Sig«l", 
sig«lWeight
 );

474 
	`D©aI≈ut
().
	`AddTªe
–
d©FûeB
, "Background", 
backgroundWeight
 );

475 
	}
}

482 
	gTMVA
::
D©aLﬂdî
::
	$SëI≈utTªes
–
TTªe
* 
öputTªe
, c⁄° 
TCut
& 
SigCut
, c⁄° TCut& 
BgCut
 )

484 
	`AddTªe
–
öputTªe
, "Sig«l", 1.0, 
SigCut
, 
Ty≥s
::
kMaxTªeTy≥
 );

485 
	`AddTªe
–
öputTªe
, "Background", 1.0, 
BgCut
 , 
Ty≥s
::
kMaxTªeTy≥
 );

486 
	}
}

491 
	gTMVA
::
D©aLﬂdî
::
	$AddV¨übÀ
–c⁄° 
TSåög
& 
ex¥essi⁄
, c⁄° TSåög& 
tôÀ
, c⁄° TSåög& 
unô
,

492 
ty≥
, 
DoubÀ_t
 
mö
, DoubÀ_à
max
 )

494 
	`DeÁu…D©aSëInfo
().
	`AddV¨übÀ
–
ex¥essi⁄
, 
tôÀ
, 
unô
, 
mö
, 
max
, 
ty≥
 );

495 
	}
}

500 
	gTMVA
::
D©aLﬂdî
::
	$AddV¨übÀ
–c⁄° 
TSåög
& 
ex¥essi⁄
, 
ty≥
,

501 
DoubÀ_t
 
mö
, DoubÀ_à
max
 )

503 
	`DeÁu…D©aSëInfo
().
	`AddV¨übÀ
–
ex¥essi⁄
, "", "", 
mö
, 
max
, 
ty≥
 );

504 
	}
}

509 
	gTMVA
::
D©aLﬂdî
::
	$AddT¨gë
–c⁄° 
TSåög
& 
ex¥essi⁄
, c⁄° TSåög& 
tôÀ
, c⁄° TSåög& 
unô
,

510 
DoubÀ_t
 
mö
, DoubÀ_à
max
 )

512 if–
fA«lysisTy≥
 =
Ty≥s
::
kNoA«lysisTy≥
 )

513 
fA«lysisTy≥
 = 
Ty≥s
::
kRegªssi⁄
;

515 
	`DeÁu…D©aSëInfo
().
	`AddT¨gë
–
ex¥essi⁄
, 
tôÀ
, 
unô
, 
mö
, 
max
 );

516 
	}
}

521 
	gTMVA
::
D©aLﬂdî
::
	$AddS≥˘©‹
–c⁄° 
TSåög
& 
ex¥essi⁄
, c⁄° TSåög& 
tôÀ
, c⁄° TSåög& 
unô
,

522 
DoubÀ_t
 
mö
, DoubÀ_à
max
 )

524 
	`DeÁu…D©aSëInfo
().
	`AddS≥˘©‹
–
ex¥essi⁄
, 
tôÀ
, 
unô
, 
mö
, 
max
 );

525 
	}
}

530 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
D©aLﬂdî
::
	$DeÁu…D©aSëInfo
()

532  
	`AddD©aSë
–
fName
 );

533 
	}
}

538 
	gTMVA
::
D©aLﬂdî
::
SëI≈utV¨übÀs
–
°d
::
ve˘‹
<
TSåög
>* 
theV¨übÀs
 )

540 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ô
=
theV¨übÀs
->
begö
();

541 
	gô
!=
theV¨übÀs
->
íd
(); it++Ë
AddV¨übÀ
(*
ô
);

546 
	gTMVA
::
D©aLﬂdî
::
	$SëSig«lWeightEx¥essi⁄
–c⁄° 
TSåög
& 
v¨übÀ
)

548 
	`DeÁu…D©aSëInfo
().
	`SëWeightEx¥essi⁄
(
v¨übÀ
, "Signal");

549 
	}
}

553 
	gTMVA
::
D©aLﬂdî
::
	$SëBackgroundWeightEx¥essi⁄
–c⁄° 
TSåög
& 
v¨übÀ
)

555 
	`DeÁu…D©aSëInfo
().
	`SëWeightEx¥essi⁄
(
v¨übÀ
, "Background");

556 
	}
}

560 
	gTMVA
::
D©aLﬂdî
::
	$SëWeightEx¥essi⁄
–c⁄° 
TSåög
& 
v¨übÀ
, c⁄° TSåög& 
˛assName
 )

563 i‡(
˛assName
=="") {

564 
	`SëSig«lWeightEx¥essi⁄
(
v¨übÀ
);

565 
	`SëBackgroundWeightEx¥essi⁄
(
v¨übÀ
);

567 
	`DeÁu…D©aSëInfo
().
	`SëWeightEx¥essi⁄
–
v¨übÀ
, 
˛assName
 );

568 
	}
}

572 
	gTMVA
::
D©aLﬂdî
::
	$SëCut
–c⁄° 
TSåög
& 
cut
, c⁄° TSåög& 
˛assName
 ) {

573 
	`SëCut
–
	`TCut
(
cut
), 
˛assName
 );

574 
	}
}

578 
	gTMVA
::
D©aLﬂdî
::
	$SëCut
–c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
˛assName
 )

580 
	`DeÁu…D©aSëInfo
().
	`SëCut
–
cut
, 
˛assName
 );

581 
	}
}

585 
	gTMVA
::
D©aLﬂdî
::
	$AddCut
–c⁄° 
TSåög
& 
cut
, c⁄° TSåög& 
˛assName
 )

587 
	`AddCut
–
	`TCut
(
cut
), 
˛assName
 );

588 
	}
}

591 
	gTMVA
::
D©aLﬂdî
::
	$AddCut
–c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
˛assName
 )

593 
	`DeÁu…D©aSëInfo
().
	`AddCut
–
cut
, 
˛assName
 );

594 
	}
}

599 
	gTMVA
::
D©aLﬂdî
::
	$Pª∑ªTøöögAndTe°Tªe
–c⁄° 
TCut
& 
cut
,

600 
I¡_t
 
NsigTøö
, I¡_à
NbkgTøö
, I¡_à
NsigTe°
, I¡_à
NbkgTe°
,

601 c⁄° 
TSåög
& 
ŸhîO±
 )

603 
	`SëI≈utTªesFromEvítAssignTªes
();

605 
	`AddCut
–
cut
 );

607 
	`DeÁu…D©aSëInfo
().
	`SëS∂ôO±i⁄s
–
	`F‹m
("nTrain_Signal=%i:nTrain_Background=%i:nTest_Signal=%i:nTest_Background=%i:%s",

608 
NsigTøö
, 
NbkgTøö
, 
NsigTe°
, 
NbkgTe°
, 
ŸhîO±
.
	`D©a
()) );

609 
	}
}

615 
	gTMVA
::
D©aLﬂdî
::
	$Pª∑ªTøöögAndTe°Tªe
–c⁄° 
TCut
& 
cut
, 
I¡_t
 
Nåaö
, I¡_à
Nã°
 )

617 
	`SëI≈utTªesFromEvítAssignTªes
();

619 
	`AddCut
–
cut
 );

621 
	`DeÁu…D©aSëInfo
().
	`SëS∂ôO±i⁄s
–
	`F‹m
("nTrain_Signal=%i:nTrain_Background=%i:nTest_Signal=%i:nTest_Background=%i:SplitMode=Random:EqualTrainSample:!V",

622 
Nåaö
, Nåaö, 
Nã°
, Ntest) );

623 
	}
}

629 
	gTMVA
::
D©aLﬂdî
::
	$Pª∑ªTøöögAndTe°Tªe
–c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
›t
 )

631 
	`SëI≈utTªesFromEvítAssignTªes
();

633 
	`DeÁu…D©aSëInfo
().
	`PrötCœs£s
();

634 
	`AddCut
–
cut
 );

635 
	`DeÁu…D©aSëInfo
().
	`SëS∂ôO±i⁄s
–
›t
 );

636 
	}
}

641 
	gTMVA
::
D©aLﬂdî
::
	$Pª∑ªTøöögAndTe°Tªe
–
TCut
 
sigcut
, TCuà
bkgcut
, c⁄° 
TSåög
& 
•lôO±
 )

644 
	`SëI≈utTªesFromEvítAssignTªes
();

647 
	`AddCut
–
sigcut
, "Signal" );

648 
	`AddCut
–
bkgcut
, "Background" );

650 
	`DeÁu…D©aSëInfo
().
	`SëS∂ôO±i⁄s
–
•lôO±
 );

651 
	}
}

659 
	gTMVA
::
D©aLﬂdî
::
	$MakeKFﬁdD©aSë
(
UI¡_t
 
numbîFﬁds
, 
boﬁ
 
vÆid©i⁄Së
){

661 if(
fMakeFﬁdD©aSë
){

662 
	`Log
(Ë<< 
kInfo
 << "S∂ôtög i¿k-fﬁd†ha†bì¿Æªady d⁄e" << 
Endl
;

666 
fMakeFﬁdD©aSë
 = 
kTRUE
;

669 c⁄° 
°d
::
ve˘‹
<
Evít
*> 
TøöögD©a
 = 
	`DeÁu…D©aSëInfo
().
	`GëD©aSë
()->
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
);

670 c⁄° 
°d
::
ve˘‹
<
Evít
*> 
Te°ögD©a
 = 
	`DeÁu…D©aSëInfo
().
	`GëD©aSë
()->
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
);

672 
°d
::
ve˘‹
<
Evít
*> 
TøöSigD©a
;

673 
°d
::
ve˘‹
<
Evít
*> 
TøöBkgD©a
;

674 
°d
::
ve˘‹
<
Evít
*> 
Te°SigD©a
;

675 
°d
::
ve˘‹
<
Evít
*> 
Te°BkgD©a
;

678 
UI¡_t
 
i
=0; i<
TøöögD©a
.
	`size
(); ++i){

679 if–
	`°∫cmp
–
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
TøöögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(), "Sig«l", 6Ë=0){ 
TøöSigD©a
.
	`push_back
(TrainingData.at(i)); }

680 if–
	`°∫cmp
–
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
TøöögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(), "Background", 10Ë=0){ 
TøöBkgD©a
.
	`push_back
(TrainingData.at(i)); }

682 
	`Log
(Ë<< 
kFATAL
 << "D©aSë†should o∆y c⁄èö Sig«»™d Background cœs£†f‹ cœssifiˇti⁄, " << 
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
TøöögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(Ë<< " i†nŸáÑecogni£d cœss" << 
Endl
;

686 
UI¡_t
 
i
=0; i<
Te°ögD©a
.
	`size
(); ++i){

687 if–
	`°∫cmp
–
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
Te°ögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(), "Sig«l", 6Ë=0){ 
Te°SigD©a
.
	`push_back
(TestingData.at(i)); }

688 if–
	`°∫cmp
–
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
Te°ögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(), "Background", 10Ë=0){ 
Te°BkgD©a
.
	`push_back
(TestingData.at(i)); }

690 
	`Log
(Ë<< 
kFATAL
 << "D©aSë†should o∆y c⁄èö Sig«»™d Background cœs£†f‹ cœssifiˇti⁄, " << 
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
–
Te°ögD©a
.
	`©
(
i
)->
	`GëCœss
(Ë)->
	`GëName
(Ë<< " i†nŸáÑecogni£d cœss" << 
Endl
;

696 if(
vÆid©i⁄Së
){

697 
°d
::
ve˘‹
<°d::ve˘‹<
Evít
*>> 
ãmpSigEvíts
 = 
	`S∂ôSës
(
TøöSigD©a
,0,2);

698 
°d
::
ve˘‹
<°d::ve˘‹<
Evít
*>> 
ãmpBkgEvíts
 = 
	`S∂ôSës
(
TøöBkgD©a
,0,2);

699 
fTøöSigEvíts
 = 
	`S∂ôSës
(
ãmpSigEvíts
.
	`©
(0),0,
numbîFﬁds
);

700 
fTøöBkgEvíts
 = 
	`S∂ôSës
(
ãmpBkgEvíts
.
	`©
(0),0,
numbîFﬁds
);

701 
fVÆidSigEvíts
 = 
	`S∂ôSës
(
ãmpSigEvíts
.
	`©
(1),0,
numbîFﬁds
);

702 
fVÆidBkgEvíts
 = 
	`S∂ôSës
(
ãmpBkgEvíts
.
	`©
(1),0,
numbîFﬁds
);

705 
fTøöSigEvíts
 = 
	`S∂ôSës
(
TøöSigD©a
,0,
numbîFﬁds
);

706 
fTøöBkgEvíts
 = 
	`S∂ôSës
(
TøöBkgD©a
,0,
numbîFﬁds
);

709 
fTe°SigEvíts
 = 
	`S∂ôSës
(
Te°SigD©a
,0,
numbîFﬁds
);

710 
fTe°BkgEvíts
 = 
	`S∂ôSës
(
Te°BkgD©a
,0,
numbîFﬁds
);

711 
	}
}

716 
	gTMVA
::
D©aLﬂdî
::
	$Pª∑ªFﬁdD©aSë
(
UI¡_t
 
fﬁdNumbî
, 
Ty≥s
::
ETªeTy≥
 
â
){

718 
UI¡_t
 
numFﬁds
 = 
fTøöSigEvíts
.
	`size
();

720 
°d
::
ve˘‹
<
Evít
*>* 
ãmpTøö
 = 
√w
 std::vector<Event*>;

721 
°d
::
ve˘‹
<
Evít
*>* 
ãmpTe°
 = 
√w
 std::vector<Event*>;

723 
UI¡_t
 
nTøö
 = 0;

724 
UI¡_t
 
nTe°
 = 0;

727 
UI¡_t
 
i
=0; i<
numFﬁds
; ++i){

728 if(
â
 =
Ty≥s
::
kTøöög
){

729 if(
i
!=
fﬁdNumbî
){

730 
nTøö
 +
fTøöSigEvíts
.
	`©
(
i
).
	`size
();

731 
nTøö
 +
fTøöBkgEvíts
.
	`©
(
i
).
	`size
();

734 
nTe°
 +
fTøöSigEvíts
.
	`©
(
i
).
	`size
();

735 
nTe°
 +
fTøöSigEvíts
.
	`©
(
i
).
	`size
();

738 if(
â
 =
Ty≥s
::
kVÆid©i⁄
){

739 if(
i
!=
fﬁdNumbî
){

740 
nTøö
 +
fVÆidSigEvíts
.
	`©
(
i
).
	`size
();

741 
nTøö
 +
fVÆidBkgEvíts
.
	`©
(
i
).
	`size
();

744 
nTe°
 +
fVÆidSigEvíts
.
	`©
(
i
).
	`size
();

745 
nTe°
 +
fVÆidSigEvíts
.
	`©
(
i
).
	`size
();

748 if(
â
 =
Ty≥s
::
kTe°ög
){

749 if(
i
!=
fﬁdNumbî
){

750 
nTøö
 +
fTe°SigEvíts
.
	`©
(
i
).
	`size
();

751 
nTøö
 +
fTe°BkgEvíts
.
	`©
(
i
).
	`size
();

754 
nTe°
 +
fTe°SigEvíts
.
	`©
(
i
).
	`size
();

755 
nTe°
 +
fTe°SigEvíts
.
	`©
(
i
).
	`size
();

761 
ãmpTøö
->
	`ª£rve
(
nTøö
);

762 
ãmpTe°
->
	`ª£rve
(
nTe°
);

765 
UI¡_t
 
j
=0; j<
numFﬁds
; ++j){

766 if(
â
 =
Ty≥s
::
kTøöög
){

767 if(
j
!=
fﬁdNumbî
){

768 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fTøöSigEvíts
.
	`©
(
j
).
	`begö
(), fTrainSigEvents.at(j).end());

769 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fTøöBkgEvíts
.
	`©
(
j
).
	`begö
(), fTrainBkgEvents.at(j).end());

772 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fTøöSigEvíts
.
	`©
(
j
).
	`begö
(), fTrainSigEvents.at(j).end());

773 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fTøöBkgEvíts
.
	`©
(
j
).
	`begö
(), fTrainBkgEvents.at(j).end());

776 if(
â
 =
Ty≥s
::
kVÆid©i⁄
){

777 if(
j
!=
fﬁdNumbî
){

778 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fVÆidSigEvíts
.
	`©
(
j
).
	`begö
(), fValidSigEvents.at(j).end());

779 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fVÆidBkgEvíts
.
	`©
(
j
).
	`begö
(), fValidBkgEvents.at(j).end());

782 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fVÆidSigEvíts
.
	`©
(
j
).
	`begö
(), fValidSigEvents.at(j).end());

783 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fVÆidBkgEvíts
.
	`©
(
j
).
	`begö
(), fValidBkgEvents.at(j).end());

786 if(
â
 =
Ty≥s
::
kTe°ög
){

787 if(
j
!=
fﬁdNumbî
){

788 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fTe°SigEvíts
.
	`©
(
j
).
	`begö
(), fTestSigEvents.at(j).end());

789 
ãmpTøö
->
	`ö£π
—empTøö->
	`íd
(), 
fTe°BkgEvíts
.
	`©
(
j
).
	`begö
(), fTestBkgEvents.at(j).end());

792 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fTe°SigEvíts
.
	`©
(
j
).
	`begö
(), fTestSigEvents.at(j).end());

793 
ãmpTe°
->
	`ö£π
—empTe°->
	`íd
(), 
fTe°BkgEvíts
.
	`©
(
j
).
	`begö
(), fTestBkgEvents.at(j).end());

799 
	`DeÁu…D©aSëInfo
().
	`GëD©aSë
()->
	`SëEvítCﬁÀ˘i⁄
(
ãmpTøö
,
Ty≥s
::
kTøöög
,
Ál£
);

800 
	`DeÁu…D©aSëInfo
().
	`GëD©aSë
()->
	`SëEvítCﬁÀ˘i⁄
(
ãmpTe°
,
Ty≥s
::
kTe°ög
,
Ál£
);

801 
dñëe
 
ãmpTe°
;

802 
dñëe
 
ãmpTøö
;

803 
	}
}

808 
	g°d
::
ve˘‹
<
°d
::ve˘‹<
TMVA
::
Evít
*>> TMVA::
D©aLﬂdî
::
S∂ôSës
(°d::ve˘‹<TMVA::Evít*>& 
ﬁdSë
, 
£edNum
, 
numFﬁds
){

810 
UL⁄g64_t
 
	gnE¡rõs
 = 
ﬁdSë
.
size
();

811 
UL⁄g64_t
 
	gfﬁdSize
 = 
nE¡rõs
/
numFﬁds
;

813 
	g°d
::
ve˘‹
<
°d
::ve˘‹<
Evít
*>> 
ãmpSës
;

814 
	gãmpSës
.
ªsize
(
numFﬁds
);

816 
TR™dom3
 
r
(
£edNum
);

818 
UL⁄g64_t
 
	göSë
 = 0;

820 
UL⁄g64_t
 
	gi
=0; i<
	gnE¡rõs
; i++){

821 
boﬁ
 
	göTªe
 = 
Ál£
;

822 if(
	göSë
 =
fﬁdSize
*
numFﬁds
){

826 !
	göTªe
){

827 
	gs
 = 
r
.
I¡egî
(
numFﬁds
);

828 if(
	gãmpSës
.
©
(
s
).
size
()<
	gfﬁdSize
){

829 
	gãmpSës
.
©
(
s
).
push_back
(
ﬁdSë
.©(
i
));

830 
	göSë
++;

831 
	göTªe
=
åue
;

837  
	gãmpSës
;

844 
	gTMVA
::
D©aLﬂdî
* 
TMVA
::D©aLﬂdî::
	$MakeC›y
(
TSåög
 
«me
)

846 
TMVA
::
D©aLﬂdî
* 
des
=
√w
 TMVA::
	`D©aLﬂdî
(
«me
);

847 
	`D©aLﬂdîC›y
(
des
,
this
);

848  
des
;

849 
	}
}

854 
	gTMVA
::
	$D©aLﬂdîC›y
(
TMVA
::
D©aLﬂdî
* 
des
, TMVA::D©aLﬂdî* 
§c
)

856  
°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
åìöfo
=
§c
->
	`D©aI≈ut
().
	`Sbegö
();åìöfo!=§c->D©aI≈ut().
	`Síd
();treeinfo++)

858 
des
->
	`AddSig«lTªe
–(*
åìöfo
).
	`GëTªe
(), (*åìöfo).
	`GëWeight
(),(*åìöfo).
	`GëTªeTy≥
());

861  
°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
åìöfo
=
§c
->
	`D©aI≈ut
().
	`Bbegö
();åìöfo!=§c->D©aI≈ut().
	`Bíd
();treeinfo++)

863 
des
->
	`AddBackgroundTªe
–(*
åìöfo
).
	`GëTªe
(), (*åìöfo).
	`GëWeight
(),(*åìöfo).
	`GëTªeTy≥
());

865 
	}
}

870 
TH2
* 
	gTMVA
::
D©aLﬂdî
::
	$GëC‹ªœti⁄M©rix
(c⁄° 
TSåög
& 
˛assName
)

872 c⁄° 
TM©rixD
 * 
m
 = 
	`DeÁu…D©aSëInfo
().
	`C‹ªœti⁄M©rix
(
˛assName
);

873  
	`DeÁu…D©aSëInfo
().
	`Cª©eC‹ªœti⁄M©rixHi°
(
m
,

874 "C‹ªœti⁄M©rix"+
˛assName
, "Correlation Matrix ("+className+")");

875 
	}
}

	@src/DataSet.cxx

34 
	~<ve˘‹
>

35 
	~<Æg‹ôhm
>

36 
	~<c°dlib
>

37 
	~<°dex˚±
>

38 
	~<Æg‹ôhm
>

40 
	~"TMVA/D©aSëInfo.h
"

41 
	~"TMVA/D©aSë.h
"

42 
	~"TMVA/Evít.h
"

43 
	~"TMVA/MsgLoggî.h
"

44 
	~"TMVA/Resu…sRegªssi⁄.h
"

45 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

46 
	~"TMVA/Resu…sMu…i˛ass.h
"

47 
	~"TMVA/C⁄figuøbÀ.h
"

49 
	~"TMVA/Ty≥s.h
"

50 
	~"TMVA/Resu…s.h
"

51 
	~"TMVA/V¨übÀInfo.h
"

53 
	~"TR™dom3.h
"

58 
	gTMVA
::
D©aSë
::
	$D©aSë
(c⁄° 
D©aSëInfo
& 
dsi
)

59 :
	`TNamed
(
dsi
.
	`GëName
(),"DataSet"),

60 
	`fdsi
(&
dsi
),

61 
	`fEvítCﬁÀ˘i⁄
(4),

62 
	`fCuºítTªeIdx
(0),

63 
	`fCuºítEvítIdx
(0),

64 
	`fHasNeg©iveEvítWeights
(
kFALSE
),

65 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`TSåög
(TSåög("D©a£t:")+
dsi
.
	`GëName
()).
	`D©a
()) ),

66 
	$fTøöögBlockSize
(0)

69 
fCœssEvíts
.
	`ªsize
(4);

70 
fBlockBñ⁄gToTøöög
.
	`ª£rve
(10);

71 
fBlockBñ⁄gToTøöög
.
	`push_back
(
kTRUE
);

74 
fSam∂ögR™dom
 = 0;

76 
I¡_t
 
åìNum
 = 2;

77 
fSam∂ög
.
	`ªsize
–
åìNum
 );

78 
fSam∂ögNEvíts
.
	`ªsize
–
åìNum
 );

79 
fSam∂ögWeight
.
	`ªsize
(
åìNum
);

81 
I¡_t
 
åìIdx
 = 0;ÅªeIdx < 
åìNum
;ÅreeIdx++) {

82 
fSam∂ög
.
	`©
(
åìIdx
Ë
kFALSE
;

83 
fSam∂ögNEvíts
.
	`©
(
åìIdx
) = 0;

84 
fSam∂ögWeight
.
	`©
(
åìIdx
) = 1.0;

86 
	}
}

91 
	gTMVA
::
D©aSë
::
	$D©aSë
()

92 :
	`fdsi
(
√w
 
	`D©aSëInfo
(
	`GëName
())),

93 
	`fEvítCﬁÀ˘i⁄
(4),

94 
	`fCuºítTªeIdx
(0),

95 
	`fCuºítEvítIdx
(0),

96 
	`fHasNeg©iveEvítWeights
(
kFALSE
),

97 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`TSåög
(TSåög("D©a£t:")+
	`GëName
()).
	`D©a
()) ),

98 
	$fTøöögBlockSize
(0)

101 
fCœssEvíts
.
	`ªsize
(4);

102 
fBlockBñ⁄gToTøöög
.
	`ª£rve
(10);

103 
fBlockBñ⁄gToTøöög
.
	`push_back
(
kTRUE
);

106 
fSam∂ögR™dom
 = 0;

108 
I¡_t
 
åìNum
 = 2;

109 
fSam∂ög
.
	`ªsize
–
åìNum
 );

110 
fSam∂ögNEvíts
.
	`ªsize
–
åìNum
 );

111 
fSam∂ögWeight
.
	`ªsize
(
åìNum
);

113 
I¡_t
 
åìIdx
 = 0;ÅªeIdx < 
åìNum
;ÅreeIdx++) {

114 
fSam∂ög
.
	`©
(
åìIdx
Ë
kFALSE
;

115 
fSam∂ögNEvíts
.
	`©
(
åìIdx
) = 0;

116 
fSam∂ögWeight
.
	`©
(
åìIdx
) = 1.0;

118 
	}
}

123 
	gTMVA
::
D©aSë
::~
	$D©aSë
()

126 
Boﬁ_t
 
dñëeEvíts
=
åue
;

127 
	`De°royCﬁÀ˘i⁄
–
Ty≥s
::
kTøöög
, 
dñëeEvíts
 );

128 
	`De°royCﬁÀ˘i⁄
–
Ty≥s
::
kTe°ög
, 
dñëeEvíts
 );

130 
fBlockBñ⁄gToTøöög
.
	`˛ór
();

132 
°d
::
ve˘‹
< std::
m≠
< 
TSåög
, 
Resu…s
* > >::
ôî©‹
 
ô
 = 
fResu…s
.
	`begö
(); ià!fResu…s.
	`íd
(); it++) {

133 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >::
ôî©‹
 
ôM≠
 = (*
ô
).
	`begö
(); itM≠ !(*ô).
	`íd
(); itMap++) {

134 
dñëe
 
ôM≠
->
£c⁄d
;

139 i‡(
fSam∂ögR™dom
 !0 ) 
dñëe
 fSamplingRandom;

143 
	`De°royCﬁÀ˘i⁄
–
Ty≥s
::
kVÆid©i⁄
, 
dñëeEvíts
 );

144 
	`De°royCﬁÀ˘i⁄
–
Ty≥s
::
kTøöögOrigöÆ
, 
dñëeEvíts
 );

146 
dñëe
 
fLoggî
;

147 
	}
}

151 
	gTMVA
::
D©aSë
::
	$In¸emítNCœssEvíts
–
I¡_t
 
ty≥
, 
UI¡_t
 
˛assNumbî
 )

153 i‡(
fCœssEvíts
.
	`size
()<(
UI¡_t
)(
ty≥
+1)ËfCœssEvíts.
	`ªsize
(Åype+1 );

154 i‡(
fCœssEvíts
.
	`©
–
ty≥
 ).
	`size
(Ë< 
˛assNumbî
+1ËfCœssEvíts.©–ty≥ ).
	`ªsize
( classNumber+1 );

155 
fCœssEvíts
.
	`©
–
ty≥
 ).©–
˛assNumbî
 ) += 1;

156 
	}
}

160 
	gTMVA
::
D©aSë
::
	$CÀ¨NCœssEvíts
–
I¡_t
 
ty≥
 )

162 i‡(
fCœssEvíts
.
	`size
()<(
UI¡_t
)(
ty≥
+1)ËfCœssEvíts.
	`ªsize
(Åype+1 );

163 
fCœssEvíts
.
	`©
–
ty≥
 ).
	`˛ór
();

164 
	}
}

168 
L⁄g64_t
 
	gTMVA
::
D©aSë
::
	$GëNCœssEvíts
–
I¡_t
 
ty≥
, 
UI¡_t
 
˛assNumbî
 )

170 
åy
 {

171  
fCœssEvíts
.
	`©
(
ty≥
).©(
˛assNumbî
);

173 
	`ˇtch
 (
°d
::
out_of_ønge
 
ex˝t
) {

174 
CœssInfo
* 
ci
 = 
fdsi
->
	`GëCœssInfo
–
˛assNumbî
 );

175 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "Nÿ" << (
ty≥
==0?"training":(type==1?"testing":"_unknown_type_"))

176 << "Évít†f‹ cœs†" << (
ci
==
NULL
?"_no_«me_known_":ci->
	`GëName
()Ë<< " (ödex # "<<
˛assNumbî
<<")"

178 << "ÖassögÅhê£À˘i⁄ cuts." << 
Endl
;

180 
	`ˇtch
 (...) {

181 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "ERROR/CAUGHT : D©aSë/GëNCœssEvíts, .. unknow¿îr‹" << 
Endl
;

184 
	}
}

189 
	gTMVA
::
D©aSë
::
	$De°royCﬁÀ˘i⁄
(
Ty≥s
::
ETªeTy≥
 
ty≥
, 
Boﬁ_t
 
dñëeEvíts
 )

191 
UI¡_t
 
i
 = 
	`TªeIndex
(
ty≥
);

192 i‡(
i
>=
fEvítCﬁÀ˘i⁄
.
	`size
() || fEventCollection[i].size()==0) ;

193 i‡(
dñëeEvíts
) {

195 
UI¡_t
 
j
=0; j<
fEvítCﬁÀ˘i⁄
[
i
].
	`size
(); j++Ë
dñëe
 fEventCollection[i][j];

197 
fEvítCﬁÀ˘i⁄
[
i
].
	`˛ór
();

198 
	}
}

202 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
D©aSë
::
	$GëEvít
() const

204 i‡(
fSam∂ög
.
	`size
(Ë> 
	`UI¡_t
(
fCuºítTªeIdx
Ë&& fSam∂ög.
	`©
(fCurrentTreeIdx)) {

205 
L⁄g64_t
 
iEvt
 = 
fSam∂ögSñe˘ed
.
	`©
(
fCuºítTªeIdx
).©–
fCuºítEvítIdx
 ).
£c⁄d
;

206  ((
fEvítCﬁÀ˘i⁄
.
	`©
(
fCuºítTªeIdx
))).©(
iEvt
);

209  ((
fEvítCﬁÀ˘i⁄
.
	`©
(
fCuºítTªeIdx
))).©(
fCuºítEvítIdx
);

211 
	}
}

216 
UI¡_t
 
	gTMVA
::
D©aSë
::
	$GëNV¨übÀs
() const

218  
fdsi
->
	`GëNV¨übÀs
();

219 
	}
}

224 
UI¡_t
 
	gTMVA
::
D©aSë
::
	$GëNT¨gës
() const

226  
fdsi
->
	`GëNT¨gës
();

227 
	}
}

232 
UI¡_t
 
	gTMVA
::
D©aSë
::
	$GëNS≥˘©‹s
() const

234  
fdsi
->
	`GëNS≥˘©‹s
();

235 
	}
}

241 
	gTMVA
::
D©aSë
::
	$AddEvít
(
Evít
 * 
ev
, 
Ty≥s
::
ETªeTy≥
 
ty≥
)

243 
fEvítCﬁÀ˘i⁄
.
	`©
(
	`I¡_t
(
ty≥
)).
	`push_back
(
ev
);

244 i‡(
ev
->
	`GëWeight
()<0Ë
fHasNeg©iveEvítWeights
 = 
kTRUE
;

245 
	}
}

250 
	gTMVA
::
D©aSë
::
SëEvítCﬁÀ˘i⁄
(
°d
::
ve˘‹
<
TMVA
::
Evít
*>* 
evíts
, 
Ty≥s
::
ETªeTy≥
 
ty≥
, 
Boﬁ_t
 
dñëeEvíts
)

252 
De°royCﬁÀ˘i⁄
(
ty≥
,
dñëeEvíts
);

254 c⁄° 
I¡_t
 
	gt
 = 
TªeIndex
(
ty≥
);

255 
CÀ¨NCœssEvíts
–
ty≥
 );

257 
	gfEvítCﬁÀ˘i⁄
.
©
(
t
Ë*
evíts
;

258 
	g°d
::
ve˘‹
<
Evít
*>::
ôî©‹
 
ô
 = 
fEvítCﬁÀ˘i⁄
.
©
(
t
).
begö
(); 
	gô
 < 
	gfEvítCﬁÀ˘i⁄
.©—).
íd
(); it++) {

259 
In¸emítNCœssEvíts
–
t
, (*
ô
)->
GëCœss
() );

265 
	gTMVA
::
Resu…s
* 
TMVA
::
D©aSë
::
	$GëResu…s
–c⁄° 
TSåög
 & 
ªsu…sName
,

266 
Ty≥s
::
ETªeTy≥
 
ty≥
,

267 
Ty≥s
::
EA«lysisTy≥
 
™Æysi°y≥
 )

269 
UI¡_t
 
t
 = 
	`TªeIndex
(
ty≥
);

270 i‡(
t
<
fResu…s
.
	`size
()) {

271 c⁄° 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >& 
ªsu…sF‹Ty≥
 = 
fResu…s
[
t
];

272 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >::
c⁄°_ôî©‹
 
ô
 = 
ªsu…sF‹Ty≥
.
	`föd
(
ªsu…sName
);

273 i‡(
ô
!=
ªsu…sF‹Ty≥
.
	`íd
()) {

275  
ô
->
£c⁄d
;

279 
fResu…s
.
	`ªsize
(
t
+1);

284 
Resu…s
 * 
√wªsu…s
 = 0;

285 
™Æysi°y≥
) {

286 
Ty≥s
::
kCœssifiˇti⁄
:

287 
√wªsu…s
 = 
√w
 
	`Resu…sCœssifiˇti⁄
(
fdsi
,
ªsu…sName
);

289 
Ty≥s
::
kRegªssi⁄
:

290 
√wªsu…s
 = 
√w
 
	`Resu…sRegªssi⁄
(
fdsi
,
ªsu…sName
);

292 
Ty≥s
::
kMu…i˛ass
:

293 
√wªsu…s
 = 
√w
 
	`Resu…sMu…i˛ass
(
fdsi
,
ªsu…sName
);

295 
Ty≥s
::
kNoA«lysisTy≥
:

296 
√wªsu…s
 = 
√w
 
	`Resu…sCœssifiˇti⁄
(
fdsi
,
ªsu…sName
);

298 
Ty≥s
::
kMaxA«lysisTy≥
:

304 
√wªsu…s
->
	`SëTªeTy≥
–
ty≥
 );

305 
fResu…s
[
t
][
ªsu…sName
] = 
√wªsu…s
;

308  
√wªsu…s
;

309 
	}
}

316 
	gTMVA
::
D©aSë
::
	$DñëeResu…s
–c⁄° 
TSåög
 & 
ªsu…sName
,

317 
Ty≥s
::
ETªeTy≥
 
ty≥
,

318 
Ty≥s
::
EA«lysisTy≥
 )

320 i‡(
fResu…s
.
	`em±y
()) ;

322 i‡(
	`UI¡_t
(
ty≥
Ë> 
fResu…s
.
	`size
()){

323 
	`Log
()<<
kFATAL
<< 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()) << "youásked forán Treetype (training/testing/...)"

324 << " who£ index " << 
ty≥
 << " d€†nŸÉxi° " << 
Endl
;

326 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >& 
ªsu…sF‹Ty≥
 = 
fResu…s
[
	`UI¡_t
(
ty≥
)];

327 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >::
ôî©‹
 
ô
 = 
ªsu…sF‹Ty≥
.
	`föd
(
ªsu…sName
);

328 i‡(
ô
!=
ªsu…sF‹Ty≥
.
	`íd
()) {

329 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< " DñëêResu…†¥eviou†exi°ögÑesu…:" << 
ªsu…sName


330 << " o‡ty≥ " << 
ty≥
 << 
Endl
;

331 
dñëe
 
ô
->
£c⁄d
;

332 
ªsu…sF‹Ty≥
.
	`îa£
(
ô
->
fú°
);

335 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "couldÇŸ föêResu… cœs†o‡" << 
ªsu…sName


336 << " o‡ty≥ " << 
ty≥
 << " which I should havêdñëed" << 
Endl
;

338 
	}
}

342 
	gTMVA
::
D©aSë
::
	$DivideTøöögSë
–
UI¡_t
 
blockNum
 )

344 
I¡_t
 
tOrg
 = 
	`TªeIndex
(
Ty≥s
::
kTøöögOrigöÆ
),
tT∫
 = TªeIndex(Ty≥s::
kTøöög
);

346 i‡(
fBlockBñ⁄gToTøöög
.
	`size
(Ë=
blockNum
) ;

348 i‡(
fBlockBñ⁄gToTøöög
.
	`size
() == 1) {

349 i‡(
fEvítCﬁÀ˘i⁄
[
tOrg
].
	`size
() == 0)

350 
fEvítCﬁÀ˘i⁄
[
tOrg
].
	`ªsize
(fEvítCﬁÀ˘i⁄[
tT∫
].
	`size
());

351 
fEvítCﬁÀ˘i⁄
[
tOrg
].
	`˛ór
();

352 
UI¡_t
 
i
=0; i<
fEvítCﬁÀ˘i⁄
[
tT∫
].
	`size
(); i++)

353 
fEvítCﬁÀ˘i⁄
[
tOrg
].
	`push_back
(fEvítCﬁÀ˘i⁄[
tT∫
][
i
]);

354 
fCœssEvíts
[
tOrg
] = fCœssEvíts[
tT∫
];

357 
fBlockBñ⁄gToTøöög
.
	`˛ór
();

358 
UI¡_t
 
i
=0 ; i < 
blockNum
 ; i++Ë
fBlockBñ⁄gToTøöög
.
	`push_back
(
kTRUE
);

360 
	`AµlyTøöögSëDivisi⁄
();

361 
	}
}

366 
	gTMVA
::
D©aSë
::
	$AµlyTøöögSëDivisi⁄
()

368 
I¡_t
 
tOrg
 = 
	`TªeIndex
(
Ty≥s
::
kTøöögOrigöÆ
), 
tT∫
 = TªeIndex(Ty≥s::
kTøöög
), 
tVld
 = TªeIndex(Ty≥s::
kVÆid©i⁄
);

369 
fEvítCﬁÀ˘i⁄
[
tT∫
].
	`˛ór
();

370 i‡(
fEvítCﬁÀ˘i⁄
[
tVld
].
	`size
()==0)

371 
fEvítCﬁÀ˘i⁄
[
tVld
].
	`ªsize
(fEvítCﬁÀ˘i⁄[
tOrg
].
	`size
());

372 
fEvítCﬁÀ˘i⁄
[
tVld
].
	`˛ór
();

375 
UI¡_t
 
i
=0; i<
fEvítCﬁÀ˘i⁄
[
tOrg
].
	`size
(); i++) {

376 i‡(
fBlockBñ⁄gToTøöög
[
i
 % fBlockBñ⁄gToTøöög.
	`size
()])

377 
fEvítCﬁÀ˘i⁄
[
tT∫
].
	`push_back
(fEvítCﬁÀ˘i⁄[
tOrg
][
i
]);

379 
fEvítCﬁÀ˘i⁄
[
tVld
].
	`push_back
(fEvítCﬁÀ˘i⁄[
tOrg
][
i
]);

381 
	}
}

386 
	gTMVA
::
D©aSë
::
	$MoveTøöögBlock
–
I¡_t
 
blockInd
,
Ty≥s
::
ETªeTy≥
 
de°
, 
Boﬁ_t
 
≠∂yCh™ges
 )

388 i‡(
de°
 =
Ty≥s
::
kVÆid©i⁄
)

389 
fBlockBñ⁄gToTøöög
[
blockInd
]=
kFALSE
;

391 
fBlockBñ⁄gToTøöög
[
blockInd
]=
kTRUE
;

392 i‡(
≠∂yCh™ges
Ë
	`AµlyTøöögSëDivisi⁄
();

393 
	}
}

398 
L⁄g64_t
 
	gTMVA
::
D©aSë
::
	$GëNEvtSigTe°
()

400  
	`GëNCœssEvíts
(
Ty≥s
::
kTe°ög
, 
fdsi
->
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
() );

401 
	}
}

406 
L⁄g64_t
 
	gTMVA
::
D©aSë
::
	$GëNEvtBkgdTe°
()

408  
	`GëNCœssEvíts
(
Ty≥s
::
kTe°ög
, 
fdsi
->
	`GëCœssInfo
("Background")->
	`GëNumbî
() );

409 
	}
}

414 
L⁄g64_t
 
	gTMVA
::
D©aSë
::
	$GëNEvtSigTøö
()

416  
	`GëNCœssEvíts
(
Ty≥s
::
kTøöög
, 
fdsi
->
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
() );

417 
	}
}

422 
L⁄g64_t
 
	gTMVA
::
D©aSë
::
	$GëNEvtBkgdTøö
()

424  
	`GëNCœssEvíts
(
Ty≥s
::
kTøöög
, 
fdsi
->
	`GëCœssInfo
("Background")->
	`GëNumbî
() );

425 
	}
}

430 
	gTMVA
::
D©aSë
::
	$InôSam∂ög
–
Flﬂt_t
 
‰a˘i⁄
, Flﬂt_à
weight
, 
UI¡_t
 
£ed
 )

433 i‡(
fSam∂ögR™dom
 =0 ) fSam∂ögR™dom = 
√w
 
	`TR™dom3
–
£ed
 );

436 
°d
::
ve˘‹
< std::
∑ú
< 
Flﬂt_t
, 
L⁄g64_t
 >* > 
evtLi°
;

437 
°d
::
ve˘‹
< std::
∑ú
< 
Flﬂt_t
, 
L⁄g64_t
 >* >::
ôî©‹
 
ô
;

439 
I¡_t
 
åìIdx
 = 
	`TªeIndex
–
	`GëCuºítTy≥
() );

441 i‡(
fSam∂ögEvítLi°
.
	`size
(Ë< 
	`UI¡_t
(
åìIdx
+1ËËfSam∂ögEvítLi°.
	`ªsize
(treeIdx+1);

442 i‡(
fSam∂ögSñe˘ed
.
	`size
(Ë< 
	`UI¡_t
(
åìIdx
+1ËËfSam∂ögSñe˘ed.
	`ªsize
(treeIdx+1);

444 
fSam∂ögEvítLi°
.
	`©
(
åìIdx
).
	`˛ór
();

445 
fSam∂ögSñe˘ed
.
	`©
(
åìIdx
).
	`˛ór
();

447 i‡(
fSam∂ög
.
	`size
(Ë< 
	`UI¡_t
(
åìIdx
+1ËËfSam∂ög.
	`ªsize
(treeIdx+1);

448 i‡(
fSam∂ögNEvíts
.
	`size
(Ë< 
	`UI¡_t
(
åìIdx
+1ËËfSam∂ögNEvíts.
	`ªsize
(treeIdx+1);

449 i‡(
fSam∂ögWeight
.
	`size
(Ë< 
	`UI¡_t
(
åìIdx
+1ËËfSam∂ögWeight.
	`ªsize
(treeIdx+1);

451 i‡(
‰a˘i⁄
 > 0.999999 || fraction < 0.0000001) {

452 
fSam∂ög
.
	`©
–
åìIdx
 ) = 
Ál£
;

453 
fSam∂ögNEvíts
.
	`©
–
åìIdx
 ) = 0;

454 
fSam∂ögWeight
.
	`©
–
åìIdx
 ) = 1.0;

459 
fSam∂ög
.
	`©
–
åìIdx
 ) = 
Ál£
;

461 
fSam∂ögNEvíts
.
	`©
–
åìIdx
 ) = 
	`I¡_t
(
‰a˘i⁄
*
	`GëNEvíts
());

462 
fSam∂ögWeight
.
	`©
–
åìIdx
 ) = 
weight
;

464 
L⁄g64_t
 
nEvts
 = 
	`GëNEvíts
();

465 
fSam∂ögEvítLi°
.
	`©
–
åìIdx
 ).
	`ª£rve
–
nEvts
 );

466 
fSam∂ögSñe˘ed
.
	`©
–
åìIdx
 ).
	`ª£rve
–
fSam∂ögNEvíts
.at(treeIdx) );

467 
L⁄g64_t
 
õvt
=0; ievt<
nEvts
; ievt++) {

468 
°d
::
∑ú
<
Flﬂt_t
,
L⁄g64_t
> 
	`p
(1.0,
õvt
);

469 
fSam∂ögEvítLi°
.
	`©
–
åìIdx
 ).
	`push_back
–
p
 );

473 
fSam∂ög
.
	`©
–
åìIdx
 ) = 
åue
;

474 
	}
}

480 
	gTMVA
::
D©aSë
::
	$Cª©eSam∂ög
() const

482 
I¡_t
 
åìIdx
 = 
	`TªeIndex
–
	`GëCuºítTy≥
() );

484 i‡(!
fSam∂ög
.
	`©
(
åìIdx
) ) ;

486 i‡(
fSam∂ögR™dom
 == 0 )

487 
	`Log
(Ë<< 
kFATAL
<< 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
())

488 << "nÿøndom gíî©‹Öª£¡ f‹ cª©ögáÑ™dom/imp‹èn˚ sam∂ög (öôülized?)" << 
Endl
;

491 
fSam∂ögSñe˘ed
.
	`©
(
åìIdx
).
	`˛ór
();

494 
°d
::
ve˘‹
< std::
∑ú
< 
Flﬂt_t
, 
L⁄g64_t
 > > 
evtLi°
;

495 
°d
::
ve˘‹
< std::
∑ú
< 
Flﬂt_t
, 
L⁄g64_t
 > >::
ôî©‹
 
evtLi°It
;

498 
Flﬂt_t
 
sumWeights
 = 0;

501 
evtLi°
.
	`assign
–
fSam∂ögEvítLi°
.
	`©
(
åìIdx
).
	`begö
(), fSam∂ögEvítLi°.©—ªeIdx).
	`íd
() );

504 
evtLi°It
 = 
evtLi°
.
	`begö
();ÉvtLi°Ià!evtLi°.
	`íd
();ÉvtListIt++) {

505 
sumWeights
 +(*
evtLi°It
).
fú°
;

507 
evtLi°It
 = 
evtLi°
.
	`begö
();

510 
°d
::
ve˘‹
< 
Flﬂt_t
 > 
∫ds
;

511 
∫ds
.
	`ª£rve
(
fSam∂ögNEvíts
.
	`©
(
åìIdx
));

513 
Flﬂt_t
 
pos
 = 0;

514 
I¡_t
 
i
 = 0; i < 
fSam∂ögNEvíts
.
	`©
(
åìIdx
); i++) {

515 
pos
 = 
fSam∂ögR™dom
->
	`Rndm
()*
sumWeights
;

516 
∫ds
.
	`push_back
–
pos
 );

520 
°d
::
	`s‹t
(
∫ds
.
	`begö
(),∫ds.
	`íd
());

523 
°d
::
ve˘‹
< 
Flﬂt_t
 >::
ôî©‹
 
∫dsIt
 = 
∫ds
.
	`begö
();

524 
Flﬂt_t
 
ru¬ögSum
 = 0.000000001;

525 
evtLi°It
 = 
evtLi°
.
	`begö
();ÉvtLi°Ià!evtLi°.
	`íd
();) {

526 
ru¬ögSum
 +(*
evtLi°It
).
fú°
;

527 i‡(
ru¬ögSum
 >(*
∫dsIt
)) {

528 
fSam∂ögSñe˘ed
.
	`©
(
åìIdx
).
	`push_back
–(*
evtLi°It
) );

529 
evtLi°It
 = 
evtLi°
.
	`îa£
(ÉvtListIt );

531 
∫dsIt
++;

532 i‡(
∫dsIt
 =
∫ds
.
	`íd
() ) ;

535 
evtLi°It
++;

538 
	}
}

544 
	gTMVA
::
D©aSë
::
	$EvítResu…
–
Boﬁ_t
 
suc˚ssful
, 
L⁄g64_t
 
evtNumbî
 )

547 i‡(!
fSam∂ög
.
	`©
(
fCuºítTªeIdx
)) ;

548 i‡(
fSam∂ögWeight
.
	`©
(
fCuºítTªeIdx
) > 0.99999999999) ;

550 
L⁄g64_t
 
°¨t
 = 0;

551 
L⁄g64_t
 
°›
 = 
fSam∂ögEvítLi°
.
	`©
(
fCuºítTªeIdx
).
	`size
() -1;

552 i‡(
evtNumbî
 >= 0) {

553 
°¨t
 = 
evtNumbî
;

554 
°›
 = 
evtNumbî
;

556  
L⁄g64_t
 
iEvt
 = 
°¨t
; iEvà<
°›
; iEvt++ ){

557 i‡(
	`L⁄g64_t
(
fSam∂ögEvítLi°
.
	`©
(
fCuºítTªeIdx
).
	`size
()Ë< 
iEvt
) {

558 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "evíànumbî (" << 
iEvt


560 << 
fSam∂ögEvítLi°
.
	`©
(
fCuºítTªeIdx
).
	`size
(Ë<< " o‡åì " << fCuºítTªeIdx << ")" << 
Endl
;

563 
Flﬂt_t
 
weight
 = 
fSam∂ögEvítLi°
.
	`©
(
fCuºítTªeIdx
).©–
iEvt
 ).
fú°
;

564 i‡(!
suc˚ssful
) {

566 
weight
 /
fSam∂ögWeight
.
	`©
(
fCuºítTªeIdx
);

567 i‡(
weight
 > 1.0 ) weight = 1.0;

571 
weight
 *
fSam∂ögWeight
.
	`©
(
fCuºítTªeIdx
);

573 
fSam∂ögEvítLi°
.
	`©
(
fCuºítTªeIdx
).©–
iEvt
 ).
fú°
 = 
weight
;

575 
	}
}

581 
TTªe
* 
	gTMVA
::
D©aSë
::
	$GëTªe
–
Ty≥s
::
ETªeTy≥
 
ty≥
 )

583 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "GëTªe(" << ( 
ty≥
==
Ty≥s
::
kTøöög
 ? "åaöög" : "ã°ög" ) << ")" << 
Endl
;

587 i‡(
ty≥
!=
Ty≥s
::
kTøöög
 &&Åy≥!=Ty≥s::
kTe°ög
)  0;

589 
Ty≥s
::
ETªeTy≥
 
ßvedTy≥
 = 
	`GëCuºítTy≥
();

591 
	`SëCuºítTy≥
(
ty≥
);

592 c⁄° 
UI¡_t
 
t
 = 
	`TªeIndex
(
ty≥
);

593 i‡(
fResu…s
.
	`size
(Ë<
t
) {

594 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "Nÿªsu…†f‹Åªëy≥ " << ( 
ty≥
==
Ty≥s
::
kTøöög
 ? "training" : "testing" )

595 << " found. Size=" << 
fResu…s
.
	`size
(Ë<< 
Endl
;

599 
TSåög
 
	`åìName
–(
ty≥
 =
Ty≥s
::
kTøöög
 ? "TrainTree" : "TestTree" ) );

600 
TTªe
 *
åì
 = 
√w
 
	`TTªe
(
åìName
,treeName);

602 
Flﬂt_t
 *
v¨VÆs
 = 
√w
 Flﬂt_t[
fdsi
->
	`GëNV¨übÀs
()];

603 
Flﬂt_t
 *
tgtVÆs
 = 
√w
 Flﬂt_t[
fdsi
->
	`GëNT¨gës
()];

604 
Flﬂt_t
 *
visVÆs
 = 
√w
 Flﬂt_t[
fdsi
->
	`GëNS≥˘©‹s
()];

606 
UI¡_t
 
˛s
;

607 
Flﬂt_t
 
weight
;

609 
˛assName
[40];

614 
Flﬂt_t
 **
mëVÆs
 = 
√w
 Flﬂt_t*[
fResu…s
.
	`©
(
t
).
	`size
()];

615 
UI¡_t
 
i
=0; i<
fResu…s
.
	`©
(
t
).
	`size
(); i++ )

616 
mëVÆs
[
i
] = 
√w
 
Flﬂt_t
[
fdsi
->
	`GëNT¨gës
()+fdsi->
	`GëNCœs£s
()];

619 
åì
->
	`Bønch
–"˛assID", &
˛s
, "classID/I" );

620 
åì
->
	`Bønch
–"˛assName", 
˛assName
, "className/C" );

623 
I¡_t
 
n
 = 0;

624 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
ôV¨s
 = 
fdsi
->
	`GëV¨übÀInfos
().
	`begö
();

625 
ôV¨s
 !
fdsi
->
	`GëV¨übÀInfos
().
	`íd
(); itVars++) {

628 
åì
->
	`Bønch
–(*
ôV¨s
).
	`GëI¡î«lName
(), &
v¨VÆs
[
n
], (*ôV¨s).GëI¡î«lName()+
	`TSåög
("/F") );

629 
n
++;

632 
n
 = 0;

633 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
ôTgts
 = 
fdsi
->
	`GëT¨gëInfos
().
	`begö
();

634 
ôTgts
 !
fdsi
->
	`GëT¨gëInfos
().
	`íd
(); itTgts++) {

636 
åì
->
	`Bønch
–(*
ôTgts
).
	`GëI¡î«lName
(), &
tgtVÆs
[
n
], (*ôTgts).GëI¡î«lName()+
	`TSåög
("/F") );

637 
n
++;

640 
n
 = 0;

641 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
ôVis
 = 
fdsi
->
	`GëS≥˘©‹Infos
().
	`begö
();

642 
ôVis
 !
fdsi
->
	`GëS≥˘©‹Infos
().
	`íd
(); itVis++) {

644 
åì
->
	`Bønch
–(*
ôVis
).
	`GëI¡î«lName
(), &
visVÆs
[
n
], (*ôVis).GëI¡î«lName()+
	`TSåög
("/F") );

645 
n
++;

648 
åì
->
	`Bønch
–"weight", &
weight
, "weight/F" );

651 
n
 = 0;

652 
°d
::
m≠
< 
TSåög
, 
Resu…s
* >::
ôî©‹
 
ôMëhod
 = 
fResu…s
.
	`©
(
t
).
	`begö
();

653 
ôMëhod
 !
fResu…s
.
	`©
(
t
).
	`íd
(); itMethod++) {

656 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "™Æysi†ty≥: " << (
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
()==
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

657 (
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
()==
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛ass" : "Cœssifiˇti⁄" )Ë<< 
Endl
;

659 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kCœssifiˇti⁄
) {

661 
åì
->
	`Bønch
–
ôMëhod
->
fú°
, &(
mëVÆs
[
n
][0]), itMethod->first + "/F" );

663 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kMu…i˛ass
) {

665 
TSåög
 
	`ÀafLi°
("");

666 
UI¡_t
 
iCls
 = 0; iCl†< 
fdsi
->
	`GëNCœs£s
(); iCls++) {

667 i‡(
iCls
 > 0Ë
ÀafLi°
.
	`Aµíd
( ":" );

668 
ÀafLi°
.
	`Aµíd
–
fdsi
->
	`GëCœssInfo
–
iCls
 )->
	`GëName
() );

669 
ÀafLi°
.
	`Aµíd
( "/F" );

671 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "ôMëhod->fú° " << 
ôMëhod
->
fú°
 << " LEAFLIST: "

672 << 
ÀafLi°
 << " itMëhod->£c⁄d " << 
ôMëhod
->
£c⁄d
 << 
Endl
;

673 
åì
->
	`Bønch
–
ôMëhod
->
fú°
, (
mëVÆs
[
n
]), 
ÀafLi°
 );

675 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kRegªssi⁄
) {

677 
TSåög
 
	`ÀafLi°
("");

678 
UI¡_t
 
iTgt
 = 0; iTgà< 
fdsi
->
	`GëNT¨gës
(); iTgt++) {

679 i‡(
iTgt
 > 0Ë
ÀafLi°
.
	`Aµíd
( ":" );

680 
ÀafLi°
.
	`Aµíd
–
fdsi
->
	`GëT¨gëInfo
–
iTgt
 ).
	`GëI¡î«lName
() );

682 
ÀafLi°
.
	`Aµíd
( "/F" );

684 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "ôMëhod->fú° " << 
ôMëhod
->
fú°
 << " LEAFLIST: "

685 << 
ÀafLi°
 << " itMëhod->£c⁄d " << 
ôMëhod
->
£c⁄d
 << 
Endl
;

686 
åì
->
	`Bønch
–
ôMëhod
->
fú°
, (
mëVÆs
[
n
]), 
ÀafLi°
 );

689 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
fdsi
->
	`GëName
()Ë<< "Unknow¿™Æysi†ty≥ f‹Ñesu… found whí wrôög Te°Tªe." << 
Endl
;

691 
n
++;

696 
L⁄g64_t
 
iEvt
 = 0; iEvà< 
	`GëNEvíts
–
ty≥
 ); iEvt++) {

698 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
–
iEvt
 );

700 
˛s
 = 
ev
->
	`GëCœss
();

701 
weight
 = 
ev
->
	`GëWeight
();

702 
	`°æ˝y
(
˛assName
, 
fdsi
->
	`GëCœssInfo
–
˛s
 )->
	`GëName
(), (className));

705 
UI¡_t
 
iv¨
 = 0; iv¨ < 
ev
->
	`GëNV¨übÀs
(); iv¨++Ë
v¨VÆs
[iv¨] =Év->
	`GëVÆue
( ivar );

706 
UI¡_t
 
ôgt
 = 0; itgà< 
ev
->
	`GëNT¨gës
(); itgt++Ë
tgtVÆs
[ôgt] =Év->
	`GëT¨gë
( itgt );

707 
UI¡_t
 
ivis
 = 0; ivi†< 
ev
->
	`GëNS≥˘©‹s
(); ivis++Ë
visVÆs
[ivis] =Év->
	`GëS≥˘©‹
( ivis );

711 
n
=0;

712 
°d
::
m≠
<
TSåög
, 
Resu…s
*>::
ôî©‹
 
ôMëhod
 = 
fResu…s
.
	`©
(
t
).
	`begö
();

713 
ôMëhod
 !
fResu…s
.
	`©
(
t
).
	`íd
(); itMethod++) {

714 
Resu…s
* 
ªsu…s
 = 
ôMëhod
->
£c⁄d
;

716 c⁄° 
°d
::
ve˘‹
< 
Flﬂt_t
 >& 
vÆs
 = 
ªsu…s
->
›î©‹
[](
iEvt
);

718 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kCœssifiˇti⁄
) {

720 
mëVÆs
[
n
][0] = 
vÆs
[0];

722 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kMu…i˛ass
) {

724 
UI¡_t
 
nCls
 = 0, 
nClsEnd
=
fdsi
->
	`GëNCœs£s
();ÇCls <ÇClsEnd;ÇCls++) {

725 
Flﬂt_t
 
vÆ
 = 
vÆs
.
	`©
(
nCls
);

726 
mëVÆs
[
n
][
nCls
] = 
vÆ
;

729 i‡(
ôMëhod
->
£c⁄d
->
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kRegªssi⁄
) {

731 
UI¡_t
 
nTgts
 = 0;ÇTgt†< 
fdsi
->
	`GëNT¨gës
();ÇTgts++) {

732 
Flﬂt_t
 
vÆ
 = 
vÆs
.
	`©
(
nTgts
);

733 
mëVÆs
[
n
][
nTgts
] = 
vÆ
;

736 
n
++;

739 
åì
->
	`Fûl
();

742 
	`Log
(Ë<< 
kHEADER


743 << "Cª©edÅªê'" << 
åì
->
	`GëName
(Ë<< "' wôh " <<Åªe->
	`GëE¡rõs
(Ë<< "Évíts" << 
Endl
 << Endl;

745 
	`SëCuºítTy≥
(
ßvedTy≥
);

747 
dñëe
[] 
v¨VÆs
;

748 
dñëe
[] 
tgtVÆs
;

749 
dñëe
[] 
visVÆs
;

751 
UI¡_t
 
i
=0; i<
fResu…s
.
	`©
(
t
).
	`size
(); i++ )

752 
dñëe
[] 
mëVÆs
[
i
];

753 
dñëe
[] 
mëVÆs
;

755  
åì
;

756 
	}
}

	@src/DataSetFactory.cxx

36 
	~<as£π.h
>

38 
	~<m≠
>

39 
	~<ve˘‹
>

40 
	~<iom™ù
>

41 
	~<io°ªam
>

43 
	~<Æg‹ôhm
>

44 
	~<fun˘i⁄Æ
>

45 
	~<numîic
>

47 
	~"TMVA/D©aSëFa˘‹y.h
"

49 
	~"TEvítLi°.h
"

50 
	~"TFûe.h
"

51 
	~"TH1.h
"

52 
	~"TH2.h
"

53 
	~"TProfûe.h
"

54 
	~"TR™dom3.h
"

55 
	~"TM©rixF.h
"

56 
	~"TVe˘‹F.h
"

57 
	~"TM©h.h
"

58 
	~"TROOT.h
"

60 
	~"TMVA/MsgLoggî.h
"

61 
	~"TMVA/C⁄figuøbÀ.h
"

62 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

63 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

64 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

65 
	~"TMVA/D©aSë.h
"

66 
	~"TMVA/D©aSëInfo.h
"

67 
	~"TMVA/D©aI≈utH™dÀr.h
"

68 
	~"TMVA/Evít.h
"

70 
	~"TMVA/Ty≥s.h
"

71 
	~"TMVA/V¨übÀInfo.h
"

73 
usög
 
«me•a˚
 
	g°d
;

77 
«me•a˚
 
	gTMVA
 {

80 
I¡_t
 
L¨ge°Comm⁄Dividî
(I¡_à
a
, I¡_à
b
)

82 i‡(
	ga
<
	gb
Ë{
I¡_t
 
	gtmp
 = 
a
;á=
b
; b=
tmp
; }

83 i‡(
	gb
==0Ë 
a
;

84 
I¡_t
 
	gfuŒFôs
 = 
a
/
b
;

85  
L¨ge°Comm⁄Dividî
(
b
,
a
-b*
fuŒFôs
);

93 
	gTMVA
::
D©aSëFa˘‹y
::
	$D©aSëFa˘‹y
() :

94 
	`fVîbo£
(
kFALSE
),

95 
	`fVîbo£Levñ
(
	`TSåög
("Info")),

96 
	`fSˇÀWôhPª£lEff
(0),

97 
	`fCuºítTªe
(0),

98 
	`fCuºítEvtIdx
(0),

99 
	`fI≈utF‹muœs
(0),

100 
	`fLoggî
–
√w
 
	`MsgLoggî
("D©aSëFa˘‹y", 
kINFO
) )

102 
	}
}

107 
	gTMVA
::
D©aSëFa˘‹y
::~
	$D©aSëFa˘‹y
()

109 
°d
::
ve˘‹
<
TTªeF‹muœ
*>::
c⁄°_ôî©‹
 
f‹mIt
;

111 
f‹mIt
 = 
fI≈utF‹muœs
.
	`begö
(Ë; f‹mIt!=fI≈utF‹muœs.
	`íd
(Ë; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

112 
f‹mIt
 = 
fT¨gëF‹muœs
.
	`begö
(Ë; f‹mIt!=fT¨gëF‹muœs.
	`íd
(Ë; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

113 
f‹mIt
 = 
fCutF‹muœs
.
	`begö
(Ë; f‹mIt!=fCutF‹muœs.
	`íd
(Ë; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

114 
f‹mIt
 = 
fWeightF‹muœ
.
	`begö
(Ë; f‹mIt!=fWeightF‹muœ.
	`íd
(Ë; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

115 
f‹mIt
 = 
fS≥˘©‹F‹muœs
.
	`begö
(); f‹mIt!=fS≥˘©‹F‹muœs.
	`íd
(); f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

117 
dñëe
 
fLoggî
;

118 
	}
}

123 
	gTMVA
::
D©aSë
* 
TMVA
::
D©aSëFa˘‹y
::
	$Cª©eD©aSë
–
TMVA
::
D©aSëInfo
& 
dsi
,

124 
TMVA
::
D©aI≈utH™dÀr
& 
d©aI≈ut
 )

127 
D©aSë
 * 
ds
 = 
	`BuûdInôülD©aSë
–
dsi
, 
d©aI≈ut
 );

129 i‡(
ds
->
	`GëNEvíts
() > 1) {

130 
	`CÆcMöMax
(
ds
,
dsi
);

133 
UI¡_t
 
˛
 = 0; cl< 
dsi
.
	`GëNCœs£s
(); cl++) {

134 c⁄° 
TSåög
 
˛assName
 = 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
();

135 
dsi
.
	`SëC‹ªœti⁄M©rix
–
˛assName
, 
	`CÆcC‹ªœti⁄M©rix
–
ds
, 
˛
 ) );

136 
dsi
.
	`PrötC‹ªœti⁄M©rix
–
˛assName
 );

139 
	`Log
(Ë<< 
kHEADER
 << 
	`F‹m
("[%s] : ",
dsi
.
	`GëName
()Ë<< " " << 
Endl
 << Endl;

142  
ds
;

143 
	}
}

147 
	gTMVA
::
D©aSë
* 
TMVA
::
D©aSëFa˘‹y
::
	$BuûdDy«micD©aSë
–
TMVA
::
D©aSëInfo
& 
dsi
 )

149 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Buûd D©aSë c⁄si°ög o‡⁄êEvíàwôh dy«miˇŒy ch™gög v¨übÀs" << 
Endl
;

150 
D©aSë
* 
ds
 = 
√w
 
	`D©aSë
(
dsi
);

154 if(
dsi
.
	`GëNCœs£s
()==0){

155 
dsi
.
	`AddCœss
( "data" );

156 
dsi
.
	`GëCœssInfo
–"d©a" )->
	`SëNumbî
(0);

159 
°d
::
ve˘‹
<
Flﬂt_t
*>* 
evdyn
 = 
√w
 std::vector<Float_t*>(0);

161 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨öfos
 = 
dsi
.
	`GëV¨übÀInfos
();

163 i‡(
v¨öfos
.
	`em±y
())

164 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Dy«mi¯d©®£àˇ¬Ÿ bêbuût, sö˚Çÿv¨übÀ inf‹m©i⁄†¨ê¥e£¡. Aµ¨íéyÇÿv¨übÀ†havêbì¿£t. Thi†shouldÇŸ h≠≥n,ÖÀa£ c⁄è˘ÅhêTMVAáuth‹s." << 
Endl
;

166 
°d
::
ve˘‹
<
V¨übÀInfo
>::
ôî©‹
 
ô
 = 
v¨öfos
.
	`begö
(), 
ôEnd
=v¨öfos.
	`íd
();

167 ;
ô
!=
ôEnd
;++it) {

168 
Flﬂt_t
* 
exã∫Æ
=(Flﬂt_t*)(*
ô
).
	`GëExã∫ÆLök
();

169 i‡(
exã∫Æ
==0)

170 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "ThêlökÅÿthêexã∫Æ v¨übÀ i†NULL whûêIámÅryögÅÿbuûdá dy«mi¯d©®£t. I¿thi†ˇ£ fTmpEvíà‰om MëhodBa£ HAS TO BE USED i¿thêmëhodÅÿgë u£fu»vÆue†ö v¨übÀs." << 
Endl
;

171 
evdyn
->
	`push_back
 (
exã∫Æ
);

174 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
•e˘©‹öfos
 = 
dsi
.
	`GëS≥˘©‹Infos
();

175 
ô
 = 
•e˘©‹öfos
.
	`begö
();

176 ;
ô
!=
•e˘©‹öfos
.
	`íd
();ô++Ë
evdyn
->
	`push_back
–(
Flﬂt_t
*)(*ô).
	`GëExã∫ÆLök
() );

178 
TMVA
::
Evít
 * 
ev
 = 
√w
 
	`Evít
((c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
*>*&)
evdyn
, 
v¨öfos
.
	`size
());

179 
°d
::
ve˘‹
<
Evít
*>* 
√wEvítVe˘‹
 = 
√w
 std::vector<Event*>;

180 
√wEvítVe˘‹
->
	`push_back
(
ev
);

182 
ds
->
	`SëEvítCﬁÀ˘i⁄
(
√wEvítVe˘‹
, 
Ty≥s
::
kTøöög
);

183 
ds
->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

184 
ds
->
	`SëCuºítEvít
( 0 );

186 
dñëe
 
√wEvítVe˘‹
;

187  
ds
;

188 
	}
}

194 
	gTMVA
::
D©aSë
*

195 
TMVA
::
D©aSëFa˘‹y
::
	$BuûdInôülD©aSë
–
D©aSëInfo
& 
dsi
,

196 
D©aI≈utH™dÀr
& 
d©aI≈ut
 )

198 i‡(
d©aI≈ut
.
	`GëE¡rõs
()==0Ë 
	`BuûdDy«micD©aSë
–
dsi
 );

203 
°d
::
ve˘‹
< 
TSåög
 >* 
˛assLi°
 = 
d©aI≈ut
.
	`GëCœssLi°
();

204 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ô
 = 
˛assLi°
->
	`begö
(); it< cœssLi°->
	`íd
(); it++) {

205 
dsi
.
	`AddCœss
–(*
ô
) );

207 
dñëe
 
˛assLi°
;

209 
EvtSètsPîCœss
 
	`evítCou¡s
(
dsi
.
	`GëNCœs£s
());

210 
TSåög
 
n‹mMode
;

211 
TSåög
 
•lôMode
;

212 
TSåög
 
mixMode
;

213 
UI¡_t
 
•lôSìd
;

215 
	`InôO±i⁄s
–
dsi
, 
evítCou¡s
, 
n‹mMode
, 
•lôSìd
, 
•lôMode
 , 
mixMode
 );

217 
EvítVe˘‹OfCœs£sOfTªeTy≥
 
tmpEvítVe˘‹
;

218 
	`BuûdEvítVe˘‹
–
dsi
, 
d©aI≈ut
, 
tmpEvítVe˘‹
, 
evítCou¡s
 );

220 
D©aSë
* 
ds
 = 
	`MixEvíts
–
dsi
, 
tmpEvítVe˘‹
, 
evítCou¡s
,

221 
•lôMode
, 
mixMode
, 
n‹mMode
, 
•lôSìd
 );

223 c⁄° 
Boﬁ_t
 
showCﬁÀ˘edOuçut
 = 
kFALSE
;

224 i‡(
showCﬁÀ˘edOuçut
) {

225 
I¡_t
 
maxL
 = 
dsi
.
	`GëCœssNameMaxLígth
();

226 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "CﬁÀ˘ed:" << 
Endl
;

227 
UI¡_t
 
˛
 = 0; c»< 
dsi
.
	`GëNCœs£s
(); cl++) {

228 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()) << " "

229 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

230 << "ÅøöögÉ¡rõs: " << 
ds
->
	`GëNCœssEvíts
–0, 
˛
 ) << 
Endl
;

231 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()) << " "

232 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

233 << "Åe°ögÉ¡rõs: " << 
ds
->
	`GëNCœssEvíts
–1, 
˛
 ) << 
Endl
;

235 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " " << 
Endl
;

238  
ds
;

239 
	}
}

244 
Boﬁ_t
 
	gTMVA
::
D©aSëFa˘‹y
::
	$CheckTTªeF‹muœ
–
TTªeF‹muœ
* 
âf
,

245 c⁄° 
TSåög
& 
ex¥essi⁄
,

246 
Boﬁ_t
& 
hasDﬁœr
 )

248 
Boﬁ_t
 
w‹ked
 = 
kTRUE
;

250 if–
âf
->
	`GëNdim
() <= 0 )

251 
	`Log
(Ë<< 
kFATAL
 << "Ex¥essi⁄ " << 
ex¥essi⁄
.
	`D©a
()

252 << " couldÇŸ bêªsﬁvedÅÿ®vÆid f‹muœ. " << 
Endl
;

253 if–
âf
->
	`GëNd©a
() == 0 ){

254 
	`Log
(Ë<< 
kWARNING
 << "Ex¥essi⁄: " << 
ex¥essi⁄
.
	`D©a
()

258 << "”.g.áº[4] whíáº ha†⁄ly 3ÉÀmíts)." << 
Endl
;

259 
	`Log
(Ë<< 
kWARNING
 << "If you wantÅoÅakeÅheÉvent intoáccount you can do somethingÜike: "

261 << " 0 i†èkíá†™á…î«tive." << 
Endl
;

262 
w‹ked
 = 
kFALSE
;

264 if–
ex¥essi⁄
.
	`C⁄èös
("$") )

265 
hasDﬁœr
 = 
kTRUE
;

268 
i
 = 0, 
iEnd
 = 
âf
->
	`GëNcodes
 (); i < iEnd; ++i)

270 
TLóf
* 
Àaf
 = 
âf
->
	`GëLóf
 (
i
);

271 i‡(!
Àaf
->
	`IsOnTîmöÆBønch
())

272 
hasDﬁœr
 = 
kTRUE
;

275  
w‹ked
;

276 
	}
}

286 
	gTMVA
::
D©aSëFa˘‹y
::
	$Ch™geToNewTªe
–
TªeInfo
& 
töfo
, c⁄° 
D©aSëInfo
 & 
dsi
 )

288 
TTªe
 *
å
 = 
töfo
.
	`GëTªe
()->GetTree();

290 
å
->
	`SëBønchSètus
("*",1);

292 
Boﬁ_t
 
hasDﬁœr
 = 
kFALSE
;

295 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "å™sf‹m i≈uàv¨übÀs" << 
Endl
;

296 
°d
::
ve˘‹
<
TTªeF‹muœ
*>::
c⁄°_ôî©‹
 
f‹mIt
, 
f‹mItEnd
;

297 
f‹mIt
 = 
fI≈utF‹muœs
.
	`begö
(), 
f‹mItEnd
=fI≈utF‹muœs.
	`íd
(); f‹mIt!=f‹mItEnd; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

298 
fI≈utF‹muœs
.
	`˛ór
();

299 
TTªeF‹muœ
* 
âf
 = 0;

301 
UI¡_t
 
i
=0; i<
dsi
.
	`GëNV¨übÀs
(); i++) {

302 
âf
 = 
√w
 
	`TTªeF‹muœ
–
	`F‹m
–"F‹muœ%s", 
dsi
.
	`GëV¨übÀInfo
(
i
).
	`GëI¡î«lName
().
	`D©a
() ),

303 
dsi
.
	`GëV¨übÀInfo
(
i
).
	`GëEx¥essi⁄
().
	`D©a
(), 
å
 );

304 
	`CheckTTªeF‹muœ
–
âf
, 
dsi
.
	`GëV¨übÀInfo
(
i
).
	`GëEx¥essi⁄
(), 
hasDﬁœr
 );

305 
fI≈utF‹muœs
.
	`push_back
–
âf
 );

311 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "å™sf‹mÑegªssi⁄Å¨gës" << 
Endl
;

312 
f‹mIt
 = 
fT¨gëF‹muœs
.
	`begö
(), 
f‹mItEnd
 = fT¨gëF‹muœs.
	`íd
(); f‹mIt!=f‹mItEnd; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

313 
fT¨gëF‹muœs
.
	`˛ór
();

314 
UI¡_t
 
i
=0; i<
dsi
.
	`GëNT¨gës
(); i++) {

315 
âf
 = 
√w
 
	`TTªeF‹muœ
–
	`F‹m
–"F‹muœ%s", 
dsi
.
	`GëT¨gëInfo
(
i
).
	`GëI¡î«lName
().
	`D©a
() ),

316 
dsi
.
	`GëT¨gëInfo
(
i
).
	`GëEx¥essi⁄
().
	`D©a
(), 
å
 );

317 
	`CheckTTªeF‹muœ
–
âf
, 
dsi
.
	`GëT¨gëInfo
(
i
).
	`GëEx¥essi⁄
(), 
hasDﬁœr
 );

318 
fT¨gëF‹muœs
.
	`push_back
–
âf
 );

324 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "å™sf‹m s≥˘©‹ v¨übÀs" << 
Endl
;

325 
f‹mIt
 = 
fS≥˘©‹F‹muœs
.
	`begö
(), 
f‹mItEnd
 = fS≥˘©‹F‹muœs.
	`íd
(); f‹mIt!=f‹mItEnd; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

326 
fS≥˘©‹F‹muœs
.
	`˛ór
();

327 
UI¡_t
 
i
=0; i<
dsi
.
	`GëNS≥˘©‹s
(); i++) {

328 
âf
 = 
√w
 
	`TTªeF‹muœ
–
	`F‹m
–"F‹muœ%s", 
dsi
.
	`GëS≥˘©‹Info
(
i
).
	`GëI¡î«lName
().
	`D©a
() ),

329 
dsi
.
	`GëS≥˘©‹Info
(
i
).
	`GëEx¥essi⁄
().
	`D©a
(), 
å
 );

330 
	`CheckTTªeF‹muœ
–
âf
, 
dsi
.
	`GëS≥˘©‹Info
(
i
).
	`GëEx¥essi⁄
(), 
hasDﬁœr
 );

331 
fS≥˘©‹F‹muœs
.
	`push_back
–
âf
 );

337 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "å™sf‹m cuts" << 
Endl
;

338 
f‹mIt
 = 
fCutF‹muœs
.
	`begö
(), 
f‹mItEnd
 = fCutF‹muœs.
	`íd
(); f‹mIt!=f‹mItEnd; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

339 
fCutF‹muœs
.
	`˛ór
();

340 
UI¡_t
 
˛Idx
=0; clIdx<
dsi
.
	`GëNCœs£s
(); clIdx++) {

341 c⁄° 
TCut
& 
tmpCut
 = 
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëCut
();

342 c⁄° 
TSåög
 
	`tmpCutExp
(
tmpCut
.
	`GëTôÀ
());

343 
âf
 = 0;

344 i‡(
tmpCutExp
!="") {

345 
âf
 = 
√w
 
	`TTªeF‹muœ
–
	`F‹m
("CutCœss%i",
˛Idx
), 
tmpCutExp
, 
å
 );

346 
Boﬁ_t
 
w‹ked
 = 
	`CheckTTªeF‹muœ
–
âf
, 
tmpCutExp
, 
hasDﬁœr
 );

347 if–!
w‹ked
 ){

348 
	`Log
(Ë<< 
kWARNING
 << "PÀa£ check cœs†\"" << 
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëName
()

349 << "\" cuà\"" << 
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëCut
(Ë<< 
Endl
;

352 
fCutF‹muœs
.
	`push_back
–
âf
 );

358 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "å™sf‹m weights" << 
Endl
;

359 
f‹mIt
 = 
fWeightF‹muœ
.
	`begö
(), 
f‹mItEnd
 = fWeightF‹muœ.
	`íd
(); f‹mIt!=f‹mItEnd; f‹mIt++Ëi‡(*f‹mItË
dñëe
 *formIt;

360 
fWeightF‹muœ
.
	`˛ór
();

361 
UI¡_t
 
˛Idx
=0; clIdx<
dsi
.
	`GëNCœs£s
(); clIdx++) {

362 c⁄° 
TSåög
 
tmpWeight
 = 
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëWeight
();

364 i‡(
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëName
(Ë!
töfo
.
	`GëCœssName
() ) {

365 
fWeightF‹muœ
.
	`push_back
( 0 );

369 
âf
 = 0;

370 i‡(
tmpWeight
!="") {

371 
âf
 = 
√w
 
	`TTªeF‹muœ
–"F‹muœWeight", 
tmpWeight
, 
å
 );

372 
Boﬁ_t
 
w‹ked
 = 
	`CheckTTªeF‹muœ
–
âf
, 
tmpWeight
, 
hasDﬁœr
 );

373 if–!
w‹ked
 ){

374 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "PÀa£ check cœs†\"" << dsi.
	`GëCœssInfo
(
˛Idx
)->GetName()

375 << "\" weighà\"" << 
dsi
.
	`GëCœssInfo
(
˛Idx
)->
	`GëWeight
(Ë<< 
Endl
;

379 
âf
 = 0;

381 
fWeightF‹muœ
.
	`push_back
–
âf
 );

383 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches" << 
Endl
;

386 i‡(!
hasDﬁœr
) {

387 
å
->
	`SëBønchSètus
("*",0);

388 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches: i≈uàv¨übÀs" << 
Endl
;

390 
f‹mIt
 = 
fI≈utF‹muœs
.
	`begö
(); f‹mIt!=fI≈utF‹muœs.
	`íd
(); formIt++) {

391 
âf
 = *
f‹mIt
;

392 
I¡_t
 
bi
 = 0; bi<
âf
->
	`GëNcodes
(); bi++) {

393 
å
->
	`SëBønchSètus
–
âf
->
	`GëLóf
(
bi
)->
	`GëBønch
()->
	`GëName
(), 1 );

397 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches:Å¨gës" << 
Endl
;

398 
f‹mIt
 = 
fT¨gëF‹muœs
.
	`begö
(); f‹mIt!=fT¨gëF‹muœs.
	`íd
(); formIt++) {

399 
âf
 = *
f‹mIt
;

400 
I¡_t
 
bi
 = 0; bi<
âf
->
	`GëNcodes
(); bi++)

401 
å
->
	`SëBønchSètus
–
âf
->
	`GëLóf
(
bi
)->
	`GëBønch
()->
	`GëName
(), 1 );

404 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches: s≥˘©‹s" << 
Endl
;

405 
f‹mIt
 = 
fS≥˘©‹F‹muœs
.
	`begö
(); f‹mIt!=fS≥˘©‹F‹muœs.
	`íd
(); formIt++) {

406 
âf
 = *
f‹mIt
;

407 
I¡_t
 
bi
 = 0; bi<
âf
->
	`GëNcodes
(); bi++)

408 
å
->
	`SëBønchSètus
–
âf
->
	`GëLóf
(
bi
)->
	`GëBønch
()->
	`GëName
(), 1 );

411 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches: cuts" << 
Endl
;

412 
f‹mIt
 = 
fCutF‹muœs
.
	`begö
(); f‹mIt!=fCutF‹muœs.
	`íd
(); formIt++) {

413 
âf
 = *
f‹mIt
;

414 i‡(!
âf
) ;

415 
I¡_t
 
bi
 = 0; bi<
âf
->
	`GëNcodes
(); bi++)

416 
å
->
	`SëBønchSètus
–
âf
->
	`GëLóf
(
bi
)->
	`GëBønch
()->
	`GëName
(), 1 );

419 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "íabÀ bønches: weights" << 
Endl
;

420 
f‹mIt
 = 
fWeightF‹muœ
.
	`begö
(); f‹mIt!=fWeightF‹muœ.
	`íd
(); formIt++) {

421 
âf
 = *
f‹mIt
;

422 i‡(!
âf
) ;

423 
I¡_t
 
bi
 = 0; bi<
âf
->
	`GëNcodes
(); bi++)

424 
å
->
	`SëBønchSètus
–
âf
->
	`GëLóf
(
bi
)->
	`GëBønch
()->
	`GëName
(), 1 );

427 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "åì inôülized" << 
Endl
;

429 
	}
}

434 
	gTMVA
::
D©aSëFa˘‹y
::
	$CÆcMöMax
–
D©aSë
* 
ds
, 
TMVA
::
D©aSëInfo
& 
dsi
 )

436 c⁄° 
UI¡_t
 
nv¨
 = 
ds
->
	`GëNV¨übÀs
();

437 c⁄° 
UI¡_t
 
¡gts
 = 
ds
->
	`GëNT¨gës
();

438 c⁄° 
UI¡_t
 
nvis
 = 
ds
->
	`GëNS≥˘©‹s
();

440 
Flﬂt_t
 *
mö
 = 
√w
 Flﬂt_t[
nv¨
];

441 
Flﬂt_t
 *
max
 = 
√w
 Flﬂt_t[
nv¨
];

442 
Flﬂt_t
 *
tgmö
 = 
√w
 Flﬂt_t[
¡gts
];

443 
Flﬂt_t
 *
tgmax
 = 
√w
 Flﬂt_t[
¡gts
];

444 
Flﬂt_t
 *
vmö
 = 
√w
 Flﬂt_t[
nvis
];

445 
Flﬂt_t
 *
vmax
 = 
√w
 Flﬂt_t[
nvis
];

447 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
 ; iv¨++Ë{ 
mö
[iv¨] = 
FLT_MAX
; 
max
[ivar] = -FLT_MAX; }

448 
UI¡_t
 
iv¨
=0; iv¨<
¡gts
; iv¨++Ë{ 
tgmö
[iv¨] = 
FLT_MAX
; 
tgmax
[ivar] = -FLT_MAX; }

449 
UI¡_t
 
iv¨
=0; iv¨<
nvis
; iv¨++Ë{ 
vmö
[iv¨] = 
FLT_MAX
; 
vmax
[ivar] = -FLT_MAX; }

453 
I¡_t
 
i
=0; i<
ds
->
	`GëNEvíts
(); i++) {

454 c⁄° 
Evít
 * 
ev
 = 
ds
->
	`GëEvít
(
i
);

455 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

456 
DoubÀ_t
 
v
 = 
ev
->
	`GëVÆue
(
iv¨
);

457 i‡(
v
<
mö
[
iv¨
]) min[ivar] = v;

458 i‡(
v
>
max
[
iv¨
]) max[ivar] = v;

460 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++) {

461 
DoubÀ_t
 
v
 = 
ev
->
	`GëT¨gë
(
ôgt
);

462 i‡(
v
<
tgmö
[
ôgt
])Ågmin[itgt] = v;

463 i‡(
v
>
tgmax
[
ôgt
])Ågmax[itgt] = v;

465 
UI¡_t
 
ivis
=0; ivis<
nvis
; ivis++) {

466 
DoubÀ_t
 
v
 = 
ev
->
	`GëS≥˘©‹
(
ivis
);

467 i‡(
v
<
vmö
[
ivis
]) vmin[ivis] = v;

468 i‡(
v
>
vmax
[
ivis
]) vmax[ivis] = v;

472 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

473 
dsi
.
	`GëV¨übÀInfo
(
iv¨
).
	`SëMö
(
mö
[ivar]);

474 
dsi
.
	`GëV¨übÀInfo
(
iv¨
).
	`SëMax
(
max
[ivar]);

475 if–
TM©h
::
	`Abs
(
max
[
iv¨
]-
mö
[iv¨]Ë<
FLT_MIN
 )

476 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "V¨übÀ " << dsi.
	`GëV¨übÀInfo
(
iv¨
).
	`GëEx¥essi⁄
().
	`D©a
(Ë<< " i†c⁄°™t. PÀa£Ñemovêthêv¨übÀ." << 
Endl
;

478 
UI¡_t
 
iv¨
=0; iv¨<
¡gts
; ivar++) {

479 
dsi
.
	`GëT¨gëInfo
(
iv¨
).
	`SëMö
(
tgmö
[ivar]);

480 
dsi
.
	`GëT¨gëInfo
(
iv¨
).
	`SëMax
(
tgmax
[ivar]);

481 if–
TM©h
::
	`Abs
(
tgmax
[
iv¨
]-
tgmö
[iv¨]Ë<
FLT_MIN
 )

482 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "T¨gë " << dsi.
	`GëT¨gëInfo
(
iv¨
).
	`GëEx¥essi⁄
().
	`D©a
(Ë<< " i†c⁄°™t. PÀa£Ñemovêthêv¨übÀ." << 
Endl
;

484 
UI¡_t
 
iv¨
=0; iv¨<
nvis
; ivar++) {

485 
dsi
.
	`GëS≥˘©‹Info
(
iv¨
).
	`SëMö
(
vmö
[ivar]);

486 
dsi
.
	`GëS≥˘©‹Info
(
iv¨
).
	`SëMax
(
vmax
[ivar]);

490 
dñëe
 [] 
mö
;

491 
dñëe
 [] 
max
;

492 
dñëe
 [] 
tgmö
;

493 
dñëe
 [] 
tgmax
;

494 
dñëe
 [] 
vmö
;

495 
dñëe
 [] 
vmax
;

496 
	}
}

503 
TM©rixD
* 
	gTMVA
::
D©aSëFa˘‹y
::
	$CÆcC‹ªœti⁄M©rix
–
D©aSë
* 
ds
, c⁄° 
UI¡_t
 
˛assNumbî
 )

506 
TM©rixD
* 
m©
 = 
	`CÆcCov¨ün˚M©rix
–
ds
, 
˛assNumbî
 );

509 
UI¡_t
 
nv¨
 = 
ds
->
	`GëNV¨übÀs
(), 
iv¨
, 
jv¨
;

511 
iv¨
=0; iv¨<
nv¨
; ivar++) {

512 
jv¨
=0; jv¨<
nv¨
; jvar++) {

513 i‡(
iv¨
 !
jv¨
) {

514 
DoubÀ_t
 
d
 = (*
m©
)(
iv¨
, iv¨)*(*m©)(
jv¨
, jvar);

515 i‡(
d
 > 0Ë(*
m©
)(
iv¨
, 
jv¨
Ë/
	`sqπ
(d);

517 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
	`D©aSëInfo
().
	`GëName
())<< "<GetCorrelationMatrix> Zero variances for variables "

518 << "(" << 
iv¨
 << ", " << 
jv¨
 << "Ë" << 
d


519 << 
Endl
;

520 (*
m©
)(
iv¨
, 
jv¨
) = 0;

526 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë(*
m©
)(ivar, ivar) = 1.0;

528  
m©
;

529 
	}
}

534 
TM©rixD
* 
	gTMVA
::
D©aSëFa˘‹y
::
	$CÆcCov¨ün˚M©rix
–
D©aSë
 * 
ds
, c⁄° 
UI¡_t
 
˛assNumbî
 )

536 
UI¡_t
 
nv¨
 = 
ds
->
	`GëNV¨übÀs
();

537 
UI¡_t
 
iv¨
 = 0, 
jv¨
 = 0;

539 
TM©rixD
* 
m©
 = 
√w
 
	`TM©rixD
–
nv¨
,Çvar );

542 
TVe˘‹D
 
	`vec
(
nv¨
);

543 
TM©rixD
 
	`m©2
(
nv¨
,Çvar);

544 
iv¨
=0; iv¨<
nv¨
; ivar++) {

545 
	`vec
(
iv¨
) = 0;

546 
jv¨
=0; jv¨<
nv¨
; jv¨++Ë
	`m©2
(
iv¨
, jvar) = 0;

550 
DoubÀ_t
 
ic
 = 0;

551 
I¡_t
 
i
=0; i<
ds
->
	`GëNEvíts
(); i++) {

553 c⁄° 
Evít
 * 
ev
 = 
ds
->
	`GëEvít
(
i
);

554 i‡(
ev
->
	`GëCœss
(Ë!
˛assNumbî
 ) ;

556 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

557 
ic
 +
weight
;

559 
iv¨
=0; iv¨<
nv¨
; ivar++) {

561 
DoubÀ_t
 
xi
 = 
ev
->
	`GëVÆue
(
iv¨
);

562 
	`vec
(
iv¨
Ë+
xi
*
weight
;

563 
	`m©2
(
iv¨
, iv¨Ë+(
xi
*xi*
weight
);

565 
jv¨
=
iv¨
+1; jv¨<
nv¨
; jvar++) {

566 
DoubÀ_t
 
xj
 = 
ev
->
	`GëVÆue
(
jv¨
);

567 
	`m©2
(
iv¨
, 
jv¨
Ë+(
xi
*
xj
*
weight
);

572 
iv¨
=0; iv¨<
nv¨
; ivar++)

573 
jv¨
=
iv¨
+1; jv¨<
nv¨
; jvar++)

574 
	`m©2
(
jv¨
, 
iv¨
) = mat2(ivar, jvar);

578 
iv¨
=0; iv¨<
nv¨
; ivar++) {

579 
jv¨
=0; jv¨<
nv¨
; jvar++) {

580 (*
m©
)(
iv¨
, 
jv¨
Ë
	`m©2
(iv¨, jv¨)/
ic
 - 
	`vec
(ivar)*vec(jvar)/(ic*ic);

584  
m©
;

585 
	}
}

593 
	gTMVA
::
D©aSëFa˘‹y
::
	$InôO±i⁄s
–
TMVA
::
D©aSëInfo
& 
dsi
,

594 
EvtSètsPîCœss
& 
nEvítReque°s
,

595 
TSåög
& 
n‹mMode
,

596 
UI¡_t
& 
•lôSìd
,

597 
TSåög
& 
•lôMode
,

598 
TSåög
& 
mixMode
)

600 
C⁄figuøbÀ
 
	`•lôS≥cs
–
dsi
.
	`GëS∂ôO±i⁄s
() );

601 
•lôS≥cs
.
	`SëC⁄figName
("DataSetFactory");

602 
•lôS≥cs
.
	`SëC⁄figDes¸ùti⁄
( "Configuration options given inÅhe \"PrepareForTrainingAndTesting\" call;Åhese options defineÅhe creation ofÅhe data sets used forÅrainingándÉxpert validation by TMVA" );

604 
•lôMode
 = "Random";

605 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
•lôMode
, "SplitMode",

607 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Random"));

608 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Alternate"));

609 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Block"));

611 
mixMode
 = "SameAsSplitMode";

612 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
mixMode
, "MixMode",

614 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("SameAsSplitMode"));

615 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Random"));

616 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Alternate"));

617 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Block"));

619 
•lôSìd
 = 100;

620 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
•lôSìd
, "SplitSeed",

623 
n‹mMode
 = "EqualNumEvents";

624 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
n‹mMode
, "NormMode",

626 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("None"));

627 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("NumEvents"));

628 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("EqualNumEvents"));

630 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
(
fSˇÀWôhPª£lEff
=
kFALSE
,"ScaleWithPreselEff","ScaleÅheÇumber ofÑequestedÉvents byÅheÉff. ofÅheÖreselection cuts (orÇot)" );

635 
UI¡_t
 
˛
 = 0; c»< 
dsi
.
	`GëNCœs£s
(); cl++) {

636 
TSåög
 
˛Name
 = 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
();

637 
TSåög
 
tôÀTøö
 = 
	`TSåög
().
	`F‹m©
("Numbî o‡åaöögÉvít†o‡˛as†%†(deÁu…: 0 =áŒ)",
˛Name
.
	`D©a
()).Data();

638 
TSåög
 
tôÀTe°
 = 
	`TSåög
().
	`F‹m©
("Numbî o‡ã°Évít†o‡˛as†%†(deÁu…: 0 =áŒ)",
˛Name
.
	`D©a
()).Data();

639 
TSåög
 
tôÀS∂ô
 = 
	`TSåög
().
	`F‹m©
("S∂ô i¿åaöögándÅe°Évít†o‡˛as†%†(deÁu…: 0 = dó˘iv©ed)",
˛Name
.
	`D©a
()).Data();

641 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
nEvítReque°s
.
	`©
(
˛
).
nTøöögEvítsReque°ed
, 
	`TSåög
("nTøö_")+
˛Name
, 
tôÀTøö
 );

642 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
nEvítReque°s
.
	`©
(
˛
).
nTe°ögEvítsReque°ed
 , 
	`TSåög
("nTe°_")+
˛Name
 , 
tôÀTe°
 );

643 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
nEvítReque°s
.
	`©
(
˛
).
TøöTe°S∂ôReque°ed
 , 
	`TSåög
("TøöTe°S∂ô_")+
˛Name
 , 
tôÀTe°
 );

646 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
fVîbo£
, "V", "Verbosity (default:Årue)" );

648 
•lôS≥cs
.
	`De˛¨eO±i⁄Ref
–
fVîbo£Levñ
=
	`TSåög
("Info"), "VerboseLevel", "VerboseLevel (Debug/Verbose/Info)" );

649 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Debug"));

650 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Verbose"));

651 
•lôS≥cs
.
	`AddPªDefVÆ
(
	`TSåög
("Info"));

653 
•lôS≥cs
.
	`P¨£O±i⁄s
();

654 
•lôS≥cs
.
	`CheckF‹Unu£dO±i⁄s
();

657 i‡(
	`Vîbo£
()Ë
fLoggî
->
	`SëMöTy≥
–
kVERBOSE
 );

658 i‡(
fVîbo£Levñ
.
	`Com∑ªTo
("Debug"Ë==0Ë
fLoggî
->
	`SëMöTy≥
–
kDEBUG
 );

659 i‡(
fVîbo£Levñ
.
	`Com∑ªTo
("Vîbo£"Ë==0Ë
fLoggî
->
	`SëMöTy≥
–
kVERBOSE
 );

660 i‡(
fVîbo£Levñ
.
	`Com∑ªTo
("Info"Ë==0Ë
fLoggî
->
	`SëMöTy≥
–
kINFO
 );

663 
•lôMode
.
	`ToUµî
(); 
mixMode
.ToUµî(); 
n‹mMode
.ToUpper();

665 
	`Log
(Ë<< 
kDEBUG


666 << "\tS∂ômodêis: \"" << 
•lôMode
 << "\"Åhêmixmodêis: \"" << 
mixMode
 << "\"" << 
Endl
;

667 i‡(
mixMode
=="SAMEASSPLITMODE"ËmixModê
•lôMode
;

668 i‡(
mixMode
!=
•lôMode
)

669 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "D©aSë s∂ômode="<<
•lôMode


670 <<" dif„r†‰om mixmode="<<
mixMode
<<
Endl
;

671 
	}
}

678 
	gTMVA
::
D©aSëFa˘‹y
::
	$BuûdEvítVe˘‹
–
TMVA
::
D©aSëInfo
& 
dsi
,

679 
TMVA
::
D©aI≈utH™dÀr
& 
d©aI≈ut
,

680 
EvítVe˘‹OfCœs£sOfTªeTy≥
& 
evítsm≠
,

681 
EvtSètsPîCœss
& 
evítCou¡s
)

683 c⁄° 
UI¡_t
 
n˛as£s
 = 
dsi
.
	`GëNCœs£s
();

685 
evítsm≠
[ 
Ty≥s
::
kTøöög
 ] = 
	`EvítVe˘‹OfCœs£s
(
n˛as£s
);

686 
evítsm≠
[ 
Ty≥s
::
kTe°ög
 ] = 
	`EvítVe˘‹OfCœs£s
(
n˛as£s
);

687 
evítsm≠
[ 
Ty≥s
::
kMaxTªeTy≥
 ] = 
	`EvítVe˘‹OfCœs£s
(
n˛as£s
);

690 c⁄° 
UI¡_t
 
nv¨s
 = 
dsi
.
	`GëNV¨übÀs
();

691 c⁄° 
UI¡_t
 
¡gts
 = 
dsi
.
	`GëNT¨gës
();

692 c⁄° 
UI¡_t
 
nvis
 = 
dsi
.
	`GëNS≥˘©‹s
();

694 
size_t
 
i
=0; i<
n˛as£s
; i++) {

695 
evítCou¡s
[
i
].
v¨AvLígth
 = 
√w
 
Flﬂt_t
[
nv¨s
];

696 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++)

697 
evítCou¡s
[
i
].
v¨AvLígth
[
iv¨
] = 0;

701 
Boﬁ_t
 *
v¨IsAºay
 = 
√w
 Boﬁ_t[
nv¨s
];

707 
°d
::
m≠
<
TSåög
, > 
«nInfW¨nögs
;

708 
°d
::
m≠
<
TSåög
, > 
«nInfEº‹s
;

712 
UI¡_t
 
˛
=0; cl<
n˛as£s
; cl++) {

716 
EvítSèts
& 
˛assEvítCou¡s
 = 
evítCou¡s
[
˛
];

719 
	`Log
(Ë<< 
kDEBUG


720 << "\tWeighàex¥essi⁄ f‹ cœs†\'" << 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
() << "\': \""

721 << 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëWeight
(Ë<< "\"" << 
Endl
;

724 
TSåög
 
	`cuºítFûeName
("");

726 
°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
	`åìIt
(
d©aI≈ut
.
	`begö
(
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()));

727 ;
åìIt
!=
d©aI≈ut
.
	`íd
(
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
());ÅreeIt++) {

730 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`v¨s
(
nv¨s
);

731 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`tgts
(
¡gts
);

732 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`vis
(
nvis
);

733 
TªeInfo
 
cuºítInfo
 = *
åìIt
;

735 
	`Log
(Ë<< 
kDEBUG
 << "BuûdögÉvíàve˘‹†" << 
cuºítInfo
.
	`GëTªeTy≥
(Ë<< 
Endl
;

737 
EvítVe˘‹
& 
evít_v
 = 
evítsm≠
[
cuºítInfo
.
	`GëTªeTy≥
()].
	`©
(
˛
);

739 
Boﬁ_t
 
isChaö
 = (
	`TSåög
("TChaö"Ë=
cuºítInfo
.
	`GëTªe
()->
	`CœssName
());

740 
cuºítInfo
.
	`GëTªe
()->
	`LﬂdTªe
(0);

741 
	`Ch™geToNewTªe
–
cuºítInfo
, 
dsi
 );

744 
˛assEvítCou¡s
.
nInôülEvíts
 +
cuºítInfo
.
	`GëTªe
()->
	`GëE¡rõs
();

747 c⁄° 
UI¡_t
 
nEvts
 = 
cuºítInfo
.
	`GëTªe
()->
	`GëE¡rõs
();

748 
L⁄g64_t
 
evtIdx
 = 0;ÉvtIdx < 
nEvts
;ÉvtIdx++) {

749 
cuºítInfo
.
	`GëTªe
()->
	`LﬂdTªe
(
evtIdx
);

752 i‡(
isChaö
) {

753 i‡(
cuºítInfo
.
	`GëTªe
()->GëTªe()->
	`GëDúe˘‹y
()->
	`GëFûe
()->
	`GëName
(Ë!
cuºítFûeName
) {

754 
cuºítFûeName
 = 
cuºítInfo
.
	`GëTªe
()->GëTªe()->
	`GëDúe˘‹y
()->
	`GëFûe
()->
	`GëName
();

755 
	`Ch™geToNewTªe
–
cuºítInfo
, 
dsi
 );

758 
cuºítInfo
.
	`GëTªe
()->
	`GëE¡ry
(
evtIdx
);

759 
I¡_t
 
sizeOfAºays
 = 1;

760 
I¡_t
 
¥evAºEx¥
 = 0;

765 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

766 
I¡_t
 
nd©a
 = 
fI≈utF‹muœs
[
iv¨
]->
	`GëNd©a
();

767 
˛assEvítCou¡s
.
v¨AvLígth
[
iv¨
] +
nd©a
;

768 i‡(
nd©a
 == 1) ;

770 
v¨IsAºay
[
iv¨
] = 
kTRUE
;

771 i‡(
sizeOfAºays
 == 1) {

772 
sizeOfAºays
 = 
nd©a
;

773 
¥evAºEx¥
 = 
iv¨
;

775 i‡(
sizeOfAºays
!=
nd©a
) {

776 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "ERROR whûê¥ï¨ögÅøöögándÅe°ögÅªes:" << 
Endl
;

777 
	`Log
(Ë<< 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< " mu…ùÀáºay-ty≥Éx¥essi⁄†o‡dif„ª¡Üígth wîêícou¡îed" << 
Endl
;

778 
	`Log
(Ë<< 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "Üoˇti⁄ o‡îr‹:Évíà" << 
evtIdx


779 << " i¿åì " << 
cuºítInfo
.
	`GëTªe
()->
	`GëName
()

780 << " o‡fûê" << 
cuºítInfo
.
	`GëTªe
()->
	`GëCuºítFûe
()->
	`GëName
(Ë<< 
Endl
;

781 
	`Log
(Ë<< 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "Éx¥essi⁄ " << 
fI≈utF‹muœs
[
iv¨
]->
	`GëTôÀ
() << " has "

782 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< 
nd©a
 << "É¡rõs, whûe" << 
Endl
;

783 
	`Log
(Ë<< 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "Éx¥essi⁄ " << 
fI≈utF‹muœs
[
¥evAºEx¥
]->
	`GëTôÀ
() << " has "

784 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< 
fI≈utF‹muœs
[
¥evAºEx¥
]->
	`GëNd©a
(Ë<< "É¡rõs" << 
Endl
;

785 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "NìdÅÿab‹t" << 
Endl
;

790 
I¡_t
 
id©a
 = 0; id©a<
sizeOfAºays
; idata++) {

791 
Boﬁ_t
 
c⁄èös_NaN_‹_öf
 = 
kFALSE
;

793 autÿ
checkN™Inf
 = [&](
°d
::
m≠
<
TSåög
, > &
msgM≠
, 
Flﬂt_t
 
vÆue
, c⁄° *
wh©
, c⁄° *
f‹muœTôÀ
) {

794 i‡(
TM©h
::
	`IsNaN
(
vÆue
)) {

795 
c⁄èös_NaN_‹_öf
 = 
kTRUE
;

796 ++
msgM≠
[
TSåög
::
	`F‹m©
("D©a£t[%s] : %†ex¥essi⁄Ñesﬁve†tÿödëîmö©êvÆuê(NaN): %s", 
dsi
.
	`GëName
(), 
wh©
, 
f‹muœTôÀ
)];

797 } i‡(!
TM©h
::
	`Föôe
(
vÆue
)) {

798 
c⁄èös_NaN_‹_öf
 = 
kTRUE
;

799 ++
msgM≠
[
TSåög
::
	`F‹m©
("D©a£t[%s] : %†ex¥essi⁄Ñesﬁve†tÿöföôêvÆuê(+ö‡‹ -öf): %s", 
dsi
.
	`GëName
(), 
wh©
, 
f‹muœTôÀ
)];

803 
TTªeF‹muœ
* 
f‹muœ
 = 0;

806 
DoubÀ_t
 
cutVÆ
 = 1.;

807 
f‹muœ
 = 
fCutF‹muœs
[
˛
];

808 i‡(
f‹muœ
) {

809 
I¡_t
 
nd©a
 = 
f‹muœ
->
	`GëNd©a
();

810 
cutVÆ
 = (
nd©a
==1 ?

811 
f‹muœ
->
	`EvÆIn°™˚
(0) :

812 
f‹muœ
->
	`EvÆIn°™˚
(
id©a
));

813 
	`checkN™Inf
(
«nInfEº‹s
, 
cutVÆ
, "Cut", 
f‹muœ
->
	`GëTôÀ
());

817 autÿ&
«nMesßges
 = 
cutVÆ
 < 0.5 ? 
«nInfW¨nögs
 : 
«nInfEº‹s
;

820 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

821 
f‹muœ
 = 
fI≈utF‹muœs
[
iv¨
];

822 
I¡_t
 
nd©a
 = 
f‹muœ
->
	`GëNd©a
();

823 
v¨s
[
iv¨
] = (
nd©a
 == 1 ?

824 
f‹muœ
->
	`EvÆIn°™˚
(0) :

825 
f‹muœ
->
	`EvÆIn°™˚
(
id©a
));

826 
	`checkN™Inf
(
«nMesßges
, 
v¨s
[
iv¨
], "I≈ut", 
f‹muœ
->
	`GëTôÀ
());

830 
UI¡_t
 
ôrgt
=0; iågt<
¡gts
; itrgt++) {

831 
f‹muœ
 = 
fT¨gëF‹muœs
[
ôrgt
];

832 
I¡_t
 
nd©a
 = 
f‹muœ
->
	`GëNd©a
();

833 
tgts
[
ôrgt
] = (
nd©a
 == 1 ?

834 
f‹muœ
->
	`EvÆIn°™˚
(0) :

835 
f‹muœ
->
	`EvÆIn°™˚
(
id©a
));

836 
	`checkN™Inf
(
«nMesßges
, 
tgts
[
ôrgt
], "T¨gë", 
f‹muœ
->
	`GëTôÀ
());

840 
UI¡_t
 
ôVis
=0; itVis<
nvis
; itVis++) {

841 
f‹muœ
 = 
fS≥˘©‹F‹muœs
[
ôVis
];

842 
I¡_t
 
nd©a
 = 
f‹muœ
->
	`GëNd©a
();

843 
vis
[
ôVis
] = (
nd©a
 == 1 ?

844 
f‹muœ
->
	`EvÆIn°™˚
(0) :

845 
f‹muœ
->
	`EvÆIn°™˚
(
id©a
));

846 
	`checkN™Inf
(
«nMesßges
, 
vis
[
ôVis
], "S≥˘©‹", 
f‹muœ
->
	`GëTôÀ
());

851 
Flﬂt_t
 
weight
 = 
cuºítInfo
.
	`GëWeight
();

852 
f‹muœ
 = 
fWeightF‹muœ
[
˛
];

853 i‡(
f‹muœ
!=0) {

854 
I¡_t
 
nd©a
 = 
f‹muœ
->
	`GëNd©a
();

855 
weight
 *(
nd©a
 == 1 ?

856 
f‹muœ
->
	`EvÆIn°™˚
() :

857 
f‹muœ
->
	`EvÆIn°™˚
(
id©a
));

858 
	`checkN™Inf
(
«nMesßges
, 
weight
, "Weight", 
f‹muœ
->
	`GëTôÀ
());

863 
˛assEvítCou¡s
.
nEvBef‹eCut
++;

864 i‡(!
TM©h
::
	`IsNaN
(
weight
))

865 
˛assEvítCou¡s
.
nWeEvBef‹eCut
 +
weight
;

868 i‡(
cutVÆ
<0.5) ;

873 i‡(
weight
 < 0Ë
˛assEvítCou¡s
.
nNegWeights
++;

877 i‡(
c⁄èös_NaN_‹_öf
) {

878 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "NaN o∏+-ö‡ö Evíà" << 
evtIdx
 << 
Endl
;

879 i‡(
sizeOfAºays
>1Ë
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "Ñeje˘ed" << 
Endl
;

885 
˛assEvítCou¡s
.
nEvA·îCut
++;

886 
˛assEvítCou¡s
.
nWeEvA·îCut
 +
weight
;

889 
evít_v
.
	`push_back
(
√w
 
	`Evít
(
v¨s
, 
tgts
 , 
vis
, 
˛
 , 
weight
));

892 
cuºítInfo
.
	`GëTªe
()->
	`Re£tBønchAddªs£s
();

896 i‡(!
«nInfW¨nögs
.
	`em±y
()) {

897 
	`Log
(Ë<< 
kWARNING
 << "FoundÉvít†wôh NaNánd/‹ +-ö‡vÆues" << 
Endl
;

898 c⁄°áutÿ&
w¨nög
 : 
«nInfW¨nögs
) {

899 autÿ&
log
 = 
	`Log
(Ë<< 
kWARNING
 << 
w¨nög
.
fú°
;

900 i‡(
w¨nög
.
£c⁄d
 > 1Ë
log
 << " (" << warning.second << "Åimes)";

901 
log
 << 
Endl
;

903 
	`Log
(Ë<< 
kWARNING
 << "The£ NaNánd/‹ +-öf†wîêÆ»ªmoved byÅhê•ecifõd cut, c⁄töuög." << 
Endl
;

904 
	`Log
(Ë<< 
Endl
;

907 i‡(!
«nInfEº‹s
.
	`em±y
()) {

908 
	`Log
(Ë<< 
kWARNING
 << "FoundÉvít†wôh NaNánd/‹ +-ö‡vÆue†“ŸÑemoved by cut)" << 
Endl
;

909 c⁄°áutÿ&
îr‹
 : 
«nInfEº‹s
) {

910 autÿ&
log
 = 
	`Log
(Ë<< 
kWARNING
 << 
îr‹
.
fú°
;

911 i‡(
îr‹
.
£c⁄d
 > 1Ë
log
 << " (" <<Érror.second << "Åimes)";

912 
log
 << 
Endl
;

914 
	`Log
(Ë<< 
kFATAL
 << "Howám I suµo£dÅÿåaöá NaN o∏+-öf?!" << 
Endl
;

918 
I¡_t
 
maxL
 = 
dsi
.
	`GëCœssNameMaxLígth
();

920 
	`Log
(Ë<< 
kHEADER
 << 
	`F‹m
("[%s] : ",
dsi
.
	`GëName
()Ë<< "Numbî o‡evít†ö i≈uàåìs" << 
Endl
;

921 
	`Log
(Ë<< 
kDEBUG
 << "◊·îÖossibÀ fœâíög o‡¨øys):" << 
Endl
;

924 
UI¡_t
 
˛
 = 0; c»< 
dsi
.
	`GëNCœs£s
(); cl++) {

925 
	`Log
(Ë<< 
kDEBUG


927 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

929 << 
°d
::
	`£tw
(5Ë<< 
evítCou¡s
[
˛
].
nEvBef‹eCut


930 << " / sum o‡weights: " << 
°d
::
	`£tw
(5Ë<< 
evítCou¡s
[
˛
].
nWeEvBef‹eCut
 << 
Endl
;

933 
UI¡_t
 
˛
 = 0; c»< 
dsi
.
	`GëNCœs£s
(); cl++) {

934 
	`Log
(Ë<< 
kDEBUG


935 << " " << 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

937 << 
°d
::
	`£tw
(5Ë<< 
d©aI≈ut
.
	`GëE¡rõs
(
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()Ë<< 
Endl
;

940 i‡(
fSˇÀWôhPª£lEff
)

941 
	`Log
(Ë<< 
kDEBUG


942 << "\tPª£À˘i⁄: (wû»af„˘Çumbî o‡ªque°edÅøöögándÅe°ögÉvíts)" << 
Endl
;

944 
	`Log
(Ë<< 
kDEBUG


945 << "\tPª£À˘i⁄: (wû»NOTáf„˘Çumbî o‡ªque°edÅøöögándÅe°ögÉvíts)" << 
Endl
;

947 i‡(
dsi
.
	`HasCuts
()) {

948 
UI¡_t
 
˛
 = 0; cl< 
dsi
.
	`GëNCœs£s
(); cl++) {

949 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " " << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< dsi.
	`GëCœssInfo
(
˛
)->GetName()

950 << "Ñequúemít: \"" << 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëCut
(Ë<< "\"" << 
Endl
;

951 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()) << " "

952 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

954 << 
°d
::
	`£tw
(5Ë<< 
evítCou¡s
[
˛
].
nEvA·îCut


955 << " / sum o‡weights: " << 
°d
::
	`£tw
(5Ë<< 
evítCou¡s
[
˛
].
nWeEvA·îCut
 << 
Endl
;

956 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()) << " "

957 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
Ë<< 
dsi
.
	`GëCœssInfo
(
˛
)->
	`GëName
()

959 << 
°d
::
	`£tw
(6Ë<< 
evítCou¡s
[
˛
].
nWeEvA·îCut
/evítCou¡s[˛].
nWeEvBef‹eCut
 << 
Endl
;

962 
	`Log
(Ë<< 
kDEBUG


963 << " Nÿ¥e£À˘i⁄ cut†≠∂õd o¿evíà˛as£s" << 
Endl
;

965 
dñëe
[] 
v¨IsAºay
;

967 
	}
}

972 
	gTMVA
::
D©aSë
*

973 
TMVA
::
D©aSëFa˘‹y
::
	$MixEvíts
–
D©aSëInfo
& 
dsi
,

974 
EvítVe˘‹OfCœs£sOfTªeTy≥
& 
tmpEvítVe˘‹
,

975 
EvtSètsPîCœss
& 
evítCou¡s
,

976 c⁄° 
TSåög
& 
•lôMode
,

977 c⁄° 
TSåög
& 
mixMode
,

978 c⁄° 
TSåög
& 
n‹mMode
,

979 
UI¡_t
 
•lôSìd
)

981 
TMVA
::
R™domGíî©‹
 
	`∫dm
–
•lôSìd
 );

986 i‡(
•lôMode
.
	`C⁄èös
( "RANDOM" ) ) {

988  
UI¡_t
 
˛s
 = 0; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

989 
EvítVe˘‹
& 
un•ecifõdEvíts
 = 
tmpEvítVe˘‹
[
Ty≥s
::
kMaxTªeTy≥
].
	`©
(
˛s
);

990 if–! 
un•ecifõdEvíts
.
	`em±y
() ) {

991 
	`Log
(Ë<< 
kDEBUG
 << "randomly shuffling "

992 << 
un•ecifõdEvíts
.
	`size
()

993 << "Évít†o‡˛as†" << 
˛s


994 << " whicháªÇŸ yëássocüãdÅÿã°ög o∏åaöög" << 
Endl
;

995 
°d
::
	`øndom_shufÊe
–
un•ecifõdEvíts
.
	`begö
(),

996 
un•ecifõdEvíts
.
	`íd
(),

997 
∫dm
 );

1003 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "SPLITTING ========" << 
Endl
;

1004  
UI¡_t
 
˛s
 = 0; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

1005 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "---- cœs†" << 
˛s
 << 
Endl
;

1006 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "checkÇumbî o‡åaöög/ã°ögÉvíts,Ñeque°edándávaûabÀÇumbî o‡evít†™d f‹ cœs†" << 
˛s
 << 
Endl
;

1009 
EvítVe˘‹
& 
evítVe˘‹Tøöög
 = 
tmpEvítVe˘‹
[ 
Ty≥s
::
kTøöög
 ].
	`©
(
˛s
);

1010 
EvítVe˘‹
& 
evítVe˘‹Te°ög
 = 
tmpEvítVe˘‹
[ 
Ty≥s
::
kTe°ög
 ].
	`©
(
˛s
);

1011 
EvítVe˘‹
& 
evítVe˘‹Undeföed
 = 
tmpEvítVe˘‹
[ 
Ty≥s
::
kMaxTªeTy≥
 ].
	`©
(
˛s
);

1013 
I¡_t
 
avaûabÀTøöög
 = 
evítVe˘‹Tøöög
.
	`size
();

1014 
I¡_t
 
avaûabÀTe°ög
 = 
evítVe˘‹Te°ög
.
	`size
();

1015 
I¡_t
 
avaûabÀUndeföed
 = 
evítVe˘‹Undeföed
.
	`size
();

1017 
Flﬂt_t
 
¥e£l_sˇÀ
;

1018 i‡(
fSˇÀWôhPª£lEff
) {

1019 
¥e£l_sˇÀ
 = 
evítCou¡s
[
˛s
].
	`cutSˇlög
();

1020 i‡(
¥e£l_sˇÀ
 < 1)

1021 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " you havê›ãd f‹ sˇlögÅhênumbî o‡ªque°edÅøöög/ã°ögÉvíts\¿tÿbêsˇÀd byÅhê¥e£À˘i⁄Éfficõncy"<< 
Endl
;

1023 
¥e£l_sˇÀ
 = 1.;

1024 i‡(
evítCou¡s
[
˛s
].
	`cutSˇlög
() < 1)

1025 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " you havê›ãd f‹ i¡î¥ëögÅhêªque°edÇumbî o‡åaöög/ã°ögÉvíts\¿tÿbêthênumbî o‡evít†AFTER you∏¥e£À˘i⁄ cuts" << 
Endl
;

1032 if(
evítCou¡s
[
˛s
].
TøöTe°S∂ôReque°ed
 < 1.0 &&ÉventCounts[cls].TrainTestSplitRequested > 0.0){

1033 
evítCou¡s
[
˛s
].
nTøöögEvítsReque°ed
 = 
	`I¡_t
”vítCou¡s[˛s].
TøöTe°S∂ôReque°ed
*(
avaûabÀTøöög
+
avaûabÀTe°ög
+
avaûabÀUndeföed
));

1034 
evítCou¡s
[
˛s
].
nTe°ögEvítsReque°ed
 = 
	`I¡_t
(0);

1036 if(
evítCou¡s
[
˛s
].
TøöTe°S∂ôReque°ed
 !0.0Ë
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("Thê›ti⁄ TøöTe°S∂ô_<˛ass> ha†tÿbêöÑ™gê(0, 1] buài†£àtÿ%f.",evítCou¡s[˛s].TøöTe°S∂ôReque°edË<< 
Endl
;

1037 
I¡_t
 
ªque°edTøöög
 = 
	`I¡_t
(
evítCou¡s
[
˛s
].
nTøöögEvítsReque°ed
 * 
¥e£l_sˇÀ
);

1038 
I¡_t
 
ªque°edTe°ög
 = 
	`I¡_t
(
evítCou¡s
[
˛s
].
nTe°ögEvítsReque°ed
 * 
¥e£l_sˇÀ
);

1040 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "evít†öÅøöögÅªe† : " << 
avaûabÀTøöög
 << 
Endl
;

1041 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "evít†öÅe°ögÅªe† : " << 
avaûabÀTe°ög
 << 
Endl
;

1042 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "evít†ö un•ecifõdÅªe†: " << 
avaûabÀUndeföed
 << 
Endl
;

1043 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "ªque°ed f‹Åøöög : " << 
ªque°edTøöög
 << 
Endl
;;

1045 if(
¥e£l_sˇÀ
<1)

1046 
	`Log
(Ë<< " ( " << 
evítCou¡s
[
˛s
].
nTøöögEvítsReque°ed


1047 << " * " << 
¥e£l_sˇÀ
 << "Öª£À˘i⁄Éfficõncy)" << 
Endl
;

1049 
	`Log
(Ë<< 
Endl
;

1050 
	`Log
(Ë<< 
kDEBUG
 << "ªque°ed f‹Åe°ög : " << 
ªque°edTe°ög
;

1051 if(
¥e£l_sˇÀ
<1)

1052 
	`Log
(Ë<< " ( " << 
evítCou¡s
[
˛s
].
nTe°ögEvítsReque°ed


1053 << " * " << 
¥e£l_sˇÀ
 << "Öª£À˘i⁄Éfficõncy)" << 
Endl
;

1055 
	`Log
(Ë<< 
Endl
;

1104 
I¡_t
 
	`u£F‹Te°ög
(0),
	`u£F‹Tøöög
(0);

1105 
I¡_t
 
	`ÆlAvaûabÀ
(
avaûabÀUndeföed
 + 
avaûabÀTøöög
 + 
avaûabÀTe°ög
);

1107 if–(
ªque°edTøöög
 =0Ë&& (
ªque°edTe°ög
 == 0)){

1111 i‡–
avaûabÀUndeföed
 >
TM©h
::
	`Abs
(
avaûabÀTøöög
 - 
avaûabÀTe°ög
) ) {

1113 
u£F‹Tøöög
 = 
u£F‹Te°ög
 = 
ÆlAvaûabÀ
/2;

1116 
u£F‹Tøöög
 = 
avaûabÀTøöög
;

1117 
u£F‹Te°ög
 = 
avaûabÀTe°ög
;

1118 i‡(
avaûabÀTøöög
 < 
avaûabÀTe°ög
)

1119 
u£F‹Tøöög
 +
avaûabÀUndeföed
;

1121 
u£F‹Te°ög
 +
avaûabÀUndeföed
;

1123 
ªque°edTøöög
 = 
u£F‹Tøöög
;

1124 
ªque°edTe°ög
 = 
u£F‹Te°ög
;

1127 i‡(
ªque°edTe°ög
 == 0){

1129 
u£F‹Tøöög
 = 
TM©h
::
	`Max
(
ªque°edTøöög
,
avaûabÀTøöög
);

1130 i‡(
ÆlAvaûabÀ
 < 
u£F‹Tøöög
) {

1131 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "MoreÉventsÑequested forÅraining ("

1132 << 
ªque°edTøöög
 << ")Åhanávailable ("

1133 << 
ÆlAvaûabÀ
 << ")!" << 
Endl
;

1135 
u£F‹Te°ög
 = 
ÆlAvaûabÀ
 - 
u£F‹Tøöög
;

1136 
ªque°edTe°ög
 = 
u£F‹Te°ög
;

1139 i‡(
ªque°edTøöög
 == 0){

1140 
u£F‹Te°ög
 = 
TM©h
::
	`Max
(
ªque°edTe°ög
,
avaûabÀTe°ög
);

1141 i‡(
ÆlAvaûabÀ
 < 
u£F‹Te°ög
) {

1142 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "MoreÉventsÑequested forÅesting ("

1143 << 
ªque°edTe°ög
 << ")Åhanávailable ("

1144 << 
ÆlAvaûabÀ
 << ")!" << 
Endl
;

1146 
u£F‹Tøöög

ÆlAvaûabÀ
 - 
u£F‹Te°ög
;

1147 
ªque°edTøöög
 = 
u£F‹Tøöög
;

1156 
I¡_t
 
°ûlNìdF‹Tøöög
 = 
TM©h
::
	`Max
(
ªque°edTøöög
-
avaûabÀTøöög
,0);

1157 
I¡_t
 
°ûlNìdF‹Te°ög
 = 
TM©h
::
	`Max
(
ªque°edTe°ög
-
avaûabÀTe°ög
,0);

1159 
NFªe
 = 
avaûabÀUndeföed
 - 
°ûlNìdF‹Tøöög
 - 
°ûlNìdF‹Te°ög
;

1160 i‡(
NFªe
 <0) NFree = 0;

1161 
u£F‹Tøöög
 = 
TM©h
::
	`Max
(
ªque°edTøöög
,
avaûabÀTøöög
Ë+ 
NFªe
/2;

1162 
u£F‹Te°ög

ÆlAvaûabÀ
 - 
u£F‹Tøöög
;

1165 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "dëîmöedÉvíàßm∂êsizêtÿ£À˘Åøöög sam∂ê‰om="<<
u£F‹Tøöög
<<
Endl
;

1166 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "dëîmöedÉvíàßm∂êsizêtÿ£À˘Åe° sam∂ê‰om="<<
u£F‹Te°ög
<<
Endl
;

1171 if–
•lôMode
 == "ALTERNATE" ){

1172 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "•lô 'ALTERNATE'" << 
Endl
;

1173 
I¡_t
 
nTøöög
 = 
avaûabÀTøöög
;

1174 
I¡_t
 
nTe°ög
 = 
avaûabÀTe°ög
;

1175  
EvítVe˘‹
::
ôî©‹
 
ô
 = 
evítVe˘‹Undeföed
.
	`begö
(), 
ôEnd
 =ÉvítVe˘‹Undeföed.
	`íd
(); it != itEnd; ){

1176 ++
nTøöög
;

1177 if–
nTøöög
 <
ªque°edTøöög
 ){

1178 
evítVe˘‹Tøöög
.
	`ö£π
–evítVe˘‹Tøöög.
	`íd
(), (*
ô
) );

1179 ++
ô
;

1181 if–
ô
 !
ôEnd
 ){

1182 ++
nTe°ög
;

1183 
evítVe˘‹Te°ög
.
	`ö£π
–evítVe˘‹Te°ög.
	`íd
(), (*
ô
) );

1184 ++
ô
;

1188 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "•lô '" << 
•lôMode
 << "'" << 
Endl
;

1191 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "avaûabÀundeföed : " << 
avaûabÀUndeföed
 << 
Endl
;

1192 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "u£F‹Tøöög : " << 
u£F‹Tøöög
 << 
Endl
;

1193 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "u£F‹Te°ög : " << 
u£F‹Te°ög
 << 
Endl
;

1194 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "avaûabÀTøöög : " << 
avaûabÀTøöög
 << 
Endl
;

1195 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "avaûabÀTe°ög : " << 
avaûabÀTe°ög
 << 
Endl
;

1197 if–
avaûabÀUndeföed
<(
u£F‹Tøöög
-
avaûabÀTøöög
) ||

1198 
avaûabÀUndeföed
<(
u£F‹Te°ög
 -
avaûabÀTe°ög
 ) ||

1199 
avaûabÀUndeföed
<(
u£F‹Tøöög
+
u£F‹Te°ög
-
avaûabÀTøöög
-
avaûabÀTe°ög
 ) ){

1200 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "M‹êevít†ªque°edÅh™ávaûabÀ!" << 
Endl
;

1204 i‡(
u£F‹Tøöög
>
avaûabÀTøöög
){

1205 
evítVe˘‹Tøöög
.
	`ö£π
–evítVe˘‹Tøöög.
	`íd
(Ë, 
evítVe˘‹Undeföed
.
	`begö
(),ÉvítVe˘‹Undeföed.begö()+ 
u£F‹Tøöög
- 
avaûabÀTøöög
 );

1206 
evítVe˘‹Undeföed
.
	`îa£
–evítVe˘‹Undeföed.
	`begö
(),ÉvítVe˘‹Undeföed.begö(Ë+ 
u£F‹Tøöög
- 
avaûabÀTøöög
);

1208 i‡(
u£F‹Te°ög
>
avaûabÀTe°ög
){

1209 
evítVe˘‹Te°ög
.
	`ö£π
–evítVe˘‹Te°ög.
	`íd
(Ë, 
evítVe˘‹Undeföed
.
	`begö
(),ÉvítVe˘‹Undeföed.begö()+ 
u£F‹Te°ög
- 
avaûabÀTe°ög
 );

1212 
evítVe˘‹Undeföed
.
	`˛ór
();

1215 i‡(
•lôMode
.
	`C⁄èös
( "RANDOM" )){

1216 
UI¡_t
 
sizeTøöög
 = 
evítVe˘‹Tøöög
.
	`size
();

1217 if–
sizeTøöög
 > 
	`UI¡_t
(
ªque°edTøöög
) ){

1218 
°d
::
ve˘‹
<
UI¡_t
> 
	`ödi˚sTøöög
–
sizeTøöög
 );

1220 
°d
::
	`gíî©e
–
ödi˚sTøöög
.
	`begö
(), indi˚sTøöög.
	`íd
(), 
TMVA
::
In¸emít
<
UI¡_t
>(0) );

1222 
°d
::
	`øndom_shufÊe
–
ödi˚sTøöög
.
	`begö
(), indi˚sTøöög.
	`íd
(), 
∫dm
 );

1224 
ödi˚sTøöög
.
	`îa£
–ödi˚sTøöög.
	`begö
()+
sizeTøöög
-
	`UI¡_t
(
ªque°edTøöög
), indi˚sTøöög.
	`íd
() );

1226  
°d
::
ve˘‹
<
UI¡_t
>::
ôî©‹
 
ô
 = 
ödi˚sTøöög
.
	`begö
(), 
ôEnd
 = indi˚sTøöög.
	`íd
(); it != itEnd; ++it ){

1227 
dñëe
 
evítVe˘‹Tøöög
.
	`©
–(*
ô
) );

1228 
evítVe˘‹Tøöög
.
	`©
–(*
ô
ËË
NULL
;

1231 
evítVe˘‹Tøöög
.
	`îa£
–
°d
::
	`ªmove
–evítVe˘‹Tøöög.
	`begö
(),ÉvítVe˘‹Tøöög.
	`íd
(), (*)
NULL
 ),ÉventVectorTraining.end() );

1234 
UI¡_t
 
sizeTe°ög
 = 
evítVe˘‹Te°ög
.
	`size
();

1235 if–
sizeTe°ög
 > 
	`UI¡_t
(
ªque°edTe°ög
) ){

1236 
°d
::
ve˘‹
<
UI¡_t
> 
	`ödi˚sTe°ög
–
sizeTe°ög
 );

1238 
°d
::
	`gíî©e
–
ödi˚sTe°ög
.
	`begö
(), indi˚sTe°ög.
	`íd
(), 
TMVA
::
In¸emít
<
UI¡_t
>(0) );

1240 
°d
::
	`øndom_shufÊe
–
ödi˚sTe°ög
.
	`begö
(), indi˚sTe°ög.
	`íd
(), 
∫dm
 );

1242 
ödi˚sTe°ög
.
	`îa£
–ödi˚sTe°ög.
	`begö
()+
sizeTe°ög
-
	`UI¡_t
(
ªque°edTe°ög
), indi˚sTe°ög.
	`íd
() );

1244  
°d
::
ve˘‹
<
UI¡_t
>::
ôî©‹
 
ô
 = 
ödi˚sTe°ög
.
	`begö
(), 
ôEnd
 = indi˚sTe°ög.
	`íd
(); it != itEnd; ++it ){

1245 
dñëe
 
evítVe˘‹Te°ög
.
	`©
–(*
ô
) );

1246 
evítVe˘‹Te°ög
.
	`©
–(*
ô
ËË
NULL
;

1249 
evítVe˘‹Te°ög
.
	`îa£
–
°d
::
	`ªmove
–evítVe˘‹Te°ög.
	`begö
(),ÉvítVe˘‹Te°ög.
	`íd
(), (*)
NULL
 ),ÉventVectorTesting.end() );

1253 if–
evítVe˘‹Tøöög
.
	`size
(Ë< 
	`UI¡_t
(
ªque°edTøöög
) )

1254 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "DataSetFactory/requestedÇumber ofÅraining samplesÜargerÅhan size ofÉventVectorTraining.\n"

1255 << "Thîêi†¥obablyá¿issue. PÀa£ c⁄è˘ÅhêTMVA devñ›îs." << 
Endl
;

1256 
°d
::
	`f‹_óch
–
evítVe˘‹Tøöög
.
	`begö
()+
ªque°edTøöög
,ÉvítVe˘‹Tøöög.
	`íd
(), 
DñëeFun˘‹
<
Evít
>() );

1257 
evítVe˘‹Tøöög
.
	`îa£
”vítVe˘‹Tøöög.
	`begö
()+
ªque°edTøöög
,evítVe˘‹Tøöög.
	`íd
());

1259 if–
evítVe˘‹Te°ög
.
	`size
(Ë< 
	`UI¡_t
(
ªque°edTe°ög
) )

1260 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "DataSetFactory/requestedÇumber ofÅesting samplesÜargerÅhan size ofÉventVectorTesting.\n"

1261 << "Thîêi†¥obablyá¿issue. PÀa£ c⁄è˘ÅhêTMVA devñ›îs." << 
Endl
;

1262 
°d
::
	`f‹_óch
–
evítVe˘‹Te°ög
.
	`begö
()+
ªque°edTe°ög
,ÉvítVe˘‹Te°ög.
	`íd
(), 
DñëeFun˘‹
<
Evít
>() );

1263 
evítVe˘‹Te°ög
.
	`îa£
”vítVe˘‹Te°ög.
	`begö
()+
ªque°edTe°ög
,evítVe˘‹Te°ög.
	`íd
());

1267 
TMVA
::
D©aSëFa˘‹y
::
	`Rí‹mEvíts
–
dsi
, 
tmpEvítVe˘‹
, 
evítCou¡s
, 
n‹mMode
 );

1269 
I¡_t
 
åaöögSize
 = 0;

1270 
I¡_t
 
ã°ögSize
 = 0;

1273  
UI¡_t
 
˛s
 = 0; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

1274 
åaöögSize
 +
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`size
();

1275 
ã°ögSize
 +
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`size
();

1281 
EvítVe˘‹
* 
åaöögEvítVe˘‹
 = 
√w
 
	`EvítVe˘‹
();

1282 
EvítVe˘‹
* 
ã°ögEvítVe˘‹
 = 
√w
 
	`EvítVe˘‹
();

1284 
åaöögEvítVe˘‹
->
	`ª£rve
–
åaöögSize
 );

1285 
ã°ögEvítVe˘‹
->
	`ª£rve
–
ã°ögSize
 );

1291 
	`Log
(Ë<< 
kDEBUG
 << " MIXING ============" << 
Endl
;

1293 if–
mixMode
 == "ALTERNATE" ){

1296  
UI¡_t
 
˛s
 = 1; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

1297 i‡(
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`size
() !=ÅmpEventVector[Types::kTraining].at(0).size()){

1298 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Tøöög sam∂e: YouáªÅryögÅÿmixÉvít†öá…î«ã modêÆthoughÅhê˛as£†havêdif„ª¡Évíànumbîs. Thi†w‹k†buàthêÆã∫©i⁄ st›†©Åhêœ°Évíào‡thêsmÆÀ∏˛ass."<<
Endl
;

1300 i‡(
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`size
() !=ÅmpEventVector[Types::kTesting].at(0).size()){

1301 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Te°ög sam∂e: YouáªÅryögÅÿmixÉvít†öá…î«ã modêÆthoughÅhê˛as£†havêdif„ª¡Évíànumbîs. Thi†w‹k†buàthêÆã∫©i⁄ st›†©Åhêœ°Évíào‡thêsmÆÀ∏˛ass."<<
Endl
;

1304 
EvítVe˘‹
::
	tôî©‹
 
	tEvtVecIt
;

1305 
EvtVecIt
 
ôEvít
, 
ôEvítEnd
;

1308 
	`Log
(Ë<< 
kDEBUG
 << "ö£π cœs†0 i¡ÿåaöögándÅe° ve˘‹" << 
Endl
;

1309 
åaöögEvítVe˘‹
->
	`ö£π
–åaöögEvítVe˘‹->
	`íd
(), 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(0).
	`begö
(),ÅmpEventVector[Types::kTraining].at(0).end() );

1310 
ã°ögEvítVe˘‹
->
	`ö£π
–ã°ögEvítVe˘‹->
	`íd
(), 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(0).
	`begö
(),ÅmpEventVector[Types::kTesting].at(0).end() );

1313 
EvtVecIt
 
ôT¨gë
;

1314  
UI¡_t
 
˛s
 = 1; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

1315 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "ö£π cœs†" << 
˛s
 << 
Endl
;

1317 
ôT¨gë
 = 
åaöögEvítVe˘‹
->
	`begö
() - 1;

1319  
ôEvít
 = 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`begö
(), 
ôEvítEnd
 =ÅmpEvítVe˘‹[Ty≥s::kTøöög].©(˛s).
	`íd
(); itEvent != itEventEnd; ++itEvent ){

1321 if–(
åaöögEvítVe˘‹
->
	`íd
(Ë- 
ôT¨gë
Ë< 
	`I¡_t
(
˛s
+1) ) {

1322 
ôT¨gë
 = 
åaöögEvítVe˘‹
->
	`íd
();

1323 
åaöögEvítVe˘‹
->
	`ö£π
–
ôT¨gë
, 
ôEvít
, 
ôEvítEnd
 );

1326 
ôT¨gë
 +
˛s
+1;

1327 
åaöögEvítVe˘‹
->
	`ö£π
–
ôT¨gë
, (*
ôEvít
) );

1331 
ôT¨gë
 = 
ã°ögEvítVe˘‹
->
	`begö
() - 1;

1333  
ôEvít
 = 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`begö
(), 
ôEvítEnd
 =ÅmpEvítVe˘‹[Ty≥s::kTe°ög].©(˛s).
	`íd
(); itEvent != itEventEnd; ++itEvent ){

1335 if––
ã°ögEvítVe˘‹
->
	`íd
(Ë- 
ôT¨gë
 ) < 
	`I¡_t
(
˛s
+1) ) {

1336 
ôT¨gë
 = 
ã°ögEvítVe˘‹
->
	`íd
();

1337 
ã°ögEvítVe˘‹
->
	`ö£π
–
ôT¨gë
, 
ôEvít
, 
ôEvítEnd
 );

1340 
ôT¨gë
 +
˛s
+1;

1341 
ã°ögEvítVe˘‹
->
	`ö£π
–
ôT¨gë
, (*
ôEvít
) );

1357  
UI¡_t
 
˛s
 = 0; cl†< 
dsi
.
	`GëNCœs£s
(); ++cls ){

1358 
åaöögEvítVe˘‹
->
	`ö£π
–åaöögEvítVe˘‹->
	`íd
(), 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`begö
(),ÅmpEventVector[Types::kTraining].at(cls).end() );

1359 
ã°ögEvítVe˘‹
->
	`ö£π
 (Åe°ögEvítVe˘‹->
	`íd
(), 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`begö
(),ÅmpEventVector[Types::kTesting].at(cls).end() );

1370 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`˛ór
();

1371 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`˛ór
();

1373 
tmpEvítVe˘‹
[
Ty≥s
::
kMaxTªeTy≥
].
	`˛ór
();

1375 i‡(
mixMode
 == "RANDOM") {

1376 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "shufÊögÉvíts"<<
Endl
;

1378 
°d
::
	`øndom_shufÊe
–
åaöögEvítVe˘‹
->
	`begö
(),ÅøöögEvítVe˘‹->
	`íd
(), 
∫dm
 );

1379 
°d
::
	`øndom_shufÊe
–
ã°ögEvítVe˘‹
->
	`begö
(),Åe°ögEvítVe˘‹->
	`íd
(), 
∫dm
 );

1382 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "åaöögEvítVe˘‹ " << 
åaöögEvítVe˘‹
->
	`size
(Ë<< 
Endl
;

1383 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "ã°ögEvítVe˘‹ " << 
ã°ögEvítVe˘‹
->
	`size
(Ë<< 
Endl
;

1386 
D©aSë
* 
ds
 = 
√w
 
	`D©aSë
(
dsi
);

1389 
ds
->
	`SëEvítCﬁÀ˘i⁄
(
åaöögEvítVe˘‹
, 
Ty≥s
::
kTøöög
 );

1391 
ds
->
	`SëEvítCﬁÀ˘i⁄
(
ã°ögEvítVe˘‹
, 
Ty≥s
::
kTe°ög
 );

1394 i‡(
ds
->
	`GëNTøöögEvíts
() < 1){

1395 
	`Log
(Ë<< 
kFATAL
 << "D©a£à" << 
°d
::
	`°rög
(
dsi
.
	`GëName
()Ë<< " d€†nŸ havê™yÅøöögÉvíts, I bëã∏°› hîê™dÜë you fixÅh© o√ fú° " << 
Endl
;

1398 i‡(
ds
->
	`GëNTe°Evíts
() < 1) {

1399 
	`Log
(Ë<< 
kERROR
 << "D©a£à" << 
°d
::
	`°rög
(
dsi
.
	`GëName
()Ë<< " d€†nŸ havê™yÅe°ögÉvíts, gues†th© wû»ˇu£ÖrobÀm†œãr..buàf‹Çow, I c⁄töuê" << 
Endl
;

1402 
dñëe
 
åaöögEvítVe˘‹
;

1403 
dñëe
 
ã°ögEvítVe˘‹
;

1404  
ds
;

1406 
	}
}

1417 
	gTMVA
::
D©aSëFa˘‹y
::
	$Rí‹mEvíts
–
TMVA
::
D©aSëInfo
& 
dsi
,

1418 
EvítVe˘‹OfCœs£sOfTªeTy≥
& 
tmpEvítVe˘‹
,

1419 c⁄° 
EvtSètsPîCœss
& 
evítCou¡s
,

1420 c⁄° 
TSåög
& 
n‹mMode
 )

1427 
I¡_t
 
åaöögSize
 = 0;

1428 
I¡_t
 
ã°ögSize
 = 0;

1430 
VÆuePîCœss
 
	`åaöögSumWeightsPîCœss
–
dsi
.
	`GëNCœs£s
() );

1431 
VÆuePîCœss
 
	`ã°ögSumWeightsPîCœss
–
dsi
.
	`GëNCœs£s
() );

1433 
NumbîPîCœss
 
	`åaöögSizePîCœss
–
dsi
.
	`GëNCœs£s
() );

1434 
NumbîPîCœss
 
	`ã°ögSizePîCœss
–
dsi
.
	`GëNCœs£s
() );

1436 
DoubÀ_t
 
åaöögSumSig«lWeights
 = 0;

1437 
DoubÀ_t
 
åaöögSumBackgrWeights
 = 0;

1438 
DoubÀ_t
 
ã°ögSumSig«lWeights
 = 0;

1439 
DoubÀ_t
 
ã°ögSumBackgrWeights
 = 0;

1443  
UI¡_t
 
˛s
 = 0, 
˛sEnd
 = 
dsi
.
	`GëNCœs£s
(); cls < clsEnd; ++cls ){

1444 
åaöögSizePîCœss
.
	`©
(
˛s
Ë
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].©(˛s).
	`size
();

1445 
ã°ögSizePîCœss
.
	`©
(
˛s
Ë
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].©(˛s).
	`size
();

1447 
åaöögSize
 +
åaöögSizePîCœss
.
	`back
();

1448 
ã°ögSize
 +
ã°ögSizePîCœss
.
	`back
();

1462 
åaöögSumWeightsPîCœss
.
	`©
(
˛s
Ë
°d
::
	`accumuœã
–
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].©(˛s).
	`begö
(),

1463 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`íd
(),

1464 
	`DoubÀ_t
(0),

1465 
	`compo£_bö¨y
–
°d
::
∂us
<
DoubÀ_t
>(),

1466 
nuŒ
<
DoubÀ_t
>(),

1467 
°d
::
	`mem_fun
(&
TMVA
::
Evít
::
GëOrigöÆWeight
) ) );

1469 
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
Ë
°d
::
	`accumuœã
–
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].©(˛s).
	`begö
(),

1470 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`íd
(),

1471 
	`DoubÀ_t
(0),

1472 
	`compo£_bö¨y
–
°d
::
∂us
<
DoubÀ_t
>(),

1473 
nuŒ
<
DoubÀ_t
>(),

1474 
°d
::
	`mem_fun
(&
TMVA
::
Evít
::
GëOrigöÆWeight
) ) );

1476 i‡–
˛s
 =
dsi
.
	`GëSig«lCœssIndex
()){

1477 
åaöögSumSig«lWeights
 +
åaöögSumWeightsPîCœss
.
	`©
(
˛s
);

1478 
ã°ögSumSig«lWeights
 +
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
);

1480 
åaöögSumBackgrWeights
 +
åaöögSumWeightsPîCœss
.
	`©
(
˛s
);

1481 
ã°ögSumBackgrWeights
 +
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
);

1488 
VÆuePîCœss
 
	`ªn‹mFa˘‹
–
dsi
.
	`GëNCœs£s
() );

1492 
dsi
.
	`SëN‹mÆiz©i⁄
–
n‹mMode
 );

1495 
dsi
.
	`SëTøöögSumSig«lWeights
(
åaöögSumSig«lWeights
);

1496 
dsi
.
	`SëTøöögSumBackgrWeights
(
åaöögSumBackgrWeights
);

1497 
dsi
.
	`SëTe°ögSumSig«lWeights
(
ã°ögSumSig«lWeights
);

1498 
dsi
.
	`SëTe°ögSumBackgrWeights
(
ã°ögSumBackgrWeights
);

1501 i‡(
n‹mMode
 == "NONE") {

1502 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Nÿweighàªn‹mÆißti⁄áµlõd: u£ origöÆ globÆándÉvíàweights" << 
Endl
;

1508 i‡(
n‹mMode
 == "NUMEVENTS") {

1509 
	`Log
(Ë<< 
kDEBUG


1510 << "\tWeighàªn‹mÆißti⁄ mode: \"NumEvíts\":Ñí‹mÆi£†Æ»evíà˛as£†" << 
Endl
;

1511 
	`Log
(Ë<< 
kDEBUG


1512 << " suchÅh©Åhêef„˘ivê(weighãdËnumbî o‡evít†öÉach cœs†equÆ†thêª•e˘ivê" << 
Endl
;

1513 
	`Log
(Ë<< 
kDEBUG


1514 << "Çumbî o‡evít†”¡rõsËth© you dem™ded i¿Pª∑ªTøöögAndTe°Tªe(\"\",\"nTøö_Sig«l=.. )" << 
Endl
;

1515 
	`Log
(Ë<< 
kDEBUG


1516 << " ... i.e. suchÅh© Sum[i=1..N_j]{w_i} = N_j, j=0,1,2..." << 
Endl
;

1517 
	`Log
(Ë<< 
kDEBUG


1518 << " ... (nŸêth© N_j i†thêsum o‡TRAININGÉvít†“Tøö_j...wôh j=Sig«l,Background.." << 
Endl
;

1519 
	`Log
(Ë<< 
kDEBUG


1520 << " ..... Te°ögÉvít†¨ênŸÑí‹mÆi£dÇ‹ in˛uded i¿thêªn‹mÆißti⁄ fa˘‹! )"<< 
Endl
;

1522  
UI¡_t
 
˛s
 = 0, 
˛sEnd
 = 
dsi
.
	`GëNCœs£s
(); cls < clsEnd; ++cls ){

1526 
ªn‹mFa˘‹
.
	`©
(
˛s
Ë((
Flﬂt_t
)
åaöögSizePîCœss
.at(cls) )/

1527 (
åaöögSumWeightsPîCœss
.
	`©
(
˛s
)) ;

1530 i‡(
n‹mMode
 == "EQUALNUMEVENTS") {

1536 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "Weighàªn‹mÆißti⁄ mode: \"EquÆNumEvíts\":Ñí‹mÆi£†Æ»evíà˛as£†..." << 
Endl
;

1537 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " suchÅh©Åhêef„˘ivê(weighãdËnumbî o‡evít†öÉach cœs†i†thêßmê" << 
Endl
;

1538 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " (™dÉquÆ†thênumbî o‡evít†”¡rõsËgiví f‹ cœss=0 )" << 
Endl
;

1539 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "... i.e. suchÅh© Sum[i=1..N_j]{w_i} = N_˛assA, j=˛assA, cœssB, ..." << 
Endl
;

1540 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< "... (nŸêth© N_j i†thêsum o‡TRAININGÉvíts" << 
Endl
;

1541 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< " ..... Te°ögÉvít†¨ênŸÑí‹mÆi£dÇ‹ in˛uded i¿thêªn‹mÆißti⁄ fa˘‹!)" << 
Endl
;

1544 
UI¡_t
 
ª„ªn˚Cœss
 = 0;

1545 
UI¡_t
 
˛s
 = 0, 
˛sEnd
 = 
dsi
.
	`GëNCœs£s
(); cls < clsEnd; ++cls ) {

1546 
ªn‹mFa˘‹
.
	`©
(
˛s
Ë
	`Flﬂt_t
(
åaöögSizePîCœss
.©(
ª„ªn˚Cœss
))/

1547 (
åaöögSumWeightsPîCœss
.
	`©
(
˛s
));

1551 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
())<< "<Pª∑ªF‹TøöögAndTe°ög> Unknow¿N‹mMode: " << 
n‹mMode
 << 
Endl
;

1556 
I¡_t
 
maxL
 = 
dsi
.
	`GëCœssNameMaxLígth
();

1557 
UI¡_t
 
˛s
 = 0, 
˛sEnd
 = 
dsi
.
	`GëNCœs£s
(); cls<clsEnd; ++cls) {

1558 
	`Log
(Ë<< 
kDEBUG


1559 << "--> ResˇÀ " << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
)

1560 << 
dsi
.
	`GëCœssInfo
(
˛s
)->
	`GëName
(Ë<< "Évíàweight†by fa˘‹: " << 
ªn‹mFa˘‹
.
	`©
(˛sË<< 
Endl
;

1561 
EvítVe˘‹
::
ôî©‹
 
ô
 = 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`begö
(),

1562 
ôEnd
 = 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`íd
(); 
ô
 != itEnd; ++it){

1563 (*
ô
)->
	`SëWeight
 ((*ô)->
	`GëWeight
(Ë* 
ªn‹mFa˘‹
.
	`©
(
˛s
));

1573 
	`Log
(Ë<< 
kINFO


1574 << "Numbî o‡åaöögándÅe°ögÉvíts" << 
Endl
;

1575 
	`Log
(Ë<< 
kDEBUG
 << "\è·îÑesˇlög:" << 
Endl
;

1576 
	`Log
(Ë<< 
kINFO


1577 << "---------------------------------------------------------------------------" << 
Endl
;

1579 
åaöögSumSig«lWeights
 = 0;

1580 
åaöögSumBackgrWeights
 = 0;

1581 
ã°ögSumSig«lWeights
 = 0;

1582 
ã°ögSumBackgrWeights
 = 0;

1584  
UI¡_t
 
˛s
 = 0, 
˛sEnd
 = 
dsi
.
	`GëNCœs£s
(); cls < clsEnd; ++cls ){

1586 
åaöögSumWeightsPîCœss
.
	`©
(
˛s
Ë(
°d
::
	`accumuœã
–
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].©(˛s).
	`begö
(),

1587 
tmpEvítVe˘‹
[
Ty≥s
::
kTøöög
].
	`©
(
˛s
).
	`íd
(),

1588 
	`DoubÀ_t
(0),

1589 
	`compo£_bö¨y
–
°d
::
∂us
<
DoubÀ_t
>(),

1590 
nuŒ
<
DoubÀ_t
>(),

1591 
°d
::
	`mem_fun
(&
TMVA
::
Evít
::
GëOrigöÆWeight
) ) ));

1593 
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
Ë
°d
::
	`accumuœã
–
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].©(˛s).
	`begö
(),

1594 
tmpEvítVe˘‹
[
Ty≥s
::
kTe°ög
].
	`©
(
˛s
).
	`íd
(),

1595 
	`DoubÀ_t
(0),

1596 
	`compo£_bö¨y
–
°d
::
∂us
<
DoubÀ_t
>(),

1597 
nuŒ
<
DoubÀ_t
>(),

1598 
°d
::
	`mem_fun
(&
TMVA
::
Evít
::
GëOrigöÆWeight
) ) );

1601 i‡–
˛s
 =
dsi
.
	`GëSig«lCœssIndex
()){

1602 
åaöögSumSig«lWeights
 +
åaöögSumWeightsPîCœss
.
	`©
(
˛s
);

1603 
ã°ögSumSig«lWeights
 +
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
);

1605 
åaöögSumBackgrWeights
 +
åaöögSumWeightsPîCœss
.
	`©
(
˛s
);

1606 
ã°ögSumBackgrWeights
 +
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
);

1611 
	`Log
(Ë<< 
kINFO


1612 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
)

1613 << 
dsi
.
	`GëCœssInfo
(
˛s
)->
	`GëName
() << " -- "

1614 << "åaöögÉvít† : " << 
åaöögSizePîCœss
.
	`©
(
˛s
Ë<< 
Endl
;

1615 
	`Log
(Ë<< 
kDEBUG
 << "\t(sum o‡weights: " << 
åaöögSumWeightsPîCœss
.
	`©
(
˛s
) << ")"

1616 << " -Ñeque°ed wîê" << 
evítCou¡s
[
˛s
].
nTøöögEvítsReque°ed
 << "Évíts" << 
Endl
;

1617 
	`Log
(Ë<< 
kINFO


1618 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
)

1619 << 
dsi
.
	`GëCœssInfo
(
˛s
)->
	`GëName
() << " -- "

1620 << "ã°ögÉvít† : " << 
ã°ögSizePîCœss
.
	`©
(
˛s
Ë<< 
Endl
;

1621 
	`Log
(Ë<< 
kDEBUG
 << "\t(sum o‡weights: " << 
ã°ögSumWeightsPîCœss
.
	`©
(
˛s
) << ")"

1622 << " -Ñeque°ed wîê" << 
evítCou¡s
[
˛s
].
nTe°ögEvítsReque°ed
 << "Évíts" << 
Endl
;

1623 
	`Log
(Ë<< 
kINFO


1624 << 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
)

1625 << 
dsi
.
	`GëCœssInfo
(
˛s
)->
	`GëName
() << " -- "

1627 << (
åaöögSizePîCœss
.
	`©
(
˛s
)+
ã°ögSizePîCœss
.©(˛s)Ë<< 
Endl
;

1628 
	`Log
(Ë<< 
kDEBUG
 << "\t(sum of weights: "

1629 << (
åaöögSumWeightsPîCœss
.
	`©
(
˛s
)+
ã°ögSumWeightsPîCœss
.©(˛s)Ë<< ")" << 
Endl
;

1630 if(
evítCou¡s
[
˛s
].
nEvA·îCut
<evítCou¡s[˛s].
nEvBef‹eCut
) {

1631 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
dsi
.
	`GëName
()Ë<< 
	`£tiosÊags
(
ios
::
À·
Ë<< 
°d
::
	`£tw
(
maxL
)

1632 << 
dsi
.
	`GëCœssInfo
(
˛s
)->
	`GëName
() << " -- "

1634 << 
evítCou¡s
[
˛s
].
	`cutSˇlög
(Ë<< 
Endl
;

1637 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1640 
dsi
.
	`SëTøöögSumSig«lWeights
(
åaöögSumSig«lWeights
);

1641 
dsi
.
	`SëTøöögSumBackgrWeights
(
åaöögSumBackgrWeights
);

1642 
dsi
.
	`SëTe°ögSumSig«lWeights
(
ã°ögSumSig«lWeights
);

1643 
dsi
.
	`SëTe°ögSumBackgrWeights
(
ã°ögSumBackgrWeights
);

1646 
	}
}

	@src/DataSetInfo.cxx

34 
	~<ve˘‹
>

36 
	~"TEvítLi°.h
"

37 
	~"TFûe.h
"

38 
	~"TH1.h
"

39 
	~"TH2.h
"

40 
	~"TProfûe.h
"

41 
	~"TR™dom3.h
"

42 
	~"TM©rixF.h
"

43 
	~"TVe˘‹F.h
"

44 
	~"TM©h.h
"

45 
	~"TROOT.h
"

46 
	~"TObjSåög.h
"

48 
	~"TMVA/MsgLoggî.h
"

49 
	~"TMVA/Toﬁs.h
"

50 
	~"TMVA/D©aSë.h
"

51 
	~"TMVA/D©aSëInfo.h
"

52 
	~"TMVA/D©aSëM™agî.h
"

53 
	~"TMVA/Evít.h
"

55 
	~"TMVA/Ty≥s.h
"

56 
	~"TMVA/V¨übÀInfo.h
"

61 
	gTMVA
::
D©aSëInfo
::
	$D©aSëInfo
(c⁄° 
TSåög
& 
«me
)

62 : 
	`TObje˘
(),

63 
	`fD©aSëM™agî
(
NULL
),

64 
	`fName
(
«me
),

65 
	`fD©aSë
( 0 ),

66 
	`fNìdsRebuûdög
–
kTRUE
 ),

67 
	`fV¨übÀs
(),

68 
	`fT¨gës
(),

69 
	`fS≥˘©‹s
(),

70 
	`fCœs£s
( 0 ),

71 
	`fN‹mÆiz©i⁄
( "NONE" ),

72 
	`fS∂ôO±i⁄s
(""),

73 
	`fTøöögSumSig«lWeights
(-1),

74 
	`fTøöögSumBackgrWeights
(-1),

75 
	`fTe°ögSumSig«lWeights
 (-1),

76 
	`fTe°ögSumBackgrWeights
 (-1),

77 
	`fOwnRoŸDú
(0),

78 
	`fVîbo£
–
kFALSE
 ),

79 
	`fSig«lCœss
(0),

80 
	`fT¨gësF‹Mu…i˛ass
(0),

81 
	`fLoggî
–
√w
 
	`MsgLoggî
("D©aSëInfo", 
kINFO
) )

83 
	}
}

88 
	gTMVA
::
D©aSëInfo
::~
	$D©aSëInfo
()

90 
	`CÀ¨D©aSë
();

92 
UI¡_t
 
i
=0, 
iEnd
 = 
fCœs£s
.
	`size
(); i<iEnd; ++i) {

93 
dñëe
 
fCœs£s
[
i
];

96 
dñëe
 
fT¨gësF‹Mu…i˛ass
;

98 
dñëe
 
fLoggî
;

99 
	}
}

103 
	gTMVA
::
D©aSëInfo
::
	$CÀ¨D©aSë
() const

105 if(
fD©aSë
!=0Ë{ 
dñëe
 fDataSet; fDataSet=0; }

106 
	}
}

111 
	gTMVA
::
D©aSëInfo
::
	$SëMsgTy≥
–
EMsgTy≥
 
t
 ) const

113 
fLoggî
->
	`SëMöTy≥
(
t
);

114 
	}
}

118 
	gTMVA
::
CœssInfo
* 
TMVA
::
D©aSëInfo
::
	$AddCœss
–c⁄° 
TSåög
& 
˛assName
 )

120 
CœssInfo
* 
theCœss
 = 
	`GëCœssInfo
(
˛assName
);

121 i‡(
theCœss
) ÅheClass;

124 
fCœs£s
.
	`push_back
–
√w
 
	`CœssInfo
(
˛assName
) );

125 
fCœs£s
.
	`back
()->
	`SëNumbî
(fCœs£s.
	`size
()-1);

129 
	`Log
(Ë<< 
kHEADER
 << 
	`F‹m
("[%s] : ",
fName
.
	`D©a
()Ë<< "Added cœs†\"" << 
˛assName
 << "\""<< 
Endl
;

131 
	`Log
(Ë<< 
kDEBUG
 <<"\àwôh i¡î«»˛as†numbî " << 
fCœs£s
.
	`back
()->
	`GëNumbî
(Ë<< 
Endl
;

134 i‡(
˛assName
 ="Sig«l"Ë
fSig«lCœss
 = 
fCœs£s
.
	`size
()-1;

136  
fCœs£s
.
	`back
();

137 
	}
}

141 
	gTMVA
::
CœssInfo
* 
TMVA
::
D©aSëInfo
::
	$GëCœssInfo
–c⁄° 
TSåög
& 
«me
 ) const

143 
°d
::
ve˘‹
<
CœssInfo
*>::
ôî©‹
 
ô
 = 
fCœs£s
.
	`begö
(); ià< fCœs£s.
	`íd
(); it++) {

144 i‡((*
ô
)->
	`GëName
(Ë=
«me
)  (*it);

147 
	}
}

151 
	gTMVA
::
CœssInfo
* 
TMVA
::
D©aSëInfo
::
	$GëCœssInfo
–
I¡_t
 
˛s
 ) const

153 
åy
 {

154  
fCœs£s
.
	`©
(
˛s
);

156 
	`ˇtch
(...) {

159 
	}
}

163 
	gTMVA
::
D©aSëInfo
::
	$PrötCœs£s
() const

165 
UI¡_t
 
˛s
 = 0; cl†< 
	`GëNCœs£s
() ; cls++) {

166 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "Cœs†ödex : " << 
˛s
 << "Çamê: " << 
	`GëCœssInfo
(˛s)->
	`GëName
(Ë<< 
Endl
;

168 
	}
}

172 
Boﬁ_t
 
	gTMVA
::
D©aSëInfo
::
	$IsSig«l
–c⁄° 
TMVA
::
Evít
* 
ev
 ) const

174  (
ev
->
	`GëCœss
(Ë=
fSig«lCœss
);

175 
	}
}

179 
	g°d
::
ve˘‹
<
Flﬂt_t
>* 
TMVA
::
D©aSëInfo
::
	$GëT¨gësF‹Mu…i˛ass
–c⁄° 
TMVA
::
Evít
* 
ev
 )

181 if–!
fT¨gësF‹Mu…i˛ass
 ) fT¨gësF‹Mu…i˛as†
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>–
	`GëNCœs£s
() );

183 
fT¨gësF‹Mu…i˛ass
->
	`assign
–
	`GëNCœs£s
(), 0.0 );

184 
fT¨gësF‹Mu…i˛ass
->
	`©
–
ev
->
	`GëCœss
() ) = 1.0;

185  
fT¨gësF‹Mu…i˛ass
;

186 
	}
}

191 
Boﬁ_t
 
	gTMVA
::
D©aSëInfo
::
	$HasCuts
() const

193 
Boﬁ_t
 
hasCuts
 = 
kFALSE
;

194 
°d
::
ve˘‹
<
CœssInfo
*>::
ôî©‹
 
ô
 = 
fCœs£s
.
	`begö
(); ià< fCœs£s.
	`íd
(); it++) {

195 if–
	`TSåög
((*
ô
)->
	`GëCut
()Ë!TSåög(""ËË
hasCuts
 = 
kTRUE
;

197  
hasCuts
;

198 
	}
}

202 c⁄° 
TM©rixD
* 
	gTMVA
::
D©aSëInfo
::
	$C‹ªœti⁄M©rix
–c⁄° 
TSåög
& 
˛assName
 ) const

204 
CœssInfo
* 
±r
 = 
	`GëCœssInfo
(
˛assName
);

205  
±r
?±r->
	`GëC‹ªœti⁄M©rix
():0;

206 
	}
}

212 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddV¨übÀ
–c⁄° 
TSåög
& 
ex¥essi⁄
,

213 c⁄° 
TSåög
& 
tôÀ
,

214 c⁄° 
TSåög
& 
unô
,

215 
DoubÀ_t
 
mö
, DoubÀ_à
max
,

216 
v¨Ty≥
,

217 
Boﬁ_t
 
n‹mÆized
,

218 * 
exã∫Æ
 )

220 
TSåög
 
ªgex¥
 = 
ex¥essi⁄
;

221 
ªgex¥
.
	`Rïœ˚AŒ
(" ", "" );

222 
fV¨übÀs
.
	`push_back
(
	`V¨übÀInfo
–
ªgex¥
, 
tôÀ
, 
unô
,

223 
fV¨übÀs
.
	`size
()+1, 
v¨Ty≥
, 
exã∫Æ
, 
mö
, 
max
, 
n‹mÆized
 ));

224 
fNìdsRebuûdög
 = 
kTRUE
;

225  
fV¨übÀs
.
	`back
();

226 
	}
}

231 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddV¨übÀ
–c⁄° 
V¨übÀInfo
& 
v¨Info
){

232 
fV¨übÀs
.
	`push_back
(
	`V¨übÀInfo
–
v¨Info
 ));

233 
fNìdsRebuûdög
 = 
kTRUE
;

234  
fV¨übÀs
.
	`back
();

235 
	}
}

241 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddT¨gë
–c⁄° 
TSåög
& 
ex¥essi⁄
,

242 c⁄° 
TSåög
& 
tôÀ
,

243 c⁄° 
TSåög
& 
unô
,

244 
DoubÀ_t
 
mö
, DoubÀ_à
max
,

245 
Boﬁ_t
 
n‹mÆized
,

246 * 
exã∫Æ
 )

248 
TSåög
 
ªgex¥
 = 
ex¥essi⁄
;

249 
ªgex¥
.
	`Rïœ˚AŒ
(" ", "" );

250 
ty≥
='F';

251 
fT¨gës
.
	`push_back
(
	`V¨übÀInfo
–
ªgex¥
, 
tôÀ
, 
unô
,

252 
fT¨gës
.
	`size
()+1, 
ty≥
, 
exã∫Æ
, 
mö
,

253 
max
, 
n‹mÆized
 ));

254 
fNìdsRebuûdög
 = 
kTRUE
;

255  
fT¨gës
.
	`back
();

256 
	}
}

261 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddT¨gë
–c⁄° 
V¨übÀInfo
& 
v¨Info
){

262 
fT¨gës
.
	`push_back
(
	`V¨übÀInfo
–
v¨Info
 ));

263 
fNìdsRebuûdög
 = 
kTRUE
;

264  
fT¨gës
.
	`back
();

265 
	}
}

271 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddS≥˘©‹
–c⁄° 
TSåög
& 
ex¥essi⁄
,

272 c⁄° 
TSåög
& 
tôÀ
,

273 c⁄° 
TSåög
& 
unô
,

274 
DoubÀ_t
 
mö
, DoubÀ_à
max
, 
ty≥
,

275 
Boﬁ_t
 
n‹mÆized
, * 
exã∫Æ
 )

277 
TSåög
 
ªgex¥
 = 
ex¥essi⁄
;

278 
ªgex¥
.
	`Rïœ˚AŒ
(" ", "" );

279 
fS≥˘©‹s
.
	`push_back
(
	`V¨übÀInfo
–
ªgex¥
, 
tôÀ
, 
unô
,

280 
fS≥˘©‹s
.
	`size
()+1, 
ty≥
, 
exã∫Æ
, 
mö
, 
max
, 
n‹mÆized
 ));

281 
fNìdsRebuûdög
 = 
kTRUE
;

282  
fS≥˘©‹s
.
	`back
();

283 
	}
}

288 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::
D©aSëInfo
::
	$AddS≥˘©‹
–c⁄° 
V¨übÀInfo
& 
v¨Info
){

289 
fS≥˘©‹s
.
	`push_back
(
	`V¨übÀInfo
–
v¨Info
 ));

290 
fNìdsRebuûdög
 = 
kTRUE
;

291  
fS≥˘©‹s
.
	`back
();

292 
	}
}

297 
I¡_t
 
	gTMVA
::
D©aSëInfo
::
	$FödV¨Index
(c⁄° 
TSåög
& 
v¨
) const

299 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNV¨übÀs
(); ivar++)

300 i‡(
v¨
 =
	`GëV¨übÀInfo
(
iv¨
).
	`GëI¡î«lName
())  ivar;

302 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNV¨übÀs
(); ivar++)

303 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< 
	`GëV¨übÀInfo
(
iv¨
).
	`GëI¡î«lName
(Ë<< 
Endl
;

305 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "<FödV¨Index> V¨übÀ \'" << 
v¨
 << "\'ÇŸ found." << 
Endl
;

308 
	}
}

315 
	gTMVA
::
D©aSëInfo
::
	$SëWeightEx¥essi⁄
–c⁄° 
TSåög
& 
ex¥
, c⁄° TSåög& 
˛assName
 )

317 i‡(
˛assName
 != "") {

318 
TMVA
::
CœssInfo
* 
ci
 = 
	`AddCœss
(
˛assName
);

319 
ci
->
	`SëWeight
–
ex¥
 );

323 i‡(
fCœs£s
.
	`em±y
()) {

324 
	`Log
(Ë<< 
kWARNING
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "Nÿ˛as£†ªgi°îed yë, c™nŸ s≥cify weighàex¥essi⁄!" << 
Endl
;

326 
°d
::
ve˘‹
<
CœssInfo
*>::
ôî©‹
 
ô
 = 
fCœs£s
.
	`begö
(); ià< fCœs£s.
	`íd
(); it++) {

327 (*
ô
)->
	`SëWeight
–
ex¥
 );

330 
	}
}

334 
	gTMVA
::
D©aSëInfo
::
	$SëC‹ªœti⁄M©rix
–c⁄° 
TSåög
& 
˛assName
, 
TM©rixD
* 
m©rix
 )

336 
	`GëCœssInfo
(
˛assName
)->
	`SëC‹ªœti⁄M©rix
(
m©rix
);

337 
	}
}

342 
	gTMVA
::
D©aSëInfo
::
	$SëCut
–c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
˛assName
 )

344 i‡(
˛assName
 == "") {

345 
°d
::
ve˘‹
<
CœssInfo
*>::
ôî©‹
 
ô
 = 
fCœs£s
.
	`begö
(); ià< fCœs£s.
	`íd
(); it++) {

346 (*
ô
)->
	`SëCut
–
cut
 );

350 
TMVA
::
CœssInfo
* 
ci
 = 
	`AddCœss
(
˛assName
);

351 
ci
->
	`SëCut
–
cut
 );

353 
	}
}

358 
	gTMVA
::
D©aSëInfo
::
	$AddCut
–c⁄° 
TCut
& 
cut
, c⁄° 
TSåög
& 
˛assName
 )

360 i‡(
˛assName
 == "") {

361 
°d
::
ve˘‹
<
CœssInfo
*>::
ôî©‹
 
ô
 = 
fCœs£s
.
	`begö
(); ià< fCœs£s.
	`íd
(); it++) {

362 c⁄° 
TCut
& 
ﬁdCut
 = (*
ô
)->
	`GëCut
();

363 (*
ô
)->
	`SëCut
–
ﬁdCut
+
cut
 );

367 
TMVA
::
CœssInfo
* 
ci
 = 
	`AddCœss
(
˛assName
);

368 
ci
->
	`SëCut
–ci->
	`GëCut
()+
cut
 );

370 
	}
}

375 
	g°d
::
ve˘‹
<
TSåög
> 
TMVA
::
D©aSëInfo
::
	$GëLi°OfV¨übÀs
() const

377 
°d
::
ve˘‹
<
TSåög
> 
vNames
;

378 
°d
::
ve˘‹
<
TMVA
::
V¨übÀInfo
>::
c⁄°_ôî©‹
 
viIt
 = 
	`GëV¨übÀInfos
().
	`begö
();

379 ;
viIt
 !
	`GëV¨übÀInfos
().
	`íd
(); viIt++Ë
vNames
.
	`push_back
–(*viIt).
	`GëEx¥essi⁄
() );

381  
vNames
;

382 
	}
}

388 
	gTMVA
::
D©aSëInfo
::
	$PrötC‹ªœti⁄M©rix
–c⁄° 
TSåög
& 
˛assName
 )

391 
	`Log
(Ë<< 
kHEADER


392 << "C‹ªœti⁄ m©rix (" << 
˛assName
 << "):" << 
Endl
;

393 
	`gToﬁs
().
	`F‹m©ãdOuçut
–*
	`C‹ªœti⁄M©rix
–
˛assName
 ), 
	`GëLi°OfV¨übÀs
(), 
	`Log
() );

394 
	}
}

398 
TH2
* 
	gTMVA
::
D©aSëInfo
::
	$Cª©eC‹ªœti⁄M©rixHi°
–c⁄° 
TM©rixD
* 
m
,

399 c⁄° 
TSåög
& 
hName
,

400 c⁄° 
TSåög
& 
hTôÀ
 ) const

402 i‡(
m
==0)  0;

404 c⁄° 
UI¡_t
 
nv¨
 = 
	`GëNV¨übÀs
();

408 
TM©rixF
* 
tm
 = 
√w
 
	`TM©rixF
–
nv¨
,Çvar );

409 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

410 
UI¡_t
 
jv¨
=0; jv¨<
nv¨
; jvar++) {

411 (*
tm
)(
iv¨
, 
jv¨
Ë(*
m
)(ivar,jvar);

415 
TH2F
* 
h2
 = 
√w
 
	`TH2F
–*
tm
 );

416 
h2
->
	`SëNameTôÀ
–
hName
, 
hTôÀ
 );

418 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

419 
h2
->
	`GëXaxis
()->
	`SëBöLabñ
–
iv¨
+1, 
	`GëV¨übÀInfo
(iv¨).
	`GëTôÀ
() );

420 
h2
->
	`GëYaxis
()->
	`SëBöLabñ
–
iv¨
+1, 
	`GëV¨übÀInfo
(iv¨).
	`GëTôÀ
() );

425 
h2
->
	`SˇÀ
( 100.0 );

426 
UI¡_t
 
ibö
=1; ibö<=
nv¨
; ibin++) {

427 
UI¡_t
 
jbö
=1; jbö<=
nv¨
; jbin++) {

428 
h2
->
	`SëBöC⁄ã¡
–
ibö
, 
jbö
, 
	`I¡_t
(h2->
	`GëBöC⁄ã¡
( ibin, jbin )) );

433 c⁄° 
Flﬂt_t
 
œbñSize
 = 0.055;

434 
h2
->
	`SëSèts
( 0 );

435 
h2
->
	`GëXaxis
()->
	`SëLabñSize
–
œbñSize
 );

436 
h2
->
	`GëYaxis
()->
	`SëLabñSize
–
œbñSize
 );

437 
h2
->
	`SëM¨kîSize
( 1.5 );

438 
h2
->
	`SëM¨kîCﬁ‹
( 0 );

439 
h2
->
	`LabñsO±i⁄
( "d" );

440 
h2
->
	`SëLabñOff£t
( 0.011 );

441 
h2
->
	`SëMöimum
( -100.0 );

442 
h2
->
	`SëMaximum
( +100.0 );

454 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "Cª©ed c‹ªœti⁄ m©rixá†2D hi°ogøm: " << 
h2
->
	`GëName
(Ë<< 
Endl
;

456  
h2
;

457 
	}
}

462 
	gTMVA
::
D©aSë
* 
TMVA
::
D©aSëInfo
::
	$GëD©aSë
() const

464 i‡(
fD©aSë
==0 || 
fNìdsRebuûdög
) {

465 if(
fD©aSë
!=0Ë
	`CÀ¨D©aSë
();

467 if–!
fD©aSëM™agî
 )

468 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "D©aSëM™agî ha†nŸ bì¿£àö D©aSëInfÿ(GëD©aSë(Ë)." << 
Endl
;

469 
fD©aSë
 = 
fD©aSëM™agî
->
	`Cª©eD©aSë
(
	`GëName
());

471 
fNìdsRebuûdög
 = 
kFALSE
;

473  
fD©aSë
;

474 
	}
}

478 
UI¡_t
 
	gTMVA
::
D©aSëInfo
::
	$GëNS≥˘©‹s
(
boﬁ
 
Æl
) const

480 if(
Æl
)

481  
fS≥˘©‹s
.
	`size
();

482 
UI¡_t
 
	`n•
(0);

483 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
•ô
=
fS≥˘©‹s
.
	`begö
(); spô!=fS≥˘©‹s.
	`íd
(); ++spit) {

484 if(
•ô
->
	`GëV¨Ty≥
()!='C'Ë
n•
++;

486  
n•
;

487 
	}
}

491 
I¡_t
 
	gTMVA
::
D©aSëInfo
::
	$GëCœssNameMaxLígth
() const

493 
I¡_t
 
maxL
 = 0;

494 
UI¡_t
 
˛
 = 0; c»< 
	`GëNCœs£s
(); cl++) {

495 i‡(
	`TSåög
(
	`GëCœssInfo
(
˛
)->
	`GëName
()).
	`Lígth
(Ë> 
maxL
) maxL = TString(GetClassInfo(cl)->GetName()).Length();

498  
maxL
;

499 
	}
}

503 
I¡_t
 
	gTMVA
::
D©aSëInfo
::
	$GëV¨übÀNameMaxLígth
() const

505 
I¡_t
 
maxL
 = 0;

506 
UI¡_t
 
i
 = 0; i < 
	`GëNV¨übÀs
(); i++) {

507 i‡(
	`TSåög
(
	`GëV¨übÀInfo
(
i
).
	`GëEx¥essi⁄
()).
	`Lígth
(Ë> 
maxL
) maxL = TString(GetVariableInfo(i).GetExpression()).Length();

510  
maxL
;

511 
	}
}

515 
I¡_t
 
	gTMVA
::
D©aSëInfo
::
	$GëT¨gëNameMaxLígth
() const

517 
I¡_t
 
maxL
 = 0;

518 
UI¡_t
 
i
 = 0; i < 
	`GëNT¨gës
(); i++) {

519 i‡(
	`TSåög
(
	`GëT¨gëInfo
(
i
).
	`GëEx¥essi⁄
()).
	`Lígth
(Ë> 
maxL
) maxL = TString(GetTargetInfo(i).GetExpression()).Length();

522  
maxL
;

523 
	}
}

527 
DoubÀ_t
 
	gTMVA
::
D©aSëInfo
::
	$GëTøöögSumSig«lWeights
(){

528 i‡(
fTøöögSumSig«lWeights
<0Ë
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "áskög f‹Åhêsum o‡åaöög sig«»evíàweight†which i†nŸ inôülized yë" << 
Endl
;

529  
fTøöögSumSig«lWeights
;

530 
	}
}

534 
DoubÀ_t
 
	gTMVA
::
D©aSëInfo
::
	$GëTøöögSumBackgrWeights
(){

535 i‡(
fTøöögSumBackgrWeights
<0Ë
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "áskög f‹Åhêsum o‡åaöög backg∏evíàweight†which i†nŸ inôülized yë" << 
Endl
;

536  
fTøöögSumBackgrWeights
;

537 
	}
}

541 
DoubÀ_t
 
	gTMVA
::
D©aSëInfo
::
	$GëTe°ögSumSig«lWeights
 (){

542 i‡(
fTe°ögSumSig«lWeights
<0Ë
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "áskög f‹Åhêsum o‡ã°ög sig«»evíàweight†which i†nŸ inôülized yë" << 
Endl
;

543  
fTe°ögSumSig«lWeights
 ;

544 
	}
}

548 
DoubÀ_t
 
	gTMVA
::
D©aSëInfo
::
	$GëTe°ögSumBackgrWeights
 (){

549 i‡(
fTe°ögSumBackgrWeights
<0Ë
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ",
fName
.
	`D©a
()Ë<< "áskög f‹Åhêsum o‡ã°ög backg∏evíàweight†which i†nŸ inôülized yë" << 
Endl
;

550  
fTe°ögSumBackgrWeights
 ;

551 
	}
}

	@src/DataSetManager.cxx

34 
	~<ve˘‹
>

35 
	~<io°ªam
>

36 
usög
 
	g°d
::
ídl
;

38 
	~"TMVA/D©aSëM™agî.h
"

39 
	~"TMVA/D©aSëFa˘‹y.h
"

40 
	~"TMVA/D©aSë.h
"

41 
	~"TMVA/D©aSëInfo.h
"

42 
	~"TMVA/MsgLoggî.h
"

44 
	~"TMVA/Ty≥s.h
"

49 
	gTMVA
::
D©aSëM™agî
::
	$D©aSëM™agî
–
D©aI≈utH™dÀr
& 
d©aI≈ut
 )

50 : 
	`fD©a£tFa˘‹y
(0),

51 
	`fD©aI≈ut
(&
d©aI≈ut
),

52 
	`fD©aSëInfoCﬁÀ˘i⁄
(),

53 
	`fLoggî
–
√w
 
	`MsgLoggî
("D©aSëM™agî", 
kINFO
) )

55 
	}
}

60 
	gTMVA
::
D©aSëM™agî
::
	$D©aSëM™agî
( )

61 : 
	`fD©a£tFa˘‹y
(0),

62 
	`fD©aI≈ut
(0),

63 
	`fD©aSëInfoCﬁÀ˘i⁄
(),

64 
	`fLoggî
–
√w
 
	`MsgLoggî
("D©aSëM™agî", 
kINFO
) )

66 
	}
}

73 
	gTMVA
::
D©aSëM™agî
::~
	$D©aSëM™agî
()

75 if(
fD©a£tFa˘‹y
Ë
dñëe
 fDatasetFactory;

77 
dñëe
 
fLoggî
;

78 
	}
}

83 
	gTMVA
::
D©aSë
* 
TMVA
::
D©aSëM™agî
::
	$Cª©eD©aSë
–c⁄° 
TSåög
& 
dsiName
 )

85 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
–
dsiName
 );

86 i‡(!
dsi
Ë
	`Log
(Ë<< 
kFATAL
 << "D©aSëInfÿobje˘ '" << 
dsiName
 << "'ÇŸ found" << 
Endl
;

87 i‡(!
fD©aI≈ut
 ) 
	`Log
(Ë<< 
kFATAL
 << "D©aI≈utH™dÀ∏obje˘ 'fD©aI≈ut'ÇŸ found" << 
Endl
;

90 if(!
fD©a£tFa˘‹y
Ë{ fD©a£tFa˘‹y =
√w
 
	`D©aSëFa˘‹y
(); }

91  
fD©a£tFa˘‹y
->
	`Cª©eD©aSë
–*
dsi
, *
fD©aI≈ut
 );

92 
	}
}

97 
	gTMVA
::
D©aSëInfo
* 
TMVA
::
D©aSëM™agî
::
	$GëD©aSëInfo
(c⁄° 
TSåög
& 
dsiName
)

99  (
D©aSëInfo
*)
fD©aSëInfoCﬁÀ˘i⁄
.
	`FödObje˘
–
dsiName
 );

100 
	}
}

105 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
D©aSëM™agî
::
	$AddD©aSëInfo
(
D©aSëInfo
& 
dsi
)

107 
dsi
.
	`SëD©aSëM™agî
–
this
 );

109 
D©aSëInfo
 * 
dsiInLi°
 = 
	`GëD©aSëInfo
(
dsi
.
	`GëName
());

110 i‡(
dsiInLi°
!=0)  *dsiInList;

111 
fD©aSëInfoCﬁÀ˘i⁄
.
	`Add
–
c⁄°_ˇ°
<
D©aSëInfo
*>(&
dsi
) );

112  
dsi
;

113 
	}
}

	@src/DecisionTree.cxx

60 
	~<io°ªam
>

61 
	~<Æg‹ôhm
>

62 
	~<ve˘‹
>

63 
	~<limôs
>

64 
	~<f°ªam
>

65 
	~<Æg‹ôhm
>

66 
	~<ˇs£π
>

68 
	~"TR™dom3.h
"

69 
	~"TM©h.h
"

70 
	~"TM©rix.h
"

72 
	~"TMVA/MsgLoggî.h
"

73 
	~"TMVA/Decisi⁄Tªe.h
"

74 
	~"TMVA/Decisi⁄TªeNode.h
"

75 
	~"TMVA/Bö¨ySórchTªe.h
"

77 
	~"TMVA/Toﬁs.h
"

79 
	~"TMVA/GöiIndex.h
"

80 
	~"TMVA/CrossE¡r›y.h
"

81 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

82 
	~"TMVA/SdivSqπS∂usB.h
"

83 
	~"TMVA/Evít.h
"

84 
	~"TMVA/BDTEvítWøµî.h
"

85 
	~"TMVA/IPru√Toﬁ.h
"

86 
	~"TMVA/Co°Com∂exôyPru√Toﬁ.h
"

87 
	~"TMVA/Ex≥˘edEº‹Pru√Toﬁ.h
"

89 c⁄° 
I¡_t
 
	gTMVA
::
Decisi⁄Tªe
::
fgR™domSìd
 = 0;

91 
usög
 
	g°d
::
ve˘‹
;

93 
CœssImp
(
TMVA
::
Decisi⁄Tªe
);

95 
boﬁ
 
	$Æmo°_equÆ_Êﬂt
(
x
, 
y
, 
uÕ
=4){

98  
°d
::
	`abs
(
x
-
y
Ë< std::
numîic_limôs
<>::
	`ïsû⁄
(Ë* std::abs(x+yË* 
uÕ


100 || 
°d
::
	`abs
(
x
-
y
Ë< std::
numîic_limôs
<>::
	`mö
();

101 
	}
}

103 
boﬁ
 
	$Æmo°_equÆ_doubÀ
(
x
, 
y
, 
uÕ
=4){

106  
°d
::
	`abs
(
x
-
y
Ë< std::
numîic_limôs
<>::
	`ïsû⁄
(Ë* std::abs(x+yË* 
uÕ


108 || 
°d
::
	`abs
(
x
-
y
Ë< std::
numîic_limôs
<>::
	`mö
();

109 
	}
}

116 
	gTMVA
::
Decisi⁄Tªe
::
	$Decisi⁄Tªe
():

117 
	`Bö¨yTªe
(),

118 
	`fNv¨s
 (0),

119 
	`fNCuts
 (-1),

120 
	`fU£FishîCuts
 (
kFALSE
),

121 
	`fMöLöC‹rF‹Fishî
 (1),

122 
	`fU£Ex˛usiveV¨s
 (
kTRUE
),

123 
	`fSïTy≥
 (
NULL
),

124 
	`fRegTy≥
 (
NULL
),

125 
	`fMöSize
 (0),

126 
	`fMöNodeSize
 (1),

127 
	`fMöSïGaö
 (0),

128 
	`fU£SórchTªe
(
kFALSE
),

129 
	`fPru√Såígth
(0),

130 
	`fPru√Mëhod
 (
kNoPrunög
),

131 
	`fNNodesBef‹ePrunög
(0),

132 
	`fNodePurôyLimô
(0.5),

133 
	`fR™domi£dTªe
 (
kFALSE
),

134 
	`fU£Nv¨s
 (0),

135 
	`fU£Poiss⁄Nv¨s
(
kFALSE
),

136 
	`fMyTøndom
 (
NULL
),

137 
	`fMaxDïth
 (999999),

138 
	`fSigCœss
 (0),

139 
	`fTªeID
 (0),

140 
	`fA«lysisTy≥
 (
Ty≥s
::
kCœssifiˇti⁄
),

141 
	$fD©aSëInfo
 (
NULL
)

143 
	}
}

151 
	gTMVA
::
Decisi⁄Tªe
::
	$Decisi⁄Tªe
–
TMVA
::
Sï¨©i⁄Ba£
 *
£pTy≥
, 
Flﬂt_t
 
möSize
, 
I¡_t
 
nCuts
, 
D©aSëInfo
* 
d©aInfo
, 
UI¡_t
 
˛s
,

152 
Boﬁ_t
 
øndomi£dTªe
, 
I¡_t
 
u£Nv¨s
, Boﬁ_à
u£Poiss⁄Nv¨s
,

153 
UI¡_t
 
nMaxDïth
, 
I¡_t
 
iSìd
, 
Flﬂt_t
 
purôyLimô
, I¡_à
åìID
):

154 
	`Bö¨yTªe
(),

155 
	`fNv¨s
 (0),

156 
	`fNCuts
 (
nCuts
),

157 
	`fU£FishîCuts
 (
kFALSE
),

158 
	`fMöLöC‹rF‹Fishî
 (1),

159 
	`fU£Ex˛usiveV¨s
 (
kTRUE
),

160 
	`fSïTy≥
 (
£pTy≥
),

161 
	`fRegTy≥
 (
NULL
),

162 
	`fMöSize
 (0),

163 
	`fMöNodeSize
 (
möSize
),

164 
	`fMöSïGaö
 (0),

165 
	`fU£SórchTªe
 (
kFALSE
),

166 
	`fPru√Såígth
 (0),

167 
	`fPru√Mëhod
 (
kNoPrunög
),

168 
	`fNNodesBef‹ePrunög
(0),

169 
	`fNodePurôyLimô
(
purôyLimô
),

170 
	`fR™domi£dTªe
 (
øndomi£dTªe
),

171 
	`fU£Nv¨s
 (
u£Nv¨s
),

172 
	`fU£Poiss⁄Nv¨s
(
u£Poiss⁄Nv¨s
),

173 
	`fMyTøndom
 (
√w
 
	`TR™dom3
(
iSìd
)),

174 
	`fMaxDïth
 (
nMaxDïth
),

175 
	`fSigCœss
 (
˛s
),

176 
	`fTªeID
 (
åìID
),

177 
	`fA«lysisTy≥
 (
Ty≥s
::
kCœssifiˇti⁄
),

178 
	$fD©aSëInfo
 (
d©aInfo
)

180 i‡(
£pTy≥
 =
NULL
) {

183 
fA«lysisTy≥
 = 
Ty≥s
::
kRegªssi⁄
;

184 
fRegTy≥
 = 
√w
 
	`Regªssi⁄V¨ün˚
();

185 i‡–
nCuts
 <=0 ) {

186 
fNCuts
 = 200;

187 
	`Log
(Ë<< 
kWARNING
 << " You had chosenÅheÅraining mode using optimal cuts,Çot\n"

188 << " ba£d o¿®grid o‡" << 
fNCuts
 << " by settingÅhe option NCuts < 0\n"

189 << "á†thi†d€¢'àexi° yë, I së iàtÿ" << 
fNCuts
 << "ánd useÅhe grid"

190 << 
Endl
;

193 
fA«lysisTy≥
 = 
Ty≥s
::
kCœssifiˇti⁄
;

195 
	}
}

201 
	gTMVA
::
Decisi⁄Tªe
::
	$Decisi⁄Tªe
–c⁄° 
Decisi⁄Tªe
 &
d
 ):

202 
	`Bö¨yTªe
(),

203 
	`fNv¨s
 (
d
.
fNv¨s
),

204 
	`fNCuts
 (
d
.
fNCuts
),

205 
	`fU£FishîCuts
 (
d
.
fU£FishîCuts
),

206 
	`fMöLöC‹rF‹Fishî
 (
d
.
fMöLöC‹rF‹Fishî
),

207 
	`fU£Ex˛usiveV¨s
 (
d
.
fU£Ex˛usiveV¨s
),

208 
	`fSïTy≥
 (
d
.
fSïTy≥
),

209 
	`fRegTy≥
 (
d
.
fRegTy≥
),

210 
	`fMöSize
 (
d
.
fMöSize
),

211 
	`fMöNodeSize
(
d
.
fMöNodeSize
),

212 
	`fMöSïGaö
 (
d
.
fMöSïGaö
),

213 
	`fU£SórchTªe
 (
d
.
fU£SórchTªe
),

214 
	`fPru√Såígth
 (
d
.
fPru√Såígth
),

215 
	`fPru√Mëhod
 (
d
.
fPru√Mëhod
),

216 
	`fNodePurôyLimô
(
d
.
fNodePurôyLimô
),

217 
	`fR™domi£dTªe
 (
d
.
fR™domi£dTªe
),

218 
	`fU£Nv¨s
 (
d
.
fU£Nv¨s
),

219 
	`fU£Poiss⁄Nv¨s
(
d
.
fU£Poiss⁄Nv¨s
),

220 
	`fMyTøndom
 (
√w
 
	`TR™dom3
(
fgR™domSìd
)),

221 
	`fMaxDïth
 (
d
.
fMaxDïth
),

222 
	`fSigCœss
 (
d
.
fSigCœss
),

223 
	`fTªeID
 (
d
.
fTªeID
),

224 
	`fA«lysisTy≥
(
d
.
fA«lysisTy≥
),

225 
	$fD©aSëInfo
 (
d
.
fD©aSëInfo
)

227 
this
->
	`SëRoŸ
–
√w
 
TMVA
::
	`Decisi⁄TªeNode
 ( *((
Decisi⁄TªeNode
*)(
d
.
	`GëRoŸ
())) ) );

228 
this
->
	`SëP¨ítTªeInNodes
();

229 
fNNodes
 = 
d
.fNNodes;

230 
	}
}

236 
	gTMVA
::
Decisi⁄Tªe
::~
	$Decisi⁄Tªe
()

240 i‡(
fMyTøndom
Ë
dñëe
 fMyTrandom;

241 i‡(
fRegTy≥
Ë
dñëe
 fRegType;

242 
	}
}

248 
	gTMVA
::
Decisi⁄Tªe
::
	$SëP¨ítTªeInNodes
–
Node
 *
n
 )

250 i‡(
n
 =
NULL
) {

251 
n
 = 
this
->
	`GëRoŸ
();

252 i‡(
n
 =
NULL
) {

253 
	`Log
(Ë<< 
kFATAL
 << "SëP¨ítTªeNodes: sèπed wôh undeföed ROOTÇode" <<
Endl
;

258 i‡((
this
->
	`GëLe·Daughãr
(
n
Ë=
NULL
Ë&& (this->
	`GëRightDaughãr
(n) != NULL) ) {

259 
	`Log
(Ë<< 
kFATAL
 << " Nodêwôh o∆y o√ daughãr?? Somëhög wíàwr⁄g" << 
Endl
;

261 } i‡((
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
Ë&& (this->
	`GëRightDaughãr
(n) == NULL) ) {

262 
	`Log
(Ë<< 
kFATAL
 << " Nodêwôh o∆y o√ daughãr?? Somëhög wíàwr⁄g" << 
Endl
;

266 i‡(
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
) {

267 
this
->
	`SëP¨ítTªeInNodes
–this->
	`GëLe·Daughãr
(
n
) );

269 i‡(
this
->
	`GëRightDaughãr
(
n
Ë!
NULL
) {

270 
this
->
	`SëP¨ítTªeInNodes
–this->
	`GëRightDaughãr
(
n
) );

273 
n
->
	`SëP¨ítTªe
(
this
);

274 i‡(
n
->
	`GëDïth
(Ë> 
this
->
	`GëTŸÆTªeDïth
()Ëthis->
	`SëTŸÆTªeDïth
(n->GetDepth());

276 
	}
}

281 
	gTMVA
::
Decisi⁄Tªe
* 
TMVA
::Decisi⁄Tªe::
	$Cª©eFromXML
(* 
node
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 ) {

282 
°d
::
°rög
 
	`ty≥
("");

283 
	`gToﬁs
().
	`RódAâr
(
node
,"ty≥", 
ty≥
);

284 
Decisi⁄Tªe
* 
dt
 = 
√w
 
	`Decisi⁄Tªe
();

286 
dt
->
	`RódXML
–
node
, 
tmva_Vîsi⁄_Code
 );

287  
dt
;

288 
	}
}

294 
UI¡_t
 
	gTMVA
::
Decisi⁄Tªe
::
BuûdTªe
–c⁄° 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> & 
evítSam∂e
,

295 
TMVA
::
Decisi⁄TªeNode
 *
node
)

297 i‡(
node
==
NULL
) {

299 
node
 = 
√w
 
TMVA
::
Decisi⁄TªeNode
();

300 
	gfNNodes
 = 1;

301 
	gthis
->
SëRoŸ
(
node
);

303 
	gthis
->
GëRoŸ
()->
SëPos
('s');

304 
	gthis
->
GëRoŸ
()->
SëDïth
(0);

305 
	gthis
->
GëRoŸ
()->
SëP¨ítTªe
(
this
);

306 
	gfMöSize
 = 
fMöNodeSize
/100. * 
evítSam∂e
.
size
();

307 i‡(
GëTªeID
()==0){

308 
Log
(Ë<< 
kDEBUG
 << "\tThêmöimÆÇodêsizêMöNodeSize=" << 
fMöNodeSize
 << " fMöNodeSize="<<fMöNodeSize<< "% i†å™¶©edÅÿ™á˘uÆÇumbî o‡evít†"<< 
fMöSize
<< " f‹Åhêåaöög sam∂êsizêo‡" << 
evítSam∂e
.
size
(Ë<< 
Endl
;

309 
Log
(Ë<< 
	gkDEBUG
 << "\tNŸe: Thi†numbî wû»bêèkíá†absﬁuã möimum i¿thênode, " << 
	gEndl
;

310 
Log
(Ë<< 
	gkDEBUG
 << " \töÅîm†o‡'weighãdÉvíts'ánd unweighãd o√†!! " << 
	gEndl
;

314 
UI¡_t
 
	g√víts
 = 
evítSam∂e
.
size
();

316 i‡(
	g√víts
 > 0 ) {

317 i‡(
	gfNv¨s
==0Ë
fNv¨s
 = 
evítSam∂e
[0]->
GëNV¨übÀs
();

318 
	gfV¨übÀImp‹èn˚
.
ªsize
(
fNv¨s
);

320 
Log
(Ë<< 
	gkFATAL
 << ":<BuûdTªe>Évítßm∂êSizê=0 " << 
	gEndl
;

322 
DoubÀ_t
 
	gs
=0, 
	gb
=0;

323 
DoubÀ_t
 
	gsuw
=0, 
	gbuw
=0;

324 
DoubÀ_t
 
	gsub
=0, 
	gbub
=0;

325 
DoubÀ_t
 
	gèrgë
=0, 
	gèrgë2
=0;

326 
Flﬂt_t
 *
	gxmö
 = 
√w
 Flﬂt_t[
fNv¨s
];

327 
Flﬂt_t
 *
	gxmax
 = 
√w
 Flﬂt_t[
fNv¨s
];

328 
UI¡_t
 
	giv¨
=0; iv¨<
	gfNv¨s
; ivar++) {

329 
	gxmö
[
iv¨
]=
xmax
[ivar]=0;

331 
UI¡_t
 
	gõv
=0; iev<
	gevítSam∂e
.
size
(); iev++) {

332 c⁄° 
	gTMVA
::
Evít
* 
evt
 = 
evítSam∂e
[
õv
];

333 c⁄° 
DoubÀ_t
 
	gweight
 = 
evt
->
GëWeight
();

334 c⁄° 
DoubÀ_t
 
	g‹gWeight
 = 
evt
->
GëOrigöÆWeight
();

335 i‡(
	gevt
->
GëCœss
(Ë=
fSigCœss
) {

336 
s
 +
weight
;

337 
	gsuw
 += 1;

338 
	gsub
 +
‹gWeight
;

341 
	gb
 +
weight
;

342 
	gbuw
 += 1;

343 
	gbub
 +
‹gWeight
;

345 i‡–
DoRegªssi⁄
() ) {

346 c⁄° 
DoubÀ_t
 
	gtgt
 = 
evt
->
GëT¨gë
(0);

347 
	gèrgë
 +=
weight
*
tgt
;

348 
	gèrgë2
+=
weight
*
tgt
*tgt;

351 
UI¡_t
 
	giv¨
=0; iv¨<
	gfNv¨s
; ivar++) {

352 c⁄° 
DoubÀ_t
 
	gvÆ
 = 
evt
->
GëVÆueFa°
(
iv¨
);

353 i‡(
	gõv
==0Ë
xmö
[
iv¨
]=
xmax
[iv¨]=
vÆ
;

354 i‡(
	gvÆ
 < 
	gxmö
[
iv¨
]Ëxmö[iv¨]=
vÆ
;

355 i‡(
	gvÆ
 > 
	gxmax
[
iv¨
]Ëxmax[iv¨]=
vÆ
;

360 i‡(
	gs
+
	gb
 < 0) {

361 
Log
(Ë<< 
	gkWARNING
 << " One ofÅhe Decision TreeÇodes hasÇegativeÅotalÇumber of signal or backgroundÉvents. "

362 << "(Nsig="<<
	gs
<<" Nbkg="<<
	gb
<<" Probably you useá Monte Carlo withÇegative weights. That should inÖrinciple "

364 << "möimÆÇumbî o‡(unweighãdËevít†dem™ded f‹áÅªênodê(cuºíéy you u£: MöNodeSize="<<
	gfMöNodeSize


366 << "tÿÆlow f‹Ñós⁄abÀávîagög!!!" << 
	gEndl


368 << "wôhÇeg©ivêweighàöÅhêåaöög." << 
	gEndl
;

369 
	gnBkg
=0.;

370 
UI¡_t
 
	gi
=0; i<
	gevítSam∂e
.
size
(); i++) {

371 i‡(
	gevítSam∂e
[
i
]->
GëCœss
(Ë!
fSigCœss
) {

372 
nBkg
 +
evítSam∂e
[
i
]->
GëWeight
();

373 
Log
(Ë<< 
	gkDEBUG
 << "Evíà"<< 
	gi
<< " ha†(‹igöÆËweight: " << 
	gevítSam∂e
[
i
]->
GëWeight
()/evítSam∂e[i]->
GëBoo°Weight
()

374 << " boo°Weight: " << 
	gevítSam∂e
[
i
]->
GëBoo°Weight
(Ë<< 
	gEndl
;

377 
Log
(Ë<< 
	gkDEBUG
 << "Åh© give†öÅŸÆ: " << 
	gnBkg
<<
	gEndl
;

380 
	gnode
->
SëNSigEvíts
(
s
);

381 
	gnode
->
SëNBkgEvíts
(
b
);

382 
	gnode
->
SëNSigEvíts_unweighãd
(
suw
);

383 
	gnode
->
SëNBkgEvíts_unweighãd
(
buw
);

384 
	gnode
->
SëNSigEvíts_unboo°ed
(
sub
);

385 
	gnode
->
SëNBkgEvíts_unboo°ed
(
bub
);

386 
	gnode
->
SëPurôy
();

387 i‡(
	gnode
 =
this
->
GëRoŸ
()) {

388 
node
->
SëNEvíts
(
s
+
b
);

389 
	gnode
->
SëNEvíts_unweighãd
(
suw
+
buw
);

390 
	gnode
->
SëNEvíts_unboo°ed
(
sub
+
bub
);

392 
UI¡_t
 
	giv¨
=0; iv¨<
	gfNv¨s
; ivar++) {

393 
	gnode
->
SëSam∂eMö
(
iv¨
,
xmö
[ivar]);

394 
	gnode
->
SëSam∂eMax
(
iv¨
,
xmax
[ivar]);

396 
	gdñëe
[] 
	gxmö
;

397 
	gdñëe
[] 
	gxmax
;

410 i‡((
	gevítSam∂e
.
size
(Ë>2*
fMöSize
 && 
s
+
b
 >2*fMöSizeË&& 
node
->
GëDïth
(Ë< 
fMaxDïth


411 && ( ( 
s
!=0 && 
b
 !=0 && !
DoRegªssi⁄
()) || ( (s+b)!=0 && DoRegression()) ) ) {

412 
DoubÀ_t
 
£∑øti⁄Gaö
;

413 i‡(
	gfNCuts
 > 0){

414 
	g£∑øti⁄Gaö
 = 
this
->
TøöNodeFa°
(
evítSam∂e
, 
node
);

416 
	g£∑øti⁄Gaö
 = 
this
->
TøöNodeFuŒ
(
evítSam∂e
, 
node
);

418 i‡(
	g£∑øti⁄Gaö
 < 
	g°d
::
numîic_limôs
<>::
ïsû⁄
()) {

422 i‡(
DoRegªssi⁄
()) {

423 
node
->
SëSï¨©i⁄Index
(
fRegTy≥
->
GëSï¨©i⁄Index
(
s
+
b
,
èrgë
,
èrgë2
));

424 
	gnode
->
SëRe•⁄£
(
èrgë
/(
s
+
b
));

425 if–
Æmo°_equÆ_doubÀ
(
èrgë2
/(
s
+
b
),
èrgë
/(s+b)*target/(s+b)) ){

426 
	gnode
->
SëRMS
(0);

428 
	gnode
->
SëRMS
(
TM©h
::
Sqπ
(
èrgë2
/(
s
+
b
Ë- 
èrgë
/(s+b)*target/(s+b)));

432 
	gnode
->
SëSï¨©i⁄Index
(
fSïTy≥
->
GëSï¨©i⁄Index
(
s
,
b
));

434 i‡(
	gnode
->
GëPurôy
(Ë> 
	gfNodePurôyLimô
Ënode->
SëNodeTy≥
(1);

435 
	gnode
->
SëNodeTy≥
(-1);

437 i‡(
	gnode
->
GëDïth
(Ë> 
	gthis
->
GëTŸÆTªeDïth
()Ëthis->
SëTŸÆTªeDïth
(
node
->GetDepth());

441 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
À·Sam∂e
; 
	gÀ·Sam∂e
.
ª£rve
(
√víts
);

442 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
rightSam∂e
; 
	grightSam∂e
.
ª£rve
(
√víts
);

444 
DoubÀ_t
 
	gnRight
=0, 
	gnLe·
=0;

445 
DoubÀ_t
 
	gnRightUnBoo°ed
=0, 
	gnLe·UnBoo°ed
=0;

447 
UI¡_t
 
	gõ
=0; ie< 
	g√víts
 ; ie++) {

448 i‡(
	gnode
->
G€sRight
(*
evítSam∂e
[
õ
])) {

449 
	grightSam∂e
.
push_back
(
evítSam∂e
[
õ
]);

450 
	gnRight
 +
evítSam∂e
[
õ
]->
GëWeight
();

451 
	gnRightUnBoo°ed
 +
evítSam∂e
[
õ
]->
GëOrigöÆWeight
();

454 
	gÀ·Sam∂e
.
push_back
(
evítSam∂e
[
õ
]);

455 
	gnLe·
 +
evítSam∂e
[
õ
]->
GëWeight
();

456 
	gnLe·UnBoo°ed
 +
evítSam∂e
[
õ
]->
GëOrigöÆWeight
();

461 i‡(
	gÀ·Sam∂e
.
em±y
(Ë|| 
	grightSam∂e
.empty()) {

463 
Log
(Ë<< 
	gkERROR
 << "<TøöNode>áŒÉvít†wíàtÿthêßmêbønch" << 
	gEndl


464 << "--- Hí˚ÇewÇodê=ﬁdÇodê... check" << 
	gEndl


465 << "---Üe·:" << 
	gÀ·Sam∂e
.
size
()

466 << "Ñight:" << 
	grightSam∂e
.
size
(Ë<< 
	gEndl


467 << " whûêthê£∑øti⁄ i†thoughàtÿbê" << 
	g£∑øti⁄Gaö


468 << "\¿whí cuâög o¿v¨übÀ " << 
	gnode
->
GëSñe˘‹
()

469 << "áàvÆuê" << 
	gnode
->
GëCutVÆue
()

470 << 
	gkFATAL
 << "---Åhi†shouldÇevî h≠≥n,ÖÀa£ wrôê®bugÑï‹àtÿHñge.Voss@˚∫.ch" << 
	gEndl
;

475 
	gTMVA
::
Decisi⁄TªeNode
 *
rightNode
 = 
√w
 
TMVA
::Decisi⁄TªeNode(
node
,'r');

476 
	gfNNodes
++;

477 
	grightNode
->
SëNEvíts
(
nRight
);

478 
	grightNode
->
SëNEvíts_unboo°ed
(
nRightUnBoo°ed
);

479 
	grightNode
->
SëNEvíts_unweighãd
(
rightSam∂e
.
size
());

481 
	gTMVA
::
Decisi⁄TªeNode
 *
À·Node
 = 
√w
 
TMVA
::Decisi⁄TªeNode(
node
,'l');

483 
	gfNNodes
++;

484 
	gÀ·Node
->
SëNEvíts
(
nLe·
);

485 
	gÀ·Node
->
SëNEvíts_unboo°ed
(
nLe·UnBoo°ed
);

486 
	gÀ·Node
->
SëNEvíts_unweighãd
(
À·Sam∂e
.
size
());

488 
	gnode
->
SëNodeTy≥
(0);

489 
	gnode
->
SëLe·
(
À·Node
);

490 
	gnode
->
SëRight
(
rightNode
);

492 
	gthis
->
BuûdTªe
(
rightSam∂e
, 
rightNode
);

493 
	gthis
->
BuûdTªe
(
À·Sam∂e
, 
À·Node
 );

498 i‡(
DoRegªssi⁄
()) {

499 
	gnode
->
SëSï¨©i⁄Index
(
fRegTy≥
->
GëSï¨©i⁄Index
(
s
+
b
,
èrgë
,
èrgë2
));

500 
	gnode
->
SëRe•⁄£
(
èrgë
/(
s
+
b
));

501 if–
Æmo°_equÆ_doubÀ
(
èrgë2
/(
s
+
b
), 
èrgë
/(s+b)*target/(s+b)) ) {

502 
	gnode
->
SëRMS
(0);

504 
	gnode
->
SëRMS
(
TM©h
::
Sqπ
(
èrgë2
/(
s
+
b
Ë- 
èrgë
/(s+b)*target/(s+b)));

508 
	gnode
->
SëSï¨©i⁄Index
(
fSïTy≥
->
GëSï¨©i⁄Index
(
s
,
b
));

509 i‡(
	gnode
->
GëPurôy
(Ë> 
	gfNodePurôyLimô
Ënode->
SëNodeTy≥
(1);

510 
	gnode
->
SëNodeTy≥
(-1);

519 i‡(
	gnode
->
GëDïth
(Ë> 
	gthis
->
GëTŸÆTªeDïth
()Ëthis->
SëTŸÆTªeDïth
(
node
->GetDepth());

523  
	gfNNodes
;

530 
	gTMVA
::
Decisi⁄Tªe
::
FûlTªe
–c⁄° 
°d
::
ve˘‹
<
TMVA
::
Evít
*> & 
evítSam∂e
 )

532 
UI¡_t
 
i
=0; 
	gi
<
	gevítSam∂e
.
size
(); i++) {

533 
	gthis
->
FûlEvít
(*(
evítSam∂e
[
i
]),
NULL
);

541 
	gTMVA
::
Decisi⁄Tªe
::
	$FûlEvít
–c⁄° 
TMVA
::
Evít
 & 
evít
,

542 
TMVA
::
Decisi⁄TªeNode
 *
node
 )

544 i‡(
node
 =
NULL
) {

545 
node
 = 
this
->
	`GëRoŸ
();

548 
node
->
	`In¸emítNEvíts
–
evít
.
	`GëWeight
() );

549 
node
->
	`In¸emítNEvíts_unweighãd
( );

551 i‡(
evít
.
	`GëCœss
(Ë=
fSigCœss
) {

552 
node
->
	`In¸emítNSigEvíts
–
evít
.
	`GëWeight
() );

553 
node
->
	`In¸emítNSigEvíts_unweighãd
( );

556 
node
->
	`In¸emítNBkgEvíts
–
evít
.
	`GëWeight
() );

557 
node
->
	`In¸emítNBkgEvíts_unweighãd
( );

559 
node
->
	`SëSï¨©i⁄Index
(
fSïTy≥
->
	`GëSï¨©i⁄Index
“ode->
	`GëNSigEvíts
(),

560 
node
->
	`GëNBkgEvíts
()));

562 i‡(
node
->
	`GëNodeTy≥
() == 0) {

563 i‡(
node
->
	`G€sRight
(
evít
))

564 
this
->
	`FûlEvít
(
evít
,
°©ic_ˇ°
<
TMVA
::
Decisi⁄TªeNode
*>(
node
->
	`GëRight
())) ;

566 
this
->
	`FûlEvít
(
evít
,
°©ic_ˇ°
<
TMVA
::
Decisi⁄TªeNode
*>(
node
->
	`GëLe·
())) ;

568 
	}
}

573 
	gTMVA
::
Decisi⁄Tªe
::
	$CÀ¨Tªe
()

575 i‡(
this
->
	`GëRoŸ
()!=
NULL
Ëthis->GëRoŸ()->
	`CÀ¨NodeAndAŒDaughãrs
();

577 
	}
}

587 
UI¡_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$CÀ™Tªe
–
Decisi⁄TªeNode
 *
node
 )

589 i‡(
node
==
NULL
) {

590 
node
 = 
this
->
	`GëRoŸ
();

593 
Decisi⁄TªeNode
 *
l
 = 
node
->
	`GëLe·
();

594 
Decisi⁄TªeNode
 *
r
 = 
node
->
	`GëRight
();

596 i‡(
node
->
	`GëNodeTy≥
() == 0) {

597 
this
->
	`CÀ™Tªe
(
l
);

598 
this
->
	`CÀ™Tªe
(
r
);

599 i‡(
l
->
	`GëNodeTy≥
(Ë* 
r
->GetNodeType() > 0) {

601 
this
->
	`Pru√Node
(
node
);

605  
this
->
	`Cou¡Nodes
();

607 
	}
}

614 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$Pru√Tªe
–c⁄° 
EvítC⁄°Li°
* 
vÆid©i⁄Sam∂e
 )

616 
IPru√Toﬁ
* 
	`toﬁ
(
NULL
);

617 
PrunögInfo
* 
	`öfo
(
NULL
);

619 if–
fPru√Mëhod
 =
kNoPrunög
 )  0.0;

621 i‡(
fPru√Mëhod
 =
kEx≥˘edEº‹Prunög
)

623 
toﬁ
 = 
√w
 
	`Ex≥˘edEº‹Pru√Toﬁ
();

624 i‡(
fPru√Mëhod
 =
kCo°Com∂exôyPrunög
)

626 
toﬁ
 = 
√w
 
	`Co°Com∂exôyPru√Toﬁ
();

629 
	`Log
(Ë<< 
kFATAL
 << "SelectedÖruning methodÇot yet implemented "

630 << 
Endl
;

633 if(!
toﬁ
)  0.0;

635 
toﬁ
->
	`SëPru√Såígth
(
	`GëPru√Såígth
());

636 if(
toﬁ
->
	`IsAutom©ic
()) {

637 if(
vÆid©i⁄Sam∂e
 =
NULL
){

638 
	`Log
(Ë<< 
kFATAL
 << "CannotáutomateÅheÖruningálgorithm withoután "

639 << "ödïídíàvÆid©i⁄ sam∂e!" << 
Endl
;

640 }if(
vÆid©i⁄Sam∂e
->
	`size
() == 0) {

641 
	`Log
(Ë<< 
kFATAL
 << "CannotáutomateÅheÖruningálgorithm with "

642 << "ödïídíàvÆid©i⁄ sam∂êo‡ZEROÉvíts!" << 
Endl
;

646 
öfo
 = 
toﬁ
->
	`CÆcuœãPrunögInfo
(
this
,
vÆid©i⁄Sam∂e
);

647 
DoubÀ_t
 
¥u√Såígth
=0;

648 if(!
öfo
) {

649 
	`Log
(Ë<< 
kFATAL
 << "ErrorÖruningÅree! CheckÖrune.log for more information."

650 << 
Endl
;

652 
¥u√Såígth
 = 
öfo
->
Pru√Såígth
;

658 
UI¡_t
 
i
 = 0; i < 
öfo
->
Pru√Sequí˚
.
	`size
(); ++i) {

660 
	`Pru√Node
(
öfo
->
Pru√Sequí˚
[
i
]);

663 
this
->
	`Cou¡Nodes
();

666 
dñëe
 
toﬁ
;

667 
dñëe
 
öfo
;

669  
¥u√Såígth
;

670 
	}
};

679 
	gTMVA
::
Decisi⁄Tªe
::
	$AµlyVÆid©i⁄Sam∂e
–c⁄° 
EvítC⁄°Li°
* 
vÆid©i⁄Sam∂e
 ) const

681 
	`GëRoŸ
()->
	`Re£tVÆid©i⁄D©a
();

682 
UI¡_t
 
õvt
=0; ievà< 
vÆid©i⁄Sam∂e
->
	`size
(); ievt++) {

683 
	`CheckEvítWôhPru√dTªe
((*
vÆid©i⁄Sam∂e
)[
õvt
]);

685 
	}
}

693 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$Te°Pru√dTªeQuÆôy
–c⁄° 
Decisi⁄TªeNode
* 
n
, 
I¡_t
 
mode
 ) const

695 i‡(
n
 =
NULL
) {

696 
n
 = 
this
->
	`GëRoŸ
();

697 i‡(
n
 =
NULL
) {

698 
	`Log
(Ë<< 
kFATAL
 << "Te°Pru√dTªeQuÆôy: sèπed wôh undeföed ROOTÇode" <<
Endl
;

703 if–
n
->
	`GëLe·
(Ë!
NULL
 &&Ç->
	`GëRight
(Ë!NULL && !n->
	`IsTîmöÆ
() ) {

704  (
	`Te°Pru√dTªeQuÆôy
–
n
->
	`GëLe·
(), 
mode
 ) +

705 
	`Te°Pru√dTªeQuÆôy
–
n
->
	`GëRight
(), 
mode
 ));

708 i‡(
	`DoRegªssi⁄
()) {

709 
DoubÀ_t
 
sumw
 = 
n
->
	`GëNSVÆid©i⁄
(Ë+Ç->
	`GëNBVÆid©i⁄
();

710  
n
->
	`GëSumT¨gë2
(Ë- 2*n->
	`GëSumT¨gë
()*n->
	`GëRe•⁄£
(Ë+ 
sumw
*n->GetResponse()*n->GetResponse();

713 i‡(
mode
 == 0) {

714 i‡(
n
->
	`GëPurôy
(Ë> 
this
->
	`GëNodePurôyLimô
())

715  
n
->
	`GëNBVÆid©i⁄
();

717  
n
->
	`GëNSVÆid©i⁄
();

719 i‡–
mode
 == 1 ) {

721  (
n
->
	`GëPurôy
(Ë*Ç->
	`GëNBVÆid©i⁄
(Ë+ (1.0 -Ç->GëPurôy()Ë*Ç->
	`GëNSVÆid©i⁄
());

724 
throw
 
°d
::
	`°rög
("Unknown ValidationQualityMode");

728 
	}
}

735 
	gTMVA
::
Decisi⁄Tªe
::
	$CheckEvítWôhPru√dTªe
–c⁄° 
Evít
* 
e
 ) const

737 
Decisi⁄TªeNode
* 
cuºít
 = 
this
->
	`GëRoŸ
();

738 i‡(
cuºít
 =
NULL
) {

739 
	`Log
(Ë<< 
kFATAL
 << "CheckEvítWôhPru√dTªe: sèπed wôh undeföed ROOTÇode" <<
Endl
;

742 
cuºít
 !
NULL
) {

743 if(
e
->
	`GëCœss
(Ë=
fSigCœss
)

744 
cuºít
->
	`SëNSVÆid©i⁄
(cuºít->
	`GëNSVÆid©i⁄
(Ë+ 
e
->
	`GëWeight
());

746 
cuºít
->
	`SëNBVÆid©i⁄
(cuºít->
	`GëNBVÆid©i⁄
(Ë+ 
e
->
	`GëWeight
());

748 i‡(
e
->
	`GëNT¨gës
() > 0) {

749 
cuºít
->
	`AddToSumT¨gë
(
e
->
	`GëWeight
()*e->
	`GëT¨gë
(0));

750 
cuºít
->
	`AddToSumT¨gë2
(
e
->
	`GëWeight
()*e->
	`GëT¨gë
(0)*e->GetTarget(0));

753 i‡(
cuºít
->
	`GëRight
(Ë=
NULL
 || cuºít->
	`GëLe·
() == NULL) {

754 
cuºít
 = 
NULL
;

757 i‡(
cuºít
->
	`G€sRight
(*
e
))

758 
cuºít
 = (
TMVA
::
Decisi⁄TªeNode
*)cuºít->
	`GëRight
();

760 
cuºít
 = (
TMVA
::
Decisi⁄TªeNode
*)cuºít->
	`GëLe·
();

763 
	}
}

768 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$GëSumWeights
–c⁄° 
EvítC⁄°Li°
* 
vÆid©i⁄Sam∂e
 ) const

770 
DoubÀ_t
 
sumWeights
 = 0.0;

771  
EvítC⁄°Li°
::
c⁄°_ôî©‹
 
ô
 = 
vÆid©i⁄Sam∂e
->
	`begö
();

772 
ô
 !
vÆid©i⁄Sam∂e
->
	`íd
(); ++it ) {

773 
sumWeights
 +(*
ô
)->
	`GëWeight
();

775  
sumWeights
;

776 
	}
}

781 
UI¡_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$Cou¡LófNodes
–
TMVA
::
Node
 *
n
 )

783 i‡(
n
 =
NULL
) {

784 
n
 = 
this
->
	`GëRoŸ
();

785 i‡(
n
 =
NULL
) {

786 
	`Log
(Ë<< 
kFATAL
 << "Cou¡LófNodes: sèπed wôh undeföed ROOTÇode" <<
Endl
;

791 
UI¡_t
 
cou¡Lófs
=0;

793 i‡((
this
->
	`GëLe·Daughãr
(
n
Ë=
NULL
Ë&& (this->
	`GëRightDaughãr
(n) == NULL) ) {

794 
cou¡Lófs
 += 1;

797 i‡(
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
) {

798 
cou¡Lófs
 +
this
->
	`Cou¡LófNodes
–this->
	`GëLe·Daughãr
(
n
) );

800 i‡(
this
->
	`GëRightDaughãr
(
n
Ë!
NULL
) {

801 
cou¡Lófs
 +
this
->
	`Cou¡LófNodes
–this->
	`GëRightDaughãr
(
n
) );

804  
cou¡Lófs
;

805 
	}
}

810 
	gTMVA
::
Decisi⁄Tªe
::
	$Des˚ndTªe
–
Node
* 
n
 )

812 i‡(
n
 =
NULL
) {

813 
n
 = 
this
->
	`GëRoŸ
();

814 i‡(
n
 =
NULL
) {

815 
	`Log
(Ë<< 
kFATAL
 << "Des˚ndTªe: sèπed wôh undeföed ROOTÇode" <<
Endl
;

820 i‡((
this
->
	`GëLe·Daughãr
(
n
Ë=
NULL
Ë&& (this->
	`GëRightDaughãr
(n) == NULL) ) {

823 i‡((
this
->
	`GëLe·Daughãr
(
n
Ë=
NULL
Ë&& (this->
	`GëRightDaughãr
(n) != NULL) ) {

824 
	`Log
(Ë<< 
kFATAL
 << " Nodêwôh o∆y o√ daughãr?? Somëhög wíàwr⁄g" << 
Endl
;

827 i‡((
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
Ë&& (this->
	`GëRightDaughãr
(n) == NULL) ) {

828 
	`Log
(Ë<< 
kFATAL
 << " Nodêwôh o∆y o√ daughãr?? Somëhög wíàwr⁄g" << 
Endl
;

832 i‡(
this
->
	`GëLe·Daughãr
(
n
Ë!
NULL
) {

833 
this
->
	`Des˚ndTªe
–this->
	`GëLe·Daughãr
(
n
) );

835 i‡(
this
->
	`GëRightDaughãr
(
n
Ë!
NULL
) {

836 
this
->
	`Des˚ndTªe
–this->
	`GëRightDaughãr
(
n
) );

839 
	}
}

844 
	gTMVA
::
Decisi⁄Tªe
::
	$Pru√Node
–
Decisi⁄TªeNode
* 
node
 )

846 
Decisi⁄TªeNode
 *
l
 = 
node
->
	`GëLe·
();

847 
Decisi⁄TªeNode
 *
r
 = 
node
->
	`GëRight
();

849 
node
->
	`SëRight
(
NULL
);

850 
node
->
	`SëLe·
(
NULL
);

851 
node
->
	`SëSñe˘‹
(-1);

852 
node
->
	`SëSï¨©i⁄Gaö
(-1);

853 i‡(
node
->
	`GëPurôy
(Ë> 
fNodePurôyLimô
Ënode->
	`SëNodeTy≥
(1);

854 
node
->
	`SëNodeTy≥
(-1);

855 
this
->
	`DñëeNode
(
l
);

856 
this
->
	`DñëeNode
(
r
);

858 
this
->
	`Cou¡Nodes
();

860 
	}
}

867 
	gTMVA
::
Decisi⁄Tªe
::
	$Pru√NodeInPœ˚
–
Decisi⁄TªeNode
* 
node
 ) {

868 if(
node
 =
NULL
) ;

869 
node
->
	`SëNTîmöÆ
(1);

870 
node
->
	`SëSubTªeR
–node->
	`GëNodeR
() );

871 
node
->
	`SëAÕha
–
°d
::
numîic_limôs
<>::
	`öföôy
( ) );

872 
node
->
	`SëAÕhaMöSubåì
–
°d
::
numîic_limôs
<>::
	`öföôy
( ) );

873 
node
->
	`SëTîmöÆ
(
kTRUE
);

874 
	}
}

881 
	gTMVA
::
Node
* 
TMVA
::
Decisi⁄Tªe
::
	$GëNode
–
UL⁄g_t
 
£quí˚
, 
UI¡_t
 
dïth
 )

883 
Node
* 
cuºít
 = 
this
->
	`GëRoŸ
();

885 
UI¡_t
 
i
 =0; i < 
dïth
; i++) {

886 
UL⁄g_t
 
tmp
 = 1 << 
i
;

887 i‡–
tmp
 & 
£quí˚
Ë
cuºít
 = 
this
->
	`GëRightDaughãr
(current);

888 
cuºít
 = 
this
->
	`GëLe·Daughãr
(current);

891  
cuºít
;

892 
	}
}

897 
	gTMVA
::
Decisi⁄Tªe
::
	$GëR™domi£dV¨übÀs
(
Boﬁ_t
 *
u£V¨übÀ
, 
UI¡_t
 *
m≠V¨übÀ
, UI¡_à&
u£Nv¨s
){

898 
UI¡_t
 
iv¨
=0; iv¨<
fNv¨s
; iv¨++Ë
u£V¨übÀ
[iv¨]=
kFALSE
;

899 i‡(
fU£Nv¨s
==0) {

901 
fU£Nv¨s
 = 
	`UI¡_t
(
TM©h
::
	`Sqπ
(
fNv¨s
)+0.6);

903 i‡(
fU£Poiss⁄Nv¨s
Ë
u£Nv¨s
=
TM©h
::
	`Mö
(
fNv¨s
,TM©h::
	`Max
(
	`UI¡_t
(1),(
UI¡_t
Ë
fMyTøndom
->
	`Poiss⁄
(
fU£Nv¨s
)));

904 
u£Nv¨s
 = 
fU£Nv¨s
;

906 
UI¡_t
 
nSñe˘edV¨s
 = 0;

907 
nSñe˘edV¨s
 < 
u£Nv¨s
) {

908 
DoubÀ_t
 
bœ
 = 
fMyTøndom
->
	`Rndm
()*
fNv¨s
;

909 
u£V¨übÀ
[
	`I¡_t
 (
bœ
)] = 
kTRUE
;

910 
nSñe˘edV¨s
 = 0;

911 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

912 i‡(
u£V¨übÀ
[
iv¨
] =
kTRUE
) {

913 
m≠V¨übÀ
[
nSñe˘edV¨s
] = 
iv¨
;

914 
nSñe˘edV¨s
++;

918 i‡(
nSñe˘edV¨s
 !
u£Nv¨s
Ë{ 
°d
::
cout
 << "Bug i¿TøöNodê- GëR™di£dV¨übÀs()... s‹ry" << std::
ídl
; std::
	`exô
(1);}

919 
	}
}

930 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$TøöNodeFa°
–c⁄° 
EvítC⁄°Li°
 & 
evítSam∂e
,

931 
TMVA
::
Decisi⁄TªeNode
 *
node
 )

933 
DoubÀ_t
 
£∑øti⁄GaöTŸÆ
 = -1, 
£pTmp
;

934 
DoubÀ_t
 *
£∑øti⁄Gaö
 = 
√w
 DoubÀ_t[
fNv¨s
+1];

935 
I¡_t
 *
cutIndex
 = 
√w
 I¡_t[
fNv¨s
+1];

937 
UI¡_t
 
iv¨
=0; iv¨ <
fNv¨s
; ivar++) {

938 
£∑øti⁄Gaö
[
iv¨
]=-1;

939 
cutIndex
[
iv¨
]=-1;

941 
I¡_t
 
mxV¨
 = -1;

942 
Boﬁ_t
 
cutTy≥
 = 
kTRUE
;

943 
DoubÀ_t
 
nTŸS
, 
nTŸB
;

944 
I¡_t
 
nTŸS_unWeighãd
, 
nTŸB_unWeighãd
;

945 
UI¡_t
 
√víts
 = 
evítSam∂e
.
	`size
();

950 
Boﬁ_t
 *
u£V¨übÀ
 = 
√w
 Boﬁ_t[
fNv¨s
+1];

951 
UI¡_t
 *
m≠V¨übÀ
 = 
√w
 UI¡_t[
fNv¨s
+1];

953 
°d
::
ve˘‹
<
DoubÀ_t
> 
fishîC€ff
;

955 i‡(
fR™domi£dTªe
) {

956 
UI¡_t
 
tmp
=
fU£Nv¨s
;

957 
	`GëR™domi£dV¨übÀs
(
u£V¨übÀ
,
m≠V¨übÀ
,
tmp
);

960 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

961 
u£V¨übÀ
[
iv¨
] = 
kTRUE
;

962 
m≠V¨übÀ
[
iv¨
] = ivar;

965 
u£V¨übÀ
[
fNv¨s
] = 
kFALSE
;

967 
Boﬁ_t
 
fishîOK
 = 
kFALSE
;

968 i‡(
fU£FishîCuts
) {

969 
u£V¨übÀ
[
fNv¨s
] = 
kTRUE
;

973 
Boﬁ_t
 *
u£V¨InFishî
 = 
√w
 Boﬁ_t[
fNv¨s
];

974 
UI¡_t
 *
m≠V¨InFishî
 = 
√w
 UI¡_t[
fNv¨s
];

975 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

976 
u£V¨InFishî
[
iv¨
] = 
kFALSE
;

977 
m≠V¨InFishî
[
iv¨
] = ivar;

980 
°d
::
ve˘‹
<
TM©rixDSym
*>* 
covM©ri˚s
;

981 
covM©ri˚s
 = 
	`gToﬁs
().
	`CÆcCov¨ün˚M©ri˚s
–
evítSam∂e
, 2 );

982 i‡(!
covM©ri˚s
){

983 
	`Log
(Ë<< 
kWARNING
 << " i¿TøöNodeFa°,Åhêcov¨ün˚ M©ri˚†√eded f‹ÅhêFishî-Cut†ªtu∫edÉº‹ -->Ñevîàtÿju°Ç‹mÆ cut†f‹Åhi†node" << 
Endl
;

984 
fishîOK
 = 
kFALSE
;

986 
TM©rixD
 *
ss
 = 
√w
 
	`TM©rixD
(*(
covM©ri˚s
->
	`©
(0)));

987 
TM©rixD
 *
bb
 = 
√w
 
	`TM©rixD
(*(
covM©ri˚s
->
	`©
(1)));

988 c⁄° 
TM©rixD
 *
s
 = 
	`gToﬁs
().
	`GëC‹ªœti⁄M©rix
(
ss
);

989 c⁄° 
TM©rixD
 *
b
 = 
	`gToﬁs
().
	`GëC‹ªœti⁄M©rix
(
bb
);

991 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

992 
UI¡_t
 
jv¨
=
iv¨
+1; jv¨ < 
fNv¨s
; jvar++) {

993 i‡––
TM©h
::
	`Abs
–(*
s
)(
iv¨
, 
jv¨
)Ë> 
fMöLöC‹rF‹Fishî
) ||

994 –
TM©h
::
	`Abs
–(*
b
)(
iv¨
, 
jv¨
)Ë> 
fMöLöC‹rF‹Fishî
) ){

995 
u£V¨InFishî
[
iv¨
] = 
kTRUE
;

996 
u£V¨InFishî
[
jv¨
] = 
kTRUE
;

1003 
UI¡_t
 
nFishîV¨s
 = 0;

1004 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

1007 i‡(
u£V¨InFishî
[
iv¨
] && 
u£V¨übÀ
[ivar]) {

1008 
m≠V¨InFishî
[
nFishîV¨s
++]=
iv¨
;

1011 i‡(
fU£Ex˛usiveV¨s
Ë
u£V¨übÀ
[
iv¨
] = 
kFALSE
;

1016 
fishîC€ff
 = 
this
->
	`GëFishîC€fficõ¡s
(
evítSam∂e
, 
nFishîV¨s
, 
m≠V¨InFishî
);

1017 
fishîOK
 = 
kTRUE
;

1019 
dñëe
 [] 
u£V¨InFishî
;

1020 
dñëe
 [] 
m≠V¨InFishî
;

1025 
UI¡_t
 
cNv¨s
 = 
fNv¨s
;

1026 i‡(
fU£FishîCuts
 && 
fishîOK
Ë
cNv¨s
++;

1028 
UI¡_t
* 
nBös
 = 
√w
 UI¡_à[
cNv¨s
];

1029 
DoubÀ_t
* 
böWidth
 = 
√w
 DoubÀ_à[
cNv¨s
];

1030 
DoubÀ_t
* 
övBöWidth
 = 
√w
 DoubÀ_à[
cNv¨s
];

1032 
DoubÀ_t
** 
nSñS
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1033 
DoubÀ_t
** 
nSñB
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1034 
DoubÀ_t
** 
nSñS_unWeighãd
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1035 
DoubÀ_t
** 
nSñB_unWeighãd
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1036 
DoubÀ_t
** 
èrgë
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1037 
DoubÀ_t
** 
èrgë2
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1038 
DoubÀ_t
** 
cutVÆues
 = 
√w
 DoubÀ_t* [
cNv¨s
];

1040 
UI¡_t
 
iv¨
=0; iv¨<
cNv¨s
; ivar++) {

1041 
nBös
[
iv¨
] = 
fNCuts
+1;

1042 i‡(
iv¨
 < 
fNv¨s
) {

1043 i‡(
fD©aSëInfo
->
	`GëV¨übÀInfo
(
iv¨
).
	`GëV¨Ty≥
() == 'I') {

1044 
nBös
[
iv¨
] = 
node
->
	`GëSam∂eMax
(iv¨Ë-Çode->
	`GëSam∂eMö
(ivar) + 1;

1048 
nSñS
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1049 
nSñB
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1050 
nSñS_unWeighãd
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1051 
nSñB_unWeighãd
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1052 
èrgë
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1053 
èrgë2
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1054 
cutVÆues
[
iv¨
] = 
√w
 
DoubÀ_t
 [
nBös
[ivar]];

1058 
DoubÀ_t
 *
xmö
 = 
√w
 DoubÀ_t[
cNv¨s
];

1059 
DoubÀ_t
 *
xmax
 = 
√w
 DoubÀ_t[
cNv¨s
];

1061 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1062 i‡(
iv¨
 < 
fNv¨s
){

1063 
xmö
[
iv¨
]=
node
->
	`GëSam∂eMö
(ivar);

1064 
xmax
[
iv¨
]=
node
->
	`GëSam∂eMax
(ivar);

1065 i‡(
	`Æmo°_equÆ_Êﬂt
(
xmax
[
iv¨
], 
xmö
[ivar])) {

1068 
u£V¨übÀ
[
iv¨
]=
kFALSE
;

1072 
xmö
[
iv¨
]=999;

1073 
xmax
[
iv¨
]=-999;

1076 
UI¡_t
 
õv
=0; iev<
√víts
; iev++) {

1078 
DoubÀ_t
 
ªsu…
 = 
fishîC€ff
[
fNv¨s
];

1079 
UI¡_t
 
jv¨
=0; jv¨<
fNv¨s
; jvar++)

1080 
ªsu…
 +
fishîC€ff
[
jv¨
]*(
evítSam∂e
[
õv
])->
	`GëVÆueFa°
(jvar);

1081 i‡(
ªsu…
 > 
xmax
[
iv¨
]) xmax[ivar]=result;

1082 i‡(
ªsu…
 < 
xmö
[
iv¨
]) xmin[ivar]=result;

1085 
UI¡_t
 
ibö
=0; ibö<
nBös
[
iv¨
]; ibin++) {

1086 
nSñS
[
iv¨
][
ibö
]=0;

1087 
nSñB
[
iv¨
][
ibö
]=0;

1088 
nSñS_unWeighãd
[
iv¨
][
ibö
]=0;

1089 
nSñB_unWeighãd
[
iv¨
][
ibö
]=0;

1090 
èrgë
[
iv¨
][
ibö
]=0;

1091 
èrgë2
[
iv¨
][
ibö
]=0;

1092 
cutVÆues
[
iv¨
][
ibö
]=0;

1097 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1099 i‡–
u£V¨übÀ
[
iv¨
] ) {

1112 
böWidth
[
iv¨
] = ( 
xmax
[iv¨] - 
xmö
[iv¨] ) / 
	`DoubÀ_t
(
nBös
[ivar]);

1113 
övBöWidth
[
iv¨
] = 1./
böWidth
[ivar];

1114 i‡(
iv¨
 < 
fNv¨s
) {

1115 i‡(
fD©aSëInfo
->
	`GëV¨übÀInfo
(
iv¨
).
	`GëV¨Ty≥
(Ë='I'Ë{ 
övBöWidth
[iv¨] = 1; 
böWidth
[ivar] = 1; }

1123 
UI¡_t
 
icut
=0; icut<
nBös
[
iv¨
]-1; icut++) {

1124 
cutVÆues
[
iv¨
][
icut
]=
xmö
[iv¨]+(
	`DoubÀ_t
(icut+1))*
böWidth
[ivar];

1130 
nTŸS
=0; 
nTŸB
=0;

1131 
nTŸS_unWeighãd
=0; 
nTŸB_unWeighãd
=0;

1132 
UI¡_t
 
õv
=0; iev<
√víts
; iev++) {

1134 
DoubÀ_t
 
evítWeight
 = 
evítSam∂e
[
õv
]->
	`GëWeight
();

1135 i‡(
evítSam∂e
[
õv
]->
	`GëCœss
(Ë=
fSigCœss
) {

1136 
nTŸS
+=
evítWeight
;

1137 
nTŸS_unWeighãd
++; }

1139 
nTŸB
+=
evítWeight
;

1140 
nTŸB_unWeighãd
++;

1143 
I¡_t
 
iBö
=-1;

1144 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1147 i‡–
u£V¨übÀ
[
iv¨
] ) {

1148 
DoubÀ_t
 
evítD©a
;

1149 i‡(
iv¨
 < 
fNv¨s
Ë
evítD©a
 = 
evítSam∂e
[
õv
]->
	`GëVÆueFa°
(ivar);

1151 
evítD©a
 = 
fishîC€ff
[
fNv¨s
];

1152 
UI¡_t
 
jv¨
=0; jv¨<
fNv¨s
; jvar++)

1153 
evítD©a
 +
fishîC€ff
[
jv¨
]*(
evítSam∂e
[
õv
])->
	`GëVÆueFa°
(jvar);

1157 
iBö
 = 
TM©h
::
	`Mö
(
	`I¡_t
(
nBös
[
iv¨
]-1),TM©h::
	`Max
(0,(
övBöWidth
[iv¨]*(
evítD©a
-
xmö
[ivar]) ) ));

1158 i‡(
evítSam∂e
[
õv
]->
	`GëCœss
(Ë=
fSigCœss
) {

1159 
nSñS
[
iv¨
][
iBö
]+=
evítWeight
;

1160 
nSñS_unWeighãd
[
iv¨
][
iBö
]++;

1163 
nSñB
[
iv¨
][
iBö
]+=
evítWeight
;

1164 
nSñB_unWeighãd
[
iv¨
][
iBö
]++;

1166 i‡(
	`DoRegªssi⁄
()) {

1167 
èrgë
[
iv¨
][
iBö
] +=
evítWeight
*
evítSam∂e
[
õv
]->
	`GëT¨gë
(0);

1168 
èrgë2
[
iv¨
][
iBö
]+=
evítWeight
*
evítSam∂e
[
õv
]->
	`GëT¨gë
(0)*eventSample[iev]->GetTarget(0);

1174 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1175 i‡(
u£V¨übÀ
[
iv¨
]) {

1176 
UI¡_t
 
ibö
=1; ibö < 
nBös
[
iv¨
]; ibin++) {

1177 
nSñS
[
iv¨
][
ibö
]+=nSelS[ivar][ibin-1];

1178 
nSñS_unWeighãd
[
iv¨
][
ibö
]+=nSelS_unWeighted[ivar][ibin-1];

1179 
nSñB
[
iv¨
][
ibö
]+=nSelB[ivar][ibin-1];

1180 
nSñB_unWeighãd
[
iv¨
][
ibö
]+=nSelB_unWeighted[ivar][ibin-1];

1181 i‡(
	`DoRegªssi⁄
()) {

1182 
èrgë
[
iv¨
][
ibö
] +=target[ivar][ibin-1] ;

1183 
èrgë2
[
iv¨
][
ibö
]+=target2[ivar][ibin-1];

1186 i‡(
nSñS_unWeighãd
[
iv¨
][
nBös
[iv¨]-1] +
nSñB_unWeighãd
[iv¨][nBös[iv¨]-1] !
evítSam∂e
.
	`size
()) {

1187 
	`Log
(Ë<< 
kFATAL
 << "Helge, you haveá bug ....nSelS_unw..+nSelB_unw..= "

1188 << 
nSñS_unWeighãd
[
iv¨
][
nBös
[iv¨]-1] +
nSñB_unWeighãd
[ivar][nBins[ivar]-1]

1189 << " whûêevítßm∂êsizê" << 
evítSam∂e
.
	`size
()

1190 << 
Endl
;

1192 
œ°Bös
=
nSñS
[
iv¨
][
nBös
[iv¨]-1] +
nSñB
[ivar][nBins[ivar]-1];

1193 
tŸÆSum
=
nTŸS
+
nTŸB
;

1194 i‡(
TM©h
::
	`Abs
(
œ°Bös
-
tŸÆSum
)/totalSum>0.01) {

1195 
	`Log
(Ë<< 
kFATAL
 << "Helge, you haveánother bug ....nSelS+nSelB= "

1196 << 
œ°Bös


1197 << " whûêtŸÆÇumbî o‡evít†" << 
tŸÆSum


1198 << 
Endl
;

1204 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1205 i‡(
u£V¨übÀ
[
iv¨
]) {

1206 
UI¡_t
 
iBö
=0; iBö<
nBös
[
iv¨
]-1; iBin++) {

1218 
DoubÀ_t
 
¶
 = 
nSñS_unWeighãd
[
iv¨
][
iBö
];

1219 
DoubÀ_t
 
bl
 = 
nSñB_unWeighãd
[
iv¨
][
iBö
];

1220 
DoubÀ_t
 
s
 = 
nTŸS_unWeighãd
;

1221 
DoubÀ_t
 
b
 = 
nTŸB_unWeighãd
;

1222 
DoubÀ_t
 
¶W
 = 
nSñS
[
iv¨
][
iBö
];

1223 
DoubÀ_t
 
blW
 = 
nSñB
[
iv¨
][
iBö
];

1224 
DoubÀ_t
 
sW
 = 
nTŸS
;

1225 
DoubÀ_t
 
bW
 = 
nTŸB
;

1226 
DoubÀ_t
 
§
 = 
s
-
¶
;

1227 
DoubÀ_t
 
br
 = 
b
-
bl
;

1228 
DoubÀ_t
 
§W
 = 
sW
-
¶W
;

1229 
DoubÀ_t
 
brW
 = 
bW
-
blW
;

1231 i‡–((
¶
+
bl
)>=
fMöSize
 && (
§
+
br
)>=fMinSize)

1232 && ((
¶W
+
blW
)>=
fMöSize
 && (
§W
+
brW
)>=fMinSize)

1235 i‡(
	`DoRegªssi⁄
()) {

1236 
£pTmp
 = 
fRegTy≥
->
	`GëSï¨©i⁄Gaö
(
nSñS
[
iv¨
][
iBö
]+
nSñB
[ivar][iBin],

1237 
èrgë
[
iv¨
][
iBö
],
èrgë2
[ivar][iBin],

1238 
nTŸS
+
nTŸB
,

1239 
èrgë
[
iv¨
][
nBös
[iv¨]-1],
èrgë2
[ivar][nBins[ivar]-1]);

1241 
£pTmp
 = 
fSïTy≥
->
	`GëSï¨©i⁄Gaö
(
nSñS
[
iv¨
][
iBö
], 
nSñB
[iv¨][iBö], 
nTŸS
, 
nTŸB
);

1243 i‡(
£∑øti⁄Gaö
[
iv¨
] < 
£pTmp
) {

1244 
£∑øti⁄Gaö
[
iv¨
] = 
£pTmp
;

1245 
cutIndex
[
iv¨
] = 
iBö
;

1254 
UI¡_t
 
iv¨
=0; iv¨ < 
cNv¨s
; ivar++) {

1255 i‡(
u£V¨übÀ
[
iv¨
] ) {

1256 i‡(
£∑øti⁄GaöTŸÆ
 < 
£∑øti⁄Gaö
[
iv¨
]) {

1257 
£∑øti⁄GaöTŸÆ
 = 
£∑øti⁄Gaö
[
iv¨
];

1258 
mxV¨
 = 
iv¨
;

1263 i‡(
mxV¨
 >= 0) {

1264 i‡(
	`DoRegªssi⁄
()) {

1265 
node
->
	`SëSï¨©i⁄Index
(
fRegTy≥
->
	`GëSï¨©i⁄Index
(
nTŸS
+
nTŸB
,
èrgë
[0][
nBös
[
mxV¨
]-1],
èrgë2
[0][nBins[mxVar]-1]));

1266 
node
->
	`SëRe•⁄£
(
èrgë
[0][
nBös
[
mxV¨
]-1]/(
nTŸS
+
nTŸB
));

1267 i‡–
	`Æmo°_equÆ_doubÀ
(
èrgë2
[0][
nBös
[
mxV¨
]-1]/(
nTŸS
+
nTŸB
), 
èrgë
[0][nBins[mxVar]-1]/(nTotS+nTotB)*target[0][nBins[mxVar]-1]/(nTotS+nTotB))) {

1268 
node
->
	`SëRMS
(0);

1270 
node
->
	`SëRMS
(
TM©h
::
	`Sqπ
(
èrgë2
[0][
nBös
[
mxV¨
]-1]/(
nTŸS
+
nTŸB
Ë- 
èrgë
[0][nBins[mxVar]-1]/(nTotS+nTotB)*target[0][nBins[mxVar]-1]/(nTotS+nTotB)));

1274 
node
->
	`SëSï¨©i⁄Index
(
fSïTy≥
->
	`GëSï¨©i⁄Index
(
nTŸS
,
nTŸB
));

1275 i‡(
mxV¨
 >=0){

1276 i‡(
nSñS
[
mxV¨
][
cutIndex
[mxV¨]]/
nTŸS
 > 
nSñB
[mxV¨][cutIndex[mxV¨]]/
nTŸB
Ë
cutTy≥
=
kTRUE
;

1277 
cutTy≥
=
kFALSE
;

1280 
node
->
	`SëSñe˘‹
((
UI¡_t
)
mxV¨
);

1281 
node
->
	`SëCutVÆue
(
cutVÆues
[
mxV¨
][
cutIndex
[mxVar]]);

1282 
node
->
	`SëCutTy≥
(
cutTy≥
);

1283 
node
->
	`SëSï¨©i⁄Gaö
(
£∑øti⁄GaöTŸÆ
);

1284 i‡(
mxV¨
 < (
I¡_t
Ë
fNv¨s
){

1285 
node
->
	`SëNFishîC€ff
(0);

1286 
fV¨übÀImp‹èn˚
[
mxV¨
] +
£∑øti⁄GaöTŸÆ
*£∑øti⁄GaöTŸÆ * (
nTŸS
+
nTŸB
) * (nTotS+nTotB) ;

1292 
node
->
	`SëNFishîC€ff
(
fNv¨s
+1);

1293 
UI¡_t
 
iv¨
=0; iv¨<=
fNv¨s
; ivar++) {

1294 
node
->
	`SëFishîC€ff
(
iv¨
,
fishîC€ff
[ivar]);

1296 i‡(
iv¨
<
fNv¨s
){

1297 
fV¨übÀImp‹èn˚
[
iv¨
] +
fishîC€ff
[iv¨]*fishîC€ff[iv¨]*
£∑øti⁄GaöTŸÆ
*£∑øti⁄GaöTŸÆ * (
nTŸS
+
nTŸB
) * (nTotS+nTotB) ;

1303 
£∑øti⁄GaöTŸÆ
 = 0;

1320 
UI¡_t
 
i
=0; i<
cNv¨s
; i++) {

1321 
dñëe
 [] 
nSñS
[
i
];

1322 
dñëe
 [] 
nSñB
[
i
];

1323 
dñëe
 [] 
nSñS_unWeighãd
[
i
];

1324 
dñëe
 [] 
nSñB_unWeighãd
[
i
];

1325 
dñëe
 [] 
èrgë
[
i
];

1326 
dñëe
 [] 
èrgë2
[
i
];

1327 
dñëe
 [] 
cutVÆues
[
i
];

1329 
dñëe
 [] 
nSñS
;

1330 
dñëe
 [] 
nSñB
;

1331 
dñëe
 [] 
nSñS_unWeighãd
;

1332 
dñëe
 [] 
nSñB_unWeighãd
;

1333 
dñëe
 [] 
èrgë
;

1334 
dñëe
 [] 
èrgë2
;

1335 
dñëe
 [] 
cutVÆues
;

1337 
dñëe
 [] 
xmö
;

1338 
dñëe
 [] 
xmax
;

1340 
dñëe
 [] 
u£V¨übÀ
;

1341 
dñëe
 [] 
m≠V¨übÀ
;

1343 
dñëe
 [] 
£∑øti⁄Gaö
;

1344 
dñëe
 [] 
cutIndex
;

1346 
dñëe
 [] 
nBös
;

1347 
dñëe
 [] 
böWidth
;

1348 
dñëe
 [] 
övBöWidth
;

1350  
£∑øti⁄GaöTŸÆ
;

1352 
	}
}

1357 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
Decisi⁄Tªe
::
	$GëFishîC€fficõ¡s
(c⁄° 
EvítC⁄°Li°
 &
evítSam∂e
, 
UI¡_t
 
nFishîV¨s
, UI¡_à*
m≠V¨InFishî
){

1358 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`fishîC€ff
(
fNv¨s
+1);

1362 
TM©rixD
* 
mónM©x
 = 
√w
 
	`TM©rixD
–
nFishîV¨s
, 3 );

1365 
TM©rixD
* 
bëw
 = 
√w
 
	`TM©rixD
–
nFishîV¨s
,ÇFisherVars );

1366 
TM©rixD
* 
wôh
 = 
√w
 
	`TM©rixD
–
nFishîV¨s
,ÇFisherVars );

1367 
TM©rixD
* 
cov
 = 
√w
 
	`TM©rixD
–
nFishîV¨s
,ÇFisherVars );

1374 
DoubÀ_t
 
sumOfWeightsS
 = 0;

1375 
DoubÀ_t
 
sumOfWeightsB
 = 0;

1379 
DoubÀ_t
* 
sumS
 = 
√w
 DoubÀ_t[
nFishîV¨s
];

1380 
DoubÀ_t
* 
sumB
 = 
√w
 DoubÀ_t[
nFishîV¨s
];

1381 
UI¡_t
 
iv¨
=0; iv¨<
nFishîV¨s
; iv¨++Ë{ 
sumS
[iv¨] = 
sumB
[ivar] = 0; }

1383 
UI¡_t
 
√víts
 = 
evítSam∂e
.
	`size
();

1385 
UI¡_t
 
õvt
=0; ievt<
√víts
; ievt++) {

1388 c⁄° 
Evít
 * 
ev
 = 
evítSam∂e
[
õvt
];

1391 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

1392 i‡(
ev
->
	`GëCœss
(Ë=
fSigCœss
Ë
sumOfWeightsS
 +
weight
;

1393 
sumOfWeightsB
 +
weight
;

1395 
DoubÀ_t
* 
sum
 = 
ev
->
	`GëCœss
(Ë=
fSigCœss
 ? 
sumS
 : 
sumB
;

1396 
UI¡_t
 
iv¨
=0; iv¨<
nFishîV¨s
; ivar++) {

1397 
sum
[
iv¨
] +
ev
->
	`GëVÆueFa°
–
m≠V¨InFishî
[iv¨] )*
weight
;

1400 
UI¡_t
 
iv¨
=0; iv¨<
nFishîV¨s
; ivar++) {

1401 (*
mónM©x
)–
iv¨
, 2 ) = 
sumS
[ivar];

1402 (*
mónM©x
)–
iv¨
, 0 ) = 
sumS
[iv¨]/
sumOfWeightsS
;

1404 (*
mónM©x
)–
iv¨
, 2 ) +
sumB
[ivar];

1405 (*
mónM©x
)–
iv¨
, 1 ) = 
sumB
[iv¨]/
sumOfWeightsB
;

1408 (*
mónM©x
)–
iv¨
, 2 ) /(
sumOfWeightsS
 + 
sumOfWeightsB
);

1411 
dñëe
 [] 
sumS
;

1413 
dñëe
 [] 
sumB
;

1420 
	`as£π
–
sumOfWeightsS
 > 0 && 
sumOfWeightsB
 > 0 );

1424 c⁄° 
I¡_t
 
nFishîV¨s2
 = 
nFishîV¨s
*nFisherVars;

1425 
DoubÀ_t
 *
sum2Sig
 = 
√w
 DoubÀ_t[
nFishîV¨s2
];

1426 
DoubÀ_t
 *
sum2Bgd
 = 
√w
 DoubÀ_t[
nFishîV¨s2
];

1427 
DoubÀ_t
 *
xvÆ
 = 
√w
 DoubÀ_t[
nFishîV¨s2
];

1428 
	`mem£t
(
sum2Sig
,0,
nFishîV¨s2
*(
DoubÀ_t
));

1429 
	`mem£t
(
sum2Bgd
,0,
nFishîV¨s2
*(
DoubÀ_t
));

1432 
UI¡_t
 
õvt
=0; ievt<
√víts
; ievt++) {

1436 c⁄° 
Evít
* 
ev
 = 
evítSam∂e
.
	`©
(
õvt
);

1438 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

1440 
UI¡_t
 
x
=0; x<
nFishîV¨s
; x++) {

1441 
xvÆ
[
x
] = 
ev
->
	`GëVÆueFa°
–
m≠V¨InFishî
[x] );

1443 
I¡_t
 
k
=0;

1444 
UI¡_t
 
x
=0; x<
nFishîV¨s
; x++) {

1445 
UI¡_t
 
y
=0; y<
nFishîV¨s
; y++) {

1446 i‡–
ev
->
	`GëCœss
(Ë=
fSigCœss
 ) 
sum2Sig
[
k
] +–(
xvÆ
[
x
] - (*
mónM©x
)(x, 0))*(xvÆ[
y
] - (*mónM©x)(y, 0)Ë)*
weight
;

1447 
sum2Bgd
[
k
] +–(
xvÆ
[
x
] - (*
mónM©x
)(x, 1))*(xvÆ[
y
] - (*mónM©x)(y, 1)Ë)*
weight
;

1448 
k
++;

1452 
I¡_t
 
k
=0;

1453 
UI¡_t
 
x
=0; x<
nFishîV¨s
; x++) {

1454 
UI¡_t
 
y
=0; y<
nFishîV¨s
; y++) {

1455 (*
wôh
)(
x
, 
y
Ë
sum2Sig
[
k
]/
sumOfWeightsS
 + 
sum2Bgd
[k]/
sumOfWeightsB
;

1456 
k
++;

1460 
dñëe
 [] 
sum2Sig
;

1461 
dñëe
 [] 
sum2Bgd
;

1462 
dñëe
 [] 
xvÆ
;

1470 
DoubÀ_t
 
¥odSig
, 
¥odBgd
;

1472 
UI¡_t
 
x
=0; x<
nFishîV¨s
; x++) {

1473 
UI¡_t
 
y
=0; y<
nFishîV¨s
; y++) {

1475 
¥odSig
 = ( ((*
mónM©x
)(
x
, 0) - (*meanMatx)(x, 2))*

1476 ((*
mónM©x
)(
y
, 0) - (*meanMatx)(y, 2)) );

1477 
¥odBgd
 = ( ((*
mónM©x
)(
x
, 1) - (*meanMatx)(x, 2))*

1478 ((*
mónM©x
)(
y
, 1) - (*meanMatx)(y, 2)) );

1480 (*
bëw
)(
x
, 
y
Ë(
sumOfWeightsS
*
¥odSig
 + 
sumOfWeightsB
*
¥odBgd
) / (sumOfWeightsS + sumOfWeightsB);

1487 
UI¡_t
 
x
=0; x<
nFishîV¨s
; x++)

1488 
UI¡_t
 
y
=0; y<
nFishîV¨s
; y++)

1489 (*
cov
)(
x
, 
y
Ë(*
wôh
)(x, yË+ (*
bëw
)(x, y);

1499 
TM©rixD
* 
theM©
 = 
wôh
;

1502 
TM©rixD
 
	`övCov
–*
theM©
 );

1503 i‡–
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
()) < 10E-24 ) {

1504 
	`Log
(Ë<< 
kWARNING
 << "FisherCoeff matrix isálmost singular with determinant="

1505 << 
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
())

1507 << 
Endl
;

1509 i‡–
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
()) < 10E-120 ) {

1510 
	`Log
(Ë<< 
kFATAL
 << "FisherCoeff matrix is singular with determinant="

1511 << 
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
())

1513 << 
Endl
;

1516 
övCov
.
	`Invît
();

1519 
DoubÀ_t
 
xÁ˘
 = 
TM©h
::
	`Sqπ
–
sumOfWeightsS
*
sumOfWeightsB
 ) / (sumOfWeightsS + sumOfWeightsB);

1522 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`diffMóns
–
nFishîV¨s
 );

1524 
UI¡_t
 
iv¨
=0; iv¨<=
fNv¨s
; iv¨++Ë
fishîC€ff
[ivar] = 0;

1525 
UI¡_t
 
iv¨
=0; iv¨<
nFishîV¨s
; ivar++) {

1526 
UI¡_t
 
jv¨
=0; jv¨<
nFishîV¨s
; jvar++) {

1527 
DoubÀ_t
 
d
 = (*
mónM©x
)(
jv¨
, 0) - (*meanMatx)(jvar, 1);

1528 
fishîC€ff
[
m≠V¨InFishî
[
iv¨
]] +
	`övCov
(iv¨, 
jv¨
)*
d
;

1532 
fishîC€ff
[
m≠V¨InFishî
[
iv¨
]] *
xÁ˘
;

1536 
DoubÀ_t
 
f0
 = 0.0;

1537 
UI¡_t
 
iv¨
=0; iv¨<
nFishîV¨s
; ivar++){

1538 
f0
 +
fishîC€ff
[
m≠V¨InFishî
[
iv¨
]]*((*
mónM©x
)(ivar, 0) + (*meanMatx)(ivar, 1));

1540 
f0
 /= -2.0;

1542 
fishîC€ff
[
fNv¨s
] = 
f0
;

1544  
fishîC€ff
;

1545 
	}
}

1551 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$TøöNodeFuŒ
–c⁄° 
EvítC⁄°Li°
 & 
evítSam∂e
,

1552 
TMVA
::
Decisi⁄TªeNode
 *
node
 )

1554 
DoubÀ_t
 
nTŸS
 = 0.0, 
nTŸB
 = 0.0;

1555 
I¡_t
 
nTŸS_unWeighãd
 = 0, 
nTŸB_unWeighãd
 = 0;

1557 
°d
::
ve˘‹
<
TMVA
::
BDTEvítWøµî
> 
bdtEvítSam∂e
;

1560 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`lCutVÆue
–
fNv¨s
, 0.0 );

1561 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`lSïGaö
–
fNv¨s
, -1.0e6 );

1562 
°d
::
ve˘‹
<
Ch¨_t
> 
	`lCutTy≥
–
fNv¨s
 );

1563 
lCutTy≥
.
	`assign
–
fNv¨s
, 
	`Ch¨_t
(
kFALSE
) );

1567  
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
ô
 = 
evítSam∂e
.
	`begö
(); ià!evítSam∂e.
	`íd
(); ++it ) {

1568 if((*
ô
)->
	`GëCœss
(Ë=
fSigCœss
) {

1569 
nTŸS
 +(*
ô
)->
	`GëWeight
();

1570 ++
nTŸS_unWeighãd
;

1573 
nTŸB
 +(*
ô
)->
	`GëWeight
();

1574 ++
nTŸB_unWeighãd
;

1576 
bdtEvítSam∂e
.
	`push_back
(
TMVA
::
	`BDTEvítWøµî
(*
ô
));

1579 
°d
::
ve˘‹
<
Ch¨_t
> 
	`u£V¨übÀ
(
fNv¨s
);

1580 
u£V¨übÀ
.
	`assign
–
fNv¨s
, 
	`Ch¨_t
(
kTRUE
) );

1582 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; iv¨++Ë
u£V¨übÀ
[iv¨]=
	`Ch¨_t
(
kFALSE
);

1583 i‡(
fR™domi£dTªe
) {

1584 i‡(
fU£Nv¨s
 ==0 ) {

1586 
fU£Nv¨s
 = 
	`UI¡_t
(
TM©h
::
	`Sqπ
(
fNv¨s
)+0.6);

1588 
I¡_t
 
nSñe˘edV¨s
 = 0;

1589 
nSñe˘edV¨s
 < 
fU£Nv¨s
) {

1590 
DoubÀ_t
 
bœ
 = 
fMyTøndom
->
	`Rndm
()*
fNv¨s
;

1591 
u£V¨übÀ
[
	`I¡_t
 (
bœ
)] = 
	`Ch¨_t
(
kTRUE
);

1592 
nSñe˘edV¨s
 = 0;

1593 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; ivar++) {

1594 if(
u£V¨übÀ
[
iv¨
] =
	`Ch¨_t
(
kTRUE
)Ë
nSñe˘edV¨s
++;

1599 
UI¡_t
 
iv¨
=0; iv¨ < 
fNv¨s
; iv¨++Ë
u£V¨übÀ
[iv¨] = 
	`Ch¨_t
(
kTRUE
);

1602  
UI¡_t
 
iv¨
 = 0; iv¨ < 
fNv¨s
; ivar++ ) {

1603 if(!
u£V¨übÀ
[
iv¨
]) ;

1604 
TMVA
::
BDTEvítWøµî
::
	`SëV¨Index
(
iv¨
);

1605 
°d
::
	`s‹t
–
bdtEvítSam∂e
.
	`begö
(),bdtEvítSam∂e.
	`íd
() );

1607 
DoubÀ_t
 
bkgWeightCå
 = 0.0, 
sigWeightCå
 = 0.0;

1608 
°d
::
ve˘‹
<
TMVA
::
BDTEvítWøµî
>::
ôî©‹
 
ô
 = 
bdtEvítSam∂e
.
	`begö
(), 
ô_íd
 = bdtEvítSam∂e.
	`íd
();

1609  ; 
ô
 !
ô_íd
; ++it ) {

1610 if((**
ô
)->
	`GëCœss
(Ë=
fSigCœss
 )

1611 
sigWeightCå
 +(**
ô
)->
	`GëWeight
();

1613 
bkgWeightCå
 +(**
ô
)->
	`GëWeight
();

1615 
ô
->
	`SëCumuœtiveWeight
(
Ál£
,
bkgWeightCå
);

1616 
ô
->
	`SëCumuœtiveWeight
(
åue
,
sigWeightCå
);

1619 c⁄° 
DoubÀ_t
 
fPMö
 = 1.0e-6;

1620 
Boﬁ_t
 
cutTy≥
 = 
kFALSE
;

1621 
L⁄g64_t
 
ödex
 = 0;

1622 
DoubÀ_t
 
£∑øti⁄Gaö
 = -1.0, 
£pTmp
 = 0.0, 
cutVÆue
 = 0.0, 
dVÆ
 = 0.0, 
n‹m
 = 0.0;

1624  
ô
 = 
bdtEvítSam∂e
.
	`begö
(); ià!
ô_íd
; ++it ) {

1625 if–
ödex
 == 0 ) { ++index; ; }

1626 if–*(*
ô
Ë=
NULL
 ) {

1627 
	`Log
(Ë<< 
kFATAL
 << "In TrainNodeFull(): haveáÇullÉvent! Where index="

1628 << 
ödex
 << ",ándÖ¨íànode=" << 
node
->
	`GëP¨ít
(Ë<< 
Endl
;

1631 
dVÆ
 = 
bdtEvítSam∂e
[
ödex
].
	`GëVÆ
() - bdtEventSample[index-1].GetVal();

1632 
n‹m
 = 
TM©h
::
	`Abs
(
bdtEvítSam∂e
[
ödex
].
	`GëVÆ
() + bdtEventSample[index-1].GetVal());

1635 if–
ödex
 >
fMöSize
 && (
nTŸS_unWeighãd
 + 
nTŸB_unWeighãd
Ë- index >fMöSizê&& 
TM©h
::
	`Abs
(
dVÆ
/(0.5*
n‹m
 + 1)Ë> 
fPMö
 ) {

1636 
£pTmp
 = 
fSïTy≥
->
	`GëSï¨©i⁄Gaö
–
ô
->
	`GëCumuœtiveWeight
(
åue
), it->GëCumuœtiveWeight(
Ál£
), 
sigWeightCå
, 
bkgWeightCå
 );

1637 if–
£pTmp
 > 
£∑øti⁄Gaö
 ) {

1638 
£∑øti⁄Gaö
 = 
£pTmp
;

1639 
cutVÆue
 = 
ô
->
	`GëVÆ
(Ë- 0.5*
dVÆ
;

1640 
DoubÀ_t
 
nSñS
 = 
ô
->
	`GëCumuœtiveWeight
(
åue
);

1641 
DoubÀ_t
 
nSñB
 = 
ô
->
	`GëCumuœtiveWeight
(
Ál£
);

1644 if–
nSñS
/
sigWeightCå
 > 
nSñB
/
bkgWeightCå
 ) 
cutTy≥
 = 
kTRUE
;

1645 
cutTy≥
 = 
kFALSE
;

1648 ++
ödex
;

1650 
lCutTy≥
[
iv¨
] = 
	`Ch¨_t
(
cutTy≥
);

1651 
lCutVÆue
[
iv¨
] = 
cutVÆue
;

1652 
lSïGaö
[
iv¨
] = 
£∑øti⁄Gaö
;

1655 
DoubÀ_t
 
£∑øti⁄Gaö
 = -1.0;

1656 
I¡_t
 
iV¨Index
 = -1;

1657  
UI¡_t
 
iv¨
 = 0; iv¨ < 
fNv¨s
; ivar++ ) {

1658 if–
lSïGaö
[
iv¨
] > 
£∑øti⁄Gaö
 ) {

1659 
iV¨Index
 = 
iv¨
;

1660 
£∑øti⁄Gaö
 = 
lSïGaö
[
iv¨
];

1664 if(
iV¨Index
 >= 0) {

1665 
node
->
	`SëSñe˘‹
(
iV¨Index
);

1666 
node
->
	`SëCutVÆue
(
lCutVÆue
[
iV¨Index
]);

1667 
node
->
	`SëSï¨©i⁄Gaö
(
lSïGaö
[
iV¨Index
]);

1668 
node
->
	`SëCutTy≥
(
lCutTy≥
[
iV¨Index
]);

1669 
fV¨übÀImp‹èn˚
[
iV¨Index
] +
£∑øti⁄Gaö
*£∑øti⁄Gaö * (
nTŸS
+
nTŸB
) * (nTotS+nTotB);

1672 
£∑øti⁄Gaö
 = 0.0;

1675  
£∑øti⁄Gaö
;

1676 
	}
}

1682 
	gTMVA
::
Decisi⁄TªeNode
* 
TMVA
::
Decisi⁄Tªe
::
	$GëEvítNode
(c⁄° 
TMVA
::
Evít
 & 
e
) const

1684 
TMVA
::
Decisi⁄TªeNode
 *
cuºít
 = (TMVA::Decisi⁄TªeNode*)
this
->
	`GëRoŸ
();

1685 
cuºít
->
	`GëNodeTy≥
() == 0) {

1686 
cuºít
 = (cuºít->
	`G€sRight
(
e
)) ?

1687 (
TMVA
::
Decisi⁄TªeNode
*)
cuºít
->
	`GëRight
() :

1688 (
TMVA
::
Decisi⁄TªeNode
*)
cuºít
->
	`GëLe·
();

1690  
cuºít
;

1691 
	}
}

1699 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$CheckEvít
–c⁄° 
TMVA
::
Evít
 * 
e
, 
Boﬁ_t
 
U£YesNoLóf
 ) const

1701 
TMVA
::
Decisi⁄TªeNode
 *
cuºít
 = 
this
->
	`GëRoŸ
();

1702 i‡(!
cuºít
){

1703 
	`Log
(Ë<< 
kFATAL
 << "CheckEvít: sèπed wôh undeföed ROOTÇode" <<
Endl
;

1707 
cuºít
->
	`GëNodeTy≥
() == 0) {

1708 
cuºít
 = (cuºít->
	`G€sRight
(*
e
)) ?

1709 
cuºít
->
	`GëRight
() :

1710 
cuºít
->
	`GëLe·
();

1711 i‡(!
cuºít
) {

1712 
	`Log
(Ë<< 
kFATAL
 << "DT::CheckEvít: inc⁄si°íàåì såu˘uª" <<
Endl
;

1717 i‡–
	`DoRegªssi⁄
() ){

1718  
cuºít
->
	`GëRe•⁄£
();

1721 i‡(
U£YesNoLóf
Ë 
	`DoubÀ_t
 ( 
cuºít
->
	`GëNodeTy≥
() );

1722  
cuºít
->
	`GëPurôy
();

1724 
	}
}

1729 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
Sam∂ePurôy
–
°d
::
ve˘‹
<
TMVA
::
Evít
*> 
evítSam∂e
 )

1731 
DoubÀ_t
 
sumsig
=0, 
	gsumbkg
=0, 
	gsumtŸ
=0;

1732 
UI¡_t
 
	gõvt
=0; ievt<
	gevítSam∂e
.
size
(); ievt++) {

1733 i‡(
	gevítSam∂e
[
õvt
]->
GëCœss
(Ë!
fSigCœss
Ë
sumbkg
+=
evítSam∂e
[õvt]->
GëWeight
();

1734 
	gsumsig
+=
evítSam∂e
[
õvt
]->
GëWeight
();

1735 
	gsumtŸ
+=
evítSam∂e
[
õvt
]->
GëWeight
();

1738 i‡(
	gsumtŸ
!(
sumsig
+
sumbkg
)){

1739 
Log
(Ë<< 
kFATAL
 << "<SamplePurity> sumtot != sumsig+sumbkg"

1740 << 
sumtŸ
 << " " << 
sumsig
 << " " << 
sumbkg
 << 
Endl
;

1742 i‡(
	gsumtŸ
>0Ë 
	gsumsig
/(sumsig + 
	gsumbkg
);

1752 
	gve˘‹
< 
	gDoubÀ_t
 > 
	gTMVA
::
Decisi⁄Tªe
::
	$GëV¨übÀImp‹èn˚
()

1754 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`ªœtiveImp‹èn˚
(
fNv¨s
);

1755 
DoubÀ_t
 
sum
=0;

1756 
UI¡_t
 
i
=0; i< 
fNv¨s
; i++) {

1757 
sum
 +
fV¨übÀImp‹èn˚
[
i
];

1758 
ªœtiveImp‹èn˚
[
i
] = 
fV¨übÀImp‹èn˚
[i];

1761 
UI¡_t
 
i
=0; i< 
fNv¨s
; i++) {

1762 i‡(
sum
 > 
°d
::
numîic_limôs
<>::
	`ïsû⁄
())

1763 
ªœtiveImp‹èn˚
[
i
] /
sum
;

1765 
ªœtiveImp‹èn˚
[
i
] = 0;

1767  
ªœtiveImp‹èn˚
;

1768 
	}
}

1773 
DoubÀ_t
 
	gTMVA
::
Decisi⁄Tªe
::
	$GëV¨übÀImp‹èn˚
–
UI¡_t
 
iv¨
 )

1775 
°d
::
ve˘‹
<
DoubÀ_t
> 
ªœtiveImp‹èn˚
 = 
this
->
	`GëV¨übÀImp‹èn˚
();

1776 i‡(
iv¨
 < 
fNv¨s
Ë 
ªœtiveImp‹èn˚
[ivar];

1778 
	`Log
(Ë<< 
kFATAL
 << "<GëV¨übÀImp‹èn˚>" << 
Endl


1779 << "--- iv¨ = " << 
iv¨
 << " i†ouào‡øngê" << 
Endl
;

1783 
	}
}

	@src/DecisionTreeNode.cxx

41 
	~"TMVA/Decisi⁄TªeNode.h
"

43 
	~"TMVA/Ty≥s.h
"

44 
	~"TMVA/MsgLoggî.h
"

45 
	~"TMVA/Toﬁs.h
"

46 
	~"TMVA/Evít.h
"

48 
	~"ThªadLoˇlSt‹age.h
"

49 
	~"TSåög.h
"

51 
	~<Æg‹ôhm
>

52 
	~<ex˚±i⁄
>

53 
	~<iom™ù
>

54 
	~<limôs
>

55 
	~<s°ªam
>

57 
usög
 
	g°d
::
°rög
;

59 
CœssImp
(
TMVA
::
Decisi⁄TªeNode
);

61 
boﬁ
 
	gTMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
 = 
Ál£
;

62 
UI¡_t
 
	gTMVA
::
Decisi⁄TªeNode
::
fgTmva_Vîsi⁄_Code
 = 0;

67 
	gTMVA
::
Decisi⁄TªeNode
::
	$Decisi⁄TªeNode
()

68 : 
TMVA
::
	`Node
(),

69 
	`fCutVÆue
(0),

70 
	`fCutTy≥
 ( 
kTRUE
 ),

71 
	`fSñe˘‹
 ( -1 ),

72 
	`fRe•⁄£
(-99 ),

73 
	`fRMS
(0),

74 
	`fNodeTy≥
 (-99 ),

75 
	`fPurôy
 (-99),

76 
	$fIsTîmöÆNode
–
kFALSE
 )

78 i‡(
Decisi⁄TªeNode
::
fgIsTøöög
){

79 
fTøöInfo
 = 
√w
 
	`DTNodeTøöögInfo
();

84 
fTøöInfo
 = 0;

86 
	}
}

91 
	gTMVA
::
Decisi⁄TªeNode
::
	$Decisi⁄TªeNode
(
TMVA
::
Node
* 
p
, 
pos
)

92 : 
TMVA
::
	`Node
(
p
, 
pos
),

93 
	`fCutVÆue
( 0 ),

94 
	`fCutTy≥
 ( 
kTRUE
 ),

95 
	`fSñe˘‹
( -1 ),

96 
	`fRe•⁄£
(-99 ),

97 
	`fRMS
(0),

98 
	`fNodeTy≥
( -99 ),

99 
	`fPurôy
 (-99),

100 
	$fIsTîmöÆNode
–
kFALSE
 )

102 i‡(
Decisi⁄TªeNode
::
fgIsTøöög
){

103 
fTøöInfo
 = 
√w
 
	`DTNodeTøöögInfo
();

108 
fTøöInfo
 = 0;

110 
	}
}

116 
	gTMVA
::
Decisi⁄TªeNode
::
	$Decisi⁄TªeNode
(c⁄° 
TMVA
::
Decisi⁄TªeNode
 &
n
,

117 
Decisi⁄TªeNode
* 
∑ª¡
)

118 : 
TMVA
::
	`Node
(
n
),

119 
	`fCutVÆue
–
n
.
fCutVÆue
 ),

120 
	`fCutTy≥
 ( 
n
.
fCutTy≥
 ),

121 
	`fSñe˘‹
–
n
.
fSñe˘‹
 ),

122 
	`fRe•⁄£
–
n
.
fRe•⁄£
 ),

123 
	`fRMS
 ( 
n
.
fRMS
),

124 
	`fNodeTy≥
–
n
.
fNodeTy≥
 ),

125 
	`fPurôy
 ( 
n
.
fPurôy
),

126 
	$fIsTîmöÆNode
–
n
.
fIsTîmöÆNode
 )

128 
this
->
	`SëP¨ít
–
∑ª¡
 );

129 i‡(
n
.
	`GëLe·
(Ë=0 ) 
this
->
	`SëLe·
(
NULL
);

130 
this
->
	`SëLe·
–
√w
 
	`Decisi⁄TªeNode
–*((
Decisi⁄TªeNode
*)(
n
.
	`GëLe·
())),this));

132 i‡(
n
.
	`GëRight
(Ë=0 ) 
this
->
	`SëRight
(
NULL
);

133 
this
->
	`SëRight
–
√w
 
	`Decisi⁄TªeNode
–*((
Decisi⁄TªeNode
*)(
n
.
	`GëRight
())),this));

135 i‡(
Decisi⁄TªeNode
::
fgIsTøöög
){

136 
fTøöInfo
 = 
√w
 
	`DTNodeTøöögInfo
(*(
n
.fTrainInfo));

141 
fTøöInfo
 = 0;

143 
	}
}

148 
	gTMVA
::
Decisi⁄TªeNode
::~
	$Decisi⁄TªeNode
(){

149 
dñëe
 
fTøöInfo
;

150 
	}
}

155 
Boﬁ_t
 
	gTMVA
::
Decisi⁄TªeNode
::
	$G€sRight
(c⁄° 
TMVA
::
Evít
 & 
e
) const

157 
Boﬁ_t
 
ªsu…
;

159 i‡(
	`GëNFishîC€ff
() == 0){

161 
ªsu…
 = (
e
.
	`GëVÆue
(
this
->
	`GëSñe˘‹
()Ë>this->
	`GëCutVÆue
() );

165 
DoubÀ_t
 
fishî
 = 
this
->
	`GëFishîC€ff
(
fFishîC€ff
.
	`size
()-1);

166 
UI¡_t
 
iv¨
=0; iv¨<
fFishîC€ff
.
	`size
()-1; ivar++)

167 
fishî
 +
this
->
	`GëFishîC€ff
(
iv¨
)*(
e
.
	`GëVÆue
(ivar));

169 
ªsu…
 = 
fishî
 > 
this
->
	`GëCutVÆue
();

172 i‡(
fCutTy≥
 =
kTRUE
Ë 
ªsu…
;

173  !
ªsu…
;

174 
	}
}

179 
Boﬁ_t
 
	gTMVA
::
Decisi⁄TªeNode
::
	$G€sLe·
(c⁄° 
TMVA
::
Evít
 & 
e
) const

181 i‡(!
this
->
	`G€sRight
(
e
)Ë 
kTRUE
;

182  
kFALSE
;

183 
	}
}

191 
	gTMVA
::
Decisi⁄TªeNode
::
	$SëPurôy
( )

193 i‡––
this
->
	`GëNSigEvíts
(Ë+Åhis->
	`GëNBkgEvíts
() ) > 0 ) {

194 
fPurôy
 = 
this
->
	`GëNSigEvíts
(Ë/ (Åhis->GëNSigEvíts(Ë+Åhis->
	`GëNBkgEvíts
());

197 
	`Log
(Ë<< 
kINFO
 << "Zîÿevít†öÖurôy cÆcuœti⁄ ,Ñëu∫Öurôy=0.5" << 
Endl
;

198 
°d
::
o°rög°ªam
 
oss
;

199 
this
->
	`Pröt
(
oss
);

200 
	`Log
(Ë<<
oss
.
	`°r
();

201 
fPurôy
 = 0.5;

204 
	}
}

209 
	gTMVA
::
Decisi⁄TªeNode
::
	$Pröt
(
°d
::
o°ªam
& 
os
) const

211 
os
 << "< *** " << 
°d
::
ídl
;

212 
os
 << " d: " << 
this
->
	`GëDïth
()

213 << 
°d
::
	`£çªcisi⁄
(6)

214 << "NC€f: " << 
this
->
	`GëNFishîC€ff
();

215 
I¡_t
 
i
=0; i< (I¡_tË
this
->
	`GëNFishîC€ff
(); i++Ë{ 
os
 << "fC"<<i<<": " <<Åhis->
	`GëFishîC€ff
(i);}

216 
os
 << " iv¨: " << 
this
->
	`GëSñe˘‹
()

217 << " cut: " << 
this
->
	`GëCutVÆue
()

218 << " cTy≥: " << 
this
->
	`GëCutTy≥
()

219 << " s: " << 
this
->
	`GëNSigEvíts
()

220 << " b: " << 
this
->
	`GëNBkgEvíts
()

221 << "ÇEv: " << 
this
->
	`GëNEvíts
()

222 << " suw: " << 
this
->
	`GëNSigEvíts_unweighãd
()

223 << " buw: " << 
this
->
	`GëNBkgEvíts_unweighãd
()

224 << "ÇEvuw: " << 
this
->
	`GëNEvíts_unweighãd
()

225 << " sïI: " << 
this
->
	`GëSï¨©i⁄Index
()

226 << " sïG: " << 
this
->
	`GëSï¨©i⁄Gaö
()

227 << "ÇTy≥: " << 
this
->
	`GëNodeTy≥
()

228 << 
°d
::
ídl
;

230 
os
 << "Myáddªs†i†" << (
this
) << ", ";

231 i‡(
this
->
	`GëP¨ít
(Ë!
NULL
Ë
os
 << "Öarentátáddr: " << (this->GetParent()) ;

232 i‡(
this
->
	`GëLe·
(Ë!
NULL
Ë
os
 << "Üeft daughterátáddr: " << (this->GetLeft());

233 i‡(
this
->
	`GëRight
(Ë!
NULL
Ë
os
 << "Ñight daughterátáddr: " << (this->GetRight()) ;

235 
os
 << " **** > " << 
°d
::
ídl
;

236 
	}
}

241 
	gTMVA
::
Decisi⁄TªeNode
::
	$PrötRec
(
°d
::
o°ªam
& 
os
) const

243 
os
 << 
this
->
	`GëDïth
()

244 << 
°d
::
	`£çªcisi⁄
(6)

245 << " " << 
this
->
	`GëPos
()

246 << "NC€f: " << 
this
->
	`GëNFishîC€ff
();

247 
I¡_t
 
i
=0; i< (I¡_tË
this
->
	`GëNFishîC€ff
(); i++Ë{
os
 << "fC"<<i<<": " <<Åhis->
	`GëFishîC€ff
(i);}

248 
os
 << " iv¨: " << 
this
->
	`GëSñe˘‹
()

249 << " cut: " << 
this
->
	`GëCutVÆue
()

250 << " cTy≥: " << 
this
->
	`GëCutTy≥
()

251 << " s: " << 
this
->
	`GëNSigEvíts
()

252 << " b: " << 
this
->
	`GëNBkgEvíts
()

253 << "ÇEv: " << 
this
->
	`GëNEvíts
()

254 << " suw: " << 
this
->
	`GëNSigEvíts_unweighãd
()

255 << " buw: " << 
this
->
	`GëNBkgEvíts_unweighãd
()

256 << "ÇEvuw: " << 
this
->
	`GëNEvíts_unweighãd
()

257 << " sïI: " << 
this
->
	`GëSï¨©i⁄Index
()

258 << " sïG: " << 
this
->
	`GëSï¨©i⁄Gaö
()

259 << "Ñes: " << 
this
->
	`GëRe•⁄£
()

260 << "Ñms: " << 
this
->
	`GëRMS
()

261 << "ÇTy≥: " << 
this
->
	`GëNodeTy≥
();

262 i‡(
this
->
	`GëCC
(Ë> 10000000000000.Ë
os
 << " CC: " << 100000. << 
°d
::
ídl
;

263 
os
 << " CC: " << 
this
->
	`GëCC
(Ë<< 
°d
::
ídl
;

265 i‡(
this
->
	`GëLe·
(Ë!
NULL
Ëthis->GëLe·(Ë->
	`PrötRec
(
os
);

266 i‡(
this
->
	`GëRight
(Ë!
NULL
Ëthis->GëRight()->
	`PrötRec
(
os
);

267 
	}
}

272 
Boﬁ_t
 
	gTMVA
::
Decisi⁄TªeNode
::
	$RódD©aRec‹d
–
°d
::
i°ªam
& 
is
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 )

274 
fgTmva_Vîsi⁄_Code
=
tmva_Vîsi⁄_Code
;

275 
°rög
 
tmp
;

277 
Flﬂt_t
 
cutVÆ
, 
cutTy≥
, 
nsig
, 
nbkg
, 
nEv
, 
nsig_unweighãd
, 
nbkg_unweighãd
, 
nEv_unweighãd
;

278 
Flﬂt_t
 
£∑øti⁄Index
, 
£∑øti⁄Gaö
, 
	`ª•⁄£
(-99), 
	`cc
(0);

279 
I¡_t
 
dïth
, 
iv¨
, 
nodeTy≥
;

280 
UL⁄g_t
 
l£q
;

281 
pos
;

283 
is
 >> 
dïth
;

284 i‡–
dïth
==-1 ) {  
kFALSE
; }

286 
is
 >> 
pos
 ;

287 
this
->
	`SëDïth
(
dïth
);

288 
this
->
	`SëPos
(
pos
);

290 i‡(
tmva_Vîsi⁄_Code
 < 
	`TMVA_VERSION
(4,0,0)) {

291 
is
 >> 
tmp
 >> 
l£q


292 >> 
tmp
 >> 
iv¨


293 >> 
tmp
 >> 
cutVÆ


294 >> 
tmp
 >> 
cutTy≥


295 >> 
tmp
 >> 
nsig


296 >> 
tmp
 >> 
nbkg


297 >> 
tmp
 >> 
nEv


298 >> 
tmp
 >> 
nsig_unweighãd


299 >> 
tmp
 >> 
nbkg_unweighãd


300 >> 
tmp
 >> 
nEv_unweighãd


301 >> 
tmp
 >> 
£∑øti⁄Index


302 >> 
tmp
 >> 
£∑øti⁄Gaö


303 >> 
tmp
 >> 
nodeTy≥
;

305 
is
 >> 
tmp
 >> 
l£q


306 >> 
tmp
 >> 
iv¨


307 >> 
tmp
 >> 
cutVÆ


308 >> 
tmp
 >> 
cutTy≥


309 >> 
tmp
 >> 
nsig


310 >> 
tmp
 >> 
nbkg


311 >> 
tmp
 >> 
nEv


312 >> 
tmp
 >> 
nsig_unweighãd


313 >> 
tmp
 >> 
nbkg_unweighãd


314 >> 
tmp
 >> 
nEv_unweighãd


315 >> 
tmp
 >> 
£∑øti⁄Index


316 >> 
tmp
 >> 
£∑øti⁄Gaö


317 >> 
tmp
 >> 
ª•⁄£


318 >> 
tmp
 >> 
nodeTy≥


319 >> 
tmp
 >> 
cc
;

322 
this
->
	`SëSñe˘‹
((
UI¡_t
)
iv¨
);

323 
this
->
	`SëCutVÆue
(
cutVÆ
);

324 
this
->
	`SëCutTy≥
(
cutTy≥
);

325 
this
->
	`SëNodeTy≥
(
nodeTy≥
);

326 i‡(
fTøöInfo
){

327 
this
->
	`SëNSigEvíts
(
nsig
);

328 
this
->
	`SëNBkgEvíts
(
nbkg
);

329 
this
->
	`SëNEvíts
(
nEv
);

330 
this
->
	`SëNSigEvíts_unweighãd
(
nsig_unweighãd
);

331 
this
->
	`SëNBkgEvíts_unweighãd
(
nbkg_unweighãd
);

332 
this
->
	`SëNEvíts_unweighãd
(
nEv_unweighãd
);

333 
this
->
	`SëSï¨©i⁄Index
(
£∑øti⁄Index
);

334 
this
->
	`SëSï¨©i⁄Gaö
(
£∑øti⁄Gaö
);

335 
this
->
	`SëPurôy
();

337 
this
->
	`SëCC
(
cc
);

340  
kTRUE
;

341 
	}
}

346 
	gTMVA
::
Decisi⁄TªeNode
::
	$CÀ¨NodeAndAŒDaughãrs
()

348 
	`SëNSigEvíts
(0);

349 
	`SëNBkgEvíts
(0);

350 
	`SëNEvíts
(0);

351 
	`SëNSigEvíts_unweighãd
(0);

352 
	`SëNBkgEvíts_unweighãd
(0);

353 
	`SëNEvíts_unweighãd
(0);

354 
	`SëSï¨©i⁄Index
(-1);

355 
	`SëSï¨©i⁄Gaö
(-1);

356 
	`SëPurôy
();

358 i‡(
this
->
	`GëLe·
(Ë!
NULL
Ë((
Decisi⁄TªeNode
*)—his->GëLe·()))->
	`CÀ¨NodeAndAŒDaughãrs
();

359 i‡(
this
->
	`GëRight
(Ë!
NULL
Ë((
Decisi⁄TªeNode
*)—his->GëRight()))->
	`CÀ¨NodeAndAŒDaughãrs
();

360 
	}
}

366 
	gTMVA
::
Decisi⁄TªeNode
::
	$Re£tVÆid©i⁄D©a
( ) {

367 
	`SëNBVÆid©i⁄
( 0.0 );

368 
	`SëNSVÆid©i⁄
( 0.0 );

369 
	`SëSumT¨gë
( 0 );

370 
	`SëSumT¨gë2
( 0 );

372 if(
	`GëLe·
(Ë!
NULL
 && 
	`GëRight
() != NULL) {

373 
	`GëLe·
()->
	`Re£tVÆid©i⁄D©a
();

374 
	`GëRight
()->
	`Re£tVÆid©i⁄D©a
();

376 
	}
}

381 
	gTMVA
::
Decisi⁄TªeNode
::
	$PrötPru√
–
°d
::
o°ªam
& 
os
 ) const {

382 
os
 << "----------------------" << 
°d
::
ídl


383 << "|~T_t| " << 
	`GëNTîmöÆ
(Ë<< 
°d
::
ídl


384 << "R—): " << 
	`GëNodeR
(Ë<< 
°d
::
ídl


385 << "R(T_t): " << 
	`GëSubTªeR
(Ë<< 
°d
::
ídl


386 << "g—): " << 
	`GëAÕha
(Ë<< 
°d
::
ídl


387 << "G—): " << 
	`GëAÕhaMöSubåì
(Ë<< 
°d
::
ídl
;

388 
	}
}

393 
	gTMVA
::
Decisi⁄TªeNode
::
	$PrötRecPru√
–
°d
::
o°ªam
& 
os
 ) const {

394 
this
->
	`PrötPru√
(
os
);

395 if(
this
->
	`GëLe·
(Ë!
NULL
 &&Åhis->
	`GëRight
() != NULL) {

396 ((
Decisi⁄TªeNode
*)
this
->
	`GëLe·
())->
	`PrötRecPru√
(
os
);

397 ((
Decisi⁄TªeNode
*)
this
->
	`GëRight
())->
	`PrötRecPru√
(
os
);

399 
	}
}

403 
	gTMVA
::
Decisi⁄TªeNode
::
	$SëCC
(
DoubÀ_t
 
cc
)

405 i‡(
fTøöInfo
ËfTøöInfo->
fCC
 = 
cc
;

406 
	`Log
(Ë<< 
kFATAL
 << "ˇŒÅÿSëCC wôhouàåaöögInfo" << 
Endl
;

407 
	}
}

413 
Flﬂt_t
 
	gTMVA
::
Decisi⁄TªeNode
::
	$GëSam∂eMö
(
UI¡_t
 
iv¨
) const {

414 i‡(
fTøöInfo
 && 
iv¨
 < fTøöInfo->
fSam∂eMö
.
	`size
())  fTrainInfo->fSampleMin[ivar];

415 
	`Log
(Ë<< 
kFATAL
 << "Youásked for Min ofÅheÉvent sample inÇode for variable "

416 << 
iv¨
 << "Åh© i†ouào‡ønge" << 
Endl
;

418 
	}
}

424 
Flﬂt_t
 
	gTMVA
::
Decisi⁄TªeNode
::
	$GëSam∂eMax
(
UI¡_t
 
iv¨
) const {

425 i‡(
fTøöInfo
 && 
iv¨
 < fTøöInfo->
fSam∂eMö
.
	`size
()Ë fTøöInfo->
fSam∂eMax
[ivar];

426 
	`Log
(Ë<< 
kFATAL
 << "Youásked for Max ofÅheÉvent sample inÇode for variable "

427 << 
iv¨
 << "Åh© i†ouào‡ønge" << 
Endl
;

429 
	}
}

435 
	gTMVA
::
Decisi⁄TªeNode
::
	$SëSam∂eMö
(
UI¡_t
 
iv¨
, 
Flﬂt_t
 
xmö
){

436 i‡–
fTøöInfo
) {

437 i‡–
iv¨
 >
fTøöInfo
->
fSam∂eMö
.
	`size
()ËfTøöInfo->fSam∂eMö.
	`ªsize
(ivar+1);

438 
fTøöInfo
->
fSam∂eMö
[
iv¨
]=
xmö
;

440 
	}
}

446 
	gTMVA
::
Decisi⁄TªeNode
::
	$SëSam∂eMax
(
UI¡_t
 
iv¨
, 
Flﬂt_t
 
xmax
){

447 if–! 
fTøöInfo
 ) ;

448 i‡–
iv¨
 >
fTøöInfo
->
fSam∂eMax
.
	`size
() )

449 
fTøöInfo
->
fSam∂eMax
.
	`ªsize
(
iv¨
+1);

450 
fTøöInfo
->
fSam∂eMax
[
iv¨
]=
xmax
;

451 
	}
}

455 
	gTMVA
::
Decisi⁄TªeNode
::
	$RódAâribuãs
(* 
node
, 
UI¡_t
 )

457 
Flﬂt_t
 
ãmpNSigEvíts
,
ãmpNBkgEvíts
;

459 
I¡_t
 
nC€f
;

460 i‡(
	`gToﬁs
().
	`HasAâr
(
node
, "NCoef")){

461 
	`gToﬁs
().
	`RódAâr
(
node
, "NC€f", 
nC€f
 );

462 
this
->
	`SëNFishîC€ff
(
nC€f
);

463 
DoubÀ_t
 
tmp
;

464 
I¡_t
 
i
=0; i< (I¡_tË
this
->
	`GëNFishîC€ff
(); i++) {

465 
	`gToﬁs
().
	`RódAâr
(
node
, 
	`F‹m
("fC%d",
i
), 
tmp
 );

466 
this
->
	`SëFishîC€ff
(
i
,
tmp
);

469 
this
->
	`SëNFishîC€ff
(0);

471 
	`gToﬁs
().
	`RódAâr
(
node
, "IV¨", 
fSñe˘‹
 );

472 
	`gToﬁs
().
	`RódAâr
(
node
, "Cut", 
fCutVÆue
 );

473 
	`gToﬁs
().
	`RódAâr
(
node
, "cTy≥", 
fCutTy≥
 );

474 i‡(
	`gToﬁs
().
	`HasAâr
(
node
,"ªs")ËgToﬁs().
	`RódAâr
“ode, "ªs", 
fRe•⁄£
);

475 i‡(
	`gToﬁs
().
	`HasAâr
(
node
,"rms")ËgToﬁs().
	`RódAâr
“ode, "rms", 
fRMS
);

477 if–
	`gToﬁs
().
	`HasAâr
(
node
, "purity") ) {

478 
	`gToﬁs
().
	`RódAâr
(
node
, "purôy",
fPurôy
 );

480 
	`gToﬁs
().
	`RódAâr
(
node
, "nS", 
ãmpNSigEvíts
 );

481 
	`gToﬁs
().
	`RódAâr
(
node
, "nB", 
ãmpNBkgEvíts
 );

482 
fPurôy
 = 
ãmpNSigEvíts
 / (ãmpNSigEvít†+ 
ãmpNBkgEvíts
);

485 
	`gToﬁs
().
	`RódAâr
(
node
, "nTy≥", 
fNodeTy≥
 );

486 
	}
}

492 
	gTMVA
::
Decisi⁄TªeNode
::
	$AddAâribuãsToNode
(* 
node
) const

494 
	`gToﬁs
().
	`AddAâr
(
node
, "NC€f", 
	`GëNFishîC€ff
());

495 
I¡_t
 
i
=0; i< (I¡_tË
this
->
	`GëNFishîC€ff
(); i++)

496 
	`gToﬁs
().
	`AddAâr
(
node
, 
	`F‹m
("fC%d",
i
), 
this
->
	`GëFishîC€ff
(i));

498 
	`gToﬁs
().
	`AddAâr
(
node
, "IV¨", 
	`GëSñe˘‹
());

499 
	`gToﬁs
().
	`AddAâr
(
node
, "Cut", 
	`GëCutVÆue
());

500 
	`gToﬁs
().
	`AddAâr
(
node
, "cTy≥", 
	`GëCutTy≥
());

504 
	`gToﬁs
().
	`AddAâr
(
node
, "ªs", 
	`GëRe•⁄£
());

505 
	`gToﬁs
().
	`AddAâr
(
node
, "rms", 
	`GëRMS
());

507 
	`gToﬁs
().
	`AddAâr
(
node
, "purôy",
	`GëPurôy
());

509 
	`gToﬁs
().
	`AddAâr
(
node
, "nTy≥", 
	`GëNodeTy≥
());

510 
	}
}

515 
	gTMVA
::
Decisi⁄TªeNode
::
	$SëFishîC€ff
(
I¡_t
 
iv¨
, 
DoubÀ_t
 
c€ff
)

517 i‡((
I¡_t
Ë
fFishîC€ff
.
	`size
()<
iv¨
+1ËfFishîC€ff.
	`ªsize
(ivar+1) ;

518 
fFishîC€ff
[
iv¨
]=
c€ff
;

519 
	}
}

526 
	gTMVA
::
Decisi⁄TªeNode
::
	$AddC⁄ã¡ToNode
–
°d
::
°rög°ªam
& ) const

528 
	}
}

535 
TMVA
::
Decisi⁄TªeNode
::
	$RódC⁄ã¡
–
°d
::
°rög°ªam
& )

537 
	}
}

540 
TMVA
::
MsgLoggî
& TMVA::
Decisi⁄TªeNode
::
	$Log
() {

541 
	`TTHREAD_TLS_DECL_ARG
(
MsgLoggî
,
loggî
,"DecisionTreeNode");

542  
loggî
;

543 
	}
}

	@src/Envelope.cxx

11 
	~"TMVA/Envñ›e.h
"

13 
	~"TMVA/C⁄figuøbÀ.h
"

14 
	~"TMVA/D©aLﬂdî.h
"

15 
	~"TMVA/MëhodBa£.h
"

16 
	~"TMVA/O±i⁄M≠.h
"

17 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

18 
	~"TMVA/Ty≥s.h
"

20 
	~"TAxis.h
"

21 
	~"TC™vas.h
"

22 
	~"TFûe.h
"

23 
	~"TGøph.h
"

24 
	~"TSy°em.h
"

26 
	~<io°ªam
>

28 
usög
 
«me•a˚
 
	gTMVA
;

32 
	gEnvñ›e
::
	$Envñ›e
(c⁄° 
TSåög
 &
«me
,
D©aLﬂdî
 *
dÆÆﬂdî
,
TFûe
 *
fûe
,c⁄° TSåög 
›ti⁄s
):
	`C⁄figuøbÀ
(›ti⁄s),
	`fD©aLﬂdî
(dÆÆﬂdî),
	`fFûe
(fûe),
	$fVîbo£
(
kFALSE
)

34 
	`SëName
(
«me
.
	`D©a
());

35 
fModñPîsi°í˚
 = 
kTRUE
;

36 
	}
}

40 
	gEnvñ›e
::~
	$Envñ›e
()

41 {
	}
}

45 
Boﬁ_t
 
Envñ›e
::
	$IsSûítFûe
(){ 
fFûe
==
nuŒ±r
;
	}
}

49 
TFûe
* 
	gEnvñ›e
::
	$GëFûe
(){ 
fFûe
.
	`gë
();
	}
}

54 
	gEnvñ›e
::
	$SëFûe
(
TFûe
 *
fûe
){
fFûe
=
°d
::
sh¨ed_±r
<TFûe>(fûe);
	}
}

58 
Boﬁ_t
 
	gEnvñ›e
::
	$IsVîbo£
(){ 
fVîbo£
;
	}
}

62 
	gEnvñ›e
::
	$SëVîbo£
(
Boﬁ_t
 
°©us
){
fVîbo£
=°©us;
	}
}

66 
	gO±i⁄M≠
 &
	gEnvñ›e
::
	$GëMëhod
(){  
fMëhod
;
	}
}

70 
D©aLﬂdî
 *
	gEnvñ›e
::
	$GëD©aLﬂdî
(){  
fD©aLﬂdî
.
	`gë
();
	}
}

74 
	gEnvñ›e
::
	$SëD©aLﬂdî
(
D©aLﬂdî
 *
dÆÆﬂdî
){

75 
fD©aLﬂdî
=
°d
::
sh¨ed_±r
<
D©aLﬂdî
>(
dÆÆﬂdî
) ;

76 
	}
}

80 
Boﬁ_t
 
	gTMVA
::
Envñ›e
::
	$IsModñPîsi°í˚
(){ 
fModñPîsi°í˚
; 
	}
}

84 
	gTMVA
::
Envñ›e
::
	$SëModñPîsi°í˚
(
Boﬁ_t
 
°©us
){
fModñPîsi°í˚
=°©us;
	}
}

88 
	gTMVA
::
Envñ›e
::
	$BookMëhod
(
Ty≥s
::
EMVA
 
mëhod
, 
TSåög
 
mëhodTôÀ
, TSåög 
›ti⁄s
){

89  
	`BookMëhod
(
Ty≥s
::
	`In°™˚
().
	`GëMëhodName
–
mëhod
 ),
mëhodTôÀ
,
›ti⁄s
);

90 
	}
}

94 
	gTMVA
::
Envñ›e
::
	$BookMëhod
(
TSåög
 
mëhodName
, TSåög 
mëhodTôÀ
, TSåög 
›ti⁄s
){

95 
fMëhod
["MëhodName"] = 
mëhodName
;

96 
fMëhod
["MëhodTôÀ"] = 
mëhodTôÀ
;

97 
fMëhod
["MëhodO±i⁄s"] = 
›ti⁄s
;

98 
	}
}

	@src/Event.cxx

31 
	~"TMVA/Evít.h
"

32 
	~"TMVA/Toﬁs.h
"

33 
	~<io°ªam
>

34 
	~"as£π.h
"

35 
	~<iom™ù
>

36 
	~<ˇs£π
>

37 
	~"TCut.h
"

43 
Boﬁ_t
 
	gTMVA
::
Evít
::
fgIsTøöög
 = 
kFALSE
;

44 
Boﬁ_t
 
	gTMVA
::
Evít
::
fgIgn‹eNegWeightsInTøöög
 = 
kFALSE
;

49 
	gTMVA
::
Evít
::
	$Evít
()

50 : 
	`fVÆues
(),

51 
	`fVÆuesDy«mic
(0),

52 
	`fT¨gës
(),

53 
	`fS≥˘©‹s
(),

54 
	`fV¨übÀAº™gemít
(0),

55 
	`fCœss
(0),

56 
	`fWeight
(1.0),

57 
	`fBoo°Weight
(1.0),

58 
	`fDy«mic
(
kFALSE
),

59 
	$fDoNŸBoo°
(
kFALSE
)

61 
	}
}

66 
	gTMVA
::
Evít
::Evít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
ev
,

67 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
tg
,

68 
UI¡_t
 
˛s
,

69 
DoubÀ_t
 
weight
,

70 
DoubÀ_t
 
boo°weight
 )

71 : 
fVÆues
(
ev
),

72 
fVÆuesDy«mic
(0),

73 
fT¨gës
(
tg
),

74 
fS≥˘©‹s
(0),

75 
fV¨übÀAº™gemít
(0),

76 
fCœss
(
˛s
),

77 
fWeight
(
weight
),

78 
fBoo°Weight
(
boo°weight
),

79 
fDy«mic
(
kFALSE
),

80 
	$fDoNŸBoo°
(
kFALSE
)

82 
	}
}

87 
	gTMVA
::
Evít
::Evít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
ev
,

88 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
tg
,

89 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
vi
,

90 
UI¡_t
 
˛s
,

91 
DoubÀ_t
 
weight
,

92 
DoubÀ_t
 
boo°weight
 )

93 : 
fVÆues
(
ev
),

94 
fVÆuesDy«mic
(0),

95 
fT¨gës
(
tg
),

96 
fS≥˘©‹s
(
vi
),

97 
fV¨übÀAº™gemít
(0),

98 
fCœss
(
˛s
),

99 
fWeight
(
weight
),

100 
fBoo°Weight
(
boo°weight
),

101 
fDy«mic
(
kFALSE
),

102 
	$fDoNŸBoo°
(
kFALSE
)

104 
	}
}

109 
	gTMVA
::
Evít
::Evít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
ev
,

110 
UI¡_t
 
˛s
,

111 
DoubÀ_t
 
weight
,

112 
DoubÀ_t
 
boo°weight
 )

113 : 
fVÆues
(
ev
),

114 
fVÆuesDy«mic
(0),

115 
fT¨gës
(0),

116 
fS≥˘©‹s
(0),

117 
fV¨übÀAº™gemít
(0),

118 
fCœss
(
˛s
),

119 
fWeight
(
weight
),

120 
fBoo°Weight
(
boo°weight
),

121 
fDy«mic
(
kFALSE
),

122 
	$fDoNŸBoo°
(
kFALSE
)

124 
	}
}

129 
	gTMVA
::
Evít
::Evít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
*>*& 
evdyn
, 
UI¡_t
 
nv¨
 )

130 : 
fVÆues
(
nv¨
),

131 
fVÆuesDy«mic
(0),

132 
fT¨gës
(0),

133 
fS≥˘©‹s
(
evdyn
->
size
()-
nv¨
),

134 
fV¨übÀAº™gemít
(0),

135 
fCœss
(0),

136 
fWeight
(0),

137 
fBoo°Weight
(0),

138 
fDy«mic
(
åue
),

139 
	$fDoNŸBoo°
(
kFALSE
)

141 
fVÆuesDy«mic
 = (
°d
::
ve˘‹
<
Flﬂt_t
*>*Ë
evdyn
;

142 
	}
}

147 
	gTMVA
::
Evít
::
	$Evít
–c⁄° 
Evít
& 
evít
 )

148 : 
	`TObje˘
(
evít
),

149 
	`fVÆues
(
evít
.
fVÆues
),

150 
	`fVÆuesDy«mic
(
evít
.
fVÆuesDy«mic
),

151 
	`fT¨gës
(
evít
.
fT¨gës
),

152 
	`fS≥˘©‹s
(
evít
.
fS≥˘©‹s
),

153 
	`fV¨übÀAº™gemít
(
evít
.
fV¨übÀAº™gemít
),

154 
	`fCœss
(
evít
.
fCœss
),

155 
	`fWeight
(
evít
.
fWeight
),

156 
	`fBoo°Weight
(
evít
.
fBoo°Weight
),

157 
	`fDy«mic
(
evít
.
fDy«mic
),

158 
	$fDoNŸBoo°
(
kFALSE
)

160 i‡(
evít
.
fDy«mic
){

161 
fVÆues
.
	`˛ór
();

162 
UI¡_t
 
nv¨
 = 
evít
.
	`GëNV¨übÀs
();

163 
UI¡_t
 
idx
=0;

164 
°d
::
ve˘‹
<
Flﬂt_t
*>::
ôî©‹
 
ôDyn
=
evít
.
fVÆuesDy«mic
->
	`begö
(), 
ôDynEnd
Ûvít.fVÆuesDy«mic->
	`íd
();

165 ; 
ôDyn
!=
ôDynEnd
 && 
idx
<
nv¨
; ++itDyn){

166 
Flﬂt_t
 
vÆue
=*(*
ôDyn
);

167 
fVÆues
.
	`push_back
–
vÆue
 );

168 ++
idx
;

170 
fS≥˘©‹s
.
	`˛ór
();

171 ; 
ôDyn
!=
ôDynEnd
; ++itDyn){

172 
Flﬂt_t
 
vÆue
=*(*
ôDyn
);

173 
fS≥˘©‹s
.
	`push_back
–
vÆue
 );

174 ++
idx
;

177 
fDy«mic
=
kFALSE
;

178 
fVÆuesDy«mic
=
NULL
;

180 
	}
}

185 
	gTMVA
::
Evít
::~
	$Evít
()

188 
	}
}

192 
TMVA
::
Evít
::
SëV¨übÀAº™gemít
–
°d
::
ve˘‹
<
UI¡_t
>* c⁄° 
m
 ) const {

196 if(!
m
)
fV¨übÀAº™gemít
.
˛ór
();

197 
	gfV¨übÀAº™gemít
 = *
m
;

204 
	gTMVA
::
Evít
::
	$C›yV¨VÆues
–c⁄° 
Evít
& 
Ÿhî
 )

206 
fVÆues
 = 
Ÿhî
.fValues;

207 
fT¨gës
 = 
Ÿhî
.fTargets;

208 
fS≥˘©‹s
 = 
Ÿhî
.fSpectators;

209 i‡(
Ÿhî
.
fDy«mic
){

210 
UI¡_t
 
nv¨
 = 
Ÿhî
.
	`GëNV¨übÀs
();

211 
fVÆues
.
	`˛ór
();

212 
UI¡_t
 
idx
=0;

213 
°d
::
ve˘‹
<
Flﬂt_t
*>::
ôî©‹
 
ôDyn
=
Ÿhî
.
fVÆuesDy«mic
->
	`begö
(), 
ôDynEnd
=Ÿhî.fVÆuesDy«mic->
	`íd
();

214 ; 
ôDyn
!=
ôDynEnd
 && 
idx
<
nv¨
; ++itDyn){

215 
Flﬂt_t
 
vÆue
=*(*
ôDyn
);

216 
fVÆues
.
	`push_back
–
vÆue
 );

217 ++
idx
;

219 
fS≥˘©‹s
.
	`˛ór
();

220 ; 
ôDyn
!=
ôDynEnd
; ++itDyn){

221 
Flﬂt_t
 
vÆue
=*(*
ôDyn
);

222 
fS≥˘©‹s
.
	`push_back
–
vÆue
 );

223 ++
idx
;

226 
fDy«mic
 = 
kFALSE
;

227 
fVÆuesDy«mic
 = 
NULL
;

229 
fCœss
 = 
Ÿhî
.fClass;

230 
fWeight
 = 
Ÿhî
.fWeight;

231 
fBoo°Weight
 = 
Ÿhî
.fBoostWeight;

232 
	}
}

237 
Flﬂt_t
 
	gTMVA
::
Evít
::
	$GëVÆue
–
UI¡_t
 
iv¨
 ) const

239 
Flﬂt_t
 
ªtvÆ
;

240 i‡(
fV¨übÀAº™gemít
.
	`size
()==0) {

241 
ªtvÆ
 = 
fDy«mic
 ? ( *((
fVÆuesDy«mic
)->
	`©
(
iv¨
)ËË: 
fVÆues
.at(ivar);

244 
UI¡_t
 
m≠Idx
 = 
fV¨übÀAº™gemít
[
iv¨
];

246 i‡(
fDy«mic
){

248 
ªtvÆ
 = *((
fVÆuesDy«mic
)->
	`©
(
m≠Idx
));

252 
ªtvÆ
 = ( 
m≠Idx
<
fVÆues
.
	`size
(ËË? fVÆues[m≠Idx] : 
fS≥˘©‹s
[mapIdx-fValues.size()];

256  
ªtvÆ
;

257 
	}
}

262 
Flﬂt_t
 
	gTMVA
::
Evít
::
	$GëS≥˘©‹
–
UI¡_t
 
iv¨
) const

264 i‡(
fDy«mic
Ë *(
fVÆuesDy«mic
->
	`©
(
	`GëNV¨übÀs
()+
iv¨
));

265  
fS≥˘©‹s
.
	`©
(
iv¨
);

266 
	}
}

271 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
Evít
::
	$GëVÆues
() const

273 i‡(
fV¨übÀAº™gemít
.
	`size
()==0) {

275 i‡(
fDy«mic
) {

276 
fVÆues
.
	`˛ór
();

277 
°d
::
ve˘‹
<
Flﬂt_t
*>::
c⁄°_ôî©‹
 
ô
 = 
fVÆuesDy«mic
->
	`begö
(), 
ôEnd
=fVÆuesDy«mic->
	`íd
()-
	`GëNS≥˘©‹s
();

278 
ô
 !
ôEnd
; ++it) {

279 
Flﬂt_t
 
vÆ
 = *(*
ô
);

280 
fVÆues
.
	`push_back
–
vÆ
 );

284 
UI¡_t
 
m≠Idx
;

285 i‡(
fDy«mic
) {

286 
fVÆues
.
	`˛ór
();

287 
UI¡_t
 
i
=0; i< 
fV¨übÀAº™gemít
.
	`size
(); i++){

288 
m≠Idx
 = 
fV¨übÀAº™gemít
[
i
];

289 
fVÆues
.
	`push_back
(*((
fVÆuesDy«mic
)->
	`©
(
m≠Idx
)));

295 
fVÆuesRóº™ged
.
	`˛ór
();

296 
UI¡_t
 
i
=0; i< 
fV¨übÀAº™gemít
.
	`size
(); i++){

297 
m≠Idx
 = 
fV¨übÀAº™gemít
[
i
];

298 
fVÆuesRóº™ged
.
	`push_back
(
fVÆues
.
	`©
(
m≠Idx
));

300  
fVÆuesRóº™ged
;

303  
fVÆues
;

304 
	}
}

309 
UI¡_t
 
	gTMVA
::
Evít
::
	$GëNV¨übÀs
() const

313 i‡(
fV¨übÀAº™gemít
.
	`size
()==0Ë 
fVÆues
.size();

314  
fV¨übÀAº™gemít
.
	`size
();

315 
	}
}

320 
UI¡_t
 
	gTMVA
::
Evít
::
	$GëNT¨gës
() const

322  
fT¨gës
.
	`size
();

323 
	}
}

328 
UI¡_t
 
	gTMVA
::
Evít
::
	$GëNS≥˘©‹s
() const

333 i‡(
fV¨übÀAº™gemít
.
	`size
()==0Ë 
fS≥˘©‹s
.size();

334  
fVÆues
.
	`size
()-
fV¨übÀAº™gemít
.size();

335 
	}
}

341 
	gTMVA
::
Evít
::
	$SëVÆ
–
UI¡_t
 
iv¨
, 
Flﬂt_t
 
vÆ
 )

343 i‡((
fDy«mic
 ?–(*
fVÆuesDy«mic
).
	`size
(ËË: 
fVÆues
.size())<=
iv¨
)

344 (
fDy«mic
 ?–(*
fVÆuesDy«mic
).
	`ªsize
(
iv¨
+1ËË: 
fVÆues
.resize(ivar+1));

346 (
fDy«mic
 ?–*(*
fVÆuesDy«mic
)[
iv¨
] ) : 
fVÆues
[iv¨])=
vÆ
;

347 
	}
}

352 
	gTMVA
::
Evít
::
	$Pröt
–
°d
::
o°ªam
& 
o
 ) const

354 
o
 << *
this
 << 
°d
::
ídl
;

355 
	}
}

360 
	gTMVA
::
Evít
::
	$SëT¨gë
–
UI¡_t
 
ôgt
, 
Flﬂt_t
 
vÆue
 )

362 i‡(
fT¨gës
.
	`size
(Ë<
ôgt
ËfT¨gës.
	`ªsize
( itgt+1 );

363 
fT¨gës
.
	`©
(
ôgt
Ë
vÆue
;

364 
	}
}

369 
	gTMVA
::
Evít
::
	$SëS≥˘©‹
–
UI¡_t
 
iv¨
, 
Flﬂt_t
 
vÆue
 )

371 i‡(
fS≥˘©‹s
.
	`size
(Ë<
iv¨
ËfS≥˘©‹s.
	`ªsize
( ivar+1 );

372 
fS≥˘©‹s
.
	`©
(
iv¨
Ë
vÆue
;

373 
	}
}

382 
DoubÀ_t
 
	gTMVA
::
Evít
::
	$GëWeight
() const

384  (
fgIgn‹eNegWeightsInTøöög
 && 
fgIsTøöög
 && 
fWeight
 < 0Ë? 0. : fWeight*
fBoo°Weight
;

385 
	}
}

392 
	gTMVA
::
Evít
::
	$SëIsTøöög
(
Boﬁ_t
 
b
)

394 
fgIsTøöög
=
b
;

395 
	}
}

401 
	gTMVA
::
Evít
::
	$SëIgn‹eNegWeightsInTøöög
(
Boﬁ_t
 
b
)

403 
fgIgn‹eNegWeightsInTøöög
=
b
;

404 
	}
}

409 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
 << ( 
°d
::o°ªam& 
os
, c⁄° 
	gTMVA
::
Evít
& 
evít
 )

411 
os
 << "V¨übÀ†[" << 
evít
.
fVÆues
.
size
() << "]:";

412 
UI¡_t
 
	giv¨
=0; iv¨<
	gevít
.
	gfVÆues
.
size
(); ++ivar)

413 
	gos
 << " " << 
	g°d
::
£tw
(10Ë<< 
evít
.
GëVÆue
(
iv¨
);

414 
	gos
 << ",Å¨gë†[" << 
	gevít
.
	gfT¨gës
.
size
() << "]:";

415 
UI¡_t
 
	giv¨
=0; iv¨<
	gevít
.
	gfT¨gës
.
size
(); ++ivar)

416 
	gos
 << " " << 
	g°d
::
£tw
(10Ë<< 
evít
.
GëT¨gë
(
iv¨
);

417 
	gos
 << ", s≥˘©‹†["<< 
	gevít
.
	gfS≥˘©‹s
.
size
() << "]:";

418 
UI¡_t
 
	giv¨
=0; iv¨<
	gevít
.
	gfS≥˘©‹s
.
size
(); ++ivar)

419 
	gos
 << " " << 
	g°d
::
£tw
(10Ë<< 
evít
.
GëS≥˘©‹
(
iv¨
);

420 
	gos
 << ", weight: " << 
	gevít
.
GëWeight
();

421 
	gos
 << ", cœss: " << 
	gevít
.
GëCœss
();

422  
	gos
;

	@src/ExpectedErrorPruneTool.cxx

45 
	~"TMVA/Ex≥˘edEº‹Pru√Toﬁ.h
"

46 
	~"TMVA/Decisi⁄Tªe.h
"

47 
	~"TMVA/IPru√Toﬁ.h
"

48 
	~"TMVA/MsgLoggî.h
"

49 
	~"TMVA/Ty≥s.h
"

51 
	~"Rty≥sC‹e.h
"

52 
	~"Rty≥s.h
"

53 
	~"TM©h.h
"

55 
	~<m≠
>

59 
	gTMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::
	$Ex≥˘edEº‹Pru√Toﬁ
() :

60 
	`IPru√Toﬁ
(),

61 
	`fDñèPru√Såígth
(0),

62 
	`fNodePurôyLimô
(1),

63 
	`fLoggî
–
√w
 
	`MsgLoggî
("ExpectedErrorPruneTool") )

64 {
	}
}

68 
	gTMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::~
	$Ex≥˘edEº‹Pru√Toﬁ
()

70 
dñëe
 
fLoggî
;

71 
	}
}

75 
	gTMVA
::
PrunögInfo
*

76 
TMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::
	$CÆcuœãPrunögInfo
–
Decisi⁄Tªe
* 
dt
,

77 c⁄° 
IPru√Toﬁ
::
EvítSam∂e
* 
vÆid©i⁄Sam∂e
,

78 
Boﬁ_t
 
isAutom©ic
 )

80 if–
isAutom©ic
 ) {

82 
isAutom©ic
 = 
kFALSE
;

83 
	`Log
(Ë<< 
kWARNING
 << "S‹ryáutom©i¯¥unög såígth dëîmö©i⁄ i†nŸ im∂emíãd yë" << 
Endl
;

85 if–
dt
 =
NULL
 || (
	`IsAutom©ic
(Ë&& 
vÆid©i⁄Sam∂e
 == NULL) ) {

89  
NULL
;

91 
fNodePurôyLimô
 = 
dt
->
	`GëNodePurôyLimô
();

93 if(
	`IsAutom©ic
()) {

94 
	`Log
(Ë<< 
kFATAL
 << "S‹ryáutom©i¯¥unög såígth dëîmö©i⁄ i†nŸ im∂emíãd yë" << 
Endl
;

161  
NULL
;

164 
	`FödLi°OfNodes
–(
Decisi⁄TªeNode
*)
dt
->
	`GëRoŸ
() );

165  
√w
 
	`PrunögInfo
–-1.0, 
fPru√Såígth
, 
fPru√Sequí˚
 );

167 
	}
}

172 
	gTMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::
	$FödLi°OfNodes
–
Decisi⁄TªeNode
* 
node
 )

174 
TMVA
::
Decisi⁄TªeNode
 *
l
 = (TMVA::Decisi⁄TªeNode*)
node
->
	`GëLe·
();

175 
TMVA
::
Decisi⁄TªeNode
 *
r
 = (TMVA::Decisi⁄TªeNode*)
node
->
	`GëRight
();

176 i‡(
node
->
	`GëNodeTy≥
(Ë=0 && !“ode->
	`IsTîmöÆ
())) {

177 
this
->
	`FödLi°OfNodes
(
l
);

178 
this
->
	`FödLi°OfNodes
(
r
);

179 i‡(
this
->
	`GëSubTªeEº‹
(
node
Ë>this->
	`GëNodeEº‹
(node)) {

181 
fPru√Sequí˚
.
	`push_back
(
node
);

184 
	}
}

190 
DoubÀ_t
 
	gTMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::
	$GëSubTªeEº‹
–
Decisi⁄TªeNode
* 
node
 ) const

192 
Decisi⁄TªeNode
 *
l
 = (Decisi⁄TªeNode*)
node
->
	`GëLe·
();

193 
Decisi⁄TªeNode
 *
r
 = (Decisi⁄TªeNode*)
node
->
	`GëRight
();

194 i‡(
node
->
	`GëNodeTy≥
(Ë=0 && !“ode->
	`IsTîmöÆ
())) {

195 
DoubÀ_t
 
subTªeEº‹
 =

196 (
l
->
	`GëNEvíts
(Ë* 
this
->
	`GëSubTªeEº‹
(l) +

197 
r
->
	`GëNEvíts
(Ë* 
this
->
	`GëSubTªeEº‹
(r)) /

198 
node
->
	`GëNEvíts
();

199  
subTªeEº‹
;

202  
this
->
	`GëNodeEº‹
(
node
);

204 
	}
}

216 
DoubÀ_t
 
	gTMVA
::
Ex≥˘edEº‹Pru√Toﬁ
::
	$GëNodeEº‹
–
Decisi⁄TªeNode
 *
node
 ) const

218 
DoubÀ_t
 
îr‹R©e
 = 0;

220 
DoubÀ_t
 
nEvts
 = 
node
->
	`GëNEvíts
();

223 
DoubÀ_t
 
f
 = 0;

224 i‡(
node
->
	`GëPurôy
(Ë> 
fNodePurôyLimô
Ë
f
 =Çode->GetPurity();

225 
f
 = (1-
node
->
	`GëPurôy
());

227 
DoubÀ_t
 
df
 = 
TM©h
::
	`Sqπ
(
f
*(1-f)/
nEvts
);

229 
îr‹R©e
 = 
°d
::
	`mö
(1.0,(1.0 - (
f
-
fPru√Såígth
*
df
)));

265  
îr‹R©e
;

266 
	}
}

	@src/Factory.cxx

47 
	~"TMVA/Fa˘‹y.h
"

49 
	~"TMVA/CœssifõrFa˘‹y.h
"

50 
	~"TMVA/C⁄fig.h
"

51 
	~"TMVA/C⁄figuøbÀ.h
"

52 
	~"TMVA/Toﬁs.h
"

53 
	~"TMVA/R™kög.h
"

54 
	~"TMVA/D©aSë.h
"

55 
	~"TMVA/IMëhod.h
"

56 
	~"TMVA/MëhodBa£.h
"

57 
	~"TMVA/D©aI≈utH™dÀr.h
"

58 
	~"TMVA/D©aSëM™agî.h
"

59 
	~"TMVA/D©aSëInfo.h
"

60 
	~"TMVA/D©aLﬂdî.h
"

61 
	~"TMVA/MëhodBoo°.h
"

62 
	~"TMVA/MëhodC©eg‹y.h
"

63 
	~"TMVA/ROCCÆc.h
"

64 
	~"TMVA/ROCCurve.h
"

65 
	~"TMVA/MsgLoggî.h
"

67 
	~"TMVA/V¨übÀInfo.h
"

68 
	~"TMVA/V¨übÀTønsf‹m.h
"

70 
	~"TMVA/Resu…s.h
"

71 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

72 
	~"TMVA/Resu…sRegªssi⁄.h
"

73 
	~"TMVA/Resu…sMu…i˛ass.h
"

74 
	~<li°
>

75 
	~<bô£t
>

77 
	~"TMVA/Ty≥s.h
"

79 
	~"TROOT.h
"

80 
	~"TFûe.h
"

81 
	~"TTªe.h
"

82 
	~"TLóf.h
"

83 
	~"TEvítLi°.h
"

84 
	~"TH2.h
"

85 
	~"TText.h
"

86 
	~"TLegíd.h
"

87 
	~"TGøph.h
"

88 
	~"TStyÀ.h
"

89 
	~"TM©rixF.h
"

90 
	~"TM©rixDSym.h
"

91 
	~"TMu…iGøph.h
"

92 
	~"TPÆëãAxis.h
"

93 
	~"TPröcùÆ.h
"

94 
	~"TM©h.h
"

95 
	~"TObjSåög.h
"

96 
	~"TSy°em.h
"

97 
	~"TC™vas.h
"

99 c⁄° 
I¡_t
 
	gMöNoTøöögEvíts
 = 10;

102 
CœssImp
(
TMVA
::
Fa˘‹y
);

104 
	#READXML
 
kTRUE


	)

107 
	#VIBITS
 32

	)

119 
	gTMVA
::
Fa˘‹y
::
	$Fa˘‹y
–
TSåög
 
jobName
, 
TFûe
* 
theT¨gëFûe
, TSåög 
theO±i⁄
 )

120 : 
	`C⁄figuøbÀ
 ( 
theO±i⁄
 ),

121 
	`fTønsf‹m©i⁄s
 ( "I" ),

122 
	`fVîbo£
 ( 
kFALSE
 ),

123 
	`fC‹ªœti⁄s
 ( 
kFALSE
 ),

124 
	`fROC
 ( 
kTRUE
 ),

125 
	`fSûítFûe
 ( 
kFALSE
 ),

126 
	`fJobName
 ( 
jobName
 ),

127 
	`fA«lysisTy≥
 ( 
Ty≥s
::
kCœssifiˇti⁄
 ),

128 
	$fModñPîsi°í˚
 (
kTRUE
)

130 
fgT¨gëFûe
 = 
theT¨gëFûe
;

131 
fLoggî
->
	`SëSour˚
(
	`GëName
());

134 i‡(
	`gToﬁs
().
	`CheckF‹SûítO±i⁄
–
	`GëO±i⁄s
(Ë)Ë
	`Log
().
	`InhibôOuçut
();

138 
	`SëC⁄figDes¸ùti⁄
( "Configuration options for FactoryÑunning" );

139 
	`SëC⁄figName
–
	`GëName
() );

144 
Boﬁ_t
 
sûít
 = 
kFALSE
;

145 #ifde‡
WIN32


147 
Boﬁ_t
 
cﬁ‹
 = 
kFALSE
;

148 
Boﬁ_t
 
døwProgªssB¨
 = 
kFALSE
;

150 
Boﬁ_t
 
cﬁ‹
 = !
gROOT
->
	`IsB©ch
();

151 
Boﬁ_t
 
døwProgªssB¨
 = 
kTRUE
;

153 
	`De˛¨eO±i⁄Ref
–
fVîbo£
, "V", "Verbose flag" );

154 
	`De˛¨eO±i⁄Ref
–
cﬁ‹
, "Color", "Flag for coloured screen output (default: True, if in batch mode: False)" );

155 
	`De˛¨eO±i⁄Ref
–
fTønsf‹m©i⁄s
, "Transformations", "List ofÅransformationsÅoÅest; formattingÉxample: \"Transformations=I;D;P;U;G,D\", for identity, decorrelation, PCA, Uniformánd Gaussianisation followed by decorrelationÅransformations" );

156 
	`De˛¨eO±i⁄Ref
–
fC‹ªœti⁄s
, "Correlations", "booleanÅo show correlation in output" );

157 
	`De˛¨eO±i⁄Ref
–
fROC
, "ROC", "booleanÅo show ROC in output" );

158 
	`De˛¨eO±i⁄Ref
–
sûít
, "Silent", "Batch mode: boolean silent flag inhibitingány output from TMVAáfterÅhe creation ofÅhe factory class object (default: False)" );

159 
	`De˛¨eO±i⁄Ref
–
døwProgªssB¨
,

161 
	`De˛¨eO±i⁄Ref
–
fModñPîsi°í˚
,

165 
TSåög
 
	`™ÆysisTy≥
("Auto");

166 
	`De˛¨eO±i⁄Ref
–
™ÆysisTy≥
,

168 
	`AddPªDefVÆ
(
	`TSåög
("Classification"));

169 
	`AddPªDefVÆ
(
	`TSåög
("Regression"));

170 
	`AddPªDefVÆ
(
	`TSåög
("Multiclass"));

171 
	`AddPªDefVÆ
(
	`TSåög
("Auto"));

173 
	`P¨£O±i⁄s
();

174 
	`CheckF‹Unu£dO±i⁄s
();

176 i‡(
	`Vîbo£
()Ë
	`Log
().
	`SëMöTy≥
–
kVERBOSE
 );

179 
	`gC⁄fig
().
	`SëU£Cﬁ‹
–
cﬁ‹
 );

180 
	`gC⁄fig
().
	`SëSûít
–
sûít
 );

181 
	`gC⁄fig
().
	`SëDøwProgªssB¨
–
døwProgªssB¨
 );

183 
™ÆysisTy≥
.
	`ToLowî
();

184 i‡–
™ÆysisTy≥
 ="˛assifiˇti⁄" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kCœssifiˇti⁄
;

185 if–
™ÆysisTy≥
 ="ªgªssi⁄" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kRegªssi⁄
;

186 if–
™ÆysisTy≥
 ="mu…i˛ass" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kMu…i˛ass
;

187 if–
™ÆysisTy≥
 ="auto" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kNoA«lysisTy≥
;

190 
	}
}

195 
	gTMVA
::
Fa˘‹y
::
	$Fa˘‹y
–
TSåög
 
jobName
, TSåög 
theO±i⁄
 )

196 : 
	`C⁄figuøbÀ
 ( 
theO±i⁄
 ),

197 
	`fTønsf‹m©i⁄s
 ( "I" ),

198 
	`fVîbo£
 ( 
kFALSE
 ),

199 
	`fC‹ªœti⁄s
 ( 
kFALSE
 ),

200 
	`fROC
 ( 
kTRUE
 ),

201 
	`fSûítFûe
 ( 
kTRUE
 ),

202 
	`fJobName
 ( 
jobName
 ),

203 
	`fA«lysisTy≥
 ( 
Ty≥s
::
kCœssifiˇti⁄
 ),

204 
	$fModñPîsi°í˚
 (
kTRUE
)

206 
fgT¨gëFûe
 = 0;

207 
fLoggî
->
	`SëSour˚
(
	`GëName
());

211 i‡(
	`gToﬁs
().
	`CheckF‹SûítO±i⁄
–
	`GëO±i⁄s
(Ë)Ë
	`Log
().
	`InhibôOuçut
();

215 
	`SëC⁄figDes¸ùti⁄
( "Configuration options for FactoryÑunning" );

216 
	`SëC⁄figName
–
	`GëName
() );

220 
TH1
::
	`AddDúe˘‹y
(
kFALSE
);

221 
Boﬁ_t
 
sûít
 = 
kFALSE
;

222 #ifde‡
WIN32


224 
Boﬁ_t
 
cﬁ‹
 = 
kFALSE
;

225 
Boﬁ_t
 
døwProgªssB¨
 = 
kFALSE
;

227 
Boﬁ_t
 
cﬁ‹
 = !
gROOT
->
	`IsB©ch
();

228 
Boﬁ_t
 
døwProgªssB¨
 = 
kTRUE
;

230 
	`De˛¨eO±i⁄Ref
–
fVîbo£
, "V", "Verbose flag" );

231 
	`De˛¨eO±i⁄Ref
–
cﬁ‹
, "Color", "Flag for coloured screen output (default: True, if in batch mode: False)" );

232 
	`De˛¨eO±i⁄Ref
–
fTønsf‹m©i⁄s
, "Transformations", "List ofÅransformationsÅoÅest; formattingÉxample: \"Transformations=I;D;P;U;G,D\", for identity, decorrelation, PCA, Uniformánd Gaussianisation followed by decorrelationÅransformations" );

233 
	`De˛¨eO±i⁄Ref
–
fC‹ªœti⁄s
, "Correlations", "booleanÅo show correlation in output" );

234 
	`De˛¨eO±i⁄Ref
–
fROC
, "ROC", "booleanÅo show ROC in output" );

235 
	`De˛¨eO±i⁄Ref
–
sûít
, "Silent", "Batch mode: boolean silent flag inhibitingány output from TMVAáfterÅhe creation ofÅhe factory class object (default: False)" );

236 
	`De˛¨eO±i⁄Ref
–
døwProgªssB¨
,

238 
	`De˛¨eO±i⁄Ref
–
fModñPîsi°í˚
,

242 
TSåög
 
	`™ÆysisTy≥
("Auto");

243 
	`De˛¨eO±i⁄Ref
–
™ÆysisTy≥
,

245 
	`AddPªDefVÆ
(
	`TSåög
("Classification"));

246 
	`AddPªDefVÆ
(
	`TSåög
("Regression"));

247 
	`AddPªDefVÆ
(
	`TSåög
("Multiclass"));

248 
	`AddPªDefVÆ
(
	`TSåög
("Auto"));

250 
	`P¨£O±i⁄s
();

251 
	`CheckF‹Unu£dO±i⁄s
();

253 i‡(
	`Vîbo£
()Ë
	`Log
().
	`SëMöTy≥
–
kVERBOSE
 );

256 
	`gC⁄fig
().
	`SëU£Cﬁ‹
–
cﬁ‹
 );

257 
	`gC⁄fig
().
	`SëSûít
–
sûít
 );

258 
	`gC⁄fig
().
	`SëDøwProgªssB¨
–
døwProgªssB¨
 );

260 
™ÆysisTy≥
.
	`ToLowî
();

261 i‡–
™ÆysisTy≥
 ="˛assifiˇti⁄" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kCœssifiˇti⁄
;

262 if–
™ÆysisTy≥
 ="ªgªssi⁄" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kRegªssi⁄
;

263 if–
™ÆysisTy≥
 ="mu…i˛ass" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kMu…i˛ass
;

264 if–
™ÆysisTy≥
 ="auto" ) 
fA«lysisTy≥
 = 
Ty≥s
::
kNoA«lysisTy≥
;

266 
	`Gªëögs
();

267 
	}
}

273 
	gTMVA
::
Fa˘‹y
::
	$Gªëögs
()

275 
	`gToﬁs
().
	`ROOTVîsi⁄Mesßge
–
	`Log
() );

276 
	`gToﬁs
().
	`TMVAWñcomeMesßge
–
	`Log
(), gToﬁs().
kLogoWñcomeMsg
 );

277 
	`gToﬁs
().
	`TMVAVîsi⁄Mesßge
–
	`Log
(Ë); Log(Ë<< 
Endl
;

278 
	}
}

282 
Boﬁ_t
 
	gTMVA
::
Fa˘‹y
::
	$IsSûítFûe
()

284  
fSûítFûe
;

285 
	}
}

289 
Boﬁ_t
 
	gTMVA
::
Fa˘‹y
::
	$IsModñPîsi°í˚
()

291  
fModñPîsi°í˚
;

292 
	}
}

297 
	gTMVA
::
Fa˘‹y
::~
	$Fa˘‹y
( )

299 
°d
::
ve˘‹
<
TMVA
::
V¨übÀTønsf‹mBa£
*>::
ôî©‹
 
åfIt
 = 
fDeÁu…Trfs
.
	`begö
();

300 ;
åfIt
 !
fDeÁu…Trfs
.
	`íd
();ÅrfIt++Ë
	`dñëe
 (*trfIt);

302 
this
->
	`DñëeAŒMëhods
();

308 
Toﬁs
::
	`De°royIn°™˚
();

309 
C⁄fig
::
	`De°royIn°™˚
();

310 
	}
}

315 
	gTMVA
::
Fa˘‹y
::
	$DñëeAŒMëhods
( )

317 
°d
::
m≠
<
TSåög
,
MVe˘‹
*>::
ôî©‹
 
ôrM≠
;

319 
ôrM≠
 = 
fMëhodsM≠
.
	`begö
();ôrM≠ !fMëhodsM≠.
	`íd
();itrMap++)

321 
MVe˘‹
 *
mëhods
=
ôrM≠
->
£c⁄d
;

323 
MVe˘‹
::
ôî©‹
 
ôrMëhod
 = 
mëhods
->
	`begö
();

324 ; 
ôrMëhod
 !
mëhods
->
	`íd
(); itrMethod++) {

325 
	`Log
(Ë<< 
kDEBUG
 << "Dñëêmëhod: " << (*
ôrMëhod
)->
	`GëName
(Ë<< 
Endl
;

326 
	`dñëe
 (*
ôrMëhod
);

328 
mëhods
->
	`˛ór
();

329 
dñëe
 
mëhods
;

331 
	}
}

335 
	gTMVA
::
Fa˘‹y
::
	$SëVîbo£
–
Boﬁ_t
 
v
 )

337 
fVîbo£
 = 
v
;

338 
	}
}

343 
	gTMVA
::
MëhodBa£
* 
TMVA
::
Fa˘‹y
::
	$BookMëhod
–
TMVA
::
D©aLﬂdî
 *
lﬂdî
, 
TSåög
 
theMëhodName
, TSåög 
mëhodTôÀ
, TSåög 
theO±i⁄
 )

345 if(
fModñPîsi°í˚
Ë
gSy°em
->
	`MakeDúe˘‹y
(
lﬂdî
->
	`GëName
());

347 
TSåög
 
d©a£äame
=
lﬂdî
->
	`GëName
();

349 if–
fA«lysisTy≥
 =
Ty≥s
::
kNoA«lysisTy≥
 ){

350 if–
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
()==2

351 && 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
("Sig«l"Ë!
NULL


352 && 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëCœssInfo
("Background"Ë!
NULL


354 
fA«lysisTy≥
 = 
Ty≥s
::
kCœssifiˇti⁄
;

355 } if–
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
() >= 2 ){

356 
fA«lysisTy≥
 = 
Ty≥s
::
kMu…i˛ass
;

358 
	`Log
(Ë<< 
kFATAL
 << "Nÿ™Æysi†ty≥ f‹ " << 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
() << " classesánd "

359 << 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNT¨gës
(Ë<< "Ñegªssi⁄Å¨gës." << 
Endl
;

365 if(
fMëhodsM≠
.
	`föd
(
d©a£äame
)!=fMëhodsM≠.
	`íd
())

367 i‡(
	`GëMëhod
–
d©a£äame
,
mëhodTôÀ
 ) != 0) {

368 
	`Log
(Ë<< 
kFATAL
 << "Booking failed since method withÅitle <"

369 << 
mëhodTôÀ
 <<">áÃódyÉxi°†"<< "ö wôh D©aSë Namê<"<< 
lﬂdî
->
	`GëName
()<<"> "

370 << 
Endl
;

375 
	`Log
(Ë<< 
kHEADER
 << "Bookög mëhod: " << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< 
mëhodTôÀ


377 << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
 << Endl;

380 
I¡_t
 
boo°Num
 = 0;

381 
TMVA
::
C⁄figuøbÀ
* 
c⁄f
 = 
√w
 TMVA::
	`C⁄figuøbÀ
–
theO±i⁄
 );

382 
c⁄f
->
	`De˛¨eO±i⁄Ref
–
boo°Num
 = 0, "Boost_num",

384 
c⁄f
->
	`P¨£O±i⁄s
();

385 
dñëe
 
c⁄f
;

386 
TSåög
 
fFûeDú
;

387 if(
fModñPîsi°í˚
)

389 
fFûeDú
=
lﬂdî
->
	`GëName
();

390 
fFûeDú
+="/"+
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeDú
;

393 
IMëhod
* 
im
;

394 i‡(!
boo°Num
) {

395 
im
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
–
°d
::
	`°rög
(
theMëhodName
),

396 
fJobName
,

397 
mëhodTôÀ
,

398 
lﬂdî
->
	`DeÁu…D©aSëInfo
(),

399 
theO±i⁄
 );

403 
	`Log
(Ë<< 
kDEBUG
 <<"Boo° Numbî i†" << 
boo°Num
 << " > 0:Åøö boo°ed cœssifõr" << 
Endl
;

404 
im
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
–
°d
::
	`°rög
("Boost"),

405 
fJobName
,

406 
mëhodTôÀ
,

407 
lﬂdî
->
	`DeÁu…D©aSëInfo
(),

408 
theO±i⁄
 );

409 
MëhodBoo°
* 
mëhBoo°
 = 
dy«mic_ˇ°
<MëhodBoo°*>(
im
);

410 i‡(!
mëhBoo°
)

411 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kBoo° c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Fa˘‹y" << 
Endl
;

413 if(
fModñPîsi°í˚
Ë
mëhBoo°
->
	`SëWeightFûeDú
(
fFûeDú
);

414 
mëhBoo°
->
	`SëModñPîsi°í˚
(
fModñPîsi°í˚
);

415 
mëhBoo°
->
	`SëBoo°edMëhodName
–
theMëhodName
 );

416 
mëhBoo°
->
fD©aSëM™agî
 = 
lﬂdî
->fDataSetManager;

417 
mëhBoo°
->
	`SëFûe
(
fgT¨gëFûe
);

418 
mëhBoo°
->
	`SëSûítFûe
(
	`IsSûítFûe
());

421 
MëhodBa£
 *
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
im
);

422 i‡(
mëhod
==0)  0;

425 i‡(
mëhod
->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
) {

426 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
im
));

427 i‡(!
mëhC©
)

428 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Fa˘‹y" << 
Endl
;

430 if(
fModñPîsi°í˚
Ë
mëhC©
->
	`SëWeightFûeDú
(
fFûeDú
);

431 
mëhC©
->
	`SëModñPîsi°í˚
(
fModñPîsi°í˚
);

432 
mëhC©
->
fD©aSëM™agî
 = 
lﬂdî
->fDataSetManager;

433 
mëhC©
->
	`SëFûe
(
fgT¨gëFûe
);

434 
mëhC©
->
	`SëSûítFûe
(
	`IsSûítFûe
());

438 i‡(!
mëhod
->
	`HasA«lysisTy≥
–
fA«lysisTy≥
,

439 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
(),

440 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNT¨gës
() )) {

441 
	`Log
(Ë<< 
kWARNING
 << "Mëhod " << 
mëhod
->
	`GëMëhodTy≥Name
() << " isÇot capable of handling " ;

442 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
) {

443 
	`Log
(Ë<< "ªgªssi⁄ wôh " << 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNT¨gës
(Ë<< "Å¨gës." << 
Endl
;

445 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 ) {

446 
	`Log
(Ë<< "mu…i˛as†˛assifiˇti⁄ wôh " << 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
(Ë<< " cœs£s." << 
Endl
;

449 
	`Log
(Ë<< "˛assifiˇti⁄ wôh " << 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNCœs£s
(Ë<< " cœs£s." << 
Endl
;

454 if(
fModñPîsi°í˚
Ë
mëhod
->
	`SëWeightFûeDú
(
fFûeDú
);

455 
mëhod
->
	`SëModñPîsi°í˚
(
fModñPîsi°í˚
);

456 
mëhod
->
	`SëA«lysisTy≥
–
fA«lysisTy≥
 );

457 
mëhod
->
	`SëupMëhod
();

458 
mëhod
->
	`P¨£O±i⁄s
();

459 
mëhod
->
	`Pro˚ssSëup
();

460 
mëhod
->
	`SëFûe
(
fgT¨gëFûe
);

461 
mëhod
->
	`SëSûítFûe
(
	`IsSûítFûe
());

464 
mëhod
->
	`CheckSëup
();

466 if(
fMëhodsM≠
.
	`föd
(
d©a£äame
)==fMëhodsM≠.
	`íd
())

468 
MVe˘‹
 *
mve˘‹
=
√w
 MVector;

469 
fMëhodsM≠
[
d©a£äame
]=
mve˘‹
;

471 
fMëhodsM≠
[
d©a£äame
]->
	`push_back
–
mëhod
 );

472  
mëhod
;

473 
	}
}

481 
	gTMVA
::
MëhodBa£
* 
TMVA
::
Fa˘‹y
::
	$BookMëhod
(
TMVA
::
D©aLﬂdî
 *
lﬂdî
, 
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, TSåög 
theO±i⁄
 )

483  
	`BookMëhod
(
lﬂdî
, 
Ty≥s
::
	`In°™˚
().
	`GëMëhodName
–
theMëhod
 ), 
mëhodTôÀ
, 
theO±i⁄
 );

484 
	}
}

489 
	gTMVA
::
IMëhod
* 
TMVA
::
Fa˘‹y
::
	$GëMëhod
(c⁄° 
TSåög
& 
d©a£äame
, c⁄° TSåög &
mëhodTôÀ
 ) const

491 if(
fMëhodsM≠
.
	`föd
(
d©a£äame
)==fMëhodsM≠.
	`íd
())  0;

493 
MVe˘‹
 *
mëhods
=
fMëhodsM≠
.
	`föd
(
d©a£äame
)->
£c⁄d
;

495 
MVe˘‹
::
c⁄°_ôî©‹
 
ôrMëhod
;

497 
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++) {

498 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

499 i‡–(
mva
->
	`GëMëhodName
())==
mëhodTôÀ
 )  mva;

502 
	}
}

507 
Boﬁ_t
 
	gTMVA
::
Fa˘‹y
::
	$HasMëhod
(c⁄° 
TSåög
& 
d©a£äame
, c⁄° TSåög &
mëhodTôÀ
 ) const

509 if(
fMëhodsM≠
.
	`föd
(
d©a£äame
)==fMëhodsM≠.
	`íd
())  0;

511 
°d
::
°rög
 
mëhodName
 = 
mëhodTôÀ
.
	`D©a
();

512 autÿ
isEquÆToMëhodName
 = [&
mëhodName
](
TMVA
::
IMëhod
 * 
m
) {

513  ( 0 =
mëhodName
.
	`com∑ª
–
m
->
	`GëName
() ) );

516 
TMVA
::
Fa˘‹y
::
MVe˘‹
 * 
mëhods
 = 
this
->
fMëhodsM≠
.
	`©
(
d©a£äame
);

517 
Boﬁ_t
 
isMëhodNameExi°ög
 = 
°d
::
	`™y_of
–
mëhods
->
	`begö
(), mëhods->
	`íd
(), 
isEquÆToMëhodName
);

519  
isMëhodNameExi°ög
;

520 
	}
}

524 
	gTMVA
::
Fa˘‹y
::
	$WrôeD©aInf‹m©i⁄
(
D©aSëInfo
& 
fD©aSëInfo
)

526 
	`RoŸBa£Dú
()->
	`cd
();

528 if(!
	`RoŸBa£Dú
()->
	`GëDúe˘‹y
(
fD©aSëInfo
.
	`GëName
())ËRoŸBa£Dú()->
	`mkdú
(fDataSetInfo.GetName());

531 
	`RoŸBa£Dú
()->
	`cd
(
fD©aSëInfo
.
	`GëName
());

532 
fD©aSëInfo
.
	`GëD©aSë
();

536 c⁄° 
TM©rixD
* 
	`m
(0);

537 c⁄° 
TH2
* 
	`h
(0);

539 if(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
){

540 
UI¡_t
 
˛s
 = 0; cl†< 
fD©aSëInfo
.
	`GëNCœs£s
() ; cls++) {

541 
m
 = 
fD©aSëInfo
.
	`C‹ªœti⁄M©rix
(fD©aSëInfo.
	`GëCœssInfo
(
˛s
)->
	`GëName
());

542 
h
 = 
fD©aSëInfo
.
	`Cª©eC‹ªœti⁄M©rixHi°
(
m
, 
	`TSåög
("C‹ªœti⁄M©rix")+fD©aSëInfo.
	`GëCœssInfo
(
˛s
)->
	`GëName
(),

543 
	`TSåög
("C‹ªœti⁄ M©rix (")+ 
fD©aSëInfo
.
	`GëCœssInfo
(
˛s
)->
	`GëName
() +TString(")"));

544 i‡(
h
!=0) {

545 
h
->
	`Wrôe
();

546 
dñëe
 
h
;

551 
m
 = 
fD©aSëInfo
.
	`C‹ªœti⁄M©rix
( "Signal" );

552 
h
 = 
fD©aSëInfo
.
	`Cª©eC‹ªœti⁄M©rixHi°
(
m
, "CorrelationMatrixS", "Correlation Matrix (signal)");

553 i‡(
h
!=0) {

554 
h
->
	`Wrôe
();

555 
dñëe
 
h
;

558 
m
 = 
fD©aSëInfo
.
	`C‹ªœti⁄M©rix
( "Background" );

559 
h
 = 
fD©aSëInfo
.
	`Cª©eC‹ªœti⁄M©rixHi°
(
m
, "CorrelationMatrixB", "Correlation Matrix (background)");

560 i‡(
h
!=0) {

561 
h
->
	`Wrôe
();

562 
dñëe
 
h
;

565 
m
 = 
fD©aSëInfo
.
	`C‹ªœti⁄M©rix
( "Regression" );

566 
h
 = 
fD©aSëInfo
.
	`Cª©eC‹ªœti⁄M©rixHi°
(
m
, "CorrelationMatrix", "Correlation Matrix");

567 i‡(
h
!=0) {

568 
h
->
	`Wrôe
();

569 
dñëe
 
h
;

575 
TSåög
 
¥o˚ssTrfs
 = "I";

578 
¥o˚ssTrfs
 = 
fTønsf‹m©i⁄s
;

581 
°d
::
ve˘‹
<
TMVA
::
Tønsf‹m©i⁄H™dÀr
*> 
åfs
;

582 
Tønsf‹m©i⁄H™dÀr
* 
idítôyTrH™dÀr
 = 0;

584 
°d
::
ve˘‹
<
TSåög
> 
åfsDef
 = 
	`gToﬁs
().
	`S∂ôSåög
(
¥o˚ssTrfs
,';');

585 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
åfsDefIt
 = 
åfsDef
.
	`begö
();

586 ; 
åfsDefIt
!=
åfsDef
.
	`íd
();ÅrfsDefIt++) {

587 
åfs
.
	`push_back
(
√w
 
TMVA
::
	`Tønsf‹m©i⁄H™dÀr
(
fD©aSëInfo
, "Factory"));

588 
TSåög
 
åfS
 = (*
åfsDefIt
);

591 
	`Log
(Ë<< 
kDEBUG
 << "cuºíàå™sf‹m©i⁄ såög: '" << 
åfS
.
	`D©a
(Ë<< "'" << 
Endl
;

592 
TMVA
::
	`Cª©eV¨übÀTønsf‹ms
–
åfS
,

593 
fD©aSëInfo
,

594 *(
åfs
.
	`back
()),

595 
	`Log
() );

597 i‡(
åfS
.
	`BegösWôh
('I')Ë
idítôyTrH™dÀr
 = 
åfs
.
	`back
();

600 c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
öputEvíts
 = 
fD©aSëInfo
.
	`GëD©aSë
()->
	`GëEvítCﬁÀ˘i⁄
();

603 
°d
::
ve˘‹
<
TMVA
::
Tønsf‹m©i⁄H™dÀr
*>::
ôî©‹
 
åfIt
 = 
åfs
.
	`begö
();

605 ;
åfIt
 !
åfs
.
	`íd
();ÅrfIt++) {

607 (*
åfIt
)->
	`SëRoŸDú
(
	`RoŸBa£Dú
()->
	`GëDúe˘‹y
(
fD©aSëInfo
.
	`GëName
()));

608 (*
åfIt
)->
	`CÆcTønsf‹m©i⁄s
(
öputEvíts
);

610 if(
idítôyTrH™dÀr
ËidítôyTrH™dÀr->
	`PrötV¨übÀR™kög
();

613 
åfIt
 = 
åfs
.
	`begö
();ÅrfIà!åfs.
	`íd
();ÅrfIt++Ë
dñëe
 *trfIt;

614 
	}
}

622 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gTMVA
::
Fa˘‹y
::
	$O±imizeAŒMëhods
(
TSåög
 
fomTy≥
, TSåög 
fôTy≥
)

625 
°d
::
m≠
<
TSåög
,
MVe˘‹
*>::
ôî©‹
 
ôrM≠
;

626 
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
Tu√dP¨amëîs
;

627 
ôrM≠
 = 
fMëhodsM≠
.
	`begö
();ôrM≠ !fMëhodsM≠.
	`íd
();itrMap++)

629 
MVe˘‹
 *
mëhods
=
ôrM≠
->
£c⁄d
;

631 
MVe˘‹
::
ôî©‹
 
ôrMëhod
;

634  
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++ ) {

635 
Evít
::
	`SëIsTøöög
(
kTRUE
);

636 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

637 i‡(!
mva
) {

638 
	`Log
(Ë<< 
kFATAL
 << "Dy«mi¯ˇ°ÅÿMëhodBa£ faûed" <<
Endl
;

639  
Tu√dP¨amëîs
;

642 i‡(
mva
->
	`D©a
()->
	`GëNTøöögEvíts
(Ë< 
MöNoTøöögEvíts
) {

643 
	`Log
(Ë<< 
kWARNING
 << "Mëhod " << 
mva
->
	`GëMëhodName
()

645 << 
mva
->
	`D©a
()->
	`GëNTøöögEvíts
()

646 << "]Åh™Ñequúed [" << 
MöNoTøöögEvíts
 << "]" << 
Endl
;

650 
	`Log
(Ë<< 
kINFO
 << "O±imizêmëhod: " << 
mva
->
	`GëMëhodName
() << " for "

651 << (
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

652 (
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛as†˛assifiˇti⁄" : "Cœssifiˇti⁄")Ë<< 
Endl
;

654 
Tu√dP¨amëîs
 = 
mva
->
	`O±imizeTunögP¨amëîs
(
fomTy≥
,
fôTy≥
);

655 
	`Log
(Ë<< 
kINFO
 << "O±imiz©i⁄ o‡tunögÖ¨amëî†föished f‹ Mëhod:"<<
mva
->
	`GëName
(Ë<< 
Endl
;

659  
Tu√dP¨amëîs
;

661 
	}
}

670 
	gTMVA
::
ROCCurve
 *
TMVA
::
Fa˘‹y
::
	$GëROC
(
TMVA
::
D©aLﬂdî
 *
lﬂdî
, 
TSåög
 
theMëhodName
, 
UI¡_t
 
iCœss
)

672  
	`GëROC
((
TSåög
)
lﬂdî
->
	`GëName
(), 
theMëhodName
, 
iCœss
);

673 
	}
}

682 
	gTMVA
::
ROCCurve
 *
TMVA
::
Fa˘‹y
::
	$GëROC
(
TSåög
 
d©a£äame
, TSåög 
theMëhodName
, 
UI¡_t
 
iCœss
)

684 i‡(
fMëhodsM≠
.
	`föd
(
d©a£äame
Ë=fMëhodsM≠.
	`íd
()) {

685 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("D©aSë = %†nŸ found i¿mëhod†m≠.", 
d©a£äame
.
	`D©a
()Ë<< 
Endl
;

686  
nuŒ±r
;

689 i‡(!
this
->
	`HasMëhod
(
d©a£äame
, 
theMëhodName
)) {

690 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Mëhod = %†nŸ found wôh D©a£à%†", 
theMëhodName
.
	`D©a
(), 
d©a£äame
.Data())

691 << 
Endl
;

692  
nuŒ±r
;

695 
°d
::
£t
<
Ty≥s
::
EA«lysisTy≥
> 
ÆlowedA«lysisTy≥s
 = {Ty≥s::
kCœssifiˇti⁄
, Ty≥s::
kMu…i˛ass
};

696 i‡(
ÆlowedA«lysisTy≥s
.
	`cou¡
(
this
->
fA«lysisTy≥
) == 0) {

697 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Can only generate ROC curves foránalysisÅype kClassificationánd kMulticlass.")

698 << 
Endl
;

699  
nuŒ±r
;

702 
TMVA
::
MëhodBa£
 *
mëhod
 = 
dy«mic_ˇ°
<TMVA::MëhodBa£ *>(
this
->
	`GëMëhod
(
d©a£äame
, 
theMëhodName
));

703 
TMVA
::
D©aSë
 *
d©a£t
 = 
mëhod
->
	`D©a
();

704 
TMVA
::
Resu…s
 *
ªsu…s
 = 
d©a£t
->
	`GëResu…s
(
theMëhodName
, 
Ty≥s
::
kTe°ög
, 
this
->
fA«lysisTy≥
);

706 
UI¡_t
 
nCœs£s
 = 
mëhod
->
	`D©aInfo
().
	`GëNCœs£s
();

707 i‡(
this
->
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 && 
iCœss
 >
nCœs£s
) {

708 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Given classÇumber (iClass = %i) doesÇotÉxist. Thereáre %i classes in dataset.",

709 
iCœss
, 
nCœs£s
)

710 << 
Endl
;

711  
nuŒ±r
;

714 
TMVA
::
ROCCurve
 *
rocCurve
 = 
nuŒ±r
;

715 i‡(
this
->
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
) {

717 
°d
::
ve˘‹
<
Flﬂt_t
> *
mvaRes
 = 
dy«mic_ˇ°
<
Resu…sCœssifiˇti⁄
 *>(
ªsu…s
)->
	`GëVÆueVe˘‹
();

718 
°d
::
ve˘‹
<
Boﬁ_t
> *
mvaResTy≥s
 = 
dy«mic_ˇ°
<
Resu…sCœssifiˇti⁄
 *>(
ªsu…s
)->
	`GëVÆueVe˘‹Ty≥s
();

719 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaResWeights
;

721 autÿ
evítCﬁÀ˘i⁄
 = 
d©a£t
->
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
);

722 
mvaResWeights
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

723 autÿ
ev
 : 
evítCﬁÀ˘i⁄
) {

724 
mvaResWeights
.
	`push_back
(
ev
->
	`GëWeight
());

727 
rocCurve
 = 
√w
 
TMVA
::
	`ROCCurve
(*
mvaRes
, *
mvaResTy≥s
, 
mvaResWeights
);

729 } i‡(
this
->
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

730 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaRes
;

731 
°d
::
ve˘‹
<
Boﬁ_t
> 
mvaResTy≥s
;

732 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaResWeights
;

734 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
>> *
øwMvaRes
 = 
dy«mic_ˇ°
<
Resu…sMu…i˛ass
 *>(
ªsu…s
)->
	`GëVÆueVe˘‹
();

739 
mvaRes
.
	`ª£rve
(
øwMvaRes
->
	`size
());

740 autÿ
ôem
 : *
øwMvaRes
) {

741 
mvaRes
.
	`push_back
(
ôem
[
iCœss
]);

744 autÿ
evítCﬁÀ˘i⁄
 = 
d©a£t
->
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
);

745 
mvaResTy≥s
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

746 
mvaResWeights
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

747 autÿ
ev
 : 
evítCﬁÀ˘i⁄
) {

748 
mvaResTy≥s
.
	`push_back
(
ev
->
	`GëCœss
(Ë=
iCœss
);

749 
mvaResWeights
.
	`push_back
(
ev
->
	`GëWeight
());

752 
rocCurve
 = 
√w
 
TMVA
::
	`ROCCurve
(
mvaRes
, 
mvaResTy≥s
, 
mvaResWeights
);

755  
rocCurve
;

756 
	}
}

766 
DoubÀ_t
 
	gTMVA
::
Fa˘‹y
::
	$GëROCI¡egøl
(
TMVA
::
D©aLﬂdî
 *
lﬂdî
, 
TSåög
 
theMëhodName
, 
UI¡_t
 
iCœss
)

768  
	`GëROCI¡egøl
((
TSåög
)
lﬂdî
->
	`GëName
(), 
theMëhodName
, 
iCœss
);

769 
	}
}

779 
DoubÀ_t
 
	gTMVA
::
Fa˘‹y
::
	$GëROCI¡egøl
(
TSåög
 
d©a£äame
, TSåög 
theMëhodName
, 
UI¡_t
 
iCœss
)

781 i‡(
fMëhodsM≠
.
	`föd
(
d©a£äame
Ë=fMëhodsM≠.
	`íd
()) {

782 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("D©aSë = %†nŸ found i¿mëhod†m≠.", 
d©a£äame
.
	`D©a
()Ë<< 
Endl
;

786 i‡–! 
this
->
	`HasMëhod
(
d©a£äame
, 
theMëhodName
) ) {

787 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Mëhod = %†nŸ found wôh D©a£à%†", 
theMëhodName
.
	`D©a
(), 
d©a£äame
.D©a()Ë<< 
Endl
;

791 
°d
::
£t
<
Ty≥s
::
EA«lysisTy≥
> 
ÆlowedA«lysisTy≥s
 = {Ty≥s::
kCœssifiˇti⁄
, Ty≥s::
kMu…i˛ass
};

792 i‡–
ÆlowedA«lysisTy≥s
.
	`cou¡
(
this
->
fA«lysisTy≥
) == 0 ) {

793 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Can only generate ROC integral foránalysisÅype kClassification.ánd kMulticlass.")

794 << 
Endl
;

798 
TMVA
::
ROCCurve
 *
rocCurve
 = 
	`GëROC
(
d©a£äame
, 
theMëhodName
, 
iCœss
);

799 i‡(!
rocCurve
) {

800 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("ROCCurve object wasÇot created in Method = %sÇot found with Dataset = %s ",

801 
theMëhodName
.
	`D©a
(), 
d©a£äame
.Data())

802 << 
Endl
;

806 
I¡_t
 
≈oöts
 = 
TMVA
::
	`gC⁄fig
().
fV¨übÀPlŸtög
.
fNbösXOfROCCurve
 + 1;

807 
DoubÀ_t
 
rocI¡egøl
 = 
rocCurve
->
	`GëROCI¡egøl
(
≈oöts
);

808 
dñëe
 
rocCurve
;

810  
rocI¡egøl
;

811 
	}
}

827 
TGøph
* 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurve
(
D©aLﬂdî
 *
lﬂdî
, 
TSåög
 
theMëhodName
, 
Boﬁ_t
 
£tTôÀs
, 
UI¡_t
 
iCœss
)

829  
	`GëROCCurve
–(
TSåög
)
lﬂdî
->
	`GëName
(), 
theMëhodName
, 
£tTôÀs
, 
iCœss
 );

830 
	}
}

846 
TGøph
* 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurve
(
TSåög
 
d©a£äame
, TSåög 
theMëhodName
, 
Boﬁ_t
 
£tTôÀs
, 
UI¡_t
 
iCœss
)

848 i‡(
fMëhodsM≠
.
	`föd
(
d©a£äame
Ë=fMëhodsM≠.
	`íd
()) {

849 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("D©aSë = %†nŸ found i¿mëhod†m≠.", 
d©a£äame
.
	`D©a
()Ë<< 
Endl
;

850  
nuŒ±r
;

853 i‡–! 
this
->
	`HasMëhod
(
d©a£äame
, 
theMëhodName
) ) {

854 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Mëhod = %†nŸ found wôh D©a£à%†", 
theMëhodName
.
	`D©a
(), 
d©a£äame
.D©a()Ë<< 
Endl
;

855  
nuŒ±r
;

858 
°d
::
£t
<
Ty≥s
::
EA«lysisTy≥
> 
ÆlowedA«lysisTy≥s
 = {Ty≥s::
kCœssifiˇti⁄
, Ty≥s::
kMu…i˛ass
};

859 i‡–
ÆlowedA«lysisTy≥s
.
	`cou¡
(
this
->
fA«lysisTy≥
) == 0 ) {

860 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("C™ o∆y gíî©êROC curve†f‹á«lysi†ty≥ kCœssifiˇti⁄ánd kMu…i˛ass."Ë<< 
Endl
;

861  
nuŒ±r
;

864 
TMVA
::
ROCCurve
 *
rocCurve
 = 
	`GëROC
(
d©a£äame
, 
theMëhodName
, 
iCœss
);

865 
TGøph
 *
gøph
 = 
nuŒ±r
;

867 i‡–! 
rocCurve
 ) {

868 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("ROCCurvêobje˘ wa†nŸ cª©ed i¿Mëhod = %†nŸ found wôh D©a£à%†", 
theMëhodName
.
	`D©a
(), 
d©a£äame
.D©a()Ë<< 
Endl
;

869  
nuŒ±r
;

872 
gøph
 = (
TGøph
 *)
rocCurve
->
	`GëROCCurve
()->
	`Cl⁄e
();

873 
dñëe
 
rocCurve
;

875 if(
£tTôÀs
) {

876 
gøph
->
	`GëYaxis
()->
	`SëTôÀ
("BackgroundÑejection (Specificity)");

877 
gøph
->
	`GëXaxis
()->
	`SëTôÀ
("SignalÉfficiency (Sensitivity)");

878 
gøph
->
	`SëTôÀ
(
	`F‹m
("Sig«»efficõncy vs. BackgroundÑeje˘i⁄ (%s)", 
theMëhodName
.
	`D©a
()));

881  
gøph
;

882 
	}
}

896 
TMu…iGøph
* 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurveAsMu…iGøph
(
D©aLﬂdî
 *
lﬂdî
, 
UI¡_t
 
iCœss
)

898  
	`GëROCCurveAsMu…iGøph
((
TSåög
)
lﬂdî
->
	`GëName
(), 
iCœss
);

899 
	}
}

913 
TMu…iGøph
* 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurveAsMu…iGøph
(
TSåög
 
d©a£äame
, 
UI¡_t
 
iCœss
)

915 
UI¡_t
 
löe_cﬁ‹
 = 1;

917 
TMu…iGøph
 *
mu…igøph
 = 
√w
 
	`TMu…iGøph
();

919 
MVe˘‹
 *
mëhods
 = 
fMëhodsM≠
[
d©a£äame
.
	`D©a
()];

920 autÿ* 
mëhod_øw
 : *
mëhods
) {

921 
TMVA
::
MëhodBa£
 *
mëhod
 = 
dy«mic_ˇ°
<TMVA::MëhodBa£ *>(
mëhod_øw
);

922 i‡(
mëhod
 =
nuŒ±r
) { ; }

924 
TSåög
 
mëhodName
 = 
mëhod
->
	`GëMëhodName
();

925 
UI¡_t
 
nCœs£s
 = 
mëhod
->
	`D©aInfo
().
	`GëNCœs£s
();

927 i‡–
this
->
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 && 
iCœss
 >
nCœs£s
 ) {

928 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Giví cœs†numbî (iCœs†%iËd€†nŸÉxi°. Thîê¨ê%ò˛as£†ö d©a£t.", 
iCœss
, 
nCœs£s
Ë<< 
Endl
;

932 
TSåög
 
˛assName
 = 
mëhod
->
	`D©aInfo
().
	`GëCœssInfo
(
iCœss
)->
	`GëName
();

934 
TGøph
 *
gøph
 = 
this
->
	`GëROCCurve
(
d©a£äame
, 
mëhodName
, 
Ál£
, 
iCœss
);

935 
gøph
->
	`SëTôÀ
(
mëhodName
);

937 
gøph
->
	`SëLöeWidth
(2);

938 
gøph
->
	`SëLöeCﬁ‹
(
löe_cﬁ‹
++);

939 
gøph
->
	`SëFûlCﬁ‹
(10);

941 
mu…igøph
->
	`Add
(
gøph
);

944 i‡–
mu…igøph
->
	`GëLi°OfGøphs
(Ë=
nuŒ±r
 ) {

945 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("Nÿmëohd†havê˛as†%òdeföed.", 
iCœss
Ë<< 
Endl
;

946  
nuŒ±r
;

949  
mu…igøph
;

950 
	}
}

964 
TC™vas
 * 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurve
(
TMVA
::
D©aLﬂdî
 *
lﬂdî
, 
UI¡_t
 
iCœss
)

966  
	`GëROCCurve
((
TSåög
)
lﬂdî
->
	`GëName
(), 
iCœss
);

967 
	}
}

980 
TC™vas
 * 
	gTMVA
::
Fa˘‹y
::
	$GëROCCurve
(
TSåög
 
d©a£äame
, 
UI¡_t
 
iCœss
)

982 i‡(
fMëhodsM≠
.
	`föd
(
d©a£äame
Ë=fMëhodsM≠.
	`íd
()) {

983 
	`Log
(Ë<< 
kERROR
 << 
	`F‹m
("D©aSë = %†nŸ found i¿mëhod†m≠.", 
d©a£äame
.
	`D©a
()Ë<< 
Endl
;

987 
TSåög
 
«me
 = 
	`F‹m
("ROCCurvê%†˛as†%i", 
d©a£äame
.
	`D©a
(), 
iCœss
);

988 
TC™vas
 *
ˇnvas
 = 
√w
 
	`TC™vas
(
«me
, "ROC Curve", 200, 10, 700, 500);

989 
ˇnvas
->
	`SëGrid
();

991 
TMu…iGøph
 *
mu…igøph
 = 
this
->
	`GëROCCurveAsMu…iGøph
(
d©a£äame
, 
iCœss
);

993 i‡–
mu…igøph
 ) {

994 
mu…igøph
->
	`Døw
("AL");

996 
mu…igøph
->
	`GëYaxis
()->
	`SëTôÀ
("BackgroundÑejection (Specificity)");

997 
mu…igøph
->
	`GëXaxis
()->
	`SëTôÀ
("SignalÉfficiency (Sensitivity)");

999 
TSåög
 
tôÀSåög
 = 
	`F‹m
("SignalÉfficiency vs. BackgroundÑejection");

1000 i‡(
this
->
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

1001 
tôÀSåög
 = 
	`F‹m
("%†(Cœss=%i)",ÅôÀSåög.
	`D©a
(), 
iCœss
);

1005 
mu…igøph
->
	`GëHi°ogøm
()->
	`SëTôÀ
–
tôÀSåög
 );

1006 
mu…igøph
->
	`SëTôÀ
–
tôÀSåög
 );

1008 
ˇnvas
->
	`BuûdLegíd
(0.15, 0.15, 0.35, 0.3, "MVA Method");

1011  
ˇnvas
;

1012 
	}
}

1017 
	gTMVA
::
Fa˘‹y
::
	$TøöAŒMëhods
()

1019 
	`Log
(Ë<< 
kHEADER
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "TøöáŒ mëhods" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1024 i‡(
fMëhodsM≠
.
	`em±y
()) {

1025 
	`Log
(Ë<< 
kINFO
 << "...nŸhög foundÅÿåaö" << 
Endl
;

1031 
	`Log
(Ë<< 
kDEBUG
 << "Traináll methods for "

1032 << (
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

1033 (
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛ass" : "Cœssifiˇti⁄"ËË<< " ..." << 
Endl
;

1035 
°d
::
m≠
<
TSåög
,
MVe˘‹
*>::
ôî©‹
 
ôrM≠
;

1037 
ôrM≠
 = 
fMëhodsM≠
.
	`begö
();ôrM≠ !fMëhodsM≠.
	`íd
();itrMap++)

1039 
MVe˘‹
 *
mëhods
=
ôrM≠
->
£c⁄d
;

1040 
MVe˘‹
::
ôî©‹
 
ôrMëhod
;

1043  
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++ ) {

1044 
Evít
::
	`SëIsTøöög
(
kTRUE
);

1045 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1047 if(
mva
==0) ;

1049 if(
mva
->
	`D©aInfo
().
	`GëD©aSëM™agî
()->
	`D©aI≈ut
().
	`GëE¡rõs
() <=1) {

1050 
	`Log
(Ë<< 
kFATAL
 << "Nÿöpuàd©®f‹ÅhêåaöögÖrovided!" << 
Endl
;

1053 if(
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 && 
mva
->
	`D©aInfo
().
	`GëNT¨gës
() < 1 )

1054 
	`Log
(Ë<< 
kFATAL
 << "You w™àtÿdÿªgªssi⁄Åøöög wôhouà•ecifyögáÅ¨gë." << 
Endl
;

1055 if–(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 || fA«lysisTy≥ =Ty≥s::
kCœssifiˇti⁄
)

1056 && 
mva
->
	`D©aInfo
().
	`GëNCœs£s
() < 2 )

1057 
	`Log
(Ë<< 
kFATAL
 << "You w™àtÿdÿ˛assifiˇti⁄Åøöög, buà•ecifõdÜes†th™Åwÿ˛as£s." << 
Endl
;

1060 if(!
	`IsSûítFûe
()Ë
	`WrôeD©aInf‹m©i⁄
(
mva
->
fD©aSëInfo
);

1063 i‡(
mva
->
	`D©a
()->
	`GëNTøöögEvíts
(Ë< 
MöNoTøöögEvíts
) {

1064 
	`Log
(Ë<< 
kWARNING
 << "Mëhod " << 
mva
->
	`GëMëhodName
()

1066 << 
mva
->
	`D©a
()->
	`GëNTøöögEvíts
()

1067 << "]Åh™Ñequúed [" << 
MöNoTøöögEvíts
 << "]" << 
Endl
;

1071 
	`Log
(Ë<< 
kHEADER
 << "Tøö mëhod: " << 
mva
->
	`GëMëhodName
() << " for "

1072 << (
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

1073 (
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛as†˛assifiˇti⁄" : "Cœssifiˇti⁄")Ë<< 
Endl
 << Endl;

1074 
mva
->
	`TøöMëhod
();

1075 
	`Log
(Ë<< 
kHEADER
 << "Tøöög föished" << 
Endl
 << Endl;

1078 i‡(
fA«lysisTy≥
 !
Ty≥s
::
kRegªssi⁄
) {

1082 
	`Log
(Ë<< 
kINFO
 << "R™kög i≈uàv¨übÀ†(mëhod s≥cific)..." << 
Endl
;

1083 
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++) {

1084 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1085 i‡(
mva
 && mva->
	`D©a
()->
	`GëNTøöögEvíts
(Ë>
MöNoTøöögEvíts
) {

1088 c⁄° 
R™kög
* 
ønkög
 = (*
ôrMëhod
)->
	`Cª©eR™kög
();

1089 i‡(
ønkög
 !0Ëønkög->
	`Pröt
();

1090 
	`Log
(Ë<< 
kINFO
 << "No variableÑanking supplied by classifier: "

1091 << 
dy«mic_ˇ°
<
MëhodBa£
*>(*
ôrMëhod
)->
	`GëMëhodName
(Ë<< 
Endl
;

1100 i‡(
fModñPîsi°í˚
) {

1102 
	`Log
(Ë<< 
kHEADER
 << "==De°royándÑe¸óãáŒ mëhod†vü weighàfûe†f‹Åe°ög ===" << 
Endl
 << Endl;

1104 if(!
	`IsSûítFûe
())
	`RoŸBa£Dú
()->
	`cd
();

1107 
UI¡_t
 
i
=0; i<
mëhods
->
	`size
(); i++) {

1109 
MëhodBa£
* 
m
 = 
dy«mic_ˇ°
<MëhodBa£*>((*
mëhods
)[
i
]);

1110 if(
m
==0) ;

1112 
TMVA
::
Ty≥s
::
EMVA
 
mëhodTy≥
 = 
m
->
	`GëMëhodTy≥
();

1113 
TSåög
 
weightfûe
 = 
m
->
	`GëWeightFûeName
();

1116 i‡(
READXML
Ë
weightfûe
.
	`Rïœ˚AŒ
(".txt",".xml");

1118 
D©aSëInfo
& 
d©aSëInfo
 = 
m
->
	`D©aInfo
();

1119 
TSåög
 
ã°v¨Name
 = 
m
->
	`GëTe°v¨Name
();

1120 
dñëe
 
m
;

1123 
m
 = 
dy«mic_ˇ°
<
MëhodBa£
*>–
CœssifõrFa˘‹y
::
	`In°™˚
()

1124 .
	`Cª©e
–
°d
::
	`°rög
(
Ty≥s
::
	`In°™˚
().
	`GëMëhodName
(
mëhodTy≥
)),

1125 
d©aSëInfo
, 
weightfûe
 ) );

1126 if–
m
->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
 ){

1127 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
m
));

1128 if–!
mëhC©
 ) 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Fa˘‹y" << 
Endl
;

1129 
mëhC©
->
fD©aSëM™agî
 = 
m
->
	`D©aInfo
().
	`GëD©aSëM™agî
();

1134 
TSåög
 
fFûeDú

m
->
	`D©aInfo
().
	`GëName
();

1135 
fFûeDú
+="/"+
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeDú
;

1136 
m
->
	`SëWeightFûeDú
(
fFûeDú
);

1137 
m
->
	`SëModñPîsi°í˚
(
fModñPîsi°í˚
);

1138 
m
->
	`SëSûítFûe
(
	`IsSûítFûe
());

1139 
m
->
	`SëA«lysisTy≥
(
fA«lysisTy≥
);

1140 
m
->
	`SëupMëhod
();

1141 
m
->
	`RódSèãFromFûe
();

1142 
m
->
	`SëTe°v¨Name
(
ã°v¨Name
);

1145 (*
mëhods
)[
i
] = 
m
;

1149 
	}
}

1153 
	gTMVA
::
Fa˘‹y
::
	$Te°AŒMëhods
()

1155 
	`Log
(Ë<< 
kHEADER
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "Te°áŒ mëhods" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1158 i‡(
fMëhodsM≠
.
	`em±y
()) {

1159 
	`Log
(Ë<< 
kINFO
 << "...nŸhög foundÅÿã°" << 
Endl
;

1162 
°d
::
m≠
<
TSåög
,
MVe˘‹
*>::
ôî©‹
 
ôrM≠
;

1164 
ôrM≠
 = 
fMëhodsM≠
.
	`begö
();ôrM≠ !fMëhodsM≠.
	`íd
();itrMap++)

1166 
MVe˘‹
 *
mëhods
=
ôrM≠
->
£c⁄d
;

1167 
MVe˘‹
::
ôî©‹
 
ôrMëhod
;

1170  
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++ ) {

1171 
Evít
::
	`SëIsTøöög
(
kFALSE
);

1172 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1173 if(
mva
==0) ;

1174 
Ty≥s
::
EA«lysisTy≥
 
™ÆysisTy≥
 = 
mva
->
	`GëA«lysisTy≥
();

1175 
	`Log
(Ë<< 
kHEADER
 << "Te° mëhod: " << 
mva
->
	`GëMëhodName
() << " for "

1176 << (
™ÆysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

1177 (
™ÆysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛as†˛assifiˇti⁄" : "Cœssifiˇti⁄")Ë<< "Öîf‹m™˚" << 
Endl
 << Endl;

1178 
mva
->
	`AddOuçut
–
Ty≥s
::
kTe°ög
, 
™ÆysisTy≥
 );

1181 
	}
}

1185 
	gTMVA
::
Fa˘‹y
::
	$MakeCœss
(c⁄° 
TSåög
& 
d©a£äame
 , c⁄° TSåög& 
mëhodTôÀ
 ) const

1187 i‡(
mëhodTôÀ
 != "") {

1188 
IMëhod
* 
mëhod
 = 
	`GëMëhod
(
d©a£äame
, 
mëhodTôÀ
);

1189 i‡(
mëhod
Ëmëhod->
	`MakeCœss
();

1191 
	`Log
(Ë<< 
kWARNING
 << "<MakeCœss> CouldÇŸ föd cœssifõ∏\"" << 
mëhodTôÀ


1192 << "\" i¿li°" << 
Endl
;

1198 
MVe˘‹
 *
mëhods
=
fMëhodsM≠
.
	`föd
(
d©a£äame
)->
£c⁄d
;

1199 
MVe˘‹
::
c⁄°_ôî©‹
 
ôrMëhod
;

1200 
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++) {

1201 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1202 if(
mëhod
==0) ;

1203 
	`Log
(Ë<< 
kINFO
 << "Makêª•⁄£ cœs†f‹ cœssifõr: " << 
mëhod
->
	`GëMëhodName
(Ë<< 
Endl
;

1204 
mëhod
->
	`MakeCœss
();

1207 
	}
}

1213 
	gTMVA
::
Fa˘‹y
::
	$PrötHñpMesßge
(c⁄° 
TSåög
& 
d©a£äame
 , c⁄° TSåög& 
mëhodTôÀ
 ) const

1215 i‡(
mëhodTôÀ
 != "") {

1216 
IMëhod
* 
mëhod
 = 
	`GëMëhod
(
d©a£äame
 , 
mëhodTôÀ
 );

1217 i‡(
mëhod
Ëmëhod->
	`PrötHñpMesßge
();

1219 
	`Log
(Ë<< 
kWARNING
 << "<PrötHñpMesßge> CouldÇŸ föd cœssifõ∏\"" << 
mëhodTôÀ


1220 << "\" i¿li°" << 
Endl
;

1226 
MVe˘‹
 *
mëhods
=
fMëhodsM≠
.
	`föd
(
d©a£äame
)->
£c⁄d
;

1227 
MVe˘‹
::
c⁄°_ôî©‹
 
ôrMëhod
 ;

1228 
ôrMëhod
 = 
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++) {

1229 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1230 if(
mëhod
==0) ;

1231 
	`Log
(Ë<< 
kINFO
 << "Pröàhñ∞mesßgêf‹ cœssifõr: " << 
mëhod
->
	`GëMëhodName
(Ë<< 
Endl
;

1232 
mëhod
->
	`PrötHñpMesßge
();

1235 
	}
}

1240 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eAŒV¨übÀs
(
D©aLﬂdî
 *
lﬂdî
, 
TSåög
 
›ti⁄s
 )

1242 
	`Log
(Ë<< 
kINFO
 << "EvÆu©ögáŒ v¨übÀs..." << 
Endl
;

1243 
Evít
::
	`SëIsTøöög
(
kFALSE
);

1245 
UI¡_t
 
i
=0; i<
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNV¨übÀs
(); i++) {

1246 
TSåög
 
s
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëV¨übÀInfo
(
i
).
	`GëLabñ
();

1247 i‡(
›ti⁄s
.
	`C⁄èös
("V")Ë
s
 += ":V";

1248 
this
->
	`BookMëhod
(
lﬂdî
, "V¨übÀ", 
s
 );

1250 
	}
}

1255 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eAŒMëhods
( )

1257 
	`Log
(Ë<< 
kHEADER
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "EvÆu©êÆ»mëhods" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1260 i‡(
fMëhodsM≠
.
	`em±y
()) {

1261 
	`Log
(Ë<< 
kINFO
 << "...nŸhög foundÅÿevÆu©e" << 
Endl
;

1264 
°d
::
m≠
<
TSåög
,
MVe˘‹
*>::
ôî©‹
 
ôrM≠
;

1266 
ôrM≠
 = 
fMëhodsM≠
.
	`begö
();ôrM≠ !fMëhodsM≠.
	`íd
();itrMap++)

1268 
MVe˘‹
 *
mëhods
=
ôrM≠
->
£c⁄d
;

1277 
I¡_t
 
i£l
;

1278 
I¡_t
 
nmëh_u£d
[2] = {0,0};

1280 
°d
::
ve˘‹
<°d::ve˘‹<
TSåög
> > 
	`m«me
(2);

1281 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`sig
(2), 
	`£p
(2), 
	`roc
(2);

1282 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`eff01
(2), 
	`eff10
(2), 
	`eff30
(2), 
	`effAªa
(2);

1283 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`eff01îr
(2), 
	`eff10îr
(2), 
	`eff30îr
(2);

1284 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`åaöEff01
(2), 
	`åaöEff10
(2), 
	`åaöEff30
(2);

1286 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
> > 
mu…i˛ass_ã°Eff
;

1287 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
> > 
mu…i˛ass_åaöEff
;

1288 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
> > 
mu…i˛ass_ã°Pur
;

1289 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
> > 
mu…i˛ass_åaöPur
;

1292 
°d
::
ve˘‹
<
TM©rixD
> 
mu…i˛ass_ã°C⁄fusi⁄EffB01
;

1293 
°d
::
ve˘‹
<
TM©rixD
> 
mu…i˛ass_ã°C⁄fusi⁄EffB10
;

1294 
°d
::
ve˘‹
<
TM©rixD
> 
mu…i˛ass_ã°C⁄fusi⁄EffB30
;

1296 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`bü°øö
(1);

1297 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`bü°e°
(1);

1298 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`devåaö
(1);

1299 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`devã°
(1);

1300 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rm°øö
(1);

1301 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rm°e°
(1);

1302 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`mö·øö
(1);

1303 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`mö·e°
(1);

1304 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rhŸøö
(1);

1305 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rhŸe°
(1);

1308 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`bü°øöT
(1);

1309 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`bü°e°T
(1);

1310 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`devåaöT
(1);

1311 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`devã°T
(1);

1312 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rm°øöT
(1);

1313 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`rm°e°T
(1);

1314 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`mö·øöT
(1);

1315 
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> > 
	`mö·e°T
(1);

1318 
MVe˘‹
 
mëhodsNoCuts
;

1320 
Boﬁ_t
 
doRegªssi⁄
 = 
kFALSE
;

1321 
Boﬁ_t
 
doMu…i˛ass
 = 
kFALSE
;

1324 
MVe˘‹
::
ôî©‹
 
ôrMëhod
 =
mëhods
->
	`begö
(); iåMëhod !mëhods->
	`íd
(); itrMethod++) {

1325 
Evít
::
	`SëIsTøöög
(
kFALSE
);

1326 
MëhodBa£
* 
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1327 if(
theMëhod
==0) ;

1328 
theMëhod
->
	`SëFûe
(
fgT¨gëFûe
);

1329 
theMëhod
->
	`SëSûítFûe
(
	`IsSûítFûe
());

1330 i‡(
theMëhod
->
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kCuts
Ë
mëhodsNoCuts
.
	`push_back
–*
ôrMëhod
 );

1332 i‡(
theMëhod
->
	`DoRegªssi⁄
()) {

1333 
doRegªssi⁄
 = 
kTRUE
;

1335 
	`Log
(Ë<< 
kINFO
 << "EvÆu©êªgªssi⁄ mëhod: " << 
theMëhod
->
	`GëMëhodName
(Ë<< 
Endl
;

1336 
DoubÀ_t
 
büs
, 
dev
, 
rms
, 
mInf
;

1337 
DoubÀ_t
 
büsT
, 
devT
, 
rmsT
, 
mInfT
;

1338 
DoubÀ_t
 
rho
;

1340 
theMëhod
->
	`Te°Regªssi⁄
–
büs
, 
büsT
, 
dev
, 
devT
, 
rms
, 
rmsT
, 
mInf
, 
mInfT
, 
rho
, 
TMVA
::
Ty≥s
::
kTe°ög
 );

1341 
bü°e°
[0] .
	`push_back
–
büs
 );

1342 
devã°
[0] .
	`push_back
–
dev
 );

1343 
rm°e°
[0] .
	`push_back
–
rms
 );

1344 
mö·e°
[0] .
	`push_back
–
mInf
 );

1345 
rhŸe°
[0] .
	`push_back
–
rho
 );

1346 
bü°e°T
[0] .
	`push_back
–
büsT
 );

1347 
devã°T
[0] .
	`push_back
–
devT
 );

1348 
rm°e°T
[0] .
	`push_back
–
rmsT
 );

1349 
mö·e°T
[0] .
	`push_back
–
mInfT
 );

1351 
theMëhod
->
	`Te°Regªssi⁄
–
büs
, 
büsT
, 
dev
, 
devT
, 
rms
, 
rmsT
, 
mInf
, 
mInfT
, 
rho
, 
TMVA
::
Ty≥s
::
kTøöög
 );

1352 
bü°øö
[0] .
	`push_back
–
büs
 );

1353 
devåaö
[0] .
	`push_back
–
dev
 );

1354 
rm°øö
[0] .
	`push_back
–
rms
 );

1355 
mö·øö
[0] .
	`push_back
–
mInf
 );

1356 
rhŸøö
[0] .
	`push_back
–
rho
 );

1357 
bü°øöT
[0].
	`push_back
–
büsT
 );

1358 
devåaöT
[0] .
	`push_back
–
devT
 );

1359 
rm°øöT
[0] .
	`push_back
–
rmsT
 );

1360 
mö·øöT
[0].
	`push_back
–
mInfT
 );

1362 
m«me
[0].
	`push_back
–
theMëhod
->
	`GëMëhodName
() );

1363 
nmëh_u£d
[0]++;

1364 if(!
	`IsSûítFûe
())

1366 
	`Log
(Ë<< 
kDEBUG
 << "\tWrôêevÆu©i⁄ hi°ogøm†tÿfûe" << 
Endl
;

1367 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTe°ög
);

1368 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTøöög
);

1370 } i‡(
theMëhod
->
	`DoMu…i˛ass
()) {

1374 
doMu…i˛ass
 = 
kTRUE
;

1375 
	`Log
(Ë<< 
kINFO
 << "EvÆu©êmu…i˛as†˛assifiˇti⁄ mëhod: " << 
theMëhod
->
	`GëMëhodName
(Ë<< 
Endl
;

1384 
mu…i˛ass_ã°C⁄fusi⁄EffB01
.
	`push_back
(
theMëhod
->
	`GëMu…i˛assC⁄fusi⁄M©rix
(0.01, 
Ty≥s
::
kTe°ög
));

1385 
mu…i˛ass_ã°C⁄fusi⁄EffB10
.
	`push_back
(
theMëhod
->
	`GëMu…i˛assC⁄fusi⁄M©rix
(0.10, 
Ty≥s
::
kTe°ög
));

1386 
mu…i˛ass_ã°C⁄fusi⁄EffB30
.
	`push_back
(
theMëhod
->
	`GëMu…i˛assC⁄fusi⁄M©rix
(0.30, 
Ty≥s
::
kTe°ög
));

1388 i‡(
nŸ
 
	`IsSûítFûe
()) {

1389 
	`Log
(Ë<< 
kDEBUG
 << "\tWrôêevÆu©i⁄ hi°ogøm†tÿfûe" << 
Endl
;

1390 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTe°ög
);

1391 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTøöög
);

1394 
nmëh_u£d
[0]++;

1395 
m«me
[0].
	`push_back
(
theMëhod
->
	`GëMëhodName
());

1398 
	`Log
(Ë<< 
kHEADER
 << "EvÆu©ê˛assifõr: " << 
theMëhod
->
	`GëMëhodName
(Ë<< 
Endl
 << Endl;

1399 
i£l
 = (
theMëhod
->
	`GëMëhodTy≥Name
().
	`C⁄èös
("Variable")) ? 1 : 0;

1402 
theMëhod
->
	`Te°Cœssifiˇti⁄
();

1405 
m«me
[
i£l
].
	`push_back
(
theMëhod
->
	`GëMëhodName
());

1406 
sig
[
i£l
].
	`push_back
(
theMëhod
->
	`GëSignifiˇn˚
());

1407 
£p
[
i£l
].
	`push_back
(
theMëhod
->
	`GëSï¨©i⁄
());

1408 
roc
[
i£l
].
	`push_back
(
theMëhod
->
	`GëROCI¡egøl
());

1410 
DoubÀ_t
 
îr
;

1411 
eff01
[
i£l
].
	`push_back
(
theMëhod
->
	`GëEfficõncy
("Efficõncy:0.01", 
Ty≥s
::
kTe°ög
, 
îr
));

1412 
eff01îr
[
i£l
].
	`push_back
(
îr
);

1413 
eff10
[
i£l
].
	`push_back
(
theMëhod
->
	`GëEfficõncy
("Efficõncy:0.10", 
Ty≥s
::
kTe°ög
, 
îr
));

1414 
eff10îr
[
i£l
].
	`push_back
(
îr
);

1415 
eff30
[
i£l
].
	`push_back
(
theMëhod
->
	`GëEfficõncy
("Efficõncy:0.30", 
Ty≥s
::
kTe°ög
, 
îr
));

1416 
eff30îr
[
i£l
].
	`push_back
(
îr
);

1417 
effAªa
[
i£l
].
	`push_back
(
theMëhod
->
	`GëEfficõncy
("", 
Ty≥s
::
kTe°ög
, 
îr
));

1419 
åaöEff01
[
i£l
].
	`push_back
(
theMëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.01"));

1420 
åaöEff10
[
i£l
].
	`push_back
(
theMëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.10"));

1421 
åaöEff30
[
i£l
].
	`push_back
(
theMëhod
->
	`GëTøöögEfficõncy
("Efficiency:0.30"));

1423 
nmëh_u£d
[
i£l
]++;

1425 i‡(!
	`IsSûítFûe
()) {

1426 
	`Log
(Ë<< 
kDEBUG
 << "\tWrôêevÆu©i⁄ hi°ogøm†tÿfûe" << 
Endl
;

1427 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTe°ög
);

1428 
theMëhod
->
	`WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
kTøöög
);

1432 i‡(
doRegªssi⁄
) {

1434 
°d
::
ve˘‹
<
TSåög
> 
vãmps
 = 
m«me
[0];

1435 
°d
::
ve˘‹
< std::ve˘‹<
DoubÀ_t
> > 
vtmp
;

1436 
vtmp
.
	`push_back
–
devã°
[0] );

1437 
vtmp
.
	`push_back
–
devåaö
[0] );

1438 
vtmp
.
	`push_back
–
bü°e°
[0] );

1439 
vtmp
.
	`push_back
–
bü°øö
[0] );

1440 
vtmp
.
	`push_back
–
rm°e°
[0] );

1441 
vtmp
.
	`push_back
–
rm°øö
[0] );

1442 
vtmp
.
	`push_back
–
mö·e°
[0] );

1443 
vtmp
.
	`push_back
–
mö·øö
[0] );

1444 
vtmp
.
	`push_back
–
rhŸe°
[0] );

1445 
vtmp
.
	`push_back
–
rhŸøö
[0] );

1446 
vtmp
.
	`push_back
–
devã°T
[0] );

1447 
vtmp
.
	`push_back
–
devåaöT
[0] );

1448 
vtmp
.
	`push_back
–
bü°e°T
[0] );

1449 
vtmp
.
	`push_back
–
bü°øöT
[0]);

1450 
vtmp
.
	`push_back
–
rm°e°T
[0] );

1451 
vtmp
.
	`push_back
–
rm°øöT
[0] );

1452 
vtmp
.
	`push_back
–
mö·e°T
[0] );

1453 
vtmp
.
	`push_back
–
mö·øöT
[0]);

1454 
	`gToﬁs
().
	`U£fulS‹tAs˚ndög
–
vtmp
, &
vãmps
 );

1455 
m«me
[0] = 
vãmps
;

1456 
devã°
[0] = 
vtmp
[0];

1457 
devåaö
[0] = 
vtmp
[1];

1458 
bü°e°
[0] = 
vtmp
[2];

1459 
bü°øö
[0] = 
vtmp
[3];

1460 
rm°e°
[0] = 
vtmp
[4];

1461 
rm°øö
[0] = 
vtmp
[5];

1462 
mö·e°
[0] = 
vtmp
[6];

1463 
mö·øö
[0] = 
vtmp
[7];

1464 
rhŸe°
[0] = 
vtmp
[8];

1465 
rhŸøö
[0] = 
vtmp
[9];

1466 
devã°T
[0] = 
vtmp
[10];

1467 
devåaöT
[0] = 
vtmp
[11];

1468 
bü°e°T
[0] = 
vtmp
[12];

1469 
bü°øöT
[0] = 
vtmp
[13];

1470 
rm°e°T
[0] = 
vtmp
[14];

1471 
rm°øöT
[0] = 
vtmp
[15];

1472 
mö·e°T
[0] = 
vtmp
[16];

1473 
mö·øöT
[0] = 
vtmp
[17];

1474 } i‡(
doMu…i˛ass
) {

1482 
I¡_t
 
k
=0; k<2; k++) {

1483 
°d
::
ve˘‹
< std::ve˘‹<
DoubÀ_t
> > 
vãmp
;

1484 
vãmp
.
	`push_back
–
effAªa
[
k
] );

1485 
vãmp
.
	`push_back
–
eff10
[
k
] );

1486 
vãmp
.
	`push_back
–
eff01
[
k
] );

1487 
vãmp
.
	`push_back
–
eff30
[
k
] );

1488 
vãmp
.
	`push_back
–
eff10îr
[
k
] );

1489 
vãmp
.
	`push_back
–
eff01îr
[
k
] );

1490 
vãmp
.
	`push_back
–
eff30îr
[
k
] );

1491 
vãmp
.
	`push_back
–
åaöEff10
[
k
] );

1492 
vãmp
.
	`push_back
–
åaöEff01
[
k
] );

1493 
vãmp
.
	`push_back
–
åaöEff30
[
k
] );

1494 
vãmp
.
	`push_back
–
sig
[
k
] );

1495 
vãmp
.
	`push_back
–
£p
[
k
] );

1496 
vãmp
.
	`push_back
–
roc
[
k
] );

1497 
°d
::
ve˘‹
<
TSåög
> 
vãmps
 = 
m«me
[
k
];

1498 
	`gToﬁs
().
	`U£fulS‹tDes˚ndög
–
vãmp
, &
vãmps
 );

1499 
effAªa
[
k
] = 
vãmp
[0];

1500 
eff10
[
k
] = 
vãmp
[1];

1501 
eff01
[
k
] = 
vãmp
[2];

1502 
eff30
[
k
] = 
vãmp
[3];

1503 
eff10îr
[
k
] = 
vãmp
[4];

1504 
eff01îr
[
k
] = 
vãmp
[5];

1505 
eff30îr
[
k
] = 
vãmp
[6];

1506 
åaöEff10
[
k
] = 
vãmp
[7];

1507 
åaöEff01
[
k
] = 
vãmp
[8];

1508 
åaöEff30
[
k
] = 
vãmp
[9];

1509 
sig
[
k
] = 
vãmp
[10];

1510 
£p
[
k
] = 
vãmp
[11];

1511 
roc
[
k
] = 
vãmp
[12];

1512 
m«me
[
k
] = 
vãmps
;

1522 if(
fC‹ªœti⁄s
)

1524 c⁄° 
I¡_t
 
nmëh
 = 
mëhodsNoCuts
.
	`size
();

1525 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
mëhods
[0][0]);

1526 c⁄° 
I¡_t
 
nv¨
 = 
mëhod
->
fD©aSëInfo
.
	`GëNV¨übÀs
();

1527 i‡(!
doRegªssi⁄
 && !
doMu…i˛ass
 ) {

1529 i‡(
nmëh
 > 0) {

1532 
DoubÀ_t
 *
dvec
 = 
√w
 DoubÀ_t[
nmëh
+
nv¨
];

1533 
°d
::
ve˘‹
<
DoubÀ_t
> 
rvec
;

1536 
TPröcùÆ
* 
çSig
 = 
√w
 
	`TPröcùÆ
–
nmëh
+
nv¨
, "" );

1537 
TPröcùÆ
* 
çBkg
 = 
√w
 
	`TPröcùÆ
–
nmëh
+
nv¨
, "" );

1540 
I¡_t
 
iv¨
 = 0;

1541 
°d
::
ve˘‹
<
TSåög
>* 
theV¨s
 = 
√w
 std::vector<TString>;

1542 
°d
::
ve˘‹
<
Resu…sCœssifiˇti⁄
*> 
mvaRes
;

1543 
MVe˘‹
::
ôî©‹
 
ôrMëhod
 = 
mëhodsNoCuts
.
	`begö
(); iåMëhod !mëhodsNoCuts.
	`íd
(); iåMëhod++, 
iv¨
++) {

1544 
MëhodBa£
* 
m
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

1545 if(
m
==0) ;

1546 
theV¨s
->
	`push_back
–
m
->
	`GëTe°v¨Name
() );

1547 
rvec
.
	`push_back
–
m
->
	`GëSig«lRe„ªn˚Cut
() );

1548 
theV¨s
->
	`back
().
	`Rïœ˚AŒ
( "MVA_", "" );

1549 
mvaRes
.
	`push_back
–
dy«mic_ˇ°
<
Resu…sCœssifiˇti⁄
*>–
m
->
	`D©a
()->
	`GëResu…s
–m->
	`GëMëhodName
(),

1550 
Ty≥s
::
kTe°ög
,

1551 
Ty≥s
::
kMaxA«lysisTy≥
) ) );

1555 
TM©rixD
* 
ovîœpS
 = 
√w
 
	`TM©rixD
–
nmëh
,Çmeth );

1556 
TM©rixD
* 
ovîœpB
 = 
√w
 
	`TM©rixD
–
nmëh
,Çmeth );

1557 (*
ovîœpS
) *= 0;

1558 (*
ovîœpB
) *= 0;

1561 
D©aSë
* 
defDs
 = 
mëhod
->
fD©aSëInfo
.
	`GëD©aSë
();

1562 
defDs
->
	`SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

1563 
I¡_t
 
õvt
=0; ievt<
defDs
->
	`GëNEvíts
(); ievt++) {

1564 c⁄° 
Evít
* 
ev
 = 
defDs
->
	`GëEvít
(
õvt
);

1567 
TM©rixD
* 
theM©
 = 0;

1568 
I¡_t
 
im
=0; im<
nmëh
; im++) {

1570 
DoubÀ_t
 
ªtvÆ
 = (DoubÀ_t)(*
mvaRes
[
im
])[
õvt
][0];

1571 i‡(
TM©h
::
	`IsNaN
(
ªtvÆ
)) {

1572 
	`Log
(Ë<< 
kWARNING
 << "Found NaNÑëu∫ vÆuêöÉvít: " << 
õvt


1573 << " f‹ mëhod \"" << 
mëhodsNoCuts
[
im
]->
	`GëName
(Ë<< "\"" << 
Endl
;

1574 
dvec
[
im
] = 0;

1576 
dvec
[
im
] = 
ªtvÆ
;

1578 
I¡_t
 
iv
=0; iv<
nv¨
; iv++Ë
dvec
[iv+
nmëh
] = (
DoubÀ_t
)
ev
->
	`GëVÆue
(iv);

1579 i‡(
mëhod
->
fD©aSëInfo
.
	`IsSig«l
(
ev
)Ë{ 
çSig
->
	`AddRow
–
dvec
 ); 
theM©
 = 
ovîœpS
; }

1580 { 
çBkg
->
	`AddRow
–
dvec
 ); 
theM©
 = 
ovîœpB
; }

1583 
I¡_t
 
im
=0; im<
nmëh
; im++) {

1584 
I¡_t
 
jm
=
im
; jm<
nmëh
; jm++) {

1585 i‡((
dvec
[
im
] - 
rvec
[im])*(dvec[
jm
] -Ñvec[jm]) > 0) {

1586 (*
theM©
)(
im
,
jm
)++;

1587 i‡(
im
 !
jm
Ë(*
theM©
)(jm,im)++;

1594 (*
ovîœpS
Ë*(1.0/
defDs
->
	`GëNEvtSigTe°
());

1595 (*
ovîœpB
Ë*(1.0/
defDs
->
	`GëNEvtBkgdTe°
());

1597 
çSig
->
	`MakePröcùÆs
();

1598 
çBkg
->
	`MakePröcùÆs
();

1600 c⁄° 
TM©rixD
* 
covM©S
 = 
çSig
->
	`GëCov¨ün˚M©rix
();

1601 c⁄° 
TM©rixD
* 
covM©B
 = 
çBkg
->
	`GëCov¨ün˚M©rix
();

1603 c⁄° 
TM©rixD
* 
c‹rM©S
 = 
	`gToﬁs
().
	`GëC‹ªœti⁄M©rix
–
covM©S
 );

1604 c⁄° 
TM©rixD
* 
c‹rM©B
 = 
	`gToﬁs
().
	`GëC‹ªœti⁄M©rix
–
covM©B
 );

1607 i‡(
c‹rM©S
 !0 && 
c‹rM©B
 != 0) {

1610 
TM©rixD
 
	`mvaM©S
(
nmëh
,nmeth);

1611 
TM©rixD
 
	`mvaM©B
(
nmëh
,nmeth);

1612 
I¡_t
 
im
=0; im<
nmëh
; im++) {

1613 
I¡_t
 
jm
=0; jm<
nmëh
; jm++) {

1614 
	`mvaM©S
(
im
,
jm
Ë(*
c‹rM©S
)(im,jm);

1615 
	`mvaM©B
(
im
,
jm
Ë(*
c‹rM©B
)(im,jm);

1620 
°d
::
ve˘‹
<
TSåög
> 
theI≈utV¨s
;

1621 
TM©rixD
 
	`v¨mvaM©S
(
nv¨
,
nmëh
);

1622 
TM©rixD
 
	`v¨mvaM©B
(
nv¨
,
nmëh
);

1623 
I¡_t
 
iv
=0; iv<
nv¨
; iv++) {

1624 
theI≈utV¨s
.
	`push_back
–
mëhod
->
fD©aSëInfo
.
	`GëV¨übÀInfo
–
iv
 ).
	`GëLabñ
() );

1625 
I¡_t
 
jm
=0; jm<
nmëh
; jm++) {

1626 
	`v¨mvaM©S
(
iv
,
jm
Ë(*
c‹rM©S
)(
nmëh
+iv,jm);

1627 
	`v¨mvaM©B
(
iv
,
jm
Ë(*
c‹rM©B
)(
nmëh
+iv,jm);

1631 i‡(
nmëh
 > 1) {

1632 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1633 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "I¡î-MVA c‹ªœti⁄ m©rix (sig«l):" << 
Endl
;

1634 
	`gToﬁs
().
	`F‹m©ãdOuçut
–
mvaM©S
, *
theV¨s
, 
	`Log
() );

1635 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1637 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "I¡î-MVA c‹ªœti⁄ m©rix (background):" << 
Endl
;

1638 
	`gToﬁs
().
	`F‹m©ãdOuçut
–
mvaM©B
, *
theV¨s
, 
	`Log
() );

1639 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1642 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "C‹ªœti⁄†bëwì¿öpuàv¨übÀ†™d MVAÑe•⁄£ (sig«l):" << 
Endl
;

1643 
	`gToﬁs
().
	`F‹m©ãdOuçut
–
v¨mvaM©S
, 
theI≈utV¨s
, *
theV¨s
, 
	`Log
() );

1644 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1646 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "C‹ªœti⁄†bëwì¿öpuàv¨übÀ†™d MVAÑe•⁄£ (background):" << 
Endl
;

1647 
	`gToﬁs
().
	`F‹m©ãdOuçut
–
v¨mvaM©B
, 
theI≈utV¨s
, *
theV¨s
, 
	`Log
() );

1648 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1650 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "<Te°AŒMëhods> c™nŸ compuã c‹ªœti⁄ m©ri˚s" << 
Endl
;

1653 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "Thêfﬁlowög \"ovîœp\" m©ri˚†c⁄èöÅhê‰a˘i⁄ o‡evít†f‹ which " << 
Endl
;

1654 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "thêMVA†'i'ánd 'j' havêªtu∫ed c⁄f‹mánswî†abouà\"sig«l-likíess\"" << 
Endl
;

1655 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "A¿evíài†sig«l-like, i‡ô†MVA ouçuàex˚ed†thêfﬁlowög vÆue:" << 
Endl
;

1656 
	`gToﬁs
().
	`F‹m©ãdOuçut
–
rvec
, *
theV¨s
, "Mëhod" , "CuàvÆue", 
	`Log
() );

1657 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "which c‹ª•⁄dÅÿthêw‹kögÖoöt:Éff(sig«lË1 -Éff(background)" << 
Endl
;

1660 i‡(
nmëh
 !(
I¡_t
)
mëhods
->
	`size
())

1661 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "NŸe:Çÿc‹ªœti⁄†™d ovîœ∞wôh cuàmëhodáªÖrovidedáà¥e£¡" << 
Endl
;

1663 i‡(
nmëh
 > 1) {

1664 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1665 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "I¡î-MVA ovîœ∞m©rix (sig«l):" << 
Endl
;

1666 
	`gToﬁs
().
	`F‹m©ãdOuçut
–*
ovîœpS
, *
theV¨s
, 
	`Log
() );

1667 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1669 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
mëhod
->
fD©aSëInfo
.
	`GëName
())<< "I¡î-MVA ovîœ∞m©rix (background):" << 
Endl
;

1670 
	`gToﬁs
().
	`F‹m©ãdOuçut
–*
ovîœpB
, *
theV¨s
, 
	`Log
() );

1674 
dñëe
 
çSig
;

1675 
dñëe
 
çBkg
;

1676 
dñëe
 
c‹rM©S
;

1677 
dñëe
 
c‹rM©B
;

1678 
dñëe
 
theV¨s
;

1679 
dñëe
 
ovîœpS
;

1680 
dñëe
 
ovîœpB
;

1681 
dñëe
 [] 
dvec
;

1690 i‡(
doRegªssi⁄
) {

1692 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1693 
TSåög
 
hLöe
 = "--------------------------------------------------------------------------------------------------";

1694 
	`Log
(Ë<< 
kINFO
 << "EvÆu©i⁄Ñesu…†ønked by smÆÀ° RMS o¿ã° sam∂e:" << 
Endl
;

1695 
	`Log
(Ë<< 
kINFO
 << "(\"Büs\" quŸe†thêmó¿devüti⁄ o‡thêªgªssi⁄ fromÅruêèrgë." << 
Endl
;

1696 
	`Log
(Ë<< 
kINFO
 << " \"MutInf\" i†thê\"MutuÆ Inf‹m©i⁄\" bëwì¿ªgªssi⁄ándÅ¨gë." << 
Endl
;

1697 
	`Log
(Ë<< 
kINFO
 << " Indiˇãd by \"_T\"áªÅhêc‹ª•⁄dög \"åunˇãd\" qu™tôõ†ob-" << 
Endl
;

1698 
	`Log
(Ë<< 
kINFO
 << "Åaöed whíÑemovögÉvít†devütög m‹êth™ 2sigm®‰omávîage.)" << 
Endl
;

1699 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1701 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1703 
I¡_t
 
i
=0; i<
nmëh_u£d
[0]; i++) {

1704 
MëhodBa£
* 
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>((*
mëhods
)[
i
]);

1705 if(
theMëhod
==0) ;

1707 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%-20s %-15s:%#9.3g%#9.3g%#9.3g%#9.3g | %#5.3f %#5.3f",

1708 
theMëhod
->
fD©aSëInfo
.
	`GëName
(),

1709 (c⁄° *)
m«me
[0][
i
],

1710 
bü°e°
[0][
i
], 
bü°e°T
[0][i],

1711 
rm°e°
[0][
i
], 
rm°e°T
[0][i],

1712 
mö·e°
[0][
i
], 
mö·e°T
[0][i] )

1713 << 
Endl
;

1715 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1716 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1717 
	`Log
(Ë<< 
kINFO
 << "EvÆu©i⁄Ñesu…†ønked by smÆÀ° RMS o¿åaöög sam∂e:" << 
Endl
;

1718 
	`Log
(Ë<< 
kINFO
 << "(ovîåaöög check)" << 
Endl
;

1719 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1720 
	`Log
(Ë<< 
kINFO
 << "D©aSë Name: MVA Mëhod: <Büs> <Büs_T> RMS RMS_T | MutIn‡MutInf_T" << 
Endl
;

1721 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1723 
I¡_t
 
i
=0; i<
nmëh_u£d
[0]; i++) {

1724 
MëhodBa£
* 
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>((*
mëhods
)[
i
]);

1725 if(
theMëhod
==0) ;

1726 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%-20s %-15s:%#9.3g%#9.3g%#9.3g%#9.3g | %#5.3f %#5.3f",

1727 
theMëhod
->
fD©aSëInfo
.
	`GëName
(),

1728 (c⁄° *)
m«me
[0][
i
],

1729 
bü°øö
[0][
i
], 
bü°øöT
[0][i],

1730 
rm°øö
[0][
i
], 
rm°øöT
[0][i],

1731 
mö·øö
[0][
i
], 
mö·øöT
[0][i] )

1732 << 
Endl
;

1734 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1735 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1736 } i‡(
doMu…i˛ass
) {

1741 
TSåög
 
hLöe
 =

1781 
TSåög
 
hódî1
 =

1782 
	`F‹m
("%-15s%-15s%-10s%-10s%-10s%-10s", "Dataset", "MVA Method", "", "SigÉff", "SigÉff", "SigÉff");

1783 
TSåög
 
hódî2
 =

1784 
	`F‹m
("%-15s%-15s%-10s%-10s%-10s%-10s", "Name:", "/ Class:", "ROC AUC", "@B=0.01", "@B=0.10", "@B=0.30");

1785 
	`Log
(Ë<< 
kINFO
 << "1-vs-ª°Öîf‹m™˚ mëric†≥∏˛ass" << 
Endl
;

1786 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1787 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1788 
	`Log
(Ë<< 
kINFO
 << "C⁄sidî†thêli°ed cœs†a†sig«»™dÅhêŸhî cœs£s" << 
Endl
;

1789 
	`Log
(Ë<< 
kINFO
 << "a†background,Ñï‹tögÅhêªsu…ög bö¨yÖîf‹m™˚." << 
Endl
;

1791 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1792 
	`Log
(Ë<< 
kINFO
 << 
hódî1
 << 
Endl
;

1793 
	`Log
(Ë<< 
kINFO
 << 
hódî2
 << 
Endl
;

1794 
I¡_t
 
k
 = 0; k < 2; k++) {

1795 
I¡_t
 
i
 = 0; i < 
nmëh_u£d
[
k
]; i++) {

1796 i‡(
k
 == 1) {

1797 
m«me
[
k
][
i
].
	`Rïœ˚AŒ
("Variable_", "");

1800 c⁄° 
TSåög
 
d©a£tName
 = 
ôrM≠
->
fú°
;

1801 c⁄° 
TSåög
 
mvaName
 = 
m«me
[
k
][
i
];

1803 
MëhodBa£
 *
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£ *>(
	`GëMëhod
(
d©a£tName
, 
mvaName
));

1804 i‡(
theMëhod
 == 0) {

1808 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1809 
TSåög
 
row
 = 
	`F‹m
("%-15s%-15s", 
d©a£tName
.
	`D©a
(), 
mvaName
.Data());

1810 
	`Log
(Ë<< 
kINFO
 << 
row
 << 
Endl
;

1812 
UI¡_t
 
numCœs£s
 = 
theMëhod
->
fD©aSëInfo
.
	`GëNCœs£s
();

1813 
D©aSë
 *
d©a£t
 = 
theMëhod
->
	`D©a
();

1814 
TMVA
::
Resu…s
 *
ªsu…s
 = 
theMëhod
->
	`D©a
()->
	`GëResu…s
(
m«me
[
k
][
i
], 
Ty≥s
::
kTe°ög
, Ty≥s::
kMu…i˛ass
);

1816 
UI¡_t
 
iCœss
 = 0; iCœs†< 
numCœs£s
; ++iClass) {

1817 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaRes
;

1818 
°d
::
ve˘‹
<
Boﬁ_t
> 
mvaResTy≥
;

1819 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaResWeight
;

1821 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
>> *
øwMvaRes
 =

1822 
dy«mic_ˇ°
<
Resu…sMu…i˛ass
 *>(
ªsu…s
)->
	`GëVÆueVe˘‹
();

1827 
mvaRes
.
	`ª£rve
(
øwMvaRes
->
	`size
());

1828 autÿ
ôem
 : *
øwMvaRes
) {

1829 
mvaRes
.
	`push_back
(
ôem
[
iCœss
]);

1832 autÿ
evítCﬁÀ˘i⁄
 = 
d©a£t
->
	`GëEvítCﬁÀ˘i⁄
();

1833 
mvaResTy≥
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

1834 
mvaResWeight
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

1835 autÿ
ev
 : 
evítCﬁÀ˘i⁄
) {

1836 
mvaResTy≥
.
	`push_back
(
ev
->
	`GëCœss
(Ë=
iCœss
);

1837 
mvaResWeight
.
	`push_back
(
ev
->
	`GëWeight
());

1840 
ROCCurve
 
rocCurve
 = 
	`ROCCurve
(
mvaRes
, 
mvaResTy≥
, 
mvaResWeight
);

1842 c⁄° 
TSåög
 
˛assName
 = 
theMëhod
->
	`D©aInfo
().
	`GëCœssInfo
(
iCœss
)->
	`GëName
();

1843 c⁄° 
DoubÀ_t
 
roˇuc
 = 
rocCurve
.
	`GëROCI¡egøl
();

1844 c⁄° 
DoubÀ_t
 
effB01
 = 
rocCurve
.
	`GëEffSF‹EffB
(0.01);

1845 c⁄° 
DoubÀ_t
 
effB10
 = 
rocCurve
.
	`GëEffSF‹EffB
(0.10);

1846 c⁄° 
DoubÀ_t
 
effB30
 = 
rocCurve
.
	`GëEffSF‹EffB
(0.30);

1847 
row
 = 
	`F‹m
("%-15s%-15s%-10.3f%-10.3f%-10.3f%-10.3f", "", 
˛assName
.
	`D©a
(), 
roˇuc
, 
effB01
, 
effB10
,

1848 
effB30
);

1849 
	`Log
(Ë<< 
kINFO
 << 
row
 << 
Endl
;

1853 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1854 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1858 autÿ
¥ötM©rix
 = [](
TM©rixD
 
m©
, 
°d
::
ve˘‹
<
TSåög
> 
˛as¢ames
, 
UI¡_t
 
numCœs£s
, 
MsgLoggî
 &
°ªam
) {

1862 
TSåög
 
hódî
 = 
	`F‹m
("%-12s", " ");

1863 
UI¡_t
 
iCﬁ
 = 0; iCﬁ < 
numCœs£s
; ++iCol) {

1864 
hódî
 +
	`F‹m
(" %-12s", 
˛as¢ames
[
iCﬁ
].
	`D©a
());

1866 
°ªam
 << 
kINFO
 << 
hódî
 << 
Endl
;

1868 
UI¡_t
 
iRow
 = 0; iRow < 
numCœs£s
; ++iRow) {

1869 
°ªam
 << 
kINFO
 << 
	`F‹m
("%-12s", 
˛as¢ames
[
iRow
].
	`D©a
());

1871 
UI¡_t
 
iCﬁ
 = 0; iCﬁ < 
numCœs£s
; ++iCol) {

1872 i‡(
iCﬁ
 =
iRow
) {

1873 
°ªam
 << 
kINFO
 << 
	`F‹m
(" %-12s", "-");

1877 
DoubÀ_t
 
vÆue
 = 
m©
[
iRow
][
iCﬁ
];

1878 
°ªam
 << 
kINFO
 << 
	`F‹m
(" %-12.3f", 
vÆue
);

1880 
°ªam
 << 
kINFO
 << 
Endl
;

1884 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1885 
	`Log
(Ë<< 
kINFO
 << "C⁄fusi⁄ m©ri˚†f‹áŒ mëhods" << 
Endl
;

1886 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1887 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1888 
	`Log
(Ë<< 
kINFO
 << "D€†®bö¨y com∑ris⁄ bëwì¿thêtwÿ˛as£†giví byá " << 
Endl
;

1889 
	`Log
(Ë<< 
kINFO
 << "∑πicuœ∏row-cﬁum¿combö©i⁄. I¿óch ca£,Åhê˛as†" << 
Endl
;

1890 
	`Log
(Ë<< 
kINFO
 << "giví byÅhêrow i†c⁄sidîed sig«»whûêthê˛as†giví " << 
Endl
;

1891 
	`Log
(Ë<< 
kINFO
 << "byÅhêcﬁum¿ödex i†c⁄sidîed background." << 
Endl
;

1892 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1893 
UI¡_t
 
iMëhod
 = 0; iMëhod < 
mëhods
->
	`size
(); ++iMethod) {

1894 
MëhodBa£
 *
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£ *>(
mëhods
->
	`©
(
iMëhod
));

1895 i‡(
theMëhod
 =
nuŒ±r
) {

1898 
UI¡_t
 
numCœs£s
 = 
theMëhod
->
fD©aSëInfo
.
	`GëNCœs£s
();

1900 
°d
::
ve˘‹
<
TSåög
> 
˛as¢ames
;

1901 
UI¡_t
 
iCls
 = 0; iCl†< 
numCœs£s
; ++iCls) {

1902 
˛as¢ames
.
	`push_back
(
theMëhod
->
fD©aSëInfo
.
	`GëCœssInfo
(
iCls
)->
	`GëName
());

1904 
	`Log
(Ë<< 
kINFO
 << "Showög c⁄fusi⁄ m©rix f‹ mëhod : " << 
	`F‹m
("%-15s", (c⁄° *)
m«me
[0][
iMëhod
])

1905 << 
Endl
;

1906 
	`Log
(Ë<< 
kINFO
 << "(Sig«»Efficõncy f‹ Background Efficõncy 0.01%)" << 
Endl
;

1907 
	`¥ötM©rix
(
mu…i˛ass_ã°C⁄fusi⁄EffB01
[
iMëhod
], 
˛as¢ames
, 
numCœs£s
, 
	`Log
());

1908 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1910 
	`Log
(Ë<< 
kINFO
 << "(Sig«»Efficõncy f‹ Background Efficõncy 0.10%)" << 
Endl
;

1911 
	`¥ötM©rix
(
mu…i˛ass_ã°C⁄fusi⁄EffB10
[
iMëhod
], 
˛as¢ames
, 
numCœs£s
, 
	`Log
());

1912 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1914 
	`Log
(Ë<< 
kINFO
 << "(Sig«»Efficõncy f‹ Background Efficõncy 0.30%)" << 
Endl
;

1915 
	`¥ötM©rix
(
mu…i˛ass_ã°C⁄fusi⁄EffB30
[
iMëhod
], 
˛as¢ames
, 
numCœs£s
, 
	`Log
());

1916 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1918 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1919 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1923 i‡(
fROC
) {

1924 
	`Log
().
	`E«bÀOuçut
();

1925 
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

1926 
	`Log
(Ë<< 
Endl
;

1927 
TSåög
 
hLöe
 = "------------------------------------------------------------------------------------------"

1929 
	`Log
(Ë<< 
kINFO
 << "EvÆu©i⁄Ñesu…†ønked by be° sig«»efficõncyándÖurôy (¨ó)" << 
Endl
;

1930 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1931 
	`Log
(Ë<< 
kINFO
 << "D©aSë MVA " << 
Endl
;

1932 
	`Log
(Ë<< 
kINFO
 << "Name: Mëhod: ROC-öãg" << 
Endl
;

1937 
	`Log
(Ë<< 
kDEBUG
 << 
hLöe
 << 
Endl
;

1938 
I¡_t
 
k
 = 0; k < 2; k++) {

1939 i‡(
k
 =1 && 
nmëh_u£d
[k] > 0) {

1940 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1941 
	`Log
(Ë<< 
kINFO
 << "I≈uàV¨übÀs: " << 
Endl
 << 
hLöe
 << Endl;

1943 
I¡_t
 
i
 = 0; i < 
nmëh_u£d
[
k
]; i++) {

1944 
TSåög
 
d©a£tName
 = 
ôrM≠
->
fú°
;

1945 
TSåög
 
mëhodName
 = 
m«me
[
k
][
i
];

1947 i‡(
k
 == 1) {

1948 
mëhodName
.
	`Rïœ˚AŒ
("Variable_", "");

1951 
MëhodBa£
 *
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£ *>(
	`GëMëhod
(
d©a£tName
, 
mëhodName
));

1952 i‡(
theMëhod
 == 0) {

1956 
TMVA
::
D©aSë
 *
d©a£t
 = 
theMëhod
->
	`D©a
();

1957 
TMVA
::
Resu…s
 *
ªsu…s
 = 
d©a£t
->
	`GëResu…s
(
mëhodName
, 
Ty≥s
::
kTe°ög
, 
this
->
fA«lysisTy≥
);

1958 
°d
::
ve˘‹
<
Boﬁ_t
> *
mvaResTy≥
 =

1959 
dy«mic_ˇ°
<
Resu…sCœssifiˇti⁄
 *>(
ªsu…s
)->
	`GëVÆueVe˘‹Ty≥s
();

1961 
DoubÀ_t
 
rocI¡egøl
 = 0.0;

1962 i‡(
mvaResTy≥
->
	`size
() != 0) {

1963 
rocI¡egøl
 = 
	`GëROCI¡egøl
(
d©a£tName
, 
mëhodName
);

1966 i‡(
£p
[
k
][
i
] < 0 || 
sig
[k][i] < 0) {

1968 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%-13†%-15s: %#1.3f", 
d©a£tName
.
	`D©a
(), 
mëhodName
.D©a(), 
effAªa
[
k
][
i
])

1969 << 
Endl
;

1980 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%-13†%-15s: %#1.3f", 
d©a£tName
.
	`D©a
(), 
mëhodName
.D©a(), 
rocI¡egøl
)

1981 << 
Endl
;

1994 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1995 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

1996 
	`Log
(Ë<< 
kINFO
 << "Te°ögÉfficõncy com∑ªdÅÿåaöögÉfficõncy (ovîåaöög check)" << 
Endl
;

1997 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

1998 
	`Log
(Ë<< 
kINFO


2000 << 
Endl
;

2001 
	`Log
(Ë<< 
kINFO
 << "Name: Method: @B=0.01 @B=0.10 @B=0.30 "

2002 << 
Endl
;

2003 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

2004 
I¡_t
 
k
 = 0; k < 2; k++) {

2005 i‡(
k
 =1 && 
nmëh_u£d
[k] > 0) {

2006 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

2007 
	`Log
(Ë<< 
kINFO
 << "I≈uàV¨übÀs: " << 
Endl
 << 
hLöe
 << Endl;

2009 
I¡_t
 
i
 = 0; i < 
nmëh_u£d
[
k
]; i++) {

2010 i‡(
k
 =1Ë
m«me
[k][
i
].
	`Rïœ˚AŒ
("Variable_", "");

2011 
MëhodBa£
 *
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£ *>((*
mëhods
)[
i
]);

2012 i‡(
theMëhod
 == 0) ;

2014 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%-20s %-15s: %#1.3f (%#1.3f) %#1.3f (%#1.3f) %#1.3f (%#1.3f)",

2015 
theMëhod
->
fD©aSëInfo
.
	`GëName
(), (c⁄° *)
m«me
[
k
][
i
], 
eff01
[k][i],

2016 
åaöEff01
[
k
][
i
], 
eff10
[k][i], 
åaöEff10
[k][i], 
eff30
[k][i], 
åaöEff30
[k][i])

2017 << 
Endl
;

2020 
	`Log
(Ë<< 
kINFO
 << 
hLöe
 << 
Endl
;

2021 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

2023 i‡(
	`gToﬁs
().
	`CheckF‹SûítO±i⁄
(
	`GëO±i⁄s
())Ë
	`Log
().
	`InhibôOuçut
();

2026 if(!
	`IsSûítFûe
())

2028 
°d
::
li°
<
TSåög
> 
d©a£ts
;

2029 
I¡_t
 
k
=0; k<2; k++) {

2030 
I¡_t
 
i
=0; i<
nmëh_u£d
[
k
]; i++) {

2031 
MëhodBa£
* 
theMëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>((*
mëhods
)[
i
]);

2032 if(
theMëhod
==0) ;

2034 
	`RoŸBa£Dú
()->
	`cd
(
theMëhod
->
fD©aSëInfo
.
	`GëName
());

2035 if(
°d
::
	`föd
(
d©a£ts
.
	`begö
(), d©a£ts.
	`íd
(), 
theMëhod
->
fD©aSëInfo
.
	`GëName
()) == datasets.end())

2037 
theMëhod
->
fD©aSëInfo
.
	`GëD©aSë
()->
	`GëTªe
(
Ty≥s
::
kTe°ög
)->
	`Wrôe
–"", 
TObje˘
::
kOvîwrôe
 );

2038 
theMëhod
->
fD©aSëInfo
.
	`GëD©aSë
()->
	`GëTªe
(
Ty≥s
::
kTøöög
)->
	`Wrôe
–"", 
TObje˘
::
kOvîwrôe
 );

2039 
d©a£ts
.
	`push_back
(
theMëhod
->
fD©aSëInfo
.
	`GëName
());

2046 
	`gToﬁs
().
	`TMVACô©i⁄
–
	`Log
(), 
Toﬁs
::
kHtmlLök
 );

2047 
	}
}

2052 
TH1F
* 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eImp‹èn˚
(
D©aLﬂdî
 *
lﬂdî
,
VITy≥
 
vôy≥
, 
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, c⁄° *
theO±i⁄
)

2054 
fModñPîsi°í˚
=
kFALSE
;

2055 
fSûítFûe
=
kTRUE
;

2058 c⁄° 
nbôs
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

2059 if(
vôy≥
==
VITy≥
::
kSh‹t
)

2060  
	`EvÆu©eImp‹èn˚Sh‹t
(
lﬂdî
,
theMëhod
,
mëhodTôÀ
,
theO±i⁄
);

2061 if(
vôy≥
==
VITy≥
::
kAŒ
)

2062  
	`EvÆu©eImp‹èn˚AŒ
(
lﬂdî
,
theMëhod
,
mëhodTôÀ
,
theO±i⁄
);

2063 if(
vôy≥
==
VITy≥
::
kR™dom
&&
nbôs
>10)

2065  
	`EvÆu©eImp‹èn˚R™dom
(
lﬂdî
,
	`pow
(2,
nbôs
),
theMëhod
,
mëhodTôÀ
,
theO±i⁄
);

2068 
°d
::
˚º
<<"Eº‹ i¿V¨übÀ Imp‹èn˚: R™dom modêªquúêm‹êth© 10 v¨übÀ†öÅhêd©a£t."<<°d::
ídl
;

2069  
nuŒ±r
;

2071 
	}
}

2075 
TH1F
* 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eImp‹èn˚AŒ
(
D©aLﬂdî
 *
lﬂdî
, 
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, c⁄° *
theO±i⁄
)

2078 
uöt64_t
 
x
 = 0;

2079 
uöt64_t
 
y
 = 0;

2082 c⁄° 
nbôs
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

2083 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

2085 
uöt64_t
 
ønge
 = 
	`pow
(2, 
nbôs
);

2088 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`imp‹èn˚s
(
nbôs
);

2090 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`ROC
(
ønge
);

2091 
ROC
[0]=0.5;

2092 
i
 = 0; i < 
nbôs
; i++)
imp‹èn˚s
[i] = 0;

2094 
DoubÀ_t
 
SROC
, 
SSROC
;

2095  
x
 = 1; x <
ønge
 ; x++) {

2097 
°d
::
bô£t
<
VIBITS
> 
	`xbô£t
(
x
);

2098 i‡(
x
 == 0) ;

2101 
TMVA
::
D©aLﬂdî
 *
£edlﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

2104 
ödex
 = 0; index < 
nbôs
; index++) {

2105 i‡(
xbô£t
[
ödex
]Ë
£edlﬂdî
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

2108 
	`D©aLﬂdîC›y
(
£edlﬂdî
,
lﬂdî
);

2109 
£edlﬂdî
->
	`Pª∑ªTøöögAndTe°Tªe
(
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëCut
("Sig«l"),Üﬂdî->DeÁu…D©aSëInfo().GëCut("Background"),Üﬂdî->DeÁu…D©aSëInfo().
	`GëS∂ôO±i⁄s
());

2112 
	`BookMëhod
(
£edlﬂdî
, 
theMëhod
, 
mëhodTôÀ
, 
theO±i⁄
);

2115 
	`TøöAŒMëhods
();

2116 
	`Te°AŒMëhods
();

2117 
	`EvÆu©eAŒMëhods
();

2120 
ROC
[
x
] = 
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

2123 
TMVA
::
MëhodBa£
 *
smëhod
=
dy«mic_ˇ°
<TMVA::MëhodBa£*>(
fMëhodsM≠
[
xbô£t
.
	`to_°rög
().
	`c_°r
()][0][0]);

2124 
TMVA
::
Resu…sCœssifiˇti⁄
 *
§esu…s
 = (TMVA::Resu…sCœssifiˇti⁄*)
smëhod
->
	`D©a
()->
	`GëResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

2125 
dñëe
 
§esu…s
;

2126 
dñëe
 
£edlﬂdî
;

2127 
this
->
	`DñëeAŒMëhods
();

2129 
fMëhodsM≠
.
	`˛ór
();

2134  
x
 = 0; x <
ønge
 ; x++)

2136 
SROC
=
ROC
[
x
];

2137 
uöt32_t
 
i
 = 0; i < 
VIBITS
; ++i) {

2138 i‡(
x
 & (1 << 
i
)) {

2139 
y
 = 
x
 & ~(1 << 
i
);

2140 
°d
::
bô£t
<
VIBITS
> 
	`ybô£t
(
y
);

2144 
DoubÀ_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2145 i‡(
y
 == 0) {

2146 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

2151 
SSROC
 = 
ROC
[
y
];

2152 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

2158 
°d
::
cout
<<"--- V¨übÀ Imp‹èn˚ Resu…†(AŒ)"<<°d::
ídl
;

2159  
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
);

2160 
	}
}

2162 
	$sum
(
i
)

2164 
_sum
=0;

2165 
n
=0;n<
i
;n++Ë
_sum
+=
	`pow
(2,n);

2166  
_sum
;

2167 
	}
}

2171 
TH1F
* 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eImp‹èn˚Sh‹t
(
D©aLﬂdî
 *
lﬂdî
, 
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, c⁄° *
theO±i⁄
)

2173 
uöt64_t
 
x
 = 0;

2174 
uöt64_t
 
y
 = 0;

2177 c⁄° 
nbôs
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

2178 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

2180 
ønge
 = 
	`sum
(
nbôs
);

2183 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`imp‹èn˚s
(
nbôs
);

2184 
i
 = 0; i < 
nbôs
; i++)
imp‹èn˚s
[i] = 0;

2186 
DoubÀ_t
 
SROC
, 
SSROC
;

2188 
x
 = 
ønge
;

2190 
°d
::
bô£t
<
VIBITS
> 
	`xbô£t
(
x
);

2191 i‡(
x
 =0Ë
	`Log
()<<
kFATAL
<<"Error:ÇeedátÜeast one variable.";

2195 
TMVA
::
D©aLﬂdî
 *
£edlﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

2198 
ödex
 = 0; index < 
nbôs
; index++) {

2199 i‡(
xbô£t
[
ödex
]Ë
£edlﬂdî
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

2203 
	`D©aLﬂdîC›y
(
£edlﬂdî
,
lﬂdî
);

2206 
	`BookMëhod
(
£edlﬂdî
, 
theMëhod
, 
mëhodTôÀ
, 
theO±i⁄
);

2209 
	`TøöAŒMëhods
();

2210 
	`Te°AŒMëhods
();

2211 
	`EvÆu©eAŒMëhods
();

2214 
SROC
 = 
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

2217 
TMVA
::
MëhodBa£
 *
smëhod
=
dy«mic_ˇ°
<TMVA::MëhodBa£*>(
fMëhodsM≠
[
xbô£t
.
	`to_°rög
().
	`c_°r
()][0][0]);

2218 
TMVA
::
Resu…sCœssifiˇti⁄
 *
§esu…s
 = (TMVA::Resu…sCœssifiˇti⁄*)
smëhod
->
	`D©a
()->
	`GëResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

2219 
dñëe
 
§esu…s
;

2220 
dñëe
 
£edlﬂdî
;

2221 
this
->
	`DñëeAŒMëhods
();

2222 
fMëhodsM≠
.
	`˛ór
();

2226 
uöt32_t
 
i
 = 0; i < 
VIBITS
; ++i) {

2227 i‡(
x
 & (1 << 
i
)) {

2228 
y
 = 
x
 & ~(1 << 
i
);

2229 
°d
::
bô£t
<
VIBITS
> 
	`ybô£t
(
y
);

2233 
DoubÀ_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2234 i‡(
y
 == 0) {

2235 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

2240 
TMVA
::
D©aLﬂdî
 *
sub£edlﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
(
ybô£t
.
	`to_°rög
());

2242 
ödex
 = 0; index < 
nbôs
; index++) {

2243 i‡(
ybô£t
[
ödex
]Ë
sub£edlﬂdî
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

2247 
	`D©aLﬂdîC›y
(
sub£edlﬂdî
,
lﬂdî
);

2250 
	`BookMëhod
(
sub£edlﬂdî
, 
theMëhod
, 
mëhodTôÀ
, 
theO±i⁄
);

2253 
	`TøöAŒMëhods
();

2254 
	`Te°AŒMëhods
();

2255 
	`EvÆu©eAŒMëhods
();

2258 
SSROC
 = 
	`GëROCI¡egøl
(
ybô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

2259 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

2262 
TMVA
::
MëhodBa£
 *
ssmëhod
=
dy«mic_ˇ°
<TMVA::MëhodBa£*>(
fMëhodsM≠
[
ybô£t
.
	`to_°rög
().
	`c_°r
()][0][0]);

2263 
TMVA
::
Resu…sCœssifiˇti⁄
 *
s§esu…s
 = (TMVA::Resu…sCœssifiˇti⁄*)
ssmëhod
->
	`D©a
()->
	`GëResu…s
(ssmëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

2264 
dñëe
 
s§esu…s
;

2265 
dñëe
 
sub£edlﬂdî
;

2266 
this
->
	`DñëeAŒMëhods
();

2267 
fMëhodsM≠
.
	`˛ór
();

2270 
°d
::
cout
<<"--- V¨übÀ Imp‹èn˚ Resu…†(Sh‹t)"<<°d::
ídl
;

2271  
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
);

2272 
	}
}

2276 
TH1F
* 
	gTMVA
::
Fa˘‹y
::
	$EvÆu©eImp‹èn˚R™dom
(
D©aLﬂdî
 *
lﬂdî
, 
UI¡_t
 
n£eds
, 
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, c⁄° *
theO±i⁄
)

2278 
TR™dom3
 *
øngí
 = 
√w
 
	`TR™dom3
(0);

2280 
uöt64_t
 
x
 = 0;

2281 
uöt64_t
 
y
 = 0;

2284 c⁄° 
nbôs
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

2285 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
lﬂdî
->
	`DeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

2287 
ønge
 = 
	`pow
(2, 
nbôs
);

2290 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`imp‹èn˚s
(
nbôs
);

2291 
DoubÀ_t
 
imp‹èn˚s_n‹m
 = 0;

2292 
i
 = 0; i < 
nbôs
; i++)
imp‹èn˚s
[i] = 0;

2294 
DoubÀ_t
 
SROC
, 
SSROC
;

2295 
UI¡_t
 
n
 = 0;Ç < 
n£eds
;Ç++) {

2296 
x
 = 
øngí
 -> 
	`I¡egî
(
ønge
);

2298 
°d
::
bô£t
<32> 
	`xbô£t
(
x
);

2299 i‡(
x
 == 0) ;

2303 
TMVA
::
D©aLﬂdî
 *
£edlﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

2306 
ödex
 = 0; index < 
nbôs
; index++) {

2307 i‡(
xbô£t
[
ödex
]Ë
£edlﬂdî
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

2311 
	`D©aLﬂdîC›y
(
£edlﬂdî
,
lﬂdî
);

2314 
	`BookMëhod
(
£edlﬂdî
, 
theMëhod
, 
mëhodTôÀ
, 
theO±i⁄
);

2317 
	`TøöAŒMëhods
();

2318 
	`Te°AŒMëhods
();

2319 
	`EvÆu©eAŒMëhods
();

2322 
SROC
 = 
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

2326 
TMVA
::
MëhodBa£
 *
smëhod
=
dy«mic_ˇ°
<TMVA::MëhodBa£*>(
fMëhodsM≠
[
xbô£t
.
	`to_°rög
().
	`c_°r
()][0][0]);

2327 
TMVA
::
Resu…sCœssifiˇti⁄
 *
§esu…s
 = (TMVA::Resu…sCœssifiˇti⁄*)
smëhod
->
	`D©a
()->
	`GëResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

2328 
dñëe
 
§esu…s
;

2329 
dñëe
 
£edlﬂdî
;

2330 
this
->
	`DñëeAŒMëhods
();

2331 
fMëhodsM≠
.
	`˛ór
();

2335 
uöt32_t
 
i
 = 0; i < 32; ++i) {

2336 i‡(
x
 & (1 << 
i
)) {

2337 
y
 = 
x
 & ~(1 << 
i
);

2338 
°d
::
bô£t
<32> 
	`ybô£t
(
y
);

2342 
DoubÀ_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2343 i‡(
y
 == 0) {

2344 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

2345 
imp‹èn˚s_n‹m
 +
imp‹èn˚s
[
ny
];

2351 
TMVA
::
D©aLﬂdî
 *
sub£edlﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
(
ybô£t
.
	`to_°rög
());

2353 
ödex
 = 0; index < 
nbôs
; index++) {

2354 i‡(
ybô£t
[
ödex
]Ë
sub£edlﬂdî
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

2358 
	`D©aLﬂdîC›y
(
sub£edlﬂdî
,
lﬂdî
);

2361 
	`BookMëhod
(
sub£edlﬂdî
, 
theMëhod
, 
mëhodTôÀ
, 
theO±i⁄
);

2364 
	`TøöAŒMëhods
();

2365 
	`Te°AŒMëhods
();

2366 
	`EvÆu©eAŒMëhods
();

2369 
SSROC
 = 
	`GëROCI¡egøl
(
ybô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

2370 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

2373 
TMVA
::
MëhodBa£
 *
ssmëhod
=
dy«mic_ˇ°
<TMVA::MëhodBa£*>(
fMëhodsM≠
[
ybô£t
.
	`to_°rög
().
	`c_°r
()][0][0]);

2374 
TMVA
::
Resu…sCœssifiˇti⁄
 *
s§esu…s
 = (TMVA::Resu…sCœssifiˇti⁄*)
ssmëhod
->
	`D©a
()->
	`GëResu…s
(ssmëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
);

2375 
dñëe
 
s§esu…s
;

2376 
dñëe
 
sub£edlﬂdî
;

2377 
this
->
	`DñëeAŒMëhods
();

2378 
fMëhodsM≠
.
	`˛ór
();

2382 
°d
::
cout
<<"--- V¨übÀ Imp‹èn˚ Resu…†(R™dom)"<<°d::
ídl
;

2383  
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
);

2384 
	}
}

2388 
TH1F
* 
	gTMVA
::
Fa˘‹y
::
GëImp‹èn˚
(c⁄° 
nbôs
,
°d
::
ve˘‹
<
DoubÀ_t
> 
imp‹èn˚s
,°d::ve˘‹<
TSåög
> 
v¨Names
)

2390 
TH1F
 *
vih1
 = 
√w
 TH1F("vih1", "", 
nbôs
, 0,Çbits);

2392 
	ggStyÀ
->
SëO±Sèt
(000000);

2394 
Flﬂt_t
 
	gn‹mÆiz©i⁄
 = 0.0;

2395 
	gi
 = 0; i < 
	gnbôs
; i++) {

2396 
	gn‹mÆiz©i⁄
 = 
n‹mÆiz©i⁄
 + 
imp‹èn˚s
[
i
];

2399 
Flﬂt_t
 
	groc
 = 0.0;

2401 
	ggStyÀ
->
SëTôÀXOff£t
(0.4);

2402 
	ggStyÀ
->
SëTôÀXOff£t
(1.2);

2405 
DoubÀ_t
 
	gx_õ
[
nbôs
], 
	gy_õ
[nbits];

2406 
I¡_t
 
	gi
 = 1; i < 
	gnbôs
 + 1; i++) {

2407 
	gx_õ
[
i
 - 1] = (i - 1) * 1.;

2408 
	groc
 = 100.0 * 
imp‹èn˚s
[
i
 - 1] / 
n‹mÆiz©i⁄
;

2409 
	gy_õ
[
i
 - 1] = 
roc
;

2410 
	g°d
::
cout
<<"--- "<<
v¨Names
[
i
-1]<<" = "<<
roc
<<" %"<<
°d
::
ídl
;

2411 
	gvih1
->
GëXaxis
()->
SëBöLabñ
(
i
, 
v¨Names
[ò- 1].
D©a
());

2412 
	gvih1
->
SëBöC⁄ã¡
(
i
, 
roc
);

2414 
TGøph
 *
	gg_õ
 = 
√w
 TGøph(
nbôs
 + 2, 
x_õ
, 
y_õ
);

2415 
	gg_õ
->
SëTôÀ
("");

2417 
	gvih1
->
LabñsO±i⁄
("v >", "X");

2418 
	gvih1
->
SëB¨Width
(0.97);

2419 
I¡_t
 
	gˇ
 = 
TCﬁ‹
::
GëCﬁ‹
("#006600");

2420 
	gvih1
->
SëFûlCﬁ‹
(
ˇ
);

2423 
	gvih1
->
GëYaxis
()->
SëTôÀ
("Importance (%)");

2424 
	gvih1
->
GëYaxis
()->
SëTôÀSize
(0.045);

2425 
	gvih1
->
GëYaxis
()->
CíãrTôÀ
();

2426 
	gvih1
->
GëYaxis
()->
SëTôÀOff£t
(1.24);

2428 
	gvih1
->
GëYaxis
()->
SëR™geU£r
(-7, 50);

2429 
	gvih1
->
SëDúe˘‹y
(0);

2432  
	gvih1
;

	@src/FitterBase.cxx

35 
	~"TMVA/FôãrBa£.h
"

36 
	~"TMVA/I¡îvÆ.h
"

37 
	~"TMVA/IFôãrT¨gë.h
"

39 
	~"TMVA/C⁄figuøbÀ.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/Ty≥s.h
"

43 
	~"Rty≥s.h
"

44 
	~"TSåög.h
"

46 
CœssImp
(
TMVA
::
FôãrBa£
);

48 #ifde‡
_WIN32


50 #¥agm®
w¨nög
 ( 
dißbÀ
 : 4355 )

56 
	gTMVA
::
FôãrBa£
::FôãrBa£–
IFôãrT¨gë
& 
èrgë
,

57 c⁄° 
TSåög
& 
«me
,

58 c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*> 
ønges
,

59 c⁄° 
TSåög
& 
theO±i⁄
 )

60 : 
C⁄figuøbÀ
–
theO±i⁄
 ),

61 
fFôãrT¨gë
–
èrgë
 ),

62 
fR™ges
–
ønges
 ),

63 
fN∑rs
–
ønges
.
size
() ),

64 
fLoggî
–
√w
 
MsgLoggî
("FôãrBa£", 
kINFO
) ),

65 
	$fCœssName
–
«me
 )

67 
	`SëC⁄figName
–
	`GëName
() );

68 
	`SëC⁄figDes¸ùti⁄
( "Configuration options for setupándÅuning of specific fitter" );

69 
	}
}

74 
DoubÀ_t
 
	gTMVA
::
FôãrBa£
::
	$Run
()

76 
°d
::
ve˘‹
<
DoubÀ_t
> 
∑rs
;

77 
°d
::
ve˘‹
<
I¡îvÆ
*>::
c⁄°_ôî©‹
 
∑rIt
 = 
fR™ges
.
	`begö
();Ö¨Ià!fR™ges.
	`íd
();ÖarIt++) {

78 
∑rs
.
	`push_back
–(*
∑rIt
)->
	`GëMón
() );

82  
this
->
	`Run
–
∑rs
 );

83 
	}
}

88 
DoubÀ_t
 
	gTMVA
::
FôãrBa£
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑ømëîs
 )

90  
GëFôãrT¨gë
().
E°im©‹Fun˘i⁄
–
∑ømëîs
 );

	@src/GeneticAlgorithm.cxx

32 
	~<io°ªam
>

33 
	~<Æg‹ôhm
>

34 
	~<Êﬂt.h
>

36 #ifde‡
_GLIBCXX_PARALLEL


37 
	~<omp.h
>

40 
	~"TMVA/GíëicAlg‹ôhm.h
"

41 
	~"TMVA/I¡îvÆ.h
"

42 
	~"TMVA/IFôãrT¨gë.h
"

43 
	~"TMVA/MsgLoggî.h
"

44 
	~"TMVA/Ty≥s.h
"

46 
	~"Rty≥sC‹e.h
"

47 
	~"Rty≥s.h
"

48 
	~"TM©h.h
"

50 
«me•a˚
 
	gTMVA
 {

51 c⁄° 
Boﬁ_t
 
	gGíëicAlg‹ôhm__DEBUG__
 = 
kFALSE
;

54 
CœssImp
(
TMVA
::
GíëicAlg‹ôhm
);

70 
	gTMVA
::
GíëicAlg‹ôhm
::GíëicAlg‹ôhm–
IFôãrT¨gë
& 
èrgë
, 
I¡_t
 
p›uœti⁄Size
,

71 c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*>& 
ønges
, 
UI¡_t
 
£ed
 )

72 : 
fC⁄vCou¡î
(-1),

73 
fFôãrT¨gë
–
èrgë
 ),

74 
fC⁄vVÆue
(0.),

75 
fLa°Resu…
(
DBL_MAX
),

76 
fS¥ód
(0.1),

77 
fMúr‹
(
kTRUE
),

78 
fFú°Time
(
kTRUE
),

79 
fMakeC›õs
(
kFALSE
),

80 
fP›uœti⁄Size
(
p›uœti⁄Size
),

81 
fR™ges
–
ønges
 ),

82 
fP›uœti⁄
(
ønges
, 
p›uœti⁄Size
, 
£ed
),

83 
fBe°Fô√ss
(
DBL_MAX
),

84 
fLoggî
–
√w
 
MsgLoggî
("GeneticAlgorithm") )

86 
	gfP›uœti⁄
.
SëR™domSìd
–
£ed
 );

89 
	gTMVA
::
GíëicAlg‹ôhm
::~
	$GíëicAlg‹ôhm
()

92 
dñëe
 
fLoggî
;

93 
	}
}

102 
	gTMVA
::
GíëicAlg‹ôhm
::
	$Inô
()

104 i‡–
fFú°Time
 ) fFú°Timê
kFALSE
;

106 
	`Evﬁuti⁄
();

108 
	}
}

124 
DoubÀ_t
 
	gTMVA
::
GíëicAlg‹ôhm
::
	$NewFô√ss
–
DoubÀ_t
 , DoubÀ_à
√wVÆue
 )

126  
√wVÆue
;

127 
	}
}

136 
DoubÀ_t
 
	gTMVA
::
GíëicAlg‹ôhm
::
	$CÆcuœãFô√ss
()

138 
fBe°Fô√ss
 = 
DBL_MAX
;

139 #ifde‡
_GLIBCXX_PARALLEL


141 c⁄° 
¡
 = 
	`omp_gë_num_thªads
();

142 
DoubÀ_t
 
be°s
[
¡
];

143  
i
 =0; i < 
¡
; ++i )

144 
be°s
[
i
] = 
fBe°Fô√ss
;

146 #¥agm®
omp
 
∑øŒñ


148 
thªad_numbî
 = 
	`omp_gë_thªad_num
();

149 #¥agm®
omp
 

150  
ödex
 = 0; index < 
fP›uœti⁄
.
	`GëP›uœti⁄Size
(); ++index )

152 
GíëicGíes
* 
gíes
 = 
fP›uœti⁄
.
	`GëGíes
(
ödex
);

153 
DoubÀ_t
 
fô√ss
 = 
	`NewFô√ss
–
gíes
->
	`GëFô√ss
(),

154 
fFôãrT¨gë
.
	`E°im©‹Fun˘i⁄
(
gíes
->
	`GëFa˘‹s
()) );

155 
gíes
->
	`SëFô√ss
–
fô√ss
 );

157 i‡–
be°s
[
thªad_numbî
] > 
fô√ss
 )

158 
be°s
[
thªad_numbî
] = 
fô√ss
;

162 
fBe°Fô√ss
 = *
°d
::
	`mö_ñemít
(
be°s
, be°s+
¡
);

166  
ödex
 = 0; index < 
fP›uœti⁄
.
	`GëP›uœti⁄Size
(); ++index ) {

167 
GíëicGíes
* 
gíes
 = 
fP›uœti⁄
.
	`GëGíes
(
ödex
);

168 
DoubÀ_t
 
fô√ss
 = 
	`NewFô√ss
–
gíes
->
	`GëFô√ss
(),

169 
fFôãrT¨gë
.
	`E°im©‹Fun˘i⁄
(
gíes
->
	`GëFa˘‹s
()) );

170 
gíes
->
	`SëFô√ss
–
fô√ss
 );

172 i‡–
fBe°Fô√ss
 > 
fô√ss
 )

173 
fBe°Fô√ss
 = 
fô√ss
;

179 
fP›uœti⁄
.
	`S‹t
();

181  
fBe°Fô√ss
;

182 
	}
}

191 
	gTMVA
::
GíëicAlg‹ôhm
::
	$Evﬁuti⁄
()

193 i‡–
fMakeC›õs
 )

194 
fP›uœti⁄
.
	`MakeC›õs
( 5 );

195 
fP›uœti⁄
.
	`MakeChûdªn
();

197 
fP›uœti⁄
.
	`Muèã
–10, 3, 
kTRUE
, 
fS¥ód
, 
fMúr‹
 );

198 
fP›uœti⁄
.
	`Muèã
–40, fP›uœti⁄.
	`GëP›uœti⁄Size
()*3/4 );

199 
	}
}

218 
DoubÀ_t
 
	gTMVA
::
GíëicAlg‹ôhm
::
	$S¥ódC⁄åﬁ
–
I¡_t
 
ofSãps
, I¡_à
suc˚ssSãps
, 
DoubÀ_t
 
Á˘‹
 )

221 i‡–
fBe°Fô√ss
 < 
fLa°Resu…
 || 
fSuc˚ssLi°
.
	`size
() <=0 ) {

222 
fLa°Resu…
 = 
fBe°Fô√ss
;

223 
fSuc˚ssLi°
.
	`push_‰⁄t
( 1 );

226 
fSuc˚ssLi°
.
	`push_‰⁄t
( 0 );

228 
I¡_t
 
n
 = 0;

229 
I¡_t
 
sum
 = 0;

230 
°d
::
deque
<
I¡_t
>::
ôî©‹
 
vec
 = 
fSuc˚ssLi°
.
	`begö
();

231 ; 
vec
 !
fSuc˚ssLi°
.
	`íd
() ; vec++) {

232 
sum
 +*
vec
;

233 
n
++;

236 i‡–
n
 >
ofSãps
 ) {

237 
fSuc˚ssLi°
.
	`p›_back
();

238 i‡–
sum
 > 
suc˚ssSãps
 ) {

239 
fS¥ód
 /
Á˘‹
;

240 i‡(
GíëicAlg‹ôhm__DEBUG__
Ë
	`Log
(Ë<< 
kINFO
 << ">" << 
°d
::
Êush
;

242 i‡–
sum
 =
suc˚ssSãps
 ) {

243 i‡(
GíëicAlg‹ôhm__DEBUG__
Ë
	`Log
(Ë<< "=" << 
°d
::
Êush
;

246 
fS¥ód
 *
Á˘‹
;

247 i‡(
GíëicAlg‹ôhm__DEBUG__
Ë
	`Log
(Ë<< "<" << 
°d
::
Êush
;

251  
fS¥ód
;

252 
	}
}

261 
Boﬁ_t
 
	gTMVA
::
GíëicAlg‹ôhm
::
	$HasC⁄vîged
–
I¡_t
 
°ïs
, 
DoubÀ_t
 
im¥ovemít
 )

263 i‡(
fC⁄vCou¡î
 < 0) {

264 
fC⁄vVÆue
 = 
fBe°Fô√ss
;

266 i‡(
TM©h
::
	`Abs
(
fBe°Fô√ss
 - 
fC⁄vVÆue
Ë<
im¥ovemít
 || 
°ïs
<0) {

267 
fC⁄vCou¡î
 ++;

270 
fC⁄vCou¡î
 = 0;

271 
fC⁄vVÆue
 = 
fBe°Fô√ss
;

273 i‡(
GíëicAlg‹ôhm__DEBUG__
Ë
	`Log
(Ë<< "." << 
°d
::
Êush
;

274 i‡(
fC⁄vCou¡î
 < 
°ïs
Ë 
kFALSE
;

275  
kTRUE
;

276 
	}
}

	@src/GeneticFitter.cxx

32 
	~"TMVA/GíëicFôãr.h
"

34 
	~"TMVA/C⁄figuøbÀ.h
"

35 
	~"TMVA/GíëicAlg‹ôhm.h
"

36 
	~"TMVA/I¡îvÆ.h
"

37 
	~"TMVA/FôãrBa£.h
"

38 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/Timî.h
"

40 
	~"TMVA/Ty≥s.h
"

42 
	~"Rty≥s.h
"

43 
	~"TSåög.h
"

45 
	~<io°ªam
>

47 
CœssImp
(
TMVA
::
GíëicFôãr
);

52 
	gTMVA
::
GíëicFôãr
::GíëicFôãr–
IFôãrT¨gë
& 
èrgë
,

53 c⁄° 
TSåög
& 
«me
,

54 c⁄° 
°d
::
ve˘‹
<
TMVA
::
I¡îvÆ
*>& 
ønges
,

55 c⁄° 
TSåög
& 
theO±i⁄
 )

56 : 
	$FôãrBa£
–
èrgë
, 
«me
, 
ønges
, 
theO±i⁄
 )

59 
	`De˛¨eO±i⁄s
();

60 
	`P¨£O±i⁄s
();

61 
	}
}

66 
	gTMVA
::
GíëicFôãr
::
	$De˛¨eO±i⁄s
()

68 
	`De˛¨eO±i⁄Ref
–
fP›Size
=300, "PopSize", "Population size for GA" );

69 
	`De˛¨eO±i⁄Ref
–
fN°ïs
=40, "Steps", "Number of steps for convergence" );

70 
	`De˛¨eO±i⁄Ref
–
fCy˛es
=3, "Cycles", "Independent cycles of GA fitting" );

71 
	`De˛¨eO±i⁄Ref
–
fSC_°ïs
=10, "SC_steps", "Spread control, steps" );

72 
	`De˛¨eO±i⁄Ref
–
fSC_øã
=5, "SC_rate", "Spread control,Ñate: factor is changed depending onÅheÑate" );

73 
	`De˛¨eO±i⁄Ref
–
fSC_Á˘‹
=0.95, "SC_factor", "Spread control, factor" );

74 
	`De˛¨eO±i⁄Ref
–
fC⁄vCrô
=0.001, "ConvCrit", "Convergence criteria" );

76 
	`De˛¨eO±i⁄Ref
–
fSaveBe°FromGíî©i⁄
=1, "SaveBestGen",

78 
	`De˛¨eO±i⁄Ref
–
fSaveBe°FromCy˛e
=10, "SaveBestCycle",

81 
	`De˛¨eO±i⁄Ref
–
fTrim
=
kFALSE
, "Trim",

83 
	`De˛¨eO±i⁄Ref
–
fSìd
=100, "Seed", "Set seed ofÑandom generator (0 givesÑandom seeds)" );

84 
	}
}

89 
	gTMVA
::
GíëicFôãr
::
	$SëP¨amëîs
–
I¡_t
 
cy˛es
,

90 
I¡_t
 
n°ïs
,

91 
I¡_t
 
p›Size
,

92 
I¡_t
 
SC_°ïs
,

93 
I¡_t
 
SC_øã
,

94 
DoubÀ_t
 
SC_Á˘‹
,

95 
DoubÀ_t
 
c⁄vCrô
)

97 
fN°ïs
 = 
n°ïs
;

98 
fCy˛es
 = 
cy˛es
;

99 
fP›Size
 = 
p›Size
;

100 
fSC_°ïs
 = 
SC_°ïs
;

101 
fSC_øã
 = 
SC_øã
;

102 
fSC_Á˘‹
 = 
SC_Á˘‹
;

103 
fC⁄vCrô
 = 
c⁄vCrô
;

104 
	}
}

109 
DoubÀ_t
 
	gTMVA
::
GíëicFôãr
::
Run
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

111 
Log
(Ë<< 
kHEADER
 << "<GeneticFitter> Optimisation,Ölease beÖatient "

112 << "... (öaccuøãÖrogªs†timög f‹ GA)" << 
Endl
;

114 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "init" );

116 
GíëicAlg‹ôhm
 
g°‹e
–
GëFôãrT¨gë
(), 
fP›Size
, 
fR™ges
);

120 
Timî
 
timî
–100*(
fCy˛es
), 
GëName
() );

121 i‡(
	gfIPyMaxIãr
Ë*fIPyMaxIã∏100*(
fCy˛es
);

122 
	gtimî
.
DøwProgªssB¨
( 0 );

124 
DoubÀ_t
 
	g¥ogªss
 = 0.;

126 
I¡_t
 
	gcy˛e
 = 0; cy˛ê< 
	gfCy˛es
; cycle++) {

127 i‡(
	gfIPyCuºítIãr
Ë*fIPyCuºítIã∏100*(
cy˛e
);

128 i‡(
	gfExôFromTøöög
 && *fExitFromTraining) ;

129 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "cycle" );

133 
GíëicAlg‹ôhm
 
ga
–
GëFôãrT¨gë
(), 
fP›Size
, 
fR™ges
, 
fSìd
 );

136 i‡–
	g∑rs
.
size
(Ë=
fR™ges
.size() ){

137 
ga
.
GëGíëicP›uœti⁄
().
GiveHöt
–
∑rs
, 0.0 );

139 i‡(
	gcy˛e
==
fCy˛es
-1) {

140 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "last" );

141 
	gga
.
GëGíëicP›uœti⁄
().
AddP›uœti⁄
–
g°‹e
.GetGeneticPopulation() );

144 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "iteration" );

146 
	gga
.
CÆcuœãFô√ss
();

147 
	gga
.
GëGíëicP›uœti⁄
().
TrimP›uœti⁄
();

149 
DoubÀ_t
 
	gn
=0.;

151 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "iteration" );

152 
	gga
.
Inô
();

153 
	gga
.
CÆcuœãFô√ss
();

154 i‡–
	gfTrim
 ) 
	gga
.
GëGíëicP›uœti⁄
().
TrimP›uœti⁄
();

155 
	gga
.
S¥ódC⁄åﬁ
–
fSC_°ïs
, 
fSC_øã
, 
fSC_Á˘‹
 );

158 i‡(
	gga
.
	gfC⁄vCou¡î
 > 
	gn
Ë¿
DoubÀ_t
(
ga
.
fC⁄vCou¡î
);

159 
	g¥ogªss
 = 100*((
DoubÀ_t
)
cy˛e
Ë+ 100*(
n
/DoubÀ_t(
fN°ïs
));

161 
	gtimî
.
DøwProgªssB¨
–(
I¡_t
)
¥ogªss
 );

164 
	gga
.
GëGíëicP›uœti⁄
().
S‹t
();

165  
I¡_t
 
	gi
 = 0; i<
	gfSaveBe°FromGíî©i⁄
 && i<
	gfP›Size
; i++ ) {

166 
	gg°‹e
.
GëGíëicP›uœti⁄
().
GiveHöt
–
ga
.GëGíëicP›uœti⁄().
GëGíes
(
i
)->
GëFa˘‹s
(),

167 
ga
.
GëGíëicP›uœti⁄
().
GëGíes
(
i
)->
GëFô√ss
() );

169 } !
	gga
.
HasC⁄vîged
–
fN°ïs
, 
fC⁄vCrô
 ));

171 
	gtimî
.
DøwProgªssB¨
–100*(
cy˛e
+1) );

173 
	gga
.
GëGíëicP›uœti⁄
().
S‹t
();

174  
I¡_t
 
	gi
 = 0; i<
	gfSaveBe°FromGíî©i⁄
 && i<
	gfP›Size
; i++ ) {

175 
	gg°‹e
.
GëGíëicP›uœti⁄
().
GiveHöt
–
ga
.GëGíëicP›uœti⁄().
GëGíes
(
i
)->
GëFa˘‹s
(),

176 
ga
.
GëGíëicP›uœti⁄
().
GëGíes
(
i
)->
GëFô√ss
() );

181 
Log
(Ë<< 
	gkINFO
 << "Eœp£dÅime: " << 
	gtimî
.
GëEœp£dTime
()

182 << " " << 
	gEndl
;

184 
DoubÀ_t
 
	gfô√ss
 = 
g°‹e
.
CÆcuœãFô√ss
();

185 
	gg°‹e
.
GëGíëicP›uœti⁄
().
S‹t
();

186 
	g∑rs
.
sw≠
–
g°‹e
.
GëGíëicP›uœti⁄
().
GëGíes
(0)->
GëFa˘‹s
() );

188 
GëFôãrT¨gë
().
ProgªssNŸifõr
( "GA", "stop" );

189  
	gfô√ss
;

	@src/GeneticGenes.cxx

25 
	~"TMVA/GíëicGíes.h
"

26 
	~"TMVA/GíëicP›uœti⁄.h
"

28 
	~"Rty≥s.h
"

29 
	~"Rty≥sC‹e.h
"

38 
CœssImp
(
TMVA
::
GíëicGíes
);

44 
	gTMVA
::
GíëicGíes
::GíëicGíes–
°d
::
ve˘‹
<
DoubÀ_t
> & 
f
 )

46 
fFa˘‹s
 = 
f
;

47 
	gfFô√ss
 = 0;

50 
Boﬁ_t
 
	gTMVA
::
›î©‹
 <(c⁄° 
TMVA
::
GíëicGíes
& 
fú°
, c⁄° TMVA::GíëicGíes& 
£c⁄d
)

52  
fú°
.
fFô√ss
 < 
£c⁄d
.fFitness;

	@src/GeneticPopulation.cxx

32 
	~<io°ªam
>

33 
	~<iom™ù
>

35 
	~"R°r°ªam.h
"

36 
	~"TSy°em.h
"

37 
	~"TR™dom3.h
"

38 
	~"TH1.h
"

39 
	~<Æg‹ôhm
>

41 
	~"TMVA/GíëicP›uœti⁄.h
"

42 
	~"TMVA/GíëicGíes.h
"

43 
	~"TMVA/MsgLoggî.h
"

45 
CœssImp
(
TMVA
::
GíëicP›uœti⁄
);

47 
usög
 
«me•a˚
 
	g°d
;

52 
	gTMVA
::
GíëicP›uœti⁄
::GíëicP›uœti⁄(c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*>& 
ønges
, 
I¡_t
 
size
, 
UI¡_t
 
£ed
)

53 : 
fGíePoﬁ
(
size
),

54 
fR™ges
(
ønges
.
size
()),

55 
fLoggî
–
√w
 
MsgLoggî
("GeneticPopulation") )

60 
	gfR™domGíî©‹
 = 
√w
 
TR™dom3
( 100 );

61 
	gfR™domGíî©‹
->
Unif‹m
(0.,1.);

62 
	gfR™domGíî©‹
->
SëSìd
–
£ed
 );

64  
	gi
 = 0; i < 
	gønges
.
size
(); ++i )

65 
	gfR™ges
[
i
] = 
√w
 
TMVA
::
GíëicR™ge
–
fR™domGíî©‹
, 
ønges
[i] );

67 
	gve˘‹
<
	gDoubÀ_t
> 
√wE¡ry
–
fR™ges
.
size
() );

68  
	gi
 = 0; i < 
	gsize
; ++i )

70  
	grIt
 = 0;ÑIà< 
	gfR™ges
.
size
(); ++rIt )

71 
	g√wE¡ry
[
rIt
] = 
fR™ges
[rIt]->
R™dom
();

72 
	gfGíePoﬁ
[
i
] = 
TMVA
::
GíëicGíes
–
√wE¡ry
);

75 
	gfP›uœti⁄SizeLimô
 = 
size
;

81 
	gTMVA
::
GíëicP›uœti⁄
::~
	$GíëicP›uœti⁄
()

83 i‡(
fR™domGíî©‹
 !
NULL
Ë
dñëe
 fRandomGenerator;

85 
°d
::
ve˘‹
<
GíëicR™ge
*>::
ôî©‹
 
ô
 = 
fR™ges
.
	`begö
();

86 ;
ô
!=
fR™ges
.
	`íd
(); it++Ë
dñëe
 *it;

88 
dñëe
 
fLoggî
;

89 
	}
}

96 
	gTMVA
::
GíëicP›uœti⁄
::
	$SëR™domSìd
–
UI¡_t
 
£ed
 )

98 
fR™domGíî©‹
->
	`SëSìd
–
£ed
 );

99 
	}
}

107 
	gTMVA
::
GíëicP›uœti⁄
::
	$MakeC›õs
–
numbî
 )

109 
i
=0;

110 
°d
::
ve˘‹
<
TMVA
::
GíëicGíes
>::
ôî©‹
 
ô
 = 
fGíePoﬁ
.
	`begö
();

111 
ô
 !
fGíePoﬁ
.
	`íd
(Ë&& 
i
 < 
numbî
;

112 ++
ô
, ++
i
 ) {

113 
	`GiveHöt
–
ô
->
	`GëFa˘‹s
(), it->
	`GëFô√ss
() );

115 
	}
}

122 
	gTMVA
::
GíëicP›uœti⁄
::
	$MakeChûdªn
()

124 #ifde‡
_GLIBCXX_PARALLEL


125 #¥agm®
omp
 
∑øŒñ


126 #¥agm®
omp
 

128  
ô
 = 0; ià< (Ë(
fGíePoﬁ
.
	`size
() / 2); ++it )

130 
I¡_t
 
pos
 = (I¡_t)
fR™domGíî©‹
->
	`I¡egî
–
fGíePoﬁ
.
	`size
()/2 );

131 
fGíePoﬁ
[(fGíePoﬁ.
	`size
(Ë/ 2Ë+ 
ô
] = 
	`MakeSex
–fGíePoﬁ[ô], fGíePoﬁ[
pos
] );

133 
	}
}

139 
	gTMVA
::
GíëicGíes
 
TMVA
::
GíëicP›uœti⁄
::
	$MakeSex
–
TMVA
::
GíëicGíes
 
mÆe
,

140 
TMVA
::
GíëicGíes
 
„mÆe
 )

142 
ve˘‹
< 
DoubÀ_t
 > 
	`chûd
(
fR™ges
.
	`size
());

143 
i
 = 0; i < 
fR™ges
.
	`size
(); ++i) {

144 i‡(
fR™domGíî©‹
->
	`I¡egî
( 2 ) == 0) {

145 
chûd
[
i
] = 
mÆe
.
	`GëFa˘‹s
()[i];

147 
chûd
[
i
] = 
„mÆe
.
	`GëFa˘‹s
()[i];

150  
TMVA
::
	`GíëicGíes
–
chûd
 );

151 
	}
}

171 
	gTMVA
::
GíëicP›uœti⁄
::
	$Muèã
–
DoubÀ_t
 
¥obabûôy
 , 
I¡_t
 
°¨tIndex
,

172 
Boﬁ_t
 
√¨
, 
DoubÀ_t
 
•ªad
, Boﬁ_à
múr‹
 )

174 
ve˘‹
< 
DoubÀ_t
>::
ôî©‹
 
vec
;

175 
ve˘‹
< 
TMVA
::
GíëicR™ge
* >::
ôî©‹
 
vecR™ge
;

182 
ô
 = 
°¨tIndex
; ià< (Ë
fGíePoﬁ
.
	`size
(); ++it) {

183 
vecR™ge
 = 
fR™ges
.
	`begö
();

184 
vec
 = (
fGíePoﬁ
[
ô
].
	`GëFa˘‹s
()).
	`begö
(); ve¯< (fGíePoﬁ[ô].GëFa˘‹s()).
	`íd
(); ++vec) {

185 i‡(
fR™domGíî©‹
->
	`Unif‹m
–100 ) <
¥obabûôy
) {

186 (*
vec
Ë(*
vecR™ge
)->
	`R™dom
–
√¨
, (*vec), 
•ªad
, 
múr‹
 );

188 ++
vecR™ge
;

191 
	}
}

197 
	gTMVA
::
GíëicGíes
* 
TMVA
::
GíëicP›uœti⁄
::
	$GëGíes
–
I¡_t
 
ödex
 )

199  &(
fGíePoﬁ
[
ödex
]);

200 
	}
}

206 
	gTMVA
::
GíëicP›uœti⁄
::
	$Pröt
–
I¡_t
 
u¡ûIndex
 )

208  
ô
 = 0; ià< 
fGíePoﬁ
.
	`size
(); ++it )

210 
I¡_t
 
n
=0;

211 i‡(
u¡ûIndex
 >= -1 ) {

212 i‡(
u¡ûIndex
 == -1 ) ;

213 
u¡ûIndex
--;

215 
	`Log
(Ë<< "fô√ss: " << 
fGíePoﬁ
[
ô
].
	`GëFô√ss
() << " ";

216 
ve˘‹
< 
DoubÀ_t
 >::
ôî©‹
 
vec
 = 
fGíePoﬁ
[
ô
].
	`GëFa˘‹s
().
	`begö
();

217 
vec
 < 
fGíePoﬁ
[
ô
].
	`GëFa˘‹s
().
	`íd
(); vec++ ) {

218 
	`Log
(Ë<< "f_" << 
n
++ << ": " << (*
vec
) << " ";

220 
	`Log
(Ë<< 
Endl
;

222 
	}
}

228 
	gTMVA
::
GíëicP›uœti⁄
::
	$Pröt
–
o°ªam
 & 
out
, 
I¡_t
 
u¡ûIndex
 )

230  
ô
 = 0; ià< 
fGíePoﬁ
.
	`size
(); ++it ) {

231 
I¡_t
 
n
=0;

232 i‡(
u¡ûIndex
 >= -1 ) {

233 i‡(
u¡ûIndex
 == -1 ) ;

234 
u¡ûIndex
--;

236 
out
 << "fô√ss: " << 
fGíePoﬁ
[
ô
].
	`GëFô√ss
() << " ";

237 
ve˘‹
< 
DoubÀ_t
 >::
ôî©‹
 
vec
 = 
fGíePoﬁ
[
ô
].
	`GëFa˘‹s
().
	`begö
();

238 
vec
 < 
fGíePoﬁ
[
ô
].
	`GëFa˘‹s
().
	`íd
(); vec++ ) {

239 
out
 << "f_" << 
n
++ << ": " << (*
vec
) << " ";

241 
out
 << 
°d
::
ídl
;

243 
	}
}

254 
TH1F
* 
	gTMVA
::
GíëicP›uœti⁄
::
	$V¨übÀDi°ributi⁄
–
I¡_t
 
v¨Numbî
, I¡_à
bös
,

255 
I¡_t
 
mö
, I¡_à
max
 )

257 
°d
::
cout
 << "FAILED! TMVA::GíëicP›uœti⁄::V¨übÀDi°ributi⁄" << std::
ídl
;

259 
°d
::
°rög°ªam
 
hi°Name
;

260 
hi°Name
.
	`˛ór
();

261 
hi°Name
.
	`°r
("v");

262 
hi°Name
 << 
v¨Numbî
;

263 
TH1F
 *
hi°
 = 
√w
 
	`TH1F
–
hi°Name
.
	`°r
().
	`c_°r
(),hi°Name.°r().c_°r(), 
bös
,
mö
,
max
 );

265  
hi°
;

266 
	}
}

271 
	gve˘‹
<
	gDoubÀ_t
> 
	gTMVA
::
GíëicP›uœti⁄
::
	$V¨übÀDi°ributi⁄
–
I¡_t
 )

273 
°d
::
cout
 << "FAILED! TMVA::GíëicP›uœti⁄::V¨übÀDi°ributi⁄" << std::
ídl
;

275 
ve˘‹
< 
DoubÀ_t
 > 
v¨Di°
;

277  
v¨Di°
;

278 
	}
}

283 
	gTMVA
::
GíëicP›uœti⁄
::
	$AddP›uœti⁄
–
GíëicP›uœti⁄
 *
°øngîs
 )

285 
°d
::
ve˘‹
<
TMVA
::
GíëicGíes
>::
ôî©‹
 
ô
 = 
°øngîs
->
fGíePoﬁ
.
	`begö
();

286 
ô
 !
°øngîs
->
fGíePoﬁ
.
	`íd
(); it++ ) {

287 
	`GiveHöt
–
ô
->
	`GëFa˘‹s
(), it->
	`GëFô√ss
() );

289 
	}
}

294 
	gTMVA
::
GíëicP›uœti⁄
::
	$AddP›uœti⁄
–
GíëicP›uœti⁄
 &
°øngîs
 )

296 
	`AddP›uœti⁄
(&
°øngîs
);

297 
	}
}

302 
	gTMVA
::
GíëicP›uœti⁄
::
	$TrimP›uœti⁄
()

304 
°d
::
	`s‹t
(
fGíePoﬁ
.
	`begö
(), fGíePoﬁ.
	`íd
());

305  
fGíePoﬁ
.
	`size
(Ë> (Ë
fP›uœti⁄SizeLimô
 )

306 
fGíePoﬁ
.
	`p›_back
();

307 
	}
}

313 
	gTMVA
::
GíëicP›uœti⁄
::
GiveHöt
–
°d
::
ve˘‹
< 
DoubÀ_t
 >& 
höt
, DoubÀ_à
fô√ss
 )

315 
	gTMVA
::
GíëicGíes
 
g
(
höt
);

316 
	gg
.
SëFô√ss
(
fô√ss
);

318 
	gfGíePoﬁ
.
push_back
–
g
 );

324 
	gTMVA
::
GíëicP›uœti⁄
::
	$S‹t
()

326 
°d
::
	`s‹t
(
fGíePoﬁ
.
	`begö
(), fGíePoﬁ.
	`íd
());

327 
	}
}

	@src/GeneticRange.cxx

34 
	~"TR™dom3.h
"

36 
	~"TMVA/GíëicR™ge.h
"

37 
	~"TMVA/I¡îvÆ.h
"

39 
CœssImp
(
TMVA
::
GíëicR™ge
);

45 
	gTMVA
::
GíëicR™ge
::
	$GíëicR™ge
–
TR™dom3
*
∫d
, 
I¡îvÆ
 *
öãrvÆ
 )

47 
fI¡îvÆ
 = 
öãrvÆ
;

49 
fFrom
 = 
fI¡îvÆ
->
	`GëMö
();

50 
fTo
 = 
fI¡îvÆ
->
	`GëMax
();

51 
fNbös

fI¡îvÆ
->
	`GëNbös
();

52 
fTŸÆLígth
 = 
fTo
-
fFrom
;

54 
fR™domGíî©‹
 = 
∫d
;

55 
	}
}

60 
DoubÀ_t
 
	gTMVA
::
GíëicR™ge
::
	$R™domDis¸ëe
()

62 
DoubÀ_t
 
vÆue
 = 
fR™domGíî©‹
->
	`Unif‹m
(0, 1);

63  
fI¡îvÆ
->
	`GëEÀmít
–
	`I¡_t
(
vÆue
*
fNbös
) );

64 
	}
}

76 
DoubÀ_t
 
	gTMVA
::
GíëicR™ge
::
	$R™dom
–
Boﬁ_t
 
√¨
, 
DoubÀ_t
 
vÆue
, DoubÀ_à
•ªad
, Boﬁ_à
múr‹
 )

78 i‡(
fI¡îvÆ
->
	`GëNbös
() > 0) {

79  
	`R™domDis¸ëe
();

81 i‡(
fFrom
 =
fTo
) {

82  
fFrom
;

84 i‡(
√¨
) {

85 
DoubÀ_t
 
ªt
;

86 
ªt
 = 
fR™domGíî©‹
->
	`Gaus
–
vÆue
, 
fTŸÆLígth
*
•ªad
 );

87 i‡(
múr‹
 )  
	`ReM≠Múr‹
–
ªt
 );

88  
	`ReM≠
–
ªt
 );

90  
fR™domGíî©‹
->
	`Unif‹m
(
fFrom
, 
fTo
);

91 
	}
}

96 
DoubÀ_t
 
	gTMVA
::
GíëicR™ge
::
	$ReM≠
–
DoubÀ_t
 
vÆ
 )

98 i‡(
fFrom
 >
fTo
 )  
vÆ
;

99 i‡(
vÆ
 < 
fFrom
 )  
	`ReM≠
–(vÆ-fFromË+ 
fTo
 );

100 i‡(
vÆ
 >
fTo
 )  
	`ReM≠
–(vÆ-fToË+ 
fFrom
 );

101  
vÆ
;

102 
	}
}

107 
DoubÀ_t
 
	gTMVA
::
GíëicR™ge
::
	$ReM≠Múr‹
–
DoubÀ_t
 
vÆ
 )

109 i‡(
fFrom
 >
fTo
 )  
vÆ
;

110 i‡(
vÆ
 < 
fFrom
 )  
	`ReM≠
( fFrom - (val-fFrom) );

111 i‡(
vÆ
 >
fTo
 )  
	`ReM≠
( fTo - (val-fTo) );

112  
vÆ
;

113 
	}
}

118 
	gTMVA
::
GíëicR™ge
::~
	$GíëicR™ge
()

120 
	}
}

	@src/GiniIndex.cxx

66 
	~"TMVA/GöiIndex.h
"

68 
	~"Rty≥s.h
"

70 
CœssImp
(
TMVA
::
GöiIndex
);

76 
DoubÀ_t
 
	gTMVA
::
GöiIndex
::
	$GëSï¨©i⁄Index
–c⁄° 
DoubÀ_t
 
s
, c⁄° DoubÀ_à
b
 )

78 i‡(
s
+
b
 <= 0)  0;

79 i‡(
s
<=0 || 
b
 <=0)  0;

81  2*
s
*
b
/(s+b)/(s+b);

82 
	}
}

	@src/GiniIndexWithLaplace.cxx

74 
	~"TMVA/GöiIndexWôhL≠œ˚.h
"

76 
	~"Rty≥s.h
"

78 
CœssImp
(
TMVA
::
GöiIndexWôhL≠œ˚
);

82 
DoubÀ_t
 
	gTMVA
::
GöiIndexWôhL≠œ˚
::
	$GëSï¨©i⁄Index
–c⁄° 
DoubÀ_t
 
s
, c⁄° DoubÀ_à
b
 )

84 i‡(
s
+
b
 <= 0)  0;

85 i‡(
s
<=0 || 
b
 <=0)  0;

86  (
s
*
b
+s+b+1)/(s+b+2)/(s+b+2);

87 
	}
}

	@src/HyperParameterOptimisation.cxx

4 
	~"TMVA/Hy≥rP¨amëîO±imißti⁄.h
"

6 
	~"TMVA/C⁄figuøbÀ.h
"

7 
	~"TMVA/D©aSë.h
"

8 
	~"TMVA/Evít.h
"

9 
	~"TMVA/MëhodBa£.h
"

10 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

11 
	~"TMVA/Ty≥s.h
"

13 
	~"TGøph.h
"

14 
	~"TMu…iGøph.h
"

15 
	~"TSåög.h
"

16 
	~"TSy°em.h
"

18 
	~<io°ªam
>

19 
	~<mem‹y
>

20 
	~<ve˘‹
>

32 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄Resu…
::
	$Hy≥rP¨amëîO±imißti⁄Resu…
()

33 : 
	`fROCAVG
(0.0), 
	`fROCCurves
(
°d
::
make_sh¨ed
<
TMu…iGøph
>())

35 
	}
}

37 
TMVA
::
Hy≥rP¨amëîO±imißti⁄Resu…
::~
	$Hy≥rP¨amëîO±imißti⁄Resu…
()

39 
	}
}

41 
TMu…iGøph
 *
TMVA
::
Hy≥rP¨amëîO±imißti⁄Resu…
::
	$GëROCCurves
(
Boﬁ_t
 )

44  
fROCCurves
.
	`gë
();

45 
	}
}

47 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄Resu…
::
	$Pröt
() const

49 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

50 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

52 
MsgLoggî
 
	`fLoggî
("HyperParameterOptimisation");

54 
UI¡_t
 
j
=0; j<
fFﬁdP¨amëîs
.
	`size
(); ++j) {

55 
fLoggî
<<
kHEADER
<< "===========================================================" << 
Endl
;

56 
fLoggî
<<
kINFO
<< "O±imißti⁄ f‹ " << 
fMëhodName
 << " fﬁd " << 
j
+1 << 
Endl
;

58 autÿ&
ô
 : 
fFﬁdP¨amëîs
.
	`©
(
j
)) {

59 
fLoggî
<<
kINFO
<< 
ô
.
fú°
 << " " << it.
£c⁄d
 << 
Endl
;

63 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

65 
	}
}

67 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄
::
	$Hy≥rP¨amëîO±imißti⁄
(
TMVA
::
D©aLﬂdî
 *
d©Æﬂdî
):
	`Envñ›e
("HyperParameterOptimisation",dataloader),

68 
	`fFomTy≥
("Separation"),

69 
	`fFôTy≥
("Minuit"),

70 
	`fNumFﬁds
(5),

71 
	`fResu…s
(),

72 
	`fCœssifõr
(
√w
 
TMVA
::
	`Fa˘‹y
("HyperParameterOptimisation","!V:!ROC:Silent:!ModelPersistence:!Color:!DrawProgressBar:AnalysisType=Classification"))

74 
fFﬁdSètus
=
kFALSE
;

75 
	}
}

77 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄
::~
	$Hy≥rP¨amëîO±imißti⁄
()

79 
fCœssifõr
=
nuŒ±r
;

80 
	}
}

82 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄
::
	$SëNumFﬁds
(
UI¡_t
 
i
)

84 
fNumFﬁds
=
i
;

85 
fD©aLﬂdî
->
	`MakeKFﬁdD©aSë
(
fNumFﬁds
);

86 
fFﬁdSètus
=
kTRUE
;

87 
	}
}

89 
	gTMVA
::
Hy≥rP¨amëîO±imißti⁄
::
	$EvÆu©e
()

91 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

92 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

93 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

95 if(!
fFﬁdSètus
)

97 
fD©aLﬂdî
->
	`MakeKFﬁdD©aSë
(
fNumFﬁds
);

98 
fFﬁdSètus
=
kTRUE
;

100 
fResu…s
.
fMëhodName
 = 
mëhodName
;

102 
UI¡_t
 
i
 = 0; i < 
fNumFﬁds
; ++i) {

104 
TSåög
 
fﬁdTôÀ
 = 
mëhodTôÀ
;

105 
fﬁdTôÀ
 += "_opt";

106 
fﬁdTôÀ
 +
i
+1;

108 
Evít
::
	`SëIsTøöög
(
kTRUE
);

109 
fD©aLﬂdî
->
	`Pª∑ªFﬁdD©aSë
(
i
, 
TMVA
::
Ty≥s
::
kTøöög
);

111 autÿ
smëhod
 = 
fCœssifõr
->
	`BookMëhod
(
fD©aLﬂdî
.
	`gë
(), 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

113 autÿ
∑øms
=
smëhod
->
	`O±imizeTunögP¨amëîs
(
fFomTy≥
,
fFôTy≥
);

114 
fResu…s
.
fFﬁdP¨amëîs
.
	`push_back
(
∑øms
);

116 
smëhod
->
	`D©a
()->
	`DñëeResu…s
(smëhod->
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, Ty≥s::
kCœssifiˇti⁄
);

118 
fCœssifõr
->
	`DñëeAŒMëhods
();

120 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

124 
	}
}

	@src/IFitterTarget.cxx

34 
	~"TMVA/IFôãrT¨gë.h
"

36 
	~"Rty≥s.h
"

38 
CœssImp
(
TMVA
::
IFôãrT¨gë
);

43 
	gTMVA
::
IFôãrT¨gë
::
	$IFôãrT¨gë
()

45 
	}
}

	@src/IMethod.cxx

2 
	~"TMVA/IMëhod.h
"

4 
	~"Rty≥s.h
"

13 
CœssImp
(
TMVA
::
IMëhod
);

	@src/Interval.cxx

69 
	~"TM©h.h
"

70 
	~"TR™dom3.h
"

71 
	~"ThªadLoˇlSt‹age.h
"

73 
	~"TMVA/I¡îvÆ.h
"

74 
	~"TMVA/MsgLoggî.h
"

75 
	~"TMVA/Ty≥s.h
"

77 
CœssImp
(
TMVA
::
I¡îvÆ
);

84 
	gTMVA
::
I¡îvÆ
::
	$I¡îvÆ
–
DoubÀ_t
 
mö
, DoubÀ_à
max
, 
I¡_t
 
nbös
 ) :

85 
	`fMö
(
mö
),

86 
	`fMax
(
max
),

87 
	$fNbös
(
nbös
)

89 i‡(
fMax
 - 
fMö
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << "maximumÜowîÅh™ möimum" << 
Endl
;

90 i‡(
nbös
 < 0) {

91 
	`Log
(Ë<< 
kFATAL
 << "nbö†< 0" << 
Endl
;

94 i‡(
nbös
 == 1) {

95 
	`Log
(Ë<< 
kFATAL
 << "öãrvÆ ha†tÿhavê©Üó° 2 bö†i‡dis¸ëe" << 
Endl
;

98 
	}
}

100 
	gTMVA
::
I¡îvÆ
::
	$I¡îvÆ
–c⁄° 
I¡îvÆ
& 
Ÿhî
 ) :

101 
	`fMö
 ( 
Ÿhî
.
fMö
 ),

102 
	`fMax
 ( 
Ÿhî
.
fMax
 ),

103 
	$fNbös
–
Ÿhî
.
fNbös
 )

105 
	}
}

110 
	gTMVA
::
I¡îvÆ
::~
	$I¡îvÆ
()

112 
	}
}

120 
DoubÀ_t
 
TMVA
::
I¡îvÆ
::
	$GëEÀmít
–
I¡_t
 
bö
 ) const

122 i‡(
fNbös
 <= 0) {

123 
	`Log
(Ë<< 
kFATAL
 << "GëEÀmíà⁄ly deföed f‹ dis¸ëêvÆuêI¡îvÆs" << 
Endl
;

126 i‡(
bö
 < 0 || bö >
fNbös
) {

127 
	`Log
(Ë<< 
kFATAL
 << "bö " << 
bö
 << " ouào‡ønge: i¡îvÆ *bös* cou¡ from 0Åÿ" << 
fNbös
-1 << 
Endl
;

130  
fMö
 + ( (
	`DoubÀ_t
(
bö
)/(
fNbös
-1)Ë*(
fMax
 - fMin) );

131 
	}
}

136 
DoubÀ_t
 
	gTMVA
::
I¡îvÆ
::
	$GëSãpSize
–
I¡_t
 
iBö
 ) const

138 i‡(
fNbös
 <= 0) {

139 
	`Log
(Ë<< 
kFATAL
 << "GëEÀmíà⁄ly deföed f‹ dis¸ëêvÆuêI¡îvÆs" << 
Endl
;

141 i‡(
iBö
<0) {

142 
	`Log
(Ë<< 
kFATAL
 << "Youásked f‹ iBö=" << 
iBö


143 <<" i¿öãrvÆ ..ánd.. s‹ry, I c™nŸÜëÅhi†h≠≥n.."<<
Endl
;

145  (
fMax
-
fMö
)/(
DoubÀ_t
)(
fNbös
-1);

146 
	}
}

151 
DoubÀ_t
 
	gTMVA
::
I¡îvÆ
::
	$GëRndm
–
TR™dom3
& 
∫d
 ) const

153  
∫d
.
	`Rndm
()*(
fMax
 - 
fMö
) + fMin;

154 
	}
}

156 
DoubÀ_t
 
	gTMVA
::
I¡îvÆ
::
	$GëWidth
() const

158  
fMax
 - 
fMö
;

159 
	}
}

160 
DoubÀ_t
 
	gTMVA
::
I¡îvÆ
::
	$GëMón
() const

162  (
fMax
 + 
fMö
)/2;

163 
	}
}

165 
	gTMVA
::
I¡îvÆ
::
	$Pröt
(
°d
::
o°ªam
 &
os
) const

167 
I¡_t
 
i
=0; i<
	`GëNbös
(); i++){

168 
os
 << "| " << 
	`GëEÀmít
(
i
)<<" |" ;

170 
	}
}

172 
	gTMVA
::
MsgLoggî
& 
TMVA
::
I¡îvÆ
::
	$Log
() const {

173 
	`TTHREAD_TLS_DECL_ARG
(
MsgLoggî
,
loggî
,"Interval");

174  
loggî
;

175 
	}
}

	@src/KDEKernel.cxx

33 
	~"TH1.h
"

34 
	~"TH1F.h
"

35 
	~"TF1.h
"

43 
	~"TM©h.h
"

47 
	~"TMVA/KDEKî√l.h
"

48 
	~"TMVA/MsgLoggî.h
"

49 
	~"TMVA/Ty≥s.h
"

51 
CœssImp
(
TMVA
::
KDEKî√l
);

57 
	gTMVA
::
KDEKî√l
::
	$KDEKî√l
–
EKî√lIãr
 
kôî
, c⁄° 
TH1
 *
hi°
, 
Flﬂt_t
 
lowî_edge
, Flﬂt_à
uµî_edge
,

58 
EKî√lB‹dî
 
kb‹dî
, 
Flﬂt_t
 
FöeFa˘‹
 )

59 : 
	`fSigma
( 1. ),

60 
	`fIãr
 ( 
kôî
 ),

61 
	`fLowîEdge
 (
lowî_edge
 ),

62 
	`fUµîEdge
 (
uµî_edge
),

63 
	`fFöeFa˘‹
 ( 
FöeFa˘‹
 ),

64 
	`fKî√l_öãg
 ( 0 ),

65 
	`fKDEb‹dî
 ( 
kb‹dî
 ),

66 
	`fLoggî
–
√w
 
	`MsgLoggî
("KDEKernel") )

68 i‡(
hi°
 =
NULL
) {

69 
	`Log
(Ë<< 
kFATAL
 << "CÆÀd wôhouàvÆid hi°ogømÖoöã∏(hi°)!" << 
Endl
;

72 
fHi°
 = (
TH1F
*)
hi°
->
	`Cl⁄e
();

73 
fFú°IãrHi°
 = (
TH1F
*)
hi°
->
	`Cl⁄e
();

74 
fFú°IãrHi°
->
	`Re£t
();

75 
fSigmaHi°
 = (
TH1F
*)
hi°
->
	`Cl⁄e
();

76 
fSigmaHi°
->
	`Re£t
();

78 
fHiddíIãøti⁄
=
Ál£
;

79 
	}
}

84 
	gTMVA
::
KDEKî√l
::~
	$KDEKî√l
()

86 i‡(
fHi°
 !
NULL
Ë
dñëe
 fHist;

87 i‡(
fFú°IãrHi°
 !
NULL
Ë
dñëe
 fFirstIterHist;

88 i‡(
fSigmaHi°
 !
NULL
Ë
dñëe
 fSigmaHist;

89 i‡(
fKî√l_öãg
 !
NULL
Ë
dñëe
 fKernel_integ;

90 
dñëe
 
fLoggî
;

91 
	}
}

96 
DoubÀ_t
 
	$GaussI¡egøl
(
DoubÀ_t
 *
x
, DoubÀ_à*
∑r
)

98 i‡–(
∑r
[1]<=0Ë|| (
x
[0]>x[1]))  -1.;

100 
Flﬂt_t
 
xs1
=(
x
[0]-
∑r
[0])/par[1];

101 
Flﬂt_t
 
xs2
=(
x
[1]-
∑r
[0])/par[1];

103 i‡(
xs1
==0) {

104 i‡(
xs2
==0)  0.;

105 i‡(
xs2
>0 )  0.5*
TM©h
::
	`Erf
(xs2);

107 i‡(
xs2
==0Ë 0.5*
TM©h
::
	`Erf
(TM©h::
	`Abs
(
xs1
));

108 i‡(
xs1
>0Ë 0.5*(
TM©h
::
	`Erf
(
xs2
)-TMath::Erf(xs1));

109 i‡(
xs1
<0) {

110 i‡(
xs2
>0 )  0.5*(
TM©h
::
	`Erf
(xs2)+TM©h::Erf(TM©h::
	`Abs
(
xs1
)));

111  0.5*(
TM©h
::
	`Erf
(TM©h::
	`Abs
(
xs1
))-TM©h::Erf(TM©h::Abs(
xs2
)));

114 
	}
}

120 
	gTMVA
::
KDEKî√l
::
	$SëKî√lTy≥
–
EKî√lTy≥
 
kty≥
 )

122 i‡(
kty≥
 =
kGauss
) {

129 
fKî√l_öãg
 = 
√w
 
	`TF1
("GaussI¡egøl",
GaussI¡egøl
,
fLowîEdge
,
fUµîEdge
,4);

130 
fSigma
 = ( 
TM©h
::
	`Sqπ
(2.0)

131 *
TM©h
::
	`Powî
(4./3., 0.2)

132 *
fHi°
->
	`GëRMS
()

133 *
TM©h
::
	`Powî
(
fHi°
->
	`I¡egøl
(), -0.2) );

137 i‡(
fSigma
 <= 0 ) {

138 
	`Log
(Ë<< 
kFATAL
 << "<SëKî√lTy≥> KDE sigm®ha†övÆid vÆuê–<=0 ) !" << 
Endl
;

142 i‡(
fIãr
 =
kAd≠tiveKDE
) {

148 
fHiddíIãøti⁄
=
åue
;

150 
Flﬂt_t
 
hi°oLowEdge
=
fHi°
->
	`GëBöLowEdge
(1);

151 
Flﬂt_t
 
hi°oUµîEdge
=
fHi°
->
	`GëBöLowEdge
(fHi°->
	`GëNbösX
()+1);

153 
I¡_t
 
i
=1;i<
fHi°
->
	`GëNbösX
();i++) {

155 
I¡_t
 
j
=1;j<
fFú°IãrHi°
->
	`GëNbösX
();j++) {

157 
fFú°IãrHi°
->
	`AddBöC⁄ã¡
(
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

158 
this
->
	`GëBöKî√lI¡egøl
(
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
),

159 
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
+1),

160 
fHi°
->
	`GëBöCíãr
(
i
),

161 
i
)

164 i‡(
fKDEb‹dî
 == 3) {

168 i‡(
i
 < 
fHi°
->
	`GëNbösX
()/5 ) {

169 
I¡_t
 
j
=1;j<
fFú°IãrHi°
->
	`GëNbösX
();j++) {

171 
fFú°IãrHi°
->
	`AddBöC⁄ã¡
(
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

172 
this
->
	`GëBöKî√lI¡egøl
(
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
),

173 
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
+1),

174 2*
hi°oLowEdge
-
fHi°
->
	`GëBöCíãr
(
i
),

175 
i
)

179 i‡(
i
 > 4*
fHi°
->
	`GëNbösX
()/5) {

180 
I¡_t
 
j
=1;j<
fFú°IãrHi°
->
	`GëNbösX
();j++) {

182 
fFú°IãrHi°
->
	`AddBöC⁄ã¡
(
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

183 
this
->
	`GëBöKî√lI¡egøl
(
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
),

184 
fFú°IãrHi°
->
	`GëBöLowEdge
(
j
+1),

185 2*
hi°oUµîEdge
-
fHi°
->
	`GëBöCíãr
(
i
),

186 
i
)

193 
fFú°IãrHi°
->
	`SëE¡rõs
(
fHi°
->
	`GëE¡rõs
());

196 
Flﬂt_t
 
öãg
=0;

197 
I¡_t
 
j
=1;j<
fFú°IãrHi°
->
	`GëNbösX
();j++)

198 
öãg
+=
fFú°IãrHi°
->
	`GëBöC⁄ã¡
(
j
)*fFú°IãrHi°->
	`GëBöWidth
(j);

199 
fFú°IãrHi°
->
	`SˇÀ
(1./
öãg
);

201 
fHiddíIãøti⁄
=
Ál£
;

207 
I¡_t
 
j
=1;j<
fFú°IãrHi°
->
	`GëNbösX
();j++) {

209 i‡(
fSigma
*
TM©h
::
	`Sqπ
(1.0/
fFú°IãrHi°
->
	`GëBöC⁄ã¡
(
j
)) <= 0 ) {

210 
	`Log
(Ë<< 
kFATAL
 << "<SëKî√lTy≥> KDE sigm®ha†övÆid vÆuê–<=0 ) !" << 
Endl
;

213 
fSigmaHi°
->
	`SëBöC⁄ã¡
(
j
,
fFöeFa˘‹
*
fSigma
/
TM©h
::
	`Sqπ
(
fFú°IãrHi°
->
	`GëBöC⁄ã¡
(j)));

217 i‡(
fKî√l_öãg
 ==0 ) {

218 
	`Log
(Ë<< 
kFATAL
 << "KDE kî√»nŸ c‹ª˘ly inôülized!" << 
Endl
;

220 
	}
}

225 
Flﬂt_t
 
	gTMVA
::
KDEKî√l
::
	$GëBöKî√lI¡egøl
–
Flﬂt_t
 
lowr
, Flﬂt_à
highr
, Flﬂt_à
món
, 
I¡_t
 
bönum
 )

227 i‡((
fIãr
 =
kN⁄ad≠tiveKDE
Ë|| 
fHiddíIãøti⁄
 )

228 
fKî√l_öãg
->
	`SëP¨amëîs
(
món
,
fSigma
);

229 i‡((
fIãr
 =
kAd≠tiveKDE
Ë&& !
fHiddíIãøti⁄
 )

230 
fKî√l_öãg
->
	`SëP¨amëîs
(
món
,
fSigmaHi°
->
	`GëBöC⁄ã¡
(
bönum
));

232 i‡–
fKDEb‹dî
 == 2 ) {

233 
Flﬂt_t
 
ªn‹mFa˘‹
=1.0/
fKî√l_öãg
->
	`EvÆ
(
fLowîEdge
,
fUµîEdge
);

234  (
ªn‹mFa˘‹
*
fKî√l_öãg
->
	`EvÆ
(
lowr
,
highr
));

239  (
fKî√l_öãg
->
	`EvÆ
(
lowr
,
highr
));

240 
	}
}

	@src/LDA.cxx

32 
	~"TMVA/LDA.h
"

35 
	~<io°ªam
>

37 
	~"TDecompSVD.h
"

38 
	~"TM©rixF.h
"

39 
	~"TM©h.h
"

41 
	~"TMVA/Ty≥s.h
"

42 
	~"TMVA/MsgLoggî.h
"

47 
	gTMVA
::
LDA
::
	$LDA
–
Flﬂt_t
 
tﬁîí˚
, 
Boﬁ_t
 
debug
 )

48 : 
	`fTﬁîí˚
(
tﬁîí˚
),

49 
	`fNumP¨ams
(0),

50 
	`fSigma
(0),

51 
	`fSigmaInvî£
(0),

52 
	`fDebug
(
debug
),

53 
	`fLoggî
–
√w
 
	`MsgLoggî
("LDA", (
debug
?
kINFO
:
kDEBUG
)) )

55 
	}
}

60 
TMVA
::
LDA
::~
	$LDA
()

62 
dñëe
 
fLoggî
;

63 
	}
}

68 
	gTMVA
::
LDA
::
	$Inôülize
(c⁄° 
LDAEvíts
& 
öputSig«lEvíts
, c⁄° LDAEvíts& 
öputBackgroundEvíts
)

70 
	`Log
(Ë<< 
kDEBUG
 << "Thîê¨e: " << 
öputSig«lEvíts
.
	`size
(Ë<< " i≈uàsig«»evít†" << 
Endl
;

71 
	`Log
(Ë<< 
kDEBUG
 << "Thîê¨e: " << 
öputBackgroundEvíts
.
	`size
(Ë<< " i≈uàbackgroundÉvít†" << 
Endl
;

73 
fNumP¨ams
 = 
öputSig«lEvíts
[0].
	`size
();

75 
UI¡_t
 
numSig«lEvíts
 = 
öputSig«lEvíts
.
	`size
();

76 
UI¡_t
 
numBackEvíts
 = 
öputBackgroundEvíts
.
	`size
();

77 
UI¡_t
 
numTŸÆEvíts
 = 
numSig«lEvíts
 + 
numBackEvíts
;

78 
fEvítFø˘i⁄
[0] = (
Flﬂt_t
)
numBackEvíts
/
numTŸÆEvíts
;

79 
fEvítFø˘i⁄
[1] = (
Flﬂt_t
)
numSig«lEvíts
/
numTŸÆEvíts
;

80 
UI¡_t
 
K
 = 2;

83 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`m_muSig«l
 (
fNumP¨ams
,0.0);

84 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`m_muBackground
 (
fNumP¨ams
,0.0);

85 
UI¡_t
 
∑øm
=0;Ö¨am < 
fNumP¨ams
; ++param) {

86 
UI¡_t
 
evítNumbî
=0;ÉvítNumbî < 
numSig«lEvíts
; ++eventNumber)

87 
m_muSig«l
[
∑øm
] +
öputSig«lEvíts
[
evítNumbî
][param];

88 
UI¡_t
 
evítNumbî
=0;ÉvítNumbî < 
numBackEvíts
; ++eventNumber)

89 
m_muBackground
[
∑øm
] +
öputBackgroundEvíts
[
evítNumbî
][∑øm]/
numBackEvíts
;

90 i‡(
numSig«lEvíts
 > 0Ë
m_muSig«l
[
∑øm
] /=ÇumSignalEvents;

91 i‡(
numBackEvíts
 > 0 ) 
m_muBackground
[
∑øm
] /=ÇumBackEvents;

93 
fMu
[0] = 
m_muBackground
;

94 
fMu
[1] = 
m_muSig«l
;

96 i‡(
fDebug
) {

97 
	`Log
(Ë<< 
kDEBUG
 << "thêsig«»móns" << 
Endl
;

98 
UI¡_t
 
∑øm
=0;Ö¨am < 
fNumP¨ams
; ++param)

99 
	`Log
(Ë<< 
kDEBUG
 << 
m_muSig«l
[
∑øm
] << 
Endl
;

100 
	`Log
(Ë<< 
kDEBUG
 << "thêbackground móns" << 
Endl
;

101 
UI¡_t
 
∑øm
=0;Ö¨am < 
öputBackgroundEvíts
[0].
	`size
(); ++param)

102 
	`Log
(Ë<< 
kDEBUG
 << 
m_muBackground
[
∑øm
] << 
Endl
;

109 
TM©rixF
 
	`sigmaSig«l
(
fNumP¨ams
, fNumParams);

110 
TM©rixF
 
	`sigmaBack
(
fNumP¨ams
, fNumParams);

111 i‡(
fSigma
!=0Ë
dñëe
 fSigma;

112 
fSigma
 = 
√w
 
	`TM©rixF
(
fNumP¨ams
, fNumParams);

113 
UI¡_t
 
row
=0;Ñow < 
fNumP¨ams
; ++row) {

114 
UI¡_t
 
cﬁ
=0; cﬁ < 
fNumP¨ams
; ++col) {

115 
sigmaSig«l
[
row
][
cﬁ
] = 0;

116 
sigmaBack
[
row
][
cﬁ
] = 0;

117 (*
fSigma
)[
row
][
cﬁ
] = 0;

121 
UI¡_t
 
evítNumbî
=0;ÉvítNumbî < 
numSig«lEvíts
; ++eventNumber) {

122 
UI¡_t
 
row
=0;Ñow < 
fNumP¨ams
; ++row) {

123 
UI¡_t
 
cﬁ
=0; cﬁ < 
fNumP¨ams
; ++col) {

124 
sigmaSig«l
[
row
][
cﬁ
] +(
öputSig«lEvíts
[
evítNumbî
][row] - 
m_muSig«l
[row]) * (inputSignalEvents[eventNumber][col] - m_muSignal[col] );

129 
UI¡_t
 
evítNumbî
=0;ÉvítNumbî < 
numBackEvíts
; ++eventNumber) {

130 
UI¡_t
 
row
=0;Ñow < 
fNumP¨ams
; ++row) {

131 
UI¡_t
 
cﬁ
=0; cﬁ < 
fNumP¨ams
; ++col) {

132 
sigmaBack
[
row
][
cﬁ
] +(
öputBackgroundEvíts
[
evítNumbî
][row] - 
m_muBackground
[row]) * (inputBackgroundEvents[eventNumber][col] - m_muBackground[col] );

138 *
fSigma
 = 
sigmaBack
 + 
sigmaSig«l
;

139 *
fSigma
 *1.0/(
numTŸÆEvíts
 - 
K
);

141 i‡(
fDebug
) {

142 
	`Log
(Ë<< "a·î fûlög sigmaSig«l" <<
Endl
;

143 
sigmaSig«l
.
	`Pröt
();

144 
	`Log
(Ë<< "a·î fûlög sigmaBack" <<
Endl
;

145 
sigmaBack
.
	`Pröt
();

146 
	`Log
(Ë<< "a·î fûlögÅŸÆ Sigma" <<
Endl
;

147 
fSigma
->
	`Pröt
();

150 
TDecompSVD
 
sﬁuti⁄SVD
 = 
	`TDecompSVD
–*
fSigma
 );

151 
TM©rixF
 
decompo£d
 = 
	`TM©rixF
–
fNumP¨ams
, fNumParams );

152 
TM©rixF
 
	`düg
 ( 
fNumP¨ams
, fNumParams );

153 
TM©rixF
 
	`uTøns
–
fNumP¨ams
, fNumParams );

154 
TM©rixF
 
	`vTøns
–
fNumP¨ams
, fNumParams );

155 i‡(
sﬁuti⁄SVD
.
	`Decompo£
()) {

156 
UI¡_t
 
i
 = 0; i< 
fNumP¨ams
; ++i) {

157 i‡(
sﬁuti⁄SVD
.
	`GëSig
()[
i
] > 
fTﬁîí˚
)

158 
	`düg
(
i
,iË
sﬁuti⁄SVD
.
	`GëSig
()[i];

160 
	`düg
(
i
,iË
fTﬁîí˚
;

163 i‡(
fDebug
) {

164 
	`Log
(Ë<< "thêdüg⁄Æ" <<
Endl
;

165 
düg
.
	`Pröt
();

168 
decompo£d
 = 
sﬁuti⁄SVD
.
	`GëV
();

169 
decompo£d
 *
düg
;

170 
decompo£d
 *
sﬁuti⁄SVD
.
	`GëU
();

172 i‡(
fDebug
) {

173 
	`Log
(Ë<< "thêdecomposôi⁄ " <<
Endl
;

174 
decompo£d
.
	`Pröt
();

177 *
fSigmaInvî£
 = 
uTøns
.
	`Tøn•o£
(
sﬁuti⁄SVD
.
	`GëU
());

178 *
fSigmaInvî£
 /
düg
;

179 *
fSigmaInvî£
 *
vTøns
.
	`Tøn•o£
(
sﬁuti⁄SVD
.
	`GëV
());

181 i‡(
fDebug
) {

182 
	`Log
(Ë<< "thêSigmaInvî£ " <<
Endl
;

183 
fSigmaInvî£
->
	`Pröt
();

185 
	`Log
(Ë<< "thêªÆ " <<
Endl
;

186 
fSigma
->
	`Invît
();

187 
fSigma
->
	`Pröt
();

189 
Boﬁ_t
 
¥obÀm
 = 
Ál£
;

190 
UI¡_t
 
i
 =0; i< 
fNumP¨ams
; ++i) {

191 
UI¡_t
 
j
 =0; j< 
fNumP¨ams
; ++j) {

192 i‡(
TM©h
::
	`Abs
((
Flﬂt_t
)(*
fSigma
)(
i
,
j
Ë- (Flﬂt_t)(*
fSigmaInvî£
)(i,j)) > 0.01) {

193 
	`Log
(Ë<< "¥obÀm, i"<< 
i
 << " j" << 
j
 << 
Endl
;

194 
	`Log
(Ë<< "Sigma(i,j)"<< (*
fSigma
)(
i
,
j
Ë<< " SigmaInvî£(i,j)" << (*
fSigmaInvî£
)(i,jË<<
Endl
;

195 
	`Log
(Ë<< "Thêdif„ªn˚ i†: " << 
TM©h
::
	`Abs
((
Flﬂt_t
)(*
fSigma
)(
i
,
j
Ë- (Flﬂt_t)(*
fSigmaInvî£
)(i,j)Ë<<
Endl
;

196 
¥obÀm
 = 
åue
;

200 i‡(
¥obÀm
Ë
	`Log
(Ë<< 
kWARNING
 << "ProbÀm wôhÅhêövîsi⁄!" << 
Endl
;

204 
	}
}

211 
Flﬂt_t
 
	gTMVA
::
LDA
::
FSub
(c⁄° 
°d
::
ve˘‹
<Flﬂt_t>& 
x
, 
I¡_t
 
k
)

213 
Flﬂt_t
 
	g¥eÁ˘‹
 = 1.0/(
TM©h
::
TwoPi
()*TM©h::
Sqπ
(
fSigma
->
Dëîmö™t
()));

214 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
m_å™sPo£TimesSigmaInvî£
;

216 
UI¡_t
 
	gj
=0; j < 
	gfNumP¨ams
; ++j) {

217 
Flﬂt_t
 
	gm_ãmp
 = 0;

218 
UI¡_t
 
	gi
=0; i < 
	gfNumP¨ams
; ++i) {

219 
	gm_ãmp
 +(
x
[
i
] - 
fMu
[
k
][i]Ë* (*
fSigmaInvî£
)(
j
,
	gi
);

221 
	gm_å™sPo£TimesSigmaInvî£
.
push_back
(
m_ãmp
);

224 
Flﬂt_t
 
	gexp⁄ít
 = 0.0;

225 
UI¡_t
 
	gi
=0; i< 
	gfNumP¨ams
; ++i) {

226 
	gexp⁄ít
 +
m_å™sPo£TimesSigmaInvî£
[
i
]*(
x
[i] - 
fMu
[
k
][i]);

229 
	gexp⁄ít
 *= -0.5;

231  
¥eÁ˘‹
*
	gTM©h
::
Exp
–
exp⁄ít
 );

239 
Flﬂt_t
 
	gTMVA
::
LDA
::
GëProb
(c⁄° 
°d
::
ve˘‹
<Flﬂt_t>& 
x
, 
I¡_t
 
k
)

241 
Flﬂt_t
 
	gm_numî©‹
 = 
FSub
(
x
,
k
)*
	gfEvítFø˘i⁄
[k];

242 
Flﬂt_t
 
	gm_díomö©‹
 = 
FSub
(
x
,0)*
	gfEvítFø˘i⁄
[0]+FSub(x,1)*fEventFraction[1];

244  
	gm_numî©‹
/
	gm_díomö©‹
;

252 
Flﬂt_t
 
	gTMVA
::
LDA
::
GëLogLikñihood
–c⁄° 
°d
::
ve˘‹
<Flﬂt_t>& 
x
, 
I¡_t
 
k
 )

254  
	gTM©h
::
Log
–
FSub
(
x
,
k
)/FSub(x,!kËË+ TM©h::Log–
fEvítFø˘i⁄
[k]/fEventFraction[!k] );

	@src/LogInterval.cxx

77 
	~"TM©h.h
"

78 
	~"TR™dom3.h
"

79 
	~"ThªadLoˇlSt‹age.h
"

81 
	~"TMVA/LogI¡îvÆ.h
"

82 
	~"TMVA/MsgLoggî.h
"

83 
	~"TMVA/Ty≥s.h
"

85 
CœssImp
(
TMVA
::
LogI¡îvÆ
);

89 
	gTMVA
::
LogI¡îvÆ
::
	$LogI¡îvÆ
–
DoubÀ_t
 
mö
, DoubÀ_à
max
, 
I¡_t
 
nbös
 ) :

90 
TMVA
::
	$I¡îvÆ
(
mö
,
max
,
nbös
)

92 i‡(
mö
<=0Ë
	`Log
(Ë<< 
kFATAL
 << "log¨ôhmi¯öãrvÆ†havêtÿhavêMö>0 !!" << 
Endl
;

93 
	}
}

95 
	gTMVA
::
LogI¡îvÆ
::
	$LogI¡îvÆ
–c⁄° 
LogI¡îvÆ
& 
Ÿhî
 ) :

96 
TMVA
::
	$I¡îvÆ
(
Ÿhî
)

98 
	}
}

103 
TMVA
::
LogI¡îvÆ
::~
	$LogI¡îvÆ
()

105 
	}
}

113 
DoubÀ_t
 
TMVA
::
LogI¡îvÆ
::
	$GëEÀmít
–
I¡_t
 
bö
 ) const

115 i‡(
fNbös
 <= 0) {

116 
	`Log
(Ë<< 
kFATAL
 << "GëEÀmíà⁄ly deföed f‹ dis¸ëêvÆuêLogI¡îvÆs" << 
Endl
;

119 i‡(
bö
 < 0 || bö >
fNbös
) {

120 
	`Log
(Ë<< 
kFATAL
 << "bö " << 
bö
 << " ouào‡ønge: i¡îvÆ *bös* cou¡ from 0Åÿ" << 
fNbös
-1 << 
Endl
;

123  
TM©h
::
	`Exp
(TM©h::
	`Log
(
fMö
)+((
DoubÀ_t
)
bö
Ë/((DoubÀ_t)(
fNbös
-1))*
	`log
(
fMax
/fMin));

124 
	}
}

129 
DoubÀ_t
 
	gTMVA
::
LogI¡îvÆ
::
	$GëSãpSize
–
I¡_t
 
iBö
 ) const

131 i‡(
fNbös
 <= 0) {

132 
	`Log
(Ë<< 
kFATAL
 << "GëEÀmíà⁄ly deföed f‹ dis¸ëêvÆuêLogI¡îvÆs" << 
Endl
;

134 i‡(
iBö
<0) {

135 
	`Log
(Ë<< 
kFATAL
 << "Youásked f‹ iBö=" << 
iBö


136 <<" i¿öãrvÆ ..ánd.. s‹ry, I c™nŸÜëÅhi†h≠≥n.."<<
Endl
;

138  (
	`GëEÀmít
(
TM©h
::
	`Max
(
iBö
,0))-GetElement(TMath::Max(iBin-1,0)));

139 
	}
}

144 
DoubÀ_t
 
	gTMVA
::
LogI¡îvÆ
::
	$GëRndm
–
TR™dom3
& 
∫d
 ) const

146  
TM©h
::
	`Exp
(
∫d
.
	`Rndm
()*(TM©h::
	`Log
(
fMax
/
fMö
) - TMath::Log(fMin)) + TMath::Log(fMin));

147 
	}
}

151 
DoubÀ_t
 
	gTMVA
::
LogI¡îvÆ
::
	$GëWidth
() const

153  
fMax
 - 
fMö
;

154 
	}
}

158 
DoubÀ_t
 
	gTMVA
::
LogI¡îvÆ
::
	$GëMón
() const

160  (
fMax
 + 
fMö
)/2;

161 
	}
}

165 
	gTMVA
::
MsgLoggî
& 
TMVA
::
LogI¡îvÆ
::
	$Log
() const {

166 
	`TTHREAD_TLS_DECL_ARG
(
MsgLoggî
,
loggî
,"LogInterval");

167  
loggî
;

168 
	}
}

	@src/LossFunction.cxx

38 
	~"TMVA/LossFun˘i⁄.h
"

40 
	~"TMVA/MsgLoggî.h
"

42 
	~"Rty≥s.h
"

43 
	~"TM©h.h
"

45 
	~<io°ªam
>

50 
	gTMVA
::
HubîLossFun˘i⁄
::
	$HubîLossFun˘i⁄
(){

51 
fTønsôi⁄Poöt
 = -9999;

52 
fSumOfWeights
 = -9999;

53 
fQu™tûe
 = 0.7;

55 
	}
}

57 
	gTMVA
::
HubîLossFun˘i⁄
::
	$HubîLossFun˘i⁄
(
DoubÀ_t
 
qu™tûe
){

58 
fSumOfWeights
 = -9999;

59 
fTønsôi⁄Poöt
 = -9999;

60 
fQu™tûe
 = 
qu™tûe
;

61 
	}
}

66 
	gTMVA
::
HubîLossFun˘i⁄
::~
	$HubîLossFun˘i⁄
(){

68 
	}
}

74 
TMVA
::
HubîLossFun˘i⁄
::
Inô
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

77 
SëSumOfWeights
(
evs
);

78 
SëTønsôi⁄Poöt
(
evs
);

84 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄
::
CÆcuœãSumOfWeights
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

87 
DoubÀ_t
 
sumOfWeights
 = 0;

88 
UI¡_t
 
	gi
 = 0; i<
	gevs
.
size
(); i++)

89 
	gsumOfWeights
+=
evs
[
i
].
weight
;

91  
	gsumOfWeights
;

97 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄
::
CÆcuœãQu™tûe
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
, DoubÀ_à
whichQu™tûe
, DoubÀ_à
sumOfWeights
, 
boﬁ
 
abs
){

102 if(
	gabs
)

103 
	g°d
::
s‹t
(
evs
.
begö
(),Évs.
íd
(), [](
LossFun˘i⁄EvítInfo
 
a
, LossFun˘i⁄EvítInfÿ
b
){

104  
TM©h
::
Abs
(
a
.
åueVÆue
-a.
¥edi˘edVÆue
Ë< TM©h::Abs(
b
.trueValue-b.predictedValue); });

106 
	g°d
::
s‹t
(
evs
.
begö
(),Évs.
íd
(), [](
LossFun˘i⁄EvítInfo
 
a
, LossFun˘i⁄EvítInfÿ
b
){

107  (
a
.
åueVÆue
-a.
¥edi˘edVÆue
Ë< (
b
.trueValue-b.predictedValue); });

108 
UI¡_t
 
	gi
 = 0;

109 
DoubÀ_t
 
	gãmp
 = 0.0;

110 
	gi
<
	gevs
.
size
()-1 && 
	gãmp
 <
sumOfWeights
*
whichQu™tûe
){

111 
ãmp
 +
evs
[
i
].
weight
;

112 
	gi
++;

116 if(
	gwhichQu™tûe
 =0Ë
i
=0;

119 if(
	gabs
Ë 
	gTM©h
::
Abs
(
evs
[
i
].
åueVÆue
-evs[i].
¥edi˘edVÆue
);

120  
	gevs
[
i
].
	gåueVÆue
-evs[i].
	g¥edi˘edVÆue
;

127 
	gTMVA
::
HubîLossFun˘i⁄
::
SëTønsôi⁄Poöt
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

128 
fTønsôi⁄Poöt
 = 
CÆcuœãQu™tûe
(
evs
, 
fQu™tûe
, 
fSumOfWeights
, 
åue
);

132 if(
	gfTønsôi⁄Poöt
 == 0){

134 
UI¡_t
 
i
=0; 
	gi
<
	gevs
.
size
(); i++){

135 
DoubÀ_t
 
	gªsiduÆ
 = 
TM©h
::
Abs
(
evs
[
i
].
åueVÆue
 -Évs[i].
¥edi˘edVÆue
);

136 if(
	gªsiduÆ
 != 0){

137 
fTønsôi⁄Poöt
 = 
ªsiduÆ
;

144 if(
	gfTønsôi⁄Poöt
 == 0){

154 
	gTMVA
::
HubîLossFun˘i⁄
::
SëSumOfWeights
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

155 
fSumOfWeights
 = 
CÆcuœãSumOfWeights
(
evs
);

161 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄
::
	$CÆcuœãLoss
(
LossFun˘i⁄EvítInfo
& 
e
){

164 if(
fSumOfWeights
 == -9999){

165 
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evs
;

166 
evs
.
	`push_back
(
e
);

168 
	`SëSumOfWeights
(
evs
);

169 
	`SëTønsôi⁄Poöt
(
evs
);

172 
DoubÀ_t
 
ªsiduÆ
 = 
TM©h
::
	`Abs
(
e
.
åueVÆue
 -É.
¥edi˘edVÆue
);

173 
DoubÀ_t
 
loss
 = 0;

175 if(
ªsiduÆ
 <
fTønsôi⁄Poöt
Ë
loss
 = 0.5*residual*residual;

177 
loss
 = 
fQu™tûe
*
ªsiduÆ
 - 0.5*fQuantile*fQuantile;

178  
e
.
weight
*
loss
;

179 
	}
}

184 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄
::
CÆcuœãNëLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

188 
SëSumOfWeights
(
evs
);

189 
SëTønsôi⁄Poöt
(
evs
);

191 
DoubÀ_t
 
	g√éoss
 = 0;

192 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

193 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

194  
	g√éoss
;

202 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄
::
CÆcuœãMónLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

206 
SëSumOfWeights
(
evs
);

207 
SëTønsôi⁄Poöt
(
evs
);

209 
DoubÀ_t
 
	g√éoss
 = 0;

210 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

211 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

212  
	g√éoss
/
	gfSumOfWeights
;

222 
	gTMVA
::
HubîLossFun˘i⁄BDT
::
	$HubîLossFun˘i⁄BDT
(){

223 
	}
}

228 
TMVA
::
HubîLossFun˘i⁄BDT
::
Inô
(
°d
::
m≠
<c⁄° TMVA::
Evít
*, 
LossFun˘i⁄EvítInfo
>& 
evöfom≠
, std::
ve˘‹
<>& 
boo°Weights
){

231 
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evöfovec
;

232 autÿ&
	ge
: 
evöfom≠
){

233 
evöfovec
.
push_back
(
LossFun˘i⁄EvítInfo
(
e
.
£c⁄d
.
åueVÆue
,É.£c⁄d.
¥edi˘edVÆue
,É.
fú°
->
GëWeight
()));

237 
SëSumOfWeights
(
evöfovec
);

238 
DoubÀ_t
 
	gweighãdMedün
 = 
CÆcuœãQu™tûe
(
evöfovec
, 0.5, 
fSumOfWeights
, 
Ál£
);

241 
	gboo°Weights
.
push_back
(
weighãdMedün
);

242 autÿ&
	ge
: 
evöfom≠
 ) {

244 
e
.
£c⁄d
.
¥edi˘edVÆue
 +
weighãdMedün
;

251 
	gTMVA
::
HubîLossFun˘i⁄BDT
::
SëT¨gës
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evs
, std::
m≠
< c⁄° TMVA::Evít*, 
LossFun˘i⁄EvítInfo
 >& 
evöfom≠
){

253 
	g°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evítvec
;

254 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++){

255 
	gevítvec
.
push_back
(
LossFun˘i⁄EvítInfo
(
evöfom≠
[*
e
].
åueVÆue
,Évöfom≠[*e].
¥edi˘edVÆue
, (*e)->
GëWeight
()));

261 
SëSumOfWeights
(
evítvec
);

262 
SëTønsôi⁄Poöt
(
evítvec
);

264 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++) {

265 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
*>(*
e
)->
SëT¨gë
(0,
T¨gë
(
evöfom≠
[*e]));

272 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄BDT
::
	$T¨gë
(
LossFun˘i⁄EvítInfo
& 
e
){

273 
DoubÀ_t
 
ªsiduÆ
 = 
e
.
åueVÆue
 -É.
¥edi˘edVÆue
;

275 if(
TM©h
::
	`Abs
(
ªsiduÆ
Ë<
fTønsôi⁄Poöt
) Ñesidual;

276  
fTønsôi⁄Poöt
*(
ªsiduÆ
<0?-1.0:1.0);

277 
	}
}

283 
DoubÀ_t
 
	gTMVA
::
HubîLossFun˘i⁄BDT
::
Fô
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

289 
DoubÀ_t
 
sumOfWeights
 = 
CÆcuœãSumOfWeights
(
evs
);

290 
DoubÀ_t
 
	gshi·
=0,
	gdiff
= 0;

291 
DoubÀ_t
 
	gªsiduÆMedün
 = 
CÆcuœãQu™tûe
(
evs
,0.5,
sumOfWeights
, 
Ál£
);

292 
UI¡_t
 
	gj
=0;j<
	gevs
.
size
();j++){

293 
DoubÀ_t
 
	gªsiduÆ
 = 
evs
[
j
].
åueVÆue
 -Évs[j].
¥edi˘edVÆue
;

294 
	gdiff
 = 
ªsiduÆ
-
ªsiduÆMedün
;

296 
	gshi·
+=1.0/
evs
.
size
()*((
diff
<0)?-1.0:1.0)*
TM©h
::
Mö
(
fTønsôi⁄Poöt
,
Ábs
(diff));

301  (
	gªsiduÆMedün
 + 
	gshi·
);

317 
DoubÀ_t
 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄
::
	$CÆcuœãLoss
(
LossFun˘i⁄EvítInfo
& 
e
){

318 
DoubÀ_t
 
ªsiduÆ
 = (
e
.
åueVÆue
 -É.
¥edi˘edVÆue
);

319 
DoubÀ_t
 
loss
 = 0;

320 
loss
 = 
ªsiduÆ
*residual;

321  
e
.
weight
*
loss
;

322 
	}
}

327 
DoubÀ_t
 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄
::
CÆcuœãNëLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

328 
DoubÀ_t
 
√éoss
 = 0;

329 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

330 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

331  
	g√éoss
;

339 
DoubÀ_t
 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄
::
CÆcuœãMónLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

340 
DoubÀ_t
 
√éoss
 = 0;

341 
DoubÀ_t
 
	gsumOfWeights
 = 0;

342 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++){

343 
	gsumOfWeights
+=
evs
[
i
].
weight
;

344 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

347  
	g√éoss
/
	gsumOfWeights
;

362 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄BDT
::
Inô
(
°d
::
m≠
<c⁄° 
TMVA
::
Evít
*, 
LossFun˘i⁄EvítInfo
>& 
evöfom≠
, std::
ve˘‹
<>& 
boo°Weights
){

365 
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evöfovec
;

366 autÿ&
	ge
: 
evöfom≠
){

367 
evöfovec
.
push_back
(
LossFun˘i⁄EvítInfo
(
e
.
£c⁄d
.
åueVÆue
,É.£c⁄d.
¥edi˘edVÆue
,É.
fú°
->
GëWeight
()));

371 
DoubÀ_t
 
	gweighãdMón
 = 
Fô
(
evöfovec
);

374 
	gboo°Weights
.
push_back
(
weighãdMón
);

375 autÿ&
	ge
: 
evöfom≠
 ) {

377 
e
.
£c⁄d
.
¥edi˘edVÆue
 +
weighãdMón
;

384 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄BDT
::
SëT¨gës
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evs
, std::
m≠
< c⁄° TMVA::Evít*, 
LossFun˘i⁄EvítInfo
 >& 
evöfom≠
){

386 
	g°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evítvec
;

387 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++){

388 
	gevítvec
.
push_back
(
LossFun˘i⁄EvítInfo
(
evöfom≠
[*
e
].
åueVÆue
,Évöfom≠[*e].
¥edi˘edVÆue
, (*e)->
GëWeight
()));

391 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++) {

392 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
*>(*
e
)->
SëT¨gë
(0,
T¨gë
(
evöfom≠
[*e]));

399 
DoubÀ_t
 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄BDT
::
	$T¨gë
(
LossFun˘i⁄EvítInfo
& 
e
){

400 
DoubÀ_t
 
ªsiduÆ
 = 
e
.
åueVÆue
 -É.
¥edi˘edVÆue
;

403  
ªsiduÆ
;

404 
	}
}

410 
DoubÀ_t
 
	gTMVA
::
Ló°Squ¨esLossFun˘i⁄BDT
::
Fô
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

412 
DoubÀ_t
 
sumOfWeights
 = 0;

413 
DoubÀ_t
 
	gweighãdResiduÆSum
 = 0;

414 
UI¡_t
 
	gj
=0;j<
	gevs
.
size
();j++){

415 
	gsumOfWeights
 +
evs
[
j
].
weight
;

416 
DoubÀ_t
 
	gªsiduÆ
 = 
evs
[
j
].
åueVÆue
 -Évs[j].
¥edi˘edVÆue
;

417 
	gweighãdResiduÆSum
 +
evs
[
j
].
weight
*
ªsiduÆ
;

419 
DoubÀ_t
 
	gweighãdMón
 = 
weighãdResiduÆSum
/
sumOfWeights
;

422  
	gweighãdMón
;

437 
DoubÀ_t
 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄
::
	$CÆcuœãLoss
(
LossFun˘i⁄EvítInfo
& 
e
){

438 
DoubÀ_t
 
ªsiduÆ
 = 
e
.
åueVÆue
 -É.
¥edi˘edVÆue
;

439  
e
.
weight
*
TM©h
::
	`Abs
(
ªsiduÆ
);

440 
	}
}

445 
DoubÀ_t
 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄
::
CÆcuœãNëLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

447 
DoubÀ_t
 
√éoss
 = 0;

448 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

449 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

450  
	g√éoss
;

456 
DoubÀ_t
 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄
::
CÆcuœãMónLoss
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

457 
DoubÀ_t
 
sumOfWeights
 = 0;

458 
DoubÀ_t
 
	g√éoss
 = 0;

459 
UI¡_t
 
	gi
=0; i<
	gevs
.
size
(); i++){

460 
	gsumOfWeights
+=
evs
[
i
].
weight
;

461 
	g√éoss
+=
CÆcuœãLoss
(
evs
[
i
]);

463  
	g√éoss
/
	gsumOfWeights
;

476 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄BDT
::
Inô
(
°d
::
m≠
<c⁄° 
TMVA
::
Evít
*, 
LossFun˘i⁄EvítInfo
>& 
evöfom≠
, std::
ve˘‹
<>& 
boo°Weights
){

479 
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evöfovec
;

480 autÿ&
	ge
: 
evöfom≠
){

481 
evöfovec
.
push_back
(
LossFun˘i⁄EvítInfo
(
e
.
£c⁄d
.
åueVÆue
,É.£c⁄d.
¥edi˘edVÆue
,É.
fú°
->
GëWeight
()));

484 
DoubÀ_t
 
	gweighãdMedün
 = 
Fô
(
evöfovec
);

487 
	gboo°Weights
.
push_back
(
weighãdMedün
);

488 autÿ&
	ge
: 
evöfom≠
 ) {

490 
e
.
£c⁄d
.
¥edi˘edVÆue
 +
weighãdMedün
;

497 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄BDT
::
SëT¨gës
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evs
, std::
m≠
< c⁄° TMVA::Evít*, 
LossFun˘i⁄EvítInfo
 >& 
evöfom≠
){

499 
	g°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
> 
evítvec
;

500 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++){

501 
	gevítvec
.
push_back
(
LossFun˘i⁄EvítInfo
(
evöfom≠
[*
e
].
åueVÆue
,Évöfom≠[*e].
¥edi˘edVÆue
, (*e)->
GëWeight
()));

504 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evs
.
begö
(); 
	ge
!Ûvs.
íd
();e++) {

505 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
*>(*
e
)->
SëT¨gë
(0,
T¨gë
(
evöfom≠
[*e]));

512 
DoubÀ_t
 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄BDT
::
	$T¨gë
(
LossFun˘i⁄EvítInfo
& 
e
){

514 
DoubÀ_t
 
ªsiduÆ
 = 
e
.
åueVÆue
 -É.
¥edi˘edVÆue
;

516  (
ªsiduÆ
<0?-1.0:1.0);

517 
	}
}

523 
DoubÀ_t
 
	gTMVA
::
AbsﬁuãDevüti⁄LossFun˘i⁄BDT
::
Fô
(
°d
::
ve˘‹
<
LossFun˘i⁄EvítInfo
>& 
evs
){

528 
°d
::
s‹t
(
evs
.
begö
(),Évs.
íd
(), [](
LossFun˘i⁄EvítInfo
 
a
, LossFun˘i⁄EvítInfÿ
b
){

529  (
a
.
åueVÆue
-a.
¥edi˘edVÆue
Ë< (
b
.trueValue-b.predictedValue); });

532 
DoubÀ_t
 
	gsumOfWeights
 = 0;

533 
UI¡_t
 
	gj
=0; j<
	gevs
.
size
(); j++)

534 
	gsumOfWeights
+=
evs
[
j
].
weight
;

537 
UI¡_t
 
	gi
 = 0;

538 
DoubÀ_t
 
	gãmp
 = 0.0;

539 
	gi
<
	gevs
.
size
(Ë&& 
	gãmp
 <
sumOfWeights
*0.5){

540 
ãmp
 +
evs
[
i
].
weight
;

541 
	gi
++;

543 i‡(
	gi
 >
evs
.
size
())  0.;

546  
	gevs
[
i
].
	gåueVÆue
-evs[i].
	g¥edi˘edVÆue
;

	@src/MCFitter.cxx

35 
	~"TMVA/MCFôãr.h
"

37 
	~"TMVA/C⁄figuøbÀ.h
"

38 
	~"TMVA/FôãrBa£.h
"

39 
	~"TMVA/GíëicR™ge.h
"

40 
	~"TMVA/I¡îvÆ.h
"

41 
	~"TMVA/MsgLoggî.h
"

42 
	~"TMVA/Timî.h
"

43 
	~"TMVA/Ty≥s.h
"

44 
	~"TR™dom3.h
"

46 
CœssImp
(
TMVA
::
MCFôãr
);

51 
	gTMVA
::
MCFôãr
::MCFôãr–
IFôãrT¨gë
& 
èrgë
,

52 c⁄° 
TSåög
& 
«me
,

53 c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*>& 
ønges
,

54 c⁄° 
TSåög
& 
theO±i⁄
 )

55 : 
TMVA
::
FôãrBa£
–
èrgë
, 
«me
, 
ønges
, 
theO±i⁄
 ),

56 
fSam∂es
( 0 ),

57 
fSigma
 ( 1 ),

58 
	$fSìd
 ( 0 )

60 
	`De˛¨eO±i⁄s
();

61 
	`P¨£O±i⁄s
();

62 
	}
}

67 
	gTMVA
::
MCFôãr
::
	$De˛¨eO±i⁄s
()

69 
	`De˛¨eO±i⁄Ref
–
fSam∂es
 = 100000, "SampleSize", "Number of Monte CarloÉvents inÅoy sample" );

70 
	`De˛¨eO±i⁄Ref
–
fSigma
 = -1.0, "Sigma",

72 
	`De˛¨eO±i⁄Ref
–
fSìd
 = 100, "Seed", "Seed forÅheÑandom generator (0ÅakesÑandom seeds)" );

73 
	}
}

78 
	gTMVA
::
MCFôãr
::
	$SëP¨amëîs
–
I¡_t
 
ßm∂es
 )

80 
fSam∂es
 = 
ßm∂es
;

81 
	}
}

86 
DoubÀ_t
 
	gTMVA
::
MCFôãr
::
Run
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

88 
Log
(Ë<< 
kHEADER
 << "<MCFôãr> Sam∂ög,ÖÀa£ bê∑tõ¡ ..." << 
Endl
;

91 i‡((
	gI¡_t
)
	g∑rs
.
size
(Ë!
GëN∑rs
())

92 
Log
(Ë<< 
kFATAL
 << "<Run> Mismatch inÇumber ofÖarameters: "

93 << 
GëN∑rs
(Ë<< " !" << 
∑rs
.
size
(Ë<< 
Endl
;

96 
Timî
 
timî
–
fSam∂es
, 
GëName
() );

97 i‡(
	gfIPyMaxIãr
Ë*fIPyMaxIã∏
fSam∂es
;

99 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
∑ømëîs
;

100 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
be°P¨amëîs
;

102 
TR™dom3
*
	g∫d
 = 
√w
 TR™dom3–
fSìd
 );

103 
	g∫d
->
Unif‹m
(0.,1.);

105 
	g°d
::
ve˘‹
<
TMVA
::
GíëicR™ge
*> 
∫dR™ges
;

108 
	g°d
::
ve˘‹
< 
TMVA
::
I¡îvÆ
* >::
c⁄°_ôî©‹
 
rIt
;

109 
DoubÀ_t
 
	gvÆ
;

110 
	grIt
 = 
fR™ges
.
begö
();ÑIt<
	gfR™ges
.
íd
();ÑIt++) {

111 
	g∫dR™ges
.
push_back
–
√w
 
TMVA
::
GíëicR™ge
–
∫d
, (*
rIt
) ) );

112 
	gvÆ
 = 
∫dR™ges
.
back
()->
R™dom
();

113 
	g∑ømëîs
.
push_back
–
vÆ
 );

114 
	gbe°P¨amëîs
.
push_back
–
vÆ
 );

117 
	g°d
::
ve˘‹
<
DoubÀ_t
>::
ôî©‹
 
∑rIt
;

118 
	g°d
::
ve˘‹
<
DoubÀ_t
>::
ôî©‹
 
∑rBe°It
;

120 
DoubÀ_t
 
	ge°im©‹
 = 0;

121 
DoubÀ_t
 
	gbe°Fô
 = 0;

124 
I¡_t
 
	gßm∂e
 = 0; sam∂ê< 
	gfSam∂es
; sample++) {

125 i‡(
	gfIPyCuºítIãr
Ë*fIPyCuºítIã∏
ßm∂e
;

126 i‡(
	gfExôFromTøöög
 && *fExitFromTraining) ;

129 
	g∑rIt
 = 
∑ømëîs
.
begö
();

130 i‡(
	gfSigma
 > 0.0) {

131 
	g∑rBe°It
 = 
be°P¨amëîs
.
begö
();

132 
	g°d
::
ve˘‹
<
TMVA
::
GíëicR™ge
*>::
ôî©‹
 
∫dIt
 = 
∫dR™ges
.
begö
(); 
	g∫dIt
<
	g∫dR™ges
.
íd
();ÑndIt++) {

133 (*
	g∑rIt
Ë(*
∫dIt
)->
R™dom
–
kTRUE
, (*
∑rBe°It
), 
fSigma
 );

134 
	g∑rIt
++;

135 
	g∑rBe°It
++;

139 
	g°d
::
ve˘‹
<
TMVA
::
GíëicR™ge
*>::
ôî©‹
 
∫dIt
 = 
∫dR™ges
.
begö
(); 
	g∫dIt
<
	g∫dR™ges
.
íd
();ÑndIt++) {

140 (*
	g∑rIt
Ë(*
∫dIt
)->
R™dom
();

141 
	g∑rIt
++;

146 
	ge°im©‹
 = 
E°im©‹Fun˘i⁄
–
∑ømëîs
 );

149 i‡(
	ge°im©‹
 < 
	gbe°Fô
 || 
	gßm∂e
==0) {

150 
be°Fô
 = 
e°im©‹
;

151 
	gbe°P¨amëîs
.
sw≠
–
∑ømëîs
 );

155 i‡((
	gfSam∂es
<100Ë|| 
	gßm∂e
%
I¡_t
(
fSam∂es
/100.0Ë=0Ë
timî
.
DøwProgªssB¨
–
ßm∂e
 );

157 
	g∑rs
.
sw≠
–
be°P¨amëîs
 );

160 
Log
(Ë<< 
	gkINFO
 << "Eœp£dÅime: " << 
	gtimî
.
GëEœp£dTime
()

161 << " " << 
	gEndl
;

163  
	gbe°Fô
;

	@src/MethodANNBase.cxx

41 
	~"TMVA/MëhodBa£.h
"

43 
	~"TMVA/C⁄figuøbÀ.h
"

44 
	~"TMVA/D©aSëInfo.h
"

45 
	~"TMVA/MëhodANNBa£.h
"

46 
	~"TMVA/MsgLoggî.h
"

47 
	~"TMVA/TNeur⁄.h
"

48 
	~"TMVA/TSy«p£.h
"

49 
	~"TMVA/TA˘iv©i⁄Choo£r.h
"

50 
	~"TMVA/TA˘iv©i⁄T™h.h
"

51 
	~"TMVA/Ty≥s.h
"

52 
	~"TMVA/Toﬁs.h
"

53 
	~"TMVA/TNeur⁄I≈utChoo£r.h
"

54 
	~"TMVA/R™kög.h
"

55 
	~"TMVA/Vîsi⁄.h
"

57 
	~"TSåög.h
"

58 
	~"TTªe.h
"

59 
	~"TDúe˘‹y.h
"

60 
	~"Rio°ªam.h
"

61 
	~"TR™dom3.h
"

62 
	~"TH2F.h
"

63 
	~"TH1.h
"

64 
	~"TM©h.h
"

65 
	~"TM©rixT.h
"

67 
	~<ve˘‹
>

68 
	~<c°dlib
>

69 
	~<°dex˚±
>

70 #i‡
__˝lu•lus
 > 199711L

71 
	~<©omic
>

75 
usög
 
	g°d
::
ve˘‹
;

77 
CœssImp
(
TMVA
::
MëhodANNBa£
);

85 
	gTMVA
::
MëhodANNBa£
::
	$MëhodANNBa£
–c⁄° 
TSåög
& 
jobName
,

86 
Ty≥s
::
EMVA
 
mëhodTy≥
,

87 c⁄° 
TSåög
& 
mëhodTôÀ
,

88 
D©aSëInfo
& 
theD©a
,

89 c⁄° 
TSåög
& 
theO±i⁄
 )

90 : 
TMVA
::
	`MëhodBa£
–
jobName
, 
mëhodTy≥
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

91 , 
	`fE°im©‹
(
kMSE
)

92 , 
	`fU£Reguœt‹
(
kFALSE
)

93 , 
	$fR™domSìd
(0)

95 
	`InôANNBa£
();

97 
	`De˛¨eO±i⁄s
();

98 
	}
}

103 
	gTMVA
::
MëhodANNBa£
::
	$MëhodANNBa£
–
Ty≥s
::
EMVA
 
mëhodTy≥
,

104 
D©aSëInfo
& 
theD©a
,

105 c⁄° 
TSåög
& 
theWeightFûe
)

106 : 
TMVA
::
	`MëhodBa£
–
mëhodTy≥
, 
theD©a
, 
theWeightFûe
)

107 , 
	`fE°im©‹
(
kMSE
)

108 , 
	`fU£Reguœt‹
(
kFALSE
)

109 , 
	$fR™domSìd
(0)

111 
	`InôANNBa£
();

113 
	`De˛¨eO±i⁄s
();

114 
	}
}

128 
	gTMVA
::
MëhodANNBa£
::
	$De˛¨eO±i⁄s
()

130 
	`De˛¨eO±i⁄Ref
–
fNcy˛es
 = 500, "NCycles", "Number ofÅraining cycles" );

131 
	`De˛¨eO±i⁄Ref
–
fLayîS≥c
 = "N,N-1", "HiddenLayers", "Specification of hiddenÜayerárchitecture" );

132 
	`De˛¨eO±i⁄Ref
–
fNeur⁄Ty≥
 = "sigmoid", "NeuronType", "Neuronáctivation functionÅype" );

133 
	`De˛¨eO±i⁄Ref
–
fR™domSìd
 = 1, "RandomSeed", "Random seed for initial synapse weights (0 means unique seed forÉachÑun; default value '1')");

135 
	`De˛¨eO±i⁄Ref
(
fE°im©‹S
="MSE", "EstimatorType",

137 
	`AddPªDefVÆ
(
	`TSåög
("MSE"));

138 
	`AddPªDefVÆ
(
	`TSåög
("CE"));

141 
TA˘iv©i⁄Choo£r
 
aChoo£r
;

142 
°d
::
ve˘‹
<
TSåög
>* 
«mes
 = 
aChoo£r
.
	`GëAŒA˘iv©i⁄Names
();

143 
I¡_t
 
nTy≥s
 = 
«mes
->
	`size
();

144 
I¡_t
 
i
 = 0; i < 
nTy≥s
; i++)

145 
	`AddPªDefVÆ
(
«mes
->
	`©
(
i
));

146 
dñëe
 
«mes
;

148 
	`De˛¨eO±i⁄Ref
(
fNeur⁄I≈utTy≥
="sum", "NeuronInputType","Neuron input functionÅype");

149 
TNeur⁄I≈utChoo£r
 
iChoo£r
;

150 
«mes
 = 
iChoo£r
.
	`GëAŒNeur⁄I≈utNames
();

151 
nTy≥s
 = 
«mes
->
	`size
();

152 
I¡_t
 
i
 = 0; i < 
nTy≥s
; i++Ë
	`AddPªDefVÆ
(
«mes
->
	`©
(i));

153 
dñëe
 
«mes
;

154 
	}
}

160 
	gTMVA
::
MëhodANNBa£
::
	$Pro˚ssO±i⁄s
()

162 i‡–
	`DoRegªssi⁄
(Ë|| 
	`DoMu…i˛ass
()Ë
fE°im©‹S
 = "MSE";

163 
fE°im©‹S
 = "CE" ;

164 i‡(
fE°im©‹S
 ="MSE" ) 
fE°im©‹
 = 
kMSE
;

165 i‡(
fE°im©‹S
 ="CE"Ë
fE°im©‹
 = 
kCE
;

166 
°d
::
ve˘‹
<
I¡_t
>* 
œyout
 = 
	`P¨£LayoutSåög
(
fLayîS≥c
);

167 
	`BuûdNëw‹k
(
œyout
);

168 
dñëe
 
œyout
;

169 
	}
}

175 
	g°d
::
ve˘‹
<
I¡_t
>* 
TMVA
::
MëhodANNBa£
::
	$P¨£LayoutSåög
(
TSåög
 
œyîS≥c
)

177 
°d
::
ve˘‹
<
I¡_t
>* 
œyout
 = 
√w
 std::vector<Int_t>();

178 
œyout
->
	`push_back
((
I¡_t
)
	`GëNv¨
());

179 
œyîS≥c
.
	`Lígth
()>0) {

180 
TSåög
 
sToAdd
="";

181 i‡(
œyîS≥c
.
	`Fú°
(',')<0) {

182 
sToAdd
 = 
œyîS≥c
;

183 
œyîS≥c
 = "";

186 
sToAdd
 = 
	`œyîS≥c
(0,
œyîS≥c
.
	`Fú°
(','));

187 
œyîS≥c
 = 
	`œyîS≥c
÷ayîS≥c.
	`Fú°
(',')+1,œyîS≥c.
	`Lígth
());

189 
nNodes
 = 0;

190 i‡(
sToAdd
.
	`BegösWôh
("n"Ë|| sToAdd.BegösWôh("N")Ë{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`GëNv¨
(); }

191 
nNodes
 +
	`©oi
(
sToAdd
);

192 
œyout
->
	`push_back
(
nNodes
);

194 if–
	`DoRegªssi⁄
() )

195 
œyout
->
	`push_back
–
	`D©aInfo
().
	`GëNT¨gës
() );

196 if–
	`DoMu…i˛ass
() )

197 
œyout
->
	`push_back
–
	`D©aInfo
().
	`GëNCœs£s
() );

199 
œyout
->
	`push_back
(1);

201 
n
 = 0;

202  
°d
::
ve˘‹
<
I¡_t
>::
ôî©‹
 
ô
 = 
œyout
->
	`begö
(); ià!œyout->
	`íd
(); it++ ){

203 
n
++;

206  
œyout
;

207 
	}
}

212 
	gTMVA
::
MëhodANNBa£
::
	$InôANNBa£
()

214 
fNëw‹k
 = 
NULL
;

215 
‰gí
 = 
NULL
;

216 
fA˘iv©i⁄
 = 
NULL
;

217 
fOuçut
 = 
NULL
;

218 
fIdítôy
 = 
NULL
;

219 
fI≈utCÆcuœt‹
 = 
NULL
;

220 
fSy«p£s
 = 
NULL
;

221 
fE°im©‹Hi°Tøö
 = 
NULL
;

222 
fE°im©‹Hi°Te°
 = 
NULL
;

225 
fEpochM⁄Hi°S
.
	`˛ór
();

226 
fEpochM⁄Hi°B
.
	`˛ór
();

227 
fEpochM⁄Hi°W
.
	`˛ór
();

230 
fI≈utLayî
 = 
NULL
;

231 
fOuçutNeur⁄s
.
	`˛ór
();

233 
‰gí
 = 
√w
 
	`TR™dom3
(
fR™domSìd
);

235 
fSy«p£s
 = 
√w
 
	`TObjAºay
();

236 
	}
}

241 
	gTMVA
::
MëhodANNBa£
::~
	$MëhodANNBa£
()

243 
	`DñëeNëw‹k
();

244 
	}
}

249 
	gTMVA
::
MëhodANNBa£
::
	$DñëeNëw‹k
()

251 i‡(
fNëw‹k
 !
NULL
) {

252 
TObjAºay
 *
œyî
;

253 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

254 
I¡_t
 
i
 = 0; i < 
numLayîs
; i++) {

255 
œyî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

256 
	`DñëeNëw‹kLayî
(
œyî
);

258 
dñëe
 
fNëw‹k
;

261 i‡(
‰gí
 !
NULL
Ë
dñëe
 frgen;

262 i‡(
fA˘iv©i⁄
 !
NULL
Ë
dñëe
 fActivation;

263 i‡(
fOuçut
 !
NULL
Ë
dñëe
 fOutput;

264 i‡(
fIdítôy
 !
NULL
Ë
dñëe
 fIdentity;

265 i‡(
fI≈utCÆcuœt‹
 !
NULL
Ë
dñëe
 fInputCalculator;

266 i‡(
fSy«p£s
 !
NULL
Ë
dñëe
 fSynapses;

268 
fNëw‹k
 = 
NULL
;

269 
‰gí
 = 
NULL
;

270 
fA˘iv©i⁄
 = 
NULL
;

271 
fOuçut
 = 
NULL
;

272 
fIdítôy
 = 
NULL
;

273 
fI≈utCÆcuœt‹
 = 
NULL
;

274 
fSy«p£s
 = 
NULL
;

275 
	}
}

280 
	gTMVA
::
MëhodANNBa£
::
	$DñëeNëw‹kLayî
–
TObjAºay
*& 
œyî
 )

282 
TNeur⁄
* 
√ur⁄
;

283 
I¡_t
 
numNeur⁄s
 = 
œyî
->
	`GëE¡rõsFa°
();

284 
I¡_t
 
i
 = 0; i < 
numNeur⁄s
; i++) {

285 
√ur⁄
 = (
TNeur⁄
*)
œyî
->
	`At
(
i
);

286 
√ur⁄
->
	`DñëePªLöks
();

287 
dñëe
 
√ur⁄
;

289 
dñëe
 
œyî
;

290 
	}
}

296 
	gTMVA
::
MëhodANNBa£
::
BuûdNëw‹k
–
°d
::
ve˘‹
<
I¡_t
>* 
œyout
, std::ve˘‹<
DoubÀ_t
>* 
weights
, 
Boﬁ_t
 
‰omFûe
 )

298 i‡(
	gfE°im©‹S
 ="MSE"Ë
fE°im©‹
 = 
kMSE
;

299 i‡(
	gfE°im©‹S
 ="CE"Ë
fE°im©‹
 = 
kCE
;

300 
Log
()<<
	gkWARNING
<<"fE°im©‹="<<
	gfE°im©‹
<<"\tfE°im©‹S="<<
	gfE°im©‹S
<<
	gEndl
;

301 i‡(
	gfE°im©‹
!=
kMSE
 && 
fE°im©‹
!=
kCE
Ë
Log
()<<
kWARNING
<<"E°im©‹Åy≥ un•ecifõd \t"<<
Endl
;

304 
Log
(Ë<< 
	gkHEADER
 << "Buûdög Nëw‹k. " << 
	gEndl
;

306 
DñëeNëw‹k
();

307 
InôANNBa£
();

310 
TA˘iv©i⁄Choo£r
 
	gaChoo£r
;

311 
	gfA˘iv©i⁄
 = 
aChoo£r
.
Cª©eA˘iv©i⁄
(
fNeur⁄Ty≥
);

312 
	gfIdítôy
 = 
aChoo£r
.
Cª©eA˘iv©i⁄
("linear");

313 i‡(
	gfE°im©‹
==
kMSE
Ë
fOuçut
 = 
aChoo£r
.
Cª©eA˘iv©i⁄
("linear");

314 i‡(
	gfE°im©‹
==
kCE
Ë
fOuçut
 = 
aChoo£r
.
Cª©eA˘iv©i⁄
("sigmoid");

315 
TNeur⁄I≈utChoo£r
 
	giChoo£r
;

316 
	gfI≈utCÆcuœt‹
 = 
iChoo£r
.
Cª©eNeur⁄I≈ut
(
fNeur⁄I≈utTy≥
);

318 
	gfNëw‹k
 = 
√w
 
TObjAºay
();

319 
	gfReguœt‹Idx
.
˛ór
();

320 
	gfReguœt‹s
.
˛ór
();

321 
BuûdLayîs
–
œyout
, 
‰omFûe
 );

324 
	gfI≈utLayî
 = (
TObjAºay
*)
fNëw‹k
->
At
(0);

325 
TObjAºay
* 
	gouçutLayî
 = (TObjAºay*)
fNëw‹k
->
At
(fNëw‹k->
GëE¡rõsFa°
()-1);

326 
	gfOuçutNeur⁄s
.
˛ór
();

327 
I¡_t
 
	gi
 = 0; i < 
	gouçutLayî
->
GëE¡rõs
(); i++) {

328 
	gfOuçutNeur⁄s
.
push_back
–(
TNeur⁄
*)
ouçutLayî
->
At
(
i
) );

331 i‡(
	gweights
 =
NULL
Ë
InôWeights
();

332 
F‹˚Weights
(
weights
);

338 
	gTMVA
::
MëhodANNBa£
::
BuûdLayîs
–
°d
::
ve˘‹
<
I¡_t
>* 
œyout
, 
Boﬁ_t
 
‰omFûe
 )

340 
TObjAºay
* 
	gcurLayî
;

341 
TObjAºay
* 
	g¥evLayî
 = 
NULL
;

343 
I¡_t
 
	gnumLayîs
 = 
œyout
->
size
();

345 
I¡_t
 
	gi
 = 0; i < 
	gnumLayîs
; i++) {

346 
	gcurLayî
 = 
√w
 
TObjAºay
();

347 
BuûdLayî
(
œyout
->
©
(
i
), 
curLayî
, 
¥evLayî
, i, 
numLayîs
, 
‰omFûe
);

348 
	g¥evLayî
 = 
curLayî
;

349 
	gfNëw‹k
->
Add
(
curLayî
);

353 
I¡_t
 
	gi
 = 0; i < 
	gnumLayîs
; i++) {

354 
TObjAºay
* 
	gœyî
 = (TObjAºay*)
fNëw‹k
->
At
(
i
);

355 
I¡_t
 
	gnumNeur⁄s
 = 
œyî
->
GëE¡rõsFa°
();

356 i‡(
	gi
!=0 && 
i
!=
numLayîs
-1Ë
fReguœt‹s
.
push_back
(0.);

357 
I¡_t
 
	gj
 = 0; j < 
	gnumNeur⁄s
; j++) {

358 i‡(
	gi
==0Ë
fReguœt‹s
.
push_back
(0.);

359 
TNeur⁄
* 
	g√ur⁄
 = (TNeur⁄*)
œyî
->
At
(
j
);

360 
I¡_t
 
	gnumSy«p£s
 = 
√ur⁄
->
NumPo°Löks
();

361 
I¡_t
 
	gk
 = 0; k < 
	gnumSy«p£s
; k++) {

362 
TSy«p£
* 
	gsy«p£
 = 
√ur⁄
->
Po°LökAt
(
k
);

363 
	gfSy«p£s
->
Add
(
sy«p£
);

364 
	gfReguœt‹Idx
.
push_back
(
fReguœt‹s
.
size
()-1);

374 
	gTMVA
::
MëhodANNBa£
::
	$BuûdLayî
–
I¡_t
 
numNeur⁄s
, 
TObjAºay
* 
curLayî
,

375 
TObjAºay
* 
¥evLayî
, 
I¡_t
 
œyîIndex
,

376 
I¡_t
 
numLayîs
, 
Boﬁ_t
 
‰omFûe
 )

378 
TNeur⁄
* 
√ur⁄
;

379 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

380 i‡(
‰omFûe
 && (
œyîIndex
 !
numLayîs
-1Ë&& (
j
==
numNeur⁄s
-1)){

381 
√ur⁄
 = 
√w
 
	`TNeur⁄
();

382 
√ur⁄
->
	`SëA˘iv©i⁄Eqn
(
fIdítôy
);

383 
√ur⁄
->
	`SëBüsNeur⁄
();

384 
√ur⁄
->
	`F‹˚VÆue
(1.0);

385 
curLayî
->
	`Add
(
√ur⁄
);

388 
√ur⁄
 = 
√w
 
	`TNeur⁄
();

389 
√ur⁄
->
	`SëI≈utCÆcuœt‹
(
fI≈utCÆcuœt‹
);

392 i‡(
œyîIndex
 == 0) {

393 
√ur⁄
->
	`SëA˘iv©i⁄Eqn
(
fIdítôy
);

394 
√ur⁄
->
	`SëI≈utNeur⁄
();

398 i‡(
œyîIndex
 =
numLayîs
-1) {

399 
√ur⁄
->
	`SëOuçutNeur⁄
();

400 
√ur⁄
->
	`SëA˘iv©i⁄Eqn
(
fOuçut
);

403 
√ur⁄
->
	`SëA˘iv©i⁄Eqn
(
fA˘iv©i⁄
);

404 
	`AddPªLöks
(
√ur⁄
, 
¥evLayî
);

407 
curLayî
->
	`Add
(
√ur⁄
);

412 if(!
‰omFûe
){

413 i‡(
œyîIndex
 !
numLayîs
-1) {

414 
√ur⁄
 = 
√w
 
	`TNeur⁄
();

415 
√ur⁄
->
	`SëA˘iv©i⁄Eqn
(
fIdítôy
);

416 
√ur⁄
->
	`SëBüsNeur⁄
();

417 
√ur⁄
->
	`F‹˚VÆue
(1.0);

418 
curLayî
->
	`Add
(
√ur⁄
);

421 
	}
}

426 
	gTMVA
::
MëhodANNBa£
::
	$AddPªLöks
(
TNeur⁄
* 
√ur⁄
, 
TObjAºay
* 
¥evLayî
)

428 
TSy«p£
* 
sy«p£
;

429 
numNeur⁄s
 = 
¥evLayî
->
	`GëE¡rõsFa°
();

430 
TNeur⁄
* 
¥eNeur⁄
;

432 
I¡_t
 
i
 = 0; i < 
numNeur⁄s
; i++) {

433 
¥eNeur⁄
 = (
TNeur⁄
*)
¥evLayî
->
	`At
(
i
);

434 
sy«p£
 = 
√w
 
	`TSy«p£
();

435 
sy«p£
->
	`SëPªNeur⁄
(
¥eNeur⁄
);

436 
sy«p£
->
	`SëPo°Neur⁄
(
√ur⁄
);

437 
¥eNeur⁄
->
	`AddPo°Lök
(
sy«p£
);

438 
√ur⁄
->
	`AddPªLök
(
sy«p£
);

440 
	}
}

445 
	gTMVA
::
MëhodANNBa£
::
	$InôWeights
()

447 
	`PrötMesßge
("Initializing weights");

450 
I¡_t
 
numSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

451 
TSy«p£
* 
sy«p£
;

452 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++) {

453 
sy«p£
 = (
TSy«p£
*)
fSy«p£s
->
	`At
(
i
);

454 
sy«p£
->
	`SëWeight
(4.0*
‰gí
->
	`Rndm
() - 2.0);

456 
	}
}

461 
	gTMVA
::
MëhodANNBa£
::
F‹˚Weights
(
°d
::
ve˘‹
<
DoubÀ_t
>* 
weights
)

463 
PrötMesßge
("Forcing weights");

465 
I¡_t
 
	gnumSy«p£s
 = 
fSy«p£s
->
GëE¡rõsFa°
();

466 
TSy«p£
* 
	gsy«p£
;

467 
I¡_t
 
	gi
 = 0; i < 
	gnumSy«p£s
; i++) {

468 
	gsy«p£
 = (
TSy«p£
*)
fSy«p£s
->
At
(
i
);

469 
	gsy«p£
->
SëWeight
(
weights
->
©
(
i
));

477 
	gTMVA
::
MëhodANNBa£
::
	$F‹˚Nëw‹kI≈uts
–c⁄° 
Evít
* 
ev
, 
I¡_t
 
ign‹eIndex
)

479 
DoubÀ_t
 
x
;

480 
TNeur⁄
* 
√ur⁄
;

483 
UI¡_t
 
j
 = 0; j < 
	`GëNv¨
(); j++) {

485 
x
 = (
j
 !(
UI¡_t
)
ign‹eIndex
)?
ev
->
	`GëVÆue
(j):0;

487 
√ur⁄
 = 
	`GëI≈utNeur⁄
(
j
);

488 
√ur⁄
->
	`F‹˚VÆue
(
x
);

490 
	}
}

495 
	gTMVA
::
MëhodANNBa£
::
	$F‹˚Nëw‹kCÆcuœti⁄s
()

497 
TObjAºay
* 
curLayî
;

498 
TNeur⁄
* 
√ur⁄
;

499 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

500 
I¡_t
 
numNeur⁄s
;

502 
I¡_t
 
i
 = 0; i < 
numLayîs
; i++) {

503 
curLayî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

504 
numNeur⁄s
 = 
curLayî
->
	`GëE¡rõsFa°
();

506 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

507 
√ur⁄
 = (
TNeur⁄
*Ë
curLayî
->
	`At
(
j
);

508 
√ur⁄
->
	`CÆcuœãVÆue
();

509 
√ur⁄
->
	`CÆcuœãA˘iv©i⁄VÆue
();

513 
	}
}

518 
	gTMVA
::
MëhodANNBa£
::
	$PrötMesßge
(
TSåög
 
mesßge
, 
Boﬁ_t
 
f‹˚
) const

520 i‡(
	`Vîbo£
(Ë|| 
	`Debug
(Ë|| 
f‹˚
Ë
	`Log
(Ë<< 
kINFO
 << 
mesßge
 << 
Endl
;

521 
	}
}

526 
	gTMVA
::
MëhodANNBa£
::
	$WaôF‹Keybﬂrd
()

528 
°d
::
°rög
 
dummy
;

529 
	`Log
(Ë<< 
kINFO
 << "***TypeánythingÅo continue (qÅo quit): ";

530 
°d
::
	`gëlöe
(°d::
cö
, 
dummy
);

531 i‡(
dummy
 == "q" || dummy == "Q") {

532 
	`PrötMesßge
( "quit" );

533 
dñëe
 
this
;

534 
	`exô
(0);

536 
	}
}

541 
	gTMVA
::
MëhodANNBa£
::
	$PrötNëw‹k
() const

543 i‡(!
	`Debug
()) ;

545 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

546 
	`PrötMesßge
( "PrintingÇetwork " );

547 
	`Log
(Ë<< 
kINFO
 << "-------------------------------------------------------------------" << 
Endl
;

549 
TObjAºay
* 
curLayî
;

550 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

552 
I¡_t
 
i
 = 0; i < 
numLayîs
; i++) {

554 
curLayî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

555 
I¡_t
 
numNeur⁄s
 = 
curLayî
->
	`GëE¡rõsFa°
();

557 
	`Log
(Ë<< 
kINFO
 << "Layî #" << 
i
 << " (" << 
numNeur⁄s
 << "Çeur⁄s):" << 
Endl
;

558 
	`PrötLayî
–
curLayî
 );

560 
	}
}

565 
	gTMVA
::
MëhodANNBa£
::
	$PrötLayî
(
TObjAºay
* 
œyî
) const

567 
I¡_t
 
numNeur⁄s
 = 
œyî
->
	`GëE¡rõsFa°
();

568 
TNeur⁄
* 
√ur⁄
;

570 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

571 
√ur⁄
 = (
TNeur⁄
*Ë
œyî
->
	`At
(
j
);

572 
	`Log
(Ë<< 
kINFO
 << "\tNeur⁄ #" << 
j
 << " (LöksIn: " << 
√ur⁄
->
	`NumPªLöks
()

573 << " , LöksOut: " << 
√ur⁄
->
	`NumPo°Löks
(Ë<< ")" << 
Endl
;

574 
	`PrötNeur⁄
–
√ur⁄
 );

576 
	}
}

581 
	gTMVA
::
MëhodANNBa£
::
	$PrötNeur⁄
(
TNeur⁄
* 
√ur⁄
) const

583 
	`Log
(Ë<< 
kINFO


584 << "\t\tVÆue:\t" << 
√ur⁄
->
	`GëVÆue
()

585 << "\t\tA˘iv©i⁄: " << 
√ur⁄
->
	`GëA˘iv©i⁄VÆue
()

586 << "\t\tDñè: " << 
√ur⁄
->
	`GëDñè
(Ë<< 
Endl
;

587 
	`Log
(Ë<< 
kINFO
 << "\t\tActivationEquation:\t";

588 
√ur⁄
->
	`PrötA˘iv©i⁄Eqn
();

589 
	`Log
(Ë<< 
kINFO
 << "\t\tLöksIn:" << 
Endl
;

590 
√ur⁄
->
	`PrötPªLöks
();

591 
	`Log
(Ë<< 
kINFO
 << "\t\tLöksOut:" << 
Endl
;

592 
√ur⁄
->
	`PrötPo°Löks
();

593 
	}
}

598 
DoubÀ_t
 
	gTMVA
::
MëhodANNBa£
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

600 
TNeur⁄
* 
√ur⁄
;

602 
TObjAºay
* 
öputLayî
 = (TObjAºay*)
fNëw‹k
->
	`At
(0);

604 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
();

606 
UI¡_t
 
i
 = 0; i < 
	`GëNv¨
(); i++) {

607 
√ur⁄
 = (
TNeur⁄
*)
öputLayî
->
	`At
(
i
);

608 
√ur⁄
->
	`F‹˚VÆue
–
ev
->
	`GëVÆue
(
i
) );

610 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

613 
TObjAºay
* 
ouçutLayî
 = (TObjAºay*)
fNëw‹k
->
	`At
–fNëw‹k->
	`GëE¡rõsFa°
()-1 );

614 
√ur⁄
 = (
TNeur⁄
*)
ouçutLayî
->
	`At
(0);

617 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

619  
√ur⁄
->
	`GëA˘iv©i⁄VÆue
();

620 
	}
}

625 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
> &
TMVA
::
MëhodANNBa£
::
	$GëRegªssi⁄VÆues
()

627 
TNeur⁄
* 
√ur⁄
;

629 
TObjAºay
* 
öputLayî
 = (TObjAºay*)
fNëw‹k
->
	`At
(0);

631 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
();

633 
UI¡_t
 
i
 = 0; i < 
	`GëNv¨
(); i++) {

634 
√ur⁄
 = (
TNeur⁄
*)
öputLayî
->
	`At
(
i
);

635 
√ur⁄
->
	`F‹˚VÆue
–
ev
->
	`GëVÆue
(
i
) );

637 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

640 
TObjAºay
* 
ouçutLayî
 = (TObjAºay*)
fNëw‹k
->
	`At
–fNëw‹k->
	`GëE¡rõsFa°
()-1 );

642 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
ËfRegªssi⁄Rëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

643 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

645 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ev
);

646 
UI¡_t
 
¡gts
 = 
ouçutLayî
->
	`GëE¡rõsFa°
();

647 
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; itgt++) {

648 
evT
->
	`SëT¨gë
(
ôgt
,((
TNeur⁄
*)
ouçutLayî
->
	`At
(ôgt))->
	`GëA˘iv©i⁄VÆue
());

651 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

652 
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; itgt++) {

653 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
–
evT2
->
	`GëT¨gë
(
ôgt
) );

656 
dñëe
 
evT
;

658  *
fRegªssi⁄Rëu∫VÆ
;

659 
	}
}

664 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
> &
TMVA
::
MëhodANNBa£
::
	$GëMu…i˛assVÆues
()

666 
TNeur⁄
* 
√ur⁄
;

668 
TObjAºay
* 
öputLayî
 = (TObjAºay*)
fNëw‹k
->
	`At
(0);

670 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
();

672 
UI¡_t
 
i
 = 0; i < 
	`GëNv¨
(); i++) {

673 
√ur⁄
 = (
TNeur⁄
*)
öputLayî
->
	`At
(
i
);

674 
√ur⁄
->
	`F‹˚VÆue
–
ev
->
	`GëVÆue
(
i
) );

676 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

680 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
ËfMu…i˛assRëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

681 
fMu…i˛assRëu∫VÆ
->
	`˛ór
();

682 
°d
::
ve˘‹
<
Flﬂt_t
> 
ãmp
;

684 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

685 
UI¡_t
 
i˛s
 = 0; i˛†< 
nCœs£s
; icls++) {

686 
ãmp
.
	`push_back
(
	`GëOuçutNeur⁄
–
i˛s
 )->
	`GëA˘iv©i⁄VÆue
() );

689 
UI¡_t
 
iCœss
=0; iCœss<
nCœs£s
; iClass++){

690 
DoubÀ_t
 
n‹m
 = 0.0;

691 
UI¡_t
 
j
=0;j<
nCœs£s
;j++){

692 if(
iCœss
!=
j
)

693 
n‹m
+=
	`exp
(
ãmp
[
j
]-ãmp[
iCœss
]);

695 (*
fMu…i˛assRëu∫VÆ
).
	`push_back
(1.0/(1.0+
n‹m
));

700  *
fMu…i˛assRëu∫VÆ
;

701 
	}
}

707 
	gTMVA
::
MëhodANNBa£
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

709 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

710 * 
wght
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
∑ª¡
, 0, "Weights");

711 * 
xmlLayout
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
wght
, 0, "Layout");

712 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
xmlLayout
, 0, "NLayîs", gToﬁs().
	`SåögFromI¡
(
fNëw‹k
->
	`GëE¡rõsFa°
()) );

713 
TSåög
 
weights
 = "";

714 
I¡_t
 
i
 = 0; i < 
numLayîs
; i++) {

715 
TObjAºay
* 
œyî
 = (TObjAºay*)
fNëw‹k
->
	`At
(
i
);

716 
I¡_t
 
numNeur⁄s
 = 
œyî
->
	`GëE¡rõsFa°
();

717 * 
œyîxml
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
xmlLayout
, 0, "Layer");

718 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
œyîxml
, 0, "Index", gToﬁs().
	`SåögFromI¡
(
i
) );

719 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
œyîxml
, 0, "NNeur⁄s", gToﬁs().
	`SåögFromI¡
(
numNeur⁄s
) );

720 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

721 
TNeur⁄
* 
√ur⁄
 = (TNeur⁄*)
œyî
->
	`At
(
j
);

722 
I¡_t
 
numSy«p£s
 = 
√ur⁄
->
	`NumPo°Löks
();

723 * 
√ur⁄xml
 = 
	`gToﬁs
().
	`AddChûd
(
œyîxml
, "Neuron");

724 
	`gToﬁs
().
	`AddAâr
(
√ur⁄xml
, "NSy«p£s", gToﬁs().
	`SåögFromI¡
(
numSy«p£s
) );

725 if(
numSy«p£s
==0) ;

726 
°d
::
°rög°ªam
 
	`s
("");

727 
s
.
	`¥ecisi⁄
( 16 );

728 
I¡_t
 
k
 = 0; k < 
numSy«p£s
; k++) {

729 
TSy«p£
* 
sy«p£
 = 
√ur⁄
->
	`Po°LökAt
(
k
);

730 
s
 << 
°d
::
scõ¡ific
 << 
sy«p£
->
	`GëWeight
() << " ";

732 
	`gToﬁs
().
	`AddRawLöe
–
√ur⁄xml
, 
s
.
	`°r
().
	`c_°r
() );

737 if–
fInvHessün
.
	`GëNcﬁs
()>0 ){

738 * 
xmlInvHessün
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
wght
, 0, "InverseHessian");

741 
I¡_t
 
nEÀmíts
 = 
fInvHessün
.
	`GëNoEÀmíts
();

742 
I¡_t
 
nRows
 = 
fInvHessün
.
	`GëNrows
();

743 
I¡_t
 
nCﬁs
 = 
fInvHessün
.
	`GëNcﬁs
();

744 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
xmlInvHessün
, 0, "NEÀmíts", gToﬁs().
	`SåögFromI¡
(
nEÀmíts
) );

745 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
xmlInvHessün
, 0, "NRows", gToﬁs().
	`SåögFromI¡
(
nRows
) );

746 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
xmlInvHessün
, 0, "NCﬁs", gToﬁs().
	`SåögFromI¡
(
nCﬁs
) );

749 
DoubÀ_t
* 
ñemíts
 = 
√w
 DoubÀ_t[
nEÀmíts
+10];

750 
fInvHessün
.
	`GëM©rix2Aºay
–
ñemíts
 );

753 
I¡_t
 
ödex
 = 0;

754  
I¡_t
 
row
 = 0;Ñow < 
nRows
; ++row ){

755 * 
xmlRow
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
xmlInvHessün
, 0, "Row");

756 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
xmlRow
, 0, "Index", gToﬁs().
	`SåögFromI¡
(
row
) );

759 
°d
::
°rög°ªam
 
	`s
("");

760 
s
.
	`¥ecisi⁄
( 16 );

761  
I¡_t
 
cﬁ
 = 0; cﬁ < 
nCﬁs
; ++col ){

762 
s
 << 
°d
::
scõ¡ific
 << (*(
ñemíts
+
ödex
)) << " ";

763 ++
ödex
;

765 
	`gToﬁs
().
	`xmÀngöe
().
	`AddRawLöe
–
xmlRow
, 
s
.
	`°r
().
	`c_°r
() );

767 
dñëe
[] 
ñemíts
;

769 
	}
}

775 
	gTMVA
::
MëhodANNBa£
::
	$RódWeightsFromXML
–* 
wghäode
 )

778 
Boﬁ_t
 
‰omFûe
 = 
kTRUE
;

779 
°d
::
ve˘‹
<
I¡_t
>* 
œyout
 = 
√w
 std::vector<Int_t>();

781 * 
xmlLayout
 = 
NULL
;

782 
xmlLayout
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
, "Layout");

783 if–!
xmlLayout
 )

784 
xmlLayout
 = 
wghäode
;

786 
UI¡_t
 
nLayîs
;

787 
	`gToﬁs
().
	`RódAâr
–
xmlLayout
, "NLayîs", 
nLayîs
 );

788 
œyout
->
	`ªsize
–
nLayîs
 );

790 * 
ch
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëChûd
(
xmlLayout
);

791 
UI¡_t
 
ödex
;

792 
UI¡_t
 
nNeur⁄s
;

793 
ch
) {

794 
	`gToﬁs
().
	`RódAâr
–
ch
, "Index", 
ödex
 );

795 
	`gToﬁs
().
	`RódAâr
–
ch
, "NNeur⁄s", 
nNeur⁄s
 );

796 
œyout
->
	`©
(
ödex
Ë
nNeur⁄s
;

797 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

800 
	`BuûdNëw‹k
–
œyout
, 
NULL
, 
‰omFûe
 );

803 i‡(
	`GëTøöögTMVAVîsi⁄Code
(Ë< 
	`TMVA_VERSION
(4,2,1Ë&& 
fA˘iv©i⁄
->
	`GëEx¥essi⁄
().
	`C⁄èös
("tanh")){

804 
TA˘iv©i⁄T™h
* 
a˘
 = 
dy«mic_ˇ°
<TA˘iv©i⁄T™h*>–
fA˘iv©i⁄
 );

805 i‡(
a˘
Ëa˘->
	`SëSlow
();

809 
UI¡_t
 
nSyn
;

810 
Flﬂt_t
 
weight
;

811 
ch
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëChûd
(
xmlLayout
);

812 
UI¡_t
 
iLayî
 = 0;

813 
ch
) {

814 
TObjAºay
* 
œyî
 = (TObjAºay*)
fNëw‹k
->
	`At
(
iLayî
);

815 
	`gToﬁs
().
	`RódAâr
–
ch
, "Index", 
ödex
 );

816 
	`gToﬁs
().
	`RódAâr
–
ch
, "NNeur⁄s", 
nNeur⁄s
 );

818 * 
nodeN
 = 
	`gToﬁs
().
	`GëChûd
(
ch
);

819 
UI¡_t
 
iNeur⁄
 = 0;

820  
nodeN
 ){

821 
TNeur⁄
 *
√ur⁄
 = (TNeur⁄*)
œyî
->
	`At
(
iNeur⁄
);

822 
	`gToﬁs
().
	`RódAâr
–
nodeN
, "NSy«p£s", 
nSyn
 );

823 if–
nSyn
 > 0 ){

824 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
nodeN
);

825 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

826 
UI¡_t
 
iSyn
 = 0; iSyn<
nSyn
; iSyn++) {

828 
TSy«p£
* 
sy«p£
 = 
√ur⁄
->
	`Po°LökAt
(
iSyn
);

829 
s
 >> 
weight
;

831 
sy«p£
->
	`SëWeight
(
weight
);

834 
nodeN
 = 
	`gToﬁs
().
	`GëNextChûd
(nodeN);

835 
iNeur⁄
++;

837 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

838 
iLayî
++;

841 
dñëe
 
œyout
;

843 * 
xmlInvHessün
 = 
NULL
;

844 
xmlInvHessün
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
, "InverseHessian");

845 if–!
xmlInvHessün
 )

849 
fU£Reguœt‹
 = 
kTRUE
;

851 
I¡_t
 
nEÀmíts
 = 0;

852 
I¡_t
 
nRows
 = 0;

853 
I¡_t
 
nCﬁs
 = 0;

854 
	`gToﬁs
().
	`RódAâr
–
xmlInvHessün
, "NEÀmíts", 
nEÀmíts
 );

855 
	`gToﬁs
().
	`RódAâr
–
xmlInvHessün
, "NRows", 
nRows
 );

856 
	`gToﬁs
().
	`RódAâr
–
xmlInvHessün
, "NCﬁs", 
nCﬁs
 );

859 
fInvHessün
.
	`ResizeTo
–
nRows
, 
nCﬁs
 );

862 
DoubÀ_t
* 
ñemíts
;

863 i‡(
nEÀmíts
 > 
°d
::
numîic_limôs
<>::
	`max
()-100){

864 
	`Log
(Ë<< 
kFATAL
 << "youÅrõdÅÿªadá hessü¿m©rix wôh " << 
nEÀmíts
 << "ÉÀmíts, -->Åoÿœrge, gues†s.th. wíàwr⁄gÑódög fromÅhêweighàfûe" << 
Endl
;

867 
ñemíts
 = 
√w
 
DoubÀ_t
[
nEÀmíts
+10];

872 * 
xmlRow
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëChûd
(
xmlInvHessün
);

873 
I¡_t
 
row
 = 0;

874 
ödex
 = 0;

875 
xmlRow
) {

876 
	`gToﬁs
().
	`RódAâr
–
xmlRow
, "Index", 
row
 );

878 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëNodeC⁄ã¡
(
xmlRow
);

880 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

881 
I¡_t
 
iCﬁ
 = 0; iCﬁ<
nCﬁs
; iCol++) {

882 
s
 >> (*(
ñemíts
+
ödex
));

883 ++
ödex
;

885 
xmlRow
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëNext
(xmlRow);

886 ++
row
;

889 
fInvHessün
.
	`SëM©rixAºay
–
ñemíts
 );

891 
dñëe
[] 
ñemíts
;

892 
	}
}

897 
	gTMVA
::
MëhodANNBa£
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
 & 
i°r
)

901 
TSåög
 
dummy
;

904 
DoubÀ_t
 
weight
;

905 
°d
::
ve˘‹
<
DoubÀ_t
>* 
weights
 = 
√w
 std::vector<Double_t>();

906 
i°r
>> 
dummy
;

907 
i°r
>> 
dummy
 >> 
weight
Ë
weights
->
	`push_back
(weight);

909 
	`F‹˚Weights
(
weights
);

912 
dñëe
 
weights
;

913 
	}
}

918 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodANNBa£
::
	$Cª©eR™kög
()

921 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Importance" );

923 
TNeur⁄
* 
√ur⁄
;

924 
TSy«p£
* 
sy«p£
;

925 
DoubÀ_t
 
imp‹èn˚
, 
avgVÆ
;

926 
TSåög
 
v¨Name
;

928 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++) {

930 
√ur⁄
 = 
	`GëI≈utNeur⁄
(
iv¨
);

931 
I¡_t
 
numSy«p£s
 = 
√ur⁄
->
	`NumPo°Löks
();

932 
imp‹èn˚
 = 0;

933 
v¨Name
 = 
	`GëI≈utV¨
(
iv¨
);

936 
DoubÀ_t
 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
;

937 
	`Sèti°ics
–
TMVA
::
Ty≥s
::
kTøöög
, 
v¨Name
,

938 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
 );

940 
avgVÆ
 = (
TM©h
::
	`Abs
(
mónS
Ë+ TM©h::Abs(
mónB
))/2.0;

941 
móƒms
 = (
TM©h
::
	`Abs
(
rmsS
Ë+ TM©h::Abs(
rmsB
))/2.;

942 i‡(
avgVÆ
<
móƒms
)ávgVal = meanrms;

943 i‡(
	`IsN‹mÆi£d
()Ë
avgVÆ
 = 0.5*(1 + 
	`gToﬁs
().
	`N‹mV¨übÀ
–avgVÆ, 
	`GëXmö
–
iv¨
 ), 
	`GëXmax
( ivar )));

945 
I¡_t
 
j
 = 0; j < 
numSy«p£s
; j++) {

946 
sy«p£
 = 
√ur⁄
->
	`Po°LökAt
(
j
);

947 
imp‹èn˚
 +
sy«p£
->
	`GëWeight
() * synapse->GetWeight();

950 
imp‹èn˚
 *
avgVÆ
 *ávgVal;

952 
fR™kög
->
	`AddR™k
–
	`R™k
–
v¨Name
, 
imp‹èn˚
 ) );

955  
fR™kög
;

956 
	}
}

960 
	gTMVA
::
MëhodANNBa£
::
Cª©eWeightM⁄ô‹ögHi°s
–c⁄° 
TSåög
& 
bulk«me
,

961 
°d
::
ve˘‹
<
TH1
*>* 
hv
 ) const

963 
TH2F
* 
hi°
;

964 
I¡_t
 
	gnumLayîs
 = 
fNëw‹k
->
GëE¡rõsFa°
();

966 
I¡_t
 
	gi
 = 0; i < 
	gnumLayîs
-1; i++) {

968 
TObjAºay
* 
	gœyî1
 = (TObjAºay*)
fNëw‹k
->
At
(
i
);

969 
TObjAºay
* 
	gœyî2
 = (TObjAºay*)
fNëw‹k
->
At
(
i
+1);

970 
I¡_t
 
	gnumNeur⁄s1
 = 
œyî1
->
GëE¡rõsFa°
();

971 
I¡_t
 
	gnumNeur⁄s2
 = 
œyî2
->
GëE¡rõsFa°
();

973 
TSåög
 
	g«me
 = 
F‹m
("%s%i%i", 
bulk«me
.
D©a
(), 
i
, i+1);

974 
	ghi°
 = 
√w
 
TH2F
(
«me
 + "",Çame + "",

975 
numNeur⁄s1
, 0,ÇumNeur⁄s1, 
numNeur⁄s2
, 0,ÇumNeurons2);

977 
I¡_t
 
	gj
 = 0; j < 
	gnumNeur⁄s1
; j++) {

979 
TNeur⁄
* 
	g√ur⁄
 = (TNeur⁄*)
œyî1
->
At
(
j
);

980 
I¡_t
 
	gnumSy«p£s
 = 
√ur⁄
->
NumPo°Löks
();

982 
I¡_t
 
	gk
 = 0; k < 
	gnumSy«p£s
; k++) {

984 
TSy«p£
* 
	gsy«p£
 = 
√ur⁄
->
Po°LökAt
(
k
);

985 
	ghi°
->
SëBöC⁄ã¡
(
j
+1, 
k
+1, 
sy«p£
->
GëWeight
());

990 i‡(
	ghv
Ëhv->
push_back
–
hi°
 );

992 
	ghi°
->
Wrôe
();

993 
dñëe
 
	ghi°
;

1001 
	gTMVA
::
MëhodANNBa£
::
	$WrôeM⁄ô‹ögHi°osToFûe
() const

1003 
	`PrötMesßge
(
	`F‹m
("Wrôê•ecü»hi°o†tÿfûe: %s", 
	`Ba£Dú
()->
	`GëP©h
()), 
kTRUE
);

1005 i‡(
fE°im©‹Hi°Tøö
ËfE°im©‹Hi°Tøö->
	`Wrôe
();

1006 i‡(
fE°im©‹Hi°Te°
 ) fE°im©‹Hi°Te° ->
	`Wrôe
();

1009 
	`Cª©eWeightM⁄ô‹ögHi°s
( "weights_hist" );

1012 #i‡
__˝lu•lus
 > 199711L

1013 
°d
::
©omic
<> 
ïochM⁄ô‹ögDúe˘‹yNumbî
{0};

1015 
ïochM⁄ô‹ögDúe˘‹yNumbî
 = 0;

1017 
ïochVÆ
 = 
ïochM⁄ô‹ögDúe˘‹yNumbî
++;

1018 
TDúe˘‹y
* 
ïochdú
 = 
NULL
;

1019 if–
ïochVÆ
 == 0 )

1020 
ïochdú
 = 
	`Ba£Dú
()->
	`mkdú
( "EpochMonitoring" );

1022 
ïochdú
 = 
	`Ba£Dú
()->
	`mkdú
–
	`F‹m
("EpochM⁄ô‹ög_%4d",
ïochVÆ
) );

1024 
ïochdú
->
	`cd
();

1025 
°d
::
ve˘‹
<
TH1
*>::
c⁄°_ôî©‹
 
ô
 = 
fEpochM⁄Hi°S
.
	`begö
(); ià!fEpochM⁄Hi°S.
	`íd
(); it++) {

1026 (*
ô
)->
	`Wrôe
();

1027 
	`dñëe
 (*
ô
);

1029 
°d
::
ve˘‹
<
TH1
*>::
c⁄°_ôî©‹
 
ô
 = 
fEpochM⁄Hi°B
.
	`begö
(); ià!fEpochM⁄Hi°B.
	`íd
(); it++) {

1030 (*
ô
)->
	`Wrôe
();

1031 
	`dñëe
 (*
ô
);

1033 
°d
::
ve˘‹
<
TH1
*>::
c⁄°_ôî©‹
 
ô
 = 
fEpochM⁄Hi°W
.
	`begö
(); ià!fEpochM⁄Hi°W.
	`íd
(); it++) {

1034 (*
ô
)->
	`Wrôe
();

1035 
	`dñëe
 (*
ô
);

1037 
	`Ba£Dú
()->
	`cd
();

1038 
	}
}

1043 
	gTMVA
::
MëhodANNBa£
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

1045 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõs
();

1047 
fout
 << 
°d
::
ídl
;

1048 
fout
 << " doubÀ A˘iv©i⁄Fnc(doubÀ xËc⁄°;" << 
°d
::
ídl
;

1049 
fout
 << " doubÀ OuçutA˘iv©i⁄Fnc(doubÀ xËc⁄°;" << 
°d
::
ídl
;

1050 
fout
 << 
°d
::
ídl
;

1051 
fout
 << " i¡ fLayîs;" << 
°d
::
ídl
;

1052 
fout
 << " i¡ fLayîSize["<<
numLayîs
<<"];" << 
°d
::
ídl
;

1053 
numNodesFrom
 = -1;

1054 
I¡_t
 
lIdx
 = 0;ÜIdx < 
numLayîs
;ÜIdx++) {

1055 
numNodesTo
 = ((
TObjAºay
*)
fNëw‹k
->
	`At
(
lIdx
))->
	`GëE¡rõs
();

1056 i‡(
numNodesFrom
<0Ë{ÇumNodesFrom=
numNodesTo
; ; }

1057 
fout
 << " doubÀ fWeightM©rix" << 
lIdx
-1 << "to" <<ÜIdx << "[" << 
numNodesTo
 << "][" << 
numNodesFrom
 << "];";

1058 
fout
 << " // weighàm©rix fromÜayî " << 
lIdx
-1 << "Åÿ" <<ÜIdx << 
°d
::
ídl
;

1059 
numNodesFrom
 = 
numNodesTo
;

1061 
fout
 << 
°d
::
ídl
;

1062 
fout
 << "};" << 
°d
::
ídl
;

1064 
fout
 << 
°d
::
ídl
;

1066 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize()" << 
°d
::
ídl
;

1067 
fout
 << "{" << 
°d
::
ídl
;

1068 
fout
 << " // buûdÇëw‹k såu˘uª" << 
°d
::
ídl
;

1069 
fout
 << " fLayî†" << 
numLayîs
 << ";" << 
°d
::
ídl
;

1070 
I¡_t
 
lIdx
 = 0;ÜIdx < 
numLayîs
;ÜIdx++) {

1071 
TObjAºay
* 
œyî
 = (TObjAºay*)
fNëw‹k
->
	`At
(
lIdx
);

1072 
numNodes
 = 
œyî
->
	`GëE¡rõs
();

1073 
fout
 << " fLayîSize[" << 
lIdx
 << "] = " << 
numNodes
 << ";" << 
°d
::
ídl
;

1076 
I¡_t
 
i
 = 0; i < 
numLayîs
-1; i++) {

1077 
fout
 << " // weighàm©rix fromÜayî " << 
i
 << "Åÿ" << i+1 << 
°d
::
ídl
;

1078 
TObjAºay
* 
œyî
 = (TObjAºay*)
fNëw‹k
->
	`At
(
i
);

1079 
I¡_t
 
numNeur⁄s
 = 
œyî
->
	`GëE¡rõsFa°
();

1080 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

1081 
TNeur⁄
* 
√ur⁄
 = (TNeur⁄*)
œyî
->
	`At
(
j
);

1082 
I¡_t
 
numSy«p£s
 = 
√ur⁄
->
	`NumPo°Löks
();

1083 
I¡_t
 
k
 = 0; k < 
numSy«p£s
; k++) {

1084 
TSy«p£
* 
sy«p£
 = 
√ur⁄
->
	`Po°LökAt
(
k
);

1085 
fout
 << " fWeightM©rix" << 
i
 << "to" << i+1 << "[" << 
k
 << "][" << 
j
 << "] = " << 
sy«p£
->
	`GëWeight
(Ë<< ";" << 
°d
::
ídl
;

1090 
fout
 << "}" << 
°d
::
ídl
;

1091 
fout
 << 
°d
::
ídl
;

1094 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

1095 
fout
 << "{" << 
°d
::
ídl
;

1096 
fout
 << " i‡(öputVÆues.size(Ë!(unsig√d i¡)fLayîSize[0]-1Ë{" << 
°d
::
ídl
;

1097 
fout
 << " std::couà<< \"I≈uàve˘‹Çìd†tÿbêo‡sizê\" << fLayîSize[0]-1 << std::ídl;" << 
°d
::
ídl
;

1098 
fout
 << "Ñëu∫ 0;" << 
°d
::
ídl
;

1099 
fout
 << " }" << 
°d
::
ídl
;

1100 
fout
 << 
°d
::
ídl
;

1101 
I¡_t
 
lIdx
 = 0;ÜIdx < 
numLayîs
;ÜIdx++) {

1102 
TObjAºay
 *
œyî
 = (TObjAºay *)
fNëw‹k
->
	`At
(
lIdx
);

1103 
numNodes
 = 
œyî
->
	`GëE¡rõs
();

1104 
fout
 << " std::¨øy<doubÀ, " << 
numNodes
 << "> fWeights" << 
lIdx
 << " {{}};" << 
°d
::
ídl
;

1106 
I¡_t
 
lIdx
 = 0;ÜIdx < 
numLayîs
 - 1;ÜIdx++) {

1107 
fout
 << " fWeights" << 
lIdx
 << ".back(Ë1.;" << 
°d
::
ídl
;

1109 
fout
 << 
°d
::
ídl
;

1110 
fout
 << " f‹ (öài=0; i<fLayîSize[0]-1; i++)" << 
°d
::
ídl
;

1111 
fout
 << " fWeights0[i]=öputVÆues[i];" << 
°d
::
ídl
;

1112 
fout
 << 
°d
::
ídl
;

1113 
I¡_t
 
i
 = 0; i < 
numLayîs
-1; i++) {

1114 
fout
 << " //Üayî " << 
i
 << "Åÿ" << i+1 << 
°d
::
ídl
;

1115 i‡(
i
+1 =
numLayîs
-1) {

1116 
fout
 << " f‹ (öào=0; o<fLayîSize[" << 
i
+1 << "]; o++Ë{" << 
°d
::
ídl
;

1119 
fout
 << " f‹ (öào=0; o<fLayîSize[" << 
i
+1 << "]-1; o++Ë{" << 
°d
::
ídl
;

1121 
fout
 << " f‹ (öài=0; i<fLayîSize[" << 
i
 << "]; i++Ë{" << 
°d
::
ídl
;

1122 
fout
 << " doubÀ i≈utVÆ = fWeightM©rix" << 
i
 << "to" << i + 1 << "[o][i] * fWeights" << i << "[i];"

1123 << 
°d
::
ídl
;

1125 i‡–
fNeur⁄I≈utTy≥
 == "sum") {

1126 
fout
 << " fWeights" << 
i
 + 1 << "[o] +öputVÆ;" << 
°d
::
ídl
;

1128 i‡–
fNeur⁄I≈utTy≥
 == "sqsum") {

1129 
fout
 << " fWeights" << 
i
 + 1 << "[o] +öputVÆ*öputVÆ;" << 
°d
::
ídl
;

1132 
fout
 << " fWeights" << 
i
 + 1 << "[o] +Ábs(öputVÆ);" << 
°d
::
ídl
;

1134 
fout
 << " } //Üo› ovî i" << 
°d
::
ídl
;

1135 i‡(
i
+1 !
numLayîs
-1)

1136 
fout
 << " fWeights" << 
i
 + 1 << "[o] = A˘iv©i⁄Fnc(fWeights" << i + 1 << "[o]);" << 
°d
::
ídl
;

1138 
fout
 << " fWeights" << 
i
 + 1 << "[o] = OutputActivationFnc(fWeights" << i + 1 << "[o]);"

1139 << 
°d
::
ídl
;

1140 
fout
 << " } //Üo› ovî o" << 
°d
::
ídl
;

1142 
fout
 << 
°d
::
ídl
;

1143 
fout
 << "Ñëu∫ fWeights" << 
numLayîs
 - 1 << "[0];" << 
°d
::
ídl
;

1144 
fout
 << "}" << 
°d
::
ídl
;

1146 
fout
 << 
°d
::
ídl
;

1147 
TSåög
 
‚cName
 = 
˛assName
+"::ActivationFnc";

1148 
fA˘iv©i⁄
->
	`MakeFun˘i⁄
(
fout
, 
‚cName
);

1149 
‚cName
 = 
˛assName
+"::OutputActivationFnc";

1150 
fOuçut
->
	`MakeFun˘i⁄
(
fout
, 
‚cName
);

1152 
fout
 << " " << 
°d
::
ídl
;

1153 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

1154 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

1155 
fout
 << "{" << 
°d
::
ídl
;

1156 
fout
 << "}" << 
°d
::
ídl
;

1157 
	}
}

1162 
Boﬁ_t
 
	gTMVA
::
MëhodANNBa£
::
	$Debug
() const

1164  
fgDEBUG
;

1165 
	}
}

	@src/MethodBDT.cxx

110 
	~"TMVA/MëhodBDT.h
"

112 
	~"TMVA/BDTEvítWøµî.h
"

113 
	~"TMVA/Bö¨ySórchTªe.h
"

114 
	~"TMVA/CœssifõrFa˘‹y.h
"

115 
	~"TMVA/C⁄figuøbÀ.h
"

116 
	~"TMVA/CrossE¡r›y.h
"

117 
	~"TMVA/Decisi⁄Tªe.h
"

118 
	~"TMVA/D©aSë.h
"

119 
	~"TMVA/GöiIndex.h
"

120 
	~"TMVA/GöiIndexWôhL≠œ˚.h
"

121 
	~"TMVA/I¡îvÆ.h
"

122 
	~"TMVA/IMëhod.h
"

123 
	~"TMVA/LogI¡îvÆ.h
"

124 
	~"TMVA/MëhodBa£.h
"

125 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

126 
	~"TMVA/MsgLoggî.h
"

127 
	~"TMVA/O±imizeC⁄figP¨amëîs.h
"

128 
	~"TMVA/PDF.h
"

129 
	~"TMVA/R™kög.h
"

130 
	~"TMVA/Resu…s.h
"

131 
	~"TMVA/Resu…sMu…i˛ass.h
"

132 
	~"TMVA/SdivSqπS∂usB.h
"

133 
	~"TMVA/Sï¨©i⁄Ba£.h
"

134 
	~"TMVA/Timî.h
"

135 
	~"TMVA/Toﬁs.h
"

136 
	~"TMVA/Ty≥s.h
"

138 
	~"Rio°ªam.h
"

139 
	~"TDúe˘‹y.h
"

140 
	~"TR™dom3.h
"

141 
	~"TM©h.h
"

142 
	~"TM©rixTSym.h
"

143 
	~"TObjSåög.h
"

144 
	~"TGøph.h
"

146 
	~<Æg‹ôhm
>

147 
	~<f°ªam
>

148 
	~<m©h.h
>

149 
	~<un‹dîed_m≠
>

152 
usög
 
	g°d
::
ve˘‹
;

153 
usög
 
	g°d
::
make_∑ú
;

155 
	$REGISTER_METHOD
(
BDT
)

157 
	`CœssImp
(
TMVA
::
MëhodBDT
);

159 c⁄° 
I¡_t
 
TMVA
::
MëhodBDT
::
fgDebugLevñ
 = 0;

164 
TMVA
::
MëhodBDT
::
	$MëhodBDT
–c⁄° 
TSåög
& 
jobName
,

165 c⁄° 
TSåög
& 
mëhodTôÀ
,

166 
D©aSëInfo
& 
theD©a
,

167 c⁄° 
TSåög
& 
theO±i⁄
 ) :

168 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kBDT
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

169 , 
	`fTøöSam∂e
(0)

170 , 
	`fNTªes
(0)

171 , 
	`fSigToBkgFø˘i⁄
(0)

172 , 
	`fAdaBoo°Bëa
(0)

174 , 
	`fShrökage
(0)

175 , 
	`fBaggedBoo°
(
kFALSE
)

176 , 
	`fBaggedGødBoo°
(
kFALSE
)

178 , 
	`fMöNodeEvíts
(0)

179 , 
	`fMöNodeSize
(5)

180 , 
	`fMöNodeSizeS
("5%")

181 , 
	`fNCuts
(0)

182 , 
	`fU£FishîCuts
(0)

183 , 
	`fMöLöC‹rF‹Fishî
(.8)

184 , 
	`fU£Ex˛usiveV¨s
(0)

185 , 
	`fU£YesNoLóf
(
kFALSE
)

186 , 
	`fNodePurôyLimô
(0)

187 , 
	`fNNodesMax
(0)

188 , 
	`fMaxDïth
(0)

189 , 
	`fPru√Mëhod
(
Decisi⁄Tªe
::
kNoPrunög
)

190 , 
	`fPru√Såígth
(0)

191 , 
	`fFVÆid©i⁄Evíts
(0)

192 , 
	`fAutom©ic
(
kFALSE
)

193 , 
	`fR™domi£dTªes
(
kFALSE
)

194 , 
	`fU£Nv¨s
(0)

195 , 
	`fU£Poiss⁄Nv¨s
(0)

196 , 
	`fU£NTøöEvíts
(0)

197 , 
	`fBaggedSam∂eFø˘i⁄
(0)

198 , 
	`fNoNegWeightsInTøöög
(
kFALSE
)

199 , 
	`fInvî£Boo°NegWeights
(
kFALSE
)

200 , 
	`fPaúNegWeightsGlobÆ
(
kFALSE
)

201 , 
	`fTøöWôhNegWeights
(
kFALSE
)

202 , 
	`fDoBoo°M⁄ô‹
(
kFALSE
)

203 , 
	`fITªe
(0)

204 , 
	`fBoo°Weight
(0)

205 , 
	`fEº‹Fø˘i⁄
(0)

206 , 
	`fCss
(0)

207 , 
	`fCts_sb
(0)

208 , 
	`fCtb_ss
(0)

209 , 
	`fCbb
(0)

210 , 
	`fDoPª£À˘i⁄
(
kFALSE
)

211 , 
	`fSkùN‹mÆiz©i⁄
(
kFALSE
)

212 , 
	$fHi°‹icBoﬁ
(
kFALSE
)

214 
fM⁄ô‹Ntu∂e
 = 
NULL
;

215 
fSïTy≥
 = 
NULL
;

216 
fRegªssi⁄LossFun˘i⁄BDTG
 = 
nuŒ±r
;

217 
	}
}

221 
	gTMVA
::
MëhodBDT
::
	$MëhodBDT
–
D©aSëInfo
& 
theD©a
,

222 c⁄° 
TSåög
& 
theWeightFûe
)

223 : 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kBDT
, 
theD©a
, 
theWeightFûe
)

224 , 
	`fTøöSam∂e
(0)

225 , 
	`fNTªes
(0)

226 , 
	`fSigToBkgFø˘i⁄
(0)

227 , 
	`fAdaBoo°Bëa
(0)

229 , 
	`fShrökage
(0)

230 , 
	`fBaggedBoo°
(
kFALSE
)

231 , 
	`fBaggedGødBoo°
(
kFALSE
)

233 , 
	`fMöNodeEvíts
(0)

234 , 
	`fMöNodeSize
(5)

235 , 
	`fMöNodeSizeS
("5%")

236 , 
	`fNCuts
(0)

237 , 
	`fU£FishîCuts
(0)

238 , 
	`fMöLöC‹rF‹Fishî
(.8)

239 , 
	`fU£Ex˛usiveV¨s
(0)

240 , 
	`fU£YesNoLóf
(
kFALSE
)

241 , 
	`fNodePurôyLimô
(0)

242 , 
	`fNNodesMax
(0)

243 , 
	`fMaxDïth
(0)

244 , 
	`fPru√Mëhod
(
Decisi⁄Tªe
::
kNoPrunög
)

245 , 
	`fPru√Såígth
(0)

246 , 
	`fFVÆid©i⁄Evíts
(0)

247 , 
	`fAutom©ic
(
kFALSE
)

248 , 
	`fR™domi£dTªes
(
kFALSE
)

249 , 
	`fU£Nv¨s
(0)

250 , 
	`fU£Poiss⁄Nv¨s
(0)

251 , 
	`fU£NTøöEvíts
(0)

252 , 
	`fBaggedSam∂eFø˘i⁄
(0)

253 , 
	`fNoNegWeightsInTøöög
(
kFALSE
)

254 , 
	`fInvî£Boo°NegWeights
(
kFALSE
)

255 , 
	`fPaúNegWeightsGlobÆ
(
kFALSE
)

256 , 
	`fTøöWôhNegWeights
(
kFALSE
)

257 , 
	`fDoBoo°M⁄ô‹
(
kFALSE
)

258 , 
	`fITªe
(0)

259 , 
	`fBoo°Weight
(0)

260 , 
	`fEº‹Fø˘i⁄
(0)

261 , 
	`fCss
(0)

262 , 
	`fCts_sb
(0)

263 , 
	`fCtb_ss
(0)

264 , 
	`fCbb
(0)

265 , 
	`fDoPª£À˘i⁄
(
kFALSE
)

266 , 
	`fSkùN‹mÆiz©i⁄
(
kFALSE
)

267 , 
	$fHi°‹icBoﬁ
(
kFALSE
)

269 
fM⁄ô‹Ntu∂e
 = 
NULL
;

270 
fSïTy≥
 = 
NULL
;

271 
fRegªssi⁄LossFun˘i⁄BDTG
 = 
nuŒ±r
;

276 
	}
}

281 
Boﬁ_t
 
	gTMVA
::
MëhodBDT
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UI¡_à
numbîT¨gës
 )

283 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

284 i‡(
ty≥
 =
Ty≥s
::
kMu…i˛ass
 )  
kTRUE
;

285 if–
ty≥
 =
Ty≥s
::
kRegªssi⁄
 && 
numbîT¨gës
 =1 )  
kTRUE
;

286  
kFALSE
;

287 
	}
}

334 
	gTMVA
::
MëhodBDT
::
	$De˛¨eO±i⁄s
()

336 
	`De˛¨eO±i⁄Ref
(
fNTªes
, "NTrees", "Number ofÅrees inÅhe forest");

337 i‡(
	`DoRegªssi⁄
()) {

338 
	`De˛¨eO±i⁄Ref
(
fMaxDïth
=50,"MaxDepth","Max depth ofÅhe decisionÅreeállowed");

340 
	`De˛¨eO±i⁄Ref
(
fMaxDïth
=3,"MaxDepth","Max depth ofÅhe decisionÅreeállowed");

343 
TSåög
 
tmp
="5%"; i‡(
	`DoRegªssi⁄
())Åmp="0.2%";

344 
	`De˛¨eO±i⁄Ref
(
fMöNodeSizeS
=
tmp
, "MinNodeSize", "MinimumÖercentage ofÅrainingÉventsÑequired ináÜeafÇode (default: Classification: 5%, Regression: 0.2%)");

346 
	`De˛¨eO±i⁄Ref
(
fNCuts
, "nCuts", "Number of gridÖoints in variableÑange used in finding optimal cut inÇode splitting");

348 
	`De˛¨eO±i⁄Ref
(
fBoo°Ty≥
, "BoostType", "BoostingÅype forÅheÅrees inÅhe forest (note: AdaCost is stillÉxperimental)");

350 
	`AddPªDefVÆ
(
	`TSåög
("AdaBoost"));

351 
	`AddPªDefVÆ
(
	`TSåög
("RealAdaBoost"));

352 
	`AddPªDefVÆ
(
	`TSåög
("AdaCost"));

353 
	`AddPªDefVÆ
(
	`TSåög
("Bagging"));

355 
	`AddPªDefVÆ
(
	`TSåög
("AdaBoostR2"));

356 
	`AddPªDefVÆ
(
	`TSåög
("Grad"));

357 i‡(
	`DoRegªssi⁄
()) {

358 
fBoo°Ty≥
 = "AdaBoostR2";

360 
fBoo°Ty≥
 = "AdaBoost";

362 
	`De˛¨eO±i⁄Ref
(
fAdaBoo°R2Loss
="Quadratic", "AdaBoostR2Loss", "Type of Loss function in AdaBoostR2");

363 
	`AddPªDefVÆ
(
	`TSåög
("Linear"));

364 
	`AddPªDefVÆ
(
	`TSåög
("Quadratic"));

365 
	`AddPªDefVÆ
(
	`TSåög
("Exponential"));

367 
	`De˛¨eO±i⁄Ref
(
fBaggedBoo°
=
kFALSE
, "UseBaggedBoost","Use onlyáÑandom subsample ofállÉvents for growingÅheÅrees inÉach boost iteration.");

368 
	`De˛¨eO±i⁄Ref
(
fShrökage
=1.0, "Shrinkage", "LearningÑate for GradBoostálgorithm");

369 
	`De˛¨eO±i⁄Ref
(
fAdaBoo°Bëa
=.5, "AdaBoostBeta", "LearningÑate for AdaBoostálgorithm");

370 
	`De˛¨eO±i⁄Ref
(
fR™domi£dTªes
,"UseRandomisedTrees","DetermineátÉachÇode splittingÅhe cut variable onlyásÅhe best out ofáÑandom subset of variables (like in RandomForests)");

371 
	`De˛¨eO±i⁄Ref
(
fU£Nv¨s
,"UseNvars","Size ofÅhe subset of variables used with RandomisedTree option");

372 
	`De˛¨eO±i⁄Ref
(
fU£Poiss⁄Nv¨s
,"UsePoissonNvars", "Interpret \"UseNvars\"Çotás fixedÇumber butás mean ofá Poisson distribution inÉach split with RandomisedTree option");

373 
	`De˛¨eO±i⁄Ref
(
fBaggedSam∂eFø˘i⁄
=.6,"BaggedSampleFraction","Relative size of baggedÉvent sampleÅo original size ofÅhe data sample (used whenever bagging is used (i.e. UseBaggedBoost, Bagging,)" );

375 
	`De˛¨eO±i⁄Ref
(
fU£YesNoLóf
=
kTRUE
, "UseYesNoLeaf",

377 i‡(
	`DoRegªssi⁄
()) {

378 
fU£YesNoLóf
 = 
kFALSE
;

381 
	`De˛¨eO±i⁄Ref
(
fNegWeightTª©mít
="InverseBoostNegWeights","NegWeightTreatment","HowÅoÅreatÉvents withÇegative weights inÅhe BDTÅraining (particularÅhe boosting) : IgnoreInTraining; Boost With inverse boostweight; PairÉvents withÇegativeándÖositive weights inÅraining sampleánd *annihilate*Åhem (experimental!)");

382 
	`AddPªDefVÆ
(
	`TSåög
("InverseBoostNegWeights"));

383 
	`AddPªDefVÆ
(
	`TSåög
("IgnoreNegWeightsInTraining"));

384 
	`AddPªDefVÆ
(
	`TSåög
("NoNegWeightsInTraining"));

385 
	`AddPªDefVÆ
(
	`TSåög
("PairNegWeightsGlobal"));

386 
	`AddPªDefVÆ
(
	`TSåög
("Pray"));

390 
	`De˛¨eO±i⁄Ref
(
fCss
=1., "Css", "AdaCost: cost ofÅrue signal selected signal");

391 
	`De˛¨eO±i⁄Ref
(
fCts_sb
=1.,"Cts_sb","AdaCost: cost ofÅrue signal selected bkg");

392 
	`De˛¨eO±i⁄Ref
(
fCtb_ss
=1.,"Ctb_ss","AdaCost: cost ofÅrue bkg selected signal");

393 
	`De˛¨eO±i⁄Ref
(
fCbb
=1., "Cbb", "AdaCost: cost ofÅrue bkg selected bkg ");

395 
	`De˛¨eO±i⁄Ref
(
fNodePurôyLimô
=0.5, "NodePurityLimit", "In boosting/pruning,Çodes withÖurity > NodePurityLimitáre signal; background otherwise.");

398 
	`De˛¨eO±i⁄Ref
(
fSïTy≥S
, "SeparationType", "Separation criterion forÇode splitting");

399 
	`AddPªDefVÆ
(
	`TSåög
("CrossEntropy"));

400 
	`AddPªDefVÆ
(
	`TSåög
("GiniIndex"));

401 
	`AddPªDefVÆ
(
	`TSåög
("GiniIndexWithLaplace"));

402 
	`AddPªDefVÆ
(
	`TSåög
("MisClassificationError"));

403 
	`AddPªDefVÆ
(
	`TSåög
("SDivSqrtSPlusB"));

404 
	`AddPªDefVÆ
(
	`TSåög
("RegressionVariance"));

405 i‡(
	`DoRegªssi⁄
()) {

406 
fSïTy≥S
 = "RegressionVariance";

408 
fSïTy≥S
 = "GiniIndex";

411 
	`De˛¨eO±i⁄Ref
(
fRegªssi⁄LossFun˘i⁄BDTGS
 = "Huber", "RegressionLossFunctionBDTG", "Loss function for BDTGÑegression.");

412 
	`AddPªDefVÆ
(
	`TSåög
("Huber"));

413 
	`AddPªDefVÆ
(
	`TSåög
("AbsoluteDeviation"));

414 
	`AddPªDefVÆ
(
	`TSåög
("LeastSquares"));

416 
	`De˛¨eO±i⁄Ref
(
fHubîQu™tûe
 = 0.7, "HuberQuantile", "InÅhe HuberÜoss functionÅhis isÅhe quantileÅhat separatesÅhe core fromÅheÅails inÅheÑesiduals distribution.");

418 
	`De˛¨eO±i⁄Ref
(
fDoBoo°M⁄ô‹
=
kFALSE
,"DoBoostMonitor","Create controlÖlot with ROC integral vsÅreeÇumber");

420 
	`De˛¨eO±i⁄Ref
(
fU£FishîCuts
=
kFALSE
, "UseFisherCuts", "Use multivariate splits usingÅhe Fisher criterion");

421 
	`De˛¨eO±i⁄Ref
(
fMöLöC‹rF‹Fishî
=.8,"MinLinCorrForFisher", "The minimumÜinear correlation betweenÅwo variables demanded for use in Fisher criterion inÇode splitting");

422 
	`De˛¨eO±i⁄Ref
(
fU£Ex˛usiveV¨s
=
kFALSE
,"UseExclusiveVars","Variablesálready used in fisher criterionáreÇotánymoreánalysed individually forÇode splitting");

425 
	`De˛¨eO±i⁄Ref
(
fDoPª£À˘i⁄
=
kFALSE
,"DoPreselection","andándápplyáutomaticÖre-selection for 100%Éfficient signal (bkg) cutsÖriorÅoÅraining");

428 
	`De˛¨eO±i⁄Ref
(
fSigToBkgFø˘i⁄
=1,"SigToBkgFraction","SigÅo BkgÑatio used in Training (similarÅo NodePurityLimit, which cannot be used inÑealádaboost");

430 
	`De˛¨eO±i⁄Ref
(
fPru√MëhodS
, "PruneMethod", "Note: for BDTs use smallÅrees (e.g.MaxDepth=3)ánd NoPruning: Pruning: Method used forÖruning (removal) of statistically insignificant branches ");

431 
	`AddPªDefVÆ
(
	`TSåög
("NoPruning"));

432 
	`AddPªDefVÆ
(
	`TSåög
("ExpectedError"));

433 
	`AddPªDefVÆ
(
	`TSåög
("CostComplexity"));

435 
	`De˛¨eO±i⁄Ref
(
fPru√Såígth
, "PruneStrength", "Pruning strength");

437 
	`De˛¨eO±i⁄Ref
(
fFVÆid©i⁄Evíts
=0.5, "PruningValFraction", "Fraction ofÉventsÅo use for optimizingáutomaticÖruning.");

439 
	`De˛¨eO±i⁄Ref
(
fSkùN‹mÆiz©i⁄
=
kFALSE
, "SkipNormalization", "SkipÇormalizationát initialization,Åo keepÉxpectation value of BDT outputáccordingÅoÅhe fraction ofÉvents");

442 
	`De˛¨eO±i⁄Ref
(
fMöNodeEvíts
=0, "nEventsMin", "deprecated: Use MinNodeSize (in % ofÅrainingÉvents) instead");

444 
	`De˛¨eO±i⁄Ref
(
fBaggedGødBoo°
=
kFALSE
, "UseBaggedGrad","deprecated: Use *UseBaggedBoost* instead: Use onlyáÑandom subsample ofállÉvents for growingÅheÅrees inÉach iteration.");

445 
	`De˛¨eO±i⁄Ref
(
fBaggedSam∂eFø˘i⁄
, "GradBaggingFraction","deprecated: Use *BaggedSampleFraction* instead: DefinesÅhe fraction ofÉventsÅo be used inÉach iteration,É.g. when UseBaggedGrad=kTRUE. ");

446 
	`De˛¨eO±i⁄Ref
(
fU£NTøöEvíts
,"UseNTrainEvents","deprecated: Use *BaggedSampleFraction* instead: Number ofÑandomlyÖickedÅrainingÉvents used inÑandomised (and bagged)Årees");

447 
	`De˛¨eO±i⁄Ref
(
fNNodesMax
,"NNodesMax","deprecated: Use MaxDepth insteadÅoÜimitÅheÅree size" );

450 
	}
}

455 
	gTMVA
::
MëhodBDT
::
	$De˛¨eCom∑tibûôyO±i⁄s
() {

456 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

459 
	`De˛¨eO±i⁄Ref
(
fHi°‹icBoﬁ
=
kTRUE
, "UseWeightedTrees",

461 
	`De˛¨eO±i⁄Ref
(
fHi°‹icBoﬁ
=
kFALSE
, "PruneBeforeBoost", "FlagÅoÖruneÅheÅree beforeápplying boostingálgorithm");

462 
	`De˛¨eO±i⁄Ref
(
fHi°‹icBoﬁ
=
kFALSE
,"RenormByClass","IndividuallyÑe-normalizeÉachÉvent classÅoÅhe original sizeáfter boosting");

464 
	`AddPªDefVÆ
(
	`TSåög
("NegWeightTreatment"),TString("IgnoreNegWeights"));

466 
	}
}

471 
	gTMVA
::
MëhodBDT
::
	$Pro˚ssO±i⁄s
()

473 
fSïTy≥S
.
	`ToLowî
();

474 i‡(
fSïTy≥S
 ="mis˛assifiˇti⁄îr‹"Ë
fSïTy≥
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

475 i‡(
fSïTy≥S
 ="göiödex"Ë
fSïTy≥
 = 
√w
 
	`GöiIndex
();

476 i‡(
fSïTy≥S
 ="göiödexwôhœ∂a˚"Ë
fSïTy≥
 = 
√w
 
	`GöiIndexWôhL≠œ˚
();

477 i‡(
fSïTy≥S
 ="¸os£¡r›y"Ë
fSïTy≥
 = 
√w
 
	`CrossE¡r›y
();

478 i‡(
fSïTy≥S
 ="sdivsqπ•lusb"Ë
fSïTy≥
 = 
√w
 
	`SdivSqπS∂usB
();

479 i‡(
fSïTy≥S
 ="ªgªssi⁄v¨ün˚"Ë
fSïTy≥
 = 
NULL
;

481 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

482 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿Sï¨©i⁄ Index o±i⁄ " << 
fSïTy≥S
 << " cÆÀd" << 
Endl
;

485 if(!(
fHubîQu™tûe
 >= 0.0 && fHuberQuantile <= 1.0)){

486 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

487 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> Hubî Qu™tûêmu° bêöÑ™gê[0,1]. VÆuêgiví, " << 
fHubîQu™tûe
 << ", d€†nŸ m©chÅhi†¸ôîü" << 
Endl
;

490 
fRegªssi⁄LossFun˘i⁄BDTGS
.
	`ToLowî
();

491 i‡(
fRegªssi⁄LossFun˘i⁄BDTGS
 ="hubî"Ë
fRegªssi⁄LossFun˘i⁄BDTG
 = 
√w
 
	`HubîLossFun˘i⁄BDT
(
fHubîQu™tûe
);

492 i‡(
fRegªssi⁄LossFun˘i⁄BDTGS
 ="Àa°squ¨es"Ë
fRegªssi⁄LossFun˘i⁄BDTG
 = 
√w
 
	`Ló°Squ¨esLossFun˘i⁄BDT
();

493 i‡(
fRegªssi⁄LossFun˘i⁄BDTGS
 ="absﬁuãdevüti⁄"Ë
fRegªssi⁄LossFun˘i⁄BDTG
 = 
√w
 
	`AbsﬁuãDevüti⁄LossFun˘i⁄BDT
();

495 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

496 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿Regªssi⁄ Los†Fun˘i⁄ BDT o±i⁄ " << 
fRegªssi⁄LossFun˘i⁄BDTGS
 << " cÆÀd" << 
Endl
;

499 
fPru√MëhodS
.
	`ToLowî
();

500 i‡(
fPru√MëhodS
 ="ex≥˘edîr‹"Ë
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kEx≥˘edEº‹Prunög
;

501 i‡(
fPru√MëhodS
 ="co°com∂exôy"Ë
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
;

502 i‡(
fPru√MëhodS
 ="n›runög"Ë
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

504 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

505 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿Pru√Mëhod " << 
fPru√MëhodS
 << " o±i⁄ cÆÀd" << 
Endl
;

507 i‡(
fPru√Såígth
 < 0 && (
fPru√Mëhod
 !
Decisi⁄Tªe
::
kNoPrunög
Ë&& 
fBoo°Ty≥
!="Gød"Ë
fAutom©ic
 = 
kTRUE
;

508 
fAutom©ic
 = 
kFALSE
;

509 i‡(
fAutom©ic
 && 
fPru√Mëhod
==
Decisi⁄Tªe
::
kEx≥˘edEº‹Prunög
){

510 
	`Log
(Ë<< 
kFATAL


511 << "S‹ryáutom©i¯¥unög såígth dëîmö©i⁄ i†nŸ im∂emíãd yë f‹ Ex≥˘edEº‹Prunög" << 
Endl
;

515 i‡(
fMöNodeEvíts
 > 0){

516 
fMöNodeSize
 = 
	`DoubÀ_t
(
fMöNodeEvíts
*100.Ë/ 
	`D©a
()->
	`GëNTøöögEvíts
();

517 
	`Log
(Ë<< 
kWARNING
 << "You havêex∂icôly së **ÇEvítsMö = " << 
fMöNodeEvíts
<<" **Åhe minábsoluteÇumber \n"

521 << "nEvítsMö="<<
fMöNodeEvíts
<< "--> MöNodeSize="<<
fMöNodeSize
<<"%"

522 << 
Endl
;

523 
	`Log
(Ë<< 
kWARNING
 << "NoteálsoÅhatÉxplicitly setting *nEventsMin* so far OVERWRITESÅhe optionÑecommended \n"

524 << " *MöNodeSize* = " << 
fMöNodeSizeS
 << " o±i⁄ !!" << 
Endl
 ;

525 
fMöNodeSizeS
 = 
	`F‹m
("%F3.2",
fMöNodeSize
);

528 
	`SëMöNodeSize
(
fMöNodeSizeS
);

532 
fAdaBoo°R2Loss
.
	`ToLowî
();

534 i‡(
fBoo°Ty≥
=="Grad") {

535 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

536 i‡(
fNegWeightTª©mít
=="InverseBoostNegWeights"){

537 
	`Log
(Ë<< 
kINFO
 << "thê›ti⁄ *Invî£Boo°NegWeights* d€†nŸÉxi° f‹ Boo°Ty≥=Gød --> ch™ge" << 
Endl
;

538 
	`Log
(Ë<< 
kINFO
 << "tÿ√w deÁu… f‹ GødBoo° *Pøy*" << 
Endl
;

539 
	`Log
(Ë<< 
kDEBUG
 << "i.e. sim∂y kì∞themá†i‡which should w‹k föêf‹ Gød Boo°" << 
Endl
;

540 
fNegWeightTª©mít
="Pray";

541 
fNoNegWeightsInTøöög
=
kFALSE
;

543 } i‡(
fBoo°Ty≥
=="RealAdaBoost"){

544 
fBoo°Ty≥
 = "AdaBoost";

545 
fU£YesNoLóf
 = 
kFALSE
;

546 } i‡(
fBoo°Ty≥
=="AdaCost"){

547 
fU£YesNoLóf
 = 
kFALSE
;

550 i‡(
fFVÆid©i⁄Evíts
 < 0.0) fFValidationEvents = 0.0;

551 i‡(
fAutom©ic
 && 
fFVÆid©i⁄Evíts
 > 0.5) {

552 
	`Log
(Ë<< 
kWARNING
 << "You have chosenÅo use moreÅhan half of yourÅraining sample "

555 << 
Endl
;

559 i‡(
this
->
	`D©a
()->
	`HasNeg©iveEvítWeights
()){

560 
	`Log
(Ë<< 
kINFO
 << " Youáre usingá Monte CarloÅhat hasálsoÇegative weights. "

564 << 
fMöNodeSizeS
 << " ("<< 
fMöNodeSize
 << "%)"

569 << "which ign‹e†evít†wôhÇeg©ivêweighàöÅhêåaöög. " << 
Endl


570 << 
Endl
 << "Note: You'll getá WARNING message duringÅheÅraining ifÅhat shouldÉver happen" << Endl;

573 i‡(
	`DoRegªssi⁄
()) {

574 i‡(
fU£YesNoLóf
 && !
	`IsC⁄°ru˘edFromWeightFûe
()){

575 
	`Log
(Ë<< 
kWARNING
 << "Regªssi⁄ Tªe†dÿnŸ w‹k wôh fU£YesNoLóf=TRUE --> I wû»£àôÅÿFALSE" << 
Endl
;

576 
fU£YesNoLóf
 = 
kFALSE
;

579 i‡(
fSïTy≥
 !
NULL
){

580 
	`Log
(Ë<< 
kWARNING
 << "Regªssi⁄ Tªe†dÿnŸ w‹k wôh Sï¨©i⁄Åy≥ othîÅh™ <Regªssi⁄V¨ün˚> --> I wû»u£ iàö°ód" << 
Endl
;

581 
fSïTy≥
 = 
NULL
;

583 i‡(
fU£FishîCuts
){

584 
	`Log
(Ë<< 
kWARNING
 << "S‹ry, U£FishîCut†i†nŸávaûabÀ f‹Ñegªssi⁄á«lysis, I wû»ign‹êô!" << 
Endl
;

585 
fU£FishîCuts
 = 
kFALSE
;

587 i‡(
fNCuts
 < 0) {

588 
	`Log
(Ë<< 
kWARNING
 << "S‹ry,Åhê›ti⁄ o‡nCuts<0 usögá m‹êñab‹©ênodê•lôtögálg‹ôhm " << 
Endl
;

589 
	`Log
(Ë<< 
kWARNING
 << "i†nŸ im∂emíãd f‹Ñegªssi⁄á«lysi†! " << 
Endl
;

590 
	`Log
(Ë<< 
kWARNING
 << "--> I swôch dÿdeÁu…ÇCut†20ánd u£ sènd¨dÇodê•lôtög"<<
Endl
;

591 
fNCuts
=20;

594 i‡(
fR™domi£dTªes
){

595 
	`Log
(Ë<< 
kINFO
 << " R™domi£dÅªe†u£Çÿ¥unög" << 
Endl
;

596 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

600 i‡(
fU£FishîCuts
) {

601 
	`Log
(Ë<< 
kWARNING
 << "Whí usögÅhê›ti⁄ U£FishîCuts,ÅhêŸhî o±i⁄ÇCuts<0 (i.e. usög" << 
Endl
;

602 
	`Log
(Ë<< "á m‹êñab‹©ênodê•lôtögálg‹ôhmËi†nŸ im∂emíãd. " << 
Endl
;

605 
fNCuts
=20;

608 i‡(
fNTªes
==0){

609 
	`Log
(Ë<< 
kERROR
 << " Zero Decision Trees demanded...Åhat doesÇot work !! "

611 << 
Endl
;

612 
fNTªes
 = 1;

615 
fNegWeightTª©mít
.
	`ToLowî
();

616 i‡(
fNegWeightTª©mít
 ="ign‹íegweightsöåaöög"Ë
fNoNegWeightsInTøöög
 = 
kTRUE
;

617 i‡(
fNegWeightTª©mít
 ="n⁄egweightsöåaöög"Ë
fNoNegWeightsInTøöög
 = 
kTRUE
;

618 i‡(
fNegWeightTª©mít
 ="övî£boo°√gweights"Ë
fInvî£Boo°NegWeights
 = 
kTRUE
;

619 i‡(
fNegWeightTª©mít
 ="∑ú√gweightsglobÆ"Ë
fPaúNegWeightsGlobÆ
 = 
kTRUE
;

620 i‡(
fNegWeightTª©mít
 ="¥ay"Ë
	`Log
(Ë<< 
kDEBUG
 << "Yes, goodÜuck wôhÖøyög " << 
Endl
;

622 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

623 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿›ti⁄ f‹Åª©ögÇeg©ivêevíàweight†durögÅøöög " << 
fNegWeightTª©mít
 << "Ñeque°ed" << 
Endl
;

626 i‡(
fNegWeightTª©mít
 == "pairnegweightsglobal")

627 
	`Log
(Ë<< 
kWARNING
 << " you s≥cifõdÅhê›ti⁄ NegWeightTª©mít=PaúNegWeightsGlobÆ : Thi†›ti⁄ i†°û»c⁄sidîed EXPERIMENTAL !! " << 
Endl
;

631 i‡(
fNNodesMax
>0) {

632 
UI¡_t
 
tmp
=1;

633 
fMaxDïth
=0;

634 
tmp
 < 
fNNodesMax
){

635 
tmp
+=2*tmp;

636 
fMaxDïth
++;

638 
	`Log
(Ë<< 
kWARNING
 << "You havê•ecifõdá dïªˇãd o±i⁄ *NNodesMax="<<
fNNodesMax


639 << "* \¿thi†ha†bì¿å™¶©edÅÿMaxDïth="<<
fMaxDïth
<<
Endl
;

643 i‡(
fU£NTøöEvíts
>0){

644 
fBaggedSam∂eFø˘i⁄
 = (
DoubÀ_t
Ë
fU£NTøöEvíts
/
	`D©a
()->
	`GëNTøöögEvíts
();

645 
	`Log
(Ë<< 
kWARNING
 << "You havê•ecifõdá dïªˇãd o±i⁄ *U£NTøöEvíts="<<
fU£NTøöEvíts


646 << "* \¿thi†ha†bì¿å™¶©edÅÿBaggedSam∂eFø˘i⁄="<<
fBaggedSam∂eFø˘i⁄
<<"(%)"<<
Endl
;

649 i‡(
fBoo°Ty≥
=="Baggög"Ë
fBaggedBoo°
 = 
kTRUE
;

650 i‡(
fBaggedGødBoo°
){

651 
fBaggedBoo°
 = 
kTRUE
;

652 
	`Log
(Ë<< 
kWARNING
 << "You havê•ecifõdá dïªˇãd o±i⁄ *U£BaggedGød* -->ÖÀa£ u£ *U£BaggedBoo°* in°ód" << 
Endl
;

655 
	}
}

659 
	gTMVA
::
MëhodBDT
::
	$SëMöNodeSize
(
DoubÀ_t
 
sizeInPî˚¡
){

660 i‡(
sizeInPî˚¡
 > 0 && sizeInPercent < 50){

661 
fMöNodeSize
=
sizeInPî˚¡
;

664 
	`Log
(Ë<< 
kFATAL
 << "you have demandedá minimalÇode size of "

665 << 
sizeInPî˚¡
 << "% ofÅheÅrainingÉvents.. \n"

666 << "Åh© somehow d€†nŸ makê£n£ "<<
Endl
;

669 
	}
}

673 
	gTMVA
::
MëhodBDT
::
	$SëMöNodeSize
(
TSåög
 
sizeInPî˚¡
){

674 
sizeInPî˚¡
.
	`Rïœ˚AŒ
("%","");

675 
sizeInPî˚¡
.
	`Rïœ˚AŒ
(" ","");

676 i‡(
sizeInPî˚¡
.
	`IsFlﬂt
()Ë
	`SëMöNodeSize
(sizeInPî˚¡.
	`Atof
());

678 
	`Log
(Ë<< 
kFATAL
 << "I hadÖroblemsÑeadingÅhe option MinNodeEvents, which "

679 << "a·îÑemovögáÖossibÀ % sig¿nowÑód†" << 
sizeInPî˚¡
 << 
Endl
;

681 
	}
}

686 
	gTMVA
::
MëhodBDT
::
	$Inô
( )

688 
fNTªes
 = 800;

689 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
 || fA«lysisTy≥ =Ty≥s::
kMu…i˛ass
 ) {

690 
fMaxDïth
 = 3;

691 
fBoo°Ty≥
 = "AdaBoost";

692 if(
	`D©aInfo
().
	`GëNCœs£s
()!=0)

693 
fMöNodeSize
 = 5.;

695 
fMaxDïth
 = 50;

696 
fBoo°Ty≥
 = "AdaBoostR2";

697 
fAdaBoo°R2Loss
 = "Quadratic";

698 if(
	`D©aInfo
().
	`GëNCœs£s
()!=0)

699 
fMöNodeSize
 = .2;

703 
fNCuts
 = 20;

704 
fPru√MëhodS
 = "NoPruning";

705 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

706 
fPru√Såígth
 = 0;

707 
fAutom©ic
 = 
kFALSE
;

708 
fFVÆid©i⁄Evíts
 = 0.5;

709 
fR™domi£dTªes
 = 
kFALSE
;

711 
fU£Nv¨s
 = 
	`UI¡_t
(
TM©h
::
	`Sqπ
(
	`GëNv¨
())+0.6);

712 
fU£Poiss⁄Nv¨s
 = 
kTRUE
;

713 
fShrökage
 = 1.0;

717 
	`SëSig«lRe„ªn˚Cut
( 0 );

718 
	}
}

724 
	gTMVA
::
MëhodBDT
::
	$Re£t
( )

730 
UI¡_t
 
i
=0; i<
fF‹e°
.
	`size
(); i++Ë
dñëe
 fForest[i];

731 
fF‹e°
.
	`˛ór
();

733 
fBoo°Weights
.
	`˛ór
();

734 i‡(
fM⁄ô‹Ntu∂e
Ë{ fM⁄ô‹Ntu∂e->
	`Dñëe
(); fM⁄ô‹Ntu∂e=
NULL
; }

735 
fV¨übÀImp‹èn˚
.
	`˛ór
();

736 
fResiduÆs
.
	`˛ór
();

737 
fLossFun˘i⁄EvítInfo
.
	`˛ór
();

741 i‡(
	`D©a
()ËD©a()->
	`DñëeResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

742 
	`Log
(Ë<< 
kDEBUG
 << " suc˚ssfuŒy(?Ëª£àthêmëhod " << 
Endl
;

743 
	}
}

752 
	gTMVA
::
MëhodBDT
::~
	$MëhodBDT
( )

754 
UI¡_t
 
i
=0; i<
fF‹e°
.
	`size
(); i++Ë
dñëe
 fForest[i];

755 
	}
}

760 
	gTMVA
::
MëhodBDT
::
	$InôEvítSam∂e
( )

762 i‡(!
	`HasTøöögTªe
()Ë
	`Log
(Ë<< 
kFATAL
 << "<Inô> D©a().TøöögTªe(Ëi†zîÿpoöãr" << 
Endl
;

764 i‡(
fEvítSam∂e
.
	`size
() > 0) {

766 
UI¡_t
 
õv
=0; iev<
fEvítSam∂e
.
	`size
(); iev++ËfEvítSam∂e[õv]->
	`SëBoo°Weight
(1.);

768 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

769 
UI¡_t
 
√víts
 = 
	`D©a
()->
	`GëNTøöögEvíts
();

771 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
tmpEvítSam∂e
;

772 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

774 
Evít
* 
evít
 = 
√w
 
	`Evít
–*
	`GëTøöögEvít
(
õvt
) );

775 
tmpEvítSam∂e
.
	`push_back
(
evít
);

778 i‡(!
	`DoRegªssi⁄
()Ë
	`DëîmöePª£À˘i⁄Cuts
(
tmpEvítSam∂e
);

779 
fDoPª£À˘i⁄
 = 
kFALSE
;

781 
UI¡_t
 
i
=0; i<
tmpEvítSam∂e
.
	`size
(); i++Ë
dñëe
ÅmpEventSample[i];

784 
Boﬁ_t
 
fú°NegWeight
=
kTRUE
;

785 
Boﬁ_t
 
fú°ZîoWeight
=
kTRUE
;

786 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

789 
Evít
* 
evít
 = 
√w
 
	`Evít
–*
	`GëTøöögEvít
(
õvt
) );

790 i‡(
fDoPª£À˘i⁄
){

791 i‡(
TM©h
::
	`Abs
(
	`AµlyPª£À˘i⁄Cuts
(
evít
)) > 0.05) {

792 
dñëe
 
evít
;

797 i‡(
evít
->
	`GëWeight
(Ë< 0 && (
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë|| 
fNoNegWeightsInTøöög
)){

798 i‡(
fú°NegWeight
) {

799 
	`Log
(Ë<< 
kWARNING
 << " NŸe, you havêevít†wôhÇeg©ivêevíàweighàöÅhêßm∂e, buàyou'vêcho£¿tÿign‹êthem" << 
Endl
;

800 
fú°NegWeight
=
kFALSE
;

802 
dñëe
 
evít
;

803 }i‡(
evít
->
	`GëWeight
()==0){

804 i‡(
fú°ZîoWeight
) {

805 
fú°ZîoWeight
 = 
kFALSE
;

806 
	`Log
(Ë<< "Evít†wôh weighà=0áª goögÅÿbêsim∂y ign‹ed " << 
Endl
;

808 
dñëe
 
evít
;

810 i‡(
evít
->
	`GëWeight
() < 0) {

811 
fTøöWôhNegWeights
=
kTRUE
;

812 i‡(
fú°NegWeight
){

813 
fú°NegWeight
 = 
kFALSE
;

814 i‡(
fPaúNegWeightsGlobÆ
){

815 
	`Log
(Ë<< 
kWARNING
 << "Events withÇegativeÉvent weightsáre foundánd "

818 << 
Endl
;

820 
	`Log
(Ë<< 
kWARNING
 << "Events withÇegativeÉvent weightsáre USED during "

825 << 
Endl
;

830 i‡(
fAutom©ic
) {

831 
DoubÀ_t
 
modulo
 = 1.0/(
fFVÆid©i⁄Evíts
);

832 
I¡_t
 
imodulo
 = 
°©ic_ˇ°
<I¡_t>–
	`fmod
(
modulo
,1.0Ë> 0.5 ? 
	`˚û
(moduloË: 
	`Êo‹
(modulo) );

833 i‡(
õvt
 % 
imodulo
 =0Ë
fVÆid©i⁄Sam∂e
.
	`push_back
–
evít
 );

834 
fEvítSam∂e
.
	`push_back
–
evít
 );

837 
fEvítSam∂e
.
	`push_back
(
evít
);

842 i‡(
fAutom©ic
) {

843 
	`Log
(Ë<< 
kINFO
 << "<InôEvítSam∂e> I¡î«Œy I u£ " << 
fEvítSam∂e
.
	`size
()

844 << " f‹ Tøöögánd " << 
fVÆid©i⁄Sam∂e
.
	`size
()

845 << " f‹ Prunög VÆid©i⁄ (" << ((
Flﬂt_t
)
fVÆid©i⁄Sam∂e
.
	`size
())/((Flﬂt_t)
fEvítSam∂e
.size()+fValidationSample.size())*100.0

846 << "% o‡åaöög u£d f‹ vÆid©i⁄)" << 
Endl
;

850 i‡(
fPaúNegWeightsGlobÆ
Ë
	`PªPro˚ssNeg©iveEvítWeights
();

853 i‡(!
	`DoRegªssi⁄
(Ë&& !
fSkùN‹mÆiz©i⁄
){

854 
	`Log
(Ë<< 
kDEBUG
 << "\t<InôEvítSam∂e> F‹ cœssifiˇti⁄Åªes, "<< 
Endl
;

855 
	`Log
(Ë<< 
kDEBUG
 << " \âhêef„˘ivênumbî o‡background†i†sˇÀdÅÿm©ch "<<
Endl
;

856 
	`Log
(Ë<< 
kDEBUG
 << " \âhêsig«l. Othîwi£Åhêfú° boo°ög sã∞would dÿ'ju°Åh©'!"<<
Endl
;

870 
DoubÀ_t
 
√víts
 = 
fEvítSam∂e
.
	`size
();

871 
DoubÀ_t
 
sumSigW
=0, 
sumBkgW
=0;

872 
I¡_t
 
sumSig
=0, 
sumBkg
=0;

873 
UI¡_t
 
õvt
=0; ievt<
fEvítSam∂e
.
	`size
(); ievt++) {

874 i‡((
	`D©aInfo
().
	`IsSig«l
(
fEvítSam∂e
[
õvt
])) ) {

875 
sumSigW
 +
fEvítSam∂e
[
õvt
]->
	`GëWeight
();

876 
sumSig
++;

878 
sumBkgW
 +
fEvítSam∂e
[
õvt
]->
	`GëWeight
();

879 
sumBkg
++;

882 i‡(
sumSigW
 && 
sumBkgW
){

883 
DoubÀ_t
 
n‹mSig
 = 
√víts
/((1+
fSigToBkgFø˘i⁄
)*
sumSigW
)*fSigToBkgFraction;

884 
DoubÀ_t
 
n‹mBkg
 = 
√víts
/((1+
fSigToBkgFø˘i⁄
)*
sumBkgW
); ;

885 
	`Log
(Ë<< 
kDEBUG
 << "\tre-normaliseÉvents suchÅhat Sigánd Bkg haveÑespective sum of weights = "

886 << 
fSigToBkgFø˘i⁄
 << 
Endl
;

887 
	`Log
(Ë<< 
kDEBUG
 << " \tsig->sig*"<<
n‹mSig
 << "ev. bkg->bkg*"<<
n‹mBkg
 << "ev." <<
Endl
;

888 
	`Log
(Ë<< 
kHEADER
 << "#evíts: (ªweighãdËsig: "<< 
sumSigW
*
n‹mSig
 << " bkg: " << 
sumBkgW
*
n‹mBkg
 << 
Endl
;

889 
	`Log
(Ë<< 
kINFO
 << "#evíts: (unweighãdËsig: "<< 
sumSig
 << " bkg: " << 
sumBkg
 << 
Endl
;

890 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

891 i‡((
	`D©aInfo
().
	`IsSig«l
(
fEvítSam∂e
[
õvt
])ËËfEvítSam∂e[õvt]->
	`SëBoo°Weight
(
n‹mSig
);

892 
fEvítSam∂e
[
õvt
]->
	`SëBoo°Weight
(
n‹mBkg
);

895 
	`Log
(Ë<< 
kINFO
 << "--> couldÇŸ dëîmöêsˇlög fa˘‹†a†eôhîÅhîê¨ê" << 
Endl
;

896 
	`Log
(Ë<< 
kINFO
 << "Çÿsig«»evít†(sumSigW="<<
sumSigW
<<"Ë‹ÇÿbkgÉv. (sumBkgW="<<
sumBkgW
<<")"<<
Endl
;

901 
fTøöSam∂e
 = &
fEvítSam∂e
;

902 i‡(
fBaggedBoo°
){

903 
	`GëBaggedSubSam∂e
(
fEvítSam∂e
);

904 
fTøöSam∂e
 = &
fSubSam∂e
;

917 
	}
}

926 
	gTMVA
::
MëhodBDT
::
	$PªPro˚ssNeg©iveEvítWeights
(){

927 
DoubÀ_t
 
tŸÆNegWeights
 = 0;

928 
DoubÀ_t
 
tŸÆPosWeights
 = 0;

929 
DoubÀ_t
 
tŸÆWeights
 = 0;

930 
°d
::
ve˘‹
<c⁄° 
Evít
*> 
√gEvíts
;

931 
UI¡_t
 
õv
 = 0; iev < 
fEvítSam∂e
.
	`size
(); iev++){

932 i‡(
fEvítSam∂e
[
õv
]->
	`GëWeight
() < 0) {

933 
tŸÆNegWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

934 
√gEvíts
.
	`push_back
(
fEvítSam∂e
[
õv
]);

936 
tŸÆPosWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

938 
tŸÆWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

940 i‡(
tŸÆNegWeights
 == 0 ) {

941 
	`Log
(Ë<< 
kINFO
 << "nÿ√g©ivêevíàweight†found ..Çÿ¥ïro˚ssögÇe˚sßry" << 
Endl
;

944 
	`Log
(Ë<< 
kINFO
 << "foundáÅŸÆ o‡" << 
tŸÆNegWeights
 << " o‡√g©ivêevíàweight†which Iám goögÅÿåyÅÿ∑ú wôhÖosôivêevít†tÿ™nihû©êthem" << 
Endl
;

945 
	`Log
(Ë<< 
kINFO
 << "foundáÅŸÆ o‡" << 
tŸÆPosWeights
 << " o‡evít†wôhÖosôivêweights" << 
Endl
;

946 
	`Log
(Ë<< 
kINFO
 << "-->ÅŸÆ sum o‡weight†" << 
tŸÆWeights
 << " = " << 
tŸÆNegWeights
+
tŸÆPosWeights
 << 
Endl
;

949 
°d
::
ve˘‹
<
TM©rixDSym
*>* 
cov
 = 
	`gToﬁs
().
	`CÆcCov¨ün˚M©ri˚s
–
fEvítSam∂e
, 2);

951 
TM©rixDSym
 *
övCov
;

953 
I¡_t
 
i
=0; i<2; i++){

954 
övCov
 = ((*
cov
)[
i
]);

955 i‡–
TM©h
::
	`Abs
(
övCov
->
	`Dëîmö™t
()) < 10E-24 ) {

956 
°d
::
cout
 << "<MethodBDT::PreProcessNeg...> matrix isálmost singular with determinant="

957 << 
TM©h
::
	`Abs
(
övCov
->
	`Dëîmö™t
())

959 << 
°d
::
ídl
;

961 i‡–
TM©h
::
	`Abs
(
övCov
->
	`Dëîmö™t
()) < 10E-120 ) {

962 
°d
::
cout
 << "<MethodBDT::PreProcessNeg...> matrix is singular with determinant="

963 << 
TM©h
::
	`Abs
(
övCov
->
	`Dëîmö™t
())

965 << 
°d
::
ídl
;

968 
övCov
->
	`Invît
();

973 
	`Log
(Ë<< 
kINFO
 << "FoundáÅŸÆ o‡" << 
tŸÆNegWeights
 << " i¿√g©ivêweight†ouào‡" << 
fEvítSam∂e
.
	`size
(Ë<< "ÅøöögÉvít†" << 
Endl
;

974 
Timî
 
	`timî
(
√gEvíts
.
	`size
(),"Negative EventÖaired");

975 
UI¡_t
 
√v
 = 0;Çev < 
√gEvíts
.
	`size
();Çev++){

976 
timî
.
	`DøwProgªssB¨
–
√v
 );

977 
DoubÀ_t
 
weight
 = 
√gEvíts
[
√v
]->
	`GëWeight
();

978 
UI¡_t
 
iCœssID
 = 
√gEvíts
[
√v
]->
	`GëCœss
();

979 
övCov
 = ((*
cov
)[
iCœssID
]);

980 
weight
 < 0){

983 
I¡_t
 
iMö
=-1;

984 
DoubÀ_t
 
di°
, 
möDi°
=10E270;

985 
UI¡_t
 
õv
 = 0; iev < 
fEvítSam∂e
.
	`size
(); iev++){

986 i‡(
iCœssID
==
fEvítSam∂e
[
õv
]->
	`GëCœss
(Ë&& fEvítSam∂e[õv]->
	`GëWeight
() > 0){

987 
di°
=0;

988 
UI¡_t
 
iv¨
=0; iv¨ < 
	`GëNv¨
(); ivar++){

989 
UI¡_t
 
jv¨
=0; jv¨<
	`GëNv¨
(); jvar++){

990 
di°
 +(
√gEvíts
[
√v
]->
	`GëVÆue
(
iv¨
)-
fEvítSam∂e
[
õv
]->GetValue(ivar))*

991 (*
övCov
)[
iv¨
][
jv¨
]*

992 (
√gEvíts
[
√v
]->
	`GëVÆue
(
jv¨
)-
fEvítSam∂e
[
õv
]->GetValue(jvar));

995 i‡(
di°
 < 
möDi°
Ë{ 
iMö
=
õv
; minDist=dist;}

999 i‡(
iMö
 > -1) {

1001 
DoubÀ_t
 
√wWeight
 = (
√gEvíts
[
√v
]->
	`GëWeight
(Ë+ 
fEvítSam∂e
[
iMö
]->GetWeight());

1002 i‡(
√wWeight
 > 0){

1003 
√gEvíts
[
√v
]->
	`SëBoo°Weight
( 0 );

1004 
fEvítSam∂e
[
iMö
]->
	`SëBoo°Weight
–
√wWeight
/fEvítSam∂e[iMö]->
	`GëOrigöÆWeight
() );

1006 
√gEvíts
[
√v
]->
	`SëBoo°Weight
–
√wWeight
/√gEvíts[√v]->
	`GëOrigöÆWeight
() );

1007 
fEvítSam∂e
[
iMö
]->
	`SëBoo°Weight
( 0 );

1010 } 
	`Log
(Ë<< 
kFATAL
 << "¥ïro˚ssög didn'àfödÉvíàtÿ∑ú wôhÅhê√g©ivêweighà...Örobablyá bug" << 
Endl
;

1011 
weight
 = 
√gEvíts
[
√v
]->
	`GëWeight
();

1014 
	`Log
(Ë<< 
kINFO
 << "<Neg©ivêEvíàPaúög>Åook: " << 
timî
.
	`GëEœp£dTime
()

1015 << " " << 
Endl
;

1018 
tŸÆNegWeights
 = 0;

1019 
tŸÆPosWeights
 = 0;

1020 
tŸÆWeights
 = 0;

1021 
DoubÀ_t
 
sigWeight
=0;

1022 
DoubÀ_t
 
bkgWeight
=0;

1023 
I¡_t
 
nSig
=0;

1024 
I¡_t
 
nBkg
=0;

1026 
°d
::
ve˘‹
<c⁄° 
Evít
*> 
√wEvítSam∂e
;

1028 
UI¡_t
 
õv
 = 0; iev < 
fEvítSam∂e
.
	`size
(); iev++){

1029 i‡(
fEvítSam∂e
[
õv
]->
	`GëWeight
() < 0) {

1030 
tŸÆNegWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1031 
tŸÆWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1033 
tŸÆPosWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1034 
tŸÆWeights
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1036 i‡(
fEvítSam∂e
[
õv
]->
	`GëWeight
() > 0) {

1037 
√wEvítSam∂e
.
	`push_back
(
√w
 
	`Evít
(*
fEvítSam∂e
[
õv
]));

1038 i‡(
fEvítSam∂e
[
õv
]->
	`GëCœss
(Ë=
fSig«lCœss
){

1039 
sigWeight
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1040 
nSig
+=1;

1042 
bkgWeight
 +
fEvítSam∂e
[
õv
]->
	`GëWeight
();

1043 
nBkg
+=1;

1047 i‡(
tŸÆNegWeights
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << " com≥nßti⁄ o‡√g©ivêevíàweight†wôhÖosôivê⁄e†didÇŸ w‹k " <<ÅŸÆNegWeight†<< 
Endl
;

1049 
UI¡_t
 
i
=0; i<
fEvítSam∂e
.
	`size
(); i++Ë
dñëe
 fEventSample[i];

1050 
fEvítSam∂e
 = 
√wEvítSam∂e
;

1052 
	`Log
(Ë<< 
kINFO
 << "á·î PªPro˚ssög,ÅhêEvíàßm∂êi†À· wôh " << 
fEvítSam∂e
.
	`size
(Ë<< "Évít†(unweighãd),áŒ wôhÖosôivêweights,áddög u∞tÿ" << 
tŸÆWeights
 << 
Endl
;

1053 
	`Log
(Ë<< 
kINFO
 << "ÇSig="<<
nSig
 << " sigWeight="<<
sigWeight
 << "ÇBkg="<<
nBkg
 << " bkgWeight="<<
bkgWeight
 << 
Endl
;

1056 
	}
}

1062 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gTMVA
::
MëhodBDT
::
	$O±imizeTunögP¨amëîs
(
TSåög
 
fomTy≥
, TSåög 
fôTy≥
)

1065 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*> 
tu√P¨amëîs
;

1066 
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
tu√dP¨amëîs
;

1075 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("NTªes", 
√w
 
	`I¡îvÆ
(10,1000,5)));

1076 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("MaxDïth", 
√w
 
	`I¡îvÆ
(2,4,3)));

1077 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("MöNodeSize", 
√w
 
	`LogI¡îvÆ
(1,30,30)));

1082 i‡(
fBoo°Ty≥
=="AdaBoost"){

1083 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("AdaBoo°Bëa", 
√w
 
	`I¡îvÆ
(.2,1.,5)));

1085 }i‡(
fBoo°Ty≥
=="Grad"){

1086 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Shrökage", 
√w
 
	`I¡îvÆ
(0.05,0.50,5)));

1088 }i‡(
fBoo°Ty≥
=="Baggög" && 
fR™domi£dTªes
){

1089 
I¡_t
 
mö_v¨
 = 
TM©h
::
	`Flo‹Nöt
–
	`GëNv¨
() * .25 );

1090 
I¡_t
 
max_v¨
 = 
TM©h
::
	`CeûNöt
–
	`GëNv¨
() * .75 );

1091 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("U£Nv¨s", 
√w
 
	`I¡îvÆ
(
mö_v¨
,
max_v¨
,4)));

1095 
	`Log
()<<
kINFO
 << "Åhêfﬁlowög BDTÖ¨amëî†wû»bêtu√d o¿thêª•e˘ivê*grid*\n"<<
Endl
;

1096 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

1097 
ô
=
tu√P¨amëîs
.
	`begö
(); it!tu√P¨amëîs.
	`íd
(); it++){

1098 
	`Log
(Ë<< 
kWARNING
 << 
ô
->
fú°
 << 
Endl
;

1099 
°d
::
o°rög°ªam
 
oss
;

1100 (
ô
->
£c⁄d
)->
	`Pröt
(
oss
);

1101 
	`Log
()<<
oss
.
	`°r
();

1102 
	`Log
()<<
Endl
;

1105 
O±imizeC⁄figP¨amëîs
 
	`›timize
(
this
, 
tu√P¨amëîs
, 
fomTy≥
, 
fôTy≥
);

1106 
tu√dP¨amëîs
=
›timize
.
	`›timize
();

1108  
tu√dP¨amëîs
;

1110 
	}
}

1115 
	gTMVA
::
MëhodBDT
::
SëTu√P¨amëîs
(
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
tu√P¨amëîs
)

1117 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
>::
ôî©‹
 
ô
;

1118 
	gô
=
tu√P¨amëîs
.
begö
(); it!tu√P¨amëîs.
íd
(); it++){

1119 
Log
(Ë<< 
	gkWARNING
 << 
	gô
->
	gfú°
 << " = " << it->
	g£c⁄d
 << 
	gEndl
;

1120 i‡(
	gô
->
	gfú°
 ="MaxDïth" ) 
SëMaxDïth
 ((
I¡_t
)
ô
->
£c⁄d
);

1121 i‡(
	gô
->
	gfú°
 ="MöNodeSize" ) 
SëMöNodeSize
 (
ô
->
£c⁄d
);

1122 i‡(
	gô
->
	gfú°
 ="NTªes" ) 
SëNTªes
 ((
I¡_t
)
ô
->
£c⁄d
);

1123 i‡(
	gô
->
	gfú°
 ="NodePurôyLimô"Ë
SëNodePurôyLimô
 (
ô
->
£c⁄d
);

1124 i‡(
	gô
->
	gfú°
 ="AdaBoo°Bëa" ) 
SëAdaBoo°Bëa
 (
ô
->
£c⁄d
);

1125 i‡(
	gô
->
	gfú°
 ="Shrökage" ) 
SëShrökage
 (
ô
->
£c⁄d
);

1126 i‡(
	gô
->
	gfú°
 ="U£Nv¨s" ) 
SëU£Nv¨s
 ((
I¡_t
)
ô
->
£c⁄d
);

1127 i‡(
	gô
->
	gfú°
 ="BaggedSam∂eFø˘i⁄" ) 
SëBaggedSam∂eFø˘i⁄
 (
ô
->
£c⁄d
);

1128 
Log
(Ë<< 
	gkFATAL
 << " SëP¨amëî f‹ " << 
	gô
->
	gfú°
 << "ÇŸ yë im∂emíãd " <<
	gEndl
;

1135 
	gTMVA
::
MëhodBDT
::
	$Tøö
()

1137 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
åue
;

1142 
	`InôEvítSam∂e
();

1144 i‡(
fNTªes
==0){

1145 
	`Log
(Ë<< 
kERROR
 << " Zero Decision Trees demanded...Åhat doesÇot work !! "

1147 << 
Endl
;

1148 
fNTªes
 = 1;

1151 i‡(
fI¡îa˘ive
 && fI¡îa˘ive->
	`NŸInôülized
()){

1152 
°d
::
ve˘‹
<
TSåög
> 
tôÀs
 = {"Boost weight", "Error Fraction"};

1153 
fI¡îa˘ive
->
	`Inô
(
tôÀs
);

1155 
fIPyMaxIãr
 = 
fNTªes
;

1156 
fExôFromTøöög
 = 
Ál£
;

1160 i‡(
	`IsN‹mÆi£d
()Ë
	`Log
(Ë<< 
kFATAL
 << "\"Normalise\" option cannot be used with BDT; "

1163 << 
Endl
;

1165 if(
	`DoRegªssi⁄
())

1166 
	`Log
(Ë<< 
kINFO
 << "Regªssi⁄ Los†Fun˘i⁄: "<< 
fRegªssi⁄LossFun˘i⁄BDTG
->
	`Name
(Ë<< 
Endl
;

1168 
	`Log
(Ë<< 
kINFO
 << "Tøöög "<< 
fNTªes
 << " Decisi⁄ Tªe†...Ö©õn˚ÖÀa£" << 
Endl
;

1170 
	`Log
(Ë<< 
kDEBUG
 << "Tøöög wôh maximÆ dïth = " <<
fMaxDïth


1171 << ", MöNodeEvíts=" << 
fMöNodeEvíts


1172 << ", NTªes="<<
fNTªes


1173 << ", NodePurôyLimô="<<
fNodePurôyLimô


1174 << ", AdaBoo°Bëa="<<
fAdaBoo°Bëa


1175 << 
Endl
;

1178 
I¡_t
 
nBös
;

1179 
DoubÀ_t
 
xMö
,
xMax
;

1180 
TSåög
 
h«me
 = "AdaBooost weight distribution";

1182 
nBös
= 100;

1183 
xMö
 = 0;

1184 
xMax
 = 30;

1186 i‡(
	`DoRegªssi⁄
()) {

1187 
nBös
= 100;

1188 
xMö
 = 0;

1189 
xMax
 = 1;

1190 
h«me
="BoostÉvent weights distribution";

1195 
TH1
* 
h
 = 
√w
 
	`TH1F
(
	`F‹m
("%s_Boo°Weight",
	`D©aInfo
().
	`GëName
()),
h«me
,
nBös
,
xMö
,
xMax
);

1196 
TH1
* 
nodesBef‹ePrunögVsTªe
 = 
√w
 
	`TH1I
(
	`F‹m
("%s_NodesBef‹ePrunög",
	`D©aInfo
().
	`GëName
()),"node†bef‹ê¥unög",
fNTªes
,0,fNTrees);

1197 
TH1
* 
nodesA·îPrunögVsTªe
 = 
√w
 
	`TH1I
(
	`F‹m
("%s_NodesA·îPrunög",
	`D©aInfo
().
	`GëName
()),"node†a·îÖrunög",
fNTªes
,0,fNTrees);

1201 if(!
	`DoMu…i˛ass
()){

1202 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

1204 
h
->
	`SëXTôÀ
("boost weight");

1205 
ªsu…s
->
	`St‹e
(
h
, "BoostWeights");

1209 i‡(
fDoBoo°M⁄ô‹
){

1210 
TH2
* 
boo°M⁄ô‹
 = 
√w
 
	`TH2F
("Boo°M⁄ô‹","ROC I¡egø»V†iTªe",2,0,
fNTªes
,2,0,1.05);

1211 
boo°M⁄ô‹
->
	`SëXTôÀ
("#tree");

1212 
boo°M⁄ô‹
->
	`SëYTôÀ
("ROC Integral");

1213 
ªsu…s
->
	`St‹e
(
boo°M⁄ô‹
, "BoostMonitor");

1214 
TGøph
 *
boo°M⁄ô‹Gøph
 = 
√w
 
	`TGøph
();

1215 
boo°M⁄ô‹Gøph
->
	`SëName
("BoostMonitorGraph");

1216 
boo°M⁄ô‹Gøph
->
	`SëTôÀ
("ROCIntegralVsNTrees");

1217 
ªsu…s
->
	`St‹e
(
boo°M⁄ô‹Gøph
, "BoostMonitorGraph");

1221 
h
 = 
√w
 
	`TH1F
("Boo°WeightVsTªe","Boo° weight†v†åì",
fNTªes
,0,fNTrees);

1222 
h
->
	`SëXTôÀ
("#tree");

1223 
h
->
	`SëYTôÀ
("boost weight");

1224 
ªsu…s
->
	`St‹e
(
h
, "BoostWeightsVsTree");

1227 
h
 = 
√w
 
	`TH1F
("EºFø˘Hi°","îr‹ fø˘i⁄ v†åìÇumbî",
fNTªes
,0,fNTrees);

1228 
h
->
	`SëXTôÀ
("#tree");

1229 
h
->
	`SëYTôÀ
("error fraction");

1230 
ªsu…s
->
	`St‹e
(
h
, "ErrorFrac");

1233 
nodesBef‹ePrunögVsTªe
->
	`SëXTôÀ
("#tree");

1234 
nodesBef‹ePrunögVsTªe
->
	`SëYTôÀ
("#treeÇodes");

1235 
ªsu…s
->
	`St‹e
(
nodesBef‹ePrunögVsTªe
);

1238 
nodesA·îPrunögVsTªe
->
	`SëXTôÀ
("#tree");

1239 
nodesA·îPrunögVsTªe
->
	`SëYTôÀ
("#treeÇodes");

1240 
ªsu…s
->
	`St‹e
(
nodesA·îPrunögVsTªe
);

1244 
fM⁄ô‹Ntu∂e

√w
 
	`TTªe
("MonitorNtuple","BDT variables");

1245 
fM⁄ô‹Ntu∂e
->
	`Bønch
("iTªe",&
fITªe
,"iTree/I");

1246 
fM⁄ô‹Ntu∂e
->
	`Bønch
("boo°Weight",&
fBoo°Weight
,"boostWeight/D");

1247 
fM⁄ô‹Ntu∂e
->
	`Bønch
("îr‹Fø˘i⁄",&
fEº‹Fø˘i⁄
,"errorFraction/D");

1249 
Timî
 
	`timî
–
fNTªes
, 
	`GëName
() );

1250 
I¡_t
 
nNodesBef‹ePrunögCou¡
 = 0;

1251 
I¡_t
 
nNodesA·îPrunögCou¡
 = 0;

1253 
I¡_t
 
nNodesBef‹ePrunög
 = 0;

1254 
I¡_t
 
nNodesA·îPrunög
 = 0;

1257 if(
fBoo°Ty≥
=="Grad"){

1258 
	`InôGødBoo°
(
fEvítSam∂e
);

1261 
I¡_t
 
ôªe
=0;

1262 
Boﬁ_t
 
c⁄töueBoo°
=
kTRUE
;

1264 
ôªe
 < 
fNTªes
 && 
c⁄töueBoo°
){

1265 i‡(
fExôFromTøöög
) ;

1266 
fIPyCuºítIãr
 = 
ôªe
;

1267 
timî
.
	`DøwProgªssB¨
–
ôªe
 );

1278 if(
	`DoMu…i˛ass
()){

1279 i‡(
fBoo°Ty≥
!="Grad"){

1280 
	`Log
(Ë<< 
kFATAL
 << "Multiclass is currently only supported by gradient boost. "

1282 << 
Endl
;

1284 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

1285 
UI¡_t
 
i
=0;i<
nCœs£s
;i++){

1286 
fF‹e°
.
	`push_back
–
√w
 
	`Decisi⁄Tªe
–
fSïTy≥
, 
fMöNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 
i
,

1287 
fR™domi£dTªes
, 
fU£Nv¨s
, 
fU£Poiss⁄Nv¨s
, 
fMaxDïth
,

1288 
ôªe
*
nCœs£s
+
i
, 
fNodePurôyLimô
, itree*nClasses+1));

1289 
fF‹e°
.
	`back
()->
	`SëNV¨s
(
	`GëNv¨
());

1290 i‡(
fU£FishîCuts
) {

1291 
fF‹e°
.
	`back
()->
	`SëU£FishîCuts
();

1292 
fF‹e°
.
	`back
()->
	`SëMöLöC‹rF‹Fishî
(
fMöLöC‹rF‹Fishî
);

1293 
fF‹e°
.
	`back
()->
	`SëU£Ex˛usiveV¨s
(
fU£Ex˛usiveV¨s
);

1297 
nNodesBef‹ePrunög
 = 
fF‹e°
.
	`back
()->
	`BuûdTªe
(*
fTøöSam∂e
);

1298 
DoubÀ_t
 
bw
 = 
this
->
	`Boo°
(*
fTøöSam∂e
, 
fF‹e°
.
	`back
(),
i
);

1299 i‡(
bw
 > 0) {

1300 
fBoo°Weights
.
	`push_back
(
bw
);

1302 
fBoo°Weights
.
	`push_back
(0);

1303 
	`Log
(Ë<< 
kWARNING
 << "°›≥d boo°ögáàôªe="<<
ôªe
 << 
Endl
;

1305 
c⁄töueBoo°
=
kFALSE
;

1310 
fF‹e°
.
	`push_back
–
√w
 
	`Decisi⁄Tªe
–
fSïTy≥
, 
fMöNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 
fSig«lCœss
,

1311 
fR™domi£dTªes
, 
fU£Nv¨s
, 
fU£Poiss⁄Nv¨s
, 
fMaxDïth
,

1312 
ôªe
, 
fNodePurôyLimô
, itree));

1313 
fF‹e°
.
	`back
()->
	`SëNV¨s
(
	`GëNv¨
());

1314 i‡(
fU£FishîCuts
) {

1315 
fF‹e°
.
	`back
()->
	`SëU£FishîCuts
();

1316 
fF‹e°
.
	`back
()->
	`SëMöLöC‹rF‹Fishî
(
fMöLöC‹rF‹Fishî
);

1317 
fF‹e°
.
	`back
()->
	`SëU£Ex˛usiveV¨s
(
fU£Ex˛usiveV¨s
);

1320 
nNodesBef‹ePrunög
 = 
fF‹e°
.
	`back
()->
	`BuûdTªe
(*
fTøöSam∂e
);

1322 i‡(
fU£YesNoLóf
 && !
	`DoRegªssi⁄
(Ë&& 
fBoo°Ty≥
!="Grad") {

1323 
nNodesBef‹ePrunög
 = 
fF‹e°
.
	`back
()->
	`CÀ™Tªe
();

1326 
nNodesBef‹ePrunögCou¡
 +
nNodesBef‹ePrunög
;

1327 
nodesBef‹ePrunögVsTªe
->
	`SëBöC⁄ã¡
(
ôªe
+1,
nNodesBef‹ePrunög
);

1329 
fF‹e°
.
	`back
()->
	`SëPru√Mëhod
(
fPru√Mëhod
);

1330 
fF‹e°
.
	`back
()->
	`SëPru√Såígth
(
fPru√Såígth
);

1332 
°d
::
ve˘‹
<c⁄° 
Evít
*> * 
vÆid©i⁄Sam∂e
 = 
NULL
;

1333 if(
fAutom©ic
Ë
vÆid©i⁄Sam∂e
 = &
fVÆid©i⁄Sam∂e
;

1335 
DoubÀ_t
 
bw
 = 
this
->
	`Boo°
(*
fTøöSam∂e
, 
fF‹e°
.
	`back
());

1336 i‡(
bw
 > 0) {

1337 
fBoo°Weights
.
	`push_back
(
bw
);

1339 
fBoo°Weights
.
	`push_back
(0);

1340 
	`Log
(Ë<< 
kWARNING
 << "°›≥d boo°ögáàôªe="<<
ôªe
 << 
Endl
;

1341 
c⁄töueBoo°
=
kFALSE
;

1349 i‡(
fPru√Mëhod
 !
Decisi⁄Tªe
::
kNoPrunög
Ë
fF‹e°
.
	`back
()->
	`Pru√Tªe
(
vÆid©i⁄Sam∂e
);

1351 i‡(
fU£YesNoLóf
 && !
	`DoRegªssi⁄
(Ë&& 
fBoo°Ty≥
!="Grad"){

1352 
fF‹e°
.
	`back
()->
	`CÀ™Tªe
();

1354 
nNodesA·îPrunög
 = 
fF‹e°
.
	`back
()->
	`GëNNodes
();

1355 
nNodesA·îPrunögCou¡
 +
nNodesA·îPrunög
;

1356 
nodesA·îPrunögVsTªe
->
	`SëBöC⁄ã¡
(
ôªe
+1,
nNodesA·îPrunög
);

1358 i‡(
fI¡îa˘ive
){

1359 
fI¡îa˘ive
->
	`AddPoöt
(
ôªe
, 
fBoo°Weight
, 
fEº‹Fø˘i⁄
);

1361 
fITªe
 = 
ôªe
;

1362 
fM⁄ô‹Ntu∂e
->
	`Fûl
();

1363 i‡(
fDoBoo°M⁄ô‹
){

1364 i‡(! 
	`DoRegªssi⁄
() ){

1365 i‡–
ôªe
==
fNTªes
-1 || (!(itree%500)) ||

1366 (!(
ôªe
%250) && itree <1000)||

1367 (!(
ôªe
%100) && itree < 500)||

1368 (!(
ôªe
%50) && itree < 250)||

1369 (!(
ôªe
%25) && itree < 150)||

1370 (!(
ôªe
%10) && itree < 50)||

1371 (!(
ôªe
%5) && itree < 20)

1372 Ë
	`Boo°M⁄ô‹
(
ôªe
);

1376 
ôªe
++;

1380 
	`Log
(Ë<< 
kDEBUG
 << "\t<Tøö>Éœp£dÅime: " << 
timî
.
	`GëEœp£dTime
()

1381 << " " << 
Endl
;

1382 i‡(
fPru√Mëhod
 =
Decisi⁄Tªe
::
kNoPrunög
) {

1383 
	`Log
(Ë<< 
kDEBUG
 << "\t<Train>áverageÇumber ofÇodes (w/oÖruning) : "

1384 << 
nNodesBef‹ePrunögCou¡
/
	`GëNTªes
(Ë<< 
Endl
;

1387 
	`Log
(Ë<< 
kDEBUG
 << "\t<Train>áverageÇumber ofÇodes before/afterÖruning : "

1388 << 
nNodesBef‹ePrunögCou¡
/
	`GëNTªes
() << " / "

1389 << 
nNodesA·îPrunögCou¡
/
	`GëNTªes
()

1390 << 
Endl
;

1392 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
Ál£
;

1397 
	`Log
(Ë<< 
kDEBUG
 << "Now I dñëêthê¥iv© d©®ßm∂e"<< 
Endl
;

1398 
UI¡_t
 
i
=0; i<
fEvítSam∂e
.
	`size
(); i++Ë
dñëe
 fEventSample[i];

1399 
UI¡_t
 
i
=0; i<
fVÆid©i⁄Sam∂e
.
	`size
(); i++Ë
dñëe
 fValidationSample[i];

1400 
fEvítSam∂e
.
	`˛ór
();

1401 
fVÆid©i⁄Sam∂e
.
	`˛ór
();

1403 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

1404 
	`ExôFromTøöög
();

1405 
	}
}

1411 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$GëGødBoo°MVA
(c⁄° 
TMVA
::
Evít
* 
e
, 
UI¡_t
 
nTªes
)

1413 
DoubÀ_t
 
sum
=0;

1414 
UI¡_t
 
ôªe
=0; iåì<
nTªes
; itree++) {

1416 
sum
 +
fF‹e°
[
ôªe
]->
	`CheckEvít
(
e
,
kFALSE
);

1419  2.0/(1.0+
	`exp
(-2.0*
sum
))-1;

1420 
	}
}

1425 
	gTMVA
::
MëhodBDT
::
Upd©eT¨gës
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
UI¡_t
 
˛s
)

1427 i‡(
DoMu…i˛ass
()) {

1428 
UI¡_t
 
	gnCœs£s
 = 
D©aInfo
().
GëNCœs£s
();

1429 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
expCache
;

1430 i‡(
	g˛s
 =
nCœs£s
 - 1) {

1431 
expCache
.
ªsize
(
nCœs£s
);

1433 autÿ
	ge
 : 
evítSam∂e
) {

1434 
fResiduÆs
[
e
].
©
(
˛s
Ë+
fF‹e°
.
back
()->
CheckEvít
”, 
kFALSE
);

1435 i‡(
	g˛s
 =
nCœs£s
 - 1) {

1436 autÿ&
ªsiduÆsThisEvít
 = 
fResiduÆs
[
e
];

1437 
	g°d
::
å™sf‹m
(
ªsiduÆsThisEvít
.
begö
(),

1438 
ªsiduÆsThisEvít
.
begö
(Ë+ 
nCœs£s
,

1439 
expCache
.
begö
(), [](
DoubÀ_t
 
d
Ë{  
exp
(d); });

1440 
UI¡_t
 
	gi
 = 0; i < 
	gnCœs£s
; i++) {

1441 
DoubÀ_t
 
	gn‹m
 = 0.0;

1442 
UI¡_t
 
	gj
 = 0; j < 
	gnCœs£s
; j++) {

1443 i‡(
	gi
 !
j
) {

1444 
n‹m
 +
expCache
[
j
] /ÉxpCache[
i
];

1447 
DoubÀ_t
 
	gp_˛s
 = 1.0 / (1.0 + 
n‹m
);

1448 
DoubÀ_t
 
	gªs
 = (
e
->
GëCœss
(Ë=
i
Ë? (1.0 - 
p_˛s
) : (-p_cls);

1449 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
 *>(
e
)->
SëT¨gë
(
i
, 
ªs
);

1454 autÿ
	ge
 : 
evítSam∂e
) {

1455 autÿ&
ªsiduÆAt0
 = 
fResiduÆs
[
e
].
©
(0);

1456 
	gªsiduÆAt0
 +
fF‹e°
.
back
()->
CheckEvít
(
e
, 
kFALSE
);

1457 
DoubÀ_t
 
	gp_sig
 = 1.0 / (1.0 + 
exp
(-2.0 * 
ªsiduÆAt0
));

1458 
DoubÀ_t
 
	gªs
 = (
D©aInfo
().
IsSig«l
(
e
Ë? 1 : 0Ë- 
p_sig
;

1459 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
 *>(
e
)->
SëT¨gë
(0, 
ªs
);

1467 
	gTMVA
::
MëhodBDT
::
Upd©eT¨gësRegªssi⁄
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Boﬁ_t
 
fú°
)

1469 if(!
	gfú°
){

1470 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
fEvítSam∂e
.
begö
(); 
	ge
!=fEvítSam∂e.
íd
();e++) {

1471 
	gfLossFun˘i⁄EvítInfo
[*
e
].
	g¥edi˘edVÆue
 +
fF‹e°
.
back
()->
CheckEvít
(*e,
kFALSE
);

1475 
	gfRegªssi⁄LossFun˘i⁄BDTG
->
SëT¨gës
(
evítSam∂e
, 
fLossFun˘i⁄EvítInfo
);

1481 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
GødBoo°
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
, 
UI¡_t
 
˛s
)

1483 
	sLófInfo
 {

1484 
DoubÀ_t
 
	gsumWeightT¨gë
 = 0;

1485 
DoubÀ_t
 
	gsum2
 = 0;

1488 
	g°d
::
un‹dîed_m≠
<
TMVA
::
Decisi⁄TªeNode
*, 
	gLófInfo
> 
	gÀaves
;

1489 autÿ
	ge
 : 
evítSam∂e
) {

1490 
DoubÀ_t
 
weight
 = 
e
->
GëWeight
();

1491 
	gTMVA
::
Decisi⁄TªeNode
* 
node
 = 
dt
->
GëEvítNode
(*
e
);

1492 autÿ&
	gv
 = 
Àaves
[
node
];

1493 autÿ
	gèrgë
 = 
e
->
GëT¨gë
(
˛s
);

1494 
	gv
.
	gsumWeightT¨gë
 +
èrgë
 * 
weight
;

1495 
	gv
.
	gsum2
 +
Ábs
(
èrgë
Ë* (1.0-Ábs—¨gë)Ë* 
weight
 * weight;

1497 autÿ&
	giLóve
 : 
Àaves
) {

1498 
c⁄°ex¥
áutÿ
möVÆue
 = 1e-30;

1499 i‡(
	giLóve
.
	g£c⁄d
.
	gsum2
 < 
	gmöVÆue
) {

1500 
	giLóve
.
	g£c⁄d
.
	gsum2
 = 
möVÆue
;

1502 
	giLóve
.
	gfú°
->
SëRe•⁄£
(
fShrökage
/
D©aInfo
().
GëNCœs£s
(Ë* 
iLóve
.
£c⁄d
.
sumWeightT¨gë
/iLóve.£c⁄d.
sum2
);

1507 
DoMu…i˛ass
(Ë? 
Upd©eT¨gës
(
fEvítSam∂e
, 
˛s
) : UpdateTargets(fEventSample);

1514 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
GødBoo°Regªssi⁄
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
 )

1518 
	g°d
::
m≠
<
TMVA
::
Decisi⁄TªeNode
*,
	gve˘‹
< 
	gTMVA
::
LossFun˘i⁄EvítInfo
 > > 
Àaves
;

1519 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1520 
	gTMVA
::
Decisi⁄TªeNode
* 
node
 = 
dt
->
GëEvítNode
(*(*
e
));

1521 (
	gÀaves
[
node
]).
push_back
(
fLossFun˘i⁄EvítInfo
[*
e
]);

1526 
	g°d
::
m≠
<
TMVA
::
Decisi⁄TªeNode
*,
	gve˘‹
< 
	gTMVA
::
LossFun˘i⁄EvítInfo
 > >::
ôî©‹
 
iLóve
=
Àaves
.
begö
();

1527 
	giLóve
!=
Àaves
.
íd
();++iLeave){

1528 
DoubÀ_t
 
	gfô
 = 
fRegªssi⁄LossFun˘i⁄BDTG
->
Fô
(
iLóve
->
£c⁄d
);

1529 (
	giLóve
->
	gfú°
)->
SëRe•⁄£
(
fShrökage
*
fô
);

1532 
Upd©eT¨gësRegªssi⁄
(*
fTøöSam∂e
);

1539 
	gTMVA
::
MëhodBDT
::
InôGødBoo°
–
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
)

1544 
fSïTy≥
=
NULL
;

1545 if(
DoRegªssi⁄
()){

1546 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1547 
	gfLossFun˘i⁄EvítInfo
[*
e
]
TMVA
::
LossFun˘i⁄EvítInfo
((*e)->
GëT¨gë
(0), 0, (*e)->
GëWeight
());

1550 
	gfRegªssi⁄LossFun˘i⁄BDTG
->
Inô
(
fLossFun˘i⁄EvítInfo
, 
fBoo°Weights
);

1551 
Upd©eT¨gësRegªssi⁄
(*
fTøöSam∂e
,
kTRUE
);

1554 if(
DoMu…i˛ass
()){

1555 
UI¡_t
 
	gnCœs£s
 = 
D©aInfo
().
GëNCœs£s
();

1556 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1557 
UI¡_t
 
	gi
=0;i<
	gnCœs£s
;i++){

1559 
DoubÀ_t
 
	gr
 = (*
e
)->
GëCœss
()==
i
?(1-1.0/
nCœs£s
):(-1.0/nClasses);

1560 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
*>(*
e
)->
SëT¨gë
(
i
,
r
);

1561 
	gfResiduÆs
[*
e
].
push_back
(0);

1566 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1567 
DoubÀ_t
 
	gr
 = (
D©aInfo
().
IsSig«l
(*
e
)?1:0)-0.5;

1568 
	gc⁄°_ˇ°
<
	gTMVA
::
Evít
*>(*
e
)->
SëT¨gë
(0,
r
);

1569 
	gfResiduÆs
[*
e
].
push_back
(0);

1577 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$Te°TªeQuÆôy
–
Decisi⁄Tªe
 *
dt
 )

1579 
DoubÀ_t
 
nc‹ª˘
=0, 
nÁl£
=0;

1580 
UI¡_t
 
õvt
=0; ievt<
fVÆid©i⁄Sam∂e
.
	`size
(); ievt++) {

1581 
Boﬁ_t
 
isSig«lTy≥
(
dt
->
	`CheckEvít
(
fVÆid©i⁄Sam∂e
[
õvt
]Ë> 
fNodePurôyLimô
 ) ? 1 : 0;

1583 i‡(
isSig«lTy≥
 =(
	`D©aInfo
().
	`IsSig«l
(
fVÆid©i⁄Sam∂e
[
õvt
])) ) {

1584 
nc‹ª˘
 +
fVÆid©i⁄Sam∂e
[
õvt
]->
	`GëWeight
();

1587 
nÁl£
 +
fVÆid©i⁄Sam∂e
[
õvt
]->
	`GëWeight
();

1591  
nc‹ª˘
 / (nc‹ª˘ + 
nÁl£
);

1592 
	}
}

1598 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
Boo°
–
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
, 
UI¡_t
 
˛s
 )

1600 
DoubÀ_t
 
	gªtu∫VÆ
=-1;

1602 i‡(
	gfBoo°Ty≥
=="AdaBoo°"Ë
ªtu∫VÆ
 = 
this
->
AdaBoo°
 (
evítSam∂e
, 
dt
);

1603 i‡(
	gfBoo°Ty≥
=="AdaCo°"Ë
ªtu∫VÆ
 = 
this
->
AdaCo°
 (
evítSam∂e
, 
dt
);

1604 i‡(
	gfBoo°Ty≥
=="Baggög"Ë
ªtu∫VÆ
 = 
this
->
Baggög
 ( );

1605 i‡(
	gfBoo°Ty≥
=="RegBoo°"Ë
ªtu∫VÆ
 = 
this
->
RegBoo°
 (
evítSam∂e
, 
dt
);

1606 i‡(
	gfBoo°Ty≥
=="AdaBoo°R2"Ë
ªtu∫VÆ
 = 
this
->
AdaBoo°R2
(
evítSam∂e
, 
dt
);

1607 i‡(
	gfBoo°Ty≥
=="Grad"){

1608 if(
DoRegªssi⁄
())

1609 
ªtu∫VÆ
 = 
this
->
GødBoo°Regªssi⁄
(
evítSam∂e
, 
dt
);

1610 if(
DoMu…i˛ass
())

1611 
	gªtu∫VÆ
 = 
this
->
GødBoo°
 (
evítSam∂e
, 
dt
, 
˛s
);

1613 
	gªtu∫VÆ
 = 
this
->
GødBoo°
 (
evítSam∂e
, 
dt
);

1616 
Log
(Ë<< 
	gkINFO
 << 
GëO±i⁄s
(Ë<< 
	gEndl
;

1617 
Log
(Ë<< 
	gkFATAL
 << "<Boo°> unknow¿boo° o±i⁄ " << 
	gfBoo°Ty≥
<< " cÆÀd" << 
	gEndl
;

1620 i‡(
	gfBaggedBoo°
){

1621 
GëBaggedSubSam∂e
(
fEvítSam∂e
);

1625  
	gªtu∫VÆ
;

1632 
	gTMVA
::
MëhodBDT
::
	$Boo°M⁄ô‹
(
I¡_t
 
iTªe
)

1634 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(),
Ty≥s
::
kTøöög
, Ty≥s::
kMaxA«lysisTy≥
);

1636 
TH1F
 *
tmpS
 = 
√w
 
	`TH1F
( "tmpS", "", 100 , -1., 1.00001 );

1637 
TH1F
 *
tmpB
 = 
√w
 
	`TH1F
( "tmpB", "", 100 , -1., 1.00001 );

1638 
TH1F
 *
tmp
;

1641 
UI¡_t
 
sig«lCœssNr
 = 
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

1651 
UI¡_t
 
√víts
 = 
	`D©a
()->
	`GëNTe°Evíts
();

1652 
UI¡_t
 
õv
=0; iev < 
√víts
; iev++){

1653 c⁄° 
Evít
* 
evít
 = 
	`GëTe°ögEvít
(
õv
);

1655 i‡(
evít
->
	`GëCœss
(Ë=
sig«lCœssNr
Ë{
tmp
=
tmpS
;}

1656 {
tmp
=
tmpB
;}

1657 
tmp
->
	`Fûl
(
	`Priv©eGëMvaVÆue
(
evít
),evít->
	`GëWeight
());

1659 
DoubÀ_t
 
max
=1;

1661 
°d
::
ve˘‹
<
TH1F
*> 
hS
;

1662 
°d
::
ve˘‹
<
TH1F
*> 
hB
;

1663 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

1664 
hS
.
	`push_back
(
√w
 
	`TH1F
(
	`F‹m
("SigV¨%dAtTªe%d",
iv¨
,
iTªe
),F‹m("SigV¨%dAtTªe%d",iv¨,iTªe),100,
	`D©aInfo
().
	`GëV¨übÀInfo
(iv¨).
	`GëMö
(),D©aInfo().GëV¨übÀInfo(iv¨).
	`GëMax
()));

1665 
hB
.
	`push_back
(
√w
 
	`TH1F
(
	`F‹m
("BkgV¨%dAtTªe%d",
iv¨
,
iTªe
),F‹m("BkgV¨%dAtTªe%d",iv¨,iTªe),100,
	`D©aInfo
().
	`GëV¨übÀInfo
(iv¨).
	`GëMö
(),D©aInfo().GëV¨übÀInfo(iv¨).
	`GëMax
()));

1666 
ªsu…s
->
	`St‹e
(
hS
.
	`back
(),hS.back()->
	`GëTôÀ
());

1667 
ªsu…s
->
	`St‹e
(
hB
.
	`back
(),hB.back()->
	`GëTôÀ
());

1671 
UI¡_t
 
õv
=0; iev < 
fEvítSam∂e
.
	`size
(); iev++){

1672 i‡(
fEvítSam∂e
[
õv
]->
	`GëBoo°Weight
(Ë> 
max
) max = 1.01*fEventSample[iev]->GetBoostWeight();

1674 
TH1F
 *
tmpBoo°WeightsS
 = 
√w
 
	`TH1F
(
	`F‹m
("Boo°WeightsInTªeS%d",
iTªe
),F‹m("Boo°WeightsInTªeS%d",iTªe),100,0.,
max
);

1675 
TH1F
 *
tmpBoo°WeightsB
 = 
√w
 
	`TH1F
(
	`F‹m
("Boo°WeightsInTªeB%d",
iTªe
),F‹m("Boo°WeightsInTªeB%d",iTªe),100,0.,
max
);

1676 
ªsu…s
->
	`St‹e
(
tmpBoo°WeightsS
,tmpBoo°WeightsS->
	`GëTôÀ
());

1677 
ªsu…s
->
	`St‹e
(
tmpBoo°WeightsB
,tmpBoo°WeightsB->
	`GëTôÀ
());

1679 
TH1F
 *
tmpBoo°Weights
;

1680 
°d
::
ve˘‹
<
TH1F
*> *
h
;

1682 
UI¡_t
 
õv
=0; iev < 
fEvítSam∂e
.
	`size
(); iev++){

1683 i‡(
fEvítSam∂e
[
õv
]->
	`GëCœss
(Ë=
sig«lCœssNr
) {

1684 
tmpBoo°Weights
=
tmpBoo°WeightsS
;

1685 
h
=&
hS
;

1687 
tmpBoo°Weights
=
tmpBoo°WeightsB
;

1688 
h
=&
hB
;

1690 
tmpBoo°Weights
->
	`Fûl
(
fEvítSam∂e
[
õv
]->
	`GëBoo°Weight
());

1691 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

1692 (*
h
)[
iv¨
]->
	`Fûl
(
fEvítSam∂e
[
õv
]->
	`GëVÆue
(iv¨),fEvítSam∂e[õv]->
	`GëWeight
());

1697 
TMVA
::
PDF
 *
sig
 = 
√w
 TMVA::
	`PDF
–" PDF Sig", 
tmpS
, TMVA::PDF::
kS∂öe3
 );

1698 
TMVA
::
PDF
 *
bkg
 = 
√w
 TMVA::
	`PDF
–" PDF Bkg", 
tmpB
, TMVA::PDF::
kS∂öe3
 );

1701 
TGøph
* 
gr
=
ªsu…s
->
	`GëGøph
("BoostMonitorGraph");

1702 
I¡_t
 
nPoöts
 = 
gr
->
	`GëN
();

1703 
gr
->
	`Së
(
nPoöts
+1);

1704 
gr
->
	`SëPoöt
(
nPoöts
,(
DoubÀ_t
)
iTªe
+1,
	`GëROCI¡egøl
(
sig
,
bkg
));

1706 
tmpS
->
	`Dñëe
();

1707 
tmpB
->
	`Dñëe
();

1709 
dñëe
 
sig
;

1710 
dñëe
 
bkg
;

1713 
	}
}

1726 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
AdaBoo°
–
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
 )

1728 
DoubÀ_t
 
	gîr
=0, 
	gsumGlobÆw
=0, 
	gsumGlobÆwÁl£
=0, 
	gsumGlobÆwÁl£2
=0;

1730 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
sumw
(
D©aInfo
().
GëNCœs£s
(),0);

1732 
DoubÀ_t
 
	gmaxDev
=0;

1733 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1734 
DoubÀ_t
 
	gw
 = (*
e
)->
GëWeight
();

1735 
	gsumGlobÆw
 +
w
;

1736 
UI¡_t
 
	gi˛ass
=(*
e
)->
GëCœss
();

1737 
	gsumw
[
i˛ass
] +
w
;

1739 i‡–
DoRegªssi⁄
() ) {

1740 
DoubÀ_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0) );

1741 
	gsumGlobÆwÁl£
 +
w
 * 
tmpDev
;

1742 
	gsumGlobÆwÁl£2
 +
w
 * 
tmpDev
*tmpDev;

1743 i‡(
	gtmpDev
 > 
	gmaxDev
ËmaxDev = 
tmpDev
;

1746 i‡(
	gfU£YesNoLóf
){

1747 
Boﬁ_t
 
	gisSig«lTy≥
 = (
dt
->
CheckEvít
(*
e
,
fU£YesNoLóf
Ë> 
	gfNodePurôyLimô
 );

1748 i‡(!(
	gisSig«lTy≥
 =
D©aInfo
().
IsSig«l
(*
e
))) {

1749 
sumGlobÆwÁl£
+
w
;

1752 
DoubÀ_t
 
	gdtouçut
 = (
dt
->
CheckEvít
(*
e
,
fU£YesNoLóf
) - 0.5)*2.;

1753 
I¡_t
 
	gåueTy≥
;

1754 i‡(
D©aInfo
().
IsSig«l
(*
e
)Ë
	gåueTy≥
 = 1;

1755 
	gåueTy≥
 = -1;

1756 
	gsumGlobÆwÁl£
+
w
*
åueTy≥
*
dtouçut
;

1761 
	gîr
 = 
sumGlobÆwÁl£
/
sumGlobÆw
 ;

1762 i‡–
DoRegªssi⁄
() ) {

1764 i‡(
	gfAdaBoo°R2Loss
=="linear"){

1765 
îr
 = 
sumGlobÆwÁl£
/
maxDev
/
sumGlobÆw
 ;

1767 i‡(
	gfAdaBoo°R2Loss
=="quadratic"){

1768 
îr
 = 
sumGlobÆwÁl£2
/
maxDev
/maxDev/
sumGlobÆw
 ;

1770 i‡(
	gfAdaBoo°R2Loss
=="exponential"){

1771 
îr
 = 0;

1772 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1773 
DoubÀ_t
 
	gw
 = (*
e
)->
GëWeight
();

1774 
DoubÀ_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0) );

1775 
	gîr
 +
w
 * (1 - 
exp
 (-
tmpDev
/
maxDev
)Ë/ 
sumGlobÆw
;

1780 
Log
(Ë<< 
	gkFATAL
 << " you've chosená LossÅype for Adaboost otherÅhanÜinear, quadratic orÉxponential "

1781 << "Çamñy " << 
	gfAdaBoo°R2Loss
 << "\n"

1782 << "™dÅhi†i†nŸ im∂emíãd...áÅypÿöÅhê›ti⁄†??" <<
	gEndl
;

1786 
Log
(Ë<< 
	gkDEBUG
 << "BDT AdaBoo† wr⁄g/Æl: " << 
	gsumGlobÆwÁl£
 << "/" << 
	gsumGlobÆw
 << 
	gEndl
;

1789 
DoubÀ_t
 
	g√wSumGlobÆw
=0;

1790 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
√wSumw
(
sumw
.
size
(),0);

1792 
DoubÀ_t
 
	gboo°Weight
=1.;

1793 i‡(
	gîr
 >0.5 && 
fU£YesNoLóf
) {

1796 i‡(
dt
->
GëNNodes
() == 1){

1797 
Log
(Ë<< 
kERROR
 << " YOURÅree has only 1 Node... kind ofá funny *tree*. I cannot "

1799 << 
Endl


1801 << 
Endl
;

1804 
Log
(Ë<< 
	gkERROR
 << " Thêîr‹Ñ©êöÅhêBDT boo°ög i†> 0.5. ("<< 
	gîr


1806 << " st› boo°ög hîe" << 
	gEndl
;

1809 
	gîr
 = 0.5;

1810 } i‡(
	gîr
 < 0) {

1811 
Log
(Ë<< 
	gkERROR
 << " TheÉrrorÑate inÅhe BDT boosting is < 0. That can happen"

1814 << " f‹Åhêtimêbeög I së iàtÿô†absﬁuã vÆue.. ju°Åÿc⁄töue.." << 
	gEndl
;

1815 
	gîr
 = 
TM©h
::
Abs
(
îr
);

1817 i‡(
	gfU£YesNoLóf
)

1818 
	gboo°Weight
 = 
TM©h
::
Log
((1.-
îr
)/îr)*
fAdaBoo°Bëa
;

1820 
	gboo°Weight
 = 
TM©h
::
Log
((1.+
îr
)/(1-îr))*
fAdaBoo°Bëa
;

1823 
Log
(Ë<< 
	gkDEBUG
 << "BDT AdaBoo† wr⁄g/Æl: " << 
	gsumGlobÆwÁl£
 << "/" << 
	gsumGlobÆw
 << " 1-îr/îr="<<
	gboo°Weight
<< "Üog.."<<
	gTM©h
::Log(
boo°Weight
)<<
Endl
;

1825 
Resu…s
* 
	gªsu…s
 = 
D©a
()->
GëResu…s
(
GëMëhodName
(),
Ty≥s
::
kTøöög
, Ty≥s::
kMaxA«lysisTy≥
);

1828 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1830 i‡(
	gfU£YesNoLóf
||
DoRegªssi⁄
()){

1831 i‡((!–(
	gdt
->
CheckEvít
(*
e
,
fU£YesNoLóf
Ë> 
	gfNodePurôyLimô
 ) =
D©aInfo
().
IsSig«l
(*e))Ë|| 
DoRegªssi⁄
()) {

1832 
DoubÀ_t
 
boo°Á˘‹
 = 
TM©h
::
Exp
(
boo°Weight
);

1834 i‡(
DoRegªssi⁄
()Ë
	gboo°Á˘‹
 = 
TM©h
::
Powî
(1/
boo°Weight
,(1.-TM©h::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0Ë)/
maxDev
 ) );

1835 i‡–(*
	ge
)->
GëWeight
() > 0 ){

1836 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
);

1838 i‡(
DoRegªssi⁄
()Ë
	gªsu…s
->
GëHi°
("Boo°Weights")->
Fûl
(
boo°Á˘‹
);

1840 i‡–
	gfInvî£Boo°NegWeights
 )(*
	ge
)->
SˇÀBoo°Weight
–1. / 
boo°Á˘‹
);

1841 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
);

1847 
DoubÀ_t
 
	gdtouçut
 = (
dt
->
CheckEvít
(*
e
,
fU£YesNoLóf
) - 0.5)*2.;

1848 
I¡_t
 
	gåueTy≥
;

1849 i‡(
D©aInfo
().
IsSig«l
(*
e
)Ë
	gåueTy≥
 = 1;

1850 
	gåueTy≥
 = -1;

1851 
DoubÀ_t
 
	gboo°Á˘‹
 = 
TM©h
::
Exp
(-1*
boo°Weight
*
åueTy≥
*
dtouçut
);

1853 i‡–(*
	ge
)->
GëWeight
() > 0 ){

1854 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
);

1856 i‡(
DoRegªssi⁄
()Ë
	gªsu…s
->
GëHi°
("Boo°Weights")->
Fûl
(
boo°Á˘‹
);

1858 i‡–
	gfInvî£Boo°NegWeights
 )(*
	ge
)->
SˇÀBoo°Weight
–1. / 
boo°Á˘‹
);

1859 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
);

1862 
	g√wSumGlobÆw
+=(*
e
)->
GëWeight
();

1863 
	g√wSumw
[(*
e
)->
GëCœss
()] +(*e)->
GëWeight
();

1868 
DoubÀ_t
 
	gglobÆN‹mWeight
=–(DoubÀ_tË
evítSam∂e
.
size
())/
√wSumGlobÆw
;

1869 
Log
(Ë<< 
	gkDEBUG
 << "√w Nsig="<<
	g√wSumw
[0]*
	gglobÆN‹mWeight
 << "Çew Nbkg="<<√wSumw[1]*globÆN‹mWeighà<< 
	gEndl
;

1872 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1876 i‡(
D©aInfo
().
IsSig«l
(*
e
))(*
	ge
)->
SˇÀBoo°Weight
–
globÆN‹mWeight
 * 
fSigToBkgFø˘i⁄
 );

1877 (*
	ge
)->
SˇÀBoo°Weight
–
globÆN‹mWeight
 );

1880 i‡(!(
DoRegªssi⁄
()))
	gªsu…s
->
GëHi°
("Boo°Weights")->
Fûl
(
boo°Weight
);

1881 
	gªsu…s
->
GëHi°
("Boo°WeightsVsTªe")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),
boo°Weight
);

1882 
	gªsu…s
->
GëHi°
("Eº‹Føc")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),
îr
);

1884 
	gfBoo°Weight
 = 
boo°Weight
;

1885 
	gfEº‹Fø˘i⁄
 = 
îr
;

1887  
	gboo°Weight
;

1904 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
AdaCo°
–
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
 )

1906 
DoubÀ_t
 
	gCss
 = 
fCss
;

1907 
DoubÀ_t
 
	gCbb
 = 
fCbb
;

1908 
DoubÀ_t
 
	gCts_sb
 = 
fCts_sb
;

1909 
DoubÀ_t
 
	gCtb_ss
 = 
fCtb_ss
;

1911 
DoubÀ_t
 
	gîr
=0, 
	gsumGlobÆWeights
=0, 
	gsumGlobÆCo°
=0;

1913 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
sumw
(
D©aInfo
().
GëNCœs£s
(),0);

1915 
	gve˘‹
<c⁄° 
	gTMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1916 
DoubÀ_t
 
	gw
 = (*
e
)->
GëWeight
();

1917 
	gsumGlobÆWeights
 +
w
;

1918 
UI¡_t
 
	gi˛ass
=(*
e
)->
GëCœss
();

1920 
	gsumw
[
i˛ass
] +
w
;

1922 i‡–
DoRegªssi⁄
() ) {

1923 
Log
(Ë<< 
	gkFATAL
 << " AdaCo°ÇŸ im∂emíãd f‹Ñegªssi⁄"<<
	gEndl
;

1926 
DoubÀ_t
 
	gdtouçut
 = (
dt
->
CheckEvít
(*
e
,
Ál£
) - 0.5)*2.;

1927 
I¡_t
 
	gåueTy≥
;

1928 
Boﬁ_t
 
	gisTrueSig«l
 = 
D©aInfo
().
IsSig«l
(*
e
);

1929 
Boﬁ_t
 
	gisSñe˘edSig«l
 = (
dtouçut
>0);

1930 i‡(
	gisTrueSig«l
Ë
	gåueTy≥
 = 1;

1931 
	gåueTy≥
 = -1;

1933 
DoubÀ_t
 
	gco°
=0;

1934 i‡(
	gisTrueSig«l
 && 
	gisSñe˘edSig«l
Ë
	gco°
=
Css
;

1935 i‡(
	gisTrueSig«l
 && !
	gisSñe˘edSig«l
Ë
	gco°
=
Cts_sb
;

1936 i‡(!
	gisTrueSig«l
 && 
	gisSñe˘edSig«l
Ë
	gco°
=
Ctb_ss
;

1937 i‡(!
	gisTrueSig«l
 && !
	gisSñe˘edSig«l
Ë
	gco°
=
Cbb
;

1938 
Log
(Ë<< 
	gkERROR
 << "somëhög wíàwr⁄g i¿AdaCo°" << 
	gEndl
;

1940 
	gsumGlobÆCo°
+
w
*
åueTy≥
*
dtouçut
*
co°
;

1945 i‡–
DoRegªssi⁄
() ) {

1946 
Log
(Ë<< 
	gkFATAL
 << " AdaCo°ÇŸ im∂emíãd f‹Ñegªssi⁄"<<
	gEndl
;

1951 
	gsumGlobÆCo°
 /
sumGlobÆWeights
;

1955 
DoubÀ_t
 
	g√wSumGlobÆWeights
=0;

1956 
	gve˘‹
<
	gDoubÀ_t
> 
√wSumCœssWeights
(
sumw
.
size
(),0);

1958 
DoubÀ_t
 
	gboo°Weight
 = 
TM©h
::
Log
((1+
sumGlobÆCo°
)/(1-sumGlobÆCo°)Ë* 
fAdaBoo°Bëa
;

1960 
Resu…s
* 
	gªsu…s
 = 
D©a
()->
GëResu…s
(
GëMëhodName
(),
Ty≥s
::
kTøöög
, Ty≥s::
kMaxA«lysisTy≥
);

1962 
	gve˘‹
<c⁄° 
	gTMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

1963 
DoubÀ_t
 
	gdtouçut
 = (
dt
->
CheckEvít
(*
e
,
Ál£
) - 0.5)*2.;

1964 
I¡_t
 
	gåueTy≥
;

1965 
Boﬁ_t
 
	gisTrueSig«l
 = 
D©aInfo
().
IsSig«l
(*
e
);

1966 
Boﬁ_t
 
	gisSñe˘edSig«l
 = (
dtouçut
>0);

1967 i‡(
	gisTrueSig«l
Ë
	gåueTy≥
 = 1;

1968 
	gåueTy≥
 = -1;

1970 
DoubÀ_t
 
	gco°
=0;

1971 i‡(
	gisTrueSig«l
 && 
	gisSñe˘edSig«l
Ë
	gco°
=
Css
;

1972 i‡(
	gisTrueSig«l
 && !
	gisSñe˘edSig«l
Ë
	gco°
=
Cts_sb
;

1973 i‡(!
	gisTrueSig«l
 && 
	gisSñe˘edSig«l
Ë
	gco°
=
Ctb_ss
;

1974 i‡(!
	gisTrueSig«l
 && !
	gisSñe˘edSig«l
Ë
	gco°
=
Cbb
;

1975 
Log
(Ë<< 
	gkERROR
 << "somëhög wíàwr⁄g i¿AdaCo°" << 
	gEndl
;

1977 
DoubÀ_t
 
	gboo°Á˘‹
 = 
TM©h
::
Exp
(-1*
boo°Weight
*
åueTy≥
*
dtouçut
*
co°
);

1978 i‡(
DoRegªssi⁄
())
Log
(Ë<< 
	gkFATAL
 << " AdaCo°ÇŸ im∂emíãd f‹Ñegªssi⁄"<<
	gEndl
;

1979 i‡–(*
	ge
)->
GëWeight
() > 0 ){

1980 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
);

1982 i‡(
DoRegªssi⁄
())
Log
(Ë<< 
	gkFATAL
 << " AdaCo°ÇŸ im∂emíãd f‹Ñegªssi⁄"<<
	gEndl
;

1984 i‡–
	gfInvî£Boo°NegWeights
 )(*
	ge
)->
SˇÀBoo°Weight
–1. / 
boo°Á˘‹
);

1987 
	g√wSumGlobÆWeights
+=(*
e
)->
GëWeight
();

1988 
	g√wSumCœssWeights
[(*
e
)->
GëCœss
()] +(*e)->
GëWeight
();

1993 
DoubÀ_t
 
	gglobÆN‹mWeight
=DoubÀ_t(
evítSam∂e
.
size
())/
√wSumGlobÆWeights
;

1994 
Log
(Ë<< 
	gkDEBUG
 << "√w Nsig="<<
	g√wSumCœssWeights
[0]*
	gglobÆN‹mWeight
 << "Çew Nbkg="<<√wSumCœssWeights[1]*globÆN‹mWeighà<< 
	gEndl
;

1997 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2000 i‡(
D©aInfo
().
IsSig«l
(*
e
))(*
	ge
)->
SˇÀBoo°Weight
–
globÆN‹mWeight
 * 
fSigToBkgFø˘i⁄
 );

2001 (*
	ge
)->
SˇÀBoo°Weight
–
globÆN‹mWeight
 );

2005 i‡(!(
DoRegªssi⁄
()))
	gªsu…s
->
GëHi°
("Boo°Weights")->
Fûl
(
boo°Weight
);

2006 
	gªsu…s
->
GëHi°
("Boo°WeightsVsTªe")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),
boo°Weight
);

2007 
	gªsu…s
->
GëHi°
("Eº‹Føc")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),
îr
);

2009 
	gfBoo°Weight
 = 
boo°Weight
;

2010 
	gfEº‹Fø˘i⁄
 = 
îr
;

2013  
	gboo°Weight
;

2020 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$Baggög
( )

2026 
	}
}

2031 
	gTMVA
::
MëhodBDT
::
GëBaggedSubSam∂e
(
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
)

2034 
DoubÀ_t
 
n
;

2035 
TR™dom3
 *
	gå™dom
 = 
√w
 TR™dom3(100*
fF‹e°
.
size
()+1234);

2037 i‡(!
	gfSubSam∂e
.
em±y
()ËfSubSam∂e.
˛ór
();

2039 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2040 
	gn
 = 
å™dom
->
Poiss⁄D
(
fBaggedSam∂eFø˘i⁄
);

2041 
I¡_t
 
	gi
=0;i<
	gn
;i++Ë
	gfSubSam∂e
.
push_back
(*
e
);

2044 
dñëe
 
	gå™dom
;

2065 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
RegBoo°
–
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& , 
Decisi⁄Tªe
* )

2073 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
AdaBoo°R2
–
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
, 
Decisi⁄Tªe
 *
dt
 )

2075 i‡–!
DoRegªssi⁄
(ËË
Log
(Ë<< 
	gkFATAL
 << "Somehow you cho£áÑegªssi⁄ boo° mëhod f‹á cœssifiˇti⁄ job" << 
	gEndl
;

2077 
DoubÀ_t
 
	gîr
=0, 
	gsumw
=0, 
	gsumwÁl£
=0, 
	gsumwÁl£2
=0;

2078 
DoubÀ_t
 
	gmaxDev
=0;

2079 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2080 
DoubÀ_t
 
	gw
 = (*
e
)->
GëWeight
();

2081 
	gsumw
 +
w
;

2083 
DoubÀ_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0) );

2084 
	gsumwÁl£
 +
w
 * 
tmpDev
;

2085 
	gsumwÁl£2
 +
w
 * 
tmpDev
*tmpDev;

2086 i‡(
	gtmpDev
 > 
	gmaxDev
ËmaxDev = 
tmpDev
;

2090 i‡(
	gfAdaBoo°R2Loss
=="linear"){

2091 
îr
 = 
sumwÁl£
/
maxDev
/
sumw
 ;

2093 i‡(
	gfAdaBoo°R2Loss
=="quadratic"){

2094 
îr
 = 
sumwÁl£2
/
maxDev
/maxDev/
sumw
 ;

2096 i‡(
	gfAdaBoo°R2Loss
=="exponential"){

2097 
îr
 = 0;

2098 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2099 
DoubÀ_t
 
	gw
 = (*
e
)->
GëWeight
();

2100 
DoubÀ_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0) );

2101 
	gîr
 +
w
 * (1 - 
exp
 (-
tmpDev
/
maxDev
)Ë/ 
sumw
;

2106 
Log
(Ë<< 
	gkFATAL
 << " you've chosená LossÅype for Adaboost otherÅhanÜinear, quadratic orÉxponential "

2107 << "Çamñy " << 
	gfAdaBoo°R2Loss
 << "\n"

2108 << "™dÅhi†i†nŸ im∂emíãd...áÅypÿöÅhê›ti⁄†??" <<
	gEndl
;

2112 i‡(
	gîr
 >= 0.5) {

2115 i‡(
dt
->
GëNNodes
() == 1){

2116 
Log
(Ë<< 
kERROR
 << " YOURÅree has only 1 Node... kind ofá funny *tree*. I cannot "

2118 << 
Endl


2120 << 
Endl
;

2123 
Log
(Ë<< 
	gkERROR
 << " Thêîr‹Ñ©êöÅhêBDT boo°ög i†> 0.5. ("<< 
	gîr


2126 << " st› boo°ög " << 
	gEndl
;

2129 
	gîr
 = 0.5;

2130 } i‡(
	gîr
 < 0) {

2131 
Log
(Ë<< 
	gkERROR
 << " TheÉrrorÑate inÅhe BDT boosting is < 0. That can happen"

2134 << " f‹Åhêtimêbeög I së iàtÿô†absﬁuã vÆue.. ju°Åÿc⁄töue.." << 
	gEndl
;

2135 
	gîr
 = 
TM©h
::
Abs
(
îr
);

2138 
DoubÀ_t
 
	gboo°Weight
 = 
îr
 / (1.-err);

2139 
DoubÀ_t
 
	g√wSumw
=0;

2141 
Resu…s
* 
	gªsu…s
 = 
D©a
()->
GëResu…s
(
GëMëhodName
(), 
Ty≥s
::
kTøöög
, Ty≥s::
kMaxA«lysisTy≥
);

2143 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2144 
DoubÀ_t
 
	gboo°Á˘‹
 = 
TM©h
::
Powî
(
boo°Weight
,(1.-TM©h::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0Ë)/
maxDev
 ) );

2145 
	gªsu…s
->
GëHi°
("Boo°Weights")->
Fûl
(
boo°Á˘‹
);

2147 i‡–(*
	ge
)->
GëWeight
() > 0 ){

2148 
Flﬂt_t
 
	g√wBoo°Weight
 = (*
e
)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
;

2149 
Flﬂt_t
 
	g√wWeight
 = (*
e
)->
GëWeight
(Ë* (*e)->
GëBoo°Weight
(Ë* 
boo°Á˘‹
;

2150 i‡(
	g√wWeight
 == 0) {

2151 
Log
(Ë<< 
kINFO
 << "Weight " << (*
e
)->
GëWeight
(Ë<< 
Endl
;

2152 
Log
(Ë<< 
	gkINFO
 << "Boo°Weight" << (*
	ge
)->
GëBoo°Weight
(Ë<< 
	gEndl
;

2153 
Log
(Ë<< 
	gkINFO
 << "boo°weight="<<
	gboo°Weight
 << "Éº" <<
	gîr
 << 
	gEndl
;

2154 
Log
(Ë<< 
	gkINFO
 << "NewBoo°Weight" << 
	g√wBoo°Weight
 << 
	gEndl
;

2155 
Log
(Ë<< 
	gkINFO
 << "boo°Á˘‹" << 
	gboo°Á˘‹
 << 
	gEndl
;

2156 
Log
(Ë<< 
	gkINFO
 << "maxDev = " << 
	gmaxDev
 << 
	gEndl
;

2157 
Log
(Ë<< 
	gkINFO
 << "tmpDev = " << 
	gTM©h
::
Abs
(
dt
->
CheckEvít
(*
e
,
kFALSE
Ë- (*e)->
GëT¨gë
(0ËË<< 
	gEndl
;

2158 
Log
(Ë<< 
	gkINFO
 << "èrgë = " << (*
	ge
)->
GëT¨gë
(0Ë<< 
	gEndl
;

2159 
Log
(Ë<< 
	gkINFO
 << "e°im©ê = " << 
	gdt
->
CheckEvít
(*
e
,
kFALSE
Ë<< 
	gEndl
;

2161 (*
	ge
)->
SëBoo°Weight
–
√wBoo°Weight
 );

2164 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë/ 
boo°Á˘‹
);

2166 
	g√wSumw
+=(*
e
)->
GëWeight
();

2170 
DoubÀ_t
 
	gn‹mWeight
 = 
sumw
 / 
√wSumw
;

2171 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
e
=
evítSam∂e
.
begö
(); 
	ge
!ÛvítSam∂e.
íd
();e++) {

2174 (*
	ge
)->
SëBoo°Weight
–(*
e
)->
GëBoo°Weight
(Ë* 
n‹mWeight
 );

2178 
	gªsu…s
->
GëHi°
("Boo°WeightsVsTªe")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),1./
boo°Weight
);

2179 
	gªsu…s
->
GëHi°
("Eº‹Føc")->
SëBöC⁄ã¡
(
fF‹e°
.
size
(),
îr
);

2181 
	gfBoo°Weight
 = 
boo°Weight
;

2182 
	gfEº‹Fø˘i⁄
 = 
îr
;

2184  
	gTM©h
::
Log
(1./
boo°Weight
);

2190 
	gTMVA
::
MëhodBDT
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

2192 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

2194 i‡(
fDoPª£À˘i⁄
){

2195 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

2196 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄LowBkgV¨%d",
iv¨
), 
fIsLowBkgCut
[ivar]);

2197 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄LowBkgV¨%dVÆue",
iv¨
), 
fLowBkgCut
[ivar]);

2198 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄LowSigV¨%d",
iv¨
), 
fIsLowSigCut
[ivar]);

2199 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄LowSigV¨%dVÆue",
iv¨
), 
fLowSigCut
[ivar]);

2200 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄HighBkgV¨%d",
iv¨
), 
fIsHighBkgCut
[ivar]);

2201 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄HighBkgV¨%dVÆue",
iv¨
),
fHighBkgCut
[ivar]);

2202 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄HighSigV¨%d",
iv¨
), 
fIsHighSigCut
[ivar]);

2203 
	`gToﬁs
().
	`AddAâr
–
wght
, 
	`F‹m
("Pª£À˘i⁄HighSigV¨%dVÆue",
iv¨
),
fHighSigCut
[ivar]);

2208 
	`gToﬁs
().
	`AddAâr
–
wght
, "NTªes", 
fF‹e°
.
	`size
() );

2209 
	`gToﬁs
().
	`AddAâr
–
wght
, "A«lysisTy≥", 
fF‹e°
.
	`back
()->
	`GëA«lysisTy≥
() );

2211 
UI¡_t
 
i
=0; i< 
fF‹e°
.
	`size
(); i++) {

2212 * 
åxml
 = 
fF‹e°
[
i
]->
	`AddXMLTo
(
wght
);

2213 
	`gToﬁs
().
	`AddAâr
–
åxml
, "boo°Weight", 
fBoo°Weights
[
i
] );

2214 
	`gToﬁs
().
	`AddAâr
–
åxml
, "ôªe", 
i
 );

2216 
	}
}

2221 
	gTMVA
::
MëhodBDT
::
	$RódWeightsFromXML
(* 
∑ª¡
) {

2222 
UI¡_t
 
i
;

2223 
i
=0; i<
fF‹e°
.
	`size
(); i++Ë
dñëe
 fForest[i];

2224 
fF‹e°
.
	`˛ór
();

2225 
fBoo°Weights
.
	`˛ór
();

2227 
UI¡_t
 
¡ªes
;

2228 
UI¡_t
 
™ÆysisTy≥
;

2229 
Flﬂt_t
 
boo°Weight
;

2232 i‡(
	`gToﬁs
().
	`HasAâr
–
∑ª¡
, 
	`F‹m
("PreselectionLowBkgVar%d",0))) {

2233 
fIsLowBkgCut
.
	`ªsize
(
	`GëNv¨
());

2234 
fLowBkgCut
.
	`ªsize
(
	`GëNv¨
());

2235 
fIsLowSigCut
.
	`ªsize
(
	`GëNv¨
());

2236 
fLowSigCut
.
	`ªsize
(
	`GëNv¨
());

2237 
fIsHighBkgCut
.
	`ªsize
(
	`GëNv¨
());

2238 
fHighBkgCut
.
	`ªsize
(
	`GëNv¨
());

2239 
fIsHighSigCut
.
	`ªsize
(
	`GëNv¨
());

2240 
fHighSigCut
.
	`ªsize
(
	`GëNv¨
());

2242 
Boﬁ_t
 
tmpBoﬁ
;

2243 
DoubÀ_t
 
tmpDoubÀ
;

2244 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

2245 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄LowBkgV¨%d",
iv¨
), 
tmpBoﬁ
);

2246 
fIsLowBkgCut
[
iv¨
]=
tmpBoﬁ
;

2247 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄LowBkgV¨%dVÆue",
iv¨
), 
tmpDoubÀ
);

2248 
fLowBkgCut
[
iv¨
]=
tmpDoubÀ
;

2249 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄LowSigV¨%d",
iv¨
), 
tmpBoﬁ
);

2250 
fIsLowSigCut
[
iv¨
]=
tmpBoﬁ
;

2251 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄LowSigV¨%dVÆue",
iv¨
), 
tmpDoubÀ
);

2252 
fLowSigCut
[
iv¨
]=
tmpDoubÀ
;

2253 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄HighBkgV¨%d",
iv¨
), 
tmpBoﬁ
);

2254 
fIsHighBkgCut
[
iv¨
]=
tmpBoﬁ
;

2255 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄HighBkgV¨%dVÆue",
iv¨
), 
tmpDoubÀ
);

2256 
fHighBkgCut
[
iv¨
]=
tmpDoubÀ
;

2257 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄HighSigV¨%d",
iv¨
),
tmpBoﬁ
);

2258 
fIsHighSigCut
[
iv¨
]=
tmpBoﬁ
;

2259 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, 
	`F‹m
("Pª£À˘i⁄HighSigV¨%dVÆue",
iv¨
), 
tmpDoubÀ
);

2260 
fHighSigCut
[
iv¨
]=
tmpDoubÀ
;

2265 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, "NTªes", 
¡ªes
 );

2267 if(
	`gToﬁs
().
	`HasAâr
(
∑ª¡
, "TreeType")) {

2268 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, "TªeTy≥", 
™ÆysisTy≥
 );

2270 
	`gToﬁs
().
	`RódAâr
–
∑ª¡
, "A«lysisTy≥", 
™ÆysisTy≥
 );

2273 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
∑ª¡
);

2274 
i
=0;

2275 
ch
) {

2276 
fF‹e°
.
	`push_back
–
dy«mic_ˇ°
<
Decisi⁄Tªe
*>–Decisi⁄Tªe::
	`Cª©eFromXML
(
ch
, 
	`GëTøöögTMVAVîsi⁄Code
()) ) );

2277 
fF‹e°
.
	`back
()->
	`SëA«lysisTy≥
(
Ty≥s
::
	`EA«lysisTy≥
(
™ÆysisTy≥
));

2278 
fF‹e°
.
	`back
()->
	`SëTªeID
(
i
++);

2279 
	`gToﬁs
().
	`RódAâr
(
ch
,"boo°Weight",
boo°Weight
);

2280 
fBoo°Weights
.
	`push_back
(
boo°Weight
);

2281 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

2283 
	}
}

2288 
	gTMVA
::
MëhodBDT
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

2290 
TSåög
 
dummy
;

2292 
I¡_t
 
	`™ÆysisTy≥
(0);

2295 
i°r
 >> 
dummy
 >> 
fNTªes
;

2296 
	`Log
(Ë<< 
kINFO
 << "Ród " << 
fNTªes
 << " Decisi⁄Åªes" << 
Endl
;

2298 
UI¡_t
 
i
=0;i<
fF‹e°
.
	`size
();i++Ë
dñëe
 fForest[i];

2299 
fF‹e°
.
	`˛ór
();

2300 
fBoo°Weights
.
	`˛ór
();

2301 
I¡_t
 
iTªe
;

2302 
DoubÀ_t
 
boo°Weight
;

2303 
i
=0;i<
fNTªes
;i++) {

2304 
i°r
 >> 
dummy
 >> 
iTªe
 >> dummy >> 
boo°Weight
;

2305 i‡(
iTªe
 !
i
) {

2306 
fF‹e°
.
	`back
()->
	`Pröt
–
°d
::
cout
 );

2307 
	`Log
(Ë<< 
kFATAL
 << "Error whileÑeading weight file; mismatch iTree="

2308 << 
iTªe
 << " i=" << 
i


2309 << " dummy " << 
dummy


2310 << " boo°weighà" << 
boo°Weight


2311 << 
Endl
;

2313 
fF‹e°
.
	`push_back
–
√w
 
	`Decisi⁄Tªe
() );

2314 
fF‹e°
.
	`back
()->
	`SëA«lysisTy≥
(
Ty≥s
::
	`EA«lysisTy≥
(
™ÆysisTy≥
));

2315 
fF‹e°
.
	`back
()->
	`SëTªeID
(
i
);

2316 
fF‹e°
.
	`back
()->
	`Ród
(
i°r
, 
	`GëTøöögTMVAVîsi⁄Code
());

2317 
fBoo°Weights
.
	`push_back
(
boo°Weight
);

2319 
	}
}

2323 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 ){

2324  
this
->
	`GëMvaVÆue
–
îr
, 
îrUµî
, 0 );

2325 
	}
}

2332 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
, 
UI¡_t
 
u£NTªes
 )

2334 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

2335 i‡(
fDoPª£À˘i⁄
) {

2336 
DoubÀ_t
 
vÆ
 = 
	`AµlyPª£À˘i⁄Cuts
(
ev
);

2337 i‡(
TM©h
::
	`Abs
(
vÆ
)>0.05)  val;

2339  
	`Priv©eGëMvaVÆue
(
ev
, 
îr
, 
îrUµî
, 
u£NTªes
);

2341 
	}
}

2348 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$Priv©eGëMvaVÆue
(c⁄° 
TMVA
::
Evít
* 
ev
, 
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
, 
UI¡_t
 
u£NTªes
 )

2351 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

2355 
UI¡_t
 
nTªes
 = 
fF‹e°
.
	`size
();

2357 i‡(
u£NTªes
 > 0 ) 
nTªes
 = useNTrees;

2359 i‡(
fBoo°Ty≥
=="Gød"Ë 
	`GëGødBoo°MVA
(
ev
,
nTªes
);

2361 
DoubÀ_t
 
myMVA
 = 0;

2362 
DoubÀ_t
 
n‹m
 = 0;

2363 
UI¡_t
 
ôªe
=0; iåì<
nTªes
; itree++) {

2365 
myMVA
 +
fBoo°Weights
[
ôªe
] * 
fF‹e°
[ôªe]->
	`CheckEvít
(
ev
,
fU£YesNoLóf
);

2366 
n‹m
 +
fBoo°Weights
[
ôªe
];

2368  ( 
n‹m
 > 
°d
::
numîic_limôs
<>::
	`ïsû⁄
(ËË? 
myMVA
 /=Çorm : 0 ;

2369 
	}
}

2375 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodBDT
::
	$GëMu…i˛assVÆues
()

2377 c⁄° 
TMVA
::
Evít
 *
e
 = 
	`GëEvít
();

2378 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
ËfMu…i˛assRëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

2379 
fMu…i˛assRëu∫VÆ
->
	`˛ór
();

2381 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

2382 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`ãmp
(
nCœs£s
);

2383 autÿ
f‹e°Size
 = 
fF‹e°
.
	`size
();

2386 
UI¡_t
 
˛assOfTªe
 = 0;

2387 
UI¡_t
 
ôªe
 = 0; iåì < 
f‹e°Size
; ++itree) {

2388 
ãmp
[
˛assOfTªe
] +
fF‹e°
[
ôªe
]->
	`CheckEvít
(
e
, 
kFALSE
);

2389 i‡(++
˛assOfTªe
 =
nCœs£s
) classOfTree = 0;

2394 
°d
::
	`å™sf‹m
(
ãmp
.
	`begö
(),Åemp.
	`íd
(),Åemp.begö(), [](
DoubÀ_t
 
d
){ 
	`exp
(d);});

2396 
UI¡_t
 
iCœss
=0; iCœss<
nCœs£s
; iClass++){

2397 
DoubÀ_t
 
n‹m
 = 0.0;

2398 
UI¡_t
 
j
=0;j<
nCœs£s
;j++){

2399 if(
iCœss
!=
j
)

2400 
n‹m
 +
ãmp
[
j
] /Åemp[
iCœss
];

2402 (*
fMu…i˛assRëu∫VÆ
).
	`push_back
(1.0/(1.0+
n‹m
));

2405  *
fMu…i˛assRëu∫VÆ
;

2406 
	}
}

2411 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
> & 
TMVA
::
MëhodBDT
::
	$GëRegªssi⁄VÆues
()

2414 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
ËfRegªssi⁄Rëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

2415 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

2417 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
();

2418 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ev
);

2420 
DoubÀ_t
 
myMVA
 = 0;

2421 
DoubÀ_t
 
n‹m
 = 0;

2422 i‡(
fBoo°Ty≥
=="AdaBoostR2") {

2433 
ve˘‹
< 
DoubÀ_t
 > 
	`ª•⁄£
(
fF‹e°
.
	`size
());

2434 
ve˘‹
< 
DoubÀ_t
 > 
	`weight
(
fF‹e°
.
	`size
());

2435 
DoubÀ_t
 
tŸÆSumOfWeights
 = 0;

2437 
UI¡_t
 
ôªe
=0; iåì<
fF‹e°
.
	`size
(); itree++) {

2438 
ª•⁄£
[
ôªe
] = 
fF‹e°
[ôªe]->
	`CheckEvít
(
ev
,
kFALSE
);

2439 
weight
[
ôªe
] = 
fBoo°Weights
[itree];

2440 
tŸÆSumOfWeights
 +
fBoo°Weights
[
ôªe
];

2443 
°d
::
ve˘‹
< std::ve˘‹<
DoubÀ_t
> > 
vãmp
;

2444 
vãmp
.
	`push_back
–
ª•⁄£
 );

2445 
vãmp
.
	`push_back
–
weight
 );

2446 
	`gToﬁs
().
	`U£fulS‹tAs˚ndög
–
vãmp
 );

2448 
I¡_t
 
t
=0;

2449 
DoubÀ_t
 
sumOfWeights
 = 0;

2450 
sumOfWeights
 <
tŸÆSumOfWeights
/2.) {

2451 
sumOfWeights
 +
vãmp
[1][
t
];

2452 
t
++;

2455 
DoubÀ_t
 
rVÆ
=0;

2456 
I¡_t
 
cou¡
=0;

2457 
UI¡_t
 
i

TM©h
::
	`Max
(
	`UI¡_t
(0),UI¡_t(
t
-(
fF‹e°
.
	`size
()/6)-0.5));

2458 
i
< 
TM©h
::
	`Mö
(
	`UI¡_t
(
fF‹e°
.
	`size
()),UI¡_t(
t
+(fForest.size()/6)+0.5)); i++) {

2459 
cou¡
++;

2460 
rVÆ
+=
vãmp
[0][
i
];

2463 
evT
->
	`SëT¨gë
(0, 
rVÆ
/
	`DoubÀ_t
(
cou¡
) );

2465 if(
fBoo°Ty≥
=="Grad"){

2466 
UI¡_t
 
ôªe
=0; iåì<
fF‹e°
.
	`size
(); itree++) {

2467 
myMVA
 +
fF‹e°
[
ôªe
]->
	`CheckEvít
(
ev
,
kFALSE
);

2470 
evT
->
	`SëT¨gë
(0, 
myMVA
+
fBoo°Weights
[0] );

2473 
UI¡_t
 
ôªe
=0; iåì<
fF‹e°
.
	`size
(); itree++) {

2475 
myMVA
 +
fBoo°Weights
[
ôªe
] * 
fF‹e°
[ôªe]->
	`CheckEvít
(
ev
,
kFALSE
);

2476 
n‹m
 +
fBoo°Weights
[
ôªe
];

2479 
evT
->
	`SëT¨gë
(0, ( 
n‹m
 > 
°d
::
numîic_limôs
<>::
	`ïsû⁄
(ËË? 
myMVA
 /=Çorm : 0 );

2484 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

2485 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
–
evT2
->
	`GëT¨gë
(0) );

2487 
dñëe
 
evT
;

2490  *
fRegªssi⁄Rëu∫VÆ
;

2491 
	}
}

2497 
	gTMVA
::
MëhodBDT
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

2499 
	`Log
(Ë<< 
kDEBUG
 << "\tWrôêm⁄ô‹ög hi°ogøm†tÿfûe: " << 
	`Ba£Dú
()->
	`GëP©h
(Ë<< 
Endl
;

2503 
fM⁄ô‹Ntu∂e
->
	`Wrôe
();

2504 
	}
}

2512 
	gve˘‹
< 
	gDoubÀ_t
 > 
	gTMVA
::
MëhodBDT
::
	$GëV¨übÀImp‹èn˚
()

2514 
fV¨übÀImp‹èn˚
.
	`ªsize
(
	`GëNv¨
());

2515 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++) {

2516 
fV¨übÀImp‹èn˚
[
iv¨
]=0;

2518 
DoubÀ_t
 
sum
=0;

2519 
UI¡_t
 
ôªe
 = 0; iåì < 
	`GëNTªes
(); itree++) {

2520 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`ªœtiveImp‹èn˚
(
fF‹e°
[
ôªe
]->
	`GëV¨übÀImp‹èn˚
());

2521 
UI¡_t
 
i
=0; i< 
ªœtiveImp‹èn˚
.
	`size
(); i++) {

2522 
fV¨übÀImp‹èn˚
[
i
] +
fBoo°Weights
[
ôªe
] * 
ªœtiveImp‹èn˚
[i];

2526 
UI¡_t
 
iv¨
=0; iv¨< 
fV¨übÀImp‹èn˚
.
	`size
(); ivar++){

2527 
fV¨übÀImp‹èn˚
[
iv¨
] = 
TM©h
::
	`Sqπ
(fVariableImportance[ivar]);

2528 
sum
 +
fV¨übÀImp‹èn˚
[
iv¨
];

2530 
UI¡_t
 
iv¨
=0; iv¨< 
fV¨übÀImp‹èn˚
.
	`size
(); iv¨++ËfV¨übÀImp‹èn˚[iv¨] /
sum
;

2532  
fV¨übÀImp‹èn˚
;

2533 
	}
}

2540 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$GëV¨übÀImp‹èn˚
–
UI¡_t
 
iv¨
 )

2542 
°d
::
ve˘‹
<
DoubÀ_t
> 
ªœtiveImp‹èn˚
 = 
this
->
	`GëV¨übÀImp‹èn˚
();

2543 i‡(
iv¨
 < (
UI¡_t
)
ªœtiveImp‹èn˚
.
	`size
()) ÑelativeImportance[ivar];

2544 
	`Log
(Ë<< 
kFATAL
 << "<GëV¨übÀImp‹èn˚> iv¨ = " << 
iv¨
 << " i†ouào‡øngê" << 
Endl
;

2547 
	}
}

2552 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodBDT
::
	$Cª©eR™kög
()

2555 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Variable Importance" );

2556 
ve˘‹
< 
DoubÀ_t
> 
	`imp‹èn˚
(
this
->
	`GëV¨übÀImp‹èn˚
());

2558 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

2560 
fR™kög
->
	`AddR™k
–
	`R™k
–
	`GëI≈utLabñ
(
iv¨
), 
imp‹èn˚
[ivar] ) );

2563  
fR™kög
;

2564 
	}
}

2569 
	gTMVA
::
MëhodBDT
::
	$GëHñpMesßge
() const

2571 
	`Log
(Ë<< 
Endl
;

2572 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

2573 
	`Log
(Ë<< 
Endl
;

2574 
	`Log
(Ë<< "Boo°ed Decisi⁄ Tªe†¨ê®cﬁÀ˘i⁄ o‡ödividuÆ decisi⁄" << 
Endl
;

2575 
	`Log
(Ë<< "åì†which f‹má mu…iv¨üã cœssifõ∏by (weighãdËmaj‹ôy " << 
Endl
;

2576 
	`Log
(Ë<< "vŸêo‡thêödividuÆÅªes. C⁄£cutivêdecisi⁄Åªe†¨ê " << 
Endl
;

2577 
	`Log
(Ë<< "åaöed usögÅhê‹igöÆÅøöög d©®£àwôhÑe-weighãd " << 
Endl
;

2578 
	`Log
(Ë<< "evíts. By deÁu…,ÅhêAdaBoo° mëhod i†em∂oyed, which give†" << 
Endl
;

2579 
	`Log
(Ë<< "evít†th© wîêmis˛assifõd i¿thê¥eviou†åìáÜ¨gî " << 
Endl
;

2580 
	`Log
(Ë<< "weighàöÅhêåaöög o‡thêfﬁlowögÅªe." << 
Endl
;

2581 
	`Log
(Ë<< 
Endl
;

2582 
	`Log
(Ë<< "Decisi⁄Åªe†¨ê®£quí˚ o‡bö¨y s∂ô†o‡thêd©®ßm∂e" << 
Endl
;

2583 
	`Log
(Ë<< "usögá sögÀ dis¸imö™àv¨übÀáà®time. AÅe°Évíà" << 
Endl
;

2584 
	`Log
(Ë<< "ídög u∞a·îÅhê£quí˚ o‡À·-righà•lô†öá föÆ " << 
Endl
;

2585 
	`Log
(Ë<< "(\"Àaf\"Ënodêi†˛assifõdá†eôhî sig«»‹ background" << 
Endl
;

2586 
	`Log
(Ë<< "dïídög o¿thêmaj‹ôyÅy≥ o‡åaöögÉvít†öÅh©Çode." << 
Endl
;

2587 
	`Log
(Ë<< 
Endl
;

2588 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

2589 
	`Log
(Ë<< 
Endl
;

2590 
	`Log
(Ë<< "ByÅhê«tuª o‡thêbö¨y s∂ô†≥rf‹med o¿thêödividuÆ" << 
Endl
;

2591 
	`Log
(Ë<< "v¨übÀs, decisi⁄Åªe†dÿnŸ dó»wñ»wôhÜöó∏c‹ªœti⁄s" << 
Endl
;

2592 
	`Log
(Ë<< "bëwì¿v¨übÀ†—heyÇìdÅÿ≠¥oxim©êthêlöó∏•lô in" << 
Endl
;

2593 
	`Log
(Ë<< "thêtwÿdimísi⁄Æ s∑˚ byá sequí˚ o‡•lô†⁄Åhêtwÿ" << 
Endl
;

2594 
	`Log
(Ë<< "v¨übÀ†ödividuÆly). Hí˚ dec‹ªœti⁄ could bêu£fu»" << 
Endl
;

2595 
	`Log
(Ë<< "tÿ›timi£ÅhêBDTÖîf‹m™˚." << 
Endl
;

2596 
	`Log
(Ë<< 
Endl
;

2597 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

2598 
	`Log
(Ë<< 
Endl
;

2599 
	`Log
(Ë<< "Thêtwÿmo° imp‹è¡Ö¨amëî†öÅhêc⁄figuøti⁄áªÅhê " << 
Endl
;

2600 
	`Log
(Ë<< "möimÆÇumbî o‡evít†ªque°ed byáÜó‡nodêa†≥r˚¡agêo‡thê" <<
Endl
;

2601 
	`Log
(Ë<< "Çumbî o‡åaöögÉvít†(›ti⁄ \"MöNodeSize\"ÑïœcögÅhêa˘uÆÇumbî " << 
Endl
;

2602 
	`Log
(Ë<< " o‡evít†\"nEvítsMö\"á†giví i¿óæõ∏vîsi⁄s" << 
Endl
;

2603 
	`Log
(Ë<< "I‡thi†numbî i†toÿœrge, dëaûed fótuª†" << 
Endl
;

2604 
	`Log
(Ë<< "öÅhê∑ømëî s∑˚áª h¨dÅÿbêmodñÀd. I‡ô i†toÿsmÆl, " << 
Endl
;

2605 
	`Log
(Ë<< "thêriskÅÿovîåaöÑi£†™d boo°ög sìm†tÿbêÀs†ef„˘ive" << 
Endl
;

2606 
	`Log
(Ë<< "Åypiˇ»vÆue†‰om ou∏cuºíàex≥rõn˚ f‹ be°Öîf‹m™˚ " << 
Endl
;

2607 
	`Log
(Ë<< "áª bëwì¿0.5(%Ë™d 10(%Ë" << 
Endl
;

2608 
	`Log
(Ë<< 
Endl
;

2609 
	`Log
(Ë<< "ThêdeÁu… möimÆÇumbî i†cuºíéy sëÅÿ" << 
Endl
;

2610 
	`Log
(Ë<< " max(20, (N_åaöög_evít†/ N_v¨übÀs^2 / 10)Ë" << 
Endl
;

2611 
	`Log
(Ë<< "™d c™ bêch™ged byÅhêu£r." << 
Endl
;

2612 
	`Log
(Ë<< 
Endl
;

2613 
	`Log
(Ë<< "ThêŸhî crucü»∑ømëî,Åhê¥unög såígth (\"Pru√Såígth\")," << 
Endl
;

2614 
	`Log
(Ë<< "i†ÆsÿªœãdÅÿovîåaöög. Iài†®ªguœrißti⁄Ö¨amëî " << 
Endl
;

2615 
	`Log
(Ë<< "th© i†u£d whí dëîmöögá·îÅhêåaöög which s∂ô†" << 
Endl
;

2616 
	`Log
(Ë<< "¨êc⁄sidîed sèti°iˇŒy insignifiˇ¡ándáªÑemoved. The" << 
Endl
;

2617 
	`Log
(Ë<< "u£∏i†advi£dÅÿˇªfuŒy w©chÅhêBDT s¸ì¿ouçuàf‹" << 
Endl
;

2618 
	`Log
(Ë<< "thêcom∑ris⁄ bëwì¿efficõncõ†obèöed o¿thêåaöögánd" << 
Endl
;

2619 
	`Log
(Ë<< "thêödïídíàã° sam∂e. They should bêequÆ wôhö sèti°iˇl" << 
Endl
;

2620 
	`Log
(Ë<< "îr‹s, i¿‹dîÅÿmöimizê°©i°iˇ»Êu˘u©i⁄†ö dif„ª¡ sam∂es." << 
Endl
;

2621 
	}
}

2626 
	gTMVA
::
MëhodBDT
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

2628 
TSåög
 
nodeName
 = 
˛assName
;

2629 
nodeName
.
	`Rïœ˚AŒ
("Read","");

2630 
nodeName
.
	`Aµíd
("Node");

2632 
fout
 << " std::ve˘‹<"<<
nodeName
<<"*> fF‹e°; // i.e.ÑoŸÇode†o‡decisi⁄Åªes" << 
°d
::
ídl
;

2633 
fout
 << " std::ve˘‹<doubÀ> fBoo°Weights; //Åhêweight†≠∂õd i¿thêödividuÆ boo°s" << 
°d
::
ídl
;

2634 
fout
 << "};" << 
°d
::
ídl
 << std::endl;

2635 
fout
 << "doubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

2636 
fout
 << "{" << 
°d
::
ídl
;

2637 
fout
 << " doubÀ myMVA = 0;" << 
°d
::
ídl
;

2638 i‡(
fDoPª£À˘i⁄
){

2639 
UI¡_t
 
iv¨
 = 0; iv¨< 
fIsLowBkgCut
.
	`size
(); ivar++){

2640 i‡(
fIsLowBkgCut
[
iv¨
]){

2641 
fout
 << " i‡(öputVÆues["<<
iv¨
<<"] < " << 
fLowBkgCut
[iv¨] << "Ëªtu∫ -1; // i†backgroundÖª£À˘i⁄ cut" << 
°d
::
ídl
;

2643 i‡(
fIsLowSigCut
[
iv¨
]){

2644 
fout
 << " i‡(öputVÆues["<<
iv¨
<<"] < "<< 
fLowSigCut
[iv¨] << "Ëªtu∫ 1; // i†sig«»¥e£À˘i⁄ cut" << 
°d
::
ídl
;

2646 i‡(
fIsHighBkgCut
[
iv¨
]){

2647 
fout
 << " i‡(öputVÆues["<<
iv¨
<<"] > "<<
fHighBkgCut
[iv¨] <<"ËÑëu∫ -1; // i†backgroundÖª£À˘i⁄ cut" << 
°d
::
ídl
;

2649 i‡(
fIsHighSigCut
[
iv¨
]){

2650 
fout
 << " i‡(öputVÆues["<<
iv¨
<<"] > "<<
fHighSigCut
[iv¨]<<"ËÑëu∫ 1; // i†sig«»¥e£À˘i⁄ cut" << 
°d
::
ídl
;

2655 i‡(
fBoo°Ty≥
!="Grad"){

2656 
fout
 << " doubÀÇ‹m = 0;" << 
°d
::
ídl
;

2658 
fout
 << " f‹ (unsig√d i¡ iåì=0; iåì<fF‹e°.size(); iåì++){" << 
°d
::
ídl
;

2659 
fout
 << " "<<
nodeName
<<" *cuºíàfF‹e°[ôªe];" << 
°d
::
ídl
;

2660 
fout
 << " whûê(cuºít->GëNodeTy≥(Ë=0Ë{ //öãrmedüãÇode" << 
°d
::
ídl
;

2661 
fout
 << " i‡(cuºít->G€sRight(öputVÆues)Ëcuºít=("<<
nodeName
<<"*)cuºít->GëRight();" << 
°d
::
ídl
;

2662 
fout
 << "Él£ cuºít=("<<
nodeName
<<"*)cuºít->GëLe·();" << 
°d
::
ídl
;

2663 
fout
 << " }" << 
°d
::
ídl
;

2664 i‡(
fBoo°Ty≥
=="Grad"){

2665 
fout
 << " myMVA +cuºít->GëRe•⁄£();" << 
°d
::
ídl
;

2667 i‡(
fU£YesNoLóf
Ë
fout
 << " myMVA +fBoo°Weights[ôªe] * cuºít->GëNodeTy≥();" << 
°d
::
ídl
;

2668 
fout
 << " myMVA +fBoo°Weights[ôªe] * cuºít->GëPurôy();" << 
°d
::
ídl
;

2669 
fout
 << "Ç‹m +fBoo°Weights[ôªe];" << 
°d
::
ídl
;

2671 
fout
 << " }" << 
°d
::
ídl
;

2672 i‡(
fBoo°Ty≥
=="Grad"){

2673 
fout
 << "Ñëu∫ 2.0/(1.0+exp(-2.0*myMVA))-1.0;" << 
°d
::
ídl
;

2675 
fout
 << "Ñëu∫ myMVA /n‹m;" << 
°d
::
ídl
;

2676 
fout
 << "};" << 
°d
::
ídl
 << std::endl;

2677 
fout
 << "void " << 
˛assName
 << "::Inôülize()" << 
°d
::
ídl
;

2678 
fout
 << "{" << 
°d
::
ídl
;

2680 
UI¡_t
 
ôªe
=0; iåì<
	`GëNTªes
(); itree++) {

2681 
fout
 << " // iåì = " << 
ôªe
 << 
°d
::
ídl
;

2682 
fout
 << " fBoo°Weights.push_back(" << 
fBoo°Weights
[
ôªe
] << ");" << 
°d
::
ídl
;

2683 
fout
 << " fF‹e°.push_back–" << 
°d
::
ídl
;

2684 
this
->
	`MakeCœssIn°™tüãNode
((
Decisi⁄TªeNode
*)
fF‹e°
[
ôªe
]->
	`GëRoŸ
(), 
fout
, 
˛assName
);

2685 
fout
 <<" );" << 
°d
::
ídl
;

2687 
fout
 << "Ñëu∫;" << 
°d
::
ídl
;

2688 
fout
 << "};" << 
°d
::
ídl
;

2689 
fout
 << " " << 
°d
::
ídl
;

2690 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

2691 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

2692 
fout
 << "{" << 
°d
::
ídl
;

2693 
fout
 << " f‹ (unsig√d i¡ iåì=0; iåì<fF‹e°.size(); iåì++Ë{ " << 
°d
::
ídl
;

2694 
fout
 << " dñëêfF‹e°[ôªe]; " << 
°d
::
ídl
;

2695 
fout
 << " }" << 
°d
::
ídl
;

2696 
fout
 << "}" << 
°d
::
ídl
;

2697 
	}
}

2702 
	gTMVA
::
MëhodBDT
::
	$MakeCœssS≥cificHódî
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
) const

2704 
TSåög
 
nodeName
 = 
˛assName
;

2705 
nodeName
.
	`Rïœ˚AŒ
("Read","");

2706 
nodeName
.
	`Aµíd
("Node");

2708 
fout
 << "#deföêNNÇew "<<
nodeName
 << 
°d
::
ídl
;

2710 
fout
 << " " << 
°d
::
ídl
;

2711 
fout
 << "#i‚de‡"<<
nodeName
<<"__def" << 
°d
::
ídl
;

2712 
fout
 << "#deföê"<<
nodeName
<<"__def" << 
°d
::
ídl
;

2713 
fout
 << " " << 
°d
::
ídl
;

2714 
fout
 << "˛as†"<<
nodeName
<<" {" << 
°d
::
ídl
;

2715 
fout
 << " " << 
°d
::
ídl
;

2716 
fout
 << "public:" << 
°d
::
ídl
;

2717 
fout
 << " " << 
°d
::
ídl
;

2718 
fout
 << " // c⁄°ru˘‹ o‡™És£¡üŒy \"em±y\"ÇodêÊﬂtög i¿•a˚" << 
°d
::
ídl
;

2719 
fout
 << " "<<
nodeName
<<" ( "<<nodeName<<"*Üe·,"<<nodeName<<"*Ñight," << 
°d
::
ídl
;

2720 i‡(
fU£FishîCuts
){

2721 
fout
 << " i¡ÇFishîC€ff," << 
°d
::
ídl
;

2722 
UI¡_t
 
i
=0;i<
	`GëNV¨übÀs
()+1;i++){

2723 
fout
 << " doubÀ fishîC€ff"<<
i
<<"," << 
°d
::
ídl
;

2726 
fout
 << " i¡ sñe˘‹, doubÀ cutVÆue, boﬁ cutTy≥, " << 
°d
::
ídl
;

2727 
fout
 << " i¡ÇodeTy≥, doubÀÖurôy, doubÀÑe•⁄£ ) :" << 
°d
::
ídl
;

2728 
fout
 << " fLe· (Üe· )," << 
°d
::
ídl
;

2729 
fout
 << " fRighà (Ñighà )," << 
°d
::
ídl
;

2730 i‡(
fU£FishîCuts
Ë
fout
 << " fNFishîC€f‡–nFishîC€f‡)," << 
°d
::
ídl
;

2731 
fout
 << " fSñe˘‹ ( sñe˘‹ )," << 
°d
::
ídl
;

2732 
fout
 << " fCutVÆuê ( cutVÆuê )," << 
°d
::
ídl
;

2733 
fout
 << " fCutTy≥ ( cutTy≥ )," << 
°d
::
ídl
;

2734 
fout
 << " fNodeTy≥ (ÇodeTy≥ )," << 
°d
::
ídl
;

2735 
fout
 << " fPurôy (Öurôy )," << 
°d
::
ídl
;

2736 
fout
 << " fRe•⁄£ (Ñe•⁄£ ){" << 
°d
::
ídl
;

2737 i‡(
fU£FishîCuts
){

2738 
UI¡_t
 
i
=0;i<
	`GëNV¨übÀs
()+1;i++){

2739 
fout
 << " fFishîC€ff.push_back(fishîC€ff"<<
i
<<");" << 
°d
::
ídl
;

2742 
fout
 << " }" << 
°d
::
ídl
 << std::endl;

2743 
fout
 << " vútuÆ ~"<<
nodeName
<<"();" << 
°d
::
ídl
 << std::endl;

2744 
fout
 << " //Åe°Évíài‡ô des˚nd†thêåìáàthi†nodêtÿthêright" << 
°d
::
ídl
;

2745 
fout
 << " vútuÆ boﬁ G€sRight–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°;" << 
°d
::
ídl
;

2746 
fout
 << " "<<
nodeName
<<"* GëRight–void ) {ªtu∫ fRight; };" << 
°d
::
ídl
 << std::endl;

2747 
fout
 << " //Åe°Évíài‡ô des˚nd†thêåìáàthi†nodêtÿthêÀ· " << 
°d
::
ídl
;

2748 
fout
 << " vútuÆ boﬁ G€sLe· ( c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°;" << 
°d
::
ídl
;

2749 
fout
 << " "<<
nodeName
<<"* GëLe·–void ) {Ñëu∫ fLe·; }; " << 
°d
::
ídl
 << std::endl;

2750 
fout
 << " //Ñëu∫ S/(S+BË’urôyË©Åhi†nodê(‰omÅøöög)" << 
°d
::
ídl
 << std::endl;

2751 
fout
 << " doubÀ GëPurôy–void ) c⁄° {Ñëu∫ fPurôy; } " << 
°d
::
ídl
;

2752 
fout
 << " //Ñëu∫Åhênodêty≥" << 
°d
::
ídl
;

2753 
fout
 << " i¡ GëNodeTy≥–void ) c⁄° {Ñëu∫ fNodeTy≥; }" << 
°d
::
ídl
;

2754 
fout
 << " doubÀ GëRe•⁄£(voidËc⁄° {ªtu∫ fRe•⁄£;}" << 
°d
::
ídl
 << std::endl;

2755 
fout
 << "¥iv©e:" << 
°d
::
ídl
 << std::endl;

2756 
fout
 << " "<<
nodeName
<<"* fLe·; //Öoöã∏tÿthêÀ· daughã∏node" << 
°d
::
ídl
;

2757 
fout
 << " "<<
nodeName
<<"* fRight; //Öoöã∏tÿthêrighàdaughã∏node" << 
°d
::
ídl
;

2758 i‡(
fU£FishîCuts
){

2759 
fout
 << " i¡ fNFishîC€ff; // =0 i‡thi†nodêd€¢'àu£ fishî,Él£ =nv¨+1 " << 
°d
::
ídl
;

2760 
fout
 << " std::ve˘‹<doubÀ> fFishîC€ff; //Åhêfishî c€f‡(off£à©Åhêœ°ÉÀmít)" << 
°d
::
ídl
;

2762 
fout
 << " i¡ fSñe˘‹; // index o‡v¨übÀ u£d i¿nodê£À˘i⁄ (decisi⁄ÅªeË " << 
°d
::
ídl
;

2763 
fout
 << " doubÀ fCutVÆue; // cuàvÆuê≠∂õd o¿thi†nodêtÿdis¸imö©êbkgágaö° sig" << 
°d
::
ídl
;

2764 
fout
 << " boﬁ fCutTy≥; //Årue: i‡evíàv¨übÀ > cutVÆuê==> sig«», fÆ£ othîwi£" << 
°d
::
ídl
;

2765 
fout
 << " i¡ fNodeTy≥; // Ty≥ o‡node: -1 =Bkg-Àaf, 1 =Sig«l-Àaf, 0 = i¡î«»" << 
°d
::
ídl
;

2766 
fout
 << " doubÀ fPurôy; // Purôy o‡nodê‰omÅøöög"<< 
°d
::
ídl
;

2767 
fout
 << " doubÀ fRe•⁄£; // Regªssi⁄Ñe•⁄£ vÆuêo‡node" << 
°d
::
ídl
;

2768 
fout
 << "}; " << 
°d
::
ídl
;

2769 
fout
 << " " << 
°d
::
ídl
;

2770 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

2771 
fout
 << " "<<
nodeName
<<"::~"<<nodeName<<"()" << 
°d
::
ídl
;

2772 
fout
 << "{" << 
°d
::
ídl
;

2773 
fout
 << " i‡(fLe· !NULLËdñëêfLe·;" << 
°d
::
ídl
;

2774 
fout
 << " i‡(fRighà!NULLËdñëêfRight;" << 
°d
::
ídl
;

2775 
fout
 << "}; " << 
°d
::
ídl
;

2776 
fout
 << " " << 
°d
::
ídl
;

2777 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

2778 
fout
 << "boﬁ "<<
nodeName
<<"::G€sRight–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

2779 
fout
 << "{" << 
°d
::
ídl
;

2780 
fout
 << " //Åe°Évíài‡ô des˚nd†thêåìáàthi†nodêtÿthêright" << 
°d
::
ídl
;

2781 
fout
 << " boﬁÑesu…;" << 
°d
::
ídl
;

2782 i‡(
fU£FishîCuts
){

2783 
fout
 << " i‡(fNFishîC€f‡=0){" << 
°d
::
ídl
;

2784 
fout
 << "Ñesu… = (öputVÆues[fSñe˘‹] > fCutVÆuê);" << 
°d
::
ídl
;

2785 
fout
 << " }ñ£{" << 
°d
::
ídl
;

2786 
fout
 << " doubÀ fishî = fFishîC€ff.©(fFishîC€ff.size()-1);" << 
°d
::
ídl
;

2787 
fout
 << " f‹ (unsig√d i¡ iv¨=0; iv¨<fFishîC€ff.size()-1; iv¨++)" << 
°d
::
ídl
;

2788 
fout
 << " fishî +fFishîC€ff.©(iv¨)*öputVÆues.©(iv¨);" << 
°d
::
ídl
;

2789 
fout
 << "Ñesu… = fishî > fCutVÆue;" << 
°d
::
ídl
;

2790 
fout
 << " }" << 
°d
::
ídl
;

2792 
fout
 << "Ñesu… = (öputVÆues[fSñe˘‹] > fCutVÆuê);" << 
°d
::
ídl
;

2794 
fout
 << " i‡(fCutTy≥ =åueËªtu∫Ñesu…; //thêcut†¨ê£À˘ög Sig«»;" << 
°d
::
ídl
;

2795 
fout
 << "Él£Ñëu∫ !ªsu…;" << 
°d
::
ídl
;

2796 
fout
 << "}" << 
°d
::
ídl
;

2797 
fout
 << " " << 
°d
::
ídl
;

2798 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

2799 
fout
 << "boﬁ "<<
nodeName
<<"::G€sLe·–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

2800 
fout
 << "{" << 
°d
::
ídl
;

2801 
fout
 << " //Åe°Évíài‡ô des˚nd†thêåìáàthi†nodêtÿthêÀ·" << 
°d
::
ídl
;

2802 
fout
 << " i‡(!this->G€sRight(öputVÆues)Ëªtu∫Årue;" << 
°d
::
ídl
;

2803 
fout
 << "Él£Ñëu∫ fÆ£;" << 
°d
::
ídl
;

2804 
fout
 << "}" << 
°d
::
ídl
;

2805 
fout
 << " " << 
°d
::
ídl
;

2806 
fout
 << "#ídif" << 
°d
::
ídl
;

2807 
fout
 << " " << 
°d
::
ídl
;

2808 
	}
}

2813 
	gTMVA
::
MëhodBDT
::
	$MakeCœssIn°™tüãNode
–
Decisi⁄TªeNode
 *
n
, 
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

2815 i‡(
n
 =
NULL
) {

2816 
	`Log
(Ë<< 
kFATAL
 << "MakeCœssIn°™tüãNode: sèπed wôh undeföedÇode" <<
Endl
;

2819 
fout
 << "NN("<<
°d
::
ídl
;

2820 i‡(
n
->
	`GëLe·
(Ë!
NULL
){

2821 
this
->
	`MakeCœssIn°™tüãNode
–(
Decisi⁄TªeNode
*)
n
->
	`GëLe·
(Ë, 
fout
, 
˛assName
);

2824 
fout
 << "0";

2826 
fout
 << ", " <<
°d
::
ídl
;

2827 i‡(
n
->
	`GëRight
(Ë!
NULL
){

2828 
this
->
	`MakeCœssIn°™tüãNode
–(
Decisi⁄TªeNode
*)
n
->
	`GëRight
(), 
fout
, 
˛assName
 );

2831 
fout
 << "0";

2833 
fout
 << ", " << 
°d
::
ídl


2834 << 
°d
::
	`£çªcisi⁄
(6);

2835 i‡(
fU£FishîCuts
){

2836 
fout
 << 
n
->
	`GëNFishîC€ff
() << ", ";

2837 
UI¡_t
 
i
=0; i< 
	`GëNV¨übÀs
()+1; i++) {

2838 i‡(
n
->
	`GëNFishîC€ff
() == 0 ){

2839 
fout
 << "0, ";

2841 
fout
 << 
n
->
	`GëFishîC€ff
(
i
) << ", ";

2845 
fout
 << 
n
->
	`GëSñe˘‹
() << ", "

2846 << 
n
->
	`GëCutVÆue
() << ", "

2847 << 
n
->
	`GëCutTy≥
() << ", "

2848 << 
n
->
	`GëNodeTy≥
() << ", "

2849 << 
n
->
	`GëPurôy
() << ","

2850 << 
n
->
	`GëRe•⁄£
() << ") ";

2851 
	}
}

2858 
	gTMVA
::
MëhodBDT
::
DëîmöePª£À˘i⁄Cuts
(c⁄° 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>& 
evítSam∂e
)

2860 
DoubÀ_t
 
nTŸS
 = 0.0, 
	gnTŸB
 = 0.0;

2861 
I¡_t
 
	gnTŸS_unWeighãd
 = 0, 
	gnTŸB_unWeighãd
 = 0;

2863 
	g°d
::
ve˘‹
<
TMVA
::
BDTEvítWøµî
> 
bdtEvítSam∂e
;

2865 
	gfIsLowSigCut
.
assign
(
GëNv¨
(),
kFALSE
);

2866 
	gfIsLowBkgCut
.
assign
(
GëNv¨
(),
kFALSE
);

2867 
	gfIsHighSigCut
.
assign
(
GëNv¨
(),
kFALSE
);

2868 
	gfIsHighBkgCut
.
assign
(
GëNv¨
(),
kFALSE
);

2870 
	gfLowSigCut
.
assign
(
GëNv¨
(),0.);

2871 
	gfLowBkgCut
.
assign
(
GëNv¨
(),0.);

2872 
	gfHighSigCut
.
assign
(
GëNv¨
(),0.);

2873 
	gfHighBkgCut
.
assign
(
GëNv¨
(),0.);

2878  
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>::
c⁄°_ôî©‹
 
ô
 = 
evítSam∂e
.
begö
(); 
	gô
 !evítSam∂e.
íd
(); ++it ) {

2879 i‡(
D©aInfo
().
IsSig«l
(*
ô
)){

2880 
	gnTŸS
 +(*
ô
)->
GëWeight
();

2881 ++
	gnTŸS_unWeighãd
;

2884 
	gnTŸB
 +(*
ô
)->
GëWeight
();

2885 ++
	gnTŸB_unWeighãd
;

2887 
	gbdtEvítSam∂e
.
push_back
(
TMVA
::
BDTEvítWøµî
(*
ô
));

2890  
UI¡_t
 
	giv¨
 = 0; iv¨ < 
GëNv¨
(); ivar++ ) {

2891 
	gTMVA
::
BDTEvítWøµî
::
SëV¨Index
(
iv¨
);

2892 
	g°d
::
s‹t
–
bdtEvítSam∂e
.
begö
(),bdtEvítSam∂e.
íd
() );

2894 
DoubÀ_t
 
	gbkgWeightCå
 = 0.0, 
	gsigWeightCå
 = 0.0;

2895 
	g°d
::
ve˘‹
<
TMVA
::
BDTEvítWøµî
>::
ôî©‹
 
ô
 = 
bdtEvítSam∂e
.
begö
(), 
	gô_íd
 = bdtEvítSam∂e.
íd
();

2896  ; 
	gô
 !
ô_íd
; ++it ) {

2897 i‡(
D©aInfo
().
IsSig«l
(**
ô
))

2898 
	gsigWeightCå
 +(**
ô
)->
GëWeight
();

2900 
	gbkgWeightCå
 +(**
ô
)->
GëWeight
();

2902 
	gô
->
SëCumuœtiveWeight
(
Ál£
,
bkgWeightCå
);

2903 
	gô
->
SëCumuœtiveWeight
(
åue
,
sigWeightCå
);

2908 
DoubÀ_t
 
	gdVÆ
 = (
D©aInfo
().
GëV¨übÀInfo
(
iv¨
).
GëMax
(Ë- D©aInfo().GëV¨übÀInfo(iv¨).
GëMö
())/100. ;

2909 
DoubÀ_t
 
	gnSñS
, 
	gnSñB
, 
	geffS
=0.05, 
	geffB
=0.05, 
	gªjS
=0.05, 
	gªjB
=0.05;

2910 
DoubÀ_t
 
	gtmpEffS
, 
	gtmpEffB
, 
	gtmpRejS
, 
	gtmpRejB
;

2915 
UI¡_t
 
	gõv
 = 1; iev < 
	gbdtEvítSam∂e
.
size
(); iev++) {

2918 
	gnSñS
 = 
bdtEvítSam∂e
[
õv
].
GëCumuœtiveWeight
(
åue
);

2919 
	gnSñB
 = 
bdtEvítSam∂e
[
õv
].
GëCumuœtiveWeight
(
Ál£
);

2921 
	gtmpEffS
=
nSñS
/
nTŸS
;

2922 
	gtmpEffB
=
nSñB
/
nTŸB
;

2923 
	gtmpRejS
=1-
tmpEffS
;

2924 
	gtmpRejB
=1-
tmpEffB
;

2925 i‡(
	gnSñS
==0 && 
tmpEffB
>
effB
Ë{effBÒmpEffB; 
	gfLowBkgCut
[
iv¨
] = 
bdtEvítSam∂e
[
õv
].
GëVÆ
(Ë- 
dVÆ
; 
	gfIsLowBkgCut
[iv¨]=
kTRUE
;}

2926 i‡(
	gnSñB
==0 && 
tmpEffS
>
effS
Ë{effSÒmpEffS; 
	gfLowSigCut
[
iv¨
] = 
bdtEvítSam∂e
[
õv
].
GëVÆ
(Ë- 
dVÆ
; 
	gfIsLowSigCut
[iv¨]=
kTRUE
;}

2927 i‡(
	gnSñB
==
nTŸB
 && 
tmpRejS
>
ªjS
Ë{ªjSÒmpRejS; 
	gfHighSigCut
[
iv¨
] = 
bdtEvítSam∂e
[
õv
].
GëVÆ
(Ë+ 
dVÆ
; 
	gfIsHighSigCut
[iv¨]=
kTRUE
;}

2928 i‡(
	gnSñS
==
nTŸS
 && 
tmpRejB
>
ªjB
Ë{ªjBÒmpRejB; 
	gfHighBkgCut
[
iv¨
] = 
bdtEvítSam∂e
[
õv
].
GëVÆ
(Ë+ 
dVÆ
; 
	gfIsHighBkgCut
[iv¨]=
kTRUE
;}

2933 
Log
(Ë<< 
	gkDEBUG
 << " \tfoundánd sugge°ÅhêfﬁlowögÖossibÀÖª-£À˘i⁄ cut†" << 
	gEndl
;

2934 i‡(
	gfDoPª£À˘i⁄
Ë
Log
(Ë<< 
	gkDEBUG
 << "\âhêåaöög wû»bêd⁄êa·îÅhe£ cuts...ánd GëMVA vÆuêªtu∫†+1, (-1Ëf‹á sig«»(bkgËevíàth©Öas£†the£ cuts" << 
	gEndl
;

2935 
Log
(Ë<< 
	gkDEBUG
 << "\è†›ti⁄ DoPª£À˘i⁄ wa†nŸ u£d,Åhe£ cut†howevî wû»nŸ bê≥rf‹med, buàthêåaöög wû»£êthêfuŒ sam∂e"<<
	gEndl
;

2936 
UI¡_t
 
	giv¨
=0; iv¨ < 
GëNv¨
(); ivar++ ) {

2937 i‡(
	gfIsLowBkgCut
[
iv¨
]){

2938 
Log
(Ë<< 
	gkDEBUG
 << " \tfound cut: Bkg i‡v¨ " << 
	giv¨
 << " < " << 
	gfLowBkgCut
[
iv¨
] << 
	gEndl
;

2940 i‡(
	gfIsLowSigCut
[
iv¨
]){

2941 
Log
(Ë<< 
	gkDEBUG
 << " \tfound cut: Sig i‡v¨ " << 
	giv¨
 << " < " << 
	gfLowSigCut
[
iv¨
] << 
	gEndl
;

2943 i‡(
	gfIsHighBkgCut
[
iv¨
]){

2944 
Log
(Ë<< 
	gkDEBUG
 << " \tfound cut: Bkg i‡v¨ " << 
	giv¨
 << " > " << 
	gfHighBkgCut
[
iv¨
] << 
	gEndl
;

2946 i‡(
	gfIsHighSigCut
[
iv¨
]){

2947 
Log
(Ë<< 
	gkDEBUG
 << " \tfound cut: Sig i‡v¨ " << 
	giv¨
 << " > " << 
	gfHighSigCut
[
iv¨
] << 
	gEndl
;

2958 
DoubÀ_t
 
	gTMVA
::
MëhodBDT
::
	$AµlyPª£À˘i⁄Cuts
(c⁄° 
Evít
* 
ev
)

2960 
DoubÀ_t
 
ªsu…
=0;

2962 
UI¡_t
 
iv¨
=0; iv¨ < 
	`GëNv¨
(); ivar++ ) {

2963 i‡(
fIsLowBkgCut
[
iv¨
]){

2964 i‡(
ev
->
	`GëVÆue
(
iv¨
Ë< 
fLowBkgCut
[iv¨]Ë
ªsu…
 = -1;

2966 i‡(
fIsLowSigCut
[
iv¨
]){

2967 i‡(
ev
->
	`GëVÆue
(
iv¨
Ë< 
fLowSigCut
[iv¨]Ë
ªsu…
 = 1;

2969 i‡(
fIsHighBkgCut
[
iv¨
]){

2970 i‡(
ev
->
	`GëVÆue
(
iv¨
Ë> 
fHighBkgCut
[iv¨]Ë
ªsu…
 = -1;

2972 i‡(
fIsHighSigCut
[
iv¨
]){

2973 i‡(
ev
->
	`GëVÆue
(
iv¨
Ë> 
fHighSigCut
[iv¨]Ë
ªsu…
 = 1;

2977  
ªsu…
;

2978 
	}
}

	@src/MethodBase.cxx

72 
	~"TMVA/MëhodBa£.h
"

74 
	~"TMVA/C⁄fig.h
"

75 
	~"TMVA/C⁄figuøbÀ.h
"

76 
	~"TMVA/D©aSëInfo.h
"

77 
	~"TMVA/D©aSë.h
"

78 
	~"TMVA/Fa˘‹y.h
"

79 
	~"TMVA/IMëhod.h
"

80 
	~"TMVA/MsgLoggî.h
"

81 
	~"TMVA/PDF.h
"

82 
	~"TMVA/R™kög.h
"

83 
	~"TMVA/Fa˘‹y.h
"

84 
	~"TMVA/D©aLﬂdî.h
"

85 
	~"TMVA/Toﬁs.h
"

86 
	~"TMVA/Resu…s.h
"

87 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

88 
	~"TMVA/Resu…sRegªssi⁄.h
"

89 
	~"TMVA/Resu…sMu…i˛ass.h
"

90 
	~"TMVA/RoŸFödî.h
"

91 
	~"TMVA/Timî.h
"

92 
	~"TMVA/Toﬁs.h
"

93 
	~"TMVA/TS∂öe1.h
"

94 
	~"TMVA/Ty≥s.h
"

95 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

96 
	~"TMVA/V¨übÀGaussTønsf‹m.h
"

97 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

98 
	~"TMVA/V¨übÀInfo.h
"

99 
	~"TMVA/V¨übÀN‹mÆizeTønsf‹m.h
"

100 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

101 
	~"TMVA/V¨übÀTønsf‹m.h
"

102 
	~"TMVA/Vîsi⁄.h
"

104 
	~"TROOT.h
"

105 
	~"TSy°em.h
"

106 
	~"TObjSåög.h
"

107 
	~"TQObje˘.h
"

108 
	~"TS∂öe.h
"

109 
	~"TM©rix.h
"

110 
	~"TM©h.h
"

111 
	~"TH1F.h
"

112 
	~"TH2F.h
"

113 
	~"TFûe.h
"

114 
	~"TKey.h
"

115 
	~"TGøph.h
"

116 
	~"Rio°ªam.h
"

117 
	~"TXMLEngöe.h
"

119 
	~<iom™ù
>

120 
	~<io°ªam
>

121 
	~<f°ªam
>

122 
	~<s°ªam
>

123 
	~<c°dlib
>

124 
	~<Æg‹ôhm
>

125 
	~<limôs
>

128 
CœssImp
(
TMVA
::
MëhodBa£
);

130 
usög
 
	g°d
::
ídl
;

131 
usög
 
	g°d
::
©of
;

134 c⁄° 
Boﬁ_t
 
	gU£_S∂öes_f‹_Eff_
 = 
kTRUE
;

137 c⁄° 
I¡_t
 
	gNBIN_HIST_HIGH
 = 10000;

139 #ifde‡
_WIN32


141 #¥agm®
w¨nög
 ( 
dißbÀ
 : 4355 )

145 
	~"TGøph.h
"

146 
	~"TMu…iGøph.h
"

151 
	gTMVA
::
IPyth⁄I¡îa˘ive
::
	$IPyth⁄I¡îa˘ive
(Ë: 
	`fMu…iGøph
(
√w
 
	$TMu…iGøph
())

153 
fNumGøphs
 = 0;

154 
fIndex
 = 0;

155 
	}
}

159 
	gTMVA
::
IPyth⁄I¡îa˘ive
::~
	$IPyth⁄I¡îa˘ive
()

161 i‡(
fMu…iGøph
){

162 
dñëe
 
fMu…iGøph
;

163 
fMu…iGøph
 = 
nuŒ±r
;

166 
	}
}

174 
	gTMVA
::
IPyth⁄I¡îa˘ive
::
Inô
(
°d
::
ve˘‹
<
TSåög
>& 
gøphTôÀs
)

176 i‡(
fNumGøphs
!=0){

177 
°d
::
˚º
 << 
kERROR
 << "IPyth⁄I¡îa˘ive::Inô:áÃódy inôülized..." << std::
ídl
;

180 
I¡_t
 
	gcﬁ‹
 = 2;

181 auto& 
	gtôÀ
 : 
gøphTôÀs
){

182 
fGøphs
.
push_back
–
√w
 
TGøph
() );

183 
	gfGøphs
.
back
()->
SëTôÀ
(
tôÀ
);

184 
	gfGøphs
.
back
()->
SëName
(
tôÀ
);

185 
	gfGøphs
.
back
()->
SëFûlCﬁ‹
(
cﬁ‹
);

186 
	gfGøphs
.
back
()->
SëLöeCﬁ‹
(
cﬁ‹
);

187 
	gfGøphs
.
back
()->
SëM¨kîCﬁ‹
(
cﬁ‹
);

188 
	gfMu…iGøph
->
Add
(
fGøphs
.
back
());

189 
	gcﬁ‹
 += 2;

190 
	gfNumGøphs
 += 1;

198 
	gTMVA
::
IPyth⁄I¡îa˘ive
::
	$CÀ¨Gøphs
()

200 
I¡_t
 
i
=0; i<
fNumGøphs
; i++){

201 
fGøphs
[
i
]->
	`Së
(0);

203 
	}
}

212 
	gTMVA
::
IPyth⁄I¡îa˘ive
::
	$AddPoöt
(
DoubÀ_t
 
x
, DoubÀ_à
y1
, DoubÀ_à
y2
)

214 
fGøphs
[0]->
	`Së
(
fIndex
+1);

215 
fGøphs
[1]->
	`Së
(
fIndex
+1);

216 
fGøphs
[0]->
	`SëPoöt
(
fIndex
, 
x
, 
y1
);

217 
fGøphs
[1]->
	`SëPoöt
(
fIndex
, 
x
, 
y2
);

218 
fIndex
++;

220 
	}
}

228 
	gTMVA
::
IPyth⁄I¡îa˘ive
::
AddPoöt
(
°d
::
ve˘‹
<
DoubÀ_t
>& 
d©
)

230 
I¡_t
 
i
=0; 
	gi
<
	gfNumGøphs
;i++){

231 
	gfGøphs
[
i
]->
Së
(
fIndex
+1);

232 
	gfGøphs
[
i
]->
SëPoöt
(
fIndex
, 
d©
[0], dat[i+1]);

234 
	gfIndex
++;

242 
	gTMVA
::
MëhodBa£
::
	$MëhodBa£
–c⁄° 
TSåög
& 
jobName
,

243 
Ty≥s
::
EMVA
 
mëhodTy≥
,

244 c⁄° 
TSåög
& 
mëhodTôÀ
,

245 
D©aSëInfo
& 
dsi
,

246 c⁄° 
TSåög
& 
theO±i⁄
) :

247 
	`IMëhod
(),

248 
	`C⁄figuøbÀ
 ( 
theO±i⁄
 ),

249 
	`fTmpEvít
 ( 0 ),

250 
	`fR™kög
 ( 0 ),

251 
	`fI≈utV¨s
 ( 0 ),

252 
	`fA«lysisTy≥
 ( 
Ty≥s
::
kNoA«lysisTy≥
 ),

253 
	`fRegªssi⁄Rëu∫VÆ
 ( 0 ),

254 
	`fMu…i˛assRëu∫VÆ
 ( 0 ),

255 
	`fD©aSëInfo
 ( 
dsi
 ),

256 
	`fSig«lRe„ªn˚Cut
 ( 0.5 ),

257 
	`fSig«lRe„ªn˚CutOrõ¡©i⁄
( 1. ),

258 
	`fV¨übÀTønsf‹mTy≥
 ( 
Ty≥s
::
kSig«l
 ),

259 
	`fJobName
 ( 
jobName
 ),

260 
	`fMëhodName
 ( 
mëhodTôÀ
 ),

261 
	`fMëhodTy≥
 ( 
mëhodTy≥
 ),

262 
	`fTe°v¨
 ( "" ),

263 
	`fTMVATøöögVîsi⁄
 ( 
TMVA_VERSION_CODE
 ),

264 
	`fROOTTøöögVîsi⁄
 ( 
ROOT_VERSION_CODE
 ),

265 
	`fC⁄°ru˘edFromWeightFûe
 ( 
kFALSE
 ),

266 
	`fBa£Dú
 ( 0 ),

267 
	`fMëhodBa£Dú
 ( 0 ),

268 
	`fFûe
 ( 0 ),

269 
	`fSûítFûe
 (
kFALSE
),

270 
	`fModñPîsi°í˚
 (
kTRUE
),

271 
	`fWeightFûe
 ( "" ),

272 
	`fEffS
 ( 0 ),

273 
	`fDeÁu…PDF
 ( 0 ),

274 
	`fMVAPdfS
 ( 0 ),

275 
	`fMVAPdfB
 ( 0 ),

276 
	`fS∂S
 ( 0 ),

277 
	`fS∂B
 ( 0 ),

278 
	`fS∂effBvsS
 ( 0 ),

279 
	`fS∂TøöS
 ( 0 ),

280 
	`fS∂TøöB
 ( 0 ),

281 
	`fS∂TøöEffBvsS
 ( 0 ),

282 
	`fV¨Tønsf‹mSåög
 ( "None" ),

283 
	`fTønsf‹m©i⁄Poöãr
 ( 0 ),

284 
	`fTønsf‹m©i⁄
 ( 
dsi
, 
mëhodTôÀ
 ),

285 
	`fVîbo£
 ( 
kFALSE
 ),

286 
	`fVîbosôyLevñSåög
 ( "Default" ),

287 
	`fHñp
 ( 
kFALSE
 ),

288 
	`fHasMVAPdfs
 ( 
kFALSE
 ),

289 
	`fIgn‹eNegWeightsInTøöög
–
kFALSE
 ),

290 
	`fSig«lCœss
 ( 0 ),

291 
	`fBackgroundCœss
 ( 0 ),

292 
	`fS∂RefS
 ( 0 ),

293 
	`fS∂RefB
 ( 0 ),

294 
	`fS∂TøöRefS
 ( 0 ),

295 
	`fS∂TøöRefB
 ( 0 ),

296 
	$fSëupCom∂ëed
 (
kFALSE
)

298 
	`SëTe°v¨Name
();

299 
fLoggî
->
	`SëSour˚
(
	`GëName
());

302 
	}
}

308 
	gTMVA
::
MëhodBa£
::
	$MëhodBa£
–
Ty≥s
::
EMVA
 
mëhodTy≥
,

309 
D©aSëInfo
& 
dsi
,

310 c⁄° 
TSåög
& 
weightFûe
 ) :

311 
	`IMëhod
(),

312 
	`C⁄figuøbÀ
(""),

313 
	`fTmpEvít
 ( 0 ),

314 
	`fR™kög
 ( 0 ),

315 
	`fI≈utV¨s
 ( 0 ),

316 
	`fA«lysisTy≥
 ( 
Ty≥s
::
kNoA«lysisTy≥
 ),

317 
	`fRegªssi⁄Rëu∫VÆ
 ( 0 ),

318 
	`fMu…i˛assRëu∫VÆ
 ( 0 ),

319 
	`fD©aSëInfo
 ( 
dsi
 ),

320 
	`fSig«lRe„ªn˚Cut
 ( 0.5 ),

321 
	`fV¨übÀTønsf‹mTy≥
 ( 
Ty≥s
::
kSig«l
 ),

322 
	`fJobName
 ( "" ),

323 
	`fMëhodName
 ( "MethodBase" ),

324 
	`fMëhodTy≥
 ( 
mëhodTy≥
 ),

325 
	`fTe°v¨
 ( "" ),

326 
	`fTMVATøöögVîsi⁄
 ( 0 ),

327 
	`fROOTTøöögVîsi⁄
 ( 0 ),

328 
	`fC⁄°ru˘edFromWeightFûe
 ( 
kTRUE
 ),

329 
	`fBa£Dú
 ( 0 ),

330 
	`fMëhodBa£Dú
 ( 0 ),

331 
	`fFûe
 ( 0 ),

332 
	`fSûítFûe
 (
kFALSE
),

333 
	`fModñPîsi°í˚
 (
kTRUE
),

334 
	`fWeightFûe
 ( 
weightFûe
 ),

335 
	`fEffS
 ( 0 ),

336 
	`fDeÁu…PDF
 ( 0 ),

337 
	`fMVAPdfS
 ( 0 ),

338 
	`fMVAPdfB
 ( 0 ),

339 
	`fS∂S
 ( 0 ),

340 
	`fS∂B
 ( 0 ),

341 
	`fS∂effBvsS
 ( 0 ),

342 
	`fS∂TøöS
 ( 0 ),

343 
	`fS∂TøöB
 ( 0 ),

344 
	`fS∂TøöEffBvsS
 ( 0 ),

345 
	`fV¨Tønsf‹mSåög
 ( "None" ),

346 
	`fTønsf‹m©i⁄Poöãr
 ( 0 ),

347 
	`fTønsf‹m©i⁄
 ( 
dsi
, "" ),

348 
	`fVîbo£
 ( 
kFALSE
 ),

349 
	`fVîbosôyLevñSåög
 ( "Default" ),

350 
	`fHñp
 ( 
kFALSE
 ),

351 
	`fHasMVAPdfs
 ( 
kFALSE
 ),

352 
	`fIgn‹eNegWeightsInTøöög
–
kFALSE
 ),

353 
	`fSig«lCœss
 ( 0 ),

354 
	`fBackgroundCœss
 ( 0 ),

355 
	`fS∂RefS
 ( 0 ),

356 
	`fS∂RefB
 ( 0 ),

357 
	`fS∂TøöRefS
 ( 0 ),

358 
	`fS∂TøöRefB
 ( 0 ),

359 
	$fSëupCom∂ëed
 (
kFALSE
)

361 
fLoggî
->
	`SëSour˚
(
	`GëName
());

364 
	}
}

369 
	gTMVA
::
MëhodBa£
::~
	$MëhodBa£
( )

372 i‡(!
fSëupCom∂ëed
Ë
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "CÆlög de°ru˘‹ o‡mëhod which gŸÇevî sëup" << 
Endl
;

375 i‡(
fI≈utV¨s
 !0Ë{ fI≈utV¨s->
	`˛ór
(); 
dñëe
 fInputVars; }

376 i‡(
fR™kög
 !0Ë
dñëe
 fRanking;

379 i‡(
fDeÁu…PDF
!0Ë{ 
dñëe
 fDefaultPDF; fDefaultPDF = 0; }

380 i‡(
fMVAPdfS
 !0Ë{ 
dñëe
 fMVAPdfS; fMVAPdfS = 0; }

381 i‡(
fMVAPdfB
 !0Ë{ 
dñëe
 fMVAPdfB; fMVAPdfB = 0; }

384 i‡(
fS∂S
Ë{ 
dñëe
 fSplS; fSplS = 0; }

385 i‡(
fS∂B
Ë{ 
dñëe
 fSplB; fSplB = 0; }

386 i‡(
fS∂effBvsS
Ë{ 
dñëe
 fSpleffBvsS; fSpleffBvsS = 0; }

387 i‡(
fS∂RefS
Ë{ 
dñëe
 fSplRefS; fSplRefS = 0; }

388 i‡(
fS∂RefB
Ë{ 
dñëe
 fSplRefB; fSplRefB = 0; }

389 i‡(
fS∂TøöRefS
Ë{ 
dñëe
 fSplTrainRefS; fSplTrainRefS = 0; }

390 i‡(
fS∂TøöRefB
Ë{ 
dñëe
 fSplTrainRefB; fSplTrainRefB = 0; }

391 i‡(
fS∂TøöEffBvsS
Ë{ 
dñëe
 fSplTrainEffBvsS; fSplTrainEffBvsS = 0; }

393 
I¡_t
 
i
 = 0; i < 2; i++ ) {

394 i‡(
fEvítCﬁÀ˘i⁄s
.
	`©
(
i
)) {

395 
°d
::
ve˘‹
<
Evít
*>::
c⁄°_ôî©‹
 
ô
 = 
fEvítCﬁÀ˘i⁄s
.
	`©
(
i
)->
	`begö
();

396 
ô
 !
fEvítCﬁÀ˘i⁄s
.
	`©
(
i
)->
	`íd
(); it++) {

397 
	`dñëe
 (*
ô
);

399 
dñëe
 
fEvítCﬁÀ˘i⁄s
.
	`©
(
i
);

400 
fEvítCﬁÀ˘i⁄s
.
	`©
(
i
) = 0;

404 i‡(
fRegªssi⁄Rëu∫VÆ
Ë
dñëe
 fRegressionReturnVal;

405 i‡(
fMu…i˛assRëu∫VÆ
Ë
dñëe
 fMulticlassReturnVal;

406 
	}
}

411 
	gTMVA
::
MëhodBa£
::
	$SëupMëhod
()

415 i‡(
fSëupCom∂ëed
Ë
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "CÆlög SëupMëhod f‹Åhê£c⁄dÅime" << 
Endl
;

416 
	`InôBa£
();

417 
	`De˛¨eBa£O±i⁄s
();

418 
	`Inô
();

419 
	`De˛¨eO±i⁄s
();

420 
fSëupCom∂ëed
 = 
kTRUE
;

421 
	}
}

428 
	gTMVA
::
MëhodBa£
::
	$Pro˚ssSëup
()

430 
	`Pro˚ssBa£O±i⁄s
();

431 
	`Pro˚ssO±i⁄s
();

432 
	}
}

438 
	gTMVA
::
MëhodBa£
::
	$CheckSëup
()

440 
	`CheckF‹Unu£dO±i⁄s
();

441 
	}
}

446 
	gTMVA
::
MëhodBa£
::
	$InôBa£
()

448 
	`SëC⁄figDes¸ùti⁄
( "Configuration options for classifierárchitectureándÅuning" );

450 
fNbös
 = 
	`gC⁄fig
().
fV¨übÀPlŸtög
.
fNbösXOfROCCurve
;

451 
fNbösMVAouçut
 = 
	`gC⁄fig
().
fV¨übÀPlŸtög
.fNbinsMVAoutput;

452 
fNbösH
 = 
NBIN_HIST_HIGH
;

454 
fS∂TøöS
 = 0;

455 
fS∂TøöB
 = 0;

456 
fS∂TøöEffBvsS
 = 0;

457 
fMónS
 = -1;

458 
fMónB
 = -1;

459 
fRmsS
 = -1;

460 
fRmsB
 = -1;

461 
fXmö
 = 
DBL_MAX
;

462 
fXmax
 = -
DBL_MAX
;

463 
fTxtWeightsO∆y
 = 
kTRUE
;

464 
fS∂RefS
 = 0;

465 
fS∂RefB
 = 0;

467 
fTøöTime
 = -1.;

468 
fTe°Time
 = -1.;

470 
fR™kög
 = 0;

473 
fI≈utV¨s
 = 
√w
 
°d
::
ve˘‹
<
TSåög
>;

474 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

475 
fI≈utV¨s
->
	`push_back
(
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëLabñ
());

477 
fRegªssi⁄Rëu∫VÆ
 = 0;

478 
fMu…i˛assRëu∫VÆ
 = 0;

480 
fEvítCﬁÀ˘i⁄s
.
	`ªsize
( 2 );

481 
fEvítCﬁÀ˘i⁄s
.
	`©
(0) = 0;

482 
fEvítCﬁÀ˘i⁄s
.
	`©
(1) = 0;

485 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Signal") != 0) {

486 
fSig«lCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

488 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Background") != 0) {

489 
fBackgroundCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Background")->
	`GëNumbî
();

492 
	`SëC⁄figDes¸ùti⁄
( "Configuration options for MVA method" );

493 
	`SëC⁄figName
–
	`TSåög
("Mëhod"Ë+ 
	`GëMëhodTy≥Name
() );

494 
	}
}

514 
	gTMVA
::
MëhodBa£
::
	$De˛¨eBa£O±i⁄s
()

516 
	`De˛¨eO±i⁄Ref
–
fVîbo£
, "V", "Verbose output (short form of \"VerbosityLevel\" below - overridesÅheÜatter one)" );

518 
	`De˛¨eO±i⁄Ref
–
fVîbosôyLevñSåög
="Default", "VerbosityLevel", "VerbosityÜevel" );

519 
	`AddPªDefVÆ
–
	`TSåög
("Default") );

520 
	`AddPªDefVÆ
–
	`TSåög
("Debug") );

521 
	`AddPªDefVÆ
–
	`TSåög
("Verbose") );

522 
	`AddPªDefVÆ
–
	`TSåög
("Info") );

523 
	`AddPªDefVÆ
–
	`TSåög
("Warning") );

524 
	`AddPªDefVÆ
–
	`TSåög
("Error") );

525 
	`AddPªDefVÆ
–
	`TSåög
("Fatal") );

529 
fTxtWeightsO∆y
 = 
kTRUE
;

530 
fN‹mÆi£
 = 
kFALSE
;

532 
	`De˛¨eO±i⁄Ref
–
fV¨Tønsf‹mSåög
, "VarTransform", "List of variableÅransformationsÖerformed beforeÅraining,É.g., \"D_Background,P_Signal,G,N_AllClasses\" for: \"Decorrelation, PCA-transformation, Gaussianisation, Normalisation,Éach forÅhe given class ofÉvents ('AllClasses' denotesállÉvents ofáll classes, ifÇo class indication is given, 'All' isássumed)\"" );

534 
	`De˛¨eO±i⁄Ref
–
fHñp
, "H", "Print method-specific help message" );

536 
	`De˛¨eO±i⁄Ref
–
fHasMVAPdfs
, "CreateMVAPdfs", "Create PDFs for classifier outputs (signalánd background)" );

538 
	`De˛¨eO±i⁄Ref
–
fIgn‹eNegWeightsInTøöög
, "IgnoreNegWeightsInTraining",

540 
	}
}

545 
	gTMVA
::
MëhodBa£
::
	$Pro˚ssBa£O±i⁄s
()

547 i‡(
	`HasMVAPdfs
()) {

551 
fDeÁu…PDF
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
())+"_PDF", 
	`GëO±i⁄s
(), "MVAPdf" );

552 
fDeÁu…PDF
->
	`De˛¨eO±i⁄s
();

553 
fDeÁu…PDF
->
	`P¨£O±i⁄s
();

554 
fDeÁu…PDF
->
	`Pro˚ssO±i⁄s
();

555 
fMVAPdfB
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
())+"_PDFBkg", 
fDeÁu…PDF
->
	`GëO±i⁄s
(), "MVAPdfBkg", fDefaultPDF );

556 
fMVAPdfB
->
	`De˛¨eO±i⁄s
();

557 
fMVAPdfB
->
	`P¨£O±i⁄s
();

558 
fMVAPdfB
->
	`Pro˚ssO±i⁄s
();

559 
fMVAPdfS
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
())+"_PDFSig", 
fMVAPdfB
->
	`GëO±i⁄s
(), "MVAPdfSig", 
fDeÁu…PDF
 );

560 
fMVAPdfS
->
	`De˛¨eO±i⁄s
();

561 
fMVAPdfS
->
	`P¨£O±i⁄s
();

562 
fMVAPdfS
->
	`Pro˚ssO±i⁄s
();

565 
	`SëO±i⁄s
–
fMVAPdfS
->
	`GëO±i⁄s
() );

568 
TMVA
::
	`Cª©eV¨übÀTønsf‹ms
–
fV¨Tønsf‹mSåög
,

569 
	`D©aInfo
(),

570 
	`GëTønsf‹m©i⁄H™dÀr
(),

571 
	`Log
() );

573 i‡(!
	`HasMVAPdfs
()) {

574 i‡(
fDeÁu…PDF
!0Ë{ 
dñëe
 fDefaultPDF; fDefaultPDF = 0; }

575 i‡(
fMVAPdfS
 !0Ë{ 
dñëe
 fMVAPdfS; fMVAPdfS = 0; }

576 i‡(
fMVAPdfB
 !0Ë{ 
dñëe
 fMVAPdfB; fMVAPdfB = 0; }

579 i‡(
fVîbo£
) {

580 
fVîbosôyLevñSåög
 = 
	`TSåög
("Verbose");

581 
	`Log
().
	`SëMöTy≥
–
kVERBOSE
 );

583 i‡(
fVîbosôyLevñSåög
 ="Debug" ) 
	`Log
().
	`SëMöTy≥
–
kDEBUG
 );

584 i‡(
fVîbosôyLevñSåög
 ="Vîbo£" ) 
	`Log
().
	`SëMöTy≥
–
kVERBOSE
 );

585 i‡(
fVîbosôyLevñSåög
 ="Info" ) 
	`Log
().
	`SëMöTy≥
–
kINFO
 );

586 i‡(
fVîbosôyLevñSåög
 ="W¨nög" ) 
	`Log
().
	`SëMöTy≥
–
kWARNING
 );

587 i‡(
fVîbosôyLevñSåög
 ="Eº‹" ) 
	`Log
().
	`SëMöTy≥
–
kERROR
 );

588 i‡(
fVîbosôyLevñSåög
 ="F©Æ" ) 
	`Log
().
	`SëMöTy≥
–
kFATAL
 );

589 i‡(
fVîbosôyLevñSåög
 != "Default" ) {

590 
	`Log
(Ë<< 
kFATAL
 << "<ProcessOptions> VerbosityÜevelÅype '"

591 << 
fVîbosôyLevñSåög
 << "' unknown." << 
Endl
;

593 
Evít
::
	`SëIgn‹eNegWeightsInTøöög
(
fIgn‹eNegWeightsInTøöög
);

594 
	}
}

601 
	gTMVA
::
MëhodBa£
::
	$De˛¨eCom∑tibûôyO±i⁄s
()

603 
	`De˛¨eO±i⁄Ref
–
fN‹mÆi£
=
kFALSE
, "Normalise", "Normalise input variables" );

604 
	`De˛¨eO±i⁄Ref
–
fU£Dec‹r
=
kFALSE
, "D", "Use-decorrelated-variables flag" );

605 
	`De˛¨eO±i⁄Ref
–
fV¨übÀTønsf‹mTy≥Såög
="Signal", "VarTransformType",

607 
	`AddPªDefVÆ
–
	`TSåög
("Signal") );

608 
	`AddPªDefVÆ
–
	`TSåög
("Background") );

609 
	`De˛¨eO±i⁄Ref
–
fTxtWeightsO∆y
=
kTRUE
, "TxtWeightFilesOnly", "If True: writeállÅrainingÑesults (weights)ásÅext files (False: someáre written in ROOT format)" );

619 
	`De˛¨eO±i⁄Ref
–
fNbösMVAPdf
 = 60, "NbinsMVAPdf", "Number of bins used forÅhe PDFs of classifier outputs" );

620 
	`De˛¨eO±i⁄Ref
–
fNsmoŸhMVAPdf
 = 2, "NsmoothMVAPdf", "Number of smoothing iterations for classifier PDFs" );

621 
	}
}

628 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gTMVA
::
MëhodBa£
::
	$O±imizeTunögP¨amëîs
(
TSåög
 , TString )

634 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Parameter optimization isÇot yet implemented for method "

635 << 
	`GëName
(Ë<< 
Endl
;

636 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Cuºíéy wê√edÅÿ£àh¨dcoded whichÖ¨amëî i†tu√d i¿whichÑ™ges"<<
Endl
;

638 
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
tu√dP¨amëîs
;

639 
tu√dP¨amëîs
.
	`size
();

640  
tu√dP¨amëîs
;

642 
	}
}

649 
	gTMVA
::
MëhodBa£
::
SëTu√P¨amëîs
(
°d
::
m≠
<
TSåög
,
DoubÀ_t
> )

655 
	gTMVA
::
MëhodBa£
::
	$TøöMëhod
()

657 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

658 
Evít
::
	`SëIsTøöög
(
kTRUE
);

661 i‡(
	`Hñp
()Ë
	`PrötHñpMesßge
();

664 if(!
	`IsSûítFûe
()Ë
	`Ba£Dú
()->
	`cd
();

668 
	`GëTønsf‹m©i⁄H™dÀr
().
	`CÆcTønsf‹m©i⁄s
(
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
());

671 
	`Log
(Ë<< 
kDEBUG


672 << "BegöÅøöög" << 
Endl
;

673 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

674 
Timî
 
	`åaötimî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

675 
	`Tøö
();

676 
	`Log
(Ë<< 
kDEBUG


677 << "\tEnd o‡åaöög " << 
Endl
;

678 
	`SëTøöTime
(
åaötimî
.
	`Eœp£dSec⁄ds
());

679 
	`Log
(Ë<< 
kINFO


680 << "Eœp£dÅimêf‹Åøöög wôh " << 
nEvíts
 << "Évents: "

681 << 
åaötimî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

683 
	`Log
(Ë<< 
kDEBUG


687 i‡(
	`DoMu…i˛ass
()) {

688 
	`Log
(Ë<<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Mu…i˛as†˛assifiˇti⁄ o¿åaöög sam∂e" << 
Endl
;

689 
	`AddMu…i˛assOuçut
(
Ty≥s
::
kTøöög
);

691 i‡(!
	`DoRegªssi⁄
()) {

693 
	`Log
(Ë<<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
())<< "˛assifiˇti⁄ o¿åaöög sam∂e" << 
Endl
;

694 
	`AddCœssifõrOuçut
(
Ty≥s
::
kTøöög
);

695 i‡(
	`HasMVAPdfs
()) {

696 
	`Cª©eMVAPdfs
();

697 
	`AddCœssifõrOuçutProb
(
Ty≥s
::
kTøöög
);

702 
	`Log
(Ë<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "ªgªssi⁄ o¿åaöög sam∂e" << 
Endl
;

703 
	`AddRegªssi⁄Ouçut
–
Ty≥s
::
kTøöög
 );

705 i‡(
	`HasMVAPdfs
() ) {

706 
	`Log
(Ë<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Cª©êPDFs" << 
Endl
;

707 
	`Cª©eMVAPdfs
();

713 i‡(
fModñPîsi°í˚
 ) 
	`WrôeSèãToFûe
();

716 i‡((!
	`DoRegªssi⁄
()Ë&& (
fModñPîsi°í˚
)Ë
	`MakeCœss
();

720 if(!
	`IsSûítFûe
())

722 
	`Ba£Dú
()->
	`cd
();

723 
	`WrôeM⁄ô‹ögHi°osToFûe
();

725 
	}
}

729 
	gTMVA
::
MëhodBa£
::
	$GëRegªssi⁄Devüti⁄
(
UI¡_t
 
tgtNum
, 
Ty≥s
::
ETªeTy≥
 
ty≥
, 
DoubÀ_t
& 
°ddev
, DoubÀ_t& 
°ddev90Pî˚¡
 ) const

731 i‡(!
	`DoRegªssi⁄
()Ë
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "TryögÅÿu£ GëRegªssi⁄Devüti⁄(Ëwôhá cœssifiˇti⁄ job" << 
Endl
;

732 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Cª©êªsu…†f‹ " << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< 
Endl
;

733 
Resu…sRegªssi⁄
* 
ªgRes
 = (Resu…sRegªssi⁄*)
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kRegªssi⁄
);

734 
boﬁ
 
åunˇã
 = 
Ál£
;

735 
TH1F
* 
h1
 = 
ªgRes
->
	`QuadøticDevüti⁄
–
tgtNum
 , 
åunˇã
, 1.);

736 
°ddev
 = 
	`sqπ
(
h1
->
	`GëMón
());

737 
åunˇã
 = 
åue
;

738 
DoubÀ_t
 
yq
[1], 
xq
[]={0.9};

739 
h1
->
	`GëQu™tûes
(1,
yq
,
xq
);

740 
TH1F
* 
h2
 = 
ªgRes
->
	`QuadøticDevüti⁄
–
tgtNum
 , 
åunˇã
, 
yq
[0]);

741 
°ddev90Pî˚¡
 = 
	`sqπ
(
h2
->
	`GëMón
());

742 
dñëe
 
h1
;

743 
dñëe
 
h2
;

744 
	}
}

749 
	gTMVA
::
MëhodBa£
::
	$AddRegªssi⁄Ouçut
(
Ty≥s
::
ETªeTy≥
 
ty≥
)

751 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

753 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Cª©êªsu…†f‹ " << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< 
Endl
;

755 
Resu…sRegªssi⁄
* 
ªgRes
 = (Resu…sRegªssi⁄*)
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kRegªssi⁄
);

757 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

760 
Timî
 
	`timî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

761 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "EvÆu©i⁄ o‡" << 
	`GëMëhodName
() << " on "

762 << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< " sam∂e" << 
Endl
;

764 
ªgRes
->
	`Resize
–
nEvíts
 );

765 
I¡_t
 
õvt
=0; ievt<
nEvíts
; ievt++) {

766 
	`D©a
()->
	`SëCuºítEvít
(
õvt
);

767 
°d
::
ve˘‹
< 
Flﬂt_t
 > 
vÆs
 = 
	`GëRegªssi⁄VÆues
();

768 
ªgRes
->
	`SëVÆue
–
vÆs
, 
õvt
 );

769 
timî
.
	`DøwProgªssB¨
–
õvt
 );

772 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())

773 << "Eœp£dÅimêf‹ÉvÆu©i⁄ o‡" << 
nEvíts
 << "Évents: "

774 << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

777 i‡(
ty≥
==
Ty≥s
::
kTe°ög
)

778 
	`SëTe°Time
(
timî
.
	`Eœp£dSec⁄ds
());

780 
TSåög
 
	`hi°NamePªfix
(
	`GëTe°v¨Name
());

781 
hi°NamePªfix
 +(
ty≥
==
Ty≥s
::
kTøöög
?"train":"test");

782 
ªgRes
->
	`Cª©eDevüti⁄Hi°ogøms
–
hi°NamePªfix
 );

783 
	}
}

788 
	gTMVA
::
MëhodBa£
::
	$AddMu…i˛assOuçut
(
Ty≥s
::
ETªeTy≥
 
ty≥
)

790 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

792 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Cª©êªsu…†f‹ " << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< 
Endl
;

794 
Resu…sMu…i˛ass
* 
ªsMu…i˛ass
 = 
dy«mic_ˇ°
<Resu…sMu…i˛ass*>(
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kMu…i˛ass
));

795 i‡(!
ªsMu…i˛ass
Ë
	`Log
(Ë<< 
kFATAL
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "u«bÀÅÿ¸óãÖoöã∏ö AddMu…i˛assOuçut,Éxôög."<<
Endl
;

797 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

800 
Timî
 
	`timî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

802 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Mu…i˛as†evÆu©i⁄ o‡" << 
	`GëMëhodName
() << " on "

803 << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< " sam∂e" << 
Endl
;

805 
ªsMu…i˛ass
->
	`Resize
–
nEvíts
 );

806 
I¡_t
 
õvt
=0; ievt<
nEvíts
; ievt++) {

807 
	`D©a
()->
	`SëCuºítEvít
(
õvt
);

808 
°d
::
ve˘‹
< 
Flﬂt_t
 > 
vÆs
 = 
	`GëMu…i˛assVÆues
();

809 
ªsMu…i˛ass
->
	`SëVÆue
–
vÆs
, 
õvt
 );

810 
timî
.
	`DøwProgªssB¨
–
õvt
 );

813 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())

814 << "Eœp£dÅimêf‹ÉvÆu©i⁄ o‡" << 
nEvíts
 << "Évents: "

815 << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

818 i‡(
ty≥
==
Ty≥s
::
kTe°ög
)

819 
	`SëTe°Time
(
timî
.
	`Eœp£dSec⁄ds
());

821 
TSåög
 
	`hi°NamePªfix
(
	`GëTe°v¨Name
());

822 
hi°NamePªfix
 +(
ty≥
==
Ty≥s
::
kTøöög
?"_Train":"_Test");

823 
ªsMu…i˛ass
->
	`Cª©eMu…i˛assHi°os
–
hi°NamePªfix
, 
fNbösMVAouçut
, 
fNbösH
 );

824 
ªsMu…i˛ass
->
	`Cª©eMu…i˛assPîf‹m™˚Hi°os
(
hi°NamePªfix
);

825 
	}
}

829 
	gTMVA
::
MëhodBa£
::
	$NoEº‹CÆc
(
DoubÀ_t
* c⁄° 
îr
, DoubÀ_t* c⁄° 
îrUµî
) {

830 i‡(
îr
) *err=-1;

831 i‡(
îrUµî
) *errUpper=-1;

832 
	}
}

836 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëMvaVÆue
–c⁄° 
Evít
* c⁄° 
ev
, 
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 ) {

837 
fTmpEvít
 = 
ev
;

838 
DoubÀ_t
 
vÆ
 = 
	`GëMvaVÆue
(
îr
, 
îrUµî
);

839 
fTmpEvít
 = 0;

840  
vÆ
;

841 
	}
}

847 
Boﬁ_t
 
	gTMVA
::
MëhodBa£
::
	$IsSig«lLike
() {

848  
	`GëMvaVÆue
()*
	`GëSig«lRe„ªn˚CutOrõ¡©i⁄
(Ë> 
	`GëSig«lRe„ªn˚Cut
()*GëSig«lRe„ªn˚CutOrõ¡©i⁄(Ë? 
kTRUE
 : 
kFALSE
;

849 
	}
}

854 
Boﬁ_t
 
	gTMVA
::
MëhodBa£
::
	$IsSig«lLike
(
DoubÀ_t
 
mvaVÆ
) {

855  
mvaVÆ
*
	`GëSig«lRe„ªn˚CutOrõ¡©i⁄
(Ë> 
	`GëSig«lRe„ªn˚Cut
()*GëSig«lRe„ªn˚CutOrõ¡©i⁄(Ë? 
kTRUE
 : 
kFALSE
;

856 
	}
}

861 
	gTMVA
::
MëhodBa£
::
	$AddCœssifõrOuçut
–
Ty≥s
::
ETªeTy≥
 
ty≥
 )

863 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

865 
Resu…sCœssifiˇti⁄
* 
˛Res
 =

866 (
Resu…sCœssifiˇti⁄
*)
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kCœssifiˇti⁄
 );

868 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

869 
˛Res
->
	`Resize
–
nEvíts
 );

872 
Timî
 
	`timî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

873 
°d
::
ve˘‹
<
DoubÀ_t
> 
mvaVÆues
 = 
	`GëMvaVÆues
(0, 
nEvíts
, 
åue
);

876 i‡(
ty≥
==
Ty≥s
::
kTe°ög
)

877 
	`SëTe°Time
(
timî
.
	`Eœp£dSec⁄ds
());

880 
I¡_t
 
õvt
=0; ievt<
nEvíts
; ievt++) {

881 
˛Res
->
	`SëVÆue
–
mvaVÆues
[
õvt
], ievt );

883 
	}
}

887 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
MëhodBa£
::
	$GëMvaVÆues
(
L⁄g64_t
 
fú°Evt
, L⁄g64_à
œ°Evt
, 
Boﬁ_t
 
logProgªss
)

890 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

891 i‡(
fú°Evt
 > 
œ°Evt
 ||Üa°Evà> 
nEvíts
)ÜastEvt =ÇEvents;

892 i‡(
fú°Evt
 < 0) firstEvt = 0;

893 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`vÆues
(
œ°Evt
-
fú°Evt
);

895 
nEvíts
 = 
vÆues
.
	`size
();

898 
Timî
 
	`timî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

900 i‡(
logProgªss
)

901 
	`Log
(Ë<< 
kHEADER
<<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
())<< "EvÆu©i⁄ o‡" << 
	`GëMëhodName
() << " on "

902 << (
	`D©a
()->
	`GëCuºítTy≥
()==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< " sam∂ê(" << 
nEvíts
 << "Évíts)" << 
Endl
;

905 
I¡_t
 
õvt
=
fú°Evt
; ievt<
œ°Evt
; ievt++) {

906 
	`D©a
()->
	`SëCuºítEvít
(
õvt
);

907 
vÆues
[
õvt
] = 
	`GëMvaVÆue
();

910 i‡(
logProgªss
) {

911 
I¡_t
 
modulo
 = 
	`I¡_t
(
nEvíts
/100);

912 i‡(
modulo
 <= 0 ) modulo = 1;

913 i‡(
õvt
%
modulo
 =0Ë
timî
.
	`DøwProgªssB¨
( ievt );

916 i‡(
logProgªss
) {

917 
	`Log
(Ë<< 
kINFO


918 << "Eœp£dÅimêf‹ÉvÆu©i⁄ o‡" << 
nEvíts
 << "Évents: "

919 << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

922  
vÆues
;

923 
	}
}

928 
	gTMVA
::
MëhodBa£
::
	$AddCœssifõrOuçutProb
–
Ty≥s
::
ETªeTy≥
 
ty≥
 )

930 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

932 
Resu…sCœssifiˇti⁄
* 
mvaProb
 =

933 (
Resu…sCœssifiˇti⁄
*)
	`D©a
()->
	`GëResu…s
(
	`TSåög
("¥ob_")+
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kCœssifiˇti⁄
 );

935 
L⁄g64_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

938 
Timî
 
	`timî
–
nEvíts
, 
	`GëName
(), 
kTRUE
 );

940 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "EvÆu©i⁄ o‡" << 
	`GëMëhodName
() << " on "

941 << (
ty≥
==
Ty≥s
::
kTøöög
?"åaöög":"ã°ög"Ë<< " sam∂e" << 
Endl
;

943 
mvaProb
->
	`Resize
–
nEvíts
 );

944 
I¡_t
 
õvt
=0; ievt<
nEvíts
; ievt++) {

946 
	`D©a
()->
	`SëCuºítEvít
(
õvt
);

947 
Flﬂt_t
 
¥oba
 = ((Flﬂt_t)
	`GëProba
–
	`GëMvaVÆue
(), 0.5 ));

948 i‡(
¥oba
 < 0) ;

949 
mvaProb
->
	`SëVÆue
–
¥oba
, 
õvt
 );

952 
I¡_t
 
modulo
 = 
	`I¡_t
(
nEvíts
/100);

953 i‡(
modulo
 <= 0 ) modulo = 1;

954 i‡(
õvt
%
modulo
 =0Ë
timî
.
	`DøwProgªssB¨
( ievt );

957 
	`Log
(Ë<< 
kDEBUG
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())

958 << "Eœp£dÅimêf‹ÉvÆu©i⁄ o‡" << 
nEvíts
 << "Évents: "

959 << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

960 
	}
}

969 
	gTMVA
::
MëhodBa£
::
	$Te°Regªssi⁄
–
DoubÀ_t
& 
büs
, DoubÀ_t& 
büsT
,

970 
DoubÀ_t
& 
dev
, DoubÀ_t& 
devT
,

971 
DoubÀ_t
& 
rms
, DoubÀ_t& 
rmsT
,

972 
DoubÀ_t
& 
mInf
, DoubÀ_t& 
mInfT
,

973 
DoubÀ_t
& 
c‹r
,

974 
Ty≥s
::
ETªeTy≥
 
ty≥
 )

976 
Ty≥s
::
ETªeTy≥
 
ßvedTy≥
 = 
	`D©a
()->
	`GëCuºítTy≥
();

977 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

979 
büs
 = 0; 
büsT
 = 0; 
dev
 = 0; 
devT
 = 0; 
rms
 = 0; 
rmsT
 = 0;

980 
DoubÀ_t
 
sumw
 = 0;

981 
DoubÀ_t
 
m1
 = 0, 
m2
 = 0, 
s1
 = 0, 
s2
 = 0, 
s12
 = 0;

982 c⁄° 
I¡_t
 
√vt
 = 
	`GëNEvíts
();

983 
Flﬂt_t
* 
rV
 = 
√w
 Flﬂt_t[
√vt
];

984 
Flﬂt_t
* 
tV
 = 
√w
 Flﬂt_t[
√vt
];

985 
Flﬂt_t
* 
wV
 = 
√w
 Flﬂt_t[
√vt
];

986 
Flﬂt_t
 
xmö
 = 1e30, 
xmax
 = -1e30;

987 
L⁄g64_t
 
õvt
=0; ievt<
√vt
; ievt++) {

989 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

990 
Flﬂt_t
 
t
 = 
ev
->
	`GëT¨gë
(0);

991 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

992 
Flﬂt_t
 
r
 = 
	`GëRegªssi⁄VÆues
()[0];

993 
Flﬂt_t
 
d
 = (
r
-
t
);

996 
xmö
 = 
TM©h
::
	`Mö
(xmö, TM©h::Mö(
t
, 
r
));

997 
xmax
 = 
TM©h
::
	`Max
(xmax, TM©h::Max(
t
, 
r
));

1000 
rV
[
õvt
] = 
r
;

1001 
tV
[
õvt
] = 
t
;

1002 
wV
[
õvt
] = 
w
;

1005 
sumw
 +
w
;

1006 
büs
 +
w
 * 
d
;

1007 
dev
 +
w
 * 
TM©h
::
	`Abs
(
d
);

1008 
rms
 +
w
 * 
d
 * d;

1011 
m1
 +
t
*
w
; 
s1
 +=Å*t*w;

1012 
m2
 +
r
*
w
; 
s2
 +=Ñ*r*w;

1013 
s12
 +
t
*
r
;

1017 
büs
 /
sumw
;

1018 
dev
 /
sumw
;

1019 
rms
 /
sumw
;

1020 
rms
 = 
TM©h
::
	`Sqπ
‘m†- 
büs
*bias);

1023 
m1
 /
sumw
;

1024 
m2
 /
sumw
;

1025 
c‹r
 = 
s12
/
sumw
 - 
m1
*
m2
;

1026 
c‹r
 /
TM©h
::
	`Sqπ
–(
s1
/
sumw
 - 
m1
*m1Ë* (
s2
/sumw - 
m2
*m2) );

1029 
TH2F
* 
hi°
 = 
√w
 
	`TH2F
–"hi°", "hi°", 150, 
xmö
, 
xmax
, 100, xmin, xmax );

1030 
TH2F
* 
hi°T
 = 
√w
 
	`TH2F
–"hi°T", "hi°T", 150, 
xmö
, 
xmax
, 100, xmin, xmax );

1033 
DoubÀ_t
 
devMax
 = 
büs
 + 2*
rms
;

1034 
DoubÀ_t
 
devMö
 = 
büs
 - 2*
rms
;

1035 
sumw
 = 0;

1036 
ic
=0;

1037 
L⁄g64_t
 
õvt
=0; ievt<
√vt
; ievt++) {

1038 
Flﬂt_t
 
d
 = (
rV
[
õvt
] - 
tV
[ievt]);

1039 
hi°
->
	`Fûl
–
rV
[
õvt
], 
tV
[õvt], 
wV
[ievt] );

1040 i‡(
d
 >
devMö
 && d <
devMax
) {

1041 
sumw
 +
wV
[
õvt
];

1042 
büsT
 +
wV
[
õvt
] * 
d
;

1043 
devT
 +
wV
[
õvt
] * 
TM©h
::
	`Abs
(
d
);

1044 
rmsT
 +
wV
[
õvt
] * 
d
 * d;

1045 
hi°T
->
	`Fûl
–
rV
[
õvt
], 
tV
[õvt], 
wV
[ievt] );

1046 
ic
++;

1049 
büsT
 /
sumw
;

1050 
devT
 /
sumw
;

1051 
rmsT
 /
sumw
;

1052 
rmsT
 = 
TM©h
::
	`Sqπ
‘msT - 
büsT
*biasT);

1053 
mInf
 = 
	`gToﬁs
().
	`GëMutuÆInf‹m©i⁄
–*
hi°
 );

1054 
mInfT
 = 
	`gToﬁs
().
	`GëMutuÆInf‹m©i⁄
–*
hi°T
 );

1056 
dñëe
 
hi°
;

1057 
dñëe
 
hi°T
;

1059 
dñëe
 [] 
rV
;

1060 
dñëe
 [] 
tV
;

1061 
dñëe
 [] 
wV
;

1063 
	`D©a
()->
	`SëCuºítTy≥
(
ßvedTy≥
);

1064 
	}
}

1070 
	gTMVA
::
MëhodBa£
::
	$Te°Mu…i˛ass
()

1072 
Resu…sMu…i˛ass
* 
ªsMu…i˛ass
 = 
dy«mic_ˇ°
<Resu…sMu…i˛ass*>(
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kMu…i˛ass
));

1073 i‡(!
ªsMu…i˛ass
Ë
	`Log
(Ë<< 
kFATAL
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "u«bÀÅÿ¸óãÖoöã∏ö Te°Mu…i˛ass,Éxôög."<<
Endl
;

1074 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Dëîmöê›timÆ mu…i˛as†cut†f‹Åe° d©a..." << 
Endl
;

1075 
UI¡_t
 
i˛s
 = 0; i˛s<
	`D©aInfo
().
	`GëNCœs£s
(); ++icls) {

1076 
ªsMu…i˛ass
->
	`GëBe°Mu…iCœssCuts
(
i˛s
);

1078 
	}
}

1084 
	gTMVA
::
MëhodBa£
::
	$Te°Cœssifiˇti⁄
()

1086 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

1088 
Resu…sCœssifiˇti⁄
* 
mvaRes
 = 
dy«mic_ˇ°
<ResultsClassification*>

1089 –
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(),
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
) );

1092 i‡(0==
mvaRes
 && !(
	`GëMëhodTy≥Name
().
	`C⁄èös
("Cuts"))) {

1093 
	`Log
()<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "mvaRe†" << 
mvaRes
 << " GëMëhodTy≥Namê" << 
	`GëMëhodTy≥Name
()

1094 << " c⁄èö†" << !(
	`GëMëhodTy≥Name
().
	`C⁄èös
("Cuts")Ë<< 
Endl
;

1095 
	`Log
(Ë<< 
kFATAL
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "<Te°Inô> Te° v¨übÀ " << 
	`GëTe°v¨Name
()

1096 << "ÇŸ found i¿åì" << 
Endl
;

1100 
	`gToﬁs
().
	`CompuãSèt
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
), 
mvaRes
->
	`GëVÆueVe˘‹
(),

1101 
fMónS
, 
fMónB
, 
fRmsS
, 
fRmsB
, 
fXmö
, 
fXmax
, 
fSig«lCœss
 );

1104 
DoubÀ_t
 
ƒms
 = 10;

1105 
fXmö
 = 
TM©h
::
	`Max
–TM©h::
	`Mö
–
fMónS
 - 
ƒms
*
fRmsS
, 
fMónB
 -Çrms*
fRmsB
 ), fXmin );

1106 
fXmax
 = 
TM©h
::
	`Mö
–TM©h::
	`Max
–
fMónS
 + 
ƒms
*
fRmsS
, 
fMónB
 +Çrms*
fRmsB
 ), fXmax );

1109 
fCutOrõ¡©i⁄
 = (
fMónS
 > 
fMónB
Ë? 
kPosôive
 : 
kNeg©ive
;

1114 
DoubÀ_t
 
sxmax
 = 
fXmax
+0.00001;

1118 
TSåög
 
Te°v¨Name
;

1119 if(
	`IsSûítFûe
())

1121 
Te°v¨Name
=
	`F‹m
("[%s]%s",
	`D©aInfo
().
	`GëName
(),
	`GëTe°v¨Name
().
	`D©a
());

1124 
Te°v¨Name
=
	`GëTe°v¨Name
();

1126 
TH1
* 
mva_s
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_S",Te°v¨Namê+ "_S", 
fNbösMVAouçut
, 
fXmö
, 
sxmax
 );

1127 
TH1
* 
mva_b
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_B",Te°v¨Namê+ "_B", 
fNbösMVAouçut
, 
fXmö
, 
sxmax
 );

1128 
mvaRes
->
	`St‹e
(
mva_s
, "MVA_S");

1129 
mvaRes
->
	`St‹e
(
mva_b
, "MVA_B");

1130 
mva_s
->
	`Sumw2
();

1131 
mva_b
->
	`Sumw2
();

1133 
TH1
* 
¥oba_s
 = 0;

1134 
TH1
* 
¥oba_b
 = 0;

1135 
TH1
* 
ørôy_s
 = 0;

1136 
TH1
* 
ørôy_b
 = 0;

1137 i‡(
	`HasMVAPdfs
()) {

1139 
¥oba_s
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_Proba_S", Te°v¨Namê+ "_Proba_S", 
fNbösMVAouçut
, 0.0, 1.0 );

1140 
¥oba_b
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_Proba_B", Te°v¨Namê+ "_Proba_B", 
fNbösMVAouçut
, 0.0, 1.0 );

1141 
mvaRes
->
	`St‹e
(
¥oba_s
, "Prob_S");

1142 
mvaRes
->
	`St‹e
(
¥oba_b
, "Prob_B");

1143 
¥oba_s
->
	`Sumw2
();

1144 
¥oba_b
->
	`Sumw2
();

1147 
ørôy_s
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_R¨ôy_S", Te°v¨Namê+ "_R¨ôy_S", 
fNbösMVAouçut
, 0.0, 1.0 );

1148 
ørôy_b
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_R¨ôy_B", Te°v¨Namê+ "_R¨ôy_B", 
fNbösMVAouçut
, 0.0, 1.0 );

1149 
mvaRes
->
	`St‹e
(
ørôy_s
, "Rar_S");

1150 
mvaRes
->
	`St‹e
(
ørôy_b
, "Rar_B");

1151 
ørôy_s
->
	`Sumw2
();

1152 
ørôy_b
->
	`Sumw2
();

1156 
TH1
* 
mva_eff_s
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_S_high", Te°v¨Namê+ "_S_high", 
fNbösH
, 
fXmö
, 
sxmax
 );

1157 
TH1
* 
mva_eff_b
 = 
√w
 
	`TH1D
–
Te°v¨Name
 + "_B_high", Te°v¨Namê+ "_B_high", 
fNbösH
, 
fXmö
, 
sxmax
 );

1158 
mvaRes
->
	`St‹e
(
mva_eff_s
, "MVA_HIGHBIN_S");

1159 
mvaRes
->
	`St‹e
(
mva_eff_b
, "MVA_HIGHBIN_B");

1160 
mva_eff_s
->
	`Sumw2
();

1161 
mva_eff_b
->
	`Sumw2
();

1165 
Resu…sCœssifiˇti⁄
* 
mvaProb
 = 
dy«mic_ˇ°
<ResultsClassification*>

1166 (
	`D©a
()->
	`GëResu…s
–
	`TSåög
("¥ob_")+
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kMaxA«lysisTy≥
 ) );

1168 
	`Log
(Ë<< 
kHEADER
 <<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Lo› ovîÅe°Évít†™d fû»hi°ogøm†wôh cœssifõ∏ª•⁄£..." << 
Endl
 << Endl;

1169 i‡(
mvaProb
Ë
	`Log
(Ë<< 
kINFO
 << "AlsÿfûlögÖrobabûôyándÑ¨ôy hi°ogøm†(⁄Ñeque°)..." << 
Endl
;

1170 
°d
::
ve˘‹
<
Boﬁ_t
>* 
mvaResTy≥s
 = 
mvaRes
->
	`GëVÆueVe˘‹Ty≥s
();

1173 i‡–
mvaRes
->
	`GëSize
(Ë!
	`GëNEvíts
() ) {

1174 
	`Log
(Ë<< 
kFATAL
 << 
TSåög
::
	`F‹m©
("Inc⁄si°íàªsu… sizê %Œd wôhÇumbî o‡evít†%u ", 
mvaRes
->
	`GëSize
(Ë, 
	`GëNEvíts
(ËË<< 
Endl
;

1175 
	`as£π
(
mvaRes
->
	`GëSize
(Ë=
	`GëNEvíts
());

1178 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1180 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

1181 
Flﬂt_t
 
v
 = (*
mvaRes
)[
õvt
][0];

1182 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

1184 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)) {

1185 
mvaResTy≥s
->
	`push_back
(
kTRUE
);

1186 
mva_s
 ->
	`Fûl
–
v
, 
w
 );

1187 i‡(
mvaProb
) {

1188 
¥oba_s
->
	`Fûl
–(*
mvaProb
)[
õvt
][0], 
w
 );

1189 
ørôy_s
->
	`Fûl
–
	`GëR¨ôy
–
v
 ), 
w
 );

1192 
mva_eff_s
 ->
	`Fûl
–
v
, 
w
 );

1195 
mvaResTy≥s
->
	`push_back
(
kFALSE
);

1196 
mva_b
 ->
	`Fûl
–
v
, 
w
 );

1197 i‡(
mvaProb
) {

1198 
¥oba_b
->
	`Fûl
–(*
mvaProb
)[
õvt
][0], 
w
 );

1199 
ørôy_b
->
	`Fûl
–
	`GëR¨ôy
–
v
 ), 
w
 );

1201 
mva_eff_b
 ->
	`Fûl
–
v
, 
w
 );

1206 
	`gToﬁs
().
	`N‹mHi°
–
mva_s
 );

1207 
	`gToﬁs
().
	`N‹mHi°
–
mva_b
 );

1208 
	`gToﬁs
().
	`N‹mHi°
–
¥oba_s
 );

1209 
	`gToﬁs
().
	`N‹mHi°
–
¥oba_b
 );

1210 
	`gToﬁs
().
	`N‹mHi°
–
ørôy_s
 );

1211 
	`gToﬁs
().
	`N‹mHi°
–
ørôy_b
 );

1212 
	`gToﬁs
().
	`N‹mHi°
–
mva_eff_s
 );

1213 
	`gToﬁs
().
	`N‹mHi°
–
mva_eff_b
 );

1216 i‡(
fS∂S
Ë{ 
dñëe
 fSplS; fSplS = 0; }

1217 i‡(
fS∂B
Ë{ 
dñëe
 fSplB; fSplB = 0; }

1218 
fS∂S
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
()Ë+ " PDF Sig", 
mva_s
, 
PDF
::
kS∂öe2
 );

1219 
fS∂B
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
()Ë+ " PDF Bkg", 
mva_b
, 
PDF
::
kS∂öe2
 );

1220 
	}
}

1226 
	gTMVA
::
MëhodBa£
::
	$WrôeSèãToSåóm
–
°d
::
o°ªam
& 
tf
 ) const

1228 
TSåög
 
¥efix
 = "";

1229 
U£rGroup_t
 * 
u£rInfo
 = 
gSy°em
->
	`GëU£rInfo
();

1231 
tf
 << 
¥efix
 << "#GEN -*-*-*-*-*-*-*-*-*-*-*- gíîÆ infÿ-*-*-*-*-*-*-*-*-*-*-*-" << 
°d
::
ídl
 <<Örefix << std::endl;

1232 
tf
 << 
¥efix
 << "Mëhod : " << 
	`GëMëhodTy≥Name
(Ë<< "::" << 
	`GëMëhodName
(Ë<< 
°d
::
ídl
;

1233 
tf
.
	`£tf
(
°d
::
ios
::
À·
);

1234 
tf
 << 
¥efix
 << "TMVA Rñó£ : " << 
°d
::
	`£tw
(10Ë<< 
	`GëTøöögTMVAVîsi⁄Såög
() << " ["

1235 << 
	`GëTøöögTMVAVîsi⁄Code
(Ë<< "]" << 
°d
::
ídl
;

1236 
tf
 << 
¥efix
 << "ROOT Rñó£ : " << 
°d
::
	`£tw
(10Ë<< 
	`GëTøöögROOTVîsi⁄Såög
() << " ["

1237 << 
	`GëTøöögROOTVîsi⁄Code
(Ë<< "]" << 
°d
::
ídl
;

1238 
tf
 << 
¥efix
 << "Cª©‹ : " << 
u£rInfo
->
fU£r
 << 
°d
::
ídl
;

1239 
tf
 << 
¥efix
 << "D©ê : "; 
TD©ime
 *
d
 = 
√w
 TD©ime;Å‡<< d->
	`AsSåög
(Ë<< 
°d
::
ídl
; 
dñëe
 d;

1240 
tf
 << 
¥efix
 << "Ho° : " << 
gSy°em
->
	`GëBuûdNode
(Ë<< 
°d
::
ídl
;

1241 
tf
 << 
¥efix
 << "Dú : " << 
gSy°em
->
	`W‹kögDúe˘‹y
(Ë<< 
°d
::
ídl
;

1242 
tf
 << 
¥efix
 << "TøöögÉvíts: " << 
	`D©a
()->
	`GëNTøöögEvíts
(Ë<< 
°d
::
ídl
;

1244 
TSåög
 
	`™ÆysisTy≥
(((
c⁄°_ˇ°
<
TMVA
::
MëhodBa£
*>(
this
)->
	`GëA«lysisTy≥
()==
Ty≥s
::
kRegªssi⁄
) ? "Regression" : "Classification"));

1246 
tf
 << 
¥efix
 << "A«lysi†ty≥ : " << "[" << ((
	`GëA«lysisTy≥
()==
Ty≥s
::
kRegªssi⁄
Ë? "Regªssi⁄" : "Cœssifiˇti⁄"Ë<< "]" << 
°d
::
ídl
;

1247 
tf
 << 
¥efix
 << 
°d
::
ídl
;

1249 
dñëe
 
u£rInfo
;

1252 
tf
 << 
¥efix
 << 
°d
::
ídl
 <<Örefix << "#OPT -*-*-*-*-*-*-*-*-*-*-*-*- options -*-*-*-*-*-*-*-*-*-*-*-*-" << std::endl <<Örefix << std::endl;

1253 
	`WrôeO±i⁄sToSåóm
–
tf
, 
¥efix
 );

1254 
tf
 << 
¥efix
 << 
°d
::
ídl
;

1257 
tf
 << 
¥efix
 << 
°d
::
ídl
 <<Örefix << "#VAR -*-*-*-*-*-*-*-*-*-*-*-* variables *-*-*-*-*-*-*-*-*-*-*-*-" << std::endl <<Örefix << std::endl;

1258 
	`WrôeV¨sToSåóm
–
tf
, 
¥efix
 );

1259 
tf
 << 
¥efix
 << 
°d
::
ídl
;

1260 
	}
}

1265 
	gTMVA
::
MëhodBa£
::
	$AddInfoIãm
–* 
gi
, c⁄° 
TSåög
& 
«me
, c⁄° TSåög& 
vÆue
) const

1267 * 
ô
 = 
	`gToﬁs
().
	`AddChûd
(
gi
,"Info");

1268 
	`gToﬁs
().
	`AddAâr
(
ô
,"«me", 
«me
);

1269 
	`gToﬁs
().
	`AddAâr
(
ô
,"vÆue", 
vÆue
);

1270 
	}
}

1274 
	gTMVA
::
MëhodBa£
::
	$AddOuçut
–
Ty≥s
::
ETªeTy≥
 
ty≥
, Ty≥s::
EA«lysisTy≥
 
™ÆysisTy≥
 ) {

1275 i‡(
™ÆysisTy≥
 =
Ty≥s
::
kRegªssi⁄
) {

1276 
	`AddRegªssi⁄Ouçut
–
ty≥
 );

1277 } i‡(
™ÆysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

1278 
	`AddMu…i˛assOuçut
–
ty≥
 );

1280 
	`AddCœssifõrOuçut
–
ty≥
 );

1281 i‡(
	`HasMVAPdfs
())

1282 
	`AddCœssifõrOuçutProb
–
ty≥
 );

1284 
	}
}

1290 
	gTMVA
::
MëhodBa£
::
	$WrôeSèãToXML
–* 
∑ª¡
 ) const

1292 i‡(!
∑ª¡
) ;

1294 
U£rGroup_t
* 
u£rInfo
 = 
gSy°em
->
	`GëU£rInfo
();

1296 * 
gi
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "GeneralInfo");

1297 
	`AddInfoIãm
–
gi
, "TMVA Rñó£", 
	`GëTøöögTMVAVîsi⁄Såög
(Ë+ " [" + 
	`gToﬁs
().
	`SåögFromI¡
(
	`GëTøöögTMVAVîsi⁄Code
()) + "]" );

1298 
	`AddInfoIãm
–
gi
, "ROOT Rñó£", 
	`GëTøöögROOTVîsi⁄Såög
(Ë+ " [" + 
	`gToﬁs
().
	`SåögFromI¡
(
	`GëTøöögROOTVîsi⁄Code
()) + "]");

1299 
	`AddInfoIãm
–
gi
, "Cª©‹", 
u£rInfo
->
fU£r
);

1300 
TD©ime
 
dt
; 
	`AddInfoIãm
–
gi
, "D©e", dt.
	`AsSåög
());

1301 
	`AddInfoIãm
–
gi
, "Ho°", 
gSy°em
->
	`GëBuûdNode
() );

1302 
	`AddInfoIãm
–
gi
, "Dú", 
gSy°em
->
	`W‹kögDúe˘‹y
());

1303 
	`AddInfoIãm
–
gi
, "TøöögÉvíts", 
	`gToﬁs
().
	`SåögFromI¡
(
	`D©a
()->
	`GëNTøöögEvíts
()));

1304 
	`AddInfoIãm
–
gi
, "TøöögTime", 
	`gToﬁs
().
	`SåögFromDoubÀ
(
c⁄°_ˇ°
<
TMVA
::
MëhodBa£
*>(
this
)->
	`GëTøöTime
()));

1306 
Ty≥s
::
EA«lysisTy≥
 
aTy≥
 = 
c⁄°_ˇ°
<
TMVA
::
MëhodBa£
*>(
this
)->
	`GëA«lysisTy≥
();

1307 
TSåög
 
	`™ÆysisTy≥
((
aTy≥
==
Ty≥s
::
kRegªssi⁄
) ? "Regression" :

1308 (
aTy≥
==
Ty≥s
::
kMu…i˛ass
 ? "Multiclass" : "Classification"));

1309 
	`AddInfoIãm
–
gi
, "A«lysisTy≥", 
™ÆysisTy≥
 );

1310 
dñëe
 
u£rInfo
;

1313 
	`AddO±i⁄sXMLTo
–
∑ª¡
 );

1316 
	`AddV¨sXMLTo
–
∑ª¡
 );

1319 i‡(
fModñPîsi°í˚
)

1320 
	`AddS≥˘©‹sXMLTo
–
∑ª¡
 );

1323 
	`AddCœs£sXMLTo
(
∑ª¡
);

1326 i‡(
	`DoRegªssi⁄
()Ë
	`AddT¨gësXMLTo
(
∑ª¡
);

1329 
	`GëTønsf‹m©i⁄H™dÀr
(
Ál£
).
	`AddXMLTo
–
∑ª¡
 );

1332 * 
pdfs
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "MVAPdfs");

1333 i‡(
fMVAPdfS
ËfMVAPdfS->
	`AddXMLTo
(
pdfs
);

1334 i‡(
fMVAPdfB
ËfMVAPdfB->
	`AddXMLTo
(
pdfs
);

1337 
	`AddWeightsXMLTo
–
∑ª¡
 );

1338 
	}
}

1344 
	gTMVA
::
MëhodBa£
::
	$RódSèãFromSåóm
–
TFûe
& 
rf
 )

1346 
Boﬁ_t
 
addDúSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

1347 
TH1
::
	`AddDúe˘‹y
( 0 );

1348 
fMVAPdfS
 = (
TMVA
::
PDF
*)
rf
.
	`Gë
( "MVA_PDF_Signal" );

1349 
fMVAPdfB
 = (
TMVA
::
PDF
*)
rf
.
	`Gë
( "MVA_PDF_Background" );

1351 
TH1
::
	`AddDúe˘‹y
–
addDúSètus
 );

1353 
	`RódWeightsFromSåóm
–
rf
 );

1355 
	`SëTe°v¨Name
();

1356 
	}
}

1363 
	gTMVA
::
MëhodBa£
::
	$WrôeSèãToFûe
() const

1366 
TSåög
 
	`t‚ame
–
	`GëWeightFûeName
() );

1369 
TSåög
 
	`xml‚ame
–
t‚ame
 ); 
xml‚ame
.
	`Rïœ˚AŒ
( ".txt", ".xml" );

1370 
	`Log
(Ë<< 
kINFO


1372 << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue"Ë<< 
xml‚ame
 << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1373 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewDoc
();

1374 * 
roŸnode
 = 
	`gToﬁs
().
	`AddChûd
(0,"MëhodSëup", "", 
åue
);

1375 
	`gToﬁs
().
	`xmÀngöe
().
	`DocSëRoŸEÀmít
(
doc
,
roŸnode
);

1376 
	`gToﬁs
().
	`AddAâr
(
roŸnode
,"Mëhod", 
	`GëMëhodTy≥Name
(Ë+ "::" + 
	`GëMëhodName
());

1377 
	`WrôeSèãToXML
(
roŸnode
);

1378 
	`gToﬁs
().
	`xmÀngöe
().
	`SaveDoc
(
doc
,
xml‚ame
);

1379 
	`gToﬁs
().
	`xmÀngöe
().
	`FªeDoc
(
doc
);

1380 
	}
}

1385 
	gTMVA
::
MëhodBa£
::
	$RódSèãFromFûe
()

1389 
TSåög
 
	`t‚ame
(
	`GëWeightFûeName
());

1391 
	`Log
(Ë<< 
kDEBUG


1393 << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue"Ë<< 
t‚ame
 << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1395 i‡(
t‚ame
.
	`EndsWôh
(".xml") ) {

1396 #i‡
ROOT_VERSION_CODE
 >
	`ROOT_VERSION
(5,29,0)

1397 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`P¨£Fûe
(
t‚ame
,gToﬁs().
	`xmÀngöebuf„rsize
());

1399 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`P¨£Fûe
(
t‚ame
);

1401 * 
roŸnode
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`DocGëRoŸEÀmít
(
doc
);

1402 
	`RódSèãFromXML
(
roŸnode
);

1403 
	`gToﬁs
().
	`xmÀngöe
().
	`FªeDoc
(
doc
);

1406 
°d
::
fûebuf
 
fb
;

1407 
fb
.
	`›í
(
t‚ame
.
	`D©a
(),
°d
::
ios
::
ö
);

1408 i‡(!
fb
.
	`is_›í
()) {

1409 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<ReadStateFromFile> "

1410 << "U«bÀÅÿ›í i≈uàweighàfûe: " << 
t‚ame
 << 
Endl
;

1412 
°d
::
i°ªam
 
	`fö
(&
fb
);

1413 
	`RódSèãFromSåóm
(
fö
);

1414 
fb
.
	`˛o£
();

1416 i‡(!
fTxtWeightsO∆y
) {

1418 
TSåög
 
	`r‚ame
–
t‚ame
 ); 
r‚ame
.
	`Rïœ˚AŒ
( ".txt", ".root" );

1419 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "ReadingÑoot weight file: "

1420 << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue"Ë<< 
r‚ame
 << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1421 
TFûe
* 
rfûe
 = TFûe::
	`O≥n
–
r‚ame
, "READ" );

1422 
	`RódSèãFromSåóm
–*
rfûe
 );

1423 
rfûe
->
	`Clo£
();

1425 
	}
}

1429 
	gTMVA
::
MëhodBa£
::
	$RódSèãFromXMLSåög
–c⁄° * 
xml°r
 ) {

1430 #i‡
ROOT_VERSION_CODE
 >
	`ROOT_VERSION
(5,26,00)

1431 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`P¨£Såög
(
xml°r
);

1432 * 
roŸnode
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`DocGëRoŸEÀmít
(
doc
);

1433 
	`RódSèãFromXML
(
roŸnode
);

1434 
	`gToﬁs
().
	`xmÀngöe
().
	`FªeDoc
(
doc
);

1436 
	`Log
(Ë<< 
kFATAL
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()) << "Method MethodBase::ReadStateFromXMLString( const char* xmlstr = "

1437 << 
xml°r
 << " ) i†nŸávaûabÀ f‹ ROOT vîsi⁄†¥i‹Åÿ5.26/00." << 
Endl
;

1441 
	}
}

1445 
	gTMVA
::
MëhodBa£
::
	$RódSèãFromXML
–* 
mëhodNode
 )

1447 
TSåög
 
fuŒMëhodName
;

1448 
	`gToﬁs
().
	`RódAâr
–
mëhodNode
, "Mëhod", 
fuŒMëhodName
 );

1449 
fMëhodName
 = 
	`fuŒMëhodName
(
fuŒMëhodName
.
	`Index
("::")+2,fuŒMëhodName.
	`Lígth
());

1452 
	`Log
().
	`SëSour˚
–
	`GëName
() );

1453 
	`Log
(Ë<< 
kDEBUG


1454 << "Ród mëhod \"" << 
	`GëMëhodName
(Ë<< "\" o‡ty≥ \"" << 
	`GëMëhodTy≥Name
(Ë<< "\"" << 
Endl
;

1457 
	`SëTe°v¨Name
();

1459 
TSåög
 
	`nodeName
("");

1460 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
mëhodNode
);

1461 
ch
!=0) {

1462 
nodeName
 = 
	`TSåög
–
	`gToﬁs
().
	`GëName
(
ch
) );

1464 i‡(
nodeName
=="GeneralInfo") {

1467 
TSåög
 
	`«me
(""),
	`vÆ
("");

1468 * 
™ty≥Node
 = 
	`gToﬁs
().
	`GëChûd
(
ch
);

1469 
™ty≥Node
) {

1470 
	`gToﬁs
().
	`RódAâr
–
™ty≥Node
, "«me", 
«me
 );

1472 i‡(
«me
 == "TrainingTime")

1473 
	`gToﬁs
().
	`RódAâr
–
™ty≥Node
, "vÆue", 
fTøöTime
 );

1475 i‡(
«me
 == "AnalysisType") {

1476 
	`gToﬁs
().
	`RódAâr
–
™ty≥Node
, "vÆue", 
vÆ
 );

1477 
vÆ
.
	`ToLowî
();

1478 i‡(
vÆ
 ="ªgªssi⁄" ) 
	`SëA«lysisTy≥
–
Ty≥s
::
kRegªssi⁄
 );

1479 i‡(
vÆ
 ="˛assifiˇti⁄" ) 
	`SëA«lysisTy≥
–
Ty≥s
::
kCœssifiˇti⁄
 );

1480 i‡(
vÆ
 ="mu…i˛ass" ) 
	`SëA«lysisTy≥
–
Ty≥s
::
kMu…i˛ass
 );

1481 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "A«lysi†ty≥ " << 
vÆ
 << " i†nŸ known." << 
Endl
;

1484 i‡(
«me
 == "TMVA Release" ||Çame == "TMVA") {

1485 
TSåög
 
s
;

1486 
	`gToﬁs
().
	`RódAâr
–
™ty≥Node
, "vÆue", 
s
);

1487 
fTMVATøöögVîsi⁄
 = 
	`TSåög
(
	`s
(
s
.
	`Index
("[")+1,s.Index("]")-s.Index("[")-1)).
	`Atoi
();

1488 
	`Log
(Ë<< 
kDEBUG
 <<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "MVA mëhod wa†åaöed wôh TMVA Vîsi⁄: " << 
	`GëTøöögTMVAVîsi⁄Såög
(Ë<< 
Endl
;

1491 i‡(
«me
 == "ROOT Release" ||Çame == "ROOT") {

1492 
TSåög
 
s
;

1493 
	`gToﬁs
().
	`RódAâr
–
™ty≥Node
, "vÆue", 
s
);

1494 
fROOTTøöögVîsi⁄
 = 
	`TSåög
(
	`s
(
s
.
	`Index
("[")+1,s.Index("]")-s.Index("[")-1)).
	`Atoi
();

1495 
	`Log
(Ë<< 
kDEBUG


1496 << "MVA mëhod wa†åaöed wôh ROOT Vîsi⁄: " << 
	`GëTøöögROOTVîsi⁄Såög
(Ë<< 
Endl
;

1498 
™ty≥Node
 = 
	`gToﬁs
().
	`GëNextChûd
(antypeNode);

1501 i‡(
nodeName
=="Options") {

1502 
	`RódO±i⁄sFromXML
(
ch
);

1503 
	`P¨£O±i⁄s
();

1506 i‡(
nodeName
=="Variables") {

1507 
	`RódV¨übÀsFromXML
(
ch
);

1509 i‡(
nodeName
=="Spectators") {

1510 
	`RódS≥˘©‹sFromXML
(
ch
);

1512 i‡(
nodeName
=="Classes") {

1513 i‡(
	`D©aInfo
().
	`GëNCœs£s
()==0Ë
	`RódCœs£sFromXML
(
ch
);

1515 i‡(
nodeName
=="Targets") {

1516 i‡(
	`D©aInfo
().
	`GëNT¨gës
()==0 && 
	`DoRegªssi⁄
()Ë
	`RódT¨gësFromXML
(
ch
);

1518 i‡(
nodeName
=="Transformations") {

1519 
	`GëTønsf‹m©i⁄H™dÀr
().
	`RódFromXML
(
ch
);

1521 i‡(
nodeName
=="MVAPdfs") {

1522 
TSåög
 
pd‚ame
;

1523 i‡(
fMVAPdfS
Ë{ 
dñëe
 fMVAPdfS; fMVAPdfS=0; }

1524 i‡(
fMVAPdfB
Ë{ 
dñëe
 fMVAPdfB; fMVAPdfB=0; }

1525 * 
pd‚ode
 = 
	`gToﬁs
().
	`GëChûd
(
ch
);

1526 i‡(
pd‚ode
) {

1527 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "Name", 
pd‚ame
);

1528 
fMVAPdfS
 = 
√w
 
	`PDF
(
pd‚ame
);

1529 
fMVAPdfS
->
	`RódXML
(
pd‚ode
);

1530 
pd‚ode
 = 
	`gToﬁs
().
	`GëNextChûd
(pdfnode);

1531 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "Name", 
pd‚ame
);

1532 
fMVAPdfB
 = 
√w
 
	`PDF
(
pd‚ame
);

1533 
fMVAPdfB
->
	`RódXML
(
pd‚ode
);

1536 i‡(
nodeName
=="Weights") {

1537 
	`RódWeightsFromXML
(
ch
);

1540 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "U≈¨£d XMLÇode: '" << 
nodeName
 << "'" << 
Endl
;

1542 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1547 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëCÆÀrName
(Ë=""ËGëTønsf‹m©i⁄H™dÀr().
	`SëCÆÀrName
–
	`GëName
() );

1548 
	}
}

1553 
	gTMVA
::
MëhodBa£
::
	$RódSèãFromSåóm
–
°d
::
i°ªam
& 
fö
 )

1555 
buf
[512];

1558 
	`SëA«lysisTy≥
(
Ty≥s
::
kCœssifiˇti⁄
);

1562 
	`GëLöe
(
fö
,
buf
);

1563 !
	`TSåög
(
buf
).
	`BegösWôh
("Mëhod")Ë
	`GëLöe
(
fö
,buf);

1564 
TSåög
 
	`«me°r
(
buf
);

1566 
TSåög
 
mëhodTy≥
 = 
	`«me°r
(0,
«me°r
.
	`Index
("::"));

1567 
mëhodTy≥
 = 
	`mëhodTy≥
(mëhodTy≥.
	`La°
(' '),mëhodTy≥.
	`Lígth
());

1568 
mëhodTy≥
 = mëhodTy≥.
	`Såù
(
TSåög
::
kLódög
);

1570 
TSåög
 
mëhodName
 = 
	`«me°r
(
«me°r
.
	`Index
("::")+2,«me°r.
	`Lígth
());

1571 
mëhodName
 = mëhodName.
	`Såù
(
TSåög
::
kLódög
);

1572 i‡(
mëhodName
 =""ËmëhodNamê
mëhodTy≥
;

1573 
fMëhodName
 = 
mëhodName
;

1575 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Ród mëhod \"" << 
	`GëMëhodName
(Ë<< "\" o‡ty≥ \"" << 
	`GëMëhodTy≥Name
(Ë<< "\"" << 
Endl
;

1578 
	`Log
().
	`SëSour˚
–
	`GëName
() );

1591 
	`GëLöe
(
fö
,
buf
);

1592 !
	`TSåög
(
buf
).
	`BegösWôh
("#OPT")Ë
	`GëLöe
(
fö
,buf);

1593 
	`RódO±i⁄sFromSåóm
(
fö
);

1594 
	`P¨£O±i⁄s
();

1597 
fö
.
	`gëlöe
(
buf
,512);

1598 !
	`TSåög
(
buf
).
	`BegösWôh
("#VAR")Ë
fö
.
	`gëlöe
(buf,512);

1599 
	`RódV¨sFromSåóm
(
fö
);

1602 
	`Pro˚ssO±i⁄s
();

1604 i‡(
	`IsN‹mÆi£d
()) {

1605 
V¨übÀN‹mÆizeTønsf‹m
* 
n‹m
 = (VariableNormalizeTransform*)

1606 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀN‹mÆizeTønsf‹m
(
	`D©aInfo
()), -1 );

1607 
n‹m
->
	`BuûdTønsf‹m©i⁄FromV¨Info
–
	`D©aInfo
().
	`GëV¨übÀInfos
() );

1609 
V¨übÀTønsf‹mBa£
 *
	`v¨Tøfo
(0), *
	`v¨Tøfo2
(0);

1610 i‡–
fV¨Tønsf‹mSåög
 == "None") {

1611 i‡(
fU£Dec‹r
)

1612 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀDec‹rTønsf‹m
(
	`D©aInfo
()), -1 );

1613 } i‡–
fV¨Tønsf‹mSåög
 == "Decorrelate" ) {

1614 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀDec‹rTønsf‹m
(
	`D©aInfo
()), -1 );

1615 } i‡–
fV¨Tønsf‹mSåög
 == "PCA" ) {

1616 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀPCATønsf‹m
(
	`D©aInfo
()), -1 );

1617 } i‡–
fV¨Tønsf‹mSåög
 == "Uniform" ) {

1618 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀGaussTønsf‹m
(
	`D©aInfo
(),"Uniform"), -1 );

1619 } i‡–
fV¨Tønsf‹mSåög
 == "Gauss" ) {

1620 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀGaussTønsf‹m
(
	`D©aInfo
()), -1 );

1621 } i‡–
fV¨Tønsf‹mSåög
 == "GaussDecorr" ) {

1622 
v¨Tøfo
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀGaussTønsf‹m
(
	`D©aInfo
()), -1 );

1623 
v¨Tøfo2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`AddTønsf‹m©i⁄
–
√w
 
	`V¨übÀDec‹rTønsf‹m
(
	`D©aInfo
()), -1 );

1625 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<ProcessOptions> VariableÅransform '"

1626 << 
fV¨Tønsf‹mSåög
 << "' unknown." << 
Endl
;

1629 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() > 0) {

1630 
fö
.
	`gëlöe
(
buf
,512);

1631 !
	`TSåög
(
buf
).
	`BegösWôh
("#MAT")Ë
fö
.
	`gëlöe
(buf,512);

1632 i‡(
v¨Tøfo
) {

1633 
TSåög
 
	`åafo
(
fV¨übÀTønsf‹mTy≥Såög
); 
åafo
.
	`ToLowî
();

1634 
v¨Tøfo
->
	`RódTønsf‹m©i⁄FromSåóm
(
fö
, 
åafo
 );

1636 i‡(
v¨Tøfo2
) {

1637 
TSåög
 
	`åafo
(
fV¨übÀTønsf‹mTy≥Såög
); 
åafo
.
	`ToLowî
();

1638 
v¨Tøfo2
->
	`RódTønsf‹m©i⁄FromSåóm
(
fö
, 
åafo
 );

1643 i‡(
	`HasMVAPdfs
()) {

1645 
fö
.
	`gëlöe
(
buf
,512);

1646 !
	`TSåög
(
buf
).
	`BegösWôh
("#MVAPDFS")Ë
fö
.
	`gëlöe
(buf,512);

1647 i‡(
fMVAPdfS
 !0Ë{ 
dñëe
 fMVAPdfS; fMVAPdfS = 0; }

1648 i‡(
fMVAPdfB
 !0Ë{ 
dñëe
 fMVAPdfB; fMVAPdfB = 0; }

1649 
fMVAPdfS
 = 
√w
 
	`PDF
(
	`TSåög
(
	`GëName
()) + " MVA PDF Sig");

1650 
fMVAPdfB
 = 
√w
 
	`PDF
(
	`TSåög
(
	`GëName
()) + " MVA PDF Bkg");

1651 
fMVAPdfS
->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

1652 
fMVAPdfB
->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

1654 
fö
 >> *
fMVAPdfS
;

1655 
fö
 >> *
fMVAPdfB
;

1659 
fö
.
	`gëlöe
(
buf
,512);

1660 !
	`TSåög
(
buf
).
	`BegösWôh
("#WGT")Ë
fö
.
	`gëlöe
(buf,512);

1661 
fö
.
	`gëlöe
(
buf
,512);

1662 
	`RódWeightsFromSåóm
–
fö
 );;

1665 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëCÆÀrName
(Ë=""ËGëTønsf‹m©i⁄H™dÀr().
	`SëCÆÀrName
–
	`GëName
() );

1667 
	}
}

1673 
	gTMVA
::
MëhodBa£
::
	$WrôeV¨sToSåóm
–
°d
::
o°ªam
& 
o
, c⁄° 
TSåög
& 
¥efix
 ) const

1675 
o
 << 
¥efix
 << "NV¨ " << 
	`D©aInfo
().
	`GëNV¨übÀs
(Ë<< 
°d
::
ídl
;

1676 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
v¨It
 = 
	`D©aInfo
().
	`GëV¨übÀInfos
().
	`begö
();

1677 ; 
v¨It
!=
	`D©aInfo
().
	`GëV¨übÀInfos
().
	`íd
(); v¨It++Ë{ 
o
 << 
¥efix
; v¨It->
	`WrôeToSåóm
(o); }

1678 
o
 << 
¥efix
 << "NS≥¯" << 
	`D©aInfo
().
	`GëNS≥˘©‹s
(Ë<< 
°d
::
ídl
;

1679 
v¨It
 = 
	`D©aInfo
().
	`GëS≥˘©‹Infos
().
	`begö
();

1680 ; 
v¨It
!=
	`D©aInfo
().
	`GëS≥˘©‹Infos
().
	`íd
(); v¨It++Ë{ 
o
 << 
¥efix
; v¨It->
	`WrôeToSåóm
(o); }

1681 
	}
}

1688 
	gTMVA
::
MëhodBa£
::
	$RódV¨sFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

1690 
TSåög
 
dummy
;

1691 
UI¡_t
 
ªadNV¨
;

1692 
i°r
 >> 
dummy
 >> 
ªadNV¨
;

1694 i‡(
ªadNV¨
!=
	`D©aInfo
().
	`GëNV¨übÀs
()) {

1695 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "You de˛¨ed "<< D©aInfo().
	`GëNV¨übÀs
() << " variables inÅhe Reader"

1696 << " whûêthîê¨ê" << 
ªadNV¨
 << " variables declared inÅhe file"

1697 << 
Endl
;

1701 
V¨übÀInfo
 
v¨Info
;

1702 
°d
::
ve˘‹
<
V¨übÀInfo
>::
ôî©‹
 
v¨It
 = 
	`D©aInfo
().
	`GëV¨übÀInfos
().
	`begö
();

1703 
v¨Idx
 = 0;

1704 ; 
v¨It
!=
	`D©aInfo
().
	`GëV¨übÀInfos
().
	`íd
(); v¨It++, 
v¨Idx
++) {

1705 
v¨Info
.
	`RódFromSåóm
(
i°r
);

1706 i‡(
v¨It
->
	`GëEx¥essi⁄
(Ë=
v¨Info
.GetExpression()) {

1707 
v¨Info
.
	`SëExã∫ÆLök
((*
v¨It
).
	`GëExã∫ÆLök
());

1708 (*
v¨It
Ë
v¨Info
;

1711 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "ERROR i¿<RódV¨sFromSåóm>" << 
Endl
;

1712 
	`Log
(Ë<< 
kINFO
 << "Thêdeföôi⁄ (‹Åhê‹dîËo‡thêv¨übÀ†found i¿thêöpuàfûêis" << 
Endl
;

1713 
	`Log
(Ë<< 
kINFO
 << "i†nŸÅhêßmêa†thê⁄êde˛¨ed i¿thêRódî (which i†√˚sßry f‹" << 
Endl
;

1714 
	`Log
(Ë<< 
kINFO
 << "thêc‹ª˘ w‹kög o‡thêmëhod):" << 
Endl
;

1715 
	`Log
(Ë<< 
kINFO
 << " v¨ #" << 
v¨Idx
 <<" de˛¨ed i¿Ródî: " << 
v¨It
->
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1716 
	`Log
(Ë<< 
kINFO
 << " v¨ #" << 
v¨Idx
 <<" de˛¨ed i¿fûê : " << 
v¨Info
.
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1717 
	`Log
(Ë<< 
kFATAL
 << "Thêex¥essi⁄ de˛¨edÅÿthêRódîÇìd†tÿbêchecked («mê‹ ordîáª wr⁄g)" << 
Endl
;

1720 
	}
}

1725 
	gTMVA
::
MëhodBa£
::
	$AddV¨sXMLTo
–* 
∑ª¡
 ) const

1727 * 
v¨s
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Variables");

1728 
	`gToﬁs
().
	`AddAâr
–
v¨s
, "NV¨", gToﬁs().
	`SåögFromI¡
(
	`D©aInfo
().
	`GëNV¨übÀs
()) );

1730 
UI¡_t
 
idx
=0; idx<
	`D©aInfo
().
	`GëV¨übÀInfos
().
	`size
(); idx++) {

1731 
V¨übÀInfo
& 
vi
 = 
	`D©aInfo
().
	`GëV¨übÀInfos
()[
idx
];

1732 * 
v¨
 = 
	`gToﬁs
().
	`AddChûd
–
v¨s
, "Variable" );

1733 
	`gToﬁs
().
	`AddAâr
–
v¨
, "V¨Index", 
idx
 );

1734 
vi
.
	`AddToXML
–
v¨
 );

1736 
	}
}

1741 
	gTMVA
::
MëhodBa£
::
	$AddS≥˘©‹sXMLTo
–* 
∑ª¡
 ) const

1743 * 
•ecs
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Spectators");

1745 
UI¡_t
 
wrôeIdx
=0;

1746 
UI¡_t
 
idx
=0; idx<
	`D©aInfo
().
	`GëS≥˘©‹Infos
().
	`size
(); idx++) {

1748 
V¨übÀInfo
& 
vi
 = 
	`D©aInfo
().
	`GëS≥˘©‹Infos
()[
idx
];

1752 i‡(
vi
.
	`GëV¨Ty≥
()=='C') ;

1754 * 
•ec
 = 
	`gToﬁs
().
	`AddChûd
–
•ecs
, "Spectator" );

1755 
	`gToﬁs
().
	`AddAâr
–
•ec
, "S≥cIndex", 
wrôeIdx
++ );

1756 
vi
.
	`AddToXML
–
•ec
 );

1758 
	`gToﬁs
().
	`AddAâr
–
•ecs
, "NS≥c", gToﬁs().
	`SåögFromI¡
(
wrôeIdx
) );

1759 
	}
}

1764 
	gTMVA
::
MëhodBa£
::
	$AddCœs£sXMLTo
–* 
∑ª¡
 ) const

1766 
UI¡_t
 
nCœs£s
=
	`D©aInfo
().
	`GëNCœs£s
();

1768 * 
˛as£s
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Classes");

1769 
	`gToﬁs
().
	`AddAâr
–
˛as£s
, "NCœss", 
nCœs£s
 );

1771 
UI¡_t
 
iCls
=0; iCls<
nCœs£s
; ++iCls) {

1772 
CœssInfo
 *
˛assInfo
=
	`D©aInfo
().
	`GëCœssInfo
 (
iCls
);

1773 
TSåög
 
˛assName
 =
˛assInfo
->
	`GëName
();

1774 
UI¡_t
 
˛assNumbî
=
˛assInfo
->
	`GëNumbî
();

1776 * 
˛assNode
=
	`gToﬁs
().
	`AddChûd
(
˛as£s
, "Class");

1777 
	`gToﬁs
().
	`AddAâr
–
˛assNode
, "Name", 
˛assName
 );

1778 
	`gToﬁs
().
	`AddAâr
–
˛assNode
, "Index", 
˛assNumbî
 );

1780 
	}
}

1784 
	gTMVA
::
MëhodBa£
::
	$AddT¨gësXMLTo
–* 
∑ª¡
 ) const

1786 * 
èrgës
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Targets");

1787 
	`gToﬁs
().
	`AddAâr
–
èrgës
, "NTrgt", gToﬁs().
	`SåögFromI¡
(
	`D©aInfo
().
	`GëNT¨gës
()) );

1789 
UI¡_t
 
idx
=0; idx<
	`D©aInfo
().
	`GëT¨gëInfos
().
	`size
(); idx++) {

1790 
V¨übÀInfo
& 
vi
 = 
	`D©aInfo
().
	`GëT¨gëInfos
()[
idx
];

1791 * 
èr
 = 
	`gToﬁs
().
	`AddChûd
–
èrgës
, "Target" );

1792 
	`gToﬁs
().
	`AddAâr
–
èr
, "T¨gëIndex", 
idx
 );

1793 
vi
.
	`AddToXML
–
èr
 );

1795 
	}
}

1800 
	gTMVA
::
MëhodBa£
::
	$RódV¨übÀsFromXML
–* 
v¨node
 )

1802 
UI¡_t
 
ªadNV¨
;

1803 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "NV¨", 
ªadNV¨
);

1805 i‡(
ªadNV¨
!=
	`D©aInfo
().
	`GëNV¨übÀs
()) {

1806 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "You de˛¨ed "<< D©aInfo().
	`GëNV¨übÀs
() << " variables inÅhe Reader"

1807 << " whûêthîê¨ê" << 
ªadNV¨
 << " variables declared inÅhe file"

1808 << 
Endl
;

1812 
V¨übÀInfo
 
ªadV¨Info
, 
exi°ögV¨Info
;

1813 
v¨Idx
 = 0;

1814 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
v¨node
);

1815 
ch
) {

1816 
	`gToﬁs
().
	`RódAâr
–
ch
, "V¨Index", 
v¨Idx
);

1817 
exi°ögV¨Info
 = 
	`D©aInfo
().
	`GëV¨übÀInfos
()[
v¨Idx
];

1818 
ªadV¨Info
.
	`RódFromXML
(
ch
);

1820 i‡(
exi°ögV¨Info
.
	`GëEx¥essi⁄
(Ë=
ªadV¨Info
.GetExpression()) {

1821 
ªadV¨Info
.
	`SëExã∫ÆLök
(
exi°ögV¨Info
.
	`GëExã∫ÆLök
());

1822 
exi°ögV¨Info
 = 
ªadV¨Info
;

1825 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "ERROR i¿<RódV¨übÀsFromXML>" << 
Endl
;

1826 
	`Log
(Ë<< 
kINFO
 << "Thêdeföôi⁄ (‹Åhê‹dîËo‡thêv¨übÀ†found i¿thêöpuàfûêis" << 
Endl
;

1827 
	`Log
(Ë<< 
kINFO
 << "nŸÅhêßmêa†thê⁄êde˛¨ed i¿thêRódî (which i†√˚sßry f‹Åhe" << 
Endl
;

1828 
	`Log
(Ë<< 
kINFO
 << "c‹ª˘ w‹kög o‡thêmëhod):" << 
Endl
;

1829 
	`Log
(Ë<< 
kINFO
 << " v¨ #" << 
v¨Idx
 <<" de˛¨ed i¿Ródî: " << 
exi°ögV¨Info
.
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1830 
	`Log
(Ë<< 
kINFO
 << " v¨ #" << 
v¨Idx
 <<" de˛¨ed i¿fûê : " << 
ªadV¨Info
.
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1831 
	`Log
(Ë<< 
kFATAL
 << "Thêex¥essi⁄ de˛¨edÅÿthêRódîÇìd†tÿbêchecked («mê‹ ordîáª wr⁄g)" << 
Endl
;

1833 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1835 
	}
}

1840 
	gTMVA
::
MëhodBa£
::
	$RódS≥˘©‹sFromXML
–* 
•e˙ode
 )

1842 
UI¡_t
 
ªadNS≥c
;

1843 
	`gToﬁs
().
	`RódAâr
–
•e˙ode
, "NS≥c", 
ªadNS≥c
);

1845 i‡(
ªadNS≥c
!=
	`D©aInfo
().
	`GëNS≥˘©‹s
(
kFALSE
)) {

1846 
	`Log
(Ë<< 
kFATAL
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "You de˛¨ed "<< D©aInfo().
	`GëNS≥˘©‹s
(
kFALSE
) << " spectators inÅhe Reader"

1847 << " whûêthîê¨ê" << 
ªadNS≥c
 << " spectators declared inÅhe file"

1848 << 
Endl
;

1852 
V¨übÀInfo
 
ªadS≥cInfo
, 
exi°ögS≥cInfo
;

1853 
•ecIdx
 = 0;

1854 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
•e˙ode
);

1855 
ch
) {

1856 
	`gToﬁs
().
	`RódAâr
–
ch
, "S≥cIndex", 
•ecIdx
);

1857 
exi°ögS≥cInfo
 = 
	`D©aInfo
().
	`GëS≥˘©‹Infos
()[
•ecIdx
];

1858 
ªadS≥cInfo
.
	`RódFromXML
(
ch
);

1860 i‡(
exi°ögS≥cInfo
.
	`GëEx¥essi⁄
(Ë=
ªadS≥cInfo
.GetExpression()) {

1861 
ªadS≥cInfo
.
	`SëExã∫ÆLök
(
exi°ögS≥cInfo
.
	`GëExã∫ÆLök
());

1862 
exi°ögS≥cInfo
 = 
ªadS≥cInfo
;

1865 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "ERROR i¿<RódS≥˘©‹sFromXML>" << 
Endl
;

1866 
	`Log
(Ë<< 
kINFO
 << "Thêdeföôi⁄ (‹Åhê‹dîËo‡thê•e˘©‹†found i¿thêöpuàfûêis" << 
Endl
;

1867 
	`Log
(Ë<< 
kINFO
 << "nŸÅhêßmêa†thê⁄êde˛¨ed i¿thêRódî (which i†√˚sßry f‹Åhe" << 
Endl
;

1868 
	`Log
(Ë<< 
kINFO
 << "c‹ª˘ w‹kög o‡thêmëhod):" << 
Endl
;

1869 
	`Log
(Ë<< 
kINFO
 << " s≥¯#" << 
•ecIdx
 <<" de˛¨ed i¿Ródî: " << 
exi°ögS≥cInfo
.
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1870 
	`Log
(Ë<< 
kINFO
 << " s≥¯#" << 
•ecIdx
 <<" de˛¨ed i¿fûê : " << 
ªadS≥cInfo
.
	`GëEx¥essi⁄
(Ë<< 
Endl
;

1871 
	`Log
(Ë<< 
kFATAL
 << "Thêex¥essi⁄ de˛¨edÅÿthêRódîÇìd†tÿbêchecked («mê‹ ordîáª wr⁄g)" << 
Endl
;

1873 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1875 
	}
}

1880 
	gTMVA
::
MëhodBa£
::
	$RódCœs£sFromXML
–* 
˛¢ode
 )

1882 
UI¡_t
 
ªadNCls
;

1884 
	`gToﬁs
().
	`RódAâr
–
˛¢ode
, "NCœss", 
ªadNCls
);

1886 
TSåög
 
˛assName
="";

1887 
UI¡_t
 
˛assIndex
=0;

1888 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
˛¢ode
);

1889 i‡(!
ch
) {

1890 
UI¡_t
 
i˛s
 = 0; i˛s<
ªadNCls
;++icls) {

1891 
TSåög
 
˛as¢ame
 = 
	`F‹m
("˛ass%i",
i˛s
);

1892 
	`D©aInfo
().
	`AddCœss
(
˛as¢ame
);

1897 
ch
) {

1898 
	`gToﬁs
().
	`RódAâr
–
ch
, "Index", 
˛assIndex
);

1899 
	`gToﬁs
().
	`RódAâr
–
ch
, "Name", 
˛assName
 );

1900 
	`D©aInfo
().
	`AddCœss
(
˛assName
);

1902 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1907 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Signal") != 0) {

1908 
fSig«lCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

1911 
fSig«lCœss
=0;

1912 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Background") != 0) {

1913 
fBackgroundCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Background")->
	`GëNumbî
();

1916 
fBackgroundCœss
=1;

1917 
	}
}

1922 
	gTMVA
::
MëhodBa£
::
	$RódT¨gësFromXML
–* 
è∫ode
 )

1924 
UI¡_t
 
ªadNT¨
;

1925 
	`gToﬁs
().
	`RódAâr
–
è∫ode
, "NTrgt", 
ªadNT¨
);

1927 
èrIdx
 = 0;

1928 
TSåög
 
ex¥essi⁄
;

1929 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
è∫ode
);

1930 
ch
) {

1931 
	`gToﬁs
().
	`RódAâr
–
ch
, "T¨gëIndex", 
èrIdx
);

1932 
	`gToﬁs
().
	`RódAâr
–
ch
, "Ex¥essi⁄", 
ex¥essi⁄
);

1933 
	`D©aInfo
().
	`AddT¨gë
(
ex¥essi⁄
,"","",0,0);

1935 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1937 
	}
}

1943 
TDúe˘‹y
* 
	gTMVA
::
MëhodBa£
::
	$Ba£Dú
() const

1945 i‡(
fBa£Dú
 != 0)  fBaseDir;

1946 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<" Ba£ Dúe˘‹y f‹ " << 
	`GëMëhodName
(Ë<< "ÇŸ së yë --> check i‡ÆªadyÅhîe.." <<
Endl
;

1948 
TDúe˘‹y
* 
mëhodDú
 = 
	`MëhodBa£Dú
();

1949 i‡(
mëhodDú
==0)

1950 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "MëhodBa£::Ba£Dú(Ë- MëhodBa£Dú(Ëªtu∫á NULLÖoöãr!" << 
Endl
;

1952 
TSåög
 
deÁu…Dú
 = 
	`GëMëhodName
();

1953 
TDúe˘‹y
 *
sdú
 = 
mëhodDú
->
	`GëDúe˘‹y
(
deÁu…Dú
.
	`D©a
());

1954 if(!
sdú
)

1956 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<" Ba£ Dúe˘‹y f‹ " << 
	`GëMëhodTy≥Name
(Ë<< " d€†nŸÉxi° yë--> cª©ed it" <<
Endl
;

1957 
sdú
 = 
mëhodDú
->
	`mkdú
(
deÁu…Dú
);

1958 
sdú
->
	`cd
();

1960 
TObjSåög
 
	`wfûeP©h
–
gSy°em
->
	`W‹kögDúe˘‹y
() );

1961 
TObjSåög
 
	`wfûeName
–
	`GëWeightFûeName
() );

1962 
wfûeP©h
.
	`Wrôe
( "TrainingPath" );

1963 
wfûeName
.
	`Wrôe
( "WeightFileName" );

1966 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<" Ba£ Dúe˘‹y f‹ " << 
	`GëMëhodTy≥Name
(Ë<< "Éxi°ed,Ñëu∫ it.." <<
Endl
;

1967  
sdú
;

1968 
	}
}

1974 
TDúe˘‹y
* 
	gTMVA
::
MëhodBa£
::
	$MëhodBa£Dú
() const

1976 i‡(
fMëhodBa£Dú
 != 0)  fMethodBaseDir;

1978 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<" Ba£ Dúe˘‹y f‹ " << 
	`GëMëhodTy≥Name
(Ë<< "ÇŸ së yë --> check i‡ÆªadyÅhîe.." <<
Endl
;

1981 
TDúe˘‹y
 *
fFa˘‹yBa£Dú
=
	`GëFûe
();

1983 
fMëhodBa£Dú
 = 
fFa˘‹yBa£Dú
->
	`GëDúe˘‹y
(
	`D©aInfo
().
	`GëName
());

1984 if(!
fMëhodBa£Dú
)

1986 
fMëhodBa£Dú
 = 
fFa˘‹yBa£Dú
->
	`mkdú
(
	`D©aInfo
().
	`GëName
(),
	`F‹m
("Base directory for dataset %s",DataInfo().GetName()));

1987 if(!
fMëhodBa£Dú
)
	`Log
()<<
kFATAL
<<"C™ÇŸ cª©êdú "<<
	`D©aInfo
().
	`GëName
();

1989 
TSåög
 
_mëhodDú
 = 
	`F‹m
("Mëhod_%s",
	`GëMëhodName
().
	`D©a
());

1990 
fMëhodBa£Dú
 = fMëhodBa£Dú->
	`GëDúe˘‹y
(
_mëhodDú
.
	`D©a
());

1992 if(!
fMëhodBa£Dú
){

1993 
fMëhodBa£Dú
 = 
fFa˘‹yBa£Dú
->
	`GëDúe˘‹y
(
	`D©aInfo
().
	`GëName
())->
	`mkdú
(
_mëhodDú
.
	`D©a
(),
	`F‹m
("Dúe˘‹y f‹áŒ %†mëhods", 
	`GëMëhodTy≥Name
().Data()));

1994 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<" Ba£ Dúe˘‹y f‹ " << 
	`GëMëhodName
(Ë<< " d€†nŸÉxi° yë--> cª©ed it" <<
Endl
;

1997 
	`Log
()<<
kDEBUG
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<<"Rëu∫ from MëhodBa£Dú(Ëa·î cª©ög ba£ dúe˘‹y "<<
Endl
;

1998  
fMëhodBa£Dú
;

1999 
	}
}

2004 
	gTMVA
::
MëhodBa£
::
	$SëWeightFûeDú
–
TSåög
 
fûeDú
 )

2006 
fFûeDú
 = 
fûeDú
;

2007 
gSy°em
->
	`MakeDúe˘‹y
–
fFûeDú
 );

2008 
	}
}

2013 
	gTMVA
::
MëhodBa£
::
	$SëWeightFûeName
–
TSåög
 
theWeightFûe
)

2015 
fWeightFûe
 = 
theWeightFûe
;

2016 
	}
}

2021 
TSåög
 
	gTMVA
::
MëhodBa£
::
	$GëWeightFûeName
() const

2023 i‡(
fWeightFûe
!="")  fWeightFile;

2027 
TSåög
 
suffix
 = "";

2028 
TSåög
 
	`wFûeDú
(
	`GëWeightFûeDú
());

2029  ( 
wFûeDú
 + (wFûeDú[wFûeDú.
	`Lígth
()-1]=='/' ? "" : "/")

2030 + 
	`GëJobName
(Ë+ "_" + 
	`GëMëhodName
() +

2031 
suffix
 + "." + 
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeExãnsi⁄
 + ".xml" );

2032 
	}
}

2037 
	gTMVA
::
MëhodBa£
::
	$WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
ETªeTy≥
 
åìty≥
)

2039 
	`Ba£Dú
()->
	`cd
();

2043 i‡(0 !
fMVAPdfS
) {

2044 
fMVAPdfS
->
	`GëOrigöÆHi°
()->
	`Wrôe
();

2045 
fMVAPdfS
->
	`GëSmoŸhedHi°
()->
	`Wrôe
();

2046 
fMVAPdfS
->
	`GëPDFHi°
()->
	`Wrôe
();

2048 i‡(0 !
fMVAPdfB
) {

2049 
fMVAPdfB
->
	`GëOrigöÆHi°
()->
	`Wrôe
();

2050 
fMVAPdfB
->
	`GëSmoŸhedHi°
()->
	`Wrôe
();

2051 
fMVAPdfB
->
	`GëPDFHi°
()->
	`Wrôe
();

2055 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
–
	`GëMëhodName
(), 
åìty≥
, 
Ty≥s
::
kMaxA«lysisTy≥
 );

2056 i‡(!
ªsu…s
)

2057 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<WriteEvaluationHistosToFile> UnknownÑesult: "

2058 << 
	`GëMëhodName
(Ë<< (
åìty≥
==
Ty≥s
::
kTøöög
?"/kTraining":"/kTesting")

2059 << "/kMaxA«lysisTy≥" << 
Endl
;

2060 
ªsu…s
->
	`GëSt‹age
()->
	`Wrôe
();

2061 i‡(
åìty≥
==
Ty≥s
::
kTe°ög
) {

2062 
	`GëTønsf‹m©i⁄H™dÀr
().
	`PlŸV¨übÀs
 (
	`GëEvítCﬁÀ˘i⁄
–
Ty≥s
::
kTe°ög
 ), 
	`Ba£Dú
() );

2064 
	}
}

2070 
	gTMVA
::
MëhodBa£
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

2072 
	}
}

2079 
Boﬁ_t
 
TMVA
::
MëhodBa£
::
	$GëLöe
(
°d
::
i°ªam
& 
fö
, * 
buf
 )

2081 
fö
.
	`gëlöe
(
buf
,512);

2082 
TSåög
 
	`löe
(
buf
);

2083 i‡(
löe
.
	`BegösWôh
("TMVA Release")) {

2084 
Ssiz_t
 
°¨t
 = 
löe
.
	`Fú°
('[')+1;

2085 
Ssiz_t
 
Àngth
 = 
löe
.
	`Index
("]",
°¨t
)-start;

2086 
TSåög
 
code
 = 
	`löe
(
°¨t
,
Àngth
);

2087 
°d
::
°rög°ªam
 
	`s
(
code
.
	`D©a
());

2088 
s
 >> 
fTMVATøöögVîsi⁄
;

2089 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "MVA mëhod wa†åaöed wôh TMVA Vîsi⁄: " << 
	`GëTøöögTMVAVîsi⁄Såög
(Ë<< 
Endl
;

2091 i‡(
löe
.
	`BegösWôh
("ROOT Release")) {

2092 
Ssiz_t
 
°¨t
 = 
löe
.
	`Fú°
('[')+1;

2093 
Ssiz_t
 
Àngth
 = 
löe
.
	`Index
("]",
°¨t
)-start;

2094 
TSåög
 
code
 = 
	`löe
(
°¨t
,
Àngth
);

2095 
°d
::
°rög°ªam
 
	`s
(
code
.
	`D©a
());

2096 
s
 >> 
fROOTTøöögVîsi⁄
;

2097 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "MVA mëhod wa†åaöed wôh ROOT Vîsi⁄: " << 
	`GëTøöögROOTVîsi⁄Såög
(Ë<< 
Endl
;

2099 i‡(
löe
.
	`BegösWôh
("AnalysisÅype")) {

2100 
Ssiz_t
 
°¨t
 = 
löe
.
	`Fú°
('[')+1;

2101 
Ssiz_t
 
Àngth
 = 
löe
.
	`Index
("]",
°¨t
)-start;

2102 
TSåög
 
code
 = 
	`löe
(
°¨t
,
Àngth
);

2103 
°d
::
°rög°ªam
 
	`s
(
code
.
	`D©a
());

2104 
°d
::
°rög
 
™ÆysisTy≥
;

2105 
s
 >> 
™ÆysisTy≥
;

2106 i‡(
™ÆysisTy≥
 ="ªgªssi⁄" ||á«lysisTy≥ ="Regªssi⁄"Ë
	`SëA«lysisTy≥
–
Ty≥s
::
kRegªssi⁄
 );

2107 i‡(
™ÆysisTy≥
 ="˛assifiˇti⁄" ||á«lysisTy≥ ="Cœssifiˇti⁄"Ë
	`SëA«lysisTy≥
–
Ty≥s
::
kCœssifiˇti⁄
 );

2108 i‡(
™ÆysisTy≥
 ="mu…i˛ass" ||á«lysisTy≥ ="Mu…i˛ass"Ë
	`SëA«lysisTy≥
–
Ty≥s
::
kMu…i˛ass
 );

2109 
	`Log
(Ë<< 
kFATAL
 << "A«lysi†ty≥ " << 
™ÆysisTy≥
 << " from weight-fûênŸ known!" << 
°d
::
ídl
;

2111 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Method wasÅrained for "

2112 << (
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kRegªssi⁄
 ? "Regression" :

2113 (
	`GëA«lysisTy≥
(Ë=
Ty≥s
::
kMu…i˛ass
 ? "Mu…i˛ass" : "Cœssifiˇti⁄")Ë<< 
Endl
;

2116  
åue
;

2117 
	}
}

2122 
	gTMVA
::
MëhodBa£
::
	$Cª©eMVAPdfs
()

2124 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

2128 
Resu…sCœssifiˇti⁄
 * 
mvaRes
 = 
dy«mic_ˇ°
<ResultsClassification*>

2129 –
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, Ty≥s::
kCœssifiˇti⁄
) );

2131 i‡(
mvaRes
==0 || mvaRes->
	`GëSize
()==0) {

2132 
	`Log
(Ë<< 
kERROR
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<Cª©eMVAPdfs> Nÿªsu… o‡˛assifõ∏ã°ögávaûabÀ" << 
Endl
;

2135 
DoubÀ_t
 
möVÆ
 = *
°d
::
	`mö_ñemít
(
mvaRes
->
	`GëVÆueVe˘‹
()->
	`begö
(),mvaRes->GëVÆueVe˘‹()->
	`íd
());

2136 
DoubÀ_t
 
maxVÆ
 = *
°d
::
	`max_ñemít
(
mvaRes
->
	`GëVÆueVe˘‹
()->
	`begö
(),mvaRes->GëVÆueVe˘‹()->
	`íd
());

2139 
TH1
* 
hi°MVAPdfS
 = 
√w
 
	`TH1D
–
	`GëMëhodTy≥Name
() + "_tr_S", GetMethodTypeName() + "_tr_S",

2140 
fMVAPdfS
->
	`GëHi°NBös
–
mvaRes
->
	`GëSize
(Ë), 
möVÆ
, 
maxVÆ
 );

2141 
TH1
* 
hi°MVAPdfB
 = 
√w
 
	`TH1D
–
	`GëMëhodTy≥Name
() + "_tr_B", GetMethodTypeName() + "_tr_B",

2142 
fMVAPdfB
->
	`GëHi°NBös
–
mvaRes
->
	`GëSize
(Ë), 
möVÆ
, 
maxVÆ
 );

2146 
hi°MVAPdfS
->
	`Sumw2
();

2147 
hi°MVAPdfB
->
	`Sumw2
();

2150 
UI¡_t
 
õvt
=0; ievt<
mvaRes
->
	`GëSize
(); ievt++) {

2151 
DoubÀ_t
 
theVÆ
 = 
mvaRes
->
	`GëVÆueVe˘‹
()->
	`©
(
õvt
);

2152 
DoubÀ_t
 
theWeight
 = 
	`D©a
()->
	`GëEvít
(
õvt
)->
	`GëWeight
();

2154 i‡(
	`D©aInfo
().
	`IsSig«l
(
	`D©a
()->
	`GëEvít
(
õvt
))Ë
hi°MVAPdfS
->
	`Fûl
–
theVÆ
, 
theWeight
 );

2155 
hi°MVAPdfB
->
	`Fûl
–
theVÆ
, 
theWeight
 );

2158 
	`gToﬁs
().
	`N‹mHi°
–
hi°MVAPdfS
 );

2159 
	`gToﬁs
().
	`N‹mHi°
–
hi°MVAPdfB
 );

2162 if(!
	`IsSûítFûe
())

2164 
hi°MVAPdfS
->
	`Wrôe
();

2165 
hi°MVAPdfB
->
	`Wrôe
();

2168 
fMVAPdfS
->
	`BuûdPDF
 ( 
hi°MVAPdfS
 );

2169 
fMVAPdfB
->
	`BuûdPDF
 ( 
hi°MVAPdfB
 );

2170 
fMVAPdfS
->
	`VÆid©ePDF
–
hi°MVAPdfS
 );

2171 
fMVAPdfB
->
	`VÆid©ePDF
–
hi°MVAPdfB
 );

2173 i‡(
	`D©aInfo
().
	`GëNCœs£s
() == 2) {

2174 
	`Log
(Ë<< 
kINFO
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())

2175 << 
	`F‹m
( "<CreateMVAPdfs> Separation from histogram (PDF): %1.3f (%1.3f)",

2176 
	`GëSï¨©i⁄
–
hi°MVAPdfS
, 
hi°MVAPdfB
 ), GëSï¨©i⁄–
fMVAPdfS
, 
fMVAPdfB
 ) )

2177 << 
Endl
;

2180 
dñëe
 
hi°MVAPdfS
;

2181 
dñëe
 
hi°MVAPdfB
;

2182 
	}
}

2184 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëProba
(c⁄° 
Evít
 *
ev
){

2188 i‡(!
fMVAPdfS
 || !
fMVAPdfB
) {

2189 
	`Log
(Ë<< 
kINFO
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "<GëProba> MVA PDF†f‹ Sig«»™d Background d⁄'àexi° yë, we'Œ cª©êthem o¿dem™d" << 
Endl
;

2190 
	`Cª©eMVAPdfs
();

2192 
DoubÀ_t
 
sigFø˘i⁄
 = 
	`D©aInfo
().
	`GëTøöögSumSig«lWeights
(Ë/ (D©aInfo().GëTøöögSumSig«lWeights(Ë+ D©aInfo().
	`GëTøöögSumBackgrWeights
() );

2193 
DoubÀ_t
 
mvaVÆ
 = 
	`GëMvaVÆue
(
ev
);

2195  
	`GëProba
(
mvaVÆ
,
sigFø˘i⁄
);

2197 
	}
}

2201 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëProba
–
DoubÀ_t
 
mvaVÆ
, DoubÀ_à
≠_sig
 )

2203 i‡(!
fMVAPdfS
 || !
fMVAPdfB
) {

2204 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëProba> MVA PDF†f‹ Sig«»™d Background d⁄'àexi°" << 
Endl
;

2207 
DoubÀ_t
 
p_s
 = 
fMVAPdfS
->
	`GëVÆ
–
mvaVÆ
 );

2208 
DoubÀ_t
 
p_b
 = 
fMVAPdfB
->
	`GëVÆ
–
mvaVÆ
 );

2210 
DoubÀ_t
 
díom
 = 
p_s
*
≠_sig
 + 
p_b
*(1 -áp_sig);

2212  (
díom
 > 0Ë? (
p_s
*
≠_sig
) / denom : -1;

2213 
	}
}

2222 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëR¨ôy
–
DoubÀ_t
 
mvaVÆ
, 
Ty≥s
::
ESBTy≥
 
ª·y≥
 ) const

2224 i‡((
ª·y≥
 =
Ty≥s
::
kSig«l
 && !
fMVAPdfS
Ë|| (ª·y≥ =Ty≥s::
kBackground
 && !
fMVAPdfB
)) {

2225 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GetRarity> Required MVA PDF for Signal or Background doesÇotÉxist: "

2226 << "£À˘ o±i⁄ \"Cª©eMVAPdfs\"" << 
Endl
;

2230 
PDF
* 
thePdf
 = ((
ª·y≥
 =
Ty≥s
::
kSig«l
Ë? 
fMVAPdfS
 : 
fMVAPdfB
);

2232  
thePdf
->
	`GëI¡egøl
–thePdf->
	`GëXmö
(), 
mvaVÆ
 );

2233 
	}
}

2239 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëEfficõncy
–c⁄° 
TSåög
& 
theSåög
, 
Ty≥s
::
ETªeTy≥
 
ty≥
,
DoubÀ_t
& 
effSîr
 )

2241 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

2242 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
–
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kCœssifiˇti⁄
 );

2243 
°d
::
ve˘‹
<
Flﬂt_t
>* 
mvaRes
 = 
dy«mic_ˇ°
<
Resu…sCœssifiˇti⁄
*>(
ªsu…s
)->
	`GëVÆueVe˘‹
();

2246 
TLi°
* 
li°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
theSåög
 );

2249 
Boﬁ_t
 
compuãAªa
 = 
kFALSE
;

2250 i‡(!
li°
 ||Üi°->
	`GëSize
(Ë< 2Ë
compuãAªa
 = 
kTRUE
;

2251 i‡(
li°
->
	`GëSize
() > 2) {

2252 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GetEfficiency> WrongÇumber ofárguments"

2253 << " i¿°rög: " << 
theSåög


2254 << " |Ñequúed f‹m©,É.g., Efficõncy:0.05, o∏em±y såög" << 
Endl
;

2255 
dñëe
 
li°
;

2260 i‡–
ªsu…s
->
	`GëHi°
("MVA_S")->
	`GëNbösX
() !=Ñesults->GetHist("MVA_B")->GetNbinsX() ||

2261 
ªsu…s
->
	`GëHi°
("MVA_HIGHBIN_S")->
	`GëNbösX
() !=Ñesults->GetHist("MVA_HIGHBIN_B")->GetNbinsX() ) {

2262 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëEfficõncy> Bönög mism©ch bëwì¿sig«»™d background hi°os" << 
Endl
;

2263 
dñëe
 
li°
;

2270 
TH1
 * 
effhi°
 = 
ªsu…s
->
	`GëHi°
("MVA_HIGHBIN_S");

2271 
DoubÀ_t
 
xmö
 = 
effhi°
->
	`GëXaxis
()->
	`GëXmö
();

2272 
DoubÀ_t
 
xmax
 = 
effhi°
->
	`GëXaxis
()->
	`GëXmax
();

2274 
	`TTHREAD_TLS
(
DoubÀ_t
Ë
√vtS
;

2277 i‡(
ªsu…s
->
	`D€sExi°
("MVA_EFF_S")==0) {

2280 
TH1
* 
eff_s
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_effS", GëTe°v¨Name(Ë+ " (sig«l)", 
fNbösH
, 
xmö
, 
xmax
 );

2281 
TH1
* 
eff_b
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_effB", GëTe°v¨Name(Ë+ " (background)", 
fNbösH
, 
xmö
, 
xmax
 );

2282 
ªsu…s
->
	`St‹e
(
eff_s
, "MVA_EFF_S");

2283 
ªsu…s
->
	`St‹e
(
eff_b
, "MVA_EFF_B");

2286 
I¡_t
 
sign
 = (
fCutOrõ¡©i⁄
 =
kPosôive
) ? +1 : -1;

2289 
√vtS
 = 0;

2290 
UI¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

2293 
Boﬁ_t
 
isSig«l
 = 
	`D©aInfo
().
	`IsSig«l
(
	`GëEvít
(
õvt
));

2294 
Flﬂt_t
 
theWeight
 = 
	`GëEvít
(
õvt
)->
	`GëWeight
();

2295 
Flﬂt_t
 
theVÆ
 = (*
mvaRes
)[
õvt
];

2298 
TH1
* 
theHi°
 = 
isSig«l
 ? 
eff_s
 : 
eff_b
;

2301 i‡(
isSig«l
Ë
√vtS
+=
theWeight
;

2303 
TAxis
* 
axis
 = 
theHi°
->
	`GëXaxis
();

2304 
I¡_t
 
maxbö
 = 
	`I¡_t
((
theVÆ
 - 
axis
->
	`GëXmö
())/◊xis->
	`GëXmax
(Ë-áxis->GëXmö())*
fNbösH
) + 1;

2305 i‡(
sign
 > 0 && 
maxbö
 > 
fNbösH
) ;

2306 i‡(
sign
 < 0 && 
maxbö
 < 1 ) ;

2307 i‡(
sign
 > 0 && 
maxbö
 < 1 ) maxbin = 1;

2308 i‡(
sign
 < 0 && 
maxbö
 > 
fNbösH
) maxbin = fNbinsH;

2310 i‡(
sign
 > 0)

2311 
I¡_t
 
ibö
=1; ibö<=
maxbö
; ibö++Ë
theHi°
->
	`AddBöC⁄ã¡
–ibö , 
theWeight
);

2312 i‡(
sign
 < 0)

2313 
I¡_t
 
ibö
=
maxbö
+1; ibö<=
fNbösH
; ibö++Ë
theHi°
->
	`AddBöC⁄ã¡
–ibö , 
theWeight
 );

2315 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëEfficõncy> Mism©ch i¿sign" << 
Endl
;

2322 
eff_s
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(),eff_s->
	`GëMaximum
()) );

2323 
eff_b
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(),eff_b->
	`GëMaximum
()) );

2326 
TH1
* 
eff_BvsS
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_effBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

2327 
ªsu…s
->
	`St‹e
(
eff_BvsS
, "MVA_EFF_BvsS");

2328 
eff_BvsS
->
	`SëXTôÀ
( "SignalÉff" );

2329 
eff_BvsS
->
	`SëYTôÀ
( "BackgrÉff" );

2332 
TH1
* 
ªj_BvsS
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_ªjBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

2333 
ªsu…s
->
	`St‹e
(
ªj_BvsS
);

2334 
ªj_BvsS
->
	`SëXTôÀ
( "SignalÉff" );

2335 
ªj_BvsS
->
	`SëYTôÀ
( "BackgrÑejection (1-eff)" );

2338 
TH1
* 
öveff_BvsS
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
() + "_invBeffvsSeff",

2339 
	`GëTe°v¨Name
(), 
fNbös
, 0, 1 );

2340 
ªsu…s
->
	`St‹e
(
öveff_BvsS
);

2341 
öveff_BvsS
->
	`SëXTôÀ
( "SignalÉff" );

2342 
öveff_BvsS
->
	`SëYTôÀ
( "Inverse backgr.Éff (1/eff)" );

2347 i‡(
U£_S∂öes_f‹_Eff_
) {

2348 
fS∂RefS
 = 
√w
 
	`TS∂öe1
–"•löe2_sig«l",Çew 
	`TGøph
–
eff_s
 ) );

2349 
fS∂RefB
 = 
√w
 
	`TS∂öe1
–"•löe2_background",Çew 
	`TGøph
–
eff_b
 ) );

2352 
	`gToﬁs
().
	`CheckS∂öes
–
eff_s
, 
fS∂RefS
 );

2353 
	`gToﬁs
().
	`CheckS∂öes
–
eff_b
, 
fS∂RefB
 );

2359 
RoŸFödî
 
	`roŸFödî
–
this
, 
fXmö
, 
fXmax
 );

2361 
DoubÀ_t
 
effB
 = 0;

2362 
fEffS
 = 
eff_s
;

2363 
I¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

2366 
DoubÀ_t
 
effS
 = 
eff_BvsS
->
	`GëBöCíãr
–
böi
 );

2367 
DoubÀ_t
 
cut
 = 
roŸFödî
.
	`RoŸ
–
effS
 );

2370 i‡(
U£_S∂öes_f‹_Eff_
Ë
effB
 = 
fS∂RefB
->
	`EvÆ
–
cut
 );

2371 
effB
 = 
eff_b
->
	`GëBöC⁄ã¡
–eff_b->
	`FödBö
–
cut
 ) );

2374 
eff_BvsS
->
	`SëBöC⁄ã¡
–
böi
, 
effB
 );

2375 
ªj_BvsS
->
	`SëBöC⁄ã¡
–
böi
, 1.0-
effB
 );

2376 i‡(
effB
>
°d
::
numîic_limôs
<>::
	`ïsû⁄
())

2377 
öveff_BvsS
->
	`SëBöC⁄ã¡
–
böi
, 1.0/
effB
 );

2381 
fS∂effBvsS
 = 
√w
 
	`TS∂öe1
–"effBvsS",Çew 
	`TGøph
–
eff_BvsS
 ) );

2385 
DoubÀ_t
 
effS
 = 0., 
ªjB
, 
effS_
 = 0., 
ªjB_
 = 0.;

2386 
I¡_t
 
nbös_
 = 5000;

2387 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

2390 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

2391 
ªjB
 = 1.0 - 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

2394 i‡((
effS
 - 
ªjB
)*(
effS_
 - 
ªjB_
) < 0) ;

2395 
effS_
 = 
effS
;

2396 
ªjB_
 = 
ªjB
;

2400 
DoubÀ_t
 
cut
 = 
roŸFödî
.
	`RoŸ
–0.5*(
effS
 + 
effS_
) );

2401 
	`SëSig«lRe„ªn˚Cut
–
cut
 );

2402 
fEffS
 = 0;

2406 i‡(0 =
fS∂effBvsS
) {

2407 
dñëe
 
li°
;

2412 
DoubÀ_t
 
effS
 = 0, 
effB
 = 0, 
effS_
 = 0, 
effB_
 = 0;

2413 
I¡_t
 
nbös_
 = 1000;

2415 i‡(
compuãAªa
) {

2418 
DoubÀ_t
 
öãgøl
 = 0;

2419 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

2422 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

2423 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

2424 
öãgøl
 +(1.0 - 
effB
);

2426 
öãgøl
 /
nbös_
;

2428 
dñëe
 
li°
;

2429  
öãgøl
;

2435 
Flﬂt_t
 
effBªf
 = 
	`©of
–((
TObjSåög
*)
li°
->
	`At
(1))->
	`GëSåög
() );

2438 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

2441 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

2442 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

2445 i‡((
effB
 - 
effBªf
)*(
effB_
 -ÉffBref) <= 0) ;

2446 
effS_
 = 
effS
;

2447 
effB_
 = 
effB
;

2451 
effS
 = 0.5*”ffS + 
effS_
);

2453 
effSîr
 = 0;

2454 i‡(
√vtS
 > 0Ë
effSîr
 = 
TM©h
::
	`Sqπ
–
effS
*(1.0 -ÉffS)/nevtS );

2456 
dñëe
 
li°
;

2457  
effS
;

2461 
	}
}

2465 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëTøöögEfficõncy
(c⁄° 
TSåög
& 
theSåög
)

2467 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

2469 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kNoA«lysisTy≥
);

2475 
TLi°
* 
li°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
theSåög
 );

2478 i‡(
li°
->
	`GëSize
() != 2) {

2479 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GetTrainingEfficiency> WrongÇumber ofárguments"

2480 << " i¿°rög: " << 
theSåög


2481 << " |Ñequúed f‹m©,É.g., Efficõncy:0.05" << 
Endl
;

2482 
dñëe
 
li°
;

2487 
Flﬂt_t
 
effBªf
 = 
	`©of
–((
TObjSåög
*)
li°
->
	`At
(1))->
	`GëSåög
() );

2489 
dñëe
 
li°
;

2492 i‡(
ªsu…s
->
	`GëHi°
("MVA_S")->
	`GëNbösX
() !=Ñesults->GetHist("MVA_B")->GetNbinsX() ||

2493 
ªsu…s
->
	`GëHi°
("MVA_HIGHBIN_S")->
	`GëNbösX
() !=Ñesults->GetHist("MVA_HIGHBIN_B")->GetNbinsX() ) {

2494 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GetTrainingEfficiency> Binning mismatch between signalánd background histos"

2495 << 
Endl
;

2502 
TH1
 * 
effhi°
 = 
ªsu…s
->
	`GëHi°
("MVA_HIGHBIN_S");

2503 
DoubÀ_t
 
xmö
 = 
effhi°
->
	`GëXaxis
()->
	`GëXmö
();

2504 
DoubÀ_t
 
xmax
 = 
effhi°
->
	`GëXaxis
()->
	`GëXmax
();

2507 i‡(
ªsu…s
->
	`D€sExi°
("MVA_TRAIN_S")==0) {

2510 
DoubÀ_t
 
sxmax
 = 
fXmax
+0.00001;

2513 
TH1
* 
mva_s_å
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_Tøö_S",GëTe°v¨Name(Ë+ "_Tøö_S", 
fNbösMVAouçut
, 
fXmö
, 
sxmax
 );

2514 
TH1
* 
mva_b_å
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_Tøö_B",GëTe°v¨Name(Ë+ "_Tøö_B", 
fNbösMVAouçut
, 
fXmö
, 
sxmax
 );

2515 
ªsu…s
->
	`St‹e
(
mva_s_å
, "MVA_TRAIN_S");

2516 
ªsu…s
->
	`St‹e
(
mva_b_å
, "MVA_TRAIN_B");

2517 
mva_s_å
->
	`Sumw2
();

2518 
mva_b_å
->
	`Sumw2
();

2521 
TH1
* 
mva_eff_å_s
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
() + "_trainingEffS", GetTestvarName() + " (signal)",

2522 
fNbösH
, 
xmö
, 
xmax
 );

2523 
TH1
* 
mva_eff_å_b
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
() + "_trainingEffB", GetTestvarName() + " (background)",

2524 
fNbösH
, 
xmö
, 
xmax
 );

2525 
ªsu…s
->
	`St‹e
(
mva_eff_å_s
, "MVA_TRAINEFF_S");

2526 
ªsu…s
->
	`St‹e
(
mva_eff_å_b
, "MVA_TRAINEFF_B");

2529 
I¡_t
 
sign
 = (
fCutOrõ¡©i⁄
 =
kPosôive
) ? +1 : -1;

2531 
°d
::
ve˘‹
<
DoubÀ_t
> 
mvaVÆues
 = 
	`GëMvaVÆues
(0,
	`D©a
()->
	`GëNEvíts
());

2532 
	`as£π
–(
L⁄g64_t
Ë
mvaVÆues
.
	`size
(Ë=
	`D©a
()->
	`GëNEvíts
());

2535 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

2537 
	`D©a
()->
	`SëCuºítEvít
(
õvt
);

2538 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

2540 
DoubÀ_t
 
theVÆ
 = 
mvaVÆues
[
õvt
];

2541 
DoubÀ_t
 
theWeight
 = 
ev
->
	`GëWeight
();

2543 
TH1
* 
theEffHi°
 = 
	`D©aInfo
().
	`IsSig«l
(
ev
Ë? 
mva_eff_å_s
 : 
mva_eff_å_b
;

2544 
TH1
* 
theClsHi°
 = 
	`D©aInfo
().
	`IsSig«l
(
ev
Ë? 
mva_s_å
 : 
mva_b_å
;

2546 
theClsHi°
->
	`Fûl
–
theVÆ
, 
theWeight
 );

2548 
TAxis
* 
axis
 = 
theEffHi°
->
	`GëXaxis
();

2549 
I¡_t
 
maxbö
 = 
	`I¡_t
((
theVÆ
 - 
axis
->
	`GëXmö
())/◊xis->
	`GëXmax
(Ë-áxis->GëXmö())*
fNbösH
) + 1;

2550 i‡(
sign
 > 0 && 
maxbö
 > 
fNbösH
) ;

2551 i‡(
sign
 < 0 && 
maxbö
 < 1 ) ;

2552 i‡(
sign
 > 0 && 
maxbö
 < 1 ) maxbin = 1;

2553 i‡(
sign
 < 0 && 
maxbö
 > 
fNbösH
) maxbin = fNbinsH;

2555 i‡(
sign
 > 0Ë
I¡_t
 
ibö
=1; ibö<=
maxbö
; ibö++Ë
theEffHi°
->
	`AddBöC⁄ã¡
–ibö , 
theWeight
 );

2556 
I¡_t
 
ibö
=
maxbö
+1; ibö<=
fNbösH
; ibö++Ë
theEffHi°
->
	`AddBöC⁄ã¡
–ibö , 
theWeight
 );

2561 
	`gToﬁs
().
	`N‹mHi°
–
mva_s_å
 );

2562 
	`gToﬁs
().
	`N‹mHi°
–
mva_b_å
 );

2565 
mva_eff_å_s
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(), mva_eff_å_s->
	`GëMaximum
()) );

2566 
mva_eff_å_b
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(), mva_eff_å_b->
	`GëMaximum
()) );

2569 
TH1
* 
eff_bvss
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_åaöögEffBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

2571 
TH1
* 
ªj_bvss
 = 
√w
 
	`TH1D
–
	`GëTe°v¨Name
(Ë+ "_åaöögRejBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

2572 
ªsu…s
->
	`St‹e
(
eff_bvss
, "EFF_BVSS_TR");

2573 
ªsu…s
->
	`St‹e
(
ªj_bvss
, "REJ_BVSS_TR");

2578 i‡(
U£_S∂öes_f‹_Eff_
) {

2579 i‡(
fS∂TøöRefS
Ë
dñëe
 fSplTrainRefS;

2580 i‡(
fS∂TøöRefB
Ë
dñëe
 fSplTrainRefB;

2581 
fS∂TøöRefS
 = 
√w
 
	`TS∂öe1
–"•löe2_sig«l",Çew 
	`TGøph
–
mva_eff_å_s
 ) );

2582 
fS∂TøöRefB
 = 
√w
 
	`TS∂öe1
–"•löe2_background",Çew 
	`TGøph
–
mva_eff_å_b
 ) );

2585 
	`gToﬁs
().
	`CheckS∂öes
–
mva_eff_å_s
, 
fS∂TøöRefS
 );

2586 
	`gToﬁs
().
	`CheckS∂öes
–
mva_eff_å_b
, 
fS∂TøöRefB
 );

2592 
RoŸFödî
 
	`roŸFödî
(
this
, 
fXmö
, 
fXmax
 );

2594 
DoubÀ_t
 
effB
 = 0;

2595 
fEffS
 = 
ªsu…s
->
	`GëHi°
("MVA_TRAINEFF_S");

2596 
I¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

2599 
DoubÀ_t
 
effS
 = 
eff_bvss
->
	`GëBöCíãr
–
böi
 );

2601 
DoubÀ_t
 
cut
 = 
roŸFödî
.
	`RoŸ
–
effS
 );

2604 i‡(
U£_S∂öes_f‹_Eff_
Ë
effB
 = 
fS∂TøöRefB
->
	`EvÆ
–
cut
 );

2605 
effB
 = 
mva_eff_å_b
->
	`GëBöC⁄ã¡
–mva_eff_å_b->
	`FödBö
–
cut
 ) );

2608 
eff_bvss
->
	`SëBöC⁄ã¡
–
böi
, 
effB
 );

2609 
ªj_bvss
->
	`SëBöC⁄ã¡
–
böi
, 1.0-
effB
 );

2611 
fEffS
 = 0;

2614 
fS∂TøöEffBvsS
 = 
√w
 
	`TS∂öe1
–"effBvsS",Çew 
	`TGøph
–
eff_bvss
 ) );

2618 i‡(0 =
fS∂TøöEffBvsS
)  0.0;

2621 
DoubÀ_t
 
effS
 = 0., 
effB
, 
effS_
 = 0., 
effB_
 = 0.;

2622 
I¡_t
 
nbös_
 = 1000;

2623 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

2626 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

2627 
effB
 = 
fS∂TøöEffBvsS
->
	`EvÆ
–
effS
 );

2630 i‡((
effB
 - 
effBªf
)*(
effB_
 -ÉffBref) <= 0) ;

2631 
effS_
 = 
effS
;

2632 
effB_
 = 
effB
;

2635  0.5*(
effS
 + 
effS_
);

2636 
	}
}

2640 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
TMVA
::
MëhodBa£
::
GëMu…i˛assEfficõncy
(
°d
::ve˘‹<°d::ve˘‹<Flﬂt_t> >& 
purôy
)

2642 
D©a
()->
SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

2643 
Resu…sMu…i˛ass
* 
	gªsMu…i˛ass
 = 
dy«mic_ˇ°
<Resu…sMu…i˛ass*>(
D©a
()->
GëResu…s
(
GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kMu…i˛ass
));

2644 i‡(!
	gªsMu…i˛ass
Ë
Log
(Ë<< 
	gkFATAL
<<
F‹m
("D©a£t[%s] : ",
D©aInfo
().
GëName
())<< "u«bÀÅÿ¸óãÖoöã∏ö GëMu…i˛assEfficõncy,Éxôög."<<
	gEndl
;

2646 
	gpurôy
.
push_back
(
ªsMu…i˛ass
->
GëAchõvabÀPur
());

2647  
	gªsMu…i˛ass
->
GëAchõvabÀEff
();

2652 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
TMVA
::
MëhodBa£
::
GëMu…i˛assTøöögEfficõncy
(
°d
::ve˘‹<°d::ve˘‹<Flﬂt_t> >& 
purôy
)

2654 
D©a
()->
SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

2655 
Resu…sMu…i˛ass
* 
	gªsMu…i˛ass
 = 
dy«mic_ˇ°
<Resu…sMu…i˛ass*>(
D©a
()->
GëResu…s
(
GëMëhodName
(), 
Ty≥s
::
kTøöög
, Ty≥s::
kMu…i˛ass
));

2656 i‡(!
	gªsMu…i˛ass
Ë
Log
(Ë<< 
	gkFATAL
<< "u«bÀÅÿ¸óãÖoöã∏ö GëMu…i˛assTøöögEfficõncy,Éxôög."<<
	gEndl
;

2658 
Log
(Ë<< 
	gkINFO
 <<
F‹m
("D©a£t[%s] : ",
D©aInfo
().
GëName
())<< "Dëîmöê›timÆ mu…i˛as†cut†f‹Åøöög d©a..." << 
	gEndl
;

2659 
UI¡_t
 
	gi˛s
 = 0; i˛s<
D©aInfo
().
GëNCœs£s
(); ++icls) {

2660 
	gªsMu…i˛ass
->
GëBe°Mu…iCœssCuts
(
i˛s
);

2663 
	gpurôy
.
push_back
(
ªsMu…i˛ass
->
GëAchõvabÀPur
());

2664  
	gªsMu…i˛ass
->
GëAchõvabÀEff
();

2687 
TM©rixD
 
	gTMVA
::
MëhodBa£
::
	$GëMu…i˛assC⁄fusi⁄M©rix
(
DoubÀ_t
 
effB
, 
Ty≥s
::
ETªeTy≥
 
ty≥
)

2689 i‡(
	`GëA«lysisTy≥
(Ë!
Ty≥s
::
kMu…i˛ass
) {

2690 
	`Log
(Ë<< 
kFATAL
 << "C™nŸ gë c⁄fusi⁄ m©rix f‹Ç⁄-mu…i˛as†™Æysis." << 
°d
::
ídl
;

2691  
	`TM©rixD
(0, 0);

2694 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

2695 
Resu…sMu…i˛ass
 *
ªsMu…i˛ass
 =

2696 
dy«mic_ˇ°
<
Resu…sMu…i˛ass
 *>(
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
ty≥
, 
Ty≥s
::
kMu…i˛ass
));

2698 i‡(
ªsMu…i˛ass
 =
nuŒ±r
) {

2699 
	`Log
(Ë<< 
kFATAL
 << 
	`F‹m
("D©a£t[%s] : ", 
	`D©aInfo
().
	`GëName
())

2700 << "u«bÀÅÿ¸óãÖoöã∏ö GëMu…i˛assEfficõncy,Éxôög." << 
Endl
;

2701  
	`TM©rixD
(0, 0);

2704  
ªsMu…i˛ass
->
	`GëC⁄fusi⁄M©rix
(
effB
);

2705 
	}
}

2713 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëSignifiˇn˚
( ) const

2715 
DoubÀ_t
 
rms
 = 
	`sqπ
–
fRmsS
*fRmsS + 
fRmsB
*fRmsB );

2717  (
rms
 > 0Ë? 
TM©h
::
	`Abs
(
fMónS
 - 
fMónB
)/rms : 0;

2718 
	}
}

2726 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëSï¨©i⁄
–
TH1
* 
hi°oS
, TH1* 
hi°oB
 ) const

2728  
	`gToﬁs
().
	`GëSï¨©i⁄
–
hi°oS
, 
hi°oB
 );

2729 
	}
}

2737 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëSï¨©i⁄
–
PDF
* 
pdfS
, PDF* 
pdfB
 ) const

2741 i‡((!
pdfS
 && 
pdfB
) || (pdfS && !pdfB))

2742 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëSï¨©i⁄> Mism©ch i¿pdfs" << 
Endl
;

2743 i‡(!
pdfS
ËpdfS = 
fS∂S
;

2744 i‡(!
pdfB
ËpdfB = 
fS∂B
;

2746 i‡(!
fS∂S
 || !
fS∂B
) {

2747 
	`Log
()<<
kDEBUG
<<
	`F‹m
("[%s] : ",
	`D©aInfo
().
	`GëName
())<< "couldÇot calculateÅhe separation, distributions"

2748 << " fS∂S o∏fS∂BáªÇŸ yë fûÀd" << 
Endl
;

2751  
	`gToﬁs
().
	`GëSï¨©i⁄
–*
pdfS
, *
pdfB
 );

2753 
	}
}

2759 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëROCI¡egøl
(
TH1D
 *
hi°S
, TH1D *
hi°B
) const

2763 i‡((!
hi°S
 && 
hi°B
) || (histS && !histB))

2764 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëROCI¡egøl(TH1D*, TH1D*)> Mism©ch i¿hi°s" << 
Endl
;

2766 i‡(
hi°S
==0 || 
hi°B
==0)  0.;

2768 
TMVA
::
PDF
 *
pdfS
 = 
√w
 TMVA::
	`PDF
–" PDF Sig", 
hi°S
, TMVA::PDF::
kS∂öe3
 );

2769 
TMVA
::
PDF
 *
pdfB
 = 
√w
 TMVA::
	`PDF
–" PDF Bkg", 
hi°B
, TMVA::PDF::
kS∂öe3
 );

2772 
DoubÀ_t
 
xmö
 = 
TM©h
::
	`Mö
(
pdfS
->
	`GëXmö
(), 
pdfB
->GetXmin());

2773 
DoubÀ_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`GëXmax
(), 
pdfB
->GetXmax());

2775 
DoubÀ_t
 
öãgøl
 = 0;

2776 
UI¡_t
 
n°ïs
 = 1000;

2777 
DoubÀ_t
 
°ï
 = (
xmax
-
xmö
)/
	`DoubÀ_t
(
n°ïs
);

2778 
DoubÀ_t
 
cut
 = 
xmö
;

2779 
UI¡_t
 
i
=0; i<
n°ïs
; i++) {

2780 
öãgøl
 +(1-
pdfB
->
	`GëI¡egøl
(
cut
,
xmax
)Ë* 
pdfS
->
	`GëVÆ
(cut);

2781 
cut
+=
°ï
;

2783  
öãgøl
*
°ï
;

2784 
	}
}

2791 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëROCI¡egøl
(
PDF
 *
pdfS
, PDF *
pdfB
) const

2795 i‡((!
pdfS
 && 
pdfB
) || (pdfS && !pdfB))

2796 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GëSï¨©i⁄> Mism©ch i¿pdfs" << 
Endl
;

2797 i‡(!
pdfS
ËpdfS = 
fS∂S
;

2798 i‡(!
pdfB
ËpdfB = 
fS∂B
;

2800 i‡(
pdfS
==0 || 
pdfB
==0)  0.;

2802 
DoubÀ_t
 
xmö
 = 
TM©h
::
	`Mö
(
pdfS
->
	`GëXmö
(), 
pdfB
->GetXmin());

2803 
DoubÀ_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`GëXmax
(), 
pdfB
->GetXmax());

2805 
DoubÀ_t
 
öãgøl
 = 0;

2806 
UI¡_t
 
n°ïs
 = 1000;

2807 
DoubÀ_t
 
°ï
 = (
xmax
-
xmö
)/
	`DoubÀ_t
(
n°ïs
);

2808 
DoubÀ_t
 
cut
 = 
xmö
;

2809 
UI¡_t
 
i
=0; i<
n°ïs
; i++) {

2810 
öãgøl
 +(1-
pdfB
->
	`GëI¡egøl
(
cut
,
xmax
)Ë* 
pdfS
->
	`GëVÆ
(cut);

2811 
cut
+=
°ï
;

2813  
öãgøl
*
°ï
;

2814 
	}
}

2821 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëMaximumSignifiˇn˚
–
DoubÀ_t
 
Sig«lEvíts
,

2822 
DoubÀ_t
 
BackgroundEvíts
,

2823 
DoubÀ_t
& 
max_signifiˇn˚_vÆue
 ) const

2825 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
–
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, Ty≥s::
kMaxA«lysisTy≥
 );

2827 
DoubÀ_t
 
	`max_signifiˇn˚
(0);

2828 
DoubÀ_t
 
	`effS
(0),
	`effB
(0),
	`signifiˇn˚
(0);

2829 
TH1D
 *
ãmp_hi°ogøm
 = 
√w
 
	`TH1D
("ãmp", "ãmp", 
fNbösH
, 
fXmö
, 
fXmax
 );

2831 i‡(
Sig«lEvíts
 <0 || 
BackgroundEvíts
 <= 0) {

2832 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<GetMaximumSignificance> "

2834 << 
Endl
;

2837 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "UsingÑatio SignalEvents/BackgroundEvents = "

2838 << 
Sig«lEvíts
/
BackgroundEvíts
 << 
Endl
;

2840 
TH1
* 
eff_s
 = 
ªsu…s
->
	`GëHi°
("MVA_EFF_S");

2841 
TH1
* 
eff_b
 = 
ªsu…s
->
	`GëHi°
("MVA_EFF_B");

2843 i‡–(
eff_s
==0Ë|| (
eff_b
==0) ) {

2844 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "Efficõncy hi°ogøm†em±y !" << 
Endl
;

2845 
	`Log
(Ë<< 
kWARNING
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "nÿmaximum cuàfound,Ñëu∫ 0" << 
Endl
;

2849 
I¡_t
 
bö
=1; bö<=
fNbösH
; bin++) {

2850 
effS
 = 
eff_s
->
	`GëBöC⁄ã¡
–
bö
 );

2851 
effB
 = 
eff_b
->
	`GëBöC⁄ã¡
–
bö
 );

2854 
signifiˇn˚
 = 
	`sqπ
(
Sig«lEvíts
)*–
effS
 )/sqπ–effS + ( 
BackgroundEvíts
 / Sig«lEvítsË* 
effB
 );

2856 
ãmp_hi°ogøm
->
	`SëBöC⁄ã¡
(
bö
,
signifiˇn˚
);

2860 
max_signifiˇn˚
 = 
ãmp_hi°ogøm
->
	`GëBöCíãr
–ãmp_hi°ogøm->
	`GëMaximumBö
() );

2861 
max_signifiˇn˚_vÆue
 = 
ãmp_hi°ogøm
->
	`GëBöC⁄ã¡
–ãmp_hi°ogøm->
	`GëMaximumBö
() );

2864 
dñëe
 
ãmp_hi°ogøm
;

2866 
	`Log
(Ë<< 
kINFO
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "O±imÆ cuà© : " << 
max_signifiˇn˚
 << 
Endl
;

2867 
	`Log
(Ë<< 
kINFO
<<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
()Ë<< "Maximum signifiˇn˚: " << 
max_signifiˇn˚_vÆue
 << 
Endl
;

2869  
max_signifiˇn˚
;

2870 
	}
}

2877 
	gTMVA
::
MëhodBa£
::
	$Sèti°ics
–
Ty≥s
::
ETªeTy≥
 
åìTy≥
, c⁄° 
TSåög
& 
theV¨Name
,

2878 
DoubÀ_t
& 
mónS
, DoubÀ_t& 
mónB
,

2879 
DoubÀ_t
& 
rmsS
, DoubÀ_t& 
rmsB
,

2880 
DoubÀ_t
& 
xmö
, DoubÀ_t& 
xmax
 )

2882 
Ty≥s
::
ETªeTy≥
 
¥eviousTªeTy≥
 = 
	`D©a
()->
	`GëCuºítTy≥
();

2883 
	`D©a
()->
	`SëCuºítTy≥
(
åìTy≥
);

2885 
L⁄g64_t
 
íåõs
 = 
	`D©a
()->
	`GëNEvíts
();

2888 i‡(
íåõs
 <=0)

2889 
	`Log
(Ë<< 
kFATAL
 <<
	`F‹m
("D©a£t[%s] : ",
	`D©aInfo
().
	`GëName
())<< "<CÆcuœãE°im©‹> Wr⁄gÅªêty≥: " << 
åìTy≥
 << 
Endl
;

2892 
UI¡_t
 
v¨Index
 = 
	`D©aInfo
().
	`FödV¨Index
–
theV¨Name
 );

2895 
xmö
 = +
DBL_MAX
;

2896 
xmax
 = -
DBL_MAX
;

2897 
L⁄g64_t
 
nEvítsS
 = -1;

2898 
L⁄g64_t
 
nEvítsB
 = -1;

2901 
mónS
 = 0;

2902 
mónB
 = 0;

2903 
rmsS
 = 0;

2904 
rmsB
 = 0;

2905 
DoubÀ_t
 
sumwS
 = 0, 
sumwB
 = 0;

2908 
I¡_t
 
õvt
 = 0; ievà< 
íåõs
; ievt++) {

2910 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

2912 
DoubÀ_t
 
theV¨
 = 
ev
->
	`GëVÆue
(
v¨Index
);

2913 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

2915 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)) {

2916 
sumwS
 +
weight
;

2917 
mónS
 +
weight
*
theV¨
;

2918 
rmsS
 +
weight
*
theV¨
*theVar;

2921 
sumwB
 +
weight
;

2922 
mónB
 +
weight
*
theV¨
;

2923 
rmsB
 +
weight
*
theV¨
*theVar;

2925 
xmö
 = 
TM©h
::
	`Mö
–xmö, 
theV¨
 );

2926 
xmax
 = 
TM©h
::
	`Max
–xmax, 
theV¨
 );

2928 ++
nEvítsS
;

2929 ++
nEvítsB
;

2931 
mónS
 = mónS/
sumwS
;

2932 
mónB
 = mónB/
sumwB
;

2933 
rmsS
 = 
TM©h
::
	`Sqπ
–rmsS/
sumwS
 - 
mónS
*meanS );

2934 
rmsB
 = 
TM©h
::
	`Sqπ
–rmsB/
sumwB
 - 
mónB
*meanB );

2936 
	`D©a
()->
	`SëCuºítTy≥
(
¥eviousTªeTy≥
);

2937 
	}
}

2942 
	gTMVA
::
MëhodBa£
::
	$MakeCœss
–c⁄° 
TSåög
& 
theCœssFûeName
 ) const

2945 
TSåög
 
˛assFûeName
 = "";

2946 i‡(
theCœssFûeName
 == "")

2947 
˛assFûeName
 = 
	`GëWeightFûeDú
(Ë+ "/" + 
	`GëJobName
(Ë+ "_" + 
	`GëMëhodName
() + ".class.C";

2949 
˛assFûeName
 = 
theCœssFûeName
;

2951 
TSåög
 
˛assName
 = 
	`TSåög
("Ród"Ë+ 
	`GëMëhodName
();

2953 
TSåög
 
	`t‚ame
–
˛assFûeName
 );

2954 
	`Log
(Ë<< 
kINFO


2956 << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue"Ë<< 
˛assFûeName
 << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

2958 
°d
::
of°ªam
 
	`fout
–
˛assFûeName
 );

2959 i‡(!
fout
.
	`good
()) {

2960 
	`Log
(Ë<< 
kFATAL
 << "<MakeCœss> U«bÀÅÿ›í fûe: " << 
˛assFûeName
 << 
Endl
;

2965 
fout
 << "// Cœss: " << 
˛assName
 << 
°d
::
ídl
;

2966 
fout
 << "// Autom©iˇŒy gíî©ed by MëhodBa£::MakeCœss" << 
°d
::
ídl
 << "//" << std::endl;

2969 
fout
 << 
°d
::
ídl
;

2970 
fout
 << "/* c⁄figuøti⁄ o±i⁄†=====================================================" << 
°d
::
ídl
 << std::endl;

2971 
	`WrôeSèãToSåóm
–
fout
 );

2972 
fout
 << 
°d
::
ídl
;

2973 
fout
 << "===========================================================================*/" << 
°d
::
ídl
;

2976 
fout
 << "" << 
°d
::
ídl
;

2977 
fout
 << "#ö˛udê<¨øy>" << 
°d
::
ídl
;

2978 
fout
 << "#ö˛udê<ve˘‹>" << 
°d
::
ídl
;

2979 
fout
 << "#ö˛udê<cm©h>" << 
°d
::
ídl
;

2980 
fout
 << "#ö˛udê<°rög>" << 
°d
::
ídl
;

2981 
fout
 << "#ö˛udê<io°ªam>" << 
°d
::
ídl
;

2982 
fout
 << "" << 
°d
::
ídl
;

2985 
this
->
	`MakeCœssS≥cificHódî
–
fout
, 
˛assName
 );

2987 
fout
 << "#i‚de‡ICœssifõrRódî__def" << 
°d
::
ídl
;

2988 
fout
 << "#deföêICœssifõrRódî__def" << 
°d
::
ídl
;

2989 
fout
 << 
°d
::
ídl
;

2990 
fout
 << "˛as†ICœssifõrRódî {" << 
°d
::
ídl
;

2991 
fout
 << 
°d
::
ídl
;

2992 
fout
 << "Öublic:" << 
°d
::
ídl
;

2993 
fout
 << 
°d
::
ídl
;

2994 
fout
 << " // c⁄°ru˘‹" << 
°d
::
ídl
;

2995 
fout
 << " ICœssifõrRódî(Ë: fSètusIsCÀ™–åuêË{}" << 
°d
::
ídl
;

2996 
fout
 << " vútuÆ ~ICœssifõrRódî(Ë{}" << 
°d
::
ídl
;

2997 
fout
 << 
°d
::
ídl
;

2998 
fout
 << " //Ñëu∫ cœssifõ∏ª•⁄£" << 
°d
::
ídl
;

2999 
fout
 << " vútuÆ doubÀ GëMvaVÆue–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄° = 0;" << 
°d
::
ídl
;

3000 
fout
 << 
°d
::
ídl
;

3001 
fout
 << " //Ñëu∫†˛assifõ∏°©us" << 
°d
::
ídl
;

3002 
fout
 << " boﬁ IsSètusCÀ™(Ëc⁄° {Ñëu∫ fSètusIsCÀ™; }" << 
°d
::
ídl
;

3003 
fout
 << 
°d
::
ídl
;

3004 
fout
 << "ÖrŸe˘ed:" << 
°d
::
ídl
;

3005 
fout
 << 
°d
::
ídl
;

3006 
fout
 << " boﬁ fSètusIsCÀ™;" << 
°d
::
ídl
;

3007 
fout
 << "};" << 
°d
::
ídl
;

3008 
fout
 << 
°d
::
ídl
;

3009 
fout
 << "#ídif" << 
°d
::
ídl
;

3010 
fout
 << 
°d
::
ídl
;

3011 
fout
 << "˛as†" << 
˛assName
 << " :Öubli¯ICœssifõrRódî {" << 
°d
::
ídl
;

3012 
fout
 << 
°d
::
ídl
;

3013 
fout
 << "Öublic:" << 
°d
::
ídl
;

3014 
fout
 << 
°d
::
ídl
;

3015 
fout
 << " // c⁄°ru˘‹" << 
°d
::
ídl
;

3016 
fout
 << " " << 
˛assName
 << "–°d::ve˘‹<°d::°rög>&ÅheI≈utV¨†Ë" << 
°d
::
ídl
;

3017 
fout
 << " : ICœssifõrRódî()," << 
°d
::
ídl
;

3018 
fout
 << " fCœssName–\"" << 
˛assName
 << "\" )," << 
°d
::
ídl
;

3019 
fout
 << " fNv¨s–" << 
	`GëNv¨
(Ë<< " )," << 
°d
::
ídl
;

3020 
fout
 << " fIsN‹mÆi£d–" << (
	`IsN‹mÆi£d
(Ë? "åue" : "Ál£"Ë<< " )" << 
°d
::
ídl
;

3021 
fout
 << " { " << 
°d
::
ídl
;

3022 
fout
 << " //Åhêåaöög i≈uàv¨übÀs" << 
°d
::
ídl
;

3023 
fout
 << " const char* inputVars[] = { ";

3024 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

3025 
fout
 << "\"" << 
	`GëOrigöÆV¨Name
(
iv¨
) << "\"";

3026 i‡(
iv¨
<
	`GëNv¨
()-1Ë
fout
 << ", ";

3028 
fout
 << " };" << 
°d
::
ídl
;

3029 
fout
 << 
°d
::
ídl
;

3030 
fout
 << " // s™ôy checks" << 
°d
::
ídl
;

3031 
fout
 << " i‡—heI≈utV¨s.size(Ë<0Ë{" << 
°d
::
ídl
;

3032 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\":Ém±y i≈uàve˘‹\" << std::ídl;" << 
°d
::
ídl
;

3033 
fout
 << " fSètusIsCÀ™ = fÆ£;" << 
°d
::
ídl
;

3034 
fout
 << " }" << 
°d
::
ídl
;

3035 
fout
 << 
°d
::
ídl
;

3036 
fout
 << " i‡—heI≈utV¨s.size(Ë!fNv¨sË{" << 
°d
::
ídl
;

3037 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\": mism©ch i¿numbî o‡öpuàvÆues: \"" << 
°d
::
ídl
;

3038 
fout
 << " <<ÅheI≈utV¨s.size(Ë<< \" !\" << fNv¨†<< std::ídl;" << 
°d
::
ídl
;

3039 
fout
 << " fSètusIsCÀ™ = fÆ£;" << 
°d
::
ídl
;

3040 
fout
 << " }" << 
°d
::
ídl
;

3041 
fout
 << 
°d
::
ídl
;

3042 
fout
 << " // vÆid©êöpuàv¨übÀs" << 
°d
::
ídl
;

3043 
fout
 << " f‹ (size_àiv¨ = 0; iv¨ <ÅheI≈utV¨s.size(); iv¨++Ë{" << 
°d
::
ídl
;

3044 
fout
 << " i‡—heI≈utV¨s[iv¨] !öputV¨s[iv¨]Ë{" << 
°d
::
ídl
;

3045 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\": mism©ch i¿öpuàv¨übÀÇames\" << std::ídl" << 
°d
::
ídl
;

3046 
fout
 << " << \" f‹ v¨übÀ [\" << iv¨ << \"]: \" <<ÅheI≈utV¨s[iv¨].c_°r(Ë<< \" !\" << i≈utV¨s[iv¨] << std::ídl;" << 
°d
::
ídl
;

3047 
fout
 << " fSètusIsCÀ™ = fÆ£;" << 
°d
::
ídl
;

3048 
fout
 << " }" << 
°d
::
ídl
;

3049 
fout
 << " }" << 
°d
::
ídl
;

3050 
fout
 << 
°d
::
ídl
;

3051 
fout
 << " // inôülizêmöánd max ve˘‹†(f‹Ç‹mÆißti⁄)" << 
°d
::
ídl
;

3052 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++) {

3053 
fout
 << " fVmö[" << 
iv¨
 << "] = " << 
°d
::
	`£çªcisi⁄
(15Ë<< 
	`GëXmö
–iv¨ ) << ";" << std::
ídl
;

3054 
fout
 << " fVmax[" << 
iv¨
 << "] = " << 
°d
::
	`£çªcisi⁄
(15Ë<< 
	`GëXmax
–iv¨ ) << ";" << std::
ídl
;

3056 
fout
 << 
°d
::
ídl
;

3057 
fout
 << " // inôülizêöpuàv¨übÀÅy≥s" << 
°d
::
ídl
;

3058 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

3059 
fout
 << " fTy≥[" << 
iv¨
 << "] = \'" << 
	`D©aInfo
().
	`GëV¨übÀInfo
(iv¨).
	`GëV¨Ty≥
(Ë<< "\';" << 
°d
::
ídl
;

3061 
fout
 << 
°d
::
ídl
;

3062 
fout
 << " // inôülizêc⁄°™ts" << 
°d
::
ídl
;

3063 
fout
 << " Inôülize();" << 
°d
::
ídl
;

3064 
fout
 << 
°d
::
ídl
;

3065 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() != 0) {

3066 
fout
 << " // inôülizêå™sf‹m©i⁄" << 
°d
::
ídl
;

3067 
fout
 << " InôTønsf‹m();" << 
°d
::
ídl
;

3069 
fout
 << " }" << 
°d
::
ídl
;

3070 
fout
 << 
°d
::
ídl
;

3071 
fout
 << " // de°ru˘‹" << 
°d
::
ídl
;

3072 
fout
 << " vútuÆ ~" << 
˛assName
 << "(Ë{" << 
°d
::
ídl
;

3073 
fout
 << " CÀ¨(); // mëhod-•ecific" << 
°d
::
ídl
;

3074 
fout
 << " }" << 
°d
::
ídl
;

3075 
fout
 << 
°d
::
ídl
;

3076 
fout
 << " //Åhê˛assifõ∏ª•⁄£" << 
°d
::
ídl
;

3077 
fout
 << " // \"öputVÆues\" i†®ve˘‹ o‡öpuàvÆue†öÅhêßmê‹dîá†thê" << 
°d
::
ídl
;

3078 
fout
 << " // v¨übÀ†givíÅÿthêc⁄°ru˘‹" << 
°d
::
ídl
;

3079 
fout
 << " doubÀ GëMvaVÆue–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°;" << 
°d
::
ídl
;

3080 
fout
 << 
°d
::
ídl
;

3081 
fout
 << "Öriv©e:" << 
°d
::
ídl
;

3082 
fout
 << 
°d
::
ídl
;

3083 
fout
 << " // mëhod-•ecifi¯de°ru˘‹" << 
°d
::
ídl
;

3084 
fout
 << " void CÀ¨();" << 
°d
::
ídl
;

3085 
fout
 << 
°d
::
ídl
;

3086 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
()!=0) {

3087 
fout
 << " // i≈uàv¨übÀÅønsf‹m©i⁄" << 
°d
::
ídl
;

3088 
	`GëTønsf‹m©i⁄H™dÀr
().
	`MakeFun˘i⁄
(
fout
, 
˛assName
,1);

3089 
fout
 << " void InôTønsf‹m();" << 
°d
::
ídl
;

3090 
fout
 << " void Tønsf‹m–°d::ve˘‹<doubÀ> & iv, i¡ sigOrBgd ) c⁄°;" << 
°d
::
ídl
;

3091 
fout
 << 
°d
::
ídl
;

3093 
fout
 << " // comm⁄ membî v¨übÀs" << 
°d
::
ídl
;

3094 
fout
 << " c⁄° ch¨* fCœssName;" << 
°d
::
ídl
;

3095 
fout
 << 
°d
::
ídl
;

3096 
fout
 << " c⁄° size_àfNv¨s;" << 
°d
::
ídl
;

3097 
fout
 << " size_àGëNv¨(Ë c⁄° {Ñëu∫ fNv¨s; }" << 
°d
::
ídl
;

3098 
fout
 << " ch¨ GëTy≥–öàiv¨ ) c⁄° {Ñëu∫ fTy≥[iv¨]; }" << 
°d
::
ídl
;

3099 
fout
 << 
°d
::
ídl
;

3100 
fout
 << " //Ç‹mÆißti⁄ o‡öpuàv¨übÀs" << 
°d
::
ídl
;

3101 
fout
 << " c⁄° boﬁ fIsN‹mÆi£d;" << 
°d
::
ídl
;

3102 
fout
 << " boﬁ IsN‹mÆi£d(Ëc⁄° {Ñëu∫ fIsN‹mÆi£d; }" << 
°d
::
ídl
;

3103 
fout
 << " doubÀ fVmö[" << 
	`GëNv¨
(Ë<< "];" << 
°d
::
ídl
;

3104 
fout
 << " doubÀ fVmax[" << 
	`GëNv¨
(Ë<< "];" << 
°d
::
ídl
;

3105 
fout
 << " doubÀ N‹mV¨übÀ–doubÀ x, doubÀ xmö, doubÀ xmax ) c⁄° {" << 
°d
::
ídl
;

3106 
fout
 << " //Ç‹mÆi£Åÿouçuàønge: [-1, 1]" << 
°d
::
ídl
;

3107 
fout
 << "Ñëu∫ 2*(x - xmö)/(xmax - xmöË- 1.0;" << 
°d
::
ídl
;

3108 
fout
 << " }" << 
°d
::
ídl
;

3109 
fout
 << 
°d
::
ídl
;

3110 
fout
 << " //Åy≥ o‡öpuàv¨übÀ: 'F' o∏'I'" << 
°d
::
ídl
;

3111 
fout
 << " ch¨ fTy≥[" << 
	`GëNv¨
(Ë<< "];" << 
°d
::
ídl
;

3112 
fout
 << 
°d
::
ídl
;

3113 
fout
 << " // inôülizêöã∫Æ v¨übÀs" << 
°d
::
ídl
;

3114 
fout
 << " void Inôülize();" << 
°d
::
ídl
;

3115 
fout
 << " doubÀ GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°;" << 
°d
::
ídl
;

3116 
fout
 << "" << 
°d
::
ídl
;

3117 
fout
 << " //Öriv©êmembî†(mëhod s≥cific)" << 
°d
::
ídl
;

3120 
	`MakeCœssS≥cific
–
fout
, 
˛assName
 );

3122 
fout
 << " i∆öêdoubÀ " << 
˛assName
 << "::GëMvaVÆue–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

3123 
fout
 << " {" << 
°d
::
ídl
;

3124 
fout
 << " // cœssifõ∏ª•⁄£ vÆue" << 
°d
::
ídl
;

3125 
fout
 << " doubÀÑëvÆ = 0;" << 
°d
::
ídl
;

3126 
fout
 << 
°d
::
ídl
;

3127 
fout
 << " // cœssifõ∏ª•⁄£, s™ôy check fú°" << 
°d
::
ídl
;

3128 
fout
 << " i‡(!IsSètusCÀ™()Ë{" << 
°d
::
ídl
;

3129 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\": c™nŸÑëu∫ cœssifõ∏ª•⁄£\"" << 
°d
::
ídl
;

3130 
fout
 << " << \" beˇu£ sètu†i†dúty\" << std::ídl;" << 
°d
::
ídl
;

3131 
fout
 << "ÑëvÆ = 0;" << 
°d
::
ídl
;

3132 
fout
 << " }" << 
°d
::
ídl
;

3133 
fout
 << "Él£ {" << 
°d
::
ídl
;

3134 
fout
 << " i‡(IsN‹mÆi£d()Ë{" << 
°d
::
ídl
;

3135 
fout
 << " //Ç‹mÆi£ v¨übÀs" << 
°d
::
ídl
;

3136 
fout
 << " std::ve˘‹<doubÀ> iV;" << 
°d
::
ídl
;

3137 
fout
 << " iV.ª£rve(öputVÆues.size());" << 
°d
::
ídl
;

3138 
fout
 << " i¡ iv¨ = 0;" << 
°d
::
ídl
;

3139 
fout
 << " f‹ (°d::ve˘‹<doubÀ>::c⁄°_ôî©‹ v¨IàöputVÆues.begö();" << 
°d
::
ídl
;

3140 
fout
 << " v¨Ià!öputVÆues.íd(); v¨It++, iv¨++Ë{" << 
°d
::
ídl
;

3141 
fout
 << " iV.push_back(N‹mV¨übÀ–*v¨It, fVmö[iv¨], fVmax[iv¨] ));" << 
°d
::
ídl
;

3142 
fout
 << " }" << 
°d
::
ídl
;

3143 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
()!=0 &&

3144 
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kLikñihood
 &&

3145 
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kHM©rix
) {

3146 
fout
 << " Tønsf‹m–iV, -1 );" << 
°d
::
ídl
;

3148 
fout
 << "ÑëvÆ = GëMvaVÆue__–iV );" << 
°d
::
ídl
;

3149 
fout
 << " }" << 
°d
::
ídl
;

3150 
fout
 << "Él£ {" << 
°d
::
ídl
;

3151 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
()!=0 &&

3152 
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kLikñihood
 &&

3153 
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kHM©rix
) {

3154 
fout
 << " std::ve˘‹<doubÀ> iV;" << 
°d
::
ídl
;

3155 
fout
 << " i¡ iv¨ = 0;" << 
°d
::
ídl
;

3156 
fout
 << " f‹ (°d::ve˘‹<doubÀ>::c⁄°_ôî©‹ v¨IàöputVÆues.begö();" << 
°d
::
ídl
;

3157 
fout
 << " v¨Ià!öputVÆues.íd(); v¨It++, iv¨++Ë{" << 
°d
::
ídl
;

3158 
fout
 << " iV.push_back(*v¨It);" << 
°d
::
ídl
;

3159 
fout
 << " }" << 
°d
::
ídl
;

3160 
fout
 << " Tønsf‹m–iV, -1 );" << 
°d
::
ídl
;

3161 
fout
 << "ÑëvÆ = GëMvaVÆue__–iV );" << 
°d
::
ídl
;

3164 
fout
 << "ÑëvÆ = GëMvaVÆue__–öputVÆue†);" << 
°d
::
ídl
;

3166 
fout
 << " }" << 
°d
::
ídl
;

3167 
fout
 << " }" << 
°d
::
ídl
;

3168 
fout
 << 
°d
::
ídl
;

3169 
fout
 << "Ñëu∫ÑëvÆ;" << 
°d
::
ídl
;

3170 
fout
 << " }" << 
°d
::
ídl
;

3173 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
()!=0)

3174 
	`GëTønsf‹m©i⁄H™dÀr
().
	`MakeFun˘i⁄
(
fout
, 
˛assName
,2);

3177 
fout
.
	`˛o£
();

3178 
	}
}

3183 
	gTMVA
::
MëhodBa£
::
	$PrötHñpMesßge
() const

3186 
°d
::
°ªambuf
* 
cout_sbuf
 = std::
cout
.
	`rdbuf
();

3187 
°d
::
of°ªam
* 
o
 = 0;

3188 i‡(
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
()) {

3189 
	`Log
(Ë<< 
kINFO
 << "PröàHñ∞mesßgêf‹ cœs†" << 
	`GëName
(Ë<< " i¡ÿfûe: " << 
	`GëRe„ªn˚Fûe
(Ë<< 
Endl
;

3190 
o
 = 
√w
 
°d
::
	`of°ªam
–
	`GëRe„ªn˚Fûe
(), std::
ios
::
≠p
 );

3191 i‡(!
o
->
	`good
()) {

3192 
	`Log
(Ë<< 
kFATAL
 << "<PrötHñpMesßge> U«bÀÅÿ≠≥ndÅÿouçuàfûe: " << 
	`GëRe„ªn˚Fûe
(Ë<< 
Endl
;

3194 
°d
::
cout
.
	`rdbuf
–
o
->rdbuf() );

3198 i‡(!
o
) {

3199 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

3200 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bold")

3202 << 
	`gToﬁs
().
	`Cﬁ‹
( "reset" )

3203 << 
Endl
;

3204 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bold")

3205 << "HÉÜÖ f oÑ M V A mÉÅ h o d [ " << 
	`GëName
() << " ] :"

3206 << 
	`gToﬁs
().
	`Cﬁ‹
( "reset" )

3207 << 
Endl
;

3210 
	`Log
(Ë<< "Hñ∞f‹ MVA mëhod [ " << 
	`GëName
(Ë<< " ] :" << 
Endl
;

3214 
	`GëHñpMesßge
();

3216 i‡(!
o
) {

3217 
	`Log
(Ë<< 
Endl
;

3218 
	`Log
(Ë<< "<Suµªs†thi†mesßgêby s≥cifyög \"!H\" i¿thêbookög o±i⁄>" << 
Endl
;

3219 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bold")

3221 << 
	`gToﬁs
().
	`Cﬁ‹
( "reset" )

3222 << 
Endl
;

3223 
	`Log
(Ë<< 
Endl
;

3227 
	`Log
(Ë<< "# End o‡Mesßge___" << 
Endl
;

3230 
°d
::
cout
.
	`rdbuf
–
cout_sbuf
 );

3231 i‡(
o
Ëo->
	`˛o£
();

3232 
	}
}

3239 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëVÆueF‹RoŸ
–
DoubÀ_t
 
theCut
 )

3241 
DoubÀ_t
 
ªtvÆ
=0;

3244 i‡(
U£_S∂öes_f‹_Eff_
) {

3245 
ªtvÆ
 = 
fS∂RefS
->
	`EvÆ
–
theCut
 );

3247 
ªtvÆ
 = 
fEffS
->
	`GëBöC⁄ã¡
–fEffS->
	`FödBö
–
theCut
 ) );

3255 
DoubÀ_t
 
ïs
 = 1.0e-5;

3256 i‡(
theCut
-
fXmö
 < 
ïs
Ë
ªtvÆ
 = (
	`GëCutOrõ¡©i⁄
(Ë=
kPosôive
) ? 1.0 : 0.0;

3257 i‡(
fXmax
-
theCut
 < 
ïs
Ë
ªtvÆ
 = (
	`GëCutOrõ¡©i⁄
(Ë=
kPosôive
) ? 0.0 : 1.0;

3259  
ªtvÆ
;

3260 
	}
}

3266 c⁄° 
	g°d
::
ve˘‹
<
TMVA
::
Evít
*>& TMVA::
MëhodBa£
::
	$GëEvítCﬁÀ˘i⁄
–
Ty≥s
::
ETªeTy≥
 
ty≥
)

3270 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëE¡rõs
() <= 0) {

3271  (
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
(
ty≥
));

3277 
I¡_t
 
idx
 = 
	`D©a
()->
	`TªeIndex
(
ty≥
);

3278 i‡(
fEvítCﬁÀ˘i⁄s
.
	`©
(
idx
) == 0) {

3279 
fEvítCﬁÀ˘i⁄s
.
	`©
(
idx
Ë&(
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
(
ty≥
));

3280 
fEvítCﬁÀ˘i⁄s
.
	`©
(
idx
Ë
	`GëTønsf‹m©i⁄H™dÀr
().
	`CÆcTønsf‹m©i⁄s
(*(fEvítCﬁÀ˘i⁄s.©(idx)),
kTRUE
);

3282  *(
fEvítCﬁÀ˘i⁄s
.
	`©
(
idx
));

3283 
	}
}

3288 
TSåög
 
	gTMVA
::
MëhodBa£
::
	$GëTøöögTMVAVîsi⁄Såög
() const

3290 
UI¡_t
 
a
 = 
	`GëTøöögTMVAVîsi⁄Code
() & 0xff0000;á>>=16;

3291 
UI¡_t
 
b
 = 
	`GëTøöögTMVAVîsi⁄Code
() & 0x00ff00; b>>=8;

3292 
UI¡_t
 
c
 = 
	`GëTøöögTMVAVîsi⁄Code
() & 0x0000ff;

3294  
	`TSåög
(
	`F‹m
("%i.%i.%i",
a
,
b
,
c
));

3295 
	}
}

3300 
TSåög
 
	gTMVA
::
MëhodBa£
::
	$GëTøöögROOTVîsi⁄Såög
() const

3302 
UI¡_t
 
a
 = 
	`GëTøöögROOTVîsi⁄Code
() & 0xff0000;á>>=16;

3303 
UI¡_t
 
b
 = 
	`GëTøöögROOTVîsi⁄Code
() & 0x00ff00; b>>=8;

3304 
UI¡_t
 
c
 = 
	`GëTøöögROOTVîsi⁄Code
() & 0x0000ff;

3306  
	`TSåög
(
	`F‹m
("%i.%02i/%02i",
a
,
b
,
c
));

3307 
	}
}

3311 
DoubÀ_t
 
	gTMVA
::
MëhodBa£
::
	$GëKSTøöögVsTe°
(
Ch¨_t
 
S‹B
, 
TSåög
 
›t
){

3312 
Resu…sCœssifiˇti⁄
* 
mvaRes
 = 
dy«mic_ˇ°
<ResultsClassification*>

3313 –
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(),
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
) );

3315 i‡(
mvaRes
 !
NULL
) {

3316 
TH1D
 *
mva_s
 = 
dy«mic_ˇ°
<TH1D*> (
mvaRes
->
	`GëHi°
("MVA_S"));

3317 
TH1D
 *
mva_b
 = 
dy«mic_ˇ°
<TH1D*> (
mvaRes
->
	`GëHi°
("MVA_B"));

3318 
TH1D
 *
mva_s_å
 = 
dy«mic_ˇ°
<TH1D*> (
mvaRes
->
	`GëHi°
("MVA_TRAIN_S"));

3319 
TH1D
 *
mva_b_å
 = 
dy«mic_ˇ°
<TH1D*> (
mvaRes
->
	`GëHi°
("MVA_TRAIN_B"));

3321 i‡–!
mva_s
 || !
mva_b
 || !
mva_s_å
 || !
mva_b_å
)  -1;

3323 i‡(
S‹B
 == 's' || SorB == 'S')

3324  
mva_s
->
	`Kﬁmog‹ovTe°
–
mva_s_å
, 
›t
.
	`D©a
() );

3326  
mva_b
->
	`Kﬁmog‹ovTe°
–
mva_b_å
, 
›t
.
	`D©a
() );

3329 
	}
}

	@src/MethodBayesClassifier.cxx

35 
	~"TMVA/MëhodBayesCœssifõr.h
"

37 
	~"TMVA/CœssifõrFa˘‹y.h
"

38 
	~"TMVA/IMëhod.h
"

39 
	~"TMVA/MëhodBa£.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/Toﬁs.h
"

42 
	~"TMVA/Ty≥s.h
"

44 
	~"Rio°ªam.h
"

45 
	~"TSåög.h
"

47 
	$REGISTER_METHOD
(
BayesCœssifõr
)

49 
	`CœssImp
(
TMVA
::
MëhodBayesCœssifõr
);

54 
TMVA
::
MëhodBayesCœssifõr
::
	$MëhodBayesCœssifõr
–c⁄° 
TSåög
& 
jobName
,

55 c⁄° 
TSåög
& 
mëhodTôÀ
,

56 
D©aSëInfo
& 
theD©a
,

57 c⁄° 
TSåög
& 
theO±i⁄
 ) :

58 
TMVA
::
	$MëhodBa£
–
jobName
, 
Ty≥s
::
kBayesCœssifõr
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

60 
	}
}

65 
	gTMVA
::
MëhodBayesCœssifõr
::
	$MëhodBayesCœssifõr
–
D©aSëInfo
& 
theD©a
,

66 c⁄° 
TSåög
& 
theWeightFûe
) :

67 
TMVA
::
	$MëhodBa£
–
Ty≥s
::
kBayesCœssifõr
, 
theD©a
, 
theWeightFûe
)

69 
	}
}

74 
Boﬁ_t
 
	gTMVA
::
MëhodBayesCœssifõr
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

76 if–
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2 )  
kTRUE
;

77  
kFALSE
;

78 
	}
}

84 
	gTMVA
::
MëhodBayesCœssifõr
::
	$Inô
( )

86 
	}
}

91 
TMVA
::
MëhodBayesCœssifõr
::
	$De˛¨eO±i⁄s
()

93 
	}
}

98 
TMVA
::
MëhodBayesCœssifõr
::
	$Pro˚ssO±i⁄s
()

100 
	}
}

105 
TMVA
::
MëhodBayesCœssifõr
::~
	$MëhodBayesCœssifõr
( )

107 
	}
}

112 
TMVA
::
MëhodBayesCœssifõr
::
	$Tøö
( )

114 
	}
}

118 
TMVA
::
MëhodBayesCœssifõr
::
	$AddWeightsXMLTo
( * ) const {

119 
	`Log
(Ë<< 
kFATAL
 << "PÀa£ im∂emíàwrôög o‡weight†a†XML" << 
Endl
;

120 
	}
}

125 
	gTMVA
::
MëhodBayesCœssifõr
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
 & )

127 
	}
}

132 
DoubÀ_t
 
TMVA
::
MëhodBayesCœssifõr
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

134 
DoubÀ_t
 
myMVA
 = 0;

137 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

139  
myMVA
;

140 
	}
}

145 
	gTMVA
::
MëhodBayesCœssifõr
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

147 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

148 
fout
 << "};" << 
°d
::
ídl
;

149 
	}
}

157 
	gTMVA
::
MëhodBayesCœssifõr
::
	$GëHñpMesßge
() const

159 
	`Log
(Ë<< 
Endl
;

160 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

161 
	`Log
(Ë<< 
Endl
;

162 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

163 
	`Log
(Ë<< 
Endl
;

164 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

165 
	`Log
(Ë<< 
Endl
;

166 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

167 
	`Log
(Ë<< 
Endl
;

168 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

169 
	`Log
(Ë<< 
Endl
;

170 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

171 
	}
}

	@src/MethodBoost.cxx

44 
	~"TMVA/MëhodBoo°.h
"

46 
	~"TMVA/CœssifõrFa˘‹y.h
"

47 
	~"TMVA/C⁄fig.h
"

48 
	~"TMVA/C⁄figuøbÀ.h
"

49 
	~"TMVA/D©aSë.h
"

50 
	~"TMVA/D©aSëInfo.h
"

51 
	~"TMVA/IMëhod.h
"

52 
	~"TMVA/MëhodBa£.h
"

53 
	~"TMVA/MëhodC©eg‹y.h
"

54 
	~"TMVA/MëhodComposôeBa£.h
"

55 
	~"TMVA/MëhodDT.h
"

56 
	~"TMVA/MëhodFishî.h
"

57 
	~"TMVA/PDF.h
"

58 
	~"TMVA/Resu…s.h
"

59 
	~"TMVA/Timî.h
"

60 
	~"TMVA/Toﬁs.h
"

61 
	~"TMVA/Ty≥s.h
"

63 
	~"TMVA/Sï¨©i⁄Ba£.h
"

64 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

65 
	~"TMVA/GöiIndex.h
"

66 
	~"TMVA/CrossE¡r›y.h
"

67 
	~"TMVA/Regªssi⁄V¨ün˚.h
"

68 
	~"TMVA/QuickMVAProbE°im©‹.h
"

70 
	~"Rio°ªam.h
"

71 
	~"TR™dom3.h
"

72 
	~"TFûe.h
"

73 
	~"TM©h.h
"

74 
	~"TObjSåög.h
"

75 
	~"TH1F.h
"

76 
	~"TH2F.h
"

77 
	~"TGøph.h
"

78 
	~"TS∂öe.h
"

79 
	~"TDúe˘‹y.h
"

80 
	~"TTªe.h
"

82 
	~<Æg‹ôhm
>

83 
	~<iom™ù
>

84 
	~<ve˘‹
>

85 
	~<cm©h
>

88 
	$REGISTER_METHOD
(
Boo°
)

90 
	`CœssImp
(
TMVA
::
MëhodBoo°
);

94 
TMVA
::
MëhodBoo°
::
	$MëhodBoo°
–c⁄° 
TSåög
& 
jobName
,

95 c⁄° 
TSåög
& 
mëhodTôÀ
,

96 
D©aSëInfo
& 
theD©a
,

97 c⁄° 
TSåög
& 
theO±i⁄
 ) :

98 
TMVA
::
	`MëhodComposôeBa£
–
jobName
, 
Ty≥s
::
kBoo°
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

99 , 
	`fBoo°Num
(0)

100 , 
	`fDëaûedM⁄ô‹ög
(
kFALSE
)

101 , 
	`fAdaBoo°Bëa
(0)

102 , 
	`fR™domSìd
(0)

103 , 
	`fBaggedSam∂eFø˘i⁄
(0)

104 , 
	`fBoo°edMëhodTôÀ
(
mëhodTôÀ
)

105 , 
	`fBoo°edMëhodO±i⁄s
(
theO±i⁄
)

106 , 
	`fM⁄ô‹Boo°edMëhod
(
kFALSE
)

107 , 
	`fM⁄ô‹Tªe
(0)

108 , 
	`fBoo°Weight
(0)

109 , 
	`fMëhodEº‹
(0)

110 , 
	`fROC_åaöög
(0.0)

111 , 
	`fOvîœp_öãgøl
(0.0)

112 , 
	$fMVAvÆues
(0)

114 
fMVAvÆues
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>;

115 
fD©aSëM™agî
 = 
NULL
;

116 
fHi°‹icBoﬁO±i⁄
 = 
kFALSE
;

117 
	}
}

121 
	gTMVA
::
MëhodBoo°
::
	$MëhodBoo°
–
D©aSëInfo
& 
dsi
,

122 c⁄° 
TSåög
& 
theWeightFûe
)

123 : 
TMVA
::
	`MëhodComposôeBa£
–
Ty≥s
::
kBoo°
, 
dsi
, 
theWeightFûe
)

124 , 
	`fBoo°Num
(0)

125 , 
	`fDëaûedM⁄ô‹ög
(
kFALSE
)

126 , 
	`fAdaBoo°Bëa
(0)

127 , 
	`fR™domSìd
(0)

128 , 
	`fBaggedSam∂eFø˘i⁄
(0)

129 , 
	`fBoo°edMëhodTôÀ
("")

130 , 
	`fBoo°edMëhodO±i⁄s
("")

131 , 
	`fM⁄ô‹Boo°edMëhod
(
kFALSE
)

132 , 
	`fM⁄ô‹Tªe
(0)

133 , 
	`fBoo°Weight
(0)

134 , 
	`fMëhodEº‹
(0)

135 , 
	`fROC_åaöög
(0.0)

136 , 
	`fOvîœp_öãgøl
(0.0)

137 , 
	$fMVAvÆues
(0)

139 
fMVAvÆues
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>;

140 
fD©aSëM™agî
 = 
NULL
;

141 
fHi°‹icBoﬁO±i⁄
 = 
kFALSE
;

142 
	}
}

147 
	gTMVA
::
MëhodBoo°
::~
	$MëhodBoo°
( )

149 
fMëhodWeight
.
	`˛ór
();

153 
fTøöSigMVAHi°
.
	`˛ór
();

154 
fTøöBgdMVAHi°
.
	`˛ór
();

155 
fBTøöSigMVAHi°
.
	`˛ór
();

156 
fBTøöBgdMVAHi°
.
	`˛ór
();

157 
fTe°SigMVAHi°
.
	`˛ór
();

158 
fTe°BgdMVAHi°
.
	`˛ór
();

160 i‡(
fMVAvÆues
) {

161 
dñëe
 
fMVAvÆues
;

162 
fMVAvÆues
 = 0;

164 
	}
}

170 
Boﬁ_t
 
	gTMVA
::
MëhodBoo°
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

172 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

174  
kFALSE
;

175 
	}
}

180 
	gTMVA
::
MëhodBoo°
::
	$De˛¨eO±i⁄s
()

182 
	`De˛¨eO±i⁄Ref
–
fBoo°Num
 = 1, "Boost_Num",

185 
	`De˛¨eO±i⁄Ref
–
fM⁄ô‹Boo°edMëhod
 = 
kTRUE
, "Boost_MonitorMethod",

188 
	`De˛¨eO±i⁄Ref
–
fDëaûedM⁄ô‹ög
 = 
kFALSE
, "Boost_DetailedMonitoring",

191 
	`De˛¨eO±i⁄Ref
–
fBoo°Ty≥
 = "AdaBoost", "Boost_Type", "BoostingÅype forÅhe classifiers" );

192 
	`AddPªDefVÆ
(
	`TSåög
("RealAdaBoost"));

193 
	`AddPªDefVÆ
(
	`TSåög
("AdaBoost"));

194 
	`AddPªDefVÆ
(
	`TSåög
("Bagging"));

196 
	`De˛¨eO±i⁄Ref
(
fBaggedSam∂eFø˘i⁄
=.6,"Boost_BaggedSampleFraction","Relative size of baggedÉvent sampleÅo original size ofÅhe data sample (used whenever bagging is used)" );

198 
	`De˛¨eO±i⁄Ref
–
fAdaBoo°Bëa
 = 1.0, "Boost_AdaBoostBeta",

201 
	`De˛¨eO±i⁄Ref
–
fTønsf‹mSåög
 = "step", "Boost_Transform",

203 
	`AddPªDefVÆ
(
	`TSåög
("step"));

204 
	`AddPªDefVÆ
(
	`TSåög
("linear"));

205 
	`AddPªDefVÆ
(
	`TSåög
("log"));

206 
	`AddPªDefVÆ
(
	`TSåög
("gauss"));

208 
	`De˛¨eO±i⁄Ref
–
fR™domSìd
 = 0, "Boost_RandomSeed",

211 
TMVA
::
MëhodComposôeBa£
::
fMëhods
.
	`ª£rve
(
fBoo°Num
);

212 
	}
}

219 
	gTMVA
::
MëhodBoo°
::
	$De˛¨eCom∑tibûôyO±i⁄s
()

222 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

224 
	`De˛¨eO±i⁄Ref
–
fHi°‹icO±i⁄
 = "ByError", "Boost_MethodWeightType",

226 
	`AddPªDefVÆ
(
	`TSåög
("ByError"));

227 
	`AddPªDefVÆ
(
	`TSåög
("Average"));

228 
	`AddPªDefVÆ
(
	`TSåög
("ByROC"));

229 
	`AddPªDefVÆ
(
	`TSåög
("ByOverlap"));

230 
	`AddPªDefVÆ
(
	`TSåög
("LastMethod"));

232 
	`De˛¨eO±i⁄Ref
–
fHi°‹icO±i⁄
 = "step", "Boost_Transform",

234 
	`AddPªDefVÆ
(
	`TSåög
("step"));

235 
	`AddPªDefVÆ
(
	`TSåög
("linear"));

236 
	`AddPªDefVÆ
(
	`TSåög
("log"));

237 
	`AddPªDefVÆ
(
	`TSåög
("gauss"));

242 
	`AddPªDefVÆ
(
	`TSåög
("HighEdgeGauss"));

243 
	`AddPªDefVÆ
(
	`TSåög
("HighEdgeCoPara"));

246 
	`De˛¨eO±i⁄Ref
–
fHi°‹icBoﬁO±i⁄
, "Boost_RecalculateMVACut",

249 
	}
}

254 
Boﬁ_t
 
	gTMVA
::
MëhodBoo°
::
	$BookMëhod
–
Ty≥s
::
EMVA
 
theMëhod
, 
TSåög
 
mëhodTôÀ
, TSåög 
theO±i⁄
 )

256 
fBoo°edMëhodName
 = 
Ty≥s
::
	`In°™˚
().
	`GëMëhodName
–
theMëhod
 );

257 
fBoo°edMëhodTôÀ
 = 
mëhodTôÀ
;

258 
fBoo°edMëhodO±i⁄s
 = 
theO±i⁄
;

259 
TSåög
 
›ts
=
theO±i⁄
;

260 
›ts
.
	`ToLowî
();

263  
kTRUE
;

264 
	}
}

268 
	gTMVA
::
MëhodBoo°
::
	$Inô
()

270 
	}
}

275 
TMVA
::
MëhodBoo°
::
	$InôHi°os
()

278 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

280 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("MëhodWeight","N‹mÆized Cœssifõ∏Weight",
fBoo°Num
,0,fBoostNum),"ClassifierWeight");

281 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("Boo°Weight","Boo° Weight",
fBoo°Num
,0,fBoostNum),"BoostWeight");

282 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("EºFø˘i⁄","Eº‹ Fø˘i⁄ (by boo°edÉvíàweights)",
fBoo°Num
,0,fBoostNum),"ErrorFraction");

283 i‡(
fDëaûedM⁄ô‹ög
){

284 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("ROCI¡egøl_ã°","ROC i¡egø»o‡sögÀ cœssifõ∏—e°ög sam∂e)",
fBoo°Num
,0,fBoostNum),"ROCIntegral_test");

285 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("ROCI¡egølBoo°ed_ã°","ROC i¡egø»o‡boo°ed mëhod (ã°ög sam∂e)",
fBoo°Num
,0,fBoostNum),"ROCIntegralBoosted_test");

286 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("ROCI¡egøl_åaö","ROC i¡egø»o‡sögÀ cœssifõ∏—øöög sam∂e)",
fBoo°Num
,0,fBoostNum),"ROCIntegral_train");

287 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("ROCI¡egølBoo°ed_åaö","ROC i¡egø»o‡boo°ed mëhod (åaöög sam∂e)",
fBoo°Num
,0,fBoostNum),"ROCIntegralBoosted_train");

288 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("OvîœpI¡egÆ_åaö","Ovîœ∞öãgø»—øöög sam∂e)",
fBoo°Num
,0,fBoostNum),"Overlap");

292 
ªsu…s
->
	`GëHi°
("CœssifõrWeight")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

293 
ªsu…s
->
	`GëHi°
("CœssifõrWeight")->
	`GëYaxis
()->
	`SëTôÀ
("Classifier Weight");

294 
ªsu…s
->
	`GëHi°
("Boo°Weight")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

295 
ªsu…s
->
	`GëHi°
("Boo°Weight")->
	`GëYaxis
()->
	`SëTôÀ
("Boost Weight");

296 
ªsu…s
->
	`GëHi°
("Eº‹Fø˘i⁄")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

297 
ªsu…s
->
	`GëHi°
("Eº‹Fø˘i⁄")->
	`GëYaxis
()->
	`SëTôÀ
("Error Fraction");

298 i‡(
fDëaûedM⁄ô‹ög
){

299 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_ã°")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

300 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_ã°")->
	`GëYaxis
()->
	`SëTôÀ
("ROC integral of single classifier");

301 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_ã°")->
	`GëXaxis
()->
	`SëTôÀ
("Number of boosts");

302 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_ã°")->
	`GëYaxis
()->
	`SëTôÀ
("ROC integral boosted");

303 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_åaö")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

304 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_åaö")->
	`GëYaxis
()->
	`SëTôÀ
("ROC integral of single classifier");

305 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_åaö")->
	`GëXaxis
()->
	`SëTôÀ
("Number of boosts");

306 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_åaö")->
	`GëYaxis
()->
	`SëTôÀ
("ROC integral boosted");

307 
ªsu…s
->
	`GëHi°
("Ovîœp")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

308 
ªsu…s
->
	`GëHi°
("Ovîœp")->
	`GëYaxis
()->
	`SëTôÀ
("Overlap integral");

311 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("SovîBtŸÆ","S/B i¿ªweighãdÅøöög sam∂e",
fBoo°Num
,0,fBoostNum),"SoverBtotal");

312 
ªsu…s
->
	`GëHi°
("SovîBtŸÆ")->
	`GëYaxis
()->
	`SëTôÀ
("S/B (boosted sample)");

313 
ªsu…s
->
	`GëHi°
("SovîBtŸÆ")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

315 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1F
("Sï¨©i⁄Gaö","Sï¨©i⁄Gaö",
fBoo°Num
,0,fBoostNum),"SeparationGain");

316 
ªsu…s
->
	`GëHi°
("Sï¨©i⁄Gaö")->
	`GëYaxis
()->
	`SëTôÀ
("SeparationGain");

317 
ªsu…s
->
	`GëHi°
("Sï¨©i⁄Gaö")->
	`GëXaxis
()->
	`SëTôÀ
("Index of boosted classifier");

321 
fM⁄ô‹Tªe

√w
 
	`TTªe
("MonitorBoost","Boost variables");

322 
fM⁄ô‹Tªe
->
	`Bønch
("iMëhod",&
fCuºítMëhodIdx
,"iMethod/I");

323 
fM⁄ô‹Tªe
->
	`Bønch
("boo°Weight",&
fBoo°Weight
,"boostWeight/D");

324 
fM⁄ô‹Tªe
->
	`Bønch
("îr‹Fø˘i⁄",&
fMëhodEº‹
,"errorFraction/D");

325 
fM⁄ô‹Boo°edMëhod
 = 
kTRUE
;

327 
	}
}

332 
	gTMVA
::
MëhodBoo°
::
	$CheckSëup
()

334 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fBoo°Ty≥="<<
fBoo°Ty≥
 << 
Endl
;

335 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fAdaBoo°Bëa="<<
fAdaBoo°Bëa
<<
Endl
;

336 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fBoo°Weight="<<
fBoo°Weight
<<
Endl
;

337 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fMëhodEº‹="<<
fMëhodEº‹
<<
Endl
;

338 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fBoo°Num="<<
fBoo°Num
 << 
Endl
;

339 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fR™domSìd=" << 
fR™domSìd
<< 
Endl
;

340 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fTøöSigMVAHi°.size()="<<
fTøöSigMVAHi°
.
	`size
()<<
Endl
;

341 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fTe°SigMVAHi°.size()="<<
fTe°SigMVAHi°
.
	`size
()<<
Endl
;

342 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fM⁄ô‹Boo°edMëhod=" << (
fM⁄ô‹Boo°edMëhod
? "åue" : "Ál£"Ë<< 
Endl
;

343 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: MName=" << 
fBoo°edMëhodName
 << " TôÀ="<< 
fBoo°edMëhodTôÀ
<< 
Endl
;

344 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: MO±i⁄s="<< 
fBoo°edMëhodO±i⁄s
 << 
Endl
;

345 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fM⁄ô‹Tªe=" << 
fM⁄ô‹Tªe
 <<
Endl
;

346 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fCuºítMëhodIdx=" <<
fCuºítMëhodIdx
 << 
Endl
;

347 i‡(
fMëhods
.
	`size
()>0Ë
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fMëhods[0]" <<fMëhods[0]<<
Endl
;

348 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fMëhodWeight.size()" << 
fMëhodWeight
.
	`size
(Ë<< 
Endl
;

349 i‡(
fMëhodWeight
.
	`size
()>0Ë
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup: fMëhodWeight[0]="<<fMëhodWeight[0]<<
Endl
;

350 
	`Log
(Ë<< 
kDEBUG
 << "CheckSëup:ÅryögÅÿª∑úÅhögs" << 
Endl
;

352 
	}
}

355 
	gTMVA
::
MëhodBoo°
::
	$Tøö
()

357 
TDúe˘‹y
* 
	`mëhodDú
( 0 );

358 
TSåög
 
dúName
,
dúTôÀ
;

359 
I¡_t
 
St›Cou¡î
=0;

360 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

363 
	`InôHi°os
();

365 i‡(
	`D©a
()->
	`GëNTøöögEvíts
()==0Ë
	`Log
(Ë<< 
kFATAL
 << "<Tøö> D©a(Ëha†zîÿevíts" << 
Endl
;

366 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

368 i‡(
fMëhods
.
	`size
(Ë> 0ËfMëhods.
	`˛ór
();

369 
fMVAvÆues
->
	`ªsize
(
	`D©a
()->
	`GëNTøöögEvíts
(), 0.0);

371 
	`Log
(Ë<< 
kINFO
 << "Tøöög "<< 
fBoo°Num
 << " " << 
fBoo°edMëhodName
 << " wôhÅôÀ " << 
fBoo°edMëhodTôÀ
 << " Cœssifõr†...Ö©õn˚ÖÀa£" << 
Endl
;

372 
Timî
 
	`timî
–
fBoo°Num
, 
	`GëName
() );

374 
	`Re£tBoo°Weights
();

377 
	`CÀ™Boo°O±i⁄s
();

382 
Ssiz_t
 
v¨TøfoSèπ
=
fBoo°edMëhodO±i⁄s
.
	`Index
("~VarTransform=");

383 i‡(
v¨TøfoSèπ
 >0) {

384 
Ssiz_t
 
v¨TøfoEnd
 =
fBoo°edMëhodO±i⁄s
.
	`Index
(":",
v¨TøfoSèπ
);

385 i‡(
v¨TøfoEnd
<
v¨TøfoSèπ
)

386 
v¨TøfoEnd
=
fBoo°edMëhodO±i⁄s
.
	`Lígth
();

387 
fBoo°edMëhodO±i⁄s
.
	`Remove
(
v¨TøfoSèπ
,
v¨TøfoEnd
-varTrafoStart);

392 
fCuºítMëhodIdx
=0;fCuºítMëhodIdx<
fBoo°Num
;fCurrentMethodIdx++) {

394 i‡(
fCuºítMëhodIdx
>0Ë
TMVA
::
MsgLoggî
::
	`InhibôOuçut
();

396 
IMëhod
* 
mëhod
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
(
°d
::
	`°rög
(
fBoo°edMëhodName
),

397 
	`GëJobName
(),

398 
	`F‹m
("%s_B%04i", 
fBoo°edMëhodTôÀ
.
	`D©a
(),
fCuºítMëhodIdx
),

399 
	`D©aInfo
(),

400 
fBoo°edMëhodO±i⁄s
);

401 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

404 
fCuºítMëhod
 = (
dy«mic_ˇ°
<
MëhodBa£
*>(
mëhod
));

406 i‡(
fCuºítMëhod
==0) {

407 
	`Log
(Ë<< 
kFATAL
 << "uups.. gues†thêbookög o‡thê" << 
fCuºítMëhodIdx
 << "-th cœssifõ∏somehow faûed" << 
Endl
;

412 i‡(
fCuºítMëhod
->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
) {

413 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
fCuºítMëhod
));

414 i‡(!
mëhC©
)

415 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /MëhodBoo°" << 
Endl
;

416 
mëhC©
->
fD©aSëM™agî
 = fDataSetManager;

419 
fCuºítMëhod
->
	`SëMsgTy≥
(
kWARNING
);

420 
fCuºítMëhod
->
	`SëupMëhod
();

421 
fCuºítMëhod
->
	`P¨£O±i⁄s
();

423 
fCuºítMëhod
->
	`SëA«lysisTy≥
–
	`GëA«lysisTy≥
() );

424 
fCuºítMëhod
->
	`Pro˚ssSëup
();

425 
fCuºítMëhod
->
	`CheckSëup
();

429 
fCuºítMëhod
->
	`RîouãTønsf‹m©i⁄H™dÀr
 (&(
this
->
	`GëTønsf‹m©i⁄H™dÀr
()));

433 if(!
	`IsSûítFûe
())

435 i‡(
fM⁄ô‹Boo°edMëhod
) {

436 
mëhodDú
=
	`GëFûe
()->
	`GëDúe˘‹y
(
dúName
=
	`F‹m
("%s_B%04i",
fBoo°edMëhodName
.
	`D©a
(),
fCuºítMëhodIdx
));

437 i‡(
mëhodDú
==0) {

438 
mëhodDú
=
	`Ba£Dú
()->
	`mkdú
(
dúName
,
dúTôÀ
=
	`F‹m
("Dúe˘‹y Boo°ed %†#%04i", 
fBoo°edMëhodName
.
	`D©a
(),
fCuºítMëhodIdx
));

440 
fCuºítMëhod
->
	`SëMëhodDú
(
mëhodDú
);

441 
fCuºítMëhod
->
	`Ba£Dú
()->
	`cd
();

446 
TMVA
::
MëhodComposôeBa£
::
fMëhods
.
	`push_back
(
mëhod
);

447 
timî
.
	`DøwProgªssB¨
–
fCuºítMëhodIdx
 );

448 i‡(
fCuºítMëhodIdx
==0Ë
	`M⁄ô‹Boo°
(
Ty≥s
::
kBoo°ProcBegö
,fCurrentMethodIdx);

449 
	`M⁄ô‹Boo°
(
Ty≥s
::
kBef‹eTøöög
,
fCuºítMëhodIdx
);

450 
TMVA
::
MsgLoggî
::
	`InhibôOuçut
();

451 i‡(
fBoo°Ty≥
=="Baggög"Ë
	`Baggög
();

452 
	`SögÀTøö
();

453 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

454 if(!
	`IsSûítFûe
())
fCuºítMëhod
->
	`WrôeM⁄ô‹ögHi°osToFûe
();

458 
	`CÆcMVAVÆues
();

460 if(!
	`IsSûítFûe
()Ëi‡(
fCuºítMëhodIdx
==0 && 
fM⁄ô‹Boo°edMëhod
Ë
	`Cª©eMVAHi°‹gøms
();

467 
	`M⁄ô‹Boo°
(
Ty≥s
::
kBef‹eBoo°ög
,
fCuºítMëhodIdx
);

468 
	`SögÀBoo°
(
fCuºítMëhod
);

470 
	`M⁄ô‹Boo°
(
Ty≥s
::
kA·îBoo°ög
,
fCuºítMëhodIdx
);

471 
ªsu…s
->
	`GëHi°
("Boo°Weight")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1,
fBoo°Weight
);

472 
ªsu…s
->
	`GëHi°
("Eº‹Fø˘i⁄")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1,
fMëhodEº‹
);

474 i‡(
fDëaûedM⁄ô‹ög
) {

475 
fROC_åaöög
 = 
	`GëBoo°ROCI¡egøl
(
kTRUE
, 
Ty≥s
::
kTøöög
, kTRUE);

476 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_ã°")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
	`GëBoo°ROCI¡egøl
(
kTRUE
, 
Ty≥s
::
kTe°ög
));

477 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_ã°")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
	`GëBoo°ROCI¡egøl
(
kFALSE
, 
Ty≥s
::
kTe°ög
));

478 
ªsu…s
->
	`GëHi°
("ROCI¡egøl_åaö")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
fROC_åaöög
);

479 
ªsu…s
->
	`GëHi°
("ROCI¡egølBoo°ed_åaö")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
	`GëBoo°ROCI¡egøl
(
kFALSE
, 
Ty≥s
::
kTøöög
));

480 
ªsu…s
->
	`GëHi°
("Ovîœp")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
fOvîœp_öãgøl
);

485 
fM⁄ô‹Tªe
->
	`Fûl
();

489 
	`Log
(Ë<< 
kDEBUG
 << "AdaBoo° (mëhodEºËî∏" << 
fMëhodEº‹
 << 
Endl
;

490 i‡(
fMëhodEº‹
 > 0.49999Ë
St›Cou¡î
++;

491 i‡(
St›Cou¡î
 > 0 && 
fBoo°Ty≥
 != "Bagging") {

492 
timî
.
	`DøwProgªssB¨
–
fBoo°Num
 );

493 
fBoo°Num
 = 
fCuºítMëhodIdx
+1;

494 
	`Log
(Ë<< 
kINFO
 << "Eº‹Ñ©êha†ªached 0.5 ("<< 
fMëhodEº‹
<<"), boo°ögÖro˚s†°›≥dáà#" << 
fBoo°Num
 << " cœssifõr" << 
Endl
;

495 i‡(
fBoo°Num
 < 5)

496 
	`Log
(Ë<< 
kINFO
 << "Thê˛assifõ∏mighàbêtoÿ°r⁄gÅÿboo° wôh Bë®" << 
fAdaBoo°Bëa
 << ",ÅryÑeducög it." <<
Endl
;

504 
	`Re£tBoo°Weights
();

506 
Timî
* 
timî1

√w
 
	`Timî
–
fBoo°Num
, 
	`GëName
() );

508 
fCuºítMëhodIdx
=0;fCuºítMëhodIdx<
fBoo°Num
;fCurrentMethodIdx++) {

511 
timî1
->
	`DøwProgªssB¨
–
fCuºítMëhodIdx
 );

513 i‡(
fCuºítMëhodIdx
==
fBoo°Num
) {

514 
	`Log
(Ë<< 
kINFO
 << "Eœp£dÅime: " << 
timî1
->
	`GëEœp£dTime
()

515 << " " << 
Endl
;

518 
TH1F
* 
tmp
 = 
dy«mic_ˇ°
<TH1F*>–
ªsu…s
->
	`GëHi°
("ClassifierWeight") );

519 i‡(
tmp
Ëtmp->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1,
fMëhodWeight
[fCurrentMethodIdx]);

528 i‡(
fMëhods
.
	`size
()==1Ë
fMëhodWeight
[0] = 1.0;

530 
	`M⁄ô‹Boo°
(
Ty≥s
::
kBoo°ProcEnd
);

532 
dñëe
 
timî1
;

533 
	}
}

537 
	gTMVA
::
MëhodBoo°
::
	$CÀ™Boo°O±i⁄s
()

539 
fBoo°edMëhodO±i⁄s
=
	`GëO±i⁄s
();

540 
	}
}

544 
	gTMVA
::
MëhodBoo°
::
	$Cª©eMVAHi°‹gøms
()

546 i‡(
fBoo°Num
 <=0Ë
	`Log
(Ë<< 
kFATAL
 << "Cª©eHi°ogøm†ˇŒed bef‹êfBoo°Num i†öôülized" << 
Endl
;

549 
DoubÀ_t
 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
, 
ƒms
 = 10;

550 
I¡_t
 
sig«lCœss
 = 0;

551 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Signal") != 0) {

552 
sig«lCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

554 
	`gToﬁs
().
	`CompuãSèt
–
	`GëEvítCﬁÀ˘i⁄
–
Ty≥s
::
kMaxTªeTy≥
 ), 
fMVAvÆues
,

555 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
, 
sig«lCœss
 );

557 
fNbös
 = 
	`gC⁄fig
().
fV¨übÀPlŸtög
.
fNbösXOfROCCurve
;

558 
xmö
 = 
TM©h
::
	`Max
–TM©h::
	`Mö
(
mónS
 - 
ƒms
*
rmsS
, 
mónB
 -Çrms*
rmsB
 ), xmin );

559 
xmax
 = 
TM©h
::
	`Mö
–TM©h::
	`Max
(
mónS
 + 
ƒms
*
rmsS
, 
mónB
 +Çrms*
rmsB
 ), xmax ) + 0.00001;

562 
UI¡_t
 
imtd
=0; imtd<
fBoo°Num
; imtd++) {

563 
fTøöSigMVAHi°
 .
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_Tøö_S_%04i",
imtd
), "MVA_Tøö_S", 
fNbös
, 
xmö
, 
xmax
 ) );

564 
fTøöBgdMVAHi°
 .
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_Tøö_B%04i", 
imtd
), "MVA_Tøö_B", 
fNbös
, 
xmö
, 
xmax
 ) );

565 
fBTøöSigMVAHi°
.
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_BTøö_S%04i",
imtd
), "MVA_Boo°edTøö_S", 
fNbös
, 
xmö
, 
xmax
 ) );

566 
fBTøöBgdMVAHi°
.
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_BTøö_B%04i",
imtd
), "MVA_Boo°edTøö_B", 
fNbös
, 
xmö
, 
xmax
 ) );

567 
fTe°SigMVAHi°
 .
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_Te°_S%04i", 
imtd
), "MVA_Te°_S", 
fNbös
, 
xmö
, 
xmax
 ) );

568 
fTe°BgdMVAHi°
 .
	`push_back
–
√w
 
	`TH1F
–
	`F‹m
("MVA_Te°_B%04i", 
imtd
), "MVA_Te°_B", 
fNbös
, 
xmö
, 
xmax
 ) );

570 
	}
}

575 
	gTMVA
::
MëhodBoo°
::
	$Re£tBoo°Weights
()

577 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

578 c⁄° 
Evít
 *
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

579 
ev
->
	`SëBoo°Weight
( 1.0 );

581 
	}
}

585 
	gTMVA
::
MëhodBoo°
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

587 
TDúe˘‹y
* 
dú
=0;

588 i‡(
fM⁄ô‹Boo°edMëhod
) {

589 
UI¡_t
 
imtd
=0;imtd<
fBoo°Num
;imtd++) {

592 
MëhodBa£
* 
m
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
imtd
]);

593 i‡(!
m
) ;

594 
dú
 = 
m
->
	`Ba£Dú
();

595 
dú
->
	`cd
();

596 
fTøöSigMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

597 
fTøöSigMVAHi°
[
imtd
]->
	`Wrôe
();

598 
fTøöBgdMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

599 
fTøöBgdMVAHi°
[
imtd
]->
	`Wrôe
();

600 
fBTøöSigMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

601 
fBTøöSigMVAHi°
[
imtd
]->
	`Wrôe
();

602 
fBTøöBgdMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

603 
fBTøöBgdMVAHi°
[
imtd
]->
	`Wrôe
();

608 
	`Ba£Dú
()->
	`cd
();

610 
fM⁄ô‹Tªe
->
	`Wrôe
();

611 
	}
}

615 
	gTMVA
::
MëhodBoo°
::
	$Te°Cœssifiˇti⁄
()

617 
MëhodBa£
::
	`Te°Cœssifiˇti⁄
();

618 i‡(
fM⁄ô‹Boo°edMëhod
) {

619 
UI¡_t
 
∆o›
 = 
fTe°SigMVAHi°
.
	`size
();

620 i‡(
fMëhods
.
	`size
()<
∆o›
)Çloop = fMethods.size();

622 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

623 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

624 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

625 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

626 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)) {

627 
UI¡_t
 
imtd
=0; imtd<
∆o›
; imtd++) {

628 
fTe°SigMVAHi°
[
imtd
]->
	`Fûl
(
fMëhods
[imtd]->
	`GëMvaVÆue
(),
w
);

632 
UI¡_t
 
imtd
=0; imtd<
∆o›
; imtd++) {

633 
fTe°BgdMVAHi°
[
imtd
]->
	`Fûl
(
fMëhods
[imtd]->
	`GëMvaVÆue
(),
w
);

637 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

639 
	}
}

643 
	gTMVA
::
MëhodBoo°
::
	$WrôeEvÆu©i⁄Hi°osToFûe
(
Ty≥s
::
ETªeTy≥
 
åìty≥
)

645 
MëhodBa£
::
	`WrôeEvÆu©i⁄Hi°osToFûe
(
åìty≥
);

646 i‡(
åìty≥
==
Ty≥s
::
kTøöög
) ;

647 
UI¡_t
 
∆o›
 = 
fTe°SigMVAHi°
.
	`size
();

648 i‡(
fMëhods
.
	`size
()<
∆o›
)Çloop = fMethods.size();

649 i‡(
fM⁄ô‹Boo°edMëhod
) {

650 
TDúe˘‹y
* 
dú
=0;

651 
UI¡_t
 
imtd
=0;imtd<
∆o›
;imtd++) {

653 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
imtd
]);

654 i‡(!
mva
) ;

655 
dú
 = 
mva
->
	`Ba£Dú
();

656 i‡(
dú
==0) ;

657 
dú
->
	`cd
();

658 
fTe°SigMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

659 
fTe°SigMVAHi°
[
imtd
]->
	`Wrôe
();

660 
fTe°BgdMVAHi°
[
imtd
]->
	`SëDúe˘‹y
(
dú
);

661 
fTe°BgdMVAHi°
[
imtd
]->
	`Wrôe
();

664 
	}
}

669 
	gTMVA
::
MëhodBoo°
::
	$Pro˚ssO±i⁄s
()

671 
	}
}

676 
TMVA
::
MëhodBoo°
::
	$SögÀTøö
()

678 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

679 
MëhodBa£
* 
mëh
 = 
dy«mic_ˇ°
<MëhodBa£*>(
	`GëLa°Mëhod
());

680 i‡(
mëh
){

681 
mëh
->
	`SëSûítFûe
(
	`IsSûítFûe
());

682 if(
	`IsModñPîsi°í˚
()){

683 
TSåög
 
_fFûeDú

	`D©aInfo
().
	`GëName
();

684 
_fFûeDú
+="/"+
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeDú
;

685 
mëh
->
	`SëWeightFûeDú
(
_fFûeDú
);

687 
mëh
->
	`SëModñPîsi°í˚
(
	`IsModñPîsi°í˚
());

688 
mëh
->
	`TøöMëhod
();

690 
	}
}

696 
	gTMVA
::
MëhodBoo°
::
	$FödMVACut
(
MëhodBa£
 *
mëhod
)

698 i‡(!
mëhod
 || mëhod->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kDT
 ){ ;}

701 c⁄° 
I¡_t
 
nBös
=10001;

702 
DoubÀ_t
 
möMVA
=150000;

703 
DoubÀ_t
 
maxMVA
=-150000;

704 
L⁄g64_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

705 
	`GëEvít
(
õvt
);

706 
DoubÀ_t
 
vÆ
=
mëhod
->
	`GëMvaVÆue
();

708 i‡(
vÆ
>
maxMVA
) maxMVA=val;

709 i‡(
vÆ
<
möMVA
) minMVA=val;

711 
maxMVA
 = maxMVA+(maxMVA-
möMVA
)/
nBös
;

713 
DoubÀ_t
 
sum
 = 0.;

715 
TH1D
 *
mvaS
 = 
√w
 
	`TH1D
(
	`F‹m
("MVAS_%d",
fCuºítMëhodIdx
Ë,"",
nBös
,
möMVA
,
maxMVA
);

716 
TH1D
 *
mvaB
 = 
√w
 
	`TH1D
(
	`F‹m
("MVAB_%d",
fCuºítMëhodIdx
Ë,"",
nBös
,
möMVA
,
maxMVA
);

717 
TH1D
 *
mvaSC
 = 
√w
 
	`TH1D
(
	`F‹m
("MVASC_%d",
fCuºítMëhodIdx
),"",
nBös
,
möMVA
,
maxMVA
);

718 
TH1D
 *
mvaBC
 = 
√w
 
	`TH1D
(
	`F‹m
("MVABC_%d",
fCuºítMëhodIdx
),"",
nBös
,
möMVA
,
maxMVA
);

721 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

722 i‡(
fDëaûedM⁄ô‹ög
){

723 
ªsu…s
->
	`St‹e
(
mvaS
, 
	`F‹m
("MVAS_%d",
fCuºítMëhodIdx
));

724 
ªsu…s
->
	`St‹e
(
mvaB
, 
	`F‹m
("MVAB_%d",
fCuºítMëhodIdx
));

725 
ªsu…s
->
	`St‹e
(
mvaSC
,
	`F‹m
("MVASC_%d",
fCuºítMëhodIdx
));

726 
ªsu…s
->
	`St‹e
(
mvaBC
,
	`F‹m
("MVABC_%d",
fCuºítMëhodIdx
));

729 
L⁄g64_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

731 
DoubÀ_t
 
weight
 = 
	`GëEvít
(
õvt
)->
	`GëWeight
();

732 
DoubÀ_t
 
mvaVÆ
=
mëhod
->
	`GëMvaVÆue
();

733 
sum
 +=
weight
;

734 i‡(
	`D©aInfo
().
	`IsSig«l
(
	`GëEvít
(
õvt
))){

735 
mvaS
->
	`Fûl
(
mvaVÆ
,
weight
);

737 
mvaB
->
	`Fûl
(
mvaVÆ
,
weight
);

740 
Sï¨©i⁄Ba£
 *
£pGaö
;

755 
£pGaö
 = 
√w
 
	`GöiIndex
();

758 
DoubÀ_t
 
sTŸ
 = 
mvaS
->
	`GëSum
();

759 
DoubÀ_t
 
bTŸ
 = 
mvaB
->
	`GëSum
();

761 
mvaSC
->
	`SëBöC⁄ã¡
(1,
mvaS
->
	`GëBöC⁄ã¡
(1));

762 
mvaBC
->
	`SëBöC⁄ã¡
(1,
mvaB
->
	`GëBöC⁄ã¡
(1));

763 
DoubÀ_t
 
sSñ
=0;

764 
DoubÀ_t
 
bSñ
=0;

765 
DoubÀ_t
 
£∑øti⁄Gaö
=
£pGaö
->
	`GëSï¨©i⁄Gaö
(
sSñ
,
bSñ
,
sTŸ
,
bTŸ
);

766 
DoubÀ_t
 
mvaCut
=
mvaSC
->
	`GëBöLowEdge
(1);

767 
DoubÀ_t
 
sSñCut
=
sSñ
;

768 
DoubÀ_t
 
bSñCut
=
bSñ
;

772 
DoubÀ_t
 
mvaCutOrõ¡©i⁄
=1;

773 
I¡_t
 
ibö
=1;ibö<=
nBös
;ibin++){

774 
mvaSC
->
	`SëBöC⁄ã¡
(
ibö
,
mvaS
->
	`GëBöC⁄ã¡
(ibin)+mvaSC->GetBinContent(ibin-1));

775 
mvaBC
->
	`SëBöC⁄ã¡
(
ibö
,
mvaB
->
	`GëBöC⁄ã¡
(ibin)+mvaBC->GetBinContent(ibin-1));

777 
sSñ
=
mvaSC
->
	`GëBöC⁄ã¡
(
ibö
);

778 
bSñ
=
mvaBC
->
	`GëBöC⁄ã¡
(
ibö
);

784 i‡(
£∑øti⁄Gaö
 < 
£pGaö
->
	`GëSï¨©i⁄Gaö
(
sSñ
,
bSñ
,
sTŸ
,
bTŸ
)

787 
£∑øti⁄Gaö
 = 
£pGaö
->
	`GëSï¨©i⁄Gaö
(
sSñ
,
bSñ
,
sTŸ
,
bTŸ
);

789 
mvaCut
=
mvaSC
->
	`GëBöLowEdge
(
ibö
+1);

791 i‡(
sSñ
*(
bTŸ
-
bSñ
Ë> (
sTŸ
-sSñ)*bSñË
mvaCutOrõ¡©i⁄
=-1;

792 
mvaCutOrõ¡©i⁄
=1;

793 
sSñCut
=
sSñ
;

794 
bSñCut
=
bSñ
;

817 
∑ª¡Index
=
£pGaö
->
	`GëSï¨©i⁄Index
(
sTŸ
,
bTŸ
);

818 
À·Index
 =
£pGaö
->
	`GëSï¨©i⁄Index
(
sSñCut
,
bSñCut
);

819 
rightIndex
 =
£pGaö
->
	`GëSï¨©i⁄Index
(
sTŸ
-
sSñCut
,
bTŸ
-
bSñCut
);

820 
°d
::
cout


821 << " sTŸ=" << 
sTŸ


822 << " bTŸ=" << 
bTŸ


823 << " s="<<
sSñCut


824 << " b="<<
bSñCut


825 << " s2="<<(
sTŸ
-
sSñCut
)

826 << " b2="<<(
bTŸ
-
bSñCut
)

827 << " s/b(1)=" << 
sSñCut
/
bSñCut


828 << " s/b(2)=" << (
sTŸ
-
sSñCut
)/(
bTŸ
-
bSñCut
)

829 << " index bef‹êcut=" << 
∑ª¡Index


830 << "á·î:Üe·=" << 
À·Index


831 << "á·î:Ñight=" << 
rightIndex


832 << " sïGaö=" << 
∑ª¡Index
-–(
sSñCut
+
bSñCut
Ë* 
À·Index
 + (
sTŸ
-sSñCut+
bTŸ
-bSñCutË* 
rightIndex
 )/(sTot+bTot)

833 << " sïGaö="<<
£∑øti⁄Gaö


834 << " sïGaö="<<
£pGaö
->
	`GëSï¨©i⁄Gaö
(
sSñCut
,
bSñCut
,
sTŸ
,
bTŸ
)

835 << " cut=" << 
mvaCut


836 << " idx="<<
fCuºítMëhodIdx


837 << " cutOrõ¡©i⁄="<<
mvaCutOrõ¡©i⁄


838 << 
°d
::
ídl
;

840 
mëhod
->
	`SëSig«lRe„ªn˚Cut
(
mvaCut
);

841 
mëhod
->
	`SëSig«lRe„ªn˚CutOrõ¡©i⁄
(
mvaCutOrõ¡©i⁄
);

843 
ªsu…s
->
	`GëHi°
("Sï¨©i⁄Gaö")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1,
£∑øti⁄Gaö
);

846 
	`Log
(Ë<< 
kDEBUG
 << "(ﬁd sãpËSëtög mëhod cuàtÿ" <<
mëhod
->
	`GëSig«lRe„ªn˚Cut
()<< 
Endl
;

848 if(
	`IsSûítFûe
())

850 
mvaS
 ->
	`Dñëe
();

851 
mvaB
 ->
	`Dñëe
();

852 
mvaSC
->
	`Dñëe
();

853 
mvaBC
->
	`Dñëe
();

855 
	}
}

859 
DoubÀ_t
 
	gTMVA
::
MëhodBoo°
::
	$SögÀBoo°
(
MëhodBa£
* 
mëhod
)

861 
DoubÀ_t
 
ªtu∫VÆ
=-1;

864 i‡(
fBoo°Ty≥
=="AdaBoo°"Ë
ªtu∫VÆ
 = 
this
->
	`AdaBoo°
 (
mëhod
,1);

865 i‡(
fBoo°Ty≥
=="RólAdaBoo°"Ë
ªtu∫VÆ
 = 
this
->
	`AdaBoo°
 (
mëhod
,0);

866 i‡(
fBoo°Ty≥
=="Baggög"Ë
ªtu∫VÆ
 = 
this
->
	`Baggög
 ();

868 
	`Log
(Ë<< 
kFATAL
 << "<Boo°> unknow¿boo° o±i⁄ " << 
fBoo°Ty≥
<< " cÆÀd" << 
Endl
;

870 
fMëhodWeight
.
	`push_back
(
ªtu∫VÆ
);

871  
ªtu∫VÆ
;

872 
	}
}

876 
DoubÀ_t
 
	gTMVA
::
MëhodBoo°
::
	$AdaBoo°
(
MëhodBa£
* 
mëhod
, 
Boﬁ_t
 
dis¸ëeAdaBoo°
)

878 i‡(!
mëhod
) {

879 
	`Log
(Ë<< 
kWARNING
 << " AdaBoo° cÆÀd wôhouà˛assifõ∏ª„ªn˚ -Çìded f‹ cÆcuœtög AdaBoo° " << 
Endl
;

883 
Flﬂt_t
 
w
,
v
; 
Boﬁ_t
 
sig
=
kTRUE
;

884 
DoubÀ_t
 
sumAŒ
=0, 
sumWr⁄g
=0;

885 
Boﬁ_t
* 
Wr⁄gDëe˘i⁄
=
√w
 Boﬁ_t[
	`GëNEvíts
()];

886 
QuickMVAProbE°im©‹
 *
MVAProb
=
NULL
;

888 i‡(
dis¸ëeAdaBoo°
) {

889 
	`FödMVACut
(
mëhod
);

890 
	`Log
(Ë<< 
kDEBUG
 << " individuÆ mv®cuàvÆuê" << 
mëhod
->
	`GëSig«lRe„ªn˚Cut
(Ë<< 
Endl
;

892 
MVAProb
=
√w
 
TMVA
::
	`QuickMVAProbE°im©‹
();

899 
L⁄g64_t
 
evt
=0;Évt<
	`GëNEvíts
();Évt++) {

900 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
evt
);

901 
MVAProb
->
	`AddEvít
(
fMVAvÆues
->
	`©
(
evt
),
ev
->
	`GëWeight
(),ev->
	`GëCœss
());

906 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++Ë
Wr⁄gDëe˘i⁄
[õvt]=
kTRUE
;

909 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

910 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

911 
sig
=
	`D©aInfo
().
	`IsSig«l
(
ev
);

912 
v
 = 
fMVAvÆues
->
	`©
(
õvt
);

913 
w
 = 
ev
->
	`GëWeight
();

914 
sumAŒ
 +
w
;

915 if(!
	`IsSûítFûe
())

917 i‡(
fM⁄ô‹Boo°edMëhod
) {

918 i‡(
sig
) {

919 
fBTøöSigMVAHi°
[
fCuºítMëhodIdx
]->
	`Fûl
(
v
,
w
);

920 
fTøöSigMVAHi°
[
fCuºítMëhodIdx
]->
	`Fûl
(
v
,
ev
->
	`GëOrigöÆWeight
());

923 
fBTøöBgdMVAHi°
[
fCuºítMëhodIdx
]->
	`Fûl
(
v
,
w
);

924 
fTøöBgdMVAHi°
[
fCuºítMëhodIdx
]->
	`Fûl
(
v
,
ev
->
	`GëOrigöÆWeight
());

929 i‡(
dis¸ëeAdaBoo°
){

930 i‡(
sig
 =
mëhod
->
	`IsSig«lLike
(
fMVAvÆues
->
	`©
(
õvt
))){

931 
Wr⁄gDëe˘i⁄
[
õvt
]=
kFALSE
;

933 
Wr⁄gDëe˘i⁄
[
õvt
]=
kTRUE
;

934 
sumWr⁄g
+=
w
;

937 
DoubÀ_t
 
mvaProb
 = 
MVAProb
->
	`GëMVAProbAt
((
Flﬂt_t
)
fMVAvÆues
->
	`©
(
õvt
));

938 
mvaProb
 = 2*(mvaProb-0.5);

939 
I¡_t
 
åueTy≥
;

940 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
åueTy≥
 = 1;

941 
åueTy≥
 = -1;

942 
sumWr⁄g
+
w
*
åueTy≥
*
mvaProb
;

946 
fMëhodEº‹
=
sumWr⁄g
/
sumAŒ
;

951 
DoubÀ_t
 
boo°Weight
=0;

953 i‡(
fMëhodEº‹
 == 0) {

954 
	`Log
(Ë<< 
kWARNING
 << "You∏˛assifõ∏w‹kedÖî„˘ly o¿thêåaöög sam∂ê--> sîiou†ovîåaöögÉx≥˘edándÇÿboo°ög d⁄ê" << 
Endl
;

957 i‡(
dis¸ëeAdaBoo°
)

958 
boo°Weight
 = 
TM©h
::
	`Log
((1.-
fMëhodEº‹
)/fMëhodEº‹)*
fAdaBoo°Bëa
;

960 
boo°Weight
 = 
TM©h
::
	`Log
((1.+
fMëhodEº‹
)/(1-fMëhodEº‹))*
fAdaBoo°Bëa
;

970 
DoubÀ_t
 
√wSum
=0., 
ﬁdSum
=0.;

973 
DoubÀ_t
 
boo°Á˘‹
 = 
TM©h
::
	`Exp
(
boo°Weight
);

976 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

977 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

978 
ﬁdSum
 +
ev
->
	`GëWeight
();

979 i‡(
dis¸ëeAdaBoo°
){

981 i‡(
Wr⁄gDëe˘i⁄
[
õvt
] && 
boo°Weight
 != 0) {

982 i‡(
ev
->
	`GëWeight
(Ë> 0Ëev->
	`SˇÀBoo°Weight
(
boo°Á˘‹
);

983 
ev
->
	`SˇÀBoo°Weight
(1./
boo°Á˘‹
);

991 
DoubÀ_t
 
mvaProb
 = 
MVAProb
->
	`GëMVAProbAt
((
Flﬂt_t
)
fMVAvÆues
->
	`©
(
õvt
));

992 
mvaProb
 = 2*(mvaProb-0.5);

995 
I¡_t
 
åueTy≥
=1;

996 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
åueTy≥
 = 1;

997 
åueTy≥
 = -1;

999 
boo°Á˘‹
 = 
TM©h
::
	`Exp
(-1*
boo°Weight
*
åueTy≥
*
mvaProb
);

1000 i‡(
ev
->
	`GëWeight
(Ë> 0Ëev->
	`SˇÀBoo°Weight
(
boo°Á˘‹
);

1001 
ev
->
	`SˇÀBoo°Weight
(1./
boo°Á˘‹
);

1004 
√wSum
 +
ev
->
	`GëWeight
();

1007 
DoubÀ_t
 
n‹mWeight
 = 
ﬁdSum
/
√wSum
;

1009 
DoubÀ_t
 
n‹mSig
=0, 
n‹mBkg
=0;

1010 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1011 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

1012 
ev
->
	`SˇÀBoo°Weight
(
n‹mWeight
);

1013 i‡(
ev
->
	`GëCœss
()Ë
n‹mSig
+Ûv->
	`GëWeight
();

1014 
n‹mBkg
+=
ev
->
	`GëWeight
();

1017 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

1018 
ªsu…s
->
	`GëHi°
("SovîBtŸÆ")->
	`SëBöC⁄ã¡
(
fCuºítMëhodIdx
+1, 
n‹mSig
/
n‹mBkg
);

1020 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1021 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

1023 i‡(
ev
->
	`GëCœss
()Ëev->
	`SˇÀBoo°Weight
(
ﬁdSum
/
n‹mSig
/2);

1024 
ev
->
	`SˇÀBoo°Weight
(
ﬁdSum
/
n‹mBkg
/2);

1028 
dñëe
[] 
Wr⁄gDëe˘i⁄
;

1029 i‡(
MVAProb
Ë
dñëe
 MVAProb;

1031 
fBoo°Weight
 = 
boo°Weight
;

1033  
boo°Weight
;

1034 
	}
}

1040 
DoubÀ_t
 
	gTMVA
::
MëhodBoo°
::
	$Baggög
()

1042 
TR™dom3
 *
å™dom
 = 
√w
 
	`TR™dom3
(
fR™domSìd
+
fMëhods
.
	`size
());

1043 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1044 c⁄° 
Evít
* 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

1045 
ev
->
	`SëBoo°Weight
(
å™dom
->
	`Poiss⁄D
(
fBaggedSam∂eFø˘i⁄
));

1047 
fBoo°Weight
 = 1;

1049 
	}
}

1058 
	gTMVA
::
MëhodBoo°
::
	$GëHñpMesßge
() const

1060 
	`Log
(Ë<< 
Endl
;

1061 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1062 
	`Log
(Ë<< 
Endl
;

1063 
	`Log
(Ë<< "Thi†mëhod comböe†£vîÆ cœssifõ∏o‡⁄ê•ecõ†öá "<<
Endl
;

1064 
	`Log
(Ë<< "sögÀ mu…iv¨üã qu™tôy vüÅhêboo°álg‹ôhm." << 
Endl
;

1065 
	`Log
(Ë<< "thêouçuài†®weighãd sum ovîáŒ individuÆ cœssifõrs" <<
Endl
;

1066 
	`Log
(Ë<< "By deÁu…,ÅhêAdaBoo° mëhod i†em∂oyed, which give†" << 
Endl
;

1067 
	`Log
(Ë<< "evít†th© wîêmis˛assifõd i¿thê¥eviou†åìáÜ¨gî " << 
Endl
;

1068 
	`Log
(Ë<< "weighàöÅhêåaöög o‡thêfﬁlowög cœssifõr."<<
Endl
;

1069 
	`Log
(Ë<< "O±i⁄Æly, Bagged boo°ög c™álsÿbê≠∂õd." << 
Endl
;

1070 
	`Log
(Ë<< 
Endl
;

1071 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1072 
	`Log
(Ë<< 
Endl
;

1073 
	`Log
(Ë<< "Thêmo° imp‹è¡Ö¨amëî i¿thêc⁄figuøti⁄ i†thê"<<
Endl
;

1074 
	`Log
(Ë<< "numbî o‡boo°†≠∂õd (Boo°_NumË™dÅhêchoi˚ o‡boo°ög"<<
Endl
;

1075 
	`Log
(Ë<< "(Boo°_Ty≥), which c™ bê£àtÿeôhî AdaBoo° o∏Baggög." << 
Endl
;

1076 
	`Log
(Ë<< "AdaBoo°ög: Thêmo° imp‹è¡Ö¨amëî†öÅhi†c⁄figuøti⁄" <<
Endl
;

1077 
	`Log
(Ë<< "i†thêbë®∑ømëî (Boo°_AdaBoo°BëaË " << 
Endl
;

1078 
	`Log
(Ë<< "Whí boo°ögáÜöó∏˛assifõr, iài†somëime†adv™ègeous"<<
Endl
;

1079 
	`Log
(Ë<< "tÿå™sf‹mÅhêMVA ouçuàn⁄-löóæy. Thêfﬁlowög o±i⁄s" <<
Endl
;

1080 
	`Log
(Ë<< "¨êavaûabÀ: sãp,Üog,ánd mömax,ÅhêdeÁu… i†nÿå™sf‹m."<<
Endl
;

1081 
	`Log
(Ë<<
Endl
;

1082 
	`Log
(Ë<< "Somê˛assifõr†¨êh¨dÅÿboo°ánd dÿnŸ im¥ovêmuch in"<<
Endl
;

1083 
	`Log
(Ë<< "theúÖîf‹m™˚ by boo°ögÅhem, somêeví slighéy dëîi‹©e"<< 
Endl
;

1084 
	`Log
(Ë<< "duêtÿthêboo°ög." <<
Endl
;

1085 
	`Log
(Ë<< "Thêbookög o‡thêboo° mëhod i†•ecü»sö˚ iàªquúes"<<
Endl
;

1086 
	`Log
(Ë<< "thêbooög o‡thêmëhodÅÿbêboo°edándÅhêboo° it£lf."<<
Endl
;

1087 
	`Log
(Ë<< "Thi†i†sﬁved by bookögÅhêmëhodÅÿbêboo°edándÅÿadd"<<
Endl
;

1088 
	`Log
(Ë<< "Æ»Boo°Ö¨amëîs, whicháŒ begö wôh \"Boo°_\"Åÿthe"<<
Endl
;

1089 
	`Log
(Ë<< "›ti⁄†°rög. ThêÁ˘‹y sï¨©e†thê›ti⁄†™d inôüãs"<<
Endl
;

1090 
	`Log
(Ë<< "thêboo°Öro˚ss. ThêTMVA ma¸ÿdúe˘‹y c⁄èö†thêexam∂e"<<
Endl
;

1091 
	`Log
(Ë<< "ma¸ÿ\"Boo°.C\"" <<
Endl
;

1092 
	}
}

1096 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodBoo°
::
	$Cª©eR™kög
()

1099 
	}
}

1104 
DoubÀ_t
 
	gTMVA
::
MëhodBoo°
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

1106 
DoubÀ_t
 
mvaVÆue
 = 0;

1107 
DoubÀ_t
 
n‹m
 = 0;

1108 
DoubÀ_t
 
ïsû⁄
 = 
TM©h
::
	`Exp
(-1.);

1110 
UI¡_t
 
i
=0;i< 
fMëhods
.
	`size
(); i++){

1111 
MëhodBa£
* 
m
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
i
]);

1112 i‡(
m
==0) ;

1113 
DoubÀ_t
 
vÆ
 = 
fTmpEvít
 ? 
m
->
	`GëMvaVÆue
(fTmpEvent) : m->GetMvaValue();

1114 
DoubÀ_t
 
sigcut
 = 
m
->
	`GëSig«lRe„ªn˚Cut
();

1117 i‡(
fTønsf‹mSåög
 == "linear"){

1120 i‡(
fTønsf‹mSåög
 == "log"){

1121 i‡(
vÆ
 < 
sigcut
) val = sigcut;

1123 
vÆ
 = 
TM©h
::
	`Log
((vÆ-
sigcut
)+
ïsû⁄
);

1125 i‡(
fTønsf‹mSåög
 == "step" ){

1126 i‡(
m
->
	`IsSig«lLike
(
vÆ
)) val = 1.;

1127 
vÆ
 = -1.;

1129 i‡(
fTønsf‹mSåög
 == "gauss"){

1130 
vÆ
 = 
TM©h
::
	`Gaus
((vÆ-
sigcut
),1);

1133 
	`Log
(Ë<< 
kFATAL
 << "îr‹ unknow¿å™sf‹m©i⁄ " << 
fTønsf‹mSåög
<<
Endl
;

1135 
mvaVÆue
+=
vÆ
*
fMëhodWeight
[
i
];

1136 
n‹m
 +=
fMëhodWeight
[
i
];

1139 
mvaVÆue
/=
n‹m
;

1141 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

1143  
mvaVÆue
;

1144 
	}
}

1165 
DoubÀ_t
 
	gTMVA
::
MëhodBoo°
::
	$GëBoo°ROCI¡egøl
(
Boﬁ_t
 
sögÀMëhod
, 
Ty≥s
::
ETªeTy≥
 
eTT
, Boﬁ_à
CÆcOvîœpI¡îgøl
)

1168 
	`D©a
()->
	`SëCuºítTy≥
(
eTT
);

1170 
MëhodBa£
* 
mëhod
 = 
sögÀMëhod
 ? 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
.
	`back
()) : 0;

1174 i‡(
sögÀMëhod
 && !
mëhod
) {

1175 
	`Log
(Ë<< 
kFATAL
 << " What do you do? Your method:"

1176 << 
fMëhods
.
	`back
()->
	`GëName
()

1178 << 
Endl
;

1179 
°d
::
	`exô
(1);

1181 
DoubÀ_t
 
îr
 = 0.0;

1186 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`OldMëhodWeight
(
fMëhodWeight
);

1187 i‡(!
sögÀMëhod
) {

1189 
DoubÀ_t
 
AŒMëhodsWeight
 = 0;

1190 
UI¡_t
 
i
=0; i<=
fCuºítMëhodIdx
; i++)

1191 
AŒMëhodsWeight
 +
fMëhodWeight
.
	`©
(
i
);

1193 i‡(
AŒMëhodsWeight
 != 0.0) {

1194 
UI¡_t
 
i
=0; i<=
fCuºítMëhodIdx
; i++)

1195 
fMëhodWeight
[
i
] /
AŒMëhodsWeight
;

1200 
DoubÀ_t
 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
, 
ƒms
 = 10;

1201 
°d
::
ve˘‹
 <
Flﬂt_t
>* 
mvaRes
;

1202 i‡(
sögÀMëhod
 && 
eTT
==
Ty≥s
::
kTøöög
)

1203 
mvaRes
 = 
fMVAvÆues
;

1205 
mvaRes
 = 
√w
 
°d
::
ve˘‹
 <
Flﬂt_t
>(
	`GëNEvíts
());

1206 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1207 
	`GëEvít
(
õvt
);

1208 (*
mvaRes
)[
õvt
] = 
sögÀMëhod
 ? 
mëhod
->
	`GëMvaVÆue
(&
îr
) : GetMvaValue(&err);

1213 i‡(!
sögÀMëhod
)

1214 
fMëhodWeight
 = 
OldMëhodWeight
;

1217 
I¡_t
 
sig«lCœss
 = 0;

1218 i‡(
	`D©aInfo
().
	`GëCœssInfo
("Signal") != 0) {

1219 
sig«lCœss
 = 
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

1221 
	`gToﬁs
().
	`CompuãSèt
–
	`GëEvítCﬁÀ˘i⁄
(
eTT
), 
mvaRes
,

1222 
mónS
, 
mónB
, 
rmsS
, 
rmsB
, 
xmö
, 
xmax
, 
sig«lCœss
 );

1224 
fNbös
 = 
	`gC⁄fig
().
fV¨übÀPlŸtög
.
fNbösXOfROCCurve
;

1225 
xmö
 = 
TM©h
::
	`Max
–TM©h::
	`Mö
(
mónS
 - 
ƒms
*
rmsS
, 
mónB
 -Çrms*
rmsB
 ), xmin );

1226 
xmax
 = 
TM©h
::
	`Mö
–TM©h::
	`Max
(
mónS
 + 
ƒms
*
rmsS
, 
mónB
 +Çrms*
rmsB
 ), xmax ) + 0.0001;

1229 
TH1
* 
mva_s
 = 
√w
 
	`TH1F
–"MVA_S", "MVA_S", 
fNbös
, 
xmö
, 
xmax
 );

1230 
TH1
* 
mva_b
 = 
√w
 
	`TH1F
–"MVA_B", "MVA_B", 
fNbös
, 
xmö
, 
xmax
 );

1231 
TH1
 *
mva_s_ovîœp
=0, *
mva_b_ovîœp
=0;

1232 i‡(
CÆcOvîœpI¡îgøl
) {

1233 
mva_s_ovîœp
 = 
√w
 
	`TH1F
–"MVA_S_OVERLAP", "MVA_S_OVERLAP", 
fNbös
, 
xmö
, 
xmax
 );

1234 
mva_b_ovîœp
 = 
√w
 
	`TH1F
–"MVA_B_OVERLAP", "MVA_B_OVERLAP", 
fNbös
, 
xmö
, 
xmax
 );

1236 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1237 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

1238 
Flﬂt_t
 
w
 = (
eTT
==
Ty≥s
::
kTe°ög
 ? 
ev
->
	`GëWeight
(Ë:Év->
	`GëOrigöÆWeight
());

1239 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
mva_s
->
	`Fûl
–(*
mvaRes
)[
õvt
], 
w
 );

1240 
mva_b
->
	`Fûl
–(*
mvaRes
)[
õvt
], 
w
 );

1242 i‡(
CÆcOvîœpI¡îgøl
) {

1243 
Flﬂt_t
 
w_ov
 = 
ev
->
	`GëWeight
();

1244 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
))

1245 
mva_s_ovîœp
->
	`Fûl
–(*
mvaRes
)[
õvt
], 
w_ov
 );

1247 
mva_b_ovîœp
->
	`Fûl
–(*
mvaRes
)[
õvt
], 
w_ov
 );

1250 
	`gToﬁs
().
	`N‹mHi°
–
mva_s
 );

1251 
	`gToﬁs
().
	`N‹mHi°
–
mva_b
 );

1252 
PDF
 *
fS
 = 
√w
 
	`PDF
–"PDF Sig", 
mva_s
, PDF::
kS∂öe2
 );

1253 
PDF
 *
fB
 = 
√w
 
	`PDF
–"PDF Bkg", 
mva_b
, PDF::
kS∂öe2
 );

1256 
DoubÀ_t
 
ROC
 = 
MëhodBa£
::
	`GëROCI¡egøl
(
fS
, 
fB
);

1259 i‡(
CÆcOvîœpI¡îgøl
) {

1260 
	`gToﬁs
().
	`N‹mHi°
–
mva_s_ovîœp
 );

1261 
	`gToﬁs
().
	`N‹mHi°
–
mva_b_ovîœp
 );

1263 
fOvîœp_öãgøl
 = 0.0;

1264 
I¡_t
 
bö
=1; bö<=
mva_s_ovîœp
->
	`GëNbösX
(); bin++){

1265 
DoubÀ_t
 
bc_s
 = 
mva_s_ovîœp
->
	`GëBöC⁄ã¡
(
bö
);

1266 
DoubÀ_t
 
bc_b
 = 
mva_b_ovîœp
->
	`GëBöC⁄ã¡
(
bö
);

1267 i‡(
bc_s
 > 0.0 && 
bc_b
 > 0.0)

1268 
fOvîœp_öãgøl
 +
TM©h
::
	`Mö
(
bc_s
, 
bc_b
);

1271 
dñëe
 
mva_s_ovîœp
;

1272 
dñëe
 
mva_b_ovîœp
;

1275 
dñëe
 
mva_s
;

1276 
dñëe
 
mva_b
;

1277 
dñëe
 
fS
;

1278 
dñëe
 
fB
;

1279 i‡(!(
sögÀMëhod
 && 
eTT
==
Ty≥s
::
kTøöög
)Ë
dñëe
 
mvaRes
;

1281 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

1283  
ROC
;

1284 
	}
}

1286 
	gTMVA
::
MëhodBoo°
::
	$CÆcMVAVÆues
()

1291 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

1292 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
.
	`back
());

1293 i‡(!
mëhod
) {

1294 
	`Log
(Ë<< 
kFATAL
 << "dy«mi¯ˇ°ÅÿMëhodBa£* faûed" <<
Endl
;

1298 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1299 
	`GëEvít
(
õvt
);

1300 
fMVAvÆues
->
	`©
(
õvt
Ë
mëhod
->
	`GëMvaVÆue
();

1306 
	}
}

1314 
	gTMVA
::
MëhodBoo°
::
	$M⁄ô‹Boo°
–
Ty≥s
::
EBoo°Sège
 
°age
 , 
UI¡_t
 
mëhodIndex
 )

1316 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

1318 i‡(
	`GëCuºítMëhod
(
mëhodIndex
)->
	`GëMëhodTy≥
(Ë=
TMVA
::
Ty≥s
::
kDT
) {

1319 
TMVA
::
MëhodDT
* 
cuºítDT
=
dy«mic_ˇ°
<TMVA::MëhodDT*>(
	`GëCuºítMëhod
(
mëhodIndex
));

1320 i‡(
cuºítDT
){

1321 i‡(
°age
 =
Ty≥s
::
kBoo°ProcBegö
){

1322 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1I
("NodesBef‹ePrunög","node†bef‹ê¥unög",
this
->
	`GëBoo°Num
(),0,this->GetBoostNum()),"NodesBeforePruning");

1323 
ªsu…s
->
	`St‹e
(
√w
 
	`TH1I
("NodesA·îPrunög","node†a·îÖrunög",
this
->
	`GëBoo°Num
(),0,this->GetBoostNum()),"NodesAfterPruning");

1326 i‡(
°age
 =
Ty≥s
::
kBef‹eTøöög
){

1328 i‡(
°age
 =
Ty≥s
::
kBef‹eBoo°ög
){

1329 
ªsu…s
->
	`GëHi°
("NodesBef‹ePrunög")->
	`SëBöC⁄ã¡
(
mëhodIndex
+1,
cuºítDT
->
	`GëNNodesBef‹ePrunög
());

1330 
ªsu…s
->
	`GëHi°
("NodesA·îPrunög")->
	`SëBöC⁄ã¡
(
mëhodIndex
+1,
cuºítDT
->
	`GëNNodes
());

1332 i‡(
°age
 =
Ty≥s
::
kA·îBoo°ög
){

1335 i‡(
°age
 !
Ty≥s
::
kBoo°ProcEnd
){

1336 
	`Log
(Ë<< 
kINFO
 << "<Train>áverageÇumber ofÇodes before/afterÖruning : "

1337 << 
ªsu…s
->
	`GëHi°
("NodesBef‹ePrunög")->
	`GëMón
() << " / "

1338 << 
ªsu…s
->
	`GëHi°
("NodesA·îPrunög")->
	`GëMón
()

1339 << 
Endl
;

1343 }i‡(
	`GëCuºítMëhod
(
mëhodIndex
)->
	`GëMëhodTy≥
(Ë=
TMVA
::
Ty≥s
::
kFishî
) {

1344 i‡(
°age
 =
Ty≥s
::
kA·îBoo°ög
){

1345 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

1348 i‡(
mëhodIndex
 < 3){

1349 
	`Log
(Ë<< 
kDEBUG
 << "No detailed boost monitoring for "

1350 << 
	`GëCuºítMëhod
(
mëhodIndex
)->
	`GëMëhodName
()

1351 << " yëávaûabÀ " << 
Endl
;

1357 i‡(
°age
 =
Ty≥s
::
kBef‹eBoo°ög
){

1359 i‡(
fDëaûedM⁄ô‹ög
){

1361 i‡(
	`D©aInfo
().
	`GëNV¨übÀs
() == 2) {

1362 
ªsu…s
->
	`St‹e
(
√w
 
	`TH2F
(
	`F‹m
("EvítDi°Sig_%d",
mëhodIndex
),Form("EventDistSig_%d",methodIndex),100,0,7,100,0,7));

1363 
ªsu…s
->
	`GëHi°
(
	`F‹m
("EvítDi°Sig_%d",
mëhodIndex
))->
	`SëM¨kîCﬁ‹
(4);

1364 
ªsu…s
->
	`St‹e
(
√w
 
	`TH2F
(
	`F‹m
("EvítDi°Bkg_%d",
mëhodIndex
),Form("EventDistBkg_%d",methodIndex),100,0,7,100,0,7));

1365 
ªsu…s
->
	`GëHi°
(
	`F‹m
("EvítDi°Bkg_%d",
mëhodIndex
))->
	`SëM¨kîCﬁ‹
(2);

1367 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

1368 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1369 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

1370 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

1371 
Flﬂt_t
 
v0

ev
->
	`GëVÆue
(0);

1372 
Flﬂt_t
 
v1

ev
->
	`GëVÆue
(1);

1374 
TH2
* 
h
;

1375 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
h
=
ªsu…s
->
	`GëHi°2D
(
	`F‹m
("EvítDi°Sig_%d",
mëhodIndex
));

1376 
h
=
ªsu…s
->
	`GëHi°2D
(
	`F‹m
("EvítDi°Bkg_%d",
mëhodIndex
));

1377 i‡(
h
Ëh->
	`Fûl
(
v0
,
v1
,
w
);

1384 
	}
}

	@src/MethodCFMlpANN.cxx

64 
	~"TMVA/MëhodCFMÕANN.h
"

66 
	~"TMVA/CœssifõrFa˘‹y.h
"

67 
	~"TMVA/C⁄figuøbÀ.h
"

68 
	~"TMVA/D©aSë.h
"

69 
	~"TMVA/D©aSëInfo.h
"

70 
	~"TMVA/IMëhod.h
"

71 
	~"TMVA/MëhodBa£.h
"

72 
	~"TMVA/MëhodCFMÕANN_def.h
"

73 
	~"TMVA/MsgLoggî.h
"

74 
	~"TMVA/Toﬁs.h
"

75 
	~"TMVA/Ty≥s.h
"

77 
	~"TM©rix.h
"

78 
	~"TObjSåög.h
"

79 
	~"Rio°ªam.h
"

80 
	~"TM©h.h
"

82 
	~<c°dlib
>

83 
	~<io°ªam
>

84 
	~<°rög
>

88 
	$REGISTER_METHOD
(
CFMÕANN
)

90 
usög
 
°d
::
°rög°ªam
;

91 
usög
 
°d
::
make_∑ú
;

92 
usög
 
°d
::
©oi
;

94 
	`CœssImp
(
TMVA
::
MëhodCFMÕANN
);

132 
TMVA
::
MëhodCFMÕANN
::
	$MëhodCFMÕANN
–c⁄° 
TSåög
& 
jobName
,

133 c⁄° 
TSåög
& 
mëhodTôÀ
,

134 
D©aSëInfo
& 
theD©a
,

135 c⁄° 
TSåög
& 
theO±i⁄
 ) :

136 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kCFMÕANN
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

137 
	`fD©a
(0),

138 
	`fCœss
(0),

139 
	`fNœyîs
(0),

140 
	`fNcy˛es
(0),

141 
	`fNodes
(0),

142 
	`fYNN
(0),

143 
	$MëhodCFMÕANN_n£l
(0)

145 
MëhodCFMÕANN_Utûs
::
	`SëLoggî
(&
	`Log
());

146 
	}
}

151 
	gTMVA
::
MëhodCFMÕANN
::
	$MëhodCFMÕANN
–
D©aSëInfo
& 
theD©a
,

152 c⁄° 
TSåög
& 
theWeightFûe
):

153 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kCFMÕANN
, 
theD©a
, 
theWeightFûe
),

154 
	`fD©a
(0),

155 
	`fCœss
(0),

156 
	`fNœyîs
(0),

157 
	`fNcy˛es
(0),

158 
	`fNodes
(0),

159 
	`fYNN
(0),

160 
	$MëhodCFMÕANN_n£l
(0)

162 
	}
}

167 
Boﬁ_t
 
	gTMVA
::
MëhodCFMÕANN
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

169 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

170  
kFALSE
;

171 
	}
}

178 
	gTMVA
::
MëhodCFMÕANN
::
	$De˛¨eO±i⁄s
()

180 
	`De˛¨eO±i⁄Ref
–
fNcy˛es
 =3000, "NCycles", "Number ofÅraining cycles" );

181 
	`De˛¨eO±i⁄Ref
–
fLayîS≥c
="N,N-1", "HiddenLayers", "Specification of hiddenÜayerárchitecture" );

182 
	}
}

187 
	gTMVA
::
MëhodCFMÕANN
::
	$Pro˚ssO±i⁄s
()

189 
fNodes
 = 
√w
 
I¡_t
[20];

190 
fNœyîs
 = 2;

191 
I¡_t
 
cuºítHiddíLayî
 = 1;

192 
TSåög
 
	`œyîS≥c
(
fLayîS≥c
);

193 
œyîS≥c
.
	`Lígth
()>0) {

194 
TSåög
 
sToAdd
 = "";

195 i‡(
œyîS≥c
.
	`Fú°
(',')<0) {

196 
sToAdd
 = 
œyîS≥c
;

197 
œyîS≥c
 = "";

200 
sToAdd
 = 
	`œyîS≥c
(0,
œyîS≥c
.
	`Fú°
(','));

201 
œyîS≥c
 = 
	`œyîS≥c
÷ayîS≥c.
	`Fú°
(',')+1,œyîS≥c.
	`Lígth
());

203 
I¡_t
 
nNodes
 = 0;

204 i‡(
sToAdd
.
	`BegösWôh
("N"Ë|| sToAdd.BegösWôh("n")Ë{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`GëNv¨
(); }

205 
nNodes
 +
	`©oi
(
sToAdd
);

206 
fNodes
[
cuºítHiddíLayî
++] = 
nNodes
;

207 
fNœyîs
++;

209 
fNodes
[0] = 
	`GëNv¨
();

210 
fNodes
[
fNœyîs
-1] = 2;

212 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

213 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇot yetávailable for method: "

214 << 
	`GëMëhodTy≥Name
()

216 << 
Endl
;

219 
	`Log
(Ë<< 
kINFO
 << "Use configuration (nodesÖerÜayer): in=";

220 
I¡_t
 
i
=0; i<
fNœyîs
-1; i++Ë
	`Log
(Ë<< 
kINFO
 << 
fNodes
[i] << ":";

221 
	`Log
(Ë<< 
kINFO
 << 
fNodes
[
fNœyîs
-1] << "=out" << 
Endl
;

224 
	`Log
(Ë<< "U£ " << 
fNcy˛es
 << "Åøöög cy˛es" << 
Endl
;

226 
I¡_t
 
nEvtTøö
 = 
	`D©a
()->
	`GëNTøöögEvíts
();

229 i‡(
nEvtTøö
>0) {

232 
fD©a
 = 
√w
 
	`TM©rix
–
nEvtTøö
, 
	`GëNv¨
() );

233 
fCœss
 = 
√w
 
°d
::
ve˘‹
<
I¡_t
>–
nEvtTøö
 );

237 
UI¡_t
 
iv¨
;

238 
I¡_t
 
õvt
=0; ievt<
nEvtTøö
; ievt++) {

239 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
õvt
);

242 (*
fCœss
)[
õvt
] = 
	`D©aInfo
().
	`IsSig«l
(
ev
) ? 1 : 2;

245 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

246 (*
fD©a
)–
õvt
, 
iv¨
 ) = 
ev
->
	`GëVÆue
(ivar);

254 
	}
}

259 
	gTMVA
::
MëhodCFMÕANN
::
	$Inô
( )

262 
	`SëN‹mÆi£d
–
kTRUE
 );

265 
MëhodCFMÕANN_n£l
 = 0;

266 
	}
}

271 
	gTMVA
::
MëhodCFMÕANN
::~
	$MëhodCFMÕANN
( )

273 
dñëe
 
fD©a
;

274 
dñëe
 
fCœss
;

275 
dñëe
[] 
fNodes
;

277 i‡(
fYNN
!=0) {

278 
I¡_t
 
i
=0; i<
fNœyîs
; i++Ë
dñëe
[] 
fYNN
[i];

279 
dñëe
[] 
fYNN
;

280 
fYNN
=0;

282 
	}
}

287 
	gTMVA
::
MëhodCFMÕANN
::
	$Tøö
( )

289 
DoubÀ_t
 
	`dumD©
(0);

290 
I¡_t
 
	`¡øö
(
	`D©a
()->
	`GëNTøöögEvíts
());

291 
I¡_t
 
	`¡e°
(0);

292 
I¡_t
 
	`nv¨
(
	`GëNv¨
());

293 
I¡_t
 
	`∆ayîs
(
fNœyîs
);

294 
I¡_t
 *
nodes
 = 
√w
 I¡_t[
∆ayîs
];

295 
I¡_t
 
	`ncy˛es
(
fNcy˛es
);

297 
I¡_t
 
i
=0; i<
∆ayîs
; i++Ë
nodes
[i] = 
fNodes
[i];

299 i‡(
fYNN
 != 0) {

300 
I¡_t
 
i
=0; i<
fNœyîs
; i++Ë
dñëe
[] 
fYNN
[i];

301 
dñëe
[] 
fYNN
;

302 
fYNN
 = 0;

304 
fYNN
 = 
√w
 
DoubÀ_t
*[
∆ayîs
];

305 
I¡_t
 
œyî
=0;Üayî<
∆ayîs
;Üayer++)

306 
fYNN
[
œyî
] = 
√w
 
DoubÀ_t
[
fNodes
[layer]];

309 #i‚de‡
R__WIN32


310 
	`Tøö_¬
–&
dumD©
, &dumD©, &
¡øö
, &
¡e°
, &
nv¨
, &
∆ayîs
, 
nodes
, &
ncy˛es
 );

312 
	`Log
(Ë<< 
kWARNING
 << "<Tøö> s‹ry CFMÕANN d€†nŸÑu¿⁄ Wödows" << 
Endl
;

315 
dñëe
 [] 
nodes
;

317 
	`ExôFromTøöög
();

318 
	}
}

323 
DoubÀ_t
 
	gTMVA
::
MëhodCFMÕANN
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

325 
Boﬁ_t
 
isOK
 = 
kTRUE
;

327 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

330 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`öputVec
–
	`GëNv¨
() );

331 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë
öputVec
[iv¨] = 
ev
->
	`GëVÆue
(ivar);

333 
DoubÀ_t
 
myMVA
 = 
	`EvÆANN
–
öputVec
, 
isOK
 );

334 i‡(!
isOK
Ë
	`Log
(Ë<< 
kFATAL
 << "EvÆANNÑëu∫†(!isOKËf‹Évíà" << 
Endl
;

337 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

339  
myMVA
;

340 
	}
}

345 
DoubÀ_t
 
	gTMVA
::
MëhodCFMÕANN
::
EvÆANN
–
°d
::
ve˘‹
<DoubÀ_t>& 
öV¨
, 
Boﬁ_t
& 
isOK
 )

348 
DoubÀ_t
* 
	gxìv
 = 
√w
 DoubÀ_t[
GëNv¨
()];

349 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); iv¨++Ë
	gxìv
[
iv¨
] = 
öV¨
[ivar];

352 
	gisOK
 = 
kTRUE
;

353 
UI¡_t
 
	gjv¨
=0; jv¨<
GëNv¨
(); jvar++) {

355 i‡(
	gfV¨n_1
.
	gxmax
[
jv¨
] < 
	gxìv
[jv¨]Ëxìv[jv¨] = 
fV¨n_1
.
xmax
[jvar];

356 i‡(
	gfV¨n_1
.
	gxmö
[
jv¨
] > 
	gxìv
[jv¨]Ëxìv[jv¨] = 
fV¨n_1
.
xmö
[jvar];

357 i‡(
	gfV¨n_1
.
	gxmax
[
jv¨
] =
fV¨n_1
.
xmö
[jvar]) {

358 
isOK
 = 
kFALSE
;

359 
	gxìv
[
jv¨
] = 0;

362 
	gxìv
[
jv¨
] = 
xìv
[jv¨] - ((
fV¨n_1
.
xmax
[jv¨] + fV¨n_1.
xmö
[jvar])/2);

363 
	gxìv
[
jv¨
] = 
xìv
[jv¨] / ((
fV¨n_1
.
xmax
[jv¨] - fV¨n_1.
xmö
[jvar])/2);

367 
NN_ava
–
xìv
 );

369 
DoubÀ_t
 
	gªtvÆ
 = 0.5*(1.0 + 
fYNN
[
fP¨am_1
.
œyîm
-1][0]);

371 
	gdñëe
 [] 
	gxìv
;

373  
	gªtvÆ
;

379 
	gTMVA
::
MëhodCFMÕANN
::
	$NN_ava
–
DoubÀ_t
* 
xìv
 )

381 
I¡_t
 
iv¨
=0; iv¨<
fNeur_1
.
√ur⁄
[0]; iv¨++Ë
fYNN
[0][iv¨] = 
xìv
[ivar];

383 
I¡_t
 
œyî
=1;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

384 
I¡_t
 
j
=1; j<=
fNeur_1
.
√ur⁄
[
œyî
]; j++) {

386 
DoubÀ_t
 
x
 = 
	`Ww_ªf
(
fNeur_1
.
ww
, 
œyî
+1,
j
);

388 
I¡_t
 
k
=1; k<=
fNeur_1
.
√ur⁄
[
œyî
-1]; k++) {

389 
x
 +
fYNN
[
œyî
-1][
k
-1]*
	`W_ªf
(
fNeur_1
.
w
,Üayî+1, 
j
, k);

391 
fYNN
[
œyî
][
j
-1] = 
	`NN_f⁄c
–œyî, 
x
 );

394 
	}
}

399 
DoubÀ_t
 
	gTMVA
::
MëhodCFMÕANN
::
	$NN_f⁄c
–
I¡_t
 
i
, 
DoubÀ_t
 
u
 ) const

401 
DoubÀ_t
 
	`f
(0);

403 i‡(
u
/
fDñ_1
.
ãmp
[
i
] > 170Ë
f
 = +1;

404 i‡(
u
/
fDñ_1
.
ãmp
[
i
] < -170Ë
f
 = -1;

406 
DoubÀ_t
 
yy
 = 
TM©h
::
	`Exp
(-
u
/
fDñ_1
.
ãmp
[
i
]);

407 
f
 = (1 - 
yy
)/(1 + yy);

410  
f
;

411 
	}
}

416 
	gTMVA
::
MëhodCFMÕANN
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
 & 
i°r
 )

418 
TSåög
 
v¨
;

421 
UI¡_t
 
	`nva
(0), 
	`l˛ass
(0);

422 
i°r
 >> 
nva
 >> 
l˛ass
;

424 i‡(
	`GëNv¨
(Ë!
nva
)

425 
	`Log
(Ë<< 
kFATAL
 << "<RódWeightsFromFûe> mism©ch i¿numbî o‡v¨übÀs" << 
Endl
;

428 i‡(
l˛ass
 != 2)

429 
	`Log
(Ë<< 
kFATAL
 << "<RódWeightsFromFûe> mism©ch i¿numbî o‡˛as£s" << 
Endl
;

432 i‡(
i°r
.
	`eof
( ))

433 
	`Log
(Ë<< 
kFATAL
 << "<RódWeightsFromSåóm>Ñóched EOFÖªm©uªly " << 
Endl
;

436 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

437 
i°r
 >> 
fV¨n_1
.
xmax
[
iv¨
] >> fV¨n_1.
xmö
[ivar];

440 
i°r
 >> 
fP¨am_1
.
œyîm
;

442 i‡(
fYNN
 != 0) {

443 
I¡_t
 
i
=0; i<
fNœyîs
; i++Ë
dñëe
[] 
fYNN
[i];

444 
dñëe
[] 
fYNN
;

445 
fYNN
 = 0;

447 
fYNN
 = 
√w
 
DoubÀ_t
*[
fP¨am_1
.
œyîm
];

448 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

451 
i°r
 >> 
fNeur_1
.
√ur⁄
[
œyî
];

452 
fYNN
[
œyî
] = 
√w
 
DoubÀ_t
[
fNeur_1
.
√ur⁄
[layer]];

456 c⁄° 
I¡_t
 
	`nch¨
( 100 );

457 * 
dumch¨
 = 
√w
 [
nch¨
];

460 
I¡_t
 
œyî
=1;Üayî<=
fP¨am_1
.
œyîm
-1;Üayer++) {

462 
I¡_t
 
nq
 = 
fNeur_1
.
√ur⁄
[
œyî
]/10;

463 
I¡_t
 
ƒ
 = 
fNeur_1
.
√ur⁄
[
œyî
] - 
nq
*10;

465 
I¡_t
 
	`kk
(0);

466 i‡(
ƒ
==0Ë
kk
 = 
nq
;

467 
kk
 = 
nq
+1;

469 
I¡_t
 
k
=1; k<=
kk
; k++) {

470 
I¡_t
 
jmö
 = 10*
k
 - 9;

471 
I¡_t
 
jmax
 = 10*
k
;

472 i‡(
fNeur_1
.
√ur⁄
[
œyî
]<
jmax
) jmax = fNeur_1.neuron[layer];

473 
I¡_t
 
j
=
jmö
; j<=
jmax
; j++) {

474 
i°r
 >> 
	`Ww_ªf
(
fNeur_1
.
ww
, 
œyî
+1, 
j
);

476 
I¡_t
 
i
=1; i<=
fNeur_1
.
√ur⁄
[
œyî
-1]; i++) {

477 
I¡_t
 
j
=
jmö
; j<=
jmax
; j++) {

478 
i°r
 >> 
	`W_ªf
(
fNeur_1
.
w
, 
œyî
+1, 
j
, 
i
);

482 
i°r
.
	`gëlöe
–
dumch¨
, 
nch¨
 );

486 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

489 
i°r
.
	`gëlöe
–
dumch¨
, 
nch¨
 );

490 
i°r
.
	`gëlöe
–
dumch¨
, 
nch¨
 );

492 
i°r
 >> 
fDñ_1
.
ãmp
[
œyî
];

496 i‡((
I¡_t
)
	`GëNv¨
(Ë!
fNeur_1
.
√ur⁄
[0]) {

497 
	`Log
(Ë<< 
kFATAL
 << "<ReadWeightsFromFile> mismatch in zerothÜayer:"

498 << 
	`GëNv¨
(Ë<< " " << 
fNeur_1
.
√ur⁄
[0] << 
Endl
;

501 
fNœyîs
 = 
fP¨am_1
.
œyîm
;

502 
dñëe
[] 
dumch¨
;

503 
	}
}

508 
I¡_t
 
	gTMVA
::
MëhodCFMÕANN
::
	$D©aI¡îÁ˚
–
DoubÀ_t
* , Double_t* ,

509 
I¡_t
* , Int_t* ,

510 
I¡_t
* , I¡_t* 
nv¨
,

511 
DoubÀ_t
* 
xpg
, 
I¡_t
* 
i˛ass
, I¡_t* 
ikíd
 )

514 *
ikíd
 = 0;

518 i‡(0 =
xpg
) {

519 
	`Log
(Ë<< 
kFATAL
 << "ERROR i¿MëhodCFMÕANN_D©aI¡îÁ˚ zîÿpoöã∏xpg" << 
Endl
;

521 i‡(*
nv¨
 !(
I¡_t
)
this
->
	`GëNv¨
()) {

522 
	`Log
(Ë<< 
kFATAL
 << "ERROR in MethodCFMlpANN_DataInterface mismatch inÇum of variables: "

523 << *
nv¨
 << " " << 
this
->
	`GëNv¨
(Ë<< 
Endl
;

527 *
i˛ass
 = ()
this
->
	`GëCœss
–
MëhodCFMÕANN_n£l
 );

528 
UI¡_t
 
iv¨
=0; iv¨<
this
->
	`GëNv¨
(); ivar++)

529 
xpg
[
iv¨
] = ()
this
->
	`GëD©a
–
MëhodCFMÕANN_n£l
, ivar );

531 ++
MëhodCFMÕANN_n£l
;

534 
	}
}

539 
	gTMVA
::
MëhodCFMÕANN
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

541 *
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

542 
	`gToﬁs
().
	`AddAâr
(
wght
,"NV¨s",
fP¨am_1
.
nv¨
);

543 
	`gToﬁs
().
	`AddAâr
(
wght
,"NCœs£s",
fP¨am_1
.
l˛ass
);

544 
	`gToﬁs
().
	`AddAâr
(
wght
,"NLayîs",
fP¨am_1
.
œyîm
);

545 * 
mömaxnode
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "VarMinMax");

546 
°rög°ªam
 
s
;

547 
s
.
	`¥ecisi⁄
( 16 );

548 
I¡_t
 
iv¨
=0; iv¨<
fP¨am_1
.
nv¨
; ivar++)

549 
s
 << 
°d
::
scõ¡ific
 << 
fV¨n_1
.
xmö
[
iv¨
] << " " << fV¨n_1.
xmax
[ivar] << " ";

550 
	`gToﬁs
().
	`AddRawLöe
–
mömaxnode
, 
s
.
	`°r
().
	`c_°r
() );

551 * 
√ur⁄s
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "NNeurons");

552 
°rög°ªam
 
n
;

553 
n
.
	`¥ecisi⁄
( 16 );

554 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++)

555 
n
 << 
°d
::
scõ¡ific
 << 
fNeur_1
.
√ur⁄
[
œyî
] << " ";

556 
	`gToﬁs
().
	`AddRawLöe
–
√ur⁄s
, 
n
.
	`°r
().
	`c_°r
() );

557 
I¡_t
 
œyî
=1;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

558 * 
œyînode
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "Layî"+gToﬁs().
	`SåögFromI¡
(
œyî
));

559 
	`gToﬁs
().
	`AddAâr
(
œyînode
,"NNeur⁄s",
fNeur_1
.
√ur⁄
[
œyî
]);

560 * 
√ur⁄node
=
NULL
;

561 
I¡_t
 
√ur⁄
=0;Çeur⁄<
fNeur_1
.√ur⁄[
œyî
];Çeuron++) {

562 
√ur⁄node
 = 
	`gToﬁs
().
	`AddChûd
(
œyînode
,"Neur⁄"+gToﬁs().
	`SåögFromI¡
(
√ur⁄
));

563 
°rög°ªam
 
weights
;

564 
weights
.
	`¥ecisi⁄
( 16 );

565 
weights
 << 
°d
::
scõ¡ific
 << 
	`Ww_ªf
(
fNeur_1
.
ww
, 
œyî
+1, 
√ur⁄
+1);

566 
I¡_t
 
i
=0; i<
fNeur_1
.
√ur⁄
[
œyî
-1]; i++) {

567 
weights
 << " " << 
°d
::
scõ¡ific
 << 
	`W_ªf
(
fNeur_1
.
w
, 
œyî
+1, 
√ur⁄
+1, 
i
+1);

569 
	`gToﬁs
().
	`AddRawLöe
–
√ur⁄node
, 
weights
.
	`°r
().
	`c_°r
() );

572 * 
ãm≤ode
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "LayerTemp");

573 
°rög°ªam
 
ãmp
;

574 
ãmp
.
	`¥ecisi⁄
( 16 );

575 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

576 
ãmp
 << 
°d
::
scõ¡ific
 << 
fDñ_1
.ãmp[
œyî
] << " ";

578 
	`gToﬁs
().
	`AddRawLöe
(
ãm≤ode
, 
ãmp
.
	`°r
().
	`c_°r
() );

579 
	}
}

583 
	gTMVA
::
MëhodCFMÕANN
::
	$RódWeightsFromXML
–* 
wghäode
 )

585 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NLayîs",
fP¨am_1
.
œyîm
 );

586 * 
mömaxnode
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

587 c⁄° * 
mömaxc⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
mömaxnode
);

588 
°rög°ªam
 
	`c⁄ã¡
(
mömaxc⁄ã¡
);

589 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

590 
c⁄ã¡
 >> 
fV¨n_1
.
xmö
[
iv¨
] >> fV¨n_1.
xmax
[ivar];

591 i‡(
fYNN
 != 0) {

592 
I¡_t
 
i
=0; i<
fNœyîs
; i++Ë
dñëe
[] 
fYNN
[i];

593 
dñëe
[] 
fYNN
;

594 
fYNN
 = 0;

596 
fYNN
 = 
√w
 
DoubÀ_t
*[
fP¨am_1
.
œyîm
];

597 *
œyînode
=
	`gToﬁs
().
	`GëNextChûd
(
mömaxnode
);

598 c⁄° * 
√ur⁄sc⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
œyînode
);

599 
°rög°ªam
 
	`nc⁄ã¡
(
√ur⁄sc⁄ã¡
);

600 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

603 
nc⁄ã¡
 >> 
fNeur_1
.
√ur⁄
[
œyî
];

604 
fYNN
[
œyî
] = 
√w
 
DoubÀ_t
[
fNeur_1
.
√ur⁄
[layer]];

606 
I¡_t
 
œyî
=1;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

607 
œyînode
=
	`gToﬁs
().
	`GëNextChûd
(layernode);

608 * 
√ur⁄node
=
NULL
;

609 
√ur⁄node
 = 
	`gToﬁs
().
	`GëChûd
(
œyînode
);

610 
I¡_t
 
√ur⁄
=0;Çeur⁄<
fNeur_1
.√ur⁄[
œyî
];Çeuron++) {

611 c⁄° * 
√ur⁄weights
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
√ur⁄node
);

612 
°rög°ªam
 
	`weights
(
√ur⁄weights
);

613 
weights
 >> 
	`Ww_ªf
(
fNeur_1
.
ww
, 
œyî
+1, 
√ur⁄
+1);

614 
I¡_t
 
i
=0; i<
fNeur_1
.
√ur⁄
[
œyî
-1]; i++) {

615 
weights
 >> 
	`W_ªf
(
fNeur_1
.
w
, 
œyî
+1, 
√ur⁄
+1, 
i
+1);

617 
√ur⁄node
=
	`gToﬁs
().
	`GëNextChûd
(neuronnode);

620 * 
ãm≤ode
=
	`gToﬁs
().
	`GëNextChûd
(
œyînode
);

621 c⁄° * 
ãmp
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
ãm≤ode
);

622 
°rög°ªam
 
	`t
(
ãmp
);

623 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

624 
t
 >> 
fDñ_1
.
ãmp
[
œyî
];

626 
fNœyîs
 = 
fP¨am_1
.
œyîm
;

627 
	}
}

632 
	gTMVA
::
MëhodCFMÕANN
::
	$PrötWeights
–
°d
::
o°ªam
 & 
o
 ) const

635 
o
 << "Numbî o‡v¨†" << 
fP¨am_1
.
nv¨
 << 
°d
::
ídl
;

636 
o
 << "Ouçuànode† " << 
fP¨am_1
.
l˛ass
 << 
°d
::
ídl
;

639 
I¡_t
 
iv¨
=0; iv¨<
fP¨am_1
.
nv¨
; ivar++)

640 
o
 << "V¨ " << 
iv¨
 << " [" << 
fV¨n_1
.
xmö
[iv¨] << " - " << fV¨n_1.
xmax
[iv¨] << "]" << 
°d
::
ídl
;

643 
o
 << "Numbî o‡œyî†" << 
fP¨am_1
.
œyîm
 << 
°d
::
ídl
;

645 
o
 << "NodesÖerÜayer ";

646 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++)

648 
o
 << 
fNeur_1
.
√ur⁄
[
œyî
] << " ";

649 
o
 << 
°d
::
ídl
;

652 
I¡_t
 
œyî
=1;Üayî<=
fP¨am_1
.
œyîm
-1;Üayer++) {

654 
I¡_t
 
nq
 = 
fNeur_1
.
√ur⁄
[
œyî
]/10;

655 
I¡_t
 
ƒ
 = 
fNeur_1
.
√ur⁄
[
œyî
] - 
nq
*10;

657 
I¡_t
 
	`kk
(0);

658 i‡(
ƒ
==0Ë
kk
 = 
nq
;

659 
kk
 = 
nq
+1;

661 
I¡_t
 
k
=1; k<=
kk
; k++) {

662 
I¡_t
 
jmö
 = 10*
k
 - 9;

663 
I¡_t
 
jmax
 = 10*
k
;

664 
I¡_t
 
i
, 
j
;

665 i‡(
fNeur_1
.
√ur⁄
[
œyî
]<
jmax
) jmax = fNeur_1.neuron[layer];

666 
j
=
jmö
; j<=
jmax
; j++) {

669 
o
 << 
	`Ww_ªf
(
fNeur_1
.
ww
, 
œyî
+1, 
j
) << " ";

672 
o
 << 
°d
::
ídl
;

674 
i
=1; i<=
fNeur_1
.
√ur⁄
[
œyî
-1]; i++) {

675 
j
=
jmö
; j<=
jmax
; j++) {

677 
o
 << 
	`W_ªf
(
fNeur_1
.
w
, 
œyî
+1, 
j
, 
i
) << " ";

679 
o
 << 
°d
::
ídl
;

683 
o
 << 
°d
::
ídl
;

686 
I¡_t
 
œyî
=0;Üayî<
fP¨am_1
.
œyîm
;Üayer++) {

687 
o
 << "Dñ.ãm∞öÜayî " << 
œyî
 << " : " << 
fDñ_1
.
ãmp
[œyî] << 
°d
::
ídl
;

689 
	}
}

693 
	gTMVA
::
MëhodCFMÕANN
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

696 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

697 
fout
 << "};" << 
°d
::
ídl
;

698 
	}
}

703 
	gTMVA
::
MëhodCFMÕANN
::
	$MakeCœssS≥cificHódî
–
°d
::
o°ªam
& , c⁄° 
TSåög
& ) const

705 
	}
}

713 
	gTMVA
::
MëhodCFMÕANN
::
	$GëHñpMesßge
() const

715 
	`Log
(Ë<< 
Endl
;

716 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

717 
	`Log
(Ë<< 
Endl
;

718 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

719 
	`Log
(Ë<< 
Endl
;

720 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

721 
	`Log
(Ë<< 
Endl
;

722 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

723 
	`Log
(Ë<< 
Endl
;

724 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

725 
	`Log
(Ë<< 
Endl
;

726 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

727 
	}
}

	@src/MethodCFMlpANN_Utils.cxx

62 
	~<°rög
>

63 
	~<io°ªam
>

64 
	~<c°dlib
>

66 
	~"TM©h.h
"

67 
	~"TSåög.h
"

69 
	~"TMVA/MëhodCFMÕANN_Utûs.h
"

70 
	~"TMVA/MsgLoggî.h
"

71 
	~"TMVA/Timî.h
"

72 
	~"TMVA/Ty≥s.h
"

74 
usög
 
	g°d
::
cout
;

75 
usög
 
	g°d
::
ídl
;

77 
CœssImp
(
TMVA
::
MëhodCFMÕANN_Utûs
);

79 c⁄° 
I¡_t
 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
fg_max_nV¨_
 = 
max_nV¨_
;

80 c⁄° 
I¡_t
 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
fg_max_nNodes_
 = 
max_nNodes_
;

81 c⁄° * c⁄° 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
fg_MëhodName
 = "--- CFMlpANN ";

86 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$MëhodCFMÕANN_Utûs
():
	`fg_100
(100),

87 
	`fg_0
(0),

88 
	$fg_999
(999)

90 
I¡_t
 
	`i
(0);

91 
i
=0; i<
max_nV¨_
;++iË
fV¨n_1
.
xmö
[i] = 0;

92 
fCo°_1
.
™cout
 = 0;

93 
fCo°_1
.
õps
 = 0;

94 
fCo°_1
.
tﬁcou
 = 0;

96 
i
=0; i<
max_nNodes_
;++iË
fDñ_1
.
c€f
[i] = 0;

97 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fDñ_1
.
dñ
[i] = 0;

98 
i
=0; i<
max_nLayîs_
*
max_nNodes_
*max_nNodes_;++iË
fDñ_1
.
dñè
[i] = 0;

99 
i
=0; i<
max_nLayîs_
*
max_nNodes_
*max_nNodes_;++iË
fDñ_1
.
dñw
[i] = 0;

100 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fDñ_1
.
dñww
[i] = 0;

101 
fDñ_1
.
demö
 = 0;

102 
fDñ_1
.
demax
 = 0;

103 
fDñ_1
.
idde
 = 0;

104 
i
=0; i<
max_nLayîs_
;++iË
fDñ_1
.
ãmp
[i] = 0;

106 
i
=0; i<
max_nNodes_
;++iË
fNeur_1
.
cut
[i] = 0;

107 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fNeur_1
.
dñèww
[i] = 0;

108 
i
=0; i<
max_nLayîs_
;++iË
fNeur_1
.
√ur⁄
[i] = 0;

109 
i
=0; i<
max_nNodes_
;++iË
fNeur_1
.
o
[i] = 0;

110 
i
=0; i<
max_nLayîs_
*
max_nNodes_
*max_nNodes_;++iË
fNeur_1
.
w
[i] = 0;

111 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fNeur_1
.
ww
[i] = 0;

112 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fNeur_1
.
x
[i] = 0;

113 
i
=0; i<
max_nLayîs_
*
max_nNodes_
;++iË
fNeur_1
.
y
[i] = 0;

115 
fP¨am_1
.
ìps
 = 0;

116 
fP¨am_1
.
ïsmö
 = 0;

117 
fP¨am_1
.
ïsmax
 = 0;

118 
fP¨am_1
.
ëa
 = 0;

119 
fP¨am_1
.
ichoi
 = 0;

120 
fP¨am_1
.
ôe°
 = 0;

121 
fP¨am_1
.
œyîm
 = 0;

122 
fP¨am_1
.
l˛ass
 = 0;

123 
fP¨am_1
.
nbÀ¨n
 = 0;

124 
fP¨am_1
.
ndiv
 = 0;

125 
fP¨am_1
.
ndivis
 = 0;

126 
fP¨am_1
.
√vl
 = 0;

127 
fP¨am_1
.
√vt
 = 0;

128 
fP¨am_1
.
nu«p
 = 0;

129 
fP¨am_1
.
nunûec
 = 0;

130 
fP¨am_1
.
nunish‹t
 = 0;

131 
fP¨am_1
.
nunis‹
 = 0;

132 
fP¨am_1
.
nv¨
 = 0;

134 
fV¨n_1
.
i˛ass
 = 0;

135 
i
=0; i<
max_Evíts_
;++iË
fV¨n_1
.
m˛ass
[i] = 0;

136 
i
=0; i<
max_Evíts_
;++iË
fV¨n_1
.
n˛ass
[i] = 0;

137 
i
=0; i<
max_nV¨_
;++iË
fV¨n_1
.
xmax
[i] = 0;

139 
fLoggî
 = 0;

140 
	}
}

145 
	gTMVA
::
MëhodCFMÕANN_Utûs
::~
	$MëhodCFMÕANN_Utûs
()

147 
	}
}

151 
TMVA
::
MëhodCFMÕANN_Utûs
::
	$Tøö_¬
–
DoubÀ_t
 *
tö2
, DoubÀ_à*
tout2
, 
I¡_t
 *
¡øö
,

152 
I¡_t
 *
¡e°
, I¡_à*
nv¨2
, I¡_à*
∆ayî
,

153 
I¡_t
 *
nodes
, I¡_à*
ncy˛e
 )

158 i‡(*
¡øö
 + *
¡e°
 > 
max_Evíts_
) {

159 
	`¥ötf
( "*** CFMlpANN_f2c: Warning in Train_nn:Çumber ofÅraining +Åesting" \

161 *
¡øö
 = *¡øö*(
max_Evíts_
/(*¡øö + *
¡e°
));

162 *
¡e°
 = *¡e° *(
max_Evíts_
/(*
¡øö
 + *ntest));

164 i‡(*
nv¨2
 > 
max_nV¨_
) {

165 
	`¥ötf
( "*** CFMlpANN_f2c: ERROR in Train_nn:Çumber of variables" \

167 
°d
::
	`exô
(1);

169 i‡(*
∆ayî
 > 
max_nLayîs_
) {

170 
	`¥ötf
( "*** CFMlpANN_f2c: Warning in Train_nn:Çumber ofÜayers" \

172 *
∆ayî
 = 
max_nLayîs_
;

174 i‡(*
nodes
 > 
max_nNodes_
) {

175 
	`¥ötf
( "*** CFMlpANN_f2c: Warning in Train_nn:Çumber ofÇodes" \

177 *
nodes
 = 
max_nNodes_
;

181 
fV¨n2_1
.
	`Cª©e
–*
¡øö
 + *
¡e°
, *
nv¨2
 );

182 
fV¨n3_1
.
	`Cª©e
–*
¡øö
 + *
¡e°
, *
nv¨2
 );

185 
dë
[20];

187 
	`E¡ªe_√w
(
nv¨2
, 
dë
, 
¡øö
, 
¡e°
, 
∆ayî
, 
nodes
, 
ncy˛e
, (
I¡_t
)20);

188 i‡(
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1] == 1) {

190 
fP¨am_1
.
l˛ass
 = 2;

194 
fP¨am_1
.
l˛ass
 = 
fNeur_1
.
√ur⁄
[fP¨am_1.
œyîm
 - 1];

196 
fP¨am_1
.
nv¨
 = 
fNeur_1
.
√ur⁄
[0];

197 
	`Te°NN
();

198 
	`I¬ô
(
dë
, 
tout2
, 
tö2
, (
I¡_t
)20);

201 
fV¨n2_1
.
	`Dñëe
();

202 
fV¨n3_1
.
	`Dñëe
();

203 
	}
}

207 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$E¡ªe_√w
–
I¡_t
 *, *, I¡_à*
¡øö
,

208 
I¡_t
 *
¡e°
, I¡_à*
numœyî
, I¡_à*
nodes
,

209 
I¡_t
 *
numcy˛e
, Int_t )

212 
I¡_t
 
i__1
;

214 
I¡_t
 
ªwrôe
, 
i__
, 
j
, 
nc€f
;

215 
I¡_t
 
¡emp
, 
num
, 
ªåaö
;

222 
fCo°_1
.
™cout
 = 1e30;

225 
ªåaö
 = 0;

226 
ªwrôe
 = 1000;

227 
i__
 = 1; i__ <
max_nNodes_
; ++i__) {

228 
fDñ_1
.
c€f
[
i__
 - 1] = (
Flﬂt_t
)0.;

230 
i__
 = 1; i__ <
max_nLayîs_
; ++i__) {

231 
fDñ_1
.
ãmp
[
i__
 - 1] = (
Flﬂt_t
)0.;

233 
fP¨am_1
.
œyîm
 = *
numœyî
;

234 i‡(
fP¨am_1
.
œyîm
 > 
max_nLayîs_
) {

235 
	`¥ötf
("Error:Çumber ofÜayersÉxceeds maximum: %i, %i ==>ábort",

236 
fP¨am_1
.
œyîm
, 
max_nLayîs_
 );

237 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

239 
fP¨am_1
.
√vl
 = *
¡øö
;

240 
fP¨am_1
.
√vt
 = *
¡e°
;

241 
fP¨am_1
.
nbÀ¨n
 = *
numcy˛e
;

242 
fV¨n_1
.
i˛ass
 = 2;

243 
fP¨am_1
.
nunûec
 = 10;

244 
fP¨am_1
.
ïsmö
 = 1e-10;

245 
fP¨am_1
.
ïsmax
 = 1e-4;

246 
fP¨am_1
.
ëa
 = .5;

247 
fCo°_1
.
tﬁcou
 = 1e-6;

248 
fCo°_1
.
õps
 = 2;

249 
fP¨am_1
.
nunis‹
 = 30;

250 
fP¨am_1
.
nunish‹t
 = 48;

251 
fP¨am_1
.
nu«p
 = 40;

253 
	`ULog
(Ë<< 
kINFO
 << "TŸÆÇumbî o‡evít†f‹Åøöög: " << 
fP¨am_1
.
√vl
 << 
Endl
;

254 
	`ULog
(Ë<< 
kINFO
 << "TŸÆÇumbî o‡åaöög cy˛e† : " << 
fP¨am_1
.
nbÀ¨n
 << 
Endl
;

255 i‡(
fP¨am_1
.
√vl
 > 
max_Evíts_
) {

256 
	`¥ötf
("Error:Çumber ofÜearningÉventsÉxceeds maximum: %i, %i ==>ábort",

257 
fP¨am_1
.
√vl
, 
max_Evíts_
 );

258 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

260 i‡(
fP¨am_1
.
√vt
 > 
max_Evíts_
) {

261 
	`¥ötf
("Error:Çumber ofÅestingÉventsÉxceeds maximum: %i, %i ==>ábort",

262 
fP¨am_1
.
√vt
, 
max_Evíts_
 );

263 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

265 
i__1
 = 
fP¨am_1
.
œyîm
;

266 
j
 = 1; j <
i__1
; ++j) {

267 
num
 = 
nodes
[
j
-1];

268 i‡(
num
 < 2) {

269 
num
 = 2;

271 i‡(
j
 =
fP¨am_1
.
œyîm
 && 
num
 != 2) {

272 
num
 = 2;

274 
fNeur_1
.
√ur⁄
[
j
 - 1] = 
num
;

276 
i__1
 = 
fP¨am_1
.
œyîm
;

277 
j
 = 1; j <
i__1
; ++j) {

278 
	`ULog
(Ë<< 
kINFO
 << "Numbî o‡œyî†f‹Çeur⁄(" << 
j
 << "): " << 
fNeur_1
.
√ur⁄
[j - 1] << 
Endl
;

280 i‡(
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1] != 2) {

281 
	`¥ötf
("Error: wrongÇumber of classesát outputÜayer: %i != 2 ==>ábort\n",

282 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1]);

283 
	`Aºë
("stop");

285 
i__1
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

286 
j
 = 1; j <
i__1
; ++j) {

287 
fDñ_1
.
c€f
[
j
 - 1] = 1.;

289 
i__1
 = 
fP¨am_1
.
œyîm
;

290 
j
 = 1; j <
i__1
; ++j) {

291 
fDñ_1
.
ãmp
[
j
 - 1] = 1.;

293 
fP¨am_1
.
ichoi
 = 
ªåaö
;

294 
fP¨am_1
.
ndivis
 = 
ªwrôe
;

295 
fDñ_1
.
idde
 = 1;

296 i‡(! (
fP¨am_1
.
ichoi
 == 0 || fParam_1.ichoi == 1)) {

297 
	`¥ötf
( "BigÅroubles !!! \n" );

298 
	`Aºë
("newÅraining or continued one !");

300 i‡(
fP¨am_1
.
ichoi
 == 0) {

301 
	`ULog
(Ë<< 
kINFO
 << "NewÅøöög wû»bê≥rf‹med" << 
Endl
;

304 
	`¥ötf
("%s: NewÅøöög wû»bêc⁄töued fromá weighàfûe\n", 
fg_MëhodName
);

306 
nc€f
 = 0;

307 
¡emp
 = 0;

308 
i__
 = 1; i__ <
max_nNodes_
; ++i__) {

309 i‡(
fDñ_1
.
c€f
[
i__
 - 1] !(
Flﬂt_t
)0.) {

310 ++
nc€f
;

313 
i__
 = 1; i__ <
max_nLayîs_
; ++i__) {

314 i‡(
fDñ_1
.
ãmp
[
i__
 - 1] !(
Flﬂt_t
)0.) {

315 ++
¡emp
;

318 i‡(
nc€f
 !
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1]) {

319 
	`Aºë
("ÉntreeÉrror code 1 :ÇeedÅoÑeported");

321 i‡(
¡emp
 !
fP¨am_1
.
œyîm
) {

322 
	`Aºë
("entreeÉrror code 2 :ÇeedÅoÑeported");

324 
	}
}

326 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

327 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

332 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Wöi
()

334 
I¡_t
 
i__1
, 
i__2
, 
i__3
;

335 
I¡_t
 
i__
, 
j
;

336 
I¡_t
 
œyî
;

338 
i__1
 = 
fP¨am_1
.
œyîm
;

339 
œyî
 = 2;Üayî <
i__1
; ++layer) {

340 
i__2
 = 
fNeur_1
.
√ur⁄
[
œyî
 - 2];

341 
i__
 = 1; i__ <
i__2
; ++i__) {

342 
i__3
 = 
fNeur_1
.
√ur⁄
[
œyî
 - 1];

343 
j
 = 1; j <
i__3
; ++j) {

344 
	`w_ªf
(
œyî
, 
j
, 
i__
Ë(
	`Sí3a
() * 2. - 1.) * .2;

345 
	`ww_ªf
(
œyî
, 
j
Ë(
	`Sí3a
() * 2. - 1.) * .2;

349 
	}
}

351 #unde‡
ww_ªf


352 #unde‡
w_ªf


354 
	#xìv_ªf
(
a_1
,
a_2
Ë
	`fV¨n2_1
◊_1,a_2)

	)

355 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

356 
	#x_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
x
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

357 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

358 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

363 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$En_av™t
(
I¡_t
 *
õvít
)

365 
I¡_t
 
i__1
, 
i__2
, 
i__3
;

367 
DoubÀ_t
 
f
;

368 
I¡_t
 
i__
, 
j
;

369 
I¡_t
 
œyî
;

371 
i__1
 = 
fNeur_1
.
√ur⁄
[0];

372 
i__
 = 1; i__ <
i__1
; ++i__) {

373 
	`y_ªf
(1, 
i__
Ë
	`xìv_ªf
(*
õvít
, i__);

375 
i__1
 = 
fP¨am_1
.
œyîm
 - 1;

376 
œyî
 = 1;Üayî <
i__1
; ++layer) {

377 
i__2
 = 
fNeur_1
.
√ur⁄
[
œyî
];

378 
j
 = 1; j <
i__2
; ++j) {

379 
	`x_ªf
(
œyî
 + 1, 
j
) = 0.;

380 
i__3
 = 
fNeur_1
.
√ur⁄
[
œyî
 - 1];

381 
i__
 = 1; i__ <
i__3
; ++i__) {

382 
	`x_ªf
(
œyî
 + 1, 
j
Ë–x_ªf÷ayî + 1, jË+ 
	`y_ªf
÷ayî, 
i__
)

383 * 
	`w_ªf
(
œyî
 + 1, 
j
, 
i__
) );

385 
	`x_ªf
(
œyî
 + 1, 
j
Ëx_ªf÷ayî + 1, jË+ 
	`ww_ªf
(layer + 1, j);

386 
i__3
 = 
œyî
 + 1;

387 
	`F⁄cf
(&
i__3
, &
	`x_ªf
(
œyî
 + 1, 
j
), &
f
);

388 
	`y_ªf
(
œyî
 + 1, 
j
Ë
f
;

391 
	}
}

393 #unde‡
ww_ªf


394 #unde‡
y_ªf


395 #unde‡
x_ªf


396 #unde‡
w_ªf


397 #unde‡
xìv_ªf


399 
	#xìv_ªf
(
a_1
,
a_2
Ë
	`fV¨n2_1
◊_1,a_2)

	)

404 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Le˛ó∫
–
I¡_t
 *
kã°
, 
DoubÀ_t
 *
tout2
, DoubÀ_à*
tö2
 )

406 
I¡_t
 
i__1
, 
i__2
;

408 
I¡_t
 
i__
, 
j
, 
k
, 
l
;

409 
I¡_t
 
no˛a
[
max_nNodes_
], 
ikíd
;

410 
DoubÀ_t
 
xpg
[
max_nV¨_
];

412 *
kã°
 = 0;

413 
i__1
 = 
fP¨am_1
.
l˛ass
;

414 
k
 = 1; k <
i__1
; ++k) {

415 
no˛a
[
k
 - 1] = 0;

417 
i__1
 = 
fP¨am_1
.
nv¨
;

418 
i__
 = 1; i__ <
i__1
; ++i__) {

419 
fV¨n_1
.
xmö
[
i__
 - 1] = 1e30;

420 
fV¨n_1
.
xmax
[
i__
 - 1] = -fV¨n_1.
xmö
[i__ - 1];

422 
i__1
 = 
fP¨am_1
.
√vl
;

423 
i__
 = 1; i__ <
i__1
; ++i__) {

424 
	`D©aI¡îÁ˚
(
tout2
, 
tö2
, &
fg_100
, &
fg_0
, &
fP¨am_1
.
√vl
, &fP¨am_1.
nv¨
,

425 
xpg
, &
fV¨n_1
.
n˛ass
[
i__
 - 1], &
ikíd
);

426 i‡(
ikíd
 == -1) {

430 
	`CﬁÀ˘V¨
(&
fP¨am_1
.
nv¨
, &
fV¨n_1
.
n˛ass
[
i__
 - 1], 
xpg
);

432 
i__2
 = 
fP¨am_1
.
nv¨
;

433 
j
 = 1; j <
i__2
; ++j) {

434 
	`xìv_ªf
(
i__
, 
j
Ë
xpg
[j - 1];

436 i‡(
fV¨n_1
.
i˛ass
 == 1) {

437 
i__2
 = 
fP¨am_1
.
l˛ass
;

438 
k
 = 1; k <
i__2
; ++k) {

439 i‡(
fV¨n_1
.
n˛ass
[
i__
 - 1] =
k
) {

440 ++
no˛a
[
k
 - 1];

444 
i__2
 = 
fP¨am_1
.
nv¨
;

445 
k
 = 1; k <
i__2
; ++k) {

446 i‡(
	`xìv_ªf
(
i__
, 
k
Ë< 
fV¨n_1
.
xmö
[k - 1]) {

447 
fV¨n_1
.
xmö
[
k
 - 1] = 
	`xìv_ªf
(
i__
, k);

449 i‡(
	`xìv_ªf
(
i__
, 
k
Ë> 
fV¨n_1
.
xmax
[k - 1]) {

450 
fV¨n_1
.
xmax
[
k
 - 1] = 
	`xìv_ªf
(
i__
, k);

455 i‡(
fV¨n_1
.
i˛ass
 == 1) {

456 
i__2
 = 
fP¨am_1
.
l˛ass
;

457 
k
 = 1; k <
i__2
; ++k) {

458 
i__1
 = 
fP¨am_1
.
l˛ass
;

459 
l
 = 1;Ü <
i__1
; ++l) {

460 i‡(
no˛a
[
k
 - 1] !no˛a[
l
 - 1]) {

461 *
kã°
 = 1;

466 
i__1
 = 
fP¨am_1
.
√vl
;

467 
i__
 = 1; i__ <
i__1
; ++i__) {

468 
i__2
 = 
fP¨am_1
.
nv¨
;

469 
l
 = 1;Ü <
i__2
; ++l) {

470 i‡(
fV¨n_1
.
xmax
[
l
 - 1] =(
Flﬂt_t
)0. && fV¨n_1.
xmö
[l - 1] == (

471 
Flﬂt_t
)0.) {

472 
	`xìv_ªf
(
i__
, 
l
Ë(
Flﬂt_t
)0.;

475 
	`xìv_ªf
(
i__
, 
l
Ëxìv_ªf(i__,ÜË- (
fV¨n_1
.
xmax
[l - 1] +

476 
fV¨n_1
.
xmö
[
l
 - 1]) / 2.;

477 
	`xìv_ªf
(
i__
, 
l
Ëxìv_ªf(i__,ÜË/ ((
fV¨n_1
.
xmax
[l - 1] -

478 
fV¨n_1
.
xmö
[
l
 - 1]) / 2.);

482 
	}
}

484 #unde‡
xìv_ªf


486 
	#dñw_ªf
(
a_1
,
a_2
,
a_3
Ë
fDñ_1
.
dñw
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

487 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

488 
	#x_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
x
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

489 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

490 
	#dñè_ªf
(
a_1
,
a_2
,
a_3
Ë
fDñ_1
.
dñè
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

491 
	#dñww_ªf
(
a_1
,
a_2
Ë
fDñ_1
.
dñww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

492 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

493 
	#dñ_ªf
(
a_1
,
a_2
Ë
fDñ_1
.
dñ
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

494 
	#dñèww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
dñèww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

499 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$En_¨rõª
–
I¡_t
 *
õvít
 )

501 
I¡_t
 
i__1
, 
i__2
, 
i__3
;

503 
DoubÀ_t
 
f
;

504 
I¡_t
 
i__
, 
j
, 
k
, 
l
;

505 
DoubÀ_t
 
df
, 
uu
;

507 
i__1
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

508 
i__
 = 1; i__ <
i__1
; ++i__) {

509 i‡(
fV¨n_1
.
n˛ass
[*
õvít
 - 1] =
i__
) {

510 
fNeur_1
.
o
[
i__
 - 1] = 1.;

513 
fNeur_1
.
o
[
i__
 - 1] = -1.;

516 
l
 = 
fP¨am_1
.
œyîm
;

517 
i__1
 = 
fNeur_1
.
√ur⁄
[
l
 - 1];

518 
i__
 = 1; i__ <
i__1
; ++i__) {

519 
f
 = 
	`y_ªf
(
l
, 
i__
);

520 
df
 = (
f
 + 1.Ë* (1. - fË/ (
fDñ_1
.
ãmp
[
l
 - 1] * 2.);

521 
	`dñ_ªf
(
l
, 
i__
Ë
df
 * (
fNeur_1
.
o
[i__ - 1] - 
	`y_ªf
(l, i__)) *

522 
fDñ_1
.
c€f
[
i__
 - 1];

523 
	`dñww_ªf
(
l
, 
i__
Ë
fP¨am_1
.
ìps
 * 
	`dñ_ªf
(l, i__);

524 
i__2
 = 
fNeur_1
.
√ur⁄
[
l
 - 2];

525 
j
 = 1; j <
i__2
; ++j) {

526 
	`dñw_ªf
(
l
, 
i__
, 
j
Ë
fP¨am_1
.
ìps
 * 
	`dñ_ªf
÷, i__Ë* 
	`y_ªf
(l -

527 1, 
j
);

531 
l
 = 
fP¨am_1
.
œyîm
 - 1;Ü >= 2; --l) {

532 
i__2
 = 
fNeur_1
.
√ur⁄
[
l
 - 1];

533 
i__
 = 1; i__ <
i__2
; ++i__) {

534 
uu
 = 0.;

535 
i__1
 = 
fNeur_1
.
√ur⁄
[
l
];

536 
k
 = 1; k <
i__1
; ++k) {

537 
uu
 +
	`w_ªf
(
l
 + 1, 
k
, 
i__
Ë* 
	`dñ_ªf
(l + 1, k);

539 
	`F⁄cf
(&
l
, &
	`x_ªf
÷, 
i__
), &
f
);

540 
df
 = (
f
 + 1.Ë* (1. - fË/ (
fDñ_1
.
ãmp
[
l
 - 1] * 2.);

541 
	`dñ_ªf
(
l
, 
i__
Ë
df
 * 
uu
;

542 
	`dñww_ªf
(
l
, 
i__
Ë
fP¨am_1
.
ìps
 * 
	`dñ_ªf
(l, i__);

543 
i__1
 = 
fNeur_1
.
√ur⁄
[
l
 - 2];

544 
j
 = 1; j <
i__1
; ++j) {

545 
	`dñw_ªf
(
l
, 
i__
, 
j
Ë
fP¨am_1
.
ìps
 * 
	`dñ_ªf
÷, i__Ë* 
	`y_ªf
(

546 
l
 - 1, 
j
);

550 
i__1
 = 
fP¨am_1
.
œyîm
;

551 
l
 = 2;Ü <
i__1
; ++l) {

552 
i__2
 = 
fNeur_1
.
√ur⁄
[
l
 - 1];

553 
i__
 = 1; i__ <
i__2
; ++i__) {

554 
	`dñèww_ªf
(
l
, 
i__
Ë
	`dñww_ªf
÷, i__Ë+ 
fP¨am_1
.
ëa
 *

555 
	`dñèww_ªf
(
l
, 
i__
);

556 
	`ww_ªf
(
l
, 
i__
Ëww_ªf÷, i__Ë+ 
	`dñèww_ªf
(l, i__);

557 
i__3
 = 
fNeur_1
.
√ur⁄
[
l
 - 2];

558 
j
 = 1; j <
i__3
; ++j) {

559 
	`dñè_ªf
(
l
, 
i__
, 
j
Ë
	`dñw_ªf
÷, i__, jË+ 
fP¨am_1
.
ëa
 *

560 
	`dñè_ªf
(
l
, 
i__
, 
j
);

561 
	`w_ªf
(
l
, 
i__
, 
j
Ëw_ªf÷, i__, jË+ 
	`dñè_ªf
(l, i__, j);

565 
	}
}

567 #unde‡
dñèww_ªf


568 #unde‡
dñ_ªf


569 #unde‡
ww_ªf


570 #unde‡
dñww_ªf


571 #unde‡
dñè_ªf


572 #unde‡
y_ªf


573 #unde‡
x_ªf


574 #unde‡
w_ªf


575 #unde‡
dñw_ªf


577 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

578 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

582 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Out
–
I¡_t
 *
iii
, I¡_à*
maxcy˛e
 )

586 i‡(*
iii
 =*
maxcy˛e
) {

589 
	}
}

591 #unde‡
ww_ªf


592 #unde‡
w_ªf


594 
	#dñè_ªf
(
a_1
,
a_2
,
a_3
Ë
fDñ_1
.
dñè
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

595 
	#dñèww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
dñèww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

599 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$I¬ô
–*
dë
, 
DoubÀ_t
 *
tout2
, DoubÀ_à*
tö2
, 
I¡_t
 )

602 
I¡_t
 
i__1
, 
i__2
, 
i__3
;

604 
I¡_t
 
i__
, 
j
;

605 
I¡_t
 
√vod
, 
œyî
, 
kã°
, 
i1
, 
ƒe°
;

606 
I¡_t
 
	`õvít
(0);

607 
I¡_t
 
kkk
;

608 
DoubÀ_t
 
xxx
 = 0.0, 
yyy
 = 0.0;

610 
	`Le˛ó∫
(&
kã°
, 
tout2
, 
tö2
);

611 
	`Le˚v2
(&
kã°
, 
tout2
, 
tö2
);

612 i‡(
kã°
 == 1) {

613 
	`¥ötf
( " .... strangeÅo be here (1) ... \n");

614 
°d
::
	`exô
(1);

616 
i__1
 = 
fP¨am_1
.
œyîm
 - 1;

617 
œyî
 = 1;Üayî <
i__1
; ++layer) {

618 
i__2
 = 
fNeur_1
.
√ur⁄
[
œyî
];

619 
j
 = 1; j <
i__2
; ++j) {

620 
	`dñèww_ªf
(
œyî
 + 1, 
j
) = 0.;

621 
i__3
 = 
fNeur_1
.
√ur⁄
[
œyî
 - 1];

622 
i__
 = 1; i__ <
i__3
; ++i__) {

623 
	`dñè_ªf
(
œyî
 + 1, 
j
, 
i__
) = 0.;

627 i‡(
fP¨am_1
.
ichoi
 == 1) {

628 
	`I∆
();

631 
	`Wöi
();

633 
kkk
 = 0;

634 
i__3
 = 
fP¨am_1
.
nbÀ¨n
;

635 
Timî
 
	`timî
–
i__3
, "CFMlpANN" );

636 
I¡_t
 
num
 = 
i__3
/100;

638 
i1
 = 1; i1 <
i__3
; ++i1) {

640 i‡––
num
>0 && (
i1
-1)%num =0Ë|| (i1 =
i__3
ËË
timî
.
	`DøwProgªssB¨
( i1-1 );

642 
i__2
 = 
fP¨am_1
.
√vl
;

643 
i__
 = 1; i__ <
i__2
; ++i__) {

644 ++
kkk
;

645 i‡(
fCo°_1
.
õps
 == 2) {

646 
fP¨am_1
.
ìps
 = 
	`Fde¸oi
(&
kkk
);

648 i‡(
fCo°_1
.
õps
 == 1) {

649 
fP¨am_1
.
ìps
 = fP¨am_1.
ïsmö
;

651 
Boﬁ_t
 
doC⁄t
 = 
kTRUE
;

652 i‡(
fV¨n_1
.
i˛ass
 == 2) {

653 
õvít
 = (
I¡_t
Ë((
DoubÀ_t
Ë
fP¨am_1
.
√vl
 * 
	`Sí3a
());

654 i‡(
õvít
 == 0) {

655 
doC⁄t
 = 
kFALSE
;

658 i‡(
doC⁄t
) {

659 i‡(
fV¨n_1
.
i˛ass
 == 1) {

660 
√vod
 = 
fP¨am_1
.
√vl
 / fP¨am_1.
l˛ass
;

661 
ƒe°
 = 
i__
 % 
fP¨am_1
.
l˛ass
;

662 
fP¨am_1
.
ndiv
 = 
i__
 / fP¨am_1.
l˛ass
;

663 i‡(
ƒe°
 != 0) {

664 
õvít
 = 
fP¨am_1
.
ndiv
 + 1 + (fP¨am_1.
l˛ass
 - 
ƒe°
) *

665 
√vod
;

668 
õvít
 = 
fP¨am_1
.
ndiv
;

671 
	`En_av™t
(&
õvít
);

672 
	`En_¨rõª
(&
õvít
);

675 
yyy
 = 0.;

676 i‡(
i1
 % 
fP¨am_1
.
ndivis
 =0 || i1 =1 || i1 =fP¨am_1.
nbÀ¨n
) {

677 
	`Cout
(&
i1
, &
xxx
);

678 
	`Cout2
(&
i1
, &
yyy
);

679 
	`GøphNN
(&
i1
, &
xxx
, &
yyy
, 
dë
, (
I¡_t
)20);

680 
	`Out
(&
i1
, &
fP¨am_1
.
nbÀ¨n
);

682 i‡(
xxx
 < 
fCo°_1
.
tﬁcou
) {

683 
	`GøphNN
(&
fP¨am_1
.
nbÀ¨n
, &
xxx
, &
yyy
, 
dë
, (
I¡_t
)20);

684 
	`Out
(&
fP¨am_1
.
nbÀ¨n
, &fParam_1.nblearn);

688 
	}
}

690 #unde‡
dñèww_ªf


691 #unde‡
dñè_ªf


696 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Te°NN
()

698 
I¡_t
 
i__1
;

700 
I¡_t
 
i__
;

701 
I¡_t
 
kã°
;

703 
kã°
 = 0;

704 i‡(
fP¨am_1
.
œyîm
 > 
max_nLayîs_
) {

705 
kã°
 = 1;

706 
	`¥ötf
("Error:Çumber ofÜayersÉxceeds maximum: %i, %i ==>ábort",

707 
fP¨am_1
.
œyîm
, 
max_nLayîs_
 );

708 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

710 i‡(
fP¨am_1
.
√vl
 > 
max_Evíts_
) {

711 
kã°
 = 1;

712 
	`¥ötf
("Error:Çumber ofÅrainingÉventsÉxceeds maximum: %i, %i ==>ábort",

713 
fP¨am_1
.
√vl
, 
max_Evíts_
 );

714 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

716 i‡(
fP¨am_1
.
√vt
 > 
max_Evíts_
) {

717 
	`¥ötf
("Error:Çumber ofÅestingÉventsÉxceeds maximum: %i, %i ==>ábort",

718 
fP¨am_1
.
√vt
, 
max_Evíts_
 );

719 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded ");

721 i‡(
fP¨am_1
.
l˛ass
 < 
fNeur_1
.
√ur⁄
[fP¨am_1.
œyîm
 - 1]) {

722 
kã°
 = 1;

723 
	`¥ötf
("Error: wrongÇumber of classesát ouputÜayer: %i != %i ==>ábort\n",

724 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1], fP¨am_1.
l˛ass
);

725 
	`Aºë
("problemÇeedsÅoÑeported ");

727 i‡(
fP¨am_1
.
nv¨
 > 
max_nV¨_
) {

728 
kã°
 = 1;

729 
	`¥ötf
("Error:Çumber of variablesÉxceeds maximum: %i, %i ==>ábort",

730 
fP¨am_1
.
nv¨
, 
fg_max_nV¨_
 );

731 
	`Aºë
("modification of mlpl3_param_lim.inc isÇeeded");

733 
i__1
 = 
fP¨am_1
.
œyîm
;

734 
i__
 = 1; i__ <
i__1
; ++i__) {

735 i‡(
fNeur_1
.
√ur⁄
[
i__
 - 1] > 
max_nNodes_
) {

736 
kã°
 = 1;

737 
	`¥ötf
("Error:Çumber ofÇeuronsátÜayerÉxceeds maximum: %i, %i ==>ábort",

738 
i__
, 
fg_max_nNodes_
 );

741 i‡(
kã°
 == 1) {

742 
	`¥ötf
( " .... strangeÅo be here (2) ... \n");

743 
°d
::
	`exô
(1);

745 
	}
}

747 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

752 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Cout
–
I¡_t
 * , 
DoubÀ_t
 *
xxx
 )

754 
I¡_t
 
i__1
, 
i__2
;

755 
DoubÀ_t
 
d__1
;

757 
DoubÀ_t
 
c__
;

758 
I¡_t
 
i__
, 
j
;

760 
c__
 = 0.;

761 
i__1
 = 
fP¨am_1
.
√vl
;

762 
i__
 = 1; i__ <
i__1
; ++i__) {

763 
	`En_av™t
(&
i__
);

764 
i__2
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

765 
j
 = 1; j <
i__2
; ++j) {

766 i‡(
fV¨n_1
.
n˛ass
[
i__
 - 1] =
j
) {

767 
fNeur_1
.
o
[
j
 - 1] = 1.;

770 
fNeur_1
.
o
[
j
 - 1] = -1.;

773 
d__1
 = 
	`y_ªf
(
fP¨am_1
.
œyîm
, 
j
Ë- 
fNeur_1
.
o
[j - 1];

774 
c__
 +
fDñ_1
.
c€f
[
j
 - 1] * (
d__1
 * d__1);

777 
c__
 /(
DoubÀ_t
Ë(
fP¨am_1
.
√vl
 * fP¨am_1.
l˛ass
) * 2.;

778 *
xxx
 = 
c__
;

779 
fCo°_1
.
™cout
 = 
c__
;

780 
	}
}

782 #unde‡
y_ªf


784 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

785 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

790 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$I∆
()

792 
I¡_t
 
i__1
, 
i__2
;

794 
I¡_t
 
jmax
, 
k
, 
œyî
, 
kk
, 
nq
, 
ƒ
;

796 
i__1
 = 
fP¨am_1
.
nv¨
;

797 
i__1
 = 
fP¨am_1
.
œyîm
;

798 
i__1
 = 
fP¨am_1
.
œyîm
 - 1;

799 
œyî
 = 1;Üayî <
i__1
; ++layer) {

800 
nq
 = 
fNeur_1
.
√ur⁄
[
œyî
] / 10;

801 
ƒ
 = 
fNeur_1
.
√ur⁄
[
œyî
] - 
nq
 * 10;

802 i‡(
ƒ
 == 0) {

803 
kk
 = 
nq
;

806 
kk
 = 
nq
 + 1;

808 
i__2
 = 
kk
;

809 
k
 = 1; k <
i__2
; ++k) {

811 
jmax
 = 
k
 * 10;

812 i‡(
fNeur_1
.
√ur⁄
[
œyî
] < 
jmax
) {

813 
jmax
 = 
fNeur_1
.
√ur⁄
[
œyî
];

818 
	}
}

820 #unde‡
ww_ªf


821 #unde‡
w_ªf


826 
DoubÀ_t
 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Fde¸oi
–
I¡_t
 *
i__
 )

828 
DoubÀ_t
 
ªt_vÆ
;

830 
DoubÀ_t
 
Øa
, 
bbb
;

832 
Øa
 = (
fP¨am_1
.
ïsmö
 - fP¨am_1.
ïsmax
Ë/ (
DoubÀ_t
Ë(fP¨am_1.
nbÀ¨n
 *

833 
fP¨am_1
.
√vl
 - 1);

834 
bbb
 = 
fP¨am_1
.
ïsmax
 - 
Øa
;

835 
ªt_vÆ
 = 
Øa
 * (
DoubÀ_t
Ë(*
i__
Ë+ 
bbb
;

836  
ªt_vÆ
;

837 
	}
}

839 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

844 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$GøphNN
–
I¡_t
 *
ûó∫
, 
DoubÀ_t
 * ,

845 
DoubÀ_t
 * , * , 
I¡_t
 )

847 
I¡_t
 
i__1
, 
i__2
;

849 
DoubÀ_t
 
xmok
[
max_nNodes_
];

851 
DoubÀ_t
 
xmko
[
max_nNodes_
];

852 
I¡_t
 
i__
, 
j
;

853 
I¡_t
 
ix
;

856 
I¡_t
 
nko
[
max_nNodes_
], 
nok
[max_nNodes_];

861 i‡(*
ûó∫
 == 1) {

864 
i__1
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

865 
i__
 = 1; i__ <
i__1
; ++i__) {

866 
nok
[
i__
 - 1] = 0;

867 
nko
[
i__
 - 1] = 0;

868 
xmok
[
i__
 - 1] = 0.;

869 
xmko
[
i__
 - 1] = 0.;

871 
i__1
 = 
fP¨am_1
.
√vl
;

872 
i__
 = 1; i__ <
i__1
; ++i__) {

873 
	`En_av™t
(&
i__
);

874 
i__2
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

875 
j
 = 1; j <
i__2
; ++j) {

877 i‡(
fV¨n_1
.
n˛ass
[
i__
 - 1] =
j
) {

878 ++
nok
[
j
 - 1];

879 
xmok
[
j
 - 1] +
	`y_ªf
(
fP¨am_1
.
œyîm
, j);

882 ++
nko
[
j
 - 1];

883 
xmko
[
j
 - 1] +
	`y_ªf
(
fP¨am_1
.
œyîm
, j);

892 
i__1
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

893 
j
 = 1; j <
i__1
; ++j) {

894 
xmok
[
j
 - 1] /(
DoubÀ_t
Ë
nok
[j - 1];

895 
xmko
[
j
 - 1] /(
DoubÀ_t
Ë
nko
[j - 1];

896 
fNeur_1
.
cut
[
j
 - 1] = (
xmok
[j - 1] + 
xmko
[j - 1]) / 2.;

898 
ix
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

899 
i__1
 = 
ix
;

900 
	}
}

902 #unde‡
y_ªf


907 
DoubÀ_t
 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Sí3a
( )

910 
I¡_t
 
m12
 = 4096;

911 
DoubÀ_t
 
f1
 = 2.44140625e-4;

912 
DoubÀ_t
 
f2
 = 5.96046448e-8;

913 
DoubÀ_t
 
f3
 = 1.45519152e-11;

914 
I¡_t
 
j1
 = 3823;

915 
I¡_t
 
j2
 = 4006;

916 
I¡_t
 
j3
 = 2903;

917 
I¡_t
 
fg_i1
 = 3823;

918 
I¡_t
 
fg_i2
 = 4006;

919 
I¡_t
 
fg_i3
 = 2903;

921 
DoubÀ_t
 
ªt_vÆ
;

922 
I¡_t
 
k3
, 
l3
, 
k2
, 
l2
, 
k1
, 
l1
;

925 
k3
 = 
fg_i3
 * 
j3
;

926 
l3
 = 
k3
 / 
m12
;

927 
k2
 = 
fg_i2
 * 
j3
 + 
fg_i3
 * 
j2
 + 
l3
;

928 
l2
 = 
k2
 / 
m12
;

929 
k1
 = 
fg_i1
 * 
j3
 + 
fg_i2
 * 
j2
 + 
fg_i3
 * 
j1
 + 
l2
;

930 
l1
 = 
k1
 / 
m12
;

931 
fg_i1
 = 
k1
 - 
l1
 * 
m12
;

932 
fg_i2
 = 
k2
 - 
l2
 * 
m12
;

933 
fg_i3
 = 
k3
 - 
l3
 * 
m12
;

934 
ªt_vÆ
 = 
f1
 * (
DoubÀ_t
Ë
fg_i1
 + 
f2
 * (
Flﬂt_t
Ë
fg_i2
 + 
f3
 * (DoubÀ_tË
fg_i3
;

936  
ªt_vÆ
;

937 
	}
}

941 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$F⁄cf
–
I¡_t
 *
i__
, 
DoubÀ_t
 *
u
, DoubÀ_à*
f
 )

944 
DoubÀ_t
 
yy
;

946 i‡(*
u
 / 
fDñ_1
.
ãmp
[*
i__
 - 1] > 170.) {

947 *
f
 = .99999999989999999;

949 i‡(*
u
 / 
fDñ_1
.
ãmp
[*
i__
 - 1] < -170.) {

950 *
f
 = -.99999999989999999;

953 
yy
 = 
TM©h
::
	`Exp
(-(*
u
Ë/ 
fDñ_1
.
ãmp
[*
i__
 - 1]);

954 *
f
 = (1. - 
yy
) / (yy + 1.);

956 
	}
}

958 #unde‡
w_ªf


960 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

965 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Cout2
–
I¡_t
 * , 
DoubÀ_t
 *
yyy
 )

967 
I¡_t
 
i__1
, 
i__2
;

968 
DoubÀ_t
 
d__1
;

970 
DoubÀ_t
 
c__
;

971 
I¡_t
 
i__
, 
j
;

973 
c__
 = 0.;

974 
i__1
 = 
fP¨am_1
.
√vt
;

975 
i__
 = 1; i__ <
i__1
; ++i__) {

976 
	`En_av™t2
(&
i__
);

977 
i__2
 = 
fNeur_1
.
√ur⁄
[
fP¨am_1
.
œyîm
 - 1];

978 
j
 = 1; j <
i__2
; ++j) {

979 i‡(
fV¨n_1
.
m˛ass
[
i__
 - 1] =
j
) {

980 
fNeur_1
.
o
[
j
 - 1] = 1.;

983 
fNeur_1
.
o
[
j
 - 1] = -1.;

986 
d__1
 = 
	`y_ªf
(
fP¨am_1
.
œyîm
, 
j
Ë- 
fNeur_1
.
o
[j - 1];

987 
c__
 +
fDñ_1
.
c€f
[
j
 - 1] * (
d__1
 * d__1);

990 
c__
 /(
DoubÀ_t
Ë(
fP¨am_1
.
√vt
 * fP¨am_1.
l˛ass
) * 2.;

991 *
yyy
 = 
c__
;

992 
	}
}

994 #unde‡
y_ªf


996 
	#xx_ªf
(
a_1
,
a_2
Ë
	`fV¨n3_1
◊_1,a_2)

	)

1001 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Le˚v2
–
I¡_t
 *
kã°
, 
DoubÀ_t
 *
tout2
, DoubÀ_à*
tö2
 )

1003 
I¡_t
 
i__1
, 
i__2
;

1005 
I¡_t
 
i__
, 
j
, 
l
;

1007 
I¡_t
 
ikíd
;

1008 
DoubÀ_t
 
xpg
[
max_nV¨_
];

1015 *
kã°
 = 0;

1016 
i__1
 = 
fP¨am_1
.
l˛ass
;

1020 
i__1
 = 
fP¨am_1
.
√vt
;

1021 
i__
 = 1; i__ <
i__1
; ++i__) {

1022 
	`D©aI¡îÁ˚
(
tout2
, 
tö2
, &
fg_999
, &
fg_0
, &
fP¨am_1
.
√vt
, &fP¨am_1.
nv¨
,

1023 
xpg
, &
fV¨n_1
.
m˛ass
[
i__
 - 1], &
ikíd
);

1025 i‡(
ikíd
 == -1) {

1029 
i__2
 = 
fP¨am_1
.
nv¨
;

1030 
j
 = 1; j <
i__2
; ++j) {

1031 
	`xx_ªf
(
i__
, 
j
Ë
xpg
[j - 1];

1035 
i__1
 = 
fP¨am_1
.
√vt
;

1036 
i__
 = 1; i__ <
i__1
; ++i__) {

1037 
i__2
 = 
fP¨am_1
.
nv¨
;

1038 
l
 = 1;Ü <
i__2
; ++l) {

1039 i‡(
fV¨n_1
.
xmax
[
l
 - 1] =(
Flﬂt_t
)0. && fV¨n_1.
xmö
[l - 1] == (

1040 
Flﬂt_t
)0.) {

1041 
	`xx_ªf
(
i__
, 
l
Ë(
Flﬂt_t
)0.;

1044 
	`xx_ªf
(
i__
, 
l
Ëxx_ªf(i__,ÜË- (
fV¨n_1
.
xmax
[l - 1] +

1045 
fV¨n_1
.
xmö
[
l
 - 1]) / 2.;

1046 
	`xx_ªf
(
i__
, 
l
Ëxx_ªf(i__,ÜË/ ((
fV¨n_1
.
xmax
[l - 1] -

1047 
fV¨n_1
.
xmö
[
l
 - 1]) / 2.);

1051 
	}
}

1053 #unde‡
xx_ªf


1055 
	#w_ªf
(
a_1
,
a_2
,
a_3
Ë
fNeur_1
.
w
[(◊_3)*
max_nNodes_
 + (a_2))*
max_nLayîs_
 +á_1 - 187]

	)

1056 
	#x_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
x
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

1057 
	#y_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
y
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

1058 
	#ww_ªf
(
a_1
,
a_2
Ë
fNeur_1
.
ww
[◊_2)*
max_nLayîs_
 +á_1 - 7]

	)

1059 
	#xx_ªf
(
a_1
,
a_2
Ë
	`fV¨n3_1
◊_1,a_2)

	)

1064 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$En_av™t2
–
I¡_t
 *
õvít
 )

1066 
I¡_t
 
i__1
, 
i__2
, 
i__3
;

1068 
DoubÀ_t
 
f
;

1069 
I¡_t
 
i__
, 
j
;

1070 
I¡_t
 
œyî
;

1072 
i__1
 = 
fNeur_1
.
√ur⁄
[0];

1073 
i__
 = 1; i__ <
i__1
; ++i__) {

1074 
	`y_ªf
(1, 
i__
Ë
	`xx_ªf
(*
õvít
, i__);

1076 
i__1
 = 
fP¨am_1
.
œyîm
 - 1;

1077 
œyî
 = 1;Üayî <
i__1
; ++layer) {

1078 
i__2
 = 
fNeur_1
.
√ur⁄
[
œyî
];

1079 
j
 = 1; j <
i__2
; ++j) {

1080 
	`x_ªf
(
œyî
 + 1, 
j
) = 0.;

1081 
i__3
 = 
fNeur_1
.
√ur⁄
[
œyî
 - 1];

1082 
i__
 = 1; i__ <
i__3
; ++i__) {

1083 
	`x_ªf
(
œyî
 + 1, 
j
Ëx_ªf÷ayî + 1, jË+ 
	`y_ªf
÷ayî, 
i__
)

1084 * 
	`w_ªf
(
œyî
 + 1, 
j
, 
i__
);

1086 
	`x_ªf
(
œyî
 + 1, 
j
Ëx_ªf÷ayî + 1, jË+ 
	`ww_ªf
(layer + 1, j);

1087 
i__3
 = 
œyî
 + 1;

1088 
	`F⁄cf
(&
i__3
, &
	`x_ªf
(
œyî
 + 1, 
j
), &
f
);

1089 
	`y_ªf
(
œyî
 + 1, 
j
Ë
f
;

1093 
	}
}

1095 #unde‡
xx_ªf


1096 #unde‡
ww_ªf


1097 #unde‡
y_ªf


1098 #unde‡
x_ªf


1099 #unde‡
w_ªf


1103 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$Aºë
–c⁄° * 
mŸ
 )

1106 
	`¥ötf
("%s: %s",
fg_MëhodName
, 
mŸ
);

1107 
°d
::
	`exô
(1);

1108 
	}
}

1113 
	gTMVA
::
MëhodCFMÕANN_Utûs
::
	$CﬁÀ˘V¨
–
I¡_t
 * , I¡_à* , 
DoubÀ_t
 * )

1131 
	}
}

	@src/MethodCategory.cxx

45 
	~"TMVA/MëhodC©eg‹y.h
"

47 
	~<Æg‹ôhm
>

48 
	~<iom™ù
>

49 
	~<ve˘‹
>

50 
	~<io°ªam
>

52 
	~"Rio°ªam.h
"

53 
	~"TR™dom3.h
"

54 
	~"TM©h.h
"

55 
	~"TObjSåög.h
"

56 
	~"TH1F.h
"

57 
	~"TGøph.h
"

58 
	~"TS∂öe.h
"

59 
	~"TDúe˘‹y.h
"

60 
	~"TTªeF‹muœ.h
"

62 
	~"TMVA/CœssifõrFa˘‹y.h
"

63 
	~"TMVA/C⁄fig.h
"

64 
	~"TMVA/D©aSë.h
"

65 
	~"TMVA/D©aSëInfo.h
"

66 
	~"TMVA/D©aSëM™agî.h
"

67 
	~"TMVA/IMëhod.h
"

68 
	~"TMVA/MëhodBa£.h
"

69 
	~"TMVA/MëhodComposôeBa£.h
"

70 
	~"TMVA/MsgLoggî.h
"

71 
	~"TMVA/PDF.h
"

72 
	~"TMVA/R™kög.h
"

73 
	~"TMVA/Timî.h
"

74 
	~"TMVA/Toﬁs.h
"

75 
	~"TMVA/Ty≥s.h
"

76 
	~"TMVA/V¨übÀInfo.h
"

77 
	~"TMVA/V¨übÀRóº™geTønsf‹m.h
"

79 
	$REGISTER_METHOD
(
C©eg‹y
)

81 
	`CœssImp
(
TMVA
::
MëhodC©eg‹y
);

86 
TMVA
::
MëhodC©eg‹y
::
	$MëhodC©eg‹y
–c⁄° 
TSåög
& 
jobName
,

87 c⁄° 
TSåög
& 
mëhodTôÀ
,

88 
D©aSëInfo
& 
theD©a
,

89 c⁄° 
TSåög
& 
theO±i⁄
 )

90 : 
TMVA
::
	`MëhodComposôeBa£
–
jobName
, 
Ty≥s
::
kC©eg‹y
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

91 
	`fC©Tªe
(0),

92 
	$fD©aSëM™agî
(
NULL
)

94 
	}
}

99 
	gTMVA
::
MëhodC©eg‹y
::
	$MëhodC©eg‹y
–
D©aSëInfo
& 
dsi
,

100 c⁄° 
TSåög
& 
theWeightFûe
)

101 : 
TMVA
::
	`MëhodComposôeBa£
–
Ty≥s
::
kC©eg‹y
, 
dsi
, 
theWeightFûe
),

102 
	`fC©Tªe
(0),

103 
	$fD©aSëM™agî
(
NULL
)

105 
	}
}

110 
	gTMVA
::
MëhodC©eg‹y
::~
	$MëhodC©eg‹y
( )

112 
°d
::
ve˘‹
<
TTªeF‹muœ
*>::
ôî©‹
 
f‹mIt
 = 
fC©F‹muœs
.
	`begö
();

113 
°d
::
ve˘‹
<
TTªeF‹muœ
*>::
ôî©‹
 
œ°F
 = 
fC©F‹muœs
.
	`íd
();

114 ;
f‹mIt
!=
œ°F
; ++f‹mItË
dñëe
 *formIt;

115 
dñëe
 
fC©Tªe
;

116 
	}
}

122 
Boﬁ_t
 
	gTMVA
::
MëhodC©eg‹y
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UI¡_à
numbîT¨gës
 )

124 
°d
::
ve˘‹
<
IMëhod
*>::
ôî©‹
 
ôrMëhod
 = 
fMëhods
.
	`begö
();

127 ; 
ôrMëhod
 !
fMëhods
.
	`íd
(); ++itrMethod ) {

128 i‡–!(*
ôrMëhod
)->
	`HasA«lysisTy≥
(
ty≥
, 
numbîCœs£s
, 
numbîT¨gës
) )

129  
kFALSE
;

131  
kTRUE
;

132 
	}
}

137 
	gTMVA
::
MëhodC©eg‹y
::
	$De˛¨eO±i⁄s
()

139 
	}
}

144 
TMVA
::
IMëhod
* TMVA::
MëhodC©eg‹y
::
	$AddMëhod
–c⁄° 
TCut
& 
theCut
,

145 c⁄° 
TSåög
& 
theV¨übÀs
,

146 
Ty≥s
::
EMVA
 
theMëhod
 ,

147 c⁄° 
TSåög
& 
theTôÀ
,

148 c⁄° 
TSåög
& 
theO±i⁄s
 )

150 
°d
::
°rög
 
addedMëhodName
 = std::
	`°rög
(
Ty≥s
::
	`In°™˚
().
	`GëMëhodName
(
theMëhod
));

152 
	`Log
(Ë<< 
kINFO
 << "Addög sub-˛assifõr: " << 
addedMëhodName
 << "::" << 
theTôÀ
 << 
Endl
;

154 
D©aSëInfo
& 
dsi
 = 
	`Cª©eC©eg‹yDSI
(
theCut
, 
theV¨übÀs
, 
theTôÀ
);

156 
IMëhod
* 
addedMëhod
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
(
addedMëhodName
,
	`GëJobName
(),
theTôÀ
,
dsi
,
theO±i⁄s
);

158 
MëhodBa£
 *
mëhod
 = (
dy«mic_ˇ°
<MëhodBa£*>(
addedMëhod
));

159 if(
mëhod
==0)  0;

161 if(
fModñPîsi°í˚
Ë
mëhod
->
	`SëWeightFûeDú
(
fFûeDú
);

162 
mëhod
->
	`SëModñPîsi°í˚
(
fModñPîsi°í˚
);

163 
mëhod
->
	`SëA«lysisTy≥
–
fA«lysisTy≥
 );

164 
mëhod
->
	`SëupMëhod
();

165 
mëhod
->
	`P¨£O±i⁄s
();

166 
mëhod
->
	`Pro˚ssSëup
();

167 
mëhod
->
	`SëFûe
(
fFûe
);

168 
mëhod
->
	`SëSûítFûe
(
	`IsSûítFûe
());

172 c⁄° 
TSåög
 
	`dúName
(
	`F‹m
("Mëhod_%s",
mëhod
->
	`GëMëhodTy≥Name
().
	`D©a
()));

173 
TDúe˘‹y
 * 
dú
 = 
	`Ba£Dú
()->
	`GëDúe˘‹y
(
dúName
);

174 i‡(
dú
 !0Ë
mëhod
->
	`SëMëhodBa£Dú
( dir );

175 
mëhod
->
	`SëMëhodBa£Dú
–
	`Ba£Dú
()->
	`mkdú
(
dúName
,
	`F‹m
("Dúe˘‹y f‹áŒ %†mëhods", mëhod->
	`GëMëhodTy≥Name
().
	`D©a
())) );

181 
mëhod
->
	`CheckSëup
();

184 
mëhod
->
	`DißbÀWrôög
–
kTRUE
 );

187 
fMëhods
.
	`push_back
(
mëhod
);

188 
fC©eg‹yCuts
.
	`push_back
(
theCut
);

189 
fV¨s
.
	`push_back
(
theV¨übÀs
);

191 
D©aSëInfo
& 
¥im¨yDSI
 = 
	`D©aInfo
();

193 
UI¡_t
 
√wS≥˘©‹Index
 = 
¥im¨yDSI
.
	`GëS≥˘©‹Infos
().
	`size
();

194 
fC©eg‹yS≥cIdx
.
	`push_back
(
√wS≥˘©‹Index
);

196 
¥im¨yDSI
.
	`AddS≥˘©‹
–
	`F‹m
("%s_ˇt%i:=%s", 
	`GëName
(),()
fMëhods
.
	`size
(),
theCut
.
	`GëTôÀ
()),

197 
	`F‹m
("%s:%s",
	`GëName
(),
mëhod
->GetName()),

200  
mëhod
;

201 
	}
}

206 
	gTMVA
::
D©aSëInfo
& 
TMVA
::
MëhodC©eg‹y
::
	$Cª©eC©eg‹yDSI
(c⁄° 
TCut
& 
theCut
,

207 c⁄° 
TSåög
& 
theV¨übÀs
,

208 c⁄° 
TSåög
& 
theTôÀ
)

211 
TSåög
 
dsiName
=
theTôÀ
+"_dsi";

212 
D©aSëInfo
& 
ﬁdDSI
 = 
	`D©aInfo
();

213 
D©aSëInfo
* 
dsi
 = 
√w
 
	`D©aSëInfo
(
dsiName
);

217 
fD©aSëM™agî
->
	`AddD©aSëInfo
(*
dsi
);

220 
°d
::
ve˘‹
<
V¨übÀInfo
>::
ôî©‹
 
ôrV¨Info
;

222 
ôrV¨Info
 = 
ﬁdDSI
.
	`GëT¨gëInfos
().
	`begö
(); iåV¨Infÿ!ﬁdDSI.GëT¨gëInfos().
	`íd
(); itrVarInfo++)

223 
dsi
->
	`AddT¨gë
(*
ôrV¨Info
);

225 
ôrV¨Info
 = 
ﬁdDSI
.
	`GëS≥˘©‹Infos
().
	`begö
(); iåV¨Infÿ!ﬁdDSI.GëS≥˘©‹Infos().
	`íd
(); itrVarInfo++)

226 
dsi
->
	`AddS≥˘©‹
(*
ôrV¨Info
);

229 
°d
::
ve˘‹
<
TSåög
> 
v¨übÀs
 = 
	`gToﬁs
().
	`S∂ôSåög
(
theV¨übÀs
,':' );

232 
°d
::
ve˘‹
<
UI¡_t
> 
v¨M≠
;

233 
I¡_t
 
cou¡î
=0;

236 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ôrV¨übÀs
;

237 
Boﬁ_t
 
found
 = 
kFALSE
;

240 
ôrV¨übÀs
 = 
v¨übÀs
.
	`begö
(); iåV¨übÀ†!v¨übÀs.
	`íd
(); itrVariables++) {

241 
cou¡î
=0;

244 
ôrV¨Info
 = 
ﬁdDSI
.
	`GëV¨übÀInfos
().
	`begö
(); iåV¨Infÿ!ﬁdDSI.GëV¨übÀInfos().
	`íd
(); itrVarInfo++) {

245 if((*
ôrV¨übÀs
==
ôrV¨Info
->
	`GëLabñ
()) ) {

248 
dsi
->
	`AddV¨übÀ
(*
ôrV¨Info
);

249 
v¨M≠
.
	`push_back
(
cou¡î
);

250 
found
 = 
kTRUE
;

252 
cou¡î
++;

256 
ôrV¨Info
 = 
ﬁdDSI
.
	`GëS≥˘©‹Infos
().
	`begö
(); iåV¨Infÿ!ﬁdDSI.GëS≥˘©‹Infos().
	`íd
(); itrVarInfo++) {

257 if((*
ôrV¨übÀs
==
ôrV¨Info
->
	`GëLabñ
()) ) {

260 
dsi
->
	`AddV¨übÀ
(*
ôrV¨Info
);

261 
v¨M≠
.
	`push_back
(
cou¡î
);

262 
found
 = 
kTRUE
;

264 
cou¡î
++;

268 i‡(!
found
) {

269 
	`Log
(Ë<< 
kFATAL
 <<"Thêv¨übÀ " << 
ôrV¨übÀs
->
	`D©a
(Ë<< " wa†nŸ foundánd couldÇŸ bêadded " << 
Endl
;

271 
found
 = 
kFALSE
;

275 i‡(
theV¨übÀs
=="") {

276 
UI¡_t
 
i
=0; i<
ﬁdDSI
.
	`GëV¨übÀInfos
().
	`size
(); i++) {

277 
dsi
->
	`AddV¨übÀ
(
ﬁdDSI
.
	`GëV¨übÀInfos
()[
i
]);

278 
v¨M≠
.
	`push_back
(
i
);

283 
fV¨M≠s
.
	`push_back
(
v¨M≠
);

286 
UI¡_t
 
nCœs£s
=
ﬁdDSI
.
	`GëNCœs£s
();

287 
TSåög
 
˛assName
;

289 
UI¡_t
 
i
=0; i<
nCœs£s
; i++) {

290 
˛assName
 = 
ﬁdDSI
.
	`GëCœssInfo
(
i
)->
	`GëName
();

291 
dsi
->
	`AddCœss
(
˛assName
);

292 
dsi
->
	`SëCut
(
ﬁdDSI
.
	`GëCut
(
i
),
˛assName
);

293 
dsi
->
	`AddCut
(
theCut
,
˛assName
);

294 
dsi
->
	`SëWeightEx¥essi⁄
(
ﬁdDSI
.
	`GëWeightEx¥essi⁄
(
i
),
˛assName
);

298 
dsi
->
	`SëS∂ôO±i⁄s
(
ﬁdDSI
.
	`GëS∂ôO±i⁄s
());

299 
dsi
->
	`SëRoŸDú
(
ﬁdDSI
.
	`GëRoŸDú
());

300 
TSåög
 
	`n‹m
(
ﬁdDSI
.
	`GëN‹mÆiz©i⁄
().
	`D©a
());

301 
dsi
->
	`SëN‹mÆiz©i⁄
(
n‹m
);

303 
D©aSëInfo
& 
dsiRe„ªn˚
(*
dsi
);

305  
dsiRe„ªn˚
;

306 
	}
}

311 
	gTMVA
::
MëhodC©eg‹y
::
	$Inô
()

313 
	}
}

318 
TMVA
::
MëhodC©eg‹y
::
	$InôCúcuœrTªe
(c⁄° 
D©aSëInfo
& 
dsi
)

320 
dñëe
 
fC©Tªe
;

322 
°d
::
ve˘‹
<
V¨übÀInfo
>::
c⁄°_ôî©‹
 
viIt
;

323 c⁄° 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨s
 = 
dsi
.
	`GëV¨übÀInfos
();

324 c⁄° 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
•ecs
 = 
dsi
.
	`GëS≥˘©‹Infos
();

326 
Boﬁ_t
 
hasAŒExã∫ÆLöks
 = 
kTRUE
;

327 
viIt
 = 
v¨s
.
	`begö
(); viIà!v¨s.
	`íd
(); ++viIt)

328 if–
viIt
->
	`GëExã∫ÆLök
() == 0 ) {

329 
hasAŒExã∫ÆLöks
 = 
kFALSE
;

332 
viIt
 = 
•ecs
.
	`begö
(); viIà!•ecs.
	`íd
(); ++viIt)

333 if–
viIt
->
	`GëExã∫ÆLök
() == 0 ) {

334 
hasAŒExã∫ÆLöks
 = 
kFALSE
;

338 if(!
hasAŒExã∫ÆLöks
) ;

345 
TDúe˘‹y
::
TC⁄ãxt
 
	`˘xt
(
nuŒ±r
);

346 
fC©Tªe
 = 
√w
 
	`TTªe
(
	`F‹m
("Cúc%s",
	`GëMëhodName
().
	`D©a
()),"Circular Tree for categorization");

347 
fC©Tªe
->
	`SëCúcuœr
(1);

350 
viIt
 = 
v¨s
.
	`begö
(); viIà!v¨s.
	`íd
(); ++viIt) {

351 c⁄° 
V¨übÀInfo
& 
vi
 = *
viIt
;

352 
fC©Tªe
->
	`Bønch
(
vi
.
	`GëEx¥essi⁄
(),(
Flﬂt_t
*)vi.
	`GëExã∫ÆLök
(), 
	`TSåög
(vi.GetExpression())+TString("/F"));

354 
viIt
 = 
•ecs
.
	`begö
(); viIà!•ecs.
	`íd
(); ++viIt) {

355 c⁄° 
V¨übÀInfo
& 
vi
 = *
viIt
;

356 if(
vi
.
	`GëV¨Ty≥
()=='C') ;

357 
fC©Tªe
->
	`Bønch
(
vi
.
	`GëEx¥essi⁄
(),(
Flﬂt_t
*)vi.
	`GëExã∫ÆLök
(), 
	`TSåög
(vi.GetExpression())+TString("/F"));

360 
UI¡_t
 
ˇt
=0; c©!=
fC©eg‹yCuts
.
	`size
(); ++cat) {

361 
fC©F‹muœs
.
	`push_back
(
√w
 
	`TTªeF‹muœ
(
	`F‹m
("C©eg‹y_%i",
ˇt
), 
fC©eg‹yCuts
[ˇt].
	`GëTôÀ
(), 
fC©Tªe
));

363 
	}
}

368 
	gTMVA
::
MëhodC©eg‹y
::
	$Tøö
()

371 c⁄° 
I¡_t
 
MöNoTøöögEvíts
 = 10;

373 
Ty≥s
::
EA«lysisTy≥
 
™ÆysisTy≥
 = 
	`GëA«lysisTy≥
();

376 
	`Log
(Ë<< 
kINFO
 << "Traináll sub-classifiers for "

377 << (
™ÆysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regªssi⁄" : "Cœssifiˇti⁄"Ë<< " ..." << 
Endl
;

380 i‡(
fMëhods
.
	`em±y
()) {

381 
	`Log
(Ë<< 
kINFO
 << "...nŸhög foundÅÿåaö" << 
Endl
;

385 
°d
::
ve˘‹
<
IMëhod
*>::
ôî©‹
 
ôrMëhod
;

388 
ôrMëhod
 = 
fMëhods
.
	`begö
(); iåMëhod !fMëhods.
	`íd
(); ++itrMethod ) {

390 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

391 if(!
mva
) ;

392 
mva
->
	`SëA«lysisTy≥
–
™ÆysisTy≥
 );

393 i‡(!
mva
->
	`HasA«lysisTy≥
–
™ÆysisTy≥
,

394 
mva
->
	`D©aInfo
().
	`GëNCœs£s
(),

395 
mva
->
	`D©aInfo
().
	`GëNT¨gës
() ) ) {

396 
	`Log
(Ë<< 
kWARNING
 << "Mëhod " << 
mva
->
	`GëMëhodTy≥Name
() << " isÇot capable of handling " ;

397 i‡(
™ÆysisTy≥
 =
Ty≥s
::
kRegªssi⁄
)

398 
	`Log
(Ë<< "ªgªssi⁄ wôh " << 
mva
->
	`D©aInfo
().
	`GëNT¨gës
(Ë<< "Å¨gës." << 
Endl
;

400 
	`Log
(Ë<< "˛assifiˇti⁄ wôh " << 
mva
->
	`D©aInfo
().
	`GëNCœs£s
(Ë<< " cœs£s." << 
Endl
;

401 
ôrMëhod
 = 
fMëhods
.
	`îa£
( itrMethod );

404 i‡(
mva
->
	`D©a
()->
	`GëNTøöögEvíts
(Ë>
MöNoTøöögEvíts
) {

406 
	`Log
(Ë<< 
kINFO
 << "Tøö mëhod: " << 
mva
->
	`GëMëhodName
() << " for "

407 << (
™ÆysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 ? "Regªssi⁄" : "Cœssifiˇti⁄"Ë<< 
Endl
;

408 
mva
->
	`TøöMëhod
();

409 
	`Log
(Ë<< 
kINFO
 << "Tøöög föished" << 
Endl
;

413 
	`Log
(Ë<< 
kWARNING
 << "Mëhod " << 
mva
->
	`GëMëhodName
()

415 << 
mva
->
	`D©a
()->
	`GëNTøöögEvíts
()

416 << "]Åh™Ñequúed [" << 
MöNoTøöögEvíts
 << "]" << 
Endl
;

418 
	`Log
(Ë<< 
kERROR
 << " w/ÿåaöög/ã°Évít†f‹Åh© c©eg‹y, I bëã∏°› hîê™dÜë you fix " << 
Endl
;

419 
	`Log
(Ë<< 
kFATAL
 << "th© o√ fú°, othîwi£Åhög†gëÅoÿmessyÜ©î ... " << 
Endl
;

424 i‡(
™ÆysisTy≥
 !
Ty≥s
::
kRegªssi⁄
) {

427 
	`Log
(Ë<< 
kINFO
 << "BegöÑ™kög o‡öpuàv¨übÀs..." << 
Endl
;

428 
ôrMëhod
 = 
fMëhods
.
	`begö
(); iåMëhod !fMëhods.
	`íd
(); itrMethod++) {

429 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

430 i‡(
mva
 && mva->
	`D©a
()->
	`GëNTøöögEvíts
(Ë>
MöNoTøöögEvíts
) {

431 c⁄° 
R™kög
* 
ønkög
 = (*
ôrMëhod
)->
	`Cª©eR™kög
();

432 i‡(
ønkög
 != 0)

433 
ønkög
->
	`Pröt
();

435 
	`Log
(Ë<< 
kINFO
 << "No variableÑanking supplied by classifier: "

436 << 
dy«mic_ˇ°
<
MëhodBa£
*>(*
ôrMëhod
)->
	`GëMëhodName
(Ë<< 
Endl
;

440 
	}
}

445 
	gTMVA
::
MëhodC©eg‹y
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

447 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

448 
	`gToﬁs
().
	`AddAâr
–
wght
, "NSubMëhods", 
fMëhods
.
	`size
() );

449 * 
	`submëhod
(0);

451 
°d
::
ve˘‹
<
IMëhod
*>::
ôî©‹
 
ôrMëhod
;

454 
UI¡_t
 
i
=0; i<
fMëhods
.
	`size
(); i++) {

455 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
i
]);

456 
submëhod
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "SubMethod");

457 
	`gToﬁs
().
	`AddAâr
(
submëhod
, "Index", 
i
);

458 
	`gToﬁs
().
	`AddAâr
(
submëhod
, "Mëhod", 
mëhod
->
	`GëMëhodTy≥Name
(Ë+ "::" + mëhod->
	`GëMëhodName
());

459 
	`gToﬁs
().
	`AddAâr
(
submëhod
, "Cut", 
fC©eg‹yCuts
[
i
]);

460 
	`gToﬁs
().
	`AddAâr
(
submëhod
, "V¨übÀs", 
fV¨s
[
i
]);

461 
mëhod
->
	`WrôeSèãToXML
–
submëhod
 );

463 
	}
}

468 
	gTMVA
::
MëhodC©eg‹y
::
	$RódWeightsFromXML
–* 
wghäode
 )

470 
UI¡_t
 
nSubMëhods
;

471 
TSåög
 
fuŒMëhodName
;

472 
TSåög
 
mëhodTy≥
;

473 
TSåög
 
mëhodTôÀ
;

474 
TSåög
 
theCutSåög
;

475 
TSåög
 
theV¨übÀs
;

476 
I¡_t
 
tôÀLígth
;

477 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NSubMëhods", 
nSubMëhods
 );

478 * 
subMëhodNode
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

480 
	`Log
(Ë<< 
kINFO
 << "Re¸ótög sub-˛assifõr†‰om XML-fûê" << 
Endl
;

483 
UI¡_t
 
i
=0; i<
nSubMëhods
; i++) {

484 
	`gToﬁs
().
	`RódAâr
–
subMëhodNode
, "Mëhod", 
fuŒMëhodName
 );

485 
	`gToﬁs
().
	`RódAâr
–
subMëhodNode
, "Cut", 
theCutSåög
 );

486 
	`gToﬁs
().
	`RódAâr
–
subMëhodNode
, "V¨übÀs", 
theV¨übÀs
 );

489 
mëhodTy≥
 = 
	`fuŒMëhodName
(0,
fuŒMëhodName
.
	`Index
("::"));

490 i‡(
mëhodTy≥
.
	`C⁄èös
(" ")ËmëhodTy≥ = 
	`mëhodTy≥
(mëhodTy≥.
	`La°
(' ')+1,mëhodTy≥.
	`Lígth
());

493 
tôÀLígth
 = 
fuŒMëhodName
.
	`Lígth
()-fuŒMëhodName.
	`Index
("::")-2;

494 
mëhodTôÀ
 = 
	`fuŒMëhodName
(
fuŒMëhodName
.
	`Index
("::")+2,
tôÀLígth
);

497 
D©aSëInfo
& 
dsi
 = 
	`Cª©eC©eg‹yDSI
(
	`TCut
(
theCutSåög
), 
theV¨übÀs
, 
mëhodTôÀ
);

500 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>–
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
–
mëhodTy≥
.
	`D©a
(),

501 
dsi
, "none" ) );

502 if(
mëhod
==0)

503 
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸ cª©êsub-mëhod " << 
mëhod
 << " from XML." << 
Endl
;

505 
mëhod
->
	`SëupMëhod
();

506 
mëhod
->
	`RódSèãFromXML
(
subMëhodNode
);

508 
fMëhods
.
	`push_back
(
mëhod
);

509 
fC©eg‹yCuts
.
	`push_back
(
	`TCut
(
theCutSåög
));

510 
fV¨s
.
	`push_back
(
theV¨übÀs
);

512 
D©aSëInfo
& 
¥im¨yDSI
 = 
	`D©aInfo
();

514 
UI¡_t
 
•e˘©‹Idx
 = 10000;

515 
UI¡_t
 
cou¡î
=0;

518 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
•e˘©‹s
=
¥im¨yDSI
.
	`GëS≥˘©‹Infos
();

519 
°d
::
ve˘‹
<
V¨übÀInfo
>::
ôî©‹
 
ôrV¨Info
;

520 
TSåög
 
•ecName

	`F‹m
("%s_ˇt%i", 
	`GëName
(),()
fC©eg‹yS≥cIdx
.
	`size
()+1);

522 
ôrV¨Info
 = 
•e˘©‹s
.
	`begö
(); iåV¨Infÿ!•e˘©‹s.
	`íd
(); ++ôrV¨Info, ++
cou¡î
) {

523 if((
•ecName
==
ôrV¨Info
->
	`GëLabñ
()Ë|| (•ecName==ôrV¨Info->
	`GëEx¥essi⁄
())) {

524 
•e˘©‹Idx
=
cou¡î
;

525 
fC©eg‹yS≥cIdx
.
	`push_back
(
•e˘©‹Idx
);

530 
subMëhodNode
 = 
	`gToﬁs
().
	`GëNextChûd
(subMethodNode);

533 
	`InôCúcuœrTªe
(
	`D©aInfo
());

535 
	}
}

540 
	gTMVA
::
MëhodC©eg‹y
::
	$Pro˚ssO±i⁄s
()

542 
	}
}

550 
TMVA
::
MëhodC©eg‹y
::
	$GëHñpMesßge
() const

552 
	`Log
(Ë<< 
Endl
;

553 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

554 
	`Log
(Ë<< 
Endl
;

555 
	`Log
(Ë<< "Thi†mëhodáŒow†tÿdeföêdif„ª¡ c©eg‹õ†o‡evíts. The" <<
Endl
;

556 
	`Log
(Ë<< "ˇãg‹õ†¨êdeföed vü cut†⁄Åhêv¨übÀs. F‹Éach" << 
Endl
;

557 
	`Log
(Ë<< "ˇãg‹y,á dif„ª¡ cœssifõ∏™d së o‡v¨übÀ†ˇ¿be" <<
Endl
;

558 
	`Log
(Ë<< "•ecifõd. Thêˇãg‹õ†whicháª deföed f‹Åhi†mëhod mu°" << 
Endl
;

559 
	`Log
(Ë<< "bêdisjoöt." << 
Endl
;

560 
	}
}

565 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodC©eg‹y
::
	$Cª©eR™kög
()

568 
	}
}

572 
Boﬁ_t
 
	gTMVA
::
MëhodC©eg‹y
::
	$Pas£sCut
–c⁄° 
Evít
* 
ev
, 
UI¡_t
 
mëhodIdx
 )

577 i‡(
fC©Tªe
) {

578 i‡(
mëhodIdx
>=
fC©F‹muœs
.
	`size
()) {

579 
	`Log
(Ë<< 
kFATAL
 << "L¨gêmëhod index " << 
mëhodIdx
 << ",Çumber of category formulas = "

580 << 
fC©F‹muœs
.
	`size
(Ë<< 
Endl
;

582 
TTªeF‹muœ
* 
f
 = 
fC©F‹muœs
[
mëhodIdx
];

583  
f
->
	`EvÆIn°™˚
(0) > 0.5;

589 i‡(
mëhodIdx
>=
fC©eg‹yS≥cIdx
.
	`size
()) {

590 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿mëhod index " << 
mëhodIdx
 << " maximumállowed index="

591 << 
fC©eg‹yS≥cIdx
.
	`size
(Ë<< 
Endl
;

593 
UI¡_t
 
•e˘©‹Idx
 = 
fC©eg‹yS≥cIdx
[
mëhodIdx
];

594 
Flﬂt_t
 
•ecVÆ
 = 
ev
->
	`GëS≥˘©‹
(
•e˘©‹Idx
);

595 
Boﬁ_t
 
∑ss
 = (
•ecVÆ
>0.5);

596  
∑ss
;

598 
	}
}

603 
DoubÀ_t
 
	gTMVA
::
MëhodC©eg‹y
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

605 i‡(
fMëhods
.
	`em±y
())  0;

607 
UI¡_t
 
mëhodToU£
 = 0;

608 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

611 
I¡_t
 
suôabÀCutsN
 = 0;

613 
UI¡_t
 
i
=0; i<
fMëhods
.
	`size
(); ++i) {

614 i‡(
	`Pas£sCut
(
ev
, 
i
)) {

615 ++
suôabÀCutsN
;

616 
mëhodToU£
=
i
;

620 i‡(
suôabÀCutsN
 == 0) {

621 
	`Log
(Ë<< 
kWARNING
 << "Evíàd€†nŸÜõ wôhöÅhêcuào‡™y sub-˛assifõr." << 
Endl
;

625 i‡(
suôabÀCutsN
 > 1) {

626 
	`Log
(Ë<< 
kFATAL
 << "Thêdeföed c©eg‹õ†¨ênŸ disjoöt." << 
Endl
;

631 
ev
->
	`SëV¨übÀAº™gemít
(&
fV¨M≠s
[
mëhodToU£
]);

632 
DoubÀ_t
 
mvaVÆue
 = 
dy«mic_ˇ°
<
MëhodBa£
*>(
fMëhods
[
mëhodToU£
])->
	`GëMvaVÆue
(
ev
,
îr
,
îrUµî
);

633 
ev
->
	`SëV¨übÀAº™gemít
(0);

635  
mvaVÆue
;

636 
	}
}

643 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
> &
TMVA
::
MëhodC©eg‹y
::
	$GëRegªssi⁄VÆues
()

645 i‡(
fMëhods
.
	`em±y
()Ë 
MëhodBa£
::
	`GëRegªssi⁄VÆues
();

647 
UI¡_t
 
mëhodToU£
 = 0;

648 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

651 
I¡_t
 
suôabÀCutsN
 = 0;

653 
UI¡_t
 
i
=0; i<
fMëhods
.
	`size
(); ++i) {

654 i‡(
	`Pas£sCut
(
ev
, 
i
)) {

655 ++
suôabÀCutsN
;

656 
mëhodToU£
=
i
;

660 i‡(
suôabÀCutsN
 == 0) {

661 
	`Log
(Ë<< 
kWARNING
 << "Evíàd€†nŸÜõ wôhöÅhêcuào‡™y sub-˛assifõr." << 
Endl
;

662  
MëhodBa£
::
	`GëRegªssi⁄VÆues
();

665 i‡(
suôabÀCutsN
 > 1) {

666 
	`Log
(Ë<< 
kFATAL
 << "Thêdeföed c©eg‹õ†¨ênŸ disjoöt." << 
Endl
;

667  
MëhodBa£
::
	`GëRegªssi⁄VÆues
();

669 
MëhodBa£
* 
mëh
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
mëhodToU£
]);

670 i‡(!
mëh
){

671 
	`Log
(Ë<< 
kFATAL
 << "mëhodÇŸ found i¿C©eg‹y Regªssi⁄ mëhod" << 
Endl
;

672  
MëhodBa£
::
	`GëRegªssi⁄VÆues
();

675  
mëh
->
	`GëRegªssi⁄VÆues
(
ev
);

676 
	}
}

	@src/MethodCompositeBase.cxx

42 
	~"TMVA/MëhodComposôeBa£.h
"

44 
	~"TMVA/CœssifõrFa˘‹y.h
"

45 
	~"TMVA/D©aSëInfo.h
"

46 
	~"TMVA/Fa˘‹y.h
"

47 
	~"TMVA/IMëhod.h
"

48 
	~"TMVA/MëhodBa£.h
"

49 
	~"TMVA/MëhodBoo°.h
"

50 
	~"TMVA/MsgLoggî.h
"

51 
	~"TMVA/Toﬁs.h
"

52 
	~"TMVA/Ty≥s.h
"

53 
	~"TMVA/C⁄fig.h
"

55 
	~"Rio°ªam.h
"

56 
	~"TR™dom3.h
"

57 
	~"TM©h.h
"

58 
	~"TObjSåög.h
"

60 
	~<Æg‹ôhm
>

61 
	~<iom™ù
>

62 
	~<ve˘‹
>

65 
usög
 
	g°d
::
ve˘‹
;

67 
CœssImp
(
TMVA
::
MëhodComposôeBa£
);

71 
	gTMVA
::
MëhodComposôeBa£
::
	$MëhodComposôeBa£
–c⁄° 
TSåög
& 
jobName
,

72 
Ty≥s
::
EMVA
 
mëhodTy≥
,

73 c⁄° 
TSåög
& 
mëhodTôÀ
,

74 
D©aSëInfo
& 
theD©a
,

75 c⁄° 
TSåög
& 
theO±i⁄
 )

76 : 
TMVA
::
	`MëhodBa£
–
jobName
, 
mëhodTy≥
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

77 
	`fCuºítMëhodIdx
(0), 
	$fCuºítMëhod
(0)

78 {
	}
}

82 
	gTMVA
::
MëhodComposôeBa£
::
	$MëhodComposôeBa£
–
Ty≥s
::
EMVA
 
mëhodTy≥
,

83 
D©aSëInfo
& 
dsi
,

84 c⁄° 
TSåög
& 
weightFûe
)

85 : 
TMVA
::
	`MëhodBa£
–
mëhodTy≥
, 
dsi
, 
weightFûe
),

86 
	`fCuºítMëhodIdx
(0), 
	$fCuºítMëhod
(0)

87 {
	}
}

92 
	gTMVA
::
IMëhod
* 
TMVA
::
MëhodComposôeBa£
::
	$GëMëhod
–c⁄° 
TSåög
 &
mëhodTôÀ
 ) const

94 
°d
::
ve˘‹
<
IMëhod
*>::
c⁄°_ôî©‹
 
ôrMëhod
 = 
fMëhods
.
	`begö
();

95 
°d
::
ve˘‹
<
IMëhod
*>::
c⁄°_ôî©‹
 
ôrMëhodEnd
 = 
fMëhods
.
	`íd
();

97 ; 
ôrMëhod
 !
ôrMëhodEnd
; itrMethod++) {

98 
MëhodBa£
* 
mva
 = 
dy«mic_ˇ°
<MëhodBa£*>(*
ôrMëhod
);

99 i‡–(
mva
->
	`GëMëhodName
())==
mëhodTôÀ
 )  mva;

102 
	}
}

107 
	gTMVA
::
IMëhod
* 
TMVA
::
MëhodComposôeBa£
::
	$GëMëhod
–c⁄° 
I¡_t
 
ödex
 ) const

109 
°d
::
ve˘‹
<
IMëhod
*>::
c⁄°_ôî©‹
 
ôrMëhod
 = 
fMëhods
.
	`begö
()+
ödex
;

110 i‡(
ôrMëhod
<
fMëhods
.
	`íd
())  *itrMethod;

112 
	}
}

117 
	gTMVA
::
MëhodComposôeBa£
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

119 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

120 
	`gToﬁs
().
	`AddAâr
–
wght
, "NMëhods", 
fMëhods
.
	`size
() );

121 
UI¡_t
 
i
=0; i< 
fMëhods
.
	`size
(); i++)

123 * 
mëhxml
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Method" );

124 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
[
i
]);

125 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"Index", 
i
 );

126 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"Weight", 
fMëhodWeight
[
i
]);

127 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"MëhodSigCut", 
mëhod
->
	`GëSig«lRe„ªn˚Cut
());

128 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"MëhodSigCutOrõ¡©i⁄", 
mëhod
->
	`GëSig«lRe„ªn˚CutOrõ¡©i⁄
());

129 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"MëhodTy≥Name", 
mëhod
->
	`GëMëhodTy≥Name
());

130 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"MëhodName", 
mëhod
->
	`GëMëhodName
() );

131 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"JobName", 
mëhod
->
	`GëJobName
());

132 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"O±i⁄s", 
mëhod
->
	`GëO±i⁄s
());

133 i‡(
mëhod
->
fTønsf‹m©i⁄Poöãr
)

134 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"U£MaöMëhodTønsf‹m©i⁄", 
	`TSåög
("true"));

136 
	`gToﬁs
().
	`AddAâr
(
mëhxml
,"U£MaöMëhodTønsf‹m©i⁄", 
	`TSåög
("false"));

137 
mëhod
->
	`AddWeightsXMLTo
(
mëhxml
);

139 
	}
}

144 
	gTMVA
::
MëhodComposôeBa£
::~
	$MëhodComposôeBa£
( )

146 
°d
::
ve˘‹
<
IMëhod
*>::
ôî©‹
 
ôrMëhod
 = 
fMëhods
.
	`begö
();

147 ; 
ôrMëhod
 !
fMëhods
.
	`íd
(); itrMethod++) {

148 
	`Log
(Ë<< 
kVERBOSE
 << "Dñëêmëhod: " << (*
ôrMëhod
)->
	`GëName
(Ë<< 
Endl
;

149 
	`dñëe
 (*
ôrMëhod
);

151 
fMëhods
.
	`˛ór
();

152 
	}
}

157 
	gTMVA
::
MëhodComposôeBa£
::
	$RódWeightsFromXML
–* 
wghäode
 )

159 
UI¡_t
 
nMëhods
;

160 
TSåög
 
mëhodName
, 
mëhodTy≥Name
, 
jobName
, 
›ti⁄Såög
;

162 
UI¡_t
 
i
=0;i<
fMëhods
.
	`size
();i++Ë
dñëe
 fMethods[i];

163 
fMëhods
.
	`˛ór
();

164 
fMëhodWeight
.
	`˛ór
();

165 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NMëhods", 
nMëhods
 );

166 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

167 
UI¡_t
 
i
=0; i< 
nMëhods
; i++) {

168 
DoubÀ_t
 
mëhodWeight
, 
mëhodSigCut
, 
mëhodSigCutOrõ¡©i⁄
;

169 
	`gToﬁs
().
	`RódAâr
–
ch
, "Weight", 
mëhodWeight
 );

170 
	`gToﬁs
().
	`RódAâr
–
ch
, "MëhodSigCut", 
mëhodSigCut
);

171 
	`gToﬁs
().
	`RódAâr
–
ch
, "MëhodSigCutOrõ¡©i⁄", 
mëhodSigCutOrõ¡©i⁄
);

172 
	`gToﬁs
().
	`RódAâr
–
ch
, "MëhodTy≥Name", 
mëhodTy≥Name
 );

173 
	`gToﬁs
().
	`RódAâr
–
ch
, "MëhodName", 
mëhodName
 );

174 
	`gToﬁs
().
	`RódAâr
–
ch
, "JobName", 
jobName
 );

175 
	`gToﬁs
().
	`RódAâr
–
ch
, "O±i⁄s", 
›ti⁄Såög
 );

178 i‡(
	`gToﬁs
().
	`HasAâr
–
ch
, "UseMainMethodTransformation")) {

179 
TSåög
 
	`ªrouãSåög
("");

180 
	`gToﬁs
().
	`RódAâr
–
ch
, "U£MaöMëhodTønsf‹m©i⁄", 
ªrouãSåög
 );

181 
ªrouãSåög
.
	`ToLowî
();

187 
›ti⁄Såög
.
	`Rïœ˚AŒ
("~","");

189 
›ti⁄Såög
.
	`Rïœ˚AŒ
("Boost_","~Boost_");

190 
›ti⁄Såög
.
	`Rïœ˚AŒ
("!~","~!");

192 i‡(
i
==0){

194 ((
TMVA
::
MëhodBoo°
*)
this
)->
	`BookMëhod
–
Ty≥s
::
	`In°™˚
().
	`GëMëhodTy≥
–
mëhodTy≥Name
), 
mëhodName
, 
›ti⁄Såög
 );

196 
fMëhods
.
	`push_back
(
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
(

197 
°d
::
	`°rög
(
mëhodTy≥Name
),
jobName
, 
mëhodName
,
	`D©aInfo
(),
›ti⁄Såög
));

199 
fMëhodWeight
.
	`push_back
(
mëhodWeight
);

200 
MëhodBa£
* 
mëh
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
.
	`back
());

202 if(
mëh
==0)

203 
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸÑód mëhod from XML" << 
Endl
;

205 * 
mëhXML
 = 
	`gToﬁs
().
	`GëChûd
(
ch
);

207 
TSåög
 
_fFûeDú

mëh
->
	`D©aInfo
().
	`GëName
();

208 
_fFûeDú
+="/"+
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeDú
;

209 
mëh
->
	`SëWeightFûeDú
(
_fFûeDú
);

210 
mëh
->
	`SëModñPîsi°í˚
(
	`IsModñPîsi°í˚
());

211 
mëh
->
	`SëSûítFûe
(
	`IsSûítFûe
());

212 
mëh
->
	`SëupMëhod
();

213 
mëh
->
	`SëMsgTy≥
(
kWARNING
);

214 
mëh
->
	`P¨£O±i⁄s
();

215 
mëh
->
	`Pro˚ssSëup
();

216 
mëh
->
	`CheckSëup
();

217 
mëh
->
	`RódWeightsFromXML
(
mëhXML
);

218 
mëh
->
	`SëSig«lRe„ªn˚Cut
(
mëhodSigCut
);

219 
mëh
->
	`SëSig«lRe„ªn˚CutOrõ¡©i⁄
(
mëhodSigCutOrõ¡©i⁄
);

221 
mëh
->
	`RîouãTønsf‹m©i⁄H™dÀr
 (&(
this
->
	`GëTønsf‹m©i⁄H™dÀr
()));

223 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

226 
	}
}

231 
	gTMVA
::
MëhodComposôeBa£
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

233 
TSåög
 
v¨
, 
dummy
;

234 
TSåög
 
mëhodName
, 
mëhodTôÀ
=
	`GëMëhodName
(),

235 
jobName
=
	`GëJobName
(),
›ti⁄Såög
=
	`GëO±i⁄s
();

236 
UI¡_t
 
mëhodNum
; 
DoubÀ_t
 
mëhodWeight
;

239 
i°r
 >> 
dummy
 >> 
mëhodNum
;

240 
	`Log
(Ë<< 
kINFO
 << "Ród " << 
mëhodNum
 << " Cœssifõrs" << 
Endl
;

241 
UI¡_t
 
i
=0;i<
fMëhods
.
	`size
();i++Ë
dñëe
 fMethods[i];

242 
fMëhods
.
	`˛ór
();

243 
fMëhodWeight
.
	`˛ór
();

244 
UI¡_t
 
i
=0; i<
mëhodNum
; i++) {

245 
i°r
 >> 
dummy
 >> 
mëhodName
 >> dummy >> 
fCuºítMëhodIdx
 >> dummy >> 
mëhodWeight
;

246 i‡((
UI¡_t
)
fCuºítMëhodIdx
 !
i
) {

247 
	`Log
(Ë<< 
kFATAL
 << "Error whileÑeading weight file; mismatch MethodIndex="

248 << 
fCuºítMëhodIdx
 << " i=" << 
i


249 << " MëhodNamê" << 
mëhodName


250 << " dummy " << 
dummy


251 << " MëhodWeight" << 
mëhodWeight


252 << 
Endl
;

254 i‡(
	`GëMëhodTy≥
(Ë!
Ty≥s
::
kBoo°
 || 
i
==0) {

255 
i°r
 >> 
dummy
 >> 
jobName
;

256 
i°r
 >> 
dummy
 >> 
mëhodTôÀ
;

257 
i°r
 >> 
dummy
 >> 
›ti⁄Såög
;

258 i‡(
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kBoo°
)

259 ((
TMVA
::
MëhodBoo°
*)
this
)->
	`BookMëhod
–
Ty≥s
::
	`In°™˚
().
	`GëMëhodTy≥
–
mëhodName
), 
mëhodTôÀ
, 
›ti⁄Såög
 );

261 
mëhodTôÀ
=
	`F‹m
("%†(%04i)",
	`GëMëhodName
().
	`D©a
(),
fCuºítMëhodIdx
);

262 
fMëhods
.
	`push_back
(
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
–
°d
::
	`°rög
(
mëhodName
), 
jobName
,

263 
mëhodTôÀ
,
	`D©aInfo
(), 
›ti⁄Såög
) );

264 
fMëhodWeight
.
	`push_back
–
mëhodWeight
 );

265 if(
MëhodBa£
* 
m
 = 
dy«mic_ˇ°
<MëhodBa£*>(
fMëhods
.
	`back
()) )

266 
m
->
	`RódWeightsFromSåóm
(
i°r
);

268 
	}
}

273 
DoubÀ_t
 
	gTMVA
::
MëhodComposôeBa£
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

275 
DoubÀ_t
 
mvaVÆue
 = 0;

276 
UI¡_t
 
i
=0;i< 
fMëhods
.
	`size
(); i++Ë
mvaVÆue
+=fMëhods[i]->
	`GëMvaVÆue
()*
fMëhodWeight
[i];

279 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

281  
mvaVÆue
;

282 
	}
}

	@src/MethodCuts.cxx

77 
	~"TMVA/MëhodCuts.h
"

79 
	~"TMVA/Bö¨ySórchTªe.h
"

80 
	~"TMVA/CœssifõrFa˘‹y.h
"

81 
	~"TMVA/C⁄fig.h
"

82 
	~"TMVA/C⁄figuøbÀ.h
"

83 
	~"TMVA/D©aSë.h
"

84 
	~"TMVA/D©aSëInfo.h
"

85 
	~"TMVA/Evít.h
"

86 
	~"TMVA/IFôãrT¨gë.h
"

87 
	~"TMVA/IMëhod.h
"

88 
	~"TMVA/GíëicFôãr.h
"

89 
	~"TMVA/I¡îvÆ.h
"

90 
	~"TMVA/FôãrBa£.h
"

91 
	~"TMVA/MCFôãr.h
"

92 
	~"TMVA/MëhodBa£.h
"

93 
	~"TMVA/MëhodFDA.h
"

94 
	~"TMVA/MöuôFôãr.h
"

95 
	~"TMVA/MsgLoggî.h
"

96 
	~"TMVA/PDF.h
"

97 
	~"TMVA/Resu…s.h
"

98 
	~"TMVA/SimuœãdA¬ólögFôãr.h
"

99 
	~"TMVA/Timî.h
"

100 
	~"TMVA/Toﬁs.h
"

101 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

102 
	~"TMVA/Ty≥s.h
"

103 
	~"TMVA/TS∂öe1.h
"

104 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

106 
	~"Rio°ªam.h
"

107 
	~"TH1F.h
"

108 
	~"TObjSåög.h
"

109 
	~"TDúe˘‹y.h
"

110 
	~"TM©h.h
"

111 
	~"TGøph.h
"

112 
	~"TS∂öe.h
"

113 
	~"TR™dom3.h
"

115 
	~<c°dlib
>

116 
	~<io°ªam
>

118 
usög
 
	g°d
::
©of
;

120 
	$REGISTER_METHOD
(
Cuts
)

122 
	`CœssImp
(
TMVA
::
MëhodCuts
);

124 c⁄° 
DoubÀ_t
 
TMVA
::
MëhodCuts
::
fgMaxAbsCutVÆ
 = 1.0e30;

129 
TMVA
::
MëhodCuts
::
	$MëhodCuts
–c⁄° 
TSåög
& 
jobName
,

130 c⁄° 
TSåög
& 
mëhodTôÀ
,

131 
D©aSëInfo
& 
theD©a
,

132 c⁄° 
TSåög
& 
theO±i⁄
 ) :

133 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kCuts
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

134 
	`fFôMëhod
 ( 
kU£GíëicAlg‹ôhm
 ),

135 
	`fEffMëhod
 ( 
kU£EvítSñe˘i⁄
 ),

136 
	`fFôP¨ams
 (0),

137 
	`fTe°Sig«lEff
(0.7),

138 
	`fEffSMö
 ( 0 ),

139 
	`fEffSMax
 ( 0 ),

140 
	`fCutR™geMö
( 0 ),

141 
	`fCutR™geMax
( 0 ),

142 
	`fBö¨yTªeS
( 0 ),

143 
	`fBö¨yTªeB
( 0 ),

144 
	`fCutMö
 ( 0 ),

145 
	`fCutMax
 ( 0 ),

146 
	`fTmpCutMö
 ( 0 ),

147 
	`fTmpCutMax
 ( 0 ),

148 
	`fAŒV¨sI
 ( 0 ),

149 
	`fN∑r
 ( 0 ),

150 
	`fEffRef
 ( 0 ),

151 
	`fR™geSign
 ( 0 ),

152 
	`fR™dom
 ( 0 ),

153 
	`fMónS
 ( 0 ),

154 
	`fMónB
 ( 0 ),

155 
	`fRmsS
 ( 0 ),

156 
	`fRmsB
 ( 0 ),

157 
	`fEffBvsSLoˇl
( 0 ),

158 
	`fV¨Hi°S
 ( 0 ),

159 
	`fV¨Hi°B
 ( 0 ),

160 
	`fV¨Hi°S_smoŸh
( 0 ),

161 
	`fV¨Hi°B_smoŸh
( 0 ),

162 
	`fV¨PdfS
 ( 0 ),

163 
	`fV¨PdfB
 ( 0 ),

164 
	$fNegEffW¨nög
–
kFALSE
 )

166 
	}
}

171 
	gTMVA
::
MëhodCuts
::
	$MëhodCuts
–
D©aSëInfo
& 
theD©a
,

172 c⁄° 
TSåög
& 
theWeightFûe
) :

173 
	`MëhodBa£
–
Ty≥s
::
kCuts
, 
theD©a
, 
theWeightFûe
),

174 
	`fFôMëhod
 ( 
kU£GíëicAlg‹ôhm
 ),

175 
	`fEffMëhod
 ( 
kU£EvítSñe˘i⁄
 ),

176 
	`fFôP¨ams
 (0),

177 
	`fTe°Sig«lEff
(0.7),

178 
	`fEffSMö
 ( 0 ),

179 
	`fEffSMax
 ( 0 ),

180 
	`fCutR™geMö
( 0 ),

181 
	`fCutR™geMax
( 0 ),

182 
	`fBö¨yTªeS
( 0 ),

183 
	`fBö¨yTªeB
( 0 ),

184 
	`fCutMö
 ( 0 ),

185 
	`fCutMax
 ( 0 ),

186 
	`fTmpCutMö
 ( 0 ),

187 
	`fTmpCutMax
 ( 0 ),

188 
	`fAŒV¨sI
 ( 0 ),

189 
	`fN∑r
 ( 0 ),

190 
	`fEffRef
 ( 0 ),

191 
	`fR™geSign
 ( 0 ),

192 
	`fR™dom
 ( 0 ),

193 
	`fMónS
 ( 0 ),

194 
	`fMónB
 ( 0 ),

195 
	`fRmsS
 ( 0 ),

196 
	`fRmsB
 ( 0 ),

197 
	`fEffBvsSLoˇl
( 0 ),

198 
	`fV¨Hi°S
 ( 0 ),

199 
	`fV¨Hi°B
 ( 0 ),

200 
	`fV¨Hi°S_smoŸh
( 0 ),

201 
	`fV¨Hi°B_smoŸh
( 0 ),

202 
	`fV¨PdfS
 ( 0 ),

203 
	`fV¨PdfB
 ( 0 ),

204 
	$fNegEffW¨nög
–
kFALSE
 )

206 
	}
}

211 
Boﬁ_t
 
	gTMVA
::
MëhodCuts
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
,

212 
UI¡_t
 )

214  (
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 == 2);

215 
	}
}

220 
	gTMVA
::
MëhodCuts
::
	$Inô
( )

222 
fV¨Hi°S
 = 
fV¨Hi°B
 = 0;

223 
fV¨Hi°S_smoŸh
 = 
fV¨Hi°B_smoŸh
 = 0;

224 
fV¨PdfS
 = 
fV¨PdfB
 = 0;

225 
fFôP¨ams
 = 0;

226 
fBö¨yTªeS
 = 
fBö¨yTªeB
 = 0;

227 
fEffSMö
 = 0;

228 
fEffSMax
 = 0;

231 
fN∑r
 = 2*
	`GëNv¨
();

232 
fR™geSign
 = 
√w
 
°d
::
ve˘‹
<
I¡_t
> ( 
	`GëNv¨
() );

233 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë(*
fR™geSign
)[ivar] = +1;

235 
fMónS
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

236 
fMónB
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

237 
fRmsS
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

238 
fRmsB
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

241 
fFôP¨ams
 = 
√w
 
°d
::
ve˘‹
<
EFôP¨amëîs
>–
	`GëNv¨
() );

242 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë(*
fFôP¨ams
)[iv¨] = 
kNŸEnf‹˚d
;

244 
fFôMëhod
 = 
kU£M⁄ãC¨lo
;

245 
fTe°Sig«lEff
 = -1;

248 
fCutMö
 = 
√w
 
DoubÀ_t
*[
	`GëNv¨
()];

249 
fCutMax
 = 
√w
 
DoubÀ_t
*[
	`GëNv¨
()];

250 
UI¡_t
 
i
=0; i<
	`GëNv¨
(); i++) {

251 
fCutMö
[
i
] = 
√w
 
DoubÀ_t
[
fNbös
];

252 
fCutMax
[
i
] = 
√w
 
DoubÀ_t
[
fNbös
];

256 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

257 
I¡_t
 
ibö
=0; ibö<
fNbös
; ibin++) {

258 
fCutMö
[
iv¨
][
ibö
] = 0;

259 
fCutMax
[
iv¨
][
ibö
] = 0;

263 
fTmpCutMö
 = 
√w
 
DoubÀ_t
[
	`GëNv¨
()];

264 
fTmpCutMax
 = 
√w
 
DoubÀ_t
[
	`GëNv¨
()];

265 
	}
}

270 
	gTMVA
::
MëhodCuts
::~
	$MëhodCuts
( )

272 
dñëe
 
fR™geSign
;

273 
dñëe
 
fMónS
;

274 
dñëe
 
fMónB
;

275 
dñëe
 
fRmsS
;

276 
dñëe
 
fRmsB
;

277 
dñëe
 
fFôP¨ams
;

278 
dñëe
 
fEffBvsSLoˇl
;

280 i‡(
NULL
 !
fCutR™geMö
Ë
dñëe
 [] fCutRangeMin;

281 i‡(
NULL
 !
fCutR™geMax
Ë
dñëe
 [] fCutRangeMax;

282 i‡(
NULL
 !
fAŒV¨sI
Ë
dñëe
 [] fAllVarsI;

284 
UI¡_t
 
i
=0;i<
	`GëNv¨
();i++) {

285 i‡(
NULL
 !
fCutMö
[
i
] ) 
dñëe
 [] fCutMin[i];

286 i‡(
NULL
 !
fCutMax
[
i
] ) 
dñëe
 [] fCutMax[i];

287 i‡(
NULL
 !
fCutR™ge
[
i
]Ë
dñëe
 fCutRange[i];

290 i‡(
NULL
 !
fCutMö
Ë
dñëe
 [] fCutMin;

291 i‡(
NULL
 !
fCutMax
Ë
dñëe
 [] fCutMax;

293 i‡(
NULL
 !
fTmpCutMö
Ë
dñëe
 [] fTmpCutMin;

294 i‡(
NULL
 !
fTmpCutMax
Ë
dñëe
 [] fTmpCutMax;

296 i‡(
NULL
 !
fBö¨yTªeS
Ë
dñëe
 fBinaryTreeS;

297 i‡(
NULL
 !
fBö¨yTªeB
Ë
dñëe
 fBinaryTreeB;

298 
	}
}

319 
	gTMVA
::
MëhodCuts
::
	$De˛¨eO±i⁄s
()

321 
	`De˛¨eO±i⁄Ref
(
fFôMëhodS
 = "GA", "FitMethod", "Minimisation Method (GA, SA,ánd MCáreÅheÖrimary methodsÅo be used;Åhe others have been introduced forÅestingÖurposesándáre depreciated)");

322 
	`AddPªDefVÆ
(
	`TSåög
("GA"));

323 
	`AddPªDefVÆ
(
	`TSåög
("SA"));

324 
	`AddPªDefVÆ
(
	`TSåög
("MC"));

325 
	`AddPªDefVÆ
(
	`TSåög
("MCEvents"));

326 
	`AddPªDefVÆ
(
	`TSåög
("MINUIT"));

327 
	`AddPªDefVÆ
(
	`TSåög
("EventScan"));

330 
	`De˛¨eO±i⁄Ref
(
fEffMëhodS
 = "EffSel", "EffMethod", "Selection Method");

331 
	`AddPªDefVÆ
(
	`TSåög
("EffSel"));

332 
	`AddPªDefVÆ
(
	`TSåög
("EffPDF"));

335 
fCutR™ge
.
	`ªsize
(
	`GëNv¨
());

336 
fCutR™geMö
 = 
√w
 
DoubÀ_t
[
	`GëNv¨
()];

337 
fCutR™geMax
 = 
√w
 
DoubÀ_t
[
	`GëNv¨
()];

338 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

339 
fCutR™ge
[
iv¨
] = 0;

340 
fCutR™geMö
[
iv¨
] = 
fCutR™geMax
[ivar] = -1;

343 
	`De˛¨eO±i⁄Ref
–
fCutR™geMö
, 
	`GëNv¨
(), "CutRangeMin", "Minimum ofállowed cutÑange (setÖer variable)" );

344 
	`De˛¨eO±i⁄Ref
–
fCutR™geMax
, 
	`GëNv¨
(), "CutRangeMax", "Maximum ofállowed cutÑange (setÖer variable)" );

346 
fAŒV¨sI
 = 
√w
 
TSåög
[
	`GëNv¨
()];

348 
UI¡_t
 
i
=0; i<
	`GëNv¨
(); i++Ë
fAŒV¨sI
[i] = "NotEnforced";

350 
	`De˛¨eO±i⁄Ref
(
fAŒV¨sI
, 
	`GëNv¨
(), "VarProp", "Categorisation of cuts");

351 
	`AddPªDefVÆ
(
	`TSåög
("NotEnforced"));

352 
	`AddPªDefVÆ
(
	`TSåög
("FMax"));

353 
	`AddPªDefVÆ
(
	`TSåög
("FMin"));

354 
	`AddPªDefVÆ
(
	`TSåög
("FSmart"));

355 
	}
}

363 
	gTMVA
::
MëhodCuts
::
	$Pro˚ssO±i⁄s
()

365 i‡(
	`IsN‹mÆi£d
()) {

366 
	`Log
(Ë<< 
kWARNING
 << "N‹mÆißti⁄ o‡thêöpuàv¨übÀ†f‹ cuà›timißti⁄ i†nŸ" << 
Endl
;

367 
	`Log
(Ë<< 
kWARNING
 << "suµ‹ãd beˇu£Åhi†¥ovide†öå™•¨íàcuàvÆues,ándÇo" << 
Endl
;

368 
	`Log
(Ë<< 
kWARNING
 << "im¥ovemíàöÅhê≥rf‹m™˚ o‡thêÆg‹ôhm." << 
Endl
;

369 
	`Log
(Ë<< 
kWARNING
 << "PÀa£Ñemovê\"N‹mÆi£\" o±i⁄ from bookög o±i⁄ såög" << 
Endl
;

370 
	`Log
(Ë<< 
kWARNING
 << "==> Wû»ª£àn‹mÆißti⁄ fœgÅÿ\"FÆ£\"" << 
Endl
;

371 
	`SëN‹mÆi£d
–
kFALSE
 );

374 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

375 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇot yetávailable for method: "

376 << 
	`GëMëhodTy≥Name
()

378 << 
Endl
;

381 i‡(
fFôMëhodS
 ="MC" ) 
fFôMëhod
 = 
kU£M⁄ãC¨lo
;

382 i‡(
fFôMëhodS
 ="MCEvíts"Ë
fFôMëhod
 = 
kU£M⁄ãC¨loEvíts
;

383 i‡(
fFôMëhodS
 ="GA" ) 
fFôMëhod
 = 
kU£GíëicAlg‹ôhm
;

384 i‡(
fFôMëhodS
 ="SA" ) 
fFôMëhod
 = 
kU£SimuœãdA¬ólög
;

385 i‡(
fFôMëhodS
 == "MINUIT" ) {

386 
fFôMëhod
 = 
kU£Möuô
;

387 
	`Log
(Ë<< 
kWARNING
 << "po‹Öîf‹m™˚ o‡MINUIT i¿MëhodCuts;Öª„ºed fô mëhod: GA" << 
Endl
;

389 i‡(
fFôMëhodS
 ="EvítSˇn" ) 
fFôMëhod
 = 
kU£EvítSˇn
;

390 
	`Log
(Ë<< 
kFATAL
 << "unknow¿möimißti⁄ mëhod: " << 
fFôMëhodS
 << 
Endl
;

392 i‡(
fEffMëhodS
 ="EFFSEL" ) 
fEffMëhod
 = 
kU£EvítSñe˘i⁄
;

393 i‡(
fEffMëhodS
 ="EFFPDF" ) 
fEffMëhod
 = 
kU£PDFs
;

394 
fEffMëhod
 = 
kU£EvítSñe˘i⁄
;

397 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("Use optimization method: \"%s\"",

398 (
fFôMëhod
 =
kU£M⁄ãC¨lo
) ? "Monte Carlo" :

399 (
fFôMëhod
 =
kU£M⁄ãC¨lo
) ? "Monte-Carlo-Event sampling" :

400 (
fFôMëhod
 =
kU£EvítSˇn
) ? "Full Event Scan (slow)" :

401 (
fFôMëhod
 =
kU£Möuô
Ë? "MINUIT" : "Gíëi¯Alg‹ôhm" ) << 
Endl
;

402 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("UseÉfficiency computation method: \"%s\"",

403 (
fEffMëhod
 =
kU£EvítSñe˘i⁄
Ë? "EvíàSñe˘i⁄" : "PDF" ) << 
Endl
;

406 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

407 
fCutR™ge
[
iv¨
] = 
√w
 
	`I¡îvÆ
–
fCutR™geMö
[iv¨], 
fCutR™geMax
[ivar] );

411 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

412 
EFôP¨amëîs
 
theFôP
 = 
kNŸEnf‹˚d
;

413 i‡(
fAŒV¨sI
[
iv¨
] ="" || fAŒV¨sI[iv¨] ="NŸEnf‹˚d"Ë
theFôP
 = 
kNŸEnf‹˚d
;

414 i‡(
fAŒV¨sI
[
iv¨
] ="FMax" ) 
theFôP
 = 
kF‹˚Max
;

415 i‡(
fAŒV¨sI
[
iv¨
] ="FMö" ) 
theFôP
 = 
kF‹˚Mö
;

416 i‡(
fAŒV¨sI
[
iv¨
] ="FSm¨t" ) 
theFôP
 = 
kF‹˚Sm¨t
;

418 
	`Log
(Ë<< 
kFATAL
 << "unknow¿vÆuê\'" << 
fAŒV¨sI
[
iv¨
]

419 << "\' f‹ fôÖ¨amëî o±i⁄ " << 
	`F‹m
("V¨Pr›[%i]",
iv¨
Ë<< 
Endl
;

421 (*
fFôP¨ams
)[
iv¨
] = 
theFôP
;

423 i‡(
theFôP
 !
kNŸEnf‹˚d
)

424 
	`Log
(Ë<< 
kINFO
 << "U£ \"" << 
fAŒV¨sI
[
iv¨
]

425 << "\" cut†f‹ v¨übÀ: " << "'" << (*
fI≈utV¨s
)[
iv¨
] << "'" << 
Endl
;

427 
	}
}

432 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

435 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

438 i‡(
fCutMö
 =
NULL
 || 
fCutMax
 =NULL || 
fNbös
 == 0) {

439 
	`Log
(Ë<< 
kFATAL
 << "<Eval_Cuts> fCutMin/Max have zeroÖointer. "

440 << "Did you book Cut†?" << 
Endl
;

443 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

446 i‡(
fTe°Sig«lEff
 > 0) {

448 
I¡_t
 
ibö
 = 
fEffBvsSLoˇl
->
	`FödBö
–
fTe°Sig«lEff
 );

449 i‡(
ibö
 < 0 ) ibin = 0;

450 i‡(
ibö
 >
fNbös
) ibin = fNbins - 1;

452 
Boﬁ_t
 
∑s£d
 = 
kTRUE
;

453 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

454 
∑s£d
 &–(
ev
->
	`GëVÆue
(
iv¨
Ë> 
fCutMö
[iv¨][
ibö
]) &&

455 (
ev
->
	`GëVÆue
(
iv¨
Ë<
fCutMax
[iv¨][
ibö
]) );

457  
∑s£d
 ? 1. : 0. ;

460 
	}
}

465 
	gTMVA
::
MëhodCuts
::
	$PrötCuts
–
DoubÀ_t
 
effS
 ) const

467 
°d
::
ve˘‹
<
DoubÀ_t
> 
cutsMö
;

468 
°d
::
ve˘‹
<
DoubÀ_t
> 
cutsMax
;

469 
I¡_t
 
ibö
 = 
fEffBvsSLoˇl
->
	`FödBö
–
effS
 );

471 
DoubÀ_t
 
åueEffS
 = 
	`GëCuts
–
effS
, 
cutsMö
, 
cutsMax
 );

474 
°d
::
ve˘‹
<
TSåög
>* 
v¨Vec
 = 0;

475 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNumOfTønsf‹m©i⁄s
() == 0) {

477 
v¨Vec
 = 
√w
 
°d
::
ve˘‹
<
TSåög
>;

478 
UI¡_t
 
iv¨
=0; iv¨<
cutsMö
.
	`size
(); ivar++) {

479 
v¨Vec
->
	`push_back
–
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëLabñ
() );

482 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNumOfTønsf‹m©i⁄s
() == 1) {

484 
v¨Vec
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄SåögsOfLa°Tønsf‹m
();

488 
v¨Vec
 = 
√w
 
°d
::
ve˘‹
<
TSåög
>;

489 
UI¡_t
 
iv¨
=0; iv¨<
cutsMö
.
	`size
(); ivar++) {

490 
v¨Vec
->
	`push_back
–
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëLabñ
() + " [transformed]" );

494 
UI¡_t
 
maxL
 = 0;

495 
UI¡_t
 
iv¨
=0; iv¨<
cutsMö
.
	`size
(); ivar++) {

496 i‡((
UI¡_t
)(*
v¨Vec
)[
iv¨
].
	`Lígth
(Ë> 
maxL
) maxL = (*varVec)[ivar].Length();

498 
UI¡_t
 
maxLöe
 = 20+
maxL
+16;

500 
UI¡_t
 
i
=0; i<
maxLöe
; i++Ë
	`Log
() << "-";

501 
	`Log
(Ë<< 
Endl
;

502 
	`Log
(Ë<< 
kHEADER
 << "CuàvÆue†f‹Ñeque°ed sig«»efficõncy: " << 
åueEffS
 << 
Endl
;

503 
	`Log
(Ë<< 
kINFO
 << "C‹ª•⁄dög backgroundÉfficõncy : " << 
fEffBvsSLoˇl
->
	`GëBöC⁄ã¡
–
ibö
 ) << 
Endl
;

504 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNumOfTønsf‹m©i⁄s
() == 1) {

505 
	`Log
(Ë<< 
kINFO
 << "TransformationáppliedÅo input variables : \""

506 << 
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNameOfLa°Tønsf‹m
(Ë<< "\"" << 
Endl
;

508 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNumOfTønsf‹m©i⁄s
() > 1) {

509 
	`Log
(Ë<< 
kINFO
 << "[ M‹êth™ o√ (=" << 
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëNumOfTønsf‹m©i⁄s
() << ") "

510 << "Åønsf‹m©i⁄†≠∂õd i¿å™sf‹m©i⁄ chaö; cut†≠∂õd o¿å™sf‹med qu™tôõ†] " << 
Endl
;

513 
	`Log
(Ë<< 
kINFO
 << "Tønsf‹m©i⁄áµlõdÅÿöpuàv¨übÀ†: N⁄e" << 
Endl
;

515 
UI¡_t
 
i
=0; i<
maxLöe
; i++Ë
	`Log
() << "-";

516 
	`Log
(Ë<< 
Endl
;

517 
UI¡_t
 
iv¨
=0; iv¨<
cutsMö
.
	`size
(); ivar++) {

518 
	`Log
(Ë<< 
kINFO


519 << "Cut[" << 
°d
::
	`£tw
(2Ë<< 
iv¨
 << "]: "

520 << 
°d
::
	`£tw
(10Ë<< 
cutsMö
[
iv¨
]

522 << 
°d
::
	`£tw
(
maxL
Ë<< (*
v¨Vec
)[
iv¨
]

524 << 
°d
::
	`£tw
(10Ë<< 
cutsMax
[
iv¨
] << 
Endl
;

526 
UI¡_t
 
i
=0; i<
maxLöe
; i++Ë
	`Log
() << "-";

527 
	`Log
(Ë<< 
Endl
;

529 
dñëe
 
v¨Vec
;

530 
	}
}

536 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
	$GëCuts
–
DoubÀ_t
 
effS
, DoubÀ_t* 
cutMö
, DoubÀ_t* 
cutMax
 ) const

538 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`cMö
–
	`GëNv¨
() );

539 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`cMax
–
	`GëNv¨
() );

540 
DoubÀ_t
 
åueEffS
 = 
	`GëCuts
–
effS
, 
cMö
, 
cMax
 );

541 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

542 
cutMö
[
iv¨
] = 
cMö
[ivar];

543 
cutMax
[
iv¨
] = 
cMax
[ivar];

545  
åueEffS
;

546 
	}
}

551 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
GëCuts
–DoubÀ_à
effS
,

552 
°d
::
ve˘‹
<
DoubÀ_t
>& 
cutMö
,

553 
°d
::
ve˘‹
<
DoubÀ_t
>& 
cutMax
 ) const

556 
I¡_t
 
ibö
 = 
fEffBvsSLoˇl
->
FödBö
–
effS
 );

559 
DoubÀ_t
 
	gåueEffS
 = 
fEffBvsSLoˇl
->
GëBöLowEdge
–
ibö
 );

561 
	gibö
--;

562 i‡(
	gibö
 < 0 ) ibin = 0;

563 i‡(
	gibö
 >
fNbös
Ë
ibö
 = fNbins - 1;

565 
	gcutMö
.
˛ór
();

566 
	gcutMax
.
˛ór
();

567 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

568 
	gcutMö
.
push_back
–
fCutMö
[
iv¨
][
ibö
] );

569 
	gcutMax
.
push_back
–
fCutMax
[
iv¨
][
ibö
] );

572  
	gåueEffS
;

578 
	gTMVA
::
MëhodCuts
::
	$Tøö
( )

580 i‡(
fEffMëhod
 =
kU£PDFs
Ë
	`Cª©eV¨übÀPDFs
();

583 i‡(
fBö¨yTªeS
 !0Ë{ 
dñëe
 fBinaryTreeS; fBinaryTreeS = 0; }

584 i‡(
fBö¨yTªeB
 !0Ë{ 
dñëe
 fBinaryTreeB; fBinaryTreeB = 0; }

590 
fBö¨yTªeS
 = 
√w
 
	`Bö¨ySórchTªe
();

591 
fBö¨yTªeS
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
), 
fSig«lCœss
 );

592 
fBö¨yTªeB
 = 
√w
 
	`Bö¨ySórchTªe
();

593 
fBö¨yTªeB
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
), 
fBackgroundCœss
 );

595 
UI¡_t
 
iv¨
 =0; iv¨ < 
	`D©a
()->
	`GëNV¨übÀs
(); ivar++) {

596 (*
fMónS
)[
iv¨
] = 
fBö¨yTªeS
->
	`Món
(
Ty≥s
::
kSig«l
, ivar);

597 (*
fRmsS
)[
iv¨
] = 
fBö¨yTªeS
->
	`RMS
 (
Ty≥s
::
kSig«l
, ivar);

598 (*
fMónB
)[
iv¨
] = 
fBö¨yTªeB
->
	`Món
(
Ty≥s
::
kBackground
, ivar);

599 (*
fRmsB
)[
iv¨
] = 
fBö¨yTªeB
->
	`RMS
 (
Ty≥s
::
kBackground
, ivar);

602 
DoubÀ_t
 
xmö
 = 
TM©h
::
	`Mö
(
fBö¨yTªeS
->Mö(
Ty≥s
::
kSig«l
, 
iv¨
),

603 
fBö¨yTªeB
->
	`Mö
(
Ty≥s
::
kBackground
, 
iv¨
));

604 
DoubÀ_t
 
xmax
 = 
TM©h
::
	`Max
(
fBö¨yTªeS
->Max(
Ty≥s
::
kSig«l
, 
iv¨
),

605 
fBö¨yTªeB
->
	`Max
(
Ty≥s
::
kBackground
, 
iv¨
));

608 
DoubÀ_t
 
ïs
 = 0.01*(
xmax
 - 
xmö
);

609 
xmö
 -
ïs
;

610 
xmax
 +
ïs
;

612 i‡(
TM©h
::
	`Abs
(
fCutR™ge
[
iv¨
]->
	`GëMö
(Ë- fCutR™ge[iv¨]->
	`GëMax
()) < 1.0e-300 ) {

613 
fCutR™ge
[
iv¨
]->
	`SëMö
–
xmö
 );

614 
fCutR™ge
[
iv¨
]->
	`SëMax
–
xmax
 );

616 i‡(
xmö
 > 
fCutR™ge
[
iv¨
]->
	`GëMö
()ËfCutR™ge[iv¨]->
	`SëMö
( xmin );

617 i‡(
xmax
 < 
fCutR™ge
[
iv¨
]->
	`GëMax
()ËfCutR™ge[iv¨]->
	`SëMax
( xmax );

620 
°d
::
ve˘‹
<
TH1F
*> 
sig«lDi°
, 
bkgDi°
;

623 
dñëe
 
fEffBvsSLoˇl
;

624 
fEffBvsSLoˇl
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
() + "_effBvsSLocal",

625 
	`TSåög
(
	`GëName
()Ë+ "Éfficõncy o‡B v†S", 
fNbös
, 0.0, 1.0 );

626 
fEffBvsSLoˇl
->
	`SëDúe˘‹y
(0);

629 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
fEffBvsSLoˇl
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

632 i‡(
fFôMëhod
 =
kU£GíëicAlg‹ôhm
 ||

633 
fFôMëhod
 =
kU£M⁄ãC¨lo
 ||

634 
fFôMëhod
 =
kU£Möuô
 ||

635 
fFôMëhod
 =
kU£SimuœãdA¬ólög
) {

638 
°d
::
ve˘‹
<
I¡îvÆ
*> 
ønges
;

640 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

642 
I¡_t
 
nbös
 = 0;

643 i‡(
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëV¨Ty≥
() == 'I') {

644 
nbös
 = 
	`I¡_t
(
fCutR™ge
[
iv¨
]->
	`GëMax
(Ë- fCutR™ge[iv¨]->
	`GëMö
()) + 1;

647 i‡((*
fFôP¨ams
)[
iv¨
] =
kF‹˚Sm¨t
) {

648 i‡((*
fMónS
)[
iv¨
] > (*
fMónB
)[iv¨]Ë(*
fFôP¨ams
)[iv¨] = 
kF‹˚Max
;

649 (*
fFôP¨ams
)[
iv¨
] = 
kF‹˚Mö
;

652 i‡((*
fFôP¨ams
)[
iv¨
] =
kF‹˚Mö
) {

653 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–
fCutR™ge
[
iv¨
]->
	`GëMö
(), fCutR™ge[iv¨]->GëMö(), 
nbös
 ) );

654 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–0, 
fCutR™ge
[
iv¨
]->
	`GëMax
(Ë- fCutR™ge[iv¨]->
	`GëMö
(), 
nbös
 ) );

656 i‡((*
fFôP¨ams
)[
iv¨
] =
kF‹˚Max
) {

657 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–
fCutR™ge
[
iv¨
]->
	`GëMö
(), fCutR™ge[iv¨]->
	`GëMax
(), 
nbös
 ) );

658 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–
fCutR™ge
[
iv¨
]->
	`GëMax
(Ë- fCutR™ge[iv¨]->
	`GëMö
(),

659 
fCutR™ge
[
iv¨
]->
	`GëMax
(Ë- fCutR™ge[iv¨]->
	`GëMö
(), 
nbös
 ) );

662 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–
fCutR™ge
[
iv¨
]->
	`GëMö
(), fCutR™ge[iv¨]->
	`GëMax
(), 
nbös
 ) );

663 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–0, 
fCutR™ge
[
iv¨
]->
	`GëMax
(Ë- fCutR™ge[iv¨]->
	`GëMö
(), 
nbös
 ) );

668 
FôãrBa£
* 
fôãr
 = 
NULL
;

670 
fFôMëhod
) {

671 
kU£GíëicAlg‹ôhm
:

672 
fôãr
 = 
√w
 
	`GíëicFôãr
–*
this
, 
	`F‹m
("%sFôãr_GA", 
	`GëName
()), 
ønges
, 
	`GëO±i⁄s
() );

674 
kU£M⁄ãC¨lo
:

675 
fôãr
 = 
√w
 
	`MCFôãr
 ( *
this
, 
	`F‹m
("%sFôãr_MC", 
	`GëName
()), 
ønges
, 
	`GëO±i⁄s
() );

677 
kU£Möuô
:

678 
fôãr
 = 
√w
 
	`MöuôFôãr
 ( *
this
, 
	`F‹m
("%sFôãr_MINUIT", 
	`GëName
()), 
ønges
, 
	`GëO±i⁄s
() );

680 
kU£SimuœãdA¬ólög
:

681 
fôãr
 = 
√w
 
	`SimuœãdA¬ólögFôãr
–*
this
, 
	`F‹m
("%sFôãr_SA", 
	`GëName
()), 
ønges
, 
	`GëO±i⁄s
() );

684 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄g fô mëhod: " << 
fFôMëhod
 << 
Endl
;

687 i‡(
fI¡îa˘ive
Ë
fôãr
->
	`SëIPyth⁄I¡îa˘ive
(&
fExôFromTøöög
, &
fIPyMaxIãr
, &
fIPyCuºítIãr
);

689 
fôãr
->
	`CheckF‹Unu£dO±i⁄s
();

692 
fôãr
->
	`Run
();

695 
UI¡_t
 
iv¨
=0; iv¨<
ønges
.
	`size
(); iv¨++Ë
dñëe
Ñanges[ivar];

696 
dñëe
 
fôãr
;

700 i‡(
fFôMëhod
 =
kU£EvítSˇn
) {

702 
I¡_t
 
√víts
 = 
	`D©a
()->
	`GëNEvíts
();

703 
I¡_t
 
ic
 = 0;

706 
I¡_t
 
nßm∂es
 = 
	`I¡_t
(0.5*
√víts
*(nevents - 1));

707 
Timî
 
	`timî
–
nßm∂es
, 
	`GëName
() );

708 
fIPyMaxIãr
 = 
nßm∂es
;

710 
	`Log
(Ë<< 
kINFO
 << "Ru¬ög fuŒÉvíàsˇn: " << 
Endl
;

711 
I¡_t
 
õvt1
=0; ievt1<
√víts
; ievt1++) {

712 
I¡_t
 
õvt2
=
õvt1
+1; ievt2<
√víts
; ievt2++) {

714 
fIPyCuºítIãr
 = 
ic
;

715 i‡(
fExôFromTøöög
) ;

716 
	`E°im©‹Fun˘i⁄
–
õvt1
, 
õvt2
 );

719 
ic
++;

720 i‡((
nßm∂es
<10000Ë|| 
ic
%10000 =0Ë
timî
.
	`DøwProgªssB¨
( ic );

725 i‡(
fFôMëhod
 =
kU£M⁄ãC¨loEvíts
) {

727 
I¡_t
 
nßm∂es
 = 200000;

728 
UI¡_t
 
£ed
 = 100;

729 
	`De˛¨eO±i⁄Ref
–
nßm∂es
, "SampleSize", "Number of Monte-Carlo-Event samples" );

730 
	`De˛¨eO±i⁄Ref
–
£ed
, "Seed", "Seed forÅheÑandom generator (0ÅakesÑandom seeds)" );

731 
	`P¨£O±i⁄s
();

733 
I¡_t
 
√víts
 = 
	`D©a
()->
	`GëNEvíts
();

734 
I¡_t
 
ic
 = 0;

737 
Timî
 
	`timî
–
nßm∂es
, 
	`GëName
() );

738 
fIPyMaxIãr
 = 
nßm∂es
;

741 
TR™dom3
*
∫d
 = 
√w
 
	`TR™dom3
–
£ed
 );

743 
	`Log
(Ë<< 
kINFO
 << "Ru¬ög M⁄ã-C¨lo-Evíàßm∂ög ovî " << 
nßm∂es
 << "Évíts" << 
Endl
;

744 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`∑rs
–2*
	`GëNv¨
() );

746 
I¡_t
 
ôoy
=0; itoy<
nßm∂es
; itoy++) {

747 
fIPyCuºítIãr
 = 
ic
;

748 i‡(
fExôFromTøöög
) ;

750 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

755 
Boﬁ_t
 
isSig«l
 = 
kFALSE
;

756 
I¡_t
 
õvt1
, 
õvt2
;

757 
DoubÀ_t
 
evt1
 = 0., 
evt2
 = 0.;

758 
I¡_t
 
nbªak
 = 0;

759 !
isSig«l
) {

760 
õvt1
 = 
	`I¡_t
(
∫d
->
	`Unif‹m
(0.,1.)*
√víts
);

761 
õvt2
 = 
	`I¡_t
(
∫d
->
	`Unif‹m
(0.,1.)*
√víts
);

763 c⁄° 
Evít
 *
ev1
 = 
	`GëEvít
(
õvt1
);

764 
isSig«l
 = 
	`D©aInfo
().
	`IsSig«l
(
ev1
);

765 
evt1
 = 
ev1
->
	`GëVÆue
–
iv¨
 );

767 c⁄° 
Evít
 *
ev2
 = 
	`GëEvít
(
õvt2
);

768 
isSig«l
 &
	`D©aInfo
().
	`IsSig«l
(
ev2
);

769 
evt2
 = 
ev2
->
	`GëVÆue
–
iv¨
 );

771 i‡(
nbªak
++ > 10000) {

772 
	`Log
(Ë<< 
kFATAL
 << "<MCEvents>: couldÇot find signalÉvents"

774 << 
Endl
;

775 
isSig«l
 = 1;

780 i‡(
evt1
 > 
evt2
Ë{ 
DoubÀ_t
 
z
 =Évt1;Évt1 =Évt2;Évt2 = z; }

781 
∑rs
[2*
iv¨
] = 
evt1
;

782 
∑rs
[2*
iv¨
+1] = 
evt2
 - 
evt1
;

786 
	`E°im©‹Fun˘i⁄
–
∑rs
 );

789 
ic
++;

790 i‡((
nßm∂es
<1000Ë|| 
ic
%1000 =0Ë
timî
.
	`DøwProgªssB¨
( ic );

793 
dñëe
 
∫d
;

796 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿möimißti⁄ mëhod: " << 
fFôMëhod
 << 
Endl
;

798 i‡(
fBö¨yTªeS
 !0Ë{ 
dñëe
 fBinaryTreeS; fBinaryTreeS = 0; }

799 i‡(
fBö¨yTªeB
 !0Ë{ 
dñëe
 fBinaryTreeB; fBinaryTreeB = 0; }

802 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

803 
I¡_t
 
ibö
=0; ibö<
fNbös
; ibin++) {

805 i‡((*
fFôP¨ams
)[
iv¨
] =
kF‹˚Mö
 && 
fCutMö
[iv¨][
ibö
] > -
fgMaxAbsCutVÆ
) {

806 
fCutMö
[
iv¨
][
ibö
] = -
fgMaxAbsCutVÆ
;

808 i‡((*
fFôP¨ams
)[
iv¨
] =
kF‹˚Max
 && 
fCutMax
[iv¨][
ibö
] < 
fgMaxAbsCutVÆ
) {

809 
fCutMax
[
iv¨
][
ibö
] = 
fgMaxAbsCutVÆ
;

817 
DoubÀ_t
 
ïsû⁄
 = 0.0001;

818 
DoubÀ_t
 
eff
=0.1;Éff<0.95;Éf‡+0.1Ë
	`PrötCuts
–eff+
ïsû⁄
 );

820 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

821 
	`ExôFromTøöög
();

822 
	}
}

827 
	gTMVA
::
MëhodCuts
::
	$Te°Cœssifiˇti⁄
()

829 
	}
}

834 
DoubÀ_t
 
TMVA
::
MëhodCuts
::
	$E°im©‹Fun˘i⁄
–
I¡_t
 
õvt1
, I¡_à
õvt2
 )

836 c⁄° 
Evít
 *
ev1
 = 
	`GëEvít
(
õvt1
);

837 i‡(!
	`D©aInfo
().
	`IsSig«l
(
ev1
))  -1;

839 c⁄° 
Evít
 *
ev2
 = 
	`GëEvít
(
õvt2
);

840 i‡(!
	`D©aInfo
().
	`IsSig«l
(
ev2
))  -1;

842 c⁄° 
I¡_t
 
nv¨
 = 
	`GëNv¨
();

843 
DoubÀ_t
* 
evt1
 = 
√w
 DoubÀ_t[
nv¨
];

844 
DoubÀ_t
* 
evt2
 = 
√w
 DoubÀ_t[
nv¨
];

846 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

847 
evt1
[
iv¨
] = 
ev1
->
	`GëVÆue
( ivar );

848 
evt2
[
iv¨
] = 
ev2
->
	`GëVÆue
( ivar );

852 
°d
::
ve˘‹
<
DoubÀ_t
> 
∑rs
;

853 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

854 
DoubÀ_t
 
cutMö
;

855 
DoubÀ_t
 
cutMax
;

856 i‡(
evt1
[
iv¨
] < 
evt2
[ivar]) {

857 
cutMö
 = 
evt1
[
iv¨
];

858 
cutMax
 = 
evt2
[
iv¨
];

861 
cutMö
 = 
evt2
[
iv¨
];

862 
cutMax
 = 
evt1
[
iv¨
];

865 
∑rs
.
	`push_back
–
cutMö
 );

866 
∑rs
.
	`push_back
–
cutMax
 - 
cutMö
 );

869 
dñëe
 [] 
evt1
;

870 
dñëe
 [] 
evt2
;

872  
	`CompuãE°im©‹
–
∑rs
 );

873 
	}
}

878 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

880  
CompuãE°im©‹
–
∑rs
 );

893 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
CompuãE°im©‹
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

899 
DoubÀ_t
 
effS
 = 0, 
	geffB
 = 0;

900 
	gthis
->
M©chP¨sToCuts
–
∑rs
, &
fTmpCutMö
[0], &
fTmpCutMax
[0] );

903 
	gfEffMëhod
) {

904 
	gkU£PDFs
:

905 
this
->
GëEffs‰omPDFs
 (&
fTmpCutMö
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

907 
	gkU£EvítSñe˘i⁄
:

908 
this
->
GëEffs‰omSñe˘i⁄
 (&
fTmpCutMö
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

911 
this
->
GëEffs‰omSñe˘i⁄
 (&
fTmpCutMö
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

914 
DoubÀ_t
 
	gëa
 = 0;

922 
I¡_t
 
	giböS
 = 
fEffBvsSLoˇl
->
FödBö
–
effS
 );

924 
DoubÀ_t
 
	geffBH
 = 
fEffBvsSLoˇl
->
GëBöC⁄ã¡
–
iböS
 );

925 
DoubÀ_t
 
	geffBH_À·
 = (
iböS
 > 1 ) ? 
fEffBvsSLoˇl
->
GëBöC⁄ã¡
–iböS-1 ) : 
effBH
;

926 
DoubÀ_t
 
	geffBH_right
 = (
iböS
 < 
fNbös
Ë? 
fEffBvsSLoˇl
->
GëBöC⁄ã¡
–iböS+1 ) : 
effBH
;

928 
DoubÀ_t
 
	gavîage
 = 0.5*(
effBH_À·
 + 
effBH_right
);

929 i‡(
	geffBH
 < 
	geffB
Ë
	gavîage
 = 
effBH
;

933 
	gëa
 = ( -
TM©h
::
Abs
(
effBH
-
avîage
Ë+ (1.0 - (effBH - 
effB
))Ë/ (1.0 + 
effS
);

940 i‡(
	geffBH
 < 0 ||ÉffBH > 
	geffB
) {

941 
	gfEffBvsSLoˇl
->
SëBöC⁄ã¡
–
iböS
, 
effB
 );

942 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

943 
	gfCutMö
[
iv¨
][
iböS
-1] = 
fTmpCutMö
[ivar];

944 
	gfCutMax
[
iv¨
][
iböS
-1] = 
fTmpCutMax
[ivar];

953 i‡(
	giböS
<=1) {

957 
DoubÀ_t
 
≥«…y
=0.,
	gdiff
=0.;

958 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

959 
	gdiff
=(
fCutR™ge
[
iv¨
]->
GëMax
()-
fTmpCutMax
[iv¨])/(fCutR™ge[iv¨]->GëMax()-fCutR™ge[iv¨]->
GëMö
());

960 
	g≥«…y
+=
diff
*diff;

961 
	gdiff
=(
fCutR™ge
[
iv¨
]->
GëMö
()-
fTmpCutMö
[iv¨])/(fCutR™ge[iv¨]->
GëMax
()-fCutRange[ivar]->GetMin());

962 
	g≥«…y
+=4.*
diff
*diff;

965 i‡(
	geffS
<1.e-4Ë 10.0+
	g≥«…y
;

966  10.*(1.-10.*
	geffS
);

968  
	gëa
;

974 
	gTMVA
::
MëhodCuts
::
M©chP¨sToCuts
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> & 
∑rs
,

975 
DoubÀ_t
* 
cutMö
, DoubÀ_t* 
cutMax
 )

977 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

978 
I¡_t
 
	gù¨
 = 2*
iv¨
;

979 
	gcutMö
[
iv¨
] = ((*
fR™geSign
)[iv¨] > 0Ë? 
∑rs
[
ù¨
] :Öars[ipar] -Öars[ipar+1];

980 
	gcutMax
[
iv¨
] = ((*
fR™geSign
)[iv¨] > 0Ë? 
∑rs
[
ù¨
] +Öars[ipar+1] :Öars[ipar];

987 
	gTMVA
::
MëhodCuts
::
M©chCutsToP¨s
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑rs
,

988 
DoubÀ_t
** 
cutMöAŒ
, DoubÀ_t** 
cutMaxAŒ
, 
I¡_t
 
ibö
 )

990 i‡(
	gibö
 < 1 || ibö > 
	gfNbös
Ë
Log
(Ë<< 
	gkFATAL
 << "::MatchCutsToPars: binÉrror: "

991 << 
	gibö
 << 
	gEndl
;

993 c⁄° 
UI¡_t
 
	gnv¨
 = 
GëNv¨
();

994 
DoubÀ_t
 *
	gcutMö
 = 
√w
 DoubÀ_t[
nv¨
];

995 
DoubÀ_t
 *
	gcutMax
 = 
√w
 DoubÀ_t[
nv¨
];

996 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

997 
	gcutMö
[
iv¨
] = 
cutMöAŒ
[iv¨][
ibö
-1];

998 
	gcutMax
[
iv¨
] = 
cutMaxAŒ
[iv¨][
ibö
-1];

1001 
M©chCutsToP¨s
–
∑rs
, 
cutMö
, 
cutMax
 );

1002 
	gdñëe
 [] 
	gcutMö
;

1003 
	gdñëe
 [] 
	gcutMax
;

1009 
	gTMVA
::
MëhodCuts
::
M©chCutsToP¨s
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑rs
,

1010 
DoubÀ_t
* 
cutMö
, DoubÀ_t* 
cutMax
 )

1012 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

1013 
I¡_t
 
	gù¨
 = 2*
iv¨
;

1014 
	g∑rs
[
ù¨
] = ((*
fR™geSign
)[
iv¨
] > 0Ë? 
cutMö
[iv¨] : 
cutMax
[ivar];

1015 
	g∑rs
[
ù¨
+1] = 
cutMax
[
iv¨
] - 
cutMö
[ivar];

1023 
	gTMVA
::
MëhodCuts
::
	$GëEffs‰omPDFs
–
DoubÀ_t
* 
cutMö
, DoubÀ_t* 
cutMax
,

1024 
DoubÀ_t
& 
effS
, DoubÀ_t& 
effB
 )

1026 
effS
 = 1.0;

1027 
effB
 = 1.0;

1028 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1029 
effS
 *(*
fV¨PdfS
)[
iv¨
]->
	`GëI¡egøl
–
cutMö
[iv¨], 
cutMax
[ivar] );

1030 
effB
 *(*
fV¨PdfB
)[
iv¨
]->
	`GëI¡egøl
–
cutMö
[iv¨], 
cutMax
[ivar] );

1034 if–
effS
 < 0.0 ) {

1035 
effS
 = 0.0;

1036 if–!
fNegEffW¨nög
 ) 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivêsig«»efficõncy foundánd sëÅÿ0. Thi†i†¥obably duêtÿm™yÉvít†wôhÇeg©ivêweight†öá cîèö cut-ªgi⁄." << 
Endl
;

1037 
fNegEffW¨nög
 = 
kTRUE
;

1039 if–
effB
 < 0.0 ) {

1040 
effB
 = 0.0;

1041 if–!
fNegEffW¨nög
 ) 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivêbackgroundÉfficõncy foundánd sëÅÿ0. Thi†i†¥obably duêtÿm™yÉvít†wôhÇeg©ivêweight†öá cîèö cut-ªgi⁄." << 
Endl
;

1042 
fNegEffW¨nög
 = 
kTRUE
;

1044 
	}
}

1050 
	gTMVA
::
MëhodCuts
::
	$GëEffs‰omSñe˘i⁄
–
DoubÀ_t
* 
cutMö
, DoubÀ_t* 
cutMax
,

1051 
DoubÀ_t
& 
effS
, DoubÀ_t& 
effB
)

1053 
Flﬂt_t
 
nTŸS
 = 0, 
nTŸB
 = 0;

1054 
Flﬂt_t
 
nSñS
 = 0, 
nSñB
 = 0;

1056 
Vﬁume
* 
vﬁume
 = 
√w
 
	`Vﬁume
–
cutMö
, 
cutMax
, 
	`GëNv¨
() );

1059 
nSñS
 = 
fBö¨yTªeS
->
	`SórchVﬁume
–
vﬁume
 );

1060 
nSñB
 = 
fBö¨yTªeB
->
	`SórchVﬁume
–
vﬁume
 );

1062 
dñëe
 
vﬁume
;

1065 
nTŸS
 = 
fBö¨yTªeS
->
	`GëSumOfWeights
();

1066 
nTŸB
 = 
fBö¨yTªeB
->
	`GëSumOfWeights
();

1069 i‡(
nTŸS
 =0 && 
nTŸB
 == 0) {

1070 
	`Log
(Ë<< 
kFATAL
 << "<GetEffsfromSelection> fatalÉrror in zeroÅotalÇumber ofÉvents:"

1071 << "ÇTŸS,ÇTŸB: " << 
nTŸS
 << " " << 
nTŸB
 << " ***" << 
Endl
;

1075 i‡(
nTŸS
 == 0 ) {

1076 
effS
 = 0;

1077 
effB
 = 
nSñB
/
nTŸB
;

1078 
	`Log
(Ë<< 
kWARNING
 << "<CompuãE°im©‹> zîÿnumbî o‡sig«»evíts" << 
Endl
;

1080 i‡(
nTŸB
 == 0) {

1081 
effB
 = 0;

1082 
effS
 = 
nSñS
/
nTŸS
;

1083 
	`Log
(Ë<< 
kWARNING
 << "<CompuãE°im©‹> zîÿnumbî o‡backgroundÉvíts" << 
Endl
;

1086 
effS
 = 
nSñS
/
nTŸS
;

1087 
effB
 = 
nSñB
/
nTŸB
;

1091 if–
effS
 < 0.0 ) {

1092 
effS
 = 0.0;

1093 if–!
fNegEffW¨nög
 ) 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivêsig«»efficõncy foundánd sëÅÿ0. Thi†i†¥obably duêtÿm™yÉvít†wôhÇeg©ivêweight†öá cîèö cut-ªgi⁄." << 
Endl
;

1094 
fNegEffW¨nög
 = 
kTRUE
;

1096 if–
effB
 < 0.0 ) {

1097 
effB
 = 0.0;

1098 if–!
fNegEffW¨nög
 ) 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivêbackgroundÉfficõncy foundánd sëÅÿ0. Thi†i†¥obably duêtÿm™yÉvít†wôhÇeg©ivêweight†öá cîèö cut-ªgi⁄." << 
Endl
;

1099 
fNegEffW¨nög
 = 
kTRUE
;

1101 
	}
}

1106 
	gTMVA
::
MëhodCuts
::
	$Cª©eV¨übÀPDFs
( )

1109 
fV¨Hi°S
 = 
√w
 
°d
::
ve˘‹
<
TH1
*>–
	`GëNv¨
() );

1110 
fV¨Hi°B
 = 
√w
 
°d
::
ve˘‹
<
TH1
*>–
	`GëNv¨
() );

1111 
fV¨Hi°S_smoŸh
 = 
√w
 
°d
::
ve˘‹
<
TH1
*>–
	`GëNv¨
() );

1112 
fV¨Hi°B_smoŸh
 = 
√w
 
°d
::
ve˘‹
<
TH1
*>–
	`GëNv¨
() );

1113 
fV¨PdfS
 = 
√w
 
°d
::
ve˘‹
<
PDF
*>–
	`GëNv¨
() );

1114 
fV¨PdfB
 = 
√w
 
°d
::
ve˘‹
<
PDF
*>–
	`GëNv¨
() );

1116 
I¡_t
 
nsmoŸh
 = 0;

1119 
DoubÀ_t
 
möVÆ
 = 
DBL_MAX
;

1120 
DoubÀ_t
 
maxVÆ
 = -
DBL_MAX
;

1121  
UI¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++ ){

1122 c⁄° 
Evít
 *
ev
 = 
	`GëEvít
(
õvt
);

1123 
Flﬂt_t
 
vÆ
 = 
ev
->
	`GëVÆue
(
õvt
);

1124 if–
vÆ
 > 
möVÆ
 ) minVal = val;

1125 if–
vÆ
 < 
maxVÆ
 ) maxVal = val;

1128 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1131 
TSåög
 
hi°TôÀ
 = (*
fI≈utV¨s
)[
iv¨
] + " signalÅraining";

1132 
TSåög
 
hi°Name
 = (*
fI≈utV¨s
)[
iv¨
] + "_sig";

1143 (*
fV¨Hi°S
)[
iv¨
] = 
√w
 
	`TH1F
(
hi°Name
.
	`D©a
(), 
hi°TôÀ
.D©a(), 
fNbös
, 
möVÆ
, 
maxVÆ
 );

1146 
hi°TôÀ
 = (*
fI≈utV¨s
)[
iv¨
] + " backgroundÅraining";

1147 
hi°Name
 = (*
fI≈utV¨s
)[
iv¨
] + "_bgd";

1158 (*
fV¨Hi°B
)[
iv¨
] = 
√w
 
	`TH1F
(
hi°Name
.
	`D©a
(), 
hi°TôÀ
.D©a(), 
fNbös
, 
möVÆ
, 
maxVÆ
 );

1160  
UI¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++ ){

1161 c⁄° 
Evít
 *
ev
 = 
	`GëEvít
(
õvt
);

1162 
Flﬂt_t
 
vÆ
 = 
ev
->
	`GëVÆue
(
õvt
);

1163 if–
	`D©aInfo
().
	`IsSig«l
(
ev
) ){

1164 (*
fV¨Hi°S
)[
iv¨
]->
	`Fûl
–
vÆ
 );

1166 (*
fV¨Hi°B
)[
iv¨
]->
	`Fûl
–
vÆ
 );

1173 (*
fV¨Hi°S_smoŸh
)[
iv¨
] = (
TH1F
*)(*
fV¨Hi°S
)[iv¨]->
	`Cl⁄e
();

1174 
hi°TôÀ
 = (*
fI≈utV¨s
)[
iv¨
] + " signalÅraining smoothed ";

1175 
hi°TôÀ
 +
nsmoŸh
;

1176 
hi°TôÀ
 +="Åimes";

1177 
hi°Name
 = (*
fI≈utV¨s
)[
iv¨
] + "_sig_smooth";

1178 (*
fV¨Hi°S_smoŸh
)[
iv¨
]->
	`SëName
(
hi°Name
);

1179 (*
fV¨Hi°S_smoŸh
)[
iv¨
]->
	`SëTôÀ
(
hi°TôÀ
);

1182 (*
fV¨Hi°S_smoŸh
)[
iv¨
]->
	`SmoŸh
(
nsmoŸh
);

1197 (*
fV¨Hi°B_smoŸh
)[
iv¨
] = (
TH1F
*)(*
fV¨Hi°B
)[iv¨]->
	`Cl⁄e
();

1198 
hi°TôÀ
 = (*
fI≈utV¨s
)[
iv¨
]+" backgroundÅraining smoothed ";

1199 
hi°TôÀ
 +
nsmoŸh
;

1200 
hi°TôÀ
 +="Åimes";

1201 
hi°Name
 = (*
fI≈utV¨s
)[
iv¨
]+"_bgd_smooth";

1202 (*
fV¨Hi°B_smoŸh
)[
iv¨
]->
	`SëName
(
hi°Name
);

1203 (*
fV¨Hi°B_smoŸh
)[
iv¨
]->
	`SëTôÀ
(
hi°TôÀ
);

1206 (*
fV¨Hi°B_smoŸh
)[
iv¨
]->
	`SmoŸh
(
nsmoŸh
);

1209 (*
fV¨PdfS
)[
iv¨
] = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
()Ë+ " PDF V¨ Sig " + 
	`GëI≈utV¨
–iv¨ ), (*
fV¨Hi°S_smoŸh
)[iv¨], 
PDF
::
kS∂öe2
 );

1210 (*
fV¨PdfB
)[
iv¨
] = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
()Ë+ " PDF V¨ Bkg " + 
	`GëI≈utV¨
–iv¨ ), (*
fV¨Hi°B_smoŸh
)[iv¨], 
PDF
::
kS∂öe2
 );

1212 
	}
}

1217 
	gTMVA
::
MëhodCuts
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

1219 
TSåög
 
dummy
;

1220 
UI¡_t
 
dummyI¡
;

1223 
i°r
 >> 
dummy
 >> dummy;

1225 
i°r
 >> 
dummy
 >> 
fNbös
;

1228 
i°r
 >> 
dummy
 >> dummy >> dummy >> dummy >> dummy >> dummy >> 
dummyI¡
 >> dummy ;

1231 i‡(
dummyI¡
 !
	`D©a
()->
	`GëNV¨übÀs
()) {

1232 
	`Log
(Ë<< 
kFATAL
 << "<ReadWeightsFromStream> fatalÉrror: mismatch "

1233 << "öÇumbî o‡v¨übÀs: " << 
dummyI¡
 << " !" << 
	`D©a
()->
	`GëNV¨übÀs
(Ë<< 
Endl
;

1238 i‡(
fFôMëhod
 =
kU£M⁄ãC¨lo
) {

1239 
	`Log
(Ë<< 
kWARNING
 << "Ród cut†›timi£d usög sam∂êo‡MCÉvíts" << 
Endl
;

1241 i‡(
fFôMëhod
 =
kU£M⁄ãC¨loEvíts
) {

1242 
	`Log
(Ë<< 
kWARNING
 << "Ród cut†›timi£d usög sam∂êo‡MCÉvíts" << 
Endl
;

1244 i‡(
fFôMëhod
 =
kU£GíëicAlg‹ôhm
) {

1245 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög Gíëi¯Alg‹ôhm" << 
Endl
;

1247 i‡(
fFôMëhod
 =
kU£SimuœãdA¬ólög
) {

1248 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög Simuœãd A¬ólögálg‹ôhm" << 
Endl
;

1250 i‡(
fFôMëhod
 =
kU£EvítSˇn
) {

1251 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög FuŒ EvíàSˇn" << 
Endl
;

1254 
	`Log
(Ë<< 
kWARNING
 << "unknow¿mëhod: " << 
fFôMëhod
 << 
Endl
;

1256 
	`Log
(Ë<< 
kINFO
 << "ö " << 
fNbös
 << " sig«»efficõncy bö†™d f‹ " << 
	`GëNv¨
(Ë<< " v¨übÀs" << 
Endl
;

1259 
buf„r
[200];

1260 
i°r
.
	`gëlöe
(
buf„r
,200);

1261 
i°r
.
	`gëlöe
(
buf„r
,200);

1263 
I¡_t
 
tmpbö
;

1264 
Flﬂt_t
 
tm≥ffS
, 
tm≥ffB
;

1265 i‡(
fEffBvsSLoˇl
 !0Ë
dñëe
 fEffBvsSLocal;

1266 
fEffBvsSLoˇl
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
() + "_effBvsSLocal",

1267 
	`TSåög
(
	`GëName
()Ë+ "Éfficõncy o‡B v†S", 
fNbös
, 0.0, 1.0 );

1268 
fEffBvsSLoˇl
->
	`SëDúe˘‹y
(0);

1270 
I¡_t
 
ibö
=0; ibö<
fNbös
; ibin++) {

1271 
i°r
 >> 
tmpbö
 >> 
tm≥ffS
 >> 
tm≥ffB
;

1272 
fEffBvsSLoˇl
->
	`SëBöC⁄ã¡
–
ibö
+1, 
tm≥ffB
 );

1274 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1275 
i°r
 >> 
fCutMö
[
iv¨
][
ibö
] >> 
fCutMax
[ivar][ibin];

1279 
fEffSMö
 = 
fEffBvsSLoˇl
->
	`GëBöCíãr
(1);

1280 
fEffSMax
 = 
fEffBvsSLoˇl
->
	`GëBöCíãr
(
fNbös
);

1281 
	}
}

1287 
	gTMVA
::
MëhodCuts
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

1290 
°d
::
ve˘‹
<
DoubÀ_t
> 
cutsMö
;

1291 
°d
::
ve˘‹
<
DoubÀ_t
> 
cutsMax
;

1293 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

1294 
	`gToﬁs
().
	`AddAâr
–
wght
, "O±imißti⁄Mëhod", (
I¡_t
)
fEffMëhod
);

1295 
	`gToﬁs
().
	`AddAâr
–
wght
, "FôMëhod", (
I¡_t
)
fFôMëhod
 );

1296 
	`gToﬁs
().
	`AddAâr
–
wght
, "nbös", 
fNbös
 );

1297 
	`gToﬁs
().
	`AddCommít
–
wght
, 
	`F‹m
–"BñowáªÅhê›timi£d cut†f‹ %òv¨übÀs: F‹m©: ibö(hi°ËeffSÉffB cutMö[iv¨=0] cutMax[iv¨=0] ... cutMö[iv¨Ú-1] cutMax[iv¨Ú-1]", 
	`GëNv¨
() ) );

1307 
I¡_t
 
ibö
=0; ibö<
fNbös
; ibin++) {

1308 
DoubÀ_t
 
effS
 = 
fEffBvsSLoˇl
->
	`GëBöCíãr
 ( 
ibö
 + 1 );

1309 
DoubÀ_t
 
åueEffS
 = 
	`GëCuts
–
effS
, 
cutsMö
, 
cutsMax
 );

1310 i‡(
TM©h
::
	`Abs
(
åueEffS
) < 1e-10)ÅrueEffS = 0;

1312 * 
böxml
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Bin" );

1313 
	`gToﬁs
().
	`AddAâr
–
böxml
, "ibö", 
ibö
+1 );

1314 
	`gToﬁs
().
	`AddAâr
–
böxml
, "effS", 
åueEffS
 );

1315 
	`gToﬁs
().
	`AddAâr
–
böxml
, "effB", 
fEffBvsSLoˇl
->
	`GëBöC⁄ã¡
–
ibö
 + 1 ) );

1316 * 
cutsxml
 = 
	`gToﬁs
().
	`AddChûd
–
böxml
, "Cuts" );

1317 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1318 
	`gToﬁs
().
	`AddAâr
–
cutsxml
, 
	`F‹m
–"cutMö_%i", 
iv¨
 ), 
cutsMö
[ivar] );

1319 
	`gToﬁs
().
	`AddAâr
–
cutsxml
, 
	`F‹m
–"cutMax_%i", 
iv¨
 ), 
cutsMax
[ivar] );

1322 
	}
}

1327 
	gTMVA
::
MëhodCuts
::
	$RódWeightsFromXML
–* 
wghäode
 )

1330 
UI¡_t
 
i
=0; i<
	`GëNv¨
(); i++) {

1331 i‡(
fCutMö
[
i
] !0Ë
dñëe
 [] fCutMin[i];

1332 i‡(
fCutMax
[
i
] !0Ë
dñëe
 [] fCutMax[i];

1334 i‡(
fCutMö
 !0Ë
dñëe
 [] fCutMin;

1335 i‡(
fCutMax
 !0Ë
dñëe
 [] fCutMax;

1337 
I¡_t
 
tmpEffMëhod
, 
tmpFôMëhod
;

1338 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "O±imißti⁄Mëhod", 
tmpEffMëhod
 );

1339 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "FôMëhod", 
tmpFôMëhod
 );

1340 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "nbös", 
fNbös
 );

1342 
fEffMëhod
 = (
EEffMëhod
)
tmpEffMëhod
;

1343 
fFôMëhod
 = (
EFôMëhodTy≥
)
tmpFôMëhod
;

1346 i‡(
fFôMëhod
 =
kU£M⁄ãC¨lo
) {

1347 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög sam∂êo‡MCÉvíts" << 
Endl
;

1349 i‡(
fFôMëhod
 =
kU£M⁄ãC¨loEvíts
) {

1350 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög sam∂êo‡MC-Evíàevíts" << 
Endl
;

1352 i‡(
fFôMëhod
 =
kU£GíëicAlg‹ôhm
) {

1353 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög Gíëi¯Alg‹ôhm" << 
Endl
;

1355 i‡(
fFôMëhod
 =
kU£SimuœãdA¬ólög
) {

1356 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög Simuœãd A¬ólögálg‹ôhm" << 
Endl
;

1358 i‡(
fFôMëhod
 =
kU£EvítSˇn
) {

1359 
	`Log
(Ë<< 
kINFO
 << "Ród cut†›timi£d usög FuŒ EvíàSˇn" << 
Endl
;

1362 
	`Log
(Ë<< 
kWARNING
 << "unknow¿mëhod: " << 
fFôMëhod
 << 
Endl
;

1364 
	`Log
(Ë<< 
kINFO
 << "Ródög " << 
fNbös
 << " sig«»efficõncy bö†f‹ " << 
	`GëNv¨
(Ë<< " v¨übÀs" << 
Endl
;

1366 
dñëe
 
fEffBvsSLoˇl
;

1367 
fEffBvsSLoˇl
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
() + "_effBvsSLocal",

1368 
	`TSåög
(
	`GëName
()Ë+ "Éfficõncy o‡B v†S", 
fNbös
, 0.0, 1.0 );

1369 
fEffBvsSLoˇl
->
	`SëDúe˘‹y
(0);

1370 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
fEffBvsSLoˇl
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

1372 
fCutMö
 = 
√w
 
DoubÀ_t
*[
	`GëNv¨
()];

1373 
fCutMax
 = 
√w
 
DoubÀ_t
*[
	`GëNv¨
()];

1374 
UI¡_t
 
i
=0;i<
	`GëNv¨
();i++) {

1375 
fCutMö
[
i
] = 
√w
 
DoubÀ_t
[
fNbös
];

1376 
fCutMax
[
i
] = 
√w
 
DoubÀ_t
[
fNbös
];

1380 
I¡_t
 
tmpbö
;

1381 
Flﬂt_t
 
tm≥ffS
, 
tm≥ffB
;

1382 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
,"Bin");

1383 
ch
) {

1389 
	`gToﬁs
().
	`RódAâr
–
ch
, "ibö", 
tmpbö
 );

1390 
	`gToﬁs
().
	`RódAâr
–
ch
, "effS", 
tm≥ffS
 );

1391 
	`gToﬁs
().
	`RódAâr
–
ch
, "effB", 
tm≥ffB
 );

1394 i‡(
tmpbö
-1 >
fNbös
 ||Åmpbin-1 < 0) {

1395 
	`Log
(Ë<< 
kFATAL
 << "Mism©ch i¿bös: " << 
tmpbö
-1 << " >" << 
fNbös
 << 
Endl
;

1398 
fEffBvsSLoˇl
->
	`SëBöC⁄ã¡
–
tmpbö
, 
tm≥ffB
 );

1399 * 
˘
 = 
	`gToﬁs
().
	`GëChûd
(
ch
);

1400 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1401 
	`gToﬁs
().
	`RódAâr
–
˘
, 
	`F‹m
–"cutMö_%i", 
iv¨
 ), 
fCutMö
[iv¨][
tmpbö
-1] );

1402 
	`gToﬁs
().
	`RódAâr
–
˘
, 
	`F‹m
–"cutMax_%i", 
iv¨
 ), 
fCutMax
[iv¨][
tmpbö
-1] );

1404 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch, "Bin");

1406 
	}
}

1411 
	gTMVA
::
MëhodCuts
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

1413 
	`Log
(Ë<< 
kINFO
 << "Wrôêm⁄ô‹ög hi°ogøm†tÿfûe: " << 
	`Ba£Dú
()->
	`GëP©h
(Ë<< 
Endl
;

1415 
fEffBvsSLoˇl
->
	`Wrôe
();

1418 i‡(
fEffMëhod
 =
kU£PDFs
) {

1419 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1420 (*
fV¨Hi°S
)[
iv¨
]->
	`Wrôe
();

1421 (*
fV¨Hi°B
)[
iv¨
]->
	`Wrôe
();

1422 (*
fV¨Hi°S_smoŸh
)[
iv¨
]->
	`Wrôe
();

1423 (*
fV¨Hi°B_smoŸh
)[
iv¨
]->
	`Wrôe
();

1424 (*
fV¨PdfS
)[
iv¨
]->
	`GëPDFHi°
()->
	`Wrôe
();

1425 (*
fV¨PdfB
)[
iv¨
]->
	`GëPDFHi°
()->
	`Wrôe
();

1428 
	}
}

1442 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
	$GëTøöögEfficõncy
(c⁄° 
TSåög
& 
theSåög
)

1445 
TLi°
* 
li°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
theSåög
 );

1447 i‡(
li°
->
	`GëSize
() != 2) {

1448 
	`Log
(Ë<< 
kFATAL
 << "<GetTrainingEfficiency> wrongÇumber ofárguments"

1449 << " i¿°rög: " << 
theSåög


1450 << " |Ñequúed f‹m©,É.g., Efficõncy:0.05" << 
Endl
;

1454 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, 
	`GëA«lysisTy≥
());

1458 
Flﬂt_t
 
effBªf
 = 
	`©of
–((
TObjSåög
*)
li°
->
	`At
(1))->
	`GëSåög
() );

1460 
dñëe
 
li°
;

1463 i‡(
ªsu…s
->
	`GëHi°
("EFF_BVSS_TR")==0) {

1465 i‡(
fBö¨yTªeS
 !0Ë{ 
dñëe
 fBinaryTreeS; fBinaryTreeS = 0; }

1466 i‡(
fBö¨yTªeB
 !0Ë{ 
dñëe
 fBinaryTreeB; fBinaryTreeB = 0; }

1468 
fBö¨yTªeS
 = 
√w
 
	`Bö¨ySórchTªe
();

1469 
fBö¨yTªeS
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
), 
fSig«lCœss
 );

1470 
fBö¨yTªeB
 = 
√w
 
	`Bö¨ySórchTªe
();

1471 
fBö¨yTªeB
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
), 
fBackgroundCœss
 );

1479 
TH1
* 
eff_bvss_å
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_åaöögEffBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

1480 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
eff_bvss_å
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

1481 
TH1
* 
ªj_bvss_å
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_åaöögRejBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

1482 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
ªj_bvss_å
->
	`SëBöC⁄ã¡
( ibin, 0. );

1483 
ªsu…s
->
	`St‹e
(
eff_bvss_å
, "EFF_BVSS_TR");

1484 
ªsu…s
->
	`St‹e
(
ªj_bvss_å
, "REJ_BVSS_TR");

1489 
DoubÀ_t
* 
tmpCutMö
 = 
√w
 DoubÀ_t[
	`GëNv¨
()];

1490 
DoubÀ_t
* 
tmpCutMax
 = 
√w
 DoubÀ_t[
	`GëNv¨
()];

1491 
I¡_t
 
nFaûedBös
=0;

1492 
I¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

1493 
UI¡_t
 
iv¨
=0; iv¨ <
	`GëNv¨
(); ivar++){

1494 
tmpCutMö
[
iv¨
] = 
fCutMö
[iv¨][
böi
-1];

1495 
tmpCutMax
[
iv¨
] = 
fCutMax
[iv¨][
böi
-1];

1498 
DoubÀ_t
 
effS
, 
effB
;

1499 
this
->
	`GëEffs‰omSñe˘i⁄
–&
tmpCutMö
[0], &
tmpCutMax
[0], 
effS
, 
effB
);

1501 
I¡_t
 
effBö
 = 
eff_bvss_å
->
	`GëXaxis
()->
	`FödBö
(
effS
);

1502 i‡(
effBö
 !
böi
){

1503 
	`Log
()<< 
kVERBOSE
 << "u«bÀÅÿfû»efficõncy bö " << 
böi
<< " " << 
effBö
 <<
Endl
;

1504 
nFaûedBös
++;

1508 
eff_bvss_å
->
	`SëBöC⁄ã¡
–
böi
, 
effB
 );

1509 
ªj_bvss_å
->
	`SëBöC⁄ã¡
–
böi
, 1.0-
effB
 );

1512 i‡(
nFaûedBös
>0Ë
	`Log
()<< 
kWARNING
 << " u«bÀÅÿfû»"<<ÇFaûedBö†<<"Éfficõncy bö†" <<
Endl
;

1514 
dñëe
 [] 
tmpCutMö
;

1515 
dñëe
 [] 
tmpCutMax
;

1518 
fS∂TøöEffBvsS
 = 
√w
 
	`TS∂öe1
–"åaöEffBvsS",Çew 
	`TGøph
–
eff_bvss_å
 ) );

1522 i‡(
NULL
 =
fS∂TøöEffBvsS
)  0.0;

1525 
DoubÀ_t
 
effS
 = 0., 
effB
, 
effS_
 = 0., 
effB_
 = 0.;

1526 
I¡_t
 
nbös_
 = 1000;

1529 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

1531 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

1532 
effB
 = 
fS∂TøöEffBvsS
->
	`EvÆ
–
effS
 );

1535 i‡((
effB
 - 
effBªf
)*(
effB_
 -ÉffBref) < 0) ;

1536 
effS_
 = 
effS
;

1537 
effB_
 = 
effB
;

1540  0.5*(
effS
 + 
effS_
);

1541 
	}
}

1555 
DoubÀ_t
 
	gTMVA
::
MëhodCuts
::
	$GëEfficõncy
–c⁄° 
TSåög
& 
theSåög
, 
Ty≥s
::
ETªeTy≥
 
ty≥
, 
DoubÀ_t
& 
effSîr
 )

1557 
	`D©a
()->
	`SëCuºítTy≥
(
ty≥
);

1559 
Resu…s
* 
ªsu…s
 = 
	`D©a
()->
	`GëResu…s
–
	`GëMëhodName
(), 
Ty≥s
::
kTe°ög
, 
	`GëA«lysisTy≥
() );

1562 
TLi°
* 
li°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
theSåög
, ":" );

1564 i‡(
li°
->
	`GëSize
() > 2) {

1565 
dñëe
 
li°
;

1566 
	`Log
(Ë<< 
kFATAL
 << "<GetEfficiency> wrongÇumber ofárguments"

1567 << " i¿°rög: " << 
theSåög


1568 << " |Ñequúed f‹m©,É.g., Efficõncy:0.05, o∏em±y såög" << 
Endl
;

1573 
Boﬁ_t
 
compuãAªa
 = (
li°
->
	`GëSize
() < 2);

1577 
Flﬂt_t
 
effBªf
 = (
compuãAªa
?1.:
	`©of
–((
TObjSåög
*)
li°
->
	`At
(1))->
	`GëSåög
() ));

1579 
dñëe
 
li°
;

1583 i‡(
ªsu…s
->
	`GëHi°
("MVA_EFF_BvsS")==0) {

1585 i‡(
fBö¨yTªeS
!=0Ë{ 
dñëe
 fBinaryTreeS; fBinaryTreeS = 0; }

1586 i‡(
fBö¨yTªeB
!=0Ë{ 
dñëe
 fBinaryTreeB; fBinaryTreeB = 0; }

1591 
fBö¨yTªeS
 = 
√w
 
	`Bö¨ySórchTªe
();

1592 
fBö¨yTªeS
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
), 
fSig«lCœss
 );

1593 
fBö¨yTªeB
 = 
√w
 
	`Bö¨ySórchTªe
();

1594 
fBö¨yTªeB
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
), 
fBackgroundCœss
 );

1603 
TH1
* 
eff_BvsS
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_effBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

1604 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
eff_BvsS
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

1605 
TH1
* 
ªj_BvsS
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_ªjBvsS", GëTe°v¨Name(Ë+ "", 
fNbös
, 0, 1 );

1606 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
ªj_BvsS
->
	`SëBöC⁄ã¡
( ibin, 0.0 );

1607 
ªsu…s
->
	`St‹e
(
eff_BvsS
, "MVA_EFF_BvsS");

1608 
ªsu…s
->
	`St‹e
(
ªj_BvsS
);

1610 
DoubÀ_t
 
xmö
 = 0.;

1611 
DoubÀ_t
 
xmax
 = 1.000001;

1613 
TH1
* 
eff_s
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_effS", GëTe°v¨Name(Ë+ " (sig«l)", 
fNbös
, 
xmö
, 
xmax
);

1614 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
eff_s
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

1615 
TH1
* 
eff_b
 = 
√w
 
	`TH1F
–
	`GëTe°v¨Name
(Ë+ "_effB", GëTe°v¨Name(Ë+ " (background)", 
fNbös
, 
xmö
, 
xmax
);

1616 
I¡_t
 
ibö
=1; ibö<=
fNbös
; ibö++Ë
eff_b
->
	`SëBöC⁄ã¡
( ibin, -0.1 );

1617 
ªsu…s
->
	`St‹e
(
eff_s
, "MVA_S");

1618 
ªsu…s
->
	`St‹e
(
eff_b
, "MVA_B");

1623 
DoubÀ_t
* 
tmpCutMö
 = 
√w
 DoubÀ_t[
	`GëNv¨
()];

1624 
DoubÀ_t
* 
tmpCutMax
 = 
√w
 DoubÀ_t[
	`GëNv¨
()];

1625 
TGøph
* 
tmpBvsS
 = 
√w
 
	`TGøph
(
fNbös
+1);

1626 
tmpBvsS
->
	`SëPoöt
(0, 0., 0.);

1628 
I¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

1629 
UI¡_t
 
iv¨
=0; iv¨ <
	`GëNv¨
(); ivar++) {

1630 
tmpCutMö
[
iv¨
] = 
fCutMö
[iv¨][
böi
-1];

1631 
tmpCutMax
[
iv¨
] = 
fCutMax
[iv¨][
böi
-1];

1634 
DoubÀ_t
 
effS
, 
effB
;

1635 
this
->
	`GëEffs‰omSñe˘i⁄
–&
tmpCutMö
[0], &
tmpCutMax
[0], 
effS
, 
effB
);

1636 
tmpBvsS
->
	`SëPoöt
(
böi
, 
effS
, 
effB
);

1638 
eff_s
->
	`SëBöC⁄ã¡
(
böi
, 
effS
);

1639 
eff_b
->
	`SëBöC⁄ã¡
(
böi
, 
effB
);

1641 
tmpBvsS
->
	`SëPoöt
(
fNbös
+1, 1., 1.);

1643 
dñëe
 [] 
tmpCutMö
;

1644 
dñëe
 [] 
tmpCutMax
;

1647 
fS∂effBvsS
 = 
√w
 
	`TS∂öe1
–"effBvsS", 
tmpBvsS
 );

1648 
I¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

1649 
DoubÀ_t
 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
fNbös
);

1650 
DoubÀ_t
 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

1651 
eff_BvsS
->
	`SëBöC⁄ã¡
–
böi
, 
effB
 );

1652 
ªj_BvsS
->
	`SëBöC⁄ã¡
–
böi
, 1.0-
effB
 );

1657 i‡(
NULL
 =
fS∂effBvsS
)  0.0;

1660 
DoubÀ_t
 
effS
 = 0, 
effB
 = 0, 
effS_
 = 0, 
effB_
 = 0;

1661 
I¡_t
 
nbös_
 = 1000;

1663 i‡(
compuãAªa
) {

1666 
DoubÀ_t
 
öãgøl
 = 0;

1667 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

1670 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

1671 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

1672 
öãgøl
 +(1.0 - 
effB
);

1674 
öãgøl
 /
nbös_
;

1676  
öãgøl
;

1681 
I¡_t
 
böi
=1; böi<=
nbös_
; bini++) {

1683 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös_
);

1684 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

1687 i‡((
effB
 - 
effBªf
)*(
effB_
 -ÉffBref) < 0) ;

1688 
effS_
 = 
effS
;

1689 
effB_
 = 
effB
;

1692 
effS
 = 0.5*”ffS + 
effS_
);

1693 
effSîr
 = 0;

1694 i‡(
	`D©a
()->
	`GëNEvtSigTe°
() > 0)

1695 
effSîr
 = 
TM©h
::
	`Sqπ
–
effS
*(1.0 -ÉffS)/
	`DoubÀ_t
(
	`D©a
()->
	`GëNEvtSigTe°
()) );

1697  
effS
;

1702 
	}
}

1707 
	gTMVA
::
MëhodCuts
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

1709 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

1710 
fout
 << "};" << 
°d
::
ídl
;

1711 
	}
}

1719 
	gTMVA
::
MëhodCuts
::
	$GëHñpMesßge
() const

1721 
TSåög
 
bﬁd
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
() ? "<b>" : "";

1722 
TSåög
 
ªsbﬁd
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
() ? "</b>" : "";

1723 
TSåög
 
brk
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
() ? "<br>" : "";

1725 
	`Log
(Ë<< 
Endl
;

1726 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1727 
	`Log
(Ë<< 
Endl
;

1728 
	`Log
(Ë<< "Thê›timißti⁄ o‡ª˘™guœ∏cut†≥rf‹med by TMVA maximi£†" << 
Endl
;

1729 
	`Log
(Ë<< "thêbackgroundÑeje˘i⁄áàgiví sig«»efficõncy,ánd sˇn†" << 
Endl
;

1730 
	`Log
(Ë<< "ovîÅhêfuŒÑ™gêo‡thêœâî qu™tôy. Thªê›timißti⁄" << 
Endl
;

1731 
	`Log
(Ë<< "mëhod†¨ê›ti⁄Æ: M⁄ã C¨lÿßm∂ög (MC),á Gíëics" << 
Endl
;

1732 
	`Log
(Ë<< "Alg‹ôhm (GA),ánd Simuœãd A¬ólög (SA). GAánd SAáª" << 
Endl
;

1733 
	`Log
(Ë<< "ex≥˘edÅÿ≥rf‹m be°." << 
Endl
;

1734 
	`Log
(Ë<< 
Endl
;

1735 
	`Log
(Ë<< "Thêdifficu…yÅÿfödÅhê›timÆ cut†°r⁄gly in¸ó£†wôh" << 
Endl
;

1736 
	`Log
(Ë<< "thêdimísi⁄Æôy (numbî o‡öpuàv¨übÀsËo‡thê¥obÀm." << 
Endl
;

1737 
	`Log
(Ë<< "Thi†behavi‹ i†duêtÿthên⁄-uniquíes†o‡thêsﬁuti⁄ s∑˚."<< 
Endl
;

1738 
	`Log
(Ë<< 
Endl
;

1739 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1740 
	`Log
(Ë<< 
Endl
;

1741 
	`Log
(Ë<< "I‡thêdimísi⁄ÆôyÉx˚eds, say, 4 i≈uàv¨übÀs, iài†" << 
Endl
;

1742 
	`Log
(Ë<< "advißbÀÅÿs¸utöizêthê£∑øti⁄Öowî o‡thêv¨übÀs," << 
Endl
;

1743 
	`Log
(Ë<< "™dÅÿªmovêthêwóke° o√s. I‡somêam⁄gÅhêöpuàv¨übÀs" << 
Endl
;

1744 
	`Log
(Ë<< "ˇ¿bêdes¸ibed byá sögÀ cuà”.g., beˇu£ sig«»ãnd†tÿbe" << 
Endl
;

1745 
	`Log
(Ë<< "œrgîÅh™ background),Åhi†ˇ¿bêödiˇãdÅÿMëhodCut†vü" << 
Endl
;

1746 
	`Log
(Ë<< "thê\"Fsm¨t\" o±i⁄†(£ê›ti⁄ såög). ChoosögÅhi†›ti⁄" << 
Endl
;

1747 
	`Log
(Ë<< "ªdu˚†thênumbî o‡ªquúemít†f‹Åhêv¨übÀ from 2 (mö/max)" << 
Endl
;

1748 
	`Log
(Ë<< "tÿ®sögÀ o√ (TMVA föd†ouàwhëhî iài†tÿbêöãΩªãdás" << 
Endl
;

1749 
	`Log
(Ë<< "mö o∏max)." << 
Endl
;

1750 
	`Log
(Ë<< 
Endl
;

1751 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1752 
	`Log
(Ë<< "" << 
Endl
;

1753 
	`Log
(Ë<< 
bﬁd
 << "M⁄ã C¨lÿßm∂ög:" << 
ªsbﬁd
 << 
Endl
;

1754 
	`Log
(Ë<< "" << 
Endl
;

1755 
	`Log
(Ë<< "A∑π f‹mÅhê\"Fsm¨t\" o±i⁄ f‹Åhêv¨übÀs,Åhê⁄ly way" << 
Endl
;

1756 
	`Log
(Ë<< "tÿim¥ovêthêMC sam∂ög i†tÿö¸ó£Åhêßm∂ögÑ©e. This" << 
Endl
;

1757 
	`Log
(Ë<< "i†d⁄êvüÅhêc⁄figuøti⁄ o±i⁄ \"MC_NR™dCuts\". Thêexecuti⁄" << 
Endl
;

1758 
	`Log
(Ë<< "timêsˇÀ†löóæy wôhÅhêßm∂ögÑ©e." << 
Endl
;

1759 
	`Log
(Ë<< "" << 
Endl
;

1760 
	`Log
(Ë<< 
bﬁd
 << "Gíëi¯Alg‹ôhm:" << 
ªsbﬁd
 << 
Endl
;

1761 
	`Log
(Ë<< "" << 
Endl
;

1762 
	`Log
(Ë<< "ThêÆg‹ôhmÅîmö©e†i‡nÿsignifiˇ¡ fô√s†ö¸ó£ has" << 
Endl
;

1763 
	`Log
(Ë<< "bì¿achõved wôhöÅhêœ° \"n°ïs\" sãp†o‡thêˇlcuœti⁄." << 
Endl
;

1764 
	`Log
(Ë<< "WiggÀ†öÅhêROC curvê‹ c⁄°™àbackgroundÑeje˘i⁄ o‡1" << 
Endl
;

1765 
	`Log
(Ë<< "ödiˇãÅh©ÅhêGA faûedÅÿÆway†c⁄vîgê©Åhêåuêmaximum" << 
Endl
;

1766 
	`Log
(Ë<< "fô√ss. I¿suchá ca£, iài†ªcommídedÅÿbrﬂdíÅhê£¨ch " << 
Endl
;

1767 
	`Log
(Ë<< "by in¸ósögÅhêp›uœti⁄ sizê(\"p›Size\"Ë™dÅÿgivêthêGA " << 
Endl
;

1768 
	`Log
(Ë<< "m‹êtimêtÿföd im¥ovemít†by in¸ósögÅhênumbî o‡°ïs" << 
Endl
;

1769 
	`Log
(Ë<< "(\"n°ïs\")" << 
Endl
;

1770 
	`Log
(Ë<< " -> in¸ó£ \"p›Size\" (©Üó° >10 *Çumbî o‡v¨übÀs)" << 
Endl
;

1771 
	`Log
(Ë<< " -> in¸ó£ \"n°ïs\"" << 
Endl
;

1772 
	`Log
(Ë<< "" << 
Endl
;

1773 
	`Log
(Ë<< 
bﬁd
 << "Simuœãd A¬ólög (SAËÆg‹ôhm:" << 
ªsbﬁd
 << 
Endl
;

1774 
	`Log
(Ë<< "" << 
Endl
;

1775 
	`Log
(Ë<< "\"In¸ósög Ad≠tive\"áµrﬂch:" << 
Endl
;

1776 
	`Log
(Ë<< "" << 
Endl
;

1777 
	`Log
(Ë<< "ThêÆg‹ôhm sìk†loˇ»möim®™dÉx∂‹e†theúÇeighb‹hoods, whûe" << 
Endl
;

1778 
	`Log
(Ë<< "ch™gögÅhêambõ¡Åem≥øtuª dïídög o¿thênumbî o‡Áûuªs" << 
Endl
;

1779 
	`Log
(Ë<< "öÅhê¥eviou†°ïs. Thê≥rf‹m™˚ c™ bêim¥oved by in¸ósög" << 
Endl
;

1780 
	`Log
(Ë<< "thênumbî o‡ôî©i⁄ sãp†(\"MaxCÆls\"), o∏byádju°ögÅhe" << 
Endl
;

1781 
	`Log
(Ë<< "möimÆÅem≥øtuª (\"MöTem≥øtuª\"). M™uÆádju°mít†o‡the" << 
Endl
;

1782 
	`Log
(Ë<< "•ìd o‡thêãm≥øtuª in¸ó£ (\"Tem≥øtuªSˇÀ\"ánd \"Ad≠tiveS≥ed\")" << 
Endl
;

1783 
	`Log
(Ë<< "tÿödividuÆ d©®£t†shouldálsÿhñp. Summ¨y:" << 
brk
 << 
Endl
;

1784 
	`Log
(Ë<< " -> in¸ó£ \"MaxCÆls\"" << 
brk
 << 
Endl
;

1785 
	`Log
(Ë<< " ->ádju° \"MöTem≥øtuª\"" << 
brk
 << 
Endl
;

1786 
	`Log
(Ë<< " ->ádju° \"Tem≥øtuªSˇÀ\"" << 
brk
 << 
Endl
;

1787 
	`Log
(Ë<< " ->ádju° \"Ad≠tiveS≥ed\"" << 
Endl
;

1788 
	`Log
(Ë<< "" << 
Endl
;

1789 
	`Log
(Ë<< "\"De¸ósög Ad≠tive\"áµrﬂch:" << 
Endl
;

1790 
	`Log
(Ë<< "" << 
Endl
;

1791 
	`Log
(Ë<< "ThêÆg‹ôhm cÆcuœã†thêöôü»ãm≥øtuª (ba£d o¿thêef„˘-" << 
Endl
;

1792 
	`Log
(Ë<< "ivíes†o‡œrgê°ïsË™dÅhêmu…ùlõ∏th©Énsuª†tÿªachÅhe" << 
Endl
;

1793 
	`Log
(Ë<< "möimÆÅem≥øtuª wôhÅhêªque°edÇumbî o‡ôî©i⁄ sãps." << 
Endl
;

1794 
	`Log
(Ë<< "Thê≥rf‹m™˚ c™ bêim¥oved byádju°ögÅhêmöimÆÅem≥øtuª" << 
Endl
;

1795 
	`Log
(Ë<< " (\"MöTem≥øtuª\"Ë™d by in¸ósögÇumbî o‡°ï†(\"MaxCÆls\"):" << 
brk
 << 
Endl
;

1796 
	`Log
(Ë<< " -> in¸ó£ \"MaxCÆls\"" << 
brk
 << 
Endl
;

1797 
	`Log
(Ë<< " ->ádju° \"MöTem≥øtuª\"" << 
Endl
;

1798 
	`Log
(Ë<< " " << 
Endl
;

1799 
	`Log
(Ë<< "Othî kî√ls:" << 
Endl
;

1800 
	`Log
(Ë<< "" << 
Endl
;

1801 
	`Log
(Ë<< "A…î«tivêway†o‡cou¡ögÅhêãm≥øtuª ch™gê¨êim∂emíãd. " << 
Endl
;

1802 
	`Log
(Ë<< "Each o‡them sèπ†wôhÅhêmaximumÅem≥øtuª (\"MaxTem≥øtuª\")" << 
Endl
;

1803 
	`Log
(Ë<< "™d de¸ó£†whûêch™gögÅhêãm≥øtuªácc‹dögÅÿ®giví" << 
Endl
;

1804 
	`Log
(Ë<< "¥es¸ùti⁄:" << 
brk
 << 
Endl
;

1805 
	`Log
(Ë<< "CuºítTem≥øtuª =" << 
brk
 << 
Endl
;

1806 
	`Log
(Ë<< " - Sqπ: InôülTem≥øtuª / Sqπ(SãpNumbî+2Ë* Tem≥øtuªSˇÀ" << 
brk
 << 
Endl
;

1807 
	`Log
(Ë<< " - Log: InôülTem≥øtuª / Log(SãpNumbî+2Ë* Tem≥øtuªSˇÀ" << 
brk
 << 
Endl
;

1808 
	`Log
(Ë<< " - Homo: InôülTem≥øtuª / (SãpNumbî+2Ë* Tem≥øtuªSˇÀ" << 
brk
 << 
Endl
;

1809 
	`Log
(Ë<< " - Sö: (Sö(SãpNumbî / Tem≥øtuªSˇÀË+ 1Ë/ (SãpNumbî + 1)*InôülTem≥øtuª + Eps" << 
brk
 << 
Endl
;

1810 
	`Log
(Ë<< " - Geo: CuºítTem≥øtuª * Tem≥øtuªSˇÀ" << 
Endl
;

1811 
	`Log
(Ë<< "" << 
Endl
;

1812 
	`Log
(Ë<< "TheúÖîf‹m™˚ c™ bêim¥oved byádju°ög inôü»ãm≥øtuª" << 
Endl
;

1813 
	`Log
(Ë<< "(\"InôülTem≥øtuª\"),Åhênumbî o‡ôî©i⁄ sãp†(\"MaxCÆls\")," << 
Endl
;

1814 
	`Log
(Ë<< "™dÅhêmu…ùlõ∏th© sˇÀ†thêãm≥øtuª de¸ó£" << 
Endl
;

1815 
	`Log
(Ë<< "(\"Tem≥øtuªSˇÀ\")" << 
brk
 << 
Endl
;

1816 
	`Log
(Ë<< " -> in¸ó£ \"MaxCÆls\"" << 
brk
 << 
Endl
;

1817 
	`Log
(Ë<< " ->ádju° \"InôülTem≥øtuª\"" << 
brk
 << 
Endl
;

1818 
	`Log
(Ë<< " ->ádju° \"Tem≥øtuªSˇÀ\"" << 
brk
 << 
Endl
;

1819 
	`Log
(Ë<< " ->ádju° \"Kî√lTem≥øtuª\"" << 
Endl
;

1820 
	}
}

	@src/MethodDAE.cxx

28 
	~"TMVA/MëhodDAE.h
"

30 
	~"TMVA/CœssifõrFa˘‹y.h
"

31 
	~"TMVA/C⁄figuøbÀ.h
"

32 
	~"TMVA/IMëhod.h
"

33 
	~"TMVA/Ty≥s.h
"

35 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

36 
	~"TMVA/DNN/Fun˘i⁄s.h
"

38 
	~<io°ªam
>

40 
	$REGISTER_METHOD
(
DAE
)

41 
	$CœssImp
(
TMVA
::
MëhodDAE
)

43 
usög
 
TMVA
::
DNN
::
EA˘iv©i⁄Fun˘i⁄
;

44 
usög
 
TMVA
::
DNN
::
ELossFun˘i⁄
;

45 
usög
 
TMVA
::
DNN
::
EInôüliz©i⁄
;

46 
usög
 
TMVA
::
DNN
::
EOuçutFun˘i⁄
;

48 
«me•a˚
 
TMVA
 {

52 
TMVA
::
MëhodDAE
::
	`MëhodDAE
(c⁄° 
TSåög
 &
jobName
, c⁄° TSåög &
mëhodTôÀ
,

53 
D©aSëInfo
 &
theD©a
, c⁄° 
TSåög
 &
theO±i⁄
)

54 : 
	`MëhodBa£
(
jobName
, 
Ty≥s
::
kDAE
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

55 
	`fWeightInôüliz©i⁄
(), 
	`fOuçutFun˘i⁄
(), 
	`fLayoutSåög
(),

56 
	`fEº‹Så©egy
(), 
	`fTøöögSå©egySåög
(),

57 
	`fWeightInôüliz©i⁄Såög
(), 
	`fArchôe˘uªSåög
(), 
	`fResume
(
Ál£
),

58 
	`fTøöögSëtögs
()

66 
TMVA
::
MëhodDAE
::
	`MëhodDAE
(
D©aSëInfo
 &
theD©a
, c⁄° 
TSåög
 &
theWeightFûe
)

67 : 
	`MëhodBa£
(
Ty≥s
::
kDAE
, 
theD©a
, 
theWeightFûe
), 
	`fWeightInôüliz©i⁄
(),

68 
	`fOuçutFun˘i⁄
(), 
	`fLayoutSåög
(), 
	`fEº‹Så©egy
(),

69 
	`fTøöögSå©egySåög
(), 
	`fWeightInôüliz©i⁄Såög
(),

70 
	`fArchôe˘uªSåög
(), 
	`fResume
(
Ál£
), 
	`fTøöögSëtögs
() {

77 
TMVA
::
MëhodDAE
::~
	`MëhodDAE
() {

83 
TMVA
::
MëhodDAE
::
	`Inô
() {

89 
TMVA
::
MëhodDAE
::
	`De˛¨eO±i⁄s
() {

95 
TMVA
::
MëhodDAE
::
	`Pro˚ssO±i⁄s
() {

103 autÿ
TMVA
::
MëhodDAE
::
	`P¨£LayoutSåög
(
TSåög
 
œyoutSåög
)

104 -> 
LayoutVe˘‹_t
 {

106 
LayoutVe˘‹_t
 
œyout
;

107  
œyout
;

112 
Boﬁ_t
 
TMVA
::
MëhodDAE
::
	`HasA«lysisTy≥
(
Ty≥s
::
EA«lysisTy≥
 
ty≥
,

113 
UI¡_t
 
numbîCœs£s
,

114 
UI¡_t
 ) {

116  
åue
;

120 
TMVA
::
MëhodDAE
::
	`Tøö
() {

122 i‡(
fArchôe˘uªSåög
 == "GPU") {

123 
	`TøöGpu
();

125 } i‡(
fArchôe˘uªSåög
 == "OpenCL") {

126 
	`Log
(Ë<< 
kFATAL
 << "O≥nCL backídÇŸ yë suµ‹ãd." << 
Endl
;

128 } i‡(
fArchôe˘uªSåög
 == "CPU") {

129 
	`TøöCpu
();

135 
TMVA
::
MëhodDAE
::
	`TøöGpu
() {

140 
TMVA
::
MëhodDAE
::
	`TøöCpu
() {

145 
DoubÀ_t
 
TMVA
::
MëhodDAE
::
	`GëMvaVÆue
(Double_t * ,

146 
DoubÀ_t
 * ) {

152 
TMVA
::
MëhodDAE
::
	`AddWeightsXMLTo
(*
∑ª¡
) const {

157 
TMVA
::
MëhodDAE
::
	`RódWeightsFromXML
(*
roŸXML
) {

162 
TMVA
::
MëhodDAE
::
	`RódWeightsFromSåóm
(
°d
::
i°ªam
 & ) {}

165 c⁄° 
TMVA
::
R™kög
 *TMVA::
MëhodDAE
::
	`Cª©eR™kög
() {

167  
NULL
;

171 
TMVA
::
MëhodDAE
::
	`GëHñpMesßge
() const {

175 
	}
}

	@src/MethodDNN.cxx

33 
	~"TMVA/MëhodDNN.h
"

35 
	~"TSåög.h
"

36 
	~"TTªe.h
"

37 
	~"TFûe.h
"

38 
	~"TF‹muœ.h
"

40 
	~"TMVA/CœssifõrFa˘‹y.h
"

41 
	~"TMVA/C⁄figuøbÀ.h
"

42 
	~"TMVA/IMëhod.h
"

43 
	~"TMVA/MsgLoggî.h
"

44 
	~"TMVA/MëhodBa£.h
"

45 
	~"TMVA/Timî.h
"

46 
	~"TMVA/Ty≥s.h
"

47 
	~"TMVA/Toﬁs.h
"

48 
	~"TMVA/C⁄fig.h
"

49 
	~"TMVA/R™kög.h
"

51 
	~"TMVA/DNN/Në.h
"

52 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

54 
	~"TMVA/NeuølNë.h
"

55 
	~"TMVA/M⁄ô‹ög.h
"

57 
	~<Æg‹ôhm
>

58 
	~<io°ªam
>

59 
	~<°rög
>

60 
	~<iom™ù
>

62 
	$REGISTER_METHOD
(
DNN
)

64 
	`CœssImp
(
TMVA
::
MëhodDNN
);

66 
«me•a˚
 
TMVA


68 
usög
 
«me•a˚
 
DNN
;

73 
TMVA
::
MëhodDNN
::
	`MëhodDNN
(c⁄° 
TSåög
 &
jobName
, c⁄° TSåög &
mëhodTôÀ
, 
D©aSëInfo
 &
theD©a
,

74 c⁄° 
TSåög
 &
theO±i⁄
)

75 : 
	`MëhodBa£
(
jobName
, 
Ty≥s
::
kDNN
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
), 
	`fWeightInôüliz©i⁄
(), 
	`fOuçutFun˘i⁄
(),

76 
	`fLayoutSåög
(), 
	`fEº‹Så©egy
(), 
	`fTøöögSå©egySåög
(), 
	`fWeightInôüliz©i⁄Såög
(),

77 
	`fArchôe˘uªSåög
(), 
	`fTøöögSëtögs
(), 
	`fResume
(
Ál£
), 
	`fSëtögs
()

84 
TMVA
::
MëhodDNN
::
	`MëhodDNN
(
D©aSëInfo
& 
theD©a
,

85 c⁄° 
TSåög
& 
theWeightFûe
)

86 : 
	`MëhodBa£
–
Ty≥s
::
kDNN
, 
theD©a
, 
theWeightFûe
),

87 
	`fWeightInôüliz©i⁄
(), 
	`fOuçutFun˘i⁄
(), 
	`fLayoutSåög
(), 
	`fEº‹Så©egy
(),

88 
	`fTøöögSå©egySåög
(), 
	`fWeightInôüliz©i⁄Såög
(), 
	`fArchôe˘uªSåög
(),

89 
	`fTøöögSëtögs
(), 
	`fResume
(
Ál£
), 
	`fSëtögs
()

91 
fWeightInôüliz©i⁄
 = 
DNN
::
EInôüliz©i⁄
::
kGauss
;

92 
fOuçutFun˘i⁄
 = 
DNN
::
EOuçutFun˘i⁄
::
kSigmoid
;

98 
TMVA
::
MëhodDNN
::~
	`MëhodDNN
()

100 
fWeightInôüliz©i⁄
 = 
DNN
::
EInôüliz©i⁄
::
kGauss
;

101 
fOuçutFun˘i⁄
 = 
DNN
::
EOuçutFun˘i⁄
::
kSigmoid
;

108 
Boﬁ_t
 
TMVA
::
MëhodDNN
::
	`HasA«lysisTy≥
(
Ty≥s
::
EA«lysisTy≥
 
ty≥
,

109 
UI¡_t
 
numbîCœs£s
,

110 
UI¡_t
 )

112 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2 )  
kTRUE
;

113 i‡(
ty≥
 =
Ty≥s
::
kMu…i˛ass
 )  
kTRUE
;

114 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
 )  
kTRUE
;

116  
kFALSE
;

122 
TMVA
::
MëhodDNN
::
	`Inô
()

125 autÿ&
dsi
 = 
this
->
	`D©aInfo
();

126 autÿ
numCœs£s
 = 
dsi
.
	`GëNCœs£s
();

127 
UI¡_t
 
i
 = 0; i < 
numCœs£s
; ++i) {

128 i‡(
dsi
.
	`GëWeightEx¥essi⁄
(
i
Ë!
	`TSåög
("")) {

129 
	`Log
(Ë<< 
kERROR
 << "CuºíéyÉvíàweight†¨ênŸ c⁄sidîedÖr›îly byÅhi†mëhod." << 
Endl
;

143 
TMVA
::
MëhodDNN
::
	`De˛¨eO±i⁄s
()

146 
	`De˛¨eO±i⁄Ref
(
fLayoutSåög
="SOFTSIGN|(N+100)*2,LINEAR",

150 
	`De˛¨eO±i⁄Ref
(
fEº‹Så©egy
="CROSSENTROPY",

154 
	`AddPªDefVÆ
(
	`TSåög
("CROSSENTROPY"));

155 
	`AddPªDefVÆ
(
	`TSåög
("SUMOFSQUARES"));

156 
	`AddPªDefVÆ
(
	`TSåög
("MUTUALEXCLUSIVE"));

158 
	`De˛¨eO±i⁄Ref
(
fWeightInôüliz©i⁄Såög
="XAVIER",

161 
	`AddPªDefVÆ
(
	`TSåög
("XAVIER"));

162 
	`AddPªDefVÆ
(
	`TSåög
("XAVIERUNIFORM"));

164 
	`De˛¨eO±i⁄Ref
(
fArchôe˘uªSåög
 = "CPU", "Architecture", "WhichárchitectureÅoÖerformÅheÅraining on.");

165 
	`AddPªDefVÆ
(
	`TSåög
("STANDARD"));

166 
	`AddPªDefVÆ
(
	`TSåög
("CPU"));

167 
	`AddPªDefVÆ
(
	`TSåög
("GPU"));

168 
	`AddPªDefVÆ
(
	`TSåög
("OPENCL"));

170 
	`De˛¨eO±i⁄Ref
(

171 
fTøöögSå©egySåög
 = "LearningRate=1e-1,"

199 autÿ
TMVA
::
MëhodDNN
::
	`P¨£LayoutSåög
(
TSåög
 
œyoutSåög
)

200 -> 
LayoutVe˘‹_t


202 
LayoutVe˘‹_t
 
œyout
;

203 c⁄° 
TSåög
 
	`œyîDñimôî
(",");

204 c⁄° 
TSåög
 
	`subDñimôî
("|");

206 c⁄° 
size_t
 
öputSize
 = 
	`GëNv¨
();

208 
TObjAºay
* 
œyîSåögs
 = 
œyoutSåög
.
	`Tokíize
(
œyîDñimôî
);

209 
TIãr
 
	`√xtLayî
 (
œyîSåögs
);

210 
TObjSåög
* 
œyîSåög
 = (TObjSåög*)
	`√xtLayî
 ();

212 ; 
œyîSåög
 !
nuŒ±r
;ÜayîSåög = (
TObjSåög
*Ë
	`√xtLayî
()) {

213 
numNodes
 = 0;

214 
EA˘iv©i⁄Fun˘i⁄
 
a˘iv©i⁄Fun˘i⁄
 = EA˘iv©i⁄Fun˘i⁄::
kT™h
;

216 
TObjAºay
* 
subSåögs
 = 
œyîSåög
->
	`GëSåög
().
	`Tokíize
(
subDñimôî
);

217 
TIãr
 
	`√xtTokí
 (
subSåögs
);

218 
TObjSåög
* 
tokí
 = (TObjSåög *Ë
	`√xtTokí
();

219 
idxTokí
 = 0;

220 ; 
tokí
 !
nuŒ±r
;Åokí = (
TObjSåög
 *Ë
	`√xtTokí
()) {

221 
idxTokí
)

225 
TSåög
 
	`°rA˘Fnc
 (
tokí
->
	`GëSåög
 ());

226 i‡(
°rA˘Fnc
 == "RELU") {

227 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kRñu
;

228 } i‡(
°rA˘Fnc
 == "TANH") {

229 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kT™h
;

230 } i‡(
°rA˘Fnc
 == "SYMMRELU") {

231 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kSymmRñu
;

232 } i‡(
°rA˘Fnc
 == "SOFTSIGN") {

233 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kSo·Sign
;

234 } i‡(
°rA˘Fnc
 == "SIGMOID") {

235 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kSigmoid
;

236 } i‡(
°rA˘Fnc
 == "LINEAR") {

237 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kIdítôy
;

238 } i‡(
°rA˘Fnc
 == "GAUSS") {

239 
a˘iv©i⁄Fun˘i⁄
 = 
DNN
::
EA˘iv©i⁄Fun˘i⁄
::
kGauss
;

245 
TSåög
 
	`°rNumNodes
 (
tokí
->
	`GëSåög
 ());

246 
TSåög
 
	`°rN
 ("x");

247 
°rNumNodes
.
	`Rïœ˚AŒ
 ("N", 
°rN
);

248 
°rNumNodes
.
	`Rïœ˚AŒ
 ("n", 
°rN
);

249 
TF‹muœ
 
	`fml
 ("tmp",
°rNumNodes
);

250 
numNodes
 = 
fml
.
	`EvÆ
 (
öputSize
);

254 ++
idxTokí
;

256 
œyout
.
	`push_back
(
°d
::
	`make_∑ú
(
numNodes
, 
a˘iv©i⁄Fun˘i⁄
));

258  
œyout
;

264 autÿ
TMVA
::
MëhodDNN
::
	`P¨£KeyVÆueSåög
(
TSåög
 
∑r£Såög
,

265 
TSåög
 
blockDñim
,

266 
TSåög
 
tokíDñim
)

267 -> 
KeyVÆueVe˘‹_t


269 
KeyVÆueVe˘‹_t
 
blockKeyVÆues
;

270 c⁄° 
TSåög
 
	`keyVÆueDñim
 ("=");

272 
TObjAºay
* 
blockSåögs
 = 
∑r£Såög
.
	`Tokíize
 (
blockDñim
);

273 
TIãr
 
	`√xtBlock
 (
blockSåögs
);

274 
TObjSåög
* 
blockSåög
 = (TObjSåög *Ë
	`√xtBlock
();

276 ; 
blockSåög
 !
nuŒ±r
; blockSåög = (
TObjSåög
 *Ë
	`√xtBlock
())

278 
blockKeyVÆues
.
	`push_back
 (
°d
::
m≠
<
TSåög
,TString>());

279 
°d
::
m≠
<
TSåög
,TSåög>& 
cuºítBlock
 = 
blockKeyVÆues
.
	`back
 ();

281 
TObjAºay
* 
subSåögs
 = 
blockSåög
->
	`GëSåög
 ().
	`Tokíize
 (
tokíDñim
);

282 
TIãr
 
	`√xtTokí
 (
subSåögs
);

283 
TObjSåög
* 
tokí
 = (TObjSåög*)
	`√xtTokí
 ();

285 ; 
tokí
 !
nuŒ±r
;Åokí = (
TObjSåög
 *)
	`√xtTokí
())

287 
TSåög
 
	`°rKeyVÆue
 (
tokí
->
	`GëSåög
 ());

288 
dñimPos
 = 
°rKeyVÆue
.
	`Fú°
 (
keyVÆueDñim
.
	`D©a
 ());

289 i‡(
dñimPos
 <= 0)

292 
TSåög
 
°rKey
 = 
	`TSåög
 (
	`°rKeyVÆue
 (0, 
dñimPos
));

293 
°rKey
.
	`ToUµî
();

294 
TSåög
 
°rVÆue
 = 
	`TSåög
 (
	`°rKeyVÆue
 (
dñimPos
+1, 
°rKeyVÆue
.
	`Lígth
 ()));

296 
°rKey
.
	`Såù
 (
TSåög
::
kBŸh
, ' ');

297 
°rVÆue
.
	`Såù
 (
TSåög
::
kBŸh
, ' ');

299 
cuºítBlock
.
	`ö£π
 (
°d
::
	`make_∑ú
 (
°rKey
, 
°rVÆue
));

302  
blockKeyVÆues
;

307 
TSåög
 
	`„tchVÆue
 (c⁄° 
°d
::
m≠
<TSåög, TSåög>& 
keyVÆueM≠
, TSåög 
key
)

309 
key
.
	`ToUµî
 ();

310 
°d
::
m≠
<
TSåög
, TSåög>::
c⁄°_ôî©‹
 
ô
 = 
keyVÆueM≠
.
	`föd
 (
key
);

311 i‡(
ô
 =
keyVÆueM≠
.
	`íd
()) {

312  
	`TSåög
 ("");

314  
ô
->
£c⁄d
;

319 
ãm∂©e
 <
ty≥«me
 
T
>

320 
T
 
	`„tchVÆue
(c⁄° 
°d
::
m≠
<
TSåög
,TSåög>& 
keyVÆueM≠
,

321 
TSåög
 
key
,

322 
T
 
deÁu…VÆue
);

326 
ãm∂©e
 <>

327 
	`„tchVÆue
(c⁄° 
°d
::
m≠
<
TSåög
,TSåög>& 
keyVÆueM≠
,

328 
TSåög
 
key
,

329 
deÁu…VÆue
)

331 
TSåög
 
	`vÆue
 (
	`„tchVÆue
 (
keyVÆueM≠
, 
key
));

332 i‡(
vÆue
 == "") {

333  
deÁu…VÆue
;

335  
vÆue
.
	`Atoi
 ();

340 
ãm∂©e
 <>

341 
	`„tchVÆue
 (c⁄° 
°d
::
m≠
<
TSåög
,TSåög>& 
keyVÆueM≠
,

342 
TSåög
 
key
, 
deÁu…VÆue
)

344 
TSåög
 
	`vÆue
 (
	`„tchVÆue
 (
keyVÆueM≠
, 
key
));

345 i‡(
vÆue
 == "") {

346  
deÁu…VÆue
;

348  
vÆue
.
	`Atof
 ();

353 
ãm∂©e
 <>

354 
TSåög
 
	`„tchVÆue
 (c⁄° 
°d
::
m≠
<TSåög,TSåög>& 
keyVÆueM≠
,

355 
TSåög
 
key
, TSåög 
deÁu…VÆue
)

357 
TSåög
 
	`vÆue
 (
	`„tchVÆue
 (
keyVÆueM≠
, 
key
));

358 i‡(
vÆue
 == "") {

359  
deÁu…VÆue
;

361  
vÆue
;

366 
ãm∂©e
 <>

367 
boﬁ
 
	`„tchVÆue
 (c⁄° 
°d
::
m≠
<
TSåög
,TSåög>& 
keyVÆueM≠
,

368 
TSåög
 
key
, 
boﬁ
 
deÁu…VÆue
)

370 
TSåög
 
	`vÆue
 (
	`„tchVÆue
 (
keyVÆueM≠
, 
key
));

371 i‡(
vÆue
 == "") {

372  
deÁu…VÆue
;

374 
vÆue
.
	`ToUµî
 ();

375 i‡(
vÆue
 == "TRUE" || value == "T" || value == "1") {

376  
åue
;

378  
Ál£
;

383 
ãm∂©e
 <>

384 
°d
::
ve˘‹
<> 
	`„tchVÆue
(c⁄° std::
m≠
<
TSåög
, TSåög> & 
keyVÆueM≠
,

385 
TSåög
 
key
,

386 
°d
::
ve˘‹
<> 
deÁu…VÆue
)

388 
TSåög
 
	`∑r£Såög
 (
	`„tchVÆue
 (
keyVÆueM≠
, 
key
));

389 i‡(
∑r£Såög
 == "") {

390  
deÁu…VÆue
;

392 
∑r£Såög
.
	`ToUµî
 ();

393 
°d
::
ve˘‹
<> 
vÆues
;

395 c⁄° 
TSåög
 
	`tokíDñim
 ("+");

396 
TObjAºay
* 
tokíSåögs
 = 
∑r£Såög
.
	`Tokíize
 (
tokíDñim
);

397 
TIãr
 
	`√xtTokí
 (
tokíSåögs
);

398 
TObjSåög
* 
tokíSåög
 = (TObjSåög*)
	`√xtTokí
 ();

399 ; 
tokíSåög
 !
NULL
;ÅokíSåög = (
TObjSåög
*)
	`√xtTokí
 ()) {

400 
°d
::
°rög°ªam
 
s°r
;

401 
cuºítVÆue
;

402 
s°r
 << 
tokíSåög
->
	`GëSåög
 ().
	`D©a
 ();

403 
s°r
 >> 
cuºítVÆue
;

404 
vÆues
.
	`push_back
 (
cuºítVÆue
);

406  
vÆues
;

411 
TMVA
::
MëhodDNN
::
	`Pro˚ssO±i⁄s
()

413 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

414 
	`Log
(Ë<< 
kINFO


416 << 
Endl
;

419 i‡(
fArchôe˘uªSåög
 == "STANDARD") {

420 
	`Log
(Ë<< 
kERROR
 << "The STANDARDárchitecture has been deprecated. "

424 << 
Endl
;

425 
	`Log
(Ë<< 
kFATAL
 << "The STANDARDárchitecture has been deprecated. "

429 << 
Endl
;

432 i‡(
fArchôe˘uªSåög
 == "OPENCL") {

433 
	`Log
(Ë<< 
kERROR
 << "The OPENCLárchitecture hasÇot been implemented yet. "

437 << 
Endl
;

438 
	`Log
(Ë<< 
kFATAL
 << "The OPENCLárchitecture hasÇot been implemented yet. "

442 << 
Endl
;

445 i‡(
fArchôe˘uªSåög
 == "GPU") {

446 #i‚de‡
DNNCUDA


447 
	`Log
(Ë<< 
kERROR
 << "CUDA backendÇotÉnabled. Please make sure "

450 << 
Endl
;

451 
	`Log
(Ë<< 
kFATAL
 << "CUDA backendÇotÉnabled. Please make sure "

454 << 
Endl
;

458 i‡(
fArchôe˘uªSåög
 == "CPU") {

459 #i‚de‡
DNNCPU


460 
	`Log
(Ë<< 
kERROR
 << "Multi-core CPU backendÇotÉnabled. Please make sure "

463 << 
Endl
;

464 
	`Log
(Ë<< 
kFATAL
 << "Multi-core CPU backendÇotÉnabled. Please make sure "

467 << 
Endl
;

475 
fLayout
 = 
TMVA
::
MëhodDNN
::
	`P¨£LayoutSåög
 (
fLayoutSåög
);

476 
size_t
 
öputSize
 = 
	`GëNV¨übÀs
 ();

477 
size_t
 
ouçutSize
 = 1;

478 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
 && 
	`GëNT¨gës
() != 0) {

479 
ouçutSize
 = 
	`GëNT¨gës
();

480 } i‡(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
 && 
	`D©aInfo
().
	`GëNCœs£s
() >= 2) {

481 
ouçutSize
 = 
	`D©aInfo
().
	`GëNCœs£s
();

484 
fNë
.
	`SëB©chSize
(1);

485 
fNë
.
	`SëI≈utWidth
(
öputSize
);

487 autÿ
ôLayout
 = 
°d
::
	`begö
 (
fLayout
);

488 autÿ
ôLayoutEnd
 = 
°d
::
	`íd
 (
fLayout
)-1;

489  ; 
ôLayout
 !
ôLayoutEnd
; ++itLayout) {

490 
fNë
.
	`AddLayî
((*
ôLayout
).
fú°
, (*ôLayout).
£c⁄d
);

492 
fNë
.
	`AddLayî
(
ouçutSize
, 
EA˘iv©i⁄Fun˘i⁄
::
kIdítôy
);

498 
fOuçutFun˘i⁄
 = 
EOuçutFun˘i⁄
::
kSigmoid
;

499 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
)

501 i‡(
fEº‹Så©egy
 == "SUMOFSQUARES") {

502 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kMónSqu¨edEº‹
);

504 i‡(
fEº‹Så©egy
 == "CROSSENTROPY") {

505 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kCrossE¡r›y
);

507 
fOuçutFun˘i⁄
 = 
EOuçutFun˘i⁄
::
kSigmoid
;

508 } i‡(
fA«lysisTy≥
 =
Ty≥s
::
kRegªssi⁄
) {

509 i‡(
fEº‹Så©egy
 != "SUMOFSQUARES") {

510 
	`Log
 (Ë<< 
kWARNING
 << "ForÑegression only SUMOFSQUARES isá valid "

512 << " SUMOFSQUARESÇow." << 
Endl
;

514 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kMónSqu¨edEº‹
);

515 
fOuçutFun˘i⁄
 = 
EOuçutFun˘i⁄
::
kIdítôy
;

516 } i‡(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

517 i‡(
fEº‹Så©egy
 == "SUMOFSQUARES") {

518 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kMónSqu¨edEº‹
);

520 i‡(
fEº‹Så©egy
 == "CROSSENTROPY") {

521 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kCrossE¡r›y
);

523 i‡(
fEº‹Så©egy
 == "MUTUALEXCLUSIVE") {

524 
fNë
.
	`SëLossFun˘i⁄
(
ELossFun˘i⁄
::
kSo·maxCrossE¡r›y
);

526 
fOuçutFun˘i⁄
 = 
EOuçutFun˘i⁄
::
kSo·max
;

533 i‡(
fWeightInôüliz©i⁄Såög
 == "XAVIER") {

534 
fWeightInôüliz©i⁄
 = 
DNN
::
EInôüliz©i⁄
::
kGauss
;

536 i‡(
fWeightInôüliz©i⁄Såög
 == "XAVIERUNIFORM") {

537 
fWeightInôüliz©i⁄
 = 
DNN
::
EInôüliz©i⁄
::
kUnif‹m
;

540 
fWeightInôüliz©i⁄
 = 
DNN
::
EInôüliz©i⁄
::
kGauss
;

547 
KeyVÆueVe˘‹_t
 
°øãgyKeyVÆues
 = 
	`P¨£KeyVÆueSåög
(
fTøöögSå©egySåög
,

548 
	`TSåög
 ("|"),

549 
	`TSåög
 (","));

550 auto& 
block
 : 
°øãgyKeyVÆues
) {

551 
TTøöögSëtögs
 
£âögs
;

553 
£âögs
.
c⁄vîgí˚Sãps
 = 
	`„tchVÆue
(
block
, "ConvergenceSteps", 100);

554 
£âögs
.
b©chSize
 = 
	`„tchVÆue
(
block
, "BatchSize", 30);

555 
£âögs
.
ã°I¡îvÆ
 = 
	`„tchVÆue
(
block
, "TestRepetitions", 7);

556 
£âögs
.
weightDeˇy
 = 
	`„tchVÆue
(
block
, "WeightDecay", 0.0);

557 
£âögs
.
À¨nögR©e
 = 
	`„tchVÆue
(
block
, "LearningRate", 1e-5);

558 
£âögs
.
momítum
 = 
	`„tchVÆue
(
block
, "Momentum", 0.3);

559 
£âögs
.
dr›outProbabûôõs
 = 
	`„tchVÆue
(
block
, "DropConfig",

560 
°d
::
ve˘‹
<
DoubÀ_t
>());

562 
TSåög
 
ªguœriz©i⁄
 = 
	`„tchVÆue
(
block
, "Regularization",

563 
	`TSåög
 ("NONE"));

564 i‡(
ªguœriz©i⁄
 == "L1") {

565 
£âögs
.
ªguœriz©i⁄
 = 
DNN
::
EReguœriz©i⁄
::
kL1
;

566 } i‡(
ªguœriz©i⁄
 == "L2") {

567 
£âögs
.
ªguœriz©i⁄
 = 
DNN
::
EReguœriz©i⁄
::
kL2
;

570 
TSåög
 
°rMu…ôhªadög
 = 
	`„tchVÆue
(
block
, "Multithreading",

571 
	`TSåög
 ("True"));

572 i‡(
°rMu…ôhªadög
.
	`BegösWôh
 ("T")) {

573 
£âögs
.
mu…ôhªadög
 = 
åue
;

575 
£âögs
.
mu…ôhªadög
 = 
Ál£
;

578 
fTøöögSëtögs
.
	`push_back
(
£âögs
);

584 
TMVA
::
MëhodDNN
::
	`Tøö
()

586 i‡(
fI¡îa˘ive
 && fI¡îa˘ive->
	`NŸInôülized
()){

587 
°d
::
ve˘‹
<
TSåög
> 
tôÀs
 = {"Error onÅraining set", "Error onÅest set"};

588 
fI¡îa˘ive
->
	`Inô
(
tôÀs
);

590 
fIPyMaxIãr
 = 100;

593 i‡(
fArchôe˘uªSåög
 == "GPU") {

594 
	`TøöGpu
();

595 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

596 
	`ExôFromTøöög
();

598 } i‡(
fArchôe˘uªSåög
 == "OpenCL") {

599 
	`Log
(Ë<< 
kFATAL
 << "O≥nCL backídÇŸ yë suµ‹ãd." << 
Endl
;

601 } i‡(
fArchôe˘uªSåög
 == "CPU") {

602 
	`TøöCpu
();

603 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

604 
	`ExôFromTøöög
();

608 
	`Log
(Ë<< 
kINFO
 << "Using Standard Implementation.";

610 
°d
::
ve˘‹
<
P©ã∫
> 
åaöP©ã∫
;

611 
°d
::
ve˘‹
<
P©ã∫
> 
ã°P©ã∫
;

613 c⁄° 
°d
::
ve˘‹
<
TMVA
::
Evít
*>& 
evítCﬁÀ˘i⁄Tøöög
 = 
	`GëEvítCﬁÀ˘i⁄
 (
Ty≥s
::
kTøöög
);

614 c⁄° 
°d
::
ve˘‹
<
TMVA
::
Evít
*>& 
evítCﬁÀ˘i⁄Te°ög
 = 
	`GëEvítCﬁÀ˘i⁄
 (
Ty≥s
::
kTe°ög
);

616 autÿ&
evít
 : 
evítCﬁÀ˘i⁄Tøöög
) {

617 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
vÆues
 = 
evít
->
	`GëVÆues
();

618 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
) {

619 
ouçutVÆue
 = 
evít
->
	`GëCœss
 () == 0 ? 0.9 : 0.1;

620 
åaöP©ã∫
.
	`push_back
(
	`P©ã∫
 (
vÆues
.
	`begö
(),

621 
vÆues
.
	`íd
(),

622 
ouçutVÆue
,

623 
evít
->
	`GëWeight
()));

624 
åaöP©ã∫
.
	`back
().
	`addI≈ut
(1.0);

625 } i‡(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

626 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`⁄eHŸ
(
	`D©aInfo
().
	`GëNCœs£s
(), 0.0);

627 
⁄eHŸ
[
evít
->
	`GëCœss
()] = 1.0;

628 
åaöP©ã∫
.
	`push_back
(
	`P©ã∫
 (
vÆues
.
	`begö
(), vÆues.
	`íd
(),

629 
⁄eHŸ
.
	`cbegö
(), o√HŸ.
	`˚nd
(),

630 
evít
->
	`GëWeight
()));

631 
åaöP©ã∫
.
	`back
().
	`addI≈ut
(1.0);

633 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
èrgës
 = 
evít
->
	`GëT¨gës
 ();

634 
åaöP©ã∫
.
	`push_back
(
	`P©ã∫
(
vÆues
.
	`begö
(),

635 
vÆues
.
	`íd
(),

636 
èrgës
.
	`begö
(),

637 
èrgës
.
	`íd
(),

638 
evít
->
	`GëWeight
 ()));

639 
åaöP©ã∫
.
	`back
 ().
	`addI≈ut
 (1.0);

643 autÿ&
evít
 : 
evítCﬁÀ˘i⁄Te°ög
) {

644 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
vÆues
 = 
evít
->
	`GëVÆues
();

645 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
) {

646 
ouçutVÆue
 = 
evít
->
	`GëCœss
 () == 0 ? 0.9 : 0.1;

647 
ã°P©ã∫
.
	`push_back
(
	`P©ã∫
 (
vÆues
.
	`begö
(),

648 
vÆues
.
	`íd
(),

649 
ouçutVÆue
,

650 
evít
->
	`GëWeight
()));

651 
ã°P©ã∫
.
	`back
().
	`addI≈ut
(1.0);

652 } i‡(
fA«lysisTy≥
 =
Ty≥s
::
kMu…i˛ass
) {

653 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`⁄eHŸ
(
	`D©aInfo
().
	`GëNCœs£s
(), 0.0);

654 
⁄eHŸ
[
evít
->
	`GëCœss
()] = 1.0;

655 
ã°P©ã∫
.
	`push_back
(
	`P©ã∫
 (
vÆues
.
	`begö
(), vÆues.
	`íd
(),

656 
⁄eHŸ
.
	`cbegö
(), o√HŸ.
	`˚nd
(),

657 
evít
->
	`GëWeight
()));

658 
ã°P©ã∫
.
	`back
().
	`addI≈ut
(1.0);

660 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
èrgës
 = 
evít
->
	`GëT¨gës
 ();

661 
ã°P©ã∫
.
	`push_back
(
	`P©ã∫
(
vÆues
.
	`begö
(),

662 
vÆues
.
	`íd
(),

663 
èrgës
.
	`begö
(),

664 
èrgës
.
	`íd
(),

665 
evít
->
	`GëWeight
 ()));

666 
ã°P©ã∫
.
	`back
 ().
	`addI≈ut
 (1.0);

670 
TMVA
::
DNN
::
Në
 
√t
;

671 
°d
::
ve˘‹
<> 
weights
;

673 
√t
.
	`SëIpyth⁄I¡îa˘ive
(
fI¡îa˘ive
, &
fExôFromTøöög
, &
fIPyMaxIãr
, &
fIPyCuºítIãr
);

675 
√t
.
	`£tI≈utSize
(
fNë
.
	`GëI≈utWidth
() + 1);

676 
√t
.
	`£tOuçutSize
(
fNë
.
	`GëOuçutWidth
() + 1);

678 
size_t
 
i
 = 0; i < 
fNë
.
	`GëDïth
(); i++) {

679 
EA˘iv©i⁄Fun˘i⁄
 
f
 = 
fNë
.
	`GëLayî
(
i
).
	`GëA˘iv©i⁄Fun˘i⁄
();

680 
EnumFun˘i⁄
 
g
 = EnumFun˘i⁄::
LINEAR
;

681 
f
) {

682 
EA˘iv©i⁄Fun˘i⁄
::
kIdítôy
: 
g
 = 
EnumFun˘i⁄
::
LINEAR
; ;

683 
EA˘iv©i⁄Fun˘i⁄
::
kRñu
: 
g
 = 
EnumFun˘i⁄
::
RELU
; ;

684 
EA˘iv©i⁄Fun˘i⁄
::
kSigmoid
: 
g
 = 
EnumFun˘i⁄
::
SIGMOID
; ;

685 
EA˘iv©i⁄Fun˘i⁄
::
kT™h
: 
g
 = 
EnumFun˘i⁄
::
TANH
; ;

686 
EA˘iv©i⁄Fun˘i⁄
::
kSymmRñu
: 
g
 = 
EnumFun˘i⁄
::
SYMMRELU
; ;

687 
EA˘iv©i⁄Fun˘i⁄
::
kSo·Sign
: 
g
 = 
EnumFun˘i⁄
::
SOFTSIGN
; ;

688 
EA˘iv©i⁄Fun˘i⁄
::
kGauss
: 
g
 = 
EnumFun˘i⁄
::
GAUSS
; ;

690 i‡(
i
 < 
fNë
.
	`GëDïth
() - 1) {

691 
√t
.
	`addLayî
(
	`Layî
(
fNë
.
	`GëLayî
(
i
).
	`GëWidth
(), 
g
));

693 
ModeOuçutVÆues
 
h
 = ModeOuçutVÆues::
DIRECT
;

694 
fOuçutFun˘i⁄
) {

695 
EOuçutFun˘i⁄
::
kIdítôy
: 
h
 = 
ModeOuçutVÆues
::
DIRECT
; ;

696 
EOuçutFun˘i⁄
::
kSigmoid
: 
h
 = 
ModeOuçutVÆues
::
SIGMOID
; ;

697 
EOuçutFun˘i⁄
::
kSo·max
: 
h
 = 
ModeOuçutVÆues
::
SOFTMAX
; ;

699 
√t
.
	`addLayî
(
	`Layî
(
fNë
.
	`GëLayî
(
i
).
	`GëWidth
(), 
g
, 
h
));

703 
fNë
.
	`GëLossFun˘i⁄
()) {

704 
ELossFun˘i⁄
::
kMónSqu¨edEº‹
:

705 
√t
.
	`£tEº‹Fun˘i⁄
(
ModeEº‹Fun˘i⁄
::
SUMOFSQUARES
);

707 
ELossFun˘i⁄
::
kCrossE¡r›y
:

708 
√t
.
	`£tEº‹Fun˘i⁄
(
ModeEº‹Fun˘i⁄
::
CROSSENTROPY
);

710 
ELossFun˘i⁄
::
kSo·maxCrossE¡r›y
:

711 
√t
.
	`£tEº‹Fun˘i⁄
(
ModeEº‹Fun˘i⁄
::
CROSSENTROPY_MUTUALEXCLUSIVE
);

715 
fWeightInôüliz©i⁄
) {

716 
EInôüliz©i⁄
::
kGauss
:

717 
√t
.
	`öôülizeWeights
(
WeightInôüliz©i⁄Så©egy
::
XAVIER
,

718 
°d
::
	`back_ö£πî
(
weights
));

720 
EInôüliz©i⁄
::
kUnif‹m
:

721 
√t
.
	`öôülizeWeights
(
WeightInôüliz©i⁄Så©egy
::
XAVIERUNIFORM
,

722 
°d
::
	`back_ö£πî
(
weights
));

725 
√t
.
	`öôülizeWeights
(
WeightInôüliz©i⁄Så©egy
::
XAVIER
,

726 
°d
::
	`back_ö£πî
(
weights
));

730 
idxSëtög
 = 0;

731 autÿ
s
 : 
fTøöögSëtögs
) {

733 
EnumReguœriz©i⁄
 
r
 = EnumReguœriz©i⁄::
NONE
;

734 
s
.
ªguœriz©i⁄
) {

735 
EReguœriz©i⁄
::
kN⁄e
: 
r
 = 
EnumReguœriz©i⁄
::
NONE
; ;

736 
EReguœriz©i⁄
::
kL1
: 
r
 = 
EnumReguœriz©i⁄
::
L1
; ;

737 
EReguœriz©i⁄
::
kL2
: 
r
 = 
EnumReguœriz©i⁄
::
L2
; ;

740 
Sëtögs
 * 
£âögs
 = 
√w
 
	`Sëtögs
(
	`TSåög
(), 
s
.
c⁄vîgí˚Sãps
, s.
b©chSize
,

741 
s
.
ã°I¡îvÆ
, s.
weightDeˇy
, 
r
,

742 
MöimizîTy≥
::
fSãïe°
, 
s
.
À¨nögR©e
,

743 
s
.
momítum
, 1, s.
mu…ôhªadög
);

744 
°d
::
sh¨ed_±r
<
Sëtögs
> 
	`±rSëtögs
(
£âögs
);

745 
±rSëtögs
->
	`£tM⁄ô‹ög
 (0);

746 
	`Log
(Ë<< 
kINFO


747 << "Tøöög wôhÜó∫ögÑ©ê" << 
±rSëtögs
->
	`À¨nögR©e
 ()

748 << ", momítum = " << 
±rSëtögs
->
	`momítum
 ()

749 << ",Ñïëôi⁄†" << 
±rSëtögs
->
	`ª≥tôi⁄s
 ()

750 << 
Endl
;

752 
±rSëtögs
->
	`£tProgªssLimôs
 ((
idxSëtög
)*100.0/(
fSëtögs
.
	`size
 ()),

753 (
idxSëtög
+1)*100.0/(
fSëtögs
.
	`size
 ()));

755 c⁄° 
°d
::
ve˘‹
<>& 
dr›C⁄fig
 = 
±rSëtögs
->
	`dr›Fø˘i⁄s
 ();

756 i‡(!
dr›C⁄fig
.
	`em±y
 ()) {

757 
	`Log
 (Ë<< 
kINFO
 << "Dr› c⁄figuøti⁄" << 
Endl


758 << " dr›Ñïëôi⁄†" << 
±rSëtögs
->
	`dr›Rïëôi⁄s
()

759 << 
Endl
;

762 
idx
 = 0;

763 autÿ
f
 : 
dr›C⁄fig
) {

764 
	`Log
 (Ë<< 
kINFO
 << " Layî " << 
idx
 << " = " << 
f
 << 
Endl
;

765 ++
idx
;

767 
	`Log
 (Ë<< 
kINFO
 << 
Endl
;

769 
DNN
::
Sãïe°
 
	`möimizî
(
±rSëtögs
->
	`À¨nögR©e
(),

770 
±rSëtögs
->
	`momítum
(),

771 
±rSëtögs
->
	`ª≥tôi⁄s
());

772 
√t
.
	`åaö
(
weights
, 
åaöP©ã∫
, 
ã°P©ã∫
, 
möimizî
, *
±rSëtögs
.
	`gë
());

773 
±rSëtögs
.
	`ª£t
();

774 
	`Log
 (Ë<< 
kINFO
 << 
Endl
;

775 
idxSëtög
++;

777 
size_t
 
weightIndex
 = 0;

778 
size_t
 
l
 = 0;Ü < 
fNë
.
	`GëDïth
();Ü++) {

779 autÿ& 
œyîWeights
 = 
fNë
.
	`GëLayî
(
l
).
	`GëWeights
();

780 
I¡_t
 
j
 = 0; j < 
œyîWeights
.
	`GëNcﬁs
(); j++) {

781 
I¡_t
 
i
 = 0; i < 
œyîWeights
.
	`GëNrows
(); i++) {

782 
	`œyîWeights
(
i
,
j
Ë
weights
[
weightIndex
];

783 
weightIndex
++;

786 autÿ& 
œyîBü£s
 = 
fNë
.
	`GëLayî
(
l
).
	`GëBü£s
();

787 i‡(
l
 == 0) {

788 
I¡_t
 
i
 = 0; i < 
œyîBü£s
.
	`GëNrows
(); i++) {

789 
	`œyîBü£s
(
i
,0Ë
weights
[
weightIndex
];

790 
weightIndex
++;

793 
I¡_t
 
i
 = 0; i < 
œyîBü£s
.
	`GëNrows
(); i++) {

794 
	`œyîBü£s
(
i
,0) = 0.0;

798 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

799 
	`ExôFromTøöög
();

804 
TMVA
::
MëhodDNN
::
	`TøöGpu
()

807 #ifde‡
DNNCUDA


809 
size_t
 
nTøöögSam∂es
 = 
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
).
	`size
();

810 
size_t
 
nTe°Sam∂es
 = 
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
).
	`size
();

812 
	`Log
(Ë<< 
kINFO
 << "Sèπ o‡√uø»√tw‹kÅøöög o¿GPU." << 
Endl
;

814 
size_t
 
åaöögPha£
 = 1;

815 
fNë
.
	`Inôülize
(
fWeightInôüliz©i⁄
);

816 
TTøöögSëtögs
 & 
£âögs
 : 
fTøöögSëtögs
) {

818 i‡(
fI¡îa˘ive
){

819 
fI¡îa˘ive
->
	`CÀ¨Gøphs
();

822 
TNë
<
TCuda
<>> 
	`√t
(
£âögs
.
b©chSize
, 
fNë
);

823 
√t
.
	`SëWeightDeˇy
(
£âögs
.
weightDeˇy
);

824 
√t
.
	`SëReguœriz©i⁄
(
£âögs
.
ªguœriz©i⁄
);

828 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`dr›outVe˘‹
(
£âögs
.
dr›outProbabûôõs
);

829 autÿ& 
p
 : 
dr›outVe˘‹
) {

830 
p
 = 1.0 -Ö;

832 
√t
.
	`SëDr›outProbabûôõs
(
dr›outVe˘‹
);

834 
√t
.
	`InôülizeGødõ¡s
();

835 autÿ
ã°Në
 = 
√t
.
	`Cª©eCl⁄e
(
£âögs
.
b©chSize
);

837 
	`Log
(Ë<< 
kINFO
 << "TøöögÖha£ " << 
åaöögPha£
 << " of "

838 << 
fTøöögSëtögs
.
	`size
(Ë<< ":" << 
Endl
;

839 
åaöögPha£
++;

841 
usög
 
D©aLﬂdî_t
 = 
TD©aLﬂdî
<
TMVAI≈ut_t
, 
TCuda
<>>;

843 
size_t
 
nThªads
 = 1;

844 
D©aLﬂdî_t
 
	`åaöögD©a
(
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
),

845 
nTøöögSam∂es
,

846 
√t
.
	`GëB©chSize
(),

847 
√t
.
	`GëI≈utWidth
(),

848 
√t
.
	`GëOuçutWidth
(), 
nThªads
);

849 
D©aLﬂdî_t
 
	`ã°D©a
(
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
),

850 
nTe°Sam∂es
,

851 
ã°Në
.
	`GëB©chSize
(),

852 
√t
.
	`GëI≈utWidth
(),

853 
√t
.
	`GëOuçutWidth
(), 
nThªads
);

854 
DNN
::
TGødõ¡Des˚¡
<
TCuda
<>> 
	`möimizî
(
£âögs
.
À¨nögR©e
,

855 
£âögs
.
c⁄vîgí˚Sãps
,

856 
£âögs
.
ã°I¡îvÆ
);

858 
°d
::
ve˘‹
<
TNë
<
TCuda
<>>> 
√ts
{};

859 
°d
::
ve˘‹
<
TB©ch
<
TCuda
<>>> 
b©ches
{};

860 
√ts
.
	`ª£rve
(
nThªads
);

861 
size_t
 
i
 = 0; i < 
nThªads
; i++) {

862 
√ts
.
	`push_back
(
√t
);

863 
size_t
 
j
 = 0; j < 
√t
.
	`GëDïth
(); j++)

865 autÿ&
ma°îLayî
 = 
√t
.
	`GëLayî
(
j
);

866 autÿ&
œyî
 = 
√ts
.
	`back
().
	`GëLayî
(
j
);

867 
TCuda
<>::
	`C›y
(
œyî
.
	`GëWeights
(),

868 
ma°îLayî
.
	`GëWeights
());

869 
TCuda
<>::
	`C›y
(
œyî
.
	`GëBü£s
(),

870 
ma°îLayî
.
	`GëBü£s
());

874 
boﬁ
 
c⁄vîged
 = 
Ál£
;

875 
size_t
 
°ïCou¡
 = 0;

876 
size_t
 
b©chesInEpoch
 = 
nTøöögSam∂es
 / 
√t
.
	`GëB©chSize
();

878 
°d
::
chr⁄o
::
time_poöt
<°d::chr⁄o::
sy°em_˛ock
> 
°¨t
, 
íd
;

879 
°¨t
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

881 i‡(!
fI¡îa˘ive
) {

882 
	`Log
(Ë<< 
°d
::
	`£tw
(10) << "Epoch" << " | "

883 << 
°d
::
	`£tw
(12) << "Train Err."

884 << 
°d
::
	`£tw
(12) << "Test Err."

885 << 
°d
::
	`£tw
(12) << "GFLOP/s"

886 << 
°d
::
	`£tw
(12Ë<< "C⁄v. Sãps" << 
Endl
;

887 
°d
::
°rög
 
	`£∑øt‹
(62, '-');

888 
	`Log
(Ë<< 
£∑øt‹
 << 
Endl
;

891 !
c⁄vîged
)

893 
°ïCou¡
++;

896 
åaöögD©a
.
	`ShufÊe
();

897 
size_t
 
i
 = 0; i < 
b©chesInEpoch
; i +
nThªads
) {

898 
b©ches
.
	`˛ór
();

899 
size_t
 
j
 = 0; j < 
nThªads
; j++) {

900 
b©ches
.
	`ª£rve
(
nThªads
);

901 
b©ches
.
	`push_back
(
åaöögD©a
.
	`GëB©ch
());

903 i‡(
£âögs
.
momítum
 > 0.0) {

904 
möimizî
.
	`SãpMomítum
(
√t
, 
√ts
, 
b©ches
, 
£âögs
.
momítum
);

906 
möimizî
.
	`Sãp
(
√t
, 
√ts
, 
b©ches
);

910 i‡((
°ïCou¡
 % 
möimizî
.
	`GëTe°I¡îvÆ
()) == 0) {

913 
DoubÀ_t
 
ã°Eº‹
 = 0.0;

914 autÿ
b©ch
 : 
ã°D©a
) {

915 autÿ
öputM©rix
 = 
b©ch
.
	`GëI≈ut
();

916 autÿ
ouçutM©rix
 = 
b©ch
.
	`GëOuçut
();

917 
ã°Eº‹
 +
ã°Në
.
	`Loss
(
öputM©rix
, 
ouçutM©rix
);

919 
ã°Eº‹
 /(
DoubÀ_t
Ë(
nTe°Sam∂es
 / 
£âögs
.
b©chSize
);

921 
íd
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

924 
DoubÀ_t
 
åaöögEº‹
 = 0.0;

925 autÿ
b©ch
 : 
åaöögD©a
) {

926 autÿ
öputM©rix
 = 
b©ch
.
	`GëI≈ut
();

927 autÿ
ouçutM©rix
 = 
b©ch
.
	`GëOuçut
();

928 
åaöögEº‹
 +
√t
.
	`Loss
(
öputM©rix
, 
ouçutM©rix
);

930 
åaöögEº‹
 /(
DoubÀ_t
Ë(
nTøöögSam∂es
 / 
£âögs
.
b©chSize
);

933 
°d
::
chr⁄o
::
duøti⁄
<> 
ñ≠£d_£c⁄ds
 = 
íd
 - 
°¨t
;

934 
£c⁄ds
 = 
ñ≠£d_£c⁄ds
.
	`cou¡
();

935 
nFl›s
 = (Ë(
£âögs
.
ã°I¡îvÆ
 * 
b©chesInEpoch
);

936 
nFl›s
 *
√t
.
	`GëNFl›s
() * 1e-9;

938 
c⁄vîged
 = 
möimizî
.
	`HasC⁄vîged
(
ã°Eº‹
);

939 
°¨t
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

941 i‡(
fI¡îa˘ive
) {

942 
fI¡îa˘ive
->
	`AddPoöt
(
°ïCou¡
, 
åaöögEº‹
, 
ã°Eº‹
);

943 
fIPyCuºítIãr
 = 100.0 * 
möimizî
.
	`GëC⁄vîgí˚Cou¡
()

944 / 
möimizî
.
	`GëC⁄vîgí˚Sãps
 ();

945 i‡(
fExôFromTøöög
) ;

947 
	`Log
(Ë<< 
°d
::
	`£tw
(10Ë<< 
°ïCou¡
 << " | "

948 << 
°d
::
	`£tw
(12Ë<< 
åaöögEº‹


949 << 
°d
::
	`£tw
(12Ë<< 
ã°Eº‹


950 << 
°d
::
	`£tw
(12Ë<< 
nFl›s
 / 
£c⁄ds


951 << 
°d
::
	`£tw
(12Ë<< 
möimizî
.
	`GëC⁄vîgí˚Cou¡
(Ë<< 
Endl
;

952 i‡(
c⁄vîged
) {

953 
	`Log
(Ë<< 
Endl
;

958 
size_t
 
l
 = 0;Ü < 
√t
.
	`GëDïth
();Ü++) {

959 
fNë
.
	`GëLayî
(
l
).
	`GëWeights
(Ë(
TM©rixT
<
DoubÀ_t
>Ë
√t
.GetLayer(l).GetWeights();

960 
fNë
.
	`GëLayî
(
l
).
	`GëBü£s
(Ë(
TM©rixT
<
DoubÀ_t
>Ë
√t
.GetLayer(l).GetBiases();

966 
	`Log
(Ë<< 
kFATAL
 << "CUDA backendÇotÉnabled. Please make sure "

968 "dëe˘ed by CMAKE." << 
Endl
;

974 
TMVA
::
MëhodDNN
::
	`TøöCpu
()

977 #ifde‡
DNNCPU


979 
size_t
 
nTøöögSam∂es
 = 
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
).
	`size
();

980 
size_t
 
nTe°Sam∂es
 = 
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
).
	`size
();

982 
	`Log
(Ë<< 
kINFO
 << "Sèπ o‡√uø»√tw‹kÅøöög o¿CPU." << 
Endl
 << Endl;

984 
fNë
.
	`Inôülize
(
fWeightInôüliz©i⁄
);

986 
size_t
 
åaöögPha£
 = 1;

987 
TTøöögSëtögs
 & 
£âögs
 : 
fTøöögSëtögs
) {

989 i‡(
fI¡îa˘ive
){

990 
fI¡îa˘ive
->
	`CÀ¨Gøphs
();

993 
	`Log
(Ë<< "TøöögÖha£ " << 
åaöögPha£
 << " of "

994 << 
fTøöögSëtögs
.
	`size
(Ë<< ":" << 
Endl
;

995 
åaöögPha£
++;

997 
TNë
<
TCpu
<>> 
	`√t
(
£âögs
.
b©chSize
, 
fNë
);

998 
√t
.
	`SëWeightDeˇy
(
£âögs
.
weightDeˇy
);

999 
√t
.
	`SëReguœriz©i⁄
(
£âögs
.
ªguœriz©i⁄
);

1002 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`dr›outVe˘‹
(
£âögs
.
dr›outProbabûôõs
);

1003 autÿ& 
p
 : 
dr›outVe˘‹
) {

1004 
p
 = 1.0 -Ö;

1006 
√t
.
	`SëDr›outProbabûôõs
(
dr›outVe˘‹
);

1008 
√t
.
	`InôülizeGødõ¡s
();

1009 autÿ
ã°Në
 = 
√t
.
	`Cª©eCl⁄e
(
£âögs
.
b©chSize
);

1011 
usög
 
D©aLﬂdî_t
 = 
TD©aLﬂdî
<
TMVAI≈ut_t
, 
TCpu
<>>;

1013 
size_t
 
nThªads
 = 1;

1014 
D©aLﬂdî_t
 
	`åaöögD©a
(
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTøöög
),

1015 
nTøöögSam∂es
,

1016 
√t
.
	`GëB©chSize
(),

1017 
√t
.
	`GëI≈utWidth
(),

1018 
√t
.
	`GëOuçutWidth
(), 
nThªads
);

1019 
D©aLﬂdî_t
 
	`ã°D©a
(
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
),

1020 
nTe°Sam∂es
,

1021 
ã°Në
.
	`GëB©chSize
(),

1022 
√t
.
	`GëI≈utWidth
(),

1023 
√t
.
	`GëOuçutWidth
(), 
nThªads
);

1024 
DNN
::
TGødõ¡Des˚¡
<
TCpu
<>> 
	`möimizî
(
£âögs
.
À¨nögR©e
,

1025 
£âögs
.
c⁄vîgí˚Sãps
,

1026 
£âögs
.
ã°I¡îvÆ
);

1028 
°d
::
ve˘‹
<
TNë
<
TCpu
<>>> 
√ts
{};

1029 
°d
::
ve˘‹
<
TB©ch
<
TCpu
<>>> 
b©ches
{};

1030 
√ts
.
	`ª£rve
(
nThªads
);

1031 
size_t
 
i
 = 0; i < 
nThªads
; i++) {

1032 
√ts
.
	`push_back
(
√t
);

1033 
size_t
 
j
 = 0; j < 
√t
.
	`GëDïth
(); j++)

1035 autÿ&
ma°îLayî
 = 
√t
.
	`GëLayî
(
j
);

1036 autÿ&
œyî
 = 
√ts
.
	`back
().
	`GëLayî
(
j
);

1037 
TCpu
<>::
	`C›y
(
œyî
.
	`GëWeights
(),

1038 
ma°îLayî
.
	`GëWeights
());

1039 
TCpu
<>::
	`C›y
(
œyî
.
	`GëBü£s
(),

1040 
ma°îLayî
.
	`GëBü£s
());

1044 
boﬁ
 
c⁄vîged
 = 
Ál£
;

1045 
size_t
 
°ïCou¡
 = 0;

1046 
size_t
 
b©chesInEpoch
 = 
nTøöögSam∂es
 / 
√t
.
	`GëB©chSize
();

1048 
°d
::
chr⁄o
::
time_poöt
<°d::chr⁄o::
sy°em_˛ock
> 
°¨t
, 
íd
;

1049 
°¨t
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

1051 i‡(!
fI¡îa˘ive
) {

1052 
	`Log
(Ë<< 
°d
::
	`£tw
(10) << "Epoch" << " | "

1053 << 
°d
::
	`£tw
(12) << "Train Err."

1054 << 
°d
::
	`£tw
(12) << "Test Err."

1055 << 
°d
::
	`£tw
(12) << "GFLOP/s"

1056 << 
°d
::
	`£tw
(12Ë<< "C⁄v. Sãps" << 
Endl
;

1057 
°d
::
°rög
 
	`£∑øt‹
(62, '-');

1058 
	`Log
(Ë<< 
£∑øt‹
 << 
Endl
;

1061 !
c⁄vîged
)

1063 
°ïCou¡
++;

1065 
åaöögD©a
.
	`ShufÊe
();

1066 
size_t
 
i
 = 0; i < 
b©chesInEpoch
; i +
nThªads
) {

1067 
b©ches
.
	`˛ór
();

1068 
size_t
 
j
 = 0; j < 
nThªads
; j++) {

1069 
b©ches
.
	`ª£rve
(
nThªads
);

1070 
b©ches
.
	`push_back
(
åaöögD©a
.
	`GëB©ch
());

1072 i‡(
£âögs
.
momítum
 > 0.0) {

1073 
möimizî
.
	`SãpMomítum
(
√t
, 
√ts
, 
b©ches
, 
£âögs
.
momítum
);

1075 
möimizî
.
	`Sãp
(
√t
, 
√ts
, 
b©ches
);

1079 i‡((
°ïCou¡
 % 
möimizî
.
	`GëTe°I¡îvÆ
()) == 0) {

1082 
DoubÀ_t
 
ã°Eº‹
 = 0.0;

1083 autÿ
b©ch
 : 
ã°D©a
) {

1084 autÿ
öputM©rix
 = 
b©ch
.
	`GëI≈ut
();

1085 autÿ
ouçutM©rix
 = 
b©ch
.
	`GëOuçut
();

1086 
ã°Eº‹
 +
ã°Në
.
	`Loss
(
öputM©rix
, 
ouçutM©rix
);

1088 
ã°Eº‹
 /(
DoubÀ_t
Ë(
nTe°Sam∂es
 / 
£âögs
.
b©chSize
);

1090 
íd
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

1093 
DoubÀ_t
 
åaöögEº‹
 = 0.0;

1094 autÿ
b©ch
 : 
åaöögD©a
) {

1095 autÿ
öputM©rix
 = 
b©ch
.
	`GëI≈ut
();

1096 autÿ
ouçutM©rix
 = 
b©ch
.
	`GëOuçut
();

1097 
åaöögEº‹
 +
√t
.
	`Loss
(
öputM©rix
, 
ouçutM©rix
);

1099 
åaöögEº‹
 /(
DoubÀ_t
Ë(
nTøöögSam∂es
 / 
£âögs
.
b©chSize
);

1101 i‡(
fI¡îa˘ive
){

1102 
fI¡îa˘ive
->
	`AddPoöt
(
°ïCou¡
, 
åaöögEº‹
, 
ã°Eº‹
);

1103 
fIPyCuºítIãr
 = 100*()
möimizî
.
	`GëC⁄vîgí˚Cou¡
(Ë/()
£âögs
.
c⁄vîgí˚Sãps
;

1104 i‡(
fExôFromTøöög
) ;

1108 
°d
::
chr⁄o
::
duøti⁄
<> 
ñ≠£d_£c⁄ds
 = 
íd
 - 
°¨t
;

1109 
£c⁄ds
 = 
ñ≠£d_£c⁄ds
.
	`cou¡
();

1110 
nFl›s
 = (Ë(
£âögs
.
ã°I¡îvÆ
 * 
b©chesInEpoch
);

1111 
nFl›s
 *
√t
.
	`GëNFl›s
() * 1e-9;

1113 
c⁄vîged
 = 
möimizî
.
	`HasC⁄vîged
(
ã°Eº‹
);

1114 
°¨t
 = 
°d
::
chr⁄o
::
sy°em_˛ock
::
	`now
();

1116 i‡(
fI¡îa˘ive
) {

1117 
fI¡îa˘ive
->
	`AddPoöt
(
°ïCou¡
, 
åaöögEº‹
, 
ã°Eº‹
);

1118 
fIPyCuºítIãr
 = 100.0 * 
möimizî
.
	`GëC⁄vîgí˚Cou¡
()

1119 / 
möimizî
.
	`GëC⁄vîgí˚Sãps
 ();

1120 i‡(
fExôFromTøöög
) ;

1122 
	`Log
(Ë<< 
°d
::
	`£tw
(10Ë<< 
°ïCou¡
 << " | "

1123 << 
°d
::
	`£tw
(12Ë<< 
åaöögEº‹


1124 << 
°d
::
	`£tw
(12Ë<< 
ã°Eº‹


1125 << 
°d
::
	`£tw
(12Ë<< 
nFl›s
 / 
£c⁄ds


1126 << 
°d
::
	`£tw
(12Ë<< 
möimizî
.
	`GëC⁄vîgí˚Cou¡
(Ë<< 
Endl
;

1127 i‡(
c⁄vîged
) {

1128 
	`Log
(Ë<< 
Endl
;

1135 
size_t
 
l
 = 0;Ü < 
√t
.
	`GëDïth
();Ü++) {

1136 autÿ& 
œyî
 = 
fNë
.
	`GëLayî
(
l
);

1137 
œyî
.
	`GëWeights
(Ë(
TM©rixT
<
DoubÀ_t
>Ë
√t
.
	`GëLayî
(
l
).GetWeights();

1138 
œyî
.
	`GëBü£s
(Ë(
TM©rixT
<
DoubÀ_t
>Ë
√t
.
	`GëLayî
(
l
).GetBiases();

1143 
	`Log
(Ë<< 
kFATAL
 << "Multi-core CPU backendÇotÉnabled. Please make sure "

1145 "dëe˘ed by CMakêa†wñ»th©ÅhêimàCMakêÊag i†£t." << 
Endl
;

1151 
DoubÀ_t
 
TMVA
::
MëhodDNN
::
	`GëMvaVÆue
( Double_t* , Double_t* )

1153 
size_t
 
nV¨übÀs
 = 
	`GëEvít
()->
	`GëNV¨übÀs
();

1154 
M©rix_t
 
	`X
(1, 
nV¨übÀs
);

1155 
M©rix_t
 
	`YH©
(1, 1);

1157 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
öputVÆues
 = 
	`GëEvít
()->
	`GëVÆues
();

1158 
size_t
 
i
 = 0; i < 
nV¨übÀs
; i++) {

1159 
	`X
(0,
i
Ë
öputVÆues
[i];

1162 
fNë
.
	`Pªdi˘i⁄
(
YH©
, 
X
, 
fOuçutFun˘i⁄
);

1163  
	`YH©
(0,0);

1168 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> & 
TMVA
::
MëhodDNN
::
	`GëRegªssi⁄VÆues
()

1170 
size_t
 
nV¨übÀs
 = 
	`GëEvít
()->
	`GëNV¨übÀs
();

1171 
M©rix_t
 
	`X
(1, 
nV¨übÀs
);

1173 c⁄° 
Evít
 *
ev
 = 
	`GëEvít
();

1174 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
öputVÆues
 = 
ev
->
	`GëVÆues
();

1175 
size_t
 
i
 = 0; i < 
nV¨übÀs
; i++) {

1176 
	`X
(0,
i
Ë
öputVÆues
[i];

1179 
size_t
 
nT¨gës
 = 
°d
::
	`max
(1u, 
ev
->
	`GëNT¨gës
());

1180 
M©rix_t
 
	`YH©
(1, 
nT¨gës
);

1181 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`ouçut
(
nT¨gës
);

1182 autÿ
√t
 = 
fNë
.
	`Cª©eCl⁄e
(1);

1183 
√t
.
	`Pªdi˘i⁄
(
YH©
, 
X
, 
fOuçutFun˘i⁄
);

1185 
size_t
 
i
 = 0; i < 
nT¨gës
; i++)

1186 
ouçut
[
i
] = 
	`YH©
(0, i);

1188 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
) {

1189 
fRegªssi⁄Rëu∫VÆ
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

1191 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

1193 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ev
);

1194 
size_t
 
i
 = 0; i < 
nT¨gës
; ++i) {

1195 
evT
->
	`SëT¨gë
(
i
, 
ouçut
[i]);

1198 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
(
evT
);

1199 
size_t
 
i
 = 0; i < 
nT¨gës
; ++i) {

1200 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
evT2
->
	`GëT¨gë
(
i
));

1202 
dñëe
 
evT
;

1203  *
fRegªssi⁄Rëu∫VÆ
;

1206 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> & 
TMVA
::
MëhodDNN
::
	`GëMu…i˛assVÆues
()

1208 
size_t
 
nV¨übÀs
 = 
	`GëEvít
()->
	`GëNV¨übÀs
();

1209 
M©rix_t
 
	`X
(1, 
nV¨übÀs
);

1210 
M©rix_t
 
	`YH©
(1, 
	`D©aInfo
().
	`GëNCœs£s
());

1211 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
) {

1212 
fMu…i˛assRëu∫VÆ
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>(
	`D©aInfo
().
	`GëNCœs£s
());

1215 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
öputVÆues
 = 
	`GëEvít
()->
	`GëVÆues
();

1216 
size_t
 
i
 = 0; i < 
nV¨übÀs
; i++) {

1217 
	`X
(0,
i
Ë
öputVÆues
[i];

1220 
fNë
.
	`Pªdi˘i⁄
(
YH©
, 
X
, 
fOuçutFun˘i⁄
);

1221 
size_t
 
i
 = 0; i < (size_tË
YH©
.
	`GëNcﬁs
(); i++) {

1222 (*
fMu…i˛assRëu∫VÆ
)[
i
] = 
	`YH©
(0, i);

1224  *
fMu…i˛assRëu∫VÆ
;

1229 
TMVA
::
MëhodDNN
::
	`AddWeightsXMLTo
–* 
∑ª¡
 ) const

1231 * 
¬
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
∑ª¡
, 0, "Weights");

1232 
I¡_t
 
öputWidth
 = 
fNë
.
	`GëI≈utWidth
();

1233 
I¡_t
 
dïth
 = 
fNë
.
	`GëDïth
();

1234 
lossFun˘i⁄
 = 
°©ic_ˇ°
<>(
fNë
.
	`GëLossFun˘i⁄
());

1235 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
¬
, 0, "InputWidth",

1236 
	`gToﬁs
().
	`SåögFromI¡
(
öputWidth
));

1237 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
¬
, 0, "Dïth", gToﬁs().
	`SåögFromI¡
(
dïth
));

1238 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
¬
, 0, "LossFun˘i⁄", 
	`TSåög
(
lossFun˘i⁄
));

1239 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
¬
, 0, "OutputFunction",

1240 
	`TSåög
(
°©ic_ˇ°
<>(
fOuçutFun˘i⁄
)));

1242 
I¡_t
 
i
 = 0; i < 
dïth
; i++) {

1243 c⁄°áuto& 
œyî
 = 
fNë
.
	`GëLayî
(
i
);

1244 autÿ
œyîxml
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
¬
, 0, "Layer");

1245 
a˘iv©i⁄Fun˘i⁄
 = 
°©ic_ˇ°
<>(
œyî
.
	`GëA˘iv©i⁄Fun˘i⁄
());

1246 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
œyîxml
, 0, "ActivationFunction",

1247 
TSåög
::
	`Itﬂ
(
a˘iv©i⁄Fun˘i⁄
, 10));

1248 
	`WrôeM©rixXML
(
œyîxml
, "Weights", 
œyî
.
	`GëWeights
());

1249 
	`WrôeM©rixXML
(
œyîxml
, "Bü£s", 
œyî
.
	`GëBü£s
());

1255 
TMVA
::
MëhodDNN
::
	`RódWeightsFromXML
(* 
roŸXML
)

1257 autÿ
√tXML
 = 
	`gToﬁs
().
	`GëChûd
(
roŸXML
, "Weights");

1258 i‡(!
√tXML
){

1259 
√tXML
 = 
roŸXML
;

1262 
fNë
.
	`CÀ¨
();

1263 
fNë
.
	`SëB©chSize
(1);

1265 
size_t
 
öputWidth
, 
dïth
;

1266 
	`gToﬁs
().
	`RódAâr
(
√tXML
, "I≈utWidth", 
öputWidth
);

1267 
	`gToﬁs
().
	`RódAâr
(
√tXML
, "Dïth", 
dïth
);

1268 
lossFun˘i⁄Ch¨
;

1269 
	`gToﬁs
().
	`RódAâr
(
√tXML
, "LossFun˘i⁄", 
lossFun˘i⁄Ch¨
);

1270 
ouçutFun˘i⁄Ch¨
;

1271 
	`gToﬁs
().
	`RódAâr
(
√tXML
, "OuçutFun˘i⁄", 
ouçutFun˘i⁄Ch¨
);

1273 
fNë
.
	`SëI≈utWidth
(
öputWidth
);

1274 
fNë
.
	`SëLossFun˘i⁄
(
°©ic_ˇ°
<
ELossFun˘i⁄
>(
lossFun˘i⁄Ch¨
));

1275 
fOuçutFun˘i⁄
 = 
°©ic_ˇ°
<
EOuçutFun˘i⁄
>(
ouçutFun˘i⁄Ch¨
);

1277 
size_t
 
¥eviousWidth
 = 
öputWidth
;

1278 autÿ
œyîXML
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`GëChûd
(
√tXML
, "Layer");

1279 
size_t
 
i
 = 0; i < 
dïth
; i++) {

1280 
TSåög
 
fSåög
;

1281 
EA˘iv©i⁄Fun˘i⁄
 
f
;

1284 
	`gToﬁs
().
	`RódAâr
(
œyîXML
, "A˘iv©i⁄Fun˘i⁄", 
fSåög
);

1285 
f
 = 
°©ic_ˇ°
<
EA˘iv©i⁄Fun˘i⁄
>(
fSåög
.
	`Atoi
());

1288 
size_t
 
width
;

1289 autÿ
m©rixXML
 = 
	`gToﬁs
().
	`GëChûd
(
œyîXML
, "Weights");

1290 
	`gToﬁs
().
	`RódAâr
(
m©rixXML
, "rows", 
width
);

1292 
fNë
.
	`AddLayî
(
width
, 
f
);

1293 
TM©rixT
<
DoubÀ_t
> 
	`weights
(
width
, 
¥eviousWidth
);

1294 
TM©rixT
<
DoubÀ_t
> 
	`bü£s
(
width
, 1);

1295 
	`RódM©rixXML
(
œyîXML
, "Weights", 
weights
);

1296 
	`RódM©rixXML
(
œyîXML
, "Bü£s", 
bü£s
);

1297 
fNë
.
	`GëLayî
(
i
).
	`GëWeights
(Ë
weights
;

1298 
fNë
.
	`GëLayî
(
i
).
	`GëBü£s
(Ë
bü£s
;

1300 
œyîXML
 = 
	`gToﬁs
().
	`GëNextChûd
(layerXML);

1301 
¥eviousWidth
 = 
width
;

1307 
TMVA
::
MëhodDNN
::
	`RódWeightsFromSåóm
–
°d
::
i°ªam
 & )

1313 c⁄° 
TMVA
::
R™kög
* TMVA::
MëhodDNN
::
	`Cª©eR™kög
()

1315 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Importance" );

1316 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1317 
fR™kög
->
	`AddR™k
–
	`R™k
–
	`GëI≈utLabñ
(
iv¨
), 1.0));

1319  
fR™kög
;

1324 
TMVA
::
MëhodDNN
::
	`MakeCœssS≥cific
–
°d
::
o°ªam
& ,

1325 c⁄° 
TSåög
& ) const

1331 
TMVA
::
MëhodDNN
::
	`GëHñpMesßge
() const

1337 
TSåög
 
cﬁ
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("bold");

1338 
TSåög
 
cﬁªs
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("reset");

1340 
	`Log
(Ë<< 
Endl
;

1341 
	`Log
(Ë<< 
cﬁ
 << "--- Sh‹àdes¸ùti⁄:" << 
cﬁªs
 << 
Endl
;

1342 
	`Log
(Ë<< 
Endl
;

1343 
	`Log
(Ë<< "ThêDNNÇeuø»√tw‹k i†®„edf‹w¨d" << 
Endl
;

1344 
	`Log
(Ë<< "mu…ûayîÖî˚±r⁄ im∂emíèti⁄. ThêDNN ha†®u£r-" << 
Endl
;

1345 
	`Log
(Ë<< "deföed hiddíÜayîárchôe˘uª, whîêthênumbî o‡öpuà(ouçut)" << 
Endl
;

1346 
	`Log
(Ë<< "node†i†dëîmöed byÅhêöpuàv¨übÀ†(ouçuà˛as£s, i.e., " << 
Endl
;

1347 
	`Log
(Ë<< "sig«»™d o√ background,Ñegªssi⁄ o∏mu…i˛ass). " << 
Endl
;

1348 
	`Log
(Ë<< 
Endl
;

1349 
	`Log
(Ë<< 
cﬁ
 << "--- Pîf‹m™˚ o±imißti⁄:" << 
cﬁªs
 << 
Endl
;

1350 
	`Log
(Ë<< 
Endl
;

1352 c⁄° * 
txt
 = "The DNN supports various optionsÅo improveÖerformance inÅerms ofÅraining speedánd \n \
 of overfitting: \n \
\n \
- differentÅraining settings can be stacked. SuchÅhatÅhe initialÅraining \n\
 done witháÜargeÜearningÑateándáÜarge drop out fraction whilst \n \
áÜater stageÜearningÑateánd drop out can beÑeduced. \n \
- drop out \n \
[recommended: \n \
Åraining stage: 0.0 forÅhe firstÜayer, 0.5 forÜaterÜayers. \n \
Åraining stage: 0.1 or 0.0 forállÜayers \n \
Åraining stage: 0.0] \n \
 out isáÅechnique whereáátÉachÅraining cycleá fraction ofárbitrary \n \
 is disabled. ThisÑeduces co-adaptation of weightsándÅhusÑeduces overfitting. \n \
- L1ánd L2Ñegularizationáreávailable \n \
- Minibatches \n \
[recommended 10 - 150] \n \
 mini-batch sizes can be chosen. \n \
- Multithreading \n \
[recommended: True] \n \
 can beÅurned on. The minibatchesáre distributedÅoÅheávailable \n \
. Theálgorithm isÜock-free (\"Hogwild!\"-style) forÉach cycle. \n \
\n \
: \n \
\"Layout\": \n \
-Éxample: \"TANH|(N+30)*2,TANH|(N+30),LINEAR\" \n \
- meaning: \n \
.Åwo hiddenÜayers (separated by \",\") \n \
.Åheáctivation function is TANH (other options: RELU, SOFTSIGN, LINEAR) \n \
.Åheáctivation function forÅhe outputÜayer is LINEAR \n \
.Åhe first hiddenÜayer has (N+30)*2Çodes where N isÅheÇumber of inputÇeurons \n \
.Åhe second hiddenÜayer has N+30Çodes, where N isÅheÇumber of inputÇeurons \n \
.ÅheÇumber ofÇodes inÅhe outputÜayer is determined byÅheÇumber of outputÇodes \n \
 canÅhereforeÇot be chosen freely. \n \
\n \
\"ErrorStrategy\": \n \
- SUMOFSQUARES \n \
Érror ofÅheÇeuralÇet is determined byá sum-of-squaresÉrror function \n \
Ñegression,Åhis isÅhe onlyÖossible choice. \n \
- CROSSENTROPY \n \
Érror ofÅheÇeuralÇet is determined byá crossÉntropy function. The \n \
 valuesáreáutomatically (internally)Åransformed intoÖrobabilities \n \
á sigmoid function. \n \
 signal/background classificationÅhis isÅhe default choice. \n \
 multiclass using crossÉntropy moreÅhan one orÇo output classes \n \
 beÉquallyÅrue or false (e.g. Event 0: Aánd BáreÅrue, Event 1: \n \
ánd C isÅrue, Event 2: C isÅrue, ...) \n \
- MUTUALEXCLUSIVE \n \
 multiclass settings,Éxactly one ofÅhe output classes can beÅrue (e.g.Éither A or B or C) \n \
\n \
\"WeightInitialization\" \n \
- XAVIER \n \
[recommended] \n \
\"Xavier Glorot & Yoshua Bengio\"-style of initializingÅhe weights. The weightsáre chosenÑandomly \n \
ÅhatÅhe variance ofÅhe values ofÅheÇodes isÖreserved forÉachÜayer. \n \
- XAVIERUNIFORM \n \
 sameás XAVIER, but with uniformly distributed weights instead of gaussian weights \n \
- LAYERSIZE \n \
 values scaled byÅheÜayer size \n \
\n \
\"TrainingStrategy\" \n \
-Éxample: \"LearningRate=1e-1,Momentum=0.3,ConvergenceSteps=50,BatchSize=30,TestRepetitions=7,WeightDecay=0.0,Renormalize=L2,DropConfig=0.0,DropRepetitions=5|LearningRate=1e-4,Momentum=0.3,ConvergenceSteps=50,BatchSize=20,TestRepetitions=7,WeightDecay=0.001,Renormalize=L2,DropFraction=0.0,DropRepetitions=5\" \n \
-Éxplanation:Åwo stackedÅraining settings separated by \"|\" \n \
. firstÅraining setting: \"LearningRate=1e-1,Momentum=0.3,ConvergenceSteps=50,BatchSize=30,TestRepetitions=7,WeightDecay=0.0,Renormalize=L2,DropConfig=0.0,DropRepetitions=5\" \n \
. secondÅraining setting : \"LearningRate=1e-4,Momentum=0.3,ConvergenceSteps=50,BatchSize=20,TestRepetitions=7,WeightDecay=0.001,Renormalize=L2,DropFractions=0.0,DropRepetitions=5\" \n \
. LearningRate : \n \
-Ñecommended for classification: 0.1 initially, 1e-4Üater \n \
-Ñecommended forÑegression: 1e-4ándÜess \n \
. Momentum : \n \
á fraction ofÅhe momentum forÅheÇextÅraining batch [fraction = 0.0 - 1.0] \n \
. Repetitions : \n \
 \"Repetitions\"Ñepetitions withÅhe same minibatch before switchingÅoÅheÇext one \n \
. ConvergenceSteps : \n \
Åhat convergence isÑeachedáfter \"ConvergenceSteps\" cycles whereÇo improvement \n \
ÅheÉrror onÅheÅest samples has been found. (MindÅhat onlyátÉach \"TestRepetitions\" \n \
ÅheÅest samplesáreÉvaluatedándÅhusÅhe convergence is checked) \n \
. BatchSize \n \
 ofÅhe mini-batches. \n \
. TestRepetitions \n \
ÅestingÅheÇeuralÇet onÅheÅest samplesÉach \"TestRepetitions\" cycle \n \
. WeightDecay \n \
 \"Renormalize\" is setÅo L1 or L2, \"WeightDecay\"ÖrovidesÅheÑenormalization factor \n \
. Renormalize \n \
, L1 (|w|) or L2 (w^2) \n \
. DropConfig \n \
á fraction ofárbitraryÇodes ofÉach ofÅheÜayersáccordingÅoÅhe values given \n \
Åhe DropConfig. \n \
[example: DropConfig=0.0+0.5+0.3 \n \
: dropÇoÇodes inÜayer 0 (inputÜayer), half ofÅheÇodes inÜayer 1ánd 30% ofÅheÇodes \n \
Üayer 2 \n \
:ÜeaveállÅheÇodesÅurned on forÅhe inputÜayer (layer 0) \n \
 off half ofÅheÇodes inÜaterÜayers forÅhe initialÅraining;ÜeaveállÇodes \n \
 on (0.0) inÜaterÅraining stages] \n \
. DropRepetitions \n \
 \"DropRepetitions\" cycleÅhe configuration of whichÇodesáre dropped is changed \n \
[recommended : 1] \n \
. Multithreading \n \
 on multithreading [recommended: True] \n \
\n";

1450 
	`Log
 (Ë<< 
txt
 << 
Endl
;

1453 
	}
}

	@src/MethodDT.cxx

91 
	~"TMVA/MëhodDT.h
"

93 
	~"TMVA/Bö¨ySórchTªe.h
"

94 
	~"TMVA/CCPru√r.h
"

95 
	~"TMVA/CœssifõrFa˘‹y.h
"

96 
	~"TMVA/C⁄figuøbÀ.h
"

97 
	~"TMVA/CrossE¡r›y.h
"

98 
	~"TMVA/D©aSë.h
"

99 
	~"TMVA/Decisi⁄Tªe.h
"

100 
	~"TMVA/GöiIndex.h
"

101 
	~"TMVA/IMëhod.h
"

102 
	~"TMVA/MëhodBa£.h
"

103 
	~"TMVA/MëhodBoo°.h
"

104 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

105 
	~"TMVA/MsgLoggî.h
"

106 
	~"TMVA/R™kög.h
"

107 
	~"TMVA/SdivSqπS∂usB.h
"

108 
	~"TMVA/Sï¨©i⁄Ba£.h
"

109 
	~"TMVA/Timî.h
"

110 
	~"TMVA/Toﬁs.h
"

111 
	~"TMVA/Ty≥s.h
"

113 
	~"Rio°ªam.h
"

114 
	~"TR™dom3.h
"

115 
	~"TM©h.h
"

116 
	~"TObjSåög.h
"

118 
	~<Æg‹ôhm
>

120 
usög
 
	g°d
::
ve˘‹
;

122 
	$REGISTER_METHOD
(
DT
)

124 
	`CœssImp
(
TMVA
::
MëhodDT
);

129 
TMVA
::
MëhodDT
::
	$MëhodDT
–c⁄° 
TSåög
& 
jobName
,

130 c⁄° 
TSåög
& 
mëhodTôÀ
,

131 
D©aSëInfo
& 
theD©a
,

132 c⁄° 
TSåög
& 
theO±i⁄
) :

133 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kDT
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

134 , 
	`fTªe
(0)

135 , 
	`fSïTy≥
(0)

136 , 
	`fMöNodeEvíts
(0)

137 , 
	`fMöNodeSize
(0)

138 , 
	`fNCuts
(0)

139 , 
	`fU£YesNoLóf
(
kFALSE
)

140 , 
	`fNodePurôyLimô
(0)

141 , 
	`fMaxDïth
(0)

142 , 
	`fEº‹Fø˘i⁄
(0)

143 , 
	`fPru√Såígth
(0)

144 , 
	`fPru√Mëhod
(
Decisi⁄Tªe
::
kNoPrunög
)

145 , 
	`fAutom©ic
(
kFALSE
)

146 , 
	`fR™domi£dTªes
(
kFALSE
)

147 , 
	`fU£Nv¨s
(0)

148 , 
	`fU£Poiss⁄Nv¨s
(0)

149 , 
	$fDñèPru√Såígth
(0)

151 
fPru√Bef‹eBoo°
 = 
kFALSE
;

152 
	}
}

157 
	gTMVA
::
MëhodDT
::
	$MëhodDT
–
D©aSëInfo
& 
dsi
,

158 c⁄° 
TSåög
& 
theWeightFûe
) :

159 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kDT
, 
dsi
, 
theWeightFûe
)

160 , 
	`fTªe
(0)

161 , 
	`fSïTy≥
(0)

162 , 
	`fMöNodeEvíts
(0)

163 , 
	`fMöNodeSize
(0)

164 , 
	`fNCuts
(0)

165 , 
	`fU£YesNoLóf
(
kFALSE
)

166 , 
	`fNodePurôyLimô
(0)

167 , 
	`fMaxDïth
(0)

168 , 
	`fEº‹Fø˘i⁄
(0)

169 , 
	`fPru√Såígth
(0)

170 , 
	`fPru√Mëhod
(
Decisi⁄Tªe
::
kNoPrunög
)

171 , 
	`fAutom©ic
(
kFALSE
)

172 , 
	`fR™domi£dTªes
(
kFALSE
)

173 , 
	`fU£Nv¨s
(0)

174 , 
	$fDñèPru√Såígth
(0)

176 
fPru√Bef‹eBoo°
 = 
kFALSE
;

177 
	}
}

182 
Boﬁ_t
 
	gTMVA
::
MëhodDT
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

184 if–
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2 )  
kTRUE
;

185  
kFALSE
;

186 
	}
}

214 
	gTMVA
::
MëhodDT
::
	$De˛¨eO±i⁄s
()

216 
	`De˛¨eO±i⁄Ref
(
fR™domi£dTªes
,"UseRandomisedTrees","ChooseátÉachÇode splittingáÑandom set of variablesánd *bagging*");

217 
	`De˛¨eO±i⁄Ref
(
fU£Nv¨s
,"UseNvars","Number of variables used ifÑandomised Tree option is chosen");

218 
	`De˛¨eO±i⁄Ref
(
fU£Poiss⁄Nv¨s
,"UsePoissonNvars", "Interpret \"UseNvars\"Çotás fixedÇumber butás mean ofá Poisson distribution inÉach split with RandomisedTree option");

219 
	`De˛¨eO±i⁄Ref
(
fU£YesNoLóf
=
kTRUE
, "UseYesNoLeaf",

221 
	`De˛¨eO±i⁄Ref
(
fNodePurôyLimô
=0.5, "NodePurityLimit", "In boosting/pruning,Çodes withÖurity > NodePurityLimitáre signal; background otherwise.");

222 
	`De˛¨eO±i⁄Ref
(
fSïTy≥S
="GiniIndex", "SeparationType", "Separation criterion forÇode splitting");

223 
	`AddPªDefVÆ
(
	`TSåög
("MisClassificationError"));

224 
	`AddPªDefVÆ
(
	`TSåög
("GiniIndex"));

225 
	`AddPªDefVÆ
(
	`TSåög
("CrossEntropy"));

226 
	`AddPªDefVÆ
(
	`TSåög
("SDivSqrtSPlusB"));

227 
	`De˛¨eO±i⁄Ref
(
fMöNodeEvíts
=-1, "nEventsMin", "deprecated !!! MinimumÇumber ofÉventsÑequired ináÜeafÇode");

228 
	`De˛¨eO±i⁄Ref
(
fMöNodeSizeS
, "MinNodeSize", "MinimumÖercentage ofÅrainingÉventsÑequired ináÜeafÇode (default: Classification: 10%, Regression: 1%)");

229 
	`De˛¨eO±i⁄Ref
(
fNCuts
, "nCuts", "Number of steps duringÇode cut optimisation");

230 
	`De˛¨eO±i⁄Ref
(
fPru√Såígth
, "PruneStrength", "Pruning strength (negative value ==áutomaticádjustment)");

231 
	`De˛¨eO±i⁄Ref
(
fPru√MëhodS
="NoPruning", "PruneMethod", "Pruning method: NoPruning (switched off), ExpectedError or CostComplexity");

233 
	`AddPªDefVÆ
(
	`TSåög
("NoPruning"));

234 
	`AddPªDefVÆ
(
	`TSåög
("ExpectedError"));

235 
	`AddPªDefVÆ
(
	`TSåög
("CostComplexity"));

237 i‡(
	`DoRegªssi⁄
()) {

238 
	`De˛¨eO±i⁄Ref
(
fMaxDïth
=50,"MaxDepth","Max depth ofÅhe decisionÅreeállowed");

240 
	`De˛¨eO±i⁄Ref
(
fMaxDïth
=3,"MaxDepth","Max depth ofÅhe decisionÅreeállowed");

242 
	}
}

247 
	gTMVA
::
MëhodDT
::
	$De˛¨eCom∑tibûôyO±i⁄s
() {

249 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

251 
	`De˛¨eO±i⁄Ref
(
fPru√Bef‹eBoo°
=
kFALSE
, "PruneBeforeBoost",

253 
	}
}

258 
	gTMVA
::
MëhodDT
::
	$Pro˚ssO±i⁄s
()

260 
fSïTy≥S
.
	`ToLowî
();

261 i‡(
fSïTy≥S
 ="mis˛assifiˇti⁄îr‹"Ë
fSïTy≥
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

262 i‡(
fSïTy≥S
 ="göiödex"Ë
fSïTy≥
 = 
√w
 
	`GöiIndex
();

263 i‡(
fSïTy≥S
 ="¸os£¡r›y"Ë
fSïTy≥
 = 
√w
 
	`CrossE¡r›y
();

264 i‡(
fSïTy≥S
 ="sdivsqπ•lusb"Ë
fSïTy≥
 = 
√w
 
	`SdivSqπS∂usB
();

266 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

267 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿Sï¨©i⁄ Index o±i⁄ cÆÀd" << 
Endl
;

272 
fPru√MëhodS
.
	`ToLowî
();

273 i‡(
fPru√MëhodS
 ="ex≥˘edîr‹" ) 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kEx≥˘edEº‹Prunög
;

274 i‡(
fPru√MëhodS
 ="co°com∂exôy" ) 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
;

275 i‡(
fPru√MëhodS
 ="n›runög" ) 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

277 
	`Log
(Ë<< 
kINFO
 << 
	`GëO±i⁄s
(Ë<< 
Endl
;

278 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> unknow¿Pru√Mëhod o±i⁄:" << 
fPru√MëhodS
 <<" cÆÀd" << 
Endl
;

281 i‡(
fPru√Såígth
 < 0Ë
fAutom©ic
 = 
kTRUE
;

282 
fAutom©ic
 = 
kFALSE
;

283 i‡(
fAutom©ic
 && 
fPru√Mëhod
==!
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
){

284 
	`Log
(Ë<< 
kFATAL


285 << "S‹ryáutom©i¯¥unög såígth dëîmö©i⁄ i†nŸ im∂emíãd yë f‹ Ex≥˘edEº‹Prunög" << 
Endl
;

289 i‡(
this
->
	`D©a
()->
	`HasNeg©iveEvítWeights
()){

290 
	`Log
(Ë<< 
kINFO
 << " Youáre usingá Monte CarloÅhat hasálsoÇegative weights. "

294 <<
fMöNodeSizeS


299 << "which ign‹e†evít†wôhÇeg©ivêweighàöÅhêåaöög. " << 
Endl


300 << 
Endl
 << "Note: You'll getá WARNING message duringÅheÅraining ifÅhat shouldÉver happen" << Endl;

303 i‡(
fR™domi£dTªes
){

304 
	`Log
(Ë<< 
kINFO
 << " R™domi£dÅªe†should u£ *baggög*á†*boo°* mëhod. Did you sëÅhi†öÅhê*MëhodBoo°* ? . HîêI c™Énf‹˚ o∆yÅhê*nÿ¥unög*" << 
Endl
;

305 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

309 i‡(
fMöNodeEvíts
 > 0){

310 
fMöNodeSize
 = 
fMöNodeEvíts
 / 
	`D©a
()->
	`GëNTøöögEvíts
() * 100;

311 
	`Log
(Ë<< 
kWARNING
 << "You haveÉxplicitly set *nEventsMin*,Åhe minábsoluteÇumber \n"

315 << "nEvítsMö="<<
fMöNodeEvíts
<< "--> MöNodeSize="<<
fMöNodeSize
<<"%"

316 << 
Endl
;

318 
	`SëMöNodeSize
(
fMöNodeSizeS
);

320 
	}
}

322 
	gTMVA
::
MëhodDT
::
	$SëMöNodeSize
(
DoubÀ_t
 
sizeInPî˚¡
){

323 i‡(
sizeInPî˚¡
 > 0 && sizeInPercent < 50){

324 
fMöNodeSize
=
sizeInPî˚¡
;

327 
	`Log
(Ë<< 
kERROR
 << "you have demandedá minimalÇode size of "

328 << 
sizeInPî˚¡
 << "% ofÅheÅrainingÉvents.. \n"

329 << "Åh© somehow d€†nŸ makê£n£ "<<
Endl
;

332 
	}
}

333 
	gTMVA
::
MëhodDT
::
	$SëMöNodeSize
(
TSåög
 
sizeInPî˚¡
){

334 
sizeInPî˚¡
.
	`Rïœ˚AŒ
("%","");

335 i‡(
sizeInPî˚¡
.
	`IsA um
()Ë
	`SëMöNodeSize
(sizeInPî˚¡.
	`Atof
());

337 
	`Log
(Ë<< 
kERROR
 << "I hadÖroblemsÑeadingÅhe option MinNodeEvents, which\n"

338 << "a·îÑemovögáÖossibÀ % sig¿nowÑód†" << 
sizeInPî˚¡
 << 
Endl
;

340 
	}
}

345 
	gTMVA
::
MëhodDT
::
	$Inô
( )

347 
fMöNodeEvíts
 = -1;

348 
fMöNodeSize
 = 5;

349 
fMöNodeSizeS
 = "5%";

350 
fNCuts
 = 20;

351 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

352 
fPru√Såígth
 = 5;

353 
fDñèPru√Såígth
=0.1;

354 
fR™domi£dTªes

kFALSE
;

355 
fU£Nv¨s
 = 
	`GëNv¨
();

356 
fU£Poiss⁄Nv¨s
 = 
kTRUE
;

359 
	`SëSig«lRe„ªn˚Cut
( 0 );

360 i‡(
fA«lysisTy≥
 =
Ty≥s
::
kCœssifiˇti⁄
 || fA«lysisTy≥ =Ty≥s::
kMu…i˛ass
 ) {

361 
fMaxDïth
 = 3;

363 
fMaxDïth
 = 50;

365 
	}
}

370 
	gTMVA
::
MëhodDT
::~
	$MëhodDT
( )

372 
dñëe
 
fTªe
;

373 
	}
}

377 
	gTMVA
::
MëhodDT
::
	$Tøö
( )

379 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
åue
;

380 
fTªe
 = 
√w
 
	`Decisi⁄Tªe
–
fSïTy≥
, 
fMöNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 0,

381 
fR™domi£dTªes
, 
fU£Nv¨s
, 
fU£Poiss⁄Nv¨s
,
fMaxDïth
,0 );

382 
fTªe
->
	`SëNV¨s
(
	`GëNv¨
());

383 i‡(
fR™domi£dTªes
Ë
	`Log
()<<
kWARNING
<<"Ñandomised Trees doÇot work yet inÅhis framework,"

385 << " wû»bêÆ»thêßmê™dÅh© i†nŸ good " << 
Endl
;

386 
fTªe
->
	`SëA«lysisTy≥
–
	`GëA«lysisTy≥
() );

389 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

390 
UI¡_t
 
√víts
 = 
	`D©a
()->
	`GëNTøöögEvíts
();

391 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
tmp
;

392 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

393 c⁄° 
Evít
 *
evít
 = 
	`GëEvít
(
õvt
);

394 
tmp
.
	`push_back
(
evít
);

396 
fTªe
->
	`BuûdTªe
(
tmp
);

397 i‡(
fPru√Mëhod
 !
Decisi⁄Tªe
::
kNoPrunög
Ë
fTªe
->
	`Pru√Tªe
();

399 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
Ál£
;

400 
	`ExôFromTøöög
();

401 
	}
}

408 
DoubÀ_t
 
	gTMVA
::
MëhodDT
::
	$Pru√Tªe
( )

413 i‡(
fAutom©ic
 && 
fPru√Mëhod
 =
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
) {

414 
CCPru√r
* 
¥u√Toﬁ
 = 
√w
 
	`CCPru√r
(
fTªe
, 
this
->
	`D©a
(Ë, 
fSïTy≥
);

415 
¥u√Toﬁ
->
	`O±imize
();

416 
°d
::
ve˘‹
<
Decisi⁄TªeNode
*> 
nodes
 = 
¥u√Toﬁ
->
	`GëO±imÆPru√Sequí˚
();

417 
fPru√Såígth
 = 
¥u√Toﬁ
->
	`GëO±imÆPru√Såígth
();

418 
UI¡_t
 
i
 = 0; i < 
nodes
.
	`size
(); i++)

419 
fTªe
->
	`Pru√Node
(
nodes
[
i
]);

420 
dñëe
 
¥u√Toﬁ
;

422 i‡(
fAutom©ic
 && 
fPru√Mëhod
 !
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
){

499 
fTªe
->
	`SëPru√Såígth
(
fPru√Såígth
);

500 
fTªe
->
	`Pru√Tªe
();

503  
fPru√Såígth
;

504 
	}
}

508 
DoubÀ_t
 
	gTMVA
::
MëhodDT
::
	$Te°TªeQuÆôy
–
Decisi⁄Tªe
 *
dt
 )

510 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kVÆid©i⁄
);

512 
DoubÀ_t
 
SumC‹ª˘
=0,
SumWr⁄g
=0;

513 
L⁄g64_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++)

515 c⁄° 
Evít
 * 
ev
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

516 i‡((
dt
->
	`CheckEvít
(
ev
Ë> dt->
	`GëNodePurôyLimô
(ËË=
	`D©aInfo
().
	`IsSig«l
”v)Ë
SumC‹ª˘
+Ûv->
	`GëWeight
();

517 
SumWr⁄g
+=
ev
->
	`GëWeight
();

519 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

520  
SumC‹ª˘
 / (SumC‹ª˘ + 
SumWr⁄g
);

521 
	}
}

525 
	gTMVA
::
MëhodDT
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

527 
fTªe
->
	`AddXMLTo
(
∑ª¡
);

529 
	}
}

533 
	gTMVA
::
MëhodDT
::
	$RódWeightsFromXML
–* 
wghäode
)

535 if(
fTªe
)

536 
dñëe
 
fTªe
;

537 
fTªe
 = 
√w
 
	`Decisi⁄Tªe
();

538 
fTªe
->
	`RódXML
(
wghäode
,
	`GëTøöögTMVAVîsi⁄Code
());

539 
	}
}

543 
	gTMVA
::
MëhodDT
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

545 
dñëe
 
fTªe
;

546 
fTªe
 = 
√w
 
	`Decisi⁄Tªe
();

547 
fTªe
->
	`Ród
(
i°r
);

548 
	}
}

553 
DoubÀ_t
 
	gTMVA
::
MëhodDT
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

556 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

558  
fTªe
->
	`CheckEvít
(
	`GëEvít
(),
fU£YesNoLóf
);

559 
	}
}

563 
	gTMVA
::
MëhodDT
::
	$GëHñpMesßge
() const

565 
	}
}

568 c⁄° 
TMVA
::
R™kög
* TMVA::
MëhodDT
::
	$Cª©eR™kög
()

571 
	}
}

	@src/MethodFDA.cxx

43 
	~"TMVA/MëhodFDA.h
"

45 
	~"TMVA/CœssifõrFa˘‹y.h
"

46 
	~"TMVA/C⁄fig.h
"

47 
	~"TMVA/C⁄figuøbÀ.h
"

48 
	~"TMVA/D©aSëInfo.h
"

49 
	~"TMVA/FôãrBa£.h
"

50 
	~"TMVA/GíëicFôãr.h
"

51 
	~"TMVA/I¡îvÆ.h
"

52 
	~"TMVA/IFôãrT¨gë.h
"

53 
	~"TMVA/IMëhod.h
"

54 
	~"TMVA/MCFôãr.h
"

55 
	~"TMVA/MëhodBa£.h
"

56 
	~"TMVA/MöuôFôãr.h
"

57 
	~"TMVA/MsgLoggî.h
"

58 
	~"TMVA/Timî.h
"

59 
	~"TMVA/Toﬁs.h
"

60 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

61 
	~"TMVA/Ty≥s.h
"

62 
	~"TMVA/SimuœãdA¬ólögFôãr.h
"

64 
	~"Rio°ªam.h
"

65 
	~"TLi°.h
"

66 
	~"TF‹muœ.h
"

67 
	~"TSåög.h
"

68 
	~"TObjSåög.h
"

69 
	~"TR™dom3.h
"

70 
	~"TM©h.h
"

72 
	~<Æg‹ôhm
>

73 
	~<ôî©‹
>

74 
	~<°dex˚±
>

75 
	~<s°ªam
>

77 
usög
 
	g°d
::
°rög°ªam
;

79 
	$REGISTER_METHOD
(
FDA
)

81 
	`CœssImp
(
TMVA
::
MëhodFDA
);

86 
TMVA
::
MëhodFDA
::
	$MëhodFDA
–c⁄° 
TSåög
& 
jobName
,

87 c⁄° 
TSåög
& 
mëhodTôÀ
,

88 
D©aSëInfo
& 
theD©a
,

89 c⁄° 
TSåög
& 
theO±i⁄
)

90 : 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kFDA
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

91 
	`IFôãrT¨gë
 (),

92 
	`fF‹muœ
 ( 0 ),

93 
	`fNP¨s
 ( 0 ),

94 
	`fFôãr
 ( 0 ),

95 
	`fC⁄vîgîFôãr
( 0 ),

96 
	`fSumOfWeightsSig
( 0 ),

97 
	`fSumOfWeightsBkg
( 0 ),

98 
	`fSumOfWeights
 ( 0 ),

99 
	$fOuçutDimísi⁄s
( 0 )

101 
	}
}

106 
	gTMVA
::
MëhodFDA
::
	$MëhodFDA
–
D©aSëInfo
& 
theD©a
,

107 c⁄° 
TSåög
& 
theWeightFûe
)

108 : 
	`MëhodBa£
–
Ty≥s
::
kFDA
, 
theD©a
, 
theWeightFûe
),

109 
	`IFôãrT¨gë
 (),

110 
	`fF‹muœ
 ( 0 ),

111 
	`fNP¨s
 ( 0 ),

112 
	`fFôãr
 ( 0 ),

113 
	`fC⁄vîgîFôãr
( 0 ),

114 
	`fSumOfWeightsSig
( 0 ),

115 
	`fSumOfWeightsBkg
( 0 ),

116 
	`fSumOfWeights
 ( 0 ),

117 
	$fOuçutDimísi⁄s
( 0 )

119 
	}
}

124 
	gTMVA
::
MëhodFDA
::
	$Inô
( )

126 
fNP¨s
 = 0;

128 
fBe°P¨s
.
	`˛ór
();

130 
fSumOfWeights
 = 0;

131 
fSumOfWeightsSig
 = 0;

132 
fSumOfWeightsBkg
 = 0;

134 
fF‹muœSåögP
 = "";

135 
fP¨R™geSåögP
 = "";

136 
fF‹muœSåögT
 = "";

137 
fP¨R™geSåögT
 = "";

139 
fFôMëhod
 = "";

140 
fC⁄vîgî
 = "";

142 if–
	`DoMu…i˛ass
() )

143 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
ËfMu…i˛assRëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

145 
	}
}

163 
	gTMVA
::
MëhodFDA
::
	$De˛¨eO±i⁄s
()

165 
	`De˛¨eO±i⁄Ref
–
fF‹muœSåögP
 = "(0)", "Formula", "The discrimination formula" );

166 
	`De˛¨eO±i⁄Ref
–
fP¨R™geSåögP
 = "()", "ParRanges", "ParameterÑanges" );

169 
	`De˛¨eO±i⁄Ref
–
fFôMëhod
 = "MINUIT", "FitMethod", "Optimisation Method");

170 
	`AddPªDefVÆ
(
	`TSåög
("MC"));

171 
	`AddPªDefVÆ
(
	`TSåög
("GA"));

172 
	`AddPªDefVÆ
(
	`TSåög
("SA"));

173 
	`AddPªDefVÆ
(
	`TSåög
("MINUIT"));

175 
	`De˛¨eO±i⁄Ref
–
fC⁄vîgî
 = "None", "Converger", "FitMethod uses ConvergerÅo improveÑesult");

176 
	`AddPªDefVÆ
(
	`TSåög
("None"));

177 
	`AddPªDefVÆ
(
	`TSåög
("MINUIT"));

178 
	}
}

183 
	gTMVA
::
MëhodFDA
::
	$Cª©eF‹muœ
()

186 
fF‹muœSåögT
 = 
fF‹muœSåögP
;

191 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; ipar++) {

192 
fF‹muœSåögT
.
	`Rïœ˚AŒ
–
	`F‹m
("(%i)",
ù¨
), Form("[%i]",ipar) );

196 
I¡_t
 
ù¨
=
fNP¨s
; ipar<1000; ipar++) {

197 i‡(
fF‹muœSåögT
.
	`C⁄èös
–
	`F‹m
("(%i)",
ù¨
) ))

198 
	`Log
(Ë<< 
kFATAL


199 << "<Cª©eF‹muœ> F‹muœ c⁄èö†ex¥essi⁄: \"" << 
	`F‹m
("(%i)",
ù¨
) << "\", "

203 << 
Endl
;

207 
I¡_t
 
iv¨
=
	`GëNv¨
()-1; ivar >= 0; ivar--) {

208 
fF‹muœSåögT
.
	`Rïœ˚AŒ
–
	`F‹m
("x%i",
iv¨
), F‹m("[%i]",iv¨+
fNP¨s
) );

212 
UI¡_t
 
iv¨
=
	`GëNv¨
(); ivar<1000; ivar++) {

213 i‡(
fF‹muœSåögT
.
	`C⁄èös
–
	`F‹m
("x%i",
iv¨
) ))

214 
	`Log
(Ë<< 
kFATAL


215 << "<Cª©eF‹muœ> F‹muœ c⁄èö†ex¥essi⁄: \"" << 
	`F‹m
("x%i",
iv¨
) << "\", "

216 << "which c™nŸ bê©åibuãdÅÿ™ i≈uàv¨übÀ" << 
Endl
;

219 
	`Log
(Ë<< "U£r-deföed f‹muœ såög : \"" << 
fF‹muœSåögP
 << "\"" << 
Endl
;

220 
	`Log
(Ë<< "TF‹muœ-com∑tibÀ f‹muœ såög: \"" << 
fF‹muœSåögT
 << "\"" << 
Endl
;

221 
	`Log
(Ë<< 
kDEBUG
 << "Cª©ögánd compûög f‹muœ" << 
Endl
;

224 i‡(
fF‹muœ
Ë
dñëe
 fFormula;

225 
fF‹muœ
 = 
√w
 
	`TF‹muœ
–"FDA_F‹muœ", 
fF‹muœSåögT
 );

228 i‡(!
fF‹muœ
->
	`IsVÆid
())

229 
	`Log
(Ë<< 
kFATAL
 << "<Pro˚ssO±i⁄s> F‹muœÉx¥essi⁄ couldÇŸ bê¥›îly compûed" << 
Endl
;

232 i‡(
fF‹muœ
->
	`GëN∑r
(Ë> (
I¡_t
)(
fNP¨s
 + 
	`GëNv¨
()))

233 
	`Log
(Ë<< 
kFATAL
 << "<ProcessOptions> DubiousÇumber ofÖarameters in formulaÉxpression: "

234 << 
fF‹muœ
->
	`GëN∑r
(Ë<< " - com∑ªdÅÿmaximumáŒowed: " << 
fNP¨s
 + 
	`GëNv¨
(Ë<< 
Endl
;

235 
	}
}

240 
	gTMVA
::
MëhodFDA
::
	$Pro˚ssO±i⁄s
()

243 
fP¨R™geSåögT
 = 
fP¨R™geSåögP
;

246 
fP¨R™geSåögT
.
	`Rïœ˚AŒ
( " ", "" );

247 
fNP¨s
 = 
fP¨R™geSåögT
.
	`Cou¡Ch¨
( ')' );

249 
TLi°
* 
∑rLi°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
fP¨R™geSåögT
, ";" );

250 i‡((
UI¡_t
)
∑rLi°
->
	`GëSize
(Ë!
fNP¨s
) {

251 
	`Log
(Ë<< 
kFATAL
 << "<ProcessOptions> Mismatch inÖarameter string: "

252 << "thênumbî o‡∑ømëîs: " << 
fNP¨s
 << " !=Ñanges defined: "

253 << 
∑rLi°
->
	`GëSize
() << ";Åhe format ofÅhe \"ParRanges\" string "

257 << 
Endl
;

260 
fP¨R™ge
.
	`ªsize
–
fNP¨s
 );

261 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; i∑r++Ë
fP¨R™ge
[ipar] = 0;

263 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; ipar++) {

265 
TSåög
 
°r
 = ((
TObjSåög
*)
∑rLi°
->
	`At
(
ù¨
))->
	`GëSåög
();

266 
Ssiz_t
 
i°r
 = 
°r
.
	`Fú°
( ',' );

267 
TSåög
 
	`pmöS
(
	`°r
(1,
i°r
-1));

268 
TSåög
 
	`pmaxS
(
	`°r
(
i°r
+1,
°r
.
	`Lígth
()-2-istr));

270 
°rög°ªam
 
°mö
; 
Flﬂt_t
 
pmö
=0; stmö << 
pmöS
.
	`D©a
(); stmin >>Ömin;

271 
°rög°ªam
 
°max
; 
Flﬂt_t
 
pmax
=0; stmax << 
pmaxS
.
	`D©a
(); stmax >>Ömax;

274 i‡(
TM©h
::
	`Abs
(
pmax
-
pmö
) < 1.e-30)Ömax =Ömin;

275 i‡(
pmö
 > 
pmax
Ë
	`Log
(Ë<< 
kFATAL
 << "<ProcessOptions> max > min in interval forÖarameter: ["

276 << 
ù¨
 << "] : [" << 
pmö
 << ", " << 
pmax
 << "] " << 
Endl
;

278 
	`Log
(Ë<< 
kINFO
 << "Cª©ê∑ømëî i¡îvÆ f‹Ö¨amëî " << 
ù¨
 << " : [" << 
pmö
 << "," << 
pmax
 << "]" << 
Endl
;

279 
fP¨R™ge
[
ù¨
] = 
√w
 
	`I¡îvÆ
–
pmö
, 
pmax
 );

281 
dñëe
 
∑rLi°
;

284 
	`Cª©eF‹muœ
();

288 
fOuçutDimísi⁄s
 = 1;

289 if–
	`DoRegªssi⁄
() )

290 
fOuçutDimísi⁄s
 = 
	`D©aInfo
().
	`GëNT¨gës
();

291 if–
	`DoMu…i˛ass
() )

292 
fOuçutDimísi⁄s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

294  
I¡_t
 
dim
 = 1; dim < 
fOuçutDimísi⁄s
; ++dim ){

295  
UI¡_t
 
∑r
 = 0;Ö¨ < 
fNP¨s
; ++par ){

296 
fP¨R™ge
.
	`push_back
–fP¨R™ge.
	`©
(
∑r
) );

302 
fC⁄vîgîFôãr
 = (
IFôãrT¨gë
*)
this
;

303 i‡(
fC⁄vîgî
 == "MINUIT") {

304 
fC⁄vîgîFôãr
 = 
√w
 
	`MöuôFôãr
–*
this
, 
	`F‹m
("%s_C⁄vîgî_Möuô", 
	`GëName
()), 
fP¨R™ge
, 
	`GëO±i⁄s
() );

305 
	`SëO±i⁄s
(
dy«mic_ˇ°
<
C⁄figuøbÀ
*>(
fC⁄vîgîFôãr
)->
	`GëO±i⁄s
());

308 if(
fFôMëhod
 == "MC")

309 
fFôãr
 = 
√w
 
	`MCFôãr
–*
fC⁄vîgîFôãr
, 
	`F‹m
("%s_Fôãr_MC", 
	`GëName
()), 
fP¨R™ge
, 
	`GëO±i⁄s
() );

310 i‡(
fFôMëhod
 == "GA")

311 
fFôãr
 = 
√w
 
	`GíëicFôãr
–*
fC⁄vîgîFôãr
, 
	`F‹m
("%s_Fôãr_GA", 
	`GëName
()), 
fP¨R™ge
, 
	`GëO±i⁄s
() );

312 i‡(
fFôMëhod
 == "SA")

313 
fFôãr
 = 
√w
 
	`SimuœãdA¬ólögFôãr
–*
fC⁄vîgîFôãr
, 
	`F‹m
("%s_Fôãr_SA", 
	`GëName
()), 
fP¨R™ge
, 
	`GëO±i⁄s
() );

314 i‡(
fFôMëhod
 == "MINUIT")

315 
fFôãr
 = 
√w
 
	`MöuôFôãr
–*
fC⁄vîgîFôãr
, 
	`F‹m
("%s_Fôãr_Möuô", 
	`GëName
()), 
fP¨R™ge
, 
	`GëO±i⁄s
() );

317 
	`Log
(Ë<< 
kFATAL
 << "<Tøö> DÿnŸ undî°™d fô mëhod:" << 
fFôMëhod
 << 
Endl
;

320 
fFôãr
->
	`CheckF‹Unu£dO±i⁄s
();

321 
	}
}

326 
	gTMVA
::
MëhodFDA
::~
	$MëhodFDA
( )

328 
	`CÀ¨AŒ
();

329 
	}
}

334 
Boﬁ_t
 
	gTMVA
::
MëhodFDA
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

336 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

337 i‡(
ty≥
 =
Ty≥s
::
kMu…i˛ass
 )  
kTRUE
;

338 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
 )  
kTRUE
;

339  
kFALSE
;

340 
	}
}

346 
	gTMVA
::
MëhodFDA
::
	$CÀ¨AŒ
( )

351 
UI¡_t
 
ù¨
=0; i∑r<
fP¨R™ge
.
	`size
(Ë&& i∑r<
fNP¨s
; ipar++) {

352 i‡(
fP¨R™ge
[
ù¨
] !0Ë{ 
dñëe
 fParRange[ipar]; fParRange[ipar] = 0; }

354 
fP¨R™ge
.
	`˛ór
();

356 i‡(
fF‹muœ
 !0Ë{ 
dñëe
 fFormula; fFormula = 0; }

357 
fBe°P¨s
.
	`˛ór
();

358 
	}
}

363 
	gTMVA
::
MëhodFDA
::
	$Tøö
( )

366 
fSumOfWeights
 = 0;

367 
fSumOfWeightsSig
 = 0;

368 
fSumOfWeightsBkg
 = 0;

370 
UI¡_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

373 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

376 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

378 i‡(!
	`DoRegªssi⁄
()) {

379 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë{ 
fSumOfWeightsSig
 +
w
; }

380 { 
fSumOfWeightsBkg
 +
w
; }

382 
fSumOfWeights
 +
w
;

386 i‡(!
	`DoRegªssi⁄
()) {

387 i‡(
fSumOfWeightsSig
 <0 || 
fSumOfWeightsBkg
 <= 0) {

388 
	`Log
(Ë<< 
kFATAL
 << "<Train> Troubles in sum of weights: "

389 << 
fSumOfWeightsSig
 << " (SË: " << 
fSumOfWeightsBkg
 << " (B)" << 
Endl
;

392 i‡(
fSumOfWeights
 <= 0) {

393 
	`Log
(Ë<< 
kFATAL
 << "<Train> Troubles in sum of weights: "

394 << 
fSumOfWeights
 << 
Endl
;

398 
fBe°P¨s
.
	`˛ór
();

399 
°d
::
ve˘‹
<
I¡îvÆ
*>::
c⁄°_ôî©‹
 
∑rIt
 = 
fP¨R™ge
.
	`begö
();Ö¨Ià!fP¨R™ge.
	`íd
();ÖarIt++) {

400 
fBe°P¨s
.
	`push_back
–(*
∑rIt
)->
	`GëMón
() );

404 
DoubÀ_t
 
e°im©‹
 = 
fFôãr
->
	`Run
–
fBe°P¨s
 );

407 
	`PrötResu…s
–
fFôMëhod
, 
fBe°P¨s
, 
e°im©‹
 );

409 
dñëe
 
fFôãr
; fFitter = 0;

410 i‡(
fC⁄vîgîFôãr
!=0 && fC⁄vîgîFôãr!=(
IFôãrT¨gë
*)
this
) {

411 
dñëe
 
fC⁄vîgîFôãr
;

412 
fC⁄vîgîFôãr
 = 0;

414 
	`ExôFromTøöög
();

415 
	}
}

421 
	gTMVA
::
MëhodFDA
::
PrötResu…s
–c⁄° 
TSåög
& 
fôãr
, 
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑rs
, c⁄° DoubÀ_à
e°im©‹
 ) const

423 
Log
(Ë<< 
	gkINFO
;

424 
Log
(Ë<< 
	gkHEADER
 << "Resu…†f‹Ö¨amëî fô usög \"" << 
	gfôãr
 << "\" fôãr:" << 
	gEndl
;

425 
	g°d
::
ve˘‹
<
TSåög
> 
∑rNames
;

426 
UI¡_t
 
	gù¨
=0; i∑r<
	g∑rs
.
size
(); i∑r++Ë
	g∑rNames
.
push_back
–
F‹m
("P¨(%i)",
ù¨
 ) );

427 
gToﬁs
().
F‹m©ãdOuçut
–
∑rs
, 
∑rNames
, "P¨amëî" , "FôÑesu…", 
Log
(), "%g" );

428 
Log
(Ë<< "Dis¸imö©‹Éx¥essi⁄: \"" << 
	gfF‹muœSåögP
 << "\"" << 
	gEndl
;

429 
Log
(Ë<< "VÆuêo‡e°im©‹áàmöimum: " << 
	ge°im©‹
 << 
	gEndl
;

435 
DoubÀ_t
 
	gTMVA
::
MëhodFDA
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

437 c⁄° 
DoubÀ_t
 
sumOfWeights
[] = { 
fSumOfWeightsBkg
, 
fSumOfWeightsSig
, 
fSumOfWeights
 };

438 
DoubÀ_t
 
	ge°im©‹
[] = { 0, 0, 0 };

440 
DoubÀ_t
 
	gªsu…
, 
	gdevüti⁄
;

441 
DoubÀ_t
 
	gdesúed
 = 0.0;

444 if–
DoRegªssi⁄
() ){

445 
UI¡_t
 
	gõvt
=0; ievt<
GëNEvíts
(); ievt++) {

447 c⁄° 
	gTMVA
::
Evít
* 
ev
 = 
GëEvít
(
õvt
);

449  
I¡_t
 
	gdim
 = 0; dim < 
	gfOuçutDimísi⁄s
; ++dim ){

450 
	gdesúed
 = 
ev
->
GëT¨gë
–
dim
 );

451 
	gªsu…
 = 
I¡î¥ëF‹muœ
–
ev
, 
∑rs
.
begö
(),Ö¨s.
íd
() );

452 
	gdevüti⁄
 = 
TM©h
::
Powî
(
ªsu…
 - 
desúed
, 2);

453 
	ge°im©‹
[2] +
devüti⁄
 * 
ev
->
GëWeight
();

456 
	ge°im©‹
[2] /
sumOfWeights
[2];

458  
	ge°im©‹
[2];

460 }if–
DoMu…i˛ass
() ){

461 
UI¡_t
 
	gõvt
=0; ievt<
GëNEvíts
(); ievt++) {

463 c⁄° 
	gTMVA
::
Evít
* 
ev
 = 
GëEvít
(
õvt
);

465 
CÆcuœãMu…i˛assVÆues
–
ev
, 
∑rs
, *
fMu…i˛assRëu∫VÆ
 );

467 
DoubÀ_t
 
	g¸ossE¡r›y
 = 0.0;

468  
I¡_t
 
	gdim
 = 0; dim < 
	gfOuçutDimísi⁄s
; ++dim ){

469 
DoubÀ_t
 
	gy
 = 
fMu…i˛assRëu∫VÆ
->
©
(
dim
);

470 
DoubÀ_t
 
	gt
 = (
ev
->
GëCœss
(Ë=
°©ic_ˇ°
<
UI¡_t
>(
dim
) ? 1.0 : 0.0 );

471 
	g¸ossE¡r›y
 +
t
*
log
(
y
);

473 
	ge°im©‹
[2] +
ev
->
GëWeight
()*
¸ossE¡r›y
;

475 
	ge°im©‹
[2] /
sumOfWeights
[2];

477  
	ge°im©‹
[2];

480 
UI¡_t
 
	gõvt
=0; ievt<
GëNEvíts
(); ievt++) {

482 c⁄° 
	gTMVA
::
Evít
* 
ev
 = 
GëEvít
(
õvt
);

484 
	gdesúed
 = (
D©aInfo
().
IsSig«l
(
ev
) ? 1.0 : 0.0);

485 
	gªsu…
 = 
I¡î¥ëF‹muœ
–
ev
, 
∑rs
.
begö
(),Ö¨s.
íd
() );

486 
	gdevüti⁄
 = 
TM©h
::
Powî
(
ªsu…
 - 
desúed
, 2);

487 
	ge°im©‹
[
I¡_t
(
desúed
)] +
devüti⁄
 * 
ev
->
GëWeight
();

489 
	ge°im©‹
[0] /
sumOfWeights
[0];

490 
	ge°im©‹
[1] /
sumOfWeights
[1];

492  
	ge°im©‹
[0] +Éstimator[1];

499 
DoubÀ_t
 
	gTMVA
::
MëhodFDA
::
I¡î¥ëF‹muœ
–c⁄° 
Evít
* 
evít
, 
°d
::
ve˘‹
<DoubÀ_t>::
ôî©‹
 
∑rBegö
, std::ve˘‹<DoubÀ_t>::ôî©‹ 
∑rEnd
 )

501 
I¡_t
 
ù¨
 = 0;

503  
	g°d
::
ve˘‹
<
DoubÀ_t
>::
ôî©‹
 
ô
 = 
∑rBegö
; 
	gô
 !
∑rEnd
; ++it ){

505 
	gfF‹muœ
->
SëP¨amëî
–
ù¨
, (*
ô
) );

506 ++
	gù¨
;

508 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); iv¨++Ë
	gfF‹muœ
->
SëP¨amëî
–
iv¨
+
ù¨
, 
evít
->
GëVÆue
(ivar) );

510 
DoubÀ_t
 
	gªsu…
 = 
fF‹muœ
->
EvÆ
( 0 );

512  
	gªsu…
;

518 
DoubÀ_t
 
	gTMVA
::
MëhodFDA
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

520 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

523 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

525  
	`I¡î¥ëF‹muœ
–
ev
, 
fBe°P¨s
.
	`begö
(), fBe°P¨s.
	`íd
() );

526 
	}
}

530 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodFDA
::
	$GëRegªssi⁄VÆues
()

532 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
ËfRegªssi⁄Rëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

533 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

535 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

537 
Evít
* 
evT
 = 
√w
 
	`Evít
(*
ev
);

539  
I¡_t
 
dim
 = 0; dim < 
fOuçutDimísi⁄s
; ++dim ){

540 
I¡_t
 
off£t
 = 
dim
*
fNP¨s
;

541 
evT
->
	`SëT¨gë
(
dim
,
	`I¡î¥ëF‹muœ
–
ev
, 
fBe°P¨s
.
	`begö
()+
off£t
, fBe°P¨s.begö()+off£t+
fNP¨s
 ) );

543 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

544 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
evT2
->
	`GëT¨gë
(0));

546 
dñëe
 
evT
;

548  (*
fRegªssi⁄Rëu∫VÆ
);

549 
	}
}

553 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodFDA
::
	$GëMu…i˛assVÆues
()

555 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
ËfMu…i˛assRëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

556 
fMu…i˛assRëu∫VÆ
->
	`˛ór
();

557 
°d
::
ve˘‹
<
Flﬂt_t
> 
ãmp
;

560 c⁄° 
TMVA
::
Evít
* 
evt
 = 
	`GëEvít
();

562 
	`CÆcuœãMu…i˛assVÆues
–
evt
, 
fBe°P¨s
, 
ãmp
 );

564 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

565 
UI¡_t
 
iCœss
=0; iCœss<
nCœs£s
; iClass++){

566 
DoubÀ_t
 
n‹m
 = 0.0;

567 
UI¡_t
 
j
=0;j<
nCœs£s
;j++){

568 if(
iCœss
!=
j
)

569 
n‹m
+=
	`exp
(
ãmp
[
j
]-ãmp[
iCœss
]);

571 (*
fMu…i˛assRëu∫VÆ
).
	`push_back
(1.0/(1.0+
n‹m
));

574  (*
fMu…i˛assRëu∫VÆ
);

575 
	}
}

581 
	gTMVA
::
MëhodFDA
::
CÆcuœãMu…i˛assVÆues
–c⁄° 
TMVA
::
Evít
*& 
evt
, 
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑ømëîs
, std::ve˘‹<
Flﬂt_t
>& 
vÆues
)

583 
vÆues
.
˛ór
();

591 
DoubÀ_t
 
	gsum
=0;

592  
I¡_t
 
	gdim
 = 0; dim < 
	gfOuçutDimísi⁄s
; ++dim ){

593 
I¡_t
 
	goff£t
 = 
dim
*
fNP¨s
;

594 
DoubÀ_t
 
	gvÆue
 = 
I¡î¥ëF‹muœ
–
evt
, 
∑ømëîs
.
begö
()+
off£t
,Ö¨amëîs.begö()+off£t+
fNP¨s
 );

596 
	gvÆues
.
push_back
–
vÆue
 );

597 
	gsum
 +
vÆue
;

607 
	gTMVA
::
MëhodFDA
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

611 
i°r
 >> 
fNP¨s
;

613 
fBe°P¨s
.
	`˛ór
();

614 
fBe°P¨s
.
	`ªsize
–
fNP¨s
 );

615 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; i∑r++Ë
i°r
 >> 
fBe°P¨s
[ipar];

616 
	}
}

622 
	gTMVA
::
MëhodFDA
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

624 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

625 
	`gToﬁs
().
	`AddAâr
–
wght
, "NP¨s", 
fNP¨s
 );

626 
	`gToﬁs
().
	`AddAâr
–
wght
, "NDim", 
fOuçutDimísi⁄s
 );

627 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
*
fOuçutDimísi⁄s
; ipar++) {

628 * 
c€ffxml
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Parameter" );

629 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "Index", 
ù¨
 );

630 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "VÆue", 
fBe°P¨s
[
ù¨
] );

634 
	`gToﬁs
().
	`AddAâr
–
wght
, "F‹muœ", 
fF‹muœSåögP
 );

635 
	}
}

640 
	gTMVA
::
MëhodFDA
::
	$RódWeightsFromXML
–* 
wghäode
 )

642 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NP¨s", 
fNP¨s
 );

644 if(
	`gToﬁs
().
	`HasAâr
–
wghäode
, "NDim")) {

645 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NDim" , 
fOuçutDimísi⁄s
 );

648 
fOuçutDimísi⁄s
 = 1;

651 
fBe°P¨s
.
	`˛ór
();

652 
fBe°P¨s
.
	`ªsize
–
fNP¨s
*
fOuçutDimísi⁄s
 );

654 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

655 
DoubÀ_t
 
∑r
;

656 
UI¡_t
 
ù¨
;

657 
ch
) {

658 
	`gToﬁs
().
	`RódAâr
–
ch
, "Index", 
ù¨
 );

659 
	`gToﬁs
().
	`RódAâr
–
ch
, "VÆue", 
∑r
 );

662 i‡(
ù¨
 >
fNP¨s
*
fOuçutDimísi⁄s
Ë
	`Log
(Ë<< 
kFATAL
 << "<ReadWeightsFromXML> index out ofÑange: "

663 << 
ù¨
 << " >" << 
fNP¨s
 << 
Endl
;

664 
fBe°P¨s
[
ù¨
] = 
∑r
;

666 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

670 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "F‹muœ", 
fF‹muœSåögP
 );

673 
	`Cª©eF‹muœ
();

674 
	}
}

679 
	gTMVA
::
MëhodFDA
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

681 
fout
 << " doubÀ fP¨amëî[" << 
fNP¨s
 << "];" << 
°d
::
ídl
;

682 
fout
 << "};" << 
°d
::
ídl
;

683 
fout
 << "" << 
°d
::
ídl
;

684 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

685 
fout
 << "{" << 
°d
::
ídl
;

686 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; ipar++) {

687 
fout
 << " fP¨amëî[" << 
ù¨
 << "] = " << 
fBe°P¨s
[ù¨] << ";" << 
°d
::
ídl
;

689 
fout
 << "}" << 
°d
::
ídl
;

690 
fout
 << 
°d
::
ídl
;

691 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

692 
fout
 << "{" << 
°d
::
ídl
;

693 
fout
 << " // i¡î¥ëÅhêf‹muœ" << 
°d
::
ídl
;

696 
TSåög
 
°r
 = 
fF‹muœSåögT
;

697 
UI¡_t
 
ù¨
=0; i∑r<
fNP¨s
; ipar++) {

698 
°r
.
	`Rïœ˚AŒ
–
	`F‹m
("[%i]", 
ù¨
), Form("fParameter[%i]", ipar) );

702 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

703 
°r
.
	`Rïœ˚AŒ
–
	`F‹m
("[%i]", 
iv¨
+
fNP¨s
), Form("inputValues[%i]", ivar) );

706 
fout
 << " doubÀÑëvÆ = " << 
°r
 << ";" << 
°d
::
ídl
;

707 
fout
 << 
°d
::
ídl
;

708 
fout
 << "Ñëu∫ÑëvÆ; " << 
°d
::
ídl
;

709 
fout
 << "}" << 
°d
::
ídl
;

710 
fout
 << 
°d
::
ídl
;

711 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

712 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

713 
fout
 << "{" << 
°d
::
ídl
;

714 
fout
 << " //ÇŸhögÅÿ˛ór" << 
°d
::
ídl
;

715 
fout
 << "}" << 
°d
::
ídl
;

716 
	}
}

724 
	gTMVA
::
MëhodFDA
::
	$GëHñpMesßge
() const

726 
	`Log
(Ë<< 
Endl
;

727 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

728 
	`Log
(Ë<< 
Endl
;

729 
	`Log
(Ë<< "Thêfun˘i⁄ dis¸imö™à™Æysi†(FDAËi†®˛assifõ∏suôabÀ " << 
Endl
;

730 
	`Log
(Ë<< "tÿsﬁvêlöó∏‹ sim∂ên⁄löó∏dis¸imö©i⁄ÖrobÀms." << 
Endl
;

731 
	`Log
(Ë<< 
Endl
;

732 
	`Log
(Ë<< "Thêu£∏¥ovide†thêdesúed fun˘i⁄ wôhádju°abÀÖ¨amëîs" << 
Endl
;

733 
	`Log
(Ë<< "vüÅhêc⁄figuøti⁄ o±i⁄ såög,ánd FDA fô†thê∑ømëî†to" << 
Endl
;

734 
	`Log
(Ë<< "ô,ÑequúögÅhêsig«»(backgroundËfun˘i⁄ vÆuêtÿbêa†˛o£" << 
Endl
;

735 
	`Log
(Ë<< "a†possibÀÅÿ1 (0). It†adv™ègêovîÅhêm‹êövﬁvedánd" << 
Endl
;

736 
	`Log
(Ë<< "autom©i¯n⁄löó∏dis¸imö©‹†i†thêsim∂icôyándÅøn•¨ícy " << 
Endl
;

737 
	`Log
(Ë<< "o‡thêdis¸imö©i⁄Éx¥essi⁄. A sh‹tcomög i†th© FDA wûl" << 
Endl
;

738 
	`Log
(Ë<< "undî≥rf‹m f‹ invﬁvedÖrobÀm†wôh com∂iˇãd,Öha£ s∑˚" << 
Endl
;

739 
	`Log
(Ë<< "dïídíàn⁄löó∏c‹ªœti⁄s." << 
Endl
;

740 
	`Log
(Ë<< 
Endl
;

741 
	`Log
(Ë<< "PÀa£ c⁄su…ÅhêU£r†Guidêf‹Åhêf‹m© o‡thêf‹muœ såög" << 
Endl
;

742 
	`Log
(Ë<< "™dÅhêÆlowedÖ¨amëîÑ™ges:" << 
Endl
;

743 i‡(
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
()) {

744 
	`Log
() << "<a href=\"http://tmva.sourceforge.net/docu/TMVAUsersGuide.pdf\">"

745 << "hâp://tmva.sour˚f‹ge.√t/docu/TMVAU£rsGuide.pdf</a>" << 
Endl
;

747 
	`Log
(Ë<< "hâp://tmva.sour˚f‹ge.√t/docu/TMVAU£rsGuide.pdf" << 
Endl
;

748 
	`Log
(Ë<< 
Endl
;

749 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

750 
	`Log
(Ë<< 
Endl
;

751 
	`Log
(Ë<< "ThêFDAÖîf‹m™˚ dïíd†⁄Åhêcom∂exôyánd fidñôy o‡the" << 
Endl
;

752 
	`Log
(Ë<< "u£r-deföed dis¸imö©‹ fun˘i⁄. A†®gíîÆÑuÀ, iàshould" << 
Endl
;

753 
	`Log
(Ë<< "bêabÀÅÿª¥odu˚Åhêdis¸imö©i⁄Öowî o‡™yÜöór" << 
Endl
;

754 
	`Log
(Ë<< "dis¸imö™à™Æysis. Tÿªach i¡ÿthên⁄löó∏domaö, iàis" << 
Endl
;

755 
	`Log
(Ë<< "u£fu»tÿö•e˘Åhêc‹ªœti⁄Örofûe†o‡thêöpuàv¨übÀs," << 
Endl
;

756 
	`Log
(Ë<< "™dádd quadøti¯™d highîÖﬁynomü»ãrm†bëwì¿v¨übÀ†as" << 
Endl
;

757 
	`Log
(Ë<< "√˚sßry. Com∑ris⁄ wôh m‹êövﬁvedÇ⁄löó∏˛assifõr†ˇn" << 
Endl
;

758 
	`Log
(Ë<< "bêu£dá†®guide." << 
Endl
;

759 
	`Log
(Ë<< 
Endl
;

760 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

761 
	`Log
(Ë<< 
Endl
;

762 
	`Log
(Ë<< "Dïídög o¿thêfun˘i⁄ u£d,Åhêchoi˚ o‡\"FôMëhod\" is" << 
Endl
;

763 
	`Log
(Ë<< "¸ucü»f‹ gëtög vÆuabÀ sﬁuti⁄†wôh FDA. A†®guidñöêô" << 
Endl
;

764 
	`Log
(Ë<< "i†ªcommídedÅÿ°¨àwôh \"FôMëhod=MINUIT\". Whí m‹êcom∂ex" << 
Endl
;

765 
	`Log
(Ë<< "fun˘i⁄†¨êu£d whîêMINUIT d€†nŸ c⁄vîgêtÿªas⁄abÀ" << 
Endl
;

766 
	`Log
(Ë<< "ªsu…s,Åhêu£∏should swôchÅÿn⁄-gødõ¡ FôMëhod†such" << 
Endl
;

767 
	`Log
(Ë<< "a†GíëicAlg‹ôhm (GAË‹ M⁄ã C¨lÿ(MC). Iàmighà¥ovêtÿbe" << 
Endl
;

768 
	`Log
(Ë<< "u£fu»tÿcomböêGA (‹ MCËwôh MINUIT by sëtögÅhê›ti⁄" << 
Endl
;

769 
	`Log
(Ë<< "\"C⁄vîgî=MINUIT\". GA (MCËwû»thí sëÅhê°¨tögÖ¨amëîs" << 
Endl
;

770 
	`Log
(Ë<< "f‹ MINUIT suchÅh©Åhêbasi¯quÆôy o‡GA (MCËo‡födög globÆ" << 
Endl
;

771 
	`Log
(Ë<< "möim®i†comböed wôhÅhêeffiˇcy o‡MINUIT o‡födögÜoˇl" << 
Endl
;

772 
	`Log
(Ë<< "möima." << 
Endl
;

773 
	}
}

	@src/MethodFisher.cxx

104 
	~"TMVA/MëhodFishî.h
"

106 
	~"TMVA/CœssifõrFa˘‹y.h
"

107 
	~"TMVA/C⁄figuøbÀ.h
"

108 
	~"TMVA/D©aSë.h
"

109 
	~"TMVA/D©aSëInfo.h
"

110 
	~"TMVA/Evít.h
"

111 
	~"TMVA/IMëhod.h
"

112 
	~"TMVA/MëhodBa£.h
"

113 
	~"TMVA/MsgLoggî.h
"

114 
	~"TMVA/R™kög.h
"

115 
	~"TMVA/Toﬁs.h
"

116 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

117 
	~"TMVA/Ty≥s.h
"

118 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

120 
	~"TM©h.h
"

121 
	~"TM©rix.h
"

122 
	~"TLi°.h
"

123 
	~"Rio°ªam.h
"

125 
	~<iom™ù
>

126 
	~<ˇs£π
>

128 
	$REGISTER_METHOD
(
Fishî
)

130 
	`CœssImp
(
TMVA
::
MëhodFishî
);

135 
TMVA
::
MëhodFishî
::
	$MëhodFishî
–c⁄° 
TSåög
& 
jobName
,

136 c⁄° 
TSåög
& 
mëhodTôÀ
,

137 
D©aSëInfo
& 
dsi
,

138 c⁄° 
TSåög
& 
theO±i⁄
 ) :

139 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kFishî
, 
mëhodTôÀ
, 
dsi
, 
theO±i⁄
),

140 
	`fMónM©x
 ( 0 ),

141 
	`fTheMëhod
 ( "Fisher" ),

142 
	`fFishîMëhod
 ( 
kFishî
 ),

143 
	`fBëw
 ( 0 ),

144 
	`fWôh
 ( 0 ),

145 
	`fCov
 ( 0 ),

146 
	`fSumOfWeightsS
( 0 ),

147 
	`fSumOfWeightsB
( 0 ),

148 
	`fDis¸imPow
 ( 0 ),

149 
	`fFishîC€ff
 ( 0 ),

150 
	$fF0
 ( 0 )

152 
	}
}

157 
	gTMVA
::
MëhodFishî
::
	$MëhodFishî
–
D©aSëInfo
& 
dsi
,

158 c⁄° 
TSåög
& 
theWeightFûe
) :

159 
	`MëhodBa£
–
Ty≥s
::
kFishî
, 
dsi
, 
theWeightFûe
),

160 
	`fMónM©x
 ( 0 ),

161 
	`fTheMëhod
 ( "Fisher" ),

162 
	`fFishîMëhod
 ( 
kFishî
 ),

163 
	`fBëw
 ( 0 ),

164 
	`fWôh
 ( 0 ),

165 
	`fCov
 ( 0 ),

166 
	`fSumOfWeightsS
( 0 ),

167 
	`fSumOfWeightsB
( 0 ),

168 
	`fDis¸imPow
 ( 0 ),

169 
	`fFishîC€ff
 ( 0 ),

170 
	$fF0
 ( 0 )

172 
	}
}

177 
	gTMVA
::
MëhodFishî
::
	$Inô
( )

180 
fFishîC€ff
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

183 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

186 
	`InôM©ri˚s
();

187 
	}
}

194 
	gTMVA
::
MëhodFishî
::
	$De˛¨eO±i⁄s
()

196 
	`De˛¨eO±i⁄Ref
–
fTheMëhod
 = "Fisher", "Method", "Discrimination method" );

197 
	`AddPªDefVÆ
(
	`TSåög
("Fisher"));

198 
	`AddPªDefVÆ
(
	`TSåög
("Mahalanobis"));

199 
	}
}

204 
	gTMVA
::
MëhodFishî
::
	$Pro˚ssO±i⁄s
()

206 i‡(
fTheMëhod
 ="Fishî" ) 
fFishîMëhod
 = 
kFishî
;

207 
fFishîMëhod
 = 
kMahÆ™obis
;

210 
	`InôM©ri˚s
();

211 
	}
}

216 
	gTMVA
::
MëhodFishî
::~
	$MëhodFishî
( )

218 i‡(
fBëw
 ) { 
dñëe
 fBetw; fBetw = 0; }

219 i‡(
fWôh
 ) { 
dñëe
 fWith; fWith = 0; }

220 i‡(
fCov
 ) { 
dñëe
 fCov; fCov = 0; }

221 i‡(
fDis¸imPow
 ) { 
dñëe
 fDiscrimPow; fDiscrimPow = 0; }

222 i‡(
fFishîC€ff
Ë{ 
dñëe
 fFisherCoeff; fFisherCoeff = 0; }

223 
	}
}

228 
Boﬁ_t
 
	gTMVA
::
MëhodFishî
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

230 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

231  
kFALSE
;

232 
	}
}

237 
	gTMVA
::
MëhodFishî
::
	$Tøö
( )

240 
	`GëMón
();

243 
	`GëCov_WôhöCœss
();

246 
	`GëCov_BëwìnCœss
();

249 
	`GëCov_FuŒ
();

254 
	`GëFishîC€ff
();

257 
	`GëDis¸imPowî
();

260 
	`PrötC€fficõ¡s
();

262 
	`ExôFromTøöög
();

263 
	}
}

268 
DoubÀ_t
 
	gTMVA
::
MëhodFishî
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

270 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
();

271 
DoubÀ_t
 
ªsu…
 = 
fF0
;

272 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

273 
ªsu…
 +(*
fFishîC€ff
)[
iv¨
]*
ev
->
	`GëVÆue
(ivar);

276 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

278  
ªsu…
;

280 
	}
}

285 
	gTMVA
::
MëhodFishî
::
	$InôM©ri˚s
( )

288 
fMónM©x
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), 3 );

291 
fBëw
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), GetNvar() );

292 
fWôh
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), GetNvar() );

293 
fCov
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), GetNvar() );

296 
fDis¸imPow
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
() );

297 
	}
}

302 
	gTMVA
::
MëhodFishî
::
	$GëMón
( )

305 
fSumOfWeightsS
 = 0;

306 
fSumOfWeightsB
 = 0;

308 c⁄° 
UI¡_t
 
nv¨
 = 
	`D©aInfo
().
	`GëNV¨übÀs
();

311 
DoubÀ_t
* 
sumS
 = 
√w
 DoubÀ_t[
nv¨
];

312 
DoubÀ_t
* 
sumB
 = 
√w
 DoubÀ_t[
nv¨
];

313 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë{ 
sumS
[iv¨] = 
sumB
[ivar] = 0; }

316 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

319 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
õvt
);

322 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

323 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
fSumOfWeightsS
 +
weight
;

324 
fSumOfWeightsB
 +
weight
;

326 
DoubÀ_t
* 
sum
 = 
	`D©aInfo
().
	`IsSig«l
(
ev
Ë? 
sumS
 : 
sumB
;

328 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë
sum
[iv¨] +
ev
->
	`GëVÆue
–iv¨ )*
weight
;

331 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

332 (*
fMónM©x
)–
iv¨
, 2 ) = 
sumS
[ivar];

333 (*
fMónM©x
)–
iv¨
, 0 ) = 
sumS
[iv¨]/
fSumOfWeightsS
;

335 (*
fMónM©x
)–
iv¨
, 2 ) +
sumB
[ivar];

336 (*
fMónM©x
)–
iv¨
, 1 ) = 
sumB
[iv¨]/
fSumOfWeightsB
;

339 (*
fMónM©x
)–
iv¨
, 2 ) /(
fSumOfWeightsS
 + 
fSumOfWeightsB
);

343 
dñëe
 [] 
sumS
;

344 
dñëe
 [] 
sumB
;

345 
	}
}

351 
	gTMVA
::
MëhodFishî
::
	$GëCov_WôhöCœss
( )

354 
	`as£π
–
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0 );

359 c⁄° 
I¡_t
 
nv¨
 = 
	`GëNv¨
();

360 c⁄° 
I¡_t
 
nv¨2
 = 
nv¨
*nvar;

361 
DoubÀ_t
 *
sumSig
 = 
√w
 DoubÀ_t[
nv¨2
];

362 
DoubÀ_t
 *
sumBgd
 = 
√w
 DoubÀ_t[
nv¨2
];

363 
DoubÀ_t
 *
xvÆ
 = 
√w
 DoubÀ_t[
nv¨
];

364 
	`mem£t
(
sumSig
,0,
nv¨2
*(
DoubÀ_t
));

365 
	`mem£t
(
sumBgd
,0,
nv¨2
*(
DoubÀ_t
));

368 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

371 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

373 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

375 
I¡_t
 
x
=0; x<
nv¨
; x++Ë
xvÆ
[x] = 
ev
->
	`GëVÆue
( x );

376 
I¡_t
 
k
=0;

377 
I¡_t
 
x
=0; x<
nv¨
; x++) {

378 
I¡_t
 
y
=0; y<
nv¨
; y++) {

379 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)) {

380 
DoubÀ_t
 
v
 = ( (
xvÆ
[
x
] - (*
fMónM©x
)(x, 0))*(xvÆ[
y
] - (*fMónM©x)(y, 0)Ë)*
weight
;

381 
sumSig
[
k
] +
v
;

383 
DoubÀ_t
 
v
 = ( (
xvÆ
[
x
] - (*
fMónM©x
)(x, 1))*(xvÆ[
y
] - (*fMónM©x)(y, 1)Ë)*
weight
;

384 
sumBgd
[
k
] +
v
;

386 
k
++;

390 
I¡_t
 
k
=0;

391 
I¡_t
 
x
=0; x<
nv¨
; x++) {

392 
I¡_t
 
y
=0; y<
nv¨
; y++) {

402 (*
fWôh
)(
x
, 
y
Ë
sumSig
[
k
]/
fSumOfWeightsS
 + 
sumBgd
[k]/
fSumOfWeightsB
;

403 
k
++;

407 
dñëe
 [] 
sumSig
;

408 
dñëe
 [] 
sumBgd
;

409 
dñëe
 [] 
xvÆ
;

410 
	}
}

417 
	gTMVA
::
MëhodFishî
::
	$GëCov_BëwìnCœss
( )

420 
	`as£π
–
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0);

422 
DoubÀ_t
 
¥odSig
, 
¥odBgd
;

424 
UI¡_t
 
x
=0; x<
	`GëNv¨
(); x++) {

425 
UI¡_t
 
y
=0; y<
	`GëNv¨
(); y++) {

427 
¥odSig
 = ( ((*
fMónM©x
)(
x
, 0) - (*fMeanMatx)(x, 2))*

428 ((*
fMónM©x
)(
y
, 0) - (*fMeanMatx)(y, 2)) );

429 
¥odBgd
 = ( ((*
fMónM©x
)(
x
, 1) - (*fMeanMatx)(x, 2))*

430 ((*
fMónM©x
)(
y
, 1) - (*fMeanMatx)(y, 2)) );

432 (*
fBëw
)(
x
, 
y
Ë(
fSumOfWeightsS
*
¥odSig
 + 
fSumOfWeightsB
*
¥odBgd
) / (fSumOfWeightsS + fSumOfWeightsB);

435 
	}
}

440 
	gTMVA
::
MëhodFishî
::
	$GëCov_FuŒ
( )

442 
UI¡_t
 
x
=0; x<
	`GëNv¨
(); x++)

443 
UI¡_t
 
y
=0; y<
	`GëNv¨
(); y++)

444 (*
fCov
)(
x
, 
y
Ë(*
fWôh
)(x, yË+ (*
fBëw
)(x, y);

445 
	}
}

457 
	gTMVA
::
MëhodFishî
::
	$GëFishîC€ff
( )

460 
	`as£π
–
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0);

463 
TM©rixD
* 
theM©
 = 0;

464 
	`GëFishîMëhod
()) {

465 
kFishî
:

466 
theM©
 = 
fWôh
;

468 
kMahÆ™obis
:

469 
theM©
 = 
fCov
;

472 
	`Log
(Ë<< 
kFATAL
 << "<GëFishîC€ff> undeföed mëhod" << 
	`GëFishîMëhod
(Ë<< 
Endl
;

475 
TM©rixD
 
	`övCov
–*
theM©
 );

477 i‡–
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
()) < 10E-24 ) {

478 
	`Log
(Ë<< 
kWARNING
 << "<GetFisherCoeff> matrix isálmost singular with determinant="

479 << 
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
())

481 << 
Endl
;

483 i‡–
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
()) < 10E-120 ) {

484 
theM©
->
	`Pröt
();

485 
	`Log
(Ë<< 
kFATAL
 << "<GetFisherCoeff> matrix is singular with determinant="

486 << 
TM©h
::
	`Abs
(
övCov
.
	`Dëîmö™t
())

489 << 
Endl
;

492 
övCov
.
	`Invît
();

495 
DoubÀ_t
 
xÁ˘
 = 
TM©h
::
	`Sqπ
–
fSumOfWeightsS
*
fSumOfWeightsB
 ) / (fSumOfWeightsS + fSumOfWeightsB);

498 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`diffMóns
–
	`GëNv¨
() );

499 
UI¡_t
 
iv¨
, 
jv¨
;

500 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

501 (*
fFishîC€ff
)[
iv¨
] = 0;

503 
jv¨
=0; jv¨<
	`GëNv¨
(); jvar++) {

504 
DoubÀ_t
 
d
 = (*
fMónM©x
)(
jv¨
, 0) - (*fMeanMatx)(jvar, 1);

505 (*
fFishîC€ff
)[
iv¨
] +
	`övCov
(iv¨, 
jv¨
)*
d
;

508 (*
fFishîC€ff
)[
iv¨
] *
xÁ˘
;

513 
fF0
 = 0.0;

514 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

515 
fF0
 +(*
fFishîC€ff
)[
iv¨
]*((*
fMónM©x
)(ivar, 0) + (*fMeanMatx)(ivar, 1));

517 
fF0
 /= -2.0;

518 
	}
}

528 
	gTMVA
::
MëhodFishî
::
	$GëDis¸imPowî
( )

530 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

531 i‡((*
fCov
)(
iv¨
, ivar) != 0)

532 (*
fDis¸imPow
)[
iv¨
] = (*
fBëw
)(iv¨, iv¨)/(*
fCov
)(ivar, ivar);

534 (*
fDis¸imPow
)[
iv¨
] = 0;

536 
	}
}

541 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodFishî
::
	$Cª©eR™kög
()

544 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Discr.Öower" );

546 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

547 
fR™kög
->
	`AddR™k
–
	`R™k
–
	`GëI≈utLabñ
(
iv¨
), (*
fDis¸imPow
)[ivar] ) );

550  
fR™kög
;

551 
	}
}

557 
	gTMVA
::
MëhodFishî
::
	$PrötC€fficõ¡s
( )

559 
	`Log
(Ë<< 
kHEADER
 << "Resu…†f‹ Fishî c€fficõ¡s:" << 
Endl
;

561 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() != 0) {

562 
	`Log
(Ë<< 
kINFO
 << "NOTE: Thêc€fficõ¡†mu° bê≠∂õdÅÿTRANFORMED v¨übÀs" << 
Endl
;

563 
	`Log
(Ë<< 
kINFO
 << " Li° o‡thêå™sf‹m©i⁄: " << 
Endl
;

564 
TLi°Iãr
 
	`åIt
(&
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
());

565 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
()) {

566 
	`Log
(Ë<< 
kINFO
 << " -- " << 
åf
->
	`GëName
(Ë<< 
Endl
;

569 
°d
::
ve˘‹
<
TSåög
> 
v¨s
;

570 
°d
::
ve˘‹
<
DoubÀ_t
> 
c€ffs
;

571 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

572 
v¨s
 .
	`push_back
–
	`GëI≈utLabñ
(
iv¨
) );

573 
c€ffs
.
	`push_back
–(*
fFishîC€ff
)[
iv¨
] );

575 
v¨s
 .
	`push_back
( "(offset)" );

576 
c€ffs
.
	`push_back
–
fF0
 );

577 
TMVA
::
	`gToﬁs
().
	`F‹m©ãdOuçut
–
c€ffs
, 
v¨s
, "V¨übÀ" , "C€fficõ¡", 
	`Log
() );

582 i‡(
	`IsN‹mÆi£d
()) {

583 
	`Log
(Ë<< 
kINFO
 << "NOTE: You havêcho£¿tÿu£Åhê\"N‹mÆi£\" bookög o±i⁄. Hí˚,Åhe" << 
Endl
;

584 
	`Log
(Ë<< 
kINFO
 << " c€fficõ¡†mu° bê≠∂õdÅÿNORMALISED ('Ëv¨übÀ†a†fﬁlows:" << 
Endl
;

585 
I¡_t
 
maxL
 = 0;

586 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ëi‡(
	`GëI≈utLabñ
(iv¨).
	`Lígth
(Ë> 
maxL
) maxL = GetInputLabel(ivar).Length();

589 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

590 
	`Log
(Ë<< 
kINFO


591 << 
°d
::
	`£tw
(
maxL
+9Ë<< 
	`TSåög
("["Ë+ 
	`GëI≈utLabñ
(
iv¨
) + "]' = 2*("

592 << 
°d
::
	`£tw
(
maxL
+2Ë<< 
	`TSåög
("["Ë+ 
	`GëI≈utLabñ
(
iv¨
) + "]"

593 << 
°d
::
	`£tw
(3Ë<< (
	`GëXmö
(
iv¨
) > 0 ? " - " : " + ")

594 << 
°d
::
	`£tw
(6Ë<< 
TM©h
::
	`Abs
(
	`GëXmö
(
iv¨
)) << std::setw(3) << ")/"

595 << 
°d
::
	`£tw
(6Ë<< (
	`GëXmax
(
iv¨
Ë- 
	`GëXmö
(ivar) )

596 << 
°d
::
	`£tw
(3) << " - 1"

597 << 
Endl
;

599 
	`Log
(Ë<< 
kINFO
 << "ThêTMVA Ródî wû»¥›îlyáccou¡ f‹Åhi†n‹mÆißti⁄, buài‡the" << 
Endl
;

600 
	`Log
(Ë<< 
kINFO
 << "Fishî cœssifõ∏i†≠∂õd outsidêthêRódî,Åhêå™sf‹m©i⁄ mu° be" << 
Endl
;

601 
	`Log
(Ë<< 
kINFO
 << "im∂emíãd -- o∏thê\"N‹mÆi£\" o±i⁄ i†ªmovedánd FishîÑëøöed." << 
Endl
;

602 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

604 
	}
}

609 
	gTMVA
::
MëhodFishî
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

611 
i°r
 >> 
fF0
;

612 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë
i°r
 >> (*
fFishîC€ff
)[ivar];

613 
	}
}

618 
	gTMVA
::
MëhodFishî
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

620 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

621 
	`gToﬁs
().
	`AddAâr
–
wght
, "NC€ff", 
	`GëNv¨
()+1 );

622 * 
c€ffxml
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "Coefficient");

623 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "Index", 0 );

624 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "VÆue", 
fF0
 );

625 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

626 
c€ffxml
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Coefficient" );

627 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "Index", 
iv¨
+1 );

628 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "VÆue", (*
fFishîC€ff
)[
iv¨
] );

630 
	}
}

635 
	gTMVA
::
MëhodFishî
::
	$RódWeightsFromXML
–* 
wghäode
 )

637 
UI¡_t
 
nc€ff
, 
c€ffidx
;

638 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NC€ff", 
nc€ff
 );

639 
fFishîC€ff
->
	`ªsize
(
nc€ff
-1);

641 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

642 
DoubÀ_t
 
c€ff
;

643 
ch
) {

644 
	`gToﬁs
().
	`RódAâr
–
ch
, "Index", 
c€ffidx
 );

645 
	`gToﬁs
().
	`RódAâr
–
ch
, "VÆue", 
c€ff
 );

646 i‡(
c€ffidx
==0Ë
fF0
 = 
c€ff
;

647 (*
fFishîC€ff
)[
c€ffidx
-1] = 
c€ff
;

648 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

650 
	}
}

655 
	gTMVA
::
MëhodFishî
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

657 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

658 
fout
 << " doubÀ fFishî0;" << 
°d
::
ídl
;

659 
fout
 << " std::ve˘‹<doubÀ> fFishîC€fficõ¡s;" << 
°d
::
ídl
;

660 
fout
 << "};" << 
°d
::
ídl
;

661 
fout
 << "" << 
°d
::
ídl
;

662 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

663 
fout
 << "{" << 
°d
::
ídl
;

664 
fout
 << " fFishî0 = " << 
°d
::
	`£çªcisi⁄
(12Ë<< 
fF0
 << ";" << std::
ídl
;

665 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

666 
fout
 << " fFishîC€fficõ¡s.push_back–" << 
°d
::
	`£çªcisi⁄
(12Ë<< (*
fFishîC€ff
)[
iv¨
] << " );" << std::
ídl
;

668 
fout
 << 
°d
::
ídl
;

669 
fout
 << " // s™ôy check" << 
°d
::
ídl
;

670 
fout
 << " i‡(fFishîC€fficõ¡s.size(Ë!fNv¨sË{" << 
°d
::
ídl
;

671 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\"::Inôülize: mism©ch i¿numbî o‡öpuàvÆues\"" << 
°d
::
ídl
;

672 
fout
 << " << fFishîC€fficõ¡s.size(Ë<< \" !\" << fNv¨†<< std::ídl;" << 
°d
::
ídl
;

673 
fout
 << " fSètusIsCÀ™ = fÆ£;" << 
°d
::
ídl
;

674 
fout
 << " } " << 
°d
::
ídl
;

675 
fout
 << "}" << 
°d
::
ídl
;

676 
fout
 << 
°d
::
ídl
;

677 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

678 
fout
 << "{" << 
°d
::
ídl
;

679 
fout
 << " doubÀÑëvÆ = fFishî0;" << 
°d
::
ídl
;

680 
fout
 << " f‹ (size_àiv¨ = 0; iv¨ < fNv¨s; iv¨++Ë{" << 
°d
::
ídl
;

681 
fout
 << "ÑëvÆ +fFishîC€fficõ¡s[iv¨]*öputVÆues[iv¨];" << 
°d
::
ídl
;

682 
fout
 << " }" << 
°d
::
ídl
;

683 
fout
 << 
°d
::
ídl
;

684 
fout
 << "Ñëu∫ÑëvÆ;" << 
°d
::
ídl
;

685 
fout
 << "}" << 
°d
::
ídl
;

686 
fout
 << 
°d
::
ídl
;

687 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

688 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

689 
fout
 << "{" << 
°d
::
ídl
;

690 
fout
 << " // cÀ¨ c€fficõ¡s" << 
°d
::
ídl
;

691 
fout
 << " fFishîC€fficõ¡s.˛ór(); " << 
°d
::
ídl
;

692 
fout
 << "}" << 
°d
::
ídl
;

693 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

694 
	}
}

702 
	gTMVA
::
MëhodFishî
::
	$GëHñpMesßge
() const

704 
	`Log
(Ë<< 
Endl
;

705 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

706 
	`Log
(Ë<< 
Endl
;

707 
	`Log
(Ë<< "Fishî dis¸imö™t†£À˘Évít†by di°öguishögÅhêmó¿" << 
Endl
;

708 
	`Log
(Ë<< "vÆue†o‡thêsig«»™d background di°ributi⁄†öáÅøns- " << 
Endl
;

709 
	`Log
(Ë<< "f‹med v¨übÀ s∑˚ whîêlöó∏c‹ªœti⁄†¨êªmoved." << 
Endl
;

710 
	`Log
(Ë<< 
Endl
;

711 
	`Log
(Ë<< " (M‹ê¥eci£ly:Åhê\"löó∏dis¸imö©‹\" dëîmöes" << 
Endl
;

712 
	`Log
(Ë<< "á¿axi†öÅhê(c‹ªœãdËhy≥r•a˚ o‡thêöpuà" << 
Endl
;

713 
	`Log
(Ë<< " v¨übÀ†suchÅh©, whíÖroje˘ögÅhêouçuà˛as£†" << 
Endl
;

714 
	`Log
(Ë<< " (sig«»™d backgroundËup⁄Åhi†axis,ÅheyáªÖushed " << 
Endl
;

715 
	`Log
(Ë<< "á†Á∏a†possibÀáway fromÉach othî, whûêevíts" << 
Endl
;

716 
	`Log
(Ë<< " o‡®ßmê˛as†¨êc⁄föed i¿®˛o£ vicöôy. Thê " << 
Endl
;

717 
	`Log
(Ë<< "ÜöórôyÖr›îty o‡thi†˛assifõ∏i†ªÊe˘ed i¿thê" << 
Endl
;

718 
	`Log
(Ë<< " mëri¯wôh which \"Á∏≠¨t\"ánd \"˛o£ vicöôy\"áª " << 
Endl
;

719 
	`Log
(Ë<< " dëîmöed:Åhêcov¨ün˚ m©rix o‡thêdis¸imö©ög" << 
Endl
;

720 
	`Log
(Ë<< " v¨übÀ s∑˚.)" << 
Endl
;

721 
	`Log
(Ë<< 
Endl
;

722 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

723 
	`Log
(Ë<< 
Endl
;

724 
	`Log
(Ë<< "O±imÆÖîf‹m™˚ f‹ Fishî dis¸imö™t†i†obèöed f‹ " << 
Endl
;

725 
	`Log
(Ë<< "löóæy c‹ªœãd Gaussün-di°ribuãd v¨übÀs. Any devüti⁄" << 
Endl
;

726 
	`Log
(Ë<< "‰omÅhi†idó»ªdu˚†thêachõvabÀ sï¨©i⁄Öowî. I¿" << 
Endl
;

727 
	`Log
(Ë<< "∑πicuœr,Çÿdis¸imö©i⁄áàÆ»i†achõved f‹á v¨übÀ" << 
Endl
;

728 
	`Log
(Ë<< "th© ha†thêßmêßm∂êmó¿f‹ sig«»™d background,Éví i‡" << 
Endl
;

729 
	`Log
(Ë<< "thêsh≠e†o‡thêdi°ributi⁄†¨êvîy dif„ª¡. Thus, Fishî " << 
Endl
;

730 
	`Log
(Ë<< "dis¸imö™t†o·í bíefô from suôabÀÅønsf‹m©i⁄†o‡thê" << 
Endl
;

731 
	`Log
(Ë<< "öpuàv¨übÀs. F‹Éxam∂e, i‡®v¨übÀ x i¿[-1,1] ha†®" << 
Endl
;

732 
	`Log
(Ë<< "®∑øbﬁi¯sig«»di°ributi⁄s,ándá unif‹m background" << 
Endl
;

733 
	`Log
(Ë<< "di°ributi⁄s,Åheú mó¿vÆuêi†zîÿö bŸh ca£s,Üódög " << 
Endl
;

734 
	`Log
(Ë<< "tÿnÿ£∑øti⁄. Thêsim∂êå™sf‹m©i⁄ x -> |x|Ñídî†thi†" << 
Endl
;

735 
	`Log
(Ë<< "v¨übÀÖowîfu»f‹Åhêu£ i¿®Fishî dis¸imö™t." << 
Endl
;

736 
	`Log
(Ë<< 
Endl
;

737 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

738 
	`Log
(Ë<< 
Endl
;

739 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

740 
	}
}

	@src/MethodHMatrix.cxx

29 
	~"TMVA/MëhodHM©rix.h
"

31 
	~"TMVA/CœssifõrFa˘‹y.h
"

32 
	~"TMVA/D©aSë.h
"

33 
	~"TMVA/D©aSëInfo.h
"

34 
	~"TMVA/IMëhod.h
"

35 
	~"TMVA/MëhodBa£.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/Toﬁs.h
"

38 
	~"TMVA/Ty≥s.h
"

40 
	~"Rio°ªam.h
"

41 
	~"TM©rix.h
"

42 
	~"TVe˘‹T.h
"

43 
	~"TLi°.h
"

45 
	~<Æg‹ôhm
>

47 
	$REGISTER_METHOD
(
HM©rix
)

49 
	`CœssImp
(
TMVA
::
MëhodHM©rix
);

83 
TMVA
::
MëhodHM©rix
::
	$MëhodHM©rix
–c⁄° 
TSåög
& 
jobName
,

84 c⁄° 
TSåög
& 
mëhodTôÀ
,

85 
D©aSëInfo
& 
theD©a
,

86 c⁄° 
TSåög
& 
theO±i⁄
 )

87 : 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kHM©rix
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

88 ,
	`fInvHM©rixS
(0)

89 ,
	`fInvHM©rixB
(0)

90 ,
	`fVecMónS
(0)

91 ,
	$fVecMónB
(0)

93 
	}
}

98 
	gTMVA
::
MëhodHM©rix
::
	$MëhodHM©rix
–
D©aSëInfo
& 
theD©a
,

99 c⁄° 
TSåög
& 
theWeightFûe
)

100 : 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kHM©rix
, 
theD©a
, 
theWeightFûe
)

101 ,
	`fInvHM©rixS
(0)

102 ,
	`fInvHM©rixB
(0)

103 ,
	`fVecMónS
(0)

104 ,
	$fVecMónB
(0)

106 
	}
}

111 
	gTMVA
::
MëhodHM©rix
::
	$Inô
( )

115 
fInvHM©rixS
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), GetNvar() );

116 
fInvHM©rixB
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
(), GetNvar() );

117 
fVecMónS
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

118 
fVecMónB
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

121 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

122 
	}
}

127 
	gTMVA
::
MëhodHM©rix
::~
	$MëhodHM©rix
( )

129 i‡(
NULL
 !
fInvHM©rixS
Ë
dñëe
 fInvHMatrixS;

130 i‡(
NULL
 !
fInvHM©rixB
Ë
dñëe
 fInvHMatrixB;

131 i‡(
NULL
 !
fVecMónS
 ) 
dñëe
 fVecMeanS;

132 i‡(
NULL
 !
fVecMónB
 ) 
dñëe
 fVecMeanB;

133 
	}
}

138 
Boﬁ_t
 
	gTMVA
::
MëhodHM©rix
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

140 if–
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2 )  
kTRUE
;

141  
kFALSE
;

142 
	}
}

148 
	gTMVA
::
MëhodHM©rix
::
	$De˛¨eO±i⁄s
()

150 
	}
}

155 
TMVA
::
MëhodHM©rix
::
	$Pro˚ssO±i⁄s
()

157 
	}
}

162 
TMVA
::
MëhodHM©rix
::
	$Tøö
( )

165 
	`CompuãCov¨ün˚
–
kTRUE
, 
fInvHM©rixS
 );

166 
	`CompuãCov¨ün˚
–
kFALSE
, 
fInvHM©rixB
 );

169 i‡(
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`Dëîmö™t
()) < 10E-24) {

170 
	`Log
(Ë<< 
kWARNING
 << "<Train> H-matrix S isálmost singular with determinant= "

171 << 
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`Dëîmö™t
())

173 << 
Endl
;

175 i‡(
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`Dëîmö™t
()) < 10E-24) {

176 
	`Log
(Ë<< 
kWARNING
 << "<Train> H-matrix B isálmost singular with determinant= "

177 << 
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`Dëîmö™t
())

179 << 
Endl
;

182 i‡(
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`Dëîmö™t
()) < 10E-120) {

183 
	`Log
(Ë<< 
kFATAL
 << "<Train> H-matrix S is singular with determinant= "

184 << 
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`Dëîmö™t
())

186 << 
Endl
;

188 i‡(
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`Dëîmö™t
()) < 10E-120) {

189 
	`Log
(Ë<< 
kFATAL
 << "<Train> H-matrix B is singular with determinant= "

190 << 
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`Dëîmö™t
())

192 << 
Endl
;

196 
fInvHM©rixS
->
	`Invît
();

197 
fInvHM©rixB
->
	`Invît
();

198 
	`ExôFromTøöög
();

199 
	}
}

204 
	gTMVA
::
MëhodHM©rix
::
	$CompuãCov¨ün˚
–
Boﬁ_t
 
isSig«l
, 
TM©rixD
* 
m©
 )

206 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

208 c⁄° 
UI¡_t
 
nv¨
 = 
	`D©aInfo
().
	`GëNV¨übÀs
();

209 
UI¡_t
 
iv¨
, 
jv¨
;

212 
TVe˘‹D
 
	`vec
(
nv¨
); 
vec
 *= 0;

213 
TM©rixD
 
	`m©2
(
nv¨
,Çv¨); 
m©2
 *= 0;

216 
DoubÀ_t
 
sumOfWeights
 = 0;

217 
DoubÀ_t
 *
xvÆ
 = 
√w
 DoubÀ_t[
nv¨
];

220 
I¡_t
 
i
=0, 
iEnd
=
	`D©a
()->
	`GëNEvíts
(); i<iEnd; ++i) {

223 c⁄° 
Evít
* 
‹igEvt
 = 
	`D©a
()->
	`GëEvít
(
i
);

224 
DoubÀ_t
 
weight
 = 
‹igEvt
->
	`GëWeight
();

227 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
weight
 <= 0) ;

229 i‡(
	`D©aInfo
().
	`IsSig«l
(
‹igEvt
Ë!
isSig«l
) ;

232 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
‹igEvt
->
	`GëCœss
() );

233 c⁄° 
Evít
* 
ev
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Tønsf‹m
–
‹igEvt
 );

236 
sumOfWeights
 +
weight
;

239 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë
xvÆ
[iv¨] = 
ev
->
	`GëVÆue
(ivar);

242 
iv¨
=0; iv¨<
nv¨
; ivar++) {

244 
	`vec
(
iv¨
Ë+
xvÆ
[iv¨]*
weight
;

245 
	`m©2
(
iv¨
, iv¨Ë+(
xvÆ
[iv¨]*xvÆ[iv¨])*
weight
;

247 
jv¨
=
iv¨
+1; jv¨<
nv¨
; jvar++) {

248 
	`m©2
(
iv¨
, 
jv¨
Ë+(
xvÆ
[iv¨]*xvÆ[jv¨])*
weight
;

249 
	`m©2
(
jv¨
, 
iv¨
) = mat2(ivar, jvar);

255 
iv¨
=0; iv¨<
nv¨
; ivar++) {

257 i‡(
isSig«l
Ë(*
fVecMónS
)(
iv¨
Ë
	`vec
(iv¨)/
sumOfWeights
;

258 (*
fVecMónB
)(
iv¨
Ë
	`vec
(iv¨)/
sumOfWeights
;

260 
jv¨
=0; jv¨<
nv¨
; jvar++) {

261 (*
m©
)(
iv¨
, 
jv¨
Ë
	`m©2
(iv¨, jv¨)/
sumOfWeights
 - 
	`vec
(ivar)*vec(jvar)/(sumOfWeights*sumOfWeights);

265 
dñëe
 [] 
xvÆ
;

266 
	}
}

271 
DoubÀ_t
 
	gTMVA
::
MëhodHM©rix
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

273 
DoubÀ_t
 
s
 = 
	`GëChi2
–
Ty≥s
::
kSig«l
 );

274 
DoubÀ_t
 
b
 = 
	`GëChi2
–
Ty≥s
::
kBackground
 );

276 i‡(
s
+
b
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << "bigÅroubÀ: s+b: " << s+b << 
Endl
;

279 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

281  (
b
 - 
s
)/(s + b);

282 
	}
}

287 
DoubÀ_t
 
	gTMVA
::
MëhodHM©rix
::
	$GëChi2
–
Ty≥s
::
ESBTy≥
 
ty≥
 )

291 c⁄° 
Evít
* 
‹igEvt
 = 
fTmpEvít
 ? fTmpEvít:
	`D©a
()->
	`GëEvít
();

294 
UI¡_t
 
	`iv¨
(0), 
	`jv¨
(0), 
	`nv¨
(
	`GëNv¨
());

295 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`vÆ
–
nv¨
 );

298 i‡(
ty≥
==
Ty≥s
::
kSig«l
)

299 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
fSig«lCœss
 );

301 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
fBackgroundCœss
 );

303 c⁄° 
Evít
* 
ev
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Tønsf‹m
–
‹igEvt
 );

305 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë
vÆ
[iv¨] = 
ev
->
	`GëVÆue
( ivar );

307 
DoubÀ_t
 
chi2
 = 0;

308 
iv¨
=0; iv¨<
nv¨
; ivar++) {

309 
jv¨
=0; jv¨<
nv¨
; jvar++) {

310 i‡(
ty≥
 =
Ty≥s
::
kSig«l
)

311 
chi2
 +–(
vÆ
[
iv¨
] - (*
fVecMónS
)(iv¨))*(vÆ[
jv¨
] - (*fVecMeanS)(jvar))

312 * (*
fInvHM©rixS
)(
iv¨
,
jv¨
) );

314 
chi2
 +–(
vÆ
[
iv¨
] - (*
fVecMónB
)(iv¨))*(vÆ[
jv¨
] - (*fVecMeanB)(jvar))

315 * (*
fInvHM©rixB
)(
iv¨
,
jv¨
) );

320 i‡(
chi2
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << "<GëChi2>Çeg©ivêchi2: " << chi2 << 
Endl
;

322  
chi2
;

323 
	}
}

328 
	gTMVA
::
MëhodHM©rix
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

330 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

331 
	`gToﬁs
().
	`WrôeTVe˘‹DToXML
–
wght
, "VecMónS", 
fVecMónS
 );

332 
	`gToﬁs
().
	`WrôeTVe˘‹DToXML
–
wght
, "VecMónB", 
fVecMónB
 );

333 
	`gToﬁs
().
	`WrôeTM©rixDToXML
–
wght
, "InvHM©S", 
fInvHM©rixS
 );

334 
	`gToﬁs
().
	`WrôeTM©rixDToXML
–
wght
, "InvHM©B", 
fInvHM©rixB
 );

335 
	}
}

340 
	gTMVA
::
MëhodHM©rix
::
	$RódWeightsFromXML
–* 
wghäode
 )

342 * 
des˙ode
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

343 
	`gToﬁs
().
	`RódTVe˘‹DFromXML
–
des˙ode
, "VecMónS", 
fVecMónS
 );

344 
des˙ode
 = 
	`gToﬁs
().
	`GëNextChûd
(descnode);

345 
	`gToﬁs
().
	`RódTVe˘‹DFromXML
–
des˙ode
, "VecMónB", 
fVecMónB
 );

346 
des˙ode
 = 
	`gToﬁs
().
	`GëNextChûd
(descnode);

347 
	`gToﬁs
().
	`RódTM©rixDFromXML
–
des˙ode
, "InvHM©S", 
fInvHM©rixS
 );

348 
des˙ode
 = 
	`gToﬁs
().
	`GëNextChûd
(descnode);

349 
	`gToﬁs
().
	`RódTM©rixDFromXML
–
des˙ode
, "InvHM©B", 
fInvHM©rixB
 );

350 
	}
}

357 
	gTMVA
::
MëhodHM©rix
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

359 
UI¡_t
 
iv¨
,
jv¨
;

360 
TSåög
 
v¨
, 
dummy
;

361 
i°r
 >> 
dummy
;

365 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

366 
i°r
 >> (*
fVecMónS
)(
iv¨
Ë>> (*
fVecMónB
)(ivar);

369 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

370 
jv¨
=0; jv¨<
	`GëNv¨
(); jvar++)

371 
i°r
 >> (*
fInvHM©rixS
)(
iv¨
,
jv¨
);

374 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++)

375 
jv¨
=0; jv¨<
	`GëNv¨
(); jvar++)

376 
i°r
 >> (*
fInvHM©rixB
)(
iv¨
,
jv¨
);

377 
	}
}

382 
	gTMVA
::
MëhodHM©rix
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

384 
fout
 << " //áºay†o‡öpuàevàvs. v¨übÀ " << 
°d
::
ídl
;

385 
fout
 << " doubÀ fInvHM©rixS[" << 
	`GëNv¨
(Ë<< "][" << GëNv¨(Ë<< "]; // invî£ H-m©rix (sig«l)" << 
°d
::
ídl
;

386 
fout
 << " doubÀ fInvHM©rixB[" << 
	`GëNv¨
(Ë<< "][" << GëNv¨(Ë<< "]; // invî£ H-m©rix (background)" << 
°d
::
ídl
;

387 
fout
 << " doubÀ fVecMónS[" << 
	`GëNv¨
(Ë<< "]; // ve˘‹ o‡mó¿vÆue†(sig«l)" << 
°d
::
ídl
;

388 
fout
 << " doubÀ fVecMónB[" << 
	`GëNv¨
(Ë<< "]; // ve˘‹ o‡mó¿vÆue†(background)" << 
°d
::
ídl
;

389 
fout
 << " " << 
°d
::
ídl
;

390 
fout
 << " doubÀ GëChi2–c⁄° std::ve˘‹<doubÀ>& i≈utVÆues, i¡Åy≥ ) c⁄°;" << 
°d
::
ídl
;

391 
fout
 << "};" << 
°d
::
ídl
;

392 
fout
 << " " << 
°d
::
ídl
;

393 
fout
 << "void " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

394 
fout
 << "{" << 
°d
::
ídl
;

395 
fout
 << " // inô ve˘‹†wôh mó¿vÆues" << 
°d
::
ídl
;

396 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

397 
fout
 << " fVecMónS[" << 
iv¨
 << "] = " << (*
fVecMónS
)(iv¨Ë<< ";" << 
°d
::
ídl
;

398 
fout
 << " fVecMónB[" << 
iv¨
 << "] = " << (*
fVecMónB
)(iv¨Ë<< ";" << 
°d
::
ídl
;

400 
fout
 << " " << 
°d
::
ídl
;

401 
fout
 << " // inô H-m©ri˚s" << 
°d
::
ídl
;

402 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

403 
UI¡_t
 
jv¨
=0; jv¨<
	`GëNv¨
(); jvar++) {

404 
fout
 << " fInvHM©rixS[" << 
iv¨
 << "][" << 
jv¨
 << "] = "

405 << (*
fInvHM©rixS
)(
iv¨
,
jv¨
Ë<< ";" << 
°d
::
ídl
;

406 
fout
 << " fInvHM©rixB[" << 
iv¨
 << "][" << 
jv¨
 << "] = "

407 << (*
fInvHM©rixB
)(
iv¨
,
jv¨
Ë<< ";" << 
°d
::
ídl
;

410 
fout
 << "}" << 
°d
::
ídl
;

411 
fout
 << " " << 
°d
::
ídl
;

412 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

413 
fout
 << "{" << 
°d
::
ídl
;

414 
fout
 << " //Ñëu∫†thêH-m©rix sig«»e°im©‹" << 
°d
::
ídl
;

415 
fout
 << " std::ve˘‹<doubÀ> i≈utVÆuesSig = i≈utVÆues;" << 
°d
::
ídl
;

416 
fout
 << " std::ve˘‹<doubÀ> i≈utVÆuesBgd = i≈utVÆues;" << 
°d
::
ídl
;

417 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() != 0) {

419 
UI¡_t
 
sig«lCœss
 =
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

420 
UI¡_t
 
backgroundCœss
=
	`D©aInfo
().
	`GëCœssInfo
("Background")->
	`GëNumbî
();

422 
fout
 << " Tønsf‹m(öputVÆuesSig," << 
sig«lCœss
 << ");" << 
°d
::
ídl
;

423 
fout
 << " Tønsf‹m(öputVÆuesBgd," << 
backgroundCœss
 << ");" << 
°d
::
ídl
;

428 
fout
 << " doubÀ s = GëChi2–öputVÆuesSig, " << 
Ty≥s
::
kSig«l
 << " );" << 
°d
::
ídl
;

429 
fout
 << " doubÀ b = GëChi2–öputVÆuesBgd, " << 
Ty≥s
::
kBackground
 << " );" << 
°d
::
ídl
;

433 
fout
 << " " << 
°d
::
ídl
;

434 
fout
 << " i‡(s+b <0Ë°d::couà<< \"ProbÀm i¿˛as†" << 
˛assName
 << "::GëMvaVÆue__: s+b = \"" << 
°d
::
ídl
;

435 
fout
 << " << s+b << \" <0 \" << std::ídl;" << 
°d
::
ídl
;

436 
fout
 << " " << 
°d
::
ídl
;

437 
fout
 << "Ñëu∫ (b - s)/(†+ b);" << 
°d
::
ídl
;

438 
fout
 << "}" << 
°d
::
ídl
;

439 
fout
 << " " << 
°d
::
ídl
;

440 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëChi2–c⁄° std::ve˘‹<doubÀ>& i≈utVÆues, i¡Åy≥ ) c⁄°" << 
°d
::
ídl
;

441 
fout
 << "{" << 
°d
::
ídl
;

442 
fout
 << " // compuã chi2-e°im©‹ f‹Évíàacc‹dögÅÿty≥ (sig«l/background)" << 
°d
::
ídl
;

443 
fout
 << " " << 
°d
::
ídl
;

444 
fout
 << " size_àiv¨,jv¨;" << 
°d
::
ídl
;

445 
fout
 << " doubÀ chi2 = 0;" << 
°d
::
ídl
;

446 
fout
 << " f‹ (iv¨=0; iv¨<GëNv¨(); iv¨++Ë{" << 
°d
::
ídl
;

447 
fout
 << " f‹ (jv¨=0; jv¨<GëNv¨(); jv¨++Ë{" << 
°d
::
ídl
;

448 
fout
 << " i‡—y≥ =" << 
Ty≥s
::
kSig«l
 << "Ë" << 
°d
::
ídl
;

449 
fout
 << " chi2 +–(öputVÆues[iv¨] - fVecMónS[iv¨])*(öputVÆues[jv¨] - fVecMónS[jv¨])" << 
°d
::
ídl
;

450 
fout
 << " * fInvHM©rixS[iv¨][jv¨] );" << 
°d
::
ídl
;

451 
fout
 << "Él£" << 
°d
::
ídl
;

452 
fout
 << " chi2 +–(öputVÆues[iv¨] - fVecMónB[iv¨])*(öputVÆues[jv¨] - fVecMónB[jv¨])" << 
°d
::
ídl
;

453 
fout
 << " * fInvHM©rixB[iv¨][jv¨] );" << 
°d
::
ídl
;

454 
fout
 << " }" << 
°d
::
ídl
;

455 
fout
 << " } //Üo› ovî v¨übÀ† " << 
°d
::
ídl
;

456 
fout
 << " " << 
°d
::
ídl
;

457 
fout
 << " // s™ôy check" << 
°d
::
ídl
;

458 
fout
 << " i‡(chi2 < 0Ë°d::couà<< \"ProbÀm i¿˛as†" << 
˛assName
 << "::GëChi2: chi2 = \"" << 
°d
::
ídl
;

459 
fout
 << " << chi2 << \" < 0 \" << std::ídl;" << 
°d
::
ídl
;

460 
fout
 << " " << 
°d
::
ídl
;

461 
fout
 << "Ñëu∫ chi2;" << 
°d
::
ídl
;

462 
fout
 << "}" << 
°d
::
ídl
;

463 
fout
 << " " << 
°d
::
ídl
;

464 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

465 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

466 
fout
 << "{" << 
°d
::
ídl
;

467 
fout
 << " //ÇŸhögÅÿ˛ór" << 
°d
::
ídl
;

468 
fout
 << "}" << 
°d
::
ídl
;

469 
	}
}

477 
	gTMVA
::
MëhodHM©rix
::
	$GëHñpMesßge
() const

479 
	`Log
(Ë<< 
Endl
;

480 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

481 
	`Log
(Ë<< 
Endl
;

482 
	`Log
(Ë<< "ThêH-M©rix cœssifõ∏dis¸imö©e†⁄ê˛as†(sig«lËo‡®„©uª" << 
Endl
;

483 
	`Log
(Ë<< "ve˘‹ frománŸhî (background). Thêc‹ªœãdÉÀmít†o‡the" << 
Endl
;

484 
	`Log
(Ë<< "ve˘‹áªássumedÅÿbêGaussü¿di°ribuãd,ándÅhêövî£ of" << 
Endl
;

485 
	`Log
(Ë<< "thêcov¨ün˚ m©rix i†thêH-M©rix. A mu…iv¨üã chi-squ¨ed" << 
Endl
;

486 
	`Log
(Ë<< "e°im©‹ i†buûàth©Éx∂oô†dif„ªn˚†öÅhêmó¿vÆue†of" << 
Endl
;

487 
	`Log
(Ë<< "thêve˘‹ÉÀmít†bëwì¿thêtwÿ˛as£†f‹ÅhêpuΩo£ of" << 
Endl
;

488 
	`Log
(Ë<< "dis¸imö©i⁄." << 
Endl
;

489 
	`Log
(Ë<< 
Endl
;

490 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

491 
	`Log
(Ë<< 
Endl
;

492 
	`Log
(Ë<< "ThêTMVA im∂emíèti⁄ o‡thêH-M©rix cœssifõ∏ha†bì¿shown" << 
Endl
;

493 
	`Log
(Ë<< "tÿundî≥rf‹m i¿com∑ris⁄ wôhÅhêc‹ª•⁄dög Fishî dis¸imö™t," << 
Endl
;

494 
	`Log
(Ë<< "whí usög simû¨ássum±i⁄†™d com∂exôy. It†u£ i†thîef‹e" << 
Endl
;

495 
	`Log
(Ë<< "dïªcüãd. O∆y i¿ˇ£†whîêthêbackground modñ i†°r⁄gly" << 
Endl
;

496 
	`Log
(Ë<< "n⁄-Gaussün, H-M©rix mayÖîf‹m bëã∏th™ Fishî. I¿such" << 
Endl
;

497 
	`Log
(Ë<< "occuºí˚†thêu£∏i†advi£dÅÿem∂oyÇ⁄-löó∏˛assifõrs. " << 
Endl
;

498 
	`Log
(Ë<< 
Endl
;

499 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

500 
	`Log
(Ë<< 
Endl
;

501 
	`Log
(Ë<< "N⁄e" << 
Endl
;

502 
	}
}

	@src/MethodKNN.cxx

33 
	~"TMVA/MëhodKNN.h
"

35 
	~"TMVA/CœssifõrFa˘‹y.h
"

36 
	~"TMVA/C⁄figuøbÀ.h
"

37 
	~"TMVA/D©aSëInfo.h
"

38 
	~"TMVA/Evít.h
"

39 
	~"TMVA/LDA.h
"

40 
	~"TMVA/IMëhod.h
"

41 
	~"TMVA/MëhodBa£.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/R™kög.h
"

44 
	~"TMVA/Toﬁs.h
"

45 
	~"TMVA/Ty≥s.h
"

47 
	~"TFûe.h
"

48 
	~"TM©h.h
"

49 
	~"TTªe.h
"

51 
	~<cm©h
>

52 
	~<°rög
>

53 
	~<c°dlib
>

55 
	$REGISTER_METHOD
(
KNN
)

57 
	`CœssImp
(
TMVA
::
MëhodKNN
);

62 
TMVA
::
MëhodKNN
::
	$MëhodKNN
–c⁄° 
TSåög
& 
jobName
,

63 c⁄° 
TSåög
& 
mëhodTôÀ
,

64 
D©aSëInfo
& 
theD©a
,

65 c⁄° 
TSåög
& 
theO±i⁄
 )

66 : 
TMVA
::
	`MëhodBa£
(
jobName
, 
Ty≥s
::
kKNN
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

67 , 
	`fSumOfWeightsS
(0)

68 , 
	`fSumOfWeightsB
(0)

69 , 
	`fModuÀ
(0)

70 , 
	`‚kNN
(0)

71 , 
	`fBÆ™˚Dïth
(0)

72 , 
	`fSˇÀFøc
(0)

73 , 
	`fSigmaFa˘
(0)

74 , 
	`fTrim
(
kFALSE
)

75 , 
	`fU£Kî√l
(
kFALSE
)

76 , 
	`fU£Weight
(
kFALSE
)

77 , 
	`fU£LDA
(
kFALSE
)

78 , 
	$fTªeO±Dïth
(0)

80 
	}
}

85 
	gTMVA
::
MëhodKNN
::
	$MëhodKNN
–
D©aSëInfo
& 
theD©a
,

86 c⁄° 
TSåög
& 
theWeightFûe
)

87 : 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kKNN
, 
theD©a
, 
theWeightFûe
)

88 , 
	`fSumOfWeightsS
(0)

89 , 
	`fSumOfWeightsB
(0)

90 , 
	`fModuÀ
(0)

91 , 
	`‚kNN
(0)

92 , 
	`fBÆ™˚Dïth
(0)

93 , 
	`fSˇÀFøc
(0)

94 , 
	`fSigmaFa˘
(0)

95 , 
	`fTrim
(
kFALSE
)

96 , 
	`fU£Kî√l
(
kFALSE
)

97 , 
	`fU£Weight
(
kFALSE
)

98 , 
	`fU£LDA
(
kFALSE
)

99 , 
	$fTªeO±Dïth
(0)

101 
	}
}

106 
	gTMVA
::
MëhodKNN
::~
	$MëhodKNN
()

108 i‡(
fModuÀ
Ë
dñëe
 fModule;

109 
	}
}

124 
	gTMVA
::
MëhodKNN
::
	$De˛¨eO±i⁄s
()

126 
	`De˛¨eO±i⁄Ref
(
‚kNN
 = 20, "nkNN", "Number of k-nearestÇeighbors");

127 
	`De˛¨eO±i⁄Ref
(
fBÆ™˚Dïth
 = 6, "BalanceDepth", "BinaryÅree balance depth");

128 
	`De˛¨eO±i⁄Ref
(
fSˇÀFøc
 = 0.80, "ScaleFrac", "Fraction ofÉvents usedÅo compute variable width");

129 
	`De˛¨eO±i⁄Ref
(
fSigmaFa˘
 = 1.0, "SigmaFact", "Scale factor for sigma in Gaussian kernel");

130 
	`De˛¨eO±i⁄Ref
(
fKî√l
 = "Gaus", "Kernel", "UseÖolynomial (=Poln) or Gaussian (=Gaus) kernel");

131 
	`De˛¨eO±i⁄Ref
(
fTrim
 = 
kFALSE
, "Trim", "UseÉqualÇumber of signalánd backgroundÉvents");

132 
	`De˛¨eO±i⁄Ref
(
fU£Kî√l
 = 
kFALSE
, "UseKernel", "UseÖolynomial kernel weight");

133 
	`De˛¨eO±i⁄Ref
(
fU£Weight
 = 
kTRUE
, "UseWeight", "Use weightÅo count kNNÉvents");

134 
	`De˛¨eO±i⁄Ref
(
fU£LDA
 = 
kFALSE
, "UseLDA", "UseÜocalÜinear discriminant -Éxperimental feature");

135 
	}
}

140 
	gTMVA
::
MëhodKNN
::
	$De˛¨eCom∑tibûôyO±i⁄s
() {

141 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

142 
	`De˛¨eO±i⁄Ref
(
fTªeO±Dïth
 = 6, "TreeOptDepth", "BinaryÅree optimisation depth");

143 
	}
}

148 
	gTMVA
::
MëhodKNN
::
	$Pro˚ssO±i⁄s
()

150 i‡(!(
‚kNN
 > 0)) {

151 
‚kNN
 = 10;

152 
	`Log
(Ë<< 
kWARNING
 << "kNN mu° bê®posôivêöãgî: së kNN = " << 
‚kNN
 << 
Endl
;

154 i‡(
fSˇÀFøc
 < 0.0) {

155 
fSˇÀFøc
 = 0.0;

156 
	`Log
(Ë<< 
kWARNING
 << "SˇÀFø¯ˇ¿nŸ bê√g©ive: së SˇÀFø¯" << 
fSˇÀFøc
 << 
Endl
;

158 i‡(
fSˇÀFøc
 > 1.0) {

159 
fSˇÀFøc
 = 1.0;

161 i‡(!(
fBÆ™˚Dïth
 > 0)) {

162 
fBÆ™˚Dïth
 = 6;

163 
	`Log
(Ë<< 
kWARNING
 << "O±imizêmu° bê®posôivêöãgî: së O±imizê" << 
fBÆ™˚Dïth
 << 
Endl
;

166 
	`Log
(Ë<< 
kVERBOSE


168 << " kNN = \n" << 
‚kNN


169 << " U£Kî√»\n" << 
fU£Kî√l


170 << " SigmaFa˘ = \n" << 
fSigmaFa˘


171 << " SˇÀFø¯\n" << 
fSˇÀFøc


172 << " Kî√»\n" << 
fKî√l


173 << " Trim = \n" << 
fTrim


174 << " O±imizê" << 
fBÆ™˚Dïth
 << 
Endl
;

175 
	}
}

180 
Boﬁ_t
 
	gTMVA
::
MëhodKNN
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

182 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

183 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
Ë 
kTRUE
;

184  
kFALSE
;

185 
	}
}

190 
	gTMVA
::
MëhodKNN
::
	$Inô
()

195 
fModuÀ
 = 
√w
 
kNN
::
	`ModuÀkNN
();

196 
fSumOfWeightsS
 = 0;

197 
fSumOfWeightsB
 = 0;

198 
	}
}

203 
	gTMVA
::
MëhodKNN
::
	$MakeKNN
()

205 i‡(!
fModuÀ
) {

206 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN i†nŸ cª©ed" << 
Endl
;

209 
fModuÀ
->
	`CÀ¨
();

211 
°d
::
°rög
 
›ti⁄
;

212 i‡(
fSˇÀFøc
 > 0.0) {

213 
›ti⁄
 += "metric";

215 i‡(
fTrim
) {

216 
›ti⁄
 += "trim";

219 
	`Log
(Ë<< 
kINFO
 << "Cª©ög kd-åì wôh " << 
fEvít
.
	`size
(Ë<< "Évíts" << 
Endl
;

221 
kNN
::
EvítVec
::
c⁄°_ôî©‹
 
evít
 = 
fEvít
.
	`begö
();Évíà!fEvít.
	`íd
(); ++event) {

222 
fModuÀ
->
	`Add
(*
evít
);

226 
fModuÀ
->
	`Fûl
(
°©ic_ˇ°
<
UI¡_t
>(
fBÆ™˚Dïth
),

227 
°©ic_ˇ°
<
UI¡_t
>(100.0*
fSˇÀFøc
),

228 
›ti⁄
);

229 
	}
}

234 
	gTMVA
::
MëhodKNN
::
	$Tøö
()

236 
	`Log
(Ë<< 
kHEADER
 << "<Tøö> sèπ..." << 
Endl
;

238 i‡(
	`IsN‹mÆi£d
()) {

239 
	`Log
(Ë<< 
kINFO
 << "I≈uàevít†¨ên‹mÆized - sëtög SˇÀFø¯tÿ0" << 
Endl
;

240 
fSˇÀFøc
 = 0.0;

243 i‡(!
fEvít
.
	`em±y
()) {

244 
	`Log
(Ë<< 
kINFO
 << "Eøsög " << 
fEvít
.
	`size
(Ë<< "Öªviou¶y st‹edÉvíts" << 
Endl
;

245 
fEvít
.
	`˛ór
();

247 i‡(
	`GëNV¨übÀs
() < 1)

248 
	`Log
(Ë<< 
kFATAL
 << "MëhodKNN::Tøö(Ë- mism©ched o∏wr⁄gÇumbî o‡evíàv¨übÀs" << 
Endl
;

251 
	`Log
(Ë<< 
kINFO
 << "Ródög " << 
	`GëNEvíts
(Ë<< "Évíts" << 
Endl
;

253 
UI¡_t
 
õvt
 = 0; ievà< 
	`GëNEvíts
(); ++ievt) {

255 c⁄° 
Evít
* 
evt_
 = 
	`GëEvít
(
õvt
);

256 
DoubÀ_t
 
weight
 = 
evt_
->
	`GëWeight
();

259 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
weight
 <= 0) ;

261 
kNN
::
V¨Vec
 
	`vvec
(
	`GëNV¨übÀs
(), 0.0);

262 
UI¡_t
 
iv¨
 = 0; iv¨ < 
evt_
 -> 
	`GëNV¨übÀs
(); ++iv¨Ë
vvec
[iv¨] =Évt_->
	`GëVÆue
(ivar);

264 
Sh‹t_t
 
evít_ty≥
 = 0;

266 i‡(
	`D©aInfo
().
	`IsSig«l
(
evt_
)) {

267 
fSumOfWeightsS
 +
weight
;

268 
evít_ty≥
 = 1;

271 
fSumOfWeightsB
 +
weight
;

272 
evít_ty≥
 = 2;

278 
kNN
::
Evít
 
	`evít_k¬
(
vvec
, 
weight
, 
evít_ty≥
);

279 
evít_k¬
.
	`SëT¨gës
(
evt_
->
	`GëT¨gës
());

280 
fEvít
.
	`push_back
(
evít_k¬
);

283 
	`Log
(Ë<< 
kINFO


284 << "Numbî o‡sig«»evít†" << 
fSumOfWeightsS
 << 
Endl


285 << "Numbî o‡backgroundÉvít†" << 
fSumOfWeightsB
 << 
Endl
;

288 
	`MakeKNN
();

290 
	`ExôFromTøöög
();

291 
	}
}

296 
DoubÀ_t
 
	gTMVA
::
MëhodKNN
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

299 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

304 c⁄° 
Evít
 *
ev
 = 
	`GëEvít
();

305 c⁄° 
I¡_t
 
nv¨
 = 
	`GëNV¨übÀs
();

306 c⁄° 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

307 c⁄° 
UI¡_t
 
k¬
 = 
°©ic_ˇ°
<UI¡_t>(
‚kNN
);

309 
kNN
::
V¨Vec
 
	`vvec
(
°©ic_ˇ°
<
UI¡_t
>(
nv¨
), 0.0);

311 
I¡_t
 
iv¨
 = 0; iv¨ < 
nv¨
; ++ivar) {

312 
vvec
[
iv¨
] = 
ev
->
	`GëVÆue
(ivar);

318 c⁄° 
kNN
::
Evít
 
	`evít_k¬
(
vvec
, 
weight
, 3);

319 
fModuÀ
->
	`Föd
(
evít_k¬
, 
k¬
 + 2);

321 c⁄° 
kNN
::
Li°
 &
æi°
 = 
fModuÀ
->
	`GëkNNLi°
();

322 i‡(
æi°
.
	`size
(Ë!
k¬
 + 2) {

323 
	`Log
(Ë<< 
kFATAL
 << "kNNÑesu…Üi° i†em±y" << 
Endl
;

327 i‡(
fU£LDA
Ë 
MëhodKNN
::
	`gëLDAVÆue
(
æi°
, 
evít_k¬
);

332 
Boﬁ_t
 
u£_gaus
 = 
Ál£
, 
u£_pﬁn
 = false;

333 i‡(
fU£Kî√l
) {

334 i‡(
fKî√l
 ="Gaus"Ë
u£_gaus
 = 
åue
;

335 i‡(
fKî√l
 ="Pﬁn"Ë
u£_pﬁn
 = 
åue
;

341 
DoubÀ_t
 
kødius
 = -1.0;

342 i‡(
u£_pﬁn
) {

343 
kødius
 = 
MëhodKNN
::
	`gëKî√lRadius
(
æi°
);

345 i‡(!(
kødius
 > 0.0)) {

346 
	`Log
(Ë<< 
kFATAL
 << "kNNÑadiu†i†nŸÖosôive" << 
Endl
;

350 
kødius
 = 1.0/
TM©h
::
	`Sqπ
(kradius);

356 
°d
::
ve˘‹
<
DoubÀ_t
> 
rms_vec
;

357 i‡(
u£_gaus
) {

358 
rms_vec
 = 
TMVA
::
MëhodKNN
::
	`gëRMS
(
æi°
, 
evít_k¬
);

360 i‡(
rms_vec
.
	`em±y
(Ë||Ñms_vec.
	`size
(Ë!
evít_k¬
.
	`GëNV¨
()) {

361 
	`Log
(Ë<< 
kFATAL
 << "FaûedÅÿcompuã RMS ve˘‹" << 
Endl
;

366 
UI¡_t
 
cou¡_Æl
 = 0;

367 
DoubÀ_t
 
weight_Æl
 = 0, 
weight_sig
 = 0, 
weight_bac
 = 0;

369 
kNN
::
Li°
::
c⁄°_ôî©‹
 
lô
 = 
æi°
.
	`begö
();Üô !æi°.
	`íd
(); ++lit) {

372 c⁄° 
kNN
::
Node
<kNN::
Evít
> &
node
 = *(
lô
->
fú°
);

376 i‡(
lô
->
£c⁄d
 < 0.0) {

377 
	`Log
(Ë<< 
kFATAL
 << "AÇeighb‹ ha†√g©ivêdi°™˚ÅÿquîyÉvít" << 
Endl
;

379 i‡(!(
lô
->
£c⁄d
 > 0.0)) {

380 
	`Log
(Ë<< 
kVERBOSE
 << "AÇeighb‹ ha†zîÿdi°™˚ÅÿquîyÉvít" << 
Endl
;

384 
DoubÀ_t
 
evweight
 = 
node
.
	`GëWeight
();

385 i‡(
u£_gaus
Ë
evweight
 *
MëhodKNN
::
	`GausKî√l
(
evít_k¬
, 
node
.
	`GëEvít
(), 
rms_vec
);

386 i‡(
u£_pﬁn
Ë
evweight
 *
MëhodKNN
::
	`PﬁnKî√l
(
TM©h
::
	`Sqπ
(
lô
->
£c⁄d
)*
kødius
);

388 i‡(
fU£Weight
Ë
weight_Æl
 +
evweight
;

389 ++
weight_Æl
;

391 i‡(
node
.
	`GëEvít
().
	`GëTy≥
() == 1) {

392 i‡(
fU£Weight
Ë
weight_sig
 +
evweight
;

393 ++
weight_sig
;

395 i‡(
node
.
	`GëEvít
().
	`GëTy≥
() == 2) {

396 i‡(
fU£Weight
Ë
weight_bac
 +
evweight
;

397 ++
weight_bac
;

400 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿ty≥ f‹ÅøöögÉvít" << 
Endl
;

404 ++
cou¡_Æl
;

406 i‡(
cou¡_Æl
 >
k¬
) {

412 i‡(!(
cou¡_Æl
 > 0)) {

413 
	`Log
(Ë<< 
kFATAL
 << "SizêkNNÑesu…Üi° i†nŸÖosôive" << 
Endl
;

418 i‡(
cou¡_Æl
 < 
k¬
) {

419 
	`Log
(Ë<< 
kDEBUG
 << "cou¡_Æ»™d kNN havêdif„ª¡ size: " << 
cou¡_Æl
 << " < " << 
k¬
 << 
Endl
;

423 i‡(!(
weight_Æl
 > 0.0)) {

424 
	`Log
(Ë<< 
kFATAL
 << "kNNÑesu…ÅŸÆ weighài†nŸÖosôive" << 
Endl
;

428  
weight_sig
/
weight_Æl
;

429 
	}
}

435 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
MëhodKNN
::
	$GëRegªssi⁄VÆues
()

437 if–
fRegªssi⁄Rëu∫VÆ
 == 0 )

438 
fRegªssi⁄Rëu∫VÆ
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>;

440 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

445 c⁄° 
Evít
 *
evt
 = 
	`GëEvít
();

446 c⁄° 
I¡_t
 
nv¨
 = 
	`GëNV¨übÀs
();

447 c⁄° 
UI¡_t
 
k¬
 = 
°©ic_ˇ°
<UI¡_t>(
‚kNN
);

448 
°d
::
ve˘‹
<> 
ªg_vec
;

450 
kNN
::
V¨Vec
 
	`vvec
(
°©ic_ˇ°
<
UI¡_t
>(
nv¨
), 0.0);

452 
I¡_t
 
iv¨
 = 0; iv¨ < 
nv¨
; ++ivar) {

453 
vvec
[
iv¨
] = 
evt
->
	`GëVÆue
(ivar);

459 c⁄° 
kNN
::
Evít
 
	`evít_k¬
(
vvec
, 
evt
->
	`GëWeight
(), 3);

460 
fModuÀ
->
	`Föd
(
evít_k¬
, 
k¬
 + 2);

462 c⁄° 
kNN
::
Li°
 &
æi°
 = 
fModuÀ
->
	`GëkNNLi°
();

463 i‡(
æi°
.
	`size
(Ë!
k¬
 + 2) {

464 
	`Log
(Ë<< 
kFATAL
 << "kNNÑesu…Üi° i†em±y" << 
Endl
;

465  *
fRegªssi⁄Rëu∫VÆ
;

469 
DoubÀ_t
 
weight_Æl
 = 0;

470 
UI¡_t
 
cou¡_Æl
 = 0;

472 
kNN
::
Li°
::
c⁄°_ôî©‹
 
lô
 = 
æi°
.
	`begö
();Üô !æi°.
	`íd
(); ++lit) {

475 c⁄° 
kNN
::
Node
<kNN::
Evít
> &
node
 = *(
lô
->
fú°
);

476 c⁄° 
kNN
::
V¨Vec
 &
tvec
 = 
node
.
	`GëEvít
().
	`GëT¨gës
();

477 c⁄° 
DoubÀ_t
 
weight
 = 
node
.
	`GëEvít
().
	`GëWeight
();

479 i‡(
ªg_vec
.
	`em±y
()) {

480 
ªg_vec

kNN
::
	`V¨Vec
(
tvec
.
	`size
(), 0.0);

483 
UI¡_t
 
iv¨
 = 0; iv¨ < 
tvec
.
	`size
(); ++ivar) {

484 i‡(
fU£Weight
Ë
ªg_vec
[
iv¨
] +
tvec
[iv¨]*
weight
;

485 
ªg_vec
[
iv¨
] +
tvec
[ivar];

488 i‡(
fU£Weight
Ë
weight_Æl
 +
weight
;

489 ++
weight_Æl
;

492 ++
cou¡_Æl
;

494 i‡(
cou¡_Æl
 =
k¬
) {

500 i‡(!(
weight_Æl
 > 0.0)) {

501 
	`Log
(Ë<< 
kFATAL
 << "TŸÆ weighàsum i†nŸÖosôive: " << 
weight_Æl
 << 
Endl
;

502  *
fRegªssi⁄Rëu∫VÆ
;

505 
UI¡_t
 
iv¨
 = 0; iv¨ < 
ªg_vec
.
	`size
(); ++ivar) {

506 
ªg_vec
[
iv¨
] /
weight_Æl
;

510 
fRegªssi⁄Rëu∫VÆ
->
	`ö£π
(fRegªssi⁄Rëu∫VÆ->
	`begö
(), 
ªg_vec
.begö(),Ñeg_vec.
	`íd
());

512  *
fRegªssi⁄Rëu∫VÆ
;

513 
	}
}

518 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodKNN
::
	$Cª©eR™kög
()

521 
	}
}

526 
	gTMVA
::
MëhodKNN
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const {

527 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

528 
	`gToﬁs
().
	`AddAâr
(
wght
,"NEvíts",
fEvít
.
	`size
());

529 i‡(
fEvít
.
	`size
()>0Ë
	`gToﬁs
().
	`AddAâr
(
wght
,"NV¨",fEvít.
	`begö
()->
	`GëNV¨
());

530 i‡(
fEvít
.
	`size
()>0Ë
	`gToﬁs
().
	`AddAâr
(
wght
,"NTgt",fEvít.
	`begö
()->
	`GëNTgt
());

532 
kNN
::
EvítVec
::
c⁄°_ôî©‹
 
evít
 = 
fEvít
.
	`begö
();Évíà!fEvít.
	`íd
(); ++event) {

534 
°d
::
°rög°ªam
 
	`s
("");

535 
s
.
	`¥ecisi⁄
( 16 );

536 
UI¡_t
 
iv¨
 = 0; iv¨ < 
evít
->
	`GëNV¨
(); ++ivar) {

537 i‡(
iv¨
>0Ë
s
 << " ";

538 
s
 << 
°d
::
scõ¡ific
 << 
evít
->
	`GëV¨
(
iv¨
);

541 
UI¡_t
 
ôgt
 = 0; itgà< 
evít
->
	`GëNTgt
(); ++itgt) {

542 
s
 << " " << 
°d
::
scõ¡ific
 << 
evít
->
	`GëTgt
(
ôgt
);

545 * 
evt
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "Evít", 
s
.
	`°r
().
	`c_°r
());

546 
	`gToﬁs
().
	`AddAâr
(
evt
,"Ty≥", 
evít
->
	`GëTy≥
());

547 
	`gToﬁs
().
	`AddAâr
(
evt
,"Weight", 
evít
->
	`GëWeight
());

549 
	}
}

553 
	gTMVA
::
MëhodKNN
::
	$RódWeightsFromXML
–* 
wghäode
 ) {

554 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

555 
UI¡_t
 
nv¨
 = 0, 
¡gt
 = 0;

556 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NV¨", 
nv¨
 );

557 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NTgt", 
¡gt
 );

560 
Sh‹t_t
 
	`evtTy≥
(0);

561 
DoubÀ_t
 
	`evtWeight
(0);

563 
ch
) {

565 
kNN
::
V¨Vec
 
	`vvec
(
nv¨
, 0);

566 
kNN
::
V¨Vec
 
	`tvec
(
¡gt
, 0);

568 
	`gToﬁs
().
	`RódAâr
–
ch
, "Ty≥", 
evtTy≥
 );

569 
	`gToﬁs
().
	`RódAâr
–
ch
, "Weight", 
evtWeight
 );

570 
°d
::
°rög°ªam
 
	`s
–
	`gToﬁs
().
	`GëC⁄ã¡
(
ch
) );

572 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++)

573 
s
 >> 
vvec
[
iv¨
];

575 
UI¡_t
 
ôgt
=0; itgt<
¡gt
; itgt++)

576 
s
 >> 
tvec
[
ôgt
];

578 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

580 
kNN
::
Evít
 
	`evít_k¬
(
vvec
, 
evtWeight
, 
evtTy≥
, 
tvec
);

581 
fEvít
.
	`push_back
(
evít_k¬
);

585 
	`MakeKNN
();

586 
	}
}

591 
	gTMVA
::
MëhodKNN
::
	$RódWeightsFromSåóm
(
°d
::
i°ªam
& 
is
)

593 
	`Log
(Ë<< 
kINFO
 << "Sèπög RódWeightsFromSåóm(°d::i°ªam& isËfun˘i⁄..." << 
Endl
;

595 i‡(!
fEvít
.
	`em±y
()) {

596 
	`Log
(Ë<< 
kINFO
 << "Eøsög " << 
fEvít
.
	`size
(Ë<< "Öªviou¶y st‹edÉvíts" << 
Endl
;

597 
fEvít
.
	`˛ór
();

600 
UI¡_t
 
nv¨
 = 0;

602 !
is
.
	`eof
()) {

603 
°d
::
°rög
 
löe
;

604 
°d
::
	`gëlöe
(
is
, 
löe
);

606 i‡(
löe
.
	`em±y
(Ë||Üöe.
	`föd
("#"Ë!
°d
::
°rög
::
≈os
) {

610 
UI¡_t
 
cou¡
 = 0;

611 
°d
::
°rög
::
size_ty≥
 
pos
=0;

612  (
pos
=
löe
.
	`föd
(',',pos)Ë!
°d
::
°rög
::
≈os
 ) { 
cou¡
++;Öos++; }

614 i‡(
nv¨
 == 0) {

615 
nv¨
 = 
cou¡
 - 2;

617 i‡(
cou¡
 < 3 || 
nv¨
 != count - 2) {

618 
	`Log
(Ë<< 
kFATAL
 << "Missög comm®dñimëî(s)" << 
Endl
;

622 
I¡_t
 
ty≥
 = -1;

623 
DoubÀ_t
 
weight
 = -1.0;

625 
kNN
::
V¨Vec
 
	`vvec
(
nv¨
, 0.0);

627 
UI¡_t
 
vcou¡
 = 0;

628 
°d
::
°rög
::
size_ty≥
 
¥ev
 = 0;

630 
°d
::
°rög
::
size_ty≥
 
ùos
 = 0; ipo†< 
löe
.
	`size
(); ++ipos) {

631 i‡(
löe
[
ùos
] !',' && ipo†+ 1 !löe.
	`size
()) {

635 i‡(!(
ùos
 > 
¥ev
)) {

636 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄g sub°rögÜimôs" << 
Endl
;

639 
°d
::
°rög
 
v°rög
 = 
löe
.
	`sub°r
(
¥ev
, 
ùos
 -Örev);

640 i‡(
ùos
 + 1 =
löe
.
	`size
()) {

641 
v°rög
 = 
löe
.
	`sub°r
(
¥ev
, 
ùos
 -Örev + 1);

644 i‡(
v°rög
.
	`em±y
()) {

645 
	`Log
(Ë<< 
kFATAL
 << "FaûedÅÿ∑r£ såög" << 
Endl
;

648 i‡(
vcou¡
 == 0) {

651 i‡(
vcou¡
 == 1) {

652 
ty≥
 = 
°d
::
	`©oi
(
v°rög
.
	`c_°r
());

654 i‡(
vcou¡
 == 2) {

655 
weight
 = 
°d
::
	`©of
(
v°rög
.
	`c_°r
());

657 i‡(
vcou¡
 - 3 < 
vvec
.
	`size
()) {

658 
vvec
[
vcou¡
 - 3] = 
°d
::
	`©of
(
v°rög
.
	`c_°r
());

661 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄g v¨übÀ cou¡" << 
Endl
;

664 
¥ev
 = 
ùos
 + 1;

665 ++
vcou¡
;

668 
fEvít
.
	`push_back
(
kNN
::
	`Evít
(
vvec
, 
weight
, 
ty≥
));

671 
	`Log
(Ë<< 
kINFO
 << "Ród " << 
fEvít
.
	`size
(Ë<< "Évít†‰omÅexàfûe" << 
Endl
;

674 
	`MakeKNN
();

675 
	}
}

680 
	gTMVA
::
MëhodKNN
::
	$WrôeWeightsToSåóm
(
TFûe
 &
rf
) const

682 
	`Log
(Ë<< 
kINFO
 << "Sèπög WrôeWeightsToSåóm(TFûê&rfËfun˘i⁄..." << 
Endl
;

684 i‡(
fEvít
.
	`em±y
()) {

685 
	`Log
(Ë<< 
kWARNING
 << "MëhodKNN c⁄èö†nÿevít†" << 
Endl
;

689 
kNN
::
Evít
 *
evít
 = 
√w
 kNN::
	`Evít
();

690 
TTªe
 *
åì
 = 
√w
 
	`TTªe
("knn", "eventÅree");

691 
åì
->
	`SëDúe˘‹y
(0);

692 
åì
->
	`Bønch
("evít", "TMVA::kNN::Evít", &
evít
);

694 
DoubÀ_t
 
size
 = 0.0;

695 
kNN
::
EvítVec
::
c⁄°_ôî©‹
 
ô
 = 
fEvít
.
	`begö
(); ià!fEvít.
	`íd
(); ++it) {

696 (*
evít
Ë(*
ô
);

697 
size
 +
åì
->
	`Fûl
();

701 
rf
.
	`WrôeTObje˘
(
åì
, "knn", "Overwrite");

704 
size
 /= 1048576.0;

706 
	`Log
(Ë<< 
kINFO
 << "WrŸê" << 
size
 << "MBánd " << 
fEvít
.
	`size
()

707 << "Évít†tÿROOT fûe" << 
Endl
;

709 
dñëe
 
åì
;

710 
dñëe
 
evít
;

711 
	}
}

716 
	gTMVA
::
MëhodKNN
::
	$RódWeightsFromSåóm
(
TFûe
 &
rf
)

718 
	`Log
(Ë<< 
kINFO
 << "Sèπög RódWeightsFromSåóm(TFûê&rfËfun˘i⁄..." << 
Endl
;

720 i‡(!
fEvít
.
	`em±y
()) {

721 
	`Log
(Ë<< 
kINFO
 << "Eøsög " << 
fEvít
.
	`size
(Ë<< "Öªviou¶y st‹edÉvíts" << 
Endl
;

722 
fEvít
.
	`˛ór
();

726 
TTªe
 *
åì
 = 
dy«mic_ˇ°
<TTªê*>(
rf
.
	`Gë
("knn"));

727 i‡(!
åì
) {

728 
	`Log
(Ë<< 
kFATAL
 << "FaûedÅÿföd k¬Åªe" << 
Endl
;

732 
kNN
::
Evít
 *
evít
 = 
√w
 kNN::
	`Evít
();

733 
åì
->
	`SëBønchAddªss
("evít", &
evít
);

735 c⁄° 
I¡_t
 
√vít
 = 
åì
->
	`GëE¡rõs
();

737 
DoubÀ_t
 
size
 = 0.0;

738 
I¡_t
 
i
 = 0; i < 
√vít
; ++i) {

739 
size
 +
åì
->
	`GëE¡ry
(
i
);

740 
fEvít
.
	`push_back
(*
evít
);

744 
size
 /= 1048576.0;

746 
	`Log
(Ë<< 
kINFO
 << "Ród " << 
size
 << "MBánd " << 
fEvít
.
	`size
()

747 << "Évít†‰om ROOT fûe" << 
Endl
;

749 
dñëe
 
evít
;

752 
	`MakeKNN
();

753 
	}
}

758 
	gTMVA
::
MëhodKNN
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

760 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

761 
fout
 << "};" << 
°d
::
ídl
;

762 
	}
}

770 
	gTMVA
::
MëhodKNN
::
	$GëHñpMesßge
() const

772 
	`Log
(Ë<< 
Endl
;

773 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

774 
	`Log
(Ë<< 
Endl
;

775 
	`Log
(Ë<< "Thêk-√¨e°Çeighb‹ (k-NNËÆg‹ôhm i†®mu…i-dimísi⁄Æ cœssifiˇti⁄" << 
Endl


776 << "™dÑegªssi⁄álg‹ôhm. Simû¨lyÅÿŸhî TMVAálg‹ôhms, k-NN u£†®£àof" << 
Endl


777 << "åaöögÉvít†f‹ whichá cœssifiˇti⁄ c©eg‹y/ªgªssi⁄Å¨gë i†known. " << 
Endl


778 << "Thêk-NN mëhod com∑ª†®ã°ÉvíàtÿÆ»åaöögÉvít†usögá di°™˚ " << 
Endl


779 << "fun˘i⁄, which i†™ Eu˛idó¿di°™˚ i¿®•a˚ deföed byÅhêöpuàv¨übÀs. "<< 
Endl


780 << "Thêk-NN mëhod,á†im∂emíãd i¿TMVA, u£†®kd-åìálg‹ôhmÅÿ≥rf‹má" << 
Endl


781 << "quick sórch f‹ÅhêkÉvít†wôh sh‹ã° di°™˚Åÿthêã°Évít. Thêmëhod" << 
Endl


782 << "ªtu∫†®‰a˘i⁄ o‡sig«»evít†am⁄gÅhêkÇeighb‹s. Iài†ªcommíded" << 
Endl


783 << "th©á hi°ogøm which st‹e†thêk-NN decisi⁄ v¨übÀ i†bö√d wôh k+1 bös" << 
Endl


784 << "bëwì¿0ánd 1." << 
Endl
;

786 
	`Log
(Ë<< 
Endl
;

787 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bold") << "--- PerformanceÅuning via configuration options: "

788 << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

789 
	`Log
(Ë<< 
Endl
;

790 
	`Log
(Ë<< "Thêk-NN mëhodÉ°im©e†®dísôy o‡sig«»™d backgroundÉvít†öá "<< 
Endl


791 << "√ighb‹hoodároundÅhêã°Évít. Thêmëhodássume†th©Åhêdísôy o‡thê" << 
Endl


792 << "sig«»™d backgroundÉvít†i†unif‹mánd c⁄°™àwôhöÅhê√ighb‹hood. " << 
Endl


793 << "k i†™ádju°abÀÖ¨amëîánd iàdëîmöe†™ávîagêsizêo‡thê" << 
Endl


794 << "√ighb‹hood. SmÆ»k vÆue†÷es†th™ 10Ë¨ê£nsôivêtÿ°©i°iˇ»" << 
Endl


795 << "Êu˘u©i⁄†™dÜ¨gê(gª©îÅh™ 100ËvÆue†mighànŸ sufficõ¡ly c≠tuª " << 
Endl


796 << "loˇ»dif„ªn˚†bëwì¿evít†öÅhêåaöög së. Thê•ìd o‡thêk-NN" << 
Endl


797 << "mëhodálsÿö¸ó£†wôhÜ¨gî vÆue†o‡k. " << 
Endl
;

798 
	`Log
(Ë<< 
Endl
;

799 
	`Log
(Ë<< "Thêk-NN mëhodássign†equÆ weighàtÿÆ»öpuàv¨übÀs. Dif„ª¡ sˇÀ†" << 
Endl


800 << "am⁄gÅhêöpuàv¨übÀ†i†com≥nßãd usög SˇÀFø¯∑ømëî:Åhêöpuà" << 
Endl


801 << "v¨übÀ†¨êsˇÀd sÿth©Åhêwidth†f‹ cíåÆ SˇÀFøc*100%Évít†¨ê" << 
Endl


802 << "equÆám⁄gáŒÅhêöpuàv¨übÀs." << 
Endl
;

804 
	`Log
(Ë<< 
Endl
;

805 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bold") << "--- Additional configuration options: "

806 << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

807 
	`Log
(Ë<< 
Endl
;

808 
	`Log
(Ë<< "Thêmëhod in˛ue†™ o±i⁄Åÿu£á Gaussü¿kî√»tÿsmoŸh ouàthêk-NN" << 
Endl


809 << "ª•⁄£. Thêkî√»ª-weight†evít†usögá di°™˚Åÿthêã°Évít." << 
Endl
;

810 
	}
}

815 
DoubÀ_t
 
	gTMVA
::
MëhodKNN
::
	$PﬁnKî√l
(c⁄° 
DoubÀ_t
 
vÆue
) const

817 c⁄° 
DoubÀ_t
 
avÆue
 = 
TM©h
::
	`Abs
(
vÆue
);

819 i‡(!(
avÆue
 < 1.0)) {

823 c⁄° 
DoubÀ_t
 
¥od
 = 1.0 - 
avÆue
 *ávalue *ávalue;

825  (
¥od
 *Örod *Örod);

826 
	}
}

831 
DoubÀ_t
 
	gTMVA
::
MëhodKNN
::
GausKî√l
(c⁄° 
kNN
::
Evít
 &
evít_k¬
,

832 c⁄° 
kNN
::
Evít
 &
evít
, c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> &
svec
) const

834 i‡(
evít_k¬
.
GëNV¨
(Ë!
evít
.GëNV¨(Ë||Évít_k¬.GëNV¨(Ë!
svec
.
size
()) {

835 
Log
(Ë<< 
kFATAL
 << "Mism©ched ve˘‹†ö Gaussü¿kî√»fun˘i⁄" << 
Endl
;

842 
	gsum_exp
 = 0.0;

844 
	giv¨
 = 0; iv¨ < 
	gevít_k¬
.
GëNV¨
(); ++ivar) {

846 c⁄° 
DoubÀ_t
 
	gdiff_
 = 
evít
.
GëV¨
(
iv¨
Ë- 
evít_k¬
.GetVar(ivar);

847 c⁄° 
DoubÀ_t
 
	gsigm_
 = 
svec
[
iv¨
];

848 i‡(!(
	gsigm_
 > 0.0)) {

849 
Log
(Ë<< 
	gkFATAL
 << "Bad sigm®vÆuê" << 
	gsigm_
 << 
	gEndl
;

853 
	gsum_exp
 +
diff_
*diff_/(2.0*
sigm_
*sigm_);

861  
	g°d
::
exp
(-
sum_exp
);

869 
DoubÀ_t
 
	gTMVA
::
MëhodKNN
::
	$gëKî√lRadius
(c⁄° 
kNN
::
Li°
 &
æi°
) const

871 
DoubÀ_t
 
kødius
 = -1.0;

872 
UI¡_t
 
kcou¡
 = 0;

873 c⁄° 
UI¡_t
 
k¬
 = 
°©ic_ˇ°
<UI¡_t>(
‚kNN
);

875 
kNN
::
Li°
::
c⁄°_ôî©‹
 
lô
 = 
æi°
.
	`begö
();Üô !æi°.
	`íd
(); ++lit)

877 i‡(!(
lô
->
£c⁄d
 > 0.0)) ;

879 i‡(
kødius
 < 
lô
->
£c⁄d
 || kradius < 0.0) kradius =Üit->second;

881 ++
kcou¡
;

882 i‡(
kcou¡
 >
k¬
) ;

885  
kødius
;

886 
	}
}

893 c⁄° 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
MëhodKNN
::
	$gëRMS
(c⁄° 
kNN
::
Li°
 &
æi°
, c⁄° kNN::
Evít
 &
evít_k¬
) const

895 
°d
::
ve˘‹
<
DoubÀ_t
> 
rvec
;

896 
UI¡_t
 
kcou¡
 = 0;

897 c⁄° 
UI¡_t
 
k¬
 = 
°©ic_ˇ°
<UI¡_t>(
‚kNN
);

899 
kNN
::
Li°
::
c⁄°_ôî©‹
 
lô
 = 
æi°
.
	`begö
();Üô !æi°.
	`íd
(); ++lit)

901 i‡(!(
lô
->
£c⁄d
 > 0.0)) ;

903 c⁄° 
kNN
::
Node
<kNN::
Evít
> *
node_
 = 
lô
 -> 
fú°
;

904 c⁄° 
kNN
::
Evít
 &
evít_
 = 
node_
-> 
	`GëEvít
();

906 i‡(
rvec
.
	`em±y
()) {

907 
rvec
.
	`ö£π
‘vec.
	`íd
(), 
evít_
.
	`GëNV¨
(), 0.0);

909 i‡(
rvec
.
	`size
(Ë!
evít_
.
	`GëNV¨
()) {

910 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄gÇumbî o‡v¨übÀs, shouldÇevî h≠≥n!" << 
Endl
;

911 
rvec
.
	`˛ór
();

912  
rvec
;

915 
iv¨
 = 0; iv¨ < 
evít_
.
	`GëNV¨
(); ++ivar) {

916 c⁄° 
DoubÀ_t
 
diff_
 = 
evít_
.
	`GëV¨
(
iv¨
Ë- 
evít_k¬
.GetVar(ivar);

917 
rvec
[
iv¨
] +
diff_
*diff_;

920 ++
kcou¡
;

921 i‡(
kcou¡
 >
k¬
) ;

924 i‡(
kcou¡
 < 1) {

925 
	`Log
(Ë<< 
kFATAL
 << "BadÉvíàkcou¡ = " << 
kcou¡
 << 
Endl
;

926 
rvec
.
	`˛ór
();

927  
rvec
;

930 
iv¨
 = 0; iv¨ < 
rvec
.
	`size
(); ++ivar) {

931 i‡(!(
rvec
[
iv¨
] > 0.0)) {

932 
	`Log
(Ë<< 
kFATAL
 << "Bad RMS vÆuê" << 
rvec
[
iv¨
] << 
Endl
;

933 
rvec
.
	`˛ór
();

934  
rvec
;

937 
rvec
[
iv¨
] = 
°d
::
	`abs
(
fSigmaFa˘
)*°d::
	`sqπ
‘vec[iv¨]/
kcou¡
);

940  
rvec
;

941 
	}
}

945 
DoubÀ_t
 
	gTMVA
::
MëhodKNN
::
	$gëLDAVÆue
(c⁄° 
kNN
::
Li°
 &
æi°
, c⁄° kNN::
Evít
 &
evít_k¬
)

947 
LDAEvíts
 
sig_vec
, 
bac_vec
;

949 
kNN
::
Li°
::
c⁄°_ôî©‹
 
lô
 = 
æi°
.
	`begö
();Üô !æi°.
	`íd
(); ++lit) {

952 c⁄° 
kNN
::
Node
<kNN::
Evít
> &
node
 = *(
lô
->
fú°
);

953 c⁄° 
kNN
::
V¨Vec
 &
tvec
 = 
node
.
	`GëEvít
().
	`GëV¨s
();

955 i‡(
node
.
	`GëEvít
().
	`GëTy≥
() == 1) {

956 
sig_vec
.
	`push_back
(
tvec
);

958 i‡(
node
.
	`GëEvít
().
	`GëTy≥
() == 2) {

959 
bac_vec
.
	`push_back
(
tvec
);

962 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿ty≥ f‹ÅøöögÉvít" << 
Endl
;

966 
fLDA
.
	`Inôülize
(
sig_vec
, 
bac_vec
);

968  
fLDA
.
	`GëProb
(
evít_k¬
.
	`GëV¨s
(), 1);

969 
	}
}

	@src/MethodLD.cxx

38 
	~"TMVA/MëhodLD.h
"

40 
	~"TMVA/CœssifõrFa˘‹y.h
"

41 
	~"TMVA/C⁄figuøbÀ.h
"

42 
	~"TMVA/D©aSë.h
"

43 
	~"TMVA/D©aSëInfo.h
"

44 
	~"TMVA/IMëhod.h
"

45 
	~"TMVA/MëhodBa£.h
"

46 
	~"TMVA/MsgLoggî.h
"

47 
	~"TMVA/PDF.h
"

48 
	~"TMVA/R™kög.h
"

49 
	~"TMVA/Toﬁs.h
"

50 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

51 
	~"TMVA/Ty≥s.h
"

52 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

54 
	~"Rio°ªam.h
"

55 
	~"TM©h.h
"

56 
	~"TM©rix.h
"

57 
	~"TM©rixD.h
"

58 
	~"TLi°.h
"

60 
	~<iom™ù
>

62 
usög
 
	g°d
::
ve˘‹
;

64 
	$REGISTER_METHOD
(
LD
)

66 
	`CœssImp
(
TMVA
::
MëhodLD
);

71 
TMVA
::
MëhodLD
::
	$MëhodLD
–c⁄° 
TSåög
& 
jobName
,

72 c⁄° 
TSåög
& 
mëhodTôÀ
,

73 
D©aSëInfo
& 
dsi
,

74 c⁄° 
TSåög
& 
theO±i⁄
 ) :

75 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kLD
, 
mëhodTôÀ
, 
dsi
, 
theO±i⁄
),

76 
	`fNRegOut
 ( 0 ),

77 
	`fSumM©x
 ( 0 ),

78 
	`fSumVÆM©x
( 0 ),

79 
	`fC€ffM©x
 ( 0 ),

80 
	$fLDC€ff
 ( 0 )

82 
	}
}

87 
	gTMVA
::
MëhodLD
::
	$MëhodLD
–
D©aSëInfo
& 
theD©a
, c⁄° 
TSåög
& 
theWeightFûe
)

88 : 
	`MëhodBa£
–
Ty≥s
::
kLD
, 
theD©a
, 
theWeightFûe
),

89 
	`fNRegOut
 ( 0 ),

90 
	`fSumM©x
 ( 0 ),

91 
	`fSumVÆM©x
( 0 ),

92 
	`fC€ffM©x
 ( 0 ),

93 
	$fLDC€ff
 ( 0 )

95 
	}
}

100 
	gTMVA
::
MëhodLD
::
	$Inô
( )

102 if(
	`D©aInfo
().
	`GëNT¨gës
()!=0Ë
fNRegOut
 = DataInfo().GetNTargets();

103 
fNRegOut
 = 1;

105 
fLDC€ff
 = 
√w
 
ve˘‹
< ve˘‹< 
DoubÀ_t
 >* >(
fNRegOut
);

106 
I¡_t
 
iout
 = 0; iout<
fNRegOut
; iout++){

107 (*
fLDC€ff
)[
iout
] = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
	`GëNv¨
()+1 );

111 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

112 
	}
}

117 
	gTMVA
::
MëhodLD
::~
	$MëhodLD
( )

119 i‡(
fSumM©x
Ë{ 
dñëe
 fSumMatx; fSumMatx = 0; }

120 i‡(
fSumVÆM©x
Ë{ 
dñëe
 fSumValMatx; fSumValMatx = 0; }

121 i‡(
fC€ffM©x
Ë{ 
dñëe
 fCoeffMatx; fCoeffMatx = 0; }

122 i‡(
fLDC€ff
) {

123 
ve˘‹
< ve˘‹< 
DoubÀ_t
 >* >::
ôî©‹
 
vi
=
fLDC€ff
->
	`begö
(); vi!=fLDC€ff->
	`íd
(); vi++){

124 i‡(*
vi
Ë{ 
dñëe
 *vi; *vi = 0; }

126 
dñëe
 
fLDC€ff
; fLDCoeff = 0;

128 
	}
}

133 
Boﬁ_t
 
	gTMVA
::
MëhodLD
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UI¡_à
numbîT¨gës
 )

135 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

136 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
 && 
numbîT¨gës
 == 1) {

137 
	`Log
(Ë<< "ªgªssi⁄ wôh " << 
numbîT¨gës
 << "Åargets.";

138  
kTRUE
;

140  
kFALSE
;

141 
	}
}

147 
	gTMVA
::
MëhodLD
::
	$Tøö
( )

149 
	`GëSum
();

152 
	`GëSumVÆ
();

155 
	`GëLDC€ff
();

158 
	`PrötC€fficõ¡s
();

160 
	`ExôFromTøöög
();

161 
	}
}

166 
DoubÀ_t
 
	gTMVA
::
MëhodLD
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

168 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

170 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
ËfRegªssi⁄Rëu∫VÆ = 
√w
 
ve˘‹
< 
Flﬂt_t
 >();

171 
fRegªssi⁄Rëu∫VÆ
->
	`ªsize
–
fNRegOut
 );

173 
I¡_t
 
iout
 = 0; iout<
fNRegOut
; iout++) {

174 (*
fRegªssi⁄Rëu∫VÆ
)[
iout
] = (*(*
fLDC€ff
)[iout])[0] ;

176 
ic€ff
=0;

177 
°d
::
ve˘‹
<
Flﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
ev
->
	`GëVÆues
().
	`begö
();ô!Ûv->GëVÆues().
	`íd
();++it){

178 (*
fRegªssi⁄Rëu∫VÆ
)[
iout
] +(*(*
fLDC€ff
)[iout])[++
ic€ff
] * (*
ô
);

183 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

185  (*
fRegªssi⁄Rëu∫VÆ
)[0];

186 
	}
}

191 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
MëhodLD
::
	$GëRegªssi⁄VÆues
()

193 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

195 i‡(
fRegªssi⁄Rëu∫VÆ
 =
NULL
ËfRegªssi⁄Rëu∫VÆ = 
√w
 
ve˘‹
< 
Flﬂt_t
 >();

196 
fRegªssi⁄Rëu∫VÆ
->
	`ªsize
–
fNRegOut
 );

198 
I¡_t
 
iout
 = 0; iout<
fNRegOut
; iout++) {

199 (*
fRegªssi⁄Rëu∫VÆ
)[
iout
] = (*(*
fLDC€ff
)[iout])[0] ;

201 
ic€ff
 = 0;

202 
°d
::
ve˘‹
<
Flﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
ev
->
	`GëVÆues
().
	`begö
();ô!Ûv->GëVÆues().
	`íd
();++it){

203 (*
fRegªssi⁄Rëu∫VÆ
)[
iout
] +(*(*
fLDC€ff
)[iout])[++
ic€ff
] * (*
ô
);

208 
Evít
* 
evT
 = 
√w
 
	`Evít
(*
ev
);

209 
I¡_t
 
iout
 = 0; iout<
fNRegOut
; iout++Ë
evT
->
	`SëT¨gë
(iout,(*
fRegªssi⁄Rëu∫VÆ
)[iout]);

211 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

212 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

213 
I¡_t
 
iout
 = 0; iout<
fNRegOut
; iout++Ë
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
evT2
->
	`GëT¨gë
(iout));

215 
dñëe
 
evT
;

216  (*
fRegªssi⁄Rëu∫VÆ
);

217 
	}
}

222 
	gTMVA
::
MëhodLD
::
	$InôM©ri˚s
( )

224 
fSumM©x
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
()+1, GetNvar()+1 );

225 
fSumVÆM©x
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
()+1, 
fNRegOut
 );

226 
fC€ffM©x
 = 
√w
 
	`TM©rixD
–
	`GëNv¨
()+1, 
fNRegOut
 );

228 
	}
}

234 
	gTMVA
::
MëhodLD
::
	$GëSum
( )

236 c⁄° 
UI¡_t
 
nv¨
 = 
	`D©aInfo
().
	`GëNV¨übÀs
();

238 
UI¡_t
 
iv¨
 = 0; iv¨<=
nv¨
; ivar++){

239 
UI¡_t
 
jv¨
 = 0; jv¨<=
nv¨
; jv¨++Ë(*
fSumM©x
)–
iv¨
, jvar ) = 0;

243 
L⁄g64_t
 
√vts
 = 
	`D©a
()->
	`GëNEvíts
();

244 
I¡_t
 
õvt
=0; ievt<
√vts
; ievt++) {

245 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
õvt
);

246 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

248 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
weight
 <= 0) ;

251 (*
fSumM©x
)–0, 0 ) +
weight
;

254 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

255 (*
fSumM©x
)–
iv¨
+1, 0 ) +
ev
->
	`GëVÆue
–iv¨ ) * 
weight
;

256 (*
fSumM©x
)–0, 
iv¨
+1 ) +
ev
->
	`GëVÆue
–iv¨ ) * 
weight
;

260 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++){

261 
UI¡_t
 
jv¨
=0; jv¨<
nv¨
; jvar++){

262 (*
fSumM©x
)–
iv¨
+1, 
jv¨
+1 ) +
ev
->
	`GëVÆue
–iv¨ ) *Év->GëVÆue–jv¨ ) * 
weight
;

266 
	}
}

271 
	gTMVA
::
MëhodLD
::
	$GëSumVÆ
( )

273 c⁄° 
UI¡_t
 
nv¨
 = 
	`D©aInfo
().
	`GëNV¨übÀs
();

275 
I¡_t
 
iv¨
 = 0; iv¨<
fNRegOut
; ivar++){

276 
UI¡_t
 
jv¨
 = 0; jv¨<=
nv¨
; jvar++){

277 (*
fSumVÆM©x
)(
jv¨
,
iv¨
) = 0;

282 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

285 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

286 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

289 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
weight
 <= 0) ;

291 
I¡_t
 
iv¨
=0; iv¨<
fNRegOut
; ivar++) {

293 
DoubÀ_t
 
vÆ
 = 
weight
;

295 i‡(!
	`DoRegªssi⁄
()){

296 
vÆ
 *
	`D©aInfo
().
	`IsSig«l
(
ev
);

298 
vÆ
 *
ev
->
	`GëT¨gë
–
iv¨
 );

300 (*
fSumVÆM©x
)–0,
iv¨
 ) +
vÆ
;

301 
UI¡_t
 
jv¨
=0; jv¨<
nv¨
; jvar++) {

302 (*
fSumVÆM©x
)(
jv¨
+1,
iv¨
 ) +
ev
->
	`GëVÆue
(jv¨Ë* 
vÆ
;

306 
	}
}

311 
	gTMVA
::
MëhodLD
::
	$GëLDC€ff
( )

313 c⁄° 
UI¡_t
 
nv¨
 = 
	`D©aInfo
().
	`GëNV¨übÀs
();

315 
I¡_t
 
iv¨
 = 0; iv¨<
fNRegOut
; ivar++){

316 
TM©rixD
 
	`övSum
–*
fSumM©x
 );

317 i‡–
TM©h
::
	`Abs
(
övSum
.
	`Dëîmö™t
()) < 10E-24 ) {

318 
	`Log
(Ë<< 
kWARNING
 << "<GetCoeff> matrix isálmost singular with determinant="

319 << 
TM©h
::
	`Abs
(
övSum
.
	`Dëîmö™t
())

321 << 
Endl
;

323 i‡–
TM©h
::
	`Abs
(
övSum
.
	`Dëîmö™t
()) < 10E-120 ) {

324 
	`Log
(Ë<< 
kFATAL
 << "<GetCoeff> matrix is singular with determinant="

325 << 
TM©h
::
	`Abs
(
övSum
.
	`Dëîmö™t
())

327 << 
Endl
;

329 
övSum
.
	`Invît
();

331 
fC€ffM©x
 = 
√w
 
	`TM©rixD
–
övSum
 * (*
fSumVÆM©x
));

332 
UI¡_t
 
jv¨
 = 0; jv¨<
nv¨
+1; jvar++) {

333 (*(*
fLDC€ff
)[
iv¨
])[
jv¨
] = (*
fC€ffM©x
)(jvar, ivar );

335 i‡(!
	`DoRegªssi⁄
()) {

336 (*(*
fLDC€ff
)[
iv¨
])[0]=0.0;

337 
UI¡_t
 
jv¨
 = 1; jv¨<
nv¨
+1; jvar++){

338 (*(*
fLDC€ff
)[
iv¨
])[0]+=(*
fC€ffM©x
)(
jv¨
,iv¨)*(*
fSumM©x
)(0,jvar)/(*fSumMatx)( 0, 0 );

340 (*(*
fLDC€ff
)[
iv¨
])[0]/=-2.0;

344 
	}
}

349 
	gTMVA
::
MëhodLD
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

351 
I¡_t
 
iout
=0; iout<
fNRegOut
; iout++){

352 
UI¡_t
 
ic€ff
=0; ic€ff<
	`GëNv¨
()+1; icoeff++){

353 
i°r
 >> (*(*
fLDC€ff
)[
iout
])[
ic€ff
];

356 
	}
}

362 
	gTMVA
::
MëhodLD
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

364 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

365 
	`gToﬁs
().
	`AddAâr
–
wght
, "NOut", 
fNRegOut
 );

366 
	`gToﬁs
().
	`AddAâr
–
wght
, "NC€ff", 
	`GëNv¨
()+1 );

367 
I¡_t
 
iout
=0; iout<
fNRegOut
; iout++) {

368 
UI¡_t
 
ic€ff
=0; ic€ff<
	`GëNv¨
()+1; icoeff++) {

369 * 
c€ffxml
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Coefficient" );

370 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "IndexOut", 
iout
 );

371 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "IndexC€ff", 
ic€ff
 );

372 
	`gToﬁs
().
	`AddAâr
–
c€ffxml
, "VÆue", (*(*
fLDC€ff
)[
iout
])[
ic€ff
] );

375 
	}
}

380 
	gTMVA
::
MëhodLD
::
	$RódWeightsFromXML
–* 
wghäode
 )

382 
UI¡_t
 
nc€ff
;

383 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NOut", 
fNRegOut
 );

384 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NC€ff", 
nc€ff
 );

387 i‡(
nc€ff
 !
	`GëNv¨
()+1Ë
	`Log
(Ë<< 
kFATAL
 << "Mismatch inÇumber of output variables/coefficients: "

388 << 
nc€ff
 << " !" << 
	`GëNv¨
()+1 << 
Endl
;

391 i‡(
fLDC€ff
) {

392 
ve˘‹
< ve˘‹< 
DoubÀ_t
 >* >::
ôî©‹
 
vi
=
fLDC€ff
->
	`begö
(); vi!=fLDC€ff->
	`íd
(); vi++){

393 i‡(*
vi
Ë{ 
dñëe
 *vi; *vi = 0; }

395 
dñëe
 
fLDC€ff
; fLDCoeff = 0;

397 
fLDC€ff
 = 
√w
 
ve˘‹
< ve˘‹< 
DoubÀ_t
 >* >(
fNRegOut
);

398 
I¡_t
 
iv¨
 = 0; iv¨<
fNRegOut
; iv¨++Ë(*
fLDC€ff
)[iv¨] = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
nc€ff
 );

400 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

401 
DoubÀ_t
 
c€ff
;

402 
I¡_t
 
iout
, 
ic€ff
;

403 
ch
) {

404 
	`gToﬁs
().
	`RódAâr
–
ch
, "IndexOut", 
iout
 );

405 
	`gToﬁs
().
	`RódAâr
–
ch
, "IndexC€ff", 
ic€ff
 );

406 
	`gToﬁs
().
	`RódAâr
–
ch
, "VÆue", 
c€ff
 );

408 (*(*
fLDC€ff
)[
iout
])[
ic€ff
] = 
c€ff
;

410 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

412 
	}
}

417 
	gTMVA
::
MëhodLD
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

419 
fout
 << " std::ve˘‹<doubÀ> fLDC€fficõ¡s;" << 
°d
::
ídl
;

420 
fout
 << "};" << 
°d
::
ídl
;

421 
fout
 << "" << 
°d
::
ídl
;

422 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

423 
fout
 << "{" << 
°d
::
ídl
;

424 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
()+1; ivar++) {

425 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

426 
fout
 << " fLDCoefficients.push_back( "

427 << 
°d
::
	`£çªcisi⁄
(12Ë<< (*(*
fLDC€ff
)[0])[
iv¨
]

428 << 
°d
::
	`£çªcisi⁄
(
dp
Ë<< " );" << std::
ídl
;

430 
fout
 << 
°d
::
ídl
;

431 
fout
 << " // s™ôy check" << 
°d
::
ídl
;

432 
fout
 << " i‡(fLDC€fficõ¡s.size(Ë!fNv¨s+1Ë{" << 
°d
::
ídl
;

433 
fout
 << " std::couà<< \"ProbÀm i¿˛as†\\\"\" << fCœssNamê<< \"\\\"::Inôülize: mism©ch i¿numbî o‡öpuàvÆues\"" << 
°d
::
ídl
;

434 
fout
 << " << fLDC€fficõ¡s.size(Ë<< \" !\" << fNv¨s+1 << std::ídl;" << 
°d
::
ídl
;

435 
fout
 << " fSètusIsCÀ™ = fÆ£;" << 
°d
::
ídl
;

436 
fout
 << " } " << 
°d
::
ídl
;

437 
fout
 << "}" << 
°d
::
ídl
;

438 
fout
 << 
°d
::
ídl
;

439 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

440 
fout
 << "{" << 
°d
::
ídl
;

441 
fout
 << " doubÀÑëvÆ = fLDC€fficõ¡s[0];" << 
°d
::
ídl
;

442 
fout
 << " f‹ (size_àiv¨ = 1; iv¨ < fNv¨s+1; iv¨++Ë{" << 
°d
::
ídl
;

443 
fout
 << "ÑëvÆ +fLDC€fficõ¡s[iv¨]*öputVÆues[iv¨-1];" << 
°d
::
ídl
;

444 
fout
 << " }" << 
°d
::
ídl
;

445 
fout
 << 
°d
::
ídl
;

446 
fout
 << "Ñëu∫ÑëvÆ;" << 
°d
::
ídl
;

447 
fout
 << "}" << 
°d
::
ídl
;

448 
fout
 << 
°d
::
ídl
;

449 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

450 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

451 
fout
 << "{" << 
°d
::
ídl
;

452 
fout
 << " // cÀ¨ c€fficõ¡s" << 
°d
::
ídl
;

453 
fout
 << " fLDC€fficõ¡s.˛ór(); " << 
°d
::
ídl
;

454 
fout
 << "}" << 
°d
::
ídl
;

455 
	}
}

459 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodLD
::
	$Cª©eR™kög
()

462 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Discr.Öower" );

464 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

465 
fR™kög
->
	`AddR™k
–
	`R™k
–
	`GëI≈utLabñ
(
iv¨
), 
TM©h
::
	`Abs
((* (*
fLDC€ff
)[0])[ivar+1] )) );

468  
fR™kög
;

469 
	}
}

474 
	gTMVA
::
MëhodLD
::
	$De˛¨eO±i⁄s
()

476 
	`AddPªDefVÆ
(
	`TSåög
("LD"));

477 
	}
}

482 
	gTMVA
::
MëhodLD
::
	$Pro˚ssO±i⁄s
()

484 i‡(
	`HasTøöögTªe
()Ë
	`InôM©ri˚s
();

485 
	}
}

490 
	gTMVA
::
MëhodLD
::
	$PrötC€fficõ¡s
( )

492 
	`Log
(Ë<< 
kHEADER
 << "Resu…†f‹ LD c€fficõ¡s:" << 
Endl
;

494 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() != 0) {

495 
	`Log
(Ë<< 
kINFO
 << "NOTE: Thêc€fficõ¡†mu° bê≠∂õdÅÿTRANFORMED v¨übÀs" << 
Endl
;

496 
	`Log
(Ë<< 
kINFO
 << " Li° o‡thêå™sf‹m©i⁄: " << 
Endl
;

497 
TLi°Iãr
 
	`åIt
(&
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
());

498 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
() ) {

499 
	`Log
(Ë<< 
kINFO
 << " -- " << 
åf
->
	`GëName
(Ë<< 
Endl
;

502 
°d
::
ve˘‹
<
TSåög
> 
v¨s
;

503 
°d
::
ve˘‹
<
DoubÀ_t
> 
c€ffs
;

504 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

505 
v¨s
 .
	`push_back
–
	`GëI≈utLabñ
(
iv¨
) );

506 
c€ffs
.
	`push_back
–(* (*
fLDC€ff
)[0])[
iv¨
+1] );

508 
v¨s
 .
	`push_back
( "(offset)" );

509 
c€ffs
.
	`push_back
((* (*
fLDC€ff
)[0])[0] );

510 
TMVA
::
	`gToﬁs
().
	`F‹m©ãdOuçut
–
c€ffs
, 
v¨s
, "V¨übÀ" , "C€fficõ¡", 
	`Log
() );

511 i‡(
	`IsN‹mÆi£d
()) {

512 
	`Log
(Ë<< 
kINFO
 << "NOTE: You havêcho£¿tÿu£Åhê\"N‹mÆi£\" bookög o±i⁄. Hí˚,Åhe" << 
Endl
;

513 
	`Log
(Ë<< 
kINFO
 << " c€fficõ¡†mu° bê≠∂õdÅÿNORMALISED ('Ëv¨übÀ†a†fﬁlows:" << 
Endl
;

514 
I¡_t
 
maxL
 = 0;

515 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ëi‡(
	`GëI≈utLabñ
(iv¨).
	`Lígth
(Ë> 
maxL
) maxL = GetInputLabel(ivar).Length();

518 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

519 
	`Log
(Ë<< 
kINFO


520 << 
°d
::
	`£tw
(
maxL
+9Ë<< 
	`TSåög
("["Ë+ 
	`GëI≈utLabñ
(
iv¨
) + "]' = 2*("

521 << 
°d
::
	`£tw
(
maxL
+2Ë<< 
	`TSåög
("["Ë+ 
	`GëI≈utLabñ
(
iv¨
) + "]"

522 << 
°d
::
	`£tw
(3Ë<< (
	`GëXmö
(
iv¨
) > 0 ? " - " : " + ")

523 << 
°d
::
	`£tw
(6Ë<< 
TM©h
::
	`Abs
(
	`GëXmö
(
iv¨
)) << std::setw(3) << ")/"

524 << 
°d
::
	`£tw
(6Ë<< (
	`GëXmax
(
iv¨
Ë- 
	`GëXmö
(ivar) )

525 << 
°d
::
	`£tw
(3) << " - 1"

526 << 
Endl
;

528 
	`Log
(Ë<< 
kINFO
 << "ThêTMVA Ródî wû»¥›îlyáccou¡ f‹Åhi†n‹mÆißti⁄, buài‡the" << 
Endl
;

529 
	`Log
(Ë<< 
kINFO
 << "LD cœssifõ∏i†≠∂õd outsidêthêRódî,Åhêå™sf‹m©i⁄ mu° be" << 
Endl
;

530 
	`Log
(Ë<< 
kINFO
 << "im∂emíãd -- o∏thê\"N‹mÆi£\" o±i⁄ i†ªmovedánd LDÑëøöed." << 
Endl
;

531 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

533 
	}
}

541 
	gTMVA
::
MëhodLD
::
	$GëHñpMesßge
() const

543 
	`Log
(Ë<< 
Endl
;

544 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

545 
	`Log
(Ë<< 
Endl
;

546 
	`Log
(Ë<< "Löó∏dis¸imö™t†£À˘Évít†by di°öguishögÅhêmó¿" << 
Endl
;

547 
	`Log
(Ë<< "vÆue†o‡thêsig«»™d background di°ributi⁄†öáÅøns- " << 
Endl
;

548 
	`Log
(Ë<< "f‹med v¨übÀ s∑˚ whîêlöó∏c‹ªœti⁄†¨êªmoved." << 
Endl
;

549 
	`Log
(Ë<< "ThêLD im∂emíèti⁄ hîêi†equivÆíàtÿthê\"Fishî\" dis¸imö™t" << 
Endl
;

550 
	`Log
(Ë<< "f‹ cœssifiˇti⁄, buàÆsÿ¥ovide†löó∏ªgªssi⁄." << 
Endl
;

551 
	`Log
(Ë<< 
Endl
;

552 
	`Log
(Ë<< " (M‹ê¥eci£ly:Åhê\"löó∏dis¸imö©‹\" dëîmöes" << 
Endl
;

553 
	`Log
(Ë<< "á¿axi†öÅhê(c‹ªœãdËhy≥r•a˚ o‡thêöpuà" << 
Endl
;

554 
	`Log
(Ë<< " v¨übÀ†suchÅh©, whíÖroje˘ögÅhêouçuà˛as£†" << 
Endl
;

555 
	`Log
(Ë<< " (sig«»™d backgroundËup⁄Åhi†axis,ÅheyáªÖushed " << 
Endl
;

556 
	`Log
(Ë<< "á†Á∏a†possibÀáway fromÉach othî, whûêevíts" << 
Endl
;

557 
	`Log
(Ë<< " o‡®ßmê˛as†¨êc⁄föed i¿®˛o£ vicöôy. Thê " << 
Endl
;

558 
	`Log
(Ë<< "ÜöórôyÖr›îty o‡thi†˛assifõ∏i†ªÊe˘ed i¿thê" << 
Endl
;

559 
	`Log
(Ë<< " mëri¯wôh which \"Á∏≠¨t\"ánd \"˛o£ vicöôy\"áª " << 
Endl
;

560 
	`Log
(Ë<< " dëîmöed:Åhêcov¨ün˚ m©rix o‡thêdis¸imö©ög" << 
Endl
;

561 
	`Log
(Ë<< " v¨übÀ s∑˚.)" << 
Endl
;

562 
	`Log
(Ë<< 
Endl
;

563 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

564 
	`Log
(Ë<< 
Endl
;

565 
	`Log
(Ë<< "O±imÆÖîf‹m™˚ f‹Åhêlöó∏dis¸imö™ài†obèöed f‹ " << 
Endl
;

566 
	`Log
(Ë<< "löóæy c‹ªœãd Gaussün-di°ribuãd v¨übÀs. Any devüti⁄" << 
Endl
;

567 
	`Log
(Ë<< "‰omÅhi†idó»ªdu˚†thêachõvabÀ sï¨©i⁄Öowî. I¿" << 
Endl
;

568 
	`Log
(Ë<< "∑πicuœr,Çÿdis¸imö©i⁄áàÆ»i†achõved f‹á v¨übÀ" << 
Endl
;

569 
	`Log
(Ë<< "th© ha†thêßmêßm∂êmó¿f‹ sig«»™d background,Éví i‡" << 
Endl
;

570 
	`Log
(Ë<< "thêsh≠e†o‡thêdi°ributi⁄†¨êvîy dif„ª¡. Thus,Åhêlöó∏" << 
Endl
;

571 
	`Log
(Ë<< "dis¸imö™ào·í bíefô†‰omá suôabÀÅønsf‹m©i⁄ o‡thê" << 
Endl
;

572 
	`Log
(Ë<< "öpuàv¨übÀs. F‹Éxam∂e, i‡®v¨übÀ x i¿[-1,1] ha†®" << 
Endl
;

573 
	`Log
(Ë<< "®∑øbﬁi¯sig«»di°ributi⁄s,ándá unif‹m background" << 
Endl
;

574 
	`Log
(Ë<< "di°ributi⁄s,Åheú mó¿vÆuêi†zîÿö bŸh ca£s,Üódög " << 
Endl
;

575 
	`Log
(Ë<< "tÿnÿ£∑øti⁄. Thêsim∂êå™sf‹m©i⁄ x -> |x|Ñídî†thi†" << 
Endl
;

576 
	`Log
(Ë<< "v¨übÀÖowîfu»f‹Åhêu£ i¿®löó∏dis¸imö™t." << 
Endl
;

577 
	`Log
(Ë<< 
Endl
;

578 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

579 
	`Log
(Ë<< 
Endl
;

580 
	`Log
(Ë<< "<N⁄e>" << 
Endl
;

581 
	}
}

	@src/MethodLikelihood.cxx

110 
	~"TMVA/MëhodLikñihood.h
"

112 
	~"TMVA/C⁄figuøbÀ.h
"

113 
	~"TMVA/CœssifõrFa˘‹y.h
"

114 
	~"TMVA/D©aSë.h
"

115 
	~"TMVA/D©aSëInfo.h
"

116 
	~"TMVA/IMëhod.h
"

117 
	~"TMVA/MëhodBa£.h
"

118 
	~"TMVA/MsgLoggî.h
"

119 
	~"TMVA/PDF.h
"

120 
	~"TMVA/R™kög.h
"

121 
	~"TMVA/Toﬁs.h
"

122 
	~"TMVA/Ty≥s.h
"

123 
	~"TMVA/V¨übÀInfo.h
"

125 
	~"TM©rixD.h
"

126 
	~"TVe˘‹.h
"

127 
	~"TM©h.h
"

128 
	~"TObjSåög.h
"

129 
	~"TFûe.h
"

130 
	~"TKey.h
"

131 
	~"TH1.h
"

132 
	~"TCœss.h
"

133 
	~"Rio°ªam.h
"

135 
	~<iom™ù
>

136 
	~<ve˘‹
>

137 
	~<c°dlib
>

139 
	$REGISTER_METHOD
(
Likñihood
)

141 
	`CœssImp
(
TMVA
::
MëhodLikñihood
);

146 
TMVA
::
MëhodLikñihood
::
	$MëhodLikñihood
–c⁄° 
TSåög
& 
jobName
,

147 c⁄° 
TSåög
& 
mëhodTôÀ
,

148 
D©aSëInfo
& 
theD©a
,

149 c⁄° 
TSåög
& 
theO±i⁄
 ) :

150 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kLikñihood
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

151 
	`fEpsû⁄
 ( 1.e3 * 
DBL_MIN
 ),

152 
	`fTønsf‹mLikñihoodOuçut
–
kFALSE
 ),

153 
	`fDr›V¨übÀ
 ( 0 ),

154 
	`fHi°Sig
 ( 0 ),

155 
	`fHi°Bgd
 ( 0 ),

156 
	`fHi°Sig_smoŸh
( 0 ),

157 
	`fHi°Bgd_smoŸh
( 0 ),

158 
	`fDeÁu…PDFLik
 ( 0 ),

159 
	`fPDFSig
 ( 0 ),

160 
	`fPDFBgd
 ( 0 ),

161 
	`fNsmoŸh
 ( 2 ),

162 
	`fNsmoŸhV¨S
 ( 0 ),

163 
	`fNsmoŸhV¨B
 ( 0 ),

164 
	`fAvîageEvtPîBö
( 0 ),

165 
	`fAvîageEvtPîBöV¨S
 (0),

166 
	`fAvîageEvtPîBöV¨B
 (0),

167 
	`fKDEföeFa˘‹
 ( 0 ),

168 
	$fI¡îpﬁ©eSåög
(0)

170 
	}
}

175 
	gTMVA
::
MëhodLikñihood
::
	$MëhodLikñihood
–
D©aSëInfo
& 
theD©a
,

176 c⁄° 
TSåög
& 
theWeightFûe
) :

177 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kLikñihood
, 
theD©a
, 
theWeightFûe
),

178 
	`fEpsû⁄
 ( 1.e3 * 
DBL_MIN
 ),

179 
	`fTønsf‹mLikñihoodOuçut
–
kFALSE
 ),

180 
	`fDr›V¨übÀ
 ( 0 ),

181 
	`fHi°Sig
 ( 0 ),

182 
	`fHi°Bgd
 ( 0 ),

183 
	`fHi°Sig_smoŸh
( 0 ),

184 
	`fHi°Bgd_smoŸh
( 0 ),

185 
	`fDeÁu…PDFLik
 ( 0 ),

186 
	`fPDFSig
 ( 0 ),

187 
	`fPDFBgd
 ( 0 ),

188 
	`fNsmoŸh
 ( 2 ),

189 
	`fNsmoŸhV¨S
 ( 0 ),

190 
	`fNsmoŸhV¨B
 ( 0 ),

191 
	`fAvîageEvtPîBö
( 0 ),

192 
	`fAvîageEvtPîBöV¨S
 (0),

193 
	`fAvîageEvtPîBöV¨B
 (0),

194 
	`fKDEföeFa˘‹
 ( 0 ),

195 
	$fI¡îpﬁ©eSåög
(0)

197 
	}
}

202 
	gTMVA
::
MëhodLikñihood
::~
	$MëhodLikñihood
( )

204 i‡(
NULL
 !
fDeÁu…PDFLik
Ë
dñëe
 fDefaultPDFLik;

205 i‡(
NULL
 !
fHi°Sig
Ë
dñëe
 fHistSig;

206 i‡(
NULL
 !
fHi°Bgd
Ë
dñëe
 fHistBgd;

207 i‡(
NULL
 !
fHi°Sig_smoŸh
Ë
dñëe
 fHistSig_smooth;

208 i‡(
NULL
 !
fHi°Bgd_smoŸh
Ë
dñëe
 fHistBgd_smooth;

209 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

210 i‡((*
fPDFSig
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFSig)[ivar];

211 i‡((*
fPDFBgd
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFBgd)[ivar];

213 i‡(
NULL
 !
fPDFSig
Ë
dñëe
 fPDFSig;

214 i‡(
NULL
 !
fPDFBgd
Ë
dñëe
 fPDFBgd;

215 
	}
}

220 
Boﬁ_t
 
	gTMVA
::
MëhodLikñihood
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
,

221 
UI¡_t
 
numbîCœs£s
, UInt_t )

223 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

224  
kFALSE
;

225 
	}
}

230 
	gTMVA
::
MëhodLikñihood
::
	$Inô
( )

233 
fDr›V¨übÀ
 = -1;

234 
fHi°Sig
 = 
√w
 
°d
::
ve˘‹
<
TH1
*> ( 
	`GëNv¨
(), (TH1*)0 );

235 
fHi°Bgd
 = 
√w
 
°d
::
ve˘‹
<
TH1
*> ( 
	`GëNv¨
(), (TH1*)0 );

236 
fHi°Sig_smoŸh
 = 
√w
 
°d
::
ve˘‹
<
TH1
*> ( 
	`GëNv¨
(), (TH1*)0 );

237 
fHi°Bgd_smoŸh
 = 
√w
 
°d
::
ve˘‹
<
TH1
*> ( 
	`GëNv¨
(), (TH1*)0 );

238 
fPDFSig
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
PDF
*>–
	`GëNv¨
(), (TMVA::PDF*)0 );

239 
fPDFBgd
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
PDF
*>–
	`GëNv¨
(), (TMVA::PDF*)0 );

240 
	}
}

247 
	gTMVA
::
MëhodLikñihood
::
	$De˛¨eO±i⁄s
()

249 
	`De˛¨eO±i⁄Ref
–
fTønsf‹mLikñihoodOuçut
 = 
kFALSE
, "TransformOutput",

255 
TSåög
 
upd©edO±i⁄s
 = 
	`GëO±i⁄s
();

256 
fDeÁu…PDFLik
 = 
√w
 
	`PDF
–
	`TSåög
(
	`GëName
()Ë+ " PDF", 
upd©edO±i⁄s
 );

257 
fDeÁu…PDFLik
->
	`De˛¨eO±i⁄s
();

258 
fDeÁu…PDFLik
->
	`P¨£O±i⁄s
();

259 
upd©edO±i⁄s
 = 
fDeÁu…PDFLik
->
	`GëO±i⁄s
();

260 
UI¡_t
 
iv¨
 = 0; iv¨< 
	`D©aInfo
().
	`GëNV¨übÀs
(); ivar++) {

261 (*
fPDFSig
)[
iv¨
] = 
√w
 
	`PDF
–
	`F‹m
("%†PDF Sig[%d]", 
	`GëName
(), iv¨), 
upd©edO±i⁄s
,

262 
	`F‹m
("Sig[%d]",
iv¨
), 
fDeÁu…PDFLik
 );

263 (*
fPDFSig
)[
iv¨
]->
	`De˛¨eO±i⁄s
();

264 (*
fPDFSig
)[
iv¨
]->
	`P¨£O±i⁄s
();

265 
upd©edO±i⁄s
 = (*
fPDFSig
)[
iv¨
]->
	`GëO±i⁄s
();

266 (*
fPDFBgd
)[
iv¨
] = 
√w
 
	`PDF
–
	`F‹m
("%†PDF Bkg[%d]", 
	`GëName
(), iv¨), 
upd©edO±i⁄s
,

267 
	`F‹m
("Bkg[%d]",
iv¨
), 
fDeÁu…PDFLik
 );

268 (*
fPDFBgd
)[
iv¨
]->
	`De˛¨eO±i⁄s
();

269 (*
fPDFBgd
)[
iv¨
]->
	`P¨£O±i⁄s
();

270 
upd©edO±i⁄s
 = (*
fPDFBgd
)[
iv¨
]->
	`GëO±i⁄s
();

274 
	`SëO±i⁄s
–
upd©edO±i⁄s
 );

275 
	}
}

278 
	gTMVA
::
MëhodLikñihood
::
	$De˛¨eCom∑tibûôyO±i⁄s
()

282 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

283 
	`De˛¨eO±i⁄Ref
–
fNsmoŸh
 = 1, "NSmooth",

285 
	`De˛¨eO±i⁄Ref
–
fAvîageEvtPîBö
 = 50, "NAvEvtPerBin",

287 
	`De˛¨eO±i⁄Ref
–
fKDEföeFa˘‹
 =1. , "KDEFineFactor",

289 
	`De˛¨eO±i⁄Ref
–
fB‹dîMëhodSåög
 = "None", "KDEborder",

291 
	`De˛¨eO±i⁄Ref
–
fKDEôîSåög
 = "Nonadaptive", "KDEiter",

293 
	`De˛¨eO±i⁄Ref
–
fKDEty≥Såög
 = "Gauss", "KDEtype",

295 
fAvîageEvtPîBöV¨S
 = 
√w
 
I¡_t
[
	`GëNv¨
()];

296 
fAvîageEvtPîBöV¨B
 = 
√w
 
I¡_t
[
	`GëNv¨
()];

297 
fNsmoŸhV¨S
 = 
√w
 
I¡_t
[
	`GëNv¨
()];

298 
fNsmoŸhV¨B
 = 
√w
 
I¡_t
[
	`GëNv¨
()];

299 
fI¡îpﬁ©eSåög
 = 
√w
 
TSåög
[
	`GëNv¨
()];

300 
UI¡_t
 
i
=0; i<
	`GëNv¨
(); ++i) {

301 
fAvîageEvtPîBöV¨S
[
i
] = 
fAvîageEvtPîBöV¨B
[i] = 0;

302 
fNsmoŸhV¨S
[
i
] = 
fNsmoŸhV¨B
[i] = 0;

303 
fI¡îpﬁ©eSåög
[
i
] = "";

305 
	`De˛¨eO±i⁄Ref
–
fAvîageEvtPîBöV¨S
, 
	`GëNv¨
(), "NAvEvtPerBinSig",

307 
	`De˛¨eO±i⁄Ref
–
fAvîageEvtPîBöV¨B
, 
	`GëNv¨
(), "NAvEvtPerBinBkg",

309 
	`De˛¨eO±i⁄Ref
(
fNsmoŸhV¨S
, 
	`GëNv¨
(), "NSmoothSig",

311 
	`De˛¨eO±i⁄Ref
(
fNsmoŸhV¨B
, 
	`GëNv¨
(), "NSmoothBkg",

313 
	`De˛¨eO±i⁄Ref
(
fI¡îpﬁ©eSåög
, 
	`GëNv¨
(), "PDFInterpol", "Method of interpolatingÑeference histograms (e.g. Spline2 or KDE)");

314 
	}
}

320 
	gTMVA
::
MëhodLikñihood
::
	$Pro˚ssO±i⁄s
()

322 
	`SëSig«lRe„ªn˚Cut
–
	`Tønsf‹mLikñihoodOuçut
( 0.5, 0.5 ) );

324 
fDeÁu…PDFLik
->
	`Pro˚ssO±i⁄s
();

325 
UI¡_t
 
iv¨
 = 0; iv¨< 
	`D©aInfo
().
	`GëNV¨übÀs
(); ivar++) {

326 (*
fPDFBgd
)[
iv¨
]->
	`Pro˚ssO±i⁄s
();

327 (*
fPDFSig
)[
iv¨
]->
	`Pro˚ssO±i⁄s
();

329 
	}
}

339 
	gTMVA
::
MëhodLikñihood
::
	$Tøö
( )

341 
UI¡_t
 
nv¨
=
	`GëNv¨
();

342 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`xmö
(
nv¨
), 
	`xmax
(nvar);

343 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë{
xmö
[iv¨]=1e30; 
xmax
[ivar]=-1e30;}

345 
UI¡_t
 
√víts
=
	`D©a
()->
	`GëNEvíts
();

346 
UI¡_t
 
õvt
=0; ievt<
√víts
; ievt++) {

349 c⁄° 
Evít
* 
‹igEv
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

350 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
‹igEv
->
	`GëWeight
()<=0) ;

352 
˛s
=0;cls<2;cls++){

353 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
(
˛s
);

354 c⁄° 
Evít
* 
ev
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Tønsf‹m
–
‹igEv
 );

355 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

356 
Flﬂt_t
 
vÆue
 = 
ev
->
	`GëVÆue
(
iv¨
);

357 i‡(
vÆue
 < 
xmö
[
iv¨
]) xmin[ivar] = value;

358 i‡(
vÆue
 > 
xmax
[
iv¨
]) xmax[ivar] = value;

365 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

366 
TSåög
 
v¨
 = (*
fI≈utV¨s
)[
iv¨
];

373 i‡(
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëV¨Ty≥
() == 'I') {

375 
I¡_t
 
ixmö
 = 
TM©h
::
	`Nöt
–
xmö
[
iv¨
] );

376 
xmax
[
iv¨
]=xmax[ivar]+1;

377 
I¡_t
 
ixmax
 = 
TM©h
::
	`Nöt
–
xmax
[
iv¨
] );

378 
I¡_t
 
nbös
 = 
ixmax
 - 
ixmö
;

379 (*
fHi°Sig
)[
iv¨
] = 
√w
 
	`TH1F
(
	`GëMëhodName
()+"_"+
v¨
 + "_sig", v¨ + " sig«»åaöög", 
nbös
, 
ixmö
, 
ixmax
 );

380 (*
fHi°Bgd
)[
iv¨
] = 
√w
 
	`TH1F
(
	`GëMëhodName
()+"_"+
v¨
 + "_bgd", v¨ + " backgroundÅøöög", 
nbös
, 
ixmö
, 
ixmax
 );

383 
UI¡_t
 
möNEvt
 = 
TM©h
::
	`Mö
(
	`D©a
()->
	`GëNEvtSigTøö
(),D©a()->
	`GëNEvtBkgdTøö
());

384 
I¡_t
 
nbösS
 = (*
fPDFSig
)[
iv¨
]->
	`GëHi°NBös
–
möNEvt
 );

385 
I¡_t
 
nbösB
 = (*
fPDFBgd
)[
iv¨
]->
	`GëHi°NBös
–
möNEvt
 );

387 (*
fHi°Sig
)[
iv¨
] = 
√w
 
	`TH1F
–
	`F‹m
("%s_%s_%s_sig",
	`D©aInfo
().
	`GëName
(),
	`GëMëhodName
().
	`D©a
(),
v¨
.Data()),

388 
	`F‹m
("%s_%s_%†sig«»åaöög",
	`D©aInfo
().
	`GëName
(),
	`GëMëhodName
().
	`D©a
(),
v¨
.D©a()), 
nbösS
, 
xmö
[
iv¨
], 
xmax
[ivar] );

389 (*
fHi°Bgd
)[
iv¨
] = 
√w
 
	`TH1F
–
	`F‹m
("%s_%s_%s_bgd",
	`D©aInfo
().
	`GëName
(),
	`GëMëhodName
().
	`D©a
(),
v¨
.Data()),

390 
	`F‹m
("%s_%s_%†backgroundÅøöög",
	`D©aInfo
().
	`GëName
(),
	`GëMëhodName
().
	`D©a
(),
v¨
.D©a()), 
nbösB
, 
xmö
[
iv¨
], 
xmax
[ivar] );

395 
	`Log
(Ë<< 
kINFO
 << "FûlögÑe„ªn˚ hi°ogøms" << 
Endl
;

398 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

402 c⁄° 
Evít
* 
‹igEv
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

403 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
‹igEv
->
	`GëWeight
()<=0) ;

404 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
‹igEv
->
	`GëCœss
() );

405 c⁄° 
Evít
* 
ev
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Tønsf‹m
–
‹igEv
 );

408 
Flﬂt_t
 
weight
 = 
ev
->
	`GëWeight
();

411 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

412 
DoubÀ_t
 
vÆue
 = 
ev
->
	`GëVÆue
(
iv¨
);

414 i‡(
vÆue
 >
xmax
[
iv¨
]) value = xmax[ivar] - 1.0e-10;

415 i‡(
vÆue
 < 
xmö
[
iv¨
]) value = xmin[ivar] + 1.0e-10;

417 i‡(
vÆue
 >=(*
fHi°Sig
)[
iv¨
]->
	`GëXaxis
()->
	`GëXmax
() ||

418 
vÆue
 <(*
fHi°Sig
)[
iv¨
]->
	`GëXaxis
()->
	`GëXmö
()){

419 
	`Log
()<<
kWARNING


421 <<(*
fI≈utV¨s
)[
iv¨
]

422 << ", xmö="<<(*
fHi°Sig
)[
iv¨
]->
	`GëXaxis
()->
	`GëXmö
()

423 << ", vÆue="<<
vÆue


424 << ", xmax="<<(*
fHi°Sig
)[
iv¨
]->
	`GëXaxis
()->
	`GëXmax
()

425 << 
Endl
;

427 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë(*
fHi°Sig
)[
iv¨
]->
	`Fûl
–
vÆue
, 
weight
 );

428 (*
fHi°Bgd
)[
iv¨
]->
	`Fûl
–
vÆue
, 
weight
 );

433 
	`Log
(Ë<< 
kINFO
 << "Buûdög PDF ouào‡ª„ªn˚ hi°ogøms" << 
Endl
;

434 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

438 (*
fPDFSig
)[
iv¨
]->
	`BuûdPDF
–(*
fHi°Sig
)[ivar] );

439 (*
fPDFBgd
)[
iv¨
]->
	`BuûdPDF
–(*
fHi°Bgd
)[ivar] );

441 (*
fPDFSig
)[
iv¨
]->
	`VÆid©ePDF
–(*
fHi°Sig
)[ivar] );

442 (*
fPDFBgd
)[
iv¨
]->
	`VÆid©ePDF
–(*
fHi°Bgd
)[ivar] );

445 i‡((*
fPDFSig
)[
iv¨
]->
	`GëSmoŸhedHi°
(Ë!0Ë(*
fHi°Sig_smoŸh
)[ivar] = (*fPDFSig)[ivar]->GetSmoothedHist();

446 i‡((*
fPDFBgd
)[
iv¨
]->
	`GëSmoŸhedHi°
(Ë!0Ë(*
fHi°Bgd_smoŸh
)[ivar] = (*fPDFBgd)[ivar]->GetSmoothedHist();

448 
	`ExôFromTøöög
();

449 
	}
}

455 
DoubÀ_t
 
	gTMVA
::
MëhodLikñihood
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

457 
UI¡_t
 
iv¨
;

460 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

463 
TVe˘‹
 
	`vs
–
	`GëNv¨
() );

464 
TVe˘‹
 
	`vb
–
	`GëNv¨
() );

469 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
fSig«lCœss
 );

472 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

473 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë
	`vs
(iv¨Ë
ev
->
	`GëVÆue
(ivar);

475 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
fBackgroundCœss
 );

478 
ev
 = 
	`GëEvít
();

479 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë
	`vb
(iv¨Ë
ev
->
	`GëVÆue
(ivar);

482 
DoubÀ_t
 
	`ps
(1), 
	`pb
(1), 
	`p
(0);

483 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

486 i‡((
I¡_t
)
iv¨
 =
fDr›V¨übÀ
) ;

488 
DoubÀ_t
 
x
[2] = { 
	`vs
(
iv¨
), 
	`vb
(ivar) };

490 
UI¡_t
 
ôy≥
=0; itype < 2; itype++) {

493 i‡(
x
[
ôy≥
] >(*
fPDFSig
)[
iv¨
]->
	`GëXmax
()) x[itype] = (*fPDFSig)[ivar]->GetXmax() - 1.0e-10;

494 i‡(
x
[
ôy≥
] < (*
fPDFSig
)[
iv¨
]->
	`GëXmö
()) x[itype] = (*fPDFSig)[ivar]->GetXmin();

497 
PDF
* 
pdf
 = (
ôy≥
 =0Ë? (*
fPDFSig
)[
iv¨
] : (*
fPDFBgd
)[ivar];

498 i‡(
pdf
 =0Ë
	`Log
(Ë<< 
kFATAL
 << "<GëMvaVÆue> Re„ªn˚ hi°ogøm†d⁄'àexi°" << 
Endl
;

499 
TH1
* 
hi°
 = 
pdf
->
	`GëPDFHi°
();

503 
I¡_t
 
bö
 = 
hi°
->
	`FödBö
(
x
[
ôy≥
]);

507 i‡((*
fPDFSig
)[
iv¨
]->
	`GëI¡îpﬁMëhod
(Ë=
TMVA
::
PDF
::
kS∂öe0
 ||

508 
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëV¨Ty≥
() == 'N') {

509 
p
 = 
TM©h
::
	`Max
–
hi°
->
	`GëBöC⁄ã¡
(
bö
), 
fEpsû⁄
 );

511 
I¡_t
 
√xtbö
 = 
bö
;

512 i‡((
x
[
ôy≥
] > 
hi°
->
	`GëBöCíãr
(
bö
Ë&& bö !hi°->
	`GëNbösX
()) || bin == 1)

513 
√xtbö
++;

515 
√xtbö
--;

518 
DoubÀ_t
 
dx
 = 
hi°
->
	`GëBöCíãr
(
bö
Ë- hi°->GëBöCíãr(
√xtbö
);

519 
DoubÀ_t
 
dy
 = 
hi°
->
	`GëBöC⁄ã¡
(
bö
Ë- hi°->GëBöC⁄ã¡(
√xtbö
);

520 
DoubÀ_t
 
like
 = 
hi°
->
	`GëBöC⁄ã¡
(
bö
Ë+ (
x
[
ôy≥
] - hi°->
	`GëBöCíãr
(bö)Ë* 
dy
/
dx
;

522 
p
 = 
TM©h
::
	`Max
–
like
, 
fEpsû⁄
 );

525 i‡(
ôy≥
 =0Ë
ps
 *
p
;

526 
pb
 *
p
;

531  
	`Tønsf‹mLikñihoodOuçut
–
ps
, 
pb
 );

532 
	}
}

537 
DoubÀ_t
 
	gTMVA
::
MëhodLikñihood
::
	$Tønsf‹mLikñihoodOuçut
–
DoubÀ_t
 
ps
, DoubÀ_à
pb
 ) const

539 i‡(
ps
 < 
fEpsû⁄
)Ös = fEpsilon;

540 i‡(
pb
 < 
fEpsû⁄
)Öb = fEpsilon;

541 
DoubÀ_t
 
r
 = 
ps
/’†+ 
pb
);

542 i‡(
r
 >= 1.0)Ñ = 1. - 1.e-15;

544 i‡(
fTønsf‹mLikñihoodOuçut
) {

548 i‡(
r
 <0.0Ë∏
fEpsû⁄
;

549 i‡(
r
 >= 1.0)Ñ = 1. - 1.e-15;

551 
DoubÀ_t
 
èu
 = 15.0;

552 
r
 = - 
TM©h
::
	`Log
(1.0/∏- 1.0)/
èu
;

555  
r
;

556 
	}
}

561 
	gTMVA
::
MëhodLikñihood
::
	$WrôeO±i⁄sToSåóm
–
°d
::
o°ªam
& 
o
, c⁄° 
TSåög
& 
¥efix
 ) const

563 
C⁄figuøbÀ
::
	`WrôeO±i⁄sToSåóm
–
o
, 
¥efix
);

566 i‡(
fDeÁu…PDFLik
 != 0) {

567 
o
 << 
¥efix
 << 
°d
::
ídl
 <<Örefix << "#Default Likelihood PDF Options:" << std::endl <<Örefix << std::endl;

568 
fDeÁu…PDFLik
->
	`WrôeO±i⁄sToSåóm
–
o
, 
¥efix
 );

570 
UI¡_t
 
iv¨
 = 0; iv¨ < 
fPDFSig
->
	`size
(); ivar++) {

571 i‡((*
fPDFSig
)[
iv¨
] != 0) {

572 
o
 << 
¥efix
 << 
°d
::
ídl
 <<Öªfix << 
	`F‹m
("#Sig«l[%d] Likñihood PDF O±i⁄s:",
iv¨
) << std::endl <<Örefix << std::endl;

573 (*
fPDFSig
)[
iv¨
]->
	`WrôeO±i⁄sToSåóm
–
o
, 
¥efix
 );

575 i‡((*
fPDFBgd
)[
iv¨
] != 0) {

576 
o
 << 
¥efix
 << 
°d
::
ídl
 <<Örefix << "#Background[%d] Likelihood PDF Options:" << std::endl <<Örefix << std::endl;

577 (*
fPDFBgd
)[
iv¨
]->
	`WrôeO±i⁄sToSåóm
–
o
, 
¥efix
 );

580 
	}
}

585 
	gTMVA
::
MëhodLikñihood
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

587 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

588 
	`gToﬁs
().
	`AddAâr
(
wght
, "NV¨übÀs", 
	`GëNv¨
());

589 
	`gToﬁs
().
	`AddAâr
(
wght
, "NClasses", 2);

590 * 
pdfwøp
;

591 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

592 i‡–(*
fPDFSig
)[
iv¨
]==0 || (*
fPDFBgd
)[ivar]==0 )

593 
	`Log
(Ë<< 
kFATAL
 << "Re„ªn˚ hi°ogøm†f‹ v¨übÀ " << 
iv¨


594 << " d⁄'àexi°, c™'àwrôêôÅÿweighàfûe" << 
Endl
;

595 
pdfwøp
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "PDFDescriptor");

596 
	`gToﬁs
().
	`AddAâr
(
pdfwøp
, "V¨Index", 
iv¨
);

597 
	`gToﬁs
().
	`AddAâr
(
pdfwøp
, "ClassIndex", 0);

598 (*
fPDFSig
)[
iv¨
]->
	`AddXMLTo
(
pdfwøp
);

599 
pdfwøp
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "PDFDescriptor");

600 
	`gToﬁs
().
	`AddAâr
(
pdfwøp
, "V¨Index", 
iv¨
);

601 
	`gToﬁs
().
	`AddAâr
(
pdfwøp
, "ClassIndex", 1);

602 (*
fPDFBgd
)[
iv¨
]->
	`AddXMLTo
(
pdfwøp
);

604 
	}
}

609 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodLikñihood
::
	$Cª©eR™kög
()

612 i‡(
fR™kög
Ë
dñëe
 fRanking;

613 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Delta Separation" );

615 
DoubÀ_t
 
£pRef
 = -1, 
£p
 = -1;

616 
I¡_t
 
iv¨
=-1; iv¨<(I¡_t)
	`GëNv¨
(); ivar++) {

619 
fDr›V¨übÀ
 = 
iv¨
;

621 
TSåög
 
«meS
 = 
	`F‹m
–"rS_%i", 
iv¨
+1 );

622 
TSåög
 
«meB
 = 
	`F‹m
–"rB_%i", 
iv¨
+1 );

623 
TH1
* 
rS
 = 
√w
 
	`TH1F
–
«meS
,ÇameS, 80, 0, 1 );

624 
TH1
* 
rB
 = 
√w
 
	`TH1F
–
«meB
,ÇameB, 80, 0, 1 );

627 
I¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNTøöögEvíts
(); ievt++) {

629 c⁄° 
Evít
* 
‹igEv
 = 
	`D©a
()->
	`GëEvít
(
õvt
);

630 
	`GëTønsf‹m©i⁄H™dÀr
().
	`SëTønsf‹m©i⁄Re„ªn˚Cœss
–
‹igEv
->
	`GëCœss
() );

631 c⁄° 
Evít
* 
ev
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Tønsf‹m
(
	`D©a
()->
	`GëEvít
(
õvt
));

633 
DoubÀ_t
 
lk
 = 
this
->
	`GëMvaVÆue
();

634 
DoubÀ_t
 
w
 = 
ev
->
	`GëWeight
();

635 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
)Ë
rS
->
	`Fûl
–
lk
, 
w
 );

636 
rB
->
	`Fûl
–
lk
, 
w
 );

640 
£p
 = 
TMVA
::
	`gToﬁs
().
	`GëSï¨©i⁄
–
rS
, 
rB
 );

641 i‡(
iv¨
 =-1Ë
£pRef
 = 
£p
;

642 
£p
 = 
£pRef
 - sep;

645 
dñëe
 
rS
;

646 
dñëe
 
rB
;

648 i‡(
iv¨
 >0Ë
fR™kög
->
	`AddR™k
–
	`R™k
–
	`D©aInfo
().
	`GëV¨übÀInfo
(iv¨).
	`GëI¡î«lName
(), 
£p
 ) );

651 
fDr›V¨übÀ
 = -1;

653  
fR™kög
;

654 
	}
}

659 
	gTMVA
::
MëhodLikñihood
::
	$WrôeWeightsToSåóm
–
TFûe
& ) const

661 
TSåög
 
≤ame
 = "PDF_";

662 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

663 (*
fPDFSig
)[
iv¨
]->
	`Wrôe
–
≤ame
 + 
	`GëI≈utV¨
( ivar ) + "_S" );

664 (*
fPDFBgd
)[
iv¨
]->
	`Wrôe
–
≤ame
 + 
	`GëI≈utV¨
( ivar ) + "_B" );

666 
	}
}

671 
	gTMVA
::
MëhodLikñihood
::
	$RódWeightsFromXML
(* 
wghäode
)

673 
TSåög
 
≤ame
 = "PDF_";

674 
Boﬁ_t
 
addDúSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

675 
TH1
::
	`AddDúe˘‹y
(0);

676 
UI¡_t
 
nv¨s
=0;

677 
	`gToﬁs
().
	`RódAâr
(
wghäode
, "NV¨übÀs",
nv¨s
);

678 * 
des˙ode
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

679 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++){

680 * 
pd‚ode
 = 
	`gToﬁs
().
	`GëChûd
(
des˙ode
);

681 
	`Log
(Ë<< 
kDEBUG
 << "Ródög sig«»™d background PDF f‹ v¨übÀ: " << 
	`GëI≈utV¨
–
iv¨
 ) << 
Endl
;

682 i‡((*
fPDFSig
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFSig)[ivar];

683 i‡((*
fPDFBgd
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFBgd)[ivar];

684 (*
fPDFSig
)[
iv¨
] = 
√w
 
	`PDF
–
	`GëI≈utV¨
( ivar ) + " PDF Sig" );

685 (*
fPDFBgd
)[
iv¨
] = 
√w
 
	`PDF
–
	`GëI≈utV¨
( ivar ) + " PDF Bkg" );

686 (*
fPDFSig
)[
iv¨
]->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

687 (*
fPDFBgd
)[
iv¨
]->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

688 (*(*
fPDFSig
)[
iv¨
]).
	`RódXML
(
pd‚ode
);

689 
des˙ode
 = 
	`gToﬁs
().
	`GëNextChûd
(descnode);

690 
pd‚ode
 = 
	`gToﬁs
().
	`GëChûd
(
des˙ode
);

691 (*(*
fPDFBgd
)[
iv¨
]).
	`RódXML
(
pd‚ode
);

692 
des˙ode
 = 
	`gToﬁs
().
	`GëNextChûd
(descnode);

694 
TH1
::
	`AddDúe˘‹y
(
addDúSètus
);

695 
	}
}

701 
	gTMVA
::
MëhodLikñihood
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
 & 
i°r
 )

703 
TSåög
 
≤ame
 = "PDF_";

704 
Boﬁ_t
 
addDúSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

705 
TH1
::
	`AddDúe˘‹y
(0);

706 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

707 
	`Log
(Ë<< 
kDEBUG
 << "Ródög sig«»™d background PDF f‹ v¨übÀ: " << 
	`GëI≈utV¨
–
iv¨
 ) << 
Endl
;

708 i‡((*
fPDFSig
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFSig)[ivar];

709 i‡((*
fPDFBgd
)[
iv¨
] !=0Ë
	`dñëe
 (*fPDFBgd)[ivar];

710 (*
fPDFSig
)[
iv¨
] = 
√w
 
	`PDF
(
	`GëI≈utV¨
( ivar ) + " PDF Sig" );

711 (*
fPDFBgd
)[
iv¨
] = 
√w
 
	`PDF
(
	`GëI≈utV¨
( ivar ) + " PDF Bkg");

712 (*
fPDFSig
)[
iv¨
]->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

713 (*
fPDFBgd
)[
iv¨
]->
	`SëRódögVîsi⁄
–
	`GëTøöögTMVAVîsi⁄Code
() );

714 
i°r
 >> *(*
fPDFSig
)[
iv¨
];

715 
i°r
 >> *(*
fPDFBgd
)[
iv¨
];

717 
TH1
::
	`AddDúe˘‹y
(
addDúSètus
);

718 
	}
}

723 
	gTMVA
::
MëhodLikñihood
::
	$RódWeightsFromSåóm
–
TFûe
& 
rf
 )

725 
TSåög
 
≤ame
 = "PDF_";

726 
Boﬁ_t
 
addDúSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

727 
TH1
::
	`AddDúe˘‹y
(0);

728 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

729 (*
fPDFSig
)[
iv¨
] = (
TMVA
::
PDF
*)
rf
.
	`Gë
–
	`F‹m
–"PDF_%s_S", 
	`GëI≈utV¨
–iv¨ ).
	`D©a
() ) );

730 (*
fPDFBgd
)[
iv¨
] = (
TMVA
::
PDF
*)
rf
.
	`Gë
–
	`F‹m
–"PDF_%s_B", 
	`GëI≈utV¨
–iv¨ ).
	`D©a
() ) );

732 
TH1
::
	`AddDúe˘‹y
(
addDúSètus
);

733 
	}
}

738 
	gTMVA
::
MëhodLikñihood
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

740 
	`Log
(Ë<< 
kINFO
 << "Wrôêm⁄ô‹ög hi°ogøm†tÿfûe: " << 
	`Ba£Dú
()->
	`GëP©h
(Ë<< 
Endl
;

741 
	`Ba£Dú
()->
	`cd
();

743 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

744 (*
fHi°Sig
)[
iv¨
]->
	`Wrôe
();

745 (*
fHi°Bgd
)[
iv¨
]->
	`Wrôe
();

746 i‡((*
fHi°Sig_smoŸh
)[
iv¨
] !0Ë(*fHi°Sig_smoŸh)[iv¨]->
	`Wrôe
();

747 i‡((*
fHi°Bgd_smoŸh
)[
iv¨
] !0Ë(*fHi°Bgd_smoŸh)[iv¨]->
	`Wrôe
();

748 (*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`Wrôe
();

749 (*
fPDFBgd
)[
iv¨
]->
	`GëPDFHi°
()->
	`Wrôe
();

751 i‡((*
fPDFSig
)[
iv¨
]->
	`GëNSmoŸhHi°
(Ë!0Ë(*fPDFSig)[iv¨]->GëNSmoŸhHi°()->
	`Wrôe
();

752 i‡((*
fPDFBgd
)[
iv¨
]->
	`GëNSmoŸhHi°
(Ë!0Ë(*fPDFBgd)[iv¨]->GëNSmoŸhHi°()->
	`Wrôe
();

755 
Flﬂt_t
 
xmö
=((*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëXaxis
())->
	`GëXmö
();

756 
Flﬂt_t
 
xmax
=((*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëXaxis
())->
	`GëXmax
();

757 
TH1F
* 
mm
 = 
√w
 
	`TH1F
–(*
fI≈utV¨s
)[
iv¨
]+"_additional_check",

758 (*
fI≈utV¨s
)[
iv¨
]+"_addôi⁄Æ_check", 15000, 
xmö
, 
xmax
 );

759 
DoubÀ_t
 
ötBö
 = (
xmax
-
xmö
)/15000;

760 
I¡_t
 
bö
=0; bin < 15000; bin++) {

761 
DoubÀ_t
 
x
 = (
bö
 + 0.5)*
ötBö
 + 
xmö
;

762 
mm
->
	`SëBöC⁄ã¡
(
bö
+1 ,(*
fPDFSig
)[
iv¨
]->
	`GëVÆ
(
x
));

764 
mm
->
	`Wrôe
();

767 
TH1
* 
h
[2] = { (*
fHi°Sig
)[
iv¨
], (*
fHi°Bgd
)[ivar] };

768 
UI¡_t
 
i
=0; i<2; i++) {

769 
TH1
* 
h˛⁄e
 = (
TH1F
*)
h
[
i
]->
	`Cl⁄e
–
	`TSåög
(h[i]->
	`GëName
()) + "_nice" );

770 
h˛⁄e
->
	`SëName
 ( 
	`TSåög
(
h
[
i
]->
	`GëName
()) + "_nice" );

771 
h˛⁄e
->
	`SëTôÀ
–
	`TSåög
(
h
[
i
]->
	`GëTôÀ
()) + "" );

772 i‡(
h˛⁄e
->
	`GëNbösX
() > 100) {

773 
I¡_t
 
ªsFa˘‹
 = 5;

774 
h˛⁄e
->
	`Rebö
–
ªsFa˘‹
 );

775 
h˛⁄e
->
	`SˇÀ
–1.0/
ªsFa˘‹
 );

777 
h˛⁄e
->
	`Wrôe
();

781 
	}
}

786 
	gTMVA
::
MëhodLikñihood
::
	$MakeCœssS≥cificHódî
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& ) const

788 
fout
 << "#ö˛udê<m©h.h>" << 
°d
::
ídl
;

789 
fout
 << "#ö˛udê<c°dlib>" << 
°d
::
ídl
;

790 
	}
}

795 
	gTMVA
::
MëhodLikñihood
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

797 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

798 
fout
 << " doubÀ fEpsû⁄;" << 
°d
::
ídl
;

800 
I¡_t
 * 
nbö
 = 
√w
 I¡_t[
	`GëNv¨
()];

802 
I¡_t
 
nböMax
=-1;

803 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

804 
nbö
[
iv¨
]=(*
fPDFSig
)[iv¨]->
	`GëPDFHi°
()->
	`GëNbösX
();

805 i‡(
nbö
[
iv¨
] > 
nböMax
)ÇbinMax=nbin[ivar];

808 
fout
 << " sèti¯ÊﬂàfRefS[][" << 
nböMax
 << "]; "

809 << "// sig«»ª„ªn˚ ve˘‹ [nv¨s][max_nbös]" << 
°d
::
ídl
;

810 
fout
 << " sèti¯ÊﬂàfRefB[][" << 
nböMax
 << "]; "

811 << "// backg∏ª„ªn˚ ve˘‹ [nv¨s][max_nbös]" << 
°d
::
ídl
 << std::endl;

812 
fout
 << "// i‡®v¨übÀ ha†ô†PDFÉncodedá†®•löe0 -->Åª© iàlikê™ I¡egî vÆued o√" <<
°d
::
ídl
;

813 
fout
 << " boﬁ fHasDis¸ëPDF[" << 
	`GëNv¨
(Ë<<"]; "<< 
°d
::
ídl
;

814 
fout
 << " i¡ fNbö[" << 
	`GëNv¨
() << "]; "

815 << "//Çumbî o‡bö†(dis¸ëêv¨übÀ†may havêÀs†bös)" << 
°d
::
ídl
;

816 
fout
 << " doubÀ fHi°Mö[" << 
	`GëNv¨
(Ë<< "]; " << 
°d
::
ídl
;

817 
fout
 << " doubÀ fHi°Max[" << 
	`GëNv¨
(Ë<< "]; " << 
°d
::
ídl
;

819 
fout
 << " doubÀ Tønsf‹mLikñihoodOuçut–doubÀ, doubÀ ) c⁄°;" << 
°d
::
ídl
;

820 
fout
 << "};" << 
°d
::
ídl
;

821 
fout
 << "" << 
°d
::
ídl
;

822 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

823 
fout
 << "{" << 
°d
::
ídl
;

824 
fout
 << " fEpsû⁄ = " << 
fEpsû⁄
 << ";" << 
°d
::
ídl
;

825 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

826 
fout
 << " fNbö[" << 
iv¨
 << "] = " << (*
fPDFSig
)[iv¨]->
	`GëPDFHi°
()->
	`GëNbösX
(Ë<< ";" << 
°d
::
ídl
;

827 
fout
 << " fHi°Mö[" << 
iv¨
 << "] = " << (*
fPDFSig
)[iv¨]->
	`GëPDFHi°
()->
	`GëXaxis
()->
	`GëXmö
(Ë<< ";" << 
°d
::
ídl
;

828 
fout
 << " fHi°Max[" << 
iv¨
 << "] = " << (*
fPDFSig
)[iv¨]->
	`GëPDFHi°
()->
	`GëXaxis
()->
	`GëXmax
(Ë<< ";" << 
°d
::
ídl
;

830 i‡((((*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëNbösX
(Ë!
nbö
[ivar] ||

831 (*
fPDFBgd
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëNbösX
(Ë!
nbö
[ivar])

833 (*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëNbösX
(Ë!(*
fPDFBgd
)[ivar]->GetPDFHist()->GetNbinsX()) {

834 
	`Log
(Ë<< 
kFATAL
 << "<MakeClassSpecific> Mismatch in binning of variable "

835 << "\"" << 
	`GëOrigöÆV¨Name
(
iv¨
Ë<< "\" o‡ty≥: \'" << 
	`D©aInfo
().
	`GëV¨übÀInfo
(iv¨).
	`GëV¨Ty≥
()

837 << "nxS = " << (*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëNbösX
() << ", "

838 << "nxB = " << (*
fPDFBgd
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëNbösX
()

839 << " whûêwêex≥˘ " << 
nbö
[
iv¨
]

840 << 
Endl
;

843 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++){

844 i‡((*
fPDFSig
)[
iv¨
]->
	`GëI¡îpﬁMëhod
(Ë=
TMVA
::
PDF
::
kS∂öe0
)

845 
fout
 << " fHasDis¸ëPDF[" << 
iv¨
 <<"] =Årue; " << 
°d
::
ídl
;

847 
fout
 << " fHasDis¸ëPDF[" << 
iv¨
 <<"] = fÆ£; " << 
°d
::
ídl
;

850 
fout
 << "}" << 
°d
::
ídl
 << std::endl;

852 
fout
 << "ölöêdoubÀ " << 
˛assName


853 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

854 
fout
 << "{" << 
°d
::
ídl
;

855 
fout
 << " doubÀÖs(1),Öb(1);" << 
°d
::
ídl
;

856 
fout
 << " std::ve˘‹<doubÀ> i≈utVÆuesSig = i≈utVÆues;" << 
°d
::
ídl
;

857 
fout
 << " std::ve˘‹<doubÀ> i≈utVÆuesBgd = i≈utVÆues;" << 
°d
::
ídl
;

858 i‡(
	`GëTønsf‹m©i⁄H™dÀr
().
	`GëTønsf‹m©i⁄Li°
().
	`GëSize
() != 0) {

859 
fout
 << " Tønsf‹m(öputVÆuesSig,0);" << 
°d
::
ídl
;

860 
fout
 << " Tønsf‹m(öputVÆuesBgd,1);" << 
°d
::
ídl
;

862 
fout
 << " f‹ (size_àiv¨ = 0; iv¨ < GëNv¨(); iv¨++Ë{" << 
°d
::
ídl
;

863 
fout
 << 
°d
::
ídl
;

864 
fout
 << " // dummyáà¥e£¡... wû»bêu£d f‹ v¨übÀÅønsf‹ms" << 
°d
::
ídl
;

865 
fout
 << " doubÀ x[2] = { i≈utVÆuesSig[iv¨], i≈utVÆuesBgd[iv¨] };" << 
°d
::
ídl
;

866 
fout
 << 
°d
::
ídl
;

867 
fout
 << " f‹ (öàôy≥=0; ity≥ < 2; ity≥++Ë{" << 
°d
::
ídl
;

868 
fout
 << 
°d
::
ídl
;

869 
fout
 << " // i¡îpﬁ©êlöóæy bëwì¿adja˚¡ bös" << 
°d
::
ídl
;

870 
fout
 << " //Åhi†i†nŸ u£fu»f‹ dis¸ëêv¨übÀ†(‹ f‹˚d S∂öe0)" << 
°d
::
ídl
;

871 
fout
 << " i¡ bö = i¡((x[ôy≥] - fHi°Mö[iv¨])/(fHi°Max[iv¨] - fHi°Mö[iv¨])*fNbö[iv¨]Ë+ 0;" << 
°d
::
ídl
;

872 
fout
 << 
°d
::
ídl
;

873 
fout
 << " // sö˚Åhêã° d©®ßm∂êi†ö gíîÆ dif„ª¡ fromÅhêåaöög sam∂e" << 
°d
::
ídl
;

874 
fout
 << " // iàˇ¿h≠≥¿th©Åhêmö/max o‡thêåaöög sam∂ê¨êåe•as£d --> c‹ª˘Åhis" << 
°d
::
ídl
;

875 
fout
 << " i‡ (bö < 0Ë{" << 
°d
::
ídl
;

876 
fout
 << " bö = 0;" << 
°d
::
ídl
;

877 
fout
 << " x[ôy≥] = fHi°Mö[iv¨];" << 
°d
::
ídl
;

878 
fout
 << " }" << 
°d
::
ídl
;

879 
fout
 << "Él£ i‡(bö >fNbö[iv¨]Ë{" << 
°d
::
ídl
;

880 
fout
 << " bö = fNbö[iv¨]-1;" << 
°d
::
ídl
;

881 
fout
 << " x[ôy≥] = fHi°Max[iv¨];" << 
°d
::
ídl
;

882 
fout
 << " }" << 
°d
::
ídl
;

883 
fout
 << 
°d
::
ídl
;

884 
fout
 << " // föd c‹ª•⁄dög hi°ogøm from cached indi˚s" << 
°d
::
ídl
;

885 
fout
 << " flﬂàª‡(ôy≥ =0Ë? fRefS[iv¨][bö] : fRefB[iv¨][bö];" << 
°d
::
ídl
;

886 
fout
 << 
°d
::
ídl
;

887 
fout
 << " // s™ôy check" << 
°d
::
ídl
;

888 
fout
 << " i‡‘e‡< 0Ë{" << 
°d
::
ídl
;

889 
fout
 << " std::couà<< \"F©ÆÉº‹ i¿" << 
˛assName


890 << ": böÉ¡ry < 0 ==>áb‹t\" << std::ídl;" << 
°d
::
ídl
;

891 
fout
 << " std::exô(1);" << 
°d
::
ídl
;

892 
fout
 << " }" << 
°d
::
ídl
;

893 
fout
 << 
°d
::
ídl
;

894 
fout
 << " doubÀÖ =Ñef;" << 
°d
::
ídl
;

895 
fout
 << 
°d
::
ídl
;

896 
fout
 << " i‡(GëTy≥(iv¨Ë!'I' && !fHasDis¸ëPDF[iv¨]Ë{" << 
°d
::
ídl
;

897 
fout
 << " flﬂàbö˚¡î = (bö + 0.5)/fNbö[iv¨]*(fHi°Max[iv¨] - fHi°Mö[iv¨]Ë+ fHi°Mö[iv¨];" << 
°d
::
ídl
;

898 
fout
 << " i¡Çextbö = bö;" << 
°d
::
ídl
;

899 
fout
 << " i‡((x[ôy≥] > bö˚¡î && bö !fNbö[iv¨]-1Ë|| bö =0Ë" << 
°d
::
ídl
;

900 
fout
 << "Çextbö++;" << 
°d
::
ídl
;

901 
fout
 << "Él£" << 
°d
::
ídl
;

902 
fout
 << "Çextbö--; " << 
°d
::
ídl
;

903 
fout
 << 
°d
::
ídl
;

904 
fout
 << " doubÀÑe‚exà = (ôy≥ =0Ë? fRefS[iv¨][√xtbö] : fRefB[iv¨][√xtbö];" << 
°d
::
ídl
;

905 
fout
 << " flﬂà√xtbö˚¡î = (√xtbö + 0.5)/fNbö[iv¨]*(fHi°Max[iv¨] - fHi°Mö[iv¨]Ë+ fHi°Mö[iv¨];" << 
°d
::
ídl
;

906 
fout
 << 
°d
::
ídl
;

907 
fout
 << " doubÀ dx = bö˚¡î -Çextbö˚¡î;" << 
°d
::
ídl
;

908 
fout
 << " doubÀ dy =Ñe‡-Ñe‚ext;" << 
°d
::
ídl
;

909 
fout
 << "Ö +(x[ôy≥] - bö˚¡îË* dy/dx;" << 
°d
::
ídl
;

910 
fout
 << " }" << 
°d
::
ídl
;

911 
fout
 << 
°d
::
ídl
;

912 
fout
 << " i‡’ < fEpsû⁄Ë∞fEpsû⁄; //ávoid zîÿª•⁄£" << 
°d
::
ídl
;

913 
fout
 << 
°d
::
ídl
;

914 
fout
 << " i‡(ôy≥ =0Ëp†*p;" << 
°d
::
ídl
;

915 
fout
 << "Él£Öb *p;" << 
°d
::
ídl
;

916 
fout
 << " } " << 
°d
::
ídl
;

917 
fout
 << " } " << 
°d
::
ídl
;

918 
fout
 << 
°d
::
ídl
;

919 
fout
 << " //ÅhêlikñihoodÑ©iÿ—ønsf‹m ià?)" << 
°d
::
ídl
;

920 
fout
 << "Ñëu∫ Tønsf‹mLikñihoodOuçut–ps,Öb ); " << 
°d
::
ídl
;

921 
fout
 << "}" << 
°d
::
ídl
 << std::endl;

923 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::Tønsf‹mLikñihoodOuçut–doubÀÖs, doubÀÖb ) c⁄°" << 
°d
::
ídl
;

924 
fout
 << "{" << 
°d
::
ídl
;

925 
fout
 << " //Ñëu∫†å™sf‹med o∏n⁄-å™sf‹med ouçut" << 
°d
::
ídl
;

926 
fout
 << " i‡’†< fEpsû⁄Ëp†fEpsû⁄;" << 
°d
::
ídl
;

927 
fout
 << " i‡’b < fEpsû⁄Ëpb = fEpsû⁄;" << 
°d
::
ídl
;

928 
fout
 << " doubÀÑ =Ös/’†+Öb);" << 
°d
::
ídl
;

929 
fout
 << " i‡‘ >1.0Ë∏1. - 1.e-15;" << 
°d
::
ídl
;

930 
fout
 << 
°d
::
ídl
;

931 
fout
 << " i‡(" << (
fTønsf‹mLikñihoodOuçut
 ? "åue" : "Ál£"Ë<< "Ë{" << 
°d
::
ídl
;

932 
fout
 << " // invî£ Fîmòfun˘i⁄" << 
°d
::
ídl
;

933 
fout
 << 
°d
::
ídl
;

934 
fout
 << " // s™ôy check" << 
°d
::
ídl
;

935 
fout
 << " i‡ (∏<0.0Ë∏fEpsû⁄;" << 
°d
::
ídl
;

936 
fout
 << "Él£ i‡‘ >1.0Ë∏1. - 1.e-15;" << 
°d
::
ídl
;

937 
fout
 << 
°d
::
ídl
;

938 
fout
 << " doubÀÅau = 15.0;" << 
°d
::
ídl
;

939 
fout
 << "Ñ = -Üog(1.0/∏- 1.0)/èu;" << 
°d
::
ídl
;

940 
fout
 << " }" << 
°d
::
ídl
;

941 
fout
 << 
°d
::
ídl
;

942 
fout
 << "Ñëu∫Ñ;" << 
°d
::
ídl
;

943 
fout
 << "}" << 
°d
::
ídl
;

944 
fout
 << 
°d
::
ídl
;

946 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

947 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

948 
fout
 << "{" << 
°d
::
ídl
;

949 
fout
 << " //ÇŸhögÅÿ˛ór" << 
°d
::
ídl
;

950 
fout
 << "}" << 
°d
::
ídl
 << std::endl;

952 
fout
 << "// sig«»m≠" << 
°d
::
ídl
;

953 
fout
 << "Êﬂà" << 
˛assName
 << "::fRefS[][" << 
nböMax
 << "] = " << 
°d
::
ídl
;

954 
fout
 << "{ " << 
°d
::
ídl
;

955 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

956 
fout
 << " { ";

957 
I¡_t
 
ibö
=1; ibö<=
nböMax
; ibin++) {

958 i‡(
ibö
-1 < 
nbö
[
iv¨
])

959 
fout
 << (*
fPDFSig
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëBöC⁄ã¡
(
ibö
);

961 
fout
 << -1;

963 i‡(
ibö
 < 
nböMax
Ë
fout
 << ", ";

965 
fout
 << " }, " << 
°d
::
ídl
;

967 
fout
 << "}; " << 
°d
::
ídl
;

968 
fout
 << 
°d
::
ídl
;

970 
fout
 << "// background m≠" << 
°d
::
ídl
;

971 
fout
 << "Êﬂà" << 
˛assName
 << "::fRefB[][" << 
nböMax
 << "] = " << 
°d
::
ídl
;

972 
fout
 << "{ " << 
°d
::
ídl
;

973 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

974 
fout
 << " { ";

975 
fout
 << 
°d
::
	`£çªcisi⁄
(8);

976 
I¡_t
 
ibö
=1; ibö<=
nböMax
; ibin++) {

977 i‡(
ibö
-1 < 
nbö
[
iv¨
])

978 
fout
 << (*
fPDFBgd
)[
iv¨
]->
	`GëPDFHi°
()->
	`GëBöC⁄ã¡
(
ibö
);

980 
fout
 << -1;

982 i‡(
ibö
 < 
nböMax
Ë
fout
 << ", ";

984 
fout
 << " }, " << 
°d
::
ídl
;

986 
fout
 << "}; " << 
°d
::
ídl
;

987 
fout
 << 
°d
::
ídl
;

988 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

990 
dñëe
[] 
nbö
;

991 
	}
}

999 
	gTMVA
::
MëhodLikñihood
::
	$GëHñpMesßge
() const

1001 
	`Log
(Ë<< 
Endl
;

1002 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1003 
	`Log
(Ë<< 
Endl
;

1004 
	`Log
(Ë<< "Thêmaximum-likñihood cœssifõ∏modñ†thêd©®wôhÖrobabûôy " << 
Endl
;

1005 
	`Log
(Ë<< "dísôy fun˘i⁄†(PDFËª¥oducögÅhêsig«»™d background" << 
Endl
;

1006 
	`Log
(Ë<< "di°ributi⁄†o‡thêöpuàv¨übÀs. C‹ªœti⁄†am⁄gÅhê" << 
Endl
;

1007 
	`Log
(Ë<< "v¨übÀ†¨êign‹ed." << 
Endl
;

1008 
	`Log
(Ë<< 
Endl
;

1009 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1010 
	`Log
(Ë<< 
Endl
;

1011 
	`Log
(Ë<< "Requúed f‹ goodÖîf‹m™˚áª dec‹ªœãd i≈uàv¨übÀs" << 
Endl
;

1012 
	`Log
(Ë<< "(PCAÅønsf‹m©i⁄ vüÅhê›ti⁄ \"V¨Tønsf‹m=Dec‹ªœã\"" << 
Endl
;

1013 
	`Log
(Ë<< "may bêåõd). IºeducibÀÇ⁄-löó∏c‹ªœti⁄†may bêªdu˚d" << 
Endl
;

1014 
	`Log
(Ë<< "byÖªcomböög så⁄gly c‹ªœãd i≈uàv¨übÀs, o∏by sim∂y" << 
Endl
;

1015 
	`Log
(Ë<< "ªmovög o√ o‡thêv¨übÀs." << 
Endl
;

1016 
	`Log
(Ë<< 
Endl
;

1017 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1018 
	`Log
(Ë<< 
Endl
;

1019 
	`Log
(Ë<< "High fidñôy PDFÉ°im©e†¨êm™d©‹y, i.e., sufficõ¡Åøöög " << 
Endl
;

1020 
	`Log
(Ë<< "°©i°ic†i†ªquúedÅÿp›uœãÅhêèû†o‡thêdi°ributi⁄s" << 
Endl
;

1021 
	`Log
(Ë<< "Iàwould bê®suΩri£ i‡thêdeÁu… S∂öê‹ KDE kî√»∑ømëîs" << 
Endl
;

1022 
	`Log
(Ë<< "¥ovidê®ßtisfyög fôÅÿthêd©a. Thêu£∏i†advi£dÅÿ¥›îly" << 
Endl
;

1023 
	`Log
(Ë<< "tu√Åhêevít†≥∏böánd smoŸh o±i⁄†öÅhê•löêˇ£s" << 
Endl
;

1024 
	`Log
(Ë<< "ödividuÆlyÖî v¨übÀ. I‡thêKDE kî√»i†u£d,Åhêad≠tive" << 
Endl
;

1025 
	`Log
(Ë<< "Gaussü¿kî√»mayÜódÅÿ¨ãÁ˘s, sÿ∂ó£álway†Æsÿåy" << 
Endl
;

1026 
	`Log
(Ë<< "thên⁄-ad≠tivê⁄e." << 
Endl
;

1027 
	`Log
(Ë<< "" << 
Endl
;

1028 
	`Log
(Ë<< "AŒÅunögÖ¨amëî†mu° bêadju°ed individuÆly f‹Éach i≈ut" << 
Endl
;

1029 
	`Log
(Ë<< "v¨übÀ!" << 
Endl
;

1030 
	}
}

	@src/MethodMLP.cxx

45 
	~"TMVA/MëhodMLP.h
"

47 
	~"TMVA/C⁄fig.h
"

48 
	~"TMVA/C⁄figuøbÀ.h
"

49 
	~"TMVA/C⁄vîgí˚Te°.h
"

50 
	~"TMVA/CœssifõrFa˘‹y.h
"

51 
	~"TMVA/D©aSë.h
"

52 
	~"TMVA/D©aSëInfo.h
"

53 
	~"TMVA/FôãrBa£.h
"

54 
	~"TMVA/GíëicFôãr.h
"

55 
	~"TMVA/IFôãrT¨gë.h
"

56 
	~"TMVA/IMëhod.h
"

57 
	~"TMVA/I¡îvÆ.h
"

58 
	~"TMVA/MëhodANNBa£.h
"

59 
	~"TMVA/MsgLoggî.h
"

60 
	~"TMVA/TNeur⁄.h
"

61 
	~"TMVA/TSy«p£.h
"

62 
	~"TMVA/Timî.h
"

63 
	~"TMVA/Toﬁs.h
"

64 
	~"TMVA/Ty≥s.h
"

66 
	~"TH1.h
"

67 
	~"TSåög.h
"

68 
	~"TTªe.h
"

69 
	~"Rio°ªam.h
"

70 
	~"TFôãr.h
"

71 
	~"TM©rixD.h
"

72 
	~"TM©h.h
"

73 
	~"TFûe.h
"

75 
	~<cm©h
>

76 
	~<ve˘‹
>

78 #ifde‡
MëhodMLP_U£Möuô__


79 
	gTMVA
::
MëhodMLP
* 
TMVA
::MëhodMLP::
fgThis
 = 0;

80 
Boﬁ_t
 
	gMëhodMLP_U£Möuô
 = 
kTRUE
;

83 
	$REGISTER_METHOD
(
MLP
)

85 
	`CœssImp
(
TMVA
::
MëhodMLP
);

87 
usög
 
°d
::
ve˘‹
;

92 
TMVA
::
MëhodMLP
::
	$MëhodMLP
–c⁄° 
TSåög
& 
jobName
,

93 c⁄° 
TSåög
& 
mëhodTôÀ
,

94 
D©aSëInfo
& 
theD©a
,

95 c⁄° 
TSåög
& 
theO±i⁄
)

96 : 
	`MëhodANNBa£
–
jobName
, 
Ty≥s
::
kMLP
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

97 
	`fU£Reguœt‹
(
Ál£
), 
	`fCÆcuœãEº‹s
(false),

98 
	`fPri‹
(0.0), 
	`fPri‹Dev
(0), 
	`fUpd©eLimô
(0),

99 
	`fTøöögMëhod
(
kBFGS
), 
	`fTøöMëhodS
("BFGS"),

100 
	`fSam∂ögFø˘i⁄
(1.0), 
	`fSam∂ögEpoch
(0.0), 
	`fSam∂ögWeight
(0.0),

101 
	`fSam∂ögTøöög
(
Ál£
), 
	`fSam∂ögTe°ög
(false),

102 
	`fLa°AÕha
(0.0), 
	`fTau
(0.),

103 
	`fRe£tSãp
(0), 
	`fLó∫R©e
(0.0), 
	`fDeˇyR©e
(0.0),

104 
	`fBPMode
(
kSequítül
), 
	`fBpModeS
("None"),

105 
	`fB©chSize
(0), 
	`fTe°R©e
(0), 
	`fEpochM⁄
(
Ál£
),

106 
	`fGA_n°ïs
(0), 
	`fGA_¥eCÆc
(0), 
	`fGA_SC_°ïs
(0),

107 
	`fGA_SC_øã
(0), 
	`fGA_SC_Á˘‹
(0.0),

108 
	`fDevüti⁄sFromT¨gës
(0),

109 
	$fWeightR™ge
 (1.0)

112 
	}
}

117 
	gTMVA
::
MëhodMLP
::
	$MëhodMLP
–
D©aSëInfo
& 
theD©a
,

118 c⁄° 
TSåög
& 
theWeightFûe
)

119 : 
	`MëhodANNBa£
–
Ty≥s
::
kMLP
, 
theD©a
, 
theWeightFûe
),

120 
	`fU£Reguœt‹
(
Ál£
), 
	`fCÆcuœãEº‹s
(false),

121 
	`fPri‹
(0.0), 
	`fPri‹Dev
(0), 
	`fUpd©eLimô
(0),

122 
	`fTøöögMëhod
(
kBFGS
), 
	`fTøöMëhodS
("BFGS"),

123 
	`fSam∂ögFø˘i⁄
(1.0), 
	`fSam∂ögEpoch
(0.0), 
	`fSam∂ögWeight
(0.0),

124 
	`fSam∂ögTøöög
(
Ál£
), 
	`fSam∂ögTe°ög
(false),

125 
	`fLa°AÕha
(0.0), 
	`fTau
(0.),

126 
	`fRe£tSãp
(0), 
	`fLó∫R©e
(0.0), 
	`fDeˇyR©e
(0.0),

127 
	`fBPMode
(
kSequítül
), 
	`fBpModeS
("None"),

128 
	`fB©chSize
(0), 
	`fTe°R©e
(0), 
	`fEpochM⁄
(
Ál£
),

129 
	`fGA_n°ïs
(0), 
	`fGA_¥eCÆc
(0), 
	`fGA_SC_°ïs
(0),

130 
	`fGA_SC_øã
(0), 
	`fGA_SC_Á˘‹
(0.0),

131 
	`fDevüti⁄sFromT¨gës
(0),

132 
	$fWeightR™ge
 (1.0)

134 
	}
}

140 
	gTMVA
::
MëhodMLP
::~
	$MëhodMLP
()

142 
	}
}

144 
TMVA
::
MëhodMLP
::
	$Tøö
()

146 
	`Tøö
(
	`NumCy˛es
());

147 
	}
}

154 
Boﬁ_t
 
	gTMVA
::
MëhodMLP
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

156 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2 )  
kTRUE
;

157 i‡(
ty≥
 =
Ty≥s
::
kMu…i˛ass
 )  
kTRUE
;

158 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
 )  
kTRUE
;

160  
kFALSE
;

161 
	}
}

166 
	gTMVA
::
MëhodMLP
::
	$Inô
()

169 
	`SëSig«lRe„ªn˚Cut
( 0.5 );

170 #ifde‡
MëhodMLP_U£Möuô__


171 
fgThis
 = 
this
;

173 
	}
}

197 
	gTMVA
::
MëhodMLP
::
	$De˛¨eO±i⁄s
()

199 
	`De˛¨eO±i⁄Ref
(
fTøöMëhodS
="BP", "TrainingMethod",

201 
	`AddPªDefVÆ
(
	`TSåög
("BP"));

202 
	`AddPªDefVÆ
(
	`TSåög
("GA"));

203 
	`AddPªDefVÆ
(
	`TSåög
("BFGS"));

205 
	`De˛¨eO±i⁄Ref
(
fLó∫R©e
=0.02, "LearningRate", "ANNÜearningÑateÖarameter");

206 
	`De˛¨eO±i⁄Ref
(
fDeˇyR©e
=0.01, "DecayRate", "DecayÑate forÜearningÖarameter");

207 
	`De˛¨eO±i⁄Ref
(
fTe°R©e
 =10, "TestRate", "Test for overtrainingÖerformedátÉach #thÉpochs");

208 
	`De˛¨eO±i⁄Ref
(
fEpochM⁄
 = 
kFALSE
, "EpochMonitoring", "ProvideÉpoch-wise monitoringÖlotsáccordingÅo TestRate (caution: causes big ROOT output file!)" );

210 
	`De˛¨eO±i⁄Ref
(
fSam∂ögFø˘i⁄
=1.0, "Sampling","Only 'Sampling' (randomly selected)ÉventsáreÅrainedÉachÉpoch");

211 
	`De˛¨eO±i⁄Ref
(
fSam∂ögEpoch
=1.0, "SamplingEpoch","Sampling is used forÅhe first 'SamplingEpoch'Épochs,áfterwards,állÉventsáreÅaken forÅraining");

212 
	`De˛¨eO±i⁄Ref
(
fSam∂ögWeight
=1.0, "SamplingImportance"," The sampling weights ofÉvents inÉpochs which successful (worseÉstimatorÅhan before)áre multiplied with SamplingImportance,ÉlseÅheyáre divided.");

214 
	`De˛¨eO±i⁄Ref
(
fSam∂ögTøöög
=
kTRUE
, "SamplingTraining","TheÅraining sample is sampled");

215 
	`De˛¨eO±i⁄Ref
(
fSam∂ögTe°ög

kFALSE
, "SamplingTesting" ,"TheÅesting sample is sampled");

217 
	`De˛¨eO±i⁄Ref
(
fRe£tSãp
=50, "ResetStep", "How often BFGS shouldÑeset history");

218 
	`De˛¨eO±i⁄Ref
(
fTau
 =3.0, "Tau", "LineSearch \"size step\"");

220 
	`De˛¨eO±i⁄Ref
(
fBpModeS
="sequential", "BPMode",

222 
	`AddPªDefVÆ
(
	`TSåög
("sequential"));

223 
	`AddPªDefVÆ
(
	`TSåög
("batch"));

225 
	`De˛¨eO±i⁄Ref
(
fB©chSize
=-1, "BatchSize",

228 
	`De˛¨eO±i⁄Ref
(
fIm¥ovemít
=1e-30, "ConvergenceImprove",

231 
	`De˛¨eO±i⁄Ref
(
fSãps
=-1, "ConvergenceTests",

234 
	`De˛¨eO±i⁄Ref
(
fU£Reguœt‹
=
kFALSE
, "UseRegulator",

236 
	`De˛¨eO±i⁄Ref
(
fUpd©eLimô
=10000, "UpdateLimit",

238 
	`De˛¨eO±i⁄Ref
(
fCÆcuœãEº‹s
=
kFALSE
, "CalculateErrors",

241 
	`De˛¨eO±i⁄Ref
(
fWeightR™ge
=1.0, "WeightRange",

244 
	}
}

249 
	gTMVA
::
MëhodMLP
::
	$Pro˚ssO±i⁄s
()

251 
MëhodANNBa£
::
	`Pro˚ssO±i⁄s
();

254 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

255 
	`Log
(Ë<< 
kINFO


257 << 
Endl
;

261 i‡(
fTøöMëhodS
 ="BP" ) 
fTøöögMëhod
 = 
kBP
;

262 i‡(
fTøöMëhodS
 ="BFGS"Ë
fTøöögMëhod
 = 
kBFGS
;

263 i‡(
fTøöMëhodS
 ="GA" ) 
fTøöögMëhod
 = 
kGA
;

265 i‡(
fBpModeS
 ="£quítül"Ë
fBPMode
 = 
kSequítül
;

266 i‡(
fBpModeS
 ="b©ch"Ë
fBPMode
 = 
kB©ch
;

270 i‡(
fBPMode
 =
kB©ch
) {

271 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

272 
I¡_t
 
numEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

273 i‡(
fB©chSize
 < 1 || fB©chSizê> 
numEvíts
) fBatchSize =ÇumEvents;

275 
	}
}

280 
	gTMVA
::
MëhodMLP
::
	$InôülizeLó∫ögR©es
()

282 
	`Log
(Ë<< 
kDEBUG
 << "InôülizêÀ¨nögÑ©es" << 
Endl
;

283 
TSy«p£
 *
sy«p£
;

284 
I¡_t
 
numSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

285 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++) {

286 
sy«p£
 = (
TSy«p£
*)
fSy«p£s
->
	`At
(
i
);

287 
sy«p£
->
	`SëLó∫ögR©e
(
fLó∫R©e
);

289 
	}
}

294 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$CÆcuœãE°im©‹
–
Ty≥s
::
ETªeTy≥
 
åìTy≥
, 
I¡_t
 
iEpoch
 )

297 i‡(
åìTy≥
!=
Ty≥s
::
kTøöög
 &&ÅªeTy≥!=Ty≥s::
kTe°ög
) {

298 
	`Log
(Ë<< 
kFATAL
 << "<CÆcuœãE°im©‹> f©ÆÉº‹: wr⁄gÅªêty≥: " << 
åìTy≥
 << 
Endl
;

301 
Ty≥s
::
ETªeTy≥
 
ßveTy≥
 = 
	`D©a
()->
	`GëCuºítTy≥
();

302 
	`D©a
()->
	`SëCuºítTy≥
(
åìTy≥
);

305 
TSåög
 
ty≥
 = (
åìTy≥
 =
Ty≥s
::
kTøöög
 ? "train" : "test");

306 
TSåög
 
«me
 = 
	`F‹m
("c⁄vîgí˚ã°___mÕ_%s_ïoch_%04i", 
ty≥
.
	`D©a
(), 
iEpoch
);

307 
TSåög
 
«meB
 = 
«me
 + "_B";

308 
TSåög
 
«meS
 = 
«me
 + "_S";

309 
I¡_t
 
nbö
 = 100;

310 
Flﬂt_t
 
limô
 = 2;

311 
TH1
* 
hi°S
 = 0;

312 
TH1
* 
hi°B
 = 0;

313 i‡(
fEpochM⁄
 && 
iEpoch
 >0 && !
	`DoRegªssi⁄
()) {

314 
hi°S
 = 
√w
 
	`TH1F
–
«meS
,ÇameS, 
nbö
, -
limô
,Üimit );

315 
hi°B
 = 
√w
 
	`TH1F
–
«meB
,ÇameB, 
nbö
, -
limô
,Üimit );

318 
DoubÀ_t
 
e°im©‹
 = 0;

321 
I¡_t
 
nEvíts
 = 
	`GëNEvíts
();

322 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

323 
UI¡_t
 
nTgts
 = 
	`D©aInfo
().
	`GëNT¨gës
();

326 
Flﬂt_t
 
sumOfWeights
 = 0.f;

327 if–
fWeightR™ge
 < 1.f ){

328 
fDevüti⁄sFromT¨gës
 = 
√w
 
°d
::
ve˘‹
<°d::
∑ú
<
Flﬂt_t
,Flﬂt_t> >(
nEvíts
);

331 
I¡_t
 
i
 = 0; i < 
nEvíts
; i++) {

333 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
i
);

335 i‡((
ev
->
	`GëWeight
(Ë< 0Ë&& 
	`Ign‹eEvítsWôhNegWeightsInTøöög
()

336 && (
ßveTy≥
 =
Ty≥s
::
kTøöög
)){

340 
DoubÀ_t
 
w
 = 
ev
->
	`GëWeight
();

342 
	`F‹˚Nëw‹kI≈uts
–
ev
 );

343 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

345 
DoubÀ_t
 
d
 = 0, 
v
 = 0;

346 i‡(
	`DoRegªssi⁄
()) {

347 
UI¡_t
 
ôgt
 = 0; itgà< 
nTgts
; itgt++) {

348 
v
 = 
	`GëOuçutNeur⁄
–
ôgt
 )->
	`GëA˘iv©i⁄VÆue
();

349 
DoubÀ_t
 
èrgëVÆue
 = 
ev
->
	`GëT¨gë
–
ôgt
 );

350 
DoubÀ_t
 
dt
 = 
v
 - 
èrgëVÆue
;

351 
d
 +(
dt
*dt);

353 
e°im©‹
 +
d
*
w
;

354 } i‡(
	`DoMu…i˛ass
() ) {

355 
UI¡_t
 
˛s
 = 
ev
->
	`GëCœss
();

356 i‡(
fE°im©‹
==
kCE
){

357 
DoubÀ_t
 
	`n‹m
(0);

358 
UI¡_t
 
i˛s
 = 0; i˛†< 
nCœs£s
; icls++) {

359 
Flﬂt_t
 
a˘iv©i⁄VÆue
 = 
	`GëOuçutNeur⁄
–
i˛s
 )->
	`GëA˘iv©i⁄VÆue
();

360 
n‹m
 +
	`exp
–
a˘iv©i⁄VÆue
 );

361 if(
i˛s
==
˛s
)

362 
d
 = 
	`exp
–
a˘iv©i⁄VÆue
 );

364 
d
 = -
TM©h
::
	`Log
(d/
n‹m
);

367 
UI¡_t
 
i˛s
 = 0; i˛†< 
nCœs£s
; icls++) {

368 
DoubÀ_t
 
desúed
 = (
i˛s
==
˛s
) ? 1.0 : 0.0;

369 
v
 = 
	`GëOuçutNeur⁄
–
i˛s
 )->
	`GëA˘iv©i⁄VÆue
();

370 
d
 = (
desúed
-
v
)*(desired-v);

373 
e°im©‹
 +
d
*
w
;

375 
DoubÀ_t
 
desúed
 = 
	`D©aInfo
().
	`IsSig«l
(
ev
)?1.:0.;

376 
v
 = 
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
();

377 i‡(
fE°im©‹
==
kMSE
Ë
d
 = (
desúed
-
v
)*(desired-v);

378 i‡(
fE°im©‹
==
kCE
Ë
d
 = -2*(
desúed
*
TM©h
::
	`Log
(
v
)+(1-desired)*TMath::Log(1-v));

379 
e°im©‹
 +
d
*
w
;

382 if–
fDevüti⁄sFromT¨gës
 )

383 
fDevüti⁄sFromT¨gës
->
	`push_back
(
°d
::
∑ú
<
Flﬂt_t
,Flﬂt_t>(
d
,
w
));

385 
sumOfWeights
 +
w
;

389 i‡(
	`D©aInfo
().
	`IsSig«l
(
ev
Ë&& 
hi°S
 !0Ëhi°S->
	`Fûl
–(
v
), (
w
) );

390 i‡(
hi°B
 !0Ëhi°B->
	`Fûl
–(
v
), (
w
) );

394 if–
fDevüti⁄sFromT¨gës
 ) {

395 
°d
::
	`s‹t
(
fDevüti⁄sFromT¨gës
->
	`begö
(),fDevüti⁄sFromT¨gës->
	`íd
());

397 
Flﬂt_t
 
sumOfWeightsInR™ge
 = 
fWeightR™ge
*
sumOfWeights
;

398 
e°im©‹
 = 0.f;

400 
Flﬂt_t
 
weightR™geCut
 = 
fWeightR™ge
*
sumOfWeights
;

401 
Flﬂt_t
 
weightSum
 = 0.f;

402 
°d
::
ve˘‹
<°d::
∑ú
<
Flﬂt_t
,Flﬂt_t> >::
ôî©‹
 
ôDev
 = 
fDevüti⁄sFromT¨gës
->
	`begö
(), 
ôDevEnd
 = fDevüti⁄sFromT¨gës->
	`íd
(); itDev != itDevEnd; ++itDev ){

403 
devüti⁄
 = (*
ôDev
).
fú°
;

404 
devWeight
 = (*
ôDev
).
£c⁄d
;

405 
weightSum
 +
devWeight
;

406 if–
weightSum
 <
weightR™geCut
 ) {

407 
e°im©‹
 +
devWeight
*
devüti⁄
;

411 
sumOfWeights
 = 
sumOfWeightsInR™ge
;

412 
dñëe
 
fDevüti⁄sFromT¨gës
;

415 i‡(
hi°S
 !0Ë
fEpochM⁄Hi°S
.
	`push_back
( histS );

416 i‡(
hi°B
 !0Ë
fEpochM⁄Hi°B
.
	`push_back
( histB );

421 i‡(
	`DoRegªssi⁄
()Ë
e°im©‹
 =É°im©‹/
	`Flﬂt_t
(
sumOfWeights
);

422 i‡(
	`DoMu…i˛ass
()Ë
e°im©‹
 =É°im©‹/
	`Flﬂt_t
(
sumOfWeights
);

423 
e°im©‹
 =É°im©‹/
	`Flﬂt_t
(
sumOfWeights
);

428 
	`D©a
()->
	`SëCuºítTy≥
–
ßveTy≥
 );

431 i‡(
fEpochM⁄
 && 
iEpoch
 >0 && !
	`DoRegªssi⁄
(Ë&& 
åìTy≥
 =
Ty≥s
::
kTøöög
) {

432 
	`Cª©eWeightM⁄ô‹ögHi°s
–
	`F‹m
("ïochm⁄ô‹ög___ïoch_%04i_weights_hi°", 
iEpoch
), &
fEpochM⁄Hi°W
 );

435  
e°im©‹
;

436 
	}
}

440 
	gTMVA
::
MëhodMLP
::
	$Tøö
(
I¡_t
 
nEpochs
)

442 i‡(
fNëw‹k
 == 0) {

444 
	`Log
(Ë<< 
kFATAL
 <<"ANN Nëw‹k i†nŸ inôülized, doög iànow!"<< 
Endl
;

445 
	`SëA«lysisTy≥
(
	`GëA«lysisTy≥
());

447 
	`Log
(Ë<< 
kDEBUG
 << "ªöôülizêÀ¨nögÑ©es" << 
Endl
;

448 
	`InôülizeLó∫ögR©es
();

449 
	`Log
(Ë<< 
kHEADER
;

450 
	`PrötMesßge
("Training Network");

451 
	`Log
(Ë<< 
Endl
;

452 
I¡_t
 
nEvíts
=
	`GëNEvíts
();

453 
I¡_t
 
nSy«p£s
=
fSy«p£s
->
	`GëE¡rõsFa°
();

454 i‡(
nSy«p£s
>
nEvíts
)

455 
	`Log
()<<
kWARNING
<<"ANNÅoÿcom∂iˇãd: #evíts="<<
nEvíts
<<"\t#sy«p£s="<<
nSy«p£s
<<
Endl
;

457 
fIPyMaxIãr
 = 
nEpochs
;

458 i‡(
fI¡îa˘ive
 && fI¡îa˘ive->
	`NŸInôülized
()){

459 
°d
::
ve˘‹
<
TSåög
> 
tôÀs
 = {"Error onÅraining set", "Error onÅest set"};

460 
fI¡îa˘ive
->
	`Inô
(
tôÀs
);

463 #ifde‡
MëhodMLP_U£Möuô__


464 i‡(
u£Möuô
Ë
	`MöuôMöimize
();

466 i‡(
fTøöögMëhod
 =
kGA
Ë
	`GíëicMöimize
();

467 i‡(
fTøöögMëhod
 =
kBFGS
Ë
	`BFGSMöimize
(
nEpochs
);

468 
	`BackPr›ag©i⁄Möimize
(
nEpochs
);

471 
åaöE
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 0 ) ;

472 
ã°E
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTe°ög
, 0 ) ;

473 i‡(
fU£Reguœt‹
){

474 
	`Log
()<<
kINFO
<<"FöÆizög h™dlög o‡Reguœt‹Åîms,ÅøöE="<<
åaöE
<<"Åe°E="<<
ã°E
<<
Endl
;

475 
	`Upd©eReguœt‹s
();

476 
	`Log
()<<
kINFO
<<"D⁄êwôh h™dlög o‡Reguœt‹Åîms"<<
Endl
;

479 if–
fCÆcuœãEº‹s
 || 
fU£Reguœt‹
 )

481 
I¡_t
 
numSy«p£s
=
fSy«p£s
->
	`GëE¡rõsFa°
();

482 
fInvHessün
.
	`ResizeTo
(
numSy«p£s
,numSynapses);

483 
	`GëAµroxInvHessün
–
fInvHessün
 ,
Ál£
);

485 
	`ExôFromTøöög
();

486 
	}
}

491 
	gTMVA
::
MëhodMLP
::
	$BFGSMöimize
–
I¡_t
 
nEpochs
 )

493 
Timî
 
	`timî
–(
fSãps
>0?100:
nEpochs
), 
	`GëName
() );

496 
I¡_t
 
nböTe°
 = 
	`I¡_t
(
nEpochs
/
fTe°R©e
);

497 if(!
	`IsSûítFûe
())

499 
fE°im©‹Hi°Tøö
 = 
√w
 
	`TH1F
( "estimatorHistTrain", "trainingÉstimator",

500 
nböTe°
, 
	`I¡_t
(
fTe°R©e
/2),ÇbinTest*fTestRate+Int_t(fTestRate/2) );

501 
fE°im©‹Hi°Te°
 = 
√w
 
	`TH1F
( "estimatorHistTest", "testÉstimator",

502 
nböTe°
, 
	`I¡_t
(
fTe°R©e
/2),ÇbinTest*fTestRate+Int_t(fTestRate/2) );

505 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

506 
I¡_t
 
nWeights
 = 
nSy«p£s
;

508 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

509 
TSy«p£
* 
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

510 
sy«p£
->
	`SëDEDw
(0.0);

513 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`buf„r
–
nWeights
 );

514 
I¡_t
 
i
=0;i<
nWeights
;i++Ë
buf„r
[i] = 0.;

516 
TM©rixD
 
	`Dú
 ( 
nWeights
, 1 );

517 
TM©rixD
 
	`Hessün
 ( 
nWeights
,ÇWeights );

518 
TM©rixD
 
	`Gamma
 ( 
nWeights
, 1 );

519 
TM©rixD
 
	`Dñè
 ( 
nWeights
, 1 );

520 
I¡_t
 
RegUpd©eCD
=0;

521 
I¡_t
 
RegUpd©eTimes
=0;

522 
DoubÀ_t
 
AccuEº‹
=0;

524 
DoubÀ_t
 
åaöE
 = -1;

525 
DoubÀ_t
 
ã°E
 = -1;

527 
fLa°AÕha
 = 0.;

529 if(
fSam∂ögTøöög
 || 
fSam∂ögTe°ög
)

530 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0,
fR™domSìd
);

532 i‡(
fSãps
 > 0Ë
	`Log
(Ë<< 
kINFO
 << "I«ccuøãÖrogªs†timög f‹ MLP... " << 
Endl
;

533 
timî
.
	`DøwProgªssB¨
( 0 );

536 
I¡_t
 
i
 = 0; i < 
nEpochs
; i++) {

538 i‡(
fExôFromTøöög
) ;

539 
fIPyCuºítIãr
 = 
i
;

540 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
) {

541 i‡((
i
+1)%
fTe°R©e
 == 0 || (i == 0)) {

542 i‡(
fSam∂ögTøöög
) {

543 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

544 
	`D©a
()->
	`InôSam∂ög
(
fSam∂ögFø˘i⁄
,
fSam∂ögWeight
);

545 
	`D©a
()->
	`Cª©eSam∂ög
();

547 i‡(
fSam∂ögTe°ög
) {

548 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTe°ög
 );

549 
	`D©a
()->
	`InôSam∂ög
(
fSam∂ögFø˘i⁄
,
fSam∂ögWeight
);

550 
	`D©a
()->
	`Cª©eSam∂ög
();

555 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

556 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0);

557 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTe°ög
 );

558 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0);

560 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

563 i‡(
fU£Reguœt‹
) {

564 
	`Upd©ePri‹s
();

565 
RegUpd©eCD
++;

569 
	`SëGammaDñè
–
Gamma
, 
Dñè
, 
buf„r
 );

571 i‡(
i
 % 
fRe£tSãp
 =0 && i<0.5*
nEpochs
) {

572 
	`Sãïe°Dú
–
Dú
 );

573 
Hessün
.
	`UnôM©rix
();

574 
RegUpd©eCD
=0;

577 i‡(
	`GëHessün
–
Hessün
, 
Gamma
, 
Dñè
 )) {

578 
	`Sãïe°Dú
–
Dú
 );

579 
Hessün
.
	`UnôM©rix
();

580 
RegUpd©eCD
=0;

582 
	`SëDú
–
Hessün
, 
Dú
 );

585 
DoubÀ_t
 
dEº‹
=0;

586 i‡(
	`DîivDú
–
Dú
 ) > 0) {

587 
	`Sãïe°Dú
–
Dú
 );

588 
Hessün
.
	`UnôM©rix
();

589 
RegUpd©eCD
=0;

591 i‡(
	`LöeSórch
–
Dú
, 
buf„r
, &
dEº‹
 )) {

592 
Hessün
.
	`UnôM©rix
();

593 
	`Sãïe°Dú
–
Dú
 );

594 
RegUpd©eCD
=0;

595 i‡(
	`LöeSórch
(
Dú
, 
buf„r
, &
dEº‹
)) {

596 
i
 = 
nEpochs
;

597 
	`Log
(Ë<< 
kFATAL
 << "Löê£¨ch faûed! HugêåoubÀ†somewhîe..." << 
Endl
;

602 i‡(
dEº‹
<0Ë
	`Log
()<<
kWARNING
<<"\¬eg©ivêdEº‹=" <<dEº‹<<
Endl
;

603 
AccuEº‹
+=
dEº‹
;

605 i‡–
fU£Reguœt‹
 && 
RegUpd©eTimes
<
fUpd©eLimô
 && 
RegUpd©eCD
>=5 && 
	`Ábs
(
dEº‹
)<0.1*
AccuEº‹
) {

606 
	`Log
()<<
kDEBUG
<<"\n\nUpd©êªguœt‹†"<<
RegUpd©eTimes
<<" o¿ïoch "<<
i
<<"\tdEº‹="<<
dEº‹
<<
Endl
;

607 
	`Upd©eReguœt‹s
();

608 
Hessün
.
	`UnôM©rix
();

609 
RegUpd©eCD
=0;

610 
RegUpd©eTimes
++;

611 
AccuEº‹
=0;

616 i‡((
i
+1)%
fTe°R©e
 == 0) {

619 
åaöE
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 
i
 ) ;

620 
ã°E
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTe°ög
, 
i
 ) ;

621 i‡(
fI¡îa˘ive
ËfI¡îa˘ive->
	`AddPoöt
(
i
+1, 
åaöE
, 
ã°E
);

622 if(!
	`IsSûítFûe
())

624 
fE°im©‹Hi°Tøö
->
	`Fûl
–
i
+1, 
åaöE
 );

625 
fE°im©‹Hi°Te°
 ->
	`Fûl
–
i
+1, 
ã°E
 );

627 
Boﬁ_t
 
suc˚ss
 = 
kFALSE
;

628 i‡((
ã°E
 < 
	`GëCuºítVÆue
()) || (GetCurrentValue()<1e-100)) {

629 
suc˚ss
 = 
kTRUE
;

631 
	`D©a
()->
	`EvítResu…
–
suc˚ss
 );

633 
	`SëCuºítVÆue
–
ã°E
 );

634 i‡(
	`HasC⁄vîged
()) {

635 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
) {

636 
I¡_t
 
√wEpoch
 = 
	`I¡_t
(
fSam∂ögEpoch
*
nEpochs
);

637 
i
 = 
√wEpoch
;

638 
	`Re£tC⁄vîgí˚Cou¡î
();

645 
TSåög
 
c⁄vText
 = 
	`F‹m
–"<D^2> (åaö/ã°/ïoch): %.4g/%.4g/%d", 
åaöE
, 
ã°E
,
i
 );

646 i‡(
fSãps
 > 0) {

647 
Flﬂt_t
 
¥ogªss
 = 0;

648 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
)

650 
¥ogªss
 = 
	`Progªss
()*
fSam∂ögFø˘i⁄
*100*
fSam∂ögEpoch
;

654 
¥ogªss
 = 100.0*(
fSam∂ögFø˘i⁄
*
fSam∂ögEpoch
+(1.0-fSam∂ögEpoch)*
	`Progªss
());

656 
Flﬂt_t
 
¥ogªss2
100.0*
RegUpd©eTimes
/
fUpd©eLimô
;

657 i‡(
¥ogªss2
>
¥ogªss
)Örogress=progress2;

658 
timî
.
	`DøwProgªssB¨
–
	`I¡_t
(
¥ogªss
), 
c⁄vText
 );

661 
I¡_t
 
¥ogªss
=
	`I¡_t
(
nEpochs
*
RegUpd©eTimes
/
	`Flﬂt_t
(
fUpd©eLimô
));

662 i‡(
¥ogªss
<
i
)Örogress=i;

663 
timî
.
	`DøwProgªssB¨
–
¥ogªss
, 
c⁄vText
 );

667 i‡(
fgPRINT_SEQ
) {

668 
	`PrötNëw‹k
();

669 
	`WaôF‹Keybﬂrd
();

672 
	}
}

676 
	gTMVA
::
MëhodMLP
::
SëGammaDñè
–
TM©rixD
 &
Gamma
, TM©rixD &
Dñè
, 
°d
::
ve˘‹
<
DoubÀ_t
> &
buf„r
 )

678 
I¡_t
 
nWeights
 = 
fSy«p£s
->
GëE¡rõsFa°
();

680 
I¡_t
 
	gIDX
 = 0;

681 
I¡_t
 
	gnSy«p£s
 = 
fSy«p£s
->
GëE¡rõsFa°
();

682 
I¡_t
 
	gi
=0;i<
	gnSy«p£s
;i++) {

683 
TSy«p£
 *
	gsy«p£
 = (TSy«p£*)
fSy«p£s
->
At
(
i
);

684 
	gGamma
[
IDX
++][0] = -
sy«p£
->
GëDEDw
();

687 
I¡_t
 
	gi
=0;i<
	gnWeights
;i++Ë
	gDñè
[
i
][0] = 
buf„r
[i];

689 
CompuãDEDw
();

691 
	gIDX
 = 0;

692 
I¡_t
 
	gi
=0;i<
	gnSy«p£s
;i++)

694 
TSy«p£
 *
	gsy«p£
 = (TSy«p£*)
fSy«p£s
->
At
(
i
);

695 
	gGamma
[
IDX
++][0] +
sy«p£
->
GëDEDw
();

701 
	gTMVA
::
MëhodMLP
::
	$CompuãDEDw
()

703 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

704 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

705 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

706 
sy«p£
->
	`SëDEDw
( 0.0 );

709 
I¡_t
 
nEvíts
 = 
	`GëNEvíts
();

710 
I¡_t
 
nPosEvíts
 = 
nEvíts
;

711 
I¡_t
 
i
=0;i<
nEvíts
;i++) {

713 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
i
);

714 i‡((
ev
->
	`GëWeight
(Ë< 0Ë&& 
	`Ign‹eEvítsWôhNegWeightsInTøöög
()

715 && (
	`D©a
()->
	`GëCuºítTy≥
(Ë=
Ty≥s
::
kTøöög
)){

716 --
nPosEvíts
;

720 
	`SimuœãEvít
–
ev
 );

722 
I¡_t
 
j
=0;j<
nSy«p£s
;j++) {

723 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
j
);

724 
sy«p£
->
	`SëDEDw
–sy«p£->
	`GëDEDw
(Ë+ sy«p£->
	`GëDñè
() );

728 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

729 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

730 
DoubÀ_t
 
DEDw
=
sy«p£
->
	`GëDEDw
();

731 i‡(
fU£Reguœt‹
Ë
DEDw
+=
fPri‹Dev
[
i
];

732 
sy«p£
->
	`SëDEDw
–
DEDw
 / 
nPosEvíts
 );

734 
	}
}

738 
	gTMVA
::
MëhodMLP
::
	$SimuœãEvít
–c⁄° 
Evít
* 
ev
 )

740 
DoubÀ_t
 
evítWeight
 = 
ev
->
	`GëWeight
();

742 
	`F‹˚Nëw‹kI≈uts
–
ev
 );

743 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

745 i‡(
	`DoRegªssi⁄
()) {

746 
UI¡_t
 
¡gt
 = 
	`D©aInfo
().
	`GëNT¨gës
();

747 
UI¡_t
 
ôgt
 = 0; itgà< 
¡gt
; itgt++) {

748 
DoubÀ_t
 
desúed
 = 
ev
->
	`GëT¨gë
(
ôgt
);

749 
DoubÀ_t
 
îr‹
 = ( 
	`GëOuçutNeur⁄
–
ôgt
 )->
	`GëA˘iv©i⁄VÆue
(Ë- 
desúed
 )*
evítWeight
;

750 
	`GëOuçutNeur⁄
–
ôgt
 )->
	`SëEº‹
(
îr‹
);

752 } i‡(
	`DoMu…i˛ass
()) {

753 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

754 
UI¡_t
 
˛s
 = 
ev
->
	`GëCœss
();

755 
UI¡_t
 
i˛s
 = 0; i˛†< 
nCœs£s
; icls++) {

756 
DoubÀ_t
 
desúed
 = ( 
˛s
==
i˛s
 ? 1.0 : 0.0 );

757 
DoubÀ_t
 
îr‹
 = ( 
	`GëOuçutNeur⁄
–
i˛s
 )->
	`GëA˘iv©i⁄VÆue
(Ë- 
desúed
 )*
evítWeight
;

758 
	`GëOuçutNeur⁄
–
i˛s
 )->
	`SëEº‹
(
îr‹
);

761 
DoubÀ_t
 
desúed
 = 
	`GëDesúedOuçut
–
ev
 );

762 
DoubÀ_t
 
îr‹
=-1;

763 i‡(
fE°im©‹
==
kMSE
Ë
îr‹
 = ( 
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
(Ë- 
desúed
 )*
evítWeight
;

764 i‡(
fE°im©‹
==
kCE
Ë
îr‹
 = -
evítWeight
/(
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
(Ë-1 + 
desúed
);

765 
	`GëOuçutNeur⁄
()->
	`SëEº‹
(
îr‹
);

768 
	`CÆcuœãNeur⁄Dñès
();

769 
I¡_t
 
j
=0;j<
fSy«p£s
->
	`GëE¡rõsFa°
();j++) {

770 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
j
);

771 
sy«p£
->
	`InôDñè
();

772 
sy«p£
->
	`CÆcuœãDñè
();

774 
	}
}

778 
	gTMVA
::
MëhodMLP
::
	$Sãïe°Dú
–
TM©rixD
 &
Dú
 )

780 
I¡_t
 
IDX
 = 0;

781 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

783 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

784 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

785 
Dú
[
IDX
++][0] = -
sy«p£
->
	`GëDEDw
();

787 
	}
}

791 
Boﬁ_t
 
	gTMVA
::
MëhodMLP
::
	$GëHessün
–
TM©rixD
 &
Hessün
, TM©rixD &
Gamma
, TM©rixD &
Dñè
 )

793 
TM©rixD
 
	`gd
(
Gamma
, TM©rixD::
kTøn•o£Mu…
, 
Dñè
);

794 i‡((
DoubÀ_t
Ë
gd
[0][0] =0.Ë 
kTRUE
;

795 
TM©rixD
 
	`aHg
(
Hessün
, TM©rixD::
kMu…
, 
Gamma
);

796 
TM©rixD
 
	`tmp
(
Gamma
, TM©rixD::
kTøn•o£Mu…
, 
Hessün
);

797 
TM©rixD
 
	`gHg
(
Gamma
, TM©rixD::
kTøn•o£Mu…
, 
aHg
);

798 
DoubÀ_t
 
a
 = 1 / (DoubÀ_tË
gd
[0][0];

799 
DoubÀ_t
 
f
 = 1 + ((DoubÀ_t)
gHg
[0][0]*
a
);

800 
TM©rixD
 
	`ªs
(
	`TM©rixD
(
Dñè
, TM©rixD::
kMu…
, TM©rixD(TM©rixD::
kTøn•o£d
,Delta)));

801 
ªs
 *
f
;

802 
ªs
 -(
	`TM©rixD
(
Dñè
, 
TM©rixD
::
kMu…
, 
tmp
Ë+ TM©rixD(
aHg
, TMatrixD::kMult,

803 
	`TM©rixD
(
TM©rixD
::
kTøn•o£d
,
Dñè
)));

804 
ªs
 *
a
;

805 
Hessün
 +
ªs
;

807  
kFALSE
;

808 
	}
}

812 
	gTMVA
::
MëhodMLP
::
	$SëDú
–
TM©rixD
 &
Hessün
, TM©rixD &
dú
 )

814 
I¡_t
 
IDX
 = 0;

815 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

816 
TM©rixD
 
	`DEDw
(
nSy«p£s
, 1);

818 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

819 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

820 
DEDw
[
IDX
++][0] = 
sy«p£
->
	`GëDEDw
();

823 
dú
 = 
Hessün
 * 
DEDw
;

824 
I¡_t
 
i
=0;i<
IDX
;i++Ë
dú
[i][0] = -dir[i][0];

825 
	}
}

829 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$DîivDú
–
TM©rixD
 &
Dú
 )

831 
I¡_t
 
IDX
 = 0;

832 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

833 
DoubÀ_t
 
Resu…
 = 0.0;

835 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

836 
TSy«p£
 *
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

837 
Resu…
 +
Dú
[
IDX
++][0] * 
sy«p£
->
	`GëDEDw
();

839  
Resu…
;

840 
	}
}

844 
Boﬁ_t
 
	gTMVA
::
MëhodMLP
::
LöeSórch
(
TM©rixD
 &
Dú
, 
°d
::
ve˘‹
<
DoubÀ_t
> &
buf„r
, DoubÀ_t* 
dEº‹
)

846 
I¡_t
 
	gIDX
 = 0;

847 
I¡_t
 
	gnSy«p£s
 = 
fSy«p£s
->
GëE¡rõsFa°
();

848 
I¡_t
 
	gnWeights
 = 
nSy«p£s
;

850 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
Origö
(
nWeights
);

851 
I¡_t
 
	gi
=0;i<
	gnSy«p£s
;i++) {

852 
TSy«p£
 *
	gsy«p£
 = (TSy«p£*)
fSy«p£s
->
At
(
i
);

853 
	gOrigö
[
i
] = 
sy«p£
->
GëWeight
();

856 
DoubÀ_t
 
	gîr1
 = 
GëEº‹
();

857 
DoubÀ_t
 
	gîrOrigö
=
îr1
;

858 
DoubÀ_t
 
	gÆpha1
 = 0.;

859 
DoubÀ_t
 
	gÆpha2
 = 
fLa°AÕha
;

862 i‡(
	gÆpha2
 < 0.01)álpha2 = 0.01;

863 i‡(
	gÆpha2
 > 2.0)álpha2 = 2.0;

864 
DoubÀ_t
 
	gÆpha_‹igöÆ
 = 
Æpha2
;

865 
DoubÀ_t
 
	gÆpha3
 = 
Æpha2
;

867 
SëDúWeights
–
Origö
, 
Dú
, 
Æpha2
 );

868 
DoubÀ_t
 
	gîr2
 = 
GëEº‹
();

870 
DoubÀ_t
 
	gîr3
 = 
îr2
;

871 
Boﬁ_t
 
	gbögo
 = 
kFALSE
;

874 i‡(
	gîr1
 > 
	gîr2
) {

875 
I¡_t
 
	gi
=0;i<100;i++) {

876 
	gÆpha3
 *
fTau
;

877 
SëDúWeights
(
Origö
, 
Dú
, 
Æpha3
);

878 
	gîr3
 = 
GëEº‹
();

879 i‡(
	gîr3
 > 
	gîr2
) {

880 
	gbögo
 = 
kTRUE
;

883 
	gÆpha1
 = 
Æpha2
;

884 
	gîr1
 = 
îr2
;

885 
	gÆpha2
 = 
Æpha3
;

886 
	gîr2
 = 
îr3
;

888 i‡(!
	gbögo
) {

889 
SëDúWeights
(
Origö
, 
Dú
, 0.);

890  
	gkTRUE
;

894 
I¡_t
 
	gi
=0;i<100;i++) {

895 
	gÆpha2
 /
fTau
;

896 i‡(
	gi
==50) {

897 
Log
(Ë<< 
kWARNING
 << "löe£¨ch, sèπögÅÿöve°ig©êdúe˘i⁄ oµosôêo‡°ì≥°DIR" << 
Endl
;

898 
	gÆpha2
 = -
Æpha_‹igöÆ
;

900 
SëDúWeights
(
Origö
, 
Dú
, 
Æpha2
);

901 
	gîr2
 = 
GëEº‹
();

902 i‡(
	gîr1
 > 
	gîr2
) {

903 
	gbögo
 = 
kTRUE
;

906 
	gÆpha3
 = 
Æpha2
;

907 
	gîr3
 = 
îr2
;

909 i‡(!
	gbögo
) {

910 
SëDúWeights
(
Origö
, 
Dú
, 0.);

911 
Log
(Ë<< 
	gkWARNING
 << "löe£¨ch, faûedÉví i¿›posôêdúe˘i⁄ o‡°ì≥°DIR" << 
	gEndl
;

912 
	gfLa°AÕha
 = 0.05;

913  
	gkTRUE
;

917 i‡(
	gÆpha1
>0 && 
	gÆpha2
>0 && 
	gÆpha3
 > 0) {

918 
	gfLa°AÕha
 = 0.5 * (
Æpha1
 + 
Æpha3
 -

919 (
îr3
 - 
îr1
Ë/ (”º3 - 
îr2
Ë/ ( 
Æpha3
 - 
Æpha2
 )

920 - ( 
îr2
 - 
îr1
 ) / (
Æpha2
 - 
Æpha1
 )));

923 
	gfLa°AÕha
 = 
Æpha2
;

926 
	gfLa°AÕha
 = 
fLa°AÕha
 < 10000 ? fLastAlpha : 10000;

928 
SëDúWeights
(
Origö
, 
Dú
, 
fLa°AÕha
);

934 
DoubÀ_t
 
	gföÆEº‹
 = 
GëEº‹
();

935 i‡(
	gföÆEº‹
 > 
	gîr1
) {

936 
Log
(Ë<< 
	gkWARNING
 << "Line search increasedÉrror! Something is wrong."

937 << "fLa°AÕha=" << 
	gfLa°AÕha
 << "Æ123=" << 
	gÆpha1
 << " "

938 << 
	gÆpha2
 << " " << 
	gÆpha3
 << "Éº1="<< 
	gîr1
 << "ÉºföÆ=" << 
	gföÆEº‹
 << 
	gEndl
;

941 
I¡_t
 
	gi
=0;i<
	gnSy«p£s
;i++) {

942 
TSy«p£
 *
	gsy«p£
 = (TSy«p£*)
fSy«p£s
->
At
(
i
);

943 
	gbuf„r
[
IDX
] = 
sy«p£
->
GëWeight
(Ë- 
Origö
[IDX];

944 
	gIDX
++;

947 i‡(
	gdEº‹
Ë(*dEº‹)=(
îrOrigö
-
föÆEº‹
)/finalError;

949  
	gkFALSE
;

954 
	gTMVA
::
MëhodMLP
::
SëDúWeights
–
°d
::
ve˘‹
<
DoubÀ_t
> &
Origö
, 
TM©rixD
 &
Dú
, DoubÀ_à
Æpha
 )

956 
I¡_t
 
	gIDX
 = 0;

957 
I¡_t
 
	gnSy«p£s
 = 
fSy«p£s
->
GëE¡rõsFa°
();

959 
I¡_t
 
	gi
=0;i<
	gnSy«p£s
;i++) {

960 
TSy«p£
 *
	gsy«p£
 = (TSy«p£*)
fSy«p£s
->
At
(
i
);

961 
	gsy«p£
->
SëWeight
–
Origö
[
IDX
] + 
Dú
[IDX][0] * 
Æpha
 );

962 
	gIDX
++;

964 i‡(
	gfU£Reguœt‹
Ë
Upd©ePri‹s
();

970 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$GëEº‹
()

972 
I¡_t
 
nEvíts
 = 
	`GëNEvíts
();

973 
UI¡_t
 
¡gts
 = 
	`GëNT¨gës
();

974 
DoubÀ_t
 
Resu…
 = 0.;

976 
I¡_t
 
i
=0;i<
nEvíts
;i++) {

977 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
i
);

979 i‡((
ev
->
	`GëWeight
(Ë< 0Ë&& 
	`Ign‹eEvítsWôhNegWeightsInTøöög
()

980 && (
	`D©a
()->
	`GëCuºítTy≥
(Ë=
Ty≥s
::
kTøöög
)){

983 
	`SimuœãEvít
–
ev
 );

985 
DoubÀ_t
 
îr‹
 = 0.;

986 i‡(
	`DoRegªssi⁄
()) {

987 
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; itgt++) {

988 
îr‹
 +
	`GëMSEEº
–
ev
, 
ôgt
 );

990 } i‡–
	`DoMu…i˛ass
() ){

991  
UI¡_t
 
i˛s
 = 0, 
i˛sEnd
 = 
	`D©aInfo
().
	`GëNCœs£s
(); icls < iclsEnd; icls++ ){

992 
îr‹
 +
	`GëMSEEº
–
ev
, 
i˛s
 );

995 i‡(
fE°im©‹
==
kMSE
Ë
îr‹
 = 
	`GëMSEEº
–
ev
 );

996 i‡(
fE°im©‹
==
kCE
Ë
îr‹

	`GëCEEº
–
ev
 );

998 
Resu…
 +
îr‹
 * 
ev
->
	`GëWeight
();

1000 i‡(
fU£Reguœt‹
Ë
Resu…
+=
fPri‹
;

1001 i‡(
Resu…
<0Ë
	`Log
()<<
kWARNING
<<"\nNeg©ivêEº‹!!! :"<<Resu…-
fPri‹
<<"+"<<fPri‹<<
Endl
;

1002  
Resu…
;

1003 
	}
}

1007 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$GëMSEEº
–c⁄° 
Evít
* 
ev
, 
UI¡_t
 
ödex
 )

1009 
DoubÀ_t
 
îr‹
 = 0;

1010 
DoubÀ_t
 
ouçut
 = 
	`GëOuçutNeur⁄
–
ödex
 )->
	`GëA˘iv©i⁄VÆue
();

1011 
DoubÀ_t
 
èrgë
 = 0;

1012 i‡(
	`DoRegªssi⁄
()Ë
èrgë
 = 
ev
->
	`GëT¨gë
–
ödex
 );

1013 i‡(
	`DoMu…i˛ass
()Ë
èrgë
 = (
ev
->
	`GëCœss
(Ë=
ödex
 ? 1.0 : 0.0 );

1014 
èrgë
 = 
	`GëDesúedOuçut
–
ev
 );

1016 
îr‹
 = 0.5*(
ouçut
-
èrgë
)*(output-target);

1018  
îr‹
;

1020 
	}
}

1024 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$GëCEEº
–c⁄° 
Evít
* 
ev
, 
UI¡_t
 
ödex
 )

1026 
DoubÀ_t
 
îr‹
 = 0;

1027 
DoubÀ_t
 
ouçut
 = 
	`GëOuçutNeur⁄
–
ödex
 )->
	`GëA˘iv©i⁄VÆue
();

1028 
DoubÀ_t
 
èrgë
 = 0;

1029 i‡(
	`DoRegªssi⁄
()Ë
èrgë
 = 
ev
->
	`GëT¨gë
–
ödex
 );

1030 i‡(
	`DoMu…i˛ass
()Ë
èrgë
 = (
ev
->
	`GëCœss
(Ë=
ödex
 ? 1.0 : 0.0 );

1031 
èrgë
 = 
	`GëDesúedOuçut
–
ev
 );

1033 
îr‹
 = -(
èrgë
*
TM©h
::
	`Log
(
ouçut
)+(1-target)*TMath::Log(1-output));

1035  
îr‹
;

1036 
	}
}

1041 
	gTMVA
::
MëhodMLP
::
	$BackPr›ag©i⁄Möimize
(
I¡_t
 
nEpochs
)

1044 
Timî
 
	`timî
–(
fSãps
>0?100:
nEpochs
), 
	`GëName
() );

1045 
I¡_t
 
œãEpoch
 = (I¡_t)(
nEpochs
*0.95) - 1;

1048 
I¡_t
 
nböTe°
 = 
	`I¡_t
(
nEpochs
/
fTe°R©e
);

1049 if(!
	`IsSûítFûe
())

1051 
fE°im©‹Hi°Tøö
 = 
√w
 
	`TH1F
( "estimatorHistTrain", "trainingÉstimator",

1052 
nböTe°
, 
	`I¡_t
(
fTe°R©e
/2),ÇbinTest*fTestRate+Int_t(fTestRate/2) );

1053 
fE°im©‹Hi°Te°
 = 
√w
 
	`TH1F
( "estimatorHistTest", "testÉstimator",

1054 
nböTe°
, 
	`I¡_t
(
fTe°R©e
/2),ÇbinTest*fTestRate+Int_t(fTestRate/2) );

1056 if(
fSam∂ögTøöög
 || 
fSam∂ögTe°ög
)

1057 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0,
fR™domSìd
);

1059 i‡(
fSãps
 > 0Ë
	`Log
(Ë<< 
kINFO
 << "I«ccuøãÖrogªs†timög f‹ MLP... " << 
Endl
;

1060 
timî
.
	`DøwProgªssB¨
(0);

1063 
DoubÀ_t
 
åaöE
 = -1;

1064 
DoubÀ_t
 
ã°E
 = -1;

1067 
I¡_t
 
i
 = 0; i < 
nEpochs
; i++) {

1069 i‡(
fExôFromTøöög
) ;

1070 
fIPyCuºítIãr
 = 
i
;

1071 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
) {

1072 i‡((
i
+1)%
fTe°R©e
 == 0 || (i == 0)) {

1073 i‡(
fSam∂ögTøöög
) {

1074 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

1075 
	`D©a
()->
	`InôSam∂ög
(
fSam∂ögFø˘i⁄
,
fSam∂ögWeight
);

1076 
	`D©a
()->
	`Cª©eSam∂ög
();

1078 i‡(
fSam∂ögTe°ög
) {

1079 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTe°ög
 );

1080 
	`D©a
()->
	`InôSam∂ög
(
fSam∂ögFø˘i⁄
,
fSam∂ögWeight
);

1081 
	`D©a
()->
	`Cª©eSam∂ög
();

1086 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

1087 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0);

1088 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTe°ög
 );

1089 
	`D©a
()->
	`InôSam∂ög
(1.0,1.0);

1091 
	`D©a
()->
	`SëCuºítTy≥
–
Ty≥s
::
kTøöög
 );

1093 
	`TøöO√Epoch
();

1094 
	`DeˇySy«p£Weights
(
i
 >
œãEpoch
);

1097 i‡((
i
+1)%
fTe°R©e
 == 0) {

1098 
åaöE
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 
i
 );

1099 
ã°E
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTe°ög
, 
i
 );

1100 i‡(
fI¡îa˘ive
ËfI¡îa˘ive->
	`AddPoöt
(
i
+1, 
åaöE
, 
ã°E
);

1101 if(!
	`IsSûítFûe
())

1103 
fE°im©‹Hi°Tøö
->
	`Fûl
–
i
+1, 
åaöE
 );

1104 
fE°im©‹Hi°Te°
 ->
	`Fûl
–
i
+1, 
ã°E
 );

1106 
Boﬁ_t
 
suc˚ss
 = 
kFALSE
;

1107 i‡((
ã°E
 < 
	`GëCuºítVÆue
()) || (GetCurrentValue()<1e-100)) {

1108 
suc˚ss
 = 
kTRUE
;

1110 
	`D©a
()->
	`EvítResu…
–
suc˚ss
 );

1112 
	`SëCuºítVÆue
–
ã°E
 );

1113 i‡(
	`HasC⁄vîged
()) {

1114 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
) {

1115 
I¡_t
 
√wEpoch
 = 
	`I¡_t
(
fSam∂ögEpoch
*
nEpochs
);

1116 
i
 = 
√wEpoch
;

1117 
	`Re£tC⁄vîgí˚Cou¡î
();

1120 i‡(
œãEpoch
 > 
i
)ÜateEpoch = i;

1127 
TSåög
 
c⁄vText
 = 
	`F‹m
–"<D^2> (åaö/ã°): %.4g/%.4g", 
åaöE
, 
ã°E
 );

1128 i‡(
fSãps
 > 0) {

1129 
Flﬂt_t
 
¥ogªss
 = 0;

1130 i‡(
	`Flﬂt_t
(
i
)/
nEpochs
 < 
fSam∂ögEpoch
)

1131 
¥ogªss
 = 
	`Progªss
()*
fSam∂ögEpoch
*
fSam∂ögFø˘i⁄
*100;

1133 
¥ogªss
 = 100*(
fSam∂ögEpoch
*
fSam∂ögFø˘i⁄
+(1.0-fSam∂ögFø˘i⁄*fSam∂ögEpoch)*
	`Progªss
());

1135 
timî
.
	`DøwProgªssB¨
–
	`I¡_t
(
¥ogªss
), 
c⁄vText
 );

1138 
timî
.
	`DøwProgªssB¨
–
i
, 
c⁄vText
 );

1141 
	}
}

1146 
	gTMVA
::
MëhodMLP
::
	$TøöO√Epoch
()

1148 
I¡_t
 
nEvíts
 = 
	`D©a
()->
	`GëNEvíts
();

1151 
I¡_t
* 
ödex
 = 
√w
 I¡_t[
nEvíts
];

1152 
I¡_t
 
i
 = 0; i < 
nEvíts
; i++Ë
ödex
[i] = i;

1153 
	`ShufÊe
(
ödex
, 
nEvíts
);

1156 
I¡_t
 
i
 = 0; i < 
nEvíts
; i++) {

1158 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
ödex
[
i
]);

1159 i‡((
ev
->
	`GëWeight
(Ë< 0Ë&& 
	`Ign‹eEvítsWôhNegWeightsInTøöög
()

1160 && (
	`D©a
()->
	`GëCuºítTy≥
(Ë=
Ty≥s
::
kTøöög
)){

1164 
	`TøöO√Evít
(
ödex
[
i
]);

1167 i‡(
fBPMode
 =
kB©ch
 && (
i
+1)%
fB©chSize
 == 0) {

1168 
	`Adju°Sy«p£Weights
();

1169 i‡(
fgPRINT_BATCH
) {

1170 
	`PrötNëw‹k
();

1171 
	`WaôF‹Keybﬂrd
();

1176 i‡(
fgPRINT_SEQ
) {

1177 
	`PrötNëw‹k
();

1178 
	`WaôF‹Keybﬂrd
();

1182 
dñëe
[] 
ödex
;

1183 
	}
}

1194 
	gTMVA
::
MëhodMLP
::
	$ShufÊe
(
I¡_t
* 
ödex
, I¡_à
n
)

1196 
I¡_t
 
j
, 
k
;

1197 
I¡_t
 
a
 = 
n
 - 1;

1198 
I¡_t
 
i
 = 0; i < 
n
; i++) {

1199 
j
 = (
I¡_t
Ë(
‰gí
->
	`Rndm
(Ë* 
a
);

1200 i‡(
j
<
n
){

1201 
k
 = 
ödex
[
j
];

1202 
ödex
[
j
] = index[
i
];

1203 
ödex
[
i
] = 
k
;

1206 
	}
}

1212 
	gTMVA
::
MëhodMLP
::
	$DeˇySy«p£Weights
(
Boﬁ_t
 
œãEpoch
)

1214 
TSy«p£
* 
sy«p£
;

1215 
I¡_t
 
numSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

1216 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++) {

1217 
sy«p£
 = (
TSy«p£
*)
fSy«p£s
->
	`At
(
i
);

1218 i‡(
œãEpoch
Ë
sy«p£
->
	`DeˇyLó∫ögR©e
(
TM©h
::
	`Sqπ
(
fDeˇyR©e
));

1219 
sy«p£
->
	`DeˇyLó∫ögR©e
(
fDeˇyR©e
);

1221 
	}
}

1226 
	gTMVA
::
MëhodMLP
::
	$TøöO√EvítFa°
(
I¡_t
 
õvt
, 
Flﬂt_t
*& 
bønchV¨
, I¡_t& 
ty≥
)

1228 
	`GëEvít
(
õvt
);

1236 
DoubÀ_t
 
evítWeight
 = 1.0;

1239 
DoubÀ_t
 
desúed
;

1240 i‡(
ty≥
 =0Ë
desúed
 = 
fOuçut
->
	`GëMö
();

1241 
desúed
 = 
fOuçut
->
	`GëMax
();

1244 
DoubÀ_t
 
x
;

1245 
TNeur⁄
* 
√ur⁄
;

1247 
UI¡_t
 
j
 = 0; j < 
	`GëNv¨
(); j++) {

1248 
x
 = 
bønchV¨
[
j
];

1249 i‡(
	`IsN‹mÆi£d
()Ë
x
 = 
	`gToﬁs
().
	`N‹mV¨übÀ
–x, 
	`GëXmö
–
j
 ), 
	`GëXmax
( j ) );

1250 
√ur⁄
 = 
	`GëI≈utNeur⁄
(
j
);

1251 
√ur⁄
->
	`F‹˚VÆue
(
x
);

1254 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

1255 
	`Upd©eNëw‹k
(
desúed
, 
evítWeight
);

1256 
	}
}

1262 
	gTMVA
::
MëhodMLP
::
	$TøöO√Evít
(
I¡_t
 
õvt
)

1269 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
õvt
);

1270 
DoubÀ_t
 
evítWeight
 = 
ev
->
	`GëWeight
();

1271 
	`F‹˚Nëw‹kI≈uts
–
ev
 );

1272 
	`F‹˚Nëw‹kCÆcuœti⁄s
();

1273 i‡(
	`DoRegªssi⁄
()Ë
	`Upd©eNëw‹k
–
ev
->
	`GëT¨gës
(), 
evítWeight
 );

1274 i‡(
	`DoMu…i˛ass
()Ë
	`Upd©eNëw‹k
–*
	`D©aInfo
().
	`GëT¨gësF‹Mu…i˛ass
–
ev
 ), 
evítWeight
 );

1275 
	`Upd©eNëw‹k
–
	`GëDesúedOuçut
–
ev
 ), 
evítWeight
 );

1276 
	}
}

1281 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$GëDesúedOuçut
–c⁄° 
Evít
* 
ev
 )

1283  
	`D©aInfo
().
	`IsSig«l
(
ev
)?
fOuçut
->
	`GëMax
():fOuçut->
	`GëMö
();

1284 
	}
}

1290 
	gTMVA
::
MëhodMLP
::
	$Upd©eNëw‹k
(
DoubÀ_t
 
desúed
, DoubÀ_à
evítWeight
)

1292 
DoubÀ_t
 
îr‹
 = 
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
(Ë- 
desúed
;

1293 i‡(
fE°im©‹
==
kMSE
Ë
îr‹
 = 
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
(Ë- 
desúed
 ;

1294 i‡(
fE°im©‹
==
kCE
Ë
îr‹
 = -1./(
	`GëOuçutNeur⁄
()->
	`GëA˘iv©i⁄VÆue
(Ë-1 + 
desúed
);

1295 
	`Log
(Ë<< 
kFATAL
 << "E°im©‹Åy≥ un•ecifõd!!" << 
Endl
;

1296 
îr‹
 *
evítWeight
;

1297 
	`GëOuçutNeur⁄
()->
	`SëEº‹
(
îr‹
);

1298 
	`CÆcuœãNeur⁄Dñès
();

1299 
	`Upd©eSy«p£s
();

1300 
	}
}

1306 
	gTMVA
::
MëhodMLP
::
Upd©eNëw‹k
(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
desúed
, 
DoubÀ_t
 
evítWeight
)

1309 
DoubÀ_t
 
	gn‹m
 = 0.;

1310 
UI¡_t
 
	gi
 = 0, 
	giEnd
 = 
desúed
.
size
(); i < iEnd; ++i) {

1311 
DoubÀ_t
 
	ga˘
 = 
GëOuçutNeur⁄
(
i
)->
GëA˘iv©i⁄VÆue
();

1312 
	gn‹m
 +
TM©h
::
Exp
(
a˘
);

1316 
UI¡_t
 
	gi
 = 0, 
	giEnd
 = 
desúed
.
size
(); i < iEnd; ++i) {

1317 
DoubÀ_t
 
	ga˘
 = 
GëOuçutNeur⁄
(
i
)->
GëA˘iv©i⁄VÆue
();

1318 
DoubÀ_t
 
	gouçut
 = 
TM©h
::
Exp
(
a˘
Ë/ 
n‹m
;

1319 
DoubÀ_t
 
	gîr‹
 = 
ouçut
 - 
desúed
.
©
(
i
);

1320 
	gîr‹
 *
evítWeight
;

1321 
GëOuçutNeur⁄
(
i
)->
SëEº‹
(
îr‹
);

1325 
CÆcuœãNeur⁄Dñès
();

1326 
Upd©eSy«p£s
();

1332 
	gTMVA
::
MëhodMLP
::
	$CÆcuœãNeur⁄Dñès
()

1334 
TNeur⁄
* 
√ur⁄
;

1335 
I¡_t
 
numNeur⁄s
;

1336 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

1337 
TObjAºay
* 
curLayî
;

1341 
I¡_t
 
i
 = 
numLayîs
-1; i >= 0; i--) {

1342 
curLayî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

1343 
numNeur⁄s
 = 
curLayî
->
	`GëE¡rõsFa°
();

1345 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

1346 
√ur⁄
 = (
TNeur⁄
*Ë
curLayî
->
	`At
(
j
);

1347 
√ur⁄
->
	`CÆcuœãDñè
();

1350 
	}
}

1360 
	gTMVA
::
MëhodMLP
::
	$GíëicMöimize
()

1362 
	`PrötMesßge
("Minimizing Estimator with GA");

1365 
fGA_¥eCÆc
 = 1;

1366 
fGA_SC_°ïs
 = 10;

1367 
fGA_SC_øã
 = 5;

1368 
fGA_SC_Á˘‹
 = 0.95;

1369 
fGA_n°ïs
 = 30;

1372 
°d
::
ve˘‹
<
I¡îvÆ
*> 
ønges
;

1374 
I¡_t
 
numWeights
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

1375 
I¡_t
 
iv¨
=0; iv¨< 
numWeights
; ivar++) {

1376 
ønges
.
	`push_back
–
√w
 
	`I¡îvÆ
–0, 
	`GëXmax
(
iv¨
Ë- 
	`GëXmö
(ivar) ));

1379 
FôãrBa£
 *
gf
 = 
√w
 
	`GíëicFôãr
–*
this
, 
	`Log
().
	`GëPröãdSour˚
(), 
ønges
, 
	`GëO±i⁄s
() );

1380 
gf
->
	`Run
();

1382 
DoubÀ_t
 
e°im©‹
 = 
	`CÆcuœãE°im©‹
();

1383 
	`Log
(Ë<< 
kINFO
 << "GA:É°im©‹á·î o±imiz©i⁄: " << 
e°im©‹
 << 
Endl
;

1384 
	}
}

1389 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑ømëîs
)

1391  
CompuãE°im©‹
–
∑ømëîs
 );

1397 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
CompuãE°im©‹
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑ømëîs
)

1399 
TSy«p£
* 
sy«p£
;

1400 
I¡_t
 
	gnumSy«p£s
 = 
fSy«p£s
->
GëE¡rõsFa°
();

1402 
I¡_t
 
	gi
 = 0; i < 
	gnumSy«p£s
; i++) {

1403 
	gsy«p£
 = (
TSy«p£
*)
fSy«p£s
->
At
(
i
);

1404 
	gsy«p£
->
SëWeight
(
∑ømëîs
.
©
(
i
));

1406 i‡(
	gfU£Reguœt‹
Ë
Upd©ePri‹s
();

1408 
DoubÀ_t
 
	ge°im©‹
 = 
CÆcuœãE°im©‹
();

1410  
	ge°im©‹
;

1416 
	gTMVA
::
MëhodMLP
::
	$Upd©eSy«p£s
()

1418 
TNeur⁄
* 
√ur⁄
;

1419 
I¡_t
 
numNeur⁄s
;

1420 
TObjAºay
* 
curLayî
;

1421 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

1423 
I¡_t
 
i
 = 0; i < 
numLayîs
; i++) {

1424 
curLayî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

1425 
numNeur⁄s
 = 
curLayî
->
	`GëE¡rõsFa°
();

1427 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

1428 
√ur⁄
 = (
TNeur⁄
*Ë
curLayî
->
	`At
(
j
);

1429 i‡(
fBPMode
 =
kB©ch
Ë
√ur⁄
->
	`Upd©eSy«p£sB©ch
();

1430 
√ur⁄
->
	`Upd©eSy«p£sSequítül
();

1433 
	}
}

1438 
	gTMVA
::
MëhodMLP
::
	$Adju°Sy«p£Weights
()

1440 
TNeur⁄
* 
√ur⁄
;

1441 
I¡_t
 
numNeur⁄s
;

1442 
TObjAºay
* 
curLayî
;

1443 
I¡_t
 
numLayîs
 = 
fNëw‹k
->
	`GëE¡rõsFa°
();

1445 
I¡_t
 
i
 = 
numLayîs
-1; i >= 0; i--) {

1446 
curLayî
 = (
TObjAºay
*)
fNëw‹k
->
	`At
(
i
);

1447 
numNeur⁄s
 = 
curLayî
->
	`GëE¡rõsFa°
();

1449 
I¡_t
 
j
 = 0; j < 
numNeur⁄s
; j++) {

1450 
√ur⁄
 = (
TNeur⁄
*Ë
curLayî
->
	`At
(
j
);

1451 
√ur⁄
->
	`Adju°Sy«p£Weights
();

1454 
	}
}

1458 
	gTMVA
::
MëhodMLP
::
	$Upd©ePri‹s
()

1460 
fPri‹
=0;

1461 
fPri‹Dev
.
	`˛ór
();

1462 
I¡_t
 
nSy«p£s
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

1463 
I¡_t
 
i
=0;i<
nSy«p£s
;i++) {

1464 
TSy«p£
* 
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

1465 
fPri‹
+=0.5*
fReguœt‹s
[
fReguœt‹Idx
[
i
]]*(
sy«p£
->
	`GëWeight
())*(synapse->GetWeight());

1466 
fPri‹Dev
.
	`push_back
(
fReguœt‹s
[
fReguœt‹Idx
[
i
]]*(
sy«p£
->
	`GëWeight
()));

1468 
	}
}

1472 
	gTMVA
::
MëhodMLP
::
	$Upd©eReguœt‹s
()

1474 
TM©rixD
 
	`InvH
(0,0);

1475 
	`GëAµroxInvHessün
(
InvH
);

1476 
I¡_t
 
numSy«p£s
=
fSy«p£s
->
	`GëE¡rõsFa°
();

1477 
I¡_t
 
numReguœt‹s
=
fReguœt‹s
.
	`size
();

1478 
Flﬂt_t
 
gamma
=0,

1479 
v¨ün˚
=1.;

1480 
°d
::
ve˘‹
<
I¡_t
> 
	`nWDP
(
numReguœt‹s
);

1481 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`åa˚
(
numReguœt‹s
),
	`weightSum
(numRegulators);

1482 
i
=0;i<
numSy«p£s
;i++) {

1483 
TSy«p£
* 
sy«p£s
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

1484 
I¡_t
 
idx
=
fReguœt‹Idx
[
i
];

1485 
nWDP
[
idx
]++;

1486 
åa˚
[
idx
]+=
InvH
[
i
][i];

1487 
gamma
+=1-
fReguœt‹s
[
idx
]*
InvH
[
i
][i];

1488 
weightSum
[
idx
]+=(
sy«p£s
->
	`GëWeight
())*(synapses->GetWeight());

1490 i‡(
fE°im©‹
==
kMSE
) {

1491 i‡(
	`GëNEvíts
()>
gamma
Ë
v¨ün˚
=
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 0 )/(1-(gamma/GetNEvents()));

1492 
v¨ün˚
=
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 0 );

1496 
i
=0;i<
numReguœt‹s
;i++)

1499 
fReguœt‹s
[
i
]=
v¨ün˚
*
nWDP
[i]/(
weightSum
[i]+v¨ün˚*
åa˚
[i]);

1500 i‡(
fReguœt‹s
[
i
]<0) fRegulators[i]=0;

1501 
	`Log
()<<
kDEBUG
<<"R"<<
i
<<":"<<
fReguœt‹s
[i]<<"\t";

1503 
åaöE
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTøöög
, 0 ) ;

1504 
ã°E
 = 
	`CÆcuœãE°im©‹
–
Ty≥s
::
kTe°ög
, 0 ) ;

1506 
	`Log
()<<
kDEBUG
<<"\n"<<"åaöE:"<<
åaöE
<<"\âe°E:"<<
ã°E
<<"\tv¨ün˚:"<<
v¨ün˚
<<"\tgamma:"<<
gamma
<<
Endl
;

1508 
	}
}

1512 
	gTMVA
::
MëhodMLP
::
	$GëAµroxInvHessün
(
TM©rixD
& 
InvHessün
, 
boﬁ
 
ªguœã
)

1514 
I¡_t
 
numSy«p£s
=
fSy«p£s
->
	`GëE¡rõsFa°
();

1515 
InvHessün
.
	`ResizeTo
–
numSy«p£s
,ÇumSynapses );

1516 
InvHessün
=0;

1517 
TM©rixD
 
	`£ns
(
numSy«p£s
,1);

1518 
TM©rixD
 
	`£nsT
(1,
numSy«p£s
);

1519 
I¡_t
 
nEvíts
 = 
	`GëNEvíts
();

1520 
I¡_t
 
i
=0;i<
nEvíts
;i++) {

1521 
	`GëEvít
(
i
);

1522 
ouçutVÆue
=
	`GëMvaVÆue
();

1523 
	`GëOuçutNeur⁄
()->
	`SëEº‹
(1./
fOuçut
->
	`EvÆDîiv©ive
(GëOuçutNeur⁄()->
	`GëVÆue
()));

1524 
	`CÆcuœãNeur⁄Dñès
();

1525 
I¡_t
 
j
 = 0; j < 
numSy«p£s
; j++){

1526 
TSy«p£
* 
sy«p£s
 = (TSy«p£*)
fSy«p£s
->
	`At
(
j
);

1527 
sy«p£s
->
	`InôDñè
();

1528 
sy«p£s
->
	`CÆcuœãDñè
();

1529 
£ns
[
j
][0]=
£nsT
[0][j]=
sy«p£s
->
	`GëDñè
();

1531 i‡(
fE°im©‹
==
kMSE
 ) 
InvHessün
+=
£ns
*
£nsT
;

1532 i‡(
fE°im©‹
==
kCE
Ë
InvHessün
+=(
ouçutVÆue
*(1-ouçutVÆue))*
£ns
*
£nsT
;

1536 i‡(
ªguœã
) {

1537 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++){

1538 
InvHessün
[
i
][i]+=
fReguœt‹s
[
fReguœt‹Idx
[i]];

1542 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++){

1543 
InvHessün
[
i
][i]+=1e-6;

1547 
InvHessün
.
	`Invît
();

1549 
	}
}

1553 
DoubÀ_t
 
	gTMVA
::
MëhodMLP
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îrLowî
, DoubÀ_t* 
îrUµî
 )

1555 
DoubÀ_t
 
MvaVÆue
 = 
MëhodANNBa£
::
	`GëMvaVÆue
();

1558 i‡(!
fCÆcuœãEº‹s
 || 
îrLowî
==0 || 
îrUµî
==0)

1559  
MvaVÆue
;

1561 
DoubÀ_t
 
MvaUµî
,
MvaLowî
,
medün
,
v¨ün˚
;

1562 
I¡_t
 
numSy«p£s
=
fSy«p£s
->
	`GëE¡rõsFa°
();

1563 i‡(
fInvHessün
.
	`GëNcﬁs
()!=
numSy«p£s
) {

1564 
	`Log
(Ë<< 
kWARNING
 << "öc⁄si°íàdimísi⁄ " << 
fInvHessün
.
	`GëNcﬁs
(Ë<< " v†" << 
numSy«p£s
 << 
Endl
;

1566 
TM©rixD
 
	`£ns
(
numSy«p£s
,1);

1567 
TM©rixD
 
	`£nsT
(1,
numSy«p£s
);

1568 
	`GëOuçutNeur⁄
()->
	`SëEº‹
(1./
fOuçut
->
	`EvÆDîiv©ive
(GëOuçutNeur⁄()->
	`GëVÆue
()));

1570 
	`CÆcuœãNeur⁄Dñès
();

1571 
I¡_t
 
i
 = 0; i < 
numSy«p£s
; i++){

1572 
TSy«p£
* 
sy«p£s
 = (TSy«p£*)
fSy«p£s
->
	`At
(
i
);

1573 
sy«p£s
->
	`InôDñè
();

1574 
sy«p£s
->
	`CÆcuœãDñè
();

1575 
£nsT
[0][
i
]=
sy«p£s
->
	`GëDñè
();

1577 
£ns
.
	`Tøn•o£
(
£nsT
);

1578 
TM©rixD
 
sig
=
£nsT
*
fInvHessün
*
£ns
;

1579 
v¨ün˚
=
sig
[0][0];

1580 
medün
=
	`GëOuçutNeur⁄
()->
	`GëVÆue
();

1582 i‡(
v¨ün˚
<0) {

1583 
	`Log
()<<
kWARNING
<<"Neg©ivêv¨ün˚!!! medün=" << 
medün
 << "\tv¨ün˚(sigma^2)=" << 
v¨ün˚
 <<
Endl
;

1584 
v¨ün˚
=0;

1586 
v¨ün˚
=
	`sqπ
(variance);

1589 
MvaUµî
=
fOuçut
->
	`EvÆ
(
medün
+
v¨ün˚
);

1590 if(
îrUµî
)

1591 *
îrUµî
=
MvaUµî
-
MvaVÆue
;

1594 
MvaLowî
=
fOuçut
->
	`EvÆ
(
medün
-
v¨ün˚
);

1595 if(
îrLowî
)

1596 *
îrLowî
=
MvaVÆue
-
MvaLowî
;

1598  
MvaVÆue
;

1599 
	}
}

1602 #ifde‡
MëhodMLP_U£Möuô__


1607 
	gTMVA
::
MëhodMLP
::
	$MöuôMöimize
()

1609 
fNumbîOfWeights
 = 
fSy«p£s
->
	`GëE¡rõsFa°
();

1611 
TFôãr
* 
tfôãr
 = 
√w
 
	`TFôãr
–
fNumbîOfWeights
 );

1614 
DoubÀ_t
 
¨gs
[10];

1617 
¨gs
[0] = 2;

1618 
tfôãr
->
	`ExecuãComm™d
–"SET PRINTOUT", 
¨gs
, 1 );

1619 
tfôãr
->
	`ExecuãComm™d
–"SET NOWARNINGS", 
¨gs
, 0 );

1621 
w
[54];

1624 
I¡_t
 
ù¨
=0; i∑∏< 
fNumbîOfWeights
; ipar++) {

1625 
TSåög
 
∑rName
 = 
	`F‹m
("w%i", 
ù¨
);

1626 
tfôãr
->
	`SëP¨amëî
–
ù¨
,

1627 
∑rName
, 
w
[
ù¨
], 0.1, 0, 0 );

1631 
tfôãr
->
	`SëFCN
–&
IFCN
 );

1634 
¨gs
[0] = 2;

1635 
tfôãr
->
	`ExecuãComm™d
–"SET STRATEGY", 
¨gs
, 1 );

1638 
¨gs
[0] = 1e-04;

1639 
tfôãr
->
	`ExecuãComm™d
–"MIGRAD", 
¨gs
, 1 );

1641 
Boﬁ_t
 
doBëãr
 = 
kFALSE
;

1642 
Boﬁ_t
 
doEvíBëãr
 = 
kFALSE
;

1643 i‡(
doBëãr
) {

1644 
¨gs
[0] = 1e-04;

1645 
tfôãr
->
	`ExecuãComm™d
–"IMPROVE", 
¨gs
, 1 );

1647 i‡(
doEvíBëãr
) {

1648 
¨gs
[0] = 500;

1649 
tfôãr
->
	`ExecuãComm™d
–"MINOS", 
¨gs
, 1 );

1652 
	}
}

1668 
	gTMVA
::
MëhodMLP
::
	$IFCN
–
I¡_t
& 
≈¨s
, 
DoubÀ_t
* 
gød
, DoubÀ_à&
f
, DoubÀ_t* 
fôP¨s
, I¡_à
iÊag
 )

1670 ((
MëhodMLP
*)
	`GëThisPå
())->
	`FCN
–
≈¨s
, 
gød
, 
f
, 
fôP¨s
, 
iÊag
 );

1671 
	}
}

1673 
	$TTHREAD_TLS
(
I¡_t
Ë
nc
 = 0;

1674 
	$TTHREAD_TLS
(Ë
möf
 = 1000000;

1676 
TMVA
::
MëhodMLP
::
	$FCN
–
I¡_t
& 
≈¨s
, 
DoubÀ_t
* 
gød
, DoubÀ_à&
f
, DoubÀ_t* 
fôP¨s
, I¡_à
iÊag
 )

1679 
I¡_t
 
ù¨
=0; i∑r<
fNumbîOfWeights
; ipar++) {

1680 
TSy«p£
* 
sy«p£
 = (TSy«p£*)
fSy«p£s
->
	`At
(
ù¨
);

1681 
sy«p£
->
	`SëWeight
(
fôP¨s
[
ù¨
]);

1685 
f
 = 
	`CÆcuœãE°im©‹
();

1687 
nc
++;

1688 i‡(
f
 < 
möf
) minf = f;

1689 
I¡_t
 
ù¨
=0; i∑r<
fNumbîOfWeights
; i∑r++Ë
	`Log
(Ë<< 
kDEBUG
 << 
fôP¨s
[ipar] << " ";

1690 
	`Log
(Ë<< 
kDEBUG
 << 
Endl
;

1691 
	`Log
(Ë<< 
kDEBUG
 << "***** NewÉ°im©‹: " << 
f
 << " mö: " << 
möf
 << " -->ÇˇŒs: " << 
nc
 << 
Endl
;

1692 
	}
}

1697 
	gTMVA
::
MëhodMLP
* 
TMVA
::MëhodMLP::
	$GëThisPå
()

1699  
fgThis
;

1700 
	}
}

1708 
	gTMVA
::
MëhodMLP
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

1710 
MëhodANNBa£
::
	`MakeCœssS≥cific
(
fout
, 
˛assName
);

1711 
	}
}

1719 
	gTMVA
::
MëhodMLP
::
	$GëHñpMesßge
() const

1721 
TSåög
 
cﬁ
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("bold");

1722 
TSåög
 
cﬁªs
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("reset");

1724 
	`Log
(Ë<< 
Endl
;

1725 
	`Log
(Ë<< 
cﬁ
 << "--- Sh‹àdes¸ùti⁄:" << 
cﬁªs
 << 
Endl
;

1726 
	`Log
(Ë<< 
Endl
;

1727 
	`Log
(Ë<< "ThêMLPáπificü»√uø»√tw‹k (ANNËi†®åadôi⁄Æ fìd-" << 
Endl
;

1728 
	`Log
(Ë<< "f‹w¨d mu…ûayîÖî˚±r⁄ im∂emíèti⁄. ThêMLP ha†®u£r-" << 
Endl
;

1729 
	`Log
(Ë<< "deföed hiddíÜayîárchôe˘uª, whûêthênumbî o‡öpuà(ouçut)" << 
Endl
;

1730 
	`Log
(Ë<< "node†i†dëîmöed byÅhêöpuàv¨übÀ†(ouçuà˛as£s, i.e., " << 
Endl
;

1731 
	`Log
(Ë<< "sig«»™d o√ background). " << 
Endl
;

1732 
	`Log
(Ë<< 
Endl
;

1733 
	`Log
(Ë<< 
cﬁ
 << "--- Pîf‹m™˚ o±imißti⁄:" << 
cﬁªs
 << 
Endl
;

1734 
	`Log
(Ë<< 
Endl
;

1735 
	`Log
(Ë<< "Neuø»√tw‹k†¨ê°abÀándÖîf‹mög f‹áÜ¨gêv¨õty o‡" << 
Endl
;

1736 
	`Log
(Ë<< "löó∏™dÇ⁄-löó∏˛assifiˇti⁄ÖrobÀms. Howevî, i¿c⁄åa°" << 
Endl
;

1737 
	`Log
(Ë<< "tÿ”.g.Ëboo°ed decisi⁄Åªes,Åhêu£∏i†advi£dÅÿªdu˚Åhê" << 
Endl
;

1738 
	`Log
(Ë<< "numbî o‡öpuàv¨übÀ†th© havê⁄lyÜôéêdis¸imö©i⁄Öowî. " << 
Endl
;

1739 
	`Log
(Ë<< "" << 
Endl
;

1740 
	`Log
(Ë<< "I¿thêã°†wêhavêˇºõd ouàsÿÁr,ÅhêMLPánd ROOTÇëw‹ks" << 
Endl
;

1741 
	`Log
(Ë<< "(TMÕANN, i¡îÁ˚d vü TMVAË≥rf‹medÉquÆly wñl, wôh howevî" << 
Endl
;

1742 
	`Log
(Ë<< "®˛ó∏•ìdádv™ègêf‹ÅhêMLP. ThêCÀrm⁄t-FîøndÇeuø»" << 
Endl
;

1743 
	`Log
(Ë<< "√à(CFMÕANNËexhibôed w‹£ cœssifiˇti⁄Öîf‹m™˚ i¿the£" << 
Endl
;

1744 
	`Log
(Ë<< "ã°s, which i†∑πly duêtÿthê¶ow c⁄vîgí˚ o‡ô†åaöög" << 
Endl
;

1745 
	`Log
(Ë<< "◊àÀa° 10kÅøöög cy˛e†¨êªquúedÅÿachõvê≠¥oxim©ñy" << 
Endl
;

1746 
	`Log
(Ë<< "com≥tôivêªsu…s)." << 
Endl
;

1747 
	`Log
(Ë<< 
Endl
;

1748 
	`Log
(Ë<< 
cﬁ
 << "Ovîåaöög: " << 
cﬁªs


1749 << "⁄lyÅhêTMÕANNÖîf‹m†™Éx∂icô sï¨©i⁄ o‡the" << 
Endl
;

1750 
	`Log
(Ë<< "fuŒÅøöög sam∂êötÿödïídíàåaöögánd vÆid©i⁄ sam∂es." << 
Endl
;

1751 
	`Log
(Ë<< "WêhavêfoundÅh© i¿mo° high-íîgyÖhysic†≠∂iˇti⁄†thê" << 
Endl
;

1752 
	`Log
(Ë<< "avaûabÀ degªe†o‡‰ìdom (åaöögÉvítsË¨êsufficõ¡Åÿ" << 
Endl
;

1753 
	`Log
(Ë<< "c⁄°øöÅhêweight†o‡thêªœtivñy sim∂ê¨chôe˘uª†ªquúed" << 
Endl
;

1754 
	`Log
(Ë<< "tÿachõvêgoodÖîf‹m™˚. Hí˚Çÿovîåaöög should occur,ánd " << 
Endl
;

1755 
	`Log
(Ë<< "thêu£ o‡vÆid©i⁄ sam∂e†would o∆yÑedu˚ÅhêavaûabÀÅøöög" << 
Endl
;

1756 
	`Log
(Ë<< "öf‹m©i⁄. Howevî, i‡thê≥rf‹m™˚ o¿thêåaöög sam∂êi†" << 
Endl
;

1757 
	`Log
(Ë<< "foundÅÿbêsignifiˇ¡ly bëã∏th™Åhê⁄êfound wôhÅhêöde-" << 
Endl
;

1758 
	`Log
(Ë<< "≥ndíàã° sam∂e, cauti⁄ i†√eded. Thêªsu…†f‹Åhe£ sam∂e†" << 
Endl
;

1759 
	`Log
(Ë<< "¨ê¥öãdÅÿ°™d¨d ouçuà©Åhêíd o‡óchÅøöög job." << 
Endl
;

1760 
	`Log
(Ë<< 
Endl
;

1761 
	`Log
(Ë<< 
cﬁ
 << "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << 
cﬁªs
 << 
Endl
;

1762 
	`Log
(Ë<< 
Endl
;

1763 
	`Log
(Ë<< "ThêhiddíÜayîárchôe˘uª f‹áŒ ANN†i†deföed byÅhê›ti⁄" << 
Endl
;

1764 
	`Log
(Ë<< "\"HiddíLayîs=N+1,N,...\", whîêhîêthêfú° hiddíÜayî ha†N+1" << 
Endl
;

1765 
	`Log
(Ë<< "√ur⁄†™dÅhê£c⁄d NÇeur⁄†◊nd sÿ⁄),ánd whîêN i†thênumbî " << 
Endl
;

1766 
	`Log
(Ë<< "o‡öpuàv¨übÀs. Ex˚ssivênumbî†o‡hiddíÜayî†should bêavoided," << 
Endl
;

1767 
	`Log
(Ë<< "ö favou∏o‡m‹ê√ur⁄†öÅhêfú° hiddíÜayî." << 
Endl
;

1768 
	`Log
(Ë<< "" << 
Endl
;

1769 
	`Log
(Ë<< "Thênumbî o‡cy˛e†should bêabovê500. A†ßid, i‡thênumbî of" << 
Endl
;

1770 
	`Log
(Ë<< "adju°abÀ weight†i†smÆ»com∑ªdÅÿthêåaöög sam∂êsize," << 
Endl
;

1771 
	`Log
(Ë<< "usögáÜ¨gênumbî o‡åaöög sam∂e†shouldÇŸÜódÅÿovîåaöög." << 
Endl
;

1772 
	}
}

	@src/MethodPDEFoam.cxx

52 
	~"TMVA/MëhodPDEFﬂm.h
"

54 
	~"TMVA/CœssifõrFa˘‹y.h
"

55 
	~"TMVA/C⁄fig.h
"

56 
	~"TMVA/C⁄figuøbÀ.h
"

57 
	~"TMVA/CrossE¡r›y.h
"

58 
	~"TMVA/D©aSë.h
"

59 
	~"TMVA/D©aSëInfo.h
"

60 
	~"TMVA/Evít.h
"

61 
	~"TMVA/GöiIndex.h
"

62 
	~"TMVA/GöiIndexWôhL≠œ˚.h
"

63 
	~"TMVA/IMëhod.h
"

64 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

65 
	~"TMVA/MëhodBa£.h
"

66 
	~"TMVA/MsgLoggî.h
"

67 
	~"TMVA/R™kög.h
"

68 
	~"TMVA/SdivSqπS∂usB.h
"

69 
	~"TMVA/Sï¨©i⁄Ba£.h
"

70 
	~"TMVA/Toﬁs.h
"

71 
	~"TMVA/Ty≥s.h
"

72 
	~"TMVA/V¨übÀInfo.h
"

74 
	~"TM©h.h
"

75 
	~"TH1F.h
"

76 
	~"TFûe.h
"

78 
	$REGISTER_METHOD
(
PDEFﬂm
)

80 
	`CœssImp
(
TMVA
::
MëhodPDEFﬂm
);

85 
TMVA
::
MëhodPDEFﬂm
::
	$MëhodPDEFﬂm
–c⁄° 
TSåög
& 
jobName
,

86 c⁄° 
TSåög
& 
mëhodTôÀ
,

87 
D©aSëInfo
& 
dsi
,

88 c⁄° 
TSåög
& 
theO±i⁄
 ) :

89 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kPDEFﬂm
, 
mëhodTôÀ
, 
dsi
, 
theO±i⁄
)

90 , 
	`fSigBgSï¨©ed
(
kFALSE
)

91 , 
	`fFøc
(0.001)

92 , 
	`fDis¸EºCut
(-1.0)

93 , 
	`fVﬁFøc
(1.0/15.0)

94 , 
	`‚Cñls
(999)

95 , 
	`‚A˘iveCñls
(500)

96 , 
	`‚Sam∂
(2000)

97 , 
	`‚Bö
(5)

98 , 
	`fEvPîBö
(10000)

99 , 
	`fCom¥ess
(
kTRUE
)

100 , 
	`fMu…iT¨gëRegªssi⁄
(
kFALSE
)

101 , 
	`fNmö
(100)

102 , 
	`fCutNmö
(
kTRUE
)

103 , 
	`fMaxDïth
(0)

104 , 
	`fKî√lSå
("None")

105 , 
	`fKî√l
(
kN⁄e
)

106 , 
	`fKî√lE°im©‹
(
NULL
)

107 , 
	`fT¨gëSñe˘i⁄Så
("Mean")

108 , 
	`fT¨gëSñe˘i⁄
(
kMón
)

109 , 
	`fFûlFﬂmWôhOrigWeights
(
kFALSE
)

110 , 
	`fU£YesNoCñl
(
kFALSE
)

111 , 
	`fDTLogic
("None")

112 , 
	`fDTSï¨©i⁄
(
kFﬂm
)

113 , 
	`fPìkMax
(
kTRUE
)

114 , 
	`fXmö
()

115 , 
	`fXmax
()

116 , 
	$fFﬂm
()

118 
	}
}

123 
	gTMVA
::
MëhodPDEFﬂm
::
	$MëhodPDEFﬂm
–
D©aSëInfo
& 
dsi
,

124 c⁄° 
TSåög
& 
theWeightFûe
) :

125 
	`MëhodBa£
–
Ty≥s
::
kPDEFﬂm
, 
dsi
, 
theWeightFûe
)

126 , 
	`fSigBgSï¨©ed
(
kFALSE
)

127 , 
	`fFøc
(0.001)

128 , 
	`fDis¸EºCut
(-1.0)

129 , 
	`fVﬁFøc
(1.0/15.0)

130 , 
	`‚Cñls
(999)

131 , 
	`‚A˘iveCñls
(500)

132 , 
	`‚Sam∂
(2000)

133 , 
	`‚Bö
(5)

134 , 
	`fEvPîBö
(10000)

135 , 
	`fCom¥ess
(
kTRUE
)

136 , 
	`fMu…iT¨gëRegªssi⁄
(
kFALSE
)

137 , 
	`fNmö
(100)

138 , 
	`fCutNmö
(
kTRUE
)

139 , 
	`fMaxDïth
(0)

140 , 
	`fKî√lSå
("None")

141 , 
	`fKî√l
(
kN⁄e
)

142 , 
	`fKî√lE°im©‹
(
NULL
)

143 , 
	`fT¨gëSñe˘i⁄Så
("Mean")

144 , 
	`fT¨gëSñe˘i⁄
(
kMón
)

145 , 
	`fFûlFﬂmWôhOrigWeights
(
kFALSE
)

146 , 
	`fU£YesNoCñl
(
kFALSE
)

147 , 
	`fDTLogic
("None")

148 , 
	`fDTSï¨©i⁄
(
kFﬂm
)

149 , 
	`fPìkMax
(
kTRUE
)

150 , 
	`fXmö
()

151 , 
	`fXmax
()

152 , 
	$fFﬂm
()

154 
	}
}

160 
Boﬁ_t
 
	gTMVA
::
MëhodPDEFﬂm
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

162 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

163 i‡(
ty≥
 =
Ty≥s
::
kMu…i˛ass
 )  
kTRUE
;

164 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
Ë 
kTRUE
;

165  
kFALSE
;

166 
	}
}

171 
	gTMVA
::
MëhodPDEFﬂm
::
	$Inô
( )

174 
fSigBgSï¨©ed
 = 
kFALSE
;

175 
fFøc
 = 0.001;

176 
fDis¸EºCut
 = -1.;

177 
fVﬁFøc
 = 1./15.;

178 
‚A˘iveCñls
 = 500;

179 
‚Cñls
 = 
‚A˘iveCñls
*2-1;

180 
‚Sam∂
 = 2000;

181 
‚Bö
 = 5;

182 
fEvPîBö
 = 10000;

183 
fNmö
 = 100;

184 
fMaxDïth
 = 0;

185 
fFûlFﬂmWôhOrigWeights
 = 
kFALSE
;

186 
fU£YesNoCñl
 = 
kFALSE
;

187 
fDTLogic
 = "None";

188 
fDTSï¨©i⁄
 = 
kFﬂm
;

190 
fKî√l
 = 
kN⁄e
;

191 
fKî√lE°im©‹

NULL
;

192 
fT¨gëSñe˘i⁄

kMón
;

194 
fCom¥ess
 = 
kTRUE
;

195 
fMu…iT¨gëRegªssi⁄
 = 
kFALSE
;

197 
	`DñëeFﬂms
();

199 i‡(
fU£YesNoCñl
)

200 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

202 
	`SëSig«lRe„ªn˚Cut
( 0.5 );

203 
	}
}

208 
	gTMVA
::
MëhodPDEFﬂm
::
	$De˛¨eO±i⁄s
()

210 
	`De˛¨eO±i⁄Ref
–
fSigBgSï¨©ed
 = 
kFALSE
, "SigBgSeparate", "Separate foams for signalánd background" );

211 
	`De˛¨eO±i⁄Ref
–
fFøc
 = 0.001, "TailCut", "Fraction of outlierÉventsÅhatáreÉxcluded fromÅhe foam inÉach dimension" );

212 
	`De˛¨eO±i⁄Ref
–
fVﬁFøc
 = 1./15., "VolFrac", "Size of sampling box, used for density calculation during foam build-up (maximum value: 1.0 isÉquivalentÅo volume ofÉntire foam)");

213 
	`De˛¨eO±i⁄Ref
–
‚A˘iveCñls
 = 500, "nActiveCells", "MaximumÇumber ofáctive cellsÅo be created byÅhe foam");

214 
	`De˛¨eO±i⁄Ref
–
‚Sam∂
 = 2000, "nSampl", "Number of generated MCÉventsÖer cell");

215 
	`De˛¨eO±i⁄Ref
–
‚Bö
 = 5, "nBin", "Number of bins inÉdge histograms");

216 
	`De˛¨eO±i⁄Ref
–
fCom¥ess
 = 
kTRUE
, "Compress", "Compress foam output file");

217 
	`De˛¨eO±i⁄Ref
–
fMu…iT¨gëRegªssi⁄
 = 
kFALSE
, "MultiTargetRegression", "DoÑegression with multipleÅargets");

218 
	`De˛¨eO±i⁄Ref
–
fNmö
 = 100, "Nmin", "Number ofÉvents in cellÑequiredÅo split cell");

219 
	`De˛¨eO±i⁄Ref
–
fMaxDïth
 = 0, "MaxDepth", "Maximum depth of cellÅree (0=unlimited)");

220 
	`De˛¨eO±i⁄Ref
–
fFûlFﬂmWôhOrigWeights
 = 
kFALSE
, "FillFoamWithOrigWeights", "Fill foam with original or boost weights");

221 
	`De˛¨eO±i⁄Ref
–
fU£YesNoCñl
 = 
kFALSE
, "UseYesNoCell", "Return -1 or 1 for bkg or signalÜikeÉvents");

222 
	`De˛¨eO±i⁄Ref
–
fDTLogic
 = "None", "DTLogic", "Use decisionÅreeálgorithmÅo split cells");

223 
	`AddPªDefVÆ
(
	`TSåög
("None"));

224 
	`AddPªDefVÆ
(
	`TSåög
("GiniIndex"));

225 
	`AddPªDefVÆ
(
	`TSåög
("MisClassificationError"));

226 
	`AddPªDefVÆ
(
	`TSåög
("CrossEntropy"));

227 
	`AddPªDefVÆ
(
	`TSåög
("GiniIndexWithLaplace"));

228 
	`AddPªDefVÆ
(
	`TSåög
("SdivSqrtSplusB"));

230 
	`De˛¨eO±i⁄Ref
–
fKî√lSå
 = "None", "Kernel", "KernelÅype used");

231 
	`AddPªDefVÆ
(
	`TSåög
("None"));

232 
	`AddPªDefVÆ
(
	`TSåög
("Gauss"));

233 
	`AddPªDefVÆ
(
	`TSåög
("LinNeighbors"));

234 
	`De˛¨eO±i⁄Ref
–
fT¨gëSñe˘i⁄Så
 = "Mean", "TargetSelection", "Target selection method");

235 
	`AddPªDefVÆ
(
	`TSåög
("Mean"));

236 
	`AddPªDefVÆ
(
	`TSåög
("Mpv"));

237 
	}
}

243 
	gTMVA
::
MëhodPDEFﬂm
::
	$De˛¨eCom∑tibûôyO±i⁄s
() {

244 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

245 
	`De˛¨eO±i⁄Ref
(
fCutNmö
 = 
kTRUE
, "CutNmin", "Requirement for minimalÇumber ofÉvents in cell");

246 
	`De˛¨eO±i⁄Ref
(
fPìkMax
 = 
kTRUE
, "PeekMax", "Peek cell with max.Üoss forÅheÇext split");

247 
	}
}

252 
	gTMVA
::
MëhodPDEFﬂm
::
	$Pro˚ssO±i⁄s
()

254 i‡(!(
fFøc
>=0. && fFrac<=1.)) {

255 
	`Log
(Ë<< 
kWARNING
 << "TaûCuànŸ i¿[0.,1] ==> usög 0.001 in°ód" << 
Endl
;

256 
fFøc
 = 0.001;

259 i‡(
‚A˘iveCñls
 < 1) {

260 
	`Log
(Ë<< 
kWARNING
 << "invalidÇumber ofáctive cells specified: "

261 << 
‚A˘iveCñls
 << "; sëtögÇA˘iveCñls=2" << 
Endl
;

262 
‚A˘iveCñls
 = 2;

264 
‚Cñls
 = 
‚A˘iveCñls
*2-1;

267 i‡(
fSigBgSï¨©ed
 && 
fDTLogic
 != "None") {

268 
	`Log
(Ë<< 
kFATAL
 << "Decisi⁄Åªêlogi¯w‹k†⁄ly f‹á sögÀ fﬂm (SigBgSï¨©e=F)" << 
Endl
;

272 i‡(
fDTLogic
 == "None")

273 
fDTSï¨©i⁄
 = 
kFﬂm
;

274 i‡(
fDTLogic
 == "GiniIndex")

275 
fDTSï¨©i⁄
 = 
kGöiIndex
;

276 i‡(
fDTLogic
 == "MisClassificationError")

277 
fDTSï¨©i⁄
 = 
kMisCœssifiˇti⁄Eº‹
;

278 i‡(
fDTLogic
 == "CrossEntropy")

279 
fDTSï¨©i⁄
 = 
kCrossE¡r›y
;

280 i‡(
fDTLogic
 == "GiniIndexWithLaplace")

281 
fDTSï¨©i⁄
 = 
kGöiIndexWôhL≠œ˚
;

282 i‡(
fDTLogic
 == "SdivSqrtSplusB")

283 
fDTSï¨©i⁄
 = 
kSdivSqπS∂usB
;

285 
	`Log
(Ë<< 
kWARNING
 << "Unknow¿£∑øti⁄Åy≥: " << 
fDTLogic


286 << ", sëtögÅÿN⁄e" << 
Endl
;

287 
fDTLogic
 = "None";

288 
fDTSï¨©i⁄
 = 
kFﬂm
;

291 i‡(
fKî√lSå
 ="N⁄e" ) 
fKî√l
 = 
kN⁄e
;

292 i‡(
fKî√lSå
 ="Gauss" ) 
fKî√l
 = 
kGaus
;

293 i‡(
fKî√lSå
 ="LöNeighb‹s"Ë
fKî√l
 = 
kLöN
;

295 i‡(
fT¨gëSñe˘i⁄Så
 ="Món" ) 
fT¨gëSñe˘i⁄
 = 
kMón
;

296 
fT¨gëSñe˘i⁄
 = 
kMpv
;

299 i‡(
	`DoRegªssi⁄
(Ë&& 
	`D©a
()->
	`GëNT¨gës
(Ë> 1 && !
fMu…iT¨gëRegªssi⁄
) {

300 
	`Log
(Ë<< 
kWARNING
 << "Warning:Çumber ofÅargets > 1"

302 << " --> I'm sëtög Mu…iT¨gëRegªssi⁄=T" << 
Endl
;

303 
fMu…iT¨gëRegªssi⁄
 = 
kTRUE
;

305 
	}
}

310 
	gTMVA
::
MëhodPDEFﬂm
::~
	$MëhodPDEFﬂm
( )

312 
	`DñëeFﬂms
();

314 i‡(
fKî√lE°im©‹
 !
NULL
)

315 
dñëe
 
fKî√lE°im©‹
;

316 
	}
}

322 
	gTMVA
::
MëhodPDEFﬂm
::
	$CÆcXmöXmax
()

324 
fXmö
.
	`˛ór
();

325 
fXmax
.
	`˛ór
();

326 
UI¡_t
 
kDim
 = 
	`GëNv¨
();

327 
UI¡_t
 
tDim
 = 
	`D©a
()->
	`GëNT¨gës
();

328 
UI¡_t
 
vDim
 = 
	`D©a
()->
	`GëNV¨übÀs
();

329 i‡(
fMu…iT¨gëRegªssi⁄
)

330 
kDim
 +
tDim
;

332 
Flﬂt_t
 *
xmö
 = 
√w
 Flﬂt_t[
kDim
];

333 
Flﬂt_t
 *
xmax
 = 
√w
 Flﬂt_t[
kDim
];

336 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

337 
xmö
[
dim
] = 
FLT_MAX
;

338 
xmax
[
dim
] = 
FLT_MIN
;

341 
	`Log
(Ë<< 
kDEBUG
 << "Numbî o‡åaöögÉvíts: " << 
	`D©a
()->
	`GëNTøöögEvíts
(Ë<< 
Endl
;

342 
I¡_t
 
√voutside
 = (I¡_t)((
	`D©a
()->
	`GëNTøöögEvíts
())*(
fFøc
));

343 
I¡_t
 
øngehi°bös
 = 10000;

347 
L⁄g64_t
 
i
=0; i<(
	`GëNEvíts
()); i++) {

348 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
i
);

349 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

350 
Flﬂt_t
 
vÆ
;

351 i‡(
fMu…iT¨gëRegªssi⁄
) {

352 i‡(
dim
 < 
vDim
)

353 
vÆ
 = 
ev
->
	`GëVÆue
(
dim
);

355 
vÆ
 = 
ev
->
	`GëT¨gë
(
dim
-
vDim
);

358 
vÆ
 = 
ev
->
	`GëVÆue
(
dim
);

360 i‡(
vÆ
<
xmö
[
dim
])

361 
xmö
[
dim
] = 
vÆ
;

362 i‡(
vÆ
>
xmax
[
dim
])

363 
xmax
[
dim
] = 
vÆ
;

370 
TH1F
 **
ønge_h
 = 
√w
 TH1F*[
kDim
];

371 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

372 
ønge_h
[
dim
] = 
√w
 
	`TH1F
(
	`F‹m
("ønge%i", dim), "ønge", 
øngehi°bös
, 
xmö
[dim], 
xmax
[dim]);

376 
L⁄g64_t
 
i
=0; i<
	`GëNEvíts
(); i++) {

377 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
i
);

378 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

379 i‡(
fMu…iT¨gëRegªssi⁄
) {

380 i‡(
dim
 < 
vDim
)

381 
ønge_h
[
dim
]->
	`Fûl
(
ev
->
	`GëVÆue
(dim));

383 
ønge_h
[
dim
]->
	`Fûl
(
ev
->
	`GëT¨gë
(dim-
vDim
));

386 
ønge_h
[
dim
]->
	`Fûl
(
ev
->
	`GëVÆue
(dim));

391 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

392 
I¡_t
 
i
=1; i<(
øngehi°bös
+1); i++) {

393 i‡(
ønge_h
[
dim
]->
	`I¡egøl
(0, 
i
Ë> 
√voutside
) {

394 
xmö
[
dim
]=
ønge_h
[dim]->
	`GëBöLowEdge
(
i
);

398 
I¡_t
 
i
=
øngehi°bös
; i>0; i--) {

399 i‡(
ønge_h
[
dim
]->
	`I¡egøl
(
i
, (
øngehi°bös
+1)Ë> 
√voutside
) {

400 
xmax
[
dim
]=
ønge_h
[dim]->
	`GëBöLowEdge
(
i
+1);

408 
fXmö
.
	`˛ór
();

409 
fXmax
.
	`˛ór
();

410 
UI¡_t
 
dim
=0; dim<
kDim
; dim++) {

411 
fXmö
.
	`push_back
(
xmö
[
dim
]);

412 
fXmax
.
	`push_back
(
xmax
[
dim
]);

416 
dñëe
[] 
xmö
;

417 
dñëe
[] 
xmax
;

420 
UI¡_t
 
dim
=0; dim<
kDim
; dim++)

421 
dñëe
 
ønge_h
[
dim
];

422 
dñëe
[] 
ønge_h
;

425 
	}
}

430 
	gTMVA
::
MëhodPDEFﬂm
::
	$Tøö
( )

432 
	`Log
(Ë<< 
kVERBOSE
 << "CÆcuœã Xmöánd Xmax f‹Évîy dimísi⁄" << 
Endl
;

433 
	`CÆcXmöXmax
();

436 
	`DñëeFﬂms
();

439 i‡(
	`DoRegªssi⁄
()) {

440 i‡(
fMu…iT¨gëRegªssi⁄
)

441 
	`TøöMu…iT¨gëRegªssi⁄
();

443 
	`TøöM⁄oT¨gëRegªssi⁄
();

446 i‡(
	`DoMu…i˛ass
())

447 
	`TøöMu…iCœssifiˇti⁄
();

449 i‡(
	`D©aInfo
().
	`GëN‹mÆiz©i⁄
() != "EQUALNUMEVENTS" ) {

450 
	`Log
(Ë<< 
kHEADER
 << "N‹mMode=" << 
	`D©aInfo
().
	`GëN‹mÆiz©i⁄
()

453 << " sig«»¥obabûôõs." << 
Endl
;

456 
	`Log
(Ë<< 
kDEBUG
 << "N_sig f‹ÅøöögÉvíts: " << 
	`D©a
()->
	`GëNEvtSigTøö
(Ë<< 
Endl
;

457 
	`Log
(Ë<< 
kDEBUG
 << "N_bg f‹ÅøöögÉvíts: " << 
	`D©a
()->
	`GëNEvtBkgdTøö
(Ë<< 
Endl
;

458 
	`Log
(Ë<< 
kDEBUG
 << "U£∏n‹mÆiz©i⁄: " << 
	`D©aInfo
().
	`GëN‹mÆiz©i⁄
().
	`D©a
(Ë<< 
Endl
;

460 i‡(
fSigBgSï¨©ed
)

461 
	`TøöSï¨©edCœssifiˇti⁄
();

463 
	`TøöUnifõdCœssifiˇti⁄
();

468 
UI¡_t
 
i
=0; i<
fFﬂm
.
	`size
(); i++) {

469 if(
fFﬂm
.
	`©
(
i
))

470 
fFﬂm
.
	`©
(
i
)->
	`DñëeBö¨ySórchTªe
();

472 
	`ExôFromTøöög
();

473 
	}
}

481 
	gTMVA
::
MëhodPDEFﬂm
::
	$TøöSï¨©edCœssifiˇti⁄
()

483 
TSåög
 
fﬂmˇ±i⁄
[2];

484 
fﬂmˇ±i⁄
[0] = "SignalFoam";

485 
fﬂmˇ±i⁄
[1] = "BgFoam";

487 
i
=0; i<2; i++) {

489 
fFﬂm
.
	`push_back
–
	`InôFﬂm
(
fﬂmˇ±i⁄
[
i
], 
kSï¨©e
) );

491 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög bö¨y sórchÅªêo‡" << 
fﬂmˇ±i⁄
[
i
]

492 << " wôhÉvíts" << 
Endl
;

494 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

495 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

496 i‡((
i
==0 && 
	`D©aInfo
().
	`IsSig«l
(
ev
)) || (i==1 && !DataInfo().IsSignal(ev)))

497 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

498 
fFﬂm
.
	`back
()->
	`FûlBö¨ySórchTªe
(
ev
);

501 
	`Log
(Ë<< 
kINFO
 << "Buûd u∞" << 
fﬂmˇ±i⁄
[
i
] << 
Endl
;

502 
fFﬂm
.
	`back
()->
	`Cª©e
();

504 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög fﬂm cñl†wôhÉvíts" << 
Endl
;

506 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

507 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

508 
Flﬂt_t
 
weight
 = 
fFûlFﬂmWôhOrigWeights
 ? 
ev
->
	`GëOrigöÆWeight
(Ë:Év->
	`GëWeight
();

509 i‡((
i
==0 && 
	`D©aInfo
().
	`IsSig«l
(
ev
)) || (i==1 && !DataInfo().IsSignal(ev)))

510 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

511 
fFﬂm
.
	`back
()->
	`FûlFﬂmCñls
(
ev
, 
weight
);

514 
	}
}

520 
	gTMVA
::
MëhodPDEFﬂm
::
	$TøöUnifõdCœssifiˇti⁄
()

522 
fFﬂm
.
	`push_back
–
	`InôFﬂm
("Dis¸Fﬂm", 
kDis¸
, 
fSig«lCœss
) );

524 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög bö¨y sórchÅªêo‡dis¸imö©‹ fﬂm wôhÉvíts" << 
Endl
;

526 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

527 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

528 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

529 
fFﬂm
.
	`back
()->
	`FûlBö¨ySórchTªe
(
ev
);

532 
	`Log
(Ë<< 
kINFO
 << "Buûd u∞dis¸imö©‹ fﬂm" << 
Endl
;

533 
fFﬂm
.
	`back
()->
	`Cª©e
();

535 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög fﬂm cñl†wôhÉvíts" << 
Endl
;

537 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

538 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

539 
Flﬂt_t
 
weight
 = 
fFûlFﬂmWôhOrigWeights
 ? 
ev
->
	`GëOrigöÆWeight
(Ë:Év->
	`GëWeight
();

540 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

541 
fFﬂm
.
	`back
()->
	`FûlFﬂmCñls
(
ev
, 
weight
);

544 
	`Log
(Ë<< 
kVERBOSE
 << "CÆcuœã cñ»dis¸imö©‹"<< 
Endl
;

546 
fFﬂm
.
	`back
()->
	`FöÆize
();

547 
	}
}

556 
	gTMVA
::
MëhodPDEFﬂm
::
	$TøöMu…iCœssifiˇti⁄
()

558 
UI¡_t
 
iCœss
=0; iCœss<
	`D©aInfo
().
	`GëNCœs£s
(); ++iClass) {

560 
fFﬂm
.
	`push_back
–
	`InôFﬂm
(
	`F‹m
("Mu…iCœssFﬂm%u",
iCœss
), 
kMu…iCœss
, iClass) );

562 
	`Log
(Ë<< 
kVERBOSE
 << "Filling binary searchÅree of multiclass foam "

563 << 
iCœss
 << " wôhÉvíts" << 
Endl
;

565 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

566 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

567 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

568 
fFﬂm
.
	`back
()->
	`FûlBö¨ySórchTªe
(
ev
);

571 
	`Log
(Ë<< 
kINFO
 << "Buûd u∞mu…i˛as†fﬂm " << 
iCœss
 << 
Endl
;

572 
fFﬂm
.
	`back
()->
	`Cª©e
();

574 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög fﬂm cñl†wôhÉvíts" << 
Endl
;

577 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

578 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

579 
Flﬂt_t
 
weight
 = 
fFûlFﬂmWôhOrigWeights
 ? 
ev
->
	`GëOrigöÆWeight
(Ë:Év->
	`GëWeight
();

580 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

581 
fFﬂm
.
	`back
()->
	`FûlFﬂmCñls
(
ev
, 
weight
);

584 
	`Log
(Ë<< 
kVERBOSE
 << "CÆcuœã cñ»dis¸imö©‹"<< 
Endl
;

586 
fFﬂm
.
	`back
()->
	`FöÆize
();

588 
	}
}

595 
	gTMVA
::
MëhodPDEFﬂm
::
	$TøöM⁄oT¨gëRegªssi⁄
()

597 i‡(
	`D©a
()->
	`GëNT¨gës
() != 1) {

598 
	`Log
(Ë<< 
kFATAL
 << "Can't do mono-targetÑegression with "

599 << 
	`D©a
()->
	`GëNT¨gës
(Ë<< "Å¨gës!" << 
Endl
;

602 
	`Log
(Ë<< 
kDEBUG
 << "MëhodPDEFﬂm:Çumbî o‡T¨gës: " << 
	`D©a
()->
	`GëNT¨gës
(Ë<< 
Endl
;

604 
fFﬂm
.
	`push_back
–
	`InôFﬂm
("M⁄oT¨gëRegªssi⁄Fﬂm", 
kM⁄oT¨gë
) );

606 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög bö¨y sórchÅªêwôhÉvíts" << 
Endl
;

608 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

609 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

610 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

611 
fFﬂm
.
	`back
()->
	`FûlBö¨ySórchTªe
(
ev
);

614 
	`Log
(Ë<< 
kINFO
 << "Buûd m⁄ÿèrgëÑegªssi⁄ fﬂm" << 
Endl
;

615 
fFﬂm
.
	`back
()->
	`Cª©e
();

617 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög fﬂm cñl†wôhÉvíts" << 
Endl
;

619 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

620 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
k
);

621 
Flﬂt_t
 
weight
 = 
fFûlFﬂmWôhOrigWeights
 ? 
ev
->
	`GëOrigöÆWeight
(Ë:Év->
	`GëWeight
();

622 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

623 
fFﬂm
.
	`back
()->
	`FûlFﬂmCñls
(
ev
, 
weight
);

626 
	`Log
(Ë<< 
kVERBOSE
 << "CÆcuœãávîagê˚ŒÅ¨gës"<< 
Endl
;

628 
fFﬂm
.
	`back
()->
	`FöÆize
();

629 
	}
}

636 
	gTMVA
::
MëhodPDEFﬂm
::
	$TøöMu…iT¨gëRegªssi⁄
()

638 
	`Log
(Ë<< 
kDEBUG
 << "Numbî o‡v¨übÀs: " << 
	`D©a
()->
	`GëNV¨übÀs
(Ë<< 
Endl
;

639 
	`Log
(Ë<< 
kDEBUG
 << "Numbî o‡T¨gës: " << 
	`D©a
()->
	`GëNT¨gës
(Ë<< 
Endl
;

640 
	`Log
(Ë<< 
kDEBUG
 << "Dimísi⁄ o‡fﬂm: " << 
	`D©a
()->
	`GëNV¨übÀs
()+D©a()->
	`GëNT¨gës
(Ë<< 
Endl
;

641 i‡(
fKî√l
==
kLöN
)

642 
	`Log
(Ë<< 
kFATAL
 << "LinNeighbors kernel currentlyÇot supported"

643 << " f‹ mu…òèrgëÑegªssi⁄" << 
Endl
;

645 
fFﬂm
.
	`push_back
–
	`InôFﬂm
("Mu…iT¨gëRegªssi⁄Fﬂm", 
kMu…iT¨gë
) );

647 
	`Log
(Ë<< 
kVERBOSE
 << "Filling binary searchÅree of multiÅargetÑegression foam withÉvents"

648 << 
Endl
;

650 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

651 
Evít
 *
ev
 = 
√w
 
	`Evít
(*
	`GëEvít
(
k
));

654 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`èrgës
(
ev
->
	`GëT¨gës
());

655 c⁄° 
UI¡_t
 
nV¨übÀs
 = 
ev
->
	`GëVÆues
().
	`size
();

656 
UI¡_t
 
i
 = 0; i < 
èrgës
.
	`size
(); ++i)

657 
ev
->
	`SëVÆ
(
i
+
nV¨übÀs
, 
èrgës
.
	`©
(i));

658 
ev
->
	`GëT¨gës
().
	`˛ór
();

659 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

660 
fFﬂm
.
	`back
()->
	`FûlBö¨ySórchTªe
(
ev
);

663 
dñëe
 
ev
;

666 
	`Log
(Ë<< 
kINFO
 << "Buûd mu…òèrgëÑegªssi⁄ fﬂm" << 
Endl
;

667 
fFﬂm
.
	`back
()->
	`Cª©e
();

669 
	`Log
(Ë<< 
kVERBOSE
 << "Fûlög fﬂm cñl†wôhÉvíts" << 
Endl
;

671 
L⁄g64_t
 
k
=0; k<
	`GëNEvíts
(); ++k) {

672 
Evít
 *
ev
 = 
√w
 
	`Evít
(*
	`GëEvít
(
k
));

675 
°d
::
ve˘‹
<
Flﬂt_t
> 
èrgës
 = 
ev
->
	`GëT¨gës
();

676 c⁄° 
UI¡_t
 
nV¨übÀs
 = 
ev
->
	`GëVÆues
().
	`size
();

677 
Flﬂt_t
 
weight
 = 
fFûlFﬂmWôhOrigWeights
 ? 
ev
->
	`GëOrigöÆWeight
(Ë:Év->
	`GëWeight
();

678 
UI¡_t
 
i
 = 0; i < 
èrgës
.
	`size
(); ++i)

679 
ev
->
	`SëVÆ
(
i
+
nV¨übÀs
, 
èrgës
.
	`©
(i));

680 
ev
->
	`GëT¨gës
().
	`˛ór
();

681 i‡(!(
	`Ign‹eEvítsWôhNegWeightsInTøöög
(Ë&& 
ev
->
	`GëWeight
()<=0))

682 
fFﬂm
.
	`back
()->
	`FûlFﬂmCñls
(
ev
, 
weight
);

684 
dñëe
 
ev
;

686 
	}
}

709 
DoubÀ_t
 
	gTMVA
::
MëhodPDEFﬂm
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

711 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

712 
DoubÀ_t
 
dis¸
 = 0.;

714 i‡(
fSigBgSï¨©ed
) {

715 
°d
::
ve˘‹
<
Flﬂt_t
> 
xvec
 = 
ev
->
	`GëVÆues
();

717 
DoubÀ_t
 
dísôy_sig
 = 0.;

718 
DoubÀ_t
 
dísôy_bg
 = 0.;

719 
dísôy_sig
 = 
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
(
xvec
, 
kVÆueDísôy
, 
fKî√lE°im©‹
);

720 
dísôy_bg
 = 
fFﬂm
.
	`©
(1)->
	`GëCñlVÆue
(
xvec
, 
kVÆueDísôy
, 
fKî√lE°im©‹
);

723 i‡–(
dísôy_sig
+
dísôy_bg
) > 0 )

724 
dis¸
 = 
dísôy_sig
/(dísôy_sig+
dísôy_bg
);

726 
dis¸
 = 0.5;

730 
dis¸
 = 
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
(
ev
->
	`GëVÆues
(), 
kVÆue
, 
fKî√lE°im©‹
);

734 i‡(
îr
 || 
îrUµî
) {

735 c⁄° 
DoubÀ_t
 
dis¸_îr‹
 = 
	`CÆcuœãMVAEº‹
();

736 i‡(
îr
 !0Ë*î∏
dis¸_îr‹
;

737 i‡(
îrUµî
 !0Ë*îrUµî = 
dis¸_îr‹
;

740 i‡(
fU£YesNoCñl
)

741  (
dis¸
 < 0.5 ? -1 : 1);

743  
dis¸
;

744 
	}
}

755 
DoubÀ_t
 
	gTMVA
::
MëhodPDEFﬂm
::
	$CÆcuœãMVAEº‹
()

757 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

758 
DoubÀ_t
 
mvaEº‹
 = 0.0;

760 i‡(
fSigBgSï¨©ed
) {

761 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
xvec
 = 
ev
->
	`GëVÆues
();

763 c⁄° 
DoubÀ_t
 
√vítsB
 = 
fFﬂm
.
	`©
(1)->
	`GëCñlVÆue
(
xvec
, 
kVÆue
, 
fKî√lE°im©‹
);

764 c⁄° 
DoubÀ_t
 
√vítsS
 = 
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
(
xvec
, 
kVÆue
, 
fKî√lE°im©‹
);

765 c⁄° 
DoubÀ_t
 
sˇÀB
 = 1.;

767 c⁄° 
DoubÀ_t
 
îr‹S
 = 
√vítsS
 =0 ? 1.0 : 
TM©h
::
	`Sqπ
(neventsS);

768 c⁄° 
DoubÀ_t
 
îr‹B
 = 
√vítsB
 =0 ? 1.0 : 
TM©h
::
	`Sqπ
(neventsB);

770 i‡((
√vítsS
 > 1e-10Ë|| (
√vítsB
 > 1e-10)) {

772 
mvaEº‹
 = 
TM©h
::
	`Sqπ
(
	`Sqr
(
sˇÀB
 * 
√vítsB
 / Sqr(
√vítsS
 + sˇÀB *ÇevítsBË* 
îr‹S
) +

773 
	`Sqr
(
sˇÀB
 * 
√vítsS
 / Sqr“evítsS + sˇÀB * 
√vítsB
Ë* 
îr‹B
));

775 
mvaEº‹
 = 1.0;

779 
mvaEº‹
 = 
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
(
ev
->
	`GëVÆues
(), 
kVÆueEº‹
, 
fKî√lE°im©‹
);

782  
mvaEº‹
;

783 
	}
}

789 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodPDEFﬂm
::
	$GëMu…i˛assVÆues
()

791 c⁄° 
TMVA
::
Evít
 *
ev
 = 
	`GëEvít
();

792 
°d
::
ve˘‹
<
Flﬂt_t
> 
xvec
 = 
ev
->
	`GëVÆues
();

794 i‡(
fMu…i˛assRëu∫VÆ
 =
NULL
)

795 
fMu…i˛assRëu∫VÆ
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

796 
fMu…i˛assRëu∫VÆ
->
	`˛ór
();

797 
fMu…i˛assRëu∫VÆ
->
	`ª£rve
(
	`D©aInfo
().
	`GëNCœs£s
());

799 
°d
::
ve˘‹
<
Flﬂt_t
> 
ãmp
;

800 
UI¡_t
 
nCœs£s
 = 
	`D©aInfo
().
	`GëNCœs£s
();

801 
ãmp
.
	`ª£rve
(
nCœs£s
);

802 
UI¡_t
 
iCœss
 = 0; iCœs†< 
nCœs£s
; ++iClass) {

803 
ãmp
.
	`push_back
(
fFﬂm
.
	`©
(
iCœss
)->
	`GëCñlVÆue
(
xvec
, 
kVÆue
, 
fKî√lE°im©‹
));

806 
UI¡_t
 
iCœss
 = 0; iCœs†< 
nCœs£s
; ++iClass) {

807 
Flﬂt_t
 
n‹m
 = 0.0;

808 
UI¡_t
 
j
 = 0; j < 
nCœs£s
; ++j) {

809 i‡(
iCœss
 !
j
)

810 
n‹m
 +
	`exp
(
ãmp
[
j
] -Åemp[
iCœss
]);

812 
fMu…i˛assRëu∫VÆ
->
	`push_back
(1.0 / (1.0 + 
n‹m
));

815  *
fMu…i˛assRëu∫VÆ
;

816 
	}
}

823 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodPDEFﬂm
::
	$Cª©eR™kög
()

826 
fR™kög
 = 
√w
 
	`R™kög
(
	`GëName
(), "Variable Importance");

827 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`imp‹èn˚
(
	`GëNv¨
(), 0);

830 
UI¡_t
 
ifﬂm
 = 0; ifﬂm < 
fFﬂm
.
	`size
(); ++ifoam) {

832 
PDEFﬂmCñl
 *
roŸ_˚Œ
 = 
fFﬂm
.
	`©
(
ifﬂm
)->
	`GëRoŸCñl
();

833 
°d
::
ve˘‹
<
UI¡_t
> 
	`nCuts
(
fFﬂm
.
	`©
(
ifﬂm
)->
	`GëTŸDim
(), 0);

834 
	`GëNCuts
(
roŸ_˚Œ
, 
nCuts
);

838 
UI¡_t
 
sumOfCuts
 = 0;

839 
°d
::
ve˘‹
<
Flﬂt_t
> 
tmp_imp‹èn˚
;

840 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ++ivar) {

841 
sumOfCuts
 +
nCuts
.
	`©
(
iv¨
);

842 
tmp_imp‹èn˚
.
	`push_back
–
nCuts
.
	`©
(
iv¨
) );

846 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ++ivar) {

847 i‡(
sumOfCuts
 > 0)

848 
tmp_imp‹èn˚
.
	`©
(
iv¨
Ë/
sumOfCuts
;

850 
tmp_imp‹èn˚
.
	`©
(
iv¨
) = 0;

853 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ++ivar) {

854 
imp‹èn˚
.
	`©
(
iv¨
Ë+
tmp_imp‹èn˚
.©(iv¨Ë/ 
fFﬂm
.
	`size
();

859 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ++ivar) {

860 
fR™kög
->
	`AddR™k
(
	`R™k
(
	`GëI≈utLabñ
(
iv¨
), 
imp‹èn˚
.
	`©
(ivar)));

863  
fR™kög
;

864 
	}
}

876 
	gTMVA
::
MëhodPDEFﬂm
::
GëNCuts
(
PDEFﬂmCñl
 *
˚Œ
, 
°d
::
ve˘‹
<
UI¡_t
> &
nCuts
)

878 i‡(
˚Œ
 =
NULL
 || cñl->
GëSèt
() == 1)

881 
	gnCuts
.
©
(
˚Œ
->
GëBe°
())++;

883 i‡(
	g˚Œ
->
GëDau0
(Ë!
NULL
)

884 
GëNCuts
(
˚Œ
->
GëDau0
(), 
nCuts
);

885 i‡(
	g˚Œ
->
GëDau1
(Ë!
NULL
)

886 
GëNCuts
(
˚Œ
->
GëDau1
(), 
nCuts
);

892 
	gTMVA
::
MëhodPDEFﬂm
::
	$SëXmöXmax
–
TMVA
::
PDEFﬂm
 *
pdefﬂm
 )

894 i‡(!
pdefﬂm
){

895 
	`Log
(Ë<< 
kFATAL
 << "NuŒÖoöã∏giví!" << 
Endl
;

899 
UI¡_t
 
num_v¨s
 = 
	`GëNv¨
();

900 i‡(
fMu…iT¨gëRegªssi⁄
)

901 
num_v¨s
 +
	`D©a
()->
	`GëNT¨gës
();

903 
UI¡_t
 
idim
=0; idim<
num_v¨s
; idim++) {

904 
	`Log
()<< 
kDEBUG
 << "fﬂm: SëXmö[dim="<<
idim
<<"]: " << 
fXmö
.
	`©
(idimË<< 
Endl
;

905 
	`Log
()<< 
kDEBUG
 << "fﬂm: SëXmax[dim="<<
idim
<<"]: " << 
fXmax
.
	`©
(idimË<< 
Endl
;

906 
pdefﬂm
->
	`SëXmö
(
idim
, 
fXmö
.
	`©
(idim));

907 
pdefﬂm
->
	`SëXmax
(
idim
, 
fXmax
.
	`©
(idim));

909 
	}
}

934 
	gTMVA
::
PDEFﬂm
* 
TMVA
::
MëhodPDEFﬂm
::
	$InôFﬂm
(
TSåög
 
fﬂmˇ±i⁄
, 
EFﬂmTy≥
 
·
, 
UI¡_t
 
˛s
)

937 
I¡_t
 
dim
 = 1;

938 i‡(
·
 =
kMu…iT¨gë
)

940 
dim
 = 
	`D©a
()->
	`GëNT¨gës
(Ë+ D©a()->
	`GëNV¨übÀs
();

942 
dim
 = 
	`GëNv¨
();

945 
°d
::
ve˘‹
<
DoubÀ_t
> 
box
;

946 
I¡_t
 
idim
 = 0; idim < 
dim
; ++idim) {

947 
box
.
	`push_back
((
fXmax
.
	`©
(
idim
Ë- 
fXmö
.©(idim))* 
fVﬁFøc
);

951 
PDEFﬂm
 *
pdefﬂm
 = 
NULL
;

952 
PDEFﬂmDísôyBa£
 *
dísôy
 = 
NULL
;

953 i‡(
fDTSï¨©i⁄
 =
kFﬂm
) {

955 
·
) {

956 
kSï¨©e
:

957 
pdefﬂm
 = 
√w
 
	`PDEFﬂmEvít
(
fﬂmˇ±i⁄
);

958 
dísôy
 = 
√w
 
	`PDEFﬂmEvítDísôy
(
box
);

960 
kMu…iT¨gë
:

961 
pdefﬂm
 = 
√w
 
	`PDEFﬂmMu…iT¨gë
(
fﬂmˇ±i⁄
, 
fT¨gëSñe˘i⁄
);

962 
dísôy
 = 
√w
 
	`PDEFﬂmEvítDísôy
(
box
);

964 
kDis¸
:

965 
kMu…iCœss
:

966 
pdefﬂm
 = 
√w
 
	`PDEFﬂmDis¸imö™t
(
fﬂmˇ±i⁄
, 
˛s
);

967 
dísôy
 = 
√w
 
	`PDEFﬂmDis¸imö™tDísôy
(
box
, 
˛s
);

969 
kM⁄oT¨gë
:

970 
pdefﬂm
 = 
√w
 
	`PDEFﬂmT¨gë
(
fﬂmˇ±i⁄
, 0);

971 
dísôy
 = 
√w
 
	`PDEFﬂmT¨gëDísôy
(
box
, 0);

974 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿PDEFﬂmÅy≥!" << 
Endl
;

982 
Sï¨©i⁄Ba£
 *
£pTy≥
 = 
NULL
;

983 
fDTSï¨©i⁄
) {

984 
kGöiIndex
:

985 
£pTy≥
 = 
√w
 
	`GöiIndex
();

987 
kMisCœssifiˇti⁄Eº‹
:

988 
£pTy≥
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

990 
kCrossE¡r›y
:

991 
£pTy≥
 = 
√w
 
	`CrossE¡r›y
();

993 
kGöiIndexWôhL≠œ˚
:

994 
£pTy≥
 = 
√w
 
	`GöiIndexWôhL≠œ˚
();

996 
kSdivSqπS∂usB
:

997 
£pTy≥
 = 
√w
 
	`SdivSqπS∂usB
();

1000 
	`Log
(Ë<< 
kFATAL
 << "Sï¨©i⁄Åy≥ " << 
fDTSï¨©i⁄


1001 << " cuºíéyÇŸ suµ‹ãd" << 
Endl
;

1004 
·
) {

1005 
kDis¸
:

1006 
kMu…iCœss
:

1007 
pdefﬂm
 = 
√w
 
	`PDEFﬂmDecisi⁄Tªe
(
fﬂmˇ±i⁄
, 
£pTy≥
, 
˛s
);

1008 
dísôy
 = 
√w
 
	`PDEFﬂmDecisi⁄TªeDísôy
(
box
, 
˛s
);

1011 
	`Log
(Ë<< 
kFATAL
 << "DecisionÅree cell splitálgorithm is only"

1013 << " PDE-Fﬂm (SigBgSï¨©e=F)" << 
Endl
;

1018 i‡(
pdefﬂm
Ëpdefﬂm->
	`SëDísôy
(
dísôy
);

1019 
	`Log
(Ë<< 
kFATAL
 << "PDEFﬂmÖoöã∏nŸ së,Éxôög.." << 
Endl
;

1022 
fKî√lE°im©‹
 = 
	`Cª©ePDEFﬂmKî√l
();

1025 
pdefﬂm
->
	`Log
().
	`SëMöTy≥
(
this
->Log().
	`GëMöTy≥
());

1028 
pdefﬂm
->
	`SëDim
–
dim
);

1029 
pdefﬂm
->
	`SënCñls
–
‚Cñls
);

1030 
pdefﬂm
->
	`SënSam∂
–
‚Sam∂
);

1031 
pdefﬂm
->
	`SënBö
–
‚Bö
);

1032 
pdefﬂm
->
	`SëEvPîBö
–
fEvPîBö
);

1035 
pdefﬂm
->
	`SëNmö
(
fNmö
);

1036 
pdefﬂm
->
	`SëMaxDïth
(
fMaxDïth
);

1039 
pdefﬂm
->
	`Inôülize
();

1042 
	`SëXmöXmax
(
pdefﬂm
);

1044  
pdefﬂm
;

1045 
	}
}

1050 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodPDEFﬂm
::
	$GëRegªssi⁄VÆues
()

1052 i‡(
fRegªssi⁄Rëu∫VÆ
 =0ËfRegªssi⁄Rëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

1053 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

1054 
fRegªssi⁄Rëu∫VÆ
->
	`ª£rve
(
	`D©a
()->
	`GëNT¨gës
());

1056 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

1057 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆs
 = 
ev
->
	`GëVÆues
();

1059 i‡(
vÆs
.
	`em±y
()) {

1060 
	`Log
(Ë<< 
kWARNING
 << "<GëRegªssi⁄VÆues> vÆuêve˘‹ i†em±y. " << 
Endl
;

1063 i‡(
fMu…iT¨gëRegªssi⁄
) {

1065 
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
> 
xvec
;

1066 
UI¡_t
 
i
=0; i<
vÆs
.
	`size
(); ++i)

1067 
xvec
.
	`ö£π
(
°d
::
∑ú
<
I¡_t
, 
Flﬂt_t
>(
i
, 
vÆs
.
	`©
(i)));

1069 
°d
::
ve˘‹
<
Flﬂt_t
> 
èrgës
 = 
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
–
xvec
, 
kVÆue
 );

1072 i‡(
èrgës
.
	`size
(Ë!
	`D©a
()->
	`GëNT¨gës
())

1073 
	`Log
(Ë<< 
kFATAL
 << "Something wrong with multi-targetÑegression foam: "

1074 << "numbî o‡èrgë†d€†nŸ m©chÅhêD©aSë()" << 
Endl
;

1075 
UI¡_t
 
i
=0; i<
èrgës
.
	`size
(); i++)

1076 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
èrgës
.
	`©
(
i
));

1079 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
fFﬂm
.
	`©
(0)->
	`GëCñlVÆue
(
vÆs
, 
kVÆue
, 
fKî√lE°im©‹
));

1083 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ev
);

1084 
UI¡_t
 
ôgt
 = 0; itgà< 
	`D©a
()->
	`GëNT¨gës
(); itgt++) {

1085 
evT
->
	`SëT¨gë
(
ôgt
, 
fRegªssi⁄Rëu∫VÆ
->
	`©
(itgt) );

1087 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

1088 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

1089 
UI¡_t
 
ôgt
 = 0; itgà< 
	`D©a
()->
	`GëNT¨gës
(); itgt++) {

1090 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
–
evT2
->
	`GëT¨gë
(
ôgt
) );

1093 
dñëe
 
evT
;

1095  (*
fRegªssi⁄Rëu∫VÆ
);

1096 
	}
}

1102 
	gTMVA
::
PDEFﬂmKî√lBa£
* 
TMVA
::
MëhodPDEFﬂm
::
	$Cª©ePDEFﬂmKî√l
()

1104 
fKî√l
) {

1105 
kN⁄e
:

1106  
√w
 
	`PDEFﬂmKî√lTrivül
();

1107 
kLöN
:

1108  
√w
 
	`PDEFﬂmKî√lLöN
();

1109 
kGaus
:

1110  
√w
 
	`PDEFﬂmKî√lGauss
(
fVﬁFøc
/2.0);

1112 
	`Log
(Ë<< 
kFATAL
 << "Kî√l: " << 
fKî√l
 << "ÇŸ suµ‹ãd!" << 
Endl
;

1113  
NULL
;

1115  
NULL
;

1116 
	}
}

1121 
	gTMVA
::
MëhodPDEFﬂm
::
	$DñëeFﬂms
()

1123 
UI¡_t
 
i
=0; i<
fFﬂm
.
	`size
(); i++)

1124 i‡(
fFﬂm
.
	`©
(
i
)Ë
dñëe
 fFoam.at(i);

1125 
fFﬂm
.
	`˛ór
();

1126 
	}
}

1134 
	gTMVA
::
MëhodPDEFﬂm
::
	$Re£t
()

1136 
	`DñëeFﬂms
();

1138 i‡(
fKî√lE°im©‹
 !
NULL
) {

1139 
dñëe
 
fKî√lE°im©‹
;

1140 
fKî√lE°im©‹
 = 
NULL
;

1142 
	}
}

1146 
	gTMVA
::
MëhodPDEFﬂm
::
	$PrötC€fficõ¡s
( )

1147 {
	}
}

1152 
TMVA
::
MëhodPDEFﬂm
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

1154 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

1155 
	`gToﬁs
().
	`AddAâr
–
wght
, "SigBgSï¨©ed", 
fSigBgSï¨©ed
 );

1156 
	`gToﬁs
().
	`AddAâr
–
wght
, "Føc", 
fFøc
 );

1157 
	`gToﬁs
().
	`AddAâr
–
wght
, "Dis¸EºCut", 
fDis¸EºCut
 );

1158 
	`gToﬁs
().
	`AddAâr
–
wght
, "VﬁFøc", 
fVﬁFøc
 );

1159 
	`gToﬁs
().
	`AddAâr
–
wght
, "nCñls", 
‚Cñls
 );

1160 
	`gToﬁs
().
	`AddAâr
–
wght
, "nSam∂", 
‚Sam∂
 );

1161 
	`gToﬁs
().
	`AddAâr
–
wght
, "nBö", 
‚Bö
 );

1162 
	`gToﬁs
().
	`AddAâr
–
wght
, "EvPîBö", 
fEvPîBö
 );

1163 
	`gToﬁs
().
	`AddAâr
–
wght
, "Com¥ess", 
fCom¥ess
 );

1164 
	`gToﬁs
().
	`AddAâr
–
wght
, "DoRegªssi⁄", 
	`DoRegªssi⁄
() );

1165 
	`gToﬁs
().
	`AddAâr
–
wght
, "CutNmö", 
fNmö
>0 );

1166 
	`gToﬁs
().
	`AddAâr
–
wght
, "Nmö", 
fNmö
 );

1167 
	`gToﬁs
().
	`AddAâr
–
wght
, "CutRMSmö", 
Ál£
 );

1168 
	`gToﬁs
().
	`AddAâr
–
wght
, "RMSmin", 0.0 );

1169 
	`gToﬁs
().
	`AddAâr
–
wght
, "Kî√l", 
	`Kî√lToUI¡
(
fKî√l
) );

1170 
	`gToﬁs
().
	`AddAâr
–
wght
, "T¨gëSñe˘i⁄", 
	`T¨gëSñe˘i⁄ToUI¡
(
fT¨gëSñe˘i⁄
) );

1171 
	`gToﬁs
().
	`AddAâr
–
wght
, "FûlFﬂmWôhOrigWeights", 
fFûlFﬂmWôhOrigWeights
 );

1172 
	`gToﬁs
().
	`AddAâr
–
wght
, "U£YesNoCñl", 
fU£YesNoCñl
 );

1175 *
xmö_wøp
;

1176 
UI¡_t
 
i
=0; i<
fXmö
.
	`size
(); i++){

1177 
xmö_wøp
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Xmin" );

1178 
	`gToﬁs
().
	`AddAâr
–
xmö_wøp
, "Index", 
i
 );

1179 
	`gToﬁs
().
	`AddAâr
–
xmö_wøp
, "VÆue", 
fXmö
.
	`©
(
i
) );

1181 *
xmax_wøp
;

1182 
UI¡_t
 
i
=0; i<
fXmax
.
	`size
(); i++){

1183 
xmax_wøp
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Xmax" );

1184 
	`gToﬁs
().
	`AddAâr
–
xmax_wøp
, "Index", 
i
 );

1185 
	`gToﬁs
().
	`AddAâr
–
xmax_wøp
, "VÆue", 
fXmax
.
	`©
(
i
) );

1189 
	`WrôeFﬂmsToFûe
();

1190 
	}
}

1195 
	gTMVA
::
MëhodPDEFﬂm
::
	$WrôeFﬂmsToFûe
() const

1198 
	`FûlV¨übÀNamesToFﬂm
();

1200 
TSåög
 
	`r‚ame
–
	`GëWeightFûeName
() );

1203 
r‚ame
.
	`Rïœ˚AŒ
–
	`TSåög
("."Ë+ 
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeExãnsi⁄
 + ".txt", ".xml" );

1206 
r‚ame
.
	`Rïœ˚AŒ
( ".xml", "_foams.root" );

1208 
TFûe
 *
roŸFûe
 = 0;

1209 i‡(
fCom¥ess
Ë
roŸFûe
 = 
√w
 
	`TFûe
(
r‚ame
, "RECREATE", "foamfile", 9);

1210 
roŸFûe
 = 
√w
 
	`TFûe
(
r‚ame
, "RECREATE");

1213 
UI¡_t
 
i
=0; i<
fFﬂm
.
	`size
(); ++i) {

1214 
	`Log
(Ë<< "wrôög fﬂm " << 
fFﬂm
.
	`©
(
i
)->
	`GëFﬂmName
().
	`D©a
()

1215 << "Åÿfûe" << 
Endl
;

1216 
fFﬂm
.
	`©
(
i
)->
	`Wrôe
(fFﬂm.©(i)->
	`GëFﬂmName
().
	`D©a
());

1219 
roŸFûe
->
	`Clo£
();

1220 
	`Log
(Ë<< 
kINFO
 << "Foams writtenÅo file: "

1221 << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue"Ë<< 
r‚ame
 << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1222 
	}
}

1227 
	gTMVA
::
MëhodPDEFﬂm
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

1229 
i°r
 >> 
fSigBgSï¨©ed
;

1230 
i°r
 >> 
fFøc
;

1231 
i°r
 >> 
fDis¸EºCut
;

1232 
i°r
 >> 
fVﬁFøc
;

1233 
i°r
 >> 
‚Cñls
;

1234 
i°r
 >> 
‚Sam∂
;

1235 
i°r
 >> 
‚Bö
;

1236 
i°r
 >> 
fEvPîBö
;

1237 
i°r
 >> 
fCom¥ess
;

1239 
Boﬁ_t
 
ªgr
;

1240 
i°r
 >> 
ªgr
;

1241 
	`SëA«lysisTy≥
–(
ªgr
 ? 
Ty≥s
::
kRegªssi⁄
 : Ty≥s::
kCœssifiˇti⁄
 ) );

1243 
Boﬁ_t
 
CutNmö
, 
CutRMSmö
;

1244 
Flﬂt_t
 
RMSmö
;

1245 
i°r
 >> 
CutNmö
;

1246 
i°r
 >> 
fNmö
;

1247 
i°r
 >> 
CutRMSmö
;

1248 
i°r
 >> 
RMSmö
;

1250 
UI¡_t
 
kî
 = 0;

1251 
i°r
 >> 
kî
;

1252 
fKî√l
 = 
	`UI¡ToKî√l
(
kî
);

1254 
UI¡_t
 
ts
 = 0;

1255 
i°r
 >> 
ts
;

1256 
fT¨gëSñe˘i⁄
 = 
	`UI¡ToT¨gëSñe˘i⁄
(
ts
);

1258 
i°r
 >> 
fFûlFﬂmWôhOrigWeights
;

1259 
i°r
 >> 
fU£YesNoCñl
;

1262 
fXmö
.
	`˛ór
();

1263 
fXmax
.
	`˛ór
();

1264 
UI¡_t
 
kDim
 = 
	`GëNv¨
();

1265 i‡(
fMu…iT¨gëRegªssi⁄
)

1266 
kDim
 +
	`D©a
()->
	`GëNT¨gës
();

1267 
fXmö
.
	`assign
(
kDim
, 0);

1268 
fXmax
.
	`assign
(
kDim
, 0);

1271 
UI¡_t
 
i
=0; i<
kDim
; i++)

1272 
i°r
 >> 
fXmö
.
	`©
(
i
);

1273 
UI¡_t
 
i
=0; i<
kDim
; i++)

1274 
i°r
 >> 
fXmax
.
	`©
(
i
);

1277 
	`RódFﬂmsFromFûe
();

1278 
	}
}

1283 
	gTMVA
::
MëhodPDEFﬂm
::
	$RódWeightsFromXML
–* 
wghäode
 )

1285 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "SigBgSï¨©ed", 
fSigBgSï¨©ed
 );

1286 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Føc", 
fFøc
 );

1287 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Dis¸EºCut", 
fDis¸EºCut
 );

1288 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "VﬁFøc", 
fVﬁFøc
 );

1289 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "nCñls", 
‚Cñls
 );

1290 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "nSam∂", 
‚Sam∂
 );

1291 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "nBö", 
‚Bö
 );

1292 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "EvPîBö", 
fEvPîBö
 );

1293 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Com¥ess", 
fCom¥ess
 );

1294 
Boﬁ_t
 
ªgr
;

1295 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "DoRegªssi⁄", 
ªgr
 );

1296 
Boﬁ_t
 
CutNmö
;

1297 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "CutNmö", 
CutNmö
 );

1298 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Nmö", 
fNmö
 );

1299 
Boﬁ_t
 
CutRMSmö
;

1300 
Flﬂt_t
 
RMSmö
;

1301 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "CutRMSmö", 
CutRMSmö
 );

1302 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "RMSmö", 
RMSmö
 );

1303 
UI¡_t
 
kî
 = 0;

1304 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Kî√l", 
kî
 );

1305 
fKî√l
 = 
	`UI¡ToKî√l
(
kî
);

1306 
UI¡_t
 
ts
 = 0;

1307 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "T¨gëSñe˘i⁄", 
ts
 );

1308 
fT¨gëSñe˘i⁄
 = 
	`UI¡ToT¨gëSñe˘i⁄
(
ts
);

1309 i‡(
	`gToﬁs
().
	`HasAâr
(
wghäode
, "FillFoamWithOrigWeights"))

1310 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "FûlFﬂmWôhOrigWeights", 
fFûlFﬂmWôhOrigWeights
 );

1311 i‡(
	`gToﬁs
().
	`HasAâr
(
wghäode
, "UseYesNoCell"))

1312 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "U£YesNoCñl", 
fU£YesNoCñl
 );

1315 
fXmö
.
	`˛ór
();

1316 
fXmax
.
	`˛ór
();

1317 
UI¡_t
 
kDim
 = 
	`GëNv¨
();

1318 i‡(
fMu…iT¨gëRegªssi⁄
)

1319 
kDim
 +
	`D©a
()->
	`GëNT¨gës
();

1320 
fXmö
.
	`assign
(
kDim
, 0);

1321 
fXmax
.
	`assign
(
kDim
, 0);

1324 *
xmö_wøp
 = 
	`gToﬁs
().
	`GëChûd
–
wghäode
 );

1325 
UI¡_t
 
cou¡î
=0; cou¡î<
kDim
; counter++) {

1326 
UI¡_t
 
i
=0;

1327 
	`gToﬁs
().
	`RódAâr
–
xmö_wøp
 , "Index", 
i
 );

1328 i‡(
i
>=
kDim
)

1329 
	`Log
(Ë<< 
kFATAL
 << "dimísi⁄ index ouào‡ønge:" << 
i
 << 
Endl
;

1330 
	`gToﬁs
().
	`RódAâr
–
xmö_wøp
 , "VÆue", 
fXmö
.
	`©
(
i
) );

1331 
xmö_wøp
 = 
	`gToﬁs
().
	`GëNextChûd
( xmin_wrap );

1334 *
xmax_wøp
 = 
xmö_wøp
;

1335 
UI¡_t
 
cou¡î
=0; cou¡î<
kDim
; counter++) {

1336 
UI¡_t
 
i
=0;

1337 
	`gToﬁs
().
	`RódAâr
–
xmax_wøp
 , "Index", 
i
 );

1338 i‡(
i
>=
kDim
)

1339 
	`Log
(Ë<< 
kFATAL
 << "dimísi⁄ index ouào‡ønge:" << 
i
 << 
Endl
;

1340 
	`gToﬁs
().
	`RódAâr
–
xmax_wøp
 , "VÆue", 
fXmax
.
	`©
(
i
) );

1341 
xmax_wøp
 = 
	`gToﬁs
().
	`GëNextChûd
( xmax_wrap );

1345 
	`DñëeFﬂms
();

1348 
	`RódFﬂmsFromFûe
();

1351 i‡(
fKî√lE°im©‹
 !
NULL
)

1352 
dñëe
 
fKî√lE°im©‹
;

1353 
fKî√lE°im©‹
 = 
	`Cª©ePDEFﬂmKî√l
();

1354 
	}
}

1374 
	gTMVA
::
PDEFﬂm
* 
TMVA
::
MëhodPDEFﬂm
::
	$RódCl⁄edFﬂmFromFûe
(
TFûe
* 
fûe
, c⁄° 
TSåög
& 
fﬂm«me
)

1376 i‡(
fûe
 =
NULL
) {

1377 
	`Log
(Ë<< 
kWARNING
 << "<RódCl⁄edFﬂmFromFûe>: NULLÖoöã∏giví" << 
Endl
;

1378  
NULL
;

1382 
PDEFﬂm
 *
fﬂm
 = (PDEFﬂm*Ë
fûe
->
	`Gë
(
fﬂm«me
);

1383 i‡(
fﬂm
 =
NULL
) {

1384  
NULL
;

1387 
fﬂm
 = (
PDEFﬂm
*Ëfﬂm->
	`Cl⁄e
();

1388 i‡(
fﬂm
 =
NULL
) {

1389 
	`Log
(Ë<< 
kWARNING
 << "<RódCl⁄edFﬂmFromFûe>: " << 
fﬂm«me


1390 << " couldÇŸ bê˛⁄ed!" << 
Endl
;

1391  
NULL
;

1394  
fﬂm
;

1395 
	}
}

1400 
	gTMVA
::
MëhodPDEFﬂm
::
	$RódFﬂmsFromFûe
()

1402 
TSåög
 
	`r‚ame
–
	`GëWeightFûeName
() );

1405 
r‚ame
.
	`Rïœ˚AŒ
–
	`TSåög
("."Ë+ 
	`gC⁄fig
().
	`GëIONames
().
fWeightFûeExãnsi⁄
 + ".txt", ".xml" );

1408 
r‚ame
.
	`Rïœ˚AŒ
( ".xml", "_foams.root" );

1410 
	`Log
(Ë<< 
kINFO
 << "Ród fﬂm†‰om fûe: " << 
	`gToﬁs
().
	`Cﬁ‹
("lightblue")

1411 << 
r‚ame
 << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1412 
TFûe
 *
roŸFûe
 = 
√w
 
	`TFûe
–
r‚ame
, "READ" );

1413 i‡(
roŸFûe
->
	`IsZombõ
()Ë
	`Log
(Ë<< 
kFATAL
 << "C™nŸ o≥¿fûê\"" << 
r‚ame
 << "\"" << 
Endl
;

1416 i‡(
	`DoRegªssi⁄
()) {

1417 i‡(
fMu…iT¨gëRegªssi⁄
)

1418 
fFﬂm
.
	`push_back
(
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, "MultiTargetRegressionFoam"));

1420 
fFﬂm
.
	`push_back
(
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, "MonoTargetRegressionFoam"));

1422 i‡(
fSigBgSï¨©ed
) {

1423 
fFﬂm
.
	`push_back
(
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, "SignalFoam"));

1424 
fFﬂm
.
	`push_back
(
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, "BgFoam"));

1427 
PDEFﬂm
 *
fﬂm
 = 
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, "DiscrFoam");

1428 i‡(
fﬂm
 !
NULL
)

1429 
fFﬂm
.
	`push_back
(
fﬂm
);

1432 
UI¡_t
 
iCœss
=0; iCœss<
	`D©aInfo
().
	`GëNCœs£s
(); ++iClass) {

1433 
fFﬂm
.
	`push_back
(
	`RódCl⁄edFﬂmFromFûe
(
roŸFûe
, 
	`F‹m
("Mu…iCœssFﬂm%u",
iCœss
)));

1441 
roŸFûe
->
	`Clo£
();

1442 
dñëe
 
roŸFûe
;

1444 
UI¡_t
 
i
=0; i<
fFﬂm
.
	`size
(); ++i) {

1445 i‡(!
fFﬂm
.
	`©
(0))

1446 
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸÜﬂd fﬂm!" << 
Endl
;

1448 
	}
}

1453 
	gTMVA
::
MëhodPDEFﬂm
::
EKî√l
 
TMVA
::MëhodPDEFﬂm::
	$UI¡ToKî√l
(
UI¡_t
 
ikî
)

1455 
ikî
) {

1456 0:  
kN⁄e
;

1457 1:  
kGaus
;

1458 2:  
kLöN
;

1460 
	`Log
(Ë<< 
kWARNING
 << "<UI¡ToKî√l>: unknow¿kî√»numbî: " << 
ikî
 << 
Endl
;

1461  
kN⁄e
;

1463  
kN⁄e
;

1464 
	}
}

1469 
	gTMVA
::
ET¨gëSñe˘i⁄
 
TMVA
::
MëhodPDEFﬂm
::
	$UI¡ToT¨gëSñe˘i⁄
(
UI¡_t
 
ôs
)

1471 
ôs
) {

1472 0:  
kMón
;

1473 1:  
kMpv
;

1475 
	`Log
(Ë<< 
kWARNING
 << "<UI¡ToT¨gëSñe˘i⁄>: unknow¿mëhod T¨gëSñe˘i⁄: " << 
ôs
 << 
Endl
;

1476  
kMón
;

1478  
kMón
;

1479 
	}
}

1484 
	gTMVA
::
MëhodPDEFﬂm
::
	$FûlV¨übÀNamesToFﬂm
() const

1486 
UI¡_t
 
ifﬂm
=0; ifﬂm<
fFﬂm
.
	`size
(); ifoam++) {

1487 
I¡_t
 
idim
=0; idim<
fFﬂm
.
	`©
(
ifﬂm
)->
	`GëTŸDim
(); idim++) {

1488 if(
fMu…iT¨gëRegªssi⁄
 && (
UI¡_t
)
idim
>=
	`D©aInfo
().
	`GëNV¨übÀs
())

1489 
fFﬂm
.
	`©
(
ifﬂm
)->
	`AddV¨übÀName
(
	`D©aInfo
().
	`GëT¨gëInfo
(
idim
-D©aInfo().
	`GëNV¨übÀs
()).
	`GëEx¥essi⁄
().
	`D©a
());

1491 
fFﬂm
.
	`©
(
ifﬂm
)->
	`AddV¨übÀName
(
	`D©aInfo
().
	`GëV¨übÀInfo
(
idim
).
	`GëEx¥essi⁄
().
	`D©a
());

1494 
	}
}

1500 
	gTMVA
::
MëhodPDEFﬂm
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& , c⁄° 
TSåög
& ) const

1502 
	}
}

1507 
	gTMVA
::
MëhodPDEFﬂm
::
	$GëHñpMesßge
() const

1509 
	`Log
(Ë<< 
Endl
;

1510 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1511 
	`Log
(Ë<< 
Endl
;

1512 
	`Log
(Ë<< "PDE-Fﬂm i†®v¨üti⁄ o‡thêPDE-RS mëhod usögá sñf-ad≠tög" << 
Endl
;

1513 
	`Log
(Ë<< "bönög mëhodÅÿdividêthêmu…i-dimísi⁄Æ v¨übÀ s∑˚ i¡ÿa" << 
Endl
;

1514 
	`Log
(Ë<< "föôênumbî o‡hy≥r-ª˘™gÀ†(˚Œs). Thêbönögálg‹ôhm " << 
Endl
;

1515 
	`Log
(Ë<< "adju°†thêsizê™dÖosôi⁄ o‡®¥edeföedÇumbî o‡˚Œ†such" << 
Endl
;

1516 
	`Log
(Ë<< "th©Åhêv¨ün˚ o‡thêsig«»™d background dísôõ†ösidêthê" << 
Endl
;

1517 
	`Log
(Ë<< "˚Œ†ªache†®möimum" << 
Endl
;

1518 
	`Log
(Ë<< 
Endl
;

1519 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- U£ o‡bookög o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1520 
	`Log
(Ë<< 
Endl
;

1521 
	`Log
(Ë<< "ThêPDEFﬂm cœssifõ∏suµ‹t†twÿdif„ª¡álg‹ôhms: " << 
Endl
;

1522 
	`Log
(Ë<< 
Endl
;

1523 
	`Log
(Ë<< " (1ËCª©ê⁄êfﬂm, which st‹e†thêsig«»ovî background" << 
Endl
;

1524 
	`Log
(Ë<< "Örobabûôy dísôy. Durög fﬂm buûdu∞thêv¨ün˚ o‡the" << 
Endl
;

1525 
	`Log
(Ë<< " dis¸imö™àösidêthê˚Œ†i†möimi£d." << 
Endl
;

1526 
	`Log
(Ë<< 
Endl
;

1527 
	`Log
(Ë<< " Bookög o±i⁄: SigBgSï¨©ed=F" << 
Endl
;

1528 
	`Log
(Ë<< 
Endl
;

1529 
	`Log
(Ë<< " (2ËCª©êtwÿ£∑øã fﬂms, o√ f‹Åhêsig«»evít†™d o√ f‹" << 
Endl
;

1530 
	`Log
(Ë<< " backgroundÉvíts. Durög fﬂm buûdu∞thêv¨ün˚ o‡the" << 
Endl
;

1531 
	`Log
(Ë<< "Évíàdísôy insidêthê˚Œ†i†möimi£d sï¨©ñy f‹" << 
Endl
;

1532 
	`Log
(Ë<< " sig«»™d background." << 
Endl
;

1533 
	`Log
(Ë<< 
Endl
;

1534 
	`Log
(Ë<< " Bookög o±i⁄: SigBgSï¨©ed=T" << 
Endl
;

1535 
	`Log
(Ë<< 
Endl
;

1536 
	`Log
(Ë<< "Thêfﬁlowög o±i⁄†ˇ¿bê£à—hêli°ed vÆue†¨êfoundÅÿbêa" << 
Endl
;

1537 
	`Log
(Ë<< "good sèπögÖoöàf‹ mo°áµliˇti⁄s):" << 
Endl
;

1538 
	`Log
(Ë<< 
Endl
;

1539 
	`Log
(Ë<< " SigBgSï¨©ê FÆ£ Sï¨©êSig«»™d Background" << 
Endl
;

1540 
	`Log
(Ë<< " TaûCuà 0.001 Fø˘i⁄ o‡ouéõ∏evít†th©Éx˛uded" << 
Endl
;

1541 
	`Log
(Ë<< " fromÅhêfﬂm i¿óch dimísi⁄ " << 
Endl
;

1542 
	`Log
(Ë<< " VﬁFø¯ 0.0666 Vﬁumê‰a˘i⁄ (u£d f‹ dísôy cÆcuœti⁄" << 
Endl
;

1543 
	`Log
(Ë<< " durög fﬂm buûd-upË" << 
Endl
;

1544 
	`Log
(Ë<< "ÇA˘iveCñl† 500 MaximÆÇumbî o‡a˘ivê˚Œ†ö föÆ fﬂm " << 
Endl
;

1545 
	`Log
(Ë<< "ÇSam∂ 2000 Numbî o‡MCÉvít†≥∏˚Œ i¿fﬂm buûd-u∞" << 
Endl
;

1546 
	`Log
(Ë<< "ÇBö 5 Numbî o‡bö†u£d i¿fﬂm buûd-u∞" << 
Endl
;

1547 
	`Log
(Ë<< " Nmö 100 Numbî o‡evít†ö cñ»ªquúedÅÿ•lô cñl" << 
Endl
;

1548 
	`Log
(Ë<< " Kî√» N⁄ê Kî√»ty≥ u£d (possibÀ vÆue†¨e: N⁄e," << 
Endl
;

1549 
	`Log
(Ë<< " Gauss)" << 
Endl
;

1550 
	`Log
(Ë<< " Com¥es† Truê Com¥es†fﬂm ouçuàfûê" << 
Endl
;

1551 
	`Log
(Ë<< 
Endl
;

1552 
	`Log
(Ë<< " Addôi⁄ÆÑegªssi⁄ o±i⁄s:" << 
Endl
;

1553 
	`Log
(Ë<< 
Endl
;

1554 
	`Log
(Ë<< "Mu…iT¨gëRegªssi⁄ FÆ£ Dÿªgªssi⁄ wôh mu…ùÀÅ¨gë†" << 
Endl
;

1555 
	`Log
(Ë<< " T¨gëSñe˘i⁄ Mó¿ T¨gë sñe˘i⁄ mëhod (possibÀ vÆue†¨e: " << 
Endl
;

1556 
	`Log
(Ë<< " Món, Mpv)" << 
Endl
;

1557 
	`Log
(Ë<< 
Endl
;

1558 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1559 
	`Log
(Ë<< 
Endl
;

1560 
	`Log
(Ë<< "Thê≥rf‹m™˚ o‡thêtwÿim∂emíèti⁄†wa†foundÅÿbêsimû¨ f‹" << 
Endl
;

1561 
	`Log
(Ë<< "mo°Éxam∂e†°udõd. F‹Åhêßmênumbî o‡˚Œ†≥∏fﬂm,Åhêtwo-" << 
Endl
;

1562 
	`Log
(Ë<< "fﬂm o±i⁄áµroxim©ñy doubÀ†thêamou¡ o‡compuã∏mem‹yÇìded" << 
Endl
;

1563 
	`Log
(Ë<< "durög cœssifiˇti⁄. F‹ s≥cü»ˇ£†whîêthêevít-dísôy" << 
Endl
;

1564 
	`Log
(Ë<< "di°ributi⁄ o‡sig«»™d backgroundÉvít†i†vîy dif„ª¡,Åhe" << 
Endl
;

1565 
	`Log
(Ë<< "two-fﬂm o±i⁄ wa†foundÅÿ≥rf‹m signifiˇ¡ly bëã∏th™Åhe" << 
Endl
;

1566 
	`Log
(Ë<< "›ti⁄ wôh o∆y o√ fﬂm." << 
Endl
;

1567 
	`Log
(Ë<< 
Endl
;

1568 
	`Log
(Ë<< "I¿‹dîÅÿgaö bëã∏˛assifiˇti⁄Öîf‹m™˚ wêªcommídÅÿ£t" << 
Endl
;

1569 
	`Log
(Ë<< "thê∑ømëî \"nA˘iveCñls\"Åÿ®high vÆue." << 
Endl
;

1570 
	`Log
(Ë<< 
Endl
;

1571 
	`Log
(Ë<< "Thê∑ømëî \"VﬁFøc\" s≥cifõ†thêsizêo‡thêßm∂ög vﬁume" << 
Endl
;

1572 
	`Log
(Ë<< "durög fﬂm buûdu∞™d should bêtu√d i¿‹dîÅÿachõvê›timÆ" << 
Endl
;

1573 
	`Log
(Ë<< "≥rf‹m™˚. AÜ¨gî boxÜód†tÿ®ªdu˚d sèti°iˇ»un˚πaöty" << 
Endl
;

1574 
	`Log
(Ë<< "f‹ smÆ»åaöög sam∂e†™dÅÿsmoŸhî sam∂ög. A smÆÀ∏box on" << 
Endl
;

1575 
	`Log
(Ë<< "thêŸhî h™d in¸ó£†thê£nsôivôyÅÿ°©i°iˇ»Êu˘u©i⁄s" << 
Endl
;

1576 
	`Log
(Ë<< "öÅhêåaöög sam∂es, buàf‹ sufficõ¡lyÜ¨gêåaöög sam∂es" << 
Endl
;

1577 
	`Log
(Ë<< "ô wû»ªsu… i¿®m‹ê¥eci£Üoˇ»e°im©êo‡thêßm∂ed" << 
Endl
;

1578 
	`Log
(Ë<< "dísôy. I¿gíîÆ, highî dimísi⁄ÆÖrobÀm†ªquúêœrgî box" << 
Endl
;

1579 
	`Log
(Ë<< "sizes, duêtÿthêªdu˚dávîagênumbî o‡evít†≥∏box vﬁume. The" << 
Endl
;

1580 
	`Log
(Ë<< "deÁu… vÆuêo‡0.0666 wa†›timi£d f‹á¿exam∂êwôh 5" << 
Endl
;

1581 
	`Log
(Ë<< "ob£rvabÀ†™dÅøöög sam∂e†o‡thê‹dî o‡50000 sig«»™d" << 
Endl
;

1582 
	`Log
(Ë<< "backgroundÉvít†óch." << 
Endl
;

1583 
	`Log
(Ë<< 
Endl
;

1584 
	`Log
(Ë<< "Fuπhîm‹êkî√»weightög c™ bêa˘iv©ed, which wû»ÀadÅÿ™" << 
Endl
;

1585 
	`Log
(Ë<< "addôi⁄ÆÖîf‹m™˚ im¥ovemít. NŸêth© Gaus†weightög wûl" << 
Endl
;

1586 
	`Log
(Ë<< "signifiˇ¡ly in¸ó£Åhêª•⁄£Åimêo‡thêmëhod. LöNeighb‹s" << 
Endl
;

1587 
	`Log
(Ë<< "weightögÖîf‹m†®löó∏öãΩﬁ©i⁄ wôh dúe˘Çeighb‹ cñls" << 
Endl
;

1588 
	`Log
(Ë<< "f‹Éach dimísi⁄ánd i†much fa°îÅh™ Gaus†weightög." << 
Endl
;

1589 
	`Log
(Ë<< 
Endl
;

1590 
	`Log
(Ë<< "Thê˛assifiˇti⁄Ñesu…†wîêfoundÅÿbêøthî in£nsôivêtÿthe" << 
Endl
;

1591 
	`Log
(Ë<< "vÆue†o‡thê∑ømëî†\"nSam∂es\"ánd \"nBö\"." << 
Endl
;

1592 
	}
}

	@src/MethodPDERS.cxx

66 
	~"TMVA/MëhodPDERS.h
"

68 
	~"TMVA/Bö¨yTªe.h
"

69 
	~"TMVA/Bö¨ySórchTªe.h
"

70 
	~"TMVA/C⁄figuøbÀ.h
"

71 
	~"TMVA/CœssifõrFa˘‹y.h
"

72 
	~"TMVA/Evít.h
"

73 
	~"TMVA/IMëhod.h
"

74 
	~"TMVA/MëhodBa£.h
"

75 
	~"TMVA/MsgLoggî.h
"

76 
	~"TMVA/RoŸFödî.h
"

77 
	~"TMVA/Toﬁs.h
"

78 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

79 
	~"TMVA/Ty≥s.h
"

81 
	~"ThªadLoˇlSt‹age.h
"

82 
	~"TBuf„r.h
"

83 
	~"TFûe.h
"

84 
	~"TObjSåög.h
"

85 
	~"TM©h.h
"

87 
	~<as£π.h
>

88 
	~<Æg‹ôhm
>

90 
«me•a˚
 
	gTMVA
 {

91 c⁄° 
Boﬁ_t
 
	gMëhodPDERS_U£FödRoŸ
 = 
kFALSE
;

95 
	$REGISTER_METHOD
(
PDERS
)

97 
	`CœssImp
(
TMVA
::
MëhodPDERS
);

102 
TMVA
::
MëhodPDERS
::
	$MëhodPDERS
–c⁄° 
TSåög
& 
jobName
,

103 c⁄° 
TSåög
& 
mëhodTôÀ
,

104 
D©aSëInfo
& 
theD©a
,

105 c⁄° 
TSåög
& 
theO±i⁄
) :

106 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kPDERS
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

107 
	`fF˙CÆl
(0),

108 
	`fVR™geMode
(
kAd≠tive
),

109 
	`fKî√lE°im©‹
(
kBox
),

110 
	`fDñè
(0),

111 
	`fShi·
(0),

112 
	`fSˇÀS
(0),

113 
	`fSˇÀB
(0),

114 
	`fDñèFøc
(0),

115 
	`fGaussSigma
(0),

116 
	`fGaussSigmaN‹m
(0),

117 
	`fNRegOut
(0),

118 
	`fNEvítsMö
(0),

119 
	`fNEvítsMax
(0),

120 
	`fMaxVIãøti⁄s
(0),

121 
	`fInôülSˇÀ
(0),

122 
	`fInôülizedVﬁumeEÀ
(0),

123 
	`fkNNMö
(0),

124 
	`fkNNMax
(0),

125 
	`fMax_di°™˚
(0),

126 
	`fPröãd
(0),

127 
	$fN‹mTªe
(0)

129 
fHñpVﬁume
 = 
NULL
;

130 
fBö¨yTªe
 = 
NULL
;

131 
	}
}

136 
	gTMVA
::
MëhodPDERS
::
	$MëhodPDERS
–
D©aSëInfo
& 
theD©a
,

137 c⁄° 
TSåög
& 
theWeightFûe
) :

138 
	`MëhodBa£
–
Ty≥s
::
kPDERS
, 
theD©a
, 
theWeightFûe
),

139 
	`fF˙CÆl
(0),

140 
	`fVR™geMode
(
kAd≠tive
),

141 
	`fKî√lE°im©‹
(
kBox
),

142 
	`fDñè
(0),

143 
	`fShi·
(0),

144 
	`fSˇÀS
(0),

145 
	`fSˇÀB
(0),

146 
	`fDñèFøc
(0),

147 
	`fGaussSigma
(0),

148 
	`fGaussSigmaN‹m
(0),

149 
	`fNRegOut
(0),

150 
	`fNEvítsMö
(0),

151 
	`fNEvítsMax
(0),

152 
	`fMaxVIãøti⁄s
(0),

153 
	`fInôülSˇÀ
(0),

154 
	`fInôülizedVﬁumeEÀ
(0),

155 
	`fkNNMö
(0),

156 
	`fkNNMax
(0),

157 
	`fMax_di°™˚
(0),

158 
	`fPröãd
(0),

159 
	$fN‹mTªe
(0)

161 
fHñpVﬁume
 = 
NULL
;

162 
fBö¨yTªe
 = 
NULL
;

163 
	}
}

168 
Boﬁ_t
 
	gTMVA
::
MëhodPDERS
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

170 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

171 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
Ë 
kTRUE
;

172  
kFALSE
;

173 
	}
}

178 
	gTMVA
::
MëhodPDERS
::
	$Inô
( )

180 
fBö¨yTªe
 = 
NULL
;

182 
	`Upd©eThis
();

185 
fDñèFøc
 = 3.0;

186 
fVR™geMode
 = 
kAd≠tive
;

187 
fKî√lE°im©‹
 = 
kBox
;

190 
fNEvítsMö
 = 100;

191 
fNEvítsMax
 = 200;

192 
fMaxVIãøti⁄s
 = 150;

193 
fInôülSˇÀ
 = 0.99;

194 
fGaussSigma
 = 0.1;

195 
fN‹mTªe
 = 
kFALSE
;

197 
fkNNMö
 = 
	`I¡_t
(
fNEvítsMö
);

198 
fkNNMax
 = 
	`I¡_t
(
fNEvítsMax
);

200 
fInôülizedVﬁumeEÀ
 = 
kFALSE
;

201 
fAvîageRMS
.
	`˛ór
();

204 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

205 
	}
}

210 
	gTMVA
::
MëhodPDERS
::~
	$MëhodPDERS
( )

212 i‡(
fDñè
Ë
dñëe
 fDelta;

213 i‡(
fShi·
Ë
dñëe
 fShift;

215 i‡(
NULL
 !
fBö¨yTªe
Ë
dñëe
 fBinaryTree;

216 
	}
}

254 
	gTMVA
::
MëhodPDERS
::
	$De˛¨eO±i⁄s
()

256 
	`De˛¨eO±i⁄Ref
(
fVﬁumeR™ge
="Adaptive", "VolumeRangeMode", "MethodÅo determine volume size");

257 
	`AddPªDefVÆ
(
	`TSåög
("Unscaled"));

258 
	`AddPªDefVÆ
(
	`TSåög
("MinMax"));

259 
	`AddPªDefVÆ
(
	`TSåög
("RMS"));

260 
	`AddPªDefVÆ
(
	`TSåög
("Adaptive"));

261 
	`AddPªDefVÆ
(
	`TSåög
("kNN"));

263 
	`De˛¨eO±i⁄Ref
(
fKî√lSåög
="Box", "KernelEstimator", "KernelÉstimation function");

264 
	`AddPªDefVÆ
(
	`TSåög
("Box"));

265 
	`AddPªDefVÆ
(
	`TSåög
("Sphere"));

266 
	`AddPªDefVÆ
(
	`TSåög
("Teepee"));

267 
	`AddPªDefVÆ
(
	`TSåög
("Gauss"));

268 
	`AddPªDefVÆ
(
	`TSåög
("Sinc3"));

269 
	`AddPªDefVÆ
(
	`TSåög
("Sinc5"));

270 
	`AddPªDefVÆ
(
	`TSåög
("Sinc7"));

271 
	`AddPªDefVÆ
(
	`TSåög
("Sinc9"));

272 
	`AddPªDefVÆ
(
	`TSåög
("Sinc11"));

273 
	`AddPªDefVÆ
(
	`TSåög
("Lanczos2"));

274 
	`AddPªDefVÆ
(
	`TSåög
("Lanczos3"));

275 
	`AddPªDefVÆ
(
	`TSåög
("Lanczos5"));

276 
	`AddPªDefVÆ
(
	`TSåög
("Lanczos8"));

277 
	`AddPªDefVÆ
(
	`TSåög
("Trim"));

279 
	`De˛¨eO±i⁄Ref
(
fDñèFøc
 , "DeltaFrac", "nEventsMin/Max for minmaxándÑms volumeÑange");

280 
	`De˛¨eO±i⁄Ref
(
fNEvítsMö
 , "NEventsMin", "nEventsMin forádaptive volumeÑange");

281 
	`De˛¨eO±i⁄Ref
(
fNEvítsMax
 , "NEventsMax", "nEventsMax forádaptive volumeÑange");

282 
	`De˛¨eO±i⁄Ref
(
fMaxVIãøti⁄s
, "MaxVIterations", "MaxVIterations forádaptive volumeÑange");

283 
	`De˛¨eO±i⁄Ref
(
fInôülSˇÀ
 , "InitialScale", "InitialScale forádaptive volumeÑange");

284 
	`De˛¨eO±i⁄Ref
(
fGaussSigma
 , "GaussSigma", "Width (wrt volume size) of Gaussian kernelÉstimator");

285 
	`De˛¨eO±i⁄Ref
(
fN‹mTªe
 , "NormTree", "Normalize binary searchÅree");

286 
	}
}

291 
	gTMVA
::
MëhodPDERS
::
	$Pro˚ssO±i⁄s
()

293 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

294 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇot yetávailable for method: "

295 << 
	`GëMëhodTy≥Name
()

297 << 
Endl
;

300 
fGaussSigmaN‹m
 = 
fGaussSigma
;

302 
fVR™geMode
 = 
MëhodPDERS
::
kUnsuµ‹ãd
;

304 i‡(
fVﬁumeR™ge
 ="MöMax" ) 
fVR™geMode
 = 
kMöMax
;

305 i‡(
fVﬁumeR™ge
 ="RMS" ) 
fVR™geMode
 = 
kRMS
;

306 i‡(
fVﬁumeR™ge
 ="Ad≠tive" ) 
fVR™geMode
 = 
kAd≠tive
;

307 i‡(
fVﬁumeR™ge
 ="UnsˇÀd" ) 
fVR™geMode
 = 
kUnsˇÀd
;

308 i‡(
fVﬁumeR™ge
 ="kNN" ) 
fVR™geMode
 = 
kkNN
;

310 
	`Log
(Ë<< 
kFATAL
 << "VﬁumeR™geModê∑ømëî '" << 
fVﬁumeR™ge
 << "' unknown" << 
Endl
;

313 i‡(
fKî√lSåög
 ="Box" ) 
fKî√lE°im©‹
 = 
kBox
;

314 i‡(
fKî√lSåög
 ="Sphîe" ) 
fKî√lE°im©‹
 = 
kSphîe
;

315 i‡(
fKî√lSåög
 ="Tì≥e" ) 
fKî√lE°im©‹
 = 
kTì≥e
;

316 i‡(
fKî√lSåög
 ="Gauss" ) 
fKî√lE°im©‹
 = 
kGauss
;

317 i‡(
fKî√lSåög
 ="Söc3" ) 
fKî√lE°im©‹
 = 
kSöc3
;

318 i‡(
fKî√lSåög
 ="Söc5" ) 
fKî√lE°im©‹
 = 
kSöc5
;

319 i‡(
fKî√lSåög
 ="Söc7" ) 
fKî√lE°im©‹
 = 
kSöc7
;

320 i‡(
fKî√lSåög
 ="Söc9" ) 
fKî√lE°im©‹
 = 
kSöc9
;

321 i‡(
fKî√lSåög
 ="Söc11" ) 
fKî√lE°im©‹
 = 
kSöc11
;

322 i‡(
fKî√lSåög
 ="L™czos2" ) 
fKî√lE°im©‹
 = 
kL™czos2
;

323 i‡(
fKî√lSåög
 ="L™czos3" ) 
fKî√lE°im©‹
 = 
kL™czos3
;

324 i‡(
fKî√lSåög
 ="L™czos5" ) 
fKî√lE°im©‹
 = 
kL™czos5
;

325 i‡(
fKî√lSåög
 ="L™czos8" ) 
fKî√lE°im©‹
 = 
kL™czos8
;

326 i‡(
fKî√lSåög
 ="Trim" ) 
fKî√lE°im©‹
 = 
kTrim
;

328 
	`Log
(Ë<< 
kFATAL
 << "Kî√lE°im©‹Ö¨amëî '" << 
fKî√lSåög
 << "' unknown" << 
Endl
;

333 
	`Log
(Ë<< 
kVERBOSE
 << "interpreted option string: vRangeMethod: '"

334 << (c⁄° *)((
fVR™geMode
 =
kMöMax
) ? "MinMax" :

335 (
fVR™geMode
 =
kUnsˇÀd
) ? "Unscaled" :

336 (
fVR™geMode
 =
kRMS
 ) ? "RMS" : "Ad≠tive"Ë<< "'" << 
Endl
;

337 i‡(
fVR™geMode
 =
kMöMax
 || fVR™geModê=
kRMS
)

338 
	`Log
(Ë<< 
kVERBOSE
 << "dñèFøc: " << 
fDñèFøc
 << 
Endl
;

340 
	`Log
(Ë<< 
kVERBOSE
 << "nEventsMin/Max, maxVIterations, initialScale: "

341 << 
fNEvítsMö
 << " " << 
fNEvítsMax


342 << " " << 
fMaxVIãøti⁄s
 << " " << 
fInôülSˇÀ
 << 
Endl
;

343 
	`Log
(Ë<< 
kVERBOSE
 << "Kî√lE°im©‹ = " << 
fKî√lSåög
 << 
Endl
;

344 
	}
}

352 
	gTMVA
::
MëhodPDERS
::
	$Tøö
( )

354 i‡(
	`IsN‹mÆi£d
()Ë
	`Log
(Ë<< 
kFATAL
 << "\"Normalise\" option cannot be used with PDERS; "

357 << 
Endl
;

359 
	`Cª©eBö¨ySórchTªe
–
Ty≥s
::
kTøöög
 );

361 
	`CÆcAvîages
();

362 
	`SëVﬁumeEÀmít
();

364 
fInôülizedVﬁumeEÀ
 = 
kTRUE
;

365 
	`ExôFromTøöög
();

366 
	}
}

372 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

374 i‡(
fInôülizedVﬁumeEÀ
 =
kFALSE
) {

375 
fInôülizedVﬁumeEÀ
 = 
kTRUE
;

378 
	`as£π
–
fBö¨yTªe
 );

380 
	`CÆcAvîages
();

381 
	`SëVﬁumeEÀmít
();

385 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

387  
this
->
	`CRSˇlc
–*
	`GëEvít
() );

388 
	}
}

392 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
MëhodPDERS
::
	$GëRegªssi⁄VÆues
()

394 i‡(
fRegªssi⁄Rëu∫VÆ
 =0ËfRegªssi⁄Rëu∫VÆ = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>;

395 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

398 i‡(
fInôülizedVﬁumeEÀ
 =
kFALSE
) {

399 
fInôülizedVﬁumeEÀ
 = 
kTRUE
;

402 
	`as£π
–
fBö¨yTªe
 );

404 
	`CÆcAvîages
();

406 
	`SëVﬁumeEÀmít
();

409 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

410 
this
->
	`RRSˇlc
–*
ev
, 
fRegªssi⁄Rëu∫VÆ
 );

412 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ev
);

413 
UI¡_t
 
iv¨
 = 0;

414 
°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ô
 = 
fRegªssi⁄Rëu∫VÆ
->
	`begö
(); ià!fRegªssi⁄Rëu∫VÆ->
	`íd
(); it++ ) {

415 
evT
->
	`SëT¨gë
(
iv¨
,(*
ô
));

416 
iv¨
++;

419 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

420 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

422 
iv¨
 = 0; iv¨<
evT2
->
	`GëNT¨gës
(); ivar++) {

423 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
evT2
->
	`GëT¨gë
(
iv¨
));

426 
dñëe
 
evT
;

429  (*
fRegªssi⁄Rëu∫VÆ
);

430 
	}
}

435 
	gTMVA
::
MëhodPDERS
::
	$CÆcAvîages
()

437 i‡(
fVR™geMode
 =
kAd≠tive
 || fVR™geModê=
kRMS
 || fVR™geModê=
kkNN
 ) {

438 
fAvîageRMS
.
	`˛ór
();

439 
fBö¨yTªe
->
	`CÆcSèti°ics
();

441 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

442 i‡(!
	`DoRegªssi⁄
()){

443 
Flﬂt_t
 
rmsS
 = 
fBö¨yTªe
->
	`RMS
(
Ty≥s
::
kSig«l
, 
iv¨
);

444 
Flﬂt_t
 
rmsB
 = 
fBö¨yTªe
->
	`RMS
(
Ty≥s
::
kBackground
, 
iv¨
);

445 
fAvîageRMS
.
	`push_back
–(
rmsS
 + 
rmsB
)*0.5 );

447 
Flﬂt_t
 
rms
 = 
fBö¨yTªe
->
	`RMS
–
iv¨
 );

448 
fAvîageRMS
.
	`push_back
–
rms
 );

452 
	}
}

457 
	gTMVA
::
MëhodPDERS
::
	$Cª©eBö¨ySórchTªe
–
Ty≥s
::
ETªeTy≥
 
ty≥
 )

459 i‡(
NULL
 !
fBö¨yTªe
Ë
dñëe
 fBinaryTree;

460 
fBö¨yTªe
 = 
√w
 
	`Bö¨ySórchTªe
();

461 i‡(
fN‹mTªe
) {

462 
fBö¨yTªe
->
	`SëN‹mÆize
–
kTRUE
 );

465 
fBö¨yTªe
->
	`Fûl
–
	`GëEvítCﬁÀ˘i⁄
(
ty≥
) );

467 i‡(
fN‹mTªe
) {

468 
fBö¨yTªe
->
	`N‹mÆizeTªe
();

471 i‡(!
	`DoRegªssi⁄
()) {

473 
fSˇÀS
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kSig«l
 );

474 
fSˇÀB
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kBackground
 );

476 
	`Log
(Ë<< 
kVERBOSE
 << "Sig«»™d background sˇÀs: " << 
fSˇÀS
 << " " << 
fSˇÀB
 << 
Endl
;

478 
	}
}

483 
	gTMVA
::
MëhodPDERS
::
	$SëVﬁumeEÀmít
( ) {

484 i‡(
	`GëNv¨
()==0) {

485 
	`Log
(Ë<< 
kFATAL
 << "GëNv¨(Ë=0" << 
Endl
;

490 
fkNNMö
 = 
	`I¡_t
(
fNEvítsMö
);

491 
fkNNMax
 = 
	`I¡_t
(
fNEvítsMax
);

493 i‡(
fDñè
Ë
dñëe
 fDelta;

494 i‡(
fShi·
Ë
dñëe
 fShift;

495 
fDñè
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>–
	`GëNv¨
() );

496 
fShi·
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>–
	`GëNv¨
() );

498 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

499 
fVR™geMode
) {

501 
kRMS
:

502 
kkNN
:

503 
kAd≠tive
:

505 i‡(
fAvîageRMS
.
	`size
(Ë!
	`GëNv¨
())

506 
	`Log
(Ë<< 
kFATAL
 << "<SëVﬁumeEÀmít> RMSÇŸ compuãd: " << 
fAvîageRMS
.
	`size
(Ë<< 
Endl
;

507 (*
fDñè
)[
iv¨
] = 
fAvîageRMS
[iv¨]*
fDñèFøc
;

508 
	`Log
(Ë<< 
kVERBOSE
 << "dñè o‡v¨[" << (*
fI≈utV¨s
)[
iv¨
]

509 << "\t]: " << 
fAvîageRMS
[
iv¨
]

510 << "\à | com∞wôh |max - mö|: " << (
	`GëXmax
–
iv¨
 ) - 
	`GëXmö
( ivar ))

511 << 
Endl
;

513 
kMöMax
:

514 (*
fDñè
)[
iv¨
] = (
	`GëXmax
–iv¨ ) - 
	`GëXmö
–iv¨ ))*
fDñèFøc
;

516 
kUnsˇÀd
:

517 (*
fDñè
)[
iv¨
] = 
fDñèFøc
;

520 
	`Log
(Ë<< 
kFATAL
 << "<SetVolumeElement> unknownÑange-set mode: "

521 << 
fVR™geMode
 << 
Endl
;

523 (*
fShi·
)[
iv¨
] = 0.5;

526 
	}
}

531 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$IGëVﬁumeC⁄ã¡F‹RoŸ
–
DoubÀ_t
 
sˇÀ
 )

533  
	`ThisPDERS
()->
	`GëVﬁumeC⁄ã¡F‹RoŸ
–
sˇÀ
 );

534 
	}
}

539 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$GëVﬁumeC⁄ã¡F‹RoŸ
–
DoubÀ_t
 
sˇÀ
 )

541 
Vﬁume
 
	`v
–*
fHñpVﬁume
 );

542 
v
.
	`SˇÀI¡îvÆ
–
sˇÀ
 );

544 
DoubÀ_t
 
cou¡
 = 
	`GëBö¨yTªe
()->
	`SórchVﬁume
–&
v
 );

546 
v
.
	`Dñëe
();

547  
cou¡
;

548 
	}
}

550 
	gTMVA
::
MëhodPDERS
::
GëSam∂e
–c⁄° 
Evít
& 
e
,

551 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>& 
evíts
,

552 
Vﬁume
 *
vﬁume
 )

554 
Flﬂt_t
 
	gcou¡
 = 0;

562 #ifde‡ 
TMVA_MëhodPDERS__cou¡ByH™d__Debug__


565 
	gcou¡
 = 
fBö¨yTªe
->
SórchVﬁume
–
vﬁume
 );

567 
I¡_t
 
	giS
 = 0, 
	giB
 = 0;

568 
UI¡_t
 
	gnv¨
 = 
GëNv¨
();

569 
UI¡_t
 
	gõvt_
=0; ievt_<
D©a
()->
GëNTøöögEvíts
(); ievt_++) {

570 c⁄° 
Evít
 * 
	gev
 = 
GëTøöögEvít
(
õvt_
);

571 
Boﬁ_t
 
	göV
;

572 
I¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

573 
Flﬂt_t
 
	gx
 = 
ev
->
GëVÆue
(
iv¨
);

574 
	göV
 = (
x
 > (*
vﬁume
->
Lowî
)[
iv¨
] && x <(*vﬁume->
Uµî
)[ivar]);

575 i‡(!
	göV
) ;

577 i‡(
	göV
) {

578 
	gö
++;

581 
Log
(Ë<< 
	gkVERBOSE
 << "debug: myÅe°: " << 
	gö
 << 
	gEndl
;

582 
Log
(Ë<< 
	gkVERBOSE
 << "debug: böTªe: " << 
	gcou¡
 << 
	gEndl
 << Endl;

588 i‡(
	gfVR™geMode
 =
kRMS
 || 
fVR™geMode
 =
kMöMax
 || fVR™geModê=
kUnsˇÀd
) {

590 
°d
::
ve˘‹
<
DoubÀ_t
> *
lb
 = 
√w
 std::ve˘‹<DoubÀ_t>–
GëNv¨
() );

591 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); iv¨++Ë(*
	glb
)[
iv¨
] = 
e
.
GëVÆue
(ivar);

592 
	g°d
::
ve˘‹
<
DoubÀ_t
> *
ub
 = 
√w
 
°d
::ve˘‹<DoubÀ_t>–*
lb
 );

593 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

594 (*
	glb
)[
iv¨
] -(*
fDñè
)[iv¨]*(1.0 - (*
fShi·
)[ivar]);

595 (*
	gub
)[
iv¨
] +(*
fDñè
)[iv¨]*(*
fShi·
)[ivar];

597 
Vﬁume
* 
	gsvﬁume
 = 
√w
 Vﬁume–
lb
, 
ub
 );

600 
	gfBö¨yTªe
->
SórchVﬁume
–
svﬁume
, &
evíts
 );

602 i‡(
	gfVR™geMode
 =
kAd≠tive
) {

608 i‡(
MëhodPDERS_U£FödRoŸ
) {

612 
fHñpVﬁume
 = 
vﬁume
;

614 
Upd©eThis
();

615 
RoŸFödî
 
roŸFödî
–
this
, 0.01, 50, 200, 10 );

616 
DoubÀ_t
 
	gsˇÀ
 = 
roŸFödî
.
RoŸ
–(
fNEvítsMö
 + 
fNEvítsMax
)/2.0 );

618 
	gvﬁume
->
SˇÀI¡îvÆ
–
sˇÀ
 );

620 
	gfBö¨yTªe
->
SórchVﬁume
–
vﬁume
, &
evíts
 );

622 
	gfHñpVﬁume
 = 
NULL
;

628 
	gcou¡
 = 
fBö¨yTªe
->
SórchVﬁume
–
vﬁume
 );

630 
Flﬂt_t
 
	gnEvítsO
 = 
cou¡
;

631 
I¡_t
 
	gi_
=0;

633 
	gnEvítsO
 < 
	gfNEvítsMö
) {

634 
	gvﬁume
->
SˇÀI¡îvÆ
( 1.15 );

635 
	gcou¡
 = 
fBö¨yTªe
->
SórchVﬁume
–
vﬁume
 );

636 
	gnEvítsO
 = 
cou¡
;

637 
	gi_
++;

639 i‡(
	gi_
 > 50Ë
Log
(Ë<< 
	gkWARNING
 << "w¨nög i¿evít: " << 
	ge


641 << ">50 iãøti⁄†ö whûêlo› (" << 
	gi_
 << ")" << 
	gEndl
;

643 
Flﬂt_t
 
	gnEvítsN
 = 
nEvítsO
;

644 
Flﬂt_t
 
	gnEvítsE
 = 0.5*(
fNEvítsMö
 + 
fNEvítsMax
);

645 
Flﬂt_t
 
	gsˇÀO
 = 1.0;

646 
Flﬂt_t
 
	gsˇÀN
 = 
fInôülSˇÀ
;

647 
Flﬂt_t
 
	gsˇÀ
 = 
sˇÀN
;

648 
Flﬂt_t
 
	gsˇÀBe°
 = 
sˇÀN
;

649 
Flﬂt_t
 
	gnEvítsBe°
 = 
nEvítsN
;

651 
I¡_t
 
	gic
=1; ic<
	gfMaxVIãøti⁄s
; ic++) {

652 i‡(
	gnEvítsN
 < 
	gfNEvítsMö
 ||ÇEvítsN > 
	gfNEvítsMax
) {

655 
Vﬁume
* 
	gv
 = 
√w
 Vﬁume–*
vﬁume
 );

656 
	gv
->
SˇÀI¡îvÆ
–
sˇÀ
 );

657 
	gnEvítsN
 = 
fBö¨yTªe
->
SórchVﬁume
–
v
 );

660 i‡(
	gnEvítsN
 > 1 &&ÇEvítsN - 
	gnEvítsO
 != 0)

661 i‡(
sˇÀN
 - 
sˇÀO
 != 0)

662 
sˇÀ
 +(
sˇÀN
 - 
sˇÀO
)/(
nEvítsN
 - 
nEvítsO
)*(
nEvítsE
 -ÇEventsN);

664 
	gsˇÀ
 += (-0.01);

666 
	gsˇÀ
 += 0.5;

669 
	gsˇÀN
 = 
sˇÀ
;

672 i‡(
	gTM©h
::
Abs
(
nEvítsN
 - 
nEvítsE
Ë< 
TM©h
::Abs(
nEvítsBe°
 -ÇEventsE) &&

673 (
nEvítsN
 >
fNEvítsMö
 || 
nEvítsBe°
 <ÇEventsN)) {

674 
nEvítsBe°
 = 
nEvítsN
;

675 
	gsˇÀBe°
 = 
sˇÀ
;

678 
	gv
->
Dñëe
();

679 
dñëe
 
	gv
;

685 
	gnEvítsN
 = 
nEvítsBe°
;

687 i‡(
	gnEvítsN
 < 
	gfNEvítsMö
-1 ||ÇEvítsN > 
	gfNEvítsMax
+1)

688 
Log
(Ë<< 
	gkWARNING
 << "w¨nög i¿evíà" << 
	ge


690 << "max. #ôî©i⁄†(" << 
	gfMaxVIãøti⁄s
 << ")"

691 << "[ÇEvíts: " << 
	gnEvítsN
 << " " << 
	gfNEvítsMö
 << " " << 
	gfNEvítsMax
 << "]"

692 << 
	gEndl
;

694 
	gvﬁume
->
SˇÀI¡îvÆ
–
sˇÀBe°
 );

695 
	gfBö¨yTªe
->
SórchVﬁume
–
vﬁume
, &
evíts
 );

700 } i‡(
	gfVR™geMode
 =
kkNN
) {

701 
Vﬁume
 
v
(*
vﬁume
);

703 
	gevíts
.
˛ór
();

705 
I¡_t
 
	gkNNcou¡
 = 
fBö¨yTªe
->
SórchVﬁumeWôhMaxLimô
–&
v
, &
evíts
, 
fkNNMax
+1 );

708 
I¡_t
 
	gt_times
 = 0;

710  !(
	gkNNcou¡
 >
fkNNMö
 && 
kNNcou¡
 <
fkNNMax
) ) {

711 i‡(
kNNcou¡
 < 
fkNNMö
) {

712 
Flﬂt_t
 
sˇÀ
 = 2;

713 
	gvﬁume
->
SˇÀI¡îvÆ
–
sˇÀ
 );

715 i‡(
	gkNNcou¡
 > 
	gfkNNMax
) {

716 
Flﬂt_t
 
	gsˇÀ
 = 0.1;

717 
	gvﬁume
->
SˇÀI¡îvÆ
–
sˇÀ
 );

719 
	gevíts
.
˛ór
();

721 
	gv
 = *
vﬁume
 ;

723 
	gkNNcou¡
 = 
fBö¨yTªe
->
SórchVﬁumeWôhMaxLimô
–&
v
, &
evíts
, 
fkNNMax
+1 );

725 
	gt_times
++;

727 i‡(
	gt_times
 =
fMaxVIãøti⁄s
) {

728 
Log
(Ë<< 
kWARNING
 << "w¨nög i¿evít" << 
e


730 << "max. #ôî©i⁄†(" << 
fMaxVIãøti⁄s
 << ")"

731 << "[ kNN: " << 
fkNNMö
 << " " << 
fkNNMax
 << 
Endl
;

737 
DoubÀ_t
 *
	gdim_n‹mÆiz©i⁄
 = 
√w
 DoubÀ_t[
GëNv¨
()];

738 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

739 
	gdim_n‹mÆiz©i⁄
 [
iv¨
] = 1.0 / ((*
v
.
fUµî
)[iv¨] - (*v.
fLowî
)[ivar]);

742 
	g°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*> 
ãmpVe˘‹
;

744 i‡(
	gkNNcou¡
 >
fkNNMö
) {

745 
°d
::
ve˘‹
<
DoubÀ_t
> *
di°™˚s
 = 
√w
 std::ve˘‹<DoubÀ_t>–
kNNcou¡
 );

748 
I¡_t
 
	gj
=0;j< I¡_t(
evíts
.
size
()) ;j++)

749 (*
	gdi°™˚s
)[
j
] = 
GëN‹mÆizedDi°™˚
 ( 
e
, *
evíts
[j], 
dim_n‹mÆiz©i⁄
 );

752 
	g°d
::
ve˘‹
<
DoubÀ_t
>::
ôî©‹
 
wsk
 = 
di°™˚s
->
begö
();

753 
I¡_t
 
	gj
=0;j<
	gfkNNMö
-1;j++Ë
	gwsk
++;

754 
	g°d
::
¡h_ñemít
–
di°™˚s
->
begö
(), 
wsk
, di°™˚s->
íd
() );

758 
I¡_t
 
	gj
=0;j<I¡_t(
evíts
.
size
());j++) {

759 
DoubÀ_t
 
	gdi°
 = 
GëN‹mÆizedDi°™˚
–
e
, *
evíts
[
j
], 
dim_n‹mÆiz©i⁄
 );

761 i‡(
	gdi°
 <(*
di°™˚s
)[
fkNNMö
-1])

762 
ãmpVe˘‹
.
push_back
–
evíts
[
j
] );

764 
	gfMax_di°™˚
 = (*
di°™˚s
)[
fkNNMö
-1];

765 
dñëe
 
	gdi°™˚s
;

767 
	gdñëe
[] 
	gdim_n‹mÆiz©i⁄
;

768 
	gevíts
 = 
ãmpVe˘‹
;

773 
Log
(Ë<< 
	gkFATAL
 << "<GëSam∂e> unknow¿R™geMode: " << 
	gfVR™geMode
 << 
	gEndl
;

780 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$CRSˇlc
–c⁄° 
Evít
& 
e
 )

782 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*> 
evíts
;

787 
°d
::
ve˘‹
<
DoubÀ_t
> *
lb
 = 
√w
 std::ve˘‹<DoubÀ_t>–
	`GëNv¨
() );

788 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); iv¨++Ë(*
lb
)[iv¨] = 
e
.
	`GëVÆue
(ivar);

790 
°d
::
ve˘‹
<
DoubÀ_t
> *
ub
 = 
√w
 std::ve˘‹<DoubÀ_t>–*
lb
 );

791 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

792 (*
lb
)[
iv¨
] -(*
fDñè
)[iv¨]*(1.0 - (*
fShi·
)[ivar]);

793 (*
ub
)[
iv¨
] +(*
fDñè
)[iv¨]*(*
fShi·
)[ivar];

796 
Vﬁume
 *
vﬁume
 = 
√w
 
	`Vﬁume
–
lb
, 
ub
 );

798 
	`GëSam∂e
–
e
, 
evíts
, 
vﬁume
 );

799 
DoubÀ_t
 
cou¡
 = 
	`CKî√lE°im©e
–
e
, 
evíts
, *
vﬁume
 );

800 
dñëe
 
vﬁume
;

801 
dñëe
 
lb
;

802 
dñëe
 
ub
;

804  
cou¡
;

805 
	}
}

809 
	gTMVA
::
MëhodPDERS
::
RRSˇlc
–c⁄° 
Evít
& 
e
, 
°d
::
ve˘‹
<
Flﬂt_t
>* 
cou¡
 )

811 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*> 
evíts
;

816 
	g°d
::
ve˘‹
<
DoubÀ_t
> *
lb
 = 
√w
 
°d
::ve˘‹<DoubÀ_t>–
GëNv¨
() );

817 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); iv¨++Ë(*
	glb
)[
iv¨
] = 
e
.
GëVÆue
(ivar);

819 
	g°d
::
ve˘‹
<
DoubÀ_t
> *
ub
 = 
√w
 
°d
::ve˘‹<DoubÀ_t>–*
lb
 );

820 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++) {

821 (*
	glb
)[
iv¨
] -(*
fDñè
)[iv¨]*(1.0 - (*
fShi·
)[ivar]);

822 (*
	gub
)[
iv¨
] +(*
fDñè
)[iv¨]*(*
fShi·
)[ivar];

824 
Vﬁume
 *
	gvﬁume
 = 
√w
 Vﬁume–
lb
, 
ub
 );

826 
GëSam∂e
–
e
, 
evíts
, 
vﬁume
 );

827 
RKî√lE°im©e
–
e
, 
evíts
, *
vﬁume
, 
cou¡
 );

829 
dñëe
 
	gvﬁume
;

836 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
CKî√lE°im©e
–c⁄° 
Evít
 & 
evít
,

837 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>& 
evíts
, 
Vﬁume
& 
v
 )

839 
DoubÀ_t
 *
	gdim_n‹mÆiz©i⁄
 = 
√w
 DoubÀ_t[
GëNv¨
()];

840 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++)

841 
	gdim_n‹mÆiz©i⁄
 [
iv¨
] = 2 / ((*
v
.
fUµî
)[iv¨] - (*v.
fLowî
)[ivar]);

843 
DoubÀ_t
 
	gpdfSumS
 = 0;

844 
DoubÀ_t
 
	gpdfSumB
 = 0;

847 
	g°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>::
ôî©‹
 
õv
 = 
evíts
.
begö
(); 
	gõv
 !evíts.
íd
(); iev++) {

850 
DoubÀ_t
 
	gn‹mÆized_di°™˚
 = 
GëN‹mÆizedDi°™˚
 (
evít
, *(*
õv
), 
dim_n‹mÆiz©i⁄
);

854 i‡(
	gn‹mÆized_di°™˚
 > 1 && 
	gfKî√lE°im©‹
 !
kBox
) ;

856 i‡–(*
	gõv
)->
GëCœss
()==
fSig«lCœss
 )

857 
pdfSumS
 +
AµlyKî√lFun˘i⁄
 (
n‹mÆized_di°™˚
Ë* (*
õv
)->
GëWeight
();

859 
	gpdfSumB
 +
AµlyKî√lFun˘i⁄
 (
n‹mÆized_di°™˚
Ë* (*
õv
)->
GëWeight
();

861 
	gpdfSumS
 = 
Kî√lN‹mÆiz©i⁄
–
pdfSumS
 < 0. ? 0. :ÖdfSumS );

862 
	gpdfSumB
 = 
Kî√lN‹mÆiz©i⁄
–
pdfSumB
 < 0. ? 0. :ÖdfSumB );

864 
	gdñëe
[] 
	gdim_n‹mÆiz©i⁄
;

866 i‡(
	gpdfSumS
 < 1e-20 && 
	gpdfSumB
 < 1e-20)  0.5;

867 i‡(
	gpdfSumB
 < 1e-20)  1.0;

868 i‡(
	gpdfSumS
 < 1e-20)  0.0;

870 
Flﬂt_t
 
	gr
 = 
pdfSumB
*
fSˇÀB
/(
pdfSumS
*
fSˇÀS
);

871  1.0/(
	gr
 + 1.0);

877 
	gTMVA
::
MëhodPDERS
::
RKî√lE°im©e
–c⁄° 
Evít
 & 
evít
,

878 
°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>& 
evíts
, 
Vﬁume
& 
v
,

879 
°d
::
ve˘‹
<
Flﬂt_t
>* 
pdfSum
 )

881 
DoubÀ_t
 *
dim_n‹mÆiz©i⁄
 = 
√w
 DoubÀ_t[
GëNv¨
()];

882 
UI¡_t
 
	giv¨
=0; iv¨<
GëNv¨
(); ivar++)

883 
	gdim_n‹mÆiz©i⁄
 [
iv¨
] = 2 / ((*
v
.
fUµî
)[iv¨] - (*v.
fLowî
)[ivar]);

886 
	gpdfSum
->
˛ór
();

887 
Flﬂt_t
 
	gpdfDiv
 = 0;

888 
	gfNRegOut
 = 1;

890 
I¡_t
 
	giv¨
 = 0; iv¨ < 
	gfNRegOut
 ; ivar++)

891 
	gpdfSum
->
push_back
( 0 );

894 
	g°d
::
ve˘‹
<c⁄° 
Bö¨ySórchTªeNode
*>::
ôî©‹
 
õv
 = 
evíts
.
begö
(); 
	gõv
 !evíts.
íd
(); iev++) {

897 
DoubÀ_t
 
	gn‹mÆized_di°™˚
 = 
GëN‹mÆizedDi°™˚
 (
evít
, *(*
õv
), 
dim_n‹mÆiz©i⁄
);

901 i‡(
	gn‹mÆized_di°™˚
 > 1 && 
	gfKî√lE°im©‹
 !
kBox
) ;

903 
I¡_t
 
	giv¨
 = 0; iv¨ < 
	gfNRegOut
 ; ivar++) {

904 
	gpdfSum
->
©
(
iv¨
Ë+
AµlyKî√lFun˘i⁄
 (
n‹mÆized_di°™˚
Ë* (*
õv
)->
GëWeight
(Ë* (*õv)->
GëT¨gës
()[ivar];

905 
	gpdfDiv
 +
AµlyKî√lFun˘i⁄
 (
n‹mÆized_di°™˚
Ë* (*
õv
)->
GëWeight
();

909 
	gdñëe
[] 
	gdim_n‹mÆiz©i⁄
;

911 i‡(
	gpdfDiv
 == 0)

914 
I¡_t
 
	giv¨
 = 0; iv¨ < 
	gfNRegOut
 ; ivar++)

915 
	gpdfSum
->
©
(
iv¨
Ë/
pdfDiv
;

924 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$AµlyKî√lFun˘i⁄
 (
DoubÀ_t
 
n‹mÆized_di°™˚
)

926 
fKî√lE°im©‹
) {

927 
kBox
:

928 
kSphîe
:

931 
kTì≥e
:

932  (1 - 
n‹mÆized_di°™˚
);

934 
kGauss
:

935  
TM©h
::
	`Gaus
–
n‹mÆized_di°™˚
, 0, 
fGaussSigmaN‹m
, 
kFALSE
);

937 
kSöc3
:

938 
kSöc5
:

939 
kSöc7
:

940 
kSöc9
:

941 
kSöc11
: {

942 
DoubÀ_t
 
side_¸ossögs
 = 2 + ((Ë
fKî√lE°im©‹
Ë- ((Ë
kSöc3
);

943  
	`N‹mSöc
 (
side_¸ossögs
 * 
n‹mÆized_di°™˚
);

946 
kL™czos2
:

947  
	`L™czosFûãr
 (2, 
n‹mÆized_di°™˚
);

949 
kL™czos3
:

950  
	`L™czosFûãr
 (3, 
n‹mÆized_di°™˚
);

952 
kL™czos5
:

953  
	`L™czosFûãr
 (5, 
n‹mÆized_di°™˚
);

955 
kL™czos8
:

956  
	`L™czosFûãr
 (8, 
n‹mÆized_di°™˚
);

958 
kTrim
: {

959 
DoubÀ_t
 
x
 = 
n‹mÆized_di°™˚
 / 
fMax_di°™˚
;

960 
x
 = 1 - x*x*x;

961  
x
*x*x;

965 
	`Log
(Ë<< 
kFATAL
 << "Kî√»e°im©i⁄ fun˘i⁄ unsuµ‹ãd. Enumî©‹ i†" << 
fKî√lE°im©‹
 << 
Endl
;

970 
	}
}

976 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$Kî√lN‹mÆiz©i⁄
 (
DoubÀ_t
 
pdf
)

980 
	`TTHREAD_TLS
(
DoubÀ_t
Ë
ªt
 = 1.0;

982 i‡(
ªt
 !0.0ËÑë*
pdf
;

985 
fKî√lE°im©‹
) {

986 
kBox
:

987 
kSphîe
:

988 
ªt
 = 1.;

990 
kTì≥e
:

991 
ªt
 = (
	`GëNv¨
(Ë* (GëNv¨(Ë+ 1Ë* 
TM©h
::
	`Gamma
 (((
DoubÀ_t
) GetNvar()) / 2.)) /

992 –
TM©h
::
	`Powî
 (2., (
DoubÀ_t
Ë
	`GëNv¨
(Ë+ 1Ë* TM©h::Powî (TM©h::
	`Pi
(), ((Double_t) GetNvar()) / 2.));

994 
kGauss
:

996 
ªt
 = 1. / 
TM©h
::
	`Powî
 ( 2 * TM©h::
	`Pi
(Ë* 
fGaussSigmaN‹m
 * fGaussSigmaN‹m, ((
DoubÀ_t
Ë
	`GëNv¨
()) / 2.);

998 
kSöc3
:

999 
kSöc5
:

1000 
kSöc7
:

1001 
kSöc9
:

1002 
kSöc11
:

1003 
kL™czos2
:

1004 
kL™czos3
:

1005 
kL™czos5
:

1006 
kL™czos8
:

1008 
ªt
 = 1 / 
TM©h
::
	`Powî
 ( 2., (
DoubÀ_t
Ë
	`GëNv¨
() );

1011 
	`Log
(Ë<< 
kFATAL
 << "Kî√»e°im©i⁄ fun˘i⁄ unsuµ‹ãd. Enumî©‹ i†" << 
fKî√lE°im©‹
 << 
Endl
;

1015 
ªt
 *–
TM©h
::
	`Powî
 (2., 
°©ic_ˇ°
<
I¡_t
>(
	`GëNv¨
())Ë* TM©h::
	`Gamma
 (1 + (((
DoubÀ_t
) GetNvar()) / 2.)) ) /

1016 
TM©h
::
	`Powî
 (TM©h::
	`Pi
(), ((
DoubÀ_t
Ë
	`GëNv¨
()) / 2.);

1018  
ªt
*
pdf
;

1019 
	}
}

1024 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$GëN‹mÆizedDi°™˚
 ( c⁄° 
Evít
 &
ba£_evít
,

1025 c⁄° 
Bö¨ySórchTªeNode
 &
ßm∂e_evít
,

1026 
DoubÀ_t
 *
dim_n‹mÆiz©i⁄
)

1028 
DoubÀ_t
 
ªt
=0;

1029 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

1030 
DoubÀ_t
 
di°
 = 
dim_n‹mÆiz©i⁄
[
iv¨
] * (
ßm∂e_evít
.
	`GëEvítV
()[iv¨] - 
ba£_evít
.
	`GëVÆue
(ivar));

1031 
ªt
 +
di°
*dist;

1034 
ªt
 /
	`GëNv¨
();

1035  
TM©h
::
	`Sqπ
 (
ªt
);

1036 
	}
}

1041 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$N‹mSöc
 (
DoubÀ_t
 
x
)

1043 i‡(
x
 < 10e-10 && x > -10e-10) {

1047 
DoubÀ_t
 
pix
 = 
TM©h
::
	`Pi
(Ë* 
x
;

1048 
DoubÀ_t
 
söc
 = 
TM©h
::
	`Sö
(
pix
) /Öix;

1049 
DoubÀ_t
 
ªt
;

1051 i‡(
	`GëNv¨
() % 2)

1052 
ªt
 = 
TM©h
::
	`Powî
 (
söc
, 
°©ic_ˇ°
<
I¡_t
>(
	`GëNv¨
()));

1054 
ªt
 = 
TM©h
::
	`Abs
 (
söc
Ë* TM©h::
	`Powî
 (söc, 
°©ic_ˇ°
<
I¡_t
>(
	`GëNv¨
() - 1));

1056  
ªt
;

1057 
	}
}

1062 
DoubÀ_t
 
	gTMVA
::
MëhodPDERS
::
	$L™czosFûãr
 (
I¡_t
 
Àvñ
, 
DoubÀ_t
 
x
)

1064 i‡(
x
 < 10e-10 && x > -10e-10) {

1068 
DoubÀ_t
 
pix
 = 
TM©h
::
	`Pi
(Ë* 
x
;

1069 
DoubÀ_t
 
pixtime¢
 = 
pix
 * ((DoubÀ_tË
Àvñ
);

1070 
DoubÀ_t
 
œnczos
 = (
TM©h
::
	`Sö
(
pix
Ë/ÖixË* (TM©h::Sö(
pixtime¢
) /Öixtimesn);

1071 
DoubÀ_t
 
ªt
;

1073 i‡(
	`GëNv¨
(Ë% 2Ë
ªt
 = 
TM©h
::
	`Powî
 (
œnczos
, 
°©ic_ˇ°
<
I¡_t
>(GetNvar()));

1074 
ªt
 = 
TM©h
::
	`Abs
 (
œnczos
Ë* TM©h::
	`Powî
 (œnczos, 
°©ic_ˇ°
<
I¡_t
>(
	`GëNv¨
() - 1));

1076  
ªt
;

1077 
	}
}

1082 
Flﬂt_t
 
	gTMVA
::
MëhodPDERS
::
	$GëEº‹
–
Flﬂt_t
 
cou¡S
, Flﬂt_à
cou¡B
,

1083 
Flﬂt_t
 
sumW2S
, Flﬂt_à
sumW2B
 ) const

1085 
Flﬂt_t
 
c
 = 
fSˇÀB
/
fSˇÀS
;

1086 
Flﬂt_t
 
d
 = 
cou¡S
 + 
c
*
cou¡B
; d *= d;

1088 i‡(
d
 < 1e-10)  1;

1090 
Flﬂt_t
 
f
 = 
c
*c/
d
/d;

1091 
Flﬂt_t
 
îr
 = 
f
*
cou¡B
*cou¡B*
sumW2S
 + f*
cou¡S
*cou¡S*
sumW2B
;

1093 i‡(
îr
 < 1e-10)  1;

1095  
	`sqπ
(
îr
);

1096 
	}
}

1101 
	gTMVA
::
MëhodPDERS
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

1103 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

1104 i‡(
fBö¨yTªe
)

1105 
fBö¨yTªe
->
	`AddXMLTo
(
wght
);

1107 
	`Log
(Ë<< 
kFATAL
 << "Sig«»™d background bö¨y sórchÅªênŸávaûabÀ" << 
Endl
;

1109 
	}
}

1113 
	gTMVA
::
MëhodPDERS
::
	$RódWeightsFromXML
–* 
wghäode
)

1115 i‡(
NULL
 !
fBö¨yTªe
Ë
dñëe
 fBinaryTree;

1116 * 
åìnode
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

1117 
fBö¨yTªe
 = 
TMVA
::
Bö¨ySórchTªe
::
	`Cª©eFromXML
(
åìnode
);

1118 if(!
fBö¨yTªe
)

1119 
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸ cª©êBö¨ySórchTªê‰om XML" << 
Endl
;

1120 if(!
fBö¨yTªe
)

1121 
	`Log
(Ë<< 
kFATAL
 << "CouldÇŸ cª©êBö¨ySórchTªê‰om XML" << 
Endl
;

1122 
fBö¨yTªe
->
	`SëPîiode
–
	`GëNv¨
() );

1123 
fBö¨yTªe
->
	`CÆcSèti°ics
();

1124 
fBö¨yTªe
->
	`Cou¡Nodes
();

1125 i‡(
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kSig«l
 ) > 0)

1126 
fSˇÀS
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kSig«l
 );

1127 
fSˇÀS
 = 1;

1128 i‡(
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kBackground
 ) > 0)

1129 
fSˇÀB
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kBackground
 );

1130 
fSˇÀB
 = 1;

1131 
	`Log
(Ë<< 
kINFO
 << "sig«»™d background sˇÀs: " << 
fSˇÀS
 << " " << 
fSˇÀB
 << 
Endl
;

1132 
	`CÆcAvîages
();

1133 
	`SëVﬁumeEÀmít
();

1134 
fInôülizedVﬁumeEÀ
 = 
kTRUE
;

1135 
	}
}

1140 
	gTMVA
::
MëhodPDERS
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
)

1142 i‡(
NULL
 !
fBö¨yTªe
Ë
dñëe
 fBinaryTree;

1144 
fBö¨yTªe
 = 
√w
 
	`Bö¨ySórchTªe
();

1146 
i°r
 >> *
fBö¨yTªe
;

1148 
fBö¨yTªe
->
	`SëPîiode
–
	`GëNv¨
() );

1150 
fBö¨yTªe
->
	`CÆcSèti°ics
();

1152 
fBö¨yTªe
->
	`Cou¡Nodes
();

1155 
fSˇÀS
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kSig«l
 );

1156 
fSˇÀB
 = 1.0/
fBö¨yTªe
->
	`GëSumOfWeights
–
Ty≥s
::
kBackground
 );

1158 
	`Log
(Ë<< 
kINFO
 << "sig«»™d background sˇÀs: " << 
fSˇÀS
 << " " << 
fSˇÀB
 << 
Endl
;

1160 
	`CÆcAvîages
();

1162 
	`SëVﬁumeEÀmít
();

1164 
fInôülizedVﬁumeEÀ
 = 
kTRUE
;

1165 
	}
}

1170 
	gTMVA
::
MëhodPDERS
::
	$WrôeWeightsToSåóm
–
TFûe
& ) const

1172 
	}
}

1177 
TMVA
::
MëhodPDERS
::
	$RódWeightsFromSåóm
–
TFûe
& )

1179 
	}
}

1184 
TMVA
::
MëhodPDERS
* TMVA::MëhodPDERS::
	$ThisPDERS
( )

1186  
	`GëMëhodPDERSThªadLoˇl
();

1187 
	}
}

1191 
	gTMVA
::
MëhodPDERS
::
	$Upd©eThis
( )

1193 
	`GëMëhodPDERSThªadLoˇl
(Ë
this
;

1194 
	}
}

1199 
	gTMVA
::
MëhodPDERS
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

1201 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

1202 
fout
 << "};" << 
°d
::
ídl
;

1203 
	}
}

1211 
	gTMVA
::
MëhodPDERS
::
	$GëHñpMesßge
() const

1213 
	`Log
(Ë<< 
Endl
;

1214 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1215 
	`Log
(Ë<< 
Endl
;

1216 
	`Log
(Ë<< "PDERS i†®gíîÆiz©i⁄ o‡thê¥oje˘ivêlikñihood cœssifõ∏" << 
Endl
;

1217 
	`Log
(Ë<< "tÿN dimísi⁄s, whîêN i†thênumbî o‡öpuàv¨übÀ†u£d." << 
Endl
;

1218 
	`Log
(Ë<< "I¿ô†ad≠tivêf‹m iài†mo°lyÉquivÆíàtÿk-Nóª°-Neighb‹" << 
Endl
;

1219 
	`Log
(Ë<< "(k-NNËmëhods. I‡thêmu…idimísi⁄Æ PDF f‹ sig«»™d background" << 
Endl
;

1220 
	`Log
(Ë<< "wîêknown,Åhi†˛assifõ∏wouldÉx∂oôÅhêfuŒ inf‹m©i⁄" << 
Endl
;

1221 
	`Log
(Ë<< "c⁄èöed i¿thêöpuàv¨übÀs,ánd would hí˚ bê›timÆ. I¿" << 
Endl
;

1222 
	`Log
(Ë<< "¥a˘i˚ howevî, hugêåaöög sam∂e†¨ê√˚sßryÅÿsufficõ¡ly " << 
Endl
;

1223 
	`Log
(Ë<< "p›uœãÅhêmu…idimísi⁄ÆÖha£ s∑˚. " << 
Endl
;

1224 
	`Log
(Ë<< 
Endl
;

1225 
	`Log
(Ë<< "Thêsim∂e° im∂emíèti⁄ o‡PDERS cou¡†thênumbî o‡sig«l" << 
Endl
;

1226 
	`Log
(Ë<< "™d backgroundÉvít†öÅhêvicöôy o‡®ã°Évít,ándÑëu∫s" << 
Endl
;

1227 
	`Log
(Ë<< "®weighàacc‹dögÅÿthêmaj‹ôy s≥cõ†o‡thê√ighb‹ögÉvíts." << 
Endl
;

1228 
	`Log
(Ë<< "A m‹êövﬁved vîsi⁄ o‡PDERS (£À˘ed byÅhê›ti⁄ \"Kî√lE°im©‹\")" << 
Endl
;

1229 
	`Log
(Ë<< "u£†Kî√»e°im©i⁄ mëhod†tÿ≠¥oxim©êthêsh≠êo‡thêPDF." << 
Endl
;

1230 
	`Log
(Ë<< 
Endl
;

1231 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1232 
	`Log
(Ë<< 
Endl
;

1233 
	`Log
(Ë<< "PDERS c™ bêvîyÖowîfu»ö ca£ o‡°r⁄glyÇ⁄-löó∏¥obÀms, " << 
Endl
;

1234 
	`Log
(Ë<< "e.g., di°ö˘ i¶™d†o‡sig«»™d backgroundÑegi⁄s. Beˇu£ o‡" << 
Endl
;

1235 
	`Log
(Ë<< "thêexp⁄ítü»growth o‡thêpha£ s∑˚, iài†imp‹è¡Åÿª°ri˘" << 
Endl
;

1236 
	`Log
(Ë<< "thênumbî o‡öpuàv¨übÀ†(dimísi⁄Ëtÿthê°ri˘lyÇe˚sßry." << 
Endl
;

1237 
	`Log
(Ë<< 
Endl
;

1238 
	`Log
(Ë<< "NŸêth© PDERS i†®¶owlyÑe•⁄dög cœssifõr. M‹eovî,Åhê√˚ssôy" << 
Endl
;

1239 
	`Log
(Ë<< "tÿ°‹êthêítúêbö¨yÅªêö mem‹y,Åÿavoidác˚ssög vútuÆ " << 
Endl
;

1240 
	`Log
(Ë<< "mem‹y,Üimô†thênumbî o‡åaöögÉvít†th© c™Éf„˘ivñy bê" << 
Endl
;

1241 
	`Log
(Ë<< "u£dÅÿmodñÅhêmu…idimísi⁄Æ PDF." << 
Endl
;

1242 
	`Log
(Ë<< 
Endl
;

1243 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

1244 
	`Log
(Ë<< 
Endl
;

1245 
	`Log
(Ë<< "I‡thêPDERSÑe•⁄£ i†foundÅoÿ¶ow whí usögÅhêad≠tivêvﬁumê" << 
Endl
;

1246 
	`Log
(Ë<< "sizê(›ti⁄ \"VﬁumeR™geMode=Ad≠tive\"), iàmighàbêfound bíeficül" << 
Endl
;

1247 
	`Log
(Ë<< "tÿªdu˚Åhênumbî o‡evít†ªquúed i¿thêvﬁume,ánd/‹Åÿíœrge" << 
Endl
;

1248 
	`Log
(Ë<< "thêÆlowedÑ™gê(\"NevítsMö/Max\"). PDERS i†ªœtivñy in£nsôive" << 
Endl
;

1249 
	`Log
(Ë<< "tÿthêwidth (\"GaussSigma\"Ëo‡thêGaussü¿kî√»(i‡u£d)." << 
Endl
;

1250 
	}
}

	@src/MethodPlugins.cxx

50 
	~"TPlugöM™agî.h
"

51 
	~"TROOT.h
"

53 
	~"TMVA/CœssifõrFa˘‹y.h
"

54 
	~"TMVA/R™kög.h
"

55 
	~"TMVA/Toﬁs.h
"

56 
	~"TMVA/Ty≥s.h
"

58 
	~<c°dio
>

59 
	~<io°ªam
>

61 
	g«me•a˚


63 
	gTMVA
::
IMëhod
* 
Cª©eMëhodPlugös
(c⁄° 
TSåög
& 
jobName
, c⁄° TSåög& 
mëhodTôÀ
, 
TMVA
::
D©aSëInfo
& 
theD©a
, c⁄° TSåög& 
theO±i⁄
)

66 
TPlugöM™agî
 *
∂ugöM™agî
(0);

67 
TPlugöH™dÀr
 *
∂ugöH™dÀr
(0);

68 
	g∂ugöM™agî
 = 
gROOT
->
GëPlugöM™agî
();

70 
TSåög
 
	gmyMëhodTôÀ
;

71 if(
	gjobName
=="" && 
mëhodTôÀ
=="") {

72 
myMëhodTôÀ
 = 
theO±i⁄
.
C›y
();

73 
Ssiz_t
 
	gfú°Undîsc‹e
 = 
myMëhodTôÀ
.
Fú°
('_');

74 
Ssiz_t
 
	gfú°Poöt
 = 
myMëhodTôÀ
.
La°
('.');

75 
	gmyMëhodTôÀ
.
Remove
(
fú°Poöt
,
myMëhodTôÀ
.
Lígth
() - firstPoint);

76 
	gmyMëhodTôÀ
.
Remove
(0,
fú°Undîsc‹e
-1);

78 
	gmyMëhodTôÀ
 = 
mëhodTôÀ
;

79 
	g∂ugöH™dÀr
 = 
∂ugöM™agî
->
FödH™dÀr
("TMVA@@MëhodBa£", 
myMëhodTôÀ
);

80 if(!
	g∂ugöH™dÀr
)

82 
	g°d
::
˚º
 << "Couldn'àfödÖlugö h™dÀ∏f‹ TMVA@@MëhodBa£ánd " << 
mëhodTôÀ
 << 
°d
::
ídl
;

86 i‡(
	g∂ugöH™dÀr
->
LﬂdPlugö
() == 0) {

87 if(
jobName
=="" && 
mëhodTôÀ
=="") {

89  (
TMVA
::
IMëhod
*Ë
∂ugöH™dÀr
->
ExecPlugö
(2, &
theD©a
, &
theO±i⁄
);

93  (
	gTMVA
::
IMëhod
*Ë
∂ugöH™dÀr
->
ExecPlugö
(4, &
jobName
, &
mëhodTôÀ
, &
theD©a
, &
theO±i⁄
);

100 
	sªgi°øti⁄
 {

101 
ªgi°øti⁄
() {

102 
	gTMVA
::
CœssifõrFa˘‹y
::
In°™˚
().
Regi°î
("Plugös", 
Cª©eMëhodPlugös
);

103 
	gTMVA
::
Ty≥s
::
In°™˚
().
AddTy≥M≠pög
(
TMVA
::Ty≥s::
kPlugös
, "Plugins");

105 } 
	gö°™˚
;

	@src/MethodRuleFit.cxx

31 
	~"TMVA/MëhodRuÀFô.h
"

33 
	~"TMVA/CœssifõrFa˘‹y.h
"

34 
	~"TMVA/C⁄fig.h
"

35 
	~"TMVA/C⁄figuøbÀ.h
"

36 
	~"TMVA/CrossE¡r›y.h
"

37 
	~"TMVA/D©aSë.h
"

38 
	~"TMVA/Decisi⁄Tªe.h
"

39 
	~"TMVA/GöiIndex.h
"

40 
	~"TMVA/IMëhod.h
"

41 
	~"TMVA/MëhodBa£.h
"

42 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

43 
	~"TMVA/MsgLoggî.h
"

44 
	~"TMVA/R™kög.h
"

45 
	~"TMVA/RuÀFôAPI.h
"

46 
	~"TMVA/SdivSqπS∂usB.h
"

47 
	~"TMVA/Sï¨©i⁄Ba£.h
"

48 
	~"TMVA/Timî.h
"

49 
	~"TMVA/Toﬁs.h
"

50 
	~"TMVA/Ty≥s.h
"

52 
	~"Rio°ªam.h
"

53 
	~"TR™dom3.h
"

54 
	~"TM©h.h
"

55 
	~"TM©rix.h
"

56 
	~"TDúe˘‹y.h
"

58 
	~<Æg‹ôhm
>

59 
	~<li°
>

61 
usög
 
	g°d
::
mö
;

63 
	$REGISTER_METHOD
(
RuÀFô
)

65 
	`CœssImp
(
TMVA
::
MëhodRuÀFô
);

70 
TMVA
::
MëhodRuÀFô
::
	$MëhodRuÀFô
–c⁄° 
TSåög
& 
jobName
,

71 c⁄° 
TSåög
& 
mëhodTôÀ
,

72 
D©aSëInfo
& 
theD©a
,

73 c⁄° 
TSåög
& 
theO±i⁄
) :

74 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kRuÀFô
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

75 , 
	`fSig«lFø˘i⁄
(0)

76 , 
	`fNTImp‹èn˚
(0)

77 , 
	`fNTC€fficõ¡
(0)

78 , 
	`fNTSuµ‹t
(0)

79 , 
	`fNTNcuts
(0)

80 , 
	`fNTNv¨s
(0)

81 , 
	`fNTPèg
(0)

82 , 
	`fNTPss
(0)

83 , 
	`fNTPsb
(0)

84 , 
	`fNTPbs
(0)

85 , 
	`fNTPbb
(0)

86 , 
	`fNTSSB
(0)

87 , 
	`fNTTy≥
(0)

88 , 
	`fU£RuÀFôJF
(
kFALSE
)

89 , 
	`fRFNruÀs
(0)

90 , 
	`fRFNídnodes
(0)

91 , 
	`fNTªes
(0)

92 , 
	`fTªeEveFøc
(0)

93 , 
	`fSïTy≥
(0)

94 , 
	`fMöFøcNEve
(0)

95 , 
	`fMaxFøcNEve
(0)

96 , 
	`fNCuts
(0)

97 , 
	`fPru√Mëhod
(
TMVA
::
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
)

98 , 
	`fPru√Såígth
(0)

99 , 
	`fU£Boo°
(
kFALSE
)

100 , 
	`fGDP©hEveFøc
(0)

101 , 
	`fGDVÆidEveFøc
(0)

102 , 
	`fGDTau
(0)

103 , 
	`fGDTauPªc
(0)

104 , 
	`fGDTauMö
(0)

105 , 
	`fGDTauMax
(0)

106 , 
	`fGDTauSˇn
(0)

107 , 
	`fGDP©hSãp
(0)

108 , 
	`fGDNP©hSãps
(0)

109 , 
	`fGDEºSˇÀ
(0)

110 , 
	`fMöimp
(0)

111 , 
	`fRuÀMöDi°
(0)

112 , 
	$fLöQu™tûe
(0)

114 
fM⁄ô‹Ntu∂e
 = 
NULL
;

115 
	}
}

120 
	gTMVA
::
MëhodRuÀFô
::
	$MëhodRuÀFô
–
D©aSëInfo
& 
theD©a
,

121 c⁄° 
TSåög
& 
theWeightFûe
) :

122 
	`MëhodBa£
–
Ty≥s
::
kRuÀFô
, 
theD©a
, 
theWeightFûe
)

123 , 
	`fSig«lFø˘i⁄
(0)

124 , 
	`fNTImp‹èn˚
(0)

125 , 
	`fNTC€fficõ¡
(0)

126 , 
	`fNTSuµ‹t
(0)

127 , 
	`fNTNcuts
(0)

128 , 
	`fNTNv¨s
(0)

129 , 
	`fNTPèg
(0)

130 , 
	`fNTPss
(0)

131 , 
	`fNTPsb
(0)

132 , 
	`fNTPbs
(0)

133 , 
	`fNTPbb
(0)

134 , 
	`fNTSSB
(0)

135 , 
	`fNTTy≥
(0)

136 , 
	`fU£RuÀFôJF
(
kFALSE
)

137 , 
	`fRFNruÀs
(0)

138 , 
	`fRFNídnodes
(0)

139 , 
	`fNTªes
(0)

140 , 
	`fTªeEveFøc
(0)

141 , 
	`fSïTy≥
(0)

142 , 
	`fMöFøcNEve
(0)

143 , 
	`fMaxFøcNEve
(0)

144 , 
	`fNCuts
(0)

145 , 
	`fPru√Mëhod
(
TMVA
::
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
)

146 , 
	`fPru√Såígth
(0)

147 , 
	`fU£Boo°
(
kFALSE
)

148 , 
	`fGDP©hEveFøc
(0)

149 , 
	`fGDVÆidEveFøc
(0)

150 , 
	`fGDTau
(0)

151 , 
	`fGDTauPªc
(0)

152 , 
	`fGDTauMö
(0)

153 , 
	`fGDTauMax
(0)

154 , 
	`fGDTauSˇn
(0)

155 , 
	`fGDP©hSãp
(0)

156 , 
	`fGDNP©hSãps
(0)

157 , 
	`fGDEºSˇÀ
(0)

158 , 
	`fMöimp
(0)

159 , 
	`fRuÀMöDi°
(0)

160 , 
	$fLöQu™tûe
(0)

162 
fM⁄ô‹Ntu∂e
 = 
NULL
;

163 
	}
}

168 
	gTMVA
::
MëhodRuÀFô
::~
	$MëhodRuÀFô
( )

170 
UI¡_t
 
i
=0; i<
fEvítSam∂e
.
	`size
(); i++Ë
dñëe
 fEventSample[i];

171 
UI¡_t
 
i
=0; i<
fF‹e°
.
	`size
(); i++Ë
dñëe
 fForest[i];

172 
	}
}

177 
Boﬁ_t
 
	gTMVA
::
MëhodRuÀFô
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UInt_t )

179 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

180  
kFALSE
;

181 
	}
}

228 
	gTMVA
::
MëhodRuÀFô
::
	$De˛¨eO±i⁄s
()

230 
	`De˛¨eO±i⁄Ref
(
fGDTau
=-1, "GDTau", "Gradient-directed (GD)Öath: default fit cut-off");

231 
	`De˛¨eO±i⁄Ref
(
fGDTauPªc
=0.01, "GDTauPrec", "GDÖath:Örecision ofÅau");

232 
	`De˛¨eO±i⁄Ref
(
fGDP©hSãp
=0.01, "GDStep", "GDÖath: step size");

233 
	`De˛¨eO±i⁄Ref
(
fGDNP©hSãps
=10000, "GDNSteps", "GDÖath:Çumber of steps");

234 
	`De˛¨eO±i⁄Ref
(
fGDEºSˇÀ
=1.1, "GDErrScale", "Stop scan whenÉrror > scale*errmin");

235 
	`De˛¨eO±i⁄Ref
(
fLöQu™tûe
, "LinQuantile", "Quantile ofÜinearÅerms (removes outliers)");

236 
	`De˛¨eO±i⁄Ref
(
fGDP©hEveFøc
=0.5, "GDPathEveFrac", "Fraction ofÉvents used forÅheÖath search");

237 
	`De˛¨eO±i⁄Ref
(
fGDVÆidEveFøc
=0.5, "GDValidEveFrac", "Fraction ofÉvents used forÅhe validation");

239 
	`De˛¨eO±i⁄Ref
(
fMöFøcNEve
=0.1, "fEventsMin", "Minimum fraction ofÉvents iná splittableÇode");

240 
	`De˛¨eO±i⁄Ref
(
fMaxFøcNEve
=0.9, "fEventsMax", "Maximum fraction ofÉvents iná splittableÇode");

241 
	`De˛¨eO±i⁄Ref
(
fNTªes
=20, "nTrees", "Number ofÅrees in forest.");

243 
	`De˛¨eO±i⁄Ref
(
fF‹e°Ty≥S
="AdaBoost", "ForestType", "MethodÅo use for forest generation (AdaBoost or RandomForest)");

244 
	`AddPªDefVÆ
(
	`TSåög
("AdaBoost"));

245 
	`AddPªDefVÆ
(
	`TSåög
("Random"));

247 
	`De˛¨eO±i⁄Ref
(
fRuÀMöDi°
=0.001, "RuleMinDist", "Minimum distance betweenÑules");

248 
	`De˛¨eO±i⁄Ref
(
fMöimp
=0.01, "MinImp", "MinimumÑule importanceáccepted");

250 
	`De˛¨eO±i⁄Ref
(
fModñTy≥S
="ModRuleLinear", "Model", "ModelÅo be used");

251 
	`AddPªDefVÆ
(
	`TSåög
("ModRule"));

252 
	`AddPªDefVÆ
(
	`TSåög
("ModRuleLinear"));

253 
	`AddPªDefVÆ
(
	`TSåög
("ModLinear"));

254 
	`De˛¨eO±i⁄Ref
(
fRuÀFôModuÀS
="RFTMVA", "RuleFitModule","Which RuleFit moduleÅo use");

255 
	`AddPªDefVÆ
(
	`TSåög
("RFTMVA"));

256 
	`AddPªDefVÆ
(
	`TSåög
("RFFriedman"));

258 
	`De˛¨eO±i⁄Ref
(
fRFW‹kDú
="./rulefit", "RFWorkDir", "Friedman\'s RuleFit module (RFF): working dir");

259 
	`De˛¨eO±i⁄Ref
(
fRFNruÀs
=2000, "RFNrules", "RFF: MximumÇumber ofÑules");

260 
	`De˛¨eO±i⁄Ref
(
fRFNídnodes
=4, "RFNendnodes", "RFF: AverageÇumber ofÉndÇodes");

261 
	}
}

266 
	gTMVA
::
MëhodRuÀFô
::
	$Pro˚ssO±i⁄s
()

268 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

269 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇot yetávailable for method: "

270 << 
	`GëMëhodTy≥Name
()

272 << 
Endl
;

275 
fRuÀFôModuÀS
.
	`ToLowî
();

276 i‡(
fRuÀFôModuÀS
 ="r·mva"Ë
fU£RuÀFôJF
 = 
kFALSE
;

277 i‡(
fRuÀFôModuÀS
 ="rf‰õdm™"Ë
fU£RuÀFôJF
 = 
kTRUE
;

278 
fU£RuÀFôJF
 = 
kTRUE
;

280 
fSïTy≥S
.
	`ToLowî
();

281 i‡(
fSïTy≥S
 ="mis˛assifiˇti⁄îr‹"Ë
fSïTy≥
 = 
√w
 
	`MisCœssifiˇti⁄Eº‹
();

282 i‡(
fSïTy≥S
 ="göiödex"Ë
fSïTy≥
 = 
√w
 
	`GöiIndex
();

283 i‡(
fSïTy≥S
 ="¸os£¡r›y"Ë
fSïTy≥
 = 
√w
 
	`CrossE¡r›y
();

284 
fSïTy≥
 = 
√w
 
	`SdivSqπS∂usB
();

286 
fModñTy≥S
.
	`ToLowî
();

287 i‡(
fModñTy≥S
 ="modlöór" ) 
fRuÀFô
.
	`SëModñLöór
();

288 i‡(
fModñTy≥S
 ="modruÀ" ) 
fRuÀFô
.
	`SëModñRuÀs
();

289 
fRuÀFô
.
	`SëModñFuŒ
();

291 
fPru√MëhodS
.
	`ToLowî
();

292 i‡(
fPru√MëhodS
 ="ex≥˘edîr‹" ) 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kEx≥˘edEº‹Prunög
;

293 i‡(
fPru√MëhodS
 ="co°com∂exôy" ) 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kCo°Com∂exôyPrunög
;

294 
fPru√Mëhod
 = 
Decisi⁄Tªe
::
kNoPrunög
;

296 
fF‹e°Ty≥S
.
	`ToLowî
();

297 i‡(
fF‹e°Ty≥S
 ="øndom" ) 
fU£Boo°
 = 
kFALSE
;

298 i‡(
fF‹e°Ty≥S
 ="adaboo°" ) 
fU£Boo°
 = 
kTRUE
;

299 
fU£Boo°
 = 
kTRUE
;

304 i‡(
fU£Boo°
 && (!
fU£RuÀFôJF
)Ë
fTªeEveFøc
 = 1.0;

308 i‡(
fTªeEveFøc
<=0) {

309 
I¡_t
 
√víts
 = 
	`D©a
()->
	`GëNTøöögEvíts
();

310 
DoubÀ_t
 
n
 = 
°©ic_ˇ°
<DoubÀ_t>(
√víts
);

311 
fTªeEveFøc
 = 
	`mö
–0.5, (100.0 +6.0*
	`sqπ
(
n
))/n);

314 
	`VîifyR™ge
(
	`Log
(), "nTªes", 
fNTªes
,0,100000,20);

315 
	`VîifyR™ge
(
	`Log
(), "MöImp", 
fMöimp
,0.0,1.0,0.0);

316 
	`VîifyR™ge
(
	`Log
(), "GDTauPªc", 
fGDTauPªc
,1e-5,5e-1);

317 
	`VîifyR™ge
(
	`Log
(), "GDTauMö", 
fGDTauMö
,0.0,1.0);

318 
	`VîifyR™ge
(
	`Log
(), "GDTauMax", 
fGDTauMax
,
fGDTauMö
,1.0);

319 
	`VîifyR™ge
(
	`Log
(), "GDP©hSãp", 
fGDP©hSãp
,0.0,100.0,0.01);

320 
	`VîifyR™ge
(
	`Log
(), "GDEºSˇÀ", 
fGDEºSˇÀ
,1.0,100.0,1.1);

321 
	`VîifyR™ge
(
	`Log
(), "GDP©hEveFøc", 
fGDP©hEveFøc
,0.01,0.9,0.5);

322 
	`VîifyR™ge
(
	`Log
(), "GDVÆidEveFøc",
fGDVÆidEveFøc
,0.01,1.0-
fGDP©hEveFøc
,1.0-fGDPathEveFrac);

323 
	`VîifyR™ge
(
	`Log
(), "fEvítsMö", 
fMöFøcNEve
,0.0,1.0);

324 
	`VîifyR™ge
(
	`Log
(), "fEvítsMax", 
fMaxFøcNEve
,
fMöFøcNEve
,1.0);

326 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`SëLöQu™tûe
(
fLöQu™tûe
);

327 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDTauR™ge
(
fGDTauMö
,
fGDTauMax
);

328 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDTau
(
fGDTau
);

329 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDTauPªc
(
fGDTauPªc
);

330 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDTauSˇn
(
fGDTauSˇn
);

331 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDP©hSãp
(
fGDP©hSãp
);

332 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDNP©hSãps
(
fGDNP©hSãps
);

333 
fRuÀFô
.
	`GëRuÀFôP¨amsPå
()->
	`SëGDEºSˇÀ
(
fGDEºSˇÀ
);

334 
fRuÀFô
.
	`SëImp‹èn˚Cut
(
fMöimp
);

335 
fRuÀFô
.
	`SëRuÀMöDi°
(
fRuÀMöDi°
);

340 i‡(
fU£RuÀFôJF
) {

341 
	`Log
(Ë<< 
kINFO
 << "" << 
Endl
;

342 
	`Log
(Ë<< 
kINFO
 << "--------------------------------------" <<
Endl
;

343 
	`Log
(Ë<< 
kINFO
 << "Frõdm™†RuÀFô moduÀ i†£À˘ed." << 
Endl
;

344 
	`Log
(Ë<< 
kINFO
 << "O∆yÅhêfﬁlowög o±i⁄†¨êu£d:" << 
Endl
;

345 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

346 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " Modñ" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

347 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " RFW‹kDú" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

348 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " RFNruÀs" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

349 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " RFNídnodes" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

350 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " GDNP©hSãps" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

351 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " GDP©hSãp" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

352 
	`Log
(Ë<< 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< " GDEºSˇÀ" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

353 
	`Log
(Ë<< 
kINFO
 << "--------------------------------------" <<
Endl
;

354 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

364 
fRuÀFô
.
	`U£Imp‹èn˚VisHi°s
();

366 
fRuÀFô
.
	`SëMsgTy≥
–
	`Log
().
	`GëMöTy≥
() );

368 i‡(
	`HasTøöögTªe
()Ë
	`InôEvítSam∂e
();

370 
	}
}

375 
	gTMVA
::
MëhodRuÀFô
::
	$InôM⁄ô‹Ntu∂e
()

377 
	`Ba£Dú
()->
	`cd
();

378 
fM⁄ô‹Ntu∂e

√w
 
	`TTªe
("MonitorNtuple_RuleFit","RuleFit variables");

379 
fM⁄ô‹Ntu∂e
->
	`Bønch
("imp‹èn˚",&
fNTImp‹èn˚
,"importance/D");

380 
fM⁄ô‹Ntu∂e
->
	`Bønch
("suµ‹t",&
fNTSuµ‹t
,"support/D");

381 
fM⁄ô‹Ntu∂e
->
	`Bønch
("c€fficõ¡",&
fNTC€fficõ¡
,"coefficient/D");

382 
fM⁄ô‹Ntu∂e
->
	`Bønch
("ncuts",&
fNTNcuts
,"ncuts/I");

383 
fM⁄ô‹Ntu∂e
->
	`Bønch
("nv¨s",&
fNTNv¨s
,"nvars/I");

384 
fM⁄ô‹Ntu∂e
->
	`Bønch
("ty≥",&
fNTTy≥
,"type/I");

385 
fM⁄ô‹Ntu∂e
->
	`Bønch
("±ag",&
fNTPèg
,"ptag/D");

386 
fM⁄ô‹Ntu∂e
->
	`Bønch
("pss",&
fNTPss
,"pss/D");

387 
fM⁄ô‹Ntu∂e
->
	`Bønch
("psb",&
fNTPsb
,"psb/D");

388 
fM⁄ô‹Ntu∂e
->
	`Bønch
("pbs",&
fNTPbs
,"pbs/D");

389 
fM⁄ô‹Ntu∂e
->
	`Bønch
("pbb",&
fNTPbb
,"pbb/D");

390 
fM⁄ô‹Ntu∂e
->
	`Bønch
("sovîsb",&
fNTSSB
,"soversb/D");

391 
	}
}

396 
	gTMVA
::
MëhodRuÀFô
::
	$Inô
()

399 
	`SëSig«lRe„ªn˚Cut
( 0.0 );

403 
fLöQu™tûe
 = 0.025;

404 
fTªeEveFøc
 = -1.0;

405 
fNCuts
 = 20;

406 
fSïTy≥S
 = "GiniIndex";

407 
fPru√MëhodS
 = "NONE";

408 
fPru√Såígth
 = 3.5;

409 
fGDTauMö
 = 0.0;

410 
fGDTauMax
 = 1.0;

411 
fGDTauSˇn
 = 1000;

413 
	}
}

421 
	gTMVA
::
MëhodRuÀFô
::
	$InôEvítSam∂e
( )

423 i‡(
	`D©a
()->
	`GëNEvíts
()==0Ë
	`Log
(Ë<< 
kFATAL
 << "<Inô> D©a().TøöögTªe(Ëi†zîÿpoöãr" << 
Endl
;

425 
I¡_t
 
√víts
 = 
	`D©a
()->
	`GëNEvíts
();

426 
I¡_t
 
õvt
=0; ievt<
√víts
; ievt++){

427 c⁄° 
Evít
 * 
ev
 = 
	`GëEvít
(
õvt
);

428 
fEvítSam∂e
.
	`push_back
–
√w
 
	`Evít
(*
ev
));

430 i‡(
fTªeEveFøc
<=0) {

431 
DoubÀ_t
 
n
 = 
°©ic_ˇ°
<DoubÀ_t>(
√víts
);

432 
fTªeEveFøc
 = 
	`mö
–0.5, (100.0 +6.0*
	`sqπ
(
n
))/n);

434 i‡(
fTªeEveFøc
>1.0) fTreeEveFrac=1.0;

436 
°d
::
	`øndom_shufÊe
(
fEvítSam∂e
.
	`begö
(), fEvítSam∂e.
	`íd
());

438 
	`Log
(Ë<< 
kDEBUG
 << "Së sub-ßm∂ê‰a˘i⁄Åÿ" << 
fTªeEveFøc
 << 
Endl
;

439 
	}
}

443 
	gTMVA
::
MëhodRuÀFô
::
	$Tøö
( )

445 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
åue
;

448 if(!
	`IsSûítFûe
()Ë
	`InôM⁄ô‹Ntu∂e
();

451 
this
->
	`InôEvítSam∂e
();

453 i‡(
fU£RuÀFôJF
) {

454 
	`TøöJFRuÀFô
();

457 
	`TøöTMVARuÀFô
();

459 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`CÀ¨RuÀM≠
();

460 
TMVA
::
Decisi⁄TªeNode
::
fgIsTøöög
=
Ál£
;

461 
	`ExôFromTøöög
();

462 
	}
}

467 
	gTMVA
::
MëhodRuÀFô
::
	$TøöTMVARuÀFô
( )

469 i‡(
	`IsN‹mÆi£d
()Ë
	`Log
(Ë<< 
kFATAL
 << "\"Normalise\" option cannot be used with RuleFit; "

472 << 
Endl
;

475 
Timî
 
	`timî
–1, 
	`GëName
() );

487 
fRuÀFô
.
	`Inôülize
–
this
 );

493 
	`Log
(Ë<< 
kDEBUG
 << "FôtögÑuÀ c€fficõ¡†..." << 
Endl
;

494 
fRuÀFô
.
	`FôC€fficõ¡s
();

497 
	`Log
(Ë<< 
kDEBUG
 << "ComputögÑuÀánd v¨übÀ imp‹èn˚" << 
Endl
;

498 
fRuÀFô
.
	`CÆcImp‹èn˚
();

501 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`Pröt
();

503 if(!
	`IsSûítFûe
())

505 
	`Log
(Ë<< 
kDEBUG
 << "FûlögÑuÀÇtu∂e" << 
Endl
;

506 
UI¡_t
 
ƒuÀs
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀsC⁄°
().
	`size
();

507 c⁄° 
RuÀ
 *
ruÀ
;

508 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++ ) {

509 
ruÀ
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀsC⁄°
(
i
);

510 
fNTImp‹èn˚
 = 
ruÀ
->
	`GëRñImp‹èn˚
();

511 
fNTSuµ‹t
 = 
ruÀ
->
	`GëSuµ‹t
();

512 
fNTC€fficõ¡
 = 
ruÀ
->
	`GëC€fficõ¡
();

513 
fNTTy≥
 = (
ruÀ
->
	`IsSig«lRuÀ
() ? 1:-1 );

514 
fNTNv¨s
 = 
ruÀ
->
	`GëRuÀCut
()->
	`GëNv¨s
();

515 
fNTNcuts
 = 
ruÀ
->
	`GëRuÀCut
()->
	`GëNcuts
();

516 
fNTPèg
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀPTag
(
i
);

517 
fNTPss
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀPSS
(
i
);

518 
fNTPsb
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀPSB
(
i
);

519 
fNTPbs
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀPBS
(
i
);

520 
fNTPbb
 = 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëRuÀPBB
(
i
);

521 
fNTSSB
 = 
ruÀ
->
	`GëSSB
();

522 
fM⁄ô‹Ntu∂e
->
	`Fûl
();

525 
fRuÀFô
.
	`MakeVisHi°s
();

526 
fRuÀFô
.
	`MakeDebugHi°s
();

528 
	`Log
(Ë<< 
kDEBUG
 << "Tøöög d⁄e" << 
Endl
;

530 
	}
}

535 
	gTMVA
::
MëhodRuÀFô
::
	$TøöJFRuÀFô
( )

537 
fRuÀFô
.
	`InôPås
–
this
 );

538 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

539 
UI¡_t
 
√víts
 = 
	`D©a
()->
	`GëNTøöögEvíts
();

540 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
tmp
;

541 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

542 c⁄° 
Evít
 *
evít
 = 
	`GëEvít
(
õvt
);

543 
tmp
.
	`push_back
(
evít
);

545 
fRuÀFô
.
	`SëTøöögEvíts
–
tmp
 );

547 
RuÀFôAPI
 *
rfAPI
 = 
√w
 
	`RuÀFôAPI
–
this
, &
fRuÀFô
, 
	`Log
().
	`GëMöTy≥
() );

549 
rfAPI
->
	`WñcomeMesßge
();

552 
Timî
 
	`timî
–1, 
	`GëName
() );

554 
	`Log
(Ë<< 
kINFO
 << "Tøöög ..." << 
Endl
;

555 
rfAPI
->
	`TøöRuÀFô
();

557 
	`Log
(Ë<< 
kDEBUG
 << "ªadög modñ summ¨y fromÑf_go.exêouçut" << 
Endl
;

558 
rfAPI
->
	`RódModñSum
();

562 
	`Log
(Ë<< 
kDEBUG
 << "ˇlcuœtögÑuÀánd v¨übÀ imp‹èn˚" << 
Endl
;

563 
fRuÀFô
.
	`CÆcImp‹èn˚
();

566 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`Pröt
();

568 if(!
	`IsSûítFûe
())
fRuÀFô
.
	`MakeVisHi°s
();

570 
dñëe
 
rfAPI
;

572 
	`Log
(Ë<< 
kDEBUG
 << "d⁄êåaöög" << 
Endl
;

573 
	}
}

578 c⁄° 
	gTMVA
::
R™kög
* 
TMVA
::
MëhodRuÀFô
::
	$Cª©eR™kög
()

581 
fR™kög
 = 
√w
 
	`R™kög
–
	`GëName
(), "Importance" );

583 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

584 
fR™kög
->
	`AddR™k
–
	`R™k
–
	`GëI≈utLabñ
(
iv¨
), 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëV¨Imp‹èn˚
(ivar) ) );

587  
fR™kög
;

588 
	}
}

593 
	gTMVA
::
MëhodRuÀFô
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

595 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`AddXMLTo
–
∑ª¡
 );

596 
	}
}

601 
	gTMVA
::
MëhodRuÀFô
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
 & 
i°r
 )

603 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`RódRaw
–
i°r
 );

604 
	}
}

609 
	gTMVA
::
MëhodRuÀFô
::
	$RódWeightsFromXML
–* 
wghäode
 )

611 
fRuÀFô
.
	`GëRuÀEn£mbÀPå
()->
	`RódFromXML
–
wghäode
 );

612 
	}
}

617 
DoubÀ_t
 
	gTMVA
::
MëhodRuÀFô
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

620 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

622  
fRuÀFô
.
	`EvÆEvít
–*
	`GëEvít
() );

623 
	}
}

628 
	gTMVA
::
MëhodRuÀFô
::
	$WrôeM⁄ô‹ögHi°osToFûe
( ) const

630 
	`Ba£Dú
()->
	`cd
();

631 
	`Log
(Ë<< 
kINFO
 << "Wrôêm⁄ô‹ögÇtu∂êtÿfûe: " << 
	`Ba£Dú
()->
	`GëP©h
(Ë<< 
Endl
;

632 
fM⁄ô‹Ntu∂e
->
	`Wrôe
();

633 
	}
}

638 
	gTMVA
::
MëhodRuÀFô
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

640 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

641 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

642 
fout
 << "};" << 
°d
::
ídl
;

643 
fout
 << "void " << 
˛assName
 << "::Inôülize(){}" << 
°d
::
ídl
;

644 
fout
 << "void " << 
˛assName
 << "::CÀ¨(){}" << 
°d
::
ídl
;

645 
fout
 << "doubÀ " << 
˛assName
 << "::GëMvaVÆue__–c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄° {" << 
°d
::
ídl
;

646 
fout
 << " doubÀÑvÆ=" << 
°d
::
	`£çªcisi⁄
(10Ë<< 
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`GëOff£t
(Ë<< ";" << std::
ídl
;

647 
	`MakeCœssRuÀCuts
(
fout
);

648 
	`MakeCœssLöór
(
fout
);

649 
fout
 << "Ñëu∫ÑvÆ;" << 
°d
::
ídl
;

650 
fout
 << "}" << 
°d
::
ídl
;

651 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

652 
	}
}

657 
	gTMVA
::
MëhodRuÀFô
::
	$MakeCœssRuÀCuts
–
°d
::
o°ªam
& 
fout
 ) const

659 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

660 i‡(!
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`DoRuÀs
()) {

661 
fout
 << " //" << 
°d
::
ídl
;

662 
fout
 << " // ==> MODEL CONTAINS NO RULES <==" << 
°d
::
ídl
;

663 
fout
 << " //" << 
°d
::
ídl
;

666 c⁄° 
RuÀEn£mbÀ
 *
ªns
 = &(
fRuÀFô
.
	`GëRuÀEn£mbÀ
());

667 c⁄° 
°d
::
ve˘‹
< 
RuÀ
* > *
ruÀs
 = &(
ªns
->
	`GëRuÀsC⁄°
());

668 c⁄° 
RuÀCut
 *
ruÀCut
;

670 
°d
::
li°
< std::
∑ú
<
DoubÀ_t
,
I¡_t
> > 
s‹ãdRuÀs
;

671 
UI¡_t
 
ú
=0; ir<
ruÀs
->
	`size
(); ir++) {

672 
s‹ãdRuÀs
.
	`push_back
–
°d
::
∑ú
<
DoubÀ_t
,
I¡_t
>–(*
ruÀs
)[
ú
]->
	`GëImp‹èn˚
()/
ªns
->
	`GëImp‹èn˚Ref
(),ir ) );

674 
s‹ãdRuÀs
.
	`s‹t
();

676 
fout
 << " //" << 
°d
::
ídl
;

677 
fout
 << " // hîêfﬁlow†Æ»ruÀ†‹dîed i¿imp‹èn˚ (mo° imp‹è¡ fú°)" << 
°d
::
ídl
;

678 
fout
 << " //áàthêíd o‡óchÜöe,Åhêªœtivêimp‹èn˚ o‡thêruÀ i†giví" << 
°d
::
ídl
;

679 
fout
 << " //" << 
°d
::
ídl
;

681  
°d
::
li°
< std::
∑ú
<,> >::
ªvî£_ôî©‹
 
ô∑ú
 = 
s‹ãdRuÀs
.
	`rbegö
();

682 
ô∑ú
 !
s‹ãdRuÀs
.
	`ªnd
(); itpair++ ) {

683 
UI¡_t
 
ú
 = 
ô∑ú
->
£c⁄d
;

684 
DoubÀ_t
 
im¥
 = 
ô∑ú
->
fú°
;

685 
ruÀCut
 = (*
ruÀs
)[
ú
]->
	`GëRuÀCut
();

686 i‡(
im¥
<
ªns
->
	`GëImp‹èn˚Cut
()Ë
fout
 << " //" << 
°d
::
ídl
;

687 
fout
 << " i‡(" << 
°d
::
Êush
;

688 
UI¡_t
 
ic
=0; ic<
ruÀCut
->
	`GëNv¨s
(); ic++) {

689 
DoubÀ_t
 
£l
 = 
ruÀCut
->
	`GëSñe˘‹
(
ic
);

690 
DoubÀ_t
 
vÆmö
 = 
ruÀCut
->
	`GëCutMö
(
ic
);

691 
DoubÀ_t
 
vÆmax
 = 
ruÀCut
->
	`GëCutMax
(
ic
);

692 
Boﬁ_t
 
domö
 = 
ruÀCut
->
	`GëCutDoMö
(
ic
);

693 
Boﬁ_t
 
domax
 = 
ruÀCut
->
	`GëCutDoMax
(
ic
);

695 i‡(
ic
>0Ë
fout
 << "&&" << 
°d
::
Êush
;

696 i‡(
domö
) {

697 
fout
 << "(" << 
°d
::
	`£çªcisi⁄
(10Ë<< 
vÆmö
 << std::
Êush
;

698 
fout
 << "<öputVÆues[" << 
£l
 << "])" << 
°d
::
Êush
;

700 i‡(
domax
) {

701 i‡(
domö
Ë
fout
 << "&&" << 
°d
::
Êush
;

702 
fout
 << "(öputVÆues[" << 
£l
 << "]" << 
°d
::
Êush
;

703 
fout
 << "<" << 
°d
::
	`£çªcisi⁄
(10Ë<< 
vÆmax
 << ")" <<°d::
Êush
;

706 
fout
 << "ËrvÆ+=" << 
°d
::
	`£çªcisi⁄
(10Ë<< (*
ruÀs
)[
ú
]->
	`GëC€fficõ¡
(Ë<< ";" << std::
Êush
;

707 
fout
 << " // imp‹èn˚ = " << 
	`F‹m
("%3.3f",
im¥
Ë<< 
°d
::
ídl
;

709 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

710 
	}
}

715 
	gTMVA
::
MëhodRuÀFô
::
	$MakeCœssLöór
–
°d
::
o°ªam
& 
fout
 ) const

717 i‡(!
fRuÀFô
.
	`GëRuÀEn£mbÀ
().
	`DoLöór
()) {

718 
fout
 << " //" << 
°d
::
ídl
;

719 
fout
 << " // ==> MODEL CONTAINS NO LINEAR TERMS <==" << 
°d
::
ídl
;

720 
fout
 << " //" << 
°d
::
ídl
;

723 
fout
 << " //" << 
°d
::
ídl
;

724 
fout
 << " // hîêfﬁlow†Æ»löó∏ãrms" << 
°d
::
ídl
;

725 
fout
 << " //áàthêíd o‡óchÜöe,Åhêªœtivêimp‹èn˚ o‡thêãrm i†giví" << 
°d
::
ídl
;

726 
fout
 << " //" << 
°d
::
ídl
;

727 c⁄° 
RuÀEn£mbÀ
 *
ªns
 = &(
fRuÀFô
.
	`GëRuÀEn£mbÀ
());

728 
UI¡_t
 
∆ö
 = 
ªns
->
	`GëNLöór
();

729 
UI¡_t
 
û
=0; il<
∆ö
; il++) {

730 i‡(
ªns
->
	`IsLöTîmOK
(
û
)) {

731 
DoubÀ_t
 
n‹m
 = 
ªns
->
	`GëLöN‹m
(
û
);

732 
DoubÀ_t
 
imp
 = 
ªns
->
	`GëLöImp‹èn˚
(
û
)/ªns->
	`GëImp‹èn˚Ref
();

733 
fout
 << "Ñval+="

736 << 
°d
::
	`£çªcisi⁄
(10Ë<< 
ªns
->
	`GëLöC€fficõ¡s
(
û
)*
n‹m


737 << "*°d::mö–doubÀ(" << 
°d
::
	`£çªcisi⁄
(10Ë<< 
ªns
->
	`GëLöDP
(
û
)

738 << "), std::max–doubÀ(öputVÆues[" << 
û
 << "]), doubÀ(" << 
°d
::
	`£çªcisi⁄
(10Ë<< 
ªns
->
	`GëLöDM
(il) << ")));"

739 << 
°d
::
Êush
;

740 
fout
 << " // imp‹èn˚ = " << 
	`F‹m
("%3.3f",
imp
Ë<< 
°d
::
ídl
;

743 
	}
}

751 
	gTMVA
::
MëhodRuÀFô
::
	$GëHñpMesßge
() const

753 
TSåög
 
cﬁ
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("bold");

754 
TSåög
 
cﬁªs
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
(Ë? 
	`TSåög
(Ë: 
	`gToﬁs
().
	`Cﬁ‹
("reset");

755 
TSåög
 
brk
 = 
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
() ? "<br>" : "";

757 
	`Log
(Ë<< 
Endl
;

758 
	`Log
(Ë<< 
cﬁ
 << "--- Sh‹àdes¸ùti⁄:" << 
cﬁªs
 << 
Endl
;

759 
	`Log
(Ë<< 
Endl
;

760 
	`Log
(Ë<< "Thi†mëhod u£†®cﬁÀ˘i⁄ o‡sÿˇŒedÑuÀ†tÿ¸óãá" << 
Endl
;

761 
	`Log
(Ë<< "dis¸imö©ög sc‹ög fun˘i⁄. EachÑuÀ c⁄si°†o‡®£rõs" << 
Endl
;

762 
	`Log
(Ë<< "o‡cut†öÖ¨amëî s∑˚. Thêí£mbÀ o‡ruÀ†¨ê¸óãd" << 
Endl
;

763 
	`Log
(Ë<< "‰omá f‹e° o‡decisi⁄Åªes,Åøöed usögÅhêåaöög d©a." << 
Endl
;

764 
	`Log
(Ë<< "EachÇodê◊∑π fromÅhêroŸËc‹ª•⁄d†tÿ⁄êruÀ." << 
Endl
;

765 
	`Log
(Ë<< "Thêsc‹ög fun˘i⁄ i†thí obèöed byÜöóæy comböög" << 
Endl
;

766 
	`Log
(Ë<< "thêruÀs. A fôtögÖro˚duª i†≠∂õdÅÿfödÅhê›timum" << 
Endl
;

767 
	`Log
(Ë<< "£ào‡c€fficõ¡s. Thêgﬂ»i†tÿfödá modñ wôh fewÑuÀs" << 
Endl
;

768 
	`Log
(Ë<< "buàwôhá så⁄g dis¸imö©ögÖowî." << 
Endl
;

769 
	`Log
(Ë<< 
Endl
;

770 
	`Log
(Ë<< 
cﬁ
 << "--- Pîf‹m™˚ o±imißti⁄:" << 
cﬁªs
 << 
Endl
;

771 
	`Log
(Ë<< 
Endl
;

772 
	`Log
(Ë<< "Thîê¨êtwÿimp‹è¡ c⁄sidî©i⁄†tÿmakêwhí o±imisög:" << 
Endl
;

773 
	`Log
(Ë<< 
Endl
;

774 
	`Log
(Ë<< " 1. T›ﬁogy o‡thêdecisi⁄Åªêf‹e°" << 
brk
 << 
Endl
;

775 
	`Log
(Ë<< " 2. Fôtög o‡thêc€fficõ¡s" << 
Endl
;

776 
	`Log
(Ë<< 
Endl
;

777 
	`Log
(Ë<< "Thêmaximum com∂exôy o‡thêruÀ†i†deföed byÅhêsizêof" << 
Endl
;

778 
	`Log
(Ë<< "thêåìs. L¨gêåì†wû»yõld m™y com∂exÑuÀ†™d c≠tuª" << 
Endl
;

779 
	`Log
(Ë<< "highî ordî c‹ªœti⁄s. O¿thêŸhî h™d, smÆ»åì†wûl" << 
Endl
;

780 
	`Log
(Ë<< "ÀadÅÿ®smÆÀ∏í£mbÀ wôh sim∂êruÀs, o∆y c≠abÀ of" << 
Endl
;

781 
	`Log
(Ë<< "modñög sim∂ê°ru˘uªs." << 
Endl
;

782 
	`Log
(Ë<< "SevîÆÖ¨amëî†exi°†f‹ c⁄åﬁlögÅhêcom∂exôy o‡the" << 
Endl
;

783 
	`Log
(Ë<< "ruÀÉn£mbÀ." << 
Endl
;

784 
	`Log
(Ë<< 
Endl
;

785 
	`Log
(Ë<< "ThêfôtögÖro˚duª sórche†f‹á möimum usögá gødõ¡" << 
Endl
;

786 
	`Log
(Ë<< "dúe˘edÖ©h. A∑π from sã∞sizê™dÇumbî o‡°ïs,Åhe" << 
Endl
;

787 
	`Log
(Ë<< "evﬁuti⁄ o‡thê∑th i†deföed byá cut-of‡∑ømëî,Åau." << 
Endl
;

788 
	`Log
(Ë<< "Thi†∑ømëî i†unknow¿™d dïíd†⁄Åhêåaöög d©a." << 
Endl
;

789 
	`Log
(Ë<< "AÜ¨gêvÆuêwû»ãndÅÿgivêœrgêweight†tÿ®„wÑuÀs." << 
Endl
;

790 
	`Log
(Ë<< "Simû¨ly,á smÆ»vÆuêwû»ÀadÅÿ®œrgê£ào‡ruÀs" << 
Endl
;

791 
	`Log
(Ë<< "wôh simû¨ weights." << 
Endl
;

792 
	`Log
(Ë<< 
Endl
;

793 
	`Log
(Ë<< "A föÆÖoöài†thêmodñ u£d;ÑuÀ†™d/‹Üöó∏ãrms." << 
Endl
;

794 
	`Log
(Ë<< "F‹á givíÅøöög sam∂e,Åhêªsu… may im¥ovêbyáddög" << 
Endl
;

795 
	`Log
(Ë<< "löó∏ãrms. I‡be°Öîf‹m™˚ i†obèöed usög o∆yÜöór" << 
Endl
;

796 
	`Log
(Ë<< "ãrms, iài†vîyÜikñyÅh©ÅhêFishî dis¸imö™àwould be" << 
Endl
;

797 
	`Log
(Ë<< "®bëã∏choi˚. IdóŒyÅhêfôtögÖro˚duª should bêabÀÅo" << 
Endl
;

798 
	`Log
(Ë<< "makêthi†choi˚ by givögáµr›rüã weight†f‹ÉôhîÅîms." << 
Endl
;

799 
	`Log
(Ë<< 
Endl
;

800 
	`Log
(Ë<< 
cﬁ
 << "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << 
cﬁªs
 << 
Endl
;

801 
	`Log
(Ë<< 
Endl
;

802 
	`Log
(Ë<< "I. TUNING OF RULE ENSEMBLE:" << 
Endl
;

803 
	`Log
(Ë<< 
Endl
;

804 
	`Log
(Ë<< " " << 
cﬁ
 << "F‹e°Ty≥ " << 
cﬁªs


805 << ": Recommíded i†tÿu£ÅhêdeÁu… \"AdaBoo°\"." << 
brk
 << 
Endl
;

806 
	`Log
(Ë<< " " << 
cﬁ
 << "nTªe† " << 
cﬁªs


807 << ": M‹êåì†Àad†tÿm‹êruÀ†buàÆsÿ¶ow" << 
Endl
;

808 
	`Log
(Ë<< "Öîf‹m™˚. WôhÅoÿ„wÅªe†thêrisk is" << 
Endl
;

809 
	`Log
(Ë<< "Åh©ÅhêruÀÉn£mbÀ become†toÿsim∂e." << 
brk
 << 
Endl
;

810 
	`Log
(Ë<< " " << 
cﬁ
 << "fEvítsMö " << 
cﬁªs
 << 
brk
 << 
Endl
;

811 
	`Log
(Ë<< " " << 
cﬁ
 << "fEvítsMax " << 
cﬁªs


812 << ": WôháÜowî mö, m‹êœrgêåì†wû»bêgíî©ed" << 
Endl
;

813 
	`Log
(Ë<< "ÜódögÅÿm‹êcom∂exÑuÀs." << 
Endl
;

814 
	`Log
(Ë<< " Wôhá highî max, m‹êsmÆ»åì†wû»be" << 
Endl
;

815 
	`Log
(Ë<< " gíî©edÜódögÅÿm‹êsim∂êruÀs." << 
Endl
;

816 
	`Log
(Ë<< " By ch™gögÅhi†ønge,Åhêavîagêcom∂exôy" << 
Endl
;

817 
	`Log
(Ë<< " o‡thêruÀÉn£mbÀ c™ bêc⁄åﬁÀd." << 
brk
 << 
Endl
;

818 
	`Log
(Ë<< " " << 
cﬁ
 << "RuÀMöDi° " << 
cﬁªs


819 << ": By in¸ósögÅhêmöimum di°™˚ bëwìn" << 
Endl
;

820 
	`Log
(Ë<< "ÑuÀs, fewîánd m‹êdivî£ÑuÀ†wû»ªmaö." << 
Endl
;

821 
	`Log
(Ë<< " InôüŒy iài†®good idóÅÿkì∞thi†smÆl" << 
Endl
;

822 
	`Log
(Ë<< " o∏zîÿ™dÜëÅhêfôtög dÿthê£À˘i⁄ of" << 
Endl
;

823 
	`Log
(Ë<< "ÑuÀs. I¿‹dîÅÿªdu˚Åhêí£mbÀ size," << 
Endl
;

824 
	`Log
(Ë<< "ÅhêvÆuêˇ¿thí bêö¸ó£d." << 
Endl
;

825 
	`Log
(Ë<< 
Endl
;

827 
	`Log
(Ë<< "II. TUNING OF THE FITTING:" << 
Endl
;

828 
	`Log
(Ë<< 
Endl
;

829 
	`Log
(Ë<< " " << 
cﬁ
 << "GDP©hEveFø¯" << 
cﬁªs


830 << ": fø˘i⁄ o‡evít†öÖ©hÉvÆu©i⁄" << 
Endl
;

831 
	`Log
(Ë<< " In¸ósögÅhi†‰a˘i⁄ wû»im¥ovêthê∑th" << 
Endl
;

832 
	`Log
(Ë<< " födög. Howevî,áÅoÿhigh vÆuêwû»givê„w" << 
Endl
;

833 
	`Log
(Ë<< " uniquêevít†avaûabÀ f‹Éº‹É°im©i⁄." << 
Endl
;

834 
	`Log
(Ë<< " Iài†ªcommídedÅÿu£ÅhêdeÁu… = 0.5." << 
brk
 << 
Endl
;

835 
	`Log
(Ë<< " " << 
cﬁ
 << "GDTau " << 
cﬁªs


836 << ": cutof‡∑ømëîÅau" << 
Endl
;

837 
	`Log
(Ë<< " By deÁu…Åhi†vÆuêi†£àtÿ-1.0." << 
Endl
;

839 
	`Log
(Ë<< " Thi†món†th©Åhêcuàof‡∑ømëî is" << 
Endl
;

840 
	`Log
(Ë<< "áutom©iˇŒyÉ°im©ed. I¿mo° ca£s" << 
Endl
;

841 
	`Log
(Ë<< "Åhi†should bêföe. Howevî, you may w™t" << 
Endl
;

842 
	`Log
(Ë<< "ÅÿfixÅhi†vÆuêi‡youáÃódy know it" << 
Endl
;

843 
	`Log
(Ë<< "ánd w™àtÿªdu˚ o¿åaöögÅime." << 
brk
 << 
Endl
;

844 
	`Log
(Ë<< " " << 
cﬁ
 << "GDTauPª¯ " << 
cﬁªs


845 << ":Öªcisi⁄ o‡e°im©edÅau" << 
Endl
;

846 
	`Log
(Ë<< " In¸ó£Åhi†¥ecisi⁄Åÿfödá m‹e" << 
Endl
;

847 
	`Log
(Ë<< " o±imum cut-of‡∑ømëî." << 
brk
 << 
Endl
;

848 
	`Log
(Ë<< " " << 
cﬁ
 << "GDNSã∞ " << 
cﬁªs


849 << ":Çumbî o‡°ï†öÖ©h sórch" << 
Endl
;

850 
	`Log
(Ë<< " I‡thênumbî o‡°ï†i†toÿsmÆl,Åhí" << 
Endl
;

851 
	`Log
(Ë<< "Åhê¥ogøm wû»givê®w¨nög mesßge." << 
Endl
;

852 
	`Log
(Ë<< 
Endl
;

853 
	`Log
(Ë<< "III. WARNING MESSAGES" << 
Endl
;

854 
	`Log
(Ë<< 
Endl
;

855 
	`Log
(Ë<< 
cﬁ
 << "Risk(i+1)>=Risk(iËöÖ©h" << 
cﬁªs
 << 
brk
 << 
Endl
;

856 
	`Log
(Ë<< 
cﬁ
 << "ChaŸi¯behaviou∏o‡riskÉvﬁuti⁄." << 
cﬁªs
 << 
Endl
;

858 
	`Log
(Ë<< " Thêîr‹Ñ©êwa†°û»de¸ósögáàthêíd" << 
Endl
;

859 
	`Log
(Ë<< " By c⁄°ru˘i⁄ÅhêRisk shouldálway†de¸ó£." << 
Endl
;

860 
	`Log
(Ë<< " Howevî, i‡thêåaöög sam∂êi†toÿsmÆ»‹" << 
Endl
;

861 
	`Log
(Ë<< "Åhêmodñ i†ovîåaöed, such w¨nög†ˇn" << 
Endl
;

862 
	`Log
(Ë<< " occur." << 
Endl
;

863 
	`Log
(Ë<< " Thêw¨nög†ˇ¿ß„ly bêign‹ed i‡⁄lyá" << 
Endl
;

864 
	`Log
(Ë<< " few (<3Ëoccur. I‡m‹êw¨nög†¨êgíî©ed," << 
Endl
;

865 
	`Log
(Ë<< "Åhêfôtög faûs." << 
Endl
;

866 
	`Log
(Ë<< " AÑemedy may bêtÿö¸ó£ÅhêvÆue" << 
brk
 << 
Endl
;

867 
	`Log
() << " "

868 << 
cﬁ
 << "GDVÆidEveFøc" << 
cﬁªs


869 << "Åÿ1.0 (‹áÜ¨gî vÆue)." << 
brk
 << 
Endl
;

870 
	`Log
() << " Ináddition, if "

871 << 
cﬁ
 << "GDP©hEveFøc" << 
cﬁªs


872 << " i†toÿhigh" << 
Endl
;

873 
	`Log
(Ë<< "Åhêßmêw¨nög†may occu∏sö˚Åhêevíts" << 
Endl
;

874 
	`Log
(Ë<< " u£d f‹Éº‹É°im©i⁄áªálsÿu£d f‹" << 
Endl
;

875 
	`Log
(Ë<< "Ö©hÉ°im©i⁄." << 
Endl
;

876 
	`Log
(Ë<< " AnŸhîÖossibûôy i†tÿmodifyÅhêmodñ - " << 
Endl
;

877 
	`Log
(Ë<< " Sìábovê⁄ÅunögÅhêruÀÉn£mbÀ." << 
Endl
;

878 
	`Log
(Ë<< 
Endl
;

879 
	`Log
(Ë<< 
cﬁ
 << "TheÉrrorÑate was still decreasingátÅheÉnd ofÅheÖath"

880 << 
cﬁªs
 << 
Endl
;

881 
	`Log
() << " Too few steps inÖath! Increase "

882 << 
cﬁ
 << "GDNSãps" << 
cﬁªs
 << "." << 
Endl
;

883 
	`Log
(Ë<< 
Endl
;

884 
	`Log
(Ë<< 
cﬁ
 << "Róched möimumÉ¨ly i¿thê£¨ch" << 
cﬁªs
 << 
Endl
;

886 
	`Log
(Ë<< " Möimum wa†foundÉ¨ly i¿thêfôtög. This" << 
Endl
;

887 
	`Log
() << " may indicateÅhatÅhe used step size "

888 << 
cﬁ
 << "GDSãp" << 
cﬁªs
 << "." << 
Endl
;

889 
	`Log
(Ë<< " wa†toÿœrge. Redu˚ ià™dÑîun." << 
Endl
;

890 
	`Log
(Ë<< " I‡thêªsu…†°û»¨ênŸ OK, modifyÅhe" << 
Endl
;

891 
	`Log
(Ë<< " modñÉôhî by modifyögÅhêruÀÉn£mbÀ" << 
Endl
;

892 
	`Log
(Ë<< " o∏add/ªmovêlöó∏ãrms" << 
Endl
;

893 
	}
}

	@src/MethodSVM.cxx

45 
	~"TMVA/MëhodSVM.h
"

47 
	~"TMVA/Toﬁs.h
"

48 
	~"TMVA/Timî.h
"

50 
	~"TMVA/SVW‹kögSë.h
"

52 
	~"TMVA/SVEvít.h
"

54 
	~"TMVA/SVKî√lFun˘i⁄.h
"

56 
	~"TMVA/CœssifõrFa˘‹y.h
"

57 
	~"TMVA/C⁄figuøbÀ.h
"

58 
	~"TMVA/D©aSë.h
"

59 
	~"TMVA/D©aSëInfo.h
"

60 
	~"TMVA/Evít.h
"

61 
	~"TMVA/IMëhod.h
"

62 
	~"TMVA/MëhodBa£.h
"

63 
	~"TMVA/MsgLoggî.h
"

64 
	~"TMVA/Ty≥s.h
"

65 
	~"TMVA/I¡îvÆ.h
"

66 
	~"TMVA/O±imizeC⁄figP¨amëîs.h
"

67 
	~"TMVA/Resu…s.h
"

68 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

69 
	~"TMVA/V¨übÀInfo.h
"

71 
	~"Rio°ªam.h
"

72 
	~"TFûe.h
"

73 
	~"TVe˘‹D.h
"

74 
	~"TM©h.h
"

76 
	~<°rög
>

78 
usög
 
	g°d
::
ve˘‹
;

79 
usög
 
	g°d
::
°rög
;

80 
usög
 
	g°d
::
°rög°ªam
;

83 
	$REGISTER_METHOD
(
SVM
)

85 
	`CœssImp
(
TMVA
::
MëhodSVM
);

90 
TMVA
::
MëhodSVM
::
	$MëhodSVM
–c⁄° 
TSåög
& 
jobName
, c⁄° TSåög& 
mëhodTôÀ
, 
D©aSëInfo
& 
theD©a
,

91 c⁄° 
TSåög
& 
theO±i⁄
 )

92 : 
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kSVM
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
)

93 , 
	`fCo°
(0)

94 , 
	`fTﬁî™˚
(0)

95 , 
	`fMaxIãr
(0)

96 , 
	`fNSubSës
(0)

97 , 
	`fB∑rm
(0)

98 , 
	`fGamma
(0)

99 , 
	`fWgSë
(0)

100 , 
	`fI≈utD©a
(0)

101 , 
	`fSuµ‹tVe˘‹s
(0)

102 , 
	`fSVKî√lFun˘i⁄
(0)

103 , 
	`fMöV¨s
(0)

104 , 
	`fMaxV¨s
(0)

105 , 
	`fDoubÀSigmaSqu¨ed
(0)

106 , 
	`fOrdî
(0)

107 , 
	`fThëa
(0)

108 , 
	`fK≠∑
(0)

109 , 
	`fMu…
(0)

110 ,
	`fNumV¨s
(0)

111 , 
	`fGammas
("")

112 , 
	`fGammaLi°
("")

113 , 
	`fD©aSize
(0)

114 , 
	$fLoss
(0)

116 
fV¨Names
.
	`˛ór
();

117 
fNumV¨s
 = 
theD©a
.
	`GëV¨übÀInfos
().
	`size
();

118  
i
=0; i<
fNumV¨s
; i++){

119 
fV¨Names
.
	`push_back
(
theD©a
.
	`GëV¨übÀInfos
().
	`©
(
i
).
	`GëTôÀ
());

121 
	}
}

126 
	gTMVA
::
MëhodSVM
::
	$MëhodSVM
–
D©aSëInfo
& 
theD©a
, c⁄° 
TSåög
& 
theWeightFûe
)

127 : 
	`MëhodBa£
–
Ty≥s
::
kSVM
, 
theD©a
, 
theWeightFûe
)

128 , 
	`fCo°
(0)

129 , 
	`fTﬁî™˚
(0)

130 , 
	`fMaxIãr
(0)

131 , 
	`fNSubSës
(0)

132 , 
	`fB∑rm
(0)

133 , 
	`fGamma
(0)

134 , 
	`fWgSë
(0)

135 , 
	`fI≈utD©a
(0)

136 , 
	`fSuµ‹tVe˘‹s
(0)

137 , 
	`fSVKî√lFun˘i⁄
(0)

138 , 
	`fMöV¨s
(0)

139 , 
	`fMaxV¨s
(0)

140 , 
	`fDoubÀSigmaSqu¨ed
(0)

141 , 
	`fOrdî
(0)

142 , 
	`fThëa
(0)

143 , 
	`fK≠∑
(0)

144 , 
	`fMu…
(0)

145 , 
	`fNumV¨s
(0)

146 , 
	`fGammas
("")

147 , 
	`fGammaLi°
("")

148 , 
	`fD©aSize
(0)

149 , 
	$fLoss
(0)

151 
fV¨Names
.
	`˛ór
();

152 
fNumV¨s
 = 
theD©a
.
	`GëV¨übÀInfos
().
	`size
();

153  
i
=0;i<
fNumV¨s
; i++){

154 
fV¨Names
.
	`push_back
(
theD©a
.
	`GëV¨übÀInfos
().
	`©
(
i
).
	`GëTôÀ
());

156 
	}
}

161 
	gTMVA
::
MëhodSVM
::~
	$MëhodSVM
()

163 
fSuµ‹tVe˘‹s
->
	`˛ór
();

164 
UI¡_t
 
i
=0; i<
fI≈utD©a
->
	`size
(); i++) {

165 
dñëe
 
fI≈utD©a
->
	`©
(
i
);

167 i‡(
fWgSë
 !=0Ë{ 
dñëe
 fWgSet; fWgSet=0; }

168 i‡(
fSVKî√lFun˘i⁄
 !=0 ) { 
dñëe
 fSVKernelFunction; fSVKernelFunction = 0; }

169 
	}
}

174 
	gTMVA
::
MëhodSVM
::
	$Re£t
( )

177 
fSuµ‹tVe˘‹s
->
	`˛ór
();

178 
UI¡_t
 
i
=0; i<
fI≈utD©a
->
	`size
(); i++){

179 
dñëe
 
fI≈utD©a
->
	`©
(
i
);

180 
fI≈utD©a
->
	`©
(
i
)=0;

182 
fI≈utD©a
->
	`˛ór
();

183 i‡(
fWgSë
 !=0) { fWgSet=0; }

184 i‡(
fSVKî√lFun˘i⁄
 !=0 ) { fSVKernelFunction = 0; }

185 i‡(
	`D©a
()){

186 
	`D©a
()->
	`DñëeResu…s
(
	`GëMëhodName
(), 
Ty≥s
::
kTøöög
, 
	`GëA«lysisTy≥
());

189 
	`Log
(Ë<< 
kDEBUG
 << " suc˚ssfuŒy(?Ëª£àthêmëhod " << 
Endl
;

190 
	}
}

195 
Boﬁ_t
 
	gTMVA
::
MëhodSVM
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
, UI¡_à
numbîT¨gës
 )

197 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

198 i‡(
ty≥
 =
Ty≥s
::
kRegªssi⁄
 && 
numbîT¨gës
 =1Ë 
kTRUE
;

199  
kFALSE
;

200 
	}
}

205 
	gTMVA
::
MëhodSVM
::
	$Inô
()

208 
	`SëN‹mÆi£d
–
kTRUE
 );

213 
fI≈utD©a
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>(0);

214 
fSuµ‹tVe˘‹s
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>(0);

215 
	}
}

220 
	gTMVA
::
MëhodSVM
::
	$De˛¨eO±i⁄s
()

222 
	`De˛¨eO±i⁄Ref
–
fTheKî√l
 = "RBF", "Kernel", "Pick which kernel ( RBF or MultiGauss )");

224 
	`De˛¨eO±i⁄Ref
–
fGamma
 = 1., "Gamma", "RBF kernelÖarameter: Gamma (size ofÅhe Kernel)");

226 
	`De˛¨eO±i⁄Ref
–
fOrdî
 = 3, "Order", "Polynomial KernelÖarameter:Öolynomial order");

227 
	`De˛¨eO±i⁄Ref
–
fThëa
 = 1., "Theta", "Polynomial KernelÖarameter:ÖolynomialÅheta");

229 
	`De˛¨eO±i⁄Ref
–
fGammas
 = "", "GammaList", "MultiGaussÖarameters" );

232 
	`De˛¨eO±i⁄Ref
–
fTu√
 = "All", "Tune", "Tune Parameters");

234 
	`De˛¨eO±i⁄Ref
–
fMu…iKî√ls
 = "None", "KernelList", "Sum orÖroduct of kernels");

235 
	`De˛¨eO±i⁄Ref
–
fLoss
 = "hinge", "Loss", "Loss function");

237 
	`De˛¨eO±i⁄Ref
–
fCo°
, "C", "CostÖarameter" );

238 i‡(
	`DoRegªssi⁄
()) {

239 
fCo°
 = 0.002;

241 
fCo°
 = 1.;

243 
	`De˛¨eO±i⁄Ref
–
fTﬁî™˚
 = 0.01, "Tol", "ToleranceÖarameter" );

244 
	`De˛¨eO±i⁄Ref
–
fMaxIãr
 = 1000, "MaxIter", "MaximumÇumber ofÅrainingÜoops" );

246 
	}
}

251 
	gTMVA
::
MëhodSVM
::
	$De˛¨eCom∑tibûôyO±i⁄s
()

253 
MëhodBa£
::
	`De˛¨eCom∑tibûôyO±i⁄s
();

254 
	`De˛¨eO±i⁄Ref
–
fNSubSës
 = 1, "NSubSets", "Number ofÅraining subsets" );

255 
	`De˛¨eO±i⁄Ref
–
fTheKî√l
 = "Gauss", "Kernel", "Uses kernel function");

257 
	`De˛¨eO±i⁄Ref
–
fDoubÀSigmaSqu¨ed
 = 2., "Sigma", "KernelÖarameter: sigma");

259 
	`De˛¨eO±i⁄Ref
–
fOrdî
 = 3, "Order", "Polynomial KernelÖarameter:Öolynomial order");

261 
	`De˛¨eO±i⁄Ref
–
fThëa
 = 1., "Theta", "Sigmoid KernelÖarameter:Åheta");

262 
	`De˛¨eO±i⁄Ref
–
fK≠∑
 = 1., "Kappa", "Sigmoid KernelÖarameter: kappa");

263 
	}
}

268 
	gTMVA
::
MëhodSVM
::
	$Pro˚ssO±i⁄s
()

270 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

271 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇot yetávailable for method: "

272 << 
	`GëMëhodTy≥Name
()

274 << 
Endl
;

276 
	}
}

281 
	gTMVA
::
MëhodSVM
::
	$Tøö
()

283 
fIPyMaxIãr
 = 
fMaxIãr
;

284 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

286 
	`Log
(Ë<< 
kDEBUG
 << "Cª©êevíàve˘‹"<< 
Endl
;

288 
fD©aSize
 = 
	`D©a
()->
	`GëNEvíts
();

289 
I¡_t
 
nSig«l
 = 
	`D©a
()->
	`GëNEvtSigTøö
();

290 
I¡_t
 
nBackground
 = 
	`D©a
()->
	`GëNEvtBkgdTøö
();

291 
DoubÀ_t
 
CSig
;

292 
DoubÀ_t
 
CBkg
;

297 if(
nSig«l
 < 
nBackground
){

298 
CSig
 = 
fCo°
;

299 
CBkg
 = 
CSig
*(()
nSig«l
/
nBackground
);

302 
CBkg
 = 
fCo°
;

303 
CSig
 = 
CBkg
*(()
nSig«l
/
nBackground
);

307 
I¡_t
 
õv¡
=0; iev¡<
	`D©a
()->
	`GëNEvíts
(); ievnt++){

308 i‡(
	`GëEvít
(
õv¡
)->
	`GëWeight
() != 0){

309 if(
	`D©aInfo
().
	`IsSig«l
(
	`GëEvít
(
õv¡
))){

310 
fI≈utD©a
->
	`push_back
(
√w
 
	`SVEvít
(
	`GëEvít
(
õv¡
), 
CSig
, 
	`D©aInfo
().
IsSig«l
\

311 (
	`GëEvít
(
õv¡
))));

314 
fI≈utD©a
->
	`push_back
(
√w
 
	`SVEvít
(
	`GëEvít
(
õv¡
), 
CBkg
, 
	`D©aInfo
().
IsSig«l
\

315 (
	`GëEvít
(
õv¡
))));

323 if–
fTheKî√l
 == "RBF"){

324 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
–
SVKî√lFun˘i⁄
::
kRBF
, 
fGamma
);

326 if–
fTheKî√l
 == "MultiGauss" ){

327 if(
fGammas
!=""){

328 
	`SëMGamma
(
fGammas
);

329 
fGammaLi°
=
fGammas
;

332 if(
fmGamma
.
	`size
()!=0){ 
	`GëMGamma
(fmGamma); }

334 
I¡_t
 
ngammas
=0;Çgammas<
fNumV¨s
; ++ngammas){

335 
fmGamma
.
	`push_back
(1.0);

337 
	`GëMGamma
(
fmGamma
);

340 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
fmGamma
);

342 if–
fTheKî√l
 == "Polynomial" ){

343 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
–
SVKî√lFun˘i⁄
::
kPﬁynomül
, 
fOrdî
,
fThëa
);

345 if–
fTheKî√l
 == "Prod" ){

346 if(
fGammas
!=""){

347 
	`SëMGamma
(
fGammas
);

348 
fGammaLi°
=
fGammas
;

351 if(
fmGamma
.
	`size
()!=0){ 
	`GëMGamma
(fmGamma); }

353 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
–
SVKî√lFun˘i⁄
::
kProd
, 
	`MakeKî√lLi°
(
fMu…iKî√ls
,
fTheKî√l
), 
fmGamma
, 
fGamma
, 
fOrdî
, 
fThëa
 );

355 if–
fTheKî√l
 == "Sum" ){

356 if(
fGammas
!=""){

357 
	`SëMGamma
(
fGammas
);

358 
fGammaLi°
=
fGammas
;

361 if(
fmGamma
.
	`size
()!=0){ 
	`GëMGamma
(fmGamma); }

363 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
–
SVKî√lFun˘i⁄
::
kSum
, 
	`MakeKî√lLi°
(
fMu…iKî√ls
,
fTheKî√l
), 
fmGamma
, 
fGamma
, 
fOrdî
, 
fThëa
 );

366 
	`Log
(Ë<< 
kWARNING
 << 
fTheKî√l
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

367 
	`exô
(1);

370 
	`Log
()<< 
kINFO
 << "Buûdög SVM W‹kög Së...wôh "<<
fI≈utD©a
->
	`size
()<<"Évíàö°™˚s"<< 
Endl
;

371 
Timî
 
	`bldw°ime
–
	`GëName
());

372 
fWgSë
 = 
√w
 
	`SVW‹kögSë
–
fI≈utD©a
, 
fSVKî√lFun˘i⁄
,
fTﬁî™˚
, 
	`DoRegªssi⁄
() );

373 
	`Log
(Ë<< 
kINFO
 <<"Eœp£dÅimêf‹ W‹kög Së buûd: "<< 
bldw°ime
.
	`GëEœp£dTime
()<<
Endl
;

376 
Timî
 
	`timî
–
	`GëName
() );

377 
	`Log
(Ë<< 
kINFO
 << "S‹ry,ÇÿcomputögÅimêf‹eˇ°ávaûabÀ f‹ SVM,ÖÀa£ waô ..." << 
Endl
;

379 i‡(
fI¡îa˘ive
Ë
fWgSë
->
	`SëIPyth⁄I¡îa˘ive
(&
fExôFromTøöög
, &
fIPyCuºítIãr
);

381 
fWgSë
->
	`Tøö
(
fMaxIãr
);

383 
	`Log
(Ë<< 
kINFO
 << "Eœp£dÅime: " << 
timî
.
	`GëEœp£dTime
()

384 << " " << 
Endl
;

386 
fB∑rm
 = 
fWgSë
->
	`GëB∑r
();

387 
fSuµ‹tVe˘‹s
 = 
fWgSë
->
	`GëSuµ‹tVe˘‹s
();

388 
dñëe
 
fWgSë
;

389 
fWgSë
=0;

391 i‡(!
fExôFromTøöög
Ë
fIPyMaxIãr
 = 
fIPyCuºítIãr
;

392 
	`ExôFromTøöög
();

393 
	}
}

398 
	gTMVA
::
MëhodSVM
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

400 * 
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

401 
	`gToﬁs
().
	`AddAâr
(
wght
,"fB∑rm",
fB∑rm
);

402 
	`gToﬁs
().
	`AddAâr
(
wght
,"fGamma",
fGamma
);

403 
	`gToﬁs
().
	`AddAâr
(
wght
,"fGammaLi°",
fGammaLi°
);

404 
	`gToﬁs
().
	`AddAâr
(
wght
,"fThëa",
fThëa
);

405 
	`gToﬁs
().
	`AddAâr
(
wght
,"fOrdî",
fOrdî
);

406 
	`gToﬁs
().
	`AddAâr
(
wght
,"NSupVec",
fSuµ‹tVe˘‹s
->
	`size
());

408 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
vecôî
=
fSuµ‹tVe˘‹s
->
	`begö
();

409 
vecôî
!=
fSuµ‹tVe˘‹s
->
	`íd
() ; ++veciter ) {

410 
TVe˘‹D
 
	`ãmp
(
	`GëNv¨
()+4);

411 
ãmp
[0] = (*
vecôî
)->
	`GëNs
();

412 
ãmp
[1] = (*
vecôî
)->
	`GëTy≥Fœg
();

413 
ãmp
[2] = (*
vecôî
)->
	`GëAÕha
();

414 
ãmp
[3] = (*
vecôî
)->
	`GëAÕha_p
();

415 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++)

416 
ãmp
[
iv¨
+4] = (*(*
vecôî
)->
	`GëD©aVe˘‹
())[ivar];

417 
	`gToﬁs
().
	`WrôeTVe˘‹DToXML
(
wght
,"Suµ‹tVe˘‹",&
ãmp
);

420 * 
maxnode
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "Maxima");

421 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++)

422 
	`gToﬁs
().
	`AddAâr
(
maxnode
, "V¨"+gToﬁs().
	`SåögFromI¡
(
iv¨
), 
	`GëXmax
(ivar));

423 * 
mönode
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, "Minima");

424 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++)

425 
	`gToﬁs
().
	`AddAâr
(
mönode
, "V¨"+gToﬁs().
	`SåögFromI¡
(
iv¨
), 
	`GëXmö
(ivar));

426 
	}
}

430 
	gTMVA
::
MëhodSVM
::
	$RódWeightsFromXML
–* 
wghäode
 )

432 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "fB∑rm",
fB∑rm
 );

433 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "fGamma",
fGamma
);

434 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "fGammaLi°",
fGammaLi°
);

435 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "fOrdî",
fOrdî
);

436 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "fThëa",
fThëa
);

437 
UI¡_t
 
fNsupv
=0;

438 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NSupVec",
fNsupv
 );

440 
Flﬂt_t
 
Æpha
=0.;

441 
Flﬂt_t
 
Æpha_p
 = 0.;

443 
I¡_t
 
ty≥Fœg
=-1;

445 
°d
::
ve˘‹
<
Flﬂt_t
>* 
sve˘‹
 = 
√w
 std::ve˘‹<Flﬂt_t>(
	`GëNv¨
());

447 i‡(
fMaxV¨s
!=0Ë
dñëe
 fMaxVars;

448 
fMaxV¨s
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

449 i‡(
fMöV¨s
!=0Ë
dñëe
 fMinVars;

450 
fMöV¨s
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

451 i‡(
fSuµ‹tVe˘‹s
!=0) {

452 
ve˘‹
< 
SVEvít
* >::
ôî©‹
 
ô
 = 
fSuµ‹tVe˘‹s
->
	`begö
(); it!=fSuµ‹tVe˘‹s->
	`íd
(); ++it)

453 
dñëe
 *
ô
;

454 
dñëe
 
fSuµ‹tVe˘‹s
;

456 
fSuµ‹tVe˘‹s
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>(0);

457 * 
suµ‹tve˘‹node
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

458 
UI¡_t
 
õvt
 = 0; ievà< 
fNsupv
; ievt++) {

459 
TVe˘‹D
 
	`ãmp
(
	`GëNv¨
()+4);

460 
	`gToﬁs
().
	`RódTVe˘‹DFromXML
(
suµ‹tve˘‹node
,"Suµ‹tVe˘‹",&
ãmp
);

462 
ty≥Fœg
=()
ãmp
[1];

463 
Æpha
=
ãmp
[2];

464 
Æpha_p
=
ãmp
[3];

465 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); iv¨++Ë(*
sve˘‹
)[iv¨]=
ãmp
[ivar+4];

467 
fSuµ‹tVe˘‹s
->
	`push_back
(
√w
 
	`SVEvít
(
sve˘‹
,
Æpha
,
Æpha_p
,
ty≥Fœg
));

468 
suµ‹tve˘‹node
 = 
	`gToﬁs
().
	`GëNextChûd
(supportvectornode);

471 * 
maxmönode
 = 
suµ‹tve˘‹node
;

472 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++)

473 
	`gToﬁs
().
	`RódAâr
–
maxmönode
,"V¨"+gToﬁs().
	`SåögFromI¡
(
iv¨
),(*
fMaxV¨s
)[ivar]);

474 
maxmönode
 = 
	`gToﬁs
().
	`GëNextChûd
(maxminnode);

475 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++)

476 
	`gToﬁs
().
	`RódAâr
–
maxmönode
,"V¨"+gToﬁs().
	`SåögFromI¡
(
iv¨
),(*
fMöV¨s
)[ivar]);

477 i‡(
fSVKî√lFun˘i⁄
!=0Ë
dñëe
 fSVKernelFunction;

478 if–
fTheKî√l
 == "RBF" ){

479 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
SVKî√lFun˘i⁄
::
kRBF
, 
fGamma
);

481 if–
fTheKî√l
 == "MultiGauss" ){

482 
	`SëMGamma
(
fGammaLi°
);

483 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
fmGamma
);

485 if–
fTheKî√l
 == "Polynomial" ){

486 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
SVKî√lFun˘i⁄
::
kPﬁynomül
, 
fOrdî
, 
fThëa
);

488 if–
fTheKî√l
 == "Prod" ){

489 
	`SëMGamma
(
fGammaLi°
);

490 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
SVKî√lFun˘i⁄
::
kSum
, 
	`MakeKî√lLi°
(
fMu…iKî√ls
,
fTheKî√l
), 
fmGamma
, 
fGamma
, 
fOrdî
, 
fThëa
);

492 if–
fTheKî√l
 == "Sum" ){

493 
	`SëMGamma
(
fGammaLi°
);

494 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(
SVKî√lFun˘i⁄
::
kSum
, 
	`MakeKî√lLi°
(
fMu…iKî√ls
,
fTheKî√l
), 
fmGamma
, 
fGamma
, 
fOrdî
, 
fThëa
);

497 
	`Log
(Ë<< 
kWARNING
 << 
fTheKî√l
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

498 
	`exô
(1);

500 
dñëe
 
sve˘‹
;

501 
	}
}

507 
	gTMVA
::
MëhodSVM
::
	$WrôeWeightsToSåóm
–
TFûe
& ) const

509 
	}
}

513 
TMVA
::
MëhodSVM
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

515 i‡(
fSuµ‹tVe˘‹s
 !=0Ë{ 
dñëe
 fSupportVectors; fSupportVectors = 0;}

516 
fSuµ‹tVe˘‹s
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>(0);

519 
i°r
 >> 
fB∑rm
;

521 
UI¡_t
 
fNsupv
;

523 
i°r
 >> 
fNsupv
;

524 
fSuµ‹tVe˘‹s
->
	`ª£rve
(
fNsupv
);

526 
Flﬂt_t
 
ty≥TÆpha
=0.;

527 
Flﬂt_t
 
Æpha
=0.;

528 
I¡_t
 
ty≥Fœg
=-1;

529 
UI¡_t
 
ns
 = 0;

530 
°d
::
ve˘‹
<
Flﬂt_t
>* 
sve˘‹
 = 
√w
 std::ve˘‹<Flﬂt_t>(
	`GëNv¨
());

532 
fMaxV¨s
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

533 
fMöV¨s
 = 
√w
 
	`TVe˘‹D
–
	`GëNv¨
() );

535 
UI¡_t
 
õvt
 = 0; ievà< 
fNsupv
; ievt++) {

536 
i°r
>>
ns
;

537 
i°r
>>
ty≥TÆpha
;

538 
ty≥Fœg
 = 
ty≥TÆpha
<0?-1:1;

539 
Æpha
 = 
ty≥TÆpha
<0?-typeTalpha:typeTalpha;

540 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); iv¨++Ë
i°r
 >> 
sve˘‹
->
	`©
(ivar);

542 
fSuµ‹tVe˘‹s
->
	`push_back
(
√w
 
	`SVEvít
(
sve˘‹
,
Æpha
,
ty≥Fœg
,
ns
));

545 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); iv¨++Ë
i°r
 >> (*
fMaxV¨s
)[ivar];

547 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); iv¨++Ë
i°r
 >> (*
fMöV¨s
)[ivar];

549 
dñëe
 
fSVKî√lFun˘i⁄
;

550 i‡(
fTheKî√l
 == "Gauss" ) {

551 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
(1/
fDoubÀSigmaSqu¨ed
);

554 
SVKî√lFun˘i⁄
::
EKî√lTy≥
 
k
 = SVKî√lFun˘i⁄::
kLöór
;

555 if(
fTheKî√l
 ="Löór"Ë
k
 = 
SVKî√lFun˘i⁄
::
kLöór
;

556 i‡(
fTheKî√l
 ="Pﬁynomül"Ë
k
 = 
SVKî√lFun˘i⁄
::
kPﬁynomül
;

557 i‡(
fTheKî√l
 ="Sigmoid" ) 
k
 = 
SVKî√lFun˘i⁄
::
kSigmoidÆ
;

559 
	`Log
(Ë<< 
kFATAL
 <<"Unknow¿kî√»fun˘i⁄ found i¿weighàfûe!" << 
Endl
;

561 
fSVKî√lFun˘i⁄
 = 
√w
 
	`SVKî√lFun˘i⁄
();

562 
fSVKî√lFun˘i⁄
->
	`£tCom∑tibûôyP¨ams
(
k
, 
fOrdî
, 
fThëa
, 
fK≠∑
);

564 
dñëe
 
sve˘‹
;

565 
	}
}

570 
	gTMVA
::
MëhodSVM
::
	$RódWeightsFromSåóm
–
TFûe
& )

572 
	}
}

577 
DoubÀ_t
 
TMVA
::
MëhodSVM
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

579 
DoubÀ_t
 
myMVA
 = 0;

582 
SVEvít
* 
ev
 = 
√w
 
	`SVEvít
–
	`GëEvít
(), 0. );

584 
UI¡_t
 
õvt
 = 0; ievà< 
fSuµ‹tVe˘‹s
->
	`size
() ; ievt++) {

585 
myMVA
 +–
fSuµ‹tVe˘‹s
->
	`©
(
õvt
)->
	`GëAÕha
()

586 * 
fSuµ‹tVe˘‹s
->
	`©
(
õvt
)->
	`GëTy≥Fœg
()

587 * 
fSVKî√lFun˘i⁄
->
	`EvÆu©e
–
fSuµ‹tVe˘‹s
->
	`©
(
õvt
), 
ev
 ) );

590 
dñëe
 
ev
;

592 
myMVA
 -
fB∑rm
;

595 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

598  1.0/(1.0 + 
TM©h
::
	`Exp
(
myMVA
));

599 
	}
}

602 c⁄° 
	g°d
::
ve˘‹
<
Flﬂt_t
>& 
TMVA
::
MëhodSVM
::
	$GëRegªssi⁄VÆues
()

604 if–
fRegªssi⁄Rëu∫VÆ
 =
NULL
 )

605 
fRegªssi⁄Rëu∫VÆ
 = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
>();

606 
fRegªssi⁄Rëu∫VÆ
->
	`˛ór
();

608 
DoubÀ_t
 
myMVA
 = 0;

610 c⁄° 
Evít
 *
ba£ev
 = 
	`GëEvít
();

611 
SVEvít
* 
ev
 = 
√w
 
	`SVEvít
–
ba£ev
,0. );

613 
UI¡_t
 
õvt
 = 0; ievà< 
fSuµ‹tVe˘‹s
->
	`size
() ; ievt++) {

614 
myMVA
 +–
fSuµ‹tVe˘‹s
->
	`©
(
õvt
)->
	`GëDñèAÕha
()

615 *
fSVKî√lFun˘i⁄
->
	`EvÆu©e
–
fSuµ‹tVe˘‹s
->
	`©
(
õvt
), 
ev
 ) );

617 
myMVA
 +
fB∑rm
;

618 
Evít
 * 
evT
 = 
√w
 
	`Evít
(*
ba£ev
);

619 
evT
->
	`SëT¨gë
(0,
myMVA
);

621 c⁄° 
Evít
* 
evT2
 = 
	`GëTønsf‹m©i⁄H™dÀr
().
	`Invî£Tønsf‹m
–
evT
 );

623 
fRegªssi⁄Rëu∫VÆ
->
	`push_back
(
evT2
->
	`GëT¨gë
(0));

625 
dñëe
 
evT
;

627 
dñëe
 
ev
;

629  *
fRegªssi⁄Rëu∫VÆ
;

630 
	}
}

635 
	gTMVA
::
MëhodSVM
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
˛assName
 ) const

637 c⁄° 
fNsupv
 = 
fSuµ‹tVe˘‹s
->
	`size
();

638 
fout
 << " //ÇŸ im∂emíãd f‹ cœss: \"" << 
˛assName
 << "\"" << 
°d
::
ídl
;

639 
fout
 << " flﬂà fB∑ømëî;" << 
°d
::
ídl
;

640 
fout
 << " i¡ fNOfSuµVec;" << 
°d
::
ídl
;

641 
fout
 << " sèti¯ÊﬂàfAŒSuµVe˘‹s[][" << 
fNsupv
 << "];" << 
°d
::
ídl
;

642 
fout
 << " sèti¯ÊﬂàfAÕhaTy≥C€f[" << 
fNsupv
 << "];" << 
°d
::
ídl
;

643 
fout
 << 
°d
::
ídl
;

644 
fout
 << " // Kî√»∑ømëî(sË" << 
°d
::
ídl
;

645 
fout
 << " flﬂàfGamma;" << 
°d
::
ídl
;

646 
fout
 << "};" << 
°d
::
ídl
;

647 
fout
 << "" << 
°d
::
ídl
;

650 
fout
 << "ölöêvoid " << 
˛assName
 << "::Inôülize(Ë" << 
°d
::
ídl
;

651 
fout
 << "{" << 
°d
::
ídl
;

652 
fout
 << " fB∑ømëî = " << 
fB∑rm
 << ";" << 
°d
::
ídl
;

653 
fout
 << " fNOfSuµVe¯" << 
fNsupv
 << ";" << 
°d
::
ídl
;

654 
fout
 << " fGamm®" << 
fGamma
 << ";" <<
°d
::
ídl
;

655 
fout
 << "}" << 
°d
::
ídl
;

656 
fout
 << 
°d
::
ídl
;

659 
fout
 << "ölöêdoubÀ " << 
˛assName
 << "::GëMvaVÆue__(c⁄° std::ve˘‹<doubÀ>& i≈utVÆue†Ëc⁄°" << 
°d
::
ídl
;

660 
fout
 << "{" << 
°d
::
ídl
;

661 
fout
 << " doubÀ mvavÆ = 0; " << 
°d
::
ídl
;

662 
fout
 << " doubÀÅem∞0; " << 
°d
::
ídl
;

663 
fout
 << 
°d
::
ídl
;

664 
fout
 << " f‹ (öàõvà0; ievà< fNOfSuµVec; ievt++ ){" << 
°d
::
ídl
;

665 
fout
 << "Åem∞0;" << 
°d
::
ídl
;

666 
fout
 << " f‹ ( unsig√d i¡ iv¨ = 0; iv¨ < GëNv¨(); iv¨++ ) {" << 
°d
::
ídl
;

668 
fout
 << "Åem∞+(fAŒSuµVe˘‹s[iv¨][õvt] - i≈utVÆues[iv¨]Ë " << 
°d
::
ídl
;

669 
fout
 << " * (fAŒSuµVe˘‹s[iv¨][õvt] - i≈utVÆues[iv¨]); " << 
°d
::
ídl
;

670 
fout
 << " }" << 
°d
::
ídl
;

671 
fout
 << " mvavÆ +fAÕhaTy≥C€f[õvt] *Éxp–-fGamm®*Åem∞); " << 
°d
::
ídl
;

673 
fout
 << " }" << 
°d
::
ídl
;

674 
fout
 << " mvavÆ -fB∑ømëî;" << 
°d
::
ídl
;

675 
fout
 << "Ñëu∫ 1./(1. +Éxp(mvavÆ));" << 
°d
::
ídl
;

676 
fout
 << "}" << 
°d
::
ídl
;

677 
fout
 << "// CÀ™ up" << 
°d
::
ídl
;

678 
fout
 << "ölöêvoid " << 
˛assName
 << "::CÀ¨(Ë" << 
°d
::
ídl
;

679 
fout
 << "{" << 
°d
::
ídl
;

680 
fout
 << " //ÇŸhögÅÿ˛ó∏" << 
°d
::
ídl
;

681 
fout
 << "}" << 
°d
::
ídl
;

682 
fout
 << "" << 
°d
::
ídl
;

685 
fout
 << "Êﬂà" << 
˛assName
 << "::fAÕhaTy≥C€f[] =" << 
°d
::
ídl
;

686 
fout
 << "{ ";

687 
I¡_t
 
isv
 = 0; isv < 
fNsupv
; isv++) {

688 
fout
 << 
fSuµ‹tVe˘‹s
->
	`©
(
isv
)->
	`GëDñèAÕha
(Ë* fSuµ‹tVe˘‹s->©(isv)->
	`GëTy≥Fœg
();

689 i‡(
isv
 < 
fNsupv
-1Ë
fout
 << ", ";

691 
fout
 << " };" << 
°d
::
ídl
 << std::endl;

693 
fout
 << "Êﬂà" << 
˛assName
 << "::fAŒSuµVe˘‹s[][" << 
fNsupv
 << "] =" << 
°d
::
ídl
;

694 
fout
 << "{";

695 
UI¡_t
 
iv¨
 = 0; iv¨ < 
	`GëNv¨
(); ivar++) {

696 
fout
 << 
°d
::
ídl
;

697 
fout
 << " { ";

698 
I¡_t
 
isv
 = 0; isv < 
fNsupv
; isv++){

699 
fout
 << 
fSuµ‹tVe˘‹s
->
	`©
(
isv
)->
	`GëD©aVe˘‹
()->©(
iv¨
);

700 i‡(
isv
 < 
fNsupv
-1Ë
fout
 << ", ";

702 
fout
 << " }";

703 i‡(
iv¨
 < 
	`GëNv¨
()-1Ë
fout
 << ", " << 
°d
::
ídl
;

704 
fout
 << 
°d
::
ídl
;

706 
fout
 << "};" << 
°d
::
ídl
<< std::endl;

707 
	}
}

715 
	gTMVA
::
MëhodSVM
::
	$GëHñpMesßge
() const

717 
	`Log
(Ë<< 
Endl
;

718 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

719 
	`Log
(Ë<< 
Endl
;

720 
	`Log
(Ë<< "ThêSuµ‹àVe˘‹ Machöê(SVMËbuûd†®hy≥Ωœ√ sï¨©ög" << 
Endl
;

721 
	`Log
(Ë<< "sig«»™d backgroundÉvít†(ve˘‹sËusögÅhêmöimÆ sub£ào‡" << 
Endl
;

722 
	`Log
(Ë<< "Æ»ve˘‹†u£d f‹Åøöög (suµ‹àve˘‹s). Thêexãnsi⁄Åo" << 
Endl
;

723 
	`Log
(Ë<< "thên⁄-löó∏ˇ£ i†≥rf‹med by m≠pög i≈uàve˘‹†ötÿ®" << 
Endl
;

724 
	`Log
(Ë<< "highî-dimísi⁄Æ fótuª s∑˚ i¿whichÜöó∏£∑øti⁄ i†" << 
Endl
;

725 
	`Log
(Ë<< "possibÀ. Thêu£ o‡thêkî√»fun˘i⁄†thîebyÉlimö©e†thê" << 
Endl
;

726 
	`Log
(Ë<< "ex∂icôÅønsf‹m©i⁄Åÿthê„©uª s∑˚. Thêim∂emíãd SVM " << 
Endl
;

727 
	`Log
(Ë<< "Æg‹ôhmÖîf‹m†thê˛assifiˇti⁄Åask†usögÜöór,Öﬁynomül, " << 
Endl
;

728 
	`Log
(Ë<< "Gaussü¿™d sigmoidÆ kî√»fun˘i⁄s. ThêGaussü¿kî√»Ælow†" << 
Endl
;

729 
	`Log
(Ë<< "tÿ≠∂yány dis¸imö™àsh≠êöÅhêöpuà•a˚." << 
Endl
;

730 
	`Log
(Ë<< 
Endl
;

731 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚ o±imißti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

732 
	`Log
(Ë<< 
Endl
;

733 
	`Log
(Ë<< "SVM i†®gíîÆÖuΩo£Ç⁄-löó∏˛assifiˇti⁄ mëhod, which " << 
Endl
;

734 
	`Log
(Ë<< "d€†nŸÑequúêd©®¥ïro˚ssögÜikêdec‹ªœti⁄ o∏PröcùÆ " << 
Endl
;

735 
	`Log
(Ë<< "Comp⁄íàA«lysis. IàgíîÆi£†quôêwñ»™d c™ h™dÀá«ly£†" << 
Endl
;

736 
	`Log
(Ë<< "wôhÜ¨gênumbî†o‡öpuàv¨übÀs." << 
Endl
;

737 
	`Log
(Ë<< 
Endl
;

738 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Pîf‹m™˚Åunög vü c⁄figuøti⁄ o±i⁄s:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

739 
	`Log
(Ë<< 
Endl
;

740 
	`Log
(Ë<< "O±imÆÖîf‹m™˚Ñequúe†¥im¨ûyáÖr›î choi˚ o‡thêkî√»" << 
Endl
;

741 
	`Log
(Ë<< "∑ømëî†—hêwidth \"Sigma\" i¿ˇ£ o‡Gaussü¿kî√lË™dÅhe" << 
Endl
;

742 
	`Log
(Ë<< "co°Ö¨amëî \"C\". Thêu£∏mu° o±imi£ÅhemÉmpúiˇŒy byÑu¬ög" << 
Endl
;

743 
	`Log
(Ë<< "SVM sevîÆÅime†wôh dif„ª¡Ö¨amëî sës. Thêtimê√eded f‹ " << 
Endl
;

744 
	`Log
(Ë<< "óchÉvÆu©i⁄ sˇÀ†likêthêsqu¨êo‡thênumbî o‡åaöög " << 
Endl
;

745 
	`Log
(Ë<< "evít†sÿth©á cﬂr£Öªlimö¨yÅunög should bê≥rf‹med o¿" << 
Endl
;

746 
	`Log
(Ë<< "ªdu˚d d©®£ts." << 
Endl
;

747 
	}
}

760 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gTMVA
::
MëhodSVM
::
	$O±imizeTunögP¨amëîs
(
TSåög
 
fomTy≥
, TSåög 
fôTy≥
)

763 
°d
::
m≠
< 
TSåög
,°d::
ve˘‹
<
DoubÀ_t
> > 
›tV¨s
;

765 if(
fTu√
 != "All"){

766 
›tV¨s

	`GëTunögO±i⁄s
();

768 
°d
::
m≠
< 
TSåög
,°d::
ve˘‹
<
DoubÀ_t
> >::
ôî©‹
 
ôî
;

770 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*> 
tu√P¨amëîs
;

771 
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
tu√dP¨amëîs
;

774 
	`Log
(Ë<< 
kINFO
 << "UsögÅhê" << 
fTheKî√l
 << " kî√l." << 
Endl
;

776 if–
fTheKî√l
 == "RBF" ){

777 if(
fTu√
 == "All"){

778 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Gamma",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

779 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("C",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

782 
ôî
=
›tV¨s
.
	`begö
(); iãr!=›tV¨s.
	`íd
(); iter++){

783 if–
ôî
->
fú°
 == "Gamma" || iter->first == "C"){

784 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
ôî
->
fú°
, 
√w
 
	`I¡îvÆ
(ôî->
£c⁄d
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

787 
	`Log
(Ë<< 
kWARNING
 << 
ôî
->
fú°
 << " i†nŸáÑecogni£dÅu√abÀÖ¨amëî." << 
Endl
;

788 
	`exô
(1);

793 if–
fTheKî√l
 == "Polynomial" ){

794 i‡(
fTu√
 == "All"){

795 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Ordî", 
√w
 
	`I¡îvÆ
(1,10,10)));

796 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Thëa", 
√w
 
	`I¡îvÆ
(0.01,1.,100)));

797 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("C", 
√w
 
	`I¡îvÆ
(0.01,1.,100)));

800 
ôî
=
›tV¨s
.
	`begö
(); iãr!=›tV¨s.
	`íd
(); iter++){

801 if–
ôî
->
fú°
 == "Theta" || iter->first == "C"){

802 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
ôî
->
fú°
, 
√w
 
	`I¡îvÆ
(ôî->
£c⁄d
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

804 if–
ôî
->
fú°
 == "Order"){

805 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
ôî
->
fú°
, 
√w
 
	`I¡îvÆ
(ôî->
£c⁄d
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

808 
	`Log
(Ë<< 
kWARNING
 << 
ôî
->
fú°
 << " i†nŸáÑecogni£dÅu√abÀÖ¨amëî." << 
Endl
;

809 
	`exô
(1);

814 if–
fTheKî√l
 == "MultiGauss" ){

815 i‡(
fTu√
 == "All"){

816 
i
=0; i<
fNumV¨s
; i++){

817 
°rög°ªam
 
s
;

818 
s
 << 
fV¨Names
.
	`©
(
i
);

819 
°rög
 
°r
 = "Gamma_" + 
s
.
	`°r
();

820 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
°r
,
√w
 
	`I¡îvÆ
(0.01,1.,100)));

822 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("C",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

824 
ôî
=
›tV¨s
.
	`begö
(); iãr!=›tV¨s.
	`íd
(); iter++){

825 if–
ôî
->
fú°
 == "GammaList"){

826 
j
=0; j<
fNumV¨s
; j++){

827 
°rög°ªam
 
s
;

828 
s
 << 
fV¨Names
.
	`©
(
j
);

829 
°rög
 
°r
 = "Gamma_" + 
s
.
	`°r
();

830 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
°r
, 
√w
 
	`I¡îvÆ
(
ôî
->
£c⁄d
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

833 if–
ôî
->
fú°
 == "C"){

834 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
ôî
->
fú°
, 
√w
 
	`I¡îvÆ
(ôî->
£c⁄d
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

837 
	`Log
(Ë<< 
kWARNING
 << 
ôî
->
fú°
 << " i†nŸáÑecogni£dÅu√abÀÖ¨amëî." << 
Endl
;

838 
	`exô
(1);

843 if–
fTheKî√l
 == "Prod" ){

844 
°d
::
°rög°ªam
 
	`ãmp°rög
(
fMu…iKî√ls
);

845 
°d
::
°rög
 
vÆue
;

846 
°d
::
	`gëlöe
(
ãmp°rög
,
vÆue
,'*')){

847 if(
vÆue
 == "RBF"){

848 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Gamma",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

850 if(
vÆue
 == "MultiGauss"){

851 
i
=0; i<
fNumV¨s
; i++){

852 
°rög°ªam
 
s
;

853 
s
 << 
fV¨Names
.
	`©
(
i
);

854 
°rög
 
°r
 = "Gamma_" + 
s
.
	`°r
();

855 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
°r
,
√w
 
	`I¡îvÆ
(0.01,1.,100)));

858 if(
vÆue
 == "Polynomial"){

859 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Ordî",
√w
 
	`I¡îvÆ
(1,10,10)));

860 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Thëa",
√w
 
	`I¡îvÆ
(0.0,1.0,101)));

863 
	`Log
(Ë<< 
kWARNING
 << 
vÆue
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

864 
	`exô
(1);

867 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("C",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

869 if–
fTheKî√l
 == "Sum" ){

870 
°d
::
°rög°ªam
 
	`ãmp°rög
(
fMu…iKî√ls
);

871 
°d
::
°rög
 
vÆue
;

872 
°d
::
	`gëlöe
(
ãmp°rög
,
vÆue
,'+')){

873 if(
vÆue
 == "RBF"){

874 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Gamma",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

876 if(
vÆue
 == "MultiGauss"){

877 
i
=0; i<
fNumV¨s
; i++){

878 
°rög°ªam
 
s
;

879 
s
 << 
fV¨Names
.
	`©
(
i
);

880 
°rög
 
°r
 = "Gamma_" + 
s
.
	`°r
();

881 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>(
°r
,
√w
 
	`I¡îvÆ
(0.01,1.,100)));

884 if(
vÆue
 == "Polynomial"){

885 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Ordî",
√w
 
	`I¡îvÆ
(1,10,10)));

886 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("Thëa",
√w
 
	`I¡îvÆ
(0.0,1.0,101)));

889 
	`Log
(Ë<< 
kWARNING
 << 
vÆue
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

890 
	`exô
(1);

893 
tu√P¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
I¡îvÆ
*>("C",
√w
 
	`I¡îvÆ
(0.01,1.,100)));

896 
	`Log
(Ë<< 
kWARNING
 << 
fTheKî√l
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

897 
	`exô
(1);

899 
	`Log
(Ë<< 
kINFO
 << "Åhêfﬁlowög SVMÖ¨amëî†wû»bêtu√d o¿thêª•e˘ivê*grid*\n" << 
Endl
;

900 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

901 
ô
=
tu√P¨amëîs
.
	`begö
(); it!Òu√P¨amëîs.
	`íd
(); it++){

902 
	`Log
(Ë<< 
kWARNING
 << 
ô
->
fú°
 <<
Endl
;

903 
°d
::
o°rög°ªam
 
oss
;

904 (
ô
->
£c⁄d
)->
	`Pröt
(
oss
);

905 
	`Log
()<<
oss
.
	`°r
();

906 
	`Log
()<<
Endl
;

908 
O±imizeC⁄figP¨amëîs
 
	`›timize
(
this
, 
tu√P¨amëîs
, 
fomTy≥
, 
fôTy≥
);

909 
tu√dP¨amëîs
=
›timize
.
	`›timize
();

911  
tu√dP¨amëîs
;

913 
	}
}

917 
	gTMVA
::
MëhodSVM
::
SëTu√P¨amëîs
(
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
tu√P¨amëîs
)

919 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
>::
ôî©‹
 
ô
;

920 if–
	gfTheKî√l
 == "RBF" ){

921 
ô
=
tu√P¨amëîs
.
begö
(); 
	gô
!Òu√P¨amëîs.
íd
(); it++){

922 
Log
(Ë<< 
	gkWARNING
 << 
	gô
->
	gfú°
 << " = " << it->
	g£c⁄d
 << 
	gEndl
;

923 i‡(
	gô
->
	gfú°
 == "Gamma"){

924 
SëGamma
 (
ô
->
£c⁄d
);

926 if(
	gô
->
	gfú°
 == "C"){

927 
SëCo°
 (
ô
->
£c⁄d
);

930 
Log
(Ë<< 
	gkFATAL
 << " SëP¨amëî f‹ " << 
	gô
->
	gfú°
 << "ÇŸ im∂emíãd " << 
	gEndl
;

934 if–
	gfTheKî√l
 == "MultiGauss" ){

935 
fmGamma
.
˛ór
();

936 
	gi
=0; i<
	gfNumV¨s
; i++){

937 
°rög°ªam
 
	gs
;

938 
	gs
 << 
	gfV¨Names
.
©
(
i
);

939 
°rög
 
	g°r
 = "Gamma_" + 
s
.
°r
();

940 
Log
(Ë<< 
	gkWARNING
 << 
	gtu√P¨amëîs
.
föd
(
°r
)->
	gfú°
 << " = " <<Åu√P¨amëîs.föd(°r)->
	g£c⁄d
 << 
	gEndl
;

941 
	gfmGamma
.
push_back
(
tu√P¨amëîs
.
föd
(
°r
)->
£c⁄d
);

943 
	gô
=
tu√P¨amëîs
.
begö
(); it!Òu√P¨amëîs.
íd
(); it++){

944 i‡(
	gô
->
	gfú°
 == "C"){

945 
Log
(Ë<< 
kWARNING
 << 
ô
->
fú°
 << " = " << it->
£c⁄d
 << 
Endl
;

946 
SëCo°
(
ô
->
£c⁄d
);

951 if–
	gfTheKî√l
 == "Polynomial" ){

952 
ô
=
tu√P¨amëîs
.
begö
(); 
	gô
!Òu√P¨amëîs.
íd
(); it++){

953 
Log
(Ë<< 
	gkWARNING
 << 
	gô
->
	gfú°
 << " = " << it->
	g£c⁄d
 << 
	gEndl
;

954 i‡(
	gô
->
	gfú°
 == "Order"){

955 
SëOrdî
(
ô
->
£c⁄d
);

957 i‡(
	gô
->
	gfú°
 == "Theta"){

958 
SëThëa
(
ô
->
£c⁄d
);

960 if(
	gô
->
	gfú°
 ="C"){ 
SëCo°
 (
ô
->
£c⁄d
);

962 if(
	gô
->
	gfú°
 == "Mult"){

963 
SëMu…
(
ô
->
£c⁄d
);

966 
Log
(Ë<< 
	gkFATAL
 << " SëP¨amëî f‹ " << 
	gô
->
	gfú°
 << "ÇŸ im∂emíãd " << 
	gEndl
;

970 if–
	gfTheKî√l
 ="Prod" || 
fTheKî√l
 == "Sum"){

971 
fmGamma
.
˛ór
();

972 
	gô
=
tu√P¨amëîs
.
begö
(); it!Òu√P¨amëîs.
íd
(); it++){

973 
boﬁ
 
	gfoundP¨am
 = 
Ál£
;

974 
Log
(Ë<< 
	gkWARNING
 << 
	gô
->
	gfú°
 << " = " << it->
	g£c⁄d
 << 
	gEndl
;

975 
	gi
=0; i<
	gfNumV¨s
; i++){

976 
°rög°ªam
 
	gs
;

977 
	gs
 << 
	gfV¨Names
.
©
(
i
);

978 
°rög
 
	g°r
 = "Gamma_" + 
s
.
°r
();

979 if(
	gô
->
	gfú°
 =
°r
){

980 
fmGamma
.
push_back
(
ô
->
£c⁄d
);

981 
	gfoundP¨am
 = 
åue
;

984 i‡(
	gô
->
	gfú°
 == "Gamma"){

985 
SëGamma
 (
ô
->
£c⁄d
);

986 
	gfoundP¨am
 = 
åue
;

988 i‡(
	gô
->
	gfú°
 == "Order"){

989 
SëOrdî
 (
ô
->
£c⁄d
);

990 
	gfoundP¨am
 = 
åue
;

992 i‡(
	gô
->
	gfú°
 == "Theta"){

993 
SëThëa
 (
ô
->
£c⁄d
);

994 
	gfoundP¨am
 = 
åue
;

996 i‡(
	gô
->
	gfú°
 ="C"){ 
SëCo°
 (
ô
->
£c⁄d
);

997 
SëCo°
 (
ô
->
£c⁄d
);

998 
	gfoundP¨am
 = 
åue
;

1001 if(!
	gfoundP¨am
){

1002 
Log
(Ë<< 
	gkFATAL
 << " SëP¨amëî f‹ " << 
	gô
->
	gfú°
 << "ÇŸ im∂emíãd " << 
	gEndl
;

1008 
Log
(Ë<< 
	gkWARNING
 << 
	gfTheKî√l
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
	gEndl
;

1009 
exô
(1);

1018 
	gTMVA
::
MëhodSVM
::
	$SëMGamma
(
°d
::
°rög
 & 
mg
){

1019 
°d
::
°rög°ªam
 
	`ãmp°rög
(
mg
);

1020 
Flﬂt_t
 
vÆue
;

1021 
ãmp°rög
 >> 
vÆue
){

1022 
fmGamma
.
	`push_back
(
vÆue
);

1024 i‡(
ãmp°rög
.
	`≥ek
() == ','){

1025 
ãmp°rög
.
	`ign‹e
();

1028 
	}
}

1032 
	gTMVA
::
MëhodSVM
::
GëMGamma
(c⁄° 
°d
::
ve˘‹
<> & 
gammas
){

1033 
°d
::
o°rög°ªam
 
ãmp°rög
;

1034 
UI¡_t
 
	gi
 = 0; i<
	ggammas
.
size
(); ++i){

1035 
	gãmp°rög
 << 
	ggammas
.
©
(
i
);

1036 if(
	gi
!=(
gammas
.
size
()-1)){

1037 
ãmp°rög
 << ",";

1040 
	gfGammaLi°

ãmp°rög
.
°r
();

1054 
	g°d
::
ve˘‹
<
TMVA
::
SVKî√lFun˘i⁄
::
EKî√lTy≥
> TMVA::
MëhodSVM
::
	$MakeKî√lLi°
(
°d
::
°rög
 
mu…iKî√ls
, 
TSåög
 
kî√l
)

1056 
°d
::
ve˘‹
<
TMVA
::
SVKî√lFun˘i⁄
::
EKî√lTy≥
> 
kî√lsLi°
;

1057 
°d
::
°rög°ªam
 
	`ãmp°rög
(
mu…iKî√ls
);

1058 
°d
::
°rög
 
vÆue
;

1059 if(
kî√l
=="Prod"){

1060 
°d
::
	`gëlöe
(
ãmp°rög
,
vÆue
,'*')){

1061 if(
vÆue
 ="RBF"){ 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kRBF
);}

1062 if(
vÆue
 == "MultiGauss"){

1063 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kMu…iGauss
);

1064 if(
fGammas
!=""){

1065 
	`SëMGamma
(
fGammas
);

1068 if(
vÆue
 ="Pﬁynomül"){ 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kPﬁynomül
);}

1070 
	`Log
(Ë<< 
kWARNING
 << 
vÆue
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

1071 
	`exô
(1);

1075 if(
kî√l
=="Sum"){

1076 
°d
::
	`gëlöe
(
ãmp°rög
,
vÆue
,'+')){

1077 if(
vÆue
 ="RBF"){ 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kRBF
);}

1078 if(
vÆue
 == "MultiGauss"){

1079 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kMu…iGauss
);

1080 if(
fGammas
!=""){

1081 
	`SëMGamma
(
fGammas
);

1084 if(
vÆue
 ="Pﬁynomül"){ 
kî√lsLi°
.
	`push_back
(
SVKî√lFun˘i⁄
::
kPﬁynomül
);}

1086 
	`Log
(Ë<< 
kWARNING
 << 
vÆue
 << " i†nŸáÑecogni£d kî√»fun˘i⁄." << 
Endl
;

1087 
	`exô
(1);

1092 
	`Log
(Ë<< 
kWARNING
 << "U«bÀÅÿ•lô Mu…iKî√ls. Dñimôî†*/+Ñequúed." << 
Endl
;

1093 
	`exô
(1);

1095  
kî√lsLi°
;

1096 
	}
}

1106 
	g°d
::
m≠
< 
TSåög
,°d::
ve˘‹
<
DoubÀ_t
> > 
TMVA
::
MëhodSVM
::
	$GëTunögO±i⁄s
()

1108 
°d
::
m≠
< 
TSåög
,°d::
ve˘‹
<
DoubÀ_t
> > 
›tV¨s
;

1109 
°d
::
°rög°ªam
 
	`ãmp°rög
(
fTu√
);

1110 
°d
::
°rög
 
vÆue
;

1111 
°d
::
	`gëlöe
(
ãmp°rög
,
vÆue
,',')){

1112 
fú°
 = 
vÆue
.
	`föd
('[')+1;

1113 
œ°
 = 
vÆue
.
	`föd_œ°_of
(']');

1114 
°d
::
°rög
 
›tP¨am
 = 
vÆue
.
	`sub°r
(0,
fú°
-1);

1115 
°d
::
°rög°ªam
 
	`°rNew
 (
vÆue
.
	`sub°r
(
fú°
,
œ°
-first));

1116 
DoubÀ_t
 
›tI¡îvÆ
;

1117 
°d
::
ve˘‹
<
DoubÀ_t
> 
ãmpVec
;

1118 
UI¡_t
 
i
 = 0;

1119 
°rNew
 >> 
›tI¡îvÆ
){

1120 
ãmpVec
.
	`push_back
(
›tI¡îvÆ
);

1121 i‡(
°rNew
.
	`≥ek
() == ';'){

1122 
°rNew
.
	`ign‹e
();

1124 ++
i
;

1126 if(
i
 !3 && i =
ãmpVec
.
	`size
()){

1127 if(
›tP¨am
 == "C" || optParam == "Gamma" || optParam == "GammaList" || optParam == "Theta"){

1128 
i
){

1130 
ãmpVec
.
	`push_back
(0.01);

1132 
ãmpVec
.
	`push_back
(1.);

1134 
ãmpVec
.
	`push_back
(100);

1137 if(
›tP¨am
 == "Order"){

1138 
i
){

1140 
ãmpVec
.
	`push_back
(1);

1142 
ãmpVec
.
	`push_back
(10);

1144 
ãmpVec
.
	`push_back
(10);

1148 
	`Log
(Ë<< 
kWARNING
 << 
›tP¨am
 << " i†nŸáÑecogni£dÅu√abÀÖ¨amëî." << 
Endl
;

1149 
	`exô
(1);

1152 
›tV¨s
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,°d::
ve˘‹
<
DoubÀ_t
> >(
›tP¨am
,
ãmpVec
));

1154  
›tV¨s
;

1155 
	}
}

1163 
DoubÀ_t
 
	gTMVA
::
MëhodSVM
::
	$gëLoss
(
TSåög
 
lossFun˘i⁄
){

1164 
DoubÀ_t
 
loss
 = 0.0;

1165 
DoubÀ_t
 
sumW
 = 0.0;

1166 
DoubÀ_t
 
ãmp
 = 0.0;

1167 
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

1168 
Resu…sCœssifiˇti⁄
* 
mvaRes
 = 
dy«mic_ˇ°
<Resu…sCœssifiˇti⁄*> ( 
	`D©a
()->
	`GëResu…s
(
	`GëMëhodName
(),
Ty≥s
::
kTe°ög
, Ty≥s::
kCœssifiˇti⁄
) );

1169 
L⁄g64_t
 
õvt
=0; ievt<
	`GëNEvíts
(); ievt++) {

1170 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
(
õvt
);

1171 
Flﬂt_t
 
v
 = (*
mvaRes
)[
õvt
][0];

1172 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

1173 if(
	`D©aInfo
().
	`IsSig«l
(
ev
)){

1174 if(
lossFun˘i⁄
 == "hinge"){

1175 
ãmp
 +
w
*(1-
v
);

1177 if(
lossFun˘i⁄
 == "exp"){

1178 
ãmp
 +
w
*
TM©h
::
	`Exp
(-
v
);

1180 if(
lossFun˘i⁄
 == "binomial"){

1181 
ãmp
 +
w
*
TM©h
::
	`Log
(1+TM©h::
	`Exp
(-2*
v
));

1184 
	`Log
(Ë<< 
kWARNING
 << 
lossFun˘i⁄
 << " i†nŸáÑecogni£dÜos†fun˘i⁄." << 
Endl
;

1185 
	`exô
(1);

1189 if(
lossFun˘i⁄
 == "hinge"){

1190 
ãmp
 +
w
*
v
;

1192 if(
lossFun˘i⁄
 == "exp"){

1193 
ãmp
 +
w
*
TM©h
::
	`Exp
(-(1-
v
));

1195 if(
lossFun˘i⁄
 == "binomial"){

1196 
ãmp
 +
w
*
TM©h
::
	`Log
(1+TM©h::
	`Exp
(-2*(1-
v
)));

1199 
	`Log
(Ë<< 
kWARNING
 << 
lossFun˘i⁄
 << " i†nŸáÑecogni£dÜos†fun˘i⁄." << 
Endl
;

1200 
	`exô
(1);

1203 
sumW
 +
w
;

1205 
loss
 = 
ãmp
/
sumW
;

1207  
loss
;

1208 
	}
}

	@src/MethodTMlpANN.cxx

46 
	~"TMVA/MëhodTMÕANN.h
"

48 
	~"TMVA/C⁄fig.h
"

49 
	~"TMVA/C⁄figuøbÀ.h
"

50 
	~"TMVA/D©aSë.h
"

51 
	~"TMVA/D©aSëInfo.h
"

52 
	~"TMVA/IMëhod.h
"

53 
	~"TMVA/MëhodBa£.h
"

54 
	~"TMVA/MsgLoggî.h
"

55 
	~"TMVA/Ty≥s.h
"

56 
	~"TMVA/V¨übÀInfo.h
"

58 
	~"TMVA/CœssifõrFa˘‹y.h
"

59 
	~"TMVA/Toﬁs.h
"

61 
	~"Rio°ªam.h
"

62 
	~"TLóf.h
"

63 
	~"TEvítLi°.h
"

64 
	~"TObjSåög.h
"

65 
	~"TROOT.h
"

66 
	~"TMu…iLayîPî˚±r⁄.h
"

68 
	~<c°dlib
>

69 
	~<io°ªam
>

70 
	~<f°ªam
>

73 
usög
 
	g°d
::
©oi
;

76 c⁄° 
Boﬁ_t
 
	gEnf‹˚N‹mÆiz©i⁄__
=
kTRUE
;

77 #i‡
ROOT_VERSION_CODE
 > 
ROOT_VERSION
(5,13,06)

84 
	$REGISTER_METHOD
(
TMÕANN
)

86 
	`CœssImp
(
TMVA
::
MëhodTMÕANN
);

91 
TMVA
::
MëhodTMÕANN
::
	$MëhodTMÕANN
–c⁄° 
TSåög
& 
jobName
,

92 c⁄° 
TSåög
& 
mëhodTôÀ
,

93 
D©aSëInfo
& 
theD©a
,

94 c⁄° 
TSåög
& 
theO±i⁄
) :

95 
TMVA
::
	`MëhodBa£
–
jobName
, 
Ty≥s
::
kTMÕANN
, 
mëhodTôÀ
, 
theD©a
, 
theO±i⁄
),

96 
	`fMLP
(0),

97 
	`fLoˇlTøöögTªe
(0),

98 
	`fNcy˛es
(100),

99 
	`fVÆid©i⁄Fø˘i⁄
(0.5),

100 
	`fLó∫ögMëhod
( "" )

102 
	}
}

107 
	gTMVA
::
MëhodTMÕANN
::
	$MëhodTMÕANN
–
D©aSëInfo
& 
theD©a
,

108 c⁄° 
TSåög
& 
theWeightFûe
) :

109 
TMVA
::
	`MëhodBa£
–
Ty≥s
::
kTMÕANN
, 
theD©a
, 
theWeightFûe
),

110 
	`fMLP
(0),

111 
	`fLoˇlTøöögTªe
(0),

112 
	`fNcy˛es
(100),

113 
	`fVÆid©i⁄Fø˘i⁄
(0.5),

114 
	`fLó∫ögMëhod
( "" )

116 
	}
}

121 
Boﬁ_t
 
	gTMVA
::
MëhodTMÕANN
::
	$HasA«lysisTy≥
–
Ty≥s
::
EA«lysisTy≥
 
ty≥
, 
UI¡_t
 
numbîCœs£s
,

122 
UI¡_t
 )

124 i‡(
ty≥
 =
Ty≥s
::
kCœssifiˇti⁄
 && 
numbîCœs£s
 =2Ë 
kTRUE
;

125  
kFALSE
;

126 
	}
}

132 
	gTMVA
::
MëhodTMÕANN
::
	$Inô
( )

134 
	}
}

139 
TMVA
::
MëhodTMÕANN
::~
	$MëhodTMÕANN
( )

141 i‡(
fMLP
Ë
dñëe
 fMLP;

142 
	}
}

147 
	gTMVA
::
MëhodTMÕANN
::
	$Cª©eMLPO±i⁄s
–
TSåög
 
œyîS≥c
 )

149 
fHiddíLayî
 = ":";

151 
œyîS≥c
.
	`Lígth
()>0) {

152 
TSåög
 
sToAdd
="";

153 i‡(
œyîS≥c
.
	`Fú°
(',')<0) {

154 
sToAdd
 = 
œyîS≥c
;

155 
œyîS≥c
 = "";

158 
sToAdd
 = 
	`œyîS≥c
(0,
œyîS≥c
.
	`Fú°
(','));

159 
œyîS≥c
 = 
	`œyîS≥c
÷ayîS≥c.
	`Fú°
(',')+1,œyîS≥c.
	`Lígth
());

161 
nNodes
 = 0;

162 i‡(
sToAdd
.
	`BegösWôh
("N")Ë{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`GëNv¨
(); }

163 
nNodes
 +
	`©oi
(
sToAdd
);

164 
fHiddíLayî
 = 
	`F‹m
–"%s%i:", (c⁄° *)fHiddíLayî, 
nNodes
 );

168 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ôrV¨
 = (*
fI≈utV¨s
).
	`begö
();

169 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ôrV¨End
 = (*
fI≈utV¨s
).
	`íd
();

170 
fMLPBuûdO±i⁄s
 = "";

171 ; 
ôrV¨
 !
ôrV¨End
; itrVar++) {

172 i‡(
Enf‹˚N‹mÆiz©i⁄__
Ë
fMLPBuûdO±i⁄s
 += "@";

173 
TSåög
 
myV¨
 = *
ôrV¨
; ;

174 
fMLPBuûdO±i⁄s
 +
myV¨
;

175 
fMLPBuûdO±i⁄s
 += ",";

177 
fMLPBuûdO±i⁄s
.
	`Ch›
();

180 
fMLPBuûdO±i⁄s
 +
fHiddíLayî
;

181 
fMLPBuûdO±i⁄s
 += "type";

183 
	`Log
(Ë<< 
kINFO
 << "U£ " << 
fNcy˛es
 << "Åøöög cy˛es" << 
Endl
;

184 
	`Log
(Ë<< 
kINFO
 << "U£ c⁄figuøti⁄ (node†≥∏hiddíÜayî): " << 
fHiddíLayî
 << 
Endl
;

185 
	}
}

202 
	gTMVA
::
MëhodTMÕANN
::
	$De˛¨eO±i⁄s
()

204 
	`De˛¨eO±i⁄Ref
–
fNcy˛es
 = 200, "NCycles", "Number ofÅraining cycles" );

205 
	`De˛¨eO±i⁄Ref
–
fLayîS≥c
 = "N,N-1", "HiddenLayers", "Specification of hiddenÜayerárchitecture (N stands forÇumber of variables;ány integers mayálso be used)" );

207 
	`De˛¨eO±i⁄Ref
–
fVÆid©i⁄Fø˘i⁄
 = 0.5, "ValidationFraction",

210 
	`De˛¨eO±i⁄Ref
–
fLó∫ögMëhod
 = "Stochastic", "LearningMethod", "Learning method" );

211 
	`AddPªDefVÆ
–
	`TSåög
("Stochastic") );

212 
	`AddPªDefVÆ
–
	`TSåög
("Batch") );

213 
	`AddPªDefVÆ
–
	`TSåög
("SteepestDescent") );

214 
	`AddPªDefVÆ
–
	`TSåög
("RibierePolak") );

215 
	`AddPªDefVÆ
–
	`TSåög
("FletcherReeves") );

216 
	`AddPªDefVÆ
–
	`TSåög
("BFGS") );

217 
	}
}

222 
	gTMVA
::
MëhodTMÕANN
::
	$Pro˚ssO±i⁄s
()

224 
	`Cª©eMLPO±i⁄s
(
fLayîS≥c
);

226 i‡(
	`Ign‹eEvítsWôhNegWeightsInTøöög
()) {

227 
	`Log
(Ë<< 
kFATAL
 << "MechanismÅo ignoreÉvents withÇegative weights inÅrainingÇotávailable for method"

228 << 
	`GëMëhodTy≥Name
()

230 << 
Endl
;

232 
	}
}

237 
DoubÀ_t
 
	gTMVA
::
MëhodTMÕANN
::
	$GëMvaVÆue
–
DoubÀ_t
* 
îr
, DoubÀ_t* 
îrUµî
 )

239 c⁄° 
Evít
* 
ev
 = 
	`GëEvít
();

240 
	`TTHREAD_TLS_DECL_ARG
(
DoubÀ_t
*, 
d
, 
√w
 DoubÀ_t[
	`D©a
()->
	`GëNV¨übÀs
()]);

242 
UI¡_t
 
iv¨
 = 0; iv¨<
	`D©a
()->
	`GëNV¨übÀs
(); ivar++) {

243 
d
[
iv¨
] = (
DoubÀ_t
)
ev
->
	`GëVÆue
(ivar);

245 
DoubÀ_t
 
mvaVÆ
 = 
fMLP
->
	`EvÆu©e
(0,
d
);

248 
	`NoEº‹CÆc
(
îr
, 
îrUµî
);

250  
mvaVÆ
;

251 
	}
}

267 
	gTMVA
::
MëhodTMÕANN
::
	$Tøö
( )

269 
I¡_t
 
ty≥
;

270 
Flﬂt_t
 
weight
;

271 c⁄° 
L⁄g_t
 
baskësize
 = 128000;

272 
Flﬂt_t
* 
vAº
 = 
√w
 Flﬂt_t[
	`GëNv¨
()];

274 
TTªe
 *
loˇlTøöögTªe
 = 
√w
 
	`TTªe
( "TMLPtrain", "LocalÅrainingÅree for TMlpANN" );

275 
loˇlTøöögTªe
->
	`Bønch
–"ty≥", &
ty≥
, "ty≥/I", 
baskësize
 );

276 
loˇlTøöögTªe
->
	`Bønch
–"weight", &
weight
, "weight/F", 
baskësize
 );

278 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNv¨
(); ivar++) {

279 c⁄° * 
myV¨
 = 
	`GëI¡î«lV¨Name
(
iv¨
).
	`D©a
();

280 
loˇlTøöögTªe
->
	`Bønch
–
myV¨
, &
vAº
[
iv¨
], 
	`F‹m
("V¨%02i/F", iv¨), 
baskësize
 );

283 
UI¡_t
 
õvt
=0; ievt<
	`D©a
()->
	`GëNEvíts
(); ievt++) {

284 c⁄° 
Evít
 *
ev
 = 
	`GëEvít
(
õvt
);

285 
UI¡_t
 
i
=0; i<
	`GëNv¨
(); i++) {

286 
vAº
[
i
] = 
ev
->
	`GëVÆue
( i );

288 
ty≥
 = 
	`D©aInfo
().
	`IsSig«l
–
ev
 ) ? 1 : 0;

289 
weight
 = 
ev
->
	`GëWeight
();

290 
loˇlTøöögTªe
->
	`Fûl
();

297 
TSåög
 
åaöLi°
 = "Entry$<";

298 
åaöLi°
 +1.0-
fVÆid©i⁄Fø˘i⁄
;

299 
åaöLi°
 += "*";

300 
åaöLi°
 +(
I¡_t
)
	`D©a
()->
	`GëNEvtSigTøö
();

301 
åaöLi°
 += " || (Entry$>";

302 
åaöLi°
 +(
I¡_t
)
	`D©a
()->
	`GëNEvtSigTøö
();

303 
åaöLi°
 += " && Entry$<";

304 
åaöLi°
 +(
I¡_t
)(
	`D©a
()->
	`GëNEvtSigTøö
(Ë+ (1.0 - 
fVÆid©i⁄Fø˘i⁄
)*D©a()->
	`GëNEvtBkgdTøö
());

305 
åaöLi°
 += ")";

306 
TSåög
 
ã°Li°
 = 
	`TSåög
("!("Ë+ 
åaöLi°
 + ")";

309 
	`Log
(Ë<< 
kHEADER
 << "Requúemíàf‹ÅøöögÉvíts: \"" << 
åaöLi°
 << "\"" << 
Endl
;

310 
	`Log
(Ë<< 
kINFO
 << "Requúemíàf‹ vÆid©i⁄Évíts: \"" << 
ã°Li°
 << "\"" << 
Endl
;

315 i‡(
fMLP
 !0Ë{ 
dñëe
 fMLP; fMLP = 0; }

316 
fMLP
 = 
√w
 
	`TMu…iLayîPî˚±r⁄
–
fMLPBuûdO±i⁄s
.
	`D©a
(),

317 
loˇlTøöögTªe
,

318 
åaöLi°
,

319 
ã°Li°
 );

320 
fMLP
->
	`SëEvítWeight
( "weight" );

323 #i‡
ROOT_VERSION_CODE
 > 
	`ROOT_VERSION
(5,13,06)

324 
TMu…iLayîPî˚±r⁄
::
ELó∫ögMëhod
 
À¨nögMëhod
 = TMu…iLayîPî˚±r⁄::
kStocha°ic
;

326 
TMu…iLayîPî˚±r⁄
::
Ló∫ögMëhod
 
À¨nögMëhod
 = TMu…iLayîPî˚±r⁄::
kStocha°ic
;

329 
fLó∫ögMëhod
.
	`ToLowî
();

330 i‡(
fLó∫ögMëhod
 ="°ocha°ic" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kStocha°ic
;

331 i‡(
fLó∫ögMëhod
 ="b©ch" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kB©ch
;

332 i‡(
fLó∫ögMëhod
 ="°ì≥°des˚¡" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kSãïe°Des˚¡
;

333 i‡(
fLó∫ögMëhod
 ="ribõªpﬁak" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kRibõªPﬁak
;

334 i‡(
fLó∫ögMëhod
 ="Êëchîªeves" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kFÀtchîRìves
;

335 i‡(
fLó∫ögMëhod
 ="bfgs" ) 
À¨nögMëhod
 = 
TMu…iLayîPî˚±r⁄
::
kBFGS
;

337 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿Ló∫ög Mëhod: \"" << 
fLó∫ögMëhod
 << "\"" << 
Endl
;

339 
fMLP
->
	`SëLó∫ögMëhod
–
À¨nögMëhod
 );

342 
fMLP
->
	`Tøö
(
fNcy˛es
, "" );

346 
dñëe
 
loˇlTøöögTªe
;

347 
dñëe
 [] 
vAº
;

348 
	}
}

353 
	gTMVA
::
MëhodTMÕANN
::
	$AddWeightsXMLTo
–* 
∑ª¡
 ) const

356 *
wght
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Weights");

357 * 
¨ch
 = 
	`gToﬁs
().
	`AddChûd
–
wght
, "Architecture" );

358 
	`gToﬁs
().
	`AddAâr
–
¨ch
, "BuûdO±i⁄s", 
fMLPBuûdO±i⁄s
.
	`D©a
() );

361 c⁄° 
TSåög
 
tmpfûe
=
	`GëWeightFûeDú
()+"/TMlp.nn.weights.temp";

362 
fMLP
->
	`DumpWeights
–
tmpfûe
.
	`D©a
() );

363 
°d
::
if°ªam
 
	`öf
–
tmpfûe
.
	`D©a
() );

364 
ãmp
[256];

365 
TSåög
 
	`d©a
("");

366 *
ch
=
NULL
;

367 
öf
.
	`gëlöe
(
ãmp
,256)) {

368 
TSåög
 
	`dummy
(
ãmp
);

370 i‡(
dummy
.
	`BegösWôh
('#')) {

371 i‡(
ch
!=0Ë
	`gToﬁs
().
	`AddRawLöe
–ch, 
d©a
.
	`D©a
() );

372 
dummy
 = dummy.
	`Såù
(
TSåög
::
kLódög
, '#');

373 
dummy
 = 
	`dummy
(0,dummy.
	`Fú°
(' '));

374 
ch
 = 
	`gToﬁs
().
	`AddChûd
(
wght
, 
dummy
);

375 
d©a
.
	`Resize
(0);

378 
d©a
 +(
dummy
 + " ");

380 i‡(
ch
 !0Ë
	`gToﬁs
().
	`AddRawLöe
–ch, 
d©a
.
	`D©a
() );

382 
öf
.
	`˛o£
();

383 
	}
}

389 
	gTMVA
::
MëhodTMÕANN
::
	$RódWeightsFromXML
–* 
wghäode
 )

391 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
wghäode
);

392 
	`gToﬁs
().
	`RódAâr
–
ch
, "BuûdO±i⁄s", 
fMLPBuûdO±i⁄s
 );

394 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

395 c⁄° 
TSåög
 
‚ame
 = 
	`GëWeightFûeDú
()+"/TMlp.nn.weights.temp";

396 
°d
::
of°ªam
 
	`fout
–
‚ame
.
	`D©a
() );

397 
ãmp1
=0,
ãmp2
=0;

398 
ch
) {

399 c⁄° * 
nodec⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
ch
);

400 
°d
::
°rög°ªam
 
	`c⁄ã¡
(
nodec⁄ã¡
);

401 i‡(
	`°rcmp
(
	`gToﬁs
().
	`GëName
(
ch
),"input")==0) {

402 
fout
 << "#öpuàn‹mÆiz©i⁄" << 
°d
::
ídl
;

403 (
c⁄ã¡
 >> 
ãmp1
Ë&&(c⁄ã¡ >> 
ãmp2
)) {

404 
fout
 << 
ãmp1
 << " " << 
ãmp2
 << 
°d
::
ídl
;

407 i‡(
	`°rcmp
(
	`gToﬁs
().
	`GëName
(
ch
),"output")==0) {

408 
fout
 << "#ouçuàn‹mÆiz©i⁄" << 
°d
::
ídl
;

409 (
c⁄ã¡
 >> 
ãmp1
Ë&&(c⁄ã¡ >> 
ãmp2
)) {

410 
fout
 << 
ãmp1
 << " " << 
ãmp2
 << 
°d
::
ídl
;

413 i‡(
	`°rcmp
(
	`gToﬁs
().
	`GëName
(
ch
),"neurons")==0) {

414 
fout
 << "#√ur⁄†weights" << 
°d
::
ídl
;

415 
c⁄ã¡
 >> 
ãmp1
) {

416 
fout
 << 
ãmp1
 << 
°d
::
ídl
;

419 i‡(
	`°rcmp
(
	`gToﬁs
().
	`GëName
(
ch
),"synapses")==0) {

420 
fout
 << "#synapses weights" ;

421 
c⁄ã¡
 >> 
ãmp1
) {

422 
fout
 << 
°d
::
ídl
 << 
ãmp1
 ;

425 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

427 
fout
.
	`˛o£
();;

431 
	`TTHREAD_TLS_DECL_ARG
(
DoubÀ_t
*, 
d
, 
√w
 DoubÀ_t[
	`D©a
()->
	`GëNV¨übÀs
()]);

432 
	`TTHREAD_TLS
(
I¡_t
Ë
ty≥
;

434 
gROOT
->
	`cd
();

435 
TTªe
 * 
dummyTªe
 = 
√w
 
	`TTªe
("dummy","Empty dummyÅree", 1);

436 
UI¡_t
 
iv¨
 = 0; iv¨<
	`D©a
()->
	`GëNV¨übÀs
(); ivar++) {

437 
TSåög
 
vn
 = 
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëI¡î«lName
();

438 
dummyTªe
->
	`Bønch
(
	`F‹m
("%s",
vn
.
	`D©a
()), 
d
+
iv¨
, Form("%s/D",vn.Data()));

440 
dummyTªe
->
	`Bønch
("ty≥", &
ty≥
, "type/I");

442 i‡(
fMLP
 !0Ë{ 
dñëe
 fMLP; fMLP = 0; }

443 
fMLP
 = 
√w
 
	`TMu…iLayîPî˚±r⁄
–
fMLPBuûdO±i⁄s
.
	`D©a
(), 
dummyTªe
 );

444 
fMLP
->
	`LﬂdWeights
–
‚ame
 );

445 
	}
}

452 
	gTMVA
::
MëhodTMÕANN
::
	$RódWeightsFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

454 
°d
::
of°ªam
 
	`fout
( "./TMlp.nn.weights.temp" );

455 
fout
 << 
i°r
.
	`rdbuf
();

456 
fout
.
	`˛o£
();

459 
	`Log
(Ë<< 
kINFO
 << "Lﬂd TMLP weight†ötÿ" << 
fMLP
 << 
Endl
;

461 
DoubÀ_t
* 
d
 = 
√w
 DoubÀ_t[
	`D©a
()->
	`GëNV¨übÀs
()] ;

462 
I¡_t
 
ty≥
;

463 
gROOT
->
	`cd
();

464 
TTªe
 * 
dummyTªe
 = 
√w
 
	`TTªe
("dummy","Empty dummyÅree", 1);

465 
UI¡_t
 
iv¨
 = 0; iv¨<
	`D©a
()->
	`GëNV¨übÀs
(); ivar++) {

466 
TSåög
 
vn
 = 
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëLabñ
();

467 
dummyTªe
->
	`Bønch
(
	`F‹m
("%s",
vn
.
	`D©a
()), 
d
+
iv¨
, Form("%s/D",vn.Data()));

469 
dummyTªe
->
	`Bønch
("ty≥", &
ty≥
, "type/I");

471 i‡(
fMLP
 !0Ë{ 
dñëe
 fMLP; fMLP = 0; }

472 
fMLP
 = 
√w
 
	`TMu…iLayîPî˚±r⁄
–
fMLPBuûdO±i⁄s
.
	`D©a
(), 
dummyTªe
 );

474 
fMLP
->
	`LﬂdWeights
( "./TMlp.nn.weights.temp" );

477 
dñëe
 [] 
d
;

478 
	}
}

484 
	gTMVA
::
MëhodTMÕANN
::
	$MakeCœss
–c⁄° 
TSåög
& 
theCœssFûeName
 ) const

487 
TSåög
 
˛assFûeName
 = "";

488 i‡(
theCœssFûeName
 == "")

489 
˛assFûeName
 = 
	`GëWeightFûeDú
(Ë+ "/" + 
	`GëJobName
(Ë+ "_" + 
	`GëMëhodName
() + ".class";

491 
˛assFûeName
 = 
theCœssFûeName
;

493 
˛assFûeName
.
	`Rïœ˚AŒ
(".class","");

494 
	`Log
(Ë<< 
kINFO
 << "Cª©ög s≥cifi¯(TMu…iLayîPî˚±r⁄Ë°™dÆ⁄êª•⁄£ cœss: " << 
˛assFûeName
 << 
Endl
;

495 
fMLP
->
	`Exp‹t
–
˛assFûeName
.
	`D©a
() );

496 
	}
}

502 
	gTMVA
::
MëhodTMÕANN
::
	$MakeCœssS≥cific
–
°d
::
o°ªam
& , c⁄° 
TSåög
& ) const

504 
	}
}

512 
	gTMVA
::
MëhodTMÕANN
::
	$GëHñpMesßge
() const

514 
	`Log
(Ë<< 
Endl
;

515 
	`Log
(Ë<< 
	`gToﬁs
().
	`Cﬁ‹
("bﬁd"Ë<< "--- Sh‹àdes¸ùti⁄:" << gToﬁs().Cﬁ‹("ª£t"Ë<< 
Endl
;

516 
	`Log
(Ë<< 
Endl
;

517 
	`Log
(Ë<< "Thi†„ed-f‹w¨d mu…ûayîÖî˚±r⁄Çeuø»√tw‹k i†thê" << 
Endl
;

518 
	`Log
(Ë<< "°™d¨d im∂emíèti⁄ di°ribuãd wôh ROOT (˛as†TMu…iLayîPî˚±r⁄)." << 
Endl
;

519 
	`Log
(Ë<< 
Endl
;

520 
	`Log
(Ë<< "Dëaûed inf‹m©i⁄ i†avaûabÀ hîe:" << 
Endl
;

521 i‡(
	`gC⁄fig
().
	`WrôeO±i⁄sRe„ªn˚
()) {

522 
	`Log
() << "<a href=\"http://root.cern.ch/root/html/TMultiLayerPerceptron.html\">";

523 
	`Log
(Ë<< "hâp://roŸ.˚∫.ch/roŸ/html/TMu…iLayîPî˚±r⁄.html</a>" << 
Endl
;

525 
	`Log
(Ë<< "hâp://roŸ.˚∫.ch/roŸ/html/TMu…iLayîPî˚±r⁄.html" << 
Endl
;

526 
	`Log
(Ë<< 
Endl
;

527 
	}
}

	@src/MinuitFitter.cxx

29 
	~"TMVA/MöuôFôãr.h
"

31 
	~"TMVA/C⁄figuøbÀ.h
"

32 
	~"TMVA/FôãrBa£.h
"

33 
	~"TMVA/IFôãrT¨gë.h
"

34 
	~"TMVA/I¡îvÆ.h
"

35 
	~"TMVA/MöuôWøµî.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/Timî.h
"

38 
	~"TMVA/Ty≥s.h
"

40 
	~"TFôãr.h
"

42 
CœssImp
(
TMVA
::
MöuôFôãr
);

47 
	gTMVA
::
MöuôFôãr
::MöuôFôãr–
IFôãrT¨gë
& 
èrgë
,

48 c⁄° 
TSåög
& 
«me
,

49 
°d
::
ve˘‹
<
TMVA
::
I¡îvÆ
*>& 
ønges
,

50 c⁄° 
TSåög
& 
theO±i⁄
 )

51 : 
TMVA
::
FôãrBa£
–
èrgë
, 
«me
, 
ønges
, 
theO±i⁄
 ),

52 
	gTMVA
::
	$IFôãrT¨gë
( )

55 
	`De˛¨eO±i⁄s
();

56 
	`P¨£O±i⁄s
();

58 
	`Inô
();

59 
	}
}

64 
	gTMVA
::
MöuôFôãr
::~
	$MöuôFôãr
( )

66 
dñëe
 
fMöWøp
;

67 
	}
}

72 
	gTMVA
::
MöuôFôãr
::
	$De˛¨eO±i⁄s
()

74 
	`De˛¨eO±i⁄Ref
(
fEº‹Levñ
 = 1, "ErrorLevel", "TMinuit:ÉrrorÜevel: 0.5=logL fit, 1=chi-squared fit" );

75 
	`De˛¨eO±i⁄Ref
(
fPrötLevñ
 = -1, "PrintLevel", "TMinuit: outputÜevel: -1=least, 0, +1=all garbage" );

76 
	`De˛¨eO±i⁄Ref
(
fFôSå©egy
 = 2, "FitStrategy", "TMinuit: fit strategy: 2=best" );

77 
	`De˛¨eO±i⁄Ref
(
fPrötW¨nögs
 = 
kFALSE
, "PrintWarnings", "TMinuit: suppress warnings" );

78 
	`De˛¨eO±i⁄Ref
(
fU£Im¥ove
 = 
kTRUE
, "UseImprove", "TMinuit: use IMPROVE" );

79 
	`De˛¨eO±i⁄Ref
(
fU£Möos
 = 
kTRUE
, "UseMinos", "TMinuit: use MINOS" );

80 
	`De˛¨eO±i⁄Ref
(
fB©ch
 = 
kFALSE
, "SetBatch", "TMinuit: use batch mode" );

81 
	`De˛¨eO±i⁄Ref
(
fMaxCÆls
 = 1000, "MaxCalls", "TMinuit:ápproximate maximumÇumber of function calls" );

82 
	`De˛¨eO±i⁄Ref
(
fTﬁî™˚
 = 0.1, "Tolerance", "TMinuit:ÅoleranceÅoÅhe function valueátÅhe minimum" );

83 
	}
}

88 
	gTMVA
::
MöuôFôãr
::
	$Inô
()

90 
DoubÀ_t
 
¨gs
[10];

93 i‡(!
fB©ch
Ë
	`Log
(Ë<< 
kINFO
 << "<MöuôFôãr> Inô " << 
Endl
;

96 
Timî
 
timî
;

103 
fMöWøp
 = 
√w
 
	`MöuôWøµî
–
fFôãrT¨gë
, 2*
	`GëN∑rs
() );

106 
¨gs
[0] = 
fPrötLevñ
;

107 
fMöWøp
->
	`ExecuãComm™d
–"SET PRINTOUT", 
¨gs
, 1 );

109 i‡(
fB©ch
Ë
fMöWøp
->
	`ExecuãComm™d
–"SET BAT", 
¨gs
, 0 );

112 
fMöWøp
->
	`CÀ¨
();

115 
¨gs
[0] = 
fEº‹Levñ
;

116 
fMöWøp
->
	`ExecuãComm™d
–"SET ERR", 
¨gs
, 1 );

119 i‡(!
fPrötW¨nögs
Ë
fMöWøp
->
	`ExecuãComm™d
–"SET NOWARNINGS", 
¨gs
, 0 );

122 
¨gs
[0] = 
fFôSå©egy
;

123 
fMöWøp
->
	`ExecuãComm™d
–"SET STRATEGY", 
¨gs
, 1 );

124 
	}
}

129 
DoubÀ_t
 
	gTMVA
::
MöuôFôãr
::
Run
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

132 
DoubÀ_t
 
¨gs
[10];

135 i‡–!
	gfB©ch
 ) 
Log
(Ë<< 
	gkINFO
 << "<MöuôFôãr> Fôtög,ÖÀa£ bê∑tõ¡ ... " << 
	gEndl
;

138 i‡((
	gI¡_t
)
	g∑rs
.
size
(Ë!
GëN∑rs
())

139 
Log
(Ë<< 
kFATAL
 << "<Run> Mismatch inÇumber ofÖarameters: (a)"

140 << 
GëN∑rs
(Ë<< " !" << 
∑rs
.
size
(Ë<< 
Endl
;

143 
Timî
* 
	gtimî
 = 0;

144 i‡(!
	gfB©ch
Ë
	gtimî
 = 
√w
 
Timî
();

147 
I¡_t
 
	gù¨
=0; i∑r<
	gfN∑rs
; ipar++) {

148 
	gfMöWøp
->
SëP¨amëî
–
ù¨
, 
F‹m
( "Par%i",ipar ),

149 
∑rs
[
ù¨
], 
fR™ges
[ù¨]->
GëWidth
()/100.0,

150 
fR™ges
[
ù¨
]->
GëMö
(), fR™ges[ù¨]->
GëMax
() );

151 i‡(
	gfR™ges
[
ù¨
]->
GëWidth
(Ë=0.0Ë
fMöWøp
->
FixP¨amëî
( ipar );

157 
	g¨gs
[0] = 
fMaxCÆls
;

158 
	g¨gs
[1] = 
fTﬁî™˚
;

161 
	gfMöWøp
->
ExecuãComm™d
–"MIGød", 
¨gs
, 2 );

164 i‡(
	gfU£Im¥ove
Ë
	gfMöWøp
->
ExecuãComm™d
–"IMProve", 
¨gs
, 0 );

167 i‡(
	gfU£Möos
) {

168 
	g¨gs
[0] = 500;

169 
	gfMöWøp
->
ExecuãComm™d
–"MINOs", 
¨gs
, 1 );

173 
DoubÀ_t
 
	gchi2
;

174 
DoubÀ_t
 
	gedm
;

175 
DoubÀ_t
 
	gîrdef
;

176 
I¡_t
 
	gnv∑r
;

177 
I¡_t
 
	g≈¨x
;

178 
	gfMöWøp
->
GëSèts
–
chi2
, 
edm
, 
îrdef
, 
nv∑r
, 
≈¨x
 );

181 i‡(
GëN∑rs
(Ë!
≈¨x
) {

182 
Log
(Ë<< 
kFATAL
 << "<Run> Mismatch inÇumber ofÖarameters: "

183 << 
GëN∑rs
(Ë<< " !" << 
≈¨x
 << 
Endl
;

187 
I¡_t
 
	gù¨
=0; i∑r<
GëN∑rs
(); ipar++) {

188 
DoubÀ_t
 
	gîΩ
, 
	gîrm
, 
	gîrsym
, 
	gglobc‹
, 
	gcuºVÆ
, 
	gcuºEº
;

189 
	gfMöWøp
->
GëP¨amëî
–
ù¨
, 
cuºVÆ
, 
cuºEº
 );

190 
	g∑rs
[
ù¨
] = 
cuºVÆ
;

191 
	gfMöWøp
->
GëEº‹s
–
ù¨
, 
îΩ
, 
îrm
, 
îrsym
, 
globc‹
 );

197 i‡(!
	gfB©ch
) {

198 
Log
(Ë<< 
	gkINFO
 << "Eœp£dÅime: " << 
	gtimî
->
GëEœp£dTime
()

199 << " " << 
	gEndl
;

200 
dñëe
 
	gtimî
;

203 
	gfMöWøp
->
CÀ¨
();

205  
	gchi2
;

211 
DoubÀ_t
 
	gTMVA
::
MöuôFôãr
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

213  
Run
–
∑rs
 );

	@src/MinuitWrapper.cxx

29 
	~"TMVA/MöuôWøµî.h
"

31 
	~"TMVA/IFôãrT¨gë.h
"

33 
CœssImp
(
TMVA
::
MöuôWøµî
);

38 
	gTMVA
::
MöuôWøµî
::
	$MöuôWøµî
–
IFôãrT¨gë
& 
èrgë
, 
I¡_t
 
max∑r
 )

39 : 
	`TMöuô
–
max∑r
 ),

40 
	`fFôãrT¨gë
–
èrgë
 ),

41 
	$fNumP¨
–
max∑r
 )

43  
I¡_t
 
i
=0; i< 
max∑r
; i++ ) {

44 
fP¨amëîs
.
	`push_back
(0.0);

46 
	}
}

51 
I¡_t
 
	gTMVA
::
MöuôWøµî
::
	$EvÆ
(
I¡_t
 , 
DoubÀ_t
*, DoubÀ_t& 
f
, DoubÀ_t* 
∑r
, Int_t)

53 
I¡_t
 
ù¨
=0; i∑r<
fNumP¨
; i∑r++Ë
fP¨amëîs
[ù¨] = 
∑r
[ipar];

55 
f
 = 
fFôãrT¨gë
.
	`E°im©‹Fun˘i⁄
–
fP¨amëîs
 );

57 
	}
}

64 
I¡_t
 
	gTMVA
::
MöuôWøµî
::
	$ExecuãComm™d
(c⁄° *
comm™d
, 
DoubÀ_t
 *
¨gs
, 
I¡_t
 
«rgs
)

66 
I¡_t
 
õº
 = 0;

67 
	`m√xcm
(
comm™d
,
¨gs
,
«rgs
,
õº
);

68  
õº
;

69 
	}
}

74 
	gTMVA
::
MöuôWøµî
::
	$CÀ¨
(
O±i⁄_t
 *)

77 
DoubÀ_t
 
vÆ
 = 3;

78 
I¡_t
 
ö£ed
 = 12345;

79 
	`mƒn15
(
vÆ
,
ö£ed
);

80 
	}
}

90 
I¡_t
 
	gTMVA
::
MöuôWøµî
::
	$GëSèts
(
DoubÀ_t
 &
amö
, DoubÀ_à&
edm
, DoubÀ_à&
îrdef
, 
I¡_t
 &
nv∑r
, I¡_à&
≈¨x
)

92 
I¡_t
 
õº
 = 0;

93 
	`mn°©
(
amö
,
edm
,
îrdef
,
nv∑r
,
≈¨x
,
õº
);

94  
õº
;

95 
	}
}

105 
I¡_t
 
	gTMVA
::
MöuôWøµî
::
	$GëEº‹s
(
I¡_t
 
ù¨
,
DoubÀ_t
 &
ïlus
, DoubÀ_à&
emöus
, DoubÀ_à&
ï¨ab
, DoubÀ_à&
globcc
)

107 
I¡_t
 
õº
 = 0;

108 
	`m√ºs
(
ù¨
, 
ïlus
,
emöus
,
ï¨ab
,
globcc
);

109  
õº
;

110 
	}
}

121 
I¡_t
 
	gTMVA
::
MöuôWøµî
::
	$SëP¨amëî
(
I¡_t
 
ù¨
,c⁄° *
∑∫ame
,
DoubÀ_t
 
vÆue
,DoubÀ_à
vîr
,DoubÀ_à
vlow
, DoubÀ_à
vhigh
)

124 
I¡_t
 
õº
 = 0;

125 
	`m≈¨m
(
ù¨
,
∑∫ame
,
vÆue
,
vîr
,
vlow
,
vhigh
,
õº
);

126  
õº
;

127 
	}
}

132 
TObje˘
 *
	gTMVA
::
MöuôWøµî
::
	$Cl⁄e
(c⁄°* 
√w«me
) const

134 
MöuôWøµî
 *
«med
 = (MöuôWøµî*)
TNamed
::
	`Cl⁄e
(
√w«me
);

135 
«med
->
fFôãrT¨gë
 = fFitterTarget;

137 
	}
}

	@src/MisClassificationError.cxx

34 
	~"TMVA/MisCœssifiˇti⁄Eº‹.h
"

36 
	~"Rty≥s.h
"

38 
CœssImp
(
TMVA
::
MisCœssifiˇti⁄Eº‹
);

43 
DoubÀ_t
 
	gTMVA
::
MisCœssifiˇti⁄Eº‹
::
	$GëSï¨©i⁄Index
–c⁄° 
DoubÀ_t
 
s
, c⁄° DoubÀ_à
b
 )

45 i‡–
s
+
b
 <= 0)  0;

47 
DoubÀ_t
 
p
 = 
s
/(s+
b
);

48 i‡(
p
 >= 1-p)  1-p;

49  
p
;

50 
	}
}

	@src/ModulekNN.cxx

32 
	~"TMVA/ModuÀkNN.h
"

34 
	~"TMVA/MsgLoggî.h
"

35 
	~"TMVA/Ty≥s.h
"

37 
	~"ThªadLoˇlSt‹age.h
"

38 
	~"TM©h.h
"

39 
	~"TR™dom3.h
"

41 
	~<as£π.h
>

42 
	~<iom™ù
>

43 
	~<io°ªam
>

44 
	~<s°ªam
>

45 
	~<Æg‹ôhm
>

50 
	gTMVA
::
kNN
::
Evít
::
	$Evít
()

51 :
	`fV¨
(),

52 
	`fWeight
(-1.0),

53 
	`fTy≥
(-1)

55 
	}
}

60 
	gTMVA
::
kNN
::
Evít
::
	$Evít
(c⁄° 
V¨Vec
 &
v¨
, c⁄° 
DoubÀ_t
 
weight
, c⁄° 
Sh‹t_t
 
ty≥
)

61 :
	`fV¨
(
v¨
),

62 
	`fWeight
(
weight
),

63 
	$fTy≥
(
ty≥
)

65 
	}
}

70 
	gTMVA
::
kNN
::
Evít
::
	$Evít
(c⁄° 
V¨Vec
 &
v¨
, c⁄° 
DoubÀ_t
 
weight
, c⁄° 
Sh‹t_t
 
ty≥
, c⁄° V¨Ve¯&
tvec
)

71 :
	`fV¨
(
v¨
),

72 
	`fTgt
(
tvec
),

73 
	`fWeight
(
weight
),

74 
	$fTy≥
(
ty≥
)

76 
	}
}

81 
	gTMVA
::
kNN
::
Evít
::~
	$Evít
()

83 
	}
}

88 
TMVA
::
kNN
::
V¨Ty≥
 TMVA::kNN::
Evít
::
	$GëDi°
(c⁄° 
Evít
 &
Ÿhî
) const

90 c⁄° 
UI¡_t
 
nv¨
 = 
	`GëNV¨
();

92 i‡(
nv¨
 !
Ÿhî
.
	`GëNV¨
()) {

93 
°d
::
˚º
 << "Di°™˚:Åwÿevít†havêdif„ª¡ dimísi⁄s" << std::
ídl
;

97 
V¨Ty≥
 
sum
 = 0.0;

98 
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨
; ++ivar) {

99 
sum
 +
	`GëDi°
(
Ÿhî
.
	`GëV¨
(
iv¨
), ivar);

102  
sum
;

103 
	}
}

107 
	gTMVA
::
kNN
::
Evít
::
	$SëT¨gës
(c⁄° 
V¨Vec
 &
tvec
)

109 
fTgt
 = 
tvec
;

110 
	}
}

114 c⁄° 
	gTMVA
::
kNN
::
V¨Vec
& 
TMVA
::kNN::
Evít
::
	$GëT¨gës
() const

116  
fTgt
;

117 
	}
}

121 c⁄° 
	gTMVA
::
kNN
::
V¨Vec
& 
TMVA
::kNN::
Evít
::
	$GëV¨s
() const

123  
fV¨
;

124 
	}
}

129 
	gTMVA
::
kNN
::
Evít
::
	$Pröt
() const

131 
	`Pröt
(
°d
::
cout
);

132 
	}
}

137 
	gTMVA
::
kNN
::
Evít
::
	$Pröt
(
°d
::
o°ªam
& 
os
) const

139 
I¡_t
 
dp
 = 
os
.
	`¥ecisi⁄
();

140 
os
 << "Event: ";

141 
UI¡_t
 
iv¨
 = 0; iv¨ !
	`GëNV¨
(); ++ivar) {

142 i‡(
iv¨
 == 0) {

143 
os
 << "(";

146 
os
 << ", ";

149 
os
 << 
°d
::
	`£tfûl
(' 'Ë<< std::
	`£tw
(5Ë<< std::
	`£çªcisi⁄
(3Ë<< 
	`GëV¨
(
iv¨
);

152 i‡(
	`GëNV¨
() > 0) {

153 
os
 << ")";

156 
os
 << "Ço variables";

158 
os
 << 
°d
::
	`£çªcisi⁄
(
dp
);

159 
	}
}

164 
	g°d
::
o°ªam
& 
TMVA
::
kNN
::
›î©‹
<<(
°d
::o°ªam& 
os
, c⁄° 
	gTMVA
::kNN::
Evít
& 
evít
)

166 
evít
.
Pröt
(
os
);

167  
	gos
;

173 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$ModuÀkNN
()

174 :
	`fDimn
(0),

175 
	`fTªe
(0),

176 
	`fLoggî
–
√w
 
	`MsgLoggî
("ModulekNN") )

178 
	}
}

183 
	gTMVA
::
kNN
::
ModuÀkNN
::~
	$ModuÀkNN
()

185 i‡(
fTªe
) {

186 
dñëe
 
fTªe
; fTree = 0;

188 
dñëe
 
fLoggî
;

189 
	}
}

194 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$CÀ¨
()

196 
fDimn
 = 0;

198 i‡(
fTªe
) {

199 
dñëe
 
fTªe
;

200 
fTªe
 = 0;

203 
fV¨SˇÀ
.
	`˛ór
();

204 
fCou¡
.
	`˛ór
();

205 
fEvít
.
	`˛ór
();

206 
fV¨
.
	`˛ór
();

207 
	}
}

212 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Add
(c⁄° 
Evít
 &
evít
)

214 i‡(
fTªe
) {

215 
	`Log
(Ë<< 
kFATAL
 << "<Add> C™nŸáddÉvít:Åªêi†Æªady buût" << 
Endl
;

219 i‡(
fDimn
 < 1) {

220 
fDimn
 = 
evít
.
	`GëNV¨
();

222 i‡(
fDimn
 !
evít
.
	`GëNV¨
()) {

223 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Add(Ë-Çumbî o‡dimísi⁄ d€†nŸ m©chÖªviou†evíts" << 
Endl
;

227 
fEvít
.
	`push_back
(
evít
);

229 
UI¡_t
 
iv¨
 = 0; iv¨ < 
fDimn
; ++ivar) {

230 
fV¨
[
iv¨
].
	`push_back
(
evít
.
	`GëV¨
(ivar));

233 
°d
::
m≠
<
Sh‹t_t
, 
UI¡_t
>::
ôî©‹
 
cô
 = 
fCou¡
.
	`föd
(
evít
.
	`GëTy≥
());

234 i‡(
cô
 =
fCou¡
.
	`íd
()) {

235 
fCou¡
[
evít
.
	`GëTy≥
()] = 1;

238 ++(
cô
->
£c⁄d
);

240 
	}
}

245 
Boﬁ_t
 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Fûl
(c⁄° 
USh‹t_t
 
odïth
, c⁄° 
UI¡_t
 
i‰ac
, c⁄° 
°d
::
°rög
 &
›ti⁄
)

247 i‡(
fTªe
) {

248 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Fû»-Åªêha†Æªady bì¿¸óãd" << 
Endl
;

249  
kFALSE
;

254 
UI¡_t
 
mö
 = 0;

255 i‡(
›ti⁄
.
	`föd
("åim"Ë!
°d
::
°rög
::
≈os
) {

256 
°d
::
m≠
<
Sh‹t_t
, 
UI¡_t
>::
c⁄°_ôî©‹
 
ô
 = 
fCou¡
.
	`begö
(); ià!fCou¡.
	`íd
(); ++it) {

257 i‡(
mö
 =0 || mö > 
ô
->
£c⁄d
) {

258 
mö
 = 
ô
->
£c⁄d
;

262 
	`Log
(Ë<< 
kINFO
 << "<Fûl> Wû»åimáŒÉvíàty≥†tÿ" << 
mö
 << "Évíts" << 
Endl
;

264 
fCou¡
.
	`˛ór
();

265 
fV¨
.
	`˛ór
();

267 
EvítVec
 
evec
;

269 
EvítVec
::
c⁄°_ôî©‹
 
evít
 = 
fEvít
.
	`begö
();Évíà!fEvít.
	`íd
(); ++event) {

270 
°d
::
m≠
<
Sh‹t_t
, 
UI¡_t
>::
ôî©‹
 
cô
 = 
fCou¡
.
	`föd
(
evít
->
	`GëTy≥
());

271 i‡(
cô
 =
fCou¡
.
	`íd
()) {

272 
fCou¡
[
evít
->
	`GëTy≥
()] = 1;

274 i‡(
cô
->
£c⁄d
 < 
mö
) {

275 ++(
cô
->
£c⁄d
);

281 
UI¡_t
 
d
 = 0; d < 
fDimn
; ++d) {

282 
fV¨
[
d
].
	`push_back
(
evít
->
	`GëV¨
(d));

285 
evec
.
	`push_back
(*
evít
);

288 
	`Log
(Ë<< 
kINFO
 << "<Fûl> Eø£d " << 
fEvít
.
	`size
(Ë- 
evec
.size(Ë<< "Évíts" << 
Endl
;

290 
fEvít
 = 
evec
;

294 
fCou¡
.
	`˛ór
();

297 
V¨M≠
::
ôî©‹
 
ô
 = 
fV¨
.
	`begö
(); ià!fV¨.
	`íd
(); ++it) {

298 
°d
::
	`s‹t
((
ô
->
£c⁄d
).
	`begö
(), (ô->£c⁄d).
	`íd
());

301 i‡(
›ti⁄
.
	`föd
("mëric"Ë!
°d
::
°rög
::
≈os
 && 
i‰ac
 > 0) {

302 
	`CompuãMëric
(
i‰ac
);

306 
V¨M≠
::
ôî©‹
 
ô
 = 
fV¨
.
	`begö
(); ià!fV¨.
	`íd
(); ++it) {

307 
°d
::
	`s‹t
((
ô
->
£c⁄d
).
	`begö
(), (ô->£c⁄d).
	`íd
());

315 
fTªe
 = 
	`O±imize
(
odïth
);

317 i‡(!
fTªe
) {

318 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Fûl(Ë- faûedÅÿ¸óãÅªe" << 
Endl
;

319  
kFALSE
;

322 
EvítVec
::
c⁄°_ôî©‹
 
evít
 = 
fEvít
.
	`begö
();Évíà!fEvít.
	`íd
(); ++event) {

323 
fTªe
->
	`Add
(*
evít
, 0);

325 
°d
::
m≠
<
Sh‹t_t
, 
UI¡_t
>::
ôî©‹
 
cô
 = 
fCou¡
.
	`föd
(
evít
->
	`GëTy≥
());

326 i‡(
cô
 =
fCou¡
.
	`íd
()) {

327 
fCou¡
[
evít
->
	`GëTy≥
()] = 1;

330 ++(
cô
->
£c⁄d
);

334 
°d
::
m≠
<
Sh‹t_t
, 
UI¡_t
>::
c⁄°_ôî©‹
 
ô
 = 
fCou¡
.
	`begö
(); ià!fCou¡.
	`íd
(); ++it) {

335 
	`Log
(Ë<< 
kINFO
 << "<Fûl> Cœs†" << 
ô
->
fú°
 << " ha†" << 
°d
::
	`£tw
(8)

336 << 
ô
->
£c⁄d
 << "Évíts" << 
Endl
;

339  
kTRUE
;

340 
	}
}

348 
Boﬁ_t
 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Föd
(
Evít
 
evít
, c⁄° 
UI¡_t
 
nföd
, c⁄° 
°d
::
°rög
 &
›ti⁄
) const

350 i‡(!
fTªe
) {

351 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Föd(Ë-Åªêha†nŸ bì¿fûÀd" << 
Endl
;

352  
kFALSE
;

354 i‡(
fDimn
 !
evít
.
	`GëNV¨
()) {

355 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Föd(Ë-Çumbî o‡dimísi⁄ d€†nŸ m©chÅøöögÉvíts" << 
Endl
;

356  
kFALSE
;

358 i‡(
nföd
 < 1) {

359 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::Föd(Ë-Ñeque°ed 0Çóª°Çeighb‹s" << 
Endl
;

360  
kFALSE
;

365 i‡(!
fV¨SˇÀ
.
	`em±y
()) {

366 
evít
 = 
	`SˇÀ
(event);

370 
fkNNEvít
 = 
evít
;

371 
fkNNLi°
.
	`˛ór
();

373 if(
›ti⁄
.
	`föd
("weight"Ë!
°d
::
°rög
::
≈os
)

378 
kNN
::
Föd
<kNN::
Evít
>(
fkNNLi°
, 
fTªe
, 
evít
, 
	`DoubÀ_t
(
nföd
), 0.0);

384 
kNN
::
Föd
<kNN::
Evít
>(
fkNNLi°
, 
fTªe
, 
evít
, 
nföd
);

387  
kTRUE
;

388 
	}
}

393 
Boﬁ_t
 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Föd
(c⁄° 
UI¡_t
 
nföd
, c⁄° 
°d
::
°rög
 &
›ti⁄
) const

395 i‡(
fCou¡
.
	`em±y
(Ë|| !
fTªe
) {

396  
kFALSE
;

398 
°d
::
	tm≠
<
	tSh‹t_t
, 
	tUI¡_t
>::
	tc⁄°_ôî©‹
 const_iterator;

399 
	`TTHREAD_TLS_DECL_ARG
(
c⁄°_ôî©‹
,
cô
,
fCou¡
.
	`íd
());

401 i‡(
cô
 =
fCou¡
.
	`íd
()) {

402 
cô
 = 
fCou¡
.
	`begö
();

405 c⁄° 
Sh‹t_t
 
ëy≥
 = (
cô
++)->
fú°
;

407 i‡(
›ti⁄
 == "flat") {

408 
V¨Vec
 
dvec
;

409 
UI¡_t
 
d
 = 0; d < 
fDimn
; ++d) {

410 
V¨M≠
::
c⁄°_ôî©‹
 
vô
 = 
fV¨
.
	`föd
(
d
);

411 i‡(
vô
 =
fV¨
.
	`íd
()) {

412  
kFALSE
;

415 c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> &
vvec
 = 
vô
->
£c⁄d
;

417 i‡(
vvec
.
	`em±y
()) {

418  
kFALSE
;

422 c⁄° 
V¨Ty≥
 
mö
 = 
vvec
.
	`‰⁄t
();

423 c⁄° 
V¨Ty≥
 
max
 = 
vvec
.
	`back
();

424 c⁄° 
V¨Ty≥
 
width
 = 
max
 - 
mö
;

426 i‡(
width
 < 0.0 || width > 0.0) {

427 
dvec
.
	`push_back
(
mö
 + 
width
*
	`GëRndmThªadLoˇl
().
	`Rndm
());

430  
kFALSE
;

434 c⁄° 
Evít
 
	`evít
(
dvec
, 1.0, 
ëy≥
);

436 
	`Föd
(
evít
, 
nföd
);

438  
kTRUE
;

441  
kFALSE
;

442 
	}
}

449 
	gTMVA
::
kNN
::
Node
<
TMVA
::kNN::
Evít
>* TMVA::kNN::
ModuÀkNN
::
	$O±imize
(c⁄° 
UI¡_t
 
odïth
)

451 i‡(
fV¨
.
	`em±y
(Ë|| 
fDimn
 !fV¨.
	`size
()) {

452 
	`Log
(Ë<< 
kWARNING
 << "<O±imize> C™nŸ buûdáÅªe" << 
Endl
;

456 c⁄° 
UI¡_t
 
size
 = (
fV¨
.
	`begö
()->
£c⁄d
).
	`size
();

457 i‡(
size
 < 1) {

458 
	`Log
(Ë<< 
kWARNING
 << "<O±imize> C™nŸ buûdáÅªêwôhouàevíts" << 
Endl
;

462 
V¨M≠
::
c⁄°_ôî©‹
 
ô
 = 
fV¨
.
	`begö
();

463 ; 
ô
 !
fV¨
.
	`íd
(); ++it) {

464 i‡((
ô
->
£c⁄d
).
	`size
(Ë!
size
) {

465 
	`Log
(Ë<< 
kWARNING
 << "<O±imize> # o‡v¨übÀ†d€¢'àm©ch bëwì¿dimísi⁄s" << 
Endl
;

470 i‡((
fDimn
*
size
Ë< 
TM©h
::
	`Powî
(2.0, (
odïth
))) {

471 
	`Log
(Ë<< 
kWARNING
 << "<O±imize> O±imiz©i⁄ dïthÉx˚ed†numbî o‡evíts" << 
Endl
;

475 
	`Log
(Ë<< 
kHEADER
 << "O±imizögÅªêf‹ " << 
fDimn
 << " v¨übÀ†wôh " << 
size
 << " vÆues" << 
Endl
;

477 
°d
::
ve˘‹
<
Node
<
Evít
> *> 
pvec
, 
cvec
;

479 
ô
 = 
fV¨
.
	`föd
(0);

480 i‡(
ô
 =
fV¨
.
	`íd
(Ë|| (ô->
£c⁄d
).
	`size
() < 2) {

481 
	`Log
(Ë<< 
kWARNING
 << "<O±imize> Missög 0 v¨übÀ" << 
Endl
;

485 c⁄° 
Evít
 
	`≥vít
(
	`V¨Vec
(
fDimn
, (
ô
->
£c⁄d
)[
size
/2]), -1.0, -1);

487 
Node
<
Evít
> *
åì
 = 
√w
 Node<Evít>(0, 
≥vít
, 0);

489 
pvec
.
	`push_back
(
åì
);

491 
UI¡_t
 
dïth
 = 1; dïth < 
odïth
; ++depth) {

492 c⁄° 
UI¡_t
 
mod
 = 
dïth
 % 
fDimn
;

494 
V¨M≠
::
c⁄°_ôî©‹
 
vô
 = 
fV¨
.
	`föd
(
mod
);

495 i‡(
vô
 =
fV¨
.
	`íd
()) {

496 
	`Log
(Ë<< 
kFATAL
 << "Missög " << 
mod
 << " v¨übÀ" << 
Endl
;

499 c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> &
dvec
 = 
vô
->
£c⁄d
;

501 i‡(
dvec
.
	`size
() < 2) {

502 
	`Log
(Ë<< 
kFATAL
 << "Missög " << 
mod
 << " v¨übÀ" << 
Endl
;

506 
UI¡_t
 
ichûd
 = 1;

507 
°d
::
ve˘‹
<
Node
<
Evít
> *>::
ôî©‹
 
pô
 = 
pvec
.
	`begö
();Öô !pvec.
	`íd
(); ++pit) {

508 
Node
<
Evít
> *
∑ª¡
 = *
pô
;

510 c⁄° 
V¨Ty≥
 
lmedün
 = 
dvec
[
size
*
ichûd
/(2*
pvec
.
	`size
() + 1)];

511 ++
ichûd
;

513 c⁄° 
V¨Ty≥
 
rmedün
 = 
dvec
[
size
*
ichûd
/(2*
pvec
.
	`size
() + 1)];

514 ++
ichûd
;

516 c⁄° 
Evít
 
	`Àvít
(
	`V¨Vec
(
fDimn
, 
lmedün
), -1.0, -1);

517 c⁄° 
Evít
 
	`ªvít
(
	`V¨Vec
(
fDimn
, 
rmedün
), -1.0, -1);

519 
Node
<
Evít
> *
lchûd
 = 
√w
 Node<Evít>(
∑ª¡
, 
Àvít
, 
mod
);

520 
Node
<
Evít
> *
rchûd
 = 
√w
 Node<Evít>(
∑ª¡
, 
ªvít
, 
mod
);

522 
∑ª¡
->
	`SëNodeL
(
lchûd
);

523 
∑ª¡
->
	`SëNodeR
(
rchûd
);

525 
cvec
.
	`push_back
(
lchûd
);

526 
cvec
.
	`push_back
(
rchûd
);

529 
pvec
 = 
cvec
;

530 
cvec
.
	`˛ór
();

533  
åì
;

534 
	}
}

542 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$CompuãMëric
(c⁄° 
UI¡_t
 
i‰ac
)

544 i‡(
i‰ac
 == 0) {

547 i‡(
i‰ac
 > 100) {

548 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::CompuãMëri¯- fø˘i⁄ c™ÇŸÉx˚ed 100%" << 
Endl
;

551 i‡(!
fV¨SˇÀ
.
	`em±y
()) {

552 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::CompuãMëri¯- mëri¯i†Æªady compuãd" << 
Endl
;

555 i‡(
fEvít
.
	`size
() < 100) {

556 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::CompuãMëri¯-Çumbî o‡evít†i†toÿsmÆl" << 
Endl
;

560 c⁄° 
UI¡_t
 
l‰ac
 = (100 - 
i‰ac
)/2;

561 c⁄° 
UI¡_t
 
r‰ac
 = 100 - (100 - 
i‰ac
)/2;

563 
	`Log
(Ë<< 
kINFO
 << "Computing scale factor for 1d distributions: "

564 << "(i‰ac, bŸtom,Å›Ë(" << 
i‰ac
 << "%, " << 
l‰ac
 << "%, " << 
r‰ac
 << "%)" << 
Endl
;

566 
fV¨SˇÀ
.
	`˛ór
();

568 
V¨M≠
::
c⁄°_ôî©‹
 
vô
 = 
fV¨
.
	`begö
(); vô !fV¨.
	`íd
(); ++vit) {

569 c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> &
dvec
 = 
vô
->
£c⁄d
;

571 
°d
::
ve˘‹
<
DoubÀ_t
>::
c⁄°_ôî©‹
 
beg_ô
 = 
dvec
.
	`íd
();

572 
°d
::
ve˘‹
<
DoubÀ_t
>::
c⁄°_ôî©‹
 
íd_ô
 = 
dvec
.
	`íd
();

574 
I¡_t
 
di°
 = 0;

575 
°d
::
ve˘‹
<
DoubÀ_t
>::
c⁄°_ôî©‹
 
dô
 = 
dvec
.
	`begö
(); dô !dvec.
	`íd
(); ++dô, ++
di°
) {

577 i‡((100*
di°
)/
dvec
.
	`size
(Ë=
l‰ac
 && 
beg_ô
 =dvec.
	`íd
()) {

578 
beg_ô
 = 
dô
;

581 i‡((100*
di°
)/
dvec
.
	`size
(Ë=
r‰ac
 && 
íd_ô
 =dvec.
	`íd
()) {

582 
íd_ô
 = 
dô
;

586 i‡(
beg_ô
 =
dvec
.
	`íd
(Ë|| 
íd_ô
 == dvec.end()) {

587 
beg_ô
 = 
dvec
.
	`begö
();

588 
íd_ô
 = 
dvec
.
	`íd
();

590 
	`as£π
(
beg_ô
 !
íd_ô
 && "Empty vector");

592 --
íd_ô
;

595 c⁄° 
DoubÀ_t
 
Õos
 = *
beg_ô
;

596 c⁄° 
DoubÀ_t
 
Ωos
 = *
íd_ô
;

598 i‡(!(
Õos
 < 
Ωos
)) {

599 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::CompuãMëric(Ë- mö vÆuêi†gª©îÅh™ max vÆue" << 
Endl
;

610 
fV¨SˇÀ
[
vô
->
fú°
] = 
Ωos
 - 
Õos
;

613 
fV¨
.
	`˛ór
();

615 
UI¡_t
 
õvít
 = 0; ievíà< 
fEvít
.
	`size
(); ++ievent) {

616 
fEvít
[
õvít
] = 
	`SˇÀ
(fEvent[ievent]);

618 
UI¡_t
 
iv¨
 = 0; iv¨ < 
fDimn
; ++ivar) {

619 
fV¨
[
iv¨
].
	`push_back
(
fEvít
[
õvít
].
	`GëV¨
(ivar));

622 
	}
}

628 c⁄° 
	gTMVA
::
kNN
::
Evít
 
TMVA
::kNN::
ModuÀkNN
::
	$SˇÀ
(c⁄° 
Evít
 &
evít
) const

630 i‡(
fV¨SˇÀ
.
	`em±y
()) {

631  
evít
;

634 i‡(
evít
.
	`GëNV¨
(Ë!
fV¨SˇÀ
.
	`size
()) {

635 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::SˇÀ(Ë- mism©ched mëri¯™dÉvíàsize" << 
Endl
;

636  
evít
;

639 
V¨Vec
 
	`vvec
(
evít
.
	`GëNV¨
(), 0.0);

641 
UI¡_t
 
iv¨
 = 0; iv¨ < 
evít
.
	`GëNV¨
(); ++ivar) {

642 
°d
::
m≠
<, 
DoubÀ_t
>::
c⁄°_ôî©‹
 
fô
 = 
fV¨SˇÀ
.
	`föd
(
iv¨
);

643 i‡(
fô
 =
fV¨SˇÀ
.
	`íd
()) {

644 
	`Log
(Ë<< 
kFATAL
 << "ModuÀkNN::SˇÀ(Ë- faûedÅÿföd sˇÀ f‹ " << 
iv¨
 << 
Endl
;

648 i‡(
fô
->
£c⁄d
 > 0.0) {

649 
vvec
[
iv¨
] = 
evít
.
	`GëV¨
(iv¨)/
fô
->
£c⁄d
;

652 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀ " << 
iv¨
 << " ha†zîÿwidth" << 
Endl
;

656  
	`Evít
(
vvec
, 
evít
.
	`GëWeight
(),Évít.
	`GëTy≥
(),Évít.
	`GëT¨gës
());

657 
	}
}

662 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Pröt
() const

664 
	`Pröt
(
°d
::
cout
);

665 
	}
}

670 
	gTMVA
::
kNN
::
ModuÀkNN
::
	$Pröt
(
°d
::
o°ªam
 &
os
) const

672 
os
 << "----------------------------------------------------------------------"<< 
°d
::
ídl
;

673 
os
 << "Prötög k¬Ñesu…" << 
°d
::
ídl
;

674 
os
 << 
fkNNEvít
 << 
°d
::
ídl
;

676 
UI¡_t
 
cou¡
 = 0;

678 
°d
::
m≠
<
Sh‹t_t
, 
DoubÀ_t
> 
mö
, 
max
;

680 
os
 << "Prötög " << 
fkNNLi°
.
	`size
(Ë<< "Çóª°Çeighb‹s" << 
°d
::
ídl
;

681 
Li°
::
c⁄°_ôî©‹
 
ô
 = 
fkNNLi°
.
	`begö
(); ià!fkNNLi°.
	`íd
(); ++it) {

682 
os
 << ++
cou¡
 << ": " << 
ô
->
£c⁄d
 << ": " << it->
fú°
->
	`GëEvít
(Ë<< 
°d
::
ídl
;

684 c⁄° 
Evít
 &
evít
 = 
ô
->
fú°
->
	`GëEvít
();

685 
USh‹t_t
 
iv¨
 = 0; iv¨ < 
evít
.
	`GëNV¨
(); ++ivar) {

686 i‡(
mö
.
	`föd
(
iv¨
Ë=mö.
	`íd
()) {

687 
mö
[
iv¨
] = 
evít
.
	`GëV¨
(ivar);

689 i‡(
mö
[
iv¨
] > 
evít
.
	`GëV¨
(ivar)) {

690 
mö
[
iv¨
] = 
evít
.
	`GëV¨
(ivar);

693 i‡(
max
.
	`föd
(
iv¨
Ë=max.
	`íd
()) {

694 
max
[
iv¨
] = 
evít
.
	`GëV¨
(ivar);

696 i‡(
max
[
iv¨
] < 
evít
.
	`GëV¨
(ivar)) {

697 
max
[
iv¨
] = 
evít
.
	`GëV¨
(ivar);

702 i‡(
mö
.
	`size
(Ë=
max
.size()) {

703 
°d
::
m≠
<
Sh‹t_t
, 
DoubÀ_t
>::
c⁄°_ôî©‹
 
mô
 = 
mö
.
	`begö
(); mô !mö.
	`íd
(); ++mit) {

704 c⁄° 
Sh‹t_t
 
i
 = 
mô
->
fú°
;

705 
	`Log
(Ë<< 
kINFO
 << "(v¨, mö, maxË(" << 
i
 << "," << 
mö
[i] << ", " << 
max
[i] << ")" << 
Endl
;

709 
os
 << "----------------------------------------------------------------------" << 
°d
::
ídl
;

710 
	}
}

	@src/MsgLogger.cxx

36 
	~"TMVA/MsgLoggî.h
"

38 
	~"TMVA/C⁄fig.h
"

39 
	~"TMVA/Ty≥s.h
"

42 
	~"Rio°ªam.h
"

43 
	~"Rty≥s.h
"

44 
	~"TObje˘.h
"

47 
	~<as£π.h
>

48 
	~<c°dlib
>

49 
	~<iom™ù
>

50 
	~<mem‹y
>

53 
CœssImp
(
TMVA
::
MsgLoggî
);

57 c⁄° 
UI¡_t
 
	gTMVA
::
MsgLoggî
::
fgMaxSour˚Size
 = 25;

59 c⁄° 
	g°d
::
°rög
 
TMVA
::
MsgLoggî
::
fgPªfix
 = "";

60 c⁄° 
	g°d
::
°rög
 
TMVA
::
MsgLoggî
::
fgSuffix
 = ": ";

61 #i‡
__˝lu•lus
 > 199711L

62 
	g°d
::
©omic
<
Boﬁ_t
> 
TMVA
::
MsgLoggî
::
fgInhibôOuçut
{
kFALSE
};

63 
	g°d
::
©omic
<c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>*> TMVA::
MsgLoggî
::
fgTy≥M≠
{0};

64 
	g°d
::
©omic
<c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>*> TMVA::
MsgLoggî
::
fgCﬁ‹M≠
{0};

66 
Boﬁ_t
 
	gTMVA
::
MsgLoggî
::
fgInhibôOuçut
 = 
kFALSE
;

67 c⁄° 
	g°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>* TMVA::
MsgLoggî
::
fgTy≥M≠
 = 0;

68 c⁄° 
	g°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>* TMVA::
MsgLoggî
::
fgCﬁ‹M≠
 = 0;

70 
	g°d
::
unique_±r
<c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
> > 
gOwnTy≥M≠
;

71 
	g°d
::
unique_±r
<c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
> > 
gOwnCﬁ‹M≠
;

74 
	gTMVA
::
MsgLoggî
::
	$InhibôOuçut
(Ë{ 
fgInhibôOuçut
 = 
kTRUE
; 
	}
}

75 
	gTMVA
::
MsgLoggî
::
	$E«bÀOuçut
(Ë{ 
fgInhibôOuçut
 = 
kFALSE
; 
	}
}

79 
	gTMVA
::
MsgLoggî
::
	$MsgLoggî
–c⁄° 
TObje˘
* 
sour˚
, 
EMsgTy≥
 
möTy≥
 )

80 : 
	`fObjSour˚
 ( 
sour˚
 ),

81 
	`fSåSour˚
 ( "" ),

82 
	`fA˘iveTy≥
–
kINFO
 ),

83 
	$fMöTy≥
 ( 
möTy≥
 )

85 
	`InôM≠s
();

86 
	}
}

91 
	gTMVA
::
MsgLoggî
::
	$MsgLoggî
–c⁄° 
°d
::
°rög
& 
sour˚
, 
EMsgTy≥
 
möTy≥
 )

92 : 
	`fObjSour˚
 ( 0 ),

93 
	`fSåSour˚
 ( 
sour˚
 ),

94 
	`fA˘iveTy≥
–
kINFO
 ),

95 
	$fMöTy≥
 ( 
möTy≥
 )

97 
	`InôM≠s
();

98 
	}
}

103 
	gTMVA
::
MsgLoggî
::
	$MsgLoggî
–
EMsgTy≥
 
möTy≥
 )

104 : 
	`fObjSour˚
 ( 0 ),

105 
	`fSåSour˚
 ( "Unknown" ),

106 
	`fA˘iveTy≥
–
kINFO
 ),

107 
	$fMöTy≥
 ( 
möTy≥
 )

109 
	`InôM≠s
();

110 
	}
}

115 
	gTMVA
::
MsgLoggî
::
	$MsgLoggî
–c⁄° 
MsgLoggî
& 
∑ª¡
 )

116 : 
°d
::
basic_ios
<
MsgLoggî
::
ch¨_ty≥
, MsgLoggî::
åaôs_ty≥
>(),

117 
°d
::
	`o°rög°ªam
(),

118 
	`TObje˘
(),

119 
	$fObjSour˚
(0)

121 
	`InôM≠s
();

122 *
this
 = 
∑ª¡
;

123 
	}
}

128 
	gTMVA
::
MsgLoggî
::~
	$MsgLoggî
()

130 
	}
}

135 
TMVA
::
MsgLoggî
& TMVA::MsgLoggî::
›î©‹
–c⁄° MsgLoggî& 
∑ª¡
 )

137 i‡(&
∑ª¡
 !
this
) {

138 
fObjSour˚
 = 
∑ª¡
.fObjSource;

139 
	gfSåSour˚
 = 
∑ª¡
.
fSåSour˚
;

140 
	gfA˘iveTy≥
 = 
∑ª¡
.
fA˘iveTy≥
;

141 
	gfMöTy≥
 = 
∑ª¡
.
fMöTy≥
;

144  *
	gthis
;

150 
	g°d
::
°rög
 
TMVA
::
MsgLoggî
::
	$GëF‹m©ãdSour˚
() const

152 
°d
::
°rög
 
sour˚_«me
;

153 i‡(
fA˘iveTy≥
 =
kHEADER
)

155 
sour˚_«me
 = 
fSåSour˚
;

157 i‡(
fA˘iveTy≥
 =
kWARNING
)

159 
sour˚_«me
 ="<WARNING>";

161 i‡(
sour˚_«me
.
	`size
(Ë> 
fgMaxSour˚Size
) {

162 
sour˚_«me
 = sour˚_«me.
	`sub°r
–0, 
fgMaxSour˚Size
 - 3 );

163 
sour˚_«me
 += "...";

166  
sour˚_«me
;

167 
	}
}

172 
	g°d
::
°rög
 
TMVA
::
MsgLoggî
::
	$GëPröãdSour˚
() const

174 
°d
::
°rög
 
sour˚_«me
 = 
	`GëF‹m©ãdSour˚
();

175 i‡(
sour˚_«me
.
	`size
(Ë< 
fgMaxSour˚Size
)

176 
°d
::
°rög
::
size_ty≥
 
i
=
sour˚_«me
.
	`size
(); i<
fgMaxSour˚Size
; i++Ësour˚_«me.
	`push_back
( ' ' );

178  
fgPªfix
 + 
sour˚_«me
 + 
fgSuffix
;

179 
	}
}

184 
	gTMVA
::
MsgLoggî
::
	$Síd
()

187 
°d
::
°rög
 
sour˚_«me
 = 
	`GëF‹m©ãdSour˚
();

189 
°d
::
°rög
 
mesßge
 = 
this
->
	`°r
();

190 
°d
::
°rög
::
size_ty≥
 
¥evious_pos
 = 0, 
cuºít_pos
 = 0;

193 
kTRUE
) {

194 
cuºít_pos
 = 
mesßge
.
	`föd
–'\n', 
¥evious_pos
 );

195 
°d
::
°rög
 
löe
 = 
mesßge
.
	`sub°r
–
¥evious_pos
, 
cuºít_pos
 -Örevious_pos );

197 
°d
::
o°rög°ªam
 
mesßge_to_£nd
;

199 
mesßge_to_£nd
.
	`£tf
–
°d
::
ios
::
adju°fõld
, std::ios::
À·
 );

200 
mesßge_to_£nd
.
	`width
–
fgMaxSour˚Size
 );

201 
mesßge_to_£nd
 << 
sour˚_«me
 << 
fgSuffix
 << 
löe
;

202 
°d
::
°rög
 
msg
 = 
mesßge_to_£nd
.
	`°r
();

203 
this
->
	`WrôeMsg
–
fA˘iveTy≥
, 
msg
 );

205 i‡(
cuºít_pos
 =
mesßge
.
≈os
) ;

206 
¥evious_pos
 = 
cuºít_pos
 + 1;

210 
this
->
	`°r
( "" );

211 
fA˘iveTy≥
 = 
kINFO
;

213 
	}
}

219 
	gTMVA
::
MsgLoggî
::
	$WrôeMsg
–
EMsgTy≥
 
ty≥
, c⁄° 
°d
::
°rög
& 
löe
 ) const

221 i‡–(
ty≥
 < 
fMöTy≥
 || 
fgInhibôOuçut
Ë&&Åy≥!=
kFATAL
 ) ;

223 
°d
::
m≠
<
EMsgTy≥
, std::
°rög
>::
c⁄°_ôî©‹
 
°y≥
;

225 i‡((
°y≥
 = 
fgTy≥M≠
.
	`lﬂd
()->
	`föd
–
ty≥
 )Ë!fgTy≥M≠.lﬂd()->
	`íd
()) {

226 i‡(!
	`gC⁄fig
().
	`IsSûít
(Ë|| 
ty≥
==
kFATAL
) {

227 i‡(
	`gC⁄fig
().
	`U£Cﬁ‹
()) {

229 i‡(
ty≥
 =
kHEADER
 ||Åy≥ ==
kWARNING
)

230 
°d
::
cout
 << 
fgPªfix
 << 
löe
 << std::
ídl
;

231 i‡(
ty≥
 =
kINFO
 ||Åy≥ =
kVERBOSE
)

233 
°d
::
cout
 << 
löe
 << std::
ídl
;

236 
°d
::
cout
 << 
fgCﬁ‹M≠
.
	`lﬂd
()->
	`föd
–
ty≥
 )->
£c⁄d
 << "<" << 
°y≥
->£c⁄d << ">" << 
löe
 << "\033[0m" << std::
ídl
;

241 i‡(
ty≥
 =
kINFO
Ë
°d
::
cout
 << 
fgPªfix
 << 
löe
 << std::
ídl
;

242 
°d
::
cout
 << 
fgPªfix
 << "<" << 
°y≥
->
£c⁄d
 << "> " << 
löe
 << std::
ídl
;

248 i‡(
ty≥
 =
kFATAL
) {

249 
°d
::
cout
 << "***>áb‹à¥ogømÉxecuti⁄" << std::
ídl
;

250 
throw
 
°d
::
	`ru¡ime_îr‹
("FATALÉrror");

255 
	}
}

260 
	gTMVA
::
MsgLoggî
& 
TMVA
::MsgLoggî::
	$Endmsg
–
MsgLoggî
& 
loggî
 )

262 
loggî
.
	`Síd
();

263  
loggî
;

264 
	}
}

269 
	gTMVA
::
MsgLoggî
::
	$InôM≠s
()

271 if(!
fgTy≥M≠
) {

272 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>*
tmp
 = 
√w
 std::map<TMVA::EMsgType, std::string>();

274 (*
tmp
)[
kVERBOSE
] = 
°d
::
	`°rög
("VERBOSE");

275 (*
tmp
)[
kDEBUG
] = 
°d
::
	`°rög
("DEBUG");

276 (*
tmp
)[
kINFO
] = 
°d
::
	`°rög
("INFO");

277 (*
tmp
)[
kWARNING
] = 
°d
::
	`°rög
("WARNING");

278 (*
tmp
)[
kERROR
] = 
°d
::
	`°rög
("ERROR");

279 (*
tmp
)[
kFATAL
] = 
°d
::
	`°rög
("FATAL");

280 (*
tmp
)[
kSILENT
] = 
°d
::
	`°rög
("SILENT");

281 (*
tmp
)[
kHEADER
] = 
°d
::
	`°rög
("HEADER");

282 c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>* 
ex≥˘ed
=0;

283 if(
fgTy≥M≠
.
	`com∑ª_exch™ge_°r⁄g
(
ex≥˘ed
,
tmp
)) {

285 
gOwnTy≥M≠
.
	`ª£t
(
tmp
);

288 
dñëe
 
tmp
;

292 if(!
fgCﬁ‹M≠
) {

293 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>*
tmp
 = 
√w
 std::map<TMVA::EMsgType, std::string>();

295 (*
tmp
)[
kVERBOSE
] = 
°d
::
	`°rög
("");

296 (*
tmp
)[
kDEBUG
] = 
°d
::
	`°rög
("\033[34m");

297 (*
tmp
)[
kINFO
] = 
°d
::
	`°rög
("");

298 (*
tmp
)[
kWARNING
] = 
°d
::
	`°rög
("\033[1;31m");

299 (*
tmp
)[
kERROR
] = 
°d
::
	`°rög
("\033[31m");

300 (*
tmp
)[
kFATAL
] = 
°d
::
	`°rög
("\033[37;41;1m");

301 (*
tmp
)[
kSILENT
] = 
°d
::
	`°rög
("\033[30m");

303 c⁄° 
°d
::
m≠
<
TMVA
::
EMsgTy≥
, std::
°rög
>* 
ex≥˘ed
=0;

304 if(
fgCﬁ‹M≠
.
	`com∑ª_exch™ge_°r⁄g
(
ex≥˘ed
,
tmp
)) {

306 
gOwnCﬁ‹M≠
.
	`ª£t
(
tmp
);

309 
dñëe
 
tmp
;

312 
	}
}

	@src/NeuralNet.cxx

3 
	~"TMVA/NeuølNë.h
"

5 
	~"TMVA/MëhodDNN.h
"

7 
«me•a˚
 
	gTMVA


9 
«me•a˚
 
	gDNN


14 
gaussDoubÀ
 (
món
, 
sigma
)

16 
	g°d
::
deÁu…_øndom_ígöe
 
gíî©‹
;

17 
	g°d
::
n‹mÆ_di°ributi⁄
<> 
di°ributi⁄
 (
món
, 
sigma
);

18  
di°ributi⁄
 (
gíî©‹
);

22 
unif‹mDoubÀ
 (
möVÆue
, 
maxVÆue
)

24 
	g°d
::
deÁu…_øndom_ígöe
 
gíî©‹
;

25 
	g°d
::
unif‹m_ªÆ_di°ributi⁄
<> 
di°ributi⁄
(
möVÆue
, 
maxVÆue
);

26  
di°ributi⁄
(
gíî©‹
);

31 
øndomI¡
 (
maxVÆue
)

33 
	g°d
::
deÁu…_øndom_ígöe
 
gíî©‹
;

34 
	g°d
::
unif‹m_öt_di°ributi⁄
<> 
di°ributi⁄
(0,
maxVÆue
-1);

35  
di°ributi⁄
(
gíî©‹
);

39 
°udíâDoubÀ
 (
di°ributi⁄P¨amëî
)

41 
	g°d
::
deÁu…_øndom_ígöe
 
gíî©‹
;

42 
	g°d
::
°udít_t_di°ributi⁄
<> 
di°ributi⁄
 (
di°ributi⁄P¨amëî
);

43  
di°ributi⁄
 (
gíî©‹
);

47 
	gLayîD©a
::
LayîD©a
 (
size_t
 
öputSize
)

48 : 
m_hasDr›Out
 (
Ál£
)

49 , 
m_isI≈utLayî
 (
åue
)

50 , 
m_hasWeights
 (
Ál£
)

51 , 
m_hasGødõ¡s
 (
Ál£
)

52 , 
m_eModeOuçut
 (
ModeOuçutVÆues
::
DIRECT
)

54 
m_size
 = 
öputSize
;

55 
	gm_dñès
.
assign
 (
m_size
, 0);

60 
	gLayîD©a
::
LayîD©a
 (
c⁄°_ôî©‹_ty≥
 
ôI≈utBegö
, c⁄°_ôî©‹_ty≥ 
ôI≈utEnd
, 
ModeOuçutVÆues
 
eModeOuçut
)

61 : 
m_hasDr›Out
 (
Ál£
)

62 , 
m_isI≈utLayî
 (
åue
)

63 , 
m_hasWeights
 (
Ál£
)

64 , 
m_hasGødõ¡s
 (
Ál£
)

65 , 
m_eModeOuçut
 (
eModeOuçut
)

67 
	gm_ôI≈utBegö
 = 
ôI≈utBegö
;

68 
	gm_ôI≈utEnd
 = 
ôI≈utEnd
;

69 
	gm_size
 = 
°d
::
di°™˚
 (
ôI≈utBegö
, 
ôI≈utEnd
);

70 
	gm_dñès
.
assign
 (
m_size
, 0);

76 
	gLayîD©a
::
LayîD©a
 (
size_t
 
_size
,

77 
c⁄°_ôî©‹_ty≥
 
ôWeightBegö
,

78 
ôî©‹_ty≥
 
ôGødõ¡Begö
,

79 
°d
::
sh¨ed_±r
<°d::
fun˘i⁄
<()>> 
_a˘iv©i⁄Fun˘i⁄
,

80 
°d
::
sh¨ed_±r
<°d::
fun˘i⁄
<()>> 
_övî£A˘iv©i⁄Fun˘i⁄
,

81 
ModeOuçutVÆues
 
eModeOuçut
)

82 : 
m_size
 (
_size
)

83 , 
m_hasDr›Out
 (
Ál£
)

84 , 
m_ôC⁄°WeightBegö
 (
ôWeightBegö
)

85 , 
m_ôGødõ¡Begö
 (
ôGødõ¡Begö
)

86 , 
m_a˘iv©i⁄Fun˘i⁄
 (
_a˘iv©i⁄Fun˘i⁄
)

87 , 
m_övî£A˘iv©i⁄Fun˘i⁄
 (
_övî£A˘iv©i⁄Fun˘i⁄
)

88 , 
m_isI≈utLayî
 (
Ál£
)

89 , 
m_hasWeights
 (
åue
)

90 , 
m_hasGødõ¡s
 (
åue
)

91 , 
m_eModeOuçut
 (
eModeOuçut
)

93 
	gm_vÆues
.
assign
 (
_size
, 0);

94 
	gm_dñès
.
assign
 (
_size
, 0);

95 
	gm_vÆueGødõ¡s
.
assign
 (
_size
, 0);

101 
	gLayîD©a
::
LayîD©a
 (
size_t
 
_size
, 
c⁄°_ôî©‹_ty≥
 
ôWeightBegö
,

102 
°d
::
sh¨ed_±r
<°d::
fun˘i⁄
<()>> 
_a˘iv©i⁄Fun˘i⁄
,

103 
ModeOuçutVÆues
 
eModeOuçut
)

104 : 
m_size
 (
_size
)

105 , 
m_hasDr›Out
 (
Ál£
)

106 , 
m_ôC⁄°WeightBegö
 (
ôWeightBegö
)

107 , 
m_a˘iv©i⁄Fun˘i⁄
 (
_a˘iv©i⁄Fun˘i⁄
)

108 , 
m_övî£A˘iv©i⁄Fun˘i⁄
 ()

109 , 
m_isI≈utLayî
 (
Ál£
)

110 , 
m_hasWeights
 (
åue
)

111 , 
m_hasGødõ¡s
 (
Ál£
)

112 , 
m_eModeOuçut
 (
eModeOuçut
)

114 
	gm_vÆues
.
assign
 (
_size
, 0);

119 
ty≥«me
 
	gLayîD©a
::
c⁄èöî_ty≥
 
LayîD©a
::
compuãProbabûôõs
 () const

121 
c⁄èöî_ty≥
 
¥obabûôõsC⁄èöî
;

122 i‡(
	gTMVA
::
DNN
::
isFœgSë
 (
ModeOuçutVÆues
::
SIGMOID
, 
m_eModeOuçut
))

124 
	g°d
::
å™sf‹m
 (
begö
 (
m_vÆues
), 
íd
 (m_vÆues), 
°d
::
back_ö£πî
 (
¥obabûôõsC⁄èöî
), (*
Sigmoid
.
gë
 ()));

126 i‡(
	gTMVA
::
DNN
::
isFœgSë
 (
ModeOuçutVÆues
::
SOFTMAX
, 
m_eModeOuçut
))

128 
	gsum
 = 0;

129 
	g¥obabûôõsC⁄èöî
 = 
m_vÆues
;

130 
	g°d
::
f‹_óch
 (
begö
 (
¥obabûôõsC⁄èöî
), 
íd
 (¥obabûôõsC⁄èöî), [&
sum
](& 
p
){Ö = 
°d
::
exp
 (p); sum +=Ö; });

131 i‡(
	gsum
 != 0)

132 
°d
::
f‹_óch
 (
begö
 (
¥obabûôõsC⁄èöî
), 
íd
 (¥obabûôõsC⁄èöî), [
sum
 ](& 
p
){Ö /= sum; });

136 
	g¥obabûôõsC⁄èöî
.
assign
 (
begö
 (
m_vÆues
), 
íd
 (m_values));

138  
	g¥obabûôõsC⁄èöî
;

145 
	gLayî
::
Layî
 (
size_t
 
_numNodes
, 
EnumFun˘i⁄
 
_a˘iv©i⁄Fun˘i⁄
, 
ModeOuçutVÆues
 
eModeOuçutVÆues
)

146 : 
m_numNodes
 (
_numNodes
)

147 , 
m_eModeOuçutVÆues
 (
eModeOuçutVÆues
)

148 , 
m_a˘iv©i⁄Fun˘i⁄Ty≥
 (
_a˘iv©i⁄Fun˘i⁄
)

150 
size_t
 
	giNode
 = 0; iNodê< 
	g_numNodes
; ++iNode)

152 autÿ
	ga˘Fnc
 = 
Löór
;

153 autÿ
	gövA˘Fnc
 = 
InvLöór
;

154 
	g_a˘iv©i⁄Fun˘i⁄
)

156 
	gEnumFun˘i⁄
::
ZERO
:

157 
a˘Fnc
 = 
ZîoFnc
;

158 
	gövA˘Fnc
 = 
ZîoFnc
;

160 
	gEnumFun˘i⁄
::
LINEAR
:

161 
a˘Fnc
 = 
Löór
;

162 
	gövA˘Fnc
 = 
InvLöór
;

164 
	gEnumFun˘i⁄
::
TANH
:

165 
a˘Fnc
 = 
T™h
;

166 
	gövA˘Fnc
 = 
InvT™h
;

168 
	gEnumFun˘i⁄
::
RELU
:

169 
a˘Fnc
 = 
ReLU
;

170 
	gövA˘Fnc
 = 
InvReLU
;

172 
	gEnumFun˘i⁄
::
SYMMRELU
:

173 
a˘Fnc
 = 
SymmReLU
;

174 
	gövA˘Fnc
 = 
InvSymmReLU
;

176 
	gEnumFun˘i⁄
::
TANHSHIFT
:

177 
a˘Fnc
 = 
T™hShi·
;

178 
	gövA˘Fnc
 = 
InvT™hShi·
;

180 
	gEnumFun˘i⁄
::
SOFTSIGN
:

181 
a˘Fnc
 = 
So·Sign
;

182 
	gövA˘Fnc
 = 
InvSo·Sign
;

184 
	gEnumFun˘i⁄
::
SIGMOID
:

185 
a˘Fnc
 = 
Sigmoid
;

186 
	gövA˘Fnc
 = 
InvSigmoid
;

188 
	gEnumFun˘i⁄
::
GAUSS
:

189 
a˘Fnc
 = 
Gauss
;

190 
	gövA˘Fnc
 = 
InvGauss
;

192 
	gEnumFun˘i⁄
::
GAUSSCOMPLEMENT
:

193 
a˘Fnc
 = 
GaussCom∂emít
;

194 
	gövA˘Fnc
 = 
InvGaussCom∂emít
;

197 
	gm_a˘iv©i⁄Fun˘i⁄
 = 
a˘Fnc
;

198 
	gm_övî£A˘iv©i⁄Fun˘i⁄
 = 
övA˘Fnc
;

211 
	gSëtögs
::
Sëtögs
 (
TSåög
 
«me
,

212 
size_t
 
_c⁄vîgí˚Sãps
, size_à
_b©chSize
, size_à
_ã°Rïëôi⁄s
,

213 
_Á˘‹WeightDeˇy
, 
EnumReguœriz©i⁄
 
eReguœriz©i⁄
,

214 
MöimizîTy≥
 
_eMöimizîTy≥
, 
_À¨nögR©e
,

215 
_momítum
, 
_ª≥tôi⁄s
, 
boﬁ
 
_u£Mu…ôhªadög
)

216 : 
m_timî
 (100, 
«me
)

217 , 
m_möProgªss
 (0)

218 , 
m_maxProgªss
 (100)

219 , 
m_c⁄vîgí˚Sãps
 (
_c⁄vîgí˚Sãps
)

220 , 
m_b©chSize
 (
_b©chSize
)

221 , 
m_ã°Rïëôi⁄s
 (
_ã°Rïëôi⁄s
)

222 , 
m_Á˘‹WeightDeˇy
 (
_Á˘‹WeightDeˇy
)

223 , 
cou¡_E
 (0)

224 , 
cou¡_dE
 (0)

225 , 
cou¡_mb_E
 (0)

226 , 
cou¡_mb_dE
 (0)

227 , 
m_ªguœriz©i⁄
 (
eReguœriz©i⁄
)

228 , 
fLó∫ögR©e
 (
_À¨nögR©e
)

229 , 
fMomítum
 (
_momítum
)

230 , 
fRïëôi⁄s
 (
_ª≥tôi⁄s
)

231 , 
fMöimizîTy≥
 (
_eMöimizîTy≥
)

232 , 
m_c⁄vîgí˚Cou¡
 (0)

233 , 
m_maxC⁄vîgí˚Cou¡
 (0)

234 , 
m_möEº‹
 (1e10)

235 , 
m_u£Mu…ôhªadög
 (
_u£Mu…ôhªadög
)

236 , 
fM⁄ô‹ög
 (
NULL
)

240 
	gSëtögs
::~
Sëtögs
 ()

260 
Cœssifiˇti⁄Sëtögs
::
°¨tTøöCy˛e
 ()

262 i‡(
fM⁄ô‹ög
)

264 
¸óã
 ("ROC", 100, 0, 1, 100, 0, 1);

265 
¸óã
 ("Significance", 100, 0, 1, 100, 0, 3);

266 
¸óã
 ("OutputSig", 100, 0, 1);

267 
¸óã
 ("OutputBkg", 100, 0, 1);

268 
	gfM⁄ô‹ög
->
Pro˚ssEvíts
 ();

275 
	gCœssifiˇti⁄Sëtögs
::
ídTøöCy˛e
 ()

277 i‡(
fM⁄ô‹ög
ËfM⁄ô‹ög->
Pro˚ssEvíts
 ();

283 
	gCœssifiˇti⁄Sëtögs
::
ã°Sam∂e
 (, 
ouçut
, 
èrgë
, 
weight
)

286 
	gm_ouçut
.
push_back
 (
ouçut
);

287 
	gm_èrgës
.
push_back
 (
èrgë
);

288 
	gm_weights
.
push_back
 (
weight
);

295 
	gCœssifiˇti⁄Sëtögs
::
°¨tTe°Cy˛e
 ()

297 
m_ouçut
.
˛ór
 ();

298 
	gm_èrgës
.
˛ór
 ();

299 
	gm_weights
.
˛ór
 ();

305 
	gCœssifiˇti⁄Sëtögs
::
ídTe°Cy˛e
 ()

307 i‡(
m_ouçut
.
em±y
 ())

309 
	gmöVÆ
 = *
°d
::
mö_ñemít
 (
begö
 (
m_ouçut
), 
íd
 (m_output));

310 
	gmaxVÆ
 = *
°d
::
max_ñemít
 (
begö
 (
m_ouçut
), 
íd
 (m_output));

311 c⁄° 
size_t
 
	gnumBösROC
 = 1000;

312 c⁄° 
size_t
 
	gnumBösD©a
 = 100;

314 
	g°d
::
ve˘‹
<> 
åuePosôives
 (
numBösROC
+1, 0);

315 
	g°d
::
ve˘‹
<> 
Ál£Posôives
 (
numBösROC
+1, 0);

316 
	g°d
::
ve˘‹
<> 
åueNeg©ives
 (
numBösROC
+1, 0);

317 
	g°d
::
ve˘‹
<> 
Ál£Neg©ives
 (
numBösROC
+1, 0);

319 
	g°d
::
ve˘‹
<> 
x
 (
numBösD©a
, 0);

320 
	g°d
::
ve˘‹
<> 
d©Sig
 (
numBösD©a
+1, 0);

321 
	g°d
::
ve˘‹
<> 
d©Bkg
 (
numBösD©a
+1, 0);

323 
	gböSizeROC
 = (
maxVÆ
 - 
möVÆ
)/()
numBösROC
;

324 
	gböSizeD©a
 = (
maxVÆ
 - 
möVÆ
)/()
numBösD©a
;

326 
	gsumWeightsSig
 = 0.0;

327 
	gsumWeightsBkg
 = 0.0;

329 
size_t
 
	gb
 = 0; b < 
	gnumBösD©a
; ++b)

331 
	gböD©a
 = 
möVÆ
 + 
b
*
böSizeD©a
;

332 
	gx
.
©
 (
b
Ë
böD©a
;

335 i‡(
Ábs
(
böSizeROC
) < 0.0001)

338 
size_t
 
	gi
 = 0, 
	giEnd
 = 
m_ouçut
.
size
 (); i < iEnd; ++i)

340 
	gvÆ
 = 
m_ouçut
.
©
 (
i
);

341 
	gåuth
 = 
m_èrgës
.
©
 (
i
);

342 
	gweight
 = 
m_weights
.
©
 (
i
);

344 
boﬁ
 
	gisSig«l
 = (
åuth
 > 0.5 ? 
åue
 : 
Ál£
);

346 i‡(
	gm_sumOfSigWeights
 !0 && 
m_sumOfBkgWeights
 != 0)

348 i‡(
isSig«l
)

349 
weight
 *
m_sumOfSigWeights
;

351 
	gweight
 *
m_sumOfBkgWeights
;

354 
size_t
 
	gböROC
 = (
vÆ
-
möVÆ
)/
böSizeROC
;

355 
size_t
 
	gböD©a
 = (
vÆ
-
möVÆ
)/
böSizeD©a
;

357 i‡(
	gisSig«l
)

359 
size_t
 
	gn
 = 0;Ç <
böROC
; ++n)

361 
	gåuePosôives
.
©
 (
n
Ë+
weight
;

363 
size_t
 
	gn
 = 
böROC
+1;Ç < 
	gnumBösROC
; ++n)

365 
	gÁl£Neg©ives
.
©
 (
n
Ë+
weight
;

368 
	gd©Sig
.
©
 (
böD©a
Ë+
weight
;

369 
	gsumWeightsSig
 +
weight
;

373 
size_t
 
	gn
 = 0;Ç <
böROC
; ++n)

375 
	gÁl£Posôives
.
©
 (
n
Ë+
weight
;

377 
size_t
 
	gn
 = 
böROC
+1;Ç < 
	gnumBösROC
; ++n)

379 
	gåueNeg©ives
.
©
 (
n
Ë+
weight
;

382 
	gd©Bkg
.
©
 (
böD©a
Ë+
weight
;

383 
	gsumWeightsBkg
 +
weight
;

387 
	g°d
::
ve˘‹
<> 
sigEff
;

388 
	g°d
::
ve˘‹
<> 
backRej
;

390 
	gbe°Signifiˇn˚
 = 0;

391 
	gbe°CutSignifiˇn˚
 = 0;

393 
	gnumEvítsSˇÀFa˘‹
 = 1.0;

394 i‡(
	gm_sˇÀToNumEvíts
 > 0)

396 
size_t
 
	gnumEvíts
 = 
m_ouçut
.
size
 ();

397 
	gnumEvítsSˇÀFa˘‹
 = (
m_sˇÀToNumEvíts
)/(
numEvíts
);

400 
˛ór
 ("ROC");

401 
˛ór
 ("Significance");

403 
size_t
 
	gi
 = 0; i < 
	gnumBösROC
; ++i)

405 
	gç
 = 
åuePosôives
.
©
 (
i
Ë* 
numEvítsSˇÀFa˘‹
;

406 
	gÂ
 = 
Ál£Posôives
.
©
 (
i
Ë* 
numEvítsSˇÀFa˘‹
;

407 
	gä
 = 
åueNeg©ives
.
©
 (
i
Ë* 
numEvítsSˇÀFa˘‹
;

408 
	g‚
 = 
Ál£Neg©ives
.
©
 (
i
Ë* 
numEvítsSˇÀFa˘‹
;

410 
	g£ff
 = (
ç
+
‚
 == 0.0 ? 1.0 : (tp / (tp+fn)));

411 
	gbªj
 = (
ä
+
Â
 == 0.0 ? 0.0 : (tn / (tn+fp)));

413 
	gsigEff
.
push_back
 (
£ff
);

414 
	gbackRej
.
push_back
 (
bªj
);

417 
addPoöt
 ("ROC", 
£ff
, 
bªj
);

420 
	gcuºítCut
 = (
i
 * 
böSizeROC
)+
möVÆ
;

422 
	gsig
 = 
ç
;

423 
	gbkg
 = 
Â
;

424 
	gsignifiˇn˚
 = 
sig
 / 
sqπ
 (sig + 
bkg
);

425 i‡(
	gsignifiˇn˚
 > 
	gbe°Signifiˇn˚
)

427 
	gbe°Signifiˇn˚
 = 
signifiˇn˚
;

428 
	gbe°CutSignifiˇn˚
 = 
cuºítCut
;

431 
addPoöt
 ("Signifiˇn˚", 
cuºítCut
, 
signifiˇn˚
);

435 
	gm_signifiˇn˚s
.
push_back
 (
be°Signifiˇn˚
);

436 
size_t
 
	gã°Cy˛e
 = 0;

438 
˛ór
 ("OutputSig");

439 
˛ór
 ("OutputBkg");

440 
size_t
 
	gi
 = 0; i < 
	gnumBösD©a
; ++i)

442 
addPoöt
 ("OuçutSig", 
x
.
©
 (
i
), 
d©Sig
.© (i)/
sumWeightsSig
);

443 
addPoöt
 ("OuçutBkg", 
x
.
©
 (
i
), 
d©Bkg
.© (i)/
sumWeightsBkg
);

449 ++
	gã°Cy˛e
;

451 i‡(
	gfM⁄ô‹ög
)

453 
∂Ÿ
 ("ROC", "", 2, 
kRed
);

454 
∂Ÿ
 ("Signifiˇn˚", "", 3, 
kRed
);

455 
∂Ÿ
 ("OuçutSig", "", 4, 
kRed
);

456 
∂Ÿ
 ("OuçutBkg", "ßme", 4, 
kBlue
);

457 
	gfM⁄ô‹ög
->
Pro˚ssEvíts
 ();

460 
	gm_cutVÆue
 = 
be°CutSignifiˇn˚
;

467 
boﬁ
 
	gSëtögs
::
hasC⁄vîged
 (
ã°Eº‹
)

471 i‡(
ã°Eº‹
 < 
m_möEº‹
*0.999)

473 
m_c⁄vîgí˚Cou¡
 = 0;

474 
	gm_möEº‹
 = 
ã°Eº‹
;

478 ++
	gm_c⁄vîgí˚Cou¡
;

479 
	gm_maxC⁄vîgí˚Cou¡
 = 
°d
::
max
 (
m_c⁄vîgí˚Cou¡
, 
m_maxC⁄vîgí˚Cou¡
);

483 i‡(
	gm_c⁄vîgí˚Cou¡
 >
c⁄vîgí˚Sãps
 (Ë|| 
ã°Eº‹
 <= 0)

484  
åue
;

486  
	gÁl£
;

494 
	gCœssifiˇti⁄Sëtögs
::
£tWeightSums
 (
sumOfSigWeights
, 
sumOfBkgWeights
)

496 
	gm_sumOfSigWeights
 = 
sumOfSigWeights
; 
	gm_sumOfBkgWeights
 = 
sumOfBkgWeights
;

502 
	gCœssifiˇti⁄Sëtögs
::
£tResu…Compuèti⁄
 (

503 
°d
::
°rög
 
_fûeNameNëC⁄fig
,

504 
°d
::
°rög
 
_fûeNameResu…
,

505 
°d
::
ve˘‹
<
P©ã∫
>* 
_ªsu…P©ã∫C⁄èöî
)

507 
m_pResu…P©ã∫C⁄èöî
 = 
_ªsu…P©ã∫C⁄èöî
;

508 
	gm_fûeNameResu…
 = 
_fûeNameResu…
;

509 
	gm_fûeNameNëC⁄fig
 = 
_fûeNameNëC⁄fig
;

522 
size_t
 
	gNë
::
numWeights
 (size_à
åaöögSèπLayî
) const

524 
size_t
 
num
 (0);

525 
size_t
 
ödex
 (0);

526 
size_t
 
¥evNodes
 (
öputSize
 ());

527 auto& 
	gœyî
 : 
m_œyîs
)

529 i‡(
ödex
 >
åaöögSèπLayî
)

530 
num
 +
œyî
.
numWeights
 (
¥evNodes
);

531 
	g¥evNodes
 = 
œyî
.
numNodes
 ();

532 ++
	gödex
;

534  
	gnum
;

538 
size_t
 
	gNë
::
numNodes
 (size_à
åaöögSèπLayî
) const

540 
size_t
 
num
 (0);

541 
size_t
 
ödex
 (0);

542 auto& 
	gœyî
 : 
m_œyîs
)

544 i‡(
ödex
 >
åaöögSèπLayî
)

545 
num
 +
œyî
.
numNodes
 ();

546 ++
	gödex
;

548  
	gnum
;

554 
	gNë
::
fûlDr›C⁄èöî
 (
Dr›C⁄èöî
& 
dr›C⁄èöî
, 
dr›Fø˘i⁄
, 
size_t
 
_numNodes
) const

556 
size_t
 
	gnumDr›s
 = 
dr›Fø˘i⁄
 * 
_numNodes
;

557 i‡(
	gnumDr›s
 >
_numNodes
)

558 
numDr›s
 = 
_numNodes
 - 1;

559 
	gdr›C⁄èöî
.
ö£π
 (
íd
 (
dr›C⁄èöî
), 
_numNodes
-
numDr›s
, 
åue
);

560 
	gdr›C⁄èöî
.
ö£π
 (
íd
 (
dr›C⁄èöî
), 
numDr›s
, 
Ál£
);

562 
	g°d
::
øndom_shufÊe
 (
íd
 (
dr›C⁄èöî
)-
_numNodes
,Énd (dropContainer));

	@src/Node.cxx

40 
	~<°dex˚±
>

41 
	~<iosfwd
>

42 
	~<io°ªam
>

44 
	~"TMVA/Node.h
"

45 
	~"TMVA/Toﬁs.h
"

47 
CœssImp
(
TMVA
::
Node
);

49 
I¡_t
 
	gTMVA
::
Node
::
fgCou¡
 = 0;

51 
	gTMVA
::
Node
::
	$Node
()

52 : 
	`fP¨ít
–
NULL
 ),

53 
	`fLe·
 ( 
NULL
),

54 
	`fRight
 ( 
NULL
 ),

55 
	`fPos
 ( 'u' ),

56 
	`fDïth
 ( 0 ),

57 
	$fP¨ítTªe
–
NULL
 )

60 
fgCou¡
++;

61 
	}
}

66 
	gTMVA
::
Node
::
	$Node
–
Node
* 
p
, 
pos
 )

67 : 
	`fP¨ít
 ( 
p
 ),

68 
	`fLe·
 ( 
NULL
 ),

69 
	`fRight
–
NULL
 ),

70 
	`fPos
 ( 
pos
 ),

71 
	`fDïth
–
p
->
	`GëDïth
() + 1),

72 
	`fP¨ítTªe
(
p
->
	$GëP¨ítTªe
())

74 
fgCou¡
++;

75 i‡(
fPos
 ='l' ) 
p
->
	`SëLe·
(
this
);

76 i‡(
fPos
 ='r' ) 
p
->
	`SëRight
(
this
);

77 
	}
}

84 
	gTMVA
::
Node
::
	$Node
 ( c⁄° 
Node
 &
n
 )

85 : 
	`fP¨ít
–
NULL
 ),

86 
	`fLe·
 ( 
NULL
),

87 
	`fRight
 ( 
NULL
 ),

88 
	`fPos
 ( 
n
.
fPos
 ),

89 
	`fDïth
 ( 
n
.
fDïth
 ),

90 
	$fP¨ítTªe
–
NULL
 )

92 
fgCou¡
++;

93 
	}
}

98 
	gTMVA
::
Node
::~
	$Node
()

100 
fgCou¡
--;

101 
	}
}

106 
	gTMVA
::
Node
::
	$GëCou¡
()

108  
fgCou¡
;

109 
	}
}

114 
I¡_t
 
	gTMVA
::
Node
::
	$Cou¡MeAndAŒDaughãrs
() const

116 
I¡_t
 
n
=1;

117 i‡(
this
->
	`GëLe·
(Ë!
NULL
)

118 
n
+
this
->
	`GëLe·
()->
	`Cou¡MeAndAŒDaughãrs
();

119 i‡(
this
->
	`GëRight
(Ë!
NULL
)

120 
n
+
this
->
	`GëRight
()->
	`Cou¡MeAndAŒDaughãrs
();

122  
n
;

123 
	}
}

129 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<<–
°d
::o°ªam& 
os
, c⁄° 
	gTMVA
::
Node
& 
node
 )

131 
node
.
Pröt
(
os
);

132  
	gos
;

138 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<<–
°d
::o°ªam& 
os
, c⁄° 
	gTMVA
::
Node
* 
node
 )

140 i‡(
node
!=
NULL
Ënode->
Pröt
(
os
);

141  
	gos
;

147 * 
	gTMVA
::
Node
::
	$AddXMLTo
–* 
∑ª¡
 ) const

149 
°d
::
°rög°ªam
 
	`s
("");

150 
	`AddC⁄ã¡ToNode
(
s
);

151 * 
node
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Node", 
s
.
	`°r
().
	`c_°r
());

152 
	`gToﬁs
().
	`AddAâr
–
node
, "pos", 
fPos
 );

153 
	`gToﬁs
().
	`AddAâr
–
node
, "dïth", 
fDïth
 );

154 
this
->
	`AddAâribuãsToNode
(
node
);

155 i‡(
this
->
	`GëLe·
()Ëthis->GëLe·()->
	`AddXMLTo
(
node
);

156 i‡(
this
->
	`GëRight
()Ëthis->GëRight()->
	`AddXMLTo
(
node
);

157  
node
;

158 
	}
}

163 
	gTMVA
::
Node
::
	$RódXML
–* 
node
, 
UI¡_t
 
tmva_Vîsi⁄_Code
 )

165 
	`RódAâribuãs
(
node
, 
tmva_Vîsi⁄_Code
);

166 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
node
);

167 i‡(
c⁄ã¡
) {

168 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

169 
	`RódC⁄ã¡
(
s
);

171 
	`gToﬁs
().
	`RódAâr
–
node
, "pos", 
fPos
 );

172 
	`gToﬁs
().
	`RódAâr
–
node
, "dïth", 
fDïth
 );

174 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
node
);

175 
ch
) {

176 
Node
* 
n
 = 
	`Cª©eNode
();

177 
n
->
	`RódXML
(
ch
, 
tmva_Vîsi⁄_Code
);

178 i‡(
n
->
	`GëPos
()=='l'Ë{ 
this
->
	`SëLe·
(n); }

179 if(
n
->
	`GëPos
()=='r'Ë{ 
this
->
	`SëRight
(n); }

181 
°d
::
cout
 << "√ôhîÜe·Ç‹Ñight" << std::
ídl
;

183 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

185 
	}
}

	@src/OptimizeConfigParameters.cxx

28 
	~"TMVA/O±imizeC⁄figP¨amëîs.h
"

30 
	~"TMVA/D©aSë.h
"

31 
	~"TMVA/D©aSëInfo.h
"

32 
	~"TMVA/Evít.h
"

33 
	~"TMVA/IFôãrT¨gë.h
"

34 
	~"TMVA/FôãrBa£.h
"

35 
	~"TMVA/GíëicFôãr.h
"

36 
	~"TMVA/IMëhod.h
"

37 
	~"TMVA/I¡îvÆ.h
"

38 
	~"TMVA/MëhodBa£.h
"

39 
	~"TMVA/MëhodFDA.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/MöuôFôãr.h
"

42 
	~"TMVA/PDF.h
"

43 
	~"TMVA/Toﬁs.h
"

44 
	~"TMVA/Ty≥s.h
"

46 
	~"TDúe˘‹y.h
"

47 
	~"TGøph.h
"

48 
	~"TH1.h
"

49 
	~"TH2.h
"

50 
	~"TM©h.h
"

52 
	~<c°dlib
>

53 
	~<limôs
>

56 
CœssImp
(
TMVA
::
O±imizeC⁄figP¨amëîs
);

61 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::O±imizeC⁄figP¨amëîs(
MëhodBa£
 * c⁄° 
mëhod
, 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*> 
tu√P¨amëîs
, TSåög 
fomTy≥
, TSåög 
›timiz©i⁄FôTy≥
)

62 : 
fMëhod
(
mëhod
),

63 
fTu√P¨amëîs
(
tu√P¨amëîs
),

64 
fFOMTy≥
(
fomTy≥
),

65 
fO±imiz©i⁄FôTy≥
(
›timiz©i⁄FôTy≥
),

66 
fMvaSig
(
NULL
),

67 
fMvaBkg
(
NULL
),

68 
fMvaSigFöeBö
(
NULL
),

69 
fMvaBkgFöeBö
(
NULL
),

70 
	$fNŸD⁄eYë
(
kFALSE
)

72 
°d
::
°rög
 
«me
 = "OptimizeConfigParameters_";

73 
«me
 +
°d
::
	`°rög
(
	`GëMëhod
()->
	`GëName
());

74 
fLoggî
 = 
√w
 
	`MsgLoggî
(
«me
);

75 i‡(
fMëhod
->
	`DoRegªssi⁄
()){

76 
	`Log
(Ë<< 
kFATAL
 << " ERROR: Sorry, Regression isÇot yet implement foráutomaticÖarameter optimization"

77 << " -->Éxô" << 
Endl
;

80 
	`Log
(Ë<< 
kINFO
 << "Automatic optimisation ofÅuningÖarameters in "

81 << 
	`GëMëhod
()->
	`GëName
(Ë<< " u£s:" << 
Endl
;

83 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

84 
ô
=
fTu√P¨amëîs
.
	`begö
(); it!=fTu√P¨amëîs.
	`íd
();it++) {

85 
	`Log
(Ë<< 
kINFO
 << 
ô
->
fú°


86 << " i¿øngê‰om: " << 
ô
->
£c⁄d
->
	`GëMö
()

87 << "Åo: " << 
ô
->
£c⁄d
->
	`GëMax
()

88 << " i¿: " << 
ô
->
£c⁄d
->
	`GëNbös
() << " steps"

89 << 
Endl
;

91 
	`Log
(Ë<< 
kINFO
 << " usögÅhê›ti⁄s: " << 
fFOMTy≥
 << "ánd " << 
fO±imiz©i⁄FôTy≥
 << 
Endl
;

92 
	}
}

97 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::~
	$O±imizeC⁄figP¨amëîs
()

99 if(!
	`GëMëhod
()->
	`IsSûítFûe
()ËGëMëhod()->
	`Ba£Dú
()->
	`cd
();

100 
I¡_t
 
n
=
	`I¡_t
(
fFOMvsIãr
.
	`size
());

101 
Flﬂt_t
 *
x
 = 
√w
 Flﬂt_t[
n
];

102 
Flﬂt_t
 *
y
 = 
√w
 Flﬂt_t[
n
];

103 
Flﬂt_t
 
ymö
=+999999999;

104 
Flﬂt_t
 
ymax
=-999999999;

106 
I¡_t
 
i
=0;i<
n
;i++){

107 
x
[
i
] = 
	`Flﬂt_t
(i);

108 
y
[
i
] = 
fFOMvsIãr
[i];

109 i‡(
ymö
>
y
[
i
]) ymin=y[i];

110 i‡(
ymax
<
y
[
i
]) ymax=y[i];

113 
TH2D
 *
h
=
√w
 
	`TH2D
(
	`TSåög
(
	`GëMëhod
()->
	`GëName
())+"_FOMvsIãrFøme","",2,0,
n
,2,
ymö
*0.95,
ymax
*1.05);

114 
h
->
	`SëXTôÀ
("#ôî©i⁄ "+
fO±imiz©i⁄FôTy≥
);

115 
h
->
	`SëYTôÀ
(
fFOMTy≥
);

116 
TGøph
 *
gFOMvsIãr
 = 
√w
 
	`TGøph
(
n
,
x
,
y
);

117 
gFOMvsIãr
->
	`SëName
((
	`TSåög
(
	`GëMëhod
()->
	`GëName
())+"_FOMvsIãr").
	`D©a
());

118 if(!
	`GëMëhod
()->
	`IsSûítFûe
()Ë
gFOMvsIãr
->
	`Wrôe
();

119 if(!
	`GëMëhod
()->
	`IsSûítFûe
()Ë
h
->
	`Wrôe
();

121 
dñëe
 [] 
x
;

122 
dñëe
 [] 
y
;

124 
	}
}

128 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$›timize
()

130 i‡(
fO±imiz©i⁄FôTy≥
 ="Sˇn" ) 
this
->
	`›timizeSˇn
();

131 i‡(
fO±imiz©i⁄FôTy≥
 ="FôGA" || fO±imiz©i⁄FôTy≥ ="Möuô" ) 
this
->
	`›timizeFô
();

133 
	`Log
(Ë<< 
kFATAL
 << "You havêcho£¿a†›timiz©i⁄Åy≥ " << 
fO±imiz©i⁄FôTy≥


134 << "Åh© i†nŸ (yëËcoded -->Éxô()" << 
Endl
;

137 
	`Log
(Ë<< 
kINFO
 << "F‹ " << 
	`GëMëhod
()->
	`GëName
(Ë<< "Åhê›timized P¨amëî†¨e: " << 
Endl
;

138 
°d
::
m≠
<
TSåög
,
DoubÀ_t
>::
ôî©‹
 
ô
;

139 
ô
=
fTu√dP¨amëîs
.
	`begö
(); it!fTu√dP¨amëîs.
	`íd
(); it++){

140 
	`Log
(Ë<< 
kINFO
 << 
ô
->
fú°
 << " = " << it->
£c⁄d
 << 
Endl
;

142  
fTu√dP¨amëîs
;

144 
	}
}

150 
	g°d
::
ve˘‹
< > 
TMVA
::
O±imizeC⁄figP¨amëîs
::
GëSˇnIndi˚s
–
vÆ
, 
°d
::ve˘‹<> 
ba£
){

151 
°d
::
ve˘‹
 < > 
ödi˚s
;

152 
UI¡_t
 
	gi
=0; i< 
	gba£
.
size
(); i++){

153 
	gödi˚s
.
push_back
(
vÆ
 % 
ba£
[
i
] );

154 
	gvÆ
 = –
Êo‹
–(
vÆ
Ë/ (
ba£
[
i
]) ) );

156  
	gödi˚s
;

165 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$›timizeSˇn
()

168 
DoubÀ_t
 
be°FOM
=-1000000, 
cuºítFOM
;

170 
°d
::
m≠
<
TSåög
,
DoubÀ_t
> 
cuºítP¨amëîs
;

171 
°d
::
m≠
<
TSåög
,
TMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

175 
cuºítP¨amëîs
.
	`˛ór
();

176 
fTu√dP¨amëîs
.
	`˛ór
();

178 
ô
=
fTu√P¨amëîs
.
	`begö
(); it!=fTu√P¨amëîs.
	`íd
(); it++){

179 
cuºítP¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
DoubÀ_t
>(
ô
->
fú°
,ô->
£c⁄d
->
	`GëMö
()));

180 
fTu√dP¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
DoubÀ_t
>(
ô
->
fú°
,ô->
£c⁄d
->
	`GëMö
()));

187 
°d
::
ve˘‹
< std::ve˘‹ <
DoubÀ_t
> > 
v
;

188 
ô
=
fTu√P¨amëîs
.
	`begö
(); it!=fTu√P¨amëîs.
	`íd
(); it++){

189 
°d
::
ve˘‹
< 
DoubÀ_t
 > 
tmp
;

190 
I¡_t
 
k
=0; k<
ô
->
£c⁄d
->
	`GëNbös
(); k++){

191 
tmp
.
	`push_back
(
ô
->
£c⁄d
->
	`GëEÀmít
(
k
));

193 
v
.
	`push_back
(
tmp
);

195 
I¡_t
 
NtŸ
 = 1;

196 
°d
::
ve˘‹
< > 
NödividuÆ
;

197 
UI¡_t
 
i
=0; i<
v
.
	`size
(); i++) {

198 
NtŸ
 *
v
[
i
].
	`size
();

199 
NödividuÆ
.
	`push_back
(
v
[
i
].
	`size
());

203 
i
=0; i<
NtŸ
; i++){

204 
UI¡_t
 
ödex
=0;

205 
°d
::
ve˘‹
<> 
ödi˚s
 = 
	`GëSˇnIndi˚s
(
i
, 
NödividuÆ
 );

206 
ô
=
fTu√P¨amëîs
.
	`begö
(), 
ödex
=0; index< 
ödi˚s
.
	`size
(); index++, it++){

207 
cuºítP¨amëîs
[
ô
->
fú°
] = 
v
[
ödex
][
ödi˚s
[index]];

209 
	`Log
(Ë<< 
kINFO
 << "--------------------------" << 
Endl
;

210 
	`Log
(Ë<< 
kINFO
 <<"Sëtög†beögÉvÆu©ed:" << 
Endl
;

211 
°d
::
m≠
<
TSåög
,
DoubÀ_t
>::
ôî©‹
 
ô_¥öt
=
cuºítP¨amëîs
.
	`begö
();

212 
ô_¥öt
!=
cuºítP¨amëîs
.
	`íd
(); it_print++){

213 
	`Log
(Ë<< 
kINFO
 << " " << 
ô_¥öt
->
fú°
 << " = " << it_¥öt->
£c⁄d
 << 
Endl
;

216 
	`GëMëhod
()->
	`Re£t
();

217 
	`GëMëhod
()->
	`SëTu√P¨amëîs
(
cuºítP¨amëîs
);

219 if(!
	`GëMëhod
()->
	`IsSûítFûe
()ËGëMëhod()->
	`Ba£Dú
()->
	`cd
();

220 i‡(
i
==0Ë
	`GëMëhod
()->
	`GëTønsf‹m©i⁄H™dÀr
().
	`CÆcTønsf‹m©i⁄s
(

221 
	`GëMëhod
()->
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
());

222 
Evít
::
	`SëIsTøöög
(
kTRUE
);

223 
	`GëMëhod
()->
	`Tøö
();

224 
Evít
::
	`SëIsTøöög
(
kFALSE
);

225 
cuºítFOM
 = 
	`GëFOM
();

226 
	`Log
(Ë<< 
kINFO
 << "FOM wa†found : " << 
cuºítFOM
 << "; cuºíàbe° i†" << 
be°FOM
 << 
Endl
;

228 i‡(
cuºítFOM
 > 
be°FOM
) {

229 
be°FOM
 = 
cuºítFOM
;

230 
°d
::
m≠
<
TSåög
,
DoubÀ_t
>::
ôî©‹
 
ôî
=
cuºítP¨amëîs
.
	`begö
();

231 
ôî
 !
cuºítP¨amëîs
.
	`íd
(); iter++){

232 
fTu√dP¨amëîs
[
ôî
->
fú°
]=ôî->
£c⁄d
;

237 
	`GëMëhod
()->
	`Re£t
();

238 
	`GëMëhod
()->
	`SëTu√P¨amëîs
(
fTu√dP¨amëîs
);

239 
	}
}

243 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$›timizeFô
()

246 
°d
::
ve˘‹
<
TMVA
::
I¡îvÆ
*> 
ønges
;

247 
°d
::
m≠
<
TSåög
, 
TMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

248 
°d
::
ve˘‹
<
DoubÀ_t
> 
∑rs
;

250 
ô
=
fTu√P¨amëîs
.
	`begö
(); ià!fTu√P¨amëîs.
	`íd
(); it++){

251 
ønges
.
	`push_back
(
√w
 
TMVA
::
	`I¡îvÆ
(*(
ô
->
£c⁄d
)));

252 
∑rs
.
	`push_back
–(
ô
->
£c⁄d
)->
	`GëMón
() );

258 
	`GëMëhod
()->
	`GëTønsf‹m©i⁄H™dÀr
().
	`CÆcTønsf‹m©i⁄s
(GëMëhod()->
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
());

262 
FôãrBa£
* 
fôãr
 = 
NULL
;

264 i‡–
fO±imiz©i⁄FôTy≥
 == "Minuit" ) {

265 
TSåög
 
›t
="";

266 
fôãr
 = 
√w
 
	`MöuôFôãr
–*
this
,

268 
ønges
, 
›t
 );

269 }i‡–
fO±imiz©i⁄FôTy≥
 == "FitGA" ) {

270 
TSåög
 
›t
="PopSize=20:Steps=30:Cycles=3:ConvCrit=0.01:SaveBestCycle=5";

271 
fôãr
 = 
√w
 
	`GíëicFôãr
–*
this
,

273 
ønges
, 
›t
 );

275 
	`Log
(Ë<< 
kWARNING
 << " you didÇot specifyá valid OptimizationFitType "

276 << " wû»u£ÅhêdeÁu… (FôGAË" << 
Endl
;

277 
TSåög
 
›t
="PopSize=20:Steps=30:Cycles=3:ConvCrit=0.01:SaveBestCycle=5";

278 
fôãr
 = 
√w
 
	`GíëicFôãr
–*
this
,

280 
ønges
, 
›t
 );

283 
fôãr
->
	`CheckF‹Unu£dO±i⁄s
();

286 
fôãr
->
	`Run
(
∑rs
);

289 
UI¡_t
 
ù¨
=0; i∑r<
ønges
.
	`size
(); i∑r++Ë
dñëe
Ñanges[ipar];

291 
	`GëMëhod
()->
	`Re£t
();

293 
fTu√dP¨amëîs
.
	`˛ór
();

294 
I¡_t
 
jcou¡
=0;

295 
ô
=
fTu√P¨amëîs
.
	`begö
(); it!=fTu√P¨amëîs.
	`íd
(); it++){

296 
fTu√dP¨amëîs
.
	`ö£π
(
°d
::
∑ú
<
TSåög
,
DoubÀ_t
>(
ô
->
fú°
,
∑rs
[
jcou¡
++]));

299 
	`GëMëhod
()->
	`SëTu√P¨amëîs
(
fTu√dP¨amëîs
);

301 
	}
}

306 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t> & 
∑rs
)

308 
°d
::
m≠
< std::
ve˘‹
<
DoubÀ_t
> , 
	gDoubÀ_t
>::
c⁄°_ôî©‹
 
ôî
;

309 
	gôî
 = 
fAÃódyTøöedP¨Combö©i⁄
.
föd
(
∑rs
);

311 i‡(
	gôî
 !
fAÃódyTøöedP¨Combö©i⁄
.
íd
()) {

315  
ôî
->
£c⁄d
;

317 
	g°d
::
m≠
<
TSåög
,
	gDoubÀ_t
> 
	gcuºítP¨amëîs
;

318 
I¡_t
 
	gicou¡
 =0;

320 
	g°d
::
m≠
<
TSåög
, 
	gTMVA
::
I¡îvÆ
*>::
ôî©‹
 
ô
;

321 
	gô
=
fTu√P¨amëîs
.
begö
(); it!=fTu√P¨amëîs.
íd
(); it++){

322 
	gcuºítP¨amëîs
[
ô
->
fú°
] = 
∑rs
[
icou¡
++];

324 
GëMëhod
()->
Re£t
();

325 
GëMëhod
()->
SëTu√P¨amëîs
(
cuºítP¨amëîs
);

326 if(!
GëMëhod
()->
IsSûítFûe
()ËGëMëhod()->
Ba£Dú
()->
cd
();

328 i‡(
	gfNŸD⁄eYë
){

329 
GëMëhod
()->
GëTønsf‹m©i⁄H™dÀr
().

330 
CÆcTønsf‹m©i⁄s
(
GëMëhod
()->
D©a
()->
GëEvítCﬁÀ˘i⁄
());

331 
	gfNŸD⁄eYë
=
kFALSE
;

333 
	gEvít
::
SëIsTøöög
(
kTRUE
);

334 
GëMëhod
()->
Tøö
();

335 
	gEvít
::
SëIsTøöög
(
kFALSE
);

338 
DoubÀ_t
 
	gcuºítFOM
 = 
GëFOM
();

340 
	gfAÃódyTøöedP¨Combö©i⁄
.
ö£π
(
°d
::
make_∑ú
(
∑rs
,-
cuºítFOM
));

341  -
	gcuºítFOM
;

349 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëFOM
()

351 
DoubÀ_t
 
fom
=0;

352 i‡(
fMëhod
->
	`DoRegªssi⁄
()){

353 
°d
::
cout
 << " ERROR: Sorry, Regression isÇot yet implement foráutomaticÖarameter optimisation"

354 << " -->Éxô" << 
°d
::
ídl
;

355 
°d
::
	`exô
(1);

357 i‡(
fFOMTy≥
 ="Sï¨©i⁄"Ë
fom
 = 
	`GëSï¨©i⁄
();

358 i‡(
fFOMTy≥
 ="ROCI¡egøl"Ë
fom
 = 
	`GëROCI¡egøl
();

359 i‡(
fFOMTy≥
 ="SigEffAtBkgEff01"Ë
fom
 = 
	`GëSigEffAtBkgEff
(0.1);

360 i‡(
fFOMTy≥
 ="SigEffAtBkgEff001"Ë
fom
 = 
	`GëSigEffAtBkgEff
(0.01);

361 i‡(
fFOMTy≥
 ="SigEffAtBkgEff002"Ë
fom
 = 
	`GëSigEffAtBkgEff
(0.02);

362 i‡(
fFOMTy≥
 ="BkgRejAtSigEff05"Ë
fom
 = 
	`GëBkgRejAtSigEff
(0.5);

363 i‡(
fFOMTy≥
 ="BkgEffAtSigEff05"Ë
fom
 = 
	`GëBkgEffAtSigEff
(0.5);

365 
	`Log
()<<
kFATAL
 << " ERROR, you've specifiedás Figure of Merit inÅhe "

366 << "Ö¨amëî o±imißti⁄ " << 
fFOMTy≥
 << " which hasÇot"

367 << " bì¿im∂emíãd yë!! --->Éxô " << 
Endl
;

370 
fFOMvsIãr
.
	`push_back
(
fom
);

372  
fom
;

373 
	}
}

378 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëMVADi°s
()

380 i‡(
fMvaSig
ËfMvaSig->
	`Dñëe
();

381 i‡(
fMvaBkg
ËfMvaBkg->
	`Dñëe
();

382 i‡(
fMvaSigFöeBö
ËfMvaSigFöeBö->
	`Dñëe
();

383 i‡(
fMvaBkgFöeBö
ËfMvaBkgFöeBö->
	`Dñëe
();

391 
fMvaSig
 = 
√w
 
	`TH1D
("fMvaSig","",100,-1.5,1.5);

392 
fMvaBkg
 = 
√w
 
	`TH1D
("fMvaBkg","",100,-1.5,1.5);

393 
fMvaSigFöeBö
 = 
√w
 
	`TH1D
("fMvaSigFineBin","",100000,-1.5,1.5);

394 
fMvaBkgFöeBö
 = 
√w
 
	`TH1D
("fMvaBkgFineBin","",100000,-1.5,1.5);

396 c⁄° 
°d
::
ve˘‹
< 
Evít
*> 
evíts
=
fMëhod
->
	`D©a
()->
	`GëEvítCﬁÀ˘i⁄
(
Ty≥s
::
kTe°ög
);

398 
UI¡_t
 
sig«lCœssNr
 = 
fMëhod
->
	`D©aInfo
().
	`GëCœssInfo
("Sig«l")->
	`GëNumbî
();

402 
UI¡_t
 
õv
=0; iev < 
evíts
.
	`size
() ; iev++){

406 i‡(
evíts
[
õv
]->
	`GëCœss
(Ë=
sig«lCœssNr
) {

407 
fMvaSig
->
	`Fûl
(
fMëhod
->
	`GëMvaVÆue
(
evíts
[
õv
]),evíts[õv]->
	`GëWeight
());

408 
fMvaSigFöeBö
->
	`Fûl
(
fMëhod
->
	`GëMvaVÆue
(
evíts
[
õv
]),evíts[õv]->
	`GëWeight
());

410 
fMvaBkg
->
	`Fûl
(
fMëhod
->
	`GëMvaVÆue
(
evíts
[
õv
]),evíts[õv]->
	`GëWeight
());

411 
fMvaBkgFöeBö
->
	`Fûl
(
fMëhod
->
	`GëMvaVÆue
(
evíts
[
õv
]),evíts[õv]->
	`GëWeight
());

414 
	}
}

419 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëSï¨©i⁄
()

421 
	`GëMVADi°s
();

423 
PDF
 *
•lS
 = 
√w
 
	`PDF
–" PDF Sig", 
fMvaSig
, PDF::
kS∂öe2
 );

424 
PDF
 *
•lB
 = 
√w
 
	`PDF
–" PDF Bkg", 
fMvaBkg
, PDF::
kS∂öe2
 );

425  
	`gToﬁs
().
	`GëSï¨©i⁄
(*
•lS
,*
•lB
);

427 
°d
::
cout
 << "Sï¨©i⁄ cÆcuœti⁄ vü hi°ogøm†“Ÿ PDFsË£em†tÿgivê°û»°øngêªsu…s!! D⁄'àdÿth©, check!!"<<°d::
ídl
;

428  
	`gToﬁs
().
	`GëSï¨©i⁄
(
fMvaSigFöeBö
,
fMvaBkgFöeBö
);

430 
	}
}

443 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëROCI¡egøl
()

445 
	`GëMVADi°s
();

447 
DoubÀ_t
 
öãgøl
 = 0;

449 
PDF
 *
pdfS
 = 
√w
 
	`PDF
–" PDF Sig", 
fMvaSig
, PDF::
kS∂öe2
 );

450 
PDF
 *
pdfB
 = 
√w
 
	`PDF
–" PDF Bkg", 
fMvaBkg
, PDF::
kS∂öe2
 );

452 
DoubÀ_t
 
xmö
 = 
TM©h
::
	`Mö
(
pdfS
->
	`GëXmö
(), 
pdfB
->GetXmin());

453 
DoubÀ_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`GëXmax
(), 
pdfB
->GetXmax());

455 
UI¡_t
 
n°ïs
 = 1000;

456 
DoubÀ_t
 
°ï
 = (
xmax
-
xmö
)/
	`DoubÀ_t
(
n°ïs
);

457 
DoubÀ_t
 
cut
 = 
xmö
;

458 
UI¡_t
 
i
=0; i<
n°ïs
; i++){

459 
öãgøl
 +(1-
pdfB
->
	`GëI¡egøl
(
cut
,
xmax
)Ë* 
pdfS
->
	`GëVÆ
(cut);

460 
cut
+=
°ï
;

462 
öãgøl
*=
°ï
;

465 i‡–(
fMvaSigFöeBö
->
	`GëXaxis
()->
	`GëXmö
(Ë!
fMvaBkgFöeBö
->GetXaxis()->GetXmin()) ||

466 (
fMvaSigFöeBö
->
	`GëNbösX
(Ë!
fMvaBkgFöeBö
->GetNbinsX()) ){

467 
°d
::
cout
 << " Eº‹ i¿O±imizeC⁄figP¨amëî†GëROCI¡egøl, u√quÆ hi°ogøm†f‹ sigánd bkg.." << std::
ídl
;

468 
°d
::
	`exô
(1);

471 
DoubÀ_t
 *
cumuœt‹
 = 
fMvaBkgFöeBö
->
	`GëI¡egøl
();

472 
I¡_t
 
nbös
 = 
fMvaSigFöeBö
->
	`GëNbösX
();

476 
DoubÀ_t
 
sigI¡egøl
 = 0;

477 
I¡_t
 
ibö
=1; ibö<=
nbös
; ibin++){

478 
sigI¡egøl
 +
fMvaSigFöeBö
->
	`GëBöC⁄ã¡
(
ibö
Ë* fMvaSigFöeBö->
	`GëBöWidth
(ibin);

482 
I¡_t
 
ibö
=1; ibö <
nbös
; ibin++){

483 
öãgøl
 +(
cumuœt‹
[
ibö
]Ë* 
fMvaSigFöeBö
->
	`GëBöC⁄ã¡
(ibö)/
sigI¡egøl
 * fMvaSigFöeBö->
	`GëBöWidth
(ibin) ;

488  
öãgøl
;

489 
	}
}

494 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëSigEffAtBkgEff
(
DoubÀ_t
 
bkgEff
)

496 
	`GëMVADi°s
();

497 
DoubÀ_t
 
sigEff
=0;

500 i‡–(
fMvaSigFöeBö
->
	`GëXaxis
()->
	`GëXmö
(Ë!
fMvaBkgFöeBö
->GetXaxis()->GetXmin()) ||

501 (
fMvaSigFöeBö
->
	`GëNbösX
(Ë!
fMvaBkgFöeBö
->GetNbinsX()) ){

502 
°d
::
cout
 << " Eº‹ i¿O±imizeC⁄figP¨amëî†GëSigEffAt, u√quÆ hi°ogøm†f‹ sigánd bkg.." << std::
ídl
;

503 
°d
::
	`exô
(1);

505 
DoubÀ_t
 *
bkgCumuœt‹
 = 
fMvaBkgFöeBö
->
	`GëI¡egøl
();

506 
DoubÀ_t
 *
sigCumuœt‹
 = 
fMvaSigFöeBö
->
	`GëI¡egøl
();

508 
I¡_t
 
nbös
=
fMvaBkgFöeBö
->
	`GëNbösX
();

509 
I¡_t
 
ibö
=0;

517 
bkgCumuœt‹
[
nbös
-
ibö
] > (1-
bkgEff
)) {

518 
sigEff
 = 
sigCumuœt‹
[
nbös
]-sigCumuœt‹[nbös-
ibö
];

519 
ibö
++;

522  
sigEff
;

523 
	}
}

531 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëBkgEffAtSigEff
(
DoubÀ_t
 
sigEff
)

533 
	`GëMVADi°s
();

534 
DoubÀ_t
 
bkgEff
=0;

537 i‡–(
fMvaSigFöeBö
->
	`GëXaxis
()->
	`GëXmö
(Ë!
fMvaBkgFöeBö
->GetXaxis()->GetXmin()) ||

538 (
fMvaSigFöeBö
->
	`GëNbösX
(Ë!
fMvaBkgFöeBö
->GetNbinsX()) ){

539 
°d
::
cout
 << " Eº‹ i¿O±imizeC⁄figP¨amëî†GëBkgEffAt, u√quÆ hi°ogøm†f‹ sigánd bkg.." << std::
ídl
;

540 
°d
::
	`exô
(1);

543 
DoubÀ_t
 *
bkgCumuœt‹
 = 
fMvaBkgFöeBö
->
	`GëI¡egøl
();

544 
DoubÀ_t
 *
sigCumuœt‹
 = 
fMvaSigFöeBö
->
	`GëI¡egøl
();

546 
I¡_t
 
nbös
=
fMvaBkgFöeBö
->
	`GëNbösX
();

547 
I¡_t
 
ibö
=0;

555  
sigCumuœt‹
[
nbös
]-sigCumuœt‹[nbös-
ibö
] < 
sigEff
) {

556 
bkgEff
 = 
bkgCumuœt‹
[
nbös
]-bkgCumuœt‹[nbös-
ibö
];

557 
ibö
++;

560  
bkgEff
;

561 
	}
}

568 
DoubÀ_t
 
	gTMVA
::
O±imizeC⁄figP¨amëîs
::
	$GëBkgRejAtSigEff
(
DoubÀ_t
 
sigEff
)

570 
	`GëMVADi°s
();

571 
DoubÀ_t
 
bkgRej
=0;

574 i‡–(
fMvaSigFöeBö
->
	`GëXaxis
()->
	`GëXmö
(Ë!
fMvaBkgFöeBö
->GetXaxis()->GetXmin()) ||

575 (
fMvaSigFöeBö
->
	`GëNbösX
(Ë!
fMvaBkgFöeBö
->GetNbinsX()) ){

576 
°d
::
cout
 << " Eº‹ i¿O±imizeC⁄figP¨amëî†GëBkgEffAt, u√quÆ hi°ogøm†f‹ sigánd bkg.." << std::
ídl
;

577 
°d
::
	`exô
(1);

580 
DoubÀ_t
 *
bkgCumuœt‹
 = 
fMvaBkgFöeBö
->
	`GëI¡egøl
();

581 
DoubÀ_t
 *
sigCumuœt‹
 = 
fMvaSigFöeBö
->
	`GëI¡egøl
();

583 
I¡_t
 
nbös
=
fMvaBkgFöeBö
->
	`GëNbösX
();

584 
I¡_t
 
ibö
=0;

592  
sigCumuœt‹
[
nbös
]-sigCumuœt‹[nbös-
ibö
] < 
sigEff
) {

593 
bkgRej
 = 
bkgCumuœt‹
[
nbös
-
ibö
];

594 
ibö
++;

597  
bkgRej
;

598 
	}
}

	@src/Option.cxx

34 
	~"TMVA/O±i⁄.h
"

36 
	~"TMVA/Ty≥s.h
"

38 
	~"ThªadLoˇlSt‹age.h
"

39 
	~"TObje˘.h
"

40 
	~"TSåög.h
"

46 
	gTMVA
::
O±i⁄Ba£
::
	$O±i⁄Ba£
–c⁄° 
TSåög
& 
«me
, c⁄° TSåög& 
desc
 )

47 : 
	`TObje˘
(),

48 
	`fName
 ( 
«me
 ),

49 
	`fNameAŒLowî
–
«me
 ),

50 
	`fDes¸ùti⁄
 ( 
desc
 ),

51 
	$fIsSë
 ( 
kFALSE
 )

53 
fNameAŒLowî
.
	`ToLowî
();

54 
	}
}

59 
Boﬁ_t
 
	gTMVA
::
O±i⁄Ba£
::
	$SëVÆue
–c⁄° 
TSåög
& 
vs
, 
I¡_t
 )

61 
fIsSë
 = 
kTRUE
;

62 
	`SëVÆueLoˇl
(
vs
);

63  
kTRUE
;

64 
	}
}

66 
	gTMVA
::
MsgLoggî
& 
TMVA
::
O±i⁄Ba£
::
	$Log
()

68 
	`TTHREAD_TLS_DECL_ARG2
(
MsgLoggî
,
loggî
,"O±i⁄",
kDEBUG
);

69  
loggî
;

70 
	}
}

	@src/OptionMap.cxx

1 
	~<TMVA/O±i⁄M≠.h
>

	@src/PDEFoam.cxx

68 
	~"TMVA/PDEFﬂm.h
"

70 
	~"TMVA/Evít.h
"

71 
	~"TMVA/MsgLoggî.h
"

72 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

73 
	~"TMVA/Timî.h
"

74 
	~"TMVA/Toﬁs.h
"

75 
	~"TMVA/Ty≥s.h
"

77 
	~"TStyÀ.h
"

78 
	~"TObje˘.h
"

79 
	~"TH1D.h
"

80 
	~"TM©h.h
"

81 
	~"TVe˘‹T.h
"

82 
	~"TR™dom3.h
"

83 
	~"TCﬁ‹.h
"

84 
	~"TDúe˘‹y.h
"

85 
	~"TObjAºay.h
"

87 
	~<ˇs£π
>

88 
	~<f°ªam
>

89 
	~<io°ªam
>

90 
	~<iom™ù
>

91 
	~<limôs
>

92 
	~<s°ªam
>

94 
CœssImp
(
TMVA
::
PDEFﬂm
);

96 c⁄° 
Flﬂt_t
 
	gkHigh

FLT_MAX
;

97 c⁄° 
Flﬂt_t
 
	gkVlow
=-
FLT_MAX
;

99 
usög
 
«me•a˚
 
	g°d
;

104 
	gTMVA
::
PDEFﬂm
::
	$PDEFﬂm
() :

105 
	`fName
("PDEFoam"),

106 
	`fDim
(0),

107 
	`fNCñls
(0),

108 
	`fNBö
(5),

109 
	`fNSam∂
(2000),

110 
	`fEvPîBö
(0),

111 
	`fMaskDiv
(0),

112 
	`fInhiDiv
(0),

113 
	`fNoA˘
(1),

114 
	`fLa°Ce
(-1),

115 
	`fCñls
(0),

116 
	`fHi°Edg
(0),

117 
	`fRvec
(0),

118 
	`fP£R™
(
√w
 
	`TR™dom3
(4356)),

119 
	`fAÕha
(0),

120 
	`fFﬂmTy≥
(
kSï¨©e
),

121 
	`fXmö
(0),

122 
	`fXmax
(0),

123 
	`fNEÀmíts
(0),

124 
	`fNmö
(100),

125 
	`fMaxDïth
(0),

126 
	`fVﬁFøc
(1.0/15.0),

127 
	`fFûlFﬂmWôhOrigWeights
(
kFALSE
),

128 
	`fDTSï¨©i⁄
(
kFﬂm
),

129 
	`fPìkMax
(
kTRUE
),

130 
	`fDi°r
(
NULL
),

131 
	`fTimî
(
√w
 
	`Timî
(0, "PDEFﬂm", 
kTRUE
)),

132 
	`fV¨übÀNames
(
√w
 
	`TObjAºay
()),

133 
	`fLoggî
(
√w
 
	`MsgLoggî
("PDEFoam"))

136 i‡(
fV¨übÀNames
)

137 
fV¨übÀNames
->
	`SëOw√r
(
kTRUE
);

138 
	}
}

143 
	gTMVA
::
PDEFﬂm
::
	$PDEFﬂm
(c⁄° 
TSåög
& 
«me
) :

144 
	`fName
(
«me
),

145 
	`fDim
(0),

146 
	`fNCñls
(1000),

147 
	`fNBö
(5),

148 
	`fNSam∂
(2000),

149 
	`fEvPîBö
(0),

150 
	`fMaskDiv
(0),

151 
	`fInhiDiv
(0),

152 
	`fNoA˘
(1),

153 
	`fLa°Ce
(-1),

154 
	`fCñls
(0),

155 
	`fHi°Edg
(0),

156 
	`fRvec
(0),

157 
	`fP£R™
(
√w
 
	`TR™dom3
(4356)),

158 
	`fAÕha
(0),

159 
	`fFﬂmTy≥
(
kSï¨©e
),

160 
	`fXmö
(0),

161 
	`fXmax
(0),

162 
	`fNEÀmíts
(0),

163 
	`fNmö
(100),

164 
	`fMaxDïth
(0),

165 
	`fVﬁFøc
(1.0/15.0),

166 
	`fFûlFﬂmWôhOrigWeights
(
kFALSE
),

167 
	`fDTSï¨©i⁄
(
kFﬂm
),

168 
	`fPìkMax
(
kTRUE
),

169 
	`fDi°r
(
NULL
),

170 
	`fTimî
(
√w
 
	`Timî
(1, "PDEFﬂm", 
kTRUE
)),

171 
	`fV¨übÀNames
(
√w
 
	`TObjAºay
()),

172 
	`fLoggî
(
√w
 
	`MsgLoggî
("PDEFoam"))

174 if(
	`°æí
(
«me
) > 128)

175 
	`Log
(Ë<< 
kFATAL
 << "Namêtoÿl⁄g " << 
«me
.
	`D©a
(Ë<< 
Endl
;

178 i‡(
fV¨übÀNames
)

179 
fV¨übÀNames
->
	`SëOw√r
(
kTRUE
);

180 
	}
}

185 
	gTMVA
::
PDEFﬂm
::~
	$PDEFﬂm
()

187 
dñëe
 
fV¨übÀNames
;

188 
dñëe
 
fTimî
;

189 i‡(
fDi°r
Ë
dñëe
 fDistr;

190 i‡(
fP£R™
Ë
dñëe
 fPseRan;

191 i‡(
fXmö
Ë{ 
dñëe
 [] fXmin; fXmin=0; }

192 i‡(
fXmax
Ë{ 
dñëe
 [] fXmax; fXmax=0; }

194 
	`Re£tCñlEÀmíts
();

195 if(
fCñls
!= 0) {

196 
I¡_t
 
i
=0; i<
fNCñls
; i++Ë
dñëe
 
fCñls
[i];

197 
dñëe
 [] 
fCñls
;

199 
dñëe
 [] 
fRvec
;

200 
dñëe
 [] 
fAÕha
;

201 
dñëe
 [] 
fMaskDiv
;

202 
dñëe
 [] 
fInhiDiv
;

204 
dñëe
 
fLoggî
;

205 
	}
}

210 
	gTMVA
::
PDEFﬂm
::
	$PDEFﬂm
(c⁄° 
PDEFﬂm
 &
‰om
) :

211 
	`TObje˘
(
‰om
)

212 , 
	`fDim
(0)

213 , 
	`fNCñls
(0)

214 , 
	`fNBö
(0)

215 , 
	`fNSam∂
(0)

216 , 
	`fEvPîBö
(0)

217 , 
	`fMaskDiv
(0)

218 , 
	`fInhiDiv
(0)

219 , 
	`fNoA˘
(0)

220 , 
	`fLa°Ce
(0)

221 , 
	`fCñls
(0)

222 , 
	`fHi°Edg
(0)

223 , 
	`fRvec
(0)

224 , 
	`fP£R™
(0)

225 , 
	`fAÕha
(0)

226 , 
	`fFﬂmTy≥
(
kSï¨©e
)

227 , 
	`fXmö
(0)

228 , 
	`fXmax
(0)

229 , 
	`fNEÀmíts
(0)

230 , 
	`fNmö
(0)

231 , 
	`fMaxDïth
(0)

232 , 
	`fVﬁFøc
(1.0/15.0)

233 , 
	`fFûlFﬂmWôhOrigWeights
(
kFALSE
)

234 , 
	`fDTSï¨©i⁄
(
kFﬂm
)

235 , 
	`fPìkMax
(
kTRUE
)

236 , 
	`fDi°r
(0)

237 , 
	`fTimî
(0)

238 , 
	`fV¨übÀNames
(0)

239 , 
	`fLoggî
(
√w
 
	$MsgLoggî
(*
‰om
.
fLoggî
))

241 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

244 i‡(
fV¨übÀNames
)

245 
fV¨übÀNames
->
	`SëOw√r
(
kTRUE
);

246 
	}
}

251 
	gTMVA
::
PDEFﬂm
::
	$SëDim
(
I¡_t
 
kDim
)

253 i‡(
kDim
 < 1)

254 
	`Log
(Ë<< 
kFATAL
 << "<SëDim>: Dimísi⁄ i†zîÿ‹Çeg©ive!" << 
Endl
;

256 
fDim
 = 
kDim
;

257 i‡(
fXmö
Ë
dñëe
 [] fXmin;

258 i‡(
fXmax
Ë
dñëe
 [] fXmax;

259 
fXmö
 = 
√w
 
DoubÀ_t
[
	`GëTŸDim
()];

260 
fXmax
 = 
√w
 
DoubÀ_t
[
	`GëTŸDim
()];

261 
	}
}

266 
	gTMVA
::
PDEFﬂm
::
	$SëXmö
(
I¡_t
 
idim
, 
DoubÀ_t
 
wmö
)

268 i‡(
idim
<0 || idim>=
	`GëTŸDim
())

269 
	`Log
(Ë<< 
kFATAL
 << "<SëXmö>: Dimísi⁄ ouào‡bounds!" << 
Endl
;

271 
fXmö
[
idim
]=
wmö
;

272 
	}
}

277 
	gTMVA
::
PDEFﬂm
::
	$SëXmax
(
I¡_t
 
idim
, 
DoubÀ_t
 
wmax
)

279 i‡(
idim
<0 || idim>=
	`GëTŸDim
())

280 
	`Log
(Ë<< 
kFATAL
 << "<SëXmax>: Dimísi⁄ ouào‡bounds!" << 
Endl
;

282 
fXmax
[
idim
]=
wmax
;

283 
	}
}

293 
	gTMVA
::
PDEFﬂm
::
	$Cª©e
()

295 
Boﬁ_t
 
addSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

296 
TH1
::
	`AddDúe˘‹y
(
kFALSE
);

298 if(
fP£R™
==0Ë
	`Log
(Ë<< 
kFATAL
 << "R™domÇumbî gíî©‹ÇŸ së" << 
Endl
;

299 if(
fDi°r
==0Ë
	`Log
(Ë<< 
kFATAL
 << "Di°ributi⁄ fun˘i⁄ÇŸ së" << 
Endl
;

300 if(
fDim
==0Ë
	`Log
(Ë<< 
kFATAL
 << "Zîÿdimísi⁄ÇŸáŒowed" << 
Endl
;

306 
fRvec
 = 
√w
 
DoubÀ_t
[
fDim
];

307 if(
fRvec
==0Ë
	`Log
(Ë<< 
kFATAL
 << "C™nŸ inôülizêbuf„∏fRvec" << 
Endl
;

309 if(
fDim
>0){

310 
fAÕha
 = 
√w
 
DoubÀ_t
[
fDim
];

311 if(
fAÕha
==0Ë
	`Log
(Ë<< 
kFATAL
 << "C™nŸ inôülizêbuf„∏fAÕha" << 
Endl
;

315 if(
fInhiDiv
 == 0){

316 
fInhiDiv
 = 
√w
 
I¡_t
[
fDim
];

317 
I¡_t
 
i
=0; i<
fDim
; i++Ë
fInhiDiv
[i]=0;

320 if(
fMaskDiv
 == 0){

321 
fMaskDiv
 = 
√w
 
I¡_t
[
fDim
];

322 
I¡_t
 
i
=0; i<
fDim
; i++Ë
fMaskDiv
[i]=1;

325 
fHi°Edg
 = 
√w
 
	`TObjAºay
(
fDim
);

326 
I¡_t
 
i
=0; i<
fDim
; i++){

327 
TSåög
 
h«me
, 
htôÀ
;

328 
h«me
 = 
fName
+
	`TSåög
("_HistEdge_");

329 
h«me
 +
i
;

330 
htôÀ
 = 
	`TSåög
("Edge Histogram No. ");

331 
htôÀ
 +
i
;

332 (*
fHi°Edg
)[
i
] = 
√w
 
	`TH1D
(
h«me
.
	`D©a
(),
htôÀ
.D©a(),
fNBö
,0.0, 1.0);

333 ((
TH1D
*)(*
fHi°Edg
)[
i
])->
	`Sumw2
();

341 
	`Re£tCñlEÀmíts
();

344 
	`InôCñls
();

345 
	`Grow
();

347 
TH1
::
	`AddDúe˘‹y
(
addSètus
);

350 
	`Re£tCñlEÀmíts
();

351 
	}
}

357 
	gTMVA
::
PDEFﬂm
::
	$InôCñls
()

359 
fLa°Ce
 =-1;

360 if(
fCñls
!= 0) {

361 
I¡_t
 
i
=0; i<
fNCñls
; i++Ë
dñëe
 
fCñls
[i];

362 
dñëe
 [] 
fCñls
;

365 
fCñls
 = 
	`√w
(
nŸhrow
Ë
PDEFﬂmCñl
*[
fNCñls
];

366 i‡(!
fCñls
) {

367 
	`Log
(Ë<< 
kFATAL
 << "nŸÉnough mem‹yÅÿ¸óã " << 
fNCñls


368 << " cñls" << 
Endl
;

370 
I¡_t
 
i
=0; i<
fNCñls
; i++){

371 
fCñls
[
i
]
√w
 
	`PDEFﬂmCñl
(
fDim
);

372 
fCñls
[
i
]->
	`SëSîül
(i);

378 
	`CñlFûl
(1, 0);

381 
L⁄g_t
 
iCñl
=0; iCñl<=
fLa°Ce
; iCell++){

382 
	`Ex∂‹e
–
fCñls
[
iCñl
] );

384 
	}
}

390 
I¡_t
 
	gTMVA
::
PDEFﬂm
::
	$CñlFûl
(
I¡_t
 
°©us
, 
PDEFﬂmCñl
 *
∑ª¡
)

392 
PDEFﬂmCñl
 *
˚Œ
;

393 i‡(
fLa°Ce
==
fNCñls
){

394 
	`Log
(Ë<< 
kFATAL
 << "Toÿm™y cñls" << 
Endl
;

396 
fLa°Ce
++;

398 
˚Œ
 = 
fCñls
[
fLa°Ce
];

400 
˚Œ
->
	`Fûl
(
°©us
, 
∑ª¡
, 0, 0);

402 
˚Œ
->
	`SëBe°
( -1);

403 
˚Œ
->
	`SëXdiv
(0.5);

404 
DoubÀ_t
 
xI¡2
,
xDri2
;

405 if(
∑ª¡
!=0){

406 
xI¡2
 = 0.5*
∑ª¡
->
	`GëI¡g
();

407 
xDri2
 = 0.5*
∑ª¡
->
	`GëDriv
();

408 
˚Œ
->
	`SëI¡g
(
xI¡2
);

409 
˚Œ
->
	`SëDriv
(
xDri2
);

411 
˚Œ
->
	`SëI¡g
(0.0);

412 
˚Œ
->
	`SëDriv
(0.0);

414  
fLa°Ce
;

415 
	}
}

435 
	gTMVA
::
PDEFﬂm
::
	$Ex∂‹e
(
PDEFﬂmCñl
 *
˚Œ
)

437 
DoubÀ_t
 
wt
, 
dx
, 
xBe°
=0, 
yBe°
;

438 
DoubÀ_t
 
ötOld
, 
driOld
;

440 
L⁄g_t
 
õv
;

441 
DoubÀ_t
 
√vMC
;

442 
I¡_t
 
i
, 
j
, 
k
;

443 
I¡_t
 
nProj
, 
kBe°
;

444 
DoubÀ_t
 
˚Sum
[5], 
x¥oj
;

446 
DoubÀ_t
 
evít_dísôy
 = 0;

447 
DoubÀ_t
 
tŸevíts
 = 0;

448 
DoubÀ_t
 
tŸevítsOld
 = 0;

450 
PDEFﬂmVe˘
 
	`˚ŒSize
(
fDim
);

451 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
fDim
);

453 
˚Œ
->
	`GëHcub
(
˚ŒPosi
,
˚ŒSize
);

455 
PDEFﬂmCñl
 *
∑ª¡
;

457 
DoubÀ_t
 *
xR™d
 = 
√w
 DoubÀ_t[
fDim
];

459 
DoubÀ_t
 *
vﬁP¨t
=0;

462 
DoubÀ_t
 
vﬁ_sˇÀ
 = 1.0;

463 
I¡_t
 
idim
 = 0; idim < 
fDim
; ++idim)

464 
vﬁ_sˇÀ
 *
fXmax
[
idim
] - 
fXmö
[idim];

466 
˚Œ
->
	`CÆcVﬁume
();

467 
dx
 = 
˚Œ
->
	`GëVﬁume
(Ë* 
vﬁ_sˇÀ
;

468 
ötOld
 = 
˚Œ
->
	`GëI¡g
();

469 
driOld
 = 
˚Œ
->
	`GëDriv
();

470 
tŸevítsOld
 = 
	`GëCñlEÀmít
(
˚Œ
, 0);

475 
˚Sum
[0]=0;

476 
˚Sum
[1]=0;

477 
˚Sum
[2]=0;

478 
˚Sum
[3]=
kHigh
;

479 
˚Sum
[4]=
kVlow
;

481 
i
=0;i<
fDim
;i++Ë((
TH1D
 *)(*
fHi°Edg
)[i])->
	`Re£t
();

483 
DoubÀ_t
 
√vEff
=0.;

485 
õv
=0;õv<
fNSam∂
;iev++){

486 
	`MakeAÕha
();

488 i‡(
fDim
>0Ë
j
=0; j<fDim; j++Ë
xR™d
[j]
˚ŒPosi
[j] +
fAÕha
[j]*(
˚ŒSize
[j]);

490 
wt
 = 
dx
*
	`EvÆ
(
xR™d
, 
evít_dísôy
);

491 
tŸevíts
 +
evít_dísôy
;

493 
nProj
 = 0;

494 i‡(
fDim
>0) {

495 
k
=0; k<
fDim
; k++) {

496 
x¥oj
 =
fAÕha
[
k
];

497 ((
TH1D
 *)(*
fHi°Edg
)[
nProj
])->
	`Fûl
(
x¥oj
,
wt
);

498 
nProj
++;

502 
˚Sum
[0] +
wt
;

503 
˚Sum
[1] +
wt
*wt;

504 
˚Sum
[2]++;

505 i‡(
˚Sum
[3]>
wt
) ceSum[3]=wt;

506 i‡(
˚Sum
[4]<
wt
) ceSum[4]=wt;

508 i‡(
˚Sum
[1]>0Ë
√vEff
 = ceSum[0]*ceSum[0]/ceSum[1];

509 
√vEff
 = 0;

510 i‡–
√vEff
 >
fNBö
*
fEvPîBö
) ;

512 
tŸevíts
 *
dx
;

514 i‡(
fNSam∂
>0Ë
tŸevíts
 /= fNSampl;

518 i‡(
˚Œ
==
fCñls
[0] && 
˚Sum
[0]<=0.0){

519 i‡(
˚Sum
[0]==0.0)

520 
	`Log
(Ë<< 
kFATAL
 << "NoÉvents were found duringÉxploration of "

522 << "™d VﬁFøc." << 
Endl
;

524 
	`Log
(Ë<< 
kWARNING
 << "NegativeÇumber ofÉvents found during "

525 << "ex∂‹©i⁄ o‡roŸ cñl" << 
Endl
;

530 
k
=0; k<
fDim
;k++){

531 
fMaskDiv
[
k
] =1;

532 i‡–
fInhiDiv
[
k
]==1Ë
fMaskDiv
[k] =0;

534 
kBe°
=-1;

538 
√vMC
 = 
˚Sum
[2];

539 
DoubÀ_t
 
ötTrue
 = 
˚Sum
[0]/(
√vMC
+0.000001);

540 
DoubÀ_t
 
ötDriv
=0.;

542 i‡(
kBe°
 =-1Ë
	`V¨edu
(
˚Sum
,kBe°,
xBe°
,
yBe°
);

543 
ötDriv
 =
	`sqπ
(
˚Sum
[1]/
√vMC
Ë-
ötTrue
;

546 
˚Œ
->
	`SëBe°
(
kBe°
);

547 
˚Œ
->
	`SëXdiv
(
xBe°
);

548 
˚Œ
->
	`SëI¡g
(
ötTrue
);

549 
˚Œ
->
	`SëDriv
(
ötDriv
);

550 
	`SëCñlEÀmít
(
˚Œ
, 0, 
tŸevíts
);

553 
DoubÀ_t
 
∑rI¡g
, 
∑rDriv
;

554 
∑ª¡
 = 
˚Œ
->
	`GëP¨e
();Öarent!=0;Öarent =Öarent->GetPare()){

555 
∑rI¡g
 = 
∑ª¡
->
	`GëI¡g
();

556 
∑rDriv
 = 
∑ª¡
->
	`GëDriv
();

557 
∑ª¡
->
	`SëI¡g
–
∑rI¡g
 +
ötTrue
 -
ötOld
 );

558 
∑ª¡
->
	`SëDriv
–
∑rDriv
 +
ötDriv
 -
driOld
 );

559 
	`SëCñlEÀmít
–
∑ª¡
, 0, 
	`GëCñlEÀmít
’¨ít, 0Ë+ 
tŸevíts
 - 
tŸevítsOld
);

561 
dñëe
 [] 
vﬁP¨t
;

562 
dñëe
 [] 
xR™d
;

563 
	}
}

571 
	gTMVA
::
PDEFﬂm
::
	$V¨edu
(
DoubÀ_t
 
˚Sum
[5], 
I¡_t
 &
kBe°
, DoubÀ_à&
xBe°
, DoubÀ_à&
yBe°
)

573 
DoubÀ_t
 
√¡
 = 
˚Sum
[2];

575 
DoubÀ_t
 
sswAŒ
 = 
˚Sum
[1];

576 
DoubÀ_t
 
ssw
 = 
	`sqπ
(
sswAŒ
)/sqπ(
√¡
);

578 
DoubÀ_t
 
sswIn
,
sswOut
,
xLo
,
xUp
;

579 
kBe°
 =-1;

580 
xBe°
 =0.5;

581 
yBe°
 =1.0;

582 
DoubÀ_t
 
maxGaö
=0.0;

584 
I¡_t
 
kProj
=0; kProj<
fDim
; kProj++) {

585 if–
fMaskDiv
[
kProj
]) {

588 
DoubÀ_t
 
sswtBe°
 = 
kHigh
;

589 
DoubÀ_t
 
gaö
 =0.0;

590 
DoubÀ_t
 
xMö
=0.0; DoubÀ_à
xMax
=0.0;

592 
I¡_t
 
jLo
=1; jLo<=
fNBö
; jLo++) {

593 
DoubÀ_t
 
aswIn
=0; DoubÀ_à
asswIn
=0;

594 
I¡_t
 
jUp
=
jLo
; jUp<=
fNBö
;jUp++) {

595 
aswIn
 +((
TH1D
 *)(*
fHi°Edg
)[
kProj
])->
	`GëBöC⁄ã¡
(
jUp
);

596 
asswIn
 +
	`Sqr
(((
TH1D
 *)(*
fHi°Edg
)[
kProj
])->
	`GëBöEº‹
–
jUp
));

597 
xLo
=(
jLo
-1.0)/
fNBö
;

598 
xUp
=(
jUp
*1.0)/
fNBö
;

601 i‡–(
xUp
-
xLo
Ë< 
°d
::
numîic_limôs
<>::
	`ïsû⁄
()Ë
sswIn
=0.;

602 
sswIn
 = 
	`sqπ
(
asswIn
Ë/sqπ(
√¡
*(
xUp
-
xLo
)) *(xUp-xLo);

603 i‡–(1.0-
xUp
+
xLo
Ë< 
°d
::
numîic_limôs
<>::
	`ïsû⁄
()Ë
sswOut
=0.;

604 i‡–
sswAŒ
-
asswIn
 < 
°d
::
numîic_limôs
<>::
	`ïsû⁄
()Ë
sswOut
=0.;

605 
sswOut

	`sqπ
(
sswAŒ
-
asswIn
)/sqπ(
√¡
*(1.0-
xUp
+
xLo
)) *(1.0-xUp+xLo);

606 if–(
sswIn
+
sswOut
Ë< 
sswtBe°
) {

607 
sswtBe°
 = 
sswIn
+
sswOut
;

608 
gaö
 = 
ssw
-
sswtBe°
;

611 
xMö
 = 
xLo
;

612 
xMax
 = 
xUp
;

616 
I¡_t
 
iLo
 = (I¡_tË(
fNBö
*
xMö
);

617 
I¡_t
 
iUp
 = (I¡_tË(
fNBö
*
xMax
);

619 if(
gaö
>=
maxGaö
) {

620 
maxGaö
=
gaö
;

621 
kBe°
=
kProj
;

622 
xBe°
=
xMö
;

623 
yBe°
=
xMax
;

624 if(
iLo
 =0Ë
xBe°
=
yBe°
;

625 if(
iUp
 =
fNBö
Ë
yBe°
=
xBe°
;

630 if–(
kBe°
 >
fDim
) || (kBest<0) )

631 
	`Log
(Ë<< 
kFATAL
 << "Somëhög wr⁄g wôh kBe°" << 
Endl
;

632 
	}
}

638 
	gTMVA
::
PDEFﬂm
::
	$MakeAÕha
()

641 
fP£R™
->
	`RndmAºay
(
fDim
,
fRvec
);

642 
I¡_t
 
k
=0; k<
fDim
; k++Ë
fAÕha
[k] = 
fRvec
[k];

643 
	}
}

652 
L⁄g_t
 
	gTMVA
::
PDEFﬂm
::
	$PìkMax
()

654 
L⁄g_t
 
iCñl
 = -1;

656 
L⁄g_t
 
i
;

657 
DoubÀ_t
 
drivMax
, 
driv
, 
xDiv
;

658 
Boﬁ_t
 
bCutNmö
 = 
kTRUE
;

659 
Boﬁ_t
 
bCutMaxDïth
 = 
kTRUE
;

661 
drivMax
 = 0;

662 
i
=0; i<=
fLa°Ce
; i++) {

663 if–
fCñls
[
i
]->
	`GëSèt
() == 1 ) {

665 
driv
 = 
fCñls
[
i
]->
	`GëDriv
();

666 i‡(
driv
 < 
°d
::
numîic_limôs
<>::
	`ïsû⁄
())

670 
xDiv
 = 
TM©h
::
	`Abs
(
fCñls
[
i
]->
	`GëXdiv
());

671 i‡(
xDiv
 <
°d
::
numîic_limôs
<
DoubÀ_t
>::
	`ïsû⁄
() ||

672 
xDiv
 >1.0 - 
°d
::
numîic_limôs
<
DoubÀ_t
>::
	`ïsû⁄
())

676 i‡(
	`GëMaxDïth
() > 0)

677 
bCutMaxDïth
 = 
fCñls
[
i
]->
	`GëDïth
(Ë< 
	`GëMaxDïth
();

680 i‡(
	`GëNmö
() > 0)

681 
bCutNmö
 = 
	`GëCñlEÀmít
(
fCñls
[
i
], 0Ë> 
	`GëNmö
();

684 if(
driv
 > 
drivMax
 && 
bCutNmö
 && 
bCutMaxDïth
) {

685 
drivMax
 = 
driv
;

686 
iCñl
 = 
i
;

691 i‡(
iCñl
 == -1){

692 i‡(!
bCutNmö
)

693 
	`Log
(Ë<< 
kVERBOSE
 << "Warning: No cell with moreÅhan "

694 << 
	`GëNmö
(Ë<< "Évít†found!" << 
Endl
;

695 i‡(!
bCutMaxDïth
)

696 
	`Log
(Ë<< 
kVERBOSE
 << "Warning: Maximum depthÑeached: "

697 << 
	`GëMaxDïth
(Ë<< 
Endl
;

699 
	`Log
(Ë<< 
kWARNING
 << "<PDEFﬂm::PìkMax>:Çÿm‹êˇndid©ê˚Œ†(drivMax>0Ëfound f‹ fuπhî s∂ôtög." << 
Endl
;

702 (
iCñl
);

703 
	}
}

715 
I¡_t
 
	gTMVA
::
PDEFﬂm
::
	$Divide
(
PDEFﬂmCñl
 *
˚Œ
)

718 
I¡_t
 
kBe°
;

720 if(
fLa°Ce
+1 >
fNCñls
Ë
	`Log
(Ë<< 
kFATAL
 << "Buf„∏limô i†ªached, fLa°Ce=‚Buf" << 
Endl
;

722 
˚Œ
->
	`SëSèt
(0);

723 
fNoA˘
++;

726 
kBe°
 = 
˚Œ
->
	`GëBe°
();

727 if–
kBe°
<0 || kBe°>=
fDim
 ) 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄g kBe°" << 
Endl
;

733 
I¡_t
 
d1
 = 
	`CñlFûl
(1, 
˚Œ
);

734 
I¡_t
 
d2
 = 
	`CñlFûl
(1, 
˚Œ
);

735 
˚Œ
->
	`SëDau0
((
fCñls
[
d1
]));

736 
˚Œ
->
	`SëDau1
((
fCñls
[
d2
]));

738 
	`Ex∂‹e
–(
fCñls
[
d1
]) );

739 
	`Ex∂‹e
–(
fCñls
[
d2
]) );

742 
	}
}

748 
DoubÀ_t
 
	gTMVA
::
PDEFﬂm
::
	$EvÆ
(
DoubÀ_t
 *
xR™d
, DoubÀ_à&
evít_dísôy
)

754 
°d
::
ve˘‹
<
DoubÀ_t
> 
xvec
;

755 
xvec
.
	`ª£rve
(
	`GëTŸDim
());

756 
I¡_t
 
idim
 = 0; idim < 
	`GëTŸDim
(); ++idim)

757 
xvec
.
	`push_back
–
	`V¨Tønsf‹mInvîs
(
idim
, 
xR™d
[idim]) );

759  
	`GëDi°r
()->
	`Dísôy
(
xvec
, 
evít_dísôy
);

760 
	}
}

768 
	gTMVA
::
PDEFﬂm
::
	$Grow
()

770 
fTimî
->
	`Inô
(
fNCñls
);

772 
L⁄g_t
 
iCñl
;

773 
PDEFﬂmCñl
* 
√wCñl
;

775  (
fLa°Ce
+2Ë< 
fNCñls
 ) {

776 
iCñl
 = 
	`PìkMax
();

778 i‡–(
iCñl
<0Ë|| (iCñl>
fLa°Ce
) ) {

779 
	`Log
(Ë<< 
kVERBOSE
 << "Bªak: "<< 
fLa°Ce
+1 << " cñl†¸óãd" << 
Endl
;

781 
L⁄g_t
 
jCñl
=
fLa°Ce
+1; jCñl<
fNCñls
; jCell++)

782 
dñëe
 
fCñls
[
jCñl
];

783 
fNCñls
 = 
fLa°Ce
+1;

786 
√wCñl
 = 
fCñls
[
iCñl
];

788 
	`OuçutGrow
();

790 i‡–
	`Divide
–
√wCñl
 )==0) ;

792 
	`OuçutGrow
–
kTRUE
 );

793 
	`CheckAŒ
(1);

795 
	`Log
(Ë<< 
kVERBOSE
 << 
	`GëNA˘iveCñls
(Ë<< "á˘ivê˚Œ†¸óãd" << 
Endl
;

796 
	}
}

803 
	gTMVA
::
PDEFﬂm
::
	$SëInhiDiv
(
I¡_t
 
iDim
, I¡_à
öhiDiv
)

805 if(
fDim
==0Ë
	`Log
(Ë<< 
kFATAL
 << "SëInhiDiv: fDim=0" << 
Endl
;

806 if(
fInhiDiv
 == 0) {

807 
fInhiDiv
 = 
√w
 
I¡_t
[ 
fDim
 ];

808 
I¡_t
 
i
=0; i<
fDim
; i++Ë
fInhiDiv
[i]=0;

811 if––0<=
iDim
Ë&& (iDim<
fDim
)) {

812 
fInhiDiv
[
iDim
] = 
öhiDiv
;

814 
	`Log
(Ë<< 
kFATAL
 << "Wr⁄g iDim" << 
Endl
;

815 
	}
}

823 
	gTMVA
::
PDEFﬂm
::
	$CheckAŒ
(
I¡_t
 
Àvñ
)

825 
I¡_t
 
îr‹s
, 
w¨nögs
;

826 
PDEFﬂmCñl
 *
˚Œ
;

827 
L⁄g_t
 
iCñl
;

829 
îr‹s
 = 0; 
w¨nögs
 = 0;

830 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kVERBOSE
 << "Pîf‹mög c⁄si°ícy check†f‹ cª©ed fﬂm" << 
Endl
;

831 
iCñl
=1; iCñl<=
fLa°Ce
; iCell++) {

832 
˚Œ
 = 
fCñls
[
iCñl
];

834 if–((
˚Œ
->
	`GëDau0
()==0Ë&& (˚Œ->
	`GëDau1
()!=0) ) ||

835 ((
˚Œ
->
	`GëDau1
()==0Ë&& (˚Œ->
	`GëDau0
()!=0) ) ) {

836 
îr‹s
++;

837 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%d ha†⁄ly o√ daughã∏" << 
iCñl
 << 
Endl
;

839 if–(
˚Œ
->
	`GëDau0
()==0Ë&& (˚Œ->
	`GëDau1
()==0Ë&& (˚Œ->
	`GëSèt
()==0) ) {

840 
îr‹s
++;

841 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%d ha†nÿdaughã∏™d i†öa˘ivê" << 
iCñl
 << 
Endl
;

843 if–(
˚Œ
->
	`GëDau0
()!=0Ë&& (˚Œ->
	`GëDau1
()!=0Ë&& (˚Œ->
	`GëSèt
()==1) ) {

844 
îr‹s
++;

845 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%d ha†twÿdaughãr†™d i†a˘ivê" << 
iCñl
 << 
Endl
;

849 if–(
˚Œ
->
	`GëP¨e
())!=
fCñls
[0] ) {

850 i‡–(
˚Œ
 !˚Œ->
	`GëP¨e
()->
	`GëDau0
()Ë&& (˚Œ !˚Œ->GëP¨e()->
	`GëDau1
()) ) {

851 
îr‹s
++;

852 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%dÖ¨íànŸÖoötögÅÿthi†˚Œ " << 
iCñl
 << 
Endl
;

857 if(
˚Œ
->
	`GëDau0
()!=0) {

858 if(
˚Œ
 !(˚Œ->
	`GëDau0
())->
	`GëP¨e
()) {

859 
îr‹s
++;

860 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%d daughã∏0ÇŸÖoötögÅÿthi†˚Œ " << 
iCñl
 << 
Endl
;

863 if(
˚Œ
->
	`GëDau1
()!=0) {

864 if(
˚Œ
 !(˚Œ->
	`GëDau1
())->
	`GëP¨e
()) {

865 
îr‹s
++;

866 i‡(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñl'†nÿ%d daughã∏1ÇŸÖoötögÅÿthi†˚Œ " << 
iCñl
 << 
Endl
;

869 if(
˚Œ
->
	`GëVﬁume
()<1E-50) {

870 
îr‹s
++;

871 if(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñ»no. " << 
iCñl
 << " ha†Vﬁumêo‡<1E-50" << 
Endl
;

876 
iCñl
=0; iCñl<=
fLa°Ce
; iCell++) {

877 
˚Œ
 = 
fCñls
[
iCñl
];

878 if–(
˚Œ
->
	`GëSèt
()==1Ë&& (˚Œ->
	`GëVﬁume
()<1E-11) ) {

879 
îr‹s
++;

880 if(
Àvñ
==1Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: Cñ»no. " << 
iCñl
 << " i†a˘ivêbuàVﬁumêi†0 " << 
Endl
;

884 if(
Àvñ
==1){

885 
	`Log
(Ë<< 
kVERBOSE
 << "Check ha†found " << 
îr‹s
 << "Éº‹†™d " << 
w¨nögs
 << " w¨nögs." << 
Endl
;

887 if(
îr‹s
>0){

888 
	`Info
("CheckAŒ","Check - foundÅŸÆ %dÉº‹†\n",
îr‹s
);

890 
	}
}

896 
	gTMVA
::
PDEFﬂm
::
	$PrötCñl
(
L⁄g_t
 
iCñl
)

898 i‡(
iCñl
 < 0 || iCñ»> 
fLa°Ce
) {

899 
	`Log
(Ë<< 
kWARNING
 << "<PrötCñl(iCñl=" << 
iCñl


900 << ")>: cñ»numbî " << 
iCñl
 << " out of bounds!"

901 << 
Endl
;

905 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
fDim
), 
	`˚ŒSize
(fDim);

906 
fCñls
[
iCñl
]->
	`GëHcub
(
˚ŒPosi
,
˚ŒSize
);

907 
I¡_t
 
kBe°
 = 
fCñls
[
iCñl
]->
	`GëBe°
();

908 
DoubÀ_t
 
xBe°
 = 
fCñls
[
iCñl
]->
	`GëXdiv
();

910 
	`Log
(Ë<< "Cñl[" << 
iCñl
 << "]={ ";

911 
	`Log
(Ë<< " " << 
fCñls
[
iCñl
] << " " << 
Endl
;

912 
	`Log
() << " Xdiv[abs. coord.]="

913 << 
	`V¨Tønsf‹mInvîs
(
kBe°
,
˚ŒPosi
[kBe°] + 
xBe°
*
˚ŒSize
[kBest])

914 << 
Endl
;

915 
	`Log
() << " Abs. coord. = (";

916 
I¡_t
 
idim
=0; idim<
fDim
; idim++) {

917 
	`Log
(Ë<< "dim[" << 
idim
 << "]={"

918 << 
	`V¨Tønsf‹mInvîs
(
idim
,
˚ŒPosi
[idim]) << ","

919 << 
	`V¨Tønsf‹mInvîs
(
idim
,
˚ŒPosi
[idim] + 
˚ŒSize
[idim])

921 i‡(
idim
 < 
fDim
-1)

922 
	`Log
() << ", ";

924 
	`Log
(Ë<< ")" << 
Endl
;

925 
fCñls
[
iCñl
]->
	`Pröt
("1");

927 
	`Log
() << "Elements: [";

928 
TVe˘‹D
 *
vec
 = (TVe˘‹D*)
fCñls
[
iCñl
]->
	`GëEÀmít
();

929 i‡(
vec
 !
NULL
){

930 
I¡_t
 
i
=0; i<
vec
->
	`GëNrows
(); i++){

931 i‡(
i
>0Ë
	`Log
() << ", ";

932 
	`Log
(Ë<< 
	`GëCñlEÀmít
(
fCñls
[
iCñl
], 
i
);

935 
	`Log
() << "not set";

936 
	`Log
(Ë<< "]" << 
Endl
;

937 
	`Log
()<<"}"<<
Endl
;

938 
	}
}

943 
	gTMVA
::
PDEFﬂm
::
	$PrötCñls
()

945 
L⁄g_t
 
iCñl
=0; iCñl<=
fLa°Ce
; iCell++)

946 
	`PrötCñl
(
iCñl
);

947 
	}
}

956 
	gTMVA
::
PDEFﬂm
::
	$FûlFﬂmCñls
(c⁄° 
Evít
* 
ev
, 
Flﬂt_t
 
wt
)

959 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆues
 = 
ev
->
	`GëVÆues
();

960 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvÆues
 = 
	`V¨Tønsf‹m
(
vÆues
);

961 
PDEFﬂmCñl
 *
˚Œ
 = 
	`FödCñl
(
tvÆues
);

965 
	`SëCñlEÀmít
(
˚Œ
, 0, 
	`GëCñlEÀmít
(˚Œ, 0Ë+ 
wt
);

966 
	`SëCñlEÀmít
(
˚Œ
, 1, 
	`GëCñlEÀmít
(˚Œ, 1Ë+ 
wt
*wt);

967 
	}
}

972 
	gTMVA
::
PDEFﬂm
::
	$Re£tCñlEÀmíts
()

974 i‡(!
fCñls
) ;

976 
	`Log
(Ë<< 
kVERBOSE
 << "Dñëê˚ŒÉÀmíts" << 
Endl
;

977 
L⁄g_t
 
iCñl
 = 0; iCñ»< 
fNCñls
; ++iCell) {

978 
TObje˘
* 
ñemíts
 = 
fCñls
[
iCñl
]->
	`GëEÀmít
();

979 i‡(
ñemíts
) {

980 
dñëe
 
ñemíts
;

981 
fCñls
[
iCñl
]->
	`SëEÀmít
(
NULL
);

984 
	}
}

991 
Boﬁ_t
 
	gTMVA
::
PDEFﬂm
::
	$CñlVÆueIsUndeföed
–
PDEFﬂmCñl
* )

993  
kFALSE
;

994 
	}
}

1017 
Flﬂt_t
 
	gTMVA
::
PDEFﬂm
::
GëCñlVÆue
(c⁄° 
°d
::
ve˘‹
<Flﬂt_t> &
xvec
, 
ECñlVÆue
 
cv
, 
PDEFﬂmKî√lBa£
 *
kî√l
)

1019 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
txvec
(
V¨Tønsf‹m
(
xvec
));

1020 i‡(
	gkî√l
 =
NULL
)

1021  
GëCñlVÆue
(
FödCñl
(
txvec
), 
cv
);

1023  
	gkî√l
->
E°im©e
(
this
, 
txvec
, 
cv
);

1044 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
TMVA
::
PDEFﬂm
::
GëCñlVÆue
–c⁄° 
°d
::
m≠
<
I¡_t
,Flﬂt_t>& 
xvec
, 
ECñlVÆue
 
cv
 )

1047 
	g°d
::
m≠
<
I¡_t
,
	gFlﬂt_t
> 
	gtxvec
;

1048 
	g°d
::
m≠
<
I¡_t
,
	gFlﬂt_t
>::
c⁄°_ôî©‹
 
ô
=
xvec
.
begö
(); 
	gô
!=xvec.
íd
(); ++it)

1049 
	gtxvec
.
ö£π
(
°d
::
∑ú
<
I¡_t
, 
Flﬂt_t
>(
ô
->
fú°
, 
V¨Tønsf‹m
(ô->fú°, it->
£c⁄d
)));

1052 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*> 
˚Œs
 = 
FödCñls
(
txvec
);

1055 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
˚Œ_vÆues
;

1056 
	g˚Œ_vÆues
.
ª£rve
(
˚Œs
.
size
());

1057 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*>::
c⁄°_ôî©‹
 
˚Œ_ô
=
˚Œs
.
begö
();

1058 
	g˚Œ_ô
 !
˚Œs
.
íd
(); ++cell_it)

1059 
	g˚Œ_vÆues
.
push_back
(
GëCñlVÆue
(*
˚Œ_ô
, 
cv
));

1061  
	g˚Œ_vÆues
;

1081 
	gTMVA
::
PDEFﬂmCñl
* 
TMVA
::
PDEFﬂm
::
FödCñl
–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
xvec
 ) const

1083 
PDEFﬂmVe˘
 
˚ŒPosi0
(
GëTŸDim
()), 
˚ŒSize0
(GetTotDim());

1084 
PDEFﬂmCñl
 *
	g˚Œ
, *
	g˚Œ0
;

1086 
	g˚Œ
=
fCñls
[0];

1087 
I¡_t
 
	gidim
=0;

1088 
	g˚Œ
->
GëSèt
()!=1) {

1089 
idim
=
˚Œ
->
GëBe°
();

1090 
	g˚Œ0
=
˚Œ
->
GëDau0
();

1091 
	g˚Œ0
->
GëHcub
(
˚ŒPosi0
,
˚ŒSize0
);

1093 i‡(
	gxvec
.
©
(
idim
)<=
˚ŒPosi0
[idim]+
˚ŒSize0
[idim])

1094 
˚Œ
=
˚Œ0
;

1096 
	g˚Œ
=(
˚Œ
->
GëDau1
());

1098  
	g˚Œ
;

1119 
	gTMVA
::
PDEFﬂm
::
FödCñls
(c⁄° 
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
> &
txvec
, 
PDEFﬂmCñl
* 
˚Œ
, std::
ve˘‹
<PDEFﬂmCñl*> &
˚Œs
) const

1121 
PDEFﬂmVe˘
 
˚ŒPosi0
(
GëTŸDim
()), 
˚ŒSize0
(GetTotDim());

1122 
PDEFﬂmCñl
 *
	g˚Œ0
;

1123 
I¡_t
 
	gidim
=0;

1125 
	g˚Œ
->
GëSèt
()!=1) {

1126 
idim
=
˚Œ
->
GëBe°
();

1129 
	gm≠
<
	gI¡_t
, 
	gFlﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
txvec
.
föd
(
idim
);

1131 i‡(
	gô
 !
txvec
.
íd
()){

1134 
˚Œ0
=
˚Œ
->
GëDau0
();

1135 
	g˚Œ0
->
GëHcub
(
˚ŒPosi0
,
˚ŒSize0
);

1137 i‡(
	gô
->
	g£c⁄d
 <
˚ŒPosi0
[
idim
] + 
˚ŒSize0
[idim])

1138 
˚Œ
=
˚Œ0
;

1140 
	g˚Œ
=
˚Œ
->
GëDau1
();

1143 
FödCñls
(
txvec
, 
˚Œ
->
GëDau0
(), 
˚Œs
);

1144 
FödCñls
(
txvec
, 
˚Œ
->
GëDau1
(), 
˚Œs
);

1148 
	g˚Œs
.
push_back
(
˚Œ
);

1166 
	g°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*> TMVA::
PDEFﬂm
::
FödCñls
(c⁄° 
°d
::ve˘‹<
Flﬂt_t
> &
txvec
) const

1169 
°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
> 
	gtxvec_m≠
;

1170 
UI¡_t
 
	gi
=0; i<
	gtxvec
.
size
(); ++i)

1171 
	gtxvec_m≠
.
ö£π
(
°d
::
∑ú
<
I¡_t
, 
Flﬂt_t
>(
i
, 
txvec
.
©
(i)));

1174 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*> 
˚Œs
(0);

1177 
FödCñls
(
txvec_m≠
, 
fCñls
[0], 
˚Œs
);

1179  
	g˚Œs
;

1197 
	g°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*> TMVA::
PDEFﬂm
::
FödCñls
(c⁄° 
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
> &
txvec
) const

1200 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*> 
˚Œs
(0);

1203 
FödCñls
(
txvec
, 
fCñls
[0], 
˚Œs
);

1205  
	g˚Œs
;

1219 
TH1D
* 
	gTMVA
::
PDEFﬂm
::
	$Døw1Dim
–
ECñlVÆue
 
˚Œ_vÆue
, 
I¡_t
 
nbö
, 
PDEFﬂmKî√lBa£
 *
kî√l
 )

1222 i‡–
	`GëTŸDim
()!=1 )

1223 
	`Log
(Ë<< 
kFATAL
 << "<Draw1Dim>: function can only be used for 1-dimensional foams!"

1224 << 
Endl
;

1226 
TSåög
 
	`h«me
("h_1dim");

1227 
TH1D
* 
h1
=(TH1D*)
gDúe˘‹y
->
	`Gë
(
h«me
);

1228 i‡(
h1
Ë
dñëe
 h1;

1229 
h1

√w
 
	`TH1D
(
h«me
, "1-dimísi⁄Æ Fﬂm", 
nbö
, 
fXmö
[0], 
fXmax
[0]);

1231 i‡(!
h1
Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: C™ÇŸ cª©êhi°o" << 
h«me
 << 
Endl
;

1234 
I¡_t
 
iböx
=1; iböx<=
h1
->
	`GëNbösX
(); ++ibinx) {

1236 
°d
::
ve˘‹
<
Flﬂt_t
> 
txvec
;

1237 
txvec
.
	`push_back
–
	`V¨Tønsf‹m
(0, 
h1
->
	`GëBöCíãr
(
iböx
)) );

1238 
Flﬂt_t
 
vÆ
 = 0;

1239 i‡(
kî√l
 !
NULL
) {

1241 
vÆ
 = 
kî√l
->
	`E°im©e
(
this
, 
txvec
, 
˚Œ_vÆue
);

1243 
vÆ
 = 
	`GëCñlVÆue
(
	`FödCñl
(
txvec
), 
˚Œ_vÆue
);

1246 
h1
->
	`SëBöC⁄ã¡
(
iböx
, 
vÆ
 + h1->
	`GëBöC⁄ã¡
(ibinx));

1249  
h1
;

1250 
	}
}

1271 
TH2D
* 
	gTMVA
::
PDEFﬂm
::
	$Proje˘2
–
I¡_t
 
idim1
, I¡_à
idim2
, 
ECñlVÆue
 
˚Œ_vÆue
, 
PDEFﬂmKî√lBa£
 *
kî√l
, 
UI¡_t
 
nbö
 )

1274 i‡((
idim1
>=
	`GëTŸDim
()) || (idim1<0) ||

1275 (
idim2
>=
	`GëTŸDim
()) || (idim2<0) ||

1276 (
idim1
==
idim2
) )

1277 
	`Log
(Ë<< 
kFATAL
 << "<Project2>: wrong dimensions given: "

1278 << 
idim1
 << ", " << 
idim2
 << 
Endl
;

1283 i‡(
nbö
>1000){

1284 
	`Log
(Ë<< 
kWARNING
 << "W¨nög:Çumbî o‡bö†toÿbig: " << 
nbö


1285 << " Usög 1000 bö†f‹Éach dimísi⁄ in°ód." << 
Endl
;

1286 
nbö
 = 1000;

1287 } i‡(
nbö
<1) {

1288 
	`Log
(Ë<< 
kWARNING
 << "Wr⁄g böÇumbî: " << 
nbö


1289 << "; sëÇbö=50" << 
Endl
;

1290 
nbö
 = 50;

1294 
TSåög
 
	`h«me
(
	`F‹m
("h_%d_vs_%d",
idim1
,
idim2
));

1297 
TH2D
* 
h1
=(TH2D*)
gDúe˘‹y
->
	`Gë
(
h«me
.
	`D©a
());

1298 i‡(
h1
Ë
dñëe
 h1;

1299 
h1

√w
 
	`TH2D
(
h«me
.
	`D©a
(), 
	`F‹m
("v¨%d v†v¨%d",
idim1
,
idim2
), 
nbö
, 
fXmö
[idim1], 
fXmax
[idim1],Çbin, fXmin[idim2], fXmax[idim2]);

1301 i‡(!
h1
Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: C™ÇŸ cª©êhi°o" << 
h«me
 << 
Endl
;

1305 
I¡_t
 
xbö
 = 1; xbö <
h1
->
	`GëNbösX
(); ++xbin) {

1306 
I¡_t
 
ybö
 = 1; ybö <
h1
->
	`GëNbösY
(); ++ybin) {

1309 
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
> 
txvec
;

1310 
txvec
[
idim1
] = 
	`V¨Tønsf‹m
(idim1, 
h1
->
	`GëXaxis
()->
	`GëBöCíãr
(
xbö
));

1311 
txvec
[
idim2
] = 
	`V¨Tønsf‹m
(idim2, 
h1
->
	`GëYaxis
()->
	`GëBöCíãr
(
ybö
));

1315 
°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*> 
˚Œs
 = 
	`FödCñls
(
txvec
);

1319 
Flﬂt_t
 
sum_cv
 = 0;

1320 
°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*>::
c⁄°_ôî©‹
 
ô
 = 
˚Œs
.
	`begö
();

1321 
ô
 !
˚Œs
.
	`íd
(); ++it) {

1323 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
	`GëTŸDim
()), 
	`˚ŒSize
(GetTotDim());

1324 (*
ô
)->
	`GëHcub
(
˚ŒPosi
,
˚ŒSize
);

1327 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvec
;

1328 
I¡_t
 
i
=0; i<
	`GëTŸDim
(); ++i) {

1329 i‡–
i
 !
idim1
 && i !
idim2
 )

1330 
tvec
.
	`push_back
(
˚ŒPosi
[
i
] + 0.5*
˚ŒSize
[i]);

1332 
tvec
.
	`push_back
(
txvec
[
i
]);

1334 i‡(
kî√l
 !
NULL
) {

1336 
sum_cv
 +
kî√l
->
	`E°im©e
(
this
, 
tvec
, 
˚Œ_vÆue
);

1338 
sum_cv
 +
	`GëCñlVÆue
(
	`FödCñl
(
tvec
), 
˚Œ_vÆue
);

1343 
h1
->
	`SëBöC⁄ã¡
(
xbö
, 
ybö
, 
sum_cv
 + h1->
	`GëBöC⁄ã¡
(xbin, ybin));

1347  
h1
;

1348 
	}
}

1357 
Flﬂt_t
 
	gTMVA
::
PDEFﬂm
::
	$GëCñlVÆue
(c⁄° 
PDEFﬂmCñl
* 
˚Œ
, 
ECñlVÆue
 
cv
)

1360 
cv
) {

1362 
kVÆue
:

1363  
	`GëCñlEÀmít
(
˚Œ
, 0);

1365 
kVÆueEº‹
:

1366  
	`GëCñlEÀmít
(
˚Œ
, 1);

1368 
kVÆueDísôy
: {

1370 
DoubÀ_t
 
vﬁume
 = 
˚Œ
->
	`GëVﬁume
();

1371 i‡(
vﬁume
 > 
numîic_limôs
<>::
	`ïsû⁄
()) {

1372  
	`GëCñlVÆue
(
˚Œ
, 
kVÆue
)/
vﬁume
;

1374 i‡(
vﬁume
<=0){

1375 
˚Œ
->
	`Pröt
("1");

1376 
	`Log
(Ë<< 
kWARNING
 << "<GetCellDensity(cell)>: ERROR: cell volume"

1379 << " cñ»vﬁume=" << 
vﬁume


1380 << " cñ»íåõs=" << 
	`GëCñlVÆue
(
˚Œ
, 
kVÆue
Ë<< 
Endl
;

1382 
	`Log
(Ë<< 
kWARNING
 << "<GetCellDensity(cell)>: WARNING: cell volume"

1384 << " cñ»vﬁume: " << 
vﬁume
 << 
Endl
;

1390 
kMónVÆue
:

1391  
˚Œ
->
	`GëI¡g
();

1393 
kRms
:

1394  
˚Œ
->
	`GëDriv
();

1396 
kRmsOvMón
:

1397 i‡(
˚Œ
->
	`GëI¡g
() != 0)

1398  
˚Œ
->
	`GëDriv
()/˚Œ->
	`GëI¡g
();

1402 
kCñlVﬁume
:

1403  
˚Œ
->
	`GëVﬁume
();

1406 
	`Log
(Ë<< 
kFATAL
 << "<GëCñlVÆue>: unknow¿˚Œ vÆue" << 
Endl
;

1411 
	}
}

1417 
DoubÀ_t
 
	gTMVA
::
PDEFﬂm
::
	$GëCñlEÀmít
–c⁄° 
PDEFﬂmCñl
 *
˚Œ
, 
UI¡_t
 
i
 ) const

1420 
TVe˘‹D
 *
vec
 = (TVe˘‹D*)
˚Œ
->
	`GëEÀmít
();

1423 i‡(!
vec
 || 
i
 >(
UI¡_t
Ëvec->
	`GëNrows
())

1426  (*
vec
)(
i
);

1427 
	}
}

1433 
	gTMVA
::
PDEFﬂm
::
	$SëCñlEÀmít
–
PDEFﬂmCñl
 *
˚Œ
, 
UI¡_t
 
i
, 
DoubÀ_t
 
vÆue
 )

1435 
TVe˘‹D
 *
vec
 = 
NULL
;

1439 i‡(
˚Œ
->
	`GëEÀmít
(Ë=
NULL
) {

1440 
vec
 = 
√w
 
	`TVe˘‹D
(
i
+1);

1441 
vec
->
	`Zîo
();

1442 (*
vec
)(
i
Ë
vÆue
;

1443 
˚Œ
->
	`SëEÀmít
(
vec
);

1446 
vec
 = (
TVe˘‹D
*)
˚Œ
->
	`GëEÀmít
();

1447 i‡(!
vec
)

1448 
	`Log
(Ë<< 
kFATAL
 << "<SëCñlEÀmít> ERROR: cñ»ñemíài†nŸá TVe˘‹D*" << 
Endl
;

1450 i‡(
i
 >(
UI¡_t
Ë
vec
->
	`GëNrows
())

1451 
vec
->
	`ResizeTo
(0,
i
);

1453 (*
vec
)(
i
Ë
vÆue
;

1455 
	}
}

1461 
	gTMVA
::
PDEFﬂm
::
	$OuçutGrow
–
Boﬁ_t
 
föished
 )

1463 i‡(
föished
) {

1464 
	`Log
(Ë<< 
kINFO
 << "Eœp£dÅime: " + 
fTimî
->
	`GëEœp£dTime
()

1465 << " " << 
Endl
;

1469 
I¡_t
 
modulo
 = 1;

1471 i‡(
fNCñls
 >100Ë
modulo
 = 
	`I¡_t
(fNCells/100);

1472 i‡(
fLa°Ce
%
modulo
 =0Ë
fTimî
->
	`DøwProgªssB¨
( fLastCe );

1473 
	}
}

1512 
	gTMVA
::
PDEFﬂm
::
	$RoŸPlŸ2dim
–c⁄° 
TSåög
& 
fûíame
, TSåög 
›t
,

1513 
Boﬁ_t
 
¸óãC™vas
, Boﬁ_à
cﬁ‹s
 )

1515 i‡(
	`GëTŸDim
() != 2)

1516 
	`Log
(Ë<< 
kFATAL
 << "RootPlot2dim() can only be used with "

1517 << "two-dimísi⁄Æ fﬂms!" << 
Endl
;

1520 
ECñlVÆue
 
˚Œ_vÆue
 = 
kVÆue
;

1521 
Boﬁ_t
 
∂Ÿ˚Œnumbî
 = 
kFALSE
;

1522 
Boﬁ_t
 
fûl˚Œs
 = 
kTRUE
;

1523 i‡(
›t
.
	`C⁄èös
("cell_value")){

1524 
˚Œ_vÆue
 = 
kVÆue
;

1525 } i‡(
›t
.
	`C⁄èös
("rms_ov_mean")){

1526 
˚Œ_vÆue
 = 
kRmsOvMón
;

1527 } i‡(
›t
.
	`C⁄èös
("rms")){

1528 
˚Œ_vÆue
 = 
kRms
;

1530 
fûl˚Œs
 = 
kFALSE
;

1532 i‡(
›t
.
	`C⁄èös
("cellnumber"))

1533 
∂Ÿ˚Œnumbî
 = 
kTRUE
;

1536 
°d
::
of°ªam
 
	`outfûe
(
fûíame
, std::
ios
::
out
);

1538 
outfûe
<<"{" << 
°d
::
ídl
;

1541 i‡(!
cﬁ‹s
) {

1543 
outfûe
 << "TCﬁ‹ *gøycﬁ‹s[100];" << 
°d
::
ídl
;

1544 
outfûe
 << "f‹ (I¡_ài=0.; i<100; i++)" << 
°d
::
ídl
;

1545 
outfûe
 << " gøycﬁ‹s[i]Úew TCﬁ‹(1000+i, 1-(Flﬂt_t)i/100.,1-(Flﬂt_t)i/100.,1-(Flﬂt_t)i/100.);"<< 
°d
::
ídl
;

1547 i‡(
¸óãC™vas
)

1548 
outfûe
 << "cM≠ =Çew TC™vas(\"" << 
fName
 << "\",\"Cell Map for "

1549 << 
fName
 << "\",600,600);" << 
°d
::
ídl
;

1551 
outfûe
<<"TBox*aÚew TBox();"<<
°d
::
ídl
;

1552 
outfûe
<<"a->SëFûlStyÀ(0);"<<
°d
::
ídl
;

1553 
outfûe
<<"a->SëLöeWidth(4);"<<
°d
::
ídl
;

1554 
outfûe
<<"TBox *b1Úew TBox();"<<
°d
::
ídl
;

1555 
outfûe
<<"TText*tÚew TText();"<<
°d
::
ídl
;

1556 i‡(
fûl˚Œs
) {

1557 
outfûe
 << (
cﬁ‹s
 ? "gStyle->SetPalette(1, 0);" : "gStyle->SetPalette(0);")

1558 << 
°d
::
ídl
;

1559 
outfûe
 <<"b1->SëFûlStyÀ(1001);"<<
°d
::
ídl
;

1560 
outfûe
<<"TBox *b2Úew TBox();"<<
°d
::
ídl
;

1561 
outfûe
 <<"b2->SëFûlStyÀ(0);"<<
°d
::
ídl
;

1564 
outfûe
 <<"b1->SëFûlStyÀ(0);"<<
°d
::
ídl
;

1567 i‡(
fûl˚Œs
)

1568 (
cﬁ‹s
 ? 
gStyÀ
->
	`SëPÆëã
(1, 0) : gStyle->SetPalette(0) );

1570 
Flﬂt_t
 
zmö
 = 1E8;

1571 
Flﬂt_t
 
zmax
 = -1E8;

1575 i‡(
fûl˚Œs
) {

1576 
L⁄g_t
 
iCñl
=1; iCñl<=
fLa°Ce
; iCell++) {

1577 i‡–
fCñls
[
iCñl
]->
	`GëSèt
() == 1) {

1578 
Flﬂt_t
 
vÆue
 = 
	`GëCñlVÆue
(
fCñls
[
iCñl
], 
˚Œ_vÆue
);

1579 i‡(
vÆue
<
zmö
)

1580 
zmö
=
vÆue
;

1581 i‡(
vÆue
>
zmax
)

1582 
zmax
=
vÆue
;

1585 
outfûe
 << "// ob£rved möimumánd maximum o‡di°ributi⁄: " << 
°d
::
ídl
;

1586 
outfûe
 << "// Flﬂt_àzmö = "<< 
zmö
 << ";" << 
°d
::
ídl
;

1587 
outfûe
 << "// Flﬂt_àzmax = "<< 
zmax
 << ";" << 
°d
::
ídl
;

1590 
outfûe
 << "// u£d möimumánd maximum o‡di°ributi⁄ (èkög i¡ÿaccou¡Üog sˇÀ i‡≠∂iˇbÀ): " << 
°d
::
ídl
;

1591 
outfûe
 << "Flﬂt_àzmö = "<< 
zmö
 << ";" << 
°d
::
ídl
;

1592 
outfûe
 << "Flﬂt_àzmax = "<< 
zmax
 << ";" << 
°d
::
ídl
;

1594 
Flﬂt_t
 
x1
,
y1
,
x2
,
y2
,
x
,
y
;

1595 
Flﬂt_t
 
offs
 = 0.01;

1596 
Flﬂt_t
 
Õag
 = 1-2*
offs
;

1597 
I¡_t
 
ncﬁ‹s
 = 
cﬁ‹s
 ? 
gStyÀ
->
	`GëNumbîOfCﬁ‹s
() : 100;

1598 
Flﬂt_t
 
sˇÀ
 = (
ncﬁ‹s
-1)/(
zmax
 - 
zmö
);

1599 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
	`GëTŸDim
()), 
	`˚ŒSize
(GetTotDim());

1603 
outfûe
 << "// ==========Re˘™guœ∏˚Œ† ==========="<< 
°d
::
ídl
;

1604 
L⁄g_t
 
iCñl
=1; iCñl<=
fLa°Ce
; iCell++) {

1605 i‡–
fCñls
[
iCñl
]->
	`GëSèt
() == 1) {

1606 
fCñls
[
iCñl
]->
	`GëHcub
(
˚ŒPosi
,
˚ŒSize
);

1607 
x1
 = 
offs
+
Õag
*(
˚ŒPosi
[0]);

1608 
y1
 = 
offs
+
Õag
*(
˚ŒPosi
[1]);

1609 
x2
 = 
offs
+
Õag
*(
˚ŒPosi
[0]+
˚ŒSize
[0]);

1610 
y2
 = 
offs
+
Õag
*(
˚ŒPosi
[1]+
˚ŒSize
[1]);

1612 i‡(
fûl˚Œs
) {

1614 
Flﬂt_t
 
vÆue
 = 
	`GëCñlVÆue
(
fCñls
[
iCñl
], 
˚Œ_vÆue
);

1617 
I¡_t
 
cﬁ‹
;

1618 i‡(
cﬁ‹s
)

1619 
cﬁ‹
 = 
gStyÀ
->
	`GëCﬁ‹PÆëã
(
	`I¡_t
((
vÆue
-
zmö
)*
sˇÀ
));

1621 
cﬁ‹
 = 1000+(
	`I¡_t
((
vÆue
-
zmö
)*
sˇÀ
));

1624 
outfûe
 << "b1->SëFûlCﬁ‹(" << 
cﬁ‹
 << ");" << 
°d
::
ídl
;

1628 
outfûe
<<"b1->DøwBox("<<
x1
<<","<<
y1
<<","<<
x2
<<","<<
y2
<<");"<<
°d
::
ídl
;

1629 i‡(
fûl˚Œs
)

1630 
outfûe
<<"b2->DøwBox("<<
x1
<<","<<
y1
<<","<<
x2
<<","<<
y2
<<");"<<
°d
::
ídl
;

1633 i‡(
∂Ÿ˚Œnumbî
) {

1634 
outfûe
<<"t->SëTextCﬁ‹(4);"<<
°d
::
ídl
;

1635 if(
fLa°Ce
<51)

1636 
outfûe
<<"t->SëTextSize(0.025);"<<
°d
::
ídl
;

1637 if(
fLa°Ce
<251)

1638 
outfûe
<<"t->SëTextSize(0.015);"<<
°d
::
ídl
;

1640 
outfûe
<<"t->SëTextSize(0.008);"<<
°d
::
ídl
;

1641 
x
 = 
offs
+
Õag
*(
˚ŒPosi
[0]+0.5*
˚ŒSize
[0]);

1642 
y
 = 
offs
+
Õag
*(
˚ŒPosi
[1]+0.5*
˚ŒSize
[1]);

1643 
outfûe
<<"t->DøwText("<<
x
<<","<<
y
<<","<<"\""<<
iCñl
<<"\""<<");"<<
°d
::
ídl
;

1647 
outfûe
<<"// =============End Re˘™gÀ†==========="<< 
°d
::
ídl
;

1649 
outfûe
 << "}" << 
°d
::
ídl
;

1650 
outfûe
.
	`Êush
();

1651 
outfûe
.
	`˛o£
();

1652 
	}
}

1658 
	gTMVA
::
PDEFﬂm
::
	$FûlBö¨ySórchTªe
–c⁄° 
Evít
* 
ev
 )

1660 
	`GëDi°r
()->
	`FûlBö¨ySórchTªe
(
ev
);

1661 
	}
}

1667 
	gTMVA
::
PDEFﬂm
::
	$DñëeBö¨ySórchTªe
()

1669 if(
fDi°r
Ë
dñëe
 fDistr;

1670 
fDi°r
 = 
NULL
;

1671 
	}
}

	@src/PDEFoamCell.cxx

35 
	~"TMVA/PDEFﬂmCñl.h
"

37 
	~"TMVA/PDEFﬂmVe˘.h
"

39 
	~<io°ªam
>

40 
	~<o°ªam
>

42 
	~"Rty≥s.h
"

43 
	~"TObje˘.h
"

44 
	~"TRef.h
"

46 
usög
 
«me•a˚
 
	g°d
;

48 
CœssImp
(
TMVA
::
PDEFﬂmCñl
);

53 
	gTMVA
::
PDEFﬂmCñl
::
	$PDEFﬂmCñl
()

54 : 
	`TObje˘
(),

55 
	`fDim
(0),

56 
	`fSîül
(0),

57 
	`fSètus
(1),

58 
	`fP¨ít
(0),

59 
	`fDaught0
(0),

60 
	`fDaught1
(0),

61 
	`fXdiv
(0.0),

62 
	`fBe°
(0),

63 
	`fVﬁume
(0.0),

64 
	`fI¡egøl
(0.0),

65 
	`fDrive
(0.0),

66 
	$fEÀmít
(0)

68 
	}
}

73 
	gTMVA
::
PDEFﬂmCñl
::
	$PDEFﬂmCñl
(
I¡_t
 
kDim
)

74 : 
	`TObje˘
(),

75 
	`fDim
(
kDim
),

76 
	`fSîül
(0),

77 
	`fSètus
(1),

78 
	`fP¨ít
(0),

79 
	`fDaught0
(0),

80 
	`fDaught1
(0),

81 
	`fXdiv
(0.0),

82 
	`fBe°
(0),

83 
	`fVﬁume
(0.0),

84 
	`fI¡egøl
(0.0),

85 
	`fDrive
(0.0),

86 
	$fEÀmít
(0)

88 i‡–
kDim
 <= 0 )

89 
	`Eº‹
( "PDEFoamCell", "Dimension hasÅo be >0" );

90 
	}
}

95 
	gTMVA
::
PDEFﬂmCñl
::
	$PDEFﬂmCñl
(c⁄° 
PDEFﬂmCñl
 &
˚Œ
)

96 : 
	`TObje˘
(),

97 
	`fDim
 (
˚Œ
.
fDim
),

98 
	`fSîül
 (
˚Œ
.
fSîül
),

99 
	`fSètus
 (
˚Œ
.
fSètus
),

100 
	`fP¨ít
 (
˚Œ
.
fP¨ít
),

101 
	`fDaught0
 (
˚Œ
.
fDaught0
),

102 
	`fDaught1
 (
˚Œ
.
fDaught1
),

103 
	`fXdiv
 (
˚Œ
.
fXdiv
),

104 
	`fBe°
 (
˚Œ
.
fBe°
),

105 
	`fVﬁume
 (
˚Œ
.
fVﬁume
),

106 
	`fI¡egøl
(
˚Œ
.
fI¡egøl
),

107 
	`fDrive
 (
˚Œ
.
fDrive
),

108 
	$fEÀmít
 (
˚Œ
.
fEÀmít
)

110 
	`Eº‹
( "PDEFoamCell", "COPY CONSTRUCTOR NOT IMPLEMENTED" );

111 
	}
}

116 
	gTMVA
::
PDEFﬂmCñl
::~
	$PDEFﬂmCñl
()

118 
	}
}

123 
TMVA
::
PDEFﬂmCñl
::
	$Fûl
(
I¡_t
 
°©us
, 
PDEFﬂmCñl
 *
∑ª¡
, PDEFﬂmCñ»*
daugh1
, PDEFﬂmCñ»*
daugh2
)

125 
fSètus
 = 
°©us
;

126 
fP¨ít
 = 
∑ª¡
;

127 
fDaught0
 = 
daugh1
;

128 
fDaught1
 = 
daugh2
;

129 
	}
}

140 
	gTMVA
::
PDEFﬂmCñl
::
	$GëHcub
–
PDEFﬂmVe˘
 &
˚ŒPosi
, PDEFﬂmVe˘ &
˚ŒSize
) const

142 if(
fDim
<1) ;

143 c⁄° 
PDEFﬂmCñl
 *
pCñl
,*
dCñl
;

144 
˚ŒPosi
 = 0.0; 
˚ŒSize
=1.0;

145 
dCñl
 = 
this
;

146 
dCñl
 != 0) {

147 
pCñl
 = 
dCñl
->
	`GëP¨e
();

148 if–
pCñl
== 0) ;

149 
I¡_t
 
kDiv
 = 
pCñl
->
fBe°
;

150 
DoubÀ_t
 
xDivi
 = 
pCñl
->
fXdiv
;

151 if(
dCñl
 =
pCñl
->
	`GëDau0
() ) {

152 
˚ŒSize
[
kDiv
] *=
xDivi
;

153 
˚ŒPosi
[
kDiv
] *=
xDivi
;

154 } if–
dCñl
 =
pCñl
->
	`GëDau1
() ) {

155 
˚ŒSize
[
kDiv
] *=(1.0-
xDivi
);

156 
˚ŒPosi
[
kDiv
] =˚ŒPosi[kDiv]*(1.0-
xDivi
)+xDivi;

158 
	`Eº‹
( "GetHcub ","Something wrong withÜinkedÅree \n");

160 
dCñl
=
pCñl
;

162 
	}
}

169 
	gTMVA
::
PDEFﬂmCñl
::
	$GëHSize
–
PDEFﬂmVe˘
 &
˚ŒSize
) const

171 if(
fDim
<1) ;

172 c⁄° 
PDEFﬂmCñl
 *
pCñl
,*
dCñl
;

173 
˚ŒSize
=1.0;

174 
dCñl
 = 
this
;

175 
dCñl
 != 0) {

176 
pCñl
 = 
dCñl
->
	`GëP¨e
();

177 if–
pCñl
== 0) ;

178 
I¡_t
 
kDiv
 = 
pCñl
->
fBe°
;

179 
DoubÀ_t
 
xDivi
 = 
pCñl
->
fXdiv
;

180 if(
dCñl
 =
pCñl
->
	`GëDau0
() ) {

181 
˚ŒSize
[
kDiv
]=˚ŒSize[kDiv]*
xDivi
;

182 } if(
dCñl
 =
pCñl
->
	`GëDau1
() ) {

183 
˚ŒSize
[
kDiv
]=˚ŒSize[kDiv]*(1.0-
xDivi
);

185 
	`Eº‹
( "GetHSize ","Something wrong withÜinkedÅree \n");

187 
dCñl
=
pCñl
;

189 
	}
}

194 
	gTMVA
::
PDEFﬂmCñl
::
	$CÆcVﬁume
()

196 
I¡_t
 
k
;

197 
DoubÀ_t
 
vﬁu
=1.0;

198 if(
fDim
>0) {

199 
PDEFﬂmVe˘
 
	`˚ŒSize
(
fDim
);

200 
	`GëHSize
(
˚ŒSize
);

201 
k
=0; k<
fDim
; k++Ë
vﬁu
 *
˚ŒSize
[k];

203 
fVﬁume
 =
vﬁu
;

204 
	}
}

210 
UI¡_t
 
	gTMVA
::
PDEFﬂmCñl
::
	$GëDïth
()

213 i‡(
fP¨ít
 == 0)

216 
UI¡_t
 
dïth
 = 1;

217 
PDEFﬂmCñl
 *
˚Œ
 = 
this
;

218 (
˚Œ
=˚Œ->
	`GëP¨e
()) != 0){

219 ++
dïth
;

221  
dïth
;

222 
	}
}

227 
UI¡_t
 
	gTMVA
::
PDEFﬂmCñl
::
	$GëTªeDïth
(
UI¡_t
 
dïth
)

229 i‡(
	`GëSèt
() == 1)

230  
dïth
 + 1;

232 
UI¡_t
 
dïth0
 = 0, 
dïth1
 = 0;

233 i‡(
	`GëDau0
(Ë!
NULL
)

234 
dïth0
 = 
	`GëDau0
()->
	`GëTªeDïth
(
dïth
+1);

235 i‡(
	`GëDau1
(Ë!
NULL
)

236 
dïth1
 = 
	`GëDau1
()->
	`GëTªeDïth
(
dïth
+1);

238  (
dïth0
 > 
dïth1
 ? depth0 : depth1);

239 
	}
}

244 
	gTMVA
::
PDEFﬂmCñl
::
	$Pröt
(
O±i⁄_t
 *
›ti⁄
) const

246 i‡(!
›ti⁄
Ë
	`Eº‹
( "Print", "No option set\n");

248 
°d
::
cout
 << " Sètus"<< 
fSètus
 <<",";

249 
°d
::
cout
 << " Vﬁume"<< 
fVﬁume
 <<",";

250 
°d
::
cout
 << " TrueI¡eg" << 
fI¡egøl
 <<",";

251 
°d
::
cout
 << " DriveI¡eg"<< 
fDrive
 <<",";

252 
°d
::
cout
 << std::
ídl
;;

253 
°d
::
cout
 << " Xdiv"<<
fXdiv
<<",";

254 
°d
::
cout
 << " Be°"<<
fBe°
<<",";

255 
°d
::
cout
 << " P¨ít {"<< (
	`GëP¨e
(Ë? GëP¨e()->
	`GëSîül
() : -1) <<"} ";

256 
°d
::
cout
 << " Daught0{"<< (
	`GëDau0
(Ë? GëDau0()->
	`GëSîül
() : -1 )<<"} ";

257 
°d
::
cout
 << " Daught1{"<< (
	`GëDau1
(Ë? GëDau1()->
	`GëSîül
() : -1 )<<"} ";

258 
°d
::
cout
 << std::
ídl
;;

261 i‡(
fDim
>0 ) {

262 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
fDim
); PDEFﬂmVe˘ 
	`˚ŒSize
(fDim);

263 
	`GëHcub
(
˚ŒPosi
,
˚ŒSize
);

264 
°d
::
cout
 <<" Posi"; 
˚ŒPosi
.
	`Pröt
("1"); std::cout<<","<< std::
ídl
;;

265 
°d
::
cout
 <<" Size"; 
˚ŒSize
.
	`Pröt
("1"); std::cout<<","<< std::
ídl
;;

267 
	}
}

	@src/PDEFoamDecisionTree.cxx

48 
	~"TMVA/PDEFﬂmDecisi⁄Tªe.h
"

49 
	~"TMVA/PDEFﬂmDecisi⁄TªeDísôy.h
"

51 
	~"TMVA/MsgLoggî.h
"

52 
	~"TMVA/PDEFﬂmCñl.h
"

53 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

54 
	~"TMVA/PDEFﬂmVe˘.h
"

55 
	~"TMVA/Sï¨©i⁄Ba£.h
"

56 
	~"TMVA/Ty≥s.h
"

57 
	~"TMVA/Vﬁume.h
"

59 
	~"Rty≥s.h
"

60 
	~"TH1D.h
"

62 
˛ass
 
	gTSåög
;

64 
CœssImp
(
TMVA
::
PDEFﬂmDecisi⁄Tªe
);

69 
	gTMVA
::
PDEFﬂmDecisi⁄Tªe
::
	$PDEFﬂmDecisi⁄Tªe
()

70 : 
	`PDEFﬂmDis¸imö™t
()

71 , 
	$fSïTy≥
(
NULL
)

73 
	}
}

85 
	gTMVA
::
PDEFﬂmDecisi⁄Tªe
::
	$PDEFﬂmDecisi⁄Tªe
(c⁄° 
TSåög
& 
«me
, 
Sï¨©i⁄Ba£
 *
£pTy≥
, 
UI¡_t
 
˛s
)

86 : 
	`PDEFﬂmDis¸imö™t
(
«me
, 
˛s
)

87 , 
	$fSïTy≥
(
£pTy≥
)

89 
	}
}

94 
	gTMVA
::
PDEFﬂmDecisi⁄Tªe
::
	$PDEFﬂmDecisi⁄Tªe
(c⁄° 
PDEFﬂmDecisi⁄Tªe
 &
‰om
)

95 : 
	`PDEFﬂmDis¸imö™t
(
‰om
)

96 , 
	$fSïTy≥
(
‰om
.
fSïTy≥
)

98 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

99 
	}
}

105 
	gTMVA
::
PDEFﬂmDecisi⁄Tªe
::~
	$PDEFﬂmDecisi⁄Tªe
()

107 i‡(
fSïTy≥
)

108 
dñëe
 
fSïTy≥
;

109 
	}
}

125 
	gTMVA
::
PDEFﬂmDecisi⁄Tªe
::
	$Ex∂‹e
(
PDEFﬂmCñl
 *
˚Œ
)

127 i‡(!
˚Œ
)

128 
	`Log
(Ë<< 
kFATAL
 << "<DTEx∂‹e> NuŒÖoöã∏giví!" << 
Endl
;

131 
°d
::
ve˘‹
<
TH1D
*> 
hsig
, 
hbkg
, 
hsig_unw
, 
hbkg_unw
;

132 
hsig
.
	`ª£rve
(
fDim
);

133 
hbkg
.
	`ª£rve
(
fDim
);

134 
hsig_unw
.
	`ª£rve
(
fDim
);

135 
hbkg_unw
.
	`ª£rve
(
fDim
);

136 
I¡_t
 
idim
 = 0; idim < 
fDim
; idim++) {

137 
hsig
.
	`push_back
(
√w
 
	`TH1D
(
	`F‹m
("hsig_%i", 
idim
),

138 
	`F‹m
("sig«l[%i]", 
idim
), 
fNBö
, 
fXmö
[idim], 
fXmax
[idim]));

139 
hbkg
.
	`push_back
(
√w
 
	`TH1D
(
	`F‹m
("hbkg_%i", 
idim
),

140 
	`F‹m
("background[%i]", 
idim
), 
fNBö
, 
fXmö
[idim], 
fXmax
[idim]));

141 
hsig_unw
.
	`push_back
(
√w
 
	`TH1D
(
	`F‹m
("hsig_unw_%i", 
idim
),

142 
	`F‹m
("sig«l_unw[%i]", 
idim
), 
fNBö
, 
fXmö
[idim], 
fXmax
[idim]));

143 
hbkg_unw
.
	`push_back
(
√w
 
	`TH1D
(
	`F‹m
("hbkg_unw_%i", 
idim
),

144 
	`F‹m
("background_unw[%i]", 
idim
), 
fNBö
, 
fXmö
[idim], 
fXmax
[idim]));

148 
PDEFﬂmVe˘
 
	`˚ŒSize
(
	`GëTŸDim
()), 
	`˚ŒPosi
(GetTotDim());

149 
˚Œ
->
	`GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

152 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`lb
(
	`GëTŸDim
());

153 
°d
::
ve˘‹
<
DoubÀ_t
> 
	`ub
(
	`GëTŸDim
());

154 
I¡_t
 
idim
 = 0; idim < 
	`GëTŸDim
(); idim++) {

155 
lb
[
idim
] = 
	`V¨Tønsf‹mInvîs
(idim, 
˚ŒPosi
[idim] - 
°d
::
numîic_limôs
<>::
	`ïsû⁄
());

156 
ub
[
idim
] = 
	`V¨Tønsf‹mInvîs
(idim, 
˚ŒPosi
[idim] + 
˚ŒSize
[idim] + 
°d
::
numîic_limôs
<>::
	`ïsû⁄
());

160 
PDEFﬂmDecisi⁄TªeDísôy
 *
di°r
 = 
dy«mic_ˇ°
<PDEFﬂmDecisi⁄TªeDísôy*>(
fDi°r
);

161 i‡(
di°r
 =
NULL
)

162 
	`Log
(Ë<< 
kFATAL
 << "<PDEFoamDecisionTree::Explore>: cast failed: "

163 << "PDEFﬂmDísôyBa£* --> PDEFﬂmDecisi⁄TªeDísôy*" << 
Endl
;

166 
TMVA
::
Vﬁume
 
	`vﬁume
(&
lb
, &
ub
);

169 
di°r
->
	`FûlHi°ogøms
(
vﬁume
, 
hsig
, 
hbkg
, 
hsig_unw
, 
hbkg_unw
);

172 
DoubÀ_t
 
xBe°
 = 0.5;

173 
I¡_t
 
kBe°
 = -1;

174 
DoubÀ_t
 
maxGaö
 = -1.0;

175 
DoubÀ_t
 
nTŸS
 = 
hsig
.
	`©
(0)->
	`I¡egøl
(0, hsig.©(0)->
	`GëNbösX
() + 1);

176 
DoubÀ_t
 
nTŸB
 = 
hbkg
.
	`©
(0)->
	`I¡egøl
(0, hbkg.©(0)->
	`GëNbösX
() + 1);

177 
DoubÀ_t
 
nTŸS_unw
 = 
hsig_unw
.
	`©
(0)->
	`I¡egøl
(0, hsig_unw.©(0)->
	`GëNbösX
() + 1);

178 
DoubÀ_t
 
nTŸB_unw
 = 
hbkg_unw
.
	`©
(0)->
	`I¡egøl
(0, hbkg_unw.©(0)->
	`GëNbösX
() + 1);

180 
I¡_t
 
idim
 = 0; idim < 
fDim
; ++idim) {

181 
DoubÀ_t
 
nSñS
 = 
hsig
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(0);

182 
DoubÀ_t
 
nSñB
 = 
hbkg
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(0);

183 
DoubÀ_t
 
nSñS_unw
 = 
hsig_unw
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(0);

184 
DoubÀ_t
 
nSñB_unw
 = 
hbkg_unw
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(0);

185 
I¡_t
 
jLo
 = 1; jLÿ< 
fNBö
; jLo++) {

186 
nSñS
 +
hsig
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(
jLo
);

187 
nSñB
 +
hbkg
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(
jLo
);

188 
nSñS_unw
 +
hsig_unw
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(
jLo
);

189 
nSñB_unw
 +
hbkg_unw
.
	`©
(
idim
)->
	`GëBöC⁄ã¡
(
jLo
);

193 i‡(!((
nSñS_unw
 + 
nSñB_unw
Ë>
	`GëNmö
() &&

194 (
nTŸS_unw
 - 
nSñS_unw
 + 
nTŸB_unw
 - 
nSñB_unw
Ë>
	`GëNmö
()))

197 
DoubÀ_t
 
xLo
 = 1.0 * 
jLo
 / 
fNBö
;

200 
DoubÀ_t
 
gaö
 = 
fSïTy≥
->
	`GëSï¨©i⁄Gaö
(
nSñS
, 
nSñB
, 
nTŸS
, 
nTŸB
);

202 i‡(
gaö
 >
maxGaö
) {

203 
maxGaö
 = 
gaö
;

204 
xBe°
 = 
xLo
;

205 
kBe°
 = 
idim
;

210 i‡(
kBe°
 >
fDim
 || kBest < 0) {

215 
maxGaö
 = -1.0;

219 
˚Œ
->
	`SëBe°
(
kBe°
);

220 
˚Œ
->
	`SëXdiv
(
xBe°
);

221 i‡(
nTŸB
 + 
nTŸS
 > 0)

222 
˚Œ
->
	`SëI¡g
(
nTŸS
 / (
nTŸB
 +ÇTotS));

224 
˚Œ
->
	`SëI¡g
(0.0);

225 
˚Œ
->
	`SëDriv
(
maxGaö
);

226 
˚Œ
->
	`CÆcVﬁume
();

230 i‡(
	`GëNmö
() > 0)

231 
	`SëCñlEÀmít
(
˚Œ
, 0, 
nTŸS
 + 
nTŸB
);

234 
UI¡_t
 
ih
 = 0; ih < 
hsig
.
	`size
(); ih++Ë
dñëe
 hsig.
	`©
(ih);

235 
UI¡_t
 
ih
 = 0; ih < 
hbkg
.
	`size
(); ih++Ë
dñëe
 hbkg.
	`©
(ih);

236 
UI¡_t
 
ih
 = 0; ih < 
hsig_unw
.
	`size
(); ih++Ë
dñëe
 hsig_unw.
	`©
(ih);

237 
UI¡_t
 
ih
 = 0; ih < 
hbkg_unw
.
	`size
(); ih++Ë
dñëe
 hbkg_unw.
	`©
(ih);

238 
	}
}

	@src/PDEFoamDecisionTreeDensity.cxx

42 
	~"TMVA/PDEFﬂmDecisi⁄TªeDísôy.h
"

44 
	~"TMVA/Bö¨ySórchTªe.h
"

45 
	~"TMVA/MëhodPDERS.h
"

46 
	~"TMVA/MsgLoggî.h
"

47 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

48 
	~"TMVA/Ty≥s.h
"

49 
	~"TMVA/Vﬁume.h
"

51 
	~"Rty≥sC‹e.h
"

52 
	~"TH1D.h
"

54 
	~<limôs
>

56 
CœssImp
(
TMVA
::
PDEFﬂmDecisi⁄TªeDísôy
);

60 
	gTMVA
::
PDEFﬂmDecisi⁄TªeDísôy
::
	$PDEFﬂmDecisi⁄TªeDísôy
()

61 : 
	`PDEFﬂmDísôyBa£
()

62 , 
	$fCœss
(0)

63 {
	}
}

75 
	gTMVA
::
PDEFﬂmDecisi⁄TªeDísôy
::PDEFﬂmDecisi⁄TªeDísôy(
°d
::
ve˘‹
<
DoubÀ_t
> 
box
, 
UI¡_t
 
˛s
)

76 : 
PDEFﬂmDísôyBa£
(
box
)

77 , 
	$fCœss
(
˛s
)

79 
	}
}

84 
	gTMVA
::
PDEFﬂmDecisi⁄TªeDísôy
::
	$PDEFﬂmDecisi⁄TªeDísôy
(c⁄° 
PDEFﬂmDecisi⁄TªeDísôy
 &
di°r
)

85 : 
	`PDEFﬂmDísôyBa£
(
di°r
)

86 , 
	$fCœss
(
di°r
.
fCœss
)

88 
	}
}

94 
DoubÀ_t
 
	gTMVA
::
PDEFﬂmDecisi⁄TªeDísôy
::
Dísôy
(
°d
::
ve˘‹
<Double_t>& ,

95 
DoubÀ_t
& )

111 
	gTMVA
::
PDEFﬂmDecisi⁄TªeDísôy
::
FûlHi°ogøms
(
TMVA
::
Vﬁume
 &
vﬁume
, 
°d
::
ve˘‹
<
TH1D
*> &
hsig
,

112 
°d
::
ve˘‹
<
TH1D
*> &
hbkg
, std::ve˘‹<TH1D*> &
hsig_unw
,

113 
°d
::
ve˘‹
<
TH1D
*> &
hbkg_unw
)

116 i‡(
hsig
.
size
(Ë!
vﬁume
.
fLowî
->size()

117 || 
hbkg
.
size
(Ë!
vﬁume
.
fLowî
->size()

118 || 
hsig_unw
.
size
(Ë!
vﬁume
.
fLowî
->size()

119 || 
hbkg_unw
.
size
(Ë!
vﬁume
.
fLowî
->size())

120 
Log
(Ë<< 
kFATAL
 << "<PDEFﬂmDi°r::FûlHi°ogøms> Edgêhi°ogøm†havêwr⁄g size!" << 
Endl
;

123 
UI¡_t
 
	gidim
 = 0; idim < 
	ghsig
.
size
(); ++idim) {

124 i‡(!
	ghsig
.
©
(
idim
Ë|| !
	ghbkg
.at(idim) ||

125 !
	ghsig_unw
.
©
(
idim
Ë|| !
	ghbkg_unw
.at(idim))

126 
Log
(Ë<< 
	gkFATAL
 << "<PDEFﬂmDi°r::FûlHi°> Hi°ogøm†nŸ inôülized!" << 
	gEndl
;

130 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*> 
nodes
;

133 
	gfB°
->
SórchVﬁume
(&
vﬁume
, &
nodes
);

136 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
xmö
(
vﬁume
.
fLowî
->
size
(), 
°d
::
numîic_limôs
<>::
max
());

137 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
xmax
(
vﬁume
.
fLowî
->
size
(), -
°d
::
numîic_limôs
<>::
max
());

138 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*>::
c⁄°_ôî©‹
 
ô
 = 
nodes
.
begö
();

139 
	gô
 !
nodes
.
íd
(); ++it) {

140 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
ev
 = (*
ô
)->
GëEvítV
();

141 
UI¡_t
 
	gidim
 = 0; idim < 
	gxmö
.
size
(); ++idim) {

142 i‡(
	gev
.
©
(
idim
Ë< 
	gxmö
.©(idim)Ëxmö.©(idimË
ev
.at(idim);

143 i‡(
	gev
.
©
(
idim
Ë> 
	gxmax
.©(idim)Ëxmax.©(idimË
ev
.at(idim);

148 
UI¡_t
 
	gidim
 = 0; idim < 
	ghsig
.
size
(); ++idim) {

149 
	ghsig
.
©
(
idim
)->
GëXaxis
()->
SëLimôs
(
xmö
.©(idim), 
xmax
.at(idim));

150 
	ghbkg
.
©
(
idim
)->
GëXaxis
()->
SëLimôs
(
xmö
.©(idim), 
xmax
.at(idim));

151 
	ghsig_unw
.
©
(
idim
)->
GëXaxis
()->
SëLimôs
(
xmö
.©(idim), 
xmax
.at(idim));

152 
	ghbkg_unw
.
©
(
idim
)->
GëXaxis
()->
SëLimôs
(
xmö
.©(idim), 
xmax
.at(idim));

153 
	ghsig
.
©
(
idim
)->
Re£t
();

154 
	ghbkg
.
©
(
idim
)->
Re£t
();

155 
	ghsig_unw
.
©
(
idim
)->
Re£t
();

156 
	ghbkg_unw
.
©
(
idim
)->
Re£t
();

160 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*>::
c⁄°_ôî©‹
 
ô
 = 
nodes
.
begö
();

161 
	gô
 !
nodes
.
íd
(); ++it) {

162 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
ev
 = (*
ô
)->
GëEvítV
();

163 
Flﬂt_t
 
	gwt
 = (*
ô
)->
GëWeight
();

164 
UI¡_t
 
	gidim
 = 0; idim < 
	gev
.
size
(); ++idim) {

165 i‡((*
	gô
)->
GëCœss
(Ë=
fCœss
) {

166 
hsig
.
©
(
idim
)->
Fûl
(
ev
.©(idim), 
wt
);

167 
	ghsig_unw
.
©
(
idim
)->
Fûl
(
ev
.at(idim), 1);

169 
	ghbkg
.
©
(
idim
)->
Fûl
(
ev
.©(idim), 
wt
);

170 
	ghbkg_unw
.
©
(
idim
)->
Fûl
(
ev
.at(idim), 1);

	@src/PDEFoamDensityBase.cxx

67 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

69 
	~"TMVA/Bö¨ySórchTªe.h
"

70 
	~"TMVA/MsgLoggî.h
"

71 
	~"TMVA/Ty≥s.h
"

73 
	~"Rty≥sC‹e.h
"

74 
	~"Rty≥s.h
"

75 
	~"TObje˘.h
"

77 
	~<fun˘i⁄Æ
>

78 
	~<numîic
>

79 
	~<ve˘‹
>

81 
CœssImp
(
TMVA
::
PDEFﬂmDísôyBa£
);

85 
	gTMVA
::
PDEFﬂmDísôyBa£
::
	$PDEFﬂmDísôyBa£
()

86 : 
	`TObje˘
(),

87 
	`fBox
(),

88 
	`fBoxVﬁume
(1.0),

89 
	`fBoxHasCh™ged
(
kTRUE
),

90 
	`fB°
(
√w
 
TMVA
::
	`Bö¨ySórchTªe
()),

91 
	`fLoggî
(
√w
 
	`MsgLoggî
("PDEFoamDensityBase"))

92 {
	}
}

100 
	gTMVA
::
PDEFﬂmDísôyBa£
::PDEFﬂmDísôyBa£(
°d
::
ve˘‹
<
DoubÀ_t
> 
box
)

101 : 
TObje˘
(),

102 
fBox
(
box
),

103 
fBoxVﬁume
(1.0),

104 
fBoxHasCh™ged
(
kTRUE
),

105 
fB°
(
√w
 
TMVA
::
Bö¨ySórchTªe
()),

106 
fLoggî
(
√w
 
MsgLoggî
("PDEFoamDensityBase"))

108 i‡(
	gbox
.
em±y
())

109 
Log
(Ë<< 
	gkFATAL
 << "Dimísi⁄ o‡PDEFﬂmDísôyBa£ i†zîo" << 
	gEndl
;

112 
	gfB°
->
SëPîiode
(
box
.
size
());

118 
	gTMVA
::
PDEFﬂmDísôyBa£
::~
	$PDEFﬂmDísôyBa£
()

120 i‡(
fB°
Ë
dñëe
 fBst;

121 i‡(
fLoggî
Ë
dñëe
 fLogger;

122 
	}
}

130 
	gTMVA
::
PDEFﬂmDísôyBa£
::
	$PDEFﬂmDísôyBa£
(c⁄° 
PDEFﬂmDísôyBa£
 &
di°r
)

131 : 
	`TObje˘
(),

132 
	`fBox
(
di°r
.
fBox
),

133 
	`fBoxVﬁume
(
di°r
.
fBoxVﬁume
),

134 
	`fBoxHasCh™ged
(
di°r
.
fBoxHasCh™ged
),

135 
	`fB°
(
√w
 
	`Bö¨ySórchTªe
(*
di°r
.
fB°
)),

136 
	`fLoggî
(
√w
 
	$MsgLoggî
(*
di°r
.
fLoggî
))

138 
	}
}

144 
	gTMVA
::
PDEFﬂmDísôyBa£
::
	$FûlBö¨ySórchTªe
(c⁄° 
Evít
* 
ev
)

146 i‡(
fB°
 =
NULL
)

147 
	`Log
(Ë<< 
kFATAL
 << "<PDEFoamDensityBase::FillBinarySearchTree> "

148 << "Bö¨yÅªêi†nŸ së!" << 
Endl
;

151 
fB°
->
	`In£π
(
ev
);

152 
	}
}

161 
DoubÀ_t
 
	gTMVA
::
PDEFﬂmDísôyBa£
::
	$GëBoxVﬁume
()

163 i‡(
fBoxHasCh™ged
) {

164 
fBoxHasCh™ged
 = 
kFALSE
;

165 
fBoxVﬁume
 = 
°d
::
	`accumuœã
(
fBox
.
	`begö
(), fBox.
	`íd
(), 1.0,

166 
°d
::
mu…ùlõs
<
DoubÀ_t
>());

168  
fBoxVﬁume
;

169 
	}
}

	@src/PDEFoamDiscriminant.cxx

43 
	~"TMVA/PDEFﬂmDis¸imö™t.h
"

46 
	~"TMVA/Evít.h
"

47 
	~"TMVA/MsgLoggî.h
"

48 
	~"TMVA/PDEFﬂm.h
"

49 
	~"TMVA/PDEFﬂmCñl.h
"

50 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

51 
	~"TMVA/Ty≥s.h
"

53 
	~"TDúe˘‹y.h
"

54 
	~"TM©h.h
"

55 
	~"TH2D.h
"

57 
	~<˛imôs
>

59 
CœssImp
(
TMVA
::
PDEFﬂmDis¸imö™t
);

64 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$PDEFﬂmDis¸imö™t
()

65 : 
	`PDEFﬂm
()

66 , 
	$fCœss
(0)

68 
	}
}

72 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$PDEFﬂmDis¸imö™t
(c⁄° 
TSåög
& 
«me
, 
UI¡_t
 
˛s
)

73 : 
	`PDEFﬂm
(
«me
)

74 , 
	$fCœss
(
˛s
)

75 {
	}
}

80 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$PDEFﬂmDis¸imö™t
(c⁄° 
PDEFﬂmDis¸imö™t
 &
‰om
)

81 : 
	`PDEFﬂm
(
‰om
)

82 , 
	$fCœss
(
‰om
.
fCœss
)

84 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

85 
	}
}

92 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$FûlFﬂmCñls
(c⁄° 
Evít
* 
ev
, 
Flﬂt_t
 
wt
)

95 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆues
 = 
ev
->
	`GëVÆues
();

96 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvÆues
 = 
	`V¨Tønsf‹m
(
vÆues
);

97 
PDEFﬂmCñl
 *
˚Œ
 = 
	`FödCñl
(
tvÆues
);

101 i‡(
ev
->
	`GëCœss
(Ë=
fCœss
)

102 
	`SëCñlEÀmít
(
˚Œ
, 0, 
	`GëCñlEÀmít
(˚Œ, 0Ë+ 
wt
);

104 
	`SëCñlEÀmít
(
˚Œ
, 1, 
	`GëCñlEÀmít
(˚Œ, 1Ë+ 
wt
);

105 
	}
}

111 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$FöÆize
()

114 
L⁄g_t
 
iCñl
 = 0; iCñ»<
fLa°Ce
; iCell++) {

115 i‡(!(
fCñls
[
iCñl
]->
	`GëSèt
()))

118 
DoubÀ_t
 
n_sig
 = 
	`GëCñlEÀmít
(
fCñls
[
iCñl
], 0);

119 
DoubÀ_t
 
n_bg
 = 
	`GëCñlEÀmít
(
fCñls
[
iCñl
], 1);

121 i‡(
n_sig
 < 0.) {

122 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivênumbî o‡sig«»evít†ö cñ»" << 
iCñl


123 << ": " << 
n_sig
 << ". SëÅÿ0." << 
Endl
;

124 
n_sig
 = 0.;

126 i‡(
n_bg
 < 0.) {

127 
	`Log
(Ë<< 
kWARNING
 << "Neg©ivênumbî o‡backgroundÉvít†ö cñ»" << 
iCñl


128 << ": " << 
n_bg
 << ". SëÅÿ0." << 
Endl
;

129 
n_bg
 = 0.;

133 i‡(
n_sig
 + 
n_bg
 > 0) {

135 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 0, 
n_sig
 / (n_sig + 
n_bg
));

137 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 1, 
TM©h
::
	`Sqπ
(
	`Sqr
(
n_sig
 / Sqr“_sig + 
n_bg
))*n_sig +

138 
	`Sqr
(
n_bg
 / Sqr(
n_sig
 +Ç_bg))*n_bg));

141 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 0, 0.5);

142 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 1, 1.);

145 
	}
}

171 
TH2D
* 
	gTMVA
::
PDEFﬂmDis¸imö™t
::
	$Proje˘2
(
I¡_t
 
idim1
, I¡_à
idim2
, 
ECñlVÆue
 
˚Œ_vÆue
, 
PDEFﬂmKî√lBa£
 *
kî√l
, 
UI¡_t
 
nbö
)

174 i‡((
idim1
 >
	`GëTŸDim
()) || (idim1 < 0) ||

175 (
idim2
 >
	`GëTŸDim
()) || (idim2 < 0) ||

176 (
idim1
 =
idim2
))

177 
	`Log
(Ë<< 
kFATAL
 << "<Project2>: wrong dimensions given: "

178 << 
idim1
 << ", " << 
idim2
 << 
Endl
;

183 i‡(
nbö
 > 1000) {

184 
	`Log
(Ë<< 
kWARNING
 << "W¨nög:Çumbî o‡bö†toÿbig: " << 
nbö


185 << " Usög 1000 bö†f‹Éach dimísi⁄ in°ód." << 
Endl
;

186 
nbö
 = 1000;

187 } i‡(
nbö
 < 1) {

188 
	`Log
(Ë<< 
kWARNING
 << "Wr⁄g böÇumbî: " << 
nbö


189 << "; sëÇbö=50" << 
Endl
;

190 
nbö
 = 50;

194 
TSåög
 
	`h«me
(
	`F‹m
("h_%d_vs_%d", 
idim1
, 
idim2
));

197 
TH2D
* 
h1
 = (TH2D*)
gDúe˘‹y
->
	`Gë
(
h«me
.
	`D©a
());

198 i‡(
h1
Ë
dñëe
 h1;

199 
h1
 = 
√w
 
	`TH2D
(
h«me
.
	`D©a
(), 
	`F‹m
("v¨%d v†v¨%d", 
idim1
, 
idim2
), 
nbö
, 
fXmö
[idim1], 
fXmax
[idim1],Çbin, fXmin[idim2], fXmax[idim2]);

201 i‡(!
h1
Ë
	`Log
(Ë<< 
kFATAL
 << "ERROR: C™ÇŸ cª©êhi°o" << 
h«me
 << 
Endl
;

202 i‡(
˚Œ_vÆue
 =
kVÆue
)

203 
h1
->
	`GëZaxis
()->
	`SëR™geU£r
(-
°d
::
numîic_limôs
<>::
	`ïsû⁄
(),

204 1. + 
°d
::
numîic_limôs
<>::
	`ïsû⁄
());

208 
I¡_t
 
xbö
 = 1; xbö <
h1
->
	`GëNbösX
(); ++xbin) {

209 
I¡_t
 
ybö
 = 1; ybö <
h1
->
	`GëNbösY
(); ++ybin) {

212 
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
> 
txvec
;

213 
txvec
[
idim1
] = 
	`V¨Tønsf‹m
(idim1, 
h1
->
	`GëXaxis
()->
	`GëBöCíãr
(
xbö
));

214 
txvec
[
idim2
] = 
	`V¨Tønsf‹m
(idim2, 
h1
->
	`GëYaxis
()->
	`GëBöCíãr
(
ybö
));

218 
°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*> 
˚Œs
 = 
	`FödCñls
(
txvec
);

222 
Flﬂt_t
 
sum_cv
 = 0;

223 
°d
::
ve˘‹
<
TMVA
::
PDEFﬂmCñl
*>::
c⁄°_ôî©‹
 
ô
 = 
˚Œs
.
	`begö
();

224 
ô
 !
˚Œs
.
	`íd
(); ++it) {

226 
PDEFﬂmVe˘
 
	`˚ŒPosi
(
	`GëTŸDim
()), 
	`˚ŒSize
(GetTotDim());

227 (*
ô
)->
	`GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

230 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvec
;

231 
I¡_t
 
i
 = 0; i < 
	`GëTŸDim
(); ++i) {

232 i‡(
i
 !
idim1
 && i !
idim2
)

233 
tvec
.
	`push_back
(
˚ŒPosi
[
i
] + 0.5 * 
˚ŒSize
[i]);

235 
tvec
.
	`push_back
(
txvec
[
i
]);

238 
Flﬂt_t
 
cv
 = 0;

239 i‡(
kî√l
 !
NULL
) {

240 
cv
 = 
kî√l
->
	`E°im©e
(
this
, 
tvec
, 
˚Œ_vÆue
);

242 
cv
 = 
	`GëCñlVÆue
(
	`FödCñl
(
tvec
), 
˚Œ_vÆue
);

244 i‡(
˚Œ_vÆue
 =
kVÆue
) {

247 
Flﬂt_t
 
¨ó_˚Œ
 = 1.;

248 
I¡_t
 
d1
 = 0; d1 < 
	`GëTŸDim
(); ++d1) {

249 i‡((
d1
 !
idim1
Ë&& (d1 !
idim2
))

250 
¨ó_˚Œ
 *
˚ŒSize
[
d1
];

254 
cv
 *
¨ó_˚Œ
;

256 
sum_cv
 +
cv
;

260 
h1
->
	`SëBöC⁄ã¡
(
xbö
, 
ybö
, 
sum_cv
 + h1->
	`GëBöC⁄ã¡
(xbin, ybin));

264  
h1
;

265 
	}
}

	@src/PDEFoamDiscriminantDensity.cxx

43 
	~"TMVA/PDEFﬂmDis¸imö™tDísôy.h
"

45 
	~"TMVA/Bö¨ySórchTªe.h
"

46 
	~"TMVA/Bö¨ySórchTªeNode.h
"

47 
	~"TMVA/MsgLoggî.h
"

48 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

49 
	~"TMVA/Ty≥s.h
"

50 
	~"TMVA/Vﬁume.h
"

52 
	~"Rty≥s.h
"

54 
	~<cm©h
>

55 
	~<ve˘‹
>

57 
CœssImp
(
TMVA
::
PDEFﬂmDis¸imö™tDísôy
);

61 
	gTMVA
::
PDEFﬂmDis¸imö™tDísôy
::
	$PDEFﬂmDis¸imö™tDísôy
()

62 : 
	`PDEFﬂmDísôyBa£
()

63 , 
	$fCœss
(0)

64 {
	}
}

76 
	gTMVA
::
PDEFﬂmDis¸imö™tDísôy
::PDEFﬂmDis¸imö™tDísôy(
°d
::
ve˘‹
<
DoubÀ_t
> 
box
, 
UI¡_t
 
˛s
)

77 : 
PDEFﬂmDísôyBa£
(
box
)

78 , 
	$fCœss
(
˛s
)

80 
	}
}

85 
	gTMVA
::
PDEFﬂmDis¸imö™tDísôy
::
	$PDEFﬂmDis¸imö™tDísôy
(c⁄° 
PDEFﬂmDis¸imö™tDísôy
 &
di°r
)

86 : 
	`PDEFﬂmDísôyBa£
(
di°r
)

87 , 
	$fCœss
(
di°r
.
fCœss
)

89 
	}
}

108 
DoubÀ_t
 
	gTMVA
::
PDEFﬂmDis¸imö™tDísôy
::
Dísôy
(
°d
::
ve˘‹
<DoubÀ_t> &
xev
, DoubÀ_à&
evít_dísôy
)

110 i‡(!
	gfB°
)

111 
Log
(Ë<< 
	gkFATAL
 << "<PDEFﬂmDis¸imö™tDísôy::Dísôy()> Bö¨yÅªênŸ së!" << 
	gEndl
;

114 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
lb
(
GëBox
().
size
());

115 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
ub
(
GëBox
().
size
());

118 c⁄° 
DoubÀ_t
 
	g¥obevﬁume_öv
 = 1.0 / 
GëBoxVﬁume
();

121 
UI¡_t
 
	gidim
 = 0; idim < 
GëBox
().
size
(); ++idim) {

122 
	glb
[
idim
] = 
xev
[idim] - 
GëBox
().
©
(idim) / 2.0;

123 
	gub
[
idim
] = 
xev
[idim] + 
GëBox
().
©
(idim) / 2.0;

126 
	gTMVA
::
Vﬁume
 
vﬁume
(&
lb
, &
ub
);

127 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*> 
nodes
;

130 c⁄° 
DoubÀ_t
 
	gsumOfWeights
 = 
fB°
->
SórchVﬁume
(&
vﬁume
, &
nodes
);

133 
	gevít_dísôy
 = 
nodes
.
size
(Ë* 
¥obevﬁume_öv
;

135 
DoubÀ_t
 
	gn_sig
 = 0;

137 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*>::
c⁄°_ôî©‹
 
ô
 = 
nodes
.
begö
();

138 
	gô
 !
nodes
.
íd
(); ++it) {

139 i‡((*
	gô
)->
GëCœss
(Ë=
fCœss
)

140 
n_sig
 +(*
ô
)->
GëWeight
();

144  (
	gn_sig
 / (
	gsumOfWeights
 + 0.1)Ë* 
	g¥obevﬁume_öv
;

	@src/PDEFoamEvent.cxx

39 
	~"TMVA/PDEFﬂmEvít.h
"

41 
	~"TMVA/Evít.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/PDEFﬂm.h
"

44 
	~"TMVA/Ty≥s.h
"

46 
	~"Rty≥s.h
"

48 
«me•a˚
 
	gTMVA
 {

49 
˛ass
 
	gPDEFﬂmCñl
;

51 
˛ass
 
	gTSåög
;

53 
CœssImp
(
TMVA
::
PDEFﬂmEvít
);

58 
	gTMVA
::
PDEFﬂmEvít
::
	$PDEFﬂmEvít
()

59 : 
	$PDEFﬂm
()

61 
	}
}

65 
TMVA
::
PDEFﬂmEvít
::
	$PDEFﬂmEvít
(c⁄° 
TSåög
& 
«me
)

66 : 
	$PDEFﬂm
(
«me
)

67 {
	}
}

72 
TMVA
::
PDEFﬂmEvít
::
	$PDEFﬂmEvít
(c⁄° 
PDEFﬂmEvít
 &
‰om
)

73 : 
	$PDEFﬂm
(
‰om
)

75 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

76 
	}
}

83 
	gTMVA
::
PDEFﬂmEvít
::
	$FûlFﬂmCñls
(c⁄° 
Evít
* 
ev
, 
Flﬂt_t
 
wt
)

86 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆues
 = 
ev
->
	`GëVÆues
();

87 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvÆues
 = 
	`V¨Tønsf‹m
(
vÆues
);

88 
PDEFﬂmCñl
 *
˚Œ
 = 
	`FödCñl
(
tvÆues
);

92 
	`SëCñlEÀmít
(
˚Œ
, 0, 
	`GëCñlEÀmít
(˚Œ, 0Ë+ 
wt
);

93 
	`SëCñlEÀmít
(
˚Œ
, 1, 
	`GëCñlEÀmít
(˚Œ, 1Ë+ 
wt
 * wt);

94 
	}
}

	@src/PDEFoamEventDensity.cxx

42 
	~"TMVA/PDEFﬂmEvítDísôy.h
"

44 
	~"TMVA/Bö¨ySórchTªe.h
"

45 
	~"TMVA/Bö¨ySórchTªeNode.h
"

46 
	~"TMVA/MsgLoggî.h
"

47 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

48 
	~"TMVA/Ty≥s.h
"

49 
	~"TMVA/Vﬁume.h
"

51 
	~"Rty≥s.h
"

53 
	~<cm©h
>

54 
	~<ve˘‹
>

56 
CœssImp
(
TMVA
::
PDEFﬂmEvítDísôy
);

60 
	gTMVA
::
PDEFﬂmEvítDísôy
::
	$PDEFﬂmEvítDísôy
()

61 : 
	$PDEFﬂmDísôyBa£
()

62 {
	}
}

71 
TMVA
::
PDEFﬂmEvítDísôy
::PDEFﬂmEvítDísôy(
°d
::
ve˘‹
<
DoubÀ_t
> 
box
)

72 : 
	$PDEFﬂmDísôyBa£
(
box
)

74 
	}
}

79 
TMVA
::
PDEFﬂmEvítDísôy
::
	$PDEFﬂmEvítDísôy
(c⁄° 
PDEFﬂmEvítDísôy
 &
di°r
)

80 : 
	$PDEFﬂmDísôyBa£
(
di°r
)

82 
	}
}

101 
DoubÀ_t
 
TMVA
::
PDEFﬂmEvítDísôy
::
Dísôy
(
°d
::
ve˘‹
<DoubÀ_t> &
xev
, DoubÀ_à&
evít_dísôy
)

103 i‡(!
	gfB°
)

104 
Log
(Ë<< 
	gkFATAL
 << "<PDEFﬂmEvítDísôy::Dísôy()> Bö¨yÅªênŸ found!" << 
	gEndl
;

107 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
lb
(
GëBox
().
size
());

108 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
ub
(
GëBox
().
size
());

111 c⁄° 
DoubÀ_t
 
	g¥obevﬁume_öv
 = 1.0 / 
GëBoxVﬁume
();

114 
UI¡_t
 
	gidim
 = 0; idim < 
GëBox
().
size
(); ++idim) {

115 
	glb
[
idim
] = 
xev
[idim] - 
GëBox
().
©
(idim) / 2.0;

116 
	gub
[
idim
] = 
xev
[idim] + 
GëBox
().
©
(idim) / 2.0;

119 
	gTMVA
::
Vﬁume
 
vﬁume
(&
lb
, &
ub
);

120 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*> 
nodes
;

123 c⁄° 
DoubÀ_t
 
	gsumOfWeights
 = 
fB°
->
SórchVﬁume
(&
vﬁume
, &
nodes
);

126 
	gevít_dísôy
 = 
nodes
.
size
(Ë* 
¥obevﬁume_öv
;

129  (
	gsumOfWeights
 + 0.1Ë* 
	g¥obevﬁume_öv
;

	@src/PDEFoamKernelBase.cxx

39 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

41 
	~"TMVA/MsgLoggî.h
"

43 
	~"Rty≥s.h
"

44 
	~"TObje˘.h
"

46 
CœssImp
(
TMVA
::
PDEFﬂmKî√lBa£
);

51 
	gTMVA
::
PDEFﬂmKî√lBa£
::
	$PDEFﬂmKî√lBa£
()

52 : 
	`TObje˘
()

53 , 
	`fLoggî
(
√w
 
	`MsgLoggî
("PDEFoamKernelBase"))

55 
	}
}

60 
	gTMVA
::
PDEFﬂmKî√lBa£
::
	$PDEFﬂmKî√lBa£
(c⁄° 
PDEFﬂmKî√lBa£
 &
Ÿhî
)

61 : 
	`TObje˘
()

62 , 
	`fLoggî
(
√w
 
	$MsgLoggî
(*
Ÿhî
.
fLoggî
))

64 
	}
}

69 
	gTMVA
::
PDEFﬂmKî√lBa£
::~
	$PDEFﬂmKî√lBa£
()

71 i‡(
fLoggî
 !
NULL
)

72 
dñëe
 
fLoggî
;

73 
	}
}

	@src/PDEFoamKernelGauss.cxx

34 
	~"TMVA/PDEFﬂmKî√lGauss.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/PDEFﬂm.h
"

38 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

39 
	~"TMVA/Ty≥s.h
"

41 
	~"TM©h.h
"

43 
	~"Rty≥s.h
"

45 
CœssImp
(
TMVA
::
PDEFﬂmKî√lGauss
);

50 
	gTMVA
::
PDEFﬂmKî√lGauss
::
	$PDEFﬂmKî√lGauss
(
Flﬂt_t
 
sigma
)

51 : 
	`PDEFﬂmKî√lBa£
()

52 , 
	$fSigma
(
sigma
)

54 
	}
}

59 
	gTMVA
::
PDEFﬂmKî√lGauss
::
	$PDEFﬂmKî√lGauss
(c⁄° 
PDEFﬂmKî√lGauss
 &
Ÿhî
)

60 : 
	`PDEFﬂmKî√lBa£
(
Ÿhî
)

61 , 
	$fSigma
(
Ÿhî
.
fSigma
)

63 
	}
}

79 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmKî√lGauss
::
E°im©e
(
PDEFﬂm
 *
fﬂm
, 
°d
::
ve˘‹
<Flﬂt_t> &
txvec
, 
ECñlVÆue
 
cv
)

81 i‡(
	gfﬂm
 =
NULL
)

82 
Log
(Ë<< 
kFATAL
 << "<PDEFﬂmKî√lGauss::E°im©e>: PDEFﬂmÇŸ së!" << 
Endl
;

84 
Flﬂt_t
 
	gªsu…
 = 0, 
	gn‹m
 = 0;

86 
L⁄g_t
 
	giCñl
 = 0; iCñ»<
fﬂm
->
fLa°Ce
; iCell++) {

87 i‡(!(
	gfﬂm
->
	gfCñls
[
iCñl
]->
GëSèt
())) ;

90 
Flﬂt_t
 
	g˚Œ_vÆ
 = 0;

91 i‡(!
	gfﬂm
->
CñlVÆueIsUndeföed
(
fﬂm
->
fCñls
[
iCñl
]))

93 
	g˚Œ_vÆ
 = 
fﬂm
->
GëCñlVÆue
(fﬂm->
fCñls
[
iCñl
], 
cv
);

96 
	g˚Œ_vÆ
 = 
GëAvîageNeighb‹sVÆue
(
fﬂm
, 
txvec
, 
cv
);

99 
Flﬂt_t
 
	ggau
 = 
WeightGaus
(
fﬂm
, fﬂm->
fCñls
[
iCñl
], 
txvec
);

101 
	gªsu…
 +
gau
 * 
˚Œ_vÆ
;

102 
	gn‹m
 +
gau
;

105  (
	gn‹m
 !0 ? 
ªsu…
 / 
n‹m
 : 0);

119 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmKî√lGauss
::
GëAvîageNeighb‹sVÆue
(
PDEFﬂm
 *
fﬂm
,

120 
°d
::
ve˘‹
<
Flﬂt_t
> &
txvec
,

121 
ECñlVÆue
 
cv
)

123 c⁄° 
Flﬂt_t
 
	gxoff£t
 = 1.e-6;

124 
Flﬂt_t
 
	gn‹m
 = 0;

125 
Flﬂt_t
 
	gªsu…
 = 0;

127 
PDEFﬂmCñl
 *
	g˚Œ
 = 
fﬂm
->
FödCñl
(
txvec
);

128 
PDEFﬂmVe˘
 
˚ŒSize
(
fﬂm
->
GëTŸDim
());

129 
PDEFﬂmVe˘
 
˚ŒPosi
(
fﬂm
->
GëTŸDim
());

130 
	g˚Œ
->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

133 
I¡_t
 
	gdim
 = 0; dim < 
	gfﬂm
->
GëTŸDim
(); dim++) {

134 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
¡xvec
(
txvec
);

135 
PDEFﬂmCñl
* 
	gÀ·_˚Œ
 = 0;

136 
PDEFﬂmCñl
* 
	gright_˚Œ
 = 0;

139 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] - 
xoff£t
;

140 
	gÀ·_˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

141 i‡(!
	gfﬂm
->
CñlVÆueIsUndeföed
(
À·_˚Œ
)) {

143 
	gªsu…
 +
fﬂm
->
GëCñlVÆue
(
À·_˚Œ
, 
cv
);

144 
	gn‹m
++;

147 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] + 
˚ŒSize
[dim] + 
xoff£t
;

148 
	gright_˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

149 i‡(!
	gfﬂm
->
CñlVÆueIsUndeföed
(
right_˚Œ
)) {

151 
	gªsu…
 +
fﬂm
->
GëCñlVÆue
(
right_˚Œ
, 
cv
);

152 
	gn‹m
++;

155 i‡(
	gn‹m
 > 0Ë
	gªsu…
 /
n‹m
;

156 
	gªsu…
 = 0;

158  
	gªsu…
;

182 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmKî√lGauss
::
WeightGaus
(
PDEFﬂm
 *
fﬂm
, 
PDEFﬂmCñl
* 
˚Œ
,

183 
°d
::
ve˘‹
<
Flﬂt_t
> &
txvec
)

186 
PDEFﬂmVe˘
 
˚ŒSize
(
fﬂm
->
GëTŸDim
());

187 
PDEFﬂmVe˘
 
˚ŒPosi
(
fﬂm
->
GëTŸDim
());

188 
	g˚Œ
->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

191 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
˚Œ_˚¡î
;

192 
	g˚Œ_˚¡î
.
ª£rve
(
fﬂm
->
GëTŸDim
());

193 
I¡_t
 
	gi
 = 0; i < 
	gfﬂm
->
GëTŸDim
(); ++i) {

194 i‡(
	gtxvec
[
i
] < 0.)Åxvec[i] = 0.;

195 i‡(
	gtxvec
[
i
] > 1.)Åxvec[i] = 1.;

197 i‡(
	g˚ŒPosi
[
i
] > 
	gtxvec
.
©
(i))

198 
	g˚Œ_˚¡î
.
push_back
(
˚ŒPosi
[
i
]);

199 i‡(
	g˚ŒPosi
[
i
] + 
	g˚ŒSize
[i] < 
	gtxvec
.
©
(i))

200 
	g˚Œ_˚¡î
.
push_back
(
˚ŒPosi
[
i
] + 
˚ŒSize
[i]);

202 
	g˚Œ_˚¡î
.
push_back
(
txvec
.
©
(
i
));

205 
Flﬂt_t
 
	gdi°™˚
 = 0;

206 
I¡_t
 
	gi
 = 0; i < 
	gfﬂm
->
GëTŸDim
(); ++i)

207 
	gdi°™˚
 +
Sqr
(
txvec
.
©
(
i
Ë- 
˚Œ_˚¡î
.at(i));

208 
	gdi°™˚
 = 
TM©h
::
Sqπ
(
di°™˚
);

211  
	gTM©h
::
Gaus
(
di°™˚
, 0, 
fSigma
, 
kFALSE
);

	@src/PDEFoamKernelLinN.cxx

34 
	~"TMVA/PDEFﬂmKî√lLöN.h
"

36 
	~"TMVA/PDEFﬂm.h
"

37 
	~"TMVA/MsgLoggî.h
"

38 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

39 
	~"TMVA/Ty≥s.h
"

41 
	~"Rty≥s.h
"

43 
	~<ve˘‹
>

45 
CœssImp
(
TMVA
::
PDEFﬂmKî√lLöN
);

50 
	gTMVA
::
PDEFﬂmKî√lLöN
::
	$PDEFﬂmKî√lLöN
()

51 : 
	$PDEFﬂmKî√lBa£
()

53 
	}
}

58 
TMVA
::
PDEFﬂmKî√lLöN
::
	$PDEFﬂmKî√lLöN
(c⁄° 
PDEFﬂmKî√lLöN
 &
Ÿhî
)

59 : 
	$PDEFﬂmKî√lBa£
(
Ÿhî
)

61 
	}
}

77 
Flﬂt_t
 
TMVA
::
PDEFﬂmKî√lLöN
::
E°im©e
(
PDEFﬂm
 *
fﬂm
, 
°d
::
ve˘‹
<Flﬂt_t> &
txvec
, 
ECñlVÆue
 
cv
)

79 i‡(
	gfﬂm
 =
NULL
)

80 
Log
(Ë<< 
kFATAL
 << "<PDEFﬂmKî√lLöN::E°im©e>: PDEFﬂmÇŸ së!" << 
Endl
;

82  
WeightLöNeighb‹s
(
fﬂm
, 
txvec
, 
cv
, 
kTRUE
);

106 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmKî√lLöN
::
WeightLöNeighb‹s
(
PDEFﬂm
 *
fﬂm
, 
°d
::
ve˘‹
<Flﬂt_t> &
txvec
, 
ECñlVÆue
 
cv
, 
Boﬁ_t
 
åótEm±yCñls
)

108 
Flﬂt_t
 
	gªsu…
 = 0.;

109 
UI¡_t
 
	gn‹m
 = 0;

110 c⁄° 
Flﬂt_t
 
	gxoff£t
 = 1.e-6;

112 i‡(
	gtxvec
.
size
(Ë!
UI¡_t
(
fﬂm
->
GëTŸDim
()))

113 
Log
(Ë<< 
kFATAL
 << "Wr⁄g dimísi⁄ o‡evíàv¨übÀ!" << 
Endl
;

116 
PDEFﬂmCñl
 *
	g˚Œ
 = 
fﬂm
->
FödCñl
(
txvec
);

117 
PDEFﬂmVe˘
 
˚ŒSize
(
fﬂm
->
GëTŸDim
());

118 
PDEFﬂmVe˘
 
˚ŒPosi
(
fﬂm
->
GëTŸDim
());

119 
	g˚Œ
->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

121 
Flﬂt_t
 
	g˚ŒvÆ
 = 0;

122 i‡(!(
	gåótEm±yCñls
 && 
	gfﬂm
->
CñlVÆueIsUndeföed
(
˚Œ
)))

124 
	g˚ŒvÆ
 = 
fﬂm
->
GëCñlVÆue
(
˚Œ
, 
cv
);

128 
	g˚ŒvÆ
 = 
GëAvîageNeighb‹sVÆue
(
fﬂm
, 
txvec
, 
cv
);

131 
I¡_t
 
	gdim
 = 0; dim < 
	gfﬂm
->
GëTŸDim
(); dim++) {

132 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
¡xvec
(
txvec
);

133 
Flﬂt_t
 
	gmödi°
;

134 
PDEFﬂmCñl
 *
	gmödi°˚Œ
 = 0;

136 
	gmödi°
 = (
txvec
[
dim
] - 
˚ŒPosi
[dim]Ë/ 
˚ŒSize
[dim];

137 i‡(
	gmödi°
 < 0.5) {

138 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] - 
xoff£t
;

139 
	gmödi°˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

141 
	gmödi°
 = 1 - 
mödi°
;

142 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] + 
˚ŒSize
[dim] + 
xoff£t
;

143 
	gmödi°˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

146 
Flﬂt_t
 
	gmödi°˚ŒvÆ
 = 
fﬂm
->
GëCñlVÆue
(
mödi°˚Œ
, 
cv
);

149 i‡(!(
	gåótEm±yCñls
 && 
	gfﬂm
->
CñlVÆueIsUndeföed
(
mödi°˚Œ
))) {

150 
	gªsu…
 +
˚ŒvÆ
 * (0.5 + 
mödi°
);

151 
	gªsu…
 +
mödi°˚ŒvÆ
 * (0.5 - 
mödi°
);

152 
	gn‹m
++;

155 i‡(
	gn‹m
 =0Ë 
˚ŒvÆ
;

156  
	gªsu…
 / 
	gn‹m
;

170 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmKî√lLöN
::
GëAvîageNeighb‹sVÆue
(
PDEFﬂm
 *
fﬂm
,

171 
°d
::
ve˘‹
<
Flﬂt_t
> &
txvec
,

172 
ECñlVÆue
 
cv
)

174 c⁄° 
Flﬂt_t
 
	gxoff£t
 = 1.e-6;

175 
Flﬂt_t
 
	gn‹m
 = 0;

176 
Flﬂt_t
 
	gªsu…
 = 0;

178 
PDEFﬂmCñl
 *
	g˚Œ
 = 
fﬂm
->
FödCñl
(
txvec
);

179 
PDEFﬂmVe˘
 
˚ŒSize
(
fﬂm
->
GëTŸDim
());

180 
PDEFﬂmVe˘
 
˚ŒPosi
(
fﬂm
->
GëTŸDim
());

181 
	g˚Œ
->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

184 
I¡_t
 
	gdim
 = 0; dim < 
	gfﬂm
->
GëTŸDim
(); dim++) {

185 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
¡xvec
(
txvec
);

186 
PDEFﬂmCñl
* 
	gÀ·_˚Œ
 = 0;

187 
PDEFﬂmCñl
* 
	gright_˚Œ
 = 0;

190 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] - 
xoff£t
;

191 
	gÀ·_˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

192 i‡(!
	gfﬂm
->
CñlVÆueIsUndeföed
(
À·_˚Œ
)) {

194 
	gªsu…
 +
fﬂm
->
GëCñlVÆue
(
À·_˚Œ
, 
cv
);

195 
	gn‹m
++;

198 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] + 
˚ŒSize
[dim] + 
xoff£t
;

199 
	gright_˚Œ
 = 
fﬂm
->
FödCñl
(
¡xvec
);

200 i‡(!
	gfﬂm
->
CñlVÆueIsUndeföed
(
right_˚Œ
)) {

202 
	gªsu…
 +
fﬂm
->
GëCñlVÆue
(
right_˚Œ
, 
cv
);

203 
	gn‹m
++;

206 i‡(
	gn‹m
 > 0Ë
	gªsu…
 /
n‹m
;

207 
	gªsu…
 = 0;

209  
	gªsu…
;

	@src/PDEFoamKernelTrivial.cxx

34 
	~"TMVA/PDEFﬂmKî√lTrivül.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/PDEFﬂm.h
"

38 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

39 
	~"TMVA/Ty≥s.h
"

41 
	~"Rty≥s.h
"

43 
	~<ve˘‹
>

45 
CœssImp
(
TMVA
::
PDEFﬂmKî√lTrivül
);

50 
	gTMVA
::
PDEFﬂmKî√lTrivül
::
	$PDEFﬂmKî√lTrivül
()

51 : 
	$PDEFﬂmKî√lBa£
()

53 
	}
}

58 
TMVA
::
PDEFﬂmKî√lTrivül
::
	$PDEFﬂmKî√lTrivül
(c⁄° 
PDEFﬂmKî√lTrivül
 &
Ÿhî
)

59 : 
	$PDEFﬂmKî√lBa£
(
Ÿhî
)

61 
	}
}

75 
Flﬂt_t
 
TMVA
::
PDEFﬂmKî√lTrivül
::
E°im©e
(
PDEFﬂm
 *
fﬂm
, 
°d
::
ve˘‹
<Flﬂt_t> &
txvec
, 
ECñlVÆue
 
cv
)

77 i‡(
	gfﬂm
 =
NULL
)

78 
Log
(Ë<< 
kFATAL
 << "<PDEFﬂmKî√lTrivül::E°im©e>: PDEFﬂmÇŸ së!" << 
Endl
;

80  
	gfﬂm
->
GëCñlVÆue
(
fﬂm
->
FödCñl
(
txvec
), 
cv
);

	@src/PDEFoamMultiTarget.cxx

50 
	~"TMVA/PDEFﬂmMu…iT¨gë.h
"

52 
	~"TMVA/MsgLoggî.h
"

53 
	~"TMVA/PDEFﬂm.h
"

54 
	~"TMVA/PDEFﬂmEvít.h
"

55 
	~"TMVA/Ty≥s.h
"

57 
	~"Rty≥s.h
"

59 
	~<m≠
>

61 
˛ass
 
	gTSåög
;

63 
CœssImp
(
TMVA
::
PDEFﬂmMu…iT¨gë
);

68 
	gTMVA
::
PDEFﬂmMu…iT¨gë
::
	$PDEFﬂmMu…iT¨gë
()

69 : 
	`PDEFﬂmEvít
()

70 , 
	$fT¨gëSñe˘i⁄
(
kMón
)

72 
	}
}

95 
	gTMVA
::
PDEFﬂmMu…iT¨gë
::
	$PDEFﬂmMu…iT¨gë
(c⁄° 
TSåög
& 
«me
, 
ET¨gëSñe˘i⁄
 
ts
)

96 : 
	`PDEFﬂmEvít
(
«me
)

97 , 
	$fT¨gëSñe˘i⁄
(
ts
)

99 
	}
}

104 
	gTMVA
::
PDEFﬂmMu…iT¨gë
::
	$PDEFﬂmMu…iT¨gë
(c⁄° 
PDEFﬂmMu…iT¨gë
 &
‰om
)

105 : 
	`PDEFﬂmEvít
(
‰om
)

106 , 
	$fT¨gëSñe˘i⁄
(
‰om
.
fT¨gëSñe˘i⁄
)

108 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

109 
	}
}

128 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
TMVA
::
PDEFﬂmMu…iT¨gë
::
GëCñlVÆue
(c⁄° 
°d
::
m≠
<
I¡_t
, Flﬂt_t>& 
xvec
, 
ECñlVÆue
 )

131 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
> 
	gtxvec
;

132 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
xvec
.
begö
();

133 
	gô
 !
xvec
.
íd
(); ++it) {

134 
Flﬂt_t
 
	gco‹dö©e
 = 
ô
->
£c⁄d
;

135 
I¡_t
 
	gdim
 = 
ô
->
fú°
;

138 i‡(
	gco‹dö©e
 <
fXmö
[
dim
])

139 
co‹dö©e
 = 
fXmö
[
dim
] + 
°d
::
numîic_limôs
<>::
ïsû⁄
();

140 i‡(
	gco‹dö©e
 >
fXmax
[
dim
])

141 
co‹dö©e
 = 
fXmax
[
dim
] - 
°d
::
numîic_limôs
<>::
ïsû⁄
();

143 
	gtxvec
.
ö£π
(
°d
::
∑ú
<
I¡_t
, 
Flﬂt_t
>(
dim
, 
V¨Tønsf‹m
(dim, 
co‹dö©e
)));

147 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
> 
	gèrgë
;

150 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*> 
˚Œs
 = 
FödCñls
(
txvec
);

151 i‡(
	g˚Œs
.
em±y
()) {

154  
	g°d
::
ve˘‹
<
Flﬂt_t
>(
GëTŸDim
(Ë- 
xvec
.
size
(), 0);

158 
I¡_t
 
	gidim
 = 0; idim < 
GëTŸDim
(); ++idim) {

160 i‡(
	gtxvec
.
föd
(
idim
Ë=
txvec
.
íd
())

161 
èrgë
.
ö£π
(
°d
::
∑ú
<
I¡_t
, 
Flﬂt_t
>(
idim
, 0));

164 
	gfT¨gëSñe˘i⁄
) {

165 
	gkMón
:

166 
CÆcuœãMón
(
èrgë
, 
˚Œs
);

168 
	gkMpv
:

169 
CÆcuœãMpv
(
èrgë
, 
˚Œs
);

172 
Log
() << "<PDEFoamMultiTarget::GetCellValue>: "

173 << "unknow¿èrgë sñe˘i⁄Åy≥!" << 
Endl
;

178 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
ªsu…
;

179 
	gªsu…
.
ª£rve
(
èrgë
.
size
());

180 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
>::
c⁄°_ôî©‹
 
ô
 = 
èrgë
.
begö
();

181 
	gô
 !
èrgë
.
íd
(); ++it)

182 
	gªsu…
.
push_back
(
ô
->
£c⁄d
);

184  
	gªsu…
;

202 
	gTMVA
::
PDEFﬂmMu…iT¨gë
::
CÆcuœãMpv
(
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
>& 
èrgë
, c⁄° std::
ve˘‹
<
PDEFﬂmCñl
*>& 
˚Œs
)

204 
DoubÀ_t
 
max_dís
 = 0.0;

207 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*>::
c⁄°_ôî©‹
 
˚Œ_ô
 = 
˚Œs
.
begö
();

208 
	g˚Œ_ô
 !
˚Œs
.
íd
(); ++cell_it) {

211 c⁄° 
DoubÀ_t
 
	g˚Œ_dísôy
 = 
GëCñlVÆue
(*
˚Œ_ô
, 
kVÆueDísôy
);

214 i‡(
	g˚Œ_dísôy
 > 
	gmax_dís
) {

216 
PDEFﬂmVe˘
 
˚ŒPosi
(
GëTŸDim
()), 
˚ŒSize
(GetTotDim());

217 (*
	g˚Œ_ô
)->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

220 
	gmax_dís
 = 
˚Œ_dísôy
;

223 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
>::
ôî©‹
 
èrgë_ô
 = 
èrgë
.
begö
();

224 
	gèrgë_ô
 !
èrgë
.
íd
(); ++target_it) {

225 c⁄° 
I¡_t
 
	gdim
 = 
èrgë_ô
->
fú°
;

226 
	gèrgë_ô
->
	g£c⁄d
 =

227 
V¨Tønsf‹mInvîs
(
dim
, 
˚ŒPosi
[dim] + 0.5 * 
˚ŒSize
[dim]);

248 
	gTMVA
::
PDEFﬂmMu…iT¨gë
::
CÆcuœãMón
(
°d
::
m≠
<
I¡_t
, 
Flﬂt_t
>& 
èrgë
, c⁄° std::
ve˘‹
<
PDEFﬂmCñl
*>& 
˚Œs
)

251 
°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
> 
	gn‹m
;

254 
	g°d
::
ve˘‹
<
PDEFﬂmCñl
*>::
c⁄°_ôî©‹
 
˚Œ_ô
 = 
˚Œs
.
begö
();

255 
	g˚Œ_ô
 !
˚Œs
.
íd
(); ++cell_it) {

258 c⁄° 
DoubÀ_t
 
	g˚Œ_dísôy
 = 
GëCñlVÆue
(*
˚Œ_ô
, 
kVÆueDísôy
);

261 
PDEFﬂmVe˘
 
˚ŒPosi
(
GëTŸDim
()), 
˚ŒSize
(GetTotDim());

262 (*
	g˚Œ_ô
)->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

265 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
>::
ôî©‹
 
èrgë_ô
 = 
èrgë
.
begö
();

266 
	gèrgë_ô
 !
èrgë
.
íd
(); ++target_it) {

267 c⁄° 
I¡_t
 
	gdim
 = 
èrgë_ô
->
fú°
;

268 
	gèrgë_ô
->
	g£c⁄d
 +
˚Œ_dísôy
 *

269 
V¨Tønsf‹mInvîs
(
dim
, 
˚ŒPosi
[dim] + 0.5 * 
˚ŒSize
[dim]);

270 
	gn‹m
[
dim
] +
˚Œ_dísôy
;

275 
	g°d
::
m≠
<
I¡_t
, 
	gFlﬂt_t
>::
ôî©‹
 
èrgë_ô
 = 
èrgë
.
begö
();

276 
	gèrgë_ô
 !
èrgë
.
íd
(); ++target_it) {

279 c⁄° 
I¡_t
 
	gdim
 = 
èrgë_ô
->
fú°
;

282 i‡(
	gn‹m
[
dim
] > 
	g°d
::
numîic_limôs
<
Flﬂt_t
>::
ïsû⁄
()) {

283 
èrgë
[
dim
] /
n‹m
[dim];

287 
	gèrgë
[
dim
] = (
fXmax
[dim] - 
fXmö
[dim]) / 2.;

	@src/PDEFoamTarget.cxx

39 
	~"TMVA/PDEFﬂmT¨gë.h
"

41 
	~"TMVA/Evít.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/PDEFﬂm.h
"

44 
	~"TMVA/PDEFﬂmCñl.h
"

45 
	~"TMVA/PDEFﬂmKî√lBa£.h
"

46 
	~"TMVA/Ty≥s.h
"

48 
	~"TM©h.h
"

50 
	~"Rty≥s.h
"

52 
CœssImp
(
TMVA
::
PDEFﬂmT¨gë
);

57 
	gTMVA
::
PDEFﬂmT¨gë
::
	$PDEFﬂmT¨gë
()

58 : 
	`PDEFﬂm
()

59 , 
	$fT¨gë
(0)

61 
	}
}

72 
	gTMVA
::
PDEFﬂmT¨gë
::
	$PDEFﬂmT¨gë
(c⁄° 
TSåög
& 
«me
, 
UI¡_t
 
èrgë
)

73 : 
	`PDEFﬂm
(
«me
)

74 , 
	$fT¨gë
(
èrgë
)

76 
	}
}

81 
	gTMVA
::
PDEFﬂmT¨gë
::
	$PDEFﬂmT¨gë
(c⁄° 
PDEFﬂmT¨gë
 &
‰om
)

82 : 
	`PDEFﬂm
(
‰om
)

83 , 
	$fT¨gë
(
‰om
.
fT¨gë
)

85 
	`Log
(Ë<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

86 
	}
}

93 
	gTMVA
::
PDEFﬂmT¨gë
::
	$FûlFﬂmCñls
(c⁄° 
Evít
* 
ev
, 
Flﬂt_t
 
wt
)

96 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆues
 = 
ev
->
	`GëVÆues
();

97 
°d
::
ve˘‹
<
Flﬂt_t
> 
tvÆues
 = 
	`V¨Tønsf‹m
(
vÆues
);

98 
°d
::
ve˘‹
<
Flﬂt_t
> 
èrgës
 = 
ev
->
	`GëT¨gës
();

99 
PDEFﬂmCñl
 *
˚Œ
 = 
	`FödCñl
(
tvÆues
);

103 
	`SëCñlEÀmít
(
˚Œ
, 0, 
	`GëCñlEÀmít
(˚Œ, 0Ë+ 
wt
);

104 
	`SëCñlEÀmít
(
˚Œ
, 1, 
	`GëCñlEÀmít
(˚Œ, 1Ë+ 
wt
 * 
èrgës
.
	`©
(
fT¨gë
));

105 
	}
}

112 
	gTMVA
::
PDEFﬂmT¨gë
::
	$FöÆize
()

115 
L⁄g_t
 
iCñl
 = 0; iCñ»<
fLa°Ce
; iCell++) {

116 i‡(!(
fCñls
[
iCñl
]->
	`GëSèt
()))

119 
DoubÀ_t
 
n_ev
 = 
	`GëCñlEÀmít
(
fCñls
[
iCñl
], 0);

120 
DoubÀ_t
 
èr
 = 
	`GëCñlEÀmít
(
fCñls
[
iCñl
], 1);

122 i‡(
n_ev
 > 0) {

123 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 0, 
èr
 / 
n_ev
);

124 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 1, 
èr
 / 
TM©h
::
	`Sqπ
(
n_ev
));

126 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 0, 0.0);

127 
	`SëCñlEÀmít
(
fCñls
[
iCñl
], 1, -1);

130 
	}
}

136 
Boﬁ_t
 
	gTMVA
::
PDEFﬂmT¨gë
::
	$CñlVÆueIsUndeföed
(
PDEFﬂmCñl
* 
˚Œ
)

138  
	`GëCñlVÆue
(
˚Œ
, 
kVÆueEº‹
) == -1;

139 
	}
}

150 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmT¨gë
::
GëCñlVÆue
(c⁄° 
°d
::
ve˘‹
<Flﬂt_t> &
xvec
, 
ECñlVÆue
 
cv
, 
PDEFﬂmKî√lBa£
 *
kî√l
)

152 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
txvec
(
V¨Tønsf‹m
(
xvec
));

153 
PDEFﬂmCñl
 *
	g˚Œ
 = 
FödCñl
(
txvec
);

155 i‡(!
CñlVÆueIsUndeföed
(
˚Œ
)) {

157 i‡(
	gkî√l
 =
NULL
)

158  
GëCñlVÆue
(
˚Œ
, 
cv
);

160  
	gkî√l
->
E°im©e
(
this
, 
txvec
, 
cv
);

163  
GëAvîageNeighb‹sVÆue
(
txvec
, 
kVÆue
);

175 
Flﬂt_t
 
	gTMVA
::
PDEFﬂmT¨gë
::
GëAvîageNeighb‹sVÆue
(
°d
::
ve˘‹
<Flﬂt_t> &
txvec
,

176 
ECñlVÆue
 
cv
)

178 c⁄° 
Flﬂt_t
 
	gxoff£t
 = 1.e-6;

179 
Flﬂt_t
 
	gn‹m
 = 0;

180 
Flﬂt_t
 
	gªsu…
 = 0;

182 
PDEFﬂmCñl
 *
	g˚Œ
 = 
FödCñl
(
txvec
);

183 
PDEFﬂmVe˘
 
˚ŒSize
(
GëTŸDim
());

184 
PDEFﬂmVe˘
 
˚ŒPosi
(
GëTŸDim
());

185 
	g˚Œ
->
GëHcub
(
˚ŒPosi
, 
˚ŒSize
);

188 
I¡_t
 
	gdim
 = 0; dim < 
GëTŸDim
(); dim++) {

189 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
¡xvec
(
txvec
);

190 
PDEFﬂmCñl
* 
	gÀ·_˚Œ
 = 0;

191 
PDEFﬂmCñl
* 
	gright_˚Œ
 = 0;

194 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] - 
xoff£t
;

195 
	gÀ·_˚Œ
 = 
FödCñl
(
¡xvec
);

196 i‡(!
CñlVÆueIsUndeföed
(
À·_˚Œ
)) {

198 
	gªsu…
 +
GëCñlVÆue
(
À·_˚Œ
, 
cv
);

199 
	gn‹m
++;

202 
	g¡xvec
[
dim
] = 
˚ŒPosi
[dim] + 
˚ŒSize
[dim] + 
xoff£t
;

203 
	gright_˚Œ
 = 
FödCñl
(
¡xvec
);

204 i‡(!
CñlVÆueIsUndeföed
(
right_˚Œ
)) {

206 
	gªsu…
 +
GëCñlVÆue
(
right_˚Œ
, 
cv
);

207 
	gn‹m
++;

210 i‡(
	gn‹m
 > 0Ë
	gªsu…
 /
n‹m
;

211 
	gªsu…
 = 0;

213  
	gªsu…
;

	@src/PDEFoamTargetDensity.cxx

41 
	~"TMVA/PDEFﬂmT¨gëDísôy.h
"

43 
	~"TMVA/Bö¨ySórchTªe.h
"

44 
	~"TMVA/MsgLoggî.h
"

45 
	~"TMVA/PDEFﬂmDísôyBa£.h
"

46 
	~"TMVA/Ty≥s.h
"

47 
	~"TMVA/Vﬁume.h
"

49 
	~"Rty≥s.h
"

51 
	~<cm©h
>

52 
	~<ve˘‹
>

54 
CœssImp
(
TMVA
::
PDEFﬂmT¨gëDísôy
);

58 
	gTMVA
::
PDEFﬂmT¨gëDísôy
::
	$PDEFﬂmT¨gëDísôy
()

59 : 
	`PDEFﬂmDísôyBa£
()

60 , 
	$fT¨gë
(0)

61 {
	}
}

73 
	gTMVA
::
PDEFﬂmT¨gëDísôy
::PDEFﬂmT¨gëDísôy(
°d
::
ve˘‹
<
DoubÀ_t
> 
box
, 
UI¡_t
 
èrgë
)

74 : 
PDEFﬂmDísôyBa£
(
box
)

75 , 
	$fT¨gë
(
èrgë
)

77 
	}
}

82 
	gTMVA
::
PDEFﬂmT¨gëDísôy
::
	$PDEFﬂmT¨gëDísôy
(c⁄° 
PDEFﬂmT¨gëDísôy
 &
di°r
)

83 : 
	`PDEFﬂmDísôyBa£
(
di°r
)

84 , 
	$fT¨gë
(
di°r
.
fT¨gë
)

86 
	}
}

104 
DoubÀ_t
 
	gTMVA
::
PDEFﬂmT¨gëDísôy
::
Dísôy
(
°d
::
ve˘‹
<DoubÀ_t> &
xev
, DoubÀ_à&
evít_dísôy
)

106 i‡(!
	gfB°
)

107 
Log
(Ë<< 
	gkFATAL
 << "<PDEFﬂmT¨gëDísôy::Dísôy()> Bö¨yÅªênŸ found!" << 
	gEndl
;

110 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
lb
(
GëBox
().
size
());

111 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
ub
(
GëBox
().
size
());

114 c⁄° 
DoubÀ_t
 
	g¥obevﬁume_öv
 = 1.0 / 
GëBoxVﬁume
();

117 
UI¡_t
 
	gidim
 = 0; idim < 
GëBox
().
size
(); ++idim) {

118 
	glb
[
idim
] = 
xev
[idim] - 
GëBox
().
©
(idim) / 2.0;

119 
	gub
[
idim
] = 
xev
[idim] + 
GëBox
().
©
(idim) / 2.0;

122 
	gTMVA
::
Vﬁume
 
vﬁume
(&
lb
, &
ub
);

123 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*> 
nodes
;

126 c⁄° 
DoubÀ_t
 
	gsumOfWeights
 = 
fB°
->
SórchVﬁume
(&
vﬁume
, &
nodes
);

129 
	gevít_dísôy
 = 
nodes
.
size
(Ë* 
¥obevﬁume_öv
;

131 
DoubÀ_t
 
	gn_èr
 = 0;

133 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Bö¨ySórchTªeNode
*>::
c⁄°_ôî©‹
 
ô
 = 
nodes
.
begö
();

134 
	gô
 !
nodes
.
íd
(); ++it) {

135 
	gn_èr
 +((*
ô
)->
GëT¨gës
()).
©
(
fT¨gë
Ë* ((*ô)->
GëWeight
());

139  (
	gn_èr
 / (
	gsumOfWeights
 + 0.1)Ë* 
	g¥obevﬁume_öv
;

	@src/PDEFoamVect.cxx

33 
	~"TMVA/PDEFﬂmVe˘.h
"

35 
	~"Rty≥s.h
"

36 
	~"TObje˘.h
"

38 
	~<io°ªam
>

39 
	~<iom™ù
>

41 
usög
 
«me•a˚
 
	g°d
;

45 
CœssImp
(
TMVA
::
PDEFﬂmVe˘
);

50 
	gTMVA
::
PDEFﬂmVe˘
::
	$PDEFﬂmVe˘
()

51 : 
	`TObje˘
(),

52 
	`fDim
(0),

53 
	$fCo‹ds
(0)

55 
	}
}

61 
	gTMVA
::
PDEFﬂmVe˘
::
	$PDEFﬂmVe˘
(
I¡_t
 
n
)

62 : 
	`TObje˘
(),

63 
	`fDim
(
n
),

64 
	$fCo‹ds
(0)

66 i‡(
n
>0) {

67 
fCo‹ds
 = 
√w
 
DoubÀ_t
[
fDim
];

68 
I¡_t
 
i
=0; i<
n
; i++Ë*(
fCo‹ds
+i)=0.0;

70 
	}
}

75 
	gTMVA
::
PDEFﬂmVe˘
::
	$PDEFﬂmVe˘
(c⁄° 
PDEFﬂmVe˘
 &
ve˘
)

76 : 
	`TObje˘
(),

77 
	`fDim
(
ve˘
.
fDim
),

78 
	$fCo‹ds
(
ve˘
.
fCo‹ds
)

80 
	`Eº‹
( "PDEFoamVect", "COPY CONSTRUCTOR NOT IMPLEMENTED" );

81 
	}
}

86 
	gTMVA
::
PDEFﬂmVe˘
::~
	$PDEFﬂmVe˘
()

88 
dñëe
 [] 
fCo‹ds
;

89 
fCo‹ds
=0;

90 
	}
}

99 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
 =(c⁄° PDEFﬂmVe˘& 
ve˘
)

101 i‡(&
ve˘
 =
this
)  *this;

102 i‡(
	gfDim
 !
ve˘
.
fDim
)

103 
Eº‹
("PDEFﬂmVe˘", "›î©‹=Dims.áª dif„ª¡: %dánd %d \¿", 
fDim
, 
ve˘
.fDim);

104 i‡(
	gfDim
 !
ve˘
.
fDim
) {

105 
dñëe
 [] 
fCo‹ds
;

106 
	gfCo‹ds
 = 
√w
 
DoubÀ_t
[
fDim
];

108 
	gfDim
 = 
ve˘
.
fDim
;

109 
I¡_t
 
	gi
=0; i<
	gfDim
; i++)

110 
	gfCo‹ds
[
i
] = 
ve˘
.
fCo‹ds
[i];

111  *
	gthis
;

120 
	gDoubÀ_t
 &
	gTMVA
::
PDEFﬂmVe˘
::
›î©‹
[](
I¡_t
 
n
)

122 i‡((
n
<0Ë|| (n>=
fDim
)) {

123 
Eº‹
( "PDEFoamVect","operator[], out ofÑange \n");

125  
	gfCo‹ds
[
n
];

131 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
*=(c⁄° 
DoubÀ_t
 &
x
)

133 
I¡_t
 
i
=0;
	gi
<
	gfDim
;i++)

134 
	gfCo‹ds
[
i
] = 
fCo‹ds
[i]*
x
;

135  *
	gthis
;

141 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
+=(c⁄° PDEFﬂmVe˘& 
shi·
)

143 if(
fDim
 !
shi·
.fDim){

144 
Eº‹
("PDEFﬂmVe˘", "›î©‹+, dif„ª¡ dimísi⁄s%d %d \n", 
fDim
, 
shi·
.fDim);

146 
I¡_t
 
	gi
=0;i<
	gfDim
;i++)

147 
	gfCo‹ds
[
i
] = 
fCo‹ds
[i] + 
shi·
.fCoords[i];

148  *
	gthis
;

154 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
-=(c⁄° PDEFﬂmVe˘& 
shi·
)

156 if(
fDim
 !
shi·
.fDim) {

157 
Eº‹
("PDEFﬂmVe˘", "›î©‹+, dif„ª¡ dimísi⁄s%d %d \n", 
fDim
, 
shi·
.fDim);

159 
I¡_t
 
	gi
=0;i<
	gfDim
;i++)

160 
	gfCo‹ds
[
i
] = 
fCo‹ds
[i] - 
shi·
.fCoords[i];

161  *
	gthis
;

168 
	gTMVA
::
PDEFﬂmVe˘
 
TMVA
::PDEFﬂmVe˘::
›î©‹
+(c⁄° PDEFﬂmVe˘ &
p2
)

170 
PDEFﬂmVe˘
 
ãmp
(
fDim
);

171 
	gãmp
 = (*
this
);

172 
	gãmp
 +
p2
;

173  
	gãmp
;

180 
	gTMVA
::
PDEFﬂmVe˘
 
TMVA
::PDEFﬂmVe˘::
›î©‹
-(c⁄° PDEFﬂmVe˘ &
p2
)

182 
PDEFﬂmVe˘
 
ãmp
(
fDim
);

183 
	gãmp
 = (*
this
);

184 
	gãmp
 -
p2
;

185  
	gãmp
;

191 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
 =(
DoubÀ_t
 
Ve˘
[])

193 
I¡_t
 
i
=0; 
	gi
<
	gfDim
; i++)

194 
	gfCo‹ds
[
i
] = 
Ve˘
[i];

195  *
	gthis
;

201 
	gTMVA
::
PDEFﬂmVe˘
& 
TMVA
::PDEFﬂmVe˘::
›î©‹
 =(
DoubÀ_t
 
x
)

203 if(
fCo‹ds
 != 0) {

204 
I¡_t
 
i
=0; 
	gi
<
	gfDim
; i++)

205 
	gfCo‹ds
[
i
] = 
x
;

207  *
	gthis
;

217 
	gTMVA
::
PDEFﬂmVe˘
::
	$Pröt
(
O±i⁄_t
 *
›ti⁄
) const

219 
°ªamsize
 
wid
 = 
°d
::
cout
.
	`width
();

220 if(!
›ti⁄
Ë
	`Eº‹
( "Print ", "No option set \n");

221 
°d
::
cout
 << "(";

222 
I¡_t
 
i
=0; i<
fDim
-1; i++)

223 
°d
::
cout
 << std::
	`£tw
(12Ë<< *(
fCo‹ds
+
i
) << ",";

224 
°d
::
cout
 << std::
	`£tw
(12Ë<< *(
fCo‹ds
+
fDim
-1);

225 
°d
::
cout
 << ")";

226 
°d
::
cout
.
	`width
(
wid
);

227 
	}
}

	@src/PDF.cxx

38 
	~"TMVA/PDF.h
"

40 
	~"TMVA/C⁄figuøbÀ.h
"

41 
	~"TMVA/KDEKî√l.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/Ty≥s.h
"

44 
	~"TMVA/Toﬁs.h
"

45 
	~"TMVA/TS∂öe1.h
"

46 
	~"TMVA/TS∂öe2.h
"

47 
	~"TMVA/Vîsi⁄.h
"

49 
	~"Rio°ªam.h
"

50 
	~"TF1.h
"

51 
	~"TH1F.h
"

52 
	~"TM©h.h
"

53 
	~"TVe˘‹D.h
"

55 
	~<c°dlib
>

56 
	~<iom™ù
>

59 c⁄° 
I¡_t
 
	gTMVA
::
PDF
::
fgNbö_PdfHi°
 = 10000;

60 c⁄° 
Boﬁ_t
 
	gTMVA
::
PDF
::
fgM™uÆI¡egøti⁄
 = 
kTRUE
;

61 c⁄° 
DoubÀ_t
 
	gTMVA
::
PDF
::
fgEpsû⁄
 = 1.0e-12;

63 
CœssImp
(
TMVA
::
PDF
);

68 
	gTMVA
::
PDF
::
	$PDF
–c⁄° 
TSåög
& 
«me
, 
Boﬁ_t
 
n‹m
 )

69 : 
	`C⁄figuøbÀ
 (""),

70 
	`fU£Hi°ogøm
 ( 
kFALSE
 ),

71 
	`fPDFName
 ( 
«me
 ),

72 
	`fNsmoŸh
 ( 0 ),

73 
	`fMöNsmoŸh
 (-1 ),

74 
	`fMaxNsmoŸh
 (-1 ),

75 
	`fNSmoŸhHi°
 ( 0 ),

76 
	`fI¡îpﬁMëhod
–
PDF
::
kS∂öe2
 ),

77 
	`fS∂öe
 ( 0 ),

78 
	`fPDFHi°
 ( 0 ),

79 
	`fHi°
 ( 0 ),

80 
	`fHi°OrigöÆ
 ( 0 ),

81 
	`fGøph
 ( 0 ),

82 
	`fIGëVÆ
 ( 0 ),

83 
	`fHi°AvgEvtPîBö
 ( 0 ),

84 
	`fHi°DeföedNBös
 ( 0 ),

85 
	`fKDEty≥Såög
 ( 0 ),

86 
	`fKDEôîSåög
 ( 0 ),

87 
	`fB‹dîMëhodSåög
( 0 ),

88 
	`fI¡îpﬁ©eSåög
 ( 0 ),

89 
	`fKDEty≥
 ( 
KDEKî√l
::
kN⁄e
 ),

90 
	`fKDEôî
 ( 
KDEKî√l
::
kN⁄ad≠tiveKDE
 ),

91 
	`fKDEb‹dî
 ( 
KDEKî√l
::
kNoTª©mít
 ),

92 
	`fFöeFa˘‹
 ( 0. ),

93 
	`fRódögVîsi⁄
( 0 ),

94 
	`fCheckHi°
 ( 
kFALSE
 ),

95 
	`fN‹mÆize
 ( 
n‹m
 ),

96 
	`fSuffix
 ( "" ),

97 
	$fLoggî
 ( 0 )

99 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

100 
	`GëThisPdfThªadLoˇl
(Ë
this
;

101 
	}
}

106 
	gTMVA
::
PDF
::
	$PDF
–c⁄° 
TSåög
& 
«me
,

107 c⁄° 
TH1
 *
hi°
,

108 
PDF
::
EI¡îpﬁ©eMëhod
 
mëhod
,

109 
I¡_t
 
mönsmoŸh
,

110 
I¡_t
 
maxnsmoŸh
,

111 
Boﬁ_t
 
checkHi°
,

112 
Boﬁ_t
 
n‹m
) :

113 
	`C⁄figuøbÀ
 (""),

114 
	`fU£Hi°ogøm
 ( 
kFALSE
 ),

115 
	`fPDFName
 ( 
«me
 ),

116 
	`fMöNsmoŸh
 ( 
mönsmoŸh
 ),

117 
	`fMaxNsmoŸh
 ( 
maxnsmoŸh
 ),

118 
	`fNSmoŸhHi°
 ( 0 ),

119 
	`fI¡îpﬁMëhod
–
mëhod
 ),

120 
	`fS∂öe
 ( 0 ),

121 
	`fPDFHi°
 ( 0 ),

122 
	`fHi°
 ( 0 ),

123 
	`fHi°OrigöÆ
 ( 0 ),

124 
	`fGøph
 ( 0 ),

125 
	`fIGëVÆ
 ( 0 ),

126 
	`fHi°AvgEvtPîBö
 ( 0 ),

127 
	`fHi°DeföedNBös
 ( 0 ),

128 
	`fKDEty≥Såög
 ( 0 ),

129 
	`fKDEôîSåög
 ( 0 ),

130 
	`fB‹dîMëhodSåög
( 0 ),

131 
	`fI¡îpﬁ©eSåög
 ( 0 ),

132 
	`fKDEty≥
 ( 
KDEKî√l
::
kN⁄e
 ),

133 
	`fKDEôî
 ( 
KDEKî√l
::
kN⁄ad≠tiveKDE
 ),

134 
	`fKDEb‹dî
 ( 
KDEKî√l
::
kNoTª©mít
 ),

135 
	`fFöeFa˘‹
 ( 0. ),

136 
	`fRódögVîsi⁄
( 0 ),

137 
	`fCheckHi°
 ( 
checkHi°
 ),

138 
	`fN‹mÆize
 ( 
n‹m
 ),

139 
	`fSuffix
 ( "" ),

140 
	$fLoggî
 ( 0 )

142 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

143 
	`BuûdPDF
–
hi°
 );

144 
	}
}

149 
	gTMVA
::
PDF
::
	$PDF
–c⁄° 
TSåög
& 
«me
,

150 c⁄° 
TH1
* 
hi°
,

151 
KDEKî√l
::
EKî√lTy≥
 
kty≥
,

152 
KDEKî√l
::
EKî√lIãr
 
kôî
,

153 
KDEKî√l
::
EKî√lB‹dî
 
kb‹dî
,

154 
Flﬂt_t
 
FöeFa˘‹
,

155 
Boﬁ_t
 
n‹m
) :

156 
	`C⁄figuøbÀ
 (""),

157 
	`fU£Hi°ogøm
 ( 
kFALSE
 ),

158 
	`fPDFName
 ( 
«me
 ),

159 
	`fNsmoŸh
 ( 0 ),

160 
	`fMöNsmoŸh
 (-1 ),

161 
	`fMaxNsmoŸh
 (-1 ),

162 
	`fNSmoŸhHi°
 ( 0 ),

163 
	`fI¡îpﬁMëhod
–
PDF
::
kKDE
 ),

164 
	`fS∂öe
 ( 0 ),

165 
	`fPDFHi°
 ( 0 ),

166 
	`fHi°
 ( 0 ),

167 
	`fHi°OrigöÆ
 ( 0 ),

168 
	`fGøph
 ( 0 ),

169 
	`fIGëVÆ
 ( 0 ),

170 
	`fHi°AvgEvtPîBö
 ( 0 ),

171 
	`fHi°DeföedNBös
 ( 0 ),

172 
	`fKDEty≥Såög
 ( 0 ),

173 
	`fKDEôîSåög
 ( 0 ),

174 
	`fB‹dîMëhodSåög
( 0 ),

175 
	`fI¡îpﬁ©eSåög
 ( 0 ),

176 
	`fKDEty≥
 ( 
kty≥
 ),

177 
	`fKDEôî
 ( 
kôî
 ),

178 
	`fKDEb‹dî
 ( 
kb‹dî
 ),

179 
	`fFöeFa˘‹
 ( 
FöeFa˘‹
),

180 
	`fRódögVîsi⁄
( 0 ),

181 
	`fCheckHi°
 ( 
kFALSE
 ),

182 
	`fN‹mÆize
 ( 
n‹m
 ),

183 
	`fSuffix
 ( "" ),

184 
	$fLoggî
 ( 0 )

186 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

187 
	`BuûdPDF
–
hi°
 );

188 
	}
}

192 
	gTMVA
::
PDF
::
	$PDF
–c⁄° 
TSåög
& 
«me
,

193 c⁄° 
TSåög
& 
›ti⁄s
,

194 c⁄° 
TSåög
& 
suffix
,

195 
PDF
* 
deÁu…PDF
,

196 
Boﬁ_t
 
n‹m
) :

197 
	`C⁄figuøbÀ
 (
›ti⁄s
),

198 
	`fU£Hi°ogøm
 ( 
kFALSE
 ),

199 
	`fPDFName
 ( 
«me
 ),

200 
	`fNsmoŸh
 ( 0 ),

201 
	`fMöNsmoŸh
 ( -1 ),

202 
	`fMaxNsmoŸh
 ( -1 ),

203 
	`fNSmoŸhHi°
 ( 0 ),

204 
	`fI¡îpﬁMëhod
–
PDF
::
kS∂öe0
 ),

205 
	`fS∂öe
 ( 0 ),

206 
	`fPDFHi°
 ( 0 ),

207 
	`fHi°
 ( 0 ),

208 
	`fHi°OrigöÆ
 ( 0 ),

209 
	`fGøph
 ( 0 ),

210 
	`fIGëVÆ
 ( 0 ),

211 
	`fHi°AvgEvtPîBö
 ( 50 ),

212 
	`fHi°DeföedNBös
 ( 0 ),

213 
	`fKDEty≥Såög
 ( "Gauss" ),

214 
	`fKDEôîSåög
 ( "Nonadaptive" ),

215 
	`fB‹dîMëhodSåög
( "None" ),

216 
	`fI¡îpﬁ©eSåög
 ( "Spline2" ),

217 
	`fKDEty≥
 ( 
KDEKî√l
::
kN⁄e
 ),

218 
	`fKDEôî
 ( 
KDEKî√l
::
kN⁄ad≠tiveKDE
 ),

219 
	`fKDEb‹dî
 ( 
KDEKî√l
::
kNoTª©mít
 ),

220 
	`fFöeFa˘‹
 ( 1. ),

221 
	`fRódögVîsi⁄
( 0 ),

222 
	`fCheckHi°
 ( 
kFALSE
 ),

223 
	`fN‹mÆize
 ( 
n‹m
 ),

224 
	`fSuffix
 ( 
suffix
 ),

225 
	$fLoggî
 ( 0 )

227 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

228 i‡(
deÁu…PDF
 != 0) {

229 
fNsmoŸh
 = 
deÁu…PDF
->fNsmooth;

230 
fMöNsmoŸh
 = 
deÁu…PDF
->fMinNsmooth;

231 
fMaxNsmoŸh
 = 
deÁu…PDF
->fMaxNsmooth;

232 
fHi°AvgEvtPîBö
 = 
deÁu…PDF
->fHistAvgEvtPerBin;

233 
fHi°AvgEvtPîBö
 = 
deÁu…PDF
->fHistAvgEvtPerBin;

234 
fI¡îpﬁ©eSåög
 = 
deÁu…PDF
->fInterpolateString;

235 
fKDEty≥Såög
 = 
deÁu…PDF
->fKDEtypeString;

236 
fKDEôîSåög
 = 
deÁu…PDF
->fKDEiterString;

237 
fFöeFa˘‹
 = 
deÁu…PDF
->fFineFactor;

238 
fB‹dîMëhodSåög
 = 
deÁu…PDF
->fBorderMethodString;

239 
fCheckHi°
 = 
deÁu…PDF
->fCheckHist;

240 
fHi°DeföedNBös
 = 
deÁu…PDF
->fHistDefinedNBins;

242 
	}
}

245 
	gTMVA
::
PDF
::~
	$PDF
()

248 i‡(
fS∂öe
 !
NULL
Ë
dñëe
 fSpline;

249 i‡(
fHi°
 !
NULL
Ë
dñëe
 fHist;

250 i‡(
fPDFHi°
 !
NULL
Ë
dñëe
 fPDFHist;

251 i‡(
fHi°OrigöÆ
 !
NULL
Ë
dñëe
 fHistOriginal;

252 i‡(
fIGëVÆ
 !
NULL
Ë
dñëe
 fIGetVal;

253 i‡(
fGøph
 !
NULL
Ë
dñëe
 fGraph;

254 
dñëe
 
fLoggî
;

255 
	}
}

259 
	gTMVA
::
PDF
::
	$BuûdPDF
–c⁄° 
TH1
* 
hi°
 )

261 
	`GëThisPdfThªadLoˇl
(Ë
this
;

263 i‡(
hi°
 =
NULL
Ë
	`Log
(Ë<< 
kFATAL
 << "CÆÀd wôhouàvÆid hi°ogømÖoöãr!" << 
Endl
;

266 i‡(
hi°
->
	`GëE¡rõs
() <= 0)

267 
	`Log
(Ë<< 
kFATAL
 << "Numbî o‡íåõ†<0 (" << 
hi°
->
	`GëE¡rõs
(Ë<< " i¿hi°ogøm: " << hi°->
	`GëTôÀ
(Ë<< 
Endl
;

269 i‡(
fI¡îpﬁMëhod
 =
PDF
::
kKDE
) {

270 
	`Log
()<< 
kDEBUG
 << "Create "

271 << ((
fKDEôî
 =
KDEKî√l
::
kN⁄ad≠tiveKDE
) ? "nonadaptive " :

272 (
fKDEôî
 =
KDEKî√l
::
kAd≠tiveKDE
) ? "adaptive " : "??? ")

273 << ((
fKDEty≥
 =
KDEKî√l
::
kGauss
) ? "Gauss " : "??? ")

274 << "ty≥ KDE kî√»f‹ hi°ogøm: \"" << 
hi°
->
	`GëName
() << "\""

275 << 
Endl
;

279 i‡(
fMöNsmoŸh
<0)

280 
	`Log
(Ë<< 
kFATAL
 << "PDF c⁄°ru˘i⁄ cÆÀd wôh mönsmoŸh<0" << 
Endl
;

281 i‡(
fMaxNsmoŸh
<=0)

282 
fMaxNsmoŸh
 = 
fMöNsmoŸh
;

283 i‡(
fMaxNsmoŸh
<
fMöNsmoŸh
)

284 
	`Log
(Ë<< 
kFATAL
 << "PDF c⁄°ru˘i⁄ cÆÀd wôh maxnsmoŸh<mönsmoŸh" << 
Endl
;

287 
fHi°OrigöÆ
 = (
TH1F
*)
hi°
->
	`Cl⁄e
–
	`TSåög
(hi°->
	`GëName
()) + "_original" );

288 
fHi°
 = (
TH1F
*)
hi°
->
	`Cl⁄e
–
	`TSåög
(hi°->
	`GëName
()) + "_smoothed" );

289 
fHi°OrigöÆ
->
	`SëTôÀ
–fHi°OrigöÆ->
	`GëName
() );

290 
fHi°
 ->
	`SëTôÀ
–fHi°->
	`GëName
() );

293 
fHi°OrigöÆ
->
	`SëDúe˘‹y
(0);

294 
fHi°
 ->
	`SëDúe˘‹y
(0);

295 
fU£Hi°ogøm
 = 
kFALSE
;

297 i‡(
fI¡îpﬁMëhod
 =
PDF
::
kKDE
Ë
	`BuûdKDEPDF
();

298 
	`BuûdS∂öePDF
();

299 
	}
}

303 
I¡_t
 
	gTMVA
::
PDF
::
	$GëHi°NBös
 ( 
I¡_t
 
evtNum
 )

305 
I¡_t
 
Resﬁuti⁄Fa˘‹
 = (
fI¡îpﬁMëhod
 =
PDF
::
kKDE
) ? 5 : 1;

306 i‡(
evtNum
 =0 && 
fHi°DeföedNBös
 == 0)

307 
	`Log
(Ë<< 
kFATAL
 << "Nÿnumbî o‡bö†£àf‹ PDF" << 
Endl
;

308 i‡(
fHi°DeföedNBös
 > 0)

309  
fHi°DeföedNBös
 * 
Resﬁuti⁄Fa˘‹
;

310 i‡–
evtNum
 > 0 && 
fHi°AvgEvtPîBö
 > 0 )

311  
evtNum
 / 
fHi°AvgEvtPîBö
 * 
Resﬁuti⁄Fa˘‹
;

313 
	`Log
(Ë<< 
kFATAL
 << "Nÿnumbî o‡bö†‹ávîagêevíà≥∏bö së f‹ PDF" << 
fHi°AvgEvtPîBö
 << 
Endl
;

315 
	}
}

320 
	gTMVA
::
PDF
::
	$BuûdS∂öePDF
()

323 i‡(
fI¡îpﬁMëhod
 !
PDF
::
kS∂öe0
 && 
fCheckHi°
Ë
	`CheckHi°
();

325 
fNSmoŸhHi°
 = 0;

326 i‡(
fMaxNsmoŸh
 > 0 && 
fMöNsmoŸh
 >=0 ) 
	`SmoŸhHi°ogøm
();

329 
	`FûlHi°ToGøph
();

332 
fI¡îpﬁMëhod
) {

334 
kS∂öe0
:

337 
fU£Hi°ogøm
 = 
kTRUE
;

340 
kS∂öe1
:

341 
fS∂öe
 = 
√w
 
TMVA
::
	`TS∂öe1
–"•löe1",Çew 
	`TGøph
(*
fGøph
) );

344 
kS∂öe2
:

345 
fS∂öe
 = 
√w
 
TMVA
::
	`TS∂öe2
–"•löe2",Çew 
	`TGøph
(*
fGøph
) );

348 
kS∂öe3
:

349 
fS∂öe
 = 
√w
 
	`TS∂öe3
–"•löe3",Çew 
	`TGøph
(*
fGøph
) );

352 
kS∂öe5
:

353 
fS∂öe
 = 
√w
 
	`TS∂öe5
–"•löe5",Çew 
	`TGøph
(*
fGøph
) );

357 
	`Log
(Ë<< 
kWARNING
 << "NÿvÆid i¡îpﬁ©i⁄ mëhod giví! U£ S∂öe2" << 
Endl
;

358 
fS∂öe
 = 
√w
 
TMVA
::
	`TS∂öe2
–"•löe2",Çew 
	`TGøph
(*
fGøph
) );

359 
	`Log
(Ë<< 
kFATAL
 << " Wñl.. .thökögábouàô, I bëã∏quô sÿyouÇŸi˚ youáª f‹˚dÅÿfixÅhêmi°akê" << 
Endl
;

360 
°d
::
	`exô
(1);

363 
	`FûlS∂öeToHi°
();

365 i‡(!
	`U£Hi°ogøm
()) {

366 
fS∂öe
->
	`SëTôÀ
–(
TSåög
)
fHi°
->
	`GëTôÀ
() + fSpline->GetTitle() );

367 
fS∂öe
->
	`SëName
 ( (
TSåög
)
fHi°
->
	`GëName
() + fSpline->GetName() );

372 
DoubÀ_t
 
öãgøl
 = 
	`GëI¡egøl
();

373 i‡(
öãgøl
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << "I¡egøl: " << i¡egø»<< " <0" << 
Endl
;

376 i‡(
fN‹mÆize
)

377 i‡(
öãgøl
>0Ë
fPDFHi°
->
	`SˇÀ
( 1.0/integral );

379 
fPDFHi°
->
	`SëDúe˘‹y
(0);

380 
	}
}

386 
	gTMVA
::
PDF
::
	$BuûdKDEPDF
()

388 
fPDFHi°
 = 
√w
 
	`TH1F
–"", "", 
fgNbö_PdfHi°
, 
	`GëXmö
(), 
	`GëXmax
() );

389 
fPDFHi°
->
	`SëTôÀ
–(
TSåög
)
fHi°
->
	`GëTôÀ
() + "_hist from_KDE" );

390 
fPDFHi°
->
	`SëName
 ( (
TSåög
)
fHi°
->
	`GëName
() + "_hist_from_KDE" );

393 
Flﬂt_t
 
hi°oLowEdge
 = 
fHi°
->
	`GëBöLowEdge
(1);

394 
Flﬂt_t
 
hi°oUµîEdge
 = 
fPDFHi°
->
	`GëBöLowEdge
(fPDFHi°->
	`GëNbösX
()Ë+ fPDFHi°->
	`GëBöWidth
(fPDFHist->GetNbinsX());

395 
KDEKî√l
 *
kîn
 = 
√w
 
TMVA
::
	`KDEKî√l
–
fKDEôî
,

396 
fHi°
, 
hi°oLowEdge
, 
hi°oUµîEdge
,

397 
fKDEb‹dî
, 
fFöeFa˘‹
 );

398 
kîn
->
	`SëKî√lTy≥
(
fKDEty≥
);

400 
I¡_t
 
i
=1;i<
fHi°
->
	`GëNbösX
();i++) {

402 
I¡_t
 
j
=1;j<
fPDFHi°
->
	`GëNbösX
();j++) {

404 
fPDFHi°
->
	`AddBöC⁄ã¡
(
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

405 
kîn
->
	`GëBöKî√lI¡egøl
(
fPDFHi°
->
	`GëBöLowEdge
(
j
),

406 
fPDFHi°
->
	`GëBöLowEdge
(
j
+1),

407 
fHi°
->
	`GëBöCíãr
(
i
),

408 
i
)

411 i‡(
fKDEb‹dî
 == 3) {

415 i‡(
i
 < 
fHi°
->
	`GëNbösX
()/5 ) {

416 
I¡_t
 
j
=1;j<
fPDFHi°
->
	`GëNbösX
();j++) {

418 
fPDFHi°
->
	`AddBöC⁄ã¡
(
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

419 
kîn
->
	`GëBöKî√lI¡egøl
(
fPDFHi°
->
	`GëBöLowEdge
(
j
),

420 
fPDFHi°
->
	`GëBöLowEdge
(
j
+1),

421 2*
hi°oLowEdge
-
fHi°
->
	`GëBöCíãr
(
i
),

422 
i
)

426 i‡(
i
 > 4*
fHi°
->
	`GëNbösX
()/5) {

427 
I¡_t
 
j
=1;j<
fPDFHi°
->
	`GëNbösX
();j++) {

429 
fPDFHi°
->
	`AddBöC⁄ã¡
–
j
,
fHi°
->
	`GëBöC⁄ã¡
(
i
)*

430 
kîn
->
	`GëBöKî√lI¡egøl
(
fPDFHi°
->
	`GëBöLowEdge
(
j
),

431 
fPDFHi°
->
	`GëBöLowEdge
(
j
+1),

432 2*
hi°oUµîEdge
-
fHi°
->
	`GëBöCíãr
(
i
), i) );

438 
fPDFHi°
->
	`SëE¡rõs
(
fHi°
->
	`GëE¡rõs
());

440 
dñëe
 
kîn
;

443 
DoubÀ_t
 
öãgøl
 = 
	`GëI¡egøl
();

444 i‡(
öãgøl
 < 0Ë
	`Log
(Ë<< 
kFATAL
 << "I¡egøl: " << i¡egø»<< " <0" << 
Endl
;

447 i‡(
fN‹mÆize
)

448 i‡(
öãgøl
>0Ë
fPDFHi°
->
	`SˇÀ
( 1.0/integral );

449 
fPDFHi°
->
	`SëDúe˘‹y
(0);

450 
	}
}

454 
	gTMVA
::
PDF
::
	$SmoŸhHi°ogøm
()

456 if(
fHi°
->
	`GëNbösX
()==1) ;

457 i‡(
fMaxNsmoŸh
 =
fMöNsmoŸh
) {

458 
fHi°
->
	`SmoŸh
–
fMöNsmoŸh
 );

464 
Flﬂt_t
 
Eº
=0, 
EºAvg
=0, 
EºRMS
=0 ; 
I¡_t
 
num
=0, 
smoŸh
;

465 
I¡_t
 
bö
=0; bö<
fHi°
->
	`GëNbösX
(); bin++) {

466 i‡(
fHi°
->
	`GëBöC⁄ã¡
(
bö
+1Ë<fHi°->
	`GëBöEº‹
(bin+1)) ;

467 
Eº
 = 
fHi°
->
	`GëBöEº‹
(
bö
+1Ë/ fHi°->
	`GëBöC⁄ã¡
(bin+1);

468 
EºAvg
 +
Eº
; 
EºRMS
 +Eº*Eº; 
num
++;

470 
EºAvg
 /
num
;

471 
EºRMS
 = 
TM©h
::
	`Sqπ
(EºRMS/
num
-
EºAvg
*ErrAvg) ;

474 
Flﬂt_t
 
MaxEº
=
EºAvg
+
EºRMS
, 
MöEº
=ErrAvg-ErrRMS;

475 
fNSmoŸhHi°
 = 
√w
 
	`TH1I
("","",
fHi°
->
	`GëNbösX
(),0,fHist->GetNbinsX());

476 
fNSmoŸhHi°
->
	`SëTôÀ
–(
TSåög
)
fHi°
->
	`GëTôÀ
() + "_Nsmooth" );

477 
fNSmoŸhHi°
->
	`SëName
 ( (
TSåög
)
fHi°
->
	`GëName
() + "_Nsmooth" );

478 
I¡_t
 
bö
=0; bö<
fHi°
->
	`GëNbösX
(); bin++) {

479 i‡(
fHi°
->
	`GëBöC⁄ã¡
(
bö
+1Ë<fHi°->
	`GëBöEº‹
(bin+1))

480 
smoŸh
=
fMaxNsmoŸh
;

482 
Eº
 = 
fHi°
->
	`GëBöEº‹
(
bö
+1Ë/ fHi°->
	`GëBöC⁄ã¡
(bin+1);

483 
smoŸh
=(
I¡_t
)((
Eº
-
MöEº
Ë/(
MaxEº
-MöEºË* (
fMaxNsmoŸh
-
fMöNsmoŸh
)) + fMinNsmooth;

485 
smoŸh
 = 
TM©h
::
	`Max
(
fMöNsmoŸh
,TM©h::
	`Mö
(
fMaxNsmoŸh
,smooth));

486 
fNSmoŸhHi°
->
	`SëBöC⁄ã¡
(
bö
+1,
smoŸh
);

491 
I¡_t
 
n
=
fMaxNsmoŸh
;Ç>=0;Ç--) {

493 i‡(
n
 <
fMöNsmoŸh
Ë{ 
fHi°
->
	`SmoŸh
(); ; }

494 
I¡_t
 
MöBö
=-1,
MaxBö
 =-1;

495 
I¡_t
 
bö
=0; bö < 
fHi°
->
	`GëNbösX
(); bin++) {

496 i‡(
fNSmoŸhHi°
->
	`GëBöC⁄ã¡
(
bö
+1Ë>
n
) {

497 i‡(
MöBö
==-1ËMöBö = 
bö
;

498 
MaxBö
=
bö
;

500 i‡(
MaxBö
 >= 0) {

501 #i‡
ROOT_VERSION_CODE
 > 
	`ROOT_VERSION
(5,19,2)

502 
fHi°
->
	`SmoŸh
(1,"R");

504 
fHi°
->
	`SmoŸh
(1,
MöBö
+1,
MaxBö
+1);

506 
MöBö
=
MaxBö
=-1;

509 
MöBö
 = -1;

512 
	}
}

517 
	gTMVA
::
PDF
::
	$FûlHi°ToGøph
()

519 
fGøph
=
√w
 
	`TGøph
(
fHi°
);

520 
	}
}

526 
	gTMVA
::
PDF
::
	$FûlS∂öeToHi°
()

528 i‡(
	`U£Hi°ogøm
()) {

530 
fPDFHi°
 = (
TH1
*)
fHi°
->
	`Cl⁄e
();

531 
fPDFHi°
->
	`SëTôÀ
–(
TSåög
)
fHi°
->
	`GëTôÀ
() + "_hist from_spline0" );

532 
fPDFHi°
->
	`SëName
 ( (
TSåög
)
fHi°
->
	`GëName
() + "_hist_from_spline0" );

536 
fPDFHi°
 = 
√w
 
	`TH1F
–"", "", 
fgNbö_PdfHi°
, 
	`GëXmö
(), 
	`GëXmax
() );

537 
fPDFHi°
->
	`SëTôÀ
–(
TSåög
)
fHi°
->
	`GëTôÀ
(Ë+ "_hi° from_" + 
fS∂öe
->GetTitle() );

538 
fPDFHi°
->
	`SëName
 ( (
TSåög
)
fHi°
->
	`GëName
(Ë+ "_hi°_‰om_" + 
fS∂öe
->
	`GëTôÀ
() );

540 
I¡_t
 
bö
=1; bö <
fgNbö_PdfHi°
; bin++) {

541 
DoubÀ_t
 
x
 = 
fPDFHi°
->
	`GëBöCíãr
–
bö
 );

542 
DoubÀ_t
 
y
 = 
fS∂öe
->
	`EvÆ
–
x
 );

546 i‡(
y
 <
fgEpsû⁄
Ëy = 
fHi°
->
	`GëBöC⁄ã¡
–fHi°->
	`FödBö
–
x
 ) );

547 
fPDFHi°
->
	`SëBöC⁄ã¡
–
bö
, 
TM©h
::
	`Max
(
y
, 
fgEpsû⁄
) );

550 
fPDFHi°
->
	`SëDúe˘‹y
(0);

551 
	}
}

556 
	gTMVA
::
PDF
::
	$CheckHi°
() const

558 i‡(
fHi°
 =
NULL
) {

559 
	`Log
(Ë<< 
kFATAL
 << "<CheckHi°> CÆÀd wôhouàvÆid hi°ogømÖoöãr!" << 
Endl
;

562 
I¡_t
 
nbös
 = 
fHi°
->
	`GëNbösX
();

564 
I¡_t
 
em±yBös
=0;

566 
I¡_t
 
bö
=1; bö<=
nbös
; bin++)

567 i‡(
fHi°
->
	`GëBöC⁄ã¡
(
bö
Ë=0Ë
em±yBös
++;

569 i‡(((
Flﬂt_t
)
em±yBös
/(Flﬂt_t)
nbös
) > 0.5) {

570 
	`Log
(Ë<< 
kWARNING
 << "M‹êth™ 50% (" << (((
Flﬂt_t
)
em±yBös
/(Flﬂt_t)
nbös
)*100)

572 << 
fHi°
->
	`GëName
(Ë<< "'áªÉm±y!" << 
Endl
;

573 
	`Log
(Ë<< 
kWARNING
 << "X_mö=" << 
	`GëXmö
()

574 << " món=" << 
fHi°
->
	`GëMón
(Ë<< " X_max" << 
	`GëXmax
(Ë<< 
Endl
;

576 
	}
}

581 
	gTMVA
::
PDF
::
	$VÆid©ePDF
–
TH1
* 
‹igöÆHi°
 ) const

584 i‡(!
‹igöÆHi°
Ë‹igöÆHi° = 
fHi°OrigöÆ
;

586 
I¡_t
 
nbös
 = 
‹igöÆHi°
->
	`GëNbösX
();

589 i‡(
‹igöÆHi°
->
	`GëSumw2
()->
	`GëSize
(Ë=0Ë‹igöÆHi°->
	`Sumw2
();

593 
DoubÀ_t
 
chi2
 = 0;

594 
I¡_t
 
ndof
 = 0;

595 
I¡_t
 
nc1
 = 0;

596 
I¡_t
 
nc2
 = 0;

597 
I¡_t
 
nc3
 = 0;

598 
I¡_t
 
nc6
 = 0;

599 
I¡_t
 
bö
=1; bö<=
nbös
; bin++) {

600 
DoubÀ_t
 
x
 = 
‹igöÆHi°
->
	`GëBöCíãr
–
bö
 );

601 
DoubÀ_t
 
y
 = 
‹igöÆHi°
->
	`GëBöC⁄ã¡
–
bö
 );

602 
DoubÀ_t
 
ey
 = 
‹igöÆHi°
->
	`GëBöEº‹
–
bö
 );

604 
I¡_t
 
böPdfHi°
 = 
fPDFHi°
->
	`FödBö
–
x
 );

605 i‡(
böPdfHi°
<0) ;

607 
DoubÀ_t
 
yªf
 = 
	`GëVÆ
–
x
 );

608 
DoubÀ_t
 
ºef
 = ( 
‹igöÆHi°
->
	`GëSumOfWeights
()/
fPDFHi°
->GetSumOfWeights() *

609 
‹igöÆHi°
->
	`GëBöWidth
–
bö
 )/
fPDFHi°
->GëBöWidth–
böPdfHi°
 ) );

611 i‡(
y
 > 0) {

612 
ndof
++;

613 
DoubÀ_t
 
d
 = 
TM©h
::
	`Abs
–(
y
 - 
yªf
*
ºef
)/
ey
 );

616 
chi2
 +
d
*d;

617 i‡(
d
 > 1Ë{ 
nc1
++; i‡(d > 2Ë{ 
nc2
++; i‡(d > 3Ë{ 
nc3
++; i‡(d > 6Ë
nc6
++; } } }

621 
	`Log
(Ë<< 
kDEBUG
 << "VÆid©i⁄Ñesu… f‹ PDF \"" << 
‹igöÆHi°
->
	`GëTôÀ
(Ë<< "\"" << ": " << 
Endl
;

622 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
( " chi2/ndof(!=0) = %.1f/%i = %.2f (Prob = %.2f)",

623 
chi2
, 
ndof
, chi2/ndof, 
TM©h
::
	`Prob
–chi2,Çdo‡ËË<< 
Endl
;

624 i‡((1.0 - 
TM©h
::
	`Prob
–
chi2
, 
ndof
 )) > 0.9999994) {

625 
	`Log
(Ë<< 
kDEBUG
 << "Com∑ris⁄ o‡thê‹igöÆ hi°ogøm \"" << 
‹igöÆHi°
->
	`GëTôÀ
(Ë<< "\"" << 
Endl
;

626 
	`Log
(Ë<< 
kDEBUG
 << "wôhÅhêc‹ª•⁄dög PDF gavê®chi2/ndo‡o‡" << 
chi2
/
ndof
 << "," << 
Endl
;

627 
	`Log
(Ë<< 
kDEBUG
 << "which c‹ª•⁄d†tÿ®devüti⁄ o‡m‹êth™ 5 sigma! PÀa£ check!" << 
Endl
;

629 
	`Log
(Ë<< 
kDEBUG
 << 
	`F‹m
( " #bins-found(#expected-bins) deviating > [1,2,3,6] sigmas: " \

631 
nc1
, 
	`I¡_t
(
TM©h
::
	`Prob
(1.0,1)*
ndof
), 
nc2
, Int_t(TMath::Prob(4.0,1)*ndof),

632 
nc3
, 
	`I¡_t
(
TM©h
::
	`Prob
(9.0,1)*
ndof
), 
nc6
, I¡_t(TM©h::Prob(36.0,1)*ndofËË<< 
Endl
;

633 
	}
}

638 
DoubÀ_t
 
	gTMVA
::
PDF
::
	$GëI¡egøl
() const

640 
DoubÀ_t
 
öãgøl
 = 
fPDFHi°
->
	`GëSumOfWeights
();

641 
öãgøl
 *
	`GëPdfHi°BöWidth
();

643  
öãgøl
;

644 
	}
}

649 
DoubÀ_t
 
	gTMVA
::
PDF
::
	$IGëVÆ
–
DoubÀ_t
* 
x
, Double_t* )

651  
	`ThisPDF
()->
	`GëVÆ
–
x
[0] );

652 
	}
}

657 
DoubÀ_t
 
	gTMVA
::
PDF
::
	$GëI¡egøl
–
DoubÀ_t
 
xmö
, DoubÀ_à
xmax
 )

659 
DoubÀ_t
 
öãgøl
 = 0;

661 i‡(
fgM™uÆI¡egøti⁄
) {

664 
I¡_t
 
imö
 = 
fPDFHi°
->
	`FödBö
(
xmö
);

665 
I¡_t
 
imax
 = 
fPDFHi°
->
	`FödBö
(
xmax
);

666 i‡(
imö
 < 1) imin = 1;

667 i‡(
imax
 > 
fPDFHi°
->
	`GëNbösX
()) imax = fPDFHist->GetNbinsX();

669 
I¡_t
 
böi
 = 
imö
; böò<
imax
; bini++) {

670 
Flﬂt_t
 
dx
 = 
fPDFHi°
->
	`GëBöWidth
(
böi
);

672 i‡(
böi
 =
imö
Ë
dx
 = 
fPDFHi°
->
	`GëBöLowEdge
(böi+1Ë- 
xmö
;

673 i‡(
böi
 =
imax
Ë
dx
 = 
xmax
 - 
fPDFHi°
->
	`GëBöLowEdge
(bini);

674 i‡(
dx
 < 0 && dx > -1.0e-8) dx = 0;

675 i‡(
dx
<0) {

676 
	`Log
(Ë<< 
kWARNING


677 << "dx = " << 
dx
 << 
°d
::
ídl


678 << "böò" << 
böi
 << 
°d
::
ídl


679 << "xmö = " << 
xmö
 << 
°d
::
ídl


680 << "xmax = " << 
xmax
 << 
°d
::
ídl


681 << "imö = " << 
imö
 << 
°d
::
ídl


682 << "imax = " << 
imax
 << 
°d
::
ídl


683 << "lowÉdgêo‡imö" << 
fPDFHi°
->
	`GëBöLowEdge
(
imö
Ë<< 
°d
::
ídl


684 << "lowÉdgêo‡imö+1" << 
fPDFHi°
->
	`GëBöLowEdge
(
imö
+1Ë<< 
Endl
;

685 
	`Log
(Ë<< 
kFATAL
 << "<GëI¡egøl> dx = " << 
dx
 << " < 0" << 
Endl
;

687 
öãgøl
 +
fPDFHi°
->
	`GëBöC⁄ã¡
(
böi
)*
dx
;

694 i‡(
fIGëVÆ
 =0ËfIGëVÆ = 
√w
 
	`TF1
–"IGëVÆ", 
PDF
::
IGëVÆ
, 
	`GëXmö
(), 
	`GëXmax
(), 0 );

695 
öãgøl
 = 
fIGëVÆ
->
	`I¡egøl
–
xmö
, 
xmax
 );

698  
öãgøl
;

699 
	}
}

704 
DoubÀ_t
 
	gTMVA
::
PDF
::
	$GëVÆ
–
DoubÀ_t
 
x
 ) const

707 
I¡_t
 
bö
 = 
fPDFHi°
->
	`FödBö
(
x
);

708 
bö
 = 
TM©h
::
	`Max
(bin,1);

709 
bö
 = 
TM©h
::
	`Mö
(bö,
fPDFHi°
->
	`GëNbösX
());

711 
DoubÀ_t
 
ªtvÆ
 = 0;

713 i‡(
	`U£Hi°ogøm
()) {

715 
ªtvÆ
 = 
fPDFHi°
->
	`GëBöC⁄ã¡
–
bö
 );

719 
I¡_t
 
√xtbö
 = 
bö
;

720 i‡((
x
 > 
fPDFHi°
->
	`GëBöCíãr
(
bö
Ë&& bö !fPDFHi°->
	`GëNbösX
()) || bin == 1)

721 
√xtbö
++;

723 
√xtbö
--;

726 
DoubÀ_t
 
dx
 = 
fPDFHi°
->
	`GëBöCíãr
–
bö
 ) - fPDFHi°->GëBöCíãr–
√xtbö
 );

727 
DoubÀ_t
 
dy
 = 
fPDFHi°
->
	`GëBöC⁄ã¡
–
bö
 ) - fPDFHi°->GëBöC⁄ã¡–
√xtbö
 );

728 
ªtvÆ
 = 
fPDFHi°
->
	`GëBöC⁄ã¡
–
bö
 ) + (
x
 - fPDFHi°->
	`GëBöCíãr
–bö ))*
dy
/
dx
;

731  
TM©h
::
	`Max
–
ªtvÆ
, 
fgEpsû⁄
 );

732 
	}
}

737 
DoubÀ_t
 
	gTMVA
::
PDF
::
	$GëVÆInvî£
–
DoubÀ_t
 
y
, 
Boﬁ_t
 
isM⁄Ÿ⁄ou¶yIn¸ósögFun˘i⁄
 ) const

739 
I¡_t
 
lowîBö
=0, 
highîBö
=0;

740 
DoubÀ_t
 
lowîBöVÆue
=0, 
highîBöVÆue
=0;

741 
	`FödBöInvî£
(
fPDFHi°
,
lowîBö
,
highîBö
,
lowîBöVÆue
,
highîBöVÆue
,
y
,
isM⁄Ÿ⁄ou¶yIn¸ósögFun˘i⁄
);

743 
DoubÀ_t
 
xVÆueLowîBö
 =
fPDFHi°
->
	`GëBöCíãr
 (
lowîBö
);

744 
DoubÀ_t
 
xVÆueHighîBö
=
fPDFHi°
->
	`GëBöCíãr
 (
highîBö
);

746 
DoubÀ_t
 
Àngth
 =(
highîBöVÆue
-
lowîBöVÆue
);

747 
DoubÀ_t
 
‰a˘i⁄
=
lowîBöVÆue
;

748 i‡(
Àngth
>1.0e-10)

749 
‰a˘i⁄
=(
y
-
lowîBöVÆue
)/
Àngth
;

751 
DoubÀ_t
 
ÀngthX
 =
xVÆueHighîBö
-
xVÆueLowîBö
;

752 
DoubÀ_t
 
x
 =
xVÆueLowîBö
+
ÀngthX
*
‰a˘i⁄
;

758  
x
;

759 
	}
}

764 
	gTMVA
::
PDF
::
	$FödBöInvî£
–c⁄° 
TH1
* 
hi°ogøm
, 
I¡_t
& 
lowîBö
, I¡_t& 
highîBö
, 
DoubÀ_t
& 
lowîBöVÆue
, DoubÀ_t& 
highîBöVÆue
,

765 
DoubÀ_t
 
y
, 
Boﬁ_t
 
isM⁄Ÿ⁄ou¶yIn¸ósögFun˘i⁄
 ) const

767 i‡(
isM⁄Ÿ⁄ou¶yIn¸ósögFun˘i⁄
) {

768 
highîBö
=
hi°ogøm
->
	`GëNbösX
();

769 
lowîBö
 =0;

771 
I¡_t
 
bö
=
highîBö
/2;

773 
bö
>
lowîBö
 && bö<
highîBö
) {

774 
DoubÀ_t
 
böC⁄ã¡
=
hi°ogøm
->
	`GëBöC⁄ã¡
(
bö
);

776 i‡(
y
<
böC⁄ã¡
) {

777 
highîBö
 =
bö
;

778 
highîBöVÆue
=
böC⁄ã¡
;

780 i‡(
y
>=
böC⁄ã¡
){

781 
lowîBö
 =
bö
;

782 
lowîBöVÆue
 =
böC⁄ã¡
;

784 
bö
=
lowîBö
+(
highîBö
-lowerBin)/2;

789 
I¡_t
 
bö
=0, 
böEnd
=
hi°ogøm
->
	`GëNbösX
(); bin<binEnd; ++bin) {

790 
DoubÀ_t
 
böC⁄ã¡
=
hi°ogøm
->
	`GëBöC⁄ã¡
(
bö
);

791 i‡(
böC⁄ã¡
<
y
) {

792 
lowîBö
 =
bö
;

793 
highîBö
=
bö
;

794 
lowîBöVÆue
 =
böC⁄ã¡
;

795 
highîBöVÆue
=
böC⁄ã¡
;

798 
highîBö
=
bö
;

799 
highîBöVÆue
=
böC⁄ã¡
;

803 
	}
}

823 
	gTMVA
::
PDF
::
	$De˛¨eO±i⁄s
()

825 
	`De˛¨eO±i⁄Ref
–
fNsmoŸh
, 
	`F‹m
("NSmoŸh%s",
fSuffix
.
	`D©a
()),

827 
	`De˛¨eO±i⁄Ref
–
fMöNsmoŸh
, 
	`F‹m
("MöNSmoŸh%s",
fSuffix
.
	`D©a
()),

830 
	`De˛¨eO±i⁄Ref
–
fMaxNsmoŸh
, 
	`F‹m
("MaxNSmoŸh%s",
fSuffix
.
	`D©a
()),

833 
	`De˛¨eO±i⁄Ref
–
fHi°AvgEvtPîBö
, 
	`F‹m
("NAvEvtPîBö%s",
fSuffix
.
	`D©a
()),

836 
	`De˛¨eO±i⁄Ref
–
fHi°DeföedNBös
, 
	`F‹m
("Nbös%s",
fSuffix
.
	`D©a
()),

839 
	`De˛¨eO±i⁄Ref
–
fCheckHi°
, 
	`F‹m
("CheckHi°%s",
fSuffix
.
	`D©a
()),

842 
	`De˛¨eO±i⁄Ref
–
fI¡îpﬁ©eSåög
, 
	`F‹m
("PDFI¡îpﬁ%s",
fSuffix
.
	`D©a
()),

844 
	`AddPªDefVÆ
(
	`TSåög
("Spline0"));

845 
	`AddPªDefVÆ
(
	`TSåög
("Spline1"));

846 
	`AddPªDefVÆ
(
	`TSåög
("Spline2"));

847 
	`AddPªDefVÆ
(
	`TSåög
("Spline3"));

848 
	`AddPªDefVÆ
(
	`TSåög
("Spline5"));

849 
	`AddPªDefVÆ
(
	`TSåög
("KDE"));

851 
	`De˛¨eO±i⁄Ref
–
fKDEty≥Såög
, 
	`F‹m
("KDEty≥%s",
fSuffix
.
	`D©a
()), "KDE kernelÅype (1=Gauss)" );

852 
	`AddPªDefVÆ
(
	`TSåög
("Gauss"));

854 
	`De˛¨eO±i⁄Ref
–
fKDEôîSåög
, 
	`F‹m
("KDEôî%s",
fSuffix
.
	`D©a
()), "Number of iterations (1=non-adaptive, 2=adaptive)" );

855 
	`AddPªDefVÆ
(
	`TSåög
("Nonadaptive"));

856 
	`AddPªDefVÆ
(
	`TSåög
("Adaptive"));

858 
	`De˛¨eO±i⁄Ref
–
fFöeFa˘‹
 , 
	`F‹m
("KDEFöeFa˘‹%s",
fSuffix
.
	`D©a
()),

861 
	`De˛¨eO±i⁄Ref
–
fB‹dîMëhodSåög
, 
	`F‹m
("KDEb‹dî%s",
fSuffix
.
	`D©a
()),

863 
	`AddPªDefVÆ
(
	`TSåög
("None"));

864 
	`AddPªDefVÆ
(
	`TSåög
("Renorm"));

865 
	`AddPªDefVÆ
(
	`TSåög
("Mirror"));

867 
	`SëC⁄figName
–
	`GëName
() );

868 
	`SëC⁄figDes¸ùti⁄
( "Configuration options forÅhe PDF class" );

869 
	}
}

873 
	gTMVA
::
PDF
::
	$Pro˚ssO±i⁄s
()

875 i‡(
fNsmoŸh
 < 0) fNsmooth = 0;

877 i‡(
fMaxNsmoŸh
 < 0 || 
fMöNsmoŸh
 < 0) {

878 
fMöNsmoŸh
 = 
fMaxNsmoŸh
 = 
fNsmoŸh
;

881 i‡(
fMaxNsmoŸh
 < 
fMöNsmoŸh
 && fMinNsmooth >= 0) {

882 
	`Log
(Ë<< 
kFATAL
 << "ERROR: MaxNsmooth = "

883 << 
fMaxNsmoŸh
 << " < MöNsmoŸh = " << 
fMöNsmoŸh
 << 
Endl
;

886 i‡(
fMaxNsmoŸh
 < 0 || 
fMöNsmoŸh
 < 0) {

887 
	`Log
(Ë<< 
kFATAL
 << "ERROR: MaxNsmooth = "

888 << 
fMaxNsmoŸh
 << " o∏MöNsmoŸh = " << 
fMöNsmoŸh
 << " smÆÀ∏th™ zîo" << 
Endl
;

892 i‡(
fI¡îpﬁ©eSåög
 ="S∂öe0"Ë
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kS∂öe0
;

893 i‡(
fI¡îpﬁ©eSåög
 ="S∂öe1"Ë
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kS∂öe1
;

894 i‡(
fI¡îpﬁ©eSåög
 ="S∂öe2"Ë
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kS∂öe2
;

895 i‡(
fI¡îpﬁ©eSåög
 ="S∂öe3"Ë
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kS∂öe3
;

896 i‡(
fI¡îpﬁ©eSåög
 ="S∂öe5"Ë
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kS∂öe5
;

897 i‡(
fI¡îpﬁ©eSåög
 ="KDE" ) 
fI¡îpﬁMëhod
 = 
TMVA
::
PDF
::
kKDE
;

898 i‡(
fI¡îpﬁ©eSåög
 != "" ) {

899 
	`Log
(Ë<< 
kFATAL
 << "unknow¿£âög f‹ o±i⁄ 'I¡îpﬁ©eMëhod': " << 
fKDEty≥Såög
 << ((
fSuffix
=="")?"":
	`F‹m
(" f‹Öd‡wôh suffix %s",fSuffix.
	`D©a
())Ë<< 
Endl
;

903 i‡(
fKDEty≥Såög
 ="Gauss" ) 
fKDEty≥
 = 
KDEKî√l
::
kGauss
;

904 i‡(
fKDEty≥Såög
 != "" )

905 
	`Log
(Ë<< 
kFATAL
 << "unknow¿£âög f‹ o±i⁄ 'KDEty≥': " << 
fKDEty≥Såög
 << ((
fSuffix
=="")?"":
	`F‹m
(" f‹Öd‡wôh suffix %s",fSuffix.
	`D©a
())Ë<< 
Endl
;

906 i‡(
fKDEôîSåög
 ="N⁄ad≠tive"Ë
fKDEôî
 = 
KDEKî√l
::
kN⁄ad≠tiveKDE
;

907 i‡(
fKDEôîSåög
 ="Ad≠tive" ) 
fKDEôî
 = 
KDEKî√l
::
kAd≠tiveKDE
;

908 i‡(
fKDEôîSåög
 != "" )

909 
	`Log
(Ë<< 
kFATAL
 << "unknow¿£âög f‹ o±i⁄ 'KDEôî': " << 
fKDEty≥Såög
 << ((
fSuffix
=="")?"":
	`F‹m
(" f‹Öd‡wôh suffix %s",fSuffix.
	`D©a
())Ë<< 
Endl
;

911 i‡–
fB‹dîMëhodSåög
 ="N⁄e" ) 
fKDEb‹dî

KDEKî√l
::
kNoTª©mít
;

912 i‡–
fB‹dîMëhodSåög
 ="Rí‹m" ) 
fKDEb‹dî

KDEKî√l
::
kKî√lRí‹m
;

913 i‡–
fB‹dîMëhodSåög
 ="Múr‹" ) 
fKDEb‹dî

KDEKî√l
::
kSam∂eMúr‹
;

914 i‡–
fKDEôîSåög
 != "" ) {

915 
	`Log
(Ë<< 
kFATAL
 << "unknow¿£âög f‹ o±i⁄ 'KDEB‹dî': " << 
fKDEty≥Såög
 << ((
fSuffix
=="")?"":
	`F‹m
(" f‹Öd‡wôh suffix %s",fSuffix.
	`D©a
())Ë<< 
Endl
;

917 
	}
}

922 
	gTMVA
::
PDF
::
	$AddXMLTo
–* 
∑ª¡
 )

924 * 
pdfxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "PDF");

925 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "Name", 
fPDFName
 );

926 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "MöNSmoŸh", 
fMöNsmoŸh
 );

927 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "MaxNSmoŸh", 
fMaxNsmoŸh
 );

928 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "I¡îpﬁMëhod", 
fI¡îpﬁMëhod
 );

929 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "KDE_ty≥", 
fKDEty≥
 );

930 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "KDE_ôî", 
fKDEôî
 );

931 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "KDE_b‹dî", 
fKDEb‹dî
 );

932 
	`gToﬁs
().
	`AddAâr
(
pdfxml
, "KDE_föeÁ˘‹", 
fFöeFa˘‹
 );

933 * 
pdfhi°
 = 
	`gToﬁs
().
	`AddChûd
(
pdfxml
,"Histogram" );

934 
TH1
* 
hi°ToWrôe
 = 
	`GëOrigöÆHi°
();

935 
Boﬁ_t
 
hasEquidi°™tBönög
 = 
	`gToﬁs
().
	`Hi°oHasEquidi°™tBös
(*
hi°ToWrôe
);

936 
	`gToﬁs
().
	`AddAâr
(
pdfhi°
, "Name", 
hi°ToWrôe
->
	`GëName
() );

937 
	`gToﬁs
().
	`AddAâr
(
pdfhi°
, "NBös", 
hi°ToWrôe
->
	`GëNbösX
() );

938 
	`gToﬁs
().
	`AddAâr
(
pdfhi°
, "XMö", 
hi°ToWrôe
->
	`GëXaxis
()->
	`GëXmö
() );

939 
	`gToﬁs
().
	`AddAâr
(
pdfhi°
, "XMax", 
hi°ToWrôe
->
	`GëXaxis
()->
	`GëXmax
() );

940 
	`gToﬁs
().
	`AddAâr
(
pdfhi°
, "HasEquidi°™tBös", 
hasEquidi°™tBönög
 );

942 
TSåög
 
	`böc⁄ã¡
("");

943 
I¡_t
 
i
=0; i<
hi°ToWrôe
->
	`GëNbösX
(); i++) {

944 
böc⁄ã¡
 +
	`gToﬁs
().
	`SåögFromDoubÀ
(
hi°ToWrôe
->
	`GëBöC⁄ã¡
(
i
+1));

945 
böc⁄ã¡
 += " ";

947 
	`gToﬁs
().
	`AddRawLöe
(
pdfhi°
, 
böc⁄ã¡
 );

949 i‡(!
hasEquidi°™tBönög
) {

950 * 
pdfhi°bös
 = 
	`gToﬁs
().
	`AddChûd
(
pdfxml
,"HistogramBinning" );

951 
	`gToﬁs
().
	`AddAâr
(
pdfhi°bös
, "NBös", 
hi°ToWrôe
->
	`GëNbösX
() );

952 
TSåög
 
	`böns
("");

953 
I¡_t
 
i
=1; i<=
hi°ToWrôe
->
	`GëNbösX
()+1; i++) {

954 
böns
 +
	`gToﬁs
().
	`SåögFromDoubÀ
(
hi°ToWrôe
->
	`GëXaxis
()->
	`GëBöLowEdge
(
i
));

955 
böns
 += " ";

957 
	`gToﬁs
().
	`AddRawLöe
(
pdfhi°bös
, 
böns
 );

959 
	}
}

964 
	gTMVA
::
PDF
::
	$RódXML
–* 
pd‚ode
 )

966 
UI¡_t
 
íumöt
;

968 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "MöNSmoŸh", 
fMöNsmoŸh
 );

969 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "MaxNSmoŸh", 
fMaxNsmoŸh
 );

970 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "I¡îpﬁMëhod", 
íumöt
 ); 
fI¡îpﬁMëhod
 = 
	`EI¡îpﬁ©eMëhod
(enumint);

971 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "KDE_ty≥", 
íumöt
 ); 
fKDEty≥
 = 
KDEKî√l
::
	`EKî√lTy≥
(enumint);

972 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "KDE_ôî", 
íumöt
 ); 
fKDEôî
 = 
KDEKî√l
::
	`EKî√lIãr
(enumint);

973 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "KDE_b‹dî", 
íumöt
 ); 
fKDEb‹dî
 = 
KDEKî√l
::
	`EKî√lB‹dî
(enumint);

974 
	`gToﬁs
().
	`RódAâr
(
pd‚ode
, "KDE_föeÁ˘‹", 
fFöeFa˘‹
 );

976 
TSåög
 
h«me
;

977 
UI¡_t
 
nbös
;

978 
DoubÀ_t
 
xmö
, 
xmax
;

979 
Boﬁ_t
 
hasEquidi°™tBönög
;

981 * 
hi°ch
 = 
	`gToﬁs
().
	`GëChûd
(
pd‚ode
);

982 
	`gToﬁs
().
	`RódAâr
–
hi°ch
, "Name", 
h«me
 );

983 
	`gToﬁs
().
	`RódAâr
–
hi°ch
, "NBös", 
nbös
 );

984 
	`gToﬁs
().
	`RódAâr
–
hi°ch
, "XMö", 
xmö
 );

985 
	`gToﬁs
().
	`RódAâr
–
hi°ch
, "XMax", 
xmax
 );

986 
	`gToﬁs
().
	`RódAâr
–
hi°ch
, "HasEquidi°™tBös", 
hasEquidi°™tBönög
 );

989 
TH1
* 
√whi°
 = 0;

990 i‡(
hasEquidi°™tBönög
) {

991 
√whi°
 = 
√w
 
	`TH1F
–
h«me
, h«me, 
nbös
, 
xmö
, 
xmax
 );

992 
√whi°
->
	`SëDúe˘‹y
(0);

993 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
hi°ch
);

994 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

995 
DoubÀ_t
 
vÆ
;

996 
UI¡_t
 
i
=0; i<
nbös
; i++) {

997 
s
 >> 
vÆ
;

998 
√whi°
->
	`SëBöC⁄ã¡
(
i
+1,
vÆ
);

1002 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
hi°ch
);

1003 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

1004 
DoubÀ_t
 
vÆ
;

1005 * 
böch
 = 
	`gToﬁs
().
	`GëNextChûd
(
hi°ch
);

1006 
UI¡_t
 
nbönög
;

1007 
	`gToﬁs
().
	`RódAâr
–
böch
, "NBös", 
nbönög
 );

1008 
TVe˘‹D
 
	`böns
(
nbönög
+1);

1009 i‡(
nbönög
 !
nbös
) {

1010 
	`Log
(Ë<< 
kFATAL
 << "Numbî o‡bö†ö c⁄ã¡ánd bönögáºay dif„rs"<<
Endl
;

1012 c⁄° * 
böSåög
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
böch
);

1013 
°d
::
°rög°ªam
 
	`sb
(
böSåög
);

1014 
UI¡_t
 
i
=0; i<=
nbös
; i++Ë
sb
 >> 
böns
[i];

1015 
√whi°
 = 
√w
 
	`TH1F
–
h«me
, h«me, 
nbös
, 
böns
.
	`GëM©rixAºay
() );

1016 
√whi°
->
	`SëDúe˘‹y
(0);

1017 
UI¡_t
 
i
=0; i<
nbös
; i++) {

1018 
s
 >> 
vÆ
;

1019 
√whi°
->
	`SëBöC⁄ã¡
(
i
+1,
vÆ
);

1023 
TSåög
 
h«meSmoŸh
 = 
h«me
;

1024 
h«meSmoŸh
.
	`Rïœ˚AŒ
( "_original", "_smoothed" );

1026 i‡(
fHi°OrigöÆ
 !0Ë
dñëe
 fHistOriginal;

1027 
fHi°OrigöÆ
 = 
√whi°
;

1028 
fHi°
 = (
TH1F
*)
fHi°OrigöÆ
->
	`Cl⁄e
–
h«meSmoŸh
 );

1029 
fHi°
->
	`SëTôÀ
–
h«meSmoŸh
 );

1030 
fHi°
->
	`SëDúe˘‹y
(0);

1032 i‡(
fI¡îpﬁMëhod
 =
PDF
::
kKDE
Ë
	`BuûdKDEPDF
();

1033 
	`BuûdS∂öePDF
();

1034 
	}
}

1039 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<< ( 
°d
::o°ªam& 
os
, c⁄° 
	gPDF
& 
	gpdf
 )

1041 
I¡_t
 
	gdp
 = 
os
.
¥ecisi⁄
();

1042 
	gos
 << "MöNSmoŸh " << 
	gpdf
.
	gfMöNsmoŸh
 << 
	g°d
::
ídl
;

1043 
	gos
 << "MaxNSmoŸh " << 
	gpdf
.
	gfMaxNsmoŸh
 << 
	g°d
::
ídl
;

1044 
	gos
 << "I¡îpﬁMëhod " << 
	gpdf
.
	gfI¡îpﬁMëhod
 << 
	g°d
::
ídl
;

1045 
	gos
 << "KDE_ty≥ " << 
	gpdf
.
	gfKDEty≥
 << 
	g°d
::
ídl
;

1046 
	gos
 << "KDE_ôî " << 
	gpdf
.
	gfKDEôî
 << 
	g°d
::
ídl
;

1047 
	gos
 << "KDE_b‹dî " << 
	gpdf
.
	gfKDEb‹dî
 << 
	g°d
::
ídl
;

1048 
	gos
 << "KDE_föeÁ˘‹ " << 
	gpdf
.
	gfFöeFa˘‹
 << 
	g°d
::
ídl
;

1050 
TH1
* 
	ghi°ToWrôe
 = 
pdf
.
GëOrigöÆHi°
();

1052 c⁄° 
I¡_t
 
	gnBös
 = 
hi°ToWrôe
->
GëNbösX
();

1055 
	gos
 << "Histogram "

1056 << 
	ghi°ToWrôe
->
GëName
()

1057 << " " << 
	gnBös


1058 << " " << 
	g°d
::
£çªcisi⁄
(12Ë<< 
hi°ToWrôe
->
GëXaxis
()->
GëXmö
()

1059 << " " << 
°d
::
£çªcisi⁄
(12Ë<< 
hi°ToWrôe
->
GëXaxis
()->
GëXmax
()

1060 << 
°d
::
ídl
;

1063 
	gos
 << "Weight†" << 
	g°d
::
ídl
;

1064 
	gos
 << 
	g°d
::
£çªcisi⁄
(8);

1065 
I¡_t
 
	gi
=0; i<
	gnBös
; i++) {

1066 
	gos
 << 
	g°d
::
£tw
(15Ë<< 
°d
::
À·
 << 
hi°ToWrôe
->
GëBöC⁄ã¡
(
i
+1Ë<< std::
right
 << " ";

1067 i‡((
	gi
+1)%5==0Ë
os
 << 
°d
::
ídl
;

1070 
	gos
 << 
	g°d
::
£çªcisi⁄
(
dp
);

1071  
	gos
;

1077 
	g°d
::
i°ªam
& 
TMVA
::
›î©‹
>> ( 
°d
::i°ªam& 
i°r
, 
	gPDF
& 
	gpdf
 )

1079 
TSåög
 
	gdevnuŒS
;

1080 
I¡_t
 
	gvÆI
;

1081 
I¡_t
 
	gnbös
=-1;

1082 
Flﬂt_t
 
	gxmö
=-1., 
	gxmax
=-1.;

1083 
TSåög
 
	gh«me
="_original";

1084 
Boﬁ_t
 
	gd⁄eRódög
 = 
kFALSE
;

1085 !
	gd⁄eRódög
) {

1086 
	gi°r
 >> 
	gdevnuŒS
;

1087 i‡(
	gdevnuŒS
=="NSmooth")

1088 {
i°r
 >> 
pdf
.
fMöNsmoŸh
; 
	gpdf
.
	gfMaxNsmoŸh
=pdf.fMinNsmooth;}

1089 i‡(
	gdevnuŒS
=="MöNSmoŸh"Ë
i°r
 >> 
pdf
.
fMöNsmoŸh
;

1090 i‡(
	gdevnuŒS
=="MaxNSmoŸh"Ë
i°r
 >> 
pdf
.
fMaxNsmoŸh
;

1092 i‡(
	gdevnuŒS
 ="I¡îpﬁMëhod"Ë{ 
i°r
 >> 
vÆI
; 
	gpdf
.
	gfI¡îpﬁMëhod
 = 
PDF
::
EI¡îpﬁ©eMëhod
(valI);}

1093 i‡(
	gdevnuŒS
 ="KDE_ty≥"Ë{ 
i°r
 >> 
vÆI
; 
	gpdf
.
	gfKDEty≥
 = 
KDEKî√l
::
EKî√lTy≥
(valI); }

1094 i‡(
	gdevnuŒS
 ="KDE_ôî"Ë{ 
i°r
 >> 
vÆI
; 
	gpdf
.
	gfKDEôî
 = 
KDEKî√l
::
EKî√lIãr
(valI);}

1095 i‡(
	gdevnuŒS
 ="KDE_b‹dî"Ë{ 
i°r
 >> 
vÆI
; 
	gpdf
.
	gfKDEb‹dî
 = 
KDEKî√l
::
EKî√lB‹dî
(valI);}

1096 i‡(
	gdevnuŒS
 == "KDE_finefactor") {

1097 
i°r
 >> 
pdf
.
fFöeFa˘‹
;

1098 i‡(
	gpdf
.
GëRódögVîsi⁄
(Ë!0 && 
pdf
.GëRódögVîsi⁄(Ë< 
TMVA_VERSION
(3,7,3)) {

1100 
	gi°r
 >> 
	gnbös
 >> 
	gxmö
 >> 
	gxmax
;

1101 
	gd⁄eRódög
 = 
kTRUE
;

1104 i‡(
	gdevnuŒS
 ="Hi°ogøm"Ë{ 
i°r
 >> 
h«me
 >> 
nbös
 >> 
xmö
 >> 
xmax
; }

1105 i‡(
	gdevnuŒS
 ="Weights"Ë{ 
d⁄eRódög
 = 
kTRUE
; }

1108 
TSåög
 
	gh«meSmoŸh
 = 
h«me
;

1109 
	gh«meSmoŸh
.
Rïœ˚AŒ
( "_original", "_smoothed" );

1112 i‡(
	gnbös
==-1) {

1113 
°d
::
cout
 << "PDF,ÅryögÅÿ¸óãá hi°ogøm wôhouàdeföed bönög"<< std::
ídl
;

1114 
	g°d
::
exô
(1);

1116 
TH1
* 
	g√whi°
 = 
√w
 
TH1F
–
h«me
,h«me, 
nbös
, 
xmö
, 
xmax
 );

1117 
	g√whi°
->
SëDúe˘‹y
(0);

1118 
Flﬂt_t
 
	gvÆ
;

1119 
I¡_t
 
	gi
=0; i<
	gnbös
; i++) {

1120 
	gi°r
 >> 
	gvÆ
;

1121 
	g√whi°
->
SëBöC⁄ã¡
(
i
+1,
vÆ
);

1124 i‡(
	gpdf
.
	gfHi°OrigöÆ
 !0Ë
dñëe
 
pdf
.
fHi°OrigöÆ
;

1125 
	gpdf
.
	gfHi°OrigöÆ
 = 
√whi°
;

1126 
	gpdf
.
	gfHi°
 = (
TH1F
*)
pdf
.
fHi°OrigöÆ
->
Cl⁄e
–
h«meSmoŸh
 );

1127 
	gpdf
.
	gfHi°
->
SëTôÀ
–
h«meSmoŸh
 );

1128 
	gpdf
.
	gfHi°
->
SëDúe˘‹y
(0);

1130 i‡(
	gpdf
.
	gfMöNsmoŸh
>=0Ë
pdf
.
BuûdS∂öePDF
();

1132 
	gpdf
.
	gfI¡îpﬁMëhod
 = 
PDF
::
kKDE
;

1133 
	gpdf
.
BuûdKDEPDF
();

1136  
	gi°r
;

1139 
	gTMVA
::
PDF
* 
TMVA
::PDF::
	$ThisPDF
( )

1142  
	`GëThisPdfThªadLoˇl
();

1143 
	}
}

	@src/QuickMVAProbEstimator.cxx

6 
	~"TMVA/QuickMVAProbE°im©‹.h
"

8 
	~"TMVA/MsgLoggî.h
"

9 
	~"TMVA/Ty≥s.h
"

11 
	~"TM©h.h
"

13 
	~<io°ªam
>

16 
	gTMVA
::
QuickMVAProbE°im©‹
::
	$AddEvít
(
DoubÀ_t
 
vÆ
, DoubÀ_à
weight
, 
I¡_t
 
ty≥
){

17 
EvítInfo
 
ev
;

18 
ev
.
evítVÆue
=
vÆ
;Év.
evítWeight
=
weight
;Év.
evítTy≥
=
ty≥
;

20 
fEvtVe˘‹
.
	`push_back
(
ev
);

21 i‡(
fIsS‹ãd
ËfIsS‹ãd=
Ál£
;

23 
	}
}

26 
DoubÀ_t
 
	gTMVA
::
QuickMVAProbE°im©‹
::
	$GëMVAProbAt
(
DoubÀ_t
 
vÆue
){

32 i‡(!
fIsS‹ãd
) {

33 
°d
::
	`s‹t
(
fEvtVe˘‹
.
	`begö
(),fEvtVe˘‹.
	`íd
(),
TMVA
::
QuickMVAProbE°im©‹
::
com∑ª
), 
fIsS‹ãd
=
åue
;

36 
DoubÀ_t
 
≥r˚¡age
 = 0.1;

37 
UI¡_t
 
nR™ge
 = 
TM©h
::
	`Max
(
fNMö
,(UI¡_tË(
fEvtVe˘‹
.
	`size
(Ë* 
≥r˚¡age
));

38 
nR™ge
 = 
TM©h
::
	`Mö
(
fNMax
,nRange);

40 i‡(
nR™ge
 > 
fEvtVe˘‹
.
	`size
()) {

41 
nR™ge
 = 
fEvtVe˘‹
.
	`size
()/3.;

42 
	`Log
(Ë<< 
kWARNING
 << " !! you havê⁄ly " << 
fEvtVe˘‹
.
	`size
() << " ofÉvents.. . I choose "

43 << 
nR™ge
 << " f‹Åhêquickánd dúty kNN MVAProbÉ°im©e" << 
Endl
;

46 
EvítInfo
 
tmp
;Åmp.
evítVÆue
=
vÆue
;

47 
°d
::
ve˘‹
<
EvítInfo
>::
ôî©‹
 
ô
 = std::
	`uµî_bound
(
fEvtVe˘‹
.
	`begö
(),fEvtVe˘‹.
	`íd
(),
tmp
,
TMVA
::
QuickMVAProbE°im©‹
::
com∑ª
);

49 
UI¡_t
 
iLe·
=0, 
iRight
=0;

50 
DoubÀ_t
 
nSig«l
=0;

51 
DoubÀ_t
 
nBackgr
=0;

53  (
iLe·
+
iRight
Ë< 
nR™ge
){

54 i‡–
fEvtVe˘‹
.
	`íd
(Ë> 
ô
+
iRight
+1){

55 
iRight
++;

56 i‡–((
ô
+
iRight
))->
evítTy≥
 =0Ë
nSig«l
+=((ô+iRight))->
evítWeight
;

57 
nBackgr
+=((
ô
+
iRight
))->
evítWeight
;

59 i‡–
fEvtVe˘‹
.
	`begö
(Ë<
ô
-
iLe·
-1){

60 
iLe·
++;

61 i‡–((
ô
-
iLe·
))->
evítTy≥
 =0Ë
nSig«l
+=((ô-iLe·))->
evítWeight
;

62 
nBackgr
+=((
ô
-
iLe·
))->
evítWeight
;

66 
DoubÀ_t
 
mvaProb
 = (
nSig«l
+
nBackgr
) ?ÇSignal/(nSignal+nBackgr) : -1 ;

67  
mvaProb
;

69 
	}
}

	@src/ROCCalc.cxx

6 
	~<Æg‹ôhm
>

7 
	~<c°dlib
>

8 
	~<î∫o.h
>

10 
	~"TObjSåög.h
"

11 
	~"TM©h.h
"

12 
	~"TSåög.h
"

13 
	~"TTªe.h
"

14 
	~"TLóf.h
"

15 
	~"TH1.h
"

16 
	~"TH2.h
"

17 
	~"TLi°.h
"

18 
	~"TS∂öe.h
"

19 
	~"TVe˘‹.h
"

20 
	~"TM©rixD.h
"

21 
	~"TM©rixDSymEigí.h
"

22 
	~"TVe˘‹D.h
"

23 
	~"TTªeF‹muœ.h
"

24 
	~"TXMLEngöe.h
"

25 
	~"TROOT.h
"

26 
	~"TM©rixDSymEigí.h
"

27 
	~"TCﬁ‹.h
"

28 
	~"TMVA/C⁄fig.h
"

31 
	~"TMVA/Toﬁs.h
"

32 
	~"TMVA/ROCCÆc.h
"

33 
	~"TMVA/C⁄fig.h
"

34 
	~"TMVA/Evít.h
"

35 
	~"TMVA/Vîsi⁄.h
"

36 
	~"TMVA/PDF.h
"

37 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/PDF.h
"

40 
	~"TMVA/TS∂öe1.h
"

41 
	~"TMVA/TS∂öe2.h
"

42 
	~"TMVA/Ty≥s.h
"

44 
usög
 
«me•a˚
 
	g°d
;

48 
	gTMVA
::
ROCCÆc
::
	$ROCCÆc
(
TH1
* 
mvaS
, TH1* 
mvaB
) :

49 
	`fMaxIãr
(100),

50 
	`fAbsTﬁ
(0.0),

51 
	`fSètus
(
kTRUE
),

52 
	`fmvaS
(0),

53 
	`fmvaB
(0),

54 
	`fmvaSpdf
(0),

55 
	`fmvaBpdf
(0),

56 
	`fS∂S
(0),

57 
	`fS∂B
(0),

58 
	`fS∂mvaCumS
(0),

59 
	`fS∂mvaCumB
(0),

60 
	`fS∂effBvsS
(0),

61 
	`‚StŸ
(0),

62 
	`‚BtŸ
(0),

63 
	`fSignifiˇn˚
(0),

64 
	`fPurôy
(0),

65 
	`effBvsS
(0),

66 
	`ªjBvsS
(0),

67 
	`öveffBvsS
(0),

68 
	`fLoggî
 ( 
√w
 
TMVA
::
	`MsgLoggî
("ROCCalc") )

70 
fU£S∂öes
 = 
kTRUE
;

71 
fNbös
 = 100;

74 
fmvaS
 = 
mvaS
; fmvaS->
	`SëTôÀ
("MVA Signal");

75 
fmvaB
 = 
mvaB
; fmvaB->
	`SëTôÀ
("MVA Backgr");

76 
fXmax
 = 
fmvaS
->
	`GëXaxis
()->
	`GëXmax
();

77 
fXmö
 = 
fmvaS
->
	`GëXaxis
()->
	`GëXmö
();

79 i‡(
TM©h
::
	`Abs
(
fXmax
-
fmvaB
->
	`GëXaxis
()->
	`GëXmax
()) > 0.000001 ||

80 
TM©h
::
	`Abs
(
fXmö
-
fmvaB
->
	`GëXaxis
()->
	`GëXmö
()) > 0.000001 ||

81 
fmvaB
->
	`GëNbösX
(Ë!
fmvaS
->GetNbinsX()) {

82 
	`Log
(Ë<< 
kERROR
 << "C™nŸ cÆ ROC curvêëc,á†öÖuàmvaSánd mvaB havêdif„ª¿#nbö†‹Ñ™gê"<<
Endl
;

83 
fSètus
=
kFALSE
;

85 i‡(!
	`°rcmp
(
fmvaS
->
	`GëXaxis
()->
	`GëTôÀ
(),"")ËfmvaS->
	`SëXTôÀ
("MVA-value");

86 i‡(!
	`°rcmp
(
fmvaB
->
	`GëXaxis
()->
	`GëTôÀ
(),"")ËfmvaB->
	`SëXTôÀ
("MVA-value");

87 i‡(!
	`°rcmp
(
fmvaS
->
	`GëYaxis
()->
	`GëTôÀ
(),"")ËfmvaS->
	`SëYTôÀ
("#entries");

88 i‡(!
	`°rcmp
(
fmvaB
->
	`GëYaxis
()->
	`GëTôÀ
(),"")ËfmvaB->
	`SëYTôÀ
("#entries");

89 
	`AµlySig«lAndBackgroundStyÀ
(
fmvaS
, 
fmvaB
);

94 
fmvaSpdf
 = 
mvaS
->
	`ReböX
(mvaS->
	`GëNbösX
()/10,"MVA Signal PDF");

95 
fmvaBpdf
 = 
mvaB
->
	`ReböX
(mvaB->
	`GëNbösX
()/10,"MVA Backgr PDF");

96 if(
fmvaSpdf
==0||
fmvaBpdf
==0)

98 
	`Log
(Ë<< 
kERROR
 << "C™nŸ Rebö Hi°ogøm†mvaSánd mvaB, ROC vÆue†wû»bêˇlcuœãd wôhouàRebö hi°ogøms."<<
Endl
;

99 
fSètus
=
kFALSE
;

100 
fmvaSpdf
 = (
TH1
*)
mvaS
->
	`Cl⁄e
("MVA Signal PDF");

101 
fmvaBpdf
 = (
TH1
*)
mvaB
->
	`Cl⁄e
("MVA Backgr PDF");

103 
fmvaSpdf
->
	`SëTôÀ
("MVA Signal PDF");

104 
fmvaBpdf
->
	`SëTôÀ
("MVA Backgr PDF");

105 
fmvaSpdf
->
	`SˇÀ
(1./fmvaSpdf->
	`GëSumOfWeights
());

106 
fmvaBpdf
->
	`SˇÀ
(1./fmvaBpdf->
	`GëSumOfWeights
());

107 
fmvaSpdf
->
	`SëMaximum
(
TM©h
::
	`Max
(fmvaSpdf->
	`GëMaximum
(), 
fmvaBpdf
->GetMaximum()));

108 
fmvaBpdf
->
	`SëMaximum
(
TM©h
::
	`Max
(
fmvaSpdf
->
	`GëMaximum
(), fmvaBpdf->GetMaximum()));

109 
	`AµlySig«lAndBackgroundStyÀ
(
fmvaSpdf
, 
fmvaBpdf
);

111 
fCutOrõ¡©i⁄
 = (
fmvaS
->
	`GëMón
(Ë> 
fmvaB
->GetMean()) ? +1 : -1;

113 
fNevtS
 = 0;

115 
	}
}

119 
	gTMVA
::
ROCCÆc
::
	$AµlySig«lAndBackgroundStyÀ
–
TH1
* 
sig
, TH1* 
bkg
, TH1* 
™y
 ) {

120 
I¡_t
 
c_Sig«lLöe
 = 
TCﬁ‹
::
	`GëCﬁ‹
( "#0000ee" );

121 
I¡_t
 
c_Sig«lFûl
 = 
TCﬁ‹
::
	`GëCﬁ‹
( "#7d99d1" );

122 
I¡_t
 
c_BackgroundLöe
 = 
TCﬁ‹
::
	`GëCﬁ‹
( "#ff0000" );

123 
I¡_t
 
c_BackgroundFûl
 = 
TCﬁ‹
::
	`GëCﬁ‹
( "#ff0000" );

129 
I¡_t
 
FûlCﬁ‹__S
 = 
c_Sig«lFûl
;

130 
I¡_t
 
FûlStyÀ__S
 = 1001;

131 
I¡_t
 
LöeCﬁ‹__S
 = 
c_Sig«lLöe
;

132 
I¡_t
 
LöeWidth__S
 = 2;

136 
I¡_t
 
FûlCﬁ‹__B
 = 
c_BackgroundFûl
;

137 
I¡_t
 
FûlStyÀ__B
 = 3554;

138 
I¡_t
 
LöeCﬁ‹__B
 = 
c_BackgroundLöe
;

139 
I¡_t
 
LöeWidth__B
 = 2;

141 i‡(
sig
 !
NULL
) {

142 
sig
->
	`SëLöeCﬁ‹
–
LöeCﬁ‹__S
 );

143 
sig
->
	`SëLöeWidth
–
LöeWidth__S
 );

144 
sig
->
	`SëFûlStyÀ
–
FûlStyÀ__S
 );

145 
sig
->
	`SëFûlCﬁ‹
–
FûlCﬁ‹__S
 );

148 i‡(
bkg
 !
NULL
) {

149 
bkg
->
	`SëLöeCﬁ‹
–
LöeCﬁ‹__B
 );

150 
bkg
->
	`SëLöeWidth
–
LöeWidth__B
 );

151 
bkg
->
	`SëFûlStyÀ
–
FûlStyÀ__B
 );

152 
bkg
->
	`SëFûlCﬁ‹
–
FûlCﬁ‹__B
 );

155 i‡(
™y
 !
NULL
) {

156 
™y
->
	`SëLöeCﬁ‹
–
LöeCﬁ‹__S
 );

157 
™y
->
	`SëLöeWidth
–
LöeWidth__S
 );

158 
™y
->
	`SëFûlStyÀ
–
FûlStyÀ__S
 );

159 
™y
->
	`SëFûlCﬁ‹
–
FûlCﬁ‹__S
 );

161 
	}
}

166 
	gTMVA
::
ROCCÆc
::~
	$ROCCÆc
() {

168 i‡(
fS∂S
Ë{ 
dñëe
 fSplS; fSplS = 0; }

169 i‡(
fS∂B
Ë{ 
dñëe
 fSplB; fSplB = 0; }

170 i‡(
fS∂effBvsS
Ë{ 
dñëe
 fSpleffBvsS; fSpleffBvsS = 0; }

171 i‡(
fS∂mvaCumS
Ë{ 
dñëe
 fSplmvaCumS; fSplmvaCumS = 0; }

172 i‡(
fS∂mvaCumB
Ë{ 
dñëe
 fSplmvaCumB; fSplmvaCumB = 0; }

173 i‡(
fmvaScumul
Ë{ 
dñëe
 fmvaScumul; }

174 i‡(
fmvaBcumul
Ë{ 
dñëe
 fmvaBcumul; }

175 i‡(
effBvsS
Ë{ 
dñëe
ÉffBvsS; }

176 i‡(
ªjBvsS
Ë{ 
dñëe
ÑejBvsS; }

177 i‡(
öveffBvsS
Ë{ 
dñëe
 inveffBvsS; }

178 
dñëe
 
fLoggî
;

179 
	}
}

184 
TH1D
* 
	gTMVA
::
ROCCÆc
::
	$GëROC
(){

187 
fNevtS
 = 
fmvaS
->
	`GëSumOfWeights
();

188 i‡(
fNevtS
 < 2) {

189 
	`Log
(Ë<< 
kERROR
 << "I gues†thêmv®di°ributi⁄†„d i¡ÿROCCÆ¯wîêÆªadyÇ‹mÆized,Åhîef‹êthêˇlcuœãdÉº‹ o¿thêefficõncy wû»bêöc‹ª˘ !! " << 
Endl
;

190 
fNevtS
 = 0;

191 
fSètus
=
kFALSE
;

193 
fmvaScumul
 = 
	`gToﬁs
().
	`GëCumuœtiveDi°
(
fmvaS
);

194 
fmvaBcumul
 = 
	`gToﬁs
().
	`GëCumuœtiveDi°
(
fmvaB
);

195 
fmvaScumul
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(),fmvaScumul->
	`GëMaximum
()) );

196 
fmvaBcumul
->
	`SˇÀ
–1.0/
TM©h
::
	`Max
(
°d
::
numîic_limôs
<>::
	`ïsû⁄
(),fmvaBcumul->
	`GëMaximum
()) );

197 
fmvaScumul
->
	`SëMöimum
(0);

198 
fmvaBcumul
->
	`SëMöimum
(0);

203 if(
effBvsS
==0ËeffBvsS = 
√w
 
	`TH1D
("effBvsS", "ROC-Curve", 
fNbös
, 0, 1 );

204 
effBvsS
->
	`SëXTôÀ
( "SignalÉff" );

205 
effBvsS
->
	`SëYTôÀ
( "BackgrÉff" );

208 if(
ªjBvsS
==0ËªjBvsS = 
√w
 
	`TH1D
–"ªjBvsS", "ROC-Curve", 
fNbös
, 0, 1 );

209 
ªjBvsS
->
	`SëXTôÀ
( "SignalÉff" );

210 
ªjBvsS
->
	`SëYTôÀ
( "BackgrÑejection (1-eff)" );

213 if(
öveffBvsS
 ==0ËöveffBvsS = 
√w
 
	`TH1D
("övBeffvsSeff", "ROC-Curve" , 
fNbös
, 0, 1 );

214 
öveffBvsS
->
	`SëXTôÀ
( "SignalÉff" );

215 
öveffBvsS
->
	`SëYTôÀ
( "Inverse backgr.Éff (1/eff)" );

220 i‡(
fU£S∂öes
) {

221 
fS∂mvaCumS
 = 
√w
 
	`TS∂öe1
–"•löe2_sig«l",Çew 
	`TGøph
–
fmvaScumul
 ) );

222 
fS∂mvaCumB
 = 
√w
 
	`TS∂öe1
–"•löe2_background",Çew 
	`TGøph
–
fmvaBcumul
 ) );

224 
	`gToﬁs
().
	`CheckS∂öes
–
fmvaScumul
, 
fS∂mvaCumS
 );

225 
	`gToﬁs
().
	`CheckS∂öes
–
fmvaBcumul
, 
fS∂mvaCumB
 );

228 
DoubÀ_t
 
effB
 = 0;

229 
UI¡_t
 
böi
=1; böi<=
fNbös
; bini++) {

232 
DoubÀ_t
 
effS
 = 
effBvsS
->
	`GëBöCíãr
–
böi
 );

233 
DoubÀ_t
 
cut
 = 
	`RoŸ
–
effS
 );

236 i‡(
fU£S∂öes
Ë
effB
 = 
fS∂mvaCumB
->
	`EvÆ
–
cut
 );

237 
effB
 = 
fmvaBcumul
->
	`GëBöC⁄ã¡
–fmvaBcumul->
	`FödBö
–
cut
 ) );

240 
effBvsS
->
	`SëBöC⁄ã¡
–
böi
, 
effB
 );

241 
ªjBvsS
->
	`SëBöC⁄ã¡
–
böi
, 1.0-
effB
 );

242 i‡(
effB
>
°d
::
numîic_limôs
<>::
	`ïsû⁄
())

243 
öveffBvsS
->
	`SëBöC⁄ã¡
–
böi
, 1.0/
effB
 );

247 
fS∂effBvsS
 = 
√w
 
	`TS∂öe1
–"effBvsS",Çew 
	`TGøph
–
effBvsS
 ) );

252 
DoubÀ_t
 
effS
 = 0., 
ªjB
 = 0., 
effS_
 = 0., 
ªjB_
 = 0.;

253 
I¡_t
 
nbös
 = 5000;

254 
I¡_t
 
böi
=1; böi<=
nbös
; bini++) {

257 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös
);

258 
ªjB
 = 1.0 - 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

261 i‡((
effS
 - 
ªjB
)*(
effS_
 - 
ªjB_
) < 0) ;

262 
effS_
 = 
effS
;

263 
ªjB_
 = 
ªjB
;

266 
fSig«lCut
 = 
	`RoŸ
–0.5*(
effS
 + 
effS_
) );

268  
ªjBvsS
;

269 
	}
}

274 
DoubÀ_t
 
	gTMVA
::
ROCCÆc
::
	$GëROCI¡egøl
(){

275 
DoubÀ_t
 
effS
 = 0, 
effB
 = 0;

276 
I¡_t
 
nbös
 = 1000;

277 i‡(
fS∂effBvsS
 =0Ë
this
->
	`GëROC
();

280 
DoubÀ_t
 
öãgøl
 = 0;

281 
I¡_t
 
böi
=1; böi<=
nbös
; bini++) {

284 
effS
 = (
böi
 - 0.5)/
	`Flﬂt_t
(
nbös
);

285 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

286 
öãgøl
 +(1.0 - 
effB
);

288 
öãgøl
 /
nbös
;

290  
öãgøl
;

291 
	}
}

298 
DoubÀ_t
 
	gTMVA
::
ROCCÆc
::
	$GëEffSF‹EffBof
(
DoubÀ_t
 
effBªf
, DoubÀ_à&
effSîr
){

300 
DoubÀ_t
 
effS
=0., 
effB
, 
effSOld
=1., 
effBOld
=0.;

301 
I¡_t
 
nbös
 = 1000;

302 i‡(
fS∂effBvsS
 =0Ë
this
->
	`GëROC
();

304 
Flﬂt_t
 
°ï
=1./
nbös
;

305 
I¡_t
 
böi
=1; böi<=
nbös
; bini++) {

307 
effS
 = (
böi
 - 0.5)*
°ï
;

308 
effB
 = 
fS∂effBvsS
->
	`EvÆ
–
effS
 );

311 i‡((
effB
 - 
effBªf
)*(
effBOld
 -ÉffBref) <= 0) ;

312 
effSOld
 = 
effS
;

313 
effBOld
 = 
effB
;

317 
effS
 = 0.5*”ffS + 
effSOld
);

320 i‡(
fNevtS
 > 0Ë
effSîr
 = 
TM©h
::
	`Sqπ
–
effS
*(1.0 -ÉffS)/fNevtS );

321 
effSîr
 = 0;

323  
effS
;

324 
	}
}

329 
DoubÀ_t
 
	gTMVA
::
ROCCÆc
::
	$GëEffF‹RoŸ
–
DoubÀ_t
 
theCut
 )

331 
DoubÀ_t
 
ªtVÆ
=0;

334 i‡(
fU£S∂öes
Ë
ªtVÆ
 = 
fS∂mvaCumS
->
	`EvÆ
–
theCut
 );

335 
ªtVÆ
 = 
fmvaScumul
->
	`GëBöC⁄ã¡
–fmvaScumul->
	`FödBö
–
theCut
 ) );

343 
DoubÀ_t
 
ïs
 = 1.0e-5;

344 i‡(
theCut
-
fXmö
 < 
ïs
Ë
ªtVÆ
 = (
fCutOrõ¡©i⁄
 > 0) ? 1.0 : 0.0;

345 i‡(
fXmax
-
theCut
 < 
ïs
Ë
ªtVÆ
 = (
fCutOrõ¡©i⁄
 > 0) ? 0.0 : 1.0;

348  
ªtVÆ
;

349 
	}
}

354 
DoubÀ_t
 
	gTMVA
::
ROCCÆc
::
	$RoŸ
–
DoubÀ_t
 
ªfVÆue
 )

356 
DoubÀ_t
 
a
 = 
fXmö
, 
b
 = 
fXmax
;

357 
DoubÀ_t
 
Á
 = 
	`GëEffF‹RoŸ
–
a
 ) - 
ªfVÆue
;

358 
DoubÀ_t
 
fb
 = 
	`GëEffF‹RoŸ
–
b
 ) - 
ªfVÆue
;

359 i‡(
fb
*
Á
 > 0) {

360 
	`Log
(Ë<< 
kWARNING
 << "<ROCCalc::Root> initial interval w/oÑoot: "

361 << "◊=" << 
a
 << ", b=" << 
b
 << "),"

362 << " (Eff_a=" << 
	`GëEffF‹RoŸ
–
a
 )

363 << ", Eff_b=" << 
	`GëEffF‹RoŸ
–
b
 ) << "), "

364 << "(Á=" << 
Á
 << ", fb=" << 
fb
 << "), "

365 << "ªfVÆuê" << 
ªfVÆue
 << 
Endl
;

369 
Boﬁ_t
 
	`ac_equÆ
(
kFALSE
);

370 
DoubÀ_t
 
fc
 = 
fb
;

371 
DoubÀ_t
 
c
 = 0, 
d
 = 0, 
e
 = 0;

372 
I¡_t
 
ôî
0; iã∏<
fMaxIãr
; iter++) {

373 i‡((
fb
 < 0 && 
fc
 < 0) || (fb > 0 && fc > 0)) {

376 
ac_equÆ
 = 
kTRUE
;

377 
c
 = 
a
; 
fc
 = 
Á
;

378 
d
 = 
b
 - 
a
; 
e
 = b -á;

381 i‡(
TM©h
::
	`Abs
(
fc
Ë< TM©h::Abs(
fb
)) {

382 
ac_equÆ
 = 
kTRUE
;

383 
a
 = 
b
; b = 
c
; c =á;

384 
Á
 = 
fb
; fb = 
fc
; fc = fa;

387 
DoubÀ_t
 
tﬁ
 = 0.5 * 2.2204460492503131e-16 * 
TM©h
::
	`Abs
(
b
);

388 
DoubÀ_t
 
m
 = 0.5 * (
c
 - 
b
);

389 i‡(
fb
 =0 || 
TM©h
::
	`Abs
(
m
Ë<
tﬁ
 || TM©h::Abs(fbË< 
fAbsTﬁ
Ë 
b
;

392 i‡(
TM©h
::
	`Abs
 (
e
Ë< 
tﬁ
 || TM©h::Ab†(
Á
Ë<TM©h::Ab†(
fb
)Ë{ 
d
 = 
m
;É = m; }

395 
DoubÀ_t
 
p
, 
q
, 
r
;

396 
DoubÀ_t
 
s
 = 
fb
 / 
Á
;

398 i‡(
ac_equÆ
Ë{ 
p
 = 2 * 
m
 * 
s
; 
q
 = 1 - s; }

400 
q
 = 
Á
 / 
fc
; 
r
 = 
fb
 / fc;

401 
p
 = 
s
 * (2 * 
m
 * 
q
 * (q - 
r
Ë- (
b
 - 
a
) * (r - 1));

402 
q
 = (q - 1Ë* (
r
 - 1Ë* (
s
 - 1);

405 i‡(
p
 > 0Ë
q
 = -q;

406 
p
 = -p;

408 
DoubÀ_t
 
mö1
 = 3 * 
m
 * 
q
 - 
TM©h
::
	`Abs
 (
tﬁ
 * q);

409 
DoubÀ_t
 
mö2
 = 
TM©h
::
	`Abs
 (
e
 * 
q
);

410 i‡(2 * 
p
 < (
mö1
 < 
mö2
 ? min1 : min2)) {

412 
e
 = 
d
; d = 
p
 / 
q
;

414 { 
d
 = 
m
; 
e
 = m; }

417 
a
 = 
b
; 
Á
 = 
fb
;

419 i‡(
TM©h
::
	`Abs
(
d
Ë> 
tﬁ
Ë
b
 += d;

420 
b
 +(
m
 > 0 ? +
tﬁ
 : -tol);

422 
fb
 = 
	`GëEffF‹RoŸ
–
b
 ) - 
ªfVÆue
;

427 
	`Log
(Ë<< 
kWARNING
 << "<ROCCÆc::RoŸ> maximum iãøti⁄†(" << 
fMaxIãr


428 << "Ëªached bef‹êc⁄vîgí˚" << 
Endl
;

430  
b
;

431 
	}
}

435 
TH1
* 
	gTMVA
::
ROCCÆc
::
	$GëPurôy
–
I¡_t
 
nStŸ
, I¡_à
nBtŸ
)

437 i‡(
‚StŸ
!=
nStŸ
 || 
‚BtŸ
!=
nBtŸ
 || !
fSignifiˇn˚
) {

438 
	`GëSignifiˇn˚
(
nStŸ
, 
nBtŸ
);

439 
‚StŸ
=
nStŸ
;

440 
‚BtŸ
=
nBtŸ
;

442  
fPurôy
;

443 
	}
}

446 
TH1
* 
	gTMVA
::
ROCCÆc
::
	$GëSignifiˇn˚
–
I¡_t
 
nStŸ
, I¡_à
nBtŸ
)

448 i‡(
‚StŸ
==
nStŸ
 && 
‚BtŸ
==
nBtŸ
 && !
fSignifiˇn˚
)  fSignificance;

449 
‚StŸ
=
nStŸ
; 
‚BtŸ
=
nBtŸ
;

451 
fSignifiˇn˚
 = (
TH1
*Ë
fmvaScumul
->
	`Cl⁄e
("Signifiˇn˚"); fSignifiˇn˚->
	`SëTôÀ
("Significance");

452 
fSignifiˇn˚
->
	`Re£t
(); fSignifiˇn˚->
	`SëFûlStyÀ
(0);

453 
fSignifiˇn˚
->
	`SëXTôÀ
("mva cut value");

454 
fSignifiˇn˚
->
	`SëYTôÀ
("Stat. significance S/Sqrt(S+B)");

455 
fSignifiˇn˚
->
	`SëLöeCﬁ‹
(2);

456 
fSignifiˇn˚
->
	`SëLöeWidth
(5);

458 
fPurôy
 = (
TH1
*Ë
fmvaScumul
->
	`Cl⁄e
("Purôy"); fPurôy->
	`SëTôÀ
("Purity");

459 
fPurôy
->
	`Re£t
(); fPurôy->
	`SëFûlStyÀ
(0);

460 
fPurôy
->
	`SëXTôÀ
("mva cut value");

461 
fPurôy
->
	`SëYTôÀ
("Purity: S/(S+B)");

462 
fPurôy
->
	`SëLöeCﬁ‹
(3);

463 
fPurôy
->
	`SëLöeWidth
(5);

465 
DoubÀ_t
 
maxSig
=0;

466 
I¡_t
 
i
=1; i<=
fSignifiˇn˚
->
	`GëNbösX
(); i++) {

467 
DoubÀ_t
 
S
 = 
fmvaScumul
->
	`GëBöC⁄ã¡
–
i
 ) * 
nStŸ
;

468 
DoubÀ_t
 
B
 = 
fmvaBcumul
->
	`GëBöC⁄ã¡
–
i
 ) * 
nBtŸ
;

469 
DoubÀ_t
 
purôy
;

470 
DoubÀ_t
 
sig
;

471 i‡(
S
+
B
 > 0){

472 
purôy
 = 
S
/(S+
B
);

473 
sig
 = 
S
/
TM©h
::
	`Sqπ
(S+
B
);

474 i‡(
sig
 > 
maxSig
) {

475 
maxSig
 = 
sig
;

478 
purôy
=0;

479 
sig
=0;

481 
cout
 << "S="<<
S
<<" B="<<
B
<< "Öurôy="<<
purôy
<< 
ídl
;

482 
fPurôy
->
	`SëBöC⁄ã¡
–
i
, 
purôy
 );

483 
fSignifiˇn˚
->
	`SëBöC⁄ã¡
–
i
, 
sig
 );

500  
fSignifiˇn˚
;

502 
	}
}

	@src/ROCCurve.cxx

28 
	~"TMVA/Toﬁs.h
"

29 
	~"TMVA/TS∂öe1.h
"

30 
	~"TMVA/ROCCurve.h
"

31 
	~"TMVA/C⁄fig.h
"

32 
	~"TMVA/Vîsi⁄.h
"

33 
	~"TMVA/MsgLoggî.h
"

34 
	~"TGøph.h
"

35 
	~"TM©h.h
"

37 
	~<ve˘‹
>

38 
	~<ˇs£π
>

40 
usög
 
«me•a˚
 
	g°d
;

45 
	gTMVA
::
ROCCurve
::ROCCurve(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaVÆues
, c⁄° std::ve˘‹<
Boﬁ_t
> &
mvaT¨gës
,

46 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaWeights
)

47 : 
fLoggî
(
√w
 
TMVA
::
MsgLoggî
("ROCCurve")), 
	$fGøph
(
NULL
)

49 
	`as£π
(
mvaVÆues
.
	`size
(Ë=
mvaT¨gës
.size());

50 
	`as£π
(
mvaVÆues
.
	`size
(Ë=
mvaWeights
.size());

52 
UI¡_t
 
i
 = 0; i < 
mvaVÆues
.
	`size
(); i++) {

53 i‡(
mvaT¨gës
[
i
]) {

54 
fMvaSig«l
.
	`push_back
(
mvaVÆues
[
i
]);

55 
fMvaSig«lWeights
.
	`push_back
(
mvaWeights
[
i
]);

57 
fMvaBackground
.
	`push_back
(
mvaVÆues
[
i
]);

58 
fMvaBackgroundWeights
.
	`push_back
(
mvaWeights
[
i
]);

61 
	}
}

66 
	gTMVA
::
ROCCurve
::ROCCurve(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaVÆues
, c⁄° std::ve˘‹<
Boﬁ_t
> &
mvaT¨gës
)

67 : 
fLoggî
(
√w
 
TMVA
::
MsgLoggî
("ROCCurve")), 
	$fGøph
(
NULL
)

69 
	`as£π
(
mvaVÆues
.
	`size
(Ë=
mvaT¨gës
.size());

71 
UI¡_t
 
i
 = 0; i < 
mvaVÆues
.
	`size
(); i++) {

72 i‡(
mvaT¨gës
[
i
]) {

73 
fMvaSig«l
.
	`push_back
(
mvaVÆues
[
i
]);

75 
fMvaBackground
.
	`push_back
(
mvaVÆues
[
i
]);

78 
	}
}

83 
	gTMVA
::
ROCCurve
::ROCCurve(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaSig«l
, c⁄° std::ve˘‹<Flﬂt_t> &
mvaBackground
)

84 : 
fLoggî
(
√w
 
TMVA
::
MsgLoggî
("ROCCurve")), 
	$fGøph
(
NULL
)

86 
fMvaSig«l
 = 
mvaSig«l
;

87 
fMvaBackground
 = 
mvaBackground
;

88 
	}
}

93 
	gTMVA
::
ROCCurve
::ROCCurve(c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaSig«l
, c⁄° std::ve˘‹<Flﬂt_t> &
mvaBackground
,

94 c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
> &
mvaSig«lWeights
, c⁄° std::ve˘‹<Flﬂt_t> &
mvaBackgroundWeights
)

95 : 
	$ROCCurve
(
mvaSig«l
, 
mvaBackground
)

97 
	`as£π
(
mvaSig«l
.
	`size
(Ë=
mvaSig«lWeights
.size());

98 
	`as£π
(
mvaBackground
.
	`size
(Ë=
mvaBackgroundWeights
.size());

100 
fMvaSig«lWeights
 = 
mvaSig«lWeights
;

101 
fMvaBackgroundWeights
 = 
mvaBackgroundWeights
;

102 
	}
}

107 
	gTMVA
::
ROCCurve
::~
	$ROCCurve
() {

108 
dñëe
 
fLoggî
;

109 if(
fGøph
Ë
dñëe
 fGraph;

110 
	}
}

115 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
ROCCurve
::
	$CompuãS≥cificôy
(c⁄° 
UI¡_t
 
num_poöts
)

117 i‡(
num_poöts
 <= 2) {

121 
UI¡_t
 
num_divisi⁄s
 = 
num_poöts
 - 1;

122 
°d
::
ve˘‹
<
DoubÀ_t
> 
•ecificôy_ve˘‹
;

123 
•ecificôy_ve˘‹
.
	`push_back
(0.0);

125 
DoubÀ_t
 
thªshﬁd
 = -1.0;Åhªshﬁd < 1.0;Åhªshﬁd +(1.0 / 
num_divisi⁄s
)) {

126 
DoubÀ_t
 
Ál£_posôives
 = 0.0;

127 
DoubÀ_t
 
åue_√g©ives
 = 0.0;

129 
size_t
 
i
 = 0; i < 
fMvaBackground
.
	`size
(); ++i) {

130 autÿ
vÆue
 = 
fMvaBackground
.
	`©
(
i
);

131 autÿ
weight
 = 
fMvaBackgroundWeights
.
	`em±y
(Ë? (1.0Ë: fMvaBackgroundWeights.
	`©
(
i
);

133 i‡(
vÆue
 > 
thªshﬁd
) {

134 
Ál£_posôives
 +
weight
;

136 
åue_√g©ives
 +
weight
;

140 
DoubÀ_t
 
tŸÆ_background
 = 
Ál£_posôives
 + 
åue_√g©ives
;

141 
DoubÀ_t
 
•ecificôy
 =

142 (
tŸÆ_background
 <
°d
::
numîic_limôs
<
DoubÀ_t
>::
	`mö
()Ë? (0.0Ë: (
åue_√g©ives
 /Åotal_background);

144 
•ecificôy_ve˘‹
.
	`push_back
(
•ecificôy
);

147 
•ecificôy_ve˘‹
.
	`push_back
(1.0);

148  
•ecificôy_ve˘‹
;

149 
	}
}

154 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
ROCCurve
::
	$CompuãSísôivôy
(c⁄° 
UI¡_t
 
num_poöts
)

156 i‡(
num_poöts
 <= 2) {

160 
UI¡_t
 
num_divisi⁄s
 = 
num_poöts
 - 1;

161 
°d
::
ve˘‹
<
DoubÀ_t
> 
£nsôivôy_ve˘‹
;

162 
£nsôivôy_ve˘‹
.
	`push_back
(1.0);

164 
DoubÀ_t
 
thªshﬁd
 = -1.0;Åhªshﬁd < 1.0;Åhªshﬁd +(1.0 / 
num_divisi⁄s
)) {

165 
DoubÀ_t
 
åue_posôives
 = 0.0;

166 
DoubÀ_t
 
Ál£_√g©ives
 = 0.0;

168 
size_t
 
i
 = 0; i < 
fMvaSig«l
.
	`size
(); ++i) {

169 autÿ
vÆue
 = 
fMvaSig«l
.
	`©
(
i
);

170 autÿ
weight
 = 
fMvaSig«lWeights
.
	`em±y
(Ë? (1.0Ë: fMvaSig«lWeights.
	`©
(
i
);

172 i‡(
vÆue
 > 
thªshﬁd
) {

173 
åue_posôives
 +
weight
;

175 
Ál£_√g©ives
 +
weight
;

179 
DoubÀ_t
 
tŸÆ_sig«l
 = 
åue_posôives
 + 
Ál£_√g©ives
;

180 
DoubÀ_t
 
£nsôivôy
 =

181 (
tŸÆ_sig«l
 <
°d
::
numîic_limôs
<
DoubÀ_t
>::
	`mö
()Ë? (0.0Ë: (
åue_posôives
 /Åotal_signal);

182 
£nsôivôy_ve˘‹
.
	`push_back
(
£nsôivôy
);

185 
£nsôivôy_ve˘‹
.
	`push_back
(0.0);

186  
£nsôivôy_ve˘‹
;

187 
	}
}

199 
DoubÀ_t
 
	gTMVA
::
ROCCurve
::
	$GëEffSF‹EffB
(
DoubÀ_t
 
effB
, c⁄° 
UI¡_t
 
num_poöts
)

201 
	`as£π
(0.0 <
effB
 
™d
ÉffB <= 1.0);

203 autÿ
effS_vec
 = 
	`CompuãSísôivôy
(
num_poöts
);

204 autÿ
effB_vec
 = 
	`CompuãS≥cificôy
(
num_poöts
);

207 autÿ
com∂emít
 = [](
DoubÀ_t
 
x
) {  1 - x; };

208 
°d
::
	`å™sf‹m
(
effB_vec
.
	`begö
(),ÉffB_vec.
	`íd
(),ÉffB_vec.begö(), 
com∂emít
);

211 
°d
::
	`ªvî£
(
effS_vec
.
	`begö
(),ÉffS_vec.
	`íd
());

212 
°d
::
	`ªvî£
(
effB_vec
.
	`begö
(),ÉffB_vec.
	`íd
());

214 
TGøph
 *
gøph
 = 
√w
 
	`TGøph
(
effS_vec
.
	`size
(), &
effB_vec
[0], &effS_vec[0]);

217 
TS∂öe1
 
rocS∂öe
 = 
	`TS∂öe1
("", 
gøph
);

218  
rocS∂öe
.
	`EvÆ
(
effB
);

219 
	}
}

230 
DoubÀ_t
 
	gTMVA
::
ROCCurve
::
	$GëROCI¡egøl
(c⁄° 
UI¡_t
 
num_poöts
)

232 autÿ
£nsôivôy
 = 
	`CompuãSísôivôy
(
num_poöts
);

233 autÿ
•ecificôy
 = 
	`CompuãS≥cificôy
(
num_poöts
);

235 
DoubÀ_t
 
öãgøl
 = 0.0;

236 
UI¡_t
 
i
 = 0; i < 
£nsôivôy
.
	`size
() - 1; i++) {

238 
DoubÀ_t
 
cuºFƒ
 = 1 - 
£nsôivôy
[
i
];

239 
DoubÀ_t
 
√xtFƒ
 = 1 - 
£nsôivôy
[
i
 + 1];

241 
öãgøl
 +0.5 * (
√xtFƒ
 - 
cuºFƒ
Ë* (
•ecificôy
[
i
] + specificity[i + 1]);

244  
öãgøl
;

245 
	}
}

256 
TGøph
 *
	gTMVA
::
ROCCurve
::
	$GëROCCurve
(c⁄° 
UI¡_t
 
num_poöts
)

258 i‡(
fGøph
 !
nuŒ±r
) {

259 
dñëe
 
fGøph
;

262 autÿ
£nsôivôy
 = 
	`CompuãSísôivôy
(
num_poöts
);

263 autÿ
•ecificôy
 = 
	`CompuãS≥cificôy
(
num_poöts
);

265 
fGøph
 = 
√w
 
	`TGøph
(
£nsôivôy
.
	`size
(), &£nsôivôy[0], &
•ecificôy
[0]);

267  
fGøph
;

268 
	}
}

	@src/Ranking.cxx

32 
	~"TMVA/R™kög.h
"

34 
	~"TMVA/MsgLoggî.h
"

35 
	~"TMVA/Ty≥s.h
"

37 
	~"TSåög.h
"

39 
	~<iom™ù
>

41 
CœssImp
(
TMVA
::
R™kög
);

46 
	gTMVA
::
R™kög
::
	$R™kög
()

47 : 
	`fR™kög
(),

48 
	`fC⁄ãxt
(""),

49 
	`fR™kögDis¸imö©‹Name
( "" ),

50 
	`fLoggî
–
√w
 
	`MsgLoggî
("", 
kINFO
) )

52 
	}
}

57 
	gTMVA
::
R™kög
::
	$R™kög
–c⁄° 
TSåög
& 
c⁄ãxt
, c⁄° TSåög& 
ønkögDis¸imö©‹Name
 )

58 : 
	`fR™kög
(),

59 
	`fC⁄ãxt
–
c⁄ãxt
 ),

60 
	`fR™kögDis¸imö©‹Name
–
ønkögDis¸imö©‹Name
 ),

61 
	`fLoggî
–
√w
 
	`MsgLoggî
(
fC⁄ãxt
.
	`D©a
(), 
kINFO
) )

63 
	}
}

68 
	gTMVA
::
R™kög
::~
	$R™kög
()

70 
fR™kög
.
	`˛ór
();

71 
dñëe
 
fLoggî
;

72 
	}
}

76 
	gTMVA
::
R™kög
::
	$SëC⁄ãxt
–c⁄° 
TSåög
& 
c⁄ãxt
)

78 
fC⁄ãxt
 = 
c⁄ãxt
;

79 
fLoggî
->
	`SëSour˚
–
fC⁄ãxt
.
	`D©a
() );

80 
	}
}

86 
	gTMVA
::
R™kög
::
	$AddR™k
–c⁄° 
R™k
& 
ønk
 )

93 
fR™kög
.
	`push_back
–
ønk
 );

95 
UI¡_t
 
sizeoÁºay
=
fR™kög
.
	`size
();

96 
R™k
 
	`ãmp
(
fR™kög
[0]);

97 
UI¡_t
 
i
=0; i<
sizeoÁºay
; i++) {

98 
UI¡_t
 
j
=
sizeoÁºay
-1; j>
i
; j--) {

99 i‡(
fR™kög
[
j
-1] < fRanking[j]) {

100 
ãmp
 = 
fR™kög
[
j
-1];fRanking[j-1] = fRanking[j]; fRanking[j] =Åemp;

105 
UI¡_t
 
i
=0; i<
fR™kög
.
	`size
(); i++ËfR™kög[i].
	`SëR™k
( i+1 );

106 
	}
}

111 
	gTMVA
::
R™kög
::
	$Pröt
() const

113 
I¡_t
 
maxL
 = 0;

114 
°d
::
ve˘‹
<
R™k
>::
c⁄°_ôî©‹
 
ú
 = 
fR™kög
.
	`begö
(); i∏!fR™kög.
	`íd
(); ir++ )

115 i‡((*
ú
).
	`GëV¨übÀ
().
	`Lígth
(Ë> 
maxL
) maxL = (*ir).GetVariable().Length();

117 
TSåög
 
hlöe
 = "";

118 
I¡_t
 
i
=0; i<
maxL
+15+
fR™kögDis¸imö©‹Name
.
	`Lígth
(); i++Ë
hlöe
 += "-";

119 
	`Log
(Ë<< 
kHEADER
 << "R™kögÑesu… (t› v¨übÀ i†be°Ñ™ked)" << 
Endl
;

120 
	`Log
(Ë<< 
kINFO
 << 
hlöe
 << 
Endl
;

121 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
)

122 << 
°d
::
	`£tw
(5) << "Rank : "

123 << 
°d
::
	`£tw
(
maxL
+0) << "Variable "

124 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
)

125 << " : " << 
fR™kögDis¸imö©‹Name
 << 
Endl
;

126 
	`Log
(Ë<< 
kINFO
 << 
hlöe
 << 
Endl
;

127 
°d
::
ve˘‹
<
R™k
>::
c⁄°_ôî©‹
 
ú
 = 
fR™kög
.
	`begö
(); i∏!fR™kög.
	`íd
(); ir++ ) {

128 
	`Log
(Ë<< 
kINFO


129 << 
	`F‹m
–"%4ò: ",(*
ú
).
	`GëR™k
() )

130 << 
°d
::
	`£tw
(
TM©h
::
	`Max
(
maxL
+0,9)Ë<< (*
ú
).
	`GëV¨übÀ
().
	`D©a
()

131 << 
	`F‹m
–" : %3.3e", (*
ú
).
	`GëR™kVÆue
(ËË<< 
Endl
;

133 
	`Log
(Ë<< 
kINFO
 << 
hlöe
 << 
Endl
;

134 
	}
}

139 
	gTMVA
::
R™k
::
	$R™k
–c⁄° 
TSåög
& 
v¨übÀ
, 
DoubÀ_t
 
ønkVÆue
 )

140 : 
	`fV¨übÀ
–
v¨übÀ
 ),

141 
	`fR™kVÆue
–
ønkVÆue
 ),

142 
	`fR™k
( -1 )

144 
	}
}

149 
	gTMVA
::
R™k
::~
	$R™k
()

151 
	}
}

156 
Boﬁ_t
 
TMVA
::
R™k
::
›î©‹
< ( c⁄° R™k& 
Ÿhî
 ) const

158 i‡(
fR™kVÆue
 < 
Ÿhî
.fR™kVÆueË 
åue
;

159  
	gÁl£
;

165 
Boﬁ_t
 
	gTMVA
::
R™k
::
›î©‹
> ( c⁄° R™k& 
Ÿhî
 ) const

167 i‡(
fR™kVÆue
 > 
Ÿhî
.fR™kVÆueË 
åue
;

168  
	gÁl£
;

	@src/Reader.cxx

91 
	~"TMVA/Ródî.h
"

93 
	~"TMVA/C⁄fig.h
"

94 
	~"TMVA/C⁄figuøbÀ.h
"

95 
	~"TMVA/CœssifõrFa˘‹y.h
"

96 
	~"TMVA/D©aI≈utH™dÀr.h
"

97 
	~"TMVA/D©aSëInfo.h
"

98 
	~"TMVA/D©aSëM™agî.h
"

99 
	~"TMVA/IMëhod.h
"

100 
	~"TMVA/MëhodBa£.h
"

101 
	~"TMVA/MëhodCuts.h
"

102 
	~"TMVA/MëhodC©eg‹y.h
"

103 
	~"TMVA/MsgLoggî.h
"

104 
	~"TMVA/Toﬁs.h
"

105 
	~"TMVA/Ty≥s.h
"

107 
	~"TTªe.h
"

108 
	~"TLóf.h
"

109 
	~"TSåög.h
"

110 
	~"TCœss.h
"

111 
	~"TH1D.h
"

112 
	~"TKey.h
"

113 
	~"TVe˘‹.h
"

114 
	~"TXMLEngöe.h
"

115 
	~"TM©h.h
"

117 
	~<c°dlib
>

119 
	~<°rög
>

120 
	~<ve˘‹
>

121 
	~<f°ªam
>

123 
	~<io°ªam
>

128 
	gTMVA
::
Ródî
::
	$Ródî
–c⁄° 
TSåög
& 
theO±i⁄
, 
Boﬁ_t
 
vîbo£
 )

129 : 
	`C⁄figuøbÀ
–
theO±i⁄
 ),

130 
	`fD©aSëM™agî
–
NULL
 ),

131 
	`fD©aSëInfo
(),

132 
	`fVîbo£
–
vîbo£
 ),

133 
	`fSûít
 ( 
kFALSE
 ),

134 
	`fCﬁ‹
 ( 
kFALSE
 ),

135 
	`fCÆcuœãEº‹
(
kFALSE
),

136 
	`fMvaEvítEº‹
( 0 ),

137 
	`fMvaEvítEº‹Uµî
( 0 ),

138 
	$fLoggî
 ( 0 )

140 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–
fD©aI≈utH™dÀr
 );

141 
fD©aSëM™agî
->
	`AddD©aSëInfo
(
fD©aSëInfo
);

142 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

143 
	`SëC⁄figName
–
	`GëName
() );

144 
	`De˛¨eO±i⁄s
();

145 
	`P¨£O±i⁄s
();

147 
	`Inô
();

148 
	}
}

153 
	gTMVA
::
Ródî
::Ródî–
°d
::
ve˘‹
<
TSåög
>& 
öputV¨s
, c⁄° TSåög& 
theO±i⁄
, 
Boﬁ_t
 
vîbo£
 )

154 : 
C⁄figuøbÀ
–
theO±i⁄
 ),

155 
fD©aSëM™agî
–
NULL
 ),

156 
fD©aSëInfo
(),

157 
fVîbo£
–
vîbo£
 ),

158 
fSûít
 ( 
kFALSE
 ),

159 
fCﬁ‹
 ( 
kFALSE
 ),

160 
fCÆcuœãEº‹
(
kFALSE
),

161 
fMvaEvítEº‹
( 0 ),

162 
fMvaEvítEº‹Uµî
( 0 ),

163 
	$fLoggî
 ( 0 )

165 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–
fD©aI≈utH™dÀr
 );

166 
fD©aSëM™agî
->
	`AddD©aSëInfo
(
fD©aSëInfo
);

167 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

168 
	`SëC⁄figName
–
	`GëName
() );

169 
	`De˛¨eO±i⁄s
();

170 
	`P¨£O±i⁄s
();

174 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
iv¨
 = 
öputV¨s
.
	`begö
(); iv¨ !öputV¨s.
	`íd
(); ivar++)

175 
	`D©aInfo
().
	`AddV¨übÀ
–*
iv¨
 );

177 
	`Inô
();

178 
	}
}

183 
	gTMVA
::
Ródî
::Ródî–
°d
::
ve˘‹
<°d::
°rög
>& 
öputV¨s
, c⁄° 
TSåög
& 
theO±i⁄
, 
Boﬁ_t
 
vîbo£
 )

184 : 
C⁄figuøbÀ
–
theO±i⁄
 ),

185 
fD©aSëM™agî
–
NULL
 ),

186 
fD©aSëInfo
(),

187 
fVîbo£
–
vîbo£
 ),

188 
fSûít
 ( 
kFALSE
 ),

189 
fCﬁ‹
 ( 
kFALSE
 ),

190 
fCÆcuœãEº‹
(
kFALSE
),

191 
fMvaEvítEº‹
( 0 ),

192 
fMvaEvítEº‹Uµî
( 0 ),

193 
	$fLoggî
 ( 0 )

195 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–
fD©aI≈utH™dÀr
 );

196 
fD©aSëM™agî
->
	`AddD©aSëInfo
(
fD©aSëInfo
);

197 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

198 
	`SëC⁄figName
–
	`GëName
() );

199 
	`De˛¨eO±i⁄s
();

200 
	`P¨£O±i⁄s
();

204 
°d
::
ve˘‹
<°d::
°rög
>::
ôî©‹
 
iv¨
 = 
öputV¨s
.
	`begö
(); iv¨ !öputV¨s.
	`íd
(); ivar++)

205 
	`D©aInfo
().
	`AddV¨übÀ
–
iv¨
->
	`c_°r
() );

207 
	`Inô
();

208 
	}
}

213 
	gTMVA
::
Ródî
::
	$Ródî
–c⁄° 
°d
::
°rög
& 
v¨Names
, c⁄° 
TSåög
& 
theO±i⁄
, 
Boﬁ_t
 
vîbo£
 )

214 : 
	`C⁄figuøbÀ
–
theO±i⁄
 ),

215 
	`fD©aSëM™agî
–
NULL
 ),

216 
	`fD©aSëInfo
(),

217 
	`fVîbo£
–
vîbo£
 ),

218 
	`fSûít
 ( 
kFALSE
 ),

219 
	`fCﬁ‹
 ( 
kFALSE
 ),

220 
	`fCÆcuœãEº‹
(
kFALSE
),

221 
	`fMvaEvítEº‹
( 0 ),

222 
	`fMvaEvítEº‹Uµî
( 0 ),

223 
	$fLoggî
 ( 0 )

225 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–
fD©aI≈utH™dÀr
 );

226 
fD©aSëM™agî
->
	`AddD©aSëInfo
(
fD©aSëInfo
);

227 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

228 
	`SëC⁄figName
–
	`GëName
() );

229 
	`De˛¨eO±i⁄s
();

230 
	`P¨£O±i⁄s
();

234 
	`DecodeV¨Names
(
v¨Names
);

235 
	`Inô
();

236 
	}
}

241 
	gTMVA
::
Ródî
::
	$Ródî
–c⁄° 
TSåög
& 
v¨Names
, c⁄° TSåög& 
theO±i⁄
, 
Boﬁ_t
 
vîbo£
 )

242 : 
	`C⁄figuøbÀ
–
theO±i⁄
 ),

243 
	`fD©aSëM™agî
–
NULL
 ),

244 
	`fD©aSëInfo
(),

245 
	`fVîbo£
–
vîbo£
 ),

246 
	`fSûít
 ( 
kFALSE
 ),

247 
	`fCﬁ‹
 ( 
kFALSE
 ),

248 
	`fCÆcuœãEº‹
(
kFALSE
),

249 
	`fMvaEvítEº‹
( 0 ),

250 
	`fMvaEvítEº‹Uµî
( 0 ),

251 
	$fLoggî
 ( 0 )

253 
fD©aSëM™agî
 = 
√w
 
	`D©aSëM™agî
–
fD©aI≈utH™dÀr
 );

254 
fD©aSëM™agî
->
	`AddD©aSëInfo
(
fD©aSëInfo
);

255 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
);

256 
	`SëC⁄figName
–
	`GëName
() );

257 
	`De˛¨eO±i⁄s
();

258 
	`P¨£O±i⁄s
();

262 
	`DecodeV¨Names
(
v¨Names
);

263 
	`Inô
();

264 
	}
}

269 
	gTMVA
::
Ródî
::
	$De˛¨eO±i⁄s
()

271 i‡(
	`gToﬁs
().
	`CheckF‹SûítO±i⁄
–
	`GëO±i⁄s
(Ë)Ë
	`Log
().
	`InhibôOuçut
();

273 
	`De˛¨eO±i⁄Ref
–
fVîbo£
, "V", "Verbose flag" );

274 
	`De˛¨eO±i⁄Ref
–
fCﬁ‹
, "Color", "Color flag (default True)" );

275 
	`De˛¨eO±i⁄Ref
–
fSûít
, "Silent", "Boolean silent flag (default False)" );

276 
	`De˛¨eO±i⁄Ref
–
fCÆcuœãEº‹
, "Error", "CalculatesÉrrors (default False)" );

277 
	}
}

282 
	gTMVA
::
Ródî
::~
	$Ródî
( )

284 
dñëe
 
fD©aSëM™agî
;

286 
dñëe
 
fLoggî
;

288 autÿ
ô
=
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++){

289 
MëhodBa£
 * 
kl
 = 
dy«mic_ˇ°
<
TMVA
::MëhodBa£*>(
ô
->
£c⁄d
);

290 
dñëe
 
kl
;

292 
	}
}

297 
	gTMVA
::
Ródî
::
	$Inô
( )

299 i‡(
	`Vîbo£
()Ë
fLoggî
->
	`SëMöTy≥
–
kVERBOSE
 );

301 
	`gC⁄fig
().
	`SëU£Cﬁ‹
–
fCﬁ‹
 );

302 
	`gC⁄fig
().
	`SëSûít
 ( 
fSûít
 );

303 
	}
}

308 
	gTMVA
::
Ródî
::
	$AddV¨übÀ
–c⁄° 
TSåög
& 
ex¥essi⁄
, 
Flﬂt_t
* 
d©Æök
 )

310 
	`D©aInfo
().
	`AddV¨übÀ
–
ex¥essi⁄
, "", "", 0, 0, 'F', 
kFALSE
 ,(*)
d©Æök
 );

311 
	}
}

315 
	gTMVA
::
Ródî
::
	$AddV¨übÀ
–c⁄° 
TSåög
& 
ex¥essi⁄
, 
I¡_t
* 
d©Æök
 )

317 
	`Log
(Ë<< 
kFATAL
 << "Ródî::AddV¨übÀ–c⁄° TSåög&Éx¥essi⁄, I¡_t* d©Æök ),Åhi†fun˘i⁄ i†dïªˇãd,ÖÀa£ÖrovidêÆ»v¨übÀ†tÿthêªadîá†Êﬂts" << 
Endl
;

319 
	`Log
(Ë<< 
kFATAL
 << "Ródî::AddV¨übÀ–c⁄° TSåög&Éx¥essi⁄, I¡_t* d©Æök ),Åhi†fun˘i⁄ i†dïªˇãd,ÖÀa£ÖrovidêÆ»v¨übÀ†tÿthêªadîá†Êﬂts" << 
Endl
;

320 
	`D©aInfo
().
	`AddV¨übÀ
(
ex¥essi⁄
, "", "", 0, 0, 'I', 
kFALSE
, (*)
d©Æök
 );

321 
	}
}

326 
	gTMVA
::
Ródî
::
	$AddS≥˘©‹
–c⁄° 
TSåög
& 
ex¥essi⁄
, 
Flﬂt_t
* 
d©Æök
 )

328 
	`D©aInfo
().
	`AddS≥˘©‹
–
ex¥essi⁄
, "", "", 0, 0, 'F', 
kFALSE
 ,(*)
d©Æök
 );

329 
	}
}

334 
	gTMVA
::
Ródî
::
	$AddS≥˘©‹
–c⁄° 
TSåög
& 
ex¥essi⁄
, 
I¡_t
* 
d©Æök
 )

336 
	`D©aInfo
().
	`AddS≥˘©‹
(
ex¥essi⁄
, "", "", 0, 0, 'I', 
kFALSE
, (*)
d©Æök
 );

337 
	}
}

342 
TSåög
 
	gTMVA
::
Ródî
::
	$GëMëhodTy≥FromFûe
–c⁄° 
TSåög
& 
fûíame
 )

344 
°d
::
if°ªam
 
	`fö
–
fûíame
 );

345 i‡(!
fö
.
	`good
()) {

346 
	`Log
(Ë<< 
kFATAL
 << "<BookMVA> fatalÉrror: "

347 << "u«bÀÅÿ›í i≈uàweighàfûe: " << 
fûíame
 << 
Endl
;

350 
TSåög
 
	`fuŒMëhodName
("");

351 i‡(
fûíame
.
	`EndsWôh
(".xml")) {

352 
fö
.
	`˛o£
();

353 #i‡
ROOT_VERSION_CODE
 >
	`ROOT_VERSION
(5,29,0)

354 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`P¨£Fûe
(
fûíame
,gToﬁs().
	`xmÀngöebuf„rsize
());

356 * 
doc
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`P¨£Fûe
(
fûíame
);

358 * 
roŸnode
 = 
	`gToﬁs
().
	`xmÀngöe
().
	`DocGëRoŸEÀmít
(
doc
);

359 
	`gToﬁs
().
	`RódAâr
(
roŸnode
, "Mëhod", 
fuŒMëhodName
);

360 
	`gToﬁs
().
	`xmÀngöe
().
	`FªeDoc
(
doc
);

363 
buf
[512];

364 
fö
.
	`gëlöe
(
buf
,512);

365 !
	`TSåög
(
buf
).
	`BegösWôh
("Mëhod")Ë
fö
.
	`gëlöe
(buf,512);

366 
fuŒMëhodName
 = 
	`TSåög
(
buf
);

367 
fö
.
	`˛o£
();

369 
TSåög
 
mëhodTy≥
 = 
	`fuŒMëhodName
(0,
fuŒMëhodName
.
	`Index
("::"));

370 i‡(
mëhodTy≥
.
	`C⁄èös
(" ")ËmëhodTy≥ = 
	`mëhodTy≥
(mëhodTy≥.
	`La°
(' ')+1,mëhodTy≥.
	`Lígth
());

371  
mëhodTy≥
;

372 
	}
}

377 
	gTMVA
::
IMëhod
* 
TMVA
::
Ródî
::
	$BookMVA
–c⁄° 
TSåög
& 
mëhodTag
, c⁄° TSåög& 
weightfûe
 )

380 i‡(
fMëhodM≠
.
	`föd
–
mëhodTag
 ) !fMëhodM≠.
	`íd
())

381 
	`Log
(Ë<< 
kFATAL
 << "<BookMVA> mëhodÅag \"" << 
mëhodTag
 << "\"áÃódyÉxi°s!" << 
Endl
;

383 
TSåög
 
	`mëhodTy≥
(
	`GëMëhodTy≥FromFûe
(
weightfûe
));

385 
	`Log
(Ë<< 
kINFO
 << "Bookög \"" << 
mëhodTag
 << "\" o‡ty≥ \"" << 
mëhodTy≥
 << "\" from " << 
weightfûe
 << "." << 
Endl
;

387 
MëhodBa£
* 
mëhod
 = 
dy«mic_ˇ°
<MëhodBa£*>(
this
->
	`BookMVA
–
Ty≥s
::
	`In°™˚
().
	`GëMëhodTy≥
(
mëhodTy≥
),

388 
weightfûe
 ) );

389 if–
mëhod
 && mëhod->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
 ){

390 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
mëhod
));

391 if–!
mëhC©
 )

392 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Ródî" << 
Endl
;

393 
mëhC©
->
fD©aSëM™agî
 = fDataSetManager;

396  
fMëhodM≠
[
mëhodTag
] = 
mëhod
;

397 
	}
}

402 
	gTMVA
::
IMëhod
* 
TMVA
::
Ródî
::
	$BookMVA
–
TMVA
::
Ty≥s
::
EMVA
 
mëhodTy≥
, c⁄° 
TSåög
& 
weightfûe
 )

404 
IMëhod
* 
im
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
(
°d
::
	`°rög
(
Ty≥s
::In°™˚().
	`GëMëhodName
–
mëhodTy≥
 )),

405 
	`D©aInfo
(), 
weightfûe
 );

407 
MëhodBa£
 *
mëhod
 = (
dy«mic_ˇ°
<MëhodBa£*>(
im
));

409 i‡(
mëhod
==0Ë 
im
;

411 if–
mëhod
->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
 ){

412 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
mëhod
));

413 if–!
mëhC©
 )

414 
	`Log
(Ë<< 
kERROR
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Ródî" << 
Endl
;

415 
mëhC©
->
fD©aSëM™agî
 = fDataSetManager;

418 
mëhod
->
	`SëupMëhod
();

422 
mëhod
->
	`De˛¨eCom∑tibûôyO±i⁄s
();

425 
mëhod
->
	`RódSèãFromFûe
();

428 
mëhod
->
	`CheckSëup
();

430 
	`Log
(Ë<< 
kINFO
 << "Booked cœssifõ∏\"" << 
mëhod
->
	`GëMëhodName
()

431 << "\" o‡ty≥: \"" << 
mëhod
->
	`GëMëhodTy≥Name
(Ë<< "\"" << 
Endl
;

433  
mëhod
;

434 
	}
}

438 
	gTMVA
::
IMëhod
* 
TMVA
::
Ródî
::
	$BookMVA
–
TMVA
::
Ty≥s
::
EMVA
 
mëhodTy≥
, c⁄° * 
xml°r
 )

440 #i‡
ROOT_VERSION_CODE
 >
	`ROOT_VERSION
(5,26,00)

443 
IMëhod
* 
im
 = 
CœssifõrFa˘‹y
::
	`In°™˚
().
	`Cª©e
(
°d
::
	`°rög
(
Ty≥s
::In°™˚().
	`GëMëhodName
–
mëhodTy≥
 )),

444 
	`D©aInfo
(), "" );

446 
MëhodBa£
 *
mëhod
 = (
dy«mic_ˇ°
<MëhodBa£*>(
im
));

448 if(!
mëhod
)  0;

450 if–
mëhod
->
	`GëMëhodTy≥
(Ë=
Ty≥s
::
kC©eg‹y
 ){

451 
MëhodC©eg‹y
 *
mëhC©
 = (
dy«mic_ˇ°
<MëhodC©eg‹y*>(
mëhod
));

452 if–!
mëhC©
 )

453 
	`Log
(Ë<< 
kFATAL
 << "Mëhod wôhÅy≥ kC©eg‹y c™nŸ bêˇ°edÅÿMëhodC©eg‹y. /Ródî" << 
Endl
;

454 
mëhC©
->
fD©aSëM™agî
 = fDataSetManager;

457 
mëhod
->
	`SëupMëhod
();

461 
mëhod
->
	`De˛¨eCom∑tibûôyO±i⁄s
();

464 
mëhod
->
	`RódSèãFromXMLSåög
–
xml°r
 );

467 
mëhod
->
	`CheckSëup
();

469 
	`Log
(Ë<< 
kINFO
 << "Booked cœssifõ∏\"" << 
mëhod
->
	`GëMëhodName
()

470 << "\" o‡ty≥: \"" << 
mëhod
->
	`GëMëhodTy≥Name
(Ë<< "\"" << 
Endl
;

472  
mëhod
;

474 
	`Log
(Ë<< 
kFATAL
 << "Mëhod Ródî::BookMVA(TMVA::Ty≥s::EMVA mëhodTy≥ = " << 
mëhodTy≥


475 << ", c⁄° ch¨* xml°∏" << 
xml°r


476 << " ) i†nŸávaûabÀ f‹ ROOT vîsi⁄†¥i‹Åÿ5.26/00." << 
Endl
;

479 
	}
}

485 
DoubÀ_t
 
	gTMVA
::
Ródî
::
EvÆu©eMVA
–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>& 
öputVec
, c⁄° 
TSåög
& 
mëhodTag
, DoubÀ_à
aux
 )

488 
IMëhod
* 
	gimëh
 = 
FödMVA
–
mëhodTag
 );

489 
MëhodBa£
* 
	gmëh
 = 
dy«mic_ˇ°
<
TMVA
::MëhodBa£*>(
imëh
);

490 if(
	gmëh
==0)  0;

493 
Evít
* 
	gtmpEvít
=
√w
 Evít(
öputVec
, 
D©aInfo
().
GëNV¨übÀs
());

494 
UI¡_t
 
	gi
=0; i<
	göputVec
.
size
(); i++){

495 i‡(
	gTM©h
::
IsNaN
(
öputVec
[
i
])) {

496 
Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN -->Ñëu∫ MVA vÆuê-999, \¿th©'†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

497 
dñëe
 
	gtmpEvít
;

502 i‡(
	gmëh
->
GëMëhodTy≥
(Ë=
TMVA
::
Ty≥s
::
kCuts
) {

503 
TMVA
::
MëhodCuts
* 
mc
 = 
dy«mic_ˇ°
<TMVA::MëhodCuts*>(
mëh
);

504 if(
	gmc
)

505 
	gmc
->
SëTe°Sig«lEfficõncy
–
aux
 );

507 
DoubÀ_t
 
	gvÆ
 = 
mëh
->
GëMvaVÆue
–
tmpEvít
, (
fCÆcuœãEº‹
?&
fMvaEvítEº‹
:0));

508 
dñëe
 
	gtmpEvít
;

509  
	gvÆ
;

516 
DoubÀ_t
 
	gTMVA
::
Ródî
::
EvÆu©eMVA
–c⁄° 
°d
::
ve˘‹
<DoubÀ_t>& 
öputVec
, c⁄° 
TSåög
& 
mëhodTag
, DoubÀ_à
aux
 )

519 if(
	gfTmpEvÆVec
.
size
(Ë!
öputVec
.size())

520 
fTmpEvÆVec
.
ªsize
(
öputVec
.
size
());

522 
UI¡_t
 
	gidx
=0; idx!=
öputVec
.
size
(); idx++ )

523 
	gfTmpEvÆVec
[
idx
]=
öputVec
[idx];

525  
EvÆu©eMVA
–
fTmpEvÆVec
, 
mëhodTag
, 
aux
 );

531 
DoubÀ_t
 
	gTMVA
::
Ródî
::
	$EvÆu©eMVA
–c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
aux
 )

533 
IMëhod
* 
mëhod
 = 0;

535 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

536 i‡(
ô
 =
fMëhodM≠
.
	`íd
()) {

537 
	`Log
(Ë<< 
kINFO
 << "<EvaluateMVA> unknown classifier in map; "

538 << "youÜooked f‹ \"" << 
mëhodTag
 << "\" wôhöávaûabÀ mëhods: " << 
Endl
;

539 
ô
 = 
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++Ë
	`Log
(Ë<< " --> " << it->
fú°
 << 
Endl
;

540 
	`Log
(Ë<< "Check cÆlög såög" << 
kFATAL
 << 
Endl
;

543 
mëhod
 = 
ô
->
£c⁄d
;

545 
MëhodBa£
 * 
kl
 = 
dy«mic_ˇ°
<
TMVA
::MëhodBa£*>(
mëhod
);

547 if(
kl
==0)

548 
	`Log
(Ë<< 
kFATAL
 << 
mëhodTag
 << " i†nŸá mëhod" << 
Endl
;

552 c⁄° 
Evít
* 
ev
 = 
kl
->
	`GëEvít
();

553 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

554 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

555 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN -->Ñëu∫ MVA vÆuê-999, \¿th©'†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

559  
this
->
	`EvÆu©eMVA
–
kl
, 
aux
 );

560 
	}
}

565 
DoubÀ_t
 
	gTMVA
::
Ródî
::
	$EvÆu©eMVA
–
MëhodBa£
* 
mëhod
, 
DoubÀ_t
 
aux
 )

569 i‡(
mëhod
->
	`GëMëhodTy≥
(Ë=
TMVA
::
Ty≥s
::
kCuts
) {

570 
TMVA
::
MëhodCuts
* 
mc
 = 
dy«mic_ˇ°
<TMVA::MëhodCuts*>(
mëhod
);

571 if(
mc
)

572 
mc
->
	`SëTe°Sig«lEfficõncy
–
aux
 );

575  
mëhod
->
	`GëMvaVÆue
–(
fCÆcuœãEº‹
?&
fMvaEvítEº‹
:0),

576 (
fCÆcuœãEº‹
?&
fMvaEvítEº‹Uµî
:0) );

577 
	}
}

582 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
Ródî
::
	$EvÆu©eRegªssi⁄
–c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
aux
 )

584 
IMëhod
* 
mëhod
 = 0;

586 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

587 i‡(
ô
 =
fMëhodM≠
.
	`íd
()) {

588 
	`Log
(Ë<< 
kINFO
 << "<EvaluateMVA> unknown method in map; "

589 << "youÜooked f‹ \"" << 
mëhodTag
 << "\" wôhöávaûabÀ mëhods: " << 
Endl
;

590 
ô
 = 
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++Ë
	`Log
(Ë<< " --> " << it->
fú°
 << 
Endl
;

591 
	`Log
(Ë<< "Check cÆlög såög" << 
kFATAL
 << 
Endl
;

593 
mëhod
 = 
ô
->
£c⁄d
;

595 
MëhodBa£
 * 
kl
 = 
dy«mic_ˇ°
<
TMVA
::MëhodBa£*>(
mëhod
);

597 if(
kl
==0)

598 
	`Log
(Ë<< 
kFATAL
 << 
mëhodTag
 << " i†nŸá mëhod" << 
Endl
;

601 c⁄° 
Evít
* 
ev
 = 
kl
->
	`GëEvít
();

602 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

603 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

604 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN, \¿ªgªssi⁄ vÆue†mighàevÆu©êtÿ.. wh© dÿI know. \¿s‹ryÅhi†w¨nög i†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

608  
this
->
	`EvÆu©eRegªssi⁄
–
kl
, 
aux
 );

609 
	}
}

616 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
Ródî
::
	$EvÆu©eRegªssi⁄
–
MëhodBa£
* 
mëhod
, 
DoubÀ_t
 )

618 c⁄° 
Evít
* 
ev
 = 
mëhod
->
	`GëEvít
();

619 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

620 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

621 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN, \¿ªgªssi⁄ vÆue†mighàevÆu©êtÿ.. wh© dÿI know. \¿s‹ryÅhi†w¨nög i†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

624  
mëhod
->
	`GëRegªssi⁄VÆues
();

625 
	}
}

631 
Flﬂt_t
 
	gTMVA
::
Ródî
::
	$EvÆu©eRegªssi⁄
–
UI¡_t
 
tgtNumbî
, c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
aux
 )

633 
åy
 {

634  
	`EvÆu©eRegªssi⁄
(
mëhodTag
, 
aux
).
	`©
(
tgtNumbî
);

636 
	`ˇtch
 (
°d
::
out_of_ønge
 
e
) {

637 
	`Log
(Ë<< 
kWARNING
 << "Regªssi⁄ couldÇŸ bêevÆu©ed f‹Å¨gë-numbî " << 
tgtNumbî
 << 
Endl
;

640 
	}
}

647 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
Ródî
::
	$EvÆu©eMu…i˛ass
–c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
aux
 )

649 
IMëhod
* 
mëhod
 = 0;

651 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

652 i‡(
ô
 =
fMëhodM≠
.
	`íd
()) {

653 
	`Log
(Ë<< 
kINFO
 << "<EvaluateMVA> unknown method in map; "

654 << "youÜooked f‹ \"" << 
mëhodTag
 << "\" wôhöávaûabÀ mëhods: " << 
Endl
;

655 
ô
 = 
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++Ë
	`Log
(Ë<< " --> " << it->
fú°
 << 
Endl
;

656 
	`Log
(Ë<< "Check cÆlög såög" << 
kFATAL
 << 
Endl
;

658 
mëhod
 = 
ô
->
£c⁄d
;

660 
MëhodBa£
 * 
kl
 = 
dy«mic_ˇ°
<
TMVA
::MëhodBa£*>(
mëhod
);

662 if(
kl
==0)

663 
	`Log
(Ë<< 
kFATAL
 << 
mëhodTag
 << " i†nŸá mëhod" << 
Endl
;

667 c⁄° 
Evít
* 
ev
 = 
kl
->
	`GëEvít
();

668 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

669 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

670 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN, \¿ªgªssi⁄ vÆue†mighàevÆu©êtÿ.. wh© dÿI know. \¿s‹ryÅhi†w¨nög i†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

674  
this
->
	`EvÆu©eMu…i˛ass
–
kl
, 
aux
 );

675 
	}
}

682 c⁄° 
	g°d
::
ve˘‹
< 
Flﬂt_t
 >& 
TMVA
::
Ródî
::
	$EvÆu©eMu…i˛ass
–
MëhodBa£
* 
mëhod
, 
DoubÀ_t
 )

684 c⁄° 
Evít
* 
ev
 = 
mëhod
->
	`GëEvít
();

685 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

686 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

687 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN, \¿ªgªssi⁄ vÆue†mighàevÆu©êtÿ.. wh© dÿI know. \¿s‹ryÅhi†w¨nög i†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

690  
mëhod
->
	`GëMu…i˛assVÆues
();

691 
	}
}

697 
Flﬂt_t
 
	gTMVA
::
Ródî
::
	$EvÆu©eMu…i˛ass
–
UI¡_t
 
˛sNumbî
, c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
aux
 )

699 
åy
 {

700  
	`EvÆu©eMu…i˛ass
(
mëhodTag
, 
aux
).
	`©
(
˛sNumbî
);

702 
	`ˇtch
 (
°d
::
out_of_ønge
 
e
) {

703 
	`Log
(Ë<< 
kWARNING
 << "Mu…i˛as†couldÇŸ bêevÆu©ed f‹ cœss-numbî " << 
˛sNumbî
 << 
Endl
;

706 
	}
}

712 
	gTMVA
::
IMëhod
* 
TMVA
::
Ródî
::
	$FödMVA
–c⁄° 
TSåög
& 
mëhodTag
 )

714 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

715 i‡(
ô
 !
fMëhodM≠
.
	`íd
()Ë it->
£c⁄d
;

716 
	`Log
(Ë<< 
kERROR
 << "Mëhod " << 
mëhodTag
 << "ÇŸ found!" << 
Endl
;

718 
	}
}

724 
	gTMVA
::
MëhodCuts
* 
TMVA
::
Ródî
::
	$FödCutsMVA
–c⁄° 
TSåög
& 
mëhodTag
 )

726  
dy«mic_ˇ°
<
MëhodCuts
*>(
	`FödMVA
(
mëhodTag
));

727 
	}
}

732 
DoubÀ_t
 
	gTMVA
::
Ródî
::
	$GëProba
–c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
≠_sig
, DoubÀ_à
mvaVÆ
 )

734 
IMëhod
* 
mëhod
 = 0;

735 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

736 i‡(
ô
 =
fMëhodM≠
.
	`íd
()) {

737 
ô
 = 
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++Ë
	`Log
(Ë<< "M" << it->
fú°
 << 
Endl
;

738 
	`Log
(Ë<< 
kFATAL
 << "<EvÆu©eMVA> unknow¿˛assifõ∏ö m≠: " << 
mëhod
 << "; "

739 << "youÜooked f‹ " << 
mëhodTag
<< " whûêthêavaûabÀ mëhod†¨ê: " << 
Endl
;

741 
mëhod
 = 
ô
->
£c⁄d
;

743 
MëhodBa£
* 
kl
 = 
dy«mic_ˇ°
<MëhodBa£*>(
mëhod
);

744 if(
kl
==0)  -1;

747 c⁄° 
Evít
* 
ev
 = 
kl
->
	`GëEvít
();

748 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

749 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

750 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN -->Ñëu∫ MVA vÆuê-999, \¿th©'†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

755 i‡(
mvaVÆ
 =-9999999ËmvaVÆ = 
kl
->
	`GëMvaVÆue
();

757  
kl
->
	`GëProba
–
mvaVÆ
, 
≠_sig
 );

758 
	}
}

763 
DoubÀ_t
 
	gTMVA
::
Ródî
::
	$GëR¨ôy
–c⁄° 
TSåög
& 
mëhodTag
, 
DoubÀ_t
 
mvaVÆ
 )

765 
IMëhod
* 
mëhod
 = 0;

766 
°d
::
m≠
<
TSåög
, 
IMëhod
*>::
ôî©‹
 
ô
 = 
fMëhodM≠
.
	`föd
–
mëhodTag
 );

767 i‡(
ô
 =
fMëhodM≠
.
	`íd
()) {

768 
ô
 = 
fMëhodM≠
.
	`begö
(); it!=fMëhodM≠.
	`íd
(); it++Ë
	`Log
(Ë<< "M" << it->
fú°
 << 
Endl
;

769 
	`Log
(Ë<< 
kFATAL
 << "<EvÆu©eMVA> unknow¿˛assifõ∏ö m≠: \"" << 
mëhod
 << "\"; "

770 << "youÜooked f‹ \"" << 
mëhodTag
<< "\" whûêthêavaûabÀ mëhod†¨ê: " << 
Endl
;

772 
mëhod
 = 
ô
->
£c⁄d
;

774 
MëhodBa£
* 
kl
 = 
dy«mic_ˇ°
<MëhodBa£*>(
mëhod
);

775 if(
kl
==0)  -1;

778 c⁄° 
Evít
* 
ev
 = 
kl
->
	`GëEvít
();

779 
UI¡_t
 
i
=0; i<
ev
->
	`GëNV¨übÀs
(); i++){

780 i‡(
TM©h
::
	`IsNaN
(
ev
->
	`GëVÆue
(
i
))) {

781 
	`Log
(Ë<< 
kERROR
 << 
i
 << "-th v¨übÀ o‡thêevíài†NaN -->Ñëu∫ MVA vÆuê-999, \¿th©'†Æ»I c™ do,ÖÀa£ fix o∏ªmovêthi†evít." << 
Endl
;

786 i‡(
mvaVÆ
 =-9999999ËmvaVÆ = 
kl
->
	`GëMvaVÆue
();

788  
kl
->
	`GëR¨ôy
–
mvaVÆ
 );

789 
	}
}

798 
	gTMVA
::
Ródî
::
	$DecodeV¨Names
–c⁄° 
°d
::
°rög
& 
v¨Names
 )

800 
size_t
 
ùos
 = 0, 
f
 = 0;

801 
f
 !
v¨Names
.
	`Àngth
()) {

802 
f
 = 
v¨Names
.
	`föd
–':', 
ùos
 );

803 i‡(
f
 > 
v¨Names
.
	`Àngth
()) f = varNames.length();

804 
°d
::
°rög
 
subs
 = 
v¨Names
.
	`sub°r
–
ùos
, 
f
-ipos ); ipos = f+1;

805 
	`D©aInfo
().
	`AddV¨übÀ
–
subs
.
	`c_°r
() );

807 
	}
}

812 
	gTMVA
::
Ródî
::
	$DecodeV¨Names
–c⁄° 
TSåög
& 
v¨Names
 )

814 
TSåög
 
f‹m©
;

815 
I¡_t
 
n
 = 
v¨Names
.
	`Lígth
();

816 
TSåög
 
f‹m©_obj
;

818 
i
=0; i< 
n
+1 ; i++) {

819 
f‹m©
.
	`Aµíd
(
	`v¨Names
(
i
));

820 i‡(
	`v¨Names
(
i
Ë=':' || i =
n
) {

821 
f‹m©
.
	`Ch›
();

822 
f‹m©_obj
 = 
f‹m©
;

823 
f‹m©_obj
.
	`Rïœ˚AŒ
("@","");

824 
	`D©aInfo
().
	`AddV¨übÀ
–
f‹m©_obj
 );

825 
f‹m©
.
	`Resize
(0);

828 
	}
}

	@src/RegressionVariance.cxx

36 
	~<io°ªam
>

37 
	~"TM©h.h
"

38 
	~"TMVA/Regªssi⁄V¨ün˚.h
"

40 
CœssImp
(
TMVA
::
Regªssi⁄V¨ün˚
);

70 
DoubÀ_t
 
	gTMVA
::
Regªssi⁄V¨ün˚
::
	$GëSï¨©i⁄Gaö
(c⁄° 
DoubÀ_t
 
nLe·
,

71 c⁄° 
DoubÀ_t
 
èrgëLe·
, c⁄° DoubÀ_à
èrgë2Le·
,

72 c⁄° 
DoubÀ_t
 
nTŸ
,

73 c⁄° 
DoubÀ_t
 
èrgëTŸ
, c⁄° DoubÀ_à
èrgë2TŸ
)

76 i‡–
nTŸ
==
nLe·
 ||ÇLeft==0 )  0.;

78 
DoubÀ_t
 
∑ª¡Index
 = 
nTŸ
 * 
this
->
	`GëSï¨©i⁄Index
“TŸ,
èrgëTŸ
,
èrgë2TŸ
);

79 
DoubÀ_t
 
À·Index
 = ( (
nTŸ
 - 
nLe·
Ë* 
this
->
	`GëSï¨©i⁄Index
“TŸ-nLe·,
èrgëTŸ
-
èrgëLe·
,
èrgë2TŸ
-
èrgë2Le·
) );

80 
DoubÀ_t
 
rightIndex
 = 
nLe·
 * 
this
->
	`GëSï¨©i⁄Index
“Le·,
èrgëLe·
,
èrgë2Le·
);

83  (
∑ª¡Index
 - 
À·Index
 - 
rightIndex
)/(parentIndex);

84 
	}
}

89 
DoubÀ_t
 
	gTMVA
::
Regªssi⁄V¨ün˚
::
	$GëSï¨©i⁄Index
(c⁄° 
DoubÀ_t
 
n
,

90 c⁄° 
DoubÀ_t
 
èrgë
, c⁄° DoubÀ_à
èrgë2
)

93  ( 
èrgë2
 - 
èrgë
*èrgë/
n
) /Ç;

95 
	}
}

	@src/Results.cxx

33 
	~"TMVA/Resu…s.h
"

35 
	~"TMVA/MsgLoggî.h
"

36 
	~"TMVA/Ty≥s.h
"

38 
	~"TGøph.h
"

39 
	~"TH1.h
"

40 
	~"TH2.h
"

41 
	~"TLi°.h
"

43 
	~<ve˘‹
>

45 
«me•a˚
 
	gTMVA
 {

46 
˛ass
 
	gD©aSëInfo
;

52 
	gTMVA
::
Resu…s
::
	$Resu…s
–c⁄° 
D©aSëInfo
* 
dsi
, 
TSåög
 
ªsu…sName
 )

53 : 
	`fTªeTy≥
(
Ty≥s
::
kTøöög
),

54 
	`fDsi
(
dsi
),

55 
	`fSt‹age
–
√w
 
	`TLi°
() ),

56 
	`fHi°Alüs
–
√w
 
°d
::
m≠
<
TSåög
, 
TObje˘
*> ),

57 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`F‹m
("Resu…s%s",
ªsu…sName
.
	`D©a
()), 
kINFO
) )

59 
fSt‹age
->
	`SëOw√r
();

60 
	}
}

62 
	gTMVA
::
Resu…s
::
	$Resu…s
( )

63 : 
	`fTªeTy≥
(
Ty≥s
::
kTøöög
),

64 
	`fDsi
(0),

65 
	`fSt‹age
–
√w
 
	`TLi°
() ),

66 
	`fHi°Alüs
–
√w
 
°d
::
m≠
<
TSåög
, 
TObje˘
*> ),

67 
	`fLoggî
–
√w
 
	`MsgLoggî
("Resu…s", 
kINFO
))

69 
fSt‹age
->
	`SëOw√r
();

70 
	}
}

76 
	gTMVA
::
Resu…s
::~
	$Resu…s
()

79 
dñëe
 
fSt‹age
;

80 
dñëe
 
fHi°Alüs
;

81 
dñëe
 
fLoggî
;

82 
	}
}

86 
	gTMVA
::
Resu…s
::
	$St‹e
–
TObje˘
* 
obj
, c⁄° * 
Æüs
 )

88 
TLi°Iãr
 
	`l
(
fSt‹age
);

90 * 
p
 = (*)
	`l
()) {

91 if(
p
==
obj
)

92 *
fLoggî
 << 
kFATAL
 << "Hi°ogømÖoöã∏" << 
p
 << "áÃódyÉxi°†öÑesu…†°‹age" << 
Endl
;

95 
TSåög
 
	`as
(
obj
->
	`GëName
());

96 i‡(
Æüs
!=0Ë
as
=
	`TSåög
(alias);

97 i‡(
fHi°Alüs
->
	`föd
(
as
Ë!fHi°Alüs->
	`íd
()) {

99 *
fLoggî
 << 
kFATAL
 << "Alü†" << 
as
 << "áÃódyÉxi°†öÑesu…†°‹age" << 
Endl
;

101 if–
obj
->
	`InhîôsFrom
(
TH1
::
	`Cœss
()) ) {

102 ((
TH1
*)
obj
)->
	`SëDúe˘‹y
(0);

104 
fSt‹age
->
	`Add
–
obj
 );

105 
fHi°Alüs
->
	`ö£π
(
°d
::
∑ú
<
TSåög
, 
TObje˘
*>(
as
,
obj
));

106 
	}
}

110 
TObje˘
* 
	gTMVA
::
Resu…s
::
	$GëObje˘
(c⁄° 
TSåög
 & 
Æüs
) const

112 
°d
::
m≠
<
TSåög
, 
TObje˘
*>::
ôî©‹
 
ô
 = 
fHi°Alüs
->
	`föd
(
Æüs
);

114 i‡(
ô
 !
fHi°Alüs
->
	`íd
()Ë it->
£c⁄d
;

118 
	}
}

121 
Boﬁ_t
 
	gTMVA
::
Resu…s
::
	$D€sExi°
(c⁄° 
TSåög
 & 
Æüs
) const

123 
TObje˘
* 
ã°
 = 
	`GëObje˘
(
Æüs
);

125  
ã°
;

126 
	}
}

130 
TH1
* 
	gTMVA
::
Resu…s
::
	$GëHi°
(c⁄° 
TSåög
 & 
Æüs
) const

132 
TH1
* 
out
=
dy«mic_ˇ°
<TH1*>(
	`GëObje˘
(
Æüs
));

133 i‡(!
out
Ë
	`Log
(Ë<<
kWARNING
 << "You havêasked f‹ hi°ogøm " << 
Æüs
 << " which d€†nŸ sìmÅÿexi° i¿*Resu…s* .. bëã∏d⁄'àu£ ià" << 
Endl
;

134  
out
;

135 
	}
}

139 
TH2
* 
	gTMVA
::
Resu…s
::
	$GëHi°2D
(c⁄° 
TSåög
 & 
Æüs
) const

141 
TH2
* 
out
=
dy«mic_ˇ°
<TH2*>(
	`GëObje˘
(
Æüs
));

142 i‡(!
out
Ë
	`Log
(Ë<<
kWARNING
 << "You havêasked f‹ 2D hi°ogøm " << 
Æüs
 << " which d€†nŸ sìmÅÿexi° i¿*Resu…s* .. bëã∏d⁄'àu£ ià" << 
Endl
;

143  
out
;

144 
	}
}

147 
TGøph
* 
	gTMVA
::
Resu…s
::
	$GëGøph
(c⁄° 
TSåög
 & 
Æüs
) const

149  (
TGøph
*)
	`GëObje˘
(
Æüs
);

150 
	}
}

156 
	gTMVA
::
Resu…s
::
	$Dñëe
(
O±i⁄_t
 *)

158 
fSt‹age
->
	`Dñëe
();

159 
fHi°Alüs
->
	`˛ór
();

160 
	}
}

	@src/ResultsClassification.cxx

33 
	~"TMVA/Resu…sCœssifiˇti⁄.h
"

35 
	~"TMVA/MsgLoggî.h
"

36 
	~"TMVA/Resu…s.h
"

37 
	~"TMVA/Ty≥s.h
"

39 
	~"TSåög.h
"

41 
	~<ve˘‹
>

43 
«me•a˚
 
	gTMVA
 {

44 
˛ass
 
	gD©aSëInfo
;

51 
	gTMVA
::
Resu…sCœssifiˇti⁄
::
	$Resu…sCœssifiˇti⁄
–c⁄° 
D©aSëInfo
* 
dsi
, 
TSåög
 
ªsu…sName
 )

52 : 
	`Resu…s
–
dsi
,
ªsu…sName
 ),

53 
	`fRë
(1),

54 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`F‹m
("Resu…sCœssifiˇti⁄%s",
ªsu…sName
.
	`D©a
()Ë, 
kINFO
) )

56 
	}
}

61 
	gTMVA
::
Resu…sCœssifiˇti⁄
::~
	$Resu…sCœssifiˇti⁄
()

63 
dñëe
 
fLoggî
;

64 
	}
}

69 
	gTMVA
::
Resu…sCœssifiˇti⁄
::
	$SëVÆue
–
Flﬂt_t
 
vÆue
, 
I¡_t
 
õvt
 )

71 i‡(
õvt
 >(
I¡_t
)
fMvaVÆues
.
	`size
()ËfMvaVÆues.
	`ªsize
( ievt+1 );

72 
fMvaVÆues
[
õvt
] = 
vÆue
;

73 
	}
}

	@src/ResultsMulticlass.cxx

35 
	~"TMVA/Resu…sMu…i˛ass.h
"

37 
	~"TMVA/D©aSë.h
"

38 
	~"TMVA/D©aSëInfo.h
"

39 
	~"TMVA/GíëicAlg‹ôhm.h
"

40 
	~"TMVA/GíëicFôãr.h
"

41 
	~"TMVA/MsgLoggî.h
"

42 
	~"TMVA/Resu…s.h
"

43 
	~"TMVA/ROCCurve.h
"

44 
	~"TMVA/Toﬁs.h
"

45 
	~"TMVA/Ty≥s.h
"

47 
	~"TGøph.h
"

48 
	~"TH1F.h
"

49 
	~"TM©rixD.h
"

51 
	~<limôs
>

52 
	~<ve˘‹
>

58 
	gTMVA
::
Resu…sMu…i˛ass
::
	$Resu…sMu…i˛ass
–c⁄° 
D©aSëInfo
* 
dsi
, 
TSåög
 
ªsu…sName
 )

59 : 
	`Resu…s
–
dsi
, 
ªsu…sName
 ),

60 
	`IFôãrT¨gë
(),

61 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`F‹m
("Resu…sMu…iCœss%s",
ªsu…sName
.
	`D©a
()Ë, 
kINFO
) ),

62 
	`fCœssToO±imize
(0),

63 
	`fAchõvabÀEff
(
dsi
->
	`GëNCœs£s
()),

64 
	`fAchõvabÀPur
(
dsi
->
	`GëNCœs£s
()),

65 
	`fBe°Cuts
(
dsi
->
	`GëNCœs£s
(),
°d
::
ve˘‹
<
DoubÀ_t
>(dsi->
	$GëNCœs£s
()))

67 
	}
}

72 
TMVA
::
Resu…sMu…i˛ass
::~
	$Resu…sMu…i˛ass
()

74 
dñëe
 
fLoggî
;

75 
	}
}

79 
	gTMVA
::
Resu…sMu…i˛ass
::
SëVÆue
–
°d
::
ve˘‹
<
Flﬂt_t
>& 
vÆue
, 
I¡_t
 
õvt
 )

81 i‡(
	gõvt
 >(
I¡_t
)
fMu…iCœssVÆues
.
size
()ËfMu…iCœssVÆues.
ªsize
–
õvt
+1 );

82 
	gfMu…iCœssVÆues
[
õvt
] = 
vÆue
;

89 
TM©rixD
 
	gTMVA
::
Resu…sMu…i˛ass
::
	$GëC⁄fusi⁄M©rix
(
DoubÀ_t
 
effB
)

91 c⁄° 
D©aSë
 *
ds
 = 
	`GëD©aSë
();

92 c⁄° 
D©aSëInfo
 *
dsi
 = 
	`GëD©aSëInfo
();

93 
ds
->
	`SëCuºítTy≥
(
	`GëTªeTy≥
());

95 
UI¡_t
 
numCœs£s
 = 
dsi
->
	`GëNCœs£s
();

96 
TM©rixD
 
	`m©
(
numCœs£s
,ÇumClasses);

99 
UI¡_t
 
iRow
 = 0; iRow < 
numCœs£s
; ++iRow) {

100 
UI¡_t
 
iCﬁ
 = 0; iCﬁ < 
numCœs£s
; ++iCol) {

103 i‡(
iRow
 =
iCﬁ
) {

104 
	`m©
(
iRow
, 
iCﬁ
Ë
°d
::
numîic_limôs
<>::
	`quõt_NaN
();

107 
°d
::
ve˘‹
<
Flﬂt_t
> 
vÆueVe˘‹
;

108 
°d
::
ve˘‹
<
Boﬁ_t
> 
˛assVe˘‹
;

109 
°d
::
ve˘‹
<
Flﬂt_t
> 
weightVe˘‹
;

111 
UI¡_t
 
iEvt
 = 0; iEvà< 
ds
->
	`GëNEvíts
(); ++iEvt) {

112 c⁄° 
Evít
 *
ev
 = 
ds
->
	`GëEvít
(
iEvt
);

113 c⁄° 
UI¡_t
 
˛s
 = 
ev
->
	`GëCœss
();

114 c⁄° 
Flﬂt_t
 
weight
 = 
ev
->
	`GëWeight
();

115 c⁄° 
Flﬂt_t
 
mvaVÆue
 = 
fMu…iCœssVÆues
[
iEvt
][
iRow
];

117 i‡(
˛s
 !
iRow
 
™d
 cl†!
iCﬁ
) {

121 
˛assVe˘‹
.
	`push_back
(
˛s
 =
iRow
);

122 
weightVe˘‹
.
	`push_back
(
weight
);

123 
vÆueVe˘‹
.
	`push_back
(
mvaVÆue
);

126 
ROCCurve
 
	`roc
(
vÆueVe˘‹
, 
˛assVe˘‹
, 
weightVe˘‹
);

127 
	`m©
(
iRow
, 
iCﬁ
Ë
roc
.
	`GëEffSF‹EffB
(
effB
);

131  
m©
;

132 
	}
}

136 
DoubÀ_t
 
	gTMVA
::
Resu…sMu…i˛ass
::
E°im©‹Fun˘i⁄
–
°d
::
ve˘‹
<DoubÀ_t> & 
cutvÆues
 ){

138 
D©aSë
* 
ds
 = 
GëD©aSë
();

139 
	gds
->
SëCuºítTy≥
–
GëTªeTy≥
() );

143 
Flﬂt_t
 
	gposôives
[2] = {0, 0};

145 
I¡_t
 
	gõvt
 = 0; ievà< 
	gds
->
GëNEvíts
(); ievt++) {

146 
UI¡_t
 
	gevCœss
 = 
fEvítCœs£s
[
õvt
];

147 
Flﬂt_t
 
	gw
 = 
fEvítWeights
[
õvt
];

149 
Boﬁ_t
 
	gbªak_ouãr_lo›
 = 
Ál£
;

150 
UI¡_t
 
	gi˛s
 = 0; i˛†< 
	gcutvÆues
.
size
(); ++icls) {

151 autÿ
	gvÆue
 = 
fMu…iCœssVÆues
[
õvt
][
i˛s
];

152 autÿ
	gcutvÆue
 = 
cutvÆues
.
©
(
i˛s
);

153 i‡(
	gcutvÆue
 < 0. ? (-
	gvÆue
 < cutvÆueË: (+
vÆue
 <
cutvÆue
)) {

154 
bªak_ouãr_lo›
 = 
åue
;

159 i‡(
	gbªak_ouãr_lo›
) {

163 
Boﬁ_t
 
	gisEvCuºCœss
 = (
evCœss
 =
fCœssToO±imize
);

164 
	gposôives
[
isEvCuºCœss
] +
w
;

167 c⁄° 
Flﬂt_t
 
	gåuePosôive
 = 
posôives
[1];

168 c⁄° 
Flﬂt_t
 
	gÁl£Posôive
 = 
posôives
[0];

170 
Flﬂt_t
 
	geff
 = 
åuePosôive
 / 
fCœssSumWeights
[
fCœssToO±imize
];

171 
Flﬂt_t
 
	gpur
 = 
åuePosôive
 / (åuePosôivê+ 
Ál£Posôive
);

172 
Flﬂt_t
 
	geffTimesPur
 = 
eff
*
pur
;

174 
Flﬂt_t
 
	gtoMöimize
 = 
°d
::
numîic_limôs
<>::
max
();

175 i‡(
	geffTimesPur
 > 
	g°d
::
numîic_limôs
<>::
mö
())

176 
toMöimize
 = 1./(
effTimesPur
);

178 
	gfAchõvabÀEff
.
©
(
fCœssToO±imize
Ë
eff
;

179 
	gfAchõvabÀPur
.
©
(
fCœssToO±imize
Ë
pur
;

181  
	gtoMöimize
;

188 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
Resu…sMu…i˛ass
::
	$GëBe°Mu…iCœssCuts
(
UI¡_t
 
èrgëCœss
){

190 c⁄° 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
();

191 
	`Log
(Ë<< 
kINFO
 << "Calculating best set of cuts for class "

192 << 
dsi
->
	`GëCœssInfo
–
èrgëCœss
 )->
	`GëName
(Ë<< 
Endl
;

194 
fCœssToO±imize
 = 
èrgëCœss
;

195 
°d
::
ve˘‹
<
I¡îvÆ
*> 
	`ønges
(
dsi
->
	`GëNCœs£s
(), 
√w
 
	`I¡îvÆ
(-1,1));

197 
fCœssSumWeights
.
	`˛ór
();

198 
fEvítWeights
.
	`˛ór
();

199 
fEvítCœs£s
.
	`˛ór
();

201 
UI¡_t
 
i˛s
 = 0; i˛†< 
dsi
->
	`GëNCœs£s
(); ++icls) {

202 
fCœssSumWeights
.
	`push_back
(0);

205 
D©aSë
 *
ds
 = 
	`GëD©aSë
();

206 
I¡_t
 
õvt
 = 0; ievà< 
ds
->
	`GëNEvíts
(); ievt++) {

207 c⁄° 
Evít
 *
ev
 = 
ds
->
	`GëEvít
(
õvt
);

208 
fCœssSumWeights
[
ev
->
	`GëCœss
()] +ev->
	`GëWeight
();

209 
fEvítWeights
.
	`push_back
(
ev
->
	`GëWeight
());

210 
fEvítCœs£s
.
	`push_back
(
ev
->
	`GëCœss
());

213 c⁄° 
TSåög
 
	`«me
( "MulticlassGA" );

214 c⁄° 
TSåög
 
	`›ts
( "PopSize=100:Steps=30" );

215 
GíëicFôãr
 
	`mg
–*
this
, 
«me
, 
ønges
, 
›ts
);

217 
°d
::
ve˘‹
<
DoubÀ_t
> 
ªsu…
;

218 
mg
.
	`Run
(
ªsu…
);

220 
fBe°Cuts
.
	`©
(
èrgëCœss
Ë
ªsu…
;

222 
UI¡_t
 
n
 = 0;

223  
°d
::
ve˘‹
<
DoubÀ_t
>::
ôî©‹
 
ô
 = 
ªsu…
.
	`begö
(); it<ªsu….
	`íd
(); it++ ){

224 
	`Log
(Ë<< 
kINFO
 << " cutVÆue[" <<
dsi
->
	`GëCœssInfo
–
n
 )->
	`GëName
(Ë<< "] = " << (*
ô
Ë<< ";"<< 
Endl
;

225 
n
++;

228  
ªsu…
;

229 
	}
}

240 
	gTMVA
::
Resu…sMu…i˛ass
::
	$Cª©eMu…i˛assPîf‹m™˚Hi°os
(
TSåög
 
¥efix
)

242 
D©aSë
 *
ds
 = 
	`GëD©aSë
();

243 
ds
->
	`SëCuºítTy≥
(
	`GëTªeTy≥
());

244 c⁄° 
D©aSëInfo
 *
dsi
 = 
	`GëD©aSëInfo
();

246 
UI¡_t
 
numCœs£s
 = 
dsi
->
	`GëNCœs£s
();

248 
°d
::
ve˘‹
<°d::ve˘‹<
Flﬂt_t
>> *
øwMvaRes
 = 
	`GëVÆueVe˘‹
();

250 
size_t
 
iCœss
 = 0; iCœs†< 
numCœs£s
; ++iClass) {

253 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaRes
;

254 
°d
::
ve˘‹
<
Boﬁ_t
> 
mvaResTy≥s
;

255 
°d
::
ve˘‹
<
Flﬂt_t
> 
mvaResWeights
;

260 
mvaRes
.
	`ª£rve
(
øwMvaRes
->
	`size
());

261 autÿ
ôem
 : *
øwMvaRes
) {

262 
mvaRes
.
	`push_back
(
ôem
[
iCœss
]);

265 autÿ
evítCﬁÀ˘i⁄
 = 
ds
->
	`GëEvítCﬁÀ˘i⁄
();

266 
mvaResTy≥s
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

267 
mvaResWeights
.
	`ª£rve
(
evítCﬁÀ˘i⁄
.
	`size
());

268 autÿ
ev
 : 
evítCﬁÀ˘i⁄
) {

269 
mvaResTy≥s
.
	`push_back
(
ev
->
	`GëCœss
(Ë=
iCœss
);

270 
mvaResWeights
.
	`push_back
(
ev
->
	`GëWeight
());

274 
ROCCurve
 *
roc
 = 
√w
 
	`ROCCurve
(
mvaRes
, 
mvaResTy≥s
, 
mvaResWeights
);

275 
TGøph
 *
rocGøph
 = 
√w
 
	`TGøph
(*(
roc
->
	`GëROCCurve
()));

276 
dñëe
 
roc
;

279 
TSåög
 
˛assName
 = 
dsi
->
	`GëCœssInfo
(
iCœss
)->
	`GëName
();

280 
TSåög
 
«me
 = 
	`F‹m
("%s_ªjBvsS_%s", 
¥efix
.
	`D©a
(), 
˛assName
.Data());

281 
TSåög
 
tôÀ
 = 
	`F‹m
("%s_%s", 
¥efix
.
	`D©a
(), 
˛assName
.Data());

282 
rocGøph
->
	`SëName
(
«me
);

283 
rocGøph
->
	`SëTôÀ
(
tôÀ
);

286 
	`St‹e
(
rocGøph
);

288 
	}
}

293 
	gTMVA
::
Resu…sMu…i˛ass
::
	$Cª©eMu…i˛assHi°os
–
TSåög
 
¥efix
, 
I¡_t
 
nbös
, Int_t )

295 
	`Log
(Ë<< 
kINFO
 << "Cª©ög mu…i˛as†ª•⁄£ hi°ogøms..." << 
Endl
;

297 
D©aSë
* 
ds
 = 
	`GëD©aSë
();

298 
ds
->
	`SëCuºítTy≥
–
	`GëTªeTy≥
() );

299 c⁄° 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
();

301 
°d
::
ve˘‹
<°d::ve˘‹<
TH1F
*> > 
hi°os
;

302 
Flﬂt_t
 
xmö
 = 0.-0.0002;

303 
Flﬂt_t
 
xmax
 = 1.+0.0002;

304 
UI¡_t
 
iCls
 = 0; iCl†< 
dsi
->
	`GëNCœs£s
(); iCls++) {

305 
hi°os
.
	`push_back
(
°d
::
ve˘‹
<
TH1F
*>(0));

306 
UI¡_t
 
jCls
 = 0; jCl†< 
dsi
->
	`GëNCœs£s
(); jCls++) {

307 
TSåög
 
	`«me
(
	`F‹m
("%s_%s_¥ob_f‹_%s",
¥efix
.
	`D©a
(),

308 
dsi
->
	`GëCœssInfo
–
jCls
 )->
	`GëName
(),

309 
dsi
->
	`GëCœssInfo
–
iCls
 )->
	`GëName
()));

310 
hi°os
.
	`©
(
iCls
).
	`push_back
(
√w
 
	`TH1F
(
«me
,«me,
nbös
,
xmö
,
xmax
));

314 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

315 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

316 
I¡_t
 
˛s
 = 
ev
->
	`GëCœss
();

317 
Flﬂt_t
 
w
 = 
ev
->
	`GëWeight
();

318 
UI¡_t
 
jCls
 = 0; jCl†< 
dsi
->
	`GëNCœs£s
(); jCls++) {

319 
hi°os
.
	`©
(
˛s
).©(
jCls
)->
	`Fûl
(
fMu…iCœssVÆues
[
õvt
][jCls],
w
);

322 
UI¡_t
 
iCls
 = 0; iCl†< 
dsi
->
	`GëNCœs£s
(); iCls++) {

323 
UI¡_t
 
jCls
 = 0; jCl†< 
dsi
->
	`GëNCœs£s
(); jCls++) {

324 
	`gToﬁs
().
	`N‹mHi°
–
hi°os
.
	`©
(
iCls
).©(
jCls
) );

325 
	`St‹e
(
hi°os
.
	`©
(
iCls
).©(
jCls
));

359 
	}
}

	@src/ResultsRegression.cxx

32 
	~"TMVA/Resu…sRegªssi⁄.h
"

34 
	~"TMVA/D©aSë.h
"

35 
	~"TMVA/D©aSëInfo.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/Resu…s.h
"

38 
	~"TMVA/Ty≥s.h
"

39 
	~"TMVA/V¨übÀInfo.h
"

41 
	~"TH1F.h
"

42 
	~"TH2F.h
"

43 
	~"TSåög.h
"

45 
	~<ve˘‹
>

51 
	gTMVA
::
Resu…sRegªssi⁄
::
	$Resu…sRegªssi⁄
–c⁄° 
D©aSëInfo
* 
dsi
, 
TSåög
 
ªsu…sName
 )

52 : 
	`Resu…s
–
dsi
, 
ªsu…sName
 ),

53 
	`fLoggî
–
√w
 
	`MsgLoggî
(
	`F‹m
("Resu…sRegªssi⁄%s",
ªsu…sName
.
	`D©a
()Ë, 
kINFO
) )

55 
	}
}

60 
	gTMVA
::
Resu…sRegªssi⁄
::~
	$Resu…sRegªssi⁄
()

62 
dñëe
 
fLoggî
;

63 
	}
}

67 
	gTMVA
::
Resu…sRegªssi⁄
::
SëVÆue
–
°d
::
ve˘‹
<
Flﬂt_t
>& 
vÆue
, 
I¡_t
 
õvt
 )

69 i‡(
	gõvt
 >(
I¡_t
)
fRegVÆues
.
size
()ËfRegVÆues.
ªsize
–
õvt
+1 );

70 
	gfRegVÆues
[
õvt
] = 
vÆue
;

75 
TH1F
* 
	gTMVA
::
Resu…sRegªssi⁄
::
	$QuadøticDevüti⁄
–
UI¡_t
 
tgtNum
 , 
Boﬁ_t
 
åunˇã
, 
DoubÀ_t
 
åuncvÆue
 )

77 
D©aSë
* 
ds
 = 
	`GëD©aSë
();

78 
ds
->
	`SëCuºítTy≥
–
	`GëTªeTy≥
() );

79 c⁄° 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
();

80 
TSåög
 
	`«me
–
	`F‹m
("tgt_%d",
tgtNum
) );

81 
V¨übÀInfo
 
vöf
 = 
dsi
->
	`GëT¨gëInfo
(
tgtNum
);

82 
Flﬂt_t
 
xmö
=0., 
xmax
=0.;

83 i‡(
åunˇã
){

84 
xmax
 = 
åuncvÆue
;

87 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

88 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

89 
°d
::
ve˘‹
<
Flﬂt_t
> 
ªgVÆ
 = 
fRegVÆues
.
	`©
(
õvt
);

90 
Flﬂt_t
 
vÆ
 = 
ªgVÆ
.
	`©
–
tgtNum
 ) - 
ev
->
	`GëT¨gë
(ÅgtNum );

91 
vÆ
 *= val;

92 
xmax
 = 
vÆ
> xmax? val: xmax;

95 
xmax
 *= 1.1;

96 
I¡_t
 
nbös
 = 500;

97 
TH1F
* 
h
 = 
√w
 
	`TH1F
–
«me
,Çame, 
nbös
, 
xmö
, 
xmax
);

98 
h
->
	`SëDúe˘‹y
(0);

99 
h
->
	`GëXaxis
()->
	`SëTôÀ
("Quadratic Deviation");

100 
h
->
	`GëYaxis
()->
	`SëTôÀ
("Weighted Entries");

102 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

103 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

104 
°d
::
ve˘‹
<
Flﬂt_t
> 
ªgVÆ
 = 
fRegVÆues
.
	`©
(
õvt
);

105 
Flﬂt_t
 
vÆ
 = 
ªgVÆ
.
	`©
–
tgtNum
 ) - 
ev
->
	`GëT¨gë
(ÅgtNum );

106 
vÆ
 *= val;

107 
Flﬂt_t
 
weight
 = 
ev
->
	`GëWeight
();

108 i‡(!
åunˇã
 || 
vÆ
<=
åuncvÆue
 ) 
h
->
	`Fûl
–vÆ, 
weight
);

110  
h
;

111 
	}
}

115 
TH2F
* 
	gTMVA
::
Resu…sRegªssi⁄
::
	$Devüti⁄AsAFun˘i⁄Of
–
UI¡_t
 
v¨Num
, UI¡_à
tgtNum
 )

117 
D©aSë
* 
ds
 = 
	`GëD©aSë
();

118 
ds
->
	`SëCuºítTy≥
–
	`GëTªeTy≥
() );

120 
TSåög
 
	`«me
–
	`F‹m
("tgt_%d_v¨_%d",
tgtNum
, 
v¨Num
) );

121 c⁄° 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
();

122 
Flﬂt_t
 
xmö
, 
xmax
;

123 
Boﬁ_t
 
èkeT¨gës
 = 
kFALSE
;

124 i‡(
v¨Num
 >
dsi
->
	`GëNV¨übÀs
()) {

125 
èkeT¨gës
 = 
kTRUE
;

126 
v¨Num
 -
dsi
->
	`GëNV¨übÀs
();

128 i‡(!
èkeT¨gës
) {

129 
V¨übÀInfo
 
vöf
 = 
dsi
->
	`GëV¨übÀInfo
(
v¨Num
);

130 
xmö
 = 
vöf
.
	`GëMö
();

131 
xmax
 = 
vöf
.
	`GëMax
();

133 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

134 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

135 
Flﬂt_t
 
vÆ
 = 
ev
->
	`GëVÆue
(
v¨Num
);

137 i‡(
vÆ
 < 
xmö
 ) xmin = val;

138 i‡(
vÆ
 > 
xmax
 ) xmax = val;

143 
V¨übÀInfo
 
vöf
 = 
dsi
->
	`GëT¨gëInfo
(
v¨Num
);

144 
xmö
 = 
vöf
.
	`GëMö
();

145 
xmax
 = 
vöf
.
	`GëMax
();

147 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

148 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

149 
Flﬂt_t
 
vÆ
 = 
ev
->
	`GëT¨gë
(
v¨Num
);

151 i‡(
vÆ
 < 
xmö
 ) xmin = val;

152 i‡(
vÆ
 > 
xmax
 ) xmax = val;

156 
Flﬂt_t
 
ymö
 = 
FLT_MAX
;

157 
Flﬂt_t
 
ymax
 = -
FLT_MAX
;

159 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

160 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

161 
°d
::
ve˘‹
<
Flﬂt_t
> 
ªgVÆ
 = 
fRegVÆues
.
	`©
(
õvt
);

163 
Flﬂt_t
 
diff
 = 
ªgVÆ
.
	`©
–
tgtNum
 ) - 
ev
->
	`GëT¨gë
(ÅgtNum );

164 i‡(
diff
 < 
ymö
 ) ymin = diff;

165 i‡(
diff
 > 
ymax
 ) ymax = diff;

168 
I¡_t
 
nxbös
 = 50;

169 
I¡_t
 
nybös
 = 50;

171 
Flﬂt_t
 
ïsû⁄
 = 
TM©h
::
	`Abs
(
xmax
-
xmö
)/((Flﬂt_t)
nxbös
-1);

172 
xmö
 -1.01*
ïsû⁄
;

173 
xmax
 +1.01*
ïsû⁄
;

175 
ïsû⁄
 = (
ymax
-
ymö
)/((
Flﬂt_t
)
nybös
-1);

176 
ymö
 -1.01*
ïsû⁄
;

177 
ymax
 +1.01*
ïsû⁄
;

180 
TH2F
* 
h
 = 
√w
 
	`TH2F
–
«me
,Çame, 
nxbös
, 
xmö
, 
xmax
, 
nybös
, 
ymö
, 
ymax
 );

181 
h
->
	`SëDúe˘‹y
(0);

183 
h
->
	`GëXaxis
()->
	`SëTôÀ
–(
èkeT¨gës
 ? 
dsi
->
	`GëT¨gëInfo
(
v¨Num
).
	`GëTôÀ
(Ë: dsi->
	`GëV¨übÀInfo
(varNum).GetTitle() ) );

184 
TSåög
 
	`v¨Name
–
dsi
->
	`GëT¨gëInfo
(
tgtNum
).
	`GëTôÀ
() );

185 
TSåög
 
	`yName
–
v¨Name
+
	`TSåög
("_{regression} - ") + varName+TString("_{true}") );

186 
h
->
	`GëYaxis
()->
	`SëTôÀ
–
yName
 );

188 
I¡_t
 
õvt
=0; ievt<
ds
->
	`GëNEvíts
(); ievt++) {

189 c⁄° 
Evít
* 
ev
 = 
ds
->
	`GëEvít
(
õvt
);

190 
°d
::
ve˘‹
<
Flﬂt_t
> 
ªgVÆ
 = 
fRegVÆues
.
	`©
(
õvt
);

192 
Flﬂt_t
 
xVÆ
 = (
èkeT¨gës
?
ev
->
	`GëT¨gë
–
v¨Num
 ):ev->
	`GëVÆue
( varNum ));

193 
Flﬂt_t
 
yVÆ
 = 
ªgVÆ
.
	`©
–
tgtNum
 ) - 
ev
->
	`GëT¨gë
(ÅgtNum );

195 
h
->
	`Fûl
–
xVÆ
, 
yVÆ
 );

198  
h
;

199 
	}
}

203 
	gTMVA
::
Resu…sRegªssi⁄
::
	$Cª©eDevüti⁄Hi°ogøms
–
TSåög
 
¥efix
 )

205 
	`Log
(Ë<< 
kINFO
 << "Cª©êv¨übÀ hi°ogøms" << 
Endl
;

206 c⁄° 
D©aSëInfo
* 
dsi
 = 
	`GëD©aSëInfo
();

208 
UI¡_t
 
iv¨
 = 0; iv¨ < 
dsi
->
	`GëNV¨übÀs
(); ivar++) {

209 
UI¡_t
 
ôgt
 = 0; itgà< 
dsi
->
	`GëNT¨gës
(); itgt++) {

210 
TH2F
* 
h
 = 
	`Devüti⁄AsAFun˘i⁄Of
–
iv¨
, 
ôgt
 );

211 
TSåög
 
	`«me
–
	`F‹m
("%s_ªg_v¨%d_πgt%d",
¥efix
.
	`D©a
(),
iv¨
,
ôgt
) );

212 
h
->
	`SëName
–
«me
 );

213 
h
->
	`SëTôÀ
–
«me
 );

214 
	`St‹e
–
h
 );

217 
	`Log
(Ë<< 
kINFO
 << "Cª©êªgªssi⁄Å¨gë hi°ogøms" << 
Endl
;

218 
UI¡_t
 
iv¨
 = 0; iv¨ < 
dsi
->
	`GëNT¨gës
(); ivar++) {

219 
UI¡_t
 
ôgt
 = 0; itgà< 
dsi
->
	`GëNT¨gës
(); itgt++) {

220 
TH2F
* 
h
 = 
	`Devüti⁄AsAFun˘i⁄Of
–
dsi
->
	`GëNV¨übÀs
()+
iv¨
, 
ôgt
 );

221 
TSåög
 
	`«me
–
	`F‹m
("%s_ªg_tgt%d_πgt%d",
¥efix
.
	`D©a
(),
iv¨
,
ôgt
) );

222 
h
->
	`SëName
–
«me
 );

223 
h
->
	`SëTôÀ
–
«me
 );

224 
	`St‹e
–
h
 );

228 
	`Log
(Ë<< 
kINFO
 << "Cª©êªgªssi⁄ávîagêdevüti⁄" << 
Endl
;

229 
UI¡_t
 
ôgt
 = 0; itgà< 
dsi
->
	`GëNT¨gës
(); itgt++) {

230 
TH1F
* 
h
 = 
	`QuadøticDevüti⁄
(
ôgt
);

231 
TSåög
 
	`«me
–
	`F‹m
("%s_Quadr_Devüti⁄_èrgë_%d_",
¥efix
.
	`D©a
(),
ôgt
) );

232 
h
->
	`SëName
–
«me
 );

233 
h
->
	`SëTôÀ
–
«me
 );

234 
DoubÀ_t
 
yq
[1], 
xq
[]={0.9};

235 
h
->
	`GëQu™tûes
(1,
yq
,
xq
);

236 
	`St‹e
–
h
 );

238 
TH1F
* 
håunc
 = 
	`QuadøticDevüti⁄
(
ôgt
, 
åue
, 
yq
[0]);

239 
TSåög
 
	`«me2
–
	`F‹m
("%s_Quadr_Dev_be°90≥rc_èrgë_%d_",
¥efix
.
	`D©a
(),
ôgt
) );

240 
håunc
->
	`SëName
–
«me2
 );

241 
håunc
->
	`SëTôÀ
–
«me2
 );

242 
	`St‹e
–
håunc
 );

244 
	`Log
(Ë<< 
kINFO
 << "Resu…†¸óãd" << 
Endl
;

245 
	}
}

	@src/RootFinder.cxx

33 
	~"TMVA/RoŸFödî.h
"

35 
	~"TMVA/MëhodBa£.h
"

36 
	~"TMVA/MsgLoggî.h
"

37 
	~"TMVA/Ty≥s.h
"

39 
	~"TM©h.h
"

40 
	~"TObje˘.h
"

42 
CœssImp
(
TMVA
::
RoŸFödî
);

47 
	gTMVA
::
RoŸFödî
::
	$RoŸFödî
(
TMVA
::
MëhodBa£
 *
mëhod
 ,

48 
DoubÀ_t
 
roŸMö
,

49 
DoubÀ_t
 
roŸMax
,

50 
I¡_t
 
maxIãøti⁄s
,

51 
DoubÀ_t
 
absTﬁî™˚
 )

52 : 
	`fRoŸMö
–
roŸMö
 ),

53 
	`fRoŸMax
–
roŸMax
 ),

54 
	`fMaxIãr
–
maxIãøti⁄s
 ),

55 
	`fAbsTﬁ
 ( 
absTﬁî™˚
 ),

56 
	`fLoggî
 ( 
√w
 
	`MsgLoggî
("RootFinder") )

58 
fMëhod
=
mëhod
;

59 
	}
}

64 
	gTMVA
::
RoŸFödî
::~
	$RoŸFödî
( )

66 
dñëe
 
fLoggî
;

67 
	}
}

72 
DoubÀ_t
 
	gTMVA
::
RoŸFödî
::
	$RoŸ
–
DoubÀ_t
 
ªfVÆue
 )

74 
DoubÀ_t
 
a
 = 
fRoŸMö
, 
b
 = 
fRoŸMax
;

75 
DoubÀ_t
 
Á
 = 
fMëhod
->
	`GëVÆueF‹RoŸ
–
a
 ) - 
ªfVÆue
;

76 
DoubÀ_t
 
fb
 = 
fMëhod
->
	`GëVÆueF‹RoŸ
–
b
 ) - 
ªfVÆue
;

77 i‡(
fb
*
Á
 > 0) {

78 
	`Log
(Ë<< 
kWARNING
 << "<Root> initial interval w/oÑoot: "

79 << "◊=" << 
a
 << ", b=" << 
b
 << "),"

80 << " (Eff_a=" << 
fMëhod
->
	`GëVÆueF‹RoŸ
–
a
 )

81 << ", Eff_b=" << 
fMëhod
->
	`GëVÆueF‹RoŸ
–
b
 ) << "), "

82 << "(Á=" << 
Á
 << ", fb=" << 
fb
 << "), "

83 << "ªfVÆuê" << 
ªfVÆue
 << 
Endl
;

87 
Boﬁ_t
 
	`ac_equÆ
(
kFALSE
);

88 
DoubÀ_t
 
fc
 = 
fb
;

89 
DoubÀ_t
 
c
 = 0, 
d
 = 0, 
e
 = 0;

90 
I¡_t
 
ôî
0; iã∏<
fMaxIãr
; iter++) {

91 i‡((
fb
 < 0 && 
fc
 < 0) || (fb > 0 && fc > 0)) {

94 
ac_equÆ
 = 
kTRUE
;

95 
c
 = 
a
; 
fc
 = 
Á
;

96 
d
 = 
b
 - 
a
; 
e
 = b -á;

99 i‡(
TM©h
::
	`Abs
(
fc
Ë< TM©h::Abs(
fb
)) {

100 
ac_equÆ
 = 
kTRUE
;

101 
a
 = 
b
; b = 
c
; c =á;

102 
Á
 = 
fb
; fb = 
fc
; fc = fa;

105 
DoubÀ_t
 
tﬁ
 = 0.5 * 2.2204460492503131e-16 * 
TM©h
::
	`Abs
(
b
);

106 
DoubÀ_t
 
m
 = 0.5 * (
c
 - 
b
);

107 i‡(
fb
 =0 || 
TM©h
::
	`Abs
(
m
Ë<
tﬁ
 || TM©h::Abs(fbË< 
fAbsTﬁ
Ë 
b
;

110 i‡(
TM©h
::
	`Abs
 (
e
Ë< 
tﬁ
 || TM©h::Ab†(
Á
Ë<TM©h::Ab†(
fb
)Ë{ 
d
 = 
m
;É = m; }

113 
DoubÀ_t
 
p
, 
q
, 
r
;

114 
DoubÀ_t
 
s
 = 
fb
 / 
Á
;

116 i‡(
ac_equÆ
Ë{ 
p
 = 2 * 
m
 * 
s
; 
q
 = 1 - s; }

118 
q
 = 
Á
 / 
fc
; 
r
 = 
fb
 / fc;

119 
p
 = 
s
 * (2 * 
m
 * 
q
 * (q - 
r
Ë- (
b
 - 
a
) * (r - 1));

120 
q
 = (q - 1Ë* (
r
 - 1Ë* (
s
 - 1);

123 i‡(
p
 > 0Ë
q
 = -q;

124 
p
 = -p;

126 
DoubÀ_t
 
mö1
 = 3 * 
m
 * 
q
 - 
TM©h
::
	`Abs
 (
tﬁ
 * q);

127 
DoubÀ_t
 
mö2
 = 
TM©h
::
	`Abs
 (
e
 * 
q
);

128 i‡(2 * 
p
 < (
mö1
 < 
mö2
 ? min1 : min2)) {

130 
e
 = 
d
; d = 
p
 / 
q
;

132 { 
d
 = 
m
; 
e
 = m; }

135 
a
 = 
b
; 
Á
 = 
fb
;

137 i‡(
TM©h
::
	`Abs
(
d
Ë> 
tﬁ
Ë
b
 += d;

138 
b
 +(
m
 > 0 ? +
tﬁ
 : -tol);

140 
fb
 = 
fMëhod
->
	`GëVÆueF‹RoŸ
–
b
 ) - 
ªfVÆue
;

145 
	`Log
(Ë<< 
kWARNING
 << "<RoŸ> maximum iãøti⁄†(" << 
fMaxIãr


146 << "Ëªached bef‹êc⁄vîgí˚" << 
Endl
;

148  
b
;

149 
	}
}

	@src/Rule.cxx

49 
	~"TMVA/RuÀ.h
"

51 
	~"TMVA/Evít.h
"

52 
	~"TMVA/MëhodBa£.h
"

53 
	~"TMVA/MëhodRuÀFô.h
"

54 
	~"TMVA/MsgLoggî.h
"

55 
	~"TMVA/RuÀCut.h
"

56 
	~"TMVA/RuÀFô.h
"

57 
	~"TMVA/RuÀEn£mbÀ.h
"

58 
	~"TMVA/Toﬁs.h
"

59 
	~"TMVA/Ty≥s.h
"

64 
	gTMVA
::
RuÀ
::RuÀ–
RuÀEn£mbÀ
 *
ª
,

65 c⁄° 
°d
::
ve˘‹
< c⁄° 
Node
 * >& 
nodes
 )

66 : 
fCut
 ( 0 )

67 , 
fN‹m
 ( 1.0 )

68 , 
fSuµ‹t
 ( 0.0 )

69 , 
fSigma
 ( 0.0 )

70 , 
fC€fficõ¡
 ( 0.0 )

71 , 
fImp‹èn˚
 ( 0.0 )

72 , 
fImp‹èn˚Ref
 ( 1.0 )

73 , 
fRuÀEn£mbÀ
 ( 
ª
 )

74 , 
fSSB
 ( 0 )

75 , 
fSSBNeve
 ( 0 )

76 , 
fLoggî
–
√w
 
MsgLoggî
("RuleFit") )

84 
	gfCut
 = 
√w
 
RuÀCut
–
nodes
 );

85 
	gfSSB
 = 
fCut
->
GëPurôy
();

86 
	gfSSBNeve
 = 
fCut
->
GëCutNeve
();

92 
	gTMVA
::
RuÀ
::
	$RuÀ
–
RuÀEn£mbÀ
 *
ª
 )

93 : 
	`fCut
 ( 0 )

94 , 
	`fN‹m
 ( 1.0 )

95 , 
	`fSuµ‹t
 ( 0.0 )

96 , 
	`fSigma
 ( 0.0 )

97 , 
	`fC€fficõ¡
 ( 0.0 )

98 , 
	`fImp‹èn˚
 ( 0.0 )

99 , 
	`fImp‹èn˚Ref
 ( 1.0 )

100 , 
	`fRuÀEn£mbÀ
 ( 
ª
 )

101 , 
	`fSSB
 ( 0 )

102 , 
	`fSSBNeve
 ( 0 )

103 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

105 
	}
}

110 
	gTMVA
::
RuÀ
::
	$RuÀ
()

111 : 
	`fCut
 ( 0 )

112 , 
	`fN‹m
 ( 1.0 )

113 , 
	`fSuµ‹t
 ( 0.0 )

114 , 
	`fSigma
 ( 0.0 )

115 , 
	`fC€fficõ¡
 ( 0.0 )

116 , 
	`fImp‹èn˚
 ( 0.0 )

117 , 
	`fImp‹èn˚Ref
 ( 1.0 )

118 , 
	`fRuÀEn£mbÀ
 ( 0 )

119 , 
	`fSSB
 ( 0 )

120 , 
	`fSSBNeve
 ( 0 )

121 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

123 
	}
}

128 
	gTMVA
::
RuÀ
::~
	$RuÀ
()

130 
dñëe
 
fCut
;

131 
dñëe
 
fLoggî
;

132 
	}
}

137 
Boﬁ_t
 
	gTMVA
::
RuÀ
::
	$C⁄èösV¨übÀ
(
UI¡_t
 
iv
) const

139 
Boﬁ_t
 
found
 = 
kFALSE
;

140 
Boﬁ_t
 
d⁄eLo›
 = 
kFALSE
;

141 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

142 
UI¡_t
 
i
 = 0;

144 !
d⁄eLo›
) {

145 
found
 = (
fCut
->
	`GëSñe˘‹
(
i
Ë=
iv
);

146 
i
++;

147 
d⁄eLo›
 = (
found
 || (
i
==
nv¨s
));

149  
found
;

150 
	}
}

154 
	gTMVA
::
RuÀ
::
	$SëMsgTy≥
–
EMsgTy≥
 
t
 )

156 
fLoggî
->
	`SëMöTy≥
(
t
);

157 
	}
}

170 
Boﬁ_t
 
	gTMVA
::
RuÀ
::
	$EquÆ
–c⁄° 
RuÀ
& 
Ÿhî
, 
Boﬁ_t
 
u£CutVÆue
, 
DoubÀ_t
 
mödi°
 ) const

172 
Boﬁ_t
 
rvÆ
=
kFALSE
;

173 i‡(
mödi°
<0Ë
u£CutVÆue
=
kFALSE
;

174 
DoubÀ_t
 
d
 = 
	`RuÀDi°
–
Ÿhî
, 
u£CutVÆue
 );

176 i‡(
u£CutVÆue
Ë
rvÆ
 = ( (!(
d
<0)Ë&& (d<
mödi°
) );

177 
rvÆ
 = (!(
d
<0));

179  
rvÆ
;

180 
	}
}

190 
DoubÀ_t
 
	gTMVA
::
RuÀ
::
	$RuÀDi°
–c⁄° 
RuÀ
& 
Ÿhî
, 
Boﬁ_t
 
u£CutVÆue
 ) const

192 i‡(
fCut
->
	`GëNv¨s
()!=
Ÿhî
.
	`GëRuÀCut
()->GetNvars())  -1.0;

194 c⁄° 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

196 
I¡_t
 
£l
;

197 
DoubÀ_t
 
rms
;

198 
DoubÀ_t
 
smö
;

199 
DoubÀ_t
 
smax
;

200 
DoubÀ_t
 
vmöA
,
vmaxA
;

201 
DoubÀ_t
 
vmöB
,
vmaxB
;

208 
UI¡_t
 
ö
 = 0;

209 
DoubÀ_t
 
sumdc2
 = 0;

210 
Boﬁ_t
 
equÆ
 = 
åue
;

212 c⁄° 
RuÀCut
 *
ŸhîCut
 = 
Ÿhî
.
	`GëRuÀCut
();

213 (
equÆ
Ë&& (
ö
<
nv¨s
)) {

215 
equÆ
 = ( (
fCut
->
	`GëSñe˘‹
(
ö
Ë=(
ŸhîCut
->GetSelector(in))) &&

216 (
fCut
->
	`GëCutDoMö
(
ö
Ë=(
ŸhîCut
->GetCutDoMin(in))) &&

217 (
fCut
->
	`GëCutDoMax
(
ö
Ë=(
ŸhîCut
->GetCutDoMax(in))) );

219 i‡(
equÆ
) {

220 i‡(
u£CutVÆue
) {

221 
£l
 = 
fCut
->
	`GëSñe˘‹
(
ö
);

222 
vmöA
 = 
fCut
->
	`GëCutMö
(
ö
);

223 
vmaxA
 = 
fCut
->
	`GëCutMax
(
ö
);

224 
vmöB
 = 
Ÿhî
.
	`GëRuÀCut
()->
	`GëCutMö
(
ö
);

225 
vmaxB
 = 
Ÿhî
.
	`GëRuÀCut
()->
	`GëCutMax
(
ö
);

227 
rms
 = 
fRuÀEn£mbÀ
->
	`GëRuÀFô
()->
	`GëMëhodBa£
()->
	`GëRMS
(
£l
);

228 
smö
=0;

229 
smax
=0;

230 i‡(
fCut
->
	`GëCutDoMö
(
ö
))

231 
smö
 = ( 
rms
>0 ? (
vmöA
-
vmöB
)/rms : 0 );

232 i‡(
fCut
->
	`GëCutDoMax
(
ö
))

233 
smax
 = ( 
rms
>0 ? (
vmaxA
-
vmaxB
)/rms : 0 );

234 
sumdc2
 +
smö
*smö + 
smax
*smax;

238 
ö
++;

240 i‡(!
u£CutVÆue
Ë
sumdc2
 = (
equÆ
 ? 0.0:-1.0);

241 
sumdc2
 = (
equÆ
 ? 
	`sqπ
(sumdc2) : -1.0);

243  
sumdc2
;

244 
	}
}

249 
Boﬁ_t
 
	gTMVA
::
RuÀ
::
›î©‹
==–c⁄° RuÀ& 
Ÿhî
 ) const

251  
this
->
EquÆ
–
Ÿhî
, 
kTRUE
, 1e-3 );

257 
Boﬁ_t
 
	gTMVA
::
RuÀ
::
›î©‹
<–c⁄° RuÀ& 
Ÿhî
 ) const

259  (
fImp‹èn˚
 < 
Ÿhî
.
GëImp‹èn˚
());

265 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<< ( 
°d
::o°ªam& 
os
, c⁄° 
	gRuÀ
& 
	gruÀ
 )

267 
	gruÀ
.
Pröt
–
os
 );

268  
	gos
;

274 c⁄° 
	gTSåög
 & 
	gTMVA
::
RuÀ
::
	$GëV¨Name
–
I¡_t
 
i
 ) const

276  
fRuÀEn£mbÀ
->
	`GëMëhodBa£
()->
	`GëI≈utLabñ
(
i
);

277 
	}
}

282 
	gTMVA
::
RuÀ
::
	$C›y
–c⁄° 
RuÀ
& 
Ÿhî
 )

284 if(
this
 !&
Ÿhî
) {

285 
	`SëRuÀEn£mbÀ
–
Ÿhî
.
	`GëRuÀEn£mbÀ
() );

286 
fCut
 = 
√w
 
	`RuÀCut
–*(
Ÿhî
.
	`GëRuÀCut
()) );

287 
fSSB
 = 
Ÿhî
.
	`GëSSB
();

288 
fSSBNeve
 = 
Ÿhî
.
	`GëSSBNeve
();

289 
	`SëC€fficõ¡
(
Ÿhî
.
	`GëC€fficõ¡
());

290 
	`SëSuµ‹t
–
Ÿhî
.
	`GëSuµ‹t
() );

291 
	`SëSigma
–
Ÿhî
.
	`GëSigma
() );

292 
	`SëN‹m
–
Ÿhî
.
	`GëN‹m
() );

293 
	`CÆcImp‹èn˚
();

294 
	`SëImp‹èn˚Ref
–
Ÿhî
.
	`GëImp‹èn˚Ref
() );

296 
	}
}

301 
	gTMVA
::
RuÀ
::
	$Pröt
–
°d
::
o°ªam
& 
os
 ) const

303 c⁄° 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

304 i‡(
nv¨s
<1Ë
os
 << " *** WARNING - <EMPTY RULE> ***" << 
°d
::
ídl
;

306 
I¡_t
 
£l
;

307 
DoubÀ_t
 
vÆmö
, 
vÆmax
;

309 
os
 << " Imp‹èn˚ = " << 
	`F‹m
("%1.4f", 
fImp‹èn˚
/
fImp‹èn˚Ref
Ë<< 
°d
::
ídl
;

310 
os
 << " C€fficõ¡ = " << 
	`F‹m
("%1.4f", 
fC€fficõ¡
Ë<< 
°d
::
ídl
;

311 
os
 << " Suµ‹à = " << 
	`F‹m
("%1.4f", 
fSuµ‹t
Ë<< 
°d
::
ídl
;

312 
os
 << " S/(S+BË = " << 
	`F‹m
("%1.4f", 
fSSB
Ë<< 
°d
::
ídl
;

314  
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

315 
os
 << " ";

316 
£l
 = 
fCut
->
	`GëSñe˘‹
(
i
);

317 
vÆmö
 = 
fCut
->
	`GëCutMö
(
i
);

318 
vÆmax
 = 
fCut
->
	`GëCutMax
(
i
);

320 
os
 << 
	`F‹m
("* Cuà%2d",
i
+1Ë<< " : " << 
°d
::
Êush
;

321 i‡(
fCut
->
	`GëCutDoMö
(
i
)Ë
os
 << 
	`F‹m
("%10.3g",
vÆmö
Ë<< " < " << 
°d
::
Êush
;

322 
os
 << " " << 
°d
::
Êush
;

323 
os
 << 
	`GëV¨Name
(
£l
Ë<< 
°d
::
Êush
;

324 i‡(
fCut
->
	`GëCutDoMax
(
i
)Ë
os
 << " < " << 
	`F‹m
("%10.3g",
vÆmax
Ë<< 
°d
::
Êush
;

325 
os
 << " " << 
°d
::
Êush
;

326 
os
 << 
°d
::
ídl
;

328 
	}
}

333 
	gTMVA
::
RuÀ
::
	$PrötLoggî
(c⁄° *
tôÀ
) const

335 c⁄° 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

336 i‡(
nv¨s
<1Ë
	`Log
(Ë<< 
kWARNING
 << "BUG TRAP: EMPTY RULE!!!" << 
Endl
;

338 
I¡_t
 
£l
;

339 
DoubÀ_t
 
vÆmö
, 
vÆmax
;

341 i‡(
tôÀ
Ë
	`Log
(Ë<< 
kINFO
 <<Åitle;

342 
	`Log
(Ë<< 
kINFO


343 << "Imp‹èn˚ = " << 
	`F‹m
("%1.4f", 
fImp‹èn˚
/
fImp‹èn˚Ref
Ë<< 
Endl
;

345  
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

347 
	`Log
(Ë<< 
kINFO
 << " ";

348 
£l
 = 
fCut
->
	`GëSñe˘‹
(
i
);

349 
vÆmö
 = 
fCut
->
	`GëCutMö
(
i
);

350 
vÆmax
 = 
fCut
->
	`GëCutMax
(
i
);

352 
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("Cuà%2d",
i
+1) << " : ";

353 i‡(
fCut
->
	`GëCutDoMö
(
i
)Ë
	`Log
(Ë<< 
kINFO
 << 
	`F‹m
("%10.3g",
vÆmö
) << " < ";

354 
	`Log
(Ë<< 
kINFO
 << " ";

355 
	`Log
(Ë<< 
kINFO
 << 
	`GëV¨Name
(
£l
);

356 i‡(
fCut
->
	`GëCutDoMax
(
i
)Ë
	`Log
(Ë<< 
kINFO
 << " < " << 
	`F‹m
("%10.3g",
vÆmax
);

357 
	`Log
(Ë<< 
kINFO
 << " ";

358 
	`Log
(Ë<< 
Endl
;

360 
	}
}

365 
	gTMVA
::
RuÀ
::
	$PrötRaw
–
°d
::
o°ªam
& 
os
 ) const

367 
I¡_t
 
dp
 = 
os
.
	`¥ecisi⁄
();

368 c⁄° 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

369 
os
 << "Parameters: "

370 << 
°d
::
	`£çªcisi⁄
(10)

371 << 
fImp‹èn˚
 << " "

372 << 
fImp‹èn˚Ref
 << " "

373 << 
fC€fficõ¡
 << " "

374 << 
fSuµ‹t
 << " "

375 << 
fSigma
 << " "

376 << 
fN‹m
 << " "

377 << 
fSSB
 << " "

378 << 
fSSBNeve
 << " "

379 << 
°d
::
ídl
; \

380 
os
 << "N(cuts): " << 
nv¨s
 << 
°d
::
ídl
;

381  
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

382 
os
 << "Cuà" << 
i
 << " : " << 
°d
::
Êush
;

383 
os
 << 
fCut
->
	`GëSñe˘‹
(
i
)

384 << 
°d
::
	`£çªcisi⁄
(10)

385 << " " << 
fCut
->
	`GëCutMö
(
i
)

386 << " " << 
fCut
->
	`GëCutMax
(
i
)

387 << " " << (
fCut
->
	`GëCutDoMö
(
i
) ? "T":"F")

388 << " " << (
fCut
->
	`GëCutDoMax
(
i
) ? "T":"F")

389 << 
°d
::
ídl
;

391 
os
 << 
°d
::
	`£çªcisi⁄
(
dp
);

392 
	}
}

396 * 
	gTMVA
::
RuÀ
::
	$AddXMLTo
–* 
∑ª¡
 ) const

398 * 
ruÀ
 = 
	`gToﬁs
().
	`AddChûd
–
∑ª¡
, "Rule" );

399 c⁄° 
UI¡_t
 
nv¨s
 = 
fCut
->
	`GëNv¨s
();

401 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "Imp‹èn˚", 
fImp‹èn˚
 );

402 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "Ref", 
fImp‹èn˚Ref
 );

403 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "C€ff", 
fC€fficõ¡
 );

404 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "Suµ‹t", 
fSuµ‹t
 );

405 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "Sigma", 
fSigma
 );

406 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "N‹m", 
fN‹m
 );

407 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "SSB", 
fSSB
 );

408 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "SSBNeve", 
fSSBNeve
 );

409 
	`gToﬁs
().
	`AddAâr
–
ruÀ
, "Nv¨s", 
nv¨s
 );

411 
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

412 * 
cut
 = 
	`gToﬁs
().
	`AddChûd
–
ruÀ
, "Cut" );

413 
	`gToﬁs
().
	`AddAâr
–
cut
, "Sñe˘‹", 
fCut
->
	`GëSñe˘‹
(
i
) );

414 
	`gToﬁs
().
	`AddAâr
–
cut
, "Mö", 
fCut
->
	`GëCutMö
(
i
) );

415 
	`gToﬁs
().
	`AddAâr
–
cut
, "Max", 
fCut
->
	`GëCutMax
(
i
) );

416 
	`gToﬁs
().
	`AddAâr
–
cut
, "DoMö", (
fCut
->
	`GëCutDoMö
(
i
) ? "T":"F") );

417 
	`gToﬁs
().
	`AddAâr
–
cut
, "DoMax", (
fCut
->
	`GëCutDoMax
(
i
) ? "T":"F") );

420  
ruÀ
;

421 
	}
}

426 
	gTMVA
::
RuÀ
::
	$RódFromXML
–* 
wghäode
 )

428 
TSåög
 
nodeName
 = 
	`TSåög
–
	`gToﬁs
().
	`GëName
(
wghäode
) );

429 i‡(
nodeName
 !"RuÀ"Ë
	`Log
(Ë<< 
kFATAL
 << "<RódFromXML> U√x≥˘edÇodê«me: " <<ÇodeNamê<< 
Endl
;

431 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Imp‹èn˚", 
fImp‹èn˚
 );

432 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Ref", 
fImp‹èn˚Ref
 );

433 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "C€ff", 
fC€fficõ¡
 );

434 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Suµ‹t", 
fSuµ‹t
 );

435 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Sigma", 
fSigma
 );

436 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "N‹m", 
fN‹m
 );

437 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "SSB", 
fSSB
 );

438 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "SSBNeve", 
fSSBNeve
 );

440 
UI¡_t
 
nv¨s
;

441 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Nv¨s", 
nv¨s
 );

442 i‡(
fCut
Ë
dñëe
 fCut;

443 
fCut
 = 
√w
 
	`RuÀCut
();

444 
fCut
->
	`SëNv¨s
–
nv¨s
 );

447 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
wghäode
 );

448 
UI¡_t
 
i
 = 0;

449 
UI¡_t
 
ui
;

450 
DoubÀ_t
 
d
;

451 
Ch¨_t
 
c
;

452 
ch
) {

453 
	`gToﬁs
().
	`RódAâr
–
ch
, "Sñe˘‹", 
ui
 );

454 
fCut
->
	`SëSñe˘‹
–
i
, 
ui
 );

455 
	`gToﬁs
().
	`RódAâr
–
ch
, "Mö", 
d
 );

456 
fCut
->
	`SëCutMö
 ( 
i
, 
d
 );

457 
	`gToﬁs
().
	`RódAâr
–
ch
, "Max", 
d
 );

458 
fCut
->
	`SëCutMax
 ( 
i
, 
d
 );

459 
	`gToﬁs
().
	`RódAâr
–
ch
, "DoMö", 
c
 );

460 
fCut
->
	`SëCutDoMö
–
i
, (
c
 ='T' ? 
kTRUE
 : 
kFALSE
 ) );

461 
	`gToﬁs
().
	`RódAâr
–
ch
, "DoMax", 
c
 );

462 
fCut
->
	`SëCutDoMax
–
i
, (
c
 ='T' ? 
kTRUE
 : 
kFALSE
 ) );

464 
i
++;

465 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

469 i‡(
i
 !
nv¨s
Ë
	`Log
(Ë<< 
kFATAL
 << "<RódFromXML> Mism©ch i¿numbî o‡cuts: " << i << " !" <<Çv¨†<< 
Endl
;

470 
	}
}

475 
	gTMVA
::
RuÀ
::
	$RódRaw
–
°d
::
i°ªam
& 
i°r
 )

477 
TSåög
 
dummy
;

478 
UI¡_t
 
nv¨s
;

479 
i°r
 >> 
dummy


480 >> 
fImp‹èn˚


481 >> 
fImp‹èn˚Ref


482 >> 
fC€fficõ¡


483 >> 
fSuµ‹t


484 >> 
fSigma


485 >> 
fN‹m


486 >> 
fSSB


487 >> 
fSSBNeve
;

489 
i°r
 >> 
dummy
 >> 
nv¨s
;

490 
DoubÀ_t
 
cutmö
,
cutmax
;

491 
UI¡_t
 
£l
,
idum
;

492 
Ch¨_t
 
bA
, 
bB
;

494 i‡(
fCut
Ë
dñëe
 fCut;

495 
fCut
 = 
√w
 
	`RuÀCut
();

496 
fCut
->
	`SëNv¨s
–
nv¨s
 );

497  
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

498 
i°r
 >> 
dummy
 >> 
idum
;

499 
i°r
 >> 
dummy
;

500 
i°r
 >> 
£l
 >> 
cutmö
 >> 
cutmax
 >> 
bA
 >> 
bB
;

501 
fCut
->
	`SëSñe˘‹
(
i
,
£l
);

502 
fCut
->
	`SëCutMö
(
i
,
cutmö
);

503 
fCut
->
	`SëCutMax
(
i
,
cutmax
);

504 
fCut
->
	`SëCutDoMö
(
i
,(
bA
=='T' ? 
kTRUE
:
kFALSE
));

505 
fCut
->
	`SëCutDoMax
(
i
,(
bB
=='T' ? 
kTRUE
:
kFALSE
));

507 
	}
}

	@src/RuleCut.cxx

30 
	~<Æg‹ôhm
>

31 
	~<li°
>

33 
	~"TMVA/RuÀCut.h
"

34 
	~"TMVA/Decisi⁄Tªe.h
"

35 
	~"TMVA/MsgLoggî.h
"

40 
	gTMVA
::
RuÀCut
::RuÀCut–c⁄° 
°d
::
ve˘‹
<c⁄° 
Node
*> & 
nodes
 )

41 : 
fCutNeve
(0),

42 
fPurôy
(0),

43 
fLoggî
(
√w
 
MsgLoggî
("RuleFit"))

45 
MakeCuts
–
nodes
 );

51 
	gTMVA
::
RuÀCut
::
	$RuÀCut
()

52 : 
	`fCutNeve
(0),

53 
	`fPurôy
(0),

54 
	`fLoggî
(
√w
 
	`MsgLoggî
("RuleFit"))

56 
	}
}

61 
	gTMVA
::
RuÀCut
::~
	$RuÀCut
() {

62 
dñëe
 
fLoggî
;

63 
	}
}

69 
	gTMVA
::
RuÀCut
::
MakeCuts
–c⁄° 
°d
::
ve˘‹
<c⁄° 
Node
*> & 
nodes
 )

72 
UI¡_t
 
¬odes
 = 
nodes
.
size
();

73 i‡(
	g¬odes
<2) {

74 
Log
(Ë<< 
	gkWARNING
 << "<MakeCuts()> Em±y cuà¸óãd." << 
	gEndl
;

79 c⁄° 
Decisi⁄TªeNode
* 
	gdä
 = 
dy«mic_ˇ°
<c⁄° Decisi⁄TªeNode*>(
nodes
.
back
());

80 if(!
	gdä
) ;

81 
	gfCutNeve
 = 
dä
->
GëNEvíts
();

82 
	gfPurôy
 = 
dä
->
GëPurôy
();

85 
	g°d
::
	t∑ú
<
	tDoubÀ_t
,
	tI¡_t
> 
	tCutDú_t
;

86 
	g°d
::
	t∑ú
<
	tI¡_t
,
	tCutDú_t
> 
	tSñCut_t
;

89 
	gfSñe˘‹
.
˛ór
();

90 
	gfCutMö
.
˛ór
();

91 
	gfCutMax
.
˛ór
();

92 
	gfCutDoMö
.
˛ór
();

93 
	gfCutDoMax
.
˛ór
();

97 
	g°d
::
li°
<
SñCut_t
> 
Æl£l
;

98 
I¡_t
 
	g£l
;

99 
DoubÀ_t
 
	gvÆ
;

100 
I¡_t
 
	gdú
;

101 c⁄° 
Node
 *
	g√xtNode
;

102  
UI¡_t
 
	gi
=0; i<
	g¬odes
-1; i++) {

103 
	g√xtNode
 = 
nodes
[
i
+1];

104 c⁄° 
Decisi⁄TªeNode
* 
	gdä_
 = 
dy«mic_ˇ°
<c⁄° Decisi⁄TªeNode*>(
nodes
[
i
]);

105 if(!
	gdä_
) ;

106 
	g£l
 = 
dä_
->
GëSñe˘‹
();

107 
	gvÆ
 = 
dä_
->
GëCutVÆue
();

108 i‡(
	gnodes
[
i
]->
GëRight
(Ë=
√xtNode
) {

109 
dú
 = 1;

111 i‡(
	gnodes
[
i
]->
GëLe·
(Ë=
√xtNode
) {

112 
dú
 = -1;

115 
Log
(Ë<< 
	gkFATAL
 << "<MakeTheRuÀ> BUG! ShouldÇŸ bêhîê-á¿íd-nodêbef‹êthêíd!" << 
	gEndl
;

116 
	gdú
 = 0;

118 
	gÆl£l
.
push_back
(
SñCut_t
(
£l
,
CutDú_t
(
vÆ
,
dú
)));

121 
	gÆl£l
.
s‹t
();

122 
I¡_t
 
	g¥evSñ
=-1;

123 
I¡_t
 
	gn£l
=0;

124 
Boﬁ_t
 
	gfú°Mö
=
kTRUE
;

125 
Boﬁ_t
 
	gfú°Max
=
kTRUE
;

126  
	g°d
::
li°
<
SñCut_t
>::
c⁄°_ôî©‹
 
ô
 = 
Æl£l
.
begö
(); 
	gô
!˜Œ£l.
íd
(); it++ ) {

127 
	g£l
 = (*
ô
).
fú°
;

128 
	gvÆ
 = (*
ô
).
£c⁄d
.
fú°
;

129 
	gdú
 = (*
ô
).
£c⁄d
.second;

130 i‡(
	g£l
!=
¥evSñ
) {

131 
fú°Mö
 = 
kTRUE
;

132 
	gfú°Max
 = 
kTRUE
;

133 
	gn£l
++;

134 
	gfSñe˘‹
.
push_back
(
£l
);

135 
	gfCutMö
.
ªsize
–
fSñe˘‹
.
size
(),0);

136 
	gfCutMax
.
ªsize
–
fSñe˘‹
.
size
(),0);

137 
	gfCutDoMö
.
ªsize
–
fSñe˘‹
.
size
(), 
kFALSE
);

138 
	gfCutDoMax
.
ªsize
–
fSñe˘‹
.
size
(), 
kFALSE
);

140  
	gdú
 ) {

142 i‡((
vÆ
<
fCutMö
[
n£l
-1]Ë|| 
fú°Mö
) {

143 
fCutMö
[
n£l
-1] = 
vÆ
;

144 
	gfCutDoMö
[
n£l
-1] = 
kTRUE
;

145 
	gfú°Mö
 = 
kFALSE
;

149 i‡((
vÆ
>
fCutMax
[
n£l
-1]Ë|| 
fú°Max
) {

150 
fCutMax
[
n£l
-1] = 
vÆ
;

151 
	gfCutDoMax
[
n£l
-1] = 
kTRUE
;

152 
	gfú°Max
 = 
kFALSE
;

157 
	g¥evSñ
 = 
£l
;

164 
UI¡_t
 
	gTMVA
::
RuÀCut
::
	$GëNcuts
() const

166 
UI¡_t
 
rvÆ
=0;

167 
UI¡_t
 
i
=0; i<
fSñe˘‹
.
	`size
(); i++) {

168 i‡(
fCutDoMö
[
i
]Ë
rvÆ
 += 1;

169 i‡(
fCutDoMax
[
i
]Ë
rvÆ
 += 1;

171  
rvÆ
;

172 
	}
}

176 
Boﬁ_t
 
	gTMVA
::
RuÀCut
::
	$GëCutR™ge
(
I¡_t
 
£l
,
DoubÀ_t
 &
rmö
, DoubÀ_à&
rmax
, 
Boﬁ_t
 &
d‹mö
, Boﬁ_à&
d‹max
) const

178 
d‹mö
=
kFALSE
;

179 
d‹max
=
kFALSE
;

180 
Boﬁ_t
 
d⁄e
=
kFALSE
;

181 
Boﬁ_t
 
foundIt
=
kFALSE
;

182 
UI¡_t
 
öd
=0;

183 !
d⁄e
) {

184 
foundIt
 = (
	`I¡_t
(
fSñe˘‹
[
öd
])==
£l
);

185 
öd
++;

186 
d⁄e
 = (
foundIt
 || (
öd
==
fSñe˘‹
.
	`size
()));

188 i‡(!
foundIt
Ë 
kFALSE
;

189 
rmö
 = 
fCutMö
[
öd
-1];

190 
rmax
 = 
fCutMax
[
öd
-1];

191 
d‹mö
 = 
fCutDoMö
[
öd
-1];

192 
d‹max
 = 
fCutDoMax
[
öd
-1];

193  
kTRUE
;

194 
	}
}

	@src/RuleEnsemble.cxx

33 
	~"TMVA/RuÀEn£mbÀ.h
"

35 
	~"TMVA/D©aSëInfo.h
"

36 
	~"TMVA/Decisi⁄Tªe.h
"

37 
	~"TMVA/Evít.h
"

38 
	~"TMVA/MëhodBa£.h
"

39 
	~"TMVA/MëhodRuÀFô.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/RuÀFô.h
"

42 
	~"TMVA/Toﬁs.h
"

43 
	~"TMVA/Ty≥s.h
"

45 
	~"TR™dom3.h
"

46 
	~"TH1F.h
"

48 
	~<Æg‹ôhm
>

49 
	~<c°dlib
>

50 
	~<iom™ù
>

51 
	~<li°
>

56 
	gTMVA
::
RuÀEn£mbÀ
::
	$RuÀEn£mbÀ
–
RuÀFô
 *
rf
 )

57 : 
	`fLó∫ögModñ
 ( 
kFuŒ
 )

58 , 
	`fImp‹èn˚Cut
 ( 0 )

59 , 
	`fLöQu™tûe
 ( 0.025 )

60 , 
	`fOff£t
 ( 0 )

61 , 
	`fAvîageSuµ‹t
 ( 0.8 )

62 , 
	`fAvîageRuÀSigma
( 0.4 )

63 , 
	`fRuÀFSig
 ( 0 )

64 , 
	`fRuÀNCave
 ( 0 )

65 , 
	`fRuÀNCsig
 ( 0 )

66 , 
	`fRuÀMöDi°
 ( 1e-3 )

67 , 
	`fNRuÀsGíî©ed
 ( 0 )

68 , 
	`fEvít
 ( 0 )

69 , 
	`fEvítCacheOK
 ( 
åue
 )

70 , 
	`fRuÀM≠OK
 ( 
åue
 )

71 , 
	`fRuÀM≠Ind0
 ( 0 )

72 , 
	`fRuÀM≠Ind1
 ( 0 )

73 , 
	`fRuÀM≠Evíts
 ( 0 )

74 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

76 
	`Inôülize
–
rf
 );

77 
	}
}

82 
	gTMVA
::
RuÀEn£mbÀ
::
	$RuÀEn£mbÀ
–c⁄° 
RuÀEn£mbÀ
& 
Ÿhî
 )

83 : 
	`fAvîageSuµ‹t
 ( 1 )

84 , 
	`fEvít
(0)

85 , 
	`fRuÀM≠Evíts
(0)

86 , 
	`fRuÀFô
(0)

87 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

89 
	`C›y
–
Ÿhî
 );

90 
	}
}

95 
	gTMVA
::
RuÀEn£mbÀ
::
	$RuÀEn£mbÀ
()

96 : 
	`fLó∫ögModñ
 ( 
kFuŒ
 )

97 , 
	`fImp‹èn˚Cut
 ( 0 )

98 , 
	`fLöQu™tûe
 ( 0.025 )

99 , 
	`fOff£t
 ( 0 )

100 , 
	`fImp‹èn˚Ref
 ( 1.0 )

101 , 
	`fAvîageSuµ‹t
 ( 0.8 )

102 , 
	`fAvîageRuÀSigma
( 0.4 )

103 , 
	`fRuÀFSig
 ( 0 )

104 , 
	`fRuÀNCave
 ( 0 )

105 , 
	`fRuÀNCsig
 ( 0 )

106 , 
	`fRuÀMöDi°
 ( 1e-3 )

107 , 
	`fNRuÀsGíî©ed
 ( 0 )

108 , 
	`fEvít
 ( 0 )

109 , 
	`fEvítCacheOK
 ( 
åue
 )

110 , 
	`fRuÀM≠OK
 ( 
åue
 )

111 , 
	`fRuÀM≠Ind0
 ( 0 )

112 , 
	`fRuÀM≠Ind1
 ( 0 )

113 , 
	`fRuÀM≠Evíts
 ( 0 )

114 , 
	`fRuÀFô
 ( 0 )

115 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

117 
	}
}

122 
	gTMVA
::
RuÀEn£mbÀ
::~
	$RuÀEn£mbÀ
()

124  
°d
::
ve˘‹
<
RuÀ
 *>::
ôî©‹
 
ôrRuÀ
 = 
fRuÀs
.
	`begö
(); iåRuÀ !fRuÀs.
	`íd
(); itrRule++ ) {

125 
dñëe
 *
ôrRuÀ
;

128 
dñëe
 
fLoggî
;

129 
	}
}

134 
	gTMVA
::
RuÀEn£mbÀ
::
	$Inôülize
–c⁄° 
RuÀFô
 *
rf
 )

136 
	`SëAvîageRuÀSigma
(0.4);

137 
fRuÀFô
 = 
rf
;

138 
UI¡_t
 
nv¨s
 = 
	`GëMëhodBa£
()->
	`GëNv¨
();

139 
fV¨Imp‹èn˚
.
	`˛ór
();

140 
fLöPDFB
.
	`˛ór
();

141 
fLöPDFS
.
	`˛ór
();

143 
fV¨Imp‹èn˚
.
	`ªsize
–
nv¨s
,0.0 );

144 
fLöPDFB
.
	`ªsize
–
nv¨s
,0 );

145 
fLöPDFS
.
	`ªsize
–
nv¨s
,0 );

146 
fImp‹èn˚Ref
 = 1.0;

147 
UI¡_t
 
i
=0; i<
nv¨s
; i++) {

148 
fLöTîmOK
.
	`push_back
(
kTRUE
);

150 
	}
}

154 
	gTMVA
::
RuÀEn£mbÀ
::
	$SëMsgTy≥
–
EMsgTy≥
 
t
 ) {

155 
fLoggî
->
	`SëMöTy≥
(
t
);

156 
	}
}

162 c⁄° 
	gTMVA
::
MëhodRuÀFô
* 
TMVA
::
RuÀEn£mbÀ
::
	$GëMëhodRuÀFô
() const

164  ( 
fRuÀFô
==0 ? 0:fRuÀFô->
	`GëMëhodRuÀFô
());

165 
	}
}

171 c⁄° 
	gTMVA
::
MëhodBa£
* 
TMVA
::
RuÀEn£mbÀ
::
	$GëMëhodBa£
() const

173  ( 
fRuÀFô
==0 ? 0:fRuÀFô->
	`GëMëhodBa£
());

174 
	}
}

179 
	gTMVA
::
RuÀEn£mbÀ
::
	$MakeModñ
()

181 
	`MakeRuÀs
–
fRuÀFô
->
	`GëF‹e°
() );

183 
	`MakeLöórTîms
();

185 
	`MakeRuÀM≠
();

187 
	`CÆcRuÀSuµ‹t
();

189 
	`RuÀSèti°ics
();

191 
	`PrötRuÀGí
();

192 
	}
}

198 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$C€fficõ¡Radius
()

200 
I¡_t
 
nc€ffs
 = 
fRuÀs
.
	`size
();

201 i‡(
nc€ffs
<1)  0;

203 
DoubÀ_t
 
sum2
=0;

204 
DoubÀ_t
 
vÆ
;

205 
I¡_t
 
i
=0; i<
nc€ffs
; i++) {

206 
vÆ
 = 
fRuÀs
[
i
]->
	`GëC€fficõ¡
();

207 
sum2
 +
vÆ
*val;

209  
sum2
;

210 
	}
}

215 
	gTMVA
::
RuÀEn£mbÀ
::
	$Re£tC€fficõ¡s
()

217 
fOff£t
 = 0.0;

218 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

219 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++) {

220 
fRuÀs
[
i
]->
	`SëC€fficõ¡
(0.0);

222 
	}
}

227 
	gTMVA
::
RuÀEn£mbÀ
::
SëC€fficõ¡s
–c⁄° 
°d
::
ve˘‹
< 
DoubÀ_t
 > & 
v
 )

229 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
size
();

230 i‡(
	gv
.
size
()!=
ƒuÀs
) {

231 
Log
(Ë<< 
kFATAL
 << "<SëC€fficõ¡s> - BUG TRAP - i≈uàve˘‹ wr⁄g size! Iài†" << 
v
.
size
()

232 << " whí iàshould bê" << 
ƒuÀs
 << 
Endl
;

234 
UI¡_t
 
	gi
=0; i<
	gƒuÀs
; i++) {

235 
	gfRuÀs
[
i
]->
SëC€fficõ¡
(
v
[i]);

242 
	gTMVA
::
RuÀEn£mbÀ
::
GëC€fficõ¡s
–
°d
::
ve˘‹
< 
DoubÀ_t
 > & 
v
 )

244 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
size
();

245 
	gv
.
ªsize
(
ƒuÀs
);

246 i‡(
	gƒuÀs
==0) ;

248 
UI¡_t
 
	gi
=0; i<
	gƒuÀs
; i++) {

249 
	gv
[
i
] = (
fRuÀs
[i]->
GëC€fficõ¡
());

256 c⁄° 
	g°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*>* TMVA::
RuÀEn£mbÀ
::
	$GëTøöögEvíts
() const

258  &(
fRuÀFô
->
	`GëTøöögEvíts
());

259 
	}
}

264 c⁄° 
	gTMVA
::
Evít
 * 
TMVA
::
RuÀEn£mbÀ
::
	$GëTøöögEvít
(
UI¡_t
 
i
) const

266  
fRuÀFô
->
	`GëTøöögEvít
(
i
);

267 
	}
}

272 
	gTMVA
::
RuÀEn£mbÀ
::
	$RemoveSimû¨RuÀs
()

274 
	`Log
(Ë<< 
kVERBOSE
 << "Removög simû¨ÑuÀs; di°™˚ = " << 
fRuÀMöDi°
 << 
Endl
;

276 
UI¡_t
 
ƒuÀsIn
 = 
fRuÀs
.
	`size
();

277 
TMVA
::
RuÀ
 *
fú°
, *
£c⁄d
;

278 
°d
::
ve˘‹
< 
Ch¨_t
 > 
	`ªmoveMe
–
ƒuÀsIn
,
Ál£
 );

280 
I¡_t
 
ƒem
 = 0;

281 
I¡_t
 
ªmöd
=-1;

282 
DoubÀ_t
 
r
;

284 
UI¡_t
 
i
=0; i<
ƒuÀsIn
; i++) {

285 i‡(!
ªmoveMe
[
i
]) {

286 
fú°
 = 
fRuÀs
[
i
];

287 
UI¡_t
 
k
=
i
+1; k<
ƒuÀsIn
; k++) {

288 i‡(!
ªmoveMe
[
k
]) {

289 
£c⁄d
 = 
fRuÀs
[
k
];

290 
Boﬁ_t
 
equÆ
 = 
fú°
->
	`EquÆ
(*
£c⁄d
,
kTRUE
,
fRuÀMöDi°
);

291 i‡(
equÆ
) {

292 
r
 = 
gR™dom
->
	`Rndm
();

293 
ªmöd
 = (
r
>0.5 ? 
k
:
i
);

296 
ªmöd
 = -1;

299 i‡(
ªmöd
>-1) {

300 i‡(!
ªmoveMe
[
ªmöd
]) {

301 
ªmoveMe
[
ªmöd
] = 
åue
;

302 
ƒem
++;

309 
UI¡_t
 
öd
 = 0;

310 
RuÀ
 *
theRuÀ
;

311 
UI¡_t
 
i
=0; i<
ƒuÀsIn
; i++) {

312 i‡(
ªmoveMe
[
i
]) {

313 
theRuÀ
 = 
fRuÀs
[
öd
];

314 #i‡
_MSC_VER
 >= 1400

315 
fRuÀs
.
	`îa£
–
°d
::
ve˘‹
<
RuÀ
 *>::
	`ôî©‹
(&fRuÀs[
öd
], &fRules) );

317 
fRuÀs
.
	`îa£
–fRuÀs.
	`begö
(Ë+ 
öd
 );

319 
dñëe
 
theRuÀ
;

320 
öd
--;

322 
öd
++;

324 
UI¡_t
 
ƒuÀsOut
 = 
fRuÀs
.
	`size
();

325 
	`Log
(Ë<< 
kVERBOSE
 << "Removed " << 
ƒuÀsIn
 - 
ƒuÀsOut
 << " ouào‡" <<ÇruÀsI¿<< "ÑuÀs" << 
Endl
;

326 
	}
}

331 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÀ™upRuÀs
()

333 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

334 i‡(
ƒuÀs
==0) ;

335 
	`Log
(Ë<< 
kVERBOSE
 << "RemovögÑuÀ†wôhÑñ©ivêimp‹èn˚ < " << 
fImp‹èn˚Cut
 << 
Endl
;

336 i‡(
fImp‹èn˚Cut
<=0) ;

340 
RuÀ
 *
thîuÀ
;

341 
I¡_t
 
öd
=0;

342 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++) {

343 i‡(
fRuÀs
[
öd
]->
	`GëRñImp‹èn˚
()<
fImp‹èn˚Cut
) {

344 
thîuÀ
 = 
fRuÀs
[
öd
];

345 #i‡
_MSC_VER
 >= 1400

346 
fRuÀs
.
	`îa£
–
°d
::
ve˘‹
<
RuÀ
 *>::
	`ôî©‹
(&fRuÀs[
öd
], &fRules) );

348 
fRuÀs
.
	`îa£
–fRuÀs.
	`begö
(Ë+ 
öd
 );

350 
dñëe
 
thîuÀ
;

351 
öd
--;

353 
öd
++;

355 
	`Log
(Ë<< 
kINFO
 << "Removed " << 
ƒuÀs
-
öd
 << " out ofáÅotal of " <<Çrules

356 << "ÑuÀ†wôh imp‹èn˚ < " << 
fImp‹èn˚Cut
 << 
Endl
;

357 
	}
}

362 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÀ™upLöór
()

364 
UI¡_t
 
∆ö
 = 
fLöN‹m
.
	`size
();

365 i‡(
∆ö
==0) ;

366 
	`Log
(Ë<< 
kVERBOSE
 << "RemovögÜöó∏ãrm†wôhÑñ©ivêimp‹èn˚ < " << 
fImp‹èn˚Cut
 << 
Endl
;

368 
fLöTîmOK
.
	`˛ór
();

369 
UI¡_t
 
i
=0; i<
∆ö
; i++) {

370 
fLöTîmOK
.
	`push_back
–(
fLöImp‹èn˚
[
i
]/
fImp‹èn˚Ref
 > 
fImp‹èn˚Cut
) );

372 
	}
}

377 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcRuÀSuµ‹t
()

379 
	`Log
(Ë<< 
kVERBOSE
 << "EvÆu©ög RuÀ suµ‹t" << 
Endl
;

380 
DoubÀ_t
 
s
,
t
,
°Ÿ
,
âŸ
,
ssb
;

381 
DoubÀ_t
 
ssig
, 
sbkg
, 
ssum
;

382 
I¡_t
 
ödruÀ
=0;

383 
°Ÿ
 = 0;

384 
âŸ
 = 0;

386 
	`SëAvîageRuÀSigma
(0.4);

387 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = 
	`GëTøöögEvíts
();

388 
DoubÀ_t
 
ƒuÀs
 = 
°©ic_ˇ°
<DoubÀ_t>(
fRuÀs
.
	`size
());

389 
DoubÀ_t
 
ew
;

391 i‡((
ƒuÀs
>0Ë&& (
evíts
->
	`size
()>0)) {

392  
°d
::
ve˘‹
< 
RuÀ
 * >::
ôî©‹
 
ôrRuÀ
=
fRuÀs
.
	`begö
(); iåRuÀ!=fRuÀs.
	`íd
(); itrRule++ ) {

393 
s
=0.0;

394 
ssig
=0.0;

395 
sbkg
=0.0;

396  
°d
::
ve˘‹
<c⁄° 
Evít
 * >::
c⁄°_ôî©‹
 
ôrEvít
=
evíts
->
	`begö
(); iåEvít!Ûvíts->
	`íd
(); itrEvent++ ) {

397 i‡((*
ôrRuÀ
)->
	`EvÆEvít
–*(*
ôrEvít
) )) {

398 
ew
 = (*
ôrEvít
)->
	`GëWeight
();

399 
s
 +
ew
;

400 i‡(
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(*
ôrEvít
)Ë
ssig
 +
ew
;

401 
sbkg
 +
ew
;

405 
s
 = s/
fRuÀFô
->
	`GëNEveEff
();

406 
t
 = 
s
*(1.0-s);

407 
t
 = (t<0 ? 0:
	`sqπ
(t));

408 
°Ÿ
 +
s
;

409 
âŸ
 +
t
;

410 
ssum
 = 
ssig
+
sbkg
;

411 
ssb
 = (
ssum
>0 ? 
	`DoubÀ_t
(
ssig
)/DoubÀ_t(ssig+
sbkg
) : 0.0 );

412 (*
ôrRuÀ
)->
	`SëSuµ‹t
(
s
);

413 (*
ôrRuÀ
)->
	`SëN‹m
(
t
);

414 (*
ôrRuÀ
)->
	`SëSSB
–
ssb
 );

415 (*
ôrRuÀ
)->
	`SëSSBNeve
(
	`DoubÀ_t
(
ssig
+
sbkg
));

416 
ödruÀ
++;

418 
fAvîageSuµ‹t
 = 
°Ÿ
/
ƒuÀs
;

419 
fAvîageRuÀSigma
 = 
TM©h
::
	`Sqπ
(
fAvîageSuµ‹t
*(1.0-fAverageSupport));

420 
	`Log
(Ë<< 
kVERBOSE
 << "Sènd¨d devüti⁄ o‡suµ‹à" << 
fAvîageRuÀSigma
 << 
Endl
;

421 
	`Log
(Ë<< 
kVERBOSE
 << "AvîagêruÀ suµ‹à = " << 
fAvîageSuµ‹t
 << 
Endl
;

423 
	}
}

428 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcImp‹èn˚
()

430 
DoubÀ_t
 
maxRuÀImp
 = 
	`CÆcRuÀImp‹èn˚
();

431 
DoubÀ_t
 
maxLöImp
 = 
	`CÆcLöImp‹èn˚
();

432 
DoubÀ_t
 
maxImp
 = (
maxRuÀImp
>
maxLöImp
 ? maxRuleImp : maxLinImp);

433 
	`SëImp‹èn˚Ref
–
maxImp
 );

434 
	}
}

439 
	gTMVA
::
RuÀEn£mbÀ
::
	$SëImp‹èn˚Ref
(
DoubÀ_t
 
im¥ef
)

441  
UI¡_t
 
i
=0; i<
fRuÀs
.
	`size
(); i++ ) {

442 
fRuÀs
[
i
]->
	`SëImp‹èn˚Ref
(
im¥ef
);

444 
fImp‹èn˚Ref
 = 
im¥ef
;

445 
	}
}

449 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcRuÀImp‹èn˚
()

451 
DoubÀ_t
 
maxImp
=-1.0;

452 
DoubÀ_t
 
imp
;

453 
I¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

454  
i
=0; i<
ƒuÀs
; i++ ) {

455 
fRuÀs
[
i
]->
	`CÆcImp‹èn˚
();

456 
imp
 = 
fRuÀs
[
i
]->
	`GëImp‹èn˚
();

457 i‡(
imp
>
maxImp
) maxImp = imp;

459  
I¡_t
 
i
=0; i<
ƒuÀs
; i++ ) {

460 
fRuÀs
[
i
]->
	`SëImp‹èn˚Ref
(
maxImp
);

463  
maxImp
;

464 
	}
}

469 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcLöImp‹èn˚
()

471 
DoubÀ_t
 
maxImp
=-1.0;

472 
UI¡_t
 
nv¨s
 = 
fLöC€fficõ¡s
.
	`size
();

473 
fLöImp‹èn˚
.
	`ªsize
(
nv¨s
,0.0);

474 i‡(!
	`DoLöór
()Ë 
maxImp
;

483 
DoubÀ_t
 
imp
;

484  
UI¡_t
 
i
=0; i<
nv¨s
; i++ ) {

485 
imp
 = 
fAvîageRuÀSigma
*
TM©h
::
	`Abs
(
fLöC€fficõ¡s
[
i
]);

486 
fLöImp‹èn˚
[
i
] = 
imp
;

487 i‡(
imp
>
maxImp
) maxImp = imp;

489  
maxImp
;

490 
	}
}

495 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcV¨Imp‹èn˚
()

497 
	`Log
(Ë<< 
kVERBOSE
 << "Compuã v¨übÀ imp‹èn˚" << 
Endl
;

498 
DoubÀ_t
 
rimp
;

499 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

500 i‡(
	`GëMëhodBa£
()==0Ë
	`Log
(Ë<< 
kFATAL
 << "RuÀEn£mbÀ::CÆcV¨Imp‹èn˚(Ë- shouldÇŸ bêhîe!" << 
Endl
;

501 
UI¡_t
 
nv¨s
 = 
	`GëMëhodBa£
()->
	`GëNv¨
();

502 
UI¡_t
 
nv¨sU£d
;

503 
DoubÀ_t
 
rimpN
;

504 
fV¨Imp‹èn˚
.
	`ªsize
(
nv¨s
,0);

506 i‡(
	`DoRuÀs
()) {

507  
UI¡_t
 
öd
=0; ind<
ƒuÀs
; ind++ ) {

508 
rimp
 = 
fRuÀs
[
öd
]->
	`GëImp‹èn˚
();

509 
nv¨sU£d
 = 
fRuÀs
[
öd
]->
	`GëNumV¨sU£d
();

510 i‡(
nv¨sU£d
<1)

511 
	`Log
(Ë<< 
kFATAL
 << "<CÆcV¨Imp‹èn˚> V¨übÀ†f‹ imp‹èn˚ cÆc!!!??? A BUG!" << 
Endl
;

512 
rimpN
 = (
nv¨sU£d
 > 0 ? 
rimp
/nvarsUsed:0.0);

513  
UI¡_t
 
iv
=0; iv<
nv¨s
; iv++ ) {

514 i‡(
fRuÀs
[
öd
]->
	`C⁄èösV¨übÀ
(
iv
)) {

515 
fV¨Imp‹èn˚
[
iv
] +
rimpN
;

521 i‡(
	`DoLöór
()) {

522  
UI¡_t
 
iv
=0; iv<
fLöTîmOK
.
	`size
(); iv++ ) {

523 i‡(
fLöTîmOK
[
iv
]Ë
fV¨Imp‹èn˚
[iv] +
fLöImp‹èn˚
[iv];

529 
DoubÀ_t
 
maximp
 = 0.0;

530  
UI¡_t
 
iv
=0; iv<
nv¨s
; iv++ ) {

531 i‡–
fV¨Imp‹èn˚
[
iv
] > 
maximp
 ) maximp = fVarImportance[iv];

533 i‡(
maximp
>0) {

534  
UI¡_t
 
iv
=0; iv<
nv¨s
; iv++ ) {

535 
fV¨Imp‹èn˚
[
iv
] *1.0/
maximp
;

538 
	}
}

545 
	gTMVA
::
RuÀEn£mbÀ
::
SëRuÀs
–c⁄° 
°d
::
ve˘‹
<
RuÀ
 *> & 
ruÀs
 )

547 
DñëeRuÀs
();

549 
	gfRuÀs
.
ªsize
(
ruÀs
.
size
());

550 
UI¡_t
 
	gi
=0; i<
	gfRuÀs
.
size
(); i++) {

551 
	gfRuÀs
[
i
] = 
ruÀs
[i];

553 
	gfEvítCacheOK
 = 
kFALSE
;

560 
	gTMVA
::
RuÀEn£mbÀ
::
MakeRuÀs
–c⁄° 
°d
::
ve˘‹
< c⁄° 
Decisi⁄Tªe
 *> & 
f‹e°
 )

562 
fRuÀs
.
˛ór
();

563 i‡(!
DoRuÀs
()) ;

565 
I¡_t
 
	gƒuÀsCheck
=0;

566 
I¡_t
 
	gƒuÀs
;

567 
I¡_t
 
	g√ndn
;

568 
DoubÀ_t
 
	gsum√ndn
=0;

569 
DoubÀ_t
 
	gsumn2
=0;

572 
UI¡_t
 
	g¡ªes
 = 
f‹e°
.
size
();

573  
UI¡_t
 
	göd
=0; ind<
	g¡ªes
; ind++ ) {

575 
MakeRuÀsFromTªe
–
f‹e°
[
öd
] );

576 
	gƒuÀs
 = 
CÆcNRuÀs
–
f‹e°
[
öd
] );

577 
	g√ndn
 = (
ƒuÀs
/2) + 1;

578 
	gsum√ndn
 +
√ndn
;

579 
	gsumn2
 +
√ndn
*nendn;

580 
	gƒuÀsCheck
 +
ƒuÀs
;

582 
DoubÀ_t
 
	gnmón
 = (
¡ªes
>0Ë? 
sum√ndn
/ntrees : 0;

583 
DoubÀ_t
 
	gnsigm
 = 
TM©h
::
Sqπ
–
gToﬁs
().
CompuãV¨ün˚
(
sumn2
,
sum√ndn
,
¡ªes
) );

584 
DoubÀ_t
 
	gndev
 = 2.0*(
nmón
-2.0-
nsigm
)/(nmean-2.0+nsigm);

586 
Log
(Ë<< 
	gkVERBOSE
 << "Avîagênumbî o‡ídÇode†≥∏åì = " << 
	gnmón
 << 
	gEndl
;

587 i‡(
	g¡ªes
>1Ë
Log
(Ë<< 
	gkVERBOSE
 << "sigma of ditto ( ~= mean-2 ?) = "

588 << 
	gnsigm


589 << 
	gEndl
;

590 
Log
(Ë<< 
	gkVERBOSE
 << "Devüti⁄ fromÉxp⁄ítü»modñ = " << 
	gndev
 << 
	gEndl
;

591 
Log
(Ë<< 
	gkVERBOSE
 << "C‹ª•⁄d†tÿL (eq. 13, RuÀFôÖ¥Ë" << 
	gnmón
 << 
	gEndl
;

593 i‡(
	gƒuÀsCheck
 !
°©ic_ˇ°
<
I¡_t
>(
fRuÀs
.
size
())) {

594 
Log
(Ë<< 
kFATAL


595 << "BUG!Çumbî o‡gíî©edándÖossibÀÑuÀ†dÿnŸ m©ch! N‘uÀsË " << 
fRuÀs
.
size
()

596 << " !" << 
ƒuÀsCheck
 << 
Endl
;

598 
Log
(Ë<< 
	gkVERBOSE
 << "Numbî o‡gíî©edÑuÀs: " << 
	gfRuÀs
.
size
(Ë<< 
	gEndl
;

601 
	gfNRuÀsGíî©ed
 = 
fRuÀs
.
size
();

603 
RemoveSimû¨RuÀs
();

605 
Re£tC€fficõ¡s
();

613 
	gTMVA
::
RuÀEn£mbÀ
::
	$MakeLöórTîms
()

615 i‡(!
	`DoLöór
()) ;

617 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = 
	`GëTøöögEvíts
();

618 
UI¡_t
 
√ve
 = 
evíts
->
	`size
();

619 
UI¡_t
 
nv¨s
 = ((*
evíts
)[0])->
	`GëNV¨übÀs
();

620 
DoubÀ_t
 
vÆ
,
ew
;

621 
°d
::
	t∑ú
< 
	tDoubÀ_t
, 
	tI¡_t
> 
	td©aTy≥
;

622 
°d
::
	t∑ú
< 
	tDoubÀ_t
, 
	td©aTy≥
 > 
	td©aPoöt
;

624 
°d
::
ve˘‹
< std::ve˘‹<
d©aPoöt
> > 
	`v¨d©a
(
nv¨s
);

625 
°d
::
ve˘‹
< 
DoubÀ_t
 > 
	`v¨sum
(
nv¨s
,0.0);

626 
°d
::
ve˘‹
< 
DoubÀ_t
 > 
	`v¨sum2
(
nv¨s
,0.0);

631 
UI¡_t
 
i
=0; i<
√ve
; i++) {

632 
ew
 = ((*
evíts
)[
i
])->
	`GëWeight
();

633 
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

634 
vÆ
 = ((*
evíts
)[
i
])->
	`GëVÆue
(
v
);

635 
v¨d©a
[
v
].
	`push_back
–
	`d©aPoöt
–
vÆ
, 
	`d©aTy≥
(
ew
,((*
evíts
)[
i
])->
	`GëCœss
()) ) );

639 
fLöDP
.
	`˛ór
();

640 
fLöDM
.
	`˛ór
();

641 
fLöC€fficõ¡s
.
	`˛ór
();

642 
fLöN‹m
.
	`˛ór
();

643 
fLöDP
.
	`ªsize
(
nv¨s
,0);

644 
fLöDM
.
	`ªsize
(
nv¨s
,0);

645 
fLöC€fficõ¡s
.
	`ªsize
(
nv¨s
,0);

646 
fLöN‹m
.
	`ªsize
(
nv¨s
,0);

648 
DoubÀ_t
 
avîageWeight
 = 
√ve
 ? 
fRuÀFô
->
	`GëNEveEff
()/
°©ic_ˇ°
<Double_t>(neve) : 0;

650 
DoubÀ_t
 
°dl
;

653 
DoubÀ_t
 
lx
;

654 
DoubÀ_t
 
nqu™t
;

655 
DoubÀ_t
 
√ff
;

656 
UI¡_t
 
ödqu™tM
;

657 
UI¡_t
 
ödqu™tP
;

659 
MëhodBa£
 *
fMB
=
c⁄°_ˇ°
<MëhodBa£ *>(
fRuÀFô
->
	`GëMëhodBa£
());

661 
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

662 
v¨sum
[
v
] = 0;

663 
v¨sum2
[
v
] = 0;

665 
°d
::
	`s‹t
–
v¨d©a
[
v
].
	`begö
(),v¨d©a[v].
	`íd
() );

666 
nqu™t
 = 
fLöQu™tûe
*
fRuÀFô
->
	`GëNEveEff
();

667 
√ff
=0;

668 
UI¡_t
 
õ
=0;

670  (
õ
<
√ve
Ë&& (
√ff
<
nqu™t
) ) {

671 
√ff
 +
v¨d©a
[
v
][
õ
].
£c⁄d
.
fú°
;

672 
õ
++;

674 
ödqu™tM
 = (
õ
==0 ? 0:ie-1);

676 
õ
 = 
√ve
;

677 
√ff
=0;

678  (
õ
>0Ë&& (
√ff
<
nqu™t
) ) {

679 
õ
--;

680 
√ff
 +
v¨d©a
[
v
][
õ
].
£c⁄d
.
fú°
;

682 
ödqu™tP
 = (
õ
==
√ve
 ? ie=neve-1:ie);

684 
fLöDM
[
v
] = 
v¨d©a
[v][
ödqu™tM
].
fú°
;

685 
fLöDP
[
v
] = 
v¨d©a
[v][
ödqu™tP
].
fú°
;

687 if(!
fMB
->
	`IsSûítFûe
())

689 i‡(
fLöPDFB
[
v
]Ë
dñëe
 fLinPDFB[v];

690 i‡(
fLöPDFS
[
v
]Ë
dñëe
 fLinPDFS[v];

691 
fLöPDFB
[
v
] = 
√w
 
	`TH1F
(
	`F‹m
("bkgv¨%d",v),"bkgÅemphi°",40,
fLöDM
[v],
fLöDP
[v]);

692 
fLöPDFS
[
v
] = 
√w
 
	`TH1F
(
	`F‹m
("sigv¨%d",v),"sigÅemphi°",40,
fLöDM
[v],
fLöDP
[v]);

693 
fLöPDFB
[
v
]->
	`Sumw2
();

694 
fLöPDFS
[
v
]->
	`Sumw2
();

697 
I¡_t
 
ty≥
;

698 c⁄° 
DoubÀ_t
 
w
 = 1.0/
fRuÀFô
->
	`GëNEveEff
();

699 
õ
=0; ie<
√ve
; ie++) {

700 
vÆ
 = 
v¨d©a
[
v
][
õ
].
fú°
;

701 
ew
 = 
v¨d©a
[
v
][
õ
].
£c⁄d
.
fú°
;

702 
ty≥
 = 
v¨d©a
[
v
][
õ
].
£c⁄d
.second;

703 
lx
 = 
TM©h
::
	`Mö
–
fLöDP
[
v
], TM©h::
	`Max
–
fLöDM
[v], 
vÆ
 ) );

704 
v¨sum
[
v
] +
ew
*
lx
;

705 
v¨sum2
[
v
] +
ew
*
lx
*lx;

706 if(!
fMB
->
	`IsSûítFûe
())

708 i‡(
ty≥
==1Ë
fLöPDFS
[
v
]->
	`Fûl
(
lx
,
w
*
ew
);

709 
fLöPDFB
[
v
]->
	`Fûl
(
lx
,
w
*
ew
);

715 
°dl
 = 
TM©h
::
	`Sqπ
–(
v¨sum2
[
v
] - (
v¨sum
[v]*v¨sum[v]/
fRuÀFô
->
	`GëNEveEff
()))/(fRuÀFô->GëNEveEff()-
avîageWeight
) );

716 
fLöN‹m
[
v
] = 
	`CÆcLöN‹m
(
°dl
);

719 if(!
fMB
->
	`IsSûítFûe
())

721 
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

722 
fLöPDFS
[
v
]->
	`Wrôe
();

723 
fLöPDFB
[
v
]->
	`Wrôe
();

726 
	}
}

731 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$PdfLöór
–
DoubÀ_t
 & 
nsig
, DoubÀ_à& 
¡Ÿ
 ) const

733 
UI¡_t
 
nv¨s
=
fLöDP
.
	`size
();

735 
DoubÀ_t
 
f°Ÿ
=0;

736 
DoubÀ_t
 
fbtŸ
=0;

737 
nsig
 = 0;

738 
¡Ÿ
 = 
nv¨s
;

739 
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

740 
DoubÀ_t
 
vÆ
 = 
fEvítLöórVÆ
[
v
];

741 
I¡_t
 
bö
 = 
fLöPDFS
[
v
]->
	`FödBö
(
vÆ
);

742 
f°Ÿ
 +
fLöPDFS
[
v
]->
	`GëBöC⁄ã¡
(
bö
);

743 
fbtŸ
 +
fLöPDFB
[
v
]->
	`GëBöC⁄ã¡
(
bö
);

745 i‡(
nv¨s
<1)  0;

746 
¡Ÿ
 = (
f°Ÿ
+
fbtŸ
)/
	`DoubÀ_t
(
nv¨s
);

747 
nsig
 = (
f°Ÿ
)/
	`DoubÀ_t
(
nv¨s
);

748  
f°Ÿ
/(f°Ÿ+
fbtŸ
);

749 
	}
}

755 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$PdfRuÀ
–
DoubÀ_t
 & 
nsig
, DoubÀ_à& 
¡Ÿ
 ) const

757 
DoubÀ_t
 
sump
 = 0;

758 
DoubÀ_t
 
sumok
 = 0;

759 
DoubÀ_t
 
sumz
 = 0;

760 
DoubÀ_t
 
ssb
;

761 
DoubÀ_t
 
√ve
;

763 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

764 
UI¡_t
 
ú
=0; ir<
ƒuÀs
; ir++) {

765 i‡(
fEvítRuÀVÆ
[
ú
]>0) {

766 
ssb
 = 
fEvítRuÀVÆ
[
ú
]*
	`GëRuÀsC⁄°
(ú)->
	`GëSSB
();

767 
√ve
 = 
	`GëRuÀsC⁄°
(
ú
)->
	`GëSSBNeve
();

768 
sump
 +
ssb
*
√ve
;

769 
sumok
 +
√ve
;

771 
sumz
 += 1.0;

774 
nsig
 = 
sump
;

775 
¡Ÿ
 = 
sumok
;

777 i‡(
¡Ÿ
>0Ë 
nsig
/ntot;

779 
	}
}

785 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$FSèr
–c⁄° 
Evít
 & 
e
 )

787 
	`SëEvít
(
e
);

788 
	`Upd©eEvítVÆ
();

789  
	`FSèr
();

790 
	}
}

796 
DoubÀ_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$FSèr
() const

798 
DoubÀ_t
 
p
=0;

799 
DoubÀ_t
 
ƒs
=0, 
ƒt
=0;

800 
DoubÀ_t
 
∆s
=0, 
∆t
=0;

801 
DoubÀ_t
 
¡
;

802 
DoubÀ_t
 
¥
=0;

803 
DoubÀ_t
 
∂
=0;

806 i‡(
	`DoLöór
()Ë
∂
 = 
	`PdfLöór
(
∆s
, 
∆t
);

807 i‡(
	`DoRuÀs
()Ë
¥
 = 
	`PdfRuÀ
(
ƒs
, 
ƒt
);

809 i‡((
∆t
>0Ë&& (
ƒt
>0)Ë
¡
=2.0;

810 
¡
=1.0;

811 
p
 = (
∂
+
¥
)/
¡
;

812  2.0*
p
-1.0;

813 
	}
}

818 
	gTMVA
::
RuÀEn£mbÀ
::
	$RuÀRe•⁄£Sèts
()

821 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = 
	`GëTøöögEvíts
();

822 c⁄° 
UI¡_t
 
√ve
 = 
evíts
->
	`size
();

823 c⁄° 
UI¡_t
 
nv¨s
 = 
	`GëMëhodBa£
()->
	`GëNv¨
();

824 c⁄° 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

825 c⁄° 
Evít
 *
eveD©a
;

827 
Boﬁ_t
 
sigRuÀ
;

828 
Boﬁ_t
 
sigTag
;

829 
Boﬁ_t
 
bkgTag
;

831 
Boﬁ_t
 
sigTrue
;

832 
Boﬁ_t
 
ègged
;

834 
I¡_t
 
nsig
=0;

835 
I¡_t
 
nbkg
=0;

836 
I¡_t
 
¡ag
=0;

837 
I¡_t
 
nss
=0;

838 
I¡_t
 
nsb
=0;

839 
I¡_t
 
nbb
=0;

840 
I¡_t
 
nbs
=0;

841 
°d
::
ve˘‹
<
I¡_t
> 
v¨˙t
;

843 
fRuÀPSS
.
	`˛ór
();

844 
fRuÀPSB
.
	`˛ór
();

845 
fRuÀPBS
.
	`˛ór
();

846 
fRuÀPBB
.
	`˛ór
();

847 
fRuÀPTag
.
	`˛ór
();

849 
v¨˙t
.
	`ªsize
(
nv¨s
,0);

850 
fRuÀV¨Føc
.
	`˛ór
();

851 
fRuÀV¨Føc
.
	`ªsize
(
nv¨s
,0);

853  
UI¡_t
 
i
=0; i<
ƒuÀs
; i++ ) {

854  
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

855 i‡(
fRuÀs
[
i
]->
	`C⁄èösV¨übÀ
(
v
)Ë
v¨˙t
[v]++;

857 
sigRuÀ
 = 
fRuÀs
[
i
]->
	`IsSig«lRuÀ
();

858 i‡(
sigRuÀ
) {

859 
nsig
++;

862 
nbkg
++;

865 
nss
=0;

866 
nsb
=0;

867 
nbs
=0;

868 
nbb
=0;

869 
¡ag
=0;

871 
UI¡_t
 
e
=0;É<
√ve
;É++) {

872 
eveD©a
 = (*
evíts
)[
e
];

873 
ègged
 = 
fRuÀs
[
i
]->
	`EvÆEvít
(*
eveD©a
);

874 
sigTag
 = (
ègged
 && 
sigRuÀ
);

875 
bkgTag
 = (
ègged
 && (!
sigRuÀ
));

877 
sigTrue
 = (
eveD©a
->
	`GëCœss
() == 0);

878 i‡(
ègged
) {

879 
¡ag
++;

880 i‡(
sigTag
 && 
sigTrue
Ë
nss
++;

881 i‡(
sigTag
 && !
sigTrue
Ë
nsb
++;

882 i‡(
bkgTag
 && 
sigTrue
Ë
nbs
++;

883 i‡(
bkgTag
 && !
sigTrue
Ë
nbb
++;

887 i‡(
¡ag
>0 && 
√ve
 > 0) {

888 
fRuÀPTag
.
	`push_back
(
	`DoubÀ_t
(
¡ag
)/DoubÀ_t(
√ve
));

889 
fRuÀPSS
.
	`push_back
(
	`DoubÀ_t
(
nss
)/DoubÀ_t(
¡ag
));

890 
fRuÀPSB
.
	`push_back
(
	`DoubÀ_t
(
nsb
)/DoubÀ_t(
¡ag
));

891 
fRuÀPBS
.
	`push_back
(
	`DoubÀ_t
(
nbs
)/DoubÀ_t(
¡ag
));

892 
fRuÀPBB
.
	`push_back
(
	`DoubÀ_t
(
nbb
)/DoubÀ_t(
¡ag
));

896 
fRuÀFSig
 = (
nsig
>0Ë? 
°©ic_ˇ°
<
DoubÀ_t
>“sig)/°©ic_ˇ°<DoubÀ_t>“sig+
nbkg
) : 0;

897  
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

898 
fRuÀV¨Føc
[
v
] = (
ƒuÀs
>0Ë? 
	`DoubÀ_t
(
v¨˙t
[v])/Double_t(nrules) : 0;

900 
	}
}

905 
	gTMVA
::
RuÀEn£mbÀ
::
	$RuÀSèti°ics
()

907 c⁄° 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

908 
DoubÀ_t
 
nc
;

909 
DoubÀ_t
 
sumNc
 =0;

910 
DoubÀ_t
 
sumNc2
=0;

911  
UI¡_t
 
i
=0; i<
ƒuÀs
; i++ ) {

912 
nc
 = 
°©ic_ˇ°
<
DoubÀ_t
>(
fRuÀs
[
i
]->
	`GëNcuts
());

913 
sumNc
 +
nc
;

914 
sumNc2
 +
nc
*nc;

916 
fRuÀNCave
 = 0.0;

917 
fRuÀNCsig
 = 0.0;

918 i‡(
ƒuÀs
>0) {

919 
fRuÀNCave
 = 
sumNc
/
ƒuÀs
;

920 
fRuÀNCsig
 = 
TM©h
::
	`Sqπ
(
	`gToﬁs
().
	`CompuãV¨ün˚
(
sumNc2
,
sumNc
,
ƒuÀs
));

922 
	}
}

927 
	gTMVA
::
RuÀEn£mbÀ
::
	$PrötRuÀGí
() const

929 
	`Log
(Ë<< 
kHEADER
 << "-------------------RULE ENSEMBLE SUMMARY------------------------" << 
Endl
;

930 c⁄° 
MëhodRuÀFô
 *
mrf
 = 
	`GëMëhodRuÀFô
();

931 i‡(
mrf
Ë
	`Log
(Ë<< 
kINFO
 << "Tªêåaöög mëhod : " << (mrf->
	`U£Boo°
(Ë? "AdaBoo°":"R™dom"Ë<< 
Endl
;

932 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡evít†≥∏åì : " << 
fRuÀFô
->
	`GëNTªeSam∂e
(Ë<< 
Endl
;

933 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡åì† : " << 
fRuÀFô
->
	`GëF‹e°
().
	`size
(Ë<< 
Endl
;

934 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡gíî©edÑuÀ† : " << 
fNRuÀsGíî©ed
 << 
Endl
;

935 
	`Log
(Ë<< 
kINFO
 << "Idem,á·î cÀ™u∞ : " << 
fRuÀs
.
	`size
(Ë<< 
Endl
;

936 
	`Log
(Ë<< 
kINFO
 << "Avîagênumbî o‡cut†≥∏ruÀ : " << 
	`F‹m
("%8.2f",
fRuÀNCave
Ë<< 
Endl
;

937 
	`Log
(Ë<< 
kINFO
 << "S¥ód i¿numbî o‡cut†≥∏ruÀ†: " << 
	`F‹m
("%8.2f",
fRuÀNCsig
Ë<< 
Endl
;

938 
	`Log
(Ë<< 
kVERBOSE
 << "Com∂exôy : " << 
	`F‹m
("%8.2f",
fRuÀNCave
*
fRuÀNCsig
Ë<< 
Endl
;

939 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

940 
	`Log
(Ë<< 
kINFO
 << 
Endl
;

941 
	}
}

946 
	gTMVA
::
RuÀEn£mbÀ
::
	$Pröt
() const

948 c⁄° 
EMsgTy≥
 
kmty≥
=
kINFO
;

949 c⁄° 
Boﬁ_t
 
isDebug
 = (
fLoggî
->
	`GëMöTy≥
()<=
kDEBUG
);

951 
	`Log
(Ë<< 
kmty≥
 << 
Endl
;

952 
	`Log
(Ë<< 
kmty≥
 << "================================================================" << 
Endl
;

953 
	`Log
(Ë<< 
kmty≥
 << " M o dÉÜ " << 
Endl
;

954 
	`Log
(Ë<< 
kmty≥
 << "================================================================" << 
Endl
;

956 
I¡_t
 
öd
;

957 c⁄° 
UI¡_t
 
nv¨s
 = 
	`GëMëhodBa£
()->
	`GëNv¨
();

958 c⁄° 
I¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

959 c⁄° 
I¡_t
 
¥ötN
 = 
TM©h
::
	`Mö
(10,
ƒuÀs
);

960 
I¡_t
 
maxL
 = 0;

961 
UI¡_t
 
iv
 = 0; iv<
fV¨Imp‹èn˚
.
	`size
(); iv++) {

962 i‡(
	`GëMëhodBa£
()->
	`GëI≈utLabñ
(
iv
).
	`Lígth
(Ë> 
maxL
) maxL = GetMethodBase()->GetInputLabel(iv).Length();

965 i‡(
isDebug
) {

966 
	`Log
(Ë<< 
kDEBUG
 << "V¨übÀ imp‹èn˚:" << 
Endl
;

967 
UI¡_t
 
iv
 = 0; iv<
fV¨Imp‹èn˚
.
	`size
(); iv++) {

968 
	`Log
(Ë<< 
kDEBUG
 << 
°d
::
	`£tw
(
maxL
Ë<< 
	`GëMëhodBa£
()->
	`GëI≈utLabñ
(
iv
)

969 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
)

970 << " : " << 
	`F‹m
(" %3.3f",
fV¨Imp‹èn˚
[
iv
]Ë<< 
Endl
;

974 
	`Log
(Ë<< 
kHEADER
 << "Off£à◊0Ë" << 
fOff£t
 << 
Endl
;

976 i‡(
	`DoLöór
()) {

977 i‡(
fLöN‹m
.
	`size
() > 0) {

978 
	`Log
(Ë<< 
kmty≥
 << "------------------------------------" << 
Endl
;

979 
	`Log
(Ë<< 
kmty≥
 << "Löó∏modñ (weight†u¬‹mÆi£d)" << 
Endl
;

980 
	`Log
(Ë<< 
kmty≥
 << "------------------------------------" << 
Endl
;

981 
	`Log
(Ë<< 
kmty≥
 << 
°d
::
	`£tw
(
maxL
) << "Variable"

982 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
) << " : "

983 << 
°d
::
	`£tw
(11) << " Weights"

984 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
) << " : "

986 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
)

987 << 
Endl
;

988 
	`Log
(Ë<< 
kmty≥
 << "------------------------------------" << 
Endl
;

989  
UI¡_t
 
i
=0; i<
fLöN‹m
.
	`size
(); i++ ) {

990 
	`Log
(Ë<< 
kmty≥
 << 
°d
::
	`£tw
(°d::
	`max
(
maxL
,8)Ë<< 
	`GëMëhodBa£
()->
	`GëI≈utLabñ
(
i
);

991 i‡(
fLöTîmOK
[
i
]) {

992 
	`Log
(Ë<< 
kmty≥


993 << 
°d
::
	`ª£tiosÊags
(°d::
ios
::
right
)

994 << " : " << 
	`F‹m
(" %10.3e",
fLöC€fficõ¡s
[
i
]*
fLöN‹m
[i])

995 << " : " << 
	`F‹m
(" %3.3f",
fLöImp‹èn˚
[
i
]/
fImp‹èn˚Ref
Ë<< 
Endl
;

998 
	`Log
(Ë<< 
kmty≥
 << "-> importance belowÅhreshold = "

999 << 
	`F‹m
(" %3.3f",
fLöImp‹èn˚
[
i
]/
fImp‹èn˚Ref
Ë<< 
Endl
;

1002 
	`Log
(Ë<< 
kmty≥
 << "------------------------------------" << 
Endl
;

1005 
	`Log
(Ë<< 
kmty≥
 << "Löó∏ãrm†wîêdißbÀd" << 
Endl
;

1007 i‡((!
	`DoRuÀs
()Ë|| (
ƒuÀs
==0)) {

1008 i‡(!
	`DoRuÀs
()) {

1009 
	`Log
(Ë<< 
kmty≥
 << "RuÀÅîm†wîêdißbÀd" << 
Endl
;

1012 
	`Log
(Ë<< 
kmty≥
 << "EvíÅhoughÑuÀ†wîêö˛uded i¿thêmodñ,Ç⁄ê∑s£d! " << 
ƒuÀs
 << 
Endl
;

1016 
	`Log
(Ë<< 
kmty≥
 << "Numbî o‡ruÀ†" << 
ƒuÀs
 << 
Endl
;

1017 i‡(
isDebug
) {

1018 
	`Log
(Ë<< 
kmty≥
 << "N(cutsËöÑuÀs,ávîagê" << 
fRuÀNCave
 << 
Endl
;

1019 
	`Log
(Ë<< 
kmty≥
 << " RMS = " << 
fRuÀNCsig
 << 
Endl
;

1020 
	`Log
(Ë<< 
kmty≥
 << "Fø˘i⁄ o‡sig«»ruÀ†" << 
fRuÀFSig
 << 
Endl
;

1021 
	`Log
(Ë<< 
kmty≥
 << "Fø˘i⁄ o‡ruÀ†c⁄èöögá v¨übÀ (%):" << 
Endl
;

1022  
UI¡_t
 
v
=0; v<
nv¨s
; v++) {

1023 
	`Log
(Ë<< 
kmty≥
 << " " << 
°d
::
	`£tw
(
maxL
Ë<< 
	`GëMëhodBa£
()->
	`GëI≈utLabñ
(
v
);

1024 
	`Log
(Ë<< 
kmty≥
 << 
	`F‹m
(" = %2.2f",
fRuÀV¨Føc
[
v
]*100.0Ë<< " %" << 
Endl
;

1030 
°d
::
li°
< std::
∑ú
<,> > 
s‹ãdImp
;

1031 
I¡_t
 
i
=0; i<
ƒuÀs
; i++) {

1032 
s‹ãdImp
.
	`push_back
–
°d
::
∑ú
<,>–
fRuÀs
[
i
]->
	`GëImp‹èn˚
(),i ) );

1034 
s‹ãdImp
.
	`s‹t
();

1036 
	`Log
(Ë<< 
kmty≥
 << "PrötögÅhêfú° " << 
¥ötN
 << "ÑuÀs, ordîed i¿imp‹èn˚." << 
Endl
;

1037 
pöd
=0;

1038  
°d
::
li°
< std::
∑ú
<,> >::
ªvî£_ôî©‹
 
ô∑ú
 = 
s‹ãdImp
.
	`rbegö
();

1039 
ô∑ú
 !
s‹ãdImp
.
	`ªnd
(); itpair++ ) {

1040 
öd
 = 
ô∑ú
->
£c⁄d
;

1044 
fRuÀs
[
öd
]->
	`PrötLoggî
(
	`F‹m
("RuÀ %4d : ",
pöd
+1));

1045 
pöd
++;

1046 i‡(
pöd
==
¥ötN
) {

1047 i‡(
ƒuÀs
==
¥ötN
) {

1048 
	`Log
(Ë<< 
kmty≥
 << "AŒÑuÀ†¥öãd" << 
Endl
;

1051 
	`Log
(Ë<< 
kmty≥
 << "SkùpögÅhê√xà" << 
ƒuÀs
-
¥ötN
 << "ÑuÀs" << 
Endl
;

1057 
	`Log
(Ë<< 
kmty≥
 << "================================================================" << 
Endl
;

1058 
	`Log
(Ë<< 
kmty≥
 << 
Endl
;

1059 
	}
}

1064 
	gTMVA
::
RuÀEn£mbÀ
::
	$PrötRaw
–
°d
::
o°ªam
 & 
os
 ) const

1066 
I¡_t
 
dp
 = 
os
.
	`¥ecisi⁄
();

1067 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

1070 
os
 << "Imp‹èn˚Cut" << 
fImp‹èn˚Cut
 << 
°d
::
ídl
;

1071 
os
 << "LöQu™tûe" << 
fLöQu™tûe
 << 
°d
::
ídl
;

1072 
os
 << "AvîageSuµ‹t" << 
fAvîageSuµ‹t
 << 
°d
::
ídl
;

1073 
os
 << "AvîageRuÀSigma" << 
fAvîageRuÀSigma
 << 
°d
::
ídl
;

1074 
os
 << "Off£t" << 
fOff£t
 << 
°d
::
ídl
;

1075 
os
 << "NRuÀs" << 
ƒuÀs
 << 
°d
::
ídl
;

1076 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++){

1077 
os
 << "***RuÀ " << 
i
 << 
°d
::
ídl
;

1078 (
fRuÀs
[
i
])->
	`PrötRaw
(
os
);

1080 
UI¡_t
 
∆öór
 = 
fLöN‹m
.
	`size
();

1082 
os
 << "NLöór" << 
fLöTîmOK
.
	`size
(Ë<< 
°d
::
ídl
;

1083 
UI¡_t
 
i
=0; i<
∆öór
; i++) {

1084 
os
 << "***Löó∏" << 
i
 << 
°d
::
ídl
;

1085 
os
 << 
°d
::
	`£çªcisi⁄
(10Ë<< (
fLöTîmOK
[
i
] ? 1:0) << " "

1086 << 
fLöC€fficõ¡s
[
i
] << " "

1087 << 
fLöN‹m
[
i
] << " "

1088 << 
fLöDM
[
i
] << " "

1089 << 
fLöDP
[
i
] << " "

1090 << 
fLöImp‹èn˚
[
i
] << " " << 
°d
::
ídl
;

1092 
os
 << 
°d
::
	`£çªcisi⁄
(
dp
);

1093 
	}
}

1098 * 
	gTMVA
::
RuÀEn£mbÀ
::
	$AddXMLTo
(* 
∑ª¡
) const

1100 * 
ª
 = 
	`gToﬁs
().
	`AddChûd
–
∑ª¡
, "Weights" );

1102 
UI¡_t
 
ƒuÀs
 = 
fRuÀs
.
	`size
();

1103 
UI¡_t
 
∆öór
 = 
fLöN‹m
.
	`size
();

1104 
	`gToﬁs
().
	`AddAâr
–
ª
, "NRuÀs", 
ƒuÀs
 );

1105 
	`gToﬁs
().
	`AddAâr
–
ª
, "NLöór", 
∆öór
 );

1106 
	`gToﬁs
().
	`AddAâr
–
ª
, "Ló∫ögModñ", ()
fLó∫ögModñ
 );

1107 
	`gToﬁs
().
	`AddAâr
–
ª
, "Imp‹èn˚Cut", 
fImp‹èn˚Cut
 );

1108 
	`gToﬁs
().
	`AddAâr
–
ª
, "LöQu™tûe", 
fLöQu™tûe
 );

1109 
	`gToﬁs
().
	`AddAâr
–
ª
, "AvîageSuµ‹t", 
fAvîageSuµ‹t
 );

1110 
	`gToﬁs
().
	`AddAâr
–
ª
, "AvîageRuÀSigma", 
fAvîageRuÀSigma
 );

1111 
	`gToﬁs
().
	`AddAâr
–
ª
, "Off£t", 
fOff£t
 );

1112 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++Ë
fRuÀs
[i]->
	`AddXMLTo
(
ª
);

1114 
UI¡_t
 
i
=0; i<
∆öór
; i++) {

1115 * 
lö
 = 
	`gToﬁs
().
	`AddChûd
–
ª
, "Linear" );

1116 
	`gToﬁs
().
	`AddAâr
–
lö
, "OK", (
fLöTîmOK
[
i
] ? 1:0) );

1117 
	`gToﬁs
().
	`AddAâr
–
lö
, "C€ff", 
fLöC€fficõ¡s
[
i
] );

1118 
	`gToﬁs
().
	`AddAâr
–
lö
, "N‹m", 
fLöN‹m
[
i
] );

1119 
	`gToﬁs
().
	`AddAâr
–
lö
, "DM", 
fLöDM
[
i
] );

1120 
	`gToﬁs
().
	`AddAâr
–
lö
, "DP", 
fLöDP
[
i
] );

1121 
	`gToﬁs
().
	`AddAâr
–
lö
, "Imp‹èn˚", 
fLöImp‹èn˚
[
i
] );

1123  
ª
;

1124 
	}
}

1129 
	gTMVA
::
RuÀEn£mbÀ
::
	$RódFromXML
–* 
wghäode
 )

1131 
UI¡_t
 
ƒuÀs
, 
∆öór
;

1132 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NRuÀs", 
ƒuÀs
 );

1133 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "NLöór", 
∆öór
 );

1134 
I¡_t
 
iLó∫ögModñ
;

1135 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Ló∫ögModñ", 
iLó∫ögModñ
 );

1136 
fLó∫ögModñ
 = (
ELó∫ögModñ
Ë
iLó∫ögModñ
;

1137 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Imp‹èn˚Cut", 
fImp‹èn˚Cut
 );

1138 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "LöQu™tûe", 
fLöQu™tûe
 );

1139 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "AvîageSuµ‹t", 
fAvîageSuµ‹t
 );

1140 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "AvîageRuÀSigma", 
fAvîageRuÀSigma
 );

1141 
	`gToﬁs
().
	`RódAâr
–
wghäode
, "Off£t", 
fOff£t
 );

1144 
	`DñëeRuÀs
();

1146 
UI¡_t
 
i
 = 0;

1147 
fRuÀs
.
	`ªsize
–
ƒuÀs
 );

1148 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
wghäode
 );

1149 
i
=0; i<
ƒuÀs
; i++) {

1150 
fRuÀs
[
i
] = 
√w
 
	`RuÀ
();

1151 
fRuÀs
[
i
]->
	`SëRuÀEn£mbÀ
–
this
 );

1152 
fRuÀs
[
i
]->
	`RódFromXML
–
ch
 );

1154 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1158 
fLöN‹m
 .
	`ªsize
–
∆öór
 );

1159 
fLöTîmOK
 .
	`ªsize
–
∆öór
 );

1160 
fLöC€fficõ¡s
.
	`ªsize
–
∆öór
 );

1161 
fLöDP
 .
	`ªsize
–
∆öór
 );

1162 
fLöDM
 .
	`ªsize
–
∆öór
 );

1163 
fLöImp‹èn˚
 .
	`ªsize
–
∆öór
 );

1165 
I¡_t
 
iok
;

1166 
i
=0;

1167 
ch
) {

1168 
	`gToﬁs
().
	`RódAâr
–
ch
, "OK", 
iok
 );

1169 
fLöTîmOK
[
i
] = (
iok
 == 1);

1170 
	`gToﬁs
().
	`RódAâr
–
ch
, "C€ff", 
fLöC€fficõ¡s
[
i
] );

1171 
	`gToﬁs
().
	`RódAâr
–
ch
, "N‹m", 
fLöN‹m
[
i
] );

1172 
	`gToﬁs
().
	`RódAâr
–
ch
, "DM", 
fLöDM
[
i
] );

1173 
	`gToﬁs
().
	`RódAâr
–
ch
, "DP", 
fLöDP
[
i
] );

1174 
	`gToﬁs
().
	`RódAâr
–
ch
, "Imp‹èn˚", 
fLöImp‹èn˚
[
i
] );

1176 
i
++;

1177 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

1179 
	}
}

1184 
	gTMVA
::
RuÀEn£mbÀ
::
	$RódRaw
–
°d
::
i°ªam
 & 
i°r
 )

1186 
UI¡_t
 
ƒuÀs
;

1188 
°d
::
°rög
 
dummy
;

1189 
I¡_t
 
idum
;

1193 
i°r
 >> 
dummy
 >> 
fImp‹èn˚Cut
;

1194 
i°r
 >> 
dummy
 >> 
fLöQu™tûe
;

1195 
i°r
 >> 
dummy
 >> 
fAvîageSuµ‹t
;

1196 
i°r
 >> 
dummy
 >> 
fAvîageRuÀSigma
;

1197 
i°r
 >> 
dummy
 >> 
fOff£t
;

1198 
i°r
 >> 
dummy
 >> 
ƒuÀs
;

1202 
	`DñëeRuÀs
();

1204 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++){

1205 
i°r
 >> 
dummy
 >> 
idum
;

1206 
fRuÀs
.
	`push_back
–
√w
 
	`RuÀ
() );

1207 (
fRuÀs
.
	`back
())->
	`SëRuÀEn£mbÀ
–
this
 );

1208 (
fRuÀs
.
	`back
())->
	`RódRaw
(
i°r
);

1213 
UI¡_t
 
∆öór
;

1216 
i°r
 >> 
dummy
 >> 
∆öór
;

1218 
fLöN‹m
 .
	`ªsize
–
∆öór
 );

1219 
fLöTîmOK
 .
	`ªsize
–
∆öór
 );

1220 
fLöC€fficõ¡s
.
	`ªsize
–
∆öór
 );

1221 
fLöDP
 .
	`ªsize
–
∆öór
 );

1222 
fLöDM
 .
	`ªsize
–
∆öór
 );

1223 
fLöImp‹èn˚
 .
	`ªsize
–
∆öór
 );

1226 
I¡_t
 
iok
;

1227 
UI¡_t
 
i
=0; i<
∆öór
; i++) {

1228 
i°r
 >> 
dummy
 >> 
idum
;

1229 
i°r
 >> 
iok
;

1230 
fLöTîmOK
[
i
] = (
iok
==1);

1231 
i°r
 >> 
fLöC€fficõ¡s
[
i
];

1232 
i°r
 >> 
fLöN‹m
[
i
];

1233 
i°r
 >> 
fLöDM
[
i
];

1234 
i°r
 >> 
fLöDP
[
i
];

1235 
i°r
 >> 
fLöImp‹èn˚
[
i
];

1237 
	}
}

1242 
	gTMVA
::
RuÀEn£mbÀ
::
	$C›y
–c⁄° 
RuÀEn£mbÀ
 & 
Ÿhî
 )

1244 if(
this
 !&
Ÿhî
) {

1245 
fRuÀFô
 = 
Ÿhî
.
	`GëRuÀFô
();

1246 
fRuÀMöDi°
 = 
Ÿhî
.
	`GëRuÀMöDi°
();

1247 
fOff£t
 = 
Ÿhî
.
	`GëOff£t
();

1248 
fRuÀs
 = 
Ÿhî
.
	`GëRuÀsC⁄°
();

1249 
fImp‹èn˚Cut
 = 
Ÿhî
.
	`GëImp‹èn˚Cut
();

1250 
fV¨Imp‹èn˚
 = 
Ÿhî
.
	`GëV¨Imp‹èn˚
();

1251 
fLó∫ögModñ
 = 
Ÿhî
.
	`GëLó∫ögModñ
();

1252 
fLöQu™tûe
 = 
Ÿhî
.
	`GëLöQu™tûe
();

1253 
fRuÀNCsig
 = 
Ÿhî
.fRuleNCsig;

1254 
fAvîageRuÀSigma
 = 
Ÿhî
.fAverageRuleSigma;

1255 
fEvítCacheOK
 = 
Ÿhî
.fEventCacheOK;

1256 
fImp‹èn˚Ref
 = 
Ÿhî
.fImportanceRef;

1257 
fNRuÀsGíî©ed
 = 
Ÿhî
.fNRulesGenerated;

1258 
fRuÀFSig
 = 
Ÿhî
.fRuleFSig;

1259 
fRuÀM≠Ind0
 = 
Ÿhî
.fRuleMapInd0;

1260 
fRuÀM≠Ind1
 = 
Ÿhî
.fRuleMapInd1;

1261 
fRuÀM≠OK
 = 
Ÿhî
.fRuleMapOK;

1262 
fRuÀNCave
 = 
Ÿhî
.fRuleNCave;

1264 
	}
}

1269 
I¡_t
 
	gTMVA
::
RuÀEn£mbÀ
::
	$CÆcNRuÀs
–c⁄° 
Decisi⁄Tªe
 *
dåì
 )

1271 i‡(
dåì
==0)  0;

1272 
Node
 *
node
 = 
dåì
->
	`GëRoŸ
();

1273 
I¡_t
 
√ndnodes
 = 0;

1274 
	`FödNEndNodes
–
node
, 
√ndnodes
 );

1275  2*(
√ndnodes
-1);

1276 
	}
}

1281 
	gTMVA
::
RuÀEn£mbÀ
::
	$FödNEndNodes
–c⁄° 
Node
 *
node
, 
I¡_t
 & 
√ndnodes
 )

1283 i‡(
node
==0) ;

1284 i‡((
node
->
	`GëRight
()==0Ë&& (node->
	`GëLe·
()==0)) {

1285 ++
√ndnodes
;

1288 c⁄° 
Node
 *
nodeR
 = 
node
->
	`GëRight
();

1289 c⁄° 
Node
 *
nodeL
 = 
node
->
	`GëLe·
();

1290 
	`FödNEndNodes
–
nodeR
, 
√ndnodes
 );

1291 
	`FödNEndNodes
–
nodeL
, 
√ndnodes
 );

1292 
	}
}

1297 
	gTMVA
::
RuÀEn£mbÀ
::
	$MakeRuÀsFromTªe
–c⁄° 
Decisi⁄Tªe
 *
dåì
 )

1299 
Node
 *
node
 = 
dåì
->
	`GëRoŸ
();

1300 
	`AddRuÀ
–
node
 );

1301 
	}
}

1306 
	gTMVA
::
RuÀEn£mbÀ
::
	$AddRuÀ
–c⁄° 
Node
 *
node
 )

1308 i‡(
node
==0) ;

1309 i‡(
node
->
	`GëP¨ít
()==0) {

1310 
	`AddRuÀ
–
node
->
	`GëRight
() );

1311 
	`AddRuÀ
–
node
->
	`GëLe·
() );

1314 
RuÀ
 *
ruÀ
 = 
	`MakeTheRuÀ
(
node
);

1315 i‡(
ruÀ
) {

1316 
fRuÀs
.
	`push_back
–
ruÀ
 );

1317 
	`AddRuÀ
–
node
->
	`GëRight
() );

1318 
	`AddRuÀ
–
node
->
	`GëLe·
() );

1321 
	`Log
(Ë<< 
kFATAL
 << "<AddRuÀ> - ERROR faûed i¿¸ótögáÑuÀ! BUG!" << 
Endl
;

1324 
	}
}

1332 
	gTMVA
::
RuÀ
 *
TMVA
::
RuÀEn£mbÀ
::
	$MakeTheRuÀ
–c⁄° 
Node
 *
node
 )

1334 i‡(
node
==0) {

1335 
	`Log
(Ë<< 
kFATAL
 << "<MakeTheRuÀ> I≈uànodêi†NULL. ShouldÇŸ h≠≥n. BUG!" << 
Endl
;

1339 i‡(
node
->
	`GëP¨ít
()==0) {

1343 
°d
::
ve˘‹
< c⁄° 
Node
 * > 
nodeVec
;

1344 c⁄° 
Node
 *
∑ª¡
 = 
node
;

1349 
nodeVec
.
	`push_back
–
node
 );

1350 
∑ª¡
!=0) {

1351 
∑ª¡
 =Ö¨ít->
	`GëP¨ít
();

1352 i‡(!
∑ª¡
) ;

1353 c⁄° 
Decisi⁄TªeNode
* 
dä
 = 
dy«mic_ˇ°
<c⁄° Decisi⁄TªeNode*>(
∑ª¡
);

1354 i‡(
dä
 && dä->
	`GëSñe˘‹
()>=0)

1355 
nodeVec
.
	`ö£π
–nodeVec.
	`begö
(), 
∑ª¡
 );

1358 i‡(
nodeVec
.
	`size
()<2) {

1359 
	`Log
(Ë<< 
kFATAL
 << "<MakeTheRuÀ> BUG! Inc⁄si°íàRuÀ!" << 
Endl
;

1362 
RuÀ
 *
ruÀ
 = 
√w
 
	`RuÀ
–
this
, 
nodeVec
 );

1363 
ruÀ
->
	`SëMsgTy≥
–
	`Log
().
	`GëMöTy≥
() );

1364  
ruÀ
;

1365 
	}
}

1370 
	gTMVA
::
RuÀEn£mbÀ
::
MakeRuÀM≠
(c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
, 
UI¡_t
 
ifú°
, UI¡_à
ûa°
)

1372 
Log
(Ë<< 
	gkVERBOSE
 << "Makög RuÀ m≠ f‹áŒÉvíts" << 
	gEndl
;

1374 i‡(
	gevíts
==0Ë
evíts
 = 
GëTøöögEvíts
();

1375 i‡((
	gifú°
==0Ë|| (
ûa°
==0Ë|| (
ifú°
>ilast)) {

1376 
ifú°
 = 0;

1377 
	gûa°
 = 
evíts
->
size
()-1;

1380 i‡((
	gevíts
!=
fRuÀM≠Evíts
) ||

1381 (
ifú°
!=
fRuÀM≠Ind0
) ||

1382 (
ûa°
 !=
fRuÀM≠Ind1
)) {

1383 
fRuÀM≠OK
 = 
kFALSE
;

1386 i‡(
	gfRuÀM≠OK
) {

1387 
Log
(Ë<< 
	gkVERBOSE
 << "<MakeRuÀM≠> M≠ i†Æªady vÆid" << 
	gEndl
;

1390 
	gfRuÀM≠Evíts
 = 
evíts
;

1391 
	gfRuÀM≠Ind0
 = 
ifú°
;

1392 
	gfRuÀM≠Ind1
 = 
ûa°
;

1394 
UI¡_t
 
	gƒuÀs
 = 
GëNRuÀs
();

1395 i‡(
	gƒuÀs
==0) {

1396 
Log
(Ë<< 
kVERBOSE
 << "NÿruÀ†found i¿MakeRuÀM≠()" << 
Endl
;

1397 
	gfRuÀM≠OK
 = 
kTRUE
;

1403 
	g°d
::
ve˘‹
<
UI¡_t
> 
ruÀöd
;

1404 
	gfRuÀM≠
.
˛ór
();

1405 
UI¡_t
 
	gi
=
ifú°
; i<=
ûa°
; i++) {

1406 
	gruÀöd
.
˛ór
();

1407 
	gfRuÀM≠
.
push_back
–
ruÀöd
 );

1408 
UI¡_t
 
	gr
=0;Ñ<
	gƒuÀs
;Ñ++) {

1409 i‡(
	gfRuÀs
[
r
]->
EvÆEvít
(*((*
evíts
)[
i
]))) {

1410 
	gfRuÀM≠
.
back
().
push_back
(
r
);

1414 
	gfRuÀM≠OK
 = 
kTRUE
;

1415 
Log
(Ë<< 
	gkVERBOSE
 << "MadêruÀ m≠ f‹Évít# " << 
	gifú°
 << " : " << 
	gûa°
 << 
	gEndl
;

1421 
	g°d
::
o°ªam
& 
TMVA
::
›î©‹
<< ( 
°d
::o°ªam& 
os
, c⁄° 
	gRuÀEn£mbÀ
 & 
	gruÀs
 )

1423 
	gos
 << "DON'T USE THIS - TO BE REMOVED" << 
	g°d
::
ídl
;

1424 
	gruÀs
.
Pröt
();

1425  
	gos
;

	@src/RuleFit.cxx

35 
	~"TMVA/RuÀFô.h
"

37 
	~"TMVA/D©aSë.h
"

38 
	~"TMVA/Decisi⁄Tªe.h
"

39 
	~"TMVA/Evít.h
"

40 
	~"TMVA/Fa˘‹y.h
"

41 
	~"TMVA/GöiIndex.h
"

42 
	~"TMVA/MëhodBa£.h
"

43 
	~"TMVA/MëhodRuÀFô.h
"

44 
	~"TMVA/MsgLoggî.h
"

45 
	~"TMVA/Timî.h
"

46 
	~"TMVA/Toﬁs.h
"

47 
	~"TMVA/Ty≥s.h
"

48 
	~"TMVA/Sï¨©i⁄Ba£.h
"

50 
	~"TDúe˘‹y.h
"

51 
	~"TH2F.h
"

52 
	~"TFûe.h
"

53 
	~"TKey.h
"

54 
	~"TR™dom3.h
"

55 
	~"TROOT.h
"

57 
	~<Æg‹ôhm
>

59 
CœssImp
(
TMVA
::
RuÀFô
);

64 
	gTMVA
::
RuÀFô
::
	$RuÀFô
–c⁄° 
MëhodBa£
 *
rfba£
 )

65 : 
	`fVisHi°sU£Imp
–
kTRUE
 ),

66 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

68 
	`Inôülize
–
rfba£
 );

69 
°d
::
	`§™d
–
øndSEED
 );

70 
	}
}

75 
	gTMVA
::
RuÀFô
::
	$RuÀFô
()

76 : 
	`fNTªeSam∂e
(0)

77 , 
	`fNEveEffTøö
(0)

78 , 
	`fMëhodRuÀFô
(0)

79 , 
	`fMëhodBa£
(0)

80 , 
	`fVisHi°sU£Imp
–
kTRUE
 )

81 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

83 
°d
::
	`§™d
–
øndSEED
 );

84 
	}
}

89 
	gTMVA
::
RuÀFô
::~
	$RuÀFô
()

91 
dñëe
 
fLoggî
;

92 
	}
}

97 
	gTMVA
::
RuÀFô
::
	$InôNEveEff
()

99 
UI¡_t
 
√ve
 = 
fTøöögEvíts
.
	`size
();

100 i‡(
√ve
==0) ;

102 
fNEveEffTøö
 = 
	`CÆcWeightSum
–&
fTøöögEvíts
 );

104 
	}
}

109 
	gTMVA
::
RuÀFô
::
	$InôPås
–c⁄° 
MëhodBa£
 *
rfba£
 )

111 
this
->
	`SëMëhodBa£
(
rfba£
);

112 
fRuÀEn£mbÀ
.
	`Inôülize
–
this
 );

113 
fRuÀFôP¨ams
.
	`SëRuÀFô
–
this
 );

114 
	}
}

119 
	gTMVA
::
RuÀFô
::
	$Inôülize
–c⁄° 
MëhodBa£
 *
rfba£
 )

121 
	`InôPås
(
rfba£
);

123 i‡(
fMëhodRuÀFô
){

124 
fMëhodRuÀFô
->
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTøöög
);

125 
UI¡_t
 
√víts
 = 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTøöögEvíts
();

126 
°d
::
ve˘‹
<c⁄° 
TMVA
::
Evít
*> 
tmp
;

127 
L⁄g64_t
 
õvt
=0; ievt<
√víts
; ievt++) {

128 c⁄° 
Evít
 *
evít
 = 
fMëhodRuÀFô
->
	`GëEvít
(
õvt
);

129 
tmp
.
	`push_back
(
evít
);

131 
	`SëTøöögEvíts
–
tmp
 );

135 
	`InôNEveEff
();

137 
	`MakeF‹e°
();

140 
fRuÀEn£mbÀ
.
	`MakeModñ
();

143 
fRuÀFôP¨ams
.
	`Inô
();

145 
	}
}

150 
	gTMVA
::
RuÀFô
::
	$SëMëhodBa£
–c⁄° 
MëhodBa£
 *
rfba£
 )

152 
fMëhodBa£
 = 
rfba£
;

153 
fMëhodRuÀFô
 = 
dy«mic_ˇ°
<c⁄° 
MëhodRuÀFô
 *>(
rfba£
);

154 
	}
}

159 
	gTMVA
::
RuÀFô
::
	$C›y
–c⁄° 
RuÀFô
& 
Ÿhî
 )

161 if(
this
 !&
Ÿhî
) {

162 
fMëhodRuÀFô
 = 
Ÿhî
.
	`GëMëhodRuÀFô
();

163 
fMëhodBa£
 = 
Ÿhî
.
	`GëMëhodBa£
();

164 
fTøöögEvíts
 = 
Ÿhî
.
	`GëTøöögEvíts
();

167 
fF‹e°
 = 
Ÿhî
.
	`GëF‹e°
();

168 
fRuÀEn£mbÀ
 = 
Ÿhî
.
	`GëRuÀEn£mbÀ
();

170 
	}
}

175 
DoubÀ_t
 
	gTMVA
::
RuÀFô
::
CÆcWeightSum
–c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
, 
UI¡_t
 
√ve
 )

177 i‡(
	gevíts
==0)  0.0;

178 i‡(
	g√ve
==0Ë
√ve
=
evíts
->
size
();

180 
DoubÀ_t
 
	gsumw
=0;

181 
UI¡_t
 
	gõ
=0; ie<
	g√ve
; ie++) {

182 
	gsumw
 +((*
evíts
)[
õ
])->
GëWeight
();

184  
	gsumw
;

190 
	gTMVA
::
RuÀFô
::
	$SëMsgTy≥
–
EMsgTy≥
 
t
 )

192 
fLoggî
->
	`SëMöTy≥
(
t
);

193 
fRuÀEn£mbÀ
.
	`SëMsgTy≥
(
t
);

194 
fRuÀFôP¨ams
.
	`SëMsgTy≥
(
t
);

195 
	}
}

200 
	gTMVA
::
RuÀFô
::
	$BuûdTªe
–
Decisi⁄Tªe
 *
dt
 )

202 i‡(
dt
==0) ;

203 i‡(
fMëhodRuÀFô
==0) {

204 
	`Log
(Ë<< 
kFATAL
 << "RuÀFô::BuûdTªe(Ë- Aâem±ögÅÿbuûdáÅªêNOT fromá MëhodRuÀFô" << 
Endl
;

206 
°d
::
ve˘‹
<c⁄° 
Evít
 *> 
evevec
;

207 
UI¡_t
 
õ
=0; ie<
fNTªeSam∂e
; ie++) {

208 
evevec
.
	`push_back
(
fTøöögEvítsRndm
[
õ
]);

210 
dt
->
	`BuûdTªe
(
evevec
);

211 i‡(
fMëhodRuÀFô
->
	`GëPru√Mëhod
(Ë!
Decisi⁄Tªe
::
kNoPrunög
) {

212 
dt
->
	`SëPru√Mëhod
(
fMëhodRuÀFô
->
	`GëPru√Mëhod
());

213 
dt
->
	`SëPru√Såígth
(
fMëhodRuÀFô
->
	`GëPru√Såígth
());

214 
dt
->
	`Pru√Tªe
();

216 
	}
}

221 
	gTMVA
::
RuÀFô
::
	$MakeF‹e°
()

223 i‡(
fMëhodRuÀFô
==0) {

224 
	`Log
(Ë<< 
kFATAL
 << "RuÀFô::BuûdTªe(Ë- Aâem±ögÅÿbuûdáÅªêNOT fromá MëhodRuÀFô" << 
Endl
;

226 
	`Log
(Ë<< 
kDEBUG
 << "Cª©ögá f‹e° wôh " << 
fMëhodRuÀFô
->
	`GëNTªes
(Ë<< " decisi⁄Åªes" << 
Endl
;

227 
	`Log
(Ë<< 
kDEBUG
 << "EachÅªêi†buûàusögáÑ™dom subßm∂êwôh " << 
fNTªeSam∂e
 << "Évíts" << 
Endl
;

229 
Timî
 
	`timî
–
fMëhodRuÀFô
->
	`GëNTªes
(), "RuleFit" );

232 
I¡_t
 
nsig
,
nbkg
;

234 
TR™dom3
 
∫dGí
;

240 
Boﬁ_t
 
u£Boo°
 = 
fMëhodRuÀFô
->
	`U£Boo°
();

242 i‡(
u£Boo°
Ë
	`SaveEvítWeights
();

244 
I¡_t
 
i
=0; i<
fMëhodRuÀFô
->
	`GëNTªes
(); i++) {

246 i‡(!
u£Boo°
Ë
	`ReshufÊeEvíts
();

247 
nsig
=0;

248 
nbkg
=0;

249 
UI¡_t
 
õ
 = 0; ie<
fNTªeSam∂e
; ie++) {

250 i‡(
fMëhodBa£
->
	`D©aInfo
().
	`IsSig«l
(
fTøöögEvítsRndm
[
õ
])Ë
nsig
++;

251 
nbkg
++;

256 
Decisi⁄Tªe
 *
dt
=
nuŒ±r
;

257 
Boﬁ_t
 
åyAgaö
=
kTRUE
;

258 
I¡_t
 
¡rõs
=0;

259 c⁄° 
I¡_t
 
¡rõsMax
=10;

260 
DoubÀ_t
 
‰nd
 = 0.;

261 
åyAgaö
) {

262 
‰nd
 = 100*
∫dGí
.
	`Unif‹m
–
fMëhodRuÀFô
->
	`GëMöFøcNEve
(), 0.5*fMëhodRuÀFô->
	`GëMaxFøcNEve
() );

263 
I¡_t
 
i˛ass
 = 0;

264 
Boﬁ_t
 
u£R™domi£dTªe
 = !
u£Boo°
;

265 
dt
 = 
√w
 
	`Decisi⁄Tªe
–
fMëhodRuÀFô
->
	`GëSï¨©i⁄Ba£
(), 
‰nd
, fMëhodRuÀFô->
	`GëNCuts
(), &(fMëhodRuÀFô->
	`D©aInfo
()), 
i˛ass
, 
u£R™domi£dTªe
);

266 
dt
->
	`SëNV¨s
(
fMëhodBa£
->
	`GëNv¨
());

268 
	`BuûdTªe
(
dt
);

269 i‡(
dt
->
	`GëNNodes
()<3) {

270 
dñëe
 
dt
;

271 
dt
=0;

273 
¡rõs
++;

274 
åyAgaö
 = ((
dt
==0Ë&& (
¡rõs
<
¡rõsMax
));

276 i‡(
dt
) {

277 
fF‹e°
.
	`push_back
(
dt
);

278 i‡(
u£Boo°
Ë
	`Boo°
(
dt
);

282 
	`Log
(Ë<< 
kWARNING
 << "------------------------------------------------------------------" << 
Endl
;

283 
	`Log
(Ë<< 
kWARNING
 << " Faûed growögáÅªêevíá·î " << 
¡rõsMax
 << "Årüls" << 
Endl
;

284 
	`Log
(Ë<< 
kWARNING
 << " PossibÀ sﬁuti⁄s: " << 
Endl
;

285 
	`Log
(Ë<< 
kWARNING
 << " 1. in¸ó£Åhênumbî o‡åaöögÉvíts" << 
Endl
;

286 
	`Log
(Ë<< 
kWARNING
 << " 2. sëáÜowî mö fø˘i⁄ cuà(fEvítsMö)" << 
Endl
;

287 
	`Log
(Ë<< 
kWARNING
 << " 3. maybêÆsÿde¸ó£Åhêmax fø˘i⁄ cuà(fEvítsMax)" << 
Endl
;

288 
	`Log
(Ë<< 
kWARNING
 << " I‡thêabovêw¨nög occur†øªly o∆y, iàˇ¿bêign‹ed" << 
Endl
;

289 
	`Log
(Ë<< 
kWARNING
 << "------------------------------------------------------------------" << 
Endl
;

292 
	`Log
(Ë<< 
kDEBUG
 << "Buûàåì wôh möimum cuà© N = " << 
‰nd
 <<"%Évents"

293 << " => N“odesË" << 
fF‹e°
.
	`back
()->
	`GëNNodes
()

294 << " ;Ç—rõsË" << 
¡rõs


295 << 
Endl
;

299 i‡(
u£Boo°
Ë
	`Re°‹eEvítWeights
();

302 
	`F‹e°Sèti°ics
();

303 
	}
}

308 
	gTMVA
::
RuÀFô
::
	$SaveEvítWeights
()

310 
fEvítWeights
.
	`˛ór
();

311 
°d
::
ve˘‹
<c⁄° 
Evít
*>::
ôî©‹
 
e
=
fTøöögEvíts
.
	`begö
();É!=fTøöögEvíts.
	`íd
();É++) {

312 
DoubÀ_t
 
w
 = (*
e
)->
	`GëBoo°Weight
();

313 
fEvítWeights
.
	`push_back
(
w
);

315 
	}
}

320 
	gTMVA
::
RuÀFô
::
	$Re°‹eEvítWeights
()

322 
UI¡_t
 
õ
=0;

323 i‡(
fEvítWeights
.
	`size
(Ë!
fTøöögEvíts
.size()) {

324 
	`Log
(Ë<< 
kERROR
 << "RuÀFô::Re°‹eEvítWeights(ËˇŒed wôhouàhavög cÆÀd SaveEvítWeights(Ëbef‹e!" << 
Endl
;

327 
°d
::
ve˘‹
<c⁄° 
Evít
*>::
ôî©‹
 
e
=
fTøöögEvíts
.
	`begö
();É!=fTøöögEvíts.
	`íd
();É++) {

328 (*
e
)->
	`SëBoo°Weight
(
fEvítWeights
[
õ
]);

329 
õ
++;

331 
	}
}

338 
	gTMVA
::
RuÀFô
::
	$Boo°
–
Decisi⁄Tªe
 *
dt
 )

340 
DoubÀ_t
 
sumw
=0;

341 
DoubÀ_t
 
sumwÁl£
=0;

343 
°d
::
ve˘‹
<
Ch¨_t
> 
c‹ª˘Sñe˘ed
;

345 
°d
::
ve˘‹
<c⁄° 
Evít
*>::
ôî©‹
 
e
=
fTøöögEvíts
.
	`begö
();É!=fTøöögEvíts.
	`íd
();É++) {

346 
Boﬁ_t
 
isSig«lTy≥
 = (
dt
->
	`CheckEvít
(*
e
,
kTRUE
) > 0.5 );

347 
DoubÀ_t
 
w
 = (*
e
)->
	`GëWeight
();

348 
sumw
 +
w
;

350 i‡(
isSig«lTy≥
 =
fMëhodBa£
->
	`D©aInfo
().
	`IsSig«l
(*
e
)) {

351 
c‹ª˘Sñe˘ed
.
	`push_back
(
kTRUE
);

354 
sumwÁl£
+
w
;

355 
c‹ª˘Sñe˘ed
.
	`push_back
(
kFALSE
);

359 
DoubÀ_t
 
îr
 = 
sumwÁl£
/
sumw
;

363 
DoubÀ_t
 
boo°Weight
 = (
îr
>0 ? (1.0-err)/err : 1000.0);

364 
DoubÀ_t
 
√wSumw
=0.0;

365 
UI¡_t
 
õ
=0;

367 
°d
::
ve˘‹
<c⁄° 
Evít
*>::
ôî©‹
 
e
=
fTøöögEvíts
.
	`begö
();É!=fTøöögEvíts.
	`íd
();É++) {

368 i‡(!
c‹ª˘Sñe˘ed
[
õ
])

369 (*
e
)->
	`SëBoo°Weight
–(*e)->
	`GëBoo°Weight
(Ë* 
boo°Weight
);

370 
√wSumw
+=(*
e
)->
	`GëWeight
();

371 
õ
++;

374 
DoubÀ_t
 
sˇÀ
 = 
sumw
/
√wSumw
;

375 
°d
::
ve˘‹
<c⁄° 
Evít
*>::
ôî©‹
 
e
=
fTøöögEvíts
.
	`begö
();É!=fTøöögEvíts.
	`íd
();É++) {

376 (*
e
)->
	`SëBoo°Weight
–(*e)->
	`GëBoo°Weight
(Ë* 
sˇÀ
);

378 
	`Log
(Ë<< 
kDEBUG
 << "boo°Weighà" << 
boo°Weight
 << " sˇÀ = " << 
sˇÀ
 << 
Endl
;

379 
	}
}

385 
	gTMVA
::
RuÀFô
::
	$F‹e°Sèti°ics
()

387 
UI¡_t
 
¡ªes
 = 
fF‹e°
.
	`size
();

388 i‡(
¡ªes
==0) ;

389 c⁄° 
Decisi⁄Tªe
 *
åì
;

390 
DoubÀ_t
 
sumn2
 = 0;

391 
DoubÀ_t
 
sumn
 = 0;

392 
DoubÀ_t
 
nd
;

393 
UI¡_t
 
i
=0; i<
¡ªes
; i++) {

394 
åì
 = 
fF‹e°
[
i
];

395 
nd
 = 
	`DoubÀ_t
(
åì
->
	`GëNNodes
());

396 
sumn
 +
nd
;

397 
sumn2
 +
nd
*nd;

399 
DoubÀ_t
 
sig
 = 
TM©h
::
	`Sqπ
–
	`gToﬁs
().
	`CompuãV¨ün˚
–
sumn2
, 
sumn
, 
¡ªes
 ));

400 
	`Log
(Ë<< 
kVERBOSE
 << "Node†öÅªes:ávîagê& std dev = " << 
sumn
/
¡ªes
 << " , " << 
sig
 << 
Endl
;

401 
	}
}

408 
	gTMVA
::
RuÀFô
::
	$FôC€fficõ¡s
()

410 
	`Log
(Ë<< 
kVERBOSE
 << "FôtögÑuÀ/löó∏ãrms" << 
Endl
;

411 
fRuÀFôP¨ams
.
	`MakeGDP©h
();

412 
	}
}

417 
	gTMVA
::
RuÀFô
::
	$CÆcImp‹èn˚
()

419 
	`Log
(Ë<< 
kVERBOSE
 << "CÆcuœtög imp‹èn˚" << 
Endl
;

420 
fRuÀEn£mbÀ
.
	`CÆcImp‹èn˚
();

421 
fRuÀEn£mbÀ
.
	`CÀ™upRuÀs
();

422 
fRuÀEn£mbÀ
.
	`CÀ™upLöór
();

423 
fRuÀEn£mbÀ
.
	`CÆcV¨Imp‹èn˚
();

424 
	`Log
(Ë<< 
kVERBOSE
 << "FûlögÑuÀ sèti°ics" << 
Endl
;

425 
fRuÀEn£mbÀ
.
	`RuÀRe•⁄£Sèts
();

426 
	}
}

431 
DoubÀ_t
 
	gTMVA
::
RuÀFô
::
	$EvÆEvít
–c⁄° 
Evít
& 
e
 )

433  
fRuÀEn£mbÀ
.
	`EvÆEvít
–
e
 );

434 
	}
}

439 
	gTMVA
::
RuÀFô
::
SëTøöögEvíts
–c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *>& 
ñ
 )

441 i‡(
fMëhodRuÀFô
==0Ë
Log
(Ë<< 
kFATAL
 << "RuÀFô::SëTøöögEvít†- MëhodRuÀFôÇŸ inôülized" << 
Endl
;

442 
UI¡_t
 
	g√ve
 = 
ñ
.
size
();

443 i‡(
	g√ve
==0Ë
Log
(Ë<< 
kWARNING
 << "A¿em±y sam∂êo‡åaöögÉvít†wa†giví" << 
Endl
;

446 
	gfTøöögEvíts
.
˛ór
();

447 
	gfTøöögEvítsRndm
.
˛ór
();

448 
UI¡_t
 
	gi
=0; i<
	g√ve
; i++) {

449 
	gfTøöögEvíts
.
push_back
(
°©ic_ˇ°
< c⁄° 
Evít
 *>(
ñ
[
i
]));

450 
	gfTøöögEvítsRndm
.
push_back
(
°©ic_ˇ°
< c⁄° 
Evít
 *>(
ñ
[
i
]));

454 
	g°d
::
øndom_shufÊe
–
fTøöögEvítsRndm
.
begö
(), fTøöögEvítsRndm.
íd
() );

457 
	gfNTªeSam∂e
 = 
°©ic_ˇ°
<
UI¡_t
>(
√ve
*
fMëhodRuÀFô
->
GëTªeEveFøc
());

458 
Log
(Ë<< 
	gkDEBUG
 << "Numbî o‡evít†≥∏åì : " << 
	gfNTªeSam∂e


459 << " ( N”vítsË" << 
	g√ve
 << " )"

460 << "Ñ™domly døw¿wôhouàª∂a˚mít" << 
	gEndl
;

466 
	gTMVA
::
RuÀFô
::
GëRndmSam∂eEvíts
(
°d
::
ve˘‹
< c⁄° 
Evít
 * > & 
evevec
, 
UI¡_t
 
√víts
)

468 
ReshufÊeEvíts
();

469 i‡((
	g√víts
<
	gfTøöögEvítsRndm
.
size
()) && (nevents>0)) {

470 
	gevevec
.
ªsize
(
√víts
);

471 
UI¡_t
 
	gõ
=0; ie<
	g√víts
; ie++) {

472 
	gevevec
[
õ
] = 
fTøöögEvítsRndm
[ie];

476 
Log
(Ë<< 
	gkWARNING
 << "GetRndmSampleEvents() :Ñequested sub sample sizeÜargerÅhanÅotal size (BUG!).";

485 
	gTMVA
::
RuÀFô
::
N‹mVisHi°s
(
°d
::
ve˘‹
<
TH2F
 *> & 
hli°
)

487 i‡(
hli°
.
em±y
()) ;

489 
DoubÀ_t
 
	gwmö
=0;

490 
DoubÀ_t
 
	gwmax
=0;

491 
DoubÀ_t
 
	gw
,
	gwm
;

492 
DoubÀ_t
 
	gawmö
;

493 
DoubÀ_t
 
	gsˇÀ
;

494 
UI¡_t
 
	gi
=0; i<
	ghli°
.
size
(); i++) {

495 
TH2F
 *
	ghs
 = 
hli°
[
i
];

496 
	gw
 = 
hs
->
GëMaximum
();

497 
	gwm
 = 
hs
->
GëMöimum
();

498 i‡(
	gi
==0) {

499 
wmö
=
wm
;

500 
	gwmax
=
w
;

503 i‡(
	gw
>
	gwmax
Ëwmax=
w
;

504 i‡(
	gwm
<
	gwmö
Ëwmö=
wm
;

507 
	gawmö
 = 
TM©h
::
Abs
(
wmö
);

508 
DoubÀ_t
 
	gu£mö
,
	gu£max
;

509 i‡(
	gawmö
>
	gwmax
) {

510 
	gsˇÀ
 = 1.0/
awmö
;

511 
	gu£mö
 = -1.0;

512 
	gu£max
 = 
sˇÀ
*
wmax
;

515 
	gsˇÀ
 = 1.0/
wmax
;

516 
	gu£mö
 = 
sˇÀ
*
wmö
;

517 
	gu£max
 = 1.0;

521 
UI¡_t
 
	gi
=0; i<
	ghli°
.
size
(); i++) {

522 
TH2F
 *
	ghs
 = 
hli°
[
i
];

523 
	ghs
->
SˇÀ
(
sˇÀ
);

524 
	ghs
->
SëMöimum
(
u£mö
);

525 
	ghs
->
SëMaximum
(
u£max
);

532 
	gTMVA
::
RuÀFô
::
	$FûlCut
(
TH2F
* 
h2
, c⁄° 
RuÀ
 *
ruÀ
, 
I¡_t
 
vöd
)

534 i‡(
ruÀ
==0) ;

535 i‡(
h2
==0) ;

537 
DoubÀ_t
 
rmö
, 
rmax
;

538 
Boﬁ_t
 
d‹mö
,
d‹max
;

539 
Boﬁ_t
 
ruÀHasV¨
 = 
ruÀ
->
	`GëRuÀCut
()->
	`GëCutR™ge
(
vöd
,
rmö
,
rmax
,
d‹mö
,
d‹max
);

540 i‡(!
ruÀHasV¨
) ;

542 
I¡_t
 
fú°bö
 = 
h2
->
	`GëBö
(1,1,1);

543 if(
fú°bö
<0) firstbin=0;

544 
I¡_t
 
œ°bö
 = 
h2
->
	`GëBö
(h2->
	`GëNbösX
(),1,1);

545 
I¡_t
 
bömö
=(
d‹mö
 ? 
h2
->
	`FödBö
(
rmö
,0.5):
fú°bö
);

546 
I¡_t
 
bömax
=(
d‹max
 ? 
h2
->
	`FödBö
(
rmax
,0.5):
œ°bö
);

547 
I¡_t
 
fbö
;

548 
DoubÀ_t
 
xböw
 = 
h2
->
	`GëXaxis
()->
	`GëBöWidth
(
fú°bö
);

549 
DoubÀ_t
 
fbmö
 = 
h2
->
	`GëXaxis
()->
	`GëBöLowEdge
(
bömö
-
fú°bö
+1);

550 
DoubÀ_t
 
lbmax
 = 
h2
->
	`GëXaxis
()->
	`GëBöLowEdge
(
bömax
-
fú°bö
+1)+
xböw
;

551 
DoubÀ_t
 
fb‰ac
 = (
d‹mö
 ? ((
fbmö
+
xböw
-
rmö
)/xbinw):1.0);

552 
DoubÀ_t
 
lb‰ac
 = (
d‹max
 ? ((
rmax
-
lbmax
+
xböw
)/xbinw):1.0);

553 
DoubÀ_t
 
f
;

554 
DoubÀ_t
 
xc
;

555 
DoubÀ_t
 
vÆ
;

557 
I¡_t
 
bö
 = 
bömö
; bö<
bömax
+1; bin++) {

558 
fbö
 = 
bö
-
fú°bö
+1;

559 i‡(
bö
==
bömö
) {

560 
f
 = 
fb‰ac
;

562 i‡(
bö
==
bömax
) {

563 
f
 = 
lb‰ac
;

566 
f
 = 1.0;

568 
xc
 = 
h2
->
	`GëXaxis
()->
	`GëBöCíãr
(
fbö
);

570 i‡(
fVisHi°sU£Imp
) {

571 
vÆ
 = 
ruÀ
->
	`GëImp‹èn˚
();

574 
vÆ
 = 
ruÀ
->
	`GëC€fficõ¡
()*ruÀ->
	`GëSuµ‹t
();

576 
h2
->
	`Fûl
(
xc
,0.5,
vÆ
*
f
);

578 
	}
}

583 
	gTMVA
::
RuÀFô
::
	$FûlLö
(
TH2F
* 
h2
,
I¡_t
 
vöd
)

585 i‡(
h2
==0) ;

586 i‡(!
fRuÀEn£mbÀ
.
	`DoLöór
()) ;

588 
I¡_t
 
fú°bö
 = 1;

589 
I¡_t
 
œ°bö
 = 
h2
->
	`GëNbösX
();

590 
DoubÀ_t
 
xc
;

591 
DoubÀ_t
 
vÆ
;

592 i‡(
fVisHi°sU£Imp
) {

593 
vÆ
 = 
fRuÀEn£mbÀ
.
	`GëLöImp‹èn˚
(
vöd
);

596 
vÆ
 = 
fRuÀEn£mbÀ
.
	`GëLöC€fficõ¡s
(
vöd
);

598 
I¡_t
 
bö
 = 
fú°bö
; bö<
œ°bö
+1; bin++) {

599 
xc
 = 
h2
->
	`GëXaxis
()->
	`GëBöCíãr
(
bö
);

600 
h2
->
	`Fûl
(
xc
,0.5,
vÆ
);

602 
	}
}

607 
	gTMVA
::
RuÀFô
::
	$FûlC‹r
(
TH2F
* 
h2
,c⁄° 
RuÀ
 *
ruÀ
,
I¡_t
 
vx
, I¡_à
vy
)

609 i‡(
ruÀ
==0) ;

610 i‡(
h2
==0) ;

611 
DoubÀ_t
 
vÆ
;

612 i‡(
fVisHi°sU£Imp
) {

613 
vÆ
 = 
ruÀ
->
	`GëImp‹èn˚
();

616 
vÆ
 = 
ruÀ
->
	`GëC€fficõ¡
()*ruÀ->
	`GëSuµ‹t
();

619 
DoubÀ_t
 
rxmö
, 
rxmax
, 
rymö
, 
rymax
;

620 
Boﬁ_t
 
d‹xmö
, 
d‹xmax
, 
d‹ymö
, 
d‹ymax
;

624 
Boﬁ_t
 
ruÀHasV¨X
 = 
ruÀ
->
	`GëRuÀCut
()->
	`GëCutR™ge
(
vx
,
rxmö
,
rxmax
,
d‹xmö
,
d‹xmax
);

625 
Boﬁ_t
 
ruÀHasV¨Y
 = 
ruÀ
->
	`GëRuÀCut
()->
	`GëCutR™ge
(
vy
,
rymö
,
rymax
,
d‹ymö
,
d‹ymax
);

626 i‡(!(
ruÀHasV¨X
 || 
ruÀHasV¨Y
)) ;

628 
DoubÀ_t
 
vxmö
 = (
d‹xmö
 ? 
rxmö
:
h2
->
	`GëXaxis
()->
	`GëXmö
());

629 
DoubÀ_t
 
vxmax
 = (
d‹xmax
 ? 
rxmax
:
h2
->
	`GëXaxis
()->
	`GëXmax
());

630 
DoubÀ_t
 
vymö
 = (
d‹ymö
 ? 
rymö
:
h2
->
	`GëYaxis
()->
	`GëXmö
());

631 
DoubÀ_t
 
vymax
 = (
d‹ymax
 ? 
rymax
:
h2
->
	`GëYaxis
()->
	`GëXmax
());

633 
I¡_t
 
böxmö
 = 
h2
->
	`GëXaxis
()->
	`FödBö
(
vxmö
);

634 
I¡_t
 
böxmax
 = 
h2
->
	`GëXaxis
()->
	`FödBö
(
vxmax
);

635 
I¡_t
 
böymö
 = 
h2
->
	`GëYaxis
()->
	`FödBö
(
vymö
);

636 
I¡_t
 
böymax
 = 
h2
->
	`GëYaxis
()->
	`FödBö
(
vymax
);

638 
DoubÀ_t
 
xböw
 = 
h2
->
	`GëXaxis
()->
	`GëBöWidth
(
böxmö
);

639 
DoubÀ_t
 
yböw
 = 
h2
->
	`GëYaxis
()->
	`GëBöWidth
(
böxmö
);

640 
DoubÀ_t
 
xbömö
 = 
h2
->
	`GëXaxis
()->
	`GëBöLowEdge
(
böxmö
);

641 
DoubÀ_t
 
xbömax
 = 
h2
->
	`GëXaxis
()->
	`GëBöLowEdge
(
böxmax
)+
xböw
;

642 
DoubÀ_t
 
ybömö
 = 
h2
->
	`GëYaxis
()->
	`GëBöLowEdge
(
böymö
);

643 
DoubÀ_t
 
ybömax
 = 
h2
->
	`GëYaxis
()->
	`GëBöLowEdge
(
böymax
)+
yböw
;

645 
DoubÀ_t
 
fxbömö
 = (
d‹xmö
 ? ((
xbömö
+
xböw
-
vxmö
)/xbinw):1.0);

646 
DoubÀ_t
 
fxbömax
 = (
d‹xmax
 ? ((
vxmax
-
xbömax
+
xböw
)/xbinw):1.0);

647 
DoubÀ_t
 
fybömö
 = (
d‹ymö
 ? ((
ybömö
+
yböw
-
vymö
)/ybinw):1.0);

648 
DoubÀ_t
 
fybömax
 = (
d‹ymax
 ? ((
vymax
-
ybömax
+
yböw
)/ybinw):1.0);

650 
DoubÀ_t
 
fx
,
fy
;

651 
DoubÀ_t
 
xc
,
yc
;

653 
I¡_t
 
böx
 = 
böxmö
; böx<
böxmax
+1; binx++) {

654 i‡(
böx
==
böxmö
) {

655 
fx
 = 
fxbömö
;

657 i‡(
böx
==
böxmax
) {

658 
fx
 = 
fxbömax
;

661 
fx
 = 1.0;

663 
xc
 = 
h2
->
	`GëXaxis
()->
	`GëBöCíãr
(
böx
);

664 
I¡_t
 
böy
 = 
böymö
; böy<
böymax
+1; biny++) {

665 i‡(
böy
==
böymö
) {

666 
fy
 = 
fybömö
;

668 i‡(
böy
==
böymax
) {

669 
fy
 = 
fybömax
;

672 
fy
 = 1.0;

674 
yc
 = 
h2
->
	`GëYaxis
()->
	`GëBöCíãr
(
böy
);

675 
h2
->
	`Fûl
(
xc
,
yc
,
vÆ
*
fx
*
fy
);

678 
	}
}

683 
	gTMVA
::
RuÀFô
::
FûlVisHi°Cut
(c⁄° 
RuÀ
* 
ruÀ
, 
°d
::
ve˘‹
<
TH2F
 *> & 
hli°
)

685 
I¡_t
 
nhi°s
 = 
hli°
.
size
();

686 
I¡_t
 
	gnv¨
 = 
fMëhodBa£
->
GëNv¨
();

687 i‡(
	gnhi°s
!=
nv¨
Ë
Log
(Ë<< 
kFATAL
 << "BUG TRAP:Çumbî o‡hi°†i†nŸÉquÆÅhênumbî o‡v¨übÀs!" << 
Endl
;

689 
	g°d
::
ve˘‹
<
I¡_t
> 
vödex
;

690 
TSåög
 
	gh°r
;

692 
I¡_t
 
	gih
=0; ih<
	gnhi°s
; ih++) {

693 
	gh°r
 = 
hli°
[
ih
]->
GëTôÀ
();

694 
I¡_t
 
	giv
=0; iv<
	gnv¨
; iv++) {

695 i‡(
	gfMëhodBa£
->
GëI≈utTôÀ
(
iv
Ë=
h°r
)

696 
vödex
.
push_back
(
iv
);

700 
I¡_t
 
	giv
=0; iv<
	gnv¨
; iv++) {

701 i‡(
	gruÀ
) {

702 i‡(
	gruÀ
->
C⁄èösV¨übÀ
(
vödex
[
iv
])) {

703 
FûlCut
(
hli°
[
iv
],
ruÀ
,
vödex
[iv]);

707 
FûlLö
(
hli°
[
iv
],
vödex
[iv]);

714 
	gTMVA
::
RuÀFô
::
FûlVisHi°C‹r
(c⁄° 
RuÀ
 * 
ruÀ
, 
°d
::
ve˘‹
<
TH2F
 *> & 
hli°
)

716 i‡(
ruÀ
==0) ;

717 
DoubÀ_t
 
	gruÀimp
 = 
ruÀ
->
GëImp‹èn˚
();

718 i‡(!(
	gruÀimp
>0)) ;

719 i‡(
	gruÀimp
<
	gfRuÀEn£mbÀ
.
GëImp‹èn˚Cut
()) ;

721 
I¡_t
 
	gnhi°s
 = 
hli°
.
size
();

722 
I¡_t
 
	gnv¨
 = 
fMëhodBa£
->
GëNv¨
();

723 
I¡_t
 
	gnc‹r
 = (
nv¨
*(nvar+1)/2)-nvar;

724 i‡(
	gnhi°s
!=
nc‹r
Ë
Log
(Ë<< 
kERROR
 << "BUG TRAP:Çumber of corr hists isÇot correct!Çcorr = "

725 << 
nc‹r
 << "Çv¨ = " << 
nv¨
 << "Çhi°†" << 
nhi°s
 << 
Endl
;

727 
	g°d
::
ve˘‹
< 
°d
::
∑ú
<
I¡_t
,
	gI¡_t
> > 
	gvödex
;

728 
TSåög
 
	gh°r
, 
	gv¨1
, 
	gv¨2
;

729 
I¡_t
 
	giv1
=0,
	giv2
=0;

731 
I¡_t
 
	gih
=0; ih<
	gnhi°s
; ih++) {

732 
	gh°r
 = 
hli°
[
ih
]->
GëName
();

733 i‡(
GëC‹rV¨s
–
h°r
, 
v¨1
, 
v¨2
 )) {

734 
	giv1
 = 
fMëhodBa£
->
D©aInfo
().
FödV¨Index
–
v¨1
 );

735 
	giv2
 = 
fMëhodBa£
->
D©aInfo
().
FödV¨Index
–
v¨2
 );

736 
	gvödex
.
push_back
–
°d
::
∑ú
<
I¡_t
,I¡_t>(
iv2
,
iv1
) );

739 
Log
(Ë<< 
	gkERROR
 << "BUG TRAP: shouldÇŸ bêhîê- faûed gëtög v¨1ánd v¨2" << 
	gEndl
;

743 
I¡_t
 
	gih
=0; ih<
	gnhi°s
; ih++) {

744 i‡–(
	gruÀ
->
C⁄èösV¨übÀ
(
vödex
[
ih
].
fú°
)) ||

745 (
	gruÀ
->
C⁄èösV¨übÀ
(
vödex
[
ih
].
£c⁄d
)) ) {

746 
FûlC‹r
(
hli°
[
ih
],
ruÀ
,
vödex
[ih].
fú°
,vödex[ih].
£c⁄d
);

753 
Boﬁ_t
 
	gTMVA
::
RuÀFô
::
	$GëC‹rV¨s
(
TSåög
 & 
tôÀ
, TSåög & 
v¨1
, TSåög & 
v¨2
)

755 
v¨1
="";

756 
v¨2
="";

757 if(!
tôÀ
.
	`BegösWôh
("sˇt_")Ë 
kFALSE
;

759 
TSåög
 
tôÀC›y
 = 
	`tôÀ
(5,
tôÀ
.
	`Lígth
());

760 if(
tôÀC›y
.
	`Index
("_RF2D")>=0ËtôÀC›y.
	`Remove
(titleCopy.Index("_RF2D"));

762 
I¡_t
 
•lôPos
 = 
tôÀC›y
.
	`Index
("_vs_");

763 if(
•lôPos
>=0) {

764 
v¨1
 = 
	`tôÀC›y
(0,
•lôPos
);

765 
v¨2
 = 
	`tôÀC›y
(
•lôPos
+4, 
tôÀC›y
.
	`Lígth
());

766  
kTRUE
;

769 
v¨1
 = 
tôÀC›y
;

770  
kFALSE
;

772 
	}
}

776 
	gTMVA
::
RuÀFô
::
	$MakeVisHi°s
()

778 c⁄° 
TSåög
 
dúe˘‹õs
[5] = { "InputVariables_Id",

784 c⁄° 
TSåög
 
c‹rDúName
 = "CorrelationPlots";

786 
TDúe˘‹y
* 
roŸDú
 = 
fMëhodBa£
->
	`GëFûe
();

787 
TDúe˘‹y
* 
v¨Dú
 = 0;

788 
TDúe˘‹y
* 
c‹rDú
 = 0;

790 
TDúe˘‹y
* 
mëhodDú
 = 
fMëhodBa£
->
	`Ba£Dú
();

791 
TSåög
 
v¨DúName
;

793 
Boﬁ_t
 
d⁄e
=(
roŸDú
==0);

794 
I¡_t
 
ty≥
=0;

795 i‡(
d⁄e
) {

796 
	`Log
(Ë<< 
kWARNING
 << "Nÿba£dú - BUG??" << 
Endl
;

799 !
d⁄e
) {

800 
v¨Dú
 = (
TDúe˘‹y
*)
roŸDú
->
	`Gë
–
dúe˘‹õs
[
ty≥
] );

801 
ty≥
++;

802 
d⁄e
 = ((
v¨Dú
!=0Ë|| (
ty≥
>4));

804 i‡(
v¨Dú
==0) {

805 
	`Log
(Ë<< 
kWARNING
 << "Nÿöpuàv¨übÀ dúe˘‹y found - BUG?" << 
Endl
;

808 
c‹rDú
 = (
TDúe˘‹y
*)
v¨Dú
->
	`Gë
–
c‹rDúName
 );

809 i‡(
c‹rDú
==0) {

810 
	`Log
(Ë<< 
kWARNING
 << "Nÿc‹ªœti⁄ dúe˘‹y found" << 
Endl
;

811 
	`Log
(Ë<< 
kWARNING
 << "Check f‹ othî w¨nög†ªœãdÅÿc‹ªœti⁄ hi°ogøms" << 
Endl
;

814 i‡(
mëhodDú
==0) {

815 
	`Log
(Ë<< 
kWARNING
 << "NÿruÀfô mëhod dúe˘‹y found - BUG?" << 
Endl
;

819 
v¨DúName
 = 
v¨Dú
->
	`GëName
();

820 
v¨Dú
->
	`cd
();

823 
c‹rDú
 = (
TDúe˘‹y
 *)
v¨Dú
->
	`Gë
(
c‹rDúName
);

824 i‡(
c‹rDú
==0) {

825 
	`Log
(Ë<< 
kWARNING
 << "Nÿc‹ªœti⁄ dúe˘‹y found : " << 
c‹rDúName
 << 
Endl
;

830 
I¡_t
 
noPlŸs
 = ((
v¨Dú
->
	`GëLi°OfKeys
())->
	`GëE¡rõs
()) / 2;

831 
	`Log
(Ë<< 
kDEBUG
 << "GŸÇumbî o‡∂Ÿ†" << 
noPlŸs
 << 
Endl
;

834 
°d
::
ve˘‹
<
TH2F
 *> 
h1Ve˘‹
;

835 
°d
::
ve˘‹
<
TH2F
 *> 
h2C‹rVe˘‹
;

836 
TIãr
 
	`√xt
(
v¨Dú
->
	`GëLi°OfKeys
());

837 
TKey
 *
key
;

838 (
key
 = (
TKey
*)
	`√xt
())) {

840 
TCœss
 *
˛
 = 
gROOT
->
	`GëCœss
(
key
->
	`GëCœssName
());

841 i‡(!
˛
->
	`InhîôsFrom
(
TH1F
::
	`Cœss
())) ;

842 
TH1F
 *
sig
 = (TH1F*)
key
->
	`RódObj
();

843 
TSåög
 
h«me

sig
->
	`GëName
();

844 
	`Log
(Ë<< 
kDEBUG
 << "GŸ hi°ogøm : " << 
h«me
 << 
Endl
;

847 i‡(
h«me
.
	`C⁄èös
("__S")){

848 
TSåög
 
htôÀ
 = 
sig
->
	`GëTôÀ
();

849 
htôÀ
.
	`Rïœ˚AŒ
("signal","");

850 
TSåög
 
√w«me
 = 
h«me
;

851 
√w«me
.
	`Rïœ˚AŒ
("__Signal","__RF");

852 
√w«me
.
	`Rïœ˚AŒ
("__S","__RF");

854 
mëhodDú
->
	`cd
();

855 
TH2F
 *
√whi°
 = 
√w
 
	`TH2F
(
√w«me
,
htôÀ
,
sig
->
	`GëNbösX
(),sig->
	`GëXaxis
()->
	`GëXmö
(),sig->GëXaxis()->
	`GëXmax
(),

856 1,
sig
->
	`GëYaxis
()->
	`GëXmö
(),sig->GëYaxis()->
	`GëXmax
());

857 
v¨Dú
->
	`cd
();

858 
h1Ve˘‹
.
	`push_back
–
√whi°
 );

862 
c‹rDú
->
	`cd
();

863 
TSåög
 
v¨1
,
v¨2
;

864 
TIãr
 
	`√xtC‹r
(
c‹rDú
->
	`GëLi°OfKeys
());

865 (
key
 = (
TKey
*)
	`√xtC‹r
())) {

867 
TCœss
 *
˛
 = 
gROOT
->
	`GëCœss
(
key
->
	`GëCœssName
());

868 i‡(!
˛
->
	`InhîôsFrom
(
TH2F
::
	`Cœss
())) ;

869 
TH2F
 *
sig
 = (TH2F*)
key
->
	`RódObj
();

870 
TSåög
 
h«me

sig
->
	`GëName
();

873 i‡((
h«me
.
	`C⁄èös
("scat_")) && (hname.Contains("_Signal"))) {

874 
	`Log
(Ë<< 
kDEBUG
 << "GŸ hi°ogøm (2DË: " << 
h«me
 << 
Endl
;

875 
TSåög
 
htôÀ
 = 
sig
->
	`GëTôÀ
();

876 
htôÀ
.
	`Rïœ˚AŒ
("(Signal)","");

877 
TSåög
 
√w«me
 = 
h«me
;

878 
√w«me
.
	`Rïœ˚AŒ
("_Signal","_RF2D");

880 
mëhodDú
->
	`cd
();

881 c⁄° 
I¡_t
 
ªbö
=2;

882 
TH2F
 *
√whi°
 = 
√w
 
	`TH2F
(
√w«me
,
htôÀ
,

883 
sig
->
	`GëNbösX
()/
ªbö
,sig->
	`GëXaxis
()->
	`GëXmö
(),sig->GëXaxis()->
	`GëXmax
(),

884 
sig
->
	`GëNbösY
()/
ªbö
,sig->
	`GëYaxis
()->
	`GëXmö
(),sig->GëYaxis()->
	`GëXmax
());

885 i‡(
	`GëC‹rV¨s
–
√w«me
, 
v¨1
, 
v¨2
 )) {

886 
I¡_t
 
iv1
 = 
fMëhodBa£
->
	`D©aInfo
().
	`FödV¨Index
(
v¨1
);

887 
I¡_t
 
iv2
 = 
fMëhodBa£
->
	`D©aInfo
().
	`FödV¨Index
(
v¨2
);

888 i‡(
iv1
<0) {

889 
sig
->
	`GëYaxis
()->
	`SëTôÀ
(
v¨1
);

892 
sig
->
	`GëYaxis
()->
	`SëTôÀ
(
fMëhodBa£
->
	`GëI≈utTôÀ
(
iv1
));

894 i‡(
iv2
<0) {

895 
sig
->
	`GëXaxis
()->
	`SëTôÀ
(
v¨2
);

898 
sig
->
	`GëXaxis
()->
	`SëTôÀ
(
fMëhodBa£
->
	`GëI≈utTôÀ
(
iv2
));

901 
c‹rDú
->
	`cd
();

902 
h2C‹rVe˘‹
.
	`push_back
–
√whi°
 );

906 
v¨Dú
->
	`cd
();

908 
UI¡_t
 
ƒuÀs
 = 
fRuÀEn£mbÀ
.
	`GëNRuÀs
();

909 c⁄° 
RuÀ
 *
ruÀ
;

910 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++) {

911 
ruÀ
 = 
fRuÀEn£mbÀ
.
	`GëRuÀsC⁄°
(
i
);

912 
	`FûlVisHi°Cut
(
ruÀ
, 
h1Ve˘‹
);

915 
	`FûlVisHi°Cut
(0, 
h1Ve˘‹
);

916 
	`N‹mVisHi°s
(
h1Ve˘‹
);

919 
c‹rDú
->
	`cd
();

921 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++) {

922 
ruÀ
 = 
fRuÀEn£mbÀ
.
	`GëRuÀsC⁄°
(
i
);

923 
	`FûlVisHi°C‹r
(
ruÀ
, 
h2C‹rVe˘‹
);

925 
	`N‹mVisHi°s
(
h2C‹rVe˘‹
);

928 
mëhodDú
->
	`cd
();

929 
UI¡_t
 
i
=0; i<
h1Ve˘‹
.
	`size
(); i++Ëh1Ve˘‹[i]->
	`Wrôe
();

930 
UI¡_t
 
i
=0; i<
h2C‹rVe˘‹
.
	`size
(); i++Ëh2C‹rVe˘‹[i]->
	`Wrôe
();

931 
	}
}

936 
	gTMVA
::
RuÀFô
::
	$MakeDebugHi°s
()

938 
TDúe˘‹y
* 
mëhodDú
 = 
fMëhodBa£
->
	`Ba£Dú
();

939 i‡(
mëhodDú
==0) {

940 
	`Log
(Ë<< 
kWARNING
 << "<MakeDebugHi°s> NÿruÀfô mëhod dúe˘‹y found - bug?" << 
Endl
;

944 
mëhodDú
->
	`cd
();

945 
°d
::
ve˘‹
<
DoubÀ_t
> 
di°™˚s
;

946 
°d
::
ve˘‹
<
DoubÀ_t
> 
‚cuts
;

947 
°d
::
ve˘‹
<
DoubÀ_t
> 
‚v¨s
;

948 c⁄° 
RuÀ
 *
ruÀA
;

949 c⁄° 
RuÀ
 *
ruÀB
;

950 
DoubÀ_t
 
dABmö
=1000000.0;

951 
DoubÀ_t
 
dABmax
=-1.0;

952 
UI¡_t
 
ƒuÀs
 = 
fRuÀEn£mbÀ
.
	`GëNRuÀs
();

953 
UI¡_t
 
i
=0; i<
ƒuÀs
; i++) {

954 
ruÀA
 = 
fRuÀEn£mbÀ
.
	`GëRuÀsC⁄°
(
i
);

955 
UI¡_t
 
j
=
i
+1; j<
ƒuÀs
; j++) {

956 
ruÀB
 = 
fRuÀEn£mbÀ
.
	`GëRuÀsC⁄°
(
j
);

957 
DoubÀ_t
 
dAB
 = 
ruÀA
->
	`RuÀDi°
–*
ruÀB
, 
kTRUE
 );

958 i‡(
dAB
>-0.5) {

959 
UI¡_t
 
nc
 = 
ruÀA
->
	`GëNcuts
();

960 
UI¡_t
 
nv
 = 
ruÀA
->
	`GëNumV¨sU£d
();

961 
di°™˚s
.
	`push_back
(
dAB
);

962 
‚cuts
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
nc
));

963 
‚v¨s
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
nv
));

964 i‡(
dAB
<
dABmö
) dABmin=dAB;

965 i‡(
dAB
>
dABmax
) dABmax=dAB;

970 
TH1F
 *
hi°Di°
 = 
√w
 
	`TH1F
("RuÀDi°","RuÀ di°™˚s",100,
dABmö
,
dABmax
);

971 
TTªe
 *
di°Ntu∂e
 = 
√w
 
	`TTªe
("RuleDistNtuple","RuleDistÇtuple");

972 
DoubÀ_t
 
¡Di°
;

973 
DoubÀ_t
 
¡Ncuts
;

974 
DoubÀ_t
 
¡Nv¨s
;

975 
di°Ntu∂e
->
	`Bønch
("di°", &
¡Di°
, "dist/D");

976 
di°Ntu∂e
->
	`Bønch
("ncuts",&
¡Ncuts
, "ncuts/D");

977 
di°Ntu∂e
->
	`Bønch
("nv¨s",&
¡Nv¨s
, "nvars/D");

979 
UI¡_t
 
i
=0; i<
di°™˚s
.
	`size
(); i++) {

980 
hi°Di°
->
	`Fûl
(
di°™˚s
[
i
]);

981 
¡Di°
 = 
di°™˚s
[
i
];

982 
¡Ncuts
 = 
‚cuts
[
i
];

983 
¡Nv¨s
 = 
‚v¨s
[
i
];

984 
di°Ntu∂e
->
	`Fûl
();

986 
di°Ntu∂e
->
	`Wrôe
();

987 
	}
}

	@src/RuleFitAPI.cxx

31 
	~"TMVA/RuÀFôAPI.h
"

33 
	~"TMVA/D©aSë.h
"

34 
	~"TMVA/D©aSëInfo.h
"

35 
	~"TMVA/MëhodRuÀFô.h
"

36 
	~"TMVA/RuÀFô.h
"

37 
	~"TMVA/Timî.h
"

38 
	~"TMVA/Toﬁs.h
"

39 
	~"TMVA/Ty≥s.h
"

40 
	~"TMVA/V¨übÀInfo.h
"

42 
	~"TROOT.h
"

43 
	~"TSy°em.h
"

44 
	~"TM©h.h
"

46 
	~<Æg‹ôhm
>

48 
CœssImp
(
TMVA
::
RuÀFôAPI
);

50 
	gTMVA
::
RuÀFôAPI
::
	$RuÀFôAPI
–c⁄° 
MëhodRuÀFô
 *
rfba£
,

51 
RuÀFô
 *
ruÀfô
,

52 
EMsgTy≥
 
möTy≥
 = 
kINFO
 ) :

53 
	`fMëhodRuÀFô
(
rfba£
),

54 
	`fRuÀFô
(
ruÀfô
),

55 
	`fRFProgøm
(
kRfTøö
),

56 
	`fLoggî
("RuÀFôAPI",
möTy≥
)

59 i‡(
rfba£
) {

60 
	`SëRFW‹kDú
(
rfba£
->
	`GëRFW‹kDú
());

62 
	`SëRFW‹kDú
("./rulefit");

64 
	`InôRuÀFô
();

65 
	}
}

71 
	gTMVA
::
RuÀFôAPI
::~
	$RuÀFôAPI
()

73 
	}
}

78 
TMVA
::
RuÀFôAPI
::
	$WñcomeMesßge
()

80 
fLoggî
 << 
kINFO


89 << 
Endl
;

90 
	}
}

94 
	gTMVA
::
RuÀFôAPI
::
	$HowtoSëupRF
()

96 
fLoggî
 << 
kINFO


101 << " mkdú " << 
fRFW‹kDú
 << "\n\n"

118 << 
Endl
;

119 
	}
}

124 
	gTMVA
::
RuÀFôAPI
::
	$InôRuÀFô
()

126 
	`CheckRFW‹kDú
();

127 
	`FûlI¡P¨msDef
();

128 
	`FûlRólP¨msDef
();

129 
	}
}

134 
	gTMVA
::
RuÀFôAPI
::
	$Imp‹tSëup
()

136 
fRFI¡P¨ms
.
p
 = 
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
();

137 
fRFI¡P¨ms
.
max_ruÀs
 = 
fMëhodRuÀFô
->
	`GëRFNruÀs
();

138 
fRFI¡P¨ms
.
åì_size
 = 
fMëhodRuÀFô
->
	`GëRFNídnodes
();

139 
fRFI¡P¨ms
.
∑th_°ïs
 = 
fMëhodRuÀFô
->
	`GëGDNP©hSãps
();

141 
fRFRólP¨ms
.
∑th_öc
 = 
fMëhodRuÀFô
->
	`GëGDP©hSãp
();

142 
fRFRólP¨ms
.
ßmp_‰a˘
 = 
fMëhodRuÀFô
->
	`GëTªeEveFøc
();

143 
fRFRólP¨ms
.
åim_q¡l
 = 
fMëhodRuÀFô
->
	`GëLöQu™tûe
();

144 
fRFRólP¨ms
.
c⁄v_Ác
 = 
fMëhodRuÀFô
->
	`GëGDEºSˇÀ
();

146 i‡(
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`DoO∆yLöór
() )

147 
fRFI¡P¨ms
.
lmode
 = 
kRfLöór
;

148 i‡(
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`DoO∆yRuÀs
() )

149 
fRFI¡P¨ms
.
lmode
 = 
kRfRuÀs
;

151 
fRFI¡P¨ms
.
lmode
 = 
kRfBŸh
;

152 
	}
}

157 
	gTMVA
::
RuÀFôAPI
::
	$SëRFW‹kDú
(c⁄° * 
wdú
)

159 
fRFW‹kDú
 = 
wdú
;

160 
	}
}

168 
	gTMVA
::
RuÀFôAPI
::
	$CheckRFW‹kDú
()

170 
TSåög
 
ﬁdDú
 = 
gSy°em
->
	`pwd
();

171 i‡(!
gSy°em
->
	`cd
(
fRFW‹kDú
)) {

172 
fLoggî
 << 
kWARNING
 << "Mu° cª©ê®ruÀfô dúe˘‹yÇamed : " << 
fRFW‹kDú
 << 
Endl
;

173 
	`HowtoSëupRF
();

174 
fLoggî
 << 
kFATAL
 << "Sëu∞Áûed -áb‹tög!" << 
Endl
;

177 
FILE
 *
f
 = 
	`f›í
("rf_go.exe","r");

178 i‡(
f
==0) {

179 
fLoggî
 << 
kWARNING
 << "Nÿrf_go.exêfûêö dúe˘‹y : " << 
fRFW‹kDú
 << 
Endl
;

180 
	`HowtoSëupRF
();

181 
fLoggî
 << 
kFATAL
 << "Sëu∞Áûed -áb‹tög!" << 
Endl
;

183 
	`f˛o£
(
f
);

184 
gSy°em
->
	`cd
(
ﬁdDú
.
	`D©a
());

185 
	}
}

190 
	gTMVA
::
RuÀFôAPI
::
	$SëTøöP¨ms
()

192 
	`Imp‹tSëup
();

194 
I¡_t
 
n
 = 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTøöögEvíts
();

196 
fRFI¡P¨ms
.
n
 =Ç;

197 
fRFProgøm
 = 
kRfTøö
;

198 
	}
}

203 
	gTMVA
::
RuÀFôAPI
::
	$SëTe°P¨ms
()

205 
	`Imp‹tSëup
();

206 
I¡_t
 
n
 = 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTe°Evíts
();

208 
fRFI¡P¨ms
.
n
 =Ç;

209 
fRFProgøm
 = 
kRfPªdi˘
;

210 
	}
}

215 
	gTMVA
::
RuÀFôAPI
::
	$FûlRólP¨msDef
()

217 
fRFRólP¨ms
.
xmiss
 = 9.0e30;

218 
fRFRólP¨ms
.
åim_q¡l
 = 0.025;

219 
fRFRólP¨ms
.
hubî
 = 0.8;

220 
fRFRólP¨ms
.
öãr_suµ
 = 3.0;

221 
fRFRólP¨ms
.
mem‹y_∑r
 = 0.01;

222 
fRFRólP¨ms
.
ßmp_‰a˘
 = 0.5;

223 
fRFRólP¨ms
.
∑th_öc
 = 0.01;

224 
fRFRólP¨ms
.
c⁄v_Ác
 = 1.1;

225 
	}
}

230 
	gTMVA
::
RuÀFôAPI
::
	$FûlI¡P¨msDef
()

232 
fRFI¡P¨ms
.
mode
 = ()
kRfCœss
;

233 
fRFI¡P¨ms
.
lmode
 = ()
kRfBŸh
;

236 
fRFI¡P¨ms
.
max_ruÀs
 = 2000;

237 
fRFI¡P¨ms
.
åì_size
 = 4;

238 
fRFI¡P¨ms
.
∑th_•ìd
 = 2;

239 
fRFI¡P¨ms
.
∑th_xvÆ
 = 3;

240 
fRFI¡P¨ms
.
∑th_°ïs
 = 50000;

241 
fRFI¡P¨ms
.
∑th_ã°‰eq
 = 100;

242 
fRFI¡P¨ms
.
åì_°‹e
 = 10000000;

243 
fRFI¡P¨ms
.
ˇt_°‹e
 = 1000000;

245 
	}
}

250 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeAŒ
()

252 
	`WrôeI¡P¨ms
();

253 
	`WrôeRólP¨ms
();

254 
	`WrôeLx
();

255 
	`WrôeProgøm
();

256 
	`WrôeV¨Names
();

257 i‡(
fRFProgøm
==
kRfTøö
Ë
	`WrôeTøö
();

258 i‡(
fRFProgøm
==
kRfPªdi˘
Ë
	`WrôeTe°
();

259 i‡(
fRFProgøm
==
kRfV¨imp
Ë
	`WrôeRólV¨Imp
();

260  
kTRUE
;

261 
	}
}

266 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeI¡P¨ms
()

268 
°d
::
of°ªam
 
f
;

269 i‡(!
	`O≥nRFûe
("öç¨ms",
f
)Ë 
kFALSE
;

270 
	`WrôeI¡
(
f
,&
fRFI¡P¨ms
.
mode
,(fRFI¡P¨ms)/(
I¡_t
));

271  
kTRUE
;

272 
	}
}

277 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRólP¨ms
()

279 
°d
::
of°ªam
 
f
;

280 i‡(!
	`O≥nRFûe
("ªÆ∑rms",
f
)Ë 
kFALSE
;

281 
	`WrôeFlﬂt
(
f
,&
fRFRólP¨ms
.
xmiss
,(fRFRólP¨ms)/(
Flﬂt_t
));

282  
kTRUE
;

283 
	}
}

293 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeLx
()

295 
fRFLx
.
	`˛ór
();

296 
fRFLx
.
	`ªsize
(
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
(),1);

298 
°d
::
of°ªam
 
f
;

299 i‡(!
	`O≥nRFûe
("lx",
f
)Ë 
kFALSE
;

300 
	`WrôeI¡
(
f
,&
fRFLx
[0],fRFLx.
	`size
());

301  
kTRUE
;

302 
	}
}

307 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeProgøm
()

309 
°d
::
of°ªam
 
f
;

310 i‡(!
	`O≥nRFûe
("¥ogøm",
f
)Ë 
kFALSE
;

311 
TSåög
 
¥ogøm
;

312 
fRFProgøm
) {

313 
kRfTøö
:

314 
¥ogøm
 = "rulefit";

316 
kRfPªdi˘
:

317 
¥ogøm
 = "rulefit_pred";

320 
kRfV¨imp
:

321 
¥ogøm
 = "varimp";

324 
fRFProgøm
 = 
kRfTøö
;

325 
¥ogøm
="rulefit";

328 
f
 << 
¥ogøm
;

329  
kTRUE
;

330 
	}
}

335 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRólV¨Imp
()

337 
°d
::
of°ªam
 
f
;

338 i‡(!
	`O≥nRFûe
("ªÆv¨imp",
f
)Ë 
kFALSE
;

339 
Flﬂt_t
 
rvp
[2];

340 
rvp
[0] = 0.0;

341 
rvp
[1] = 0.0;

342 
	`WrôeFlﬂt
(
f
,&
rvp
[0],2);

343  
kTRUE
;

344 
	}
}

349 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRfOut
()

351 
fLoggî
 << 
kWARNING
 << "WrôeRfOuài†nŸ yë im∂emíãd" << 
Endl
;

352  
kTRUE
;

353 
	}
}

358 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRfSètus
()

360 
fLoggî
 << 
kWARNING
 << "WrôeRfSètu†i†nŸ yë im∂emíãd" << 
Endl
;

361  
kTRUE
;

362 
	}
}

367 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRuÀFôMod
()

369 
fLoggî
 << 
kWARNING
 << "WrôeRuÀFôMod i†nŸ yë im∂emíãd" << 
Endl
;

370  
kTRUE
;

371 
	}
}

376 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeRuÀFôSum
()

378 
fLoggî
 << 
kWARNING
 << "WrôeRuÀFôSum i†nŸ yë im∂emíãd" << 
Endl
;

379  
kTRUE
;

380 
	}
}

385 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeTøö
()

387 
°d
::
of°ªam
 
fx
;

388 
°d
::
of°ªam
 
fy
;

389 
°d
::
of°ªam
 
fw
;

391 i‡(!
	`O≥nRFûe
("åaö.x",
fx
)Ë 
kFALSE
;

392 i‡(!
	`O≥nRFûe
("åaö.y",
fy
)Ë 
kFALSE
;

393 i‡(!
	`O≥nRFûe
("åaö.w",
fw
)Ë 
kFALSE
;

395 
Flﬂt_t
 
x
,
y
,
w
;

400 
UI¡_t
 
iv¨
=0; iv¨<
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
(); ivar++) {

401 
I¡_t
 
õvt
=0;õvt<
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTøöögEvíts
(); ievt++) {

402 c⁄° 
Evít
 * 
ev
 = 
fMëhodRuÀFô
->
	`GëTøöögEvít
(
õvt
);

403 
x
 = 
ev
->
	`GëVÆue
(
iv¨
);

404 
	`WrôeFlﬂt
(
fx
,&
x
,1);

405 i‡(
iv¨
==0) {

406 
w
 = 
ev
->
	`GëWeight
();

407 
y
 = 
fMëhodRuÀFô
->
	`D©aInfo
().
	`IsSig«l
(
ev
)? 1.0 : -1.0;

408 
	`WrôeFlﬂt
(
fy
,&
y
,1);

409 
	`WrôeFlﬂt
(
fw
,&
w
,1);

413 
fLoggî
 << 
kINFO
 << "Numbî o‡åaöög d©®wrôãn: " << 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTøöögEvíts
(Ë<< 
Endl
;

414  
kTRUE
;

415 
	}
}

420 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeTe°
()

422 
fMëhodRuÀFô
->
	`D©a
()->
	`SëCuºítTy≥
(
Ty≥s
::
kTe°ög
);

424 
°d
::
of°ªam
 
f
;

426 i‡(!
	`O≥nRFûe
("ã°.x",
f
)Ë 
kFALSE
;

428 
Flﬂt_t
 
vf
;

429 
Flﬂt_t
 
√ve
;

431 
√ve
 = 
°©ic_ˇ°
<
Flﬂt_t
>(
fMëhodRuÀFô
->
	`D©a
()->
	`GëNEvíts
());

432 
	`WrôeFlﬂt
(
f
,&
√ve
,1);

438 
UI¡_t
 
iv¨
=0; iv¨<
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
(); ivar++) {

439 
I¡_t
 
õvt
=0;õvt<
fMëhodRuÀFô
->
	`D©a
()->
	`GëNEvíts
(); ievt++) {

440 
vf
 = 
fMëhodRuÀFô
->
	`GëEvít
(
õvt
)->
	`GëVÆue
(
iv¨
);

441 
	`WrôeFlﬂt
(
f
,&
vf
,1);

444 
fLoggî
 << 
kINFO
 << "Numbî o‡ã° d©®wrôãn: " << 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNEvíts
(Ë<< 
Endl
;

446  
kTRUE
;

447 
	}
}

452 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeV¨Names
()

454 
°d
::
of°ªam
 
f
;

455 i‡(!
	`O≥nRFûe
("v¨«mes",
f
)Ë 
kFALSE
;

456 
UI¡_t
 
iv¨
=0; iv¨<
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
(); ivar++) {

457 
f
 << 
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëV¨übÀInfo
(
iv¨
).
	`GëEx¥essi⁄
() << '\n';

459  
kTRUE
;

460 
	}
}

464 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeV¨Imp
()

468 
fLoggî
 << 
kWARNING
 << "WrôeV¨Im∞i†nŸ yë im∂emíãd" << 
Endl
;

469  
kTRUE
;

470 
	}
}

475 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$WrôeYh©
()

477 
fLoggî
 << 
kWARNING
 << "WrôeYh© i†nŸ yë im∂emíãd" << 
Endl
;

478  
kTRUE
;

479 
	}
}

484 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$RódYh©
()

486 
fRFYh©
.
	`˛ór
();

488 
°d
::
if°ªam
 
f
;

489 i‡(!
	`O≥nRFûe
("yh©",
f
)Ë 
kFALSE
;

490 
I¡_t
 
√ve
;

491 
Flﬂt_t
 
xvÆ
;

492 
	`RódFlﬂt
(
f
,&
xvÆ
,1);

493 
√ve
 = 
°©ic_ˇ°
<
I¡_t
>(
xvÆ
);

494 i‡(
√ve
!=
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTe°Evíts
()) {

495 
fLoggî
 << 
kWARNING
 << "Inc⁄si°íàsizêo‡yh© fûê™dÅe°Åªe!" << 
Endl
;

496 
fLoggî
 << 
kWARNING
 << "√vê" << 
√ve
 << " ,Åªê" << 
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTe°Evíts
(Ë<< 
Endl
;

497  
kFALSE
;

499 
I¡_t
 
õvt
=0; ievt<
fMëhodRuÀFô
->
	`D©a
()->
	`GëNTe°Evíts
(); ievt++) {

500 
	`RódFlﬂt
(
f
,&
xvÆ
,1);

501 
fRFYh©
.
	`push_back
(
xvÆ
);

503  
kTRUE
;

504 
	}
}

509 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$RódV¨Imp
()

511 
fRFV¨Imp
.
	`˛ór
();

513 
°d
::
if°ªam
 
f
;

514 i‡(!
	`O≥nRFûe
("v¨imp",
f
)Ë 
kFALSE
;

515 
UI¡_t
 
nv¨s
;

516 
Flﬂt_t
 
xvÆ
;

517 
Flﬂt_t
 
xmax
=1.0;

518 
nv¨s
=
fMëhodRuÀFô
->
	`D©aInfo
().
	`GëNV¨übÀs
();

522 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

523 
	`RódFlﬂt
(
f
,&
xvÆ
,1);

524 i‡(
iv¨
==0) {

525 
xmax
=
xvÆ
;

527 i‡(
xvÆ
>
xmax
) xmax=xval;

529 
fRFV¨Imp
.
	`push_back
(
xvÆ
);

535 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

536 
fRFV¨Imp
[
iv¨
] = fRFV¨Imp[iv¨]/
xmax
;

537 
	`RódFlﬂt
(
f
,&
xvÆ
,1);

538 
fRFV¨ImpInd
.
	`push_back
(
	`I¡_t
(
xvÆ
)-1);

540  
kTRUE
;

541 
	}
}

546 
Boﬁ_t
 
	gTMVA
::
RuÀFôAPI
::
	$RódModñSum
()

548 
fRFV¨Imp
.
	`˛ór
();

550 
fLoggî
 << 
kVERBOSE
 << "Ródög RuÀFô summ¨y fûe" << 
Endl
;

551 
°d
::
if°ªam
 
f
;

552 i‡(!
	`O≥nRFûe
("ruÀfô.sum",
f
)Ë 
kFALSE
;

553 
I¡_t
 
löes
=0;

554 
I¡_t
 
ƒuÀs
=0;

555 
I¡_t
 
nv¨s
=0;

556 
I¡_t
 
nv¨sO±
=0;

557 
I¡_t
 
dumI
;

558 
Flﬂt_t
 
dumF
;

559 
Flﬂt_t
 
off£t
;

560 
DoubÀ_t
 
im¥ef
=-1.0;

561 
DoubÀ_t
 
imp
;

563 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëAvîageRuÀSigma
(0.4);

590 
Boﬁ_t
 
n‹uÀs
;

591 
löes
 +
	`RódI¡
(
f
,&
ƒuÀs
);

592 
n‹uÀs
 = (
ƒuÀs
==1);

593 
löes
 +
	`RódI¡
(
f
,&
dumI
);

594 
n‹uÀs
 =Ç‹uÀ†&& (
dumI
==1);

595 
löes
 +
	`RódI¡
(
f
,&
dumI
);

596 
n‹uÀs
 =Ç‹uÀ†&& (
dumI
==1);

597 
löes
 +
	`RódI¡
(
f
,&
dumI
);

598 
n‹uÀs
 =Ç‹uÀ†&& (
dumI
==0);

599 i‡(
ƒuÀs
==0Ë
n‹uÀs
=
kTRUE
;

600 i‡(
n‹uÀs
Ë
ƒuÀs
 = 0;

602 
löes
 +
	`RódI¡
(
f
,&
nv¨s
);

603 
löes
 +
	`RódI¡
(
f
,&
nv¨sO±
);

604 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

605 
löes
 +
	`RódFlﬂt
(
f
,&
off£t
);

606 
fLoggî
 << 
kDEBUG
 << "N‘uÀsË" << 
ƒuÀs
 << 
Endl
;

607 
fLoggî
 << 
kDEBUG
 << "N(v¨sË = " << 
nv¨s
 << 
Endl
;

608 
fLoggî
 << 
kDEBUG
 << "N(v¨sOË" << 
nv¨sO±
 << 
Endl
;

609 
fLoggî
 << 
kDEBUG
 << "xmis† = " << 
dumF
 << 
Endl
;

610 
fLoggî
 << 
kDEBUG
 << "off£à = " << 
off£t
 << 
Endl
;

611 i‡(
nv¨s
!=
nv¨sO±
) {

612 
fLoggî
 << 
kWARNING
 << "F‹m© o‡ruÀfô.sum i†... weúd?? C⁄töuög buàwhÿknow†how iàwû»íd...?" << 
Endl
;

614 
°d
::
ve˘‹
<
DoubÀ_t
> 
rfSuµ
;

615 
°d
::
ve˘‹
<
DoubÀ_t
> 
rfC€f
;

616 
°d
::
ve˘‹
<
I¡_t
> 
rfNcut
;

617 
°d
::
ve˘‹
<
RuÀ
 *> 
rfRuÀs
;

618 i‡(
n‹uÀs
) {

621 
I¡_t
 
t
=0;Å<8;Å++) {

622 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

636 
I¡_t
 
r
=0;Ñ<
ƒuÀs
;Ñ++) {

637 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

638 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

639 
rfSuµ
.
	`push_back
(
dumF
);

640 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

641 
rfC€f
.
	`push_back
(
dumF
);

642 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

643 
rfNcut
.
	`push_back
(
°©ic_ˇ°
<>(
dumF
+0.5));

644 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

657 
I¡_t
 
r
=0;Ñ<
ƒuÀs
;Ñ++) {

658 
I¡_t
 
v¨öd
;

659 
DoubÀ_t
 
xmö
;

660 
DoubÀ_t
 
xmax
;

661 
RuÀ
 *
ruÀ
 = 
√w
 
	`RuÀ
(
fRuÀFô
->
	`GëRuÀEn£mbÀPå
());

662 
rfRuÀs
.
	`push_back
–
ruÀ
 );

663 
RuÀCut
 *
rfcut
 = 
√w
 
	`RuÀCut
();

664 
rfcut
->
	`SëNv¨s
(
rfNcut
[
r
]);

665 
ruÀ
->
	`SëRuÀCut
–
rfcut
 );

668 
ruÀ
->
	`SëN‹m
(1.0);

669 
ruÀ
->
	`SëSuµ‹t
(0);

670 
ruÀ
->
	`SëSSB
(0.0);

671 
ruÀ
->
	`SëSSBNeve
(0.0);

672 
ruÀ
->
	`SëImp‹èn˚Ref
(1.0);

673 
ruÀ
->
	`SëSSB
(0.0);

674 
ruÀ
->
	`SëSSBNeve
(0.0);

676 
ruÀ
->
	`SëSuµ‹t
(
rfSuµ
[
r
]);

677 
ruÀ
->
	`SëC€fficõ¡
(
rfC€f
[
r
]);

678 
ruÀ
->
	`CÆcImp‹èn˚
();

679 
imp
 = 
ruÀ
->
	`GëImp‹èn˚
();

680 i‡(
imp
>
im¥ef
) impref = imp;

682 
fLoggî
 << 
kDEBUG
 << "RuÀ #" << 
r
 << " : " << 
nv¨s
 << 
Endl
;

683 
fLoggî
 << 
kDEBUG
 << " suµ‹à = " << 
rfSuµ
[
r
] << 
Endl
;

684 
fLoggî
 << 
kDEBUG
 << " sigm® = " << 
ruÀ
->
	`GëSigma
(Ë<< 
Endl
;

685 
fLoggî
 << 
kDEBUG
 << " c€f‡ = " << 
rfC€f
[
r
] << 
Endl
;

686 
fLoggî
 << 
kDEBUG
 << " N(cutË = " << 
rfNcut
[
r
] << 
Endl
;

688 
I¡_t
 
c
=0; c<
rfNcut
[
r
]; c++) {

689 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

690 
v¨öd
 = 
°©ic_ˇ°
<
I¡_t
>(
dumF
+0.5)-1;

691 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

692 
xmö
 = 
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
);

693 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

694 
xmax
 = 
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
);

696 
rfcut
->
	`SëSñe˘‹
(
c
,
v¨öd
);

697 
rfcut
->
	`SëCutMö
(
c
,
xmö
);

698 
rfcut
->
	`SëCutMax
(
c
,
xmax
);

701 
rfcut
->
	`SëCutDoMö
(
c
,(
xmö
<-8.99e35 ? 
kFALSE
:
kTRUE
));

702 
rfcut
->
	`SëCutDoMax
(
c
,(
xmax
> 8.99e35 ? 
kFALSE
:
kTRUE
));

706 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëRuÀs
–
rfRuÀs
 );

707 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëOff£t
–
off£t
 );

720 
°d
::
ve˘‹
<
I¡_t
> 
v¨öd
;

721 
°d
::
ve˘‹
<
DoubÀ_t
> 
xmö
;

722 
°d
::
ve˘‹
<
DoubÀ_t
> 
xmax
;

723 
°d
::
ve˘‹
<
DoubÀ_t
> 
avîage
;

724 
°d
::
ve˘‹
<
DoubÀ_t
> 
°dev
;

725 
°d
::
ve˘‹
<
DoubÀ_t
> 
n‹m
;

726 
°d
::
ve˘‹
<
DoubÀ_t
> 
c€ff
;

728 
I¡_t
 
c
=0; c<
nv¨s
; c++) {

729 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

730 
v¨öd
.
	`push_back
(
°©ic_ˇ°
<
I¡_t
>(
dumF
+0.5)-1);

731 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

732 
xmö
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
));

733 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

734 
xmax
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
));

735 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

736 
avîage
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
));

737 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

738 
°dev
.
	`push_back
(
°©ic_ˇ°
<
DoubÀ_t
>(
dumF
));

739 
DoubÀ_t
 
nv
 = 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`CÆcLöN‹m
(
°dev
.
	`back
());

740 
n‹m
.
	`push_back
(
nv
);

741 
löes
 +
	`RódFlﬂt
(
f
,&
dumF
);

742 
c€ff
.
	`push_back
(
dumF
/
nv
);

744 
fLoggî
 << 
kDEBUG
 << "Löó∏#" << 
c
 << 
Endl
;

745 
fLoggî
 << 
kDEBUG
 << " v¨öd = " << 
v¨öd
.
	`back
(Ë<< 
Endl
;

746 
fLoggî
 << 
kDEBUG
 << " xmö = " << 
xmö
.
	`back
(Ë<< 
Endl
;

747 
fLoggî
 << 
kDEBUG
 << " xmax = " << 
xmax
.
	`back
(Ë<< 
Endl
;

748 
fLoggî
 << 
kDEBUG
 << "ávîagê = " << 
avîage
.
	`back
(Ë<< 
Endl
;

749 
fLoggî
 << 
kDEBUG
 << " stdev = " << 
°dev
.
	`back
(Ë<< 
Endl
;

750 
fLoggî
 << 
kDEBUG
 << " c€f‡ = " << 
c€ff
.
	`back
(Ë<< 
Endl
;

752 i‡(
xmö
.
	`size
()>0) {

753 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëLöC€fficõ¡s
(
c€ff
);

754 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëLöDM
(
xmö
);

755 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëLöDP
(
xmax
);

756 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëLöN‹m
(
n‹m
);

759 
imp
 = 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`CÆcLöImp‹èn˚
();

760 i‡(
imp
>
im¥ef
) impref=imp;

761 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`SëImp‹èn˚Ref
(
im¥ef
);

762 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`CÀ™upLöór
();

764 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
()->
	`CÆcV¨Imp‹èn˚
();

767 
fLoggî
 << 
kDEBUG
 << "Ródög modñ d⁄e" << 
Endl
;

768  
kTRUE
;

769 
	}
}

774 
I¡_t
 
	gTMVA
::
RuÀFôAPI
::
	$RunRuÀFô
()

776 
TSåög
 
ﬁdDú
 = 
gSy°em
->
	`pwd
();

777 
TSåög
 
cmd
 = "./rf_go.exe";

778 
gSy°em
->
	`cd
(
fRFW‹kDú
.
	`D©a
());

779 
rvÆ
 = 
gSy°em
->
	`Exec
(
cmd
.
	`D©a
());

780 
gSy°em
->
	`cd
(
ﬁdDú
.
	`D©a
());

781  
rvÆ
;

782 
	}
}

	@src/RuleFitParams.cxx

31 
	~"TMVA/RuÀFôP¨ams.h
"

33 
	~"TMVA/D©aSëInfo.h
"

34 
	~"TMVA/MëhodRuÀFô.h
"

35 
	~"TMVA/MsgLoggî.h
"

36 
	~"TMVA/RuÀEn£mbÀ.h
"

37 
	~"TMVA/RuÀFô.h
"

38 
	~"TMVA/Timî.h
"

39 
	~"TMVA/Toﬁs.h
"

40 
	~"TMVA/Ty≥s.h
"

42 
	~"TTªe.h
"

43 
	~"TM©h.h
"

45 
	~<io°ªam
>

46 
	~<iom™ù
>

47 
	~<numîic
>

48 
	~<Æg‹ôhm
>

49 
	~<fun˘i⁄Æ
>

51 
Boﬁ_t
 
	ggFIRSTTST
=
kTRUE
;

52 
Boﬁ_t
 
	ggFIRSTORG
=
kTRUE
;

54 
DoubÀ_t
 
	ggGDInô
=0;

55 
DoubÀ_t
 
	ggGDPå
=0;

56 
DoubÀ_t
 
	ggGDN‹m
=0;

57 
DoubÀ_t
 
	ggGDEvÆ
=0;

58 
DoubÀ_t
 
	ggGDEvÆRuÀ
=0;

59 
DoubÀ_t
 
	ggGDRuÀLo›
=0;

60 
DoubÀ_t
 
	ggGDLöLo›
=0;

65 
	gTMVA
::
RuÀFôP¨ams
::
	$RuÀFôP¨ams
()

66 : 
	`fRuÀFô
 ( 0 )

67 , 
	`fRuÀEn£mbÀ
 ( 0 )

68 , 
	`fNRuÀs
 ( 0 )

69 , 
	`fNLöór
 ( 0 )

70 , 
	`fP©hIdx1
 ( 0 )

71 , 
	`fP©hIdx2
 ( 0 )

72 , 
	`fPîfIdx1
 ( 0 )

73 , 
	`fPîfIdx2
 ( 0 )

74 , 
	`fGDNTauT°OK
( 0 )

75 , 
	`fGDNTau
 ( 51 )

76 , 
	`fGDTauPªc
 ( 0.02 )

77 , 
	`fGDTauSˇn
 ( 1000 )

78 , 
	`fGDTauMö
 ( 0.0 )

79 , 
	`fGDTauMax
 ( 1.0 )

80 , 
	`fGDTau
 ( -1.0 )

81 , 
	`fGDP©hSãp
 ( 0.01 )

82 , 
	`fGDNP©hSãps
 ( 1000 )

83 , 
	`fGDEºSˇÀ
 ( 1.1 )

84 , 
	`fAvîageTruth
( 0 )

85 , 
	`fF°¨Medün
 ( 0 )

86 , 
	`fGDNtu∂e
 ( 0 )

87 , 
	`fNTRisk
 ( 0 )

88 , 
	`fNTEº‹R©e
 ( 0 )

89 , 
	`fNTNuvÆ
 ( 0 )

90 , 
	`fNTC€fRad
 ( 0 )

91 , 
	`fNTOff£t
 ( 0 )

92 , 
	`fNTC€ff
 ( 0 )

93 , 
	`fNTLöC€ff
 ( 0 )

94 , 
	`fsigave
( 0 )

95 , 
	`fsigrms
( 0 )

96 , 
	`fbkgave
( 0 )

97 , 
	`fbkgrms
( 0 )

98 , 
	`fLoggî
–
√w
 
	`MsgLoggî
("RuleFit") )

100 
	`Inô
();

101 
	}
}

105 
	gTMVA
::
RuÀFôP¨ams
::~
	$RuÀFôP¨ams
()

107 i‡(
fNTC€ff
Ë{ 
dñëe
 fNTCoeff; fNTCoeff = 0; }

108 i‡(
fNTLöC€ff
Ë{ 
dñëe
 fNTLinCoeff;fNTLinCoeff = 0; }

109 
dñëe
 
fLoggî
;

110 
	}
}

115 
	gTMVA
::
RuÀFôP¨ams
::
	$Inô
()

117 i‡(
fRuÀFô
==0) ;

118 i‡(
fRuÀFô
->
	`GëMëhodRuÀFô
()==0) {

119 
	`Log
(Ë<< 
kFATAL
 << "RuÀFôP¨ams::Inô(Ë- MëhodRuÀFôÖå i†nuŒ" << 
Endl
;

121 
UI¡_t
 
√ve
 = 
fRuÀFô
->
	`GëTøöögEvíts
().
	`size
();

123 
fRuÀEn£mbÀ
 = 
fRuÀFô
->
	`GëRuÀEn£mbÀPå
();

124 
fNRuÀs
 = 
fRuÀEn£mbÀ
->
	`GëNRuÀs
();

125 
fNLöór
 = 
fRuÀEn£mbÀ
->
	`GëNLöór
();

131 
UI¡_t
 
ofs
;

132 
fPîfIdx1
 = 0;

133 i‡(
√ve
>1) {

134 
fPîfIdx2
 = 
°©ic_ˇ°
<
UI¡_t
>((
√ve
-1)*
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`GëGDVÆidEveFøc
());

137 
fPîfIdx2
 = 0;

139 
ofs
 = 
√ve
 - 
fPîfIdx2
 - 1;

140 
fPîfIdx1
 +
ofs
;

141 
fPîfIdx2
 +
ofs
;

147 
fP©hIdx1
 = 0;

148 i‡(
√ve
>1) {

149 
fP©hIdx2
 = 
°©ic_ˇ°
<
UI¡_t
>((
√ve
-1)*
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`GëGDP©hEveFøc
());

152 
fP©hIdx2
 = 0;

157 
fNEveEffP©h
 = 0;;

158 
UI¡_t
 
õ
=
fP©hIdx1
; ie<
fP©hIdx2
+1; ie++) {

159 
fNEveEffP©h
 +
fRuÀFô
->
	`GëTøöögEvítWeight
(
õ
);

162 
fNEveEffPîf
=0;

163 
UI¡_t
 
õ
=
fPîfIdx1
; ie<
fPîfIdx2
+1; ie++) {

164 
fNEveEffPîf
 +
fRuÀFô
->
	`GëTøöögEvítWeight
(
õ
);

167 
	`Log
(Ë<< 
kVERBOSE
 << "P©h c⁄°r. -ÉvíàödexÑ™gê[ " << 
fP©hIdx1
 << ", " << 
fP©hIdx2
 << " ]"

168 << ",Éf„˘ivêN”vítsË" << 
fNEveEffP©h
 << 
Endl
;

169 
	`Log
(Ë<< 
kVERBOSE
 << "Eº‹É°im. -ÉvíàödexÑ™gê[ " << 
fPîfIdx1
 << ", " << 
fPîfIdx2
 << " ]"

170 << ",Éf„˘ivêN”vítsË" << 
fNEveEffPîf
 << 
Endl
;

172 i‡(
fRuÀEn£mbÀ
->
	`DoRuÀs
())

173 
	`Log
(Ë<< 
kDEBUG
 << "Numbî o‡ruÀ†öÉn£mbÀ: " << 
fNRuÀs
 << 
Endl
;

175 
	`Log
(Ë<< 
kDEBUG
 << "RuÀ†¨êdißbÀd " << 
Endl
;

177 i‡(
fRuÀEn£mbÀ
->
	`DoLöór
())

178 
	`Log
(Ë<< 
kDEBUG
 << "Numbî o‡löó∏ãrms: " << 
fNLöór
 << 
Endl
;

180 
	`Log
(Ë<< 
kDEBUG
 << "Löó∏ãrm†¨êdißbÀd " << 
Endl
;

181 
	}
}

186 
	gTMVA
::
RuÀFôP¨ams
::
	$InôNtu∂e
()

188 
fGDNtu∂e

√w
 
	`TTªe
("MonitorNtuple_RuleFitParams","RuleFitÖath search");

189 
fGDNtu∂e
->
	`Bønch
("risk", &
fNTRisk
, "risk/D");

190 
fGDNtu∂e
->
	`Bønch
("îr‹", &
fNTEº‹R©e
,"error/D");

191 
fGDNtu∂e
->
	`Bønch
("nuvÆ", &
fNTNuvÆ
, "nuval/D");

192 
fGDNtu∂e
->
	`Bønch
("c€‰ad", &
fNTC€fRad
, "coefrad/D");

193 
fGDNtu∂e
->
	`Bønch
("off£t", &
fNTOff£t
, "offset/D");

195 
fNTC€ff
 = (
fNRuÀs
 >0 ? 
√w
 
DoubÀ_t
[fNRules] : 0);

196 
fNTLöC€ff
 = (
fNLöór
>0 ? 
√w
 
DoubÀ_t
[fNLinear] : 0);

198 
UI¡_t
 
i
=0; i<
fNRuÀs
; i++) {

199 
fGDNtu∂e
->
	`Bønch
(
	`F‹m
("a%d",
i
+1),&
fNTC€ff
[i],Form("a%d/D",i+1));

201 
UI¡_t
 
i
=0; i<
fNLöór
; i++) {

202 
fGDNtu∂e
->
	`Bønch
(
	`F‹m
("b%d",
i
+1),&
fNTLöC€ff
[i],Form("b%d/D",i+1));

204 
	}
}

209 
	gTMVA
::
RuÀFôP¨ams
::
EvÆu©eAvîage
–
UI¡_t
 
öd1
, UI¡_à
öd2
,

210 
°d
::
ve˘‹
<
DoubÀ_t
> &
av£l
,

211 
°d
::
ve˘‹
<
DoubÀ_t
> &
avrul
 )

213 
UI¡_t
 
√ve
 = 
öd2
-
öd1
+1;

214 i‡(
	g√ve
<1) {

215 
Log
(Ë<< 
	gkFATAL
 << "<EvÆu©eAvîage> -Çÿevít†£À˘ed f‹Ö©h sórch -> BUG!" << 
	gEndl
;

218 
	gav£l
.
˛ór
();

219 
	gavrul
.
˛ór
();

221 i‡(
	gfNLöór
>0Ë
	gav£l
.
ªsize
(
fNLöór
,0);

222 i‡(
	gfNRuÀs
>0Ë
	gavrul
.
ªsize
(
fNRuÀs
,0);

223 c⁄° 
	g°d
::
ve˘‹
<
UI¡_t
> *
evítRuÀM≠
=0;

224 
DoubÀ_t
 
	gew
;

225 
DoubÀ_t
 
	gsumew
=0;

229 i‡(
	gfRuÀEn£mbÀ
->
IsRuÀM≠OK
()) {

230  
UI¡_t
 
	gi
=
öd1
; i<
	göd2
+1; i++) {

231 
	gew
 = 
fRuÀFô
->
GëTøöögEvítWeight
(
i
);

232 
	gsumew
 +
ew
;

233  
UI¡_t
 
	g£l
=0; sñ<
	gfNLöór
; sel++ ) {

234 
	gav£l
[
£l
] +
ew
*
fRuÀEn£mbÀ
->
EvÆLöEvít
(
i
,sel);

237 
UI¡_t
 
	gƒuÀs
=0;

238 i‡(
	gfRuÀEn£mbÀ
->
DoRuÀs
()) {

239 
	gevítRuÀM≠
 = &(
fRuÀEn£mbÀ
->
GëEvítRuÀM≠
(
i
));

240 
	gƒuÀs
 = (*
evítRuÀM≠
).
size
();

242 
UI¡_t
 
	gr
=0;Ñ<
	gƒuÀs
;Ñ++) {

243 
	gavrul
[(*
evítRuÀM≠
)[
r
]] +
ew
;

248 c⁄° 
	g°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
GëTøöögEvíts
());

249  
UI¡_t
 
	gi
=
öd1
; i<
	göd2
+1; i++) {

250 
	gew
 = 
fRuÀFô
->
GëTøöögEvítWeight
(
i
);

251 
	gsumew
 +
ew
;

253  
	gfRuÀEn£mbÀ
->
EvÆLöEvít
(*((*
evíts
)[
i
]));

254  
	gfRuÀEn£mbÀ
->
EvÆEvít
(*((*
evíts
)[
i
]));

256  
UI¡_t
 
	g£l
=0; sñ<
	gfNLöór
; sel++ ) {

257 
	gav£l
[
£l
] +
ew
*
fRuÀEn£mbÀ
->
GëEvítLöórVÆN‹m
(sel);

260 
UI¡_t
 
	gr
=0;Ñ<
	gfNRuÀs
;Ñ++) {

261 
	gavrul
[
r
] +
ew
*
fRuÀEn£mbÀ
->
GëEvítRuÀVÆ
(r);

266  
UI¡_t
 
	g£l
=0; sñ<
	gfNLöór
; sel++ ) {

267 
	gav£l
[
£l
] = 
av£l
[£l] / 
sumew
;

270 
UI¡_t
 
	gr
=0;Ñ<
	gfNRuÀs
;Ñ++) {

271 
	gavrul
[
r
] = 
avrul
[r] / 
sumew
;

279 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$LossFun˘i⁄
–c⁄° 
Evít
& 
e
 ) const

281 
DoubÀ_t
 
h
 = 
TM©h
::
	`Max
–-1.0, TM©h::
	`Mö
(1.0,
fRuÀEn£mbÀ
->
	`EvÆEvít
–
e
 )) );

282 
DoubÀ_t
 
diff
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(&
e
)?1:-1Ë- 
h
;

284  
diff
*diff*
e
.
	`GëWeight
();

285 
	}
}

291 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$LossFun˘i⁄
–
UI¡_t
 
evtidx
 ) const

293 
DoubÀ_t
 
h
 = 
TM©h
::
	`Max
–-1.0, TM©h::
	`Mö
(1.0,
fRuÀEn£mbÀ
->
	`EvÆEvít
–
evtidx
 )) );

294 
DoubÀ_t
 
diff
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(
fRuÀEn£mbÀ
->
	`GëRuÀM≠Evít
–
evtidx
 ))?1:-1Ë- 
h
;

296  
diff
*diff*
fRuÀFô
->
	`GëTøöögEvítWeight
(
evtidx
);

297 
	}
}

303 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$LossFun˘i⁄
–
UI¡_t
 
evtidx
, UI¡_à
ôau
 ) const

305 
DoubÀ_t
 
e
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
evtidx
 , 
fGDOfsT°
[
ôau
], 
fGDC€fT°
[ôau], 
fGDC€fLöT°
[itau]);

306 
DoubÀ_t
 
h
 = 
TM©h
::
	`Max
–-1.0, TM©h::
	`Mö
(1.0,
e
) );

307 
DoubÀ_t
 
diff
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(
fRuÀEn£mbÀ
->
	`GëRuÀM≠Evít
–
evtidx
 ))?1:-1Ë- 
h
;

309  
diff
*diff*
fRuÀFô
->
	`GëTøöögEvítWeight
(
evtidx
);

310 
	}
}

315 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Risk
(
UI¡_t
 
öd1
,UI¡_à
öd2
, 
DoubÀ_t
 
√ff
) const

317 
UI¡_t
 
√ve
 = 
öd2
-
öd1
+1;

318 i‡(
√ve
<1) {

319 
	`Log
(Ë<< 
kFATAL
 << "<Risk> InvÆid sèπ/íd indi˚s! BUG!!!" << 
Endl
;

321 
DoubÀ_t
 
rvÆ
=0;

324  
UI¡_t
 
i
=
öd1
; i<
öd2
+1; i++) {

325 
rvÆ
 +
	`LossFun˘i⁄
(
i
);

327 
rvÆ
 =ÑvÆ/
√ff
;

329  
rvÆ
;

330 
	}
}

335 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Risk
(
UI¡_t
 
öd1
,UI¡_à
öd2
, 
DoubÀ_t
 
√ff
, UI¡_à
ôau
) const

337 
UI¡_t
 
√ve
 = 
öd2
-
öd1
+1;

338 i‡(
√ve
<1) {

339 
	`Log
(Ë<< 
kFATAL
 << "<Risk> InvÆid sèπ/íd indi˚s! BUG!!!" << 
Endl
;

341 
DoubÀ_t
 
rvÆ
=0;

344  
UI¡_t
 
i
=
öd1
; i<
öd2
+1; i++) {

345 
rvÆ
 +
	`LossFun˘i⁄
(
i
,
ôau
);

347 
rvÆ
 =ÑvÆ/
√ff
;

349  
rvÆ
;

350 
	}
}

357 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$PíÆty
() const

359 
	`Log
(Ë<< 
kWARNING
 << "<PíÆty> Usög unvîifõd code! Check!" << 
Endl
;

360 
DoubÀ_t
 
rvÆ
=0;

361 c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
> *
löc€ff
 = & (
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
());

362 
UI¡_t
 
i
=0; i<
fNRuÀs
; i++) {

363 
rvÆ
 +
TM©h
::
	`Abs
(
fRuÀEn£mbÀ
->
	`GëRuÀs
(
i
)->
	`GëC€fficõ¡
());

365 
UI¡_t
 
i
=0; i<
fNLöór
; i++) {

366 
rvÆ
 +
TM©h
::
	`Abs
((*
löc€ff
)[
i
]);

368  
rvÆ
;

369 
	}
}

374 
	gTMVA
::
RuÀFôP¨ams
::
	$InôGD
()

376 i‡(
fGDNTau
<2) {

377 
fGDNTau
 = 1;

378 
fGDTauSˇn
 = 0;

380 i‡(
fGDTau
<0.0) {

382 
fGDTauSˇn
 = 1000;

383 
fGDTauMö
 = 0.0;

384 
fGDTauMax
 = 1.0;

387 
fGDNTau
 = 1;

388 
fGDTauSˇn
 = 0;

391 
fGDTauVec
.
	`˛ór
();

392 
fGDTauVec
.
	`ªsize
–
fGDNTau
 );

393 i‡(
fGDNTau
==1) {

394 
fGDTauVec
[0] = 
fGDTau
;

398 
DoubÀ_t
 
dèu
 = (
fGDTauMax
 - 
fGDTauMö
)/
°©ic_ˇ°
<DoubÀ_t>(
fGDNTau
-1);

399 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

400 
fGDTauVec
[
ôau
] = 
°©ic_ˇ°
<
DoubÀ_t
>(ôau)*
dèu
 + 
fGDTauMö
;

401 i‡(
fGDTauVec
[
ôau
]>1.0) fGDTauVec[itau]=1.0;

406 
fGødVec
.
	`˛ór
();

407 
fGødVecLö
.
	`˛ór
();

408 
fGødVecT°
.
	`˛ór
();

409 
fGødVecLöT°
.
	`˛ór
();

410 
fGDEºT°
.
	`˛ór
();

411 
fGDEºT°OK
.
	`˛ór
();

412 
fGDOfsT°
.
	`˛ór
();

413 
fGDC€fT°
.
	`˛ór
();

414 
fGDC€fLöT°
.
	`˛ór
();

418 
fGDC€fT°
.
	`ªsize
(
fGDNTau
);

419 
fGødVec
.
	`ªsize
(
fNRuÀs
,0);

420 
fGødVecT°
.
	`ªsize
(
fGDNTau
);

421 
UI¡_t
 
i
=0; i<
fGDNTau
; i++) {

422 
fGødVecT°
[
i
].
	`ªsize
(
fNRuÀs
,0);

423 
fGDC€fT°
[
i
].
	`ªsize
(
fNRuÀs
,0);

428 
fGDC€fLöT°
.
	`ªsize
(
fGDNTau
);

429 
fGødVecLö
.
	`ªsize
(
fNLöór
,0);

430 
fGødVecLöT°
.
	`ªsize
(
fGDNTau
);

431 
UI¡_t
 
i
=0; i<
fGDNTau
; i++) {

432 
fGødVecLöT°
[
i
].
	`ªsize
(
fNLöór
,0);

433 
fGDC€fLöT°
[
i
].
	`ªsize
(
fNLöór
,0);

438 
fGDEºT°
.
	`ªsize
(
fGDNTau
,0);

439 
fGDEºT°OK
.
	`ªsize
(
fGDNTau
,
kTRUE
);

440 
fGDOfsT°
.
	`ªsize
(
fGDNTau
,0);

441 
fGDNTauT°OK
 = 
fGDNTau
;

445 
	}
}

450 
I¡_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$FödGDTau
()

452 i‡(
fGDNTau
<2)  0;

453 i‡(
fGDTauSˇn
==0)  0;

455 i‡(
fGDOfsT°
.
	`size
()<1)

456 
	`Log
(Ë<< 
kFATAL
 << "BUG! FödGDTau(Ëha†bì¿ˇŒed BEFORE InôGD()." << 
Endl
;

458 
	`Log
(Ë<< 
kINFO
 << "E°im©ögÅhêcutof‡∑ømëîÅau. Thêe°im©edÅimêi†®≥ssimi°i¯maximum." << 
Endl
;

461 
UI¡_t
 
nsˇn
 = 
fGDTauSˇn
;

462 
UI¡_t
 
√t°
 = 
°d
::
	`mö
(
nsˇn
,
	`UI¡_t
(100));

463 
UI¡_t
 
nsˇ¬ed
=0;

475 
Boﬁ_t
 
dﬁo›
=
kTRUE
;

476 
UI¡_t
 
ù
=0;

477 
UI¡_t
 
ôauMö
=0;

478 
Timî
 
	`timî
–
nsˇn
, "RuleFit" );

479 
dﬁo›
) {

481 
	`MakeT°Gødõ¡Ve˘‹
();

483 
	`Upd©eT°C€fficõ¡s
();

486 
nsˇ¬ed
++;

487 i‡–(
ù
==0Ë|| ((ù+1)%
√t°
==0) ) {

489 
ôauMö
 = 
	`RiskPîfT°
();

490 
	`Log
(Ë<< 
kVERBOSE
 << 
	`F‹m
("%4d",
ù
+1Ë<< ".Åau = " << F‹m("%4.4f",
fGDTauVec
[
ôauMö
])

491 << " =>Éº‹Ñ©ê" << 
fGDEºT°
[
ôauMö
] << 
Endl
;

493 
ù
++;

494 
dﬁo›
 = ((
ù
<
nsˇn
Ë&& (
fGDNTauT°OK
>3));

495 
gFIRSTTST
=
kFALSE
;

496 i‡(
	`Log
().
	`GëMöTy≥
()>
kVERBOSE
)

497 
timî
.
	`DøwProgªssB¨
(
ù
);

503 i‡(
nsˇ¬ed
==0) {

504 
	`Log
(Ë<< 
kERROR
 << "<FödGDTau>Çumbî o‡sˇ¬edÜo›†i†zîo! Should NOT sìÅhi†mesßge." << 
Endl
;

506 
fGDTau
 = 
fGDTauVec
[
ôauMö
];

507 
fRuÀEn£mbÀ
->
	`SëC€fficõ¡s
–
fGDC€fT°
[
ôauMö
] );

508 
fRuÀEn£mbÀ
->
	`SëLöC€fficõ¡s
–
fGDC€fLöT°
[
ôauMö
] );

509 
fRuÀEn£mbÀ
->
	`SëOff£t
–
fGDOfsT°
[
ôauMö
] );

510 
	`Log
(Ë<< 
kINFO
 << "Be°Ö©h found wôhÅau = " << 
	`F‹m
("%4.4f",
fGDTau
)

511 << "á·î " << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

513  
nsˇn
;

514 
	}
}

539 
	gTMVA
::
RuÀFôP¨ams
::
	$MakeGDP©h
()

541 
	`Log
(Ë<< 
kINFO
 << "GDÖath scan -Åhe scan stops whenÅhe maxÇum. of steps isÑeached orá min is found"

542 << 
Endl
;

543 
	`Log
(Ë<< 
kVERBOSE
 << "Numbî o‡evít†u£dÖîÖ©h sã∞" << 
fP©hIdx2
-
fP©hIdx1
+1 << 
Endl
;

544 
	`Log
(Ë<< 
kVERBOSE
 << "Numbî o‡evít†u£d f‹Éº‹É°im©i⁄ = " << 
fPîfIdx2
-
fPîfIdx1
+1 << 
Endl
;

547 c⁄° 
Boﬁ_t
 
isVîbo£
 = (
	`Log
().
	`GëMöTy≥
()<=
kVERBOSE
);

548 c⁄° 
Boﬁ_t
 
isDebug
 = (
	`Log
().
	`GëMöTy≥
()<=
kDEBUG
);

551 
	`InôGD
();

554 
	`EvÆu©eAvîageP©h
();

555 
	`EvÆu©eAvîagePîf
();

558 
	`Log
(Ë<< 
kVERBOSE
 << "Cª©ög GDÖ©h" << 
Endl
;

559 
	`Log
(Ë<< 
kVERBOSE
 << " N(°ïsË = " << 
fGDNP©hSãps
 << 
Endl
;

560 
	`Log
(Ë<< 
kVERBOSE
 << " sã∞ = " << 
fGDP©hSãp
 << 
Endl
;

561 
	`Log
(Ë<< 
kVERBOSE
 << " N—auË = " << 
fGDNTau
 << 
Endl
;

562 
	`Log
(Ë<< 
kVERBOSE
 << " N—au sãpsË" << 
fGDTauSˇn
 << 
Endl
;

563 
	`Log
(Ë<< 
kVERBOSE
 << "ÅauÑ™gê = [ " << 
fGDTauVec
[0] << " , " << fGDTauVec[
fGDNTau
-1] << " ]" << 
Endl
;

566 i‡(
isDebug
Ë
	`InôNtu∂e
();

569 
I¡_t
 
nbadrisk
=0;

570 
DoubÀ_t
 
åisk
=0;

571 
DoubÀ_t
 
°risk
=0;

572 
DoubÀ_t
 
Ωªv
=1e32;

575 
DoubÀ_t
 
îrmö
=1e32;

577 
I¡_t
 
ödMö
=-1;

578 
°d
::
ve˘‹
<
DoubÀ_t
> 
c€fsMö
;

579 
°d
::
ve˘‹
<
DoubÀ_t
> 
löc€fsMö
;

580 
DoubÀ_t
 
off£tMö
;

584 
˛ock_t
 
t0
=0;

585 
DoubÀ_t
 
tgødvec
;

586 
DoubÀ_t
 
tupgøde
;

587 
DoubÀ_t
 
çîf
;

588 
DoubÀ_t
 
°gødvec
=0;

589 
DoubÀ_t
 
°upgøde
=0;

590 
DoubÀ_t
 
°≥rf
=0;

593 c⁄° 
UI¡_t
 
≈ªg
=5;

594 
°d
::
ve˘‹
<
DoubÀ_t
> 
vÆx
;

595 
°d
::
ve˘‹
<
DoubÀ_t
> 
vÆy
;

596 
°d
::
ve˘‹
<
DoubÀ_t
> 
vÆxy
;

599 
Boﬁ_t
 
docheck
;

600 
I¡_t
 
ûo›
=0;

601 
Boﬁ_t
 
found
=
kFALSE
;

602 
Boﬁ_t
 
riskFœt
=
kFALSE
;

603 
Boﬁ_t
 
d⁄e
 = 
kFALSE
;

606 
imod
 = 
fGDNP©hSãps
/100;

607 i‡(
imod
<100Ëimod = 
°d
::
	`mö
(100,
fGDNP©hSãps
);

608 i‡(
imod
>100) imod=100;

611 
fAvîageTruth
 = -
	`CÆcAvîageTruth
();

612 
off£tMö
 = 
fAvîageTruth
;

613 
fRuÀEn£mbÀ
->
	`SëOff£t
(
off£tMö
);

614 
fRuÀEn£mbÀ
->
	`CÀ¨C€fficõ¡s
(0);

615 
fRuÀEn£mbÀ
->
	`CÀ¨LöC€fficõ¡s
(0);

616 
UI¡_t
 
i
=0; i<
fGDOfsT°
.
	`size
(); i++) {

617 
fGDOfsT°
[
i
] = 
off£tMö
;

619 
	`Log
(Ë<< 
kVERBOSE
 << "Obèöed inôü»off£à" << 
off£tMö
 << 
Endl
;

622 
I¡_t
 
≈ªsˇn
 = 
	`FödGDTau
();

632 
fNTRisk
 = 
Ωªv
;

633 
fNTC€fRad
 = -1.0;

634 
fNTEº‹R©e
 = 0;

637 
I¡_t
 
°›C⁄dôi⁄
=0;

639 
	`Log
(Ë<< 
kINFO
 << "Fôtög modñ..." << 
Endl
;

641 
Timî
 
	`timî
–
fGDNP©hSãps
, "RuleFit" );

642 
	`Log
(Ë<< 
kWARNING
;

643 !
d⁄e
) {

645 i‡(
isVîbo£
Ë
t0
 = 
	`˛ock
();

646 
	`MakeGødõ¡Ve˘‹
();

647 i‡(
isVîbo£
) {

648 
tgødvec
 = 
	`DoubÀ_t
(
	`˛ock
()-
t0
)/
CLOCKS_PER_SEC
;

649 
°gødvec
 +
tgødvec
;

653 i‡(
isVîbo£
Ë
t0
 = 
	`˛ock
();

654 
	`Upd©eC€fficõ¡s
();

655 i‡(
isVîbo£
) {

656 
tupgøde
 = 
	`DoubÀ_t
(
	`˛ock
()-
t0
)/
CLOCKS_PER_SEC
;

657 
°upgøde
 +
tupgøde
;

661 
docheck
 = ((
ûo›
==0Ë||((ûo›+1)%
imod
==0));

663 i‡(
docheck
) {

665 i‡(!
isVîbo£
)

666 
timî
.
	`DøwProgªssB¨
(
ûo›
);

667 
fNTNuvÆ
 = 
	`DoubÀ_t
(
ûo›
)*
fGDP©hSãp
;

668 
fNTRisk
 = 0.0;

672 i‡(
isDebug
Ë
	`FûlC€fficõ¡s
();

673 
fNTC€fRad
 = 
fRuÀEn£mbÀ
->
	`C€fficõ¡Radius
();

676 
t0
 = 
	`˛ock
();

677 
fNTRisk
 = 
	`RiskP©h
();

678 
åisk
 = 
	`DoubÀ_t
(
	`˛ock
()-
t0
)/
CLOCKS_PER_SEC
;

679 
°risk
 +
åisk
;

685 i‡(
fNTRisk
>=
Ωªv
) {

686 i‡(
fNTRisk
>
Ωªv
) {

687 
nbadrisk
++;

688 
	`Log
(Ë<< "Risk(i+1)>=Risk(iËöÖ©h" << 
Endl
;

689 
riskFœt
=(
nbadrisk
>3);

690 i‡(
riskFœt
) {

691 
	`Log
(Ë<< 
kWARNING
 << "ChaŸi¯behaviou∏o‡riskÉvﬁuti⁄" << 
Endl
;

692 
	`Log
(Ë<< "--- STOPPING MINIMISATION ---" << 
Endl
;

693 
	`Log
(Ë<< "Thi†may bêOK i‡möimum i†Æªady found" << 
Endl
;

697 
Ωªv
 = 
fNTRisk
;

703 i‡(
isVîbo£
Ë
t0
 = 
	`˛ock
();

704 
fNTEº‹R©e
 = 0;

707 
DoubÀ_t
 
îºoc
;

708 
DoubÀ_t
 
riskPîf
 = 
	`RiskPîf
();

711 
îºoc
 = 
riskPîf
;

713 
fNTEº‹R©e
 = 
îºoc
;

715 i‡(
isVîbo£
) {

716 
çîf
 = 
	`DoubÀ_t
(
	`˛ock
()-
t0
)/
CLOCKS_PER_SEC
;

717 
°≥rf
 +=
çîf
;

723 i‡(
fNTEº‹R©e
<=
îrmö
) {

724 
îrmö
 = 
fNTEº‹R©e
;

726 
ödMö
 = 
ûo›
;

727 
fRuÀEn£mbÀ
->
	`GëC€fficõ¡s
(
c€fsMö
);

728 
löc€fsMö
 = 
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
();

729 
off£tMö
 = 
fRuÀEn£mbÀ
->
	`GëOff£t
();

731 i‡–
fNTEº‹R©e
 > 
fGDEºSˇÀ
*
îrmö
Ë
found
 = 
kTRUE
;

735 i‡(
vÆx
.
	`size
()==
≈ªg
) {

736 
vÆx
.
	`îa£
(vÆx.
	`begö
());

737 
vÆy
.
	`îa£
(vÆy.
	`begö
());

738 
vÆxy
.
	`îa£
(vÆxy.
	`begö
());

740 
vÆx
.
	`push_back
(
fNTNuvÆ
);

741 
vÆy
.
	`push_back
(
fNTEº‹R©e
);

742 
vÆxy
.
	`push_back
(
fNTEº‹R©e
*
fNTNuvÆ
);

744 
gFIRSTORG
=
kFALSE
;

747 i‡(
isDebug
Ë
fGDNtu∂e
->
	`Fûl
();

748 i‡(
isVîbo£
) {

749 
	`Log
(Ë<< 
kVERBOSE
 << "ParamsIRE : "

750 << 
°d
::
	`£tw
(10)

751 << 
	`F‹m
("%8d",
ûo›
+1) << " "

752 << 
	`F‹m
("%4.4f",
fNTRisk
) << " "

753 << 
	`F‹m
("%4.4f",
riskPîf
) << " "

754 << 
	`F‹m
("%4.4f",
fNTRisk
+
riskPîf
) << " "

762 << 
Endl
;

765 
ûo›
++;

770 
Boﬁ_t
 
ídOfLo›
 = (
ûo›
==
fGDNP©hSãps
);

771 i‡–((
riskFœt
Ë|| (
ídOfLo›
)Ë&& (!
found
) ) {

772 i‡(
riskFœt
) {

773 
°›C⁄dôi⁄
 = 1;

775 i‡(
ídOfLo›
) {

776 
°›C⁄dôi⁄
 = 2;

778 i‡(
ödMö
<0) {

779 
	`Log
(Ë<< 
kWARNING
 << "BUG TRAP: shouldÇŸ bêhîê- stûl,Åhi†bug i†h¨mÀss;)" << 
Endl
;

780 
îrmö
 = 
fNTEº‹R©e
;

782 
ödMö
 = 
ûo›
;

783 
fRuÀEn£mbÀ
->
	`GëC€fficõ¡s
(
c€fsMö
);

784 
löc€fsMö
 = 
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
();

785 
off£tMö
 = 
fRuÀEn£mbÀ
->
	`GëOff£t
();

787 
found
 = 
kTRUE
;

789 
d⁄e
 = (
found
);

791 
	`Log
(Ë<< 
Endl
;

792 
	`Log
(Ë<< 
kINFO
 << "Möimißti⁄Éœp£dÅimê: " << 
timî
.
	`GëEœp£dTime
(Ë<< " " << 
Endl
;

793 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

794 
	`Log
(Ë<< 
kINFO
 << "Found möimumáà°ï " << 
ödMö
+1 << " wôhÉº‹ = " << 
îrmö
 << 
Endl
;

795 
	`Log
(Ë<< 
kINFO
 << "Reason forÉndingÜoop: ";

796 
°›C⁄dôi⁄
) {

798 
	`Log
(Ë<< 
kINFO
 << "clear minima found";

801 
	`Log
(Ë<< 
kINFO
 << "chaotic behaviour ofÑisk";

804 
	`Log
(Ë<< 
kINFO
 << "end ofÜoopÑeached";

807 
	`Log
(Ë<< 
kINFO
 << "unknown!";

810 
	`Log
(Ë<< 
Endl
;

811 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

814 i‡–
	`DoubÀ_t
(
ödMö
)/DoubÀ_t(
≈ªsˇn
+
fGDNP©hSãps
) < 0.05 ) {

815 
	`Log
(Ë<< 
kWARNING
 << "Róched möimumÉ¨ly i¿thê£¨ch" << 
Endl
;

816 
	`Log
(Ë<< "CheckÑesu…†™d maybêde¸ó£ GDSã∞size" << 
Endl
;

821 
DoubÀ_t
 
sumx
 = 
°d
::
	`accumuœã
–
vÆx
.
	`begö
(), vÆx.
	`íd
(), 
	`DoubÀ_t
() );

822 
DoubÀ_t
 
sumxy
 = 
°d
::
	`accumuœã
–
vÆxy
.
	`begö
(), vÆxy.
	`íd
(), 
	`DoubÀ_t
() );

823 
DoubÀ_t
 
sumy
 = 
°d
::
	`accumuœã
–
vÆy
.
	`begö
(), vÆy.
	`íd
(), 
	`DoubÀ_t
() );

824 
DoubÀ_t
 
¶›e
 = 
	`DoubÀ_t
(
vÆx
.
	`size
())*
sumxy
 - 
sumx
*
sumy
;

825 i‡(
¶›e
<0) {

826 
	`Log
(Ë<< 
kINFO
 << "Thêîr‹Ñ©êwa†°û»de¸ósögáàthêíd o‡thê∑th" << 
Endl
;

827 
	`Log
(Ë<< 
kINFO
 << "In¸ó£Çumbî o‡°ï†(GDNSãps)." << 
Endl
;

832 i‡(
found
) {

833 
fRuÀEn£mbÀ
->
	`SëC€fficõ¡s
–
c€fsMö
 );

834 
fRuÀEn£mbÀ
->
	`SëLöC€fficõ¡s
–
löc€fsMö
 );

835 
fRuÀEn£mbÀ
->
	`SëOff£t
–
off£tMö
 );

838 
	`Log
(Ë<< 
kFATAL
 << "BUG TRAP: möimumÇŸ found i¿MakeGDP©h()" << 
Endl
;

844 i‡(
isVîbo£
) {

845 
DoubÀ_t
 
°lo›
 = 
°risk
 +
°upgøde
 + 
°gødvec
 + 
°≥rf
;

846 
	`Log
(Ë<< 
kVERBOSE
 << "TimögÖîÜo› (ms):" << 
Endl
;

847 
	`Log
(Ë<< 
kVERBOSE
 << " gødve¯" << 1000*
°gødvec
/
ûo›
 << 
Endl
;

848 
	`Log
(Ë<< 
kVERBOSE
 << " upgødê" << 1000*
°upgøde
/
ûo›
 << 
Endl
;

849 
	`Log
(Ë<< 
kVERBOSE
 << "Ñisk = " << 1000*
°risk
/
ûo›
 << 
Endl
;

850 
	`Log
(Ë<< 
kVERBOSE
 << "Öî‡ = " << 1000*
°≥rf
/
ûo›
 << 
Endl
;

851 
	`Log
(Ë<< 
kVERBOSE
 << "Üo› = " << 1000*
°lo›
/
ûo›
 << 
Endl
;

853 
	`Log
(Ë<< 
kVERBOSE
 << " GDInô = " << 1000*
gGDInô
/
ûo›
 << 
Endl
;

854 
	`Log
(Ë<< 
kVERBOSE
 << " GDPå = " << 1000*
gGDPå
/
ûo›
 << 
Endl
;

855 
	`Log
(Ë<< 
kVERBOSE
 << " GDEvÆ = " << 1000*
gGDEvÆ
/
ûo›
 << 
Endl
;

856 
	`Log
(Ë<< 
kVERBOSE
 << " GDEvÆRuÀ = " << 1000*
gGDEvÆRuÀ
/
ûo›
 << 
Endl
;

857 
	`Log
(Ë<< 
kVERBOSE
 << " GDN‹m = " << 1000*
gGDN‹m
/
ûo›
 << 
Endl
;

858 
	`Log
(Ë<< 
kVERBOSE
 << " GDRuÀLo› = " << 1000*
gGDRuÀLo›
/
ûo›
 << 
Endl
;

859 
	`Log
(Ë<< 
kVERBOSE
 << " GDLöLo› = " << 1000*
gGDLöLo›
/
ûo›
 << 
Endl
;

863 i‡(
isDebug
Ë
fGDNtu∂e
->
	`Wrôe
();

864 
	}
}

869 
	gTMVA
::
RuÀFôP¨ams
::
	$FûlC€fficõ¡s
()

871 
fNTOff£t
 = 
fRuÀEn£mbÀ
->
	`GëOff£t
();

873 
UI¡_t
 
i
=0; i<
fNRuÀs
; i++) {

874 
fNTC€ff
[
i
] = 
fRuÀEn£mbÀ
->
	`GëRuÀs
(i)->
	`GëC€fficõ¡
();

876 
UI¡_t
 
i
=0; i<
fNLöór
; i++) {

877 
fNTLöC€ff
[
i
] = 
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
(i);

879 
	}
}

886 
	gTMVA
::
RuÀFôP¨ams
::
	$CÆcFSèr
()

888 
	`Log
(Ë<< 
kWARNING
 << "<CÆcFSèr> Usög unvîifõd code! Check!" << 
Endl
;

889 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

890 i‡(
√ve
<1) {

891 
	`Log
(Ë<< 
kFATAL
 << "<CÆcFSèr> InvÆid sèπ/íd indi˚s!" << 
Endl
;

895 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

897 
fF°¨
.
	`˛ór
();

898 
°d
::
ve˘‹
<
DoubÀ_t
> 
f°¨S‹ãd
;

899 
DoubÀ_t
 
f°¨VÆ
;

901 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

902 c⁄° 
Evít
& 
e
 = *(*
evíts
)[
i
];

903 
f°¨VÆ
 = 
fRuÀEn£mbÀ
->
	`FSèr
(
e
);

904 
fF°¨
.
	`push_back
(
f°¨VÆ
);

905 
f°¨S‹ãd
.
	`push_back
(
f°¨VÆ
);

906 i‡(
TM©h
::
	`IsNaN
(
f°¨VÆ
)Ë
	`Log
(Ë<< 
kFATAL
 << "F* i†NAN!" << 
Endl
;

909 
°d
::
	`s‹t
–
f°¨S‹ãd
.
	`begö
(), f°¨S‹ãd.
	`íd
() );

910 
UI¡_t
 
öd
 = 
√ve
/2;

911 i‡(
√ve
&1) {

912 
fF°¨Medün
 = 0.5*(
f°¨S‹ãd
[
öd
]+fstarSorted[ind-1]);

915 
fF°¨Medün
 = 
f°¨S‹ãd
[
öd
];

917 
	}
}

926 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$O±imism
()

928 
	`Log
(Ë<< 
kWARNING
 << "<O±imism> Usög unvîifõd code! Check!" << 
Endl
;

929 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

930 i‡(
√ve
<1) {

931 
	`Log
(Ë<< 
kFATAL
 << "<O±imism> InvÆid sèπ/íd indi˚s!" << 
Endl
;

934 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

936 
DoubÀ_t
 
sumy
=0;

937 
DoubÀ_t
 
sumyh©
=0;

938 
DoubÀ_t
 
sumyh©y
=0;

939 
DoubÀ_t
 
sumw2
=0;

940 
DoubÀ_t
 
sumw
=0;

941 
DoubÀ_t
 
yh©
;

942 
DoubÀ_t
 
y
;

943 
DoubÀ_t
 
w
;

945 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

946 c⁄° 
Evít
& 
e
 = *(*
evíts
)[
i
];

947 
yh©
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
(
i
);

948 
y
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(&
e
) ? 1.0:-1.0);

949 
w
 = 
fRuÀFô
->
	`GëTøöögEvítWeight
(
i
)/
fNEveEffPîf
;

950 
sumy
 +
w
*
y
;

951 
sumyh©
 +
w
*
yh©
;

952 
sumyh©y
 +
w
*
yh©
*
y
;

953 
sumw2
 +
w
*w;

954 
sumw
 +
w
;

956 
DoubÀ_t
 
div
 = 1.0-
sumw2
;

957 
DoubÀ_t
 
cov
 = 
sumyh©y
 - 
sumyh©
*
sumy
;

958  2.0*
cov
/
div
;

959 
	}
}

967 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Eº‹R©eReg
()

969 
	`Log
(Ë<< 
kWARNING
 << "<Eº‹R©eReg> Usög unvîifõd code! Check!" << 
Endl
;

970 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

971 i‡(
√ve
<1) {

972 
	`Log
(Ë<< 
kFATAL
 << "<Eº‹R©eReg> InvÆid sèπ/íd indi˚s!" << 
Endl
;

974 i‡(
fF°¨
.
	`size
()!=
√ve
) {

975 
	`Log
(Ë<< 
kFATAL
 << "--- RuleFitParams::ErrorRateReg() - F*Çot initialized! BUG!!!"

976 << " F°¨.size(Ë" << 
fF°¨
.
	`size
(Ë<< " , N”vítsË" << 
√ve
 << 
Endl
;

979 
DoubÀ_t
 
sF
;

981 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

983 
DoubÀ_t
 
sumdf
 = 0;

984 
DoubÀ_t
 
sumdfmed
 = 0;

990 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

991 c⁄° 
Evít
& 
e
 = *(*
evíts
)[
i
];

992 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
e
 );

994 
sumdf
 +
TM©h
::
	`Abs
(
fF°¨
[
i
-
fPîfIdx1
] - 
sF
);

995 
sumdfmed
 +
TM©h
::
	`Abs
(
fF°¨
[
i
-
fPîfIdx1
] - 
fF°¨Medün
);

1000  
sumdf
/
sumdfmed
;

1001 
	}
}

1011 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Eº‹R©eBö
()

1013 
	`Log
(Ë<< 
kWARNING
 << "<Eº‹R©eBö> Usög unvîifõd code! Check!" << 
Endl
;

1014 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

1015 i‡(
√ve
<1) {

1016 
	`Log
(Ë<< 
kFATAL
 << "<Eº‹R©eBö> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1019 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1021 
DoubÀ_t
 
sumdfbö
 = 0;

1022 
DoubÀ_t
 
d√ve
 = 
	`DoubÀ_t
(
√ve
);

1023 
I¡_t
 
signF
, 
signy
;

1024 
DoubÀ_t
 
sF
;

1026 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

1027 c⁄° 
Evít
& 
e
 = *(*
evíts
)[
i
];

1028 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
e
 );

1030 
signF
 = (
sF
>0 ? +1:-1);

1032 
signy
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(&
e
) ? +1:-1);

1033 
sumdfbö
 +
TM©h
::
	`Abs
(
	`DoubÀ_t
(
signF
-
signy
))*0.5;

1035 
DoubÀ_t
 
f
 = 
sumdfbö
/
d√ve
;

1037  
f
;

1038 
	}
}

1045 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
Eº‹R©eRocRaw
–
°d
::
ve˘‹
<DoubÀ_t> & 
sFsig
,

1046 
°d
::
ve˘‹
<
DoubÀ_t
> & 
sFbkg
 )

1049 
°d
::
s‹t
(
sFsig
.
begö
(), sFsig.
íd
());

1050 
	g°d
::
s‹t
(
sFbkg
.
begö
(), sFbkg.
íd
());

1051 c⁄° 
DoubÀ_t
 
	gmösig
 = 
sFsig
.
‰⁄t
();

1052 c⁄° 
DoubÀ_t
 
	gmöbkg
 = 
sFbkg
.
‰⁄t
();

1053 c⁄° 
DoubÀ_t
 
	gmaxsig
 = 
sFsig
.
back
();

1054 c⁄° 
DoubÀ_t
 
	gmaxbkg
 = 
sFbkg
.
back
();

1055 c⁄° 
DoubÀ_t
 
	gmöf
 = 
°d
::
mö
(
mösig
,
möbkg
);

1056 c⁄° 
DoubÀ_t
 
	gmaxf
 = 
°d
::
max
(
maxsig
,
maxbkg
);

1057 c⁄° 
I¡_t
 
	gnsig
 = I¡_t(
sFsig
.
size
());

1058 c⁄° 
I¡_t
 
	gnbkg
 = I¡_t(
sFbkg
.
size
());

1059 c⁄° 
I¡_t
 
	g≈
 = 
°d
::
mö
((
nsig
+
nbkg
)/4,50);

1060 c⁄° 
DoubÀ_t
 
	gdf
 = (
maxf
-
möf
)/(
≈
-1);

1064 
DoubÀ_t
 
	gfcut
;

1065 
	g°d
::
ve˘‹
<
DoubÀ_t
>::
c⁄°_ôî©‹
 
ödô
;

1066 
I¡_t
 
	gƒbkg
;

1067 
I¡_t
 
	g√sig
;

1068 
I¡_t
 
	g≤esig
=0;

1069 
DoubÀ_t
 
	gªjb
=0;

1070 
DoubÀ_t
 
	geffs
=1.0;

1071 
DoubÀ_t
 
	g¥ejb
=0;

1072 
DoubÀ_t
 
	g≥ffs
=1.0;

1074 
DoubÀ_t
 
	gdeffs
;

1075 
DoubÀ_t
 
	g¨ó
=0;

1076 
I¡_t
 
	g≈ok
=0;

1080 
I¡_t
 
	gi
=0; i<
	g≈
; i++) {

1081 
	gfcut
 = 
möf
 + 
df
*
DoubÀ_t
(
i
);

1082 
	gödô
 = 
°d
::
föd_if
–
sFsig
.
begö
(), sFsig.
íd
(), std::
böd2nd
(°d::
gª©î_equÆ
<
DoubÀ_t
>(), 
fcut
));

1083 
	g√sig
 = 
sFsig
.
íd
()-
ödô
;

1084 i‡(
	gTM©h
::
Abs
(
≤esig
-
√sig
)>0) {

1085 
≈ok
++;

1086 
	gödô
 = 
°d
::
föd_if
–
sFbkg
.
begö
(), sFbkg.
íd
(), std::
böd2nd
(°d::
gª©î_equÆ
<
DoubÀ_t
>(), 
fcut
));

1087 
	gƒbkg
 = 
ödô
-
sFbkg
.
begö
();

1088 
	gªjb
 = 
DoubÀ_t
(
ƒbkg
)/DoubÀ_t(
nbkg
);

1089 
	geffs
 = 
DoubÀ_t
(
√sig
)/DoubÀ_t(
nsig
);

1092 
	gdeffs
 = 
effs
-
≥ffs
;

1093 
	g¨ó
 +0.5*
TM©h
::
Abs
(
deffs
)*(
ªjb
+
¥ejb
);

1094 
	g¥ejb
 = 
ªjb
;

1095 
	g≥ffs
 = 
effs
;

1097 
	g≤esig
 = 
√sig
;

1099 
	g¨ó
 +0.5*(1+
ªjb
)*
effs
;

1101  (1.0-
	g¨ó
);

1110 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Eº‹R©eRoc
()

1112 
	`Log
(Ë<< 
kWARNING
 << "<Eº‹R©eRoc> ShouldÇŸ bêu£d i¿thêcuºíàvîsi⁄! Check!" << 
Endl
;

1113 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

1114 i‡(
√ve
<1) {

1115 
	`Log
(Ë<< 
kFATAL
 << "<Eº‹R©eRoc> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1118 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1120 
DoubÀ_t
 
sF
;

1122 
°d
::
ve˘‹
<
DoubÀ_t
> 
sFsig
;

1123 
°d
::
ve˘‹
<
DoubÀ_t
> 
sFbkg
;

1124 
DoubÀ_t
 
sumfsig
=0;

1125 
DoubÀ_t
 
sumfbkg
=0;

1126 
DoubÀ_t
 
sumf2sig
=0;

1127 
DoubÀ_t
 
sumf2bkg
=0;

1129 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

1130 c⁄° 
Evít
& 
e
 = *(*
evíts
)[
i
];

1131 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
(
i
);

1132 i‡(
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(&
e
)) {

1133 
sFsig
.
	`push_back
(
sF
);

1134 
sumfsig
 +=
sF
;

1135 
sumf2sig
 +=
sF
*sF;

1138 
sFbkg
.
	`push_back
(
sF
);

1139 
sumfbkg
 +=
sF
;

1140 
sumf2bkg
 +=
sF
*sF;

1143 
fsigave
 = 
sumfsig
/
sFsig
.
	`size
();

1144 
fbkgave
 = 
sumfbkg
/
sFbkg
.
	`size
();

1145 
fsigrms
 = 
TM©h
::
	`Sqπ
(
	`gToﬁs
().
	`CompuãV¨ün˚
(
sumf2sig
,
sumfsig
,
sFsig
.
	`size
()));

1146 
fbkgrms
 = 
TM©h
::
	`Sqπ
(
	`gToﬁs
().
	`CompuãV¨ün˚
(
sumf2bkg
,
sumfbkg
,
sFbkg
.
	`size
()));

1148  
	`Eº‹R©eRocRaw
–
sFsig
, 
sFbkg
 );

1149 
	}
}

1158 
	gTMVA
::
RuÀFôP¨ams
::
	$Eº‹R©eRocT°
()

1160 
	`Log
(Ë<< 
kWARNING
 << "<Eº‹R©eRocT°> ShouldÇŸ bêu£d i¿thêcuºíàvîsi⁄! Check!" << 
Endl
;

1161 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

1162 i‡(
√ve
<1) {

1163 
	`Log
(Ë<< 
kFATAL
 << "<Eº‹R©eRocT°> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1167 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1170 
DoubÀ_t
 
sF
;

1171 
°d
::
ve˘‹
< std::ve˘‹<
DoubÀ_t
> > 
sFsig
;

1172 
°d
::
ve˘‹
< std::ve˘‹<
DoubÀ_t
> > 
sFbkg
;

1174 
sFsig
.
	`ªsize
–
fGDNTau
 );

1175 
sFbkg
.
	`ªsize
–
fGDNTau
 );

1178 
UI¡_t
 
i
=
fPîfIdx1
; i<
fPîfIdx2
+1; i++) {

1179 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1182 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
i
, 
fGDOfsT°
[
ôau
], 
fGDC€fT°
[ôau], 
fGDC€fLöT°
[itau] );

1183 i‡(
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
((*
evíts
)[
i
])) {

1184 
sFsig
[
ôau
].
	`push_back
(
sF
);

1187 
sFbkg
[
ôau
].
	`push_back
(
sF
);

1191 
DoubÀ_t
 
îr
;

1193 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1194 
îr
 = 
	`Eº‹R©eRocRaw
–
sFsig
[
ôau
], 
sFbkg
[itau] );

1195 
fGDEºT°
[
ôau
] = 
îr
;

1197 
	}
}

1204 
UI¡_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$RiskPîfT°
()

1206 
UI¡_t
 
√ve
 = 
fPîfIdx2
-
fPîfIdx1
+1;

1207 i‡(
√ve
<1) {

1208 
	`Log
(Ë<< 
kFATAL
 << "<Eº‹R©eRocT°> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1212 
DoubÀ_t
 
sumx
 = 0;

1213 
DoubÀ_t
 
sumx2
 = 0;

1214 
DoubÀ_t
 
maxx
 = -100.0;

1215 
DoubÀ_t
 
möx
 = 1e30;

1216 
UI¡_t
 
ôaumö
 = 0;

1217 
UI¡_t
 
nok
=0;

1218 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1219 i‡(
fGDEºT°OK
[
ôau
]) {

1220 
nok
++;

1221 
fGDEºT°
[
ôau
] = 
	`RiskPîf
(itau);

1222 
sumx
 +
fGDEºT°
[
ôau
];

1223 
sumx2
 +
fGDEºT°
[
ôau
]*fGDErrTst[itau];

1224 i‡(
fGDEºT°
[
ôau
]>
maxx
) maxx=fGDErrTst[itau];

1225 i‡(
fGDEºT°
[
ôau
]<
möx
) {

1226 
möx
=
fGDEºT°
[
ôau
];

1227 
ôaumö
 = 
ôau
;

1231 
DoubÀ_t
 
sigx
 = 
TM©h
::
	`Sqπ
(
	`gToﬁs
().
	`CompuãV¨ün˚
–
sumx2
, 
sumx
, 
nok
 ) );

1232 
DoubÀ_t
 
maxacc
 = 
möx
+
sigx
;

1234 i‡(
nok
>0) {

1235 
nok
 = 0;

1236 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1237 i‡(
fGDEºT°OK
[
ôau
]) {

1238 i‡(
fGDEºT°
[
ôau
] > 
maxacc
) {

1239 
fGDEºT°OK
[
ôau
] = 
kFALSE
;

1242 
nok
++;

1247 
fGDNTauT°OK
 = 
nok
;

1248 
	`Log
(Ë<< 
kVERBOSE
 << "TAU: "

1249 << 
ôaumö
 << " "

1250 << 
nok
 << " "

1251 << 
möx
 << " "

1252 << 
maxx
 << " "

1253 << 
sigx
 << 
Endl
;

1255  
ôaumö
;

1256 
	}
}

1262 
	gTMVA
::
RuÀFôP¨ams
::
	$MakeT°Gødõ¡Ve˘‹
()

1264 
UI¡_t
 
√ve
 = 
fP©hIdx1
-
fP©hIdx2
+1;

1265 i‡(
√ve
<1) {

1266 
	`Log
(Ë<< 
kFATAL
 << "<MakeT°Gødõ¡Ve˘‹> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1270 
DoubÀ_t
 
n‹m
 = 2.0/
fNEveEffP©h
;

1272 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1275 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1276 i‡(
fGDEºT°OK
[
ôau
]) {

1277 
UI¡_t
 
ú
=0; ir<
fNRuÀs
; ir++) {

1278 
fGødVecT°
[
ôau
][
ú
]=0;

1280 
UI¡_t
 
û
=0; il<
fNLöór
; il++) {

1281 
fGødVecLöT°
[
ôau
][
û
]=0;

1287 
DoubÀ_t
 
sF
;

1288 
DoubÀ_t
 
r
;

1289 
DoubÀ_t
 
y
;

1290 c⁄° 
°d
::
ve˘‹
<
UI¡_t
> *
evítRuÀM≠
=0;

1291 
UI¡_t
 
röd
;

1295 
UI¡_t
 
nsfok
=0;

1296 
UI¡_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1297 c⁄° 
Evít
 *
e
 = (*
evíts
)[
i
];

1298 
UI¡_t
 
ƒuÀs
=0;

1299 i‡(
fRuÀEn£mbÀ
->
	`DoRuÀs
()) {

1300 
evítRuÀM≠
 = &(
fRuÀEn£mbÀ
->
	`GëEvítRuÀM≠
(
i
));

1301 
ƒuÀs
 = (*
evítRuÀM≠
).
	`size
();

1303 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1306 i‡(
fGDEºT°OK
[
ôau
]) {

1307 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
i
, 
fGDOfsT°
[
ôau
], 
fGDC€fT°
[ôau], 
fGDC€fLöT°
[itau] );

1308 i‡(
TM©h
::
	`Abs
(
sF
)<1.0) {

1309 
nsfok
++;

1310 
r
 = 0;

1311 
y
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(
e
)?1.0:-1.0);

1312 
r
 = 
n‹m
*(
y
 - 
sF
Ë* 
fRuÀFô
->
	`GëTøöögEvítWeight
(
i
);

1314 
UI¡_t
 
ú
=0; ir<
ƒuÀs
; ir++) {

1315 
röd
 = (*
evítRuÀM≠
)[
ú
];

1316 
fGødVecT°
[
ôau
][
röd
] +
r
;

1319 
UI¡_t
 
û
=0; il<
fNLöór
; il++) {

1320 
fGødVecLöT°
[
ôau
][
û
] +
r
*
fRuÀEn£mbÀ
->
	`EvÆLöEvítRaw
–û,
i
, 
kTRUE
 );

1326 
	}
}

1332 
	gTMVA
::
RuÀFôP¨ams
::
	$Upd©eT°C€fficõ¡s
()

1334 
DoubÀ_t
 
maxr
, 
maxl
, 
˘hªsh
, 
vÆ
;

1336 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1337 i‡(
fGDEºT°OK
[
ôau
]) {

1339 
maxr
 = ( (
fNRuÀs
>0 ?

1340 
TM©h
::
	`Abs
(*(
°d
::
	`max_ñemít
–
fGødVecT°
[
ôau
].
	`begö
(), fGødVecT°[ôau].
	`íd
(), 
	`AbsVÆue
()))):0) );

1341 
maxl
 = ( (
fNLöór
>0 ?

1342 
TM©h
::
	`Abs
(*(
°d
::
	`max_ñemít
–
fGødVecLöT°
[
ôau
].
	`begö
(), fGødVecLöT°[ôau].
	`íd
(), 
	`AbsVÆue
()))):0) );

1345 
DoubÀ_t
 
maxv
 = (
maxr
>
maxl
 ? maxr:maxl);

1346 
˘hªsh
 = 
maxv
 * 
fGDTauVec
[
ôau
];

1354 i‡(
maxv
>0) {

1355 c⁄° 
DoubÀ_t
 
°ïSˇÀ
=1.0;

1356 
UI¡_t
 
i
=0; i<
fNRuÀs
; i++) {

1357 
vÆ
 = 
fGødVecT°
[
ôau
][
i
];

1359 i‡(
TM©h
::
	`Abs
(
vÆ
)>=
˘hªsh
) {

1360 
fGDC€fT°
[
ôau
][
i
] +
fGDP©hSãp
*
vÆ
*
°ïSˇÀ
;

1364 
UI¡_t
 
i
=0; i<
fNLöór
; i++) {

1365 
vÆ
 = 
fGødVecLöT°
[
ôau
][
i
];

1366 i‡(
TM©h
::
	`Abs
(
vÆ
)>=
˘hªsh
) {

1367 
fGDC€fLöT°
[
ôau
][
i
] +
fGDP©hSãp
*
vÆ
*
°ïSˇÀ
/
fRuÀEn£mbÀ
->
	`GëLöN‹m
(i);

1374 
	`CÆcT°AvîageRe•⁄£
();

1375 
	}
}

1380 
	gTMVA
::
RuÀFôP¨ams
::
	$MakeGødõ¡Ve˘‹
()

1382 
˛ock_t
 
t0
;

1384 
t0
 = 
	`˛ock
();

1386 
UI¡_t
 
√ve
 = 
fP©hIdx2
-
fP©hIdx1
+1;

1387 i‡(
√ve
<1) {

1388 
	`Log
(Ë<< 
kFATAL
 << "<MakeGødõ¡Ve˘‹> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1392 c⁄° 
DoubÀ_t
 
n‹m
 = 2.0/
fNEveEffP©h
;

1394 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1397 
UI¡_t
 
ú
=0; ir<
fNRuÀs
; ir++) {

1398 
fGødVec
[
ú
]=0;

1400 
UI¡_t
 
û
=0; il<
fNLöór
; il++) {

1401 
fGødVecLö
[
û
]=0;

1405 
DoubÀ_t
 
sF
;

1406 
DoubÀ_t
 
r
;

1407 
DoubÀ_t
 
y
;

1408 c⁄° 
°d
::
ve˘‹
<
UI¡_t
> *
evítRuÀM≠
=0;

1409 
UI¡_t
 
röd
;

1411 
gGDInô
 +
	`DoubÀ_t
(
	`˛ock
()-
t0
)/
CLOCKS_PER_SEC
;

1413 
UI¡_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1414 c⁄° 
Evít
 *
e
 = (*
evíts
)[
i
];

1417 
sF
 = 
fRuÀEn£mbÀ
->
	`EvÆEvít
–
i
 );

1419 i‡(
TM©h
::
	`Abs
(
sF
)<1.0) {

1420 
UI¡_t
 
ƒuÀs
=0;

1421 i‡(
fRuÀEn£mbÀ
->
	`DoRuÀs
()) {

1422 
evítRuÀM≠
 = &(
fRuÀEn£mbÀ
->
	`GëEvítRuÀM≠
(
i
));

1423 
ƒuÀs
 = (*
evítRuÀM≠
).
	`size
();

1425 
y
 = (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(
e
)?1.0:-1.0);

1426 
r
 = 
n‹m
*(
y
 - 
sF
Ë* 
fRuÀFô
->
	`GëTøöögEvítWeight
(
i
);

1428 
UI¡_t
 
ú
=0; ir<
ƒuÀs
; ir++) {

1429 
röd
 = (*
evítRuÀM≠
)[
ú
];

1430 
fGødVec
[
röd
] +
r
;

1435 
UI¡_t
 
û
=0; il<
fNLöór
; il++) {

1436 
fGødVecLö
[
û
] +
r
*
fRuÀEn£mbÀ
->
	`EvÆLöEvítRaw
–û, 
i
, 
kTRUE
 );

1441 
	}
}

1446 
	gTMVA
::
RuÀFôP¨ams
::
	$Upd©eC€fficõ¡s
()

1448 
DoubÀ_t
 
maxr
 = ( (
fRuÀEn£mbÀ
->
	`DoRuÀs
() ?

1449 
TM©h
::
	`Abs
(*(
°d
::
	`max_ñemít
–
fGødVec
.
	`begö
(), fGødVec.
	`íd
(), 
	`AbsVÆue
()))):0) );

1450 
DoubÀ_t
 
maxl
 = ( (
fRuÀEn£mbÀ
->
	`DoLöór
() ?

1451 
TM©h
::
	`Abs
(*(
°d
::
	`max_ñemít
–
fGødVecLö
.
	`begö
(), fGødVecLö.
	`íd
(), 
	`AbsVÆue
()))):0) );

1453 
DoubÀ_t
 
maxv
 = (
maxr
>
maxl
 ? maxr:maxl);

1454 
DoubÀ_t
 
˘hªsh
 = 
maxv
 * 
fGDTau
;

1456 
DoubÀ_t
 
u£RThªsh
;

1457 
DoubÀ_t
 
u£LThªsh
;

1461 
u£RThªsh
 = 
˘hªsh
;

1462 
u£LThªsh
 = 
˘hªsh
;

1464 
DoubÀ_t
 
gvÆ
, 
lvÆ
, 
c€f
, 
lc€f
;

1469 i‡(
maxv
>0) {

1470 
UI¡_t
 
i
=0; i<
fGødVec
.
	`size
(); i++) {

1471 
gvÆ
 = 
fGødVec
[
i
];

1472 i‡(
TM©h
::
	`Abs
(
gvÆ
)>=
u£RThªsh
) {

1473 
c€f
 = 
fRuÀEn£mbÀ
->
	`GëRuÀsC⁄°
(
i
)->
	`GëC€fficõ¡
(Ë+ 
fGDP©hSãp
*
gvÆ
;

1474 
fRuÀEn£mbÀ
->
	`GëRuÀs
(
i
)->
	`SëC€fficõ¡
(
c€f
);

1479 
UI¡_t
 
i
=0; i<
fGødVecLö
.
	`size
(); i++) {

1480 
lvÆ
 = 
fGødVecLö
[
i
];

1481 i‡(
TM©h
::
	`Abs
(
lvÆ
)>=
u£LThªsh
) {

1482 
lc€f
 = 
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
(
i
Ë+ (
fGDP©hSãp
*
lvÆ
/fRuÀEn£mbÀ->
	`GëLöN‹m
(i));

1483 
fRuÀEn£mbÀ
->
	`SëLöC€fficõ¡
(
i
,
lc€f
);

1487 
DoubÀ_t
 
off£t
 = 
	`CÆcAvîageRe•⁄£
();

1488 
fRuÀEn£mbÀ
->
	`SëOff£t
–
off£t
 );

1490 
	}
}

1496 
	gTMVA
::
RuÀFôP¨ams
::
	$CÆcT°AvîageRe•⁄£
()

1498 
UI¡_t
 
ôau
=0; ièu<
fGDNTau
; itau++) {

1499 i‡(
fGDEºT°OK
[
ôau
]) {

1500 
fGDOfsT°
[
ôau
] = 0;

1501 
UI¡_t
 
s
=0; s<
fNLöór
; s++) {

1502 
fGDOfsT°
[
ôau
] -
fGDC€fLöT°
[ôau][
s
] * 
fAvîageSñe˘‹P©h
[s];

1504 
UI¡_t
 
r
=0;Ñ<
fNRuÀs
;Ñ++) {

1505 
fGDOfsT°
[
ôau
] -
fGDC€fT°
[ôau][
r
] * 
fAvîageRuÀP©h
[r];

1510 
	}
}

1517 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$CÆcAvîageRe•⁄£
()

1519 
DoubÀ_t
 
ofs
 = 0;

1520 
UI¡_t
 
s
=0; s<
fNLöór
; s++) {

1521 
ofs
 -
fRuÀEn£mbÀ
->
	`GëLöC€fficõ¡s
(
s
Ë* 
fAvîageSñe˘‹P©h
[s];

1523 
UI¡_t
 
r
=0;Ñ<
fNRuÀs
;Ñ++) {

1524 
ofs
 -
fRuÀEn£mbÀ
->
	`GëRuÀs
(
r
)->
	`GëC€fficõ¡
(Ë* 
fAvîageRuÀP©h
[r];

1526  
ofs
;

1527 
	}
}

1532 
DoubÀ_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$CÆcAvîageTruth
()

1534 i‡(
fP©hIdx2
<=
fP©hIdx1
) {

1535 
	`Log
(Ë<< 
kFATAL
 << "<CÆcAvîageTruth> InvÆid sèπ/íd indi˚s!" << 
Endl
;

1538 
DoubÀ_t
 
sum
=0;

1539 
DoubÀ_t
 
ísig
=0;

1540 
DoubÀ_t
 
íbkg
=0;

1541 c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
 *> *
evíts
 = &(
fRuÀFô
->
	`GëTøöögEvíts
());

1542 
UI¡_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1543 
DoubÀ_t
 
ew
 = 
fRuÀFô
->
	`GëTøöögEvítWeight
(
i
);

1544 i‡(
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
((*
evíts
)[
i
])Ë
ísig
 +
ew
;

1545 
íbkg
 +
ew
;

1546 
sum
 +
ew
*(
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
((*
evíts
)[
i
])?1.0:-1.0);

1548 
	`Log
(Ë<< 
kVERBOSE
 << "Ef„˘ivênumbî o‡sig«»/ background = " << 
ísig
 << " / " << 
íbkg
 << 
Endl
;

1550  
sum
/
fNEveEffP©h
;

1551 
	}
}

1555 
I¡_t
 
	gTMVA
::
RuÀFôP¨ams
::
	$Ty≥
–c⁄° 
Evít
 * 
e
 ) const {

1556  (
fRuÀFô
->
	`GëMëhodRuÀFô
()->
	`D©aInfo
().
	`IsSig«l
(
e
) ? 1:-1);

1557 
	}
}

1561 
	gTMVA
::
RuÀFôP¨ams
::
	$SëMsgTy≥
–
EMsgTy≥
 
t
 ) {

1562 
fLoggî
->
	`SëMöTy≥
(
t
);

1563 
	}
}

	@src/SVEvent.cxx

33 
	~"TMVA/SVEvít.h
"

35 
	~"TMVA/Evít.h
"

37 
	~"Rty≥s.h
"

39 
	~<io°ªam
>

41 
CœssImp
(
TMVA
::
SVEvít
);

43 
	gTMVA
::
SVEvít
::
	$SVEvít
()

44 : 
	`fD©aVe˘‹
(0),

45 
	`fCweight
(1.),

46 
	`fAÕha
(0),

47 
	`fAÕha_p
(0),

48 
	`fEº‹Cache
(0),

49 
	`fNV¨
(0),

50 
	`fTy≥Fœg
(0),

51 
	`fIdx
(0),

52 
	`fNs
(0),

53 
	`fIsShröked
(0),

54 
	`fLöe
(0),

55 
	$fT¨gë
(0)

57 
	}
}

62 
	gTMVA
::
SVEvít
::
	$SVEvít
–c⁄° 
Evít
* 
evít
, 
Flﬂt_t
 
C_∑r
, 
Boﬁ_t
 
isSig«l
 )

63 : 
	`fD©aVe˘‹
(
evít
->
	`GëVÆues
()),

64 
	`fCweight
(
C_∑r
*
evít
->
	`GëWeight
()),

65 
	`fAÕha
(0),

66 
	`fAÕha_p
(0),

67 
	`fEº‹Cache
(0),

68 
	`fNV¨
 ( 
evít
->
	`GëNV¨übÀs
() ),

69 
	`fTy≥Fœg
–
isSig«l
 ? -1 : 1 ),

70 
	`fIdx
 ( 
isSig«l
 ? -1 : 1 ),

71 
	`fNs
(0),

72 
	`fIsShröked
(0),

73 
	`fLöe
(0),

74 
	`fT¨gë
((
evít
->
	`GëNT¨gës
(Ë> 0 ?Évít->
	$GëT¨gë
(0) : 0))

76 
	}
}

81 
TMVA
::
SVEvít
::SVEvít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>* 
sve˘‹
, Flﬂt_à
Æpha
, 
I¡_t
 
ty≥Fœg
, 
UI¡_t
 
ns
 )

82 : 
fD©aVe˘‹
(*
sve˘‹
),

83 
fCweight
(-1.),

84 
fAÕha
(
Æpha
),

85 
fAÕha_p
(0),

86 
fEº‹Cache
(-1.),

87 
fNV¨
(
sve˘‹
->
size
()),

88 
fTy≥Fœg
(
ty≥Fœg
),

89 
fIdx
(-1),

90 
fNs
(
ns
),

91 
fIsShröked
(0),

92 
fLöe
(0),

93 
	$fT¨gë
(0)

95 
	}
}

100 
	gTMVA
::
SVEvít
::SVEvít–c⁄° 
°d
::
ve˘‹
<
Flﬂt_t
>* 
sve˘‹
, Flﬂt_à
Æpha
, Flﬂt_à
Æpha_p
,
I¡_t
 
ty≥Fœg
)

101 : 
fD©aVe˘‹
(*
sve˘‹
),

102 
fCweight
(-1.),

103 
fAÕha
(
Æpha
),

104 
fAÕha_p
(
Æpha_p
),

105 
fEº‹Cache
(-1.),

106 
fNV¨
(
sve˘‹
->
size
()),

107 
fTy≥Fœg
(
ty≥Fœg
),

108 
fIdx
(-1),

109 
fNs
(0),

110 
fIsShröked
(0),

111 
fLöe
(0),

112 
	$fT¨gë
(0)

114 
	}
}

119 
	gTMVA
::
SVEvít
::~
	$SVEvít
()

121 i‡(
fLöe
 != 0) {

122 
dñëe
 [] 
fLöe
;

123 
fLöe
 = 0;

125 
	}
}

130 
	gTMVA
::
SVEvít
::
	$Pröt
–
°d
::
o°ªam
& 
os
 ) const

132 
os
 << "ty≥::" << 
fTy≥Fœg
 <<"Å¨gë::"<< 
fT¨gë
 << "áÕha::" << 
fAÕha
 <<"áÕha_p::"<< 
fAÕha_p
<< " values::" ;

133 
UI¡_t
 
j
 =0; j < 
fD©aVe˘‹
.
	`size
();j++Ë
os
<<fD©aVe˘‹.
	`©
(j)<<" ";

134 
os
 << 
°d
::
ídl
;

135 
	}
}

140 
	gTMVA
::
SVEvít
::
	$PrötD©a
()

142 
UI¡_t
 
i
 = 0; i < 
fNV¨
; i++Ë
°d
::
cout
<<
fD©aVe˘‹
.
	`©
(i)<<" ";

143 
°d
::
cout
<<°d::
ídl
;

144 
	}
}

	@src/SVKernelFunction.cxx

39 
	~"TMVA/SVKî√lFun˘i⁄.h
"

40 
	~"TMVA/SVEvít.h
"

41 
	~"TM©h.h
"

42 
	~<ve˘‹
>

47 
	gTMVA
::
SVKî√lFun˘i⁄
::
	$SVKî√lFun˘i⁄
()

48 : 
	`fGamma
(0.),

49 
	`fKî√l
(
kRBF
),

50 
	`fOrdî
(0),

51 
	`fThëa
(0),

52 
	$fK≠∑
(0)

54 
	}
}

59 
	gTMVA
::
SVKî√lFun˘i⁄
::
	$SVKî√lFun˘i⁄
–
Flﬂt_t
 
gamma
 )

60 : 
	`fGamma
(
gamma
),

61 
	`fKî√l
(
kRBF
),

62 
	`fOrdî
(0),

63 
	`fThëa
(0),

64 
	$fK≠∑
(0)

66 
fmGamma
.
	`˛ór
();

67 
	}
}

72 
	gTMVA
::
SVKî√lFun˘i⁄
::
	$SVKî√lFun˘i⁄
–
EKî√lTy≥
 
k
, 
Flﬂt_t
 
∑øm1
, Flﬂt_à
∑øm2
)

73 : 
	$fKî√l
(
k
)

75 i‡(
k
==
kRBF
Ë{ 
fGamma
 = 
∑øm1
; }

76 i‡(
k
==
kPﬁynomül
){

77 
fOrdî
 = 
∑øm1
;

78 
fThëa
 = 
∑øm2
;

80 
fKî√lsLi°
.
	`˛ór
();

81 
	}
}

86 
	gTMVA
::
SVKî√lFun˘i⁄
::SVKî√lFun˘i⁄–
°d
::
ve˘‹
<> 
∑øms
 ) :

87 
	$fKî√l
(
kMu…iGauss
)

89 
fmGamma
.
	`˛ór
();

90  
°d
::
ve˘‹
<>::
c⁄°_ôî©‹
 
ôî
 = 
∑øms
.
	`begö
(); iã∏!∑øms.
	`íd
()\

91 ; ++
ôî
 ){

92 
fmGamma
.
	`push_back
(*
ôî
);

95 
	}
}

100 
	gTMVA
::
SVKî√lFun˘i⁄
::SVKî√lFun˘i⁄(
EKî√lTy≥
 
k
, 
°d
::
ve˘‹
<EKî√lTy≥> 
kî√ls
, std::ve˘‹<
Flﬂt_t
> 
gammas
, Flﬂt_à
gamma
, Flﬂt_à
‹dî
, Flﬂt_à
thëa
) :

101 
fGamma
(
gamma
),

102 
fKî√l
(
k
),

103 
fOrdî
(
‹dî
),

104 
	$fThëa
(
thëa
)

106 
fmGamma
.
	`˛ór
();

107 
fKî√lsLi°
.
	`˛ór
();

108 
fKî√lsLi°
 = 
kî√ls
;

109 
fmGamma
 = 
gammas
;

110 
	}
}

115 
	gTMVA
::
SVKî√lFun˘i⁄
::~
	$SVKî√lFun˘i⁄
()

117 
fmGamma
.
	`˛ór
();

118 
fKî√lsLi°
.
	`˛ór
();

119 
	}
}

124 
	gTMVA
::
SVKî√lFun˘i⁄
::
	$£tCom∑tibûôyP¨ams
(
EKî√lTy≥
 
k
, 
UI¡_t
 
‹dî
, 
Flﬂt_t
 
thëa
, Flﬂt_à
k≠∑
) {

125 
fKî√l
 = 
k
;

126 
fOrdî
 = 
‹dî
;

127 
fThëa
 = 
thëa
;

128 
fK≠∑
 = 
k≠∑
;

129 
	}
}

133 
Flﬂt_t
 
	gTMVA
::
SVKî√lFun˘i⁄
::
	$EvÆu©e
–
SVEvít
* 
ev1
, SVEvít* 
ev2
 )

135 
fKî√l
) {

136 
kRBF
:

138 
°d
::
ve˘‹
<
Flﬂt_t
> *
v1
 = 
ev1
->
	`GëD©aVe˘‹
();

139 
°d
::
ve˘‹
<
Flﬂt_t
> *
v2
 = 
ev2
->
	`GëD©aVe˘‹
();

141 
Flﬂt_t
 
n‹m
 = 0;

142 
UI¡_t
 
i
 = 0; i < 
v1
->
	`size
(); i++Ë
n‹m
 +((*v1)[i] -(*
v2
)[i]) *((*v1)[i] -(*v2)[i]) ;

144  
TM©h
::
	`Exp
(-
n‹m
*
fGamma
);

146 
kMu…iGauss
:

152 
°d
::
ve˘‹
<
Flﬂt_t
> *
v1
 = 
ev1
->
	`GëD©aVe˘‹
();

153 
°d
::
ve˘‹
<
Flﬂt_t
> *
v2
 = 
ev2
->
	`GëD©aVe˘‹
();

154 if(
fmGamma
.
	`size
(Ë!
v1
->size()){

155 
°d
::
cout
 << "Fewî gamma†th™ i≈uàv¨übÀs! #Gammas" << 
fmGamma
.
	`size
(Ë<< " #I≈uàv¨übÀs" << 
v1
->size(Ë<< std::
ídl
;

156 
°d
::
cout
 << "***>áb‹à¥ogømÉxecuti⁄" << std::
ídl
;

157 
	`exô
(1);

160 
Flﬂt_t
 
ªsu…
 = 1.;

161 
UI¡_t
 
i
 = 0; i < 
v1
->
	`size
(); i++) {

162 
ªsu…
 *
TM©h
::
	`Exp
–-((*
v1
)[
i
] -(*
v2
)[i])*((*v1)[i] -(*v2)[i])*
fmGamma
[i] );

164  
ªsu…
;

166 
kPﬁynomül
:

170 
°d
::
ve˘‹
<
Flﬂt_t
> *
v1
 = 
ev1
->
	`GëD©aVe˘‹
();

171 
°d
::
ve˘‹
<
Flﬂt_t
> *
v2
 = 
ev2
->
	`GëD©aVe˘‹
();

172 
Flﬂt_t
 
¥od
 = 
fThëa
;

173 
UI¡_t
 
idx
 = 0; idx < 
v1
->
	`size
(); idx++Ë
¥od
 +(*v1)[idx] * (*
v2
)[idx];

175 
Flﬂt_t
 
ªsu…
 = 1.;

176 
I¡_t
 
i
 = 
fOrdî
;

177 
ªsu…
 = 
TM©h
::
	`Powî
(
¥od
,
i
);

178  
ªsu…
;

180 
kLöór
:

184 
°d
::
ve˘‹
<
Flﬂt_t
> *
v1
 = 
ev1
->
	`GëD©aVe˘‹
();

185 
°d
::
ve˘‹
<
Flﬂt_t
> *
v2
 = 
ev2
->
	`GëD©aVe˘‹
();

186 
Flﬂt_t
 
¥od
 = 0;

187 
UI¡_t
 
i
 = 0; i < 
v1
->
	`size
(); i++Ë
¥od
 +(*v1)[i] * (*
v2
)[i];

188  
¥od
;

190 
kSigmoidÆ
:

195 
°d
::
ve˘‹
<
Flﬂt_t
> *
v1
 = 
ev1
->
	`GëD©aVe˘‹
();

196 
°d
::
ve˘‹
<
Flﬂt_t
> *
v2
 = 
ev2
->
	`GëD©aVe˘‹
();

197 
Flﬂt_t
 
¥od
 = 0;

198 
UI¡_t
 
i
 = 0; i < 
v1
->
	`size
(); i++Ë
¥od
 +((*v1)[i] -(*
v2
)[i]) *((*v1)[i] -(*v2)[i]) ;

199 
¥od
 *
fK≠∑
;

200 
¥od
 +
fThëa
;

201  
TM©h
::
	`T™H
–
¥od
 );

203 
kProd
:

209 
Flﬂt_t
 
kî√lVÆ
;

210 
kî√lVÆ
 = 1;

211 
UI¡_t
 
i
 = 0; i<
fKî√lsLi°
.
	`size
(); i++){

212 
fKî√l
 = 
fKî√lsLi°
.
	`©
(
i
);

213 
Flﬂt_t
 
a
 = 
	`EvÆu©e
(
ev1
,
ev2
);

214 
kî√lVÆ
 *
a
;

216 
fKî√l
 = 
kProd
;

217  
kî√lVÆ
;

219 
kSum
:

225 
Flﬂt_t
 
kî√lVÆ
 = 0;

226 
UI¡_t
 
i
 = 0; i<
fKî√lsLi°
.
	`size
(); i++){

227 
fKî√l
 = 
fKî√lsLi°
.
	`©
(
i
);

228 
Flﬂt_t
 
a
 = 
	`EvÆu©e
(
ev1
,
ev2
);

229 
kî√lVÆ
 +
a
;

231 
fKî√l
 = 
kSum
;

232  
kî√lVÆ
;

236 
	}
}

	@src/SVKernelMatrix.cxx

39 
	~"TMVA/SVKî√lM©rix.h
"

41 
	~"TMVA/MsgLoggî.h
"

42 
	~"TMVA/SVEvít.h
"

43 
	~"TMVA/SVKî√lFun˘i⁄.h
"

44 
	~"TMVA/Ty≥s.h
"

46 
	~"Rty≥sC‹e.h
"

48 
	~<io°ªam
>

49 
	~<°dex˚±
>

54 
	gTMVA
::
SVKî√lM©rix
::
	$SVKî√lM©rix
()

55 : 
	`fSize
(0),

56 
	`fKî√lFun˘i⁄
(0),

57 
	`fSVKî√lM©rix
(0),

58 
	`fLoggî
–
√w
 
	`MsgLoggî
("Resu…sRegªssi⁄", 
kINFO
) )

60 
	}
}

65 
	gTMVA
::
SVKî√lM©rix
::SVKî√lM©rix–
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>* 
öputVe˘‹s
, 
SVKî√lFun˘i⁄
* 
kî√lFun˘i⁄
 )

66 : 
fSize
(
öputVe˘‹s
->
size
()),

67 
fKî√lFun˘i⁄
(
kî√lFun˘i⁄
),

68 
fLoggî
–
√w
 
MsgLoggî
("SVKî√lM©rix", 
kINFO
) )

70 
	gfSVKî√lM©rix
 = 
√w
 
Flﬂt_t
*[
fSize
];

71 
	gåy
{

72 
UI¡_t
 
	gi
 = 0; i < 
	gfSize
; i++Ë
	gfSVKî√lM©rix
[
i
] = 
√w
 
Flﬂt_t
[i+1];

73 }
ˇtch
(...){

74 
Log
(Ë<< 
	gkFATAL
 << "I≈uàd©®toÿœrge. NŸÉnough mem‹yÅÿÆloˇã mem‹y f‹ Suµ‹àVe˘‹ Kî√»M©rix. PÀa£Ñedu˚Åhênumbî o‡öpuàevít†‹ u£á dif„ª¡ mëhod."<<
	gEndl
;

78 
UI¡_t
 
	gi
 = 0; i < 
	gfSize
; i++) {

79 
UI¡_t
 
	gj
 = 0; j <=
i
; j++) {

80 
	gfSVKî√lM©rix
[
i
][
j
] = 
fKî√lFun˘i⁄
->
EvÆu©e
((*
öputVe˘‹s
)[i], (*inputVectors)[j]);

88 
	gTMVA
::
SVKî√lM©rix
::~
	$SVKî√lM©rix
()

90 
UI¡_t
 
i
 = 
fSize
 -1; i > 0; i--) {

91 
dñëe
[] 
fSVKî√lM©rix
[
i
];

92 
fSVKî√lM©rix
[
i
] = 0;

94 
dñëe
[] 
fSVKî√lM©rix
;

95 
fSVKî√lM©rix
 = 0;

96 
	}
}

101 
Flﬂt_t
* 
	gTMVA
::
SVKî√lM©rix
::
	$GëLöe
–
UI¡_t
 
löe
 )

103 
Flﬂt_t
* 
fLöe
 = 
NULL
;

104 i‡(
löe
 >
fSize
) {

105  
NULL
;

108 
fLöe
 = 
√w
 
Flﬂt_t
[
fSize
];

109  
UI¡_t
 
i
 = 0; i <
löe
; i++)

110 
fLöe
[
i
] = 
fSVKî√lM©rix
[
löe
][i];

111  
UI¡_t
 
i
 = 
löe
; i < 
fSize
; i++)

112 
fLöe
[
i
] = 
fSVKî√lM©rix
[i][
löe
];

113  
fLöe
;

115 
	}
}

120 
Flﬂt_t
 
	gTMVA
::
SVKî√lM©rix
::
	$GëEÀmít
(
UI¡_t
 
i
, UI¡_à
j
)

122 i‡(
i
 > 
j
Ë 
fSVKî√lM©rix
[i][j];

123  
fSVKî√lM©rix
[
j
][
i
];

124 
	}
}

	@src/SVWorkingSet.cxx

33 
	~"TMVA/SVW‹kögSë.h
"

35 
	~"TMVA/MsgLoggî.h
"

36 
	~"TMVA/SVEvít.h
"

37 
	~"TMVA/SVKî√lFun˘i⁄.h
"

38 
	~"TMVA/SVKî√lM©rix.h
"

39 
	~"TMVA/Ty≥s.h
"

42 
	~"TM©h.h
"

43 
	~"TR™dom3.h
"

45 
	~<io°ªam
>

46 
	~<ve˘‹
>

51 
	gTMVA
::
SVW‹kögSë
::
	$SVW‹kögSë
()

52 : 
	`fdoRegªssi⁄
(
kFALSE
),

53 
	`fI≈utD©a
(0),

54 
	`fSupVec
(0),

55 
	`fKFun˘i⁄
(0),

56 
	`fKM©rix
(0),

57 
	`fTEvítUp
(0),

58 
	`fTEvítLow
(0),

59 
	`fB_low
(1.),

60 
	`fB_up
(-1.),

61 
	`fTﬁî™˚
(0.01),

62 
	`fLoggî
–
√w
 
	`MsgLoggî
–"SVW‹kögSë", 
kINFO
 ) )

64 
	}
}

69 
	gTMVA
::
SVW‹kögSë
::SVW‹kögSë(
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>*
öputVe˘‹s
, 
SVKî√lFun˘i⁄
* 
kî√lFun˘i⁄
,

70 
Flﬂt_t
 
tﬁ
, 
Boﬁ_t
 
d‹eg
)

71 : 
fdoRegªssi⁄
(
d‹eg
),

72 
fI≈utD©a
(
öputVe˘‹s
),

73 
fSupVec
(0),

74 
fKFun˘i⁄
(
kî√lFun˘i⁄
),

75 
fTEvítUp
(0),

76 
fTEvítLow
(0),

77 
fB_low
(1.),

78 
fB_up
(-1.),

79 
fTﬁî™˚
(
tﬁ
),

80 
fLoggî
–
√w
 
MsgLoggî
–"SVW‹kögSë", 
kINFO
 ) )

82 
	gfKM©rix
 = 
√w
 
TMVA
::
SVKî√lM©rix
(
öputVe˘‹s
, 
kî√lFun˘i⁄
);

83 
Flﬂt_t
 *
	g±
;

84  
UI¡_t
 
	gi
 = 0; i < 
	gfI≈utD©a
->
size
(); i++){

85 
	g±
 = 
fKM©rix
->
GëLöe
(
i
);

86 
	gfI≈utD©a
->
©
(
i
)->
SëLöe
(
±
);

87 
	gfI≈utD©a
->
©
(
i
)->
SëNs
(i);

88 if(
	gfdoRegªssi⁄
Ë
	gfI≈utD©a
->
©
(
i
)->
SëEº‹Cache
(
fI≈utD©a
->©(i)->
GëT¨gë
());

90 
TR™dom3
 
	gønd
;

91 
UI¡_t
 
	gkk
 = 
ønd
.
I¡egî
(
fI≈utD©a
->
size
());

92 if(
	gfdoRegªssi⁄
) {

93 
	gfTEvítLow
 = 
fTEvítUp
 =
fI≈utD©a
->
©
(0);

94 
	gfB_low
 = 
fTEvítUp
 ->
GëT¨gë
(Ë- 
fTﬁî™˚
;

95 
	gfB_up
 = 
fTEvítLow
->
GëT¨gë
(Ë+ 
fTﬁî™˚
;

99 if(
	gfI≈utD©a
->
©
(
kk
)->
GëTy≥Fœg
()==-1){

100 
fTEvítLow
 = 
fI≈utD©a
->
©
(
kk
);

103 
	gkk
 = 
ønd
.
I¡egî
(
fI≈utD©a
->
size
());

107 i‡(
	gfI≈utD©a
->
©
(
kk
)->
GëTy≥Fœg
()==1) {

108 
fTEvítUp
 = 
fI≈utD©a
->
©
(
kk
);

111 
	gkk
 = 
ønd
.
I¡egî
(
fI≈utD©a
->
size
());

114 
	gfTEvítUp
 ->
SëEº‹Cache
(
fTEvítUp
->
GëT¨gë
());

115 
	gfTEvítLow
->
SëEº‹Cache
(
fTEvítUp
->
GëT¨gë
());

121 
	gTMVA
::
SVW‹kögSë
::~
	$SVW‹kögSë
()

123 i‡(
fKM©rix
 !0Ë{
dñëe
 fKMatrix; fKMatrix = 0;}

124 
dñëe
 
fLoggî
;

125 
	}
}

129 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$ExamöeExam∂e
–
TMVA
::
SVEvít
* 
jevt
 )

131 
SVEvít
* 
õvt
=0;

132 
Flﬂt_t
 
fEº‹C_J
 = 0.;

133 if–
jevt
->
	`GëIdx
()==0Ë
fEº‹C_J
 = jevt->
	`GëEº‹Cache
();

135 
Flﬂt_t
 *
fKVÆs
 = 
jevt
->
	`GëLöe
();

136 
fEº‹C_J
 = 0.;

137 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

139 
UI¡_t
 
k
=0;

140 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

141 if((*
idIãr
)->
	`GëAÕha
()>0)

142 
fEº‹C_J
 +(*
idIãr
)->
	`GëAÕha
()*(*idIãr)->
	`GëTy≥Fœg
()*
fKVÆs
[
k
];

143 
k
++;

147 
fEº‹C_J
 -
jevt
->
	`GëTy≥Fœg
();

148 
jevt
->
	`SëEº‹Cache
(
fEº‹C_J
);

150 if((
jevt
->
	`GëIdx
(Ë=1Ë&& (
fEº‹C_J
 < 
fB_up
 )){

151 
fB_up
 = 
fEº‹C_J
;

152 
fTEvítUp
 = 
jevt
;

154 i‡((
jevt
->
	`GëIdx
(Ë=-1)&&(
fEº‹C_J
 > 
fB_low
)) {

155 
fB_low
 = 
fEº‹C_J
;

156 
fTEvítLow
 = 
jevt
;

159 
Boﬁ_t
 
c⁄vîged
 = 
kTRUE
;

161 if((
jevt
->
	`GëIdx
()>=0Ë&& (
fB_low
 - 
fEº‹C_J
 > 2*
fTﬁî™˚
)) {

162 
c⁄vîged
 = 
kFALSE
;

163 
õvt
 = 
fTEvítLow
;

166 if((
jevt
->
	`GëIdx
()<=0Ë&& (
fEº‹C_J
 - 
fB_up
 > 2*
fTﬁî™˚
)) {

167 
c⁄vîged
 = 
kFALSE
;

168 
õvt
 = 
fTEvítUp
;

171 i‡(
c⁄vîged
Ë 
kFALSE
;

173 if(
jevt
->
	`GëIdx
()==0){

174 if(
fB_low
 - 
fEº‹C_J
 > fEº‹C_J - 
fB_up
Ë
õvt
 = 
fTEvítLow
;

175 
õvt
 = 
fTEvítUp
;

178 i‡(
	`TakeSãp
(
õvt
, 
jevt
)Ë 
kTRUE
;

179  
kFALSE
;

180 
	}
}

185 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$TakeSãp
(
TMVA
::
SVEvít
* 
õvt
,TMVA::SVEvít* 
jevt
 )

187 i‡(
õvt
 =
jevt
Ë 
kFALSE
;

188 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

189 c⁄° 
Flﬂt_t
 
ïsû⁄
 = 1e-8;

191 
Flﬂt_t
 
ty≥_I
, 
ty≥_J
;

192 
Flﬂt_t
 
îr‹C_I
, 
îr‹C_J
;

193 
Flﬂt_t
 
Æpha_I
, 
Æpha_J
;

195 
Flﬂt_t
 
√wAÕha_I
, 
√wAÕha_J
;

196 
I¡_t
 
s
;

198 
Flﬂt_t
 
l
, 
h
, 
lobj
 = 0, 
hobj
 = 0;

199 
Flﬂt_t
 
ëa
;

201 
ty≥_I
 = 
õvt
->
	`GëTy≥Fœg
();

202 
Æpha_I
 = 
õvt
->
	`GëAÕha
();

203 
îr‹C_I
 = 
õvt
->
	`GëEº‹Cache
();

205 
ty≥_J
 = 
jevt
->
	`GëTy≥Fœg
();

206 
Æpha_J
 = 
jevt
->
	`GëAÕha
();

207 
îr‹C_J
 = 
jevt
->
	`GëEº‹Cache
();

209 
s
 = 
	`I¡_t
–
ty≥_I
 * 
ty≥_J
 );

211 
Flﬂt_t
 
c_i
 = 
õvt
->
	`GëCweight
();

213 
Flﬂt_t
 
c_j
 = 
jevt
->
	`GëCweight
();

217 i‡(
ty≥_I
 =
ty≥_J
) {

218 
Flﬂt_t
 
gamma
 = 
Æpha_I
 + 
Æpha_J
;

220 i‡–
c_i
 > 
c_j
 ) {

221 i‡–
gamma
 < 
c_j
 ) {

222 
l
 = 0;

223 
h
 = 
gamma
;

226 
h
 = 
c_j
;

227 i‡–
gamma
 < 
c_i
 )

228 
l
 = 0;

230 
l
 = 
gamma
 - 
c_i
;

234 i‡–
gamma
 < 
c_i
 ){

235 
l
 = 0;

236 
h
 = 
gamma
;

239 
l
 = 
gamma
 - 
c_i
;

240 i‡–
gamma
 < 
c_j
 )

241 
h
 = 
gamma
;

243 
h
 = 
c_j
;

248 
Flﬂt_t
 
gamma
 = 
Æpha_I
 - 
Æpha_J
;

249 i‡(
gamma
 > 0) {

250 
l
 = 0;

251 i‡–
gamma
 >(
c_i
 - 
c_j
) )

252 
h
 = 
c_i
 - 
gamma
;

254 
h
 = 
c_j
;

257 
l
 = -
gamma
;

258 i‡–(
c_i
 - 
c_j
Ë>
gamma
)

259 
h
 = 
c_j
;

261 
h
 = 
c_i
 - 
gamma
;

265 i‡(
l
 =
h
Ë 
kFALSE
;

266 
Flﬂt_t
 
kî√l_II
, 
kî√l_IJ
, 
kî√l_JJ
;

268 
kî√l_II
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(),ievt->GetNs());

269 
kî√l_IJ
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(), 
jevt
->GetNs());

270 
kî√l_JJ
 = 
fKM©rix
->
	`GëEÀmít
(
jevt
->
	`GëNs
(),jevt->GetNs());

272 
ëa
 = 2*
kî√l_IJ
 - 
kî√l_II
 - 
kî√l_JJ
;

273 i‡(
ëa
 < 0) {

274 
√wAÕha_J
 = 
Æpha_J
 + (
ty≥_J
*–
îr‹C_J
 - 
îr‹C_I
 ))/
ëa
;

275 i‡(
√wAÕha_J
 < 
l
)ÇewAlpha_J =Ü;

276 i‡(
√wAÕha_J
 > 
h
)ÇewAlpha_J = h;

282 
Flﬂt_t
 
c_I
 = 
ëa
/2;

283 
Flﬂt_t
 
c_J
 = 
ty≥_J
*–
îr‹C_I
 - 
îr‹C_J
 ) - 
ëa
 * 
Æpha_J
;

284 
lobj
 = 
c_I
 * 
l
 *Ü + 
c_J
 *Ü;

285 
hobj
 = 
c_I
 * 
h
 * h + 
c_J
 * h;

287 i‡(
lobj
 > 
hobj
 + 
ïsû⁄
Ë
√wAÕha_J
 = 
l
;

288 i‡(
lobj
 < 
hobj
 - 
ïsû⁄
Ë
√wAÕha_J
 = 
h
;

289 
√wAÕha_J
 = 
Æpha_J
;

292 i‡(
TM©h
::
	`Abs
–
√wAÕha_J
 - 
Æpha_J
 ) < ( 
ïsû⁄
 * (ÇewAlpha_J +álpha_J+Épsilon ))){

293  
kFALSE
;

296 
√wAÕha_I
 = 
Æpha_I
 - 
s
*–
√wAÕha_J
 - 
Æpha_J
 );

298 i‡(
√wAÕha_I
 < 0) {

299 
√wAÕha_J
 +
s
* 
√wAÕha_I
;

300 
√wAÕha_I
 = 0;

302 i‡(
√wAÕha_I
 > 
c_i
) {

303 
Flﬂt_t
 
ãmp
 = 
√wAÕha_I
 - 
c_i
;

304 
√wAÕha_J
 +
s
 * 
ãmp
;

305 
√wAÕha_I
 = 
c_i
;

308 
Flﬂt_t
 
dL_I
 = 
ty≥_I
 * ( 
√wAÕha_I
 - 
Æpha_I
 );

309 
Flﬂt_t
 
dL_J
 = 
ty≥_J
 * ( 
√wAÕha_J
 - 
Æpha_J
 );

311 
I¡_t
 
k
 = 0;

312 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

313 
k
++;

314 if((*
idIãr
)->
	`GëIdx
()==0){

315 
Flﬂt_t
 
ii
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(), (*
idIãr
)->GetNs());

316 
Flﬂt_t
 
jj
 = 
fKM©rix
->
	`GëEÀmít
(
jevt
->
	`GëNs
(), (*
idIãr
)->GetNs());

318 (*
idIãr
)->
	`Upd©eEº‹Cache
(
dL_I
 * 
ii
 + 
dL_J
 * 
jj
);

321 
õvt
->
	`SëAÕha
(
√wAÕha_I
);

322 
jevt
->
	`SëAÕha
(
√wAÕha_J
);

324 
	`SëIndex
(
õvt
);

325 
	`SëIndex
(
jevt
);

328 
õvt
->
	`SëEº‹Cache
(
îr‹C_I
 + 
dL_I
*
kî√l_II
 + 
dL_J
*
kî√l_IJ
);

329 
jevt
->
	`SëEº‹Cache
(
îr‹C_J
 + 
dL_I
*
kî√l_IJ
 + 
dL_J
*
kî√l_JJ
);

333 
fB_low
 = -1*1e30;

334 
fB_up
 = 1e30;

336 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

337 if((*
idIãr
)->
	`GëIdx
()==0){

338 if((*
idIãr
)->
	`GëEº‹Cache
()> 
fB_low
){

339 
fB_low
 = (*
idIãr
)->
	`GëEº‹Cache
();

340 
fTEvítLow
 = (*
idIãr
);

342 if–(*
idIãr
)->
	`GëEº‹Cache
()< 
fB_up
){

343 
fB_up
 =(*
idIãr
)->
	`GëEº‹Cache
();

344 
fTEvítUp
 = (*
idIãr
);

350 i‡(
fB_low
 < 
TM©h
::
	`Max
(
õvt
->
	`GëEº‹Cache
(), 
jevt
->GetErrorCache())) {

351 i‡(
õvt
->
	`GëEº‹Cache
(Ë> 
fB_low
) {

352 
fB_low
 = 
õvt
->
	`GëEº‹Cache
();

353 
fTEvítLow
 = 
õvt
;

356 
fB_low
 = 
jevt
->
	`GëEº‹Cache
();

357 
fTEvítLow
 = 
jevt
;

361 i‡(
fB_up
 > 
TM©h
::
	`Max
(
õvt
->
	`GëEº‹Cache
(), 
jevt
->GetErrorCache())) {

362 i‡(
õvt
->
	`GëEº‹Cache
()< 
fB_low
) {

363 
fB_up
 =
õvt
->
	`GëEº‹Cache
();

364 
fTEvítUp
 = 
õvt
;

367 
fB_up
 =
jevt
->
	`GëEº‹Cache
() ;

368 
fTEvítUp
 = 
jevt
;

371  
kTRUE
;

372 
	}
}

376 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$Tîmö©ed
()

378 if((
fB_up
 > 
fB_low
 - 2*
fTﬁî™˚
)Ë 
kTRUE
;

379  
kFALSE
;

380 
	}
}

385 
	gTMVA
::
SVW‹kögSë
::
	$Tøö
(
UI¡_t
 
nMaxIãr
)

388 
I¡_t
 
numCh™ged
 = 0;

389 
I¡_t
 
examöeAŒ
 = 1;

391 
Flﬂt_t
 
numCh™gedOld
 = 0;

392 
I¡_t
 
dñèCh™ges
 = 0;

393 
UI¡_t
 
numô
 = 0;

395 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

397 (
numCh™ged
 > 0Ë|| (
examöeAŒ
 > 0)) {

398 i‡(
fIPyCuºítIãr
Ë*fIPyCuºítIã∏
numô
;

399 i‡(
fExôFromTøöög
 && *fExitFromTraining) ;

400 
numCh™ged
 = 0;

401 i‡(
examöeAŒ
) {

402 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIãr!=fI≈utD©a->
	`íd
(); idIter++){

403 if(!
fdoRegªssi⁄
Ë
numCh™ged
 +(
UI¡_t
)
	`ExamöeExam∂e
(*
idIãr
);

404 
numCh™ged
 +(
UI¡_t
)
	`ExamöeExam∂eReg
(*
idIãr
);

408 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIãr!=fI≈utD©a->
	`íd
(); idIter++) {

409 i‡((*
idIãr
)->
	`IsInI0
()) {

410 if(!
fdoRegªssi⁄
Ë
numCh™ged
 +(
UI¡_t
)
	`ExamöeExam∂e
(*
idIãr
);

411 
numCh™ged
 +(
UI¡_t
)
	`ExamöeExam∂eReg
(*
idIãr
);

412 i‡(
	`Tîmö©ed
()) {

413 
numCh™ged
 = 0;

420 i‡(
examöeAŒ
 == 1)ÉxamineAll = 0;

421 i‡(
numCh™ged
 =0 ||ÇumCh™ged < 10 || 
dñèCh™ges
 > 3 ) 
examöeAŒ
 = 1;

423 i‡(
numCh™ged
 =
numCh™gedOld
Ë
dñèCh™ges
++;

424 
dñèCh™ges
 = 0;

425 
numCh™gedOld
 = 
numCh™ged
;

426 ++
numô
;

428 i‡(
numô
 >
nMaxIãr
) {

429 *
fLoggî
 << 
kWARNING


431 << "Tøöög mayÇŸ bêcom∂ëed. Try u£Ües†Co°Ö¨amëî" << 
Endl
;

435 
	}
}

439 
	gTMVA
::
SVW‹kögSë
::
	$SëIndex
–
TMVA
::
SVEvít
* 
evít
 )

441 if–(0< 
evít
->
	`GëAÕha
()Ë&& (evít->GëAÕha()<Évít->
	`GëCweight
()))

442 
evít
->
	`SëIdx
(0);

444 if–
evít
->
	`GëTy≥Fœg
() == 1){

445 if–
evít
->
	`GëAÕha
() == 0)

446 
evít
->
	`SëIdx
(1);

447 if–
evít
->
	`GëAÕha
(Ë=evít->
	`GëCweight
() )

448 
evít
->
	`SëIdx
(-1);

450 if–
evít
->
	`GëTy≥Fœg
() == -1){

451 if–
evít
->
	`GëAÕha
() == 0)

452 
evít
->
	`SëIdx
(-1);

453 if–
evít
->
	`GëAÕha
(Ë=evít->
	`GëCweight
() )

454 
evít
->
	`SëIdx
(1);

456 
	}
}

460 
	gTMVA
::
SVW‹kögSë
::
	$PrötSèt
()

462 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

463 
UI¡_t
 
cou¡î
 = 0;

464  
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++)

465 if((*
idIãr
)->
	`GëAÕha
(Ë!=0Ë
cou¡î
++;

466 
	}
}

470 
	g°d
::
ve˘‹
<
TMVA
::
SVEvít
*>* TMVA::
SVW‹kögSë
::
	$GëSuµ‹tVe˘‹s
()

472 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

473 if–
fSupVec
 !0Ë{
dñëe
 fSupVec; fSupVec = 0; }

474 
fSupVec
 = 
√w
 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>(0);

476  
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

477 if((*
idIãr
)->
	`GëDñèAÕha
() !=0){

478 
fSupVec
->
	`push_back
((*
idIãr
));

481  
fSupVec
;

482 
	}
}

486 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$TakeSãpReg
(
TMVA
::
SVEvít
* 
õvt
,TMVA::SVEvít* 
jevt
 )

488 i‡(
õvt
 =
jevt
Ë 
kFALSE
;

489 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

490 c⁄° 
Flﬂt_t
 
ïsû⁄
 = 0.001*
fTﬁî™˚
;

492 c⁄° 
Flﬂt_t
 
kî√l_II
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(),ievt->GetNs());

493 c⁄° 
Flﬂt_t
 
kî√l_IJ
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(),
jevt
->GetNs());

494 c⁄° 
Flﬂt_t
 
kî√l_JJ
 = 
fKM©rix
->
	`GëEÀmít
(
jevt
->
	`GëNs
(),jevt->GetNs());

497 c⁄° 
Flﬂt_t
 
ëa
 = -2*
kî√l_IJ
 + 
kî√l_II
 + 
kî√l_JJ
;

498 c⁄° 
Flﬂt_t
 
gamma
 = 
õvt
->
	`GëDñèAÕha
(Ë+ 
jevt
->GetDeltaAlpha();

503 
Boﬁ_t
 
ˇ£A
, 
ˇ£B
, 
ˇ£C
, 
ˇ£D
, 
ãrmö©ed
;

504 
ˇ£A
 = 
ˇ£B
 = 
ˇ£C
 = 
ˇ£D
 = 
ãrmö©ed
 = 
kFALSE
;

505 
Flﬂt_t
 
b_Æpha_i
, 
b_Æpha_j
, 
b_Æpha_i_p
, 
b_Æpha_j_p
;

506 c⁄° 
Flﬂt_t
 
b_co°_i
 = 
õvt
->
	`GëCweight
();

507 c⁄° 
Flﬂt_t
 
b_co°_j
 = 
jevt
->
	`GëCweight
();

509 
b_Æpha_i
 = 
õvt
->
	`GëAÕha
();

510 
b_Æpha_j
 = 
jevt
->
	`GëAÕha
();

511 
b_Æpha_i_p
 = 
õvt
->
	`GëAÕha_p
();

512 
b_Æpha_j_p
 = 
jevt
->
	`GëAÕha_p
();

515 
Flﬂt_t
 
dñèfi
 = 
õvt
->
	`GëEº‹Cache
()-
jevt
->GetErrorCache();

518 !
ãrmö©ed
) {

519 c⁄° 
Flﬂt_t
 
nuŒ
 = 0.;

520 
Flﬂt_t
 
low
, 
high
;

521 
Flﬂt_t
 
tmp_Æpha_i
, 
tmp_Æpha_j
;

522 
tmp_Æpha_i
 = 
tmp_Æpha_j
 = 0.;

525 if((
ˇ£A
 =
kFALSE
Ë&& (
b_Æpha_i
 > 0 || (
b_Æpha_i_p
 =0 && 
dñèfi
 > 0)Ë&& (
b_Æpha_j
 > 0 || (
b_Æpha_j_p
 == 0 && deltafi < 0)))

528 
low
 = 
TM©h
::
	`Max
–
nuŒ
, 
gamma
 - 
b_co°_j
 );

529 
high
 = 
TM©h
::
	`Mö
–
b_co°_i
 , 
gamma
);

531 if(
low
<
high
){

532 
tmp_Æpha_j
 = 
b_Æpha_j
 - (
dñèfi
/
ëa
);

533 
tmp_Æpha_j
 = 
TM©h
::
	`Mö
—mp_Æpha_j,
high
 );

534 
tmp_Æpha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

535 
tmp_Æpha_i
 = 
b_Æpha_i
 - (
tmp_Æpha_j
 - 
b_Æpha_j
);

538 if–
	`IsDiffSignifiˇ¡
(
b_Æpha_j
,
tmp_Æpha_j
, 
ïsû⁄
Ë|| IsDiffSignifiˇ¡(
b_Æpha_i
,
tmp_Æpha_i
,Épsilon)){

539 
b_Æpha_j
 = 
tmp_Æpha_j
;

540 
b_Æpha_i
 = 
tmp_Æpha_i
;

545 
ãrmö©ed
 = 
kTRUE
;

547 
ˇ£A
 = 
kTRUE
;

549 if((
ˇ£B
==
kFALSE
Ë&& (
b_Æpha_i
>0 || (
b_Æpha_i_p
==0 && 
dñèfi
 >2*
ïsû⁄
 )Ë&& (
b_Æpha_j_p
>0 || (
b_Æpha_j
==0 && deltafi>2*epsilon)))

552 
low
 = 
TM©h
::
	`Max
–
nuŒ
, 
gamma
 );

553 
high
 = 
TM©h
::
	`Mö
–
b_co°_i
 , 
b_co°_j
 + 
gamma
);

556 if(
low
<
high
){

557 
tmp_Æpha_j
 = 
b_Æpha_j_p
 - ((
dñèfi
-2*
ïsû⁄
)/
ëa
);

558 
tmp_Æpha_j
 = 
TM©h
::
	`Mö
—mp_Æpha_j,
high
);

559 
tmp_Æpha_j
 = 
TM©h
::
	`Max
(
low
,tmp_alpha_j);

560 
tmp_Æpha_i
 = 
b_Æpha_i
 - (
tmp_Æpha_j
 - 
b_Æpha_j_p
);

563 if–
	`IsDiffSignifiˇ¡
(
b_Æpha_j_p
,
tmp_Æpha_j
, 
ïsû⁄
Ë|| IsDiffSignifiˇ¡(
b_Æpha_i
,
tmp_Æpha_i
,Épsilon)){

564 
b_Æpha_j_p
 = 
tmp_Æpha_j
;

565 
b_Æpha_i
 = 
tmp_Æpha_i
;

569 
ãrmö©ed
 = 
kTRUE
;

571 
ˇ£B
 = 
kTRUE
;

573 if((
ˇ£C
==
kFALSE
Ë&& (
b_Æpha_i_p
>0 || (
b_Æpha_i
==0 && 
dñèfi
 < -2*
ïsû⁄
 )Ë&& (
b_Æpha_j
>0 || (
b_Æpha_j_p
==0 && deltafi< -2*epsilon)))

576 
low
 = 
TM©h
::
	`Max
(
nuŒ
, -
gamma
 );

577 
high
 = 
TM©h
::
	`Mö
(
b_co°_i
, -
gamma
+
b_co°_j
);

579 if(
low
<
high
){

580 
tmp_Æpha_j
 = 
b_Æpha_j
 - ((
dñèfi
+2*
ïsû⁄
)/
ëa
);

581 
tmp_Æpha_j
 = 
TM©h
::
	`Mö
—mp_Æpha_j,
high
 );

582 
tmp_Æpha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

583 
tmp_Æpha_i
 = 
b_Æpha_i_p
 - (
tmp_Æpha_j
 - 
b_Æpha_j
);

586 if–
	`IsDiffSignifiˇ¡
(
b_Æpha_j
,
tmp_Æpha_j
, 
ïsû⁄
Ë|| IsDiffSignifiˇ¡(
b_Æpha_i_p
,
tmp_Æpha_i
,Épsilon)){

587 
b_Æpha_j
 = 
tmp_Æpha_j
;

588 
b_Æpha_i_p
 = 
tmp_Æpha_i
;

592 
ãrmö©ed
 = 
kTRUE
;

594 
ˇ£C
 = 
kTRUE
;

596 if((
ˇ£D
 =
kFALSE
) &&

597 (
b_Æpha_i_p
>0 || (
b_Æpha_i
==0 && 
dñèfi
 <0 )) &&

598 (
b_Æpha_j_p
>0 || (
b_Æpha_j
==0 && 
dñèfi
 >0 )))

601 
low
 = 
TM©h
::
	`Max
(
nuŒ
,-
gamma
 - 
b_co°_j
);

602 
high
 = 
TM©h
::
	`Mö
(
b_co°_i
, -
gamma
);

604 if(
low
<
high
){

605 
tmp_Æpha_j
 = 
b_Æpha_j_p
 + (
dñèfi
/
ëa
);

606 
tmp_Æpha_j
 = 
TM©h
::
	`Mö
—mp_Æpha_j,
high
 );

607 
tmp_Æpha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

608 
tmp_Æpha_i
 = 
b_Æpha_i_p
 - (
tmp_Æpha_j
 - 
b_Æpha_j_p
);

610 if–
	`IsDiffSignifiˇ¡
(
b_Æpha_j_p
,
tmp_Æpha_j
, 
ïsû⁄
Ë|| IsDiffSignifiˇ¡(
b_Æpha_i_p
,
tmp_Æpha_i
,Épsilon)){

611 
b_Æpha_j_p
 = 
tmp_Æpha_j
;

612 
b_Æpha_i_p
 = 
tmp_Æpha_i
;

616 
ãrmö©ed
 = 
kTRUE
;

618 
ˇ£D
 = 
kTRUE
;

621 
ãrmö©ed
 = 
kTRUE
;

624 
dñèfi
 +
õvt
->
	`GëDñèAÕha
()*(
kî√l_II
 - 
kî√l_IJ
Ë+ 
jevt
->GëDñèAÕha()*(kî√l_IJ - 
kî√l_JJ
);

626 if–
	`IsDiffSignifiˇ¡
(
b_Æpha_i
, 
õvt
->
	`GëAÕha
(), 
ïsû⁄
) ||

627 
	`IsDiffSignifiˇ¡
(
b_Æpha_j
, 
jevt
->
	`GëAÕha
(), 
ïsû⁄
) ||

628 
	`IsDiffSignifiˇ¡
(
b_Æpha_i_p
, 
õvt
->
	`GëAÕha_p
(), 
ïsû⁄
) ||

629 
	`IsDiffSignifiˇ¡
(
b_Æpha_j_p
, 
jevt
->
	`GëAÕha_p
(), 
ïsû⁄
) ){

633 c⁄° 
Flﬂt_t
 
diff_Æpha_i
 = 
õvt
->
	`GëDñèAÕha
()+
b_Æpha_i_p
 - ievt->
	`GëAÕha
();

634 c⁄° 
Flﬂt_t
 
diff_Æpha_j
 = 
jevt
->
	`GëDñèAÕha
()+
b_Æpha_j_p
 - jevt->
	`GëAÕha
();

637 
I¡_t
 
k
 = 0;

638 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

639 
k
++;

641 if((*
idIãr
)->
	`GëIdx
()==0){

642 
Flﬂt_t
 
k_ii
 = 
fKM©rix
->
	`GëEÀmít
(
õvt
->
	`GëNs
(), (*
idIãr
)->GetNs());

643 
Flﬂt_t
 
k_jj
 = 
fKM©rix
->
	`GëEÀmít
(
jevt
->
	`GëNs
(), (*
idIãr
)->GetNs());

645 (*
idIãr
)->
	`Upd©eEº‹Cache
(
diff_Æpha_i
 * 
k_ii
 + 
diff_Æpha_j
 * 
k_jj
);

650 
õvt
->
	`SëAÕha
(
b_Æpha_i
);

651 
jevt
->
	`SëAÕha
(
b_Æpha_j
);

652 
õvt
->
	`SëAÕha_p
(
b_Æpha_i_p
);

653 
jevt
->
	`SëAÕha_p
(
b_Æpha_j_p
);

659 
fB_low
 = -1*1e30;

660 
fB_up
 =1e30;

662 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

663 if((!(*
idIãr
)->
	`IsInI3
()Ë&& ((*idIãr)->
	`GëEº‹Cache
()> 
fB_low
)){

664 
fB_low
 = (*
idIãr
)->
	`GëEº‹Cache
();

665 
fTEvítLow
 = (*
idIãr
);

668 if((!(*
idIãr
)->
	`IsInI2
()Ë&& ((*idIãr)->
	`GëEº‹Cache
()< 
fB_up
)){

669 
fB_up
 =(*
idIãr
)->
	`GëEº‹Cache
();

670 
fTEvítUp
 = (*
idIãr
);

673  
kTRUE
;

674 }  
kFALSE
;

675 
	}
}

680 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$ExamöeExam∂eReg
(
TMVA
::
SVEvít
* 
jevt
)

682 
Flﬂt_t
 
„ps
 = 1e-7;

683 
SVEvít
* 
õvt
=0;

684 
Flﬂt_t
 
fEº‹C_J
 = 0.;

685 if–
jevt
->
	`IsInI0
()) {

686 
fEº‹C_J
 = 
jevt
->
	`GëEº‹Cache
();

689 
Flﬂt_t
 *
fKVÆs
 = 
jevt
->
	`GëLöe
();

690 
fEº‹C_J
 = 0.;

691 
°d
::
ve˘‹
<
TMVA
::
SVEvít
*>::
ôî©‹
 
idIãr
;

693 
UI¡_t
 
k
=0;

694 
idIãr
 = 
fI≈utD©a
->
	`begö
(); idIã∏!fI≈utD©a->
	`íd
(); idIter++){

695 
fEº‹C_J
 -(*
idIãr
)->
	`GëDñèAÕha
()*
fKVÆs
[
k
];

696 
k
++;

699 
fEº‹C_J
 +
jevt
->
	`GëT¨gë
();

700 
jevt
->
	`SëEº‹Cache
(
fEº‹C_J
);

702 if(
jevt
->
	`IsInI1
()){

703 if(
fEº‹C_J
 + 
„ps
 < 
fB_up
 ){

704 
fB_up
 = 
fEº‹C_J
 + 
„ps
;

705 
fTEvítUp
 = 
jevt
;

707 if(
fEº‹C_J
 -
„ps
 > 
fB_low
) {

708 
fB_low
 = 
fEº‹C_J
 - 
„ps
;

709 
fTEvítLow
 = 
jevt
;

711 }if((
jevt
->
	`IsInI2
()Ë&& (
fEº‹C_J
 + 
„ps
 > 
fB_low
)){

712 
fB_low
 = 
fEº‹C_J
 + 
„ps
;

713 
fTEvítLow
 = 
jevt
;

714 }if((
jevt
->
	`IsInI3
()Ë&& (
fEº‹C_J
 - 
„ps
 < 
fB_up
)){

715 
fB_up
 = 
fEº‹C_J
 - 
„ps
;

716 
fTEvítUp
 = 
jevt
;

720 
Boﬁ_t
 
c⁄vîged
 = 
kTRUE
;

722 if(
jevt
->
	`IsInI0a
()){

723 if–
fB_low
 -
fEº‹C_J
 + 
„ps
 > 2*
fTﬁî™˚
){

724 
c⁄vîged
 = 
kFALSE
;

725 
õvt
 = 
fTEvítLow
;

726 if(
fEº‹C_J
-
„ps
-
fB_up
 > 
fB_low
-fErrorC_J+feps){

727 
õvt
 = 
fTEvítUp
;

729 }if(
fEº‹C_J
 -
„ps
 - 
fB_up
 > 2*
fTﬁî™˚
){

730 
c⁄vîged
 = 
kFALSE
;

731 
õvt
 = 
fTEvítUp
;

732 if(
fB_low
 - 
fEº‹C_J
+
„ps
 > fEº‹C_J-„p†-
fB_up
){

733 
õvt
 = 
fTEvítLow
;

739 if(
jevt
->
	`IsInI0b
()){

740 if–
fB_low
 -
fEº‹C_J
 - 
„ps
 > 2*
fTﬁî™˚
){

741 
c⁄vîged
 = 
kFALSE
;

742 
õvt
 = 
fTEvítLow
;

743 if(
fEº‹C_J
+
„ps
-
fB_up
 > 
fB_low
-fErrorC_J-feps){

744 
õvt
 = 
fTEvítUp
;

746 }if(
fEº‹C_J
 + 
„ps
 - 
fB_up
 > 2*
fTﬁî™˚
){

747 
c⁄vîged
 = 
kFALSE
;

748 
õvt
 = 
fTEvítUp
;

749 if(
fB_low
 - 
fEº‹C_J
-
„ps
 > fEº‹C_J+„p†-
fB_up
){

750 
õvt
 = 
fTEvítLow
;

756 if(
jevt
->
	`IsInI1
()){

757 if–
fB_low
 -
fEº‹C_J
 - 
„ps
 > 2*
fTﬁî™˚
){

758 
c⁄vîged
 = 
kFALSE
;

759 
õvt
 = 
fTEvítLow
;

760 if(
fEº‹C_J
+
„ps
-
fB_up
 > 
fB_low
-fErrorC_J-feps){

761 
õvt
 = 
fTEvítUp
;

763 }if(
fEº‹C_J
 - 
„ps
 - 
fB_up
 > 2*
fTﬁî™˚
){

764 
c⁄vîged
 = 
kFALSE
;

765 
õvt
 = 
fTEvítUp
;

766 if(
fB_low
 - 
fEº‹C_J
+
„ps
 > fEº‹C_J-„p†-
fB_up
){

767 
õvt
 = 
fTEvítLow
;

773 if(
jevt
->
	`IsInI2
()){

774 if–
fEº‹C_J
 + 
„ps
 -
fB_up
 > 2*
fTﬁî™˚
){

775 
c⁄vîged
 = 
kFALSE
;

776 
õvt
 = 
fTEvítUp
;

781 if(
jevt
->
	`IsInI3
()){

782 if(
fB_low
 -
fEº‹C_J
 +
„ps
 > 2*
fTﬁî™˚
){

783 
c⁄vîged
 = 
kFALSE
;

784 
õvt
 = 
fTEvítLow
;

788 if(
c⁄vîged
Ë 
kFALSE
;

789 i‡(
	`TakeSãpReg
(
õvt
, 
jevt
)Ë 
kTRUE
;

790  
kFALSE
;

791 
	}
}

793 
Boﬁ_t
 
	gTMVA
::
SVW‹kögSë
::
	$IsDiffSignifiˇ¡
(
Flﬂt_t
 
a_i
, Flﬂt_à
a_j
, Flﬂt_à
ïs
)

795 if–
TM©h
::
	`Abs
(
a_i
 - 
a_j
Ë> 
ïs
*◊_ò+á_j +Éps)Ë 
kTRUE
;

796  
kFALSE
;

797 
	}
}

	@src/SdivSqrtSplusB.cxx

36 
	~"TM©h.h
"

37 
	~"TMVA/SdivSqπS∂usB.h
"

39 
CœssImp
(
TMVA
::
SdivSqπS∂usB
);

44 
DoubÀ_t
 
	gTMVA
::
SdivSqπS∂usB
::
	$GëSï¨©i⁄Index
–c⁄° 
DoubÀ_t
 
s
, c⁄° DoubÀ_à
b
 )

46 i‡(
s
+
b
 > 0Ë s / 
TM©h
::
	`Sqπ
(s+b);

48 
	}
}

58 
DoubÀ_t
 
	gTMVA
::
SdivSqπS∂usB
::
	$GëSï¨©i⁄Gaö
(c⁄° 
DoubÀ_t
 
nSñS
, c⁄° DoubÀ_à
nSñB
,

59 c⁄° 
DoubÀ_t
 
nTŸS
, c⁄° DoubÀ_à
nTŸB
)

61 i‡–(
nTŸS
-
nSñS
)=ÚSñS && (
nTŸB
-
nSñB
)==nSelB)  0.;

63 
DoubÀ_t
 
∑ª¡Index
 = (
nTŸS
+
nTŸB
Ë*
this
->
	`GëSï¨©i⁄Index
(nTotS,nTotB);

65 
DoubÀ_t
 
À·Index
 = ( ((
nTŸS
 - 
nSñS
Ë+ (
nTŸB
 - 
nSñB
))

66 * 
this
->
	`GëSï¨©i⁄Index
(
nTŸS
-
nSñS
,
nTŸB
-
nSñB
) );

67 
DoubÀ_t
 
rightIndex
 = (
nSñS
+
nSñB
Ë* 
this
->
	`GëSï¨©i⁄Index
(nSelS,nSelB);

70 
DoubÀ_t
 
diff
 = (
∑ª¡Index
 - 
À·Index
 - 
rightIndex
)/(
nTŸS
+
nTŸB
);

72 if(
diff
<
fPªcisi⁄Cut
 ) {

79  
diff
;

80 
	}
}

	@src/SeparationBase.cxx

63 
	~"TMVA/Sï¨©i⁄Ba£.h
"

65 
	~"TM©h.h
"

66 
	~"TSåög.h
"

68 
	~<io°ªam
>

69 
	~<limôs
>

71 
CœssImp
(
TMVA
::
Sï¨©i⁄Ba£
);

76 
	gTMVA
::
Sï¨©i⁄Ba£
::
	$Sï¨©i⁄Ba£
() :

77 
	`fName
(""),

78 
	`fPªcisi⁄Cut
(
TM©h
::
	`Sqπ
(
°d
::
numîic_limôs
<>::
	$ïsû⁄
()))

81 
	}
}

86 
TMVA
::
Sï¨©i⁄Ba£
::
	$Sï¨©i⁄Ba£
–c⁄° 
Sï¨©i⁄Ba£
& 
s
 ) :

87 
	`fName
(
s
.
fName
),

88 
	`fPªcisi⁄Cut
(
TM©h
::
	`Sqπ
(
°d
::
numîic_limôs
<>::
	$ïsû⁄
()))

91 
	}
}

101 
DoubÀ_t
 
TMVA
::
Sï¨©i⁄Ba£
::
	$GëSï¨©i⁄Gaö
(c⁄° 
DoubÀ_t
 
nSñS
, c⁄° DoubÀ_à
nSñB
,

102 c⁄° 
DoubÀ_t
 
nTŸS
, c⁄° DoubÀ_à
nTŸB
)

104 i‡–(
nTŸS
-
nSñS
)=ÚSñS && (
nTŸB
-
nSñB
)==nSelB)  0.;

113 
DoubÀ_t
 
∑ª¡Index
 = 
this
->
	`GëSï¨©i⁄Index
(
nTŸS
,
nTŸB
);

115 
DoubÀ_t
 
À·Index
 = ( ((
nTŸS
 - 
nSñS
Ë+ (
nTŸB
 - 
nSñB
))/(nTotS+nTotB)

116 * 
this
->
	`GëSï¨©i⁄Index
(
nTŸS
-
nSñS
,
nTŸB
-
nSñB
) );

117 
DoubÀ_t
 
rightIndex
 = (
nSñS
+
nSñB
)/(
nTŸS
+
nTŸB
Ë* 
this
->
	`GëSï¨©i⁄Index
(nSelS,nSelB);

119 
DoubÀ_t
 
diff
 = 
∑ª¡Index
 - 
À·Index
 - 
rightIndex
;

122 if(
diff
<
fPªcisi⁄Cut
 ) {

129  
diff
;

130 
	}
}

	@src/SimulatedAnnealing.cxx

33 
	~"TMVA/SimuœãdA¬ólög.h
"

35 
	~"TMVA/IFôãrT¨gë.h
"

36 
	~"TMVA/I¡îvÆ.h
"

37 
	~"TMVA/GíëicR™ge.h
"

38 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/Timî.h
"

40 
	~"TMVA/Ty≥s.h
"

42 
	~"TR™dom3.h
"

43 
	~"TM©h.h
"

45 
CœssImp
(
TMVA
::
SimuœãdA¬ólög
);

50 
	gTMVA
::
SimuœãdA¬ólög
::SimuœãdA¬ólög–
IFôãrT¨gë
& 
èrgë
, c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*>& 
ønges
 )

51 : 
fKî√lTem≥øtuª
 (
kIn¸ósögAd≠tive
),

52 
fFôãrT¨gë
 ( 
èrgë
 ),

53 
fR™dom
 ( 
√w
 
TR™dom3
(100) ),

54 
fR™ges
 ( 
ønges
 ),

55 
fMaxCÆls
 ( 500000 ),

56 
fInôülTem≥øtuª
 ( 1000 ),

57 
fMöTem≥øtuª
 ( 0 ),

58 
fEps
 ( 1e-10 ),

59 
fTem≥øtuªSˇÀ
 ( 0.06 ),

60 
fAd≠tiveS≥ed
 ( 1.0 ),

61 
fTem≥øtuªAd≠tiveSãp
( 0.0 ),

62 
fU£DeÁu…SˇÀ
 ( 
kFALSE
 ),

63 
fU£DeÁu…Tem≥øtuª
 ( 
kFALSE
 ),

64 
fLoggî
–
√w
 
MsgLoggî
("SimulatedAnnealing") ),

65 
	$fProgªss
(0.0)

67 
fKî√lTem≥øtuª
 = 
kIn¸ósögAd≠tive
;

68 
	}
}

73 
	gTMVA
::
SimuœãdA¬ólög
::
	$SëO±i⁄s
–
I¡_t
 
maxCÆls
,

74 
DoubÀ_t
 
öôülTem≥øtuª
,

75 
DoubÀ_t
 
möTem≥øtuª
,

76 
DoubÀ_t
 
ïs
,

77 
TSåög
 
kî√lTem≥øtuªS
,

78 
DoubÀ_t
 
ãm≥øtuªSˇÀ
,

79 
DoubÀ_t
 
ad≠tiveS≥ed
,

80 
DoubÀ_t
 
ãm≥øtuªAd≠tiveSãp
,

81 
Boﬁ_t
 
u£DeÁu…SˇÀ
,

82 
Boﬁ_t
 
u£DeÁu…Tem≥øtuª
)

84 
fMaxCÆls
 = 
maxCÆls
;

85 
fInôülTem≥øtuª
 = 
öôülTem≥øtuª
;

86 
fMöTem≥øtuª
 = 
möTem≥øtuª
;

87 
fEps
 = 
ïs
;

89 i‡(
kî√lTem≥øtuªS
 == "IncreasingAdaptive") {

90 
fKî√lTem≥øtuª
 = 
kIn¸ósögAd≠tive
;

91 
	`Log
(Ë<< 
kINFO
 << "Usög in¸ósögád≠tivêÆg‹ôhm" << 
Endl
;

93 i‡(
kî√lTem≥øtuªS
 == "DecreasingAdaptive") {

94 
fKî√lTem≥øtuª
 = 
kDe¸ósögAd≠tive
;

95 
	`Log
(Ë<< 
kINFO
 << "Usög de¸ósögád≠tivêÆg‹ôhm" << 
Endl
;

97 i‡(
kî√lTem≥øtuªS
 == "Sqrt") {

98 
fKî√lTem≥øtuª
 = 
kSqπ
;

99 
	`Log
(Ë<< 
kINFO
 << "Usög \"Sqπ\"álg‹ôhm" << 
Endl
;

101 i‡(
kî√lTem≥øtuªS
 == "Homo") {

102 
fKî√lTem≥øtuª
 = 
kHomo
;

103 
	`Log
(Ë<< 
kINFO
 << "Usög \"Homo\"álg‹ôhm" << 
Endl
;

105 i‡(
kî√lTem≥øtuªS
 == "Log") {

106 
fKî√lTem≥øtuª
 = 
kLog
;

107 
	`Log
(Ë<< 
kINFO
 << "Usög \"Log\"álg‹ôhm" << 
Endl
;

109 i‡(
kî√lTem≥øtuªS
 == "Sin") {

110 
fKî√lTem≥øtuª
 = 
kSö
;

111 
	`Log
(Ë<< 
kINFO
 << "Usög \"Sö\"álg‹ôhm" << 
Endl
;

114 
fTem≥øtuªSˇÀ
 = 
ãm≥øtuªSˇÀ
;

115 
fAd≠tiveS≥ed
 = 
ad≠tiveS≥ed
;

116 
fTem≥øtuªAd≠tiveSãp
 = 
ãm≥øtuªAd≠tiveSãp
;

118 
fU£DeÁu…SˇÀ
 = 
u£DeÁu…SˇÀ
;

119 
fU£DeÁu…Tem≥øtuª
 = 
u£DeÁu…Tem≥øtuª
;

120 
	}
}

125 
	gTMVA
::
SimuœãdA¬ólög
::~
	$SimuœãdA¬ólög
()

127 
	}
}

132 
TMVA
::
SimuœãdA¬ólög
::
FûlWôhR™domVÆues
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑ømëîs
 )

134 
UI¡_t
 
rIãr
 = 0; 
	grIãr
 < 
	g∑ømëîs
.
size
();ÑIter++) {

135 
	g∑ømëîs
[
rIãr
] = 
fR™dom
->
Unif‹m
(0.0,1.0)*(
	gfR™ges
[rIãr]->
GëMax
(Ë- fR™ges[rIãr]->
GëMö
()) + fRanges[rIter]->GetMin();

142 
	gTMVA
::
SimuœãdA¬ólög
::
ReWrôeP¨amëîs
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
‰om
, std::ve˘‹<DoubÀ_t>& 
to
)

144 
UI¡_t
 
rIãr
 = 0; 
	grIãr
 < 
	g‰om
.
size
();ÑIãr++Ë
	gto
[rIãr] = 
‰om
[rIter];

150 
	gTMVA
::
SimuœãdA¬ólög
::
Gíî©eNeighbour
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
∑ømëîs
, std::ve˘‹<DoubÀ_t>& 
ﬁdP¨amëîs
,

151 
DoubÀ_t
 
cuºítTem≥øtuª
 )

153 
ReWrôeP¨amëîs
–
∑ømëîs
, 
ﬁdP¨amëîs
 );

155 
UI¡_t
 
	grIãr
=0;rIãr<
	g∑ømëîs
.
size
();rIter++) {

156 
DoubÀ_t
 
	guni
,
	gdi°ributi⁄
,
	gsign
;

158 
	guni
 = 
fR™dom
->
Unif‹m
(0.0,1.0);

159 
	gsign
 = (
uni
 - 0.5 >= 0.0) ? (1.0) : (-1.0);

160 
	gdi°ributi⁄
 = 
cuºítTem≥øtuª
 * (
TM©h
::
Powî
(1.0 + 1.0/cuºítTem≥øtuª, TM©h::
Abs
(2.0*
uni
 - 1.0)Ë-1.0)*
sign
;

161 
	g∑ømëîs
[
rIãr
] = 
ﬁdP¨amëîs
[rIãr] + (
fR™ges
[rIãr]->
GëMax
()-fR™ges[rIãr]->
GëMö
())*0.1*
di°ributi⁄
;

163 
	g∑ømëîs
[
rIãr
] < 
	gfR™ges
[rIãr]->
GëMö
(Ë||Ö¨amëîs[rIãr] > fR™ges[rIãr]->
GëMax
() );

169 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
SimuœãdA¬ólög
::
Gíî©eNeighbour
–
°d
::ve˘‹<DoubÀ_t>& 
∑ømëîs
, DoubÀ_à
cuºítTem≥øtuª
 )

171 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
√wP¨amëîs
–
fR™ges
.
size
() );

173 
UI¡_t
 
	grIãr
=0;ÑIãr<
	g∑ømëîs
.
size
();ÑIter++) {

174 
DoubÀ_t
 
	guni
,
	gdi°ributi⁄
,
	gsign
;

176 
	guni
 = 
fR™dom
->
Unif‹m
(0.0,1.0);

177 
	gsign
 = (
uni
 - 0.5 >= 0.0) ? (1.0) : (-1.0);

178 
	gdi°ributi⁄
 = 
cuºítTem≥øtuª
 * (
TM©h
::
Powî
(1.0 + 1.0/cuºítTem≥øtuª, TM©h::
Abs
(2.0*
uni
 - 1.0)Ë-1.0)*
sign
;

179 
	g√wP¨amëîs
[
rIãr
] = 
∑ømëîs
[rIãr] + (
fR™ges
[rIãr]->
GëMax
()-fR™ges[rIãr]->
GëMö
())*0.1*
di°ributi⁄
;

181 
	g√wP¨amëîs
[
rIãr
] < 
	gfR™ges
[rIãr]->
GëMö
(Ë||ÇewP¨amëîs[rIãr] > fR™ges[rIãr]->
GëMax
() );

184  
	g√wP¨amëîs
;

190 
	gTMVA
::
SimuœãdA¬ólög
::
	$Gíî©eNewTem≥øtuª
–
DoubÀ_t
& 
cuºítTem≥øtuª
, 
I¡_t
 
Iãr
 )

192 i‡(
fKî√lTem≥øtuª
 =
kSqπ
) {

193 
cuºítTem≥øtuª
 = 
fInôülTem≥øtuª
/(
DoubÀ_t
)
TM©h
::
	`Sqπ
(
Iãr
+2Ë* 
fTem≥øtuªSˇÀ
;

195 i‡(
fKî√lTem≥øtuª
 =
kLog
) {

196 
cuºítTem≥øtuª
 = 
fInôülTem≥øtuª
/(
DoubÀ_t
)
TM©h
::
	`Log
(
Iãr
+2Ë* 
fTem≥øtuªSˇÀ
;

198 i‡(
fKî√lTem≥øtuª
 =
kHomo
) {

199 
cuºítTem≥øtuª
 = 
fInôülTem≥øtuª
/(
DoubÀ_t
)(
Iãr
+2Ë* 
fTem≥øtuªSˇÀ
;

201 i‡(
fKî√lTem≥øtuª
 =
kSö
) {

202 
cuºítTem≥øtuª
 = (
TM©h
::
	`Sö
–(
DoubÀ_t
)
Iãr
 / 
fTem≥øtuªSˇÀ
 ) + 1.0 )/ (DoubÀ_t)(Iãr+1.0Ë* 
fInôülTem≥øtuª
 + 
fEps
;

204 i‡(
fKî√lTem≥øtuª
 =
kGeo
) {

205 
cuºítTem≥øtuª
 = cuºítTem≥øtuª*
fTem≥øtuªSˇÀ
;

207 i‡(
fKî√lTem≥øtuª
 =
kIn¸ósögAd≠tive
) {

208 
cuºítTem≥øtuª
 = 
fMöTem≥øtuª
 + 
fTem≥øtuªSˇÀ
*
TM©h
::
	`Log
(1.0+
fProgªss
*
fAd≠tiveS≥ed
);

210 i‡(
fKî√lTem≥øtuª
 =
kDe¸ósögAd≠tive
) {

211 
cuºítTem≥øtuª
 = cuºítTem≥øtuª*
fTem≥øtuªSˇÀ
;

213 
	`Log
(Ë<< 
kFATAL
 << "Nÿsuch kî√l!" << 
Endl
;

214 
	}
}

219 
Boﬁ_t
 
	gTMVA
::
SimuœãdA¬ólög
::
	$ShouldGoIn
–
DoubÀ_t
 
cuºítFô
, DoubÀ_à
loˇlFô
, DoubÀ_à
cuºítTem≥øtuª
 )

221 i‡(
cuºítTem≥øtuª
 < 
fEps
Ë 
kFALSE
;

222 
DoubÀ_t
 
lim
 = 
TM©h
::
	`Exp
–-TM©h::
	`Abs
–
cuºítFô
 - 
loˇlFô
 ) / 
cuºítTem≥øtuª
 );

223 
DoubÀ_t
 
¥ob
 = 
fR™dom
->
	`Unif‹m
(0.0, 1.0);

224  (
¥ob
 < 
lim
Ë? 
kTRUE
 : 
kFALSE
;

225 
	}
}

230 
	gTMVA
::
SimuœãdA¬ólög
::
	$SëDeÁu…SˇÀ
()

232 i‡(
fKî√lTem≥øtuª
 =
kSqπ
Ë
fTem≥øtuªSˇÀ
 = 1.0;

233 i‡(
fKî√lTem≥øtuª
 =
kLog
Ë
fTem≥øtuªSˇÀ
 = 1.0;

234 i‡(
fKî√lTem≥øtuª
 =
kHomo
Ë
fTem≥øtuªSˇÀ
 = 1.0;

235 i‡(
fKî√lTem≥øtuª
 =
kSö
Ë
fTem≥øtuªSˇÀ
 = 20.0;

236 i‡(
fKî√lTem≥øtuª
 =
kGeo
Ë
fTem≥øtuªSˇÀ
 = 0.99997;

237 i‡(
fKî√lTem≥øtuª
 =
kDe¸ósögAd≠tive
) {

238 
fTem≥øtuªSˇÀ
 = 1.0;

239 
TM©h
::
	`Abs
(TM©h::
	`Powî
(
fTem≥øtuªSˇÀ
,
fMaxCÆls
Ë* 
fInôülTem≥øtuª
 - 
fMöTem≥øtuª
) >

240 
TM©h
::
	`Abs
(TM©h::
	`Powî
(
fTem≥øtuªSˇÀ
-0.000001,
fMaxCÆls
Ë* 
fInôülTem≥øtuª
 - 
fMöTem≥øtuª
)) {

241 
fTem≥øtuªSˇÀ
 -= 0.000001;

244 i‡(
fKî√lTem≥øtuª
 =
kIn¸ósögAd≠tive
Ë
fTem≥øtuªSˇÀ
 = 0.15*–1.0 / (
DoubÀ_t
)(
fR™ges
.
	`size
() ) );

245 
	`Log
(Ë<< 
kFATAL
 << "Nÿsuch kî√l!" << 
Endl
;

246 
	}
}

251 
DoubÀ_t
 
	gTMVA
::
SimuœãdA¬ólög
::
Gíî©eMaxTem≥øtuª
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑ømëîs
 )

253 
I¡_t
 
equûibrium
;

254 
Boﬁ_t
 
	g°›≥r
 = 0;

255 
DoubÀ_t
 
	gt
, 
	gdT
, 
	gcﬁd
, 
	gdñè
, 
	gdñèY
, 
	gy
, 
	gyNew
, 
	gyBe°
, 
	gyOld
;

256 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
x
–
fR™ges
.
size
(Ë), 
xNew
–fR™ges.size(Ë), 
xBe°
–fR™ges.size(Ë), 
xOld
( fRanges.size() );

257 
	gt
 = 
fMöTem≥øtuª
;

258 
	gdñèY
 = 
cﬁd
 = 0.0;

259 
	gdT
 = 
fTem≥øtuªAd≠tiveSãp
;

260 
UI¡_t
 
	grIãr
 = 0;ÑIã∏< 
	gx
.
size
();ÑIter++)

261 
	gx
[
rIãr
] = ( 
fR™ges
[rIãr]->
GëMax
(Ë+ fR™ges[rIãr]->
GëMö
() ) / 2.0;

262 
	gy
 = 
yBe°
 = 1E10;

263 
I¡_t
 
	gi
=0; i<
	gfMaxCÆls
/50; i++) {

264 i‡((
	gi
>0Ë&& (
	gdñèY
>0.0)) {

265 
	gcﬁd
 = 
dñèY
;

266 
	g°›≥r
 = 1;

268 
	gt
 +
dT
*
i
;

269 
	gx
 = 
xOld
 = 
Gíî©eNeighbour
(
x
,
t
);

270 
	gy
 = 
yOld
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
xOld
 );

271 
	gequûibrium
 = 0;

272  
I¡_t
 
	gk
=0; (k<30Ë&& (
	gequûibrium
<=12); k++ ) {

273 
	gxNew
 = 
Gíî©eNeighbour
(
x
,
t
);

275 
	gyNew
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
xNew
 );

276 
	gdñèY
 = 
yNew
 - 
y
;

277 i‡(
	gdñèY
 < 0.0) {

278 
	g°d
::
sw≠
(
x
,
xNew
);

279 
	g°d
::
sw≠
(
y
,
yNew
);

280 i‡(
	gy
 < 
	gyBe°
) {

281 
	gxBe°
 = 
x
;

282 
	gyBe°
 = 
y
;

284 
	gdñè
 = 
TM©h
::
Abs
–
dñèY
 );

285 i‡(
	gy
 !0.0Ë
dñè
 /
y
;

286 i‡(
	gyNew
 !0.0Ë
dñè
 /
y
;

289 i‡(
	gdñè
 < 0.1Ë
	gequûibrium
++;

290 
	gequûibrium
 = 0;

292 
	gequûibrium
++;

296 
	gyNew
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
xNew
 );

297 
	gdñèY
 = 
yNew
 - 
yOld
;

298 i‡–(
	gdñèY
 < 0.0 )&&–
	gyNew
 < 
	gyBe°
)) {

299 
	gxBe°
=
x
;

300 
	gyBe°
 = 
yNew
;

302 
	gy
 = 
yNew
;

303 i‡((
	g°›≥r
Ë&& (
	gdñèY
 >(100.0 * 
cﬁd
))) ;

305 
	g∑ømëîs
 = 
xBe°
;

306  
	gt
;

312 
DoubÀ_t
 
	gTMVA
::
SimuœãdA¬ólög
::
Möimize
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑ømëîs
 )

314 
°d
::
ve˘‹
<
DoubÀ_t
> 
be°P¨amëîs
(
fR™ges
.
size
());

315 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
ﬁdP¨amëîs
 (
fR™ges
.
size
());

317 
DoubÀ_t
 
	gcuºítTem≥øtuª
, 
	gbe°Fô
, 
	gcuºítFô
;

318 
I¡_t
 
	g›timizeCÆls
, 
	ggíîÆCÆls
, 
	gequÆs
;

320 
	gequÆs
 = 0;

322 i‡(
	gfU£DeÁu…Tem≥øtuª
) {

323 i‡(
	gfKî√lTem≥øtuª
 =
kIn¸ósögAd≠tive
) {

324 
fMöTem≥øtuª
 = 
cuºítTem≥øtuª
 = 1e-06;

325 
FûlWôhR™domVÆues
–
∑ømëîs
 );

327 
	gfInôülTem≥øtuª
 = 
cuºítTem≥øtuª
 = 
Gíî©eMaxTem≥øtuª
–
∑ømëîs
 );

330 i‡(
	gfKî√lTem≥øtuª
 =
kIn¸ósögAd≠tive
)

331 
cuºítTem≥øtuª
 = 
fMöTem≥øtuª
;

333 
	gcuºítTem≥øtuª
 = 
fInôülTem≥øtuª
;

334 
FûlWôhR™domVÆues
–
∑ømëîs
 );

337 i‡(
	gfU£DeÁu…SˇÀ
Ë
SëDeÁu…SˇÀ
();

339 
Log
(Ë<< 
	gkINFO


340 << "Tem≥øtu∏sˇÀ = " << 
	gfTem≥øtuªSˇÀ


341 << ", cuºíàãm≥øtuª = " << 
	gcuºítTem≥øtuª
 << 
	gEndl
;

343 
	gbe°P¨amëîs
 = 
∑ømëîs
;

344 
	gbe°Fô
 = 
cuºítFô
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
be°P¨amëîs
 );

346 
	g›timizeCÆls
 = 
fMaxCÆls
/100;

347 
	ggíîÆCÆls
 = 
fMaxCÆls
 - 
›timizeCÆls
;

348 
	gfProgªss
 = 0.0;

350 
Timî
 
timî
–
fMaxCÆls
, 
fLoggî
->
GëSour˚
().
c_°r
() );

352 
I¡_t
 
	gßm∂e
 = 0; sam∂ê< 
	ggíîÆCÆls
; sample++) {

353 i‡(
	gfIPyCuºítIãr
Ë*fIPyCuºítIã∏
ßm∂e
;

354 i‡(
	gfExôFromTøöög
 && *fExitFromTraining) ;

355 
Gíî©eNeighbour
–
∑ømëîs
, 
ﬁdP¨amëîs
, 
cuºítTem≥øtuª
 );

356 
DoubÀ_t
 
	gloˇlFô
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
∑ømëîs
 );

358 i‡(
	gloˇlFô
 < 
	gcuºítFô
 || 
	gTM©h
::
Abs
(
cuºítFô
-
loˇlFô
Ë< 
fEps
) {

359 i‡(
TM©h
::
Abs
(
cuºítFô
-
loˇlFô
Ë< 
fEps
) {

360 
equÆs
++;

361 i‡(
	gequÆs
 >= 3)

362 
fProgªss
+=1.0;

365 
	gfProgªss
 = 0.0;

366 
	gequÆs
 = 0;

369 
	gcuºítFô
 = 
loˇlFô
;

371 i‡(
	gcuºítFô
 < 
	gbe°Fô
) {

372 
ReWrôeP¨amëîs
–
∑ømëîs
, 
be°P¨amëîs
 );

373 
	gbe°Fô
 = 
cuºítFô
;

377 i‡(!
ShouldGoIn
(
loˇlFô
, 
cuºítFô
, 
cuºítTem≥øtuª
))

378 
ReWrôeP¨amëîs
–
ﬁdP¨amëîs
, 
∑ømëîs
 );

380 
	gcuºítFô
 = 
loˇlFô
;

382 
	gfProgªss
+=1.0;

383 
	gequÆs
 = 0;

386 
Gíî©eNewTem≥øtuª
–
cuºítTem≥øtuª
, 
ßm∂e
 );

388 i‡((
	gfMaxCÆls
<100Ë|| 
	gßm∂e
%
I¡_t
(
fMaxCÆls
/100.0Ë=0Ë
timî
.
DøwProgªssB¨
–
ßm∂e
 );

392 
Log
(Ë<< 
	gkINFO
 << "Eœp£dÅime: " << 
	gtimî
.
GëEœp£dTime
()

393 << " " << 
	gEndl
;

397 
DoubÀ_t
 
	g°¨tögTem≥øtuª
 = 
fMöTem≥øtuª
*(
fR™ges
.
size
())*2.0;

398 
	gcuºítTem≥øtuª
 = 
°¨tögTem≥øtuª
;

400 
I¡_t
 
	gch™ges
 = 0;

401 
I¡_t
 
	gßm∂e
=0;ßm∂e<
	g›timizeCÆls
;sample++) {

402 
Gíî©eNeighbour
–
∑ømëîs
, 
ﬁdP¨amëîs
, 
cuºítTem≥øtuª
 );

403 
DoubÀ_t
 
	gloˇlFô
 = 
fFôãrT¨gë
.
E°im©‹Fun˘i⁄
–
∑ømëîs
 );

405 i‡(
	gloˇlFô
 < 
	gcuºítFô
) {

406 
	gcuºítFô
 = 
loˇlFô
;

407 
	gch™ges
++;

409 i‡(
	gcuºítFô
 < 
	gbe°Fô
) {

410 
ReWrôeP¨amëîs
–
∑ømëîs
, 
be°P¨amëîs
 );

411 
	gbe°Fô
 = 
cuºítFô
;

414 
ReWrôeP¨amëîs
–
ﬁdP¨amëîs
, 
∑ømëîs
 );

416 
	gcuºítTem≥øtuª
-=(
°¨tögTem≥øtuª
 - 
fEps
)/
›timizeCÆls
;

419 
ReWrôeP¨amëîs
–
be°P¨amëîs
, 
∑ømëîs
 );

421  
	gbe°Fô
;

	@src/SimulatedAnnealingFitter.cxx

34 
	~"TMVA/SimuœãdA¬ólögFôãr.h
"

36 
	~"TMVA/C⁄figuøbÀ.h
"

37 
	~"TMVA/FôãrBa£.h
"

38 
	~"TMVA/I¡îvÆ.h
"

39 
	~"TMVA/MsgLoggî.h
"

40 
	~"TMVA/SimuœãdA¬ólög.h
"

41 
	~"TMVA/Ty≥s.h
"

43 
	~"Rty≥s.h
"

44 
	~"TSåög.h
"

46 
CœssImp
(
TMVA
::
SimuœãdA¬ólögFôãr
);

51 
	gTMVA
::
SimuœãdA¬ólögFôãr
::SimuœãdA¬ólögFôãr–
IFôãrT¨gë
& 
èrgë
,

52 c⁄° 
TSåög
& 
«me
,

53 c⁄° 
°d
::
ve˘‹
<
I¡îvÆ
*>& 
ønges
,

54 c⁄° 
TSåög
& 
theO±i⁄
 )

55 : 
TMVA
::
	$FôãrBa£
–
èrgë
, 
«me
, 
ønges
, 
theO±i⁄
 )

58 
	`De˛¨eO±i⁄s
();

59 
	`P¨£O±i⁄s
();

60 
	}
}

74 
	gTMVA
::
SimuœãdA¬ólögFôãr
::
	$De˛¨eO±i⁄s
()

78 
fMaxCÆls
 = 100000;

79 
fInôülTem≥øtuª
 = 1e+6;

80 
fMöTem≥øtuª
 = 1e-6;

81 
fEps
 = 1e-10;

82 
fTem≥øtuªSˇÀ
 = 1.0;

83 
fAd≠tiveS≥ed
 = 1.0;

84 
fTem≥øtuªAd≠tiveSãp
 = 0.009875;

85 
fKî√lTem≥øtuªS
 = "IncAdaptive";

86 
fU£DeÁu…SˇÀ
 = 
kFALSE
;

87 
fU£DeÁu…Tem≥øtuª
 = 
kFALSE
;

89 
	`De˛¨eO±i⁄Ref
(
fMaxCÆls
, "MaxCalls", "MaximumÇumber of minimisation calls");

90 
	`De˛¨eO±i⁄Ref
(
fInôülTem≥øtuª
, "InitialTemp", "InitialÅemperature");

91 
	`De˛¨eO±i⁄Ref
(
fMöTem≥øtuª
, "MinTemp", "MinimumÅemperature");

92 
	`De˛¨eO±i⁄Ref
(
fEps
, "Eps", "Epsilon");

93 
	`De˛¨eO±i⁄Ref
(
fTem≥øtuªSˇÀ
, "TempScale", "Temperature scale");

94 
	`De˛¨eO±i⁄Ref
(
fAd≠tiveS≥ed
, "AdaptiveSpeed", "Adaptive speed");

95 
	`De˛¨eO±i⁄Ref
(
fTem≥øtuªAd≠tiveSãp
,"TempAdaptiveStep", "Step made inÉach generationÅemperatureádaptive");

96 
	`De˛¨eO±i⁄Ref
(
fU£DeÁu…SˇÀ
, "UseDefaultScale", "Use defaultÅemperature scale forÅemperature minimisationálgorithm");

97 
	`De˛¨eO±i⁄Ref
(
fU£DeÁu…Tem≥øtuª
, "UseDefaultTemp", "Use default initialÅemperature");

99 
	`De˛¨eO±i⁄Ref
(
fKî√lTem≥øtuªS
, "KernelTemp", "Temperature minimisationálgorithm");

100 
	`AddPªDefVÆ
(
	`TSåög
("IncAdaptive"));

101 
	`AddPªDefVÆ
(
	`TSåög
("DecAdaptive"));

102 
	`AddPªDefVÆ
(
	`TSåög
("Sqrt"));

103 
	`AddPªDefVÆ
(
	`TSåög
("Log"));

104 
	`AddPªDefVÆ
(
	`TSåög
("Sin"));

105 
	`AddPªDefVÆ
(
	`TSåög
("Homo"));

106 
	`AddPªDefVÆ
(
	`TSåög
("Geo"));

107 
	}
}

112 
	gTMVA
::
SimuœãdA¬ólögFôãr
::
	$SëP¨amëîs
–
I¡_t
 
maxCÆls
,

113 
DoubÀ_t
 
öôülTem≥øtuª
,

114 
DoubÀ_t
 
möTem≥øtuª
,

115 
DoubÀ_t
 
ïs
,

116 
TSåög
 
kî√lTem≥øtuªS
,

117 
DoubÀ_t
 
ãm≥øtuªSˇÀ
,

118 
DoubÀ_t
 
ãm≥øtuªAd≠tiveSãp
,

119 
Boﬁ_t
 
u£DeÁu…SˇÀ
,

120 
Boﬁ_t
 
u£DeÁu…Tem≥øtuª
)

122 
fMaxCÆls
 = 
maxCÆls
;

123 
fInôülTem≥øtuª
 = 
öôülTem≥øtuª
;

124 
fMöTem≥øtuª
 = 
möTem≥øtuª
;

125 
fEps
 = 
ïs
;

126 
fKî√lTem≥øtuªS
 = 
kî√lTem≥øtuªS
;

127 
fTem≥øtuªSˇÀ
 = 
ãm≥øtuªSˇÀ
;

128 
fTem≥øtuªAd≠tiveSãp
 = 
ãm≥øtuªAd≠tiveSãp
;

129 
fU£DeÁu…SˇÀ
 = 
u£DeÁu…SˇÀ
;

130 
fU£DeÁu…Tem≥øtuª
 = 
u£DeÁu…Tem≥øtuª
;

131 
	}
}

136 
DoubÀ_t
 
	gTMVA
::
SimuœãdA¬ólögFôãr
::
Run
–
°d
::
ve˘‹
<DoubÀ_t>& 
∑rs
 )

138 
Log
(Ë<< 
kHEADER
 << "<SimuœãdA¬ólögFôãr> O±imißti⁄,ÖÀa£ bê∑tõ¡ ... " << 
Endl
;

139 
Log
(Ë<< 
	gkINFO
 << "’rogªs†timög may bêöaccuøã f‹ SA)" << 
	gEndl
;

141 
SimuœãdA¬ólög
 
ß
–
GëFôãrT¨gë
(), 
fR™ges
 );

144 
	gß
.
SëO±i⁄s
–
fMaxCÆls
, 
fInôülTem≥øtuª
, 
fMöTem≥øtuª
, 
fEps
, 
fKî√lTem≥øtuªS
,

145 
fTem≥øtuªSˇÀ
, 
fAd≠tiveS≥ed
, 
fTem≥øtuªAd≠tiveSãp
,

146 
fU£DeÁu…SˇÀ
, 
fU£DeÁu…Tem≥øtuª
 );

148 i‡(
	gfIPyMaxIãr
){

149 *
	gfIPyMaxIãr
 = 
fMaxCÆls
;

150 
	gß
.
SëIPyth⁄I¡îa˘ive
(
fExôFromTøöög
, 
fIPyCuºítIãr
);

153 
DoubÀ_t
 
	gf˙
 = 
ß
.
Möimize
–
∑rs
 );

155  
	gf˙
;

	@src/TActivation.cxx

28 
	~"TMVA/TA˘iv©i⁄.h
"

30 
	~"Rty≥s.h
"

32 
CœssImp
(
TMVA
::
TA˘iv©i⁄
);

	@src/TActivationChooser.cxx

29 
	~"TMVA/TA˘iv©i⁄Choo£r.h
"

31 
	~<ve˘‹
>

32 
	~"TSåög.h
"

34 
	~"TMVA/TA˘iv©i⁄.h
"

35 
	~"TMVA/TA˘iv©i⁄Idítôy.h
"

36 
	~"TMVA/TA˘iv©i⁄Sigmoid.h
"

37 
	~"TMVA/TA˘iv©i⁄T™h.h
"

38 
	~"TMVA/TA˘iv©i⁄ReLU.h
"

39 
	~"TMVA/TA˘iv©i⁄Radül.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/Ty≥s.h
"

47 
	gTMVA
::
TA˘iv©i⁄Choo£r
::
	$TA˘iv©i⁄Choo£r
() :

48 
	`fLINEAR
("linear"),

49 
	`fSIGMOID
("sigmoid"),

50 
	`fTANH
("tanh"),

51 
	`fRELU
("ReLU"),

52 
	`fRADIAL
("radial"),

53 
	`fLoggî
–
√w
 
	`MsgLoggî
("TActivationChooser") )

55 
	}
}

60 
	gTMVA
::
TA˘iv©i⁄Choo£r
::~
	$TA˘iv©i⁄Choo£r
()

62 
dñëe
 
fLoggî
;

63 
	}
}

69 
	gTMVA
::
TA˘iv©i⁄
*

70 
TMVA
::
TA˘iv©i⁄Choo£r
::
	$Cª©eA˘iv©i⁄
(
EA˘iv©i⁄Ty≥
 
ty≥
) const

72 
ty≥
) {

73 
kLöór
:  
√w
 
	`TA˘iv©i⁄Idítôy
();

74 
kSigmoid
:  
√w
 
	`TA˘iv©i⁄Sigmoid
();

75 
kT™h
:  
√w
 
	`TA˘iv©i⁄T™h
();

76 
kReLU
:  
√w
 
	`TA˘iv©i⁄ReLU
();

77 
kRadül
:  
√w
 
	`TA˘iv©i⁄Radül
();

79 
	`Log
(Ë<< 
kFATAL
 << "nÿA˘iv©i⁄ fun˘i⁄ o‡ty≥ " << 
ty≥
 << " found" << 
Endl
;

82  
NULL
;

83 
	}
}

89 
	gTMVA
::
TA˘iv©i⁄
*

90 
TMVA
::
TA˘iv©i⁄Choo£r
::
	$Cª©eA˘iv©i⁄
(c⁄° 
TSåög
& 
ty≥
) const

92 i‡(
ty≥
 =
fLINEAR
Ë 
	`Cª©eA˘iv©i⁄
(
kLöór
);

93 i‡(
ty≥
 =
fSIGMOID
Ë 
	`Cª©eA˘iv©i⁄
(
kSigmoid
);

94 i‡(
ty≥
 =
fTANH
Ë 
	`Cª©eA˘iv©i⁄
(
kT™h
);

95 i‡(
ty≥
 =
fRELU
Ë 
	`Cª©eA˘iv©i⁄
(
kReLU
);

96 i‡(
ty≥
 =
fRADIAL
Ë 
	`Cª©eA˘iv©i⁄
(
kRadül
);

98 
	`Log
(Ë<< 
kFATAL
 << "nÿA˘iv©i⁄ fun˘i⁄ o‡ty≥ " << 
ty≥
 << " found" << 
Endl
;

101 
	}
}

106 
	g°d
::
ve˘‹
<
TSåög
>*

107 
TMVA
::
TA˘iv©i⁄Choo£r
::
	$GëAŒA˘iv©i⁄Names
() const

109 
°d
::
ve˘‹
<
TSåög
>* 
«mes
 = 
√w
 std::vector<TString>();

110 
«mes
->
	`push_back
(
fLINEAR
);

111 
«mes
->
	`push_back
(
fSIGMOID
);

112 
«mes
->
	`push_back
(
fTANH
);

113 
«mes
->
	`push_back
(
fRELU
);

114 
«mes
->
	`push_back
(
fRADIAL
);

115  
«mes
;

116 
	}
}

	@src/TActivationIdentity.cxx

29 
	~"TMVA/TA˘iv©i⁄Idítôy.h
"

31 
	~"Rty≥s.h
"

32 
	~"TSåög.h
"

34 
	~<io°ªam
>

36 
˛ass
 
	gTSåög
;

38 
CœssImp
(
TMVA
::
TA˘iv©i⁄Idítôy
);

43 
	gTMVA
::
TA˘iv©i⁄Idítôy
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
 )

45 
fout
 << "doubÀ " << 
‚cName
 << "(doubÀ xËc⁄° {" << 
°d
::
ídl
;

46 
fout
 << " // idítôy" << 
°d
::
ídl
;

47 
fout
 << "Ñëu∫ x;" << 
°d
::
ídl
;

48 
fout
 << "}" << 
°d
::
ídl
;

49 
	}
}

	@src/TActivationRadial.cxx

31 
	~"TMVA/TA˘iv©i⁄Radül.h
"

33 
	~"TMVA/TA˘iv©i⁄.h
"

35 
	~"TF‹muœ.h
"

36 
	~"TM©h.h
"

37 
	~"TSåög.h
"

39 
	~<io°ªam
>

41 c⁄° 
I¡_t
 
	gUNINITIALIZED
 = -1;

43 
CœssImp
(
TMVA
::
TA˘iv©i⁄Radül
);

48 
	gTMVA
::
TA˘iv©i⁄Radül
::
	$TA˘iv©i⁄Radül
()

50 
fEqn
 = 
√w
 
	`TF‹muœ
("Gaussian", "TMath::Exp(-x^2/2.0)");

51 
fEqnDîiv©ive
 = 
√w
 
	`TF‹muœ
("derivative", "-x*TMath::Exp(-x^2/2.0)");

52 
	}
}

57 
	gTMVA
::
TA˘iv©i⁄Radül
::~
	$TA˘iv©i⁄Radül
()

59 i‡(
fEqn
 !
NULL
Ë
dñëe
 fEqn;

60 i‡(
fEqnDîiv©ive
 !
NULL
Ë
dñëe
 fEqnDerivative;

61 
	}
}

66 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄Radül
::
	$EvÆ
(
DoubÀ_t
 
¨g
)

68 i‡(
fEqn
 =
NULL
Ë 
UNINITIALIZED
;

69  
fEqn
->
	`EvÆ
(
¨g
);

70 
	}
}

75 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄Radül
::
	$EvÆDîiv©ive
(
DoubÀ_t
 
¨g
)

77 i‡(
fEqnDîiv©ive
 =
NULL
Ë 
UNINITIALIZED
;

78  
fEqnDîiv©ive
->
	`EvÆ
(
¨g
);

79 
	}
}

84 
TSåög
 
	gTMVA
::
TA˘iv©i⁄Radül
::
	$GëEx¥essi⁄
()

86 
TSåög
 
ex¥
 = "";

88 i‡(
fEqn
 =
NULL
Ë
ex¥
 += "<null>";

89 
ex¥
 +
fEqn
->
	`GëExpF‹muœ
();

91 
ex¥
 += "\t\t";

93 i‡(
fEqnDîiv©ive
 =
NULL
Ë
ex¥
 += "<null>";

94 
ex¥
 +
fEqnDîiv©ive
->
	`GëExpF‹muœ
();

96  
ex¥
;

97 
	}
}

102 
	gTMVA
::
TA˘iv©i⁄Radül
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
 )

104 
fout
 << "doubÀ " << 
‚cName
 << "(doubÀ xËc⁄° {" << 
°d
::
ídl
;

105 
fout
 << " //Ñadül" << 
°d
::
ídl
;

106 
fout
 << "Ñëu∫Éxp(-x*x/2.0);" << 
°d
::
ídl
;

107 
fout
 << "}" << 
°d
::
ídl
;

108 
	}
}

	@src/TActivationReLU.cxx

29 
	~"TMVA/TA˘iv©i⁄ReLU.h
"

31 
	~"TMVA/TA˘iv©i⁄.h
"

33 
	~"TF‹muœ.h
"

34 
	~"TM©h.h
"

35 
	~"TSåög.h
"

37 
	~<io°ªam
>

39 
CœssImp
(
TMVA
::
TA˘iv©i⁄ReLU
);

44 
	gTMVA
::
TA˘iv©i⁄ReLU
::
	$TA˘iv©i⁄ReLU
()

48 
	}
}

53 
TMVA
::
TA˘iv©i⁄ReLU
::~
	$TA˘iv©i⁄ReLU
()

55 
	}
}

60 
TSåög
 
TMVA
::
TA˘iv©i⁄ReLU
::
	$GëEx¥essi⁄
()

62 
TSåög
 
ex¥
 = "max(0,x)";

64  
ex¥
;

65 
	}
}

70 
	gTMVA
::
TA˘iv©i⁄ReLU
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
 )

72 
fout
 << "doubÀ " << 
‚cName
 << "(doubÀ xËc⁄° {" << 
°d
::
ídl
;

73 
fout
 << " //Ñe˘ifõdÜöó∏unô" << 
°d
::
ídl
;

74 
fout
 << "Ñëu∫ x>0 ? x : 0; " << 
°d
::
ídl
;

75 
fout
 << "}" << 
°d
::
ídl
;

76 
	}
}

	@src/TActivationSigmoid.cxx

31 
	~"TMVA/TA˘iv©i⁄Sigmoid.h
"

33 
	~"TMVA/TA˘iv©i⁄.h
"

35 
	~"TF‹muœ.h
"

36 
	~"TM©h.h
"

37 
	~"TSåög.h
"

39 
	~<io°ªam
>

41 c⁄° 
I¡_t
 
	gUNINITIALIZED
 = -1;

43 
CœssImp
(
TMVA
::
TA˘iv©i⁄Sigmoid
);

48 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::
	$TA˘iv©i⁄Sigmoid
()

50 
fEqn
 = 
√w
 
	`TF‹muœ
("sigmoid", "1.0/(1.0+TMath::Exp(-x))");

51 
fEqnDîiv©ive
 =

52 
√w
 
	`TF‹muœ
("derivative", "TMath::Exp(-x)/(1.0+TMath::Exp(-x))^2");

53 
	}
}

58 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::~
	$TA˘iv©i⁄Sigmoid
()

60 i‡(
fEqn
 !
NULL
Ë
dñëe
 fEqn;

61 i‡(
fEqnDîiv©ive
 !
NULL
Ë
dñëe
 fEqnDerivative;

62 
	}
}

67 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::
	$EvÆ
(
DoubÀ_t
 
¨g
)

69 i‡(
fEqn
 =
NULL
Ë 
UNINITIALIZED
;

70  
fEqn
->
	`EvÆ
(
¨g
);

73 
	}
}

78 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::
	$EvÆDîiv©ive
(
DoubÀ_t
 
¨g
)

80 i‡(
fEqnDîiv©ive
 =
NULL
Ë 
UNINITIALIZED
;

81  
fEqnDîiv©ive
->
	`EvÆ
(
¨g
);

84 
	}
}

89 
TSåög
 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::
	$GëEx¥essi⁄
()

91 
TSåög
 
ex¥
 = "";

93 i‡(
fEqn
 =
NULL
Ë
ex¥
 += "<null>";

94 
ex¥
 +
fEqn
->
	`GëExpF‹muœ
();

96 
ex¥
 += "\t\t";

98 i‡(
fEqnDîiv©ive
 =
NULL
Ë
ex¥
 += "<null>";

99 
ex¥
 +
fEqnDîiv©ive
->
	`GëExpF‹muœ
();

101  
ex¥
;

102 
	}
}

107 
	gTMVA
::
TA˘iv©i⁄Sigmoid
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
 )

109 
fout
 << "doubÀ " << 
‚cName
 << "(doubÀ xËc⁄° {" << 
°d
::
ídl
;

110 
fout
 << " // sigmoid" << 
°d
::
ídl
;

111 
fout
 << "Ñëu∫ 1.0/(1.0+exp(-x));" << 
°d
::
ídl
;

112 
fout
 << "}" << 
°d
::
ídl
;

113 
	}
}

	@src/TActivationTanh.cxx

31 
	~"TMVA/TA˘iv©i⁄T™h.h
"

33 
	~"TMVA/TA˘iv©i⁄.h
"

35 
	~"TF‹muœ.h
"

36 
	~"TM©h.h
"

37 
	~"TSåög.h
"

39 
	~<io°ªam
>

41 
CœssImp
(
TMVA
::
TA˘iv©i⁄T™h
);

46 
	gTMVA
::
TA˘iv©i⁄T™h
::
	$TA˘iv©i⁄T™h
()

48 
fFAST
=
kTRUE
;

49 
	}
}

54 
	gTMVA
::
TA˘iv©i⁄T™h
::~
	$TA˘iv©i⁄T™h
()

56 
	}
}

61 
DoubÀ_t
 
TMVA
::
TA˘iv©i⁄T™h
::
	$Á°_ènh
(
DoubÀ_t
 
¨g
){

62 i‡(
¨g
 > 4.97)  1;

63 i‡(
¨g
 < -4.97)  -1;

64 
¨g2
 = 
¨g
 *árg;

65 
a
 = 
¨g
 * (135135.0‡+ 
¨g2
 * (17325.0f +árg2 * (378.0f +árg2)));

66 
b
 = 135135.0‡+ 
¨g2
 * (62370.0f +árg2 * (3150.0f +árg2 * 28.0f));

67  
a
/
b
;

68 
	}
}

73 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄T™h
::
	$EvÆ
(
DoubÀ_t
 
¨g
)

75  
fFAST
 ? 
	`Á°_ènh
(
¨g
Ë: 
TM©h
::
	`T™H
(arg);

76 
	}
}

81 
DoubÀ_t
 
	gTMVA
::
TA˘iv©i⁄T™h
::
	$EvÆDîiv©ive
(
DoubÀ_t
 
¨g
)

83 
DoubÀ_t
 
tmp
=
	`EvÆ
(
¨g
);

84  ( 1-
tmp
*tmp);

85 
	}
}

91 
TSåög
 
	gTMVA
::
TA˘iv©i⁄T™h
::
	$GëEx¥essi⁄
()

93 
TSåög
 
ex¥
 = "tanh(x)\t\t (1-tanh()^2)";

94  
ex¥
;

95 
	}
}

100 
	gTMVA
::
TA˘iv©i⁄T™h
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
 )

102 
fout
 << "doubÀ " << 
‚cName
 << "(doubÀ xËc⁄° {" << 
°d
::
ídl
;

103 
fout
 << " // hy≥rbﬁi¯èn" << 
°d
::
ídl
;

104 
fout
 << "Ñëu∫Å™h(x);" << 
°d
::
ídl
;

105 
fout
 << "}" << 
°d
::
ídl
;

106 
	}
}

	@src/TNeuron.cxx

29 
	~"TMVA/TNeur⁄.h
"

31 
	~"TMVA/MsgLoggî.h
"

32 
	~"TMVA/TA˘iv©i⁄.h
"

33 
	~"TMVA/Toﬁs.h
"

34 
	~"TMVA/TNeur⁄I≈ut.h
"

35 
	~"TMVA/Ty≥s.h
"

37 
	~"TH1D.h
"

38 
	~"ThªadLoˇlSt‹age.h
"

39 
	~"TObjAºay.h
"

41 c⁄° 
I¡_t
 
	gUNINITIALIZED
 = -1;

43 
usög
 
	g°d
::
ve˘‹
;

45 
CœssImp
(
TMVA
::
TNeur⁄
);

50 
	gTMVA
::
TNeur⁄
::
	$TNeur⁄
()

52 
	`InôNeur⁄
();

53 
	}
}

58 
	gTMVA
::
TNeur⁄
::~
	$TNeur⁄
()

60 i‡(
fLöksIn
 !
NULL
Ë
dñëe
 fLinksIn;

61 i‡(
fLöksOut
 !
NULL
Ë
dñëe
 fLinksOut;

62 
	}
}

67 
	gTMVA
::
TNeur⁄
::
	$InôNeur⁄
()

69 
fLöksIn
 = 
√w
 
	`TObjAºay
();

70 
fLöksOut
 = 
√w
 
	`TObjAºay
();

71 
fVÆue
 = 
UNINITIALIZED
;

72 
fA˘iv©i⁄VÆue
 = 
UNINITIALIZED
;

73 
fDñè
 = 
UNINITIALIZED
;

74 
fDEDw
 = 
UNINITIALIZED
;

75 
fEº‹
 = 
UNINITIALIZED
;

76 
fA˘iv©i⁄
 = 
NULL
;

77 
fF‹˚dVÆue
 = 
kFALSE
;

78 
fI≈utCÆcuœt‹
 = 
NULL
;

79 
	}
}

84 
	gTMVA
::
TNeur⁄
::
	$F‹˚VÆue
(
DoubÀ_t
 
vÆue
)

86 
fVÆue
 = 
vÆue
;

87 
fF‹˚dVÆue
 = 
kTRUE
;

88 
	}
}

93 
	gTMVA
::
TNeur⁄
::
	$CÆcuœãVÆue
()

95 i‡(
fF‹˚dVÆue
) ;

96 
fVÆue
 = 
fI≈utCÆcuœt‹
->
	`GëI≈ut
(
this
);

97 
	}
}

102 
	gTMVA
::
TNeur⁄
::
	$CÆcuœãA˘iv©i⁄VÆue
()

104 i‡(
fA˘iv©i⁄
 =
NULL
) {

105 
	`PrötMesßge
–
kWARNING
 ,"NoáctivationÉquation specified." );

106 
fA˘iv©i⁄VÆue
 = 
UNINITIALIZED
;

109 
fA˘iv©i⁄VÆue
 = 
fA˘iv©i⁄
->
	`EvÆ
(
fVÆue
);

110 
	}
}

115 
	gTMVA
::
TNeur⁄
::
	$CÆcuœãDñè
()

118 i‡(
	`IsI≈utNeur⁄
()) {

119 
fDñè
 = 0.0;

123 
DoubÀ_t
 
îr‹
;

126 i‡(
	`IsOuçutNeur⁄
()Ë
îr‹
 = 
fEº‹
;

130 
îr‹
 = 0.0;

131 
TSy«p£
* 
sy«p£
 = 
NULL
;

136 
TObjAºayIãr
 
	`ôî
(
fLöksOut
);

137 
åue
) {

138 
sy«p£
 = (
TSy«p£
*Ë
ôî
.
	`Next
();

139 i‡(
sy«p£
 =
NULL
) ;

140 
îr‹
 +
sy«p£
->
	`GëWeighãdDñè
();

145 
fDñè
 = 
îr‹
 * 
fA˘iv©i⁄
->
	`EvÆDîiv©ive
(
	`GëVÆue
());

146 
	}
}

151 
	gTMVA
::
TNeur⁄
::
	$SëI≈utCÆcuœt‹
(
TNeur⁄I≈ut
* 
ˇlcuœt‹
)

153 i‡(
fI≈utCÆcuœt‹
 !
NULL
Ë
dñëe
 fInputCalculator;

154 
fI≈utCÆcuœt‹
 = 
ˇlcuœt‹
;

155 
	}
}

160 
	gTMVA
::
TNeur⁄
::
	$SëA˘iv©i⁄Eqn
(
TA˘iv©i⁄
* 
a˘iv©i⁄
)

162 i‡(
fA˘iv©i⁄
 !
NULL
Ë
dñëe
 fActivation;

163 
fA˘iv©i⁄
 = 
a˘iv©i⁄
;

164 
	}
}

169 
	gTMVA
::
TNeur⁄
::
	$AddPªLök
(
TSy«p£
* 
¥e
)

171 i‡(
	`IsI≈utNeur⁄
()) ;

172 
fLöksIn
->
	`Add
(
¥e
);

173 
	}
}

178 
	gTMVA
::
TNeur⁄
::
	$AddPo°Lök
(
TSy«p£
* 
po°
)

180 i‡(
	`IsOuçutNeur⁄
()) ;

181 
fLöksOut
->
	`Add
(
po°
);

182 
	}
}

187 
	gTMVA
::
TNeur⁄
::
	$DñëePªLöks
()

189 
	`DñëeLöksAºay
(
fLöksIn
);

190 
	}
}

195 
	gTMVA
::
TNeur⁄
::
	$DñëeLöksAºay
(
TObjAºay
*& 
löks
)

197 i‡(
löks
 =
NULL
) ;

199 
TSy«p£
* 
sy«p£
 = 
NULL
;

200 
I¡_t
 
numLöks
 = 
löks
->
	`GëE¡rõsFa°
();

201 
I¡_t
 
i
=0; i<
numLöks
; i++) {

202 
sy«p£
 = (
TSy«p£
*)
löks
->
	`At
(
i
);

203 i‡(
sy«p£
 !
NULL
Ë
dñëe
 synapse;

205 
dñëe
 
löks
;

206 
löks
 = 
NULL
;

207 
	}
}

212 
	gTMVA
::
TNeur⁄
::
	$SëEº‹
(
DoubÀ_t
 
îr‹
)

214 i‡(!
	`IsOuçutNeur⁄
())

215 
	`PrötMesßge
–
kWARNING
, "Warning! SettingánÉrror onáÇon-outputÇeuron isÖrobablyÇot what you wantÅo do." );

217 
fEº‹
 = 
îr‹
;

218 
	}
}

224 
	gTMVA
::
TNeur⁄
::
	$Upd©eSy«p£sB©ch
()

226 i‡(
	`IsI≈utNeur⁄
()) ;

228 
TSy«p£
* 
sy«p£
 = 
NULL
;

229 
TObjAºayIãr
 
	`ôî
(
fLöksIn
);

230 
åue
) {

231 
sy«p£
 = (
TSy«p£
*Ë
ôî
.
	`Next
();

232 i‡(
sy«p£
 =
NULL
) ;

233 
sy«p£
->
	`CÆcuœãDñè
();

236 
	}
}

242 
	gTMVA
::
TNeur⁄
::
	$Upd©eSy«p£sSequítül
()

244 i‡(
	`IsI≈utNeur⁄
()) ;

246 
TSy«p£
* 
sy«p£
 = 
NULL
;

247 
TObjAºayIãr
 
	`ôî
(
fLöksIn
);

249 
åue
) {

250 
sy«p£
 = (
TSy«p£
*Ë
ôî
.
	`Next
();

251 i‡(
sy«p£
 =
NULL
) ;

252 
sy«p£
->
	`InôDñè
();

253 
sy«p£
->
	`CÆcuœãDñè
();

254 
sy«p£
->
	`Adju°Weight
();

257 
	}
}

263 
	gTMVA
::
TNeur⁄
::
	$Adju°Sy«p£Weights
()

265 i‡(
	`IsI≈utNeur⁄
()) ;

267 
TSy«p£
* 
sy«p£
 = 
NULL
;

268 
TObjAºayIãr
 
	`ôî
(
fLöksIn
);

271 
åue
) {

272 
sy«p£
 = (
TSy«p£
*Ë
ôî
.
	`Next
();

273 i‡(
sy«p£
 =
NULL
) ;

274 
sy«p£
->
	`Adju°Weight
();

277 
	}
}

283 
	gTMVA
::
TNeur⁄
::
	$InôSy«p£Dñès
()

286 i‡(
	`IsI≈utNeur⁄
()) ;

288 
TSy«p£
* 
sy«p£
 = 
NULL
;

289 
TObjAºayIãr
 
	`ôî
(
fLöksIn
);

291 
åue
) {

292 
sy«p£
 = (
TSy«p£
*Ë
ôî
.
	`Next
();

294 i‡(
sy«p£
 =
NULL
) ;

295 
sy«p£
->
	`InôDñè
();

298 
	}
}

303 
	gTMVA
::
TNeur⁄
::
	$PrötLöks
(
TObjAºay
* 
löks
) const

305 i‡(
löks
 =
NULL
) {

306 
	`Log
(Ë<< 
kDEBUG
 << "\t\t\t<n⁄e>" << 
Endl
;

310 
TSy«p£
* 
sy«p£
;

312 
I¡_t
 
numLöks
 = 
löks
->
	`GëE¡rõsFa°
();

313 
I¡_t
 
i
 = 0; i < 
numLöks
; i++) {

314 
sy«p£
 = (
TSy«p£
*)
löks
->
	`At
(
i
);

315 
	`Log
(Ë<< 
kDEBUG
 <<

316 "\t\t\tweighè: " << 
sy«p£
->
	`GëWeight
()

317 << "\t\tw-vÆue: " << 
sy«p£
->
	`GëWeighãdVÆue
()

318 << "\t\tw-dñè: " << 
sy«p£
->
	`GëWeighãdDñè
()

319 << "\t\é-øã: " << 
sy«p£
->
	`GëLó∫ögR©e
()

320 << 
Endl
;

322 
	}
}

327 
	gTMVA
::
TNeur⁄
::
	$PrötA˘iv©i⁄Eqn
()

329 i‡(
fA˘iv©i⁄
 !
NULL
Ë
	`Log
(Ë<< 
kDEBUG
 << fA˘iv©i⁄->
	`GëEx¥essi⁄
(Ë<< 
Endl
;

330 
	`Log
(Ë<< 
kDEBUG
 << "<n⁄e>" << 
Endl
;

331 
	}
}

336 
	gTMVA
::
TNeur⁄
::
	$PrötMesßge
–
EMsgTy≥
 
ty≥
, 
TSåög
 
mesßge
)

338 
	`Log
(Ë<< 
ty≥
 << 
mesßge
 << 
Endl
;

339 
	}
}

343 
	gTMVA
::
MsgLoggî
& 
TMVA
::
TNeur⁄
::
	$Log
() const

345 
	`TTHREAD_TLS_DECL_ARG2
(
MsgLoggî
,
loggî
,"TNeur⁄",
kDEBUG
);

346  
loggî
;

347 
	}
}

	@src/TNeuronInput.cxx

28 
	~"TMVA/TNeur⁄I≈ut.h
"

30 
	~"Rty≥s.h
"

32 
CœssImp
(
TMVA
::
TNeur⁄I≈ut
);

	@src/TNeuronInputAbs.cxx

31 
	~"TMVA/TNeur⁄I≈utAbs.h
"

33 
	~"Rty≥s.h
"

35 
CœssImp
(
TMVA
::
TNeur⁄I≈utAbs
);

	@src/TNeuronInputChooser.cxx

29 
	~"TMVA/TNeur⁄I≈utChoo£r.h
"

31 
	~"Rty≥s.h
"

33 
CœssImp
(
TMVA
::
TNeur⁄I≈utChoo£r
);

	@src/TNeuronInputSqSum.cxx

30 
	~"TMVA/TNeur⁄I≈utSqSum.h
"

32 
	~"Rty≥s.h
"

34 
CœssImp
(
TMVA
::
TNeur⁄I≈utSqSum
);

	@src/TNeuronInputSum.cxx

29 
	~"TMVA/TNeur⁄I≈utSum.h
"

31 
	~"Rty≥s.h
"

33 
CœssImp
(
TMVA
::
TNeur⁄I≈utSum
);

	@src/TSpline1.cxx

33 
	~"TMVA/TS∂öe1.h
"

35 
	~"TGøph.h
"

36 
	~"TM©h.h
"

38 
CœssImp
(
TMVA
::
TS∂öe1
);

44 
	gTMVA
::
TS∂öe1
::
	$TS∂öe1
–c⁄° 
TSåög
& 
tôÀ
, 
TGøph
* 
theGøph
 )

45 : 
	$fGøph
–
theGøph
 )

47 
	`SëNameTôÀ
–
tôÀ
,Åitle );

48 
	}
}

53 
	gTMVA
::
TS∂öe1
::~
	$TS∂öe1
( )

55 i‡(
fGøph
Ë
dñëe
 fGraph;

56 
	}
}

61 
DoubÀ_t
 
	gTMVA
::
TS∂öe1
::
	$EvÆ
–
DoubÀ_t
 
x
 ) const

63 
I¡_t
 
ibö
 = 
TM©h
::
	`Bö¨ySórch
–
fGøph
->
	`GëN
(),

64 
fGøph
->
	`GëX
(),

65 
x
 );

66 
I¡_t
 
nbö
 = 
fGøph
->
	`GëN
();

69 i‡(
ibö
 < 0 ) ibin = 0;

70 i‡(
ibö
 >
nbö
) ibin =Çbin - 1;

72 
I¡_t
 
√xtbö
 = 
ibö
;

73 i‡((
x
 > 
fGøph
->
	`GëX
()[
ibö
] && ibö !
nbö
-1) || ibin == 0)

74 
√xtbö
++;

76 
√xtbö
--;

79 
DoubÀ_t
 
dx
 = 
fGøph
->
	`GëX
()[
ibö
] - fGøph->GëX()[
√xtbö
];

80 
DoubÀ_t
 
dy
 = 
fGøph
->
	`GëY
()[
ibö
] - fGøph->GëY()[
√xtbö
];

81  
fGøph
->
	`GëY
()[
ibö
] + (
x
 - fGøph->
	`GëX
()[ibö]Ë* 
dy
/
dx
;

82 
	}
}

87 
	gTMVA
::
TS∂öe1
::
	$BuûdC€ff
( )

89 
	}
}

94 
TMVA
::
TS∂öe1
::
	$GëKnŸ
–
I¡_t
 , 
DoubÀ_t
& , Double_t& ) const

96 
	}
}

	@src/TSpline2.cxx

33 
	~"TMVA/TS∂öe2.h
"

35 
	~"TGøph.h
"

36 
	~"TM©h.h
"

37 
	~"TS∂öe.h
"

39 
CœssImp
(
TMVA
::
TS∂öe2
);

45 
	gTMVA
::
TS∂öe2
::
	$TS∂öe2
–c⁄° 
TSåög
& 
tôÀ
, 
TGøph
* 
theGøph
 )

46 : 
	$fGøph
–
theGøph
 )

48 
	`SëNameTôÀ
–
tôÀ
,Åitle );

49 
	}
}

54 
	gTMVA
::
TS∂öe2
::~
	$TS∂öe2
( )

56 i‡(
fGøph
Ë
dñëe
 fGraph;

57 
	}
}

62 
DoubÀ_t
 
	gTMVA
::
TS∂öe2
::
	$EvÆ
–c⁄° 
DoubÀ_t
 
x
 ) const

64 
DoubÀ_t
 
ªtvÆ
=0;

66 
I¡_t
 
ibö
 = 
TM©h
::
	`Bö¨ySórch
–
fGøph
->
	`GëN
(),

67 
fGøph
->
	`GëX
(),

68 
x
 );

71 i‡(
ibö
 < 0 ) ibin = 0;

72 i‡(
ibö
 >
fGøph
->
	`GëN
()) ibin = fGraph->GetN() - 1;

74 
Flﬂt_t
 
dx
 = 0;

76 i‡(
ibö
 == 0 ) {

78 
ªtvÆ
 = 
	`Quadøx
–
x
,

79 
fGøph
->
	`GëX
()[
ibö
] + 
dx
,

80 
fGøph
->
	`GëX
()[
ibö
+1] + 
dx
,

81 
fGøph
->
	`GëX
()[
ibö
+2] + 
dx
,

82 
fGøph
->
	`GëY
()[
ibö
],

83 
fGøph
->
	`GëY
()[
ibö
+1],

84 
fGøph
->
	`GëY
()[
ibö
+2]);

87 i‡(
ibö
 >(
fGøph
->
	`GëN
()-2)) {

88 
ibö
 = 
fGøph
->
	`GëN
() - 1;

90 
ªtvÆ
 = 
	`Quadøx
–
x
,

91 
fGøph
->
	`GëX
()[
ibö
-2] + 
dx
,

92 
fGøph
->
	`GëX
()[
ibö
-1] + 
dx
,

93 
fGøph
->
	`GëX
()[
ibö
] + 
dx
,

94 
fGøph
->
	`GëY
()[
ibö
-2],

95 
fGøph
->
	`GëY
()[
ibö
-1],

96 
fGøph
->
	`GëY
()[
ibö
]);

100 
ªtvÆ
 = ( 
	`Quadøx
–
x
,

101 
fGøph
->
	`GëX
()[
ibö
-1] + 
dx
,

102 
fGøph
->
	`GëX
()[
ibö
] + 
dx
,

103 
fGøph
->
	`GëX
()[
ibö
+1] + 
dx
,

104 
fGøph
->
	`GëY
()[
ibö
-1],

105 
fGøph
->
	`GëY
()[
ibö
],

106 
fGøph
->
	`GëY
()[
ibö
+1])

108 
	`Quadøx
–
x
, 
fGøph
->
	`GëX
()[
ibö
] + 
dx
,

109 
fGøph
->
	`GëX
()[
ibö
+1] + 
dx
,

110 
fGøph
->
	`GëX
()[
ibö
+2] + 
dx
,

111 
fGøph
->
	`GëY
()[
ibö
],

112 
fGøph
->
	`GëY
()[
ibö
+1],

113 
fGøph
->
	`GëY
()[
ibö
+2]) )*0.5;

116  
ªtvÆ
;

117 
	}
}

122 
	gTMVA
::
TS∂öe2
::
	$BuûdC€ff
( )

124 
	}
}

129 
TMVA
::
TS∂öe2
::
	$GëKnŸ
–
I¡_t
 , 
DoubÀ_t
& , Double_t& ) const

131 
	}
}

140 
DoubÀ_t
 
	gTMVA
::
TS∂öe2
::
	$Quadøx
–c⁄° 
Flﬂt_t
 
dm
,c⁄° Flﬂt_à
dm1
,c⁄° Flﬂt_à
dm2
,c⁄° Flﬂt_à
dm3
,

141 c⁄° 
Flﬂt_t
 
cos1
, c⁄° Flﬂt_à
cos2
, c⁄° Flﬂt_à
cos3
 ) const

143 
Flﬂt_t
 
a
 = 
cos1
*(
dm2
-
dm3
Ë+ 
cos2
*(dm3-
dm1
Ë+ 
cos3
*(dm1-dm2);

144 
Flﬂt_t
 
b
 = 
cos1
*(
dm2
*dm2-
dm3
*dm3Ë+ 
cos2
*(dm3*dm3-
dm1
*dm1Ë+ 
cos3
*(dm1*dm1-dm2*dm2);

145 
Flﬂt_t
 
c
 = 
cos1
*(
dm2
-
dm3
)*dm2*dm3 + 
cos2
*(dm3-
dm1
)*dm3*dm1 + 
cos3
*(dm1-dm2)*dm1*dm2;

147 
Flﬂt_t
 
díom
 = (
dm2
-
dm3
)*(dm3-
dm1
)*(dm1-dm2);

149  (
díom
 !0.0Ë? (-
a
*
dm
*dm+
b
*dm-
c
)/denom : 0.0;

150 
	}
}

	@src/TSynapse.cxx

29 
	~"TMVA/TSy«p£.h
"

31 
	~"TMVA/TNeur⁄.h
"

33 
	~"TMVA/MsgLoggî.h
"

35 
	~"TMVA/Ty≥s.h
"

37 
	~"ThªadLoˇlSt‹age.h
"

38 
	~"TObje˘.h
"

40 c⁄° 
I¡_t
 
	gfgUNINITIALIZED
 = -1;

42 
CœssImp
(
TMVA
::
TSy«p£
);

47 
	gTMVA
::
TSy«p£
::
	$TSy«p£
()

48 : 
	`fWeight
( 0 ),

49 
	`fLó∫R©e
( 0 ),

50 
	`fDñè
( 0 ),

51 
	`fDEDw
( 0 ),

52 
	`fCou¡
( 0 ),

53 
	`fPªNeur⁄
–
NULL
 ),

54 
	$fPo°Neur⁄
–
NULL
 )

56 
fWeight
 = 
fgUNINITIALIZED
;

57 
	}
}

62 
	gTMVA
::
TSy«p£
::~
	$TSy«p£
()

64 
	}
}

69 
TMVA
::
TSy«p£
::
	$SëWeight
(
DoubÀ_t
 
weight
)

71 
fWeight
 = 
weight
;

72 
	}
}

77 
DoubÀ_t
 
	gTMVA
::
TSy«p£
::
	$GëWeighãdVÆue
()

79 i‡(
fPªNeur⁄
 =
NULL
)

80 
	`Log
(Ë<< 
kFATAL
 << "<GëWeighãdVÆue> sy«p£ÇŸ c⁄√˘edÅÿ√ur⁄" << 
Endl
;

82  (
fWeight
 * 
fPªNeur⁄
->
	`GëA˘iv©i⁄VÆue
());

83 
	}
}

88 
DoubÀ_t
 
	gTMVA
::
TSy«p£
::
	$GëWeighãdDñè
()

90 i‡(
fPo°Neur⁄
 =
NULL
)

91 
	`Log
(Ë<< 
kFATAL
 << "<GëWeighãdDñè> sy«p£ÇŸ c⁄√˘edÅÿ√ur⁄" << 
Endl
;

93  
fWeight
 * 
fPo°Neur⁄
->
	`GëDñè
();

94 
	}
}

99 
	gTMVA
::
TSy«p£
::
	$Adju°Weight
()

101 
DoubÀ_t
 
wDñè
 = 
fDñè
 / 
fCou¡
;

102 
fWeight
 +-
fLó∫R©e
 * 
wDñè
;

103 
	`InôDñè
();

104 
	}
}

109 
	gTMVA
::
TSy«p£
::
	$CÆcuœãDñè
()

111 
fDñè
 +
fPo°Neur⁄
->
	`GëDñè
(Ë* 
fPªNeur⁄
->
	`GëA˘iv©i⁄VÆue
();

112 
fCou¡
++;

113 
	}
}

117 
	gTMVA
::
MsgLoggî
& 
TMVA
::
TSy«p£
::
	$Log
() const

119 
	`TTHREAD_TLS_DECL_ARG
(
MsgLoggî
,
loggî
,"TSynapse");

120  
loggî
;

121 
	}
}

	@src/Timer.cxx

54 
	~"TMVA/Timî.h
"

56 
	~"TMVA/C⁄fig.h
"

57 
	~"TMVA/MsgLoggî.h
"

58 
	~"TMVA/Toﬁs.h
"

60 
	~"TSt›w©ch.h
"

62 
	~<iom™ù
>

63 
	~<uni°d.h
>

65 c⁄° 
TSåög
 
	gTMVA
::
Timî
::
fgCœssName
 = "Timer";

66 c⁄° 
I¡_t
 
	gTMVA
::
Timî
::
fgNbös
 = 16;

68 
CœssImp
(
TMVA
::
Timî
);

73 
	gTMVA
::
Timî
::
	$Timî
–c⁄° * 
¥efix
, 
Boﬁ_t
 
cﬁourfulOuçut
 )

74 : 
	$Timî
(0, 
¥efix
, 
cﬁourfulOuçut
)

76 
	}
}

84 
	gTMVA
::
Timî
::
	$Timî
–
I¡_t
 
ncou¡s
, c⁄° * 
¥efix
, 
Boﬁ_t
 
cﬁourfulOuçut
 )

85 : 
	`fNcou¡s
 ( 
ncou¡s
 ),

86 
	`fPªfix
 ( 
	`°rcmp
(
¥efix
,"")==0?
Timî
::
fgCœssName
:
	`TSåög
(prefix) ),

87 
	`fCﬁourfulOuçut
–
cﬁourfulOuçut
 ),

88 
	`fPªviousProgªss
(-1),

89 
	`fOuçutToFûe
(!
	`ißây
(
STDERR_FILENO
)),

90 
	`fProgªssB¨SåögLígth
 (0),

91 
	`fLoggî
 ( 
√w
 
	`MsgLoggî
–
fPªfix
.
	$D©a
() ) )

93 
fCﬁourfulOuçut
 = fCﬁourfulOuçuà&& !
fOuçutToFûe
;

94 
	`Re£t
();

95 
	}
}

100 
	gTMVA
::
Timî
::~
	$Timî
( )

102 
dñëe
 
fLoggî
;

103 
	}
}

105 
	gTMVA
::
Timî
::
	$Inô
–
I¡_t
 
ncou¡s
 )

108 
fNcou¡s
 = 
ncou¡s
;

109 
	`Re£t
();

110 
	}
}

115 
	gTMVA
::
Timî
::
	$Re£t
( )

117 
TSt›w©ch
::
	`Sèπ
–
kTRUE
 );

118 
fPªviousProgªss
 = -1;

119 
fPªviousTimeE°im©e
.
	`CÀ¨
();

120 
	}
}

125 
DoubÀ_t
 
	gTMVA
::
Timî
::
	$Eœp£dSec⁄ds
( )

127 
DoubÀ_t
 
π
 = 
TSt›w©ch
::
	`RólTime
(); TSt›w©ch::
	`Sèπ
–
kFALSE
 );

128  
π
;

129 
	}
}

134 
TSåög
 
	gTMVA
::
Timî
::
	$GëEœp£dTime
–
Boﬁ_t
 
Scõ¡ific
 )

136  
	`SecToText
–
	`Eœp£dSec⁄ds
(), 
Scõ¡ific
 );

137 
	}
}

142 
TSåög
 
	gTMVA
::
Timî
::
	$GëLe·Time
–
I¡_t
 
icou¡s
 )

144 
DoubÀ_t
 
À·Time
 = ( 
icou¡s
 <= 0 ? -1 :

145 
icou¡s
 > 
fNcou¡s
 ? -1 :

146 
	`DoubÀ_t
(
fNcou¡s
 - 
icou¡s
)/DoubÀ_t(icou¡s)*
	`Eœp£dSec⁄ds
() );

148  
	`SecToText
–
À·Time
, 
kFALSE
 );

149 
	}
}

154 
	gTMVA
::
Timî
::
	$DøwProgªssB¨
()

156 
fProgªssB¨SåögLígth
 = 0;

157 
fNcou¡s
++;

158 i‡(
fNcou¡s
 == 1) {

159 
°d
::
˛og
 << 
fLoggî
->
	`GëPröãdSour˚
();

160 
°d
::
˛og
 << "Please wait ";

163 
°d
::
˛og
 << "." << std::
Êush
;

164 
	}
}

169 
	gTMVA
::
Timî
::
	$DøwProgªssB¨
–
TSåög
 
theSåög
 )

172 
°d
::
˛og
 << 
fLoggî
->
	`GëPröãdSour˚
();

174 
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << "[" << gTools().Color("reset");

176 
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("whôe_⁄_gªí"Ë<< gToﬁs().Cﬁ‹("dyñlow"Ë<< 
theSåög
 << gTools().Color("reset");

178 
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << "]" << gTools().Color("reset");

180 
i
 = 
fProgªssB¨SåögLígth
; i < 
theSåög
.
	`Lígth
 (); ++i)

181 
°d
::
cout
 << " ";

182 
°d
::
˛og
 << "\r" << std::
Êush
;

183 
fProgªssB¨SåögLígth
 = 
theSåög
.
	`Lígth
 ();

184 
	}
}

190 
	gTMVA
::
Timî
::
	$DøwProgªssB¨
–
I¡_t
 
icou¡s
, c⁄° 
TSåög
& 
commít
 )

192 i‡(!
	`gC⁄fig
().
	`DøwProgªssB¨
()) ;

195 i‡(
icou¡s
 > 
fNcou¡s
-1) icounts = fNcounts-1;

196 i‡(
icou¡s
 < 0 ) icounts = 0;

197 
I¡_t
 
ic
 = 
	`I¡_t
(
	`Flﬂt_t
(
icou¡s
)/Flﬂt_t(
fNcou¡s
)*
fgNbös
);

199 autÿ
timeLe·
 = 
this
->
	`GëLe·Time
–
icou¡s
 );

202 i‡(
ic
 =
fPªviousProgªss
 && 
timeLe·
 =
fPªviousTimeE°im©e
 && 
icou¡s
 !
fNcou¡s
-1) ;

204 i‡(
fOuçutToFûe
) {

205 i‡(
ic
 !
fPªviousProgªss
) {

206 
°d
::
˛og
 << 
	`I¡_t
((100*(
icou¡s
+1))/
	`Flﬂt_t
(
fNcou¡s
)Ë<< "%,ÅimêÀ·: " << 
timeLe·
 << std::
ídl
;

207 
fPªviousProgªss
 = 
ic
;

211 
fPªviousProgªss
 = 
ic
;

212 
fPªviousTimeE°im©e
 = 
timeLe·
;

214 
°d
::
˛og
 << 
fLoggî
->
	`GëPröãdSour˚
();

215 i‡(
fCﬁourfulOuçut
Ë
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << "[" << gTools().Color("reset");

216 
°d
::
˛og
 << "[";

217 
I¡_t
 
i
=0; i<
ic
; i++) {

218 i‡(
fCﬁourfulOuçut
Ë
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << ">" << gTools().Color("reset");

219 
°d
::
˛og
 << ">";

221 
I¡_t
 
i
=
ic
+1; i<
fgNbös
; i++) {

222 i‡(
fCﬁourfulOuçut
Ë
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << "." << gTools().Color("reset");

223 
°d
::
˛og
 << ".";

225 i‡(
fCﬁourfulOuçut
Ë
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("white_on_green") << gTools().Color("dyellow") << "]" << gTools().Color("reset");

226 
°d
::
˛og
 << "]" ;

229 i‡(
fCﬁourfulOuçut
) {

230 
°d
::
˛og
 << 
	`gToﬁs
().
	`Cﬁ‹
("reset") << " " ;

231 
°d
::
˛og
 << "(" << 
	`gToﬁs
().
	`Cﬁ‹
("ªd"Ë<< 
	`I¡_t
((100*(
icou¡s
+1))/
	`Flﬂt_t
(
fNcou¡s
)) << "%" << gTools().Color("reset")

234 << 
timeLe·
 << 
	`gToﬁs
().
	`Cﬁ‹
("reset") << ") ";

237 
°d
::
˛og
 << "] " ;

238 
°d
::
˛og
 << "(" << 
	`I¡_t
((100*(
icou¡s
+1))/
	`Flﬂt_t
(
fNcou¡s
)) << "%"

239 << ", " << "timêÀ·: " << 
timeLe·
 << ") ";

241 i‡(
commít
 != "") {

242 
°d
::
˛og
 << "[" << 
commít
 << "] ";

244 
°d
::
˛og
 << "\r" << std::
Êush
;

245 
	}
}

250 
TSåög
 
	gTMVA
::
Timî
::
	$SecToText
–
DoubÀ_t
 
£c⁄ds
, 
Boﬁ_t
 
Scõ¡ific
 ) const

252 
TSåög
 
out
 = "";

253 i‡(
Scõ¡ific
 ) 
out
 = 
	`F‹m
–"%.3g sec", 
£c⁄ds
 );

254 i‡(
£c⁄ds
 < 0 ) 
out
 = "unknown";

255 i‡(
£c⁄ds
 <300Ë
out
 = 
	`F‹m
–"%ò£c", 
	`I¡_t
(seconds) );

257 i‡(
£c⁄ds
 > 3600) {

258 
I¡_t
 
h
 = 
	`I¡_t
(
£c⁄ds
/3600);

259 i‡(
h
 <1Ë
out
 = 
	`F‹m
( "%i hr : ", h );

260 
out
 = 
	`F‹m
–"%òhr†: ", 
h
 );

262 
£c⁄ds
 = 
	`I¡_t
(seconds)%3600;

264 
I¡_t
 
m
 = 
	`I¡_t
(
£c⁄ds
/60);

265 i‡(
m
 <1Ë
out
 +
	`F‹m
( "%i min", m );

266 
out
 +
	`F‹m
–"%òmös", 
m
 );

269  (
fCﬁourfulOuçut
Ë? 
	`gToﬁs
().
	`Cﬁ‹
("ªd"Ë+ 
out
 + gTools().Color("reset") : out;

270 
	}
}

	@src/Tools.cxx

36 
	~"TMVA/Toﬁs.h
"

38 
	~"TMVA/C⁄fig.h
"

39 
	~"TMVA/Evít.h
"

40 
	~"TMVA/Vîsi⁄.h
"

41 
	~"TMVA/PDF.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/Ty≥s.h
"

45 
	~"TObjSåög.h
"

46 
	~"TM©h.h
"

47 
	~"TSåög.h
"

48 
	~"TTªe.h
"

49 
	~"TLóf.h
"

50 
	~"TH1.h
"

51 
	~"TH2.h
"

52 
	~"TLi°.h
"

53 
	~"TS∂öe.h
"

54 
	~"TVe˘‹.h
"

55 
	~"TM©rixD.h
"

56 
	~"TM©rixDSymEigí.h
"

57 
	~"TVe˘‹D.h
"

58 
	~"TTªeF‹muœ.h
"

59 
	~"TXMLEngöe.h
"

60 
	~"TROOT.h
"

61 
	~"TM©rixDSymEigí.h
"

63 
	~<Æg‹ôhm
>

64 
	~<c°dlib
>

66 
usög
 
«me•a˚
 
	g°d
;

68 #i‡
__˝lu•lus
 > 199711L

69 
	g°d
::
©omic
<
TMVA
::
Toﬁs
*> TMVA::Toﬁs::
fgToﬁs
{0};

71 
	gTMVA
::
Toﬁs
* 
TMVA
::Toﬁs::
fgToﬁs
 = 0;

74 
	gTMVA
::
Toﬁs
& 
TMVA
::
	$gToﬁs
(Ë{  
TMVA
::
Toﬁs
::
	`In°™˚
(); 
	}
}

75 
	gTMVA
::
Toﬁs
& 
TMVA
::Toﬁs::
	$In°™˚
() {

76 #i‡
__˝lu•lus
 > 199711L

77 if(!
fgToﬁs
) {

78 
Toﬁs
* 
tmp
 = 
√w
 
	`Toﬁs
();

79 
Toﬁs
* 
ex≥˘ed
 = 0;

80 if(! 
fgToﬁs
.
	`com∑ª_exch™ge_°r⁄g
(
ex≥˘ed
,
tmp
)) {

82 
dñëe
 
tmp
;

85  *
fgToﬁs
;

87  
fgToﬁs
?*(fgToﬁs): *(fgToﬁ†
√w
 
	`Toﬁs
());

89 
	}
}

90 
	gTMVA
::
Toﬁs
::
	$De°royIn°™˚
() {

93 #i‡
__˝lu•lus
 > 199711L

94 i‡(
fgToﬁs
 !0Ë{ 
dñëe
 fgToﬁs.
	`lﬂd
(); fgTools=0; }

96 i‡(
fgToﬁs
 !0Ë{ 
dñëe
 fgTools; fgTools=0; }

98 
	}
}

103 
	gTMVA
::
Toﬁs
::
	$Toﬁs
() :

104 
	`fRegexp
("$&|!%^&()'<>?= "),

105 
	`fLoggî
(
√w
 
	`MsgLoggî
("Tools")),

106 
	`fXMLEngöe
(
√w
 
	$TXMLEngöe
())

108 
	}
}

113 
	gTMVA
::
Toﬁs
::~
	$Toﬁs
()

115 
dñëe
 
fLoggî
;

116 
dñëe
 
fXMLEngöe
;

117 
	}
}

122 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$N‹mV¨übÀ
–
DoubÀ_t
 
x
, DoubÀ_à
xmö
, DoubÀ_à
xmax
 )

124  2*(
x
 - 
xmö
)/(
xmax
 - xmin) - 1.0;

125 
	}
}

133 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$GëSï¨©i⁄
–
TH1
* 
S
, TH1* 
B
 ) const

135 
DoubÀ_t
 
£∑øti⁄
 = 0;

140 i‡((
S
->
	`GëNbösX
(Ë!
B
->GetNbinsX()) || (S->GetNbinsX() <= 0)) {

141 
	`Log
(Ë<< 
kFATAL
 << "<GetSeparation> signalánd background"

143 << 
S
->
	`GëNbösX
(Ë<< " : " << 
B
->GëNbösX(Ë<< 
Endl
;

146 i‡(
S
->
	`GëXaxis
()->
	`GëXmö
(Ë!
B
->GetXaxis()->GetXmin() ||

147 
S
->
	`GëXaxis
()->
	`GëXmax
(Ë!
B
->GetXaxis()->GetXmax() ||

148 
S
->
	`GëXaxis
()->
	`GëXmax
(Ë<S->GëXaxis()->
	`GëXmö
()) {

149 
	`Log
(Ë<< 
kINFO
 << 
S
->
	`GëXaxis
()->
	`GëXmö
(Ë<< " " << 
B
->GetXaxis()->GetXmin()

150 << " " << 
S
->
	`GëXaxis
()->
	`GëXmax
(Ë<< " " << 
B
->GetXaxis()->GetXmax()

151 << " " << 
S
->
	`GëXaxis
()->
	`GëXmax
(Ë<< " " << S->GëXaxis()->
	`GëXmö
(Ë<< 
Endl
;

152 
	`Log
(Ë<< 
kFATAL
 << "<GetSeparation> signalánd background"

153 << " hi°ogøm†havêdif„ª¡ o∏övÆid dimísi⁄s:" << 
Endl
;

156 
I¡_t
 
n°ï
 = 
S
->
	`GëNbösX
();

157 
DoubÀ_t
 
ötBö
 = (
S
->
	`GëXaxis
()->
	`GëXmax
(Ë- S->GëXaxis()->
	`GëXmö
())/
n°ï
;

158 
DoubÀ_t
 
nS
 = 
S
->
	`GëSumOfWeights
()*
ötBö
;

159 
DoubÀ_t
 
nB
 = 
B
->
	`GëSumOfWeights
()*
ötBö
;

161 i‡(
nS
 > 0 && 
nB
 > 0) {

162 
I¡_t
 
bö
=0; bö<
n°ï
; bin++) {

163 
DoubÀ_t
 
s
 = 
S
->
	`GëBöC⁄ã¡
–
bö
+1 )/
	`DoubÀ_t
(
nS
);

164 
DoubÀ_t
 
b
 = 
B
->
	`GëBöC⁄ã¡
–
bö
+1 )/
	`DoubÀ_t
(
nB
);

166 i‡(
s
 + 
b
 > 0Ë
£∑øti⁄
 += (s - b)*(s - b)/(s + b);

168 
£∑øti⁄
 *(0.5*
ötBö
);

171 
	`Log
(Ë<< 
kWARNING
 << "<GetSeparation> histograms with zeroÉntries: "

172 << 
nS
 << " : " << 
nB
 << " cannot compute separation"

173 << 
Endl
;

174 
£∑øti⁄
 = 0;

177  
£∑øti⁄
;

178 
	}
}

186 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$GëSï¨©i⁄
–c⁄° 
PDF
& 
pdfS
, c⁄° PDF& 
pdfB
 ) const

188 
DoubÀ_t
 
xmö
 = 
pdfS
.
	`GëXmö
();

189 
DoubÀ_t
 
xmax
 = 
pdfS
.
	`GëXmax
();

191 i‡(
xmö
 !
pdfB
.
	`GëXmö
(Ë|| 
xmax
 !pdfB.
	`GëXmax
()) {

192 
	`Log
(Ë<< 
kFATAL
 << "<GetSeparation> Mismatch in PDFÜimits: "

193 << 
xmö
 << " " << 
pdfB
.
	`GëXmö
(Ë<< 
xmax
 << " " <<ÖdfB.
	`GëXmax
(Ë<< 
Endl
;

196 
DoubÀ_t
 
£∑øti⁄
 = 0;

197 
I¡_t
 
n°ï
 = 100;

198 
DoubÀ_t
 
ötBö
 = (
xmax
 - 
xmö
)/
	`DoubÀ_t
(
n°ï
);

199 
I¡_t
 
bö
=0; bö<
n°ï
; bin++) {

200 
DoubÀ_t
 
x
 = (
bö
 + 0.5)*
ötBö
 + 
xmö
;

201 
DoubÀ_t
 
s
 = 
pdfS
.
	`GëVÆ
–
x
 );

202 
DoubÀ_t
 
b
 = 
pdfB
.
	`GëVÆ
–
x
 );

204 i‡(
s
 + 
b
 > 0Ë
£∑øti⁄
 += (s - b)*(s - b)/(s + b);

206 
£∑øti⁄
 *(0.5*
ötBö
);

208  
£∑øti⁄
;

209 
	}
}

214 
	gTMVA
::
Toﬁs
::
CompuãSèt
–c⁄° 
°d
::
ve˘‹
<
TMVA
::
Evít
*>& 
evíts
, std::ve˘‹<
Flﬂt_t
>* 
vÆVec
,

215 
DoubÀ_t
& 
mónS
, DoubÀ_t& 
mónB
,

216 
DoubÀ_t
& 
rmsS
, DoubÀ_t& 
rmsB
,

217 
DoubÀ_t
& 
xmö
, DoubÀ_t& 
xmax
,

218 
I¡_t
 
sig«lCœss
, 
Boﬁ_t
 
n‹m
 )

220 i‡(0 =
vÆVec
)

221 
Log
(Ë<< 
kFATAL
 << "<Toﬁs::CompuãSèt> vÆuêve˘‹ i†zîÿpoöãr" << 
Endl
;

223 i‡–
	gevíts
.
size
(Ë!
vÆVec
->size() )

224 
Log
(Ë<< 
kWARNING
 << "<Tools::ComputeStat>Éventánd value vector have differentÜengths "

225 << 
evíts
.
size
(Ë<< "!=" << 
vÆVec
->size(Ë<< 
Endl
;

227 
L⁄g64_t
 
	gíåõs
 = 
vÆVec
->
size
();

230 
DoubÀ_t
* 
	gv¨VecS
 = 
√w
 DoubÀ_t[
íåõs
];

231 
DoubÀ_t
* 
	gv¨VecB
 = 
√w
 DoubÀ_t[
íåõs
];

232 
DoubÀ_t
* 
	gwgtVecS
 = 
√w
 DoubÀ_t[
íåõs
];

233 
DoubÀ_t
* 
	gwgtVecB
 = 
√w
 DoubÀ_t[
íåõs
];

234 
	gxmö
 = +
DBL_MAX
;

235 
	gxmax
 = -
DBL_MAX
;

236 
L⁄g64_t
 
	gnEvítsS
 = 0;

237 
L⁄g64_t
 
	gnEvítsB
 = 0;

238 
DoubÀ_t
 
	gxmö_
 = 0, 
	gxmax_
 = 0;

240 i‡(
	gn‹m
) {

241 
	gxmö_
 = *
°d
::
mö
–
vÆVec
->
begö
(), vÆVec->
íd
() );

242 
	gxmax_
 = *
°d
::
max
–
vÆVec
->
begö
(), vÆVec->
íd
() );

245 
I¡_t
 
	gõvt
=0; ievt<
	gíåõs
; ievt++) {

246 
DoubÀ_t
 
	gtheV¨
 = (*
vÆVec
)[
õvt
];

247 i‡(
	gn‹m
Ë
	gtheV¨
 = 
Toﬁs
::
N‹mV¨übÀ
–
theV¨
, 
xmö_
, 
xmax_
 );

249 i‡(
I¡_t
(
evíts
[
õvt
]->
GëCœss
()Ë=
sig«lCœss
 ){

250 
wgtVecS
[
nEvítsS
] = 
evíts
[
õvt
]->
GëWeight
();

251 
	gv¨VecS
[
nEvítsS
++] = 
theV¨
;

254 
	gwgtVecB
[
nEvítsB
] = 
evíts
[
õvt
]->
GëWeight
();

255 
	gv¨VecB
[
nEvítsB
++] = 
theV¨
;

258 i‡(
	gtheV¨
 > 
	gxmax
Ëxmax = 
theV¨
;

259 i‡(
	gtheV¨
 < 
	gxmö
Ëxmö = 
theV¨
;

267 
	gmónS
 = 
TMVA
::
Toﬁs
::
Món
–
nEvítsS
, 
v¨VecS
, 
wgtVecS
 );

268 
	gmónB
 = 
TMVA
::
Toﬁs
::
Món
–
nEvítsB
, 
v¨VecB
, 
wgtVecB
 );

269 
	grmsS
 = 
TMVA
::
Toﬁs
::
RMS
 ( 
nEvítsS
, 
v¨VecS
, 
wgtVecS
 );

270 
	grmsB
 = 
TMVA
::
Toﬁs
::
RMS
 ( 
nEvítsB
, 
v¨VecB
, 
wgtVecB
 );

272 
	gdñëe
 [] 
	gv¨VecS
;

273 
	gdñëe
 [] 
	gv¨VecB
;

274 
	gdñëe
 [] 
	gwgtVecS
;

275 
	gdñëe
 [] 
	gwgtVecB
;

283 
TM©rixD
* 
	gTMVA
::
Toﬁs
::
	$GëSQRoŸM©rix
–
TM©rixDSym
* 
symM©
 )

285 
I¡_t
 
n
 = 
symM©
->
	`GëNrows
();

288 
TM©rixDSymEigí
* 
eigí
 = 
√w
 
	`TM©rixDSymEigí
–*
symM©
 );

291 
TM©rixD
* 
si
 = 
√w
 
	`TM©rixD
–
eigí
->
	`GëEigíVe˘‹s
() );

292 
TM©rixD
* 
s
 = 
√w
 
	`TM©rixD
–*
si
 );

293 
si
->
	`Tøn•o£
( *si );

296 
TM©rixD
* 
d
 = 
√w
 
	`TM©rixD
–
n
,Ç);

297 
d
->
	`Mu…
–(*
si
), (*
symM©
Ë); (*dË*(*
s
);

300 
I¡_t
 
i
, 
j
;

301 
DoubÀ_t
 
ïsû⁄
 = 1.0e-8;

302 
i
=0; i<
n
; i++) {

303 
j
=0; j<
n
; j++) {

304 i‡((
i
 !
j
 && 
TM©h
::
	`Abs
((*
d
)(i,j))/TM©h::
	`Sqπ
((*d)(i,i)*(*d)(j,j)Ë> 
ïsû⁄
) ||

305 (
i
 =
j
 && (*
d
)(i,i) < 0)) {

307 
	`Log
(Ë<< 
kWARNING
 << "<GëSQRoŸM©rix>Éº‹ i¿m©rix düg⁄Æiz©i⁄;Öröãd Sánd B" << 
Endl
;

313 
i
=0; i<
n
; i++Ë
j
=0; j<n; j++Ëi‡(j !iË(*
d
)(i,j) = 0;

316 
i
=0; i<
n
; i++Ë(*
d
)(i,iË
TM©h
::
	`Sqπ
((*d)(i,i));

318 
TM©rixD
* 
sqπM©
 = 
√w
 
	`TM©rixD
–
n
,Ç );

319 
sqπM©
->
	`Mu…
–(*
s
), (*
d
) );

320 (*
sqπM©
Ë*(*
si
);

323 
sqπM©
->
	`Invît
();

325 
dñëe
 
eigí
;

326 
dñëe
 
s
;

327 
dñëe
 
si
;

328 
dñëe
 
d
;

330  
sqπM©
;

331 
	}
}

336 c⁄° 
TM©rixD
* 
	gTMVA
::
Toﬁs
::
	$GëC‹ªœti⁄M©rix
–c⁄° 
TM©rixD
* 
covM©
 )

339 i‡(
covM©
 == 0)  0;

341 
I¡_t
 
nv¨
 = 
covM©
->
	`GëNrows
();

342 i‡(
nv¨
 !
covM©
->
	`GëNcﬁs
())

343 
	`Log
(Ë<< 
kFATAL
 << "<GëC‹ªœti⁄M©rix> i≈uàm©rixÇŸ quadøtic" << 
Endl
;

345 
	`Log
(Ë<< 
kWARNING
;

346 
TM©rixD
* 
c‹rM©
 = 
√w
 
	`TM©rixD
–
nv¨
,Çvar );

347 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

348 
I¡_t
 
jv¨
=0; jv¨<
nv¨
; jvar++) {

349 i‡(
iv¨
 !
jv¨
) {

350 
DoubÀ_t
 
d
 = (*
covM©
)(
iv¨
, iv¨)*(*covM©)(
jv¨
, jvar);

351 i‡(
d
 > 1E-20Ë(*
c‹rM©
)(
iv¨
, 
jv¨
Ë(*
covM©
)(iv¨, jv¨)/
TM©h
::
	`Sqπ
(d);

353 
	`Log
() << "<GetCorrelationMatrix> zero variances for variables "

354 << "(" << 
iv¨
 << ", " << 
jv¨
 << ")" << 
Endl
;

355 (*
c‹rM©
)(
iv¨
, 
jv¨
) = 0;

357 i‡(
TM©h
::
	`Abs
–(*
c‹rM©
)(
iv¨
,
jv¨
)) > 1){

358 
	`Log
(Ë<< 
kWARNING


359 << " EÀmíà c‹r("<<
iv¨
<<","<<iv¨<<")=" << (*
c‹rM©
)(iv¨,
jv¨
)

360 << " sigma2="<<
d


361 << " cov("<<
iv¨
<<","<<iv¨<<")=" <<(*
covM©
)(ivar, ivar)

362 << " cov("<<
jv¨
<<","<<jv¨<<")=" <<(*
covM©
)(jvar, jvar)

363 << 
Endl
;

367 (*
c‹rM©
)(
iv¨
, ivar) = 1.0;

370 
	`Log
(Ë<< 
Endl
;

371  
c‹rM©
;

372 
	}
}

377 
TH1
* 
	gTMVA
::
Toﬁs
::
	$¥ojN‹mTH1F
–
TTªe
* 
theTªe
, c⁄° 
TSåög
& 
theV¨Name
,

378 c⁄° 
TSåög
& 
«me
, 
I¡_t
 
nbös
,

379 
DoubÀ_t
 
xmö
, DoubÀ_à
xmax
, c⁄° 
TSåög
& 
cut
 )

382 
xmax
 += 0.00001;

384 
TH1
* 
hi°
 = 
√w
 
	`TH1F
–
«me
,Çame, 
nbös
, 
xmö
, 
xmax
 );

385 
hi°
->
	`Sumw2
();

386 
theTªe
->
	`Proje˘
–
«me
, 
theV¨Name
, 
cut
 );

387 
	`N‹mHi°
–
hi°
 );

388  
hi°
;

389 
	}
}

394 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$N‹mHi°
–
TH1
* 
theHi°
, 
DoubÀ_t
 
n‹m
 )

396 i‡(!
theHi°
)  0;

398 i‡(
theHi°
->
	`GëSumw2N
(Ë=0ËtheHi°->
	`Sumw2
();

399 i‡(
theHi°
->
	`GëSumOfWeights
() != 0) {

400 
DoubÀ_t
 
w
 = ( 
theHi°
->
	`GëSumOfWeights
()

401 *(
theHi°
->
	`GëXaxis
()->
	`GëXmax
(Ë-ÅheHi°->GëXaxis()->
	`GëXmö
())/theHi°->
	`GëNbösX
() );

402 i‡(
w
 > 0Ë
theHi°
->
	`SˇÀ
–
n‹m
/w );

403  
w
;

407 
	}
}

412 
TLi°
* 
	gTMVA
::
Toﬁs
::
	$P¨£F‹m©Löe
–
TSåög
 
f‹m©Såög
, c⁄° * 
£p
 )

414 
TLi°
* 
œbñLi°
 = 
√w
 
	`TLi°
();

415 
œbñLi°
->
	`SëOw√r
();

416 
f‹m©Såög
.
	`Fú°
(
£p
)==0Ëf‹m©Såög.
	`Remove
(0,1);

418 
f‹m©Såög
.
	`Lígth
()>0) {

419 i‡(
f‹m©Såög
.
	`Fú°
(
£p
) == -1) {

420 
œbñLi°
->
	`Add
(
√w
 
	`TObjSåög
(
f‹m©Såög
.
	`D©a
()));

421 
f‹m©Såög
="";

425 
Ssiz_t
 
posSï
 = 
f‹m©Såög
.
	`Fú°
(
£p
);

426 
œbñLi°
->
	`Add
(
√w
 
	`TObjSåög
(
	`TSåög
(
	`f‹m©Såög
(0,
posSï
)).
	`D©a
()));

427 
f‹m©Såög
.
	`Remove
(0,
posSï
+1);

429 
f‹m©Såög
.
	`Fú°
(
£p
)==0Ëf‹m©Såög.
	`Remove
(0,1);

432  
œbñLi°
;

433 
	}
}

454 
	gve˘‹
<
	gI¡_t
>* 
	gTMVA
::
Toﬁs
::
P¨£ANNO±i⁄Såög
–
TSåög
 
theO±i⁄s
, 
I¡_t
 
nv¨
,

455 
ve˘‹
<
I¡_t
>* 
nodes
 )

457 
TLi°
* 
	gli°
 = 
TMVA
::
Toﬁs
::
P¨£F‹m©Löe
–
theO±i⁄s
, ":" );

461 i‡(
	gli°
->
GëSize
() < 1) {

462 
Log
(Ë<< 
	gkFATAL
 << "<P¨£ANNO±i⁄Såög> uƒecognized o±i⁄ såög: " << 
	gtheO±i⁄s
 << 
	gEndl
;

466 
	gnodes
->
push_back
–
©oi
–((
TObjSåög
*)
li°
->
At
(0))->
GëSåög
() ) );

468 
I¡_t
 
	ga
;

469 i‡(
	gli°
->
GëSize
() > 1) {

470 
I¡_t
 
	gi
=1; i<
	gli°
->
GëSize
(); i++) {

471 
TSåög
 
	gs
 = ((
TObjSåög
*)
li°
->
At
(
i
))->
GëSåög
();

472 
	gs
.
ToUµî
();

473 i‡(
s
(0) == 'N') {

474 i‡(
s
.
Lígth
(Ë> 1Ë
nodes
->
push_back
–
nv¨
 + 
©oi
(&s[1]) );

475 
	gnodes
->
push_back
–
nv¨
 );

477 i‡((
	ga
 = 
©oi
–
s
 )Ë> 0Ë
nodes
->
push_back
(átoi(s ) );

479 
Log
(Ë<< 
	gkFATAL
 << "<P¨£ANNO±i⁄Såög> uƒecognized o±i⁄ såög: " << 
	gtheO±i⁄s
 << 
	gEndl
;

484  
	gnodes
;

490 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$CheckS∂öes
–c⁄° 
TH1
* 
theHi°
, c⁄° 
TS∂öe
* 
theS∂öe
 )

492 c⁄° 
DoubÀ_t
 
ßnôyCrô
 = 0.01;

494 
Boﬁ_t
 
ªtvÆ
 = 
kTRUE
;

495 
I¡_t
 
ibö
=1; ibö<=
theHi°
->
	`GëNbösX
(); ibin++) {

496 
DoubÀ_t
 
x
 = 
theHi°
->
	`GëBöCíãr
–
ibö
 );

497 
DoubÀ_t
 
yh
 = 
theHi°
->
	`GëBöC⁄ã¡
–
ibö
 );

498 
DoubÀ_t
 
ys
 = 
theS∂öe
->
	`EvÆ
–
x
 );

500 i‡(
ys
 + 
yh
 > 0) {

501 
DoubÀ_t
 
dev
 = 0.5*(
ys
 - 
yh
)/(ys + yh);

502 i‡(
TM©h
::
	`Abs
(
dev
Ë> 
ßnôyCrô
) {

503 
	`Log
(Ë<< 
kFATAL
 << "<CheckSplines> Spline failed sanity criterion; "

504 << "Ññ©ivêdevüti⁄ from hi°ogøm: " << 
dev


505 << " i¿(bö, vÆue): (" << 
ibö
 << ", " << 
x
 << ")" << 
Endl
;

506 
ªtvÆ
 = 
kFALSE
;

511  
ªtvÆ
;

512 
	}
}

517 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
TMVA
::
Toﬁs
::
MVADiff
–
°d
::ve˘‹<DoubÀ_t>& 
a
, std::ve˘‹<DoubÀ_t>& 
b
 )

519 i‡(
a
.
size
(Ë!
b
.size()) {

520 
throw
;

522 
	gve˘‹
<
	gDoubÀ_t
> 
ªsu…
(
a
.
size
());

523 
UI¡_t
 
	gi
=0; i<
	ga
.
size
();i++Ë
	gªsu…
[
i
]=
a
[i]-
b
[i];

524  
	gªsu…
;

530 
	gTMVA
::
Toﬁs
::
SˇÀ
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
v
, DoubÀ_à
f
 )

532 
UI¡_t
 
	gi
=0; i<
	gv
.
size
();i++Ëv[
i
]*=
f
;

538 
	gTMVA
::
Toﬁs
::
SˇÀ
–
°d
::
ve˘‹
<
Flﬂt_t
>& 
v
, Flﬂt_à
f
 )

540 
UI¡_t
 
	gi
=0; i<
	gv
.
size
();i++Ëv[
i
]*=
f
;

549 
	gTMVA
::
Toﬁs
::
U£fulS‹tAs˚ndög
–
°d
::
ve˘‹
<ve˘‹<
DoubÀ_t
> >& 
v
, std::ve˘‹<
TSåög
>* 
vs
 ){

550 
UI¡_t
 
nAºays
=
v
.
size
();

551 
DoubÀ_t
 
	gãmp
;

552 i‡(
	gnAºays
 > 0) {

553 
UI¡_t
 
	gsizeoÁºay
=
v
[0].
size
();

554 
UI¡_t
 
	gi
=0; i<
	gsizeoÁºay
; i++) {

555 
UI¡_t
 
	gj
=
sizeoÁºay
-1; j>
	gi
; j--) {

556 i‡(
	gv
[0][
j
-1] > v[0][j]) {

557 
UI¡_t
 
	gk
=0; k< 
	gnAºays
; k++) {

558 
	gãmp
 = 
v
[
k
][
j
-1]; 
	gv
[k][j-1] = v[k][j]; v[k][j] = 
ãmp
;

560 i‡(
	gnuŒ±r
 !
vs
) {

561 
TSåög
 
ãmps
 = (*
vs
)[
j
-1]; (*
	gvs
)[j-1] = (*vs)[j]; (*vs)[j] =Åemps;

575 
	gTMVA
::
Toﬁs
::
U£fulS‹tDes˚ndög
–
°d
::
ve˘‹
<°d::ve˘‹<
DoubÀ_t
> >& 
v
, std::ve˘‹<
TSåög
>* 
vs
 )

577 
UI¡_t
 
nAºays
=
v
.
size
();

578 
DoubÀ_t
 
	gãmp
;

579 i‡(
	gnAºays
 > 0) {

580 
UI¡_t
 
	gsizeoÁºay
=
v
[0].
size
();

581 
UI¡_t
 
	gi
=0; i<
	gsizeoÁºay
; i++) {

582 
UI¡_t
 
	gj
=
sizeoÁºay
-1; j>
	gi
; j--) {

583 i‡(
	gv
[0][
j
-1] < v[0][j]) {

584 
UI¡_t
 
	gk
=0; k< 
	gnAºays
; k++) {

585 
	gãmp
 = 
v
[
k
][
j
-1]; 
	gv
[k][j-1] = v[k][j]; v[k][j] = 
ãmp
;

587 i‡(
	gnuŒ±r
 !
vs
) {

588 
TSåög
 
ãmps
 = (*
vs
)[
j
-1]; (*
	gvs
)[j-1] = (*vs)[j]; (*vs)[j] =Åemps;

600 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$GëMutuÆInf‹m©i⁄
–c⁄° 
TH2F
& 
h_
 )

602 
DoubÀ_t
 
hi
 = 
h_
.
	`I¡egøl
();

603 i‡(
hi
 == 0)  -1;

606 
TH2F
 
	`h
–
h_
 );

607 
h
.
	`ReböX
(2);

608 
h
.
	`ReböY
(2);

610 
DoubÀ_t
 
mutuÆInfo
 = 0.;

611 
I¡_t
 
maxBöX
 = 
h
.
	`GëNbösX
();

612 
I¡_t
 
maxBöY
 = 
h
.
	`GëNbösY
();

613 
I¡_t
 
x
 = 1; x <
maxBöX
; x++) {

614 
I¡_t
 
y
 = 1; y <
maxBöY
; y++) {

615 
DoubÀ_t
 
p_xy
 = 
h
.
	`GëBöC⁄ã¡
(
x
,
y
)/
hi
;

616 
DoubÀ_t
 
p_x
 = 
h
.
	`I¡egøl
(
x
,x,1,
maxBöY
)/
hi
;

617 
DoubÀ_t
 
p_y
 = 
h
.
	`I¡egøl
(1,
maxBöX
,
y
,y)/
hi
;

618 i‡(
p_x
 > 0. && 
p_y
 > 0. && 
p_xy
 > 0.){

619 
mutuÆInfo
 +
p_xy
*
TM©h
::
	`Log
’_xy / (
p_x
 * 
p_y
));

624  
mutuÆInfo
;

625 
	}
}

631 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$GëC‹ªœti⁄R©io
–c⁄° 
TH2F
& 
h_
 )

633 
DoubÀ_t
 
hi
 = 
h_
.
	`I¡egøl
();

634 i‡(
hi
 == 0.)  -1;

637 
TH2F
 
	`h
–
h_
 );

638 
h
.
	`ReböX
(2);

639 
h
.
	`ReböY
(2);

641 
DoubÀ_t
 
c‹rR©io
 = 0.;

642 
DoubÀ_t
 
y_món
 = 
h
.
	`Proje˘i⁄Y
()->
	`GëMón
();

643 
I¡_t
 
ix
=1; ix<=
h
.
	`GëNbösX
(); ix++) {

644 
c‹rR©io
 +(
h
.
	`I¡egøl
(
ix
,ix,1,h.
	`GëNbösY
())/
hi
)*
	`pow
((
	`GëYMón_böX
(h,ix)-
y_món
),2);

646 
c‹rR©io
 /
	`pow
(
h
.
	`Proje˘i⁄Y
()->
	`GëRMS
(),2);

647  
c‹rR©io
;

648 
	}
}

653 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$GëYMón_böX
–c⁄° 
TH2
& 
h
, 
I¡_t
 
bö_x
 )

655 i‡(
h
.
	`I¡egøl
(
bö_x
,bö_x,1,h.
	`GëNbösY
()) == 0.) { 0;}

656 
DoubÀ_t
 
y_bö_món
 = 0.;

657 
TH1
* 
py
 = 
h
.
	`Proje˘i⁄Y
();

658 
I¡_t
 
y
 = 1; y <
h
.
	`GëNbösY
(); y++){

659 
y_bö_món
 +
h
.
	`GëBöC⁄ã¡
(
bö_x
,
y
)*
py
->
	`GëBöCíãr
(y);

661 
y_bö_món
 /
h
.
	`I¡egøl
(
bö_x
,bö_x,1,h.
	`GëNbösY
());

662  
y_bö_món
;

663 
	}
}

668 
TH2F
* 
	gTMVA
::
Toﬁs
::
	$Tøn•o£Hi°
–c⁄° 
TH2F
& 
h
 )

671 i‡(
h
.
	`GëNbösX
(Ë!h.
	`GëNbösY
()) {

672 
	`Log
(Ë<< 
kFATAL
 << "<Tøn•o£Hi°> c™nŸÅøn•o£Ç⁄-quadøti¯hi°ogøm" << 
Endl
;

675 
TH2F
 *
å™•o£dHi°o
 = 
√w
 
	`TH2F
–
h
 );

676 
I¡_t
 
ix
=1; ix <
h
.
	`GëNbösX
(); ix++){

677 
I¡_t
 
iy
=1; iy <
h
.
	`GëNbösY
(); iy++){

678 
å™•o£dHi°o
->
	`SëBöC⁄ã¡
(
iy
,
ix
,
h
.
	`GëBöC⁄ã¡
(ix,iy));

683 
DoubÀ_t
 
°©s_ﬁd
[7];

684 
DoubÀ_t
 
°©s_√w
[7];

686 
h
.
	`GëSèts
(
°©s_ﬁd
);

687 
°©s_√w
[0] = 
°©s_ﬁd
[0];

688 
°©s_√w
[1] = 
°©s_ﬁd
[1];

689 
°©s_√w
[2] = 
°©s_ﬁd
[4];

690 
°©s_√w
[3] = 
°©s_ﬁd
[5];

691 
°©s_√w
[4] = 
°©s_ﬁd
[2];

692 
°©s_√w
[5] = 
°©s_ﬁd
[3];

693 
°©s_√w
[6] = 
°©s_ﬁd
[6];

694 
å™•o£dHi°o
->
	`PutSèts
(
°©s_√w
);

696  
å™•o£dHi°o
;

697 
	}
}

702 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$CheckF‹SûítO±i⁄
–c⁄° 
TSåög
& 
cs
 ) const

704 
Boﬁ_t
 
isSûít
 = 
kFALSE
;

706 
TSåög
 
	`s
–
cs
 );

707 
s
.
	`ToLowî
();

708 
s
.
	`Rïœ˚AŒ
(" ","");

709 i‡(
s
.
	`C⁄èös
("silent") && !s.Contains("silent=f")) {

710 i‡(!
s
.
	`C⁄èös
("!sûít"Ë|| s.C⁄èös("sûítÒ")Ë
isSûít
 = 
kTRUE
;

713  
isSûít
;

714 
	}
}

719 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$CheckF‹Vîbo£O±i⁄
–c⁄° 
TSåög
& 
cs
 ) const

721 
Boﬁ_t
 
isVîbo£
 = 
kFALSE
;

723 
TSåög
 
	`s
–
cs
 );

724 
s
.
	`ToLowî
();

725 
s
.
	`Rïœ˚AŒ
(" ","");

726 
°d
::
ve˘‹
<
TSåög
> 
v
 = 
	`S∂ôSåög
–
s
, ':' );

727 
°d
::
ve˘‹
<
TSåög
>::
ôî©‹
 
ô
 = 
v
.
	`begö
(); ià!v.
	`íd
(); it++) {

728 i‡((*
ô
 ="v" || *ô ="vîbo£"Ë&& !ô->
	`C⁄èös
("!")Ë
isVîbo£
 = 
kTRUE
;

731  
isVîbo£
;

732 
	}
}

737 
	gTMVA
::
Toﬁs
::
U£fulS‹tDes˚ndög
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
v
 )

739 
ve˘‹
< ve˘‹<
DoubÀ_t
> > 
vãmp
;

740 
	gvãmp
.
push_back
(
v
);

741 
U£fulS‹tDes˚ndög
(
vãmp
);

742 
	gv
 = 
vãmp
[0];

748 
	gTMVA
::
Toﬁs
::
U£fulS‹tAs˚ndög
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
v
 )

750 
ve˘‹
<ve˘‹<
DoubÀ_t
> > 
vãmp
;

751 
	gvãmp
.
push_back
(
v
);

752 
U£fulS‹tAs˚ndög
(
vãmp
);

753 
	gv
 = 
vãmp
[0];

759 
I¡_t
 
	gTMVA
::
Toﬁs
::
GëIndexMaxEÀmít
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
v
 )

761 i‡(
v
.
em±y
())  -1;

763 
I¡_t
 
	gpos
=0; 
DoubÀ_t
 
	gmx
=
v
[0];

764 
UI¡_t
 
	gi
=0; i<
	gv
.
size
(); i++){

765 i‡(
	gv
[
i
] > 
	gmx
){

766 
	gmx
=
v
[
i
];

767 
	gpos
=
i
;

770  
	gpos
;

776 
I¡_t
 
	gTMVA
::
Toﬁs
::
GëIndexMöEÀmít
–
°d
::
ve˘‹
<
DoubÀ_t
>& 
v
 )

778 i‡(
v
.
em±y
())  -1;

780 
I¡_t
 
	gpos
=0; 
DoubÀ_t
 
	gmn
=
v
[0];

781 
UI¡_t
 
	gi
=0; i<
	gv
.
size
(); i++){

782 i‡(
	gv
[
i
] < 
	gmn
){

783 
	gmn
=
v
[
i
];

784 
	gpos
=
i
;

787  
	gpos
;

795 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$C⁄èösReguœrEx¥essi⁄
–c⁄° 
TSåög
& 
s
 )

797 
Boﬁ_t
 
ªguœr
 = 
kFALSE
;

798 
I¡_t
 
i
 = 0; i < 
Toﬁs
::
fRegexp
.
	`Lígth
(); i++)

799 i‡(
s
.
	`C⁄èös
–
Toﬁs
::
fRegexp
[
i
] )Ë{ 
ªguœr
 = 
kTRUE
; ; }

801  
ªguœr
;

802 
	}
}

809 
TSåög
 
	gTMVA
::
Toﬁs
::
	$Rïœ˚ReguœrEx¥essi⁄s
–c⁄° 
TSåög
& 
s
, c⁄° TSåög& 
r
 )

811 
TSåög
 
¢ew
 = 
s
;

812 
I¡_t
 
i
 = 0; i < 
Toﬁs
::
fRegexp
.
	`Lígth
(); i++)

813 
¢ew
.
	`Rïœ˚AŒ
–
Toﬁs
::
fRegexp
[
i
], 
r
 );

815 
¢ew
.
	`Rïœ˚AŒ
–"::", 
r
 );

816 
¢ew
.
	`Rïœ˚AŒ
( "$", "_S_" );

817 
¢ew
.
	`Rïœ˚AŒ
( "&", "_A_" );

818 
¢ew
.
	`Rïœ˚AŒ
( "%", "_MOD_" );

819 
¢ew
.
	`Rïœ˚AŒ
( "|", "_O_" );

820 
¢ew
.
	`Rïœ˚AŒ
( "*", "_T_" );

821 
¢ew
.
	`Rïœ˚AŒ
( "/", "_D_" );

822 
¢ew
.
	`Rïœ˚AŒ
( "+", "_P_" );

823 
¢ew
.
	`Rïœ˚AŒ
( "-", "_M_" );

824 
¢ew
.
	`Rïœ˚AŒ
( " ", "_" );

825 
¢ew
.
	`Rïœ˚AŒ
( "[", "_" );

826 
¢ew
.
	`Rïœ˚AŒ
( "]", "_" );

827 
¢ew
.
	`Rïœ˚AŒ
( "=", "_E_" );

828 
¢ew
.
	`Rïœ˚AŒ
( ">", "_GT_" );

829 
¢ew
.
	`Rïœ˚AŒ
( "<", "_LT_" );

830 
¢ew
.
	`Rïœ˚AŒ
( "(", "_" );

831 
¢ew
.
	`Rïœ˚AŒ
( ")", "_" );

833  
¢ew
;

834 
	}
}

839 c⁄° 
	gTSåög
& 
	gTMVA
::
Toﬁs
::
	$Cﬁ‹
–c⁄° 
TSåög
& 
c
 )

841 c⁄° 
TSåög
 
gCÃ_n⁄e
 = "" ;

842 c⁄° 
TSåög
 
gCÃ_whôe
 = "\033[1;37m";

843 c⁄° 
TSåög
 
gCÃ_bœck
 = "\033[30m";

844 c⁄° 
TSåög
 
gCÃ_blue
 = "\033[34m";

845 c⁄° 
TSåög
 
gCÃ_ªd
 = "\033[1;31m" ;

846 c⁄° 
TSåög
 
gCÃ_yñlow
 = "\033[1;33m";

847 c⁄° 
TSåög
 
gCÃ_d¨kªd
 = "\033[31m";

848 c⁄° 
TSåög
 
gCÃ_d¨kgªí
 = "\033[32m";

849 c⁄° 
TSåög
 
gCÃ_d¨kyñlow
 = "\033[33m";

851 c⁄° 
TSåög
 
gCÃ_bﬁd
 = "\033[1m" ;

852 c⁄° 
TSåög
 
gCÃ_bœck_b
 = "\033[30m" ;

853 c⁄° 
TSåög
 
gCÃ_lblue_b
 = "\033[1;34m" ;

854 c⁄° 
TSåög
 
gCÃ_cy™_b
 = "\033[0;36m" ;

855 c⁄° 
TSåög
 
gCÃ_lgªí_b
 = "\033[1;32m";

857 c⁄° 
TSåög
 
gCÃ_blue_bg
 = "\033[44m";

858 c⁄° 
TSåög
 
gCÃ_ªd_bg
 = "\033[1;41m";

859 c⁄° 
TSåög
 
gCÃ_whôe⁄blue
 = "\033[1;44m";

860 c⁄° 
TSåög
 
gCÃ_whôe⁄gªí
 = "\033[1;42m";

861 c⁄° 
TSåög
 
gCÃ_gªy_bg
 = "\033[47m";

863 c⁄° 
TSåög
 
gCÃ_ª£t
 = "\033[0m";

865 i‡(!
	`gC⁄fig
().
	`U£Cﬁ‹
()Ë 
gCÃ_n⁄e
;

867 i‡(
c
 ="whôe" )  
gCÃ_whôe
;

868 i‡(
c
 ="blue" )  
gCÃ_blue
;

869 i‡(
c
 ="bœck" )  
gCÃ_bœck
;

870 i‡(
c
 ="lightblue"Ë 
gCÃ_cy™_b
;

871 i‡(
c
 ="yñlow"Ë 
gCÃ_yñlow
;

872 i‡(
c
 ="ªd" )  
gCÃ_ªd
;

873 i‡(
c
 ="dªd" )  
gCÃ_d¨kªd
;

874 i‡(
c
 ="dgªí"Ë 
gCÃ_d¨kgªí
;

875 i‡(
c
 ="lgªíb"Ë 
gCÃ_lgªí_b
;

876 i‡(
c
 ="dyñlow"Ë 
gCÃ_d¨kyñlow
;

878 i‡(
c
 ="bﬁd"Ë 
gCÃ_bﬁd
;

879 i‡(
c
 ="bbœck"Ë 
gCÃ_bœck_b
;

881 i‡(
c
 ="blue_bgd"Ë 
gCÃ_blue_bg
;

882 i‡(
c
 ="ªd_bgd" )  
gCÃ_ªd_bg
;

884 i‡(
c
 ="whôe_⁄_blue" )  
gCÃ_whôe⁄blue
;

885 i‡(
c
 ="whôe_⁄_gªí"Ë 
gCÃ_whôe⁄gªí
;

887 i‡(
c
 ="ª£t"Ë 
gCÃ_ª£t
;

889 
°d
::
cout
 << "Unknow¿cﬁ‹ " << 
c
 << std::
ídl
;

890 
	`exô
(1);

892  
gCÃ_n⁄e
;

893 
	}
}

898 
	gTMVA
::
Toﬁs
::
F‹m©ãdOuçut
–c⁄° 
°d
::
ve˘‹
<
DoubÀ_t
>& 
vÆues
, c⁄° std::ve˘‹<
TSåög
>& 
V
,

899 c⁄° 
TSåög
 
tôÀV¨s
, c⁄° TSåög 
tôÀVÆues
, 
MsgLoggî
& 
loggî
,

900 
TSåög
 
f‹m©
 )

903 
UI¡_t
 
	gnv¨
 = 
V
.
size
();

904 i‡((
	gUI¡_t
)
	gvÆues
.
size
(Ë!
nv¨
) {

905 
loggî
 << 
kFATAL
 << "<FormattedOutput> fatalÉrror with dimensions: "

906 << 
vÆues
.
size
(Ë<< " OR " << " !" << 
nv¨
 << 
Endl
;

910 
UI¡_t
 
	gmaxL
 = 7;

911 
	g°d
::
ve˘‹
<
UI¡_t
> 
vLígths
;

912 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; iv¨++Ë
	gmaxL
 = 
TM©h
::
Max
–(UI¡_t)
V
[
iv¨
].
Lígth
(), 
maxL
 );

913 
	gmaxL
 = 
TM©h
::
Max
–(
UI¡_t
)
tôÀV¨s
.
Lígth
(), 
maxL
 );

916 
UI¡_t
 
	gmaxV
 = 7;

917 
	gmaxV
 = 
TM©h
::
Max
–(
UI¡_t
)
tôÀVÆues
.
Lígth
(Ë+ 1, 
maxL
 );

920 
UI¡_t
 
	g˛í
 = 
maxL
 + 
maxV
 + 3;

923 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

924 
	gloggî
 << 
	gEndl
;

927 
	gloggî
 << 
£tw
(
maxL
Ë<< 
	gtôÀV¨s
 << ":";

928 
	gloggî
 << 
£tw
(
maxV
+1Ë<< 
	gtôÀVÆues
 << ":";

929 
	gloggî
 << 
	gEndl
;

930 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

931 
	gloggî
 << 
	gEndl
;

934 
UI¡_t
 
	gúow
=0; irow<
	gnv¨
; irow++) {

935 
	gloggî
 << 
£tw
(
maxL
Ë<< 
	gV
[
úow
] << ":";

936 
	gloggî
 << 
£tw
(
maxV
+1Ë<< 
F‹m
–
f‹m©
.
D©a
(), 
vÆues
[
úow
] );

937 
	gloggî
 << 
	gEndl
;

941 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

942 
	gloggî
 << 
	gEndl
;

948 
	gTMVA
::
Toﬁs
::
F‹m©ãdOuçut
–c⁄° 
TM©rixD
& 
M
, c⁄° 
°d
::
ve˘‹
<
TSåög
>& 
V
, 
MsgLoggî
& 
loggî
 )

951 
UI¡_t
 
	gnv¨
 = 
V
.
size
();

952 i‡((
	gUI¡_t
)
	gM
.
GëNcﬁs
(Ë!
nv¨
 || (
UI¡_t
)
M
.
GëNrows
() !=Çvar) {

953 
loggî
 << 
kFATAL
 << "<FormattedOutput> fatalÉrror with dimensions: "

954 << 
M
.
GëNcﬁs
(Ë<< " OR " << M.
GëNrows
(Ë<< " !" << 
nv¨
 << " ==>áb‹t" << 
Endl
;

958 
UI¡_t
 
	gmöL
 = 7;

959 
UI¡_t
 
	gmaxL
 = 
möL
;

960 
	g°d
::
ve˘‹
<
UI¡_t
> 
vLígths
;

961 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

962 
	gvLígths
.
push_back
(
TM©h
::
Max
–(
UI¡_t
)
V
[
iv¨
].
Lígth
(), 
möL
 ));

963 
	gmaxL
 = 
TM©h
::
Max
–
vLígths
.
back
(), 
maxL
 );

967 
UI¡_t
 
	g˛í
 = 
maxL
+1;

968 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnv¨
; icﬁ++Ë
	g˛í
 +
vLígths
[
icﬁ
]+1;

971 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

972 
	gloggî
 << 
	gEndl
;

975 
	gloggî
 << 
£tw
(
maxL
+1) << " ";

976 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnv¨
; icﬁ++Ë
	gloggî
 << 
£tw
(
vLígths
[
icﬁ
]+1Ë<< 
	gV
[icol];

977 
	gloggî
 << 
	gEndl
;

980 
UI¡_t
 
	gúow
=0; irow<
	gnv¨
; irow++) {

981 
	gloggî
 << 
£tw
(
maxL
Ë<< 
	gV
[
úow
] << ":";

982 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnv¨
; icol++) {

983 
	gloggî
 << 
£tw
(
vLígths
[
icﬁ
]+1Ë<< 
F‹m
–"%+1.3f", 
M
(
úow
,icol) );

985 
	gloggî
 << 
	gEndl
;

989 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

990 
	gloggî
 << 
	gEndl
;

996 
	gTMVA
::
Toﬁs
::
F‹m©ãdOuçut
–c⁄° 
TM©rixD
& 
M
,

997 c⁄° 
°d
::
ve˘‹
<
TSåög
>& 
vît
, c⁄° std::ve˘‹<TSåög>& 
h‹iz
,

998 
MsgLoggî
& 
loggî
 )

1001 
UI¡_t
 
	gnvv¨
 = 
vît
.
size
();

1002 
UI¡_t
 
	gnhv¨
 = 
h‹iz
.
size
();

1005 
UI¡_t
 
	gmöL
 = 7;

1006 
UI¡_t
 
	gmaxL
 = 
möL
;

1007 
	g°d
::
ve˘‹
<
UI¡_t
> 
vLígths
;

1008 
UI¡_t
 
	giv¨
=0; iv¨<
	gnvv¨
; ivar++) {

1009 
	gvLígths
.
push_back
(
TM©h
::
Max
–(
UI¡_t
)
vît
[
iv¨
].
Lígth
(), 
möL
 ));

1010 
	gmaxL
 = 
TM©h
::
Max
–
vLígths
.
back
(), 
maxL
 );

1014 
UI¡_t
 
	gmöLh
 = 7;

1015 
UI¡_t
 
	gmaxLh
 = 
möLh
;

1016 
	g°d
::
ve˘‹
<
UI¡_t
> 
hLígths
;

1017 
UI¡_t
 
	giv¨
=0; iv¨<
	gnhv¨
; ivar++) {

1018 
	ghLígths
.
push_back
(
TM©h
::
Max
–(
UI¡_t
)
h‹iz
[
iv¨
].
Lígth
(), 
möL
 ));

1019 
	gmaxLh
 = 
TM©h
::
Max
–
hLígths
.
back
(), 
maxLh
 );

1022 
UI¡_t
 
	g˛í
 = 
maxLh
+1;

1023 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnhv¨
; icﬁ++Ë
	g˛í
 +
hLígths
[
icﬁ
]+1;

1026 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

1027 
	gloggî
 << 
	gEndl
;

1030 
	gloggî
 << 
£tw
(
maxL
+1) << " ";

1031 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnhv¨
; icﬁ++Ë
	gloggî
 << 
£tw
(
hLígths
[
icﬁ
]+1Ë<< 
	gh‹iz
[icol];

1032 
	gloggî
 << 
	gEndl
;

1035 
UI¡_t
 
	gúow
=0; irow<
	gnvv¨
; irow++) {

1036 
	gloggî
 << 
£tw
(
maxL
Ë<< 
	gvît
[
úow
] << ":";

1037 
UI¡_t
 
	gicﬁ
=0; icﬁ<
	gnhv¨
; icol++) {

1038 
	gloggî
 << 
£tw
(
hLígths
[
icﬁ
]+1Ë<< 
F‹m
–"%+1.3f", 
M
(
úow
,icol) );

1040 
	gloggî
 << 
	gEndl
;

1044 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
	gloggî
 << "-";

1045 
	gloggî
 << 
	gEndl
;

1051 
TSåög
 
	gTMVA
::
Toﬁs
::
	$GëXTôÀWôhUnô
–c⁄° 
TSåög
& 
tôÀ
, c⁄° TSåög& 
unô
 )

1053  ( 
unô
 ="" ? 
tôÀ
 : (Åitle + " [" + unit + "]" ) );

1054 
	}
}

1059 
TSåög
 
	gTMVA
::
Toﬁs
::
	$GëYTôÀWôhUnô
–c⁄° 
TH1
& 
h
, c⁄° 
TSåög
& 
unô
, 
Boﬁ_t
 
n‹mÆi£d
 )

1061 
TSåög
 
ªtvÆ
 = ( 
n‹mÆi£d
 ? "(1/N) " : "" );

1062 
ªtvÆ
 +
	`F‹m
–"dN_{ }/^{ }%.3g %s", 
h
.
	`GëXaxis
()->
	`GëBöWidth
(1), 
unô
.
	`D©a
() );

1063  
ªtvÆ
;

1064 
	}
}

1069 
	gTMVA
::
Toﬁs
::
	$WrôeFlﬂtArbôøryPªcisi⁄
–
Flﬂt_t
 
vÆ
, 
o°ªam
& 
os
 )

1071 
os
 << 
vÆ
 << " :: ";

1072 * 
c
 = &
vÆ
;

1073 
i
=0; i<4; i++) {

1074 
I¡_t
 
ic
 = *((*)
c
+
i
)-'\0';

1075 i‡(
ic
<0) ic+=256;

1076 
os
 << 
ic
 << " ";

1078 
os
 << ":: ";

1079 
	}
}

1084 
	gTMVA
::
Toﬁs
::
	$RódFlﬂtArbôøryPªcisi⁄
–
Flﬂt_t
& 
vÆ
, 
i°ªam
& 
is
 )

1086 
Flﬂt_t
 
a
 = 0;

1087 
is
 >> 
a
;

1088 
TSåög
 
dn
;

1089 
is
 >> 
dn
;

1090 
I¡_t
 
c
[4];

1091 * 
≠
 = &
a
;

1092 
i
=0; i<4; i++) {

1093 
is
 >> 
c
[
i
];

1094 *((*)
≠
+
i
Ë'\0'+
c
[i];

1096 
is
 >> 
dn
;

1097 
vÆ
 = 
a
;

1098 
	}
}

1105 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$HasAâr
–* 
node
, c⁄° * 
©å«me
 )

1107  
	`xmÀngöe
().
	`HasAâr
(
node
, 
©å«me
);

1108 
	}
}

1113 
	gTMVA
::
Toﬁs
::
	$RódAâr
–* 
node
, c⁄° * 
©å«me
, 
TSåög
& 
vÆue
 )

1115 i‡(!
	`HasAâr
(
node
, 
©å«me
)) {

1116 c⁄° * 
nodíame
 = 
	`xmÀngöe
().
	`GëNodeName
(
node
);

1117 
	`Log
(Ë<< 
kFATAL
 << "TryögÅÿªadÇ⁄-exi°ögáâribuã '" << 
©å«me
 << "' from xm»nodê'" << 
nodíame
 << "'" << 
Endl
;

1119 c⁄° * 
vÆ
 = 
	`xmÀngöe
().
	`GëAâr
(
node
, 
©å«me
);

1120 
vÆue
 = 
	`TSåög
(
vÆ
);

1121 
	}
}

1126 
	gTMVA
::
Toﬁs
::
	$AddAâr
–* 
node
, c⁄° * 
©å«me
, c⁄° * 
vÆue
 )

1128 if–
node
 == 0 ) ;

1129 
	`gToﬁs
().
	`xmÀngöe
().
	`NewAâr
(
node
, 0, 
©å«me
, 
vÆue
 );

1130 
	}
}

1135 * 
	gTMVA
::
Toﬁs
::
	$AddChûd
–* 
∑ª¡
, c⁄° * 
chûd«me
, c⁄° * 
c⁄ã¡
, 
boﬁ
 
isRoŸNode
 )

1137 if–!
isRoŸNode
 && 
∑ª¡
 == 0 )  0;

1138  
	`gToﬁs
().
	`xmÀngöe
().
	`NewChûd
(
∑ª¡
, 0, 
chûd«me
, 
c⁄ã¡
);

1139 
	}
}

1143 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$AddCommít
–* 
node
, c⁄° * 
commít
 ) {

1144 if–
node
 =0 )  
kFALSE
;

1145  
	`gToﬁs
().
	`xmÀngöe
().
	`AddCommít
(
node
, 
commít
);

1146 
	}
}

1151 * 
	gTMVA
::
Toﬁs
::
	$GëP¨ít
–* 
chûd
)

1153 * 
∑r
 = 
	`xmÀngöe
().
	`GëP¨ít
(
chûd
);

1155  
∑r
;

1156 
	}
}

1161 * 
	gTMVA
::
Toﬁs
::
	$GëChûd
–* 
∑ª¡
, c⁄° * 
chûd«me
 )

1163 * 
ch
 = 
	`xmÀngöe
().
	`GëChûd
(
∑ª¡
);

1164 i‡(
chûd«me
 != 0) {

1165 
ch
!=0 && 
	`°rcmp
(
	`xmÀngöe
().
	`GëNodeName
(ch),
chûd«me
Ë!0Ëch = xmÀngöe().
	`GëNext
(ch);

1167  
ch
;

1168 
	}
}

1173 * 
	gTMVA
::
Toﬁs
::
	$GëNextChûd
–* 
¥evchûd
, c⁄° * 
chûd«me
 )

1175 * 
ch
 = 
	`xmÀngöe
().
	`GëNext
(
¥evchûd
);

1176 i‡(
chûd«me
 != 0) {

1177 
ch
!=0 && 
	`°rcmp
(
	`xmÀngöe
().
	`GëNodeName
(ch),
chûd«me
)!=0Ëch = xmÀngöe().
	`GëNext
(ch);

1179  
ch
;

1180 
	}
}

1185 c⁄° * 
	gTMVA
::
Toﬁs
::
	$GëC⁄ã¡
–* 
node
 )

1187  
	`xmÀngöe
().
	`GëNodeC⁄ã¡
(
node
);

1188 
	}
}

1193 c⁄° * 
	gTMVA
::
Toﬁs
::
	$GëName
–* 
node
 )

1195  
	`xmÀngöe
().
	`GëNodeName
(
node
);

1196 
	}
}

1201 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$AddRawLöe
–* 
node
, c⁄° * 
øw
 )

1203  
	`xmÀngöe
().
	`AddRawLöe
–
node
, 
øw
 );

1204 
	}
}

1210 
	g°d
::
ve˘‹
<
TSåög
> 
TMVA
::
Toﬁs
::
	$S∂ôSåög
(c⁄° 
TSåög
& 
theO±
, c⁄° 
£∑øt‹
 ) const

1212 
°d
::
ve˘‹
<
TSåög
> 
•lôV
;

1213 
TSåög
 
	`•lôO±
(
theO±
);

1214 
•lôO±
.
	`Rïœ˚AŒ
("\n"," ");

1215 
•lôO±
 = s∂ôO±.
	`Såù
(
TSåög
::
kBŸh
,
£∑øt‹
);

1216 
•lôO±
.
	`Lígth
()>0) {

1217 i‡–!
•lôO±
.
	`C⁄èös
(
£∑øt‹
) ) {

1218 
•lôV
.
	`push_back
(
•lôO±
);

1222 
TSåög
 
toSave
 = 
	`•lôO±
(0,
•lôO±
.
	`Fú°
(
£∑øt‹
));

1223 
•lôV
.
	`push_back
(
toSave
);

1224 
•lôO±
 = 
	`•lôO±
(•lôO±.
	`Fú°
(
£∑øt‹
),•lôO±.
	`Lígth
());

1226 
•lôO±
 = s∂ôO±.
	`Såù
(
TSåög
::
kLódög
,
£∑øt‹
);

1228  
•lôV
;

1229 
	}
}

1234 
TSåög
 
	gTMVA
::
Toﬁs
::
	$SåögFromI¡
–
L⁄g_t
 
i
 )

1236 
°d
::
°rög°ªam
 
s
;

1237 
s
 << 
i
;

1238  
	`TSåög
(
s
.
	`°r
().
	`c_°r
());

1239 
	}
}

1244 
TSåög
 
	gTMVA
::
Toﬁs
::
	$SåögFromDoubÀ
–
DoubÀ_t
 
d
 )

1246 
°d
::
°rög°ªam
 
s
;

1247 
s
 << 
	`F‹m
–"%5.8e", 
d
 );

1248  
	`TSåög
(
s
.
	`°r
().
	`c_°r
());

1249 
	}
}

1254 
	gTMVA
::
Toﬁs
::
	$WrôeTM©rixDToXML
–* 
node
, c⁄° * 
«me
, 
TM©rixD
* 
m©
 )

1256 * 
m©node
 = 
	`xmÀngöe
().
	`NewChûd
(
node
, 0, 
«me
);

1257 
	`xmÀngöe
().
	`NewAâr
(
m©node
,0,"Rows", 
	`SåögFromI¡
(
m©
->
	`GëNrows
()) );

1258 
	`xmÀngöe
().
	`NewAâr
(
m©node
,0,"Cﬁumns", 
	`SåögFromI¡
(
m©
->
	`GëNcﬁs
()) );

1259 
°d
::
°rög°ªam
 
s
;

1260 
I¡_t
 
row
 = 0;Ñow<
m©
->
	`GëNrows
();Ñow++) {

1261 
I¡_t
 
cﬁ
 = 0; cﬁ<
m©
->
	`GëNcﬁs
(); col++) {

1262 
s
 << 
	`F‹m
–"%5.15ê", (*
m©
)[
row
][
cﬁ
] );

1265 
	`xmÀngöe
().
	`AddRawLöe
–
m©node
, 
s
.
	`°r
().
	`c_°r
() );

1266 
	}
}

1270 
	gTMVA
::
Toﬁs
::
	$WrôeTVe˘‹DToXML
–* 
node
, c⁄° * 
«me
, 
TVe˘‹D
* 
vec
 )

1272 
TM©rixD
 
	`m©
(1,
vec
->
	`GëNoEÀmíts
(),&((*vec)[0]));

1273 
	`WrôeTM©rixDToXML
–
node
, 
«me
, &
m©
 );

1274 
	}
}

1278 
	gTMVA
::
Toﬁs
::
	$RódTVe˘‹DFromXML
–* 
node
, c⁄° * 
«me
, 
TVe˘‹D
* 
vec
 )

1280 
TM©rixD
 
	`m©
(1,
vec
->
	`GëNoEÀmíts
(),&((*vec)[0]));

1281 
	`RódTM©rixDFromXML
–
node
, 
«me
, &
m©
 );

1282 
i
=0;i<
vec
->
	`GëNoEÀmíts
();++iË(*vec)[i] = 
m©
[0][i];

1283 
	}
}

1287 
	gTMVA
::
Toﬁs
::
	$RódTM©rixDFromXML
–* 
node
, c⁄° * 
«me
, 
TM©rixD
* 
m©
 )

1289 i‡(
	`°rcmp
(
	`xmÀngöe
().
	`GëNodeName
(
node
),
«me
)!=0){

1290 
	`Log
(Ë<< 
kWARNING
 << "Possible Error: Name of matrix in weight file"

1291 << " d€†nŸ m©chÇamêo‡m©rixÖas£dá†¨gumít!" << 
Endl
;

1293 
I¡_t
 
ƒows
, 
ncﬁs
;

1294 
	`RódAâr
–
node
, "Rows", 
ƒows
 );

1295 
	`RódAâr
–
node
, "Cﬁumns", 
ncﬁs
 );

1296 i‡(
m©
->
	`GëNrows
(Ë!
ƒows
 || m©->
	`GëNcﬁs
(Ë!
ncﬁs
){

1297 
	`Log
(Ë<< 
kWARNING
 << "Possible Error: Dimension of matrix in weight file"

1298 << " d€†nŸ m©ch dimísi⁄ o‡m©rixÖas£dá†¨gumít!" << 
Endl
;

1299 
m©
->
	`ResizeTo
(
ƒows
,
ncﬁs
);

1301 c⁄° * 
c⁄ã¡
 = 
	`xmÀngöe
().
	`GëNodeC⁄ã¡
(
node
);

1302 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

1303 
I¡_t
 
row
 = 0;Ñow<
ƒows
;Ñow++) {

1304 
I¡_t
 
cﬁ
 = 0; cﬁ<
ncﬁs
; col++) {

1305 
s
 >> (*
m©
)[
row
][
cﬁ
];

1308 
	}
}

1313 
	gTMVA
::
Toﬁs
::
	$TMVAWñcomeMesßge
()

1315 
°d
::
cout
 << std::
ídl
;

1316 
°d
::
cout
 << 
	`Cﬁ‹
("bﬁd"Ë<< "TMVA -- Toﬁkô f‹ Mu…iv¨üã D©®A«lysis" << Cﬁ‹("ª£t"Ë<< std::
ídl
;

1317 
°d
::
cout
 << " " << "Vîsi⁄ " << 
TMVA_RELEASE
 << ", " << 
TMVA_RELEASE_DATE
 << std::
ídl
;

1318 
°d
::
cout
 << " " << "C›yrighà(CË2005-2010 CERN, MPI-K Heidñbîg, U†o‡B⁄¿™d Vi˘‹ü" << std::
ídl
;

1319 
°d
::
cout
 << " " << "Homê∑ge: hâp://tmva.sf.√t" << std::
ídl
;

1320 
°d
::
cout
 << " " << "Cô©i⁄ info: hâp://tmva.sf.√t/côeTMVA.html" << std::
ídl
;

1321 
°d
::
cout
 << " " << "Li˚n£: hâp://tmva.sf.√t/LICENSE" << std::
ídl
 << std::endl;

1322 
	}
}

1327 
	gTMVA
::
Toﬁs
::
	$TMVAVîsi⁄Mesßge
–
MsgLoggî
& 
loggî
 )

1329 
loggî
 << "___________TMVA Vîsi⁄ " << 
TMVA_RELEASE
 << ", " << 
TMVA_RELEASE_DATE


1330 << "" << 
Endl
;

1331 
	}
}

1336 
	gTMVA
::
Toﬁs
::
	$ROOTVîsi⁄Mesßge
–
MsgLoggî
& 
loggî
 )

1338 c⁄° * c⁄° 
m⁄ths
[] = { "Jan","Feb","Mar","Apr","May",

1341 
I¡_t
 
id©qq
 = 
gROOT
->
	`GëVîsi⁄D©e
();

1342 
I¡_t
 
iday
 = 
id©qq
%100;

1343 
I¡_t
 
im⁄th
 = (
id©qq
/100)%100;

1344 
I¡_t
 
iyór
 = (
id©qq
/10000);

1345 
TSåög
 
vîsi⁄D©e
 = 
	`F‹m
("%†%d, %4d",
m⁄ths
[
im⁄th
-1],
iday
,
iyór
);

1347 
loggî
 << 
kHEADER
 ;

1348 
loggî
 << "YouáªÑu¬ög ROOT Vîsi⁄: " << 
gROOT
->
	`GëVîsi⁄
(Ë<< ", " << 
vîsi⁄D©e
 << 
Endl
;

1349 
	}
}

1355 
	gTMVA
::
Toﬁs
::
	$TMVAWñcomeMesßge
–
MsgLoggî
& 
loggî
, 
EWñcomeMesßge
 
msgTy≥
 )

1357 
msgTy≥
) {

1359 
kSènd¨dWñcomeMsg
:

1360 
loggî
 << 
	`Cﬁ‹
("whôe"Ë<< "TMVA -- Toﬁkô f‹ Mu…iv¨üã A«lysis" << Cﬁ‹("ª£t"Ë<< 
Endl
;

1361 
loggî
 << "C›yrighà(CË2005-2006 CERN, LAPP & MPI-K Heidñbîgánd Vi˘‹ü U." << 
Endl
;

1362 
loggî
 << "Homê∑gêhâp://tmva.sour˚f‹ge.√t" << 
Endl
;

1363 
loggî
 << "AŒÑight†ª£rved,ÖÀa£Ñód hâp://tmva.sf.√t/li˚n£.txt" << 
Endl
 << Endl;

1366 
kIsomëricWñcomeMsg
:

1367 
loggî
 << " ___ ___ ___ ___ " << 
Endl
;

1368 
loggî
 << " /\\ \\ /\\__\\ /\\__\\ /\\ \\ " << 
Endl
;

1369 
loggî
 << " \\:\\ \\ /::| | /:/ / /::\\ \\ " << 
Endl
;

1370 
loggî
 << " \\:\\ \\ /:|:| | /:/ / /:/\\:\\ \\ " << 
Endl
;

1371 
loggî
 << " /::\\ \\ /:/|:|__|__ /:/__/ ___ /::\\~\\:\\ \\ " << 
Endl
;

1372 
loggî
 << " /:/\\:\\__\\ /:/ |::::\\__\\ |:| | /\\__\\ /:/\\:\\ \\:\\__\\ " << 
Endl
;

1373 
loggî
 << " /:/ \\/__/ \\/__/~~/:/ / |:| |/:/ / \\/__\\:\\/:/ / " << 
Endl
;

1374 
loggî
 << "/:/ / /:/ / |:|__/:/ / \\::/ / " << 
Endl
;

1375 
loggî
 << "\\/__/ /:/ / \\::::/__/ /:/ / " << 
Endl
;

1376 
loggî
 << " /:/ / ~~~~ /:/ / " << 
Endl
;

1377 
loggî
 << " \\/__/ \\/__/ " << 
Endl
 << Endl;

1380 
kBlockWñcomeMsg
:

1381 
loggî
 << 
Endl
;

1382 
loggî
 << "_|_|_|_|_| _| _| _| _| _|_| " << 
Endl
;

1383 
loggî
 << " _| _|_| _|_| _| _| _| _| " << 
Endl
;

1384 
loggî
 << " _| _| _| _| _| _| _|_|_|_| " << 
Endl
;

1385 
loggî
 << " _| _| _| _| _| _| _| " << 
Endl
;

1386 
loggî
 << " _| _| _| _| _| _| " << 
Endl
 << Endl;

1389 
kLónWñcomeMsg
:

1390 
loggî
 << 
Endl
;

1391 
loggî
 << "_/_/_/_/_/ _/ _/ _/ _/ _/_/ " << 
Endl
;

1392 
loggî
 << " _/ _/_/ _/_/ _/ _/ _/ _/ " << 
Endl
;

1393 
loggî
 << " _/ _/ _/ _/ _/ _/ _/_/_/_/ " << 
Endl
;

1394 
loggî
 << " _/ _/ _/ _/ _/ _/ _/ " << 
Endl
;

1395 
loggî
 << "_/ _/ _/ _/ _/ _/ " << 
Endl
 << Endl;

1398 
kLogoWñcomeMsg
:

1399 
loggî
 << 
Endl
;

1400 
loggî
 << "_/_/_/_/_/ _| _| _| _| _|_| " << 
Endl
;

1401 
loggî
 << " _/ _|_| _|_| _| _| _| _| " << 
Endl
;

1402 
loggî
 << " _/ _| _| _| _| _| _|_|_|_| " << 
Endl
;

1403 
loggî
 << " _/ _| _| _| _| _| _| " << 
Endl
;

1404 
loggî
 << "_/ _| _| _| _| _| " << 
Endl
 << Endl;

1407 
kSmÆl1WñcomeMsg
:

1408 
loggî
 << " _____ __ ____ ___ " << 
Endl
;

1409 
loggî
 << "|_ _| \\/ \\ \\ / /_\\ " << 
Endl
;

1410 
loggî
 << " | | | |\\/| |\\ V / _ \\ " << 
Endl
;

1411 
loggî
 << " |_| |_| |_| \\_/_/ \\_\\" << 
Endl
 << Endl;

1414 
kSmÆl2WñcomeMsg
:

1415 
loggî
 << " _____ __ ____ ___ " << 
Endl
;

1416 
loggî
 << "|_ _| \\/ \\ \\ / / \\ " << 
Endl
;

1417 
loggî
 << " | | | |\\/| |\\ \\ / / _ \\ " << 
Endl
;

1418 
loggî
 << " | | | | | | \\ V / ___ \\ " << 
Endl
;

1419 
loggî
 << " |_| |_| |_| \\_/_/ \\_\\ " << 
Endl
 << Endl;

1422 
kOrigöÆWñcomeMsgCﬁ‹
:

1423 
loggî
 << 
kINFO
 << "" << 
	`Cﬁ‹
("red")

1424 << "_______________________________________" << 
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1425 
loggî
 << 
kINFO
 << "" << 
	`Cﬁ‹
("blue")

1426 << 
	`Cﬁ‹
("red_bgd") << Color("bwhite") << " // " << Color("reset")

1427 << 
	`Cﬁ‹
("white") << Color("blue_bgd")

1428 << "|\\ /|| \\ // /\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\ " << 
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1429 
loggî
 << 
kINFO
 << ""<< 
	`Cﬁ‹
("blue")

1430 << 
	`Cﬁ‹
("red_bgd") << Color("white") << "// " << Color("reset")

1431 << 
	`Cﬁ‹
("white") << Color("blue_bgd")

1432 << "| \\/ || \\// /--\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\" << 
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1435 
kOrigöÆWñcomeMsgBW
:

1436 
loggî
 << 
kINFO
 << ""

1437 << "_______________________________________" << 
Endl
;

1438 
loggî
 << 
kINFO
 << " // "

1439 << "|\\ /|| \\ // /\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\ " << 
Endl
;

1440 
loggî
 << 
kINFO
 << "// "

1441 << "| \\/ || \\// /--\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\" << 
Endl
;

1445 
loggî
 << 
kFATAL
 << "unknow¿mesßgêty≥: " << 
msgTy≥
 << 
Endl
;

1447 
	}
}

1452 
	gTMVA
::
Toﬁs
::
	$TMVACô©i⁄
–
MsgLoggî
& 
loggî
, 
ECô©i⁄
 
côTy≥
 )

1454 
côTy≥
) {

1456 
kPœöText
:

1457 
loggî
 << "A. H€ckî, P. S≥ckmayî, J. Sãlzî, J. ThîhØg, E. v⁄ T€∫e, H. Voss" << 
Endl
;

1458 
loggî
 << "\"TMVA - Toﬁkô f‹ Mu…iv¨üã D©®A«lysis\" PoS ACAT:040,2007.É-Pröt:Öhysics/0703039" << 
Endl
;

1461 
kBibTeX
:

1462 
loggî
 << "@Aπi˛e{TMVA2007," << 
Endl
;

1463 
loggî
 << "áuth‹ = \"H€ckî, Andªa†™d S≥ckmayî, Pëîánd Sãlzî, J€rg " << 
Endl
;

1464 
loggî
 << "ánd ThîhØg, J™ánd v⁄ T€∫e, Eckh¨dánd Voss, Hñge\"," << 
Endl
;

1465 
loggî
 << "ÅôÀ = \"{TMVA: Toﬁkô f‹ mu…iv¨üã d©®™Æysis}\"," << 
Endl
;

1466 
loggî
 << " jou∫Æ = \"PoS\"," << 
Endl
;

1467 
loggî
 << " vﬁumê = \"ACAT\"," << 
Endl
;

1468 
loggî
 << " yó∏ = \"2007\"," << 
Endl
;

1469 
loggî
 << "Öage† = \"040\"," << 
Endl
;

1470 
loggî
 << "É¥öà = \"physics/0703039\"," << 
Endl
;

1471 
loggî
 << "árchivePªfix = \"¨Xiv\"," << 
Endl
;

1472 
loggî
 << " SLACcô©i⁄ = \"%%CITATION = PHYSICS/0703039;%%\"" << 
Endl
;

1473 
loggî
 << "}" << 
Endl
;

1476 
kLaTeX
:

1477 
loggî
 << "%\\côe{TMVA2007}" << 
Endl
;

1478 
loggî
 << "\\bibôem{TMVA2007}" << 
Endl
;

1479 
loggî
 << " A.~H€ckî, P.~S≥ckmayî, J.~Sãlzî, J.~ThîhØg, E.~v⁄ T€∫e, H.~Voss" << 
Endl
;

1480 
loggî
 << " %``TMVA: Toﬁkô f‹ mu…iv¨üã d©®™Æysis,''" << 
Endl
;

1481 
loggî
 << " PoS A {\\b‡CAT} (2007Ë040" << 
Endl
;

1482 
loggî
 << " [¨Xiv:physics/0703039]." << 
Endl
;

1483 
loggî
 << " %%CITATION = POSCI,ACAT,040;%%" << 
Endl
;

1486 
kHtmlLök
:

1488 
loggî
 << 
kHEADER
 << 
	`gToﬁs
().
	`Cﬁ‹
("bold")

1489 << "Th™k you f‹ usög TMVA!" << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1490 
loggî
 << 
kINFO
 << 
	`gToﬁs
().
	`Cﬁ‹
("bold")

1492 << 
	`gToﬁs
().
	`Cﬁ‹
("ª£t"Ë<< 
Endl
;

1494 
	}
}

1498 
Boﬁ_t
 
	gTMVA
::
Toﬁs
::
	$Hi°oHasEquidi°™tBös
(c⁄° 
TH1
& 
h
)

1500  !(
h
.
	`GëXaxis
()->
	`GëXbös
()->
fN
);

1501 
	}
}

1505 
	g°d
::
ve˘‹
<
TM©rixDSym
*>*

1506 
TMVA
::
Toﬁs
::
CÆcCov¨ün˚M©ri˚s
–c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
*>& 
evíts
, 
I¡_t
 
maxCls
, 
V¨übÀTønsf‹mBa£
* 
å™sf‹mBa£
 )

1508 
	g°d
::
ve˘‹
<
Evít
*> 
evítVe˘‹
;

1509 
	g°d
::
ve˘‹
<c⁄° 
Evít
*>::
c⁄°_ôî©‹
 
ô
 = 
evíts
.
begö
(), 
	gôEnd
 =Évíts.
íd
(); 
	gô
 !
ôEnd
; ++it)

1511 
	gevítVe˘‹
.
push_back
 (
√w
 
Evít
(*(*
ô
)));

1513 
	g°d
::
ve˘‹
<
TM©rixDSym
*>* 
ªtu∫VÆue
 = 
CÆcCov¨ün˚M©ri˚s
 (
evítVe˘‹
, 
maxCls
, 
å™sf‹mBa£
);

1514 
	g°d
::
ve˘‹
<
Evít
*>::
c⁄°_ôî©‹
 
ô
 = 
evítVe˘‹
.
begö
(), 
	gôEnd
 =ÉvítVe˘‹.
íd
(); 
	gô
 !
ôEnd
; ++it)

1516 
dñëe
 (*
ô
);

1518  
	gªtu∫VÆue
;

1524 
	g°d
::
ve˘‹
<
TM©rixDSym
*>*

1525 
TMVA
::
Toﬁs
::
CÆcCov¨ün˚M©ri˚s
–c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
, 
I¡_t
 
maxCls
, 
V¨übÀTønsf‹mBa£
* 
å™sf‹mBa£
 )

1527 i‡(
	gevíts
.
em±y
()) {

1528 
Log
(Ë<< 
	gkWARNING
 << " AskedÅÿˇlcuœãá cov¨ün˚ m©rix f‹á¿em±yÉvíàve˘‹s.. s‹ry c™nŸ dÿth© ->Ñëu∫ NULL"<<
	gEndl
;

1532 
UI¡_t
 
	gnv¨s
=0, 
	g¡gts
=0, 
	gn•˘s
=0;

1533 i‡(
	gå™sf‹mBa£
)

1534 
	gå™sf‹mBa£
->
Cou¡V¨übÀTy≥s
–
nv¨s
, 
¡gts
, 
n•˘s
 );

1536 
	gnv¨s
 =
evíts
.
©
(0)->
GëNV¨übÀs
 ();

1537 
	g¡gts
 =
evíts
.
©
(0)->
GëNT¨gës
 ();

1538 
	gn•˘s
=
evíts
.
©
(0)->
GëNS≥˘©‹s
();

1543 
I¡_t
 
	gm©Num
 = 
maxCls
;

1544 i‡(
	gmaxCls
 > 1 ) 
	gm©Num
++;

1546 
	g°d
::
ve˘‹
<
TVe˘‹D
*>* 
vec
 = 
√w
 
°d
::ve˘‹<TVe˘‹D*>(
m©Num
);

1547 
	g°d
::
ve˘‹
<
TM©rixD
*>* 
m©2
 = 
√w
 
°d
::ve˘‹<TM©rixD*>(
m©Num
);

1548 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
cou¡
(
m©Num
);

1549 
	gcou¡
.
assign
(
m©Num
,0);

1551 
I¡_t
 
	g˛s
 = 0;

1552 
TVe˘‹D
* 
	gv
;

1553 
TM©rixD
* 
	gm
;

1554 
UI¡_t
 
	giv¨
=0, 
	gjv¨
=0;

1555 
	g˛s
 = 0; cl†< 
	gm©Num
 ; cls++) {

1556 
	gvec
->
©
(
˛s
Ë
√w
 
TVe˘‹D
(
nv¨s
);

1557 
	gm©2
->
©
(
˛s
Ë
√w
 
TM©rixD
(
nv¨s
,nvars);

1558 
	gv
 = 
vec
->
©
(
˛s
);

1559 
	gm
 = 
m©2
->
©
(
˛s
);

1561 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

1562 (*
	gv
)(
	giv¨
) = 0;

1563 
	gjv¨
=0; jv¨<
	gnv¨s
; jvar++) {

1564 (*
	gm
)(
	giv¨
, 
	gjv¨
) = 0;

1570 
UI¡_t
 
	gi
=0; i<
	gevíts
.
size
(); i++) {

1573 c⁄° 
Evít
 * 
	gev
 = 
evíts
[
i
];

1574 
	g˛s
 = 
ev
->
GëCœss
();

1575 
DoubÀ_t
 
	gweight
 = 
ev
->
GëWeight
();

1577 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
öput
;

1578 
	g°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

1580 i‡(
	gå™sf‹mBa£
) {

1581  
	gå™sf‹mBa£
->
GëI≈ut
 (
ev
, 
öput
, 
mask
);

1583 
	giv¨
=0; iv¨<
	gnv¨s
; ++ivar) {

1584 
	göput
.
push_back
 (
ev
->
GëVÆue
(
iv¨
));

1588 i‡(
	gmaxCls
 > 1) {

1589 
	gv
 = 
vec
->
©
(
m©Num
-1);

1590 
	gm
 = 
m©2
->
©
(
m©Num
-1);

1592 
	gcou¡
.
©
(
m©Num
-1)+=
weight
;

1593 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

1595 
DoubÀ_t
 
	gxi
 = 
öput
.
©
 (
iv¨
);

1596 (*
	gv
)(
	giv¨
Ë+
xi
*
weight
;

1597 (*
	gm
)(
	giv¨
, iv¨Ë+(
xi
*xi*
weight
);

1599 
	gjv¨
=
iv¨
+1; jv¨<
	gnv¨s
; jvar++) {

1600 
DoubÀ_t
 
	gxj
 = 
öput
.
©
 (
jv¨
);

1601 (*
	gm
)(
	giv¨
, 
	gjv¨
Ë+(
xi
*
xj
*
weight
);

1602 (*
	gm
)(
	gjv¨
, 
	giv¨
Ë(*
m
)(
iv¨
, jvar);

1607 
	gcou¡
.
©
(
˛s
)+=
weight
;

1608 
	gv
 = 
vec
->
©
(
˛s
);

1609 
	gm
 = 
m©2
->
©
(
˛s
);

1610 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

1611 
DoubÀ_t
 
	gxi
 = 
öput
.
©
 (
iv¨
);

1612 (*
	gv
)(
	giv¨
Ë+
xi
*
weight
;

1613 (*
	gm
)(
	giv¨
, iv¨Ë+(
xi
*xi*
weight
);

1615 
	gjv¨
=
iv¨
+1; jv¨<
	gnv¨s
; jvar++) {

1616 
DoubÀ_t
 
	gxj
 = 
öput
.
©
 (
jv¨
);

1617 (*
	gm
)(
	giv¨
, 
	gjv¨
Ë+(
xi
*
xj
*
weight
);

1618 (*
	gm
)(
	gjv¨
, 
	giv¨
Ë(*
m
)(
iv¨
, jvar);

1624 
	g°d
::
ve˘‹
<
TM©rixDSym
*>* 
m©
 = 
√w
 
°d
::ve˘‹<TM©rixDSym*>(
m©Num
);

1625 
	g˛s
 = 0; cl†< 
	gm©Num
; cls++) {

1626 
	gv
 = 
vec
->
©
(
˛s
);

1627 
	gm
 = 
m©2
->
©
(
˛s
);

1629 
	gm©
->
©
(
˛s
Ë
√w
 
TM©rixDSym
(
nv¨s
);

1631 
DoubÀ_t
 
	gn
 = 
cou¡
.
©
(
˛s
);

1632 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

1633 
	gjv¨
=0; jv¨<
	gnv¨s
; jvar++) {

1634 (*(
	gm©
->
©
(
˛s
)))(
	giv¨
, 
	gjv¨
Ë(*
m
)(
iv¨
, jv¨)/
	gn
 - (*
	gv
)(iv¨)*(*v)(jv¨)/(
n
*n);

1637 
dñëe
 
	gv
;

1638 
dñëe
 
	gm
;

1641 
dñëe
 
	gm©2
;

1642 
dñëe
 
	gvec
;

1644  
	gm©
;

1652 
	gãm∂©e
 <
ty≥«me
 
	gIãøt‹
,Åy≥«mê
	gWeightIãøt‹
>

1653 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$Món
 ( 
Iãøt‹
 
fú°
, Iãøt‹ 
œ°
, 
WeightIãøt‹
 
w
)

1655 
DoubÀ_t
 
sum
 = 0;

1656 
DoubÀ_t
 
sumw
 = 0;

1657 
i
 = 0;

1658 i‡(
w
==
NULL
)

1660  
fú°
 !
œ°
 )

1666 
sum
 +(*
fú°
);

1667 
sumw
 += 1.0 ;

1668 ++
fú°
;

1669 ++
i
;

1671 i‡(
sumw
 <= 0) {

1672 ::
	`Eº‹
("TMVA::Tools::Mean","sum of weights <= 0 ?!Åhat'sá bitÅoo much ofÇegativeÉvent weights :) ");

1678  
fú°
 !
œ°
 )

1684 
sum
 +(*
w
Ë* (*
fú°
);

1685 
sumw
 +(*
w
) ;

1686 ++
w
;

1687 ++
fú°
;

1688 ++
i
;

1690 i‡(
sumw
 <= 0) {

1691 ::
	`Eº‹
("TMVA::Tools::Mean","sum of weights <= 0 ?!Åhat'sá bitÅoo much ofÇegativeÉvent weights :) ");

1695  
sum
/
sumw
;

1696 
	}
}

1701 
	gãm∂©e
 <
ty≥«me
 
	gT
>

1702 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$Món
(
L⁄g64_t
 
n
, c⁄° 
T
 *
a
, c⁄° 
DoubÀ_t
 *
w
)

1704 i‡(
w
) {

1705  
TMVA
::
Toﬁs
::
	`Món
(
a
,á+
n
, 
w
);

1707  
TM©h
::
	`Món
(
a
,á+
n
);

1709 
	}
}

1716 
	gãm∂©e
 <
ty≥«me
 
	gIãøt‹
,Åy≥«mê
	gWeightIãøt‹
>

1717 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$RMS
(
Iãøt‹
 
fú°
, Iãøt‹ 
œ°
, 
WeightIãøt‹
 
w
)

1720 
DoubÀ_t
 
sum
 = 0;

1721 
DoubÀ_t
 
sum2
 = 0;

1722 
DoubÀ_t
 
sumw
 = 0;

1724 
DoubÀ_t
 
adoubÀ
;

1725 i‡(
w
==
NULL
)

1727  
fú°
 !
œ°
 ) {

1728 
adoubÀ
=
	`DoubÀ_t
(*
fú°
);

1729 
sum
 +
adoubÀ
;

1730 
sum2
 +
adoubÀ
*adouble;

1731 
sumw
 += 1.0;

1732 ++
fú°
;

1737  
fú°
 !
œ°
 ) {

1738 
adoubÀ
=
	`DoubÀ_t
(*
fú°
);

1739 
sum
 +
adoubÀ
 * (*
w
);

1740 
sum2
 +
adoubÀ
*adoubÀ * (*
w
);

1741 
sumw
 +(*
w
);

1742 ++
fú°
;

1743 ++
w
;

1746 
DoubÀ_t
 
n‹m
 = 1./
sumw
;

1747 
DoubÀ_t
 
món
 = 
sum
*
n‹m
;

1748 
DoubÀ_t
 
rms
 = 
TM©h
::
	`Sqπ
(TM©h::
	`Abs
(
sum2
*
n‹m
 -
món
*mean));

1749  
rms
;

1750 
	}
}

1757 
	gãm∂©e
 <
ty≥«me
 
	gT
>

1758 
DoubÀ_t
 
	gTMVA
::
Toﬁs
::
	$RMS
(
L⁄g64_t
 
n
, c⁄° 
T
 *
a
, c⁄° 
DoubÀ_t
 *
w
)

1761 i‡(
w
) {

1762  
TMVA
::
Toﬁs
::
	`RMS
(
a
,á+
n
, 
w
);

1764  
TM©h
::
	`RMS
(
a
,á+
n
);

1766 
	}
}

1771 
TH1
* 
	gTMVA
::
Toﬁs
::
	$GëCumuœtiveDi°
–
TH1
* 
h
)

1773 
TH1
* 
cumuœtiveDi°
(TH1*Ë
h
->
	`Cl⁄e
(
	`F‹m
("%sCumul",h->
	`GëTôÀ
()));

1776 
Flﬂt_t
 
∑πülSum
 = 0;

1777 
Flﬂt_t
 
övî£Sum
 = 0.;

1779 
Flﬂt_t
 
vÆ
;

1780 
I¡_t
 
iböEnd
=1, 
ibö
=
cumuœtiveDi°
->
	`GëNbösX
(); ibin >=ibinEnd ; ibin--){

1781 
vÆ
 = 
cumuœtiveDi°
->
	`GëBöC⁄ã¡
(
ibö
);

1782 i‡(
vÆ
>0Ë
övî£Sum
 += val;

1784 
övî£Sum
 = 1/inverseSum;

1786 
I¡_t
 
iböEnd
=1, 
ibö
=
cumuœtiveDi°
->
	`GëNbösX
(); ibin >=ibinEnd ; ibin--){

1787 
vÆ
 = 
cumuœtiveDi°
->
	`GëBöC⁄ã¡
(
ibö
);

1788 i‡(
vÆ
>0Ë
∑πülSum
 += val;

1789 
cumuœtiveDi°
->
	`SëBöC⁄ã¡
(
ibö
,
∑πülSum
*
övî£Sum
);

1791  
cumuœtiveDi°
;

1792 
	}
}

1794 
	gTMVA
::
Toﬁs
::
	$RódAâr
(*
node
, c⁄° *
©å«me
, &
vÆue
)

1797 c⁄° *
vÆ
 = 
	`xmÀngöe
().
	`GëAâr
(
node
, 
©å«me
);

1798 i‡(
vÆ
 =
nuŒ±r
) {

1799 c⁄° *
nodíame
 = 
	`xmÀngöe
().
	`GëNodeName
(
node
);

1800 
	`Log
(Ë<< 
kFATAL
 << "TryögÅÿªadÇ⁄-exi°ögáâribuã '" << 
©å«me
 << "' from xm»nodê'" << 
nodíame
 << "'"

1801 << 
Endl
;

1803 
vÆue
 = 
	`©of
(
vÆ
);

1804 
	}
}

1806 
	gTMVA
::
Toﬁs
::
	$RódAâr
(*
node
, c⁄° *
©å«me
, &
vÆue
)

1809 c⁄° *
vÆ
 = 
	`xmÀngöe
().
	`GëAâr
(
node
, 
©å«me
);

1810 i‡(
vÆ
 =
nuŒ±r
) {

1811 c⁄° *
nodíame
 = 
	`xmÀngöe
().
	`GëNodeName
(
node
);

1812 
	`Log
(Ë<< 
kFATAL
 << "TryögÅÿªadÇ⁄-exi°ögáâribuã '" << 
©å«me
 << "' from xm»nodê'" << 
nodíame
 << "'"

1813 << 
Endl
;

1815 
vÆue
 = 
	`©oi
(
vÆ
);

1816 
	}
}

1818 
	gTMVA
::
Toﬁs
::
	$RódAâr
(*
node
, c⁄° *
©å«me
, &
vÆue
)

1821 c⁄° *
vÆ
 = 
	`xmÀngöe
().
	`GëAâr
(
node
, 
©å«me
);

1822 i‡(
vÆ
 =
nuŒ±r
) {

1823 c⁄° *
nodíame
 = 
	`xmÀngöe
().
	`GëNodeName
(
node
);

1824 
	`Log
(Ë<< 
kFATAL
 << "TryögÅÿªadÇ⁄-exi°ögáâribuã '" << 
©å«me
 << "' from xm»nodê'" << 
nodíame
 << "'"

1825 << 
Endl
;

1827 
vÆue
 = 
	`©oi
(
vÆ
);

1828 
	}
}

	@src/TransformationHandler.cxx

36 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

38 
	~"TMVA/C⁄fig.h
"

39 
	~"TMVA/D©aSë.h
"

40 
	~"TMVA/D©aSëInfo.h
"

41 
	~"TMVA/Evít.h
"

42 
	~"TMVA/MsgLoggî.h
"

43 
	~"TMVA/R™kög.h
"

44 
	~"TMVA/Toﬁs.h
"

45 
	~"TMVA/Ty≥s.h
"

46 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

47 
	~"TMVA/V¨übÀGaussTønsf‹m.h
"

48 
	~"TMVA/V¨übÀInfo.h
"

49 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

50 
	~"TMVA/V¨übÀN‹mÆizeTønsf‹m.h
"

51 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

52 
	~"TMVA/V¨übÀRóº™geTønsf‹m.h
"

53 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

55 
	~"TAxis.h
"

56 
	~"TDúe˘‹y.h
"

57 
	~"TH1.h
"

58 
	~"TH2.h
"

59 
	~"TLi°.h
"

60 
	~"TM©h.h
"

61 
	~"TProfûe.h
"

63 
	~<ve˘‹
>

64 
	~<iom™ù
>

69 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$Tønsf‹m©i⁄H™dÀr
–
D©aSëInfo
& 
dsi
, c⁄° 
TSåög
& 
ˇŒîName
 )

70 : 
	`fD©aSëInfo
(
dsi
),

71 
	`fRoŸBa£Dú
(0),

72 
	`fCÆÀrName
 (
ˇŒîName
),

73 
	`fLoggî
 ( 
√w
 
	`MsgLoggî
(
	`TSåög
("TFH™dÀr_" + 
ˇŒîName
).
	`D©a
(), 
kINFO
) )

77 
fNumC
 = (
dsi
.
	`GëNCœs£s
()<= 1) ? 1 : dsi.GetNClasses()+1;

79 
fV¨übÀSèts
.
	`ªsize
–
fNumC
 );

80 
I¡_t
 
i
=0; i<
fNumC
; i++ ) 
fV¨übÀSèts
.
	`©
(i).
	`ªsize
(
dsi
.
	`GëNV¨übÀs
(Ë+ dsi.
	`GëNT¨gës
());

81 
	}
}

86 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::~
	$Tønsf‹m©i⁄H™dÀr
()

88 
°d
::
ve˘‹
<
R™kög
*>::
c⁄°_ôî©‹
 
ô
 = 
fR™kög
.
	`begö
();

89 ; 
ô
 !
fR™kög
.
	`íd
(); it++Ë
dñëe
 *it;

91 
fTønsf‹m©i⁄s
.
	`SëOw√r
();

92 
dñëe
 
fLoggî
;

93 
	}
}

97 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$SëCÆÀrName
–c⁄° 
TSåög
& 
«me
 )

99 
fCÆÀrName
 = 
«me
;

100 
fLoggî
->
	`SëSour˚
–
	`TSåög
("TFH™dÀr_" + 
fCÆÀrName
).
	`D©a
() );

101 
	}
}

105 
	gTMVA
::
V¨übÀTønsf‹mBa£
* 
TMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$AddTønsf‹m©i⁄
–
V¨übÀTønsf‹mBa£
 *
åf
, 
I¡_t
 
˛s
 )

107 
TSåög
 
t‚ame
 = 
åf
->
	`Log
().
	`GëName
();

108 
åf
->
	`Log
().
	`SëSour˚
(
	`TSåög
(
fCÆÀrName
+"_"+
t‚ame
+"_TF").
	`D©a
());

109 
fTønsf‹m©i⁄s
.
	`Add
(
åf
);

110 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`push_back
–
˛s
 );

111  
åf
;

112 
	}
}

116 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$AddSèts
–
I¡_t
 
k
, 
UI¡_t
 
iv¨
, 
DoubÀ_t
 
món
, DoubÀ_à
rms
, DoubÀ_à
mö
, DoubÀ_à
max
 )

118 i‡(
rms
 <= 0) {

119 
	`Log
(Ë<< 
kWARNING
 << "V¨übÀ \"" << 
	`V¨übÀ
(
iv¨
).
	`GëEx¥essi⁄
()

121 << "==> sëÅÿzîo. PÀa£ checkÅhêv¨übÀ c⁄ã¡" << 
Endl
;

122 
rms
 = 0;

125 
V¨übÀSèt
 
°©
; sèt.
fMón
 = 
món
; sèt.
fRMS
 = 
rms
; sèt.
fMö
 = 
mö
; sèt.
fMax
 = 
max
;

126 
fV¨übÀSèts
.
	`©
(
k
).©(
iv¨
Ë
°©
;

127 
	}
}

133 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$SëTønsf‹m©i⁄Re„ªn˚Cœss
–
I¡_t
 
˛s
 )

135 
UI¡_t
 
i
 = 0; i < 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`size
(); i++) {

136 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`©
–
i
 ) = 
˛s
;

138 
	}
}

143 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$Tønsf‹m
–c⁄° 
Evít
* 
ev
 ) const

145 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
);

146 
°d
::
ve˘‹
<
I¡_t
>::
c⁄°_ôî©‹
 
rClsIt
 = 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`begö
();

147 c⁄° 
Evít
* 
åEv
 = 
ev
;

148 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
()) {

149 i‡(
rClsIt
 =
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`íd
()Ë
	`Log
(Ë<< 
kFATAL
<< "övÆidÑód i¿Tønsf‹m©i⁄H™dÀr::Tønsf‹m " <<
Endl
;

150 
åEv
 = 
åf
->
	`Tønsf‹m
—rEv, (*
rClsIt
) );

151 
rClsIt
++;

153  
åEv
;

154 
	}
}

158 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$Invî£Tønsf‹m
–c⁄° 
Evít
* 
ev
, 
Boﬁ_t
 
suµªssIfNoT¨gës
 ) const

160 i‡(
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`em±y
()){

162  
ev
;

165 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
, 
kIãrBackw¨d
);

166 
°d
::
ve˘‹
< 
I¡_t
 >::
c⁄°_ôî©‹
 
rClsIt
 = 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`íd
();

167 
rClsIt
--;

168 c⁄° 
Evít
* 
åEv
 = 
ev
;

169 
UI¡_t
 
nv¨s
 = 0, 
¡gts
 = 0, 
n•˘s
 = 0;

170 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
() ) {

171 i‡(
åf
->
	`IsCª©ed
()) {

172 
åf
->
	`Cou¡V¨übÀTy≥s
–
nv¨s
, 
¡gts
, 
n•˘s
 );

173 if–!(
suµªssIfNoT¨gës
 && 
¡gts
==0) )

174 
åEv
 = 
åf
->
	`Invî£Tønsf‹m
(
ev
, (*
rClsIt
) );

177 --
rClsIt
;

179  
åEv
;

197 
	}
}

202 c⁄° 
	g°d
::
ve˘‹
<
TMVA
::
Evít
*>* TMVA::
Tønsf‹m©i⁄H™dÀr
::
CÆcTønsf‹m©i⁄s
–c⁄° 
°d
::ve˘‹<Evít*>& 
evíts
,

203 
Boﬁ_t
 
¸óãNewVe˘‹
 )

205 i‡(
	gfTønsf‹m©i⁄s
.
GëE¡rõs
() <= 0)

206  &
evíts
;

212 
	g°d
::
ve˘‹
<
Evít
*> *
å™sf‹medEvíts
 = 
√w
 
°d
::ve˘‹<
TMVA
::Evít*>(
evíts
.
size
());

213  
UI¡_t
 
	gõvt
 = 0; ievt<
	gevíts
.
size
(); ievt++)

214 
	gå™sf‹medEvíts
->
©
(
õvt
Ë
√w
 
Evít
(*
evíts
.at(ievt));

216 
TLi°Iãr
 
åIt
(&
fTønsf‹m©i⁄s
);

217 
	g°d
::
ve˘‹
< 
I¡_t
 >::
ôî©‹
 
rClsIt
 = 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
begö
();

218 
V¨übÀTønsf‹mBa£
 *
	gåf
 = (V¨übÀTønsf‹mBa£*Ë
åIt
()) {

219 i‡(
åf
->
Pª∑ªTønsf‹m©i⁄
(*
å™sf‹medEvíts
)) {

220 
UI¡_t
 
õvt
 = 0; 
	gõvt
<
	gå™sf‹medEvíts
->
size
(); ievt++) {

221 *(*
	gå™sf‹medEvíts
)[
õvt
] = *
åf
->
Tønsf‹m
((*
å™sf‹medEvíts
)[õvt],(*
rClsIt
));

223 
	grClsIt
++;

227 
CÆcSèts
(*
å™sf‹medEvíts
);

230 
PlŸV¨übÀs
(*
å™sf‹medEvíts
);

234 i‡(!
	g¸óãNewVe˘‹
) {

235  
UI¡_t
 
	gõvt
 = 0; ievt<
	gå™sf‹medEvíts
->
size
(); ievt++)

236 
dñëe
 (*
å™sf‹medEvíts
)[
õvt
];

237 
dñëe
 
	gå™sf‹medEvíts
;

238 
	gå™sf‹medEvíts
=
NULL
;

241  
	gå™sf‹medEvíts
;

248 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
CÆcSèts
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
 )

250 
UI¡_t
 
√vts
 = 
evíts
.
size
();

252 i‡(
	g√vts
==0)

253 
Log
(Ë<< 
kFATAL
 << "Nÿevít†avaûabÀÅÿföd mö, max, mó¿™dÑms" << 
Endl
;

256 c⁄° 
UI¡_t
 
	gnv¨
 = 
evíts
[0]->
GëNV¨übÀs
();

257 c⁄° 
UI¡_t
 
	g¡gt
 = 
evíts
[0]->
GëNT¨gës
();

259 
DoubÀ_t
 *
	gsumOfWeights
 = 
√w
 DoubÀ_t[
fNumC
];

260 
DoubÀ_t
* *
	gx2
 = 
√w
 DoubÀ_t*[
fNumC
];

261 
DoubÀ_t
* *
	gx0
 = 
√w
 DoubÀ_t*[
fNumC
];

262 
DoubÀ_t
* *
	gv¨Mö
 = 
√w
 DoubÀ_t*[
fNumC
];

263 
DoubÀ_t
* *
	gv¨Max
 = 
√w
 DoubÀ_t*[
fNumC
];

265 
I¡_t
 
	g˛s
=0; cls<
	gfNumC
; cls++) {

266 
	gsumOfWeights
[
˛s
]=0;

267 
	gx2
[
˛s
] = 
√w
 
DoubÀ_t
[
nv¨
+
¡gt
];

268 
	gx0
[
˛s
] = 
√w
 
DoubÀ_t
[
nv¨
+
¡gt
];

269 
	gv¨Mö
[
˛s
] = 
√w
 
DoubÀ_t
[
nv¨
+
¡gt
];

270 
	gv¨Max
[
˛s
] = 
√w
 
DoubÀ_t
[
nv¨
+
¡gt
];

271 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
+
	g¡gt
; ivar++) {

272 
	gx0
[
˛s
][
iv¨
] = 
x2
[cls][ivar] = 0;

273 
	gv¨Mö
[
˛s
][
iv¨
] = 
DBL_MAX
;

274 
	gv¨Max
[
˛s
][
iv¨
] = -
DBL_MAX
;

278 
UI¡_t
 
	gõvt
=0; ievt<
	g√vts
; ievt++) {

279 c⁄° 
Evít
* 
	gev
 = 
evíts
[
õvt
];

280 
I¡_t
 
	g˛s
 = 
ev
->
GëCœss
();

282 
DoubÀ_t
 
	gweight
 = 
ev
->
GëWeight
();

283 
	gsumOfWeights
[
˛s
] +
weight
;

284 i‡(
	gfNumC
 > 1 ) 
	gsumOfWeights
[
fNumC
-1] +
weight
;

285 
UI¡_t
 
	gv¨_tgt
 = 0; var_tgt < 2; var_tgt++ ){

286 
UI¡_t
 
	g∆o›
 = ( 
v¨_tgt
==0?
nv¨
:
¡gt
 );

287 
UI¡_t
 
	giv¨
=0; iv¨<
	g∆o›
; ivar++) {

288 
DoubÀ_t
 
	gx
 = ( 
v¨_tgt
==0?
ev
->
GëVÆue
(
iv¨
):ev->
GëT¨gë
(ivar) );

290 i‡(
	gx
 < 
	gv¨Mö
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
]Ëv¨Mö[˛s][(v¨_tgt*nv¨)+iv¨]
x
;

291 i‡(
	gx
 > 
	gv¨Max
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
]Ëv¨Max[˛s][(v¨_tgt*nv¨)+iv¨]
x
;

293 
	gx0
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
] +
x
*
weight
;

294 
	gx2
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
] +
x
*x*
weight
;

296 i‡(
	gfNumC
 > 1) {

297 i‡(
	gx
 < 
	gv¨Mö
[
fNumC
-1][(
v¨_tgt
*
nv¨
)+
iv¨
]Ëv¨Mö[fNumC-1][(v¨_tgt*nv¨)+iv¨]
x
;

298 i‡(
	gx
 > 
	gv¨Max
[
fNumC
-1][(
v¨_tgt
*
nv¨
)+
iv¨
]Ëv¨Max[fNumC-1][(v¨_tgt*nv¨)+iv¨]
x
;

300 
	gx0
[
fNumC
-1][(
v¨_tgt
*
nv¨
)+
iv¨
] +
x
*
weight
;

301 
	gx2
[
fNumC
-1][(
v¨_tgt
*
nv¨
)+
iv¨
] +
x
*x*
weight
;

309 
UI¡_t
 
	gv¨_tgt
 = 0; var_tgt < 2; var_tgt++ ){

310 
UI¡_t
 
	g∆o›
 = ( 
v¨_tgt
==0?
nv¨
:
¡gt
 );

311 
UI¡_t
 
	giv¨
=0; iv¨<
	g∆o›
; ivar++) {

312 
I¡_t
 
	g˛s
 = 0; cl†< 
	gfNumC
; cls++) {

313 
DoubÀ_t
 
	gmón
 = 
x0
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
]/
sumOfWeights
[cls];

314 
DoubÀ_t
 
	grms
 = 
TM©h
::
Sqπ
–
x2
[
˛s
][(
v¨_tgt
*
nv¨
)+
iv¨
]/
sumOfWeights
[˛s] - 
món
*mean);

315 
AddSèts
(
˛s
, (
v¨_tgt
*
nv¨
)+
iv¨
, 
món
, 
rms
, 
v¨Mö
[˛s][(v¨_tgt*nv¨)+iv¨], 
v¨Max
[cls][(var_tgt*nvar)+ivar]);

322 
UI¡_t
 
	gmaxL
 = 8, 
	gmaxV
 = 0;

323 
	g°d
::
ve˘‹
<
UI¡_t
> 
vLígths
;

324 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
+
	g¡gt
; ivar++) {

325 if–
	giv¨
 < 
	gnv¨
 )

326 
	gmaxL
 = 
TM©h
::
Max
–(
UI¡_t
)
V¨übÀ
(
iv¨
).
GëLabñ
().
Lígth
(), 
maxL
 );

328 
	gmaxL
 = 
TM©h
::
Max
–(
UI¡_t
)
T¨gë
(
iv¨
-
nv¨
).
GëLabñ
().
Lígth
(), 
maxL
 );

330 
	gmaxV
 = 
maxL
 + 2;

332 
UI¡_t
 
	g˛í
 = 
maxL
 + 4*
maxV
 + 11;

333 
Log
(Ë<< 
	gkHEADER
 ;

338 
Log
(Ë<< 
	g°d
::
£tw
(
maxL
) << "Variable";

339 
Log
(Ë<< " " << 
	g°d
::
£tw
(
maxV
) << "Mean";

340 
Log
(Ë<< " " << 
	g°d
::
£tw
(
maxV
) << "RMS";

341 
Log
(Ë<< " " << 
	g°d
::
£tw
(
maxV
) << "[ Min ";

342 
Log
(Ë<< " " << 
	g°d
::
£tw
(
maxV
Ë<< " Max ]"<< 
Endl
;;

343 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
Log
() << "-";

344 
Log
(Ë<< 
	gEndl
;

347 
TSåög
 
	gf‹m©
 = "%#11.5g";

348 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
+
	g¡gt
; ivar++) {

349 if–
	giv¨
 < 
	gnv¨
 )

350 
Log
(Ë<< 
	g°d
::
£tw
(
maxL
Ë<< 
V¨übÀ
(
iv¨
).
GëLabñ
() << ":";

352 
Log
(Ë<< 
	g°d
::
£tw
(
maxL
Ë<< 
T¨gë
(
iv¨
-
nv¨
).
GëLabñ
() << ":";

353 
Log
(Ë<< 
	g°d
::
£tw
(
maxV
Ë<< 
F‹m
–
f‹m©
.
D©a
(), 
GëMón
(
iv¨
) );

354 
Log
(Ë<< 
	g°d
::
£tw
(
maxV
Ë<< 
F‹m
–
f‹m©
.
D©a
(), 
GëRMS
(
iv¨
) );

355 
Log
(Ë<< " [" << 
	g°d
::
£tw
(
maxV
Ë<< 
F‹m
–
f‹m©
.
D©a
(), 
GëMö
(
iv¨
) );

356 
Log
(Ë<< 
	g°d
::
£tw
(
maxV
Ë<< 
F‹m
–
f‹m©
.
D©a
(), 
GëMax
(
iv¨
) ) << " ]";

357 
Log
(Ë<< 
	gEndl
;

359 
UI¡_t
 
	gi
=0; i<
	g˛í
; i++Ë
Log
() << "-";

360 
Log
(Ë<< 
	gEndl
;

363 
	gdñëe
[] 
	gsumOfWeights
;

364 
I¡_t
 
	g˛s
=0; cls<
	gfNumC
; cls++) {

365 
	gdñëe
 [] 
	gx2
[
˛s
];

366 
	gdñëe
 [] 
	gx0
[
˛s
];

367 
	gdñëe
 [] 
	gv¨Mö
[
˛s
];

368 
	gdñëe
 [] 
	gv¨Max
[
˛s
];

370 
	gdñëe
 [] 
	gx2
;

371 
	gdñëe
 [] 
	gx0
;

372 
	gdñëe
 [] 
	gv¨Mö
;

373 
	gdñëe
 [] 
	gv¨Max
;

379 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
, 
I¡_t
 
∑π
 ) const

381 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
);

382 
°d
::
ve˘‹
< 
I¡_t
 >::
c⁄°_ôî©‹
 
rClsIt
 = 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`begö
();

383 
UI¡_t
 
åCou¡î
=1;

384 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
() ) {

385 
åf
->
	`MakeFun˘i⁄
(
fout
, 
‚cName
, 
∑π
, 
åCou¡î
++, (*
rClsIt
) );

386 
rClsIt
++;

388 i‡(
∑π
==1) {

389 
I¡_t
 
i
=0; i<
fTønsf‹m©i⁄s
.
	`GëSize
(); i++) {

390 
fout
 << " void InôTønsf‹m_"<<
i
+1<<"();" << 
°d
::
ídl
;

391 
fout
 << " void Tønsf‹m_"<<
i
+1<<"–°d::ve˘‹<doubÀ> & iv, i¡ sigOrBgd ) c⁄°;" << 
°d
::
ídl
;

394 i‡(
∑π
==2) {

395 
fout
 << 
°d
::
ídl
;

396 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

397 
fout
 << "ölöêvoid " << 
‚cName
 << "::InôTønsf‹m()" << 
°d
::
ídl
;

398 
fout
 << "{" << 
°d
::
ídl
;

399 
I¡_t
 
i
=0; i<
fTønsf‹m©i⁄s
.
	`GëSize
(); i++)

400 
fout
 << " InôTønsf‹m_"<<
i
+1<<"();" << 
°d
::
ídl
;

401 
fout
 << "}" << 
°d
::
ídl
;

402 
fout
 << 
°d
::
ídl
;

403 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

404 
fout
 << "ölöêvoid " << 
‚cName
 << "::Tønsf‹m–°d::ve˘‹<doubÀ>& iv, i¡ sigOrBgd ) c⁄°" << 
°d
::
ídl
;

405 
fout
 << "{" << 
°d
::
ídl
;

406 
I¡_t
 
i
=0; i<
fTønsf‹m©i⁄s
.
	`GëSize
(); i++)

407 
fout
 << " Tønsf‹m_"<<
i
+1<<"–iv, sigOrBgd );" << 
°d
::
ídl
;

409 
fout
 << "}" << 
°d
::
ídl
;

411 
	}
}

416 
TSåög
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëName
() const

418 
TSåög
 
	`«me
("Id");

419 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
);

420 
V¨übÀTønsf‹mBa£
 *
åf
;

421 i‡((
åf
 = (
V¨übÀTønsf‹mBa£
*Ë
	`åIt
())) {

422 
«me
 = 
	`TSåög
(
åf
->
	`GëSh‹tName
());

423 (
åf
 = (
V¨übÀTønsf‹mBa£
*Ë
	`åIt
())Ë
«me
 +"_" + 
	`TSåög
—rf->
	`GëSh‹tName
());

425  
«me
;

426 
	}
}

431 
TSåög
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëV¨übÀAxisTôÀ
–c⁄° 
V¨übÀInfo
& 
öfo
 ) const

433 
TSåög
 
xtô
 = 
öfo
.
	`GëTôÀ
();

435 i‡(
fTønsf‹m©i⁄s
.
	`GëSize
() >= 1) {

436 i‡(
fTønsf‹m©i⁄s
.
	`GëSize
() > 1 ||

437 ((
V¨übÀTønsf‹mBa£
*)
	`GëTønsf‹m©i⁄Li°
().
	`La°
())->
	`GëV¨übÀTønsf‹m
(Ë!
Ty≥s
::
kIdítôy
) {

438 
xtô
 +" (" + 
	`GëName
() + ")";

441  
xtô
;

442 
	}
}

450 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
PlŸV¨übÀs
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
, 
TDúe˘‹y
* 
theDúe˘‹y
 )

452 i‡(
	gfRoŸBa£Dú
==0 && 
theDúe˘‹y
 == 0) ;

454 
Log
(Ë<< 
	gkDEBUG
 << "PlotÉvent variables for ";

455 i‡(
	gtheDúe˘‹y
 !=0Ë
Log
()<< 
TSåög
(
theDúe˘‹y
->
GëName
()Ë<< 
Endl
;

456 
Log
(Ë<< 
GëName
(Ë<< 
	gEndl
;

459 
TSåög
 
	gå™sfTy≥
 = "";

460 i‡(
	gtheDúe˘‹y
 == 0) {

461 
å™sfTy≥
 += "_";

462 
	gå™sfTy≥
 +
GëName
();

464 
CÆcSèts
(
evíts
);

467 c⁄° 
UI¡_t
 
	gnv¨
 = 
fD©aSëInfo
.
GëNV¨übÀs
();

468 c⁄° 
UI¡_t
 
	g¡gt
 = 
fD©aSëInfo
.
GëNT¨gës
();

469 c⁄° 
I¡_t
 
	gn˛s
 = 
fD©aSëInfo
.
GëNCœs£s
();

473 
	g°d
::
ve˘‹
<
°d
::ve˘‹<
TH1
*> > 
hV¨s
–
n˛s
 );

474 
	g°d
::
ve˘‹
<
°d
::ve˘‹<°d::ve˘‹<
TH2F
*> > > 
myc‹r
–
n˛s
 );

475 
	g°d
::
ve˘‹
<
°d
::ve˘‹<°d::ve˘‹<
TProfûe
*> > > 
my¥of
–
n˛s
 );

477 
I¡_t
 
	g˛s
 = 0; cl†< 
	gn˛s
; cls++) {

478 
	ghV¨s
.
©
(
˛s
).
ªsize
 ( 
nv¨
+
¡gt
 );

479 
	ghV¨s
.
©
(
˛s
).
assign
 ( 
nv¨
+
¡gt
, 0 );

480 
	gmyc‹r
.
©
(
˛s
).
ªsize
–
nv¨
+
¡gt
 );

481 
	gmy¥of
.
©
(
˛s
).
ªsize
–
nv¨
+
¡gt
 );

482 
UI¡_t
 
	giv¨
=0; iv¨ < 
	gnv¨
+
	g¡gt
; ivar++) {

483 
	gmyc‹r
.
©
(
˛s
).©(
iv¨
).
ªsize
–
nv¨
+
¡gt
 );

484 
	gmy¥of
.
©
(
˛s
).©(
iv¨
).
ªsize
–
nv¨
+
¡gt
 );

485 
	gmyc‹r
.
©
(
˛s
).©(
iv¨
).
assign
–
nv¨
+
¡gt
, 0 );

486 
	gmy¥of
.
©
(
˛s
).©(
iv¨
).
assign
–
nv¨
+
¡gt
, 0 );

493 i‡(
	gnv¨
+
	g¡gt
 > (
	gUI¡_t
)
gC⁄fig
().
GëV¨übÀPlŸtög
().
	gfMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
) {

494 
I¡_t
 
	gnhi°s
 = (
nv¨
+
¡gt
)*(nvar+ntgt - 1)/2;

495 
Log
(Ë<< 
	gkINFO
 << 
gToﬁs
().
Cﬁ‹
("dgªí"Ë<< 
	gEndl
;

496 
Log
(Ë<< 
	gkINFO
 << "<PlŸV¨übÀs> Wû»nŸÖrodu˚ sˇâîÖlŸ†==> " << 
	gEndl
;

497 
Log
(Ë<< 
	gkINFO


498 << "| Thênumbî o‡" << 
	gnv¨
 << " i≈uàv¨übÀ†™d " << 
	g¡gt
 << "Åarget values wouldÑequire "

499 << 
	gnhi°s
 << "Åwo-dimísi⁄Æ" << 
	gEndl
;

500 
Log
(Ë<< 
	gkINFO


501 << "| hi°ogøms, which would occupyÅhêcompuãr'†mem‹y. NŸêth©Åhis" << 
	gEndl
;

502 
Log
(Ë<< 
	gkINFO


503 << "| suµªssi⁄ d€†nŸ havê™y c⁄£quí˚†f‹ you∏™Æysis, othî" << 
	gEndl
;

504 
Log
(Ë<< 
	gkINFO


505 << "|Åh™ÇŸ di•osög o‡the£ sˇâîÖlŸs. You c™ modifyÅhêmaximum" << 
	gEndl
;

506 
Log
(Ë<< 
	gkINFO


507 << "|Çumbî o‡öpuàv¨übÀ†ÆlowedÅÿgíî©êsˇâîÖlŸ†ö your" << 
	gEndl
;

508 
Log
(Ë<< "| s¸ùàvüÅhêcomm™dÜöe:" << 
	gEndl
;

509 
Log
(Ë<< 
	gkINFO


511 << 
gToﬁs
().
Cﬁ‹
("ª£t"Ë<< 
	gEndl
;

512 
Log
(Ë<< 
	gEndl
;

513 
Log
(Ë<< 
	gkINFO
 << "Somêm‹êouçut" << 
	gEndl
;

516 
DoubÀ_t
 
	gtimesRMS
 = 
gC⁄fig
().
GëV¨übÀPlŸtög
().
fTimesRMS
;

517 
UI¡_t
 
	gnbös1D
 = 
gC⁄fig
().
GëV¨übÀPlŸtög
().
fNbös1D
;

518 
UI¡_t
 
	gnbös2D
 = 
gC⁄fig
().
GëV¨übÀPlŸtög
().
fNbös2D
;

520 
UI¡_t
 
	gv¨_tgt
 = 0; var_tgt < 2; var_tgt++) {

521 
UI¡_t
 
	g∆o›s
 = ( 
v¨_tgt
 =0? 
nv¨
:
¡gt
 );

522 
UI¡_t
 
	giv¨
=0; iv¨<
	g∆o›s
; ivar++) {

523 c⁄° 
	gV¨übÀInfo
& 
	göfo
 = ( 
v¨_tgt
 =0 ? 
V¨übÀ
–
iv¨
 ) : 
T¨gë
(ivar) );

524 
TSåög
 
	gmyV¨i
 = 
öfo
.
GëI¡î«lName
();

526 
DoubÀ_t
 
	gmón
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v¨_tgt
*
nv¨
 )+
iv¨
).
fMón
;

527 
DoubÀ_t
 
	grms
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v¨_tgt
*
nv¨
 )+
iv¨
).
fRMS
;

529 
I¡_t
 
	g˛s
 = 0; cl†< 
	gn˛s
; cls++) {

531 
TSåög
 
	g˛assName
 = 
fD©aSëInfo
.
GëCœssInfo
(
˛s
)->
GëName
();

534 
	g˛assName
 +(
¡gt
 =1 && 
v¨_tgt
 == 1 ? "_target" : "");

537 
TH1
* 
	gh
 = 0;

538 i‡(
	göfo
.
GëV¨Ty≥
() == 'I') {

540 
I¡_t
 
xmö
 = 
TM©h
::
Nöt
–
GëMö
––
v¨_tgt
*
nv¨
 )+
iv¨
) );

541 
I¡_t
 
	gxmax
 = 
TM©h
::
Nöt
–
GëMax
––
v¨_tgt
*
nv¨
 )+
iv¨
) + 1 );

542 
I¡_t
 
	gnbös
 = 
xmax
 - 
xmö
;

544 
	gh
 = 
√w
 
TH1F
–
F‹m
("%s__%s%s", 
myV¨i
.
D©a
(), 
˛assName
.D©a(), 
å™sfTy≥
.Data()),

545 
öfo
.
GëTôÀ
(), 
nbös
, 
xmö
, 
xmax
 );

548 
DoubÀ_t
 
	gxmö
 = 
TM©h
::
Max
–
GëMö
––
v¨_tgt
*
nv¨
 )+
iv¨
), 
món
 - 
timesRMS
*
rms
 );

549 
DoubÀ_t
 
	gxmax
 = 
TM©h
::
Mö
–
GëMax
––
v¨_tgt
*
nv¨
 )+
iv¨
), 
món
 + 
timesRMS
*
rms
 );

553 i‡(
	gxmö
 >
xmax
Ëxmax = 
xmö
*1.1;

554 i‡(
	gxmö
 >
xmax
Ëxmax = 
xmö
 + 1;

556 
	gxmax
 +(
xmax
 - 
xmö
)/
nbös1D
;

558 
	gh
 = 
√w
 
TH1F
–
F‹m
("%s__%s%s", 
myV¨i
.
D©a
(), 
˛assName
.D©a(), 
å™sfTy≥
.Data()),

559 
öfo
.
GëTôÀ
(), 
nbös1D
, 
xmö
, 
xmax
 );

562 
	gh
->
GëXaxis
()->
SëTôÀ
–
gToﬁs
().
GëXTôÀWôhUnô
–
GëV¨übÀAxisTôÀ
–
öfo
 ), info.
GëUnô
() ) );

563 
	gh
->
GëYaxis
()->
SëTôÀ
–
gToﬁs
().
GëYTôÀWôhUnô
–*
h
, 
öfo
.
GëUnô
(), 
kFALSE
 ) );

564 
	ghV¨s
.
©
(
˛s
).©((
v¨_tgt
*
nv¨
)+
iv¨
Ë
h
;

567 i‡(
	gnv¨
+
	g¡gt
 <(
UI¡_t
)
gC⁄fig
().
GëV¨übÀPlŸtög
().
fMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
) {

569 
UI¡_t
 
v_t
 = 0; 
	gv_t
 < 2; v_t++) {

570 
UI¡_t
 
	g∆
 = ( 
v_t
==0?
nv¨
:
¡gt
 );

571 
UI¡_t
 
	g°¨t
 = ( 
v_t
==0? (
v¨_tgt
==0?
iv¨
+1:0):(v¨_tgt==0?
∆
:ivar+1) );

572 
UI¡_t
 
	gj
=
°¨t
; j<
	g∆
; j++) {

574 c⁄° 
	gV¨übÀInfo
& 
	göfoj
 = ( 
v_t
 =0 ? 
V¨übÀ
–
j
 ) : 
T¨gë
(j) );

575 
TSåög
 
	gmyV¨j
 = 
öfoj
.
GëI¡î«lName
();

577 
DoubÀ_t
 
	grxmö
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v_t
*
nv¨
 )+
iv¨
).
fMö
;

578 
DoubÀ_t
 
	grxmax
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v_t
*
nv¨
 )+
iv¨
).
fMax
;

579 
DoubÀ_t
 
	grymö
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v_t
*
nv¨
 )+
j
).
fMö
;

580 
DoubÀ_t
 
	grymax
 = 
fV¨übÀSèts
.
©
(
fNumC
-1).©––
v_t
*
nv¨
 )+
j
).
fMax
;

583 
TH2F
* 
	gh2
 = 
√w
 TH2F–
F‹m
–"sˇt_%s_vs_%s_%s%s" , 
myV¨j
.
D©a
(), 
myV¨i
.Data(),

584 
˛assName
.
D©a
(), 
å™sfTy≥
.Data() ),

585 
F‹m
–"%†vîsu†%†(%s)%s", 
öfoj
.
GëTôÀ
(), 
öfo
.GetTitle(),

586 
˛assName
.
D©a
(), 
å™sfTy≥
.Data() ),

587 
nbös2D
, 
rxmö
 , 
rxmax
,

588 
nbös2D
, 
rymö
 , 
rymax
 );

590 
	gh2
->
GëXaxis
()->
SëTôÀ
–
gToﬁs
().
GëXTôÀWôhUnô
–
GëV¨übÀAxisTôÀ
–
öfo
 ), infÿ.
GëUnô
() ) );

591 
	gh2
->
GëYaxis
()->
SëTôÀ
–
gToﬁs
().
GëXTôÀWôhUnô
–
GëV¨übÀAxisTôÀ
–
öfoj
 ), infoj.
GëUnô
() ) );

592 
	gmyc‹r
.
©
(
˛s
).©((
v¨_tgt
*
nv¨
)+
iv¨
).©((
v_t
*nv¨)+
j
Ë
h2
;

595 
TProfûe
* 
	gp
 = 
√w
 TProfûe–
F‹m
–"¥of_%s_vs_%s_%s%s", 
myV¨j
.
D©a
(),

596 
myV¨i
.
D©a
(), 
˛assName
.Data(),

597 
å™sfTy≥
.
D©a
() ),

598 
F‹m
( "profile %s versus %s (%s)%s",

599 
öfoj
.
GëTôÀ
(), 
öfo
.GetTitle(),

600 
˛assName
.
D©a
(), 
å™sfTy≥
.D©a(Ë), 
nbös1D
,

601 
rxmö
, 
rxmax
 );

604 
	gp
->
GëXaxis
()->
SëTôÀ
–
gToﬁs
().
GëXTôÀWôhUnô
–
GëV¨übÀAxisTôÀ
–
öfo
 ), infÿ.
GëUnô
() ) );

605 
	gp
->
GëYaxis
()->
SëTôÀ
–
gToﬁs
().
GëXTôÀWôhUnô
–
GëV¨übÀAxisTôÀ
–
öfoj
 ), infoj.
GëUnô
() ) );

606 
	gmy¥of
.
©
(
˛s
).©((
v¨_tgt
*
nv¨
)+
iv¨
).©((
v_t
*nv¨)+
j
Ë
p
;

614 
UI¡_t
 
	g√vts
 = 
evíts
.
size
();

617 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
xªgmón
 ( 
nv¨
+1, 0 );

618 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
x2ªgmón
–
nv¨
+1, 0 );

619 
	g°d
::
ve˘‹
<
DoubÀ_t
> 
xCªgmón
–
nv¨
+1, 0 );

622 
UI¡_t
 
	gõvt
=0; ievt<
	g√vts
; ievt++) {

624 c⁄° 
Evít
* 
	gev
 = 
evíts
[
õvt
];

626 
Flﬂt_t
 
	gweight
 = 
ev
->
GëWeight
();

627 
I¡_t
 
	g˛s
 = 
ev
->
GëCœss
();

630 i‡(
	g¡gt
 == 1) {

631 
Flﬂt_t
 
vÆr
 = 
ev
->
GëT¨gë
(0);

632 
	gxªgmón
[
nv¨
] +
vÆr
;

633 
	gx2ªgmón
[
nv¨
] +
vÆr
*valr;

634 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

635 
Flﬂt_t
 
	gvÆi
 = 
ev
->
GëVÆue
(
iv¨
);

636 
	gxªgmón
[
iv¨
] +
vÆi
;

637 
	gx2ªgmón
[
iv¨
] +
vÆi
*vali;

638 
	gxCªgmón
[
iv¨
] +
vÆi
*
vÆr
;

643 
UI¡_t
 
	gv¨_tgt
 = 0; var_tgt < 2; var_tgt++) {

644 
UI¡_t
 
	g∆o›s
 = ( 
v¨_tgt
 =0? 
nv¨
:
¡gt
 );

645 
UI¡_t
 
	giv¨
=0; iv¨<
	g∆o›s
; ivar++) {

646 
Flﬂt_t
 
	gvÆi
 = ( 
v¨_tgt
 =0 ? 
ev
->
GëVÆue
(
iv¨
Ë:Év->
GëT¨gë
(ivar) );

649 
	ghV¨s
.
©
(
˛s
).©––
v¨_tgt
*
nv¨
 )+
iv¨
)->
Fûl
–
vÆi
, 
weight
 );

652 i‡(
	gnv¨
+
	g¡gt
 <(
UI¡_t
)
gC⁄fig
().
GëV¨übÀPlŸtög
().
fMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
) {

654 
UI¡_t
 
v_t
 = 0; 
	gv_t
 < 2; v_t++) {

655 
UI¡_t
 
	g∆
 = ( 
v_t
==0 ? 
nv¨
 : 
¡gt
 );

656 
UI¡_t
 
	g°¨t
 = ( 
v_t
==0 ? (
v¨_tgt
==0?
iv¨
+1:0Ë: (v¨_tgt==0?
∆
:ivar+1) );

657 
UI¡_t
 
	gj
=
°¨t
; j<
	g∆
; j++) {

658 
Flﬂt_t
 
	gvÆj
 = ( 
v_t
 =0 ? 
ev
->
GëVÆue
(
j
Ë:Év->
GëT¨gë
(j) );

659 
	gmyc‹r
.
©
(
˛s
).©––
v¨_tgt
*
nv¨
 )+
iv¨
).©––
v_t
*nv¨ )+
j
)->
Fûl
–
vÆi
, 
vÆj
, 
weight
 );

660 
	gmy¥of
.
©
(
˛s
).©––
v¨_tgt
*
nv¨
 )+
iv¨
).©––
v_t
*nv¨ )+
j
)->
Fûl
–
vÆi
, 
vÆj
, 
weight
 );

669 i‡(
	g¡gt
 == 1) {

670 
UI¡_t
 
iv¨
=0; 
	giv¨
<=
nv¨
; ivar++) {

671 
	gxªgmón
[
iv¨
] /
√vts
;

672 
	gx2ªgmón
[
iv¨
] = 
x2ªgmón
[iv¨]/
√vts
 - 
xªgmón
[ivar]*xregmean[ivar];

674 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

675 
	gxCªgmón
[
iv¨
] = 
xCªgmón
[iv¨]/
√vts
 - 
xªgmón
[iv¨]*xªgmón[
nv¨
];

676 
	gxCªgmón
[
iv¨
] /
TM©h
::
Sqπ
–
x2ªgmón
[iv¨]*x2ªgmón[
nv¨
] );

679 
	gfR™kög
.
push_back
–
√w
 
R™kög
–
GëName
() + "Transformation", "|Correlation withÅarget|" ) );

680 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

681 
DoubÀ_t
 
	gabsc‹
 = 
TM©h
::
Abs
–
xCªgmón
[
iv¨
] );

682 
	gfR™kög
.
back
()->
AddR™k
–
R™k
–
fD©aSëInfo
.
GëV¨übÀInfo
(
iv¨
).
GëLabñ
(), 
absc‹
 ) );

685 i‡(
	gnv¨
+
	g¡gt
 <(
UI¡_t
)
gC⁄fig
().
GëV¨übÀPlŸtög
().
fMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
) {

688 
fR™kög
.
push_back
–
√w
 
R™kög
–
GëName
() + "Transformation", "Mutual information" ) );

689 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

690 
TH2F
* 
	gh1
 = 
myc‹r
.
©
(0).©–
nv¨
 ).©–
iv¨
 );

691 
DoubÀ_t
 
	gmi
 = 
gToﬁs
().
GëMutuÆInf‹m©i⁄
–*
h1
 );

692 
	gfR™kög
.
back
()->
AddR™k
–
R™k
–
fD©aSëInfo
.
GëV¨übÀInfo
(
iv¨
).
GëLabñ
(), 
mi
 ) );

696 
	gfR™kög
.
push_back
–
√w
 
R™kög
–
GëName
() + "Transformation", "Correlation Ratio" ) );

697 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

698 
TH2F
* 
	gh2
 = 
myc‹r
.
©
(0).©–
nv¨
 ).©–
iv¨
 );

699 
DoubÀ_t
 
	g¸
 = 
gToﬁs
().
GëC‹ªœti⁄R©io
–*
h2
 );

700 
	gfR™kög
.
back
()->
AddR™k
–
R™k
–
fD©aSëInfo
.
GëV¨übÀInfo
(
iv¨
).
GëLabñ
(), 
¸
 ) );

704 
	gfR™kög
.
push_back
–
√w
 
R™kög
–
GëName
() + "Transformation", "Correlation Ratio (T)" ) );

705 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨
; ivar++) {

706 
TH2F
* 
	gh2T
 = 
gToﬁs
().
Tøn•o£Hi°
–*
myc‹r
.
©
(0).©–
nv¨
 ).©–
iv¨
 ) );

707 
DoubÀ_t
 
	g¸
 = 
gToﬁs
().
GëC‹ªœti⁄R©io
–*
h2T
 );

708 
	gfR™kög
.
back
()->
AddR™k
–
R™k
–
fD©aSëInfo
.
GëV¨übÀInfo
(
iv¨
).
GëLabñ
(), 
¸
 ) );

709 
dñëe
 
	gh2T
;

715 i‡(
	gfD©aSëInfo
.
GëNCœs£s
() == 2

716 && 
fD©aSëInfo
.
GëCœssInfo
("Sig«l"Ë!
NULL


717 && 
fD©aSëInfo
.
GëCœssInfo
("Background"Ë!
NULL


719 
fR™kög
.
push_back
–
√w
 
R™kög
–
GëName
() + "Transformation", "Separation" ) );

720 
UI¡_t
 
	gi
=0; i<
	gnv¨
; i++) {

721 
DoubÀ_t
 
	g£p
 = 
gToﬁs
().
GëSï¨©i⁄
–
hV¨s
.
©
(
fD©aSëInfo
.
GëCœssInfo
("Sig«l"Ë->
GëNumbî
()).©(
i
),

722 
hV¨s
.
©
(
fD©aSëInfo
.
GëCœssInfo
("Background")->
GëNumbî
()).©(
i
) );

723 
	gfR™kög
.
back
()->
AddR™k
–
R™k
–
hV¨s
.
©
(
fD©aSëInfo
.
GëCœssInfo
("Sig«l")->
GëNumbî
()).©(
i
)->
GëTôÀ
(),

724 
£p
 ) );

732 
TDúe˘‹y
* 
	gloˇlDú
 = 
theDúe˘‹y
;

733 i‡(
	gtheDúe˘‹y
 == 0) {

735 
fRoŸBa£Dú
->
cd
();

736 
TSåög
 
	gouçutDú
 = TString("InputVariables");

737 
TLi°Iãr
 
åIt
(&
fTønsf‹m©i⁄s
);

738 
V¨übÀTønsf‹mBa£
 *
	gåf
 = (V¨übÀTønsf‹mBa£*Ë
åIt
())

739 
ouçutDú
 +"_" + 
TSåög
(
åf
->
GëSh‹tName
());

741 
TSåög
 
	guniqueOuçutDú
 = 
ouçutDú
;

742 
I¡_t
 
	gcou¡î
 = 0;

743 
TObje˘
* 
	go
 = 
NULL
;

744  (
	go
 = 
fRoŸBa£Dú
->
FödObje˘
(
uniqueOuçutDú
)) != 0 ){

745 
uniqueOuçutDú
 = 
ouçutDú
+
F‹m
("_%d",
cou¡î
);

746 
Log
(Ë<< 
	gkINFO
 << "A " << 
	go
->
CœssName
(Ë<< " wôhÇamê" << o->
GëName
() << "álreadyÉxists in "

747 << 
	gfRoŸBa£Dú
->
GëP©h
(Ë<< ", I wû»åy wôh "<<
	guniqueOuçutDú
<<"." << 
	gEndl
;

748 ++
	gcou¡î
;

756 
	gloˇlDú
 = 
fRoŸBa£Dú
->
mkdú
–
uniqueOuçutDú
 );

757 
	gloˇlDú
->
cd
();

759 
Log
(Ë<< 
	gkVERBOSE
 << "Cª©ê™d swôchÅÿdúe˘‹y " << 
	gloˇlDú
->
GëP©h
(Ë<< 
	gEndl
;

762 
	gtheDúe˘‹y
->
cd
();

765 
UI¡_t
 
	gi
=0; i<
	gnv¨
+
	g¡gt
; i++) {

766 
I¡_t
 
	g˛s
 = 0; cl†< 
	gn˛s
; cls++) {

767 i‡(
	ghV¨s
.
©
(
˛s
).©(
i
) != 0) {

768 
hV¨s
.
©
(
˛s
).©(
i
)->
Wrôe
();

769 
	ghV¨s
.
©
(
˛s
).©(
i
)->
SëDúe˘‹y
(0);

770 
dñëe
 
	ghV¨s
.
©
(
˛s
).©(
i
);

776 i‡(
	gnv¨
+
	g¡gt
 <(
UI¡_t
)
gC⁄fig
().
GëV¨übÀPlŸtög
().
fMaxNumOfAŒowedV¨übÀsF‹SˇâîPlŸs
) {

778 
loˇlDú
 =ÜoˇlDú->
mkdú
( "CorrelationPlots" );

779 
	gloˇlDú
 ->
cd
();

780 
Log
(Ë<< 
	gkDEBUG
 << "Cª©êsˇâîándÖrofûê∂Ÿ†öÅ¨gë-fûêdúe˘‹y: " << 
	gEndl
;

781 
Log
(Ë<< 
	gkDEBUG
 << 
	gloˇlDú
->
GëP©h
(Ë<< 
	gEndl
;

784 
UI¡_t
 
	gi
=0; i<
	gnv¨
+
	g¡gt
; i++) {

785 
UI¡_t
 
	gj
=
i
+1; j<
	gnv¨
+
	g¡gt
; j++) {

786 
I¡_t
 
	g˛s
 = 0; cl†< 
	gn˛s
; cls++) {

787 i‡(
	gmyc‹r
.
©
(
˛s
).©(
i
).©(
j
) != 0 ) {

788 
myc‹r
.
©
(
˛s
).©(
i
).©(
j
)->
Wrôe
();

789 
	gmyc‹r
.
©
(
˛s
).©(
i
).©(
j
)->
SëDúe˘‹y
(0);

790 
dñëe
 
	gmyc‹r
.
©
(
˛s
).©(
i
).©(
j
);

792 i‡(
	gmy¥of
.
©
(
˛s
).©(
i
).©(
j
) != 0) {

793 
my¥of
.
©
(
˛s
).©(
i
).©(
j
)->
Wrôe
();

794 
	gmy¥of
.
©
(
˛s
).©(
i
).©(
j
)->
SëDúe˘‹y
(0);

795 
dñëe
 
	gmy¥of
.
©
(
˛s
).©(
i
).©(
j
);

801 i‡(
	gtheDúe˘‹y
 !0 ) 
theDúe˘‹y
->
cd
();

802 
	gfRoŸBa£Dú
->
cd
();

808 
	g°d
::
ve˘‹
<
TSåög
>* 
TMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëTønsf‹m©i⁄SåögsOfLa°Tønsf‹m
() const

810 
V¨übÀTønsf‹mBa£
* 
åf
 = ((V¨übÀTønsf‹mBa£*)
	`GëTønsf‹m©i⁄Li°
().
	`La°
());

811 i‡(!
åf
)  0;

812  
åf
->
	`GëTønsf‹m©i⁄Såögs
–
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`back
() );

813 
	}
}

818 c⁄° * 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëNameOfLa°Tønsf‹m
() const

820 
V¨übÀTønsf‹mBa£
* 
åf
 = ((V¨übÀTønsf‹mBa£*)
	`GëTønsf‹m©i⁄Li°
().
	`La°
());

821 i‡(!
åf
)  0;

822  
åf
->
	`GëName
();

823 
	}
}

828 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$WrôeToSåóm
–
°d
::
o°ªam
& 
o
 ) const

830 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
);

831 
°d
::
ve˘‹
< 
I¡_t
 >::
c⁄°_ôî©‹
 
rClsIt
 = 
fTønsf‹m©i⁄sRe„ªn˚Cœs£s
.
	`begö
();

833 
o
 << "NTønsf‹mèti⁄†" << 
fTønsf‹m©i⁄s
.
	`GëSize
(Ë<< 
°d
::
ídl
 << std::endl;

835 
CœssInfo
* 
ci
;

836 
UI¡_t
 
i
 = 1;

837 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
()) {

838 
o
 << "#TR -*-*-*-*-*-*-*Åønsf‹m©i⁄ " << 
i
++ << ": " << 
åf
->
	`GëName
(Ë<< " -*-*-*-*-*-*-*-" << 
°d
::
ídl
;

839 
åf
->
	`WrôeTønsf‹m©i⁄ToSåóm
(
o
);

840 
ci
 = 
fD©aSëInfo
.
	`GëCœssInfo
–(*
rClsIt
) );

841 
TSåög
 
˛sName
;

842 i‡(
ci
 =0 ) 
˛sName
 = "AllClasses";

843 
˛sName
 = 
ci
->
	`GëName
();

844 
o
 << "Re„ªn˚Cœs†" << 
˛sName
 << 
°d
::
ídl
;

845 
rClsIt
++;

847 
	}
}

853 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$AddXMLTo
–* 
∑ª¡
 ) const

855 if(!
∑ª¡
) ;

856 * 
åfs
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transformations");

857 
	`gToﬁs
().
	`AddAâr
–
åfs
, "NTønsf‹m©i⁄s", 
fTønsf‹m©i⁄s
.
	`GëSize
() );

858 
TLi°Iãr
 
	`åIt
(&
fTønsf‹m©i⁄s
);

859 
V¨übÀTønsf‹mBa£
 *
åf
 = (V¨übÀTønsf‹mBa£*Ë
	`åIt
()Ëåf->
	`AâachXMLTo
(
åfs
);

860 
	}
}

864 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$RódFromSåóm
–
°d
::
i°ªam
& )

866 
	`Log
(Ë<< 
kFATAL
 << "RódÅønsf‹m©i⁄†nŸ im∂emíãd" << 
Endl
;

868 
	}
}

872 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$RódFromXML
–* 
åf¢ode
 )

874 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
åf¢ode
 );

875 
ch
) {

876 
I¡_t
 
idxCls
 = -1;

877 
TSåög
 
å‚ame
;

878 
	`gToﬁs
().
	`RódAâr
(
ch
, "Name", 
å‚ame
);

880 
V¨übÀTønsf‹mBa£
* 
√wåf
 = 0;

882 i‡(
å‚ame
 == "Decorrelation" ) {

883 
√wåf
 = 
√w
 
	`V¨übÀDec‹rTønsf‹m
(
fD©aSëInfo
);

885 i‡(
å‚ame
 == "PCA" ) {

886 
√wåf
 = 
√w
 
	`V¨übÀPCATønsf‹m
(
fD©aSëInfo
);

888 i‡(
å‚ame
 == "Gauss" ) {

889 
√wåf
 = 
√w
 
	`V¨übÀGaussTønsf‹m
(
fD©aSëInfo
);

891 i‡(
å‚ame
 == "Uniform" ) {

892 
√wåf
 = 
√w
 
	`V¨übÀGaussTønsf‹m
(
fD©aSëInfo
, "Uniform");

894 i‡(
å‚ame
 == "Normalize" ) {

895 
√wåf
 = 
√w
 
	`V¨übÀN‹mÆizeTønsf‹m
(
fD©aSëInfo
);

897 i‡(
å‚ame
 == "Rearrange" ) {

898 
√wåf
 = 
√w
 
	`V¨übÀRóº™geTønsf‹m
(
fD©aSëInfo
);

900 i‡(
å‚ame
 != "None") {

903 
	`Log
(Ë<< 
kFATAL
 << "<ReadFromXML> VariableÅransform '"

904 << 
å‚ame
 << "' unknown." << 
Endl
;

906 
√wåf
->
	`RódFromXML
–
ch
 );

907 
	`AddTønsf‹m©i⁄
–
√wåf
, 
idxCls
 );

908 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

910 
	}
}

915 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$PrötV¨übÀR™kög
() const

918 
	`Log
(Ë<< 
kINFO
 << "R™kög i≈uàv¨übÀ†(mëhod un•ecific)..." << 
Endl
;

919 
°d
::
ve˘‹
<
R™kög
*>::
c⁄°_ôî©‹
 
ô
 = 
fR™kög
.
	`begö
();

920 ; 
ô
 !
fR™kög
.
	`íd
(); it++Ë(*ô)->
	`Pröt
();

921 
	}
}

925 
DoubÀ_t
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëMón
–
I¡_t
 
iv¨
, I¡_à
˛s
 ) const

927 
åy
 {

928  
fV¨übÀSèts
.
	`©
(
˛s
).©(
iv¨
).
fMón
;

930 
	`ˇtch
(...) {

931 
åy
 {

932  
fV¨übÀSèts
.
	`©
(
fNumC
-1).©(
iv¨
).
fMón
;

934 
	`ˇtch
(...) {

935 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmó¿vÆue. " << 
Endl
;

938 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmó¿vÆue. VÆuê0 giví back" << 
Endl
;

940 
	}
}

944 
DoubÀ_t
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëRMS
–
I¡_t
 
iv¨
, I¡_à
˛s
 ) const

946 
åy
 {

947  
fV¨übÀSèts
.
	`©
(
˛s
).©(
iv¨
).
fRMS
;

949 
	`ˇtch
(...) {

950 
åy
 {

951  
fV¨übÀSèts
.
	`©
(
fNumC
-1).©(
iv¨
).
fRMS
;

953 
	`ˇtch
(...) {

954 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêRMS vÆue. " << 
Endl
;

957 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêRMS vÆue. VÆuê0 giví back" << 
Endl
;

959 
	}
}

963 
DoubÀ_t
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëMö
–
I¡_t
 
iv¨
, I¡_à
˛s
 ) const

965 
åy
 {

966  
fV¨übÀSèts
.
	`©
(
˛s
).©(
iv¨
).
fMö
;

968 
	`ˇtch
(...) {

969 
åy
 {

970  
fV¨übÀSèts
.
	`©
(
fNumC
-1).©(
iv¨
).
fMö
;

972 
	`ˇtch
(...) {

973 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmöimum vÆue. " << 
Endl
;

976 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmöimum vÆue. VÆuê0 giví back" << 
Endl
;

978 
	}
}

982 
DoubÀ_t
 
	gTMVA
::
Tønsf‹m©i⁄H™dÀr
::
	$GëMax
–
I¡_t
 
iv¨
, I¡_à
˛s
 ) const

984 
åy
 {

985  
fV¨übÀSèts
.
	`©
(
˛s
).©(
iv¨
).
fMax
;

987 
	`ˇtch
(...) {

988 
åy
 {

989  
fV¨übÀSèts
.
	`©
(
fNumC
-1).©(
iv¨
).
fMax
;

991 
	`ˇtch
(...) {

992 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmaximum vÆue. " << 
Endl
;

995 
	`Log
(Ë<< 
kWARNING
 << "Inc⁄si°íàv¨übÀ sèã whíÑódögÅhêmaximum vÆue. VÆuê0 giví back" << 
Endl
;

997 
	}
}

	@src/Types.cxx

33 
	~"TMVA/Ty≥s.h
"

35 
	~"TMVA/MsgLoggî.h
"

37 
	~"Rty≥sC‹e.h
"

38 
	~"TSåög.h
"

40 
	~<m≠
>

41 
	~<io°ªam
>

42 #i‡
__˝lu•lus
 > 199711L

43 
	~<muãx
>

46 #i‡
__˝lu•lus
 > 199711L

47 
	g°d
::
©omic
<
TMVA
::
Ty≥s
*> TMVA::Ty≥s::
fgTy≥sPå
{0};

48 
	g°d
::
muãx
 
gTy≥sMuãx
;

50 
	gTMVA
::
Ty≥s
* 
TMVA
::Ty≥s::
fgTy≥sPå
 = 0;

56 
	gTMVA
::
Ty≥s
::
	$Ty≥s
()

57 : 
	`fLoggî
–
√w
 
	`MsgLoggî
("Types") )

59 
	}
}

61 
TMVA
::
Ty≥s
::~
	$Ty≥s
()

64 
dñëe
 
fLoggî
;

65 
	}
}

70 
	gTMVA
::
Ty≥s
& 
TMVA
::Ty≥s::
	$In°™˚
()

72 #i‡
__˝lu•lus
 > 199711L

73 if(!
fgTy≥sPå
) {

74 
Ty≥s
* 
tmp
 = 
√w
 
	`Ty≥s
();

75 
Ty≥s
* 
ex≥˘ed
 = 0;

76 if(!
fgTy≥sPå
.
	`com∑ª_exch™ge_°r⁄g
(
ex≥˘ed
,
tmp
)) {

78 
dñëe
 
tmp
;

81  *
fgTy≥sPå
;

83  
fgTy≥sPå
 ? *fgTy≥sPå : *(fgTy≥sPå = 
√w
 
	`Ty≥s
());

85 
	}
}

90 
	gTMVA
::
Ty≥s
::
	$De°royIn°™˚
()

92 #i‡
__˝lu•lus
 > 199711L

93 i‡(
fgTy≥sPå
 !0Ë{ 
dñëe
 fgTy≥sPå.
	`lﬂd
(); fgTypesPtr = 0; }

95 i‡(
fgTy≥sPå
 !0Ë{ 
dñëe
 fgTypesPtr; fgTypesPtr = 0; }

97 
	}
}

101 
Boﬁ_t
 
	gTMVA
::
Ty≥s
::
	$AddTy≥M≠pög
–
Ty≥s
::
EMVA
 
mëhod
, c⁄° 
TSåög
& 
mëhod«me
 )

103 #i‡
__˝lu•lus
 > 199711L

104 
°d
::
lock_gu¨d
<°d::
muãx
> 
	`gu¨d
(
gTy≥sMuãx
);

106 
°d
::
m≠
<
TSåög
, 
EMVA
>::
c⁄°_ôî©‹
 
ô
 = 
fSå2ty≥
.
	`föd
–
mëhod«me
 );

107 i‡(
ô
 !
fSå2ty≥
.
	`íd
()) {

108 
	`Log
(Ë<< 
kFATAL


109 << "C™nŸádd mëhod " << 
mëhod«me


110 << "Åÿthê«me->ty≥ m≠ beˇu£ iàexi°†Æªady" << 
Endl
;

111  
kFALSE
;

114 
fSå2ty≥
[
mëhod«me
] = 
mëhod
;

115  
kTRUE
;

116 
	}
}

121 
	gTMVA
::
Ty≥s
::
EMVA
 
TMVA
::Ty≥s::
	$GëMëhodTy≥
–c⁄° 
TSåög
& 
mëhod
 ) const

123 #i‡
__˝lu•lus
 > 199711L

124 
°d
::
lock_gu¨d
<°d::
muãx
> 
	`gu¨d
(
gTy≥sMuãx
);

126 
°d
::
m≠
<
TSåög
, 
EMVA
>::
c⁄°_ôî©‹
 
ô
 = 
fSå2ty≥
.
	`föd
–
mëhod
 );

127 i‡(
ô
 =
fSå2ty≥
.
	`íd
()) {

128 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿mëhod i¿m≠: " << 
mëhod
 << 
Endl
;

129  
kV¨übÀ
;

131  
ô
->
£c⁄d
;

132 
	}
}

136 
TSåög
 
	gTMVA
::
Ty≥s
::
	$GëMëhodName
–
TMVA
::
Ty≥s
::
EMVA
 
mëhod
 ) const

138 #i‡
__˝lu•lus
 > 199711L

139 
°d
::
lock_gu¨d
<°d::
muãx
> 
	`gu¨d
(
gTy≥sMuãx
);

141 
°d
::
m≠
<
TSåög
, 
EMVA
>::
c⁄°_ôî©‹
 
ô
 = 
fSå2ty≥
.
	`begö
();

142 ; 
ô
!=
fSå2ty≥
.
	`íd
(); it++Ëi‡(ô->
£c⁄d
 =
mëhod
Ë it->
fú°
;

143 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿mëhod index i¿m≠: " << 
mëhod
 << 
Endl
;

145 
	}
}

	@src/VarTransformHandler.cxx

21 
	~"TMVA/V¨Tønsf‹mH™dÀr.h
"

23 
	~"TMVA/CœssifõrFa˘‹y.h
"

24 
	~"TMVA/D©aLﬂdî.h
"

25 
	~"TMVA/Evít.h
"

26 
	~"TMVA/D©aI≈utH™dÀr.h
"

27 
	~"TMVA/D©aSë.h
"

28 
	~"TMVA/D©aSëInfo.h
"

29 
	~"TMVA/MëhodBa£.h
"

30 
	~"TMVA/MëhodDNN.h
"

31 
	~"TMVA/MsgLoggî.h
"

32 
	~"TMVA/Toﬁs.h
"

33 
	~"TMVA/Ty≥s.h
"

34 
	~"TMVA/V¨übÀInfo.h
"

36 
	~"TM©h.h
"

37 
	~"TVe˘‹D.h
"

38 
	~"TFûe.h
"

39 
	~"TTªe.h
"

40 
	~"TM©rix.h
"

41 
	~"TM©rixTS∑r£.h
"

42 
	~"TM©rixDS∑r£fwd.h
"

43 
	~"TC™vas.h
"

44 
	~"TGøph.h
"

45 
	~"TStyÀ.h
"

46 
	~"TLegíd.h
"

47 
	~"TH2.h
"

49 
	~<Æg‹ôhm
>

50 
	~<iom™ù
>

51 
	~<ve˘‹
>

56 
	gTMVA
::
V¨Tønsf‹mH™dÀr
::
	$V¨Tønsf‹mH™dÀr
–
D©aLﬂdî
* 
dl
 )

57 : 
	`fLoggî
 ( 
√w
 
	`MsgLoggî
(
	`TSåög
("V¨Tønsf‹mH™dÀr").
	`D©a
(), 
kINFO
) ),

58 
	`fD©aSëInfo
(
dl
->
	`GëD©aSëInfo
()),

59 
	`fD©aLﬂdî
 (
dl
),

60 
	`fEvíts
 (
fD©aSëInfo
.
	`GëD©aSë
()->
	$GëEvítCﬁÀ˘i⁄
())

62 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡evít†- " << 
fEvíts
.
	`size
(Ë<< 
Endl
;

63 
	}
}

68 
	gTMVA
::
V¨Tønsf‹mH™dÀr
::~
	$V¨Tønsf‹mH™dÀr
()

71 
dñëe
 
fLoggî
;

72 
	}
}

91 
	gTMVA
::
D©aLﬂdî
* 
TMVA
::
V¨Tønsf‹mH™dÀr
::
	$V¨ün˚Thªshﬁd
(
DoubÀ_t
 
thªshﬁd
)

93 
	`CÆcN‹m
();

94 c⁄° 
UI¡_t
 
nv¨s
 = 
fD©aSëInfo
.
	`GëNV¨übÀs
();

95 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡v¨übÀ†bef‹êå™sf‹m©i⁄: " << 
nv¨s
 << 
Endl
;

96 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨s
 = 
fD©aSëInfo
.
	`GëV¨übÀInfos
();

102 
TMVA
::
D©aLﬂdî
 *
å™sf‹medLﬂdî
 = 
√w
 TMVA::
	`D©aLﬂdî
("vt_transformed_dataset");

103 
	`Log
(Ë<< 
kINFO
 << "Sñe˘ög v¨übÀ†who£ v¨ün˚ i†abovêthªshﬁd vÆuê" << 
thªshﬁd
 << 
Endl
;

104 
I¡_t
 
maxL
 = 
fD©aSëInfo
.
	`GëV¨übÀNameMaxLígth
();

105 
maxL
 = maxL + 16;

106 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

107 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
) << "Selected Variables";

108 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(10Ë<< "V¨ün˚" << 
Endl
;

109 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

110 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

111 
DoubÀ_t
 
v¨ün˚
 = 
v¨s
[
iv¨
].
	`GëV¨ün˚
();

112 i‡(
v¨ün˚
 > 
thªshﬁd
)

114 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
v¨s
[
iv¨
].
	`GëEx¥essi⁄
();

115 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
v¨ün˚
 << 
Endl
;

116 
å™sf‹medLﬂdî
->
	`AddV¨übÀ
(
v¨s
[
iv¨
].
	`GëEx¥essi⁄
(), v¨s[iv¨].
	`GëV¨Ty≥
());

119 
	`C›yD©aLﬂdî
(
å™sf‹medLﬂdî
,
fD©aLﬂdî
);

120 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

123 
å™sf‹medLﬂdî
->
	`Pª∑ªTøöögAndTe°Tªe
(
fD©aLﬂdî
->
	`GëD©aSëInfo
().
	`GëCut
("Sig«l"), fD©aLﬂdî->GëD©aSëInfo().GëCut("Background"), fD©aLﬂdî->GëD©aSëInfo().
	`GëS∂ôO±i⁄s
());

124 
	`Log
(Ë<< 
kINFO
 << "Numbî o‡v¨übÀ†a·îÅønsf‹m©i⁄: " << 
å™sf‹medLﬂdî
->
	`GëD©aSëInfo
().
	`GëNV¨übÀs
(Ë<< 
Endl
;

126  
å™sf‹medLﬂdî
;

127 
	}
}

136 
	gTMVA
::
V¨Tønsf‹mH™dÀr
::
	$Upd©eN‹m
 (
I¡_t
 
iv¨
, 
DoubÀ_t
 
x
)

138 
I¡_t
 
nv¨s
 = 
fD©aSëInfo
.
	`GëNV¨übÀs
();

139 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨s
 = 
fD©aSëInfo
.
	`GëV¨übÀInfos
();

140 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
èrs
 = 
fD©aSëInfo
.
	`GëT¨gëInfos
();

141 if–
iv¨
 < 
nv¨s
 ){

142 i‡(
x
 < 
v¨s
[
iv¨
].
	`GëMö
()Ëv¨s[iv¨].
	`SëMö
(x);

143 i‡(
x
 > 
v¨s
[
iv¨
].
	`GëMax
()Ëv¨s[iv¨].
	`SëMax
(x);

146 i‡(
x
 < 
èrs
[
iv¨
-
nv¨s
].
	`GëMö
()Ëèrs[iv¨-nv¨s].
	`SëMö
(x);

147 i‡(
x
 > 
èrs
[
iv¨
-
nv¨s
].
	`GëMax
()Ëèrs[iv¨-nv¨s].
	`SëMax
(x);

149 
	}
}

155 
	gTMVA
::
V¨Tønsf‹mH™dÀr
::
	$CÆcN‹m
()

157 c⁄° 
°d
::
ve˘‹
<
TMVA
::
Evít
*>& 
evíts
 = 
fD©aSëInfo
.
	`GëD©aSë
()->
	`GëEvítCﬁÀ˘i⁄
();

159 c⁄° 
UI¡_t
 
nv¨s
 = 
fD©aSëInfo
.
	`GëNV¨übÀs
();

160 c⁄° 
UI¡_t
 
¡gts
 = 
fD©aSëInfo
.
	`GëNT¨gës
();

161 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
v¨s
 = 
fD©aSëInfo
.
	`GëV¨übÀInfos
();

162 
°d
::
ve˘‹
<
V¨übÀInfo
>& 
èrs
 = 
fD©aSëInfo
.
	`GëT¨gëInfos
();

164 
UI¡_t
 
√vts
 = 
evíts
.
	`size
();

166 
TVe˘‹D
 
	`x2
–
nv¨s
+
¡gts
 ); 
x2
 *= 0;

167 
TVe˘‹D
 
	`x0
–
nv¨s
+
¡gts
 ); 
x0
 *= 0;

168 
TVe˘‹D
 
	`v0
–
nv¨s
+
¡gts
 ); 
v0
 *= 0;

170 
DoubÀ_t
 
sumOfWeights
 = 0;

171 
UI¡_t
 
õvt
=0; ievt<
√vts
; ievt++) {

172 c⁄° 
Evít
* 
ev
 = 
evíts
[
õvt
];

174 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

175 
sumOfWeights
 +
weight
;

176 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

177 
DoubÀ_t
 
x
 = 
ev
->
	`GëVÆue
(
iv¨
);

178 i‡(
õvt
==0) {

179 
v¨s
[
iv¨
].
	`SëMö
(
x
);

180 
v¨s
[
iv¨
].
	`SëMax
(
x
);

183 
	`Upd©eN‹m
(
iv¨
, 
x
 );

185 
	`x0
(
iv¨
Ë+
x
*
weight
;

186 
	`x2
(
iv¨
Ë+
x
*x*
weight
;

188 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++) {

189 
DoubÀ_t
 
x
 = 
ev
->
	`GëT¨gë
(
ôgt
);

190 i‡(
õvt
==0) {

191 
èrs
[
ôgt
].
	`SëMö
(
x
);

192 
èrs
[
ôgt
].
	`SëMax
(
x
);

195 
	`Upd©eN‹m
–
nv¨s
+
ôgt
, 
x
 );

197 
	`x0
(
nv¨s
+
ôgt
Ë+
x
*
weight
;

198 
	`x2
(
nv¨s
+
ôgt
Ë+
x
*x*
weight
;

202 i‡(
sumOfWeights
 <= 0) {

203 
	`Log
(Ë<< 
kFATAL
 << "Åhe sum ofÉvent weights calculated for your input is == 0"

204 << " o∏exa˘ly: " << 
sumOfWeights
 << "Åhîêi†obviou¶y somê¥obÀm..."<< 
Endl
;

208 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

209 
DoubÀ_t
 
món
 = 
	`x0
(
iv¨
)/
sumOfWeights
;

211 
v¨s
[
iv¨
].
	`SëMón
–
món
 );

212 i‡(
	`x2
(
iv¨
)/
sumOfWeights
 - 
món
*mean < 0) {

213 
	`Log
(Ë<< 
kFATAL
 << "ÅhêRMS o‡you∏öpuàv¨übÀ " << 
iv¨


214 << "ÉvÆu©e†tÿ™ imagö¨yÇumbî: sqπ("<< 
	`x2
(
iv¨
)/
sumOfWeights
 - 
món
*mean

216 << 
Endl
;

218 
v¨s
[
iv¨
].
	`SëRMS
–
TM©h
::
	`Sqπ
–
	`x2
(iv¨)/
sumOfWeights
 - 
món
*mean) );

220 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++) {

221 
DoubÀ_t
 
món
 = 
	`x0
(
nv¨s
+
ôgt
)/
sumOfWeights
;

222 
èrs
[
ôgt
].
	`SëMón
–
món
 );

223 i‡(
	`x2
(
nv¨s
+
ôgt
)/
sumOfWeights
 - 
món
*mean < 0) {

224 
	`Log
(Ë<< 
kFATAL
 << "ÅhêRMS o‡you∏èrgë v¨übÀ " << 
ôgt


225 << "ÉvÆu©e†tÿ™ imagö¨yÇumbî: sqπ(" << 
	`x2
(
nv¨s
+
ôgt
)/
sumOfWeights
 - 
món
*mean

227 << 
Endl
;

229 
èrs
[
ôgt
].
	`SëRMS
–
TM©h
::
	`Sqπ
–
	`x2
(
nv¨s
+ôgt)/
sumOfWeights
 - 
món
*mean) );

233 
UI¡_t
 
õvt
=0; ievt<
√vts
; ievt++) {

234 c⁄° 
Evít
* 
ev
 = 
evíts
[
õvt
];

235 
DoubÀ_t
 
weight
 = 
ev
->
	`GëWeight
();

237 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

238 
DoubÀ_t
 
x
 = 
ev
->
	`GëVÆue
(
iv¨
);

239 
DoubÀ_t
 
món
 = 
v¨s
[
iv¨
].
	`GëMón
();

240 
	`v0
(
iv¨
Ë+
weight
*(
x
-
món
)*(x-mean);

243 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++) {

244 
DoubÀ_t
 
x
 = 
ev
->
	`GëT¨gë
(
ôgt
);

245 
DoubÀ_t
 
món
 = 
èrs
[
ôgt
].
	`GëMón
();

246 
	`v0
(
nv¨s
+
ôgt
Ë+
weight
*(
x
-
món
)*(x-mean);

250 
I¡_t
 
maxL
 = 
fD©aSëInfo
.
	`GëV¨übÀNameMaxLígth
();

251 
maxL
 = maxL + 8;

252 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

253 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
) << "Variables";

254 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(10Ë<< "V¨ün˚" << 
Endl
;

255 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

258 
	`Log
(Ë<< 
°d
::
	`£çªcisi⁄
(5);

259 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++) {

260 
DoubÀ_t
 
v¨ün˚
 = 
	`v0
(
iv¨
)/
sumOfWeights
;

261 
v¨s
[
iv¨
].
	`SëV¨ün˚
–
v¨ün˚
 );

262 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
v¨s
[
iv¨
].
	`GëEx¥essi⁄
();

263 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
v¨ün˚
 << 
Endl
;

266 
maxL
 = 
fD©aSëInfo
.
	`GëT¨gëNameMaxLígth
();

267 
maxL
 = maxL + 8;

268 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

269 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
) << "Targets";

270 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(10Ë<< "V¨ün˚" << 
Endl
;

271 
	`Log
(Ë<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

273 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++) {

274 
DoubÀ_t
 
v¨ün˚
 = 
	`v0
(
nv¨s
+
ôgt
)/
sumOfWeights
;

275 
èrs
[
ôgt
].
	`SëV¨ün˚
–
v¨ün˚
 );

276 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
èrs
[
ôgt
].
	`GëEx¥essi⁄
();

277 
	`Log
(Ë<< 
kINFO
 << 
°d
::
	`£tiosÊags
(°d::
ios
::
À·
Ë<< std::
	`£tw
(
maxL
Ë<< 
v¨ün˚
 << 
Endl
;

280 
	`Log
(Ë<< 
kINFO
 << "Së möN‹m/maxN‹m f‹ v¨übÀ†to: " << 
Endl
;

281 
	`Log
(Ë<< 
°d
::
	`£çªcisi⁄
(3);

282 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++)

283 
	`Log
(Ë<< " " << 
v¨s
[
iv¨
].
	`GëEx¥essi⁄
()

284 << "\t: [" << 
v¨s
[
iv¨
].
	`GëMö
(Ë<< "\t, " << v¨s[iv¨].
	`GëMax
(Ë<< "\t] " << 
Endl
;

285 
	`Log
(Ë<< 
kINFO
 << "Së möN‹m/maxN‹m f‹Å¨gë†to: " << 
Endl
;

286 
	`Log
(Ë<< 
°d
::
	`£çªcisi⁄
(3);

287 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++)

288 
	`Log
(Ë<< " " << 
èrs
[
ôgt
].
	`GëEx¥essi⁄
()

289 << "\t: [" << 
èrs
[
ôgt
].
	`GëMö
(Ë<< "\t, " <<Å¨s[ôgt].
	`GëMax
(Ë<< "\t] " << 
Endl
;

290 
	`Log
(Ë<< 
°d
::
	`£çªcisi⁄
(5);

291 
	}
}

294 
	gTMVA
::
V¨Tønsf‹mH™dÀr
::
	$C›yD©aLﬂdî
(
TMVA
::
D©aLﬂdî
* 
des
, TMVA::D©aLﬂdî* 
§c
)

296  
°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
åìöfo
=
§c
->
	`D©aI≈ut
().
	`Sbegö
();åìöfo!=§c->D©aI≈ut().
	`Síd
();treeinfo++)

298 
des
->
	`AddSig«lTªe
–(*
åìöfo
).
	`GëTªe
(), (*åìöfo).
	`GëWeight
(),(*åìöfo).
	`GëTªeTy≥
());

301  
°d
::
ve˘‹
<
TªeInfo
>::
c⁄°_ôî©‹
 
åìöfo
=
§c
->
	`D©aI≈ut
().
	`Bbegö
();åìöfo!=§c->D©aI≈ut().
	`Bíd
();treeinfo++)

303 
des
->
	`AddBackgroundTªe
–(*
åìöfo
).
	`GëTªe
(), (*åìöfo).
	`GëWeight
(),(*åìöfo).
	`GëTªeTy≥
());

305 
	}
}

	@src/VariableDecorrTransform.cxx

34 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

36 
	~"TMVA/D©aSë.h
"

37 
	~"TMVA/Evít.h
"

38 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/Toﬁs.h
"

40 
	~"TMVA/Ty≥s.h
"

41 
	~"TMVA/V¨übÀInfo.h
"

43 
	~"TVe˘‹F.h
"

44 
	~"TVe˘‹D.h
"

45 
	~"TM©rixD.h
"

46 
	~"TM©rixDBa£.h
"

48 
	~<io°ªam
>

49 
	~<iom™ù
>

50 
	~<Æg‹ôhm
>

52 
CœssImp
(
TMVA
::
V¨übÀDec‹rTønsf‹m
);

57 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$V¨übÀDec‹rTønsf‹m
–
D©aSëInfo
& 
dsi
 )

58 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kDec‹ªœãd
, "Deco" )

60 
	}
}

65 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::~
	$V¨übÀDec‹rTønsf‹m
()

67 
°d
::
ve˘‹
<
TM©rixD
*>::
ôî©‹
 
ô
 = 
fDec‹rM©ri˚s
.
	`begö
(); ià!fDec‹rM©ri˚s.
	`íd
(); it++) {

68 i‡((*
ô
Ë!0Ë
	`dñëe
 (*it);

70 
	}
}

75 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$Inôülize
()

77 
	}
}

82 
Boﬁ_t
 
TMVA
::
V¨übÀDec‹rTønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
)

84 
Inôülize
();

86 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
	gkTRUE
;

88 
Log
(Ë<< 
	gkINFO
 << "Pª∑rögÅhêDec‹ªœti⁄Åønsf‹m©i⁄..." << 
	gEndl
;

90 
I¡_t
 
	göputSize
 = 
fGë
.
size
();

91 
SëNV¨übÀs
(
öputSize
);

93 i‡(
	göputSize
 > 200) {

94 
Log
(Ë<< 
	gkINFO
 << "----------------------------------------------------------------------------"

95 << 
	gEndl
;

96 
Log
(Ë<< 
	gkINFO


98 << "!" << 
	gEndl
;

99 
Log
(Ë<< 
	gkINFO
 << "----------------------------------------------------------------------------"

100 << 
	gEndl
;

101  
	gkFALSE
;

104 
CÆcSQRM©s
–
evíts
, 
GëNCœs£s
() );

106 
SëCª©ed
–
kTRUE
 );

108  
	gkTRUE
;

114 
	g°d
::
ve˘‹
<
TSåög
>* 
TMVA
::
V¨übÀDec‹rTønsf‹m
::
	$GëTønsf‹m©i⁄Såögs
–
I¡_t
 
˛s
 ) const

116 
I¡_t
 
whichM©rix
 = 
˛s
;

120 i‡(
˛s
 < 0 || cl†> 
	`GëNCœs£s
()Ë
whichM©rix
 = GetNClasses();

122 
TM©rixD
* 
m
 = 
fDec‹rM©ri˚s
.
	`©
(
whichM©rix
);

123 i‡(
m
 == 0) {

124 i‡(
whichM©rix
 =
	`GëNCœs£s
() )

125 
	`Log
(Ë<< 
kFATAL
 << "Transformation matrixáll classes isÇot defined"

126 << 
Endl
;

128 
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ m©rix f‹ cœs†" << 
whichM©rix
 << " isÇot defined"

129 << 
Endl
;

132 c⁄° 
I¡_t
 
nv¨
 = 
fGë
.
	`size
();

133 
°d
::
ve˘‹
<
TSåög
>* 
°rVec
 = 
√w
 std::vector<TString>;

136 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

137 
TSåög
 
	`°r
( "" );

138 
I¡_t
 
jv¨
=0; jv¨<
nv¨
; jvar++) {

139 
°r
 +((*
m
)(
iv¨
,
jv¨
) > 0) ? " + " : " - ";

141 
Ch¨_t
 
ty≥
 = 
fGë
.
	`©
(
jv¨
).
fú°
;

142 
I¡_t
 
idx
 = 
fGë
.
	`©
(
jv¨
).
£c⁄d
;

144  
ty≥
 ) {

146 
°r
 +
	`F‹m
–"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¨
,
jv¨
)), 
	`V¨übÀs
()[
idx
].
	`GëLabñ
().
	`D©a
() );

149 
°r
 +
	`F‹m
–"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¨
,
jv¨
)), 
	`T¨gës
()[
idx
].
	`GëLabñ
().
	`D©a
() );

152 
°r
 +
	`F‹m
–"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¨
,
jv¨
)), 
	`S≥˘©‹s
()[
idx
].
	`GëLabñ
().
	`D©a
() );

155 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀDec‹rTønsf‹m::GëTønsf‹m©i⁄Såög†: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

158 
°rVec
->
	`push_back
–
°r
 );

161  
°rVec
;

162 
	}
}

167 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀDec‹rTønsf‹m
::
	$Tønsf‹m
–c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

169 i‡(!
	`IsCª©ed
())

170 
	`Log
(Ë<< 
kFATAL
 << "Transformation matrixÇot yet created"

171 << 
Endl
;

173 
I¡_t
 
whichM©rix
 = 
˛s
;

176 i‡(
˛s
 < 0 || cl†>(Ë
fDec‹rM©ri˚s
.
	`size
()Ë
whichM©rix
 = fDecorrMatrices.size()-1;

183 
TM©rixD
* 
m
 = 
fDec‹rM©ri˚s
.
	`©
(
whichM©rix
);

184 i‡(
m
 == 0) {

185 i‡(
whichM©rix
 =
	`GëNCœs£s
() )

186 
	`Log
(Ë<< 
kFATAL
 << "Transformation matrixáll classes isÇot defined"

187 << 
Endl
;

189 
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ m©rix f‹ cœs†" << 
whichM©rix
 << " isÇot defined"

190 << 
Endl
;

193 i‡(
fTønsf‹medEvít
==0 || fTønsf‹medEvít->
	`GëNV¨übÀs
()!=
ev
->GetNVariables()) {

194 i‡(
fTønsf‹medEvít
!=0Ë{ 
dñëe
 fTransformedEvent; fTransformedEvent = 0; }

195 
fTønsf‹medEvít
 = 
√w
 
	`Evít
();

199 c⁄° 
I¡_t
 
nv¨
 = 
fGë
.
	`size
();

201 
°d
::
ve˘‹
<
Flﬂt_t
> 
öput
;

202 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

203 
Boﬁ_t
 
hasMaskedE¡rõs
 = 
	`GëI≈ut
–
ev
, 
öput
, 
mask
 );

205 if–
hasMaskedE¡rõs
 ){

206 
UI¡_t
 
numMasked
 = 
°d
::
	`cou¡
(
mask
.
	`begö
(), mask.
	`íd
(), (
Ch¨_t
)
kTRUE
);

207 
UI¡_t
 
numOK
 = 
°d
::
	`cou¡
(
mask
.
	`begö
(), mask.
	`íd
(), (
Ch¨_t
)
kFALSE
);

208 if–
numMasked
>0 && 
numOK
>0 ){

209 
	`Log
(Ë<< 
kFATAL
 << "You mixed v¨übÀ†™dÅ¨gë†öÅhêdec‹ªœti⁄Åønsf‹m©i⁄. Thi†i†nŸÖossibÀ." << 
Endl
;

211 
	`SëOuçut
–
fTønsf‹medEvít
, 
öput
, 
mask
, 
ev
 );

212  
fTønsf‹medEvít
;

215 
TVe˘‹D
 
	`vec
–
nv¨
 );

216 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë
	`vec
(iv¨Ë
öput
.
	`©
(ivar);

219 
vec
 **
m
;

221 
öput
.
	`˛ór
();

222 
I¡_t
 
iv¨
=0; iv¨<
nv¨
; iv¨++Ë
öput
.
	`push_back
–
	`vec
(ivar) );

224 
	`SëOuçut
–
fTønsf‹medEvít
, 
öput
, 
mask
, 
ev
 );

226  
fTønsf‹medEvít
;

227 
	}
}

233 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀDec‹rTønsf‹m
::
	$Invî£Tønsf‹m
–c⁄° 
TMVA
::
Evít
* c⁄° , 
I¡_t
 ) const

235 
	`Log
(Ë<< 
kFATAL
 << "Invî£Åønsf‹m©i⁄ f‹ dec‹ªœti⁄Åønsf‹m©i⁄ÇŸ yë im∂emíãd. Hí˚,Åhi†å™sf‹m©i⁄ c™nŸ bê≠∂õdÅogëhî wôhÑegªssi⁄ i‡èrgë†should bêå™sf‹med. PÀa£ c⁄è˘Åhêauth‹†i‡√˚sßry." << 
Endl
;

238  
fBackTønsf‹medEvít
;

239 
	}
}

244 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
CÆcSQRM©s
–c⁄° 
°d
::
ve˘‹
< 
Evít
*>& 
evíts
, 
I¡_t
 
maxCls
 )

247 
	g°d
::
ve˘‹
<
TM©rixD
*>::
ôî©‹
 
ô
 = 
fDec‹rM©ri˚s
.
begö
();

248 
	gô
 !
fDec‹rM©ri˚s
.
íd
(); it++)

249 i‡(0 !(*
ô
ËË{ 
dñëe
 (*ô); *
	gô
=0; }

253 c⁄° 
UI¡_t
 
	gm©Num
 = (
maxCls
<=1)?maxCls:maxCls+1;

254 
	gfDec‹rM©ri˚s
.
ªsize
–
m©Num
, (
TM©rixD
*) 0 );

256 
	g°d
::
ve˘‹
<
TM©rixDSym
*>* 
covM©
 = 
gToﬁs
().
CÆcCov¨ün˚M©ri˚s
–
evíts
, 
maxCls
, 
this
 );

259 
UI¡_t
 
	g˛s
=0; cls<
	gm©Num
; cls++) {

260 
TM©rixD
* 
	gsqrM©
 = 
gToﬁs
().
GëSQRoŸM©rix
–
covM©
->
©
(
˛s
) );

261 i‡–
	gsqrM©
==0 )

262 
Log
(Ë<< 
kFATAL
 << "<GëSQRM©s> Zîÿpoöã∏ªtu∫ed f‹ SQR m©rix" << 
Endl
;

263 
	gfDec‹rM©ri˚s
[
˛s
] = 
sqrM©
;

264 
dñëe
 (*
covM©
)[
˛s
];

266 
dñëe
 
	gcovM©
;

272 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$WrôeTønsf‹m©i⁄ToSåóm
–
°d
::
o°ªam
& 
o
 ) const

274 
I¡_t
 
˛s
 = 0;

275 
I¡_t
 
dp
 = 
o
.
	`¥ecisi⁄
();

276 
°d
::
ve˘‹
<
TM©rixD
*>::
c⁄°_ôî©‹
 
ôm
 = 
fDec‹rM©ri˚s
.
	`begö
(); itm !fDec‹rM©ri˚s.
	`íd
(); itm++) {

277 
o
 << "# c‹ªœti⁄ m©rix " << 
°d
::
ídl
;

278 
TM©rixD
* 
m©
 = (*
ôm
);

279 
o
 << 
˛s
 << " " << 
m©
->
	`GëNrows
(Ë<< " x " << m©->
	`GëNcﬁs
(Ë<< 
°d
::
ídl
;

280 
I¡_t
 
row
 = 0;Ñow<
m©
->
	`GëNrows
();Ñow++) {

281 
I¡_t
 
cﬁ
 = 0; cﬁ<
m©
->
	`GëNcﬁs
(); col++) {

282 
o
 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< (*
m©
)[
row
][
cﬁ
] << " ";

284 
o
 << 
°d
::
ídl
;

286 
˛s
++;

288 
o
 << "##" << 
°d
::
ídl
;

289 
o
 << 
°d
::
	`£çªcisi⁄
(
dp
);

290 
	}
}

295 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$AâachXMLTo
(* 
∑ª¡
)

297 * 
åf
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transform");

298 
	`gToﬁs
().
	`AddAâr
(
åf
,"Name", "Decorrelation");

300 
V¨übÀTønsf‹mBa£
::
	`AâachXMLTo
–
åf
 );

302 
°d
::
ve˘‹
<
TM©rixD
*>::
c⁄°_ôî©‹
 
ôm
 = 
fDec‹rM©ri˚s
.
	`begö
(); itm !fDec‹rM©ri˚s.
	`íd
(); itm++) {

303 
TM©rixD
* 
m©
 = (*
ôm
);

315 
	`gToﬁs
().
	`WrôeTM©rixDToXML
(
åf
,"M©rix",
m©
);

317 
	}
}

322 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$RódFromXML
–* 
å‚ode
 )

325  
°d
::
ve˘‹
<
TM©rixD
*>::
ôî©‹
 
ô
 = 
fDec‹rM©ri˚s
.
	`begö
(); ià!fDec‹rM©ri˚s.
	`íd
(); it++ )

326 if–(*
ô
Ë!0 ) 
	`dñëe
 (*it);

327 
fDec‹rM©ri˚s
.
	`˛ór
();

329 
Boﬁ_t
 
√wF‹m©
 = 
kFALSE
;

331 * 
ö≤ode
 = 
NULL
;

333 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
, "Selection");

334 if–
ö≤ode
!=
NULL
 )

335 
√wF‹m©
 = 
kTRUE
;

337 * 
ch
 = 
NULL
;

338 if–
√wF‹m©
 ){

341 
V¨übÀTønsf‹mBa£
::
	`RódFromXML
–
ö≤ode
 );

343 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(
ö≤ode
);

345 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
);

348 
ch
!=0) {

349 
I¡_t
 
ƒows
, 
ncﬁs
;

350 
	`gToﬁs
().
	`RódAâr
(
ch
, "Rows", 
ƒows
);

351 
	`gToﬁs
().
	`RódAâr
(
ch
, "Cﬁumns", 
ncﬁs
);

352 
TM©rixD
* 
m©
 = 
√w
 
	`TM©rixD
(
ƒows
,
ncﬁs
);

353 c⁄° * 
c⁄ã¡
 = 
	`gToﬁs
().
	`GëC⁄ã¡
(
ch
);

354 
°d
::
°rög°ªam
 
	`s
(
c⁄ã¡
);

355 
I¡_t
 
row
 = 0;Ñow<
ƒows
;Ñow++) {

356 
I¡_t
 
cﬁ
 = 0; cﬁ<
ncﬁs
; col++) {

357 
s
 >> (*
m©
)[
row
][
cﬁ
];

360 
fDec‹rM©ri˚s
.
	`push_back
(
m©
);

361 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

363 
	`SëCª©ed
();

364 
	}
}

369 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$RódTønsf‹m©i⁄FromSåóm
–
°d
::
i°ªam
& 
i°r
, c⁄° 
TSåög
& 
˛as¢ame
 )

371 
buf
[512];

372 
i°r
.
	`gëlöe
(
buf
,512);

373 
TSåög
 
°rv¨
, 
dummy
;

374 
I¡_t
 
	`ƒows
(0), 
	`ncﬁs
(0);

375 
UI¡_t
 
˛assIdx
=0;

376 !(
buf
[0]=='#'&& buf[1]=='#')) {

377 * 
p
 = 
buf
;

378 *
p
==' ' || *p=='\t')Ö++;

379 i‡(*
p
=='#' || *p=='\0') {

380 
i°r
.
	`gëlöe
(
buf
,512);

383 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

385 
s°r
 >> 
°rv¨
;

386 i‡(
°rv¨
=="signal" || strvar=="background") {

387 
UI¡_t
 
˛s
=0;

388 if(
°rv¨
=="background"Ë
˛s
=1;

389 if(
°rv¨
==
˛as¢ame
Ë
˛assIdx
 = 
˛s
;

391 
s°r
 >> 
ƒows
 >> 
dummy
 >> 
ncﬁs
;

392 i‡(
fDec‹rM©ri˚s
.
	`size
(Ë<
˛s
 ) fDec‹rM©ri˚s.
	`ªsize
(cls+1);

393 i‡(
fDec‹rM©ri˚s
.
	`©
(
˛s
Ë!0Ë
dñëe
 fDecorrMatrices.at(cls);

394 
TM©rixD
* 
m©
 = 
fDec‹rM©ri˚s
.
	`©
(
˛s
Ë
√w
 
	`TM©rixD
(
ƒows
,
ncﬁs
);

396 
I¡_t
 
row
 = 0;Ñow<
m©
->
	`GëNrows
();Ñow++) {

397 
I¡_t
 
cﬁ
 = 0; cﬁ<
m©
->
	`GëNcﬁs
(); col++) {

398 
i°r
 >> (*
m©
)[
row
][
cﬁ
];

402 
i°r
.
	`gëlöe
(
buf
,512);

405 
fDec‹rM©ri˚s
.
	`push_back
–
√w
 
	`TM©rixD
(*fDec‹rM©ri˚s[
˛assIdx
]) );

407 
	`SëCª©ed
();

408 
	}
}

413 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$PrötTønsf‹m©i⁄
–
°d
::
o°ªam
& )

415 
I¡_t
 
˛s
 = 0;

416 
°d
::
ve˘‹
<
TM©rixD
*>::
ôî©‹
 
ôm
 = 
fDec‹rM©ri˚s
.
	`begö
(); itm !fDec‹rM©ri˚s.
	`íd
(); itm++) {

417 
	`Log
(Ë<< 
kINFO
 << "Tønsf‹m©i⁄ m©rix "<< 
˛s
 <<":" << 
Endl
;

418 (*
ôm
)->
	`Pröt
();

420 
	}
}

425 
	gTMVA
::
V¨übÀDec‹rTønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
f˙cName
, 
I¡_t
 
∑π
, 
UI¡_t
 
åCou¡î
, Int_t )

427 
I¡_t
 
dp
 = 
fout
.
	`¥ecisi⁄
();

429 
UI¡_t
 
numC
 = 
fDec‹rM©ri˚s
.
	`size
();

431 i‡(
∑π
==1) {

432 
TM©rixD
* 
m©
 = 
fDec‹rM©ri˚s
.
	`©
(0);

433 
fout
 << 
°d
::
ídl
;

434 
fout
 << " doubÀ fDecTF_"<<
åCou¡î
<<"["<<
numC
<<"]["<<
m©
->
	`GëNrows
()<<"]["<<m©->
	`GëNcﬁs
()<<"];" << 
°d
::
ídl
;

437 i‡(
∑π
==2) {

438 
fout
 << 
°d
::
ídl
;

439 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

440 
fout
 << "ölöêvoid " << 
f˙cName
 << "::InôTønsf‹m_"<<
åCou¡î
<<"()" << 
°d
::
ídl
;

441 
fout
 << "{" << 
°d
::
ídl
;

442 
fout
 << " // Dec‹ªœti⁄Åønsf‹m©i⁄, inôülißti⁄" << 
°d
::
ídl
;

443 
UI¡_t
 
i˛s
 = 0; i˛†< 
numC
; icls++){

444 
TM©rixD
* 
m©x
 = 
fDec‹rM©ri˚s
.
	`©
(
i˛s
);

445 
i
=0; i<
m©x
->
	`GëNrows
(); i++) {

446 
j
=0; j<
m©x
->
	`GëNcﬁs
(); j++) {

447 
fout
 << " fDecTF_"<<
åCou¡î
<<"["<<
i˛s
<<"]["<<
i
<<"]["<<
j
<<"] = " << 
°d
::
	`£çªcisi⁄
(12Ë<< (*
m©x
)[i][j] << ";" << std::
ídl
;

451 
fout
 << "}" << 
°d
::
ídl
;

452 
fout
 << 
°d
::
ídl
;

453 
TM©rixD
* 
m©x
 = 
fDec‹rM©ri˚s
.
	`©
(0);

454 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

455 
fout
 << "ölöêvoid " << 
f˙cName
 << "::Tønsf‹m_"<<
åCou¡î
<<"–°d::ve˘‹<doubÀ>& iv, i¡ clsËc⁄°" << 
°d
::
ídl
;

456 
fout
 << "{" << 
°d
::
ídl
;

457 
fout
 << " // Dec‹ªœti⁄Åønsf‹m©i⁄" << 
°d
::
ídl
;

458 
fout
 << " i‡(˛†< 0 || cl†> "<<
	`GëNCœs£s
()<<"Ë{"<< 
°d
::
ídl
;

459 
fout
 << " i‡("<<
	`GëNCœs£s
()<<" > 1 ) cl†"<<GëNCœs£s()<<";"<< 
°d
::
ídl
;

460 
fout
 << "Él£ cl†"<<(
fDec‹rM©ri˚s
.
	`size
()==1?0:2)<<";"<< 
°d
::
ídl
;

461 
fout
 << " }"<< 
°d
::
ídl
;

463 
V¨übÀTønsf‹mBa£
::
	`MakeFun˘i⁄
(
fout
, 
f˙cName
, 0, 
åCou¡î
, 0 );

465 
fout
 << " std::ve˘‹<doubÀ>Åv;" << 
°d
::
ídl
;

466 
fout
 << " f‹ (öài=0; i<"<<
m©x
->
	`GëNrows
()<<";i++Ë{" << 
°d
::
ídl
;

467 
fout
 << " doubÀ v = 0;" << 
°d
::
ídl
;

468 
fout
 << " f‹ (öàj=0; j<"<<
m©x
->
	`GëNcﬁs
()<<"; j++)" << 
°d
::
ídl
;

469 
fout
 << " v +iv[ödi˚sGë.©(j)] * fDecTF_"<<
åCou¡î
<<"[˛s][i][j];" << 
°d
::
ídl
;

470 
fout
 << "Åv.push_back(v);" << 
°d
::
ídl
;

471 
fout
 << " }" << 
°d
::
ídl
;

472 
fout
 << " f‹ (öài=0; i<"<<
m©x
->
	`GëNrows
()<<";i++Ëiv[ödi˚sPut.©(i)] =Åv[i];" << 
°d
::
ídl
;

473 
fout
 << "}" << 
°d
::
ídl
;

476 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

477 
	}
}

	@src/VariableGaussTransform.cxx

35 
	~"TMVA/V¨übÀGaussTønsf‹m.h
"

37 
	~"TMVA/D©aSëInfo.h
"

38 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/PDF.h
"

40 
	~"TMVA/Toﬁs.h
"

41 
	~"TMVA/Ty≥s.h
"

42 
	~"TMVA/Vîsi⁄.h
"

44 
	~"TC™vas.h
"

45 
	~"TGøph.h
"

46 
	~"TH1F.h
"

47 
	~"TM©h.h
"

48 
	~"TVe˘‹F.h
"

49 
	~"TVe˘‹D.h
"

51 
	~<ex˚±i⁄
>

52 
	~<io°ªam
>

53 
	~<iom™ù
>

54 
	~<li°
>

55 
	~<limôs
>

56 
	~<°dex˚±
>

58 
CœssImp
(
TMVA
::
V¨übÀGaussTønsf‹m
);

65 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$V¨übÀGaussTønsf‹m
–
D©aSëInfo
& 
dsi
, 
TSåög
 
°rc‹
 )

66 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kGauss
, "Gauss" ),

67 
	`fFœtNŸGauss
(
kFALSE
),

68 
	`fPdfMöSmoŸh
(0),

69 
	`fPdfMaxSmoŸh
(0),

70 
	$fEÀmít•îbö
(0)

72 i‡(
°rc‹
=="Unif‹m"Ë{
fFœtNŸGauss
 = 
kTRUE
;

73 
	`SëName
("Uniform");

75 
	}
}

80 
	gTMVA
::
V¨übÀGaussTønsf‹m
::~
	$V¨übÀGaussTønsf‹m
( )

82 
	`CÀ™UpCumuœtiveAºays
();

83 
	}
}

87 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$Inôülize
()

89 
	}
}

94 
Boﬁ_t
 
TMVA
::
V¨übÀGaussTønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
)

96 
Inôülize
();

98 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
	gkTRUE
;

100 
Log
(Ë<< 
	gkINFO
 << "Pª∑rögÅhêGaussü¿å™sf‹m©i⁄..." << 
	gEndl
;

102 
UI¡_t
 
	göputSize
 = 
fGë
.
size
();

103 
SëNV¨übÀs
(
öputSize
);

105 i‡(
	göputSize
 > 200) {

106 
Log
(Ë<< 
	gkWARNING
 << "----------------------------------------------------------------------------"

107 << 
	gEndl
;

108 
Log
(Ë<< 
	gkWARNING


109 << ": M‹êth™ 200 v¨übÀs, I h›êyou havêíough mem‹y!!!!" << 
	gEndl
;

110 
Log
(Ë<< 
	gkWARNING
 << "----------------------------------------------------------------------------"

111 << 
	gEndl
;

115 
GëCumuœtiveDi°
–
evíts
 );

117 
SëCª©ed
–
kTRUE
 );

119  
	gkTRUE
;

125 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀGaussTønsf‹m
::
	$Tønsf‹m
(c⁄° 
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

127 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

133 i‡(
˛s
 <0 || cl†>(Ë
fCumuœtivePDF
[0].
	`size
()) cls = fCumulativePDF[0].size()-1;

137 
UI¡_t
 
öputSize
 = 
fGë
.
	`size
();

139 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`öput
(0);

140 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`ouçut
(0);

142 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

143 
	`GëI≈ut
–
ev
, 
öput
, 
mask
 );

145 
°d
::
ve˘‹
<
Ch¨_t
>::
ôî©‹
 
ôMask
 = 
mask
.
	`begö
();

149 
DoubÀ_t
 
cumuœ¡
;

151 
UI¡_t
 
iv¨
=0; iv¨<
öputSize
; ivar++) {

153 i‡–(*
ôMask
) ){

154 ++
ôMask
;

158 i‡(0 !
fCumuœtivePDF
[
iv¨
][
˛s
]) {

160 if(
fTMVAVîsi⁄
>
	`TMVA_VERSION
(3,9,7))

161 
cumuœ¡
 = (
fCumuœtivePDF
[
iv¨
][
˛s
])->
	`GëVÆ
(
öput
.
	`©
(ivar));

163 
cumuœ¡
 = 
	`OldCumuœ¡
(
öput
.
	`©
(
iv¨
), 
fCumuœtivePDF
[iv¨][
˛s
]->
	`GëOrigöÆHi°
() );

164 
cumuœ¡
 = 
TM©h
::
	`Mö
(cumulant,1.-10e-10);

165 
cumuœ¡
 = 
TM©h
::
	`Max
(cumulant,0.+10e-10);

167 i‡(
fFœtNŸGauss
)

168 
ouçut
.
	`push_back
–
cumuœ¡
 );

171 
DoubÀ_t
 
maxErfInvArgR™ge
 = 0.99999999;

172 
DoubÀ_t
 
¨g
 = 2.0*
cumuœ¡
 - 1.0;

173 
¨g
 = 
TM©h
::
	`Mö
(+
maxErfInvArgR™ge
,arg);

174 
¨g
 = 
TM©h
::
	`Max
(-
maxErfInvArgR™ge
,arg);

176 
ouçut
.
	`push_back
–1.414213562*
TM©h
::
	`ErfInvî£
(
¨g
) );

181 i‡(
fTønsf‹medEvít
==0 || fTønsf‹medEvít->
	`GëNV¨übÀs
()!=
ev
->GetNVariables()) {

182 i‡(
fTønsf‹medEvít
!=0Ë{ 
dñëe
 fTransformedEvent; fTransformedEvent = 0; }

183 
fTønsf‹medEvít
 = 
√w
 
	`Evít
();

186 
	`SëOuçut
–
fTønsf‹medEvít
, 
ouçut
, 
mask
, 
ev
 );

188  
fTønsf‹medEvít
;

189 
	}
}

194 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀGaussTønsf‹m
::
	$Invî£Tønsf‹m
(c⁄° 
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

196 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

202 i‡(
˛s
 <0 || cl†>(Ë
fCumuœtivePDF
[0].
	`size
()) cls = fCumulativePDF[0].size()-1;

206 
UI¡_t
 
öputSize
 = 
fGë
.
	`size
();

208 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`öput
(0);

209 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`ouçut
(0);

211 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

212 
	`GëI≈ut
–
ev
, 
öput
, 
mask
, 
kTRUE
 );

214 
°d
::
ve˘‹
<
Ch¨_t
>::
ôî©‹
 
ôMask
 = 
mask
.
	`begö
();

218 
DoubÀ_t
 
övCumuœ¡
;

220 
UI¡_t
 
iv¨
=0; iv¨<
öputSize
; ivar++) {

222 i‡–(*
ôMask
) ){

223 ++
ôMask
;

227 i‡(0 !
fCumuœtivePDF
[
iv¨
][
˛s
]) {

228 
övCumuœ¡
 = 
öput
.
	`©
(
iv¨
);

231 i‡(!
fFœtNŸGauss
)

232 
övCumuœ¡
 = (
TM©h
::
	`Erf
(invCumulant/1.414213562)+1)/2.f;

235 if(
fTMVAVîsi⁄
>
	`TMVA_VERSION
(4,0,0))

236 
övCumuœ¡
 = (
fCumuœtivePDF
[
iv¨
][
˛s
])->
	`GëVÆInvî£
(övCumuœ¡,
kTRUE
);

238 
	`Log
(Ë<< 
kFATAL
 << "Invî£ Unif‹m/Gaus†å™sf‹m©i⁄ÇŸ im∂emíãd f‹ TMVA vîsi⁄†bef‹ê4.1.0" << 
Endl
;

240 
ouçut
.
	`push_back
(
övCumuœ¡
);

244 i‡(
fBackTønsf‹medEvít
==0ËfBackTønsf‹medEvíà
√w
 
	`Evít
–*
ev
 );

246 
	`SëOuçut
–
fBackTønsf‹medEvít
, 
ouçut
, 
mask
, 
ev
, 
kTRUE
 );

248  
fBackTønsf‹medEvít
;

249 
	}
}

254 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
GëCumuœtiveDi°
–c⁄° 
°d
::
ve˘‹
< 
Evít
*>& 
evíts
 )

256 c⁄° 
UI¡_t
 
öputSize
 = 
fGë
.
size
();

260 
UI¡_t
 
	g√vt
 = 
evíts
.
size
();

262 c⁄° 
UI¡_t
 
	gnCœs£s
 = 
GëNCœs£s
();

263 
UI¡_t
 
	gnumDi°
 = 
nCœs£s
+1;

265 i‡(
GëNCœs£s
(Ë=1 ) 
numDi°
 = 
nCœs£s
;

267 
UI¡_t
 **
	gnbös
 = 
√w
 UI¡_t*[
numDi°
];

269 
	g°d
::
li°
< 
TMVA
::
TMVAGaussPaú
 > **
li°sF‹Bönög
 = 
√w
 
°d
::li°<TMVA::TMVAGaussPaú>* [
numDi°
];

270 
	g°d
::
ve˘‹
< 
Flﬂt_t
 > **
vsF‹Bönög
 = 
√w
 
°d
::ve˘‹<Flﬂt_t>* [
numDi°
];

271 
UI¡_t
 
	gi
=0; i < 
	gnumDi°
; i++) {

272 
	gli°sF‹Bönög
[
i
] = 
√w
 
°d
::
li°
<
TMVA
::
TMVAGaussPaú
> [
öputSize
];

273 
	gvsF‹Bönög
[
i
] = 
√w
 
°d
::
ve˘‹
<
Flﬂt_t
> [
öputSize
];

274 
	gnbös
[
i
] = 
√w
 
UI¡_t
[
öputSize
];

277 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
öput
;

278 
	g°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

281 
Flﬂt_t
 *
	gsumOfWeights
 = 
√w
 Flﬂt_t[
numDi°
];

282 
Flﬂt_t
 *
	gmöWeight
 = 
√w
 Flﬂt_t[
numDi°
];

283 
Flﬂt_t
 *
	gmaxWeight
 = 
√w
 Flﬂt_t[
numDi°
];

284 
UI¡_t
 
	gi
=0; i<
	gnumDi°
; i++) {

285 
	gsumOfWeights
[
i
]=0;

286 
	gmöWeight
[
i
]=10E10;

287 
	gmaxWeight
[
i
]=0;

289 
UI¡_t
 
	gõvt
=0; ievà< 
	g√vt
; ievt++) {

290 c⁄° 
Evít
* 
	gev

evíts
[
õvt
];

291 
I¡_t
 
	g˛s
 = 
ev
->
GëCœss
();

292 
Flﬂt_t
 
	gevítWeight
 = 
ev
->
GëWeight
();

293 
	gsumOfWeights
[
˛s
] +
evítWeight
;

294 i‡(
	gmöWeight
[
˛s
] > 
	gevítWeight
ËmöWeight[˛s]=
evítWeight
;

295 i‡(
	gmaxWeight
[
˛s
] < 
	gevítWeight
ËmaxWeight[˛s]=
evítWeight
;

296 i‡(
	gnumDi°
>1Ë
	gsumOfWeights
[
numDi°
-1] +
evítWeight
;

298 
Boﬁ_t
 
	ghasMaskedE¡rõs
 = 
GëI≈ut
–
ev
, 
öput
, 
mask
 );

299 if–
	ghasMaskedE¡rõs
 ){

300 
Log
(Ë<< 
	gkWARNING
 << "Incom∂ëêevít" << 
	gEndl
;

301 
	g°d
::
o°rög°ªam
 
oss
;

302 
	gev
->
Pröt
(
oss
);

303 
Log
(Ë<< 
	goss
.
°r
();

304 
Log
(Ë<< 
	gkFATAL
 << "T¨gë†‹ v¨übÀ†masked byÅønsf‹m©i⁄. Aµ¨íéy (aËvÆue(sËis/¨êmissög i¿thi†evít." << 
	gEndl
;

308 
I¡_t
 
	giv¨
 = 0;

309  
	g°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈ut
 = 
öput
.
begö
(), 
	gôI≈utEnd
 = i≈ut.
íd
(); 
	gôI≈ut
 !
ôI≈utEnd
; ++itInput ) {

310 
Flﬂt_t
 
	gvÆue
 = (*
ôI≈ut
);

311 
	gli°sF‹Bönög
[
˛s
][
iv¨
].
push_back
(
TMVA
::
TMVAGaussPaú
(
vÆue
,
evítWeight
));

312 i‡(
	gnumDi°
>1)
	gli°sF‹Bönög
[
numDi°
-1][
iv¨
].
push_back
(
TMVA
::
TMVAGaussPaú
(
vÆue
,
evítWeight
));

313 ++
	giv¨
;

316 i‡(
	gnumDi°
 > 1) {

317 
UI¡_t
 
	gi˛
=0; i˛<
	gnumDi°
-1; icl++){

318 
	gmöWeight
[
numDi°
-1] = 
TM©h
::
Mö
(
möWeight
[
i˛
],minWeight[numDist-1]);

319 
	gmaxWeight
[
numDi°
-1] = 
TM©h
::
Max
(
maxWeight
[
i˛
],maxWeight[numDist-1]);

324 c⁄° 
UI¡_t
 
	g√vmö
=10;

325 c⁄° 
UI¡_t
 
	gnbösmax
=2000;

327 
UI¡_t
 
	gi˛
=0; i˛< 
	gnumDi°
; icl++){

328 
UI¡_t
 
	giv¨
=0; iv¨<
	göputSize
; ivar++) {

329 
	gli°sF‹Bönög
[
i˛
][
iv¨
].
s‹t
();

330 
	g°d
::
li°
< 
TMVA
::
TMVAGaussPaú
 >::
ôî©‹
 
ô
;

331 
Flﬂt_t
 
	gsumPîBö
 = 
sumOfWeights
[
i˛
]/
nbösmax
;

332 
	gsumPîBö
=
TM©h
::
Max
(
möWeight
[
i˛
]*
√vmö
,
sumPîBö
);

333 
Flﬂt_t
 
	gsum
=0;

334 
Flﬂt_t
 
	gev_vÆue
=
li°sF‹Bönög
[
i˛
][
iv¨
].
begö
()->
GëVÆue
();

335 
Flﬂt_t
 
	gœ°ev_vÆue
=
ev_vÆue
;

336 c⁄° 
Flﬂt_t
 
	gïs
 = 1.e-4;

337 
	gvsF‹Bönög
[
i˛
][
iv¨
].
push_back
(
ev_vÆue
-
ïs
);

338 
	gvsF‹Bönög
[
i˛
][
iv¨
].
push_back
(
ev_vÆue
);

340 
	gô
=
li°sF‹Bönög
[
i˛
][
iv¨
].
begö
(); ià!li°sF‹Bönög[i˛][iv¨].
íd
(); it++){

341 
	gsum
+
ô
->
GëWeight
();

342 i‡(
	gsum
 >
sumPîBö
) {

343 
ev_vÆue
=
ô
->
GëVÆue
();

344 i‡(
	gev_vÆue
>
	gœ°ev_vÆue
) {

345 
	gvsF‹Bönög
[
i˛
][
iv¨
].
push_back
(
ev_vÆue
);

346 
	gsum
 = 0.;

347 
	gœ°ev_vÆue
=
ev_vÆue
;

351 i‡(
	gsum
!=0Ë
vsF‹Bönög
[
i˛
][
iv¨
].
push_back
(
li°sF‹Bönög
[i˛][iv¨].
back
().
GëVÆue
());

352 
	gnbös
[
i˛
][
iv¨
] = 
vsF‹Bönög
[i˛][iv¨].
size
();

356 
	gdñëe
[] 
	gsumOfWeights
;

357 
	gdñëe
[] 
	gmöWeight
;

358 
	gdñëe
[] 
	gmaxWeight
;

361 
	gfCumuœtiveDi°
.
ªsize
(
öputSize
);

362 
UI¡_t
 
	gi˛s
 = 0; i˛†< 
	gnumDi°
; icls++) {

363 
UI¡_t
 
	giv¨
=0; iv¨ < 
	göputSize
; ivar++){

364 
Flﬂt_t
* 
	gbönögs
 = 
√w
 Flﬂt_t[
nbös
[
i˛s
][
iv¨
]];

366 
UI¡_t
 
	gk
 =0 ; k < 
	gnbös
[
i˛s
][
iv¨
]; k++){

367 
	gbönögs
[
k
] = 
vsF‹Bönög
[
i˛s
][
iv¨
][k];

369 
	gfCumuœtiveDi°
[
iv¨
].
ªsize
(
numDi°
);

370 i‡(0 !
fCumuœtiveDi°
[
iv¨
][
i˛s
] ) {

371 
dñëe
 
fCumuœtiveDi°
[
iv¨
][
i˛s
];

373 
	gfCumuœtiveDi°
[
iv¨
][
i˛s
] = 
√w
 
TH1F
(
F‹m
("Cumulative_Var%d_cls%d",ivar,icls),

374 
F‹m
("Cumuœtive_V¨%d_˛s%d",
iv¨
,
i˛s
),

375 
nbös
[
i˛s
][
iv¨
] -1,

376 
bönögs
);

377 
	gfCumuœtiveDi°
[
iv¨
][
i˛s
]->
SëDúe˘‹y
(0);

378 
	gdñëe
 [] 
	gbönögs
;

383 
UI¡_t
 
	gi
=0; i<
	gnumDi°
; i++) {

384 
	gdñëe
 [] 
	gli°sF‹Bönög
[
numDi°
-
i
-1];

385 
	gdñëe
 [] 
	gvsF‹Bönög
[
numDi°
-
i
-1];

386 
	gdñëe
 [] 
	gnbös
[
numDi°
-
i
-1];

388 
	gdñëe
 [] 
	gli°sF‹Bönög
;

389 
	gdñëe
 [] 
	gvsF‹Bönög
;

390 
	gdñëe
 [] 
	gnbös
;

393 
	g°d
::
ve˘‹
<
I¡_t
> 
ic
(
numDi°
);

394 
UI¡_t
 
	gõvt
=0; ievt<
	g√vt
; ievt++) {

396 c⁄° 
Evít
* 
	gev

evíts
[
õvt
];

397 
I¡_t
 
	g˛s
 = 
ev
->
GëCœss
();

398 
Flﬂt_t
 
	gevítWeight
 = 
ev
->
GëWeight
();

400 
GëI≈ut
–
ev
, 
öput
, 
mask
 );

402 
I¡_t
 
	giv¨
 = 0;

403  
	g°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈ut
 = 
öput
.
begö
(), 
	gôI≈utEnd
 = i≈ut.
íd
(); 
	gôI≈ut
 !
ôI≈utEnd
; ++itInput ) {

404 
Flﬂt_t
 
	gvÆue
 = (*
ôI≈ut
);

405 
	gfCumuœtiveDi°
[
iv¨
][
˛s
]->
Fûl
(
vÆue
,
evítWeight
);

406 i‡(
	gnumDi°
>1Ë
	gfCumuœtiveDi°
[
iv¨
][
numDi°
-1]->
Fûl
(
vÆue
,
evítWeight
);

408 ++
	giv¨
;

413 
CÀ™UpCumuœtiveAºays
("PDF");

416 
DoubÀ_t
 
	gsum
 = 0, 
	gtŸÆ
=0;

417 
	gfCumuœtivePDF
.
ªsize
(
öputSize
);

418 
UI¡_t
 
	giv¨
=0; iv¨<
	göputSize
; ivar++) {

420 
UI¡_t
 
	gi˛s
=0; i˛s<
	gnumDi°
; icls++) {

421 (
	gfCumuœtiveDi°
[
iv¨
][
i˛s
])->
SmoŸh
();

422 
	gsum
 = 0;

423 
	gtŸÆ
 = 0.;

424 
I¡_t
 
	gibö
=1, 
	giböEnd
=
fCumuœtiveDi°
[
iv¨
][
i˛s
]->
GëNbösX
(); ibö <=
iböEnd
 ; ibin++){

425 
Flﬂt_t
 
	gvÆ
 = (
fCumuœtiveDi°
[
iv¨
][
i˛s
])->
GëBöC⁄ã¡
(
ibö
);

426 i‡(
	gvÆ
>0Ë
	gtŸÆ
 +
vÆ
;

428 
I¡_t
 
	gibö
=1, 
	giböEnd
=
fCumuœtiveDi°
[
iv¨
][
i˛s
]->
GëNbösX
(); ibö <=
iböEnd
 ; ibin++){

429 
Flﬂt_t
 
	gvÆ
 = (
fCumuœtiveDi°
[
iv¨
][
i˛s
])->
GëBöC⁄ã¡
(
ibö
);

430 i‡(
	gvÆ
>0Ë
	gsum
 +
vÆ
;

431 (
	gfCumuœtiveDi°
[
iv¨
][
i˛s
])->
SëBöC⁄ã¡
(
ibö
,
sum
/
tŸÆ
);

434 
	gfCumuœtivePDF
[
iv¨
].
push_back
(
√w
 
PDF
–
F‹m
("GaussTønsf‹m v¨%d cls%d",iv¨,
i˛s
), 
fCumuœtiveDi°
[iv¨][i˛s], PDF::
kS∂öe1
, 
fPdfMöSmoŸh
, 
fPdfMaxSmoŸh
,
kFALSE
,kFALSE));

441 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$WrôeTønsf‹m©i⁄ToSåóm
–
°d
::
o°ªam
& ) const

443 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀGaussTønsf‹m::WrôeTønsf‹m©i⁄ToSåóm i†obsﬁëe" << 
Endl
;

444 
	}
}

449 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$CÀ™UpCumuœtiveAºays
(
TSåög
 
›t
) {

450 i‡(
›t
 == "ALL" || opt == "PDF"){

451 
UI¡_t
 
iv¨
=0; iv¨<
fCumuœtivePDF
.
	`size
(); ivar++) {

452 
UI¡_t
 
i˛s
=0; i˛s<
fCumuœtivePDF
[
iv¨
].
	`size
(); icls++) {

453 i‡(0 !
fCumuœtivePDF
[
iv¨
][
i˛s
]Ë
dñëe
 fCumulativePDF[ivar][icls];

456 
fCumuœtivePDF
.
	`˛ór
();

458 i‡(
›t
 == "ALL" || opt == "Dist"){

459 
UI¡_t
 
iv¨
=0; iv¨<
fCumuœtiveDi°
.
	`size
(); ivar++) {

460 
UI¡_t
 
i˛s
=0; i˛s<
fCumuœtiveDi°
[
iv¨
].
	`size
(); icls++) {

461 i‡(0 !
fCumuœtiveDi°
[
iv¨
][
i˛s
]Ë
dñëe
 fCumulativeDist[ivar][icls];

464 
fCumuœtiveDi°
.
	`˛ór
();

466 
	}
}

470 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$AâachXMLTo
(* 
∑ª¡
) {

471 * 
åfxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transform");

472 
	`gToﬁs
().
	`AddAâr
(
åfxml
, "Name", "Gauss");

473 
	`gToﬁs
().
	`AddAâr
(
åfxml
, "FœtOrGauss", (
fFœtNŸGauss
?"Flat":"Gauss") );

475 
V¨übÀTønsf‹mBa£
::
	`AâachXMLTo
–
åfxml
 );

477 
UI¡_t
 
nv¨
 = 
fGë
.
	`size
();

478 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

479 * 
v¨xml
 = 
	`gToﬁs
().
	`AddChûd
–
åfxml
, "Variable");

481 
	`gToﬁs
().
	`AddAâr
–
v¨xml
, "V¨Index", 
iv¨
 );

483 i‡–
fCumuœtivePDF
[
iv¨
][0]==0 ||

484 (
fCumuœtivePDF
[
iv¨
].
	`size
()>1 && fCumulativePDF[ivar][1]==0 ))

485 
	`Log
(Ë<< 
kFATAL
 << "Cumuœtivêhi°ogøm†f‹ v¨übÀ " << 
iv¨
 << " d⁄'àexi°, c™'àwrôêôÅÿweighàfûe" << 
Endl
;

487 
UI¡_t
 
i˛s
=0; i˛s<
fCumuœtivePDF
[
iv¨
].
	`size
(); icls++){

488 * 
pdfxml
 = 
	`gToﬁs
().
	`AddChûd
–
v¨xml
, 
	`F‹m
("CumuœtivePDF_˛s%d",
i˛s
));

489 (
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`AddXMLTo
(
pdfxml
);

492 
	}
}

497 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$RódFromXML
–* 
å‚ode
 ) {

499 
	`CÀ™UpCumuœtiveAºays
();

500 
TSåög
 
FœtOrGauss
;

502 
	`gToﬁs
().
	`RódAâr
(
å‚ode
, "FœtOrGauss", 
FœtOrGauss
 );

504 i‡(
FœtOrGauss
 ="Fœt"Ë
fFœtNŸGauss
 = 
kTRUE
;

505 
fFœtNŸGauss
 = 
kFALSE
;

507 
Boﬁ_t
 
√wF‹m©
 = 
kFALSE
;

509 * 
ö≤ode
 = 
NULL
;

511 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
, "Selection");

512 if–
ö≤ode
!=
NULL
 )

513 
√wF‹m©
 = 
kTRUE
;

515 * 
v¨node
 = 
NULL
;

516 if–
√wF‹m©
 ){

519 
V¨übÀTønsf‹mBa£
::
	`RódFromXML
–
ö≤ode
 );

521 
v¨node
 = 
	`gToﬁs
().
	`GëNextChûd
(
ö≤ode
);

523 
v¨node
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
);

527 
TSåög
 
v¨«me
, 
hi°«me
, 
˛as¢ame
;

528 
UI¡_t
 
iv¨
;

529 
v¨node
) {

530 if–
	`gToﬁs
().
	`HasAâr
(
v¨node
,"Name") )

531 
	`gToﬁs
().
	`RódAâr
(
v¨node
, "Name", 
v¨«me
);

532 
	`gToﬁs
().
	`RódAâr
(
v¨node
, "V¨Index", 
iv¨
);

534 * 
˛¢ode
 = 
	`gToﬁs
().
	`GëChûd
–
v¨node
);

536 
˛¢ode
) {

537 * 
pd‚ode
 = 
	`gToﬁs
().
	`GëChûd
–
˛¢ode
);

538 
PDF
* 
pdfToRód
 = 
√w
 
	`PDF
(
	`TSåög
("ãmpName"),
kFALSE
);

539 
pdfToRód
->
	`RódXML
(
pd‚ode
);

541 
fCumuœtivePDF
.
	`ªsize
–
iv¨
+1 );

542 
fCumuœtivePDF
[
iv¨
].
	`push_back
(
pdfToRód
);

543 
˛¢ode
 = 
	`gToﬁs
().
	`GëNextChûd
(clsnode);

546 
v¨node
 = 
	`gToﬁs
().
	`GëNextChûd
(varnode);

548 
	`SëCª©ed
();

549 
	}
}

554 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$RódTønsf‹m©i⁄FromSåóm
–
°d
::
i°ªam
& 
i°r
, c⁄° 
TSåög
& 
˛as¢ame
)

556 
Boﬁ_t
 
addDúSètus
 = 
TH1
::
	`AddDúe˘‹ySètus
();

557 
TH1
::
	`AddDúe˘‹y
(0);

558 
buf
[512];

559 
i°r
.
	`gëlöe
(
buf
,512);

561 
TSåög
 
°rv¨
, 
dummy
;

563 !(
buf
[0]=='#'&& buf[1]=='#')) {

564 * 
p
 = 
buf
;

565 *
p
==' ' || *p=='\t')Ö++;

566 i‡(*
p
=='#' || *p=='\0') {

567 
i°r
.
	`gëlöe
(
buf
,512);

570 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

571 
s°r
 >> 
°rv¨
;

573 i‡(
°rv¨
=="CumulativeHistogram") {

574 
UI¡_t
 
	`ty≥
(0), 
	`iv¨
(0);

575 
TSåög
 
	`devnuŒS
(""),
	`h«me
("");

576 
I¡_t
 
	`nbös
(0);

579 
s°r
 >> 
ty≥
 >> 
iv¨
 >> 
h«me
 >> 
nbös
 >> 
fEÀmít•îbö
;

581 
Flﬂt_t
 *
Bönögs
 = 
√w
 Flﬂt_t[
nbös
+1];

582 
Flﬂt_t
 
vÆ
;

583 
i°r
 >> 
devnuŒS
;

584 
I¡_t
 
ibö
=0; ibö<
nbös
+1; ibin++) {

585 
i°r
 >> 
vÆ
;

586 
Bönögs
[
ibö
]=
vÆ
;

589 if(
iv¨
>=
fCumuœtiveDi°
.
	`size
()ËfCumuœtiveDi°.
	`ªsize
(ivar+1);

590 if(
ty≥
>=
fCumuœtiveDi°
[
iv¨
].
	`size
()ËfCumuœtiveDi°[iv¨].
	`ªsize
(type+1);

592 
TH1F
 * 
hi°ToRód
 = 
fCumuœtiveDi°
[
iv¨
][
ty≥
];

593 i‡–
hi°ToRód
 !=0 ) 
dñëe
 histToRead;

595 
hi°ToRód
 = 
√w
 
	`TH1F
–
h«me
, h«me, 
nbös
, 
Bönögs
 );

596 
hi°ToRód
->
	`SëDúe˘‹y
(0);

597 
fCumuœtiveDi°
[
iv¨
][
ty≥
]=
hi°ToRód
;

599 
i°r
 >> 
devnuŒS
;

600 
I¡_t
 
ibö
=0; ibö<
nbös
; ibin++) {

601 
i°r
 >> 
vÆ
;

602 
hi°ToRód
->
	`SëBöC⁄ã¡
(
ibö
+1,
vÆ
);

605 
PDF
* 
pdf
 = 
√w
 
	`PDF
(
h«me
,
hi°ToRód
,PDF::
kS∂öe0
, 0, 0, 
kFALSE
, kFALSE);

607 
fCumuœtivePDF
.
	`ªsize
(
iv¨
+1);

608 
fCumuœtivePDF
[
iv¨
].
	`ªsize
(
ty≥
+1);

609 
fCumuœtivePDF
[
iv¨
][
ty≥
] = 
pdf
;

610 
dñëe
 [] 
Bönögs
;

614 i‡(
°rv¨
=="Uniform") {

615 
s°r
 >> 
fFœtNŸGauss
;

616 
i°r
.
	`gëlöe
(
buf
,512);

620 
i°r
.
	`gëlöe
(
buf
,512);

622 
TH1
::
	`AddDúe˘‹y
(
addDúSètus
);

624 
UI¡_t
 
˛assIdx
=(
˛as¢ame
=="signal")?0:1;

625 
UI¡_t
 
iv¨
=0; iv¨<
fCumuœtivePDF
.
	`size
(); ++ivar) {

626 
PDF
* 
§c
 = 
fCumuœtivePDF
[
iv¨
][
˛assIdx
];

627 
fCumuœtivePDF
[
iv¨
].
	`push_back
(
√w
 
	`PDF
(
§c
->
	`GëName
(),
fCumuœtiveDi°
[iv¨][
˛assIdx
],
PDF
::
kS∂öe0
, 0, 0, 
kFALSE
, kFALSE) );

630 
	`SëTMVAVîsi⁄
(
	`TMVA_VERSION
(3,9,7));

632 
	`SëCª©ed
();

633 
	}
}

637 
DoubÀ_t
 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$OldCumuœ¡
(
Flﬂt_t
 
x
, 
TH1
* 
h
 ) const {

639 
I¡_t
 
bö
 = 
h
->
	`FödBö
(
x
);

640 
bö
 = 
TM©h
::
	`Max
(bin,1);

641 
bö
 = 
TM©h
::
	`Mö
(bö,
h
->
	`GëNbösX
());

643 
DoubÀ_t
 
cumuœ¡
;

644 
DoubÀ_t
 
x0
, 
x1
, 
y0
, 
y1
;

645 
DoubÀ_t
 
tŸÆ
 = 
h
->
	`GëNbösX
()*
fEÀmít•îbö
;

646 
DoubÀ_t
 
supmö
 = 0.5/
tŸÆ
;

648 
x0
 = 
h
->
	`GëBöLowEdge
(
TM©h
::
	`Max
(
bö
,1));

649 
x1
 = 
h
->
	`GëBöLowEdge
(
TM©h
::
	`Mö
(
bö
,h->
	`GëNbösX
())+1);

651 
y0
 = 
h
->
	`GëBöC⁄ã¡
(
TM©h
::
	`Max
(
bö
-1,0));

652 
y1
 = 
h
->
	`GëBöC⁄ã¡
(
TM©h
::
	`Mö
(
bö
, h->
	`GëNbösX
()+1));

654 i‡(
bö
 == 0) {

655 
y0
 = 
supmö
;

656 
y1
 = 
supmö
;

658 i‡(
bö
 == 1) {

659 
y0
 = 
supmö
;

661 i‡(
bö
 > 
h
->
	`GëNbösX
()) {

662 
y0
 = 1.-
supmö
;

663 
y1
 = 1.-
supmö
;

665 i‡(
bö
 =
h
->
	`GëNbösX
()) {

666 
y1
 = 1.-
supmö
;

669 i‡(
x0
 =
x1
) {

670 
cumuœ¡
 = 
y1
;

672 
cumuœ¡
 = 
y0
 + (
y1
-y0)*(
x
-
x0
)/(
x1
-x0);

675 i‡(
x
 <
h
->
	`GëBöLowEdge
(1)){

676 
cumuœ¡
 = 
supmö
;

678 i‡(
x
 >
h
->
	`GëBöLowEdge
(h->
	`GëNbösX
()+1)){

679 
cumuœ¡
 = 1-
supmö
;

681  
cumuœ¡
;

682 
	}
}

687 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$PrötTønsf‹m©i⁄
–
°d
::
o°ªam
& )

689 
I¡_t
 
˛s
 = 0;

690 
	`Log
(Ë<< 
kINFO
 << "I dÿnŸ know yë howÅÿ¥öàthis...Üook i¿thêweighàfûê" << 
˛s
 << ":" << 
Endl
;

691 
˛s
++;

692 
	}
}

698 
	gTMVA
::
V¨übÀGaussTønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
f˙cName
,

699 
I¡_t
 
∑π
, 
UI¡_t
 
åCou¡î
, Int_t )

701 c⁄° 
UI¡_t
 
nv¨
 = 
fGë
.
	`size
();

702 
UI¡_t
 
numDi°
 = 
	`GëNCœs£s
() + 1;

703 
I¡_t
 
nBös
 = -1;

704 
UI¡_t
 
i˛s
=0; i˛s<
numDi°
; icls++) {

705 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

706 
I¡_t
 
nbö
=(
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`GëGøph
()->
	`GëN
();

707 i‡(
nbö
 > 
nBös
)ÇBins=nbin;

712 i‡(
∑π
==1) {

713 
fout
 << 
°d
::
ídl
;

714 
fout
 << " i¡Çv¨;" << 
°d
::
ídl
;

715 
fout
 << 
°d
::
ídl
;

717 
fout
 << " doubÀ cumuœtiveDi°["<<
nv¨
<<"]["<<
numDi°
<<"]["<<
nBös
+1<<"];"<<
°d
::
ídl
;

718 
fout
 << " doubÀ X["<<
nv¨
<<"]["<<
numDi°
<<"]["<<
nBös
+1<<"];"<<
°d
::
ídl
;

719 
fout
 << " doubÀ xMö["<<
nv¨
<<"]["<<
numDi°
<<"];"<<
°d
::
ídl
;

720 
fout
 << " doubÀ xMax["<<
nv¨
<<"]["<<
numDi°
<<"];"<<
°d
::
ídl
;

721 
fout
 << " i¡Çbös["<<
nv¨
<<"]["<<
numDi°
<<"];"<<
°d
::
ídl
;

723 i‡(
∑π
==2) {

724 
fout
 << 
°d
::
ídl
;

725 
fout
 << "#ö˛udê\"m©h.h\"" << 
°d
::
ídl
;

726 
fout
 << 
°d
::
ídl
;

727 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

728 
fout
 << "ölöêvoid " << 
f˙cName
 << "::InôTønsf‹m_"<<
åCou¡î
<<"()" << 
°d
::
ídl
;

729 
fout
 << "{" << 
°d
::
ídl
;

730 
fout
 << " // Gauss/Unif‹mÅønsf‹m©i⁄, inôülißti⁄" << 
°d
::
ídl
;

731 
fout
 << "Çv¨=" << 
nv¨
 << ";" << 
°d
::
ídl
;

732 
UI¡_t
 
i˛s
=0; i˛s<
numDi°
; icls++) {

733 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

734 
I¡_t
 
nbö
=(
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`GëGøph
()->
	`GëN
();

735 
fout
 << "Çbös["<<
iv¨
<<"]["<<
i˛s
<<"]="<<
nbö
<<";"<<
°d
::
ídl
;

742 
UI¡_t
 
i˛s
=0; i˛s<
numDi°
; icls++) {

743 
UI¡_t
 
iv¨
=0; iv¨<
nv¨
; ivar++) {

745 
åy
{

747 
Ch¨_t
 
ty≥
 = 
fGë
.
	`©
(
iv¨
).
fú°
;

748 if–
ty≥
 != 'v' ){

749 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†f‹ÅhêGaus†å™sf‹m©i⁄ w‹k†⁄ly f‹Åhêå™sf‹m©i⁄ o‡v¨übÀs. Thêå™sf‹m©i⁄ o‡èrgës/•e˘©‹†i†nŸ im∂emíãd." << 
Endl
;

751 }
	`ˇtch
–
°d
::
out_of_ønge
 
ex˚±
 ){

752 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†f‹ÅhêGaus†å™sf‹m©i⁄ sórched f‹áÇ⁄Éxi°ög v¨übÀ index (" << 
iv¨
 << ")" << 
Endl
;

757 
DoubÀ_t
 
xmn
 = (
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`GëGøph
()->
	`GëX
()[0];

758 
DoubÀ_t
 
xmx
 = (
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`GëGøph
()->
	`GëX
()[(fCumuœtivePDF[iv¨][i˛s])->GëGøph()->
	`GëN
()-1];

760 
fout
 << " xMö["<<
iv¨
<<"]["<<
i˛s
<<"]="<< 
	`gToﬁs
().
	`SåögFromDoubÀ
(
xmn
)<<";"<<
°d
::
ídl
;

761 
fout
 << " xMax["<<
iv¨
<<"]["<<
i˛s
<<"]="<<
	`gToﬁs
().
	`SåögFromDoubÀ
(
xmx
)<<";"<<
°d
::
ídl
;

762 
I¡_t
 
ibö
=0; ibö<(
fCumuœtivePDF
[
iv¨
][
i˛s
])->
	`GëGøph
()->
	`GëN
(); ibin++) {

763 
fout
 << " cumuœtiveDi°[" << 
iv¨
 << "]["<< 
i˛s
<< "]["<<
ibö
<<"]="<< 
	`gToﬁs
().
	`SåögFromDoubÀ
((
fCumuœtivePDF
[iv¨][i˛s])->
	`GëGøph
()->
	`GëY
()[ibö])<< ";"<<
°d
::
ídl
;

764 
fout
 << " X[" << 
iv¨
 << "]["<< 
i˛s
<< "]["<<
ibö
<<"]="<< 
	`gToﬁs
().
	`SåögFromDoubÀ
((
fCumuœtivePDF
[iv¨][i˛s])->
	`GëGøph
()->
	`GëX
()[ibö])<< ";"<<
°d
::
ídl
;

769 
fout
 << "}" << 
°d
::
ídl
;

770 
fout
 << 
°d
::
ídl
;

771 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

772 
fout
 << "ölöêvoid " << 
f˙cName
 << "::Tønsf‹m_"<<
åCou¡î
<<"–°d::ve˘‹<doubÀ>& iv, i¡ clsInËc⁄°" << 
°d
::
ídl
;

773 
fout
 << "{" << 
°d
::
ídl
;

774 
fout
 << " // Gauss/Unif‹mÅønsf‹m©i⁄" << 
°d
::
ídl
;

775 
fout
 << " i¡ cls=˛sIn;" << 
°d
::
ídl
;

776 
fout
 << " i‡(˛†< 0 || cl†> "<<
	`GëNCœs£s
()<<"Ë{"<< 
°d
::
ídl
;

777 
fout
 << " i‡("<<
	`GëNCœs£s
()<<" > 1 ) cl†"<<GëNCœs£s()<<";"<< 
°d
::
ídl
;

778 
fout
 << "Él£ cl†"<<(
fCumuœtivePDF
[0].
	`size
()==1?0:2)<<";"<< 
°d
::
ídl
;

779 
fout
 << " }"<< 
°d
::
ídl
;

781 
fout
 << " // c›yÅhêv¨übÀ†whicháª goögÅÿbêå™sf‹med "<< 
°d
::
ídl
;

782 
V¨übÀTønsf‹mBa£
::
	`MakeFun˘i⁄
(
fout
, 
f˙cName
, 0, 
åCou¡î
, 0 );

783 
fout
 << " sèti¯°d::ve˘‹<doubÀ> dv; "<< 
°d
::
ídl
;

784 
fout
 << " dv.ªsize“v¨); "<< 
°d
::
ídl
;

785 
fout
 << " f‹ (öàiv¨=0; iv¨<nv¨; iv¨++Ëdv[iv¨] = iv[ödi˚sGë.©(iv¨)]; "<< 
°d
::
ídl
;

786 
fout
 << " "<< 
°d
::
ídl
;

787 
fout
 << " boﬁ FœtNŸGaus†"<< (
fFœtNŸGauss
? "åue": "Ál£"Ë<<"; "<< 
°d
::
ídl
;

788 
fout
 << " doubÀ cumuœ¡; "<< 
°d
::
ídl
;

789 
fout
 << " //c⁄° i¡Çv¨ = "<<
nv¨
<<"; "<< 
°d
::
ídl
;

790 
fout
 << " f‹ (öàiv¨=0; iv¨<nv¨; iv¨++Ë{ "<< 
°d
::
ídl
;

791 
fout
 << " i¡Çbö =Çbös[iv¨][˛s]; "<< 
°d
::
ídl
;

792 
fout
 << " i¡ ibö=0; "<< 
°d
::
ídl
;

793 
fout
 << " whûê(dv[iv¨] > X[iv¨][˛s][ibö]Ëibö++; "<< 
°d
::
ídl
;

794 
fout
 << " "<< 
°d
::
ídl
;

795 
fout
 << " i‡(ibö<0Ë{ ibö=0;} "<< 
°d
::
ídl
;

796 
fout
 << " i‡(ibö>ÚböË{ iböÚbö-1;} "<< 
°d
::
ídl
;

797 
fout
 << " i¡Çextbö = ibö; "<< 
°d
::
ídl
;

798 
fout
 << " i‡((dv[iv¨] > X[iv¨][˛s][ibö] && ibö !Úbö-1Ë|| ibö==0Ë "<< 
°d
::
ídl
;

799 
fout
 << "Çextbö++; "<< 
°d
::
ídl
;

800 
fout
 << "Él£ "<< 
°d
::
ídl
;

801 
fout
 << "Çextbö--; "<< 
°d
::
ídl
;

802 
fout
 << " "<< 
°d
::
ídl
;

803 
fout
 << " doubÀ dx = X[iv¨][˛s][ibö]- X[iv¨][˛s][√xtbö]; "<< 
°d
::
ídl
;

804 
fout
 << " doubÀ dy = cumuœtiveDi°[iv¨][˛s][ibö] - cumuœtiveDi°[iv¨][˛s][√xtbö]; "<< 
°d
::
ídl
;

805 
fout
 << " cumuœ¡ = cumuœtiveDi°[iv¨][˛s][ibö] + (dv[iv¨] - X[iv¨][˛s][ibö])* dy/dx;"<< 
°d
::
ídl
;

806 
fout
 << " "<< 
°d
::
ídl
;

807 
fout
 << " "<< 
°d
::
ídl
;

808 
fout
 << " i‡(cumuœ¡>1.-10e-10Ëcumuœ¡ = 1.-10e-10; "<< 
°d
::
ídl
;

809 
fout
 << " i‡(cumuœ¡<10e-10Ë cumuœ¡ = 10e-10; "<< 
°d
::
ídl
;

810 
fout
 << " i‡(FœtNŸGaussËdv[iv¨] = cumuœ¡; "<< 
°d
::
ídl
;

811 
fout
 << "Él£ { "<< 
°d
::
ídl
;

812 
fout
 << " doubÀ maxErfInvArgR™gê0.99999999; "<< 
°d
::
ídl
;

813 
fout
 << " doubÀárg = 2.0*cumuœ¡ - 1.0; "<< 
°d
::
ídl
;

814 
fout
 << " i‡◊rg > maxErfInvArgR™geË¨gmaxErfInvArgR™ge; "<< 
°d
::
ídl
;

815 
fout
 << " i‡◊rg < -maxErfInvArgR™geË¨g=-maxErfInvArgR™ge; "<< 
°d
::
ídl
;

816 
fout
 << " doubÀ invîf=0., sç=1. ; "<< 
°d
::
ídl
;

817 
fout
 << " whûê(°∞>1.e-10){; "<< 
°d
::
ídl
;

818 
fout
 << " i‡”rf(övîf)>¨gËövî‡-=°∞; "<< 
°d
::
ídl
;

819 
fout
 << "Él£ i‡”rf(övîf)<˜rg &&Érf(övîf+°p)>˜rgË°p=°p/5. ; "<< 
°d
::
ídl
;

820 
fout
 << "Él£ invî‡+°p; "<< 
°d
::
ídl
;

821 
fout
 << " } ; "<< 
°d
::
ídl
;

822 
fout
 << " //dv[iv¨] = 1.414213562*TM©h::ErfInvî£◊rg); "<< 
°d
::
ídl
;

823 
fout
 << " dv[iv¨] = 1.414213562* invîf; "<< 
°d
::
ídl
;

824 
fout
 << " } "<< 
°d
::
ídl
;

825 
fout
 << " } "<< 
°d
::
ídl
;

826 
fout
 << " // c›yÅhêå™sf‹med v¨übÀ†back "<< 
°d
::
ídl
;

827 
fout
 << " f‹ (öàiv¨=0; iv¨<nv¨; iv¨++Ëiv[ödi˚sPut.©(iv¨)] = dv[iv¨]; "<< 
°d
::
ídl
;

828 
fout
 << "} "<< 
°d
::
ídl
;

830 
	}
}

	@src/VariableIdentityTransform.cxx

32 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

34 
	~"TMVA/Evít.h
"

35 
	~"TMVA/MsgLoggî.h
"

36 
	~"TMVA/SVEvít.h
"

37 
	~"TMVA/Ty≥s.h
"

38 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

40 
	~"Rty≥s.h
"

41 
	~"TSåög.h
"

43 
	~<io°ªam
>

45 
«me•a˚
 
	gTMVA
 {

46 
˛ass
 
	gD©aSëInfo
;

49 
CœssImp
(
TMVA
::
V¨übÀIdítôyTønsf‹m
);

54 
	gTMVA
::
V¨übÀIdítôyTønsf‹m
::
	$V¨übÀIdítôyTønsf‹m
–
D©aSëInfo
& 
dsi
 )

55 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kIdítôy
, "Id" )

57 
	}
}

62 
	gTMVA
::
V¨übÀIdítôyTønsf‹m
::
	$Inôülize
()

64 
	}
}

69 
Boﬁ_t
 
TMVA
::
V¨übÀIdítôyTønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
)

71 
Inôülize
();

73 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
	gkTRUE
;

75 
Log
(Ë<< 
	gkDEBUG
 << "Pª∑rögÅhêIdítôyÅønsf‹m©i⁄..." << 
	gEndl
;

77 if–
	gfGë
.
size
(Ë< 
	gevíts
[0]->
GëNV¨übÀs
() )

78 
Log
(Ë<< 
	gkFATAL
 << "IdítôyÅønsf‹m d€†nŸáŒow f‹á sñe˘i⁄ o‡öpuàv¨übÀs. PÀa£Ñemovêthêv¨übÀ sñe˘i⁄ o±i⁄ándÖuà⁄ly 'I'." << 
	gEndl
;

80 
SëNV¨übÀs
(
evíts
[0]->
GëNV¨übÀs
());

82 
SëCª©ed
–
kTRUE
 );

84  
	gkTRUE
;

91 
	gTMVA
::
V¨übÀIdítôyTønsf‹m
::
	$AâachXMLTo
( * )

93 
	}
}

98 
TMVA
::
V¨übÀIdítôyTønsf‹m
::
	$RódFromXML
( * )

101 
	}
}

106 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀIdítôyTønsf‹m
::
	$Tønsf‹m
 (c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 ) const

108  
ev
;

109 
	}
}

114 
	gTMVA
::
V¨übÀIdítôyTønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
‚cName
,

115 
I¡_t
 , 
UI¡_t
 
åCou¡î
, Int_t )

117 
fout
 << "ölöêvoid " << 
‚cName
 << "::InôTønsf‹m_Idítôy_" << 
åCou¡î
 << "(Ë{}" << 
°d
::
ídl
;

118 
fout
 << 
°d
::
ídl
;

119 
fout
 << "ölöêvoid " << 
‚cName
 << "::Tønsf‹m_Idítôy_" << 
åCou¡î
 << "(c⁄° std::ve˘‹<doubÀ> &, i¡Ëc⁄° {}" << 
°d
::
ídl
;

120 
	}
}

	@src/VariableImportance.cxx

12 
	~"TMVA/V¨übÀImp‹èn˚.h
"

14 
	~"TMVA/C⁄fig.h
"

15 
	~"TMVA/D©aSëInfo.h
"

16 
	~"TMVA/Envñ›e.h
"

17 
	~"TMVA/Fa˘‹y.h
"

18 
	~"TMVA/O±i⁄M≠.h
"

19 
	~"TMVA/MëhodBa£.h
"

20 
	~"TMVA/MëhodC©eg‹y.h
"

21 
	~"TMVA/MsgLoggî.h
"

22 
	~"TMVA/Ty≥s.h
"

23 
	~"TMVA/V¨Tønsf‹mH™dÀr.h
"

25 
	~"TAxis.h
"

26 
	~"TGøph.h
"

27 
	~"TC™vas.h
"

28 
	~"TH1.h
"

29 
	~"TR™dom3.h
"

30 
	~"TStyÀ.h
"

31 
	~"TSy°em.h
"

33 
	~<bô£t
>

34 
	~<io°ªam
>

35 
	~<mem‹y
>

36 
	~<utûôy
>

40 
	#NBITS
 32

	)

44 
	gTMVA
::
V¨übÀImp‹èn˚Resu…
::
	$V¨übÀImp‹èn˚Resu…
():
	`fImp‹èn˚VÆues
("VariableImportance"),

45 
	$fImp‹èn˚Hi°
(
nuŒ±r
)

48 
	}
}

52 
	gTMVA
::
V¨übÀImp‹èn˚Resu…
::
	$V¨übÀImp‹èn˚Resu…
(c⁄° 
V¨übÀImp‹èn˚Resu…
 &
obj
)

54 
fImp‹èn˚VÆues
 = 
obj
.fImportanceValues;

55 
fImp‹èn˚Hi°
 = 
obj
.fImportanceHist;

56 
	}
}

60 
	gTMVA
::
V¨übÀImp‹èn˚Resu…
::
	$Pröt
() const

62 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

63 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

65 
MsgLoggî
 
	`fLoggî
("VariableImportance");

66 if(
fTy≥
==
VITy≥
::
kSh‹t
)

68 
fLoggî
<<
kINFO
<<"V¨übÀ Imp‹èn˚ Resu…†(Sh‹t)"<<
Endl
;

69 }if(
fTy≥
==
VITy≥
::
kAŒ
)

71 
fLoggî
<<
kINFO
<<"V¨übÀ Imp‹èn˚ Resu…†(AŒ)"<<
Endl
;

73 
fLoggî
<<
kINFO
<<"V¨übÀ Imp‹èn˚ Resu…†(R™dom)"<<
Endl
;

76 
fImp‹èn˚VÆues
.
	`Pröt
();

77 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

78 
	}
}

82 
TC™vas
* 
	gTMVA
::
V¨übÀImp‹èn˚Resu…
::
	$Døw
(c⁄° 
TSåög
 
«me
) const

84 
TC™vas
 *
c
=
√w
 
	`TC™vas
(
«me
.
	`D©a
());

85 
fImp‹èn˚Hi°
->
	`Døw
("");

86 
fImp‹èn˚Hi°
->
	`GëXaxis
()->
	`SëTôÀ
(" Variable Names ");

87 
fImp‹èn˚Hi°
->
	`GëYaxis
()->
	`SëTôÀ
(" Importance (%) ");

88 
c
->
	`Døw
();

89  
c
;

90 
	}
}

94 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$V¨übÀImp‹èn˚
(
TMVA
::
D©aLﬂdî
 *
d©Æﬂdî
):TMVA::
	`Envñ›e
("V¨übÀImp‹èn˚",d©Æﬂdî,
nuŒ±r
),
	$fTy≥
(
VITy≥
::
kSh‹t
)

96 
fCœssifõr
=
°d
::
unique_±r
<
Fa˘‹y
>(
√w
 
TMVA
::
	`Fa˘‹y
("VariableImportance","!V:!ROC:!ModelPersistence:Silent:Color:!DrawProgressBar:AnalysisType=Classification"));

97 
	}
}

101 
	gTMVA
::
V¨übÀImp‹èn˚
::~
	$V¨übÀImp‹èn˚
()

103 
fCœssifõr
=
nuŒ±r
;

104 
	}
}

108 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$EvÆu©e
()

110 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

111 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

112 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

115 if(
fTy≥
==
VITy≥
::
kSh‹t
)

117 
	`EvÆu©eImp‹èn˚Sh‹t
();

118 }if(
fTy≥
==
VITy≥
::
kAŒ
)

120 
	`EvÆu©eImp‹èn˚AŒ
();

122 
UI¡_t
 
nbôs
=
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

123 if(
nbôs
<10)

124 
	`Log
()<<
kERROR
<<"Running variable importance withÜessÅhat 10 varibales in Random mode "<<

125 "ˇ¿tÿ¥odu˚ inc⁄si°íÑesu…s"<<
Endl
;

126 
	`EvÆu©eImp‹èn˚R™dom
(
	`pow
(
nbôs
,2));

128 
fResu…s
.
fTy≥
 = fType;

129 
TMVA
::
MsgLoggî
::
	`E«bÀOuçut
();

130 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kFALSE
);

131 
	`Log
()<<
kINFO
<<"EvÆu©i⁄ d⁄e."<<
Endl
;

132 
TMVA
::
	`gC⁄fig
().
	`SëSûít
(
kTRUE
);

133 
	}
}

137 
UL⁄g_t
 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$Sum
(
UL⁄g_t
 
i
)

139 
UL⁄g_t
 
sum
=0;

140 
UL⁄g_t
 
n
=0;n<
i
;n++Ë
sum
+=
	`pow
(2,n);

141  
sum
;

142 
	}
}

146 
TH1F
* 
	gTMVA
::
V¨übÀImp‹èn˚
::
GëImp‹èn˚
(c⁄° 
UI¡_t
 
nbôs
,
°d
::
ve˘‹
<
Flﬂt_t
> &
imp‹èn˚s
,°d::ve˘‹<
TSåög
> &
v¨Names
)

148 
TH1F
 *
vihi°
 = 
√w
 TH1F("vihi°", "", 
nbôs
, 0,Çbits);

150 
	ggStyÀ
->
SëO±Sèt
(000000);

152 
Flﬂt_t
 
	gn‹mÆiz©i⁄
 = 0.0;

153 
UI¡_t
 
	gi
 = 0; i < 
	gnbôs
; i++Ë
	gn‹mÆiz©i⁄
 +
imp‹èn˚s
[
i
];

155 
Flﬂt_t
 
	groc
 = 0.0;

157 
	ggStyÀ
->
SëTôÀXOff£t
(0.4);

158 
	ggStyÀ
->
SëTôÀXOff£t
(1.2);

161 
UI¡_t
 
	gi
 = 1; i < 
	gnbôs
 + 1; i++) {

162 
	groc
 = 100.0 * 
imp‹èn˚s
[
i
 - 1] / 
n‹mÆiz©i⁄
;

163 
	gvihi°
->
GëXaxis
()->
SëBöLabñ
(
i
, 
v¨Names
[ò- 1].
D©a
());

164 
	gvihi°
->
SëBöC⁄ã¡
(
i
, 
roc
);

167 
	gvihi°
->
LabñsO±i⁄
("v >", "X");

168 
	gvihi°
->
SëB¨Width
(0.97);

169 
	gvihi°
->
SëFûlCﬁ‹
(
TCﬁ‹
::
GëCﬁ‹
("#006600"));

171 
	gvihi°
->
GëXaxis
()->
SëTôÀ
(" Variable Names ");

172 
	gvihi°
->
GëXaxis
()->
SëTôÀSize
(0.045);

173 
	gvihi°
->
GëXaxis
()->
CíãrTôÀ
();

174 
	gvihi°
->
GëXaxis
()->
SëTôÀOff£t
(1.24);

176 
	gvihi°
->
GëYaxis
()->
SëTôÀ
(" Importance (%)");

177 
	gvihi°
->
GëYaxis
()->
SëTôÀSize
(0.045);

178 
	gvihi°
->
GëYaxis
()->
CíãrTôÀ
();

179 
	gvihi°
->
GëYaxis
()->
SëTôÀOff£t
(1.24);

181 
	gvihi°
->
GëYaxis
()->
SëR™geU£r
(-7, 50);

182 
	gvihi°
->
SëDúe˘‹y
(0);

184  
	gvihi°
;

189 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$EvÆu©eImp‹èn˚Sh‹t
()

191 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

192 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

193 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

195 
uöt32_t
 
x
 = 0;

196 
uöt32_t
 
y
 = 0;

198 c⁄° 
UI¡_t
 
nbôs
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

199 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

201 
UL⁄g_t
 
ønge
 = 
	`Sum
(
nbôs
);

204 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`imp‹èn˚s
(
nbôs
);

205 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++)
imp‹èn˚s
[i] = 0;

207 
Flﬂt_t
 
SROC
, 
SSROC
;

209 
x
 = 
ønge
;

211 
°d
::
bô£t
<
NBITS
> 
	`xbô£t
(
x
);

212 i‡(
x
 =0Ë
	`Log
()<<
kFATAL
<<"Error:ÇeedátÜeast one variable.";

216 
TMVA
::
D©aLﬂdî
 *
£eddl
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

219 
UI¡_t
 
ödex
 = 0; index < 
nbôs
; index++){

220 i‡(
xbô£t
[
ödex
]Ë
£eddl
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

224 
	`D©aLﬂdîC›y
(
£eddl
,
fD©aLﬂdî
.
	`gë
());

227 
fCœssifõr
->
	`BookMëhod
(
£eddl
, 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

230 
fCœssifõr
->
	`TøöAŒMëhods
();

231 
fCœssifõr
->
	`Te°AŒMëhods
();

232 
fCœssifõr
->
	`EvÆu©eAŒMëhods
();

235 
SROC
 = 
fCœssifõr
->
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

237 
dñëe
 
£eddl
;

238 
fCœssifõr
->
	`DñëeAŒMëhods
();

239 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

241 
uöt32_t
 
i
 = 0; i < 
NBITS
; ++i) {

242 i‡(
x
 & (1 << 
i
)) {

243 
y
 = 
x
 & ~(1 << 
i
);

244 
°d
::
bô£t
<
NBITS
> 
	`ybô£t
(
y
);

248 
DoubÀ_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

249 i‡(
y
 == 0) {

250 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

255 
TMVA
::
D©aLﬂdî
 *
sub£eddl
 = 
√w
 TMVA::
	`D©aLﬂdî
(
ybô£t
.
	`to_°rög
());

257 
UI¡_t
 
ödex
 = 0; index < 
nbôs
; index++) {

258 i‡(
ybô£t
[
ödex
]Ë
sub£eddl
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

262 
	`D©aLﬂdîC›y
(
sub£eddl
,
fD©aLﬂdî
.
	`gë
());

265 
fCœssifõr
->
	`BookMëhod
(
sub£eddl
, 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

268 
fCœssifõr
->
	`TøöAŒMëhods
();

269 
fCœssifõr
->
	`Te°AŒMëhods
();

270 
fCœssifõr
->
	`EvÆu©eAŒMëhods
();

273 
SSROC
 = 
fCœssifõr
->
	`GëROCI¡egøl
(
ybô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

274 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

276 
dñëe
 
sub£eddl
;

277 
fCœssifõr
->
	`DñëeAŒMëhods
();

278 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

281 
Flﬂt_t
 
n‹mÆiz©i⁄
 = 0.0;

282 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++Ë
n‹mÆiz©i⁄
 +
imp‹èn˚s
[i];

284 
UI¡_t
 
i
=0;i<
nbôs
;i++){

286 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=(100.0 * 
imp‹èn˚s
[i] / 
n‹mÆiz©i⁄
);

288 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=fResu…s.fImp‹èn˚VÆues.
GëVÆue
<
TSåög
>(varNames[i])+" % ";

290 
fResu…s
.
fImp‹èn˚Hi°
 = 
°d
::
sh¨ed_±r
<
TH1F
>(
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
));

291 
	}
}

295 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$EvÆu©eImp‹èn˚R™dom
(
UI¡_t
 
£eds
)

297 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

298 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

299 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

301 
TR™dom3
 *
øngí
 = 
√w
 
	`TR™dom3
(0);

303 
uöt32_t
 
x
 = 0;

304 
uöt32_t
 
y
 = 0;

307 c⁄° 
UI¡_t
 
nbôs
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

308 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

310 
UL⁄g_t
 
ønge
 = 
	`pow
(2, 
nbôs
);

313 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`imp‹èn˚s
(
nbôs
);

314 
Flﬂt_t
 
imp‹èn˚s_n‹m
 = 0;

316 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++)
imp‹èn˚s
[i] = 0;

318 
Flﬂt_t
 
SROC
, 
SSROC
;

320 
x
 = 
ønge
;

322 
UI¡_t
 
n
 = 0;Ç < 
£eds
;Ç++) {

323 
x
 = 
øngí
 -> 
	`I¡egî
(
ønge
);

325 
°d
::
bô£t
<
NBITS
> 
	`xbô£t
(
x
);

326 i‡(
x
 == 0) ;

330 
TMVA
::
D©aLﬂdî
 *
£eddl
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

333 
UI¡_t
 
ödex
 = 0; index < 
nbôs
; index++) {

334 i‡(
xbô£t
[
ödex
]Ë
£eddl
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

338 
	`D©aLﬂdîC›y
(
£eddl
,
fD©aLﬂdî
.
	`gë
());

341 
fCœssifõr
->
	`BookMëhod
(
£eddl
, 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

344 
fCœssifõr
->
	`TøöAŒMëhods
();

345 
fCœssifõr
->
	`Te°AŒMëhods
();

346 
fCœssifõr
->
	`EvÆu©eAŒMëhods
();

349 
SROC
 = 
fCœssifõr
->
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

351 
dñëe
 
£eddl
;

352 
fCœssifõr
->
	`DñëeAŒMëhods
();

353 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

355 
uöt32_t
 
i
 = 0; i < 32; ++i) {

356 i‡(
x
 & (1 << 
i
)) {

357 
y
 = 
x
 & ~(1 << 
i
);

358 
°d
::
bô£t
<
NBITS
> 
	`ybô£t
(
y
);

362 
DoubÀ_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

363 i‡(
y
 == 0) {

364 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

365 
imp‹èn˚s_n‹m
 +
imp‹èn˚s
[
ny
];

370 
TMVA
::
D©aLﬂdî
 *
sub£eddl
 = 
√w
 TMVA::
	`D©aLﬂdî
(
ybô£t
.
	`to_°rög
());

372 
UI¡_t
 
ödex
 = 0; index < 
nbôs
; index++) {

373 i‡(
ybô£t
[
ödex
]Ë
sub£eddl
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

377 
	`D©aLﬂdîC›y
(
sub£eddl
,
fD©aLﬂdî
.
	`gë
());

380 
fCœssifõr
->
	`BookMëhod
(
sub£eddl
, 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

383 
fCœssifõr
->
	`TøöAŒMëhods
();

384 
fCœssifõr
->
	`Te°AŒMëhods
();

385 
fCœssifõr
->
	`EvÆu©eAŒMëhods
();

388 
SSROC
 = 
fCœssifõr
->
	`GëROCI¡egøl
(
ybô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

389 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

391 
dñëe
 
sub£eddl
;

392 
fCœssifõr
->
	`DñëeAŒMëhods
();

393 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

398 
Flﬂt_t
 
n‹mÆiz©i⁄
 = 0.0;

399 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++Ë
n‹mÆiz©i⁄
 +
imp‹èn˚s
[i];

401 
UI¡_t
 
i
=0;i<
nbôs
;i++){

403 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=(100.0 * 
imp‹èn˚s
[i] / 
n‹mÆiz©i⁄
);

405 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=fResu…s.fImp‹èn˚VÆues.
GëVÆue
<
TSåög
>(varNames[i])+" % ";

407 
fResu…s
.
fImp‹èn˚Hi°
 = 
°d
::
sh¨ed_±r
<
TH1F
>(
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
));

408 
dñëe
 
øngí
;

410 
	}
}

414 
	gTMVA
::
V¨übÀImp‹èn˚
::
	$EvÆu©eImp‹èn˚AŒ
()

417 
TSåög
 
mëhodName
 = 
fMëhod
.
GëVÆue
<TString>("MethodName");

418 
TSåög
 
mëhodTôÀ
 = 
fMëhod
.
GëVÆue
<TString>("MethodTitle");

419 
TSåög
 
mëhodO±i⁄s
 = 
fMëhod
.
GëVÆue
<TString>("MethodOptions");

421 
uöt32_t
 
x
 = 0;

422 
uöt32_t
 
y
 = 0;

425 c⁄° 
UI¡_t
 
nbôs
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëNV¨übÀs
();

426 
°d
::
ve˘‹
<
TSåög
> 
v¨Names
 = 
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëLi°OfV¨übÀs
();

428 
UL⁄g_t
 
ønge
 = 
	`pow
(2, 
nbôs
);

431 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`imp‹èn˚s
(
nbôs
);

434 
°d
::
ve˘‹
<
Flﬂt_t
> 
	`ROC
(
ønge
);

435 
ROC
[0]=0.5;

436 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++Ë
imp‹èn˚s
[i] = 0;

438 
Flﬂt_t
 
SROC
, 
SSROC
;

439  
x
 = 1; x <
ønge
 ; x++) {

441 
°d
::
bô£t
<
NBITS
> 
	`xbô£t
(
x
);

442 i‡(
x
 == 0) ;

445 
TMVA
::
D©aLﬂdî
 *
£eddl
 = 
√w
 TMVA::
	`D©aLﬂdî
(
xbô£t
.
	`to_°rög
());

448 
UI¡_t
 
ödex
 = 0; index < 
nbôs
; index++) {

449 i‡(
xbô£t
[
ödex
]Ë
£eddl
->
	`AddV¨übÀ
(
v¨Names
[index], 'F');

452 
	`D©aLﬂdîC›y
(
£eddl
,
fD©aLﬂdî
.
	`gë
());

454 
£eddl
->
	`Pª∑ªTøöögAndTe°Tªe
(
fD©aLﬂdî
->
	`GëDeÁu…D©aSëInfo
().
	`GëCut
("Sig«l"), fD©aLﬂdî->GëDeÁu…D©aSëInfo().GëCut("Background"), fD©aLﬂdî->GëDeÁu…D©aSëInfo().
	`GëS∂ôO±i⁄s
());

457 
fCœssifõr
->
	`BookMëhod
(
£eddl
, 
mëhodName
, 
mëhodTôÀ
, 
mëhodO±i⁄s
);

460 
fCœssifõr
->
	`TøöAŒMëhods
();

461 
fCœssifõr
->
	`Te°AŒMëhods
();

462 
fCœssifõr
->
	`EvÆu©eAŒMëhods
();

465 
ROC
[
x
] = 
fCœssifõr
->
	`GëROCI¡egøl
(
xbô£t
.
	`to_°rög
(), 
mëhodTôÀ
);

467 
dñëe
 
£eddl
;

468 
fCœssifõr
->
	`DñëeAŒMëhods
();

469 
fCœssifõr
->
fMëhodsM≠
.
	`˛ór
();

473  
x
 = 0; x <
ønge
 ; x++)

475 
SROC
=
ROC
[
x
];

476 
uöt32_t
 
i
 = 0; i < 
NBITS
; ++i) {

477 i‡(
x
 & (1 << 
i
)) {

478 
y
 = 
x
 & ~(1 << 
i
);

479 
°d
::
bô£t
<
NBITS
> 
	`ybô£t
(
y
);

481 
Flﬂt_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

482 i‡(
y
 == 0) {

483 
imp‹èn˚s
[
ny
] = 
SROC
 - 0.5;

488 
SSROC
 = 
ROC
[
y
];

489 
imp‹èn˚s
[
ny
] +
SROC
 - 
SSROC
;

494 
Flﬂt_t
 
n‹mÆiz©i⁄
 = 0.0;

495 
UI¡_t
 
i
 = 0; i < 
nbôs
; i++Ë
n‹mÆiz©i⁄
 +
imp‹èn˚s
[i];

497 
UI¡_t
 
i
=0;i<
nbôs
;i++){

499 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=(100.0 * 
imp‹èn˚s
[i] / 
n‹mÆiz©i⁄
);

501 
fResu…s
.
fImp‹èn˚VÆues
[
v¨Names
[
i
]]=fResu…s.fImp‹èn˚VÆues.
GëVÆue
<
TSåög
>(varNames[i])+" % ";

503 
fResu…s
.
fImp‹èn˚Hi°
 = 
°d
::
sh¨ed_±r
<
TH1F
>(
	`GëImp‹èn˚
(
nbôs
,
imp‹èn˚s
,
v¨Names
));

504 
	}
}

	@src/VariableInfo.cxx

34 
	~"TMVA/V¨übÀInfo.h
"

36 
	~"TMVA/Toﬁs.h
"

38 
	~"TM©h.h
"

39 
	~"TNamed.h
"

41 
	~<iom™ù
>

42 
	~<s°ªam
>

47 
	gTMVA
::
V¨übÀInfo
::
	$V¨übÀInfo
–c⁄° 
TSåög
& 
ex¥essi⁄
, c⁄° TSåög& 
tôÀ
, c⁄° TSåög& 
unô
,

48 
I¡_t
 
v¨Cou¡î
,

49 
v¨Ty≥
, * 
exã∫Æ
,

50 
DoubÀ_t
 
mö
, DoubÀ_à
max
, 
Boﬁ_t
 
n‹mÆized
 )

51 : 
	`TNamed
(
tôÀ
.
	`D©a
(),title.Data()),

52 
	`fEx¥essi⁄
 ( 
ex¥essi⁄
 ),

53 
	`fUnô
 ( 
unô
 ),

54 
	`fV¨Ty≥
 ( 
v¨Ty≥
 ),

55 
	`fXmónN‹m
 ( 0 ),

56 
	`fXrmsN‹m
 ( 0 ),

57 
	`fXv¨ün˚N‹m
( 0 ),

58 
	`fN‹mÆized
 ( 
n‹mÆized
 ),

59 
	`fExã∫ÆD©a
 ( 
exã∫Æ
 ),

60 
	$fV¨Cou¡î
 ( 
v¨Cou¡î
 )

62 i‡–
TM©h
::
	`Abs
(
max
 - 
mö
Ë<
FLT_MIN
 ) {

63 
fXmöN‹m
 = 
FLT_MAX
;

64 
fXmaxN‹m
 = -
FLT_MAX
;

67 
fXmöN‹m
 = 
mö
;

68 
fXmaxN‹m
 = 
max
;

71 i‡(
ex¥essi⁄
.
	`C⁄èös
(":=")) {

72 
Ssiz_t
 
ödex
 = 
ex¥essi⁄
.
	`Index
(":=");

73 
fEx¥essi⁄
 = 
	`ex¥essi⁄
(
ödex
+2,
ex¥essi⁄
.
	`Sizeof
()-index-2);

74 
fLabñ
 = 
	`ex¥essi⁄
(0,
ödex
);

75 
fLabñ
 = fLabñ.
	`Rïœ˚AŒ
(" ","");

77 
fLabñ
 = 
	`GëEx¥essi⁄
();

79 i‡(
fTôÀ
 =""ËfTôÀ = 
fLabñ
;

80 
fI¡î«lName
 = 
	`gToﬁs
().
	`Rïœ˚ReguœrEx¥essi⁄s
–
fLabñ
, "_" );

81 
	}
}

86 
	gTMVA
::
V¨übÀInfo
::
	$V¨übÀInfo
()

87 : 
	`TNamed
(),

88 
	`fEx¥essi⁄
 (""),

89 
	`fV¨Ty≥
 ('\0'),

90 
	`fXmónN‹m
 ( 0 ),

91 
	`fXrmsN‹m
 ( 0 ),

92 
	`fXv¨ün˚N‹m
( 0 ),

93 
	`fN‹mÆized
 ( 
kFALSE
 ),

94 
	`fExã∫ÆD©a
 ( 0 ),

95 
	$fV¨Cou¡î
 ( 0 )

97 
fXmöN‹m
 = 1e30;

98 
fXmaxN‹m
 = -1e30;

99 
fLabñ
 = 
	`GëEx¥essi⁄
();

100 
fTôÀ
 = 
fLabñ
;

101 
fName
 = 
fTôÀ
;

102 
fUnô
 = "";

103 
fI¡î«lName
 = 
	`gToﬁs
().
	`Rïœ˚ReguœrEx¥essi⁄s
–
fLabñ
, "_" );

104 
	}
}

109 
	gTMVA
::
V¨übÀInfo
::
	$V¨übÀInfo
–c⁄° 
V¨übÀInfo
& 
Ÿhî
 )

110 : 
	`TNamed
(
Ÿhî
),

111 
	`fEx¥essi⁄
 ( 
Ÿhî
.
fEx¥essi⁄
 ),

112 
	`fI¡î«lName
 ( 
Ÿhî
.
fI¡î«lName
 ),

113 
	`fLabñ
 ( 
Ÿhî
.
fLabñ
 ),

114 
	`fUnô
 ( 
Ÿhî
.
fUnô
 ),

115 
	`fV¨Ty≥
 ( 
Ÿhî
.
fV¨Ty≥
 ),

116 
	`fXmöN‹m
 ( 
Ÿhî
.
fXmöN‹m
 ),

117 
	`fXmaxN‹m
 ( 
Ÿhî
.
fXmaxN‹m
 ),

118 
	`fXmónN‹m
 ( 
Ÿhî
.
fXmónN‹m
 ),

119 
	`fXrmsN‹m
 ( 
Ÿhî
.
fXrmsN‹m
 ),

120 
	`fXv¨ün˚N‹m
–
Ÿhî
.
fXv¨ün˚N‹m
 ),

121 
	`fN‹mÆized
 ( 
Ÿhî
.
fN‹mÆized
 ),

122 
	`fExã∫ÆD©a
 ( 
Ÿhî
.
fExã∫ÆD©a
 ),

123 
	$fV¨Cou¡î
 ( 
Ÿhî
.
fV¨Cou¡î
 )

125 
	}
}

130 
	gTMVA
::
V¨übÀInfo
& 
TMVA
::V¨übÀInfo::
›î©‹
=(c⁄° V¨übÀInfo& 
rhs
)

132 i‡(
this
 !=& 
rhs
) {

133 
fEx¥essi⁄
 = 
rhs
.fExpression;

134 
	gfI¡î«lName
 = 
rhs
.
fI¡î«lName
;

135 
	gfV¨Ty≥
 = 
rhs
.
fV¨Ty≥
;

136 
	gfXmöN‹m
 = 
rhs
.
fXmöN‹m
;

137 
	gfXmaxN‹m
 = 
rhs
.
fXmaxN‹m
;

138 
	gfTôÀ
 = 
rhs
.
fTôÀ
;

139 
	gfName
 = 
rhs
.
fName
;

141  *
	gthis
;

147 
	gTMVA
::
V¨übÀInfo
::
	$WrôeToSåóm
–
°d
::
o°ªam
& 
o
 ) const

149 
UI¡_t
 
nc
 = 
TM©h
::
	`Max
–30, TM©h::Max–
	`GëEx¥essi⁄
().
	`Lígth
()+1, 
	`GëI¡î«lName
().Length()+1 ) );

150 
TSåög
 
	`expBr
(
	`F‹m
("\'%s\'",
	`GëEx¥essi⁄
().
	`D©a
()));

151 
o
 << 
°d
::
	`£tw
(
nc
Ë<< 
	`GëEx¥essi⁄
();

152 
o
 << 
°d
::
	`£tw
(
nc
Ë<< 
	`GëI¡î«lName
();

153 
o
 << 
°d
::
	`£tw
(
nc
Ë<< 
	`GëLabñ
();

154 
o
 << 
°d
::
	`£tw
(
nc
Ë<< 
	`GëTôÀ
();

155 
o
 << 
°d
::
	`£tw
(
nc
Ë<< 
	`GëUnô
();

156 
o
 << " \'" << 
fV¨Ty≥
 << "\' ";

157 
o
 << "[" << 
°d
::
	`£çªcisi⁄
(12Ë<< 
	`GëMö
(Ë<< "," << std::£çªcisi⁄(12Ë<< 
	`GëMax
(Ë<< "]" << std::
ídl
;

158 
	}
}

163 
	gTMVA
::
V¨übÀInfo
::
	$RódFromSåóm
–
°d
::
i°ªam
& 
i°r
 )

167 
TSåög
 
exp
, 
v¨«me
, 
v¨ty≥
, 
mömax
, 
mö°r
, 
max°r
;

168 
i°r
 >> 
exp
 >> 
v¨«me
 >> 
v¨ty≥
 >> 
mömax
;

169 
exp
.
	`Såù
(
TSåög
::
kBŸh
, '\'');

170 
mömax
 = mömax.
	`Såù
(
TSåög
::
kLódög
, '[');

171 
mömax
 = mömax.
	`Såù
(
TSåög
::
kTøûög
, ']');

172 
mö°r
 = 
	`mömax
(0,
mömax
.
	`Fú°
(','));

173 
max°r
 = 
	`mömax
(1+
mömax
.
	`Fú°
(','),mömax.
	`Lígth
());

174 
DoubÀ_t
 
mö
, 
max
;

175 
°d
::
°rög°ªam
 
	`°rmö
(
mö°r
.
	`D©a
());

176 
°d
::
°rög°ªam
 
	`°rmax
(
max°r
.
	`D©a
());

177 
°rmö
 >> 
mö
;

178 
°rmax
 >> 
max
;

179 
	`SëEx¥essi⁄
 ( 
exp
 );

180 
	`SëI¡î«lV¨Name
–
v¨«me
 );

181 
	`SëLabñ
 ( 
v¨«me
 );

182 
	`SëTôÀ
 ( 
v¨«me
 );

183 
	`SëUnô
 ( "" );

184 
	`SëV¨Ty≥
 ( 
v¨ty≥
[1] );

185 
	`SëMö
 ( 
mö
 );

186 
	`SëMax
 ( 
max
 );

187 
	}
}

192 
	gTMVA
::
V¨übÀInfo
::
	$AddToXML
–* 
v¨node
 )

194 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Ex¥essi⁄", 
	`GëEx¥essi⁄
() );

195 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Labñ", 
	`GëLabñ
() );

196 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "TôÀ", 
	`GëTôÀ
() );

197 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Unô", 
	`GëUnô
() );

198 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "I¡î«l", 
	`GëI¡î«lName
() );

200 
TSåög
 
	`ty≥Så
(" ");

201 
ty≥Så
[0] = 
	`GëV¨Ty≥
();

202 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Ty≥", 
ty≥Så
 );

203 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Mö", gToﬁs().
	`SåögFromDoubÀ
(
	`GëMö
()) );

204 
	`gToﬁs
().
	`AddAâr
–
v¨node
, "Max", gToﬁs().
	`SåögFromDoubÀ
(
	`GëMax
()) );

205 
	}
}

210 
	gTMVA
::
V¨übÀInfo
::
	$RódFromXML
–* 
v¨node
 )

212 
TSåög
 
ty≥
;

213 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Ex¥essi⁄", 
fEx¥essi⁄
 );

214 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Labñ", 
fLabñ
 );

215 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "TôÀ", 
fTôÀ
 );

216 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Unô", 
fUnô
 );

217 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "I¡î«l", 
fI¡î«lName
 );

218 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Ty≥", 
ty≥
 );

219 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Mö", 
fXmöN‹m
 );

220 
	`gToﬁs
().
	`RódAâr
–
v¨node
, "Max", 
fXmaxN‹m
 );

222 
	`SëV¨Ty≥
(
ty≥
[0]);

223 
	}
}

	@src/VariableNormalizeTransform.cxx

35 
	~"TMVA/V¨übÀN‹mÆizeTønsf‹m.h
"

37 
	~"TMVA/D©aSë.h
"

38 
	~"TMVA/D©aSëInfo.h
"

39 
	~"TMVA/Evít.h
"

40 
	~"TMVA/MsgLoggî.h
"

41 
	~"TMVA/Toﬁs.h
"

42 
	~"TMVA/Ty≥s.h
"

43 
	~"TMVA/V¨übÀInfo.h
"

45 
	~"TM©rixD.h
"

46 
	~"TM©rixDBa£.h
"

47 
	~"TVe˘‹D.h
"

48 
	~"TVe˘‹F.h
"

50 
	~<io°ªam
>

51 
	~<iom™ù
>

52 
	~<cÊﬂt
>

54 
CœssImp
(
TMVA
::
V¨übÀN‹mÆizeTønsf‹m
);

59 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$V¨übÀN‹mÆizeTønsf‹m
–
D©aSëInfo
& 
dsi
 )

60 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kN‹mÆized
, "Norm" )

62 
	}
}

66 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::~
	$V¨übÀN‹mÆizeTønsf‹m
() {

67 
	}
}

72 
TMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$Inôülize
()

74 
UI¡_t
 
öputSize
 = 
fGë
.
	`size
();

75 
I¡_t
 
numC
 = 
	`GëNCœs£s
()+1;

76 i‡(
	`GëNCœs£s
(Ë<1 ) 
numC
 = 1;

78 
fMö
.
	`ªsize
–
numC
 );

79 
fMax
.
	`ªsize
–
numC
 );

80 
I¡_t
 
i
=0; i<
numC
; i++) {

81 
fMö
.
	`©
(
i
).
	`ªsize
(
öputSize
);

82 
fMax
.
	`©
(
i
).
	`ªsize
(
öputSize
);

83 
fMö
.
	`©
(
i
).
	`assign
(
öputSize
, 0);

84 
fMax
.
	`©
(
i
).
	`assign
(
öputSize
, 0);

86 
	}
}

91 
Boﬁ_t
 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
)

93 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
kTRUE
;

95 
Log
(Ë<< 
	gkDEBUG
 << "\tPª∑rögÅhêå™sf‹m©i⁄." << 
	gEndl
;

97 
Inôülize
();

99 
CÆcN‹mÆiz©i⁄P¨ams
–
evíts
 );

101 
SëCª©ed
–
kTRUE
 );

103  
	gkTRUE
;

109 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$Tønsf‹m
–c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

111 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

120 i‡(
˛s
 < 0 || cl†>(Ë
fMö
.
	`size
()) cls = fMin.size()-1;

123 
FlﬂtVe˘‹
 
öput
;

124 
FlﬂtVe˘‹
 
ouçut
;

125 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

126 
	`GëI≈ut
–
ev
, 
öput
, 
mask
 );

128 i‡(
fTønsf‹medEvít
==0ËfTønsf‹medEvíà
√w
 
	`Evít
();

130 
Flﬂt_t
 
mö
,
max
;

131 c⁄° 
FlﬂtVe˘‹
& 
möVe˘‹
 = 
fMö
.
	`©
(
˛s
);

132 c⁄° 
FlﬂtVe˘‹
& 
maxVe˘‹
 = 
fMax
.
	`©
(
˛s
);

134 
UI¡_t
 
iidx
 = 0;

135 
°d
::
ve˘‹
<
Ch¨_t
>::
ôî©‹
 
ôMask
 = 
mask
.
	`begö
();

136  
°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈
 = 
öput
.
	`begö
(), 
ôI≈End
 = i≈ut.
	`íd
(); itInp != itInpEnd; ++itInp) {

137 if–(*
ôMask
) ){

138 ++
iidx
;

139 ++
ôMask
;

144 
Flﬂt_t
 
vÆ
 = (*
ôI≈
);

146 
mö
 = 
möVe˘‹
.
	`©
(
iidx
);

147 
max
 = 
maxVe˘‹
.
	`©
(
iidx
);

148 
Flﬂt_t
 
off£t
 = 
mö
;

149 
Flﬂt_t
 
sˇÀ
 = 1.0/(
max
-
mö
);

151 
Flﬂt_t
 
vÆn‹m
 = (
vÆ
-
off£t
)*
sˇÀ
 * 2 - 1;

152 
ouçut
.
	`push_back
–
vÆn‹m
 );

154 ++
iidx
;

155 ++
ôMask
;

158 
	`SëOuçut
–
fTønsf‹medEvít
, 
ouçut
, 
mask
, 
ev
 );

159  
fTønsf‹medEvít
;

160 
	}
}

165 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$Invî£Tønsf‹m
(c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

167 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

171 i‡(
˛s
 < 0 || cl†> 
	`GëNCœs£s
()) {

172 i‡(
	`GëNCœs£s
(Ë> 1 ) 
˛s
 = GetNClasses();

173 
˛s
 = 0;

176 
FlﬂtVe˘‹
 
öput
;

177 
FlﬂtVe˘‹
 
ouçut
;

178 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

179 
	`GëI≈ut
–
ev
, 
öput
, 
mask
, 
kTRUE
 );

181 i‡(
fBackTønsf‹medEvít
==0ËfBackTønsf‹medEvíà
√w
 
	`Evít
–*
ev
 );

183 
Flﬂt_t
 
mö
,
max
;

184 c⁄° 
FlﬂtVe˘‹
& 
möVe˘‹
 = 
fMö
.
	`©
(
˛s
);

185 c⁄° 
FlﬂtVe˘‹
& 
maxVe˘‹
 = 
fMax
.
	`©
(
˛s
);

187 
UI¡_t
 
iidx
 = 0;

188  
°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈
 = 
öput
.
	`begö
(), 
ôI≈End
 = i≈ut.
	`íd
(); itInp != itInpEnd; ++itInp) {

189 
Flﬂt_t
 
vÆ
 = (*
ôI≈
);

191 
mö
 = 
möVe˘‹
.
	`©
(
iidx
);

192 
max
 = 
maxVe˘‹
.
	`©
(
iidx
);

193 
Flﬂt_t
 
off£t
 = 
mö
;

194 
Flﬂt_t
 
sˇÀ
 = 1.0/(
max
-
mö
);

196 
Flﬂt_t
 
vÆn‹m
 = 
off£t
+((
vÆ
+1)/(
sˇÀ
 * 2));

197 
ouçut
.
	`push_back
–
vÆn‹m
 );

199 ++
iidx
;

202 
	`SëOuçut
–
fBackTønsf‹medEvít
, 
ouçut
, 
mask
, 
ev
, 
kTRUE
 );

204  
fBackTønsf‹medEvít
;

205 
	}
}

210 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
CÆcN‹mÆiz©i⁄P¨ams
–c⁄° 
°d
::
ve˘‹
< 
Evít
*>& 
evíts
 )

212 i‡(
evíts
.
size
() <= 1)

213 
Log
(Ë<< 
kFATAL
 << "NŸÉnoughÉvít†(found " << 
evíts
.
size
(Ë<< "ËtÿˇlcuœãÅhên‹mÆiz©i⁄" << 
Endl
;

215 
FlﬂtVe˘‹
 
	göput
;

216 
	g°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

218 
UI¡_t
 
	göputSize
 = 
fGë
.
size
();

220 c⁄° 
UI¡_t
 
	gnCls
 = 
GëNCœs£s
();

221 
I¡_t
 
	gnumC
 = 
nCls
+1;

222 
I¡_t
 
	gÆl
 = 
nCls
;

223 i‡(
	gnCls
 <= 1 ) {

224 
numC
 = 1;

225 
	gÆl
 = 0;

228 
UI¡_t
 
	giöp
=0; iöp<
	göputSize
; ++iinp) {

229 
I¡_t
 
	gic
 = 0; i¯< 
	gnumC
; ic++) {

230 
	gfMö
.
©
(
ic
).©(
iöp
Ë
FLT_MAX
;

231 
	gfMax
.
©
(
ic
).©(
iöp
Ë-
FLT_MAX
;

235 
	g°d
::
ve˘‹
<
Evít
*>::
c⁄°_ôî©‹
 
evIt
 = 
evíts
.
begö
();

236 ;
	gevIt
!=
evíts
.
íd
();evIt++) {

237 c⁄° 
	gTMVA
::
Evít
* 
evít
 = (*
evIt
);

239 
UI¡_t
 
	g˛s
 = (*
evIt
)->
GëCœss
();

241 
	gFlﬂtVe˘‹
& 
	gmöVe˘‹
 = 
fMö
.
©
(
˛s
);

242 
	gFlﬂtVe˘‹
& 
	gmaxVe˘‹
 = 
fMax
.
©
(
˛s
);

244 
	gFlﬂtVe˘‹
& 
	gmöVe˘‹AŒ
 = 
fMö
.
©
(
Æl
);

245 
	gFlﬂtVe˘‹
& 
	gmaxVe˘‹AŒ
 = 
fMax
.
©
(
Æl
);

247 
GëI≈ut
(
evít
,
öput
,
mask
);

248 
UI¡_t
 
	giidx
 = 0;

249  
	g°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈
 = 
öput
.
begö
(), 
	gôI≈End
 = i≈ut.
íd
(); 
	gôI≈
 !
ôI≈End
; ++itInp) {

250 
Flﬂt_t
 
	gvÆ
 = (*
ôI≈
);

252 if–
	gmöVe˘‹
.
©
(
iidx
Ë> 
	gvÆ
 ) möVe˘‹.©(iidxË
vÆ
;

253 if–
	gmaxVe˘‹
.
©
(
iidx
Ë< 
	gvÆ
 ) maxVe˘‹.©(iidxË
vÆ
;

255 i‡(
	gnCls
 != 1) {

256 i‡(
möVe˘‹AŒ
.
©
(
iidx
Ë> 
vÆ
) minVectorAll.at(iidx) = val;

257 i‡(
	gmaxVe˘‹AŒ
.
©
(
iidx
Ë< 
	gvÆ
ËmaxVe˘‹AŒ.©(iidxË
vÆ
;

260 ++
	giidx
;

270 
	g°d
::
ve˘‹
<
TSåög
>* 
TMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$GëTønsf‹m©i⁄Såögs
–
I¡_t
 
˛s
 ) const

274 i‡(
˛s
 < 0 || cl†> 
	`GëNCœs£s
()) cls = GetNClasses();

276 
Flﬂt_t
 
mö
, 
max
;

277 c⁄° 
UI¡_t
 
size
 = 
fGë
.
	`size
();

278 
°d
::
ve˘‹
<
TSåög
>* 
°rVec
 = 
√w
 std::ve˘‹<TSåög>(
size
);

280 
UI¡_t
 
iöp
 = 0;

281  
ItV¨Ty≥IdxC⁄°
 
ôGë
 = 
fGë
.
	`begö
(), 
ôGëEnd
 = fGë.
	`íd
(); itGet != itGetEnd; ++itGet ) {

282 
mö
 = 
fMö
.
	`©
(
˛s
).©(
iöp
);

283 
max
 = 
fMax
.
	`©
(
˛s
).©(
iöp
);

285 
Ch¨_t
 
ty≥
 = (*
ôGë
).
fú°
;

286 
UI¡_t
 
idx
 = (*
ôGë
).
£c⁄d
;

287 
Flﬂt_t
 
off£t
 = 
mö
;

288 
Flﬂt_t
 
sˇÀ
 = 1.0/(
max
-
mö
);

289 
TSåög
 
	`°r
("");

290 
V¨übÀInfo
& 
v¨Info
 = (
ty≥
=='v'?
fDsi
.
	`GëV¨übÀInfo
(
idx
):—y≥=='t'?fDsi.
	`GëT¨gëInfo
(idx):fDsi.
	`GëS≥˘©‹Info
(idx)));

292 i‡(
off£t
 < 0Ë
°r
 = 
	`F‹m
–"2*%g*([%s] + %gË- 1", 
sˇÀ
, 
v¨Info
.
	`GëLabñ
().
	`D©a
(), -offset );

293 
°r
 = 
	`F‹m
–"2*%g*([%s] - %gË- 1", 
sˇÀ
, 
v¨Info
.
	`GëLabñ
().
	`D©a
(), 
off£t
 );

294 (*
°rVec
)[
iöp
] = 
°r
;

296 ++
iöp
;

299  
°rVec
;

300 
	}
}

305 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$WrôeTønsf‹m©i⁄ToSåóm
–
°d
::
o°ªam
& 
o
 ) const

307 
o
 << "# mö max f‹áŒ v¨übÀ†f‹áŒ cœs£†⁄êa·îÅhêŸhîándá†®œ°É¡ry f‹áŒ cœs£†togëhî" << 
°d
::
ídl
;

309 
I¡_t
 
numC
 = 
	`GëNCœs£s
()+1;

310 i‡(
	`GëNCœs£s
(Ë<1 ) 
numC
 = 1;

312 
UI¡_t
 
nv¨s
 = 
	`GëNV¨übÀs
();

313 
UI¡_t
 
¡gts
 = 
	`GëNT¨gës
();

315 
I¡_t
 
i˛s
 = 0; i˛†< 
numC
; icls++ ) {

316 
o
 << 
i˛s
 << 
°d
::
ídl
;

317 
UI¡_t
 
iv¨
=0; iv¨<
nv¨s
; ivar++)

318 
o
 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< 
fMö
.
	`©
(
i˛s
).©(
iv¨
) << " "

319 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< 
fMax
.
	`©
(
i˛s
).©(
iv¨
Ë<< std::
ídl
;

320 
UI¡_t
 
ôgt
=0; itgt<
¡gts
; itgt++)

321 
o
 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< 
fMö
.
	`©
(
i˛s
).©(
nv¨s
+
ôgt
) << " "

322 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< 
fMax
.
	`©
(
i˛s
).©(
nv¨s
+
ôgt
Ë<< std::
ídl
;

324 
o
 << "##" << 
°d
::
ídl
;

325 
	}
}

330 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$AâachXMLTo
(* 
∑ª¡
)

332 * 
åfxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transform");

333 
	`gToﬁs
().
	`AddAâr
(
åfxml
, "Name", "Normalize");

334 
V¨übÀTønsf‹mBa£
::
	`AâachXMLTo
–
åfxml
 );

336 
I¡_t
 
numC
 = (
	`GëNCœs£s
()<= 1)?1:GetNClasses()+1;

338  
I¡_t
 
i˛s
=0; i˛s<
numC
; icls++ ) {

339 * 
˛sxml
 = 
	`gToﬁs
().
	`AddChûd
(
åfxml
, "Class");

340 
	`gToﬁs
().
	`AddAâr
(
˛sxml
, "CœssIndex", 
i˛s
);

341 * 
öpxml
 = 
	`gToﬁs
().
	`AddChûd
(
˛sxml
, "Ranges");

342 
UI¡_t
 
iöp
 = 0;

343  
ItV¨Ty≥Idx
 
ôGë
 = 
fGë
.
	`begö
(), 
ôGëEnd
 = fGë.
	`íd
(); itGet != itGetEnd; ++itGet ) {

344 * 
mmxml
 = 
	`gToﬁs
().
	`AddChûd
(
öpxml
, "Range");

345 
	`gToﬁs
().
	`AddAâr
(
mmxml
, "Index", 
iöp
);

346 
	`gToﬁs
().
	`AddAâr
(
mmxml
, "Mö", 
fMö
.
	`©
(
i˛s
).©(
iöp
) );

347 
	`gToﬁs
().
	`AddAâr
(
mmxml
, "Max", 
fMax
.
	`©
(
i˛s
).©(
iöp
) );

348 ++
iöp
;

351 
	}
}

356 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$RódFromXML
–* 
å‚ode
 )

358 
Boﬁ_t
 
√wF‹m©
 = 
kFALSE
;

360 * 
ö≤ode
 = 
NULL
;

362 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
, "Selection");

363 if–
ö≤ode
 !
NULL
 )

364 
√wF‹m©
 = 
kTRUE
;

366 if–
√wF‹m©
 ){

369 
V¨übÀTønsf‹mBa£
::
	`RódFromXML
–
ö≤ode
 );

373 
UI¡_t
 
size
 = 
fGë
.
	`size
();

374 
UI¡_t
 
˛assödex
, 
idx
;

376 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
å‚ode
, "Class" );

377 
ch
) {

378 
I¡_t
 
ci
 = 0;

379 
	`gToﬁs
().
	`RódAâr
(
ch
, "CœssIndex", 
ci
);

380 
˛assödex
 = 
	`UI¡_t
(
ci
);

382 
fMö
.
	`ªsize
(
˛assödex
+1);

383 
fMax
.
	`ªsize
(
˛assödex
+1);

385 
fMö
[
˛assödex
].
	`ªsize
(
size
,
	`Flﬂt_t
(0));

386 
fMax
[
˛assödex
].
	`ªsize
(
size
,
	`Flﬂt_t
(0));

388 * 
˛ch
 = 
	`gToﬁs
().
	`GëChûd
–
ch
 );

389 
˛ch
) {

390 
TSåög
 
	`nodeName
(
	`gToﬁs
().
	`GëName
(
˛ch
));

391 if(
nodeName
=="Ranges") {

392 * 
v¨ch
 = 
	`gToﬁs
().
	`GëChûd
–
˛ch
 );

393 
v¨ch
) {

394 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "Index", 
idx
);

395 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "Mö", 
fMö
[
˛assödex
][
idx
]);

396 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "Max", 
fMax
[
˛assödex
][
idx
]);

397 
v¨ch
 = 
	`gToﬁs
().
	`GëNextChûd
( varch );

400 
˛ch
 = 
	`gToﬁs
().
	`GëNextChûd
( clch );

402 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
( ch );

404 
	`SëCª©ed
();

409 
UI¡_t
 
˛assödex
, 
v¨ödex
, 
tgtödex
, 
nv¨s
, 
¡gts
;

411 
	`gToﬁs
().
	`RódAâr
(
å‚ode
, "NV¨übÀs", 
nv¨s
);

413 
	`gToﬁs
().
	`RódAâr
(
å‚ode
, "NT¨gës", 
¡gts
);

416  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ){

417 
fGë
.
	`push_back
(
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
));

419  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ){

420 
fGë
.
	`push_back
(
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
));

422 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
å‚ode
 );

423 
ch
) {

424 
	`gToﬁs
().
	`RódAâr
(
ch
, "CœssIndex", 
˛assödex
);

426 
fMö
.
	`ªsize
(
˛assödex
+1);

427 
fMax
.
	`ªsize
(
˛assödex
+1);

428 
fMö
[
˛assödex
].
	`ªsize
(
nv¨s
+
¡gts
,
	`Flﬂt_t
(0));

429 
fMax
[
˛assödex
].
	`ªsize
(
nv¨s
+
¡gts
,
	`Flﬂt_t
(0));

431 * 
˛ch
 = 
	`gToﬁs
().
	`GëChûd
–
ch
 );

432 
˛ch
) {

433 
TSåög
 
	`nodeName
(
	`gToﬁs
().
	`GëName
(
˛ch
));

434 if(
nodeName
=="Variables") {

435 * 
v¨ch
 = 
	`gToﬁs
().
	`GëChûd
–
˛ch
 );

436 
v¨ch
) {

437 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "V¨Index", 
v¨ödex
);

438 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "Mö", 
fMö
[
˛assödex
][
v¨ödex
]);

439 
	`gToﬁs
().
	`RódAâr
(
v¨ch
, "Max", 
fMax
[
˛assödex
][
v¨ödex
]);

440 
v¨ch
 = 
	`gToﬁs
().
	`GëNextChûd
( varch );

442 } i‡(
nodeName
=="Targets") {

443 * 
tgtch
 = 
	`gToﬁs
().
	`GëChûd
–
˛ch
 );

444 
tgtch
) {

445 
	`gToﬁs
().
	`RódAâr
(
tgtch
, "T¨gëIndex", 
tgtödex
);

446 
	`gToﬁs
().
	`RódAâr
(
tgtch
, "Mö", 
fMö
[
˛assödex
][
nv¨s
+
tgtödex
]);

447 
	`gToﬁs
().
	`RódAâr
(
tgtch
, "Max", 
fMax
[
˛assödex
][
nv¨s
+
tgtödex
]);

448 
tgtch
 = 
	`gToﬁs
().
	`GëNextChûd
(Ågtch );

451 
˛ch
 = 
	`gToﬁs
().
	`GëNextChûd
( clch );

453 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
( ch );

455 
	`SëCª©ed
();

456 
	}
}

463 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
BuûdTønsf‹m©i⁄FromV¨Info
–c⁄° 
°d
::
ve˘‹
<
TMVA
::
V¨übÀInfo
>& 
v¨
 )

465 
UI¡_t
 
nv¨s
 = 
GëNV¨übÀs
();

467 if(
	gv¨
.
size
(Ë!
nv¨s
)

468 
Log
(Ë<< 
kFATAL
 << "<BuildTransformationFromVarInfo> can't buildÅransformation,"

469 << " sö˚Åhênumbî o‡v¨übÀ†dißgªe" << 
Endl
;

471 
UI¡_t
 
	gnumC
 = (
GëNCœs£s
()<=1)?1:GetNClasses()+1;

472 
	gfMö
.
˛ór
();fMö.
ªsize
–
numC
 );

473 
	gfMax
.
˛ór
();fMax.
ªsize
–
numC
 );

476 
UI¡_t
 
	g˛s
=0; cls<
	gnumC
; ++cls) {

477 
	gfMö
[
˛s
].
ªsize
(
nv¨s
+
GëNT¨gës
(),0);

478 
	gfMax
[
˛s
].
ªsize
(
nv¨s
+
GëNT¨gës
(),0);

479 
UI¡_t
 
vidx
(0);

480 
	g°d
::
ve˘‹
<
TMVA
::
V¨übÀInfo
>::
c⁄°_ôî©‹
 
v
 = 
v¨
.
begö
(); 
	gv
!=v¨.
íd
(); ++v, ++
	gvidx
) {

481 
	gfMö
[
˛s
][
vidx
] = 
v
->
GëMö
();

482 
	gfMax
[
˛s
][
vidx
] = 
v
->
GëMax
();

483 
	gfGë
.
push_back
(
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
vidx
));

486 
SëCª©ed
();

492 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$RódTønsf‹m©i⁄FromSåóm
–
°d
::
i°ªam
& 
i°r
, c⁄° 
TSåög
& )

494 
UI¡_t
 
nv¨s
 = 
	`GëNV¨übÀs
();

495 
UI¡_t
 
¡gts
 = 
	`GëNT¨gës
();

496  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ){

497 
fGë
.
	`push_back
(
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
));

499  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ){

500 
fGë
.
	`push_back
(
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
));

502 
buf
[512];

503 
buf2
[512];

504 
i°r
.
	`gëlöe
(
buf
,512);

505 
TSåög
 
°rv¨
, 
dummy
;

506 
I¡_t
 
i˛s
;

507 
TSåög
 
ã°
;

508 !(
buf
[0]=='#'&& buf[1]=='#')) {

509 * 
p
 = 
buf
;

510 *
p
==' ' || *p=='\t')Ö++;

511 i‡(*
p
=='#' || *p=='\0') {

512 
i°r
.
	`gëlöe
(
buf
,512);

515 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

516 
s°r
 >> 
i˛s
;

517 
UI¡_t
 
iv¨
=0;iv¨<
nv¨s
;ivar++) {

518 
i°r
.
	`gëlöe
(
buf2
,512);

519 
°d
::
°rög°ªam
 
	`s°r2
(
buf2
);

520 
s°r2
 >> 
fMö
[
i˛s
][
iv¨
] >> 
fMax
[icls][ivar];

522 
UI¡_t
 
ôgt
=0;ôgt<
¡gts
;itgt++) {

523 
i°r
.
	`gëlöe
(
buf2
,512);

524 
°d
::
°rög°ªam
 
	`s°r2
(
buf2
);

525 
s°r2
 >> 
fMö
[
i˛s
][
nv¨s
+
ôgt
] >> 
fMax
[icls][nvars+itgt];

527 
i°r
.
	`gëlöe
(
buf
,512);

529 
	`SëCª©ed
();

530 
	}
}

535 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$PrötTønsf‹m©i⁄
–
°d
::
o°ªam
& )

537 
I¡_t
 
nCls
 = 
	`GëNCœs£s
();

538 
I¡_t
 
numC
 = 
nCls
+1;

539 i‡(
nCls
 <1 ) 
numC
 = 1;

540 
I¡_t
 
i˛s
 = 0; i˛†< 
numC
; icls++ ) {

541 if–
i˛s
 =
nCls
 )

542 
	`Log
(Ë<< 
kINFO
 << "Tønsf‹m©i⁄ f‹áŒ cœs£†ba£d o¿the£Ñ™ges:" << 
Endl
;

544 
	`Log
(Ë<< 
kINFO
 << "Tønsf‹m©i⁄ f‹ cœs†" << 
i˛s
 << " ba£d o¿the£Ñ™ges:" << 
Endl
;

545 
UI¡_t
 
iöp
 = 0;

546  
ItV¨Ty≥IdxC⁄°
 
ôGë
 = 
fGë
.
	`begö
(), 
ôGëEnd
 = fGë.
	`íd
(); itGet != itGetEnd; ++itGet ){

547 
Ch¨_t
 
ty≥
 = (*
ôGë
).
fú°
;

548 
UI¡_t
 
idx
 = (*
ôGë
).
£c⁄d
;

550 
TSåög
 
ty≥Såög
 = (
ty≥
=='v'?"Variable: ": (type=='t'?"Target : ":"Spectator : ") );

551 
	`Log
(Ë<< 
ty≥Såög
.
	`D©a
(Ë<< 
°d
::
	`£tw
(20Ë<< 
fMö
[
i˛s
][
idx
] << std::£tw(20Ë<< 
fMax
[i˛s][idx] << 
Endl
;

553 ++
iöp
;

556 
	}
}

562 
	gTMVA
::
V¨übÀN‹mÆizeTønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
f˙cName
,

563 
I¡_t
 
∑π
, 
UI¡_t
 
åCou¡î
, Int_t )

565 
UI¡_t
 
nV¨
 = 
fGë
.
	`size
();

566 
UI¡_t
 
numC
 = 
fMö
.
	`size
();

567 i‡(
∑π
==1) {

568 
fout
 << 
°d
::
ídl
;

569 
fout
 << " doubÀ fMö_"<<
åCou¡î
<<"["<<
numC
<<"]["<<
nV¨
<<"];" << 
°d
::
ídl
;

570 
fout
 << " doubÀ fMax_"<<
åCou¡î
<<"["<<
numC
<<"]["<<
nV¨
<<"];" << 
°d
::
ídl
;

573 i‡(
∑π
==2) {

574 
fout
 << 
°d
::
ídl
;

575 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

576 
fout
 << "ölöêvoid " << 
f˙cName
 << "::InôTønsf‹m_"<<
åCou¡î
<<"()" << 
°d
::
ídl
;

577 
fout
 << "{" << 
°d
::
ídl
;

578 
fout
 << " // N‹mÆiz©i⁄Åønsf‹m©i⁄, inôülißti⁄" << 
°d
::
ídl
;

579 
UI¡_t
 
iv¨
=0; iv¨<
nV¨
; ivar++) {

580 
UI¡_t
 
i˛s
 = 0; i˛†< 
numC
; icls++) {

581 
DoubÀ_t
 
mö
 = 
TM©h
::
	`Mö
–
FLT_MAX
, 
fMö
.
	`©
(
i˛s
).©(
iv¨
) );

582 
DoubÀ_t
 
max
 = 
TM©h
::
	`Max
(-
FLT_MAX
, 
fMax
.
	`©
(
i˛s
).©(
iv¨
) );

583 
fout
 << " fMö_"<<
åCou¡î
<<"["<<
i˛s
<<"]["<<
iv¨
<<"] = " << 
°d
::
	`£çªcisi⁄
(12)

584 << 
mö
 << ";" << 
°d
::
ídl
;

585 
fout
 << " fMax_"<<
åCou¡î
<<"["<<
i˛s
<<"]["<<
iv¨
<<"] = " << 
°d
::
	`£çªcisi⁄
(12)

586 << 
max
 << ";" << 
°d
::
ídl
;

589 
fout
 << "}" << 
°d
::
ídl
;

590 
fout
 << 
°d
::
ídl
;

591 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

592 
fout
 << "ölöêvoid " << 
f˙cName
 << "::Tønsf‹m_"<<
åCou¡î
<<"–°d::ve˘‹<doubÀ>& iv, i¡ clsËc⁄°" << 
°d
::
ídl
;

593 
fout
 << "{" << 
°d
::
ídl
;

594 
fout
 << " // N‹mÆiz©i⁄Åønsf‹m©i⁄" << 
°d
::
ídl
;

595 
fout
 << " i‡(˛†< 0 || cl†> "<<
	`GëNCœs£s
()<<"Ë{"<< 
°d
::
ídl
;

596 
fout
 << " i‡("<<
	`GëNCœs£s
()<<" > 1 ) cl†"<<GëNCœs£s()<<";"<< 
°d
::
ídl
;

597 
fout
 << "Él£ cl†"<<(
fMö
.
	`size
()==1?0:2)<<";"<< 
°d
::
ídl
;

598 
fout
 << " }"<< 
°d
::
ídl
;

599 
fout
 << " c⁄° i¡ÇV¨ = " << 
nV¨
 << ";" << 
°d
::
ídl
 << std::endl;

600 
fout
 << " // gë indi˚†o‡u£d v¨übÀs" << 
°d
::
ídl
;

601 
V¨übÀTønsf‹mBa£
::
	`MakeFun˘i⁄
(
fout
, 
f˙cName
, 0, 
åCou¡î
, 0 );

602 
fout
 << " sèti¯°d::ve˘‹<doubÀ> dv;" << 
°d
::
ídl
;

603 
fout
 << " dv.ªsize“V¨);" << 
°d
::
ídl
;

604 
fout
 << " f‹ (öàiv¨=0; iv¨<nV¨; iv¨++Ëdv[iv¨] = iv[ödi˚sGë.©(iv¨)];" << 
°d
::
ídl
;

606 
fout
 << " f‹ (öàiv¨=0;iv¨<"<<
nV¨
<<";iv¨++Ë{" << 
°d
::
ídl
;

607 
fout
 << " doubÀ off£àfMö_"<<
åCou¡î
<<"[˛s][iv¨];" << 
°d
::
ídl
;

608 
fout
 << " doubÀ sˇÀ = 1.0/(fMax_"<<
åCou¡î
<<"[˛s][iv¨]-fMö_"<<åCou¡î<<"[˛s][iv¨]);" << 
°d
::
ídl
;

609 
fout
 << " iv[ödi˚sPut.©(iv¨)] = (dv[iv¨]-off£t)*sˇÀ * 2 - 1;" << 
°d
::
ídl
;

610 
fout
 << " }" << 
°d
::
ídl
;

611 
fout
 << "}" << 
°d
::
ídl
;

613 
	}
}

	@src/VariablePCATransform.cxx

35 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

37 
	~"TMVA/D©aSë.h
"

38 
	~"TMVA/Evít.h
"

39 
	~"TMVA/MsgLoggî.h
"

40 
	~"TMVA/Toﬁs.h
"

41 
	~"TMVA/Ty≥s.h
"

43 
	~"TM©rixD.h
"

44 
	~"TM©rixDBa£.h
"

45 
	~"TPröcùÆ.h
"

46 
	~"TVe˘‹D.h
"

47 
	~"TVe˘‹F.h
"

49 
	~<io°ªam
>

50 
	~<iom™ù
>

51 
	~<°dex˚±
>

52 
	~<Æg‹ôhm
>

54 
CœssImp
(
TMVA
::
V¨übÀPCATønsf‹m
);

59 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$V¨übÀPCATønsf‹m
–
D©aSëInfo
& 
dsi
 )

60 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kPCA
, "PCA" )

62 
	}
}

67 
	gTMVA
::
V¨übÀPCATønsf‹m
::~
	$V¨übÀPCATønsf‹m
()

69 
UI¡_t
 
i
=0; i<
fMónVÆues
.
	`size
(); i++) {

70 i‡(
fMónVÆues
.
	`©
(
i
Ë!0Ë
dñëe
 fMeanValues.at(i);

71 i‡(
fEigíVe˘‹s
.
	`©
(
i
Ë!0Ë
dñëe
 fEigenVectors.at(i);

73 
	}
}

81 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$Inôülize
()

83 
	}
}

89 
Boﬁ_t
 
TMVA
::
V¨übÀPCATønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& 
evíts
)

91 
Inôülize
();

93 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
	gkTRUE
;

95 
Log
(Ë<< 
	gkINFO
 << "Pª∑rögÅhêPröcùÀ Comp⁄íà(PCAËå™sf‹m©i⁄..." << 
	gEndl
;

97 
UI¡_t
 
	göputSize
 = 
fGë
.
size
();

99 
SëNV¨übÀs
(
öputSize
);

102 i‡(
	göputSize
 <= 1) {

103 
Log
(Ë<< 
kFATAL
 << "C™nŸÖîf‹m PCAÅønsf‹m©i⁄ f‹ " << 
öputSize
 << " v¨übÀ o∆y" << 
Endl
;

104  
	gkFALSE
;

107 i‡(
	göputSize
 > 200) {

108 
Log
(Ë<< 
	gkINFO
 << "----------------------------------------------------------------------------"

109 << 
	gEndl
;

110 
Log
(Ë<< 
	gkINFO


111 << ": M‹êth™ 200 v¨übÀs, wû»nŸ cÆcuœã PCA!" << 
	gEndl
;

112 
Log
(Ë<< 
	gkINFO
 << "----------------------------------------------------------------------------"

113 << 
	gEndl
;

114  
	gkFALSE
;

117 
CÆcuœãPröcùÆComp⁄íts
–
evíts
 );

119 
SëCª©ed
–
kTRUE
 );

121  
	gkTRUE
;

127 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀPCATønsf‹m
::
	$Tønsf‹m
–c⁄° 
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

129 i‡(!
	`IsCª©ed
())  0;

140 i‡(
˛s
 < 0 || cl†>(Ë
fMónVÆues
.
	`size
()) cls = fMeanValues.size()-1;

145 i‡(
fTønsf‹medEvít
==0 ) {

146 
fTønsf‹medEvít
 = 
√w
 
	`Evít
();

149 
°d
::
ve˘‹
<
Flﬂt_t
> 
öput
;

150 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

151 
°d
::
ve˘‹
<
Flﬂt_t
> 
¥öcùÆComp⁄íts
;

153 
Boﬁ_t
 
hasMaskedE¡rõs
 = 
	`GëI≈ut
–
ev
, 
öput
, 
mask
 );

155 if–
hasMaskedE¡rõs
 ){

156 
UI¡_t
 
numMasked
 = 
°d
::
	`cou¡
(
mask
.
	`begö
(), mask.
	`íd
(), (
Ch¨_t
)
kTRUE
);

157 
UI¡_t
 
numOK
 = 
°d
::
	`cou¡
(
mask
.
	`begö
(), mask.
	`íd
(), (
Ch¨_t
)
kFALSE
);

158 if–
numMasked
>0 && 
numOK
>0 ){

159 
	`Log
(Ë<< 
kFATAL
 << "You mixed v¨übÀ†™dÅ¨gë†öÅhêdec‹ªœti⁄Åønsf‹m©i⁄. Thi†i†nŸÖossibÀ." << 
Endl
;

161 
	`SëOuçut
–
fTønsf‹medEvít
, 
öput
, 
mask
, 
ev
 );

162  
fTønsf‹medEvít
;

165 
	`X2P
–
¥öcùÆComp⁄íts
, 
öput
, 
˛s
 );

166 
	`SëOuçut
–
fTønsf‹medEvít
, 
¥öcùÆComp⁄íts
, 
mask
, 
ev
 );

168  
fTønsf‹medEvít
;

169 
	}
}

176 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀPCATønsf‹m
::
	$Invî£Tønsf‹m
–c⁄° 
Evít
* c⁄° 
ev
, 
I¡_t
 
˛s
 ) const

178 i‡(!
	`IsCª©ed
())  0;

180 c⁄° 
UI¡_t
 
nCls
 = 
	`GëNCœs£s
();

186 i‡(
˛s
 < 0 || 
	`UI¡_t
(˛sË> 
nCls
Ë˛†(
fMónVÆues
.
	`size
()==1?0:2);

189 i‡(
fBackTønsf‹medEvít
==0 ) fBackTønsf‹medEvíà
√w
 
	`Evít
();

191 
°d
::
ve˘‹
<
Flﬂt_t
> 
¥öcùÆComp⁄íts
;

192 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

193 
°d
::
ve˘‹
<
Flﬂt_t
> 
ouçut
;

195 
	`GëI≈ut
–
ev
, 
¥öcùÆComp⁄íts
, 
mask
, 
kTRUE
 );

196 
	`P2X
–
ouçut
, 
¥öcùÆComp⁄íts
, 
˛s
 );

197 
	`SëOuçut
–
fBackTønsf‹medEvít
, 
ouçut
, 
mask
, 
ev
, 
kTRUE
 );

199  
fBackTønsf‹medEvít
;

200 
	}
}

206 
	gTMVA
::
V¨übÀPCATønsf‹m
::
CÆcuœãPröcùÆComp⁄íts
–c⁄° 
°d
::
ve˘‹
< 
Evít
*>& 
evíts
 )

208 
UI¡_t
 
nv¨s
 = 0, 
	g¡gts
 = 0, 
	gn•˘s
 = 0;

209 
Cou¡V¨übÀTy≥s
–
nv¨s
, 
¡gts
, 
n•˘s
 );

210 if–
	gnv¨s
>0 && 
	g¡gts
>0 )

211 
Log
(Ë<< 
	gkFATAL
 << "V¨übÀ†™dÅ¨gë†ˇ¬Ÿ bêmixed i¿PCAÅønsf‹m©i⁄." << 
	gEndl
;

213 c⁄° 
I¡_t
 
	göputSize
 = 
fGë
.
size
();

216 c⁄° 
UI¡_t
 
	gnCls
 = 
GëNCœs£s
();

217 c⁄° 
UI¡_t
 
	gmaxPCA
 = (
nCls
<=1) ?ÇCls :ÇCls+1;

220 
	g°d
::
ve˘‹
<
TPröcùÆ
*> 
pˇ
(
maxPCA
);

221 
UI¡_t
 
	gi
=0; i<
	gmaxPCA
; i++Ë
	gpˇ
[
i
] = 
√w
 
TPröcùÆ
(
nv¨s
,"");

226 
L⁄g64_t
 
	gõvt
, 
	gíåõs
 = 
evíts
.
size
();

227 
DoubÀ_t
 *
	gdvec
 = 
√w
 DoubÀ_t[
öputSize
];

229 
	g°d
::
ve˘‹
<
Flﬂt_t
> 
öput
;

230 
	g°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

231 
	gõvt
=0; ievt<
	gíåõs
; ievt++) {

232 c⁄° 
Evít
* 
	gev
 = 
evíts
[
õvt
];

233 
UI¡_t
 
	g˛s
 = 
ev
->
GëCœss
();

235 
Boﬁ_t
 
	ghasMaskedE¡rõs
 = 
GëI≈ut
–
ev
, 
öput
, 
mask
 );

236 i‡(
	ghasMaskedE¡rõs
){

237 
Log
(Ë<< 
	gkWARNING
 << "PröàevíàwhichÅriggî†™Éº‹" << 
	gEndl
;

238 
	g°d
::
o°rög°ªam
 
oss
;

239 
	gev
->
Pröt
(
oss
);

240 
Log
(Ë<< 
	goss
.
°r
();

241 
Log
(Ë<< 
	gkFATAL
 << "MaskedÉ¡rõ†found i¿evíàªad i¿whí cÆcuœtögÅhê¥öcùÆ comp⁄ít†f‹ÅhêPCAÅønsf‹m©i⁄." << 
	gEndl
;

244 
UI¡_t
 
	giöp
 = 0;

245  
	g°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôI≈
 = 
öput
.
begö
(), 
	gôI≈End
 = i≈ut.
íd
(); 
	gôI≈
 !
ôI≈End
; ++itInp )

247 
Flﬂt_t
 
	gvÆue
 = (*
ôI≈
);

248 
	gdvec
[
iöp
] = (
DoubÀ_t
)
vÆue
;

249 ++
	giöp
;

252 
	gpˇ
.
©
(
˛s
)->
AddRow
–
dvec
 );

253 i‡(
	gnCls
 > 1Ë
	gpˇ
.
©
(
maxPCA
-1)->
AddRow
–
dvec
 );

257 
UI¡_t
 
	gi
=0; i<
	gfMónVÆues
.
size
(); i++Ëi‡(fMónVÆues[
i
] !0Ë
dñëe
 
fMónVÆues
[i];

258 
UI¡_t
 
	gi
=0; i<
	gfEigíVe˘‹s
.
size
(); i++Ëi‡(fEigíVe˘‹s[
i
] !0Ë
dñëe
 
fEigíVe˘‹s
[i];

259 
	gfMónVÆues
.
ªsize
(
maxPCA
,0);

260 
	gfEigíVe˘‹s
.
ªsize
(
maxPCA
,0);

262 
UI¡_t
 
	gi
=0; i<
	gmaxPCA
; i++ ) {

263 
	gpˇ
.
©
(
i
)->
MakePröcùÆs
();

266 
	gfMónVÆues
[
i
] = 
√w
 
TVe˘‹D
–*(
pˇ
.
©
(i)->
GëMónVÆues
()) );

267 
	gfEigíVe˘‹s
[
i
] = 
√w
 
TM©rixD
–*(
pˇ
.
©
(i)->
GëEigíVe˘‹s
()) );

270 
UI¡_t
 
	gi
=0; i<
	gmaxPCA
; i++Ë
dñëe
 
	gpˇ
.
©
(
i
);

271 
	gdñëe
 [] 
	gdvec
;

280 
	gTMVA
::
V¨übÀPCATønsf‹m
::
X2P
–
°d
::
ve˘‹
<
Flﬂt_t
>& 
pc
, c⁄° std::ve˘‹<Flﬂt_t>& 
x
, 
I¡_t
 
˛s
 ) const

282 c⁄° 
I¡_t
 
	gnI≈ut
 = 
x
.
size
();

283 
	gpc
.
assign
(
nI≈ut
,0);

285 
I¡_t
 
	gi
 = 0; i < 
	gnI≈ut
; i++) {

286 
DoubÀ_t
 
	gpv
 = 0;

287 
I¡_t
 
	gj
 = 0; j < 
	gnI≈ut
; j++)

288 
	gpv
 +(((
DoubÀ_t
)
x
.
©
(
j
)Ë- (*
fMónVÆues
.©(
˛s
))(j)Ë* (*
fEigíVe˘‹s
.©(˛s))(j,
	gi
);

289 
	gpc
[
i
] = 
pv
;

299 
	gTMVA
::
V¨übÀPCATønsf‹m
::
P2X
–
°d
::
ve˘‹
<
Flﬂt_t
>& 
x
, c⁄° std::ve˘‹<Flﬂt_t>& 
pc
, 
I¡_t
 
˛s
 ) const

301 c⁄° 
I¡_t
 
	gnI≈ut
 = 
pc
.
size
();

302 
	gx
.
assign
(
nI≈ut
,0);

304 
I¡_t
 
	gi
 = 0; i < 
	gnI≈ut
; i++) {

305 
DoubÀ_t
 
	gxv
 = 0;

306 
I¡_t
 
	gj
 = 0; j < 
	gnI≈ut
; j++)

307 
	gxv
 +(((
DoubÀ_t
)
pc
.
©
(
j
)Ë* (*
fEigíVe˘‹s
.©(
˛s
))(
i
,
	gj
ËË+ (*
	gfMónVÆues
.at(cls))(j);

308 
	gx
[
i
] = 
xv
;

315 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$WrôeTønsf‹m©i⁄ToSåóm
–
°d
::
o°ªam
& 
o
 ) const

317 
I¡_t
 
sbTy≥
=0; sbType<2; sbType++) {

318 
o
 << "# PCA mó¿vÆue†" << 
°d
::
ídl
;

319 c⁄° 
TVe˘‹D
* 
móns
 = 
fMónVÆues
[
sbTy≥
];

320 
o
 << (
sbTy≥
==0 ? "Sig«l" : "Background"Ë<< " " << 
móns
->
	`GëNrows
(Ë<< 
°d
::
ídl
;

321 
I¡_t
 
row
 = 0;Ñow<
móns
->
	`GëNrows
();Ñow++) {

322 
o
 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< (*
móns
)[
row
];

324 
o
 << 
°d
::
ídl
;

326 
o
 << "##" << 
°d
::
ídl
;

329 
I¡_t
 
sbTy≥
=0; sbType<2; sbType++) {

330 
o
 << "# PCAÉigíve˘‹†" << 
°d
::
ídl
;

331 c⁄° 
TM©rixD
* 
m©
 = 
fEigíVe˘‹s
[
sbTy≥
];

332 
o
 << (
sbTy≥
==0 ? "Sig«l" : "Background"Ë<< " " << 
m©
->
	`GëNrows
(Ë<< " x " << m©->
	`GëNcﬁs
(Ë<< 
°d
::
ídl
;

333 
I¡_t
 
row
 = 0;Ñow<
m©
->
	`GëNrows
();Ñow++) {

334 
I¡_t
 
cﬁ
 = 0; cﬁ<
m©
->
	`GëNcﬁs
(); col++) {

335 
o
 << 
°d
::
	`£çªcisi⁄
(12Ë<< std::
	`£tw
(20Ë<< (*
m©
)[
row
][
cﬁ
] << " ";

337 
o
 << 
°d
::
ídl
;

340 
o
 << "##" << 
°d
::
ídl
;

341 
	}
}

346 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$AâachXMLTo
(* 
∑ª¡
) {

347 * 
åfxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transform");

348 
	`gToﬁs
().
	`AddAâr
(
åfxml
, "Name", "PCA");

350 
V¨übÀTønsf‹mBa£
::
	`AâachXMLTo
–
åfxml
 );

353 
UI¡_t
 
sbTy≥
=0; sbTy≥<
fMónVÆues
.
	`size
(); sbType++) {

354 * 
mónxml
 = 
	`gToﬁs
().
	`AddChûd
–
åfxml
, "Statistics");

355 c⁄° 
TVe˘‹D
* 
móns
 = 
fMónVÆues
[
sbTy≥
];

356 
	`gToﬁs
().
	`AddAâr
–
mónxml
, "Cœss", (
sbTy≥
==0 ? "Signal" :(sbType==1 ? "Background":"Combined")) );

357 
	`gToﬁs
().
	`AddAâr
–
mónxml
, "CœssIndex", 
sbTy≥
 );

358 
	`gToﬁs
().
	`AddAâr
–
mónxml
, "NRows", 
móns
->
	`GëNrows
() );

359 
TSåög
 
mónsdef
 = "";

360 
I¡_t
 
row
 = 0;Ñow<
móns
->
	`GëNrows
();Ñow++)

361 
mónsdef
 +
	`gToﬁs
().
	`SåögFromDoubÀ
((*
móns
)[
row
]) + " ";

362 
	`gToﬁs
().
	`AddRawLöe
–
mónxml
, 
mónsdef
 );

366 
UI¡_t
 
sbTy≥
=0; sbTy≥<
fEigíVe˘‹s
.
	`size
(); sbType++) {

367 * 
evxml
 = 
	`gToﬁs
().
	`AddChûd
–
åfxml
, "Eigenvectors");

368 c⁄° 
TM©rixD
* 
m©
 = 
fEigíVe˘‹s
[
sbTy≥
];

369 
	`gToﬁs
().
	`AddAâr
–
evxml
, "Cœss", (
sbTy≥
==0 ? "Signal" :(sbType==1 ? "Background":"Combined") ) );

370 
	`gToﬁs
().
	`AddAâr
–
evxml
, "CœssIndex", 
sbTy≥
 );

371 
	`gToﬁs
().
	`AddAâr
–
evxml
, "NRows", 
m©
->
	`GëNrows
() );

372 
	`gToﬁs
().
	`AddAâr
–
evxml
, "NCﬁs", 
m©
->
	`GëNcﬁs
() );

373 
TSåög
 
evdef
 = "";

374 
I¡_t
 
row
 = 0;Ñow<
m©
->
	`GëNrows
();Ñow++)

375 
I¡_t
 
cﬁ
 = 0; cﬁ<
m©
->
	`GëNcﬁs
(); col++)

376 
evdef
 +
	`gToﬁs
().
	`SåögFromDoubÀ
((*
m©
)[
row
][
cﬁ
]) + " ";

377 
	`gToﬁs
().
	`AddRawLöe
–
evxml
, 
evdef
 );

379 
	}
}

384 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$RódFromXML
–* 
å‚ode
 )

386 
I¡_t
 
ƒows
, 
ncﬁs
;

387 
UI¡_t
 
˛sIdx
;

388 
TSåög
 
˛as°y≥
;

389 
TSåög
 
nodeName
;

391 
Boﬁ_t
 
√wF‹m©
 = 
kFALSE
;

393 * 
ö≤ode
 = 
NULL
;

395 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
, "Selection");

396 if–
ö≤ode
!=
NULL
 )

397 
√wF‹m©
 = 
kTRUE
;

399 if–
√wF‹m©
 ){

402 
V¨übÀTønsf‹mBa£
::
	`RódFromXML
–
ö≤ode
 );

406 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
);

407 
ch
) {

408 
nodeName
 = 
	`gToﬁs
().
	`GëName
(
ch
);

409 i‡(
nodeName
 == "Statistics") {

411 
	`gToﬁs
().
	`RódAâr
(
ch
, "Cœss", 
˛as°y≥
);

412 
	`gToﬁs
().
	`RódAâr
(
ch
, "CœssIndex", 
˛sIdx
);

413 
	`gToﬁs
().
	`RódAâr
(
ch
, "NRows", 
ƒows
);

416 i‡(
fMónVÆues
.
	`size
()<=
˛sIdx
ËfMónVÆues.
	`ªsize
(clsIdx+1,0);

417 i‡(
fMónVÆues
[
˛sIdx
]==0ËfMónVÆues[˛sIdx] = 
√w
 
	`TVe˘‹D
–
ƒows
 );

418 
fMónVÆues
[
˛sIdx
]->
	`ResizeTo
–
ƒows
 );

421 
°d
::
°rög°ªam
 
	`s
(
	`gToﬁs
().
	`GëC⁄ã¡
(
ch
));

422 
I¡_t
 
row
 = 0;Ñow<
ƒows
;Ñow++Ë
s
 >> (*
fMónVÆues
[
˛sIdx
])(row);

424 i‡–
nodeName
 == "Eigenvectors" ) {

426 
	`gToﬁs
().
	`RódAâr
(
ch
, "Cœss", 
˛as°y≥
);

427 
	`gToﬁs
().
	`RódAâr
(
ch
, "CœssIndex", 
˛sIdx
);

428 
	`gToﬁs
().
	`RódAâr
(
ch
, "NRows", 
ƒows
);

429 
	`gToﬁs
().
	`RódAâr
(
ch
, "NCﬁs", 
ncﬁs
);

431 i‡(
fEigíVe˘‹s
.
	`size
()<=
˛sIdx
ËfEigíVe˘‹s.
	`ªsize
(clsIdx+1,0);

432 i‡(
fEigíVe˘‹s
[
˛sIdx
]==0ËfEigíVe˘‹s[˛sIdx] = 
√w
 
	`TM©rixD
–
ƒows
, 
ncﬁs
 );

433 
fEigíVe˘‹s
[
˛sIdx
]->
	`ResizeTo
–
ƒows
, 
ncﬁs
 );

436 
°d
::
°rög°ªam
 
	`s
(
	`gToﬁs
().
	`GëC⁄ã¡
(
ch
));

437 
I¡_t
 
row
 = 0;Ñow<
ƒows
;Ñow++)

438 
I¡_t
 
cﬁ
 = 0; cﬁ<
ncﬁs
; col++)

439 
s
 >> (*
fEigíVe˘‹s
[
˛sIdx
])[
row
][
cﬁ
];

441 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
(ch);

444 
	`SëCª©ed
();

445 
	}
}

450 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$RódTønsf‹m©i⁄FromSåóm
–
°d
::
i°ªam
& 
i°r
, c⁄° 
TSåög
& 
˛as¢ame
 )

452 
buf
[512];

453 
i°r
.
	`gëlöe
(
buf
,512);

454 
TSåög
 
°rv¨
, 
dummy
;

455 
I¡_t
 
	`ƒows
(0), 
	`ncﬁs
(0);

456 
UI¡_t
 
˛assIdx
=(
˛as¢ame
=="signal"?0:1);

458 
UI¡_t
 
i
=0; i<
fMónVÆues
.
	`size
(); i++) {

459 i‡(
fMónVÆues
.
	`©
(
i
Ë!0Ë
dñëe
 fMeanValues.at(i);

460 i‡(
fEigíVe˘‹s
.
	`©
(
i
Ë!0Ë
dñëe
 fEigenVectors.at(i);

462 
fMónVÆues
.
	`ªsize
(3);

463 
fEigíVe˘‹s
.
	`ªsize
(3);

465 
	`Log
(Ë<< 
kINFO
 << "V¨übÀPCATønsf‹m::RódTønsf‹m©i⁄FromSåóm(): " << 
Endl
;

467 !(
buf
[0]=='#'&& buf[1]=='#')) {

468 * 
p
 = 
buf
;

469 *
p
==' ' || *p=='\t')Ö++;

470 i‡(*
p
=='#' || *p=='\0') {

471 
i°r
.
	`gëlöe
(
buf
,512);

474 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

475 
s°r
 >> 
°rv¨
;

476 i‡(
°rv¨
=="signal" || strvar=="background") {

478 
s°r
 >> 
ƒows
;

479 
I¡_t
 
sbTy≥
 = (
°rv¨
=="signal" ? 0 : 1);

481 i‡(
fMónVÆues
[
sbTy≥
] =0ËfMónVÆues[sbTy≥] = 
√w
 
	`TVe˘‹D
–
ƒows
 );

482 
fMónVÆues
[
sbTy≥
]->
	`ResizeTo
–
ƒows
 );

485 
I¡_t
 
row
 = 0;Ñow<
ƒows
;Ñow++Ë
i°r
 >> (*
fMónVÆues
[
sbTy≥
])(row);

489 
i°r
.
	`gëlöe
(
buf
,512);

493 
i°r
.
	`gëlöe
(
buf
,512);

494 !(
buf
[0]=='#'&& buf[1]=='#')) {

495 * 
p
 = 
buf
;

496 *
p
==' ' || *p=='\t')Ö++;

497 i‡(*
p
=='#' || *p=='\0') {

498 
i°r
.
	`gëlöe
(
buf
,512);

501 
°d
::
°rög°ªam
 
	`s°r
(
buf
);

502 
s°r
 >> 
°rv¨
;

503 i‡(
°rv¨
=="signal" || strvar=="background") {

506 
s°r
 >> 
ƒows
 >> 
dummy
 >> 
ncﬁs
;

507 
I¡_t
 
sbTy≥
 = (
°rv¨
=="signal" ? 0 : 1);

509 i‡(
fEigíVe˘‹s
[
sbTy≥
] =0ËfEigíVe˘‹s[sbTy≥] = 
√w
 
	`TM©rixD
–
ƒows
, 
ncﬁs
 );

510 
fEigíVe˘‹s
[
sbTy≥
]->
	`ResizeTo
–
ƒows
, 
ncﬁs
 );

513 
I¡_t
 
row
 = 0;Ñow<
fEigíVe˘‹s
[
sbTy≥
]->
	`GëNrows
();Ñow++) {

514 
I¡_t
 
cﬁ
 = 0; cﬁ<
fEigíVe˘‹s
[
sbTy≥
]->
	`GëNcﬁs
(); col++) {

515 
i°r
 >> (*
fEigíVe˘‹s
[
sbTy≥
])[
row
][
cﬁ
];

520 
i°r
.
	`gëlöe
(
buf
,512);

522 
fMónVÆues
[2] = 
√w
 
	`TVe˘‹D
–*fMónVÆues[
˛assIdx
] );

523 
fEigíVe˘‹s
[2] = 
√w
 
	`TM©rixD
–*fEigíVe˘‹s[
˛assIdx
] );

525 
	`SëCª©ed
();

526 
	}
}

531 
	gTMVA
::
V¨übÀPCATønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& 
f˙cName
,

532 
I¡_t
 
∑π
, 
UI¡_t
 
åCou¡î
, Int_t )

534 
UI¡_t
 
nv¨
 = 
fEigíVe˘‹s
[0]->
	`GëNrows
();

537 
UI¡_t
 
numC
 = 
fMónVÆues
.
	`size
();

538 i‡(
∑π
==1) {

539 
fout
 << 
°d
::
ídl
;

540 
fout
 << " void X2P_"<<
åCou¡î
<<"–c⁄° doubÀ*, doubÀ*, i¡ ) c⁄°;" << 
°d
::
ídl
;

541 
fout
 << " doubÀ fMónVÆues_"<<
åCou¡î
<<"["<<
numC
<<"]["

542 << 
fMónVÆues
[0]->
	`GëNrows
(Ë<< "];" << 
°d
::
ídl
;

543 
fout
 << " doubÀ fEigíVe˘‹s_"<<
åCou¡î
<<"["<<
numC
<<"]["

544 << 
fEigíVe˘‹s
[0]->
	`GëNrows
() << "]["

545 << 
fEigíVe˘‹s
[0]->
	`GëNcﬁs
(Ë<<"];" << 
°d
::
ídl
;

546 
fout
 << 
°d
::
ídl
;

550 i‡(
numC
>1){

551 i‡(
fMónVÆues
[0]->
	`GëNrows
() != fMeanValues[1]->GetNrows() ||

552 
fEigíVe˘‹s
[0]->
	`GëNrows
() != fEigenVectors[1]->GetNrows() ||

553 
fEigíVe˘‹s
[0]->
	`GëNcﬁs
() != fEigenVectors[1]->GetNcols()) {

554 
	`Log
(Ë<< 
kFATAL
 << "<MakeFun˘i⁄> Mism©ch i¿ve˘‹/m©rix dimísi⁄s" << 
Endl
;

558 i‡(
∑π
==2) {

560 
fout
 << 
°d
::
ídl
;

561 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

562 
fout
 << "ölöêvoid " << 
f˙cName
 << "::X2P_"<<
åCou¡î
<<"–c⁄° doubÀ* x, doubÀ*Ö, i¡ index ) c⁄°" << 
°d
::
ídl
;

563 
fout
 << "{" << 
°d
::
ídl
;

564 
fout
 << " // CÆcuœãÅhê¥öcùÆ comp⁄ít†‰omÅhê‹igöÆ d©®ve˘‹" << 
°d
::
ídl
;

565 
fout
 << " // x,ándÑëu∫ iàöÖ (fun˘i⁄Éxåa˘ed from TPröcùÆ::X2P)" << 
°d
::
ídl
;

566 
fout
 << " // It'†thêu£r†ª•⁄sibûôyÅÿmakêsuªÅh© bŸh xándÖáª" << 
°d
::
ídl
;

567 
fout
 << " // o‡thêrighàsizê(i.e., mem‹y mu° bêÆloˇãd f‹Ö)." << 
°d
::
ídl
;

568 
fout
 << " c⁄° i¡ÇV¨ = " << 
nv¨
 << ";" << 
°d
::
ídl
;

569 
fout
 << 
°d
::
ídl
;

570 
fout
 << " f‹ (öàò0; i <ÇV¨; i++Ë{" << 
°d
::
ídl
;

571 
fout
 << "Ö[i] = 0;" << 
°d
::
ídl
;

572 
fout
 << " f‹ (öàj = 0; j <ÇV¨; j++Ëp[i] +(x[j] - fMónVÆues_"<<
åCou¡î
<<"[ödex][j]Ë* fEigíVe˘‹s_"<<åCou¡î<<"[ödex][j][i];" << 
°d
::
ídl
;

573 
fout
 << " }" << 
°d
::
ídl
;

574 
fout
 << "}" << 
°d
::
ídl
;

575 
fout
 << 
°d
::
ídl
;

576 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

577 
fout
 << "ölöêvoid " << 
f˙cName
 << "::InôTønsf‹m_"<<
åCou¡î
<<"()" << 
°d
::
ídl
;

578 
fout
 << "{" << 
°d
::
ídl
;

579 
fout
 << " // PCAÅønsf‹m©i⁄, inôülißti⁄" << 
°d
::
ídl
;

582 
fout
 << " // inôüli£ ve˘‹ o‡mó¿vÆues" << 
°d
::
ídl
;

583 
°d
::
°ªamsize
 
dp
 = 
fout
.
	`¥ecisi⁄
();

584 
UI¡_t
 
ödex
=0; index<
numC
; index++) {

585 
i
=0; i<
fMónVÆues
[
ödex
]->
	`GëNrows
(); i++) {

586 
fout
 << " fMónVÆues_"<<
åCou¡î
<<"["<<
ödex
<<"]["<<
i
<<"] = " << 
°d
::
	`£çªcisi⁄
(12)

587 << (*
fMónVÆues
[
ödex
])(
i
Ë<< ";" << 
°d
::
ídl
;

592 
fout
 << 
°d
::
ídl
;

593 
fout
 << " // inôüli£ m©rix o‡eigíve˘‹s" << 
°d
::
ídl
;

594 
UI¡_t
 
ödex
=0; index<
numC
; index++) {

595 
i
=0; i<
fEigíVe˘‹s
[
ödex
]->
	`GëNrows
(); i++) {

596 
j
=0; j<
fEigíVe˘‹s
[
ödex
]->
	`GëNcﬁs
(); j++) {

597 
fout
 << " fEigíVe˘‹s_"<<
åCou¡î
<<"["<<
ödex
<<"]["<<
i
<<"]["<<
j
<<"] = " << 
°d
::
	`£çªcisi⁄
(12)

598 << (*
fEigíVe˘‹s
[
ödex
])(
i
,
j
Ë<< ";" << 
°d
::
ídl
;

602 
fout
 << 
°d
::
	`£çªcisi⁄
(
dp
);

603 
fout
 << "}" << 
°d
::
ídl
;

604 
fout
 << 
°d
::
ídl
;

605 
fout
 << "//_______________________________________________________________________" << 
°d
::
ídl
;

606 
fout
 << "ölöêvoid " << 
f˙cName
 << "::Tønsf‹m_"<<
åCou¡î
<<"–°d::ve˘‹<doubÀ>& iv, i¡ cl†Ëc⁄°" << 
°d
::
ídl
;

607 
fout
 << "{" << 
°d
::
ídl
;

608 
fout
 << " // PCAÅønsf‹m©i⁄" << 
°d
::
ídl
;

609 
fout
 << " c⁄° i¡ÇV¨ = " << 
nv¨
 << ";" << 
°d
::
ídl
;

610 
fout
 << " doubÀ *dv =Çew doubÀ[nV¨];" << 
°d
::
ídl
;

611 
fout
 << " doubÀ *rv =Çew doubÀ[nV¨];" << 
°d
::
ídl
;

612 
fout
 << " i‡(˛†< 0 || cl†> "<<
	`GëNCœs£s
()<<"Ë{"<< 
°d
::
ídl
;

613 
fout
 << " i‡("<<
	`GëNCœs£s
()<<" > 1 ) cl†"<<GëNCœs£s()<<";"<< 
°d
::
ídl
;

614 
fout
 << "Él£ cl†"<<(
numC
==1?0:2)<<";"<< 
°d
::
ídl
;

615 
fout
 << " }"<< 
°d
::
ídl
;

617 
V¨übÀTønsf‹mBa£
::
	`MakeFun˘i⁄
(
fout
, 
f˙cName
, 0, 
åCou¡î
, 0 );

619 
fout
 << " f‹ (öàiv¨=0; iv¨<nV¨; iv¨++Ëdv[iv¨] = iv[ödi˚sGë.©(iv¨)];" << 
°d
::
ídl
;

621 
fout
 << 
°d
::
ídl
;

622 
fout
 << " // Pîf‹m PCAándÖuàô i¡ÿPCAedÉvít†åì" << 
°d
::
ídl
;

623 
fout
 << "Åhis->X2P_"<<
åCou¡î
<<"–dv,Ñv, cl†);" << 
°d
::
ídl
;

624 
fout
 << " f‹ (öàiv¨=0; iv¨<nV¨; iv¨++Ëiv[ödi˚sPut.©(iv¨)] =Ñv[iv¨];" << 
°d
::
ídl
;

626 
fout
 << 
°d
::
ídl
;

627 
fout
 << " dñëê[] dv;" << 
°d
::
ídl
;

628 
fout
 << " dñëê[]Ñv;" << 
°d
::
ídl
;

629 
fout
 << "}" << 
°d
::
ídl
;

631 
	}
}

	@src/VariableRearrangeTransform.cxx

30 
	~"TMVA/V¨übÀRóº™geTønsf‹m.h
"

32 
	~"TMVA/D©aSë.h
"

33 
	~"TMVA/Evít.h
"

34 
	~"TMVA/MsgLoggî.h
"

35 
	~"TMVA/Toﬁs.h
"

36 
	~"TMVA/Ty≥s.h
"

38 
	~<io°ªam
>

39 
	~<iom™ù
>

40 
	~<°dex˚±
>

42 
CœssImp
(
TMVA
::
V¨übÀRóº™geTønsf‹m
);

47 
	gTMVA
::
V¨übÀRóº™geTønsf‹m
::
	$V¨übÀRóº™geTønsf‹m
–
D©aSëInfo
& 
dsi
 )

48 : 
	`V¨übÀTønsf‹mBa£
–
dsi
, 
Ty≥s
::
kRóº™ged
, "Rearrange" )

50 
	}
}

54 
	gTMVA
::
V¨übÀRóº™geTønsf‹m
::~
	$V¨übÀRóº™geTønsf‹m
() {

55 
	}
}

61 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
	$Inôülize
()

63 
	}
}

68 
Boﬁ_t
 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
Pª∑ªTønsf‹m©i⁄
 (c⁄° 
°d
::
ve˘‹
<
Evít
*>& )

70 i‡(!
IsE«bÀd
(Ë|| 
IsCª©ed
()Ë 
kTRUE
;

72 
UI¡_t
 
	gnv¨s
 = 0, 
	g¡gts
 = 0, 
	gn•˘s
 = 0;

73 
Cou¡V¨übÀTy≥s
–
nv¨s
, 
¡gts
, 
n•˘s
 );

74 i‡(
	g¡gts
>0Ë
Log
(Ë<< 
	gkFATAL
 << "T¨gë†u£d i¿Róº™ge-å™sf‹m©i⁄." << 
	gEndl
;

76 
SëCª©ed
–
kTRUE
 );

77  
	gkTRUE
;

82 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
	$Tønsf‹m
–c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 ) const

84 i‡(!
	`IsE«bÀd
()Ë 
ev
;

87 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

89 i‡(
fTønsf‹medEvít
==0ËfTønsf‹medEvíà
√w
 
	`Evít
();

91 
FlﬂtVe˘‹
 
öput
;

92 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

93 
	`GëI≈ut
–
ev
, 
öput
, 
mask
 );

94 
	`SëOuçut
–
fTønsf‹medEvít
, 
öput
, 
mask
, 
ev
 );

96  
fTønsf‹medEvít
;

97 
	}
}

101 c⁄° 
	gTMVA
::
Evít
* 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
	$Invî£Tønsf‹m
–c⁄° 
TMVA
::
Evít
* c⁄° 
ev
, 
I¡_t
 ) const

103 i‡(!
	`IsE«bÀd
()Ë 
ev
;

106 i‡(!
	`IsCª©ed
()Ë
	`Log
(Ë<< 
kFATAL
 << "Tønsf‹m©i⁄ÇŸ yë cª©ed" << 
Endl
;

108 i‡(
fBackTønsf‹medEvít
==0ËfBackTønsf‹medEvíà
√w
 
	`Evít
–*
ev
 );

110 
FlﬂtVe˘‹
 
öput
;

111 
°d
::
ve˘‹
<
Ch¨_t
> 
mask
;

112 
	`GëI≈ut
–
ev
, 
öput
, 
mask
, 
kTRUE
 );

113 
	`SëOuçut
–
fBackTønsf‹medEvít
, 
öput
, 
mask
, 
ev
, 
kTRUE
 );

115  
fBackTønsf‹medEvít
;

116 
	}
}

122 
	g°d
::
ve˘‹
<
TSåög
>* 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
	$GëTønsf‹m©i⁄Såögs
–
I¡_t
 ) const

124 c⁄° 
UI¡_t
 
size
 = 
fGë
.
	`size
();

125 
°d
::
ve˘‹
<
TSåög
>* 
°rVec
 = 
√w
 std::ve˘‹<TSåög>(
size
);

127  
°rVec
;

128 
	}
}

133 
	gTMVA
::
V¨übÀRóº™geTønsf‹m
::
	$AâachXMLTo
(* 
∑ª¡
)

135 * 
åfxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Transform");

136 
	`gToﬁs
().
	`AddAâr
(
åfxml
, "Name", "Rearrange");

138 
V¨übÀTønsf‹mBa£
::
	`AâachXMLTo
–
åfxml
 );

139 
	}
}

144 
	gTMVA
::
V¨übÀRóº™geTønsf‹m
::
	$RódFromXML
–* 
å‚ode
 )

147 * 
ö≤ode
 = 
NULL
;

149 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
(
å‚ode
, "Selection");

150 if(
ö≤ode
 =
NULL
)

151 
	`Log
(Ë<< 
kFATAL
 << "Unknow¿weighàfûêf‹m© f‹Åønsf‹m©i⁄s. (åõdÅÿªad i¿'ª¨ønge'Åønsf‹m)" << 
Endl
;

153 
V¨übÀTønsf‹mBa£
::
	`RódFromXML
–
ö≤ode
 );

155 
	`SëCª©ed
();

156 
	}
}

161 
	gTMVA
::
V¨übÀRóº™geTønsf‹m
::
	$PrötTønsf‹m©i⁄
–
°d
::
o°ªam
& )

163 
	}
}

168 
TMVA
::
V¨übÀRóº™geTønsf‹m
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& , c⁄° 
TSåög
& ,

169 
I¡_t
 , 
UI¡_t
 , Int_t )

171 
	}
}

	@src/VariableTransform.cxx

28 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

29 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

30 
	~"TMVA/V¨übÀIdítôyTønsf‹m.h
"

31 
	~"TMVA/V¨übÀDec‹rTønsf‹m.h
"

32 
	~"TMVA/V¨übÀInfo.h
"

33 
	~"TMVA/V¨übÀPCATønsf‹m.h
"

34 
	~"TMVA/V¨übÀGaussTønsf‹m.h
"

35 
	~"TMVA/V¨übÀN‹mÆizeTønsf‹m.h
"

37 
	~"TMVA/C⁄fig.h
"

38 
	~"TMVA/D©aSëInfo.h
"

39 
	~"TMVA/MsgLoggî.h
"

40 
	~"TMVA/R™kög.h
"

41 
	~"TMVA/Toﬁs.h
"

42 
	~"TMVA/Ty≥s.h
"

43 
	~"TMVA/V¨übÀInfo.h
"

44 
	~"TMVA/Vîsi⁄.h
"

45 
	~"TMVA/Tønsf‹m©i⁄H™dÀr.h
"

46 
	~"TMVA/MsgLoggî.h
"

48 
	~"TH1.h
"

49 
	~"TH2.h
"

50 
	~"THashTabÀ.h
"

51 
	~"TLi°.h
"

52 
	~"TM©h.h
"

53 
	~"TProfûe.h
"

54 
	~"TVe˘‹D.h
"

56 
	~<Æg‹ôhm
>

57 
	~<ˇs£π
>

58 
	~<ex˚±i⁄
>

59 
	~<iom™ù
>

60 
	~<°dex˚±
>

61 
	~<£t
>

66 
«me•a˚
 
	gTMVA
 {

67 
Cª©eV¨übÀTønsf‹ms
–c⁄° 
TSåög
& 
åafoDeföôi⁄In
,

68 
TMVA
::
D©aSëInfo
& 
d©aInfo
,

69 
TMVA
::
Tønsf‹m©i⁄H™dÀr
& 
å™sf‹m©i⁄H™dÀr
,

70 
TMVA
::
MsgLoggî
& 
log
 )

72 
TSåög
 
åafoDeföôi⁄
(
åafoDeföôi⁄In
);

73 i‡(
	gåafoDeföôi⁄
 == "None") ;

77 
TSåög
 
åafoDeföôi⁄Check
(
åafoDeföôi⁄In
);

78 
	g≈¨tül
 = 0, 
	g¡øfo
=0;

79 
I¡_t
 
	gpos
 = 0, 
	gsiz
 = 
åafoDeföôi⁄
.
Sizeof
();Öos < siz; ++pos) {

80 
TSåög
 
	gch
 = 
åafoDeföôi⁄
(
pos
,1);

81 i‡–
	gch
 ="(" ) 
≈¨tül
++;

82 i‡–
	gch
 ="+" || 
ch
 =","Ë
¡øfo
++;

84 i‡(
	g≈¨tül
>1) {

85 
	glog
 << 
	gkWARNING
 << "Thêu£ o‡mu…ùÀÖ¨tü»v¨übÀÅønsf‹m©i⁄†durögÅhê≠∂iˇti⁄Öha£ c™ bê¥›îly invoked vüÅhê\"Ródî\", buàô i†nŸ yë im∂emíãd i¿\"MakeCœss\",Åhê¸óti⁄ mech™ism f‹ sèndÆ⁄êC++áµliˇti⁄ cœs£s. Thê°™dÆ⁄êC++ cœs†¥odu˚d byÅhi†åaöög job i†thu†INCOMPLETE AND MUST NOT BE USED! Thêå™sf‹m©i⁄ i¿que°i⁄ is: " << 
	gåafoDeföôi⁄In
 << 
	gEndl
;

93 
I¡_t
 
	g∑ª¡hesisCou¡
 = 0;

94 
I¡_t
 
	gposôi⁄
 = 0, 
	gsize
 = 
åafoDeföôi⁄
.
Sizeof
();Öosition < size; ++position) {

95 
TSåög
 
	gch
 = 
åafoDeföôi⁄
(
posôi⁄
,1);

96 i‡(
	gch
 ="("Ë++
∑ª¡hesisCou¡
;

97 i‡(
	gch
 =")"Ë--
∑ª¡hesisCou¡
;

98 i‡(
	gch
 ="," && 
∑ª¡hesisCou¡
 =0Ë
åafoDeföôi⁄
.
Rïœ˚
(
posôi⁄
,1,'+');

101 
TLi°
* 
	gåLi°
 = 
gToﬁs
().
P¨£F‹m©Löe
–
åafoDeföôi⁄
, "+" );

102 
TLi°Iãr
 
åIt
(
åLi°
);

103 
TObjSåög
* 
	gos
 = (TObjSåög*)
åIt
()) {

104 
TSåög
 
tdef
 = 
os
->
GëSåög
();

105 
I¡_t
 
	gidxCls
 = -1;

107 
TSåög
 
	gv¨übÀs
 = "";

108 i‡(
	gtdef
.
C⁄èös
("(")) {

109 
Ssiz_t
 
	g∑rSèπ
 = 
tdef
.
Index
( "(" );

110 
Ssiz_t
 
	g∑rLí
 = 
tdef
.
Index
–")", 
∑rSèπ
 )-
	g∑rSèπ
+1;

112 
	gv¨übÀs
 = 
tdef
(
∑rSèπ
,
∑rLí
);

113 
	gtdef
.
Remove
(
∑rSèπ
,
∑rLí
);

114 
	gv¨übÀs
.
Remove
(
∑rLí
-1,1);

115 
	gv¨übÀs
.
Remove
(0,1);

118 
TLi°
* 
	gåClsLi°
 = 
gToﬁs
().
P¨£F‹m©Löe
–
tdef
, "_" );

119 
TLi°Iãr
 
åClsIt
(
åClsLi°
);

120 i‡(
	gåClsLi°
->
GëSize
(Ë< 1Ë
	glog
 << 
	gkFATAL
 <<
F‹m
("D©a£t[%s] : ",
d©aInfo
.
GëName
())<< "Inc‹ª˘Åønsf‹m©i⁄ såögÖrovided." << 
	gEndl
;

121 c⁄° 
	gTSåög
& 
	gåName
 = ((
TObjSåög
*)
åClsLi°
->
At
(0))->
GëSåög
();

123 i‡(
	gåClsLi°
->
GëE¡rõs
() > 1) {

124 
TSåög
 
	gåCls
 = "AllClasses";

125 
CœssInfo
 *
	gci
 = 
NULL
;

126 
	gåCls
 = ((
TObjSåög
*)
åClsLi°
->
At
(1))->
GëSåög
();

127 i‡(
	gåCls
 != "AllClasses") {

128 
ci
 = 
d©aInfo
.
GëCœssInfo
–
åCls
 );

129 i‡(
	gci
 =
NULL
)

130 
log
 << 
kFATAL
 <<
F‹m
("D©a£t[%s] : ",
d©aInfo
.
GëName
())<< "Cœs†" << 
	gåCls
 << "Çot known for variableÅransformation "

131 << 
	gåName
 << ",ÖÀa£ check." << 
	gEndl
;

133 
	gidxCls
 = 
ci
->
GëNumbî
();

137 
V¨übÀTønsf‹mBa£
* 
	gå™sf‹m©i⁄
 = 
NULL
;

138 i‡(
	gåName
 ="I" || 
åName
 == "Ident" ||ÅrName == "Identity") {

139 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_";

140 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀIdítôyTønsf‹m
–
d©aInfo
);

142 i‡(
	gåName
 ="D" || 
åName
 == "Deco" ||ÅrName == "Decorrelate") {

143 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_";

144 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀDec‹rTønsf‹m
–
d©aInfo
);

146 i‡(
	gåName
 ="P" || 
åName
 == "PCA") {

147 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_";

148 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀPCATønsf‹m
 ( 
d©aInfo
);

150 i‡(
	gåName
 ="U" || 
åName
 == "Uniform") {

151 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_,_T_";

152 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀGaussTønsf‹m
 ( 
d©aInfo
, "Uniform" );

154 i‡(
	gåName
 ="G" || 
åName
 == "Gauss") {

155 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_";

156 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀGaussTønsf‹m
 ( 
d©aInfo
);

158 i‡(
	gåName
 ="N" || 
åName
 == "Norm" ||ÅrName == "Normalise" ||ÅrName == "Normalize") {

159 i‡(
v¨übÀs
.
Lígth
() == 0) variables = "_V_,_T_";

160 
	gå™sf‹m©i⁄
 = 
√w
 
V¨übÀN‹mÆizeTønsf‹m
–
d©aInfo
);

162 
	glog
 << 
	gkFATAL
 <<
F‹m
("D©a£t[%s] : ",
d©aInfo
.
GëName
())<< "<ProcessOptions> VariableÅransform '"

163 << 
	gåName
 << "' unknown." << 
	gEndl
;

166 i‡(
	gå™sf‹m©i⁄
) {

167 
CœssInfo
* 
	g˛sInfo
 = 
d©aInfo
.
GëCœssInfo
(
idxCls
);

168 i‡(
	g˛sInfo
 )

169 
	glog
 << 
	gkHEADER
 <<
F‹m
("[%s] : ",
d©aInfo
.
GëName
())

170 << "Cª©êTønsf‹m©i⁄ \"" << 
	gåName
 << "\" withÑeference class "

171 << 
	g˛sInfo
->
GëName
(Ë<< "=("<< 
	gidxCls
 <<")"<<
	gEndl
 << Endl;

173 
	glog
 << 
	gkHEADER
 <<
F‹m
("[%s] : ",
d©aInfo
.
GëName
())

174 << "Cª©êTønsf‹m©i⁄ \"" << 
	gåName
 << "\" wôhÉvít†‰omáŒ cœs£s." << 
	gEndl
 << Endl;

176 
	gå™sf‹m©i⁄
->
Sñe˘I≈ut
–
v¨übÀs
 );

177 
	gå™sf‹m©i⁄H™dÀr
.
AddTønsf‹m©i⁄
(
å™sf‹m©i⁄
, 
idxCls
);

	@src/VariableTransformBase.cxx

33 
	~"TMVA/V¨übÀTønsf‹mBa£.h
"

35 
	~"TMVA/C⁄fig.h
"

36 
	~"TMVA/D©aSëInfo.h
"

37 
	~"TMVA/MsgLoggî.h
"

38 
	~"TMVA/R™kög.h
"

39 
	~"TMVA/Toﬁs.h
"

40 
	~"TMVA/Ty≥s.h
"

41 
	~"TMVA/V¨übÀInfo.h
"

42 
	~"TMVA/Vîsi⁄.h
"

44 
	~"TH1.h
"

45 
	~"TH2.h
"

46 
	~"THashTabÀ.h
"

47 
	~"TLi°.h
"

48 
	~"TM©h.h
"

49 
	~"TProfûe.h
"

50 
	~"TVe˘‹D.h
"

52 
	~<Æg‹ôhm
>

53 
	~<ˇs£π
>

54 
	~<ex˚±i⁄
>

55 
	~<iom™ù
>

56 
	~<°dex˚±
>

57 
	~<£t
>

59 
boﬁ
 
	gadv™˚d
;

61 
CœssImp
(
TMVA
::
V¨übÀTønsf‹mBa£
);

66 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$V¨übÀTønsf‹mBa£
–
D©aSëInfo
& 
dsi
,

67 
Ty≥s
::
EV¨übÀTønsf‹m
 
tf
,

68 c⁄° 
TSåög
& 
åfName
 )

69 : 
	`TObje˘
(),

70 
	`fDsi
(
dsi
),

71 
	`fDsiOuçut
(
NULL
),

72 
	`fTønsf‹medEvít
(0),

73 
	`fBackTønsf‹medEvít
(0),

74 
	`fV¨übÀTønsf‹m
(
tf
),

75 
	`fE«bÀd
–
kTRUE
 ),

76 
	`fCª©ed
–
kFALSE
 ),

77 
	`fN‹mÆi£
–
kFALSE
 ),

78 
	`fTønsf‹mName
(
åfName
),

79 
	`fV¨übÀTy≥sAªCou¡ed
(
Ál£
),

80 
	`fNV¨übÀs
(0),

81 
	`fNT¨gës
(0),

82 
	`fNS≥˘©‹s
(0),

83 
	`fS‹tGë
(
kTRUE
),

84 
	`fTMVAVîsi⁄
(
TMVA_VERSION_CODE
),

85 
	$fLoggî
( 0 )

87 
fLoggî
 = 
√w
 
	`MsgLoggî
(
this
, 
kINFO
);

88 
UI¡_t
 
iv¨
 = 0; iv¨ < 
fDsi
.
	`GëNV¨übÀs
(); ivar++) {

89 
fV¨übÀs
.
	`push_back
–
	`V¨übÀInfo
–
fDsi
.
	`GëV¨übÀInfo
(
iv¨
) ) );

91 
UI¡_t
 
ôgt
 = 0; itgà< 
fDsi
.
	`GëNT¨gës
(); itgt++) {

92 
fT¨gës
.
	`push_back
–
	`V¨übÀInfo
–
fDsi
.
	`GëT¨gëInfo
(
ôgt
) ) );

94 
UI¡_t
 
i•˘
 = 0; i•˘ < 
fDsi
.
	`GëNS≥˘©‹s
(); ispct++) {

95 
fT¨gës
.
	`push_back
–
	`V¨übÀInfo
–
fDsi
.
	`GëS≥˘©‹Info
(
i•˘
) ) );

97 
	}
}

101 
	gTMVA
::
V¨übÀTønsf‹mBa£
::~
	$V¨übÀTønsf‹mBa£
()

103 i‡(
fTønsf‹medEvít
!=0Ë
dñëe
 fTransformedEvent;

104 i‡(
fBackTønsf‹medEvít
!=0Ë
dñëe
 fBackTransformedEvent;

106 
dñëe
 
fLoggî
;

107 
	}
}

112 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$Sñe˘I≈ut
–c⁄° 
TSåög
& 
_öputV¨übÀs
, 
Boﬁ_t
 
putI¡oV¨übÀs
 )

114 
TSåög
 
öputV¨übÀs
 = 
_öputV¨übÀs
;

117 
fGë
.
	`˛ór
();

119 
UI¡_t
 
nv¨s
 = 
	`GëNV¨übÀs
();

120 
UI¡_t
 
¡gts
 = 
	`GëNT¨gës
();

121 
UI¡_t
 
n•˘s
 = 
	`GëNS≥˘©‹s
();

123 
°d
::
	t£t
<
	tI¡_t
> 
	tSñe˘edIndi˚s
;

125 
Sñe˘edIndi˚s
 
v¨Indi˚s
;

126 
Sñe˘edIndi˚s
 
tgtIndi˚s
;

127 
Sñe˘edIndi˚s
 
•˘Indi˚s
;

129 i‡(
öputV¨übÀs
 == "")

131 
öputV¨übÀs
 = "_V_,_T_";

134 
TLi°
* 
öLi°
 = 
	`gToﬁs
().
	`P¨£F‹m©Löe
–
öputV¨übÀs
, "," );

135 
TLi°Iãr
 
	`öIt
(
öLi°
);

136 
TObjSåög
* 
os
 = (TObjSåög*)
	`öIt
()) {

138 
TSåög
 
v¨übÀs
 = 
os
->
	`GëSåög
();

140 if–
v¨übÀs
.
	`BegösWôh
("_"Ë&& v¨übÀs.
	`EndsWôh
("_") ) {

141 
v¨übÀs
.
	`Remove
( 0,1);

142 
v¨übÀs
.
	`Remove
–v¨übÀs.
	`Lígth
()-1,1 );

144 if–
v¨übÀs
.
	`BegösWôh
("V") ) {

145 
v¨übÀs
.
	`Remove
(0,1);

146 if–
v¨übÀs
.
	`Lígth
() == 0 ){

147  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ) {

148 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
) );

149 
v¨Indi˚s
.
	`ö£π
–
iv¨
 );

152 
UI¡_t
 
idx
 = 
v¨übÀs
.
	`Atoi
();

153 if–
idx
 >
nv¨s
 )

154 
	`Log
(Ë<< 
kFATAL
 << "You sñe˘ed v¨übÀ wôh index : " << 
idx
 << " o‡⁄ly " << 
nv¨s
 << " v¨übÀs." << 
Endl
;

155 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
idx
) );

156 
v¨Indi˚s
.
	`ö£π
–
idx
 );

158 }if–
v¨übÀs
.
	`BegösWôh
("T") ) {

159 
v¨übÀs
.
	`Remove
(0,1);

160 if–
v¨übÀs
.
	`Lígth
() == 0 ){

161  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ) {

162 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
) );

163 
tgtIndi˚s
.
	`ö£π
–
ôgt
 );

166 
UI¡_t
 
idx
 = 
v¨übÀs
.
	`Atoi
();

167 if–
idx
 >
¡gts
 )

168 
	`Log
(Ë<< 
kFATAL
 << "You sñe˘edÅ¨gë wôh index : " << 
idx
 << " o‡⁄ly " << 
¡gts
 << "Å¨gës." << 
Endl
;

169 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
idx
) );

170 
tgtIndi˚s
.
	`ö£π
–
idx
 );

172 }if–
v¨übÀs
.
	`BegösWôh
("S") ) {

173 
v¨übÀs
.
	`Remove
(0,1);

174 if–
v¨übÀs
.
	`Lígth
() == 0 ){

175  
UI¡_t
 
i•˘
 = 0; i•˘ < 
n•˘s
; ++ispct ) {

176 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
i•˘
) );

177 
•˘Indi˚s
.
	`ö£π
–
i•˘
 );

180 
UI¡_t
 
idx
 = 
v¨übÀs
.
	`Atoi
();

181 if–
idx
 >
n•˘s
 )

182 
	`Log
(Ë<< 
kFATAL
 << "You sñe˘ed s≥˘©‹ wôh index : " << 
idx
 << " o‡⁄ly " << 
n•˘s
 << " s≥˘©‹s." << 
Endl
;

183 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
idx
) );

184 
•˘Indi˚s
.
	`ö£π
–
idx
 );

186 }if–
	`TSåög
("REARRANGE").
	`BegösWôh
(
v¨übÀs
) ) {

187 
	`ToggÀI≈utS‹tOrdî
–
kFALSE
 );

188 if–!
fS‹tGë
 )

189 
	`Log
(Ë<< 
kINFO
 << "V¨übÀÑóº™gemíà£àåue: V¨übÀ ordî giví i¿å™sf‹m©i⁄ o±i⁄ i†u£d f‹ i≈uàtÿå™sf‹m©i⁄!" << 
Endl
;

193 
I¡_t
 
numIndi˚s
 = 
v¨Indi˚s
.
	`size
()+
tgtIndi˚s
.size()+
•˘Indi˚s
.size();

194  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ) {

195 if–
fDsi
.
	`GëV¨übÀInfo
–
iv¨
 ).
	`GëLabñ
(Ë=
v¨übÀs
 ) {

196 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
) );

197 
v¨Indi˚s
.
	`ö£π
–
iv¨
 );

201  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ) {

202 if–
fDsi
.
	`GëT¨gëInfo
–
ôgt
 ).
	`GëLabñ
(Ë=
v¨übÀs
 ) {

203 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
) );

204 
tgtIndi˚s
.
	`ö£π
–
ôgt
 );

208  
UI¡_t
 
i•˘
 = 0; i•˘ < 
n•˘s
; ++ispct ) {

209 if–
fDsi
.
	`GëS≥˘©‹Info
–
i•˘
 ).
	`GëLabñ
(Ë=
v¨übÀs
 ) {

210 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
i•˘
) );

211 
•˘Indi˚s
.
	`ö£π
–
i•˘
 );

215 
I¡_t
 
numIndi˚sEndOfLo›
 = 
v¨Indi˚s
.
	`size
()+
tgtIndi˚s
.size()+
•˘Indi˚s
.size();

216 if–
numIndi˚sEndOfLo›
 =
numIndi˚s
 )

217 
	`Log
(Ë<< 
kWARNING
 << "Eº‹áà∑rsögÅhê›ti⁄†f‹Åhêv¨übÀÅønsf‹m©i⁄s: V¨übÀ/T¨gë/S≥˘©‹ '" << 
v¨übÀs
.
	`D©a
(Ë<< "'ÇŸ found." << 
Endl
;

218 
numIndi˚s
 = 
numIndi˚sEndOfLo›
;

223 if–
putI¡oV¨übÀs
 ) {

224 
I¡_t
 
idx
 = 0;

225  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
v¨Indi˚s
.
	`begö
(), 
ôEnd
 = v¨Indi˚s.
	`íd
(); it != itEnd; ++it ) {

226 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
idx
) );

227 ++
idx
;

229  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
tgtIndi˚s
.
	`begö
(), 
ôEnd
 =ÅgtIndi˚s.
	`íd
(); it != itEnd; ++it ) {

230 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
idx
) );

231 ++
idx
;

233  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
•˘Indi˚s
.
	`begö
(), 
ôEnd
 = sp˘Indi˚s.
	`íd
(); it != itEnd; ++it ) {

234 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
idx
) );

235 ++
idx
;

238  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
v¨Indi˚s
.
	`begö
(), 
ôEnd
 = v¨Indi˚s.
	`íd
(); it != itEnd; ++it ) {

239 
I¡_t
 
idx
 = (*
ô
);

240 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
idx
) );

242  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
tgtIndi˚s
.
	`begö
(), 
ôEnd
 =ÅgtIndi˚s.
	`íd
(); it != itEnd; ++it ) {

243 
I¡_t
 
idx
 = (*
ô
);

244 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
idx
) );

246  
Sñe˘edIndi˚s
::
ôî©‹
 
ô
 = 
•˘Indi˚s
.
	`begö
(), 
ôEnd
 = sp˘Indi˚s.
	`íd
(); it != itEnd; ++it ) {

247 
I¡_t
 
idx
 = (*
ô
);

248 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
idx
) );

252 if–
fS‹tGë
 ) {

253 
fGë
.
	`˛ór
();

254 
fGë
.
	`assign
–
fPut
.
	`begö
(), fPut.
	`íd
() );

258 
	`Log
(Ë<< 
kHEADER
 << "Tønsf‹m©i⁄, V¨übÀ sñe˘i⁄ : " << 
Endl
;

261 c⁄° 
D©aSëInfo
* 
ouçutDsiPå
 = (
fDsiOuçut
? &(*fDsiOuçutË: &
fDsi
 );

265 
ItV¨Ty≥Idx
 
ôGë
 = 
fGë
.
	`begö
(), 
ôGëEnd
 = fGë.
	`íd
();

266 
ItV¨Ty≥Idx
 
ôPut
 = 
fPut
.
	`begö
();

267  ; 
ôGë
 !
ôGëEnd
; ++itGet ) {

268 
TSåög
 
öputTy≥Såög
 = "?";

270 
Ch¨_t
 
öputTy≥
 = (*
ôGë
).
fú°
;

271 
I¡_t
 
öputIdx
 = (*
ôGë
).
£c⁄d
;

273 
TSåög
 
öputLabñ
 = "NOT FOND";

274 if–
öputTy≥
 == 'v' ) {

275 
öputLabñ
 = 
fDsi
.
	`GëV¨übÀInfo
–
öputIdx
 ).
	`GëLabñ
();

276 
öputTy≥Såög
 = "variable";

278 if–
öputTy≥
 == 't' ){

279 
öputLabñ
 = 
fDsi
.
	`GëT¨gëInfo
–
öputIdx
 ).
	`GëLabñ
();

280 
öputTy≥Såög
 = "target";

282 if–
öputTy≥
 == 's' ){

283 
öputLabñ
 = 
fDsi
.
	`GëS≥˘©‹Info
–
öputIdx
 ).
	`GëLabñ
();

284 
öputTy≥Såög
 = "spectator";

287 
TSåög
 
ouçutTy≥Såög
 = "?";

289 
Ch¨_t
 
ouçutTy≥
 = (*
ôPut
).
fú°
;

290 
I¡_t
 
ouçutIdx
 = (*
ôPut
).
£c⁄d
;

292 
TSåög
 
ouçutLabñ
 = "NOT FOUND";

293 if–
ouçutTy≥
 == 'v' ) {

294 
ouçutLabñ
 = 
ouçutDsiPå
->
	`GëV¨übÀInfo
–
ouçutIdx
 ).
	`GëLabñ
();

295 
ouçutTy≥Såög
 = "variable";

297 if–
ouçutTy≥
 == 't' ){

298 
ouçutLabñ
 = 
ouçutDsiPå
->
	`GëT¨gëInfo
–
ouçutIdx
 ).
	`GëLabñ
();

299 
ouçutTy≥Såög
 = "target";

301 if–
ouçutTy≥
 == 's' ){

302 
ouçutLabñ
 = 
ouçutDsiPå
->
	`GëS≥˘©‹Info
–
ouçutIdx
 ).
	`GëLabñ
();

303 
ouçutTy≥Såög
 = "spectator";

305 
	`Log
(Ë<< 
kINFO
 << "I≈uà: " << 
öputTy≥Såög
.
	`D©a
(Ë<< " '" << 
öputLabñ
.D©a(Ë<< "'" << " <---> " << "Ouçuà: " << 
ouçutTy≥Såög
.D©a(Ë<< " '" << 
ouçutLabñ
.D©a(Ë<< "'" << 
Endl
;

306 
	`Log
(Ë<< 
kDEBUG
 << "\t(ödex=" << 
öputIdx
 << ")." << "\t(ödex=" << 
ouçutIdx
 << ")." << 
Endl
;

308 ++
ôPut
;

311 
	}
}

317 
Boﬁ_t
 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
GëI≈ut
–c⁄° 
Evít
* 
evít
, 
°d
::
ve˘‹
<
Flﬂt_t
>& 
öput
, std::ve˘‹<
Ch¨_t
>& 
mask
, Boﬁ_à
backTønsf‹m©i⁄
 ) const

319 
ItV¨Ty≥IdxC⁄°
 
	gôE¡ry
;

320 
ItV¨Ty≥IdxC⁄°
 
	gôE¡ryEnd
;

322 
	göput
.
˛ór
();

323 
	gmask
.
˛ór
();

325 if–
	gbackTønsf‹m©i⁄
 && !
	gfPut
.
em±y
() ){

326 
	gôE¡ry
 = 
fPut
.
begö
();

327 
	gôE¡ryEnd
 = 
fPut
.
íd
();

328 
	göput
.
ª£rve
(
fPut
.
size
());

331 
	gôE¡ry
 = 
fGë
.
begö
();

332 
	gôE¡ryEnd
 = 
fGë
.
íd
();

333 
	göput
.
ª£rve
(
fGë
.
size
() );

336 
Boﬁ_t
 
	ghasMaskedE¡rõs
 = 
kFALSE
;

338  ; 
	gôE¡ry
 !
ôE¡ryEnd
; ++itEntry ) {

339 
Ch¨_t
 
	gty≥
 = (*
ôE¡ry
).
fú°
;

340 
I¡_t
 
	gidx
 = (*
ôE¡ry
).
£c⁄d
;

342 
	gåy
{

343  
	gty≥
 ) {

345 
öput
.
push_back
–
evít
->
GëVÆue
(
idx
) );

348 
öput
.
push_back
–
evít
->
GëT¨gë
(
idx
) );

351 
öput
.
push_back
–
evít
->
GëS≥˘©‹
(
idx
) );

354 
Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/GëI≈uà: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

356 
	gmask
.
push_back
(
kFALSE
);

358 
ˇtch
(
°d
::
out_of_ønge
& ){

359 
öput
.
push_back
(0.f);

360 
	gmask
.
push_back
(
kTRUE
);

361 
	ghasMaskedE¡rõs
 = 
kTRUE
;

364  
	ghasMaskedE¡rõs
;

370 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
SëOuçut
–
Evít
* 
evít
, 
°d
::
ve˘‹
<
Flﬂt_t
>& 
ouçut
, std::ve˘‹<
Ch¨_t
>& 
mask
, c⁄° Evít* 
ﬁdEvít
, 
Boﬁ_t
 
backTønsf‹m©i⁄
 ) const

372 
	g°d
::
ve˘‹
<
Flﬂt_t
>::
ôî©‹
 
ôOuçut
 = 
ouçut
.
begö
();

373 
	g°d
::
ve˘‹
<
Ch¨_t
>::
ôî©‹
 
ôMask
 = 
mask
.
begö
();

375 if–
	gﬁdEvít
 )

376 
	gevít
->
C›yV¨VÆues
–*
ﬁdEvít
 );

378 
	gåy
 {

380 
ItV¨Ty≥IdxC⁄°
 
	gôE¡ry
;

381 
ItV¨Ty≥IdxC⁄°
 
	gôE¡ryEnd
;

383 if–
	gbackTønsf‹m©i⁄
 || 
	gfPut
.
em±y
() ){

384 
	gôE¡ry
 = 
fGë
.
begö
();

385 
	gôE¡ryEnd
 = 
fGë
.
íd
();

388 
	gôE¡ry
 = 
fPut
.
begö
();

389 
	gôE¡ryEnd
 = 
fPut
.
íd
();

393  ; 
	gôE¡ry
 !
ôE¡ryEnd
; ++itEntry ) {

395 if–(*
	gôMask
) ){

399 
Ch¨_t
 
	gty≥
 = (*
ôE¡ry
).
fú°
;

400 
I¡_t
 
	gidx
 = (*
ôE¡ry
).
£c⁄d
;

401 i‡(
	gôOuçut
 =
ouçut
.
íd
()Ë
Log
(Ë<< 
kFATAL
 << "Ród bey⁄dáºay bound¨õ†ö V¨übÀTønsf‹mBa£::SëOuçut"<<
Endl
;

402 
Flﬂt_t
 
	gvÆue
 = (*
ôOuçut
);

404  
	gty≥
 ) {

406 
evít
->
SëVÆ
–
idx
, 
vÆue
 );

409 
evít
->
SëT¨gë
–
idx
, 
vÆue
 );

412 
evít
->
SëS≥˘©‹
–
idx
, 
vÆue
 );

415 
Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/GëI≈uà: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

417 if–!(*
	gôMask
ËË++
	gôOuçut
;

418 ++
	gôMask
;

421 }
ˇtch
–
°d
::
ex˚±i⁄
& 
ex˚±
 ){

422 
Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/SëOuçuà:Éx˚±i⁄/" << 
ex˚±
.
wh©
(Ë<< 
Endl
;

423 
	gthrow
;

431 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$Cou¡V¨übÀTy≥s
–
UI¡_t
& 
nv¨s
, UI¡_t& 
¡gts
, UI¡_t& 
n•˘s
 ) const

433 if–
fV¨übÀTy≥sAªCou¡ed
 ){

434 
nv¨s
 = 
fNV¨übÀs
;

435 
¡gts
 = 
fNT¨gës
;

436 
n•˘s
 = 
fNS≥˘©‹s
;

440 
nv¨s
 = 
¡gts
 = 
n•˘s
 = 0;

442  
ItV¨Ty≥IdxC⁄°
 
ôE¡ry
 = 
fGë
.
	`begö
(), 
ôE¡ryEnd
 = fGë.
	`íd
(); itEntry != itEntryEnd; ++itEntry ) {

443 
Ch¨_t
 
ty≥
 = (*
ôE¡ry
).
fú°
;

445  
ty≥
 ) {

447 
nv¨s
++;

450 
¡gts
++;

453 
n•˘s
++;

456 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/GëV¨übÀTy≥Numbî†: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

460 
fNV¨übÀs
 = 
nv¨s
;

461 
fNT¨gës
 = 
¡gts
;

462 
fNS≥˘©‹s
 = 
n•˘s
;

464 
fV¨übÀTy≥sAªCou¡ed
 = 
åue
;

465 
	}
}

472 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
CÆcN‹m
–c⁄° 
°d
::
ve˘‹
<c⁄° 
Evít
*>& 
evíts
 )

474 i‡(!
IsCª©ed
()) ;

476 c⁄° 
UI¡_t
 
	gnv¨s
 = 
GëNV¨übÀs
();

477 c⁄° 
UI¡_t
 
	g¡gts
 = 
GëNT¨gës
();

479 
UI¡_t
 
	g√vts
 = 
evíts
.
size
();

481 
TVe˘‹D
 
x2
–
nv¨s
+
¡gts
 ); 
	gx2
 *= 0;

482 
TVe˘‹D
 
x0
–
nv¨s
+
¡gts
 ); 
	gx0
 *= 0;

483 
TVe˘‹D
 
v0
–
nv¨s
+
¡gts
 ); 
	gv0
 *= 0;

485 
DoubÀ_t
 
	gsumOfWeights
 = 0;

486 
UI¡_t
 
	gõvt
=0; ievt<
	g√vts
; ievt++) {

487 c⁄° 
Evít
* 
	gev
 = 
evíts
[
õvt
];

489 
DoubÀ_t
 
	gweight
 = 
ev
->
GëWeight
();

490 
	gsumOfWeights
 +
weight
;

491 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

492 
DoubÀ_t
 
	gx
 = 
ev
->
GëVÆue
(
iv¨
);

493 i‡(
	gõvt
==0) {

494 
V¨übÀs
().
©
(
iv¨
).
SëMö
(
x
);

495 
V¨übÀs
().
©
(
iv¨
).
SëMax
(
x
);

498 
Upd©eN‹m
–
iv¨
, 
x
 );

500 
x0
(
iv¨
Ë+
x
*
weight
;

501 
x2
(
iv¨
Ë+
x
*x*
weight
;

503 
UI¡_t
 
	gôgt
=0; itgt<
	g¡gts
; itgt++) {

504 
DoubÀ_t
 
	gx
 = 
ev
->
GëT¨gë
(
ôgt
);

505 i‡(
	gõvt
==0) {

506 
T¨gës
().
©
(
ôgt
).
SëMö
(
x
);

507 
T¨gës
().
©
(
ôgt
).
SëMax
(
x
);

510 
Upd©eN‹m
–
nv¨s
+
ôgt
, 
x
 );

512 
x0
(
nv¨s
+
ôgt
Ë+
x
*
weight
;

513 
x2
(
nv¨s
+
ôgt
Ë+
x
*x*
weight
;

517 i‡(
	gsumOfWeights
 <= 0) {

518 
Log
(Ë<< 
kFATAL
 << "Åhe sum ofÉvent weights calculated for your input is == 0"

519 << " o∏exa˘ly: " << 
sumOfWeights
 << "Åhîêi†obviou¶y somê¥obÀm..."<< 
Endl
;

523 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

524 
DoubÀ_t
 
	gmón
 = 
x0
(
iv¨
)/
sumOfWeights
;

526 
V¨übÀs
().
©
(
iv¨
).
SëMón
–
món
 );

527 i‡(
x2
(
iv¨
)/
	gsumOfWeights
 - 
món
*
	gmón
 < 0) {

528 
Log
(Ë<< 
	gkFATAL
 << "ÅhêRMS o‡you∏öpuàv¨übÀ " << 
	giv¨


529 << "ÉvÆu©e†tÿ™ imagö¨yÇumbî: sqπ("<< 
x2
(
iv¨
)/
	gsumOfWeights
 - 
món
*
	gmón


531 << 
	gEndl
;

533 
V¨übÀs
().
©
(
iv¨
).
SëRMS
–
TM©h
::
Sqπ
–
x2
(iv¨)/
sumOfWeights
 - 
món
*mean) );

535 
UI¡_t
 
	gôgt
=0; itgt<
	g¡gts
; itgt++) {

536 
DoubÀ_t
 
	gmón
 = 
x0
(
nv¨s
+
ôgt
)/
sumOfWeights
;

537 
T¨gës
().
©
(
ôgt
).
SëMón
–
món
 );

538 i‡(
x2
(
nv¨s
+
ôgt
)/
	gsumOfWeights
 - 
món
*
	gmón
 < 0) {

539 
Log
(Ë<< 
	gkFATAL
 << "ÅhêRMS o‡you∏èrgë v¨übÀ " << 
	gôgt


540 << "ÉvÆu©e†tÿ™ imagö¨yÇumbî: sqπ(" << 
x2
(
nv¨s
+
ôgt
)/
	gsumOfWeights
 - 
món
*
	gmón


542 << 
	gEndl
;

544 
T¨gës
().
©
(
ôgt
).
SëRMS
–
TM©h
::
Sqπ
–
x2
(
nv¨s
+ôgt)/
sumOfWeights
 - 
món
*mean) );

547 
UI¡_t
 
	gõvt
=0; ievt<
	g√vts
; ievt++) {

548 c⁄° 
Evít
* 
	gev
 = 
evíts
[
õvt
];

549 
DoubÀ_t
 
	gweight
 = 
ev
->
GëWeight
();

550 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

551 
DoubÀ_t
 
	gx
 = 
ev
->
GëVÆue
(
iv¨
);

552 
DoubÀ_t
 
	gmón
 = 
V¨übÀs
().
©
(
iv¨
).
GëMón
();

553 
v0
(
iv¨
Ë+
weight
*(
x
-
món
)*(x-mean);

555 
UI¡_t
 
	gôgt
=0; itgt<
	g¡gts
; itgt++) {

556 
DoubÀ_t
 
	gx
 = 
ev
->
GëT¨gë
(
ôgt
);

557 
DoubÀ_t
 
	gmón
 = 
T¨gës
().
©
(
ôgt
).
GëMón
();

558 
v0
(
nv¨s
+
ôgt
Ë+
weight
*(
x
-
món
)*(x-mean);

564 
UI¡_t
 
	giv¨
=0; iv¨<
	gnv¨s
; ivar++) {

565 
DoubÀ_t
 
	gv¨ün˚
 = 
v0
(
iv¨
)/
sumOfWeights
;

566 
V¨übÀs
().
©
(
iv¨
).
SëV¨ün˚
–
v¨ün˚
 );

567 
Log
(Ë<< 
	gkINFO
 << "V¨übÀ " << 
V¨übÀs
().
©
(
iv¨
).
GëEx¥essi⁄
(Ë<<" v¨ün˚ = " << 
	gv¨ün˚
 << 
	gEndl
;

569 
UI¡_t
 
	gôgt
=0; itgt<
	g¡gts
; itgt++) {

570 
DoubÀ_t
 
	gv¨ün˚
 = 
v0
(
nv¨s
+
ôgt
)/
sumOfWeights
;

571 
T¨gës
().
©
(
ôgt
).
SëV¨ün˚
–
v¨ün˚
 );

572 
Log
(Ë<< 
	gkINFO
 << "T¨gë " << 
T¨gës
().
©
(
ôgt
).
GëEx¥essi⁄
(Ë<<" v¨ün˚ = " << 
	gv¨ün˚
 << 
	gEndl
;

575 
Log
(Ë<< 
	gkVERBOSE
 << "Së möN‹m/maxN‹m f‹ v¨übÀ†to: " << 
	gEndl
;

576 
Log
(Ë<< 
	g°d
::
£çªcisi⁄
(3);

577 
UI¡_t
 
	giv¨
=0; iv¨<
GëNV¨übÀs
(); ivar++)

578 
Log
(Ë<< " " << 
V¨übÀs
().
©
(
iv¨
).
GëI¡î«lName
()

579 << "\t: [" << 
V¨übÀs
().
©
(
iv¨
).
GëMö
(Ë<< "\t, " << V¨übÀs().©(iv¨).
GëMax
(Ë<< "\t] " << 
	gEndl
;

580 
Log
(Ë<< 
	gkVERBOSE
 << "Së möN‹m/maxN‹m f‹Å¨gë†to: " << 
	gEndl
;

581 
Log
(Ë<< 
	g°d
::
£çªcisi⁄
(3);

582 
UI¡_t
 
	gôgt
=0; itgt<
GëNT¨gës
(); itgt++)

583 
Log
(Ë<< " " << 
T¨gës
().
©
(
ôgt
).
GëI¡î«lName
()

584 << "\t: [" << 
T¨gës
().
©
(
ôgt
).
GëMö
(Ë<< "\t, " << T¨gës().©(ôgt).
GëMax
(Ë<< "\t] " << 
	gEndl
;

585 
Log
(Ë<< 
	g°d
::
£çªcisi⁄
(5);

593 
	g°d
::
ve˘‹
<
TSåög
>* 
TMVA
::
V¨übÀTønsf‹mBa£
::
	$GëTønsf‹m©i⁄Såögs
–
I¡_t
 ) const

595 
°d
::
ve˘‹
<
TSåög
>* 
°rVec
 = 
√w
 std::vector<TString>;

596 
UI¡_t
 
iv¨
=0; iv¨<
	`GëNV¨übÀs
(); ivar++) {

597 
°rVec
->
	`push_back
–
	`V¨übÀs
()[
iv¨
].
	`GëLabñ
() + "_[transformed]");

600  
°rVec
;

601 
	}
}

607 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$Upd©eN‹m
 ( 
I¡_t
 
iv¨
, 
DoubÀ_t
 
x
 )

609 
I¡_t
 
nv¨s
 = 
fDsi
.
	`GëNV¨übÀs
();

610 if–
iv¨
 < 
nv¨s
 ){

611 i‡(
x
 < 
	`V¨übÀs
().
	`©
(
iv¨
).
	`GëMö
()ËV¨übÀs().©(iv¨).
	`SëMö
(x);

612 i‡(
x
 > 
	`V¨übÀs
().
	`©
(
iv¨
).
	`GëMax
()ËV¨übÀs().©(iv¨).
	`SëMax
(x);

614 i‡(
x
 < 
	`T¨gës
().
	`©
(
iv¨
-
nv¨s
).
	`GëMö
()ËT¨gës().©(iv¨-nv¨s).
	`SëMö
(x);

615 i‡(
x
 > 
	`T¨gës
().
	`©
(
iv¨
-
nv¨s
).
	`GëMax
()ËT¨gës().©(iv¨-nv¨s).
	`SëMax
(x);

617 
	}
}

622 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$AâachXMLTo
(* 
∑ª¡
)

624 * 
£lxml
 = 
	`gToﬁs
().
	`AddChûd
(
∑ª¡
, "Selection");

626 * 
öpxml
 = 
	`gToﬁs
().
	`AddChûd
(
£lxml
, "Input");

627 
	`gToﬁs
().
	`AddAâr
(
öpxml
, "NI≈uts", 
fGë
.
	`size
() );

630 c⁄° 
D©aSëInfo
* 
ouçutDsiPå
 = (
fDsiOuçut
? fDsiOuçuà: &
fDsi
 );

632  
ItV¨Ty≥Idx
 
ôGë
 = 
fGë
.
	`begö
(), 
ôGëEnd
 = fGë.
	`íd
(); itGet != itGetEnd; ++itGet ) {

633 
UI¡_t
 
idx
 = (*
ôGë
).
£c⁄d
;

634 
Ch¨_t
 
ty≥
 = (*
ôGë
).
fú°
;

636 
TSåög
 
œbñ
 = "";

637 
TSåög
 
ex¥essi⁄
 = "";

638 
TSåög
 
ty≥Såög
 = "";

639  
ty≥
 ){

641 
ty≥Såög
 = "Variable";

642 
œbñ
 = 
fDsi
.
	`GëV¨übÀInfo
–
idx
 ).
	`GëLabñ
();

643 
ex¥essi⁄
 = 
fDsi
.
	`GëV¨übÀInfo
–
idx
 ).
	`GëEx¥essi⁄
();

646 
ty≥Såög
 = "Target";

647 
œbñ
 = 
fDsi
.
	`GëT¨gëInfo
–
idx
 ).
	`GëLabñ
();

648 
ex¥essi⁄
 = 
fDsi
.
	`GëT¨gëInfo
–
idx
 ).
	`GëEx¥essi⁄
();

651 
ty≥Såög
 = "Spectator";

652 
œbñ
 = 
fDsi
.
	`GëS≥˘©‹Info
–
idx
 ).
	`GëLabñ
();

653 
ex¥essi⁄
 = 
fDsi
.
	`GëS≥˘©‹Info
–
idx
 ).
	`GëEx¥essi⁄
();

656 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/AâachXMLTÿunknow¿v¨übÀÅy≥ '" << 
ty≥
 << "'." << 
Endl
;

659 * 
idxxml
 = 
	`gToﬁs
().
	`AddChûd
(
öpxml
, "Input");

661 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Ty≥", 
ty≥Såög
);

662 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Labñ", 
œbñ
);

663 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Ex¥essi⁄", 
ex¥essi⁄
);

667 * 
outxml
 = 
	`gToﬁs
().
	`AddChûd
(
£lxml
, "Output");

668 
	`gToﬁs
().
	`AddAâr
(
outxml
, "NOuçuts", 
fPut
.
	`size
() );

670  
ItV¨Ty≥Idx
 
ôPut
 = 
fPut
.
	`begö
(), 
ôPutEnd
 = fPut.
	`íd
(); itPut != itPutEnd; ++itPut ) {

671 
UI¡_t
 
idx
 = (*
ôPut
).
£c⁄d
;

672 
Ch¨_t
 
ty≥
 = (*
ôPut
).
fú°
;

674 
TSåög
 
œbñ
 = "";

675 
TSåög
 
ex¥essi⁄
 = "";

676 
TSåög
 
ty≥Såög
 = "";

677  
ty≥
 ){

679 
ty≥Såög
 = "Variable";

680 
œbñ
 = 
ouçutDsiPå
->
	`GëV¨übÀInfo
–
idx
 ).
	`GëLabñ
();

681 
ex¥essi⁄
 = 
ouçutDsiPå
->
	`GëV¨übÀInfo
–
idx
 ).
	`GëEx¥essi⁄
();

684 
ty≥Såög
 = "Target";

685 
œbñ
 = 
ouçutDsiPå
->
	`GëT¨gëInfo
–
idx
 ).
	`GëLabñ
();

686 
ex¥essi⁄
 = 
ouçutDsiPå
->
	`GëT¨gëInfo
–
idx
 ).
	`GëEx¥essi⁄
();

689 
ty≥Såög
 = "Spectator";

690 
œbñ
 = 
ouçutDsiPå
->
	`GëS≥˘©‹Info
–
idx
 ).
	`GëLabñ
();

691 
ex¥essi⁄
 = 
ouçutDsiPå
->
	`GëS≥˘©‹Info
–
idx
 ).
	`GëEx¥essi⁄
();

694 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/AâachXMLTÿunknow¿v¨übÀÅy≥ '" << 
ty≥
 << "'." << 
Endl
;

697 * 
idxxml
 = 
	`gToﬁs
().
	`AddChûd
(
outxml
, "Output");

699 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Ty≥", 
ty≥Såög
);

700 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Labñ", 
œbñ
);

701 
	`gToﬁs
().
	`AddAâr
(
idxxml
, "Ex¥essi⁄", 
ex¥essi⁄
);

705 
	}
}

710 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$RódFromXML
–* 
£ ode
 )

712 * 
ö≤ode
 = 
	`gToﬁs
().
	`GëChûd
–
£ ode
 );

713 * 
ouäode
 = 
	`gToﬁs
().
	`GëNextChûd
–
ö≤ode
 );

715 
UI¡_t
 
nv¨s
 = 
	`GëNV¨übÀs
();

716 
UI¡_t
 
¡gts
 = 
	`GëNT¨gës
();

717 
UI¡_t
 
n•˘s
 = 
	`GëNS≥˘©‹s
();

720 
fGë
.
	`˛ór
();

722 
UI¡_t
 
nI≈uts
 = 0;

723 
	`gToﬁs
().
	`RódAâr
(
ö≤ode
, "NI≈uts", 
nI≈uts
);

725 * 
ch
 = 
	`gToﬁs
().
	`GëChûd
–
ö≤ode
 );

726 
ch
) {

727 
TSåög
 
ty≥Såög
 = "";

728 
TSåög
 
œbñ
 = "";

729 
TSåög
 
ex¥essi⁄
 = "";

731 
	`gToﬁs
().
	`RódAâr
(
ch
, "Ty≥", 
ty≥Såög
);

732 
	`gToﬁs
().
	`RódAâr
(
ch
, "Labñ", 
œbñ
);

733 
	`gToﬁs
().
	`RódAâr
(
ch
, "Ex¥essi⁄", 
ex¥essi⁄
);

735 if–
ty≥Såög
 == "Variable" ){

736  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ) {

737 if–
fDsi
.
	`GëV¨übÀInfo
–
iv¨
 ).
	`GëLabñ
(Ë=
œbñ
 ||

738 
fDsi
.
	`GëV¨übÀInfo
–
iv¨
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
) {

739 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
) );

743 }if–
ty≥Såög
 == "Target" ){

744  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ) {

745 if–
fDsi
.
	`GëT¨gëInfo
–
ôgt
 ).
	`GëLabñ
(Ë=
œbñ
 ||

746 
fDsi
.
	`GëT¨gëInfo
–
ôgt
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
 ) {

747 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
) );

751 }if–
ty≥Såög
 == "Spectator" ){

752  
UI¡_t
 
i•˘
 = 0; i•˘ < 
n•˘s
; ++ispct ) {

753 if–
fDsi
.
	`GëS≥˘©‹Info
–
i•˘
 ).
	`GëLabñ
(Ë=
œbñ
 ||

754 
fDsi
.
	`GëS≥˘©‹Info
–
i•˘
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
 ) {

755 
fGë
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
i•˘
) );

760 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹m©i⁄Ba£/RódFromXML : unknow¿ty≥ '" << 
ty≥Såög
 << "'." << 
Endl
;

762 
ch
 = 
	`gToﬁs
().
	`GëNextChûd
( ch );

765 
	`as£π
–
nI≈uts
 =
fGë
.
	`size
() );

768 
fPut
.
	`˛ór
();

770 
UI¡_t
 
nOuçuts
 = 0;

771 
	`gToﬁs
().
	`RódAâr
(
ouäode
, "NOuçuts", 
nOuçuts
);

773 * 
chOut
 = 
	`gToﬁs
().
	`GëChûd
–
ouäode
 );

774 
chOut
) {

775 
TSåög
 
ty≥Såög
 = "";

776 
TSåög
 
œbñ
 = "";

777 
TSåög
 
ex¥essi⁄
 = "";

779 
	`gToﬁs
().
	`RódAâr
(
chOut
, "Ty≥", 
ty≥Såög
);

780 
	`gToﬁs
().
	`RódAâr
(
chOut
, "Labñ", 
œbñ
);

781 
	`gToﬁs
().
	`RódAâr
(
chOut
, "Ex¥essi⁄", 
ex¥essi⁄
);

783 if–
ty≥Såög
 == "Variable" ){

784  
UI¡_t
 
iv¨
 = 0; iv¨ < 
nv¨s
; ++ivar ) {

785 if–
fDsi
.
	`GëV¨übÀInfo
–
iv¨
 ).
	`GëLabñ
(Ë=
œbñ
 ||

786 
fDsi
.
	`GëV¨übÀInfo
–
iv¨
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
 ) {

787 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('v',
iv¨
) );

791 }if–
ty≥Såög
 == "Target" ){

792  
UI¡_t
 
ôgt
 = 0; itgà< 
¡gts
; ++itgt ) {

793 if–
fDsi
.
	`GëT¨gëInfo
–
ôgt
 ).
	`GëLabñ
(Ë=
œbñ
 ||

794 
fDsi
.
	`GëT¨gëInfo
–
ôgt
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
 ) {

795 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('t',
ôgt
) );

799 }if–
ty≥Såög
 == "Spectator" ){

800  
UI¡_t
 
i•˘
 = 0; i•˘ < 
n•˘s
; ++ispct ) {

801 if–
fDsi
.
	`GëS≥˘©‹Info
–
i•˘
 ).
	`GëLabñ
(Ë=
œbñ
 ||

802 
fDsi
.
	`GëS≥˘©‹Info
–
i•˘
 ).
	`GëEx¥essi⁄
(Ë=
ex¥essi⁄
 ) {

803 
fPut
.
	`push_back
–
°d
::
∑ú
<
Ch¨_t
,
UI¡_t
>('s',
i•˘
) );

808 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹m©i⁄Ba£/RódFromXML : unknow¿ty≥ '" << 
ty≥Såög
 << "'." << 
Endl
;

810 
chOut
 = 
	`gToﬁs
().
	`GëNextChûd
( chOut );

813 
	`as£π
–
nOuçuts
 =
fPut
.
	`size
() );

814 
	}
}

819 
	gTMVA
::
V¨übÀTønsf‹mBa£
::
	$MakeFun˘i⁄
–
°d
::
o°ªam
& 
fout
, c⁄° 
TSåög
& , 
I¡_t
 
∑π
,

820 
UI¡_t
 , 
I¡_t
 )

822 if–
∑π
 == 0 ){

823 
fout
 << 
°d
::
ídl
;

824 
fout
 << " // deföêthêödi˚†o‡thêv¨übÀ†whicháªÅønsf‹med byÅhi†å™sf‹m©i⁄" << 
°d
::
ídl
;

825 
fout
 << " sèti¯°d::ve˘‹<öt> indi˚sGë;" << 
°d
::
ídl
;

826 
fout
 << " sèti¯°d::ve˘‹<öt> indi˚sPut;" << 
°d
::
ídl
 << std::endl;

827 
fout
 << " i‡–ödi˚sGë.em±y(ËË{ " << 
°d
::
ídl
;

828 
fout
 << " indi˚sGë.ª£rve(fNv¨s);" << 
°d
::
ídl
;

830  
ItV¨Ty≥IdxC⁄°
 
ôE¡ry
 = 
fGë
.
	`begö
(), 
ôE¡ryEnd
 = fGë.
	`íd
(); itEntry != itEntryEnd; ++itEntry ) {

831 
Ch¨_t
 
ty≥
 = (*
ôE¡ry
).
fú°
;

832 
I¡_t
 
idx
 = (*
ôE¡ry
).
£c⁄d
;

834  
ty≥
 ) {

836 
fout
 << " indi˚sGë.push_back–" << 
idx
 << ");" << 
°d
::
ídl
;

839 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†d€¢'àw‹k wôhÅønsf‹m©i⁄ o‡èrgës. Thêªsu…†wû»bêwr⁄g!" << 
Endl
;

842 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†d€¢'àw‹k wôhÅønsf‹m©i⁄ o‡•e˘©‹s. Thêªsu…†wû»bêwr⁄g!" << 
Endl
;

845 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/GëI≈uà: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

848 
fout
 << " } " << 
°d
::
ídl
;

849 
fout
 << " i‡–ödi˚sPut.em±y(ËË{ " << 
°d
::
ídl
;

850 
fout
 << " indi˚sPut.ª£rve(fNv¨s);" << 
°d
::
ídl
;

852  
ItV¨Ty≥IdxC⁄°
 
ôE¡ry
 = 
fPut
.
	`begö
(), 
ôE¡ryEnd
 = fPut.
	`íd
(); itEntry != itEntryEnd; ++itEntry ) {

853 
Ch¨_t
 
ty≥
 = (*
ôE¡ry
).
fú°
;

854 
I¡_t
 
idx
 = (*
ôE¡ry
).
£c⁄d
;

856  
ty≥
 ) {

858 
fout
 << " indi˚sPut.push_back–" << 
idx
 << ");" << 
°d
::
ídl
;

861 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†d€¢'àw‹k wôhÅønsf‹m©i⁄ o‡èrgës. Thêªsu…†wû»bêwr⁄g!" << 
Endl
;

864 
	`Log
(Ë<< 
kWARNING
 << "MakeCœs†d€¢'àw‹k wôhÅønsf‹m©i⁄ o‡•e˘©‹s. Thêªsu…†wû»bêwr⁄g!" << 
Endl
;

867 
	`Log
(Ë<< 
kFATAL
 << "V¨übÀTønsf‹mBa£/PutI≈uà: unknow¿ty≥ '" << 
ty≥
 << "'." << 
Endl
;

871 
fout
 << " } " << 
°d
::
ídl
;

872 
fout
 << 
°d
::
ídl
;

874 }if–
∑π
 == 1){

876 
	}
}

	@src/Volume.cxx

36 
	~"TMVA/Vﬁume.h
"

38 
	~"TMVA/MsgLoggî.h
"

39 
	~"TMVA/Toﬁs.h
"

40 
	~"TMVA/Ty≥s.h
"

42 
	~<°dex˚±
>

47 
	gTMVA
::
Vﬁume
::Vﬁume–
°d
::
ve˘‹
<
DoubÀ_t
>* 
l
, std::ve˘‹<DoubÀ_t>* 
u
 )

48 : 
fLowî
–
l
 ),

49 
fUµî
–
u
 ),

50 
	$fOw√rShù
 (
kFALSE
){

51 
	}
}

56 
	gTMVA
::
Vﬁume
::Vﬁume–
°d
::
ve˘‹
<
Flﬂt_t
>* 
l
, std::ve˘‹<Flﬂt_t>* 
u
 )

58 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
l
->
size
() );

59 
	gfUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
u
->
size
() );

60 
	gfOw√rShù
 = 
kTRUE
;

62 
UI¡_t
 
	giv¨
=0; iv¨<
	gl
->
size
(); ivar++) {

63 (*
	gfLowî
)[
iv¨
] = 
DoubÀ_t
((*
l
)[ivar]);

64 (*
	gfUµî
)[
iv¨
] = 
DoubÀ_t
((*
u
)[ivar]);

71 
	gTMVA
::
Vﬁume
::
	$Vﬁume
–
DoubÀ_t
* 
l
, DoubÀ_t* 
u
, 
I¡_t
 
nv¨
 )

73 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
nv¨
 );

74 
fUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
nv¨
 );

75 
fOw√rShù
 = 
kTRUE
;

77 
iv¨
=0; iv¨<
nv¨
; ivar++) {

78 (*
fLowî
)[
iv¨
] = 
l
[ivar];

79 (*
fUµî
)[
iv¨
] = 
u
[ivar];

81 
	}
}

86 
	gTMVA
::
Vﬁume
::
	$Vﬁume
–
Flﬂt_t
* 
l
, Flﬂt_t* 
u
, 
I¡_t
 
nv¨
 )

88 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
nv¨
 );

89 
fUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–
nv¨
 );

90 
fOw√rShù
 = 
kTRUE
;

92 
iv¨
=0; iv¨<
nv¨
; ivar++) {

93 (*
fLowî
)[
iv¨
] = 
	`DoubÀ_t
(
l
[ivar]);

94 (*
fUµî
)[
iv¨
] = 
	`DoubÀ_t
(
u
[ivar]);

96 
	}
}

101 
	gTMVA
::
Vﬁume
::
	$Vﬁume
–
DoubÀ_t
 
l
, DoubÀ_à
u
 )

103 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>(1);

104 
fUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>(1);

105 
fOw√rShù
 = 
kTRUE
;

106 (*
fLowî
)[0] = 
l
;

107 (*
fUµî
)[0] = 
u
;

108 
	}
}

113 
	gTMVA
::
Vﬁume
::
	$Vﬁume
–
Flﬂt_t
 
l
, Flﬂt_à
u
 )

115 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>(1);

116 
fUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>(1);

117 
fOw√rShù
 = 
kTRUE
;

118 (*
fLowî
)[0] = 
	`DoubÀ_t
(
l
);

119 (*
fUµî
)[0] = 
	`DoubÀ_t
(
u
);

120 
	}
}

125 
	gTMVA
::
Vﬁume
::
	$Vﬁume
–
Vﬁume
& 
V
 )

127 
fLowî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–*
V
.fLower );

128 
fUµî
 = 
√w
 
°d
::
ve˘‹
<
DoubÀ_t
>–*
V
.fUpper );

129 
fOw√rShù
 = 
kTRUE
;

130 
	}
}

135 
	gTMVA
::
Vﬁume
::~
	$Vﬁume
( )

138 i‡(
fOw√rShù
Ë
this
->
	`Dñëe
();

139 
	}
}

144 
	gTMVA
::
Vﬁume
::
	$Dñëe
( )

146 i‡(
NULL
 !
fLowî
Ë{ 
dñëe
 fLower; fLower = NULL; }

147 i‡(
NULL
 !
fUµî
Ë{ 
dñëe
 fUpper; fUpper = NULL; }

148 
	}
}

153 
	gTMVA
::
Vﬁume
::
	$SˇÀ
–
DoubÀ_t
 
f
 )

155 
	`gToﬁs
().
	`SˇÀ
(*
fLowî
,
f
);

156 
	`gToﬁs
().
	`SˇÀ
(*
fUµî
,
f
);

157 
	}
}

162 
	gTMVA
::
Vﬁume
::
	$SˇÀI¡îvÆ
–
DoubÀ_t
 
f
 )

164 
UI¡_t
 
iv¨
=0; iv¨<
fLowî
->
	`size
(); ivar++) {

165 
DoubÀ_t
 
lo
 = 0.5*((*
fLowî
)[
iv¨
]*(1.0 + 
f
Ë+ (*
fUµî
)[ivar]*(1.0 - f));

166 
DoubÀ_t
 
up
 = 0.5*((*
fLowî
)[
iv¨
]*(1.0 - 
f
Ë+ (*
fUµî
)[ivar]*(1.0 + f));

167 (*
fLowî
)[
iv¨
] = 
lo
;

168 (*
fUµî
)[
iv¨
] = 
up
;

170 
	}
}

175 
	gTMVA
::
Vﬁume
::
	$Pröt
( ) const

177 
MsgLoggî
 
	`fLoggî
( "Volume" );

178 
UI¡_t
 
iv¨
=0; iv¨<
fLowî
->
	`size
(); ivar++) {

179 
fLoggî
 << 
kINFO
 << "... Vﬁume: v¨: " << 
iv¨
 << "\t(fLower, fUpper) = ("

180 << (*
fLowî
)[
iv¨
] << "\à" << (*
fUµî
)[iv¨] <<")"<< 
Endl
;

182 
	}
}

	@test/DNN/DAE/TestDataLoader.cxx

16 
	~"Te°D©aLﬂdî.h
"

17 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

20 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

22 
	$maö
() {

23 
ã°D©aLﬂdî
<
TRe„ªn˚
<
DoubÀ_t
>>();

24 
°d
::
cout
 << "TestingÑeference dataÜoader: Mex.Ñel.Érror = ";

25 
°d
::
cout
 << std::
ídl
;

26 
	}
}

	@test/DNN/DAE/TestDenoiseAEProp.cxx

16 
	~<cm©h
>

17 
	~<io°ªam
>

19 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

20 
	~"TMVA/DNN/Fun˘i⁄s.h
"

21 
	~"Te°Díoi£AE.h
"

23 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

25 
usög
 
	gM©rix_t
 = 
ty≥«me
 
TRe„ªn˚
<>::
M©rix_t
;

27 
	$ã°1
() {

28 
öputVe˘‹
[][10] =

124 
size_t
 
tŸÆRowsI≈ut
 = (
öputVe˘‹
) / (inputVector[0]);

125 
size_t
 
tŸÆCﬁumnsI≈ut
 = (
öputVe˘‹
[0]) / (inputVector[0][0]);

126 
size_t
 
com¥es£dUnôs
 = 5;

127 
c‹ru±i⁄Levñ
 = 0.2;

128 
À¨nögR©e
 = 0.1;

129 
size_t
 
fB©chSize
 = 
tŸÆRowsI≈ut
;

131 
°d
::
ve˘‹
<
M©rix_t
> 
öput
;

132 
size_t
 
i
 = 0; i < 
tŸÆRowsI≈ut
; i++) {

133 
öput
.
	`em∂a˚_back
(
tŸÆCﬁumnsI≈ut
, 1);

136 
°d
::
ve˘‹
<
M©rix_t
> 
c‹ru±edI≈ut
;

137 
size_t
 
i
 = 0; i < 
tŸÆRowsI≈ut
; i++) {

138 
c‹ru±edI≈ut
.
	`em∂a˚_back
(
tŸÆCﬁumnsI≈ut
, 1);

141 
°d
::
ve˘‹
<
M©rix_t
> 
com¥es£dI≈ut
;

142 
size_t
 
i
 = 0; i < 
tŸÆRowsI≈ut
; i++) {

143 
com¥es£dI≈ut
.
	`em∂a˚_back
(
com¥es£dUnôs
, 1);

146 
°d
::
ve˘‹
<
M©rix_t
> 
ªc⁄°ru˘edI≈ut
;

147 
size_t
 
i
 = 0; i < 
tŸÆRowsI≈ut
; i++) {

148 
ªc⁄°ru˘edI≈ut
.
	`em∂a˚_back
(
tŸÆCﬁumnsI≈ut
, 1);

151 
M©rix_t
 
	`Weights
(
com¥es£dUnôs
, 
tŸÆCﬁumnsI≈ut
);

152 
	`øndomM©rix
(
Weights
);

154 
M©rix_t
 
	`fHBü£s
(
com¥es£dUnôs
, 1);

155 
size_t
 
i
 = 0; i < (size_t)
fHBü£s
.
	`GëNrows
(); i++) {

156 
size_t
 
j
 = 0; j < (size_t)
fHBü£s
.
	`GëNcﬁs
(); j++) {

157 
	`fHBü£s
(
i
, 
j
) = 0;

161 
M©rix_t
 
	`fVBü£s
(
tŸÆCﬁumnsI≈ut
, 1);

162 
size_t
 
i
 = 0; i < (size_t)
fVBü£s
.
	`GëNrows
(); i++) {

163 
size_t
 
j
 = 0; j < (size_t)
fVBü£s
.
	`GëNcﬁs
(); j++) {

164 
	`fVBü£s
(
i
, 
j
) = 0;

168 
M©rix_t
 
	`VBüsEº‹
(
tŸÆCﬁumnsI≈ut
, 1);

169 
M©rix_t
 
	`HBüsEº‹
(
com¥es£dUnôs
, 1);

183 
size_t
 
i
 = 0; i < 
tŸÆRowsI≈ut
; i++) {

184 
size_t
 
j
 = 0; j < (size_t)
öput
[
i
].
	`GëNrows
(); j++) {

185 
size_t
 
k
 = 0; k < (size_t)
öput
[
i
].
	`GëNcﬁs
(); k++) {

186 
öput
[
i
](
j
, 
k
Ë
öputVe˘‹
[i][j];

197 
°d
::
cout
 << "c‹ru±ög i≈ut" << std::
ídl
;

198 
ã°C‹ru±I≈ut
<
TRe„ªn˚
<>>(
öput
[
i
], 
c‹ru±edI≈ut
[i],

199 
c‹ru±i⁄Levñ
);

201 
°d
::
cout
 << "com¥es£dI≈ut" << std::
ídl
;

202 
ã°EncodeI≈ut
<
TRe„ªn˚
<>>(
c‹ru±edI≈ut
[
i
], 
com¥es£dI≈ut
[i],

203 
Weights
);

205 
°d
::
cout
 << "ªc⁄°ru˘edI≈ut" << std::
ídl
;

206 
ã°Rec⁄°ru˘I≈ut
<
TRe„ªn˚
<>>(
com¥es£dI≈ut
[
i
],

207 
ªc⁄°ru˘edI≈ut
[
i
], 
Weights
);

209 
°d
::
cout
 << "Upd©ög weights" << std::
ídl
;

210 
ã°Upd©eP¨amëî
<
TRe„ªn˚
<>>(

211 
öput
[
i
], 
c‹ru±edI≈ut
[i], 
com¥es£dI≈ut
[i], 
ªc⁄°ru˘edI≈ut
[i],

212 
fVBü£s
, 
fHBü£s
, 
Weights
, 
VBüsEº‹
, 
HBüsEº‹
, 
À¨nögR©e
,

213 
fB©chSize
);

215 
	}
}

216 
	$maö
() {

217 
°d
::
cout
 << "Te°ög f‹Ör›ag©i⁄" << std::
ídl
;

218 
	`ã°1
();

219 
	}
}

	@test/DNN/DAE/TestLayer.cxx

12 
	~"Te°Layî.h
"

13 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

14 
	~<io°ªam
>

16 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

17 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maö
()

22 
°d
::
cout
 << "Te°ög sèπed" << std::
ídl
;

24 
ã°Layî
<
TRe„ªn˚
<>>();

26 
°d
::
cout
 << "Te°ög f‹Ö¨amëî upd©i⁄" << std::
ídl
;

27 
ã°Tøöög
<
TRe„ªn˚
<>>();

29 
	}
}

	@test/DNN/DAE/TestLogistic.cxx

12 
	~"Te°Logi°ic.h
"

13 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

14 
	~<io°ªam
>

16 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

17 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maö
()

22 
°d
::
cout
 << "Te°ög sèπed" << std::
ídl
;

24 
ã°Logi°ic
<
TRe„ªn˚
<>>();

25 
°d
::
cout
 << "Tønsf‹m Layî" << std::
ídl
;

29 
	}
}

	@test/DNN/DAE/TestLogisticRegressionLayer.cxx

17 
	~<io°ªam
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

21 
	~"TMVA/DNN/Fun˘i⁄s.h
"

22 
	~"Te°Logi°icRegªssi⁄Layî.h
"

23 
	~"Te°UtûsAE.h
"

25 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

26 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

28 
usög
 
	gM©rix_t
 = 
ty≥«me
 
TRe„ªn˚
<>::
M©rix_t
;

30 
	$ã°
()

32 
åaö_X
[][6] = {

40 
åaö_Y
[][2] = {

50 
ã°_X
[][6] = {

56 
À¨nögR©e
=0.1;

57 
size_t
 
fB©chSize
 =6;

58 
size_t
 
tŸÆRowsTøöI≈ut
(
åaö_X
)/(train_X[0]);

59 
size_t
 
tŸÆCﬁumnsTøöI≈ut
 = (
åaö_X
[0]) / (train_X[0][0]);

60 
°d
::
cout
<<"Tøö i≈ "<<
tŸÆRowsTøöI≈ut
<<" "<<
tŸÆCﬁumnsTøöI≈ut
<<°d::
ídl
;

61 
°d
::
ve˘‹
<
M©rix_t
> 
TøöX
;

62 
size_t
 
i
=0; i<
tŸÆRowsTøöI≈ut
;i++)

64 
TøöX
.
	`em∂a˚_back
(
tŸÆCﬁumnsTøöI≈ut
,1);

66 
°d
::
cout
<<"sizê"<<
TøöX
.
	`size
()<<°d::
ídl
;

71 
size_t
 
tŸÆRowsTøöOuçut
(
åaö_Y
)/(train_Y[0]);

72 
size_t
 
tŸÆCﬁumnsTøöOuçut
 = (
åaö_Y
[0]) / (train_Y[0][0]);

73 
°d
::
cout
<<"Tøö ouà"<<
tŸÆRowsTøöOuçut
<<" "<<
tŸÆCﬁumnsTøöOuçut
<<°d::
ídl
;

75 
°d
::
ve˘‹
<
M©rix_t
> 
TøöY
;

76 
size_t
 
i
=0; i<
tŸÆRowsTøöOuçut
;i++)

78 
TøöY
.
	`em∂a˚_back
(
tŸÆCﬁumnsTøöOuçut
,1);

80 
°d
::
cout
<<"sizê"<<
TøöY
.
	`size
()<<°d::
ídl
;

84 
size_t
 
tŸÆRowsTe°I≈ut
(
ã°_X
)/(test_X[0]);

85 
size_t
 
tŸÆCﬁumnsTe°I≈ut
 = (
ã°_X
[0]) / (test_X[0][0]);

86 
°d
::
cout
<<"Te° I≈ "<<
tŸÆRowsTe°I≈ut
<<" "<<
tŸÆCﬁumnsTe°I≈ut
<<°d::
ídl
;

88 
°d
::
ve˘‹
<
M©rix_t
> 
Te°X
;

89 
size_t
 
i
=0; i<
tŸÆRowsTe°I≈ut
;i++)

91 
Te°X
.
	`em∂a˚_back
(
tŸÆCﬁumnsTe°I≈ut
,1);

93 
°d
::
cout
<<"sizê"<<
Te°X
.
	`size
()<<°d::
ídl
;

96 
size_t
 
tŸÆRowsTe°Ouçut
= 2;

97 
size_t
 
tŸÆCﬁumnsTe°Ouçut
 = 2;

99 
°d
::
ve˘‹
<
M©rix_t
> 
Te°Y
;

100 
size_t
 
i
=0; i<
tŸÆRowsTe°Ouçut
;i++)

102 
Te°Y
.
	`em∂a˚_back
(
tŸÆCﬁumnsTe°Ouçut
,1);

104 
°d
::
cout
<<"sizêo‡ã° ouà"<<
Te°Y
.
	`size
()<<°d::
ídl
;

107 
M©rix_t
 
	`p
(
tŸÆCﬁumnsTe°Ouçut
,1);

108 
M©rix_t
 
	`dif„ªn˚
(
tŸÆCﬁumnsTe°Ouçut
,1);

109 
M©rix_t
 
	`Weights
(
tŸÆCﬁumnsTe°Ouçut
,
tŸÆCﬁumnsTøöI≈ut
);

110 
	`øndomM©rix
(
Weights
);

111 
°d
::
cout
<<"Weight†"<<
Weights
.
	`GëNrows
()<<" "<<Weights.
	`GëNcﬁs
()<<°d::
ídl
;

122 
M©rix_t
 
	`Bü£s
(
tŸÆCﬁumnsTe°Ouçut
,1);

123 
size_t
 
ïoch
=0;epoch<1000;epoch++){

124 
size_t
 
i
=0; i<
tŸÆRowsTøöI≈ut
; i++)

126  
size_t
 
j
=0; j<(size_t)
TøöX
[
i
].
	`GëNrows
(); j++)

128 
size_t
 
k
=0; k<(size_t)
TøöX
[
i
].
	`GëNcﬁs
(); k++)

130 
TøöX
[
i
](
j
,
k
Ë
åaö_X
[i][j];

143 
°d
::
cout
<<°d::
ídl
;

144 
size_t
 
j
=0; j<(size_t)
TøöY
[
i
].
	`GëNrows
(); j++)

146 
size_t
 
k
=0; k<(size_t)
TøöY
[
i
].
	`GëNcﬁs
(); k++)

148 
TøöY
[
i
](
j
,
k
Ë
åaö_Y
[i][j];

162 
°d
::
cout
<<"¸©ögÖ m©rix" << std::
ídl
;

163 
ã°F‹w¨dLogReg
<
TRe„ªn˚
<>>(
TøöX
[
i
],
p
, 
Weights
);

165 
°d
::
cout
<<"Addög Bü†m©rixÅÿgiví M©rix"<<°d::
ídl
;

166 
ã°AddBü£s
<
TRe„ªn˚
<>>(
p
,
Bü£s
);

168 
°d
::
cout
<<°d::
ídl
;

169 
°d
::
cout
<<"Giví M©rixá·î So·max O≥øti⁄"<<°d::
ídl
;

170 
ã°So·maxAE
<
TRe„ªn˚
<>>(
p
);

171 
°d
::
cout
<<°d::
ídl
;

173 
°d
::
cout
<<"upd©ögÖ¨amëîs" << std::
ídl
;

174 
ã°Upd©eP¨amsLogReg
<
TRe„ªn˚
<>>(
TøöX
[
i
],
TøöY
[i], 
dif„ªn˚
,
p
,

175 
Weights
,
Bü£s
,
À¨nögR©e
,
fB©chSize
);

181 
°d
::
cout
<<"ouçut"<<°d::
ídl
;

182 
size_t
 
i
=0;i<
tŸÆRowsTe°Ouçut
;i++)

184 
size_t
 
j
=0;j<(size_t)
Te°X
[
i
].
	`GëNrows
();j++)

186 
size_t
 
k
=0;k<(size_t)
Te°X
[
i
].
	`GëNcﬁs
();k++)

188 
Te°X
[
i
](
j
,
k
)=
ã°_X
[i][j];

191 
°d
::
cout
<<"¥edi˘ög" << std::
ídl
;

192 
ã°F‹w¨dLogReg
<
TRe„ªn˚
<>>(
Te°X
[
i
],
Te°Y
[i], 
Weights
);

193 
°d
::
cout
<<"Addög Bü†m©rixÅÿgiví M©rix"<<°d::
ídl
;

194 
ã°AddBü£s
<
TRe„ªn˚
<>>(
Te°Y
[
i
],
Bü£s
);

196 
°d
::
cout
<<°d::
ídl
;

197 
°d
::
cout
<<"Giví M©rixá·î So·max O≥øti⁄"<<°d::
ídl
;

198 
ã°So·maxAE
<
TRe„ªn˚
<>>(
Te°Y
[
i
]);

199 
°d
::
cout
<<°d::
ídl
;

201 
	}
}

202 
	$maö
()

204 
	`ã°
();

205 
	}
}

	@test/DNN/DAE/TestStackedLayers.cxx

12 
	~"Te°SèckedLayîs.h
"

13 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

14 
	~<io°ªam
>

16 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

17 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maö
()

22 
°d
::
cout
 << "Te°ög sèπed" << std::
ídl
;

24 
ã°Sècked
<
TRe„ªn˚
<>>();

29 
	}
}

	@test/DNN/DAE/TestTransformLayer.cxx

17 
	~<io°ªam
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

21 
	~"Te°Tønsf‹mLayî.h
"

23 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

77 
usög
 
	gM©rix_t
 = 
ty≥«me
 
TRe„ªn˚
<>::
M©rix_t
;

79 
	$maö
()

84 
°d
::
cout
<<"Te°ögÅønsf‹m Layî"<<°d::
ídl
<<std::endl;

85 
M©rix_t
 
	`A
(6,1);

86 
A
=(
ã°Tønsf‹m
<
TRe„ªn˚
<>>());

88 
°d
::
cout
<< "Te°ögÅønsf‹m: "<<°d::
ídl
;

90 
size_t
 
m
,
n
;

91 
m
=
A
.
	`GëNrows
();

92 
n
=
A
.
	`GëNcﬁs
();

93 
size_t
 
i
; i<
m
;i++)

95 
size_t
 
j
;j<
n
;j++)

97 
°d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

99 
°d
::
cout
<<°d::
ídl
;

101 
	}
}

	@test/DNN/DAE/TestUtilsAE.cxx

17 
	~<io°ªam
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

21 
	~"TMVA/DNN/Fun˘i⁄s.h
"

22 
	~"Te°UtûsAE.h
"

24 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

25 
usög
 
«me•a˚
 
	gTMVA
::
DNN
::
DAE
;

27 
usög
 
	gM©rix_t
 = 
ty≥«me
 
TRe„ªn˚
<>::
M©rix_t
;

29 
	$ã°1
()

31 
M©rix_t
 
	`A
(5,1);

32 
	`øndomM©rix
(
A
);

34 
°d
::
cout
<<"Giví M©rix"<<°d::
ídl
;

35 
size_t
 
i
=0; i < (size_t)
A
.
	`GëNrows
(); i++)

37 
size_t
 
j
=0; j < (size_tË
A
.
	`GëNcﬁs
();j++)

39 
°d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

41 
°d
::
cout
<<°d::
ídl
;

43 
°d
::
cout
<<°d::
ídl
;

45 
M©rix_t
 
	`Bü£s
(5,1);

46 
	`øndomM©rix
(
Bü£s
);

48 
°d
::
cout
<<"Bü†M©rix"<<°d::
ídl
;

49 
size_t
 
i
=0; i < (size_t)
Bü£s
.
	`GëNrows
(); i++)

51 
size_t
 
j
=0; j < (size_tË
Bü£s
.
	`GëNcﬁs
();j++)

53 
°d
::
cout
<<
	`Bü£s
(
i
,
j
)<<"\t";

55 
°d
::
cout
<<°d::
ídl
;

57 
°d
::
cout
<<°d::
ídl
;

59 
°d
::
cout
<<"Addög Bü†m©rixÅÿgiví M©rix"<<°d::
ídl
;

60 
ã°AddBü£s
<
TRe„ªn˚
<>>(
A
,
Bü£s
);

61 
°d
::
cout
<<°d::
ídl
;

62 
°d
::
cout
<<"Giví M©rixá·î So·max O≥øti⁄"<<°d::
ídl
;

63 
ã°So·maxAE
<
TRe„ªn˚
<>>(
A
);

64 
°d
::
cout
<<°d::
ídl
;

65 
	}
}

66 
	$ã°2
()

68 
M©rix_t
 
	`A
(5,4);

69 
	`øndomM©rix
(
A
);

71 
°d
::
cout
<<"Giví M©rix"<<°d::
ídl
;

72 
size_t
 
i
=0; i < (size_t)
A
.
	`GëNrows
(); i++)

74 
size_t
 
j
=0; j < (size_tË
A
.
	`GëNcﬁs
();j++)

76 
°d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

78 
°d
::
cout
<<°d::
ídl
;

80 
°d
::
cout
<<°d::
ídl
;

82 
M©rix_t
 
	`Bü£s
(5,1);

83 
	`øndomM©rix
(
Bü£s
);

85 
°d
::
cout
<<"Bü†M©rix"<<°d::
ídl
;

86 
size_t
 
i
=0; i < (size_t)
Bü£s
.
	`GëNrows
(); i++)

88 
size_t
 
j
=0; j < (size_tË
Bü£s
.
	`GëNcﬁs
();j++)

90 
°d
::
cout
<<
	`Bü£s
(
i
,
j
)<<"\t";

92 
°d
::
cout
<<°d::
ídl
;

94 
°d
::
cout
<<°d::
ídl
;

96 
°d
::
cout
<<"Giví M©rixá·î So·max O≥øti⁄"<<°d::
ídl
;

97 
ã°So·maxAE
<
TRe„ªn˚
<>>(
A
);

98 
°d
::
cout
<<°d::
ídl
;

100 
°d
::
cout
<<"Addög Bü†m©rixÅÿgiví M©rix"<<°d::
ídl
;

101 
ã°AddBü£s
<
TRe„ªn˚
<>>(
A
,
Bü£s
);

102 
°d
::
cout
<<°d::
ídl
;

105 
	}
}

107 
	$maö
()

109 
	`ã°1
();

110 
	`ã°2
();

111 
	}
}

	@test/DNN/TestActivationFunctions.cxx

17 
	~<io°ªam
>

18 
	~"Te°A˘iv©i⁄Fun˘i⁄s.h
"

20 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

22 
	$maö
()

24 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

25 
°d
::
cout
 << "Te°ög A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

27 
Sˇœr_t
 
îr‹
;

31 
îr‹
 = 
ã°Idítôy
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

32 
°d
::
cout
 << "Testing identityáctivation: ";

33 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

34 i‡(
îr‹
 > 1e-10)

37 
îr‹
 = 
ã°IdítôyDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

38 
°d
::
cout
 << "Testing identityáctivation derivative: ";

39 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

40 i‡(
îr‹
 > 1e-10)

45 
îr‹
 = 
ã°Rñu
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

46 
°d
::
cout
 << "Testing ReLUáctivation: ";

47 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

48 i‡(
îr‹
 > 1e-10)

51 
îr‹
 = 
ã°RñuDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

52 
°d
::
cout
 << "Testing ReLUáctivation derivative: ";

53 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

54 i‡(
îr‹
 > 1e-10)

59 
îr‹
 = 
ã°Sigmoid
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

60 
°d
::
cout
 << "Testing Sigmoidáctivation: ";

61 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

62 i‡(
îr‹
 > 1e-10)

65 
îr‹
 = 
ã°SigmoidDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

66 
°d
::
cout
 << "Testing Sigmoidáctivation derivative: ";

67 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

68 i‡(
îr‹
 > 1e-10)

73 
îr‹
 = 
ã°T™h
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

74 
°d
::
cout
 << "Testing TanHáctivation: ";

75 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

76 i‡(
îr‹
 > 1e-10)

79 
îr‹
 = 
ã°T™hDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

80 
°d
::
cout
 << "Testing TanHáctivation derivative: ";

81 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

82 i‡(
îr‹
 > 1e-10)

87 
îr‹
 = 
ã°SymmëricRñuDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

88 
°d
::
cout
 << "Testing Symm. ReLUáctivation: ";

89 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

90 i‡(
îr‹
 > 1e-10)

93 
îr‹
 = 
ã°SymmëricRñuDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

94 
°d
::
cout
 << "Testing Symm. ReLUáctivation derivative: ";

95 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

96 i‡(
îr‹
 > 1e-10)

101 
îr‹
 = 
ã°So·Sign
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

102 
°d
::
cout
 << "Testing Soft Signáctivation: ";

103 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

104 i‡(
îr‹
 > 1e-10)

107 
îr‹
 = 
ã°So·SignDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

108 
°d
::
cout
 << "Testing Soft Signáctivation derivative: ";

109 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

110 i‡(
îr‹
 > 1e-10)

115 
îr‹
 = 
ã°Gauss
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

116 
°d
::
cout
 << "Testing Gaussáctivation: ";

117 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

118 i‡(
îr‹
 > 1e-10)

121 
îr‹
 = 
ã°GaussDîiv©ive
<
TRe„ªn˚
<
Sˇœr_t
>>(10);

122 
°d
::
cout
 << "Testing Gaussáctivation derivative: ";

123 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

124 i‡(
îr‹
 > 1e-10)

128 
	}
}

	@test/DNN/TestActivationFunctionsCpu.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

19 
	~"Utûôy.h
"

20 
	~"Te°A˘iv©i⁄Fun˘i⁄s.h
"

22 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
	$maö
()

26 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

28 
°d
::
cout
 << "Te°ög A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

30 
îr‹
;

34 
îr‹
 = 
ã°Idítôy
<
TCpu
<
Sˇœr_t
>>(10);

35 
°d
::
cout
 << "Testing identityáctivation: ";

36 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

37 i‡(
îr‹
 > 1e-10)

40 
îr‹
 = 
ã°IdítôyDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

41 
°d
::
cout
 << "Testing identityáctivation derivative: ";

42 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

43 i‡(
îr‹
 > 1e-10)

48 
îr‹
 = 
ã°Rñu
<
TCpu
<
Sˇœr_t
>>(10);

49 
°d
::
cout
 << "Testing ReLUáctivation: ";

50 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

51 i‡(
îr‹
 > 1e-10)

54 
îr‹
 = 
ã°RñuDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

55 
°d
::
cout
 << "Testing ReLUáctivation derivative: ";

56 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

57 i‡(
îr‹
 > 1e-10)

62 
îr‹
 = 
ã°Sigmoid
<
TCpu
<
Sˇœr_t
>>(10);

63 
°d
::
cout
 << "Testing Sigmoidáctivation: ";

64 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

65 i‡(
îr‹
 > 1e-10)

68 
îr‹
 = 
ã°SigmoidDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

69 
°d
::
cout
 << "Testing Sigmoidáctivation derivative: ";

70 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

71 i‡(
îr‹
 > 1e-10)

76 
îr‹
 = 
ã°T™h
<
TCpu
<
Sˇœr_t
>>(10);

77 
°d
::
cout
 << "Testing TanHáctivation: ";

78 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

79 i‡(
îr‹
 > 1e-10)

82 
îr‹
 = 
ã°T™hDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

83 
°d
::
cout
 << "Testing TanHáctivation derivative: ";

84 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

85 i‡(
îr‹
 > 1e-10)

90 
îr‹
 = 
ã°SymmëricRñu
<
TCpu
<
Sˇœr_t
>>(10);

91 
°d
::
cout
 << "Testing Symm. ReLUáctivation: ";

92 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

93 i‡(
îr‹
 > 1e-10)

96 
îr‹
 = 
ã°SymmëricRñuDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

97 
°d
::
cout
 << "Testing Symm. ReLUáctivation derivative: ";

98 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

99 i‡(
îr‹
 > 1e-10)

104 
îr‹
 = 
ã°So·Sign
<
TCpu
<
Sˇœr_t
>>(10);

105 
°d
::
cout
 << "Testing Soft Signáctivation: ";

106 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

107 i‡(
îr‹
 > 1e-10)

110 
îr‹
 = 
ã°So·SignDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

111 
°d
::
cout
 << "Testing Soft Signáctivation derivative: ";

112 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

113 i‡(
îr‹
 > 1e-10)

118 
îr‹
 = 
ã°Gauss
<
TCpu
<
Sˇœr_t
>>(10);

119 
°d
::
cout
 << "Testing Gaussáctivation: ";

120 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

121 i‡(
îr‹
 > 1e-10)

124 
îr‹
 = 
ã°GaussDîiv©ive
<
TCpu
<
Sˇœr_t
>>(10);

125 
°d
::
cout
 << "Testing Gaussáctivation derivative: ";

126 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

127 i‡(
îr‹
 > 1e-10)

131 
	}
}

	@test/DNN/TestActivationFunctionsCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

19 
	~"Utûôy.h
"

20 
	~"Te°A˘iv©i⁄Fun˘i⁄s.h
"

22 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
	$maö
()

26 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

28 
°d
::
cout
 << "Te°ög A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

30 
îr‹
;

34 
îr‹
 = 
ã°Idítôy
<
TCuda
<
Sˇœr_t
>>(10);

35 
°d
::
cout
 << "Testing identityáctivation: ";

36 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

37 i‡(
îr‹
 > 1e-5)

40 
îr‹
 = 
ã°IdítôyDîiv©ive
<
TCuda
<
Sˇœr_t
>>(10);

41 
°d
::
cout
 << "Testing identityáctivation derivative: ";

42 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

43 i‡(
îr‹
 > 1e-5)

48 
îr‹
 = 
ã°Rñu
<
TCuda
<
Sˇœr_t
>>(10);

49 
°d
::
cout
 << "Testing ReLUáctivation: ";

50 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

51 i‡(
îr‹
 > 1e-5)

54 
îr‹
 = 
ã°RñuDîiv©ive
<
TCuda
<
Sˇœr_t
>>(10);

55 
°d
::
cout
 << "Testing ReLUáctivation derivative: ";

56 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

57 i‡(
îr‹
 > 1e-5)

62 
îr‹
 = 
ã°Sigmoid
<
TCuda
<
Sˇœr_t
>>(10);

63 
°d
::
cout
 << "Testing Sigmoidáctivation: ";

64 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

65 i‡(
îr‹
 > 1e-5)

68 
îr‹
 = 
ã°SigmoidDîiv©ive
<
TCuda
<
Sˇœr_t
>>(10);

69 
°d
::
cout
 << "Testing Sigmoidáctivation derivative: ";

70 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

71 i‡(
îr‹
 > 1e-5)

74 
	}
}

	@test/DNN/TestBackpropagation.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~"Te°Back¥›ag©i⁄.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
°d
::
cout
 << "Te°ög Back¥›ag©i⁄:" << std::
ídl
;

27 
îr‹
;

33 
îr‹
 = 
ã°Back¥›ag©i⁄WeightsLöór
<
TRe„ªn˚
<>>(1.0);

34 i‡(
îr‹
 > 1e-3)

37 
îr‹
 = 
ã°Back¥›ag©i⁄L1Reguœriz©i⁄
<
TRe„ªn˚
<>>(1e-2);

38 i‡(
îr‹
 > 1e-3)

41 
îr‹
 = 
ã°Back¥›ag©i⁄L2Reguœriz©i⁄
<
TRe„ªn˚
<>>(1.0);

42 i‡(
îr‹
 > 1e-3)

45 
îr‹
 = 
ã°Back¥›ag©i⁄Bü£sLöór
<
TRe„ªn˚
<>>(1.0);

46 i‡(
îr‹
 > 1e-3)

50 
	}
}

	@test/DNN/TestBackpropagationCpu.cxx

17 
	~"TM©rix.h
"

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

19 
	~"Te°Back¥›ag©i⁄.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

26 
°d
::
cout
 << "Te°ög Back¥›ag©i⁄:" << std::
ídl
;

28 
îr‹
;

29 
úë
 = 0;

31 
îr‹
 = 
ã°Back¥›ag©i⁄WeightsLöór
<
TCpu
<
Sˇœr_t
>>(1.0);

32 i‡(
îr‹
 > 1e-3)

33 
úë
++;

35 
îr‹
 = 
ã°Back¥›ag©i⁄L1Reguœriz©i⁄
<
TCpu
<
Sˇœr_t
>>(1e-2);

36 i‡(
îr‹
 > 1e-3)

37 
úë
++;

39 
îr‹
 = 
ã°Back¥›ag©i⁄L2Reguœriz©i⁄
<
TCpu
<
Sˇœr_t
>>(1.0);

40 i‡(
îr‹
 > 1e-3)

41 
úë
++;

43 
îr‹
 = 
ã°Back¥›ag©i⁄Bü£sLöór
<
TCpu
<
Sˇœr_t
>>(1.0);

44 i‡(
îr‹
 > 1e-3)

45 
úë
++;

47  
úë
;

48 
	}
}

	@test/DNN/TestBackpropagationCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

19 
	~"TM©rix.h
"

20 
	~"Te°Back¥›ag©i⁄.h
"

22 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
	$maö
()

26 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

28 
°d
::
cout
 << "Te°ög Back¥›ag©i⁄:" << std::
ídl
;

29 
îr‹
;

30 
îr‹
 = 
ã°Back¥›ag©i⁄WeightsLöór
<
TCuda
<
Sˇœr_t
>>(1.0);

31 i‡(
îr‹
 > 1e-3)

33 
îr‹
 = 
ã°Back¥›ag©i⁄L1Reguœriz©i⁄
<
TCuda
<
Sˇœr_t
>>(1e-2);

34 i‡(
îr‹
 > 1e-3)

36 
îr‹
 = 
ã°Back¥›ag©i⁄L2Reguœriz©i⁄
<
TCuda
<
Sˇœr_t
>>(1.0);

37 i‡(
îr‹
 > 1e-3)

39 
îr‹
 = 
ã°Back¥›ag©i⁄Bü£sLöór
<
TCuda
<
Sˇœr_t
>>(1.0);

40 i‡(
îr‹
 > 1e-3)

43 
	}
}

	@test/DNN/TestCuda.cxx

1 
	~"Utûôy.h
"

2 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

3 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

4 
	~<°dlib.h
>

6 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

9 
DoubÀ_t
 
	$ã°Mu…ùly
()

11 c⁄° 
size_t
 
¡e°s
 = 100;

13 
DoubÀ_t
 
maximumEº‹
 = 0;

15 
size_t
 
i
 = 0; i < 
¡e°s
; i++) {

16 
size_t
 
m
, 
n
, 
k
;

17 
m
 = 
	`ønd
() % 50 + 1;

18 
n
 = 
	`ønd
() % 50 + 1;

19 
k
 = 
	`ønd
() % 50 + 1;

21 
TM©rixT
<
DoubÀ_t
> 
	`A
(
m
,
k
), 
	`AT
(k,mË, 
	`B
(k,
n
), 
	`BT
“,k), 
	`C
(m,n);

22 
	`øndomM©rix
(
A
);

23 
	`øndomM©rix
(
AT
);

24 
	`øndomM©rix
(
B
);

25 
	`øndomM©rix
(
BT
);

26 
TCudaM©rix
 
	`ACuda
(
A
), 
	`ATCuda
(
AT
), 
	`BCuda
(
B
), 
	`BTCuda
(
BT
), 
	`CCuda
(
C
);

28 
TRe„ªn˚
<
DoubÀ_t
>::
	`Mu…ùlyTøn•o£
(
C
, 
A
, 
BT
);

29 
TCuda
<
Ál£
>::
	`Mu…ùlyTøn•o£
(
CCuda
, 
ACuda
, 
BTCuda
);

30 
TM©rixT
<
DoubÀ_t
> 
	`CRef
(
CCuda
);

31 
DoubÀ_t
 
îr‹
 = 
	`maximumRñ©iveEº‹
(
C
, 
CRef
);

32 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

34 
C
.
	`Mu…
(
A
,
B
);

35 
TCuda
<
Ál£
>::
	`Mu…ùly
(
CCuda
, 
ACuda
, 
BCuda
);

36 
CRef
 = 
CCuda
;

37 
îr‹
 = 
	`maximumRñ©iveEº‹
(
C
, 
CRef
);

38 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

40 
C
.
	`TMu…
(
AT
,
B
);

41 
TCuda
<
Ál£
>::
	`Tøn•o£Mu…ùly
(
CCuda
, 
ATCuda
, 
BCuda
);

42 
CRef
 = 
CCuda
;

43 
îr‹
 = 
	`maximumRñ©iveEº‹
(
C
, 
CRef
);

44 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

46  
maximumEº‹
;

47 
	}
}

50 
DoubÀ_t
 
	$ã°AddRowWi£
()

52 c⁄° 
size_t
 
¡e°s
 = 10;

54 
DoubÀ_t
 
maximumEº‹
 = 0;

56 
size_t
 
i
 = 0; i < 
¡e°s
; i++) {

57 
size_t
 
m
, 
n
;

58 
m
 = 
	`ønd
() % 50 + 1;

59 
n
 = 
	`ønd
() % 50 + 1;

61 
TM©rixT
<
DoubÀ_t
> 
	`A
(
m
,
n
), 
	`B
(m,n), 
	`thëa
(n,1);

63 
	`øndomM©rix
(
thëa
);

64 
TCudaM©rix
 
	`ACuda
(
A
), 
	`BCuda
(
B
), 
	`thëaCuda
(
thëa
);

66 
TRe„ªn˚
<
DoubÀ_t
>::
	`AddRowWi£
(
A
, 
thëa
);

67 
TCuda
<
Ál£
>::
	`AddRowWi£
(
ACuda
,
thëaCuda
);

68 
TM©rixT
<
DoubÀ_t
> 
	`ARef
(
ACuda
);

70 
DoubÀ_t
 
îr‹
 = 
	`maximumRñ©iveEº‹
(
A
, 
ARef
);

71 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

73  
maximumEº‹
;

74 
	}
}

77 
DoubÀ_t
 
	$ã°Hadam¨d
()

79 c⁄° 
size_t
 
¡e°s
 = 10;

80 
DoubÀ_t
 
maximumEº‹
 = 0;

82 
size_t
 
i
 = 0; i < 
¡e°s
; i++) {

83 
size_t
 
m
, 
n
;

84 
m
 = 
	`ønd
() % 10 + 1;

85 
n
 = 
	`ønd
() % 10 + 1;

87 
TM©rixT
<
DoubÀ_t
> 
	`A
(
m
,
n
), 
	`B
(m,n);

88 
	`øndomM©rix
(
A
);

89 
	`øndomM©rix
(
B
);

90 
TCudaM©rix
 
	`ACuda
(
A
), 
	`BCuda
(
B
);

92 
size_t
 
j
 = 0; j < (size_tË
A
.
	`GëNrows
(); j++) {

93 
size_t
 
k
 = 0; k < (size_tË
A
.
	`GëNcﬁs
(); k++) {

94 
	`A
(
j
,
k
Ë*
	`B
(j,k);

98 
TCuda
<
Ál£
>::
	`Hadam¨d
(
ACuda
, 
BCuda
);

99 
TM©rixT
<
DoubÀ_t
> 
	`ARef
(
ACuda
);

100 
DoubÀ_t
 
îr‹
 = 
	`maximumRñ©iveEº‹
(
A
, 
ARef
);

101 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

103  
maximumEº‹
;

104 
	}
}

107 
DoubÀ_t
 
	$ã°Redu˘i⁄
()

109 c⁄° 
size_t
 
¡e°s
 = 10;

110 
DoubÀ_t
 
maximumEº‹
 = 0;

112 
size_t
 
i
 = 0; i < 
¡e°s
; i++) {

113 
size_t
 
m
, 
n
;

114 
m
 = 
	`ønd
() % 1000 + 1;

115 
n
 = 
	`ønd
() % 1000 + 1;

117 
TM©rixT
<
DoubÀ_t
> 
	`A
(
m
,
n
);

119 
size_t
 
j
 = 0; j < 
m
; j++) {

120 
size_t
 
k
 = 0; k < 
n
; k++) {

121 
	`A
(
j
,
k
) = 1.0;

124 
TCudaM©rix
 
	`ACuda
(
A
);

126 
TCudaM©rix
 
	`BCuda
(1,
n
);

127 
TCuda
<
Ál£
>::
	`InôülizeZîo
(
BCuda
);

128 
DoubÀ_t
 
s
 = 
TCuda
<
Ál£
>::
	`Sum
(
A
);

129 
TCuda
<
Ál£
>::
	`SumCﬁumns
(
BCuda
, 
ACuda
);

130 
TM©rixT
<
DoubÀ_t
> 
	`B
(
BCuda
);

132 
DoubÀ_t
 
îr‹
 = 
s
 - ((DoubÀ_tË
m
 * 
n
);

133 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

135 
size_t
 
j
 = 0; j < 
n
; j++) {

137 
îr‹
 = 
°d
::
	`abs
(
	`B
(0,
j
Ë- 
m
);

138 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

141  
maximumEº‹
;

142 
	}
}

145 
DoubÀ_t
 
	$ã°SˇÀAdd
()

147 c⁄° 
size_t
 
¡e°s
 = 10;

148 
DoubÀ_t
 
maximumEº‹
 = 0;

150 
size_t
 
i
 = 0; i < 
¡e°s
; i++) {

151 
size_t
 
m
, 
n
;

152 
m
 = 
	`ønd
() % 1000 + 1;

153 
n
 = 
	`ønd
() % 1000 + 1;

155 
TM©rixT
<
DoubÀ_t
> 
	`A
(
m
,
n
), 
	`B
(m,n);

157 
	`øndomM©rix
(
A
);

158 
	`øndomM©rix
(
B
);

160 
TCudaM©rix
 
	`ACuda
(
A
);

161 
TCudaM©rix
 
	`BCuda
(
B
);

163 
DoubÀ_t
 
bëa
 = ((DoubÀ_tË
	`ønd
()Ë/ ((DoubÀ_tË
RAND_MAX
);

164 
TRe„ªn˚
<
DoubÀ_t
>::
	`SˇÀAdd
(
A
, 
B
, 
bëa
);

165 
TCuda
<
Ál£
>::
	`SˇÀAdd
(
ACuda
, 
BCuda
, 
bëa
);

167 
DoubÀ_t
 
îr‹
 = 
	`maximumRñ©iveEº‹
(
A
, (
TM©rixT
<DoubÀ_t>Ë
ACuda
);

168 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

170  
maximumEº‹
;

171 
	}
}

174 
	$maö
()

176 
DoubÀ_t
 
îr‹
;

177 
îr‹
 = 
	`ã°Redu˘i⁄
();

178 
°d
::
cout
 << "TestingÑeduction: max.Ñel.Érror = ";

179 
°d
::
cout
 << 
îr‹
 << std::
ídl
;

181 
îr‹
 = 
	`ã°SˇÀAdd
();

182 
°d
::
cout
 << "Testing scale_add: max.Ñel.Érror = ";

183 
°d
::
cout
 << 
îr‹
 << std::
ídl
;

185 
îr‹
 = 
	`ã°Hadam¨d
();

186 
°d
::
cout
 << "Testing hadamard: max.Ñel.Érror = ";

187 
°d
::
cout
 << 
îr‹
 << std::
ídl
;

189 
îr‹
 = 
	`ã°Mu…ùly
();

190 
°d
::
cout
 << "Testing multiplication: max.Ñel.Érror = ";

191 
°d
::
cout
 << 
îr‹
 << std::
ídl
;

193 
îr‹
 = 
	`ã°AddRowWi£
();

194 
°d
::
cout
 << "Testingádd_row_wise: max.Ñel.Érror = ";

195 
°d
::
cout
 << 
îr‹
 << std::
ídl
;

196 
	}
}

	@test/DNN/TestDataLoader.cxx

16 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

17 
	~"Te°D©aLﬂdî.h
"

19 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

21 
	$maö
 ()

23 
DoubÀ_t
 
îr‹
 = 
ã°Idítôy
<
TRe„ªn˚
<Double_t>>();

24 
°d
::
cout
 << "Te°ögÑe„ªn˚ d©®lﬂdî: Mex.Ññ.Éº‹ = " << 
îr‹
;

25 
°d
::
cout
 << std::
ídl
;

26 
	}
}

	@test/DNN/TestDataLoaderCpu.cxx

16 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

17 
	~"Te°D©aLﬂdî.h
"

19 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

21 
	$maö
 ()

23 
usög
 
Sˇœr_t
 = 
Ról_t
;

25 
°d
::
cout
 << "Te°ög d©®lﬂdî:" << std::
ídl
;

27 
Sˇœr_t
 
maximumEº‹
 = 0.0;

29 
Sˇœr_t
 
îr‹
 = 
ã°Sum
<
TCpu
<Scalar_t>>();

30 
°d
::
cout
 << "Sum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

31 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

32 
îr‹
 = 
ã°Idítôy
<
TCpu
<
Sˇœr_t
>>();

33 
°d
::
cout
 << "Idítôy: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

34 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

36 i‡(
maximumEº‹
 > 1e-3) {

39 
	}
}

	@test/DNN/TestDataLoaderCuda.cxx

16 
	~<io°ªam
>

17 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

18 
	~"Te°D©aLﬂdî.h
"

20 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

22 
	$maö
()

24 
°d
::
cout
 << "Te°ög d©®lﬂdî:" << std::
ídl
;

25 
usög
 
Sˇœr_t
 = 
Ról_t
;

27 
Sˇœr_t
 
maximumEº‹
 = 0.0;

29 
Sˇœr_t
 
îr‹
 = 
ã°Sum
<
TCuda
<Scalar_t>>();

30 
°d
::
cout
 << "Sum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

31 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

32 
îr‹
 = 
ã°Idítôy
<
TCuda
<
Sˇœr_t
>>();

33 
°d
::
cout
 << "Idítôy: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

34 
maximumEº‹
 = 
°d
::
	`max
(
îr‹
, maximumError);

36 i‡(
maximumEº‹
 > 1e-3) {

40 
	}
}

	@test/DNN/TestDerivatives.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~"Te°Dîiv©ives.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

26 
îr‹
;

32 
°d
::
cout
 << "A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

33 
îr‹
 = 
ã°A˘iv©i⁄Fun˘i⁄Dîiv©ives
<
TRe„ªn˚
<>>();

34 
°d
::
cout
 << "Total : ";

35 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
	`¥öt_îr‹
(
îr‹
);

36 
°d
::
cout
 << std::
ídl
 << std::endl;

37 i‡(
îr‹
 > 1e-5)

44 
°d
::
cout
 << "Los†Fun˘i⁄s:" << std::
ídl
;

45 
îr‹
 = 
ã°LossFun˘i⁄Gødõ¡s
<
TRe„ªn˚
<>>();

46 
°d
::
cout
 << "Total : ";

47 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
	`¥öt_îr‹
(
îr‹
);

48 
°d
::
cout
 << std::
ídl
 << std::endl;

49 i‡(
îr‹
 > 1e-5)

56 
°d
::
cout
 << "Reguœriz©i⁄:" << std::
ídl
;

57 
îr‹
 = 
ã°Reguœriz©i⁄Gødõ¡s
<
TRe„ªn˚
<>>();

58 
°d
::
cout
 << "Total : ";

59 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
	`¥öt_îr‹
(
îr‹
);

60 
°d
::
cout
 << std::
ídl
 << std::endl;

61 i‡(
îr‹
 > 1e-5)

65 
	}
}

	@test/DNN/TestDerivativesCpu.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

19 
	~"Te°Dîiv©ives.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

27 
îr‹
;

33 
°d
::
cout
 << "A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

34 
îr‹
 = 
ã°A˘iv©i⁄Fun˘i⁄Dîiv©ives
<
TCpu
<
Sˇœr_t
>>();

35 
°d
::
cout
 << "Total : ";

36 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

37 
°d
::
cout
 << std::
ídl
 << std::endl;

38 i‡(
îr‹
 > 1e-3)

45 
°d
::
cout
 << "Los†Fun˘i⁄s:" << std::
ídl
;

46 
îr‹
 = 
ã°LossFun˘i⁄Gødõ¡s
<
TCpu
<
Sˇœr_t
>>();

47 
°d
::
cout
 << "Total : ";

48 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

49 
°d
::
cout
 << std::
ídl
 << std::endl;

50 i‡(
îr‹
 > 1e-3)

57 
°d
::
cout
 << "Reguœriz©i⁄:" << std::
ídl
;

58 
îr‹
 = 
ã°Reguœriz©i⁄Gødõ¡s
<
TCpu
<
Sˇœr_t
>>();

59 
°d
::
cout
 << "Total : ";

60 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

61 
°d
::
cout
 << std::
ídl
 << std::endl;

62 i‡(
îr‹
 > 1e-3)

66 
	}
}

	@test/DNN/TestDerivativesCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

19 
	~"Te°Dîiv©ives.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

26 
DoubÀ_t
 
îr‹
;

32 
°d
::
cout
 << "A˘iv©i⁄ Fun˘i⁄s:" << std::
ídl
;

33 
îr‹
 = 
ã°A˘iv©i⁄Fun˘i⁄Dîiv©ives
<
TCuda
<
Sˇœr_t
>>();

34 
°d
::
cout
 << "Total : ";

35 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

36 
°d
::
cout
 << std::
ídl
 << std::endl;

37 i‡(
îr‹
 > 1e-2)

44 
°d
::
cout
 << "Los†Fun˘i⁄s:" << std::
ídl
;

45 
îr‹
 = 
ã°LossFun˘i⁄Gødõ¡s
<
TCuda
<
Sˇœr_t
>>();

46 
°d
::
cout
 << "Total : ";

47 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

48 
°d
::
cout
 << std::
ídl
 << std::endl;

49 i‡(
îr‹
 > 1e-3)

56 
°d
::
cout
 << "Reguœriz©i⁄:" << std::
ídl
;

57 
îr‹
 = 
ã°Reguœriz©i⁄Gødõ¡s
<
TCuda
<
Sˇœr_t
>>();

58 
°d
::
cout
 << "Total : ";

59 
°d
::
cout
 << "Maximum Rñ©ivêEº‹ = " << 
îr‹
;

60 
°d
::
cout
 << std::
ídl
 << std::endl;

61 i‡(
îr‹
 > 1e-3)

65 
	}
}

	@test/DNN/TestLossFunctions.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~"Te°LossFun˘i⁄s.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
°d
::
cout
 << "Te°ög Los†Fun˘i⁄s:" << std::
ídl
 << std::endl;

27 
îr‹
;

33 
îr‹
 = 
ã°MónSqu¨edEº‹
<
TRe„ªn˚
<>>(10);

34 
°d
::
cout
 << "Testing mean squaredÉrrorÜoss: ";

35 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

36 i‡(
îr‹
 > 1e-10)

39 
îr‹
 = 
ã°MónSqu¨edEº‹Gødõ¡s
<
TRe„ªn˚
<>>(10);

40 
°d
::
cout
 << "Testing mean squaredÉrror gradient: ";

41 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

42 i‡(
îr‹
 > 1e-10)

49 
îr‹
 = 
ã°CrossE¡r›y
<
TRe„ªn˚
<>>(10);

50 
°d
::
cout
 << "Testing crossÉntropyÜoss: ";

51 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

52 i‡(
îr‹
 > 1e-10)

55 
îr‹
 = 
ã°CrossE¡r›yGødõ¡s
<
TRe„ªn˚
<>>(10);

56 
°d
::
cout
 << "Testing crossÉntropy gradient: ";

57 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

58 i‡(
îr‹
 > 1e-10)

60 
	}
}

	@test/DNN/TestLossFunctionsCpu.cxx

18 
	~<io°ªam
>

19 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

20 
	~"Te°LossFun˘i⁄s.h
"

22 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

24 
	$maö
()

26 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

28 
°d
::
cout
 << "Te°ög Los†Fun˘i⁄s:" << std::
ídl
 << std::endl;

30 
îr‹
;

36 
îr‹
 = 
ã°MónSqu¨edEº‹
<
TCpu
<
Sˇœr_t
>>(10);

37 
°d
::
cout
 << "Testing mean squaredÉrrorÜoss: ";

38 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

39 i‡(
îr‹
 > 1e-3)

42 
îr‹
 = 
ã°MónSqu¨edEº‹Gødõ¡s
<
TCpu
<
Sˇœr_t
>>(10);

43 
°d
::
cout
 << "Testing mean squaredÉrror gradient: ";

44 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

45 i‡(
îr‹
 > 1e-3)

52 
îr‹
 = 
ã°CrossE¡r›y
<
TCpu
<
Sˇœr_t
>>(10);

53 
°d
::
cout
 << "Testing crossÉntropyÜoss: ";

54 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

55 i‡(
îr‹
 > 1e-3)

58 
îr‹
 = 
ã°CrossE¡r›yGødõ¡s
<
TCpu
<
Sˇœr_t
>>(10);

59 
°d
::
cout
 << "Testing mean squaredÉrror gradient: ";

60 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

61 i‡(
îr‹
 > 1e-3)

68 
îr‹
 = 
ã°So·maxCrossE¡r›y
<
TCpu
<
Sˇœr_t
>>(10);

69 
°d
::
cout
 << "Testing softmax crossÉntropyÜoss: ";

70 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

71 i‡(
îr‹
 > 1e-3)

74 
îr‹
 = 
ã°So·maxCrossE¡r›yGødõ¡s
<
TCpu
<
Sˇœr_t
>>(10);

75 
°d
::
cout
 << "Testing softmax crossÉntropy gradient: ";

76 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

77 i‡(
îr‹
 > 1e-3)

79 
	}
}

	@test/DNN/TestLossFunctionsCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

19 
	~"Te°LossFun˘i⁄s.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
usög
 
Sˇœr_t
 = 
DoubÀ_t
;

26 
°d
::
cout
 << "Te°ög Los†Fun˘i⁄s:" << std::
ídl
 << std::endl;

28 
îr‹
;

34 
îr‹
 = 
ã°MónSqu¨edEº‹
<
TCuda
<
Sˇœr_t
>>(10);

35 
°d
::
cout
 << "Testing mean squaredÉrrorÜoss: ";

36 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

37 i‡(
îr‹
 > 1e-3)

40 
îr‹
 = 
ã°MónSqu¨edEº‹Gødõ¡s
<
TCuda
<
Sˇœr_t
>>(10);

41 
°d
::
cout
 << "Testing mean squaredÉrror gradient: ";

42 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

43 i‡(
îr‹
 > 1e-3)

50 
îr‹
 = 
ã°CrossE¡r›y
<
TCuda
<
Sˇœr_t
>>(10);

51 
°d
::
cout
 << "Testing crossÉntropyÜoss: ";

52 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

53 i‡(
îr‹
 > 1e-3)

56 
îr‹
 = 
ã°CrossE¡r›yGødõ¡s
<
TCuda
<
Sˇœr_t
>>(10);

57 
°d
::
cout
 << "Testing mean squaredÉrror gradient: ";

58 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

59 i‡(
îr‹
 > 1e-3)

66 
îr‹
 = 
ã°So·maxCrossE¡r›y
<
TCuda
<
Sˇœr_t
>>(10);

67 
°d
::
cout
 << "Testing softmax crossÉntropyÜoss: ";

68 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

69 i‡(
îr‹
 > 1e-3)

72 
îr‹
 = 
ã°So·maxCrossE¡r›yGødõ¡s
<
TCuda
<
Sˇœr_t
>>(10);

73 
°d
::
cout
 << "Testing softmax crossÉntropy gradient: ";

74 
°d
::
cout
 << "maximumÑñ©ivêîr‹ = " << 
	`¥öt_îr‹
(
îr‹
Ë<< std::
ídl
;

75 i‡(
îr‹
 > 1e-3)

77 
	}
}

	@test/DNN/TestMatrixArithmeticCpu.cxx

16 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

17 
	~"Te°M©rixArôhmëic.h
"

19 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

21 
	$maö
()

23 
°d
::
cout
 << "Te°ög CPU m©rixárôhmëi¯(doubÀ):" << std::
ídl
;

25 
DoubÀ_t
 
îr‹
 = 
ã°Mu…ùliˇti⁄
<
TCpu
<Double_t>>(10);

26 
°d
::
cout
 << "Mu…ùliˇti⁄: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

27 i‡(
îr‹
 > 1e-3)

30 
îr‹
 = 
ã°SumCﬁumns
<
TCpu
<
DoubÀ_t
>>(1);

31 
°d
::
cout
 << "Cﬁum¿Sum: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

32 i‡(
îr‹
 > 1e-3)

35 
°d
::
cout
 << "Te°ög CPU m©rixárôhmëi¯(Êﬂt):" << std::
ídl
;

37 
îr‹
 = 
ã°Mu…ùliˇti⁄
<
TCpu
<
Ról_t
>>(10);

38 
°d
::
cout
 << "Mu…ùliˇti⁄: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

39 i‡(
îr‹
 > 1e-1)

42 
îr‹
 = 
ã°SumCﬁumns
<
TCpu
<
Ról_t
>>(1);

43 
°d
::
cout
 << "Cﬁum¿Sum: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

44 i‡(
îr‹
 > 1e-1)

46 
	}
}

	@test/DNN/TestMatrixArithmeticCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

19 
	~"Te°M©rixArôhmëic.h
"

21 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

23 
	$maö
()

25 
°d
::
cout
 << "Te°ög CUDA m©rixárôhmëi¯(doubÀ):" << std::
ídl
;

27 
DoubÀ_t
 
îr‹
 = 
ã°Mu…ùliˇti⁄
<
TCuda
<Double_t>>(10);

28 
°d
::
cout
 << "Mu…ùliˇti⁄: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

29 i‡(
îr‹
 > 1e-3)

32 
îr‹
 = 
ã°SumCﬁumns
<
TCuda
<
DoubÀ_t
>>(1);

33 
°d
::
cout
 << "Cﬁum¿Sum: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

34 i‡(
îr‹
 > 1e-3)

37 
°d
::
cout
 << "Te°ög CUDA m©rixárôhmëi¯(Êﬂt):" << std::
ídl
;

39 
îr‹
 = 
ã°Mu…ùliˇti⁄
<
TCuda
<
Ról_t
>>(10);

40 
°d
::
cout
 << "Mu…ùliˇti⁄: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

41 i‡(
îr‹
 > 1)

44 
îr‹
 = 
ã°SumCﬁumns
<
TCuda
<
Ról_t
>>(1);

45 
°d
::
cout
 << "Cﬁum¿Sum: " << "Max.Ññ.Éº‹: " << 
îr‹
 << std::
ídl
;

46 i‡(
îr‹
 > 1e-3)

48 
	}
}

	@test/DNN/TestMinimization.cxx

20 
	~<io°ªam
>

21 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

22 
	~"Te°Möimiz©i⁄.h
"

24 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

26 
	$maö
()

28 
ã°Möimiz©i⁄
<
TRe„ªn˚
<>>();

29 
	}
}

	@test/DNN/TestMinimizationCpu.cxx

19 
	~<io°ªam
>

20 
	~"TMVA/DNN/Archôe˘uªs/Cpu.h
"

21 
	~"Te°Möimiz©i⁄.h
"

23 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

25 
	$maö
()

28 
°d
::
cout
 << "Te°ög möimiz©i⁄: (sögÀÖªcisi⁄)" << std::
ídl
;

30 
DoubÀ_t
 
îr‹
 = 
ã°Möimiz©i⁄
<
TCpu
<
Ról_t
>>();

31 
°d
::
cout
 << "Gødõ¡ Des˚¡: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

32 i‡(
îr‹
 > 1e-3) {

36 
îr‹
 = 
ã°Möimiz©i⁄Momítum
<
TCpu
<
Ról_t
>>();

37 
°d
::
cout
 << "Momítum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

38 i‡(
îr‹
 > 1e-3) {

41 
°d
::
cout
 << std::
ídl
 << "Testing minimization: (doubleÖrecision)" << std::endl;

43 
îr‹
 = 
ã°Möimiz©i⁄
<
TCpu
<
DoubÀ_t
>>();

44 
°d
::
cout
 << "Gødõ¡ Des˚¡: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

45 i‡(
îr‹
 > 1e-5) {

49 
îr‹
 = 
ã°Möimiz©i⁄Momítum
<
TCpu
<
DoubÀ_t
>>();

50 
°d
::
cout
 << "Momítum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

51 i‡(
îr‹
 > 1e-5) {

55 
	}
}

	@test/DNN/TestMinimizationCuda.cxx

17 
	~<io°ªam
>

18 
	~"TMVA/DNN/Archôe˘uªs/Re„ªn˚.h
"

19 
	~"TMVA/DNN/Archôe˘uªs/Cuda.h
"

20 
	~"TMVA/DNN/Möimizîs.h
"

21 
	~"Te°Möimiz©i⁄.h
"

23 
usög
 
«me•a˚
 
	gTMVA
::
DNN
;

25 
	$maö
()

27 
°d
::
cout
 << "Te°ög möimiz©i⁄: (sögÀÖªcisi⁄)" << std::
ídl
;

29 
DoubÀ_t
 
îr‹
 = 
ã°Möimiz©i⁄
<
TCuda
<
Ról_t
>>();

30 
°d
::
cout
 << "Gødõ¡ Des˚¡: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

31 i‡(
îr‹
 > 1) {

35 
îr‹
 = 
ã°Möimiz©i⁄Momítum
<
TCuda
<
Ról_t
>>();

36 
°d
::
cout
 << "Momítum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

37 i‡(
îr‹
 > 1) {

40 
°d
::
cout
 << std::
ídl
 << "Testing minimization: (doubleÖrecision)" << std::endl;

42 
îr‹
 = 
ã°Möimiz©i⁄
<
TCuda
<
DoubÀ_t
>>();

43 
°d
::
cout
 << "Gødõ¡ Des˚¡: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

44 i‡(
îr‹
 > 1e-3) {

48 
îr‹
 = 
ã°Möimiz©i⁄Momítum
<
TCuda
<
DoubÀ_t
>>();

49 
°d
::
cout
 << "Momítum: MaximumÑñ©ivêîr‹ = " << 
îr‹
 << std::
ídl
;

50 i‡(
îr‹
 > 1e-3) {

53 
	}
}

	@/usr/include/assert.h

23 #ifdef 
_ASSERT_H


25 #unde‡
_ASSERT_H


26 #unde‡
as£π


27 #unde‡
__ASSERT_VOID_CAST


29 #ifdef 
__USE_GNU


30 #unde‡
as£π_≥º‹


35 
	#_ASSERT_H
 1

	)

36 
	~<„©uªs.h
>

38 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

39 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

41 
	#__ASSERT_VOID_CAST
 ()

	)

49 #ifdef 
NDEBUG


51 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

59 #ifdef 
__USE_GNU


60 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

65 
__BEGIN_DECLS


68 
	$__as£π_Áû
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
,

69 
__löe
, c⁄° *
__fun˘i⁄
)

70 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

73 
	$__as£π_≥º‹_Áû
 (
__î∫um
, c⁄° *
__fûe
,

74 
__löe
, c⁄° *
__fun˘i⁄
)

75 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

80 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

81 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

84 
__END_DECLS


86 
	#as£π
(
ex¥
) \

87 ((
ex¥
) \

88 ? 
	`__ASSERT_VOID_CAST
 (0) \

89 : 
	`__as£π_Áû
 (
	`__STRING
(
ex¥
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

91 #ifdef 
__USE_GNU


92 
	#as£π_≥º‹
(
î∫um
) \

93 (!(
î∫um
) \

94 ? 
	`__ASSERT_VOID_CAST
 (0) \

95 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

103 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

104 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

106 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

107 
	#__ASSERT_FUNCTION
 
__func__


	)

109 
	#__ASSERT_FUNCTION
 ((c⁄° *Ë0)

	)

116 #i‡
deföed
 
__USE_ISOC11
 && !deföed 
__˝lu•lus


118 #unde‡
°©ic_as£π


119 
	#°©ic_as£π
 
_Sètic_as£π


	)

	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/math.h

24 #i‚def 
_MATH_H


25 
	#_MATH_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 
	~<bôs/huge_vÆ.h
>

34 #ifde‡
__USE_ISOC99


35 
	~<bôs/huge_vÆf.h
>

36 
	~<bôs/huge_vÆl.h
>

39 
	~<bôs/öf.h
>

42 
	~<bôs/«n.h
>

46 
	~<bôs/m©hdef.h
>

53 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

54 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

55 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

56 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

57 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

58 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

59 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

60 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

61 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

62 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

63 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

64 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

66 
	#_MdoubÀ_
 

	)

67 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

68 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

69 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

70 
	~<bôs/m©hˇŒs.h
>

71 #unde‡
_MdoubÀ_


72 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


73 #unde‡
_MdoubÀ_END_NAMESPACE


74 #unde‡
__MATH_PRECNAME


76 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


82 #i‚de‡
_MÊﬂt_


83 
	#_MÊﬂt_
 

	)

85 
	#_MdoubÀ_
 
_MÊﬂt_


	)

86 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

87 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

88 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

89 
	~<bôs/m©hˇŒs.h
>

90 #unde‡
_MdoubÀ_


91 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


92 #unde‡
_MdoubÀ_END_NAMESPACE


93 #unde‡
__MATH_PRECNAME


95 #i‡!(
deföed
 
__NO_LONG_DOUBLE_MATH
 && deföed 
_LIBC
) \

96 || 
deföed
 
__LDBL_COMPAT


97 #ifde‡
__LDBL_COMPAT


99 #ifde‡
__USE_ISOC99


100 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

101 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

102 #ifde‡
__REDIRECT_NTH


103 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

104 
__∆dbl_√xâow¨df
)

105 
	`__©åibuã__
 ((
__c⁄°__
));

106 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

107 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

108 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

109 (
__x
, 
__y
),

110 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

114 #unde‡
__MATHDECL_1


115 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

116 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

117 
¨gs
, 
Æüs
)

	)

118 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

119 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

125 #i‚de‡
_Ml⁄g_doubÀ_


126 
	#_Ml⁄g_doubÀ_
 

	)

128 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

129 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

130 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

131 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

132 
	#__MATH_DECLARE_LDOUBLE
 1

	)

133 
	~<bôs/m©hˇŒs.h
>

134 #unde‡
_MdoubÀ_


135 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


136 #unde‡
_MdoubÀ_END_NAMESPACE


137 #unde‡
__MATH_PRECNAME


142 #unde‡
__MATHDECL_1


143 #unde‡
__MATHDECL


144 #unde‡
__MATHCALL


147 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


149 
signgam
;

154 #ifde‡
__USE_ISOC99


192 
FP_NAN
 =

193 
	#FP_NAN
 0

	)

194 
FP_NAN
,

195 
FP_INFINITE
 =

196 
	#FP_INFINITE
 1

	)

197 
FP_INFINITE
,

198 
FP_ZERO
 =

199 
	#FP_ZERO
 2

	)

200 
FP_ZERO
,

201 
FP_SUBNORMAL
 =

202 
	#FP_SUBNORMAL
 3

	)

203 
FP_SUBNORMAL
,

204 
FP_NORMAL
 =

205 
	#FP_NORMAL
 4

	)

206 
FP_NORMAL


210 #ifde‡
__NO_LONG_DOUBLE_MATH


211 
	#Â˛assify
(
x
) \

212 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

214 
	#Â˛assify
(
x
) \

215 ( (
x
) ==  () \

216 ? 
	`__Â˛assifyf
 (
x
) \

217 :  (
x
) ==  () \

218 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

222 #ifde‡
__NO_LONG_DOUBLE_MATH


223 
	#signbô
(
x
) \

224 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

226 
	#signbô
(
x
) \

227 ( (
x
) ==  () \

228 ? 
	`__signbôf
 (
x
) \

229 :  (
x
) ==  () \

230 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

234 #ifde‡
__NO_LONG_DOUBLE_MATH


235 
	#isföôe
(
x
) \

236 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

238 
	#isföôe
(
x
) \

239 ( (
x
) ==  () \

240 ? 
	`__föôef
 (
x
) \

241 :  (
x
) ==  () \

242 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

246 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

250 #ifde‡
__NO_LONG_DOUBLE_MATH


251 
	#i¢™
(
x
) \

252 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

254 
	#i¢™
(
x
) \

255 ( (
x
) ==  () \

256 ? 
	`__i¢™f
 (
x
) \

257 :  (
x
) ==  () \

258 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

262 #ifde‡
__NO_LONG_DOUBLE_MATH


263 
	#isöf
(
x
) \

264 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

266 
	#isöf
(
x
) \

267 ( (
x
) ==  () \

268 ? 
	`__isöff
 (
x
) \

269 :  (
x
) ==  () \

270 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

274 
	#MATH_ERRNO
 1

	)

275 
	#MATH_ERREXCEPT
 2

	)

280 #i‚de‡
__FAST_MATH__


281 
	#m©h_îrh™dlög
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

286 #ifdef 
__USE_MISC


290 
_IEEE_
 = -1,

291 
_SVID_
,

292 
_XOPEN_
,

293 
_POSIX_
,

294 
_ISOC_


295 } 
	t_LIB_VERSION_TYPE
;

300 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

304 #ifde‡
__USE_SVID


310 #ifde‡
__˝lu•lus


311 
__ex˚±i⁄


313 
ex˚±i⁄


316 
ty≥
;

317 *
«me
;

318 
¨g1
;

319 
¨g2
;

320 
ªtvÆ
;

321 
	}
};

323 #ifde‡
__˝lu•lus


324 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

326 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

329 
	#X_TLOSS
 1.41484755040568800000e+16

	)

332 
	#DOMAIN
 1

	)

333 
	#SING
 2

	)

334 
	#OVERFLOW
 3

	)

335 
	#UNDERFLOW
 4

	)

336 
	#TLOSS
 5

	)

337 
	#PLOSS
 6

	)

340 
	#HUGE
 3.40282347e+38F

	)

344 #ifde‡
__USE_XOPEN


346 
	#MAXFLOAT
 3.40282347e+38F

	)

353 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


354 
	#M_E
 2.7182818284590452354

	)

355 
	#M_LOG2E
 1.4426950408889634074

	)

356 
	#M_LOG10E
 0.43429448190325182765

	)

357 
	#M_LN2
 0.69314718055994530942

	)

358 
	#M_LN10
 2.30258509299404568402

	)

359 
	#M_PI
 3.14159265358979323846

	)

360 
	#M_PI_2
 1.57079632679489661923

	)

361 
	#M_PI_4
 0.78539816339744830962

	)

362 
	#M_1_PI
 0.31830988618379067154

	)

363 
	#M_2_PI
 0.63661977236758134308

	)

364 
	#M_2_SQRTPI
 1.12837916709551257390

	)

365 
	#M_SQRT2
 1.41421356237309504880

	)

366 
	#M_SQRT1_2
 0.70710678118654752440

	)

372 #ifde‡
__USE_GNU


373 
	#M_El
 2.718281828459045235360287471352662498L

	)

374 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

375 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

376 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

377 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

378 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

379 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

380 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

381 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

382 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

383 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

384 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

385 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

392 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


393 
	#__NO_MATH_INLINES
 1

	)

396 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

403 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

404 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

405 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

406 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

407 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

408 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

412 #ifde‡
__USE_EXTERN_INLINES


413 
	~<bôs/m©hölöe.h
>

418 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

419 
	~<bôs/m©h-föôe.h
>

422 #ifde‡
__USE_ISOC99


426 #i‚de‡
isgª©î


427 
	#isgª©î
(
x
, 
y
) \

428 (
__exãnsi⁄__
 \

429 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

430 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

434 #i‚de‡
isgª©îequÆ


435 
	#isgª©îequÆ
(
x
, 
y
) \

436 (
__exãnsi⁄__
 \

437 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

438 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

442 #i‚de‡
i¶ess


443 
	#i¶ess
(
x
, 
y
) \

444 (
__exãnsi⁄__
 \

445 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

446 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

450 #i‚de‡
i¶es£quÆ


451 
	#i¶es£quÆ
(
x
, 
y
) \

452 (
__exãnsi⁄__
 \

453 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

454 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

458 #i‚de‡
i¶essgª©î


459 
	#i¶essgª©î
(
x
, 
y
) \

460 (
__exãnsi⁄__
 \

461 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

462 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

466 #i‚de‡
isun‹dîed


467 
	#isun‹dîed
(
u
, 
v
) \

468 (
__exãnsi⁄__
 \

469 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

470 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

475 
	g__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_BSD


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__a
;

422 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

423 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

424 
	$î™d48_r
 (
__xsubi
[3],

425 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

426 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

429 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

430 *
__ª°ri˘
 
__ªsu…
)

431 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

432 
	$ƒ™d48_r
 (
__xsubi
[3],

433 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

434 *
__ª°ri˘
 
__ªsu…
)

435 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

438 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

439 *
__ª°ri˘
 
__ªsu…
)

440 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

441 
	$jønd48_r
 (
__xsubi
[3],

442 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

443 *
__ª°ri˘
 
__ªsu…
)

444 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

447 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

453 
	$lc⁄g48_r
 (
__∑øm
[7],

454 
dønd48_d©a
 *
__buf„r
)

455 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

461 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


462 
	#__mÆloc_™d_ˇŒoc_deföed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

467 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

468 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

482 
	$‰ì
 (*
__±r
Ë
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$c‰ì
 (*
__±r
Ë
__THROW
;

490 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


491 
	~<Æloˇ.h
>

494 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

495 || 
deföed
 
__USE_BSD


497 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

500 #ifde‡
__USE_XOPEN2K


502 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

503 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

506 #ifde‡
__USE_ISOC11


508 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

509 
__THROW
 
__wur
 
	`__©åibuã__
 ((
__mÆloc__
, 
	`__Æloc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

518 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

520 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


522 #ifde‡
__˝lu•lus


523 "C++" 
	`©_quick_exô
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

526 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

535 
__THROW
 
	`__n⁄nuŒ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

544 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


548 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

550 
__END_NAMESPACE_STD


552 #ifde‡
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

564 
__END_NAMESPACE_STD


566 #ifde‡
__USE_GNU


569 *
	$£cuª_gëív
 (c⁄° *
__«me
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

573 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


577 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

580 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


583 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

584 
__THROW
 
	`__n⁄nuŒ
 ((2));

587 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$˛óªnv
 (Ë
__THROW
;

598 #i‡
deföed
 
__USE_MISC
 \

599 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

605 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

609 || 
deföed
 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

760 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

761 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

762 #ifde‡
__USE_GNU


763 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

764 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

765 
	`__n⁄nuŒ
 ((1, 4));

770 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

771 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

772 
__END_NAMESPACE_STD


774 #ifde‡
__USE_ISOC99


775 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

776 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__numî
, 
__díom
)

785 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

787 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

788 
__END_NAMESPACE_STD


790 #ifde‡
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

793 
__díom
)

794 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

795 
__END_NAMESPACE_C99


799 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

800 || 
deföed
 
__USE_SVID


807 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

808 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

813 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

814 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

819 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

820 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

823 #ifde‡
__USE_MISC


825 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

826 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

827 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

828 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

829 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

830 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

831 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

832 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

837 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

838 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

839 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

841 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

842 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

845 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

846 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

847 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

863 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

866 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

870 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

871 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

873 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

874 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifde‡
__USE_SVID


884 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

888 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


895 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

896 *c⁄° *
__ª°ri˘
 
__tokís
,

897 **
__ª°ri˘
 
__vÆuï
)

898 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

902 #ifde‡
__USE_XOPEN


904 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

910 #ifde‡
__USE_XOPEN2KXSI


912 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

915 #ifde‡
__USE_XOPEN


920 
	$gø¡±
 (
__fd
Ë
__THROW
;

924 
	$u∆ock±
 (
__fd
Ë
__THROW
;

929 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

932 #ifde‡
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

937 
__THROW
 
	`__n⁄nuŒ
 ((2));

940 
	`gë±
 ();

943 #ifde‡
__USE_BSD


947 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

948 
__THROW
 
	`__n⁄nuŒ
 ((1));

951 
	~<bôs/°dlib-Êﬂt.h
>

954 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


955 
	~<bôs/°dlib.h
>

957 #ifde‡
__LDBL_COMPAT


958 
	~<bôs/°dlib-ldbl.h
>

962 #unde‡
__√ed_mÆloc_™d_ˇŒoc


964 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

170 || 
deföed
 
__USE_XOPEN2K8


172 *
	$°rdup
 (c⁄° *
__s
)

173 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

179 #i‡
deföed
 
__USE_XOPEN2K8


180 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

181 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

184 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


186 
	#°rdu∑
(
s
) \

187 (
__exãnsi⁄__
 \

189 c⁄° *
__ﬁd
 = (
s
); \

190 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

191 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

192 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

193 
	}
}))

	)

196 
	#°∫du∑
(
s
, 
n
) \

197 (
__exãnsi⁄__
 \

199 c⁄° *
__ﬁd
 = (
s
); \

200 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

201 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

202 
__√w
[
__Àn
] = '\0'; \

203 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
°rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

214 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

217 #ifde‡
__OPTIMIZE__


218 
__exã∫_Æways_ölöe
 *

219 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


221  
__buûtö_°rchr
 (
__s
, 
__c
);

224 
__exã∫_Æways_ölöe
 const *

225 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


227  
__buûtö_°rchr
 (
__s
, 
__c
);

232 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

233 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

236 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`°ºchr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

241 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 #ifde‡
__OPTIMIZE__


245 
__exã∫_Æways_ölöe
 *

246 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


248  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

251 
__exã∫_Æways_ölöe
 const *

252 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


254  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

260 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifde‡
__USE_GNU


267 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

270 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

273 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

274 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

282 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

285 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

286 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

292 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

293 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

294 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

296 #ifde‡
__OPTIMIZE__


297 
__exã∫_Æways_ölöe
 *

298 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


300  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

303 
__exã∫_Æways_ölöe
 const *

304 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


306  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

309 
	}
}

311 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

312 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

315 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

319 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

320 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

321 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 #ifde‡
__OPTIMIZE__


324 
__exã∫_Æways_ölöe
 *

325 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


327  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

330 
__exã∫_Æways_ölöe
 const *

331 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


333  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

336 
	}
}

338 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

339 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

344 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

345 
__THROW
 
	`__n⁄nuŒ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

351 c⁄° *
__ª°ri˘
 
__dñim
,

352 **
__ª°ri˘
 
__ßve_±r
)

353 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

354 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


355 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

360 #ifde‡
__USE_GNU


362 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

364 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

365 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

366 c⁄° *
__√edÀ
)

367 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

370 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

374 #ifde‡
__USE_GNU


378 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

379 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

380 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

384 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

385 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

386 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

387 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

388 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

389 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$°æí
 (c⁄° *
__s
)

396 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

403 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

410 
__END_NAMESPACE_STD


411 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


419 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


422 #ifde‡
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

424 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

425 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

427 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

428 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

434 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

435 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

439 #ifde‡
__USE_XOPEN2K8


441 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

447 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

449 #ifde‡
__USE_BSD


451 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

452 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

455 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

458 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

462 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`ödex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

467 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

470 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__exã∫_Æways_ölöe
 *

472 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


474  
	`__buûtö_ödex
 (
__s
, 
__c
);

477 
__exã∫_Æways_ölöe
 const *

478 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


480  
	`__buûtö_ödex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$ödex
 (c⁄° *
__s
, 
__c
)

486 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

490 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`rödex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

495 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

498 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__exã∫_Æways_ölöe
 *

500 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


502  
	`__buûtö_rödex
 (
__s
, 
__c
);

505 
__exã∫_Æways_ölöe
 const *

506 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


508  
	`__buûtö_rödex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$rödex
 (c⁄° *
__s
, 
__c
)

514 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

519 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

523 #ifdef 
__USE_GNU


524 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

525 #ifde‡
__GNUC__


526 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

527 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

532 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

533 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

536 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

544 
__loˇÀ_t
 
__loc
)

545 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

547 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

548 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

549 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

556 c⁄° *
__ª°ri˘
 
__dñim
)

557 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

565 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

566 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

567 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

568 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

575 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

576 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

583 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

586 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

589 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #i‚de‡
ba£«me


596 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£«me
 (*
__fûíame
)

598 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

600 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

602 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

609 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

610 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


630 
	~<bôs/°rög.h
>

633 
	~<bôs/°rög2.h
>

636 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


638 
	~<bôs/°rög3.h
>

642 
__END_DECLS


	@/usr/include/tbb/tbb.h

29 #i‚de‡
__TBB_tbb_H


30 
	#__TBB_tbb_H


	)

40 #i‡
TBB_PREVIEW_AGGREGATOR


41 
	~"aggªg©‹.h
"

43 
	~"Æig√d_•a˚.h
"

44 
	~"©omic.h
"

45 
	~"blocked_ønge.h
"

46 
	~"blocked_ønge2d.h
"

47 
	~"blocked_ønge3d.h
"

48 
	~"ˇche_Æig√d_Æloˇt‹.h
"

49 
	~"comböabÀ.h
"

50 
	~"c⁄cuºít_un‹dîed_m≠.h
"

51 
	~"c⁄cuºít_hash_m≠.h
"

52 
	~"c⁄cuºít_queue.h
"

53 
	~"c⁄cuºít_ve˘‹.h
"

54 
	~"¸ôiˇl_£˘i⁄.h
"

55 
	~"íumîabÀ_thªad_•ecific.h
"

56 
	~"muãx.h
"

57 
	~"nuŒ_muãx.h
"

58 
	~"nuŒ_rw_muãx.h
"

59 
	~"∑øŒñ_do.h
"

60 
	~"∑øŒñ_f‹.h
"

61 
	~"∑øŒñ_f‹_óch.h
"

62 
	~"∑øŒñ_övoke.h
"

63 
	~"∑øŒñ_ªdu˚.h
"

64 
	~"∑øŒñ_sˇn.h
"

65 
	~"∑øŒñ_s‹t.h
"

66 
	~"∑πôi⁄î.h
"

67 
	~"pùñöe.h
"

68 
	~"queuög_muãx.h
"

69 
	~"queuög_rw_muãx.h
"

70 
	~"ªadî_wrôî_lock.h
"

71 
	~"c⁄cuºít_¥i‹ôy_queue.h
"

72 
	~"ªcursive_muãx.h
"

73 
	~"•ö_muãx.h
"

74 
	~"•ö_rw_muãx.h
"

75 
	~"èsk.h
"

76 
	~"èsk_group.h
"

77 
	~"èsk_scheduÀr_öô.h
"

78 
	~"èsk_scheduÀr_ob£rvî.h
"

79 
	~"tbb_Æloˇt‹.h
"

80 
	~"tbb_ex˚±i⁄.h
"

81 
	~"tbb_thªad.h
"

82 
	~"tick_cou¡.h
"

	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifde‡
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #ñi‡
deföed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #ñi‡
deföed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<bôs/posix_›t.h
>

205 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


206 
	~<bôs/ívú⁄míts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<bôs/ty≥s.h
>

219 #i‚def 
__ssize_t_deföed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_deföed


	)

224 
	#__√ed_size_t


	)

225 
	#__√ed_NULL


	)

226 
	~<°ddef.h
>

228 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


231 #i‚de‡
__gid_t_deföed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_deföed


	)

236 #i‚de‡
__uid_t_deföed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_deföed


	)

241 #i‚de‡
__off_t_deföed


242 #i‚de‡
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_deföed


	)

249 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_deföed


	)

254 #i‚de‡
__u£c⁄ds_t_deföed


255 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

256 
	#__u£c⁄ds_t_deföed


	)

259 #i‚de‡
__pid_t_deföed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_deföed


	)

265 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


266 #i‚de‡
__öçå_t_deföed


267 
__öçå_t
 
	töçå_t
;

268 
	#__öçå_t_deföed


	)

272 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


273 #i‚de‡
__sockÀn_t_deföed


274 
__sockÀn_t
 
	tsockÀn_t
;

275 
	#__sockÀn_t_deföed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

289 #ifde‡
__USE_GNU


292 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

293 
__THROW
 
	`__n⁄nuŒ
 ((1));

296 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

297 
__THROW
 
	`__n⁄nuŒ
 ((1));

300 #ifde‡
__USE_ATFILE


304 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

305 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

310 #i‚def 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifde‡
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #i‚de‡
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

336 #ifde‡
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifde‡
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

346 
__THROW
;

353 
	`˛o£
 (
__fd
);

360 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

366 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

368 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


369 #i‚de‡
__USE_FILE_OFFSET64


376 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

377 
__off_t
 
__off£t
Ë
__wur
;

384 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
Ë
__wur
;

387 #ifde‡
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

389 
__off64_t
 
__off£t
),

390 
¥ód64
Ë
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

392 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

393 
pwrôe64
Ë
__wur
;

395 
	#¥ód
 
¥ód64


	)

396 
	#pwrôe
 
pwrôe64


	)

400 #ifde‡
__USE_LARGEFILE64


404 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

405 
__off64_t
 
__off£t
Ë
__wur
;

408 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
Ë
__wur
;

417 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

419 #ifde‡
__USE_GNU


422 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

432 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

444 
	`¶ìp
 (
__£c⁄ds
);

446 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

447 || 
deföed
 
__USE_BSD


452 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

453 
__THROW
;

460 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

469 
	`∑u£
 ();

473 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

476 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

483 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

488 #ifde‡
__USE_ATFILE


491 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

492 
__gid_t
 
__group
, 
__Êag
)

493 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

497 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

499 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


501 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

511 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

520 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

521 || 
deföed
 
__USE_BSD


525 *
	$gëwd
 (*
__buf
)

526 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

531 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

536 #ifde‡
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

543 **
__ívú⁄
;

544 #ifde‡
__USE_GNU


545 **
ívú⁄
;

551 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

552 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

554 #ifde‡
__USE_XOPEN2K8


557 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

558 
__THROW
 
	`__n⁄nuŒ
 ((2));

563 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

564 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

568 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

569 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

573 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

578 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

585 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 #ifde‡
__USE_GNU


590 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

591 *c⁄° 
__ívp
[])

592 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

596 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


598 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

603 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

609 
	~<bôs/c⁄‚ame.h
>

612 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

613 
__THROW
 
	`__n⁄nuŒ
 ((1));

616 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

619 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

628 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

631 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

635 #i‚de‡
__FAVOR_BSD


636 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

638 #ifde‡
__REDIRECT_NTH


639 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

641 
	#gëpgΩ
 
__gëpgid


	)

646 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

647 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


648 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

655 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

657 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


668 #i‚de‡
__FAVOR_BSD


672 
	$£çgΩ
 (Ë
__THROW
;

677 #ifde‡
__REDIRECT_NTH


678 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

680 
	#£çgΩ
 
£çgid


	)

689 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

691 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


693 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

697 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

700 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

703 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

706 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

711 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

713 #ifdef 
__USE_GNU


715 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

724 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


727 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

730 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


732 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

741 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


744 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

747 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


749 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

752 #ifde‡
__USE_GNU


755 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

756 
__THROW
;

760 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

761 
__THROW
;

765 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

766 
__THROW
 
__wur
;

770 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

780 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

781 || 
deföed
 
__USE_BSD


786 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

792 *
	$ây«me
 (
__fd
Ë
__THROW
;

796 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

797 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

801 
	$ißây
 (
__fd
Ë
__THROW
;

803 #i‡
deföed
 
__USE_BSD
 \

804 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

807 
	$ây¶Ÿ
 (Ë
__THROW
;

812 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

813 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

815 #ifde‡
__USE_ATFILE


818 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

819 c⁄° *
__to
, 
__Êags
)

820 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

823 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


825 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

826 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

831 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

832 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

833 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

836 #ifde‡
__USE_ATFILE


838 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

839 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

842 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

843 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

844 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

848 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

850 #ifde‡
__USE_ATFILE


852 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

853 
__THROW
 
	`__n⁄nuŒ
 ((2));

857 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

861 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

864 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

871 *
	`gëlogö
 ();

872 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


879 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

882 #ifdef 
__USE_BSD


884 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

888 #ifdef 
__USE_POSIX2


892 
	#__√ed_gë›t


	)

893 
	~<gë›t.h
>

897 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


901 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

905 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

908 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

909 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

913 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

919 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

920 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

921 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

928 
	$vh™gup
 (Ë
__THROW
;

931 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

939 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

940 
size_t
 
__off£t
, 
__sˇÀ
)

941 
__THROW
 
	`__n⁄nuŒ
 ((1));

947 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

951 *
	$gëu£rshñl
 (Ë
__THROW
;

952 
	$ídu£rshñl
 (Ë
__THROW
;

953 
	$£tu£rshñl
 (Ë
__THROW
;

959 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

963 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

966 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

970 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

978 
	`fsync
 (
__fd
);

981 #ifde‡
__USE_GNU


984 
	$syncfs
 (
__fd
Ë
__THROW
;

988 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


991 
	`gëho°id
 ();

994 
	$sync
 (Ë
__THROW
;

997 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


1000 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

1005 
	$gëdèbÀsize
 (Ë
__THROW
;

1011 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


1014 #i‚de‡
__USE_FILE_OFFSET64


1015 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

1016 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1018 #ifde‡
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
åunˇã
,

1020 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1021 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1023 
	#åunˇã
 
åunˇã64


	)

1026 #ifde‡
__USE_LARGEFILE64


1027 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1028 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1033 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_POSIX199309
 \

1034 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1037 #i‚de‡
__USE_FILE_OFFSET64


1038 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1040 #ifde‡
__REDIRECT_NTH


1041 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1042 
·runˇã64
Ë
__wur
;

1044 
	#·runˇã
 
·runˇã64


	)

1047 #ifde‡
__USE_LARGEFILE64


1048 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1054 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1055 || 
deföed
 
__USE_MISC


1059 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1065 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1069 #ifde‡
__USE_MISC


1080 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1085 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1097 
	#F_ULOCK
 0

	)

1098 
	#F_LOCK
 1

	)

1099 
	#F_TLOCK
 2

	)

1100 
	#F_TEST
 3

	)

1102 #i‚de‡
__USE_FILE_OFFSET64


1103 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1105 #ifde‡
__REDIRECT


1106 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1107 
lockf64
Ë
__wur
;

1109 
	#lockf
 
lockf64


	)

1112 #ifde‡
__USE_LARGEFILE64


1113 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1118 #ifde‡
__USE_GNU


1123 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1124 (
__exãnsi⁄__
 \

1125 ({ 
__ªsu…
; \

1126 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1127 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1128 
__ªsu…
; 
	}
}))

	)

1131 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1134 
fd©async
 (
__fûdes
);

1140 #ifdef 
__USE_XOPEN


1142 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1143 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1147 
	$í¸y±
 (*
__block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1154 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1155 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1161 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1163 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1168 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1169 
	~<bôs/uni°d.h
>

1172 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/confname.h

20 #i‚de‡
_UNISTD_H


27 
	m_PC_LINK_MAX
,

28 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

29 
	m_PC_MAX_CANON
,

30 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

31 
	m_PC_MAX_INPUT
,

32 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

33 
	m_PC_NAME_MAX
,

34 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

35 
	m_PC_PATH_MAX
,

36 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

37 
	m_PC_PIPE_BUF
,

38 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

39 
	m_PC_CHOWN_RESTRICTED
,

40 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

41 
	m_PC_NO_TRUNC
,

42 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

43 
	m_PC_VDISABLE
,

44 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

45 
	m_PC_SYNC_IO
,

46 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

47 
	m_PC_ASYNC_IO
,

48 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

49 
	m_PC_PRIO_IO
,

50 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

51 
	m_PC_SOCK_MAXBUF
,

52 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

53 
	m_PC_FILESIZEBITS
,

54 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

55 
	m_PC_REC_INCR_XFER_SIZE
,

56 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

57 
	m_PC_REC_MAX_XFER_SIZE
,

58 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

59 
	m_PC_REC_MIN_XFER_SIZE
,

60 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

61 
	m_PC_REC_XFER_ALIGN
,

62 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

63 
	m_PC_ALLOC_SIZE_MIN
,

64 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

65 
	m_PC_SYMLINK_MAX
,

66 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

67 
	m_PC_2_SYMLINKS


68 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

74 
	m_SC_ARG_MAX
,

75 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

76 
	m_SC_CHILD_MAX
,

77 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

78 
	m_SC_CLK_TCK
,

79 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

80 
	m_SC_NGROUPS_MAX
,

81 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

82 
	m_SC_OPEN_MAX
,

83 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

84 
	m_SC_STREAM_MAX
,

85 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

86 
	m_SC_TZNAME_MAX
,

87 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

88 
	m_SC_JOB_CONTROL
,

89 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

90 
	m_SC_SAVED_IDS
,

91 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

92 
	m_SC_REALTIME_SIGNALS
,

93 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

94 
	m_SC_PRIORITY_SCHEDULING
,

95 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

96 
	m_SC_TIMERS
,

97 
	#_SC_TIMERS
 
_SC_TIMERS


	)

98 
	m_SC_ASYNCHRONOUS_IO
,

99 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

100 
	m_SC_PRIORITIZED_IO
,

101 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

102 
	m_SC_SYNCHRONIZED_IO
,

103 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

104 
	m_SC_FSYNC
,

105 
	#_SC_FSYNC
 
_SC_FSYNC


	)

106 
	m_SC_MAPPED_FILES
,

107 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

108 
	m_SC_MEMLOCK
,

109 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

110 
	m_SC_MEMLOCK_RANGE
,

111 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

112 
	m_SC_MEMORY_PROTECTION
,

113 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

114 
	m_SC_MESSAGE_PASSING
,

115 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

116 
	m_SC_SEMAPHORES
,

117 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

118 
	m_SC_SHARED_MEMORY_OBJECTS
,

119 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

120 
	m_SC_AIO_LISTIO_MAX
,

121 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

122 
	m_SC_AIO_MAX
,

123 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

124 
	m_SC_AIO_PRIO_DELTA_MAX
,

125 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

126 
	m_SC_DELAYTIMER_MAX
,

127 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

128 
	m_SC_MQ_OPEN_MAX
,

129 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

130 
	m_SC_MQ_PRIO_MAX
,

131 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

132 
	m_SC_VERSION
,

133 
	#_SC_VERSION
 
_SC_VERSION


	)

134 
	m_SC_PAGESIZE
,

135 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

136 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

137 
	m_SC_RTSIG_MAX
,

138 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

139 
	m_SC_SEM_NSEMS_MAX
,

140 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

141 
	m_SC_SEM_VALUE_MAX
,

142 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

143 
	m_SC_SIGQUEUE_MAX
,

144 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

145 
	m_SC_TIMER_MAX
,

146 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

150 
	m_SC_BC_BASE_MAX
,

151 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

152 
	m_SC_BC_DIM_MAX
,

153 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

154 
	m_SC_BC_SCALE_MAX
,

155 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

156 
	m_SC_BC_STRING_MAX
,

157 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

158 
	m_SC_COLL_WEIGHTS_MAX
,

159 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

160 
	m_SC_EQUIV_CLASS_MAX
,

161 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

162 
	m_SC_EXPR_NEST_MAX
,

163 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

164 
	m_SC_LINE_MAX
,

165 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

166 
	m_SC_RE_DUP_MAX
,

167 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

168 
	m_SC_CHARCLASS_NAME_MAX
,

169 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

171 
	m_SC_2_VERSION
,

172 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

173 
	m_SC_2_C_BIND
,

174 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

175 
	m_SC_2_C_DEV
,

176 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

177 
	m_SC_2_FORT_DEV
,

178 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

179 
	m_SC_2_FORT_RUN
,

180 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

181 
	m_SC_2_SW_DEV
,

182 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

183 
	m_SC_2_LOCALEDEF
,

184 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

186 
	m_SC_PII
,

187 
	#_SC_PII
 
_SC_PII


	)

188 
	m_SC_PII_XTI
,

189 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

190 
	m_SC_PII_SOCKET
,

191 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

192 
	m_SC_PII_INTERNET
,

193 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

194 
	m_SC_PII_OSI
,

195 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

196 
	m_SC_POLL
,

197 
	#_SC_POLL
 
_SC_POLL


	)

198 
	m_SC_SELECT
,

199 
	#_SC_SELECT
 
_SC_SELECT


	)

200 
	m_SC_UIO_MAXIOV
,

201 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

202 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

203 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

204 
	m_SC_PII_INTERNET_STREAM
,

205 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

206 
	m_SC_PII_INTERNET_DGRAM
,

207 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

208 
	m_SC_PII_OSI_COTS
,

209 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

210 
	m_SC_PII_OSI_CLTS
,

211 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

212 
	m_SC_PII_OSI_M
,

213 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

214 
	m_SC_T_IOV_MAX
,

215 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

218 
	m_SC_THREADS
,

219 
	#_SC_THREADS
 
_SC_THREADS


	)

220 
	m_SC_THREAD_SAFE_FUNCTIONS
,

221 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

222 
	m_SC_GETGR_R_SIZE_MAX
,

223 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

224 
	m_SC_GETPW_R_SIZE_MAX
,

225 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

226 
	m_SC_LOGIN_NAME_MAX
,

227 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

228 
	m_SC_TTY_NAME_MAX
,

229 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

230 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

231 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

232 
	m_SC_THREAD_KEYS_MAX
,

233 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

234 
	m_SC_THREAD_STACK_MIN
,

235 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

236 
	m_SC_THREAD_THREADS_MAX
,

237 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

238 
	m_SC_THREAD_ATTR_STACKADDR
,

239 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

240 
	m_SC_THREAD_ATTR_STACKSIZE
,

241 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

242 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

243 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

244 
	m_SC_THREAD_PRIO_INHERIT
,

245 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

246 
	m_SC_THREAD_PRIO_PROTECT
,

247 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

248 
	m_SC_THREAD_PROCESS_SHARED
,

249 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

251 
	m_SC_NPROCESSORS_CONF
,

252 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

253 
	m_SC_NPROCESSORS_ONLN
,

254 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

255 
	m_SC_PHYS_PAGES
,

256 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

257 
	m_SC_AVPHYS_PAGES
,

258 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

259 
	m_SC_ATEXIT_MAX
,

260 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

261 
	m_SC_PASS_MAX
,

262 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

264 
	m_SC_XOPEN_VERSION
,

265 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

266 
	m_SC_XOPEN_XCU_VERSION
,

267 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

268 
	m_SC_XOPEN_UNIX
,

269 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

270 
	m_SC_XOPEN_CRYPT
,

271 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

272 
	m_SC_XOPEN_ENH_I18N
,

273 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

274 
	m_SC_XOPEN_SHM
,

275 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

277 
	m_SC_2_CHAR_TERM
,

278 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

279 
	m_SC_2_C_VERSION
,

280 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

281 
	m_SC_2_UPE
,

282 
	#_SC_2_UPE
 
_SC_2_UPE


	)

284 
	m_SC_XOPEN_XPG2
,

285 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

286 
	m_SC_XOPEN_XPG3
,

287 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

288 
	m_SC_XOPEN_XPG4
,

289 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

291 
	m_SC_CHAR_BIT
,

292 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

293 
	m_SC_CHAR_MAX
,

294 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

295 
	m_SC_CHAR_MIN
,

296 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

297 
	m_SC_INT_MAX
,

298 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

299 
	m_SC_INT_MIN
,

300 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

301 
	m_SC_LONG_BIT
,

302 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

303 
	m_SC_WORD_BIT
,

304 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

305 
	m_SC_MB_LEN_MAX
,

306 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

307 
	m_SC_NZERO
,

308 
	#_SC_NZERO
 
_SC_NZERO


	)

309 
	m_SC_SSIZE_MAX
,

310 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

311 
	m_SC_SCHAR_MAX
,

312 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

313 
	m_SC_SCHAR_MIN
,

314 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

315 
	m_SC_SHRT_MAX
,

316 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

317 
	m_SC_SHRT_MIN
,

318 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

319 
	m_SC_UCHAR_MAX
,

320 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

321 
	m_SC_UINT_MAX
,

322 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

323 
	m_SC_ULONG_MAX
,

324 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

325 
	m_SC_USHRT_MAX
,

326 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

328 
	m_SC_NL_ARGMAX
,

329 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

330 
	m_SC_NL_LANGMAX
,

331 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

332 
	m_SC_NL_MSGMAX
,

333 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

334 
	m_SC_NL_NMAX
,

335 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

336 
	m_SC_NL_SETMAX
,

337 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

338 
	m_SC_NL_TEXTMAX
,

339 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

341 
	m_SC_XBS5_ILP32_OFF32
,

342 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

343 
	m_SC_XBS5_ILP32_OFFBIG
,

344 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

345 
	m_SC_XBS5_LP64_OFF64
,

346 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

347 
	m_SC_XBS5_LPBIG_OFFBIG
,

348 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

350 
	m_SC_XOPEN_LEGACY
,

351 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

352 
	m_SC_XOPEN_REALTIME
,

353 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

354 
	m_SC_XOPEN_REALTIME_THREADS
,

355 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

357 
	m_SC_ADVISORY_INFO
,

358 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

359 
	m_SC_BARRIERS
,

360 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

361 
	m_SC_BASE
,

362 
	#_SC_BASE
 
_SC_BASE


	)

363 
	m_SC_C_LANG_SUPPORT
,

364 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

365 
	m_SC_C_LANG_SUPPORT_R
,

366 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

367 
	m_SC_CLOCK_SELECTION
,

368 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

369 
	m_SC_CPUTIME
,

370 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

371 
	m_SC_THREAD_CPUTIME
,

372 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

373 
	m_SC_DEVICE_IO
,

374 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

375 
	m_SC_DEVICE_SPECIFIC
,

376 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

377 
	m_SC_DEVICE_SPECIFIC_R
,

378 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

379 
	m_SC_FD_MGMT
,

380 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

381 
	m_SC_FIFO
,

382 
	#_SC_FIFO
 
_SC_FIFO


	)

383 
	m_SC_PIPE
,

384 
	#_SC_PIPE
 
_SC_PIPE


	)

385 
	m_SC_FILE_ATTRIBUTES
,

386 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

387 
	m_SC_FILE_LOCKING
,

388 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

389 
	m_SC_FILE_SYSTEM
,

390 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

391 
	m_SC_MONOTONIC_CLOCK
,

392 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

393 
	m_SC_MULTI_PROCESS
,

394 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

395 
	m_SC_SINGLE_PROCESS
,

396 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

397 
	m_SC_NETWORKING
,

398 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

399 
	m_SC_READER_WRITER_LOCKS
,

400 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

401 
	m_SC_SPIN_LOCKS
,

402 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

403 
	m_SC_REGEXP
,

404 
	#_SC_REGEXP
 
_SC_REGEXP


	)

405 
	m_SC_REGEX_VERSION
,

406 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

407 
	m_SC_SHELL
,

408 
	#_SC_SHELL
 
_SC_SHELL


	)

409 
	m_SC_SIGNALS
,

410 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

411 
	m_SC_SPAWN
,

412 
	#_SC_SPAWN
 
_SC_SPAWN


	)

413 
	m_SC_SPORADIC_SERVER
,

414 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

415 
	m_SC_THREAD_SPORADIC_SERVER
,

416 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

417 
	m_SC_SYSTEM_DATABASE
,

418 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

419 
	m_SC_SYSTEM_DATABASE_R
,

420 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

421 
	m_SC_TIMEOUTS
,

422 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

423 
	m_SC_TYPED_MEMORY_OBJECTS
,

424 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

425 
	m_SC_USER_GROUPS
,

426 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

427 
	m_SC_USER_GROUPS_R
,

428 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

429 
	m_SC_2_PBS
,

430 
	#_SC_2_PBS
 
_SC_2_PBS


	)

431 
	m_SC_2_PBS_ACCOUNTING
,

432 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

433 
	m_SC_2_PBS_LOCATE
,

434 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

435 
	m_SC_2_PBS_MESSAGE
,

436 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

437 
	m_SC_2_PBS_TRACK
,

438 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

439 
	m_SC_SYMLOOP_MAX
,

440 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

441 
	m_SC_STREAMS
,

442 
	#_SC_STREAMS
 
_SC_STREAMS


	)

443 
	m_SC_2_PBS_CHECKPOINT
,

444 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

446 
	m_SC_V6_ILP32_OFF32
,

447 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

448 
	m_SC_V6_ILP32_OFFBIG
,

449 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

450 
	m_SC_V6_LP64_OFF64
,

451 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

452 
	m_SC_V6_LPBIG_OFFBIG
,

453 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

455 
	m_SC_HOST_NAME_MAX
,

456 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

457 
	m_SC_TRACE
,

458 
	#_SC_TRACE
 
_SC_TRACE


	)

459 
	m_SC_TRACE_EVENT_FILTER
,

460 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

461 
	m_SC_TRACE_INHERIT
,

462 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

463 
	m_SC_TRACE_LOG
,

464 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

466 
	m_SC_LEVEL1_ICACHE_SIZE
,

467 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

468 
	m_SC_LEVEL1_ICACHE_ASSOC
,

469 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

470 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

471 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

472 
	m_SC_LEVEL1_DCACHE_SIZE
,

473 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

474 
	m_SC_LEVEL1_DCACHE_ASSOC
,

475 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

476 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

477 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

478 
	m_SC_LEVEL2_CACHE_SIZE
,

479 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

480 
	m_SC_LEVEL2_CACHE_ASSOC
,

481 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

482 
	m_SC_LEVEL2_CACHE_LINESIZE
,

483 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

484 
	m_SC_LEVEL3_CACHE_SIZE
,

485 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

486 
	m_SC_LEVEL3_CACHE_ASSOC
,

487 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

488 
	m_SC_LEVEL3_CACHE_LINESIZE
,

489 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

490 
	m_SC_LEVEL4_CACHE_SIZE
,

491 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

492 
	m_SC_LEVEL4_CACHE_ASSOC
,

493 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

494 
	m_SC_LEVEL4_CACHE_LINESIZE
,

495 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

498 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

499 
	#_SC_IPV6
 
_SC_IPV6


	)

500 
	m_SC_RAW_SOCKETS
,

501 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

503 
	m_SC_V7_ILP32_OFF32
,

504 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

505 
	m_SC_V7_ILP32_OFFBIG
,

506 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

507 
	m_SC_V7_LP64_OFF64
,

508 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

509 
	m_SC_V7_LPBIG_OFFBIG
,

510 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

512 
	m_SC_SS_REPL_MAX
,

513 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

515 
	m_SC_TRACE_EVENT_NAME_MAX
,

516 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

517 
	m_SC_TRACE_NAME_MAX
,

518 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

519 
	m_SC_TRACE_SYS_MAX
,

520 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

521 
	m_SC_TRACE_USER_EVENT_MAX
,

522 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

524 
	m_SC_XOPEN_STREAMS
,

525 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

527 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

528 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

529 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


530 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

536 
	m_CS_PATH
,

537 
	#_CS_PATH
 
_CS_PATH


	)

539 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

540 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

541 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

543 
	m_CS_GNU_LIBC_VERSION
,

544 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

545 
	m_CS_GNU_LIBPTHREAD_VERSION
,

546 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

548 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

549 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

550 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

552 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

553 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

554 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

556 
	m_CS_LFS_CFLAGS
 = 1000,

557 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

558 
	m_CS_LFS_LDFLAGS
,

559 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

560 
	m_CS_LFS_LIBS
,

561 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

562 
	m_CS_LFS_LINTFLAGS
,

563 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

564 
	m_CS_LFS64_CFLAGS
,

565 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

566 
	m_CS_LFS64_LDFLAGS
,

567 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

568 
	m_CS_LFS64_LIBS
,

569 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

570 
	m_CS_LFS64_LINTFLAGS
,

571 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

573 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

574 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

575 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

576 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

577 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

578 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

579 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

580 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

581 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

582 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

583 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

584 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

585 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

586 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

587 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

588 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

589 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

590 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

591 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

592 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

593 
	m_CS_XBS5_LP64_OFF64_LIBS
,

594 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

595 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

596 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

597 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

598 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

599 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

600 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

601 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

602 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

603 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

604 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

606 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

607 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

608 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

609 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

610 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

611 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

612 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

613 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

614 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

615 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

616 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

617 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

618 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

619 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

620 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

621 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

622 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

623 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

624 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

625 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

626 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

627 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

628 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

629 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

630 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

631 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

632 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

633 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

634 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

635 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

636 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

637 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

639 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

640 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

641 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

642 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

643 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

644 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

645 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

646 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

647 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

648 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

649 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

650 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

651 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

652 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

653 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

654 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

655 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

656 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

657 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

658 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

659 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

660 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

661 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

662 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

663 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

664 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

665 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

666 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

667 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

668 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

669 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

670 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

672 
	m_CS_V6_ENV
,

673 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

674 
	m_CS_V7_ENV


675 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/environments.h

18 #i‚de‡
_UNISTD_H


22 
	~<bôs/w‹dsize.h
>

42 #i‡
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFF32
 1

	)

70 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

71 
	#_POSIX_V6_ILP32_OFF32
 1

	)

72 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

73 
	#_XBS5_ILP32_OFF32
 1

	)

74 
	#_XBS5_ILP32_OFFBIG
 1

	)

91 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

92 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

93 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

94 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

95 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

96 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

19 #ifde‡
_ERRNO_H


21 #unde‡
EDOM


22 #unde‡
EILSEQ


23 #unde‡
ERANGE


24 
	~<löux/î∫o.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #i‚de‡
ECANCELED


31 
	#ECANCELED
 125

	)

35 #i‚de‡
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #i‚de‡
ERFKILL


41 
	#ERFKILL
 132

	)

44 #i‚de‡
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #i‚de‡
__ASSEMBLER__


50 *
	$__î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

52 #i‡!
deföed
 
_LIBC
 || deföed 
_LIBC_REENTRANT


54 
	#î∫o
 (*
	`__î∫o_loˇti⁄
 ())

	)

59 #i‡!
deföed
 
_ERRNO_H
 && deföed 
__√ed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/huge_val.h

21 #i‚de‡
_MATH_H


27 #i‡
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VAL
 (
	`__buûtö_huge_vÆ
())

	)

29 #ñi‡
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VAL
 (
__exãnsi⁄__
 0x1.0
p2047
)

	)

31 #ñi‡
deföed
 
__GNUC__


33 
	#HUGE_VAL
 \

34 (
__exãnsi⁄__
 \

35 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

36 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

40 
	~<ídün.h
>

42 uni⁄ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_vÆ_t
;

44 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


45 
	#__HUGE_VAL_byãs
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

47 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


48 
	#__HUGE_VAL_byãs
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7‡}

	)

51 
__huge_vÆ_t
 
	g__huge_vÆ
 = { 
__HUGE_VAL_byãs
 };

52 
	#HUGE_VAL
 (
__huge_vÆ
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

21 #i‚de‡
_MATH_H


27 #i‡
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VALF
 (
	`__buûtö_huge_vÆf
())

	)

29 #ñi‡
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VALF
 (
__exãnsi⁄__
 0x1.0
p255f
)

	)

31 #ñi‡
deföed
 
__GNUC__


33 
	#HUGE_VALF
 \

34 (
__exãnsi⁄__
 \

35 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7f800000UL }).
__d
)

	)

40 uni⁄ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_vÆf_t
;

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#__HUGE_VALF_byãs
 { 0x7f, 0x80, 0, 0 }

	)

45 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


46 
	#__HUGE_VALF_byãs
 { 0, 0, 0x80, 0x7‡}

	)

49 
__huge_vÆf_t
 
	g__huge_vÆf
 = { 
__HUGE_VALF_byãs
 };

50 
	#HUGE_VALF
 (
__huge_vÆf
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #i‚de‡
_MATH_H


25 #i‡
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__buûtö_huge_vÆl
())

	)

27 #ñi‡
__GNUC_PREREQ
(2,96)

28 
	#HUGE_VALL
 (
__exãnsi⁄__
 0x1.0
p32767L
)

	)

31 
	#__HUGE_VALL_byãs
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

33 
	#__huge_vÆl_t
 uni⁄ { 
__c
[12]; 
__ld
; }

	)

34 #ifde‡
__GNUC__


35 
	#HUGE_VALL
 (
__exãnsi⁄__
 \

36 ((
__huge_vÆl_t
Ë{ 
__c
: 
__HUGE_VALL_byãs
 }).
__ld
)

	)

38 
__huge_vÆl_t
 
	g__huge_vÆl
 = { 
__HUGE_VALL_byãs
 };

39 
	#HUGE_VALL
 (
__huge_vÆl
.
__ld
)

	)

	@/usr/include/bits/inf.h

19 #i‚de‡
_MATH_H


25 #i‡
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__buûtö_öff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #i‚de‡
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_föôe
);

25 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_föôe
);

26 #ifde‡
__MATH_DECLARE_LDOUBLE


27 #ifde‡
__NO_LONG_DOUBLE_MATH


28 
__REDIRECT_NTH
 (
aco¶
, (), 
__acos_föôe
);

30 
__REDIRECT_NTH
 (
aco¶
, (), 
__aco¶_föôe
);

34 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


36 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_föôe
);

37 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_föôe
);

38 #ifde‡
__MATH_DECLARE_LDOUBLE


39 #ifde‡
__NO_LONG_DOUBLE_MATH


40 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_föôe
);

42 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_föôe
);

48 
__REDIRECT_NTH
 (
asö
, (), 
__asö_föôe
);

49 
__REDIRECT_NTH
 (
asöf
, (), 
__asöf_föôe
);

50 #ifde‡
__MATH_DECLARE_LDOUBLE


51 #ifde‡
__NO_LONG_DOUBLE_MATH


52 
__REDIRECT_NTH
 (
asöl
, (), 
__asö_föôe
);

54 
__REDIRECT_NTH
 (
asöl
, (), 
__asöl_föôe
);

59 
__REDIRECT_NTH
 (
©™2
, (, ), 
__©™2_föôe
);

60 
__REDIRECT_NTH
 (
©™2f
, (, ), 
__©™2f_föôe
);

61 #ifde‡
__MATH_DECLARE_LDOUBLE


62 #ifde‡
__NO_LONG_DOUBLE_MATH


63 
__REDIRECT_NTH
 (
©™2l
, (, ),

64 
__©™2_föôe
);

66 
__REDIRECT_NTH
 (
©™2l
, (, ),

67 
__©™2l_föôe
);

71 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


73 
__REDIRECT_NTH
 (
©™h
, (), 
__©™h_föôe
);

74 
__REDIRECT_NTH
 (
©™hf
, (), 
__©™hf_föôe
);

75 #ifde‡
__MATH_DECLARE_LDOUBLE


76 #ifde‡
__NO_LONG_DOUBLE_MATH


77 
__REDIRECT_NTH
 (
©™hl
, (), 
__©™h_föôe
);

79 
__REDIRECT_NTH
 (
©™hl
, (), 
__©™hl_föôe
);

85 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_föôe
);

86 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_föôe
);

87 #ifde‡
__MATH_DECLARE_LDOUBLE


88 #ifde‡
__NO_LONG_DOUBLE_MATH


89 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_föôe
);

91 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_föôe
);

96 
__REDIRECT_NTH
 (
exp
, (), 
__exp_föôe
);

97 
__REDIRECT_NTH
 (
expf
, (), 
__expf_föôe
);

98 #ifde‡
__MATH_DECLARE_LDOUBLE


99 #ifde‡
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
ex∂
, (), 
__exp_föôe
);

102 
__REDIRECT_NTH
 (
ex∂
, (), 
__ex∂_föôe
);

106 #ifde‡
__USE_GNU


108 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_föôe
);

109 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_föôe
);

110 #ifde‡
__MATH_DECLARE_LDOUBLE


111 #ifde‡
__NO_LONG_DOUBLE_MATH


112 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_föôe
);

114 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_föôe
);

119 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_föôe
);

120 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_föôe
);

121 #ifde‡
__MATH_DECLARE_LDOUBLE


122 #ifde‡
__NO_LONG_DOUBLE_MATH


123 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_föôe
);

125 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_föôe
);

130 #ifde‡
__USE_ISOC99


132 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_föôe
);

133 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_föôe
);

134 #ifde‡
__MATH_DECLARE_LDOUBLE


135 #ifde‡
__NO_LONG_DOUBLE_MATH


136 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_föôe
);

138 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_föôe
);

144 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_föôe
);

145 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_föôe
);

146 #ifde‡
__MATH_DECLARE_LDOUBLE


147 #ifde‡
__NO_LONG_DOUBLE_MATH


148 
__REDIRECT_NTH
 (
fmodl
, (, ),

149 
__fmod_föôe
);

151 
__REDIRECT_NTH
 (
fmodl
, (, ),

152 
__fmodl_föôe
);

156 #ifde‡
__USE_ISOC99


158 
__REDIRECT_NTH
 (
hypŸ
, (, ), 
__hypŸ_föôe
);

159 
__REDIRECT_NTH
 (
hypŸf
, (, ), 
__hypŸf_föôe
);

160 #ifde‡
__MATH_DECLARE_LDOUBLE


161 #ifde‡
__NO_LONG_DOUBLE_MATH


162 
__REDIRECT_NTH
 (
hypŸl
, (, ),

163 
__hypŸ_föôe
);

165 
__REDIRECT_NTH
 (
hypŸl
, (, ),

166 
__hypŸl_föôe
);

171 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


173 
__REDIRECT_NTH
 (
j0
, (), 
__j0_föôe
);

174 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_föôe
);

175 #ifde‡
__MATH_DECLARE_LDOUBLE


176 #ifde‡
__NO_LONG_DOUBLE_MATH


177 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_föôe
);

179 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_föôe
);

184 
__REDIRECT_NTH
 (
y0
, (), 
__y0_föôe
);

185 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_föôe
);

186 #ifde‡
__MATH_DECLARE_LDOUBLE


187 #ifde‡
__NO_LONG_DOUBLE_MATH


188 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_föôe
);

190 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_föôe
);

195 
__REDIRECT_NTH
 (
j1
, (), 
__j1_föôe
);

196 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_föôe
);

197 #ifde‡
__MATH_DECLARE_LDOUBLE


198 #ifde‡
__NO_LONG_DOUBLE_MATH


199 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_föôe
);

201 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_föôe
);

206 
__REDIRECT_NTH
 (
y1
, (), 
__y1_föôe
);

207 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_föôe
);

208 #ifde‡
__MATH_DECLARE_LDOUBLE


209 #ifde‡
__NO_LONG_DOUBLE_MATH


210 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_föôe
);

212 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_föôe
);

217 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_föôe
);

218 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_föôe
);

219 #ifde‡
__MATH_DECLARE_LDOUBLE


220 #ifde‡
__NO_LONG_DOUBLE_MATH


221 
__REDIRECT_NTH
 (
j∆
, (, ), 
__jn_föôe
);

223 
__REDIRECT_NTH
 (
j∆
, (, ), 
__j∆_föôe
);

228 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_föôe
);

229 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_föôe
);

230 #ifde‡
__MATH_DECLARE_LDOUBLE


231 #ifde‡
__NO_LONG_DOUBLE_MATH


232 
__REDIRECT_NTH
 (
y∆
, (, ), 
__yn_föôe
);

234 
__REDIRECT_NTH
 (
y∆
, (, ), 
__y∆_föôe
);

239 #ifde‡
__USE_MISC


241 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_föôe
);

242 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_föôe
);

243 #ifde‡
__MATH_DECLARE_LDOUBLE


244 #ifde‡
__NO_LONG_DOUBLE_MATH


245 
__REDIRECT_NTH
 (
lgammÆ_r
, (, *),

246 
__lgamma_r_föôe
);

248 
__REDIRECT_NTH
 (
lgammÆ_r
, (, *),

249 
__lgammÆ_r_föôe
);

254 #i‡((
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99
) \

255 && 
deföed
 
	g__exã∫_Æways_ölöe
)

257 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgamma
 (
__d
))

259 #ifde‡
__USE_ISOC99


260 
__loˇl_signgam
 = 0;

261  
	`lgamma_r
 (
__d
, &
__loˇl_signgam
);

263  
	`lgamma_r
 (
__d
, &
signgam
);

265 
	}
}

266 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgammaf
 (
__d
))

268 #ifde‡
__USE_ISOC99


269 
__loˇl_signgam
 = 0;

270  
	`lgammaf_r
 (
__d
, &
__loˇl_signgam
);

272  
	`lgammaf_r
 (
__d
, &
signgam
);

274 
	}
}

275 #ifde‡
__MATH_DECLARE_LDOUBLE


276 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgammÆ
 (
__d
))

278 #ifde‡
__USE_ISOC99


279 
__loˇl_signgam
 = 0;

280  
	`lgammÆ_r
 (
__d
, &
__loˇl_signgam
);

282  
	`lgammÆ_r
 (
__d
, &
signgam
);

284 
	}
}

288 #i‡((
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
) \

289 && 
deföed
 
	g__exã∫_Æways_ölöe
)

291 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gamma
 (
__d
))

293 #ifde‡
__USE_ISOC99


294 
__loˇl_signgam
 = 0;

295  
	`lgamma_r
 (
__d
, &
__loˇl_signgam
);

297  
	`lgamma_r
 (
__d
, &
signgam
);

299 
	}
}

300 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gammaf
 (
__d
))

302 #ifde‡
__USE_ISOC99


303 
__loˇl_signgam
 = 0;

304  
	`lgammaf_r
 (
__d
, &
__loˇl_signgam
);

306  
	`lgammaf_r
 (
__d
, &
signgam
);

308 
	}
}

309 #ifde‡
__MATH_DECLARE_LDOUBLE


310 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gammÆ
 (
__d
))

312 #ifde‡
__USE_ISOC99


313 
__loˇl_signgam
 = 0;

314  
	`lgammÆ_r
 (
__d
, &
__loˇl_signgam
);

316  
	`lgammÆ_r
 (
__d
, &
signgam
);

318 
	}
}

323 
__REDIRECT_NTH
 (
log
, (), 
__log_föôe
);

324 
__REDIRECT_NTH
 (
logf
, (), 
__logf_föôe
);

325 #ifde‡
__MATH_DECLARE_LDOUBLE


326 #ifde‡
__NO_LONG_DOUBLE_MATH


327 
__REDIRECT_NTH
 (
logl
, (), 
__log_föôe
);

329 
__REDIRECT_NTH
 (
logl
, (), 
__logl_föôe
);

334 
__REDIRECT_NTH
 (
log10
, (), 
__log10_föôe
);

335 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_föôe
);

336 #ifde‡
__MATH_DECLARE_LDOUBLE


337 #ifde‡
__NO_LONG_DOUBLE_MATH


338 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_föôe
);

340 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_föôe
);

344 #ifde‡
__USE_ISOC99


346 
__REDIRECT_NTH
 (
log2
, (), 
__log2_föôe
);

347 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_föôe
);

348 #ifde‡
__MATH_DECLARE_LDOUBLE


349 #ifde‡
__NO_LONG_DOUBLE_MATH


350 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_föôe
);

352 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_föôe
);

358 
__REDIRECT_NTH
 (
ldexp
, (, ), 
sˇlbn
);

359 
__REDIRECT_NTH
 (
ldexpf
, (, ), 
sˇlbnf
);

360 #ifde‡
__MATH_DECLARE_LDOUBLE


361 
__REDIRECT_NTH
 (
ldex∂
, (, ), 
sˇlb∆
);

365 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_föôe
);

366 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_föôe
);

367 #ifde‡
__MATH_DECLARE_LDOUBLE


368 #ifde‡
__NO_LONG_DOUBLE_MATH


369 
__REDIRECT_NTH
 (
powl
, (, ),

370 
__pow_föôe
);

372 
__REDIRECT_NTH
 (
powl
, (, ),

373 
__powl_föôe
);

378 
__REDIRECT_NTH
 (
ªmaödî
, (, ), 
__ªmaödî_föôe
);

379 
__REDIRECT_NTH
 (
ªmaödîf
, (, ), 
__ªmaödîf_föôe
);

380 #ifde‡
__MATH_DECLARE_LDOUBLE


381 #ifde‡
__NO_LONG_DOUBLE_MATH


382 
__REDIRECT_NTH
 (
ªmaödîl
, (, ),

383 
__ªmaödî_föôe
);

385 
__REDIRECT_NTH
 (
ªmaödîl
, (, ),

386 
__ªmaödîl_föôe
);

390 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


392 
__REDIRECT_NTH
 (
sˇlb
, (, ), 
__sˇlb_föôe
);

393 
__REDIRECT_NTH
 (
sˇlbf
, (, ), 
__sˇlbf_föôe
);

394 #ifde‡
__MATH_DECLARE_LDOUBLE


395 #ifde‡
__NO_LONG_DOUBLE_MATH


396 
__REDIRECT_NTH
 (
sˇlbl
, (, ),

397 
__sˇlb_föôe
);

399 
__REDIRECT_NTH
 (
sˇlbl
, (, ),

400 
__sˇlbl_föôe
);

406 
__REDIRECT_NTH
 (
söh
, (), 
__söh_föôe
);

407 
__REDIRECT_NTH
 (
söhf
, (), 
__söhf_föôe
);

408 #ifde‡
__MATH_DECLARE_LDOUBLE


409 #ifde‡
__NO_LONG_DOUBLE_MATH


410 
__REDIRECT_NTH
 (
söhl
, (), 
__söh_föôe
);

412 
__REDIRECT_NTH
 (
söhl
, (), 
__söhl_föôe
);

417 
__REDIRECT_NTH
 (
sqπ
, (), 
__sqπ_föôe
);

418 
__REDIRECT_NTH
 (
sqπf
, (), 
__sqπf_föôe
);

419 #ifde‡
__MATH_DECLARE_LDOUBLE


420 #ifde‡
__NO_LONG_DOUBLE_MATH


421 
__REDIRECT_NTH
 (
sqπl
, (), 
__sqπ_föôe
);

423 
__REDIRECT_NTH
 (
sqπl
, (), 
__sqπl_föôe
);

427 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__exã∫_Æways_ölöe


429 
__gamma_r_föôe
 (, *);

430 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgamma
 (
__d
))

432 
__loˇl_signgam
 = 0;

433 
__ªs
 = 
	`__gamma_r_föôe
 (
__d
, &
__loˇl_signgam
);

434  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

435 
	}
}

436 
__gammaf_r_föôe
 (, *);

437 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgammaf
 (
__d
))

439 
__loˇl_signgam
 = 0;

440 
__ªs
 = 
	`__gammaf_r_föôe
 (
__d
, &
__loˇl_signgam
);

441  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

442 
	}
}

443 #ifde‡
__MATH_DECLARE_LDOUBLE


444 
__gammÆ_r_föôe
 (, *);

445 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgammÆ
 (
__d
))

447 
__loˇl_signgam
 = 0;

448 #ifde‡
__NO_LONG_DOUBLE_MATH


449 
__ªs
 = 
	`__gamma_r_föôe
 (
__d
, &
__loˇl_signgam
);

451 
__ªs
 = 
	`__gammÆ_r_föôe
 (
__d
, &
__loˇl_signgam
);

453  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

454 
	}
}

	@/usr/include/bits/mathcalls.h

45 #i‚de‡
_MATH_H


52 
_MdoubÀ_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubÀ_
 
__x
));

56 
__MATHCALL
 (
asö
,, (
_MdoubÀ_
 
__x
));

58 
__MATHCALL
 (
©™
,, (
_MdoubÀ_
 
__x
));

60 
__MATHCALL
 (
©™2
,, (
_MdoubÀ_
 
__y
, _MdoubÀ_ 
__x
));

63 
__MATHCALL
 (
cos
,, (
_MdoubÀ_
 
__x
));

65 
__MATHCALL
 (
sö
,, (
_MdoubÀ_
 
__x
));

67 
__MATHCALL
 (
èn
,, (
_MdoubÀ_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubÀ_
 
__x
));

74 
__MATHCALL
 (
söh
,, (
_MdoubÀ_
 
__x
));

76 
__MATHCALL
 (
ènh
,, (
_MdoubÀ_
 
__x
));

77 
	g_MdoubÀ_END_NAMESPACE


79 #ifde‡
__USE_GNU


81 
__MATHDECL
 (,
söcos
,,

82 (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__söx
, _MdoubÀ_ *
__cosx
));

85 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubÀ_
 
__x
));

90 
__MATHCALL
 (
asöh
,, (
_MdoubÀ_
 
__x
));

92 
__MATHCALL
 (
©™h
,, (
_MdoubÀ_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubÀ_BEGIN_NAMESPACE


100 
__MATHCALL
 (
exp
,, (
_MdoubÀ_
 
__x
));

103 
__MATHCALL
 (
‰exp
,, (
_MdoubÀ_
 
__x
, *
__exp⁄ít
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubÀ_
 
__x
, 
__exp⁄ít
));

109 
__MATHCALL
 (
log
,, (
_MdoubÀ_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubÀ_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__ùå
))

116 
__©åibuã__
 ((
__n⁄nuŒ__
 (2)));

117 
	g_MdoubÀ_END_NAMESPACE


119 #ifde‡
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubÀ_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubÀ_
 
__x
));

126 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubÀ_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubÀ_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubÀ_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifde‡
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubÀ_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubÀ_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubÀ_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

157 
__MATHCALL
 (
sqπ
,, (
_MdoubÀ_
 
__x
));

158 
	g_MdoubÀ_END_NAMESPACE


160 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypŸ
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cbπ
,, (
_MdoubÀ_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubÀ_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
˚û
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

182 
__MATHCALLX
 (
Ábs
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

185 
__MATHCALLX
 (
Êo‹
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

193 
__MATHDECL_1
 (,
__isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

196 
__MATHDECL_1
 (,
__föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

197 
	g_MdoubÀ_END_NAMESPACE


199 #ifde‡
__USE_MISC


202 
__MATHDECL_1
 (,
isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

205 
__MATHDECL_1
 (,
föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

208 
__MATHCALL
 (
dªm
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

212 
__MATHCALL
 (
signifiˇnd
,, (
_MdoubÀ_
 
__x
));

215 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
c›ysign
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

219 
	g__END_NAMESPACE_C99


222 #ifde‡
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
«n
,, (c⁄° *
__ègb
), (
__c⁄°__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

233 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubÀ_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubÀ_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubÀ_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubÀ_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubÀ_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubÀ_
));

247 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
îf
,, (
_MdoubÀ_
));

251 
__MATHCALL
 (
îfc
,, (
_MdoubÀ_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubÀ_
));

253 
	g__END_NAMESPACE_C99


256 #ifde‡
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubÀ_
));

260 
	g__END_NAMESPACE_C99


263 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubÀ_
));

268 #ifde‡
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubÀ_
, *
__signgamp
));

276 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
röt
,, (
_MdoubÀ_
 
__x
));

283 
__MATHCALLX
 (
√xè·î
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

284 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
√xâow¨d
,, (
_MdoubÀ_
 
__x
, 
__y
), (
__c⁄°__
));

289 
__MATHCALL
 (
ªmaödî
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

291 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


293 
__MATHCALL
 (
sˇlbn
,, (
_MdoubÀ_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ûogb
,, (
_MdoubÀ_
 
__x
));

300 #ifde‡
__USE_ISOC99


302 
__MATHCALL
 (
sˇlb 
,, (
_MdoubÀ_
 
__x
, 
__n
));

306 
__MATHCALL
 (
√¨byöt
,, (
_MdoubÀ_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

314 
__MATHCALLX
 (
åunc
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

319 
__MATHCALL
 (
ªmquo
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ãöt
,, (
_MdoubÀ_
 
__x
));

327 
__MATHDECL
 (,
Œröt
,, (
_MdoubÀ_
 
__x
));

331 
__MATHDECL
 (,
Ãound
,, (
_MdoubÀ_
 
__x
));

332 
__MATHDECL
 (,
Œround
,, (
_MdoubÀ_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

339 
__MATHCALLX
 (
fmax
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

342 
__MATHCALLX
 (
fmö
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

346 
__MATHDECL_1
 (, 
__Â˛assify
,, (
_MdoubÀ_
 
__vÆue
))

347 
__©åibuã__
 ((
__c⁄°__
));

350 
__MATHDECL_1
 (, 
__signbô
,, (
_MdoubÀ_
 
__vÆue
))

351 
__©åibuã__
 ((
__c⁄°__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, _MdoubÀ_ 
__z
));

358 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sˇlb
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #i‡!
deföed
 
_MATH_H
 && !deföed 
_COMPLEX_H


22 #i‡
deföed
 
__USE_ISOC99
 && deföed 
_MATH_H
 && !deföed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #i‡
deföed
 
__x86_64__
 || (deföed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tÊﬂt_t
;

29 
	tdoubÀ_t
;

35 
	tÊﬂt_t
;

37 
	tdoubÀ_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #i‡
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #i‡
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #i‡
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #i‚de‡
_MATH_H


23 #i‚de‡
__exã∫_Æways_ölöe


24 
	#__MATH_INLINE
 
__ölöe


	)

26 
	#__MATH_INLINE
 
__exã∫_Æways_ölöe


	)

30 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__
 && __GNUC__ >= 2

32 #i‡!
__GNUC_PREREQ
 (2,97)

37 #unde‡
isgª©î


38 #unde‡
isgª©îequÆ


39 #unde‡
i¶ess


40 #unde‡
i¶es£quÆ


41 #unde‡
i¶essgª©î


42 #unde‡
isun‹dîed


43 #ifde‡
__i686__


46 
	#isgª©î
(
x
, 
y
) \

47 ({ 
__ªsu…
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__ªsu…
; })

	)

51 
	#isgª©îequÆ
(
x
, 
y
) \

52 ({ 
__ªsu…
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__ªsu…
; })

	)

57 
	#i¶ess
(
x
, 
y
) \

58 ({ 
__ªsu…
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__ªsu…
; })

	)

63 
	#i¶es£quÆ
(
x
, 
y
) \

64 ({ 
__ªsu…
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__ªsu…
; })

	)

69 
	#i¶essgª©î
(
x
, 
y
) \

70 ({ 
__ªsu…
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__ªsu…
; })

	)

75 
	#isun‹dîed
(
x
, 
y
) \

76 ({ 
__ªsu…
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__ªsu…
; })

	)

82 
	#isgª©î
(
x
, 
y
) \

83 ({ 
__ªsu…
; \

84 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

85 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__ªsu…
; })

	)

88 
	#isgª©îequÆ
(
x
, 
y
) \

89 ({ 
__ªsu…
; \

90 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

91 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__ªsu…
; })

	)

94 
	#i¶ess
(
x
, 
y
) \

95 ({ 
__ªsu…
; \

96 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

97 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__ªsu…
; })

	)

100 
	#i¶es£quÆ
(
x
, 
y
) \

101 ({ 
__ªsu…
; \

102 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

103 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__ªsu…
; })

	)

106 
	#i¶essgª©î
(
x
, 
y
) \

107 ({ 
__ªsu…
; \

108 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x44, %%ah; setz %%al" \

109 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__ªsu…
; })

	)

112 
	#isun‹dîed
(
x
, 
y
) \

113 ({ 
__ªsu…
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__ªsu…
; })

	)

122 #i‡
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signbôf
 (
__x
))

129 #ifde‡
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__exãnsi⁄__
 uni⁄ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signbô
 (
__x
))

141 #ifde‡
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__exãnsi⁄__
 uni⁄ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signbôl
 (
__x
))

153 
__exãnsi⁄__
 uni⁄ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #i‡
__GNUC_PREREQ
 (2, 8)

165 #i‡!
__GNUC_PREREQ
 (3, 4Ë&& !
deföed
 
__NO_MATH_INLINES
 \

166 && 
deföed
 
	g__OPTIMIZE__


170 #ifde‡
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifde‡
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ãötf
 (
__x
))

178 
__ªs
;

183 
__asm
 
	`__vﬁ©ûe__
 ("cvtss2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

184  
__ªs
;

185 
	}
}

187 #ifde‡
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ãöt
 (
__x
))

191 
__ªs
;

196 
__asm
 
	`__vﬁ©ûe__
 ("cvtsd2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

197  
__ªs
;

198 
	}
}

200 #ifde‡
__x86_64__


201 
__MATH_INLINE
 

202 
__NTH
 (
	$Œrötf
 (
__x
))

204 
__ªs
;

209 
__asm
 
	`__vﬁ©ûe__
 ("cvtss2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

210  
__ªs
;

211 
	}
}

212 
__MATH_INLINE
 

213 
__NTH
 (
	$Œröt
 (
__x
))

215 
__ªs
;

220 
__asm
 
	`__vﬁ©ûe__
 ("cvtsd2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

221  
__ªs
;

222 
	}
}

225 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

226 && 
deföed
 
__SSE2_MATH__


228 
__MATH_INLINE
 

229 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

231 #ifde‡
__AVX__


232 
__ªs
;

233 
	`__asm
 ("vmaxs†%2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

234  
__ªs
;

236 
	`__asm
 ("maxs†%1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

237  
__x
;

239 
	}
}

240 
__MATH_INLINE
 

241 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

243 #ifde‡
__AVX__


244 
__ªs
;

245 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

246  
__ªs
;

248 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

249  
__x
;

251 
	}
}

254 
__MATH_INLINE
 

255 
__NTH
 (
	$fmöf
 (
__x
, 
__y
))

257 #ifde‡
__AVX__


258 
__ªs
;

259 
	`__asm
 ("vmös†%2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

260  
__ªs
;

262 
	`__asm
 ("mös†%1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

263  
__x
;

265 
	}
}

266 
__MATH_INLINE
 

267 
__NTH
 (
	$fmö
 (
__x
, 
__y
))

269 #ifde‡
__AVX__


270 
__ªs
;

271 
	`__asm
 ("vmösd %2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

272  
__ªs
;

274 
	`__asm
 ("mösd %1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

275  
__x
;

277 
	}
}

280 
	g__END_NAMESPACE_C99


283 #i‡
deföed
 
__SSE4_1__
 && deföed 
__SSE2_MATH__


284 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


285 
__BEGIN_NAMESPACE_C99


288 
__MATH_INLINE
 

289 
__NTH
 (
	$röt
 (
__x
))

291 
__ªs
;

296 
__asm
 
	`__vﬁ©ûe__
 ("roundsd $4, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

297  
__ªs
;

298 
	}
}

299 
__MATH_INLINE
 

300 
__NTH
 (
	$rötf
 (
__x
))

302 
__ªs
;

307 
__asm
 
	`__vﬁ©ûe__
 ("rounds†$4, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

308  
__ªs
;

309 
	}
}

311 #ifde‡
__USE_ISOC99


313 
__MATH_INLINE
 

314 
__NTH
 (
	$√¨byöt
 (
__x
))

316 
__ªs
;

321 
__asm
 
	`__vﬁ©ûe__
 ("roundsd $0xc, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

322  
__ªs
;

323 
	}
}

324 
__MATH_INLINE
 

325 
__NTH
 (
	$√¨byötf
 (
__x
))

327 
__ªs
;

332 
__asm
 
	`__vﬁ©ûe__
 ("rounds†$0xc, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

333  
__ªs
;

334 
	}
}

337 
	g__END_NAMESPACE_C99


340 
__BEGIN_NAMESPACE_STD


342 
__MATH_INLINE
 

343 
__NTH
 (
	$˚û
 (
__x
))

345 
__ªs
;

346 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

347  
__ªs
;

348 
	}
}

349 
__END_NAMESPACE_STD


351 
__BEGIN_NAMESPACE_C99


352 
__MATH_INLINE
 

353 
__NTH
 (
	$˚ûf
 (
__x
))

355 
__ªs
;

356 
	`__asm
 ("rounds†$2, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

357  
__ªs
;

358 
	}
}

359 
__END_NAMESPACE_C99


361 
__BEGIN_NAMESPACE_STD


363 
__MATH_INLINE
 

364 
__NTH
 (
	$Êo‹
 (
__x
))

366 
__ªs
;

367 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

368  
__ªs
;

369 
	}
}

370 
__END_NAMESPACE_STD


372 
__BEGIN_NAMESPACE_C99


373 
__MATH_INLINE
 

374 
__NTH
 (
	$Êo‹f
 (
__x
))

376 
__ªs
;

377 
	`__asm
 ("rounds†$1, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

378  
__ªs
;

379 
	}
}

380 
	g__END_NAMESPACE_C99


385 #i‚de‡
__x86_64__


386 #i‡((!
deföed
 
__NO_MATH_INLINES
 || deföed 
__LIBC_INTERNAL_MATH_INLINES
) \

387 && 
deföed
 
	g__OPTIMIZE__
)

391 #unde‡
m©h_îrh™dlög


400 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


401 
	#__ölöe_m©h›
(
func
, 
›
) \

402 
	`__ölöe_m©h›_
 (, 
func
, 
›
) \

403 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

404 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

405 
	#__ölöe_m©h›NP
(
func
, 
›
) \

406 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
) \

407 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

408 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

410 
	#__ölöe_m©h›
(
func
, 
›
) \

411 
	`__ölöe_m©h›_
 (, 
func
, 
›
)

	)

412 
	#__ölöe_m©h›NP
(
func
, 
›
) \

413 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
)

	)

416 
	#__ölöe_m©h›_
(
Êﬂt_ty≥
, 
func
, 
›
) \

417 
	`__ölöe_m©h›_de˛_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

418 
	#__ölöe_m©h›NP_
(
Êﬂt_ty≥
, 
func
, 
›
) \

419 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

422 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


423 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

424 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
) \

425 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

426 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

427 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

428 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
) \

429 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

430 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

432 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

433 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
)

	)

434 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

435 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
)

	)

438 
	#__ölöe_m©h›_de˛_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

439 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

440 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
)

	)

442 
	#__ölöe_m©h›_de˛NP_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

443 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
__x
)) \

445 
Êﬂt_ty≥
 
__ªsu…
; \

446 
__asm
 
	`__vﬁ©ûe__
 (
›
 : "Ò" (
__ªsu…
Ë: 
∑øms
); \

447  
__ªsu…
; \

448 }

	)

451 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


452 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

453 
	`__ölöe_m©hcode_
 (, 
func
, 
¨g
, 
code
) \

454 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

455 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

456 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

457 
	`__ölöe_m©hcodeNP_
 (, 
func
, 
¨g
, 
code
) \

458 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

459 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

460 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

461 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

462 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

463 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

464 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

465 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

466 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

467 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

468 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

469 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

470 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

471 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

472 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

473 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

474 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

475 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

477 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

478 
	`__ölöe_m©hcode_
 (, 
func
, (
¨g
), 
code
)

	)

479 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

480 
	`__ölöe_m©hcodeNP_
 (, 
func
, (
¨g
), 
code
)

	)

481 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

482 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

483 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

484 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

485 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

486 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

487 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

488 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

491 
	#__ölöe_m©hcode_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

492 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

493 
	`__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
)

	)

495 
	#__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

496 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g
)) \

498 
code
; \

499 }

	)

502 
	#__ölöe_m©hcode2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

503 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

504 
	`__ölöe_m©hcodeNP2_
 (
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

506 
	#__ölöe_m©hcodeNP2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

507 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
)) \

509 
code
; \

510 }

	)

512 
	#__ölöe_m©hcode3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

513 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

514 
	`__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

516 
	#__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

517 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
, \

518 
Êﬂt_ty≥
 
¨g3
)) \

520 
code
; \

521 }

	)

525 #i‡!
deföed
 
__NO_MATH_INLINES
 && deföed 
__OPTIMIZE__


529 #ifde‡
__FAST_MATH__


530 #ifde‡
__USE_GNU


531 
	#__söcos_code
 \

532 
__co§
; \

533 
__sör
; \

534 
__swtmp
; \

535 
__asm
 
__vﬁ©ûe__
 \

550 : "Ò" (
__co§
), "=u" (
__sör
), "˜" (
__swtmp
Ë: "0" (
__x
)); \

551 *
__söx
 = 
__sör
; \

552 *
__cosx
 = 
__co§


	)

554 
__MATH_INLINE
 

555 
__NTH
 (
	$__söcos
 (
__x
, *
__söx
, *
__cosx
))

557 
__söcos_code
;

558 
	}
}

560 
__MATH_INLINE
 

561 
__NTH
 (
	$__söcosf
 (
__x
, *
__söx
, *
__cosx
))

563 
__söcos_code
;

564 
	}
}

566 
__MATH_INLINE
 

567 
__NTH
 (
	$__söco¶
 (
__x
, *
__söx
, *
__cosx
))

569 
__söcos_code
;

570 
	}
}

577 #i‡
__GNUC_PREREQ
 (3, 5)

578 
	#__expm1_code
 \

579 
__ãmp
; \

580 
__ãmp
 = 
	`__buûtö_expm1l
 (
__x
); \

581  
__ãmp
 ? __ãm∞: 
__x


	)

583 
	#__expm1_code
 \

584 
__vÆue
; \

585 
__exp⁄ít
; \

586 
__ãmp
; \

587 
__asm
 
__vﬁ©ûe__
 \

596 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

597 
__asm
 
__vﬁ©ûe__
 \

599 : "Ò" (
__ãmp
Ë: "0" (1.0), "u" (
__exp⁄ít
)); \

600 
__ãmp
 -= 1.0; \

601 
__ãmp
 +
__vÆue
; \

602  
__ãmp
 ? __ãm∞: 
__x


	)

604 
	$__ölöe_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

606 #i‡
	`__GNUC_PREREQ
 (3, 4)

607 
	`__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
,  
	$__buûtö_ex∂
 (
__x
))

609 
	#__exp_code
 \

610 
__vÆue
; \

611 
__exp⁄ít
; \

612 
__asm
 
__vﬁ©ûe__
 \

620 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

621 
__vÆue
 += 1.0; \

622 
__asm
 
__vﬁ©ûe__
 \

624 : "Ò" (
__vÆue
Ë: "0" (__vÆue), "u" (
__exp⁄ít
)); \

625  
__vÆue


	)

626 
	$__ölöe_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

627 
	$__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
, 
__exp_code
)

631 #i‡!
	`__GNUC_PREREQ
 (3, 5)

632 
	`__ölöe_m©hcodeNP
 (
èn
, 
__x
, \

633 
__vÆue
; \

634 
__vÆue2
 
	`__©åibuã__
 ((
__unu£d__
)); \

635 
__asm
 
__vﬁ©ûe__
 \

637 : "Ò" (
__vÆue2
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

638  
__vÆue
)

643 #i‡
	`__GNUC_PREREQ
 (3, 4)

644 
	`__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
,

645  
	$__buûtö_©™2l
 (
__y
, 
__x
))

647 
	#__©™2_code
 \

648 
__vÆue
; \

649 
__asm
 
__vﬁ©ûe__
 \

651 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "st(1)"); \

652  
__vÆue


	)

653 #ifde‡
__FAST_MATH__


654 
	$__ölöe_m©hcodeNP2
 (
©™2
, 
__y
, 
__x
, 
__©™2_code
)

656 
	$__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
, 
__©™2_code
)

660 #i‡
deföed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

661 
	`__ölöe_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

662 
__vÆue
; \

663 
__asm
 
__vﬁ©ûe__
 \

668 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

669  
__vÆue
)

673 #ifde‡
__FAST_MATH__


674 #i‡!
	`__GNUC_PREREQ
 (3,3)

675 
	`__ölöe_m©h›NP
 (
sqπ
, "fsqrt")

676 
	`__ölöe_m©h›NP_
 (, 
__sqπl
, "fsqrt")

677 
	#__libc_sqπl
(
n
Ë
	`__sqπl
 (n)

	)

679 
	#__libc_sqπl
(
n
Ë
	`__buûtö_sqπl
 (n)

	)

683 #i‡
	`__GNUC_PREREQ
 (2, 8)

684 
	`__ölöe_m©hcodeNP_
 (, 
Ábs
, 
__x
,  
	$__buûtö_Ábs
 (
__x
))

685 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


686 
	`__ölöe_m©hcodeNP_
 (, 
Ábsf
, 
__x
,  
	$__buûtö_Ábsf
 (
__x
))

687 
	`__ölöe_m©hcodeNP_
 (, 
Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

689 
	`__ölöe_m©hcodeNP_
 (, 
__Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

691 
	`__ölöe_m©h›
 (
Ábs
, "fabs")

692 
	`__ölöe_m©h›_
 (, 
__Áb¶
, "fabs")

695 #ifde‡
__FAST_MATH__


696 #i‡!
	`__GNUC_PREREQ
 (3, 4)

698 
	`__ölöe_m©h›NP
 (
sö
, "fsin")

700 
	`__ölöe_m©h›NP
 (
cos
, "fcos")

702 
	`__ölöe_m©h›_de˛NP
 (
log
, "Êd 2; fxch; fyl2x", "0" (
__x
) : "st(1)")

705 #i‡!
	`__GNUC_PREREQ
 (3, 5)

706 
	`__ölöe_m©h›_de˛NP
 (
log10
, "Êdlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

708 
	`__ölöe_m©hcodeNP
 (
asö
, 
__x
,  
	`__©™2l
 (__x, 
	`__libc_sqπl
 (1.0 - __x * __x)))

709 
	`__ölöe_m©hcodeNP
 (
acos
, 
__x
,  
	`__©™2l
 (
	`__libc_sqπl
 (1.0 - __x * __x), __x))

712 #i‡!
	`__GNUC_PREREQ
 (3, 4)

713 
	`__ölöe_m©h›_de˛NP
 (
©™
, "Êd1; f∑èn", "0" (
__x
) : "st(1)")

717 
	`__ölöe_m©hcode_
 (, 
__sgn1l
, 
__x
, \

718 
__exãnsi⁄__
 uni⁄ { 
__xld
; 
__xi
[3]; } 
__n
 = \

719 { 
__xld
: 
__x
 
	}
}; \

720 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

721 
	g__n
.
	g__xi
[1] = 0x80000000; \

722 
	g__n
.
	g__xi
[0] = 0; \

723  
	g__n
.
	g__xld
)

726 #ifde‡
__FAST_MATH__


728 
__ölöe_m©hcodeNP
 (
söh
, 
__x
, \

729 
__exm1
 = 
__expm1l
 (
__Áb¶
 (
__x
)); \

730  0.5 * (
__exm1
 / (__exm1 + 1.0Ë+ __exm1Ë* 
	$__sgn1l
 (
__x
))

732 
	`__ölöe_m©hcodeNP
 (
cosh
, 
__x
, \

733 
__ex
 = 
	`__ex∂
 (
__x
); \

734  0.5 * (
__ex
 + 1.0 / __ex))

736 
	`__ölöe_m©hcodeNP
 (
ènh
, 
__x
, \

737 
__exm1
 = 
	`__expm1l
 (-
	`__Áb¶
 (
__x
 + __x)); \

738  
__exm1
 / (__exm1 + 2.0Ë* 
	`__sgn1l
 (-
__x
))

741 
	`__ölöe_m©hcodeNP
 (
Êo‹
, 
__x
, \

742 
__vÆue
; \

743 
__ign‹e
; \

744 
__cw
; \

745 
__cwtmp
; \

746 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

754 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

755 "=m" (
__cw
) \

756 : "0" (
__x
)); \

757  
__vÆue
)

759 
	`__ölöe_m©hcodeNP
 (
˚û
, 
__x
, \

760 
__vÆue
; \

761 
__ign‹e
; \

762 
__cw
; \

763 
__cwtmp
; \

764 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

772 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

773 "=m" (
__cw
) \

774 : "0" (
__x
)); \

775  
__vÆue
)

777 #ifde‡
__FAST_MATH__


778 
	#__ldexp_code
 \

779 
__vÆue
; \

780 
__asm
 
__vﬁ©ûe__
 \

782 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" ((Ë
__y
)); \

783  
__vÆue


	)

785 
__MATH_INLINE
 

786 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

788 
__ldexp_code
;

789 
	}
}

794 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


796 #ifde‡
__FAST_MATH__


797 
	$__ölöe_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

801 
	#__M_SQRT2
 1.41421356237309504880L

	)

803 #i‡!
	`__GNUC_PREREQ
 (3, 5)

804 
	`__ölöe_m©hcodeNP
 (
log1p
, 
__x
, \

805 
__vÆue
; \

806 i‡(
	`__Áb¶
 (
__x
Ë>1.0 - 0.5 * 
__M_SQRT2
) \

807 
__vÆue
 = 
	`logl
 (1.0 + 
__x
); \

809 
__asm
 
__vﬁ©ûe__
 \

813 : "Ò" (
__vÆue
Ë: "0" (
__x
) : "st(1)"); \

814  
__vÆue
)

819 
	`__ölöe_m©hcodeNP
 (
asöh
, 
__x
, \

820 
__y
 = 
	`__Áb¶
 (
__x
); \

821  (
	`log1∂
 (
__y
 * __y / (
	`__libc_sqπl
 (__y * __y + 1.0) + 1.0) + __y) \

822 * 
	$__sgn1l
 (
__x
)))

824 
	`__ölöe_m©hcodeNP
 (
acosh
, 
__x
, \

825  
	`logl
 (
__x
 + 
	`__libc_sqπl
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

827 
	`__ölöe_m©hcodeNP
 (
©™h
, 
__x
, \

828 
__y
 = 
	`__Áb¶
 (
__x
); \

829  -0.5 * 
	`log1∂
 (-(
__y
 + __yË/ (1.0 + __y)Ë* 
	$__sgn1l
 (
__x
))

832 
	`__ölöe_m©hcodeNP2
 (
hypŸ
, 
__x
, 
__y
,

833  
	`__libc_sqπl
 (
__x
 * __x + 
__y
 * __y))

835 #i‡!
	`__GNUC_PREREQ
 (3, 5)

836 
	`__ölöe_m©hcodeNP
(
logb
, 
__x
, \

837 
__vÆue
; \

838 
__junk
; \

839 
__asm
 
__vﬁ©ûe__
 \

841 : "Ò" (
__junk
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

842  
__vÆue
)

848 #ifde‡
__USE_ISOC99


849 #ifde‡
__FAST_MATH__


851 #i‡!
	`__GNUC_PREREQ
 (3, 5)

852 
	`__ölöe_m©h›_de˛NP
 (
log2
, "Êd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

855 
__MATH_INLINE
 

856 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

858 
__ldexp_code
;

859 
	}
}

861 
__MATH_INLINE
 

862 
__NTH
 (
	$ldex∂
 (
__x
, 
__y
))

864 
__ldexp_code
;

865 
	}
}

867 
__ölöe_m©h›NP
 (
röt
, "frndint")

870 
	#__Ãöt_code
 \

871 
__Ãöåes
; \

872 
__asm__
 
__vﬁ©ûe__
 \

874 : "=m" (
__Ãöåes
Ë: "t" (
__x
) : "st"); \

875  
__Ãöåes


	)

876 
__MATH_INLINE
 

877 
__NTH
 (
	$Ãötf
 (
__x
))

879 
__Ãöt_code
;

880 
	}
}

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ãöt
 (
__x
))

884 
__Ãöt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$Ãöé
 (
__x
))

889 
__Ãöt_code
;

890 
	}
}

891 #unde‡
__Ãöt_code


893 
	#__Œröt_code
 \

894 
__Œröåes
; \

895 
__asm__
 
__vﬁ©ûe__
 \

897 : "=m" (
__Œröåes
Ë: "t" (
__x
) : "st"); \

898  
__Œröåes


	)

899 
__MATH_INLINE
 

900 
__NTH
 (
	$Œrötf
 (
__x
))

902 
__Œröt_code
;

903 
	}
}

904 
__MATH_INLINE
 

905 
__NTH
 (
	$Œröt
 (
__x
))

907 
__Œröt_code
;

908 
	}
}

909 
__MATH_INLINE
 

910 
__NTH
 (
	$Œröé
 (
__x
))

912 
__Œröt_code
;

913 
	}
}

914 #unde‡
__Œröt_code


919 #ifde‡
__USE_MISC


921 #i‡
deföed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

922 
__ölöe_m©hcodeNP2
 (
dªm
, 
__x
, 
__y
, \

923 
__vÆue
; \

924 
__˛obbîed
; \

925 
__asm
 
__vﬁ©ûe__
 \

930 : "Ò" (
__vÆue
), "=&a" (
__˛obbîed
Ë: "0" (
__x
), "u" (
__y
) : "cc"); \

931  
__vÆue
)

936 
__MATH_INLINE
 

937 
__NTH
 (
	$__föôe
 (
__x
))

939  (
__exãnsi⁄__


940 (((((uni⁄ { 
__d
; 
__i
[2]; }Ë{__d: 
__x
}).__i[1]

942 
	}
}

947 #unde‡
__©™2_code


948 #ifde‡
__FAST_MATH__


949 #unde‡
__expm1_code


950 #unde‡
__exp_code


951 #unde‡
__söcos_code


958 #ifde‡
__LIBC_INTERNAL_MATH_INLINES


959 
__ölöe_m©h›
 (
__õì754_sqπ
, "fsqrt")

960 
__ölöe_m©hcode2
 (
__õì754_©™2
, 
__y
, 
__x
,

961 
__vÆue
;

962 
__asm
 
__vﬁ©ûe__
 ("fpatan\n\t"

963 : "Ò" (
__vÆue
)

964 : "0" (
__x
), "u" (
__y
) : "st(1)");

965  
__vÆue
;)

	@/usr/include/bits/nan.h

19 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__buûtö_«nf
 (""))

	)

30 #ñi‡
deföed
 
__GNUC__


32 
	#NAN
 \

33 (
__exãnsi⁄__
 \

34 ((uni⁄ { 
__l
 
	`__©åibuã__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<ídün.h
>

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#__«n_byãs
 { 0x7f, 0xc0, 0, 0 }

	)

44 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


45 
	#__«n_byãs
 { 0, 0, 0xc0, 0x7‡}

	)

48 uni⁄ { 
	m__c
[4]; 
	m__d
; } 
__«n_uni⁄


49 
	g__©åibuã_u£d__
 = { 
__«n_byãs
 };

50 
	#NAN
 (
__«n_uni⁄
.
__d
)

	)

	@/usr/include/bits/posix_opt.h

19 #i‚def 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

29 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

32 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

35 
	#_POSIX_FSYNC
 200809L

	)

38 
	#_POSIX_MAPPED_FILES
 200809L

	)

41 
	#_POSIX_MEMLOCK
 200809L

	)

44 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

47 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

50 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

54 
	#_POSIX_VDISABLE
 '\0'

	)

57 
	#_POSIX_NO_TRUNC
 1

	)

60 
	#_XOPEN_REALTIME
 1

	)

63 
	#_XOPEN_REALTIME_THREADS
 1

	)

66 
	#_XOPEN_SHM
 1

	)

69 
	#_POSIX_THREADS
 200809L

	)

72 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

73 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

76 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

79 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

85 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

89 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

91 #ifde‡
__USE_XOPEN2K8


93 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

96 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

100 
	#_POSIX_SEMAPHORES
 200809L

	)

103 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

106 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

107 
	#_POSIX_ASYNC_IO
 1

	)

109 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

111 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

114 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

117 
	#_LFS_LARGEFILE
 1

	)

118 
	#_LFS64_LARGEFILE
 1

	)

119 
	#_LFS64_STDIO
 1

	)

122 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

125 
	#_POSIX_CPUTIME
 0

	)

128 
	#_POSIX_THREAD_CPUTIME
 0

	)

131 
	#_POSIX_REGEXP
 1

	)

134 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

137 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_TIMEOUTS
 200809L

	)

143 
	#_POSIX_SPIN_LOCKS
 200809L

	)

146 
	#_POSIX_SPAWN
 200809L

	)

149 
	#_POSIX_TIMERS
 200809L

	)

152 
	#_POSIX_BARRIERS
 200809L

	)

155 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

158 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

161 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

164 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

167 
	#_POSIX_ADVISORY_INFO
 200809L

	)

170 
	#_POSIX_IPV6
 200809L

	)

173 
	#_POSIX_RAW_SOCKETS
 200809L

	)

176 
	#_POSIX2_CHAR_TERM
 200809L

	)

179 
	#_POSIX_SPORADIC_SERVER
 -1

	)

180 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_TRACE
 -1

	)

184 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

185 
	#_POSIX_TRACE_INHERIT
 -1

	)

186 
	#_POSIX_TRACE_LOG
 -1

	)

189 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

192 
	#_XOPEN_STREAMS
 -1

	)

	@/usr/include/bits/stdlib-float.h

19 #i‚de‡
_STDLIB_H


23 #ifde‡
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__exã∫_ölöe
 

26 
__NTH
 (
	$©of
 (c⁄° *
__≈å
))

28  
	`°πod
 (
__≈å
, (**Ë
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #i‚de‡
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
°πﬁd
, 
°πod
)

26 
__END_NAMESPACE_C99


29 #ifde‡
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
°πﬁd_l
, 
°πod_l
)

33 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


34 #ifde‡
__USE_MISC


35 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

39 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #i‚de‡
_STDLIB_H


23 *
	$__ªÆ∑th_chk
 (c⁄° *
__ª°ri˘
 
__«me
,

24 *
__ª°ri˘
 
__ªsﬁved
,

25 
size_t
 
__ªsﬁvedÀn
Ë
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_Æüs
,

27 (c⁄° *
__ª°ri˘
 
__«me
,

28 *
__ª°ri˘
 
__ªsﬁved
), 
ªÆ∑th
Ë
__wur
;

29 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_chk_w¨n
,

30 (c⁄° *
__ª°ri˘
 
__«me
,

31 *
__ª°ri˘
 
__ªsﬁved
,

32 
size_t
 
__ªsﬁvedÀn
), 
__ªÆ∑th_chk
Ë
__wur


33 
	`__w¨«âr
 ("secondárgument ofÑealpath must beÉither NULL orát "

36 
__f‹tify_fun˘i⁄
 
__wur
 *

37 
	`__NTH
 (
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
, *__ª°ri˘ 
__ªsﬁved
))

39 i‡(
	`__bos
 (
__ªsﬁved
Ë!(
size_t
) -1)

41 #i‡
deföed
 
_LIBC_LIMITS_H_
 && deföed 
PATH_MAX


42 i‡(
	`__bos
 (
__ªsﬁved
Ë< 
PATH_MAX
)

43  
	`__ªÆ∑th_chk_w¨n
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

45  
	`__ªÆ∑th_chk
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

48  
	`__ªÆ∑th_Æüs
 (
__«me
, 
__ªsﬁved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

53 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_Æüs
, (
__fd
, *
__buf
,

55 
size_t
 
__buÊí
), 
±¢ame_r
)

56 
	`__n⁄nuŒ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¨n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

59 
size_t
 
__ƒól
), 
__±¢ame_r_chk
)

60 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ptsname_r called with buflen biggerÅhan "

63 
__f‹tify_fun˘i⁄
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

66 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

68 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

70 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

74 
	}
}

77 
	$__w˘omb_chk
 (*
__s
, 
wch¨_t
 
__wch¨
, 
size_t
 
__buÊí
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__w˘omb_Æüs
, (*
__s
, 
wch¨_t
 
__wch¨
),

80 
w˘omb
Ë
__wur
;

82 
__f‹tify_fun˘i⁄
 
__wur
 

83 
	`__NTH
 (
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__STDLIB_MB_LEN_MAX


92 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__w˘omb_chk
 (
__s
, 
__wch¨
, 
	`__bos
 (__s));

94  
	`__w˘omb_Æüs
 (
__s
, 
__wch¨
);

95 
	}
}

98 
size_t
 
	$__mb°owcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

99 c⁄° *
__ª°ri˘
 
__§c
,

100 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_Æüs
,

102 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

103 c⁄° *
__ª°ri˘
 
__§c
,

104 
size_t
 
__Àn
), 
mb°owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_chk_w¨n
,

106 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

107 c⁄° *
__ª°ri˘
 
__§c
,

108 
size_t
 
__Àn
, size_à
__d°Àn
), 
__mb°owcs_chk
)

109 
	`__w¨«âr
 ("mbstowcs called with dst buffer smallerÅhanÜen "

112 
__f‹tify_fun˘i⁄
 
size_t


113 
	`__NTH
 (
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° *__ª°ri˘ 
__§c
,

114 
size_t
 
__Àn
))

116 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

118 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

119  
	`__mb°owcs_chk
 (
__d°
, 
__§c
, 
__Àn
,

120 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

122 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

123  
	`__mb°owcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
,

124 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

126  
	`__mb°owcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

127 
	}
}

130 
size_t
 
	$__wc°ombs_chk
 (*
__ª°ri˘
 
__d°
,

131 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

132 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_Æüs
,

134 (*
__ª°ri˘
 
__d°
,

135 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

136 
size_t
 
__Àn
), 
wc°ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_chk_w¨n
,

138 (*
__ª°ri˘
 
__d°
,

139 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

140 
size_t
 
__Àn
, size_à
__d°Àn
), 
__wc°ombs_chk
)

141 
	`__w¨«âr
 ("wcstombs called with dst buffer smallerÅhanÜen");

143 
__f‹tify_fun˘i⁄
 
size_t


144 
	`__NTH
 (
	$wc°ombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 *__ª°ri˘ 
__§c
,

145 
size_t
 
__Àn
))

147 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

149 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

150  
	`__wc°ombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

151 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

152  
	`__wc°ombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

154  
	`__wc°ombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

155 
	}
}

	@/usr/include/bits/string.h

19 #i‚de‡
_STRING_H


24 
	#_STRING_ARCH_u«lig√d
 1

	)

28 #i‡!
deföed
 
__x86_64__
 && (deföed 
__i486__
 || deföed 
__≥¡ium__
 \

29 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

30 || 
deföed
 
	g__noc⁄a__
 || deföed 
	g__©om__
 \

31 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__c‹ei7__
 \

32 || 
deföed
 
	g__k6__
 || deföed 
	g__geode__
 \

33 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

34 || 
deföed
 
	g__amdÁm10__
)

38 #i‡!
deföed
 
__NO_STRING_INLINES
 && deföed 
__USE_STRING_INLINES
 \

39 && 
deföed
 
	g__GNUC__
 && __GNUC__ >2 && !
__BOUNDED_POINTERS__


41 #i‚de‡
__STRING_INLINE


42 #i‚de‡
__exã∫_ölöe


43 
	#__STRING_INLINE
 
ölöe


	)

45 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

50 
	#__STRING_SMALL_GET16
(
§c
, 
idx
) \

51 ((((c⁄° *Ë(
§c
))[
idx
 + 1] << 8) \

52 | ((c⁄° *Ë(
§c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
§c
, 
idx
) \

54 (((((c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

55 | ((c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

56 | ((c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

57 | ((c⁄° *Ë(
§c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_mem˝y
 1

	)

62 
	#mem˝y
(
de°
, 
§c
, 
n
) \

63 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

64 ? 
	`__mem˝y_c
 ((
de°
), (
§c
), (
n
)) \

65 : 
	`__mem˝y_g
 ((
de°
), (
§c
), (
n
))))

	)

66 
	#__mem˝y_c
(
de°
, 
§c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de°
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__mem˝y_by4
 (
de°
, 
§c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__mem˝y_by2
 (
de°
, 
§c
, 
n
) \

73 : 
	`__mem˝y_g
 (
de°
, 
§c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__mem˝y_by4
 (*
__de°
, c⁄° *
__§c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__mem˝y_by4
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de°
;

83 
__asm__
 
__vﬁ©ûe__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 4)

94  
__de°
;

95 
	}
}

97 
__STRING_INLINE
 *
__mem˝y_by2
 (*
__de°
, c⁄° *
__§c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__mem˝y_by2
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de°
;

105 
__asm__
 
__vﬁ©ûe__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 2)

121  
__de°
;

122 
	}
}

124 
__STRING_INLINE
 *
__mem˝y_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__mem˝y_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de°
;

131 
__asm__
 
__vﬁ©ûe__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__§c
),

145 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
)

147  
__de°
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #i‚de‡
_FORCE_INLINES


154 
	#memmove
(
de°
, 
§c
, 
n
Ë
	`__memmove_g
 (de°, src,Ç)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, c⁄° *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de°
;

164 i‡(
__de°
 < 
__§c
)

165 
__asm__
 
__vﬁ©ûe__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

170 : "0" (
__n
), "1" (
__§c
), "2" (
__tmp
),

171 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

173 
__asm__
 
__vﬁ©ûe__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

179 : "0" (
__n
), "1" (__¿- 1 + (c⁄° *Ë
__§c
),

180 "2" (
__n
 - 1 + (*Ë
__tmp
),

181 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

182  
__de°
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #i‚de‡
_FORCE_INLINES


189 #i‚de‡
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__ªs
;

196 
__asm__
 
__vﬁ©ûe__


204 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

209  
__ªs
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__buûtö_c⁄°™t_p
 (
c
) \

223 ? (
	`__buûtö_c⁄°™t_p
 (
n
) \

224 ? 
	`__mem£t_c˙
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__buûtö_c⁄°™t_p
 (
n
) \

227 ? 
	`__mem£t_g˙
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
Ë({ *
__s
 = (s); \

231 *((*Ë
__s
Ë(Ë(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((Ë((Ë(
c
))) * 0x01010101; \

247 i‡((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vﬁ©ûe__
 ("" : "Ù" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (Ë
__c
; \

264 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (Ë
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (Ë
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (Ë
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_c˙
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_c˙_by4
 (
s
, ((Ë((Ë(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_c˙_by2
 (
s
, \

317 ((Ë((Ë(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_c˙_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_c˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifde‡
__i686__


330 
__asm__
 
__vﬁ©ûe__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vﬁ©ûe__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_c˙_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_c˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifde‡
__i686__


361 
__asm__
 
__vﬁ©ûe__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vﬁ©ûe__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_g˙
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_g˙_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_g˙_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vﬁ©ûe__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vﬁ©ûe__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #i‚de‡
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifde‡
__i686__


449 
__d1
;

451 *
__ªs
;

452 i‡(
__n
 == 0)

453  
NULL
;

454 #ifde‡
__i686__


455 
__asm__
 
__vﬁ©ûe__


459 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vﬁ©ûe__


470 : "=D" (
__ªs
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

475  
__ªs
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #i‚de‡
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifde‡
__i686__


488 
__d1
;

490 *
__ªs
;

491 i‡(
__n
 == 0)

492  
NULL
;

493 #ifde‡
__i686__


494 
__asm__
 
__vﬁ©ûe__


500 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vﬁ©ûe__


512 : "=D" (
__ªs
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

517  
__ªs
;

518 
	}
}

519 #ifde‡
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
Ë
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_øwmemchr
 1

	)

526 
__STRING_INLINE
 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

528 #i‚de‡
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__øwmemchr
 (c⁄° *
__s
, 
__c
)

532 
__d0
;

533 *
__ªs
;

534 
__asm__
 
__vﬁ©ûe__


537 : "=D" (
__ªs
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

541  
__ªs
 - 1;

542 
	}
}

543 #ifde‡
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

547  
	`__øwmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_°æí
 1

	)

555 
	#°æí
(
°r
) \

556 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
°r
) \

557 ? 
	`__buûtö_°æí
 (
°r
) \

558 : 
	`__°æí_g
 (
°r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__°æí_g
 (c⁄° *
__°r
);

561 
__STRING_INLINE
 
size_t


562 
	$__°æí_g
 (c⁄° *
__°r
)

564 
__dummy
;

565 c⁄° *
__tmp
 = 
__°r
;

566 
__asm__
 
__vﬁ©ûe__


572 : "Ù" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__°r
),

574 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__°r
)

576  
__tmp
 - 
__°r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_°r˝y
 1

	)

582 
	#°r˝y
(
de°
, 
§c
) \

583 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

584 ? ( ((
§c
)[0]Ë=1 && 
	`°æí
 (src) + 1 <= 8 \

585 ? 
	`__°r˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

586 : (*Ë
	`mem˝y
 ((*Ë(
de°
), \

587 (c⁄° *Ë(
§c
), \

588 
	`°æí
 (
§c
) + 1)) \

589 : 
	`__°r˝y_g
 ((
de°
), (
§c
))))

	)

591 
	#__°r˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

592 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*Ë
__de°
; \

599 
§˛í
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

609 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

617 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

622 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

627 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

629 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

634 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

638 (*Ë
__de°
; }))

	)

640 
__STRING_INLINE
 *
__°r˝y_g
 (*
__de°
, c⁄° *
__§c
);

642 
__STRING_INLINE
 *

643 
	$__°r˝y_g
 (*
__de°
, c⁄° *
__§c
)

645 *
__tmp
 = 
__de°
;

646 
__dummy
;

647 
__asm__
 
__vﬁ©ûe__


656 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

658 : "0" (
__§c
), "1" (
__tmp
),

659 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

661  
__de°
;

662 
	}
}

665 #ifde‡
__USE_GNU


666 
	#_HAVE_STRING_ARCH_°p˝y
 1

	)

668 
	#__°p˝y
(
de°
, 
§c
) \

669 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

670 ? (
	`°æí
 (
§c
) + 1 <= 8 \

671 ? 
	`__°p˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

672 : 
	`__°p˝y_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1)) \

673 : 
	`__°p˝y_g
 ((
de°
), (
§c
))))

	)

674 
	#__°p˝y_c
(
de°
, 
§c
, 
§˛í
) \

675 ((
§˛í
) % 4 == 0 \

676 ? 
	`__memp˝y_by4
 (
de°
, 
§c
, 
§˛í
) - 1 \

677 : ((
§˛í
) % 2 == 0 \

678 ? 
	`__memp˝y_by2
 (
de°
, 
§c
, 
§˛í
) - 1 \

679 : 
	`__memp˝y_byn
 (
de°
, 
§c
, 
§˛í
Ë- 1))

	)

682 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 ((de°), (§c))

	)

684 
	#__°p˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

685 (
	`__exãnsi⁄__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*Ë(
de°
); \

691 
§˛í
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

698 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

702 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

707 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

711 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

716 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

718 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

722 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

724 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

729 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

731 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

734 (*Ë
__u
; }))

	)

736 
__STRING_INLINE
 *
__memp˝y_by4
 (*
__de°
, c⁄° *
__§c
,

737 
size_t
 
__§˛í
);

739 
__STRING_INLINE
 *

740 
	$__memp˝y_by4
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

742 *
__tmp
 = 
__de°
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vﬁ©ûe__


752 : "=&r" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__memp˝y_by2
 (*
__de°
, c⁄° *
__§c
,

759 
size_t
 
__§˛í
);

761 
__STRING_INLINE
 *

762 
	$__memp˝y_by2
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

764 *
__tmp
 = 
__de°
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vﬁ©ûe__


779 : "=&q" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
),

780 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

781 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

782 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__memp˝y_byn
 (*
__de°
, c⁄° *
__§c
,

788 
size_t
 
__§˛í
);

790 
__STRING_INLINE
 *

791 
	$__memp˝y_byn
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de°
;

795 
__asm__
 
__vﬁ©ûe__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

808 : "0" (
__tmp
), "1" (
__§˛í
), "2" (
__§c
),

809 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__°p˝y_g
 (*
__de°
, c⁄° *
__§c
);

816 
__STRING_INLINE
 *

817 
	$__°p˝y_g
 (*
__de°
, c⁄° *
__§c
)

819 *
__tmp
 = 
__de°
;

820 
__dummy
;

821 
__asm__
 
__vﬁ©ûe__


830 : "=&r" (
__§c
), "Ù" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

832 : "0" (
__§c
), "1" (
__tmp
),

833 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_°∫˝y
 1

	)

842 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

843 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

844 ? ((
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

845 ? (*Ë
	`mem˝y
 ((*Ë(
de°
), \

846 (c⁄° *Ë(
§c
), 
n
) \

847 : 
	`__°∫˝y_cg
 ((
de°
), (
§c
), 
	`°æí
 (§cË+ 1, 
n
))) \

848 : 
	`__°∫˝y_gg
 ((
de°
), (
§c
), 
n
)))

	)

849 
	#__°∫˝y_cg
(
de°
, 
§c
, 
§˛í
, 
n
) \

850 (((
§˛í
) % 4 == 0) \

851 ? 
	`__°∫˝y_by4
 (
de°
, 
§c
, 
§˛í
, 
n
) \

852 : (((
§˛í
) % 2 == 0) \

853 ? 
	`__°∫˝y_by2
 (
de°
, 
§c
, 
§˛í
, 
n
) \

854 : 
	`__°∫˝y_byn
 (
de°
, 
§c
, 
§˛í
, 
n
)))

	)

856 
__STRING_INLINE
 *
__°∫˝y_by4
 (*
__de°
, c⁄° 
__§c
[],

857 
size_t
 
__§˛í
, size_à
__n
);

859 
__STRING_INLINE
 *

860 
	$__°∫˝y_by4
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

862 *
__tmp
 = 
__de°
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vﬁ©ûe__


872 : "=&r" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

873 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

874 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4),

875 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

877 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

878  
__de°
;

879 
	}
}

881 
__STRING_INLINE
 *
__°∫˝y_by2
 (*
__de°
, c⁄° 
__§c
[],

882 
size_t
 
__§˛í
, size_à
__n
);

884 
__STRING_INLINE
 *

885 
	$__°∫˝y_by2
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

887 *
__tmp
 = 
__de°
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vﬁ©ûe__


902 : "=&q" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

903 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

904 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

905 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

907 (Ë
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__§˛í
);

908  
__de°
;

909 
	}
}

911 
__STRING_INLINE
 *
__°∫˝y_byn
 (*
__de°
, c⁄° 
__§c
[],

912 
size_t
 
__§˛í
, size_à
__n
);

914 
__STRING_INLINE
 *

915 
	$__°∫˝y_byn
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de°
;

919 
__asm__
 
__vﬁ©ûe__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

932 : "1" (
__§˛í
), "0" (
__tmp
),"2" (
__§c
),

933 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

935 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

936  
__de°
;

937 
	}
}

939 
__STRING_INLINE
 *
__°∫˝y_gg
 (*
__de°
, c⁄° *
__§c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__°∫˝y_gg
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de°
;

946 
__dummy
;

947 i‡(
__n
 > 0)

948 
__asm__
 
__vﬁ©ûe__


964 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__§c
), "1" (
__tmp
), "3" (
__n
)

968  
__de°
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_°rˇt
 1

	)

974 
	#°rˇt
(
de°
, 
§c
) \

975 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

976 ? 
	`__°rˇt_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

977 : 
	`__°rˇt_g
 ((
de°
), (
§c
))))

	)

979 
__STRING_INLINE
 *
__°rˇt_c
 (*
__de°
, c⁄° 
__§c
[],

980 
size_t
 
__§˛í
);

982 
__STRING_INLINE
 *

983 
	$__°rˇt_c
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
)

985 #ifde‡
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vﬁ©ûe__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

992 : "0" (
__de°
), "1" (0xffffffff), "a" (0),

993 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de°
 - 1;

998 
__asm__
 
__vﬁ©ûe__


1003 : "Ù" (
__tmp
),

1004 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

1005 : "0" (
__tmp
),

1006 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

1009 (Ë
	`mem˝y
 (
__tmp
, 
__§c
, 
__§˛í
);

1010  
__de°
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__°rˇt_g
 (*
__de°
, c⁄° *
__§c
);

1015 
__STRING_INLINE
 *

1016 
	$__°rˇt_g
 (*
__de°
, c⁄° *
__§c
)

1018 *
__tmp
 = 
__de°
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vﬁ©ûe__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
),

1033 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

1034 : "1" (
__tmp
), "2" (
__§c
),

1035 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

1037  
__de°
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_°∫ˇt
 1

	)

1043 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

1044 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

1045 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

1046 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

1047 ? 
	`°rˇt
 (
__de°
, (
§c
)) \

1048 : (*(*)
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

1049 (c⁄° *Ë(
§c
), \

1050 (
n
)Ë0, 
__de°
)) \

1051 : 
	`__°∫ˇt_g
 (
__de°
, (
§c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__°∫ˇt_g
 (*
__de°
, c⁄° 
__§c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__°∫ˇt_g
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de°
;

1060 
__dummy
;

1061 #ifde‡
__i686__


1062 
__asm__
 
__vﬁ©ûe__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__§c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__§c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vﬁ©ûe__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
)

1102  
__de°
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_°rcmp
 1

	)

1108 
	#°rcmp
(
s1
, 
s2
) \

1109 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

1110 && ( ((
s1
)[0]Ë!1 || 
	`°æí
 (s1) >= 4) \

1111 && ( ((
s2
)[0]Ë!1 || 
	`°æí
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((c⁄° *Ë(
s1
), (c⁄° *Ë(
s2
), \

1113 (
	`°æí
 (
s1
Ë< såÀ¿(
s2
) \

1114 ? 
	`°æí
 (
s1
Ë: såÀ¿(
s2
)) + 1) \

1115 : (
	`__buûtö_c⁄°™t_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (
s1
) < 4 \

1117 ? (
	`__buûtö_c⁄°™t_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__°rcmp_cc
 ((c⁄° *Ë(
s1
), \

1119 (c⁄° *Ë(
s2
), \

1120 
	`°æí
 (
s1
)) \

1121 : 
	`__°rcmp_cg
 ((c⁄° *Ë(
s1
), \

1122 (c⁄° *Ë(
s2
), \

1123 
	`°æí
 (
s1
))) \

1124 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (s2) < 4 \

1126 ? (
	`__buûtö_c⁄°™t_p
 (
s1
) \

1127 ? 
	`__°rcmp_cc
 ((c⁄° *Ë(
s1
), \

1128 (c⁄° *Ë(
s2
), \

1129 
	`°æí
 (
s2
)) \

1130 : 
	`__°rcmp_gc
 ((c⁄° *Ë(
s1
), \

1131 (c⁄° *Ë(
s2
), \

1132 
	`°æí
 (
s2
))) \

1133 : 
	`__°rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = (
s1
)[0] - (
s2
)[0]; \

1137 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

1139 
__ªsu…
 = (
s1
)[1] - (
s2
)[1]; \

1140 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

1142 
__ªsu…
 = (
s1
)[2] - (
s2
)[2]; \

1143 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

1144 
__ªsu…
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__ªsu…
; }))

	)

1149 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__exãnsi⁄__
 ({ c⁄° *
__s2
 = (
s2
); \

1151 
__ªsu…
 = (
s1
)[0] - 
__s2
[0]; \

1152 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

1154 
__ªsu…
 = (
s1
)[1] - 
__s2
[1]; \

1155 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

1157 
__ªsu…
 = (
s1
)[2] - 
__s2
[2]; \

1158 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

1159 
__ªsu…
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__ªsu…
; }))

	)

1164 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__exãnsi⁄__
 ({ c⁄° *
__s1
 = (
s1
); \

1166 
__ªsu…
 = 
__s1
[0] - (
s2
)[0]; \

1167 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

1169 
__ªsu…
 = 
__s1
[1] - (
s2
)[1]; \

1170 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

1172 
__ªsu…
 = 
__s1
[2] - (
s2
)[2]; \

1173 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

1174 
__ªsu…
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__ªsu…
; }))

	)

1179 
__STRING_INLINE
 
__°rcmp_gg
 (c⁄° *
__s1
, c⁄° *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__°rcmp_gg
 (c⁄° *
__s1
, c⁄° *
__s2
)

1184 
__ªs
;

1185 
__asm__
 
__vﬁ©ûe__


1201 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__ªs
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_°∫cmp
 1

	)

1212 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`°æí
 (s1Ë< ((
size_t
Ë(
n
)) \

1214 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`°æí
 (s2Ë< ((
size_t
Ë(
n
))\

1216 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__°∫cmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__°∫cmp_g
 (c⁄° *
__s1
, c⁄° *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__°∫cmp_g
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

1225 
__ªs
;

1226 
__asm__
 
__vﬁ©ûe__


1245 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

1250  
__ªs
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_°rchr
 1

	)

1256 
	#_USE_STRING_ARCH_°rchr
 1

	)

1257 
	#°rchr
(
s
, 
c
) \

1258 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*Ë
	`__øwmemchr
 ((
s
), (
c
)) \

1261 : 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__°rchr_c
 (c⁄° *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__°rchr_c
 (c⁄° *
__s
, 
__c
)

1269 
__d0
;

1270 *
__ªs
;

1271 
__asm__
 
__vﬁ©ûe__


1281 : "Ù" (
__ªs
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1285  
__ªs
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__°rchr_g
 (c⁄° *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__°rchr_g
 (c⁄° *
__s
, 
__c
)

1293 
__d0
;

1294 *
__ªs
;

1295 
__asm__
 
__vﬁ©ûe__


1306 : "Ù" (
__ªs
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1310  
__ªs
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_°rch∫ul
 1

	)

1316 
	#__°rch∫ul
(
s
, 
c
) \

1317 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*Ë
	`__øwmemchr
 ((
s
), 
c
) \

1320 : 
	`__°rch∫ul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__°rch∫ul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__°rch∫ul_c
 (c⁄° *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__°rch∫ul_c
 (c⁄° *
__s
, 
__c
)

1328 
__d0
;

1329 *
__ªs
;

1330 
__asm__
 
__vﬁ©ûe__


1340 : "Ù" (
__ªs
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1344  
__ªs
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__°rch∫ul_g
 (c⁄° *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__°rch∫ul_g
 (c⁄° *
__s
, 
__c
)

1352 
__d0
;

1353 *
__ªs
;

1354 
__asm__
 
__vﬁ©ûe__


1365 : "Ù" (
__ªs
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1369  
__ªs
;

1370 
	}
}

1371 #ifde‡
__USE_GNU


1372 
	#°rch∫ul
(
s
, 
c
Ë
	`__°rch∫ul
 ((s), (c))

	)

1376 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_ödex
 1

	)

1379 
	#ödex
(
s
, 
c
) \

1380 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1381 ? 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_°ºchr
 1

	)

1388 
	#°ºchr
(
s
, 
c
) \

1389 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1390 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1393 #ifde‡
__i686__


1394 
__STRING_INLINE
 *
__°ºchr_c
 (c⁄° *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__°ºchr_c
 (c⁄° *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__ªs
;

1401 
__asm__
 
__vﬁ©ûe__


1409 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1413  
__ªs
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__°ºchr_g
 (c⁄° *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__°ºchr_g
 (c⁄° *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__ªs
;

1423 
__asm__
 
__vﬁ©ûe__


1432 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1436  
__ªs
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__°ºchr_c
 (c⁄° *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__°ºchr_c
 (c⁄° *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__ªs
;

1446 
__asm__
 
__vﬁ©ûe__


1456 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1460  
__ªs
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__°ºchr_g
 (c⁄° *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__°ºchr_g
 (c⁄° *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__ªs
;

1470 
__asm__
 
__vﬁ©ûe__


1481 : "Ù" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1485  
__ªs
;

1486 
	}
}

1490 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_rödex
 1

	)

1493 
	#rödex
(
s
, 
c
) \

1494 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1495 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_°rc•n
 1

	)

1503 
	#°rc•n
(
s
, 
ªje˘
) \

1504 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
) &&  ((reject)[0]) == 1 \

1505 ? ((
ªje˘
)[0] == '\0' \

1506 ? 
	`°æí
 (
s
) \

1507 : ((
ªje˘
)[1] == '\0' \

1508 ? 
	`__°rc•n_c1
 ((
s
), (((
ªje˘
)[0] << 8) & 0xff00)) \

1509 : 
	`__°rc•n_cg
 ((
s
), (
ªje˘
), 
	`°æí
 (reject)))) \

1510 : 
	`__°rc•n_g
 ((
s
), (
ªje˘
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
);

1514 #i‚de‡
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
)

1518 
__d0
;

1519 *
__ªs
;

1520 
__asm__
 
__vﬁ©ûe__


1529 : "Ù" (
__ªs
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__ªje˘
),

1531 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__ªs
 - 1Ë- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__°rc•n_cg
 (c⁄° *
__s
, c⁄° 
__ªje˘
[],

1538 
size_t
 
__ªje˘_Àn
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__°rc•n_cg
 (c⁄° *
__s
, c⁄° 
__ªje˘
[], 
size_t
 
__ªje˘_Àn
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 c⁄° *
__ªs
;

1545 
__asm__
 
__vﬁ©ûe__


1556 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__ªje˘
), "g" (
__ªje˘_Àn
)

1559  (
__ªs
 - 1Ë- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
);

1563 #ifde‡
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 c⁄° *
__ªs
;

1570 
__asm__
 
__vﬁ©ûe__


1587 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__ªje˘
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__ªs
 - 1Ë- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 c⁄° *
__ªs
;

1598 
__asm__
 
__vﬁ©ûe__


1612 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ªje˘
), "b" (__reject)

1616  (
__ªs
 - 1Ë- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_°r•n
 1

	)

1624 
	#°r•n
(
s
, 
ac˚±
) \

1625 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1626 ? ((
ac˚±
)[0] == '\0' \

1627 ? ((Ë(
s
), 0) \

1628 : ((
ac˚±
)[1] == '\0' \

1629 ? 
	`__°r•n_c1
 ((
s
), (((
ac˚±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__°r•n_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1631 : 
	`__°r•n_g
 ((
s
), (
ac˚±
))))

	)

1633 #i‚de‡
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
)

1639 
__d0
;

1640 *
__ªs
;

1642 
__asm__
 
__vﬁ©ûe__


1648 : "Ù" (
__ªs
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__ac˚±
),

1650 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__ªs
 - 1Ë- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__°r•n_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[],

1657 
size_t
 
__ac˚±_Àn
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__°r•n_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 c⁄° *
__ªs
;

1664 
__asm__
 
__vﬁ©ûe__


1675 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__ac˚±
), "g" (
__ac˚±_Àn
),

1679 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__ac˚±_Àn
]; } *)
__ac˚±
)

1682  (
__ªs
 - 1Ë- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
);

1686 #ifde‡
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 c⁄° *
__ªs
;

1693 
__asm__
 
__vﬁ©ûe__


1709 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__ªs
 - 1Ë- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 c⁄° *
__ªs
;

1720 
__asm__
 
__vﬁ©ûe__


1734 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ac˚±
), "b" (__accept)

1737  (
__ªs
 - 1Ë- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_°Ωbrk
 1

	)

1744 
	#°Ωbrk
(
s
, 
ac˚±
) \

1745 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1746 ? ((
ac˚±
)[0] == '\0' \

1747 ? ((Ë(
s
), (*) 0) \

1748 : ((
ac˚±
)[1] == '\0' \

1749 ? 
	`°rchr
 ((
s
), (
ac˚±
)[0]) \

1750 : 
	`__°Ωbrk_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1751 : 
	`__°Ωbrk_g
 ((
s
), (
ac˚±
))))

	)

1753 
__STRING_INLINE
 *
__°Ωbrk_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[],

1754 
size_t
 
__ac˚±_Àn
);

1756 
__STRING_INLINE
 *

1757 
	$__°Ωbrk_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__ªs
;

1761 
__asm__
 
__vﬁ©ûe__


1776 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__ac˚±
), "g" (
__ac˚±_Àn
)

1779  
__ªs
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
);

1783 #ifde‡
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__ªs
;

1790 
__asm__
 
__vﬁ©ûe__


1811 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__ªs
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__ªs
;

1822 
__asm__
 
__vﬁ©ûe__


1841 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__ac˚±
)

1844  
__ªs
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_°r°r
 1

	)

1851 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1852 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
) &&  ((needle)[0]) == 1 \

1853 ? ((
√edÀ
)[0] == '\0' \

1854 ? (
hay°ack
) \

1855 : ((
√edÀ
)[1] == '\0' \

1856 ? 
	`°rchr
 ((
hay°ack
), (
√edÀ
)[0]) \

1857 : 
	`__°r°r_cg
 ((
hay°ack
), (
√edÀ
), \

1858 
	`°æí
 (
√edÀ
)))) \

1859 : 
	`__°r°r_g
 ((
hay°ack
), (
√edÀ
))))

	)

1863 
__STRING_INLINE
 *
__°r°r_cg
 (c⁄° *
__hay°ack
,

1864 c⁄° 
__√edÀ
[],

1865 
size_t
 
__√edÀ_Àn
);

1867 
__STRING_INLINE
 *

1868 
	$__°r°r_cg
 (c⁄° *
__hay°ack
, c⁄° 
__√edÀ
[],

1869 
size_t
 
__√edÀ_Àn
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__ªs
;

1873 
__asm__
 
__vﬁ©ûe__


1886 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__√edÀ_Àn
), "1" (
__hay°ack
), "d" (
__√edÀ
)

1889  
__ªs
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__°r°r_g
 (c⁄° *
__hay°ack
,

1893 c⁄° *
__√edÀ
);

1894 #ifde‡
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__°r°r_g
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__ªs
;

1901 
__asm__
 
__vﬁ©ûe__


1920 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1922 "d" (
__√edÀ
)

1924  
__ªs
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__°r°r_g
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__ªs
;

1932 
__asm__
 
__vﬁ©ûe__


1949 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1951 "b" (
__√edÀ
)

1953  
__ªs
;

1954 
	}
}

1960 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1961 #ifde‡
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
w‹d
Ë(
	`__buûtö_c⁄°™t_p
 (word) \

1964 ? 
	`__buûtö_ffs
 (
w‹d
) \

1965 : ({ 
__˙t
, 
__tmp
; \

1966 
__asm__
 
__vﬁ©ûe__
 \

1969 : "=&r" (
__˙t
), "Ù" (
__tmp
) \

1970 : "rm" (
w‹d
), "1" (-1)); \

1971 
__˙t
 + 1; }))

	)

1973 #i‚de‡
ff¶


1974 
	#ff¶
(
w‹d
Ë
	`ffs
(w‹d)

	)

1979 #i‚de‡
_FORCE_INLINES


1980 #unde‡
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #i‚de‡
_STRING_H


24 #i‡!
deföed
 
__NO_STRING_INLINES
 && !deföed 
__BOUNDED_POINTERS__


41 #i‚de‡
__STRING_INLINE


42 #ifde‡
__˝lu•lus


43 
	#__STRING_INLINE
 
ölöe


	)

45 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

49 #i‡
_STRING_ARCH_u«lig√d


51 
	~<ídün.h
>

52 
	~<bôs/ty≥s.h
>

54 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

56 (((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1] << 8 \

57 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

59 (((((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

60 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

61 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

62 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

65 (((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
] << 8 \

66 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

68 (((((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
] << 8 \

69 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

70 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

71 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 °ru˘ { 
__¨r
[
N
]; } \

78 
	t__©åibuã__
 ((
	t__∑cked__
)Ë
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #unde‡
__STRING2_COPY_TYPE


92 
	#__°rög2_1b±r_p
(
__x
) \

93 ((
size_t
)(c⁄° *)((
__x
Ë+ 1Ë- (size_t)(c⁄° *)(__xË=1)

	)

96 #i‡!
deföed
 
_HAVE_STRING_ARCH_mem£t


97 #i‡!
__GNUC_PREREQ
 (3, 0)

98 #i‡
_STRING_ARCH_u«lig√d


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
Ë({ *
__s
 = (s); \

109 *((
__uöt8_t
 *Ë
__s
Ë(__uöt8_tË
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__uöt8_t
 
__c
 = (__uöt8_tË(
c
); \

121 (Ë(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

134 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (Ë
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (Ë
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #i‡
__GNUC_PREREQ
 (2, 91)

194 
	#__bzîo
(
s
, 
n
Ë
	`__buûtö_mem£t
 (s, '\0',Ç)

	)

202 #ifde‡
__USE_GNU


203 #i‡!
deföed
 
_HAVE_STRING_ARCH_memp˝y
 || deföed 
_FORCE_INLINES


204 #i‚de‡
_HAVE_STRING_ARCH_memp˝y


205 #i‡
__GNUC_PREREQ
 (3, 4)

206 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_memp˝y
 (de°, src,Ç)

	)

207 #ñi‡
__GNUC_PREREQ
 (3, 0)

208 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

209 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

210 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

211 ? 
	`__buûtö_mem˝y
 (
de°
, 
§c
, 
n
) + (n) \

212 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

214 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

215 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

216 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

217 ? 
	`__memp˝y_smÆl
 (
de°
, 
	`__memp˝y_¨gs
 (
§c
), 
n
) \

218 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

222 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y
 (de°, src,Ç)

	)

225 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


226 #i‡
_STRING_ARCH_u«lig√d


227 #i‚de‡
_FORCE_INLINES


228 
	#__memp˝y_¨gs
(
§c
) \

229 ((c⁄° *Ë(
§c
))[0], ((const *) (src))[2], \

230 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[6], \

231 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

232 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

233 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

234 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

236 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , , , ,

237 
__uöt16_t
, __uöt16_t, 
__uöt32_t
,

238 
__uöt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__memp˝y_smÆl
 (*
__de°1
,

241 
__§c0_1
, 
__§c2_1
, 
__§c4_1
, 
__§c6_1
,

242 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

243 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

244 
size_t
 
__§˛í
)

247 
__uöt32_t
 
__ui
;

248 
__uöt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de°1
;

252 (Ë
__§˛í
)

255 
__u
->
__c
 = 
__§c0_1
;

256 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__§c0_2
;

260 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__§c0_2
;

264 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__§c2_1
;

266 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__§c0_4
;

270 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__§c0_4
;

274 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__§c4_1
;

276 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__§c0_4
;

280 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__§c4_2
;

282 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__§c0_4
;

286 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__§c4_2
;

288 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__§c6_1
;

290 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__§c0_4
;

294 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__§c4_4
;

296 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

299  (*Ë
__u
;

300 
	}
}

302 #i‚de‡
_FORCE_INLINES


303 
	#__memp˝y_¨gs
(
§c
) \

304 ((c⁄° *Ë(
§c
))[0], \

305 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1] } }), \

307 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

309 ((c⁄° *Ë(
§c
))[2] } }), \

310 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

312 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3] } }), \

313 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

315 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

316 ((c⁄° *Ë(
§c
))[4] } }), \

317 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

319 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

320 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5] } }), \

321 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

323 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

324 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

325 ((c⁄° *Ë(
§c
))[6] } }), \

326 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

328 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

329 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

330 ((c⁄° *Ë(
§c
))[6], ((c⁄° *Ë(§c))[7] } })

	)

332 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__memp˝y_smÆl
 (*
__de°
, 
__§c1
,

341 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

342 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

343 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

344 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sˇ2
;

349 
__STRING2_COPY_ARR3
 
__sˇ3
;

350 
__STRING2_COPY_ARR4
 
__sˇ4
;

351 
__STRING2_COPY_ARR5
 
__sˇ5
;

352 
__STRING2_COPY_ARR6
 
__sˇ6
;

353 
__STRING2_COPY_ARR7
 
__sˇ7
;

354 
__STRING2_COPY_ARR8
 
__sˇ8
;

355 } *
__u
 = 
__de°
;

356 (Ë
__§˛í
)

359 
__u
->
__c
 = 
__§c1
;

362 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

365 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

368 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

371 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

374 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

377 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

380 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

383  
	`__exãnsi⁄__
 ((*Ë
__u
 + 
__§˛í
);

384 
	}
}

392 #i‚de‡
_HAVE_STRING_ARCH_°rchr


393 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

394 #i‡
__GNUC_PREREQ
 (3, 2)

395 
	#°rchr
(
s
, 
c
) \

396 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
Ë&& !__buûtö_c⁄°™t_∞(
s
) \

397 && (
c
) == '\0' \

398 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

399 : 
	`__buûtö_°rchr
 (
s
, 
c
)))

	)

401 
	#°rchr
(
s
, 
c
) \

402 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

403 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

404 : 
	`°rchr
 (
s
, 
c
)))

	)

410 #i‡(!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
deföed
 
	g_FORCE_INLINES


412 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#°r˝y
(
de°
, 
§c
) \

414 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

415 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

416 ? 
	`__°r˝y_smÆl
 (
de°
, 
	`__°r˝y_¨gs
 (
§c
), \

417 
	`°æí
 (
§c
) + 1) \

418 : (*Ë
	`mem˝y
 (
de°
, 
§c
, 
	`°æí
 (src) + 1)) \

419 : 
	`°r˝y
 (
de°
, 
§c
)))

	)

422 #i‡
_STRING_ARCH_u«lig√d


423 #i‚de‡
_FORCE_INLINES


424 
	#__°r˝y_¨gs
(
§c
) \

425 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

426 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

427 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

428 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

430 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

431 
__uöt32_t
, __uöt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__°r˝y_smÆl
 (*
__de°
,

434 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

435 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

436 
size_t
 
__§˛í
)

439 
__uöt32_t
 
__ui
;

440 
__uöt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*Ë
__de°
;

443 (Ë
__§˛í
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__§c0_2
;

452 
__u
->
__usi
 = 
__§c0_2
;

453 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__§c0_4
;

460 
__u
->
__ui
 = 
__§c0_4
;

461 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__§c0_4
;

466 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__§c4_2
;

470 
__u
->
__ui
 = 
__§c0_4
;

471 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__§c4_2
;

473 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__§c0_4
;

478 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__§c4_4
;

482  
__de°
;

483 
	}
}

485 #i‚de‡
_FORCE_INLINES


486 
	#__°r˝y_¨gs
(
§c
) \

487 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((c⁄° *Ë(
§c
))[0], '\0' } }), \

489 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

492 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

494 ((c⁄° *Ë(
§c
))[2], '\0' } }), \

495 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

497 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

499 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

501 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

502 ((c⁄° *Ë(
§c
))[4], '\0' } }), \

503 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

505 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

506 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

508 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

510 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

511 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

512 ((c⁄° *Ë(
§c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__°r˝y_smÆl
 (*
__de°
,

523 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

524 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

525 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

526 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sˇ2
;

531 
__STRING2_COPY_ARR3
 
__sˇ3
;

532 
__STRING2_COPY_ARR4
 
__sˇ4
;

533 
__STRING2_COPY_ARR5
 
__sˇ5
;

534 
__STRING2_COPY_ARR6
 
__sˇ6
;

535 
__STRING2_COPY_ARR7
 
__sˇ7
;

536 
__STRING2_COPY_ARR8
 
__sˇ8
;

537 } *
__u
 = (*Ë
__de°
;

538 (Ë
__§˛í
)

541 
__u
->
__c
 = '\0';

544 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

547 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

550 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

553 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

556 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

559 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

562 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

565  
__de°
;

566 
	}
}

572 #ifde‡
__USE_GNU


573 #i‡!
deföed
 
_HAVE_STRING_ARCH_°p˝y
 || deföed 
_FORCE_INLINES


574 #i‚de‡
_HAVE_STRING_ARCH_°p˝y


575 #i‡
__GNUC_PREREQ
 (3, 4)

576 
	#__°p˝y
(
de°
, 
§c
Ë
	`__buûtö_°p˝y
 (de°, src)

	)

577 #ñi‡
__GNUC_PREREQ
 (3, 0)

578 
	#__°p˝y
(
de°
, 
§c
) \

579 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

580 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

581 ? 
	`__buûtö_°r˝y
 (
de°
, 
§c
Ë+ 
	`°æí
 (src) \

582 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

584 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

586 
	#__°p˝y
(
de°
, 
§c
) \

587 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

588 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

589 ? 
	`__°p˝y_smÆl
 (
de°
, 
	`__°p˝y_¨gs
 (
§c
), \

590 
	`°æí
 (
§c
) + 1) \

591 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

593 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

597 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 (de°, src)

	)

600 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


601 #i‡
_STRING_ARCH_u«lig√d


602 #i‚de‡
_FORCE_INLINES


603 
	#__°p˝y_¨gs
(
§c
) \

604 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

605 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

606 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

607 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

609 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

610 
__uöt32_t
, __uöt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__°p˝y_smÆl
 (*
__de°
,

613 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

614 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

615 
size_t
 
__§˛í
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*Ë
__de°
;

623 (Ë
__§˛í
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__§c0_2
;

630 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__§c0_2
;

634 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__§c0_4
;

639 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__§c0_4
;

643 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__§c0_4
;

648 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__§c4_2
;

650 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__§c0_4
;

654 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__§c4_2
;

656 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__§c0_4
;

661 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__§c4_4
;

663 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #i‚de‡
_FORCE_INLINES


670 
	#__°p˝y_¨gs
(
§c
) \

671 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((c⁄° *Ë(
§c
))[0], '\0' } }), \

673 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

676 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

678 ((c⁄° *Ë(
§c
))[2], '\0' } }), \

679 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

681 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

683 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

685 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

686 ((c⁄° *Ë(
§c
))[4], '\0' } }), \

687 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

689 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

690 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

692 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

694 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

695 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

696 ((c⁄° *Ë(
§c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__°p˝y_smÆl
 (*
__de°
,

707 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

708 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

709 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

710 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sˇ2
;

715 
__STRING2_COPY_ARR3
 
__sˇ3
;

716 
__STRING2_COPY_ARR4
 
__sˇ4
;

717 
__STRING2_COPY_ARR5
 
__sˇ5
;

718 
__STRING2_COPY_ARR6
 
__sˇ6
;

719 
__STRING2_COPY_ARR7
 
__sˇ7
;

720 
__STRING2_COPY_ARR8
 
__sˇ8
;

721 } *
__u
 = (*Ë
__de°
;

722 (Ë
__§˛í
)

725 
__u
->
__c
 = '\0';

728 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

731 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

734 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

737 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

740 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

743 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

746 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

749  
__de°
 + 
__§˛í
 - 1;

750 
	}
}

758 #i‚de‡
_HAVE_STRING_ARCH_°∫˝y


759 #i‡
__GNUC_PREREQ
 (3, 2)

760 
	#°∫˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫˝y
 (de°, src,Ç)

	)

762 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

763 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

764 ? (
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

765 ? (*Ë
	`mem˝y
 (
de°
, 
§c
, 
n
) \

766 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)) \

767 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)))

	)

773 #i‚de‡
_HAVE_STRING_ARCH_°∫ˇt


774 #ifde‡
_USE_STRING_ARCH_°rchr


775 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

776 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

777 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

778 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

779 ? 
	`°rˇt
 (
__de°
, 
§c
) \

780 : (*((*Ë
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

781 
§c
, 
n
)Ë'\0', 
__de°
)) \

782 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
); }))

	)

783 #ñi‡
__GNUC_PREREQ
 (3, 2)

784 
	#°∫ˇt
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫ˇt
 (de°, src,Ç)

	)

786 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

787 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

788 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

789 ? 
	`°rˇt
 (
de°
, 
§c
) \

790 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)) \

791 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)))

	)

797 #i‚de‡
_HAVE_STRING_ARCH_°rcmp


798 #i‡
__GNUC_PREREQ
 (3, 2)

799 
	#°rcmp
(
s1
, 
s2
) \

800 
__exãnsi⁄__
 \

801 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

802 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

803 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

804 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

805 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

806 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

807 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

808 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

809 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

810 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

811 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

812 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

813 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

814 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

815 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

816 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

817 : 
	`__buûtö_°rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#°rcmp
(
s1
, 
s2
) \

820 
__exãnsi⁄__
 \

821 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

822 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

823 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

824 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

825 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

826 ? 
	`memcmp
 ((c⁄° *Ë(
s1
), (c⁄° *Ë(
s2
), \

827 (
__s1_Àn
 < 
__s2_Àn
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

829 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

830 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

831 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s1_Àn
) \

832 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

833 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

834 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

835 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

836 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s2_Àn
) \

837 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

838 : 
	`°rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = \

843 (((c⁄° *Ë(c⁄° *Ë(
s1
))[0] \

844 - ((c⁄° *Ë(c⁄° *)(
s2
))[0]); \

845 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

847 
__ªsu…
 = (((const *) \

848 (c⁄° *Ë(
s1
))[1] \

850 (c⁄° *Ë(
s2
))[1]); \

851 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

853 
__ªsu…
 = \

855 (c⁄° *Ë(
s1
))[2] \

857 (c⁄° *Ë(
s2
))[2]); \

858 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

859 
__ªsu…
 = \

861 (c⁄° *Ë(
s1
))[3] \

863 (c⁄° *Ë(
s2
))[3]); \

866 
__ªsu…
; }))

	)

868 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__exãnsi⁄__
 ({ c⁄° *
__s2
 = \

870 (c⁄° *Ë(c⁄° *Ë(
s2
); \

871 
__ªsu…
 = \

872 (((c⁄° *Ë(c⁄° *Ë(
s1
))[0] \

873 - 
__s2
[0]); \

874 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

876 
__ªsu…
 = (((const *) \

877 (c⁄° *Ë(
s1
))[1] - 
__s2
[1]); \

878 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

880 
__ªsu…
 = (((const *) \

881 (c⁄° *Ë(
s1
))[2] - 
__s2
[2]); \

882 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

883 
__ªsu…
 = (((const *) \

884 (c⁄° *Ë(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__ªsu…
; }))

	)

890 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

891 (
	`__exãnsi⁄__
 ({ c⁄° *
__s1
 = \

892 (c⁄° *Ë(c⁄° *Ë(
s1
); \

893 
__ªsu…
 = \

894 
__s1
[0] - ((const *) \

895 (c⁄° *Ë(
s2
))[0]; \

896 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

898 
__ªsu…
 = (
__s1
[1] \

900 (c⁄° *Ë(
s2
))[1]); \

901 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

903 
__ªsu…
 = \

904 (
__s1
[2] - ((const *) \

905 (c⁄° *Ë(
s2
))[2]); \

906 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

907 
__ªsu…
 = \

908 (
__s1
[3] \

910 (c⁄° *Ë(
s2
))[3]); \

913 
__ªsu…
; }))

	)

918 #i‚de‡
_HAVE_STRING_ARCH_°∫cmp


919 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

920 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

921 && ((
	`__buûtö_c⁄°™t_p
 (
s1
) \

922 && 
	`°æí
 (
s1
Ë< ((
size_t
Ë(
n
))) \

923 || (
	`__buûtö_c⁄°™t_p
 (
s2
) \

924 && 
	`°æí
 (
s2
Ë< ((
size_t
Ë(
n
)))) \

925 ? 
	`°rcmp
 (
s1
, 
s2
Ë: 
	`°∫cmp
 (s1, s2, 
n
)))

	)

931 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rc•n
 || deföed 
_FORCE_INLINES


932 #i‚de‡
_HAVE_STRING_ARCH_°rc•n


933 #i‡
__GNUC_PREREQ
 (3, 2)

934 
	#°rc•n
(
s
, 
ªje˘
) \

935 
__exãnsi⁄__
 \

936 ({ 
__r0
, 
__r1
, 
__r2
; \

937 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

938 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

939 ? 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
) \

940 : ((
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], __r0 == '\0') \

941 ? 
	`°æí
 (
s
) \

942 : ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], __r1 == '\0') \

943 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

944 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

945 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

946 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

947 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

948 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)))))) \

949 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)); })

	)

951 
	#°rc•n
(
s
, 
ªje˘
) \

952 
__exãnsi⁄__
 \

953 ({ 
__r0
, 
__r1
, 
__r2
; \

954 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

955 ? ((
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], __r0 == '\0') \

956 ? 
	`°æí
 (
s
) \

957 : ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], __r1 == '\0') \

958 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

959 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

960 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

961 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

962 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

963 : 
	`°rc•n
 (
s
, 
ªje˘
))))) \

964 : 
	`°rc•n
 (
s
, 
ªje˘
)); })

	)

968 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
);

969 
__STRING_INLINE
 
size_t


970 
	$__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
)

972 
size_t
 
__ªsu…
 = 0;

973 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘
)

974 ++
__ªsu…
;

975  
__ªsu…
;

976 
	}
}

978 
__STRING_INLINE
 
size_t
 
__°rc•n_c2
 (c⁄° *
__s
, 
__ªje˘1
,

979 
__ªje˘2
);

980 
__STRING_INLINE
 
size_t


981 
	$__°rc•n_c2
 (c⁄° *
__s
, 
__ªje˘1
, 
__ªje˘2
)

983 
size_t
 
__ªsu…
 = 0;

984 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


985 && 
__s
[
__ªsu…
] !
__ªje˘2
)

986 ++
__ªsu…
;

987  
__ªsu…
;

988 
	}
}

990 
__STRING_INLINE
 
size_t
 
__°rc•n_c3
 (c⁄° *
__s
, 
__ªje˘1
,

991 
__ªje˘2
, 
__ªje˘3
);

992 
__STRING_INLINE
 
size_t


993 
	$__°rc•n_c3
 (c⁄° *
__s
, 
__ªje˘1
, 
__ªje˘2
,

994 
__ªje˘3
)

996 
size_t
 
__ªsu…
 = 0;

997 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


998 && 
__s
[
__ªsu…
] !
__ªje˘2
 && __s[__ªsu…] !
__ªje˘3
)

999 ++
__ªsu…
;

1000  
__ªsu…
;

1001 
	}
}

1007 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r•n
 || deföed 
_FORCE_INLINES


1008 #i‚de‡
_HAVE_STRING_ARCH_°r•n


1009 #i‡
__GNUC_PREREQ
 (3, 2)

1010 
	#°r•n
(
s
, 
ac˚±
) \

1011 
__exãnsi⁄__
 \

1012 ({ 
__a0
, 
__a1
, 
__a2
; \

1013 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1014 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1015 ? 
	`__buûtö_°r•n
 (
s
, 
ac˚±
) \

1016 : ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1017 ? ((Ë(
s
), (
size_t
) 0) \

1018 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1019 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1020 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1021 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1022 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1023 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1024 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)))))) \

1025 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)); })

	)

1027 
	#°r•n
(
s
, 
ac˚±
) \

1028 
__exãnsi⁄__
 \

1029 ({ 
__a0
, 
__a1
, 
__a2
; \

1030 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1031 ? ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1032 ? ((Ë(
s
), (
size_t
) 0) \

1033 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1034 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1035 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1036 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1037 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1038 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1039 : 
	`°r•n
 (
s
, 
ac˚±
))))) \

1040 : 
	`°r•n
 (
s
, 
ac˚±
)); })

	)

1044 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
);

1045 
__STRING_INLINE
 
size_t


1046 
	$__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
)

1048 
size_t
 
__ªsu…
 = 0;

1050 
__s
[
__ªsu…
] =
__ac˚±
)

1051 ++
__ªsu…
;

1052  
__ªsu…
;

1053 
	}
}

1055 
__STRING_INLINE
 
size_t
 
__°r•n_c2
 (c⁄° *
__s
, 
__ac˚±1
,

1056 
__ac˚±2
);

1057 
__STRING_INLINE
 
size_t


1058 
	$__°r•n_c2
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1060 
size_t
 
__ªsu…
 = 0;

1062 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2
)

1063 ++
__ªsu…
;

1064  
__ªsu…
;

1065 
	}
}

1067 
__STRING_INLINE
 
size_t
 
__°r•n_c3
 (c⁄° *
__s
, 
__ac˚±1
,

1068 
__ac˚±2
, 
__ac˚±3
);

1069 
__STRING_INLINE
 
size_t


1070 
	$__°r•n_c3
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1072 
size_t
 
__ªsu…
 = 0;

1074 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2


1075 || 
__s
[
__ªsu…
] =
__ac˚±3
)

1076 ++
__ªsu…
;

1077  
__ªsu…
;

1078 
	}
}

1083 #i‡!
deföed
 
_HAVE_STRING_ARCH_°Ωbrk
 || deföed 
_FORCE_INLINES


1084 #i‚de‡
_HAVE_STRING_ARCH_°Ωbrk


1085 #i‡
__GNUC_PREREQ
 (3, 2)

1086 
	#°Ωbrk
(
s
, 
ac˚±
) \

1087 
__exãnsi⁄__
 \

1088 ({ 
__a0
, 
__a1
, 
__a2
; \

1089 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1090 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1091 ? 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
) \

1092 : ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1093 ? ((Ë(
s
), (*Ë
NULL
) \

1094 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1095 ? 
	`__buûtö_°rchr
 (
s
, 
__a0
) \

1096 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1097 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1098 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1099 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1100 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)))))) \

1101 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1103 
	#°Ωbrk
(
s
, 
ac˚±
) \

1104 
__exãnsi⁄__
 \

1105 ({ 
__a0
, 
__a1
, 
__a2
; \

1106 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1107 ? ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1108 ? ((Ë(
s
), (*Ë
NULL
) \

1109 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1110 ? 
	`°rchr
 (
s
, 
__a0
) \

1111 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1112 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1113 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1114 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1115 : 
	`°Ωbrk
 (
s
, 
ac˚±
))))) \

1116 : 
	`°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1120 
__STRING_INLINE
 *
__°Ωbrk_c2
 (c⁄° *
__s
, 
__ac˚±1
,

1121 
__ac˚±2
);

1122 
__STRING_INLINE
 *

1123 
	$__°Ωbrk_c2
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1126 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2
)

1127 ++
__s
;

1128  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1129 
	}
}

1131 
__STRING_INLINE
 *
__°Ωbrk_c3
 (c⁄° *
__s
, 
__ac˚±1
,

1132 
__ac˚±2
, 
__ac˚±3
);

1133 
__STRING_INLINE
 *

1134 
	$__°Ωbrk_c3
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1137 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2


1138 && *
__s
 !
__ac˚±3
)

1139 ++
__s
;

1140  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1141 
	}
}

1147 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r°r
 && !
__GNUC_PREREQ
 (2, 97)

1148 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1149 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
Ë&& 
	`__°rög2_1b±r_p
 (needle) \

1150 ? (((c⁄° *Ë(
√edÀ
))[0] == '\0' \

1151 ? (*Ë(
size_t
Ë(
hay°ack
) \

1152 : (((c⁄° *Ë(
√edÀ
))[1] == '\0' \

1153 ? 
	`°rchr
 (
hay°ack
, \

1154 ((c⁄° *Ë(
√edÀ
))[0]) \

1155 : 
	`°r°r
 (
hay°ack
, 
√edÀ
))) \

1156 : 
	`°r°r
 (
hay°ack
, 
√edÀ
)))

	)

1160 #i‡!
deföed
 
_HAVE_STRING_ARCH_°πok_r
 || deföed 
_FORCE_INLINES


1161 #i‚de‡
_HAVE_STRING_ARCH_°πok_r


1162 
	#__°πok_r
(
s
, 
£p
, 
√xç
) \

1163 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
£p
Ë&& 
	`__°rög2_1b±r_p
 (sep) \

1164 && ((c⁄° *Ë(
£p
))[0] != '\0' \

1165 && ((c⁄° *Ë(
£p
))[1] == '\0' \

1166 ? 
	`__°πok_r_1c
 (
s
, ((c⁄° *Ë(
£p
))[0], 
√xç
) \

1167 : 
	`__°πok_r
 (
s
, 
£p
, 
√xç
)))

	)

1170 
__STRING_INLINE
 *
__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
);

1171 
__STRING_INLINE
 *

1172 
	$__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
)

1174 *
__ªsu…
;

1175 i‡(
__s
 =
NULL
)

1176 
__s
 = *
__√xç
;

1177 *
__s
 =
__£p
)

1178 ++
__s
;

1179 
__ªsu…
 = 
NULL
;

1180 i‡(*
__s
 != '\0')

1182 
__ªsu…
 = 
__s
++;

1183 *
__s
 != '\0')

1184 i‡(*
__s
++ =
__£p
)

1186 
__s
[-1] = '\0';

1190 *
__√xç
 = 
__s
;

1191  
__ªsu…
;

1192 
	}
}

1193 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


1194 
	#°πok_r
(
s
, 
£p
, 
√xç
Ë
	`__°πok_r
 (s, sï,Çexç)

	)

1199 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r£p
 || deföed 
_FORCE_INLINES


1200 #i‚de‡
_HAVE_STRING_ARCH_°r£p


1202 *
__°r£p_g
 (**
__°rögp
, c⁄° *
__dñim
);

1203 
	#__°r£p
(
s
, 
ªje˘
) \

1204 
__exãnsi⁄__
 \

1205 ({ 
__r0
, 
__r1
, 
__r2
; \

1206 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

1207 && (
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], \

1208 ((c⁄° *Ë(
ªje˘
))[0] != '\0') \

1209 ? ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], \

1210 ((c⁄° *Ë(
ªje˘
))[1] == '\0') \

1211 ? 
	`__°r£p_1c
 (
s
, 
__r0
) \

1212 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

1213 ? 
	`__°r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1214 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

1215 ? 
	`__°r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1216 : 
	`__°r£p_g
 (
s
, 
ªje˘
)))) \

1217 : 
	`__°r£p_g
 (
s
, 
ªje˘
)); })

	)

1220 
__STRING_INLINE
 *
__°r£p_1c
 (**
__s
, 
__ªje˘
);

1221 
__STRING_INLINE
 *

1222 
	$__°r£p_1c
 (**
__s
, 
__ªje˘
)

1224 *
__ªtvÆ
 = *
__s
;

1225 i‡(
__ªtvÆ
 !
NULL
 && (*
__s
 = 
	`°rchr
 (__ªtvÆ, 
__ªje˘
)) != NULL)

1226 *(*
__s
)++ = '\0';

1227  
__ªtvÆ
;

1228 
	}
}

1230 
__STRING_INLINE
 *
__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
);

1231 
__STRING_INLINE
 *

1232 
	$__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
)

1234 *
__ªtvÆ
 = *
__s
;

1235 i‡(
__ªtvÆ
 !
NULL
)

1237 *
__˝
 = 
__ªtvÆ
;

1240 i‡(*
__˝
 == '\0')

1242 
__˝
 = 
NULL
;

1245 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
)

1247 *
__˝
++ = '\0';

1250 ++
__˝
;

1252 *
__s
 = 
__˝
;

1254  
__ªtvÆ
;

1255 
	}
}

1257 
__STRING_INLINE
 *
__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
,

1258 
__ªje˘3
);

1259 
__STRING_INLINE
 *

1260 
	$__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
, 
__ªje˘3
)

1262 *
__ªtvÆ
 = *
__s
;

1263 i‡(
__ªtvÆ
 !
NULL
)

1265 *
__˝
 = 
__ªtvÆ
;

1268 i‡(*
__˝
 == '\0')

1270 
__˝
 = 
NULL
;

1273 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
 || *__˝ =
__ªje˘3
)

1275 *
__˝
++ = '\0';

1278 ++
__˝
;

1280 *
__s
 = 
__˝
;

1282  
__ªtvÆ
;

1283 
	}
}

1284 #ifde‡
__USE_BSD


1285 
	#°r£p
(
s
, 
ªje˘
Ë
	`__°r£p
 (s,Ñeje˘)

	)

1292 #ifde‡
__USE_MISC


1294 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rdup
 || !deföed 
_HAVE_STRING_ARCH_°∫dup


1295 
	#__√ed_mÆloc_™d_ˇŒoc


	)

1296 
	~<°dlib.h
>

1299 #i‚de‡
_HAVE_STRING_ARCH_°rdup


1301 *
	$__°rdup
 (c⁄° *
__°rög
Ë
__THROW
 
__©åibuã_mÆloc__
;

1302 
	#__°rdup
(
s
) \

1303 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1304 ? (((c⁄° *Ë(
s
))[0] == '\0' \

1305 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1306 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1307 *
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1308 i‡(
__ªtvÆ
 !
NULL
) \

1309 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, 
__Àn
); \

1310 
__ªtvÆ
; 
	}
})) \

1311 : 
	`__°rdup
 (
s
)))

	)

1313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1314 
	#°rdup
(
s
Ë
	`__°rdup
 (s)

	)

1318 #i‚de‡
_HAVE_STRING_ARCH_°∫dup


1320 *
	$__°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

1321 
__THROW
 
__©åibuã_mÆloc__
;

1322 
	#__°∫dup
(
s
, 
n
) \

1323 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1324 ? (((c⁄° *Ë(
s
))[0] == '\0' \

1325 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1326 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1327 
size_t
 
__n
 = (
n
); \

1328 *
__ªtvÆ
; \

1329 i‡(
__n
 < 
__Àn
) \

1330 
__Àn
 = 
__n
 + 1; \

1331 
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1332 i‡(
__ªtvÆ
 !
NULL
) \

1334 
__ªtvÆ
[
__Àn
 - 1] = '\0'; \

1335 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, \

1336 
__Àn
 - 1); \

1338 
__ªtvÆ
; 
	}
})) \

1339 : 
	`__°∫dup
 (
s
, 
n
)))

	)

1341 #ifde‡
__USE_GNU


1342 
	#°∫dup
(
s
, 
n
Ë
	`__°∫dup
 (s,Ç)

	)

1348 #i‚de‡
_FORCE_INLINES


1349 #unde‡
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #i‚de‡
_STRING_H


22 
__w¨nde˛
 (
__w¨n_mem£t_zîo_Àn
,

25 #i‚de‡
__˝lu•lus


29 #unde‡
mem˝y


30 #unde‡
memmove


31 #unde‡
mem£t


32 #unde‡
°rˇt


33 #unde‡
°r˝y


34 #unde‡
°∫ˇt


35 #unde‡
°∫˝y


36 #ifde‡
__USE_GNU


37 #unde‡
memp˝y


38 #unde‡
°p˝y


40 #ifde‡
__USE_BSD


41 #unde‡
bc›y


42 #unde‡
bzîo


47 
__f‹tify_fun˘i⁄
 *

48 
__NTH
 (
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

49 
size_t
 
__Àn
))

51  
	`__buûtö___mem˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__f‹tify_fun˘i⁄
 *

55 
__NTH
 (
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__Àn
))

57  
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifde‡
__USE_GNU


61 
__f‹tify_fun˘i⁄
 *

62 
__NTH
 (
	$memp˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

63 
size_t
 
__Àn
))

65  
	`__buûtö___memp˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__f‹tify_fun˘i⁄
 *

76 
__NTH
 (
	$mem£t
 (*
__de°
, 
__ch
, 
size_t
 
__Àn
))

78 i‡(
	`__buûtö_c⁄°™t_p
 (
__Àn
) && __len == 0

79 && (!
	`__buûtö_c⁄°™t_p
 (
__ch
) || __ch != 0))

81 
	`__w¨n_mem£t_zîo_Àn
 ();

82  
__de°
;

84  
	`__buûtö___mem£t_chk
 (
__de°
, 
__ch
, 
__Àn
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifde‡
__USE_BSD


88 
__f‹tify_fun˘i⁄
 

89 
__NTH
 (
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__Àn
))

91 (Ë
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__f‹tify_fun˘i⁄
 

95 
__NTH
 (
	$bzîo
 (*
__de°
, 
size_t
 
__Àn
))

97 (Ë
	`__buûtö___mem£t_chk
 (
__de°
, '\0', 
__Àn
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__f‹tify_fun˘i⁄
 *

102 
__NTH
 (
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

104  
	`__buûtö___°r˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifde‡
__USE_GNU


108 
__f‹tify_fun˘i⁄
 *

109 
__NTH
 (
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

111  
	`__buûtö___°p˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__f‹tify_fun˘i⁄
 *

117 
__NTH
 (
	$°∫˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

118 
size_t
 
__Àn
))

120  
	`__buûtö___°∫˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__°≤˝y_chk
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

125 
size_t
 
__de°Àn
Ë
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__°≤˝y_Æüs
, (*
__de°
, c⁄° *
__§c
,

127 
size_t
 
__n
), 
°≤˝y
);

129 
__f‹tify_fun˘i⁄
 *

130 
	`__NTH
 (
	$°≤˝y
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
))

132 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

133 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿<
	`__bos
 (
__de°
)))

134  
	`__°≤˝y_chk
 (
__de°
, 
__§c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__°≤˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

136 
	}
}

139 
__f‹tify_fun˘i⁄
 *

140 
__NTH
 (
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

142  
	`__buûtö___°rˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__f‹tify_fun˘i⁄
 *

147 
__NTH
 (
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

148 
size_t
 
__Àn
))

150  
	`__buûtö___°∫ˇt_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/types.h

23 #i‚def 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/w‹dsize.h
>

30 
	t__u_ch¨
;

31 
	t__u_sh‹t
;

32 
	t__u_öt
;

33 
	t__u_l⁄g
;

36 sig√d 
	t__öt8_t
;

37 
	t__uöt8_t
;

38 sig√d 
	t__öt16_t
;

39 
	t__uöt16_t
;

40 sig√d 
	t__öt32_t
;

41 
	t__uöt32_t
;

42 #i‡
__WORDSIZE
 == 64

43 sig√d 
	t__öt64_t
;

44 
	t__uöt64_t
;

45 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


46 
__exãnsi⁄__
 sig√d 
	t__öt64_t
;

47 
__exãnsi⁄__
 
	t__uöt64_t
;

51 #i‡
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

54 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


55 
__exãnsi⁄__
 
	t__quad_t
;

56 
__exãnsi⁄__
 
	t__u_quad_t
;

60 
	m__vÆ
[2];

61 } 
	t__quad_t
;

64 
__u_l⁄g
 
	m__vÆ
[2];

65 } 
	t__u_quad_t
;

98 
	#__S16_TYPE
 

	)

99 
	#__U16_TYPE
 

	)

100 
	#__S32_TYPE
 

	)

101 
	#__U32_TYPE
 

	)

102 
	#__SLONGWORD_TYPE
 

	)

103 
	#__ULONGWORD_TYPE
 

	)

104 #i‡
__WORDSIZE
 == 32

105 
	#__SQUAD_TYPE
 
__quad_t


	)

106 
	#__UQUAD_TYPE
 
__u_quad_t


	)

107 
	#__SWORD_TYPE
 

	)

108 
	#__UWORD_TYPE
 

	)

109 
	#__SLONG32_TYPE
 

	)

110 
	#__ULONG32_TYPE
 

	)

111 
	#__S64_TYPE
 
__quad_t


	)

112 
	#__U64_TYPE
 
__u_quad_t


	)

115 
	#__STD_TYPE
 
__exãnsi⁄__
 

	)

116 #ñi‡
__WORDSIZE
 == 64

117 
	t__SQUAD_TYPE
 

	)

118 
	t__UQUAD_TYPE
 

	)

119 
	t__SWORD_TYPE
 

	)

120 
	t__UWORD_TYPE
 

	)

121 
	t__SLONG32_TYPE
 

	)

122 
	t__ULONG32_TYPE
 

	)

123 
	t__S64_TYPE
 

	)

124 
	t__U64_TYPE
 

	)

126 
	t__STD_TYPE
 

	)

130 
	~<bôs/ty≥sizes.h
>

133 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

134 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

135 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

136 
__STD_TYPE
 
__INO_T_TYPE
 
	g__öo_t
;

137 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__öo64_t
;

138 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

139 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__∆ök_t
;

140 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

141 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

142 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

143 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

144 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__˛ock_t
;

145 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__æim_t
;

146 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__æim64_t
;

147 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

148 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

149 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£c⁄ds_t
;

150 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£c⁄ds_t
;

152 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

153 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

156 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__˛ockid_t
;

159 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__timî_t
;

162 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

167 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blk˙t_t
;

168 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blk˙t64_t
;

171 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblk˙t_t
;

172 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblk˙t64_t
;

175 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfû˙t_t
;

176 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfû˙t64_t
;

179 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fsw‹d_t
;

181 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysˇŒ_¶⁄g_t
;

186 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysˇŒ_ul⁄g_t
;

190 
__off64_t
 
	t__loff_t
;

191 
__quad_t
 *
	t__qaddr_t
;

192 *
	t__ˇddr_t
;

195 
__STD_TYPE
 
__SWORD_TYPE
 
	g__öçå_t
;

198 
__STD_TYPE
 
__U32_TYPE
 
	g__sockÀn_t
;

201 #unde‡
__STD_TYPE


	@/usr/include/bits/unistd.h

19 #i‚de‡
_UNISTD_H


23 
ssize_t
 
	$__ªad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

24 
size_t
 
__buÊí
Ë
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__ªad_Æüs
, (
__fd
, *
__buf
,

26 
size_t
 
__nbyãs
), 
ªad
Ë
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__ªad_chk_w¨n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

29 
size_t
 
__buÊí
), 
__ªad_chk
)

30 
__wur
 
	`__w¨«âr
 ("read called with biggerÜengthÅhan size of "

33 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


34 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
)

36 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

38 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

39  
	`__ªad_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

41 i‡(
__nbyãs
 > 
	`__bos0
 (
__buf
))

42  
	`__ªad_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

44  
	`__ªad_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
);

45 
	}
}

47 #ifde‡
__USE_UNIX98


48 
ssize_t
 
	$__¥ód_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

50 
ssize_t
 
	$__¥ód64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__¥ód_Æüs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

54 
__off_t
 
__off£t
), 
¥ód
Ë
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_Æüs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

57 
__off64_t
 
__off£t
), 
¥ód64
Ë
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__¥ód_chk_w¨n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__¥ód_chk
)

61 
__wur
 
	`__w¨«âr
 ("pread called with biggerÜengthÅhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_chk_w¨n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__¥ód64_chk
)

67 
__wur
 
	`__w¨«âr
 ("pread64 called with biggerÜengthÅhan size of "

70 #i‚de‡
__USE_FILE_OFFSET64


71 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


72 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off_t
 
__off£t
)

74 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

76 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

77  
	`__¥ód_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

79 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

80  
	`__¥ód_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__¥ód_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

84 
	}
}

86 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


87 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

89 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

91 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

92  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

94 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

95  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

100 
	}
}

103 #ifde‡
__USE_LARGEFILE64


104 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


105 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

107 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

109 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

110  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

112 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

113  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

118 
	}
}

122 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


123 
ssize_t
 
	$__ªadlök_chk
 (c⁄° *
__ª°ri˘
 
__∑th
,

124 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

125 
size_t
 
__buÊí
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_Æüs
,

128 (c⁄° *
__ª°ri˘
 
__∑th
,

129 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
), 
ªadlök
)

130 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_chk_w¨n
,

132 (c⁄° *
__ª°ri˘
 
__∑th
,

133 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

134 
size_t
 
__buÊí
), 
__ªadlök_chk
)

135 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
	`__w¨«âr
 ("readlink called with biggerÜength "

138 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
ssize_t


139 
	`__NTH
 (
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
, *__ª°ri˘ 
__buf
,

140 
size_t
 
__Àn
))

142 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

144 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

145  
	`__ªadlök_chk
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

147 i‡–
__Àn
 > 
	`__bos
 (
__buf
))

148  
	`__ªadlök_chk_w¨n
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

150  
	`__ªadlök_Æüs
 (
__∑th
, 
__buf
, 
__Àn
);

151 
	}
}

154 #ifde‡
__USE_ATFILE


155 
ssize_t
 
	$__ªadlök©_chk
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

156 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

157 
size_t
 
__buÊí
)

158 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_Æüs
,

160 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

161 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
),

162 
ªadlök©
)

163 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_chk_w¨n
,

165 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

166 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

167 
size_t
 
__buÊí
), 
__ªadlök©_chk
)

168 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
	`__w¨«âr
 ("readlinkat called with bigger "

172 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
ssize_t


173 
	`__NTH
 (
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

174 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
))

176 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

178 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

179  
	`__ªadlök©_chk
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

181 i‡(
__Àn
 > 
	`__bos
 (
__buf
))

182  
	`__ªadlök©_chk_w¨n
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
,

183 
	`__bos
 (
__buf
));

185  
	`__ªadlök©_Æüs
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
);

186 
	}
}

189 *
	$__gëcwd_chk
 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__gëcwd_Æüs
,

192 (*
__buf
, 
size_t
 
__size
), 
gëcwd
Ë
__wur
;

193 *
	`__REDIRECT_NTH
 (
__gëcwd_chk_w¨n
,

194 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
),

195 
__gëcwd_chk
)

196 
__wur
 
	`__w¨«âr
 ("getcwd caller with biggerÜengthÅhan size of "

199 
__f‹tify_fun˘i⁄
 
__wur
 *

200 
	`__NTH
 (
	$gëcwd
 (*
__buf
, 
size_t
 
__size
))

202 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

204 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
))

205  
	`__gëcwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 i‡(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__gëcwd_chk_w¨n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__gëcwd_Æüs
 (
__buf
, 
__size
);

211 
	}
}

213 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


214 *
	$__gëwd_chk
 (*
__buf
, 
size_t
 
buÊí
)

215 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

216 *
	`__REDIRECT_NTH
 (
__gëwd_w¨n
, (*
__buf
), 
gëwd
)

217 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("please use getcwd instead,ás getwd "

220 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
 *

221 
	`__NTH
 (
	$gëwd
 (*
__buf
))

223 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

224  
	`__gëwd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__gëwd_w¨n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__c⁄f°r_chk
 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

230 
size_t
 
__buÊí
Ë
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_Æüs
, (
__«me
, *
__buf
,

232 
size_t
 
__Àn
), 
c⁄f°r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_chk_w¨n
,

234 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

235 
size_t
 
__buÊí
), 
__c⁄f°r_chk
)

236 
	`__w¨«âr
 ("confstr called with biggerÜengthÅhan size of destination "

239 
__f‹tify_fun˘i⁄
 
size_t


240 
	`__NTH
 (
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
))

242 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

244 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

245  
	`__c⁄f°r_chk
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

247 i‡(
	`__bos
 (
__buf
Ë< 
__Àn
)

248  
	`__c⁄f°r_chk_w¨n
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

250  
	`__c⁄f°r_Æüs
 (
__«me
, 
__buf
, 
__Àn
);

251 
	}
}

254 
	$__gëgroups_chk
 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__gëgroups_Æüs
, (
__size
, 
__gid_t
 
__li°
[]),

257 
gëgroups
Ë
__wur
;

258 
	`__REDIRECT_NTH
 (
__gëgroups_chk_w¨n
,

259 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
),

260 
__gëgroups_chk
)

261 
__wur
 
	`__w¨«âr
 ("getgroups called with bigger group countÅhan what "

264 
__f‹tify_fun˘i⁄
 

265 
	`__NTH
 (
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]))

267 i‡(
	`__bos
 (
__li°
Ë!(
size_t
) -1)

269 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
) || __size < 0)

270  
	`__gëgroups_chk
 (
__size
, 
__li°
, 
	`__bos
 (__list));

272 i‡(
__size
 *  (
__gid_t
Ë> 
	`__bos
 (
__li°
))

273  
	`__gëgroups_chk_w¨n
 (
__size
, 
__li°
, 
	`__bos
 (__list));

275  
	`__gëgroups_Æüs
 (
__size
, 
__li°
);

276 
	}
}

279 
	$__ây«me_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

280 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

281 
	`__REDIRECT_NTH
 (
__ây«me_r_Æüs
, (
__fd
, *
__buf
,

282 
size_t
 
__buÊí
), 
ây«me_r
)

283 
	`__n⁄nuŒ
 ((2));

284 
	`__REDIRECT_NTH
 (
__ây«me_r_chk_w¨n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

286 
size_t
 
__ƒól
), 
__ây«me_r_chk
)

287 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ttyname_r called with bigger buflenÅhan "

290 
__f‹tify_fun˘i⁄
 

291 
	`__NTH
 (
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

293 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

295 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

296  
	`__ây«me_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

298 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

299  
	`__ây«me_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

301  
	`__ây«me_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

302 
	}
}

305 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


306 
	$__gëlogö_r_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

307 
	`__n⁄nuŒ
 ((1));

308 
	`__REDIRECT
 (
__gëlogö_r_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

309 
gëlogö_r
Ë
	`__n⁄nuŒ
 ((1));

310 
	`__REDIRECT
 (
__gëlogö_r_chk_w¨n
,

311 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

312 
__gëlogö_r_chk
)

313 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("getlogin_r called with bigger buflenÅhan "

316 
__f‹tify_fun˘i⁄
 

317 
	$gëlogö_r
 (*
__buf
, 
size_t
 
__buÊí
)

319 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

321 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

322  
	`__gëlogö_r_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

324 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

325  
	`__gëlogö_r_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

327  
	`__gëlogö_r_Æüs
 (
__buf
, 
__buÊí
);

328 
	}
}

332 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


333 
	$__gëho°«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

334 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	`__REDIRECT_NTH
 (
__gëho°«me_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

336 
gëho°«me
Ë
	`__n⁄nuŒ
 ((1));

337 
	`__REDIRECT_NTH
 (
__gëho°«me_chk_w¨n
,

338 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

339 
__gëho°«me_chk
)

340 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("gethostname called with bigger buflenÅhan "

343 
__f‹tify_fun˘i⁄
 

344 
	`__NTH
 (
	$gëho°«me
 (*
__buf
, 
size_t
 
__buÊí
))

346 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

348 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

349  
	`__gëho°«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

351 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

352  
	`__gëho°«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

354  
	`__gëho°«me_Æüs
 (
__buf
, 
__buÊí
);

355 
	}
}

359 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

360 
	$__gëdomaö«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

361 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

362 
	`__REDIRECT_NTH
 (
__gëdomaö«me_Æüs
, (*
__buf
,

363 
size_t
 
__buÊí
),

364 
gëdomaö«me
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

365 
	`__REDIRECT_NTH
 (
__gëdomaö«me_chk_w¨n
,

366 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

367 
__gëdomaö«me_chk
)

368 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("getdomainname called with bigger "

372 
__f‹tify_fun˘i⁄
 

373 
	`__NTH
 (
	$gëdomaö«me
 (*
__buf
, 
size_t
 
__buÊí
))

375 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

377 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

378  
	`__gëdomaö«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

380 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

381  
	`__gëdomaö«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

383  
	`__gëdomaö«me_Æüs
 (
__buf
, 
__buÊí
);

384 
	}
}

	@/usr/include/bits/waitflags.h

19 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

19 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
°©us
Ë(((°©usË& 0xff00Ë>> 8)

	)

31 
	#__WTERMSIG
(
°©us
Ë((°©usË& 0x7f)

	)

34 
	#__WSTOPSIG
(
°©us
Ë
	`__WEXITSTATUS
(°©us)

	)

37 
	#__WIFEXITED
(
°©us
Ë(
	`__WTERMSIG
(°©usË=0)

	)

40 
	#__WIFSIGNALED
(
°©us
) \

41 (((sig√d Ë(((
°©us
Ë& 0x7fË+ 1Ë>> 1Ë> 0)

	)

44 
	#__WIFSTOPPED
(
°©us
Ë(((°©usË& 0xffË=0x7f)

	)

48 #ifde‡
WCONTINUED


49 
	#__WIFCONTINUED
(
°©us
Ë((°©usË=
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
°©us
Ë((°©usË& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
ªt
, 
sig
Ë(‘ëË<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
Ë((sigË<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<ídün.h
>

66 
	uwaô


68 
	mw_°©us
;

71 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


72 
	m__w_ãrmsig
:7;

73 
	m__w_c‹edump
:1;

74 
	m__w_ªtcode
:8;

77 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


79 
	m__w_ªtcode
:8;

80 
	m__w_c‹edump
:1;

81 
	m__w_ãrmsig
:7;

83 } 
	m__waô_ãrmö©ed
;

86 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


87 
	m__w_°›vÆ
:8;

88 
	m__w_°›sig
:8;

91 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


93 
	m__w_°›sig
:8;

94 
	m__w_°›vÆ
:8;

96 } 
	m__waô_°›≥d
;

99 
	#w_ãrmsig
 
__waô_ãrmö©ed
.
__w_ãrmsig


	)

100 
	#w_c‹edump
 
__waô_ãrmö©ed
.
__w_c‹edump


	)

101 
	#w_ªtcode
 
__waô_ãrmö©ed
.
__w_ªtcode


	)

102 
	#w_°›sig
 
__waô_°›≥d
.
__w_°›sig


	)

103 
	#w_°›vÆ
 
__waô_°›≥d
.
__w_°›vÆ


	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #unde‡
__USE_ISOC11


99 #unde‡
__USE_ISOC99


100 #unde‡
__USE_ISOC95


101 #unde‡
__USE_ISOCXX11


102 #unde‡
__USE_POSIX


103 #unde‡
__USE_POSIX2


104 #unde‡
__USE_POSIX199309


105 #unde‡
__USE_POSIX199506


106 #unde‡
__USE_XOPEN


107 #unde‡
__USE_XOPEN_EXTENDED


108 #unde‡
__USE_UNIX98


109 #unde‡
__USE_XOPEN2K


110 #unde‡
__USE_XOPEN2KXSI


111 #unde‡
__USE_XOPEN2K8


112 #unde‡
__USE_XOPEN2K8XSI


113 #unde‡
__USE_LARGEFILE


114 #unde‡
__USE_LARGEFILE64


115 #unde‡
__USE_FILE_OFFSET64


116 #unde‡
__USE_BSD


117 #unde‡
__USE_SVID


118 #unde‡
__USE_MISC


119 #unde‡
__USE_ATFILE


120 #unde‡
__USE_GNU


121 #unde‡
__USE_REENTRANT


122 #unde‡
__USE_FORTIFY_LEVEL


123 #unde‡
__FAVOR_BSD


124 #unde‡
__KERNEL_STRICT_NAMES


128 #i‚de‡
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

144 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

151 #i‡
deföed
 
_BSD_SOURCE
 && \

152 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

153 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifde‡
_GNU_SOURCE


159 #unde‡
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #unde‡
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #unde‡
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #unde‡
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #unde‡
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #unde‡
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #unde‡
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #unde‡
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #unde‡
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #unde‡
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #unde‡
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

186 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

187 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #i‡(
deföed
 
_ISOC11_SOURCE
 \

194 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

200 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

206 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

215 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #unde‡
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #unde‡
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #unde‡
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #unde‡
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

274 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #unde‡
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #unde‡
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifde‡
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifde‡
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifde‡
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

329 #i‡!
deföed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

330 #w¨nög 
_FORTIFY_SOURCE
 
ªquúes
 
compûög
 
wôh
 
›timiz©i⁄
 (-
O
)

331 #ñi‡!
__GNUC_PREREQ
 (4, 1)

332 #w¨nög 
_FORTIFY_SOURCE
 
ªquúes
 
GCC
 4.1 
‹
 
œãr


333 #ñi‡
_FORTIFY_SOURCE
 > 1

334 
	#__USE_FORTIFY_LEVEL
 2

	)

336 
	#__USE_FORTIFY_LEVEL
 1

	)

339 #i‚de‡
__USE_FORTIFY_LEVEL


340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<°dc-¥edef.h
>

353 #unde‡
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 17

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

362 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

365 #i‡
deföed
 
__GNUC__
 \

366 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

367 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

368 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

369 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

373 #i‚de‡
__ASSEMBLER__


374 #i‚de‡
_SYS_CDEFS_H


375 
	~<sys/cdefs.h
>

380 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


381 
	#__USE_LARGEFILE
 1

	)

382 
	#__USE_LARGEFILE64
 1

	)

388 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

389 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

390 && 
deföed
 
	g__exã∫_ölöe


391 
	#__USE_EXTERN_INLINES
 1

	)

399 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

20 #i‚de‡
_GETOPT_H


22 #i‚de‡
__√ed_gë›t


23 
	#_GETOPT_H
 1

	)

33 #i‡!
deföed
 
__GNU_LIBRARY__


34 
	~<˘y≥.h
>

37 #i‚de‡
__THROW


38 #i‚de‡
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

41 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__˝lu•lus


58 *
›èrg
;

72 
›töd
;

77 
›ãº
;

81 
›t›t
;

83 #i‚de‡
__√ed_gë›t


105 
	s›ti⁄


107 c⁄° *
	g«me
;

110 
	ghas_¨g
;

111 *
	gÊag
;

112 
	gvÆ
;

117 
	#no_¨gumít
 0

	)

118 
	#ªquúed_¨gumít
 1

	)

119 
	#›ti⁄Æ_¨gumít
 2

	)

147 #ifde‡
__GNU_LIBRARY__


151 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

152 
__THROW
;

154 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

155 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


159 #ifde‡
__REDIRECT


160 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

161 c⁄° *
__sh‹t›ts
),

162 
__posix_gë›t
);

164 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

165 c⁄° *
__sh‹t›ts
Ë
__THROW
;

166 
	#gë›t
 
__posix_gë›t


	)

170 
gë›t
 ();

173 #i‚de‡
__√ed_gë›t


174 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

175 c⁄° *
__sh‹t›ts
,

176 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

177 
__THROW
;

178 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

179 c⁄° *
__sh‹t›ts
,

180 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

181 
__THROW
;

185 #ifdef 
__˝lu•lus


190 #unde‡
__√ed_gë›t


	@/usr/include/sys/types.h

22 #i‚def 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


29 
	~<bôs/ty≥s.h
>

31 #ifdef 
__USE_BSD


32 #i‚de‡
__u_ch¨_deföed


33 
__u_ch¨
 
	tu_ch¨
;

34 
__u_sh‹t
 
	tu_sh‹t
;

35 
__u_öt
 
	tu_öt
;

36 
__u_l⁄g
 
	tu_l⁄g
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¨_deföed


	)

44 
__loff_t
 
	tloff_t
;

46 #i‚de‡
__öo_t_deföed


47 #i‚de‡
__USE_FILE_OFFSET64


48 
__öo_t
 
	töo_t
;

50 
__öo64_t
 
	töo_t
;

52 
	#__öo_t_deföed


	)

54 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


55 
__öo64_t
 
	töo64_t
;

56 
	#__öo64_t_deföed


	)

59 #i‚de‡
__dev_t_deföed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_deföed


	)

64 #i‚de‡
__gid_t_deföed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_deföed


	)

69 #i‚de‡
__mode_t_deföed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_deföed


	)

74 #i‚de‡
__∆ök_t_deföed


75 
__∆ök_t
 
	t∆ök_t
;

76 
	#__∆ök_t_deföed


	)

79 #i‚de‡
__uid_t_deföed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_deföed


	)

84 #i‚de‡
__off_t_deföed


85 #i‚de‡
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_deföed


	)

92 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_deföed


	)

97 #i‚de‡
__pid_t_deföed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_deföed


	)

102 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
) \

103 && !
deföed
 
__id_t_deföed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_deföed


	)

108 #i‚de‡
__ssize_t_deföed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_deföed


	)

113 #ifdef 
__USE_BSD


114 #i‚de‡
__daddr_t_deföed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ˇddr_t
 
	tˇddr_t
;

117 
	#__daddr_t_deföed


	)

121 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__key_t_deföed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_deföed


	)

126 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


127 
	#__√ed_˛ock_t


	)

129 
	#__√ed_time_t


	)

130 
	#__√ed_timî_t


	)

131 
	#__√ed_˛ockid_t


	)

132 
	~<time.h
>

134 #ifde‡
__USE_XOPEN


135 #i‚de‡
__u£c⁄ds_t_deföed


136 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

137 
	#__u£c⁄ds_t_deföed


	)

139 #i‚de‡
__su£c⁄ds_t_deföed


140 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

141 
	#__su£c⁄ds_t_deföed


	)

145 
	#__√ed_size_t


	)

146 
	~<°ddef.h
>

148 #ifde‡
__USE_MISC


150 
	tul⁄g
;

151 
	tush‹t
;

152 
	tuöt
;

157 #i‡!
__GNUC_PREREQ
 (2, 7)

160 #i‚de‡
__öt8_t_deföed


161 
	#__öt8_t_deföed


	)

162 
	töt8_t
;

163 
	töt16_t
;

164 
	töt32_t
;

165 #i‡
__WORDSIZE
 == 64

166 
	töt64_t
;

167 #ñi‡
__GLIBC_HAVE_LONG_LONG


168 
__exãnsi⁄__
 
	töt64_t
;

173 
	tu_öt8_t
;

174 
	tu_öt16_t
;

175 
	tu_öt32_t
;

176 #i‡
__WORDSIZE
 == 64

177 
	tu_öt64_t
;

178 #ñi‡
__GLIBC_HAVE_LONG_LONG


179 
__exãnsi⁄__
 
	tu_öt64_t
;

182 
	tªgi°î_t
;

187 
	#__ötN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_ötN_t
(
	tN
, 
	tMODE
) \

190 
	tu_öt
##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #i‚de‡
	t__öt8_t_deföed


193 
	t__öt8_t_deföed


	)

194 
	t__ötN_t
 (8, 
	t__QI__
);

195 
__ötN_t
 (16, 
__HI__
);

196 
__ötN_t
 (32, 
__SI__
);

197 
__ötN_t
 (64, 
__DI__
);

200 
__u_ötN_t
 (8, 
__QI__
);

201 
__u_ötN_t
 (16, 
__HI__
);

202 
__u_ötN_t
 (32, 
__SI__
);

203 
__u_ötN_t
 (64, 
__DI__
);

205 
	tªgi°î_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__w‹d__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<ídün.h
>

219 
	~<sys/£À˘.h
>

222 
	~<sys/sysma¸os.h
>

226 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
) \

227 && !
deföed
 
__blksize_t_deföed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_deföed


	)

233 #i‚de‡
__USE_FILE_OFFSET64


234 #i‚de‡
__blk˙t_t_deföed


235 
__blk˙t_t
 
	tblk˙t_t
;

236 
	#__blk˙t_t_deföed


	)

238 #i‚de‡
__fsblk˙t_t_deföed


239 
__fsblk˙t_t
 
	tfsblk˙t_t
;

240 
	#__fsblk˙t_t_deföed


	)

242 #i‚de‡
__fsfû˙t_t_deföed


243 
__fsfû˙t_t
 
	tfsfû˙t_t
;

244 
	#__fsfû˙t_t_deföed


	)

247 #i‚de‡
__blk˙t_t_deföed


248 
__blk˙t64_t
 
	tblk˙t_t
;

249 
	#__blk˙t_t_deföed


	)

251 #i‚de‡
__fsblk˙t_t_deföed


252 
__fsblk˙t64_t
 
	tfsblk˙t_t
;

253 
	#__fsblk˙t_t_deföed


	)

255 #i‚de‡
__fsfû˙t_t_deföed


256 
__fsfû˙t64_t
 
	tfsfû˙t_t
;

257 
	#__fsfû˙t_t_deföed


	)

261 #ifde‡
__USE_LARGEFILE64


262 
__blk˙t64_t
 
	tblk˙t64_t
;

263 
__fsblk˙t64_t
 
	tfsblk˙t64_t
;

264 
__fsfû˙t64_t
 
	tfsfû˙t64_t
;

269 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


270 
	~<bôs/±hªadty≥s.h
>

273 
	g__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/bits/pthreadtypes.h

18 #i‚de‡
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<bôs/w‹dsize.h
>

23 #ifde‡
__x86_64__


24 #i‡
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±hªad_t
;

63 
	u±hªad_©å_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__Æign
;

68 #i‚de‡
__have_±hªad_©å_t


69 
±hªad_©å_t
 
	t±hªad_©å_t
;

70 
	#__have_±hªad_©å_t
 1

	)

74 #ifde‡
__x86_64__


75 
	s__±hªad_öã∫Æ_li°


77 
__±hªad_öã∫Æ_li°
 *
	m__¥ev
;

78 
__±hªad_öã∫Æ_li°
 *
	m__√xt
;

79 } 
	t__±hªad_li°_t
;

81 
	s__±hªad_öã∫Æ_¶i°


83 
__±hªad_öã∫Æ_¶i°
 *
	m__√xt
;

84 } 
	t__±hªad_¶i°_t
;

92 
	s__±hªad_muãx_s


94 
	m__lock
;

95 
	m__cou¡
;

96 
	m__ow√r
;

97 #ifde‡
__x86_64__


98 
	m__nu£rs
;

102 
	m__köd
;

103 #ifde‡
__x86_64__


104 
	m__•ös
;

105 
__±hªad_li°_t
 
	m__li°
;

106 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

108 
	m__nu£rs
;

109 
__exãnsi⁄__
 union

111 
	m__•ös
;

112 
__±hªad_¶i°_t
 
	m__li°
;

115 } 
	m__d©a
;

116 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

117 
	m__Æign
;

118 } 
	t±hªad_muãx_t
;

122 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

123 
	m__Æign
;

124 } 
	t±hªad_muãx©å_t
;

133 
	m__lock
;

134 
	m__fuãx
;

135 
__exãnsi⁄__
 
	m__tŸÆ_£q
;

136 
__exãnsi⁄__
 
	m__wakeup_£q
;

137 
__exãnsi⁄__
 
	m__wokí_£q
;

138 *
	m__muãx
;

139 
	m__nwaôîs
;

140 
	m__brﬂdˇ°_£q
;

141 } 
	m__d©a
;

142 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

143 
__exãnsi⁄__
 
	m__Æign
;

144 } 
	t±hªad_c⁄d_t
;

148 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

149 
	m__Æign
;

150 } 
	t±hªad_c⁄d©å_t
;

154 
	t±hªad_key_t
;

158 
	t±hªad_⁄˚_t
;

161 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


166 #ifde‡
__x86_64__


169 
	m__lock
;

170 
	m__ƒ_ªadîs
;

171 
	m__ªadîs_wakeup
;

172 
	m__wrôî_wakeup
;

173 
	m__ƒ_ªadîs_queued
;

174 
	m__ƒ_wrôîs_queued
;

175 
	m__wrôî
;

176 
	m__sh¨ed
;

177 
	m__∑d1
;

178 
	m__∑d2
;

181 
	m__Êags
;

182 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

183 } 
	m__d©a
;

187 
	m__lock
;

188 
	m__ƒ_ªadîs
;

189 
	m__ªadîs_wakeup
;

190 
	m__wrôî_wakeup
;

191 
	m__ƒ_ªadîs_queued
;

192 
	m__ƒ_wrôîs_queued
;

195 
	m__Êags
;

196 
	m__sh¨ed
;

197 
	m__∑d1
;

198 
	m__∑d2
;

199 
	m__wrôî
;

200 } 
	m__d©a
;

202 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

203 
	m__Æign
;

204 } 
	t±hªad_rwlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

209 
	m__Æign
;

210 } 
	t±hªad_rwlock©å_t
;

214 #ifde‡
__USE_XOPEN2K


216 vﬁ©ûê
	t±hªad_•ölock_t
;

223 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

224 
	m__Æign
;

225 } 
	t±hªad_b¨rõr_t
;

229 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

230 
	m__Æign
;

231 } 
	t±hªad_b¨rõøâr_t
;

235 #i‚de‡
__x86_64__


237 
	#__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
	`__ªg∑rm__
 (1)))

	)

	@/usr/include/bits/typesizes.h

19 #i‚de‡
_BITS_TYPES_H


23 #i‚def 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifde‡
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 såu˘ { 
__vÆ
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifde‡
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wordsize.h

3 #i‡
deföed
 
__x86_64__
 && !deföed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifde‡
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/ctype.h

23 #i‚def 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 
	g__BEGIN_DECLS


31 #i‚de‡
_ISbô


40 
	~<ídün.h
>

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

44 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

49 
	m_ISuµî
 = 
_ISbô
 (0),

50 
	m_ISlowî
 = 
_ISbô
 (1),

51 
	m_ISÆpha
 = 
_ISbô
 (2),

52 
	m_ISdigô
 = 
_ISbô
 (3),

53 
	m_ISxdigô
 = 
_ISbô
 (4),

54 
	m_IS•a˚
 = 
_ISbô
 (5),

55 
	m_IS¥öt
 = 
_ISbô
 (6),

56 
	m_ISgøph
 = 
_ISbô
 (7),

57 
	m_ISbœnk
 = 
_ISbô
 (8),

58 
	m_IS˙ål
 = 
_ISbô
 (9),

59 
	m_ISpun˘
 = 
_ISbô
 (10),

60 
	m_ISÆnum
 = 
_ISbô
 (11)

80 c⁄° **
	$__˘y≥_b_loc
 ()

81 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

82 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

83 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

84 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

85 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

88 #i‚de‡
__˝lu•lus


89 
	#__is˘y≥
(
c
, 
ty≥
) \

90 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

91 #ñi‡
deföed
 
__USE_EXTERN_INLINES


92 
	#__is˘y≥_f
(
ty≥
) \

93 
__exã∫_ölöe
 \

94 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

96  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

97 
	}

	)
}

100 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

101 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

103 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__ex˘y≥
 (
iß um
);

112 
__ex˘y≥
 (
ißÕha
);

113 
__ex˘y≥
 (
is˙ål
);

114 
__ex˘y≥
 (
isdigô
);

115 
__ex˘y≥
 (
i¶owî
);

116 
__ex˘y≥
 (
isgøph
);

117 
__ex˘y≥
 (
i•röt
);

118 
__ex˘y≥
 (
i•un˘
);

119 
__ex˘y≥
 (
is•a˚
);

120 
__ex˘y≥
 (
isuµî
);

121 
__ex˘y≥
 (
isxdigô
);

125 
	$tﬁowî
 (
__c
Ë
__THROW
;

128 
	$touµî
 (
__c
Ë
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__ex˘y≥
 (
isbœnk
);

139 
__END_NAMESPACE_C99


142 #ifde‡
__USE_GNU


144 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

147 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	$ißscii
 (
__c
Ë
__THROW
;

155 
	$tﬂscii
 (
__c
Ë
__THROW
;

159 
	`__ex˘y≥
 (
_touµî
);

160 
	`__ex˘y≥
 (
_tﬁowî
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

165 (
__exãnsi⁄__
 \

166 ({ 
__ªs
; \

167 i‡( (
c
) > 1) \

169 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

175 
__ªs
 = 
f
 
¨gs
; \

178 
__ªs
 = (
a
)[(Ë(
c
)]; \

179 
__ªs
; 
	}
}))

	)

181 #i‡!
deföed
 
__NO_CTYPE


182 #ifde‡
__is˘y≥_f


183 
	$__is˘y≥_f
 (
Ænum
)

184 
	$__is˘y≥_f
 (
Æpha
)

185 
	$__is˘y≥_f
 (
˙ål
)

186 
	$__is˘y≥_f
 (
digô
)

187 
	$__is˘y≥_f
 (
lowî
)

188 
	$__is˘y≥_f
 (
gøph
)

189 
	$__is˘y≥_f
 (
¥öt
)

190 
	$__is˘y≥_f
 (
pun˘
)

191 
	$__is˘y≥_f
 (
•a˚
)

192 
	$__is˘y≥_f
 (
uµî
)

193 
	$__is˘y≥_f
 (
xdigô
)

194 #ifde‡
__USE_ISOC99


195 
	$__is˘y≥_f
 (
bœnk
)

197 #ñi‡
deföed
 
__is˘y≥


198 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

199 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

200 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

201 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

202 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

203 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

204 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

205 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

206 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

207 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

208 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

209 #ifde‡
__USE_ISOC99


210 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

214 #ifde‡
__USE_EXTERN_INLINES


215 
__exã∫_ölöe
 

216 
	`__NTH
 (
	$tﬁowî
 (
__c
))

218  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

219 
	}
}

221 
__exã∫_ölöe
 

222 
__NTH
 (
	$touµî
 (
__c
))

224  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

225 
	}
}

228 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


229 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

230 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

233 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


234 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

235 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

237 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

238 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

244 #ifde‡
__USE_XOPEN2K8


258 
	~<xloˇÀ.h
>

262 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

263 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

265 
	#__ex˘y≥_l
(
«me
) \

266 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

272 
__ex˘y≥_l
 (
iß um_l
);

273 
__ex˘y≥_l
 (
ißÕha_l
);

274 
__ex˘y≥_l
 (
is˙ål_l
);

275 
__ex˘y≥_l
 (
isdigô_l
);

276 
__ex˘y≥_l
 (
i¶owî_l
);

277 
__ex˘y≥_l
 (
isgøph_l
);

278 
__ex˘y≥_l
 (
i•röt_l
);

279 
__ex˘y≥_l
 (
i•un˘_l
);

280 
__ex˘y≥_l
 (
is•a˚_l
);

281 
__ex˘y≥_l
 (
isuµî_l
);

282 
__ex˘y≥_l
 (
isxdigô_l
);

284 
__ex˘y≥_l
 (
isbœnk_l
);

288 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

289 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

293 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

295 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


296 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

297 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

298 
	#__touµî_l
(
c
, 
loˇÀ
) \

299 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

300 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

301 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

305 #i‚de‡
__NO_CTYPE


306 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

307 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

308 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

309 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

310 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

311 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

312 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

313 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

314 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

315 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

316 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

318 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

320 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


321 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

322 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

325 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

326 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

327 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

328 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

329 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

330 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

331 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

332 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

333 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

334 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

335 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

337 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

339 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


340 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

341 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_BSD
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 #i‡
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

75 
	#htﬁe64
(
x
Ë(x)

	)

76 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

77 
	#À64toh
(
x
Ë(x)

	)

81 
	#htobe16
(
x
Ë(x)

	)

82 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

83 
	#be16toh
(
x
Ë(x)

	)

84 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

86 
	#htobe32
(
x
Ë(x)

	)

87 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

88 
	#be32toh
(
x
Ë(x)

	)

89 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

91 #i‡
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
Ë(x)

	)

93 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

94 
	#be64toh
(
x
Ë(x)

	)

95 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/gnu/stubs.h

6 #i‡!
deföed
 
__x86_64__


7 
	~<gnu/°ubs-32.h
>

9 #i‡
deföed
 
__x86_64__
 && deföed 
__LP64__


10 
	~<gnu/°ubs-64.h
>

12 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


13 
	~<gnu/°ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/î∫o.h
>

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	#__STDC_IEC_559__
 1

	)

31 
	#__STDC_IEC_559_COMPLEX__
 1

	)

35 
	#__STDC_ISO_10646__
 201103L

	)

38 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

19 #i‚def 
_SYS_CDEFS_H


20 
	#_SYS_CDEFS_H
 1

	)

23 #i‚de‡
_FEATURES_H


24 
	~<„©uªs.h
>

30 #i‡
deföed
 
__GNUC__
 && !deföed 
__STDC__


35 #unde‡
__P


36 #unde‡
__PMT


38 #ifde‡
__GNUC__


42 #i‡
__GNUC_PREREQ
 (4, 6Ë&& !
deföed
 
_LIBC


43 
	#__LEAF
 , 
__Àaf__


	)

44 
	#__LEAF_ATTR
 
	`__©åibuã__
 ((
__Àaf__
))

	)

46 
	#__LEAF


	)

47 
	#__LEAF_ATTR


	)

55 #i‡!
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (3, 3)

56 
	#__THROW
 
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
))

	)

57 
	#__THROWNL
 
	`__©åibuã__
 ((
__nŸhrow__
))

	)

58 
	#__NTH
(
f˘
Ë
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
)Ë
	)
fct

60 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
f˘
Ë
__LEAF_ATTR
 f˘ 
	`throw
 ()

	)

65 
	#__THROW


	)

66 
	#__THROWNL


	)

67 
	#__NTH
(
f˘
Ë
	)
fct

73 
	#__ölöe


	)

75 
	#__THROW


	)

76 
	#__THROWNL


	)

77 
	#__NTH
(
f˘
Ë
	)
fct

83 
	#__P
(
¨gs
Ë
	)
args

84 
	#__PMT
(
¨gs
Ë
	)
args

89 
	#__CONCAT
(
x
,
y
Ëx ## 
	)
y

90 
	#__STRING
(
x
Ë#x

	)

93 
	#__±r_t
 *

	)

94 
	#__l⁄g_doubÀ_t
 

	)

98 #ifdef 
__˝lu•lus


99 
	#__BEGIN_DECLS
 "C" {

	)

100 
	#__END_DECLS
 }

	)

102 
	#__BEGIN_DECLS


	)

103 
	#__END_DECLS


	)

112 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES


113 
	#__BEGIN_NAMESPACE_STD
 
«me•a˚
 
°d
 {

	)

114 
	#__END_NAMESPACE_STD
 }

	)

115 
	#__USING_NAMESPACE_STD
(
«me
Ë
usög
 
°d
::«me;

	)

116 
	#__BEGIN_NAMESPACE_C99
 
«me•a˚
 
__c99
 {

	)

117 
	#__END_NAMESPACE_C99
 }

	)

118 
	#__USING_NAMESPACE_C99
(
«me
Ë
usög
 
__c99
::«me;

	)

123 
	#__BEGIN_NAMESPACE_STD


	)

124 
	#__END_NAMESPACE_STD


	)

125 
	#__USING_NAMESPACE_STD
(
«me
)

	)

126 
	#__BEGIN_NAMESPACE_C99


	)

127 
	#__END_NAMESPACE_C99


	)

128 
	#__USING_NAMESPACE_C99
(
«me
)

	)

133 #i‚de‡
__BOUNDED_POINTERS__


134 
	#__bounded


	)

135 
	#__unbounded


	)

136 
	#__±rvÆue


	)

141 
	#__bos
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

142 
	#__bos0
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 0)

	)

144 #i‡
__GNUC_PREREQ
 (4,3)

145 
	#__w¨nde˛
(
«me
, 
msg
) \

146 
	`«me
 (Ë
	`__©åibuã__
((
	`__w¨nög__
 (
msg
)))

	)

147 
	#__w¨«âr
(
msg
Ë
	`__©åibuã__
((
	`__w¨nög__
 (msg)))

	)

148 
	#__îr‹de˛
(
«me
, 
msg
) \

149 
	`«me
 (Ë
	`__©åibuã__
((
	`__îr‹__
 (
msg
)))

	)

151 
	#__w¨nde˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

152 
	#__w¨«âr
(
msg
)

	)

153 
	#__îr‹de˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

157 #i‡
__GNUC_PREREQ
 (2,97)

159 
	#__Êex¨r
 []

	)

161 #ifde‡
__GNUC__


162 
	#__Êex¨r
 [0]

	)

164 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

165 
	#__Êex¨r
 []

	)

168 
	#__Êex¨r
 [1]

	)

184 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

186 
	#__REDIRECT
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

187 #ifde‡
__˝lu•lus


188 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

189 
«me
 
¥Ÿo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

190 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

191 
«me
 
¥Ÿo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

193 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

194 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROW


	)

195 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

196 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROWNL


	)

198 
	#__ASMNAME
(
˙ame
Ë
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, c«me)

	)

199 
	#__ASMNAME2
(
¥efix
, 
˙ame
Ë
	`__STRING
 (¥efixË
	)
cname

212 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

213 
	#__©åibuã__
(
xyz
Ë

	)

219 #i‡
__GNUC_PREREQ
 (2,96)

220 
	#__©åibuã_mÆloc__
 
	`__©åibuã__
 ((
__mÆloc__
))

	)

222 
	#__©åibuã_mÆloc__


	)

228 #i‡
__GNUC_PREREQ
 (2,96)

229 
	#__©åibuã_puª__
 
	`__©åibuã__
 ((
__puª__
))

	)

231 
	#__©åibuã_puª__


	)

235 #i‡
__GNUC_PREREQ
 (2,5)

236 
	#__©åibuã_c⁄°__
 
	`__©åibuã__
 ((
__c⁄°__
))

	)

238 
	#__©åibuã_c⁄°__


	)

244 #i‡
__GNUC_PREREQ
 (3,1)

245 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__u£d__
))

	)

246 
	#__©åibuã_noölöe__
 
	`__©åibuã__
 ((
__noölöe__
))

	)

248 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__unu£d__
))

	)

249 
	#__©åibuã_noölöe__


	)

253 #i‡
__GNUC_PREREQ
 (3,2)

254 
	#__©åibuã_dïªˇãd__
 
	`__©åibuã__
 ((
__dïªˇãd__
))

	)

256 
	#__©åibuã_dïªˇãd__


	)

265 #i‡
__GNUC_PREREQ
 (2,8)

266 
	#__©åibuã_f‹m©_¨g__
(
x
Ë
	`__©åibuã__
 ((
	`__f‹m©_¨g__
 (x)))

	)

268 
	#__©åibuã_f‹m©_¨g__
(
x
Ë

	)

275 #i‡
__GNUC_PREREQ
 (2,97)

276 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
) \

277 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__°rfm⁄__
, 
a
, 
b
)))

	)

279 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
Ë

	)

284 #i‡
__GNUC_PREREQ
 (3,3)

285 
	#__n⁄nuŒ
(
∑øms
Ë
	`__©åibuã__
 ((
__n⁄nuŒ__
Ö¨ams))

	)

287 
	#__n⁄nuŒ
(
∑øms
)

	)

292 #i‡
__GNUC_PREREQ
 (3,4)

293 
	#__©åibuã_w¨n_unu£d_ªsu…__
 \

294 
	`__©åibuã__
 ((
__w¨n_unu£d_ªsu…__
))

	)

295 #i‡
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©åibuã_w¨n_unu£d_ªsu…__


	)

299 
	#__©åibuã_w¨n_unu£d_ªsu…__


	)

301 #i‚de‡
__wur


302 
	#__wur


	)

306 #i‡
__GNUC_PREREQ
 (3,2)

307 
	#__Æways_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__Æways_ölöe__
))

	)

309 
	#__Æways_ölöe
 
__ölöe


	)

314 #i‡
__GNUC_PREREQ
 (4,3)

315 
	#__©åibuã_¨tificül__
 
	`__©åibuã__
 ((
__¨tificül__
))

	)

317 
	#__©åibuã_¨tificül__


	)

329 #i‡(!
deföed
 
__˝lu•lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
deföed
 
__˛™g__
 && (deföed 
__GNUC_STDC_INLINE__
 \

331 || 
deföed
 
__GNUC_GNU_INLINE__
)))

332 #i‡
deföed
 
__GNUC_STDC_INLINE__
 || deföed 
__˝lu•lus


333 
	#__exã∫_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

334 
	#__exã∫_Æways_ölöe
 \

335 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

337 
	#__exã∫_ölöe
 
__ölöe


	)

338 
	#__exã∫_Æways_ölöe
 
__Æways_ölöe


	)

342 #ifde‡
__exã∫_Æways_ölöe


343 
	#__f‹tify_fun˘i⁄
 
__exã∫_Æways_ölöe
 
__©åibuã_¨tificül__


	)

348 #i‡
__GNUC_PREREQ
 (4,3)

349 
	#__va_¨g_∑ck
(Ë
	`__buûtö_va_¨g_∑ck
 ()

	)

350 
	#__va_¨g_∑ck_Àn
(Ë
	`__buûtö_va_¨g_∑ck_Àn
 ()

	)

357 #i‡!
__GNUC_PREREQ
 (2,8)

358 
	#__exãnsi⁄__


	)

362 #i‡!
__GNUC_PREREQ
 (2,92)

363 
	#__ª°ri˘


	)

369 #i‡
__GNUC_PREREQ
 (3,1Ë&& !
deföed
 
__GNUG__


370 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

372 #ifde‡
__GNUC__


373 
	#__ª°ri˘_¨r


	)

375 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__ª°ri˘_¨r
 
ª°ri˘


	)

379 
	#__ª°ri˘_¨r


	)

384 #i‡
__GNUC__
 >= 3

385 
	#__glibc_u∆ikñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
((c⁄d), 0)

	)

386 
	#__glibc_likñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
((c⁄d), 1)

	)

388 
	#__glibc_u∆ikñy
(
c⁄d
Ë(c⁄d)

	)

389 
	#__glibc_likñy
(
c⁄d
Ë(c⁄d)

	)

392 
	~<bôs/w‹dsize.h
>

394 #i‡
deföed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && deföed 
__NO_LONG_DOUBLE_MATH


395 
	#__LDBL_COMPAT
 1

	)

396 #ifde‡
__REDIRECT


397 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

398 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
) \

399 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

400 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT_NTH
 («me,ÖrŸo,álüs)

	)

401 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
) \

402 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

403 
	#__LDBL_REDIR1_DECL
(
«me
, 
Æüs
) \

404 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 (#Æüs));

	)

405 
	#__LDBL_REDIR_DECL
(
«me
) \

406 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 ("__∆dbl_" #«me));

	)

407 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

408 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

409 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

410 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

413 #i‡!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT


414 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê
	)
proto

415 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
Ë«mê
	)
proto

416 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
__THROW


	)

417 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
__THROW


	)

418 
	#__LDBL_REDIR_DECL
(
«me
)

	)

419 #ifde‡
__REDIRECT


420 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

421 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

422 
	`__REDIRECT_NTH
 (
«me
, 
¥Ÿo
, 
Æüs
)

	)

	@/usr/include/sys/select.h

21 #i‚de‡
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

30 
	~<bôs/£À˘.h
>

33 
	~<bôs/sig£t.h
>

35 #i‚de‡
__sig£t_t_deföed


36 
	#__sig£t_t_deföed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__√ed_time_t


	)

42 
	#__√ed_time•ec


	)

43 
	~<time.h
>

44 
	#__√ed_timevÆ


	)

45 
	~<bôs/time.h
>

47 #i‚de‡
__su£c⁄ds_t_deföed


48 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

49 
	#__su£c⁄ds_t_deföed


	)

54 
	t__fd_mask
;

57 #unde‡
__NFDBITS


59 
	#__NFDBITS
 (8 * (Ë (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
Ë((
__fd_mask
Ë1 << ((dË% 
__NFDBITS
))

	)

68 #ifde‡
__USE_XOPEN


69 
__fd_mask
 
	mfds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
Ë((£t)->
fds_bôs
)

	)

72 
__fd_mask
 
	m__fds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
Ë((£t)->
__fds_bôs
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifde‡
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£ç
Ë
	`__FD_SET
 (fd, fd£ç)

	)

91 
	#FD_CLR
(
fd
, 
fd£ç
Ë
	`__FD_CLR
 (fd, fd£ç)

	)

92 
	#FD_ISSET
(
fd
, 
fd£ç
Ë
	`__FD_ISSET
 (fd, fd£ç)

	)

93 
	#FD_ZERO
(
fd£ç
Ë
	`__FD_ZERO
 (fd£ç)

	)

96 
__BEGIN_DECLS


106 
£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

107 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

108 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

109 
timevÆ
 *
__ª°ri˘
 
__timeout
);

111 #ifde‡
__USE_XOPEN2K


118 
p£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

119 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

120 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

121 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
,

122 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__sigmask
);

127 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__GNUC__


128 
	~<bôs/£À˘2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

20 #i‚de‡
_SYS_SYSMACROS_H


21 
	#_SYS_SYSMACROS_H
 1

	)

23 
	~<„©uªs.h
>

28 #ifde‡
__GLIBC_HAVE_LONG_LONG


29 
__BEGIN_DECLS


31 
__exãnsi⁄__


32 
	$gnu_dev_maj‹
 (
__dev
)

33 
__THROW
 
__©åibuã_c⁄°__
;

34 
__exãnsi⁄__


35 
	$gnu_dev_mö‹
 (
__dev
)

36 
__THROW
 
__©åibuã_c⁄°__
;

37 
__exãnsi⁄__


38 
	$gnu_dev_makedev
 (
__maj‹
,

39 
__mö‹
)

40 
__THROW
 
__©åibuã_c⁄°__
;

42 #i‡
deföed
 
__GNUC__
 && __GNUC__ >2 && deföed 
__USE_EXTERN_INLINES


43 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

44 
	`__NTH
 (
	$gnu_dev_maj‹
 (
__dev
))

46  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

47 
	}
}

49 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

50 
__NTH
 (
	$gnu_dev_mö‹
 (
__dev
))

52  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

53 
	}
}

55 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

56 
__NTH
 (
	$gnu_dev_makedev
 (
__maj‹
, 
__mö‹
))

58  ((
__mö‹
 & 0xffË| ((
__maj‹
 & 0xfff) << 8)

59 | (((Ë(
__mö‹
 & ~0xff)) << 12)

60 | (((Ë(
__maj‹
 & ~0xfff)) << 32));

61 
	}
}

63 
	g__END_DECLS


66 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
 (dev)

	)

67 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
 (dev)

	)

68 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
 (maj, mö)

	)

	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_SVID


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/asm/errno.h

1 
	~<asm-gíîic/î∫o.h
>

	@/usr/include/bits/byteswap.h

19 #i‡!
deföed
 
_BYTESWAP_H
 && !deföed 
_NETINET_IN_H
 && !deföed 
_ENDIAN_H


23 #i‚de‡
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

28 
	~<bôs/w‹dsize.h
>

31 
	#__bsw≠_c⁄°™t_16
(
x
) \

32 ((Ë((((
x
Ë>> 8Ë& 0xffË| (((xË& 0xffË<< 8)))

	)

35 
	~<bôs/byãsw≠-16.h
>

38 
	#__bsw≠_c⁄°™t_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
Ë& 0x0000ff00Ë<< 8Ë| (((xË& 0x000000ffË<< 24))

	)

42 #ifde‡
__GNUC__


43 #i‡
__GNUC_PREREQ
 (4, 3)

44 
__ölöe
 

45 
	$__bsw≠_32
 (
__bsx
)

47  
	`__buûtö_bsw≠32
 (
__bsx
);

48 
	}
}

49 #ñi‡
__GNUC__
 >= 2

50 #i‡
__WORDSIZE
 =64 || (
deföed
 
__i486__
 || deföed 
__≥¡ium__
 \

51 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

52 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

53 || 
deföed
 
	g__k6__
 || deföed 
	g__noc⁄a__
 \

54 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__geode__
 \

55 || 
deföed
 
	g__amdÁm10__
)

58 
	#__bsw≠_32
(
x
) \

59 (
__exãnsi⁄__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

62 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

64 
	`__asm__
 ("bsw≠ %0" : "Ù" (
__v
Ë: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw≠_32
(
x
) \

68 (
__exãnsi⁄__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

71 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "Ù" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw≠_32
(
x
) \

83 (
__exãnsi⁄__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_32
 (__x); }))

	)

87 
__ölöe
 

88 
	$__bsw≠_32
 (
__bsx
)

90  
	`__bsw≠_c⁄°™t_32
 (
__bsx
);

91 
	}
}

95 #i‡
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw≠_c⁄°™t_64
(
x
) \

98 (
	`__exãnsi⁄__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
Ë& 0x00000000000000ffuŒË<< 56)))

	)

107 #i‡
__GNUC_PREREQ
 (4, 3)

108 
__ölöe
 
__uöt64_t


109 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

111  
	`__buûtö_bsw≠64
 (
__bsx
);

112 
	}
}

113 #ñi‡
__WORDSIZE
 == 64

114 
	#__bsw≠_64
(
x
) \

115 (
__exãnsi⁄__
 \

116 ({ 
__uöt64_t
 
__v
, 
__x
 = (
x
); \

117 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

118 
__v
 = 
	`__bsw≠_c⁄°™t_64
 (
__x
); \

120 
	`__asm__
 ("bsw≠ %q0" : "Ù" (
__v
Ë: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw≠_64
(
x
) \

124 (
__exãnsi⁄__
 \

125 ({ uni⁄ { 
__exãnsi⁄__
 
__uöt64_t
 
__Œ
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 i‡(
	`__buûtö_c⁄°™t_p
 (
x
)) \

128 
__r
.
__Œ
 = 
	`__bsw≠_c⁄°™t_64
 (
x
); \

131 
__w
.
__Œ
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw≠_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw≠_32
 (
__w
.__l[0]); \

135 
__r
.
__Œ
; }))

	)

137 #ñi‡
__GLIBC_HAVE_LONG_LONG


138 
	#__bsw≠_c⁄°™t_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
Ë& 0x00000000000000ffuŒË<< 56))

	)

148 
__ölöe
 
__uöt64_t


149 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

151  
	`__bsw≠_c⁄°™t_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #i‚de‡
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/select.h

18 #i‚de‡
_SYS_SELECT_H


22 
	~<bôs/w‹dsize.h
>

25 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

27 #i‡
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "°osq"

	)

30 
	#__FD_ZERO_STOS
 "°o¶"

	)

33 
	#__FD_ZERO
(
fd•
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vﬁ©ûe__
 ("˛d;Ñï; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd•
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¨r
 = (
£t
); \

52 
__i
 = 0; __ò<  (
fd_£t
Ë/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¨r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)Ë!0)

	)

	@/usr/include/bits/select2.h

19 #i‚de‡
_SYS_SELECT_H


24 
__fdñt_chk
 (
__d
);

25 
	$__fdñt_w¨n
 (
__d
)

26 
	`__w¨«âr
 ("bit outside of fd_set selected");

27 #unde‡
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__exãnsi⁄__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__buûtö_c⁄°™t_p
 (
__d
) \

32 ? (0 <
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fdñt_w¨n
 (
__d
)) \

35 : 
	`__fdñt_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

20 #i‚def 
_SIGSET_H_ty≥s


21 
	#_SIGSET_H_ty≥s
 1

	)

23 
	t__sig_©omic_t
;

27 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

30 
	m__vÆ
[
_SIGSET_NWORDS
];

31 } 
	t__sig£t_t
;

42 #i‡!
deföed
 
_SIGSET_H_‚s
 && deföed 
_SIGNAL_H


43 
	#_SIGSET_H_‚s
 1

	)

45 #i‚de‡
_EXTERN_INLINE


46 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

50 
	#__sigmask
(
sig
) \

51 (((Ë1Ë<< (((
sig
Ë- 1Ë% (8 *  ())))

	)

54 
	#__sigw‹d
(
sig
Ë(((sigË- 1Ë/ (8 *  ()))

	)

56 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

57 
	#__sigem±y£t
(
£t
) \

58 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

59 
sig£t_t
 *
__£t
 = (
£t
); \

60 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = 0; \

61 0; }))

	)

62 
	#__sigfûl£t
(
£t
) \

63 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

64 
sig£t_t
 *
__£t
 = (
£t
); \

65 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = ~0UL; \

66 0; }))

	)

68 #ifde‡
__USE_GNU


72 
	#__sigi£m±y£t
(
£t
) \

73 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

74 c⁄° 
sig£t_t
 *
__£t
 = (
£t
); \

75 
__ªt
 = 
__£t
->
__vÆ
[--
__˙t
]; \

76 !
__ªt
 && --
__˙t
 >= 0) \

77 
__ªt
 = 
__£t
->
__vÆ
[
__˙t
]; \

78 
__ªt
 =0; }))

	)

79 
	#__sig™d£t
(
de°
, 
À·
, 
right
) \

80 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

81 
sig£t_t
 *
__de°
 = (
de°
); \

82 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

83 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

84 --
__˙t
 >= 0) \

85 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

86 & 
__right
->
__vÆ
[
__˙t
]); \

87 0; }))

	)

88 
	#__sig‹£t
(
de°
, 
À·
, 
right
) \

89 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

90 
sig£t_t
 *
__de°
 = (
de°
); \

91 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

92 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

93 --
__˙t
 >= 0) \

94 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

95 | 
__right
->
__vÆ
[
__˙t
]); \

96 0; }))

	)

103 
__sigismembî
 (c⁄° 
__sig£t_t
 *, );

104 
__sigadd£t
 (
__sig£t_t
 *, );

105 
__sigdñ£t
 (
__sig£t_t
 *, );

107 #ifde‡
__USE_EXTERN_INLINES


108 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

109 
_EXTERN_INLINE
 \

110 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

112 
__mask
 = 
	`__sigmask
 (
__sig
); \

113 
__w‹d
 = 
	`__sigw‹d
 (
__sig
); \

114  
BODY
; \

115 }

	)

117 
__SIGSETFN
 (
__sigismembî
, (
__£t
->
__vÆ
[
__w‹d
] & 
__mask
) ? 1 : 0, const)

118 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__vÆ
[
__w‹d
] |
__mask
), 0), )

119 
__SIGSETFN
 (
__sigdñ£t
, ((
__£t
->
__vÆ
[
__w‹d
] &~
__mask
), 0), )

121 #unde‡
__SIGSETFN


	@/usr/include/bits/time.h

23 #i‡
deföed
 
__√ed_timevÆ
 || deföed 
__USE_GNU


24 #i‚de‡
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<bôs/ty≥s.h
>

30 
	stimevÆ


32 
__time_t
 
	mtv_£c
;

33 
__su£c⁄ds_t
 
	mtv_u£c
;

38 #i‚de‡
__√ed_timevÆ


39 #i‚de‡
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #i‡(!
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_POSIX
) \

51 && !
deföed
 
	g__USE_XOPEN2K


54 
	~<bôs/ty≥s.h
>

55 
__sysc⁄f
 ();

56 
	#CLK_TCK
 ((
__˛ock_t
Ë
	`__sysc⁄f
 (2)Ë

	)

59 #ifde‡
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

82 
	#TIMER_ABSTIME
 1

	)

85 #ifde‡
__USE_GNU


86 
	~<bôs/timex.h
>

88 
__BEGIN_DECLS


91 
	$˛ock_adjtime
 (
__˛ockid_t
 
__˛ock_id
, 
timex
 *
__utx
Ë
__THROW
;

93 
__END_DECLS


99 #unde‡
__√ed_timevÆ


	@/usr/include/gnu/stubs-64.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_bdÊush


	)

11 
	#__°ub_chÊags


	)

12 
	#__°ub_Áâach


	)

13 
	#__°ub_fchÊags


	)

14 
	#__°ub_fdëach


	)

15 
	#__°ub_gëmsg


	)

16 
	#__°ub_gây


	)

17 
	#__°ub_lchmod


	)

18 
	#__°ub_putmsg


	)

19 
	#__°ub_ªvoke


	)

20 
	#__°ub_£éogö


	)

21 
	#__°ub_sigªtu∫


	)

22 
	#__°ub_s°k


	)

23 
	#__°ub_°ty


	)

	@/usr/include/asm-generic/errno.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

111 
	#EHWPOISON
 133

	)

	@/usr/include/bits/byteswap-16.h

19 #i‚de‡
_BITS_BYTESWAP_H


23 #ifde‡
__GNUC__


24 #i‡
__GNUC__
 >= 2

25 
	#__bsw≠_16
(
x
) \

26 (
__exãnsi⁄__
 \

27 ({ 
__v
, 
__x
 = (Ë(
x
); \

28 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

29 
__v
 = 
	`__bsw≠_c⁄°™t_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "Ù" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw≠_16
(
x
) \

39 (
__exãnsi⁄__
 \

40 ({ 
__x
 = (Ë(
x
); \

41 
	`__bsw≠_c⁄°™t_16
 (
__x
); }))

	)

44 
__ölöe
 

45 
	$__bsw≠_16
 (
__bsx
)

47  
	`__bsw≠_c⁄°™t_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/timex.h

18 #i‚def 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<bôs/ty≥s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysˇŒ_¶⁄g_t
 
	moff£t
;

29 
__sysˇŒ_¶⁄g_t
 
	m‰eq
;

30 
__sysˇŒ_¶⁄g_t
 
	mmaxîr‹
;

31 
__sysˇŒ_¶⁄g_t
 
	me°îr‹
;

32 
	m°©us
;

33 
__sysˇŒ_¶⁄g_t
 
	mc⁄°™t
;

34 
__sysˇŒ_¶⁄g_t
 
	m¥ecisi⁄
;

35 
__sysˇŒ_¶⁄g_t
 
	mtﬁî™˚
;

36 
timevÆ
 
	mtime
;

37 
__sysˇŒ_¶⁄g_t
 
	mtick
;

38 
__sysˇŒ_¶⁄g_t
 
	mµs‰eq
;

39 
__sysˇŒ_¶⁄g_t
 
	mjôãr
;

40 
	mshi·
;

41 
__sysˇŒ_¶⁄g_t
 
	m°abû
;

42 
__sysˇŒ_¶⁄g_t
 
	mjô˙t
;

43 
__sysˇŒ_¶⁄g_t
 
	mˇl˙t
;

44 
__sysˇŒ_¶⁄g_t
 
	mîr˙t
;

45 
__sysˇŒ_¶⁄g_t
 
	m°b˙t
;

47 
	mèi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/asm-generic/errno-base.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@
1
.
1
/usr/include
266
7079
src/BDTEventWrapper.cxx
src/BinarySearchTree.cxx
src/BinarySearchTreeNode.cxx
src/BinaryTree.cxx
src/CCPruner.cxx
src/CCTreeWrapper.cxx
src/ClassInfo.cxx
src/ClassifierFactory.cxx
src/Config.cxx
src/Configurable.cxx
src/ConvergenceTest.cxx
src/CostComplexityPruneTool.cxx
src/CrossEntropy.cxx
src/CrossValidation.cxx
src/DNN/Architectures/Cpu.cxx
src/DNN/Architectures/Cpu/ActivationFunctions.cxx
src/DNN/Architectures/Cpu/Arithmetic.cxx
src/DNN/Architectures/Cpu/CpuBuffer.cxx
src/DNN/Architectures/Cpu/CpuMatrix.cxx
src/DNN/Architectures/Cpu/DataLoader.cxx
src/DNN/Architectures/Cpu/DenoisePropagation.cxx
src/DNN/Architectures/Cpu/Dropout.cxx
src/DNN/Architectures/Cpu/Initialization.cxx
src/DNN/Architectures/Cpu/LossFunctions.cxx
src/DNN/Architectures/Cpu/OutputFunctions.cxx
src/DNN/Architectures/Cpu/Propagation.cxx
src/DNN/Architectures/Cpu/Regularization.cxx
src/DNN/Architectures/Cuda/CudaBuffers.cxx
src/DNN/Architectures/Reference.cxx
src/DNN/Architectures/Reference/ActivationFunctions.cxx
src/DNN/Architectures/Reference/DenoisePropagation.cxx
src/DNN/Architectures/Reference/Dropout.cxx
src/DNN/Architectures/Reference/Initialization.cxx
src/DNN/Architectures/Reference/LossFunctions.cxx
src/DNN/Architectures/Reference/OutputFunctions.cxx
src/DNN/Architectures/Reference/Propagation.cxx
src/DNN/Architectures/Reference/Regularization.cxx
src/DNN/DataLoader.cxx
src/DataInputHandler.cxx
src/DataLoader.cxx
src/DataSet.cxx
src/DataSetFactory.cxx
src/DataSetInfo.cxx
src/DataSetManager.cxx
src/DecisionTree.cxx
src/DecisionTreeNode.cxx
src/Envelope.cxx
src/Event.cxx
src/ExpectedErrorPruneTool.cxx
src/Factory.cxx
src/FitterBase.cxx
src/GeneticAlgorithm.cxx
src/GeneticFitter.cxx
src/GeneticGenes.cxx
src/GeneticPopulation.cxx
src/GeneticRange.cxx
src/GiniIndex.cxx
src/GiniIndexWithLaplace.cxx
src/HyperParameterOptimisation.cxx
src/IFitterTarget.cxx
src/IMethod.cxx
src/Interval.cxx
src/KDEKernel.cxx
src/LDA.cxx
src/LogInterval.cxx
src/LossFunction.cxx
src/MCFitter.cxx
src/MethodANNBase.cxx
src/MethodBDT.cxx
src/MethodBase.cxx
src/MethodBayesClassifier.cxx
src/MethodBoost.cxx
src/MethodCFMlpANN.cxx
src/MethodCFMlpANN_Utils.cxx
src/MethodCategory.cxx
src/MethodCompositeBase.cxx
src/MethodCuts.cxx
src/MethodDAE.cxx
src/MethodDNN.cxx
src/MethodDT.cxx
src/MethodFDA.cxx
src/MethodFisher.cxx
src/MethodHMatrix.cxx
src/MethodKNN.cxx
src/MethodLD.cxx
src/MethodLikelihood.cxx
src/MethodMLP.cxx
src/MethodPDEFoam.cxx
src/MethodPDERS.cxx
src/MethodPlugins.cxx
src/MethodRuleFit.cxx
src/MethodSVM.cxx
src/MethodTMlpANN.cxx
src/MinuitFitter.cxx
src/MinuitWrapper.cxx
src/MisClassificationError.cxx
src/ModulekNN.cxx
src/MsgLogger.cxx
src/NeuralNet.cxx
src/Node.cxx
src/OptimizeConfigParameters.cxx
src/Option.cxx
src/OptionMap.cxx
src/PDEFoam.cxx
src/PDEFoamCell.cxx
src/PDEFoamDecisionTree.cxx
src/PDEFoamDecisionTreeDensity.cxx
src/PDEFoamDensityBase.cxx
src/PDEFoamDiscriminant.cxx
src/PDEFoamDiscriminantDensity.cxx
src/PDEFoamEvent.cxx
src/PDEFoamEventDensity.cxx
src/PDEFoamKernelBase.cxx
src/PDEFoamKernelGauss.cxx
src/PDEFoamKernelLinN.cxx
src/PDEFoamKernelTrivial.cxx
src/PDEFoamMultiTarget.cxx
src/PDEFoamTarget.cxx
src/PDEFoamTargetDensity.cxx
src/PDEFoamVect.cxx
src/PDF.cxx
src/QuickMVAProbEstimator.cxx
src/ROCCalc.cxx
src/ROCCurve.cxx
src/Ranking.cxx
src/Reader.cxx
src/RegressionVariance.cxx
src/Results.cxx
src/ResultsClassification.cxx
src/ResultsMulticlass.cxx
src/ResultsRegression.cxx
src/RootFinder.cxx
src/Rule.cxx
src/RuleCut.cxx
src/RuleEnsemble.cxx
src/RuleFit.cxx
src/RuleFitAPI.cxx
src/RuleFitParams.cxx
src/SVEvent.cxx
src/SVKernelFunction.cxx
src/SVKernelMatrix.cxx
src/SVWorkingSet.cxx
src/SdivSqrtSplusB.cxx
src/SeparationBase.cxx
src/SimulatedAnnealing.cxx
src/SimulatedAnnealingFitter.cxx
src/TActivation.cxx
src/TActivationChooser.cxx
src/TActivationIdentity.cxx
src/TActivationRadial.cxx
src/TActivationReLU.cxx
src/TActivationSigmoid.cxx
src/TActivationTanh.cxx
src/TNeuron.cxx
src/TNeuronInput.cxx
src/TNeuronInputAbs.cxx
src/TNeuronInputChooser.cxx
src/TNeuronInputSqSum.cxx
src/TNeuronInputSum.cxx
src/TSpline1.cxx
src/TSpline2.cxx
src/TSynapse.cxx
src/Timer.cxx
src/Tools.cxx
src/TransformationHandler.cxx
src/Types.cxx
src/VarTransformHandler.cxx
src/VariableDecorrTransform.cxx
src/VariableGaussTransform.cxx
src/VariableIdentityTransform.cxx
src/VariableImportance.cxx
src/VariableInfo.cxx
src/VariableNormalizeTransform.cxx
src/VariablePCATransform.cxx
src/VariableRearrangeTransform.cxx
src/VariableTransform.cxx
src/VariableTransformBase.cxx
src/Volume.cxx
test/DNN/DAE/TestDataLoader.cxx
test/DNN/DAE/TestDenoiseAEProp.cxx
test/DNN/DAE/TestLayer.cxx
test/DNN/DAE/TestLogistic.cxx
test/DNN/DAE/TestLogisticRegressionLayer.cxx
test/DNN/DAE/TestStackedLayers.cxx
test/DNN/DAE/TestTransformLayer.cxx
test/DNN/DAE/TestUtilsAE.cxx
test/DNN/TestActivationFunctions.cxx
test/DNN/TestActivationFunctionsCpu.cxx
test/DNN/TestActivationFunctionsCuda.cxx
test/DNN/TestBackpropagation.cxx
test/DNN/TestBackpropagationCpu.cxx
test/DNN/TestBackpropagationCuda.cxx
test/DNN/TestCuda.cxx
test/DNN/TestDataLoader.cxx
test/DNN/TestDataLoaderCpu.cxx
test/DNN/TestDataLoaderCuda.cxx
test/DNN/TestDerivatives.cxx
test/DNN/TestDerivativesCpu.cxx
test/DNN/TestDerivativesCuda.cxx
test/DNN/TestLossFunctions.cxx
test/DNN/TestLossFunctionsCpu.cxx
test/DNN/TestLossFunctionsCuda.cxx
test/DNN/TestMatrixArithmeticCpu.cxx
test/DNN/TestMatrixArithmeticCuda.cxx
test/DNN/TestMinimization.cxx
test/DNN/TestMinimizationCpu.cxx
test/DNN/TestMinimizationCuda.cxx
/usr/include/assert.h
/usr/include/errno.h
/usr/include/math.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/tbb/tbb.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/confname.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/posix_opt.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/sys/types.h
/usr/include/xlocale.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/typesizes.h
/usr/include/bits/wordsize.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/time.h
/usr/include/asm/errno.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
/usr/include/bits/time.h
/usr/include/gnu/stubs-64.h
/usr/include/asm-generic/errno.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/timex.h
/usr/include/asm-generic/errno-base.h
