cscope 15 $HOME/rootauto/root/tmva/tmva               0002204916
	@src/BDTEventWrapper.cxx

23 
	~"TMVA/BDTEv’tW¿µ”.h
"

29 
	~"Rty³sCÜe.h
"

31 
usšg
 
Çme¥aû
 
	gTMVA
;

36 
	gBDTEv’tW¿µ”
::
	$BDTEv’tW¿µ”
(cÚ¡ 
Ev’t
* 
e
è: 
	$fEv’t
(
e
) {

38 
fBkgWeight
 = 0.0;

39 
fSigWeight
 = 0.0;

40 
	}
}

45 
	gBDTEv’tW¿µ”
::~
	$BDTEv’tW¿µ”
() {

46 
	}
}

54 
BDTEv’tW¿µ”
::
	$S‘CumuÏtiveWeight
(
BoŞ_t
 
ty³
, 
DoubË_t
 
weight
) {

57 if(
ty³
è
fSigWeight
 = 
weight
;

58 
fBkgWeight
 = 
weight
;

59 
	}
}

64 
DoubË_t
 
	gBDTEv’tW¿µ”
::
	$G‘CumuÏtiveWeight
(
BoŞ_t
 
ty³
) const {

65 if(
ty³
è 
fSigWeight
;

66  
fBkgWeight
;

67 
	}
}

	@src/BinarySearchTree.cxx

38 
	~<¡dexû±
>

39 
	~<c¡dlib
>

40 
	~<queue
>

41 
	~<®gÜ™hm
>

49 
	~"TM©h.h
"

53 
	~"TM©rixDBa£.h
"

54 
	~"TObjSŒšg.h
"

55 
	~"TT»e.h
"

57 
	~"TMVA/MsgLogg”.h
"

58 
	~"TMVA/M‘hodBa£.h
"

59 
	~"TMVA/ToŞs.h
"

60 
	~"TMVA/Ev’t.h
"

61 
	~"TMVA/Bš¬yS—rchT»e.h
"

63 
	~"TMVA/Bš¬yT»e.h
"

64 
	~"TMVA/Ty³s.h
"

65 
	~"TMVA/Node.h
"

67 
CÏssImp
(
TMVA
::
Bš¬yS—rchT»e
);

72 
	gTMVA
::
Bš¬yS—rchT»e
::
	$Bš¬yS—rchT»e
( ) :

73 
	`Bš¬yT»e
(),

74 
	`fP”iod
 ( 1 ),

75 
	`fCu¼’tD•th
( 0 ),

76 
	`fSti¡icsIsV®id
Ğ
kFALSE
 ),

77 
	`fSumOfWeights
( 0 ),

78 
	$fCªNÜm®ize
Ğ
kFALSE
 )

80 
fNEv’tsW
[0]=fNEventsW[1]=0.;

81 
	}
}

86 
	gTMVA
::
Bš¬yS—rchT»e
::
	$Bš¬yS—rchT»e
ĞcÚ¡ 
Bš¬yS—rchT»e
 &
b
)

87 : 
	`Bš¬yT»e
(),

88 
	`fP”iod
 ( 
b
.
fP”iod
 ),

89 
	`fCu¼’tD•th
( 0 ),

90 
	`fSti¡icsIsV®id
Ğ
kFALSE
 ),

91 
	`fSumOfWeights
Ğ
b
.
fSumOfWeights
 ),

92 
	$fCªNÜm®ize
Ğ
kFALSE
 )

94 
fNEv’tsW
[0]=fNEventsW[1]=0.;

95 
	`Log
(è<< 
kFATAL
 << " Cİy cÚ¡ruùÜ‚Ù im¶em’‹d y‘ " << 
Endl
;

96 
	}
}

101 
	gTMVA
::
Bš¬yS—rchT»e
::~
	$Bš¬yS—rchT»e
( )

103 
¡d
::
veùÜ
< std::
·œ
<
DoubË_t
, cÚ¡ 
TMVA
::
Ev’t
*> >::
™”©Ü
 
pIt
 = 
fNÜm®izeT»eTabË
.
	`begš
();

104 
pIt
 !ğ
fNÜm®izeT»eTabË
.
	`’d
();…It++) {

105 
d–‘e
 
pIt
->
£cÚd
;

107 
	}
}

112 
	gTMVA
::
Bš¬yS—rchT»e
* 
TMVA
::Bš¬yS—rchT»e::
	$C»©eFromXML
(* 
node
, 
UIÁ_t
 
tmva_V”siÚ_Code
 ) {

113 
¡d
::
¡ršg
 
	`ty³
("");

114 
	`gToŞs
().
	`R—dA‰r
(
node
,"ty³", 
ty³
);

115 
Bš¬yS—rchT»e
* 
bt
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

116 
bt
->
	`R—dXML
Ğ
node
, 
tmva_V”siÚ_Code
 );

117  
bt
;

118 
	}
}

123 
	gTMVA
::
Bš¬yS—rchT»e
::
	$In£¹
ĞcÚ¡ 
Ev’t
* 
ev’t
 )

125 
fCu¼’tD•th
=0;

126 
fSti¡icsIsV®id
 = 
kFALSE
;

128 ià(
this
->
	`G‘RoÙ
(è=ğ
NULL
) {

129 
this
->
	`S‘RoÙ
Ğ
Ãw
 
	`Bš¬yS—rchT»eNode
(
ev’t
));

131 
this
->
	`G‘RoÙ
()->
	`S‘Pos
('s');

132 
this
->
	`G‘RoÙ
()->
	`S‘D•th
(0);

133 
fNNodes
 = 1;

134 
fSumOfWeights
 = 
ev’t
->
	`G‘Weight
();

135 ((
Bš¬yS—rchT»eNode
*)
this
->
	`G‘RoÙ
())->
	`S‘S–eùÜ
((
UIÁ_t
)0);

136 
this
->
	`S‘P”iode
(
ev’t
->
	`G‘NV¬ŸbËs
());

140 ià(
ev’t
->
	`G‘NV¬ŸbËs
(è!ğ(
UIÁ_t
)
this
->
	`G‘P”iode
()) {

141 
	`Log
(è<< 
kFATAL
 << "<In£¹>ƒv’ˆveùÜ†’gth !ğP”iod¥ecif›d iÀBš¬y T»e" << 
Endl


142 << "---ƒv’ˆsize: " << 
ev’t
->
	`G‘NV¬ŸbËs
(è<< " P”iode: " << 
this
->
	`G‘P”iode
(è<< 
Endl


143 << "---‡nd‡Îhi wh’ryšg flšgh"<<
fNNodes
+1<<"th Node" << 
Endl
;

146 
this
->
	`In£¹
(
ev’t
,his->
	`G‘RoÙ
());

150 ià(
fCªNÜm®ize
è
fNÜm®izeT»eTabË
.
	`push_back
Ğ
¡d
::
	`make_·œ
(0.0,
Ãw
 cÚ¡ 
	`Ev’t
(*
ev’t
)) );

151 
	}
}

156 
	gTMVA
::
Bš¬yS—rchT»e
::
	$In£¹
ĞcÚ¡ 
Ev’t
 *
ev’t
,

157 
Node
 *
node
 )

159 
fCu¼’tD•th
++;

160 
fSti¡icsIsV®id
 = 
kFALSE
;

162 ià(
node
->
	`GÛsLeá
(*
ev’t
)){

163 ià(
node
->
	`G‘Leá
(è!ğ
NULL
){

165 
this
->
	`In£¹
(
ev’t
, 
node
->
	`G‘Leá
());

169 
Bš¬yS—rchT»eNode
* 
cu¼’t
 = 
Ãw
 
	`Bš¬yS—rchT»eNode
(
ev’t
);

170 
fNNodes
++;

171 
fSumOfWeights
 +ğ
ev’t
->
	`G‘Weight
();

172 
cu¼’t
->
	`S‘S–eùÜ
(
fCu¼’tD•th
%((
IÁ_t
)
ev’t
->
	`G‘NV¬ŸbËs
()));

173 
cu¼’t
->
	`S‘P¬’t
(
node
);

174 
cu¼’t
->
	`S‘Pos
('l');

175 
cu¼’t
->
	`S‘D•th
Ğ
node
->
	`G‘D•th
() + 1 );

176 
node
->
	`S‘Leá
(
cu¼’t
);

179 ià(
node
->
	`GÛsRight
(*
ev’t
)) {

180 ià(
node
->
	`G‘Right
(è!ğ
NULL
) {

182 
this
->
	`In£¹
(
ev’t
, 
node
->
	`G‘Right
());

186 
Bš¬yS—rchT»eNode
* 
cu¼’t
 = 
Ãw
 
	`Bš¬yS—rchT»eNode
(
ev’t
);

187 
fNNodes
++;

188 
fSumOfWeights
 +ğ
ev’t
->
	`G‘Weight
();

189 
cu¼’t
->
	`S‘S–eùÜ
(
fCu¼’tD•th
%((
IÁ_t
)
ev’t
->
	`G‘NV¬ŸbËs
()));

190 
cu¼’t
->
	`S‘P¬’t
(
node
);

191 
cu¼’t
->
	`S‘Pos
('r');

192 
cu¼’t
->
	`S‘D•th
Ğ
node
->
	`G‘D•th
() + 1 );

193 
node
->
	`S‘Right
(
cu¼’t
);

196 
	`Log
(è<< 
kFATAL
 << "<In£¹>‚e™h”†eá‚Ü„ighˆ:)" << 
Endl
;

197 
	}
}

202 
	gTMVA
::
Bš¬yS—rchT»eNode
* 
TMVA
::
Bš¬yS—rchT»e
::
	$S—rch
Ğ
Ev’t
* 
ev’t
 ) const

204  
this
->
	`S—rch
Ğ
ev’t
,his->
	`G‘RoÙ
() );

205 
	}
}

210 
	gTMVA
::
Bš¬yS—rchT»eNode
* 
TMVA
::
Bš¬yS—rchT»e
::
	$S—rch
(
Ev’t
* 
ev’t
, 
Node
* 
node
) const

212 ià(
node
 !ğ
NULL
) {

214 ià(((
Bš¬yS—rchT»eNode
*)(
node
))->
	`Equ®sMe
(*
ev’t
))

215  (
Bš¬yS—rchT»eNode
*)
node
;

216 ià(
node
->
	`GÛsLeá
(*
ev’t
))

217  
this
->
	`S—rch
(
ev’t
, 
node
->
	`G‘Leá
());

219  
this
->
	`S—rch
(
ev’t
, 
node
->
	`G‘Right
());

221  
NULL
;

222 
	}
}

227 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
	$G‘SumOfWeights
( ) const

229 ià(
fSumOfWeights
 <= 0) {

230 
	`Log
(è<< 
kWARNING
 << "you‡sked forhe SumOfWeights, which is‚ot filled yet"

232 << 
Endl
;

234 ià(
fSumOfWeights
 <ğ0è
	`Log
(è<< 
kFATAL
 << " Z”Øev’t š you¸S—rch T»e" <<
Endl
;

236  
fSumOfWeights
;

237 
	}
}

242 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
	$G‘SumOfWeights
Ğ
IÁ_t
 
theTy³
 ) const

244 ià(
fSumOfWeights
 <= 0) {

245 
	`Log
(è<< 
kWARNING
 << "you‡sked forhe SumOfWeights, which is‚ot filled yet"

247 << 
Endl
;

249 ià(
fSumOfWeights
 <ğ0è
	`Log
(è<< 
kFATAL
 << " Z”Øev’t š you¸S—rch T»e" <<
Endl
;

251  
fNEv’tsW
[ ( 
theTy³
 =ğ
Ty³s
::
kSigÇl
) ? 0 : 1 ];

252 
	}
}

258 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
Fl
ĞcÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
, cÚ¡ std::veùÜ<
IÁ_t
>& 
theV¬s
,

259 
IÁ_t
 
theTy³
 )

261 
	gfP”iod
 = 
theV¬s
.
size
();

262  
Fl
(
ev’ts
, 
theTy³
);

269 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
Fl
ĞcÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
, 
IÁ_t
 
theTy³
 )

271 
UIÁ_t
 
	gn
=
ev’ts
.
size
();

273 
UIÁ_t
 
	gÃv’ts
 = 0;

274 ià(
	gfSumOfWeights
 != 0) {

275 
Log
(è<< 
kWARNING


278 << 
Endl
;

280 
UIÁ_t
 
	g›vt
=0; ievt<
	gn
; ievt++) {

282 ià(
	gtheTy³
 =ğ-1 || (
IÁ_t
(
ev’ts
[
›vt
]->
G‘CÏss
()è=ğ
theTy³
) ) {

283 
this
->
In£¹
Ğ
ev’ts
[
›vt
] );

284 
	gÃv’ts
++;

285 
	gfSumOfWeights
 +ğ
ev’ts
[
›vt
]->
G‘Weight
();

288 
C®cSti¡ics
(0);

290  
	gfSumOfWeights
;

297 
	gTMVA
::
Bš¬yS—rchT»e
::
NÜm®izeT»e
 ( 
¡d
::
veùÜ
< std::
·œ
<
DoubË_t
, cÚ¡ 
TMVA
::
Ev’t
*> >::
™”©Ü
 
ËáBound
,

298 
¡d
::
veùÜ
< std::
·œ
<
DoubË_t
, cÚ¡ 
TMVA
::
Ev’t
*> >::
™”©Ü
 
rightBound
,

299 
UIÁ_t
 
aùDim
 )

302 ià(
	gËáBound
 =ğ
rightBound
) ;

304 ià(
	gaùDim
 =ğ
fP”iod
è
aùDim
 = 0;

305 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
DoubË_t
, cÚ¡ 
	gTMVA
::
Ev’t
*> >::
™”©Ü
 
i
=
ËáBound
; 
	gi
!=
rightBound
; i++) {

306 
	gi
->
	gfœ¡
 = 
i
->
£cÚd
->
G‘V®ue
Ğ
aùDim
 );

309 
	g¡d
::
sÜt
Ğ
ËáBound
, 
rightBound
 );

311 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
DoubË_t
, cÚ¡ 
	gTMVA
::
Ev’t
*> >::
™”©Ü
 
ËáTemp
 = 
ËáBound
;

312 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
DoubË_t
, cÚ¡ 
	gTMVA
::
Ev’t
*> >::
™”©Ü
 
rightTemp
 = 
rightBound
;

315 
	gŒue
) {

316 
	grightTemp
--;

317 ià(
	grightTemp
 =ğ
ËáTemp
 ) {

320 
	gËáTemp
++;

321 ià(
	gËáTemp
 =ğ
rightTemp
) {

326 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
DoubË_t
, cÚ¡ 
	gTMVA
::
Ev’t
*> >::
™”©Ü
 
mid
 = 
ËáTemp
;

327 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
DoubË_t
, cÚ¡ 
	gTMVA
::
Ev’t
*> >::
™”©Ü
 
midTemp
 = 
mid
;

329 ià(
	gmid
!=
ËáBound
è
midTemp
--;

331 
	gmid
 !ğ
ËáBound
 && 
mid
->
£cÚd
->
G‘V®ue
Ğ
aùDim
 ) =ğ
midTemp
->second->GetValue(‡ctDim )) {

332 
mid
--;

333 
	gmidTemp
--;

336 
In£¹
Ğ
mid
->
£cÚd
 );

341 
NÜm®izeT»e
Ğ
ËáBound
, 
mid
, 
aùDim
+1 );

342 
	gmid
++;

345 
NÜm®izeT»e
Ğ
mid
, 
rightBound
, 
aùDim
+1 );

354 
	gTMVA
::
Bš¬yS—rchT»e
::
	$NÜm®izeT»e
()

356 
	`S‘NÜm®ize
Ğ
kFALSE
 );

357 
	`CË¬
Ğ
NULL
 );

358 
this
->
	`S‘RoÙ
(
NULL
);

359 
	`NÜm®izeT»e
Ğ
fNÜm®izeT»eTabË
.
	`begš
(), fNÜm®izeT»eTabË.
	`’d
(), 0 );

360 
	}
}

365 
	gTMVA
::
Bš¬yS—rchT»e
::
	$CË¬
Ğ
Node
* 
n
 )

367 
Bš¬yS—rchT»eNode
* 
cu¼’tNode
 = (Bš¬yS—rchT»eNode*)(
n
 =ğ
NULL
 ? 
this
->
	`G‘RoÙ
() :‚);

369 ià(
cu¼’tNode
->
	`G‘Leá
(è!ğ0è
	`CË¬
( currentNode->GetLeft() );

370 ià(
cu¼’tNode
->
	`G‘Right
(è!ğ0è
	`CË¬
( currentNode->GetRight() );

372 ià(
n
 !ğ
NULL
è
d–‘e
‚;

375 
	}
}

381 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
S—rchVŞume
Ğ
VŞume
* 
vŞume
,

382 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>* 
ev’ts
 )

384  
S—rchVŞume
Ğ
this
->
G‘RoÙ
(), 
vŞume
, 0, 
ev’ts
 );

391 
DoubË_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
S—rchVŞume
Ğ
Node
* 
t
, 
VŞume
* 
vŞume
, 
IÁ_t
 
d•th
,

392 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>* 
ev’ts
 )

394 ià(
t
==
NULL
)  0;

396 
Bš¬yS—rchT»eNode
* 
	g¡
 = (Bš¬yS—rchT»eNode*)
t
;

398 
DoubË_t
 
	gcouÁ
 = 0.0;

399 ià(
InVŞume
Ğ
¡
->
G‘Ev’tV
(), 
vŞume
 )) {

400 
	gcouÁ
 +ğ
¡
->
G‘Weight
();

401 ià(
	gNULL
 !ğ
ev’ts
èev’ts->
push_back
Ğ
¡
 );

403 ià(
	g¡
->
G‘Leá
()==
NULL
 && 
¡
->
G‘Right
()==NULL) {

405  
couÁ
;

408 
BoŞ_t
 
	g
, 
	gŒ
;

409 
IÁ_t
 
	gd
 = 
d•th
%
this
->
G‘P”iode
();

410 ià(
	gd
 !ğ
¡
->
G‘S–eùÜ
()) {

411 
Log
(è<< 
kFATAL
 << "<SearchVolume> selector in Searchvolume "

412 << 
d
 << " !ğ" << "nod"<< 
¡
->
G‘S–eùÜ
(è<< 
Endl
;

414 
	g
 = (*(
vŞume
->
fLow”
))[
d
] < 
¡
->
G‘Ev’tV
()[d];

415 
	gŒ
 = (*(
vŞume
->
fUµ”
))[
d
] >ğ
¡
->
G‘Ev’tV
()[d];

417 ià(
	g
è
	gcouÁ
 +ğ
S—rchVŞume
Ğ
¡
->
G‘Leá
(), 
vŞume
, (
d•th
+1), 
ev’ts
 );

418 ià(
	gŒ
è
	gcouÁ
 +ğ
S—rchVŞume
Ğ
¡
->
G‘Right
(), 
vŞume
, (
d•th
+1), 
ev’ts
 );

420  
	gcouÁ
;

426 
BoŞ_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
InVŞume
(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
ev’t
, 
VŞume
* 
vŞume
 ) const

429 
BoŞ_t
 
	g»suÉ
 = 
çl£
;

430 
UIÁ_t
 
	giv¬
=0; iv¬< 
	gfP”iod
; ivar++) {

431 
	g»suÉ
 = ( (*(
vŞume
->
fLow”
))[
iv¬
] < 
ev’t
[ivar] &&

432 (*(
vŞume
->
fUµ”
))[
iv¬
] >ğ
ev’t
[ivar] );

433 ià(!
	g»suÉ
) ;

435  
	g»suÉ
;

441 
	gTMVA
::
Bš¬yS—rchT»e
::
	$C®cSti¡ics
Ğ
Node
* 
n
 )

443 ià(
fSti¡icsIsV®id
) ;

445 
Bš¬yS—rchT»eNode
 * 
cu¼’tNode
 = (Bš¬yS—rchT»eNode*)
n
;

448 ià(
n
 =ğ
NULL
) {

449 
fSumOfWeights
 = 0;

450 
IÁ_t
 
sb
=0; sb<2; sb++) {

451 
fNEv’tsW
[
sb
] = 0;

452 
fM—ns
[
sb
] = 
¡d
::
veùÜ
<
Flßt_t
>(
fP”iod
);

453 
fRMS
[
sb
] = 
¡d
::
veùÜ
<
Flßt_t
>(
fP”iod
);

454 
fMš
[
sb
] = 
¡d
::
veùÜ
<
Flßt_t
>(
fP”iod
);

455 
fMax
[
sb
] = 
¡d
::
veùÜ
<
Flßt_t
>(
fP”iod
);

456 
fSum
[
sb
] = 
¡d
::
veùÜ
<
DoubË_t
>(
fP”iod
);

457 
fSumSq
[
sb
] = 
¡d
::
veùÜ
<
DoubË_t
>(
fP”iod
);

458 
UIÁ_t
 
j
=0; j<
fP”iod
; j++) {

459 
fM—ns
[
sb
][
j
] = 
fRMS
[sb][j] = 
fSum
[sb][j] = 
fSumSq
[sb][j] = 0;

460 
fMš
[
sb
][
j
] = 
FLT_MAX
;

461 
fMax
[
sb
][
j
] = -
FLT_MAX
;

464 
cu¼’tNode
 = (
Bš¬yS—rchT»eNode
*è
this
->
	`G‘RoÙ
();

465 ià(
cu¼’tNode
 =ğ
NULL
) ;

468 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> & 
evtVec
 = 
cu¼’tNode
->
	`G‘Ev’tV
();

469 
DoubË_t
 
weight
 = 
cu¼’tNode
->
	`G‘Weight
();

472 
IÁ_t
 
ty³
 = 
	`IÁ_t
(
cu¼’tNode
->
	`G‘CÏss
())=ğ
Ty³s
::
kSigÇl
 ? 0 : 1;

474 
fNEv’tsW
[
ty³
] +ğ
weight
;

475 
fSumOfWeights
 +ğ
weight
;

477 
UIÁ_t
 
j
=0; j<
fP”iod
; j++) {

478 
Flßt_t
 
v®
 = 
evtVec
[
j
];

479 
fSum
[
ty³
][
j
] +ğ
v®
*
weight
;

480 
fSumSq
[
ty³
][
j
] +ğ
v®
*v®*
weight
;

481 ià(
v®
 < 
fMš
[
ty³
][
j
]) fMin[type][j] = val;

482 ià(
v®
 > 
fMax
[
ty³
][
j
]) fMax[type][j] = val;

485 iàĞ(
cu¼’tNode
->
	`G‘Leá
(è!ğ
NULL
èè
	`C®cSti¡ics
( currentNode->GetLeft() );

486 iàĞ(
cu¼’tNode
->
	`G‘Right
(è!ğ
NULL
èè
	`C®cSti¡ics
( currentNode->GetRight() );

488 ià(
n
 =ğ
NULL
) {

489 
IÁ_t
 
sb
=0; sb<2; sb++) {

490 
UIÁ_t
 
j
=0; j<
fP”iod
; j++) {

491 ià(
fNEv’tsW
[
sb
] =ğ0è{ 
fM—ns
[sb][
j
] = 
fRMS
[sb][j] = 0; ; }

492 
fM—ns
[
sb
][
j
] = 
fSum
[sb][j]/
fNEv’tsW
[sb];

493 
fRMS
[
sb
][
j
] = 
TM©h
::
	`Sq¹
(
fSumSq
[sb][j]/
fNEv’tsW
[sb] - 
fM—ns
[sb][j]*fMeans[sb][j]);

496 
fSti¡icsIsV®id
 = 
kTRUE
;

500 
	}
}

506 
IÁ_t
 
	gTMVA
::
Bš¬yS—rchT»e
::
S—rchVŞumeW™hMaxLim™
Ğ
VŞume
 *
vŞume
, 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>* 
ev’ts
,

507 
IÁ_t
 
max_pošts
 )

509 ià(
	gthis
->
G‘RoÙ
(è=ğ
NULL
)  0;

511 
	g¡d
::
queue
< 
¡d
::
·œ
< cÚ¡ 
Bš¬yS—rchT»eNode
*, 
	gIÁ_t
 > > 
	gqueue
;

512 
	g¡d
::
·œ
< cÚ¡ 
Bš¬yS—rchT»eNode
*, 
	gIÁ_t
 > 
	g¡
 = 
¡d
::
make_·œ
Ğ(cÚ¡ Bš¬yS—rchT»eNode*)
this
->
G‘RoÙ
(), 0 );

513 
	gqueue
.
push
Ğ
¡
 );

515 
IÁ_t
 
	gcouÁ
 = 0;

517  !
	gqueue
.
em±y
() ) {

518 
	g¡
 = 
queue
.
äÚt
(); 
	gqueue
.
pİ
();

520 ià(
	gcouÁ
 =ğ
max_pošts
)

521  
couÁ
;

523 ià(
InVŞume
Ğ
¡
.
fœ¡
->
G‘Ev’tV
(), 
vŞume
 )) {

524 
	gcouÁ
++;

525 ià(
	gNULL
 !ğ
ev’ts
èev’ts->
push_back
Ğ
¡
.
fœ¡
 );

528 
BoŞ_t
 
	g
, 
	gŒ
;

529 
IÁ_t
 
	gd
 = 
¡
.
£cÚd
;

530 iàĞ
	gd
 =ğ
IÁ_t
(
this
->
G‘P”iode
()èè
d
 = 0;

532 ià(
	gd
 !ğ
¡
.
fœ¡
->
G‘S–eùÜ
()) {

533 
Log
(è<< 
kFATAL
 << "<SearchVolume> selector in Searchvolume "

534 << 
d
 << " !ğ" << "nod"<< 
¡
.
fœ¡
->
G‘S–eùÜ
(è<< 
Endl
;

537 
	g
 = (*(
vŞume
->
fLow”
))[
d
] < 
¡
.
fœ¡
->
G‘Ev’tV
()[d] && st.fœ¡->
G‘Leá
(è!ğ
NULL
;

538 
	gŒ
 = (*(
vŞume
->
fUµ”
))[
d
] >ğ
¡
.
fœ¡
->
G‘Ev’tV
()[d] && st.fœ¡->
G‘Right
(è!ğ
NULL
;

540 ià(
	g
è
	gqueue
.
push
Ğ
¡d
::
make_·œ
Ğ(cÚ¡ 
Bš¬yS—rchT»eNode
*)
¡
.
fœ¡
->
G‘Leá
(), 
d
+1 ) );

541 ià(
	gŒ
è
	gqueue
.
push
Ğ
¡d
::
make_·œ
Ğ(cÚ¡ 
Bš¬yS—rchT»eNode
*)
¡
.
fœ¡
->
G‘Right
(), 
d
+1 ) );

544  
	gcouÁ
;

	@src/BinarySearchTreeNode.cxx

41 
	~<¡dexû±
>

42 
	~<iomª
>

43 
	~<as£¹.h
>

44 
	~<c¡dlib
>

46 
	~"TSŒšg.h
"

48 
	~"TMVA/Bš¬yS—rchT»eNode.h
"

49 
	~"TMVA/Ev’t.h
"

50 
	~"TMVA/MsgLogg”.h
"

51 
	~"TMVA/Node.h
"

52 
	~"TMVA/ToŞs.h
"

54 
CÏssImp
(
TMVA
::
Bš¬yS—rchT»eNode
);

59 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$Bš¬yS—rchT»eNode
ĞcÚ¡ 
Ev’t
* 
e
, 
UIÁ_t
 )

60 : 
TMVA
::
	`Node
(),

61 
	`fEv’tV
 ( 
¡d
::
veùÜ
<
Flßt_t
>() ),

62 
	`fT¬g‘s
 ( 
¡d
::
veùÜ
<
Flßt_t
>() ),

63 
	`fWeight
 ( 
e
==0?0:e->
	`G‘Weight
() ),

64 
	`fCÏss
 ( 
e
==0?0:e->
	`G‘CÏss
() ),

65 
	`fS–eùÜ
( -1 )

67 ià(
e
!=0) {

68 
UIÁ_t
 
iv¬
=0; iv¬<
e
->
	`G‘NV¬ŸbËs
(); iv¬++è
fEv’tV
.
	`push_back
Ó->
	`G‘V®ue
(ivar));

69 
¡d
::
veùÜ
<
Flßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
e
->
	`G‘T¬g‘s
().
	`begš
(); iˆ<ƒ->G‘T¬g‘s().
	`’d
(); it++ ) {

70 
fT¬g‘s
.
	`push_back
Ğ(*
™
) );

73 
	}
}

78 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$Bš¬yS—rchT»eNode
Ğ
Bš¬yS—rchT»eNode
* 
·»Á
, 
pos
 ) :

79 
TMVA
::
	`Node
(
·»Á
,
pos
),

80 
	`fEv’tV
 ( 
¡d
::
veùÜ
<
Flßt_t
>() ),

81 
	`fT¬g‘s
 ( 
¡d
::
veùÜ
<
Flßt_t
>() ),

82 
	`fWeight
 ( 0 ),

83 
	`fCÏss
 ( 0 ),

84 
	`fS–eùÜ
( -1 )

86 
	}
}

92 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$Bš¬yS—rchT»eNode
 ( cÚ¡ 
Bš¬yS—rchT»eNode
 &
n
,

93 
Bš¬yS—rchT»eNode
* 
·»Á
 ) :

94 
TMVA
::
	`Node
(
n
),

95 
	`fEv’tV
 ( 
n
.
fEv’tV
 ),

96 
	`fT¬g‘s
 ( 
n
.
fT¬g‘s
 ),

97 
	`fWeight
 ( 
n
.
fWeight
 ),

98 
	`fCÏss
 ( 
n
.
fCÏss
 ),

99 
	$fS–eùÜ
Ğ
n
.
fS–eùÜ
 )

101 
this
->
	`S‘P¬’t
Ğ
·»Á
 );

102 ià(
n
.
	`G‘Leá
(è=ğ0 ) 
this
->
	`S‘Leá
(
NULL
);

103 
this
->
	`S‘Leá
Ğ
Ãw
 
	`Bš¬yS—rchT»eNode
Ğ*((
Bš¬yS—rchT»eNode
*)(
n
.
	`G‘Leá
())),this));

105 ià(
n
.
	`G‘Right
(è=ğ0 ) 
this
->
	`S‘Right
(
NULL
);

106 
this
->
	`S‘Right
Ğ
Ãw
 
	`Bš¬yS—rchT»eNode
Ğ*((
Bš¬yS—rchT»eNode
*)(
n
.
	`G‘Right
())),this));

108 
	}
}

113 
	gTMVA
::
Bš¬yS—rchT»eNode
::~
	$Bš¬yS—rchT»eNode
()

115 
	}
}

120 
BoŞ_t
 
TMVA
::
Bš¬yS—rchT»eNode
::
	$GÛsRight
ĞcÚ¡ 
TMVA
::
Ev’t
& 
e
 ) const

122 ià(
e
.
	`G‘V®ue
(
fS–eùÜ
è> 
	`G‘Ev’tV
()[fS–eùÜ]è 
Œue
;

123  
çl£
;

124 
	}
}

129 
BoŞ_t
 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$GÛsLeá
(cÚ¡ 
TMVA
::
Ev’t
& 
e
) const

131 ià(
e
.
	`G‘V®ue
(
fS–eùÜ
è<ğ
	`G‘Ev’tV
()[fS–eùÜ]è 
Œue
;

132  
çl£
;

133 
	}
}

139 
BoŞ_t
 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$Equ®sMe
(cÚ¡ 
TMVA
::
Ev’t
& 
e
) const

141 
BoŞ_t
 
»suÉ
 = 
Œue
;

142 
UIÁ_t
 
i
=0; i<
	`G‘Ev’tV
().
	`size
(); i++) {

143 
»suÉ
&ğ(
e
.
	`G‘V®ue
(
i
è=ğ
	`G‘Ev’tV
()[i]);

145  
»suÉ
;

146 
	}
}

151 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$Pršt
Ğ
¡d
::
o¡»am
& 
os
 ) const

153 
os
 << "< *** " << 
¡d
::
’dl
 << "‚ode.Data: ";

154 
¡d
::
veùÜ
<
Flßt_t
>::
cÚ¡_™”©Ü
 
™
=
fEv’tV
.
	`begš
();

155 
os
 << 
fEv’tV
.
	`size
() << " vars: ";

156 ;
™
!=
fEv’tV
.
	`’d
(); it++è
os
 << " " << 
¡d
::
	`£tw
(10) << *it;

157 
os
 << " EvtWeighˆ" << 
¡d
::
	`£tw
(10è<< 
fWeight
;

158 
os
 << 
¡d
::
	`£tw
(10è<< "CÏss: " << 
	`G‘CÏss
(è<< std::
’dl
;

160 
os
 << "S–eùÜ: " << 
this
->
	`G‘S–eùÜ
(è<<
¡d
::
’dl
;

161 
os
 << "My‡dd»s i " << (
this
) << ", ";

162 ià(
this
->
	`G‘P¬’t
(è!ğ
NULL
è
os
 << "…arent‡t‡ddr: " << (this->GetParent()) ;

163 ià(
this
->
	`G‘Leá
(è!ğ
NULL
è
os
 << "†eft daughter‡t‡ddr: " << (this->GetLeft());

164 ià(
this
->
	`G‘Right
(è!ğ
NULL
è
os
 << "„ight daughter‡t‡ddr: " << (this->GetRight()) ;

166 
os
 << " **** > "<< 
¡d
::
’dl
;

167 
	}
}

172 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$PrštRec
Ğ
¡d
::
o¡»am
& 
os
 ) const

174 
os
 << 
this
->
	`G‘D•th
(è<< " " <<his->
	`G‘Pos
(è<< " " <<his->
	`G‘S–eùÜ
()

175 << " d©a: " << 
¡d
::
’dl
;

176 
¡d
::
veùÜ
<
Flßt_t
>::
cÚ¡_™”©Ü
 
™
=
fEv’tV
.
	`begš
();

177 
os
 << 
fEv’tV
.
	`size
() << " vars: ";

178 ;
™
!=
fEv’tV
.
	`’d
(); it++è
os
 << " " << 
¡d
::
	`£tw
(10) << *it;

179 
os
 << " EvtWeighˆ" << 
¡d
::
	`£tw
(10è<< 
fWeight
;

180 
os
 << 
¡d
::
	`£tw
(10è<< "CÏss: " << 
	`G‘CÏss
(è<< std::
’dl
;

182 ià(
this
->
	`G‘Leá
(è!ğ
NULL
éhis->G‘Leá()->
	`PrštRec
(
os
) ;

183 ià(
this
->
	`G‘Right
(è!ğ
NULL
éhis->G‘Right()->
	`PrštRec
(
os
);

184 
	}
}

189 
BoŞ_t
 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$R—dD©aRecÜd
Ğ
¡d
::
i¡»am
& 
is
, 
UIÁ_t
 )

191 
IÁ_t
 
™mp
;

192 
¡d
::
¡ršg
 
tmp
;

193 
UIÁ_t
 
d•th
, 
£lIdx
, 
nv¬
;

194 
Ch¬_t
 
pos
;

195 
TSŒšg
 
sigbkgd
;

196 
Flßt_t
 
evtV®Flßt
;

199 
is
 >> 
™mp
;

200 iàĞ
™mp
==-1 ) {  
kFALSE
; }

202 
d•th
=(
UIÁ_t
)
™mp
;

203 
is
 >> 
pos
 >> 
£lIdx
;

204 
this
->
	`S‘D•th
(
d•th
);

205 
this
->
	`S‘Pos
(
pos
);

206 
this
->
	`S‘S–eùÜ
(
£lIdx
);

210 
is
 >> 
nv¬
;

211 
fEv’tV
.
	`ş—r
();

212 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

213 
is
 >> 
evtV®Flßt
; 
fEv’tV
.
	`push_back
(evtValFloat);

215 
is
 >> 
tmp
 >> 
fWeight
;

216 
is
 >> 
sigbkgd
;

217 
fCÏss
 = (
sigbkgd
=="S" || sigbkgd=="Signal")?0:1;

219  
kTRUE
;

220 
	}
}

225 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$R—dA‰ribu‹s
(* 
node
, 
UIÁ_t
 )

227 
	`gToŞs
().
	`R—dA‰r
(
node
, "£ËùÜ", 
fS–eùÜ
 );

228 
	`gToŞs
().
	`R—dA‰r
(
node
, "weight", 
fWeight
 );

229 
¡d
::
¡ršg
 
sb
;

230 
	`gToŞs
().
	`R—dA‰r
(
node
, "ty³", 
sb
);

231 ià(
sb
=="Signal" || sb=="0")

232 
fCÏss
=0;

233 ià(
sb
=="1")

234 
fCÏss
=1;

236 
IÁ_t
 
nv¬s
;

237 
	`gToŞs
().
	`R—dA‰r
(
node
, "NV¬s",
nv¬s
);

238 
fEv’tV
.
	`»size
(
nv¬s
);

239 
	}
}

245 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$AddA‰ribu‹sToNode
(* 
node
) const {

246 
	`gToŞs
().
	`AddA‰r
(
node
, "£ËùÜ", 
fS–eùÜ
 );

247 
	`gToŞs
().
	`AddA‰r
(
node
, "weight", 
fWeight
 );

249 
	`gToŞs
().
	`AddA‰r
(
node
, "ty³", 
	`G‘CÏss
());

250 
	`gToŞs
().
	`AddA‰r
(
node
, "NV¬s", 
fEv’tV
.
	`size
());

251 
	}
}

257 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$AddCÚ‹ÁToNode
Ğ
¡d
::
¡ršg¡»am
& 
s
 ) const

259 
¡d
::
ios_ba£
::
fmtæags
 
ff
 = 
s
.
	`æags
();

260 
s
.
	`´ecisiÚ
( 16 );

261 
UIÁ_t
 
i
=0; i<
fEv’tV
.
	`size
(); i++è
s
 << 
¡d
::
sc›Áific
 << " " << fEventV[i];

262 
UIÁ_t
 
i
=0; i<
fT¬g‘s
.
	`size
(); i++è
s
 << 
¡d
::
sc›Áific
 << " " << fTargets[i];

263 
s
.
	`æags
(
ff
);

264 
	}
}

268 
	gTMVA
::
Bš¬yS—rchT»eNode
::
	$R—dCÚ‹Á
Ğ
¡d
::
¡ršg¡»am
& 
s
 )

270 
Flßt_t
 
‹mp
=0;

271 
UIÁ_t
 
i
=0; i<
fEv’tV
.
	`size
(); i++){

272 
s
 >> 
‹mp
;

273 
fEv’tV
[
i
]=
‹mp
;

275 
s
 >> 
‹mp
è
fT¬g‘s
.
	`push_back
(temp);

276 
	}
}

	@src/BinaryTree.cxx

38 
	~<¡ršg
>

39 
	~<¡dexû±
>

41 
	~"Th»adLoÿlStÜage.h
"

43 
	~"TMVA/Bš¬yT»e.h
"

44 
	~"TMVA/MsgLogg”.h
"

45 
	~"TMVA/Ev’t.h
"

46 
	~"TMVA/Node.h
"

47 
	~"TMVA/ToŞs.h
"

48 
	~"TMVA/Ty³s.h
"

50 
CÏssImp
(
TMVA
::
Bš¬yT»e
);

55 
	gTMVA
::
Bš¬yT»e
::
	$Bš¬yT»e
( )

56 : 
	`fRoÙ
 ( 
NULL
 ),

57 
	`fNNodes
( 0 ),

58 
	$fD•th
 ( 0 )

60 
	}
}

65 
	gTMVA
::
Bš¬yT»e
::~
	$Bš¬yT»e
( )

67 
this
->
	`D–‘eNode
Ğ
fRoÙ
 );

68 
fRoÙ
=0;

69 
	}
}

74 
	gTMVA
::
Bš¬yT»e
::
	$D–‘eNode
Ğ
TMVA
::
Node
* 
node
 )

76 ià(
node
 !ğ
NULL
) {

77 
this
->
	`D–‘eNode
(
node
->
	`G‘Leá
());

78 
this
->
	`D–‘eNode
(
node
->
	`G‘Right
());

80 
d–‘e
 
node
;

82 
	}
}

87 
	gTMVA
::
Node
* 
TMVA
::
Bš¬yT»e
::
	$G‘LeáDaugh‹r
Ğ
Node
 *
n
)

89  (
Node
*è
n
->
	`G‘Leá
();

90 
	}
}

95 
	gTMVA
::
Node
* 
TMVA
::
Bš¬yT»e
::
	$G‘RightDaugh‹r
Ğ
Node
 *
n
)

97  (
Node
*è
n
->
	`G‘Right
();

98 
	}
}

103 
UIÁ_t
 
	gTMVA
::
Bš¬yT»e
::
	$CouÁNodes
(
TMVA
::
Node
 *
n
)

105 ià(
n
 =ğ
NULL
){

106 
n
 = (
Node
*)
this
->
	`G‘RoÙ
();

107 ià(
n
 =ğ
NULL
)  0 ;

110 
UIÁ_t
 
couÁNodes
=1;

112 ià(
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
){

113 
couÁNodes
 +ğ
this
->
	`CouÁNodes
Ğthis->
	`G‘LeáDaugh‹r
(
n
) );

115 ià(
this
->
	`G‘RightDaugh‹r
(
n
è!ğ
NULL
) {

116 
couÁNodes
 +ğ
this
->
	`CouÁNodes
Ğthis->
	`G‘RightDaugh‹r
(
n
) );

119  
fNNodes
 = 
couÁNodes
;

120 
	}
}

125 
	gTMVA
::
Bš¬yT»e
::
	$Pršt
(
¡d
::
o¡»am
 & 
os
) const

127 
this
->
	`G‘RoÙ
()->
	`PrštRec
(
os
);

128 
os
 << "-1" << 
¡d
::
’dl
;

129 
	}
}

134 * 
	gTMVA
::
Bš¬yT»e
::
	$AddXMLTo
(* 
·»Á
) const {

135 * 
bdt
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "BinaryTree");

136 
	`gToŞs
().
	`AddA‰r
Ğ
bdt
, "ty³" , 
	`CÏssName
() );

137 
this
->
	`G‘RoÙ
()->
	`AddXMLTo
(
bdt
);

138  
bdt
;

139 
	}
}

144 
	gTMVA
::
Bš¬yT»e
::
	$R—dXML
(* 
node
, 
UIÁ_t
 
tmva_V”siÚ_Code
 ) {

145 
this
->
	`D–‘eNode
Ğ
fRoÙ
 );

146 
fRoÙ
ğ
	`C»©eNode
();

148 * 
Œnode
 = 
	`gToŞs
().
	`G‘Chd
(
node
);

149 
fRoÙ
->
	`R—dXML
(
Œnode
, 
tmva_V”siÚ_Code
);

151 
this
->
	`S‘TÙ®T»eD•th
();

152 
	}
}

158 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<< (
¡d
::o¡»am& 
os
, cÚ¡ 
	gTMVA
::
Bš¬yT»e
& 
Œ“
)

160 
Œ“
.
Pršt
(
os
);

161  
	gos
;

169 
	gTMVA
::
Bš¬yT»e
::
	$R—d
(
¡d
::
i¡»am
 & 
i¡r
, 
UIÁ_t
 
tmva_V”siÚ_Code
 )

171 
Node
 * 
cu¼’tNode
 = 
	`G‘RoÙ
();

172 
Node
* 
·»Á
 = 0;

174 if(
cu¼’tNode
==0) {

175 
cu¼’tNode
=
	`C»©eNode
();

176 
	`S‘RoÙ
(
cu¼’tNode
);

180 iàĞ! 
cu¼’tNode
->
	`R—dD©aRecÜd
(
i¡r
, 
tmva_V”siÚ_Code
) ) {

181 
d–‘e
 
cu¼’tNode
;

182 
this
->
	`S‘TÙ®T»eD•th
();

187  
·»Á
!=0 &&…¬’t->
	`G‘D•th
(è!ğ
cu¼’tNode
->G‘D•th()-1è·»Áõ¬’t->
	`G‘P¬’t
();

189 ià(
·»Á
!=0) {

190 
cu¼’tNode
->
	`S‘P¬’t
(
·»Á
);

191 ià(
cu¼’tNode
->
	`G‘Pos
()=='l'è
·»Á
->
	`S‘Leá
(currentNode);

192 ià(
cu¼’tNode
->
	`G‘Pos
()=='r'è
·»Á
->
	`S‘Right
(currentNode);

195 
·»Á
 = 
cu¼’tNode
;

197 
cu¼’tNode
 = 
	`C»©eNode
();

199 
	}
}

204 
	g¡d
::
i¡»am
& 
TMVA
::
İ”©Ü
>> (
¡d
::i¡»am& 
i¡r
, 
	gTMVA
::
Bš¬yT»e
& 
Œ“
)

206 
Œ“
.
R—d
(
i¡r
);

207  
	gi¡r
;

213 
	gTMVA
::
Bš¬yT»e
::
	$S‘TÙ®T»eD•th
Ğ
Node
 *
n
)

215 ià(
n
 =ğ
NULL
){

216 
n
 = (
Node
*è
this
->
	`G‘RoÙ
();

217 ià(
n
 =ğ
NULL
) {

218 
	`Log
(è<< 
kFATAL
 << "S‘TÙ®T»eD•th: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

222 ià(
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
){

223 
this
->
	`S‘TÙ®T»eD•th
Ğthis->
	`G‘LeáDaugh‹r
(
n
) );

225 ià(
this
->
	`G‘RightDaugh‹r
(
n
è!ğ
NULL
) {

226 
this
->
	`S‘TÙ®T»eD•th
Ğthis->
	`G‘RightDaugh‹r
(
n
) );

228 ià(
n
->
	`G‘D•th
(è> 
this
->
	`G‘TÙ®T»eD•th
()èthis->
	`S‘TÙ®T»eD•th
(n->GetDepth());

231 
	}
}

235 
	gTMVA
::
MsgLogg”
& 
TMVA
::
Bš¬yT»e
::
	$Log
() const {

236 
	`TTHREAD_TLS_DECL_ARG
(
MsgLogg”
,
logg”
,"BinaryTree");

237  
logg”
;

238 
	}
}

	@src/CCPruner.cxx

22 
	~"TMVA/CCPruÃr.h
"

23 
	~"TMVA/S•¬©iÚBa£.h
"

24 
	~"TMVA/GšiIndex.h
"

25 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

26 
	~"TMVA/CCT»eW¿µ”.h
"

27 
	~"TMVA/D©aS‘.h
"

29 
	~"Rty³s.h
"

31 
	~<io¡»am
>

32 
	~<f¡»am
>

33 
	~<lim™s
>

34 
	~<m©h.h
>

60 
Çme¥aû
 
	gTMVA
 {

61 
şass
 
	gDecisiÚT»e
;

64 
usšg
 
Çme¥aû
 
	gTMVA
;

69 
	gCCPruÃr
::
	$CCPruÃr
Ğ
DecisiÚT»e
* 
t_max
, cÚ¡ 
Ev’tLi¡
* 
v®id©iÚSam¶e
,

70 
S•¬©iÚBa£
* 
qu®™yIndex
 ) :

71 
	`fAÍha
(-1.0),

72 
	`fV®id©iÚSam¶e
(
v®id©iÚSam¶e
),

73 
	`fV®id©iÚD©aS‘
(
NULL
),

74 
	`fO±im®K
(-1)

76 
fT»e
 = 
t_max
;

78 if(
qu®™yIndex
 =ğ
NULL
) {

79 
fOwnQIndex
 = 
Œue
;

80 
fQu®™yIndex
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

83 
fOwnQIndex
 = 
çl£
;

84 
fQu®™yIndex
 = 
qu®™yIndex
;

86 
fDebug
 = 
kTRUE
;

87 
	}
}

92 
	gCCPruÃr
::
	$CCPruÃr
Ğ
DecisiÚT»e
* 
t_max
, cÚ¡ 
D©aS‘
* 
v®id©iÚSam¶e
,

93 
S•¬©iÚBa£
* 
qu®™yIndex
 ) :

94 
	`fAÍha
(-1.0),

95 
	`fV®id©iÚSam¶e
(
NULL
),

96 
	`fV®id©iÚD©aS‘
(
v®id©iÚSam¶e
),

97 
	`fO±im®K
(-1)

99 
fT»e
 = 
t_max
;

101 if(
qu®™yIndex
 =ğ
NULL
) {

102 
fOwnQIndex
 = 
Œue
;

103 
fQu®™yIndex
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

106 
fOwnQIndex
 = 
çl£
;

107 
fQu®™yIndex
 = 
qu®™yIndex
;

109 
fDebug
 = 
kTRUE
;

110 
	}
}

115 
	gCCPruÃr
::~
	$CCPruÃr
( )

117 if(
fOwnQIndex
è
d–‘e
 
fQu®™yIndex
;

119 
	}
}

124 
	gCCPruÃr
::
	$O±imize
( )

126 
BoŞ_t
 
HaveStİCÚd™iÚ
 = 
fAÍha
 > 0;

129 
CCT»eW¿µ”
* 
dTW¿µ”
 = 
Ãw
 
	`CCT»eW¿µ”
(
fT»e
, 
fQu®™yIndex
);

131 
IÁ_t
 
k
 = 0;

132 
DoubË_t
 
•sÚ
 = 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
();

133 
DoubË_t
 
®pha
 = -1.0e10;

135 
¡d
::
of¡»am
 
outfe
;

136 ià(
fDebug
è
outfe
.
	`İ’
("costcomplexity.log");

137 if(!
HaveStİCÚd™iÚ
 && (
fV®id©iÚSam¶e
 =ğ
NULL
 && 
fV®id©iÚD©aS‘
 == NULL) ) {

138 ià(
fDebug
è
outfe
 << "ERROR:‚Øv®id©iÚ sam¶e, sØÿÂÙ o±imiz´unšg!" << 
¡d
::
’dl
;

139 
d–‘e
 
dTW¿µ”
;

140 ià(
fDebug
è
outfe
.
	`şo£
();

144 
CCT»eW¿µ”
::
CCT»eNode
* 
R
 = 
dTW¿µ”
->
	`G‘RoÙ
();

145 
R
->
	`G‘NL—fDaugh‹rs
() > 1) {

146 if(
R
->
	`G‘MšAÍhaC
(è> 
®pha
)

147 
®pha
 = 
R
->
	`G‘MšAÍhaC
();

149 if(
HaveStİCÚd™iÚ
 && 
®pha
 > 
fAÍha
) ;

151 
CCT»eW¿µ”
::
CCT»eNode
* 
t
 = 
R
;

153 
t
->
	`G‘MšAÍhaC
(è<->
	`G‘AÍhaC
()) {

155 if(
	`çbs
(
t
->
	`G‘MšAÍhaC
(è-->
	`G‘LeáDaugh‹r
()->G‘MšAÍhaC())/çbsÑ->G‘MšAÍhaC()è< 
•sÚ
)

156 
t
 =->
	`G‘LeáDaugh‹r
();

158 
t
 =->
	`G‘RightDaugh‹r
();

161 ifĞ
t
 =ğ
R
 ) {

162 ià(
fDebug
è
outfe
 << 
¡d
::
’dl
 << "Caughtryingo…runehe„oot‚ode!" << std::endl;

166 
CCT»eW¿µ”
::
CCT»eNode
* 
n
 = 
t
;

168 ià(
fDebug
){

169 
outfe
 << "===========================" << 
¡d
::
’dl


170 << "Prunšg b¿nch†i¡ed b–ow" << 
¡d
::
’dl


171 << "===========================" << 
¡d
::
’dl
;

172 
t
->
	`PrštRec
Ğ
outfe
 );

175 ià(!(
t
->
	`G‘LeáDaugh‹r
()è&& !Ñ->
	`G‘RightDaugh‹r
()) ) {

178 
dTW¿µ”
->
	`PruÃNode
(
t
);

180 
t
 !ğ
R
) {

181 
t
 =->
	`G‘MÙh”
();

182 
t
->
	`S‘NL—fDaugh‹rs
Ñ->
	`G‘LeáDaugh‹r
()->
	`G‘NL—fDaugh‹rs
(è+->
	`G‘RightDaugh‹r
()->GetNLeafDaughters());

183 
t
->
	`S‘Resub¡™utiÚE¡im©e
Ñ->
	`G‘LeáDaugh‹r
()->
	`G‘Resub¡™utiÚE¡im©e
() +

184 
t
->
	`G‘RightDaugh‹r
()->
	`G‘Resub¡™utiÚE¡im©e
());

185 
t
->
	`S‘AÍhaC
(Ñ->
	`G‘NodeResub¡™utiÚE¡im©e
(è-->
	`G‘Resub¡™utiÚE¡im©e
())/Ñ->
	`G‘NL—fDaugh‹rs
() - 1));

186 
t
->
	`S‘MšAÍhaC
(
¡d
::
	`mš
Ñ->
	`G‘AÍhaC
(), std::mšÑ->
	`G‘LeáDaugh‹r
()->
	`G‘MšAÍhaC
(),

187 
t
->
	`G‘RightDaugh‹r
()->
	`G‘MšAÍhaC
())));

189 
k
 += 1;

190 if(!
HaveStİCÚd™iÚ
) {

191 
DoubË_t
 
q
;

192 ià(
fV®id©iÚD©aS‘
 !ğ
NULL
è
q
 = 
dTW¿µ”
->
	`Te¡T»eQu®™y
(fValidationDataSet);

193 
q
 = 
dTW¿µ”
->
	`Te¡T»eQu®™y
(
fV®id©iÚSam¶e
);

194 
fQu®™yIndexLi¡
.
	`push_back
(
q
);

197 
fQu®™yIndexLi¡
.
	`push_back
(1.0);

199 
fPruÃSequ’û
.
	`push_back
(
n
->
	`G‘DTNode
());

200 
fPruÃSŒ’gthLi¡
.
	`push_back
(
®pha
);

203 
DoubË_t
 
qmax
 = -1.0e6;

204 if(!
HaveStİCÚd™iÚ
) {

205 
UIÁ_t
 
i
 = 0; i < 
fQu®™yIndexLi¡
.
	`size
(); i++) {

206 if(
fQu®™yIndexLi¡
[
i
] > 
qmax
) {

207 
qmax
 = 
fQu®™yIndexLi¡
[
i
];

208 
k
 = 
i
;

211 
fO±im®K
 = 
k
;

214 
fO±im®K
 = 
fPruÃSequ’û
.
	`size
() - 1;

217 ià(
fDebug
){

218 
outfe
 << 
¡d
::
’dl
 << "************ Summary **************" << std::endl

219 << "Numb” oàŒ“ šh£qu’û: " << 
fPruÃSequ’û
.
	`size
(è<< 
¡d
::
’dl
;

221 
outfe
 << "Pruning strength…arameters: [";

222 
UIÁ_t
 
i
 = 0; i < 
fPruÃSŒ’gthLi¡
.
	`size
()-1; i++)

223 
outfe
 << 
fPruÃSŒ’gthLi¡
[
i
] << ", ";

224 
outfe
 << 
fPruÃSŒ’gthLi¡
[fPruÃSŒ’gthLi¡.
	`size
()-1] << "]" << 
¡d
::
’dl
;

226 
outfe
 << "Misclassification„ates: [";

227 
UIÁ_t
 
i
 = 0; i < 
fQu®™yIndexLi¡
.
	`size
()-1; i++)

228 
outfe
 << 
fQu®™yIndexLi¡
[
i
] << ", ";

229 
outfe
 << 
fQu®™yIndexLi¡
[fQu®™yIndexLi¡.
	`size
()-1] << "]" << 
¡d
::
’dl
;

231 
outfe
 << "O±im® index: " << 
fO±im®K
+1 << 
¡d
::
’dl
;

232 
outfe
.
	`şo£
();

234 
d–‘e
 
dTW¿µ”
;

235 
	}
}

240 
	g¡d
::
veùÜ
<
DecisiÚT»eNode
*> 
CCPruÃr
::
	$G‘O±im®PruÃSequ’û
( ) const

242 
¡d
::
veùÜ
<
DecisiÚT»eNode
*> 
İtim®Sequ’û
;

243 ifĞ
fO±im®K
 >= 0 ) {

244  
IÁ_t
 
i
 = 0; i < 
fO±im®K
; i++ ) {

245 
İtim®Sequ’û
.
	`push_back
(
fPruÃSequ’û
[
i
]);

248  
İtim®Sequ’û
;

249 
	}
}

	@src/CCTreeWrapper.cxx

28 
	~"TMVA/CCT»eW¿µ”.h
"

29 
	~"TMVA/DecisiÚT»e.h
"

31 
	~<io¡»am
>

32 
	~<lim™s
>

34 
usšg
 
Çme¥aû
 
	gTMVA
;

39 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$CCT»eNode
Ğ
DecisiÚT»eNode
* 
n
 ) :

40 
	`Node
(),

41 
	`fNL—fDaugh‹rs
(0),

42 
	`fNodeResub¡™utiÚE¡im©e
(-1.0),

43 
	`fResub¡™utiÚE¡im©e
(-1.0),

44 
	`fAÍhaC
(-1.0),

45 
	`fMšAÍhaC
(-1.0),

46 
	$fDTNode
(
n
)

48 iàĞ
n
 !ğ
NULL
 &&‚->
	`G‘Right
(è!ğNULL &&‚->
	`G‘Leá
() != NULL ) {

49 
	`S‘Right
Ğ
Ãw
 
	`CCT»eNode
Ğ((
DecisiÚT»eNode
*è
n
->
	`G‘Right
()) ) );

50 
	`G‘Right
()->
	`S‘P¬’t
(
this
);

51 
	`S‘Leá
Ğ
Ãw
 
	`CCT»eNode
Ğ((
DecisiÚT»eNode
*è
n
->
	`G‘Leá
()) ) );

52 
	`G‘Leá
()->
	`S‘P¬’t
(
this
);

54 
	}
}

59 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::~
	$CCT»eNode
() {

60 if(
	`G‘Leá
(è!ğ
NULL
è
d–‘e
 
	`G‘LeáDaugh‹r
();

61 if(
	`G‘Right
(è!ğ
NULL
è
d–‘e
 
	`G‘RightDaugh‹r
();

62 
	}
}

67 
BoŞ_t
 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$R—dD©aRecÜd
Ğ
¡d
::
i¡»am
& 
š
, 
UIÁ_t
 ) {

68 
¡d
::
¡ršg
 
h—d”
, 
t™Ë
;

69 
š
 >> 
h—d”
;

70 
š
 >> 
t™Ë
; iÀ>> 
fNL—fDaugh‹rs
;

71 
š
 >> 
t™Ë
; iÀ>> 
fNodeResub¡™utiÚE¡im©e
;

72 
š
 >> 
t™Ë
; iÀ>> 
fResub¡™utiÚE¡im©e
;

73 
š
 >> 
t™Ë
; iÀ>> 
fAÍhaC
;

74 
š
 >> 
t™Ë
; iÀ>> 
fMšAÍhaC
;

75  
Œue
;

76 
	}
}

81 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$Pršt
Ğ
¡d
::
o¡»am
& 
os
 ) const {

82 
os
 << "----------------------" << 
¡d
::
’dl


83 << "|~T_t| " << 
fNL—fDaugh‹rs
 << 
¡d
::
’dl


84 << "RÑ): " << 
fNodeResub¡™utiÚE¡im©e
 << 
¡d
::
’dl


85 << "R(T_t): " << 
fResub¡™utiÚE¡im©e
 << 
¡d
::
’dl


86 << "gÑ): " << 
fAÍhaC
 << 
¡d
::
’dl


87 << "GÑ): " << 
fMšAÍhaC
 << 
¡d
::
’dl
;

88 
	}
}

93 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$PrštRec
Ğ
¡d
::
o¡»am
& 
os
 ) const {

94 
this
->
	`Pršt
(
os
);

95 if(
this
->
	`G‘Leá
(è!ğ
NULL
 &&his->
	`G‘Right
() != NULL) {

96 
this
->
	`G‘Leá
()->
	`PrštRec
(
os
);

97 
this
->
	`G‘Right
()->
	`PrštRec
(
os
);

99 
	}
}

104 
	gTMVA
::
CCT»eW¿µ”
::
	$CCT»eW¿µ”
Ğ
DecisiÚT»e
* 
T
, 
S•¬©iÚBa£
* 
qu®™yIndex
 ) :

105 
	$fRoÙ
(
NULL
)

107 
fDTP¬’t
 = 
T
;

108 
fRoÙ
 = 
Ãw
 
	`CCT»eNode
Ğ
dyÇmic_ÿ¡
<
DecisiÚT»eNode
*>(
T
->
	`G‘RoÙ
()) );

109 
fQu®™yIndex
 = 
qu®™yIndex
;

110 
	`In™T»e
(
fRoÙ
);

111 
	}
}

116 
	gTMVA
::
CCT»eW¿µ”
::~
	$CCT»eW¿µ”
( ) {

117 
d–‘e
 
fRoÙ
;

118 
	}
}

123 
	gTMVA
::
CCT»eW¿µ”
::
	$In™T»e
Ğ
CCT»eNode
* 
t
 )

125 
DoubË_t
 
s
 = 
t
->
	`G‘DTNode
()->
	`G‘NSigEv’ts
();

126 
DoubË_t
 
b
 = 
t
->
	`G‘DTNode
()->
	`G‘NBkgEv’ts
();

130 
t
->
	`S‘NodeResub¡™utiÚE¡im©e
((
s
+
b
)*
fQu®™yIndex
->
	`G‘S•¬©iÚIndex
(s,b));

132 if(
t
->
	`G‘Leá
(è!ğ
NULL
 &&->
	`G‘Right
() != NULL) {

134 
	`In™T»e
(
t
->
	`G‘LeáDaugh‹r
());

135 
	`In™T»e
(
t
->
	`G‘RightDaugh‹r
());

137 
t
->
	`S‘NL—fDaugh‹rs
Ñ->
	`G‘LeáDaugh‹r
()->
	`G‘NL—fDaugh‹rs
() +

138 
t
->
	`G‘RightDaugh‹r
()->
	`G‘NL—fDaugh‹rs
());

140 
t
->
	`S‘Resub¡™utiÚE¡im©e
Ñ->
	`G‘LeáDaugh‹r
()->
	`G‘Resub¡™utiÚE¡im©e
() +

141 
t
->
	`G‘RightDaugh‹r
()->
	`G‘Resub¡™utiÚE¡im©e
());

143 
t
->
	`S‘AÍhaC
(Ñ->
	`G‘NodeResub¡™utiÚE¡im©e
(è-->
	`G‘Resub¡™utiÚE¡im©e
()) /

144 (
t
->
	`G‘NL—fDaugh‹rs
() - 1));

146 
t
->
	`S‘MšAÍhaC
(
¡d
::
	`mš
Ñ->
	`G‘AÍhaC
(), std::mšÑ->
	`G‘LeáDaugh‹r
()->
	`G‘MšAÍhaC
(),

147 
t
->
	`G‘RightDaugh‹r
()->
	`G‘MšAÍhaC
())));

150 
t
->
	`S‘NL—fDaugh‹rs
(1);

151 
t
->
	`S‘Resub¡™utiÚE¡im©e
((
s
+
b
)*
fQu®™yIndex
->
	`G‘S•¬©iÚIndex
(s,b));

152 
t
->
	`S‘AÍhaC
(
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ));

153 
t
->
	`S‘MšAÍhaC
(
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ));

155 
	}
}

160 
	gTMVA
::
CCT»eW¿µ”
::
	$PruÃNode
Ğ
CCT»eNode
* 
t
 )

162 ifĞ
t
->
	`G‘Leá
(è!ğ
NULL
 &&

163 
t
->
	`G‘Right
(è!ğ
NULL
 ) {

164 
CCT»eNode
* 
l
 = 
t
->
	`G‘LeáDaugh‹r
();

165 
CCT»eNode
* 
r
 = 
t
->
	`G‘RightDaugh‹r
();

166 
t
->
	`S‘NL—fDaugh‹rs
( 1 );

167 
t
->
	`S‘Resub¡™utiÚE¡im©e
Ğt->
	`G‘NodeResub¡™utiÚE¡im©e
() );

168 
t
->
	`S‘AÍhaC
Ğ
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ) );

169 
t
->
	`S‘MšAÍhaC
Ğ
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ) );

170 
d–‘e
 
l
;

171 
d–‘e
 
r
;

172 
t
->
	`S‘Leá
(
NULL
);

173 
t
->
	`S‘Right
(
NULL
);

175 
¡d
::
cout
 << " ERROR iÀCCT»eW¿µ”::PruÃNode: youryØ´uÃ‡†—ànode..h© dÛ nÙ mak£n£ " << std::
’dl
;

177 
	}
}

183 
DoubË_t
 
	gTMVA
::
CCT»eW¿µ”
::
	$Te¡T»eQu®™y
ĞcÚ¡ 
Ev’tLi¡
* 
v®id©iÚSam¶e
 )

185 
DoubË_t
 
ncÜ»ù
=0, 
nçl£
=0;

186 
UIÁ_t
 
›vt
=0; ievˆ< 
v®id©iÚSam¶e
->
	`size
(); ievt++) {

187 
BoŞ_t
 
isSigÇlTy³
 = (
	`CheckEv’t
(*(*
v®id©iÚSam¶e
)[
›vt
]è> 
fDTP¬’t
->
	`G‘NodePur™yLim™
() ) ? 1 : 0;

189 ià(
isSigÇlTy³
 =ğ((*
v®id©iÚSam¶e
)[
›vt
]->
	`G‘CÏss
() == 0)) {

190 
ncÜ»ù
 +ğ(*
v®id©iÚSam¶e
)[
›vt
]->
	`G‘Weight
();

193 
nçl£
 +ğ(*
v®id©iÚSam¶e
)[
›vt
]->
	`G‘Weight
();

196  
ncÜ»ù
 / (ncÜ»ù + 
nçl£
);

197 
	}
}

203 
DoubË_t
 
	gTMVA
::
CCT»eW¿µ”
::
	$Te¡T»eQu®™y
ĞcÚ¡ 
D©aS‘
* 
v®id©iÚSam¶e
 )

205 
v®id©iÚSam¶e
->
	`S‘Cu¼’tTy³
(
Ty³s
::
kV®id©iÚ
);

207 
DoubË_t
 
ncÜ»ù
=0, 
nçl£
=0;

208 
LÚg64_t
 
›vt
=0; ievt<
v®id©iÚSam¶e
->
	`G‘NEv’ts
(); ievt++){

209 cÚ¡ 
Ev’t
 *
ev
 = 
v®id©iÚSam¶e
->
	`G‘Ev’t
(
›vt
);

211 
BoŞ_t
 
isSigÇlTy³
 = (
	`CheckEv’t
(*
ev
è> 
fDTP¬’t
->
	`G‘NodePur™yLim™
() ) ? 1 : 0;

213 ià(
isSigÇlTy³
 =ğ(
ev
->
	`G‘CÏss
() == 0)) {

214 
ncÜ»ù
 +ğ
ev
->
	`G‘Weight
();

217 
nçl£
 +ğ
ev
->
	`G‘Weight
();

220  
ncÜ»ù
 / (ncÜ»ù + 
nçl£
);

221 
	}
}

226 
DoubË_t
 
	gTMVA
::
CCT»eW¿µ”
::
	$CheckEv’t
ĞcÚ¡ 
TMVA
::
Ev’t
 & 
e
, 
BoŞ_t
 
u£YesNoL—f
 )

228 cÚ¡ 
DecisiÚT»eNode
* 
cu¼’t
 = 
fRoÙ
->
	`G‘DTNode
();

229 
CCT»eNode
* 
t
 = 
fRoÙ
;

232 
t
->
	`G‘Leá
(è!ğ
NULL
 &&

233 
t
->
	`G‘Right
(è!ğ
NULL
){

234 ià(
cu¼’t
->
	`GÛsRight
(
e
)) {

236 
t
 =->
	`G‘RightDaugh‹r
();

237 
cu¼’t
 = 
t
->
	`G‘DTNode
();

241 
t
 =->
	`G‘LeáDaugh‹r
();

242 
cu¼’t
 = 
t
->
	`G‘DTNode
();

246 ià(
u£YesNoL—f
è (
cu¼’t
->
	`G‘Pur™y
(è> 
fDTP¬’t
->
	`G‘NodePur™yLim™
() ? 1.0 : -1.0);

247  
cu¼’t
->
	`G‘Pur™y
();

248 
	}
}

252 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$AddA‰ribu‹sToNode
( * ) const

253 {
	}
}

257 
TMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$AddCÚ‹ÁToNode
Ğ
¡d
::
¡ršg¡»am
& ) const

258 {
	}
}

262 
TMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$R—dA‰ribu‹s
Ğ* , 
UIÁ_t
 )

263 {
	}
}

267 
	gTMVA
::
CCT»eW¿µ”
::
CCT»eNode
::
	$R—dCÚ‹Á
Ğ
¡d
::
¡ršg¡»am
& )

268 {
	}
}

	@src/ClassInfo.cxx

35 
	~"TMVA/CÏssInfo.h
"

37 
	~<veùÜ
>

39 
	~"TCut.h
"

40 
	~"TM©rixD.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/Ty³s.h
"

48 
	gTMVA
::
CÏssInfo
::
	$CÏssInfo
ĞcÚ¡ 
TSŒšg
& 
Çme
 )

49 : 
	`TNamed
(
Çme
.
	`D©a
(),name.Data()),

50 
	`fWeight
( "" ),

51 
	`fCut
( "" ),

52 
	`fNumb”
( 0 ),

53 
	`fCÜrM©rix
( 0 ),

54 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("CÏssInfo", 
kINFO
) )

56 
	}
}

61 
	gTMVA
::
CÏssInfo
::~
	$CÏssInfo
()

63 ià(
fCÜrM©rix
è
d–‘e
 fCorrMatrix;

64 
d–‘e
 
fLogg”
;

65 
	}
}

	@src/ClassifierFactory.cxx

29 
	~"TMVA/CÏssif›rFaùÜy.h
"

31 
	~"Rty³sCÜe.h
"

32 
	~"TSŒšg.h
"

34 
	~<as£¹.h
>

35 
	~<io¡»am
>

37 
şass
 
	gTSŒšg
;

42 
	gTMVA
::
CÏssif›rFaùÜy
* 
TMVA
::CÏssif›rFaùÜy::
fgIn¡ªû
 = 0;

48 
	gTMVA
::
CÏssif›rFaùÜy
& 
TMVA
::CÏssif›rFaùÜy::
	$In¡ªû
()

50 ià(!
fgIn¡ªû
èfgIn¡ªû = 
Ãw
 
TMVA
::
	`CÏssif›rFaùÜy
();

52  *
fgIn¡ªû
;

53 
	}
}

58 
	gTMVA
::
CÏssif›rFaùÜy
::
	$De¡royIn¡ªû
()

60 ià(
fgIn¡ªû
!=0è
d–‘e
 fgInstance;

61 
	}
}

66 
BoŞ_t
 
	gTMVA
::
CÏssif›rFaùÜy
::
	$Regi¡”
ĞcÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
C»©Ü
 
ü—tÜ
 )

68 if(
fC®ls
.
	`fšd
(
Çme
è!ğfC®ls.
	`’d
())

70 
¡d
::
û¼
 << "CÏssif›rFaùÜy<>::Regi¡” - " << 
Çme
 << "‡Ì—dyƒxi¡s" << std::
’dl
;

71  
çl£
;

74  
fC®ls
.
	`š£¹
(
C®lM­
::
	`v®ue_ty³
(
Çme
, 
ü—tÜ
)).
£cÚd
;

75 
	}
}

80 
BoŞ_t
 
	gTMVA
::
CÏssif›rFaùÜy
::
	$UÄegi¡”
ĞcÚ¡ 
¡d
::
¡ršg
 &
Çme
 )

82  
fC®ls
.
	`”a£
(
Çme
) == 1;

83 
	}
}

89 
	gTMVA
::
IM‘hod
* 
TMVA
::
CÏssif›rFaùÜy
::
	$C»©e
ĞcÚ¡ 
¡d
::
¡ršg
 &
Çme
,

90 cÚ¡ 
TSŒšg
& 
job
,

91 cÚ¡ 
TSŒšg
& 
t™Ë
,

92 
D©aS‘Info
& 
dsi
,

93 cÚ¡ 
TSŒšg
& 
İtiÚ
 )

98 
C®lM­
::
cÚ¡_™”©Ü
 
™
 = 
fC®ls
.
	`fšd
(
Çme
);

101 ià(
™
 =ğ
fC®ls
.
	`’d
()) {

102 
¡d
::
û¼
 << "CÏssif›rFaùÜy<>::C»©- dÚ'ˆknow‡nythšg‡bouˆ" << 
Çme
 << std::
’dl
;

103 
	`as£¹
(0);

106  (
™
->
£cÚd
)(
job
, 
t™Ë
, 
dsi
, 
İtiÚ
);

107 
	}
}

113 
	gTMVA
::
IM‘hod
* 
TMVA
::
CÏssif›rFaùÜy
::
	$C»©e
ĞcÚ¡ 
¡d
::
¡ršg
 &
Çme
,

114 
D©aS‘Info
& 
dsi
,

115 cÚ¡ 
TSŒšg
& 
weightfe
 )

120 
C®lM­
::
cÚ¡_™”©Ü
 
™
 = 
fC®ls
.
	`fšd
(
Çme
);

123 ià(
™
 =ğ
fC®ls
.
	`’d
()) {

124 
¡d
::
û¼
 << "CÏssif›rFaùÜy<>::C»©- dÚ'ˆknow‡nythšg‡bouˆ" << 
Çme
 << std::
’dl
;

125 
	`as£¹
(0);

128  (
™
->
£cÚd
)("", "", 
dsi
, 
weightfe
);

129 
	}
}

134 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
TMVA
::
CÏssif›rFaùÜy
::
	$Li¡
() const

136 
¡d
::
veùÜ
<¡d::
¡ršg
> 
svec
;

138 
C®lM­
::
cÚ¡_™”©Ü
 
™
 = 
fC®ls
.
	`begš
();

139 ; 
™
 !ğ
fC®ls
.
	`’d
(); ++™è
svec
.
	`push_back
(™ -> 
fœ¡
);

141  
svec
;

142 
	}
}

147 
	gTMVA
::
CÏssif›rFaùÜy
::
	$Pršt
() const

149 
¡d
::
cout
 << "Pršt: CÏssif›rFaùÜy<> know abouˆ" << 
fC®ls
.
	`size
(è<< " objeùs" << std::
’dl
;

151 
C®lM­
::
cÚ¡_™”©Ü
 
™
 = 
fC®ls
.
	`begš
();

152 ; 
™
 !ğ
fC®ls
.
	`’d
(); ++™è
¡d
::
cout
 << "Regi¡”ed objeù‚am" << iˆ-> 
fœ¡
 << std::
’dl
;

153 
	}
}

	@src/Config.cxx

36 
	~"TMVA/CÚfig.h
"

37 
	~"TMVA/MsgLogg”.h
"

39 
	~"Rty³s.h
"

40 
	~"TSŒšg.h
"

42 
CÏssImp
(
TMVA
::
CÚfig
);

44 #ià
__ılu¥lus
 > 199711L

45 
	g¡d
::
©omic
<
TMVA
::
CÚfig
*> TMVA::CÚfig::
fgCÚfigPŒ
{ 0 };

47 
	gTMVA
::
CÚfig
* 
TMVA
::CÚfig::
fgCÚfigPŒ
 = 0;

50 
	gTMVA
::
CÚfig
& 
TMVA
::
	$gCÚfig
(è{  
TMVA
::
CÚfig
::
	`In¡ªû
(); 
	}
}

55 
	gTMVA
::
CÚfig
::
	$CÚfig
() :

56 
	`fU£CŞÜedCÚsŞe
 ( 
kTRUE
 ),

57 
	`fS’t
 ( 
kFALSE
 ),

58 
	`fWr™eO±iÚsReã»nû
Ğ
kFALSE
 ),

59 
	`fD¿wProg»ssB¬
 ( 
kFALSE
 ),

60 
	`fLogg”
 ( 
Ãw
 
	`MsgLogg”
("Config") )

63 
fV¬ŸbËPlÙtšg
.
fTimesRMS
 = 8.0;

64 
fV¬ŸbËPlÙtšg
.
fNbšs1D
 = 40;

65 
fV¬ŸbËPlÙtšg
.
fNbšs2D
 = 300;

66 
fV¬ŸbËPlÙtšg
.
fMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
 = 20;

68 
fV¬ŸbËPlÙtšg
.
fNbšsMVAouut
 = 40;

69 
fV¬ŸbËPlÙtšg
.
fNbšsXOfROCCurve
 = 100;

72 
fIONames
.
fWeightFeDœ
 = "weights";

73 
fIONames
.
fWeightFeEx‹nsiÚ
 = "weights";

74 
fIONames
.
fO±iÚsReã»nûFeDœ
 = "optionInfo";

75 
	}
}

80 
	gTMVA
::
CÚfig
::~
	$CÚfig
()

82 
d–‘e
 
fLogg”
;

83 
	}
}

88 
	gTMVA
::
CÚfig
::
	$De¡royIn¡ªû
()

90 #ià
__ılu¥lus
 > 199711L

91 
d–‘e
 
fgCÚfigPŒ
.
	`exchªge
(0);

93 ià(
fgCÚfigPŒ
 !ğ0è{ 
d–‘e
 fgConfigPtr; fgConfigPtr = 0;}

95 
	}
}

100 
	gTMVA
::
CÚfig
& 
TMVA
::CÚfig::
	$In¡ªû
()

102 #ià
__ılu¥lus
 > 199711L

103 if(!
fgCÚfigPŒ
) {

104 
TMVA
::
CÚfig
* 
tmp
 = 
Ãw
 
	`CÚfig
();

105 
TMVA
::
CÚfig
* 
ex³ùed
 = 0;

106 if(! 
fgCÚfigPŒ
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
,
tmp
) ) {

108 
d–‘e
 
tmp
;

111  *
fgCÚfigPŒ
;

113  
fgCÚfigPŒ
 ? *fgCÚfigPŒ :*(fgCÚfigPŒ = 
Ãw
 
	`CÚfig
());

115 
	}
}

	@src/Configurable.cxx

35 
	~<¡ršg
>

36 
	~<io¡»am
>

37 
	~<f¡»am
>

38 
	~<c¡dlib
>

39 
	~<veùÜ
>

41 
	~"TROOT.h
"

42 
	~"TSy¡em.h
"

43 
	~"TSŒšg.h
"

44 
	~"TObjSŒšg.h
"

45 
	~"TQObjeù.h
"

46 
	~"TS¶še.h
"

47 
	~"TM©rix.h
"

48 
	~"TM©h.h
"

49 
	~"TFe.h
"

50 
	~"TKey.h
"

52 
	~"TMVA/CÚfigu¿bË.h
"

53 
	~"TMVA/CÚfig.h
"

54 
	~"TMVA/ToŞs.h
"

55 
	~"TMVA/Ty³s.h
"

60 
CÏssImp
(
TMVA
::
CÚfigu¿bË
);

62 #ifdeà
_WIN32


64 #´agm¨
w¬nšg
 ( 
di§bË
 : 4355 )

70 
	gTMVA
::
CÚfigu¿bË
::
	$CÚfigu¿bË
ĞcÚ¡ 
TSŒšg
& 
theO±iÚ
)

71 : 
	`TNamed
("Configurable","Configurable"),

72 
	`fO±iÚs
 ( 
theO±iÚ
 ),

73 
	`fLoo£O±iÚCheckšgEÇbËd
 ( 
kTRUE
 ),

74 
	`fLa¡Deş¬edO±iÚ
 ( 0 ),

75 
	`fCÚfigDesütiÚ
 ( "No description" ),

76 
	`fReã»nûFe
 ( "None" ),

77 
	`fLogg”
 ( 
Ãw
 
	$MsgLogg”
(
this
) )

79 
fLi¡OfO±iÚs
.
	`S‘OwÃr
();

82 ià(
	`gToŞs
().
	`CheckFÜV”bo£O±iÚ
Ğ
theO±iÚ
 )è
	`Log
().
	`S‘MšTy³
Ğ
kVERBOSE
 );

83 
	}
}

88 
	gTMVA
::
CÚfigu¿bË
::~
	$CÚfigu¿bË
()

90 
d–‘e
 
fLogg”
;

91 
	}
}

96 
	gTMVA
::
CÚfigu¿bË
::
	$S¶™O±iÚs
(cÚ¡ 
TSŒšg
& 
theO±
, 
TLi¡
& 
loo
) const

98 
TSŒšg
 
	`¥l™O±
(
theO±
);

99 
loo
.
	`S‘OwÃr
();

100 
¥l™O±
.
	`L’gth
()>0) {

101 ià(!
¥l™O±
.
	`CÚšs
(':')) {

102 
loo
.
	`Add
(
Ãw
 
	`TObjSŒšg
(
¥l™O±
));

103 
¥l™O±
 = "";

106 
TSŒšg
 
toSave
 = 
	`¥l™O±
(0,
¥l™O±
.
	`Fœ¡
(':'));

107 
loo
.
	`Add
(
Ãw
 
	`TObjSŒšg
(
toSave
.
	`D©a
()));

108 
¥l™O±
 = 
	`¥l™O±
(¥l™O±.
	`Fœ¡
(':')+1,¥l™O±.
	`L’gth
());

111 
	}
}

117 
	gTMVA
::
CÚfigu¿bË
::
	$Re£tS‘FÏg
()

119 
TLi¡I‹r
 
	`decO±It
(&
fLi¡OfO±iÚs
);

120 
O±iÚBa£
* 
decO±
 = (O±iÚBa£*è
	`decO±It
()) {

121 
decO±
->
fIsS‘
 = 
kFALSE
;

123 
	}
}

128 
	gTMVA
::
CÚfigu¿bË
::
	$P¬£O±iÚs
()

130 
	`Log
(è<< 
kVERBOSE
 << "P¬sšg o±iÚ sŒšg: " << 
Endl
;

131 
TSŒšg
 
	`İtiÚsW™houtTde
(
fO±iÚs
);

132 
İtiÚsW™houtTde
.
	`R•ÏûAÎ
(
	`TSŒšg
("~"),TString(""));

133 
	`Log
(è<< 
kVERBOSE
 << "... \"" << 
İtiÚsW™houtTde
 << "\"" << 
Endl
;

135 
TLi¡
 
loo
;

137 
fO±iÚs
 = fO±iÚs.
	`SŒ
(
TSŒšg
::
kL—dšg
, ':');

140 
	`S¶™O±iÚs
(
fO±iÚs
, 
loo
);

141 
fO±iÚs
 = "";

144 
¡d
::
m­
<
TSŒšg
, std::
veùÜ
<¡d::
·œ
<
IÁ_t
, TSŒšg> > > 
¬¿yTy³O±iÚs
;

146 
TLi¡I‹r
 
	`decO±It
(&
fLi¡OfO±iÚs
);

147 
TLi¡I‹r
 
	`£tO±It
(&
loo
);

148 
TObjSŒšg
 * 
os
 = (TObjSŒšg*è
	`£tO±It
()) {

150 
TSŒšg
 
s
 = 
os
->
	`G‘SŒšg
();

159 
BoŞ_t
 
´e£rveTde
 = 
s
.
	`BegšsW™h
('~');

160 
s
 = s.
	`SŒ
(
TSŒšg
::
kL—dšg
, '~');

162 
BoŞ_t
 
·¿mP¬£d
 = 
kFALSE
;

163 ià(
s
.
	`CÚšs
('=')) {

164 
TSŒšg
 
İŠame
 = 
	`s
(0,
s
.
	`Fœ¡
('=')); o±Çme.
	`ToLow”
();

165 
TSŒšg
 
İtv®
 = 
	`s
(
s
.
	`Fœ¡
('=')+1,s.
	`L’gth
());

166 
IÁ_t
 
idx
 = -1;

172 
O±iÚBa£
* 
decO±
 = (O±iÚBa£ *)
fLi¡OfO±iÚs
.
	`FšdObjeù
(
İŠame
);

173 ià(
decO±
==0 && 
İŠame
.
	`CÚšs
('[')) {

176 
TSŒšg
 
¡
 = 
	`İŠame
(
İŠame
.
	`Fœ¡
('[')+1,100);

177 
¡
.
	`Remove
(¡.
	`Fœ¡
(']'));

178 
¡d
::
¡ršg¡»am
 
	`¡r
(
¡
.
	`D©a
());

179 
¡r
 >> 
idx
;

180 
İŠame
.
	`Remove
(İŠame.
	`Fœ¡
('['));

181 
decO±
 = (
O±iÚBa£
 *)
fLi¡OfO±iÚs
.
	`FšdObjeù
(
İŠame
);

184 
TLi¡I‹r
 
	`İtIt
(&
fLi¡OfO±iÚs
);

185 ià(
decO±
!=0) {

186 ià(
decO±
->
	`IsS‘
())

187 
	`Log
(è<< 
kWARNING
 << "V®ufÜ o±iÚ " << 
decO±
->
	`G‘Name
()

188 << " wa ´eviou¦y s‘Ø" << 
decO±
->
	`G‘V®ue
(è<< 
Endl
;

190 ià(!
decO±
->
	`HasP»DefšedV®
(è|| (decO±->HasP»DefšedV®(è&& decO±->
	`IsP»DefšedV®
(
İtv®
)) ) {

191 ià(
decO±
->
	`IsA¼ayO±
()) {

193 ià(
idx
==-1) {

194 
decO±
->
	`S‘V®ue
(
İtv®
);

198 ià(!
decO±
->
	`S‘V®ue
(
İtv®
, 
idx
))

199 
	`Log
(è<< 
kFATAL
 << "Index " << 
idx
 << "oØÏrgfÜ o±iÚ " << 
decO±
->
	`TheName
()

200 << ",‡Îowed„ªgi [0," << 
decO±
->
	`G‘A¼aySize
()-1 << "]" << 
Endl
;

204 ià(
idx
!=-1)

205 
	`Log
(è<< 
kFATAL
 << "O±iÚ " << 
decO±
->
	`TheName
()

206 << " i nÙ‡À¬¿y, buˆyou s³cif›d‡Àšdex" << 
Endl
;

207 
decO±
->
	`S‘V®ue
(
İtv®
);

209 
·¿mP¬£d
 = 
kTRUE
;

211 
	`Log
(è<< 
kFATAL
 << "O±iÚ " << 
decO±
->
	`TheName
()

212 << " dÛ nÙ hav´edefšed v®ue: \"" << 
İtv®
 << "\"" << 
Endl
;

218 
BoŞ_t
 
´e£rveNÙSign
 = 
kFALSE
;

219 ià(!
·¿mP¬£d
) {

220 
BoŞ_t
 
hasNÙSign
 = 
kFALSE
;

221 ià(
s
.
	`BegšsW™h
("!")è{ s.
	`Remove
(0,1); 
´e£rveNÙSign
 = 
hasNÙSign
 = 
kTRUE
; }

222 
TSŒšg
 
	`İŠame
(
s
); 
İŠame
.
	`ToLow”
();

223 
O±iÚBa£
* 
decO±
 = 0;

224 
BoŞ_t
 
İtiÚExi¡s
 = 
kFALSE
;

225 
TLi¡I‹r
 
	`İtIt
(&
fLi¡OfO±iÚs
);

226 (
decO±
 = (
O±iÚBa£
*)
	`İtIt
()) !=0) {

227 
TSŒšg
 
	`´edO±Name
(
decO±
->
	`G‘Name
());

228 
´edO±Name
.
	`ToLow”
();

229 ià(
´edO±Name
 =ğ
İŠame
è
İtiÚExi¡s
 = 
kTRUE
;

230 ià(
dyÇmic_ÿ¡
<
O±iÚ
<
boŞ
>*>(
decO±
)==0) ;

231 ià(
´edO±Name
 =ğ
İŠame
) ;

235 ià(
decO±
 != 0) {

236 
decO±
->
	`S‘V®ue
Ğ
hasNÙSign
 ? "0" : "1" );

237 
·¿mP¬£d
 = 
kTRUE
;

240 ià(
İtiÚExi¡s
 && 
hasNÙSign
) {

241 
	`Log
(è<< 
kFATAL
 << "Neg©šg‡‚Ú-boŞ—Àv¬ŸbË " << 
İŠame


242 << ",…Ëa£ checkhİtiÚ fÜ m‘hod: " << 
	`G‘Name
(è<< 
Endl
;

248 ià(!
·¿mP¬£d
 && 
	`Loo£O±iÚCheckšgEÇbËd
()) {

251 
decO±It
.
	`Re£t
();

252 
O±iÚBa£
* 
decO±
 = (O±iÚBa£*è
	`decO±It
()) {

253 ià(
decO±
->
	`HasP»DefšedV®
(è&& decO±->
	`IsP»DefšedV®
(
s
) ) {

254 
·¿mP¬£d
 = 
decO±
->
	`S‘V®ue
(
s
);

260 ià(
fO±iÚs
!="") fOptions += ":";

261 ià(
·¿mP¬£d
 || 
´e£rveTde
è
fO±iÚs
 += '~';

262 ià(
´e£rveNÙSign
è
fO±iÚs
 += '!';

263 
fO±iÚs
 +ğ
s
;

267 
	`PrštO±iÚs
();

268 ià(
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
()è
	`Wr™eO±iÚsReã»nûToFe
();

269 
	}
}

274 
	gTMVA
::
CÚfigu¿bË
::
	$CheckFÜUnu£dO±iÚs
() const

276 
TSŒšg
 
	`theO±
(
fO±iÚs
);

277 
theO±
 =heO±.
	`SŒ
(
TSŒšg
::
kL—dšg
, ':');

280 
TLi¡
 
loo
;

281 
	`S¶™O±iÚs
(
theO±
, 
loo
);

283 
TLi¡I‹r
 
	`£tO±It
(&
loo
);

284 
TSŒšg
 
	`unu£dO±iÚs
("");

285 
TObjSŒšg
 * 
os
 = (TObjSŒšg*è
	`£tO±It
()) {

287 
TSŒšg
 
s
 = 
os
->
	`G‘SŒšg
();

288 ià(!
s
.
	`BegšsW™h
('~')) {

289 ià(
unu£dO±iÚs
 != "") unusedOptions += ':';

290 
unu£dO±iÚs
 +ğ
s
;

293 ià(
unu£dO±iÚs
 != "") {

294 
	`Log
(è<< 
kFATAL


296 << 
unu£dO±iÚs
 << "\',…Ëa£ check!" << 
Endl
;

298 
	}
}

303 
	gTMVA
::
CÚfigu¿bË
::
	$PrštO±iÚs
() const

305 
	`Log
(è<< 
kVERBOSE
 << "ThfŞlowšg o±iÚ ¬£t:" << 
Endl
;

307 
TLi¡I‹r
 
	`İtIt
Ğ&
fLi¡OfO±iÚs
 );

308 
	`Log
(è<< 
kVERBOSE
 << "- By U£r:" << 
Endl
;

309 
BoŞ_t
 
found
 = 
kFALSE
;

310 
O±iÚBa£
* 
İt
 = (O±iÚBa£ *è
	`İtIt
()) {

311 ià(
İt
->
	`IsS‘
()) {

312 
	`Log
(è<< 
kVERBOSE
 << " ";

313 
¡d
::
o¡ršg¡»am
 
oss
;

314 
İt
->
	`Pršt
(
oss
);

315 
	`Log
(è<< 
oss
.
	`¡r
();

316 
	`Log
(è<< 
Endl
; 
found
 = 
kTRUE
; }

318 ià(!
found
è
	`Log
(è<< 
kVERBOSE
 << " <nÚe>" << 
Endl
;

320 
İtIt
.
	`Re£t
();

321 
	`Log
(è<< 
kVERBOSE
 << "- DeçuÉ:" << 
Endl
;

322 
found
 = 
kFALSE
;

323 
O±iÚBa£
* 
İt
 = (O±iÚBa£ *è
	`İtIt
()) {

324 ià(!
İt
->
	`IsS‘
()) {

325 
	`Log
(è<< 
kVERBOSE
 << " ";

326 
¡d
::
o¡ršg¡»am
 
oss
;

327 
İt
->
	`Pršt
(
oss
);

328 
	`Log
(è<< 
oss
.
	`¡r
();

329 
	`Log
(è<< 
Endl
; 
found
 = 
kTRUE
; }

331 ià(!
found
è
	`Log
(è<< 
kVERBOSE
 << " <nÚe>" << 
Endl
;

332 
	}
}

337 
	gTMVA
::
CÚfigu¿bË
::
	$Wr™eO±iÚsToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
, cÚ¡ 
TSŒšg
& 
´efix
 ) const

339 
TLi¡I‹r
 
	`İtIt
Ğ&
fLi¡OfO±iÚs
 );

340 
o
 << 
´efix
 << "# S‘ by U£r:" << 
¡d
::
’dl
;

341 
O±iÚBa£
 * 
İt
 = (O±iÚBa£ *è
	`İtIt
())

342 ià(
İt
->
	`IsS‘
()è{ 
o
 << 
´efix
; o±->
	`Pršt
(o); o << 
¡d
::
’dl
; }

343 
İtIt
.
	`Re£t
();

344 
o
 << 
´efix
 << "# DeçuÉ:" << 
¡d
::
’dl
;

345 
O±iÚBa£
 * 
İt
 = (O±iÚBa£ *è
	`İtIt
())

346 ià(!
İt
->
	`IsS‘
()è{ 
o
 << 
´efix
; o±->
	`Pršt
(o); o << 
¡d
::
’dl
; }

347 
o
 << 
´efix
 << "##" << 
¡d
::
’dl
;

348 
	}
}

353 
	gTMVA
::
CÚfigu¿bË
::
	$AddO±iÚsXMLTo
Ğ* 
·»Á
 ) const

355 ià(!
·»Á
) ;

356 * 
İts
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Options");

357 
TLi¡I‹r
 
	`İtIt
Ğ&
fLi¡OfO±iÚs
 );

358 
O±iÚBa£
 * 
İt
 = (O±iÚBa£ *è
	`İtIt
()) {

359 * 
İŠode
 = 0;

360 ià(
İt
->
	`IsA¼ayO±
()) {

361 
¡d
::
¡ršg¡»am
 
	`s
("");

362 
s
.
	`´ecisiÚ
( 16 );

363 
IÁ_t
 
i
=0; i<
İt
->
	`G‘A¼aySize
(); i++) {

364 if(
i
>0è
s
 << " ";

365 
s
 << 
¡d
::
sc›Áific
 << 
İt
->
	`G‘V®ue
(
i
);

367 
İŠode
 = 
	`gToŞs
().
	`AddChd
(
İts
,"O±iÚ",
s
.
	`¡r
().
	`c_¡r
());

370 
İŠode
 = 
	`gToŞs
().
	`AddChd
(
İts
,"O±iÚ", 
İt
->
	`G‘V®ue
());

372 
	`gToŞs
().
	`AddA‰r
(
İŠode
, "Çme", 
İt
->
	`TheName
());

373 ià(
İt
->
	`IsA¼ayO±
()) {

374 
	`gToŞs
().
	`AddA‰r
(
İŠode
, "size", 
İt
->
	`G‘A¼aySize
());

376 
	`gToŞs
().
	`AddA‰r
(
İŠode
, "modif›d", (
İt
->
	`IsS‘
()?"Yes":"No") );

378 
	}
}

382 
	gTMVA
::
CÚfigu¿bË
::
	$R—dO±iÚsFromXML
Ğ* 
node
 )

384 * 
İt
 = 
	`gToŞs
().
	`G‘Chd
(
node
);

385 
TSŒšg
 
İtName
, 
İtV®ue
;

386 
fO±iÚs
="";

387 
İt
 != 0) {

388 ià(
fO±iÚs
.
	`L’gth
()!=0) fOptions += ":";

389 
	`gToŞs
().
	`R—dA‰r
(
İt
, "Çme", 
İtName
);

390 
İtV®ue
 = 
	`TSŒšg
Ğ
	`gToŞs
().
	`G‘CÚ‹Á
(
İt
) );

391 
¡d
::
¡ršg¡»am
 
	`s
("");

392 
s
.
	`´ecisiÚ
( 16 );

393 ià(
	`gToŞs
().
	`HasA‰r
(
İt
, "size")) {

394 
UIÁ_t
 
size
;

395 
	`gToŞs
().
	`R—dA‰r
(
İt
, "size", 
size
);

396 
¡d
::
veùÜ
<
TSŒšg
> 
v®ues
 = 
	`gToŞs
().
	`S¶™SŒšg
(
İtV®ue
, ' ');

397 
UIÁ_t
 
i
=0; i<
size
; i++) {

398 if(
i
!=0è
s
 << ":";

399 
s
 << 
¡d
::
sc›Áific
 << 
İtName
 << "[" << 
i
 << "]=" << 
v®ues
[i];

403 
s
 << 
¡d
::
sc›Áific
 << 
İtName
 << "=" << 
İtV®ue
;

405 
fO±iÚs
 +ğ
s
.
	`¡r
().
	`c_¡r
();

406 
İt
 = 
	`gToŞs
().
	`G‘NextChd
(opt);

408 
	}
}

413 
	gTMVA
::
CÚfigu¿bË
::
	$Wr™eO±iÚsReã»nûToFe
()

415 
TSŒšg
 
dœ
 = 
	`gCÚfig
().
	`G‘IONames
().
fO±iÚsReã»nûFeDœ
;

416 
gSy¡em
->
	`MakeDœeùÜy
Ğ
dœ
 );

417 
fReã»nûFe
 = 
dœ
 + "/" + 
	`G‘CÚfigName
() + "_optionsRef.txt";

418 
¡d
::
of¡»am
 
	`o
Ğ
fReã»nûFe
 );

419 ià(!
o
.
	`good
()) {

420 
	`Log
(è<< 
kFATAL
 << "<Wr™eO±iÚsToInfoFe> UÇbËØİ’ ouuˆfe: " << 
fReã»nûFe
 << 
Endl
;

423 
TLi¡I‹r
 
	`İtIt
Ğ&
fLi¡OfO±iÚs
 );

424 
o
 << "# Li¡ oàİtiÚs:" << 
¡d
::
’dl
;

425 
o
 << "# CÚfigu¿bË: " << 
	`G‘CÚfigName
(è<< 
¡d
::
’dl
;

426 
o
 << "# DesütiÚ: " << 
	`G‘CÚfigDesütiÚ
(è<< 
¡d
::
’dl
;

427 
O±iÚBa£
 * 
İt
 = (O±iÚBa£ *è
	`İtIt
()) {

428 
İt
->
	`Pršt
Ğ
o
, 1 );

429 
o
 << 
¡d
::
’dl
 << "# ------------------------------------------------" << std::endl;

432 
o
.
	`şo£
();

433 
	`Log
(è<< 
kVERBOSE
 << "WrÙİtiÚ »ã»nû fe: \"" << 
fReã»nûFe
 << "\"" << 
Endl
;

434 
	}
}

439 
	gTMVA
::
CÚfigu¿bË
::
	$R—dO±iÚsFromSŒ—m
(
¡d
::
i¡»am
& 
i¡r
)

444 
	`Re£tS‘FÏg
();

445 
fO±iÚs
 = "";

446 
buf
[512];

447 
i¡r
.
	`g‘lše
(
buf
,512);

448 
TSŒšg
 
¡rİt
, 
¡rv®
;

449 
i¡r
.
	`good
(è&& !i¡r.
	`eof
(è&& !(
buf
[0]=='#' && buf[1]=='#')) {

450 *
p
 = 
buf
;

451 *
p
==' ' || *p=='\t')…++;

452 ià(*
p
=='#' || *p=='\0') {

453 
i¡r
.
	`g‘lše
(
buf
,512);

456 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

457 
s¡r
 >> 
¡rİt
 >> 
¡rv®
;

458 
¡rİt
.
	`R•ÏûAÎ
(':','=');

459 
¡rv®
.
	`R•ÏûAÎ
("\"","");

460 ià(
fO±iÚs
.
	`L’gth
()!=0) fOptions += ":";

461 
fO±iÚs
 +ğ
¡rİt
;

462 
fO±iÚs
 +ğ
¡rv®
;

463 
i¡r
.
	`g‘lše
(
buf
,512);

465 
	}
}

	@src/ConvergenceTest.cxx

34 
	~"TMVA/CÚv”g’ûTe¡.h
"

35 
	~"TM©h.h
"

40 
	gTMVA
::
CÚv”g’ûTe¡
::
	$CÚv”g’ûTe¡
()

41 : 
	`fCu¼’tV®ue
( 0 ),

42 
	`fIm´ovem’t
( 0 ),

43 
	`fS‹ps
( 0 ),

44 
	`fCouÁ”
( -1 ),

45 
	`fCÚvV®ue
Ğ
FLT_MAX
 ),

46 
	`fMaxCouÁ”
( 0 ),

47 
	`fBe¡ResuÉ
Ğ
FLT_MAX
 ),

48 
	$fLa¡ResuÉ
Ğ
FLT_MAX
 )

50 
	}
}

55 
	gTMVA
::
CÚv”g’ûTe¡
::~
	$CÚv”g’ûTe¡
()

57 
	}
}

66 
BoŞ_t
 
TMVA
::
CÚv”g’ûTe¡
::
	$HasCÚv”ged
Ğ
BoŞ_t
 
w™hšCÚv”g’ûBªd
 )

68 ifĞ
fS‹ps
 < 0 || 
fIm´ovem’t
 < 0 )  
kFALSE
;

70 ià(
fCouÁ”
 < 0) {

71 
fCÚvV®ue
 = 
fCu¼’tV®ue
;

73 
Flßt_t
 
im´ovem’t
 = 0;

74 ifĞ
w™hšCÚv”g’ûBªd
 )

75 
im´ovem’t
 = 
TM©h
::
	`Abs
(
fCu¼’tV®ue
 - 
fCÚvV®ue
);

77 
im´ovem’t
 = 
fCÚvV®ue
 - 
fCu¼’tV®ue
;

78 iàĞ
im´ovem’t
 <ğ
fIm´ovem’t
 || 
fS‹ps
<0) {

79 
fCouÁ”
 ++;

81 
fCouÁ”
 = 0;

82 
fCÚvV®ue
 = 
fCu¼’tV®ue
;

84 ià(
fCouÁ”
 < 
fS‹ps
è 
kFALSE
;

85  
kTRUE
;

86 
	}
}

91 
Flßt_t
 
	gTMVA
::
CÚv”g’ûTe¡
::
	$Prog»ss
()

93 ifĞ
fCouÁ”
 > 
fMaxCouÁ”
 )

94 
fMaxCouÁ”
 = 
fCouÁ”
;

95  
	`Flßt_t
(
fMaxCouÁ”
)/Flßt_t(
fS‹ps
);

96 
	}
}

112 
Flßt_t
 
	gTMVA
::
CÚv”g’ûTe¡
::
	$S³edCÚŒŞ
Ğ
UIÁ_t
 
ofS‹ps
 )

115 iàĞ
fBe¡ResuÉ
 > 
fLa¡ResuÉ
 || 
fSucûssLi¡
.
	`size
() <=0 ) {

116 
fLa¡ResuÉ
 = 
fBe¡ResuÉ
;

117 
fSucûssLi¡
.
	`push_äÚt
( 1 );

119 
fSucûssLi¡
.
	`push_äÚt
( 0 );

121  
ofS‹ps
 <ğ
fSucûssLi¡
.
	`size
() )

122 
fSucûssLi¡
.
	`”a£
ĞfSucûssLi¡.
	`begš
() );

123 
IÁ_t
 
n
 = 0;

124 
IÁ_t
 
sum
 = 0;

125 
¡d
::
deque
<
ShÜt_t
>::
™”©Ü
 
vec
 = 
fSucûssLi¡
.
	`begš
();

126 ; 
vec
 !ğ
fSucûssLi¡
.
	`’d
() ; vec++) {

127 
sum
 +ğ*
vec
;

128 
n
++;

131  
n
 ? 
sum
/
	`Flßt_t
(n) : 0;

132 
	}
}

	@src/CostComplexityPruneTool.cxx

51 
	~"TMVA/Co¡Com¶ex™yPruÃToŞ.h
"

53 
	~"TMVA/MsgLogg”.h
"

54 
	~"TMVA/S•¬©iÚBa£.h
"

55 
	~"TMVA/DecisiÚT»e.h
"

57 
	~"Rty³sCÜe.h
"

59 
	~<f¡»am
>

60 
	~<lim™s
>

61 
	~<m©h.h
>

63 
usšg
 
Çme¥aû
 
	gTMVA
;

69 
	gCo¡Com¶ex™yPruÃToŞ
::
	$Co¡Com¶ex™yPruÃToŞ
Ğ
S•¬©iÚBa£
* 
qu®™yIndex
 ) :

70 
	`IPruÃToŞ
(),

71 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("CostComplexityPruneTool") )

73 
fO±im®K
 = -1;

81 
fQu®™yIndexToŞ
 = 
qu®™yIndex
;

84 
fLogg”
->
	`S‘MšTy³
Ğ
kWARNING
 );

85 
	}
}

90 
	gCo¡Com¶ex™yPruÃToŞ
::~
	$Co¡Com¶ex™yPruÃToŞ
( ) {

91 if(
fQu®™yIndexToŞ
 !ğ
NULL
è
d–‘e
 fQualityIndexTool;

92 
	}
}

98 
PrunšgInfo
*

99 
	gCo¡Com¶ex™yPruÃToŞ
::
	$C®cuÏ‹PrunšgInfo
Ğ
DecisiÚT»e
* 
dt
,

100 cÚ¡ 
IPruÃToŞ
::
Ev’tSam¶e
* 
v®id©iÚSam¶e
,

101 
BoŞ_t
 
isAutom©ic
 )

103 ifĞ
isAutom©ic
 ) 
	`S‘Autom©ic
();

105 ifĞ
dt
 =ğ
NULL
 || (
	`IsAutom©ic
(è&& 
v®id©iÚSam¶e
 == NULL) ) {

109  
NULL
;

112 
DoubË_t
 
Q
 = -1.0;

113 
DoubË_t
 
W
 = 1.0;

115 if(
	`IsAutom©ic
()) {

117 
dt
->
	`AµlyV®id©iÚSam¶e
(
v®id©iÚSam¶e
);

118 
W
 = 
dt
->
	`G‘SumWeights
(
v®id©iÚSam¶e
);

120 
Q
 = 
dt
->
	`Te¡PruÃdT»eQu®™y
();

122 
	`Log
(è<< 
kDEBUG
 << "Nodpur™y†im™ is: " << 
dt
->
	`G‘NodePur™yLim™
(è<< 
Endl
;

123 
	`Log
(è<< 
kDEBUG
 << "Sum oàweight š…runšg v®id©iÚ sam¶e: " << 
W
 << 
Endl
;

124 
	`Log
(è<< 
kDEBUG
 << "Qu®™y oàŒ“…riÜØªy…runšg i " << 
Q
/
W
 << 
Endl
;

128 
Œy
 {

129 
	`In™T»ePrunšgM‘aD©a
((
DecisiÚT»eNode
*)
dt
->
	`G‘RoÙ
());

131 
	`ÿtch
(
¡d
::
¡ršg
 
”rÜ
) {

132 
	`Log
(è<< 
kERROR
 << "Couldn't initializeheree meta data because ofƒrror ("

133 << 
”rÜ
 << ")" << 
Endl
;

134  
NULL
;

137 
	`Log
(è<< 
kDEBUG
 << "Autom©iøco¡ com¶ex™y…runšg i " << (
	`IsAutom©ic
()?"Ú":"off"è<< "." << 
Endl
;

139 
Œy
 {

140 
	`O±imize
Ğ
dt
, 
W
 );

142 
	`ÿtch
(
¡d
::
¡ršg
 
”rÜ
) {

143 
	`Log
(è<< 
kERROR
 << "Error optimizing…runing sequence ("

144 << 
”rÜ
 << ")" << 
Endl
;

145  
NULL
;

148 
	`Log
(è<< 
kDEBUG
 << "Index oà´unšg sequ’ûØ¡İ‡t: " << 
fO±im®K
 << 
Endl
;

150 
PrunšgInfo
* 
šfo
 = 
Ãw
 
	`PrunšgInfo
();

153 if(
fO±im®K
 < 0) {

155 
šfo
->
PruÃSŒ’gth
 = 0;

156 
šfo
->
Qu®™yIndex
 = 
Q
/
W
;

157 
šfo
->
PruÃSequ’û
.
	`ş—r
();

158 
	`Log
(è<< 
kINFO
 << "no…roper…runing could be calculated. Tree "

159 << 
dt
->
	`G‘T»eID
() << " will‚ot be…runed. Do‚ot worry ifhis "

160 << " h­³n fÜ‡ few»e " << 
Endl
;

161  
šfo
;

163 
šfo
->
Qu®™yIndex
 = 
fQu®™yIndexLi¡
[
fO±im®K
]/
W
;

164 
	`Log
(è<< 
kDEBUG
 << "…ruÃ uÁ k=" << 
fO±im®K
 << " w™h‡Íha="<<
fPruÃSŒ’gthLi¡
[fO±im®K]<< 
Endl
;

165  
IÁ_t
 
i
 = 0; i < 
fO±im®K
; i++ ){

166 
šfo
->
PruÃSequ’û
.
	`push_back
(
fPruÃSequ’û
[
i
]);

168 ifĞ
	`IsAutom©ic
() ){

169 
šfo
->
PruÃSŒ’gth
 = 
fPruÃSŒ’gthLi¡
[
fO±im®K
];

172 
šfo
->
PruÃSŒ’gth
 = 
fPruÃSŒ’gth
;

175  
šfo
;

176 
	}
}

182 
	gCo¡Com¶ex™yPruÃToŞ
::
	$In™T»ePrunšgM‘aD©a
Ğ
DecisiÚT»eNode
* 
n
 ) {

183 ifĞ
n
 =ğ
NULL
 ) ;

185 
DoubË_t
 
s
 = 
n
->
	`G‘NSigEv’ts
();

186 
DoubË_t
 
b
 = 
n
->
	`G‘NBkgEv’ts
();

188 ià(
fQu®™yIndexToŞ
è
n
->
	`S‘NodeR
Ğ(
s
+
b
)*fQu®™yIndexToŞ->
	`G‘S•¬©iÚIndex
(s,b));

189 
n
->
	`S‘NodeR
Ğ(
s
+
b
)*n->
	`G‘S•¬©iÚIndex
() );

191 if(
n
->
	`G‘Leá
(è!ğ
NULL
 &&‚->
	`G‘Right
() != NULL) {

192 
n
->
	`S‘T”mš®
(
kFALSE
);

194 
	`In™T»ePrunšgM‘aD©a
(
n
->
	`G‘Leá
());

195 
	`In™T»ePrunšgM‘aD©a
(
n
->
	`G‘Right
());

197 
n
->
	`S‘NT”mš®
Ğn->
	`G‘Leá
()->
	`G‘NT”mš®
() +

198 
n
->
	`G‘Right
()->
	`G‘NT”mš®
());

200 
n
->
	`S‘SubT»eR
ĞÒ->
	`G‘Leá
()->
	`G‘SubT»eR
() +

201 
n
->
	`G‘Right
()->
	`G‘SubT»eR
()));

203 
n
->
	`S‘AÍha
Ğ(Ò->
	`G‘NodeR
(è-‚->
	`G‘SubT»eR
()) /

204 (
n
->
	`G‘NT”mš®
() - 1)));

208 
n
->
	`S‘AÍhaMšSubŒ“
Ğ
¡d
::
	`mš
Ò->
	`G‘AÍha
(), std::mšÒ->
	`G‘Leá
()->
	`G‘AÍhaMšSubŒ“
(),

209 
n
->
	`G‘Right
()->
	`G‘AÍhaMšSubŒ“
())));

210 
n
->
	`S‘CC
Ò->
	`G‘AÍha
());

213 
n
->
	`S‘NT”mš®
Ğ1 );‚->
	`S‘T”mš®
( );

214 ià(
fQu®™yIndexToŞ
è
n
->
	`S‘SubT»eR
(((
s
+
b
)*fQu®™yIndexToŞ->
	`G‘S•¬©iÚIndex
(s,b)));

215 
n
->
	`S‘SubT»eR
Ğ(
s
+
b
)*n->
	`G‘S•¬©iÚIndex
() );

216 
n
->
	`S‘AÍha
(
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ));

217 
n
->
	`S‘AÍhaMšSubŒ“
(
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ));

218 
n
->
	`S‘CC
Ò->
	`G‘AÍha
());

224 
	}
}

237 
	gCo¡Com¶ex™yPruÃToŞ
::
	$O±imize
Ğ
DecisiÚT»e
* 
dt
, 
DoubË_t
 
weights
 ) {

238 
IÁ_t
 
k
 = 1;

239 
DoubË_t
 
®pha
 = -1.0e10;

240 
DoubË_t
 
•sÚ
 = 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
();

242 
fQu®™yIndexLi¡
.
	`ş—r
();

243 
fPruÃSequ’û
.
	`ş—r
();

244 
fPruÃSŒ’gthLi¡
.
	`ş—r
();

246 
DecisiÚT»eNode
* 
R
 = (DecisiÚT»eNode*)
dt
->
	`G‘RoÙ
();

248 
DoubË_t
 
qmš
 = 0.0;

249 if(
	`IsAutom©ic
()){

251 
qmš
 = 
dt
->
	`Te¡PruÃdT»eQu®™y
()/
weights
;

263 
R
->
	`G‘NT”mš®
() > 1) {

266 
®pha
 = 
TM©h
::
	`Max
(
R
->
	`G‘AÍhaMšSubŒ“
(),‡lpha);

268 ifĞ
R
->
	`G‘AÍhaMšSubŒ“
(è>ğR->
	`G‘AÍha
() ) {

269 
	`Log
(è<< 
kDEBUG
 << "\nCaughˆŒyšgØ´uÃhroÙ‚ode!" << 
Endl
;

274 
DecisiÚT»eNode
* 
t
 = 
R
;

277 
t
->
	`G‘AÍhaMšSubŒ“
(è<->
	`G‘AÍha
()) {

282 if(
TM©h
::
	`Abs
(
t
->
	`G‘AÍhaMšSubŒ“
(è-->
	`G‘Leá
()->G‘AÍhaMšSubŒ“()è< 
•sÚ
) {

283 
t
 =->
	`G‘Leá
();

285 
t
 =->
	`G‘Right
();

289 ifĞ
t
 =ğ
R
 ) {

290 
	`Log
(è<< 
kDEBUG
 << "\nCaughˆŒyšgØ´uÃhroÙ‚ode!" << 
Endl
;

294 
DecisiÚT»eNode
* 
n
 = 
t
;

303 
dt
->
	`PruÃNodeInPÏû
(
t
);

305 
t
 !ğ
R
) {

306 
t
 =->
	`G‘P¬’t
();

307 
t
->
	`S‘NT”mš®
Ñ->
	`G‘Leá
()->
	`G‘NT”mš®
(è+->
	`G‘Right
()->GetNTerminal());

308 
t
->
	`S‘SubT»eR
Ñ->
	`G‘Leá
()->
	`G‘SubT»eR
(è+->
	`G‘Right
()->GetSubTreeR());

309 
t
->
	`S‘AÍha
(Ñ->
	`G‘NodeR
(è-->
	`G‘SubT»eR
())/Ñ->
	`G‘NT”mš®
() - 1));

310 
t
->
	`S‘AÍhaMšSubŒ“
(
¡d
::
	`mš
Ñ->
	`G‘AÍha
(), std::mšÑ->
	`G‘Leá
()->
	`G‘AÍhaMšSubŒ“
(),

311 
t
->
	`G‘Right
()->
	`G‘AÍhaMšSubŒ“
())));

312 
t
->
	`S‘CC
Ñ->
	`G‘AÍha
());

314 
k
 += 1;

316 
	`Log
(è<< 
kDEBUG
 << "aá”hi ´unšg s‹°I would hav" << 
R
->
	`G‘NT”mš®
(è<< "„emaššg”mš®‚ode " << 
Endl
;

318 if(
	`IsAutom©ic
()) {

319 
DoubË_t
 
q
 = 
dt
->
	`Te¡PruÃdT»eQu®™y
()/
weights
;

320 
fQu®™yIndexLi¡
.
	`push_back
(
q
);

323 
fQu®™yIndexLi¡
.
	`push_back
(1.0);

325 
fPruÃSequ’û
.
	`push_back
(
n
);

326 
fPruÃSŒ’gthLi¡
.
	`push_back
(
®pha
);

329 if(
fPruÃSequ’û
.
	`em±y
()) {

330 
fO±im®K
 = -1;

334 if(
	`IsAutom©ic
()) {

335 
k
 = -1;

336 
UIÁ_t
 
i
 = 0; i < 
fQu®™yIndexLi¡
.
	`size
(); i++) {

337 if(
fQu®™yIndexLi¡
[
i
] < 
qmš
) {

338 
qmš
 = 
fQu®™yIndexLi¡
[
i
];

339 
k
 = 
i
;

342 
fO±im®K
 = 
k
;

346 
fO±im®K
 = (
fPruÃSŒ’gth
/100.0 * 
fPruÃSequ’û
.
	`size
() );

347 
	`Log
(è<< 
kDEBUG
 << "Sequ’zeSize="<<
fPruÃSequ’û
.
	`size
()

348 << " fO±im®K " << 
fO±im®K
 << 
Endl
;

352 
	`Log
(è<< 
kDEBUG
 << "\n************ Summ¬y fÜ T»" << 
dt
->
	`G‘T»eID
(è<< " *******" << 
Endl


353 << "Numb” oàŒ“ šh£qu’û: " << 
fPruÃSequ’û
.
	`size
(è<< 
Endl
;

355 
	`Log
(è<< 
kDEBUG
 << "Pruning strength…arameters: [";

356 
UIÁ_t
 
i
 = 0; i < 
fPruÃSŒ’gthLi¡
.
	`size
()-1; i++)

357 
	`Log
(è<< 
kDEBUG
 << 
fPruÃSŒ’gthLi¡
[
i
] << ", ";

358 
	`Log
(è<< 
kDEBUG
 << 
fPruÃSŒ’gthLi¡
[fPruÃSŒ’gthLi¡.
	`size
()-1] << "]" << 
Endl
;

360 
	`Log
(è<< 
kDEBUG
 << "Misclassification„ates: [";

361 
UIÁ_t
 
i
 = 0; i < 
fQu®™yIndexLi¡
.
	`size
()-1; i++)

362 
	`Log
(è<< 
kDEBUG
 << 
fQu®™yIndexLi¡
[
i
] << ", ";

363 
	`Log
(è<< 
kDEBUG
 << 
fQu®™yIndexLi¡
[fQu®™yIndexLi¡.
	`size
()-1] << "]" << 
Endl
;

365 
	`Log
(è<< 
kDEBUG
 << "PruÃ index: " << 
fO±im®K
+1 << 
Endl
;

367 
	}
}

	@src/CrossEntropy.cxx

37 
	~"TM©h.h
"

38 
	~"TMVA/CrossEÁrİy.h
"

40 
CÏssImp
(
TMVA
::
CrossEÁrİy
);

47 
DoubË_t
 
	gTMVA
::
CrossEÁrİy
::
	$G‘S•¬©iÚIndex
ĞcÚ¡ 
DoubË_t
 
s
, cÚ¡ DoubË_ˆ
b
 )

49 ià(
s
+
b
 <= 0)  0;

50 
DoubË_t
 
p
 = 
s
/(s+
b
);

51 ià(
p
<=0 ||… >=1)  0;

53  - ( 
p
 * 
TM©h
::
	`Log2
(p) + (1-p)*TMath::Log2(1-p) );

54 
	}
}

	@src/CrossValidation.cxx

4 
	~"TMVA/CrossV®id©iÚ.h
"

6 
	~"TMVA/CÚfig.h
"

7 
	~"TMVA/D©aS‘.h
"

8 
	~"TMVA/Ev’t.h
"

9 
	~"TMVA/M‘hodBa£.h
"

10 
	~"TMVA/MsgLogg”.h
"

11 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

12 
	~"TMVA/tmvaglob.h
"

13 
	~"TMVA/Ty³s.h
"

15 
	~"TSy¡em.h
"

16 
	~"TAxis.h
"

17 
	~"TCªvas.h
"

18 
	~"TG¿ph.h
"

19 
	~"TM©h.h
"

21 
	~<io¡»am
>

22 
	~<memÜy
>

32 
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$CrossV®id©iÚResuÉ
():
	`fROCCurves
(
Ãw
 
	$TMuÉiG¿ph
())

34 
	}
}

36 
TMVA
::
CrossV®id©iÚResuÉ
::
	$CrossV®id©iÚResuÉ
(cÚ¡ 
CrossV®id©iÚResuÉ
 &
obj
)

38 
fROCs
=
obj
.fROCs;

39 
fROCCurves
 = 
obj
.fROCCurves;

40 
	}
}

42 
TMuÉiG¿ph
 *
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$G‘ROCCurves
(
BoŞ_t
 )

44  
fROCCurves
.
	`g‘
();

45 
	}
}

47 
Flßt_t
 
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$G‘ROCAv”age
() const

49 
Flßt_t
 
avg
=0;

50 autØ&
roc
:
fROCs
è
avg
+ôoc.
£cÚd
;

51  
avg
/
fROCs
.
	`size
();

52 
	}
}

54 
Flßt_t
 
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$G‘ROCSnd¬dDevŸtiÚ
() const

57 
Flßt_t
 
¡d
=0;

58 
Flßt_t
 
avg
=
	`G‘ROCAv”age
();

59 autØ&
roc
:
fROCs
è
¡d
+=
TM©h
::
	`Pow”
Ôoc.
£cÚd
-
avg
, 2);

60  
TM©h
::
	`Sq¹
(
¡d
/(
fROCs
.
	`size
()-1.0));

61 
	}
}

63 
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$Pršt
() const

65 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

66 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

68 
MsgLogg”
 
	`fLogg”
("CrossValidation");

69 
fLogg”
 << 
kHEADER
 << " ===ğResuÉ ====" << 
Endl
;

70 autØ&
™em
:
fROCs
)

71 
fLogg”
 << 
kINFO
 << 
	`FÜm
("FŞd %˜ROC-IÁ : %.4f",
™em
.
fœ¡
,™em.
£cÚd
è<< 
¡d
::
’dl
;

73 
fLogg”
 << 
kINFO
 << "------------------------" << 
Endl
;

74 
fLogg”
 << 
kINFO
 << 
	`FÜm
("Av”agROC-IÁ : %.4f",
	`G‘ROCAv”age
()è<< 
Endl
;

75 
fLogg”
 << 
kINFO
 << 
	`FÜm
("Std-Dev ROC-IÁ : %.4f",
	`G‘ROCSnd¬dDevŸtiÚ
()è<< 
Endl
;

77 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

78 
	}
}

80 
TCªvas
* 
	gTMVA
::
CrossV®id©iÚResuÉ
::
	$D¿w
(cÚ¡ 
TSŒšg
 
Çme
) const

82 
TCªvas
 *
c
=
Ãw
 
	`TCªvas
(
Çme
.
	`D©a
());

83 
fROCCurves
->
	`D¿w
("AL");

84 
fROCCurves
->
	`G‘Xaxis
()->
	`S‘T™Ë
(" Signal Efficiency ");

85 
fROCCurves
->
	`G‘Yaxis
()->
	`S‘T™Ë
(" Background Rejection ");

86 
Flßt_t
 
adju¡
=1+
fROCs
.
	`size
()*0.01;

87 
c
->
	`BudLeg’d
(0.15,0.15,0.4*
adju¡
,0.5*adjust);

88 
c
->
	`S‘T™Ë
("Cross Validation ROC Curves");

89 
c
->
	`D¿w
();

90  
c
;

91 
	}
}

93 
	gTMVA
::
CrossV®id©iÚ
::
	$CrossV®id©iÚ
(
TMVA
::
D©aLßd”
 *
d©®ßd”
):TMVA::
	`Env–İe
("CrossValidation",dataloader),

94 
	`fNumFŞds
(5),
	`fCÏssif›r
(
Ãw
 
TMVA
::
	`FaùÜy
("CrossValidation","!V:!ROC:Silent:!ModelPersistence:!Color:!DrawProgressBar:AnalysisType=Classification"))

96 
fFŞdStus
=
kFALSE
;

97 
	}
}

99 
	gTMVA
::
CrossV®id©iÚ
::~
	$CrossV®id©iÚ
()

101 
fCÏssif›r
=
nuÎ±r
;

102 
	}
}

104 
	gTMVA
::
CrossV®id©iÚ
::
	$S‘NumFŞds
(
UIÁ_t
 
i
)

106 
fNumFŞds
=
i
;

107 
fD©aLßd”
->
	`MakeKFŞdD©aS‘
(
fNumFŞds
);

108 
fFŞdStus
=
kTRUE
;

109 
	}
}

111 
	gTMVA
::
CrossV®id©iÚ
::
	$Ev®u©e
()

113 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

114 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

115 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

116 if(
m‘hodName
 =ğ""è
	`Log
(è<< 
kFATAL
 << "NØm‘hod booked fÜ cross-v®id©iÚ" << 
Endl
;

118 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

119 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

120 
	`Log
(è<< 
kINFO
 << "Ev®u©m‘hod: " << 
m‘hodT™Ë
 << 
Endl
;

121 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

124 if(!
fFŞdStus
){

125 
fD©aLßd”
->
	`MakeKFŞdD©aS‘
(
fNumFŞds
);

126 
fFŞdStus
=
kTRUE
;

130 
UIÁ_t
 
i
=0; i<
fNumFŞds
; ++i){

131 
	`Log
(è<< 
kDEBUG
 << "FŞd (" << 
m‘hodT™Ë
 << "): " << 
i
 << 
Endl
;

133 
TSŒšg
 
fŞdT™Ë
 = 
m‘hodT™Ë
;

134 
fŞdT™Ë
 += "_fold";

135 
fŞdT™Ë
 +ğ
i
+1;

137 
fD©aLßd”
->
	`P»·»FŞdD©aS‘
(
i
, 
TMVA
::
Ty³s
::
kTe¡šg
);

138 
M‘hodBa£
* 
sm‘hod
 = 
fCÏssif›r
->
	`BookM‘hod
(
fD©aLßd”
.
	`g‘
(), 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

141 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

142 
sm‘hod
->
	`T¿šM‘hod
();

145 
Ev’t
::
	`S‘IsT¿ššg
(
kFALSE
);

146 
sm‘hod
->
	`AddOuut
(
Ty³s
::
kTe¡šg
, sm‘hod->
	`G‘AÇlysisTy³
());

147 
sm‘hod
->
	`Te¡CÏssifiÿtiÚ
();

150 
fResuÉs
.
fROCs
[
i
] = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
fD©aLßd”
->
	`G‘Name
(),
m‘hodT™Ë
);

152 
TG¿ph
* 
gr
 = 
fCÏssif›r
->
	`G‘ROCCurve
(
fD©aLßd”
->
	`G‘Name
(), 
m‘hodT™Ë
, 
Œue
);

153 
gr
->
	`S‘LšeCŞÜ
(
i
+1);

154 
gr
->
	`S‘LšeWidth
(2);

155 
gr
->
	`S‘T™Ë
(
fŞdT™Ë
.
	`D©a
());

156 
fResuÉs
.
fROCCurves
->
	`Add
(
gr
);

158 
fResuÉs
.
fSigs
.
	`push_back
(
sm‘hod
->
	`G‘Signifiÿnû
());

159 
fResuÉs
.
fS•s
.
	`push_back
(
sm‘hod
->
	`G‘S•¬©iÚ
());

161 
DoubË_t
 
”r
;

162 
fResuÉs
.
fEff01s
.
	`push_back
(
sm‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.01",
Ty³s
::
kTe¡šg
, 
”r
));

163 
fResuÉs
.
fEff10s
.
	`push_back
(
sm‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.10",
Ty³s
::
kTe¡šg
,
”r
));

164 
fResuÉs
.
fEff30s
.
	`push_back
(
sm‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.30",
Ty³s
::
kTe¡šg
,
”r
));

165 
fResuÉs
.
fEffA»as
.
	`push_back
(
sm‘hod
->
	`G‘Effic›ncy
("" ,
Ty³s
::
kTe¡šg
,
”r
));

166 
fResuÉs
.
fT¿šEff01s
.
	`push_back
(
sm‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.01"));

167 
fResuÉs
.
fT¿šEff10s
.
	`push_back
(
sm‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.10"));

168 
fResuÉs
.
fT¿šEff30s
.
	`push_back
(
sm‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.30"));

171 
sm‘hod
->
	`D©a
()->
	`D–‘eResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

172 
sm‘hod
->
	`D©a
()->
	`D–‘eResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, Ty³s::
kCÏssifiÿtiÚ
);

173 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

174 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

177 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

178 
	`Log
(è<< 
kINFO
 << "Ev®u©iÚ dÚe." << 
Endl
;

179 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

180 
	}
}

182 cÚ¡ 
	gTMVA
::
CrossV®id©iÚResuÉ
& 
TMVA
::
CrossV®id©iÚ
::
	$G‘ResuÉs
() const {

183 if(
fResuÉs
.
fROCs
.
	`size
()==0è
	`Log
(è<< 
kFATAL
 << "NØüoss-v®id©iÚ„esuÉ avaabË" << 
Endl
;

184  
fResuÉs
;

185 
	}
}

	@src/DNN/Architectures/Cpu.cxx

16 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

18 
	~"Cpu/Aùiv©iÚFunùiÚs.cxx
"

19 
	~"Cpu/Ar™hm‘ic.cxx
"

20 
	~"Cpu/Drİout.cxx
"

21 
	~"Cpu/In™Ÿliz©iÚ.cxx
"

22 
	~"Cpu/LossFunùiÚs.cxx
"

23 
	~"Cpu/OuutFunùiÚs.cxx
"

24 
	~"Cpu/Prİag©iÚ.cxx
"

25 
	~"Cpu/ReguÏriz©iÚ.cxx
"

28 
Çme¥aû
 
	gTMVA
 {

29 
Çme¥aû
 
	gDNN
 {

30 
‹m¶©e
 
şass
 
	gTCpu
<
	gDoubË_t
>;

31 
‹m¶©e
 
şass
 
	gTCpu
<
	gR—l_t
>;

	@src/DNN/Architectures/Cpu/ActivationFunctions.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

18 
	~<m©h.h
>

20 
Çme¥aû
 
	gTMVA


22 
Çme¥aû
 
	gDNN


26 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

27 
	gTCpu
<
	gAFlßt
>::
Id’t™yD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

28 cÚ¡ 
TCpuM©rix
<
AFlßt
> & )

30 autØ
	gf
 = [](
AFlßt
) { 1.0;};

31 
	gB
.
M­
(
f
);

35 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

36 
	gTCpu
<
	gAFlßt
>::
R–u
(
TCpuM©rix
<
AFlßt
> & 
B
)

38 autØ
f
 = [](
AFlßt
 
x
) { (x < 0.0) ? 0.0 : x;};

39 
	gB
.
M­
(
f
);

43 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

44 
	gTCpu
<
	gAFlßt
>::
R–uD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

45 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

47 autØ
	gf
 = [](
AFlßt
 
x
) { (x < 0.0) ? 0.0 : 1.0;};

48 
	gB
.
M­From
(
f
, 
A
);

52 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

53 
	gTCpu
<
	gAFlßt
>::
Sigmoid
(
TCpuM©rix
<
AFlßt
> & 
B
)

55 autØ
f
 = [](
AFlßt
 
x
è{ 1.0 / (1.0 + 
exp
(-x));};

56 
	gB
.
M­
(
f
);

60 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

61 
	gTCpu
<
	gAFlßt
>::
SigmoidD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

62 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

64 autØ
	gf
 = [](
AFlßt
 
x
) {

65 
AFlßt
 
sig
 = 1.0 / (1.0 + 
exp
(-
x
));

66  
	gsig
 * (1.0 - sig);

68 
	gB
.
M­From
(
f
, 
A
);

72 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

73 
	gTCpu
<
	gAFlßt
>::
Tªh
(
TCpuM©rix
<
AFlßt
> & 
B
)

75 autØ
f
 = [](
AFlßt
 
x
è{ 
nh
(x);};

76 
	gB
.
M­
(
f
);

80 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

81 
	gTCpu
<
	gAFlßt
>::
TªhD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

82 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

84 autØ
	gf
 = [](
AFlßt
 
x
) {

85 
AFlßt
 
t
 = 
nh
(
x
);

86  1 - 
t
 * 
	gt
;

88 
	gB
.
M­From
(
f
, 
A
);

92 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

93 
	gTCpu
<
	gAFlßt
>::
Symm‘ricR–u
(
TCpuM©rix
<
AFlßt
> & 
B
)

95 autØ
f
 = [](
AFlßt
 
x
è{ 
çbs
(x);};

96 
	gB
.
M­
(
f
);

100 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

101 
	gTCpu
<
	gAFlßt
>::
Symm‘ricR–uD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

102 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

104 autØ
	gf
 = [](
AFlßt
 
x
) {

105  (
x
 < 0.0) ? -1.0 : 1.0;

107 
	gB
.
M­From
(
f
, 
A
);

111 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

112 
	gTCpu
<
	gAFlßt
>::
SoáSign
(
TCpuM©rix
<
AFlßt
> & 
B
)

114 autØ
f
 = [](
AFlßt
 
x
è{ x / (1 + 
çbs
(x));};

115 
	gB
.
M­
(
f
);

119 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

120 
	gTCpu
<
	gAFlßt
>::
SoáSignD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

121 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

123 autØ
	gf
 = [](
AFlßt
 
x
) {

124 
x
 = 1.0 + 
çbs
(x);

125 
	gx
 = 1.0 / (
x
 * x);

126  
	gx
;

128 
	gB
.
M­From
(
f
, 
A
);

132 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

133 
	gTCpu
<
	gAFlßt
>::
Gauss
(
TCpuM©rix
<
AFlßt
> & 
B
)

135 autØ
f
 = [](
AFlßt
 
x
è{ 
exp
(- x * x);};

136 
	gB
.
M­
(
f
);

140 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

141 
	gTCpu
<
	gAFlßt
>::
GaussD”iv©ive
(
TCpuM©rix
<
AFlßt
> & 
B
,

142 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
A
)

144 autØ
	gf
 = [](
AFlßt
 
x
è{ - 2.0 * x * 
exp
(- x * x);};

145 
	gB
.
M­From
(
f
, 
A
);

	@src/DNN/Architectures/Cpu/Arithmetic.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu/BÏs.h
"

19 
	~"tbb/tbb.h
"

21 
Çme¥aû
 
	gTMVA


23 
Çme¥aû
 
	gDNN


27 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

28 
	gTCpu
<
	gR—l_t
>::
MuÉly
(
TCpuM©rix
<
R—l_t
> &
C
,

29 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
,

30 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
B
)

32 
	gm
 = (è
A
.
G‘Nrows
();

33 
	gk
 = (è
A
.
G‘NcŞs
();

34 
	gn
 = (è
B
.
G‘NcŞs
();

36 
	gŒª§
 = 'N';

37 
	gŒªsb
 = 'N';

39 
R—l_t
 
	g®pha
 = 1.0;

40 
R—l_t
 
	gb‘a
 = 0.0;

42 cÚ¡ 
R—l_t
 * 
	gAPoš‹r
 = 
A
.
G‘RawD©aPoš‹r
();

43 cÚ¡ 
R—l_t
 * 
	gBPoš‹r
 = 
B
.
G‘RawD©aPoš‹r
();

44 
R—l_t
 * 
	gCPoš‹r
 = 
C
.
G‘RawD©aPoš‹r
();

46 ::
TMVA
::
DNN
::
BÏs
::
Gemm
(&
Œª§
, &
Œªsb
, &
m
, &
n
, &
k
, &
®pha
,

47 
APoš‹r
, &
m
, 
BPoš‹r
, &
k
, &
b‘a
, 
CPoš‹r
, &m);

51 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

52 
	gTCpu
<
	gR—l_t
>::
T¿n¥o£MuÉly
(
TCpuM©rix
<
R—l_t
> &
C
,

53 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
,

54 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
B
)

56 
	gm
 = (è
A
.
G‘NcŞs
();

57 
	gk
 = (è
A
.
G‘Nrows
();

58 
	gn
 = (è
B
.
G‘NcŞs
();

60 
	gŒª§
 = 'T';

61 
	gŒªsb
 = 'N';

63 
R—l_t
 
	g®pha
 = 1.0;

64 
R—l_t
 
	gb‘a
 = 0.0;

66 cÚ¡ 
R—l_t
 *
	gAPoš‹r
 = 
A
.
G‘RawD©aPoš‹r
();

67 cÚ¡ 
R—l_t
 *
	gBPoš‹r
 = 
B
.
G‘RawD©aPoš‹r
();

68 
R—l_t
 *
	gCPoš‹r
 = 
C
.
G‘RawD©aPoš‹r
();

70 ::
TMVA
::
DNN
::
BÏs
::
Gemm
(&
Œª§
, &
Œªsb
, &
m
, &
n
, &
k
, &
®pha
,

71 
APoš‹r
, &
k
, 
BPoš‹r
, &k, &
b‘a
, 
CPoš‹r
, &
m
);

75 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

76 
	gTCpu
<
	gR—l_t
>::
Hadam¬d
(
TCpuM©rix
<
R—l_t
> &
B
,

77 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
)

79 cÚ¡ 
R—l_t
 *
	gd©aA
 = 
A
.
G‘RawD©aPoš‹r
();

80 
R—l_t
 *
	gd©aB
 = 
B
.
G‘RawD©aPoš‹r
();

82 autØ
	gf
 = [&
d©aA
, &
d©aB
](
UIÁ_t
 
	gwÜk”ID
)

84 
	gd©aB
[
wÜk”ID
] *ğ
d©aA
[workerID];

88 
	gB
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
B
.
G‘NEËm’ts
()));

92 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

93 
	gTCpu
<
	gR—l_t
>::
SumCŞumns
(
TCpuM©rix
<
R—l_t
> &
B
,

94 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
)

96 
	gm
 = (è
A
.
G‘Nrows
();

97 
	gn
 = (è
A
.
G‘NcŞs
();

98 
	gšc
 = 1;

100 
R—l_t
 
	g®pha
 = 1.0;

101 
R—l_t
 
	gb‘a
 = 0.0;

102 
	gŒªs
 = 'T';

104 cÚ¡ 
R—l_t
 * 
	gAPoš‹r
 = 
A
.
G‘RawD©aPoš‹r
();

105 
R—l_t
 * 
	gBPoš‹r
 = 
B
.
G‘RawD©aPoš‹r
();

107 ::
TMVA
::
DNN
::
BÏs
::
Gemv
(&
Œªs
, &
m
, &
n
, &
®pha
, 
APoš‹r
, &m,

108 
TCpuM©rix
<
R—l_t
>::
G‘OÃPoš‹r
(), &
šc
,

109 &
b‘a
, 
BPoš‹r
, &
šc
);

113 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

114 
	gTCpu
<
	gR—l_t
>::
SÿËAdd
(
TCpuM©rix
<
R—l_t
> &
B
,

115 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
,

116 
R—l_t
 
®pha
)

118 
	gn
 = (è(
A
.
G‘NcŞs
(è* A.
G‘Nrows
());

119 
	gšc
 = 1;

121 cÚ¡ 
R—l_t
 *
	gx
 = 
A
.
G‘RawD©aPoš‹r
();

122 
R—l_t
 *
	gy
 = 
B
.
G‘RawD©aPoš‹r
();

124 ::
TMVA
::
DNN
::
BÏs
::
Axpy
(&
n
, &
®pha
, 
x
, &
šc
, 
y
, &inc);

128 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

129 
	gTCpu
<
	gR—l_t
>::
Cİy
(
TCpuM©rix
<
R—l_t
> &
B
,

130 cÚ¡ 
TCpuM©rix
<
R—l_t
> &
A
)

132 autØ
	gf
 = [](
R—l_t
 
x
) { x;};

133 
	gB
.
M­From
(
f
, 
A
);

	@src/DNN/Architectures/Cpu/CpuBuffer.cxx

16 
	~<veùÜ
>

17 
	~<memÜy
>

18 
	~"TMVA/DNN/D©aLßd”.h
"

19 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

20 
	~"Rty³s.h
"

21 
	~<io¡»am
>

23 
Çme¥aû
 
	gTMVA


25 
Çme¥aû
 
	gDNN


29 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

30 
	gTCpuBufãr
<
	gAR—l
>::
TDe¡ruùÜ
::
İ”©Ü
()(
AR—l
 ** 
poš‹r
)

32 
d–‘e
[] * 
poš‹r
;

33 
	gd–‘e
[] 
	gpoš‹r
;

37 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

38 
	gTCpuBufãr
<
	gAR—l
>::
TCpuBufãr
(
size_t
 
size
)

39 : 
fSize
(
size
), 
fOff£t
(0)

41 
AR—l
 ** 
	gpoš‹r
 = 
Ãw
 AReal * [1];

42 * 
	gpoš‹r
 = 
Ãw
 
AR—l
[
size
];

43 
	gfBufãr
 = 
¡d
::
sh¬ed_±r
<
AR—l
 *>(
poš‹r
, 
	gfDe¡ruùÜ
);

47 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

48 
	gTCpuBufãr
<
	gAR—l
> TCpuBufãr<AR—l>::
G‘SubBufãr
(
size_t
 
off£t
, size_ˆ
size
)

50 
TCpuBufãr
 
	gbufãr
 = *
this
;

51 
	gbufãr
.
	gfOff£t
 = 
off£t
;

52 
	gbufãr
.
	gfSize
 = 
size
;

53  
	gbufãr
;

57 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

58 
	gTCpuBufãr
<
	gAR—l
>::
CİyFrom
(
TCpuBufãr
 & 
Ùh”
)

60 
¡d
::
sw­
(*
this
->
fBufãr
, *
Ùh”
.fBuffer);

64 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

65 
	gTCpuBufãr
<
	gAR—l
>::
CİyTo
(
TCpuBufãr
 & 
Ùh”
)

67 
¡d
::
sw­
(*
this
->
fBufãr
, *
Ùh”
.fBuffer);

71 
	g‹m¶©e
<>

72 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCpu
<
	gR—l_t
>>::
CİyIÅut
(

73 
TCpuBufãr
<
R—l_t
> & 
bufãr
,

74 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

75 
size_t
 
b©chSize
)

77 cÚ¡ 
	gTM©rixT
<
	gR—l_t
> &
	gšputM©rix
 = 
¡d
::
g‘
<0>(
fD©a
);

78 
size_t
 
	gn
 = 
šputM©rix
.
G‘NcŞs
();

80 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

81 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

82 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

83 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

84 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<
R—l_t
>(
šputM©rix
(
§m¶eIndex
, 
j
));

86 
	g§m¶eI‹¿tÜ
++;

91 
	g‹m¶©e
<>

92 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCpu
<
	gR—l_t
>>::
CİyOuut
(

93 
TCpuBufãr
<
R—l_t
> & 
bufãr
,

94 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

95 
size_t
 
b©chSize
)

97 cÚ¡ 
	gTM©rixT
<
	gR—l_t
> &
	gouutM©rix
 = 
¡d
::
g‘
<1>(
fD©a
);

98 
size_t
 
	gn
 = 
ouutM©rix
.
G‘NcŞs
();

100 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

101 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

102 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

103 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

104 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<
R—l_t
>(
ouutM©rix
(
§m¶eIndex
, 
j
));

106 
	g§m¶eI‹¿tÜ
++;

111 
	g‹m¶©e
<>

112 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCpu
<
	gDoubË_t
>>::
CİyIÅut
(

113 
TCpuBufãr
<
DoubË_t
> & 
bufãr
,

114 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

115 
size_t
 
b©chSize
)

117 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gšputM©rix
 = 
¡d
::
g‘
<0>(
fD©a
);

118 
size_t
 
	gn
 = 
šputM©rix
.
G‘NcŞs
();

120 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

121 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

122 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

123 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

124 
	gbufãr
[
bufãrIndex
] = 
šputM©rix
(
§m¶eIndex
, 
j
);

126 
	g§m¶eI‹¿tÜ
++;

131 
	g‹m¶©e
<>

132 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCpu
<
	gDoubË_t
>>::
CİyOuut
(

133 
TCpuBufãr
<
DoubË_t
> & 
bufãr
,

134 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

135 
size_t
 
b©chSize
)

137 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gouutM©rix
 = 
¡d
::
g‘
<1>(
fD©a
);

138 
size_t
 
	gn
 = 
ouutM©rix
.
G‘NcŞs
();

140 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

141 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

142 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

143 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

144 
	gbufãr
[
bufãrIndex
] = 
ouutM©rix
(
§m¶eIndex
, 
j
);

146 
	g§m¶eI‹¿tÜ
++;

151 
	g‹m¶©e
<>

152 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCpu
<
	gDoubË_t
>>::
CİyIÅut
(

153 
TCpuBufãr
<
DoubË_t
> & 
bufãr
,

154 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

155 
size_t
 
b©chSize
)

157 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

158 
size_t
 
	gn
 = 
ev’t
->
G‘NV¬ŸbËs
();

162 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

163 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

164 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

165 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

166 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

167 
	gbufãr
[
bufãrIndex
] = 
ev’t
->
G‘V®ue
(
j
);

173 
	g‹m¶©e
<>

174 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCpu
<
	gDoubË_t
>>::
CİyOuut
(

175 
TCpuBufãr
<
DoubË_t
> & 
bufãr
,

176 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

177 
size_t
 
b©chSize
)

179 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

180 
size_t
 
	gn
 = 
bufãr
.
G‘Size
(è/ 
b©chSize
;

184 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

185 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

186 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

187 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

189 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

191 ià(
	gev’t
->
G‘NT¬g‘s
() == 0) {

192 ià(
n
 == 1) {

194 
bufãr
[
bufãrIndex
] = (
ev’t
->
G‘CÏss
() == 0) ? 1.0 : 0.0;

197 
	gbufãr
[
bufãrIndex
] = 0.0;

198 ià(
	gj
 =ğ
ev’t
->
G‘CÏss
()) {

199 
bufãr
[
bufãrIndex
] = 1.0;

203 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<
R—l_t
>(
ev’t
->
G‘T¬g‘
(
j
));

210 
	g‹m¶©e
<>

211 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCpu
<
	gR—l_t
>>::
CİyIÅut
(

212 
TCpuBufãr
<
R—l_t
> & 
bufãr
,

213 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

214 
size_t
 
b©chSize
)

216 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

217 
size_t
 
	gn
 = 
ev’t
->
G‘NV¬ŸbËs
();

221 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

222 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

223 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

224 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

225 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

226 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<
R—l_t
>(
ev’t
->
G‘V®ue
(
j
));

232 
	g‹m¶©e
<>

233 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCpu
<
	gR—l_t
>>::
CİyOuut
(

234 
TCpuBufãr
<
R—l_t
> & 
bufãr
,

235 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

236 
size_t
 
b©chSize
)

238 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

239 
size_t
 
	gn
 = 
bufãr
.
G‘Size
(è/ 
b©chSize
;

243 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

244 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

245 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

246 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

248 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

250 ià(
	gev’t
->
G‘NT¬g‘s
() == 0) {

251 ià(
n
 == 1) {

253 
bufãr
[
bufãrIndex
] = (
ev’t
->
G‘CÏss
() == 0) ? 1.0 : 0.0;

256 
	gbufãr
[
bufãrIndex
] = 0.0;

257 ià(
	gj
 =ğ
ev’t
->
G‘CÏss
()) {

258 
bufãr
[
bufãrIndex
] = 1.0;

262 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<
R—l_t
>(
ev’t
->
G‘T¬g‘
(
j
));

269 
‹m¶©e
 
şass
 
	gTCpuBufãr
<
	gDoubË_t
>;

270 
‹m¶©e
 
şass
 
	gTCpuBufãr
<
	gR—l_t
>;

	@src/DNN/Architectures/Cpu/CpuMatrix.cxx

16 
	~"TMVA/DNN/Arch™eùu»s/Cpu/CpuM©rix.h
"

18 
Çme¥aû
 
	gTMVA
 {

19 
Çme¥aû
 
	gDNN
 {

22 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

23 
	gTCpuM©rix
<
	gAR—l
>::
TCpuM©rix
(
size_t
 
nRows
, size_ˆ
nCŞs
)

24 : 
fBufãr
(
nRows
 * 
nCŞs
), 
fNCŞs
ÒCŞs), 
fNRows
(nRows)

26 
In™Ÿlize
();

30 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

31 
	gTCpuM©rix
<
	gAR—l
>::
TCpuM©rix
(cÚ¡ 
TM©rixT
<
DoubË_t
> & 
B
)

32 : 
fBufãr
(
B
.
G‘NoEËm’ts
()), 
fNCŞs
(B.
G‘NcŞs
()), 
fNRows
(B.
G‘Nrows
())

34 
In™Ÿlize
();

35 
size_t
 
	gj
 = 0; j < 
	gfNCŞs
; j++) {

36 
size_t
 
	gi
 = 0; i < 
	gfNRows
; i++) {

37 (*
	gthis
)(
	gi
,
	gj
èğ
B
(
i
,
j
);

43 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

44 
	gTCpuM©rix
<
	gAR—l
>::
TCpuM©rix
(cÚ¡ 
TCpuBufãr
<
AR—l
> & 
bufãr
,

45 
size_t
 
m
,

46 
size_t
 
n
)

47 : 
fBufãr
(
bufãr
), 
fNCŞs
(
n
), 
fNRows
(
m
)

49 
In™Ÿlize
();

53 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

54 
	gTCpuM©rix
<
	gAR—l
>::
İ”©Ü
 
TM©rixT
<
DoubË_t
>() const

56 
TM©rixT
<
AR—l
> 
B
(
fNRows
, 
fNCŞs
);

58 
size_t
 
	gj
 = 0; j < 
	gfNCŞs
; j++) {

59 
size_t
 
	gi
 = 0; i < 
	gfNRows
; i++) {

60 
B
(
i
,
j
èğ(*
this
)(i, 
	gj
);

63  
	gB
;

68 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

69 
	gTCpuM©rix
<
	gAR—l
>::
In™Ÿlize
()

71 ià(
fNRows
 > 
fOÃs
.
size
()) {

72 
fOÃs
.
»£rve
(
fNRows
);

73 
size_t
 
	gi
 = 
fOÃs
.
size
(); i < 
	gfNRows
; i++) {

74 
	gfOÃs
.
push_back
(1.0);

80 
‹m¶©e
 
şass
 
	gTCpuM©rix
<
	gR—l_t
>;

81 
‹m¶©e
 
şass
 
	gTCpuM©rix
<
	gDoubË_t
>;

	@src/DNN/Architectures/Cpu/DataLoader.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Cpu/D©aLßd”.h
"

18 
	~"TMVA/Ev’t.h
"

19 
	~<io¡»am
>

21 
Çme¥aû
 
	gTMVA


23 
Çme¥aû
 
	gDNN


28 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

29 
	gTCpuB©chI‹¿tÜ
<
	gD©a_t
, 
	gR—l_t
>::
TCpuB©chI‹¿tÜ
(

30 
TCpuD©aLßd”
<
D©a_t
, 
R—l_t
> & 
d©aLßd”
,

31 
size_t
 
b©chIndex
)

32 : 
fD©aLßd”
(
d©aLßd”
), 
fB©chIndex
(
b©chIndex
)

38 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

39 
	gTCpuB©ch
<
	gR—l_t
> 
	gTCpuB©chI‹¿tÜ
<
	gD©a_t
, R—l_t>::
İ”©Ü
*()

41  
fD©aLßd”
.
G‘B©ch
(
fB©chIndex
);

45 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

46 
	gTCpuB©chI‹¿tÜ
<
	gD©a_t
, 
	gR—l_t
> & TCpuB©chI‹¿tÜ<D©a_t, R—l_t>::
İ”©Ü
++()

48 
fB©chIndex
++;

49  *
	gthis
;

53 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

54 
boŞ
 
	gTCpuB©chI‹¿tÜ
<
	gD©a_t
, 
	gR—l_t
>::
İ”©Ü
!=(cÚ¡ 
TCpuB©chI‹¿tÜ
 & 
Ùh”
)

56  
fB©chIndex
 !ğ
Ùh”
.
G‘B©chIndex
();

60 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

61 
boŞ
 
	gTCpuB©chI‹¿tÜ
<
	gD©a_t
, 
	gR—l_t
>::
İ”©Ü
==(cÚ¡ 
TCpuB©chI‹¿tÜ
 & 
Ùh”
)

63  
fB©chIndex
 =ğ
Ùh”
.
G‘B©chIndex
();

68 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

69 
	gTCpuD©aLßd”
<
	gD©a_t
, 
	gR—l_t
>::
TCpuD©aLßd”
(cÚ¡ 
D©a_t
 &
šput
,

70 
size_t
 
n§m¶es
,

71 
size_t
 
b©chSize
,

72 
size_t
 
nšputF—tu»s
,

73 
size_t
 
nouutF—tu»s
,

74 
size_t
 
bufãrSize
)

75 : 
fIÅut
(
šput
), 
fNSam¶es
(
n§m¶es
), 
fB©chSize
(
b©chSize
),

76 
fBufãrSize
(
bufãrSize
), 
fNIÅutF—tu»s
(
nšputF—tu»s
),

77 
fNOuutF—tu»s
(
nouutF—tu»s
), 
fNB©ches
(
n§m¶es
 / 
b©chSize
),

78 
fIÅutM©riûs
(), 
fOuutM©riûs
(), 
fSam¶eIndiûs
()

80 
	gfIÅutM©riûs
.
»£rve
(
fBufãrSize
);

81 
	gfOuutM©riûs
.
»£rve
(
fBufãrSize
);

82 
size_t
 
	gi
 = 0; i < 
	gfBufãrSize
; i++) {

83 
	gfIÅutM©riûs
.
em¶aû_back
(
fB©chSize
, 
fNIÅutF—tu»s
);

84 
	gfOuutM©riûs
.
em¶aû_back
(
fB©chSize
, 
fNOuutF—tu»s
);

87 
	gfSam¶eIndiûs
.
»£rve
(
fNB©ches
);

88 
size_t
 
	gi
 = 0; i < 
	gfNSam¶es
; i++) {

89 
	gfSam¶eIndiûs
.
em¶aû_back
(
i
);

94 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

95 
šlše
 
	gTCpuD©aLßd”
<
	gD©a_t
, 
	gR—l_t
>::
CİyD©a
(
size_t
 
b©chIndex
)

97 autØ
cİy
 = [
this
](
UIÁ_t
 
wÜk”ID
)

99 
CİyB©ch
(
this
->
fIÅutM©riûs
[
wÜk”ID
 %his->
fBufãrSize
],

100 
this
->
fOuutM©riûs
[
wÜk”ID
 %his->
fBufãrSize
],

101 
this
->
fIÅut
,

102 
this
->
fSam¶eIndiûs
.
begš
(è+ 
§m¶eIndex
,

103 
this
->
fSam¶eIndiûs
.
begš
(è+ 
§m¶eIndex
 +his->
fB©chSize
);

104 
	g§m¶eIndex
 +ğ
this
->
fB©chSize
;

108 
size_t
 
	g’d
 = 
¡d
::
mš
(
b©chIndex
 + 
fBufãrSize
, 
fNB©ches
);

109 
size_t
 
	g¡¬t
 = 
b©chIndex
;

110 
	gROOT
::
TTh»adExecutÜ
 
poŞ
{};

111 
	gpoŞ
.
M­
(
cİy
, 
ROOT
::
TSeqI
(
¡¬t
, 
’d
));

115 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

116 
	gTCpuB©ch
<
	gR—l_t
> 
	gTCpuD©aLßd”
<
	gD©a_t
, R—l_t>::
G‘B©ch
(
size_t
 
b©chIndex
)

118 
size_t
 
fBufãrIndex
 = 
b©chIndex
 % 
fBufãrSize
;

119 ià(
	gfBufãrIndex
 == 0) {

120 
CİyD©a
(
b©chIndex
);

122  
	gTCpuB©ch
<
	gR—l_t
>(
	gfIÅutM©riûs
[
fBufãrIndex
],

123 
	gfOuutM©riûs
[
fBufãrIndex
]);

127 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

128 autØ
	gTCpuD©aLßd”
<
	gD©a_t
, 
	gR—l_t
>::
begš
()

129 -> 
B©chI‹¿tÜ_t


131 
¿ndom_shufæe
(
fSam¶eIndiûs
.
begš
(), fSam¶eIndiûs.
’d
());

132  
B©chI‹¿tÜ_t
(*
this
, 0);

136 
	g‹m¶©e
<
ty³Çme
 
	gD©a_t
,y³Çm
	gR—l_t
>

137 autØ
	gTCpuD©aLßd”
<
	gD©a_t
, 
	gR—l_t
>::
’d
()

138 -> 
B©chI‹¿tÜ_t


140  
B©chI‹¿tÜ_t
(*
this
, 
fNB©ches
);

144 
	g‹m¶©e
 <>

145 
	gTCpuD©aLßd”
<
	gM©rixIÅut_t
, 
	gDoubË_t
>::
CİyB©ch
(

146 
M©rix_t
 &
šputM©rix
,

147 
M©rix_t
 &
ouutM©rix
,

148 cÚ¡ 
M©rixIÅut_t
 &
šput
,

149 
IndexI‹¿tÜ_t
 
šdexBegš
,

150 
IndexI‹¿tÜ_t
 
šdexEnd
)

152 autØ&
	gš
 = 
¡d
::
g‘
<0>(
šput
);

153 autØ&
	gout
 = 
¡d
::
g‘
<1>(
šput
);

155 
size_t
 
	gb©chIndex
 = 0;

156 
IndexI‹¿tÜ_t
 
	gi
 = 
šdexBegš
; i !ğ
šdexEnd
; i++) {

157 
size_t
 
	gšdex
 = *
i
;

158 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gš
.
G‘NcŞs
(); j++) {

159 
šputM©rix
(
b©chIndex
, 
j
èğ
š
(
šdex
, j);

161 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gout
.
G‘NcŞs
(); j++) {

162 
ouutM©rix
(
b©chIndex
, 
j
èğ
out
(
šdex
, j);

164 
	gb©chIndex
++;

169 
	g‹m¶©e
 <>

170 
	gTCpuD©aLßd”
<
	gTMVAIÅut_t
, 
	gDoubË_t
>::
CİyB©ch
(

171 
M©rix_t
 &
šputM©rix
,

172 
M©rix_t
 &
ouutM©rix
,

173 cÚ¡ 
TMVAIÅut_t
 &
šput
,

174 
IndexI‹¿tÜ_t
 
šdexBegš
,

175 
IndexI‹¿tÜ_t
 
šdexEnd
)

177 
size_t
 
	gb©chIndex
 = 0;

178 
IndexI‹¿tÜ_t
 
	gi
 = 
šdexBegš
; i !ğ
šdexEnd
; i++) {

179 
size_t
 
	gšdex
 = *
i
;

180 
Ev’t
 *
	gev’t
 = 
šput
.
©
(
šdex
);

181 
size_t
 
	gj
 = 0; j < 
	gev’t
->
G‘NV¬ŸbËs
(); j++) {

182 
šputM©rix
(
b©chIndex
, 
j
èğ
ev’t
->
G‘V®ue
(j);

184 ià(
	gev’t
->
G‘NT¬g‘s
() > 0) {

185 
size_t
 
	gj
 = 0; j < 
	gev’t
->
G‘NT¬g‘s
(); j++) {

186 
ouutM©rix
(
b©chIndex
, 
j
èğ
ev’t
->
G‘T¬g‘
(j);

189 
ouutM©rix
(
b©chIndex
, 0èğ(
ev’t
->
G‘CÏss
() == 0) ? 1.0 : 0.0;

190 
	gb©chIndex
++;

197 
‹m¶©e
 
şass
 
	gTCpuD©aLßd”
<
	gM©rixIÅut_t
, 
	gDoubË_t
>;

198 
‹m¶©e
 
şass
 
	gTCpuD©aLßd”
<
	gTMVAIÅut_t
, 
	gDoubË_t
>;

199 
‹m¶©e
 
şass
 
	gTCpuB©chI‹¿tÜ
<
	gM©rixIÅut_t
, 
	gDoubË_t
>;

200 
‹m¶©e
 
şass
 
	gTCpuB©chI‹¿tÜ
<
	gTMVAIÅut_t
, 
	gDoubË_t
>;

201 
‹m¶©e
 
şass
 
	gTCpuB©ch
<
	gDoubË_t
>;

	@src/DNN/Architectures/Cpu/DenoisePropagation.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

20 
Çme¥aû
 
	gTMVA


22 
Çme¥aû
 
	gDNN


27 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

28 
	gTCpu
<
	gAFlßt
>::
AddBŸ£s
(
TCpuM©rix
<
AFlßt
> &
A
,

29 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
bŸ£s
)

36 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

37 
	gTCpu
<
	gAFlßt
>::
Upd©eP¬ams
(
TCpuM©rix
<
AFlßt
> &
x
,

38 
TCpuM©rix
<
AFlßt
> &
z
,

39 
TCpuM©rix
<
AFlßt
> &
fVBŸ£s
,

40 
TCpuM©rix
<
AFlßt
> &
fHBŸ£s
,

41 
TCpuM©rix
<
AFlßt
> &
fWeights
,

42 
DoubË_t
 
Ë¬nšgR©e
,

43 
DoubË_t
 
cÜru±iÚLev–
,

44 
size_t
 
fB©chSize
)

53 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

54 
	gTCpu
<
	gAFlßt
>::
SoámaxAE
(
TCpuM©rix
<
AFlßt
> & 
A
)

61 
‹m¶©e
<
ty³Çme
 
AFlßt
>

62 
TCpu
<
AFlßt
>::
CÜru±IÅut
(
TCpuM©rix
<AFlßt> & 
šput
,

63 
TCpuM©rix
<
AFlßt
> & 
cÜru±edIÅut
,

64 
AFlßt
 
cÜru±iÚLev–
)

72 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

73 
	gTCpu
<
	gAFlßt
>::
EncodeIÅut
(
TCpuM©rix
<
AFlßt
> & 
šput
,

74 
TCpuM©rix
<
AFlßt
> & 
com´es£dIÅut
,

75 
TCpuM©rixT
<
AFlßt
> &
fWeights
)

81 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

82 
	gTCpu
<
	gAFlßt
>::
RecÚ¡ruùIÅut
(
TCpuM©rix
<
AFlßt
> & 
com´es£dIÅut
,

83 
TCpuM©rix
<
AFlßt
> & 
»cÚ¡ruùedIÅut
,

84 
TCpuM©rix
<
AFlßt
> &
fWeights
)

95 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

96 
	gTCpu
<
	gAFlßt
>::
FÜw¬dLogReg
(
TCpuM©rix
<
AFlßt
> &
šput
,

97 
TCpuM©rix
<
AFlßt
> &
p
,

98 
TCpuM©rix
<
AFlßt
> &
fWeights
)

105 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

106 
	gTCpu
<
	gAFlßt
>::
Upd©eP¬amsLogReg
(
TCpuM©rix
<
AFlßt
> &
šput
,

107 
TCpuM©rix
<
AFlßt
> &
ouut
,

108 
TCpuM©rix
<
AFlßt
> &
difã»nû
,

109 
TCpuM©rix
<
AFlßt
> &
p
,

110 
TCpuM©rix
<
AFlßt
> &
fWeights
,

111 
TCpuM©rix
<
AFlßt
> &
fBŸ£s
,

112 
AFlßt
 
Ë¬nšgR©e
,

113 
size_t
 
fB©chSize
)

119 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

120 
	gTCpu
<
	gAFlßt
>::
T¿nsfÜm
(
TCpuM©rix
<
AFlßt
> &
šput
,

121 
TCpuM©rix
<
AFlßt
> &
ŒªsfÜmed
,

122 
TCpuM©rix
<
AFlßt
> &
fWeights
,

123 
TCpuM©rix
<
AFlßt
> &
fBŸ£s
)

	@src/DNN/Architectures/Cpu/Dropout.cxx

12 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

13 
	~"TRªdom.h
"

19 
Çme¥aû
 
	gTMVA
 {

20 
Çme¥aû
 
	gDNN
 {

23 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

24 
	gTCpu
<
	gAFlßt
>::
Drİout
(
TCpuM©rix
<
AFlßt
> &
A
,

25 
AFlßt
 
drİoutProbab™y
)

27 
AFlßt
 *
	gd©a
 = 
A
.
G‘RawD©aPoš‹r
();

29 autØ
	gf
 = [&
d©a
, 
drİoutProbab™y
](
UIÁ_t
 
	gwÜk”ID
)

31 
TRªdom
 
¿nd
(
time
(
nuÎ±r
è+ 
wÜk”ID
);

32 
AFlßt
 
	gr
 = 
¿nd
.
UnifÜm
();

33 
	gd©a
[
wÜk”ID
] = (
r
 > 
drİoutProbab™y
è? 0.0 : 
d©a
[workerID] / dropoutProbability;

37 
	gA
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
A
.
G‘NEËm’ts
()));

	@src/DNN/Architectures/Cpu/Initialization.cxx

17 
	~"TRªdom.h
"

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

20 
Çme¥aû
 
	gTMVA


22 
Çme¥aû
 
	gDNN


26 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

27 
	gTCpu
<
	gAFlßt
>::
In™ŸlizeGauss
(
TCpuM©rix
<
AFlßt
> & 
A
)

29 
size_t
 
m
,
	gn
;

30 
	gm
 = 
A
.
G‘Nrows
();

31 
	gn
 = 
A
.
G‘NcŞs
();

33 
TRªdom
 
¿nd
(
time
(
nuÎ±r
));

35 
AFlßt
 
	gsigma
 = 
sq¹
(2.0 / ((AFlßtè
n
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
A
(
i
,
j
èğ
¿nd
.
Gaus
(0.0, 
sigma
);

45 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

46 
	gTCpu
<
	gAFlßt
>::
In™ŸlizeUnifÜm
(
TCpuM©rix
<
AFlßt
> & 
A
)

48 
size_t
 
m
,
	gn
;

49 
	gm
 = 
A
.
G‘Nrows
();

50 
	gn
 = 
A
.
G‘NcŞs
();

52 
TRªdom
 
¿nd
(
time
(
nuÎ±r
));

54 
AFlßt
 
	g¿nge
 = 
sq¹
(2.0 / ((AFlßtè
n
));

56 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

57 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

58 
A
(
i
,
j
èğ
¿nd
.
UnifÜm
(-
¿nge
,„ange);

64 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

65 
	gTCpu
<
	gAFlßt
>::
In™ŸlizeId’t™y
(
TCpuM©rix
<
AFlßt
> & 
A
)

67 
size_t
 
m
,
	gn
;

68 
	gm
 = 
A
.
G‘Nrows
();

69 
	gn
 = 
A
.
G‘NcŞs
();

71 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

72 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

73 
A
(
i
,
j
) = 0.0;

76 ià(
	gi
 < 
	gn
) {

77 
A
(
i
,i) = 1.0;

83 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

84 
	gTCpu
<
	gAFlßt
>::
In™ŸlizeZ”o
(
TCpuM©rix
<
AFlßt
> & 
A
)

86 
size_t
 
m
,
	gn
;

87 
	gm
 = 
A
.
G‘Nrows
();

88 
	gn
 = 
A
.
G‘NcŞs
();

90 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

91 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

92 
A
(
i
,
j
) = 0.0;

	@src/DNN/Architectures/Cpu/LossFunctions.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


25 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

26 
AFlßt
 
	gTCpu
<
	gAFlßt
>::
M—nSqu¬edE¼Ü
(cÚ¡ 
TCpuM©rix
<AFlßt> &
Y
,

27 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
ouut
)

29 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

30 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

31 
	g¡d
::
veùÜ
<
AFlßt
> 
‹mp
(
Y
.
G‘NEËm’ts
());

32 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
Y
.
G‘Nrows
(è* Y.
G‘NcŞs
());

34 autØ
	gf
 = [&
d©aY
, &
d©aOuut
, &
‹mp
](
UIÁ_t
 
	gwÜk”ID
)

36 
AFlßt
 
	gdy
 = 
d©aY
[
wÜk”ID
] - 
d©aOuut
[workerID];

37 
	g‹mp
[
wÜk”ID
] = 
dy
 * dy;

42 autØ
	g»duùiÚ
 = [](cÚ¡ 
¡d
::
veùÜ
<
AFlßt
> & 
v
 )

46  
¡d
::
accumuÏ‹
(
v
.
begš
(),v.
’d
(),
AFlßt
{});

49 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘NEËm’ts
()));

50  
nÜm
 * 
	gY
.
G‘Th»adExecutÜ
().
Reduû
(
‹mp
, 
»duùiÚ
);

54 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

55 
	gTCpu
<
	gAFlßt
>::
M—nSqu¬edE¼ÜG¿d›Ás
(

56 
TCpuM©rix
<
AFlßt
> & 
dY
,

57 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
Y
,

58 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
ouut
)

61 
AFlßt
 *
	gd©aDY
 = 
dY
.
G‘RawD©aPoš‹r
();

62 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

63 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

64 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
Y
.
G‘Nrows
(è* Y.
G‘NcŞs
());

66 autØ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuut
, 
nÜm
](
UIÁ_t
 
	gwÜk”ID
)

68 
	gd©aDY
[
wÜk”ID
] = - 2.0 * 
nÜm
 * (
d©aY
[wÜk”ID] - 
d©aOuut
[workerID]);

72 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘NEËm’ts
()));

76 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

77 
AFlßt
 
	gTCpu
<
	gAFlßt
>::
CrossEÁrİy
(cÚ¡ 
TCpuM©rix
<AFlßt> &
Y
,

78 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
ouut
)

80 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

81 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

82 
	g¡d
::
veùÜ
<
AFlßt
> 
‹mp
(
Y
.
G‘NEËm’ts
());

83 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
Y
.
G‘Nrows
(è* Y.
G‘NcŞs
());

85 autØ
	gf
 = [&
d©aY
, &
d©aOuut
, &
‹mp
](
UIÁ_t
 
	gwÜk”ID
)

87 
AFlßt
 
	gy
 = 
d©aY
[
wÜk”ID
];

88 
AFlßt
 
	gsig
 = 1.0 / (1.0 + 
exp
(- 
d©aOuut
[
wÜk”ID
]));

89 
	g‹mp
[
wÜk”ID
] = - (
y
 * 
log
(
sig
) + (1.0 - y) *†og(1.0 - sig));

97 autØ
	g»duùiÚ
 = [](cÚ¡ 
¡d
::
veùÜ
<
AFlßt
> & 
v
 )

99  
¡d
::
accumuÏ‹
(
v
.
begš
(),v.
’d
(),
AFlßt
{});

103 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘NEËm’ts
()));

104  
nÜm
 * 
	gY
.
G‘Th»adExecutÜ
().
Reduû
(
‹mp
, 
»duùiÚ
);

108 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

109 
	gTCpu
<
	gAFlßt
>::
CrossEÁrİyG¿d›Ás
(

110 
TCpuM©rix
<
AFlßt
> & 
dY
,

111 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
Y
,

112 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
ouut
)

114 
AFlßt
 *
	gd©aDY
 = 
dY
.
G‘RawD©aPoš‹r
();

115 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

116 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

117 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
Y
.
G‘Nrows
(è* Y.
G‘NcŞs
());

119 autØ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuut
, 
nÜm
](
UIÁ_t
 
	gwÜk”ID
)

121 
AFlßt
 
	gy
 = 
d©aY
[
wÜk”ID
];

122 
AFlßt
 
	gsig
 = 1.0 / (1.0 + 
exp
(- 
d©aOuut
[
wÜk”ID
]));

123 
	gd©aDY
[
wÜk”ID
] = 
nÜm
 * (
sig
 - 
y
);

127 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘NEËm’ts
()));

131 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

132 
AFlßt
 
	gTCpu
<
	gAFlßt
>::
SoámaxCrossEÁrİy
(

133 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
Y
,

134 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
ouut
)

136 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

137 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

138 
	g¡d
::
veùÜ
<
AFlßt
> 
‹mp
(
Y
.
G‘Nrows
());

139 
size_t
 
	gm
 = 
Y
.
G‘Nrows
();

140 
size_t
 
	gn
 = 
Y
.
G‘NcŞs
();

141 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
m
);

143 autØ
	gf
 = [&
d©aY
, &
d©aOuut
, &
‹mp
, 
n
, 
m
](
UIÁ_t
 
	gwÜk”ID
)

145 
AFlßt
 
	gsum
 = 0.0;

146 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

147 
	gsum
 +ğ
exp
(
d©aOuut
[
wÜk”ID
 + 
j
 * 
m
]);

149 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

150 
	g‹mp
[
wÜk”ID
] -=

151 
d©aY
[
wÜk”ID
 + 
j
 * 
m
] * 
log
(
exp
(
d©aOuut
[wÜk”ID + j * m]è/ 
sum
);

160 autØ
	g»duùiÚ
 = [](cÚ¡ 
¡d
::
veùÜ
<
AFlßt
> & 
v
 )

162  
¡d
::
accumuÏ‹
(
v
.
begš
(),v.
’d
(),
AFlßt
{});

165 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘Nrows
()));

166  
nÜm
 * 
	gY
.
G‘Th»adExecutÜ
().
Reduû
(
‹mp
, 
»duùiÚ
);

170 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

171 
	gTCpu
<
	gAFlßt
>::
SoámaxCrossEÁrİyG¿d›Ás
(

172 
TCpuM©rix
<
AFlßt
> & 
dY
,

173 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
Y
,

174 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
ouut
)

176 
AFlßt
 *
	gd©aDY
 = 
dY
.
G‘RawD©aPoš‹r
();

177 cÚ¡ 
AFlßt
 *
	gd©aY
 = 
Y
.
G‘RawD©aPoš‹r
();

178 cÚ¡ 
AFlßt
 *
	gd©aOuut
 = 
ouut
.
G‘RawD©aPoš‹r
();

179 
size_t
 
	gm
 = 
Y
.
G‘Nrows
();

180 
size_t
 
	gn
 = 
Y
.
G‘NcŞs
();

181 
AFlßt
 
	gnÜm
 = 1.0 / ((AFlßtè
m
);

183 autØ
	gf
 = [&
d©aDY
, &
d©aY
, &
d©aOuut
, 
nÜm
, 
n
, 
m
](
UIÁ_t
 
	gwÜk”ID
)

185 
AFlßt
 
	gsum
 = 0.0;

186 
AFlßt
 
	gsumY
 = 0.0;

187 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

188 
	gsum
 +ğ
exp
(
d©aOuut
[
wÜk”ID
 + 
j
 * 
m
]);

189 
	gsumY
 +ğ
d©aY
[
wÜk”ID
 + 
j
 * 
m
];

191 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

192 
	gd©aDY
[
wÜk”ID
 + 
j
 * 
m
] =

193 
nÜm
 * (
exp
(
d©aOuut
[
wÜk”ID
 + 
j
 * 
m
]è/ 
sum
 * 
sumY
 - 
d©aY
[workerID + j * m]);

199 
	gY
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Y
.
G‘Nrows
()));

	@src/DNN/Architectures/Cpu/OutputFunctions.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


24 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

25 
	gTCpu
<
	gAFlßt
>::
Sigmoid
(
TCpuM©rix
<
AFlßt
> & 
B
,

26 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
A
)

28 autØ
	gf
 = [](
AFlßt
 
x
è{ 1.0 / (1.0 + 
exp
(-x));};

29 
	gB
.
M­From
(
f
, 
A
);

32 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

33 
	gTCpu
<
	gAFlßt
>::
Soámax
(
TCpuM©rix
<
AFlßt
> & 
B
,

34 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
A
)

36 cÚ¡ 
AFlßt
 *
	gd©aA
 = 
A
.
G‘RawD©aPoš‹r
();

37 
AFlßt
 *
	gd©aB
 = 
B
.
G‘RawD©aPoš‹r
();

38 
size_t
 
	gn
 = 
A
.
G‘NcŞs
();

39 
size_t
 
	gm
 = 
A
.
G‘Nrows
();

41 autØ
	gf
 = [&
d©aA
, &
d©aB
, 
n
, 
m
](
UIÁ_t
 
	gwÜk”ID
)

43 
AFlßt
 
	gsum
 = 0.0;

44 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

45 
	gsum
 +ğ
exp
(
d©aA
[
wÜk”ID
 + 
i
 * 
m
]);

47 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

48 
	gd©aB
[
wÜk”ID
 + 
i
 * 
m
] = 
exp
(
d©aA
[wÜk”ID + i * m]è/ 
sum
;

53 
	gB
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
A
.
G‘Nrows
()));

	@src/DNN/Architectures/Cpu/Propagation.cxx

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

19 
	~"TMVA/DNN/Arch™eùu»s/Cpu/BÏs.h
"

21 
Çme¥aû
 
	gTMVA


23 
Çme¥aû
 
	gDNN


26 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

27 
	gTCpu
<
	gAFlßt
>::
MuÉlyT¿n¥o£
(
TCpuM©rix
<
AFlßt
> &
ouut
,

28 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
šput
,

29 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
Weights
)

31 
	gm
 = (è
šput
.
G‘Nrows
();

32 
	gk
 = (è
šput
.
G‘NcŞs
();

33 
	gn
 = (è
Weights
.
G‘Nrows
();

35 
	gŒª§
 = 'N';

36 
	gŒªsb
 = 'T';

38 
AFlßt
 
	g®pha
 = 1.0;

39 
AFlßt
 
	gb‘a
 = 0.0;

41 cÚ¡ 
AFlßt
 *
	gA
 = 
šput
.
G‘RawD©aPoš‹r
();

42 cÚ¡ 
AFlßt
 *
	gB
 = 
Weights
.
G‘RawD©aPoš‹r
();

43 
AFlßt
 *
	gC
 = 
ouut
.
G‘RawD©aPoš‹r
();

45 ::
TMVA
::
DNN
::
BÏs
::
Gemm
(&
Œª§
, &
Œªsb
, &
m
, &
n
, &
k
, &
®pha
,

46 
A
, &
m
, 
B
, &
n
, &
b‘a
, 
C
, &m);

49 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

50 
	gTCpu
<
	gAFlßt
>::
AddRowWi£
(

51 
TCpuM©rix
<
AFlßt
> &
ouut
,

52 cÚ¡ 
TCpuM©rix
<
AFlßt
> &
bŸ£s
)

54 
	gm
 = (è
ouut
.
G‘Nrows
();

55 
	gn
 = (è
ouut
.
G‘NcŞs
();

57 
	gšc
 = 1.0;

58 
AFlßt
 
	g®pha
 = 1.0;

60 
AFlßt
 * 
	gA
 = 
ouut
.
G‘RawD©aPoš‹r
();

61 cÚ¡ 
AFlßt
 * 
	gx
 = 
TCpuM©rix
<AFlßt>::
G‘OÃPoš‹r
();

62 cÚ¡ 
AFlßt
 * 
	gy
 = 
bŸ£s
.
G‘RawD©aPoš‹r
();

64 ::
TMVA
::
DNN
::
BÏs
::
G”
(&
m
, &
n
, &
®pha
, 
x
, &
šc
, 
y
, &šc, 
A
, &m);

67 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

68 
	gTCpu
<
	gAFlßt
>::
Backw¬d
(

69 
TCpuM©rix
<
AFlßt
> & 
aùiv©iÚG¿d›ÁsBackw¬d
,

70 
TCpuM©rix
<
AFlßt
> & 
weightG¿d›Ás
,

71 
TCpuM©rix
<
AFlßt
> & 
bŸsG¿d›Ás
,

72 
TCpuM©rix
<
AFlßt
> & 
df
,

73 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
aùiv©iÚG¿d›Ás
,

74 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
weights
,

75 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
aùiv©iÚsBackw¬d
)

78 
Hadam¬d
(
df
, 
aùiv©iÚG¿d›Ás
);

81 ià(
	gaùiv©iÚG¿d›ÁsBackw¬d
.
G‘NEËm’ts
() > 0)

82 
MuÉly
(
aùiv©iÚG¿d›ÁsBackw¬d
, 
df
, 
weights
);

85 ià(
	gweightG¿d›Ás
.
G‘NEËm’ts
() > 0)

86 
T¿n¥o£MuÉly
(
weightG¿d›Ás
, 
df
, 
aùiv©iÚsBackw¬d
);

89 ià(
	gbŸsG¿d›Ás
.
G‘NEËm’ts
() > 0)

90 
SumCŞumns
(
bŸsG¿d›Ás
, 
df
);

	@src/DNN/Architectures/Cpu/Regularization.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


25 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

26 
AFlßt
 
	gTCpu
<
	gAFlßt
>::
L1ReguÏriz©iÚ
(cÚ¡ 
TCpuM©rix
<AFlßt> &
Weights
)

28 cÚ¡ 
AFlßt
 *
d©a
 = 
Weights
.
G‘RawD©aPoš‹r
();

29 
	g¡d
::
veùÜ
<
AFlßt
> 
‹mp
(
Weights
.
G‘NEËm’ts
());

31 autØ
	gf
 = [&
d©a
, &
‹mp
](
UIÁ_t
 
	gwÜk”ID
)

33 
	g‹mp
[
wÜk”ID
] = 
çbs
(
d©a
[workerID]);

37 autØ
	g»duùiÚ
 = [](cÚ¡ 
¡d
::
veùÜ
<
AFlßt
> & 
v
 )

39  
¡d
::
accumuÏ‹
(
v
.
begš
(),v.
’d
(),
AFlßt
{});

46 
	gWeights
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Weights
.
G‘NEËm’ts
()));

47  
	gWeights
.
G‘Th»adExecutÜ
().
Reduû
(
‹mp
, 
»duùiÚ
);

51 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

52 
	gTCpu
<
	gAFlßt
>::
AddL1ReguÏriz©iÚG¿d›Ás
(

53 
TCpuM©rix
<
AFlßt
> & 
B
,

54 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
A
,

55 
AFlßt
 
weightDeÿy
)

57 
AFlßt
 *
	gd©aB
 = 
B
.
G‘RawD©aPoš‹r
();

58 cÚ¡ 
AFlßt
 *
	gd©aA
 = 
A
.
G‘RawD©aPoš‹r
();

60 autØ
	gf
 = [&
d©aA
, &
d©aB
, 
weightDeÿy
](
UIÁ_t
 
	gwÜk”ID
)

62 
AFlßt
 
	gsign
 = (
d©aA
[
wÜk”ID
] < 0.0) ? -1.0 : 1.0;

63 
	gd©aB
[
wÜk”ID
] +ğ
weightDeÿy
 * 
sign
;

67 
	gB
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
B
.
G‘NEËm’ts
()));

71 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

72 
AFlßt
 
	gTCpu
<
	gAFlßt
>::
L2ReguÏriz©iÚ
(cÚ¡ 
TCpuM©rix
<AFlßt> &
Weights
)

74 cÚ¡ 
AFlßt
 *
d©a
 = 
Weights
.
G‘RawD©aPoš‹r
();

75 
	g¡d
::
veùÜ
<
AFlßt
> 
‹mp
(
Weights
.
G‘NEËm’ts
());

77 autØ
	gf
 = [&
d©a
, &
‹mp
](
UIÁ_t
 
	gwÜk”ID
)

79 
	g‹mp
[
wÜk”ID
] = 
d©a
[workerID] * data[workerID];

83 autØ
	g»duùiÚ
 = [](cÚ¡ 
¡d
::
veùÜ
<
AFlßt
> & 
v
 )

85  
¡d
::
accumuÏ‹
(
v
.
begš
(),v.
’d
(),
AFlßt
{});

92 
	gWeights
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
Weights
.
G‘NEËm’ts
()));

93  
	gWeights
.
G‘Th»adExecutÜ
().
Reduû
(
‹mp
, 
»duùiÚ
);

97 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

98 
	gTCpu
<
	gAFlßt
>::
AddL2ReguÏriz©iÚG¿d›Ás
(

99 
TCpuM©rix
<
AFlßt
> & 
B
,

100 cÚ¡ 
TCpuM©rix
<
AFlßt
> & 
A
,

101 
AFlßt
 
weightDeÿy
)

103 
AFlßt
 *
	gd©aB
 = 
B
.
G‘RawD©aPoš‹r
();

104 cÚ¡ 
AFlßt
 *
	gd©aA
 = 
A
.
G‘RawD©aPoš‹r
();

106 autØ
	gf
 = [&
d©aA
, &
d©aB
, 
weightDeÿy
](
UIÁ_t
 
	gwÜk”ID
)

108 
	gd©aB
[
wÜk”ID
] +ğ2.0 * 
weightDeÿy
 * 
d©aA
[workerID];

112 
	gB
.
G‘Th»adExecutÜ
().
M­
(
f
, 
ROOT
::
TSeqI
(
B
.
G‘NEËm’ts
()));

	@src/DNN/Architectures/Cuda/CudaBuffers.cxx

16 
	~"TMVA/DNN/D©aLßd”.h
"

17 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda/CudaBufãrs.h
"

19 
	~"cuda_ruÁime.h
"

20 
	~<io¡»am
>

22 
Çme¥aû
 
	gTMVA
 {

23 
Çme¥aû
 
	gDNN
 {

28 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

29 
	gTCudaHo¡Bufãr
<
	gAFlßt
>::
TDe¡ruùÜ
::
İ”©Ü
()(
AFlßt
 ** 
deviûPoš‹r
)

31 
cudaF»eHo¡
(*
deviûPoš‹r
);

32 
	gd–‘e
[] 
	gdeviûPoš‹r
;

36 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

37 
	gTCudaHo¡Bufãr
<
	gAFlßt
>::
TCudaHo¡Bufãr
(
size_t
 
size
)

38 : 
fOff£t
(0), 
fSize
(
size
), 
fCompu‹SŒ—m
(0), 
fDe¡ruùÜ
()

40 
AFlßt
 ** 
	gpoš‹r
 = 
Ãw
 AFloat * [1];

41 
cudaM®locHo¡
(
poš‹r
, 
size
 * (
AFlßt
));

42 
	gfHo¡Poš‹r
 = 
¡d
::
sh¬ed_±r
<
AFlßt
 *>(
poš‹r
, 
	gfDe¡ruùÜ
);

46 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

47 
	gTCudaHo¡Bufãr
<
	gAFlßt
>::
İ”©Ü
 
AFlßt
 * () const

49  *
fHo¡Poš‹r
 + 
fOff£t
;

53 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

54 
	gTCudaHo¡Bufãr
<
	gAFlßt
> TCudaHo¡Bufãr<AFlßt>::
G‘SubBufãr
(
size_t
 
off£t
,

55 
size_t
 
size
)

57 
TCudaHo¡Bufãr
 
	gbufãr
 = *
this
;

58 
	gbufãr
.
	gfOff£t
 = 
off£t
;

59 
	gbufãr
.
	gfSize
 = 
size
;

60  
	gbufãr
;

66 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

67 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
TDe¡ruùÜ
::
İ”©Ü
()(
AFlßt
 ** 
deviûPoš‹r
)

69 
cudaF»e
(*
deviûPoš‹r
);

70 
	gd–‘e
[] 
	gdeviûPoš‹r
;

74 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

75 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
TCudaDeviûBufãr
(
size_t
 
size
)

76 : 
fOff£t
(0), 
fSize
(
size
), 
fDe¡ruùÜ
()

78 
AFlßt
 ** 
	gpoš‹r
 = 
Ãw
 AFloat * [1];

79 
cudaM®loc
(
poš‹r
, 
size
 * (
AFlßt
));

80 
	gfDeviûPoš‹r
 = 
¡d
::
sh¬ed_±r
<
AFlßt
 *>(
poš‹r
, 
	gfDe¡ruùÜ
);

81 
cudaSŒ—mC»©e
(&
fCompu‹SŒ—m
);

85 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

86 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
TCudaDeviûBufãr
(
size_t
 
size
,

87 
cudaSŒ—m_t
 
¡»am
)

88 : 
fOff£t
(0), 
fSize
(
size
), 
fCompu‹SŒ—m
(
¡»am
), 
fDe¡ruùÜ
()

90 
AFlßt
 ** 
	gpoš‹r
 = 
Ãw
 AFloat * [1];

91 
cudaM®loc
(
poš‹r
, 
size
 * (
AFlßt
));

92 
	gfDeviûPoš‹r
 = 
¡d
::
sh¬ed_±r
<
AFlßt
 *>(
poš‹r
, 
	gfDe¡ruùÜ
);

96 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

97 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
TCudaDeviûBufãr
(
AFlßt
 * 
deviûPoš‹r
,

98 
size_t
 
size
,

99 
cudaSŒ—m_t
 
¡»am
)

100 : 
fOff£t
(0), 
fSize
(
size
), 
fCompu‹SŒ—m
(
¡»am
), 
fDe¡ruùÜ
()

102 
AFlßt
 ** 
	gpoš‹r
 = 
Ãw
 AFloat * [1];

103 *
	gpoš‹r
 = 
deviûPoš‹r
;

104 
	gfDeviûPoš‹r
 = 
¡d
::
sh¬ed_±r
<
AFlßt
 *>(
poš‹r
, 
	gfDe¡ruùÜ
);

108 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

109 
	gTCudaDeviûBufãr
<
	gAFlßt
> TCudaDeviûBufãr<AFlßt>::
G‘SubBufãr
(
size_t
 
off£t
,

110 
size_t
 
size
)

112 
TCudaDeviûBufãr
 
	gbufãr
 = *
this
;

113 
	gbufãr
.
	gfOff£t
 = 
off£t
;

114 
	gbufãr
.
	gfSize
 = 
size
;

115  
	gbufãr
;

119 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

120 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
İ”©Ü
 
AFlßt
 * () const

122  *
fDeviûPoš‹r
 + 
fOff£t
;

126 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

127 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
CİyFrom
(cÚ¡ 
TCudaHo¡Bufãr
<
AFlßt
> &
bufãr
) const

129 
cudaSŒ—mSynchrÚize
(
fCompu‹SŒ—m
);

130 
cudaMemıyAsync
(*
this
, 
bufãr
, 
fSize
 * (
AFlßt
),

131 
cudaMemıyHo¡ToDeviû
, 
fCompu‹SŒ—m
);

135 
	g‹m¶©e
<
ty³Çme
 
	gAFlßt
>

136 
	gTCudaDeviûBufãr
<
	gAFlßt
>::
CİyTo
(cÚ¡ 
TCudaHo¡Bufãr
<
AFlßt
> &
bufãr
) const

138 
cudaMemıyAsync
(*
this
, 
bufãr
, 
fSize
 * (
AFlßt
),

139 
cudaMemıyDeviûToHo¡
, 
fCompu‹SŒ—m
);

140 
	gbufãr
.
	gfCompu‹SŒ—m
 = 
fCompu‹SŒ—m
;

144 
	g‹m¶©e
<>

145 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>::
CİyIÅut
(

146 
TCudaHo¡Bufãr
<> & 
bufãr
,

147 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

148 
size_t
 
b©chSize
)

150 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gšputM©rix
 = 
¡d
::
g‘
<0>(
fD©a
);

151 
size_t
 
	gn
 = 
šputM©rix
.
G‘NcŞs
();

153 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

154 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

155 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

156 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

157 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<>(
šputM©rix
(
§m¶eIndex
, 
j
));

159 
	g§m¶eI‹¿tÜ
++;

164 
	g‹m¶©e
<>

165 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>::
CİyOuut
(

166 
TCudaHo¡Bufãr
<> & 
bufãr
,

167 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

168 
size_t
 
b©chSize
)

170 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gouutM©rix
 = 
¡d
::
g‘
<1>(
fD©a
);

171 
size_t
 
	gn
 = 
ouutM©rix
.
G‘NcŞs
();

173 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

174 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

175 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

176 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

177 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<>(
ouutM©rix
(
§m¶eIndex
, 
j
));

179 
	g§m¶eI‹¿tÜ
++;

184 
	g‹m¶©e
<>

185 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>::
CİyIÅut
(

186 
TCudaHo¡Bufãr
<> & 
bufãr
,

187 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

188 
size_t
 
b©chSize
)

190 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

191 
size_t
 
	gn
 = 
ev’t
->
G‘NV¬ŸbËs
();

195 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

196 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

197 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

198 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

199 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

200 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<>(
ev’t
->
G‘V®ue
(
j
));

206 
	g‹m¶©e
<>

207 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>::
CİyOuut
(

208 
TCudaHo¡Bufãr
<> & 
bufãr
,

209 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

210 
size_t
 
b©chSize
)

212 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

213 
size_t
 
	gn
 = 
bufãr
.
G‘Size
(è/ 
b©chSize
;

217 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

218 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

219 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

220 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

222 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

224 ià(
	gev’t
->
G‘NT¬g‘s
() == 0) {

225 ià(
n
 == 1) {

227 
bufãr
[
bufãrIndex
] = (
ev’t
->
G‘CÏss
() == 0) ? 1.0 : 0.0;

230 
	gbufãr
[
bufãrIndex
] = 0.0;

231 ià(
	gj
 =ğ
ev’t
->
G‘CÏss
()) {

232 
bufãr
[
bufãrIndex
] = 1.0;

236 
	gbufãr
[
bufãrIndex
] = 
¡©ic_ÿ¡
<>(
ev’t
->
G‘T¬g‘
(
j
));

243 
	g‹m¶©e
<>

244 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>::
CİyIÅut
(

245 
TCudaHo¡Bufãr
<> & 
bufãr
,

246 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

247 
size_t
 
b©chSize
)

249 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gšputM©rix
 = 
¡d
::
g‘
<0>(
fD©a
);

250 
size_t
 
	gn
 = 
šputM©rix
.
G‘NcŞs
();

252 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

253 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

254 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

255 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

256 
	gbufãr
[
bufãrIndex
] = 
šputM©rix
(
§m¶eIndex
, 
j
);

258 
	g§m¶eI‹¿tÜ
++;

263 
	g‹m¶©e
<>

264 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>::
CİyOuut
(

265 
TCudaHo¡Bufãr
<> & 
bufãr
,

266 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

267 
size_t
 
b©chSize
)

269 cÚ¡ 
	gTM©rixT
<
	gDoubË_t
> &
	gouutM©rix
 = 
¡d
::
g‘
<1>(
fD©a
);

270 
size_t
 
	gn
 = 
ouutM©rix
.
G‘NcŞs
();

272 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

273 
size_t
 
	g§m¶eIndex
 = *
§m¶eI‹¿tÜ
;

274 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

275 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

276 
	gbufãr
[
bufãrIndex
] = 
ouutM©rix
(
§m¶eIndex
, 
j
);

278 
	g§m¶eI‹¿tÜ
++;

283 
	g‹m¶©e
<>

284 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>::
CİyIÅut
(

285 
TCudaHo¡Bufãr
<> & 
bufãr
,

286 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

287 
size_t
 
b©chSize
)

289 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

290 
size_t
 
	gn
 = 
ev’t
->
G‘NV¬ŸbËs
();

294 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

295 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

296 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

297 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

298 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

299 
	gbufãr
[
bufãrIndex
] = 
ev’t
->
G‘V®ue
(
j
);

305 
	g‹m¶©e
<>

306 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>::
CİyOuut
(

307 
TCudaHo¡Bufãr
<> & 
bufãr
,

308 
IndexI‹¿tÜ_t
 
§m¶eI‹¿tÜ
,

309 
size_t
 
b©chSize
)

311 
Ev’t
 * 
	gev’t
 = 
fD©a
.
äÚt
();

312 
size_t
 
	gn
 = 
bufãr
.
G‘Size
(è/ 
b©chSize
;

316 
size_t
 
	gi
 = 0; i < 
	gb©chSize
; i++) {

317 
size_t
 
	g§m¶eIndex
 = * 
§m¶eI‹¿tÜ
++;

318 
	gev’t
 = 
fD©a
[
§m¶eIndex
];

319 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

321 
size_t
 
	gbufãrIndex
 = 
j
 * 
b©chSize
 + 
i
;

323 ià(
	gev’t
->
G‘NT¬g‘s
() == 0) {

325 ià(
n
 == 1) {

326 
bufãr
[
bufãrIndex
] = (
ev’t
->
G‘CÏss
() == 0) ? 1.0 : 0.0;

329 
	gbufãr
[
bufãrIndex
] = 0.0;

330 ià(
	gj
 =ğ
ev’t
->
G‘CÏss
()) {

331 
bufãr
[
bufãrIndex
] = 1.0;

335 
	gbufãr
[
bufãrIndex
] = 
ev’t
->
G‘T¬g‘
(
j
);

343 
‹m¶©e
 
şass
 
	gTCudaDeviûBufãr
<>;

344 
‹m¶©e
 
şass
 
	gTCudaDeviûBufãr
<>;

346 
‹m¶©e
 
şass
 
	gTCudaHo¡Bufãr
<>;

347 
‹m¶©e
 
şass
 
	gTCudaHo¡Bufãr
<>;

349 
‹m¶©e
 
şass
 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>;

350 
‹m¶©e
 
şass
 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>;

351 
‹m¶©e
 
şass
 
	gTD©aLßd”
<
	gM©rixIÅut_t
, 
	gTCuda
<>>;

352 
‹m¶©e
 
şass
 
	gTD©aLßd”
<
	gTMVAIÅut_t
, 
	gTCuda
<>>;

	@src/DNN/Architectures/Reference.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

20 
	~"Reã»nû/Prİag©iÚ.cxx
"

21 
	~"Reã»nû/Aùiv©iÚFunùiÚs.cxx
"

22 
	~"Reã»nû/OuutFunùiÚs.cxx
"

23 
	~"Reã»nû/LossFunùiÚs.cxx
"

24 
	~"Reã»nû/ReguÏriz©iÚ.cxx
"

25 
	~"Reã»nû/In™Ÿliz©iÚ.cxx
"

26 
	~"Reã»nû/Drİout.cxx
"

27 
	~"Reã»nû/D’oi£Prİag©iÚ.cxx
"

29 
Çme¥aû
 
	gTMVA
 {

30 
Çme¥aû
 
	gDNN
 {

31 
‹m¶©e
 
şass
 
	gTReã»nû
<
	gDoubË_t
>;

	@src/DNN/Architectures/Reference/ActivationFunctions.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

18 
	~<m©h.h
>

20 
Çme¥aû
 
	gTMVA


22 
Çme¥aû
 
	gDNN


26 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

27 
	gTReã»nû
<
	gR—l_t
>::
Id’t™yD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

28 cÚ¡ 
TM©rixT
<
R—l_t
> & )

30 
size_t
 
	gm
,
	gn
;

31 
	gm
 = 
B
.
G‘Nrows
();

32 
	gn
 = 
B
.
G‘NcŞs
();

34 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

35 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

36 
B
(
i
,
j
) = 1.0;

42 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

43 
	gTReã»nû
<
	gR—l_t
>::
R–u
(
TM©rixT
<
R—l_t
> &
A
)

45 
size_t
 
m
,
	gn
;

46 
	gm
 = 
A
.
G‘Nrows
();

47 
	gn
 = 
A
.
G‘NcŞs
();

49 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

50 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

51 
A
(
i
,
j
èğ
¡d
::
max
((
R—l_t
) 0.0, A(i,j));

57 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

58 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
R–uD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

59 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

61 
size_t
 
	gm
,
	gn
;

62 
	gm
 = 
A
.
G‘Nrows
();

63 
	gn
 = 
A
.
G‘NcŞs
();

65 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

67 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

69 
B
(
i
,
j
èğ(
A
(i,j) < 0) ? 0.0 : 1.0;

75 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

76 
	gTReã»nû
<
	gR—l_t
>::
Sigmoid
(
TM©rixT
<
R—l_t
> & 
A
)

78 
size_t
 
m
,
	gn
;

79 
	gm
 = 
A
.
G‘Nrows
();

80 
	gn
 = 
A
.
G‘NcŞs
();

82 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

83 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

84 
R—l_t
 
	gsig
 = 1.0 / (1.0 + 
¡d
::
exp
(-
A
(
i
,
j
)));

85 
A
(
i
,
j
èğ
sig
;

91 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

92 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
SigmoidD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

93 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

95 
size_t
 
	gm
,
	gn
;

96 
	gm
 = 
A
.
G‘Nrows
();

97 
	gn
 = 
A
.
G‘NcŞs
();

99 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

100 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

101 
R—l_t
 
	gsig
 = 1.0 / (1.0 + 
¡d
::
exp
(-
A
(
i
,
j
)));

102 
B
(
i
,
j
èğ
sig
 * (1.0 - sig);

108 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

109 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
Tªh
(
TM©rixT
<
R—l_t
> & 
B
)

111 
size_t
 
m
,
	gn
;

112 
	gm
 = 
B
.
G‘Nrows
();

113 
	gn
 = 
B
.
G‘NcŞs
();

115 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

116 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

117 
R—l_t
 
	gt
 = 
nh
(
B
(
i
,
j
));

118 
B
(
i
,
j
èğ
t
;

124 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

125 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
TªhD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

126 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

128 
size_t
 
	gm
,
	gn
;

129 
	gm
 = 
A
.
G‘Nrows
();

130 
	gn
 = 
A
.
G‘NcŞs
();

132 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

133 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

134 
R—l_t
 
	gt
 = 
nh
(
A
(
i
,
j
));

135 
B
(
i
,
j
èğ1 - 
t
 *;

141 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

142 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
Symm‘ricR–u
(
TM©rixT
<
R—l_t
> & 
B
)

144 
size_t
 
m
,
	gn
;

145 
	gm
 = 
B
.
G‘Nrows
();

146 
	gn
 = 
B
.
G‘NcŞs
();

148 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

149 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

150 
B
(
i
,
j
èğ
çbs
(B(i,j));

156 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

157 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
Symm‘ricR–uD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

158 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

160 
size_t
 
	gm
,
	gn
;

161 
	gm
 = 
A
.
G‘Nrows
();

162 
	gn
 = 
A
.
G‘NcŞs
();

164 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

165 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

166 
B
(
i
,
j
èğ(
A
(i,j) < 0.0) ? -1.0 : 1.0;

172 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

173 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
SoáSign
(
TM©rixT
<
R—l_t
> & 
A
)

175 
size_t
 
m
,
	gn
;

176 
	gm
 = 
A
.
G‘Nrows
();

177 
	gn
 = 
A
.
G‘NcŞs
();

179 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

180 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

181 
R—l_t
 
	gx
 = 
A
(
i
,
j
);

182 
A
(
i
,
j
èğ
x
 / (1 + 
çbs
(x));

188 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

189 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
SoáSignD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

190 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

192 
size_t
 
	gm
,
	gn
;

193 
	gm
 = 
A
.
G‘Nrows
();

194 
	gn
 = 
A
.
G‘NcŞs
();

196 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

197 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

198 
R—l_t
 
	gx
 = 1.0 + 
çbs
(
A
(
i
,
j
));

199 
B
(
i
,
j
èğ1.0 / (
x
 * x);

205 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

206 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
Gauss
(
TM©rixT
<
R—l_t
> & 
A
)

208 
size_t
 
m
,
	gn
;

209 
	gm
 = 
A
.
G‘Nrows
();

210 
	gn
 = 
A
.
G‘NcŞs
();

212 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

213 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

214 
R—l_t
 
	gx
 = 
A
(
i
,
j
);

215 
A
(
i
,
j
èğ
exp
(- 
x
 * x);

221 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

222 
šlše
 
	gTReã»nû
<
	gR—l_t
>::
GaussD”iv©ive
(
TM©rixT
<
R—l_t
> & 
B
,

223 cÚ¡ 
TM©rixT
<
R—l_t
> & 
A
)

225 
size_t
 
	gm
,
	gn
;

226 
	gm
 = 
A
.
G‘Nrows
();

227 
	gn
 = 
A
.
G‘NcŞs
();

229 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

230 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

231 
R—l_t
 
	gx
 = 
A
(
i
,
j
);

232 
B
(
i
,
j
èğ- 2.0 * 
x
 * 
exp
(- x * x);

	@src/DNN/Architectures/Reference/DenoisePropagation.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~<cm©h
>

20 
	~<c¡dlib
>

21 
	~<io¡»am
>

22 
Çme¥aû
 
	gTMVA


24 
Çme¥aû
 
	gDNN


29 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

30 
	gTReã»nû
<
	gR—l_t
>::
AddBŸ£s
(
TM©rixT
<
R—l_t
> &
A
,

31 cÚ¡ 
TM©rixT
<
R—l_t
> &
bŸ£s
)

33 
size_t
 
	gm
,
	gn
;

34 
	gm
 = 
A
.
G‘Nrows
();

35 
	gn
ğ
A
.
G‘NcŞs
();

36 
size_t
 
	gi
 = 0; i<
	gm
; i++)

38 
size_t
 
	gj
=0; j<
	gn
; j++)

40 
A
(
i
, 
j
è+ğ
bŸ£s
(i, 0);

47 
	g‹m¶©e
 <
ty³Çme
 
	gR—l_t
>

48 
	gTReã»nû
<
	gR—l_t
>::
Upd©eP¬ams
(

49 
TM©rixT
<
R—l_t
> &
x
, TM©rixT<R—l_t> &
tdeX
, TM©rixT<R—l_t> &
y
,

50 
TM©rixT
<
R—l_t
> &
z
, TM©rixT<R—l_t> &
fVBŸ£s
, TM©rixT<R—l_t> &
fHBŸ£s
,

51 
TM©rixT
<
R—l_t
> &
fWeights
, TM©rixT<R—l_t> &
VBŸsE¼Ü
,

52 
TM©rixT
<
R—l_t
> &
HBŸsE¼Ü
, R—l_ˆ
Ë¬nšgR©e
, 
size_t
 
fB©chSize
) {

55 
size_t
 
	gi
 = 0; i < (
	gsize_t
)
	gfVBŸ£s
.
G‘Nrows
(); i++)

57 
size_t
 
	gj
 = 0; j < (
	gsize_t
)
	gfVBŸ£s
.
G‘NcŞs
(); j++) {

58 
VBŸsE¼Ü
(
i
, 
j
èğ
x
(i, jè- 
z
(i, j);

59 
fVBŸ£s
(
i
, 
j
è+ğ
Ë¬nšgR©e
 * 
VBŸsE¼Ü
(i, jè/ 
	gfB©chSize
;

72 
size_t
 
	gi
 = 0; i < 
	gfHBŸ£s
.
G‘Nrows
(); i++)

74 
HBŸsE¼Ü
(
i
,0) = 0;

75 
size_t
 
	gj
 = 0; j < 
	gfVBŸ£s
.
G‘Nrows
(); j++)

77 
HBŸsE¼Ü
(
i
, 0è+ğ
fWeights
(i, 
j
è* 
VBŸsE¼Ü
(j, 0);

79 
HBŸsE¼Ü
(
i
, 0è*ğ
y
(i, 0) * (1 - y(i, 0));

80 
fHBŸ£s
(
i
, 0è+ğ
Ë¬nšgR©e
 * 
HBŸsE¼Ü
(i, 0è/ 
	gfB©chSize
;

92 
size_t
 
	gi
 = 0; i < 
	gfHBŸ£s
.
G‘Nrows
(); i++)

94 
size_t
 
	gj
 = 0; j< 
	gfVBŸ£s
.
G‘Nrows
(); j++)

96 
fWeights
(
i
, 
j
è+ğ
Ë¬nšgR©e
 * (
HBŸsE¼Ü
(i, 0è* 
tdeX
(j, 0) +

97 
VBŸsE¼Ü
(
j
, 0è* 
y
(
i
, 0)) /

98 
	gfB©chSize
;

114 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

115 
	gTReã»nû
<
	gR—l_t
>::
SoámaxAE
(
TM©rixT
<
R—l_t
> & 
A
)

117 
size_t
 
m
,
	gn
;

118 
	gm
 = 
A
.
G‘Nrows
();

119 
	gn
 = 
A
.
G‘NcŞs
();

121 
R—l_t
 
	gsum
 = 0.0;

122 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

123 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

124 
	gsum
 +ğ
exp
(
A
(
i
, 
j
));

128 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

129 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

130 
A
(
i
, 
j
èğ
exp
(A(i, j)è/ 
	gsum
;

137 
	g‹m¶©e
 <
ty³Çme
 
	gR—l_t
>

138 
	gTReã»nû
<
	gR—l_t
>::
CÜru±IÅut
(
TM©rixT
<
R—l_t
> &
šput
,

139 
TM©rixT
<
R—l_t
> &
cÜru±edIÅut
,

140 
R—l_t
 
cÜru±iÚLev–
) {

141 
size_t
 
	gi
=0; i< (
	gsize_t
)
	gšput
.
G‘Nrows
(); i++)

143 
size_t
 
	gj
=0; j<(
	gsize_t
)
	gšput
.
G‘NcŞs
(); j++ )

146 ià((
	gsize_t
)((
¿nd
(è/ (
	gRAND_MAX
 + 1.0)) * 100) %

147 ((
	gsize_t
)(
	gcÜru±iÚLev–
 * 10)) ==

149 
cÜru±edIÅut
(
i
, 
j
) = 0;

153 
cÜru±edIÅut
(
i
, 
j
èğ
šput
(i, j);

162 
	g‹m¶©e
 <
ty³Çme
 
	gR—l_t
>

163 
	gTReã»nû
<
	gR—l_t
>::
EncodeIÅut
(
TM©rixT
<
R—l_t
> &
šput
,

164 
TM©rixT
<
R—l_t
> &
com´es£dIÅut
,

165 
TM©rixT
<
R—l_t
> &
Weights
) {

167 
size_t
 
	gm
, 
	ga
;

168 
	gm
 = 
com´es£dIÅut
.
G‘Nrows
();

169 
	ga
 = 
šput
.
G‘Nrows
();

171 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

172 
com´es£dIÅut
(
i
, 0) = 0;

173 
size_t
 
	gj
 = 0; j < 
	ga
; j++) {

174 
com´es£dIÅut
(
i
, 0) =

175 
com´es£dIÅut
(
i
, 0è+ (
Weights
(i, 
j
è* 
šput
(j, 0));

180 
	g‹m¶©e
 <
ty³Çme
 
	gR—l_t
>

181 
	gTReã»nû
<
	gR—l_t
>::
RecÚ¡ruùIÅut
(
TM©rixT
<
R—l_t
> &
com´es£dIÅut
,

182 
TM©rixT
<
R—l_t
> &
»cÚ¡ruùedIÅut
,

183 
TM©rixT
<
R—l_t
> &
fWeights
) {

184 
size_t
 
	gi
=0; i<(
	gsize_t
)
	g»cÚ¡ruùedIÅut
.
G‘Nrows
(); i++)

186 
»cÚ¡ruùedIÅut
(
i
, 0) = 0;

187 
size_t
 
	gj
=0; j<(
	gsize_t
)
	gcom´es£dIÅut
.
G‘Nrows
();j++)

189 
»cÚ¡ruùedIÅut
(
i
, 0è+ğ
fWeights
(
j
, iè* 
com´es£dIÅut
(j, 0);

200 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

201 
	gTReã»nû
<
	gR—l_t
>::
FÜw¬dLogReg
(
TM©rixT
<
R—l_t
> &
šput
,

202 
TM©rixT
<
R—l_t
> &
p
,

203 
TM©rixT
<
R—l_t
> &
fWeights
)

205 
size_t
 
	gm
,
	gn
;

206 
	gm
 = 
p
.
G‘Nrows
();

207 
	gn
 = 
šput
.
G‘Nrows
();

208 
size_t
 
	gi
ğ0; i < 
	gm
; i++)

210 
p
(
i
, 0) = 0;

211 
size_t
 
	gj
=0; j < 
	gn
; j++)

213 
p
(
i
, 0è+ğ
fWeights
(i, 
j
è* 
šput
(j, 0);

220 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

221 
	gTReã»nû
<
	gR—l_t
>::
Upd©eP¬amsLogReg
(
TM©rixT
<
R—l_t
> &
šput
,

222 
TM©rixT
<
R—l_t
> &
ouut
,

223 
TM©rixT
<
R—l_t
> &
difã»nû
,

224 
TM©rixT
<
R—l_t
> &
p
,

225 
TM©rixT
<
R—l_t
> &
fWeights
,

226 
TM©rixT
<
R—l_t
> &
fBŸ£s
,

227 
R—l_t
 
Ë¬nšgR©e
,

228 
size_t
 
fB©chSize
)

230 
size_t
 
	gm
,
	gn
;

231 
	gm
 = 
p
.
G‘Nrows
();

232 
	gn
 = 
šput
.
G‘Nrows
();

234 
size_t
 
	gi
ğ0; i<
	gm
; i++)

236 
difã»nû
(
i
, 0èğ
ouut
(i, 0è- 
p
(i, 0);

237 
size_t
 
	gj
=0; j<
	gn
; j++)

239 
fWeights
(
i
, 
j
) +=

240 
Ë¬nšgR©e
 * 
difã»nû
(
i
, 0è* 
šput
(
j
, 0è/ 
	gfB©chSize
;

243 
fBŸ£s
(
i
, 0è+ğ
Ë¬nšgR©e
 * 
difã»nû
(i, 0è/ 
	gfB©chSize
;

250 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

251 
	gTReã»nû
<
	gR—l_t
>::
T¿nsfÜm
(
TM©rixT
<
R—l_t
> &
šput
,

252 
TM©rixT
<
R—l_t
> &
ŒªsfÜmed
,

253 
TM©rixT
<
R—l_t
> &
fWeights
,

254 
TM©rixT
<
R—l_t
> &
fBŸ£s
)

256 
size_t
 
	gm
,
	gn
;

257 
	gm
=
fWeights
.
G‘Nrows
();

258 
	gn
=
fWeights
.
G‘NcŞs
();

260 
size_t
 
	gi
 = 0; i < 
	gm
 ; i++)

262 
DoubË_t
 
	gouut
 = 0.0;

263 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

265 
	gouut
 +ğ
fWeights
(
i
, 
j
è* 
šput
(j, 0);

267 
	gouut
 +ğ
fBŸ£s
(
i
, 0);

268 
ŒªsfÜmed
(
i
, 0èğ
ouut
;

	@src/DNN/Architectures/Reference/Dropout.cxx

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~"TRªdom.h
"

21 
Çme¥aû
 
	gTMVA


23 
Çme¥aû
 
	gDNN


28 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

29 
	gTReã»nû
<
	gR—l_t
>::
Drİout
(
TM©rixT
<
R—l_t
> & 
B
, R—l_ˆ
drİoutProbab™y
)

31 
size_t
 
	gm
,
	gn
;

32 
	gm
 = 
B
.
G‘Nrows
();

33 
	gn
 = 
B
.
G‘NcŞs
();

35 
TRªdom
 
¿nd
(
time
(
nuÎ±r
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
R—l_t
 
	gr
 = 
¿nd
.
UnifÜm
();

40 ià(
	gr
 >ğ
drİoutProbab™y
) {

41 
B
(
i
,
j
) = 0.0;

43 
B
(
i
,
j
è/ğ
drİoutProbab™y
;

	@src/DNN/Architectures/Reference/Initialization.cxx

17 
	~"TRªdom.h
"

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

20 
Çme¥aû
 
	gTMVA


22 
Çme¥aû
 
	gDNN


26 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

27 
	gTReã»nû
<
	gR—l_t
>::
In™ŸlizeGauss
(
TM©rixT
<
R—l_t
> & 
A
)

29 
size_t
 
m
,
	gn
;

30 
	gm
 = 
A
.
G‘Nrows
();

31 
	gn
 = 
A
.
G‘NcŞs
();

33 
TRªdom
 
¿nd
(
time
(
nuÎ±r
));

35 
R—l_t
 
	gsigma
 = 
sq¹
(2.0 / ((R—l_tè
n
));

37 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

38 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

39 
A
(
i
,
j
èğ
¿nd
.
Gaus
(0.0, 
sigma
);

45 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

46 
	gTReã»nû
<
	gR—l_t
>::
In™ŸlizeUnifÜm
(
TM©rixT
<
R—l_t
> & 
A
)

48 
size_t
 
m
,
	gn
;

49 
	gm
 = 
A
.
G‘Nrows
();

50 
	gn
 = 
A
.
G‘NcŞs
();

52 
TRªdom
 
¿nd
(
time
(
nuÎ±r
));

54 
R—l_t
 
	g¿nge
 = 
sq¹
(2.0 / ((R—l_tè
n
));

56 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

57 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

58 
A
(
i
,
j
èğ
¿nd
.
UnifÜm
(-
¿nge
,„ange);

64 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

65 
	gTReã»nû
<
	gR—l_t
>::
In™ŸlizeId’t™y
(
TM©rixT
<
R—l_t
> & 
A
)

67 
size_t
 
m
,
	gn
;

68 
	gm
 = 
A
.
G‘Nrows
();

69 
	gn
 = 
A
.
G‘NcŞs
();

71 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

72 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

73 
A
(
i
,
j
) = 0.0;

76 ià(
	gi
 < 
	gn
) {

77 
A
(
i
,i) = 1.0;

82 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

83 
	gTReã»nû
<
	gR—l_t
>::
In™ŸlizeZ”o
(
TM©rixT
<
R—l_t
> & 
A
)

85 
size_t
 
m
,
	gn
;

86 
	gm
 = 
A
.
G‘Nrows
();

87 
	gn
 = 
A
.
G‘NcŞs
();

89 
size_t
 
	gi
 = 0; i < 
	gm
 ; i++) {

90 
size_t
 
	gj
 = 0; j < 
	gn
 ; j++) {

91 
A
(
i
,
j
) = 0.0;

	@src/DNN/Architectures/Reference/LossFunctions.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


24 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

25 
AR—l
 
	gTReã»nû
<
	gAR—l
>::
M—nSqu¬edE¼Ü
(cÚ¡ 
TM©rixT
<AR—l> &
Y
,

26 cÚ¡ 
TM©rixT
<
AR—l
> &
ouut
)

28 
size_t
 
	gm
,
	gn
;

29 
	gm
 = 
Y
.
G‘Nrows
();

30 
	gn
 = 
Y
.
G‘NcŞs
();

31 
AR—l
 
	g»suÉ
 = 0.0;

33 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

34 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

35 
AR—l
 
	gdY
 = (
Y
(
i
,
j
è- 
ouut
(i,j));

36 
	g»suÉ
 +ğ
dY
 * dY;

39 
	g»suÉ
 /ğ(
AR—l
è(
m
 * 
n
);

40  
	g»suÉ
;

44 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

45 
	gTReã»nû
<
	gAR—l
>::
M—nSqu¬edE¼ÜG¿d›Ás
(
TM©rixT
<
AR—l
> & 
dY
,

46 cÚ¡ 
TM©rixT
<
AR—l
> & 
Y
,

47 cÚ¡ 
TM©rixT
<
AR—l
> & 
ouut
)

49 
size_t
 
	gm
,
	gn
;

50 
	gm
 = 
Y
.
G‘Nrows
();

51 
	gn
 = 
Y
.
G‘NcŞs
();

53 
	gdY
.
Mšus
(
Y
, 
ouut
);

54 
	gdY
 *ğ- 2.0 / ((
AR—l
è(
m
*
n
));

58 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

59 
AR—l
 
	gTReã»nû
<
	gAR—l
>::
CrossEÁrİy
(cÚ¡ 
TM©rixT
<AR—l> &
Y
,

60 cÚ¡ 
TM©rixT
<
AR—l
> &
ouut
)

62 
size_t
 
	gm
,
	gn
;

63 
	gm
 = 
Y
.
G‘Nrows
();

64 
	gn
 = 
Y
.
G‘NcŞs
();

65 
AR—l
 
	g»suÉ
 = 0.0;

67 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

68 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

69 
AR—l
 
	gsig
 = 1.0 / (1.0 + 
¡d
::
exp
(-
ouut
(
i
,
j
)));

70 
	g»suÉ
 +ğ
Y
(
i
,
j
è* 
	g¡d
::
log
(
sig
)

71 + (1.0 - 
Y
(
i
,
j
)è* 
	g¡d
::
log
(1.0 - 
sig
);

74 
	g»suÉ
 /ğ- (
AR—l
è(
m
 * 
n
);

75  
	g»suÉ
;

79 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

80 
	gTReã»nû
<
	gAR—l
>::
CrossEÁrİyG¿d›Ás
(
TM©rixT
<
AR—l
> & 
dY
,

81 cÚ¡ 
TM©rixT
<
AR—l
> & 
Y
,

82 cÚ¡ 
TM©rixT
<
AR—l
> & 
ouut
)

84 
size_t
 
	gm
,
	gn
;

85 
	gm
 = 
Y
.
G‘Nrows
();

86 
	gn
 = 
Y
.
G‘NcŞs
();

88 
AR—l
 
	gnÜm
 = 1.0 / ((AR—lè(
m
 * 
n
));

89 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

91 
size_t
 
	gj
 = 0; j < 
	gn
; j++)

93 
AR—l
 
	gy
 = 
Y
(
i
,
j
);

94 
AR—l
 
	gsig
 = 1.0 / (1.0 + 
¡d
::
exp
(-
ouut
(
i
,
j
)));

95 
dY
(
i
,
j
èğ
nÜm
 * (
sig
 - 
y
);

101 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

102 
AR—l
 
	gTReã»nû
<
	gAR—l
>::
SoámaxCrossEÁrİy
(cÚ¡ 
TM©rixT
<AR—l> &
Y
,

103 cÚ¡ 
TM©rixT
<
AR—l
> &
ouut
)

105 
size_t
 
	gm
,
	gn
;

106 
	gm
 = 
Y
.
G‘Nrows
();

107 
	gn
 = 
Y
.
G‘NcŞs
();

108 
AR—l
 
	g»suÉ
 = 0.0;

110 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

111 
AR—l
 
	gsum
 = 0.0;

112 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

113 
	gsum
 +ğ
exp
(
ouut
(
i
,
j
));

115 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

116 
	g»suÉ
 +ğ
Y
(
i
,
j
è* 
log
(
exp
(
ouut
(i,j)è/ 
sum
);

119 
	g»suÉ
 /ğ- 
m
;

120  
	g»suÉ
;

124 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

125 
	gTReã»nû
<
	gAR—l
>::
SoámaxCrossEÁrİyG¿d›Ás
(
TM©rixT
<
AR—l
> & 
dY
,

126 cÚ¡ 
TM©rixT
<
AR—l
> & 
Y
,

127 cÚ¡ 
TM©rixT
<
AR—l
> & 
ouut
)

129 
size_t
 
	gm
,
	gn
;

130 
	gm
 = 
Y
.
G‘Nrows
();

131 
	gn
 = 
Y
.
G‘NcŞs
();

132 
AR—l
 
	gnÜm
 = 1.0 / 
m
 ;

134 
size_t
 
	gi
 = 0; i < 
	gm
; i++)

136 
AR—l
 
	gsum
 = 0.0;

137 
AR—l
 
	gsumY
 = 0.0;

138 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

139 
	gsum
 +ğ
exp
(
ouut
(
i
,
j
));

140 
	gsumY
 +ğ
Y
(
i
,
j
);

142 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

143 
dY
(
i
,
j
èğ
nÜm
 * (
exp
(
ouut
(i,j)è/ 
sum
 * 
	gsumY
 - 
Y
(i,j));

	@src/DNN/Architectures/Reference/OutputFunctions.cxx

17 
Çme¥aû
 
	gTMVA
 {

18 
Çme¥aû
 
	gDNN
 {

20 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

21 
	gTReã»nû
<
	gAR—l
>::
Sigmoid
(
TM©rixT
<
AR—l
> & 
B
,

22 cÚ¡ 
TM©rixT
<
AR—l
> & 
A
)

24 
size_t
 
	gm
,
	gn
;

25 
	gm
 = 
A
.
G‘Nrows
();

26 
	gn
 = 
A
.
G‘NcŞs
();

28 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

29 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

30 
AR—l
 
	gsig
 = 1.0 / (1.0 + 
¡d
::
exp
(-
A
(
i
,
j
)));

31 
B
(
i
,
j
èğ
sig
;

36 
	g‹m¶©e
<
ty³Çme
 
	gAR—l
>

37 
	gTReã»nû
<
	gAR—l
>::
Soámax
(
TM©rixT
<
AR—l
> & 
B
,

38 cÚ¡ 
TM©rixT
<
AR—l
> & 
A
)

40 
size_t
 
	gm
,
	gn
;

41 
	gm
 = 
A
.
G‘Nrows
();

42 
	gn
 = 
A
.
G‘NcŞs
();

44 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

45 
AR—l
 
	gsum
 = 0.0;

46 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

47 
	gsum
 +ğ
exp
(
A
(
i
,
j
));

49 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

50 
B
(
i
,
j
èğ
exp
(
A
(i,j)è/ 
	gsum
;

	@src/DNN/Architectures/Reference/Propagation.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


24 
	g‹m¶©e
<
ty³Çme
 
	gSÿÏr_t
>

25 
	gTReã»nû
<
	gSÿÏr_t
>::
MuÉlyT¿n¥o£
(
TM©rixT
<
SÿÏr_t
> &
ouut
,

26 cÚ¡ 
TM©rixT
<
SÿÏr_t
> &
šput
,

27 cÚ¡ 
TM©rixT
<
SÿÏr_t
> &
weights
)

29 
	gouut
.
MuÉT
(
šput
, 
weights
);

32 
	g‹m¶©e
<
ty³Çme
 
	gSÿÏr_t
>

33 
	gTReã»nû
<
	gSÿÏr_t
>::
AddRowWi£
(
TM©rixT
<
SÿÏr_t
> &
ouut
,

34 cÚ¡ 
TM©rixT
<
SÿÏr_t
> &
bŸ£s
)

36 
size_t
 
	gi
 = 0; i < (
	gsize_t
è
	gouut
.
G‘Nrows
(); i++) {

37 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gouut
.
G‘NcŞs
(); j++) {

38 
ouut
(
i
,
j
è+ğ
bŸ£s
(j,0);

43 
	g‹m¶©e
<
ty³Çme
 
	gSÿÏr_t
>

44 
	gTReã»nû
<
	gSÿÏr_t
>::
Backw¬d
(
TM©rixT
<
SÿÏr_t
> & 
aùiv©iÚ_g¿d›Ás_backw¬d
,

45 
TM©rixT
<
SÿÏr_t
> & 
weight_g¿d›Ás
,

46 
TM©rixT
<
SÿÏr_t
> & 
bŸs_g¿d›Ás
,

47 
TM©rixT
<
SÿÏr_t
> & 
df
,

48 cÚ¡ 
TM©rixT
<
SÿÏr_t
> & 
aùiv©iÚ_g¿d›Ás
,

49 cÚ¡ 
TM©rixT
<
SÿÏr_t
> & 
weights
,

50 cÚ¡ 
TM©rixT
<
SÿÏr_t
> & 
aùiv©iÚs_backw¬d
)

54 
size_t
 
	gi
 = 0; i < (
	gsize_t
è
	gdf
.
G‘Nrows
(); i++) {

55 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gdf
.
G‘NcŞs
(); j++) {

56 
df
(
i
,
j
è*ğ
aùiv©iÚ_g¿d›Ás
(i,j);

61 ià(
	gaùiv©iÚ_g¿d›Ás_backw¬d
.
G‘NoEËm’ts
() > 0) {

62 
	gaùiv©iÚ_g¿d›Ás_backw¬d
.
MuÉ
(
df
, 
weights
);

66 ià(
	gweight_g¿d›Ás
.
G‘NoEËm’ts
() > 0) {

67 
	gweight_g¿d›Ás
.
TMuÉ
(
df
, 
aùiv©iÚs_backw¬d
);

71 ià(
	gbŸs_g¿d›Ás
.
G‘NoEËm’ts
() > 0) {

72 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gdf
.
G‘NcŞs
(); j++) {

73 
SÿÏr_t
 
	gsum
 = 0.0;

74 
size_t
 
	gi
 = 0; i < (
	gsize_t
è
	gdf
.
G‘Nrows
(); i++) {

75 
	gsum
 +ğ
df
(
i
,
j
);

77 
bŸs_g¿d›Ás
(
j
,0èğ
sum
;

82 
	g‹m¶©e
<
ty³Çme
 
	gSÿÏr_t
>

83 
	gTReã»nû
<
	gSÿÏr_t
>::
SÿËAdd
(
TM©rixT
<
SÿÏr_t
> & 
A
,

84 cÚ¡ 
TM©rixT
<
SÿÏr_t
> & 
B
,

85 
SÿÏr_t
 
b‘a
)

87 
size_t
 
	gi
 = 0; i < (
	gsize_t
è
	gA
.
G‘Nrows
(); i++) {

88 
size_t
 
	gj
 = 0; j < (
	gsize_t
è
	gA
.
G‘NcŞs
(); j++) {

89 
A
(
i
,
j
è+ğ
b‘a
 * 
B
(i,j);

94 
	g‹m¶©e
<
ty³Çme
 
	gSÿÏr_t
>

95 
	gTReã»nû
<
	gSÿÏr_t
>::
Cİy
(
TM©rixT
<
SÿÏr_t
> & 
A
,

96 cÚ¡ 
TM©rixT
<
SÿÏr_t
> & 
B
)

98 
	gA
 = 
B
;

	@src/DNN/Architectures/Reference/Regularization.cxx

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
Çme¥aû
 
	gTMVA


21 
Çme¥aû
 
	gDNN


25 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

26 
R—l_t
 
	gTReã»nû
<
	gR—l_t
>::
L1ReguÏriz©iÚ
(cÚ¡ 
TM©rixT
<R—l_t> & 
W
)

28 
size_t
 
m
,
	gn
;

29 
	gm
 = 
W
.
G‘Nrows
();

30 
	gn
 = 
W
.
G‘NcŞs
();

32 
R—l_t
 
	g»suÉ
 = 0.0;

34 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

35 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

36 
	g»suÉ
 +ğ
¡d
::
abs
(
W
(
i
,
j
));

39  
	g»suÉ
;

43 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

44 
	gTReã»nû
<
	gR—l_t
>::
AddL1ReguÏriz©iÚG¿d›Ás
(
TM©rixT
<
R—l_t
> & 
A
,

45 cÚ¡ 
TM©rixT
<
R—l_t
> & 
W
,

46 
R—l_t
 
weightDeÿy
)

48 
size_t
 
	gm
,
	gn
;

49 
	gm
 = 
W
.
G‘Nrows
();

50 
	gn
 = 
W
.
G‘NcŞs
();

52 
R—l_t
 
	gsign
 = 0.0;

54 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

55 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

56 
	gsign
 = (
W
(
i
,
j
) > 0.0) ? 1.0 : -1.0;

57 
A
(
i
,
j
è+ğ
sign
 * 
weightDeÿy
;

63 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

64 
R—l_t
 
	gTReã»nû
<
	gR—l_t
>::
L2ReguÏriz©iÚ
(cÚ¡ 
TM©rixT
<R—l_t> & 
W
)

66 
size_t
 
m
,
	gn
;

67 
	gm
 = 
W
.
G‘Nrows
();

68 
	gn
 = 
W
.
G‘NcŞs
();

70 
R—l_t
 
	g»suÉ
 = 0.0;

72 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

73 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

74 
	g»suÉ
 +ğ
W
(
i
,
j
) * W(i,j);

77  
	g»suÉ
;

81 
	g‹m¶©e
<
ty³Çme
 
	gR—l_t
>

82 
	gTReã»nû
<
	gR—l_t
>::
AddL2ReguÏriz©iÚG¿d›Ás
(
TM©rixT
<
R—l_t
> & 
A
,

83 cÚ¡ 
TM©rixT
<
R—l_t
> & 
W
,

84 
R—l_t
 
weightDeÿy
)

86 
size_t
 
	gm
,
	gn
;

87 
	gm
 = 
W
.
G‘Nrows
();

88 
	gn
 = 
W
.
G‘NcŞs
();

90 
size_t
 
	gi
 = 0; i < 
	gm
; i++) {

91 
size_t
 
	gj
 = 0; j < 
	gn
; j++) {

92 
A
(
i
,
j
è+ğ
weightDeÿy
 * 2.0 * 
W
(i,j);

	@src/DNN/DataLoader.cxx

16 
Çme¥aû
 
	gTMVA
 {

17 
Çme¥aû
 
	gDNN
 {

	@src/DataInputHandler.cxx

34 
	~"TMVA/D©aIÅutHªdËr.h
"

36 
	~"TMVA/D©aLßd”.h
"

37 
	~"TMVA/MsgLogg”.h
"

38 
	~"TMVA/Ty³s.h
"

39 
	~"TEv’tLi¡.h
"

40 
	~"TCut.h
"

41 
	~"TFe.h
"

42 
	~"TROOT.h
"

43 
	~"TT»e.h
"

45 
	~"TMVA/CÚfigu¿bË.h
"

47 
	~<veùÜ
>

48 
	~<io¡»am
>

53 
	gTMVA
::
D©aIÅutHªdËr
::
	$D©aIÅutHªdËr
()

54 : 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("D©aIÅutHªdËr", 
kINFO
) )

56 
fEx¶ic™T¿šTe¡
["SigÇl"] = fEx¶ic™T¿šTe¡["Background"] = 
kFALSE
;

57 
	}
}

62 
	gTMVA
::
D©aIÅutHªdËr
::~
	$D©aIÅutHªdËr
()

64 
d–‘e
 
fLogg”
;

65 
	}
}

70 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddT»e
ĞcÚ¡ 
TSŒšg
& 
â
,

71 cÚ¡ 
TSŒšg
& 
şassName
,

72 
DoubË_t
 
weight
,

73 cÚ¡ 
TCut
& 
cut
,

74 
Ty³s
::
ET»eTy³
 
‰
 )

76 
TT»e
 * 
Œ
 = 
	`R—dIÅutT»e
(
â
);

77 
Œ
->
	`S‘Name
Ğ
	`TSŒšg
("T»e")+
şassName
 );

78 
	`AddT»e
Ğ
Œ
, 
şassName
, 
weight
, 
cut
, 
‰
 );

79 
	}
}

84 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddT»e
Ğ
TT»e
* 
Œ“
,

85 cÚ¡ 
TSŒšg
& 
şassName
,

86 
DoubË_t
 
weight
,

87 cÚ¡ 
TCut
& 
cut
,

88 
Ty³s
::
ET»eTy³
 
‰
 )

90 ià(!
Œ“
è
	`Log
(è<< 
kFATAL
 << "Z”Øpoš‹¸fÜ»oàşas " << 
şassName
.
	`D©a
(è<< 
Endl
;

91 ià(
Œ“
->
	`G‘EÁr›s
()==0è
	`Log
(è<< 
kFATAL
 << "EncouÁ”edƒm±y TT»Ü TChaš oàşas " << 
şassName
.
	`D©a
(è<< 
Endl
;

92 ià(
fIÅutT»es
[
şassName
.
	`D©a
()].
	`em±y
()) {

94 
fEx¶ic™T¿šTe¡
[
şassName
.
	`D©a
()] = (
‰
 !ğ
Ty³s
::
kMaxT»eTy³
);

98 ià(
fEx¶ic™T¿šTe¡
[
şassName
.
	`D©a
()] !ğ(
‰
!=
Ty³s
::
kMaxT»eTy³
)) {

99 ià(
‰
==
Ty³s
::
kMaxT»eTy³
)

100 
	`Log
(è<< 
kFATAL
 << "FÜhŒ“ " << 
Œ“
->
	`G‘Name
(è<< " oàşas " << 
şassName
.
	`D©a
()

101 << " you did "<< (
‰
==
Ty³s
::
kMaxT»eTy³
?"not ":"") << "specify‡ype,"

102 << " whyou did "<< (
‰
==
Ty³s
::
kMaxT»eTy³
?"":"not ") << "forhe firstree "

103 << 
fIÅutT»es
[
şassName
.
	`D©a
()][0].
	`G‘T»e
()->
	`G‘Name
() << " of class " << className.Data()

104 << 
Endl
;

107 ià(
cut
.
	`G‘T™Ë
()[0] != 0) {

108 
fIÅutT»es
[
şassName
.
	`D©a
()].
	`push_back
(
	`T»eInfo
Ğ
Œ“
->
	`CİyT»e
(
cut
.
	`G‘T™Ë
()), cÏssName, 
weight
, 
‰
 ));

111 
fIÅutT»es
[
şassName
.
	`D©a
()].
	`push_back
(
	`T»eInfo
Ğ
Œ“
, cÏssName, 
weight
, 
‰
 ));

113 
	}
}

118 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddSigÇlT»e
Ğ
TT»e
* 
Œ
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
‰
 )

120 
	`AddT»e
Ğ
Œ
, "SigÇl", 
weight
, "", 
‰
 );

121 
	}
}

126 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddBackgroundT»e
Ğ
TT»e
* 
Œ
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
‰
 )

128 
	`AddT»e
Ğ
Œ
, "Background", 
weight
, "", 
‰
 );

129 
	}
}

134 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddSigÇlT»e
ĞcÚ¡ 
TSŒšg
& 
â
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
‰
 )

136 
TT»e
 * 
Œ
 = 
	`R—dIÅutT»e
(
â
);

137 
Œ
->
	`S‘Name
("TreeS");

138 
	`AddT»e
Ğ
Œ
, "SigÇl", 
weight
, "", 
‰
 );

139 
	}
}

144 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddBackgroundT»e
ĞcÚ¡ 
TSŒšg
& 
â
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
‰
 )

146 
TT»e
 * 
Œ
 = 
	`R—dIÅutT»e
(
â
);

147 
Œ
->
	`S‘Name
("TreeB");

148 
	`AddT»e
Ğ
Œ
, "Background", 
weight
, "", 
‰
 );

149 
	}
}

154 
TT»e
* 
	gTMVA
::
D©aIÅutHªdËr
::
	$R—dIÅutT»e
ĞcÚ¡ 
TSŒšg
& 
d©aFe
 )

156 
TT»e
* 
Œ
 = 
Ãw
 
	`TT»e
Ğ"tmp", 
d©aFe
 );

157 
¡d
::
if¡»am
 
	`š
(
d©aFe
);

158 
Œ
->
	`S‘DœeùÜy
(0); 
	`Log
(è<< 
kWARNING
 << "W©ch out, I (H–geèmadthT»nÙ‡ssocŸ‹dØthcu¼’ˆdœeùÜy .. HİefuÎyh© dÛ nÙ havunwª‹d cÚ£qu’ûs" << 
Endl
;

159 ià(!
š
.
	`good
()è
	`Log
(è<< 
kFATAL
 << "Could‚Ù o³Àfe: " << 
d©aFe
 << 
Endl
;

160 
š
.
	`şo£
();

162 
Œ
->
	`R—dFe
Ğ
d©aFe
 );

164  
Œ
;

165 
	}
}

172 
	gTMVA
::
D©aIÅutHªdËr
::
	$AddIÅutT»es
(
TT»e
* 
šputT»e
, cÚ¡ 
TCut
& 
SigCut
, cÚ¡ TCut& 
BgCut
)

174 ià(!
šputT»e
è
	`Log
(è<< 
kFATAL
 << "Z”Øpoš‹¸fÜ iÅuˆŒ“: " << iÅutT»<< 
Endl
;

176 
	`AddT»e
Ğ
šputT»e
, "SigÇl", 1.0, 
SigCut
 );

177 
	`AddT»e
Ğ
šputT»e
, "Background", 1.0, 
BgCut
 );

178 
	}
}

183 
	gTMVA
::
D©aIÅutHªdËr
::
	$CË¬T»eLi¡
ĞcÚ¡ 
TSŒšg
& 
şassName
 )

185 
Œy
 {

186 
fIÅutT»es
.
	`fšd
(
şassName
)->
£cÚd
.
	`ş—r
();

188 
	`ÿtch
() {

189 
	`Log
(è<< 
kINFO
 << " CË¬»–i¡ fÜ cÏs " << 
şassName
 << " faed, sšû cÏs dÛ nÙƒxi¡." << 
Endl
;

191 
	}
}

195 
	g¡d
::
veùÜ
< 
TSŒšg
 >* 
TMVA
::
D©aIÅutHªdËr
::
	$G‘CÏssLi¡
() const

197 
¡d
::
veùÜ
< 
TSŒšg
 >* 
»t
 = 
Ãw
 std::vector< TString >();

198  
¡d
::
m­
< 
TSŒšg
, std::
veùÜ
<
T»eInfo
> >::
™”©Ü
 
™
 = 
fIÅutT»es
.
	`begš
(); iˆ!ğfIÅutT»es.
	`’d
(); it++ ){

199 
»t
->
	`push_back
Ğ
™
->
fœ¡
 );

201  
»t
;

202 
	}
}

207 
UIÁ_t
 
	gTMVA
::
D©aIÅutHªdËr
::
G‘EÁr›s
(cÚ¡ 
¡d
::
veùÜ
<
T»eInfo
>& 
tiV
) const

209 
UIÁ_t
 
’Œ›s
 = 0;

210 
	g¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
tiIt
 = 
tiV
.
begš
();

211 ;
	gtiIt
 !ğ
tiV
.
’d
();iIt++è
	g’Œ›s
 +ğ
tiIt
->
G‘EÁr›s
();

212  
	g’Œ›s
;

218 
UIÁ_t
 
	gTMVA
::
D©aIÅutHªdËr
::
	$G‘EÁr›s
() const

220 
UIÁ_t
 
numb”
 = 0;

221 
¡d
::
m­
< 
TSŒšg
, std::
veùÜ
<
T»eInfo
> >::
™”©Ü
 
™
 = 
fIÅutT»es
.
	`begš
(); iˆ!ğfIÅutT»es.
	`’d
(); it++) {

222 
numb”
 +ğ
	`G‘EÁr›s
Ğ
™
->
£cÚd
 );

224  
numb”
;

225 
	}
}

	@src/DataLoader.cxx

35 
	~"TROOT.h
"

36 
	~"TFe.h
"

37 
	~"TT»e.h
"

38 
	~"TL—f.h
"

39 
	~"TEv’tLi¡.h
"

40 
	~"TH2.h
"

41 
	~"TText.h
"

42 
	~"TStyË.h
"

43 
	~"TM©rixF.h
"

44 
	~"TM©rixDSym.h
"

45 
	~"TP®‘‹Axis.h
"

46 
	~"TPršc®.h
"

47 
	~"TM©h.h
"

48 
	~"TObjSŒšg.h
"

49 
	~"TRªdom3.h
"

51 
	~<¡ršg.h
>

53 
	~"TMVA/CÚfigu¿bË.h
"

54 
	~"TMVA/D©aLßd”.h
"

55 
	~"TMVA/CÚfig.h
"

56 
	~"TMVA/ToŞs.h
"

57 
	~"TMVA/Rªkšg.h
"

58 
	~"TMVA/D©aS‘.h
"

59 
	~"TMVA/IM‘hod.h
"

60 
	~"TMVA/M‘hodBa£.h
"

61 
	~"TMVA/D©aIÅutHªdËr.h
"

62 
	~"TMVA/D©aS‘Mªag”.h
"

63 
	~"TMVA/D©aS‘Info.h
"

64 
	~"TMVA/M‘hodBoo¡.h
"

65 
	~"TMVA/M‘hodC©egÜy.h
"

67 
	~"TMVA/V¬ŸbËInfo.h
"

68 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

69 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

70 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

71 
	~"TMVA/V¬ŸbËGaussT¿nsfÜm.h
"

72 
	~"TMVA/V¬ŸbËNÜm®izeT¿nsfÜm.h
"

73 
	~"TMVA/V¬T¿nsfÜmHªdËr.h
"

76 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

77 
	~"TMVA/ResuÉsReg»ssiÚ.h
"

78 
	~"TMVA/ResuÉsMuÉişass.h
"

79 
	~"TMVA/Ty³s.h
"

81 
CÏssImp
(
TMVA
::
D©aLßd”
);

86 
	gTMVA
::
D©aLßd”
::
	$D©aLßd”
Ğ
TSŒšg
 
thedlName
)

87 : 
	`CÚfigu¿bË
( ),

88 
	`fD©aS‘Mªag”
 ( 
NULL
 ),

89 
	`fD©aIÅutHªdËr
 ( 
Ãw
 
D©aIÅutHªdËr
 ),

90 
	`fT¿nsfÜm©iÚs
 ( "I" ),

91 
	`fV”bo£
 ( 
kFALSE
 ),

92 
	`fD©aAssignTy³
 ( 
kAssignEv’ts
 ),

93 
	`fAT»eEv’t
 (0),

94 
	$fMakeFŞdD©aS‘
 ( 
kFALSE
 )

96 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ*
fD©aIÅutHªdËr
 );

97 
	`S‘Name
(
thedlName
.
	`D©a
());

98 
fLogg”
->
	`S‘Sourû
("DataLoader");

99 
	}
}

103 
	gTMVA
::
D©aLßd”
::~
	$D©aLßd”
( )

107 
¡d
::
veùÜ
<
TMVA
::
V¬ŸbËT¿nsfÜmBa£
*>::
™”©Ü
 
ŒfIt
 = 
fDeçuÉTrfs
.
	`begš
();

108 ;
ŒfIt
 !ğ
fDeçuÉTrfs
.
	`’d
();rfIt++è
	`d–‘e
 (*trfIt);

110 
d–‘e
 
fD©aIÅutHªdËr
;

114 
d–‘e
 
fD©aS‘Mªag”
;

119 
ToŞs
::
	`De¡royIn¡ªû
();

120 
CÚfig
::
	`De¡royIn¡ªû
();

121 
	}
}

126 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
D©aLßd”
::
	$AddD©aS‘
Ğ
D©aS‘Info
 &
dsi
 )

128  
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
dsi
);

129 
	}
}

133 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
D©aLßd”
::
	$AddD©aS‘
ĞcÚ¡ 
TSŒšg
& 
dsiName
 )

135 
D©aS‘Info
* 
dsi
 = 
fD©aS‘Mªag”
->
	`G‘D©aS‘Info
(
dsiName
);

137 ià(
dsi
!=0)  *dsi;

139  
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(*(
Ãw
 
	`D©aS‘Info
(
dsiName
)));

140 
	}
}

144 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
D©aLßd”
::
	$G‘D©aS‘Info
()

146  
	`DeçuÉD©aS‘Info
();

147 
	}
}

153 
	gTMVA
::
D©aLßd”
* 
TMVA
::D©aLßd”::
	$V¬T¿nsfÜm
(
TSŒšg
 
ŒafoDefš™iÚ
)

155 
TSŒšg
 
ŒO±iÚs
 = "0";

156 
TSŒšg
 
ŒName
 = "None";

157 ià(
ŒafoDefš™iÚ
.
	`CÚšs
("(")) {

160 
Ssiz_t
 
·rS¹
 = 
ŒafoDefš™iÚ
.
	`Index
( "(" );

161 
Ssiz_t
 
·rL’
 = 
ŒafoDefš™iÚ
.
	`Index
Ğ")", 
·rS¹
 )-parStart+1;

163 
ŒName
 = 
	`ŒafoDefš™iÚ
(0,
·rS¹
);

164 
ŒO±iÚs
 = 
	`ŒafoDefš™iÚ
(
·rS¹
,
·rL’
);

165 
ŒO±iÚs
.
	`Remove
(
·rL’
-1,1);

166 
ŒO±iÚs
.
	`Remove
(0,1);

169 
ŒName
 = 
ŒafoDefš™iÚ
;

171 
V¬T¿nsfÜmHªdËr
* 
hªdËr
 = 
Ãw
 
	`V¬T¿nsfÜmHªdËr
(
this
);

173 ià(
ŒName
 == "VT") {

176 
DoubË_t
 
th»shŞd
 = 0.0;

177 ià(!
ŒO±iÚs
.
	`IsFlßt
()){

178 
	`Log
(è<< 
kFATAL
 << " VT¿nsfÜm©iÚ mu¡ b·s£d‡ flßtšgh»shŞd v®ue" << 
Endl
;

179 
d–‘e
 
hªdËr
;

180  
this
;

183 
th»shŞd
 = 
ŒO±iÚs
.
	`Atof
();

184 
TMVA
::
D©aLßd”
 *
ŒªsfÜmedLßd”
 = 
hªdËr
->
	`V¬ŸnûTh»shŞd
(
th»shŞd
);

185 
d–‘e
 
hªdËr
;

186  
ŒªsfÜmedLßd”
;

189 
	`Log
(è<< 
kFATAL
 << "IncÜ»ù¿nsfÜm©iÚ sŒšg…rovided,…Ëa£ check" << 
Endl
;

191 
	`Log
(è<< 
kINFO
 << "NØŒªsfÜm©iÚ‡µl›d,„‘uºšg origš®†ßd”" << 
Endl
;

192  
this
;

193 
	}
}

201 
TT»e
* 
	gTMVA
::
D©aLßd”
::
	$C»©eEv’tAssignT»es
ĞcÚ¡ 
TSŒšg
& 
Çme
 )

203 
TT»e
 * 
assignT»e
 = 
Ãw
 
	`TT»e
Ğ
Çme
,‚ame );

204 
assignT»e
->
	`S‘DœeùÜy
(0);

205 
assignT»e
->
	`B¿nch
Ğ"ty³", &
fAT»eTy³
, "ATreeType/I" );

206 
assignT»e
->
	`B¿nch
Ğ"weight", &
fAT»eWeight
, "ATreeWeight/F" );

208 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬s
 = 
	`DeçuÉD©aS‘Info
().
	`G‘V¬ŸbËInfos
();

209 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
tgts
 = 
	`DeçuÉD©aS‘Info
().
	`G‘T¬g‘Infos
();

210 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
¥ec
 = 
	`DeçuÉD©aS‘Info
().
	`G‘S³ù©ÜInfos
();

212 ià(
fAT»eEv’t
.
	`size
()==0èfAT»eEv’t.
	`»size
(
v¬s
.size()+
tgts
.size()+
¥ec
.size());

214 
UIÁ_t
 
iv¬
=0; iv¬<
v¬s
.
	`size
(); ivar++) {

215 
TSŒšg
 
vÇme
 = 
v¬s
[
iv¬
].
	`G‘Ex´essiÚ
();

216 
assignT»e
->
	`B¿nch
Ğ
vÇme
, &
fAT»eEv’t
[
iv¬
], vname + "/F" );

219 
UIÁ_t
 
™gt
=0; itgt<
tgts
.
	`size
(); itgt++) {

220 
TSŒšg
 
vÇme
 = 
tgts
[
™gt
].
	`G‘Ex´essiÚ
();

221 
assignT»e
->
	`B¿nch
Ğ
vÇme
, &
fAT»eEv’t
[
v¬s
.
	`size
()+
™gt
], vname + "/F" );

224 
UIÁ_t
 
i¥c
=0; i¥c<
¥ec
.
	`size
(); ispc++) {

225 
TSŒšg
 
vÇme
 = 
¥ec
[
i¥c
].
	`G‘Ex´essiÚ
();

226 
assignT»e
->
	`B¿nch
Ğ
vÇme
, &
fAT»eEv’t
[
v¬s
.
	`size
()+
tgts
.size()+
i¥c
], vname + "/F" );

228  
assignT»e
;

229 
	}
}

234 
	gTMVA
::
D©aLßd”
::
AddSigÇlT¿ššgEv’t
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

236 
AddEv’t
Ğ"SigÇl", 
Ty³s
::
kT¿ššg
, 
ev’t
, 
weight
 );

242 
	gTMVA
::
D©aLßd”
::
AddSigÇlTe¡Ev’t
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

244 
AddEv’t
Ğ"SigÇl", 
Ty³s
::
kTe¡šg
, 
ev’t
, 
weight
 );

250 
	gTMVA
::
D©aLßd”
::
AddBackgroundT¿ššgEv’t
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

252 
AddEv’t
Ğ"Background", 
Ty³s
::
kT¿ššg
, 
ev’t
, 
weight
 );

258 
	gTMVA
::
D©aLßd”
::
AddBackgroundTe¡Ev’t
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

260 
AddEv’t
Ğ"Background", 
Ty³s
::
kTe¡šg
, 
ev’t
, 
weight
 );

266 
	gTMVA
::
D©aLßd”
::
AddT¿ššgEv’t
ĞcÚ¡ 
TSŒšg
& 
şassName
, cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

268 
AddEv’t
Ğ
şassName
, 
Ty³s
::
kT¿ššg
, 
ev’t
, 
weight
 );

274 
	gTMVA
::
D©aLßd”
::
AddTe¡Ev’t
ĞcÚ¡ 
TSŒšg
& 
şassName
, cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

276 
AddEv’t
Ğ
şassName
, 
Ty³s
::
kTe¡šg
, 
ev’t
, 
weight
 );

283 
	gTMVA
::
D©aLßd”
::
AddEv’t
ĞcÚ¡ 
TSŒšg
& 
şassName
, 
Ty³s
::
ET»eTy³
 
‰
,

284 cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
ev’t
, DoubË_ˆ
weight
 )

286 
CÏssInfo
* 
	gtheCÏss
 = 
DeçuÉD©aS‘Info
().
AddCÏss
(
şassName
);

287 
UIÁ_t
 
	gşIndex
 = 
theCÏss
->
G‘Numb”
();

291 ifĞ
	gfAÇlysisTy³
 =ğ
Ty³s
::
kNoAÇlysisTy³
 && 
DeçuÉD©aS‘Info
().
G‘NCÏs£s
() > 2 )

292 
fAÇlysisTy³
 = 
Ty³s
::
kMuÉişass
;

295 ià(
	gşIndex
>=
fT¿šAssignT»e
.
size
()) {

296 
fT¿šAssignT»e
.
»size
(
şIndex
+1, 0);

297 
	gfTe¡AssignT»e
.
»size
(
şIndex
+1, 0);

300 ià(
	gfT¿šAssignT»e
[
şIndex
]==0) {

301 
fT¿šAssignT»e
[
şIndex
] = 
C»©eEv’tAssignT»es
Ğ
FÜm
("T¿šAssignT»e_%s", 
şassName
.
D©a
()) );

302 
	gfTe¡AssignT»e
[
şIndex
] = 
C»©eEv’tAssignT»es
Ğ
FÜm
("Te¡AssignT»e_%s", 
şassName
.
D©a
()) );

305 
	gfAT»eTy³
 = 
şIndex
;

306 
	gfAT»eWeight
 = 
weight
;

307 
UIÁ_t
 
	giv¬
=0; iv¬<
	gev’t
.
size
(); iv¬++è
	gfAT»eEv’t
[
iv¬
] = 
ev’t
[ivar];

309 if(
	g‰
==
Ty³s
::
kT¿ššg
è
fT¿šAssignT»e
[
şIndex
]->
Fl
();

310 
	gfTe¡AssignT»e
[
şIndex
]->
Fl
();

317 
BoŞ_t
 
	gTMVA
::
D©aLßd”
::
	$U£rAssignEv’ts
(
UIÁ_t
 
şIndex
)

319  
fT¿šAssignT»e
[
şIndex
]!=0;

320 
	}
}

325 
	gTMVA
::
D©aLßd”
::
	$S‘IÅutT»esFromEv’tAssignT»es
()

327 
UIÁ_t
 
size
 = 
fT¿šAssignT»e
.
	`size
();

328 
UIÁ_t
 
i
=0; i<
size
; i++) {

329 if(!
	`U£rAssignEv’ts
(
i
)) ;

330 cÚ¡ 
TSŒšg
& 
şassName
 = 
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
(
i
)->
	`G‘Name
();

331 
	`S‘WeightEx´essiÚ
Ğ"weight", 
şassName
 );

332 
	`AddT»e
(
fT¿šAssignT»e
[
i
], 
şassName
, 1.0, 
	`TCut
(""), 
Ty³s
::
kT¿ššg
 );

333 
	`AddT»e
(
fTe¡AssignT»e
[
i
], 
şassName
, 1.0, 
	`TCut
(""), 
Ty³s
::
kTe¡šg
 );

335 
	}
}

340 
	gTMVA
::
D©aLßd”
::
	$AddT»e
Ğ
TT»e
* 
Œ“
, cÚ¡ 
TSŒšg
& 
şassName
, 
DoubË_t
 
weight
,

341 cÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
Œ“ty³
 )

343 
Ty³s
::
ET»eTy³
 
‰
 = Ty³s::
kMaxT»eTy³
;

344 
TSŒšg
 
tmpT»eTy³
 = 
Œ“ty³
;mpT»eTy³.
	`ToLow”
();

345 ià(
tmpT»eTy³
.
	`CÚšs
Ğ"Œaš" ) &&mpT»eTy³.CÚšsĞ"‹¡" )è
‰
 = 
Ty³s
::
kMaxT»eTy³
;

346 ià(
tmpT»eTy³
.
	`CÚšs
Ğ"Œaš" )è
‰
 = 
Ty³s
::
kT¿ššg
;

347 ià(
tmpT»eTy³
.
	`CÚšs
Ğ"‹¡" )è
‰
 = 
Ty³s
::
kTe¡šg
;

349 
	`Log
(è<< 
kFATAL
 << "<AddT»e> cªnÙ iÁ”´‘»ty³: \"" << 
Œ“ty³


350 << "\" should b\"T¿ššg\" o¸\"Te¡\" o¸\"T¿ššg‡nd Te¡šg\"" << 
Endl
;

352 
	`AddT»e
Ğ
Œ“
, 
şassName
, 
weight
, 
cut
, 
‰
 );

353 
	}
}

357 
	gTMVA
::
D©aLßd”
::
	$AddT»e
Ğ
TT»e
* 
Œ“
, cÚ¡ 
TSŒšg
& 
şassName
, 
DoubË_t
 
weight
,

358 cÚ¡ 
TCut
& 
cut
, 
Ty³s
::
ET»eTy³
 
‰
 )

360 if(!
Œ“
)

361 
	`Log
(è<< 
kFATAL
 << "T»dÛ nÙƒxi¡ (em±y…oš‹r)." << 
Endl
;

363 
	`DeçuÉD©aS‘Info
().
	`AddCÏss
Ğ
şassName
 );

366 ifĞ
fAÇlysisTy³
 =ğ
Ty³s
::
kNoAÇlysisTy³
 && 
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
() > 2 )

367 
fAÇlysisTy³
 = 
Ty³s
::
kMuÉişass
;

369 
	`Log
(è<< 
kINFO
<< "Add T»" << 
Œ“
->
	`G‘Name
(è<< " oàty³ " << 
şassName


370 << " w™h " << 
Œ“
->
	`G‘EÁr›s
(è<< "ƒv’ts" << 
Endl
;

371 
	`D©aIÅut
().
	`AddT»e
Ğ
Œ“
, 
şassName
, 
weight
, 
cut
, 
‰
 );

372 
	}
}

377 
	gTMVA
::
D©aLßd”
::
	$AddSigÇlT»e
Ğ
TT»e
* 
sigÇl
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
Œ“ty³
 )

379 
	`AddT»e
Ğ
sigÇl
, "SigÇl", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

380 
	}
}

385 
	gTMVA
::
D©aLßd”
::
	$AddSigÇlT»e
Ğ
TSŒšg
 
d©FeS
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
Œ“ty³
 )

388 
TT»e
* 
sigÇlT»e
 = 
Ãw
 
	`TT»e
( "TreeS", "Tree (S)" );

389 
sigÇlT»e
->
	`R—dFe
Ğ
d©FeS
 );

391 
	`Log
(è<< 
kINFO
 << "Create TTree objects from ASCII input files ... \n- Signal file : \""

392 << 
d©FeS
 << 
Endl
;

395 
	`AddT»e
Ğ
sigÇlT»e
, "SigÇl", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

396 
	}
}

400 
	gTMVA
::
D©aLßd”
::
	$AddSigÇlT»e
Ğ
TT»e
* 
sigÇl
, 
DoubË_t
 
weight
, cÚ¡ 
TSŒšg
& 
Œ“ty³
 )

402 
	`AddT»e
Ğ
sigÇl
, "SigÇl", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

403 
	}
}

408 
	gTMVA
::
D©aLßd”
::
	$AddBackgroundT»e
Ğ
TT»e
* 
sigÇl
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
Œ“ty³
 )

410 
	`AddT»e
Ğ
sigÇl
, "Background", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

411 
	}
}

416 
	gTMVA
::
D©aLßd”
::
	$AddBackgroundT»e
Ğ
TSŒšg
 
d©FeB
, 
DoubË_t
 
weight
, 
Ty³s
::
ET»eTy³
 
Œ“ty³
 )

419 
TT»e
* 
bkgT»e
 = 
Ãw
 
	`TT»e
( "TreeB", "Tree (B)" );

420 
bkgT»e
->
	`R—dFe
Ğ
d©FeB
 );

422 
	`Log
(è<< 
kINFO
 << "Create TTree objects from ASCII input files ... \n- Background file : \""

423 << 
d©FeB
 << 
Endl
;

426 
	`AddT»e
Ğ
bkgT»e
, "Background", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

427 
	}
}

431 
	gTMVA
::
D©aLßd”
::
	$AddBackgroundT»e
Ğ
TT»e
* 
sigÇl
, 
DoubË_t
 
weight
, cÚ¡ 
TSŒšg
& 
Œ“ty³
 )

433 
	`AddT»e
Ğ
sigÇl
, "Background", 
weight
, 
	`TCut
(""), 
Œ“ty³
 );

434 
	}
}

438 
	gTMVA
::
D©aLßd”
::
	$S‘SigÇlT»e
Ğ
TT»e
* 
Œ“
, 
DoubË_t
 
weight
 )

440 
	`AddT»e
Ğ
Œ“
, "SigÇl", 
weight
 );

441 
	}
}

445 
	gTMVA
::
D©aLßd”
::
	$S‘BackgroundT»e
Ğ
TT»e
* 
Œ“
, 
DoubË_t
 
weight
 )

447 
	`AddT»e
Ğ
Œ“
, "Background", 
weight
 );

448 
	}
}

453 
	gTMVA
::
D©aLßd”
::
	$S‘T»e
Ğ
TT»e
* 
Œ“
, cÚ¡ 
TSŒšg
& 
şassName
, 
DoubË_t
 
weight
 )

455 
	`AddT»e
Ğ
Œ“
, 
şassName
, 
weight
, 
	`TCut
(""), 
Ty³s
::
kMaxT»eTy³
 );

456 
	}
}

461 
	gTMVA
::
D©aLßd”
::
	$S‘IÅutT»es
Ğ
TT»e
* 
sigÇl
, TT»e* 
background
,

462 
DoubË_t
 
sigÇlWeight
, DoubË_ˆ
backgroundWeight
 )

464 
	`AddT»e
Ğ
sigÇl
, "SigÇl", 
sigÇlWeight
, 
	`TCut
(""), 
Ty³s
::
kMaxT»eTy³
 );

465 
	`AddT»e
Ğ
background
, "Background", 
backgroundWeight
, 
	`TCut
(""), 
Ty³s
::
kMaxT»eTy³
 );

466 
	}
}

470 
	gTMVA
::
D©aLßd”
::
	$S‘IÅutT»es
ĞcÚ¡ 
TSŒšg
& 
d©FeS
, cÚ¡ TSŒšg& 
d©FeB
,

471 
DoubË_t
 
sigÇlWeight
, DoubË_ˆ
backgroundWeight
 )

473 
	`D©aIÅut
().
	`AddT»e
Ğ
d©FeS
, "SigÇl", 
sigÇlWeight
 );

474 
	`D©aIÅut
().
	`AddT»e
Ğ
d©FeB
, "Background", 
backgroundWeight
 );

475 
	}
}

482 
	gTMVA
::
D©aLßd”
::
	$S‘IÅutT»es
Ğ
TT»e
* 
šputT»e
, cÚ¡ 
TCut
& 
SigCut
, cÚ¡ TCut& 
BgCut
 )

484 
	`AddT»e
Ğ
šputT»e
, "SigÇl", 1.0, 
SigCut
, 
Ty³s
::
kMaxT»eTy³
 );

485 
	`AddT»e
Ğ
šputT»e
, "Background", 1.0, 
BgCut
 , 
Ty³s
::
kMaxT»eTy³
 );

486 
	}
}

491 
	gTMVA
::
D©aLßd”
::
	$AddV¬ŸbË
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, cÚ¡ TSŒšg& 
t™Ë
, cÚ¡ TSŒšg& 
un™
,

492 
ty³
, 
DoubË_t
 
mš
, DoubË_ˆ
max
 )

494 
	`DeçuÉD©aS‘Info
().
	`AddV¬ŸbË
Ğ
ex´essiÚ
, 
t™Ë
, 
un™
, 
mš
, 
max
, 
ty³
 );

495 
	}
}

500 
	gTMVA
::
D©aLßd”
::
	$AddV¬ŸbË
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, 
ty³
,

501 
DoubË_t
 
mš
, DoubË_ˆ
max
 )

503 
	`DeçuÉD©aS‘Info
().
	`AddV¬ŸbË
Ğ
ex´essiÚ
, "", "", 
mš
, 
max
, 
ty³
 );

504 
	}
}

509 
	gTMVA
::
D©aLßd”
::
	$AddT¬g‘
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, cÚ¡ TSŒšg& 
t™Ë
, cÚ¡ TSŒšg& 
un™
,

510 
DoubË_t
 
mš
, DoubË_ˆ
max
 )

512 ifĞ
fAÇlysisTy³
 =ğ
Ty³s
::
kNoAÇlysisTy³
 )

513 
fAÇlysisTy³
 = 
Ty³s
::
kReg»ssiÚ
;

515 
	`DeçuÉD©aS‘Info
().
	`AddT¬g‘
Ğ
ex´essiÚ
, 
t™Ë
, 
un™
, 
mš
, 
max
 );

516 
	}
}

521 
	gTMVA
::
D©aLßd”
::
	$AddS³ù©Ü
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, cÚ¡ TSŒšg& 
t™Ë
, cÚ¡ TSŒšg& 
un™
,

522 
DoubË_t
 
mš
, DoubË_ˆ
max
 )

524 
	`DeçuÉD©aS‘Info
().
	`AddS³ù©Ü
Ğ
ex´essiÚ
, 
t™Ë
, 
un™
, 
mš
, 
max
 );

525 
	}
}

530 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
D©aLßd”
::
	$DeçuÉD©aS‘Info
()

532  
	`AddD©aS‘
Ğ
fName
 );

533 
	}
}

538 
	gTMVA
::
D©aLßd”
::
S‘IÅutV¬ŸbËs
Ğ
¡d
::
veùÜ
<
TSŒšg
>* 
theV¬ŸbËs
 )

540 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™
=
theV¬ŸbËs
->
begš
();

541 
	g™
!=
theV¬ŸbËs
->
’d
(); it++è
AddV¬ŸbË
(*
™
);

546 
	gTMVA
::
D©aLßd”
::
	$S‘SigÇlWeightEx´essiÚ
ĞcÚ¡ 
TSŒšg
& 
v¬ŸbË
)

548 
	`DeçuÉD©aS‘Info
().
	`S‘WeightEx´essiÚ
(
v¬ŸbË
, "Signal");

549 
	}
}

553 
	gTMVA
::
D©aLßd”
::
	$S‘BackgroundWeightEx´essiÚ
ĞcÚ¡ 
TSŒšg
& 
v¬ŸbË
)

555 
	`DeçuÉD©aS‘Info
().
	`S‘WeightEx´essiÚ
(
v¬ŸbË
, "Background");

556 
	}
}

560 
	gTMVA
::
D©aLßd”
::
	$S‘WeightEx´essiÚ
ĞcÚ¡ 
TSŒšg
& 
v¬ŸbË
, cÚ¡ TSŒšg& 
şassName
 )

563 ià(
şassName
=="") {

564 
	`S‘SigÇlWeightEx´essiÚ
(
v¬ŸbË
);

565 
	`S‘BackgroundWeightEx´essiÚ
(
v¬ŸbË
);

567 
	`DeçuÉD©aS‘Info
().
	`S‘WeightEx´essiÚ
Ğ
v¬ŸbË
, 
şassName
 );

568 
	}
}

572 
	gTMVA
::
D©aLßd”
::
	$S‘Cut
ĞcÚ¡ 
TSŒšg
& 
cut
, cÚ¡ TSŒšg& 
şassName
 ) {

573 
	`S‘Cut
Ğ
	`TCut
(
cut
), 
şassName
 );

574 
	}
}

578 
	gTMVA
::
D©aLßd”
::
	$S‘Cut
ĞcÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
şassName
 )

580 
	`DeçuÉD©aS‘Info
().
	`S‘Cut
Ğ
cut
, 
şassName
 );

581 
	}
}

585 
	gTMVA
::
D©aLßd”
::
	$AddCut
ĞcÚ¡ 
TSŒšg
& 
cut
, cÚ¡ TSŒšg& 
şassName
 )

587 
	`AddCut
Ğ
	`TCut
(
cut
), 
şassName
 );

588 
	}
}

591 
	gTMVA
::
D©aLßd”
::
	$AddCut
ĞcÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
şassName
 )

593 
	`DeçuÉD©aS‘Info
().
	`AddCut
Ğ
cut
, 
şassName
 );

594 
	}
}

599 
	gTMVA
::
D©aLßd”
::
	$P»·»T¿ššgAndTe¡T»e
ĞcÚ¡ 
TCut
& 
cut
,

600 
IÁ_t
 
NsigT¿š
, IÁ_ˆ
NbkgT¿š
, IÁ_ˆ
NsigTe¡
, IÁ_ˆ
NbkgTe¡
,

601 cÚ¡ 
TSŒšg
& 
Ùh”O±
 )

603 
	`S‘IÅutT»esFromEv’tAssignT»es
();

605 
	`AddCut
Ğ
cut
 );

607 
	`DeçuÉD©aS‘Info
().
	`S‘S¶™O±iÚs
Ğ
	`FÜm
("nTrain_Signal=%i:nTrain_Background=%i:nTest_Signal=%i:nTest_Background=%i:%s",

608 
NsigT¿š
, 
NbkgT¿š
, 
NsigTe¡
, 
NbkgTe¡
, 
Ùh”O±
.
	`D©a
()) );

609 
	}
}

615 
	gTMVA
::
D©aLßd”
::
	$P»·»T¿ššgAndTe¡T»e
ĞcÚ¡ 
TCut
& 
cut
, 
IÁ_t
 
NŒaš
, IÁ_ˆ
N‹¡
 )

617 
	`S‘IÅutT»esFromEv’tAssignT»es
();

619 
	`AddCut
Ğ
cut
 );

621 
	`DeçuÉD©aS‘Info
().
	`S‘S¶™O±iÚs
Ğ
	`FÜm
("nTrain_Signal=%i:nTrain_Background=%i:nTest_Signal=%i:nTest_Background=%i:SplitMode=Random:EqualTrainSample:!V",

622 
NŒaš
, NŒaš, 
N‹¡
, Ntest) );

623 
	}
}

629 
	gTMVA
::
D©aLßd”
::
	$P»·»T¿ššgAndTe¡T»e
ĞcÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
İt
 )

631 
	`S‘IÅutT»esFromEv’tAssignT»es
();

633 
	`DeçuÉD©aS‘Info
().
	`PrštCÏs£s
();

634 
	`AddCut
Ğ
cut
 );

635 
	`DeçuÉD©aS‘Info
().
	`S‘S¶™O±iÚs
Ğ
İt
 );

636 
	}
}

641 
	gTMVA
::
D©aLßd”
::
	$P»·»T¿ššgAndTe¡T»e
Ğ
TCut
 
sigcut
, TCuˆ
bkgcut
, cÚ¡ 
TSŒšg
& 
¥l™O±
 )

644 
	`S‘IÅutT»esFromEv’tAssignT»es
();

647 
	`AddCut
Ğ
sigcut
, "Signal" );

648 
	`AddCut
Ğ
bkgcut
, "Background" );

650 
	`DeçuÉD©aS‘Info
().
	`S‘S¶™O±iÚs
Ğ
¥l™O±
 );

651 
	}
}

659 
	gTMVA
::
D©aLßd”
::
	$MakeKFŞdD©aS‘
(
UIÁ_t
 
numb”FŞds
, 
boŞ
 
v®id©iÚS‘
){

661 if(
fMakeFŞdD©aS‘
){

662 
	`Log
(è<< 
kInfo
 << "S¶™tšg iÀk-fŞd ha b“À®»ady dÚe" << 
Endl
;

666 
fMakeFŞdD©aS‘
 = 
kTRUE
;

669 cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*> 
T¿ššgD©a
 = 
	`DeçuÉD©aS‘Info
().
	`G‘D©aS‘
()->
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
);

670 cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*> 
Te¡šgD©a
 = 
	`DeçuÉD©aS‘Info
().
	`G‘D©aS‘
()->
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
);

672 
¡d
::
veùÜ
<
Ev’t
*> 
T¿šSigD©a
;

673 
¡d
::
veùÜ
<
Ev’t
*> 
T¿šBkgD©a
;

674 
¡d
::
veùÜ
<
Ev’t
*> 
Te¡SigD©a
;

675 
¡d
::
veùÜ
<
Ev’t
*> 
Te¡BkgD©a
;

678 
UIÁ_t
 
i
=0; i<
T¿ššgD©a
.
	`size
(); ++i){

679 ifĞ
	`¡ºcmp
Ğ
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
T¿ššgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(), "SigÇl", 6è=ğ0){ 
T¿šSigD©a
.
	`push_back
(TrainingData.at(i)); }

680 ifĞ
	`¡ºcmp
Ğ
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
T¿ššgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(), "Background", 10è=ğ0){ 
T¿šBkgD©a
.
	`push_back
(TrainingData.at(i)); }

682 
	`Log
(è<< 
kFATAL
 << "D©aS‘ should oÆy cÚš SigÇÈªd Background cÏs£ fÜ cÏssifiÿtiÚ, " << 
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
T¿ššgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(è<< " i nÙ‡„ecogni£d cÏss" << 
Endl
;

686 
UIÁ_t
 
i
=0; i<
Te¡šgD©a
.
	`size
(); ++i){

687 ifĞ
	`¡ºcmp
Ğ
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
Te¡šgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(), "SigÇl", 6è=ğ0){ 
Te¡SigD©a
.
	`push_back
(TestingData.at(i)); }

688 ifĞ
	`¡ºcmp
Ğ
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
Te¡šgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(), "Background", 10è=ğ0){ 
Te¡BkgD©a
.
	`push_back
(TestingData.at(i)); }

690 
	`Log
(è<< 
kFATAL
 << "D©aS‘ should oÆy cÚš SigÇÈªd Background cÏs£ fÜ cÏssifiÿtiÚ, " << 
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
Ğ
Te¡šgD©a
.
	`©
(
i
)->
	`G‘CÏss
(è)->
	`G‘Name
(è<< " i nÙ‡„ecogni£d cÏss" << 
Endl
;

696 if(
v®id©iÚS‘
){

697 
¡d
::
veùÜ
<¡d::veùÜ<
Ev’t
*>> 
‹mpSigEv’ts
 = 
	`S¶™S‘s
(
T¿šSigD©a
,0,2);

698 
¡d
::
veùÜ
<¡d::veùÜ<
Ev’t
*>> 
‹mpBkgEv’ts
 = 
	`S¶™S‘s
(
T¿šBkgD©a
,0,2);

699 
fT¿šSigEv’ts
 = 
	`S¶™S‘s
(
‹mpSigEv’ts
.
	`©
(0),0,
numb”FŞds
);

700 
fT¿šBkgEv’ts
 = 
	`S¶™S‘s
(
‹mpBkgEv’ts
.
	`©
(0),0,
numb”FŞds
);

701 
fV®idSigEv’ts
 = 
	`S¶™S‘s
(
‹mpSigEv’ts
.
	`©
(1),0,
numb”FŞds
);

702 
fV®idBkgEv’ts
 = 
	`S¶™S‘s
(
‹mpBkgEv’ts
.
	`©
(1),0,
numb”FŞds
);

705 
fT¿šSigEv’ts
 = 
	`S¶™S‘s
(
T¿šSigD©a
,0,
numb”FŞds
);

706 
fT¿šBkgEv’ts
 = 
	`S¶™S‘s
(
T¿šBkgD©a
,0,
numb”FŞds
);

709 
fTe¡SigEv’ts
 = 
	`S¶™S‘s
(
Te¡SigD©a
,0,
numb”FŞds
);

710 
fTe¡BkgEv’ts
 = 
	`S¶™S‘s
(
Te¡BkgD©a
,0,
numb”FŞds
);

711 
	}
}

716 
	gTMVA
::
D©aLßd”
::
	$P»·»FŞdD©aS‘
(
UIÁ_t
 
fŞdNumb”
, 
Ty³s
::
ET»eTy³
 
‰
){

718 
UIÁ_t
 
numFŞds
 = 
fT¿šSigEv’ts
.
	`size
();

720 
¡d
::
veùÜ
<
Ev’t
*>* 
‹mpT¿š
 = 
Ãw
 std::vector<Event*>;

721 
¡d
::
veùÜ
<
Ev’t
*>* 
‹mpTe¡
 = 
Ãw
 std::vector<Event*>;

723 
UIÁ_t
 
nT¿š
 = 0;

724 
UIÁ_t
 
nTe¡
 = 0;

727 
UIÁ_t
 
i
=0; i<
numFŞds
; ++i){

728 if(
‰
 =ğ
Ty³s
::
kT¿ššg
){

729 if(
i
!=
fŞdNumb”
){

730 
nT¿š
 +ğ
fT¿šSigEv’ts
.
	`©
(
i
).
	`size
();

731 
nT¿š
 +ğ
fT¿šBkgEv’ts
.
	`©
(
i
).
	`size
();

734 
nTe¡
 +ğ
fT¿šSigEv’ts
.
	`©
(
i
).
	`size
();

735 
nTe¡
 +ğ
fT¿šSigEv’ts
.
	`©
(
i
).
	`size
();

738 if(
‰
 =ğ
Ty³s
::
kV®id©iÚ
){

739 if(
i
!=
fŞdNumb”
){

740 
nT¿š
 +ğ
fV®idSigEv’ts
.
	`©
(
i
).
	`size
();

741 
nT¿š
 +ğ
fV®idBkgEv’ts
.
	`©
(
i
).
	`size
();

744 
nTe¡
 +ğ
fV®idSigEv’ts
.
	`©
(
i
).
	`size
();

745 
nTe¡
 +ğ
fV®idSigEv’ts
.
	`©
(
i
).
	`size
();

748 if(
‰
 =ğ
Ty³s
::
kTe¡šg
){

749 if(
i
!=
fŞdNumb”
){

750 
nT¿š
 +ğ
fTe¡SigEv’ts
.
	`©
(
i
).
	`size
();

751 
nT¿š
 +ğ
fTe¡BkgEv’ts
.
	`©
(
i
).
	`size
();

754 
nTe¡
 +ğ
fTe¡SigEv’ts
.
	`©
(
i
).
	`size
();

755 
nTe¡
 +ğ
fTe¡SigEv’ts
.
	`©
(
i
).
	`size
();

761 
‹mpT¿š
->
	`»£rve
(
nT¿š
);

762 
‹mpTe¡
->
	`»£rve
(
nTe¡
);

765 
UIÁ_t
 
j
=0; j<
numFŞds
; ++j){

766 if(
‰
 =ğ
Ty³s
::
kT¿ššg
){

767 if(
j
!=
fŞdNumb”
){

768 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fT¿šSigEv’ts
.
	`©
(
j
).
	`begš
(), fTrainSigEvents.at(j).end());

769 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fT¿šBkgEv’ts
.
	`©
(
j
).
	`begš
(), fTrainBkgEvents.at(j).end());

772 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fT¿šSigEv’ts
.
	`©
(
j
).
	`begš
(), fTrainSigEvents.at(j).end());

773 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fT¿šBkgEv’ts
.
	`©
(
j
).
	`begš
(), fTrainBkgEvents.at(j).end());

776 if(
‰
 =ğ
Ty³s
::
kV®id©iÚ
){

777 if(
j
!=
fŞdNumb”
){

778 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fV®idSigEv’ts
.
	`©
(
j
).
	`begš
(), fValidSigEvents.at(j).end());

779 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fV®idBkgEv’ts
.
	`©
(
j
).
	`begš
(), fValidBkgEvents.at(j).end());

782 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fV®idSigEv’ts
.
	`©
(
j
).
	`begš
(), fValidSigEvents.at(j).end());

783 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fV®idBkgEv’ts
.
	`©
(
j
).
	`begš
(), fValidBkgEvents.at(j).end());

786 if(
‰
 =ğ
Ty³s
::
kTe¡šg
){

787 if(
j
!=
fŞdNumb”
){

788 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fTe¡SigEv’ts
.
	`©
(
j
).
	`begš
(), fTestSigEvents.at(j).end());

789 
‹mpT¿š
->
	`š£¹
ÑempT¿š->
	`’d
(), 
fTe¡BkgEv’ts
.
	`©
(
j
).
	`begš
(), fTestBkgEvents.at(j).end());

792 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fTe¡SigEv’ts
.
	`©
(
j
).
	`begš
(), fTestSigEvents.at(j).end());

793 
‹mpTe¡
->
	`š£¹
ÑempTe¡->
	`’d
(), 
fTe¡BkgEv’ts
.
	`©
(
j
).
	`begš
(), fTestBkgEvents.at(j).end());

799 
	`DeçuÉD©aS‘Info
().
	`G‘D©aS‘
()->
	`S‘Ev’tCŞËùiÚ
(
‹mpT¿š
,
Ty³s
::
kT¿ššg
,
çl£
);

800 
	`DeçuÉD©aS‘Info
().
	`G‘D©aS‘
()->
	`S‘Ev’tCŞËùiÚ
(
‹mpTe¡
,
Ty³s
::
kTe¡šg
,
çl£
);

801 
d–‘e
 
‹mpTe¡
;

802 
d–‘e
 
‹mpT¿š
;

803 
	}
}

808 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
TMVA
::
Ev’t
*>> TMVA::
D©aLßd”
::
S¶™S‘s
(¡d::veùÜ<TMVA::Ev’t*>& 
ŞdS‘
, 
£edNum
, 
numFŞds
){

810 
ULÚg64_t
 
	gnEÁr›s
 = 
ŞdS‘
.
size
();

811 
ULÚg64_t
 
	gfŞdSize
 = 
nEÁr›s
/
numFŞds
;

813 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
Ev’t
*>> 
‹mpS‘s
;

814 
	g‹mpS‘s
.
»size
(
numFŞds
);

816 
TRªdom3
 
r
(
£edNum
);

818 
ULÚg64_t
 
	gšS‘
 = 0;

820 
ULÚg64_t
 
	gi
=0; i<
	gnEÁr›s
; i++){

821 
boŞ
 
	gšT»e
 = 
çl£
;

822 if(
	gšS‘
 =ğ
fŞdSize
*
numFŞds
){

826 !
	gšT»e
){

827 
	gs
 = 
r
.
IÁeg”
(
numFŞds
);

828 if(
	g‹mpS‘s
.
©
(
s
).
size
()<
	gfŞdSize
){

829 
	g‹mpS‘s
.
©
(
s
).
push_back
(
ŞdS‘
.©(
i
));

830 
	gšS‘
++;

831 
	gšT»e
=
Œue
;

837  
	g‹mpS‘s
;

844 
	gTMVA
::
D©aLßd”
* 
TMVA
::D©aLßd”::
	$MakeCİy
(
TSŒšg
 
Çme
)

846 
TMVA
::
D©aLßd”
* 
des
=
Ãw
 TMVA::
	`D©aLßd”
(
Çme
);

847 
	`D©aLßd”Cİy
(
des
,
this
);

848  
des
;

849 
	}
}

854 
	gTMVA
::
	$D©aLßd”Cİy
(
TMVA
::
D©aLßd”
* 
des
, TMVA::D©aLßd”* 
¤c
)

856  
¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
Œ“šfo
=
¤c
->
	`D©aIÅut
().
	`Sbegš
();Œ“šfo!=¤c->D©aIÅut().
	`S’d
();treeinfo++)

858 
des
->
	`AddSigÇlT»e
Ğ(*
Œ“šfo
).
	`G‘T»e
(), (*Œ“šfo).
	`G‘Weight
(),(*Œ“šfo).
	`G‘T»eTy³
());

861  
¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
Œ“šfo
=
¤c
->
	`D©aIÅut
().
	`Bbegš
();Œ“šfo!=¤c->D©aIÅut().
	`B’d
();treeinfo++)

863 
des
->
	`AddBackgroundT»e
Ğ(*
Œ“šfo
).
	`G‘T»e
(), (*Œ“šfo).
	`G‘Weight
(),(*Œ“šfo).
	`G‘T»eTy³
());

865 
	}
}

870 
TH2
* 
	gTMVA
::
D©aLßd”
::
	$G‘CÜ»ÏtiÚM©rix
(cÚ¡ 
TSŒšg
& 
şassName
)

872 cÚ¡ 
TM©rixD
 * 
m
 = 
	`DeçuÉD©aS‘Info
().
	`CÜ»ÏtiÚM©rix
(
şassName
);

873  
	`DeçuÉD©aS‘Info
().
	`C»©eCÜ»ÏtiÚM©rixHi¡
(
m
,

874 "CÜ»ÏtiÚM©rix"+
şassName
, "Correlation Matrix ("+className+")");

875 
	}
}

	@src/DataSet.cxx

34 
	~<veùÜ
>

35 
	~<®gÜ™hm
>

36 
	~<c¡dlib
>

37 
	~<¡dexû±
>

38 
	~<®gÜ™hm
>

40 
	~"TMVA/D©aS‘Info.h
"

41 
	~"TMVA/D©aS‘.h
"

42 
	~"TMVA/Ev’t.h
"

43 
	~"TMVA/MsgLogg”.h
"

44 
	~"TMVA/ResuÉsReg»ssiÚ.h
"

45 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

46 
	~"TMVA/ResuÉsMuÉişass.h
"

47 
	~"TMVA/CÚfigu¿bË.h
"

49 
	~"TMVA/Ty³s.h
"

50 
	~"TMVA/ResuÉs.h
"

51 
	~"TMVA/V¬ŸbËInfo.h
"

53 
	~"TRªdom3.h
"

58 
	gTMVA
::
D©aS‘
::
	$D©aS‘
(cÚ¡ 
D©aS‘Info
& 
dsi
)

59 :
	`TNamed
(
dsi
.
	`G‘Name
(),"DataSet"),

60 
	`fdsi
(&
dsi
),

61 
	`fEv’tCŞËùiÚ
(4),

62 
	`fCu¼’tT»eIdx
(0),

63 
	`fCu¼’tEv’tIdx
(0),

64 
	`fHasNeg©iveEv’tWeights
(
kFALSE
),

65 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`TSŒšg
(TSŒšg("D©a£t:")+
dsi
.
	`G‘Name
()).
	`D©a
()) ),

66 
	$fT¿ššgBlockSize
(0)

69 
fCÏssEv’ts
.
	`»size
(4);

70 
fBlockB–ÚgToT¿ššg
.
	`»£rve
(10);

71 
fBlockB–ÚgToT¿ššg
.
	`push_back
(
kTRUE
);

74 
fSam¶šgRªdom
 = 0;

76 
IÁ_t
 
Œ“Num
 = 2;

77 
fSam¶šg
.
	`»size
Ğ
Œ“Num
 );

78 
fSam¶šgNEv’ts
.
	`»size
Ğ
Œ“Num
 );

79 
fSam¶šgWeight
.
	`»size
(
Œ“Num
);

81 
IÁ_t
 
Œ“Idx
 = 0;»eIdx < 
Œ“Num
;reeIdx++) {

82 
fSam¶šg
.
	`©
(
Œ“Idx
èğ
kFALSE
;

83 
fSam¶šgNEv’ts
.
	`©
(
Œ“Idx
) = 0;

84 
fSam¶šgWeight
.
	`©
(
Œ“Idx
) = 1.0;

86 
	}
}

91 
	gTMVA
::
D©aS‘
::
	$D©aS‘
()

92 :
	`fdsi
(
Ãw
 
	`D©aS‘Info
(
	`G‘Name
())),

93 
	`fEv’tCŞËùiÚ
(4),

94 
	`fCu¼’tT»eIdx
(0),

95 
	`fCu¼’tEv’tIdx
(0),

96 
	`fHasNeg©iveEv’tWeights
(
kFALSE
),

97 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`TSŒšg
(TSŒšg("D©a£t:")+
	`G‘Name
()).
	`D©a
()) ),

98 
	$fT¿ššgBlockSize
(0)

101 
fCÏssEv’ts
.
	`»size
(4);

102 
fBlockB–ÚgToT¿ššg
.
	`»£rve
(10);

103 
fBlockB–ÚgToT¿ššg
.
	`push_back
(
kTRUE
);

106 
fSam¶šgRªdom
 = 0;

108 
IÁ_t
 
Œ“Num
 = 2;

109 
fSam¶šg
.
	`»size
Ğ
Œ“Num
 );

110 
fSam¶šgNEv’ts
.
	`»size
Ğ
Œ“Num
 );

111 
fSam¶šgWeight
.
	`»size
(
Œ“Num
);

113 
IÁ_t
 
Œ“Idx
 = 0;»eIdx < 
Œ“Num
;reeIdx++) {

114 
fSam¶šg
.
	`©
(
Œ“Idx
èğ
kFALSE
;

115 
fSam¶šgNEv’ts
.
	`©
(
Œ“Idx
) = 0;

116 
fSam¶šgWeight
.
	`©
(
Œ“Idx
) = 1.0;

118 
	}
}

123 
	gTMVA
::
D©aS‘
::~
	$D©aS‘
()

126 
BoŞ_t
 
d–‘eEv’ts
=
Œue
;

127 
	`De¡royCŞËùiÚ
Ğ
Ty³s
::
kT¿ššg
, 
d–‘eEv’ts
 );

128 
	`De¡royCŞËùiÚ
Ğ
Ty³s
::
kTe¡šg
, 
d–‘eEv’ts
 );

130 
fBlockB–ÚgToT¿ššg
.
	`ş—r
();

132 
¡d
::
veùÜ
< std::
m­
< 
TSŒšg
, 
ResuÉs
* > >::
™”©Ü
 
™
 = 
fResuÉs
.
	`begš
(); iˆ!ğfResuÉs.
	`’d
(); it++) {

133 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >::
™”©Ü
 
™M­
 = (*
™
).
	`begš
(); itM­ !ğ(*™).
	`’d
(); itMap++) {

134 
d–‘e
 
™M­
->
£cÚd
;

139 ià(
fSam¶šgRªdom
 !ğ0 ) 
d–‘e
 fSamplingRandom;

143 
	`De¡royCŞËùiÚ
Ğ
Ty³s
::
kV®id©iÚ
, 
d–‘eEv’ts
 );

144 
	`De¡royCŞËùiÚ
Ğ
Ty³s
::
kT¿ššgOrigš®
, 
d–‘eEv’ts
 );

146 
d–‘e
 
fLogg”
;

147 
	}
}

151 
	gTMVA
::
D©aS‘
::
	$Inüem’tNCÏssEv’ts
Ğ
IÁ_t
 
ty³
, 
UIÁ_t
 
şassNumb”
 )

153 ià(
fCÏssEv’ts
.
	`size
()<(
UIÁ_t
)(
ty³
+1)èfCÏssEv’ts.
	`»size
(ype+1 );

154 ià(
fCÏssEv’ts
.
	`©
Ğ
ty³
 ).
	`size
(è< 
şassNumb”
+1èfCÏssEv’ts.©Ğty³ ).
	`»size
( classNumber+1 );

155 
fCÏssEv’ts
.
	`©
Ğ
ty³
 ).©Ğ
şassNumb”
 ) += 1;

156 
	}
}

160 
	gTMVA
::
D©aS‘
::
	$CË¬NCÏssEv’ts
Ğ
IÁ_t
 
ty³
 )

162 ià(
fCÏssEv’ts
.
	`size
()<(
UIÁ_t
)(
ty³
+1)èfCÏssEv’ts.
	`»size
(ype+1 );

163 
fCÏssEv’ts
.
	`©
Ğ
ty³
 ).
	`ş—r
();

164 
	}
}

168 
LÚg64_t
 
	gTMVA
::
D©aS‘
::
	$G‘NCÏssEv’ts
Ğ
IÁ_t
 
ty³
, 
UIÁ_t
 
şassNumb”
 )

170 
Œy
 {

171  
fCÏssEv’ts
.
	`©
(
ty³
).©(
şassNumb”
);

173 
	`ÿtch
 (
¡d
::
out_of_¿nge
 
exıt
) {

174 
CÏssInfo
* 
ci
 = 
fdsi
->
	`G‘CÏssInfo
Ğ
şassNumb”
 );

175 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "NØ" << (
ty³
==0?"training":(type==1?"testing":"_unknown_type_"))

176 << "ƒv’t fÜ cÏs " << (
ci
==
NULL
?"_no_Çme_known_":ci->
	`G‘Name
()è<< " (šdex # "<<
şassNumb”
<<")"

178 << "…assšgh£ËùiÚ cuts." << 
Endl
;

180 
	`ÿtch
 (...) {

181 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "ERROR/CAUGHT : D©aS‘/G‘NCÏssEv’ts, .. unknowÀ”rÜ" << 
Endl
;

184 
	}
}

189 
	gTMVA
::
D©aS‘
::
	$De¡royCŞËùiÚ
(
Ty³s
::
ET»eTy³
 
ty³
, 
BoŞ_t
 
d–‘eEv’ts
 )

191 
UIÁ_t
 
i
 = 
	`T»eIndex
(
ty³
);

192 ià(
i
>=
fEv’tCŞËùiÚ
.
	`size
() || fEventCollection[i].size()==0) ;

193 ià(
d–‘eEv’ts
) {

195 
UIÁ_t
 
j
=0; j<
fEv’tCŞËùiÚ
[
i
].
	`size
(); j++è
d–‘e
 fEventCollection[i][j];

197 
fEv’tCŞËùiÚ
[
i
].
	`ş—r
();

198 
	}
}

202 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
D©aS‘
::
	$G‘Ev’t
() const

204 ià(
fSam¶šg
.
	`size
(è> 
	`UIÁ_t
(
fCu¼’tT»eIdx
è&& fSam¶šg.
	`©
(fCurrentTreeIdx)) {

205 
LÚg64_t
 
iEvt
 = 
fSam¶šgS–eùed
.
	`©
(
fCu¼’tT»eIdx
).©Ğ
fCu¼’tEv’tIdx
 ).
£cÚd
;

206  ((
fEv’tCŞËùiÚ
.
	`©
(
fCu¼’tT»eIdx
))).©(
iEvt
);

209  ((
fEv’tCŞËùiÚ
.
	`©
(
fCu¼’tT»eIdx
))).©(
fCu¼’tEv’tIdx
);

211 
	}
}

216 
UIÁ_t
 
	gTMVA
::
D©aS‘
::
	$G‘NV¬ŸbËs
() const

218  
fdsi
->
	`G‘NV¬ŸbËs
();

219 
	}
}

224 
UIÁ_t
 
	gTMVA
::
D©aS‘
::
	$G‘NT¬g‘s
() const

226  
fdsi
->
	`G‘NT¬g‘s
();

227 
	}
}

232 
UIÁ_t
 
	gTMVA
::
D©aS‘
::
	$G‘NS³ù©Üs
() const

234  
fdsi
->
	`G‘NS³ù©Üs
();

235 
	}
}

241 
	gTMVA
::
D©aS‘
::
	$AddEv’t
(
Ev’t
 * 
ev
, 
Ty³s
::
ET»eTy³
 
ty³
)

243 
fEv’tCŞËùiÚ
.
	`©
(
	`IÁ_t
(
ty³
)).
	`push_back
(
ev
);

244 ià(
ev
->
	`G‘Weight
()<0è
fHasNeg©iveEv’tWeights
 = 
kTRUE
;

245 
	}
}

250 
	gTMVA
::
D©aS‘
::
S‘Ev’tCŞËùiÚ
(
¡d
::
veùÜ
<
TMVA
::
Ev’t
*>* 
ev’ts
, 
Ty³s
::
ET»eTy³
 
ty³
, 
BoŞ_t
 
d–‘eEv’ts
)

252 
De¡royCŞËùiÚ
(
ty³
,
d–‘eEv’ts
);

254 cÚ¡ 
IÁ_t
 
	gt
 = 
T»eIndex
(
ty³
);

255 
CË¬NCÏssEv’ts
Ğ
ty³
 );

257 
	gfEv’tCŞËùiÚ
.
©
(
t
èğ*
ev’ts
;

258 
	g¡d
::
veùÜ
<
Ev’t
*>::
™”©Ü
 
™
 = 
fEv’tCŞËùiÚ
.
©
(
t
).
begš
(); 
	g™
 < 
	gfEv’tCŞËùiÚ
.©Ñ).
’d
(); it++) {

259 
Inüem’tNCÏssEv’ts
Ğ
t
, (*
™
)->
G‘CÏss
() );

265 
	gTMVA
::
ResuÉs
* 
TMVA
::
D©aS‘
::
	$G‘ResuÉs
ĞcÚ¡ 
TSŒšg
 & 
»suÉsName
,

266 
Ty³s
::
ET»eTy³
 
ty³
,

267 
Ty³s
::
EAÇlysisTy³
 
ª®ysi¡y³
 )

269 
UIÁ_t
 
t
 = 
	`T»eIndex
(
ty³
);

270 ià(
t
<
fResuÉs
.
	`size
()) {

271 cÚ¡ 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >& 
»suÉsFÜTy³
 = 
fResuÉs
[
t
];

272 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >::
cÚ¡_™”©Ü
 
™
 = 
»suÉsFÜTy³
.
	`fšd
(
»suÉsName
);

273 ià(
™
!=
»suÉsFÜTy³
.
	`’d
()) {

275  
™
->
£cÚd
;

279 
fResuÉs
.
	`»size
(
t
+1);

284 
ResuÉs
 * 
Ãw»suÉs
 = 0;

285 
ª®ysi¡y³
) {

286 
Ty³s
::
kCÏssifiÿtiÚ
:

287 
Ãw»suÉs
 = 
Ãw
 
	`ResuÉsCÏssifiÿtiÚ
(
fdsi
,
»suÉsName
);

289 
Ty³s
::
kReg»ssiÚ
:

290 
Ãw»suÉs
 = 
Ãw
 
	`ResuÉsReg»ssiÚ
(
fdsi
,
»suÉsName
);

292 
Ty³s
::
kMuÉişass
:

293 
Ãw»suÉs
 = 
Ãw
 
	`ResuÉsMuÉişass
(
fdsi
,
»suÉsName
);

295 
Ty³s
::
kNoAÇlysisTy³
:

296 
Ãw»suÉs
 = 
Ãw
 
	`ResuÉsCÏssifiÿtiÚ
(
fdsi
,
»suÉsName
);

298 
Ty³s
::
kMaxAÇlysisTy³
:

304 
Ãw»suÉs
->
	`S‘T»eTy³
Ğ
ty³
 );

305 
fResuÉs
[
t
][
»suÉsName
] = 
Ãw»suÉs
;

308  
Ãw»suÉs
;

309 
	}
}

316 
	gTMVA
::
D©aS‘
::
	$D–‘eResuÉs
ĞcÚ¡ 
TSŒšg
 & 
»suÉsName
,

317 
Ty³s
::
ET»eTy³
 
ty³
,

318 
Ty³s
::
EAÇlysisTy³
 )

320 ià(
fResuÉs
.
	`em±y
()) ;

322 ià(
	`UIÁ_t
(
ty³
è> 
fResuÉs
.
	`size
()){

323 
	`Log
()<<
kFATAL
<< 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()) << "you‡sked for‡n Treetype (training/testing/...)"

324 << " who£ index " << 
ty³
 << " dÛ nÙƒxi¡ " << 
Endl
;

326 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >& 
»suÉsFÜTy³
 = 
fResuÉs
[
	`UIÁ_t
(
ty³
)];

327 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >::
™”©Ü
 
™
 = 
»suÉsFÜTy³
.
	`fšd
(
»suÉsName
);

328 ià(
™
!=
»suÉsFÜTy³
.
	`’d
()) {

329 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< " D–‘ResuÉ ´eviou exi¡šg„esuÉ:" << 
»suÉsName


330 << " oàty³ " << 
ty³
 << 
Endl
;

331 
d–‘e
 
™
->
£cÚd
;

332 
»suÉsFÜTy³
.
	`”a£
(
™
->
fœ¡
);

335 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "could‚Ù fšResuÉ cÏs oà" << 
»suÉsName


336 << " oàty³ " << 
ty³
 << " which I should havd–‘ed" << 
Endl
;

338 
	}
}

342 
	gTMVA
::
D©aS‘
::
	$DivideT¿ššgS‘
Ğ
UIÁ_t
 
blockNum
 )

344 
IÁ_t
 
tOrg
 = 
	`T»eIndex
(
Ty³s
::
kT¿ššgOrigš®
),
tTº
 = T»eIndex(Ty³s::
kT¿ššg
);

346 ià(
fBlockB–ÚgToT¿ššg
.
	`size
(è=ğ
blockNum
) ;

348 ià(
fBlockB–ÚgToT¿ššg
.
	`size
() == 1) {

349 ià(
fEv’tCŞËùiÚ
[
tOrg
].
	`size
() == 0)

350 
fEv’tCŞËùiÚ
[
tOrg
].
	`»size
(fEv’tCŞËùiÚ[
tTº
].
	`size
());

351 
fEv’tCŞËùiÚ
[
tOrg
].
	`ş—r
();

352 
UIÁ_t
 
i
=0; i<
fEv’tCŞËùiÚ
[
tTº
].
	`size
(); i++)

353 
fEv’tCŞËùiÚ
[
tOrg
].
	`push_back
(fEv’tCŞËùiÚ[
tTº
][
i
]);

354 
fCÏssEv’ts
[
tOrg
] = fCÏssEv’ts[
tTº
];

357 
fBlockB–ÚgToT¿ššg
.
	`ş—r
();

358 
UIÁ_t
 
i
=0 ; i < 
blockNum
 ; i++è
fBlockB–ÚgToT¿ššg
.
	`push_back
(
kTRUE
);

360 
	`AµlyT¿ššgS‘DivisiÚ
();

361 
	}
}

366 
	gTMVA
::
D©aS‘
::
	$AµlyT¿ššgS‘DivisiÚ
()

368 
IÁ_t
 
tOrg
 = 
	`T»eIndex
(
Ty³s
::
kT¿ššgOrigš®
), 
tTº
 = T»eIndex(Ty³s::
kT¿ššg
), 
tVld
 = T»eIndex(Ty³s::
kV®id©iÚ
);

369 
fEv’tCŞËùiÚ
[
tTº
].
	`ş—r
();

370 ià(
fEv’tCŞËùiÚ
[
tVld
].
	`size
()==0)

371 
fEv’tCŞËùiÚ
[
tVld
].
	`»size
(fEv’tCŞËùiÚ[
tOrg
].
	`size
());

372 
fEv’tCŞËùiÚ
[
tVld
].
	`ş—r
();

375 
UIÁ_t
 
i
=0; i<
fEv’tCŞËùiÚ
[
tOrg
].
	`size
(); i++) {

376 ià(
fBlockB–ÚgToT¿ššg
[
i
 % fBlockB–ÚgToT¿ššg.
	`size
()])

377 
fEv’tCŞËùiÚ
[
tTº
].
	`push_back
(fEv’tCŞËùiÚ[
tOrg
][
i
]);

379 
fEv’tCŞËùiÚ
[
tVld
].
	`push_back
(fEv’tCŞËùiÚ[
tOrg
][
i
]);

381 
	}
}

386 
	gTMVA
::
D©aS‘
::
	$MoveT¿ššgBlock
Ğ
IÁ_t
 
blockInd
,
Ty³s
::
ET»eTy³
 
de¡
, 
BoŞ_t
 
­¶yChªges
 )

388 ià(
de¡
 =ğ
Ty³s
::
kV®id©iÚ
)

389 
fBlockB–ÚgToT¿ššg
[
blockInd
]=
kFALSE
;

391 
fBlockB–ÚgToT¿ššg
[
blockInd
]=
kTRUE
;

392 ià(
­¶yChªges
è
	`AµlyT¿ššgS‘DivisiÚ
();

393 
	}
}

398 
LÚg64_t
 
	gTMVA
::
D©aS‘
::
	$G‘NEvtSigTe¡
()

400  
	`G‘NCÏssEv’ts
(
Ty³s
::
kTe¡šg
, 
fdsi
->
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
() );

401 
	}
}

406 
LÚg64_t
 
	gTMVA
::
D©aS‘
::
	$G‘NEvtBkgdTe¡
()

408  
	`G‘NCÏssEv’ts
(
Ty³s
::
kTe¡šg
, 
fdsi
->
	`G‘CÏssInfo
("Background")->
	`G‘Numb”
() );

409 
	}
}

414 
LÚg64_t
 
	gTMVA
::
D©aS‘
::
	$G‘NEvtSigT¿š
()

416  
	`G‘NCÏssEv’ts
(
Ty³s
::
kT¿ššg
, 
fdsi
->
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
() );

417 
	}
}

422 
LÚg64_t
 
	gTMVA
::
D©aS‘
::
	$G‘NEvtBkgdT¿š
()

424  
	`G‘NCÏssEv’ts
(
Ty³s
::
kT¿ššg
, 
fdsi
->
	`G‘CÏssInfo
("Background")->
	`G‘Numb”
() );

425 
	}
}

430 
	gTMVA
::
D©aS‘
::
	$In™Sam¶šg
Ğ
Flßt_t
 
äaùiÚ
, Flßt_ˆ
weight
, 
UIÁ_t
 
£ed
 )

433 ià(
fSam¶šgRªdom
 =ğ0 ) fSam¶šgRªdom = 
Ãw
 
	`TRªdom3
Ğ
£ed
 );

436 
¡d
::
veùÜ
< std::
·œ
< 
Flßt_t
, 
LÚg64_t
 >* > 
evtLi¡
;

437 
¡d
::
veùÜ
< std::
·œ
< 
Flßt_t
, 
LÚg64_t
 >* >::
™”©Ü
 
™
;

439 
IÁ_t
 
Œ“Idx
 = 
	`T»eIndex
Ğ
	`G‘Cu¼’tTy³
() );

441 ià(
fSam¶šgEv’tLi¡
.
	`size
(è< 
	`UIÁ_t
(
Œ“Idx
+1èèfSam¶šgEv’tLi¡.
	`»size
(treeIdx+1);

442 ià(
fSam¶šgS–eùed
.
	`size
(è< 
	`UIÁ_t
(
Œ“Idx
+1èèfSam¶šgS–eùed.
	`»size
(treeIdx+1);

444 
fSam¶šgEv’tLi¡
.
	`©
(
Œ“Idx
).
	`ş—r
();

445 
fSam¶šgS–eùed
.
	`©
(
Œ“Idx
).
	`ş—r
();

447 ià(
fSam¶šg
.
	`size
(è< 
	`UIÁ_t
(
Œ“Idx
+1èèfSam¶šg.
	`»size
(treeIdx+1);

448 ià(
fSam¶šgNEv’ts
.
	`size
(è< 
	`UIÁ_t
(
Œ“Idx
+1èèfSam¶šgNEv’ts.
	`»size
(treeIdx+1);

449 ià(
fSam¶šgWeight
.
	`size
(è< 
	`UIÁ_t
(
Œ“Idx
+1èèfSam¶šgWeight.
	`»size
(treeIdx+1);

451 ià(
äaùiÚ
 > 0.999999 || fraction < 0.0000001) {

452 
fSam¶šg
.
	`©
Ğ
Œ“Idx
 ) = 
çl£
;

453 
fSam¶šgNEv’ts
.
	`©
Ğ
Œ“Idx
 ) = 0;

454 
fSam¶šgWeight
.
	`©
Ğ
Œ“Idx
 ) = 1.0;

459 
fSam¶šg
.
	`©
Ğ
Œ“Idx
 ) = 
çl£
;

461 
fSam¶šgNEv’ts
.
	`©
Ğ
Œ“Idx
 ) = 
	`IÁ_t
(
äaùiÚ
*
	`G‘NEv’ts
());

462 
fSam¶šgWeight
.
	`©
Ğ
Œ“Idx
 ) = 
weight
;

464 
LÚg64_t
 
nEvts
 = 
	`G‘NEv’ts
();

465 
fSam¶šgEv’tLi¡
.
	`©
Ğ
Œ“Idx
 ).
	`»£rve
Ğ
nEvts
 );

466 
fSam¶šgS–eùed
.
	`©
Ğ
Œ“Idx
 ).
	`»£rve
Ğ
fSam¶šgNEv’ts
.at(treeIdx) );

467 
LÚg64_t
 
›vt
=0; ievt<
nEvts
; ievt++) {

468 
¡d
::
·œ
<
Flßt_t
,
LÚg64_t
> 
	`p
(1.0,
›vt
);

469 
fSam¶šgEv’tLi¡
.
	`©
Ğ
Œ“Idx
 ).
	`push_back
Ğ
p
 );

473 
fSam¶šg
.
	`©
Ğ
Œ“Idx
 ) = 
Œue
;

474 
	}
}

480 
	gTMVA
::
D©aS‘
::
	$C»©eSam¶šg
() const

482 
IÁ_t
 
Œ“Idx
 = 
	`T»eIndex
Ğ
	`G‘Cu¼’tTy³
() );

484 ià(!
fSam¶šg
.
	`©
(
Œ“Idx
) ) ;

486 ià(
fSam¶šgRªdom
 == 0 )

487 
	`Log
(è<< 
kFATAL
<< 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
())

488 << "nØ¿ndom g’”©Ü…»£Á fÜ c»©šg‡„ªdom/impÜnû sam¶šg (š™Ÿlized?)" << 
Endl
;

491 
fSam¶šgS–eùed
.
	`©
(
Œ“Idx
).
	`ş—r
();

494 
¡d
::
veùÜ
< std::
·œ
< 
Flßt_t
, 
LÚg64_t
 > > 
evtLi¡
;

495 
¡d
::
veùÜ
< std::
·œ
< 
Flßt_t
, 
LÚg64_t
 > >::
™”©Ü
 
evtLi¡It
;

498 
Flßt_t
 
sumWeights
 = 0;

501 
evtLi¡
.
	`assign
Ğ
fSam¶šgEv’tLi¡
.
	`©
(
Œ“Idx
).
	`begš
(), fSam¶šgEv’tLi¡.©Ñ»eIdx).
	`’d
() );

504 
evtLi¡It
 = 
evtLi¡
.
	`begš
();ƒvtLi¡Iˆ!ğevtLi¡.
	`’d
();ƒvtListIt++) {

505 
sumWeights
 +ğ(*
evtLi¡It
).
fœ¡
;

507 
evtLi¡It
 = 
evtLi¡
.
	`begš
();

510 
¡d
::
veùÜ
< 
Flßt_t
 > 
ºds
;

511 
ºds
.
	`»£rve
(
fSam¶šgNEv’ts
.
	`©
(
Œ“Idx
));

513 
Flßt_t
 
pos
 = 0;

514 
IÁ_t
 
i
 = 0; i < 
fSam¶šgNEv’ts
.
	`©
(
Œ“Idx
); i++) {

515 
pos
 = 
fSam¶šgRªdom
->
	`Rndm
()*
sumWeights
;

516 
ºds
.
	`push_back
Ğ
pos
 );

520 
¡d
::
	`sÜt
(
ºds
.
	`begš
(),ºds.
	`’d
());

523 
¡d
::
veùÜ
< 
Flßt_t
 >::
™”©Ü
 
ºdsIt
 = 
ºds
.
	`begš
();

524 
Flßt_t
 
ruÂšgSum
 = 0.000000001;

525 
evtLi¡It
 = 
evtLi¡
.
	`begš
();ƒvtLi¡Iˆ!ğevtLi¡.
	`’d
();) {

526 
ruÂšgSum
 +ğ(*
evtLi¡It
).
fœ¡
;

527 ià(
ruÂšgSum
 >ğ(*
ºdsIt
)) {

528 
fSam¶šgS–eùed
.
	`©
(
Œ“Idx
).
	`push_back
Ğ(*
evtLi¡It
) );

529 
evtLi¡It
 = 
evtLi¡
.
	`”a£
(ƒvtListIt );

531 
ºdsIt
++;

532 ià(
ºdsIt
 =ğ
ºds
.
	`’d
() ) ;

535 
evtLi¡It
++;

538 
	}
}

544 
	gTMVA
::
D©aS‘
::
	$Ev’tResuÉ
Ğ
BoŞ_t
 
sucûssful
, 
LÚg64_t
 
evtNumb”
 )

547 ià(!
fSam¶šg
.
	`©
(
fCu¼’tT»eIdx
)) ;

548 ià(
fSam¶šgWeight
.
	`©
(
fCu¼’tT»eIdx
) > 0.99999999999) ;

550 
LÚg64_t
 
¡¬t
 = 0;

551 
LÚg64_t
 
¡İ
 = 
fSam¶šgEv’tLi¡
.
	`©
(
fCu¼’tT»eIdx
).
	`size
() -1;

552 ià(
evtNumb”
 >= 0) {

553 
¡¬t
 = 
evtNumb”
;

554 
¡İ
 = 
evtNumb”
;

556  
LÚg64_t
 
iEvt
 = 
¡¬t
; iEvˆ<ğ
¡İ
; iEvt++ ){

557 ià(
	`LÚg64_t
(
fSam¶šgEv’tLi¡
.
	`©
(
fCu¼’tT»eIdx
).
	`size
()è< 
iEvt
) {

558 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "ev’ˆnumb” (" << 
iEvt


560 << 
fSam¶šgEv’tLi¡
.
	`©
(
fCu¼’tT»eIdx
).
	`size
(è<< " oàŒ“ " << fCu¼’tT»eIdx << ")" << 
Endl
;

563 
Flßt_t
 
weight
 = 
fSam¶šgEv’tLi¡
.
	`©
(
fCu¼’tT»eIdx
).©Ğ
iEvt
 ).
fœ¡
;

564 ià(!
sucûssful
) {

566 
weight
 /ğ
fSam¶šgWeight
.
	`©
(
fCu¼’tT»eIdx
);

567 ià(
weight
 > 1.0 ) weight = 1.0;

571 
weight
 *ğ
fSam¶šgWeight
.
	`©
(
fCu¼’tT»eIdx
);

573 
fSam¶šgEv’tLi¡
.
	`©
(
fCu¼’tT»eIdx
).©Ğ
iEvt
 ).
fœ¡
 = 
weight
;

575 
	}
}

581 
TT»e
* 
	gTMVA
::
D©aS‘
::
	$G‘T»e
Ğ
Ty³s
::
ET»eTy³
 
ty³
 )

583 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "G‘T»e(" << ( 
ty³
==
Ty³s
::
kT¿ššg
 ? "Œaššg" : "‹¡šg" ) << ")" << 
Endl
;

587 ià(
ty³
!=
Ty³s
::
kT¿ššg
 &&y³!=Ty³s::
kTe¡šg
)  0;

589 
Ty³s
::
ET»eTy³
 
§vedTy³
 = 
	`G‘Cu¼’tTy³
();

591 
	`S‘Cu¼’tTy³
(
ty³
);

592 cÚ¡ 
UIÁ_t
 
t
 = 
	`T»eIndex
(
ty³
);

593 ià(
fResuÉs
.
	`size
(è<ğ
t
) {

594 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "NØ»suÉ fÜ»‘y³ " << ( 
ty³
==
Ty³s
::
kT¿ššg
 ? "training" : "testing" )

595 << " found. Size=" << 
fResuÉs
.
	`size
(è<< 
Endl
;

599 
TSŒšg
 
	`Œ“Name
Ğ(
ty³
 =ğ
Ty³s
::
kT¿ššg
 ? "TrainTree" : "TestTree" ) );

600 
TT»e
 *
Œ“
 = 
Ãw
 
	`TT»e
(
Œ“Name
,treeName);

602 
Flßt_t
 *
v¬V®s
 = 
Ãw
 Flßt_t[
fdsi
->
	`G‘NV¬ŸbËs
()];

603 
Flßt_t
 *
tgtV®s
 = 
Ãw
 Flßt_t[
fdsi
->
	`G‘NT¬g‘s
()];

604 
Flßt_t
 *
visV®s
 = 
Ãw
 Flßt_t[
fdsi
->
	`G‘NS³ù©Üs
()];

606 
UIÁ_t
 
şs
;

607 
Flßt_t
 
weight
;

609 
şassName
[40];

614 
Flßt_t
 **
m‘V®s
 = 
Ãw
 Flßt_t*[
fResuÉs
.
	`©
(
t
).
	`size
()];

615 
UIÁ_t
 
i
=0; i<
fResuÉs
.
	`©
(
t
).
	`size
(); i++ )

616 
m‘V®s
[
i
] = 
Ãw
 
Flßt_t
[
fdsi
->
	`G‘NT¬g‘s
()+fdsi->
	`G‘NCÏs£s
()];

619 
Œ“
->
	`B¿nch
Ğ"şassID", &
şs
, "classID/I" );

620 
Œ“
->
	`B¿nch
Ğ"şassName", 
şassName
, "className/C" );

623 
IÁ_t
 
n
 = 0;

624 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
™V¬s
 = 
fdsi
->
	`G‘V¬ŸbËInfos
().
	`begš
();

625 
™V¬s
 !ğ
fdsi
->
	`G‘V¬ŸbËInfos
().
	`’d
(); itVars++) {

628 
Œ“
->
	`B¿nch
Ğ(*
™V¬s
).
	`G‘IÁ”ÇlName
(), &
v¬V®s
[
n
], (*™V¬s).G‘IÁ”ÇlName()+
	`TSŒšg
("/F") );

629 
n
++;

632 
n
 = 0;

633 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
™Tgts
 = 
fdsi
->
	`G‘T¬g‘Infos
().
	`begš
();

634 
™Tgts
 !ğ
fdsi
->
	`G‘T¬g‘Infos
().
	`’d
(); itTgts++) {

636 
Œ“
->
	`B¿nch
Ğ(*
™Tgts
).
	`G‘IÁ”ÇlName
(), &
tgtV®s
[
n
], (*™Tgts).G‘IÁ”ÇlName()+
	`TSŒšg
("/F") );

637 
n
++;

640 
n
 = 0;

641 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
™Vis
 = 
fdsi
->
	`G‘S³ù©ÜInfos
().
	`begš
();

642 
™Vis
 !ğ
fdsi
->
	`G‘S³ù©ÜInfos
().
	`’d
(); itVis++) {

644 
Œ“
->
	`B¿nch
Ğ(*
™Vis
).
	`G‘IÁ”ÇlName
(), &
visV®s
[
n
], (*™Vis).G‘IÁ”ÇlName()+
	`TSŒšg
("/F") );

645 
n
++;

648 
Œ“
->
	`B¿nch
Ğ"weight", &
weight
, "weight/F" );

651 
n
 = 0;

652 
¡d
::
m­
< 
TSŒšg
, 
ResuÉs
* >::
™”©Ü
 
™M‘hod
 = 
fResuÉs
.
	`©
(
t
).
	`begš
();

653 
™M‘hod
 !ğ
fResuÉs
.
	`©
(
t
).
	`’d
(); itMethod++) {

656 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "ª®ysi ty³: " << (
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
()==
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

657 (
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
()==
Ty³s
::
kMuÉişass
 ? "MuÉişass" : "CÏssifiÿtiÚ" )è<< 
Endl
;

659 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kCÏssifiÿtiÚ
) {

661 
Œ“
->
	`B¿nch
Ğ
™M‘hod
->
fœ¡
, &(
m‘V®s
[
n
][0]), itMethod->first + "/F" );

663 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kMuÉişass
) {

665 
TSŒšg
 
	`ËafLi¡
("");

666 
UIÁ_t
 
iCls
 = 0; iCl < 
fdsi
->
	`G‘NCÏs£s
(); iCls++) {

667 ià(
iCls
 > 0è
ËafLi¡
.
	`Aµ’d
( ":" );

668 
ËafLi¡
.
	`Aµ’d
Ğ
fdsi
->
	`G‘CÏssInfo
Ğ
iCls
 )->
	`G‘Name
() );

669 
ËafLi¡
.
	`Aµ’d
( "/F" );

671 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "™M‘hod->fœ¡ " << 
™M‘hod
->
fœ¡
 << " LEAFLIST: "

672 << 
ËafLi¡
 << " itM‘hod->£cÚd " << 
™M‘hod
->
£cÚd
 << 
Endl
;

673 
Œ“
->
	`B¿nch
Ğ
™M‘hod
->
fœ¡
, (
m‘V®s
[
n
]), 
ËafLi¡
 );

675 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kReg»ssiÚ
) {

677 
TSŒšg
 
	`ËafLi¡
("");

678 
UIÁ_t
 
iTgt
 = 0; iTgˆ< 
fdsi
->
	`G‘NT¬g‘s
(); iTgt++) {

679 ià(
iTgt
 > 0è
ËafLi¡
.
	`Aµ’d
( ":" );

680 
ËafLi¡
.
	`Aµ’d
Ğ
fdsi
->
	`G‘T¬g‘Info
Ğ
iTgt
 ).
	`G‘IÁ”ÇlName
() );

682 
ËafLi¡
.
	`Aµ’d
( "/F" );

684 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "™M‘hod->fœ¡ " << 
™M‘hod
->
fœ¡
 << " LEAFLIST: "

685 << 
ËafLi¡
 << " itM‘hod->£cÚd " << 
™M‘hod
->
£cÚd
 << 
Endl
;

686 
Œ“
->
	`B¿nch
Ğ
™M‘hod
->
fœ¡
, (
m‘V®s
[
n
]), 
ËafLi¡
 );

689 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
fdsi
->
	`G‘Name
()è<< "UnknowÀª®ysi ty³ fÜ„esuÉ found wh’ wr™šg Te¡T»e." << 
Endl
;

691 
n
++;

696 
LÚg64_t
 
iEvt
 = 0; iEvˆ< 
	`G‘NEv’ts
Ğ
ty³
 ); iEvt++) {

698 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
Ğ
iEvt
 );

700 
şs
 = 
ev
->
	`G‘CÏss
();

701 
weight
 = 
ev
->
	`G‘Weight
();

702 
	`¡¾ıy
(
şassName
, 
fdsi
->
	`G‘CÏssInfo
Ğ
şs
 )->
	`G‘Name
(), (className));

705 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
ev
->
	`G‘NV¬ŸbËs
(); iv¬++è
v¬V®s
[iv¬] =ƒv->
	`G‘V®ue
( ivar );

706 
UIÁ_t
 
™gt
 = 0; itgˆ< 
ev
->
	`G‘NT¬g‘s
(); itgt++è
tgtV®s
[™gt] =ƒv->
	`G‘T¬g‘
( itgt );

707 
UIÁ_t
 
ivis
 = 0; ivi < 
ev
->
	`G‘NS³ù©Üs
(); ivis++è
visV®s
[ivis] =ƒv->
	`G‘S³ù©Ü
( ivis );

711 
n
=0;

712 
¡d
::
m­
<
TSŒšg
, 
ResuÉs
*>::
™”©Ü
 
™M‘hod
 = 
fResuÉs
.
	`©
(
t
).
	`begš
();

713 
™M‘hod
 !ğ
fResuÉs
.
	`©
(
t
).
	`’d
(); itMethod++) {

714 
ResuÉs
* 
»suÉs
 = 
™M‘hod
->
£cÚd
;

716 cÚ¡ 
¡d
::
veùÜ
< 
Flßt_t
 >& 
v®s
 = 
»suÉs
->
İ”©Ü
[](
iEvt
);

718 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kCÏssifiÿtiÚ
) {

720 
m‘V®s
[
n
][0] = 
v®s
[0];

722 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kMuÉişass
) {

724 
UIÁ_t
 
nCls
 = 0, 
nClsEnd
=
fdsi
->
	`G‘NCÏs£s
();‚Cls <‚ClsEnd;‚Cls++) {

725 
Flßt_t
 
v®
 = 
v®s
.
	`©
(
nCls
);

726 
m‘V®s
[
n
][
nCls
] = 
v®
;

729 ià(
™M‘hod
->
£cÚd
->
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kReg»ssiÚ
) {

731 
UIÁ_t
 
nTgts
 = 0;‚Tgt < 
fdsi
->
	`G‘NT¬g‘s
();‚Tgts++) {

732 
Flßt_t
 
v®
 = 
v®s
.
	`©
(
nTgts
);

733 
m‘V®s
[
n
][
nTgts
] = 
v®
;

736 
n
++;

739 
Œ“
->
	`Fl
();

742 
	`Log
(è<< 
kHEADER


743 << "C»©ed»'" << 
Œ“
->
	`G‘Name
(è<< "' w™h " <<»e->
	`G‘EÁr›s
(è<< "ƒv’ts" << 
Endl
 << Endl;

745 
	`S‘Cu¼’tTy³
(
§vedTy³
);

747 
d–‘e
[] 
v¬V®s
;

748 
d–‘e
[] 
tgtV®s
;

749 
d–‘e
[] 
visV®s
;

751 
UIÁ_t
 
i
=0; i<
fResuÉs
.
	`©
(
t
).
	`size
(); i++ )

752 
d–‘e
[] 
m‘V®s
[
i
];

753 
d–‘e
[] 
m‘V®s
;

755  
Œ“
;

756 
	}
}

	@src/DataSetFactory.cxx

36 
	~<as£¹.h
>

38 
	~<m­
>

39 
	~<veùÜ
>

40 
	~<iomª
>

41 
	~<io¡»am
>

43 
	~<®gÜ™hm
>

44 
	~<funùiÚ®
>

45 
	~<num”ic
>

47 
	~"TMVA/D©aS‘FaùÜy.h
"

49 
	~"TEv’tLi¡.h
"

50 
	~"TFe.h
"

51 
	~"TH1.h
"

52 
	~"TH2.h
"

53 
	~"TProfe.h
"

54 
	~"TRªdom3.h
"

55 
	~"TM©rixF.h
"

56 
	~"TVeùÜF.h
"

57 
	~"TM©h.h
"

58 
	~"TROOT.h
"

60 
	~"TMVA/MsgLogg”.h
"

61 
	~"TMVA/CÚfigu¿bË.h
"

62 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

63 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

64 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

65 
	~"TMVA/D©aS‘.h
"

66 
	~"TMVA/D©aS‘Info.h
"

67 
	~"TMVA/D©aIÅutHªdËr.h
"

68 
	~"TMVA/Ev’t.h
"

70 
	~"TMVA/Ty³s.h
"

71 
	~"TMVA/V¬ŸbËInfo.h
"

73 
usšg
 
Çme¥aû
 
	g¡d
;

77 
Çme¥aû
 
	gTMVA
 {

80 
IÁ_t
 
L¬ge¡CommÚDivid”
(IÁ_ˆ
a
, IÁ_ˆ
b
)

82 ià(
	ga
<
	gb
è{
IÁ_t
 
	gtmp
 = 
a
;‡=
b
; b=
tmp
; }

83 ià(
	gb
==0è 
a
;

84 
IÁ_t
 
	gfuÎF™s
 = 
a
/
b
;

85  
L¬ge¡CommÚDivid”
(
b
,
a
-b*
fuÎF™s
);

93 
	gTMVA
::
D©aS‘FaùÜy
::
	$D©aS‘FaùÜy
() :

94 
	`fV”bo£
(
kFALSE
),

95 
	`fV”bo£Lev–
(
	`TSŒšg
("Info")),

96 
	`fSÿËW™hP»£lEff
(0),

97 
	`fCu¼’tT»e
(0),

98 
	`fCu¼’tEvtIdx
(0),

99 
	`fIÅutFÜmuÏs
(0),

100 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("D©aS‘FaùÜy", 
kINFO
) )

102 
	}
}

107 
	gTMVA
::
D©aS‘FaùÜy
::~
	$D©aS‘FaùÜy
()

109 
¡d
::
veùÜ
<
TT»eFÜmuÏ
*>::
cÚ¡_™”©Ü
 
fÜmIt
;

111 
fÜmIt
 = 
fIÅutFÜmuÏs
.
	`begš
(è; fÜmIt!=fIÅutFÜmuÏs.
	`’d
(è; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

112 
fÜmIt
 = 
fT¬g‘FÜmuÏs
.
	`begš
(è; fÜmIt!=fT¬g‘FÜmuÏs.
	`’d
(è; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

113 
fÜmIt
 = 
fCutFÜmuÏs
.
	`begš
(è; fÜmIt!=fCutFÜmuÏs.
	`’d
(è; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

114 
fÜmIt
 = 
fWeightFÜmuÏ
.
	`begš
(è; fÜmIt!=fWeightFÜmuÏ.
	`’d
(è; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

115 
fÜmIt
 = 
fS³ù©ÜFÜmuÏs
.
	`begš
(); fÜmIt!=fS³ù©ÜFÜmuÏs.
	`’d
(); fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

117 
d–‘e
 
fLogg”
;

118 
	}
}

123 
	gTMVA
::
D©aS‘
* 
TMVA
::
D©aS‘FaùÜy
::
	$C»©eD©aS‘
Ğ
TMVA
::
D©aS‘Info
& 
dsi
,

124 
TMVA
::
D©aIÅutHªdËr
& 
d©aIÅut
 )

127 
D©aS‘
 * 
ds
 = 
	`BudIn™ŸlD©aS‘
Ğ
dsi
, 
d©aIÅut
 );

129 ià(
ds
->
	`G‘NEv’ts
() > 1) {

130 
	`C®cMšMax
(
ds
,
dsi
);

133 
UIÁ_t
 
ş
 = 0; cl< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

134 cÚ¡ 
TSŒšg
 
şassName
 = 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
();

135 
dsi
.
	`S‘CÜ»ÏtiÚM©rix
Ğ
şassName
, 
	`C®cCÜ»ÏtiÚM©rix
Ğ
ds
, 
ş
 ) );

136 
dsi
.
	`PrštCÜ»ÏtiÚM©rix
Ğ
şassName
 );

139 
	`Log
(è<< 
kHEADER
 << 
	`FÜm
("[%s] : ",
dsi
.
	`G‘Name
()è<< " " << 
Endl
 << Endl;

142  
ds
;

143 
	}
}

147 
	gTMVA
::
D©aS‘
* 
TMVA
::
D©aS‘FaùÜy
::
	$BudDyÇmicD©aS‘
Ğ
TMVA
::
D©aS‘Info
& 
dsi
 )

149 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "Bud D©aS‘ cÚsi¡šg oàÚEv’ˆw™h dyÇmiÿÎy chªgšg v¬ŸbËs" << 
Endl
;

150 
D©aS‘
* 
ds
 = 
Ãw
 
	`D©aS‘
(
dsi
);

154 if(
dsi
.
	`G‘NCÏs£s
()==0){

155 
dsi
.
	`AddCÏss
( "data" );

156 
dsi
.
	`G‘CÏssInfo
Ğ"d©a" )->
	`S‘Numb”
(0);

159 
¡d
::
veùÜ
<
Flßt_t
*>* 
evdyn
 = 
Ãw
 std::vector<Float_t*>(0);

161 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬šfos
 = 
dsi
.
	`G‘V¬ŸbËInfos
();

163 ià(
v¬šfos
.
	`em±y
())

164 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "DyÇmiød©¨£ˆÿÂÙ bbut, sšû‚Øv¬ŸbË infÜm©iÚ ¬´e£Á. Aµ¬’y‚Øv¬ŸbË havb“À£t. Thi should‚Ù h­³n,…Ëa£ cÚùhTMVA‡uthÜs." << 
Endl
;

166 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
™”©Ü
 
™
 = 
v¬šfos
.
	`begš
(), 
™End
=v¬šfos.
	`’d
();

167 ;
™
!=
™End
;++it) {

168 
Flßt_t
* 
ex‹º®
=(Flßt_t*)(*
™
).
	`G‘Ex‹º®Lšk
();

169 ià(
ex‹º®
==0)

170 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ThlškØthex‹º® v¬ŸbË i NULL whI‡mryšgØbud‡ dyÇmiød©¨£t. IÀthi ÿ£ fTmpEv’ˆäom M‘hodBa£ HAS TO BE USED iÀthm‘hodØg‘ u£fuÈv®ue š v¬ŸbËs." << 
Endl
;

171 
evdyn
->
	`push_back
 (
ex‹º®
);

174 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
¥eù©Üšfos
 = 
dsi
.
	`G‘S³ù©ÜInfos
();

175 
™
 = 
¥eù©Üšfos
.
	`begš
();

176 ;
™
!=
¥eù©Üšfos
.
	`’d
();™++è
evdyn
->
	`push_back
Ğ(
Flßt_t
*)(*™).
	`G‘Ex‹º®Lšk
() );

178 
TMVA
::
Ev’t
 * 
ev
 = 
Ãw
 
	`Ev’t
((cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
*>*&)
evdyn
, 
v¬šfos
.
	`size
());

179 
¡d
::
veùÜ
<
Ev’t
*>* 
ÃwEv’tVeùÜ
 = 
Ãw
 std::vector<Event*>;

180 
ÃwEv’tVeùÜ
->
	`push_back
(
ev
);

182 
ds
->
	`S‘Ev’tCŞËùiÚ
(
ÃwEv’tVeùÜ
, 
Ty³s
::
kT¿ššg
);

183 
ds
->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

184 
ds
->
	`S‘Cu¼’tEv’t
( 0 );

186 
d–‘e
 
ÃwEv’tVeùÜ
;

187  
ds
;

188 
	}
}

194 
	gTMVA
::
D©aS‘
*

195 
TMVA
::
D©aS‘FaùÜy
::
	$BudIn™ŸlD©aS‘
Ğ
D©aS‘Info
& 
dsi
,

196 
D©aIÅutHªdËr
& 
d©aIÅut
 )

198 ià(
d©aIÅut
.
	`G‘EÁr›s
()==0è 
	`BudDyÇmicD©aS‘
Ğ
dsi
 );

203 
¡d
::
veùÜ
< 
TSŒšg
 >* 
şassLi¡
 = 
d©aIÅut
.
	`G‘CÏssLi¡
();

204 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™
 = 
şassLi¡
->
	`begš
(); it< cÏssLi¡->
	`’d
(); it++) {

205 
dsi
.
	`AddCÏss
Ğ(*
™
) );

207 
d–‘e
 
şassLi¡
;

209 
EvtStsP”CÏss
 
	`ev’tCouÁs
(
dsi
.
	`G‘NCÏs£s
());

210 
TSŒšg
 
nÜmMode
;

211 
TSŒšg
 
¥l™Mode
;

212 
TSŒšg
 
mixMode
;

213 
UIÁ_t
 
¥l™S“d
;

215 
	`In™O±iÚs
Ğ
dsi
, 
ev’tCouÁs
, 
nÜmMode
, 
¥l™S“d
, 
¥l™Mode
 , 
mixMode
 );

217 
Ev’tVeùÜOfCÏs£sOfT»eTy³
 
tmpEv’tVeùÜ
;

218 
	`BudEv’tVeùÜ
Ğ
dsi
, 
d©aIÅut
, 
tmpEv’tVeùÜ
, 
ev’tCouÁs
 );

220 
D©aS‘
* 
ds
 = 
	`MixEv’ts
Ğ
dsi
, 
tmpEv’tVeùÜ
, 
ev’tCouÁs
,

221 
¥l™Mode
, 
mixMode
, 
nÜmMode
, 
¥l™S“d
 );

223 cÚ¡ 
BoŞ_t
 
showCŞËùedOuut
 = 
kFALSE
;

224 ià(
showCŞËùedOuut
) {

225 
IÁ_t
 
maxL
 = 
dsi
.
	`G‘CÏssNameMaxL’gth
();

226 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "CŞËùed:" << 
Endl
;

227 
UIÁ_t
 
ş
 = 0; cÈ< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

228 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()) << " "

229 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

230 << "¿ššgƒÁr›s: " << 
ds
->
	`G‘NCÏssEv’ts
Ğ0, 
ş
 ) << 
Endl
;

231 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()) << " "

232 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

233 << "e¡šgƒÁr›s: " << 
ds
->
	`G‘NCÏssEv’ts
Ğ1, 
ş
 ) << 
Endl
;

235 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " " << 
Endl
;

238  
ds
;

239 
	}
}

244 
BoŞ_t
 
	gTMVA
::
D©aS‘FaùÜy
::
	$CheckTT»eFÜmuÏ
Ğ
TT»eFÜmuÏ
* 
‰f
,

245 cÚ¡ 
TSŒšg
& 
ex´essiÚ
,

246 
BoŞ_t
& 
hasDŞÏr
 )

248 
BoŞ_t
 
wÜked
 = 
kTRUE
;

250 ifĞ
‰f
->
	`G‘Ndim
() <= 0 )

251 
	`Log
(è<< 
kFATAL
 << "Ex´essiÚ " << 
ex´essiÚ
.
	`D©a
()

252 << " could‚Ù b»sŞvedØ¨v®id fÜmuÏ. " << 
Endl
;

253 ifĞ
‰f
->
	`G‘Nd©a
() == 0 ){

254 
	`Log
(è<< 
kWARNING
 << "Ex´essiÚ: " << 
ex´essiÚ
.
	`D©a
()

258 << "Ó.g.‡¼[4] wh’‡¼ ha Úly 3ƒËm’ts)." << 
Endl
;

259 
	`Log
(è<< 
kWARNING
 << "If you wantoakeheƒvent into‡ccount you can do something†ike: "

261 << " 0 i k’‡ ª‡É”Çtive." << 
Endl
;

262 
wÜked
 = 
kFALSE
;

264 ifĞ
ex´essiÚ
.
	`CÚšs
("$") )

265 
hasDŞÏr
 = 
kTRUE
;

268 
i
 = 0, 
iEnd
 = 
‰f
->
	`G‘Ncodes
 (); i < iEnd; ++i)

270 
TL—f
* 
Ëaf
 = 
‰f
->
	`G‘L—f
 (
i
);

271 ià(!
Ëaf
->
	`IsOnT”mš®B¿nch
())

272 
hasDŞÏr
 = 
kTRUE
;

275  
wÜked
;

276 
	}
}

286 
	gTMVA
::
D©aS‘FaùÜy
::
	$ChªgeToNewT»e
Ğ
T»eInfo
& 
tšfo
, cÚ¡ 
D©aS‘Info
 & 
dsi
 )

288 
TT»e
 *
Œ
 = 
tšfo
.
	`G‘T»e
()->GetTree();

290 
Œ
->
	`S‘B¿nchStus
("*",1);

292 
BoŞ_t
 
hasDŞÏr
 = 
kFALSE
;

295 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ŒªsfÜm iÅuˆv¬ŸbËs" << 
Endl
;

296 
¡d
::
veùÜ
<
TT»eFÜmuÏ
*>::
cÚ¡_™”©Ü
 
fÜmIt
, 
fÜmItEnd
;

297 
fÜmIt
 = 
fIÅutFÜmuÏs
.
	`begš
(), 
fÜmItEnd
=fIÅutFÜmuÏs.
	`’d
(); fÜmIt!=fÜmItEnd; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

298 
fIÅutFÜmuÏs
.
	`ş—r
();

299 
TT»eFÜmuÏ
* 
‰f
 = 0;

301 
UIÁ_t
 
i
=0; i<
dsi
.
	`G‘NV¬ŸbËs
(); i++) {

302 
‰f
 = 
Ãw
 
	`TT»eFÜmuÏ
Ğ
	`FÜm
Ğ"FÜmuÏ%s", 
dsi
.
	`G‘V¬ŸbËInfo
(
i
).
	`G‘IÁ”ÇlName
().
	`D©a
() ),

303 
dsi
.
	`G‘V¬ŸbËInfo
(
i
).
	`G‘Ex´essiÚ
().
	`D©a
(), 
Œ
 );

304 
	`CheckTT»eFÜmuÏ
Ğ
‰f
, 
dsi
.
	`G‘V¬ŸbËInfo
(
i
).
	`G‘Ex´essiÚ
(), 
hasDŞÏr
 );

305 
fIÅutFÜmuÏs
.
	`push_back
Ğ
‰f
 );

311 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ŒªsfÜm„eg»ssiÚ¬g‘s" << 
Endl
;

312 
fÜmIt
 = 
fT¬g‘FÜmuÏs
.
	`begš
(), 
fÜmItEnd
 = fT¬g‘FÜmuÏs.
	`’d
(); fÜmIt!=fÜmItEnd; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

313 
fT¬g‘FÜmuÏs
.
	`ş—r
();

314 
UIÁ_t
 
i
=0; i<
dsi
.
	`G‘NT¬g‘s
(); i++) {

315 
‰f
 = 
Ãw
 
	`TT»eFÜmuÏ
Ğ
	`FÜm
Ğ"FÜmuÏ%s", 
dsi
.
	`G‘T¬g‘Info
(
i
).
	`G‘IÁ”ÇlName
().
	`D©a
() ),

316 
dsi
.
	`G‘T¬g‘Info
(
i
).
	`G‘Ex´essiÚ
().
	`D©a
(), 
Œ
 );

317 
	`CheckTT»eFÜmuÏ
Ğ
‰f
, 
dsi
.
	`G‘T¬g‘Info
(
i
).
	`G‘Ex´essiÚ
(), 
hasDŞÏr
 );

318 
fT¬g‘FÜmuÏs
.
	`push_back
Ğ
‰f
 );

324 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ŒªsfÜm s³ù©Ü v¬ŸbËs" << 
Endl
;

325 
fÜmIt
 = 
fS³ù©ÜFÜmuÏs
.
	`begš
(), 
fÜmItEnd
 = fS³ù©ÜFÜmuÏs.
	`’d
(); fÜmIt!=fÜmItEnd; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

326 
fS³ù©ÜFÜmuÏs
.
	`ş—r
();

327 
UIÁ_t
 
i
=0; i<
dsi
.
	`G‘NS³ù©Üs
(); i++) {

328 
‰f
 = 
Ãw
 
	`TT»eFÜmuÏ
Ğ
	`FÜm
Ğ"FÜmuÏ%s", 
dsi
.
	`G‘S³ù©ÜInfo
(
i
).
	`G‘IÁ”ÇlName
().
	`D©a
() ),

329 
dsi
.
	`G‘S³ù©ÜInfo
(
i
).
	`G‘Ex´essiÚ
().
	`D©a
(), 
Œ
 );

330 
	`CheckTT»eFÜmuÏ
Ğ
‰f
, 
dsi
.
	`G‘S³ù©ÜInfo
(
i
).
	`G‘Ex´essiÚ
(), 
hasDŞÏr
 );

331 
fS³ù©ÜFÜmuÏs
.
	`push_back
Ğ
‰f
 );

337 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ŒªsfÜm cuts" << 
Endl
;

338 
fÜmIt
 = 
fCutFÜmuÏs
.
	`begš
(), 
fÜmItEnd
 = fCutFÜmuÏs.
	`’d
(); fÜmIt!=fÜmItEnd; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

339 
fCutFÜmuÏs
.
	`ş—r
();

340 
UIÁ_t
 
şIdx
=0; clIdx<
dsi
.
	`G‘NCÏs£s
(); clIdx++) {

341 cÚ¡ 
TCut
& 
tmpCut
 = 
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Cut
();

342 cÚ¡ 
TSŒšg
 
	`tmpCutExp
(
tmpCut
.
	`G‘T™Ë
());

343 
‰f
 = 0;

344 ià(
tmpCutExp
!="") {

345 
‰f
 = 
Ãw
 
	`TT»eFÜmuÏ
Ğ
	`FÜm
("CutCÏss%i",
şIdx
), 
tmpCutExp
, 
Œ
 );

346 
BoŞ_t
 
wÜked
 = 
	`CheckTT»eFÜmuÏ
Ğ
‰f
, 
tmpCutExp
, 
hasDŞÏr
 );

347 ifĞ!
wÜked
 ){

348 
	`Log
(è<< 
kWARNING
 << "PËa£ check cÏs \"" << 
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Name
()

349 << "\" cuˆ\"" << 
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Cut
(è<< 
Endl
;

352 
fCutFÜmuÏs
.
	`push_back
Ğ
‰f
 );

358 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "ŒªsfÜm weights" << 
Endl
;

359 
fÜmIt
 = 
fWeightFÜmuÏ
.
	`begš
(), 
fÜmItEnd
 = fWeightFÜmuÏ.
	`’d
(); fÜmIt!=fÜmItEnd; fÜmIt++èià(*fÜmItè
d–‘e
 *formIt;

360 
fWeightFÜmuÏ
.
	`ş—r
();

361 
UIÁ_t
 
şIdx
=0; clIdx<
dsi
.
	`G‘NCÏs£s
(); clIdx++) {

362 cÚ¡ 
TSŒšg
 
tmpWeight
 = 
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Weight
();

364 ià(
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Name
(è!ğ
tšfo
.
	`G‘CÏssName
() ) {

365 
fWeightFÜmuÏ
.
	`push_back
( 0 );

369 
‰f
 = 0;

370 ià(
tmpWeight
!="") {

371 
‰f
 = 
Ãw
 
	`TT»eFÜmuÏ
Ğ"FÜmuÏWeight", 
tmpWeight
, 
Œ
 );

372 
BoŞ_t
 
wÜked
 = 
	`CheckTT»eFÜmuÏ
Ğ
‰f
, 
tmpWeight
, 
hasDŞÏr
 );

373 ifĞ!
wÜked
 ){

374 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "PËa£ check cÏs \"" << dsi.
	`G‘CÏssInfo
(
şIdx
)->GetName()

375 << "\" weighˆ\"" << 
dsi
.
	`G‘CÏssInfo
(
şIdx
)->
	`G‘Weight
(è<< 
Endl
;

379 
‰f
 = 0;

381 
fWeightFÜmuÏ
.
	`push_back
Ğ
‰f
 );

383 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches" << 
Endl
;

386 ià(!
hasDŞÏr
) {

387 
Œ
->
	`S‘B¿nchStus
("*",0);

388 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches: iÅuˆv¬ŸbËs" << 
Endl
;

390 
fÜmIt
 = 
fIÅutFÜmuÏs
.
	`begš
(); fÜmIt!=fIÅutFÜmuÏs.
	`’d
(); formIt++) {

391 
‰f
 = *
fÜmIt
;

392 
IÁ_t
 
bi
 = 0; bi<
‰f
->
	`G‘Ncodes
(); bi++) {

393 
Œ
->
	`S‘B¿nchStus
Ğ
‰f
->
	`G‘L—f
(
bi
)->
	`G‘B¿nch
()->
	`G‘Name
(), 1 );

397 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches:¬g‘s" << 
Endl
;

398 
fÜmIt
 = 
fT¬g‘FÜmuÏs
.
	`begš
(); fÜmIt!=fT¬g‘FÜmuÏs.
	`’d
(); formIt++) {

399 
‰f
 = *
fÜmIt
;

400 
IÁ_t
 
bi
 = 0; bi<
‰f
->
	`G‘Ncodes
(); bi++)

401 
Œ
->
	`S‘B¿nchStus
Ğ
‰f
->
	`G‘L—f
(
bi
)->
	`G‘B¿nch
()->
	`G‘Name
(), 1 );

404 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches: s³ù©Üs" << 
Endl
;

405 
fÜmIt
 = 
fS³ù©ÜFÜmuÏs
.
	`begš
(); fÜmIt!=fS³ù©ÜFÜmuÏs.
	`’d
(); formIt++) {

406 
‰f
 = *
fÜmIt
;

407 
IÁ_t
 
bi
 = 0; bi<
‰f
->
	`G‘Ncodes
(); bi++)

408 
Œ
->
	`S‘B¿nchStus
Ğ
‰f
->
	`G‘L—f
(
bi
)->
	`G‘B¿nch
()->
	`G‘Name
(), 1 );

411 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches: cuts" << 
Endl
;

412 
fÜmIt
 = 
fCutFÜmuÏs
.
	`begš
(); fÜmIt!=fCutFÜmuÏs.
	`’d
(); formIt++) {

413 
‰f
 = *
fÜmIt
;

414 ià(!
‰f
) ;

415 
IÁ_t
 
bi
 = 0; bi<
‰f
->
	`G‘Ncodes
(); bi++)

416 
Œ
->
	`S‘B¿nchStus
Ğ
‰f
->
	`G‘L—f
(
bi
)->
	`G‘B¿nch
()->
	`G‘Name
(), 1 );

419 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "’abË b¿nches: weights" << 
Endl
;

420 
fÜmIt
 = 
fWeightFÜmuÏ
.
	`begš
(); fÜmIt!=fWeightFÜmuÏ.
	`’d
(); formIt++) {

421 
‰f
 = *
fÜmIt
;

422 ià(!
‰f
) ;

423 
IÁ_t
 
bi
 = 0; bi<
‰f
->
	`G‘Ncodes
(); bi++)

424 
Œ
->
	`S‘B¿nchStus
Ğ
‰f
->
	`G‘L—f
(
bi
)->
	`G‘B¿nch
()->
	`G‘Name
(), 1 );

427 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "Œ“ in™Ÿlized" << 
Endl
;

429 
	}
}

434 
	gTMVA
::
D©aS‘FaùÜy
::
	$C®cMšMax
Ğ
D©aS‘
* 
ds
, 
TMVA
::
D©aS‘Info
& 
dsi
 )

436 cÚ¡ 
UIÁ_t
 
nv¬
 = 
ds
->
	`G‘NV¬ŸbËs
();

437 cÚ¡ 
UIÁ_t
 
Ágts
 = 
ds
->
	`G‘NT¬g‘s
();

438 cÚ¡ 
UIÁ_t
 
nvis
 = 
ds
->
	`G‘NS³ù©Üs
();

440 
Flßt_t
 *
mš
 = 
Ãw
 Flßt_t[
nv¬
];

441 
Flßt_t
 *
max
 = 
Ãw
 Flßt_t[
nv¬
];

442 
Flßt_t
 *
tgmš
 = 
Ãw
 Flßt_t[
Ágts
];

443 
Flßt_t
 *
tgmax
 = 
Ãw
 Flßt_t[
Ágts
];

444 
Flßt_t
 *
vmš
 = 
Ãw
 Flßt_t[
nvis
];

445 
Flßt_t
 *
vmax
 = 
Ãw
 Flßt_t[
nvis
];

447 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
 ; iv¬++è{ 
mš
[iv¬] = 
FLT_MAX
; 
max
[ivar] = -FLT_MAX; }

448 
UIÁ_t
 
iv¬
=0; iv¬<
Ágts
; iv¬++è{ 
tgmš
[iv¬] = 
FLT_MAX
; 
tgmax
[ivar] = -FLT_MAX; }

449 
UIÁ_t
 
iv¬
=0; iv¬<
nvis
; iv¬++è{ 
vmš
[iv¬] = 
FLT_MAX
; 
vmax
[ivar] = -FLT_MAX; }

453 
IÁ_t
 
i
=0; i<
ds
->
	`G‘NEv’ts
(); i++) {

454 cÚ¡ 
Ev’t
 * 
ev
 = 
ds
->
	`G‘Ev’t
(
i
);

455 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

456 
DoubË_t
 
v
 = 
ev
->
	`G‘V®ue
(
iv¬
);

457 ià(
v
<
mš
[
iv¬
]) min[ivar] = v;

458 ià(
v
>
max
[
iv¬
]) max[ivar] = v;

460 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++) {

461 
DoubË_t
 
v
 = 
ev
->
	`G‘T¬g‘
(
™gt
);

462 ià(
v
<
tgmš
[
™gt
])gmin[itgt] = v;

463 ià(
v
>
tgmax
[
™gt
])gmax[itgt] = v;

465 
UIÁ_t
 
ivis
=0; ivis<
nvis
; ivis++) {

466 
DoubË_t
 
v
 = 
ev
->
	`G‘S³ù©Ü
(
ivis
);

467 ià(
v
<
vmš
[
ivis
]) vmin[ivis] = v;

468 ià(
v
>
vmax
[
ivis
]) vmax[ivis] = v;

472 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

473 
dsi
.
	`G‘V¬ŸbËInfo
(
iv¬
).
	`S‘Mš
(
mš
[ivar]);

474 
dsi
.
	`G‘V¬ŸbËInfo
(
iv¬
).
	`S‘Max
(
max
[ivar]);

475 ifĞ
TM©h
::
	`Abs
(
max
[
iv¬
]-
mš
[iv¬]è<ğ
FLT_MIN
 )

476 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "V¬ŸbË " << dsi.
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Ex´essiÚ
().
	`D©a
(è<< " i cÚ¡ªt. PËa£„emovthv¬ŸbË." << 
Endl
;

478 
UIÁ_t
 
iv¬
=0; iv¬<
Ágts
; ivar++) {

479 
dsi
.
	`G‘T¬g‘Info
(
iv¬
).
	`S‘Mš
(
tgmš
[ivar]);

480 
dsi
.
	`G‘T¬g‘Info
(
iv¬
).
	`S‘Max
(
tgmax
[ivar]);

481 ifĞ
TM©h
::
	`Abs
(
tgmax
[
iv¬
]-
tgmš
[iv¬]è<ğ
FLT_MIN
 )

482 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "T¬g‘ " << dsi.
	`G‘T¬g‘Info
(
iv¬
).
	`G‘Ex´essiÚ
().
	`D©a
(è<< " i cÚ¡ªt. PËa£„emovthv¬ŸbË." << 
Endl
;

484 
UIÁ_t
 
iv¬
=0; iv¬<
nvis
; ivar++) {

485 
dsi
.
	`G‘S³ù©ÜInfo
(
iv¬
).
	`S‘Mš
(
vmš
[ivar]);

486 
dsi
.
	`G‘S³ù©ÜInfo
(
iv¬
).
	`S‘Max
(
vmax
[ivar]);

490 
d–‘e
 [] 
mš
;

491 
d–‘e
 [] 
max
;

492 
d–‘e
 [] 
tgmš
;

493 
d–‘e
 [] 
tgmax
;

494 
d–‘e
 [] 
vmš
;

495 
d–‘e
 [] 
vmax
;

496 
	}
}

503 
TM©rixD
* 
	gTMVA
::
D©aS‘FaùÜy
::
	$C®cCÜ»ÏtiÚM©rix
Ğ
D©aS‘
* 
ds
, cÚ¡ 
UIÁ_t
 
şassNumb”
 )

506 
TM©rixD
* 
m©
 = 
	`C®cCov¬ŸnûM©rix
Ğ
ds
, 
şassNumb”
 );

509 
UIÁ_t
 
nv¬
 = 
ds
->
	`G‘NV¬ŸbËs
(), 
iv¬
, 
jv¬
;

511 
iv¬
=0; iv¬<
nv¬
; ivar++) {

512 
jv¬
=0; jv¬<
nv¬
; jvar++) {

513 ià(
iv¬
 !ğ
jv¬
) {

514 
DoubË_t
 
d
 = (*
m©
)(
iv¬
, iv¬)*(*m©)(
jv¬
, jvar);

515 ià(
d
 > 0è(*
m©
)(
iv¬
, 
jv¬
è/ğ
	`sq¹
(d);

517 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
	`D©aS‘Info
().
	`G‘Name
())<< "<GetCorrelationMatrix> Zero variances for variables "

518 << "(" << 
iv¬
 << ", " << 
jv¬
 << "èğ" << 
d


519 << 
Endl
;

520 (*
m©
)(
iv¬
, 
jv¬
) = 0;

526 
iv¬
=0; iv¬<
nv¬
; iv¬++è(*
m©
)(ivar, ivar) = 1.0;

528  
m©
;

529 
	}
}

534 
TM©rixD
* 
	gTMVA
::
D©aS‘FaùÜy
::
	$C®cCov¬ŸnûM©rix
Ğ
D©aS‘
 * 
ds
, cÚ¡ 
UIÁ_t
 
şassNumb”
 )

536 
UIÁ_t
 
nv¬
 = 
ds
->
	`G‘NV¬ŸbËs
();

537 
UIÁ_t
 
iv¬
 = 0, 
jv¬
 = 0;

539 
TM©rixD
* 
m©
 = 
Ãw
 
	`TM©rixD
Ğ
nv¬
,‚var );

542 
TVeùÜD
 
	`vec
(
nv¬
);

543 
TM©rixD
 
	`m©2
(
nv¬
,‚var);

544 
iv¬
=0; iv¬<
nv¬
; ivar++) {

545 
	`vec
(
iv¬
) = 0;

546 
jv¬
=0; jv¬<
nv¬
; jv¬++è
	`m©2
(
iv¬
, jvar) = 0;

550 
DoubË_t
 
ic
 = 0;

551 
IÁ_t
 
i
=0; i<
ds
->
	`G‘NEv’ts
(); i++) {

553 cÚ¡ 
Ev’t
 * 
ev
 = 
ds
->
	`G‘Ev’t
(
i
);

554 ià(
ev
->
	`G‘CÏss
(è!ğ
şassNumb”
 ) ;

556 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

557 
ic
 +ğ
weight
;

559 
iv¬
=0; iv¬<
nv¬
; ivar++) {

561 
DoubË_t
 
xi
 = 
ev
->
	`G‘V®ue
(
iv¬
);

562 
	`vec
(
iv¬
è+ğ
xi
*
weight
;

563 
	`m©2
(
iv¬
, iv¬è+ğ(
xi
*xi*
weight
);

565 
jv¬
=
iv¬
+1; jv¬<
nv¬
; jvar++) {

566 
DoubË_t
 
xj
 = 
ev
->
	`G‘V®ue
(
jv¬
);

567 
	`m©2
(
iv¬
, 
jv¬
è+ğ(
xi
*
xj
*
weight
);

572 
iv¬
=0; iv¬<
nv¬
; ivar++)

573 
jv¬
=
iv¬
+1; jv¬<
nv¬
; jvar++)

574 
	`m©2
(
jv¬
, 
iv¬
) = mat2(ivar, jvar);

578 
iv¬
=0; iv¬<
nv¬
; ivar++) {

579 
jv¬
=0; jv¬<
nv¬
; jvar++) {

580 (*
m©
)(
iv¬
, 
jv¬
èğ
	`m©2
(iv¬, jv¬)/
ic
 - 
	`vec
(ivar)*vec(jvar)/(ic*ic);

584  
m©
;

585 
	}
}

593 
	gTMVA
::
D©aS‘FaùÜy
::
	$In™O±iÚs
Ğ
TMVA
::
D©aS‘Info
& 
dsi
,

594 
EvtStsP”CÏss
& 
nEv’tReque¡s
,

595 
TSŒšg
& 
nÜmMode
,

596 
UIÁ_t
& 
¥l™S“d
,

597 
TSŒšg
& 
¥l™Mode
,

598 
TSŒšg
& 
mixMode
)

600 
CÚfigu¿bË
 
	`¥l™S³cs
Ğ
dsi
.
	`G‘S¶™O±iÚs
() );

601 
¥l™S³cs
.
	`S‘CÚfigName
("DataSetFactory");

602 
¥l™S³cs
.
	`S‘CÚfigDesütiÚ
( "Configuration options given inhe \"PrepareForTrainingAndTesting\" call;hese options definehe creation ofhe data sets used forraining‡ndƒxpert validation by TMVA" );

604 
¥l™Mode
 = "Random";

605 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
¥l™Mode
, "SplitMode",

607 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Random"));

608 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Alternate"));

609 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Block"));

611 
mixMode
 = "SameAsSplitMode";

612 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
mixMode
, "MixMode",

614 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("SameAsSplitMode"));

615 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Random"));

616 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Alternate"));

617 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Block"));

619 
¥l™S“d
 = 100;

620 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
¥l™S“d
, "SplitSeed",

623 
nÜmMode
 = "EqualNumEvents";

624 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
nÜmMode
, "NormMode",

626 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("None"));

627 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("NumEvents"));

628 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("EqualNumEvents"));

630 
¥l™S³cs
.
	`Deş¬eO±iÚRef
(
fSÿËW™hP»£lEff
=
kFALSE
,"ScaleWithPreselEff","Scalehe‚umber of„equestedƒvents byheƒff. ofhe…reselection cuts (or‚ot)" );

635 
UIÁ_t
 
ş
 = 0; cÈ< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

636 
TSŒšg
 
şName
 = 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
();

637 
TSŒšg
 
t™ËT¿š
 = 
	`TSŒšg
().
	`FÜm©
("Numb” oàŒaššgƒv’t oàşas % (deçuÉ: 0 =‡Î)",
şName
.
	`D©a
()).Data();

638 
TSŒšg
 
t™ËTe¡
 = 
	`TSŒšg
().
	`FÜm©
("Numb” oà‹¡ƒv’t oàşas % (deçuÉ: 0 =‡Î)",
şName
.
	`D©a
()).Data();

639 
TSŒšg
 
t™ËS¶™
 = 
	`TSŒšg
().
	`FÜm©
("S¶™ iÀŒaššg‡nde¡ƒv’t oàşas % (deçuÉ: 0 = d—ùiv©ed)",
şName
.
	`D©a
()).Data();

641 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
nEv’tReque¡s
.
	`©
(
ş
).
nT¿ššgEv’tsReque¡ed
, 
	`TSŒšg
("nT¿š_")+
şName
, 
t™ËT¿š
 );

642 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
nEv’tReque¡s
.
	`©
(
ş
).
nTe¡šgEv’tsReque¡ed
 , 
	`TSŒšg
("nTe¡_")+
şName
 , 
t™ËTe¡
 );

643 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
nEv’tReque¡s
.
	`©
(
ş
).
T¿šTe¡S¶™Reque¡ed
 , 
	`TSŒšg
("T¿šTe¡S¶™_")+
şName
 , 
t™ËTe¡
 );

646 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
fV”bo£
, "V", "Verbosity (default:rue)" );

648 
¥l™S³cs
.
	`Deş¬eO±iÚRef
Ğ
fV”bo£Lev–
=
	`TSŒšg
("Info"), "VerboseLevel", "VerboseLevel (Debug/Verbose/Info)" );

649 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Debug"));

650 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Verbose"));

651 
¥l™S³cs
.
	`AddP»DefV®
(
	`TSŒšg
("Info"));

653 
¥l™S³cs
.
	`P¬£O±iÚs
();

654 
¥l™S³cs
.
	`CheckFÜUnu£dO±iÚs
();

657 ià(
	`V”bo£
()è
fLogg”
->
	`S‘MšTy³
Ğ
kVERBOSE
 );

658 ià(
fV”bo£Lev–
.
	`Com·»To
("Debug"è==0è
fLogg”
->
	`S‘MšTy³
Ğ
kDEBUG
 );

659 ià(
fV”bo£Lev–
.
	`Com·»To
("V”bo£"è==0è
fLogg”
->
	`S‘MšTy³
Ğ
kVERBOSE
 );

660 ià(
fV”bo£Lev–
.
	`Com·»To
("Info"è==0è
fLogg”
->
	`S‘MšTy³
Ğ
kINFO
 );

663 
¥l™Mode
.
	`ToUµ”
(); 
mixMode
.ToUµ”(); 
nÜmMode
.ToUpper();

665 
	`Log
(è<< 
kDEBUG


666 << "\tS¶™modis: \"" << 
¥l™Mode
 << "\"hmixmodis: \"" << 
mixMode
 << "\"" << 
Endl
;

667 ià(
mixMode
=="SAMEASSPLITMODE"èmixModğ
¥l™Mode
;

668 ià(
mixMode
!=
¥l™Mode
)

669 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "D©aS‘ s¶™mode="<<
¥l™Mode


670 <<" difãr äom mixmode="<<
mixMode
<<
Endl
;

671 
	}
}

678 
	gTMVA
::
D©aS‘FaùÜy
::
	$BudEv’tVeùÜ
Ğ
TMVA
::
D©aS‘Info
& 
dsi
,

679 
TMVA
::
D©aIÅutHªdËr
& 
d©aIÅut
,

680 
Ev’tVeùÜOfCÏs£sOfT»eTy³
& 
ev’tsm­
,

681 
EvtStsP”CÏss
& 
ev’tCouÁs
)

683 cÚ¡ 
UIÁ_t
 
nşas£s
 = 
dsi
.
	`G‘NCÏs£s
();

685 
ev’tsm­
[ 
Ty³s
::
kT¿ššg
 ] = 
	`Ev’tVeùÜOfCÏs£s
(
nşas£s
);

686 
ev’tsm­
[ 
Ty³s
::
kTe¡šg
 ] = 
	`Ev’tVeùÜOfCÏs£s
(
nşas£s
);

687 
ev’tsm­
[ 
Ty³s
::
kMaxT»eTy³
 ] = 
	`Ev’tVeùÜOfCÏs£s
(
nşas£s
);

690 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
dsi
.
	`G‘NV¬ŸbËs
();

691 cÚ¡ 
UIÁ_t
 
Ágts
 = 
dsi
.
	`G‘NT¬g‘s
();

692 cÚ¡ 
UIÁ_t
 
nvis
 = 
dsi
.
	`G‘NS³ù©Üs
();

694 
size_t
 
i
=0; i<
nşas£s
; i++) {

695 
ev’tCouÁs
[
i
].
v¬AvL’gth
 = 
Ãw
 
Flßt_t
[
nv¬s
];

696 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++)

697 
ev’tCouÁs
[
i
].
v¬AvL’gth
[
iv¬
] = 0;

701 
BoŞ_t
 *
v¬IsA¼ay
 = 
Ãw
 BoŞ_t[
nv¬s
];

707 
¡d
::
m­
<
TSŒšg
, > 
ÇnInfW¬nšgs
;

708 
¡d
::
m­
<
TSŒšg
, > 
ÇnInfE¼Üs
;

712 
UIÁ_t
 
ş
=0; cl<
nşas£s
; cl++) {

716 
Ev’tSts
& 
şassEv’tCouÁs
 = 
ev’tCouÁs
[
ş
];

719 
	`Log
(è<< 
kDEBUG


720 << "\tWeighˆex´essiÚ fÜ cÏs \'" << 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
() << "\': \""

721 << 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Weight
(è<< "\"" << 
Endl
;

724 
TSŒšg
 
	`cu¼’tFeName
("");

726 
¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
	`Œ“It
(
d©aIÅut
.
	`begš
(
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()));

727 ;
Œ“It
!=
d©aIÅut
.
	`’d
(
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
());reeIt++) {

730 
¡d
::
veùÜ
<
Flßt_t
> 
	`v¬s
(
nv¬s
);

731 
¡d
::
veùÜ
<
Flßt_t
> 
	`tgts
(
Ágts
);

732 
¡d
::
veùÜ
<
Flßt_t
> 
	`vis
(
nvis
);

733 
T»eInfo
 
cu¼’tInfo
 = *
Œ“It
;

735 
	`Log
(è<< 
kDEBUG
 << "Budšgƒv’ˆveùÜ " << 
cu¼’tInfo
.
	`G‘T»eTy³
(è<< 
Endl
;

737 
Ev’tVeùÜ
& 
ev’t_v
 = 
ev’tsm­
[
cu¼’tInfo
.
	`G‘T»eTy³
()].
	`©
(
ş
);

739 
BoŞ_t
 
isChaš
 = (
	`TSŒšg
("TChaš"è=ğ
cu¼’tInfo
.
	`G‘T»e
()->
	`CÏssName
());

740 
cu¼’tInfo
.
	`G‘T»e
()->
	`LßdT»e
(0);

741 
	`ChªgeToNewT»e
Ğ
cu¼’tInfo
, 
dsi
 );

744 
şassEv’tCouÁs
.
nIn™ŸlEv’ts
 +ğ
cu¼’tInfo
.
	`G‘T»e
()->
	`G‘EÁr›s
();

747 cÚ¡ 
UIÁ_t
 
nEvts
 = 
cu¼’tInfo
.
	`G‘T»e
()->
	`G‘EÁr›s
();

748 
LÚg64_t
 
evtIdx
 = 0;ƒvtIdx < 
nEvts
;ƒvtIdx++) {

749 
cu¼’tInfo
.
	`G‘T»e
()->
	`LßdT»e
(
evtIdx
);

752 ià(
isChaš
) {

753 ià(
cu¼’tInfo
.
	`G‘T»e
()->G‘T»e()->
	`G‘DœeùÜy
()->
	`G‘Fe
()->
	`G‘Name
(è!ğ
cu¼’tFeName
) {

754 
cu¼’tFeName
 = 
cu¼’tInfo
.
	`G‘T»e
()->G‘T»e()->
	`G‘DœeùÜy
()->
	`G‘Fe
()->
	`G‘Name
();

755 
	`ChªgeToNewT»e
Ğ
cu¼’tInfo
, 
dsi
 );

758 
cu¼’tInfo
.
	`G‘T»e
()->
	`G‘EÁry
(
evtIdx
);

759 
IÁ_t
 
sizeOfA¼ays
 = 1;

760 
IÁ_t
 
´evA¼Ex´
 = 0;

765 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

766 
IÁ_t
 
nd©a
 = 
fIÅutFÜmuÏs
[
iv¬
]->
	`G‘Nd©a
();

767 
şassEv’tCouÁs
.
v¬AvL’gth
[
iv¬
] +ğ
nd©a
;

768 ià(
nd©a
 == 1) ;

770 
v¬IsA¼ay
[
iv¬
] = 
kTRUE
;

771 ià(
sizeOfA¼ays
 == 1) {

772 
sizeOfA¼ays
 = 
nd©a
;

773 
´evA¼Ex´
 = 
iv¬
;

775 ià(
sizeOfA¼ays
!=
nd©a
) {

776 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ERROR wh´•¬šg¿ššg‡nde¡šg»es:" << 
Endl
;

777 
	`Log
(è<< 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< " muÉË‡¼ay-ty³ƒx´essiÚ oàdifã»Á†’gth w”’couÁ”ed" << 
Endl
;

778 
	`Log
(è<< 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "†oÿtiÚ oà”rÜ:ƒv’ˆ" << 
evtIdx


779 << " iÀŒ“ " << 
cu¼’tInfo
.
	`G‘T»e
()->
	`G‘Name
()

780 << " oàf" << 
cu¼’tInfo
.
	`G‘T»e
()->
	`G‘Cu¼’tFe
()->
	`G‘Name
(è<< 
Endl
;

781 
	`Log
(è<< 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ƒx´essiÚ " << 
fIÅutFÜmuÏs
[
iv¬
]->
	`G‘T™Ë
() << " has "

782 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< 
nd©a
 << "ƒÁr›s, whe" << 
Endl
;

783 
	`Log
(è<< 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ƒx´essiÚ " << 
fIÅutFÜmuÏs
[
´evA¼Ex´
]->
	`G‘T™Ë
() << " has "

784 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< 
fIÅutFÜmuÏs
[
´evA¼Ex´
]->
	`G‘Nd©a
(è<< "ƒÁr›s" << 
Endl
;

785 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "N“dØabÜt" << 
Endl
;

790 
IÁ_t
 
id©a
 = 0; id©a<
sizeOfA¼ays
; idata++) {

791 
BoŞ_t
 
cÚšs_NaN_Ü_šf
 = 
kFALSE
;

793 autØ
checkNªInf
 = [&](
¡d
::
m­
<
TSŒšg
, > &
msgM­
, 
Flßt_t
 
v®ue
, cÚ¡ *
wh©
, cÚ¡ *
fÜmuÏT™Ë
) {

794 ià(
TM©h
::
	`IsNaN
(
v®ue
)) {

795 
cÚšs_NaN_Ü_šf
 = 
kTRUE
;

796 ++
msgM­
[
TSŒšg
::
	`FÜm©
("D©a£t[%s] : % ex´essiÚ„esŞve tØšd‘”mš©v®u(NaN): %s", 
dsi
.
	`G‘Name
(), 
wh©
, 
fÜmuÏT™Ë
)];

797 } ià(!
TM©h
::
	`Fš™e
(
v®ue
)) {

798 
cÚšs_NaN_Ü_šf
 = 
kTRUE
;

799 ++
msgM­
[
TSŒšg
::
	`FÜm©
("D©a£t[%s] : % ex´essiÚ„esŞve tØšfš™v®u(+šàÜ -šf): %s", 
dsi
.
	`G‘Name
(), 
wh©
, 
fÜmuÏT™Ë
)];

803 
TT»eFÜmuÏ
* 
fÜmuÏ
 = 0;

806 
DoubË_t
 
cutV®
 = 1.;

807 
fÜmuÏ
 = 
fCutFÜmuÏs
[
ş
];

808 ià(
fÜmuÏ
) {

809 
IÁ_t
 
nd©a
 = 
fÜmuÏ
->
	`G‘Nd©a
();

810 
cutV®
 = (
nd©a
==1 ?

811 
fÜmuÏ
->
	`Ev®In¡ªû
(0) :

812 
fÜmuÏ
->
	`Ev®In¡ªû
(
id©a
));

813 
	`checkNªInf
(
ÇnInfE¼Üs
, 
cutV®
, "Cut", 
fÜmuÏ
->
	`G‘T™Ë
());

817 autØ&
ÇnMes§ges
 = 
cutV®
 < 0.5 ? 
ÇnInfW¬nšgs
 : 
ÇnInfE¼Üs
;

820 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

821 
fÜmuÏ
 = 
fIÅutFÜmuÏs
[
iv¬
];

822 
IÁ_t
 
nd©a
 = 
fÜmuÏ
->
	`G‘Nd©a
();

823 
v¬s
[
iv¬
] = (
nd©a
 == 1 ?

824 
fÜmuÏ
->
	`Ev®In¡ªû
(0) :

825 
fÜmuÏ
->
	`Ev®In¡ªû
(
id©a
));

826 
	`checkNªInf
(
ÇnMes§ges
, 
v¬s
[
iv¬
], "IÅut", 
fÜmuÏ
->
	`G‘T™Ë
());

830 
UIÁ_t
 
™rgt
=0; iŒgt<
Ágts
; itrgt++) {

831 
fÜmuÏ
 = 
fT¬g‘FÜmuÏs
[
™rgt
];

832 
IÁ_t
 
nd©a
 = 
fÜmuÏ
->
	`G‘Nd©a
();

833 
tgts
[
™rgt
] = (
nd©a
 == 1 ?

834 
fÜmuÏ
->
	`Ev®In¡ªû
(0) :

835 
fÜmuÏ
->
	`Ev®In¡ªû
(
id©a
));

836 
	`checkNªInf
(
ÇnMes§ges
, 
tgts
[
™rgt
], "T¬g‘", 
fÜmuÏ
->
	`G‘T™Ë
());

840 
UIÁ_t
 
™Vis
=0; itVis<
nvis
; itVis++) {

841 
fÜmuÏ
 = 
fS³ù©ÜFÜmuÏs
[
™Vis
];

842 
IÁ_t
 
nd©a
 = 
fÜmuÏ
->
	`G‘Nd©a
();

843 
vis
[
™Vis
] = (
nd©a
 == 1 ?

844 
fÜmuÏ
->
	`Ev®In¡ªû
(0) :

845 
fÜmuÏ
->
	`Ev®In¡ªû
(
id©a
));

846 
	`checkNªInf
(
ÇnMes§ges
, 
vis
[
™Vis
], "S³ù©Ü", 
fÜmuÏ
->
	`G‘T™Ë
());

851 
Flßt_t
 
weight
 = 
cu¼’tInfo
.
	`G‘Weight
();

852 
fÜmuÏ
 = 
fWeightFÜmuÏ
[
ş
];

853 ià(
fÜmuÏ
!=0) {

854 
IÁ_t
 
nd©a
 = 
fÜmuÏ
->
	`G‘Nd©a
();

855 
weight
 *ğ(
nd©a
 == 1 ?

856 
fÜmuÏ
->
	`Ev®In¡ªû
() :

857 
fÜmuÏ
->
	`Ev®In¡ªû
(
id©a
));

858 
	`checkNªInf
(
ÇnMes§ges
, 
weight
, "Weight", 
fÜmuÏ
->
	`G‘T™Ë
());

863 
şassEv’tCouÁs
.
nEvBefÜeCut
++;

864 ià(!
TM©h
::
	`IsNaN
(
weight
))

865 
şassEv’tCouÁs
.
nWeEvBefÜeCut
 +ğ
weight
;

868 ià(
cutV®
<0.5) ;

873 ià(
weight
 < 0è
şassEv’tCouÁs
.
nNegWeights
++;

877 ià(
cÚšs_NaN_Ü_šf
) {

878 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "NaN o¸+-šàš Ev’ˆ" << 
evtIdx
 << 
Endl
;

879 ià(
sizeOfA¼ays
>1è
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "„ejeùed" << 
Endl
;

885 
şassEv’tCouÁs
.
nEvAá”Cut
++;

886 
şassEv’tCouÁs
.
nWeEvAá”Cut
 +ğ
weight
;

889 
ev’t_v
.
	`push_back
(
Ãw
 
	`Ev’t
(
v¬s
, 
tgts
 , 
vis
, 
ş
 , 
weight
));

892 
cu¼’tInfo
.
	`G‘T»e
()->
	`Re£tB¿nchAdd»s£s
();

896 ià(!
ÇnInfW¬nšgs
.
	`em±y
()) {

897 
	`Log
(è<< 
kWARNING
 << "Foundƒv’t w™h NaN‡nd/Ü +-šàv®ues" << 
Endl
;

898 cÚ¡‡utØ&
w¬nšg
 : 
ÇnInfW¬nšgs
) {

899 autØ&
log
 = 
	`Log
(è<< 
kWARNING
 << 
w¬nšg
.
fœ¡
;

900 ià(
w¬nšg
.
£cÚd
 > 1è
log
 << " (" << warning.second << "imes)";

901 
log
 << 
Endl
;

903 
	`Log
(è<< 
kWARNING
 << "The£ NaN‡nd/Ü +-šf w”®È»moved byh¥ecif›d cut, cÚtšušg." << 
Endl
;

904 
	`Log
(è<< 
Endl
;

907 ià(!
ÇnInfE¼Üs
.
	`em±y
()) {

908 
	`Log
(è<< 
kWARNING
 << "Foundƒv’t w™h NaN‡nd/Ü +-šàv®ue ÒÙ„emoved by cut)" << 
Endl
;

909 cÚ¡‡utØ&
”rÜ
 : 
ÇnInfE¼Üs
) {

910 autØ&
log
 = 
	`Log
(è<< 
kWARNING
 << 
”rÜ
.
fœ¡
;

911 ià(
”rÜ
.
£cÚd
 > 1è
log
 << " (" <<ƒrror.second << "imes)";

912 
log
 << 
Endl
;

914 
	`Log
(è<< 
kFATAL
 << "How‡m I suµo£dØŒaš‡ NaN o¸+-šf?!" << 
Endl
;

918 
IÁ_t
 
maxL
 = 
dsi
.
	`G‘CÏssNameMaxL’gth
();

920 
	`Log
(è<< 
kHEADER
 << 
	`FÜm
("[%s] : ",
dsi
.
	`G‘Name
()è<< "Numb” oàev’t š iÅuˆŒ“s" << 
Endl
;

921 
	`Log
(è<< 
kDEBUG
 << "×á”…ossibË fÏ‰’šg oà¬¿ys):" << 
Endl
;

924 
UIÁ_t
 
ş
 = 0; cÈ< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

925 
	`Log
(è<< 
kDEBUG


927 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

929 << 
¡d
::
	`£tw
(5è<< 
ev’tCouÁs
[
ş
].
nEvBefÜeCut


930 << " / sum oàweights: " << 
¡d
::
	`£tw
(5è<< 
ev’tCouÁs
[
ş
].
nWeEvBefÜeCut
 << 
Endl
;

933 
UIÁ_t
 
ş
 = 0; cÈ< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

934 
	`Log
(è<< 
kDEBUG


935 << " " << 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

937 << 
¡d
::
	`£tw
(5è<< 
d©aIÅut
.
	`G‘EÁr›s
(
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()è<< 
Endl
;

940 ià(
fSÿËW™hP»£lEff
)

941 
	`Log
(è<< 
kDEBUG


942 << "\tP»£ËùiÚ: (wÈafãù‚umb” oà»que¡ed¿ššg‡nde¡šgƒv’ts)" << 
Endl
;

944 
	`Log
(è<< 
kDEBUG


945 << "\tP»£ËùiÚ: (wÈNOT‡fãù‚umb” oà»que¡ed¿ššg‡nde¡šgƒv’ts)" << 
Endl
;

947 ià(
dsi
.
	`HasCuts
()) {

948 
UIÁ_t
 
ş
 = 0; cl< 
dsi
.
	`G‘NCÏs£s
(); cl++) {

949 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " " << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< dsi.
	`G‘CÏssInfo
(
ş
)->GetName()

950 << "„equœem’t: \"" << 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Cut
(è<< "\"" << 
Endl
;

951 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()) << " "

952 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

954 << 
¡d
::
	`£tw
(5è<< 
ev’tCouÁs
[
ş
].
nEvAá”Cut


955 << " / sum oàweights: " << 
¡d
::
	`£tw
(5è<< 
ev’tCouÁs
[
ş
].
nWeEvAá”Cut
 << 
Endl
;

956 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()) << " "

957 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
è<< 
dsi
.
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()

959 << 
¡d
::
	`£tw
(6è<< 
ev’tCouÁs
[
ş
].
nWeEvAá”Cut
/ev’tCouÁs[ş].
nWeEvBefÜeCut
 << 
Endl
;

962 
	`Log
(è<< 
kDEBUG


963 << " NØ´e£ËùiÚ cut ­¶›d oÀev’ˆşas£s" << 
Endl
;

965 
d–‘e
[] 
v¬IsA¼ay
;

967 
	}
}

972 
	gTMVA
::
D©aS‘
*

973 
TMVA
::
D©aS‘FaùÜy
::
	$MixEv’ts
Ğ
D©aS‘Info
& 
dsi
,

974 
Ev’tVeùÜOfCÏs£sOfT»eTy³
& 
tmpEv’tVeùÜ
,

975 
EvtStsP”CÏss
& 
ev’tCouÁs
,

976 cÚ¡ 
TSŒšg
& 
¥l™Mode
,

977 cÚ¡ 
TSŒšg
& 
mixMode
,

978 cÚ¡ 
TSŒšg
& 
nÜmMode
,

979 
UIÁ_t
 
¥l™S“d
)

981 
TMVA
::
RªdomG’”©Ü
 
	`ºdm
Ğ
¥l™S“d
 );

986 ià(
¥l™Mode
.
	`CÚšs
( "RANDOM" ) ) {

988  
UIÁ_t
 
şs
 = 0; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

989 
Ev’tVeùÜ
& 
un¥ecif›dEv’ts
 = 
tmpEv’tVeùÜ
[
Ty³s
::
kMaxT»eTy³
].
	`©
(
şs
);

990 ifĞ! 
un¥ecif›dEv’ts
.
	`em±y
() ) {

991 
	`Log
(è<< 
kDEBUG
 << "randomly shuffling "

992 << 
un¥ecif›dEv’ts
.
	`size
()

993 << "ƒv’t oàşas " << 
şs


994 << " which‡»‚Ù y‘‡ssocŸ‹dØ‹¡šg o¸Œaššg" << 
Endl
;

995 
¡d
::
	`¿ndom_shufæe
Ğ
un¥ecif›dEv’ts
.
	`begš
(),

996 
un¥ecif›dEv’ts
.
	`’d
(),

997 
ºdm
 );

1003 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "SPLITTING ========" << 
Endl
;

1004  
UIÁ_t
 
şs
 = 0; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

1005 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "---- cÏs " << 
şs
 << 
Endl
;

1006 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "check‚umb” oàŒaššg/‹¡šgƒv’ts,„eque¡ed‡nd‡vaabË‚umb” oàev’t ªd fÜ cÏs " << 
şs
 << 
Endl
;

1009 
Ev’tVeùÜ
& 
ev’tVeùÜT¿ššg
 = 
tmpEv’tVeùÜ
[ 
Ty³s
::
kT¿ššg
 ].
	`©
(
şs
);

1010 
Ev’tVeùÜ
& 
ev’tVeùÜTe¡šg
 = 
tmpEv’tVeùÜ
[ 
Ty³s
::
kTe¡šg
 ].
	`©
(
şs
);

1011 
Ev’tVeùÜ
& 
ev’tVeùÜUndefšed
 = 
tmpEv’tVeùÜ
[ 
Ty³s
::
kMaxT»eTy³
 ].
	`©
(
şs
);

1013 
IÁ_t
 
avaabËT¿ššg
 = 
ev’tVeùÜT¿ššg
.
	`size
();

1014 
IÁ_t
 
avaabËTe¡šg
 = 
ev’tVeùÜTe¡šg
.
	`size
();

1015 
IÁ_t
 
avaabËUndefšed
 = 
ev’tVeùÜUndefšed
.
	`size
();

1017 
Flßt_t
 
´e£l_sÿË
;

1018 ià(
fSÿËW™hP»£lEff
) {

1019 
´e£l_sÿË
 = 
ev’tCouÁs
[
şs
].
	`cutSÿlšg
();

1020 ià(
´e£l_sÿË
 < 1)

1021 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " you havİ‹d fÜ sÿlšghnumb” oà»que¡ed¿ššg/‹¡šgƒv’ts\ÀtØbsÿËd byh´e£ËùiÚƒffic›ncy"<< 
Endl
;

1023 
´e£l_sÿË
 = 1.;

1024 ià(
ev’tCouÁs
[
şs
].
	`cutSÿlšg
() < 1)

1025 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " you havİ‹d fÜ iÁ”´‘šgh»que¡ed‚umb” oàŒaššg/‹¡šgƒv’ts\ÀtØbthnumb” oàev’t AFTER you¸´e£ËùiÚ cuts" << 
Endl
;

1032 if(
ev’tCouÁs
[
şs
].
T¿šTe¡S¶™Reque¡ed
 < 1.0 &&ƒventCounts[cls].TrainTestSplitRequested > 0.0){

1033 
ev’tCouÁs
[
şs
].
nT¿ššgEv’tsReque¡ed
 = 
	`IÁ_t
Óv’tCouÁs[şs].
T¿šTe¡S¶™Reque¡ed
*(
avaabËT¿ššg
+
avaabËTe¡šg
+
avaabËUndefšed
));

1034 
ev’tCouÁs
[
şs
].
nTe¡šgEv’tsReque¡ed
 = 
	`IÁ_t
(0);

1036 if(
ev’tCouÁs
[
şs
].
T¿šTe¡S¶™Reque¡ed
 !ğ0.0è
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("ThİtiÚ T¿šTe¡S¶™_<şass> ha tØbš„ªg(0, 1] buˆi £ˆtØ%f.",ev’tCouÁs[şs].T¿šTe¡S¶™Reque¡edè<< 
Endl
;

1037 
IÁ_t
 
»que¡edT¿ššg
 = 
	`IÁ_t
(
ev’tCouÁs
[
şs
].
nT¿ššgEv’tsReque¡ed
 * 
´e£l_sÿË
);

1038 
IÁ_t
 
»que¡edTe¡šg
 = 
	`IÁ_t
(
ev’tCouÁs
[
şs
].
nTe¡šgEv’tsReque¡ed
 * 
´e£l_sÿË
);

1040 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ev’t š¿ššg»e  : " << 
avaabËT¿ššg
 << 
Endl
;

1041 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ev’t še¡šg»e  : " << 
avaabËTe¡šg
 << 
Endl
;

1042 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ev’t š un¥ecif›d»e : " << 
avaabËUndefšed
 << 
Endl
;

1043 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "»que¡ed fÜ¿ššg : " << 
»que¡edT¿ššg
 << 
Endl
;;

1045 if(
´e£l_sÿË
<1)

1046 
	`Log
(è<< " ( " << 
ev’tCouÁs
[
şs
].
nT¿ššgEv’tsReque¡ed


1047 << " * " << 
´e£l_sÿË
 << "…»£ËùiÚƒffic›ncy)" << 
Endl
;

1049 
	`Log
(è<< 
Endl
;

1050 
	`Log
(è<< 
kDEBUG
 << "»que¡ed fÜe¡šg : " << 
»que¡edTe¡šg
;

1051 if(
´e£l_sÿË
<1)

1052 
	`Log
(è<< " ( " << 
ev’tCouÁs
[
şs
].
nTe¡šgEv’tsReque¡ed


1053 << " * " << 
´e£l_sÿË
 << "…»£ËùiÚƒffic›ncy)" << 
Endl
;

1055 
	`Log
(è<< 
Endl
;

1104 
IÁ_t
 
	`u£FÜTe¡šg
(0),
	`u£FÜT¿ššg
(0);

1105 
IÁ_t
 
	`®lAvaabË
(
avaabËUndefšed
 + 
avaabËT¿ššg
 + 
avaabËTe¡šg
);

1107 ifĞ(
»que¡edT¿ššg
 =ğ0è&& (
»que¡edTe¡šg
 == 0)){

1111 iàĞ
avaabËUndefšed
 >ğ
TM©h
::
	`Abs
(
avaabËT¿ššg
 - 
avaabËTe¡šg
) ) {

1113 
u£FÜT¿ššg
 = 
u£FÜTe¡šg
 = 
®lAvaabË
/2;

1116 
u£FÜT¿ššg
 = 
avaabËT¿ššg
;

1117 
u£FÜTe¡šg
 = 
avaabËTe¡šg
;

1118 ià(
avaabËT¿ššg
 < 
avaabËTe¡šg
)

1119 
u£FÜT¿ššg
 +ğ
avaabËUndefšed
;

1121 
u£FÜTe¡šg
 +ğ
avaabËUndefšed
;

1123 
»que¡edT¿ššg
 = 
u£FÜT¿ššg
;

1124 
»que¡edTe¡šg
 = 
u£FÜTe¡šg
;

1127 ià(
»que¡edTe¡šg
 == 0){

1129 
u£FÜT¿ššg
 = 
TM©h
::
	`Max
(
»que¡edT¿ššg
,
avaabËT¿ššg
);

1130 ià(
®lAvaabË
 < 
u£FÜT¿ššg
) {

1131 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "Moreƒvents„equested forraining ("

1132 << 
»que¡edT¿ššg
 << ")han‡vailable ("

1133 << 
®lAvaabË
 << ")!" << 
Endl
;

1135 
u£FÜTe¡šg
 = 
®lAvaabË
 - 
u£FÜT¿ššg
;

1136 
»que¡edTe¡šg
 = 
u£FÜTe¡šg
;

1139 ià(
»que¡edT¿ššg
 == 0){

1140 
u£FÜTe¡šg
 = 
TM©h
::
	`Max
(
»que¡edTe¡šg
,
avaabËTe¡šg
);

1141 ià(
®lAvaabË
 < 
u£FÜTe¡šg
) {

1142 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "Moreƒvents„equested foresting ("

1143 << 
»que¡edTe¡šg
 << ")han‡vailable ("

1144 << 
®lAvaabË
 << ")!" << 
Endl
;

1146 
u£FÜT¿ššg
ğ
®lAvaabË
 - 
u£FÜTe¡šg
;

1147 
»que¡edT¿ššg
 = 
u£FÜT¿ššg
;

1156 
IÁ_t
 
¡lN“dFÜT¿ššg
 = 
TM©h
::
	`Max
(
»que¡edT¿ššg
-
avaabËT¿ššg
,0);

1157 
IÁ_t
 
¡lN“dFÜTe¡šg
 = 
TM©h
::
	`Max
(
»que¡edTe¡šg
-
avaabËTe¡šg
,0);

1159 
NF»e
 = 
avaabËUndefšed
 - 
¡lN“dFÜT¿ššg
 - 
¡lN“dFÜTe¡šg
;

1160 ià(
NF»e
 <0) NFree = 0;

1161 
u£FÜT¿ššg
 = 
TM©h
::
	`Max
(
»que¡edT¿ššg
,
avaabËT¿ššg
è+ 
NF»e
/2;

1162 
u£FÜTe¡šg
ğ
®lAvaabË
 - 
u£FÜT¿ššg
;

1165 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "d‘”mšedƒv’ˆ§m¶siztØ£Ëù¿ššg sam¶äom="<<
u£FÜT¿ššg
<<
Endl
;

1166 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "d‘”mšedƒv’ˆ§m¶siztØ£Ëùe¡ sam¶äom="<<
u£FÜTe¡šg
<<
Endl
;

1171 ifĞ
¥l™Mode
 == "ALTERNATE" ){

1172 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "¥l™ 'ALTERNATE'" << 
Endl
;

1173 
IÁ_t
 
nT¿ššg
 = 
avaabËT¿ššg
;

1174 
IÁ_t
 
nTe¡šg
 = 
avaabËTe¡šg
;

1175  
Ev’tVeùÜ
::
™”©Ü
 
™
 = 
ev’tVeùÜUndefšed
.
	`begš
(), 
™End
 =ƒv’tVeùÜUndefšed.
	`’d
(); it != itEnd; ){

1176 ++
nT¿ššg
;

1177 ifĞ
nT¿ššg
 <ğ
»que¡edT¿ššg
 ){

1178 
ev’tVeùÜT¿ššg
.
	`š£¹
Ğev’tVeùÜT¿ššg.
	`’d
(), (*
™
) );

1179 ++
™
;

1181 ifĞ
™
 !ğ
™End
 ){

1182 ++
nTe¡šg
;

1183 
ev’tVeùÜTe¡šg
.
	`š£¹
Ğev’tVeùÜTe¡šg.
	`’d
(), (*
™
) );

1184 ++
™
;

1188 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "¥l™ '" << 
¥l™Mode
 << "'" << 
Endl
;

1191 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "avaabËundefšed : " << 
avaabËUndefšed
 << 
Endl
;

1192 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "u£FÜT¿ššg : " << 
u£FÜT¿ššg
 << 
Endl
;

1193 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "u£FÜTe¡šg : " << 
u£FÜTe¡šg
 << 
Endl
;

1194 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "avaabËT¿ššg : " << 
avaabËT¿ššg
 << 
Endl
;

1195 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "avaabËTe¡šg : " << 
avaabËTe¡šg
 << 
Endl
;

1197 ifĞ
avaabËUndefšed
<(
u£FÜT¿ššg
-
avaabËT¿ššg
) ||

1198 
avaabËUndefšed
<(
u£FÜTe¡šg
 -
avaabËTe¡šg
 ) ||

1199 
avaabËUndefšed
<(
u£FÜT¿ššg
+
u£FÜTe¡šg
-
avaabËT¿ššg
-
avaabËTe¡šg
 ) ){

1200 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "MÜev’t »que¡edhª‡vaabË!" << 
Endl
;

1204 ià(
u£FÜT¿ššg
>
avaabËT¿ššg
){

1205 
ev’tVeùÜT¿ššg
.
	`š£¹
Ğev’tVeùÜT¿ššg.
	`’d
(è, 
ev’tVeùÜUndefšed
.
	`begš
(),ƒv’tVeùÜUndefšed.begš()+ 
u£FÜT¿ššg
- 
avaabËT¿ššg
 );

1206 
ev’tVeùÜUndefšed
.
	`”a£
Ğev’tVeùÜUndefšed.
	`begš
(),ƒv’tVeùÜUndefšed.begš(è+ 
u£FÜT¿ššg
- 
avaabËT¿ššg
);

1208 ià(
u£FÜTe¡šg
>
avaabËTe¡šg
){

1209 
ev’tVeùÜTe¡šg
.
	`š£¹
Ğev’tVeùÜTe¡šg.
	`’d
(è, 
ev’tVeùÜUndefšed
.
	`begš
(),ƒv’tVeùÜUndefšed.begš()+ 
u£FÜTe¡šg
- 
avaabËTe¡šg
 );

1212 
ev’tVeùÜUndefšed
.
	`ş—r
();

1215 ià(
¥l™Mode
.
	`CÚšs
( "RANDOM" )){

1216 
UIÁ_t
 
sizeT¿ššg
 = 
ev’tVeùÜT¿ššg
.
	`size
();

1217 ifĞ
sizeT¿ššg
 > 
	`UIÁ_t
(
»que¡edT¿ššg
) ){

1218 
¡d
::
veùÜ
<
UIÁ_t
> 
	`šdiûsT¿ššg
Ğ
sizeT¿ššg
 );

1220 
¡d
::
	`g’”©e
Ğ
šdiûsT¿ššg
.
	`begš
(), indiûsT¿ššg.
	`’d
(), 
TMVA
::
Inüem’t
<
UIÁ_t
>(0) );

1222 
¡d
::
	`¿ndom_shufæe
Ğ
šdiûsT¿ššg
.
	`begš
(), indiûsT¿ššg.
	`’d
(), 
ºdm
 );

1224 
šdiûsT¿ššg
.
	`”a£
ĞšdiûsT¿ššg.
	`begš
()+
sizeT¿ššg
-
	`UIÁ_t
(
»que¡edT¿ššg
), indiûsT¿ššg.
	`’d
() );

1226  
¡d
::
veùÜ
<
UIÁ_t
>::
™”©Ü
 
™
 = 
šdiûsT¿ššg
.
	`begš
(), 
™End
 = indiûsT¿ššg.
	`’d
(); it != itEnd; ++it ){

1227 
d–‘e
 
ev’tVeùÜT¿ššg
.
	`©
Ğ(*
™
) );

1228 
ev’tVeùÜT¿ššg
.
	`©
Ğ(*
™
èèğ
NULL
;

1231 
ev’tVeùÜT¿ššg
.
	`”a£
Ğ
¡d
::
	`»move
Ğev’tVeùÜT¿ššg.
	`begš
(),ƒv’tVeùÜT¿ššg.
	`’d
(), (*)
NULL
 ),ƒventVectorTraining.end() );

1234 
UIÁ_t
 
sizeTe¡šg
 = 
ev’tVeùÜTe¡šg
.
	`size
();

1235 ifĞ
sizeTe¡šg
 > 
	`UIÁ_t
(
»que¡edTe¡šg
) ){

1236 
¡d
::
veùÜ
<
UIÁ_t
> 
	`šdiûsTe¡šg
Ğ
sizeTe¡šg
 );

1238 
¡d
::
	`g’”©e
Ğ
šdiûsTe¡šg
.
	`begš
(), indiûsTe¡šg.
	`’d
(), 
TMVA
::
Inüem’t
<
UIÁ_t
>(0) );

1240 
¡d
::
	`¿ndom_shufæe
Ğ
šdiûsTe¡šg
.
	`begš
(), indiûsTe¡šg.
	`’d
(), 
ºdm
 );

1242 
šdiûsTe¡šg
.
	`”a£
ĞšdiûsTe¡šg.
	`begš
()+
sizeTe¡šg
-
	`UIÁ_t
(
»que¡edTe¡šg
), indiûsTe¡šg.
	`’d
() );

1244  
¡d
::
veùÜ
<
UIÁ_t
>::
™”©Ü
 
™
 = 
šdiûsTe¡šg
.
	`begš
(), 
™End
 = indiûsTe¡šg.
	`’d
(); it != itEnd; ++it ){

1245 
d–‘e
 
ev’tVeùÜTe¡šg
.
	`©
Ğ(*
™
) );

1246 
ev’tVeùÜTe¡šg
.
	`©
Ğ(*
™
èèğ
NULL
;

1249 
ev’tVeùÜTe¡šg
.
	`”a£
Ğ
¡d
::
	`»move
Ğev’tVeùÜTe¡šg.
	`begš
(),ƒv’tVeùÜTe¡šg.
	`’d
(), (*)
NULL
 ),ƒventVectorTesting.end() );

1253 ifĞ
ev’tVeùÜT¿ššg
.
	`size
(è< 
	`UIÁ_t
(
»que¡edT¿ššg
) )

1254 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "DataSetFactory/requested‚umber ofraining samples†argerhan size ofƒventVectorTraining.\n"

1255 << "Th”i ´obably‡Àissue. PËa£ cÚùhTMVA dev–İ”s." << 
Endl
;

1256 
¡d
::
	`fÜ_—ch
Ğ
ev’tVeùÜT¿ššg
.
	`begš
()+
»que¡edT¿ššg
,ƒv’tVeùÜT¿ššg.
	`’d
(), 
D–‘eFunùÜ
<
Ev’t
>() );

1257 
ev’tVeùÜT¿ššg
.
	`”a£
Óv’tVeùÜT¿ššg.
	`begš
()+
»que¡edT¿ššg
,ev’tVeùÜT¿ššg.
	`’d
());

1259 ifĞ
ev’tVeùÜTe¡šg
.
	`size
(è< 
	`UIÁ_t
(
»que¡edTe¡šg
) )

1260 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "DataSetFactory/requested‚umber ofesting samples†argerhan size ofƒventVectorTesting.\n"

1261 << "Th”i ´obably‡Àissue. PËa£ cÚùhTMVA dev–İ”s." << 
Endl
;

1262 
¡d
::
	`fÜ_—ch
Ğ
ev’tVeùÜTe¡šg
.
	`begš
()+
»que¡edTe¡šg
,ƒv’tVeùÜTe¡šg.
	`’d
(), 
D–‘eFunùÜ
<
Ev’t
>() );

1263 
ev’tVeùÜTe¡šg
.
	`”a£
Óv’tVeùÜTe¡šg.
	`begš
()+
»que¡edTe¡šg
,ev’tVeùÜTe¡šg.
	`’d
());

1267 
TMVA
::
D©aS‘FaùÜy
::
	`R’ÜmEv’ts
Ğ
dsi
, 
tmpEv’tVeùÜ
, 
ev’tCouÁs
, 
nÜmMode
 );

1269 
IÁ_t
 
ŒaššgSize
 = 0;

1270 
IÁ_t
 
‹¡šgSize
 = 0;

1273  
UIÁ_t
 
şs
 = 0; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

1274 
ŒaššgSize
 +ğ
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`size
();

1275 
‹¡šgSize
 +ğ
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`size
();

1281 
Ev’tVeùÜ
* 
ŒaššgEv’tVeùÜ
 = 
Ãw
 
	`Ev’tVeùÜ
();

1282 
Ev’tVeùÜ
* 
‹¡šgEv’tVeùÜ
 = 
Ãw
 
	`Ev’tVeùÜ
();

1284 
ŒaššgEv’tVeùÜ
->
	`»£rve
Ğ
ŒaššgSize
 );

1285 
‹¡šgEv’tVeùÜ
->
	`»£rve
Ğ
‹¡šgSize
 );

1291 
	`Log
(è<< 
kDEBUG
 << " MIXING ============ğ" << 
Endl
;

1293 ifĞ
mixMode
 == "ALTERNATE" ){

1296  
UIÁ_t
 
şs
 = 1; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

1297 ià(
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`size
() !=mpEventVector[Types::kTraining].at(0).size()){

1298 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "T¿ššg sam¶e: You‡»ryšgØmixƒv’t š‡É”Ç‹ mod®thoughhşas£ havdifã»Áƒv’ˆnumb”s. Thi wÜk buˆth®‹º©iÚ stİ ©hÏ¡ƒv’ˆoàthsm®Ë¸şass."<<
Endl
;

1300 ià(
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`size
() !=mpEventVector[Types::kTesting].at(0).size()){

1301 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "Te¡šg sam¶e: You‡»ryšgØmixƒv’t š‡É”Ç‹ mod®thoughhşas£ havdifã»Áƒv’ˆnumb”s. Thi wÜk buˆth®‹º©iÚ stİ ©hÏ¡ƒv’ˆoàthsm®Ë¸şass."<<
Endl
;

1304 
Ev’tVeùÜ
::
	t™”©Ü
 
	tEvtVecIt
;

1305 
EvtVecIt
 
™Ev’t
, 
™Ev’tEnd
;

1308 
	`Log
(è<< 
kDEBUG
 << "š£¹ cÏs 0 iÁØŒaššg‡nde¡ veùÜ" << 
Endl
;

1309 
ŒaššgEv’tVeùÜ
->
	`š£¹
ĞŒaššgEv’tVeùÜ->
	`’d
(), 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(0).
	`begš
(),mpEventVector[Types::kTraining].at(0).end() );

1310 
‹¡šgEv’tVeùÜ
->
	`š£¹
Ğ‹¡šgEv’tVeùÜ->
	`’d
(), 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(0).
	`begš
(),mpEventVector[Types::kTesting].at(0).end() );

1313 
EvtVecIt
 
™T¬g‘
;

1314  
UIÁ_t
 
şs
 = 1; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

1315 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "š£¹ cÏs " << 
şs
 << 
Endl
;

1317 
™T¬g‘
 = 
ŒaššgEv’tVeùÜ
->
	`begš
() - 1;

1319  
™Ev’t
 = 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`begš
(), 
™Ev’tEnd
 =mpEv’tVeùÜ[Ty³s::kT¿ššg].©(şs).
	`’d
(); itEvent != itEventEnd; ++itEvent ){

1321 ifĞ(
ŒaššgEv’tVeùÜ
->
	`’d
(è- 
™T¬g‘
è< 
	`IÁ_t
(
şs
+1) ) {

1322 
™T¬g‘
 = 
ŒaššgEv’tVeùÜ
->
	`’d
();

1323 
ŒaššgEv’tVeùÜ
->
	`š£¹
Ğ
™T¬g‘
, 
™Ev’t
, 
™Ev’tEnd
 );

1326 
™T¬g‘
 +ğ
şs
+1;

1327 
ŒaššgEv’tVeùÜ
->
	`š£¹
Ğ
™T¬g‘
, (*
™Ev’t
) );

1331 
™T¬g‘
 = 
‹¡šgEv’tVeùÜ
->
	`begš
() - 1;

1333  
™Ev’t
 = 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`begš
(), 
™Ev’tEnd
 =mpEv’tVeùÜ[Ty³s::kTe¡šg].©(şs).
	`’d
(); itEvent != itEventEnd; ++itEvent ){

1335 ifĞĞ
‹¡šgEv’tVeùÜ
->
	`’d
(è- 
™T¬g‘
 ) < 
	`IÁ_t
(
şs
+1) ) {

1336 
™T¬g‘
 = 
‹¡šgEv’tVeùÜ
->
	`’d
();

1337 
‹¡šgEv’tVeùÜ
->
	`š£¹
Ğ
™T¬g‘
, 
™Ev’t
, 
™Ev’tEnd
 );

1340 
™T¬g‘
 +ğ
şs
+1;

1341 
‹¡šgEv’tVeùÜ
->
	`š£¹
Ğ
™T¬g‘
, (*
™Ev’t
) );

1357  
UIÁ_t
 
şs
 = 0; cl < 
dsi
.
	`G‘NCÏs£s
(); ++cls ){

1358 
ŒaššgEv’tVeùÜ
->
	`š£¹
ĞŒaššgEv’tVeùÜ->
	`’d
(), 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`begš
(),mpEventVector[Types::kTraining].at(cls).end() );

1359 
‹¡šgEv’tVeùÜ
->
	`š£¹
 (e¡šgEv’tVeùÜ->
	`’d
(), 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`begš
(),mpEventVector[Types::kTesting].at(cls).end() );

1370 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`ş—r
();

1371 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`ş—r
();

1373 
tmpEv’tVeùÜ
[
Ty³s
::
kMaxT»eTy³
].
	`ş—r
();

1375 ià(
mixMode
 == "RANDOM") {

1376 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "shufæšgƒv’ts"<<
Endl
;

1378 
¡d
::
	`¿ndom_shufæe
Ğ
ŒaššgEv’tVeùÜ
->
	`begš
(),¿ššgEv’tVeùÜ->
	`’d
(), 
ºdm
 );

1379 
¡d
::
	`¿ndom_shufæe
Ğ
‹¡šgEv’tVeùÜ
->
	`begš
(),e¡šgEv’tVeùÜ->
	`’d
(), 
ºdm
 );

1382 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "ŒaššgEv’tVeùÜ " << 
ŒaššgEv’tVeùÜ
->
	`size
(è<< 
Endl
;

1383 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "‹¡šgEv’tVeùÜ " << 
‹¡šgEv’tVeùÜ
->
	`size
(è<< 
Endl
;

1386 
D©aS‘
* 
ds
 = 
Ãw
 
	`D©aS‘
(
dsi
);

1389 
ds
->
	`S‘Ev’tCŞËùiÚ
(
ŒaššgEv’tVeùÜ
, 
Ty³s
::
kT¿ššg
 );

1391 
ds
->
	`S‘Ev’tCŞËùiÚ
(
‹¡šgEv’tVeùÜ
, 
Ty³s
::
kTe¡šg
 );

1394 ià(
ds
->
	`G‘NT¿ššgEv’ts
() < 1){

1395 
	`Log
(è<< 
kFATAL
 << "D©a£ˆ" << 
¡d
::
	`¡ršg
(
dsi
.
	`G‘Name
()è<< " dÛ nÙ havªy¿ššgƒv’ts, I b‘‹¸¡İ h”ªd†‘ you fixh© oÃ fœ¡ " << 
Endl
;

1398 ià(
ds
->
	`G‘NTe¡Ev’ts
() < 1) {

1399 
	`Log
(è<< 
kERROR
 << "D©a£ˆ" << 
¡d
::
	`¡ršg
(
dsi
.
	`G‘Name
()è<< " dÛ nÙ havªye¡šgƒv’ts, gues th© wÈÿu£…robËm Ï‹r..buˆfÜ‚ow, I cÚtšu" << 
Endl
;

1402 
d–‘e
 
ŒaššgEv’tVeùÜ
;

1403 
d–‘e
 
‹¡šgEv’tVeùÜ
;

1404  
ds
;

1406 
	}
}

1417 
	gTMVA
::
D©aS‘FaùÜy
::
	$R’ÜmEv’ts
Ğ
TMVA
::
D©aS‘Info
& 
dsi
,

1418 
Ev’tVeùÜOfCÏs£sOfT»eTy³
& 
tmpEv’tVeùÜ
,

1419 cÚ¡ 
EvtStsP”CÏss
& 
ev’tCouÁs
,

1420 cÚ¡ 
TSŒšg
& 
nÜmMode
 )

1427 
IÁ_t
 
ŒaššgSize
 = 0;

1428 
IÁ_t
 
‹¡šgSize
 = 0;

1430 
V®ueP”CÏss
 
	`ŒaššgSumWeightsP”CÏss
Ğ
dsi
.
	`G‘NCÏs£s
() );

1431 
V®ueP”CÏss
 
	`‹¡šgSumWeightsP”CÏss
Ğ
dsi
.
	`G‘NCÏs£s
() );

1433 
Numb”P”CÏss
 
	`ŒaššgSizeP”CÏss
Ğ
dsi
.
	`G‘NCÏs£s
() );

1434 
Numb”P”CÏss
 
	`‹¡šgSizeP”CÏss
Ğ
dsi
.
	`G‘NCÏs£s
() );

1436 
DoubË_t
 
ŒaššgSumSigÇlWeights
 = 0;

1437 
DoubË_t
 
ŒaššgSumBackgrWeights
 = 0;

1438 
DoubË_t
 
‹¡šgSumSigÇlWeights
 = 0;

1439 
DoubË_t
 
‹¡šgSumBackgrWeights
 = 0;

1443  
UIÁ_t
 
şs
 = 0, 
şsEnd
 = 
dsi
.
	`G‘NCÏs£s
(); cls < clsEnd; ++cls ){

1444 
ŒaššgSizeP”CÏss
.
	`©
(
şs
èğ
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].©(şs).
	`size
();

1445 
‹¡šgSizeP”CÏss
.
	`©
(
şs
èğ
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].©(şs).
	`size
();

1447 
ŒaššgSize
 +ğ
ŒaššgSizeP”CÏss
.
	`back
();

1448 
‹¡šgSize
 +ğ
‹¡šgSizeP”CÏss
.
	`back
();

1462 
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
èğ
¡d
::
	`accumuÏ‹
Ğ
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].©(şs).
	`begš
(),

1463 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`’d
(),

1464 
	`DoubË_t
(0),

1465 
	`compo£_bš¬y
Ğ
¡d
::
¶us
<
DoubË_t
>(),

1466 
nuÎ
<
DoubË_t
>(),

1467 
¡d
::
	`mem_fun
(&
TMVA
::
Ev’t
::
G‘Origš®Weight
) ) );

1469 
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
èğ
¡d
::
	`accumuÏ‹
Ğ
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].©(şs).
	`begš
(),

1470 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`’d
(),

1471 
	`DoubË_t
(0),

1472 
	`compo£_bš¬y
Ğ
¡d
::
¶us
<
DoubË_t
>(),

1473 
nuÎ
<
DoubË_t
>(),

1474 
¡d
::
	`mem_fun
(&
TMVA
::
Ev’t
::
G‘Origš®Weight
) ) );

1476 iàĞ
şs
 =ğ
dsi
.
	`G‘SigÇlCÏssIndex
()){

1477 
ŒaššgSumSigÇlWeights
 +ğ
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
);

1478 
‹¡šgSumSigÇlWeights
 +ğ
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
);

1480 
ŒaššgSumBackgrWeights
 +ğ
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
);

1481 
‹¡šgSumBackgrWeights
 +ğ
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
);

1488 
V®ueP”CÏss
 
	`»nÜmFaùÜ
Ğ
dsi
.
	`G‘NCÏs£s
() );

1492 
dsi
.
	`S‘NÜm®iz©iÚ
Ğ
nÜmMode
 );

1495 
dsi
.
	`S‘T¿ššgSumSigÇlWeights
(
ŒaššgSumSigÇlWeights
);

1496 
dsi
.
	`S‘T¿ššgSumBackgrWeights
(
ŒaššgSumBackgrWeights
);

1497 
dsi
.
	`S‘Te¡šgSumSigÇlWeights
(
‹¡šgSumSigÇlWeights
);

1498 
dsi
.
	`S‘Te¡šgSumBackgrWeights
(
‹¡šgSumBackgrWeights
);

1501 ià(
nÜmMode
 == "NONE") {

1502 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "NØweighˆ»nÜm®i§tiÚ‡µl›d: u£ origš® glob®‡ndƒv’ˆweights" << 
Endl
;

1508 ià(
nÜmMode
 == "NUMEVENTS") {

1509 
	`Log
(è<< 
kDEBUG


1510 << "\tWeighˆ»nÜm®i§tiÚ mode: \"NumEv’ts\":„’Üm®i£ ®Èev’ˆşas£ " << 
Endl
;

1511 
	`Log
(è<< 
kDEBUG


1512 << " suchh©hefãùiv(weigh‹dènumb” oàev’t šƒach cÏs equ® th»¥eùiv" << 
Endl
;

1513 
	`Log
(è<< 
kDEBUG


1514 << "‚umb” oàev’t ÓÁr›sèth© you demªded iÀP»·»T¿ššgAndTe¡T»e(\"\",\"nT¿š_SigÇl=.. )" << 
Endl
;

1515 
	`Log
(è<< 
kDEBUG


1516 << " ... i.e. suchh© Sum[i=1..N_j]{w_i} = N_j, j=0,1,2..." << 
Endl
;

1517 
	`Log
(è<< 
kDEBUG


1518 << " ... (nÙth© N_j i thsum oàTRAININGƒv’t ÒT¿š_j...w™h j=SigÇl,Background.." << 
Endl
;

1519 
	`Log
(è<< 
kDEBUG


1520 << " ..... Te¡šgƒv’t ¬nÙ„’Üm®i£d‚Ü inşuded iÀth»nÜm®i§tiÚ faùÜ! )"<< 
Endl
;

1522  
UIÁ_t
 
şs
 = 0, 
şsEnd
 = 
dsi
.
	`G‘NCÏs£s
(); cls < clsEnd; ++cls ){

1526 
»nÜmFaùÜ
.
	`©
(
şs
èğ((
Flßt_t
)
ŒaššgSizeP”CÏss
.at(cls) )/

1527 (
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
)) ;

1530 ià(
nÜmMode
 == "EQUALNUMEVENTS") {

1536 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "Weighˆ»nÜm®i§tiÚ mode: \"Equ®NumEv’ts\":„’Üm®i£ ®Èev’ˆşas£ ..." << 
Endl
;

1537 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " suchh©hefãùiv(weigh‹dènumb” oàev’t šƒach cÏs i th§m" << 
Endl
;

1538 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " (ªdƒqu® thnumb” oàev’t ÓÁr›sègiv’ fÜ cÏss=0 )" << 
Endl
;

1539 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "... i.e. suchh© Sum[i=1..N_j]{w_i} = N_şassA, j=şassA, cÏssB, ..." << 
Endl
;

1540 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< "... (nÙth© N_j i thsum oàTRAININGƒv’ts" << 
Endl
;

1541 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< " ..... Te¡šgƒv’t ¬nÙ„’Üm®i£d‚Ü inşuded iÀth»nÜm®i§tiÚ faùÜ!)" << 
Endl
;

1544 
UIÁ_t
 
»ã»nûCÏss
 = 0;

1545 
UIÁ_t
 
şs
 = 0, 
şsEnd
 = 
dsi
.
	`G‘NCÏs£s
(); cls < clsEnd; ++cls ) {

1546 
»nÜmFaùÜ
.
	`©
(
şs
èğ
	`Flßt_t
(
ŒaššgSizeP”CÏss
.©(
»ã»nûCÏss
))/

1547 (
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
));

1551 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
())<< "<P»·»FÜT¿ššgAndTe¡šg> UnknowÀNÜmMode: " << 
nÜmMode
 << 
Endl
;

1556 
IÁ_t
 
maxL
 = 
dsi
.
	`G‘CÏssNameMaxL’gth
();

1557 
UIÁ_t
 
şs
 = 0, 
şsEnd
 = 
dsi
.
	`G‘NCÏs£s
(); cls<clsEnd; ++cls) {

1558 
	`Log
(è<< 
kDEBUG


1559 << "--> ResÿË " << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
)

1560 << 
dsi
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
(è<< "ƒv’ˆweight by faùÜ: " << 
»nÜmFaùÜ
.
	`©
(şsè<< 
Endl
;

1561 
Ev’tVeùÜ
::
™”©Ü
 
™
 = 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`begš
(),

1562 
™End
 = 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`’d
(); 
™
 != itEnd; ++it){

1563 (*
™
)->
	`S‘Weight
 ((*™)->
	`G‘Weight
(è* 
»nÜmFaùÜ
.
	`©
(
şs
));

1573 
	`Log
(è<< 
kINFO


1574 << "Numb” oàŒaššg‡nde¡šgƒv’ts" << 
Endl
;

1575 
	`Log
(è<< 
kDEBUG
 << "\á”„esÿlšg:" << 
Endl
;

1576 
	`Log
(è<< 
kINFO


1577 << "---------------------------------------------------------------------------" << 
Endl
;

1579 
ŒaššgSumSigÇlWeights
 = 0;

1580 
ŒaššgSumBackgrWeights
 = 0;

1581 
‹¡šgSumSigÇlWeights
 = 0;

1582 
‹¡šgSumBackgrWeights
 = 0;

1584  
UIÁ_t
 
şs
 = 0, 
şsEnd
 = 
dsi
.
	`G‘NCÏs£s
(); cls < clsEnd; ++cls ){

1586 
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
èğ(
¡d
::
	`accumuÏ‹
Ğ
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].©(şs).
	`begš
(),

1587 
tmpEv’tVeùÜ
[
Ty³s
::
kT¿ššg
].
	`©
(
şs
).
	`’d
(),

1588 
	`DoubË_t
(0),

1589 
	`compo£_bš¬y
Ğ
¡d
::
¶us
<
DoubË_t
>(),

1590 
nuÎ
<
DoubË_t
>(),

1591 
¡d
::
	`mem_fun
(&
TMVA
::
Ev’t
::
G‘Origš®Weight
) ) ));

1593 
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
èğ
¡d
::
	`accumuÏ‹
Ğ
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].©(şs).
	`begš
(),

1594 
tmpEv’tVeùÜ
[
Ty³s
::
kTe¡šg
].
	`©
(
şs
).
	`’d
(),

1595 
	`DoubË_t
(0),

1596 
	`compo£_bš¬y
Ğ
¡d
::
¶us
<
DoubË_t
>(),

1597 
nuÎ
<
DoubË_t
>(),

1598 
¡d
::
	`mem_fun
(&
TMVA
::
Ev’t
::
G‘Origš®Weight
) ) );

1601 iàĞ
şs
 =ğ
dsi
.
	`G‘SigÇlCÏssIndex
()){

1602 
ŒaššgSumSigÇlWeights
 +ğ
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
);

1603 
‹¡šgSumSigÇlWeights
 +ğ
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
);

1605 
ŒaššgSumBackgrWeights
 +ğ
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
);

1606 
‹¡šgSumBackgrWeights
 +ğ
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
);

1611 
	`Log
(è<< 
kINFO


1612 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
)

1613 << 
dsi
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
() << " -- "

1614 << "Œaššgƒv’t  : " << 
ŒaššgSizeP”CÏss
.
	`©
(
şs
è<< 
Endl
;

1615 
	`Log
(è<< 
kDEBUG
 << "\t(sum oàweights: " << 
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
) << ")"

1616 << " -„eque¡ed w”" << 
ev’tCouÁs
[
şs
].
nT¿ššgEv’tsReque¡ed
 << "ƒv’ts" << 
Endl
;

1617 
	`Log
(è<< 
kINFO


1618 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
)

1619 << 
dsi
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
() << " -- "

1620 << "‹¡šgƒv’t  : " << 
‹¡šgSizeP”CÏss
.
	`©
(
şs
è<< 
Endl
;

1621 
	`Log
(è<< 
kDEBUG
 << "\t(sum oàweights: " << 
‹¡šgSumWeightsP”CÏss
.
	`©
(
şs
) << ")"

1622 << " -„eque¡ed w”" << 
ev’tCouÁs
[
şs
].
nTe¡šgEv’tsReque¡ed
 << "ƒv’ts" << 
Endl
;

1623 
	`Log
(è<< 
kINFO


1624 << 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
)

1625 << 
dsi
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
() << " -- "

1627 << (
ŒaššgSizeP”CÏss
.
	`©
(
şs
)+
‹¡šgSizeP”CÏss
.©(şs)è<< 
Endl
;

1628 
	`Log
(è<< 
kDEBUG
 << "\t(sum of weights: "

1629 << (
ŒaššgSumWeightsP”CÏss
.
	`©
(
şs
)+
‹¡šgSumWeightsP”CÏss
.©(şs)è<< ")" << 
Endl
;

1630 if(
ev’tCouÁs
[
şs
].
nEvAá”Cut
<ev’tCouÁs[şs].
nEvBefÜeCut
) {

1631 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
dsi
.
	`G‘Name
()è<< 
	`£tiosæags
(
ios
::
Ëá
è<< 
¡d
::
	`£tw
(
maxL
)

1632 << 
dsi
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
() << " -- "

1634 << 
ev’tCouÁs
[
şs
].
	`cutSÿlšg
(è<< 
Endl
;

1637 
	`Log
(è<< 
kINFO
 << 
Endl
;

1640 
dsi
.
	`S‘T¿ššgSumSigÇlWeights
(
ŒaššgSumSigÇlWeights
);

1641 
dsi
.
	`S‘T¿ššgSumBackgrWeights
(
ŒaššgSumBackgrWeights
);

1642 
dsi
.
	`S‘Te¡šgSumSigÇlWeights
(
‹¡šgSumSigÇlWeights
);

1643 
dsi
.
	`S‘Te¡šgSumBackgrWeights
(
‹¡šgSumBackgrWeights
);

1646 
	}
}

	@src/DataSetInfo.cxx

34 
	~<veùÜ
>

36 
	~"TEv’tLi¡.h
"

37 
	~"TFe.h
"

38 
	~"TH1.h
"

39 
	~"TH2.h
"

40 
	~"TProfe.h
"

41 
	~"TRªdom3.h
"

42 
	~"TM©rixF.h
"

43 
	~"TVeùÜF.h
"

44 
	~"TM©h.h
"

45 
	~"TROOT.h
"

46 
	~"TObjSŒšg.h
"

48 
	~"TMVA/MsgLogg”.h
"

49 
	~"TMVA/ToŞs.h
"

50 
	~"TMVA/D©aS‘.h
"

51 
	~"TMVA/D©aS‘Info.h
"

52 
	~"TMVA/D©aS‘Mªag”.h
"

53 
	~"TMVA/Ev’t.h
"

55 
	~"TMVA/Ty³s.h
"

56 
	~"TMVA/V¬ŸbËInfo.h
"

61 
	gTMVA
::
D©aS‘Info
::
	$D©aS‘Info
(cÚ¡ 
TSŒšg
& 
Çme
)

62 : 
	`TObjeù
(),

63 
	`fD©aS‘Mªag”
(
NULL
),

64 
	`fName
(
Çme
),

65 
	`fD©aS‘
( 0 ),

66 
	`fN“dsRebudšg
Ğ
kTRUE
 ),

67 
	`fV¬ŸbËs
(),

68 
	`fT¬g‘s
(),

69 
	`fS³ù©Üs
(),

70 
	`fCÏs£s
( 0 ),

71 
	`fNÜm®iz©iÚ
( "NONE" ),

72 
	`fS¶™O±iÚs
(""),

73 
	`fT¿ššgSumSigÇlWeights
(-1),

74 
	`fT¿ššgSumBackgrWeights
(-1),

75 
	`fTe¡šgSumSigÇlWeights
 (-1),

76 
	`fTe¡šgSumBackgrWeights
 (-1),

77 
	`fOwnRoÙDœ
(0),

78 
	`fV”bo£
Ğ
kFALSE
 ),

79 
	`fSigÇlCÏss
(0),

80 
	`fT¬g‘sFÜMuÉişass
(0),

81 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("D©aS‘Info", 
kINFO
) )

83 
	}
}

88 
	gTMVA
::
D©aS‘Info
::~
	$D©aS‘Info
()

90 
	`CË¬D©aS‘
();

92 
UIÁ_t
 
i
=0, 
iEnd
 = 
fCÏs£s
.
	`size
(); i<iEnd; ++i) {

93 
d–‘e
 
fCÏs£s
[
i
];

96 
d–‘e
 
fT¬g‘sFÜMuÉişass
;

98 
d–‘e
 
fLogg”
;

99 
	}
}

103 
	gTMVA
::
D©aS‘Info
::
	$CË¬D©aS‘
() const

105 if(
fD©aS‘
!=0è{ 
d–‘e
 fDataSet; fDataSet=0; }

106 
	}
}

111 
	gTMVA
::
D©aS‘Info
::
	$S‘MsgTy³
Ğ
EMsgTy³
 
t
 ) const

113 
fLogg”
->
	`S‘MšTy³
(
t
);

114 
	}
}

118 
	gTMVA
::
CÏssInfo
* 
TMVA
::
D©aS‘Info
::
	$AddCÏss
ĞcÚ¡ 
TSŒšg
& 
şassName
 )

120 
CÏssInfo
* 
theCÏss
 = 
	`G‘CÏssInfo
(
şassName
);

121 ià(
theCÏss
) heClass;

124 
fCÏs£s
.
	`push_back
Ğ
Ãw
 
	`CÏssInfo
(
şassName
) );

125 
fCÏs£s
.
	`back
()->
	`S‘Numb”
(fCÏs£s.
	`size
()-1);

129 
	`Log
(è<< 
kHEADER
 << 
	`FÜm
("[%s] : ",
fName
.
	`D©a
()è<< "Added cÏs \"" << 
şassName
 << "\""<< 
Endl
;

131 
	`Log
(è<< 
kDEBUG
 <<"\ˆw™h iÁ”ÇÈşas numb” " << 
fCÏs£s
.
	`back
()->
	`G‘Numb”
(è<< 
Endl
;

134 ià(
şassName
 =ğ"SigÇl"è
fSigÇlCÏss
 = 
fCÏs£s
.
	`size
()-1;

136  
fCÏs£s
.
	`back
();

137 
	}
}

141 
	gTMVA
::
CÏssInfo
* 
TMVA
::
D©aS‘Info
::
	$G‘CÏssInfo
ĞcÚ¡ 
TSŒšg
& 
Çme
 ) const

143 
¡d
::
veùÜ
<
CÏssInfo
*>::
™”©Ü
 
™
 = 
fCÏs£s
.
	`begš
(); iˆ< fCÏs£s.
	`’d
(); it++) {

144 ià((*
™
)->
	`G‘Name
(è=ğ
Çme
)  (*it);

147 
	}
}

151 
	gTMVA
::
CÏssInfo
* 
TMVA
::
D©aS‘Info
::
	$G‘CÏssInfo
Ğ
IÁ_t
 
şs
 ) const

153 
Œy
 {

154  
fCÏs£s
.
	`©
(
şs
);

156 
	`ÿtch
(...) {

159 
	}
}

163 
	gTMVA
::
D©aS‘Info
::
	$PrštCÏs£s
() const

165 
UIÁ_t
 
şs
 = 0; cl < 
	`G‘NCÏs£s
() ; cls++) {

166 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "CÏs šdex : " << 
şs
 << "‚am: " << 
	`G‘CÏssInfo
(şs)->
	`G‘Name
(è<< 
Endl
;

168 
	}
}

172 
BoŞ_t
 
	gTMVA
::
D©aS‘Info
::
	$IsSigÇl
ĞcÚ¡ 
TMVA
::
Ev’t
* 
ev
 ) const

174  (
ev
->
	`G‘CÏss
(è=ğ
fSigÇlCÏss
);

175 
	}
}

179 
	g¡d
::
veùÜ
<
Flßt_t
>* 
TMVA
::
D©aS‘Info
::
	$G‘T¬g‘sFÜMuÉişass
ĞcÚ¡ 
TMVA
::
Ev’t
* 
ev
 )

181 ifĞ!
fT¬g‘sFÜMuÉişass
 ) fT¬g‘sFÜMuÉişas ğ
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>Ğ
	`G‘NCÏs£s
() );

183 
fT¬g‘sFÜMuÉişass
->
	`assign
Ğ
	`G‘NCÏs£s
(), 0.0 );

184 
fT¬g‘sFÜMuÉişass
->
	`©
Ğ
ev
->
	`G‘CÏss
() ) = 1.0;

185  
fT¬g‘sFÜMuÉişass
;

186 
	}
}

191 
BoŞ_t
 
	gTMVA
::
D©aS‘Info
::
	$HasCuts
() const

193 
BoŞ_t
 
hasCuts
 = 
kFALSE
;

194 
¡d
::
veùÜ
<
CÏssInfo
*>::
™”©Ü
 
™
 = 
fCÏs£s
.
	`begš
(); iˆ< fCÏs£s.
	`’d
(); it++) {

195 ifĞ
	`TSŒšg
((*
™
)->
	`G‘Cut
()è!ğTSŒšg(""èè
hasCuts
 = 
kTRUE
;

197  
hasCuts
;

198 
	}
}

202 cÚ¡ 
TM©rixD
* 
	gTMVA
::
D©aS‘Info
::
	$CÜ»ÏtiÚM©rix
ĞcÚ¡ 
TSŒšg
& 
şassName
 ) const

204 
CÏssInfo
* 
±r
 = 
	`G‘CÏssInfo
(
şassName
);

205  
±r
?±r->
	`G‘CÜ»ÏtiÚM©rix
():0;

206 
	}
}

212 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddV¬ŸbË
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
,

213 cÚ¡ 
TSŒšg
& 
t™Ë
,

214 cÚ¡ 
TSŒšg
& 
un™
,

215 
DoubË_t
 
mš
, DoubË_ˆ
max
,

216 
v¬Ty³
,

217 
BoŞ_t
 
nÜm®ized
,

218 * 
ex‹º®
 )

220 
TSŒšg
 
»gex´
 = 
ex´essiÚ
;

221 
»gex´
.
	`R•ÏûAÎ
(" ", "" );

222 
fV¬ŸbËs
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
»gex´
, 
t™Ë
, 
un™
,

223 
fV¬ŸbËs
.
	`size
()+1, 
v¬Ty³
, 
ex‹º®
, 
mš
, 
max
, 
nÜm®ized
 ));

224 
fN“dsRebudšg
 = 
kTRUE
;

225  
fV¬ŸbËs
.
	`back
();

226 
	}
}

231 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddV¬ŸbË
ĞcÚ¡ 
V¬ŸbËInfo
& 
v¬Info
){

232 
fV¬ŸbËs
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
v¬Info
 ));

233 
fN“dsRebudšg
 = 
kTRUE
;

234  
fV¬ŸbËs
.
	`back
();

235 
	}
}

241 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddT¬g‘
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
,

242 cÚ¡ 
TSŒšg
& 
t™Ë
,

243 cÚ¡ 
TSŒšg
& 
un™
,

244 
DoubË_t
 
mš
, DoubË_ˆ
max
,

245 
BoŞ_t
 
nÜm®ized
,

246 * 
ex‹º®
 )

248 
TSŒšg
 
»gex´
 = 
ex´essiÚ
;

249 
»gex´
.
	`R•ÏûAÎ
(" ", "" );

250 
ty³
='F';

251 
fT¬g‘s
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
»gex´
, 
t™Ë
, 
un™
,

252 
fT¬g‘s
.
	`size
()+1, 
ty³
, 
ex‹º®
, 
mš
,

253 
max
, 
nÜm®ized
 ));

254 
fN“dsRebudšg
 = 
kTRUE
;

255  
fT¬g‘s
.
	`back
();

256 
	}
}

261 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddT¬g‘
ĞcÚ¡ 
V¬ŸbËInfo
& 
v¬Info
){

262 
fT¬g‘s
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
v¬Info
 ));

263 
fN“dsRebudšg
 = 
kTRUE
;

264  
fT¬g‘s
.
	`back
();

265 
	}
}

271 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddS³ù©Ü
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
,

272 cÚ¡ 
TSŒšg
& 
t™Ë
,

273 cÚ¡ 
TSŒšg
& 
un™
,

274 
DoubË_t
 
mš
, DoubË_ˆ
max
, 
ty³
,

275 
BoŞ_t
 
nÜm®ized
, * 
ex‹º®
 )

277 
TSŒšg
 
»gex´
 = 
ex´essiÚ
;

278 
»gex´
.
	`R•ÏûAÎ
(" ", "" );

279 
fS³ù©Üs
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
»gex´
, 
t™Ë
, 
un™
,

280 
fS³ù©Üs
.
	`size
()+1, 
ty³
, 
ex‹º®
, 
mš
, 
max
, 
nÜm®ized
 ));

281 
fN“dsRebudšg
 = 
kTRUE
;

282  
fS³ù©Üs
.
	`back
();

283 
	}
}

288 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::
D©aS‘Info
::
	$AddS³ù©Ü
ĞcÚ¡ 
V¬ŸbËInfo
& 
v¬Info
){

289 
fS³ù©Üs
.
	`push_back
(
	`V¬ŸbËInfo
Ğ
v¬Info
 ));

290 
fN“dsRebudšg
 = 
kTRUE
;

291  
fS³ù©Üs
.
	`back
();

292 
	}
}

297 
IÁ_t
 
	gTMVA
::
D©aS‘Info
::
	$FšdV¬Index
(cÚ¡ 
TSŒšg
& 
v¬
) const

299 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘NV¬ŸbËs
(); ivar++)

300 ià(
v¬
 =ğ
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘IÁ”ÇlName
())  ivar;

302 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘NV¬ŸbËs
(); ivar++)

303 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< 
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘IÁ”ÇlName
(è<< 
Endl
;

305 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "<FšdV¬Index> V¬ŸbË \'" << 
v¬
 << "\'‚Ù found." << 
Endl
;

308 
	}
}

315 
	gTMVA
::
D©aS‘Info
::
	$S‘WeightEx´essiÚ
ĞcÚ¡ 
TSŒšg
& 
ex´
, cÚ¡ TSŒšg& 
şassName
 )

317 ià(
şassName
 != "") {

318 
TMVA
::
CÏssInfo
* 
ci
 = 
	`AddCÏss
(
şassName
);

319 
ci
->
	`S‘Weight
Ğ
ex´
 );

323 ià(
fCÏs£s
.
	`em±y
()) {

324 
	`Log
(è<< 
kWARNING
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "NØşas£ »gi¡”ed y‘, cªnÙ s³cify weighˆex´essiÚ!" << 
Endl
;

326 
¡d
::
veùÜ
<
CÏssInfo
*>::
™”©Ü
 
™
 = 
fCÏs£s
.
	`begš
(); iˆ< fCÏs£s.
	`’d
(); it++) {

327 (*
™
)->
	`S‘Weight
Ğ
ex´
 );

330 
	}
}

334 
	gTMVA
::
D©aS‘Info
::
	$S‘CÜ»ÏtiÚM©rix
ĞcÚ¡ 
TSŒšg
& 
şassName
, 
TM©rixD
* 
m©rix
 )

336 
	`G‘CÏssInfo
(
şassName
)->
	`S‘CÜ»ÏtiÚM©rix
(
m©rix
);

337 
	}
}

342 
	gTMVA
::
D©aS‘Info
::
	$S‘Cut
ĞcÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
şassName
 )

344 ià(
şassName
 == "") {

345 
¡d
::
veùÜ
<
CÏssInfo
*>::
™”©Ü
 
™
 = 
fCÏs£s
.
	`begš
(); iˆ< fCÏs£s.
	`’d
(); it++) {

346 (*
™
)->
	`S‘Cut
Ğ
cut
 );

350 
TMVA
::
CÏssInfo
* 
ci
 = 
	`AddCÏss
(
şassName
);

351 
ci
->
	`S‘Cut
Ğ
cut
 );

353 
	}
}

358 
	gTMVA
::
D©aS‘Info
::
	$AddCut
ĞcÚ¡ 
TCut
& 
cut
, cÚ¡ 
TSŒšg
& 
şassName
 )

360 ià(
şassName
 == "") {

361 
¡d
::
veùÜ
<
CÏssInfo
*>::
™”©Ü
 
™
 = 
fCÏs£s
.
	`begš
(); iˆ< fCÏs£s.
	`’d
(); it++) {

362 cÚ¡ 
TCut
& 
ŞdCut
 = (*
™
)->
	`G‘Cut
();

363 (*
™
)->
	`S‘Cut
Ğ
ŞdCut
+
cut
 );

367 
TMVA
::
CÏssInfo
* 
ci
 = 
	`AddCÏss
(
şassName
);

368 
ci
->
	`S‘Cut
Ğci->
	`G‘Cut
()+
cut
 );

370 
	}
}

375 
	g¡d
::
veùÜ
<
TSŒšg
> 
TMVA
::
D©aS‘Info
::
	$G‘Li¡OfV¬ŸbËs
() const

377 
¡d
::
veùÜ
<
TSŒšg
> 
vNames
;

378 
¡d
::
veùÜ
<
TMVA
::
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
viIt
 = 
	`G‘V¬ŸbËInfos
().
	`begš
();

379 ;
viIt
 !ğ
	`G‘V¬ŸbËInfos
().
	`’d
(); viIt++è
vNames
.
	`push_back
Ğ(*viIt).
	`G‘Ex´essiÚ
() );

381  
vNames
;

382 
	}
}

388 
	gTMVA
::
D©aS‘Info
::
	$PrštCÜ»ÏtiÚM©rix
ĞcÚ¡ 
TSŒšg
& 
şassName
 )

391 
	`Log
(è<< 
kHEADER


392 << "CÜ»ÏtiÚ m©rix (" << 
şassName
 << "):" << 
Endl
;

393 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ*
	`CÜ»ÏtiÚM©rix
Ğ
şassName
 ), 
	`G‘Li¡OfV¬ŸbËs
(), 
	`Log
() );

394 
	}
}

398 
TH2
* 
	gTMVA
::
D©aS‘Info
::
	$C»©eCÜ»ÏtiÚM©rixHi¡
ĞcÚ¡ 
TM©rixD
* 
m
,

399 cÚ¡ 
TSŒšg
& 
hName
,

400 cÚ¡ 
TSŒšg
& 
hT™Ë
 ) const

402 ià(
m
==0)  0;

404 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`G‘NV¬ŸbËs
();

408 
TM©rixF
* 
tm
 = 
Ãw
 
	`TM©rixF
Ğ
nv¬
,‚var );

409 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

410 
UIÁ_t
 
jv¬
=0; jv¬<
nv¬
; jvar++) {

411 (*
tm
)(
iv¬
, 
jv¬
èğ(*
m
)(ivar,jvar);

415 
TH2F
* 
h2
 = 
Ãw
 
	`TH2F
Ğ*
tm
 );

416 
h2
->
	`S‘NameT™Ë
Ğ
hName
, 
hT™Ë
 );

418 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

419 
h2
->
	`G‘Xaxis
()->
	`S‘BšLab–
Ğ
iv¬
+1, 
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘T™Ë
() );

420 
h2
->
	`G‘Yaxis
()->
	`S‘BšLab–
Ğ
iv¬
+1, 
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘T™Ë
() );

425 
h2
->
	`SÿË
( 100.0 );

426 
UIÁ_t
 
ibš
=1; ibš<=
nv¬
; ibin++) {

427 
UIÁ_t
 
jbš
=1; jbš<=
nv¬
; jbin++) {

428 
h2
->
	`S‘BšCÚ‹Á
Ğ
ibš
, 
jbš
, 
	`IÁ_t
(h2->
	`G‘BšCÚ‹Á
( ibin, jbin )) );

433 cÚ¡ 
Flßt_t
 
Ïb–Size
 = 0.055;

434 
h2
->
	`S‘Sts
( 0 );

435 
h2
->
	`G‘Xaxis
()->
	`S‘Lab–Size
Ğ
Ïb–Size
 );

436 
h2
->
	`G‘Yaxis
()->
	`S‘Lab–Size
Ğ
Ïb–Size
 );

437 
h2
->
	`S‘M¬k”Size
( 1.5 );

438 
h2
->
	`S‘M¬k”CŞÜ
( 0 );

439 
h2
->
	`Lab–sO±iÚ
( "d" );

440 
h2
->
	`S‘Lab–Off£t
( 0.011 );

441 
h2
->
	`S‘Mšimum
( -100.0 );

442 
h2
->
	`S‘Maximum
( +100.0 );

454 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "C»©ed cÜ»ÏtiÚ m©rix‡ 2D hi¡og¿m: " << 
h2
->
	`G‘Name
(è<< 
Endl
;

456  
h2
;

457 
	}
}

462 
	gTMVA
::
D©aS‘
* 
TMVA
::
D©aS‘Info
::
	$G‘D©aS‘
() const

464 ià(
fD©aS‘
==0 || 
fN“dsRebudšg
) {

465 if(
fD©aS‘
!=0è
	`CË¬D©aS‘
();

467 ifĞ!
fD©aS‘Mªag”
 )

468 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "D©aS‘Mªag” ha nÙ b“À£ˆš D©aS‘InfØ(G‘D©aS‘(è)." << 
Endl
;

469 
fD©aS‘
 = 
fD©aS‘Mªag”
->
	`C»©eD©aS‘
(
	`G‘Name
());

471 
fN“dsRebudšg
 = 
kFALSE
;

473  
fD©aS‘
;

474 
	}
}

478 
UIÁ_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘NS³ù©Üs
(
boŞ
 
®l
) const

480 if(
®l
)

481  
fS³ù©Üs
.
	`size
();

482 
UIÁ_t
 
	`n¥
(0);

483 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
¥™
=
fS³ù©Üs
.
	`begš
(); sp™!=fS³ù©Üs.
	`’d
(); ++spit) {

484 if(
¥™
->
	`G‘V¬Ty³
()!='C'è
n¥
++;

486  
n¥
;

487 
	}
}

491 
IÁ_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘CÏssNameMaxL’gth
() const

493 
IÁ_t
 
maxL
 = 0;

494 
UIÁ_t
 
ş
 = 0; cÈ< 
	`G‘NCÏs£s
(); cl++) {

495 ià(
	`TSŒšg
(
	`G‘CÏssInfo
(
ş
)->
	`G‘Name
()).
	`L’gth
(è> 
maxL
) maxL = TString(GetClassInfo(cl)->GetName()).Length();

498  
maxL
;

499 
	}
}

503 
IÁ_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘V¬ŸbËNameMaxL’gth
() const

505 
IÁ_t
 
maxL
 = 0;

506 
UIÁ_t
 
i
 = 0; i < 
	`G‘NV¬ŸbËs
(); i++) {

507 ià(
	`TSŒšg
(
	`G‘V¬ŸbËInfo
(
i
).
	`G‘Ex´essiÚ
()).
	`L’gth
(è> 
maxL
) maxL = TString(GetVariableInfo(i).GetExpression()).Length();

510  
maxL
;

511 
	}
}

515 
IÁ_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘T¬g‘NameMaxL’gth
() const

517 
IÁ_t
 
maxL
 = 0;

518 
UIÁ_t
 
i
 = 0; i < 
	`G‘NT¬g‘s
(); i++) {

519 ià(
	`TSŒšg
(
	`G‘T¬g‘Info
(
i
).
	`G‘Ex´essiÚ
()).
	`L’gth
(è> 
maxL
) maxL = TString(GetTargetInfo(i).GetExpression()).Length();

522  
maxL
;

523 
	}
}

527 
DoubË_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘T¿ššgSumSigÇlWeights
(){

528 ià(
fT¿ššgSumSigÇlWeights
<0è
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "‡skšg fÜhsum oàŒaššg sigÇÈev’ˆweight which i nÙ in™Ÿlized y‘" << 
Endl
;

529  
fT¿ššgSumSigÇlWeights
;

530 
	}
}

534 
DoubË_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘T¿ššgSumBackgrWeights
(){

535 ià(
fT¿ššgSumBackgrWeights
<0è
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "‡skšg fÜhsum oàŒaššg backg¸ev’ˆweight which i nÙ in™Ÿlized y‘" << 
Endl
;

536  
fT¿ššgSumBackgrWeights
;

537 
	}
}

541 
DoubË_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘Te¡šgSumSigÇlWeights
 (){

542 ià(
fTe¡šgSumSigÇlWeights
<0è
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "‡skšg fÜhsum oà‹¡šg sigÇÈev’ˆweight which i nÙ in™Ÿlized y‘" << 
Endl
;

543  
fTe¡šgSumSigÇlWeights
 ;

544 
	}
}

548 
DoubË_t
 
	gTMVA
::
D©aS‘Info
::
	$G‘Te¡šgSumBackgrWeights
 (){

549 ià(
fTe¡šgSumBackgrWeights
<0è
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ",
fName
.
	`D©a
()è<< "‡skšg fÜhsum oà‹¡šg backg¸ev’ˆweight which i nÙ in™Ÿlized y‘" << 
Endl
;

550  
fTe¡šgSumBackgrWeights
 ;

551 
	}
}

	@src/DataSetManager.cxx

34 
	~<veùÜ
>

35 
	~<io¡»am
>

36 
usšg
 
	g¡d
::
’dl
;

38 
	~"TMVA/D©aS‘Mªag”.h
"

39 
	~"TMVA/D©aS‘FaùÜy.h
"

40 
	~"TMVA/D©aS‘.h
"

41 
	~"TMVA/D©aS‘Info.h
"

42 
	~"TMVA/MsgLogg”.h
"

44 
	~"TMVA/Ty³s.h
"

49 
	gTMVA
::
D©aS‘Mªag”
::
	$D©aS‘Mªag”
Ğ
D©aIÅutHªdËr
& 
d©aIÅut
 )

50 : 
	`fD©a£tFaùÜy
(0),

51 
	`fD©aIÅut
(&
d©aIÅut
),

52 
	`fD©aS‘InfoCŞËùiÚ
(),

53 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("D©aS‘Mªag”", 
kINFO
) )

55 
	}
}

60 
	gTMVA
::
D©aS‘Mªag”
::
	$D©aS‘Mªag”
( )

61 : 
	`fD©a£tFaùÜy
(0),

62 
	`fD©aIÅut
(0),

63 
	`fD©aS‘InfoCŞËùiÚ
(),

64 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("D©aS‘Mªag”", 
kINFO
) )

66 
	}
}

73 
	gTMVA
::
D©aS‘Mªag”
::~
	$D©aS‘Mªag”
()

75 if(
fD©a£tFaùÜy
è
d–‘e
 fDatasetFactory;

77 
d–‘e
 
fLogg”
;

78 
	}
}

83 
	gTMVA
::
D©aS‘
* 
TMVA
::
D©aS‘Mªag”
::
	$C»©eD©aS‘
ĞcÚ¡ 
TSŒšg
& 
dsiName
 )

85 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
Ğ
dsiName
 );

86 ià(!
dsi
è
	`Log
(è<< 
kFATAL
 << "D©aS‘InfØobjeù '" << 
dsiName
 << "'‚Ù found" << 
Endl
;

87 ià(!
fD©aIÅut
 ) 
	`Log
(è<< 
kFATAL
 << "D©aIÅutHªdË¸objeù 'fD©aIÅut'‚Ù found" << 
Endl
;

90 if(!
fD©a£tFaùÜy
è{ fD©a£tFaùÜy =
Ãw
 
	`D©aS‘FaùÜy
(); }

91  
fD©a£tFaùÜy
->
	`C»©eD©aS‘
Ğ*
dsi
, *
fD©aIÅut
 );

92 
	}
}

97 
	gTMVA
::
D©aS‘Info
* 
TMVA
::
D©aS‘Mªag”
::
	$G‘D©aS‘Info
(cÚ¡ 
TSŒšg
& 
dsiName
)

99  (
D©aS‘Info
*)
fD©aS‘InfoCŞËùiÚ
.
	`FšdObjeù
Ğ
dsiName
 );

100 
	}
}

105 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
D©aS‘Mªag”
::
	$AddD©aS‘Info
(
D©aS‘Info
& 
dsi
)

107 
dsi
.
	`S‘D©aS‘Mªag”
Ğ
this
 );

109 
D©aS‘Info
 * 
dsiInLi¡
 = 
	`G‘D©aS‘Info
(
dsi
.
	`G‘Name
());

110 ià(
dsiInLi¡
!=0)  *dsiInList;

111 
fD©aS‘InfoCŞËùiÚ
.
	`Add
Ğ
cÚ¡_ÿ¡
<
D©aS‘Info
*>(&
dsi
) );

112  
dsi
;

113 
	}
}

	@src/DecisionTree.cxx

60 
	~<io¡»am
>

61 
	~<®gÜ™hm
>

62 
	~<veùÜ
>

63 
	~<lim™s
>

64 
	~<f¡»am
>

65 
	~<®gÜ™hm
>

66 
	~<ÿs£¹
>

68 
	~"TRªdom3.h
"

69 
	~"TM©h.h
"

70 
	~"TM©rix.h
"

72 
	~"TMVA/MsgLogg”.h
"

73 
	~"TMVA/DecisiÚT»e.h
"

74 
	~"TMVA/DecisiÚT»eNode.h
"

75 
	~"TMVA/Bš¬yS—rchT»e.h
"

77 
	~"TMVA/ToŞs.h
"

79 
	~"TMVA/GšiIndex.h
"

80 
	~"TMVA/CrossEÁrİy.h
"

81 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

82 
	~"TMVA/SdivSq¹S¶usB.h
"

83 
	~"TMVA/Ev’t.h
"

84 
	~"TMVA/BDTEv’tW¿µ”.h
"

85 
	~"TMVA/IPruÃToŞ.h
"

86 
	~"TMVA/Co¡Com¶ex™yPruÃToŞ.h
"

87 
	~"TMVA/Ex³ùedE¼ÜPruÃToŞ.h
"

89 cÚ¡ 
IÁ_t
 
	gTMVA
::
DecisiÚT»e
::
fgRªdomS“d
 = 0;

91 
usšg
 
	g¡d
::
veùÜ
;

93 
CÏssImp
(
TMVA
::
DecisiÚT»e
);

95 
boŞ
 
	$®mo¡_equ®_æßt
(
x
, 
y
, 
uÍ
=4){

98  
¡d
::
	`abs
(
x
-
y
è< std::
num”ic_lim™s
<>::
	`•sÚ
(è* std::abs(x+yè* 
uÍ


100 || 
¡d
::
	`abs
(
x
-
y
è< std::
num”ic_lim™s
<>::
	`mš
();

101 
	}
}

103 
boŞ
 
	$®mo¡_equ®_doubË
(
x
, 
y
, 
uÍ
=4){

106  
¡d
::
	`abs
(
x
-
y
è< std::
num”ic_lim™s
<>::
	`•sÚ
(è* std::abs(x+yè* 
uÍ


108 || 
¡d
::
	`abs
(
x
-
y
è< std::
num”ic_lim™s
<>::
	`mš
();

109 
	}
}

116 
	gTMVA
::
DecisiÚT»e
::
	$DecisiÚT»e
():

117 
	`Bš¬yT»e
(),

118 
	`fNv¬s
 (0),

119 
	`fNCuts
 (-1),

120 
	`fU£Fish”Cuts
 (
kFALSE
),

121 
	`fMšLšCÜrFÜFish”
 (1),

122 
	`fU£ExşusiveV¬s
 (
kTRUE
),

123 
	`fS•Ty³
 (
NULL
),

124 
	`fRegTy³
 (
NULL
),

125 
	`fMšSize
 (0),

126 
	`fMšNodeSize
 (1),

127 
	`fMšS•Gaš
 (0),

128 
	`fU£S—rchT»e
(
kFALSE
),

129 
	`fPruÃSŒ’gth
(0),

130 
	`fPruÃM‘hod
 (
kNoPrunšg
),

131 
	`fNNodesBefÜePrunšg
(0),

132 
	`fNodePur™yLim™
(0.5),

133 
	`fRªdomi£dT»e
 (
kFALSE
),

134 
	`fU£Nv¬s
 (0),

135 
	`fU£PoissÚNv¬s
(
kFALSE
),

136 
	`fMyT¿ndom
 (
NULL
),

137 
	`fMaxD•th
 (999999),

138 
	`fSigCÏss
 (0),

139 
	`fT»eID
 (0),

140 
	`fAÇlysisTy³
 (
Ty³s
::
kCÏssifiÿtiÚ
),

141 
	$fD©aS‘Info
 (
NULL
)

143 
	}
}

151 
	gTMVA
::
DecisiÚT»e
::
	$DecisiÚT»e
Ğ
TMVA
::
S•¬©iÚBa£
 *
£pTy³
, 
Flßt_t
 
mšSize
, 
IÁ_t
 
nCuts
, 
D©aS‘Info
* 
d©aInfo
, 
UIÁ_t
 
şs
,

152 
BoŞ_t
 
¿ndomi£dT»e
, 
IÁ_t
 
u£Nv¬s
, BoŞ_ˆ
u£PoissÚNv¬s
,

153 
UIÁ_t
 
nMaxD•th
, 
IÁ_t
 
iS“d
, 
Flßt_t
 
pur™yLim™
, IÁ_ˆ
Œ“ID
):

154 
	`Bš¬yT»e
(),

155 
	`fNv¬s
 (0),

156 
	`fNCuts
 (
nCuts
),

157 
	`fU£Fish”Cuts
 (
kFALSE
),

158 
	`fMšLšCÜrFÜFish”
 (1),

159 
	`fU£ExşusiveV¬s
 (
kTRUE
),

160 
	`fS•Ty³
 (
£pTy³
),

161 
	`fRegTy³
 (
NULL
),

162 
	`fMšSize
 (0),

163 
	`fMšNodeSize
 (
mšSize
),

164 
	`fMšS•Gaš
 (0),

165 
	`fU£S—rchT»e
 (
kFALSE
),

166 
	`fPruÃSŒ’gth
 (0),

167 
	`fPruÃM‘hod
 (
kNoPrunšg
),

168 
	`fNNodesBefÜePrunšg
(0),

169 
	`fNodePur™yLim™
(
pur™yLim™
),

170 
	`fRªdomi£dT»e
 (
¿ndomi£dT»e
),

171 
	`fU£Nv¬s
 (
u£Nv¬s
),

172 
	`fU£PoissÚNv¬s
(
u£PoissÚNv¬s
),

173 
	`fMyT¿ndom
 (
Ãw
 
	`TRªdom3
(
iS“d
)),

174 
	`fMaxD•th
 (
nMaxD•th
),

175 
	`fSigCÏss
 (
şs
),

176 
	`fT»eID
 (
Œ“ID
),

177 
	`fAÇlysisTy³
 (
Ty³s
::
kCÏssifiÿtiÚ
),

178 
	$fD©aS‘Info
 (
d©aInfo
)

180 ià(
£pTy³
 =ğ
NULL
) {

183 
fAÇlysisTy³
 = 
Ty³s
::
kReg»ssiÚ
;

184 
fRegTy³
 = 
Ãw
 
	`Reg»ssiÚV¬Ÿnû
();

185 iàĞ
nCuts
 <=0 ) {

186 
fNCuts
 = 200;

187 
	`Log
(è<< 
kWARNING
 << " You had chosenheraining mode using optimal cuts,‚ot\n"

188 << " ba£d oÀ¨grid oà" << 
fNCuts
 << " by settinghe option NCuts < 0\n"

189 << "‡ thi dÛ¢'ˆexi¡ y‘, I s‘ iˆtØ" << 
fNCuts
 << "‡nd usehe grid"

190 << 
Endl
;

193 
fAÇlysisTy³
 = 
Ty³s
::
kCÏssifiÿtiÚ
;

195 
	}
}

201 
	gTMVA
::
DecisiÚT»e
::
	$DecisiÚT»e
ĞcÚ¡ 
DecisiÚT»e
 &
d
 ):

202 
	`Bš¬yT»e
(),

203 
	`fNv¬s
 (
d
.
fNv¬s
),

204 
	`fNCuts
 (
d
.
fNCuts
),

205 
	`fU£Fish”Cuts
 (
d
.
fU£Fish”Cuts
),

206 
	`fMšLšCÜrFÜFish”
 (
d
.
fMšLšCÜrFÜFish”
),

207 
	`fU£ExşusiveV¬s
 (
d
.
fU£ExşusiveV¬s
),

208 
	`fS•Ty³
 (
d
.
fS•Ty³
),

209 
	`fRegTy³
 (
d
.
fRegTy³
),

210 
	`fMšSize
 (
d
.
fMšSize
),

211 
	`fMšNodeSize
(
d
.
fMšNodeSize
),

212 
	`fMšS•Gaš
 (
d
.
fMšS•Gaš
),

213 
	`fU£S—rchT»e
 (
d
.
fU£S—rchT»e
),

214 
	`fPruÃSŒ’gth
 (
d
.
fPruÃSŒ’gth
),

215 
	`fPruÃM‘hod
 (
d
.
fPruÃM‘hod
),

216 
	`fNodePur™yLim™
(
d
.
fNodePur™yLim™
),

217 
	`fRªdomi£dT»e
 (
d
.
fRªdomi£dT»e
),

218 
	`fU£Nv¬s
 (
d
.
fU£Nv¬s
),

219 
	`fU£PoissÚNv¬s
(
d
.
fU£PoissÚNv¬s
),

220 
	`fMyT¿ndom
 (
Ãw
 
	`TRªdom3
(
fgRªdomS“d
)),

221 
	`fMaxD•th
 (
d
.
fMaxD•th
),

222 
	`fSigCÏss
 (
d
.
fSigCÏss
),

223 
	`fT»eID
 (
d
.
fT»eID
),

224 
	`fAÇlysisTy³
(
d
.
fAÇlysisTy³
),

225 
	$fD©aS‘Info
 (
d
.
fD©aS‘Info
)

227 
this
->
	`S‘RoÙ
Ğ
Ãw
 
TMVA
::
	`DecisiÚT»eNode
 ( *((
DecisiÚT»eNode
*)(
d
.
	`G‘RoÙ
())) ) );

228 
this
->
	`S‘P¬’tT»eInNodes
();

229 
fNNodes
 = 
d
.fNNodes;

230 
	}
}

236 
	gTMVA
::
DecisiÚT»e
::~
	$DecisiÚT»e
()

240 ià(
fMyT¿ndom
è
d–‘e
 fMyTrandom;

241 ià(
fRegTy³
è
d–‘e
 fRegType;

242 
	}
}

248 
	gTMVA
::
DecisiÚT»e
::
	$S‘P¬’tT»eInNodes
Ğ
Node
 *
n
 )

250 ià(
n
 =ğ
NULL
) {

251 
n
 = 
this
->
	`G‘RoÙ
();

252 ià(
n
 =ğ
NULL
) {

253 
	`Log
(è<< 
kFATAL
 << "S‘P¬’tT»eNodes: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

258 ià((
this
->
	`G‘LeáDaugh‹r
(
n
è=ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) != NULL) ) {

259 
	`Log
(è<< 
kFATAL
 << " Nodw™h oÆy oÃ daugh‹r?? Som‘hšg w’ˆwrÚg" << 
Endl
;

261 } ià((
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) == NULL) ) {

262 
	`Log
(è<< 
kFATAL
 << " Nodw™h oÆy oÃ daugh‹r?? Som‘hšg w’ˆwrÚg" << 
Endl
;

266 ià(
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
) {

267 
this
->
	`S‘P¬’tT»eInNodes
Ğthis->
	`G‘LeáDaugh‹r
(
n
) );

269 ià(
this
->
	`G‘RightDaugh‹r
(
n
è!ğ
NULL
) {

270 
this
->
	`S‘P¬’tT»eInNodes
Ğthis->
	`G‘RightDaugh‹r
(
n
) );

273 
n
->
	`S‘P¬’tT»e
(
this
);

274 ià(
n
->
	`G‘D•th
(è> 
this
->
	`G‘TÙ®T»eD•th
()èthis->
	`S‘TÙ®T»eD•th
(n->GetDepth());

276 
	}
}

281 
	gTMVA
::
DecisiÚT»e
* 
TMVA
::DecisiÚT»e::
	$C»©eFromXML
(* 
node
, 
UIÁ_t
 
tmva_V”siÚ_Code
 ) {

282 
¡d
::
¡ršg
 
	`ty³
("");

283 
	`gToŞs
().
	`R—dA‰r
(
node
,"ty³", 
ty³
);

284 
DecisiÚT»e
* 
dt
 = 
Ãw
 
	`DecisiÚT»e
();

286 
dt
->
	`R—dXML
Ğ
node
, 
tmva_V”siÚ_Code
 );

287  
dt
;

288 
	}
}

294 
UIÁ_t
 
	gTMVA
::
DecisiÚT»e
::
BudT»e
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> & 
ev’tSam¶e
,

295 
TMVA
::
DecisiÚT»eNode
 *
node
)

297 ià(
node
==
NULL
) {

299 
node
 = 
Ãw
 
TMVA
::
DecisiÚT»eNode
();

300 
	gfNNodes
 = 1;

301 
	gthis
->
S‘RoÙ
(
node
);

303 
	gthis
->
G‘RoÙ
()->
S‘Pos
('s');

304 
	gthis
->
G‘RoÙ
()->
S‘D•th
(0);

305 
	gthis
->
G‘RoÙ
()->
S‘P¬’tT»e
(
this
);

306 
	gfMšSize
 = 
fMšNodeSize
/100. * 
ev’tSam¶e
.
size
();

307 ià(
G‘T»eID
()==0){

308 
Log
(è<< 
kDEBUG
 << "\tThmšim®‚odsizMšNodeSize=" << 
fMšNodeSize
 << " fMšNodeSize="<<fMšNodeSize<< "% i Œª¦©edØª‡ùu®‚umb” oàev’t ğ"<< 
fMšSize
<< " fÜhŒaššg sam¶sizoà" << 
ev’tSam¶e
.
size
(è<< 
Endl
;

309 
Log
(è<< 
	gkDEBUG
 << "\tNÙe: Thi numb” wÈbk’‡ absŞu‹ mšimum iÀthnode, " << 
	gEndl
;

310 
Log
(è<< 
	gkDEBUG
 << " \tš”m oà'weigh‹dƒv’ts'‡nd unweigh‹d oÃ !! " << 
	gEndl
;

314 
UIÁ_t
 
	gÃv’ts
 = 
ev’tSam¶e
.
size
();

316 ià(
	gÃv’ts
 > 0 ) {

317 ià(
	gfNv¬s
==0è
fNv¬s
 = 
ev’tSam¶e
[0]->
G‘NV¬ŸbËs
();

318 
	gfV¬ŸbËImpÜnû
.
»size
(
fNv¬s
);

320 
Log
(è<< 
	gkFATAL
 << ":<BudT»e>ƒv’t§m¶Siz=ğ0 " << 
	gEndl
;

322 
DoubË_t
 
	gs
=0, 
	gb
=0;

323 
DoubË_t
 
	gsuw
=0, 
	gbuw
=0;

324 
DoubË_t
 
	gsub
=0, 
	gbub
=0;

325 
DoubË_t
 
	grg‘
=0, 
	grg‘2
=0;

326 
Flßt_t
 *
	gxmš
 = 
Ãw
 Flßt_t[
fNv¬s
];

327 
Flßt_t
 *
	gxmax
 = 
Ãw
 Flßt_t[
fNv¬s
];

328 
UIÁ_t
 
	giv¬
=0; iv¬<
	gfNv¬s
; ivar++) {

329 
	gxmš
[
iv¬
]=
xmax
[ivar]=0;

331 
UIÁ_t
 
	g›v
=0; iev<
	gev’tSam¶e
.
size
(); iev++) {

332 cÚ¡ 
	gTMVA
::
Ev’t
* 
evt
 = 
ev’tSam¶e
[
›v
];

333 cÚ¡ 
DoubË_t
 
	gweight
 = 
evt
->
G‘Weight
();

334 cÚ¡ 
DoubË_t
 
	gÜgWeight
 = 
evt
->
G‘Origš®Weight
();

335 ià(
	gevt
->
G‘CÏss
(è=ğ
fSigCÏss
) {

336 
s
 +ğ
weight
;

337 
	gsuw
 += 1;

338 
	gsub
 +ğ
ÜgWeight
;

341 
	gb
 +ğ
weight
;

342 
	gbuw
 += 1;

343 
	gbub
 +ğ
ÜgWeight
;

345 iàĞ
DoReg»ssiÚ
() ) {

346 cÚ¡ 
DoubË_t
 
	gtgt
 = 
evt
->
G‘T¬g‘
(0);

347 
	grg‘
 +=
weight
*
tgt
;

348 
	grg‘2
+=
weight
*
tgt
*tgt;

351 
UIÁ_t
 
	giv¬
=0; iv¬<
	gfNv¬s
; ivar++) {

352 cÚ¡ 
DoubË_t
 
	gv®
 = 
evt
->
G‘V®ueFa¡
(
iv¬
);

353 ià(
	g›v
==0è
xmš
[
iv¬
]=
xmax
[iv¬]=
v®
;

354 ià(
	gv®
 < 
	gxmš
[
iv¬
]èxmš[iv¬]=
v®
;

355 ià(
	gv®
 > 
	gxmax
[
iv¬
]èxmax[iv¬]=
v®
;

360 ià(
	gs
+
	gb
 < 0) {

361 
Log
(è<< 
	gkWARNING
 << " One ofhe Decision Tree‚odes has‚egativeotal‚umber of signal or backgroundƒvents. "

362 << "(Nsig="<<
	gs
<<" Nbkg="<<
	gb
<<" Probably you use‡ Monte Carlo with‚egative weights. That should in…rinciple "

364 << "mšim®‚umb” oà(unweigh‹dèev’t demªded fÜ‡»nod(cu¼’y you u£: MšNodeSize="<<
	gfMšNodeSize


366 << "tØ®low fÜ„—sÚabË‡v”agšg!!!" << 
	gEndl


368 << "w™h‚eg©ivweighˆšhŒaššg." << 
	gEndl
;

369 
	gnBkg
=0.;

370 
UIÁ_t
 
	gi
=0; i<
	gev’tSam¶e
.
size
(); i++) {

371 ià(
	gev’tSam¶e
[
i
]->
G‘CÏss
(è!ğ
fSigCÏss
) {

372 
nBkg
 +ğ
ev’tSam¶e
[
i
]->
G‘Weight
();

373 
Log
(è<< 
	gkDEBUG
 << "Ev’ˆ"<< 
	gi
<< " ha (Üigš®èweight: " << 
	gev’tSam¶e
[
i
]->
G‘Weight
()/ev’tSam¶e[i]->
G‘Boo¡Weight
()

374 << " boo¡Weight: " << 
	gev’tSam¶e
[
i
]->
G‘Boo¡Weight
(è<< 
	gEndl
;

377 
Log
(è<< 
	gkDEBUG
 << "h© give šÙ®: " << 
	gnBkg
<<
	gEndl
;

380 
	gnode
->
S‘NSigEv’ts
(
s
);

381 
	gnode
->
S‘NBkgEv’ts
(
b
);

382 
	gnode
->
S‘NSigEv’ts_unweigh‹d
(
suw
);

383 
	gnode
->
S‘NBkgEv’ts_unweigh‹d
(
buw
);

384 
	gnode
->
S‘NSigEv’ts_unboo¡ed
(
sub
);

385 
	gnode
->
S‘NBkgEv’ts_unboo¡ed
(
bub
);

386 
	gnode
->
S‘Pur™y
();

387 ià(
	gnode
 =ğ
this
->
G‘RoÙ
()) {

388 
node
->
S‘NEv’ts
(
s
+
b
);

389 
	gnode
->
S‘NEv’ts_unweigh‹d
(
suw
+
buw
);

390 
	gnode
->
S‘NEv’ts_unboo¡ed
(
sub
+
bub
);

392 
UIÁ_t
 
	giv¬
=0; iv¬<
	gfNv¬s
; ivar++) {

393 
	gnode
->
S‘Sam¶eMš
(
iv¬
,
xmš
[ivar]);

394 
	gnode
->
S‘Sam¶eMax
(
iv¬
,
xmax
[ivar]);

396 
	gd–‘e
[] 
	gxmš
;

397 
	gd–‘e
[] 
	gxmax
;

410 ià((
	gev’tSam¶e
.
size
(è>ğ2*
fMšSize
 && 
s
+
b
 >ğ2*fMšSizeè&& 
node
->
G‘D•th
(è< 
fMaxD•th


411 && ( ( 
s
!=0 && 
b
 !=0 && !
DoReg»ssiÚ
()) || ( (s+b)!=0 && DoRegression()) ) ) {

412 
DoubË_t
 
£·¿tiÚGaš
;

413 ià(
	gfNCuts
 > 0){

414 
	g£·¿tiÚGaš
 = 
this
->
T¿šNodeFa¡
(
ev’tSam¶e
, 
node
);

416 
	g£·¿tiÚGaš
 = 
this
->
T¿šNodeFuÎ
(
ev’tSam¶e
, 
node
);

418 ià(
	g£·¿tiÚGaš
 < 
	g¡d
::
num”ic_lim™s
<>::
•sÚ
()) {

422 ià(
DoReg»ssiÚ
()) {

423 
node
->
S‘S•¬©iÚIndex
(
fRegTy³
->
G‘S•¬©iÚIndex
(
s
+
b
,
rg‘
,
rg‘2
));

424 
	gnode
->
S‘Re¥Ú£
(
rg‘
/(
s
+
b
));

425 ifĞ
®mo¡_equ®_doubË
(
rg‘2
/(
s
+
b
),
rg‘
/(s+b)*target/(s+b)) ){

426 
	gnode
->
S‘RMS
(0);

428 
	gnode
->
S‘RMS
(
TM©h
::
Sq¹
(
rg‘2
/(
s
+
b
è- 
rg‘
/(s+b)*target/(s+b)));

432 
	gnode
->
S‘S•¬©iÚIndex
(
fS•Ty³
->
G‘S•¬©iÚIndex
(
s
,
b
));

434 ià(
	gnode
->
G‘Pur™y
(è> 
	gfNodePur™yLim™
ènode->
S‘NodeTy³
(1);

435 
	gnode
->
S‘NodeTy³
(-1);

437 ià(
	gnode
->
G‘D•th
(è> 
	gthis
->
G‘TÙ®T»eD•th
()èthis->
S‘TÙ®T»eD•th
(
node
->GetDepth());

441 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
ËáSam¶e
; 
	gËáSam¶e
.
»£rve
(
Ãv’ts
);

442 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
rightSam¶e
; 
	grightSam¶e
.
»£rve
(
Ãv’ts
);

444 
DoubË_t
 
	gnRight
=0, 
	gnLeá
=0;

445 
DoubË_t
 
	gnRightUnBoo¡ed
=0, 
	gnLeáUnBoo¡ed
=0;

447 
UIÁ_t
 
	g›
=0; ie< 
	gÃv’ts
 ; ie++) {

448 ià(
	gnode
->
GÛsRight
(*
ev’tSam¶e
[
›
])) {

449 
	grightSam¶e
.
push_back
(
ev’tSam¶e
[
›
]);

450 
	gnRight
 +ğ
ev’tSam¶e
[
›
]->
G‘Weight
();

451 
	gnRightUnBoo¡ed
 +ğ
ev’tSam¶e
[
›
]->
G‘Origš®Weight
();

454 
	gËáSam¶e
.
push_back
(
ev’tSam¶e
[
›
]);

455 
	gnLeá
 +ğ
ev’tSam¶e
[
›
]->
G‘Weight
();

456 
	gnLeáUnBoo¡ed
 +ğ
ev’tSam¶e
[
›
]->
G‘Origš®Weight
();

461 ià(
	gËáSam¶e
.
em±y
(è|| 
	grightSam¶e
.empty()) {

463 
Log
(è<< 
	gkERROR
 << "<T¿šNode>‡Îƒv’t w’ˆtØth§mb¿nch" << 
	gEndl


464 << "--- H’û‚ew‚od=ğŞd‚od... check" << 
	gEndl


465 << "---†eá:" << 
	gËáSam¶e
.
size
()

466 << "„ight:" << 
	grightSam¶e
.
size
(è<< 
	gEndl


467 << " whth£·¿tiÚ i thoughˆtØb" << 
	g£·¿tiÚGaš


468 << "\Àwh’ cu‰šg oÀv¬ŸbË " << 
	gnode
->
G‘S–eùÜ
()

469 << "‡ˆv®u" << 
	gnode
->
G‘CutV®ue
()

470 << 
	gkFATAL
 << "---hi should‚ev” h­³n,…Ëa£ wr™¨bug„•ÜˆtØH–ge.Voss@ûº.ch" << 
	gEndl
;

475 
	gTMVA
::
DecisiÚT»eNode
 *
rightNode
 = 
Ãw
 
TMVA
::DecisiÚT»eNode(
node
,'r');

476 
	gfNNodes
++;

477 
	grightNode
->
S‘NEv’ts
(
nRight
);

478 
	grightNode
->
S‘NEv’ts_unboo¡ed
(
nRightUnBoo¡ed
);

479 
	grightNode
->
S‘NEv’ts_unweigh‹d
(
rightSam¶e
.
size
());

481 
	gTMVA
::
DecisiÚT»eNode
 *
ËáNode
 = 
Ãw
 
TMVA
::DecisiÚT»eNode(
node
,'l');

483 
	gfNNodes
++;

484 
	gËáNode
->
S‘NEv’ts
(
nLeá
);

485 
	gËáNode
->
S‘NEv’ts_unboo¡ed
(
nLeáUnBoo¡ed
);

486 
	gËáNode
->
S‘NEv’ts_unweigh‹d
(
ËáSam¶e
.
size
());

488 
	gnode
->
S‘NodeTy³
(0);

489 
	gnode
->
S‘Leá
(
ËáNode
);

490 
	gnode
->
S‘Right
(
rightNode
);

492 
	gthis
->
BudT»e
(
rightSam¶e
, 
rightNode
);

493 
	gthis
->
BudT»e
(
ËáSam¶e
, 
ËáNode
 );

498 ià(
DoReg»ssiÚ
()) {

499 
	gnode
->
S‘S•¬©iÚIndex
(
fRegTy³
->
G‘S•¬©iÚIndex
(
s
+
b
,
rg‘
,
rg‘2
));

500 
	gnode
->
S‘Re¥Ú£
(
rg‘
/(
s
+
b
));

501 ifĞ
®mo¡_equ®_doubË
(
rg‘2
/(
s
+
b
), 
rg‘
/(s+b)*target/(s+b)) ) {

502 
	gnode
->
S‘RMS
(0);

504 
	gnode
->
S‘RMS
(
TM©h
::
Sq¹
(
rg‘2
/(
s
+
b
è- 
rg‘
/(s+b)*target/(s+b)));

508 
	gnode
->
S‘S•¬©iÚIndex
(
fS•Ty³
->
G‘S•¬©iÚIndex
(
s
,
b
));

509 ià(
	gnode
->
G‘Pur™y
(è> 
	gfNodePur™yLim™
ènode->
S‘NodeTy³
(1);

510 
	gnode
->
S‘NodeTy³
(-1);

519 ià(
	gnode
->
G‘D•th
(è> 
	gthis
->
G‘TÙ®T»eD•th
()èthis->
S‘TÙ®T»eD•th
(
node
->GetDepth());

523  
	gfNNodes
;

530 
	gTMVA
::
DecisiÚT»e
::
FlT»e
ĞcÚ¡ 
¡d
::
veùÜ
<
TMVA
::
Ev’t
*> & 
ev’tSam¶e
 )

532 
UIÁ_t
 
i
=0; 
	gi
<
	gev’tSam¶e
.
size
(); i++) {

533 
	gthis
->
FlEv’t
(*(
ev’tSam¶e
[
i
]),
NULL
);

541 
	gTMVA
::
DecisiÚT»e
::
	$FlEv’t
ĞcÚ¡ 
TMVA
::
Ev’t
 & 
ev’t
,

542 
TMVA
::
DecisiÚT»eNode
 *
node
 )

544 ià(
node
 =ğ
NULL
) {

545 
node
 = 
this
->
	`G‘RoÙ
();

548 
node
->
	`Inüem’tNEv’ts
Ğ
ev’t
.
	`G‘Weight
() );

549 
node
->
	`Inüem’tNEv’ts_unweigh‹d
( );

551 ià(
ev’t
.
	`G‘CÏss
(è=ğ
fSigCÏss
) {

552 
node
->
	`Inüem’tNSigEv’ts
Ğ
ev’t
.
	`G‘Weight
() );

553 
node
->
	`Inüem’tNSigEv’ts_unweigh‹d
( );

556 
node
->
	`Inüem’tNBkgEv’ts
Ğ
ev’t
.
	`G‘Weight
() );

557 
node
->
	`Inüem’tNBkgEv’ts_unweigh‹d
( );

559 
node
->
	`S‘S•¬©iÚIndex
(
fS•Ty³
->
	`G‘S•¬©iÚIndex
Òode->
	`G‘NSigEv’ts
(),

560 
node
->
	`G‘NBkgEv’ts
()));

562 ià(
node
->
	`G‘NodeTy³
() == 0) {

563 ià(
node
->
	`GÛsRight
(
ev’t
))

564 
this
->
	`FlEv’t
(
ev’t
,
¡©ic_ÿ¡
<
TMVA
::
DecisiÚT»eNode
*>(
node
->
	`G‘Right
())) ;

566 
this
->
	`FlEv’t
(
ev’t
,
¡©ic_ÿ¡
<
TMVA
::
DecisiÚT»eNode
*>(
node
->
	`G‘Leá
())) ;

568 
	}
}

573 
	gTMVA
::
DecisiÚT»e
::
	$CË¬T»e
()

575 ià(
this
->
	`G‘RoÙ
()!=
NULL
èthis->G‘RoÙ()->
	`CË¬NodeAndAÎDaugh‹rs
();

577 
	}
}

587 
UIÁ_t
 
	gTMVA
::
DecisiÚT»e
::
	$CËªT»e
Ğ
DecisiÚT»eNode
 *
node
 )

589 ià(
node
==
NULL
) {

590 
node
 = 
this
->
	`G‘RoÙ
();

593 
DecisiÚT»eNode
 *
l
 = 
node
->
	`G‘Leá
();

594 
DecisiÚT»eNode
 *
r
 = 
node
->
	`G‘Right
();

596 ià(
node
->
	`G‘NodeTy³
() == 0) {

597 
this
->
	`CËªT»e
(
l
);

598 
this
->
	`CËªT»e
(
r
);

599 ià(
l
->
	`G‘NodeTy³
(è* 
r
->GetNodeType() > 0) {

601 
this
->
	`PruÃNode
(
node
);

605  
this
->
	`CouÁNodes
();

607 
	}
}

614 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$PruÃT»e
ĞcÚ¡ 
Ev’tCÚ¡Li¡
* 
v®id©iÚSam¶e
 )

616 
IPruÃToŞ
* 
	`toŞ
(
NULL
);

617 
PrunšgInfo
* 
	`šfo
(
NULL
);

619 ifĞ
fPruÃM‘hod
 =ğ
kNoPrunšg
 )  0.0;

621 ià(
fPruÃM‘hod
 =ğ
kEx³ùedE¼ÜPrunšg
)

623 
toŞ
 = 
Ãw
 
	`Ex³ùedE¼ÜPruÃToŞ
();

624 ià(
fPruÃM‘hod
 =ğ
kCo¡Com¶ex™yPrunšg
)

626 
toŞ
 = 
Ãw
 
	`Co¡Com¶ex™yPruÃToŞ
();

629 
	`Log
(è<< 
kFATAL
 << "Selected…runing method‚ot yet implemented "

630 << 
Endl
;

633 if(!
toŞ
)  0.0;

635 
toŞ
->
	`S‘PruÃSŒ’gth
(
	`G‘PruÃSŒ’gth
());

636 if(
toŞ
->
	`IsAutom©ic
()) {

637 if(
v®id©iÚSam¶e
 =ğ
NULL
){

638 
	`Log
(è<< 
kFATAL
 << "Cannot‡utomatehe…runing‡lgorithm without‡n "

639 << "šd•’d’ˆv®id©iÚ sam¶e!" << 
Endl
;

640 }if(
v®id©iÚSam¶e
->
	`size
() == 0) {

641 
	`Log
(è<< 
kFATAL
 << "Cannot‡utomatehe…runing‡lgorithm with "

642 << "šd•’d’ˆv®id©iÚ sam¶oàZEROƒv’ts!" << 
Endl
;

646 
šfo
 = 
toŞ
->
	`C®cuÏ‹PrunšgInfo
(
this
,
v®id©iÚSam¶e
);

647 
DoubË_t
 
´uÃSŒ’gth
=0;

648 if(!
šfo
) {

649 
	`Log
(è<< 
kFATAL
 << "Error…runingree! Check…rune.log for more information."

650 << 
Endl
;

652 
´uÃSŒ’gth
 = 
šfo
->
PruÃSŒ’gth
;

658 
UIÁ_t
 
i
 = 0; i < 
šfo
->
PruÃSequ’û
.
	`size
(); ++i) {

660 
	`PruÃNode
(
šfo
->
PruÃSequ’û
[
i
]);

663 
this
->
	`CouÁNodes
();

666 
d–‘e
 
toŞ
;

667 
d–‘e
 
šfo
;

669  
´uÃSŒ’gth
;

670 
	}
};

679 
	gTMVA
::
DecisiÚT»e
::
	$AµlyV®id©iÚSam¶e
ĞcÚ¡ 
Ev’tCÚ¡Li¡
* 
v®id©iÚSam¶e
 ) const

681 
	`G‘RoÙ
()->
	`Re£tV®id©iÚD©a
();

682 
UIÁ_t
 
›vt
=0; ievˆ< 
v®id©iÚSam¶e
->
	`size
(); ievt++) {

683 
	`CheckEv’tW™hPruÃdT»e
((*
v®id©iÚSam¶e
)[
›vt
]);

685 
	}
}

693 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$Te¡PruÃdT»eQu®™y
ĞcÚ¡ 
DecisiÚT»eNode
* 
n
, 
IÁ_t
 
mode
 ) const

695 ià(
n
 =ğ
NULL
) {

696 
n
 = 
this
->
	`G‘RoÙ
();

697 ià(
n
 =ğ
NULL
) {

698 
	`Log
(è<< 
kFATAL
 << "Te¡PruÃdT»eQu®™y: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

703 ifĞ
n
->
	`G‘Leá
(è!ğ
NULL
 &&‚->
	`G‘Right
(è!ğNULL && !n->
	`IsT”mš®
() ) {

704  (
	`Te¡PruÃdT»eQu®™y
Ğ
n
->
	`G‘Leá
(), 
mode
 ) +

705 
	`Te¡PruÃdT»eQu®™y
Ğ
n
->
	`G‘Right
(), 
mode
 ));

708 ià(
	`DoReg»ssiÚ
()) {

709 
DoubË_t
 
sumw
 = 
n
->
	`G‘NSV®id©iÚ
(è+‚->
	`G‘NBV®id©iÚ
();

710  
n
->
	`G‘SumT¬g‘2
(è- 2*n->
	`G‘SumT¬g‘
()*n->
	`G‘Re¥Ú£
(è+ 
sumw
*n->GetResponse()*n->GetResponse();

713 ià(
mode
 == 0) {

714 ià(
n
->
	`G‘Pur™y
(è> 
this
->
	`G‘NodePur™yLim™
())

715  
n
->
	`G‘NBV®id©iÚ
();

717  
n
->
	`G‘NSV®id©iÚ
();

719 iàĞ
mode
 == 1 ) {

721  (
n
->
	`G‘Pur™y
(è*‚->
	`G‘NBV®id©iÚ
(è+ (1.0 -‚->G‘Pur™y()è*‚->
	`G‘NSV®id©iÚ
());

724 
throw
 
¡d
::
	`¡ršg
("Unknown ValidationQualityMode");

728 
	}
}

735 
	gTMVA
::
DecisiÚT»e
::
	$CheckEv’tW™hPruÃdT»e
ĞcÚ¡ 
Ev’t
* 
e
 ) const

737 
DecisiÚT»eNode
* 
cu¼’t
 = 
this
->
	`G‘RoÙ
();

738 ià(
cu¼’t
 =ğ
NULL
) {

739 
	`Log
(è<< 
kFATAL
 << "CheckEv’tW™hPruÃdT»e: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

742 
cu¼’t
 !ğ
NULL
) {

743 if(
e
->
	`G‘CÏss
(è=ğ
fSigCÏss
)

744 
cu¼’t
->
	`S‘NSV®id©iÚ
(cu¼’t->
	`G‘NSV®id©iÚ
(è+ 
e
->
	`G‘Weight
());

746 
cu¼’t
->
	`S‘NBV®id©iÚ
(cu¼’t->
	`G‘NBV®id©iÚ
(è+ 
e
->
	`G‘Weight
());

748 ià(
e
->
	`G‘NT¬g‘s
() > 0) {

749 
cu¼’t
->
	`AddToSumT¬g‘
(
e
->
	`G‘Weight
()*e->
	`G‘T¬g‘
(0));

750 
cu¼’t
->
	`AddToSumT¬g‘2
(
e
->
	`G‘Weight
()*e->
	`G‘T¬g‘
(0)*e->GetTarget(0));

753 ià(
cu¼’t
->
	`G‘Right
(è=ğ
NULL
 || cu¼’t->
	`G‘Leá
() == NULL) {

754 
cu¼’t
 = 
NULL
;

757 ià(
cu¼’t
->
	`GÛsRight
(*
e
))

758 
cu¼’t
 = (
TMVA
::
DecisiÚT»eNode
*)cu¼’t->
	`G‘Right
();

760 
cu¼’t
 = (
TMVA
::
DecisiÚT»eNode
*)cu¼’t->
	`G‘Leá
();

763 
	}
}

768 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$G‘SumWeights
ĞcÚ¡ 
Ev’tCÚ¡Li¡
* 
v®id©iÚSam¶e
 ) const

770 
DoubË_t
 
sumWeights
 = 0.0;

771  
Ev’tCÚ¡Li¡
::
cÚ¡_™”©Ü
 
™
 = 
v®id©iÚSam¶e
->
	`begš
();

772 
™
 !ğ
v®id©iÚSam¶e
->
	`’d
(); ++it ) {

773 
sumWeights
 +ğ(*
™
)->
	`G‘Weight
();

775  
sumWeights
;

776 
	}
}

781 
UIÁ_t
 
	gTMVA
::
DecisiÚT»e
::
	$CouÁL—fNodes
Ğ
TMVA
::
Node
 *
n
 )

783 ià(
n
 =ğ
NULL
) {

784 
n
 = 
this
->
	`G‘RoÙ
();

785 ià(
n
 =ğ
NULL
) {

786 
	`Log
(è<< 
kFATAL
 << "CouÁL—fNodes: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

791 
UIÁ_t
 
couÁL—fs
=0;

793 ià((
this
->
	`G‘LeáDaugh‹r
(
n
è=ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) == NULL) ) {

794 
couÁL—fs
 += 1;

797 ià(
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
) {

798 
couÁL—fs
 +ğ
this
->
	`CouÁL—fNodes
Ğthis->
	`G‘LeáDaugh‹r
(
n
) );

800 ià(
this
->
	`G‘RightDaugh‹r
(
n
è!ğ
NULL
) {

801 
couÁL—fs
 +ğ
this
->
	`CouÁL—fNodes
Ğthis->
	`G‘RightDaugh‹r
(
n
) );

804  
couÁL—fs
;

805 
	}
}

810 
	gTMVA
::
DecisiÚT»e
::
	$DesûndT»e
Ğ
Node
* 
n
 )

812 ià(
n
 =ğ
NULL
) {

813 
n
 = 
this
->
	`G‘RoÙ
();

814 ià(
n
 =ğ
NULL
) {

815 
	`Log
(è<< 
kFATAL
 << "DesûndT»e: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

820 ià((
this
->
	`G‘LeáDaugh‹r
(
n
è=ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) == NULL) ) {

823 ià((
this
->
	`G‘LeáDaugh‹r
(
n
è=ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) != NULL) ) {

824 
	`Log
(è<< 
kFATAL
 << " Nodw™h oÆy oÃ daugh‹r?? Som‘hšg w’ˆwrÚg" << 
Endl
;

827 ià((
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
è&& (this->
	`G‘RightDaugh‹r
(n) == NULL) ) {

828 
	`Log
(è<< 
kFATAL
 << " Nodw™h oÆy oÃ daugh‹r?? Som‘hšg w’ˆwrÚg" << 
Endl
;

832 ià(
this
->
	`G‘LeáDaugh‹r
(
n
è!ğ
NULL
) {

833 
this
->
	`DesûndT»e
Ğthis->
	`G‘LeáDaugh‹r
(
n
) );

835 ià(
this
->
	`G‘RightDaugh‹r
(
n
è!ğ
NULL
) {

836 
this
->
	`DesûndT»e
Ğthis->
	`G‘RightDaugh‹r
(
n
) );

839 
	}
}

844 
	gTMVA
::
DecisiÚT»e
::
	$PruÃNode
Ğ
DecisiÚT»eNode
* 
node
 )

846 
DecisiÚT»eNode
 *
l
 = 
node
->
	`G‘Leá
();

847 
DecisiÚT»eNode
 *
r
 = 
node
->
	`G‘Right
();

849 
node
->
	`S‘Right
(
NULL
);

850 
node
->
	`S‘Leá
(
NULL
);

851 
node
->
	`S‘S–eùÜ
(-1);

852 
node
->
	`S‘S•¬©iÚGaš
(-1);

853 ià(
node
->
	`G‘Pur™y
(è> 
fNodePur™yLim™
ènode->
	`S‘NodeTy³
(1);

854 
node
->
	`S‘NodeTy³
(-1);

855 
this
->
	`D–‘eNode
(
l
);

856 
this
->
	`D–‘eNode
(
r
);

858 
this
->
	`CouÁNodes
();

860 
	}
}

867 
	gTMVA
::
DecisiÚT»e
::
	$PruÃNodeInPÏû
Ğ
DecisiÚT»eNode
* 
node
 ) {

868 if(
node
 =ğ
NULL
) ;

869 
node
->
	`S‘NT”mš®
(1);

870 
node
->
	`S‘SubT»eR
Ğnode->
	`G‘NodeR
() );

871 
node
->
	`S‘AÍha
Ğ
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ) );

872 
node
->
	`S‘AÍhaMšSubŒ“
Ğ
¡d
::
num”ic_lim™s
<>::
	`šfš™y
( ) );

873 
node
->
	`S‘T”mš®
(
kTRUE
);

874 
	}
}

881 
	gTMVA
::
Node
* 
TMVA
::
DecisiÚT»e
::
	$G‘Node
Ğ
ULÚg_t
 
£qu’û
, 
UIÁ_t
 
d•th
 )

883 
Node
* 
cu¼’t
 = 
this
->
	`G‘RoÙ
();

885 
UIÁ_t
 
i
 =0; i < 
d•th
; i++) {

886 
ULÚg_t
 
tmp
 = 1 << 
i
;

887 iàĞ
tmp
 & 
£qu’û
è
cu¼’t
 = 
this
->
	`G‘RightDaugh‹r
(current);

888 
cu¼’t
 = 
this
->
	`G‘LeáDaugh‹r
(current);

891  
cu¼’t
;

892 
	}
}

897 
	gTMVA
::
DecisiÚT»e
::
	$G‘Rªdomi£dV¬ŸbËs
(
BoŞ_t
 *
u£V¬ŸbË
, 
UIÁ_t
 *
m­V¬ŸbË
, UIÁ_ˆ&
u£Nv¬s
){

898 
UIÁ_t
 
iv¬
=0; iv¬<
fNv¬s
; iv¬++è
u£V¬ŸbË
[iv¬]=
kFALSE
;

899 ià(
fU£Nv¬s
==0) {

901 
fU£Nv¬s
 = 
	`UIÁ_t
(
TM©h
::
	`Sq¹
(
fNv¬s
)+0.6);

903 ià(
fU£PoissÚNv¬s
è
u£Nv¬s
=
TM©h
::
	`Mš
(
fNv¬s
,TM©h::
	`Max
(
	`UIÁ_t
(1),(
UIÁ_t
è
fMyT¿ndom
->
	`PoissÚ
(
fU£Nv¬s
)));

904 
u£Nv¬s
 = 
fU£Nv¬s
;

906 
UIÁ_t
 
nS–eùedV¬s
 = 0;

907 
nS–eùedV¬s
 < 
u£Nv¬s
) {

908 
DoubË_t
 
bÏ
 = 
fMyT¿ndom
->
	`Rndm
()*
fNv¬s
;

909 
u£V¬ŸbË
[
	`IÁ_t
 (
bÏ
)] = 
kTRUE
;

910 
nS–eùedV¬s
 = 0;

911 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

912 ià(
u£V¬ŸbË
[
iv¬
] =ğ
kTRUE
) {

913 
m­V¬ŸbË
[
nS–eùedV¬s
] = 
iv¬
;

914 
nS–eùedV¬s
++;

918 ià(
nS–eùedV¬s
 !ğ
u£Nv¬s
è{ 
¡d
::
cout
 << "Bug iÀT¿šNod- G‘Rªdi£dV¬ŸbËs()... sÜry" << std::
’dl
; std::
	`ex™
(1);}

919 
	}
}

930 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$T¿šNodeFa¡
ĞcÚ¡ 
Ev’tCÚ¡Li¡
 & 
ev’tSam¶e
,

931 
TMVA
::
DecisiÚT»eNode
 *
node
 )

933 
DoubË_t
 
£·¿tiÚGašTÙ®
 = -1, 
£pTmp
;

934 
DoubË_t
 *
£·¿tiÚGaš
 = 
Ãw
 DoubË_t[
fNv¬s
+1];

935 
IÁ_t
 *
cutIndex
 = 
Ãw
 IÁ_t[
fNv¬s
+1];

937 
UIÁ_t
 
iv¬
=0; iv¬ <ğ
fNv¬s
; ivar++) {

938 
£·¿tiÚGaš
[
iv¬
]=-1;

939 
cutIndex
[
iv¬
]=-1;

941 
IÁ_t
 
mxV¬
 = -1;

942 
BoŞ_t
 
cutTy³
 = 
kTRUE
;

943 
DoubË_t
 
nTÙS
, 
nTÙB
;

944 
IÁ_t
 
nTÙS_unWeigh‹d
, 
nTÙB_unWeigh‹d
;

945 
UIÁ_t
 
Ãv’ts
 = 
ev’tSam¶e
.
	`size
();

950 
BoŞ_t
 *
u£V¬ŸbË
 = 
Ãw
 BoŞ_t[
fNv¬s
+1];

951 
UIÁ_t
 *
m­V¬ŸbË
 = 
Ãw
 UIÁ_t[
fNv¬s
+1];

953 
¡d
::
veùÜ
<
DoubË_t
> 
fish”CÛff
;

955 ià(
fRªdomi£dT»e
) {

956 
UIÁ_t
 
tmp
=
fU£Nv¬s
;

957 
	`G‘Rªdomi£dV¬ŸbËs
(
u£V¬ŸbË
,
m­V¬ŸbË
,
tmp
);

960 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

961 
u£V¬ŸbË
[
iv¬
] = 
kTRUE
;

962 
m­V¬ŸbË
[
iv¬
] = ivar;

965 
u£V¬ŸbË
[
fNv¬s
] = 
kFALSE
;

967 
BoŞ_t
 
fish”OK
 = 
kFALSE
;

968 ià(
fU£Fish”Cuts
) {

969 
u£V¬ŸbË
[
fNv¬s
] = 
kTRUE
;

973 
BoŞ_t
 *
u£V¬InFish”
 = 
Ãw
 BoŞ_t[
fNv¬s
];

974 
UIÁ_t
 *
m­V¬InFish”
 = 
Ãw
 UIÁ_t[
fNv¬s
];

975 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

976 
u£V¬InFish”
[
iv¬
] = 
kFALSE
;

977 
m­V¬InFish”
[
iv¬
] = ivar;

980 
¡d
::
veùÜ
<
TM©rixDSym
*>* 
covM©riûs
;

981 
covM©riûs
 = 
	`gToŞs
().
	`C®cCov¬ŸnûM©riûs
Ğ
ev’tSam¶e
, 2 );

982 ià(!
covM©riûs
){

983 
	`Log
(è<< 
kWARNING
 << " iÀT¿šNodeFa¡,hcov¬Ÿnû M©riû Ãeded fÜhFish”-Cut »tuºedƒ¼Ü -->„ev”ˆtØju¡‚Üm® cut fÜhi node" << 
Endl
;

984 
fish”OK
 = 
kFALSE
;

986 
TM©rixD
 *
ss
 = 
Ãw
 
	`TM©rixD
(*(
covM©riûs
->
	`©
(0)));

987 
TM©rixD
 *
bb
 = 
Ãw
 
	`TM©rixD
(*(
covM©riûs
->
	`©
(1)));

988 cÚ¡ 
TM©rixD
 *
s
 = 
	`gToŞs
().
	`G‘CÜ»ÏtiÚM©rix
(
ss
);

989 cÚ¡ 
TM©rixD
 *
b
 = 
	`gToŞs
().
	`G‘CÜ»ÏtiÚM©rix
(
bb
);

991 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

992 
UIÁ_t
 
jv¬
=
iv¬
+1; jv¬ < 
fNv¬s
; jvar++) {

993 iàĞĞ
TM©h
::
	`Abs
Ğ(*
s
)(
iv¬
, 
jv¬
)è> 
fMšLšCÜrFÜFish”
) ||

994 Ğ
TM©h
::
	`Abs
Ğ(*
b
)(
iv¬
, 
jv¬
)è> 
fMšLšCÜrFÜFish”
) ){

995 
u£V¬InFish”
[
iv¬
] = 
kTRUE
;

996 
u£V¬InFish”
[
jv¬
] = 
kTRUE
;

1003 
UIÁ_t
 
nFish”V¬s
 = 0;

1004 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

1007 ià(
u£V¬InFish”
[
iv¬
] && 
u£V¬ŸbË
[ivar]) {

1008 
m­V¬InFish”
[
nFish”V¬s
++]=
iv¬
;

1011 ià(
fU£ExşusiveV¬s
è
u£V¬ŸbË
[
iv¬
] = 
kFALSE
;

1016 
fish”CÛff
 = 
this
->
	`G‘Fish”CÛffic›Ás
(
ev’tSam¶e
, 
nFish”V¬s
, 
m­V¬InFish”
);

1017 
fish”OK
 = 
kTRUE
;

1019 
d–‘e
 [] 
u£V¬InFish”
;

1020 
d–‘e
 [] 
m­V¬InFish”
;

1025 
UIÁ_t
 
cNv¬s
 = 
fNv¬s
;

1026 ià(
fU£Fish”Cuts
 && 
fish”OK
è
cNv¬s
++;

1028 
UIÁ_t
* 
nBšs
 = 
Ãw
 UIÁ_ˆ[
cNv¬s
];

1029 
DoubË_t
* 
bšWidth
 = 
Ãw
 DoubË_ˆ[
cNv¬s
];

1030 
DoubË_t
* 
švBšWidth
 = 
Ãw
 DoubË_ˆ[
cNv¬s
];

1032 
DoubË_t
** 
nS–S
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1033 
DoubË_t
** 
nS–B
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1034 
DoubË_t
** 
nS–S_unWeigh‹d
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1035 
DoubË_t
** 
nS–B_unWeigh‹d
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1036 
DoubË_t
** 
rg‘
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1037 
DoubË_t
** 
rg‘2
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1038 
DoubË_t
** 
cutV®ues
 = 
Ãw
 DoubË_t* [
cNv¬s
];

1040 
UIÁ_t
 
iv¬
=0; iv¬<
cNv¬s
; ivar++) {

1041 
nBšs
[
iv¬
] = 
fNCuts
+1;

1042 ià(
iv¬
 < 
fNv¬s
) {

1043 ià(
fD©aS‘Info
->
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘V¬Ty³
() == 'I') {

1044 
nBšs
[
iv¬
] = 
node
->
	`G‘Sam¶eMax
(iv¬è-‚ode->
	`G‘Sam¶eMš
(ivar) + 1;

1048 
nS–S
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1049 
nS–B
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1050 
nS–S_unWeigh‹d
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1051 
nS–B_unWeigh‹d
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1052 
rg‘
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1053 
rg‘2
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1054 
cutV®ues
[
iv¬
] = 
Ãw
 
DoubË_t
 [
nBšs
[ivar]];

1058 
DoubË_t
 *
xmš
 = 
Ãw
 DoubË_t[
cNv¬s
];

1059 
DoubË_t
 *
xmax
 = 
Ãw
 DoubË_t[
cNv¬s
];

1061 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1062 ià(
iv¬
 < 
fNv¬s
){

1063 
xmš
[
iv¬
]=
node
->
	`G‘Sam¶eMš
(ivar);

1064 
xmax
[
iv¬
]=
node
->
	`G‘Sam¶eMax
(ivar);

1065 ià(
	`®mo¡_equ®_æßt
(
xmax
[
iv¬
], 
xmš
[ivar])) {

1068 
u£V¬ŸbË
[
iv¬
]=
kFALSE
;

1072 
xmš
[
iv¬
]=999;

1073 
xmax
[
iv¬
]=-999;

1076 
UIÁ_t
 
›v
=0; iev<
Ãv’ts
; iev++) {

1078 
DoubË_t
 
»suÉ
 = 
fish”CÛff
[
fNv¬s
];

1079 
UIÁ_t
 
jv¬
=0; jv¬<
fNv¬s
; jvar++)

1080 
»suÉ
 +ğ
fish”CÛff
[
jv¬
]*(
ev’tSam¶e
[
›v
])->
	`G‘V®ueFa¡
(jvar);

1081 ià(
»suÉ
 > 
xmax
[
iv¬
]) xmax[ivar]=result;

1082 ià(
»suÉ
 < 
xmš
[
iv¬
]) xmin[ivar]=result;

1085 
UIÁ_t
 
ibš
=0; ibš<
nBšs
[
iv¬
]; ibin++) {

1086 
nS–S
[
iv¬
][
ibš
]=0;

1087 
nS–B
[
iv¬
][
ibš
]=0;

1088 
nS–S_unWeigh‹d
[
iv¬
][
ibš
]=0;

1089 
nS–B_unWeigh‹d
[
iv¬
][
ibš
]=0;

1090 
rg‘
[
iv¬
][
ibš
]=0;

1091 
rg‘2
[
iv¬
][
ibš
]=0;

1092 
cutV®ues
[
iv¬
][
ibš
]=0;

1097 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1099 iàĞ
u£V¬ŸbË
[
iv¬
] ) {

1112 
bšWidth
[
iv¬
] = ( 
xmax
[iv¬] - 
xmš
[iv¬] ) / 
	`DoubË_t
(
nBšs
[ivar]);

1113 
švBšWidth
[
iv¬
] = 1./
bšWidth
[ivar];

1114 ià(
iv¬
 < 
fNv¬s
) {

1115 ià(
fD©aS‘Info
->
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘V¬Ty³
(è=ğ'I'è{ 
švBšWidth
[iv¬] = 1; 
bšWidth
[ivar] = 1; }

1123 
UIÁ_t
 
icut
=0; icut<
nBšs
[
iv¬
]-1; icut++) {

1124 
cutV®ues
[
iv¬
][
icut
]=
xmš
[iv¬]+(
	`DoubË_t
(icut+1))*
bšWidth
[ivar];

1130 
nTÙS
=0; 
nTÙB
=0;

1131 
nTÙS_unWeigh‹d
=0; 
nTÙB_unWeigh‹d
=0;

1132 
UIÁ_t
 
›v
=0; iev<
Ãv’ts
; iev++) {

1134 
DoubË_t
 
ev’tWeight
 = 
ev’tSam¶e
[
›v
]->
	`G‘Weight
();

1135 ià(
ev’tSam¶e
[
›v
]->
	`G‘CÏss
(è=ğ
fSigCÏss
) {

1136 
nTÙS
+=
ev’tWeight
;

1137 
nTÙS_unWeigh‹d
++; }

1139 
nTÙB
+=
ev’tWeight
;

1140 
nTÙB_unWeigh‹d
++;

1143 
IÁ_t
 
iBš
=-1;

1144 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1147 iàĞ
u£V¬ŸbË
[
iv¬
] ) {

1148 
DoubË_t
 
ev’tD©a
;

1149 ià(
iv¬
 < 
fNv¬s
è
ev’tD©a
 = 
ev’tSam¶e
[
›v
]->
	`G‘V®ueFa¡
(ivar);

1151 
ev’tD©a
 = 
fish”CÛff
[
fNv¬s
];

1152 
UIÁ_t
 
jv¬
=0; jv¬<
fNv¬s
; jvar++)

1153 
ev’tD©a
 +ğ
fish”CÛff
[
jv¬
]*(
ev’tSam¶e
[
›v
])->
	`G‘V®ueFa¡
(jvar);

1157 
iBš
 = 
TM©h
::
	`Mš
(
	`IÁ_t
(
nBšs
[
iv¬
]-1),TM©h::
	`Max
(0,(
švBšWidth
[iv¬]*(
ev’tD©a
-
xmš
[ivar]) ) ));

1158 ià(
ev’tSam¶e
[
›v
]->
	`G‘CÏss
(è=ğ
fSigCÏss
) {

1159 
nS–S
[
iv¬
][
iBš
]+=
ev’tWeight
;

1160 
nS–S_unWeigh‹d
[
iv¬
][
iBš
]++;

1163 
nS–B
[
iv¬
][
iBš
]+=
ev’tWeight
;

1164 
nS–B_unWeigh‹d
[
iv¬
][
iBš
]++;

1166 ià(
	`DoReg»ssiÚ
()) {

1167 
rg‘
[
iv¬
][
iBš
] +=
ev’tWeight
*
ev’tSam¶e
[
›v
]->
	`G‘T¬g‘
(0);

1168 
rg‘2
[
iv¬
][
iBš
]+=
ev’tWeight
*
ev’tSam¶e
[
›v
]->
	`G‘T¬g‘
(0)*eventSample[iev]->GetTarget(0);

1174 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1175 ià(
u£V¬ŸbË
[
iv¬
]) {

1176 
UIÁ_t
 
ibš
=1; ibš < 
nBšs
[
iv¬
]; ibin++) {

1177 
nS–S
[
iv¬
][
ibš
]+=nSelS[ivar][ibin-1];

1178 
nS–S_unWeigh‹d
[
iv¬
][
ibš
]+=nSelS_unWeighted[ivar][ibin-1];

1179 
nS–B
[
iv¬
][
ibš
]+=nSelB[ivar][ibin-1];

1180 
nS–B_unWeigh‹d
[
iv¬
][
ibš
]+=nSelB_unWeighted[ivar][ibin-1];

1181 ià(
	`DoReg»ssiÚ
()) {

1182 
rg‘
[
iv¬
][
ibš
] +=target[ivar][ibin-1] ;

1183 
rg‘2
[
iv¬
][
ibš
]+=target2[ivar][ibin-1];

1186 ià(
nS–S_unWeigh‹d
[
iv¬
][
nBšs
[iv¬]-1] +
nS–B_unWeigh‹d
[iv¬][nBšs[iv¬]-1] !ğ
ev’tSam¶e
.
	`size
()) {

1187 
	`Log
(è<< 
kFATAL
 << "Helge, you have‡ bug ....nSelS_unw..+nSelB_unw..= "

1188 << 
nS–S_unWeigh‹d
[
iv¬
][
nBšs
[iv¬]-1] +
nS–B_unWeigh‹d
[ivar][nBins[ivar]-1]

1189 << " whev’t§m¶sizğ" << 
ev’tSam¶e
.
	`size
()

1190 << 
Endl
;

1192 
Ï¡Bšs
=
nS–S
[
iv¬
][
nBšs
[iv¬]-1] +
nS–B
[ivar][nBins[ivar]-1];

1193 
tÙ®Sum
=
nTÙS
+
nTÙB
;

1194 ià(
TM©h
::
	`Abs
(
Ï¡Bšs
-
tÙ®Sum
)/totalSum>0.01) {

1195 
	`Log
(è<< 
kFATAL
 << "Helge, you have‡nother bug ....nSelS+nSelB= "

1196 << 
Ï¡Bšs


1197 << " whtÙ®‚umb” oàev’t ğ" << 
tÙ®Sum


1198 << 
Endl
;

1204 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1205 ià(
u£V¬ŸbË
[
iv¬
]) {

1206 
UIÁ_t
 
iBš
=0; iBš<
nBšs
[
iv¬
]-1; iBin++) {

1218 
DoubË_t
 
¦
 = 
nS–S_unWeigh‹d
[
iv¬
][
iBš
];

1219 
DoubË_t
 
bl
 = 
nS–B_unWeigh‹d
[
iv¬
][
iBš
];

1220 
DoubË_t
 
s
 = 
nTÙS_unWeigh‹d
;

1221 
DoubË_t
 
b
 = 
nTÙB_unWeigh‹d
;

1222 
DoubË_t
 
¦W
 = 
nS–S
[
iv¬
][
iBš
];

1223 
DoubË_t
 
blW
 = 
nS–B
[
iv¬
][
iBš
];

1224 
DoubË_t
 
sW
 = 
nTÙS
;

1225 
DoubË_t
 
bW
 = 
nTÙB
;

1226 
DoubË_t
 
¤
 = 
s
-
¦
;

1227 
DoubË_t
 
br
 = 
b
-
bl
;

1228 
DoubË_t
 
¤W
 = 
sW
-
¦W
;

1229 
DoubË_t
 
brW
 = 
bW
-
blW
;

1231 iàĞ((
¦
+
bl
)>=
fMšSize
 && (
¤
+
br
)>=fMinSize)

1232 && ((
¦W
+
blW
)>=
fMšSize
 && (
¤W
+
brW
)>=fMinSize)

1235 ià(
	`DoReg»ssiÚ
()) {

1236 
£pTmp
 = 
fRegTy³
->
	`G‘S•¬©iÚGaš
(
nS–S
[
iv¬
][
iBš
]+
nS–B
[ivar][iBin],

1237 
rg‘
[
iv¬
][
iBš
],
rg‘2
[ivar][iBin],

1238 
nTÙS
+
nTÙB
,

1239 
rg‘
[
iv¬
][
nBšs
[iv¬]-1],
rg‘2
[ivar][nBins[ivar]-1]);

1241 
£pTmp
 = 
fS•Ty³
->
	`G‘S•¬©iÚGaš
(
nS–S
[
iv¬
][
iBš
], 
nS–B
[iv¬][iBš], 
nTÙS
, 
nTÙB
);

1243 ià(
£·¿tiÚGaš
[
iv¬
] < 
£pTmp
) {

1244 
£·¿tiÚGaš
[
iv¬
] = 
£pTmp
;

1245 
cutIndex
[
iv¬
] = 
iBš
;

1254 
UIÁ_t
 
iv¬
=0; iv¬ < 
cNv¬s
; ivar++) {

1255 ià(
u£V¬ŸbË
[
iv¬
] ) {

1256 ià(
£·¿tiÚGašTÙ®
 < 
£·¿tiÚGaš
[
iv¬
]) {

1257 
£·¿tiÚGašTÙ®
 = 
£·¿tiÚGaš
[
iv¬
];

1258 
mxV¬
 = 
iv¬
;

1263 ià(
mxV¬
 >= 0) {

1264 ià(
	`DoReg»ssiÚ
()) {

1265 
node
->
	`S‘S•¬©iÚIndex
(
fRegTy³
->
	`G‘S•¬©iÚIndex
(
nTÙS
+
nTÙB
,
rg‘
[0][
nBšs
[
mxV¬
]-1],
rg‘2
[0][nBins[mxVar]-1]));

1266 
node
->
	`S‘Re¥Ú£
(
rg‘
[0][
nBšs
[
mxV¬
]-1]/(
nTÙS
+
nTÙB
));

1267 iàĞ
	`®mo¡_equ®_doubË
(
rg‘2
[0][
nBšs
[
mxV¬
]-1]/(
nTÙS
+
nTÙB
), 
rg‘
[0][nBins[mxVar]-1]/(nTotS+nTotB)*target[0][nBins[mxVar]-1]/(nTotS+nTotB))) {

1268 
node
->
	`S‘RMS
(0);

1270 
node
->
	`S‘RMS
(
TM©h
::
	`Sq¹
(
rg‘2
[0][
nBšs
[
mxV¬
]-1]/(
nTÙS
+
nTÙB
è- 
rg‘
[0][nBins[mxVar]-1]/(nTotS+nTotB)*target[0][nBins[mxVar]-1]/(nTotS+nTotB)));

1274 
node
->
	`S‘S•¬©iÚIndex
(
fS•Ty³
->
	`G‘S•¬©iÚIndex
(
nTÙS
,
nTÙB
));

1275 ià(
mxV¬
 >=0){

1276 ià(
nS–S
[
mxV¬
][
cutIndex
[mxV¬]]/
nTÙS
 > 
nS–B
[mxV¬][cutIndex[mxV¬]]/
nTÙB
è
cutTy³
=
kTRUE
;

1277 
cutTy³
=
kFALSE
;

1280 
node
->
	`S‘S–eùÜ
((
UIÁ_t
)
mxV¬
);

1281 
node
->
	`S‘CutV®ue
(
cutV®ues
[
mxV¬
][
cutIndex
[mxVar]]);

1282 
node
->
	`S‘CutTy³
(
cutTy³
);

1283 
node
->
	`S‘S•¬©iÚGaš
(
£·¿tiÚGašTÙ®
);

1284 ià(
mxV¬
 < (
IÁ_t
è
fNv¬s
){

1285 
node
->
	`S‘NFish”CÛff
(0);

1286 
fV¬ŸbËImpÜnû
[
mxV¬
] +ğ
£·¿tiÚGašTÙ®
*£·¿tiÚGašTÙ® * (
nTÙS
+
nTÙB
) * (nTotS+nTotB) ;

1292 
node
->
	`S‘NFish”CÛff
(
fNv¬s
+1);

1293 
UIÁ_t
 
iv¬
=0; iv¬<=
fNv¬s
; ivar++) {

1294 
node
->
	`S‘Fish”CÛff
(
iv¬
,
fish”CÛff
[ivar]);

1296 ià(
iv¬
<
fNv¬s
){

1297 
fV¬ŸbËImpÜnû
[
iv¬
] +ğ
fish”CÛff
[iv¬]*fish”CÛff[iv¬]*
£·¿tiÚGašTÙ®
*£·¿tiÚGašTÙ® * (
nTÙS
+
nTÙB
) * (nTotS+nTotB) ;

1303 
£·¿tiÚGašTÙ®
 = 0;

1320 
UIÁ_t
 
i
=0; i<
cNv¬s
; i++) {

1321 
d–‘e
 [] 
nS–S
[
i
];

1322 
d–‘e
 [] 
nS–B
[
i
];

1323 
d–‘e
 [] 
nS–S_unWeigh‹d
[
i
];

1324 
d–‘e
 [] 
nS–B_unWeigh‹d
[
i
];

1325 
d–‘e
 [] 
rg‘
[
i
];

1326 
d–‘e
 [] 
rg‘2
[
i
];

1327 
d–‘e
 [] 
cutV®ues
[
i
];

1329 
d–‘e
 [] 
nS–S
;

1330 
d–‘e
 [] 
nS–B
;

1331 
d–‘e
 [] 
nS–S_unWeigh‹d
;

1332 
d–‘e
 [] 
nS–B_unWeigh‹d
;

1333 
d–‘e
 [] 
rg‘
;

1334 
d–‘e
 [] 
rg‘2
;

1335 
d–‘e
 [] 
cutV®ues
;

1337 
d–‘e
 [] 
xmš
;

1338 
d–‘e
 [] 
xmax
;

1340 
d–‘e
 [] 
u£V¬ŸbË
;

1341 
d–‘e
 [] 
m­V¬ŸbË
;

1343 
d–‘e
 [] 
£·¿tiÚGaš
;

1344 
d–‘e
 [] 
cutIndex
;

1346 
d–‘e
 [] 
nBšs
;

1347 
d–‘e
 [] 
bšWidth
;

1348 
d–‘e
 [] 
švBšWidth
;

1350  
£·¿tiÚGašTÙ®
;

1352 
	}
}

1357 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
DecisiÚT»e
::
	$G‘Fish”CÛffic›Ás
(cÚ¡ 
Ev’tCÚ¡Li¡
 &
ev’tSam¶e
, 
UIÁ_t
 
nFish”V¬s
, UIÁ_ˆ*
m­V¬InFish”
){

1358 
¡d
::
veùÜ
<
DoubË_t
> 
	`fish”CÛff
(
fNv¬s
+1);

1362 
TM©rixD
* 
m—nM©x
 = 
Ãw
 
	`TM©rixD
Ğ
nFish”V¬s
, 3 );

1365 
TM©rixD
* 
b‘w
 = 
Ãw
 
	`TM©rixD
Ğ
nFish”V¬s
,‚FisherVars );

1366 
TM©rixD
* 
w™h
 = 
Ãw
 
	`TM©rixD
Ğ
nFish”V¬s
,‚FisherVars );

1367 
TM©rixD
* 
cov
 = 
Ãw
 
	`TM©rixD
Ğ
nFish”V¬s
,‚FisherVars );

1374 
DoubË_t
 
sumOfWeightsS
 = 0;

1375 
DoubË_t
 
sumOfWeightsB
 = 0;

1379 
DoubË_t
* 
sumS
 = 
Ãw
 DoubË_t[
nFish”V¬s
];

1380 
DoubË_t
* 
sumB
 = 
Ãw
 DoubË_t[
nFish”V¬s
];

1381 
UIÁ_t
 
iv¬
=0; iv¬<
nFish”V¬s
; iv¬++è{ 
sumS
[iv¬] = 
sumB
[ivar] = 0; }

1383 
UIÁ_t
 
Ãv’ts
 = 
ev’tSam¶e
.
	`size
();

1385 
UIÁ_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

1388 cÚ¡ 
Ev’t
 * 
ev
 = 
ev’tSam¶e
[
›vt
];

1391 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

1392 ià(
ev
->
	`G‘CÏss
(è=ğ
fSigCÏss
è
sumOfWeightsS
 +ğ
weight
;

1393 
sumOfWeightsB
 +ğ
weight
;

1395 
DoubË_t
* 
sum
 = 
ev
->
	`G‘CÏss
(è=ğ
fSigCÏss
 ? 
sumS
 : 
sumB
;

1396 
UIÁ_t
 
iv¬
=0; iv¬<
nFish”V¬s
; ivar++) {

1397 
sum
[
iv¬
] +ğ
ev
->
	`G‘V®ueFa¡
Ğ
m­V¬InFish”
[iv¬] )*
weight
;

1400 
UIÁ_t
 
iv¬
=0; iv¬<
nFish”V¬s
; ivar++) {

1401 (*
m—nM©x
)Ğ
iv¬
, 2 ) = 
sumS
[ivar];

1402 (*
m—nM©x
)Ğ
iv¬
, 0 ) = 
sumS
[iv¬]/
sumOfWeightsS
;

1404 (*
m—nM©x
)Ğ
iv¬
, 2 ) +ğ
sumB
[ivar];

1405 (*
m—nM©x
)Ğ
iv¬
, 1 ) = 
sumB
[iv¬]/
sumOfWeightsB
;

1408 (*
m—nM©x
)Ğ
iv¬
, 2 ) /ğ(
sumOfWeightsS
 + 
sumOfWeightsB
);

1411 
d–‘e
 [] 
sumS
;

1413 
d–‘e
 [] 
sumB
;

1420 
	`as£¹
Ğ
sumOfWeightsS
 > 0 && 
sumOfWeightsB
 > 0 );

1424 cÚ¡ 
IÁ_t
 
nFish”V¬s2
 = 
nFish”V¬s
*nFisherVars;

1425 
DoubË_t
 *
sum2Sig
 = 
Ãw
 DoubË_t[
nFish”V¬s2
];

1426 
DoubË_t
 *
sum2Bgd
 = 
Ãw
 DoubË_t[
nFish”V¬s2
];

1427 
DoubË_t
 *
xv®
 = 
Ãw
 DoubË_t[
nFish”V¬s2
];

1428 
	`mem£t
(
sum2Sig
,0,
nFish”V¬s2
*(
DoubË_t
));

1429 
	`mem£t
(
sum2Bgd
,0,
nFish”V¬s2
*(
DoubË_t
));

1432 
UIÁ_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

1436 cÚ¡ 
Ev’t
* 
ev
 = 
ev’tSam¶e
.
	`©
(
›vt
);

1438 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

1440 
UIÁ_t
 
x
=0; x<
nFish”V¬s
; x++) {

1441 
xv®
[
x
] = 
ev
->
	`G‘V®ueFa¡
Ğ
m­V¬InFish”
[x] );

1443 
IÁ_t
 
k
=0;

1444 
UIÁ_t
 
x
=0; x<
nFish”V¬s
; x++) {

1445 
UIÁ_t
 
y
=0; y<
nFish”V¬s
; y++) {

1446 iàĞ
ev
->
	`G‘CÏss
(è=ğ
fSigCÏss
 ) 
sum2Sig
[
k
] +ğĞ(
xv®
[
x
] - (*
m—nM©x
)(x, 0))*(xv®[
y
] - (*m—nM©x)(y, 0)è)*
weight
;

1447 
sum2Bgd
[
k
] +ğĞ(
xv®
[
x
] - (*
m—nM©x
)(x, 1))*(xv®[
y
] - (*m—nM©x)(y, 1)è)*
weight
;

1448 
k
++;

1452 
IÁ_t
 
k
=0;

1453 
UIÁ_t
 
x
=0; x<
nFish”V¬s
; x++) {

1454 
UIÁ_t
 
y
=0; y<
nFish”V¬s
; y++) {

1455 (*
w™h
)(
x
, 
y
èğ
sum2Sig
[
k
]/
sumOfWeightsS
 + 
sum2Bgd
[k]/
sumOfWeightsB
;

1456 
k
++;

1460 
d–‘e
 [] 
sum2Sig
;

1461 
d–‘e
 [] 
sum2Bgd
;

1462 
d–‘e
 [] 
xv®
;

1470 
DoubË_t
 
´odSig
, 
´odBgd
;

1472 
UIÁ_t
 
x
=0; x<
nFish”V¬s
; x++) {

1473 
UIÁ_t
 
y
=0; y<
nFish”V¬s
; y++) {

1475 
´odSig
 = ( ((*
m—nM©x
)(
x
, 0) - (*meanMatx)(x, 2))*

1476 ((*
m—nM©x
)(
y
, 0) - (*meanMatx)(y, 2)) );

1477 
´odBgd
 = ( ((*
m—nM©x
)(
x
, 1) - (*meanMatx)(x, 2))*

1478 ((*
m—nM©x
)(
y
, 1) - (*meanMatx)(y, 2)) );

1480 (*
b‘w
)(
x
, 
y
èğ(
sumOfWeightsS
*
´odSig
 + 
sumOfWeightsB
*
´odBgd
) / (sumOfWeightsS + sumOfWeightsB);

1487 
UIÁ_t
 
x
=0; x<
nFish”V¬s
; x++)

1488 
UIÁ_t
 
y
=0; y<
nFish”V¬s
; y++)

1489 (*
cov
)(
x
, 
y
èğ(*
w™h
)(x, yè+ (*
b‘w
)(x, y);

1499 
TM©rixD
* 
theM©
 = 
w™h
;

1502 
TM©rixD
 
	`švCov
Ğ*
theM©
 );

1503 iàĞ
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
()) < 10E-24 ) {

1504 
	`Log
(è<< 
kWARNING
 << "FisherCoeff matrix is‡lmost singular with determinant="

1505 << 
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
())

1507 << 
Endl
;

1509 iàĞ
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
()) < 10E-120 ) {

1510 
	`Log
(è<< 
kFATAL
 << "FisherCoeff matrix is singular with determinant="

1511 << 
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
())

1513 << 
Endl
;

1516 
švCov
.
	`Inv”t
();

1519 
DoubË_t
 
xçù
 = 
TM©h
::
	`Sq¹
Ğ
sumOfWeightsS
*
sumOfWeightsB
 ) / (sumOfWeightsS + sumOfWeightsB);

1522 
¡d
::
veùÜ
<
DoubË_t
> 
	`diffM—ns
Ğ
nFish”V¬s
 );

1524 
UIÁ_t
 
iv¬
=0; iv¬<=
fNv¬s
; iv¬++è
fish”CÛff
[ivar] = 0;

1525 
UIÁ_t
 
iv¬
=0; iv¬<
nFish”V¬s
; ivar++) {

1526 
UIÁ_t
 
jv¬
=0; jv¬<
nFish”V¬s
; jvar++) {

1527 
DoubË_t
 
d
 = (*
m—nM©x
)(
jv¬
, 0) - (*meanMatx)(jvar, 1);

1528 
fish”CÛff
[
m­V¬InFish”
[
iv¬
]] +ğ
	`švCov
(iv¬, 
jv¬
)*
d
;

1532 
fish”CÛff
[
m­V¬InFish”
[
iv¬
]] *ğ
xçù
;

1536 
DoubË_t
 
f0
 = 0.0;

1537 
UIÁ_t
 
iv¬
=0; iv¬<
nFish”V¬s
; ivar++){

1538 
f0
 +ğ
fish”CÛff
[
m­V¬InFish”
[
iv¬
]]*((*
m—nM©x
)(ivar, 0) + (*meanMatx)(ivar, 1));

1540 
f0
 /= -2.0;

1542 
fish”CÛff
[
fNv¬s
] = 
f0
;

1544  
fish”CÛff
;

1545 
	}
}

1551 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$T¿šNodeFuÎ
ĞcÚ¡ 
Ev’tCÚ¡Li¡
 & 
ev’tSam¶e
,

1552 
TMVA
::
DecisiÚT»eNode
 *
node
 )

1554 
DoubË_t
 
nTÙS
 = 0.0, 
nTÙB
 = 0.0;

1555 
IÁ_t
 
nTÙS_unWeigh‹d
 = 0, 
nTÙB_unWeigh‹d
 = 0;

1557 
¡d
::
veùÜ
<
TMVA
::
BDTEv’tW¿µ”
> 
bdtEv’tSam¶e
;

1560 
¡d
::
veùÜ
<
DoubË_t
> 
	`lCutV®ue
Ğ
fNv¬s
, 0.0 );

1561 
¡d
::
veùÜ
<
DoubË_t
> 
	`lS•Gaš
Ğ
fNv¬s
, -1.0e6 );

1562 
¡d
::
veùÜ
<
Ch¬_t
> 
	`lCutTy³
Ğ
fNv¬s
 );

1563 
lCutTy³
.
	`assign
Ğ
fNv¬s
, 
	`Ch¬_t
(
kFALSE
) );

1567  
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
™
 = 
ev’tSam¶e
.
	`begš
(); iˆ!ğev’tSam¶e.
	`’d
(); ++it ) {

1568 if((*
™
)->
	`G‘CÏss
(è=ğ
fSigCÏss
) {

1569 
nTÙS
 +ğ(*
™
)->
	`G‘Weight
();

1570 ++
nTÙS_unWeigh‹d
;

1573 
nTÙB
 +ğ(*
™
)->
	`G‘Weight
();

1574 ++
nTÙB_unWeigh‹d
;

1576 
bdtEv’tSam¶e
.
	`push_back
(
TMVA
::
	`BDTEv’tW¿µ”
(*
™
));

1579 
¡d
::
veùÜ
<
Ch¬_t
> 
	`u£V¬ŸbË
(
fNv¬s
);

1580 
u£V¬ŸbË
.
	`assign
Ğ
fNv¬s
, 
	`Ch¬_t
(
kTRUE
) );

1582 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; iv¬++è
u£V¬ŸbË
[iv¬]=
	`Ch¬_t
(
kFALSE
);

1583 ià(
fRªdomi£dT»e
) {

1584 ià(
fU£Nv¬s
 ==0 ) {

1586 
fU£Nv¬s
 = 
	`UIÁ_t
(
TM©h
::
	`Sq¹
(
fNv¬s
)+0.6);

1588 
IÁ_t
 
nS–eùedV¬s
 = 0;

1589 
nS–eùedV¬s
 < 
fU£Nv¬s
) {

1590 
DoubË_t
 
bÏ
 = 
fMyT¿ndom
->
	`Rndm
()*
fNv¬s
;

1591 
u£V¬ŸbË
[
	`IÁ_t
 (
bÏ
)] = 
	`Ch¬_t
(
kTRUE
);

1592 
nS–eùedV¬s
 = 0;

1593 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; ivar++) {

1594 if(
u£V¬ŸbË
[
iv¬
] =ğ
	`Ch¬_t
(
kTRUE
)è
nS–eùedV¬s
++;

1599 
UIÁ_t
 
iv¬
=0; iv¬ < 
fNv¬s
; iv¬++è
u£V¬ŸbË
[iv¬] = 
	`Ch¬_t
(
kTRUE
);

1602  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fNv¬s
; ivar++ ) {

1603 if(!
u£V¬ŸbË
[
iv¬
]) ;

1604 
TMVA
::
BDTEv’tW¿µ”
::
	`S‘V¬Index
(
iv¬
);

1605 
¡d
::
	`sÜt
Ğ
bdtEv’tSam¶e
.
	`begš
(),bdtEv’tSam¶e.
	`’d
() );

1607 
DoubË_t
 
bkgWeightCŒ
 = 0.0, 
sigWeightCŒ
 = 0.0;

1608 
¡d
::
veùÜ
<
TMVA
::
BDTEv’tW¿µ”
>::
™”©Ü
 
™
 = 
bdtEv’tSam¶e
.
	`begš
(), 
™_’d
 = bdtEv’tSam¶e.
	`’d
();

1609  ; 
™
 !ğ
™_’d
; ++it ) {

1610 if((**
™
)->
	`G‘CÏss
(è=ğ
fSigCÏss
 )

1611 
sigWeightCŒ
 +ğ(**
™
)->
	`G‘Weight
();

1613 
bkgWeightCŒ
 +ğ(**
™
)->
	`G‘Weight
();

1615 
™
->
	`S‘CumuÏtiveWeight
(
çl£
,
bkgWeightCŒ
);

1616 
™
->
	`S‘CumuÏtiveWeight
(
Œue
,
sigWeightCŒ
);

1619 cÚ¡ 
DoubË_t
 
fPMš
 = 1.0e-6;

1620 
BoŞ_t
 
cutTy³
 = 
kFALSE
;

1621 
LÚg64_t
 
šdex
 = 0;

1622 
DoubË_t
 
£·¿tiÚGaš
 = -1.0, 
£pTmp
 = 0.0, 
cutV®ue
 = 0.0, 
dV®
 = 0.0, 
nÜm
 = 0.0;

1624  
™
 = 
bdtEv’tSam¶e
.
	`begš
(); iˆ!ğ
™_’d
; ++it ) {

1625 ifĞ
šdex
 == 0 ) { ++index; ; }

1626 ifĞ*(*
™
è=ğ
NULL
 ) {

1627 
	`Log
(è<< 
kFATAL
 << "In TrainNodeFull(): have‡‚ullƒvent! Where index="

1628 << 
šdex
 << ",‡nd…¬’ˆnode=" << 
node
->
	`G‘P¬’t
(è<< 
Endl
;

1631 
dV®
 = 
bdtEv’tSam¶e
[
šdex
].
	`G‘V®
() - bdtEventSample[index-1].GetVal();

1632 
nÜm
 = 
TM©h
::
	`Abs
(
bdtEv’tSam¶e
[
šdex
].
	`G‘V®
() + bdtEventSample[index-1].GetVal());

1635 ifĞ
šdex
 >ğ
fMšSize
 && (
nTÙS_unWeigh‹d
 + 
nTÙB_unWeigh‹d
è- index >ğfMšSiz&& 
TM©h
::
	`Abs
(
dV®
/(0.5*
nÜm
 + 1)è> 
fPMš
 ) {

1636 
£pTmp
 = 
fS•Ty³
->
	`G‘S•¬©iÚGaš
Ğ
™
->
	`G‘CumuÏtiveWeight
(
Œue
), it->G‘CumuÏtiveWeight(
çl£
), 
sigWeightCŒ
, 
bkgWeightCŒ
 );

1637 ifĞ
£pTmp
 > 
£·¿tiÚGaš
 ) {

1638 
£·¿tiÚGaš
 = 
£pTmp
;

1639 
cutV®ue
 = 
™
->
	`G‘V®
(è- 0.5*
dV®
;

1640 
DoubË_t
 
nS–S
 = 
™
->
	`G‘CumuÏtiveWeight
(
Œue
);

1641 
DoubË_t
 
nS–B
 = 
™
->
	`G‘CumuÏtiveWeight
(
çl£
);

1644 ifĞ
nS–S
/
sigWeightCŒ
 > 
nS–B
/
bkgWeightCŒ
 ) 
cutTy³
 = 
kTRUE
;

1645 
cutTy³
 = 
kFALSE
;

1648 ++
šdex
;

1650 
lCutTy³
[
iv¬
] = 
	`Ch¬_t
(
cutTy³
);

1651 
lCutV®ue
[
iv¬
] = 
cutV®ue
;

1652 
lS•Gaš
[
iv¬
] = 
£·¿tiÚGaš
;

1655 
DoubË_t
 
£·¿tiÚGaš
 = -1.0;

1656 
IÁ_t
 
iV¬Index
 = -1;

1657  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fNv¬s
; ivar++ ) {

1658 ifĞ
lS•Gaš
[
iv¬
] > 
£·¿tiÚGaš
 ) {

1659 
iV¬Index
 = 
iv¬
;

1660 
£·¿tiÚGaš
 = 
lS•Gaš
[
iv¬
];

1664 if(
iV¬Index
 >= 0) {

1665 
node
->
	`S‘S–eùÜ
(
iV¬Index
);

1666 
node
->
	`S‘CutV®ue
(
lCutV®ue
[
iV¬Index
]);

1667 
node
->
	`S‘S•¬©iÚGaš
(
lS•Gaš
[
iV¬Index
]);

1668 
node
->
	`S‘CutTy³
(
lCutTy³
[
iV¬Index
]);

1669 
fV¬ŸbËImpÜnû
[
iV¬Index
] +ğ
£·¿tiÚGaš
*£·¿tiÚGaš * (
nTÙS
+
nTÙB
) * (nTotS+nTotB);

1672 
£·¿tiÚGaš
 = 0.0;

1675  
£·¿tiÚGaš
;

1676 
	}
}

1682 
	gTMVA
::
DecisiÚT»eNode
* 
TMVA
::
DecisiÚT»e
::
	$G‘Ev’tNode
(cÚ¡ 
TMVA
::
Ev’t
 & 
e
) const

1684 
TMVA
::
DecisiÚT»eNode
 *
cu¼’t
 = (TMVA::DecisiÚT»eNode*)
this
->
	`G‘RoÙ
();

1685 
cu¼’t
->
	`G‘NodeTy³
() == 0) {

1686 
cu¼’t
 = (cu¼’t->
	`GÛsRight
(
e
)) ?

1687 (
TMVA
::
DecisiÚT»eNode
*)
cu¼’t
->
	`G‘Right
() :

1688 (
TMVA
::
DecisiÚT»eNode
*)
cu¼’t
->
	`G‘Leá
();

1690  
cu¼’t
;

1691 
	}
}

1699 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$CheckEv’t
ĞcÚ¡ 
TMVA
::
Ev’t
 * 
e
, 
BoŞ_t
 
U£YesNoL—f
 ) const

1701 
TMVA
::
DecisiÚT»eNode
 *
cu¼’t
 = 
this
->
	`G‘RoÙ
();

1702 ià(!
cu¼’t
){

1703 
	`Log
(è<< 
kFATAL
 << "CheckEv’t: s¹ed w™h undefšed ROOT‚ode" <<
Endl
;

1707 
cu¼’t
->
	`G‘NodeTy³
() == 0) {

1708 
cu¼’t
 = (cu¼’t->
	`GÛsRight
(*
e
)) ?

1709 
cu¼’t
->
	`G‘Right
() :

1710 
cu¼’t
->
	`G‘Leá
();

1711 ià(!
cu¼’t
) {

1712 
	`Log
(è<< 
kFATAL
 << "DT::CheckEv’t: incÚsi¡’ˆŒ“ sŒuùu»" <<
Endl
;

1717 iàĞ
	`DoReg»ssiÚ
() ){

1718  
cu¼’t
->
	`G‘Re¥Ú£
();

1721 ià(
U£YesNoL—f
è 
	`DoubË_t
 ( 
cu¼’t
->
	`G‘NodeTy³
() );

1722  
cu¼’t
->
	`G‘Pur™y
();

1724 
	}
}

1729 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
Sam¶ePur™y
Ğ
¡d
::
veùÜ
<
TMVA
::
Ev’t
*> 
ev’tSam¶e
 )

1731 
DoubË_t
 
sumsig
=0, 
	gsumbkg
=0, 
	gsumtÙ
=0;

1732 
UIÁ_t
 
	g›vt
=0; ievt<
	gev’tSam¶e
.
size
(); ievt++) {

1733 ià(
	gev’tSam¶e
[
›vt
]->
G‘CÏss
(è!ğ
fSigCÏss
è
sumbkg
+=
ev’tSam¶e
[›vt]->
G‘Weight
();

1734 
	gsumsig
+=
ev’tSam¶e
[
›vt
]->
G‘Weight
();

1735 
	gsumtÙ
+=
ev’tSam¶e
[
›vt
]->
G‘Weight
();

1738 ià(
	gsumtÙ
!ğ(
sumsig
+
sumbkg
)){

1739 
Log
(è<< 
kFATAL
 << "<SamplePurity> sumtot != sumsig+sumbkg"

1740 << 
sumtÙ
 << " " << 
sumsig
 << " " << 
sumbkg
 << 
Endl
;

1742 ià(
	gsumtÙ
>0è 
	gsumsig
/(sumsig + 
	gsumbkg
);

1752 
	gveùÜ
< 
	gDoubË_t
 > 
	gTMVA
::
DecisiÚT»e
::
	$G‘V¬ŸbËImpÜnû
()

1754 
¡d
::
veùÜ
<
DoubË_t
> 
	`»ÏtiveImpÜnû
(
fNv¬s
);

1755 
DoubË_t
 
sum
=0;

1756 
UIÁ_t
 
i
=0; i< 
fNv¬s
; i++) {

1757 
sum
 +ğ
fV¬ŸbËImpÜnû
[
i
];

1758 
»ÏtiveImpÜnû
[
i
] = 
fV¬ŸbËImpÜnû
[i];

1761 
UIÁ_t
 
i
=0; i< 
fNv¬s
; i++) {

1762 ià(
sum
 > 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
())

1763 
»ÏtiveImpÜnû
[
i
] /ğ
sum
;

1765 
»ÏtiveImpÜnû
[
i
] = 0;

1767  
»ÏtiveImpÜnû
;

1768 
	}
}

1773 
DoubË_t
 
	gTMVA
::
DecisiÚT»e
::
	$G‘V¬ŸbËImpÜnû
Ğ
UIÁ_t
 
iv¬
 )

1775 
¡d
::
veùÜ
<
DoubË_t
> 
»ÏtiveImpÜnû
 = 
this
->
	`G‘V¬ŸbËImpÜnû
();

1776 ià(
iv¬
 < 
fNv¬s
è 
»ÏtiveImpÜnû
[ivar];

1778 
	`Log
(è<< 
kFATAL
 << "<G‘V¬ŸbËImpÜnû>" << 
Endl


1779 << "--- iv¬ = " << 
iv¬
 << " i ouˆoà¿ng" << 
Endl
;

1783 
	}
}

	@src/DecisionTreeNode.cxx

41 
	~"TMVA/DecisiÚT»eNode.h
"

43 
	~"TMVA/Ty³s.h
"

44 
	~"TMVA/MsgLogg”.h
"

45 
	~"TMVA/ToŞs.h
"

46 
	~"TMVA/Ev’t.h
"

48 
	~"Th»adLoÿlStÜage.h
"

49 
	~"TSŒšg.h
"

51 
	~<®gÜ™hm
>

52 
	~<exû±iÚ
>

53 
	~<iomª
>

54 
	~<lim™s
>

55 
	~<s¡»am
>

57 
usšg
 
	g¡d
::
¡ršg
;

59 
CÏssImp
(
TMVA
::
DecisiÚT»eNode
);

61 
boŞ
 
	gTMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
 = 
çl£
;

62 
UIÁ_t
 
	gTMVA
::
DecisiÚT»eNode
::
fgTmva_V”siÚ_Code
 = 0;

67 
	gTMVA
::
DecisiÚT»eNode
::
	$DecisiÚT»eNode
()

68 : 
TMVA
::
	`Node
(),

69 
	`fCutV®ue
(0),

70 
	`fCutTy³
 ( 
kTRUE
 ),

71 
	`fS–eùÜ
 ( -1 ),

72 
	`fRe¥Ú£
(-99 ),

73 
	`fRMS
(0),

74 
	`fNodeTy³
 (-99 ),

75 
	`fPur™y
 (-99),

76 
	$fIsT”mš®Node
Ğ
kFALSE
 )

78 ià(
DecisiÚT»eNode
::
fgIsT¿ššg
){

79 
fT¿šInfo
 = 
Ãw
 
	`DTNodeT¿ššgInfo
();

84 
fT¿šInfo
 = 0;

86 
	}
}

91 
	gTMVA
::
DecisiÚT»eNode
::
	$DecisiÚT»eNode
(
TMVA
::
Node
* 
p
, 
pos
)

92 : 
TMVA
::
	`Node
(
p
, 
pos
),

93 
	`fCutV®ue
( 0 ),

94 
	`fCutTy³
 ( 
kTRUE
 ),

95 
	`fS–eùÜ
( -1 ),

96 
	`fRe¥Ú£
(-99 ),

97 
	`fRMS
(0),

98 
	`fNodeTy³
( -99 ),

99 
	`fPur™y
 (-99),

100 
	$fIsT”mš®Node
Ğ
kFALSE
 )

102 ià(
DecisiÚT»eNode
::
fgIsT¿ššg
){

103 
fT¿šInfo
 = 
Ãw
 
	`DTNodeT¿ššgInfo
();

108 
fT¿šInfo
 = 0;

110 
	}
}

116 
	gTMVA
::
DecisiÚT»eNode
::
	$DecisiÚT»eNode
(cÚ¡ 
TMVA
::
DecisiÚT»eNode
 &
n
,

117 
DecisiÚT»eNode
* 
·»Á
)

118 : 
TMVA
::
	`Node
(
n
),

119 
	`fCutV®ue
Ğ
n
.
fCutV®ue
 ),

120 
	`fCutTy³
 ( 
n
.
fCutTy³
 ),

121 
	`fS–eùÜ
Ğ
n
.
fS–eùÜ
 ),

122 
	`fRe¥Ú£
Ğ
n
.
fRe¥Ú£
 ),

123 
	`fRMS
 ( 
n
.
fRMS
),

124 
	`fNodeTy³
Ğ
n
.
fNodeTy³
 ),

125 
	`fPur™y
 ( 
n
.
fPur™y
),

126 
	$fIsT”mš®Node
Ğ
n
.
fIsT”mš®Node
 )

128 
this
->
	`S‘P¬’t
Ğ
·»Á
 );

129 ià(
n
.
	`G‘Leá
(è=ğ0 ) 
this
->
	`S‘Leá
(
NULL
);

130 
this
->
	`S‘Leá
Ğ
Ãw
 
	`DecisiÚT»eNode
Ğ*((
DecisiÚT»eNode
*)(
n
.
	`G‘Leá
())),this));

132 ià(
n
.
	`G‘Right
(è=ğ0 ) 
this
->
	`S‘Right
(
NULL
);

133 
this
->
	`S‘Right
Ğ
Ãw
 
	`DecisiÚT»eNode
Ğ*((
DecisiÚT»eNode
*)(
n
.
	`G‘Right
())),this));

135 ià(
DecisiÚT»eNode
::
fgIsT¿ššg
){

136 
fT¿šInfo
 = 
Ãw
 
	`DTNodeT¿ššgInfo
(*(
n
.fTrainInfo));

141 
fT¿šInfo
 = 0;

143 
	}
}

148 
	gTMVA
::
DecisiÚT»eNode
::~
	$DecisiÚT»eNode
(){

149 
d–‘e
 
fT¿šInfo
;

150 
	}
}

155 
BoŞ_t
 
	gTMVA
::
DecisiÚT»eNode
::
	$GÛsRight
(cÚ¡ 
TMVA
::
Ev’t
 & 
e
) const

157 
BoŞ_t
 
»suÉ
;

159 ià(
	`G‘NFish”CÛff
() == 0){

161 
»suÉ
 = (
e
.
	`G‘V®ue
(
this
->
	`G‘S–eùÜ
()è>ğthis->
	`G‘CutV®ue
() );

165 
DoubË_t
 
fish”
 = 
this
->
	`G‘Fish”CÛff
(
fFish”CÛff
.
	`size
()-1);

166 
UIÁ_t
 
iv¬
=0; iv¬<
fFish”CÛff
.
	`size
()-1; ivar++)

167 
fish”
 +ğ
this
->
	`G‘Fish”CÛff
(
iv¬
)*(
e
.
	`G‘V®ue
(ivar));

169 
»suÉ
 = 
fish”
 > 
this
->
	`G‘CutV®ue
();

172 ià(
fCutTy³
 =ğ
kTRUE
è 
»suÉ
;

173  !
»suÉ
;

174 
	}
}

179 
BoŞ_t
 
	gTMVA
::
DecisiÚT»eNode
::
	$GÛsLeá
(cÚ¡ 
TMVA
::
Ev’t
 & 
e
) const

181 ià(!
this
->
	`GÛsRight
(
e
)è 
kTRUE
;

182  
kFALSE
;

183 
	}
}

191 
	gTMVA
::
DecisiÚT»eNode
::
	$S‘Pur™y
( )

193 iàĞĞ
this
->
	`G‘NSigEv’ts
(è+his->
	`G‘NBkgEv’ts
() ) > 0 ) {

194 
fPur™y
 = 
this
->
	`G‘NSigEv’ts
(è/ (his->G‘NSigEv’ts(è+his->
	`G‘NBkgEv’ts
());

197 
	`Log
(è<< 
kINFO
 << "Z”Øev’t š…ur™y c®cuÏtiÚ ,„‘uº…ur™y=0.5" << 
Endl
;

198 
¡d
::
o¡ršg¡»am
 
oss
;

199 
this
->
	`Pršt
(
oss
);

200 
	`Log
(è<<
oss
.
	`¡r
();

201 
fPur™y
 = 0.5;

204 
	}
}

209 
	gTMVA
::
DecisiÚT»eNode
::
	$Pršt
(
¡d
::
o¡»am
& 
os
) const

211 
os
 << "< *** " << 
¡d
::
’dl
;

212 
os
 << " d: " << 
this
->
	`G‘D•th
()

213 << 
¡d
::
	`£»cisiÚ
(6)

214 << "NCÛf: " << 
this
->
	`G‘NFish”CÛff
();

215 
IÁ_t
 
i
=0; i< (IÁ_tè
this
->
	`G‘NFish”CÛff
(); i++è{ 
os
 << "fC"<<i<<": " <<his->
	`G‘Fish”CÛff
(i);}

216 
os
 << " iv¬: " << 
this
->
	`G‘S–eùÜ
()

217 << " cut: " << 
this
->
	`G‘CutV®ue
()

218 << " cTy³: " << 
this
->
	`G‘CutTy³
()

219 << " s: " << 
this
->
	`G‘NSigEv’ts
()

220 << " b: " << 
this
->
	`G‘NBkgEv’ts
()

221 << "‚Ev: " << 
this
->
	`G‘NEv’ts
()

222 << " suw: " << 
this
->
	`G‘NSigEv’ts_unweigh‹d
()

223 << " buw: " << 
this
->
	`G‘NBkgEv’ts_unweigh‹d
()

224 << "‚Evuw: " << 
this
->
	`G‘NEv’ts_unweigh‹d
()

225 << " s•I: " << 
this
->
	`G‘S•¬©iÚIndex
()

226 << " s•G: " << 
this
->
	`G‘S•¬©iÚGaš
()

227 << "‚Ty³: " << 
this
->
	`G‘NodeTy³
()

228 << 
¡d
::
’dl
;

230 
os
 << "My‡dd»s i " << (
this
) << ", ";

231 ià(
this
->
	`G‘P¬’t
(è!ğ
NULL
è
os
 << "…arent‡t‡ddr: " << (this->GetParent()) ;

232 ià(
this
->
	`G‘Leá
(è!ğ
NULL
è
os
 << "†eft daughter‡t‡ddr: " << (this->GetLeft());

233 ià(
this
->
	`G‘Right
(è!ğ
NULL
è
os
 << "„ight daughter‡t‡ddr: " << (this->GetRight()) ;

235 
os
 << " **** > " << 
¡d
::
’dl
;

236 
	}
}

241 
	gTMVA
::
DecisiÚT»eNode
::
	$PrštRec
(
¡d
::
o¡»am
& 
os
) const

243 
os
 << 
this
->
	`G‘D•th
()

244 << 
¡d
::
	`£»cisiÚ
(6)

245 << " " << 
this
->
	`G‘Pos
()

246 << "NCÛf: " << 
this
->
	`G‘NFish”CÛff
();

247 
IÁ_t
 
i
=0; i< (IÁ_tè
this
->
	`G‘NFish”CÛff
(); i++è{
os
 << "fC"<<i<<": " <<his->
	`G‘Fish”CÛff
(i);}

248 
os
 << " iv¬: " << 
this
->
	`G‘S–eùÜ
()

249 << " cut: " << 
this
->
	`G‘CutV®ue
()

250 << " cTy³: " << 
this
->
	`G‘CutTy³
()

251 << " s: " << 
this
->
	`G‘NSigEv’ts
()

252 << " b: " << 
this
->
	`G‘NBkgEv’ts
()

253 << "‚Ev: " << 
this
->
	`G‘NEv’ts
()

254 << " suw: " << 
this
->
	`G‘NSigEv’ts_unweigh‹d
()

255 << " buw: " << 
this
->
	`G‘NBkgEv’ts_unweigh‹d
()

256 << "‚Evuw: " << 
this
->
	`G‘NEv’ts_unweigh‹d
()

257 << " s•I: " << 
this
->
	`G‘S•¬©iÚIndex
()

258 << " s•G: " << 
this
->
	`G‘S•¬©iÚGaš
()

259 << "„es: " << 
this
->
	`G‘Re¥Ú£
()

260 << "„ms: " << 
this
->
	`G‘RMS
()

261 << "‚Ty³: " << 
this
->
	`G‘NodeTy³
();

262 ià(
this
->
	`G‘CC
(è> 10000000000000.è
os
 << " CC: " << 100000. << 
¡d
::
’dl
;

263 
os
 << " CC: " << 
this
->
	`G‘CC
(è<< 
¡d
::
’dl
;

265 ià(
this
->
	`G‘Leá
(è!ğ
NULL
èthis->G‘Leá(è->
	`PrštRec
(
os
);

266 ià(
this
->
	`G‘Right
(è!ğ
NULL
èthis->G‘Right()->
	`PrštRec
(
os
);

267 
	}
}

272 
BoŞ_t
 
	gTMVA
::
DecisiÚT»eNode
::
	$R—dD©aRecÜd
Ğ
¡d
::
i¡»am
& 
is
, 
UIÁ_t
 
tmva_V”siÚ_Code
 )

274 
fgTmva_V”siÚ_Code
=
tmva_V”siÚ_Code
;

275 
¡ršg
 
tmp
;

277 
Flßt_t
 
cutV®
, 
cutTy³
, 
nsig
, 
nbkg
, 
nEv
, 
nsig_unweigh‹d
, 
nbkg_unweigh‹d
, 
nEv_unweigh‹d
;

278 
Flßt_t
 
£·¿tiÚIndex
, 
£·¿tiÚGaš
, 
	`»¥Ú£
(-99), 
	`cc
(0);

279 
IÁ_t
 
d•th
, 
iv¬
, 
nodeTy³
;

280 
ULÚg_t
 
l£q
;

281 
pos
;

283 
is
 >> 
d•th
;

284 iàĞ
d•th
==-1 ) {  
kFALSE
; }

286 
is
 >> 
pos
 ;

287 
this
->
	`S‘D•th
(
d•th
);

288 
this
->
	`S‘Pos
(
pos
);

290 ià(
tmva_V”siÚ_Code
 < 
	`TMVA_VERSION
(4,0,0)) {

291 
is
 >> 
tmp
 >> 
l£q


292 >> 
tmp
 >> 
iv¬


293 >> 
tmp
 >> 
cutV®


294 >> 
tmp
 >> 
cutTy³


295 >> 
tmp
 >> 
nsig


296 >> 
tmp
 >> 
nbkg


297 >> 
tmp
 >> 
nEv


298 >> 
tmp
 >> 
nsig_unweigh‹d


299 >> 
tmp
 >> 
nbkg_unweigh‹d


300 >> 
tmp
 >> 
nEv_unweigh‹d


301 >> 
tmp
 >> 
£·¿tiÚIndex


302 >> 
tmp
 >> 
£·¿tiÚGaš


303 >> 
tmp
 >> 
nodeTy³
;

305 
is
 >> 
tmp
 >> 
l£q


306 >> 
tmp
 >> 
iv¬


307 >> 
tmp
 >> 
cutV®


308 >> 
tmp
 >> 
cutTy³


309 >> 
tmp
 >> 
nsig


310 >> 
tmp
 >> 
nbkg


311 >> 
tmp
 >> 
nEv


312 >> 
tmp
 >> 
nsig_unweigh‹d


313 >> 
tmp
 >> 
nbkg_unweigh‹d


314 >> 
tmp
 >> 
nEv_unweigh‹d


315 >> 
tmp
 >> 
£·¿tiÚIndex


316 >> 
tmp
 >> 
£·¿tiÚGaš


317 >> 
tmp
 >> 
»¥Ú£


318 >> 
tmp
 >> 
nodeTy³


319 >> 
tmp
 >> 
cc
;

322 
this
->
	`S‘S–eùÜ
((
UIÁ_t
)
iv¬
);

323 
this
->
	`S‘CutV®ue
(
cutV®
);

324 
this
->
	`S‘CutTy³
(
cutTy³
);

325 
this
->
	`S‘NodeTy³
(
nodeTy³
);

326 ià(
fT¿šInfo
){

327 
this
->
	`S‘NSigEv’ts
(
nsig
);

328 
this
->
	`S‘NBkgEv’ts
(
nbkg
);

329 
this
->
	`S‘NEv’ts
(
nEv
);

330 
this
->
	`S‘NSigEv’ts_unweigh‹d
(
nsig_unweigh‹d
);

331 
this
->
	`S‘NBkgEv’ts_unweigh‹d
(
nbkg_unweigh‹d
);

332 
this
->
	`S‘NEv’ts_unweigh‹d
(
nEv_unweigh‹d
);

333 
this
->
	`S‘S•¬©iÚIndex
(
£·¿tiÚIndex
);

334 
this
->
	`S‘S•¬©iÚGaš
(
£·¿tiÚGaš
);

335 
this
->
	`S‘Pur™y
();

337 
this
->
	`S‘CC
(
cc
);

340  
kTRUE
;

341 
	}
}

346 
	gTMVA
::
DecisiÚT»eNode
::
	$CË¬NodeAndAÎDaugh‹rs
()

348 
	`S‘NSigEv’ts
(0);

349 
	`S‘NBkgEv’ts
(0);

350 
	`S‘NEv’ts
(0);

351 
	`S‘NSigEv’ts_unweigh‹d
(0);

352 
	`S‘NBkgEv’ts_unweigh‹d
(0);

353 
	`S‘NEv’ts_unweigh‹d
(0);

354 
	`S‘S•¬©iÚIndex
(-1);

355 
	`S‘S•¬©iÚGaš
(-1);

356 
	`S‘Pur™y
();

358 ià(
this
->
	`G‘Leá
(è!ğ
NULL
è((
DecisiÚT»eNode
*)Ñhis->G‘Leá()))->
	`CË¬NodeAndAÎDaugh‹rs
();

359 ià(
this
->
	`G‘Right
(è!ğ
NULL
è((
DecisiÚT»eNode
*)Ñhis->G‘Right()))->
	`CË¬NodeAndAÎDaugh‹rs
();

360 
	}
}

366 
	gTMVA
::
DecisiÚT»eNode
::
	$Re£tV®id©iÚD©a
( ) {

367 
	`S‘NBV®id©iÚ
( 0.0 );

368 
	`S‘NSV®id©iÚ
( 0.0 );

369 
	`S‘SumT¬g‘
( 0 );

370 
	`S‘SumT¬g‘2
( 0 );

372 if(
	`G‘Leá
(è!ğ
NULL
 && 
	`G‘Right
() != NULL) {

373 
	`G‘Leá
()->
	`Re£tV®id©iÚD©a
();

374 
	`G‘Right
()->
	`Re£tV®id©iÚD©a
();

376 
	}
}

381 
	gTMVA
::
DecisiÚT»eNode
::
	$PrštPruÃ
Ğ
¡d
::
o¡»am
& 
os
 ) const {

382 
os
 << "----------------------" << 
¡d
::
’dl


383 << "|~T_t| " << 
	`G‘NT”mš®
(è<< 
¡d
::
’dl


384 << "RÑ): " << 
	`G‘NodeR
(è<< 
¡d
::
’dl


385 << "R(T_t): " << 
	`G‘SubT»eR
(è<< 
¡d
::
’dl


386 << "gÑ): " << 
	`G‘AÍha
(è<< 
¡d
::
’dl


387 << "GÑ): " << 
	`G‘AÍhaMšSubŒ“
(è<< 
¡d
::
’dl
;

388 
	}
}

393 
	gTMVA
::
DecisiÚT»eNode
::
	$PrštRecPruÃ
Ğ
¡d
::
o¡»am
& 
os
 ) const {

394 
this
->
	`PrštPruÃ
(
os
);

395 if(
this
->
	`G‘Leá
(è!ğ
NULL
 &&his->
	`G‘Right
() != NULL) {

396 ((
DecisiÚT»eNode
*)
this
->
	`G‘Leá
())->
	`PrštRecPruÃ
(
os
);

397 ((
DecisiÚT»eNode
*)
this
->
	`G‘Right
())->
	`PrštRecPruÃ
(
os
);

399 
	}
}

403 
	gTMVA
::
DecisiÚT»eNode
::
	$S‘CC
(
DoubË_t
 
cc
)

405 ià(
fT¿šInfo
èfT¿šInfo->
fCC
 = 
cc
;

406 
	`Log
(è<< 
kFATAL
 << "ÿÎØS‘CC w™houˆŒaššgInfo" << 
Endl
;

407 
	}
}

413 
Flßt_t
 
	gTMVA
::
DecisiÚT»eNode
::
	$G‘Sam¶eMš
(
UIÁ_t
 
iv¬
) const {

414 ià(
fT¿šInfo
 && 
iv¬
 < fT¿šInfo->
fSam¶eMš
.
	`size
())  fTrainInfo->fSampleMin[ivar];

415 
	`Log
(è<< 
kFATAL
 << "You‡sked for Min ofheƒvent sample in‚ode for variable "

416 << 
iv¬
 << "h© i ouˆoà¿nge" << 
Endl
;

418 
	}
}

424 
Flßt_t
 
	gTMVA
::
DecisiÚT»eNode
::
	$G‘Sam¶eMax
(
UIÁ_t
 
iv¬
) const {

425 ià(
fT¿šInfo
 && 
iv¬
 < fT¿šInfo->
fSam¶eMš
.
	`size
()è fT¿šInfo->
fSam¶eMax
[ivar];

426 
	`Log
(è<< 
kFATAL
 << "You‡sked for Max ofheƒvent sample in‚ode for variable "

427 << 
iv¬
 << "h© i ouˆoà¿nge" << 
Endl
;

429 
	}
}

435 
	gTMVA
::
DecisiÚT»eNode
::
	$S‘Sam¶eMš
(
UIÁ_t
 
iv¬
, 
Flßt_t
 
xmš
){

436 iàĞ
fT¿šInfo
) {

437 iàĞ
iv¬
 >ğ
fT¿šInfo
->
fSam¶eMš
.
	`size
()èfT¿šInfo->fSam¶eMš.
	`»size
(ivar+1);

438 
fT¿šInfo
->
fSam¶eMš
[
iv¬
]=
xmš
;

440 
	}
}

446 
	gTMVA
::
DecisiÚT»eNode
::
	$S‘Sam¶eMax
(
UIÁ_t
 
iv¬
, 
Flßt_t
 
xmax
){

447 ifĞ! 
fT¿šInfo
 ) ;

448 iàĞ
iv¬
 >ğ
fT¿šInfo
->
fSam¶eMax
.
	`size
() )

449 
fT¿šInfo
->
fSam¶eMax
.
	`»size
(
iv¬
+1);

450 
fT¿šInfo
->
fSam¶eMax
[
iv¬
]=
xmax
;

451 
	}
}

455 
	gTMVA
::
DecisiÚT»eNode
::
	$R—dA‰ribu‹s
(* 
node
, 
UIÁ_t
 )

457 
Flßt_t
 
‹mpNSigEv’ts
,
‹mpNBkgEv’ts
;

459 
IÁ_t
 
nCÛf
;

460 ià(
	`gToŞs
().
	`HasA‰r
(
node
, "NCoef")){

461 
	`gToŞs
().
	`R—dA‰r
(
node
, "NCÛf", 
nCÛf
 );

462 
this
->
	`S‘NFish”CÛff
(
nCÛf
);

463 
DoubË_t
 
tmp
;

464 
IÁ_t
 
i
=0; i< (IÁ_tè
this
->
	`G‘NFish”CÛff
(); i++) {

465 
	`gToŞs
().
	`R—dA‰r
(
node
, 
	`FÜm
("fC%d",
i
), 
tmp
 );

466 
this
->
	`S‘Fish”CÛff
(
i
,
tmp
);

469 
this
->
	`S‘NFish”CÛff
(0);

471 
	`gToŞs
().
	`R—dA‰r
(
node
, "IV¬", 
fS–eùÜ
 );

472 
	`gToŞs
().
	`R—dA‰r
(
node
, "Cut", 
fCutV®ue
 );

473 
	`gToŞs
().
	`R—dA‰r
(
node
, "cTy³", 
fCutTy³
 );

474 ià(
	`gToŞs
().
	`HasA‰r
(
node
,"»s")ègToŞs().
	`R—dA‰r
Òode, "»s", 
fRe¥Ú£
);

475 ià(
	`gToŞs
().
	`HasA‰r
(
node
,"rms")ègToŞs().
	`R—dA‰r
Òode, "rms", 
fRMS
);

477 ifĞ
	`gToŞs
().
	`HasA‰r
(
node
, "purity") ) {

478 
	`gToŞs
().
	`R—dA‰r
(
node
, "pur™y",
fPur™y
 );

480 
	`gToŞs
().
	`R—dA‰r
(
node
, "nS", 
‹mpNSigEv’ts
 );

481 
	`gToŞs
().
	`R—dA‰r
(
node
, "nB", 
‹mpNBkgEv’ts
 );

482 
fPur™y
 = 
‹mpNSigEv’ts
 / (‹mpNSigEv’t + 
‹mpNBkgEv’ts
);

485 
	`gToŞs
().
	`R—dA‰r
(
node
, "nTy³", 
fNodeTy³
 );

486 
	}
}

492 
	gTMVA
::
DecisiÚT»eNode
::
	$AddA‰ribu‹sToNode
(* 
node
) const

494 
	`gToŞs
().
	`AddA‰r
(
node
, "NCÛf", 
	`G‘NFish”CÛff
());

495 
IÁ_t
 
i
=0; i< (IÁ_tè
this
->
	`G‘NFish”CÛff
(); i++)

496 
	`gToŞs
().
	`AddA‰r
(
node
, 
	`FÜm
("fC%d",
i
), 
this
->
	`G‘Fish”CÛff
(i));

498 
	`gToŞs
().
	`AddA‰r
(
node
, "IV¬", 
	`G‘S–eùÜ
());

499 
	`gToŞs
().
	`AddA‰r
(
node
, "Cut", 
	`G‘CutV®ue
());

500 
	`gToŞs
().
	`AddA‰r
(
node
, "cTy³", 
	`G‘CutTy³
());

504 
	`gToŞs
().
	`AddA‰r
(
node
, "»s", 
	`G‘Re¥Ú£
());

505 
	`gToŞs
().
	`AddA‰r
(
node
, "rms", 
	`G‘RMS
());

507 
	`gToŞs
().
	`AddA‰r
(
node
, "pur™y",
	`G‘Pur™y
());

509 
	`gToŞs
().
	`AddA‰r
(
node
, "nTy³", 
	`G‘NodeTy³
());

510 
	}
}

515 
	gTMVA
::
DecisiÚT»eNode
::
	$S‘Fish”CÛff
(
IÁ_t
 
iv¬
, 
DoubË_t
 
cÛff
)

517 ià((
IÁ_t
è
fFish”CÛff
.
	`size
()<
iv¬
+1èfFish”CÛff.
	`»size
(ivar+1) ;

518 
fFish”CÛff
[
iv¬
]=
cÛff
;

519 
	}
}

526 
	gTMVA
::
DecisiÚT»eNode
::
	$AddCÚ‹ÁToNode
Ğ
¡d
::
¡ršg¡»am
& ) const

528 
	}
}

535 
TMVA
::
DecisiÚT»eNode
::
	$R—dCÚ‹Á
Ğ
¡d
::
¡ršg¡»am
& )

537 
	}
}

540 
TMVA
::
MsgLogg”
& TMVA::
DecisiÚT»eNode
::
	$Log
() {

541 
	`TTHREAD_TLS_DECL_ARG
(
MsgLogg”
,
logg”
,"DecisionTreeNode");

542  
logg”
;

543 
	}
}

	@src/Envelope.cxx

11 
	~"TMVA/Env–İe.h
"

13 
	~"TMVA/CÚfigu¿bË.h
"

14 
	~"TMVA/D©aLßd”.h
"

15 
	~"TMVA/M‘hodBa£.h
"

16 
	~"TMVA/O±iÚM­.h
"

17 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

18 
	~"TMVA/Ty³s.h
"

20 
	~"TAxis.h
"

21 
	~"TCªvas.h
"

22 
	~"TFe.h
"

23 
	~"TG¿ph.h
"

24 
	~"TSy¡em.h
"

26 
	~<io¡»am
>

28 
usšg
 
Çme¥aû
 
	gTMVA
;

32 
	gEnv–İe
::
	$Env–İe
(cÚ¡ 
TSŒšg
 &
Çme
,
D©aLßd”
 *
d®®ßd”
,
TFe
 *
fe
,cÚ¡ TSŒšg 
İtiÚs
):
	`CÚfigu¿bË
(İtiÚs),
	`fD©aLßd”
(d®®ßd”),
	`fFe
(fe),
	$fV”bo£
(
kFALSE
)

34 
	`S‘Name
(
Çme
.
	`D©a
());

35 
fMod–P”si¡’û
 = 
kTRUE
;

36 
	}
}

40 
	gEnv–İe
::~
	$Env–İe
()

41 {
	}
}

45 
BoŞ_t
 
Env–İe
::
	$IsS’tFe
(){ 
fFe
==
nuÎ±r
;
	}
}

49 
TFe
* 
	gEnv–İe
::
	$G‘Fe
(){ 
fFe
.
	`g‘
();
	}
}

54 
	gEnv–İe
::
	$S‘Fe
(
TFe
 *
fe
){
fFe
=
¡d
::
sh¬ed_±r
<TFe>(fe);
	}
}

58 
BoŞ_t
 
	gEnv–İe
::
	$IsV”bo£
(){ 
fV”bo£
;
	}
}

62 
	gEnv–İe
::
	$S‘V”bo£
(
BoŞ_t
 
¡©us
){
fV”bo£
=¡©us;
	}
}

66 
	gO±iÚM­
 &
	gEnv–İe
::
	$G‘M‘hod
(){  
fM‘hod
;
	}
}

70 
D©aLßd”
 *
	gEnv–İe
::
	$G‘D©aLßd”
(){  
fD©aLßd”
.
	`g‘
();
	}
}

74 
	gEnv–İe
::
	$S‘D©aLßd”
(
D©aLßd”
 *
d®®ßd”
){

75 
fD©aLßd”
=
¡d
::
sh¬ed_±r
<
D©aLßd”
>(
d®®ßd”
) ;

76 
	}
}

80 
BoŞ_t
 
	gTMVA
::
Env–İe
::
	$IsMod–P”si¡’û
(){ 
fMod–P”si¡’û
; 
	}
}

84 
	gTMVA
::
Env–İe
::
	$S‘Mod–P”si¡’û
(
BoŞ_t
 
¡©us
){
fMod–P”si¡’û
=¡©us;
	}
}

88 
	gTMVA
::
Env–İe
::
	$BookM‘hod
(
Ty³s
::
EMVA
 
m‘hod
, 
TSŒšg
 
m‘hodT™Ë
, TSŒšg 
İtiÚs
){

89  
	`BookM‘hod
(
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodName
Ğ
m‘hod
 ),
m‘hodT™Ë
,
İtiÚs
);

90 
	}
}

94 
	gTMVA
::
Env–İe
::
	$BookM‘hod
(
TSŒšg
 
m‘hodName
, TSŒšg 
m‘hodT™Ë
, TSŒšg 
İtiÚs
){

95 
fM‘hod
["M‘hodName"] = 
m‘hodName
;

96 
fM‘hod
["M‘hodT™Ë"] = 
m‘hodT™Ë
;

97 
fM‘hod
["M‘hodO±iÚs"] = 
İtiÚs
;

98 
	}
}

	@src/Event.cxx

31 
	~"TMVA/Ev’t.h
"

32 
	~"TMVA/ToŞs.h
"

33 
	~<io¡»am
>

34 
	~"as£¹.h
"

35 
	~<iomª
>

36 
	~<ÿs£¹
>

37 
	~"TCut.h
"

43 
BoŞ_t
 
	gTMVA
::
Ev’t
::
fgIsT¿ššg
 = 
kFALSE
;

44 
BoŞ_t
 
	gTMVA
::
Ev’t
::
fgIgnÜeNegWeightsInT¿ššg
 = 
kFALSE
;

49 
	gTMVA
::
Ev’t
::
	$Ev’t
()

50 : 
	`fV®ues
(),

51 
	`fV®uesDyÇmic
(0),

52 
	`fT¬g‘s
(),

53 
	`fS³ù©Üs
(),

54 
	`fV¬ŸbËA¼ªgem’t
(0),

55 
	`fCÏss
(0),

56 
	`fWeight
(1.0),

57 
	`fBoo¡Weight
(1.0),

58 
	`fDyÇmic
(
kFALSE
),

59 
	$fDoNÙBoo¡
(
kFALSE
)

61 
	}
}

66 
	gTMVA
::
Ev’t
::Ev’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
ev
,

67 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
tg
,

68 
UIÁ_t
 
şs
,

69 
DoubË_t
 
weight
,

70 
DoubË_t
 
boo¡weight
 )

71 : 
fV®ues
(
ev
),

72 
fV®uesDyÇmic
(0),

73 
fT¬g‘s
(
tg
),

74 
fS³ù©Üs
(0),

75 
fV¬ŸbËA¼ªgem’t
(0),

76 
fCÏss
(
şs
),

77 
fWeight
(
weight
),

78 
fBoo¡Weight
(
boo¡weight
),

79 
fDyÇmic
(
kFALSE
),

80 
	$fDoNÙBoo¡
(
kFALSE
)

82 
	}
}

87 
	gTMVA
::
Ev’t
::Ev’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
ev
,

88 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
tg
,

89 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
vi
,

90 
UIÁ_t
 
şs
,

91 
DoubË_t
 
weight
,

92 
DoubË_t
 
boo¡weight
 )

93 : 
fV®ues
(
ev
),

94 
fV®uesDyÇmic
(0),

95 
fT¬g‘s
(
tg
),

96 
fS³ù©Üs
(
vi
),

97 
fV¬ŸbËA¼ªgem’t
(0),

98 
fCÏss
(
şs
),

99 
fWeight
(
weight
),

100 
fBoo¡Weight
(
boo¡weight
),

101 
fDyÇmic
(
kFALSE
),

102 
	$fDoNÙBoo¡
(
kFALSE
)

104 
	}
}

109 
	gTMVA
::
Ev’t
::Ev’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
ev
,

110 
UIÁ_t
 
şs
,

111 
DoubË_t
 
weight
,

112 
DoubË_t
 
boo¡weight
 )

113 : 
fV®ues
(
ev
),

114 
fV®uesDyÇmic
(0),

115 
fT¬g‘s
(0),

116 
fS³ù©Üs
(0),

117 
fV¬ŸbËA¼ªgem’t
(0),

118 
fCÏss
(
şs
),

119 
fWeight
(
weight
),

120 
fBoo¡Weight
(
boo¡weight
),

121 
fDyÇmic
(
kFALSE
),

122 
	$fDoNÙBoo¡
(
kFALSE
)

124 
	}
}

129 
	gTMVA
::
Ev’t
::Ev’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
*>*& 
evdyn
, 
UIÁ_t
 
nv¬
 )

130 : 
fV®ues
(
nv¬
),

131 
fV®uesDyÇmic
(0),

132 
fT¬g‘s
(0),

133 
fS³ù©Üs
(
evdyn
->
size
()-
nv¬
),

134 
fV¬ŸbËA¼ªgem’t
(0),

135 
fCÏss
(0),

136 
fWeight
(0),

137 
fBoo¡Weight
(0),

138 
fDyÇmic
(
Œue
),

139 
	$fDoNÙBoo¡
(
kFALSE
)

141 
fV®uesDyÇmic
 = (
¡d
::
veùÜ
<
Flßt_t
*>*è
evdyn
;

142 
	}
}

147 
	gTMVA
::
Ev’t
::
	$Ev’t
ĞcÚ¡ 
Ev’t
& 
ev’t
 )

148 : 
	`TObjeù
(
ev’t
),

149 
	`fV®ues
(
ev’t
.
fV®ues
),

150 
	`fV®uesDyÇmic
(
ev’t
.
fV®uesDyÇmic
),

151 
	`fT¬g‘s
(
ev’t
.
fT¬g‘s
),

152 
	`fS³ù©Üs
(
ev’t
.
fS³ù©Üs
),

153 
	`fV¬ŸbËA¼ªgem’t
(
ev’t
.
fV¬ŸbËA¼ªgem’t
),

154 
	`fCÏss
(
ev’t
.
fCÏss
),

155 
	`fWeight
(
ev’t
.
fWeight
),

156 
	`fBoo¡Weight
(
ev’t
.
fBoo¡Weight
),

157 
	`fDyÇmic
(
ev’t
.
fDyÇmic
),

158 
	$fDoNÙBoo¡
(
kFALSE
)

160 ià(
ev’t
.
fDyÇmic
){

161 
fV®ues
.
	`ş—r
();

162 
UIÁ_t
 
nv¬
 = 
ev’t
.
	`G‘NV¬ŸbËs
();

163 
UIÁ_t
 
idx
=0;

164 
¡d
::
veùÜ
<
Flßt_t
*>::
™”©Ü
 
™Dyn
=
ev’t
.
fV®uesDyÇmic
->
	`begš
(), 
™DynEnd
óv’t.fV®uesDyÇmic->
	`’d
();

165 ; 
™Dyn
!=
™DynEnd
 && 
idx
<
nv¬
; ++itDyn){

166 
Flßt_t
 
v®ue
=*(*
™Dyn
);

167 
fV®ues
.
	`push_back
Ğ
v®ue
 );

168 ++
idx
;

170 
fS³ù©Üs
.
	`ş—r
();

171 ; 
™Dyn
!=
™DynEnd
; ++itDyn){

172 
Flßt_t
 
v®ue
=*(*
™Dyn
);

173 
fS³ù©Üs
.
	`push_back
Ğ
v®ue
 );

174 ++
idx
;

177 
fDyÇmic
=
kFALSE
;

178 
fV®uesDyÇmic
=
NULL
;

180 
	}
}

185 
	gTMVA
::
Ev’t
::~
	$Ev’t
()

188 
	}
}

192 
TMVA
::
Ev’t
::
S‘V¬ŸbËA¼ªgem’t
Ğ
¡d
::
veùÜ
<
UIÁ_t
>* cÚ¡ 
m
 ) const {

196 if(!
m
)
fV¬ŸbËA¼ªgem’t
.
ş—r
();

197 
	gfV¬ŸbËA¼ªgem’t
 = *
m
;

204 
	gTMVA
::
Ev’t
::
	$CİyV¬V®ues
ĞcÚ¡ 
Ev’t
& 
Ùh”
 )

206 
fV®ues
 = 
Ùh”
.fValues;

207 
fT¬g‘s
 = 
Ùh”
.fTargets;

208 
fS³ù©Üs
 = 
Ùh”
.fSpectators;

209 ià(
Ùh”
.
fDyÇmic
){

210 
UIÁ_t
 
nv¬
 = 
Ùh”
.
	`G‘NV¬ŸbËs
();

211 
fV®ues
.
	`ş—r
();

212 
UIÁ_t
 
idx
=0;

213 
¡d
::
veùÜ
<
Flßt_t
*>::
™”©Ü
 
™Dyn
=
Ùh”
.
fV®uesDyÇmic
->
	`begš
(), 
™DynEnd
=Ùh”.fV®uesDyÇmic->
	`’d
();

214 ; 
™Dyn
!=
™DynEnd
 && 
idx
<
nv¬
; ++itDyn){

215 
Flßt_t
 
v®ue
=*(*
™Dyn
);

216 
fV®ues
.
	`push_back
Ğ
v®ue
 );

217 ++
idx
;

219 
fS³ù©Üs
.
	`ş—r
();

220 ; 
™Dyn
!=
™DynEnd
; ++itDyn){

221 
Flßt_t
 
v®ue
=*(*
™Dyn
);

222 
fS³ù©Üs
.
	`push_back
Ğ
v®ue
 );

223 ++
idx
;

226 
fDyÇmic
 = 
kFALSE
;

227 
fV®uesDyÇmic
 = 
NULL
;

229 
fCÏss
 = 
Ùh”
.fClass;

230 
fWeight
 = 
Ùh”
.fWeight;

231 
fBoo¡Weight
 = 
Ùh”
.fBoostWeight;

232 
	}
}

237 
Flßt_t
 
	gTMVA
::
Ev’t
::
	$G‘V®ue
Ğ
UIÁ_t
 
iv¬
 ) const

239 
Flßt_t
 
»tv®
;

240 ià(
fV¬ŸbËA¼ªgem’t
.
	`size
()==0) {

241 
»tv®
 = 
fDyÇmic
 ? ( *((
fV®uesDyÇmic
)->
	`©
(
iv¬
)èè: 
fV®ues
.at(ivar);

244 
UIÁ_t
 
m­Idx
 = 
fV¬ŸbËA¼ªgem’t
[
iv¬
];

246 ià(
fDyÇmic
){

248 
»tv®
 = *((
fV®uesDyÇmic
)->
	`©
(
m­Idx
));

252 
»tv®
 = ( 
m­Idx
<
fV®ues
.
	`size
(èè? fV®ues[m­Idx] : 
fS³ù©Üs
[mapIdx-fValues.size()];

256  
»tv®
;

257 
	}
}

262 
Flßt_t
 
	gTMVA
::
Ev’t
::
	$G‘S³ù©Ü
Ğ
UIÁ_t
 
iv¬
) const

264 ià(
fDyÇmic
è *(
fV®uesDyÇmic
->
	`©
(
	`G‘NV¬ŸbËs
()+
iv¬
));

265  
fS³ù©Üs
.
	`©
(
iv¬
);

266 
	}
}

271 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
Ev’t
::
	$G‘V®ues
() const

273 ià(
fV¬ŸbËA¼ªgem’t
.
	`size
()==0) {

275 ià(
fDyÇmic
) {

276 
fV®ues
.
	`ş—r
();

277 
¡d
::
veùÜ
<
Flßt_t
*>::
cÚ¡_™”©Ü
 
™
 = 
fV®uesDyÇmic
->
	`begš
(), 
™End
=fV®uesDyÇmic->
	`’d
()-
	`G‘NS³ù©Üs
();

278 
™
 !ğ
™End
; ++it) {

279 
Flßt_t
 
v®
 = *(*
™
);

280 
fV®ues
.
	`push_back
Ğ
v®
 );

284 
UIÁ_t
 
m­Idx
;

285 ià(
fDyÇmic
) {

286 
fV®ues
.
	`ş—r
();

287 
UIÁ_t
 
i
=0; i< 
fV¬ŸbËA¼ªgem’t
.
	`size
(); i++){

288 
m­Idx
 = 
fV¬ŸbËA¼ªgem’t
[
i
];

289 
fV®ues
.
	`push_back
(*((
fV®uesDyÇmic
)->
	`©
(
m­Idx
)));

295 
fV®uesR—¼ªged
.
	`ş—r
();

296 
UIÁ_t
 
i
=0; i< 
fV¬ŸbËA¼ªgem’t
.
	`size
(); i++){

297 
m­Idx
 = 
fV¬ŸbËA¼ªgem’t
[
i
];

298 
fV®uesR—¼ªged
.
	`push_back
(
fV®ues
.
	`©
(
m­Idx
));

300  
fV®uesR—¼ªged
;

303  
fV®ues
;

304 
	}
}

309 
UIÁ_t
 
	gTMVA
::
Ev’t
::
	$G‘NV¬ŸbËs
() const

313 ià(
fV¬ŸbËA¼ªgem’t
.
	`size
()==0è 
fV®ues
.size();

314  
fV¬ŸbËA¼ªgem’t
.
	`size
();

315 
	}
}

320 
UIÁ_t
 
	gTMVA
::
Ev’t
::
	$G‘NT¬g‘s
() const

322  
fT¬g‘s
.
	`size
();

323 
	}
}

328 
UIÁ_t
 
	gTMVA
::
Ev’t
::
	$G‘NS³ù©Üs
() const

333 ià(
fV¬ŸbËA¼ªgem’t
.
	`size
()==0è 
fS³ù©Üs
.size();

334  
fV®ues
.
	`size
()-
fV¬ŸbËA¼ªgem’t
.size();

335 
	}
}

341 
	gTMVA
::
Ev’t
::
	$S‘V®
Ğ
UIÁ_t
 
iv¬
, 
Flßt_t
 
v®
 )

343 ià((
fDyÇmic
 ?Ğ(*
fV®uesDyÇmic
).
	`size
(èè: 
fV®ues
.size())<=
iv¬
)

344 (
fDyÇmic
 ?Ğ(*
fV®uesDyÇmic
).
	`»size
(
iv¬
+1èè: 
fV®ues
.resize(ivar+1));

346 (
fDyÇmic
 ?Ğ*(*
fV®uesDyÇmic
)[
iv¬
] ) : 
fV®ues
[iv¬])=
v®
;

347 
	}
}

352 
	gTMVA
::
Ev’t
::
	$Pršt
Ğ
¡d
::
o¡»am
& 
o
 ) const

354 
o
 << *
this
 << 
¡d
::
’dl
;

355 
	}
}

360 
	gTMVA
::
Ev’t
::
	$S‘T¬g‘
Ğ
UIÁ_t
 
™gt
, 
Flßt_t
 
v®ue
 )

362 ià(
fT¬g‘s
.
	`size
(è<ğ
™gt
èfT¬g‘s.
	`»size
( itgt+1 );

363 
fT¬g‘s
.
	`©
(
™gt
èğ
v®ue
;

364 
	}
}

369 
	gTMVA
::
Ev’t
::
	$S‘S³ù©Ü
Ğ
UIÁ_t
 
iv¬
, 
Flßt_t
 
v®ue
 )

371 ià(
fS³ù©Üs
.
	`size
(è<ğ
iv¬
èfS³ù©Üs.
	`»size
( ivar+1 );

372 
fS³ù©Üs
.
	`©
(
iv¬
èğ
v®ue
;

373 
	}
}

382 
DoubË_t
 
	gTMVA
::
Ev’t
::
	$G‘Weight
() const

384  (
fgIgnÜeNegWeightsInT¿ššg
 && 
fgIsT¿ššg
 && 
fWeight
 < 0è? 0. : fWeight*
fBoo¡Weight
;

385 
	}
}

392 
	gTMVA
::
Ev’t
::
	$S‘IsT¿ššg
(
BoŞ_t
 
b
)

394 
fgIsT¿ššg
=
b
;

395 
	}
}

401 
	gTMVA
::
Ev’t
::
	$S‘IgnÜeNegWeightsInT¿ššg
(
BoŞ_t
 
b
)

403 
fgIgnÜeNegWeightsInT¿ššg
=
b
;

404 
	}
}

409 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
 << ( 
¡d
::o¡»am& 
os
, cÚ¡ 
	gTMVA
::
Ev’t
& 
ev’t
 )

411 
os
 << "V¬ŸbË [" << 
ev’t
.
fV®ues
.
size
() << "]:";

412 
UIÁ_t
 
	giv¬
=0; iv¬<
	gev’t
.
	gfV®ues
.
size
(); ++ivar)

413 
	gos
 << " " << 
	g¡d
::
£tw
(10è<< 
ev’t
.
G‘V®ue
(
iv¬
);

414 
	gos
 << ",¬g‘ [" << 
	gev’t
.
	gfT¬g‘s
.
size
() << "]:";

415 
UIÁ_t
 
	giv¬
=0; iv¬<
	gev’t
.
	gfT¬g‘s
.
size
(); ++ivar)

416 
	gos
 << " " << 
	g¡d
::
£tw
(10è<< 
ev’t
.
G‘T¬g‘
(
iv¬
);

417 
	gos
 << ", s³ù©Ü ["<< 
	gev’t
.
	gfS³ù©Üs
.
size
() << "]:";

418 
UIÁ_t
 
	giv¬
=0; iv¬<
	gev’t
.
	gfS³ù©Üs
.
size
(); ++ivar)

419 
	gos
 << " " << 
	g¡d
::
£tw
(10è<< 
ev’t
.
G‘S³ù©Ü
(
iv¬
);

420 
	gos
 << ", weight: " << 
	gev’t
.
G‘Weight
();

421 
	gos
 << ", cÏss: " << 
	gev’t
.
G‘CÏss
();

422  
	gos
;

	@src/ExpectedErrorPruneTool.cxx

45 
	~"TMVA/Ex³ùedE¼ÜPruÃToŞ.h
"

46 
	~"TMVA/DecisiÚT»e.h
"

47 
	~"TMVA/IPruÃToŞ.h
"

48 
	~"TMVA/MsgLogg”.h
"

49 
	~"TMVA/Ty³s.h
"

51 
	~"Rty³sCÜe.h
"

52 
	~"Rty³s.h
"

53 
	~"TM©h.h
"

55 
	~<m­
>

59 
	gTMVA
::
Ex³ùedE¼ÜPruÃToŞ
::
	$Ex³ùedE¼ÜPruÃToŞ
() :

60 
	`IPruÃToŞ
(),

61 
	`fD–PruÃSŒ’gth
(0),

62 
	`fNodePur™yLim™
(1),

63 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("ExpectedErrorPruneTool") )

64 {
	}
}

68 
	gTMVA
::
Ex³ùedE¼ÜPruÃToŞ
::~
	$Ex³ùedE¼ÜPruÃToŞ
()

70 
d–‘e
 
fLogg”
;

71 
	}
}

75 
	gTMVA
::
PrunšgInfo
*

76 
TMVA
::
Ex³ùedE¼ÜPruÃToŞ
::
	$C®cuÏ‹PrunšgInfo
Ğ
DecisiÚT»e
* 
dt
,

77 cÚ¡ 
IPruÃToŞ
::
Ev’tSam¶e
* 
v®id©iÚSam¶e
,

78 
BoŞ_t
 
isAutom©ic
 )

80 ifĞ
isAutom©ic
 ) {

82 
isAutom©ic
 = 
kFALSE
;

83 
	`Log
(è<< 
kWARNING
 << "SÜry‡utom©iø´unšg sŒ’gth d‘”mš©iÚ i nÙ im¶em’‹d y‘" << 
Endl
;

85 ifĞ
dt
 =ğ
NULL
 || (
	`IsAutom©ic
(è&& 
v®id©iÚSam¶e
 == NULL) ) {

89  
NULL
;

91 
fNodePur™yLim™
 = 
dt
->
	`G‘NodePur™yLim™
();

93 if(
	`IsAutom©ic
()) {

94 
	`Log
(è<< 
kFATAL
 << "SÜry‡utom©iø´unšg sŒ’gth d‘”mš©iÚ i nÙ im¶em’‹d y‘" << 
Endl
;

161  
NULL
;

164 
	`FšdLi¡OfNodes
Ğ(
DecisiÚT»eNode
*)
dt
->
	`G‘RoÙ
() );

165  
Ãw
 
	`PrunšgInfo
Ğ-1.0, 
fPruÃSŒ’gth
, 
fPruÃSequ’û
 );

167 
	}
}

172 
	gTMVA
::
Ex³ùedE¼ÜPruÃToŞ
::
	$FšdLi¡OfNodes
Ğ
DecisiÚT»eNode
* 
node
 )

174 
TMVA
::
DecisiÚT»eNode
 *
l
 = (TMVA::DecisiÚT»eNode*)
node
->
	`G‘Leá
();

175 
TMVA
::
DecisiÚT»eNode
 *
r
 = (TMVA::DecisiÚT»eNode*)
node
->
	`G‘Right
();

176 ià(
node
->
	`G‘NodeTy³
(è=ğ0 && !Òode->
	`IsT”mš®
())) {

177 
this
->
	`FšdLi¡OfNodes
(
l
);

178 
this
->
	`FšdLi¡OfNodes
(
r
);

179 ià(
this
->
	`G‘SubT»eE¼Ü
(
node
è>ğthis->
	`G‘NodeE¼Ü
(node)) {

181 
fPruÃSequ’û
.
	`push_back
(
node
);

184 
	}
}

190 
DoubË_t
 
	gTMVA
::
Ex³ùedE¼ÜPruÃToŞ
::
	$G‘SubT»eE¼Ü
Ğ
DecisiÚT»eNode
* 
node
 ) const

192 
DecisiÚT»eNode
 *
l
 = (DecisiÚT»eNode*)
node
->
	`G‘Leá
();

193 
DecisiÚT»eNode
 *
r
 = (DecisiÚT»eNode*)
node
->
	`G‘Right
();

194 ià(
node
->
	`G‘NodeTy³
(è=ğ0 && !Òode->
	`IsT”mš®
())) {

195 
DoubË_t
 
subT»eE¼Ü
 =

196 (
l
->
	`G‘NEv’ts
(è* 
this
->
	`G‘SubT»eE¼Ü
(l) +

197 
r
->
	`G‘NEv’ts
(è* 
this
->
	`G‘SubT»eE¼Ü
(r)) /

198 
node
->
	`G‘NEv’ts
();

199  
subT»eE¼Ü
;

202  
this
->
	`G‘NodeE¼Ü
(
node
);

204 
	}
}

216 
DoubË_t
 
	gTMVA
::
Ex³ùedE¼ÜPruÃToŞ
::
	$G‘NodeE¼Ü
Ğ
DecisiÚT»eNode
 *
node
 ) const

218 
DoubË_t
 
”rÜR©e
 = 0;

220 
DoubË_t
 
nEvts
 = 
node
->
	`G‘NEv’ts
();

223 
DoubË_t
 
f
 = 0;

224 ià(
node
->
	`G‘Pur™y
(è> 
fNodePur™yLim™
è
f
 =‚ode->GetPurity();

225 
f
 = (1-
node
->
	`G‘Pur™y
());

227 
DoubË_t
 
df
 = 
TM©h
::
	`Sq¹
(
f
*(1-f)/
nEvts
);

229 
”rÜR©e
 = 
¡d
::
	`mš
(1.0,(1.0 - (
f
-
fPruÃSŒ’gth
*
df
)));

265  
”rÜR©e
;

266 
	}
}

	@src/Factory.cxx

47 
	~"TMVA/FaùÜy.h
"

49 
	~"TMVA/CÏssif›rFaùÜy.h
"

50 
	~"TMVA/CÚfig.h
"

51 
	~"TMVA/CÚfigu¿bË.h
"

52 
	~"TMVA/ToŞs.h
"

53 
	~"TMVA/Rªkšg.h
"

54 
	~"TMVA/D©aS‘.h
"

55 
	~"TMVA/IM‘hod.h
"

56 
	~"TMVA/M‘hodBa£.h
"

57 
	~"TMVA/D©aIÅutHªdËr.h
"

58 
	~"TMVA/D©aS‘Mªag”.h
"

59 
	~"TMVA/D©aS‘Info.h
"

60 
	~"TMVA/D©aLßd”.h
"

61 
	~"TMVA/M‘hodBoo¡.h
"

62 
	~"TMVA/M‘hodC©egÜy.h
"

63 
	~"TMVA/ROCC®c.h
"

64 
	~"TMVA/ROCCurve.h
"

65 
	~"TMVA/MsgLogg”.h
"

67 
	~"TMVA/V¬ŸbËInfo.h
"

68 
	~"TMVA/V¬ŸbËT¿nsfÜm.h
"

70 
	~"TMVA/ResuÉs.h
"

71 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

72 
	~"TMVA/ResuÉsReg»ssiÚ.h
"

73 
	~"TMVA/ResuÉsMuÉişass.h
"

74 
	~<li¡
>

75 
	~<b™£t
>

77 
	~"TMVA/Ty³s.h
"

79 
	~"TROOT.h
"

80 
	~"TFe.h
"

81 
	~"TT»e.h
"

82 
	~"TL—f.h
"

83 
	~"TEv’tLi¡.h
"

84 
	~"TH2.h
"

85 
	~"TText.h
"

86 
	~"TLeg’d.h
"

87 
	~"TG¿ph.h
"

88 
	~"TStyË.h
"

89 
	~"TM©rixF.h
"

90 
	~"TM©rixDSym.h
"

91 
	~"TMuÉiG¿ph.h
"

92 
	~"TP®‘‹Axis.h
"

93 
	~"TPršc®.h
"

94 
	~"TM©h.h
"

95 
	~"TObjSŒšg.h
"

96 
	~"TSy¡em.h
"

97 
	~"TCªvas.h
"

99 cÚ¡ 
IÁ_t
 
	gMšNoT¿ššgEv’ts
 = 10;

102 
CÏssImp
(
TMVA
::
FaùÜy
);

104 
	#READXML
 
kTRUE


	)

107 
	#VIBITS
 32

	)

119 
	gTMVA
::
FaùÜy
::
	$FaùÜy
Ğ
TSŒšg
 
jobName
, 
TFe
* 
theT¬g‘Fe
, TSŒšg 
theO±iÚ
 )

120 : 
	`CÚfigu¿bË
 ( 
theO±iÚ
 ),

121 
	`fT¿nsfÜm©iÚs
 ( "I" ),

122 
	`fV”bo£
 ( 
kFALSE
 ),

123 
	`fCÜ»ÏtiÚs
 ( 
kFALSE
 ),

124 
	`fROC
 ( 
kTRUE
 ),

125 
	`fS’tFe
 ( 
kFALSE
 ),

126 
	`fJobName
 ( 
jobName
 ),

127 
	`fAÇlysisTy³
 ( 
Ty³s
::
kCÏssifiÿtiÚ
 ),

128 
	$fMod–P”si¡’û
 (
kTRUE
)

130 
fgT¬g‘Fe
 = 
theT¬g‘Fe
;

131 
fLogg”
->
	`S‘Sourû
(
	`G‘Name
());

134 ià(
	`gToŞs
().
	`CheckFÜS’tO±iÚ
Ğ
	`G‘O±iÚs
(è)è
	`Log
().
	`Inhib™Ouut
();

138 
	`S‘CÚfigDesütiÚ
( "Configuration options for Factory„unning" );

139 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

144 
BoŞ_t
 
s’t
 = 
kFALSE
;

145 #ifdeà
WIN32


147 
BoŞ_t
 
cŞÜ
 = 
kFALSE
;

148 
BoŞ_t
 
d¿wProg»ssB¬
 = 
kFALSE
;

150 
BoŞ_t
 
cŞÜ
 = !
gROOT
->
	`IsB©ch
();

151 
BoŞ_t
 
d¿wProg»ssB¬
 = 
kTRUE
;

153 
	`Deş¬eO±iÚRef
Ğ
fV”bo£
, "V", "Verbose flag" );

154 
	`Deş¬eO±iÚRef
Ğ
cŞÜ
, "Color", "Flag for coloured screen output (default: True, if in batch mode: False)" );

155 
	`Deş¬eO±iÚRef
Ğ
fT¿nsfÜm©iÚs
, "Transformations", "List ofransformationsoest; formattingƒxample: \"Transformations=I;D;P;U;G,D\", for identity, decorrelation, PCA, Uniform‡nd Gaussianisation followed by decorrelationransformations" );

156 
	`Deş¬eO±iÚRef
Ğ
fCÜ»ÏtiÚs
, "Correlations", "booleano show correlation in output" );

157 
	`Deş¬eO±iÚRef
Ğ
fROC
, "ROC", "booleano show ROC in output" );

158 
	`Deş¬eO±iÚRef
Ğ
s’t
, "Silent", "Batch mode: boolean silent flag inhibiting‡ny output from TMVA‡fterhe creation ofhe factory class object (default: False)" );

159 
	`Deş¬eO±iÚRef
Ğ
d¿wProg»ssB¬
,

161 
	`Deş¬eO±iÚRef
Ğ
fMod–P”si¡’û
,

165 
TSŒšg
 
	`ª®ysisTy³
("Auto");

166 
	`Deş¬eO±iÚRef
Ğ
ª®ysisTy³
,

168 
	`AddP»DefV®
(
	`TSŒšg
("Classification"));

169 
	`AddP»DefV®
(
	`TSŒšg
("Regression"));

170 
	`AddP»DefV®
(
	`TSŒšg
("Multiclass"));

171 
	`AddP»DefV®
(
	`TSŒšg
("Auto"));

173 
	`P¬£O±iÚs
();

174 
	`CheckFÜUnu£dO±iÚs
();

176 ià(
	`V”bo£
()è
	`Log
().
	`S‘MšTy³
Ğ
kVERBOSE
 );

179 
	`gCÚfig
().
	`S‘U£CŞÜ
Ğ
cŞÜ
 );

180 
	`gCÚfig
().
	`S‘S’t
Ğ
s’t
 );

181 
	`gCÚfig
().
	`S‘D¿wProg»ssB¬
Ğ
d¿wProg»ssB¬
 );

183 
ª®ysisTy³
.
	`ToLow”
();

184 iàĞ
ª®ysisTy³
 =ğ"şassifiÿtiÚ" ) 
fAÇlysisTy³
 = 
Ty³s
::
kCÏssifiÿtiÚ
;

185 ifĞ
ª®ysisTy³
 =ğ"»g»ssiÚ" ) 
fAÇlysisTy³
 = 
Ty³s
::
kReg»ssiÚ
;

186 ifĞ
ª®ysisTy³
 =ğ"muÉişass" ) 
fAÇlysisTy³
 = 
Ty³s
::
kMuÉişass
;

187 ifĞ
ª®ysisTy³
 =ğ"auto" ) 
fAÇlysisTy³
 = 
Ty³s
::
kNoAÇlysisTy³
;

190 
	}
}

195 
	gTMVA
::
FaùÜy
::
	$FaùÜy
Ğ
TSŒšg
 
jobName
, TSŒšg 
theO±iÚ
 )

196 : 
	`CÚfigu¿bË
 ( 
theO±iÚ
 ),

197 
	`fT¿nsfÜm©iÚs
 ( "I" ),

198 
	`fV”bo£
 ( 
kFALSE
 ),

199 
	`fCÜ»ÏtiÚs
 ( 
kFALSE
 ),

200 
	`fROC
 ( 
kTRUE
 ),

201 
	`fS’tFe
 ( 
kTRUE
 ),

202 
	`fJobName
 ( 
jobName
 ),

203 
	`fAÇlysisTy³
 ( 
Ty³s
::
kCÏssifiÿtiÚ
 ),

204 
	$fMod–P”si¡’û
 (
kTRUE
)

206 
fgT¬g‘Fe
 = 0;

207 
fLogg”
->
	`S‘Sourû
(
	`G‘Name
());

211 ià(
	`gToŞs
().
	`CheckFÜS’tO±iÚ
Ğ
	`G‘O±iÚs
(è)è
	`Log
().
	`Inhib™Ouut
();

215 
	`S‘CÚfigDesütiÚ
( "Configuration options for Factory„unning" );

216 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

220 
TH1
::
	`AddDœeùÜy
(
kFALSE
);

221 
BoŞ_t
 
s’t
 = 
kFALSE
;

222 #ifdeà
WIN32


224 
BoŞ_t
 
cŞÜ
 = 
kFALSE
;

225 
BoŞ_t
 
d¿wProg»ssB¬
 = 
kFALSE
;

227 
BoŞ_t
 
cŞÜ
 = !
gROOT
->
	`IsB©ch
();

228 
BoŞ_t
 
d¿wProg»ssB¬
 = 
kTRUE
;

230 
	`Deş¬eO±iÚRef
Ğ
fV”bo£
, "V", "Verbose flag" );

231 
	`Deş¬eO±iÚRef
Ğ
cŞÜ
, "Color", "Flag for coloured screen output (default: True, if in batch mode: False)" );

232 
	`Deş¬eO±iÚRef
Ğ
fT¿nsfÜm©iÚs
, "Transformations", "List ofransformationsoest; formattingƒxample: \"Transformations=I;D;P;U;G,D\", for identity, decorrelation, PCA, Uniform‡nd Gaussianisation followed by decorrelationransformations" );

233 
	`Deş¬eO±iÚRef
Ğ
fCÜ»ÏtiÚs
, "Correlations", "booleano show correlation in output" );

234 
	`Deş¬eO±iÚRef
Ğ
fROC
, "ROC", "booleano show ROC in output" );

235 
	`Deş¬eO±iÚRef
Ğ
s’t
, "Silent", "Batch mode: boolean silent flag inhibiting‡ny output from TMVA‡fterhe creation ofhe factory class object (default: False)" );

236 
	`Deş¬eO±iÚRef
Ğ
d¿wProg»ssB¬
,

238 
	`Deş¬eO±iÚRef
Ğ
fMod–P”si¡’û
,

242 
TSŒšg
 
	`ª®ysisTy³
("Auto");

243 
	`Deş¬eO±iÚRef
Ğ
ª®ysisTy³
,

245 
	`AddP»DefV®
(
	`TSŒšg
("Classification"));

246 
	`AddP»DefV®
(
	`TSŒšg
("Regression"));

247 
	`AddP»DefV®
(
	`TSŒšg
("Multiclass"));

248 
	`AddP»DefV®
(
	`TSŒšg
("Auto"));

250 
	`P¬£O±iÚs
();

251 
	`CheckFÜUnu£dO±iÚs
();

253 ià(
	`V”bo£
()è
	`Log
().
	`S‘MšTy³
Ğ
kVERBOSE
 );

256 
	`gCÚfig
().
	`S‘U£CŞÜ
Ğ
cŞÜ
 );

257 
	`gCÚfig
().
	`S‘S’t
Ğ
s’t
 );

258 
	`gCÚfig
().
	`S‘D¿wProg»ssB¬
Ğ
d¿wProg»ssB¬
 );

260 
ª®ysisTy³
.
	`ToLow”
();

261 iàĞ
ª®ysisTy³
 =ğ"şassifiÿtiÚ" ) 
fAÇlysisTy³
 = 
Ty³s
::
kCÏssifiÿtiÚ
;

262 ifĞ
ª®ysisTy³
 =ğ"»g»ssiÚ" ) 
fAÇlysisTy³
 = 
Ty³s
::
kReg»ssiÚ
;

263 ifĞ
ª®ysisTy³
 =ğ"muÉişass" ) 
fAÇlysisTy³
 = 
Ty³s
::
kMuÉişass
;

264 ifĞ
ª®ysisTy³
 =ğ"auto" ) 
fAÇlysisTy³
 = 
Ty³s
::
kNoAÇlysisTy³
;

266 
	`G»‘šgs
();

267 
	}
}

273 
	gTMVA
::
FaùÜy
::
	$G»‘šgs
()

275 
	`gToŞs
().
	`ROOTV”siÚMes§ge
Ğ
	`Log
() );

276 
	`gToŞs
().
	`TMVAW–comeMes§ge
Ğ
	`Log
(), gToŞs().
kLogoW–comeMsg
 );

277 
	`gToŞs
().
	`TMVAV”siÚMes§ge
Ğ
	`Log
(è); Log(è<< 
Endl
;

278 
	}
}

282 
BoŞ_t
 
	gTMVA
::
FaùÜy
::
	$IsS’tFe
()

284  
fS’tFe
;

285 
	}
}

289 
BoŞ_t
 
	gTMVA
::
FaùÜy
::
	$IsMod–P”si¡’û
()

291  
fMod–P”si¡’û
;

292 
	}
}

297 
	gTMVA
::
FaùÜy
::~
	$FaùÜy
( )

299 
¡d
::
veùÜ
<
TMVA
::
V¬ŸbËT¿nsfÜmBa£
*>::
™”©Ü
 
ŒfIt
 = 
fDeçuÉTrfs
.
	`begš
();

300 ;
ŒfIt
 !ğ
fDeçuÉTrfs
.
	`’d
();rfIt++è
	`d–‘e
 (*trfIt);

302 
this
->
	`D–‘eAÎM‘hods
();

308 
ToŞs
::
	`De¡royIn¡ªû
();

309 
CÚfig
::
	`De¡royIn¡ªû
();

310 
	}
}

315 
	gTMVA
::
FaùÜy
::
	$D–‘eAÎM‘hods
( )

317 
¡d
::
m­
<
TSŒšg
,
MVeùÜ
*>::
™”©Ü
 
™rM­
;

319 
™rM­
 = 
fM‘hodsM­
.
	`begš
();™rM­ !ğfM‘hodsM­.
	`’d
();itrMap++)

321 
MVeùÜ
 *
m‘hods
=
™rM­
->
£cÚd
;

323 
MVeùÜ
::
™”©Ü
 
™rM‘hod
 = 
m‘hods
->
	`begš
();

324 ; 
™rM‘hod
 !ğ
m‘hods
->
	`’d
(); itrMethod++) {

325 
	`Log
(è<< 
kDEBUG
 << "D–‘m‘hod: " << (*
™rM‘hod
)->
	`G‘Name
(è<< 
Endl
;

326 
	`d–‘e
 (*
™rM‘hod
);

328 
m‘hods
->
	`ş—r
();

329 
d–‘e
 
m‘hods
;

331 
	}
}

335 
	gTMVA
::
FaùÜy
::
	$S‘V”bo£
Ğ
BoŞ_t
 
v
 )

337 
fV”bo£
 = 
v
;

338 
	}
}

343 
	gTMVA
::
M‘hodBa£
* 
TMVA
::
FaùÜy
::
	$BookM‘hod
Ğ
TMVA
::
D©aLßd”
 *
lßd”
, 
TSŒšg
 
theM‘hodName
, TSŒšg 
m‘hodT™Ë
, TSŒšg 
theO±iÚ
 )

345 if(
fMod–P”si¡’û
è
gSy¡em
->
	`MakeDœeùÜy
(
lßd”
->
	`G‘Name
());

347 
TSŒšg
 
d©a£Šame
=
lßd”
->
	`G‘Name
();

349 ifĞ
fAÇlysisTy³
 =ğ
Ty³s
::
kNoAÇlysisTy³
 ){

350 ifĞ
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
()==2

351 && 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
("SigÇl"è!ğ
NULL


352 && 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘CÏssInfo
("Background"è!ğ
NULL


354 
fAÇlysisTy³
 = 
Ty³s
::
kCÏssifiÿtiÚ
;

355 } ifĞ
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
() >= 2 ){

356 
fAÇlysisTy³
 = 
Ty³s
::
kMuÉişass
;

358 
	`Log
(è<< 
kFATAL
 << "NØª®ysi ty³ fÜ " << 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
() << " classes‡nd "

359 << 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NT¬g‘s
(è<< "„eg»ssiÚ¬g‘s." << 
Endl
;

365 if(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)!=fM‘hodsM­.
	`’d
())

367 ià(
	`G‘M‘hod
Ğ
d©a£Šame
,
m‘hodT™Ë
 ) != 0) {

368 
	`Log
(è<< 
kFATAL
 << "Booking failed since method withitle <"

369 << 
m‘hodT™Ë
 <<">‡Ì—dyƒxi¡ "<< "š w™h D©aS‘ Nam<"<< 
lßd”
->
	`G‘Name
()<<"> "

370 << 
Endl
;

375 
	`Log
(è<< 
kHEADER
 << "Bookšg m‘hod: " << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< 
m‘hodT™Ë


377 << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
 << Endl;

380 
IÁ_t
 
boo¡Num
 = 0;

381 
TMVA
::
CÚfigu¿bË
* 
cÚf
 = 
Ãw
 TMVA::
	`CÚfigu¿bË
Ğ
theO±iÚ
 );

382 
cÚf
->
	`Deş¬eO±iÚRef
Ğ
boo¡Num
 = 0, "Boost_num",

384 
cÚf
->
	`P¬£O±iÚs
();

385 
d–‘e
 
cÚf
;

386 
TSŒšg
 
fFeDœ
;

387 if(
fMod–P”si¡’û
)

389 
fFeDœ
=
lßd”
->
	`G‘Name
();

390 
fFeDœ
+="/"+
	`gCÚfig
().
	`G‘IONames
().
fWeightFeDœ
;

393 
IM‘hod
* 
im
;

394 ià(!
boo¡Num
) {

395 
im
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
Ğ
¡d
::
	`¡ršg
(
theM‘hodName
),

396 
fJobName
,

397 
m‘hodT™Ë
,

398 
lßd”
->
	`DeçuÉD©aS‘Info
(),

399 
theO±iÚ
 );

403 
	`Log
(è<< 
kDEBUG
 <<"Boo¡ Numb” i " << 
boo¡Num
 << " > 0:¿š boo¡ed cÏssif›r" << 
Endl
;

404 
im
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
Ğ
¡d
::
	`¡ršg
("Boost"),

405 
fJobName
,

406 
m‘hodT™Ë
,

407 
lßd”
->
	`DeçuÉD©aS‘Info
(),

408 
theO±iÚ
 );

409 
M‘hodBoo¡
* 
m‘hBoo¡
 = 
dyÇmic_ÿ¡
<M‘hodBoo¡*>(
im
);

410 ià(!
m‘hBoo¡
)

411 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kBoo¡ cªnÙ bÿ¡edØM‘hodC©egÜy. /FaùÜy" << 
Endl
;

413 if(
fMod–P”si¡’û
è
m‘hBoo¡
->
	`S‘WeightFeDœ
(
fFeDœ
);

414 
m‘hBoo¡
->
	`S‘Mod–P”si¡’û
(
fMod–P”si¡’û
);

415 
m‘hBoo¡
->
	`S‘Boo¡edM‘hodName
Ğ
theM‘hodName
 );

416 
m‘hBoo¡
->
fD©aS‘Mªag”
 = 
lßd”
->fDataSetManager;

417 
m‘hBoo¡
->
	`S‘Fe
(
fgT¬g‘Fe
);

418 
m‘hBoo¡
->
	`S‘S’tFe
(
	`IsS’tFe
());

421 
M‘hodBa£
 *
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
im
);

422 ià(
m‘hod
==0)  0;

425 ià(
m‘hod
->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
) {

426 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
im
));

427 ià(!
m‘hC©
)

428 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /FaùÜy" << 
Endl
;

430 if(
fMod–P”si¡’û
è
m‘hC©
->
	`S‘WeightFeDœ
(
fFeDœ
);

431 
m‘hC©
->
	`S‘Mod–P”si¡’û
(
fMod–P”si¡’û
);

432 
m‘hC©
->
fD©aS‘Mªag”
 = 
lßd”
->fDataSetManager;

433 
m‘hC©
->
	`S‘Fe
(
fgT¬g‘Fe
);

434 
m‘hC©
->
	`S‘S’tFe
(
	`IsS’tFe
());

438 ià(!
m‘hod
->
	`HasAÇlysisTy³
Ğ
fAÇlysisTy³
,

439 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
(),

440 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NT¬g‘s
() )) {

441 
	`Log
(è<< 
kWARNING
 << "M‘hod " << 
m‘hod
->
	`G‘M‘hodTy³Name
() << " is‚ot capable of handling " ;

442 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
) {

443 
	`Log
(è<< "»g»ssiÚ w™h " << 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NT¬g‘s
(è<< "¬g‘s." << 
Endl
;

445 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 ) {

446 
	`Log
(è<< "muÉişas şassifiÿtiÚ w™h " << 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
(è<< " cÏs£s." << 
Endl
;

449 
	`Log
(è<< "şassifiÿtiÚ w™h " << 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NCÏs£s
(è<< " cÏs£s." << 
Endl
;

454 if(
fMod–P”si¡’û
è
m‘hod
->
	`S‘WeightFeDœ
(
fFeDœ
);

455 
m‘hod
->
	`S‘Mod–P”si¡’û
(
fMod–P”si¡’û
);

456 
m‘hod
->
	`S‘AÇlysisTy³
Ğ
fAÇlysisTy³
 );

457 
m‘hod
->
	`S‘upM‘hod
();

458 
m‘hod
->
	`P¬£O±iÚs
();

459 
m‘hod
->
	`ProûssS‘up
();

460 
m‘hod
->
	`S‘Fe
(
fgT¬g‘Fe
);

461 
m‘hod
->
	`S‘S’tFe
(
	`IsS’tFe
());

464 
m‘hod
->
	`CheckS‘up
();

466 if(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)==fM‘hodsM­.
	`’d
())

468 
MVeùÜ
 *
mveùÜ
=
Ãw
 MVector;

469 
fM‘hodsM­
[
d©a£Šame
]=
mveùÜ
;

471 
fM‘hodsM­
[
d©a£Šame
]->
	`push_back
Ğ
m‘hod
 );

472  
m‘hod
;

473 
	}
}

481 
	gTMVA
::
M‘hodBa£
* 
TMVA
::
FaùÜy
::
	$BookM‘hod
(
TMVA
::
D©aLßd”
 *
lßd”
, 
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, TSŒšg 
theO±iÚ
 )

483  
	`BookM‘hod
(
lßd”
, 
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodName
Ğ
theM‘hod
 ), 
m‘hodT™Ë
, 
theO±iÚ
 );

484 
	}
}

489 
	gTMVA
::
IM‘hod
* 
TMVA
::
FaùÜy
::
	$G‘M‘hod
(cÚ¡ 
TSŒšg
& 
d©a£Šame
, cÚ¡ TSŒšg &
m‘hodT™Ë
 ) const

491 if(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)==fM‘hodsM­.
	`’d
())  0;

493 
MVeùÜ
 *
m‘hods
=
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)->
£cÚd
;

495 
MVeùÜ
::
cÚ¡_™”©Ü
 
™rM‘hod
;

497 
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++) {

498 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

499 iàĞ(
mva
->
	`G‘M‘hodName
())==
m‘hodT™Ë
 )  mva;

502 
	}
}

507 
BoŞ_t
 
	gTMVA
::
FaùÜy
::
	$HasM‘hod
(cÚ¡ 
TSŒšg
& 
d©a£Šame
, cÚ¡ TSŒšg &
m‘hodT™Ë
 ) const

509 if(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)==fM‘hodsM­.
	`’d
())  0;

511 
¡d
::
¡ršg
 
m‘hodName
 = 
m‘hodT™Ë
.
	`D©a
();

512 autØ
isEqu®ToM‘hodName
 = [&
m‘hodName
](
TMVA
::
IM‘hod
 * 
m
) {

513  ( 0 =ğ
m‘hodName
.
	`com·»
Ğ
m
->
	`G‘Name
() ) );

516 
TMVA
::
FaùÜy
::
MVeùÜ
 * 
m‘hods
 = 
this
->
fM‘hodsM­
.
	`©
(
d©a£Šame
);

517 
BoŞ_t
 
isM‘hodNameExi¡šg
 = 
¡d
::
	`ªy_of
Ğ
m‘hods
->
	`begš
(), m‘hods->
	`’d
(), 
isEqu®ToM‘hodName
);

519  
isM‘hodNameExi¡šg
;

520 
	}
}

524 
	gTMVA
::
FaùÜy
::
	$Wr™eD©aInfÜm©iÚ
(
D©aS‘Info
& 
fD©aS‘Info
)

526 
	`RoÙBa£Dœ
()->
	`cd
();

528 if(!
	`RoÙBa£Dœ
()->
	`G‘DœeùÜy
(
fD©aS‘Info
.
	`G‘Name
())èRoÙBa£Dœ()->
	`mkdœ
(fDataSetInfo.GetName());

531 
	`RoÙBa£Dœ
()->
	`cd
(
fD©aS‘Info
.
	`G‘Name
());

532 
fD©aS‘Info
.
	`G‘D©aS‘
();

536 cÚ¡ 
TM©rixD
* 
	`m
(0);

537 cÚ¡ 
TH2
* 
	`h
(0);

539 if(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
){

540 
UIÁ_t
 
şs
 = 0; cl < 
fD©aS‘Info
.
	`G‘NCÏs£s
() ; cls++) {

541 
m
 = 
fD©aS‘Info
.
	`CÜ»ÏtiÚM©rix
(fD©aS‘Info.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
());

542 
h
 = 
fD©aS‘Info
.
	`C»©eCÜ»ÏtiÚM©rixHi¡
(
m
, 
	`TSŒšg
("CÜ»ÏtiÚM©rix")+fD©aS‘Info.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
(),

543 
	`TSŒšg
("CÜ»ÏtiÚ M©rix (")+ 
fD©aS‘Info
.
	`G‘CÏssInfo
(
şs
)->
	`G‘Name
() +TString(")"));

544 ià(
h
!=0) {

545 
h
->
	`Wr™e
();

546 
d–‘e
 
h
;

551 
m
 = 
fD©aS‘Info
.
	`CÜ»ÏtiÚM©rix
( "Signal" );

552 
h
 = 
fD©aS‘Info
.
	`C»©eCÜ»ÏtiÚM©rixHi¡
(
m
, "CorrelationMatrixS", "Correlation Matrix (signal)");

553 ià(
h
!=0) {

554 
h
->
	`Wr™e
();

555 
d–‘e
 
h
;

558 
m
 = 
fD©aS‘Info
.
	`CÜ»ÏtiÚM©rix
( "Background" );

559 
h
 = 
fD©aS‘Info
.
	`C»©eCÜ»ÏtiÚM©rixHi¡
(
m
, "CorrelationMatrixB", "Correlation Matrix (background)");

560 ià(
h
!=0) {

561 
h
->
	`Wr™e
();

562 
d–‘e
 
h
;

565 
m
 = 
fD©aS‘Info
.
	`CÜ»ÏtiÚM©rix
( "Regression" );

566 
h
 = 
fD©aS‘Info
.
	`C»©eCÜ»ÏtiÚM©rixHi¡
(
m
, "CorrelationMatrix", "Correlation Matrix");

567 ià(
h
!=0) {

568 
h
->
	`Wr™e
();

569 
d–‘e
 
h
;

575 
TSŒšg
 
´oûssTrfs
 = "I";

578 
´oûssTrfs
 = 
fT¿nsfÜm©iÚs
;

581 
¡d
::
veùÜ
<
TMVA
::
T¿nsfÜm©iÚHªdËr
*> 
Œfs
;

582 
T¿nsfÜm©iÚHªdËr
* 
id’t™yTrHªdËr
 = 0;

584 
¡d
::
veùÜ
<
TSŒšg
> 
ŒfsDef
 = 
	`gToŞs
().
	`S¶™SŒšg
(
´oûssTrfs
,';');

585 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
ŒfsDefIt
 = 
ŒfsDef
.
	`begš
();

586 ; 
ŒfsDefIt
!=
ŒfsDef
.
	`’d
();rfsDefIt++) {

587 
Œfs
.
	`push_back
(
Ãw
 
TMVA
::
	`T¿nsfÜm©iÚHªdËr
(
fD©aS‘Info
, "Factory"));

588 
TSŒšg
 
ŒfS
 = (*
ŒfsDefIt
);

591 
	`Log
(è<< 
kDEBUG
 << "cu¼’ˆŒªsfÜm©iÚ sŒšg: '" << 
ŒfS
.
	`D©a
(è<< "'" << 
Endl
;

592 
TMVA
::
	`C»©eV¬ŸbËT¿nsfÜms
Ğ
ŒfS
,

593 
fD©aS‘Info
,

594 *(
Œfs
.
	`back
()),

595 
	`Log
() );

597 ià(
ŒfS
.
	`BegšsW™h
('I')è
id’t™yTrHªdËr
 = 
Œfs
.
	`back
();

600 cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
šputEv’ts
 = 
fD©aS‘Info
.
	`G‘D©aS‘
()->
	`G‘Ev’tCŞËùiÚ
();

603 
¡d
::
veùÜ
<
TMVA
::
T¿nsfÜm©iÚHªdËr
*>::
™”©Ü
 
ŒfIt
 = 
Œfs
.
	`begš
();

605 ;
ŒfIt
 !ğ
Œfs
.
	`’d
();rfIt++) {

607 (*
ŒfIt
)->
	`S‘RoÙDœ
(
	`RoÙBa£Dœ
()->
	`G‘DœeùÜy
(
fD©aS‘Info
.
	`G‘Name
()));

608 (*
ŒfIt
)->
	`C®cT¿nsfÜm©iÚs
(
šputEv’ts
);

610 if(
id’t™yTrHªdËr
èid’t™yTrHªdËr->
	`PrštV¬ŸbËRªkšg
();

613 
ŒfIt
 = 
Œfs
.
	`begš
();rfIˆ!ğŒfs.
	`’d
();rfIt++è
d–‘e
 *trfIt;

614 
	}
}

622 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gTMVA
::
FaùÜy
::
	$O±imizeAÎM‘hods
(
TSŒšg
 
fomTy³
, TSŒšg 
f™Ty³
)

625 
¡d
::
m­
<
TSŒšg
,
MVeùÜ
*>::
™”©Ü
 
™rM­
;

626 
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
TuÃdP¬am‘”s
;

627 
™rM­
 = 
fM‘hodsM­
.
	`begš
();™rM­ !ğfM‘hodsM­.
	`’d
();itrMap++)

629 
MVeùÜ
 *
m‘hods
=
™rM­
->
£cÚd
;

631 
MVeùÜ
::
™”©Ü
 
™rM‘hod
;

634  
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++ ) {

635 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

636 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

637 ià(!
mva
) {

638 
	`Log
(è<< 
kFATAL
 << "DyÇmiøÿ¡ØM‘hodBa£ faed" <<
Endl
;

639  
TuÃdP¬am‘”s
;

642 ià(
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è< 
MšNoT¿ššgEv’ts
) {

643 
	`Log
(è<< 
kWARNING
 << "M‘hod " << 
mva
->
	`G‘M‘hodName
()

645 << 
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
()

646 << "]hª„equœed [" << 
MšNoT¿ššgEv’ts
 << "]" << 
Endl
;

650 
	`Log
(è<< 
kINFO
 << "O±imizm‘hod: " << 
mva
->
	`G‘M‘hodName
() << " for "

651 << (
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

652 (
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 ? "MuÉişas şassifiÿtiÚ" : "CÏssifiÿtiÚ")è<< 
Endl
;

654 
TuÃdP¬am‘”s
 = 
mva
->
	`O±imizeTunšgP¬am‘”s
(
fomTy³
,
f™Ty³
);

655 
	`Log
(è<< 
kINFO
 << "O±imiz©iÚ oàtunšg…¬am‘” fšished fÜ M‘hod:"<<
mva
->
	`G‘Name
(è<< 
Endl
;

659  
TuÃdP¬am‘”s
;

661 
	}
}

670 
	gTMVA
::
ROCCurve
 *
TMVA
::
FaùÜy
::
	$G‘ROC
(
TMVA
::
D©aLßd”
 *
lßd”
, 
TSŒšg
 
theM‘hodName
, 
UIÁ_t
 
iCÏss
)

672  
	`G‘ROC
((
TSŒšg
)
lßd”
->
	`G‘Name
(), 
theM‘hodName
, 
iCÏss
);

673 
	}
}

682 
	gTMVA
::
ROCCurve
 *
TMVA
::
FaùÜy
::
	$G‘ROC
(
TSŒšg
 
d©a£Šame
, TSŒšg 
theM‘hodName
, 
UIÁ_t
 
iCÏss
)

684 ià(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
è=ğfM‘hodsM­.
	`’d
()) {

685 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("D©aS‘ = % nÙ found iÀm‘hod m­.", 
d©a£Šame
.
	`D©a
()è<< 
Endl
;

686  
nuÎ±r
;

689 ià(!
this
->
	`HasM‘hod
(
d©a£Šame
, 
theM‘hodName
)) {

690 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("M‘hod = % nÙ found w™h D©a£ˆğ% ", 
theM‘hodName
.
	`D©a
(), 
d©a£Šame
.Data())

691 << 
Endl
;

692  
nuÎ±r
;

695 
¡d
::
£t
<
Ty³s
::
EAÇlysisTy³
> 
®lowedAÇlysisTy³s
 = {Ty³s::
kCÏssifiÿtiÚ
, Ty³s::
kMuÉişass
};

696 ià(
®lowedAÇlysisTy³s
.
	`couÁ
(
this
->
fAÇlysisTy³
) == 0) {

697 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("Can only generate ROC curves for‡nalysisype kClassification‡nd kMulticlass.")

698 << 
Endl
;

699  
nuÎ±r
;

702 
TMVA
::
M‘hodBa£
 *
m‘hod
 = 
dyÇmic_ÿ¡
<TMVA::M‘hodBa£ *>(
this
->
	`G‘M‘hod
(
d©a£Šame
, 
theM‘hodName
));

703 
TMVA
::
D©aS‘
 *
d©a£t
 = 
m‘hod
->
	`D©a
();

704 
TMVA
::
ResuÉs
 *
»suÉs
 = 
d©a£t
->
	`G‘ResuÉs
(
theM‘hodName
, 
Ty³s
::
kTe¡šg
, 
this
->
fAÇlysisTy³
);

706 
UIÁ_t
 
nCÏs£s
 = 
m‘hod
->
	`D©aInfo
().
	`G‘NCÏs£s
();

707 ià(
this
->
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 && 
iCÏss
 >ğ
nCÏs£s
) {

708 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("Given class‚umber (iClass = %i) does‚otƒxist. There‡re %i classes in dataset.",

709 
iCÏss
, 
nCÏs£s
)

710 << 
Endl
;

711  
nuÎ±r
;

714 
TMVA
::
ROCCurve
 *
rocCurve
 = 
nuÎ±r
;

715 ià(
this
->
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
) {

717 
¡d
::
veùÜ
<
Flßt_t
> *
mvaRes
 = 
dyÇmic_ÿ¡
<
ResuÉsCÏssifiÿtiÚ
 *>(
»suÉs
)->
	`G‘V®ueVeùÜ
();

718 
¡d
::
veùÜ
<
BoŞ_t
> *
mvaResTy³s
 = 
dyÇmic_ÿ¡
<
ResuÉsCÏssifiÿtiÚ
 *>(
»suÉs
)->
	`G‘V®ueVeùÜTy³s
();

719 
¡d
::
veùÜ
<
Flßt_t
> 
mvaResWeights
;

721 autØ
ev’tCŞËùiÚ
 = 
d©a£t
->
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
);

722 
mvaResWeights
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

723 autØ
ev
 : 
ev’tCŞËùiÚ
) {

724 
mvaResWeights
.
	`push_back
(
ev
->
	`G‘Weight
());

727 
rocCurve
 = 
Ãw
 
TMVA
::
	`ROCCurve
(*
mvaRes
, *
mvaResTy³s
, 
mvaResWeights
);

729 } ià(
this
->
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

730 
¡d
::
veùÜ
<
Flßt_t
> 
mvaRes
;

731 
¡d
::
veùÜ
<
BoŞ_t
> 
mvaResTy³s
;

732 
¡d
::
veùÜ
<
Flßt_t
> 
mvaResWeights
;

734 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
>> *
¿wMvaRes
 = 
dyÇmic_ÿ¡
<
ResuÉsMuÉişass
 *>(
»suÉs
)->
	`G‘V®ueVeùÜ
();

739 
mvaRes
.
	`»£rve
(
¿wMvaRes
->
	`size
());

740 autØ
™em
 : *
¿wMvaRes
) {

741 
mvaRes
.
	`push_back
(
™em
[
iCÏss
]);

744 autØ
ev’tCŞËùiÚ
 = 
d©a£t
->
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
);

745 
mvaResTy³s
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

746 
mvaResWeights
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

747 autØ
ev
 : 
ev’tCŞËùiÚ
) {

748 
mvaResTy³s
.
	`push_back
(
ev
->
	`G‘CÏss
(è=ğ
iCÏss
);

749 
mvaResWeights
.
	`push_back
(
ev
->
	`G‘Weight
());

752 
rocCurve
 = 
Ãw
 
TMVA
::
	`ROCCurve
(
mvaRes
, 
mvaResTy³s
, 
mvaResWeights
);

755  
rocCurve
;

756 
	}
}

766 
DoubË_t
 
	gTMVA
::
FaùÜy
::
	$G‘ROCIÁeg¿l
(
TMVA
::
D©aLßd”
 *
lßd”
, 
TSŒšg
 
theM‘hodName
, 
UIÁ_t
 
iCÏss
)

768  
	`G‘ROCIÁeg¿l
((
TSŒšg
)
lßd”
->
	`G‘Name
(), 
theM‘hodName
, 
iCÏss
);

769 
	}
}

779 
DoubË_t
 
	gTMVA
::
FaùÜy
::
	$G‘ROCIÁeg¿l
(
TSŒšg
 
d©a£Šame
, TSŒšg 
theM‘hodName
, 
UIÁ_t
 
iCÏss
)

781 ià(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
è=ğfM‘hodsM­.
	`’d
()) {

782 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("D©aS‘ = % nÙ found iÀm‘hod m­.", 
d©a£Šame
.
	`D©a
()è<< 
Endl
;

786 iàĞ! 
this
->
	`HasM‘hod
(
d©a£Šame
, 
theM‘hodName
) ) {

787 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("M‘hod = % nÙ found w™h D©a£ˆğ% ", 
theM‘hodName
.
	`D©a
(), 
d©a£Šame
.D©a()è<< 
Endl
;

791 
¡d
::
£t
<
Ty³s
::
EAÇlysisTy³
> 
®lowedAÇlysisTy³s
 = {Ty³s::
kCÏssifiÿtiÚ
, Ty³s::
kMuÉişass
};

792 iàĞ
®lowedAÇlysisTy³s
.
	`couÁ
(
this
->
fAÇlysisTy³
) == 0 ) {

793 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("Can only generate ROC integral for‡nalysisype kClassification.‡nd kMulticlass.")

794 << 
Endl
;

798 
TMVA
::
ROCCurve
 *
rocCurve
 = 
	`G‘ROC
(
d©a£Šame
, 
theM‘hodName
, 
iCÏss
);

799 ià(!
rocCurve
) {

800 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("ROCCurve object was‚ot created in Method = %s‚ot found with Dataset = %s ",

801 
theM‘hodName
.
	`D©a
(), 
d©a£Šame
.Data())

802 << 
Endl
;

806 
IÁ_t
 
Åošts
 = 
TMVA
::
	`gCÚfig
().
fV¬ŸbËPlÙtšg
.
fNbšsXOfROCCurve
 + 1;

807 
DoubË_t
 
rocIÁeg¿l
 = 
rocCurve
->
	`G‘ROCIÁeg¿l
(
Åošts
);

808 
d–‘e
 
rocCurve
;

810  
rocIÁeg¿l
;

811 
	}
}

827 
TG¿ph
* 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurve
(
D©aLßd”
 *
lßd”
, 
TSŒšg
 
theM‘hodName
, 
BoŞ_t
 
£tT™Ës
, 
UIÁ_t
 
iCÏss
)

829  
	`G‘ROCCurve
Ğ(
TSŒšg
)
lßd”
->
	`G‘Name
(), 
theM‘hodName
, 
£tT™Ës
, 
iCÏss
 );

830 
	}
}

846 
TG¿ph
* 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurve
(
TSŒšg
 
d©a£Šame
, TSŒšg 
theM‘hodName
, 
BoŞ_t
 
£tT™Ës
, 
UIÁ_t
 
iCÏss
)

848 ià(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
è=ğfM‘hodsM­.
	`’d
()) {

849 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("D©aS‘ = % nÙ found iÀm‘hod m­.", 
d©a£Šame
.
	`D©a
()è<< 
Endl
;

850  
nuÎ±r
;

853 iàĞ! 
this
->
	`HasM‘hod
(
d©a£Šame
, 
theM‘hodName
) ) {

854 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("M‘hod = % nÙ found w™h D©a£ˆğ% ", 
theM‘hodName
.
	`D©a
(), 
d©a£Šame
.D©a()è<< 
Endl
;

855  
nuÎ±r
;

858 
¡d
::
£t
<
Ty³s
::
EAÇlysisTy³
> 
®lowedAÇlysisTy³s
 = {Ty³s::
kCÏssifiÿtiÚ
, Ty³s::
kMuÉişass
};

859 iàĞ
®lowedAÇlysisTy³s
.
	`couÁ
(
this
->
fAÇlysisTy³
) == 0 ) {

860 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("Cª oÆy g’”©ROC curve fÜ‡Çlysi ty³ kCÏssifiÿtiÚ‡nd kMuÉişass."è<< 
Endl
;

861  
nuÎ±r
;

864 
TMVA
::
ROCCurve
 *
rocCurve
 = 
	`G‘ROC
(
d©a£Šame
, 
theM‘hodName
, 
iCÏss
);

865 
TG¿ph
 *
g¿ph
 = 
nuÎ±r
;

867 iàĞ! 
rocCurve
 ) {

868 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("ROCCurvobjeù wa nÙ c»©ed iÀM‘hod = % nÙ found w™h D©a£ˆğ% ", 
theM‘hodName
.
	`D©a
(), 
d©a£Šame
.D©a()è<< 
Endl
;

869  
nuÎ±r
;

872 
g¿ph
 = (
TG¿ph
 *)
rocCurve
->
	`G‘ROCCurve
()->
	`ClÚe
();

873 
d–‘e
 
rocCurve
;

875 if(
£tT™Ës
) {

876 
g¿ph
->
	`G‘Yaxis
()->
	`S‘T™Ë
("Background„ejection (Specificity)");

877 
g¿ph
->
	`G‘Xaxis
()->
	`S‘T™Ë
("Signalƒfficiency (Sensitivity)");

878 
g¿ph
->
	`S‘T™Ë
(
	`FÜm
("SigÇÈeffic›ncy vs. Background„ejeùiÚ (%s)", 
theM‘hodName
.
	`D©a
()));

881  
g¿ph
;

882 
	}
}

896 
TMuÉiG¿ph
* 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurveAsMuÉiG¿ph
(
D©aLßd”
 *
lßd”
, 
UIÁ_t
 
iCÏss
)

898  
	`G‘ROCCurveAsMuÉiG¿ph
((
TSŒšg
)
lßd”
->
	`G‘Name
(), 
iCÏss
);

899 
	}
}

913 
TMuÉiG¿ph
* 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurveAsMuÉiG¿ph
(
TSŒšg
 
d©a£Šame
, 
UIÁ_t
 
iCÏss
)

915 
UIÁ_t
 
lše_cŞÜ
 = 1;

917 
TMuÉiG¿ph
 *
muÉig¿ph
 = 
Ãw
 
	`TMuÉiG¿ph
();

919 
MVeùÜ
 *
m‘hods
 = 
fM‘hodsM­
[
d©a£Šame
.
	`D©a
()];

920 autØ* 
m‘hod_¿w
 : *
m‘hods
) {

921 
TMVA
::
M‘hodBa£
 *
m‘hod
 = 
dyÇmic_ÿ¡
<TMVA::M‘hodBa£ *>(
m‘hod_¿w
);

922 ià(
m‘hod
 =ğ
nuÎ±r
) { ; }

924 
TSŒšg
 
m‘hodName
 = 
m‘hod
->
	`G‘M‘hodName
();

925 
UIÁ_t
 
nCÏs£s
 = 
m‘hod
->
	`D©aInfo
().
	`G‘NCÏs£s
();

927 iàĞ
this
->
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 && 
iCÏss
 >ğ
nCÏs£s
 ) {

928 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("Giv’ cÏs numb” (iCÏs ğ%ièdÛ nÙƒxi¡. Th”¬%˜şas£ š d©a£t.", 
iCÏss
, 
nCÏs£s
è<< 
Endl
;

932 
TSŒšg
 
şassName
 = 
m‘hod
->
	`D©aInfo
().
	`G‘CÏssInfo
(
iCÏss
)->
	`G‘Name
();

934 
TG¿ph
 *
g¿ph
 = 
this
->
	`G‘ROCCurve
(
d©a£Šame
, 
m‘hodName
, 
çl£
, 
iCÏss
);

935 
g¿ph
->
	`S‘T™Ë
(
m‘hodName
);

937 
g¿ph
->
	`S‘LšeWidth
(2);

938 
g¿ph
->
	`S‘LšeCŞÜ
(
lše_cŞÜ
++);

939 
g¿ph
->
	`S‘FlCŞÜ
(10);

941 
muÉig¿ph
->
	`Add
(
g¿ph
);

944 iàĞ
muÉig¿ph
->
	`G‘Li¡OfG¿phs
(è=ğ
nuÎ±r
 ) {

945 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("NØm‘ohd havşas %˜defšed.", 
iCÏss
è<< 
Endl
;

946  
nuÎ±r
;

949  
muÉig¿ph
;

950 
	}
}

964 
TCªvas
 * 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurve
(
TMVA
::
D©aLßd”
 *
lßd”
, 
UIÁ_t
 
iCÏss
)

966  
	`G‘ROCCurve
((
TSŒšg
)
lßd”
->
	`G‘Name
(), 
iCÏss
);

967 
	}
}

980 
TCªvas
 * 
	gTMVA
::
FaùÜy
::
	$G‘ROCCurve
(
TSŒšg
 
d©a£Šame
, 
UIÁ_t
 
iCÏss
)

982 ià(
fM‘hodsM­
.
	`fšd
(
d©a£Šame
è=ğfM‘hodsM­.
	`’d
()) {

983 
	`Log
(è<< 
kERROR
 << 
	`FÜm
("D©aS‘ = % nÙ found iÀm‘hod m­.", 
d©a£Šame
.
	`D©a
()è<< 
Endl
;

987 
TSŒšg
 
Çme
 = 
	`FÜm
("ROCCurv% şas %i", 
d©a£Šame
.
	`D©a
(), 
iCÏss
);

988 
TCªvas
 *
ÿnvas
 = 
Ãw
 
	`TCªvas
(
Çme
, "ROC Curve", 200, 10, 700, 500);

989 
ÿnvas
->
	`S‘Grid
();

991 
TMuÉiG¿ph
 *
muÉig¿ph
 = 
this
->
	`G‘ROCCurveAsMuÉiG¿ph
(
d©a£Šame
, 
iCÏss
);

993 iàĞ
muÉig¿ph
 ) {

994 
muÉig¿ph
->
	`D¿w
("AL");

996 
muÉig¿ph
->
	`G‘Yaxis
()->
	`S‘T™Ë
("Background„ejection (Specificity)");

997 
muÉig¿ph
->
	`G‘Xaxis
()->
	`S‘T™Ë
("Signalƒfficiency (Sensitivity)");

999 
TSŒšg
 
t™ËSŒšg
 = 
	`FÜm
("Signalƒfficiency vs. Background„ejection");

1000 ià(
this
->
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

1001 
t™ËSŒšg
 = 
	`FÜm
("% (CÏss=%i)",™ËSŒšg.
	`D©a
(), 
iCÏss
);

1005 
muÉig¿ph
->
	`G‘Hi¡og¿m
()->
	`S‘T™Ë
Ğ
t™ËSŒšg
 );

1006 
muÉig¿ph
->
	`S‘T™Ë
Ğ
t™ËSŒšg
 );

1008 
ÿnvas
->
	`BudLeg’d
(0.15, 0.15, 0.35, 0.3, "MVA Method");

1011  
ÿnvas
;

1012 
	}
}

1017 
	gTMVA
::
FaùÜy
::
	$T¿šAÎM‘hods
()

1019 
	`Log
(è<< 
kHEADER
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "T¿š‡Î m‘hods" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1024 ià(
fM‘hodsM­
.
	`em±y
()) {

1025 
	`Log
(è<< 
kINFO
 << "...nÙhšg foundØŒaš" << 
Endl
;

1031 
	`Log
(è<< 
kDEBUG
 << "Train‡ll methods for "

1032 << (
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

1033 (
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 ? "MuÉişass" : "CÏssifiÿtiÚ"èè<< " ..." << 
Endl
;

1035 
¡d
::
m­
<
TSŒšg
,
MVeùÜ
*>::
™”©Ü
 
™rM­
;

1037 
™rM­
 = 
fM‘hodsM­
.
	`begš
();™rM­ !ğfM‘hodsM­.
	`’d
();itrMap++)

1039 
MVeùÜ
 *
m‘hods
=
™rM­
->
£cÚd
;

1040 
MVeùÜ
::
™”©Ü
 
™rM‘hod
;

1043  
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++ ) {

1044 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

1045 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1047 if(
mva
==0) ;

1049 if(
mva
->
	`D©aInfo
().
	`G‘D©aS‘Mªag”
()->
	`D©aIÅut
().
	`G‘EÁr›s
() <=1) {

1050 
	`Log
(è<< 
kFATAL
 << "NØšpuˆd©¨fÜhŒaššg…rovided!" << 
Endl
;

1053 if(
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 && 
mva
->
	`D©aInfo
().
	`G‘NT¬g‘s
() < 1 )

1054 
	`Log
(è<< 
kFATAL
 << "You wªˆtØdØ»g»ssiÚ¿ššg w™houˆ¥ecifyšg‡¬g‘." << 
Endl
;

1055 ifĞ(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 || fAÇlysisTy³ =ğTy³s::
kCÏssifiÿtiÚ
)

1056 && 
mva
->
	`D©aInfo
().
	`G‘NCÏs£s
() < 2 )

1057 
	`Log
(è<< 
kFATAL
 << "You wªˆtØdØşassifiÿtiÚ¿ššg, buˆ¥ecif›d†es thªwØşas£s." << 
Endl
;

1060 if(!
	`IsS’tFe
()è
	`Wr™eD©aInfÜm©iÚ
(
mva
->
fD©aS‘Info
);

1063 ià(
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è< 
MšNoT¿ššgEv’ts
) {

1064 
	`Log
(è<< 
kWARNING
 << "M‘hod " << 
mva
->
	`G‘M‘hodName
()

1066 << 
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
()

1067 << "]hª„equœed [" << 
MšNoT¿ššgEv’ts
 << "]" << 
Endl
;

1071 
	`Log
(è<< 
kHEADER
 << "T¿š m‘hod: " << 
mva
->
	`G‘M‘hodName
() << " for "

1072 << (
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

1073 (
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 ? "MuÉişas şassifiÿtiÚ" : "CÏssifiÿtiÚ")è<< 
Endl
 << Endl;

1074 
mva
->
	`T¿šM‘hod
();

1075 
	`Log
(è<< 
kHEADER
 << "T¿ššg fšished" << 
Endl
 << Endl;

1078 ià(
fAÇlysisTy³
 !ğ
Ty³s
::
kReg»ssiÚ
) {

1082 
	`Log
(è<< 
kINFO
 << "Rªkšg iÅuˆv¬ŸbË (m‘hod s³cific)..." << 
Endl
;

1083 
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++) {

1084 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1085 ià(
mva
 && mva->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è>ğ
MšNoT¿ššgEv’ts
) {

1088 cÚ¡ 
Rªkšg
* 
¿nkšg
 = (*
™rM‘hod
)->
	`C»©eRªkšg
();

1089 ià(
¿nkšg
 !ğ0è¿nkšg->
	`Pršt
();

1090 
	`Log
(è<< 
kINFO
 << "No variable„anking supplied by classifier: "

1091 << 
dyÇmic_ÿ¡
<
M‘hodBa£
*>(*
™rM‘hod
)->
	`G‘M‘hodName
(è<< 
Endl
;

1100 ià(
fMod–P”si¡’û
) {

1102 
	`Log
(è<< 
kHEADER
 << "==ğDe¡roy‡nd„eü—‹‡Î m‘hod vŸ weighˆfe fÜe¡šg ===" << 
Endl
 << Endl;

1104 if(!
	`IsS’tFe
())
	`RoÙBa£Dœ
()->
	`cd
();

1107 
UIÁ_t
 
i
=0; i<
m‘hods
->
	`size
(); i++) {

1109 
M‘hodBa£
* 
m
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>((*
m‘hods
)[
i
]);

1110 if(
m
==0) ;

1112 
TMVA
::
Ty³s
::
EMVA
 
m‘hodTy³
 = 
m
->
	`G‘M‘hodTy³
();

1113 
TSŒšg
 
weightfe
 = 
m
->
	`G‘WeightFeName
();

1116 ià(
READXML
è
weightfe
.
	`R•ÏûAÎ
(".txt",".xml");

1118 
D©aS‘Info
& 
d©aS‘Info
 = 
m
->
	`D©aInfo
();

1119 
TSŒšg
 
‹¡v¬Name
 = 
m
->
	`G‘Te¡v¬Name
();

1120 
d–‘e
 
m
;

1123 
m
 = 
dyÇmic_ÿ¡
<
M‘hodBa£
*>Ğ
CÏssif›rFaùÜy
::
	`In¡ªû
()

1124 .
	`C»©e
Ğ
¡d
::
	`¡ršg
(
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodName
(
m‘hodTy³
)),

1125 
d©aS‘Info
, 
weightfe
 ) );

1126 ifĞ
m
->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
 ){

1127 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
m
));

1128 ifĞ!
m‘hC©
 ) 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /FaùÜy" << 
Endl
;

1129 
m‘hC©
->
fD©aS‘Mªag”
 = 
m
->
	`D©aInfo
().
	`G‘D©aS‘Mªag”
();

1134 
TSŒšg
 
fFeDœ
ğ
m
->
	`D©aInfo
().
	`G‘Name
();

1135 
fFeDœ
+="/"+
	`gCÚfig
().
	`G‘IONames
().
fWeightFeDœ
;

1136 
m
->
	`S‘WeightFeDœ
(
fFeDœ
);

1137 
m
->
	`S‘Mod–P”si¡’û
(
fMod–P”si¡’û
);

1138 
m
->
	`S‘S’tFe
(
	`IsS’tFe
());

1139 
m
->
	`S‘AÇlysisTy³
(
fAÇlysisTy³
);

1140 
m
->
	`S‘upM‘hod
();

1141 
m
->
	`R—dS‹FromFe
();

1142 
m
->
	`S‘Te¡v¬Name
(
‹¡v¬Name
);

1145 (*
m‘hods
)[
i
] = 
m
;

1149 
	}
}

1153 
	gTMVA
::
FaùÜy
::
	$Te¡AÎM‘hods
()

1155 
	`Log
(è<< 
kHEADER
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "Te¡‡Î m‘hods" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1158 ià(
fM‘hodsM­
.
	`em±y
()) {

1159 
	`Log
(è<< 
kINFO
 << "...nÙhšg foundØ‹¡" << 
Endl
;

1162 
¡d
::
m­
<
TSŒšg
,
MVeùÜ
*>::
™”©Ü
 
™rM­
;

1164 
™rM­
 = 
fM‘hodsM­
.
	`begš
();™rM­ !ğfM‘hodsM­.
	`’d
();itrMap++)

1166 
MVeùÜ
 *
m‘hods
=
™rM­
->
£cÚd
;

1167 
MVeùÜ
::
™”©Ü
 
™rM‘hod
;

1170  
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++ ) {

1171 
Ev’t
::
	`S‘IsT¿ššg
(
kFALSE
);

1172 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1173 if(
mva
==0) ;

1174 
Ty³s
::
EAÇlysisTy³
 
ª®ysisTy³
 = 
mva
->
	`G‘AÇlysisTy³
();

1175 
	`Log
(è<< 
kHEADER
 << "Te¡ m‘hod: " << 
mva
->
	`G‘M‘hodName
() << " for "

1176 << (
ª®ysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

1177 (
ª®ysisTy³
 =ğ
Ty³s
::
kMuÉişass
 ? "MuÉişas şassifiÿtiÚ" : "CÏssifiÿtiÚ")è<< "…”fÜmªû" << 
Endl
 << Endl;

1178 
mva
->
	`AddOuut
Ğ
Ty³s
::
kTe¡šg
, 
ª®ysisTy³
 );

1181 
	}
}

1185 
	gTMVA
::
FaùÜy
::
	$MakeCÏss
(cÚ¡ 
TSŒšg
& 
d©a£Šame
 , cÚ¡ TSŒšg& 
m‘hodT™Ë
 ) const

1187 ià(
m‘hodT™Ë
 != "") {

1188 
IM‘hod
* 
m‘hod
 = 
	`G‘M‘hod
(
d©a£Šame
, 
m‘hodT™Ë
);

1189 ià(
m‘hod
èm‘hod->
	`MakeCÏss
();

1191 
	`Log
(è<< 
kWARNING
 << "<MakeCÏss> Could‚Ù fšd cÏssif›¸\"" << 
m‘hodT™Ë


1192 << "\" iÀli¡" << 
Endl
;

1198 
MVeùÜ
 *
m‘hods
=
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)->
£cÚd
;

1199 
MVeùÜ
::
cÚ¡_™”©Ü
 
™rM‘hod
;

1200 
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++) {

1201 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1202 if(
m‘hod
==0) ;

1203 
	`Log
(è<< 
kINFO
 << "Mak»¥Ú£ cÏs fÜ cÏssif›r: " << 
m‘hod
->
	`G‘M‘hodName
(è<< 
Endl
;

1204 
m‘hod
->
	`MakeCÏss
();

1207 
	}
}

1213 
	gTMVA
::
FaùÜy
::
	$PrštH–pMes§ge
(cÚ¡ 
TSŒšg
& 
d©a£Šame
 , cÚ¡ TSŒšg& 
m‘hodT™Ë
 ) const

1215 ià(
m‘hodT™Ë
 != "") {

1216 
IM‘hod
* 
m‘hod
 = 
	`G‘M‘hod
(
d©a£Šame
 , 
m‘hodT™Ë
 );

1217 ià(
m‘hod
èm‘hod->
	`PrštH–pMes§ge
();

1219 
	`Log
(è<< 
kWARNING
 << "<PrštH–pMes§ge> Could‚Ù fšd cÏssif›¸\"" << 
m‘hodT™Ë


1220 << "\" iÀli¡" << 
Endl
;

1226 
MVeùÜ
 *
m‘hods
=
fM‘hodsM­
.
	`fšd
(
d©a£Šame
)->
£cÚd
;

1227 
MVeùÜ
::
cÚ¡_™”©Ü
 
™rM‘hod
 ;

1228 
™rM‘hod
 = 
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++) {

1229 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1230 if(
m‘hod
==0) ;

1231 
	`Log
(è<< 
kINFO
 << "Pršˆh–°mes§gfÜ cÏssif›r: " << 
m‘hod
->
	`G‘M‘hodName
(è<< 
Endl
;

1232 
m‘hod
->
	`PrštH–pMes§ge
();

1235 
	}
}

1240 
	gTMVA
::
FaùÜy
::
	$Ev®u©eAÎV¬ŸbËs
(
D©aLßd”
 *
lßd”
, 
TSŒšg
 
İtiÚs
 )

1242 
	`Log
(è<< 
kINFO
 << "Ev®u©šg‡Î v¬ŸbËs..." << 
Endl
;

1243 
Ev’t
::
	`S‘IsT¿ššg
(
kFALSE
);

1245 
UIÁ_t
 
i
=0; i<
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
(); i++) {

1246 
TSŒšg
 
s
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘V¬ŸbËInfo
(
i
).
	`G‘Lab–
();

1247 ià(
İtiÚs
.
	`CÚšs
("V")è
s
 += ":V";

1248 
this
->
	`BookM‘hod
(
lßd”
, "V¬ŸbË", 
s
 );

1250 
	}
}

1255 
	gTMVA
::
FaùÜy
::
	$Ev®u©eAÎM‘hods
( )

1257 
	`Log
(è<< 
kHEADER
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "Ev®u©®Èm‘hods" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1260 ià(
fM‘hodsM­
.
	`em±y
()) {

1261 
	`Log
(è<< 
kINFO
 << "...nÙhšg foundØev®u©e" << 
Endl
;

1264 
¡d
::
m­
<
TSŒšg
,
MVeùÜ
*>::
™”©Ü
 
™rM­
;

1266 
™rM­
 = 
fM‘hodsM­
.
	`begš
();™rM­ !ğfM‘hodsM­.
	`’d
();itrMap++)

1268 
MVeùÜ
 *
m‘hods
=
™rM­
->
£cÚd
;

1277 
IÁ_t
 
i£l
;

1278 
IÁ_t
 
nm‘h_u£d
[2] = {0,0};

1280 
¡d
::
veùÜ
<¡d::veùÜ<
TSŒšg
> > 
	`mÇme
(2);

1281 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`sig
(2), 
	`£p
(2), 
	`roc
(2);

1282 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`eff01
(2), 
	`eff10
(2), 
	`eff30
(2), 
	`effA»a
(2);

1283 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`eff01”r
(2), 
	`eff10”r
(2), 
	`eff30”r
(2);

1284 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`ŒašEff01
(2), 
	`ŒašEff10
(2), 
	`ŒašEff30
(2);

1286 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
> > 
muÉişass_‹¡Eff
;

1287 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
> > 
muÉişass_ŒašEff
;

1288 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
> > 
muÉişass_‹¡Pur
;

1289 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
> > 
muÉişass_ŒašPur
;

1292 
¡d
::
veùÜ
<
TM©rixD
> 
muÉişass_‹¡CÚfusiÚEffB01
;

1293 
¡d
::
veùÜ
<
TM©rixD
> 
muÉişass_‹¡CÚfusiÚEffB10
;

1294 
¡d
::
veùÜ
<
TM©rixD
> 
muÉişass_‹¡CÚfusiÚEffB30
;

1296 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`bŸ¡¿š
(1);

1297 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`bŸ¡e¡
(1);

1298 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`devŒaš
(1);

1299 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`dev‹¡
(1);

1300 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rm¡¿š
(1);

1301 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rm¡e¡
(1);

1302 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`mšá¿š
(1);

1303 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`mšáe¡
(1);

1304 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rhÙ¿š
(1);

1305 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rhÙe¡
(1);

1308 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`bŸ¡¿šT
(1);

1309 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`bŸ¡e¡T
(1);

1310 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`devŒašT
(1);

1311 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`dev‹¡T
(1);

1312 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rm¡¿šT
(1);

1313 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`rm¡e¡T
(1);

1314 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`mšá¿šT
(1);

1315 
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> > 
	`mšáe¡T
(1);

1318 
MVeùÜ
 
m‘hodsNoCuts
;

1320 
BoŞ_t
 
doReg»ssiÚ
 = 
kFALSE
;

1321 
BoŞ_t
 
doMuÉişass
 = 
kFALSE
;

1324 
MVeùÜ
::
™”©Ü
 
™rM‘hod
 =
m‘hods
->
	`begš
(); iŒM‘hod !ğm‘hods->
	`’d
(); itrMethod++) {

1325 
Ev’t
::
	`S‘IsT¿ššg
(
kFALSE
);

1326 
M‘hodBa£
* 
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1327 if(
theM‘hod
==0) ;

1328 
theM‘hod
->
	`S‘Fe
(
fgT¬g‘Fe
);

1329 
theM‘hod
->
	`S‘S’tFe
(
	`IsS’tFe
());

1330 ià(
theM‘hod
->
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kCuts
è
m‘hodsNoCuts
.
	`push_back
Ğ*
™rM‘hod
 );

1332 ià(
theM‘hod
->
	`DoReg»ssiÚ
()) {

1333 
doReg»ssiÚ
 = 
kTRUE
;

1335 
	`Log
(è<< 
kINFO
 << "Ev®u©»g»ssiÚ m‘hod: " << 
theM‘hod
->
	`G‘M‘hodName
(è<< 
Endl
;

1336 
DoubË_t
 
bŸs
, 
dev
, 
rms
, 
mInf
;

1337 
DoubË_t
 
bŸsT
, 
devT
, 
rmsT
, 
mInfT
;

1338 
DoubË_t
 
rho
;

1340 
theM‘hod
->
	`Te¡Reg»ssiÚ
Ğ
bŸs
, 
bŸsT
, 
dev
, 
devT
, 
rms
, 
rmsT
, 
mInf
, 
mInfT
, 
rho
, 
TMVA
::
Ty³s
::
kTe¡šg
 );

1341 
bŸ¡e¡
[0] .
	`push_back
Ğ
bŸs
 );

1342 
dev‹¡
[0] .
	`push_back
Ğ
dev
 );

1343 
rm¡e¡
[0] .
	`push_back
Ğ
rms
 );

1344 
mšáe¡
[0] .
	`push_back
Ğ
mInf
 );

1345 
rhÙe¡
[0] .
	`push_back
Ğ
rho
 );

1346 
bŸ¡e¡T
[0] .
	`push_back
Ğ
bŸsT
 );

1347 
dev‹¡T
[0] .
	`push_back
Ğ
devT
 );

1348 
rm¡e¡T
[0] .
	`push_back
Ğ
rmsT
 );

1349 
mšáe¡T
[0] .
	`push_back
Ğ
mInfT
 );

1351 
theM‘hod
->
	`Te¡Reg»ssiÚ
Ğ
bŸs
, 
bŸsT
, 
dev
, 
devT
, 
rms
, 
rmsT
, 
mInf
, 
mInfT
, 
rho
, 
TMVA
::
Ty³s
::
kT¿ššg
 );

1352 
bŸ¡¿š
[0] .
	`push_back
Ğ
bŸs
 );

1353 
devŒaš
[0] .
	`push_back
Ğ
dev
 );

1354 
rm¡¿š
[0] .
	`push_back
Ğ
rms
 );

1355 
mšá¿š
[0] .
	`push_back
Ğ
mInf
 );

1356 
rhÙ¿š
[0] .
	`push_back
Ğ
rho
 );

1357 
bŸ¡¿šT
[0].
	`push_back
Ğ
bŸsT
 );

1358 
devŒašT
[0] .
	`push_back
Ğ
devT
 );

1359 
rm¡¿šT
[0] .
	`push_back
Ğ
rmsT
 );

1360 
mšá¿šT
[0].
	`push_back
Ğ
mInfT
 );

1362 
mÇme
[0].
	`push_back
Ğ
theM‘hod
->
	`G‘M‘hodName
() );

1363 
nm‘h_u£d
[0]++;

1364 if(!
	`IsS’tFe
())

1366 
	`Log
(è<< 
kDEBUG
 << "\tWr™ev®u©iÚ hi¡og¿m tØfe" << 
Endl
;

1367 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kTe¡šg
);

1368 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kT¿ššg
);

1370 } ià(
theM‘hod
->
	`DoMuÉişass
()) {

1374 
doMuÉişass
 = 
kTRUE
;

1375 
	`Log
(è<< 
kINFO
 << "Ev®u©muÉişas şassifiÿtiÚ m‘hod: " << 
theM‘hod
->
	`G‘M‘hodName
(è<< 
Endl
;

1384 
muÉişass_‹¡CÚfusiÚEffB01
.
	`push_back
(
theM‘hod
->
	`G‘MuÉişassCÚfusiÚM©rix
(0.01, 
Ty³s
::
kTe¡šg
));

1385 
muÉişass_‹¡CÚfusiÚEffB10
.
	`push_back
(
theM‘hod
->
	`G‘MuÉişassCÚfusiÚM©rix
(0.10, 
Ty³s
::
kTe¡šg
));

1386 
muÉişass_‹¡CÚfusiÚEffB30
.
	`push_back
(
theM‘hod
->
	`G‘MuÉişassCÚfusiÚM©rix
(0.30, 
Ty³s
::
kTe¡šg
));

1388 ià(
nÙ
 
	`IsS’tFe
()) {

1389 
	`Log
(è<< 
kDEBUG
 << "\tWr™ev®u©iÚ hi¡og¿m tØfe" << 
Endl
;

1390 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kTe¡šg
);

1391 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kT¿ššg
);

1394 
nm‘h_u£d
[0]++;

1395 
mÇme
[0].
	`push_back
(
theM‘hod
->
	`G‘M‘hodName
());

1398 
	`Log
(è<< 
kHEADER
 << "Ev®u©şassif›r: " << 
theM‘hod
->
	`G‘M‘hodName
(è<< 
Endl
 << Endl;

1399 
i£l
 = (
theM‘hod
->
	`G‘M‘hodTy³Name
().
	`CÚšs
("Variable")) ? 1 : 0;

1402 
theM‘hod
->
	`Te¡CÏssifiÿtiÚ
();

1405 
mÇme
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘M‘hodName
());

1406 
sig
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘Signifiÿnû
());

1407 
£p
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘S•¬©iÚ
());

1408 
roc
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘ROCIÁeg¿l
());

1410 
DoubË_t
 
”r
;

1411 
eff01
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.01", 
Ty³s
::
kTe¡šg
, 
”r
));

1412 
eff01”r
[
i£l
].
	`push_back
(
”r
);

1413 
eff10
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.10", 
Ty³s
::
kTe¡šg
, 
”r
));

1414 
eff10”r
[
i£l
].
	`push_back
(
”r
);

1415 
eff30
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘Effic›ncy
("Effic›ncy:0.30", 
Ty³s
::
kTe¡šg
, 
”r
));

1416 
eff30”r
[
i£l
].
	`push_back
(
”r
);

1417 
effA»a
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘Effic›ncy
("", 
Ty³s
::
kTe¡šg
, 
”r
));

1419 
ŒašEff01
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.01"));

1420 
ŒašEff10
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.10"));

1421 
ŒašEff30
[
i£l
].
	`push_back
(
theM‘hod
->
	`G‘T¿ššgEffic›ncy
("Efficiency:0.30"));

1423 
nm‘h_u£d
[
i£l
]++;

1425 ià(!
	`IsS’tFe
()) {

1426 
	`Log
(è<< 
kDEBUG
 << "\tWr™ev®u©iÚ hi¡og¿m tØfe" << 
Endl
;

1427 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kTe¡šg
);

1428 
theM‘hod
->
	`Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
kT¿ššg
);

1432 ià(
doReg»ssiÚ
) {

1434 
¡d
::
veùÜ
<
TSŒšg
> 
v‹mps
 = 
mÇme
[0];

1435 
¡d
::
veùÜ
< std::veùÜ<
DoubË_t
> > 
vtmp
;

1436 
vtmp
.
	`push_back
Ğ
dev‹¡
[0] );

1437 
vtmp
.
	`push_back
Ğ
devŒaš
[0] );

1438 
vtmp
.
	`push_back
Ğ
bŸ¡e¡
[0] );

1439 
vtmp
.
	`push_back
Ğ
bŸ¡¿š
[0] );

1440 
vtmp
.
	`push_back
Ğ
rm¡e¡
[0] );

1441 
vtmp
.
	`push_back
Ğ
rm¡¿š
[0] );

1442 
vtmp
.
	`push_back
Ğ
mšáe¡
[0] );

1443 
vtmp
.
	`push_back
Ğ
mšá¿š
[0] );

1444 
vtmp
.
	`push_back
Ğ
rhÙe¡
[0] );

1445 
vtmp
.
	`push_back
Ğ
rhÙ¿š
[0] );

1446 
vtmp
.
	`push_back
Ğ
dev‹¡T
[0] );

1447 
vtmp
.
	`push_back
Ğ
devŒašT
[0] );

1448 
vtmp
.
	`push_back
Ğ
bŸ¡e¡T
[0] );

1449 
vtmp
.
	`push_back
Ğ
bŸ¡¿šT
[0]);

1450 
vtmp
.
	`push_back
Ğ
rm¡e¡T
[0] );

1451 
vtmp
.
	`push_back
Ğ
rm¡¿šT
[0] );

1452 
vtmp
.
	`push_back
Ğ
mšáe¡T
[0] );

1453 
vtmp
.
	`push_back
Ğ
mšá¿šT
[0]);

1454 
	`gToŞs
().
	`U£fulSÜtAsûndšg
Ğ
vtmp
, &
v‹mps
 );

1455 
mÇme
[0] = 
v‹mps
;

1456 
dev‹¡
[0] = 
vtmp
[0];

1457 
devŒaš
[0] = 
vtmp
[1];

1458 
bŸ¡e¡
[0] = 
vtmp
[2];

1459 
bŸ¡¿š
[0] = 
vtmp
[3];

1460 
rm¡e¡
[0] = 
vtmp
[4];

1461 
rm¡¿š
[0] = 
vtmp
[5];

1462 
mšáe¡
[0] = 
vtmp
[6];

1463 
mšá¿š
[0] = 
vtmp
[7];

1464 
rhÙe¡
[0] = 
vtmp
[8];

1465 
rhÙ¿š
[0] = 
vtmp
[9];

1466 
dev‹¡T
[0] = 
vtmp
[10];

1467 
devŒašT
[0] = 
vtmp
[11];

1468 
bŸ¡e¡T
[0] = 
vtmp
[12];

1469 
bŸ¡¿šT
[0] = 
vtmp
[13];

1470 
rm¡e¡T
[0] = 
vtmp
[14];

1471 
rm¡¿šT
[0] = 
vtmp
[15];

1472 
mšáe¡T
[0] = 
vtmp
[16];

1473 
mšá¿šT
[0] = 
vtmp
[17];

1474 } ià(
doMuÉişass
) {

1482 
IÁ_t
 
k
=0; k<2; k++) {

1483 
¡d
::
veùÜ
< std::veùÜ<
DoubË_t
> > 
v‹mp
;

1484 
v‹mp
.
	`push_back
Ğ
effA»a
[
k
] );

1485 
v‹mp
.
	`push_back
Ğ
eff10
[
k
] );

1486 
v‹mp
.
	`push_back
Ğ
eff01
[
k
] );

1487 
v‹mp
.
	`push_back
Ğ
eff30
[
k
] );

1488 
v‹mp
.
	`push_back
Ğ
eff10”r
[
k
] );

1489 
v‹mp
.
	`push_back
Ğ
eff01”r
[
k
] );

1490 
v‹mp
.
	`push_back
Ğ
eff30”r
[
k
] );

1491 
v‹mp
.
	`push_back
Ğ
ŒašEff10
[
k
] );

1492 
v‹mp
.
	`push_back
Ğ
ŒašEff01
[
k
] );

1493 
v‹mp
.
	`push_back
Ğ
ŒašEff30
[
k
] );

1494 
v‹mp
.
	`push_back
Ğ
sig
[
k
] );

1495 
v‹mp
.
	`push_back
Ğ
£p
[
k
] );

1496 
v‹mp
.
	`push_back
Ğ
roc
[
k
] );

1497 
¡d
::
veùÜ
<
TSŒšg
> 
v‹mps
 = 
mÇme
[
k
];

1498 
	`gToŞs
().
	`U£fulSÜtDesûndšg
Ğ
v‹mp
, &
v‹mps
 );

1499 
effA»a
[
k
] = 
v‹mp
[0];

1500 
eff10
[
k
] = 
v‹mp
[1];

1501 
eff01
[
k
] = 
v‹mp
[2];

1502 
eff30
[
k
] = 
v‹mp
[3];

1503 
eff10”r
[
k
] = 
v‹mp
[4];

1504 
eff01”r
[
k
] = 
v‹mp
[5];

1505 
eff30”r
[
k
] = 
v‹mp
[6];

1506 
ŒašEff10
[
k
] = 
v‹mp
[7];

1507 
ŒašEff01
[
k
] = 
v‹mp
[8];

1508 
ŒašEff30
[
k
] = 
v‹mp
[9];

1509 
sig
[
k
] = 
v‹mp
[10];

1510 
£p
[
k
] = 
v‹mp
[11];

1511 
roc
[
k
] = 
v‹mp
[12];

1512 
mÇme
[
k
] = 
v‹mps
;

1522 if(
fCÜ»ÏtiÚs
)

1524 cÚ¡ 
IÁ_t
 
nm‘h
 = 
m‘hodsNoCuts
.
	`size
();

1525 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
m‘hods
[0][0]);

1526 cÚ¡ 
IÁ_t
 
nv¬
 = 
m‘hod
->
fD©aS‘Info
.
	`G‘NV¬ŸbËs
();

1527 ià(!
doReg»ssiÚ
 && !
doMuÉişass
 ) {

1529 ià(
nm‘h
 > 0) {

1532 
DoubË_t
 *
dvec
 = 
Ãw
 DoubË_t[
nm‘h
+
nv¬
];

1533 
¡d
::
veùÜ
<
DoubË_t
> 
rvec
;

1536 
TPršc®
* 
Sig
 = 
Ãw
 
	`TPršc®
Ğ
nm‘h
+
nv¬
, "" );

1537 
TPršc®
* 
Bkg
 = 
Ãw
 
	`TPršc®
Ğ
nm‘h
+
nv¬
, "" );

1540 
IÁ_t
 
iv¬
 = 0;

1541 
¡d
::
veùÜ
<
TSŒšg
>* 
theV¬s
 = 
Ãw
 std::vector<TString>;

1542 
¡d
::
veùÜ
<
ResuÉsCÏssifiÿtiÚ
*> 
mvaRes
;

1543 
MVeùÜ
::
™”©Ü
 
™rM‘hod
 = 
m‘hodsNoCuts
.
	`begš
(); iŒM‘hod !ğm‘hodsNoCuts.
	`’d
(); iŒM‘hod++, 
iv¬
++) {

1544 
M‘hodBa£
* 
m
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

1545 if(
m
==0) ;

1546 
theV¬s
->
	`push_back
Ğ
m
->
	`G‘Te¡v¬Name
() );

1547 
rvec
.
	`push_back
Ğ
m
->
	`G‘SigÇlReã»nûCut
() );

1548 
theV¬s
->
	`back
().
	`R•ÏûAÎ
( "MVA_", "" );

1549 
mvaRes
.
	`push_back
Ğ
dyÇmic_ÿ¡
<
ResuÉsCÏssifiÿtiÚ
*>Ğ
m
->
	`D©a
()->
	`G‘ResuÉs
Ğm->
	`G‘M‘hodName
(),

1550 
Ty³s
::
kTe¡šg
,

1551 
Ty³s
::
kMaxAÇlysisTy³
) ) );

1555 
TM©rixD
* 
ov”ÏpS
 = 
Ãw
 
	`TM©rixD
Ğ
nm‘h
,‚meth );

1556 
TM©rixD
* 
ov”ÏpB
 = 
Ãw
 
	`TM©rixD
Ğ
nm‘h
,‚meth );

1557 (*
ov”ÏpS
) *= 0;

1558 (*
ov”ÏpB
) *= 0;

1561 
D©aS‘
* 
defDs
 = 
m‘hod
->
fD©aS‘Info
.
	`G‘D©aS‘
();

1562 
defDs
->
	`S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

1563 
IÁ_t
 
›vt
=0; ievt<
defDs
->
	`G‘NEv’ts
(); ievt++) {

1564 cÚ¡ 
Ev’t
* 
ev
 = 
defDs
->
	`G‘Ev’t
(
›vt
);

1567 
TM©rixD
* 
theM©
 = 0;

1568 
IÁ_t
 
im
=0; im<
nm‘h
; im++) {

1570 
DoubË_t
 
»tv®
 = (DoubË_t)(*
mvaRes
[
im
])[
›vt
][0];

1571 ià(
TM©h
::
	`IsNaN
(
»tv®
)) {

1572 
	`Log
(è<< 
kWARNING
 << "Found NaN„‘uº v®ušƒv’t: " << 
›vt


1573 << " fÜ m‘hod \"" << 
m‘hodsNoCuts
[
im
]->
	`G‘Name
(è<< "\"" << 
Endl
;

1574 
dvec
[
im
] = 0;

1576 
dvec
[
im
] = 
»tv®
;

1578 
IÁ_t
 
iv
=0; iv<
nv¬
; iv++è
dvec
[iv+
nm‘h
] = (
DoubË_t
)
ev
->
	`G‘V®ue
(iv);

1579 ià(
m‘hod
->
fD©aS‘Info
.
	`IsSigÇl
(
ev
)è{ 
Sig
->
	`AddRow
Ğ
dvec
 ); 
theM©
 = 
ov”ÏpS
; }

1580 { 
Bkg
->
	`AddRow
Ğ
dvec
 ); 
theM©
 = 
ov”ÏpB
; }

1583 
IÁ_t
 
im
=0; im<
nm‘h
; im++) {

1584 
IÁ_t
 
jm
=
im
; jm<
nm‘h
; jm++) {

1585 ià((
dvec
[
im
] - 
rvec
[im])*(dvec[
jm
] -„vec[jm]) > 0) {

1586 (*
theM©
)(
im
,
jm
)++;

1587 ià(
im
 !ğ
jm
è(*
theM©
)(jm,im)++;

1594 (*
ov”ÏpS
è*ğ(1.0/
defDs
->
	`G‘NEvtSigTe¡
());

1595 (*
ov”ÏpB
è*ğ(1.0/
defDs
->
	`G‘NEvtBkgdTe¡
());

1597 
Sig
->
	`MakePršc®s
();

1598 
Bkg
->
	`MakePršc®s
();

1600 cÚ¡ 
TM©rixD
* 
covM©S
 = 
Sig
->
	`G‘Cov¬ŸnûM©rix
();

1601 cÚ¡ 
TM©rixD
* 
covM©B
 = 
Bkg
->
	`G‘Cov¬ŸnûM©rix
();

1603 cÚ¡ 
TM©rixD
* 
cÜrM©S
 = 
	`gToŞs
().
	`G‘CÜ»ÏtiÚM©rix
Ğ
covM©S
 );

1604 cÚ¡ 
TM©rixD
* 
cÜrM©B
 = 
	`gToŞs
().
	`G‘CÜ»ÏtiÚM©rix
Ğ
covM©B
 );

1607 ià(
cÜrM©S
 !ğ0 && 
cÜrM©B
 != 0) {

1610 
TM©rixD
 
	`mvaM©S
(
nm‘h
,nmeth);

1611 
TM©rixD
 
	`mvaM©B
(
nm‘h
,nmeth);

1612 
IÁ_t
 
im
=0; im<
nm‘h
; im++) {

1613 
IÁ_t
 
jm
=0; jm<
nm‘h
; jm++) {

1614 
	`mvaM©S
(
im
,
jm
èğ(*
cÜrM©S
)(im,jm);

1615 
	`mvaM©B
(
im
,
jm
èğ(*
cÜrM©B
)(im,jm);

1620 
¡d
::
veùÜ
<
TSŒšg
> 
theIÅutV¬s
;

1621 
TM©rixD
 
	`v¬mvaM©S
(
nv¬
,
nm‘h
);

1622 
TM©rixD
 
	`v¬mvaM©B
(
nv¬
,
nm‘h
);

1623 
IÁ_t
 
iv
=0; iv<
nv¬
; iv++) {

1624 
theIÅutV¬s
.
	`push_back
Ğ
m‘hod
->
fD©aS‘Info
.
	`G‘V¬ŸbËInfo
Ğ
iv
 ).
	`G‘Lab–
() );

1625 
IÁ_t
 
jm
=0; jm<
nm‘h
; jm++) {

1626 
	`v¬mvaM©S
(
iv
,
jm
èğ(*
cÜrM©S
)(
nm‘h
+iv,jm);

1627 
	`v¬mvaM©B
(
iv
,
jm
èğ(*
cÜrM©B
)(
nm‘h
+iv,jm);

1631 ià(
nm‘h
 > 1) {

1632 
	`Log
(è<< 
kINFO
 << 
Endl
;

1633 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "IÁ”-MVA cÜ»ÏtiÚ m©rix (sigÇl):" << 
Endl
;

1634 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
mvaM©S
, *
theV¬s
, 
	`Log
() );

1635 
	`Log
(è<< 
kINFO
 << 
Endl
;

1637 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "IÁ”-MVA cÜ»ÏtiÚ m©rix (background):" << 
Endl
;

1638 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
mvaM©B
, *
theV¬s
, 
	`Log
() );

1639 
	`Log
(è<< 
kINFO
 << 
Endl
;

1642 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "CÜ»ÏtiÚ b‘w“Àšpuˆv¬ŸbË ªd MVA„e¥Ú£ (sigÇl):" << 
Endl
;

1643 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
v¬mvaM©S
, 
theIÅutV¬s
, *
theV¬s
, 
	`Log
() );

1644 
	`Log
(è<< 
kINFO
 << 
Endl
;

1646 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "CÜ»ÏtiÚ b‘w“Àšpuˆv¬ŸbË ªd MVA„e¥Ú£ (background):" << 
Endl
;

1647 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
v¬mvaM©B
, 
theIÅutV¬s
, *
theV¬s
, 
	`Log
() );

1648 
	`Log
(è<< 
kINFO
 << 
Endl
;

1650 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "<Te¡AÎM‘hods> cªnÙ compu‹ cÜ»ÏtiÚ m©riûs" << 
Endl
;

1653 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "ThfŞlowšg \"ov”Ïp\" m©riû cÚšhäaùiÚ oàev’t fÜ which " << 
Endl
;

1654 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "thMVA 'i'‡nd 'j' hav»tuºed cÚfÜm‡nsw” abouˆ\"sigÇl-lik’ess\"" << 
Endl
;

1655 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "AÀev’ˆi sigÇl-like, ià™ MVA ouuˆexûed thfŞlowšg v®ue:" << 
Endl
;

1656 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
rvec
, *
theV¬s
, "M‘hod" , "Cuˆv®ue", 
	`Log
() );

1657 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "which cÜ»¥ÚdØthwÜkšg…ošt:ƒff(sigÇlèğ1 -ƒff(background)" << 
Endl
;

1660 ià(
nm‘h
 !ğ(
IÁ_t
)
m‘hods
->
	`size
())

1661 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "NÙe:‚ØcÜ»ÏtiÚ ªd ov”Ï°w™h cuˆm‘hod‡»…rovided‡ˆ´e£Á" << 
Endl
;

1663 ià(
nm‘h
 > 1) {

1664 
	`Log
(è<< 
kINFO
 << 
Endl
;

1665 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "IÁ”-MVA ov”Ï°m©rix (sigÇl):" << 
Endl
;

1666 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ*
ov”ÏpS
, *
theV¬s
, 
	`Log
() );

1667 
	`Log
(è<< 
kINFO
 << 
Endl
;

1669 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
m‘hod
->
fD©aS‘Info
.
	`G‘Name
())<< "IÁ”-MVA ov”Ï°m©rix (background):" << 
Endl
;

1670 
	`gToŞs
().
	`FÜm©‹dOuut
Ğ*
ov”ÏpB
, *
theV¬s
, 
	`Log
() );

1674 
d–‘e
 
Sig
;

1675 
d–‘e
 
Bkg
;

1676 
d–‘e
 
cÜrM©S
;

1677 
d–‘e
 
cÜrM©B
;

1678 
d–‘e
 
theV¬s
;

1679 
d–‘e
 
ov”ÏpS
;

1680 
d–‘e
 
ov”ÏpB
;

1681 
d–‘e
 [] 
dvec
;

1690 ià(
doReg»ssiÚ
) {

1692 
	`Log
(è<< 
kINFO
 << 
Endl
;

1693 
TSŒšg
 
hLše
 = "--------------------------------------------------------------------------------------------------";

1694 
	`Log
(è<< 
kINFO
 << "Ev®u©iÚ„esuÉ ¿nked by sm®Ë¡ RMS oÀ‹¡ sam¶e:" << 
Endl
;

1695 
	`Log
(è<< 
kINFO
 << "(\"BŸs\" quÙe thm—ÀdevŸtiÚ oàth»g»ssiÚ fromrurg‘." << 
Endl
;

1696 
	`Log
(è<< 
kINFO
 << " \"MutInf\" i th\"Mutu® InfÜm©iÚ\" b‘w“À»g»ssiÚ‡nd¬g‘." << 
Endl
;

1697 
	`Log
(è<< 
kINFO
 << " Indiÿ‹d by \"_T\"‡»hcÜ»¥Údšg \"Œunÿ‹d\" quªt™› ob-" << 
Endl
;

1698 
	`Log
(è<< 
kINFO
 << "ašed wh’„emovšgƒv’t devŸtšg mÜthª 2sigm¨äom‡v”age.)" << 
Endl
;

1699 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1701 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1703 
IÁ_t
 
i
=0; i<
nm‘h_u£d
[0]; i++) {

1704 
M‘hodBa£
* 
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>((*
m‘hods
)[
i
]);

1705 if(
theM‘hod
==0) ;

1707 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%-20s %-15s:%#9.3g%#9.3g%#9.3g%#9.3g | %#5.3f %#5.3f",

1708 
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
(),

1709 (cÚ¡ *)
mÇme
[0][
i
],

1710 
bŸ¡e¡
[0][
i
], 
bŸ¡e¡T
[0][i],

1711 
rm¡e¡
[0][
i
], 
rm¡e¡T
[0][i],

1712 
mšáe¡
[0][
i
], 
mšáe¡T
[0][i] )

1713 << 
Endl
;

1715 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1716 
	`Log
(è<< 
kINFO
 << 
Endl
;

1717 
	`Log
(è<< 
kINFO
 << "Ev®u©iÚ„esuÉ ¿nked by sm®Ë¡ RMS oÀŒaššg sam¶e:" << 
Endl
;

1718 
	`Log
(è<< 
kINFO
 << "(ov”Œaššg check)" << 
Endl
;

1719 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1720 
	`Log
(è<< 
kINFO
 << "D©aS‘ Name: MVA M‘hod: <BŸs> <BŸs_T> RMS RMS_T | MutInàMutInf_T" << 
Endl
;

1721 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1723 
IÁ_t
 
i
=0; i<
nm‘h_u£d
[0]; i++) {

1724 
M‘hodBa£
* 
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>((*
m‘hods
)[
i
]);

1725 if(
theM‘hod
==0) ;

1726 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%-20s %-15s:%#9.3g%#9.3g%#9.3g%#9.3g | %#5.3f %#5.3f",

1727 
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
(),

1728 (cÚ¡ *)
mÇme
[0][
i
],

1729 
bŸ¡¿š
[0][
i
], 
bŸ¡¿šT
[0][i],

1730 
rm¡¿š
[0][
i
], 
rm¡¿šT
[0][i],

1731 
mšá¿š
[0][
i
], 
mšá¿šT
[0][i] )

1732 << 
Endl
;

1734 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1735 
	`Log
(è<< 
kINFO
 << 
Endl
;

1736 } ià(
doMuÉişass
) {

1741 
TSŒšg
 
hLše
 =

1781 
TSŒšg
 
h—d”1
 =

1782 
	`FÜm
("%-15s%-15s%-10s%-10s%-10s%-10s", "Dataset", "MVA Method", "", "Sigƒff", "Sigƒff", "Sigƒff");

1783 
TSŒšg
 
h—d”2
 =

1784 
	`FÜm
("%-15s%-15s%-10s%-10s%-10s%-10s", "Name:", "/ Class:", "ROC AUC", "@B=0.01", "@B=0.10", "@B=0.30");

1785 
	`Log
(è<< 
kINFO
 << "1-vs-»¡…”fÜmªû m‘ric ³¸şass" << 
Endl
;

1786 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1787 
	`Log
(è<< 
kINFO
 << 
Endl
;

1788 
	`Log
(è<< 
kINFO
 << "CÚsid” thli¡ed cÏs a sigÇÈªdhÙh” cÏs£s" << 
Endl
;

1789 
	`Log
(è<< 
kINFO
 << "a background,„•Ütšgh»suÉšg bš¬y…”fÜmªû." << 
Endl
;

1791 
	`Log
(è<< 
kINFO
 << 
Endl
;

1792 
	`Log
(è<< 
kINFO
 << 
h—d”1
 << 
Endl
;

1793 
	`Log
(è<< 
kINFO
 << 
h—d”2
 << 
Endl
;

1794 
IÁ_t
 
k
 = 0; k < 2; k++) {

1795 
IÁ_t
 
i
 = 0; i < 
nm‘h_u£d
[
k
]; i++) {

1796 ià(
k
 == 1) {

1797 
mÇme
[
k
][
i
].
	`R•ÏûAÎ
("Variable_", "");

1800 cÚ¡ 
TSŒšg
 
d©a£tName
 = 
™rM­
->
fœ¡
;

1801 cÚ¡ 
TSŒšg
 
mvaName
 = 
mÇme
[
k
][
i
];

1803 
M‘hodBa£
 *
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£ *>(
	`G‘M‘hod
(
d©a£tName
, 
mvaName
));

1804 ià(
theM‘hod
 == 0) {

1808 
	`Log
(è<< 
kINFO
 << 
Endl
;

1809 
TSŒšg
 
row
 = 
	`FÜm
("%-15s%-15s", 
d©a£tName
.
	`D©a
(), 
mvaName
.Data());

1810 
	`Log
(è<< 
kINFO
 << 
row
 << 
Endl
;

1812 
UIÁ_t
 
numCÏs£s
 = 
theM‘hod
->
fD©aS‘Info
.
	`G‘NCÏs£s
();

1813 
D©aS‘
 *
d©a£t
 = 
theM‘hod
->
	`D©a
();

1814 
TMVA
::
ResuÉs
 *
»suÉs
 = 
theM‘hod
->
	`D©a
()->
	`G‘ResuÉs
(
mÇme
[
k
][
i
], 
Ty³s
::
kTe¡šg
, Ty³s::
kMuÉişass
);

1816 
UIÁ_t
 
iCÏss
 = 0; iCÏs < 
numCÏs£s
; ++iClass) {

1817 
¡d
::
veùÜ
<
Flßt_t
> 
mvaRes
;

1818 
¡d
::
veùÜ
<
BoŞ_t
> 
mvaResTy³
;

1819 
¡d
::
veùÜ
<
Flßt_t
> 
mvaResWeight
;

1821 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
>> *
¿wMvaRes
 =

1822 
dyÇmic_ÿ¡
<
ResuÉsMuÉişass
 *>(
»suÉs
)->
	`G‘V®ueVeùÜ
();

1827 
mvaRes
.
	`»£rve
(
¿wMvaRes
->
	`size
());

1828 autØ
™em
 : *
¿wMvaRes
) {

1829 
mvaRes
.
	`push_back
(
™em
[
iCÏss
]);

1832 autØ
ev’tCŞËùiÚ
 = 
d©a£t
->
	`G‘Ev’tCŞËùiÚ
();

1833 
mvaResTy³
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

1834 
mvaResWeight
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

1835 autØ
ev
 : 
ev’tCŞËùiÚ
) {

1836 
mvaResTy³
.
	`push_back
(
ev
->
	`G‘CÏss
(è=ğ
iCÏss
);

1837 
mvaResWeight
.
	`push_back
(
ev
->
	`G‘Weight
());

1840 
ROCCurve
 
rocCurve
 = 
	`ROCCurve
(
mvaRes
, 
mvaResTy³
, 
mvaResWeight
);

1842 cÚ¡ 
TSŒšg
 
şassName
 = 
theM‘hod
->
	`D©aInfo
().
	`G‘CÏssInfo
(
iCÏss
)->
	`G‘Name
();

1843 cÚ¡ 
DoubË_t
 
roÿuc
 = 
rocCurve
.
	`G‘ROCIÁeg¿l
();

1844 cÚ¡ 
DoubË_t
 
effB01
 = 
rocCurve
.
	`G‘EffSFÜEffB
(0.01);

1845 cÚ¡ 
DoubË_t
 
effB10
 = 
rocCurve
.
	`G‘EffSFÜEffB
(0.10);

1846 cÚ¡ 
DoubË_t
 
effB30
 = 
rocCurve
.
	`G‘EffSFÜEffB
(0.30);

1847 
row
 = 
	`FÜm
("%-15s%-15s%-10.3f%-10.3f%-10.3f%-10.3f", "", 
şassName
.
	`D©a
(), 
roÿuc
, 
effB01
, 
effB10
,

1848 
effB30
);

1849 
	`Log
(è<< 
kINFO
 << 
row
 << 
Endl
;

1853 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1854 
	`Log
(è<< 
kINFO
 << 
Endl
;

1858 autØ
´štM©rix
 = [](
TM©rixD
 
m©
, 
¡d
::
veùÜ
<
TSŒšg
> 
şas¢ames
, 
UIÁ_t
 
numCÏs£s
, 
MsgLogg”
 &
¡»am
) {

1862 
TSŒšg
 
h—d”
 = 
	`FÜm
("%-12s", " ");

1863 
UIÁ_t
 
iCŞ
 = 0; iCŞ < 
numCÏs£s
; ++iCol) {

1864 
h—d”
 +ğ
	`FÜm
(" %-12s", 
şas¢ames
[
iCŞ
].
	`D©a
());

1866 
¡»am
 << 
kINFO
 << 
h—d”
 << 
Endl
;

1868 
UIÁ_t
 
iRow
 = 0; iRow < 
numCÏs£s
; ++iRow) {

1869 
¡»am
 << 
kINFO
 << 
	`FÜm
("%-12s", 
şas¢ames
[
iRow
].
	`D©a
());

1871 
UIÁ_t
 
iCŞ
 = 0; iCŞ < 
numCÏs£s
; ++iCol) {

1872 ià(
iCŞ
 =ğ
iRow
) {

1873 
¡»am
 << 
kINFO
 << 
	`FÜm
(" %-12s", "-");

1877 
DoubË_t
 
v®ue
 = 
m©
[
iRow
][
iCŞ
];

1878 
¡»am
 << 
kINFO
 << 
	`FÜm
(" %-12.3f", 
v®ue
);

1880 
¡»am
 << 
kINFO
 << 
Endl
;

1884 
	`Log
(è<< 
kINFO
 << 
Endl
;

1885 
	`Log
(è<< 
kINFO
 << "CÚfusiÚ m©riû fÜ‡Î m‘hods" << 
Endl
;

1886 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1887 
	`Log
(è<< 
kINFO
 << 
Endl
;

1888 
	`Log
(è<< 
kINFO
 << "DÛ ¨bš¬y com·risÚ b‘w“ÀthtwØşas£ giv’ by‡ " << 
Endl
;

1889 
	`Log
(è<< 
kINFO
 << "·¹icuÏ¸row-cŞumÀcombš©iÚ. IÀ—ch ca£,hşas " << 
Endl
;

1890 
	`Log
(è<< 
kINFO
 << "giv’ byhrow i cÚsid”ed sigÇÈwhthşas giv’ " << 
Endl
;

1891 
	`Log
(è<< 
kINFO
 << "byhcŞumÀšdex i cÚsid”ed background." << 
Endl
;

1892 
	`Log
(è<< 
kINFO
 << 
Endl
;

1893 
UIÁ_t
 
iM‘hod
 = 0; iM‘hod < 
m‘hods
->
	`size
(); ++iMethod) {

1894 
M‘hodBa£
 *
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£ *>(
m‘hods
->
	`©
(
iM‘hod
));

1895 ià(
theM‘hod
 =ğ
nuÎ±r
) {

1898 
UIÁ_t
 
numCÏs£s
 = 
theM‘hod
->
fD©aS‘Info
.
	`G‘NCÏs£s
();

1900 
¡d
::
veùÜ
<
TSŒšg
> 
şas¢ames
;

1901 
UIÁ_t
 
iCls
 = 0; iCl < 
numCÏs£s
; ++iCls) {

1902 
şas¢ames
.
	`push_back
(
theM‘hod
->
fD©aS‘Info
.
	`G‘CÏssInfo
(
iCls
)->
	`G‘Name
());

1904 
	`Log
(è<< 
kINFO
 << "Showšg cÚfusiÚ m©rix fÜ m‘hod : " << 
	`FÜm
("%-15s", (cÚ¡ *)
mÇme
[0][
iM‘hod
])

1905 << 
Endl
;

1906 
	`Log
(è<< 
kINFO
 << "(SigÇÈEffic›ncy fÜ Background Effic›ncy 0.01%)" << 
Endl
;

1907 
	`´štM©rix
(
muÉişass_‹¡CÚfusiÚEffB01
[
iM‘hod
], 
şas¢ames
, 
numCÏs£s
, 
	`Log
());

1908 
	`Log
(è<< 
kINFO
 << 
Endl
;

1910 
	`Log
(è<< 
kINFO
 << "(SigÇÈEffic›ncy fÜ Background Effic›ncy 0.10%)" << 
Endl
;

1911 
	`´štM©rix
(
muÉişass_‹¡CÚfusiÚEffB10
[
iM‘hod
], 
şas¢ames
, 
numCÏs£s
, 
	`Log
());

1912 
	`Log
(è<< 
kINFO
 << 
Endl
;

1914 
	`Log
(è<< 
kINFO
 << "(SigÇÈEffic›ncy fÜ Background Effic›ncy 0.30%)" << 
Endl
;

1915 
	`´štM©rix
(
muÉişass_‹¡CÚfusiÚEffB30
[
iM‘hod
], 
şas¢ames
, 
numCÏs£s
, 
	`Log
());

1916 
	`Log
(è<< 
kINFO
 << 
Endl
;

1918 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1919 
	`Log
(è<< 
kINFO
 << 
Endl
;

1923 ià(
fROC
) {

1924 
	`Log
().
	`EÇbËOuut
();

1925 
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

1926 
	`Log
(è<< 
Endl
;

1927 
TSŒšg
 
hLše
 = "------------------------------------------------------------------------------------------"

1929 
	`Log
(è<< 
kINFO
 << "Ev®u©iÚ„esuÉ ¿nked by be¡ sigÇÈeffic›ncy‡nd…ur™y (¬—)" << 
Endl
;

1930 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1931 
	`Log
(è<< 
kINFO
 << "D©aS‘ MVA " << 
Endl
;

1932 
	`Log
(è<< 
kINFO
 << "Name: M‘hod: ROC-š‹g" << 
Endl
;

1937 
	`Log
(è<< 
kDEBUG
 << 
hLše
 << 
Endl
;

1938 
IÁ_t
 
k
 = 0; k < 2; k++) {

1939 ià(
k
 =ğ1 && 
nm‘h_u£d
[k] > 0) {

1940 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1941 
	`Log
(è<< 
kINFO
 << "IÅuˆV¬ŸbËs: " << 
Endl
 << 
hLše
 << Endl;

1943 
IÁ_t
 
i
 = 0; i < 
nm‘h_u£d
[
k
]; i++) {

1944 
TSŒšg
 
d©a£tName
 = 
™rM­
->
fœ¡
;

1945 
TSŒšg
 
m‘hodName
 = 
mÇme
[
k
][
i
];

1947 ià(
k
 == 1) {

1948 
m‘hodName
.
	`R•ÏûAÎ
("Variable_", "");

1951 
M‘hodBa£
 *
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£ *>(
	`G‘M‘hod
(
d©a£tName
, 
m‘hodName
));

1952 ià(
theM‘hod
 == 0) {

1956 
TMVA
::
D©aS‘
 *
d©a£t
 = 
theM‘hod
->
	`D©a
();

1957 
TMVA
::
ResuÉs
 *
»suÉs
 = 
d©a£t
->
	`G‘ResuÉs
(
m‘hodName
, 
Ty³s
::
kTe¡šg
, 
this
->
fAÇlysisTy³
);

1958 
¡d
::
veùÜ
<
BoŞ_t
> *
mvaResTy³
 =

1959 
dyÇmic_ÿ¡
<
ResuÉsCÏssifiÿtiÚ
 *>(
»suÉs
)->
	`G‘V®ueVeùÜTy³s
();

1961 
DoubË_t
 
rocIÁeg¿l
 = 0.0;

1962 ià(
mvaResTy³
->
	`size
() != 0) {

1963 
rocIÁeg¿l
 = 
	`G‘ROCIÁeg¿l
(
d©a£tName
, 
m‘hodName
);

1966 ià(
£p
[
k
][
i
] < 0 || 
sig
[k][i] < 0) {

1968 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%-13 %-15s: %#1.3f", 
d©a£tName
.
	`D©a
(), 
m‘hodName
.D©a(), 
effA»a
[
k
][
i
])

1969 << 
Endl
;

1980 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%-13 %-15s: %#1.3f", 
d©a£tName
.
	`D©a
(), 
m‘hodName
.D©a(), 
rocIÁeg¿l
)

1981 << 
Endl
;

1994 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1995 
	`Log
(è<< 
kINFO
 << 
Endl
;

1996 
	`Log
(è<< 
kINFO
 << "Te¡šgƒffic›ncy com·»dØŒaššgƒffic›ncy (ov”Œaššg check)" << 
Endl
;

1997 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

1998 
	`Log
(è<< 
kINFO


2000 << 
Endl
;

2001 
	`Log
(è<< 
kINFO
 << "Name: Method: @B=0.01 @B=0.10 @B=0.30 "

2002 << 
Endl
;

2003 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

2004 
IÁ_t
 
k
 = 0; k < 2; k++) {

2005 ià(
k
 =ğ1 && 
nm‘h_u£d
[k] > 0) {

2006 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

2007 
	`Log
(è<< 
kINFO
 << "IÅuˆV¬ŸbËs: " << 
Endl
 << 
hLše
 << Endl;

2009 
IÁ_t
 
i
 = 0; i < 
nm‘h_u£d
[
k
]; i++) {

2010 ià(
k
 =ğ1è
mÇme
[k][
i
].
	`R•ÏûAÎ
("Variable_", "");

2011 
M‘hodBa£
 *
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£ *>((*
m‘hods
)[
i
]);

2012 ià(
theM‘hod
 == 0) ;

2014 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%-20s %-15s: %#1.3f (%#1.3f) %#1.3f (%#1.3f) %#1.3f (%#1.3f)",

2015 
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
(), (cÚ¡ *)
mÇme
[
k
][
i
], 
eff01
[k][i],

2016 
ŒašEff01
[
k
][
i
], 
eff10
[k][i], 
ŒašEff10
[k][i], 
eff30
[k][i], 
ŒašEff30
[k][i])

2017 << 
Endl
;

2020 
	`Log
(è<< 
kINFO
 << 
hLše
 << 
Endl
;

2021 
	`Log
(è<< 
kINFO
 << 
Endl
;

2023 ià(
	`gToŞs
().
	`CheckFÜS’tO±iÚ
(
	`G‘O±iÚs
())è
	`Log
().
	`Inhib™Ouut
();

2026 if(!
	`IsS’tFe
())

2028 
¡d
::
li¡
<
TSŒšg
> 
d©a£ts
;

2029 
IÁ_t
 
k
=0; k<2; k++) {

2030 
IÁ_t
 
i
=0; i<
nm‘h_u£d
[
k
]; i++) {

2031 
M‘hodBa£
* 
theM‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>((*
m‘hods
)[
i
]);

2032 if(
theM‘hod
==0) ;

2034 
	`RoÙBa£Dœ
()->
	`cd
(
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
());

2035 if(
¡d
::
	`fšd
(
d©a£ts
.
	`begš
(), d©a£ts.
	`’d
(), 
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
()) == datasets.end())

2037 
theM‘hod
->
fD©aS‘Info
.
	`G‘D©aS‘
()->
	`G‘T»e
(
Ty³s
::
kTe¡šg
)->
	`Wr™e
Ğ"", 
TObjeù
::
kOv”wr™e
 );

2038 
theM‘hod
->
fD©aS‘Info
.
	`G‘D©aS‘
()->
	`G‘T»e
(
Ty³s
::
kT¿ššg
)->
	`Wr™e
Ğ"", 
TObjeù
::
kOv”wr™e
 );

2039 
d©a£ts
.
	`push_back
(
theM‘hod
->
fD©aS‘Info
.
	`G‘Name
());

2046 
	`gToŞs
().
	`TMVAC™©iÚ
Ğ
	`Log
(), 
ToŞs
::
kHtmlLšk
 );

2047 
	}
}

2052 
TH1F
* 
	gTMVA
::
FaùÜy
::
	$Ev®u©eImpÜnû
(
D©aLßd”
 *
lßd”
,
VITy³
 
v™y³
, 
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, cÚ¡ *
theO±iÚ
)

2054 
fMod–P”si¡’û
=
kFALSE
;

2055 
fS’tFe
=
kTRUE
;

2058 cÚ¡ 
nb™s
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

2059 if(
v™y³
==
VITy³
::
kShÜt
)

2060  
	`Ev®u©eImpÜnûShÜt
(
lßd”
,
theM‘hod
,
m‘hodT™Ë
,
theO±iÚ
);

2061 if(
v™y³
==
VITy³
::
kAÎ
)

2062  
	`Ev®u©eImpÜnûAÎ
(
lßd”
,
theM‘hod
,
m‘hodT™Ë
,
theO±iÚ
);

2063 if(
v™y³
==
VITy³
::
kRªdom
&&
nb™s
>10)

2065  
	`Ev®u©eImpÜnûRªdom
(
lßd”
,
	`pow
(2,
nb™s
),
theM‘hod
,
m‘hodT™Ë
,
theO±iÚ
);

2068 
¡d
::
û¼
<<"E¼Ü iÀV¬ŸbË ImpÜnû: Rªdom mod»quœmÜth© 10 v¬ŸbË šhd©a£t."<<¡d::
’dl
;

2069  
nuÎ±r
;

2071 
	}
}

2075 
TH1F
* 
	gTMVA
::
FaùÜy
::
	$Ev®u©eImpÜnûAÎ
(
D©aLßd”
 *
lßd”
, 
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, cÚ¡ *
theO±iÚ
)

2078 
ušt64_t
 
x
 = 0;

2079 
ušt64_t
 
y
 = 0;

2082 cÚ¡ 
nb™s
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

2083 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

2085 
ušt64_t
 
¿nge
 = 
	`pow
(2, 
nb™s
);

2088 
¡d
::
veùÜ
<
DoubË_t
> 
	`impÜnûs
(
nb™s
);

2090 
¡d
::
veùÜ
<
DoubË_t
> 
	`ROC
(
¿nge
);

2091 
ROC
[0]=0.5;

2092 
i
 = 0; i < 
nb™s
; i++)
impÜnûs
[i] = 0;

2094 
DoubË_t
 
SROC
, 
SSROC
;

2095  
x
 = 1; x <
¿nge
 ; x++) {

2097 
¡d
::
b™£t
<
VIBITS
> 
	`xb™£t
(
x
);

2098 ià(
x
 == 0) ;

2101 
TMVA
::
D©aLßd”
 *
£edlßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

2104 
šdex
 = 0; index < 
nb™s
; index++) {

2105 ià(
xb™£t
[
šdex
]è
£edlßd”
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

2108 
	`D©aLßd”Cİy
(
£edlßd”
,
lßd”
);

2109 
£edlßd”
->
	`P»·»T¿ššgAndTe¡T»e
(
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘Cut
("SigÇl"),†ßd”->DeçuÉD©aS‘Info().G‘Cut("Background"),†ßd”->DeçuÉD©aS‘Info().
	`G‘S¶™O±iÚs
());

2112 
	`BookM‘hod
(
£edlßd”
, 
theM‘hod
, 
m‘hodT™Ë
, 
theO±iÚ
);

2115 
	`T¿šAÎM‘hods
();

2116 
	`Te¡AÎM‘hods
();

2117 
	`Ev®u©eAÎM‘hods
();

2120 
ROC
[
x
] = 
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

2123 
TMVA
::
M‘hodBa£
 *
sm‘hod
=
dyÇmic_ÿ¡
<TMVA::M‘hodBa£*>(
fM‘hodsM­
[
xb™£t
.
	`to_¡ršg
().
	`c_¡r
()][0][0]);

2124 
TMVA
::
ResuÉsCÏssifiÿtiÚ
 *
¤esuÉs
 = (TMVA::ResuÉsCÏssifiÿtiÚ*)
sm‘hod
->
	`D©a
()->
	`G‘ResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

2125 
d–‘e
 
¤esuÉs
;

2126 
d–‘e
 
£edlßd”
;

2127 
this
->
	`D–‘eAÎM‘hods
();

2129 
fM‘hodsM­
.
	`ş—r
();

2134  
x
 = 0; x <
¿nge
 ; x++)

2136 
SROC
=
ROC
[
x
];

2137 
ušt32_t
 
i
 = 0; i < 
VIBITS
; ++i) {

2138 ià(
x
 & (1 << 
i
)) {

2139 
y
 = 
x
 & ~(1 << 
i
);

2140 
¡d
::
b™£t
<
VIBITS
> 
	`yb™£t
(
y
);

2144 
DoubË_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2145 ià(
y
 == 0) {

2146 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

2151 
SSROC
 = 
ROC
[
y
];

2152 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

2158 
¡d
::
cout
<<"--- V¬ŸbË ImpÜnû ResuÉ (AÎ)"<<¡d::
’dl
;

2159  
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
);

2160 
	}
}

2162 
	$sum
(
i
)

2164 
_sum
=0;

2165 
n
=0;n<
i
;n++è
_sum
+=
	`pow
(2,n);

2166  
_sum
;

2167 
	}
}

2171 
TH1F
* 
	gTMVA
::
FaùÜy
::
	$Ev®u©eImpÜnûShÜt
(
D©aLßd”
 *
lßd”
, 
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, cÚ¡ *
theO±iÚ
)

2173 
ušt64_t
 
x
 = 0;

2174 
ušt64_t
 
y
 = 0;

2177 cÚ¡ 
nb™s
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

2178 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

2180 
¿nge
 = 
	`sum
(
nb™s
);

2183 
¡d
::
veùÜ
<
DoubË_t
> 
	`impÜnûs
(
nb™s
);

2184 
i
 = 0; i < 
nb™s
; i++)
impÜnûs
[i] = 0;

2186 
DoubË_t
 
SROC
, 
SSROC
;

2188 
x
 = 
¿nge
;

2190 
¡d
::
b™£t
<
VIBITS
> 
	`xb™£t
(
x
);

2191 ià(
x
 =ğ0è
	`Log
()<<
kFATAL
<<"Error:‚eed‡t†east one variable.";

2195 
TMVA
::
D©aLßd”
 *
£edlßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

2198 
šdex
 = 0; index < 
nb™s
; index++) {

2199 ià(
xb™£t
[
šdex
]è
£edlßd”
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

2203 
	`D©aLßd”Cİy
(
£edlßd”
,
lßd”
);

2206 
	`BookM‘hod
(
£edlßd”
, 
theM‘hod
, 
m‘hodT™Ë
, 
theO±iÚ
);

2209 
	`T¿šAÎM‘hods
();

2210 
	`Te¡AÎM‘hods
();

2211 
	`Ev®u©eAÎM‘hods
();

2214 
SROC
 = 
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

2217 
TMVA
::
M‘hodBa£
 *
sm‘hod
=
dyÇmic_ÿ¡
<TMVA::M‘hodBa£*>(
fM‘hodsM­
[
xb™£t
.
	`to_¡ršg
().
	`c_¡r
()][0][0]);

2218 
TMVA
::
ResuÉsCÏssifiÿtiÚ
 *
¤esuÉs
 = (TMVA::ResuÉsCÏssifiÿtiÚ*)
sm‘hod
->
	`D©a
()->
	`G‘ResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

2219 
d–‘e
 
¤esuÉs
;

2220 
d–‘e
 
£edlßd”
;

2221 
this
->
	`D–‘eAÎM‘hods
();

2222 
fM‘hodsM­
.
	`ş—r
();

2226 
ušt32_t
 
i
 = 0; i < 
VIBITS
; ++i) {

2227 ià(
x
 & (1 << 
i
)) {

2228 
y
 = 
x
 & ~(1 << 
i
);

2229 
¡d
::
b™£t
<
VIBITS
> 
	`yb™£t
(
y
);

2233 
DoubË_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2234 ià(
y
 == 0) {

2235 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

2240 
TMVA
::
D©aLßd”
 *
sub£edlßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
(
yb™£t
.
	`to_¡ršg
());

2242 
šdex
 = 0; index < 
nb™s
; index++) {

2243 ià(
yb™£t
[
šdex
]è
sub£edlßd”
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

2247 
	`D©aLßd”Cİy
(
sub£edlßd”
,
lßd”
);

2250 
	`BookM‘hod
(
sub£edlßd”
, 
theM‘hod
, 
m‘hodT™Ë
, 
theO±iÚ
);

2253 
	`T¿šAÎM‘hods
();

2254 
	`Te¡AÎM‘hods
();

2255 
	`Ev®u©eAÎM‘hods
();

2258 
SSROC
 = 
	`G‘ROCIÁeg¿l
(
yb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

2259 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

2262 
TMVA
::
M‘hodBa£
 *
ssm‘hod
=
dyÇmic_ÿ¡
<TMVA::M‘hodBa£*>(
fM‘hodsM­
[
yb™£t
.
	`to_¡ršg
().
	`c_¡r
()][0][0]);

2263 
TMVA
::
ResuÉsCÏssifiÿtiÚ
 *
s¤esuÉs
 = (TMVA::ResuÉsCÏssifiÿtiÚ*)
ssm‘hod
->
	`D©a
()->
	`G‘ResuÉs
(ssm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

2264 
d–‘e
 
s¤esuÉs
;

2265 
d–‘e
 
sub£edlßd”
;

2266 
this
->
	`D–‘eAÎM‘hods
();

2267 
fM‘hodsM­
.
	`ş—r
();

2270 
¡d
::
cout
<<"--- V¬ŸbË ImpÜnû ResuÉ (ShÜt)"<<¡d::
’dl
;

2271  
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
);

2272 
	}
}

2276 
TH1F
* 
	gTMVA
::
FaùÜy
::
	$Ev®u©eImpÜnûRªdom
(
D©aLßd”
 *
lßd”
, 
UIÁ_t
 
n£eds
, 
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, cÚ¡ *
theO±iÚ
)

2278 
TRªdom3
 *
¿ng’
 = 
Ãw
 
	`TRªdom3
(0);

2280 
ušt64_t
 
x
 = 0;

2281 
ušt64_t
 
y
 = 0;

2284 cÚ¡ 
nb™s
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

2285 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
lßd”
->
	`DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

2287 
¿nge
 = 
	`pow
(2, 
nb™s
);

2290 
¡d
::
veùÜ
<
DoubË_t
> 
	`impÜnûs
(
nb™s
);

2291 
DoubË_t
 
impÜnûs_nÜm
 = 0;

2292 
i
 = 0; i < 
nb™s
; i++)
impÜnûs
[i] = 0;

2294 
DoubË_t
 
SROC
, 
SSROC
;

2295 
UIÁ_t
 
n
 = 0;‚ < 
n£eds
;‚++) {

2296 
x
 = 
¿ng’
 -> 
	`IÁeg”
(
¿nge
);

2298 
¡d
::
b™£t
<32> 
	`xb™£t
(
x
);

2299 ià(
x
 == 0) ;

2303 
TMVA
::
D©aLßd”
 *
£edlßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

2306 
šdex
 = 0; index < 
nb™s
; index++) {

2307 ià(
xb™£t
[
šdex
]è
£edlßd”
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

2311 
	`D©aLßd”Cİy
(
£edlßd”
,
lßd”
);

2314 
	`BookM‘hod
(
£edlßd”
, 
theM‘hod
, 
m‘hodT™Ë
, 
theO±iÚ
);

2317 
	`T¿šAÎM‘hods
();

2318 
	`Te¡AÎM‘hods
();

2319 
	`Ev®u©eAÎM‘hods
();

2322 
SROC
 = 
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

2326 
TMVA
::
M‘hodBa£
 *
sm‘hod
=
dyÇmic_ÿ¡
<TMVA::M‘hodBa£*>(
fM‘hodsM­
[
xb™£t
.
	`to_¡ršg
().
	`c_¡r
()][0][0]);

2327 
TMVA
::
ResuÉsCÏssifiÿtiÚ
 *
¤esuÉs
 = (TMVA::ResuÉsCÏssifiÿtiÚ*)
sm‘hod
->
	`D©a
()->
	`G‘ResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

2328 
d–‘e
 
¤esuÉs
;

2329 
d–‘e
 
£edlßd”
;

2330 
this
->
	`D–‘eAÎM‘hods
();

2331 
fM‘hodsM­
.
	`ş—r
();

2335 
ušt32_t
 
i
 = 0; i < 32; ++i) {

2336 ià(
x
 & (1 << 
i
)) {

2337 
y
 = 
x
 & ~(1 << 
i
);

2338 
¡d
::
b™£t
<32> 
	`yb™£t
(
y
);

2342 
DoubË_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

2343 ià(
y
 == 0) {

2344 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

2345 
impÜnûs_nÜm
 +ğ
impÜnûs
[
ny
];

2351 
TMVA
::
D©aLßd”
 *
sub£edlßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
(
yb™£t
.
	`to_¡ršg
());

2353 
šdex
 = 0; index < 
nb™s
; index++) {

2354 ià(
yb™£t
[
šdex
]è
sub£edlßd”
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

2358 
	`D©aLßd”Cİy
(
sub£edlßd”
,
lßd”
);

2361 
	`BookM‘hod
(
sub£edlßd”
, 
theM‘hod
, 
m‘hodT™Ë
, 
theO±iÚ
);

2364 
	`T¿šAÎM‘hods
();

2365 
	`Te¡AÎM‘hods
();

2366 
	`Ev®u©eAÎM‘hods
();

2369 
SSROC
 = 
	`G‘ROCIÁeg¿l
(
yb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

2370 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

2373 
TMVA
::
M‘hodBa£
 *
ssm‘hod
=
dyÇmic_ÿ¡
<TMVA::M‘hodBa£*>(
fM‘hodsM­
[
yb™£t
.
	`to_¡ršg
().
	`c_¡r
()][0][0]);

2374 
TMVA
::
ResuÉsCÏssifiÿtiÚ
 *
s¤esuÉs
 = (TMVA::ResuÉsCÏssifiÿtiÚ*)
ssm‘hod
->
	`D©a
()->
	`G‘ResuÉs
(ssm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
);

2375 
d–‘e
 
s¤esuÉs
;

2376 
d–‘e
 
sub£edlßd”
;

2377 
this
->
	`D–‘eAÎM‘hods
();

2378 
fM‘hodsM­
.
	`ş—r
();

2382 
¡d
::
cout
<<"--- V¬ŸbË ImpÜnû ResuÉ (Rªdom)"<<¡d::
’dl
;

2383  
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
);

2384 
	}
}

2388 
TH1F
* 
	gTMVA
::
FaùÜy
::
G‘ImpÜnû
(cÚ¡ 
nb™s
,
¡d
::
veùÜ
<
DoubË_t
> 
impÜnûs
,¡d::veùÜ<
TSŒšg
> 
v¬Names
)

2390 
TH1F
 *
vih1
 = 
Ãw
 TH1F("vih1", "", 
nb™s
, 0,‚bits);

2392 
	ggStyË
->
S‘O±St
(000000);

2394 
Flßt_t
 
	gnÜm®iz©iÚ
 = 0.0;

2395 
	gi
 = 0; i < 
	gnb™s
; i++) {

2396 
	gnÜm®iz©iÚ
 = 
nÜm®iz©iÚ
 + 
impÜnûs
[
i
];

2399 
Flßt_t
 
	groc
 = 0.0;

2401 
	ggStyË
->
S‘T™ËXOff£t
(0.4);

2402 
	ggStyË
->
S‘T™ËXOff£t
(1.2);

2405 
DoubË_t
 
	gx_›
[
nb™s
], 
	gy_›
[nbits];

2406 
IÁ_t
 
	gi
 = 1; i < 
	gnb™s
 + 1; i++) {

2407 
	gx_›
[
i
 - 1] = (i - 1) * 1.;

2408 
	groc
 = 100.0 * 
impÜnûs
[
i
 - 1] / 
nÜm®iz©iÚ
;

2409 
	gy_›
[
i
 - 1] = 
roc
;

2410 
	g¡d
::
cout
<<"--- "<<
v¬Names
[
i
-1]<<" = "<<
roc
<<" %"<<
¡d
::
’dl
;

2411 
	gvih1
->
G‘Xaxis
()->
S‘BšLab–
(
i
, 
v¬Names
[˜- 1].
D©a
());

2412 
	gvih1
->
S‘BšCÚ‹Á
(
i
, 
roc
);

2414 
TG¿ph
 *
	gg_›
 = 
Ãw
 TG¿ph(
nb™s
 + 2, 
x_›
, 
y_›
);

2415 
	gg_›
->
S‘T™Ë
("");

2417 
	gvih1
->
Lab–sO±iÚ
("v >", "X");

2418 
	gvih1
->
S‘B¬Width
(0.97);

2419 
IÁ_t
 
	gÿ
 = 
TCŞÜ
::
G‘CŞÜ
("#006600");

2420 
	gvih1
->
S‘FlCŞÜ
(
ÿ
);

2423 
	gvih1
->
G‘Yaxis
()->
S‘T™Ë
("Importance (%)");

2424 
	gvih1
->
G‘Yaxis
()->
S‘T™ËSize
(0.045);

2425 
	gvih1
->
G‘Yaxis
()->
C’‹rT™Ë
();

2426 
	gvih1
->
G‘Yaxis
()->
S‘T™ËOff£t
(1.24);

2428 
	gvih1
->
G‘Yaxis
()->
S‘RªgeU£r
(-7, 50);

2429 
	gvih1
->
S‘DœeùÜy
(0);

2432  
	gvih1
;

	@src/FitterBase.cxx

35 
	~"TMVA/F™‹rBa£.h
"

36 
	~"TMVA/IÁ”v®.h
"

37 
	~"TMVA/IF™‹rT¬g‘.h
"

39 
	~"TMVA/CÚfigu¿bË.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/Ty³s.h
"

43 
	~"Rty³s.h
"

44 
	~"TSŒšg.h
"

46 
CÏssImp
(
TMVA
::
F™‹rBa£
);

48 #ifdeà
_WIN32


50 #´agm¨
w¬nšg
 ( 
di§bË
 : 4355 )

56 
	gTMVA
::
F™‹rBa£
::F™‹rBa£Ğ
IF™‹rT¬g‘
& 
rg‘
,

57 cÚ¡ 
TSŒšg
& 
Çme
,

58 cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*> 
¿nges
,

59 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

60 : 
CÚfigu¿bË
Ğ
theO±iÚ
 ),

61 
fF™‹rT¬g‘
Ğ
rg‘
 ),

62 
fRªges
Ğ
¿nges
 ),

63 
fN·rs
Ğ
¿nges
.
size
() ),

64 
fLogg”
Ğ
Ãw
 
MsgLogg”
("F™‹rBa£", 
kINFO
) ),

65 
	$fCÏssName
Ğ
Çme
 )

67 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

68 
	`S‘CÚfigDesütiÚ
( "Configuration options for setup‡nduning of specific fitter" );

69 
	}
}

74 
DoubË_t
 
	gTMVA
::
F™‹rBa£
::
	$Run
()

76 
¡d
::
veùÜ
<
DoubË_t
> 
·rs
;

77 
¡d
::
veùÜ
<
IÁ”v®
*>::
cÚ¡_™”©Ü
 
·rIt
 = 
fRªges
.
	`begš
();…¬Iˆ!ğfRªges.
	`’d
();…arIt++) {

78 
·rs
.
	`push_back
Ğ(*
·rIt
)->
	`G‘M—n
() );

82  
this
->
	`Run
Ğ
·rs
 );

83 
	}
}

88 
DoubË_t
 
	gTMVA
::
F™‹rBa£
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·¿m‘”s
 )

90  
G‘F™‹rT¬g‘
().
E¡im©ÜFunùiÚ
Ğ
·¿m‘”s
 );

	@src/GeneticAlgorithm.cxx

32 
	~<io¡»am
>

33 
	~<®gÜ™hm
>

34 
	~<æßt.h
>

36 #ifdeà
_GLIBCXX_PARALLEL


37 
	~<omp.h
>

40 
	~"TMVA/G’‘icAlgÜ™hm.h
"

41 
	~"TMVA/IÁ”v®.h
"

42 
	~"TMVA/IF™‹rT¬g‘.h
"

43 
	~"TMVA/MsgLogg”.h
"

44 
	~"TMVA/Ty³s.h
"

46 
	~"Rty³sCÜe.h
"

47 
	~"Rty³s.h
"

48 
	~"TM©h.h
"

50 
Çme¥aû
 
	gTMVA
 {

51 cÚ¡ 
BoŞ_t
 
	gG’‘icAlgÜ™hm__DEBUG__
 = 
kFALSE
;

54 
CÏssImp
(
TMVA
::
G’‘icAlgÜ™hm
);

70 
	gTMVA
::
G’‘icAlgÜ™hm
::G’‘icAlgÜ™hmĞ
IF™‹rT¬g‘
& 
rg‘
, 
IÁ_t
 
pİuÏtiÚSize
,

71 cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*>& 
¿nges
, 
UIÁ_t
 
£ed
 )

72 : 
fCÚvCouÁ”
(-1),

73 
fF™‹rT¬g‘
Ğ
rg‘
 ),

74 
fCÚvV®ue
(0.),

75 
fLa¡ResuÉ
(
DBL_MAX
),

76 
fS´—d
(0.1),

77 
fMœrÜ
(
kTRUE
),

78 
fFœ¡Time
(
kTRUE
),

79 
fMakeCİ›s
(
kFALSE
),

80 
fPİuÏtiÚSize
(
pİuÏtiÚSize
),

81 
fRªges
Ğ
¿nges
 ),

82 
fPİuÏtiÚ
(
¿nges
, 
pİuÏtiÚSize
, 
£ed
),

83 
fBe¡F™Ãss
(
DBL_MAX
),

84 
fLogg”
Ğ
Ãw
 
MsgLogg”
("GeneticAlgorithm") )

86 
	gfPİuÏtiÚ
.
S‘RªdomS“d
Ğ
£ed
 );

89 
	gTMVA
::
G’‘icAlgÜ™hm
::~
	$G’‘icAlgÜ™hm
()

92 
d–‘e
 
fLogg”
;

93 
	}
}

102 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$In™
()

104 iàĞ
fFœ¡Time
 ) fFœ¡Timğ
kFALSE
;

106 
	`EvŞutiÚ
();

108 
	}
}

124 
DoubË_t
 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$NewF™Ãss
Ğ
DoubË_t
 , DoubË_ˆ
ÃwV®ue
 )

126  
ÃwV®ue
;

127 
	}
}

136 
DoubË_t
 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$C®cuÏ‹F™Ãss
()

138 
fBe¡F™Ãss
 = 
DBL_MAX
;

139 #ifdeà
_GLIBCXX_PARALLEL


141 cÚ¡ 
Á
 = 
	`omp_g‘_num_th»ads
();

142 
DoubË_t
 
be¡s
[
Á
];

143  
i
 =0; i < 
Á
; ++i )

144 
be¡s
[
i
] = 
fBe¡F™Ãss
;

146 #´agm¨
omp
 
·¿Î–


148 
th»ad_numb”
 = 
	`omp_g‘_th»ad_num
();

149 #´agm¨
omp
 

150  
šdex
 = 0; index < 
fPİuÏtiÚ
.
	`G‘PİuÏtiÚSize
(); ++index )

152 
G’‘icG’es
* 
g’es
 = 
fPİuÏtiÚ
.
	`G‘G’es
(
šdex
);

153 
DoubË_t
 
f™Ãss
 = 
	`NewF™Ãss
Ğ
g’es
->
	`G‘F™Ãss
(),

154 
fF™‹rT¬g‘
.
	`E¡im©ÜFunùiÚ
(
g’es
->
	`G‘FaùÜs
()) );

155 
g’es
->
	`S‘F™Ãss
Ğ
f™Ãss
 );

157 iàĞ
be¡s
[
th»ad_numb”
] > 
f™Ãss
 )

158 
be¡s
[
th»ad_numb”
] = 
f™Ãss
;

162 
fBe¡F™Ãss
 = *
¡d
::
	`mš_–em’t
(
be¡s
, be¡s+
Á
);

166  
šdex
 = 0; index < 
fPİuÏtiÚ
.
	`G‘PİuÏtiÚSize
(); ++index ) {

167 
G’‘icG’es
* 
g’es
 = 
fPİuÏtiÚ
.
	`G‘G’es
(
šdex
);

168 
DoubË_t
 
f™Ãss
 = 
	`NewF™Ãss
Ğ
g’es
->
	`G‘F™Ãss
(),

169 
fF™‹rT¬g‘
.
	`E¡im©ÜFunùiÚ
(
g’es
->
	`G‘FaùÜs
()) );

170 
g’es
->
	`S‘F™Ãss
Ğ
f™Ãss
 );

172 iàĞ
fBe¡F™Ãss
 > 
f™Ãss
 )

173 
fBe¡F™Ãss
 = 
f™Ãss
;

179 
fPİuÏtiÚ
.
	`SÜt
();

181  
fBe¡F™Ãss
;

182 
	}
}

191 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$EvŞutiÚ
()

193 iàĞ
fMakeCİ›s
 )

194 
fPİuÏtiÚ
.
	`MakeCİ›s
( 5 );

195 
fPİuÏtiÚ
.
	`MakeChd»n
();

197 
fPİuÏtiÚ
.
	`Mu‹
Ğ10, 3, 
kTRUE
, 
fS´—d
, 
fMœrÜ
 );

198 
fPİuÏtiÚ
.
	`Mu‹
Ğ40, fPİuÏtiÚ.
	`G‘PİuÏtiÚSize
()*3/4 );

199 
	}
}

218 
DoubË_t
 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$S´—dCÚŒŞ
Ğ
IÁ_t
 
ofS‹ps
, IÁ_ˆ
sucûssS‹ps
, 
DoubË_t
 
çùÜ
 )

221 iàĞ
fBe¡F™Ãss
 < 
fLa¡ResuÉ
 || 
fSucûssLi¡
.
	`size
() <=0 ) {

222 
fLa¡ResuÉ
 = 
fBe¡F™Ãss
;

223 
fSucûssLi¡
.
	`push_äÚt
( 1 );

226 
fSucûssLi¡
.
	`push_äÚt
( 0 );

228 
IÁ_t
 
n
 = 0;

229 
IÁ_t
 
sum
 = 0;

230 
¡d
::
deque
<
IÁ_t
>::
™”©Ü
 
vec
 = 
fSucûssLi¡
.
	`begš
();

231 ; 
vec
 !ğ
fSucûssLi¡
.
	`’d
() ; vec++) {

232 
sum
 +ğ*
vec
;

233 
n
++;

236 iàĞ
n
 >ğ
ofS‹ps
 ) {

237 
fSucûssLi¡
.
	`pİ_back
();

238 iàĞ
sum
 > 
sucûssS‹ps
 ) {

239 
fS´—d
 /ğ
çùÜ
;

240 ià(
G’‘icAlgÜ™hm__DEBUG__
è
	`Log
(è<< 
kINFO
 << ">" << 
¡d
::
æush
;

242 iàĞ
sum
 =ğ
sucûssS‹ps
 ) {

243 ià(
G’‘icAlgÜ™hm__DEBUG__
è
	`Log
(è<< "=" << 
¡d
::
æush
;

246 
fS´—d
 *ğ
çùÜ
;

247 ià(
G’‘icAlgÜ™hm__DEBUG__
è
	`Log
(è<< "<" << 
¡d
::
æush
;

251  
fS´—d
;

252 
	}
}

261 
BoŞ_t
 
	gTMVA
::
G’‘icAlgÜ™hm
::
	$HasCÚv”ged
Ğ
IÁ_t
 
¡•s
, 
DoubË_t
 
im´ovem’t
 )

263 ià(
fCÚvCouÁ”
 < 0) {

264 
fCÚvV®ue
 = 
fBe¡F™Ãss
;

266 ià(
TM©h
::
	`Abs
(
fBe¡F™Ãss
 - 
fCÚvV®ue
è<ğ
im´ovem’t
 || 
¡•s
<0) {

267 
fCÚvCouÁ”
 ++;

270 
fCÚvCouÁ”
 = 0;

271 
fCÚvV®ue
 = 
fBe¡F™Ãss
;

273 ià(
G’‘icAlgÜ™hm__DEBUG__
è
	`Log
(è<< "." << 
¡d
::
æush
;

274 ià(
fCÚvCouÁ”
 < 
¡•s
è 
kFALSE
;

275  
kTRUE
;

276 
	}
}

	@src/GeneticFitter.cxx

32 
	~"TMVA/G’‘icF™‹r.h
"

34 
	~"TMVA/CÚfigu¿bË.h
"

35 
	~"TMVA/G’‘icAlgÜ™hm.h
"

36 
	~"TMVA/IÁ”v®.h
"

37 
	~"TMVA/F™‹rBa£.h
"

38 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/Tim”.h
"

40 
	~"TMVA/Ty³s.h
"

42 
	~"Rty³s.h
"

43 
	~"TSŒšg.h
"

45 
	~<io¡»am
>

47 
CÏssImp
(
TMVA
::
G’‘icF™‹r
);

52 
	gTMVA
::
G’‘icF™‹r
::G’‘icF™‹rĞ
IF™‹rT¬g‘
& 
rg‘
,

53 cÚ¡ 
TSŒšg
& 
Çme
,

54 cÚ¡ 
¡d
::
veùÜ
<
TMVA
::
IÁ”v®
*>& 
¿nges
,

55 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

56 : 
	$F™‹rBa£
Ğ
rg‘
, 
Çme
, 
¿nges
, 
theO±iÚ
 )

59 
	`Deş¬eO±iÚs
();

60 
	`P¬£O±iÚs
();

61 
	}
}

66 
	gTMVA
::
G’‘icF™‹r
::
	$Deş¬eO±iÚs
()

68 
	`Deş¬eO±iÚRef
Ğ
fPİSize
=300, "PopSize", "Population size for GA" );

69 
	`Deş¬eO±iÚRef
Ğ
fN¡•s
=40, "Steps", "Number of steps for convergence" );

70 
	`Deş¬eO±iÚRef
Ğ
fCyşes
=3, "Cycles", "Independent cycles of GA fitting" );

71 
	`Deş¬eO±iÚRef
Ğ
fSC_¡•s
=10, "SC_steps", "Spread control, steps" );

72 
	`Deş¬eO±iÚRef
Ğ
fSC_¿‹
=5, "SC_rate", "Spread control,„ate: factor is changed depending onhe„ate" );

73 
	`Deş¬eO±iÚRef
Ğ
fSC_çùÜ
=0.95, "SC_factor", "Spread control, factor" );

74 
	`Deş¬eO±iÚRef
Ğ
fCÚvCr™
=0.001, "ConvCrit", "Convergence criteria" );

76 
	`Deş¬eO±iÚRef
Ğ
fSaveBe¡FromG’”©iÚ
=1, "SaveBestGen",

78 
	`Deş¬eO±iÚRef
Ğ
fSaveBe¡FromCyşe
=10, "SaveBestCycle",

81 
	`Deş¬eO±iÚRef
Ğ
fTrim
=
kFALSE
, "Trim",

83 
	`Deş¬eO±iÚRef
Ğ
fS“d
=100, "Seed", "Set seed of„andom generator (0 gives„andom seeds)" );

84 
	}
}

89 
	gTMVA
::
G’‘icF™‹r
::
	$S‘P¬am‘”s
Ğ
IÁ_t
 
cyşes
,

90 
IÁ_t
 
n¡•s
,

91 
IÁ_t
 
pİSize
,

92 
IÁ_t
 
SC_¡•s
,

93 
IÁ_t
 
SC_¿‹
,

94 
DoubË_t
 
SC_çùÜ
,

95 
DoubË_t
 
cÚvCr™
)

97 
fN¡•s
 = 
n¡•s
;

98 
fCyşes
 = 
cyşes
;

99 
fPİSize
 = 
pİSize
;

100 
fSC_¡•s
 = 
SC_¡•s
;

101 
fSC_¿‹
 = 
SC_¿‹
;

102 
fSC_çùÜ
 = 
SC_çùÜ
;

103 
fCÚvCr™
 = 
cÚvCr™
;

104 
	}
}

109 
DoubË_t
 
	gTMVA
::
G’‘icF™‹r
::
Run
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

111 
Log
(è<< 
kHEADER
 << "<GeneticFitter> Optimisation,…lease be…atient "

112 << "... (šaccu¿‹…rog»s timšg fÜ GA)" << 
Endl
;

114 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "init" );

116 
G’‘icAlgÜ™hm
 
g¡Üe
Ğ
G‘F™‹rT¬g‘
(), 
fPİSize
, 
fRªges
);

120 
Tim”
 
tim”
Ğ100*(
fCyşes
), 
G‘Name
() );

121 ià(
	gfIPyMaxI‹r
è*fIPyMaxI‹¸ğ100*(
fCyşes
);

122 
	gtim”
.
D¿wProg»ssB¬
( 0 );

124 
DoubË_t
 
	g´og»ss
 = 0.;

126 
IÁ_t
 
	gcyşe
 = 0; cyş< 
	gfCyşes
; cycle++) {

127 ià(
	gfIPyCu¼’tI‹r
è*fIPyCu¼’tI‹¸ğ100*(
cyşe
);

128 ià(
	gfEx™FromT¿ššg
 && *fExitFromTraining) ;

129 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "cycle" );

133 
G’‘icAlgÜ™hm
 
ga
Ğ
G‘F™‹rT¬g‘
(), 
fPİSize
, 
fRªges
, 
fS“d
 );

136 iàĞ
	g·rs
.
size
(è=ğ
fRªges
.size() ){

137 
ga
.
G‘G’‘icPİuÏtiÚ
().
GiveHšt
Ğ
·rs
, 0.0 );

139 ià(
	gcyşe
==
fCyşes
-1) {

140 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "last" );

141 
	gga
.
G‘G’‘icPİuÏtiÚ
().
AddPİuÏtiÚ
Ğ
g¡Üe
.GetGeneticPopulation() );

144 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "iteration" );

146 
	gga
.
C®cuÏ‹F™Ãss
();

147 
	gga
.
G‘G’‘icPİuÏtiÚ
().
TrimPİuÏtiÚ
();

149 
DoubË_t
 
	gn
=0.;

151 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "iteration" );

152 
	gga
.
In™
();

153 
	gga
.
C®cuÏ‹F™Ãss
();

154 iàĞ
	gfTrim
 ) 
	gga
.
G‘G’‘icPİuÏtiÚ
().
TrimPİuÏtiÚ
();

155 
	gga
.
S´—dCÚŒŞ
Ğ
fSC_¡•s
, 
fSC_¿‹
, 
fSC_çùÜ
 );

158 ià(
	gga
.
	gfCÚvCouÁ”
 > 
	gn
èÀğ
DoubË_t
(
ga
.
fCÚvCouÁ”
);

159 
	g´og»ss
 = 100*((
DoubË_t
)
cyşe
è+ 100*(
n
/DoubË_t(
fN¡•s
));

161 
	gtim”
.
D¿wProg»ssB¬
Ğ(
IÁ_t
)
´og»ss
 );

164 
	gga
.
G‘G’‘icPİuÏtiÚ
().
SÜt
();

165  
IÁ_t
 
	gi
 = 0; i<
	gfSaveBe¡FromG’”©iÚ
 && i<
	gfPİSize
; i++ ) {

166 
	gg¡Üe
.
G‘G’‘icPİuÏtiÚ
().
GiveHšt
Ğ
ga
.G‘G’‘icPİuÏtiÚ().
G‘G’es
(
i
)->
G‘FaùÜs
(),

167 
ga
.
G‘G’‘icPİuÏtiÚ
().
G‘G’es
(
i
)->
G‘F™Ãss
() );

169 } !
	gga
.
HasCÚv”ged
Ğ
fN¡•s
, 
fCÚvCr™
 ));

171 
	gtim”
.
D¿wProg»ssB¬
Ğ100*(
cyşe
+1) );

173 
	gga
.
G‘G’‘icPİuÏtiÚ
().
SÜt
();

174  
IÁ_t
 
	gi
 = 0; i<
	gfSaveBe¡FromG’”©iÚ
 && i<
	gfPİSize
; i++ ) {

175 
	gg¡Üe
.
G‘G’‘icPİuÏtiÚ
().
GiveHšt
Ğ
ga
.G‘G’‘icPİuÏtiÚ().
G‘G’es
(
i
)->
G‘FaùÜs
(),

176 
ga
.
G‘G’‘icPİuÏtiÚ
().
G‘G’es
(
i
)->
G‘F™Ãss
() );

181 
Log
(è<< 
	gkINFO
 << "EÏp£dime: " << 
	gtim”
.
G‘EÏp£dTime
()

182 << " " << 
	gEndl
;

184 
DoubË_t
 
	gf™Ãss
 = 
g¡Üe
.
C®cuÏ‹F™Ãss
();

185 
	gg¡Üe
.
G‘G’‘icPİuÏtiÚ
().
SÜt
();

186 
	g·rs
.
sw­
Ğ
g¡Üe
.
G‘G’‘icPİuÏtiÚ
().
G‘G’es
(0)->
G‘FaùÜs
() );

188 
G‘F™‹rT¬g‘
().
Prog»ssNÙif›r
( "GA", "stop" );

189  
	gf™Ãss
;

	@src/GeneticGenes.cxx

25 
	~"TMVA/G’‘icG’es.h
"

26 
	~"TMVA/G’‘icPİuÏtiÚ.h
"

28 
	~"Rty³s.h
"

29 
	~"Rty³sCÜe.h
"

38 
CÏssImp
(
TMVA
::
G’‘icG’es
);

44 
	gTMVA
::
G’‘icG’es
::G’‘icG’esĞ
¡d
::
veùÜ
<
DoubË_t
> & 
f
 )

46 
fFaùÜs
 = 
f
;

47 
	gfF™Ãss
 = 0;

50 
BoŞ_t
 
	gTMVA
::
İ”©Ü
 <(cÚ¡ 
TMVA
::
G’‘icG’es
& 
fœ¡
, cÚ¡ TMVA::G’‘icG’es& 
£cÚd
)

52  
fœ¡
.
fF™Ãss
 < 
£cÚd
.fFitness;

	@src/GeneticPopulation.cxx

32 
	~<io¡»am
>

33 
	~<iomª
>

35 
	~"R¡r¡»am.h
"

36 
	~"TSy¡em.h
"

37 
	~"TRªdom3.h
"

38 
	~"TH1.h
"

39 
	~<®gÜ™hm
>

41 
	~"TMVA/G’‘icPİuÏtiÚ.h
"

42 
	~"TMVA/G’‘icG’es.h
"

43 
	~"TMVA/MsgLogg”.h
"

45 
CÏssImp
(
TMVA
::
G’‘icPİuÏtiÚ
);

47 
usšg
 
Çme¥aû
 
	g¡d
;

52 
	gTMVA
::
G’‘icPİuÏtiÚ
::G’‘icPİuÏtiÚ(cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*>& 
¿nges
, 
IÁ_t
 
size
, 
UIÁ_t
 
£ed
)

53 : 
fG’ePoŞ
(
size
),

54 
fRªges
(
¿nges
.
size
()),

55 
fLogg”
Ğ
Ãw
 
MsgLogg”
("GeneticPopulation") )

60 
	gfRªdomG’”©Ü
 = 
Ãw
 
TRªdom3
( 100 );

61 
	gfRªdomG’”©Ü
->
UnifÜm
(0.,1.);

62 
	gfRªdomG’”©Ü
->
S‘S“d
Ğ
£ed
 );

64  
	gi
 = 0; i < 
	g¿nges
.
size
(); ++i )

65 
	gfRªges
[
i
] = 
Ãw
 
TMVA
::
G’‘icRªge
Ğ
fRªdomG’”©Ü
, 
¿nges
[i] );

67 
	gveùÜ
<
	gDoubË_t
> 
ÃwEÁry
Ğ
fRªges
.
size
() );

68  
	gi
 = 0; i < 
	gsize
; ++i )

70  
	grIt
 = 0;„Iˆ< 
	gfRªges
.
size
(); ++rIt )

71 
	gÃwEÁry
[
rIt
] = 
fRªges
[rIt]->
Rªdom
();

72 
	gfG’ePoŞ
[
i
] = 
TMVA
::
G’‘icG’es
Ğ
ÃwEÁry
);

75 
	gfPİuÏtiÚSizeLim™
 = 
size
;

81 
	gTMVA
::
G’‘icPİuÏtiÚ
::~
	$G’‘icPİuÏtiÚ
()

83 ià(
fRªdomG’”©Ü
 !ğ
NULL
è
d–‘e
 fRandomGenerator;

85 
¡d
::
veùÜ
<
G’‘icRªge
*>::
™”©Ü
 
™
 = 
fRªges
.
	`begš
();

86 ;
™
!=
fRªges
.
	`’d
(); it++è
d–‘e
 *it;

88 
d–‘e
 
fLogg”
;

89 
	}
}

96 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$S‘RªdomS“d
Ğ
UIÁ_t
 
£ed
 )

98 
fRªdomG’”©Ü
->
	`S‘S“d
Ğ
£ed
 );

99 
	}
}

107 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$MakeCİ›s
Ğ
numb”
 )

109 
i
=0;

110 
¡d
::
veùÜ
<
TMVA
::
G’‘icG’es
>::
™”©Ü
 
™
 = 
fG’ePoŞ
.
	`begš
();

111 
™
 !ğ
fG’ePoŞ
.
	`’d
(è&& 
i
 < 
numb”
;

112 ++
™
, ++
i
 ) {

113 
	`GiveHšt
Ğ
™
->
	`G‘FaùÜs
(), it->
	`G‘F™Ãss
() );

115 
	}
}

122 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$MakeChd»n
()

124 #ifdeà
_GLIBCXX_PARALLEL


125 #´agm¨
omp
 
·¿Î–


126 #´agm¨
omp
 

128  
™
 = 0; iˆ< (è(
fG’ePoŞ
.
	`size
() / 2); ++it )

130 
IÁ_t
 
pos
 = (IÁ_t)
fRªdomG’”©Ü
->
	`IÁeg”
Ğ
fG’ePoŞ
.
	`size
()/2 );

131 
fG’ePoŞ
[(fG’ePoŞ.
	`size
(è/ 2è+ 
™
] = 
	`MakeSex
ĞfG’ePoŞ[™], fG’ePoŞ[
pos
] );

133 
	}
}

139 
	gTMVA
::
G’‘icG’es
 
TMVA
::
G’‘icPİuÏtiÚ
::
	$MakeSex
Ğ
TMVA
::
G’‘icG’es
 
m®e
,

140 
TMVA
::
G’‘icG’es
 
ãm®e
 )

142 
veùÜ
< 
DoubË_t
 > 
	`chd
(
fRªges
.
	`size
());

143 
i
 = 0; i < 
fRªges
.
	`size
(); ++i) {

144 ià(
fRªdomG’”©Ü
->
	`IÁeg”
( 2 ) == 0) {

145 
chd
[
i
] = 
m®e
.
	`G‘FaùÜs
()[i];

147 
chd
[
i
] = 
ãm®e
.
	`G‘FaùÜs
()[i];

150  
TMVA
::
	`G’‘icG’es
Ğ
chd
 );

151 
	}
}

171 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$Mu‹
Ğ
DoubË_t
 
´obab™y
 , 
IÁ_t
 
¡¬tIndex
,

172 
BoŞ_t
 
Ã¬
, 
DoubË_t
 
¥»ad
, BoŞ_ˆ
mœrÜ
 )

174 
veùÜ
< 
DoubË_t
>::
™”©Ü
 
vec
;

175 
veùÜ
< 
TMVA
::
G’‘icRªge
* >::
™”©Ü
 
vecRªge
;

182 
™
 = 
¡¬tIndex
; iˆ< (è
fG’ePoŞ
.
	`size
(); ++it) {

183 
vecRªge
 = 
fRªges
.
	`begš
();

184 
vec
 = (
fG’ePoŞ
[
™
].
	`G‘FaùÜs
()).
	`begš
(); veø< (fG’ePoŞ[™].G‘FaùÜs()).
	`’d
(); ++vec) {

185 ià(
fRªdomG’”©Ü
->
	`UnifÜm
Ğ100 ) <ğ
´obab™y
) {

186 (*
vec
èğ(*
vecRªge
)->
	`Rªdom
Ğ
Ã¬
, (*vec), 
¥»ad
, 
mœrÜ
 );

188 ++
vecRªge
;

191 
	}
}

197 
	gTMVA
::
G’‘icG’es
* 
TMVA
::
G’‘icPİuÏtiÚ
::
	$G‘G’es
Ğ
IÁ_t
 
šdex
 )

199  &(
fG’ePoŞ
[
šdex
]);

200 
	}
}

206 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$Pršt
Ğ
IÁ_t
 
uÁIndex
 )

208  
™
 = 0; iˆ< 
fG’ePoŞ
.
	`size
(); ++it )

210 
IÁ_t
 
n
=0;

211 ià(
uÁIndex
 >= -1 ) {

212 ià(
uÁIndex
 == -1 ) ;

213 
uÁIndex
--;

215 
	`Log
(è<< "f™Ãss: " << 
fG’ePoŞ
[
™
].
	`G‘F™Ãss
() << " ";

216 
veùÜ
< 
DoubË_t
 >::
™”©Ü
 
vec
 = 
fG’ePoŞ
[
™
].
	`G‘FaùÜs
().
	`begš
();

217 
vec
 < 
fG’ePoŞ
[
™
].
	`G‘FaùÜs
().
	`’d
(); vec++ ) {

218 
	`Log
(è<< "f_" << 
n
++ << ": " << (*
vec
) << " ";

220 
	`Log
(è<< 
Endl
;

222 
	}
}

228 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$Pršt
Ğ
o¡»am
 & 
out
, 
IÁ_t
 
uÁIndex
 )

230  
™
 = 0; iˆ< 
fG’ePoŞ
.
	`size
(); ++it ) {

231 
IÁ_t
 
n
=0;

232 ià(
uÁIndex
 >= -1 ) {

233 ià(
uÁIndex
 == -1 ) ;

234 
uÁIndex
--;

236 
out
 << "f™Ãss: " << 
fG’ePoŞ
[
™
].
	`G‘F™Ãss
() << " ";

237 
veùÜ
< 
DoubË_t
 >::
™”©Ü
 
vec
 = 
fG’ePoŞ
[
™
].
	`G‘FaùÜs
().
	`begš
();

238 
vec
 < 
fG’ePoŞ
[
™
].
	`G‘FaùÜs
().
	`’d
(); vec++ ) {

239 
out
 << "f_" << 
n
++ << ": " << (*
vec
) << " ";

241 
out
 << 
¡d
::
’dl
;

243 
	}
}

254 
TH1F
* 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$V¬ŸbËDi¡ributiÚ
Ğ
IÁ_t
 
v¬Numb”
, IÁ_ˆ
bšs
,

255 
IÁ_t
 
mš
, IÁ_ˆ
max
 )

257 
¡d
::
cout
 << "FAILED! TMVA::G’‘icPİuÏtiÚ::V¬ŸbËDi¡ributiÚ" << std::
’dl
;

259 
¡d
::
¡ršg¡»am
 
hi¡Name
;

260 
hi¡Name
.
	`ş—r
();

261 
hi¡Name
.
	`¡r
("v");

262 
hi¡Name
 << 
v¬Numb”
;

263 
TH1F
 *
hi¡
 = 
Ãw
 
	`TH1F
Ğ
hi¡Name
.
	`¡r
().
	`c_¡r
(),hi¡Name.¡r().c_¡r(), 
bšs
,
mš
,
max
 );

265  
hi¡
;

266 
	}
}

271 
	gveùÜ
<
	gDoubË_t
> 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$V¬ŸbËDi¡ributiÚ
Ğ
IÁ_t
 )

273 
¡d
::
cout
 << "FAILED! TMVA::G’‘icPİuÏtiÚ::V¬ŸbËDi¡ributiÚ" << std::
’dl
;

275 
veùÜ
< 
DoubË_t
 > 
v¬Di¡
;

277  
v¬Di¡
;

278 
	}
}

283 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$AddPİuÏtiÚ
Ğ
G’‘icPİuÏtiÚ
 *
¡¿ng”s
 )

285 
¡d
::
veùÜ
<
TMVA
::
G’‘icG’es
>::
™”©Ü
 
™
 = 
¡¿ng”s
->
fG’ePoŞ
.
	`begš
();

286 
™
 !ğ
¡¿ng”s
->
fG’ePoŞ
.
	`’d
(); it++ ) {

287 
	`GiveHšt
Ğ
™
->
	`G‘FaùÜs
(), it->
	`G‘F™Ãss
() );

289 
	}
}

294 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$AddPİuÏtiÚ
Ğ
G’‘icPİuÏtiÚ
 &
¡¿ng”s
 )

296 
	`AddPİuÏtiÚ
(&
¡¿ng”s
);

297 
	}
}

302 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$TrimPİuÏtiÚ
()

304 
¡d
::
	`sÜt
(
fG’ePoŞ
.
	`begš
(), fG’ePoŞ.
	`’d
());

305  
fG’ePoŞ
.
	`size
(è> (è
fPİuÏtiÚSizeLim™
 )

306 
fG’ePoŞ
.
	`pİ_back
();

307 
	}
}

313 
	gTMVA
::
G’‘icPİuÏtiÚ
::
GiveHšt
Ğ
¡d
::
veùÜ
< 
DoubË_t
 >& 
hšt
, DoubË_ˆ
f™Ãss
 )

315 
	gTMVA
::
G’‘icG’es
 
g
(
hšt
);

316 
	gg
.
S‘F™Ãss
(
f™Ãss
);

318 
	gfG’ePoŞ
.
push_back
Ğ
g
 );

324 
	gTMVA
::
G’‘icPİuÏtiÚ
::
	$SÜt
()

326 
¡d
::
	`sÜt
(
fG’ePoŞ
.
	`begš
(), fG’ePoŞ.
	`’d
());

327 
	}
}

	@src/GeneticRange.cxx

34 
	~"TRªdom3.h
"

36 
	~"TMVA/G’‘icRªge.h
"

37 
	~"TMVA/IÁ”v®.h
"

39 
CÏssImp
(
TMVA
::
G’‘icRªge
);

45 
	gTMVA
::
G’‘icRªge
::
	$G’‘icRªge
Ğ
TRªdom3
*
ºd
, 
IÁ”v®
 *
š‹rv®
 )

47 
fIÁ”v®
 = 
š‹rv®
;

49 
fFrom
 = 
fIÁ”v®
->
	`G‘Mš
();

50 
fTo
 = 
fIÁ”v®
->
	`G‘Max
();

51 
fNbšs
ğ
fIÁ”v®
->
	`G‘Nbšs
();

52 
fTÙ®L’gth
 = 
fTo
-
fFrom
;

54 
fRªdomG’”©Ü
 = 
ºd
;

55 
	}
}

60 
DoubË_t
 
	gTMVA
::
G’‘icRªge
::
	$RªdomDisü‘e
()

62 
DoubË_t
 
v®ue
 = 
fRªdomG’”©Ü
->
	`UnifÜm
(0, 1);

63  
fIÁ”v®
->
	`G‘EËm’t
Ğ
	`IÁ_t
(
v®ue
*
fNbšs
) );

64 
	}
}

76 
DoubË_t
 
	gTMVA
::
G’‘icRªge
::
	$Rªdom
Ğ
BoŞ_t
 
Ã¬
, 
DoubË_t
 
v®ue
, DoubË_ˆ
¥»ad
, BoŞ_ˆ
mœrÜ
 )

78 ià(
fIÁ”v®
->
	`G‘Nbšs
() > 0) {

79  
	`RªdomDisü‘e
();

81 ià(
fFrom
 =ğ
fTo
) {

82  
fFrom
;

84 ià(
Ã¬
) {

85 
DoubË_t
 
»t
;

86 
»t
 = 
fRªdomG’”©Ü
->
	`Gaus
Ğ
v®ue
, 
fTÙ®L’gth
*
¥»ad
 );

87 ià(
mœrÜ
 )  
	`ReM­MœrÜ
Ğ
»t
 );

88  
	`ReM­
Ğ
»t
 );

90  
fRªdomG’”©Ü
->
	`UnifÜm
(
fFrom
, 
fTo
);

91 
	}
}

96 
DoubË_t
 
	gTMVA
::
G’‘icRªge
::
	$ReM­
Ğ
DoubË_t
 
v®
 )

98 ià(
fFrom
 >ğ
fTo
 )  
v®
;

99 ià(
v®
 < 
fFrom
 )  
	`ReM­
Ğ(v®-fFromè+ 
fTo
 );

100 ià(
v®
 >ğ
fTo
 )  
	`ReM­
Ğ(v®-fToè+ 
fFrom
 );

101  
v®
;

102 
	}
}

107 
DoubË_t
 
	gTMVA
::
G’‘icRªge
::
	$ReM­MœrÜ
Ğ
DoubË_t
 
v®
 )

109 ià(
fFrom
 >ğ
fTo
 )  
v®
;

110 ià(
v®
 < 
fFrom
 )  
	`ReM­
( fFrom - (val-fFrom) );

111 ià(
v®
 >ğ
fTo
 )  
	`ReM­
( fTo - (val-fTo) );

112  
v®
;

113 
	}
}

118 
	gTMVA
::
G’‘icRªge
::~
	$G’‘icRªge
()

120 
	}
}

	@src/GiniIndex.cxx

66 
	~"TMVA/GšiIndex.h
"

68 
	~"Rty³s.h
"

70 
CÏssImp
(
TMVA
::
GšiIndex
);

76 
DoubË_t
 
	gTMVA
::
GšiIndex
::
	$G‘S•¬©iÚIndex
ĞcÚ¡ 
DoubË_t
 
s
, cÚ¡ DoubË_ˆ
b
 )

78 ià(
s
+
b
 <= 0)  0;

79 ià(
s
<=0 || 
b
 <=0)  0;

81  2*
s
*
b
/(s+b)/(s+b);

82 
	}
}

	@src/GiniIndexWithLaplace.cxx

74 
	~"TMVA/GšiIndexW™hL­Ïû.h
"

76 
	~"Rty³s.h
"

78 
CÏssImp
(
TMVA
::
GšiIndexW™hL­Ïû
);

82 
DoubË_t
 
	gTMVA
::
GšiIndexW™hL­Ïû
::
	$G‘S•¬©iÚIndex
ĞcÚ¡ 
DoubË_t
 
s
, cÚ¡ DoubË_ˆ
b
 )

84 ià(
s
+
b
 <= 0)  0;

85 ià(
s
<=0 || 
b
 <=0)  0;

86  (
s
*
b
+s+b+1)/(s+b+2)/(s+b+2);

87 
	}
}

	@src/HyperParameterOptimisation.cxx

4 
	~"TMVA/Hy³rP¬am‘”O±imi§tiÚ.h
"

6 
	~"TMVA/CÚfigu¿bË.h
"

7 
	~"TMVA/D©aS‘.h
"

8 
	~"TMVA/Ev’t.h
"

9 
	~"TMVA/M‘hodBa£.h
"

10 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

11 
	~"TMVA/Ty³s.h
"

13 
	~"TG¿ph.h
"

14 
	~"TMuÉiG¿ph.h
"

15 
	~"TSŒšg.h
"

16 
	~"TSy¡em.h
"

18 
	~<io¡»am
>

19 
	~<memÜy
>

20 
	~<veùÜ
>

32 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚResuÉ
::
	$Hy³rP¬am‘”O±imi§tiÚResuÉ
()

33 : 
	`fROCAVG
(0.0), 
	`fROCCurves
(
¡d
::
make_sh¬ed
<
TMuÉiG¿ph
>())

35 
	}
}

37 
TMVA
::
Hy³rP¬am‘”O±imi§tiÚResuÉ
::~
	$Hy³rP¬am‘”O±imi§tiÚResuÉ
()

39 
	}
}

41 
TMuÉiG¿ph
 *
TMVA
::
Hy³rP¬am‘”O±imi§tiÚResuÉ
::
	$G‘ROCCurves
(
BoŞ_t
 )

44  
fROCCurves
.
	`g‘
();

45 
	}
}

47 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚResuÉ
::
	$Pršt
() const

49 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

50 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

52 
MsgLogg”
 
	`fLogg”
("HyperParameterOptimisation");

54 
UIÁ_t
 
j
=0; j<
fFŞdP¬am‘”s
.
	`size
(); ++j) {

55 
fLogg”
<<
kHEADER
<< "===========================================================" << 
Endl
;

56 
fLogg”
<<
kINFO
<< "O±imi§tiÚ fÜ " << 
fM‘hodName
 << " fŞd " << 
j
+1 << 
Endl
;

58 autØ&
™
 : 
fFŞdP¬am‘”s
.
	`©
(
j
)) {

59 
fLogg”
<<
kINFO
<< 
™
.
fœ¡
 << " " << it.
£cÚd
 << 
Endl
;

63 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

65 
	}
}

67 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚ
::
	$Hy³rP¬am‘”O±imi§tiÚ
(
TMVA
::
D©aLßd”
 *
d©®ßd”
):
	`Env–İe
("HyperParameterOptimisation",dataloader),

68 
	`fFomTy³
("Separation"),

69 
	`fF™Ty³
("Minuit"),

70 
	`fNumFŞds
(5),

71 
	`fResuÉs
(),

72 
	`fCÏssif›r
(
Ãw
 
TMVA
::
	`FaùÜy
("HyperParameterOptimisation","!V:!ROC:Silent:!ModelPersistence:!Color:!DrawProgressBar:AnalysisType=Classification"))

74 
fFŞdStus
=
kFALSE
;

75 
	}
}

77 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚ
::~
	$Hy³rP¬am‘”O±imi§tiÚ
()

79 
fCÏssif›r
=
nuÎ±r
;

80 
	}
}

82 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚ
::
	$S‘NumFŞds
(
UIÁ_t
 
i
)

84 
fNumFŞds
=
i
;

85 
fD©aLßd”
->
	`MakeKFŞdD©aS‘
(
fNumFŞds
);

86 
fFŞdStus
=
kTRUE
;

87 
	}
}

89 
	gTMVA
::
Hy³rP¬am‘”O±imi§tiÚ
::
	$Ev®u©e
()

91 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

92 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

93 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

95 if(!
fFŞdStus
)

97 
fD©aLßd”
->
	`MakeKFŞdD©aS‘
(
fNumFŞds
);

98 
fFŞdStus
=
kTRUE
;

100 
fResuÉs
.
fM‘hodName
 = 
m‘hodName
;

102 
UIÁ_t
 
i
 = 0; i < 
fNumFŞds
; ++i) {

104 
TSŒšg
 
fŞdT™Ë
 = 
m‘hodT™Ë
;

105 
fŞdT™Ë
 += "_opt";

106 
fŞdT™Ë
 +ğ
i
+1;

108 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

109 
fD©aLßd”
->
	`P»·»FŞdD©aS‘
(
i
, 
TMVA
::
Ty³s
::
kT¿ššg
);

111 autØ
sm‘hod
 = 
fCÏssif›r
->
	`BookM‘hod
(
fD©aLßd”
.
	`g‘
(), 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

113 autØ
·¿ms
=
sm‘hod
->
	`O±imizeTunšgP¬am‘”s
(
fFomTy³
,
fF™Ty³
);

114 
fResuÉs
.
fFŞdP¬am‘”s
.
	`push_back
(
·¿ms
);

116 
sm‘hod
->
	`D©a
()->
	`D–‘eResuÉs
(sm‘hod->
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, Ty³s::
kCÏssifiÿtiÚ
);

118 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

120 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

124 
	}
}

	@src/IFitterTarget.cxx

34 
	~"TMVA/IF™‹rT¬g‘.h
"

36 
	~"Rty³s.h
"

38 
CÏssImp
(
TMVA
::
IF™‹rT¬g‘
);

43 
	gTMVA
::
IF™‹rT¬g‘
::
	$IF™‹rT¬g‘
()

45 
	}
}

	@src/IMethod.cxx

2 
	~"TMVA/IM‘hod.h
"

4 
	~"Rty³s.h
"

13 
CÏssImp
(
TMVA
::
IM‘hod
);

	@src/Interval.cxx

69 
	~"TM©h.h
"

70 
	~"TRªdom3.h
"

71 
	~"Th»adLoÿlStÜage.h
"

73 
	~"TMVA/IÁ”v®.h
"

74 
	~"TMVA/MsgLogg”.h
"

75 
	~"TMVA/Ty³s.h
"

77 
CÏssImp
(
TMVA
::
IÁ”v®
);

84 
	gTMVA
::
IÁ”v®
::
	$IÁ”v®
Ğ
DoubË_t
 
mš
, DoubË_ˆ
max
, 
IÁ_t
 
nbšs
 ) :

85 
	`fMš
(
mš
),

86 
	`fMax
(
max
),

87 
	$fNbšs
(
nbšs
)

89 ià(
fMax
 - 
fMš
 < 0è
	`Log
(è<< 
kFATAL
 << "maximum†ow”hª mšimum" << 
Endl
;

90 ià(
nbšs
 < 0) {

91 
	`Log
(è<< 
kFATAL
 << "nbš < 0" << 
Endl
;

94 ià(
nbšs
 == 1) {

95 
	`Log
(è<< 
kFATAL
 << "š‹rv® ha tØhav©†—¡ 2 bš iàdisü‘e" << 
Endl
;

98 
	}
}

100 
	gTMVA
::
IÁ”v®
::
	$IÁ”v®
ĞcÚ¡ 
IÁ”v®
& 
Ùh”
 ) :

101 
	`fMš
 ( 
Ùh”
.
fMš
 ),

102 
	`fMax
 ( 
Ùh”
.
fMax
 ),

103 
	$fNbšs
Ğ
Ùh”
.
fNbšs
 )

105 
	}
}

110 
	gTMVA
::
IÁ”v®
::~
	$IÁ”v®
()

112 
	}
}

120 
DoubË_t
 
TMVA
::
IÁ”v®
::
	$G‘EËm’t
Ğ
IÁ_t
 
bš
 ) const

122 ià(
fNbšs
 <= 0) {

123 
	`Log
(è<< 
kFATAL
 << "G‘EËm’ˆÚly defšed fÜ disü‘v®uIÁ”v®s" << 
Endl
;

126 ià(
bš
 < 0 || bš >ğ
fNbšs
) {

127 
	`Log
(è<< 
kFATAL
 << "bš " << 
bš
 << " ouˆoà¿nge: iÁ”v® *bšs* couÁ from 0Ø" << 
fNbšs
-1 << 
Endl
;

130  
fMš
 + ( (
	`DoubË_t
(
bš
)/(
fNbšs
-1)è*(
fMax
 - fMin) );

131 
	}
}

136 
DoubË_t
 
	gTMVA
::
IÁ”v®
::
	$G‘S‹pSize
Ğ
IÁ_t
 
iBš
 ) const

138 ià(
fNbšs
 <= 0) {

139 
	`Log
(è<< 
kFATAL
 << "G‘EËm’ˆÚly defšed fÜ disü‘v®uIÁ”v®s" << 
Endl
;

141 ià(
iBš
<0) {

142 
	`Log
(è<< 
kFATAL
 << "You‡sked fÜ iBš=" << 
iBš


143 <<" iÀš‹rv® ..‡nd.. sÜry, I cªnÙ†‘hi h­³n.."<<
Endl
;

145  (
fMax
-
fMš
)/(
DoubË_t
)(
fNbšs
-1);

146 
	}
}

151 
DoubË_t
 
	gTMVA
::
IÁ”v®
::
	$G‘Rndm
Ğ
TRªdom3
& 
ºd
 ) const

153  
ºd
.
	`Rndm
()*(
fMax
 - 
fMš
) + fMin;

154 
	}
}

156 
DoubË_t
 
	gTMVA
::
IÁ”v®
::
	$G‘Width
() const

158  
fMax
 - 
fMš
;

159 
	}
}

160 
DoubË_t
 
	gTMVA
::
IÁ”v®
::
	$G‘M—n
() const

162  (
fMax
 + 
fMš
)/2;

163 
	}
}

165 
	gTMVA
::
IÁ”v®
::
	$Pršt
(
¡d
::
o¡»am
 &
os
) const

167 
IÁ_t
 
i
=0; i<
	`G‘Nbšs
(); i++){

168 
os
 << "| " << 
	`G‘EËm’t
(
i
)<<" |" ;

170 
	}
}

172 
	gTMVA
::
MsgLogg”
& 
TMVA
::
IÁ”v®
::
	$Log
() const {

173 
	`TTHREAD_TLS_DECL_ARG
(
MsgLogg”
,
logg”
,"Interval");

174  
logg”
;

175 
	}
}

	@src/KDEKernel.cxx

33 
	~"TH1.h
"

34 
	~"TH1F.h
"

35 
	~"TF1.h
"

43 
	~"TM©h.h
"

47 
	~"TMVA/KDEK”Ãl.h
"

48 
	~"TMVA/MsgLogg”.h
"

49 
	~"TMVA/Ty³s.h
"

51 
CÏssImp
(
TMVA
::
KDEK”Ãl
);

57 
	gTMVA
::
KDEK”Ãl
::
	$KDEK”Ãl
Ğ
EK”ÃlI‹r
 
k™”
, cÚ¡ 
TH1
 *
hi¡
, 
Flßt_t
 
low”_edge
, Flßt_ˆ
uµ”_edge
,

58 
EK”ÃlBÜd”
 
kbÜd”
, 
Flßt_t
 
FšeFaùÜ
 )

59 : 
	`fSigma
( 1. ),

60 
	`fI‹r
 ( 
k™”
 ),

61 
	`fLow”Edge
 (
low”_edge
 ),

62 
	`fUµ”Edge
 (
uµ”_edge
),

63 
	`fFšeFaùÜ
 ( 
FšeFaùÜ
 ),

64 
	`fK”Ãl_š‹g
 ( 0 ),

65 
	`fKDEbÜd”
 ( 
kbÜd”
 ),

66 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("KDEKernel") )

68 ià(
hi¡
 =ğ
NULL
) {

69 
	`Log
(è<< 
kFATAL
 << "C®Ëd w™houˆv®id hi¡og¿m…oš‹¸(hi¡)!" << 
Endl
;

72 
fHi¡
 = (
TH1F
*)
hi¡
->
	`ClÚe
();

73 
fFœ¡I‹rHi¡
 = (
TH1F
*)
hi¡
->
	`ClÚe
();

74 
fFœ¡I‹rHi¡
->
	`Re£t
();

75 
fSigmaHi¡
 = (
TH1F
*)
hi¡
->
	`ClÚe
();

76 
fSigmaHi¡
->
	`Re£t
();

78 
fHidd’I‹¿tiÚ
=
çl£
;

79 
	}
}

84 
	gTMVA
::
KDEK”Ãl
::~
	$KDEK”Ãl
()

86 ià(
fHi¡
 !ğ
NULL
è
d–‘e
 fHist;

87 ià(
fFœ¡I‹rHi¡
 !ğ
NULL
è
d–‘e
 fFirstIterHist;

88 ià(
fSigmaHi¡
 !ğ
NULL
è
d–‘e
 fSigmaHist;

89 ià(
fK”Ãl_š‹g
 !ğ
NULL
è
d–‘e
 fKernel_integ;

90 
d–‘e
 
fLogg”
;

91 
	}
}

96 
DoubË_t
 
	$GaussIÁeg¿l
(
DoubË_t
 *
x
, DoubË_ˆ*
·r
)

98 iàĞ(
·r
[1]<=0è|| (
x
[0]>x[1]))  -1.;

100 
Flßt_t
 
xs1
=(
x
[0]-
·r
[0])/par[1];

101 
Flßt_t
 
xs2
=(
x
[1]-
·r
[0])/par[1];

103 ià(
xs1
==0) {

104 ià(
xs2
==0)  0.;

105 ià(
xs2
>0 )  0.5*
TM©h
::
	`Erf
(xs2);

107 ià(
xs2
==0è 0.5*
TM©h
::
	`Erf
(TM©h::
	`Abs
(
xs1
));

108 ià(
xs1
>0è 0.5*(
TM©h
::
	`Erf
(
xs2
)-TMath::Erf(xs1));

109 ià(
xs1
<0) {

110 ià(
xs2
>0 )  0.5*(
TM©h
::
	`Erf
(xs2)+TM©h::Erf(TM©h::
	`Abs
(
xs1
)));

111  0.5*(
TM©h
::
	`Erf
(TM©h::
	`Abs
(
xs1
))-TM©h::Erf(TM©h::Abs(
xs2
)));

114 
	}
}

120 
	gTMVA
::
KDEK”Ãl
::
	$S‘K”ÃlTy³
Ğ
EK”ÃlTy³
 
kty³
 )

122 ià(
kty³
 =ğ
kGauss
) {

129 
fK”Ãl_š‹g
 = 
Ãw
 
	`TF1
("GaussIÁeg¿l",
GaussIÁeg¿l
,
fLow”Edge
,
fUµ”Edge
,4);

130 
fSigma
 = ( 
TM©h
::
	`Sq¹
(2.0)

131 *
TM©h
::
	`Pow”
(4./3., 0.2)

132 *
fHi¡
->
	`G‘RMS
()

133 *
TM©h
::
	`Pow”
(
fHi¡
->
	`IÁeg¿l
(), -0.2) );

137 ià(
fSigma
 <= 0 ) {

138 
	`Log
(è<< 
kFATAL
 << "<S‘K”ÃlTy³> KDE sigm¨ha šv®id v®uĞ<=0 ) !" << 
Endl
;

142 ià(
fI‹r
 =ğ
kAd­tiveKDE
) {

148 
fHidd’I‹¿tiÚ
=
Œue
;

150 
Flßt_t
 
hi¡oLowEdge
=
fHi¡
->
	`G‘BšLowEdge
(1);

151 
Flßt_t
 
hi¡oUµ”Edge
=
fHi¡
->
	`G‘BšLowEdge
(fHi¡->
	`G‘NbšsX
()+1);

153 
IÁ_t
 
i
=1;i<
fHi¡
->
	`G‘NbšsX
();i++) {

155 
IÁ_t
 
j
=1;j<
fFœ¡I‹rHi¡
->
	`G‘NbšsX
();j++) {

157 
fFœ¡I‹rHi¡
->
	`AddBšCÚ‹Á
(
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

158 
this
->
	`G‘BšK”ÃlIÁeg¿l
(
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
),

159 
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
+1),

160 
fHi¡
->
	`G‘BšC’‹r
(
i
),

161 
i
)

164 ià(
fKDEbÜd”
 == 3) {

168 ià(
i
 < 
fHi¡
->
	`G‘NbšsX
()/5 ) {

169 
IÁ_t
 
j
=1;j<
fFœ¡I‹rHi¡
->
	`G‘NbšsX
();j++) {

171 
fFœ¡I‹rHi¡
->
	`AddBšCÚ‹Á
(
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

172 
this
->
	`G‘BšK”ÃlIÁeg¿l
(
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
),

173 
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
+1),

174 2*
hi¡oLowEdge
-
fHi¡
->
	`G‘BšC’‹r
(
i
),

175 
i
)

179 ià(
i
 > 4*
fHi¡
->
	`G‘NbšsX
()/5) {

180 
IÁ_t
 
j
=1;j<
fFœ¡I‹rHi¡
->
	`G‘NbšsX
();j++) {

182 
fFœ¡I‹rHi¡
->
	`AddBšCÚ‹Á
(
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

183 
this
->
	`G‘BšK”ÃlIÁeg¿l
(
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
),

184 
fFœ¡I‹rHi¡
->
	`G‘BšLowEdge
(
j
+1),

185 2*
hi¡oUµ”Edge
-
fHi¡
->
	`G‘BšC’‹r
(
i
),

186 
i
)

193 
fFœ¡I‹rHi¡
->
	`S‘EÁr›s
(
fHi¡
->
	`G‘EÁr›s
());

196 
Flßt_t
 
š‹g
=0;

197 
IÁ_t
 
j
=1;j<
fFœ¡I‹rHi¡
->
	`G‘NbšsX
();j++)

198 
š‹g
+=
fFœ¡I‹rHi¡
->
	`G‘BšCÚ‹Á
(
j
)*fFœ¡I‹rHi¡->
	`G‘BšWidth
(j);

199 
fFœ¡I‹rHi¡
->
	`SÿË
(1./
š‹g
);

201 
fHidd’I‹¿tiÚ
=
çl£
;

207 
IÁ_t
 
j
=1;j<
fFœ¡I‹rHi¡
->
	`G‘NbšsX
();j++) {

209 ià(
fSigma
*
TM©h
::
	`Sq¹
(1.0/
fFœ¡I‹rHi¡
->
	`G‘BšCÚ‹Á
(
j
)) <= 0 ) {

210 
	`Log
(è<< 
kFATAL
 << "<S‘K”ÃlTy³> KDE sigm¨ha šv®id v®uĞ<=0 ) !" << 
Endl
;

213 
fSigmaHi¡
->
	`S‘BšCÚ‹Á
(
j
,
fFšeFaùÜ
*
fSigma
/
TM©h
::
	`Sq¹
(
fFœ¡I‹rHi¡
->
	`G‘BšCÚ‹Á
(j)));

217 ià(
fK”Ãl_š‹g
 ==0 ) {

218 
	`Log
(è<< 
kFATAL
 << "KDE k”ÃÈnÙ cÜ»ùly in™Ÿlized!" << 
Endl
;

220 
	}
}

225 
Flßt_t
 
	gTMVA
::
KDEK”Ãl
::
	$G‘BšK”ÃlIÁeg¿l
Ğ
Flßt_t
 
lowr
, Flßt_ˆ
highr
, Flßt_ˆ
m—n
, 
IÁ_t
 
bšnum
 )

227 ià((
fI‹r
 =ğ
kNÚad­tiveKDE
è|| 
fHidd’I‹¿tiÚ
 )

228 
fK”Ãl_š‹g
->
	`S‘P¬am‘”s
(
m—n
,
fSigma
);

229 ià((
fI‹r
 =ğ
kAd­tiveKDE
è&& !
fHidd’I‹¿tiÚ
 )

230 
fK”Ãl_š‹g
->
	`S‘P¬am‘”s
(
m—n
,
fSigmaHi¡
->
	`G‘BšCÚ‹Á
(
bšnum
));

232 iàĞ
fKDEbÜd”
 == 2 ) {

233 
Flßt_t
 
»nÜmFaùÜ
=1.0/
fK”Ãl_š‹g
->
	`Ev®
(
fLow”Edge
,
fUµ”Edge
);

234  (
»nÜmFaùÜ
*
fK”Ãl_š‹g
->
	`Ev®
(
lowr
,
highr
));

239  (
fK”Ãl_š‹g
->
	`Ev®
(
lowr
,
highr
));

240 
	}
}

	@src/LDA.cxx

32 
	~"TMVA/LDA.h
"

35 
	~<io¡»am
>

37 
	~"TDecompSVD.h
"

38 
	~"TM©rixF.h
"

39 
	~"TM©h.h
"

41 
	~"TMVA/Ty³s.h
"

42 
	~"TMVA/MsgLogg”.h
"

47 
	gTMVA
::
LDA
::
	$LDA
Ğ
Flßt_t
 
tŞ”’û
, 
BoŞ_t
 
debug
 )

48 : 
	`fTŞ”’û
(
tŞ”’û
),

49 
	`fNumP¬ams
(0),

50 
	`fSigma
(0),

51 
	`fSigmaInv”£
(0),

52 
	`fDebug
(
debug
),

53 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("LDA", (
debug
?
kINFO
:
kDEBUG
)) )

55 
	}
}

60 
TMVA
::
LDA
::~
	$LDA
()

62 
d–‘e
 
fLogg”
;

63 
	}
}

68 
	gTMVA
::
LDA
::
	$In™Ÿlize
(cÚ¡ 
LDAEv’ts
& 
šputSigÇlEv’ts
, cÚ¡ LDAEv’ts& 
šputBackgroundEv’ts
)

70 
	`Log
(è<< 
kDEBUG
 << "Th”¬e: " << 
šputSigÇlEv’ts
.
	`size
(è<< " iÅuˆsigÇÈev’t " << 
Endl
;

71 
	`Log
(è<< 
kDEBUG
 << "Th”¬e: " << 
šputBackgroundEv’ts
.
	`size
(è<< " iÅuˆbackgroundƒv’t " << 
Endl
;

73 
fNumP¬ams
 = 
šputSigÇlEv’ts
[0].
	`size
();

75 
UIÁ_t
 
numSigÇlEv’ts
 = 
šputSigÇlEv’ts
.
	`size
();

76 
UIÁ_t
 
numBackEv’ts
 = 
šputBackgroundEv’ts
.
	`size
();

77 
UIÁ_t
 
numTÙ®Ev’ts
 = 
numSigÇlEv’ts
 + 
numBackEv’ts
;

78 
fEv’tF¿ùiÚ
[0] = (
Flßt_t
)
numBackEv’ts
/
numTÙ®Ev’ts
;

79 
fEv’tF¿ùiÚ
[1] = (
Flßt_t
)
numSigÇlEv’ts
/
numTÙ®Ev’ts
;

80 
UIÁ_t
 
K
 = 2;

83 
¡d
::
veùÜ
<
Flßt_t
> 
	`m_muSigÇl
 (
fNumP¬ams
,0.0);

84 
¡d
::
veùÜ
<
Flßt_t
> 
	`m_muBackground
 (
fNumP¬ams
,0.0);

85 
UIÁ_t
 
·¿m
=0;…¬am < 
fNumP¬ams
; ++param) {

86 
UIÁ_t
 
ev’tNumb”
=0;ƒv’tNumb” < 
numSigÇlEv’ts
; ++eventNumber)

87 
m_muSigÇl
[
·¿m
] +ğ
šputSigÇlEv’ts
[
ev’tNumb”
][param];

88 
UIÁ_t
 
ev’tNumb”
=0;ƒv’tNumb” < 
numBackEv’ts
; ++eventNumber)

89 
m_muBackground
[
·¿m
] +ğ
šputBackgroundEv’ts
[
ev’tNumb”
][·¿m]/
numBackEv’ts
;

90 ià(
numSigÇlEv’ts
 > 0è
m_muSigÇl
[
·¿m
] /=‚umSignalEvents;

91 ià(
numBackEv’ts
 > 0 ) 
m_muBackground
[
·¿m
] /=‚umBackEvents;

93 
fMu
[0] = 
m_muBackground
;

94 
fMu
[1] = 
m_muSigÇl
;

96 ià(
fDebug
) {

97 
	`Log
(è<< 
kDEBUG
 << "thsigÇÈm—ns" << 
Endl
;

98 
UIÁ_t
 
·¿m
=0;…¬am < 
fNumP¬ams
; ++param)

99 
	`Log
(è<< 
kDEBUG
 << 
m_muSigÇl
[
·¿m
] << 
Endl
;

100 
	`Log
(è<< 
kDEBUG
 << "thbackground m—ns" << 
Endl
;

101 
UIÁ_t
 
·¿m
=0;…¬am < 
šputBackgroundEv’ts
[0].
	`size
(); ++param)

102 
	`Log
(è<< 
kDEBUG
 << 
m_muBackground
[
·¿m
] << 
Endl
;

109 
TM©rixF
 
	`sigmaSigÇl
(
fNumP¬ams
, fNumParams);

110 
TM©rixF
 
	`sigmaBack
(
fNumP¬ams
, fNumParams);

111 ià(
fSigma
!=0è
d–‘e
 fSigma;

112 
fSigma
 = 
Ãw
 
	`TM©rixF
(
fNumP¬ams
, fNumParams);

113 
UIÁ_t
 
row
=0;„ow < 
fNumP¬ams
; ++row) {

114 
UIÁ_t
 
cŞ
=0; cŞ < 
fNumP¬ams
; ++col) {

115 
sigmaSigÇl
[
row
][
cŞ
] = 0;

116 
sigmaBack
[
row
][
cŞ
] = 0;

117 (*
fSigma
)[
row
][
cŞ
] = 0;

121 
UIÁ_t
 
ev’tNumb”
=0;ƒv’tNumb” < 
numSigÇlEv’ts
; ++eventNumber) {

122 
UIÁ_t
 
row
=0;„ow < 
fNumP¬ams
; ++row) {

123 
UIÁ_t
 
cŞ
=0; cŞ < 
fNumP¬ams
; ++col) {

124 
sigmaSigÇl
[
row
][
cŞ
] +ğ(
šputSigÇlEv’ts
[
ev’tNumb”
][row] - 
m_muSigÇl
[row]) * (inputSignalEvents[eventNumber][col] - m_muSignal[col] );

129 
UIÁ_t
 
ev’tNumb”
=0;ƒv’tNumb” < 
numBackEv’ts
; ++eventNumber) {

130 
UIÁ_t
 
row
=0;„ow < 
fNumP¬ams
; ++row) {

131 
UIÁ_t
 
cŞ
=0; cŞ < 
fNumP¬ams
; ++col) {

132 
sigmaBack
[
row
][
cŞ
] +ğ(
šputBackgroundEv’ts
[
ev’tNumb”
][row] - 
m_muBackground
[row]) * (inputBackgroundEvents[eventNumber][col] - m_muBackground[col] );

138 *
fSigma
 = 
sigmaBack
 + 
sigmaSigÇl
;

139 *
fSigma
 *ğ1.0/(
numTÙ®Ev’ts
 - 
K
);

141 ià(
fDebug
) {

142 
	`Log
(è<< "aá” flšg sigmaSigÇl" <<
Endl
;

143 
sigmaSigÇl
.
	`Pršt
();

144 
	`Log
(è<< "aá” flšg sigmaBack" <<
Endl
;

145 
sigmaBack
.
	`Pršt
();

146 
	`Log
(è<< "aá” flšgÙ® Sigma" <<
Endl
;

147 
fSigma
->
	`Pršt
();

150 
TDecompSVD
 
sŞutiÚSVD
 = 
	`TDecompSVD
Ğ*
fSigma
 );

151 
TM©rixF
 
decompo£d
 = 
	`TM©rixF
Ğ
fNumP¬ams
, fNumParams );

152 
TM©rixF
 
	`dŸg
 ( 
fNumP¬ams
, fNumParams );

153 
TM©rixF
 
	`uT¿ns
Ğ
fNumP¬ams
, fNumParams );

154 
TM©rixF
 
	`vT¿ns
Ğ
fNumP¬ams
, fNumParams );

155 ià(
sŞutiÚSVD
.
	`Decompo£
()) {

156 
UIÁ_t
 
i
 = 0; i< 
fNumP¬ams
; ++i) {

157 ià(
sŞutiÚSVD
.
	`G‘Sig
()[
i
] > 
fTŞ”’û
)

158 
	`dŸg
(
i
,ièğ
sŞutiÚSVD
.
	`G‘Sig
()[i];

160 
	`dŸg
(
i
,ièğ
fTŞ”’û
;

163 ià(
fDebug
) {

164 
	`Log
(è<< "thdŸgÚ®" <<
Endl
;

165 
dŸg
.
	`Pršt
();

168 
decompo£d
 = 
sŞutiÚSVD
.
	`G‘V
();

169 
decompo£d
 *ğ
dŸg
;

170 
decompo£d
 *ğ
sŞutiÚSVD
.
	`G‘U
();

172 ià(
fDebug
) {

173 
	`Log
(è<< "thdecompos™iÚ " <<
Endl
;

174 
decompo£d
.
	`Pršt
();

177 *
fSigmaInv”£
 = 
uT¿ns
.
	`T¿n¥o£
(
sŞutiÚSVD
.
	`G‘U
());

178 *
fSigmaInv”£
 /ğ
dŸg
;

179 *
fSigmaInv”£
 *ğ
vT¿ns
.
	`T¿n¥o£
(
sŞutiÚSVD
.
	`G‘V
());

181 ià(
fDebug
) {

182 
	`Log
(è<< "thSigmaInv”£ " <<
Endl
;

183 
fSigmaInv”£
->
	`Pršt
();

185 
	`Log
(è<< "th»® " <<
Endl
;

186 
fSigma
->
	`Inv”t
();

187 
fSigma
->
	`Pršt
();

189 
BoŞ_t
 
´obËm
 = 
çl£
;

190 
UIÁ_t
 
i
 =0; i< 
fNumP¬ams
; ++i) {

191 
UIÁ_t
 
j
 =0; j< 
fNumP¬ams
; ++j) {

192 ià(
TM©h
::
	`Abs
((
Flßt_t
)(*
fSigma
)(
i
,
j
è- (Flßt_t)(*
fSigmaInv”£
)(i,j)) > 0.01) {

193 
	`Log
(è<< "´obËm, iğ"<< 
i
 << " jğ" << 
j
 << 
Endl
;

194 
	`Log
(è<< "Sigma(i,j)ğ"<< (*
fSigma
)(
i
,
j
è<< " SigmaInv”£(i,j)ğ" << (*
fSigmaInv”£
)(i,jè<<
Endl
;

195 
	`Log
(è<< "Thdifã»nû i : " << 
TM©h
::
	`Abs
((
Flßt_t
)(*
fSigma
)(
i
,
j
è- (Flßt_t)(*
fSigmaInv”£
)(i,j)è<<
Endl
;

196 
´obËm
 = 
Œue
;

200 ià(
´obËm
è
	`Log
(è<< 
kWARNING
 << "ProbËm w™hhšv”siÚ!" << 
Endl
;

204 
	}
}

211 
Flßt_t
 
	gTMVA
::
LDA
::
FSub
(cÚ¡ 
¡d
::
veùÜ
<Flßt_t>& 
x
, 
IÁ_t
 
k
)

213 
Flßt_t
 
	g´eçùÜ
 = 1.0/(
TM©h
::
TwoPi
()*TM©h::
Sq¹
(
fSigma
->
D‘”mšªt
()));

214 
	g¡d
::
veùÜ
<
Flßt_t
> 
m_ŒªsPo£TimesSigmaInv”£
;

216 
UIÁ_t
 
	gj
=0; j < 
	gfNumP¬ams
; ++j) {

217 
Flßt_t
 
	gm_‹mp
 = 0;

218 
UIÁ_t
 
	gi
=0; i < 
	gfNumP¬ams
; ++i) {

219 
	gm_‹mp
 +ğ(
x
[
i
] - 
fMu
[
k
][i]è* (*
fSigmaInv”£
)(
j
,
	gi
);

221 
	gm_ŒªsPo£TimesSigmaInv”£
.
push_back
(
m_‹mp
);

224 
Flßt_t
 
	gexpÚ’t
 = 0.0;

225 
UIÁ_t
 
	gi
=0; i< 
	gfNumP¬ams
; ++i) {

226 
	gexpÚ’t
 +ğ
m_ŒªsPo£TimesSigmaInv”£
[
i
]*(
x
[i] - 
fMu
[
k
][i]);

229 
	gexpÚ’t
 *= -0.5;

231  
´eçùÜ
*
	gTM©h
::
Exp
Ğ
expÚ’t
 );

239 
Flßt_t
 
	gTMVA
::
LDA
::
G‘Prob
(cÚ¡ 
¡d
::
veùÜ
<Flßt_t>& 
x
, 
IÁ_t
 
k
)

241 
Flßt_t
 
	gm_num”©Ü
 = 
FSub
(
x
,
k
)*
	gfEv’tF¿ùiÚ
[k];

242 
Flßt_t
 
	gm_d’omš©Ü
 = 
FSub
(
x
,0)*
	gfEv’tF¿ùiÚ
[0]+FSub(x,1)*fEventFraction[1];

244  
	gm_num”©Ü
/
	gm_d’omš©Ü
;

252 
Flßt_t
 
	gTMVA
::
LDA
::
G‘LogLik–ihood
ĞcÚ¡ 
¡d
::
veùÜ
<Flßt_t>& 
x
, 
IÁ_t
 
k
 )

254  
	gTM©h
::
Log
Ğ
FSub
(
x
,
k
)/FSub(x,!kèè+ TM©h::LogĞ
fEv’tF¿ùiÚ
[k]/fEventFraction[!k] );

	@src/LogInterval.cxx

77 
	~"TM©h.h
"

78 
	~"TRªdom3.h
"

79 
	~"Th»adLoÿlStÜage.h
"

81 
	~"TMVA/LogIÁ”v®.h
"

82 
	~"TMVA/MsgLogg”.h
"

83 
	~"TMVA/Ty³s.h
"

85 
CÏssImp
(
TMVA
::
LogIÁ”v®
);

89 
	gTMVA
::
LogIÁ”v®
::
	$LogIÁ”v®
Ğ
DoubË_t
 
mš
, DoubË_ˆ
max
, 
IÁ_t
 
nbšs
 ) :

90 
TMVA
::
	$IÁ”v®
(
mš
,
max
,
nbšs
)

92 ià(
mš
<=0è
	`Log
(è<< 
kFATAL
 << "log¬™hmiøš‹rv® havtØhavMš>0 !!" << 
Endl
;

93 
	}
}

95 
	gTMVA
::
LogIÁ”v®
::
	$LogIÁ”v®
ĞcÚ¡ 
LogIÁ”v®
& 
Ùh”
 ) :

96 
TMVA
::
	$IÁ”v®
(
Ùh”
)

98 
	}
}

103 
TMVA
::
LogIÁ”v®
::~
	$LogIÁ”v®
()

105 
	}
}

113 
DoubË_t
 
TMVA
::
LogIÁ”v®
::
	$G‘EËm’t
Ğ
IÁ_t
 
bš
 ) const

115 ià(
fNbšs
 <= 0) {

116 
	`Log
(è<< 
kFATAL
 << "G‘EËm’ˆÚly defšed fÜ disü‘v®uLogIÁ”v®s" << 
Endl
;

119 ià(
bš
 < 0 || bš >ğ
fNbšs
) {

120 
	`Log
(è<< 
kFATAL
 << "bš " << 
bš
 << " ouˆoà¿nge: iÁ”v® *bšs* couÁ from 0Ø" << 
fNbšs
-1 << 
Endl
;

123  
TM©h
::
	`Exp
(TM©h::
	`Log
(
fMš
)+((
DoubË_t
)
bš
è/((DoubË_t)(
fNbšs
-1))*
	`log
(
fMax
/fMin));

124 
	}
}

129 
DoubË_t
 
	gTMVA
::
LogIÁ”v®
::
	$G‘S‹pSize
Ğ
IÁ_t
 
iBš
 ) const

131 ià(
fNbšs
 <= 0) {

132 
	`Log
(è<< 
kFATAL
 << "G‘EËm’ˆÚly defšed fÜ disü‘v®uLogIÁ”v®s" << 
Endl
;

134 ià(
iBš
<0) {

135 
	`Log
(è<< 
kFATAL
 << "You‡sked fÜ iBš=" << 
iBš


136 <<" iÀš‹rv® ..‡nd.. sÜry, I cªnÙ†‘hi h­³n.."<<
Endl
;

138  (
	`G‘EËm’t
(
TM©h
::
	`Max
(
iBš
,0))-GetElement(TMath::Max(iBin-1,0)));

139 
	}
}

144 
DoubË_t
 
	gTMVA
::
LogIÁ”v®
::
	$G‘Rndm
Ğ
TRªdom3
& 
ºd
 ) const

146  
TM©h
::
	`Exp
(
ºd
.
	`Rndm
()*(TM©h::
	`Log
(
fMax
/
fMš
) - TMath::Log(fMin)) + TMath::Log(fMin));

147 
	}
}

151 
DoubË_t
 
	gTMVA
::
LogIÁ”v®
::
	$G‘Width
() const

153  
fMax
 - 
fMš
;

154 
	}
}

158 
DoubË_t
 
	gTMVA
::
LogIÁ”v®
::
	$G‘M—n
() const

160  (
fMax
 + 
fMš
)/2;

161 
	}
}

165 
	gTMVA
::
MsgLogg”
& 
TMVA
::
LogIÁ”v®
::
	$Log
() const {

166 
	`TTHREAD_TLS_DECL_ARG
(
MsgLogg”
,
logg”
,"LogInterval");

167  
logg”
;

168 
	}
}

	@src/LossFunction.cxx

38 
	~"TMVA/LossFunùiÚ.h
"

40 
	~"TMVA/MsgLogg”.h
"

42 
	~"Rty³s.h
"

43 
	~"TM©h.h
"

45 
	~<io¡»am
>

50 
	gTMVA
::
Hub”LossFunùiÚ
::
	$Hub”LossFunùiÚ
(){

51 
fT¿ns™iÚPošt
 = -9999;

52 
fSumOfWeights
 = -9999;

53 
fQuªte
 = 0.7;

55 
	}
}

57 
	gTMVA
::
Hub”LossFunùiÚ
::
	$Hub”LossFunùiÚ
(
DoubË_t
 
quªte
){

58 
fSumOfWeights
 = -9999;

59 
fT¿ns™iÚPošt
 = -9999;

60 
fQuªte
 = 
quªte
;

61 
	}
}

66 
	gTMVA
::
Hub”LossFunùiÚ
::~
	$Hub”LossFunùiÚ
(){

68 
	}
}

74 
TMVA
::
Hub”LossFunùiÚ
::
In™
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

77 
S‘SumOfWeights
(
evs
);

78 
S‘T¿ns™iÚPošt
(
evs
);

84 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚ
::
C®cuÏ‹SumOfWeights
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

87 
DoubË_t
 
sumOfWeights
 = 0;

88 
UIÁ_t
 
	gi
 = 0; i<
	gevs
.
size
(); i++)

89 
	gsumOfWeights
+=
evs
[
i
].
weight
;

91  
	gsumOfWeights
;

97 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚ
::
C®cuÏ‹Quªte
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
, DoubË_ˆ
whichQuªte
, DoubË_ˆ
sumOfWeights
, 
boŞ
 
abs
){

102 if(
	gabs
)

103 
	g¡d
::
sÜt
(
evs
.
begš
(),ƒvs.
’d
(), [](
LossFunùiÚEv’tInfo
 
a
, LossFunùiÚEv’tInfØ
b
){

104  
TM©h
::
Abs
(
a
.
ŒueV®ue
-a.
´ediùedV®ue
è< TM©h::Abs(
b
.trueValue-b.predictedValue); });

106 
	g¡d
::
sÜt
(
evs
.
begš
(),ƒvs.
’d
(), [](
LossFunùiÚEv’tInfo
 
a
, LossFunùiÚEv’tInfØ
b
){

107  (
a
.
ŒueV®ue
-a.
´ediùedV®ue
è< (
b
.trueValue-b.predictedValue); });

108 
UIÁ_t
 
	gi
 = 0;

109 
DoubË_t
 
	g‹mp
 = 0.0;

110 
	gi
<
	gevs
.
size
()-1 && 
	g‹mp
 <ğ
sumOfWeights
*
whichQuªte
){

111 
‹mp
 +ğ
evs
[
i
].
weight
;

112 
	gi
++;

116 if(
	gwhichQuªte
 =ğ0è
i
=0;

119 if(
	gabs
è 
	gTM©h
::
Abs
(
evs
[
i
].
ŒueV®ue
-evs[i].
´ediùedV®ue
);

120  
	gevs
[
i
].
	gŒueV®ue
-evs[i].
	g´ediùedV®ue
;

127 
	gTMVA
::
Hub”LossFunùiÚ
::
S‘T¿ns™iÚPošt
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

128 
fT¿ns™iÚPošt
 = 
C®cuÏ‹Quªte
(
evs
, 
fQuªte
, 
fSumOfWeights
, 
Œue
);

132 if(
	gfT¿ns™iÚPošt
 == 0){

134 
UIÁ_t
 
i
=0; 
	gi
<
	gevs
.
size
(); i++){

135 
DoubË_t
 
	g»sidu®
 = 
TM©h
::
Abs
(
evs
[
i
].
ŒueV®ue
 -ƒvs[i].
´ediùedV®ue
);

136 if(
	g»sidu®
 != 0){

137 
fT¿ns™iÚPošt
 = 
»sidu®
;

144 if(
	gfT¿ns™iÚPošt
 == 0){

154 
	gTMVA
::
Hub”LossFunùiÚ
::
S‘SumOfWeights
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

155 
fSumOfWeights
 = 
C®cuÏ‹SumOfWeights
(
evs
);

161 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚ
::
	$C®cuÏ‹Loss
(
LossFunùiÚEv’tInfo
& 
e
){

164 if(
fSumOfWeights
 == -9999){

165 
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
evs
;

166 
evs
.
	`push_back
(
e
);

168 
	`S‘SumOfWeights
(
evs
);

169 
	`S‘T¿ns™iÚPošt
(
evs
);

172 
DoubË_t
 
»sidu®
 = 
TM©h
::
	`Abs
(
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
);

173 
DoubË_t
 
loss
 = 0;

175 if(
»sidu®
 <ğ
fT¿ns™iÚPošt
è
loss
 = 0.5*residual*residual;

177 
loss
 = 
fQuªte
*
»sidu®
 - 0.5*fQuantile*fQuantile;

178  
e
.
weight
*
loss
;

179 
	}
}

184 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚ
::
C®cuÏ‹N‘Loss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

188 
S‘SumOfWeights
(
evs
);

189 
S‘T¿ns™iÚPošt
(
evs
);

191 
DoubË_t
 
	gÃoss
 = 0;

192 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

193 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

194  
	gÃoss
;

202 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚ
::
C®cuÏ‹M—nLoss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

206 
S‘SumOfWeights
(
evs
);

207 
S‘T¿ns™iÚPošt
(
evs
);

209 
DoubË_t
 
	gÃoss
 = 0;

210 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

211 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

212  
	gÃoss
/
	gfSumOfWeights
;

222 
	gTMVA
::
Hub”LossFunùiÚBDT
::
	$Hub”LossFunùiÚBDT
(){

223 
	}
}

228 
TMVA
::
Hub”LossFunùiÚBDT
::
In™
(
¡d
::
m­
<cÚ¡ TMVA::
Ev’t
*, 
LossFunùiÚEv’tInfo
>& 
evšfom­
, std::
veùÜ
<>& 
boo¡Weights
){

231 
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
evšfovec
;

232 autØ&
	ge
: 
evšfom­
){

233 
evšfovec
.
push_back
(
LossFunùiÚEv’tInfo
(
e
.
£cÚd
.
ŒueV®ue
,ƒ.£cÚd.
´ediùedV®ue
,ƒ.
fœ¡
->
G‘Weight
()));

237 
S‘SumOfWeights
(
evšfovec
);

238 
DoubË_t
 
	gweigh‹dMedŸn
 = 
C®cuÏ‹Quªte
(
evšfovec
, 0.5, 
fSumOfWeights
, 
çl£
);

241 
	gboo¡Weights
.
push_back
(
weigh‹dMedŸn
);

242 autØ&
	ge
: 
evšfom­
 ) {

244 
e
.
£cÚd
.
´ediùedV®ue
 +ğ
weigh‹dMedŸn
;

251 
	gTMVA
::
Hub”LossFunùiÚBDT
::
S‘T¬g‘s
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
evs
, std::
m­
< cÚ¡ TMVA::Ev’t*, 
LossFunùiÚEv’tInfo
 >& 
evšfom­
){

253 
	g¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
ev’tvec
;

254 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++){

255 
	gev’tvec
.
push_back
(
LossFunùiÚEv’tInfo
(
evšfom­
[*
e
].
ŒueV®ue
,ƒvšfom­[*e].
´ediùedV®ue
, (*e)->
G‘Weight
()));

261 
S‘SumOfWeights
(
ev’tvec
);

262 
S‘T¿ns™iÚPošt
(
ev’tvec
);

264 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++) {

265 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
*>(*
e
)->
S‘T¬g‘
(0,
T¬g‘
(
evšfom­
[*e]));

272 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚBDT
::
	$T¬g‘
(
LossFunùiÚEv’tInfo
& 
e
){

273 
DoubË_t
 
»sidu®
 = 
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
;

275 if(
TM©h
::
	`Abs
(
»sidu®
è<ğ
fT¿ns™iÚPošt
) „esidual;

276  
fT¿ns™iÚPošt
*(
»sidu®
<0?-1.0:1.0);

277 
	}
}

283 
DoubË_t
 
	gTMVA
::
Hub”LossFunùiÚBDT
::
F™
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

289 
DoubË_t
 
sumOfWeights
 = 
C®cuÏ‹SumOfWeights
(
evs
);

290 
DoubË_t
 
	gshiá
=0,
	gdiff
= 0;

291 
DoubË_t
 
	g»sidu®MedŸn
 = 
C®cuÏ‹Quªte
(
evs
,0.5,
sumOfWeights
, 
çl£
);

292 
UIÁ_t
 
	gj
=0;j<
	gevs
.
size
();j++){

293 
DoubË_t
 
	g»sidu®
 = 
evs
[
j
].
ŒueV®ue
 -ƒvs[j].
´ediùedV®ue
;

294 
	gdiff
 = 
»sidu®
-
»sidu®MedŸn
;

296 
	gshiá
+=1.0/
evs
.
size
()*((
diff
<0)?-1.0:1.0)*
TM©h
::
Mš
(
fT¿ns™iÚPošt
,
çbs
(diff));

301  (
	g»sidu®MedŸn
 + 
	gshiá
);

317 
DoubË_t
 
	gTMVA
::
L—¡Squ¬esLossFunùiÚ
::
	$C®cuÏ‹Loss
(
LossFunùiÚEv’tInfo
& 
e
){

318 
DoubË_t
 
»sidu®
 = (
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
);

319 
DoubË_t
 
loss
 = 0;

320 
loss
 = 
»sidu®
*residual;

321  
e
.
weight
*
loss
;

322 
	}
}

327 
DoubË_t
 
	gTMVA
::
L—¡Squ¬esLossFunùiÚ
::
C®cuÏ‹N‘Loss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

328 
DoubË_t
 
Ãoss
 = 0;

329 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

330 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

331  
	gÃoss
;

339 
DoubË_t
 
	gTMVA
::
L—¡Squ¬esLossFunùiÚ
::
C®cuÏ‹M—nLoss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

340 
DoubË_t
 
Ãoss
 = 0;

341 
DoubË_t
 
	gsumOfWeights
 = 0;

342 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++){

343 
	gsumOfWeights
+=
evs
[
i
].
weight
;

344 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

347  
	gÃoss
/
	gsumOfWeights
;

362 
	gTMVA
::
L—¡Squ¬esLossFunùiÚBDT
::
In™
(
¡d
::
m­
<cÚ¡ 
TMVA
::
Ev’t
*, 
LossFunùiÚEv’tInfo
>& 
evšfom­
, std::
veùÜ
<>& 
boo¡Weights
){

365 
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
evšfovec
;

366 autØ&
	ge
: 
evšfom­
){

367 
evšfovec
.
push_back
(
LossFunùiÚEv’tInfo
(
e
.
£cÚd
.
ŒueV®ue
,ƒ.£cÚd.
´ediùedV®ue
,ƒ.
fœ¡
->
G‘Weight
()));

371 
DoubË_t
 
	gweigh‹dM—n
 = 
F™
(
evšfovec
);

374 
	gboo¡Weights
.
push_back
(
weigh‹dM—n
);

375 autØ&
	ge
: 
evšfom­
 ) {

377 
e
.
£cÚd
.
´ediùedV®ue
 +ğ
weigh‹dM—n
;

384 
	gTMVA
::
L—¡Squ¬esLossFunùiÚBDT
::
S‘T¬g‘s
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
evs
, std::
m­
< cÚ¡ TMVA::Ev’t*, 
LossFunùiÚEv’tInfo
 >& 
evšfom­
){

386 
	g¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
ev’tvec
;

387 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++){

388 
	gev’tvec
.
push_back
(
LossFunùiÚEv’tInfo
(
evšfom­
[*
e
].
ŒueV®ue
,ƒvšfom­[*e].
´ediùedV®ue
, (*e)->
G‘Weight
()));

391 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++) {

392 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
*>(*
e
)->
S‘T¬g‘
(0,
T¬g‘
(
evšfom­
[*e]));

399 
DoubË_t
 
	gTMVA
::
L—¡Squ¬esLossFunùiÚBDT
::
	$T¬g‘
(
LossFunùiÚEv’tInfo
& 
e
){

400 
DoubË_t
 
»sidu®
 = 
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
;

403  
»sidu®
;

404 
	}
}

410 
DoubË_t
 
	gTMVA
::
L—¡Squ¬esLossFunùiÚBDT
::
F™
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

412 
DoubË_t
 
sumOfWeights
 = 0;

413 
DoubË_t
 
	gweigh‹dResidu®Sum
 = 0;

414 
UIÁ_t
 
	gj
=0;j<
	gevs
.
size
();j++){

415 
	gsumOfWeights
 +ğ
evs
[
j
].
weight
;

416 
DoubË_t
 
	g»sidu®
 = 
evs
[
j
].
ŒueV®ue
 -ƒvs[j].
´ediùedV®ue
;

417 
	gweigh‹dResidu®Sum
 +ğ
evs
[
j
].
weight
*
»sidu®
;

419 
DoubË_t
 
	gweigh‹dM—n
 = 
weigh‹dResidu®Sum
/
sumOfWeights
;

422  
	gweigh‹dM—n
;

437 
DoubË_t
 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚ
::
	$C®cuÏ‹Loss
(
LossFunùiÚEv’tInfo
& 
e
){

438 
DoubË_t
 
»sidu®
 = 
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
;

439  
e
.
weight
*
TM©h
::
	`Abs
(
»sidu®
);

440 
	}
}

445 
DoubË_t
 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚ
::
C®cuÏ‹N‘Loss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

447 
DoubË_t
 
Ãoss
 = 0;

448 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++)

449 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

450  
	gÃoss
;

456 
DoubË_t
 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚ
::
C®cuÏ‹M—nLoss
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

457 
DoubË_t
 
sumOfWeights
 = 0;

458 
DoubË_t
 
	gÃoss
 = 0;

459 
UIÁ_t
 
	gi
=0; i<
	gevs
.
size
(); i++){

460 
	gsumOfWeights
+=
evs
[
i
].
weight
;

461 
	gÃoss
+=
C®cuÏ‹Loss
(
evs
[
i
]);

463  
	gÃoss
/
	gsumOfWeights
;

476 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚBDT
::
In™
(
¡d
::
m­
<cÚ¡ 
TMVA
::
Ev’t
*, 
LossFunùiÚEv’tInfo
>& 
evšfom­
, std::
veùÜ
<>& 
boo¡Weights
){

479 
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
evšfovec
;

480 autØ&
	ge
: 
evšfom­
){

481 
evšfovec
.
push_back
(
LossFunùiÚEv’tInfo
(
e
.
£cÚd
.
ŒueV®ue
,ƒ.£cÚd.
´ediùedV®ue
,ƒ.
fœ¡
->
G‘Weight
()));

484 
DoubË_t
 
	gweigh‹dMedŸn
 = 
F™
(
evšfovec
);

487 
	gboo¡Weights
.
push_back
(
weigh‹dMedŸn
);

488 autØ&
	ge
: 
evšfom­
 ) {

490 
e
.
£cÚd
.
´ediùedV®ue
 +ğ
weigh‹dMedŸn
;

497 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚBDT
::
S‘T¬g‘s
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
evs
, std::
m­
< cÚ¡ TMVA::Ev’t*, 
LossFunùiÚEv’tInfo
 >& 
evšfom­
){

499 
	g¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
> 
ev’tvec
;

500 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++){

501 
	gev’tvec
.
push_back
(
LossFunùiÚEv’tInfo
(
evšfom­
[*
e
].
ŒueV®ue
,ƒvšfom­[*e].
´ediùedV®ue
, (*e)->
G‘Weight
()));

504 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
evs
.
begš
(); 
	ge
!óvs.
’d
();e++) {

505 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
*>(*
e
)->
S‘T¬g‘
(0,
T¬g‘
(
evšfom­
[*e]));

512 
DoubË_t
 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚBDT
::
	$T¬g‘
(
LossFunùiÚEv’tInfo
& 
e
){

514 
DoubË_t
 
»sidu®
 = 
e
.
ŒueV®ue
 -ƒ.
´ediùedV®ue
;

516  (
»sidu®
<0?-1.0:1.0);

517 
	}
}

523 
DoubË_t
 
	gTMVA
::
AbsŞu‹DevŸtiÚLossFunùiÚBDT
::
F™
(
¡d
::
veùÜ
<
LossFunùiÚEv’tInfo
>& 
evs
){

528 
¡d
::
sÜt
(
evs
.
begš
(),ƒvs.
’d
(), [](
LossFunùiÚEv’tInfo
 
a
, LossFunùiÚEv’tInfØ
b
){

529  (
a
.
ŒueV®ue
-a.
´ediùedV®ue
è< (
b
.trueValue-b.predictedValue); });

532 
DoubË_t
 
	gsumOfWeights
 = 0;

533 
UIÁ_t
 
	gj
=0; j<
	gevs
.
size
(); j++)

534 
	gsumOfWeights
+=
evs
[
j
].
weight
;

537 
UIÁ_t
 
	gi
 = 0;

538 
DoubË_t
 
	g‹mp
 = 0.0;

539 
	gi
<
	gevs
.
size
(è&& 
	g‹mp
 <ğ
sumOfWeights
*0.5){

540 
‹mp
 +ğ
evs
[
i
].
weight
;

541 
	gi
++;

543 ià(
	gi
 >ğ
evs
.
size
())  0.;

546  
	gevs
[
i
].
	gŒueV®ue
-evs[i].
	g´ediùedV®ue
;

	@src/MCFitter.cxx

35 
	~"TMVA/MCF™‹r.h
"

37 
	~"TMVA/CÚfigu¿bË.h
"

38 
	~"TMVA/F™‹rBa£.h
"

39 
	~"TMVA/G’‘icRªge.h
"

40 
	~"TMVA/IÁ”v®.h
"

41 
	~"TMVA/MsgLogg”.h
"

42 
	~"TMVA/Tim”.h
"

43 
	~"TMVA/Ty³s.h
"

44 
	~"TRªdom3.h
"

46 
CÏssImp
(
TMVA
::
MCF™‹r
);

51 
	gTMVA
::
MCF™‹r
::MCF™‹rĞ
IF™‹rT¬g‘
& 
rg‘
,

52 cÚ¡ 
TSŒšg
& 
Çme
,

53 cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*>& 
¿nges
,

54 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

55 : 
TMVA
::
F™‹rBa£
Ğ
rg‘
, 
Çme
, 
¿nges
, 
theO±iÚ
 ),

56 
fSam¶es
( 0 ),

57 
fSigma
 ( 1 ),

58 
	$fS“d
 ( 0 )

60 
	`Deş¬eO±iÚs
();

61 
	`P¬£O±iÚs
();

62 
	}
}

67 
	gTMVA
::
MCF™‹r
::
	$Deş¬eO±iÚs
()

69 
	`Deş¬eO±iÚRef
Ğ
fSam¶es
 = 100000, "SampleSize", "Number of Monte Carloƒvents inoy sample" );

70 
	`Deş¬eO±iÚRef
Ğ
fSigma
 = -1.0, "Sigma",

72 
	`Deş¬eO±iÚRef
Ğ
fS“d
 = 100, "Seed", "Seed forhe„andom generator (0akes„andom seeds)" );

73 
	}
}

78 
	gTMVA
::
MCF™‹r
::
	$S‘P¬am‘”s
Ğ
IÁ_t
 
§m¶es
 )

80 
fSam¶es
 = 
§m¶es
;

81 
	}
}

86 
DoubË_t
 
	gTMVA
::
MCF™‹r
::
Run
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

88 
Log
(è<< 
kHEADER
 << "<MCF™‹r> Sam¶šg,…Ëa£ b·t›Á ..." << 
Endl
;

91 ià((
	gIÁ_t
)
	g·rs
.
size
(è!ğ
G‘N·rs
())

92 
Log
(è<< 
kFATAL
 << "<Run> Mismatch in‚umber of…arameters: "

93 << 
G‘N·rs
(è<< " !ğ" << 
·rs
.
size
(è<< 
Endl
;

96 
Tim”
 
tim”
Ğ
fSam¶es
, 
G‘Name
() );

97 ià(
	gfIPyMaxI‹r
è*fIPyMaxI‹¸ğ
fSam¶es
;

99 
	g¡d
::
veùÜ
<
DoubË_t
> 
·¿m‘”s
;

100 
	g¡d
::
veùÜ
<
DoubË_t
> 
be¡P¬am‘”s
;

102 
TRªdom3
*
	gºd
 = 
Ãw
 TRªdom3Ğ
fS“d
 );

103 
	gºd
->
UnifÜm
(0.,1.);

105 
	g¡d
::
veùÜ
<
TMVA
::
G’‘icRªge
*> 
ºdRªges
;

108 
	g¡d
::
veùÜ
< 
TMVA
::
IÁ”v®
* >::
cÚ¡_™”©Ü
 
rIt
;

109 
DoubË_t
 
	gv®
;

110 
	grIt
 = 
fRªges
.
begš
();„It<
	gfRªges
.
’d
();„It++) {

111 
	gºdRªges
.
push_back
Ğ
Ãw
 
TMVA
::
G’‘icRªge
Ğ
ºd
, (*
rIt
) ) );

112 
	gv®
 = 
ºdRªges
.
back
()->
Rªdom
();

113 
	g·¿m‘”s
.
push_back
Ğ
v®
 );

114 
	gbe¡P¬am‘”s
.
push_back
Ğ
v®
 );

117 
	g¡d
::
veùÜ
<
DoubË_t
>::
™”©Ü
 
·rIt
;

118 
	g¡d
::
veùÜ
<
DoubË_t
>::
™”©Ü
 
·rBe¡It
;

120 
DoubË_t
 
	ge¡im©Ü
 = 0;

121 
DoubË_t
 
	gbe¡F™
 = 0;

124 
IÁ_t
 
	g§m¶e
 = 0; sam¶< 
	gfSam¶es
; sample++) {

125 ià(
	gfIPyCu¼’tI‹r
è*fIPyCu¼’tI‹¸ğ
§m¶e
;

126 ià(
	gfEx™FromT¿ššg
 && *fExitFromTraining) ;

129 
	g·rIt
 = 
·¿m‘”s
.
begš
();

130 ià(
	gfSigma
 > 0.0) {

131 
	g·rBe¡It
 = 
be¡P¬am‘”s
.
begš
();

132 
	g¡d
::
veùÜ
<
TMVA
::
G’‘icRªge
*>::
™”©Ü
 
ºdIt
 = 
ºdRªges
.
begš
(); 
	gºdIt
<
	gºdRªges
.
’d
();„ndIt++) {

133 (*
	g·rIt
èğ(*
ºdIt
)->
Rªdom
Ğ
kTRUE
, (*
·rBe¡It
), 
fSigma
 );

134 
	g·rIt
++;

135 
	g·rBe¡It
++;

139 
	g¡d
::
veùÜ
<
TMVA
::
G’‘icRªge
*>::
™”©Ü
 
ºdIt
 = 
ºdRªges
.
begš
(); 
	gºdIt
<
	gºdRªges
.
’d
();„ndIt++) {

140 (*
	g·rIt
èğ(*
ºdIt
)->
Rªdom
();

141 
	g·rIt
++;

146 
	ge¡im©Ü
 = 
E¡im©ÜFunùiÚ
Ğ
·¿m‘”s
 );

149 ià(
	ge¡im©Ü
 < 
	gbe¡F™
 || 
	g§m¶e
==0) {

150 
be¡F™
 = 
e¡im©Ü
;

151 
	gbe¡P¬am‘”s
.
sw­
Ğ
·¿m‘”s
 );

155 ià((
	gfSam¶es
<100è|| 
	g§m¶e
%
IÁ_t
(
fSam¶es
/100.0è=ğ0è
tim”
.
D¿wProg»ssB¬
Ğ
§m¶e
 );

157 
	g·rs
.
sw­
Ğ
be¡P¬am‘”s
 );

160 
Log
(è<< 
	gkINFO
 << "EÏp£dime: " << 
	gtim”
.
G‘EÏp£dTime
()

161 << " " << 
	gEndl
;

163  
	gbe¡F™
;

	@src/MethodANNBase.cxx

41 
	~"TMVA/M‘hodBa£.h
"

43 
	~"TMVA/CÚfigu¿bË.h
"

44 
	~"TMVA/D©aS‘Info.h
"

45 
	~"TMVA/M‘hodANNBa£.h
"

46 
	~"TMVA/MsgLogg”.h
"

47 
	~"TMVA/TNeurÚ.h
"

48 
	~"TMVA/TSyÇp£.h
"

49 
	~"TMVA/TAùiv©iÚChoo£r.h
"

50 
	~"TMVA/TAùiv©iÚTªh.h
"

51 
	~"TMVA/Ty³s.h
"

52 
	~"TMVA/ToŞs.h
"

53 
	~"TMVA/TNeurÚIÅutChoo£r.h
"

54 
	~"TMVA/Rªkšg.h
"

55 
	~"TMVA/V”siÚ.h
"

57 
	~"TSŒšg.h
"

58 
	~"TT»e.h
"

59 
	~"TDœeùÜy.h
"

60 
	~"Rio¡»am.h
"

61 
	~"TRªdom3.h
"

62 
	~"TH2F.h
"

63 
	~"TH1.h
"

64 
	~"TM©h.h
"

65 
	~"TM©rixT.h
"

67 
	~<veùÜ
>

68 
	~<c¡dlib
>

69 
	~<¡dexû±
>

70 #ià
__ılu¥lus
 > 199711L

71 
	~<©omic
>

75 
usšg
 
	g¡d
::
veùÜ
;

77 
CÏssImp
(
TMVA
::
M‘hodANNBa£
);

85 
	gTMVA
::
M‘hodANNBa£
::
	$M‘hodANNBa£
ĞcÚ¡ 
TSŒšg
& 
jobName
,

86 
Ty³s
::
EMVA
 
m‘hodTy³
,

87 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

88 
D©aS‘Info
& 
theD©a
,

89 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

90 : 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
m‘hodTy³
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

91 , 
	`fE¡im©Ü
(
kMSE
)

92 , 
	`fU£ReguÏtÜ
(
kFALSE
)

93 , 
	$fRªdomS“d
(0)

95 
	`In™ANNBa£
();

97 
	`Deş¬eO±iÚs
();

98 
	}
}

103 
	gTMVA
::
M‘hodANNBa£
::
	$M‘hodANNBa£
Ğ
Ty³s
::
EMVA
 
m‘hodTy³
,

104 
D©aS‘Info
& 
theD©a
,

105 cÚ¡ 
TSŒšg
& 
theWeightFe
)

106 : 
TMVA
::
	`M‘hodBa£
Ğ
m‘hodTy³
, 
theD©a
, 
theWeightFe
)

107 , 
	`fE¡im©Ü
(
kMSE
)

108 , 
	`fU£ReguÏtÜ
(
kFALSE
)

109 , 
	$fRªdomS“d
(0)

111 
	`In™ANNBa£
();

113 
	`Deş¬eO±iÚs
();

114 
	}
}

128 
	gTMVA
::
M‘hodANNBa£
::
	$Deş¬eO±iÚs
()

130 
	`Deş¬eO±iÚRef
Ğ
fNcyşes
 = 500, "NCycles", "Number ofraining cycles" );

131 
	`Deş¬eO±iÚRef
Ğ
fLay”S³c
 = "N,N-1", "HiddenLayers", "Specification of hidden†ayer‡rchitecture" );

132 
	`Deş¬eO±iÚRef
Ğ
fNeurÚTy³
 = "sigmoid", "NeuronType", "Neuron‡ctivation functionype" );

133 
	`Deş¬eO±iÚRef
Ğ
fRªdomS“d
 = 1, "RandomSeed", "Random seed for initial synapse weights (0 means unique seed forƒach„un; default value '1')");

135 
	`Deş¬eO±iÚRef
(
fE¡im©ÜS
="MSE", "EstimatorType",

137 
	`AddP»DefV®
(
	`TSŒšg
("MSE"));

138 
	`AddP»DefV®
(
	`TSŒšg
("CE"));

141 
TAùiv©iÚChoo£r
 
aChoo£r
;

142 
¡d
::
veùÜ
<
TSŒšg
>* 
Çmes
 = 
aChoo£r
.
	`G‘AÎAùiv©iÚNames
();

143 
IÁ_t
 
nTy³s
 = 
Çmes
->
	`size
();

144 
IÁ_t
 
i
 = 0; i < 
nTy³s
; i++)

145 
	`AddP»DefV®
(
Çmes
->
	`©
(
i
));

146 
d–‘e
 
Çmes
;

148 
	`Deş¬eO±iÚRef
(
fNeurÚIÅutTy³
="sum", "NeuronInputType","Neuron input functionype");

149 
TNeurÚIÅutChoo£r
 
iChoo£r
;

150 
Çmes
 = 
iChoo£r
.
	`G‘AÎNeurÚIÅutNames
();

151 
nTy³s
 = 
Çmes
->
	`size
();

152 
IÁ_t
 
i
 = 0; i < 
nTy³s
; i++è
	`AddP»DefV®
(
Çmes
->
	`©
(i));

153 
d–‘e
 
Çmes
;

154 
	}
}

160 
	gTMVA
::
M‘hodANNBa£
::
	$ProûssO±iÚs
()

162 iàĞ
	`DoReg»ssiÚ
(è|| 
	`DoMuÉişass
()è
fE¡im©ÜS
 = "MSE";

163 
fE¡im©ÜS
 = "CE" ;

164 ià(
fE¡im©ÜS
 =ğ"MSE" ) 
fE¡im©Ü
 = 
kMSE
;

165 ià(
fE¡im©ÜS
 =ğ"CE"è
fE¡im©Ü
 = 
kCE
;

166 
¡d
::
veùÜ
<
IÁ_t
>* 
Ïyout
 = 
	`P¬£LayoutSŒšg
(
fLay”S³c
);

167 
	`BudN‘wÜk
(
Ïyout
);

168 
d–‘e
 
Ïyout
;

169 
	}
}

175 
	g¡d
::
veùÜ
<
IÁ_t
>* 
TMVA
::
M‘hodANNBa£
::
	$P¬£LayoutSŒšg
(
TSŒšg
 
Ïy”S³c
)

177 
¡d
::
veùÜ
<
IÁ_t
>* 
Ïyout
 = 
Ãw
 std::vector<Int_t>();

178 
Ïyout
->
	`push_back
((
IÁ_t
)
	`G‘Nv¬
());

179 
Ïy”S³c
.
	`L’gth
()>0) {

180 
TSŒšg
 
sToAdd
="";

181 ià(
Ïy”S³c
.
	`Fœ¡
(',')<0) {

182 
sToAdd
 = 
Ïy”S³c
;

183 
Ïy”S³c
 = "";

186 
sToAdd
 = 
	`Ïy”S³c
(0,
Ïy”S³c
.
	`Fœ¡
(','));

187 
Ïy”S³c
 = 
	`Ïy”S³c
Öay”S³c.
	`Fœ¡
(',')+1,Ïy”S³c.
	`L’gth
());

189 
nNodes
 = 0;

190 ià(
sToAdd
.
	`BegšsW™h
("n"è|| sToAdd.BegšsW™h("N")è{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`G‘Nv¬
(); }

191 
nNodes
 +ğ
	`©oi
(
sToAdd
);

192 
Ïyout
->
	`push_back
(
nNodes
);

194 ifĞ
	`DoReg»ssiÚ
() )

195 
Ïyout
->
	`push_back
Ğ
	`D©aInfo
().
	`G‘NT¬g‘s
() );

196 ifĞ
	`DoMuÉişass
() )

197 
Ïyout
->
	`push_back
Ğ
	`D©aInfo
().
	`G‘NCÏs£s
() );

199 
Ïyout
->
	`push_back
(1);

201 
n
 = 0;

202  
¡d
::
veùÜ
<
IÁ_t
>::
™”©Ü
 
™
 = 
Ïyout
->
	`begš
(); iˆ!ğÏyout->
	`’d
(); it++ ){

203 
n
++;

206  
Ïyout
;

207 
	}
}

212 
	gTMVA
::
M‘hodANNBa£
::
	$In™ANNBa£
()

214 
fN‘wÜk
 = 
NULL
;

215 
äg’
 = 
NULL
;

216 
fAùiv©iÚ
 = 
NULL
;

217 
fOuut
 = 
NULL
;

218 
fId’t™y
 = 
NULL
;

219 
fIÅutC®cuÏtÜ
 = 
NULL
;

220 
fSyÇp£s
 = 
NULL
;

221 
fE¡im©ÜHi¡T¿š
 = 
NULL
;

222 
fE¡im©ÜHi¡Te¡
 = 
NULL
;

225 
fEpochMÚHi¡S
.
	`ş—r
();

226 
fEpochMÚHi¡B
.
	`ş—r
();

227 
fEpochMÚHi¡W
.
	`ş—r
();

230 
fIÅutLay”
 = 
NULL
;

231 
fOuutNeurÚs
.
	`ş—r
();

233 
äg’
 = 
Ãw
 
	`TRªdom3
(
fRªdomS“d
);

235 
fSyÇp£s
 = 
Ãw
 
	`TObjA¼ay
();

236 
	}
}

241 
	gTMVA
::
M‘hodANNBa£
::~
	$M‘hodANNBa£
()

243 
	`D–‘eN‘wÜk
();

244 
	}
}

249 
	gTMVA
::
M‘hodANNBa£
::
	$D–‘eN‘wÜk
()

251 ià(
fN‘wÜk
 !ğ
NULL
) {

252 
TObjA¼ay
 *
Ïy”
;

253 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

254 
IÁ_t
 
i
 = 0; i < 
numLay”s
; i++) {

255 
Ïy”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

256 
	`D–‘eN‘wÜkLay”
(
Ïy”
);

258 
d–‘e
 
fN‘wÜk
;

261 ià(
äg’
 !ğ
NULL
è
d–‘e
 frgen;

262 ià(
fAùiv©iÚ
 !ğ
NULL
è
d–‘e
 fActivation;

263 ià(
fOuut
 !ğ
NULL
è
d–‘e
 fOutput;

264 ià(
fId’t™y
 !ğ
NULL
è
d–‘e
 fIdentity;

265 ià(
fIÅutC®cuÏtÜ
 !ğ
NULL
è
d–‘e
 fInputCalculator;

266 ià(
fSyÇp£s
 !ğ
NULL
è
d–‘e
 fSynapses;

268 
fN‘wÜk
 = 
NULL
;

269 
äg’
 = 
NULL
;

270 
fAùiv©iÚ
 = 
NULL
;

271 
fOuut
 = 
NULL
;

272 
fId’t™y
 = 
NULL
;

273 
fIÅutC®cuÏtÜ
 = 
NULL
;

274 
fSyÇp£s
 = 
NULL
;

275 
	}
}

280 
	gTMVA
::
M‘hodANNBa£
::
	$D–‘eN‘wÜkLay”
Ğ
TObjA¼ay
*& 
Ïy”
 )

282 
TNeurÚ
* 
ÃurÚ
;

283 
IÁ_t
 
numNeurÚs
 = 
Ïy”
->
	`G‘EÁr›sFa¡
();

284 
IÁ_t
 
i
 = 0; i < 
numNeurÚs
; i++) {

285 
ÃurÚ
 = (
TNeurÚ
*)
Ïy”
->
	`At
(
i
);

286 
ÃurÚ
->
	`D–‘eP»Lšks
();

287 
d–‘e
 
ÃurÚ
;

289 
d–‘e
 
Ïy”
;

290 
	}
}

296 
	gTMVA
::
M‘hodANNBa£
::
BudN‘wÜk
Ğ
¡d
::
veùÜ
<
IÁ_t
>* 
Ïyout
, std::veùÜ<
DoubË_t
>* 
weights
, 
BoŞ_t
 
äomFe
 )

298 ià(
	gfE¡im©ÜS
 =ğ"MSE"è
fE¡im©Ü
 = 
kMSE
;

299 ià(
	gfE¡im©ÜS
 =ğ"CE"è
fE¡im©Ü
 = 
kCE
;

300 
Log
()<<
	gkWARNING
<<"fE¡im©Ü="<<
	gfE¡im©Ü
<<"\tfE¡im©ÜS="<<
	gfE¡im©ÜS
<<
	gEndl
;

301 ià(
	gfE¡im©Ü
!=
kMSE
 && 
fE¡im©Ü
!=
kCE
è
Log
()<<
kWARNING
<<"E¡im©Üy³ un¥ecif›d \t"<<
Endl
;

304 
Log
(è<< 
	gkHEADER
 << "Budšg N‘wÜk. " << 
	gEndl
;

306 
D–‘eN‘wÜk
();

307 
In™ANNBa£
();

310 
TAùiv©iÚChoo£r
 
	gaChoo£r
;

311 
	gfAùiv©iÚ
 = 
aChoo£r
.
C»©eAùiv©iÚ
(
fNeurÚTy³
);

312 
	gfId’t™y
 = 
aChoo£r
.
C»©eAùiv©iÚ
("linear");

313 ià(
	gfE¡im©Ü
==
kMSE
è
fOuut
 = 
aChoo£r
.
C»©eAùiv©iÚ
("linear");

314 ià(
	gfE¡im©Ü
==
kCE
è
fOuut
 = 
aChoo£r
.
C»©eAùiv©iÚ
("sigmoid");

315 
TNeurÚIÅutChoo£r
 
	giChoo£r
;

316 
	gfIÅutC®cuÏtÜ
 = 
iChoo£r
.
C»©eNeurÚIÅut
(
fNeurÚIÅutTy³
);

318 
	gfN‘wÜk
 = 
Ãw
 
TObjA¼ay
();

319 
	gfReguÏtÜIdx
.
ş—r
();

320 
	gfReguÏtÜs
.
ş—r
();

321 
BudLay”s
Ğ
Ïyout
, 
äomFe
 );

324 
	gfIÅutLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
At
(0);

325 
TObjA¼ay
* 
	gouutLay”
 = (TObjA¼ay*)
fN‘wÜk
->
At
(fN‘wÜk->
G‘EÁr›sFa¡
()-1);

326 
	gfOuutNeurÚs
.
ş—r
();

327 
IÁ_t
 
	gi
 = 0; i < 
	gouutLay”
->
G‘EÁr›s
(); i++) {

328 
	gfOuutNeurÚs
.
push_back
Ğ(
TNeurÚ
*)
ouutLay”
->
At
(
i
) );

331 ià(
	gweights
 =ğ
NULL
è
In™Weights
();

332 
FÜûWeights
(
weights
);

338 
	gTMVA
::
M‘hodANNBa£
::
BudLay”s
Ğ
¡d
::
veùÜ
<
IÁ_t
>* 
Ïyout
, 
BoŞ_t
 
äomFe
 )

340 
TObjA¼ay
* 
	gcurLay”
;

341 
TObjA¼ay
* 
	g´evLay”
 = 
NULL
;

343 
IÁ_t
 
	gnumLay”s
 = 
Ïyout
->
size
();

345 
IÁ_t
 
	gi
 = 0; i < 
	gnumLay”s
; i++) {

346 
	gcurLay”
 = 
Ãw
 
TObjA¼ay
();

347 
BudLay”
(
Ïyout
->
©
(
i
), 
curLay”
, 
´evLay”
, i, 
numLay”s
, 
äomFe
);

348 
	g´evLay”
 = 
curLay”
;

349 
	gfN‘wÜk
->
Add
(
curLay”
);

353 
IÁ_t
 
	gi
 = 0; i < 
	gnumLay”s
; i++) {

354 
TObjA¼ay
* 
	gÏy”
 = (TObjA¼ay*)
fN‘wÜk
->
At
(
i
);

355 
IÁ_t
 
	gnumNeurÚs
 = 
Ïy”
->
G‘EÁr›sFa¡
();

356 ià(
	gi
!=0 && 
i
!=
numLay”s
-1è
fReguÏtÜs
.
push_back
(0.);

357 
IÁ_t
 
	gj
 = 0; j < 
	gnumNeurÚs
; j++) {

358 ià(
	gi
==0è
fReguÏtÜs
.
push_back
(0.);

359 
TNeurÚ
* 
	gÃurÚ
 = (TNeurÚ*)
Ïy”
->
At
(
j
);

360 
IÁ_t
 
	gnumSyÇp£s
 = 
ÃurÚ
->
NumPo¡Lšks
();

361 
IÁ_t
 
	gk
 = 0; k < 
	gnumSyÇp£s
; k++) {

362 
TSyÇp£
* 
	gsyÇp£
 = 
ÃurÚ
->
Po¡LškAt
(
k
);

363 
	gfSyÇp£s
->
Add
(
syÇp£
);

364 
	gfReguÏtÜIdx
.
push_back
(
fReguÏtÜs
.
size
()-1);

374 
	gTMVA
::
M‘hodANNBa£
::
	$BudLay”
Ğ
IÁ_t
 
numNeurÚs
, 
TObjA¼ay
* 
curLay”
,

375 
TObjA¼ay
* 
´evLay”
, 
IÁ_t
 
Ïy”Index
,

376 
IÁ_t
 
numLay”s
, 
BoŞ_t
 
äomFe
 )

378 
TNeurÚ
* 
ÃurÚ
;

379 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

380 ià(
äomFe
 && (
Ïy”Index
 !ğ
numLay”s
-1è&& (
j
==
numNeurÚs
-1)){

381 
ÃurÚ
 = 
Ãw
 
	`TNeurÚ
();

382 
ÃurÚ
->
	`S‘Aùiv©iÚEqn
(
fId’t™y
);

383 
ÃurÚ
->
	`S‘BŸsNeurÚ
();

384 
ÃurÚ
->
	`FÜûV®ue
(1.0);

385 
curLay”
->
	`Add
(
ÃurÚ
);

388 
ÃurÚ
 = 
Ãw
 
	`TNeurÚ
();

389 
ÃurÚ
->
	`S‘IÅutC®cuÏtÜ
(
fIÅutC®cuÏtÜ
);

392 ià(
Ïy”Index
 == 0) {

393 
ÃurÚ
->
	`S‘Aùiv©iÚEqn
(
fId’t™y
);

394 
ÃurÚ
->
	`S‘IÅutNeurÚ
();

398 ià(
Ïy”Index
 =ğ
numLay”s
-1) {

399 
ÃurÚ
->
	`S‘OuutNeurÚ
();

400 
ÃurÚ
->
	`S‘Aùiv©iÚEqn
(
fOuut
);

403 
ÃurÚ
->
	`S‘Aùiv©iÚEqn
(
fAùiv©iÚ
);

404 
	`AddP»Lšks
(
ÃurÚ
, 
´evLay”
);

407 
curLay”
->
	`Add
(
ÃurÚ
);

412 if(!
äomFe
){

413 ià(
Ïy”Index
 !ğ
numLay”s
-1) {

414 
ÃurÚ
 = 
Ãw
 
	`TNeurÚ
();

415 
ÃurÚ
->
	`S‘Aùiv©iÚEqn
(
fId’t™y
);

416 
ÃurÚ
->
	`S‘BŸsNeurÚ
();

417 
ÃurÚ
->
	`FÜûV®ue
(1.0);

418 
curLay”
->
	`Add
(
ÃurÚ
);

421 
	}
}

426 
	gTMVA
::
M‘hodANNBa£
::
	$AddP»Lšks
(
TNeurÚ
* 
ÃurÚ
, 
TObjA¼ay
* 
´evLay”
)

428 
TSyÇp£
* 
syÇp£
;

429 
numNeurÚs
 = 
´evLay”
->
	`G‘EÁr›sFa¡
();

430 
TNeurÚ
* 
´eNeurÚ
;

432 
IÁ_t
 
i
 = 0; i < 
numNeurÚs
; i++) {

433 
´eNeurÚ
 = (
TNeurÚ
*)
´evLay”
->
	`At
(
i
);

434 
syÇp£
 = 
Ãw
 
	`TSyÇp£
();

435 
syÇp£
->
	`S‘P»NeurÚ
(
´eNeurÚ
);

436 
syÇp£
->
	`S‘Po¡NeurÚ
(
ÃurÚ
);

437 
´eNeurÚ
->
	`AddPo¡Lšk
(
syÇp£
);

438 
ÃurÚ
->
	`AddP»Lšk
(
syÇp£
);

440 
	}
}

445 
	gTMVA
::
M‘hodANNBa£
::
	$In™Weights
()

447 
	`PrštMes§ge
("Initializing weights");

450 
IÁ_t
 
numSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

451 
TSyÇp£
* 
syÇp£
;

452 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++) {

453 
syÇp£
 = (
TSyÇp£
*)
fSyÇp£s
->
	`At
(
i
);

454 
syÇp£
->
	`S‘Weight
(4.0*
äg’
->
	`Rndm
() - 2.0);

456 
	}
}

461 
	gTMVA
::
M‘hodANNBa£
::
FÜûWeights
(
¡d
::
veùÜ
<
DoubË_t
>* 
weights
)

463 
PrštMes§ge
("Forcing weights");

465 
IÁ_t
 
	gnumSyÇp£s
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

466 
TSyÇp£
* 
	gsyÇp£
;

467 
IÁ_t
 
	gi
 = 0; i < 
	gnumSyÇp£s
; i++) {

468 
	gsyÇp£
 = (
TSyÇp£
*)
fSyÇp£s
->
At
(
i
);

469 
	gsyÇp£
->
S‘Weight
(
weights
->
©
(
i
));

477 
	gTMVA
::
M‘hodANNBa£
::
	$FÜûN‘wÜkIÅuts
ĞcÚ¡ 
Ev’t
* 
ev
, 
IÁ_t
 
ignÜeIndex
)

479 
DoubË_t
 
x
;

480 
TNeurÚ
* 
ÃurÚ
;

483 
UIÁ_t
 
j
 = 0; j < 
	`G‘Nv¬
(); j++) {

485 
x
 = (
j
 !ğ(
UIÁ_t
)
ignÜeIndex
)?
ev
->
	`G‘V®ue
(j):0;

487 
ÃurÚ
 = 
	`G‘IÅutNeurÚ
(
j
);

488 
ÃurÚ
->
	`FÜûV®ue
(
x
);

490 
	}
}

495 
	gTMVA
::
M‘hodANNBa£
::
	$FÜûN‘wÜkC®cuÏtiÚs
()

497 
TObjA¼ay
* 
curLay”
;

498 
TNeurÚ
* 
ÃurÚ
;

499 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

500 
IÁ_t
 
numNeurÚs
;

502 
IÁ_t
 
i
 = 0; i < 
numLay”s
; i++) {

503 
curLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

504 
numNeurÚs
 = 
curLay”
->
	`G‘EÁr›sFa¡
();

506 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

507 
ÃurÚ
 = (
TNeurÚ
*è
curLay”
->
	`At
(
j
);

508 
ÃurÚ
->
	`C®cuÏ‹V®ue
();

509 
ÃurÚ
->
	`C®cuÏ‹Aùiv©iÚV®ue
();

513 
	}
}

518 
	gTMVA
::
M‘hodANNBa£
::
	$PrštMes§ge
(
TSŒšg
 
mes§ge
, 
BoŞ_t
 
fÜû
) const

520 ià(
	`V”bo£
(è|| 
	`Debug
(è|| 
fÜû
è
	`Log
(è<< 
kINFO
 << 
mes§ge
 << 
Endl
;

521 
	}
}

526 
	gTMVA
::
M‘hodANNBa£
::
	$Wa™FÜKeybßrd
()

528 
¡d
::
¡ršg
 
dummy
;

529 
	`Log
(è<< 
kINFO
 << "***Type‡nythingo continue (qo quit): ";

530 
¡d
::
	`g‘lše
(¡d::
cš
, 
dummy
);

531 ià(
dummy
 == "q" || dummy == "Q") {

532 
	`PrštMes§ge
( "quit" );

533 
d–‘e
 
this
;

534 
	`ex™
(0);

536 
	}
}

541 
	gTMVA
::
M‘hodANNBa£
::
	$PrštN‘wÜk
() const

543 ià(!
	`Debug
()) ;

545 
	`Log
(è<< 
kINFO
 << 
Endl
;

546 
	`PrštMes§ge
( "Printing‚etwork " );

547 
	`Log
(è<< 
kINFO
 << "-------------------------------------------------------------------" << 
Endl
;

549 
TObjA¼ay
* 
curLay”
;

550 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

552 
IÁ_t
 
i
 = 0; i < 
numLay”s
; i++) {

554 
curLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

555 
IÁ_t
 
numNeurÚs
 = 
curLay”
->
	`G‘EÁr›sFa¡
();

557 
	`Log
(è<< 
kINFO
 << "Lay” #" << 
i
 << " (" << 
numNeurÚs
 << "‚eurÚs):" << 
Endl
;

558 
	`PrštLay”
Ğ
curLay”
 );

560 
	}
}

565 
	gTMVA
::
M‘hodANNBa£
::
	$PrštLay”
(
TObjA¼ay
* 
Ïy”
) const

567 
IÁ_t
 
numNeurÚs
 = 
Ïy”
->
	`G‘EÁr›sFa¡
();

568 
TNeurÚ
* 
ÃurÚ
;

570 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

571 
ÃurÚ
 = (
TNeurÚ
*è
Ïy”
->
	`At
(
j
);

572 
	`Log
(è<< 
kINFO
 << "\tNeurÚ #" << 
j
 << " (LšksIn: " << 
ÃurÚ
->
	`NumP»Lšks
()

573 << " , LšksOut: " << 
ÃurÚ
->
	`NumPo¡Lšks
(è<< ")" << 
Endl
;

574 
	`PrštNeurÚ
Ğ
ÃurÚ
 );

576 
	}
}

581 
	gTMVA
::
M‘hodANNBa£
::
	$PrštNeurÚ
(
TNeurÚ
* 
ÃurÚ
) const

583 
	`Log
(è<< 
kINFO


584 << "\t\tV®ue:\t" << 
ÃurÚ
->
	`G‘V®ue
()

585 << "\t\tAùiv©iÚ: " << 
ÃurÚ
->
	`G‘Aùiv©iÚV®ue
()

586 << "\t\tD–: " << 
ÃurÚ
->
	`G‘D–
(è<< 
Endl
;

587 
	`Log
(è<< 
kINFO
 << "\t\tActivationEquation:\t";

588 
ÃurÚ
->
	`PrštAùiv©iÚEqn
();

589 
	`Log
(è<< 
kINFO
 << "\t\tLšksIn:" << 
Endl
;

590 
ÃurÚ
->
	`PrštP»Lšks
();

591 
	`Log
(è<< 
kINFO
 << "\t\tLšksOut:" << 
Endl
;

592 
ÃurÚ
->
	`PrštPo¡Lšks
();

593 
	}
}

598 
DoubË_t
 
	gTMVA
::
M‘hodANNBa£
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

600 
TNeurÚ
* 
ÃurÚ
;

602 
TObjA¼ay
* 
šputLay”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(0);

604 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
();

606 
UIÁ_t
 
i
 = 0; i < 
	`G‘Nv¬
(); i++) {

607 
ÃurÚ
 = (
TNeurÚ
*)
šputLay”
->
	`At
(
i
);

608 
ÃurÚ
->
	`FÜûV®ue
Ğ
ev
->
	`G‘V®ue
(
i
) );

610 
	`FÜûN‘wÜkC®cuÏtiÚs
();

613 
TObjA¼ay
* 
ouutLay”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
ĞfN‘wÜk->
	`G‘EÁr›sFa¡
()-1 );

614 
ÃurÚ
 = (
TNeurÚ
*)
ouutLay”
->
	`At
(0);

617 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

619  
ÃurÚ
->
	`G‘Aùiv©iÚV®ue
();

620 
	}
}

625 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
> &
TMVA
::
M‘hodANNBa£
::
	$G‘Reg»ssiÚV®ues
()

627 
TNeurÚ
* 
ÃurÚ
;

629 
TObjA¼ay
* 
šputLay”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(0);

631 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
();

633 
UIÁ_t
 
i
 = 0; i < 
	`G‘Nv¬
(); i++) {

634 
ÃurÚ
 = (
TNeurÚ
*)
šputLay”
->
	`At
(
i
);

635 
ÃurÚ
->
	`FÜûV®ue
Ğ
ev
->
	`G‘V®ue
(
i
) );

637 
	`FÜûN‘wÜkC®cuÏtiÚs
();

640 
TObjA¼ay
* 
ouutLay”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
ĞfN‘wÜk->
	`G‘EÁr›sFa¡
()-1 );

642 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
èfReg»ssiÚR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

643 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

645 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

646 
UIÁ_t
 
Ágts
 = 
ouutLay”
->
	`G‘EÁr›sFa¡
();

647 
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; itgt++) {

648 
evT
->
	`S‘T¬g‘
(
™gt
,((
TNeurÚ
*)
ouutLay”
->
	`At
(™gt))->
	`G‘Aùiv©iÚV®ue
());

651 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

652 
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; itgt++) {

653 
fReg»ssiÚR‘uºV®
->
	`push_back
Ğ
evT2
->
	`G‘T¬g‘
(
™gt
) );

656 
d–‘e
 
evT
;

658  *
fReg»ssiÚR‘uºV®
;

659 
	}
}

664 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
> &
TMVA
::
M‘hodANNBa£
::
	$G‘MuÉişassV®ues
()

666 
TNeurÚ
* 
ÃurÚ
;

668 
TObjA¼ay
* 
šputLay”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(0);

670 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
();

672 
UIÁ_t
 
i
 = 0; i < 
	`G‘Nv¬
(); i++) {

673 
ÃurÚ
 = (
TNeurÚ
*)
šputLay”
->
	`At
(
i
);

674 
ÃurÚ
->
	`FÜûV®ue
Ğ
ev
->
	`G‘V®ue
(
i
) );

676 
	`FÜûN‘wÜkC®cuÏtiÚs
();

680 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
èfMuÉişassR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

681 
fMuÉişassR‘uºV®
->
	`ş—r
();

682 
¡d
::
veùÜ
<
Flßt_t
> 
‹mp
;

684 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

685 
UIÁ_t
 
işs
 = 0; iş < 
nCÏs£s
; icls++) {

686 
‹mp
.
	`push_back
(
	`G‘OuutNeurÚ
Ğ
işs
 )->
	`G‘Aùiv©iÚV®ue
() );

689 
UIÁ_t
 
iCÏss
=0; iCÏss<
nCÏs£s
; iClass++){

690 
DoubË_t
 
nÜm
 = 0.0;

691 
UIÁ_t
 
j
=0;j<
nCÏs£s
;j++){

692 if(
iCÏss
!=
j
)

693 
nÜm
+=
	`exp
(
‹mp
[
j
]-‹mp[
iCÏss
]);

695 (*
fMuÉişassR‘uºV®
).
	`push_back
(1.0/(1.0+
nÜm
));

700  *
fMuÉişassR‘uºV®
;

701 
	}
}

707 
	gTMVA
::
M‘hodANNBa£
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

709 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

710 * 
wght
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
·»Á
, 0, "Weights");

711 * 
xmlLayout
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
wght
, 0, "Layout");

712 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
xmlLayout
, 0, "NLay”s", gToŞs().
	`SŒšgFromIÁ
(
fN‘wÜk
->
	`G‘EÁr›sFa¡
()) );

713 
TSŒšg
 
weights
 = "";

714 
IÁ_t
 
i
 = 0; i < 
numLay”s
; i++) {

715 
TObjA¼ay
* 
Ïy”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(
i
);

716 
IÁ_t
 
numNeurÚs
 = 
Ïy”
->
	`G‘EÁr›sFa¡
();

717 * 
Ïy”xml
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
xmlLayout
, 0, "Layer");

718 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Ïy”xml
, 0, "Index", gToŞs().
	`SŒšgFromIÁ
(
i
) );

719 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Ïy”xml
, 0, "NNeurÚs", gToŞs().
	`SŒšgFromIÁ
(
numNeurÚs
) );

720 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

721 
TNeurÚ
* 
ÃurÚ
 = (TNeurÚ*)
Ïy”
->
	`At
(
j
);

722 
IÁ_t
 
numSyÇp£s
 = 
ÃurÚ
->
	`NumPo¡Lšks
();

723 * 
ÃurÚxml
 = 
	`gToŞs
().
	`AddChd
(
Ïy”xml
, "Neuron");

724 
	`gToŞs
().
	`AddA‰r
(
ÃurÚxml
, "NSyÇp£s", gToŞs().
	`SŒšgFromIÁ
(
numSyÇp£s
) );

725 if(
numSyÇp£s
==0) ;

726 
¡d
::
¡ršg¡»am
 
	`s
("");

727 
s
.
	`´ecisiÚ
( 16 );

728 
IÁ_t
 
k
 = 0; k < 
numSyÇp£s
; k++) {

729 
TSyÇp£
* 
syÇp£
 = 
ÃurÚ
->
	`Po¡LškAt
(
k
);

730 
s
 << 
¡d
::
sc›Áific
 << 
syÇp£
->
	`G‘Weight
() << " ";

732 
	`gToŞs
().
	`AddRawLše
Ğ
ÃurÚxml
, 
s
.
	`¡r
().
	`c_¡r
() );

737 ifĞ
fInvHessŸn
.
	`G‘NcŞs
()>0 ){

738 * 
xmlInvHessŸn
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
wght
, 0, "InverseHessian");

741 
IÁ_t
 
nEËm’ts
 = 
fInvHessŸn
.
	`G‘NoEËm’ts
();

742 
IÁ_t
 
nRows
 = 
fInvHessŸn
.
	`G‘Nrows
();

743 
IÁ_t
 
nCŞs
 = 
fInvHessŸn
.
	`G‘NcŞs
();

744 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
xmlInvHessŸn
, 0, "NEËm’ts", gToŞs().
	`SŒšgFromIÁ
(
nEËm’ts
) );

745 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
xmlInvHessŸn
, 0, "NRows", gToŞs().
	`SŒšgFromIÁ
(
nRows
) );

746 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
xmlInvHessŸn
, 0, "NCŞs", gToŞs().
	`SŒšgFromIÁ
(
nCŞs
) );

749 
DoubË_t
* 
–em’ts
 = 
Ãw
 DoubË_t[
nEËm’ts
+10];

750 
fInvHessŸn
.
	`G‘M©rix2A¼ay
Ğ
–em’ts
 );

753 
IÁ_t
 
šdex
 = 0;

754  
IÁ_t
 
row
 = 0;„ow < 
nRows
; ++row ){

755 * 
xmlRow
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
xmlInvHessŸn
, 0, "Row");

756 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
xmlRow
, 0, "Index", gToŞs().
	`SŒšgFromIÁ
(
row
) );

759 
¡d
::
¡ršg¡»am
 
	`s
("");

760 
s
.
	`´ecisiÚ
( 16 );

761  
IÁ_t
 
cŞ
 = 0; cŞ < 
nCŞs
; ++col ){

762 
s
 << 
¡d
::
sc›Áific
 << (*(
–em’ts
+
šdex
)) << " ";

763 ++
šdex
;

765 
	`gToŞs
().
	`xmËngše
().
	`AddRawLše
Ğ
xmlRow
, 
s
.
	`¡r
().
	`c_¡r
() );

767 
d–‘e
[] 
–em’ts
;

769 
	}
}

775 
	gTMVA
::
M‘hodANNBa£
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

778 
BoŞ_t
 
äomFe
 = 
kTRUE
;

779 
¡d
::
veùÜ
<
IÁ_t
>* 
Ïyout
 = 
Ãw
 std::vector<Int_t>();

781 * 
xmlLayout
 = 
NULL
;

782 
xmlLayout
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
, "Layout");

783 ifĞ!
xmlLayout
 )

784 
xmlLayout
 = 
wghŠode
;

786 
UIÁ_t
 
nLay”s
;

787 
	`gToŞs
().
	`R—dA‰r
Ğ
xmlLayout
, "NLay”s", 
nLay”s
 );

788 
Ïyout
->
	`»size
Ğ
nLay”s
 );

790 * 
ch
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘Chd
(
xmlLayout
);

791 
UIÁ_t
 
šdex
;

792 
UIÁ_t
 
nNeurÚs
;

793 
ch
) {

794 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Index", 
šdex
 );

795 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "NNeurÚs", 
nNeurÚs
 );

796 
Ïyout
->
	`©
(
šdex
èğ
nNeurÚs
;

797 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

800 
	`BudN‘wÜk
Ğ
Ïyout
, 
NULL
, 
äomFe
 );

803 ià(
	`G‘T¿ššgTMVAV”siÚCode
(è< 
	`TMVA_VERSION
(4,2,1è&& 
fAùiv©iÚ
->
	`G‘Ex´essiÚ
().
	`CÚšs
("tanh")){

804 
TAùiv©iÚTªh
* 
aù
 = 
dyÇmic_ÿ¡
<TAùiv©iÚTªh*>Ğ
fAùiv©iÚ
 );

805 ià(
aù
èaù->
	`S‘Slow
();

809 
UIÁ_t
 
nSyn
;

810 
Flßt_t
 
weight
;

811 
ch
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘Chd
(
xmlLayout
);

812 
UIÁ_t
 
iLay”
 = 0;

813 
ch
) {

814 
TObjA¼ay
* 
Ïy”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(
iLay”
);

815 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Index", 
šdex
 );

816 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "NNeurÚs", 
nNeurÚs
 );

818 * 
nodeN
 = 
	`gToŞs
().
	`G‘Chd
(
ch
);

819 
UIÁ_t
 
iNeurÚ
 = 0;

820  
nodeN
 ){

821 
TNeurÚ
 *
ÃurÚ
 = (TNeurÚ*)
Ïy”
->
	`At
(
iNeurÚ
);

822 
	`gToŞs
().
	`R—dA‰r
Ğ
nodeN
, "NSyÇp£s", 
nSyn
 );

823 ifĞ
nSyn
 > 0 ){

824 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
nodeN
);

825 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

826 
UIÁ_t
 
iSyn
 = 0; iSyn<
nSyn
; iSyn++) {

828 
TSyÇp£
* 
syÇp£
 = 
ÃurÚ
->
	`Po¡LškAt
(
iSyn
);

829 
s
 >> 
weight
;

831 
syÇp£
->
	`S‘Weight
(
weight
);

834 
nodeN
 = 
	`gToŞs
().
	`G‘NextChd
(nodeN);

835 
iNeurÚ
++;

837 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

838 
iLay”
++;

841 
d–‘e
 
Ïyout
;

843 * 
xmlInvHessŸn
 = 
NULL
;

844 
xmlInvHessŸn
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
, "InverseHessian");

845 ifĞ!
xmlInvHessŸn
 )

849 
fU£ReguÏtÜ
 = 
kTRUE
;

851 
IÁ_t
 
nEËm’ts
 = 0;

852 
IÁ_t
 
nRows
 = 0;

853 
IÁ_t
 
nCŞs
 = 0;

854 
	`gToŞs
().
	`R—dA‰r
Ğ
xmlInvHessŸn
, "NEËm’ts", 
nEËm’ts
 );

855 
	`gToŞs
().
	`R—dA‰r
Ğ
xmlInvHessŸn
, "NRows", 
nRows
 );

856 
	`gToŞs
().
	`R—dA‰r
Ğ
xmlInvHessŸn
, "NCŞs", 
nCŞs
 );

859 
fInvHessŸn
.
	`ResizeTo
Ğ
nRows
, 
nCŞs
 );

862 
DoubË_t
* 
–em’ts
;

863 ià(
nEËm’ts
 > 
¡d
::
num”ic_lim™s
<>::
	`max
()-100){

864 
	`Log
(è<< 
kFATAL
 << "your›dØ»ad‡ hessŸÀm©rix w™h " << 
nEËm’ts
 << "ƒËm’ts, -->oØÏrge, gues s.th. w’ˆwrÚg„—dšg fromhweighˆfe" << 
Endl
;

867 
–em’ts
 = 
Ãw
 
DoubË_t
[
nEËm’ts
+10];

872 * 
xmlRow
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘Chd
(
xmlInvHessŸn
);

873 
IÁ_t
 
row
 = 0;

874 
šdex
 = 0;

875 
xmlRow
) {

876 
	`gToŞs
().
	`R—dA‰r
Ğ
xmlRow
, "Index", 
row
 );

878 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘NodeCÚ‹Á
(
xmlRow
);

880 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

881 
IÁ_t
 
iCŞ
 = 0; iCŞ<
nCŞs
; iCol++) {

882 
s
 >> (*(
–em’ts
+
šdex
));

883 ++
šdex
;

885 
xmlRow
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘Next
(xmlRow);

886 ++
row
;

889 
fInvHessŸn
.
	`S‘M©rixA¼ay
Ğ
–em’ts
 );

891 
d–‘e
[] 
–em’ts
;

892 
	}
}

897 
	gTMVA
::
M‘hodANNBa£
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & 
i¡r
)

901 
TSŒšg
 
dummy
;

904 
DoubË_t
 
weight
;

905 
¡d
::
veùÜ
<
DoubË_t
>* 
weights
 = 
Ãw
 std::vector<Double_t>();

906 
i¡r
>> 
dummy
;

907 
i¡r
>> 
dummy
 >> 
weight
è
weights
->
	`push_back
(weight);

909 
	`FÜûWeights
(
weights
);

912 
d–‘e
 
weights
;

913 
	}
}

918 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodANNBa£
::
	$C»©eRªkšg
()

921 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Importance" );

923 
TNeurÚ
* 
ÃurÚ
;

924 
TSyÇp£
* 
syÇp£
;

925 
DoubË_t
 
impÜnû
, 
avgV®
;

926 
TSŒšg
 
v¬Name
;

928 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++) {

930 
ÃurÚ
 = 
	`G‘IÅutNeurÚ
(
iv¬
);

931 
IÁ_t
 
numSyÇp£s
 = 
ÃurÚ
->
	`NumPo¡Lšks
();

932 
impÜnû
 = 0;

933 
v¬Name
 = 
	`G‘IÅutV¬
(
iv¬
);

936 
DoubË_t
 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
;

937 
	`Sti¡ics
Ğ
TMVA
::
Ty³s
::
kT¿ššg
, 
v¬Name
,

938 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
 );

940 
avgV®
 = (
TM©h
::
	`Abs
(
m—nS
è+ TM©h::Abs(
m—nB
))/2.0;

941 
m—Äms
 = (
TM©h
::
	`Abs
(
rmsS
è+ TM©h::Abs(
rmsB
))/2.;

942 ià(
avgV®
<
m—Äms
)‡vgVal = meanrms;

943 ià(
	`IsNÜm®i£d
()è
avgV®
 = 0.5*(1 + 
	`gToŞs
().
	`NÜmV¬ŸbË
ĞavgV®, 
	`G‘Xmš
Ğ
iv¬
 ), 
	`G‘Xmax
( ivar )));

945 
IÁ_t
 
j
 = 0; j < 
numSyÇp£s
; j++) {

946 
syÇp£
 = 
ÃurÚ
->
	`Po¡LškAt
(
j
);

947 
impÜnû
 +ğ
syÇp£
->
	`G‘Weight
() * synapse->GetWeight();

950 
impÜnû
 *ğ
avgV®
 *‡vgVal;

952 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
v¬Name
, 
impÜnû
 ) );

955  
fRªkšg
;

956 
	}
}

960 
	gTMVA
::
M‘hodANNBa£
::
C»©eWeightMÚ™ÜšgHi¡s
ĞcÚ¡ 
TSŒšg
& 
bulkÇme
,

961 
¡d
::
veùÜ
<
TH1
*>* 
hv
 ) const

963 
TH2F
* 
hi¡
;

964 
IÁ_t
 
	gnumLay”s
 = 
fN‘wÜk
->
G‘EÁr›sFa¡
();

966 
IÁ_t
 
	gi
 = 0; i < 
	gnumLay”s
-1; i++) {

968 
TObjA¼ay
* 
	gÏy”1
 = (TObjA¼ay*)
fN‘wÜk
->
At
(
i
);

969 
TObjA¼ay
* 
	gÏy”2
 = (TObjA¼ay*)
fN‘wÜk
->
At
(
i
+1);

970 
IÁ_t
 
	gnumNeurÚs1
 = 
Ïy”1
->
G‘EÁr›sFa¡
();

971 
IÁ_t
 
	gnumNeurÚs2
 = 
Ïy”2
->
G‘EÁr›sFa¡
();

973 
TSŒšg
 
	gÇme
 = 
FÜm
("%s%i%i", 
bulkÇme
.
D©a
(), 
i
, i+1);

974 
	ghi¡
 = 
Ãw
 
TH2F
(
Çme
 + "",‚ame + "",

975 
numNeurÚs1
, 0,‚umNeurÚs1, 
numNeurÚs2
, 0,‚umNeurons2);

977 
IÁ_t
 
	gj
 = 0; j < 
	gnumNeurÚs1
; j++) {

979 
TNeurÚ
* 
	gÃurÚ
 = (TNeurÚ*)
Ïy”1
->
At
(
j
);

980 
IÁ_t
 
	gnumSyÇp£s
 = 
ÃurÚ
->
NumPo¡Lšks
();

982 
IÁ_t
 
	gk
 = 0; k < 
	gnumSyÇp£s
; k++) {

984 
TSyÇp£
* 
	gsyÇp£
 = 
ÃurÚ
->
Po¡LškAt
(
k
);

985 
	ghi¡
->
S‘BšCÚ‹Á
(
j
+1, 
k
+1, 
syÇp£
->
G‘Weight
());

990 ià(
	ghv
èhv->
push_back
Ğ
hi¡
 );

992 
	ghi¡
->
Wr™e
();

993 
d–‘e
 
	ghi¡
;

1001 
	gTMVA
::
M‘hodANNBa£
::
	$Wr™eMÚ™ÜšgHi¡osToFe
() const

1003 
	`PrštMes§ge
(
	`FÜm
("Wr™¥ecŸÈhi¡o tØfe: %s", 
	`Ba£Dœ
()->
	`G‘P©h
()), 
kTRUE
);

1005 ià(
fE¡im©ÜHi¡T¿š
èfE¡im©ÜHi¡T¿š->
	`Wr™e
();

1006 ià(
fE¡im©ÜHi¡Te¡
 ) fE¡im©ÜHi¡Te¡ ->
	`Wr™e
();

1009 
	`C»©eWeightMÚ™ÜšgHi¡s
( "weights_hist" );

1012 #ià
__ılu¥lus
 > 199711L

1013 
¡d
::
©omic
<> 
•ochMÚ™ÜšgDœeùÜyNumb”
{0};

1015 
•ochMÚ™ÜšgDœeùÜyNumb”
 = 0;

1017 
•ochV®
 = 
•ochMÚ™ÜšgDœeùÜyNumb”
++;

1018 
TDœeùÜy
* 
•ochdœ
 = 
NULL
;

1019 ifĞ
•ochV®
 == 0 )

1020 
•ochdœ
 = 
	`Ba£Dœ
()->
	`mkdœ
( "EpochMonitoring" );

1022 
•ochdœ
 = 
	`Ba£Dœ
()->
	`mkdœ
Ğ
	`FÜm
("EpochMÚ™Üšg_%4d",
•ochV®
) );

1024 
•ochdœ
->
	`cd
();

1025 
¡d
::
veùÜ
<
TH1
*>::
cÚ¡_™”©Ü
 
™
 = 
fEpochMÚHi¡S
.
	`begš
(); iˆ!ğfEpochMÚHi¡S.
	`’d
(); it++) {

1026 (*
™
)->
	`Wr™e
();

1027 
	`d–‘e
 (*
™
);

1029 
¡d
::
veùÜ
<
TH1
*>::
cÚ¡_™”©Ü
 
™
 = 
fEpochMÚHi¡B
.
	`begš
(); iˆ!ğfEpochMÚHi¡B.
	`’d
(); it++) {

1030 (*
™
)->
	`Wr™e
();

1031 
	`d–‘e
 (*
™
);

1033 
¡d
::
veùÜ
<
TH1
*>::
cÚ¡_™”©Ü
 
™
 = 
fEpochMÚHi¡W
.
	`begš
(); iˆ!ğfEpochMÚHi¡W.
	`’d
(); it++) {

1034 (*
™
)->
	`Wr™e
();

1035 
	`d–‘e
 (*
™
);

1037 
	`Ba£Dœ
()->
	`cd
();

1038 
	}
}

1043 
	gTMVA
::
M‘hodANNBa£
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

1045 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›s
();

1047 
fout
 << 
¡d
::
’dl
;

1048 
fout
 << " doubË Aùiv©iÚFnc(doubË xècÚ¡;" << 
¡d
::
’dl
;

1049 
fout
 << " doubË OuutAùiv©iÚFnc(doubË xècÚ¡;" << 
¡d
::
’dl
;

1050 
fout
 << 
¡d
::
’dl
;

1051 
fout
 << " iÁ fLay”s;" << 
¡d
::
’dl
;

1052 
fout
 << " iÁ fLay”Size["<<
numLay”s
<<"];" << 
¡d
::
’dl
;

1053 
numNodesFrom
 = -1;

1054 
IÁ_t
 
lIdx
 = 0;†Idx < 
numLay”s
;†Idx++) {

1055 
numNodesTo
 = ((
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
lIdx
))->
	`G‘EÁr›s
();

1056 ià(
numNodesFrom
<0è{‚umNodesFrom=
numNodesTo
; ; }

1057 
fout
 << " doubË fWeightM©rix" << 
lIdx
-1 << "to" <<†Idx << "[" << 
numNodesTo
 << "][" << 
numNodesFrom
 << "];";

1058 
fout
 << " // weighˆm©rix from†ay” " << 
lIdx
-1 << "Ø" <<†Idx << 
¡d
::
’dl
;

1059 
numNodesFrom
 = 
numNodesTo
;

1061 
fout
 << 
¡d
::
’dl
;

1062 
fout
 << "};" << 
¡d
::
’dl
;

1064 
fout
 << 
¡d
::
’dl
;

1066 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize()" << 
¡d
::
’dl
;

1067 
fout
 << "{" << 
¡d
::
’dl
;

1068 
fout
 << " // bud‚‘wÜk sŒuùu»" << 
¡d
::
’dl
;

1069 
fout
 << " fLay” ğ" << 
numLay”s
 << ";" << 
¡d
::
’dl
;

1070 
IÁ_t
 
lIdx
 = 0;†Idx < 
numLay”s
;†Idx++) {

1071 
TObjA¼ay
* 
Ïy”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(
lIdx
);

1072 
numNodes
 = 
Ïy”
->
	`G‘EÁr›s
();

1073 
fout
 << " fLay”Size[" << 
lIdx
 << "] = " << 
numNodes
 << ";" << 
¡d
::
’dl
;

1076 
IÁ_t
 
i
 = 0; i < 
numLay”s
-1; i++) {

1077 
fout
 << " // weighˆm©rix from†ay” " << 
i
 << "Ø" << i+1 << 
¡d
::
’dl
;

1078 
TObjA¼ay
* 
Ïy”
 = (TObjA¼ay*)
fN‘wÜk
->
	`At
(
i
);

1079 
IÁ_t
 
numNeurÚs
 = 
Ïy”
->
	`G‘EÁr›sFa¡
();

1080 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

1081 
TNeurÚ
* 
ÃurÚ
 = (TNeurÚ*)
Ïy”
->
	`At
(
j
);

1082 
IÁ_t
 
numSyÇp£s
 = 
ÃurÚ
->
	`NumPo¡Lšks
();

1083 
IÁ_t
 
k
 = 0; k < 
numSyÇp£s
; k++) {

1084 
TSyÇp£
* 
syÇp£
 = 
ÃurÚ
->
	`Po¡LškAt
(
k
);

1085 
fout
 << " fWeightM©rix" << 
i
 << "to" << i+1 << "[" << 
k
 << "][" << 
j
 << "] = " << 
syÇp£
->
	`G‘Weight
(è<< ";" << 
¡d
::
’dl
;

1090 
fout
 << "}" << 
¡d
::
’dl
;

1091 
fout
 << 
¡d
::
’dl
;

1094 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

1095 
fout
 << "{" << 
¡d
::
’dl
;

1096 
fout
 << " ià(šputV®ues.size(è!ğ(unsigÃd iÁ)fLay”Size[0]-1è{" << 
¡d
::
’dl
;

1097 
fout
 << " std::couˆ<< \"IÅuˆveùÜ‚“d tØboàsiz\" << fLay”Size[0]-1 << std::’dl;" << 
¡d
::
’dl
;

1098 
fout
 << "„‘uº 0;" << 
¡d
::
’dl
;

1099 
fout
 << " }" << 
¡d
::
’dl
;

1100 
fout
 << 
¡d
::
’dl
;

1101 
IÁ_t
 
lIdx
 = 0;†Idx < 
numLay”s
;†Idx++) {

1102 
TObjA¼ay
 *
Ïy”
 = (TObjA¼ay *)
fN‘wÜk
->
	`At
(
lIdx
);

1103 
numNodes
 = 
Ïy”
->
	`G‘EÁr›s
();

1104 
fout
 << " std::¬¿y<doubË, " << 
numNodes
 << "> fWeights" << 
lIdx
 << " {{}};" << 
¡d
::
’dl
;

1106 
IÁ_t
 
lIdx
 = 0;†Idx < 
numLay”s
 - 1;†Idx++) {

1107 
fout
 << " fWeights" << 
lIdx
 << ".back(èğ1.;" << 
¡d
::
’dl
;

1109 
fout
 << 
¡d
::
’dl
;

1110 
fout
 << " fÜ (šˆi=0; i<fLay”Size[0]-1; i++)" << 
¡d
::
’dl
;

1111 
fout
 << " fWeights0[i]=šputV®ues[i];" << 
¡d
::
’dl
;

1112 
fout
 << 
¡d
::
’dl
;

1113 
IÁ_t
 
i
 = 0; i < 
numLay”s
-1; i++) {

1114 
fout
 << " //†ay” " << 
i
 << "Ø" << i+1 << 
¡d
::
’dl
;

1115 ià(
i
+1 =ğ
numLay”s
-1) {

1116 
fout
 << " fÜ (šˆo=0; o<fLay”Size[" << 
i
+1 << "]; o++è{" << 
¡d
::
’dl
;

1119 
fout
 << " fÜ (šˆo=0; o<fLay”Size[" << 
i
+1 << "]-1; o++è{" << 
¡d
::
’dl
;

1121 
fout
 << " fÜ (šˆi=0; i<fLay”Size[" << 
i
 << "]; i++è{" << 
¡d
::
’dl
;

1122 
fout
 << " doubË iÅutV® = fWeightM©rix" << 
i
 << "to" << i + 1 << "[o][i] * fWeights" << i << "[i];"

1123 << 
¡d
::
’dl
;

1125 iàĞ
fNeurÚIÅutTy³
 == "sum") {

1126 
fout
 << " fWeights" << 
i
 + 1 << "[o] +ğšputV®;" << 
¡d
::
’dl
;

1128 iàĞ
fNeurÚIÅutTy³
 == "sqsum") {

1129 
fout
 << " fWeights" << 
i
 + 1 << "[o] +ğšputV®*šputV®;" << 
¡d
::
’dl
;

1132 
fout
 << " fWeights" << 
i
 + 1 << "[o] +ğçbs(šputV®);" << 
¡d
::
’dl
;

1134 
fout
 << " } //†oİ ov” i" << 
¡d
::
’dl
;

1135 ià(
i
+1 !ğ
numLay”s
-1)

1136 
fout
 << " fWeights" << 
i
 + 1 << "[o] = Aùiv©iÚFnc(fWeights" << i + 1 << "[o]);" << 
¡d
::
’dl
;

1138 
fout
 << " fWeights" << 
i
 + 1 << "[o] = OutputActivationFnc(fWeights" << i + 1 << "[o]);"

1139 << 
¡d
::
’dl
;

1140 
fout
 << " } //†oİ ov” o" << 
¡d
::
’dl
;

1142 
fout
 << 
¡d
::
’dl
;

1143 
fout
 << "„‘uº fWeights" << 
numLay”s
 - 1 << "[0];" << 
¡d
::
’dl
;

1144 
fout
 << "}" << 
¡d
::
’dl
;

1146 
fout
 << 
¡d
::
’dl
;

1147 
TSŒšg
 
âcName
 = 
şassName
+"::ActivationFnc";

1148 
fAùiv©iÚ
->
	`MakeFunùiÚ
(
fout
, 
âcName
);

1149 
âcName
 = 
şassName
+"::OutputActivationFnc";

1150 
fOuut
->
	`MakeFunùiÚ
(
fout
, 
âcName
);

1152 
fout
 << " " << 
¡d
::
’dl
;

1153 
fout
 << "// CËª up" << 
¡d
::
’dl
;

1154 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

1155 
fout
 << "{" << 
¡d
::
’dl
;

1156 
fout
 << "}" << 
¡d
::
’dl
;

1157 
	}
}

1162 
BoŞ_t
 
	gTMVA
::
M‘hodANNBa£
::
	$Debug
() const

1164  
fgDEBUG
;

1165 
	}
}

	@src/MethodBDT.cxx

110 
	~"TMVA/M‘hodBDT.h
"

112 
	~"TMVA/BDTEv’tW¿µ”.h
"

113 
	~"TMVA/Bš¬yS—rchT»e.h
"

114 
	~"TMVA/CÏssif›rFaùÜy.h
"

115 
	~"TMVA/CÚfigu¿bË.h
"

116 
	~"TMVA/CrossEÁrİy.h
"

117 
	~"TMVA/DecisiÚT»e.h
"

118 
	~"TMVA/D©aS‘.h
"

119 
	~"TMVA/GšiIndex.h
"

120 
	~"TMVA/GšiIndexW™hL­Ïû.h
"

121 
	~"TMVA/IÁ”v®.h
"

122 
	~"TMVA/IM‘hod.h
"

123 
	~"TMVA/LogIÁ”v®.h
"

124 
	~"TMVA/M‘hodBa£.h
"

125 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

126 
	~"TMVA/MsgLogg”.h
"

127 
	~"TMVA/O±imizeCÚfigP¬am‘”s.h
"

128 
	~"TMVA/PDF.h
"

129 
	~"TMVA/Rªkšg.h
"

130 
	~"TMVA/ResuÉs.h
"

131 
	~"TMVA/ResuÉsMuÉişass.h
"

132 
	~"TMVA/SdivSq¹S¶usB.h
"

133 
	~"TMVA/S•¬©iÚBa£.h
"

134 
	~"TMVA/Tim”.h
"

135 
	~"TMVA/ToŞs.h
"

136 
	~"TMVA/Ty³s.h
"

138 
	~"Rio¡»am.h
"

139 
	~"TDœeùÜy.h
"

140 
	~"TRªdom3.h
"

141 
	~"TM©h.h
"

142 
	~"TM©rixTSym.h
"

143 
	~"TObjSŒšg.h
"

144 
	~"TG¿ph.h
"

146 
	~<®gÜ™hm
>

147 
	~<f¡»am
>

148 
	~<m©h.h
>

149 
	~<unÜd”ed_m­
>

152 
usšg
 
	g¡d
::
veùÜ
;

153 
usšg
 
	g¡d
::
make_·œ
;

155 
	$REGISTER_METHOD
(
BDT
)

157 
	`CÏssImp
(
TMVA
::
M‘hodBDT
);

159 cÚ¡ 
IÁ_t
 
TMVA
::
M‘hodBDT
::
fgDebugLev–
 = 0;

164 
TMVA
::
M‘hodBDT
::
	$M‘hodBDT
ĞcÚ¡ 
TSŒšg
& 
jobName
,

165 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

166 
D©aS‘Info
& 
theD©a
,

167 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

168 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kBDT
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

169 , 
	`fT¿šSam¶e
(0)

170 , 
	`fNT»es
(0)

171 , 
	`fSigToBkgF¿ùiÚ
(0)

172 , 
	`fAdaBoo¡B‘a
(0)

174 , 
	`fShrškage
(0)

175 , 
	`fBaggedBoo¡
(
kFALSE
)

176 , 
	`fBaggedG¿dBoo¡
(
kFALSE
)

178 , 
	`fMšNodeEv’ts
(0)

179 , 
	`fMšNodeSize
(5)

180 , 
	`fMšNodeSizeS
("5%")

181 , 
	`fNCuts
(0)

182 , 
	`fU£Fish”Cuts
(0)

183 , 
	`fMšLšCÜrFÜFish”
(.8)

184 , 
	`fU£ExşusiveV¬s
(0)

185 , 
	`fU£YesNoL—f
(
kFALSE
)

186 , 
	`fNodePur™yLim™
(0)

187 , 
	`fNNodesMax
(0)

188 , 
	`fMaxD•th
(0)

189 , 
	`fPruÃM‘hod
(
DecisiÚT»e
::
kNoPrunšg
)

190 , 
	`fPruÃSŒ’gth
(0)

191 , 
	`fFV®id©iÚEv’ts
(0)

192 , 
	`fAutom©ic
(
kFALSE
)

193 , 
	`fRªdomi£dT»es
(
kFALSE
)

194 , 
	`fU£Nv¬s
(0)

195 , 
	`fU£PoissÚNv¬s
(0)

196 , 
	`fU£NT¿šEv’ts
(0)

197 , 
	`fBaggedSam¶eF¿ùiÚ
(0)

198 , 
	`fNoNegWeightsInT¿ššg
(
kFALSE
)

199 , 
	`fInv”£Boo¡NegWeights
(
kFALSE
)

200 , 
	`fPaœNegWeightsGlob®
(
kFALSE
)

201 , 
	`fT¿šW™hNegWeights
(
kFALSE
)

202 , 
	`fDoBoo¡MÚ™Ü
(
kFALSE
)

203 , 
	`fIT»e
(0)

204 , 
	`fBoo¡Weight
(0)

205 , 
	`fE¼ÜF¿ùiÚ
(0)

206 , 
	`fCss
(0)

207 , 
	`fCts_sb
(0)

208 , 
	`fCtb_ss
(0)

209 , 
	`fCbb
(0)

210 , 
	`fDoP»£ËùiÚ
(
kFALSE
)

211 , 
	`fSkNÜm®iz©iÚ
(
kFALSE
)

212 , 
	$fHi¡ÜicBoŞ
(
kFALSE
)

214 
fMÚ™ÜNtu¶e
 = 
NULL
;

215 
fS•Ty³
 = 
NULL
;

216 
fReg»ssiÚLossFunùiÚBDTG
 = 
nuÎ±r
;

217 
	}
}

221 
	gTMVA
::
M‘hodBDT
::
	$M‘hodBDT
Ğ
D©aS‘Info
& 
theD©a
,

222 cÚ¡ 
TSŒšg
& 
theWeightFe
)

223 : 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kBDT
, 
theD©a
, 
theWeightFe
)

224 , 
	`fT¿šSam¶e
(0)

225 , 
	`fNT»es
(0)

226 , 
	`fSigToBkgF¿ùiÚ
(0)

227 , 
	`fAdaBoo¡B‘a
(0)

229 , 
	`fShrškage
(0)

230 , 
	`fBaggedBoo¡
(
kFALSE
)

231 , 
	`fBaggedG¿dBoo¡
(
kFALSE
)

233 , 
	`fMšNodeEv’ts
(0)

234 , 
	`fMšNodeSize
(5)

235 , 
	`fMšNodeSizeS
("5%")

236 , 
	`fNCuts
(0)

237 , 
	`fU£Fish”Cuts
(0)

238 , 
	`fMšLšCÜrFÜFish”
(.8)

239 , 
	`fU£ExşusiveV¬s
(0)

240 , 
	`fU£YesNoL—f
(
kFALSE
)

241 , 
	`fNodePur™yLim™
(0)

242 , 
	`fNNodesMax
(0)

243 , 
	`fMaxD•th
(0)

244 , 
	`fPruÃM‘hod
(
DecisiÚT»e
::
kNoPrunšg
)

245 , 
	`fPruÃSŒ’gth
(0)

246 , 
	`fFV®id©iÚEv’ts
(0)

247 , 
	`fAutom©ic
(
kFALSE
)

248 , 
	`fRªdomi£dT»es
(
kFALSE
)

249 , 
	`fU£Nv¬s
(0)

250 , 
	`fU£PoissÚNv¬s
(0)

251 , 
	`fU£NT¿šEv’ts
(0)

252 , 
	`fBaggedSam¶eF¿ùiÚ
(0)

253 , 
	`fNoNegWeightsInT¿ššg
(
kFALSE
)

254 , 
	`fInv”£Boo¡NegWeights
(
kFALSE
)

255 , 
	`fPaœNegWeightsGlob®
(
kFALSE
)

256 , 
	`fT¿šW™hNegWeights
(
kFALSE
)

257 , 
	`fDoBoo¡MÚ™Ü
(
kFALSE
)

258 , 
	`fIT»e
(0)

259 , 
	`fBoo¡Weight
(0)

260 , 
	`fE¼ÜF¿ùiÚ
(0)

261 , 
	`fCss
(0)

262 , 
	`fCts_sb
(0)

263 , 
	`fCtb_ss
(0)

264 , 
	`fCbb
(0)

265 , 
	`fDoP»£ËùiÚ
(
kFALSE
)

266 , 
	`fSkNÜm®iz©iÚ
(
kFALSE
)

267 , 
	$fHi¡ÜicBoŞ
(
kFALSE
)

269 
fMÚ™ÜNtu¶e
 = 
NULL
;

270 
fS•Ty³
 = 
NULL
;

271 
fReg»ssiÚLossFunùiÚBDTG
 = 
nuÎ±r
;

276 
	}
}

281 
BoŞ_t
 
	gTMVA
::
M‘hodBDT
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UIÁ_ˆ
numb”T¬g‘s
 )

283 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

284 ià(
ty³
 =ğ
Ty³s
::
kMuÉişass
 )  
kTRUE
;

285 ifĞ
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 && 
numb”T¬g‘s
 =ğ1 )  
kTRUE
;

286  
kFALSE
;

287 
	}
}

334 
	gTMVA
::
M‘hodBDT
::
	$Deş¬eO±iÚs
()

336 
	`Deş¬eO±iÚRef
(
fNT»es
, "NTrees", "Number ofrees inhe forest");

337 ià(
	`DoReg»ssiÚ
()) {

338 
	`Deş¬eO±iÚRef
(
fMaxD•th
=50,"MaxDepth","Max depth ofhe decisionree‡llowed");

340 
	`Deş¬eO±iÚRef
(
fMaxD•th
=3,"MaxDepth","Max depth ofhe decisionree‡llowed");

343 
TSŒšg
 
tmp
="5%"; ià(
	`DoReg»ssiÚ
())mp="0.2%";

344 
	`Deş¬eO±iÚRef
(
fMšNodeSizeS
=
tmp
, "MinNodeSize", "Minimum…ercentage ofrainingƒvents„equired in‡†eaf‚ode (default: Classification: 5%, Regression: 0.2%)");

346 
	`Deş¬eO±iÚRef
(
fNCuts
, "nCuts", "Number of grid…oints in variable„ange used in finding optimal cut in‚ode splitting");

348 
	`Deş¬eO±iÚRef
(
fBoo¡Ty³
, "BoostType", "Boostingype forherees inhe forest (note: AdaCost is stillƒxperimental)");

350 
	`AddP»DefV®
(
	`TSŒšg
("AdaBoost"));

351 
	`AddP»DefV®
(
	`TSŒšg
("RealAdaBoost"));

352 
	`AddP»DefV®
(
	`TSŒšg
("AdaCost"));

353 
	`AddP»DefV®
(
	`TSŒšg
("Bagging"));

355 
	`AddP»DefV®
(
	`TSŒšg
("AdaBoostR2"));

356 
	`AddP»DefV®
(
	`TSŒšg
("Grad"));

357 ià(
	`DoReg»ssiÚ
()) {

358 
fBoo¡Ty³
 = "AdaBoostR2";

360 
fBoo¡Ty³
 = "AdaBoost";

362 
	`Deş¬eO±iÚRef
(
fAdaBoo¡R2Loss
="Quadratic", "AdaBoostR2Loss", "Type of Loss function in AdaBoostR2");

363 
	`AddP»DefV®
(
	`TSŒšg
("Linear"));

364 
	`AddP»DefV®
(
	`TSŒšg
("Quadratic"));

365 
	`AddP»DefV®
(
	`TSŒšg
("Exponential"));

367 
	`Deş¬eO±iÚRef
(
fBaggedBoo¡
=
kFALSE
, "UseBaggedBoost","Use only‡„andom subsample of‡llƒvents for growingherees inƒach boost iteration.");

368 
	`Deş¬eO±iÚRef
(
fShrškage
=1.0, "Shrinkage", "Learning„ate for GradBoost‡lgorithm");

369 
	`Deş¬eO±iÚRef
(
fAdaBoo¡B‘a
=.5, "AdaBoostBeta", "Learning„ate for AdaBoost‡lgorithm");

370 
	`Deş¬eO±iÚRef
(
fRªdomi£dT»es
,"UseRandomisedTrees","Determine‡tƒach‚ode splittinghe cut variable only‡she best out of‡„andom subset of variables (like in RandomForests)");

371 
	`Deş¬eO±iÚRef
(
fU£Nv¬s
,"UseNvars","Size ofhe subset of variables used with RandomisedTree option");

372 
	`Deş¬eO±iÚRef
(
fU£PoissÚNv¬s
,"UsePoissonNvars", "Interpret \"UseNvars\"‚ot‡s fixed‚umber but‡s mean of‡ Poisson distribution inƒach split with RandomisedTree option");

373 
	`Deş¬eO±iÚRef
(
fBaggedSam¶eF¿ùiÚ
=.6,"BaggedSampleFraction","Relative size of baggedƒvent sampleo original size ofhe data sample (used whenever bagging is used (i.e. UseBaggedBoost, Bagging,)" );

375 
	`Deş¬eO±iÚRef
(
fU£YesNoL—f
=
kTRUE
, "UseYesNoLeaf",

377 ià(
	`DoReg»ssiÚ
()) {

378 
fU£YesNoL—f
 = 
kFALSE
;

381 
	`Deş¬eO±iÚRef
(
fNegWeightT»©m’t
="InverseBoostNegWeights","NegWeightTreatment","Howoreatƒvents with‚egative weights inhe BDTraining (particularhe boosting) : IgnoreInTraining; Boost With inverse boostweight; Pairƒvents with‚egative‡nd…ositive weights inraining sample‡nd *annihilate*hem (experimental!)");

382 
	`AddP»DefV®
(
	`TSŒšg
("InverseBoostNegWeights"));

383 
	`AddP»DefV®
(
	`TSŒšg
("IgnoreNegWeightsInTraining"));

384 
	`AddP»DefV®
(
	`TSŒšg
("NoNegWeightsInTraining"));

385 
	`AddP»DefV®
(
	`TSŒšg
("PairNegWeightsGlobal"));

386 
	`AddP»DefV®
(
	`TSŒšg
("Pray"));

390 
	`Deş¬eO±iÚRef
(
fCss
=1., "Css", "AdaCost: cost ofrue signal selected signal");

391 
	`Deş¬eO±iÚRef
(
fCts_sb
=1.,"Cts_sb","AdaCost: cost ofrue signal selected bkg");

392 
	`Deş¬eO±iÚRef
(
fCtb_ss
=1.,"Ctb_ss","AdaCost: cost ofrue bkg selected signal");

393 
	`Deş¬eO±iÚRef
(
fCbb
=1., "Cbb", "AdaCost: cost ofrue bkg selected bkg ");

395 
	`Deş¬eO±iÚRef
(
fNodePur™yLim™
=0.5, "NodePurityLimit", "In boosting/pruning,‚odes with…urity > NodePurityLimit‡re signal; background otherwise.");

398 
	`Deş¬eO±iÚRef
(
fS•Ty³S
, "SeparationType", "Separation criterion for‚ode splitting");

399 
	`AddP»DefV®
(
	`TSŒšg
("CrossEntropy"));

400 
	`AddP»DefV®
(
	`TSŒšg
("GiniIndex"));

401 
	`AddP»DefV®
(
	`TSŒšg
("GiniIndexWithLaplace"));

402 
	`AddP»DefV®
(
	`TSŒšg
("MisClassificationError"));

403 
	`AddP»DefV®
(
	`TSŒšg
("SDivSqrtSPlusB"));

404 
	`AddP»DefV®
(
	`TSŒšg
("RegressionVariance"));

405 ià(
	`DoReg»ssiÚ
()) {

406 
fS•Ty³S
 = "RegressionVariance";

408 
fS•Ty³S
 = "GiniIndex";

411 
	`Deş¬eO±iÚRef
(
fReg»ssiÚLossFunùiÚBDTGS
 = "Huber", "RegressionLossFunctionBDTG", "Loss function for BDTG„egression.");

412 
	`AddP»DefV®
(
	`TSŒšg
("Huber"));

413 
	`AddP»DefV®
(
	`TSŒšg
("AbsoluteDeviation"));

414 
	`AddP»DefV®
(
	`TSŒšg
("LeastSquares"));

416 
	`Deş¬eO±iÚRef
(
fHub”Quªte
 = 0.7, "HuberQuantile", "Inhe Huber†oss functionhis ishe quantilehat separateshe core fromheails inhe„esiduals distribution.");

418 
	`Deş¬eO±iÚRef
(
fDoBoo¡MÚ™Ü
=
kFALSE
,"DoBoostMonitor","Create control…lot with ROC integral vsree‚umber");

420 
	`Deş¬eO±iÚRef
(
fU£Fish”Cuts
=
kFALSE
, "UseFisherCuts", "Use multivariate splits usinghe Fisher criterion");

421 
	`Deş¬eO±iÚRef
(
fMšLšCÜrFÜFish”
=.8,"MinLinCorrForFisher", "The minimum†inear correlation betweenwo variables demanded for use in Fisher criterion in‚ode splitting");

422 
	`Deş¬eO±iÚRef
(
fU£ExşusiveV¬s
=
kFALSE
,"UseExclusiveVars","Variables‡lready used in fisher criterion‡re‚ot‡nymore‡nalysed individually for‚ode splitting");

425 
	`Deş¬eO±iÚRef
(
fDoP»£ËùiÚ
=
kFALSE
,"DoPreselection","and‡nd‡pply‡utomatic…re-selection for 100%ƒfficient signal (bkg) cuts…riororaining");

428 
	`Deş¬eO±iÚRef
(
fSigToBkgF¿ùiÚ
=1,"SigToBkgFraction","Sigo Bkg„atio used in Training (similaro NodePurityLimit, which cannot be used in„eal‡daboost");

430 
	`Deş¬eO±iÚRef
(
fPruÃM‘hodS
, "PruneMethod", "Note: for BDTs use smallrees (e.g.MaxDepth=3)‡nd NoPruning: Pruning: Method used for…runing (removal) of statistically insignificant branches ");

431 
	`AddP»DefV®
(
	`TSŒšg
("NoPruning"));

432 
	`AddP»DefV®
(
	`TSŒšg
("ExpectedError"));

433 
	`AddP»DefV®
(
	`TSŒšg
("CostComplexity"));

435 
	`Deş¬eO±iÚRef
(
fPruÃSŒ’gth
, "PruneStrength", "Pruning strength");

437 
	`Deş¬eO±iÚRef
(
fFV®id©iÚEv’ts
=0.5, "PruningValFraction", "Fraction ofƒventso use for optimizing‡utomatic…runing.");

439 
	`Deş¬eO±iÚRef
(
fSkNÜm®iz©iÚ
=
kFALSE
, "SkipNormalization", "Skip‚ormalization‡t initialization,o keepƒxpectation value of BDT output‡ccordingohe fraction ofƒvents");

442 
	`Deş¬eO±iÚRef
(
fMšNodeEv’ts
=0, "nEventsMin", "deprecated: Use MinNodeSize (in % ofrainingƒvents) instead");

444 
	`Deş¬eO±iÚRef
(
fBaggedG¿dBoo¡
=
kFALSE
, "UseBaggedGrad","deprecated: Use *UseBaggedBoost* instead: Use only‡„andom subsample of‡llƒvents for growingherees inƒach iteration.");

445 
	`Deş¬eO±iÚRef
(
fBaggedSam¶eF¿ùiÚ
, "GradBaggingFraction","deprecated: Use *BaggedSampleFraction* instead: Defineshe fraction ofƒventso be used inƒach iteration,ƒ.g. when UseBaggedGrad=kTRUE. ");

446 
	`Deş¬eO±iÚRef
(
fU£NT¿šEv’ts
,"UseNTrainEvents","deprecated: Use *BaggedSampleFraction* instead: Number of„andomly…ickedrainingƒvents used in„andomised (and bagged)rees");

447 
	`Deş¬eO±iÚRef
(
fNNodesMax
,"NNodesMax","deprecated: Use MaxDepth insteado†imitheree size" );

450 
	}
}

455 
	gTMVA
::
M‘hodBDT
::
	$Deş¬eCom·tib™yO±iÚs
() {

456 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

459 
	`Deş¬eO±iÚRef
(
fHi¡ÜicBoŞ
=
kTRUE
, "UseWeightedTrees",

461 
	`Deş¬eO±iÚRef
(
fHi¡ÜicBoŞ
=
kFALSE
, "PruneBeforeBoost", "Flago…runeheree before‡pplying boosting‡lgorithm");

462 
	`Deş¬eO±iÚRef
(
fHi¡ÜicBoŞ
=
kFALSE
,"RenormByClass","Individually„e-normalizeƒachƒvent classohe original size‡fter boosting");

464 
	`AddP»DefV®
(
	`TSŒšg
("NegWeightTreatment"),TString("IgnoreNegWeights"));

466 
	}
}

471 
	gTMVA
::
M‘hodBDT
::
	$ProûssO±iÚs
()

473 
fS•Ty³S
.
	`ToLow”
();

474 ià(
fS•Ty³S
 =ğ"misşassifiÿtiÚ”rÜ"è
fS•Ty³
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

475 ià(
fS•Ty³S
 =ğ"gšišdex"è
fS•Ty³
 = 
Ãw
 
	`GšiIndex
();

476 ià(
fS•Ty³S
 =ğ"gšišdexw™hÏ¶aû"è
fS•Ty³
 = 
Ãw
 
	`GšiIndexW™hL­Ïû
();

477 ià(
fS•Ty³S
 =ğ"üos£Árİy"è
fS•Ty³
 = 
Ãw
 
	`CrossEÁrİy
();

478 ià(
fS•Ty³S
 =ğ"sdivsq¹¥lusb"è
fS•Ty³
 = 
Ãw
 
	`SdivSq¹S¶usB
();

479 ià(
fS•Ty³S
 =ğ"»g»ssiÚv¬Ÿnû"è
fS•Ty³
 = 
NULL
;

481 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

482 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀS•¬©iÚ Index o±iÚ " << 
fS•Ty³S
 << " c®Ëd" << 
Endl
;

485 if(!(
fHub”Quªte
 >= 0.0 && fHuberQuantile <= 1.0)){

486 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

487 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> Hub” Quªtmu¡ bš„ªg[0,1]. V®ugiv’, " << 
fHub”Quªte
 << ", dÛ nÙ m©chhi ü™”Ÿ" << 
Endl
;

490 
fReg»ssiÚLossFunùiÚBDTGS
.
	`ToLow”
();

491 ià(
fReg»ssiÚLossFunùiÚBDTGS
 =ğ"hub”"è
fReg»ssiÚLossFunùiÚBDTG
 = 
Ãw
 
	`Hub”LossFunùiÚBDT
(
fHub”Quªte
);

492 ià(
fReg»ssiÚLossFunùiÚBDTGS
 =ğ"Ëa¡squ¬es"è
fReg»ssiÚLossFunùiÚBDTG
 = 
Ãw
 
	`L—¡Squ¬esLossFunùiÚBDT
();

493 ià(
fReg»ssiÚLossFunùiÚBDTGS
 =ğ"absŞu‹devŸtiÚ"è
fReg»ssiÚLossFunùiÚBDTG
 = 
Ãw
 
	`AbsŞu‹DevŸtiÚLossFunùiÚBDT
();

495 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

496 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀReg»ssiÚ Los FunùiÚ BDT o±iÚ " << 
fReg»ssiÚLossFunùiÚBDTGS
 << " c®Ëd" << 
Endl
;

499 
fPruÃM‘hodS
.
	`ToLow”
();

500 ià(
fPruÃM‘hodS
 =ğ"ex³ùed”rÜ"è
fPruÃM‘hod
 = 
DecisiÚT»e
::
kEx³ùedE¼ÜPrunšg
;

501 ià(
fPruÃM‘hodS
 =ğ"co¡com¶ex™y"è
fPruÃM‘hod
 = 
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
;

502 ià(
fPruÃM‘hodS
 =ğ"nİrunšg"è
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

504 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

505 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀPruÃM‘hod " << 
fPruÃM‘hodS
 << " o±iÚ c®Ëd" << 
Endl
;

507 ià(
fPruÃSŒ’gth
 < 0 && (
fPruÃM‘hod
 !ğ
DecisiÚT»e
::
kNoPrunšg
è&& 
fBoo¡Ty³
!="G¿d"è
fAutom©ic
 = 
kTRUE
;

508 
fAutom©ic
 = 
kFALSE
;

509 ià(
fAutom©ic
 && 
fPruÃM‘hod
==
DecisiÚT»e
::
kEx³ùedE¼ÜPrunšg
){

510 
	`Log
(è<< 
kFATAL


511 << "SÜry‡utom©iø´unšg sŒ’gth d‘”mš©iÚ i nÙ im¶em’‹d y‘ fÜ Ex³ùedE¼ÜPrunšg" << 
Endl
;

515 ià(
fMšNodeEv’ts
 > 0){

516 
fMšNodeSize
 = 
	`DoubË_t
(
fMšNodeEv’ts
*100.è/ 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

517 
	`Log
(è<< 
kWARNING
 << "You havex¶ic™ly s‘ **‚Ev’tsMš = " << 
fMšNodeEv’ts
<<" **he min‡bsolute‚umber \n"

521 << "nEv’tsMš="<<
fMšNodeEv’ts
<< "--> MšNodeSize="<<
fMšNodeSize
<<"%"

522 << 
Endl
;

523 
	`Log
(è<< 
kWARNING
 << "Note‡lsohatƒxplicitly setting *nEventsMin* so far OVERWRITEShe option„ecommended \n"

524 << " *MšNodeSize* = " << 
fMšNodeSizeS
 << " o±iÚ !!" << 
Endl
 ;

525 
fMšNodeSizeS
 = 
	`FÜm
("%F3.2",
fMšNodeSize
);

528 
	`S‘MšNodeSize
(
fMšNodeSizeS
);

532 
fAdaBoo¡R2Loss
.
	`ToLow”
();

534 ià(
fBoo¡Ty³
=="Grad") {

535 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

536 ià(
fNegWeightT»©m’t
=="InverseBoostNegWeights"){

537 
	`Log
(è<< 
kINFO
 << "thİtiÚ *Inv”£Boo¡NegWeights* dÛ nÙƒxi¡ fÜ Boo¡Ty³=G¿d --> chªge" << 
Endl
;

538 
	`Log
(è<< 
kINFO
 << "tØÃw deçuÉ fÜ G¿dBoo¡ *P¿y*" << 
Endl
;

539 
	`Log
(è<< 
kDEBUG
 << "i.e. sim¶y k“°them‡ iàwhich should wÜk fšfÜ G¿d Boo¡" << 
Endl
;

540 
fNegWeightT»©m’t
="Pray";

541 
fNoNegWeightsInT¿ššg
=
kFALSE
;

543 } ià(
fBoo¡Ty³
=="RealAdaBoost"){

544 
fBoo¡Ty³
 = "AdaBoost";

545 
fU£YesNoL—f
 = 
kFALSE
;

546 } ià(
fBoo¡Ty³
=="AdaCost"){

547 
fU£YesNoL—f
 = 
kFALSE
;

550 ià(
fFV®id©iÚEv’ts
 < 0.0) fFValidationEvents = 0.0;

551 ià(
fAutom©ic
 && 
fFV®id©iÚEv’ts
 > 0.5) {

552 
	`Log
(è<< 
kWARNING
 << "You have choseno use morehan half of yourraining sample "

555 << 
Endl
;

559 ià(
this
->
	`D©a
()->
	`HasNeg©iveEv’tWeights
()){

560 
	`Log
(è<< 
kINFO
 << " You‡re using‡ Monte Carlohat has‡lso‚egative weights. "

564 << 
fMšNodeSizeS
 << " ("<< 
fMšNodeSize
 << "%)"

569 << "which ignÜe ev’t w™h‚eg©ivweighˆšhŒaššg. " << 
Endl


570 << 
Endl
 << "Note: You'll get‡ WARNING message duringheraining ifhat shouldƒver happen" << Endl;

573 ià(
	`DoReg»ssiÚ
()) {

574 ià(
fU£YesNoL—f
 && !
	`IsCÚ¡ruùedFromWeightFe
()){

575 
	`Log
(è<< 
kWARNING
 << "Reg»ssiÚ T»e dØnÙ wÜk w™h fU£YesNoL—f=TRUE --> I wÈ£ˆ™ØFALSE" << 
Endl
;

576 
fU£YesNoL—f
 = 
kFALSE
;

579 ià(
fS•Ty³
 !ğ
NULL
){

580 
	`Log
(è<< 
kWARNING
 << "Reg»ssiÚ T»e dØnÙ wÜk w™h S•¬©iÚy³ oth”hª <Reg»ssiÚV¬Ÿnû> --> I wÈu£ iˆš¡—d" << 
Endl
;

581 
fS•Ty³
 = 
NULL
;

583 ià(
fU£Fish”Cuts
){

584 
	`Log
(è<< 
kWARNING
 << "SÜry, U£Fish”Cut i nÙ‡vaabË fÜ„eg»ssiÚ‡Çlysis, I wÈignÜ™!" << 
Endl
;

585 
fU£Fish”Cuts
 = 
kFALSE
;

587 ià(
fNCuts
 < 0) {

588 
	`Log
(è<< 
kWARNING
 << "SÜry,hİtiÚ oànCuts<0 usšg‡ mÜ–abÜ©nod¥l™tšg‡lgÜ™hm " << 
Endl
;

589 
	`Log
(è<< 
kWARNING
 << "i nÙ im¶em’‹d fÜ„eg»ssiÚ‡Çlysi ! " << 
Endl
;

590 
	`Log
(è<< 
kWARNING
 << "--> I sw™ch dØdeçuÉ‚Cut ğ20‡nd u£ snd¬d‚od¥l™tšg"<<
Endl
;

591 
fNCuts
=20;

594 ià(
fRªdomi£dT»es
){

595 
	`Log
(è<< 
kINFO
 << " Rªdomi£d»e u£‚Ø´unšg" << 
Endl
;

596 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

600 ià(
fU£Fish”Cuts
) {

601 
	`Log
(è<< 
kWARNING
 << "Wh’ usšghİtiÚ U£Fish”Cuts,hÙh” o±iÚ‚Cuts<0 (i.e. usšg" << 
Endl
;

602 
	`Log
(è<< "‡ mÜ–abÜ©nod¥l™tšg‡lgÜ™hmèi nÙ im¶em’‹d. " << 
Endl
;

605 
fNCuts
=20;

608 ià(
fNT»es
==0){

609 
	`Log
(è<< 
kERROR
 << " Zero Decision Trees demanded...hat does‚ot work !! "

611 << 
Endl
;

612 
fNT»es
 = 1;

615 
fNegWeightT»©m’t
.
	`ToLow”
();

616 ià(
fNegWeightT»©m’t
 =ğ"ignÜ’egweightsšŒaššg"è
fNoNegWeightsInT¿ššg
 = 
kTRUE
;

617 ià(
fNegWeightT»©m’t
 =ğ"nÚegweightsšŒaššg"è
fNoNegWeightsInT¿ššg
 = 
kTRUE
;

618 ià(
fNegWeightT»©m’t
 =ğ"šv”£boo¡Ãgweights"è
fInv”£Boo¡NegWeights
 = 
kTRUE
;

619 ià(
fNegWeightT»©m’t
 =ğ"·œÃgweightsglob®"è
fPaœNegWeightsGlob®
 = 
kTRUE
;

620 ià(
fNegWeightT»©m’t
 =ğ"´ay"è
	`Log
(è<< 
kDEBUG
 << "Yes, good†uck w™h…¿yšg " << 
Endl
;

622 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

623 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀİtiÚ fÜ»©šg‚eg©ivev’ˆweight duršg¿ššg " << 
fNegWeightT»©m’t
 << "„eque¡ed" << 
Endl
;

626 ià(
fNegWeightT»©m’t
 == "pairnegweightsglobal")

627 
	`Log
(è<< 
kWARNING
 << " you s³cif›dhİtiÚ NegWeightT»©m’t=PaœNegWeightsGlob® : Thi İtiÚ i ¡ÈcÚsid”ed EXPERIMENTAL !! " << 
Endl
;

631 ià(
fNNodesMax
>0) {

632 
UIÁ_t
 
tmp
=1;

633 
fMaxD•th
=0;

634 
tmp
 < 
fNNodesMax
){

635 
tmp
+=2*tmp;

636 
fMaxD•th
++;

638 
	`Log
(è<< 
kWARNING
 << "You hav¥ecif›d‡ d•»ÿ‹d o±iÚ *NNodesMax="<<
fNNodesMax


639 << "* \Àthi ha b“ÀŒª¦©edØMaxD•th="<<
fMaxD•th
<<
Endl
;

643 ià(
fU£NT¿šEv’ts
>0){

644 
fBaggedSam¶eF¿ùiÚ
 = (
DoubË_t
è
fU£NT¿šEv’ts
/
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

645 
	`Log
(è<< 
kWARNING
 << "You hav¥ecif›d‡ d•»ÿ‹d o±iÚ *U£NT¿šEv’ts="<<
fU£NT¿šEv’ts


646 << "* \Àthi ha b“ÀŒª¦©edØBaggedSam¶eF¿ùiÚ="<<
fBaggedSam¶eF¿ùiÚ
<<"(%)"<<
Endl
;

649 ià(
fBoo¡Ty³
=="Baggšg"è
fBaggedBoo¡
 = 
kTRUE
;

650 ià(
fBaggedG¿dBoo¡
){

651 
fBaggedBoo¡
 = 
kTRUE
;

652 
	`Log
(è<< 
kWARNING
 << "You hav¥ecif›d‡ d•»ÿ‹d o±iÚ *U£BaggedG¿d* -->…Ëa£ u£ *U£BaggedBoo¡* in¡—d" << 
Endl
;

655 
	}
}

659 
	gTMVA
::
M‘hodBDT
::
	$S‘MšNodeSize
(
DoubË_t
 
sizeInP”ûÁ
){

660 ià(
sizeInP”ûÁ
 > 0 && sizeInPercent < 50){

661 
fMšNodeSize
=
sizeInP”ûÁ
;

664 
	`Log
(è<< 
kFATAL
 << "you have demanded‡ minimal‚ode size of "

665 << 
sizeInP”ûÁ
 << "% ofherainingƒvents.. \n"

666 << "h© somehow dÛ nÙ mak£n£ "<<
Endl
;

669 
	}
}

673 
	gTMVA
::
M‘hodBDT
::
	$S‘MšNodeSize
(
TSŒšg
 
sizeInP”ûÁ
){

674 
sizeInP”ûÁ
.
	`R•ÏûAÎ
("%","");

675 
sizeInP”ûÁ
.
	`R•ÏûAÎ
(" ","");

676 ià(
sizeInP”ûÁ
.
	`IsFlßt
()è
	`S‘MšNodeSize
(sizeInP”ûÁ.
	`Atof
());

678 
	`Log
(è<< 
kFATAL
 << "I had…roblems„eadinghe option MinNodeEvents, which "

679 << "aá”„emovšg‡…ossibË % sigÀnow„—d " << 
sizeInP”ûÁ
 << 
Endl
;

681 
	}
}

686 
	gTMVA
::
M‘hodBDT
::
	$In™
( )

688 
fNT»es
 = 800;

689 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 || fAÇlysisTy³ =ğTy³s::
kMuÉişass
 ) {

690 
fMaxD•th
 = 3;

691 
fBoo¡Ty³
 = "AdaBoost";

692 if(
	`D©aInfo
().
	`G‘NCÏs£s
()!=0)

693 
fMšNodeSize
 = 5.;

695 
fMaxD•th
 = 50;

696 
fBoo¡Ty³
 = "AdaBoostR2";

697 
fAdaBoo¡R2Loss
 = "Quadratic";

698 if(
	`D©aInfo
().
	`G‘NCÏs£s
()!=0)

699 
fMšNodeSize
 = .2;

703 
fNCuts
 = 20;

704 
fPruÃM‘hodS
 = "NoPruning";

705 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

706 
fPruÃSŒ’gth
 = 0;

707 
fAutom©ic
 = 
kFALSE
;

708 
fFV®id©iÚEv’ts
 = 0.5;

709 
fRªdomi£dT»es
 = 
kFALSE
;

711 
fU£Nv¬s
 = 
	`UIÁ_t
(
TM©h
::
	`Sq¹
(
	`G‘Nv¬
())+0.6);

712 
fU£PoissÚNv¬s
 = 
kTRUE
;

713 
fShrškage
 = 1.0;

717 
	`S‘SigÇlReã»nûCut
( 0 );

718 
	}
}

724 
	gTMVA
::
M‘hodBDT
::
	$Re£t
( )

730 
UIÁ_t
 
i
=0; i<
fFÜe¡
.
	`size
(); i++è
d–‘e
 fForest[i];

731 
fFÜe¡
.
	`ş—r
();

733 
fBoo¡Weights
.
	`ş—r
();

734 ià(
fMÚ™ÜNtu¶e
è{ fMÚ™ÜNtu¶e->
	`D–‘e
(); fMÚ™ÜNtu¶e=
NULL
; }

735 
fV¬ŸbËImpÜnû
.
	`ş—r
();

736 
fResidu®s
.
	`ş—r
();

737 
fLossFunùiÚEv’tInfo
.
	`ş—r
();

741 ià(
	`D©a
()èD©a()->
	`D–‘eResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

742 
	`Log
(è<< 
kDEBUG
 << " sucûssfuÎy(?è»£ˆthm‘hod " << 
Endl
;

743 
	}
}

752 
	gTMVA
::
M‘hodBDT
::~
	$M‘hodBDT
( )

754 
UIÁ_t
 
i
=0; i<
fFÜe¡
.
	`size
(); i++è
d–‘e
 fForest[i];

755 
	}
}

760 
	gTMVA
::
M‘hodBDT
::
	$In™Ev’tSam¶e
( )

762 ià(!
	`HasT¿ššgT»e
()è
	`Log
(è<< 
kFATAL
 << "<In™> D©a().T¿ššgT»e(èi z”Øpoš‹r" << 
Endl
;

764 ià(
fEv’tSam¶e
.
	`size
() > 0) {

766 
UIÁ_t
 
›v
=0; iev<
fEv’tSam¶e
.
	`size
(); iev++èfEv’tSam¶e[›v]->
	`S‘Boo¡Weight
(1.);

768 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

769 
UIÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

771 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
tmpEv’tSam¶e
;

772 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

774 
Ev’t
* 
ev’t
 = 
Ãw
 
	`Ev’t
Ğ*
	`G‘T¿ššgEv’t
(
›vt
) );

775 
tmpEv’tSam¶e
.
	`push_back
(
ev’t
);

778 ià(!
	`DoReg»ssiÚ
()è
	`D‘”mšeP»£ËùiÚCuts
(
tmpEv’tSam¶e
);

779 
fDoP»£ËùiÚ
 = 
kFALSE
;

781 
UIÁ_t
 
i
=0; i<
tmpEv’tSam¶e
.
	`size
(); i++è
d–‘e
mpEventSample[i];

784 
BoŞ_t
 
fœ¡NegWeight
=
kTRUE
;

785 
BoŞ_t
 
fœ¡Z”oWeight
=
kTRUE
;

786 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

789 
Ev’t
* 
ev’t
 = 
Ãw
 
	`Ev’t
Ğ*
	`G‘T¿ššgEv’t
(
›vt
) );

790 ià(
fDoP»£ËùiÚ
){

791 ià(
TM©h
::
	`Abs
(
	`AµlyP»£ËùiÚCuts
(
ev’t
)) > 0.05) {

792 
d–‘e
 
ev’t
;

797 ià(
ev’t
->
	`G‘Weight
(è< 0 && (
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è|| 
fNoNegWeightsInT¿ššg
)){

798 ià(
fœ¡NegWeight
) {

799 
	`Log
(è<< 
kWARNING
 << " NÙe, you havev’t w™h‚eg©ivev’ˆweighˆšh§m¶e, buˆyou'vcho£ÀtØignÜthem" << 
Endl
;

800 
fœ¡NegWeight
=
kFALSE
;

802 
d–‘e
 
ev’t
;

803 }ià(
ev’t
->
	`G‘Weight
()==0){

804 ià(
fœ¡Z”oWeight
) {

805 
fœ¡Z”oWeight
 = 
kFALSE
;

806 
	`Log
(è<< "Ev’t w™h weighˆ=ğ0‡» gošgØbsim¶y ignÜed " << 
Endl
;

808 
d–‘e
 
ev’t
;

810 ià(
ev’t
->
	`G‘Weight
() < 0) {

811 
fT¿šW™hNegWeights
=
kTRUE
;

812 ià(
fœ¡NegWeight
){

813 
fœ¡NegWeight
 = 
kFALSE
;

814 ià(
fPaœNegWeightsGlob®
){

815 
	`Log
(è<< 
kWARNING
 << "Events with‚egativeƒvent weights‡re found‡nd "

818 << 
Endl
;

820 
	`Log
(è<< 
kWARNING
 << "Events with‚egativeƒvent weights‡re USED during "

825 << 
Endl
;

830 ià(
fAutom©ic
) {

831 
DoubË_t
 
modulo
 = 1.0/(
fFV®id©iÚEv’ts
);

832 
IÁ_t
 
imodulo
 = 
¡©ic_ÿ¡
<IÁ_t>Ğ
	`fmod
(
modulo
,1.0è> 0.5 ? 
	`û
(moduloè: 
	`æoÜ
(modulo) );

833 ià(
›vt
 % 
imodulo
 =ğ0è
fV®id©iÚSam¶e
.
	`push_back
Ğ
ev’t
 );

834 
fEv’tSam¶e
.
	`push_back
Ğ
ev’t
 );

837 
fEv’tSam¶e
.
	`push_back
(
ev’t
);

842 ià(
fAutom©ic
) {

843 
	`Log
(è<< 
kINFO
 << "<In™Ev’tSam¶e> IÁ”ÇÎy I u£ " << 
fEv’tSam¶e
.
	`size
()

844 << " fÜ T¿ššg‡nd " << 
fV®id©iÚSam¶e
.
	`size
()

845 << " fÜ Prunšg V®id©iÚ (" << ((
Flßt_t
)
fV®id©iÚSam¶e
.
	`size
())/((Flßt_t)
fEv’tSam¶e
.size()+fValidationSample.size())*100.0

846 << "% oàŒaššg u£d fÜ v®id©iÚ)" << 
Endl
;

850 ià(
fPaœNegWeightsGlob®
è
	`P»ProûssNeg©iveEv’tWeights
();

853 ià(!
	`DoReg»ssiÚ
(è&& !
fSkNÜm®iz©iÚ
){

854 
	`Log
(è<< 
kDEBUG
 << "\t<In™Ev’tSam¶e> FÜ cÏssifiÿtiÚ»es, "<< 
Endl
;

855 
	`Log
(è<< 
kDEBUG
 << " \‰hefãùivnumb” oàbackground i sÿËdØm©ch "<<
Endl
;

856 
	`Log
(è<< 
kDEBUG
 << " \‰hsigÇl. Oth”wi£hfœ¡ boo¡šg s‹°would dØ'ju¡h©'!"<<
Endl
;

870 
DoubË_t
 
Ãv’ts
 = 
fEv’tSam¶e
.
	`size
();

871 
DoubË_t
 
sumSigW
=0, 
sumBkgW
=0;

872 
IÁ_t
 
sumSig
=0, 
sumBkg
=0;

873 
UIÁ_t
 
›vt
=0; ievt<
fEv’tSam¶e
.
	`size
(); ievt++) {

874 ià((
	`D©aInfo
().
	`IsSigÇl
(
fEv’tSam¶e
[
›vt
])) ) {

875 
sumSigW
 +ğ
fEv’tSam¶e
[
›vt
]->
	`G‘Weight
();

876 
sumSig
++;

878 
sumBkgW
 +ğ
fEv’tSam¶e
[
›vt
]->
	`G‘Weight
();

879 
sumBkg
++;

882 ià(
sumSigW
 && 
sumBkgW
){

883 
DoubË_t
 
nÜmSig
 = 
Ãv’ts
/((1+
fSigToBkgF¿ùiÚ
)*
sumSigW
)*fSigToBkgFraction;

884 
DoubË_t
 
nÜmBkg
 = 
Ãv’ts
/((1+
fSigToBkgF¿ùiÚ
)*
sumBkgW
); ;

885 
	`Log
(è<< 
kDEBUG
 << "\tre-normaliseƒvents suchhat Sig‡nd Bkg have„espective sum of weights = "

886 << 
fSigToBkgF¿ùiÚ
 << 
Endl
;

887 
	`Log
(è<< 
kDEBUG
 << " \tsig->sig*"<<
nÜmSig
 << "ev. bkg->bkg*"<<
nÜmBkg
 << "ev." <<
Endl
;

888 
	`Log
(è<< 
kHEADER
 << "#ev’ts: (»weigh‹dèsig: "<< 
sumSigW
*
nÜmSig
 << " bkg: " << 
sumBkgW
*
nÜmBkg
 << 
Endl
;

889 
	`Log
(è<< 
kINFO
 << "#ev’ts: (unweigh‹dèsig: "<< 
sumSig
 << " bkg: " << 
sumBkg
 << 
Endl
;

890 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

891 ià((
	`D©aInfo
().
	`IsSigÇl
(
fEv’tSam¶e
[
›vt
])èèfEv’tSam¶e[›vt]->
	`S‘Boo¡Weight
(
nÜmSig
);

892 
fEv’tSam¶e
[
›vt
]->
	`S‘Boo¡Weight
(
nÜmBkg
);

895 
	`Log
(è<< 
kINFO
 << "--> could‚Ù d‘”mšsÿlšg faùÜ a e™h”h”¬" << 
Endl
;

896 
	`Log
(è<< 
kINFO
 << "‚ØsigÇÈev’t (sumSigW="<<
sumSigW
<<"èÜ‚Øbkgƒv. (sumBkgW="<<
sumBkgW
<<")"<<
Endl
;

901 
fT¿šSam¶e
 = &
fEv’tSam¶e
;

902 ià(
fBaggedBoo¡
){

903 
	`G‘BaggedSubSam¶e
(
fEv’tSam¶e
);

904 
fT¿šSam¶e
 = &
fSubSam¶e
;

917 
	}
}

926 
	gTMVA
::
M‘hodBDT
::
	$P»ProûssNeg©iveEv’tWeights
(){

927 
DoubË_t
 
tÙ®NegWeights
 = 0;

928 
DoubË_t
 
tÙ®PosWeights
 = 0;

929 
DoubË_t
 
tÙ®Weights
 = 0;

930 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*> 
ÃgEv’ts
;

931 
UIÁ_t
 
›v
 = 0; iev < 
fEv’tSam¶e
.
	`size
(); iev++){

932 ià(
fEv’tSam¶e
[
›v
]->
	`G‘Weight
() < 0) {

933 
tÙ®NegWeights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

934 
ÃgEv’ts
.
	`push_back
(
fEv’tSam¶e
[
›v
]);

936 
tÙ®PosWeights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

938 
tÙ®Weights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

940 ià(
tÙ®NegWeights
 == 0 ) {

941 
	`Log
(è<< 
kINFO
 << "nØÃg©ivev’ˆweight found ..‚Ø´•roûssšg‚eûs§ry" << 
Endl
;

944 
	`Log
(è<< 
kINFO
 << "found‡Ù® oà" << 
tÙ®NegWeights
 << " oàÃg©ivev’ˆweight which I‡m gošgØŒyØ·œ w™h…os™ivev’t tØªnih©them" << 
Endl
;

945 
	`Log
(è<< 
kINFO
 << "found‡Ù® oà" << 
tÙ®PosWeights
 << " oàev’t w™h…os™ivweights" << 
Endl
;

946 
	`Log
(è<< 
kINFO
 << "-->Ù® sum oàweight ğ" << 
tÙ®Weights
 << " = " << 
tÙ®NegWeights
+
tÙ®PosWeights
 << 
Endl
;

949 
¡d
::
veùÜ
<
TM©rixDSym
*>* 
cov
 = 
	`gToŞs
().
	`C®cCov¬ŸnûM©riûs
Ğ
fEv’tSam¶e
, 2);

951 
TM©rixDSym
 *
švCov
;

953 
IÁ_t
 
i
=0; i<2; i++){

954 
švCov
 = ((*
cov
)[
i
]);

955 iàĞ
TM©h
::
	`Abs
(
švCov
->
	`D‘”mšªt
()) < 10E-24 ) {

956 
¡d
::
cout
 << "<MethodBDT::PreProcessNeg...> matrix is‡lmost singular with determinant="

957 << 
TM©h
::
	`Abs
(
švCov
->
	`D‘”mšªt
())

959 << 
¡d
::
’dl
;

961 iàĞ
TM©h
::
	`Abs
(
švCov
->
	`D‘”mšªt
()) < 10E-120 ) {

962 
¡d
::
cout
 << "<MethodBDT::PreProcessNeg...> matrix is singular with determinant="

963 << 
TM©h
::
	`Abs
(
švCov
->
	`D‘”mšªt
())

965 << 
¡d
::
’dl
;

968 
švCov
->
	`Inv”t
();

973 
	`Log
(è<< 
kINFO
 << "Found‡Ù® oà" << 
tÙ®NegWeights
 << " iÀÃg©ivweight ouˆoà" << 
fEv’tSam¶e
.
	`size
(è<< "¿ššgƒv’t " << 
Endl
;

974 
Tim”
 
	`tim”
(
ÃgEv’ts
.
	`size
(),"Negative Event…aired");

975 
UIÁ_t
 
Ãv
 = 0;‚ev < 
ÃgEv’ts
.
	`size
();‚ev++){

976 
tim”
.
	`D¿wProg»ssB¬
Ğ
Ãv
 );

977 
DoubË_t
 
weight
 = 
ÃgEv’ts
[
Ãv
]->
	`G‘Weight
();

978 
UIÁ_t
 
iCÏssID
 = 
ÃgEv’ts
[
Ãv
]->
	`G‘CÏss
();

979 
švCov
 = ((*
cov
)[
iCÏssID
]);

980 
weight
 < 0){

983 
IÁ_t
 
iMš
=-1;

984 
DoubË_t
 
di¡
, 
mšDi¡
=10E270;

985 
UIÁ_t
 
›v
 = 0; iev < 
fEv’tSam¶e
.
	`size
(); iev++){

986 ià(
iCÏssID
==
fEv’tSam¶e
[
›v
]->
	`G‘CÏss
(è&& fEv’tSam¶e[›v]->
	`G‘Weight
() > 0){

987 
di¡
=0;

988 
UIÁ_t
 
iv¬
=0; iv¬ < 
	`G‘Nv¬
(); ivar++){

989 
UIÁ_t
 
jv¬
=0; jv¬<
	`G‘Nv¬
(); jvar++){

990 
di¡
 +ğ(
ÃgEv’ts
[
Ãv
]->
	`G‘V®ue
(
iv¬
)-
fEv’tSam¶e
[
›v
]->GetValue(ivar))*

991 (*
švCov
)[
iv¬
][
jv¬
]*

992 (
ÃgEv’ts
[
Ãv
]->
	`G‘V®ue
(
jv¬
)-
fEv’tSam¶e
[
›v
]->GetValue(jvar));

995 ià(
di¡
 < 
mšDi¡
è{ 
iMš
=
›v
; minDist=dist;}

999 ià(
iMš
 > -1) {

1001 
DoubË_t
 
ÃwWeight
 = (
ÃgEv’ts
[
Ãv
]->
	`G‘Weight
(è+ 
fEv’tSam¶e
[
iMš
]->GetWeight());

1002 ià(
ÃwWeight
 > 0){

1003 
ÃgEv’ts
[
Ãv
]->
	`S‘Boo¡Weight
( 0 );

1004 
fEv’tSam¶e
[
iMš
]->
	`S‘Boo¡Weight
Ğ
ÃwWeight
/fEv’tSam¶e[iMš]->
	`G‘Origš®Weight
() );

1006 
ÃgEv’ts
[
Ãv
]->
	`S‘Boo¡Weight
Ğ
ÃwWeight
/ÃgEv’ts[Ãv]->
	`G‘Origš®Weight
() );

1007 
fEv’tSam¶e
[
iMš
]->
	`S‘Boo¡Weight
( 0 );

1010 } 
	`Log
(è<< 
kFATAL
 << "´•roûssšg didn'ˆfšdƒv’ˆtØ·œ w™hhÃg©ivweighˆ...…robably‡ bug" << 
Endl
;

1011 
weight
 = 
ÃgEv’ts
[
Ãv
]->
	`G‘Weight
();

1014 
	`Log
(è<< 
kINFO
 << "<Neg©ivEv’ˆPaœšg>ook: " << 
tim”
.
	`G‘EÏp£dTime
()

1015 << " " << 
Endl
;

1018 
tÙ®NegWeights
 = 0;

1019 
tÙ®PosWeights
 = 0;

1020 
tÙ®Weights
 = 0;

1021 
DoubË_t
 
sigWeight
=0;

1022 
DoubË_t
 
bkgWeight
=0;

1023 
IÁ_t
 
nSig
=0;

1024 
IÁ_t
 
nBkg
=0;

1026 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*> 
ÃwEv’tSam¶e
;

1028 
UIÁ_t
 
›v
 = 0; iev < 
fEv’tSam¶e
.
	`size
(); iev++){

1029 ià(
fEv’tSam¶e
[
›v
]->
	`G‘Weight
() < 0) {

1030 
tÙ®NegWeights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1031 
tÙ®Weights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1033 
tÙ®PosWeights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1034 
tÙ®Weights
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1036 ià(
fEv’tSam¶e
[
›v
]->
	`G‘Weight
() > 0) {

1037 
ÃwEv’tSam¶e
.
	`push_back
(
Ãw
 
	`Ev’t
(*
fEv’tSam¶e
[
›v
]));

1038 ià(
fEv’tSam¶e
[
›v
]->
	`G‘CÏss
(è=ğ
fSigÇlCÏss
){

1039 
sigWeight
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1040 
nSig
+=1;

1042 
bkgWeight
 +ğ
fEv’tSam¶e
[
›v
]->
	`G‘Weight
();

1043 
nBkg
+=1;

1047 ià(
tÙ®NegWeights
 < 0è
	`Log
(è<< 
kFATAL
 << " com³n§tiÚ oàÃg©ivev’ˆweight w™h…os™ivÚe did‚Ù wÜk " <<Ù®NegWeight << 
Endl
;

1049 
UIÁ_t
 
i
=0; i<
fEv’tSam¶e
.
	`size
(); i++è
d–‘e
 fEventSample[i];

1050 
fEv’tSam¶e
 = 
ÃwEv’tSam¶e
;

1052 
	`Log
(è<< 
kINFO
 << "‡á” P»Proûssšg,hEv’ˆ§m¶i Ëá w™h " << 
fEv’tSam¶e
.
	`size
(è<< "ƒv’t (unweigh‹d),‡Î w™h…os™ivweights,‡ddšg u°tØ" << 
tÙ®Weights
 << 
Endl
;

1053 
	`Log
(è<< 
kINFO
 << "‚Sig="<<
nSig
 << " sigWeight="<<
sigWeight
 << "‚Bkg="<<
nBkg
 << " bkgWeight="<<
bkgWeight
 << 
Endl
;

1056 
	}
}

1062 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gTMVA
::
M‘hodBDT
::
	$O±imizeTunšgP¬am‘”s
(
TSŒšg
 
fomTy³
, TSŒšg 
f™Ty³
)

1065 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*> 
tuÃP¬am‘”s
;

1066 
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
tuÃdP¬am‘”s
;

1075 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("NT»es", 
Ãw
 
	`IÁ”v®
(10,1000,5)));

1076 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("MaxD•th", 
Ãw
 
	`IÁ”v®
(2,4,3)));

1077 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("MšNodeSize", 
Ãw
 
	`LogIÁ”v®
(1,30,30)));

1082 ià(
fBoo¡Ty³
=="AdaBoost"){

1083 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("AdaBoo¡B‘a", 
Ãw
 
	`IÁ”v®
(.2,1.,5)));

1085 }ià(
fBoo¡Ty³
=="Grad"){

1086 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Shrškage", 
Ãw
 
	`IÁ”v®
(0.05,0.50,5)));

1088 }ià(
fBoo¡Ty³
=="Baggšg" && 
fRªdomi£dT»es
){

1089 
IÁ_t
 
mš_v¬
 = 
TM©h
::
	`FloÜNšt
Ğ
	`G‘Nv¬
() * .25 );

1090 
IÁ_t
 
max_v¬
 = 
TM©h
::
	`CeNšt
Ğ
	`G‘Nv¬
() * .75 );

1091 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("U£Nv¬s", 
Ãw
 
	`IÁ”v®
(
mš_v¬
,
max_v¬
,4)));

1095 
	`Log
()<<
kINFO
 << "hfŞlowšg BDT…¬am‘” wÈbtuÃd oÀth»¥eùiv*grid*\n"<<
Endl
;

1096 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

1097 
™
=
tuÃP¬am‘”s
.
	`begš
(); it!ğtuÃP¬am‘”s.
	`’d
(); it++){

1098 
	`Log
(è<< 
kWARNING
 << 
™
->
fœ¡
 << 
Endl
;

1099 
¡d
::
o¡ršg¡»am
 
oss
;

1100 (
™
->
£cÚd
)->
	`Pršt
(
oss
);

1101 
	`Log
()<<
oss
.
	`¡r
();

1102 
	`Log
()<<
Endl
;

1105 
O±imizeCÚfigP¬am‘”s
 
	`İtimize
(
this
, 
tuÃP¬am‘”s
, 
fomTy³
, 
f™Ty³
);

1106 
tuÃdP¬am‘”s
=
İtimize
.
	`İtimize
();

1108  
tuÃdP¬am‘”s
;

1110 
	}
}

1115 
	gTMVA
::
M‘hodBDT
::
S‘TuÃP¬am‘”s
(
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
tuÃP¬am‘”s
)

1117 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
>::
™”©Ü
 
™
;

1118 
	g™
=
tuÃP¬am‘”s
.
begš
(); it!ğtuÃP¬am‘”s.
’d
(); it++){

1119 
Log
(è<< 
	gkWARNING
 << 
	g™
->
	gfœ¡
 << " = " << it->
	g£cÚd
 << 
	gEndl
;

1120 ià(
	g™
->
	gfœ¡
 =ğ"MaxD•th" ) 
S‘MaxD•th
 ((
IÁ_t
)
™
->
£cÚd
);

1121 ià(
	g™
->
	gfœ¡
 =ğ"MšNodeSize" ) 
S‘MšNodeSize
 (
™
->
£cÚd
);

1122 ià(
	g™
->
	gfœ¡
 =ğ"NT»es" ) 
S‘NT»es
 ((
IÁ_t
)
™
->
£cÚd
);

1123 ià(
	g™
->
	gfœ¡
 =ğ"NodePur™yLim™"è
S‘NodePur™yLim™
 (
™
->
£cÚd
);

1124 ià(
	g™
->
	gfœ¡
 =ğ"AdaBoo¡B‘a" ) 
S‘AdaBoo¡B‘a
 (
™
->
£cÚd
);

1125 ià(
	g™
->
	gfœ¡
 =ğ"Shrškage" ) 
S‘Shrškage
 (
™
->
£cÚd
);

1126 ià(
	g™
->
	gfœ¡
 =ğ"U£Nv¬s" ) 
S‘U£Nv¬s
 ((
IÁ_t
)
™
->
£cÚd
);

1127 ià(
	g™
->
	gfœ¡
 =ğ"BaggedSam¶eF¿ùiÚ" ) 
S‘BaggedSam¶eF¿ùiÚ
 (
™
->
£cÚd
);

1128 
Log
(è<< 
	gkFATAL
 << " S‘P¬am‘” fÜ " << 
	g™
->
	gfœ¡
 << "‚Ù y‘ im¶em’‹d " <<
	gEndl
;

1135 
	gTMVA
::
M‘hodBDT
::
	$T¿š
()

1137 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
Œue
;

1142 
	`In™Ev’tSam¶e
();

1144 ià(
fNT»es
==0){

1145 
	`Log
(è<< 
kERROR
 << " Zero Decision Trees demanded...hat does‚ot work !! "

1147 << 
Endl
;

1148 
fNT»es
 = 1;

1151 ià(
fIÁ”aùive
 && fIÁ”aùive->
	`NÙIn™Ÿlized
()){

1152 
¡d
::
veùÜ
<
TSŒšg
> 
t™Ës
 = {"Boost weight", "Error Fraction"};

1153 
fIÁ”aùive
->
	`In™
(
t™Ës
);

1155 
fIPyMaxI‹r
 = 
fNT»es
;

1156 
fEx™FromT¿ššg
 = 
çl£
;

1160 ià(
	`IsNÜm®i£d
()è
	`Log
(è<< 
kFATAL
 << "\"Normalise\" option cannot be used with BDT; "

1163 << 
Endl
;

1165 if(
	`DoReg»ssiÚ
())

1166 
	`Log
(è<< 
kINFO
 << "Reg»ssiÚ Los FunùiÚ: "<< 
fReg»ssiÚLossFunùiÚBDTG
->
	`Name
(è<< 
Endl
;

1168 
	`Log
(è<< 
kINFO
 << "T¿ššg "<< 
fNT»es
 << " DecisiÚ T»e ...…©›nû…Ëa£" << 
Endl
;

1170 
	`Log
(è<< 
kDEBUG
 << "T¿ššg w™h maxim® d•th = " <<
fMaxD•th


1171 << ", MšNodeEv’ts=" << 
fMšNodeEv’ts


1172 << ", NT»es="<<
fNT»es


1173 << ", NodePur™yLim™="<<
fNodePur™yLim™


1174 << ", AdaBoo¡B‘a="<<
fAdaBoo¡B‘a


1175 << 
Endl
;

1178 
IÁ_t
 
nBšs
;

1179 
DoubË_t
 
xMš
,
xMax
;

1180 
TSŒšg
 
hÇme
 = "AdaBooost weight distribution";

1182 
nBšs
= 100;

1183 
xMš
 = 0;

1184 
xMax
 = 30;

1186 ià(
	`DoReg»ssiÚ
()) {

1187 
nBšs
= 100;

1188 
xMš
 = 0;

1189 
xMax
 = 1;

1190 
hÇme
="Boostƒvent weights distribution";

1195 
TH1
* 
h
 = 
Ãw
 
	`TH1F
(
	`FÜm
("%s_Boo¡Weight",
	`D©aInfo
().
	`G‘Name
()),
hÇme
,
nBšs
,
xMš
,
xMax
);

1196 
TH1
* 
nodesBefÜePrunšgVsT»e
 = 
Ãw
 
	`TH1I
(
	`FÜm
("%s_NodesBefÜePrunšg",
	`D©aInfo
().
	`G‘Name
()),"node befÜ´unšg",
fNT»es
,0,fNTrees);

1197 
TH1
* 
nodesAá”PrunšgVsT»e
 = 
Ãw
 
	`TH1I
(
	`FÜm
("%s_NodesAá”Prunšg",
	`D©aInfo
().
	`G‘Name
()),"node aá”…runšg",
fNT»es
,0,fNTrees);

1201 if(!
	`DoMuÉişass
()){

1202 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

1204 
h
->
	`S‘XT™Ë
("boost weight");

1205 
»suÉs
->
	`StÜe
(
h
, "BoostWeights");

1209 ià(
fDoBoo¡MÚ™Ü
){

1210 
TH2
* 
boo¡MÚ™Ü
 = 
Ãw
 
	`TH2F
("Boo¡MÚ™Ü","ROC IÁeg¿ÈV iT»e",2,0,
fNT»es
,2,0,1.05);

1211 
boo¡MÚ™Ü
->
	`S‘XT™Ë
("#tree");

1212 
boo¡MÚ™Ü
->
	`S‘YT™Ë
("ROC Integral");

1213 
»suÉs
->
	`StÜe
(
boo¡MÚ™Ü
, "BoostMonitor");

1214 
TG¿ph
 *
boo¡MÚ™ÜG¿ph
 = 
Ãw
 
	`TG¿ph
();

1215 
boo¡MÚ™ÜG¿ph
->
	`S‘Name
("BoostMonitorGraph");

1216 
boo¡MÚ™ÜG¿ph
->
	`S‘T™Ë
("ROCIntegralVsNTrees");

1217 
»suÉs
->
	`StÜe
(
boo¡MÚ™ÜG¿ph
, "BoostMonitorGraph");

1221 
h
 = 
Ãw
 
	`TH1F
("Boo¡WeightVsT»e","Boo¡ weight v Œ“",
fNT»es
,0,fNTrees);

1222 
h
->
	`S‘XT™Ë
("#tree");

1223 
h
->
	`S‘YT™Ë
("boost weight");

1224 
»suÉs
->
	`StÜe
(
h
, "BoostWeightsVsTree");

1227 
h
 = 
Ãw
 
	`TH1F
("E¼F¿ùHi¡","”rÜ f¿ùiÚ v Œ“‚umb”",
fNT»es
,0,fNTrees);

1228 
h
->
	`S‘XT™Ë
("#tree");

1229 
h
->
	`S‘YT™Ë
("error fraction");

1230 
»suÉs
->
	`StÜe
(
h
, "ErrorFrac");

1233 
nodesBefÜePrunšgVsT»e
->
	`S‘XT™Ë
("#tree");

1234 
nodesBefÜePrunšgVsT»e
->
	`S‘YT™Ë
("#tree‚odes");

1235 
»suÉs
->
	`StÜe
(
nodesBefÜePrunšgVsT»e
);

1238 
nodesAá”PrunšgVsT»e
->
	`S‘XT™Ë
("#tree");

1239 
nodesAá”PrunšgVsT»e
->
	`S‘YT™Ë
("#tree‚odes");

1240 
»suÉs
->
	`StÜe
(
nodesAá”PrunšgVsT»e
);

1244 
fMÚ™ÜNtu¶e
ğ
Ãw
 
	`TT»e
("MonitorNtuple","BDT variables");

1245 
fMÚ™ÜNtu¶e
->
	`B¿nch
("iT»e",&
fIT»e
,"iTree/I");

1246 
fMÚ™ÜNtu¶e
->
	`B¿nch
("boo¡Weight",&
fBoo¡Weight
,"boostWeight/D");

1247 
fMÚ™ÜNtu¶e
->
	`B¿nch
("”rÜF¿ùiÚ",&
fE¼ÜF¿ùiÚ
,"errorFraction/D");

1249 
Tim”
 
	`tim”
Ğ
fNT»es
, 
	`G‘Name
() );

1250 
IÁ_t
 
nNodesBefÜePrunšgCouÁ
 = 0;

1251 
IÁ_t
 
nNodesAá”PrunšgCouÁ
 = 0;

1253 
IÁ_t
 
nNodesBefÜePrunšg
 = 0;

1254 
IÁ_t
 
nNodesAá”Prunšg
 = 0;

1257 if(
fBoo¡Ty³
=="Grad"){

1258 
	`In™G¿dBoo¡
(
fEv’tSam¶e
);

1261 
IÁ_t
 
™»e
=0;

1262 
BoŞ_t
 
cÚtšueBoo¡
=
kTRUE
;

1264 
™»e
 < 
fNT»es
 && 
cÚtšueBoo¡
){

1265 ià(
fEx™FromT¿ššg
) ;

1266 
fIPyCu¼’tI‹r
 = 
™»e
;

1267 
tim”
.
	`D¿wProg»ssB¬
Ğ
™»e
 );

1278 if(
	`DoMuÉişass
()){

1279 ià(
fBoo¡Ty³
!="Grad"){

1280 
	`Log
(è<< 
kFATAL
 << "Multiclass is currently only supported by gradient boost. "

1282 << 
Endl
;

1284 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

1285 
UIÁ_t
 
i
=0;i<
nCÏs£s
;i++){

1286 
fFÜe¡
.
	`push_back
Ğ
Ãw
 
	`DecisiÚT»e
Ğ
fS•Ty³
, 
fMšNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 
i
,

1287 
fRªdomi£dT»es
, 
fU£Nv¬s
, 
fU£PoissÚNv¬s
, 
fMaxD•th
,

1288 
™»e
*
nCÏs£s
+
i
, 
fNodePur™yLim™
, itree*nClasses+1));

1289 
fFÜe¡
.
	`back
()->
	`S‘NV¬s
(
	`G‘Nv¬
());

1290 ià(
fU£Fish”Cuts
) {

1291 
fFÜe¡
.
	`back
()->
	`S‘U£Fish”Cuts
();

1292 
fFÜe¡
.
	`back
()->
	`S‘MšLšCÜrFÜFish”
(
fMšLšCÜrFÜFish”
);

1293 
fFÜe¡
.
	`back
()->
	`S‘U£ExşusiveV¬s
(
fU£ExşusiveV¬s
);

1297 
nNodesBefÜePrunšg
 = 
fFÜe¡
.
	`back
()->
	`BudT»e
(*
fT¿šSam¶e
);

1298 
DoubË_t
 
bw
 = 
this
->
	`Boo¡
(*
fT¿šSam¶e
, 
fFÜe¡
.
	`back
(),
i
);

1299 ià(
bw
 > 0) {

1300 
fBoo¡Weights
.
	`push_back
(
bw
);

1302 
fBoo¡Weights
.
	`push_back
(0);

1303 
	`Log
(è<< 
kWARNING
 << "¡İ³d boo¡šg‡ˆ™»e="<<
™»e
 << 
Endl
;

1305 
cÚtšueBoo¡
=
kFALSE
;

1310 
fFÜe¡
.
	`push_back
Ğ
Ãw
 
	`DecisiÚT»e
Ğ
fS•Ty³
, 
fMšNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 
fSigÇlCÏss
,

1311 
fRªdomi£dT»es
, 
fU£Nv¬s
, 
fU£PoissÚNv¬s
, 
fMaxD•th
,

1312 
™»e
, 
fNodePur™yLim™
, itree));

1313 
fFÜe¡
.
	`back
()->
	`S‘NV¬s
(
	`G‘Nv¬
());

1314 ià(
fU£Fish”Cuts
) {

1315 
fFÜe¡
.
	`back
()->
	`S‘U£Fish”Cuts
();

1316 
fFÜe¡
.
	`back
()->
	`S‘MšLšCÜrFÜFish”
(
fMšLšCÜrFÜFish”
);

1317 
fFÜe¡
.
	`back
()->
	`S‘U£ExşusiveV¬s
(
fU£ExşusiveV¬s
);

1320 
nNodesBefÜePrunšg
 = 
fFÜe¡
.
	`back
()->
	`BudT»e
(*
fT¿šSam¶e
);

1322 ià(
fU£YesNoL—f
 && !
	`DoReg»ssiÚ
(è&& 
fBoo¡Ty³
!="Grad") {

1323 
nNodesBefÜePrunšg
 = 
fFÜe¡
.
	`back
()->
	`CËªT»e
();

1326 
nNodesBefÜePrunšgCouÁ
 +ğ
nNodesBefÜePrunšg
;

1327 
nodesBefÜePrunšgVsT»e
->
	`S‘BšCÚ‹Á
(
™»e
+1,
nNodesBefÜePrunšg
);

1329 
fFÜe¡
.
	`back
()->
	`S‘PruÃM‘hod
(
fPruÃM‘hod
);

1330 
fFÜe¡
.
	`back
()->
	`S‘PruÃSŒ’gth
(
fPruÃSŒ’gth
);

1332 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*> * 
v®id©iÚSam¶e
 = 
NULL
;

1333 if(
fAutom©ic
è
v®id©iÚSam¶e
 = &
fV®id©iÚSam¶e
;

1335 
DoubË_t
 
bw
 = 
this
->
	`Boo¡
(*
fT¿šSam¶e
, 
fFÜe¡
.
	`back
());

1336 ià(
bw
 > 0) {

1337 
fBoo¡Weights
.
	`push_back
(
bw
);

1339 
fBoo¡Weights
.
	`push_back
(0);

1340 
	`Log
(è<< 
kWARNING
 << "¡İ³d boo¡šg‡ˆ™»e="<<
™»e
 << 
Endl
;

1341 
cÚtšueBoo¡
=
kFALSE
;

1349 ià(
fPruÃM‘hod
 !ğ
DecisiÚT»e
::
kNoPrunšg
è
fFÜe¡
.
	`back
()->
	`PruÃT»e
(
v®id©iÚSam¶e
);

1351 ià(
fU£YesNoL—f
 && !
	`DoReg»ssiÚ
(è&& 
fBoo¡Ty³
!="Grad"){

1352 
fFÜe¡
.
	`back
()->
	`CËªT»e
();

1354 
nNodesAá”Prunšg
 = 
fFÜe¡
.
	`back
()->
	`G‘NNodes
();

1355 
nNodesAá”PrunšgCouÁ
 +ğ
nNodesAá”Prunšg
;

1356 
nodesAá”PrunšgVsT»e
->
	`S‘BšCÚ‹Á
(
™»e
+1,
nNodesAá”Prunšg
);

1358 ià(
fIÁ”aùive
){

1359 
fIÁ”aùive
->
	`AddPošt
(
™»e
, 
fBoo¡Weight
, 
fE¼ÜF¿ùiÚ
);

1361 
fIT»e
 = 
™»e
;

1362 
fMÚ™ÜNtu¶e
->
	`Fl
();

1363 ià(
fDoBoo¡MÚ™Ü
){

1364 ià(! 
	`DoReg»ssiÚ
() ){

1365 iàĞ
™»e
==
fNT»es
-1 || (!(itree%500)) ||

1366 (!(
™»e
%250) && itree <1000)||

1367 (!(
™»e
%100) && itree < 500)||

1368 (!(
™»e
%50) && itree < 250)||

1369 (!(
™»e
%25) && itree < 150)||

1370 (!(
™»e
%10) && itree < 50)||

1371 (!(
™»e
%5) && itree < 20)

1372 è
	`Boo¡MÚ™Ü
(
™»e
);

1376 
™»e
++;

1380 
	`Log
(è<< 
kDEBUG
 << "\t<T¿š>ƒÏp£dime: " << 
tim”
.
	`G‘EÏp£dTime
()

1381 << " " << 
Endl
;

1382 ià(
fPruÃM‘hod
 =ğ
DecisiÚT»e
::
kNoPrunšg
) {

1383 
	`Log
(è<< 
kDEBUG
 << "\t<Train>‡verage‚umber of‚odes (w/o…runing) : "

1384 << 
nNodesBefÜePrunšgCouÁ
/
	`G‘NT»es
(è<< 
Endl
;

1387 
	`Log
(è<< 
kDEBUG
 << "\t<Train>‡verage‚umber of‚odes before/after…runing : "

1388 << 
nNodesBefÜePrunšgCouÁ
/
	`G‘NT»es
() << " / "

1389 << 
nNodesAá”PrunšgCouÁ
/
	`G‘NT»es
()

1390 << 
Endl
;

1392 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
çl£
;

1397 
	`Log
(è<< 
kDEBUG
 << "Now I d–‘th´iv© d©¨§m¶e"<< 
Endl
;

1398 
UIÁ_t
 
i
=0; i<
fEv’tSam¶e
.
	`size
(); i++è
d–‘e
 fEventSample[i];

1399 
UIÁ_t
 
i
=0; i<
fV®id©iÚSam¶e
.
	`size
(); i++è
d–‘e
 fValidationSample[i];

1400 
fEv’tSam¶e
.
	`ş—r
();

1401 
fV®id©iÚSam¶e
.
	`ş—r
();

1403 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

1404 
	`Ex™FromT¿ššg
();

1405 
	}
}

1411 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$G‘G¿dBoo¡MVA
(cÚ¡ 
TMVA
::
Ev’t
* 
e
, 
UIÁ_t
 
nT»es
)

1413 
DoubË_t
 
sum
=0;

1414 
UIÁ_t
 
™»e
=0; iŒ“<
nT»es
; itree++) {

1416 
sum
 +ğ
fFÜe¡
[
™»e
]->
	`CheckEv’t
(
e
,
kFALSE
);

1419  2.0/(1.0+
	`exp
(-2.0*
sum
))-1;

1420 
	}
}

1425 
	gTMVA
::
M‘hodBDT
::
Upd©eT¬g‘s
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
UIÁ_t
 
şs
)

1427 ià(
DoMuÉişass
()) {

1428 
UIÁ_t
 
	gnCÏs£s
 = 
D©aInfo
().
G‘NCÏs£s
();

1429 
	g¡d
::
veùÜ
<
DoubË_t
> 
expCache
;

1430 ià(
	gşs
 =ğ
nCÏs£s
 - 1) {

1431 
expCache
.
»size
(
nCÏs£s
);

1433 autØ
	ge
 : 
ev’tSam¶e
) {

1434 
fResidu®s
[
e
].
©
(
şs
è+ğ
fFÜe¡
.
back
()->
CheckEv’t
Ó, 
kFALSE
);

1435 ià(
	gşs
 =ğ
nCÏs£s
 - 1) {

1436 autØ&
»sidu®sThisEv’t
 = 
fResidu®s
[
e
];

1437 
	g¡d
::
ŒªsfÜm
(
»sidu®sThisEv’t
.
begš
(),

1438 
»sidu®sThisEv’t
.
begš
(è+ 
nCÏs£s
,

1439 
expCache
.
begš
(), [](
DoubË_t
 
d
è{  
exp
(d); });

1440 
UIÁ_t
 
	gi
 = 0; i < 
	gnCÏs£s
; i++) {

1441 
DoubË_t
 
	gnÜm
 = 0.0;

1442 
UIÁ_t
 
	gj
 = 0; j < 
	gnCÏs£s
; j++) {

1443 ià(
	gi
 !ğ
j
) {

1444 
nÜm
 +ğ
expCache
[
j
] /ƒxpCache[
i
];

1447 
DoubË_t
 
	gp_şs
 = 1.0 / (1.0 + 
nÜm
);

1448 
DoubË_t
 
	g»s
 = (
e
->
G‘CÏss
(è=ğ
i
è? (1.0 - 
p_şs
) : (-p_cls);

1449 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
 *>(
e
)->
S‘T¬g‘
(
i
, 
»s
);

1454 autØ
	ge
 : 
ev’tSam¶e
) {

1455 autØ&
»sidu®At0
 = 
fResidu®s
[
e
].
©
(0);

1456 
	g»sidu®At0
 +ğ
fFÜe¡
.
back
()->
CheckEv’t
(
e
, 
kFALSE
);

1457 
DoubË_t
 
	gp_sig
 = 1.0 / (1.0 + 
exp
(-2.0 * 
»sidu®At0
));

1458 
DoubË_t
 
	g»s
 = (
D©aInfo
().
IsSigÇl
(
e
è? 1 : 0è- 
p_sig
;

1459 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
 *>(
e
)->
S‘T¬g‘
(0, 
»s
);

1467 
	gTMVA
::
M‘hodBDT
::
Upd©eT¬g‘sReg»ssiÚ
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
BoŞ_t
 
fœ¡
)

1469 if(!
	gfœ¡
){

1470 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
fEv’tSam¶e
.
begš
(); 
	ge
!=fEv’tSam¶e.
’d
();e++) {

1471 
	gfLossFunùiÚEv’tInfo
[*
e
].
	g´ediùedV®ue
 +ğ
fFÜe¡
.
back
()->
CheckEv’t
(*e,
kFALSE
);

1475 
	gfReg»ssiÚLossFunùiÚBDTG
->
S‘T¬g‘s
(
ev’tSam¶e
, 
fLossFunùiÚEv’tInfo
);

1481 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
G¿dBoo¡
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
, 
UIÁ_t
 
şs
)

1483 
	sL—fInfo
 {

1484 
DoubË_t
 
	gsumWeightT¬g‘
 = 0;

1485 
DoubË_t
 
	gsum2
 = 0;

1488 
	g¡d
::
unÜd”ed_m­
<
TMVA
::
DecisiÚT»eNode
*, 
	gL—fInfo
> 
	gËaves
;

1489 autØ
	ge
 : 
ev’tSam¶e
) {

1490 
DoubË_t
 
weight
 = 
e
->
G‘Weight
();

1491 
	gTMVA
::
DecisiÚT»eNode
* 
node
 = 
dt
->
G‘Ev’tNode
(*
e
);

1492 autØ&
	gv
 = 
Ëaves
[
node
];

1493 autØ
	grg‘
 = 
e
->
G‘T¬g‘
(
şs
);

1494 
	gv
.
	gsumWeightT¬g‘
 +ğ
rg‘
 * 
weight
;

1495 
	gv
.
	gsum2
 +ğ
çbs
(
rg‘
è* (1.0-çbsÑ¬g‘)è* 
weight
 * weight;

1497 autØ&
	giL—ve
 : 
Ëaves
) {

1498 
cÚ¡ex´
‡utØ
mšV®ue
 = 1e-30;

1499 ià(
	giL—ve
.
	g£cÚd
.
	gsum2
 < 
	gmšV®ue
) {

1500 
	giL—ve
.
	g£cÚd
.
	gsum2
 = 
mšV®ue
;

1502 
	giL—ve
.
	gfœ¡
->
S‘Re¥Ú£
(
fShrškage
/
D©aInfo
().
G‘NCÏs£s
(è* 
iL—ve
.
£cÚd
.
sumWeightT¬g‘
/iL—ve.£cÚd.
sum2
);

1507 
DoMuÉişass
(è? 
Upd©eT¬g‘s
(
fEv’tSam¶e
, 
şs
) : UpdateTargets(fEventSample);

1514 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
G¿dBoo¡Reg»ssiÚ
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
 )

1518 
	g¡d
::
m­
<
TMVA
::
DecisiÚT»eNode
*,
	gveùÜ
< 
	gTMVA
::
LossFunùiÚEv’tInfo
 > > 
Ëaves
;

1519 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1520 
	gTMVA
::
DecisiÚT»eNode
* 
node
 = 
dt
->
G‘Ev’tNode
(*(*
e
));

1521 (
	gËaves
[
node
]).
push_back
(
fLossFunùiÚEv’tInfo
[*
e
]);

1526 
	g¡d
::
m­
<
TMVA
::
DecisiÚT»eNode
*,
	gveùÜ
< 
	gTMVA
::
LossFunùiÚEv’tInfo
 > >::
™”©Ü
 
iL—ve
=
Ëaves
.
begš
();

1527 
	giL—ve
!=
Ëaves
.
’d
();++iLeave){

1528 
DoubË_t
 
	gf™
 = 
fReg»ssiÚLossFunùiÚBDTG
->
F™
(
iL—ve
->
£cÚd
);

1529 (
	giL—ve
->
	gfœ¡
)->
S‘Re¥Ú£
(
fShrškage
*
f™
);

1532 
Upd©eT¬g‘sReg»ssiÚ
(*
fT¿šSam¶e
);

1539 
	gTMVA
::
M‘hodBDT
::
In™G¿dBoo¡
Ğ
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
)

1544 
fS•Ty³
=
NULL
;

1545 if(
DoReg»ssiÚ
()){

1546 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1547 
	gfLossFunùiÚEv’tInfo
[*
e
]ğ
TMVA
::
LossFunùiÚEv’tInfo
((*e)->
G‘T¬g‘
(0), 0, (*e)->
G‘Weight
());

1550 
	gfReg»ssiÚLossFunùiÚBDTG
->
In™
(
fLossFunùiÚEv’tInfo
, 
fBoo¡Weights
);

1551 
Upd©eT¬g‘sReg»ssiÚ
(*
fT¿šSam¶e
,
kTRUE
);

1554 if(
DoMuÉişass
()){

1555 
UIÁ_t
 
	gnCÏs£s
 = 
D©aInfo
().
G‘NCÏs£s
();

1556 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1557 
UIÁ_t
 
	gi
=0;i<
	gnCÏs£s
;i++){

1559 
DoubË_t
 
	gr
 = (*
e
)->
G‘CÏss
()==
i
?(1-1.0/
nCÏs£s
):(-1.0/nClasses);

1560 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
*>(*
e
)->
S‘T¬g‘
(
i
,
r
);

1561 
	gfResidu®s
[*
e
].
push_back
(0);

1566 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1567 
DoubË_t
 
	gr
 = (
D©aInfo
().
IsSigÇl
(*
e
)?1:0)-0.5;

1568 
	gcÚ¡_ÿ¡
<
	gTMVA
::
Ev’t
*>(*
e
)->
S‘T¬g‘
(0,
r
);

1569 
	gfResidu®s
[*
e
].
push_back
(0);

1577 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$Te¡T»eQu®™y
Ğ
DecisiÚT»e
 *
dt
 )

1579 
DoubË_t
 
ncÜ»ù
=0, 
nçl£
=0;

1580 
UIÁ_t
 
›vt
=0; ievt<
fV®id©iÚSam¶e
.
	`size
(); ievt++) {

1581 
BoŞ_t
 
isSigÇlTy³
ğ(
dt
->
	`CheckEv’t
(
fV®id©iÚSam¶e
[
›vt
]è> 
fNodePur™yLim™
 ) ? 1 : 0;

1583 ià(
isSigÇlTy³
 =ğ(
	`D©aInfo
().
	`IsSigÇl
(
fV®id©iÚSam¶e
[
›vt
])) ) {

1584 
ncÜ»ù
 +ğ
fV®id©iÚSam¶e
[
›vt
]->
	`G‘Weight
();

1587 
nçl£
 +ğ
fV®id©iÚSam¶e
[
›vt
]->
	`G‘Weight
();

1591  
ncÜ»ù
 / (ncÜ»ù + 
nçl£
);

1592 
	}
}

1598 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
Boo¡
Ğ
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
, 
UIÁ_t
 
şs
 )

1600 
DoubË_t
 
	g»tuºV®
=-1;

1602 ià(
	gfBoo¡Ty³
=="AdaBoo¡"è
»tuºV®
 = 
this
->
AdaBoo¡
 (
ev’tSam¶e
, 
dt
);

1603 ià(
	gfBoo¡Ty³
=="AdaCo¡"è
»tuºV®
 = 
this
->
AdaCo¡
 (
ev’tSam¶e
, 
dt
);

1604 ià(
	gfBoo¡Ty³
=="Baggšg"è
»tuºV®
 = 
this
->
Baggšg
 ( );

1605 ià(
	gfBoo¡Ty³
=="RegBoo¡"è
»tuºV®
 = 
this
->
RegBoo¡
 (
ev’tSam¶e
, 
dt
);

1606 ià(
	gfBoo¡Ty³
=="AdaBoo¡R2"è
»tuºV®
 = 
this
->
AdaBoo¡R2
(
ev’tSam¶e
, 
dt
);

1607 ià(
	gfBoo¡Ty³
=="Grad"){

1608 if(
DoReg»ssiÚ
())

1609 
»tuºV®
 = 
this
->
G¿dBoo¡Reg»ssiÚ
(
ev’tSam¶e
, 
dt
);

1610 if(
DoMuÉişass
())

1611 
	g»tuºV®
 = 
this
->
G¿dBoo¡
 (
ev’tSam¶e
, 
dt
, 
şs
);

1613 
	g»tuºV®
 = 
this
->
G¿dBoo¡
 (
ev’tSam¶e
, 
dt
);

1616 
Log
(è<< 
	gkINFO
 << 
G‘O±iÚs
(è<< 
	gEndl
;

1617 
Log
(è<< 
	gkFATAL
 << "<Boo¡> unknowÀboo¡ o±iÚ " << 
	gfBoo¡Ty³
<< " c®Ëd" << 
	gEndl
;

1620 ià(
	gfBaggedBoo¡
){

1621 
G‘BaggedSubSam¶e
(
fEv’tSam¶e
);

1625  
	g»tuºV®
;

1632 
	gTMVA
::
M‘hodBDT
::
	$Boo¡MÚ™Ü
(
IÁ_t
 
iT»e
)

1634 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(),
Ty³s
::
kT¿ššg
, Ty³s::
kMaxAÇlysisTy³
);

1636 
TH1F
 *
tmpS
 = 
Ãw
 
	`TH1F
( "tmpS", "", 100 , -1., 1.00001 );

1637 
TH1F
 *
tmpB
 = 
Ãw
 
	`TH1F
( "tmpB", "", 100 , -1., 1.00001 );

1638 
TH1F
 *
tmp
;

1641 
UIÁ_t
 
sigÇlCÏssNr
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

1651 
UIÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NTe¡Ev’ts
();

1652 
UIÁ_t
 
›v
=0; iev < 
Ãv’ts
; iev++){

1653 cÚ¡ 
Ev’t
* 
ev’t
 = 
	`G‘Te¡šgEv’t
(
›v
);

1655 ià(
ev’t
->
	`G‘CÏss
(è=ğ
sigÇlCÏssNr
è{
tmp
=
tmpS
;}

1656 {
tmp
=
tmpB
;}

1657 
tmp
->
	`Fl
(
	`Priv©eG‘MvaV®ue
(
ev’t
),ev’t->
	`G‘Weight
());

1659 
DoubË_t
 
max
=1;

1661 
¡d
::
veùÜ
<
TH1F
*> 
hS
;

1662 
¡d
::
veùÜ
<
TH1F
*> 
hB
;

1663 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

1664 
hS
.
	`push_back
(
Ãw
 
	`TH1F
(
	`FÜm
("SigV¬%dAtT»e%d",
iv¬
,
iT»e
),FÜm("SigV¬%dAtT»e%d",iv¬,iT»e),100,
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘Mš
(),D©aInfo().G‘V¬ŸbËInfo(iv¬).
	`G‘Max
()));

1665 
hB
.
	`push_back
(
Ãw
 
	`TH1F
(
	`FÜm
("BkgV¬%dAtT»e%d",
iv¬
,
iT»e
),FÜm("BkgV¬%dAtT»e%d",iv¬,iT»e),100,
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘Mš
(),D©aInfo().G‘V¬ŸbËInfo(iv¬).
	`G‘Max
()));

1666 
»suÉs
->
	`StÜe
(
hS
.
	`back
(),hS.back()->
	`G‘T™Ë
());

1667 
»suÉs
->
	`StÜe
(
hB
.
	`back
(),hB.back()->
	`G‘T™Ë
());

1671 
UIÁ_t
 
›v
=0; iev < 
fEv’tSam¶e
.
	`size
(); iev++){

1672 ià(
fEv’tSam¶e
[
›v
]->
	`G‘Boo¡Weight
(è> 
max
) max = 1.01*fEventSample[iev]->GetBoostWeight();

1674 
TH1F
 *
tmpBoo¡WeightsS
 = 
Ãw
 
	`TH1F
(
	`FÜm
("Boo¡WeightsInT»eS%d",
iT»e
),FÜm("Boo¡WeightsInT»eS%d",iT»e),100,0.,
max
);

1675 
TH1F
 *
tmpBoo¡WeightsB
 = 
Ãw
 
	`TH1F
(
	`FÜm
("Boo¡WeightsInT»eB%d",
iT»e
),FÜm("Boo¡WeightsInT»eB%d",iT»e),100,0.,
max
);

1676 
»suÉs
->
	`StÜe
(
tmpBoo¡WeightsS
,tmpBoo¡WeightsS->
	`G‘T™Ë
());

1677 
»suÉs
->
	`StÜe
(
tmpBoo¡WeightsB
,tmpBoo¡WeightsB->
	`G‘T™Ë
());

1679 
TH1F
 *
tmpBoo¡Weights
;

1680 
¡d
::
veùÜ
<
TH1F
*> *
h
;

1682 
UIÁ_t
 
›v
=0; iev < 
fEv’tSam¶e
.
	`size
(); iev++){

1683 ià(
fEv’tSam¶e
[
›v
]->
	`G‘CÏss
(è=ğ
sigÇlCÏssNr
) {

1684 
tmpBoo¡Weights
=
tmpBoo¡WeightsS
;

1685 
h
=&
hS
;

1687 
tmpBoo¡Weights
=
tmpBoo¡WeightsB
;

1688 
h
=&
hB
;

1690 
tmpBoo¡Weights
->
	`Fl
(
fEv’tSam¶e
[
›v
]->
	`G‘Boo¡Weight
());

1691 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

1692 (*
h
)[
iv¬
]->
	`Fl
(
fEv’tSam¶e
[
›v
]->
	`G‘V®ue
(iv¬),fEv’tSam¶e[›v]->
	`G‘Weight
());

1697 
TMVA
::
PDF
 *
sig
 = 
Ãw
 TMVA::
	`PDF
Ğ" PDF Sig", 
tmpS
, TMVA::PDF::
kS¶še3
 );

1698 
TMVA
::
PDF
 *
bkg
 = 
Ãw
 TMVA::
	`PDF
Ğ" PDF Bkg", 
tmpB
, TMVA::PDF::
kS¶še3
 );

1701 
TG¿ph
* 
gr
=
»suÉs
->
	`G‘G¿ph
("BoostMonitorGraph");

1702 
IÁ_t
 
nPošts
 = 
gr
->
	`G‘N
();

1703 
gr
->
	`S‘
(
nPošts
+1);

1704 
gr
->
	`S‘Pošt
(
nPošts
,(
DoubË_t
)
iT»e
+1,
	`G‘ROCIÁeg¿l
(
sig
,
bkg
));

1706 
tmpS
->
	`D–‘e
();

1707 
tmpB
->
	`D–‘e
();

1709 
d–‘e
 
sig
;

1710 
d–‘e
 
bkg
;

1713 
	}
}

1726 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
AdaBoo¡
Ğ
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
 )

1728 
DoubË_t
 
	g”r
=0, 
	gsumGlob®w
=0, 
	gsumGlob®wçl£
=0, 
	gsumGlob®wçl£2
=0;

1730 
	g¡d
::
veùÜ
<
DoubË_t
> 
sumw
(
D©aInfo
().
G‘NCÏs£s
(),0);

1732 
DoubË_t
 
	gmaxDev
=0;

1733 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1734 
DoubË_t
 
	gw
 = (*
e
)->
G‘Weight
();

1735 
	gsumGlob®w
 +ğ
w
;

1736 
UIÁ_t
 
	gişass
=(*
e
)->
G‘CÏss
();

1737 
	gsumw
[
işass
] +ğ
w
;

1739 iàĞ
DoReg»ssiÚ
() ) {

1740 
DoubË_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0) );

1741 
	gsumGlob®wçl£
 +ğ
w
 * 
tmpDev
;

1742 
	gsumGlob®wçl£2
 +ğ
w
 * 
tmpDev
*tmpDev;

1743 ià(
	gtmpDev
 > 
	gmaxDev
èmaxDev = 
tmpDev
;

1746 ià(
	gfU£YesNoL—f
){

1747 
BoŞ_t
 
	gisSigÇlTy³
 = (
dt
->
CheckEv’t
(*
e
,
fU£YesNoL—f
è> 
	gfNodePur™yLim™
 );

1748 ià(!(
	gisSigÇlTy³
 =ğ
D©aInfo
().
IsSigÇl
(*
e
))) {

1749 
sumGlob®wçl£
+ğ
w
;

1752 
DoubË_t
 
	gdtouut
 = (
dt
->
CheckEv’t
(*
e
,
fU£YesNoL—f
) - 0.5)*2.;

1753 
IÁ_t
 
	gŒueTy³
;

1754 ià(
D©aInfo
().
IsSigÇl
(*
e
)è
	gŒueTy³
 = 1;

1755 
	gŒueTy³
 = -1;

1756 
	gsumGlob®wçl£
+ğ
w
*
ŒueTy³
*
dtouut
;

1761 
	g”r
 = 
sumGlob®wçl£
/
sumGlob®w
 ;

1762 iàĞ
DoReg»ssiÚ
() ) {

1764 ià(
	gfAdaBoo¡R2Loss
=="linear"){

1765 
”r
 = 
sumGlob®wçl£
/
maxDev
/
sumGlob®w
 ;

1767 ià(
	gfAdaBoo¡R2Loss
=="quadratic"){

1768 
”r
 = 
sumGlob®wçl£2
/
maxDev
/maxDev/
sumGlob®w
 ;

1770 ià(
	gfAdaBoo¡R2Loss
=="exponential"){

1771 
”r
 = 0;

1772 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1773 
DoubË_t
 
	gw
 = (*
e
)->
G‘Weight
();

1774 
DoubË_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0) );

1775 
	g”r
 +ğ
w
 * (1 - 
exp
 (-
tmpDev
/
maxDev
)è/ 
sumGlob®w
;

1780 
Log
(è<< 
	gkFATAL
 << " you've chosen‡ Lossype for Adaboost otherhan†inear, quadratic orƒxponential "

1781 << "‚am–y " << 
	gfAdaBoo¡R2Loss
 << "\n"

1782 << "ªdhi i nÙ im¶em’‹d...‡ypØšhİtiÚ ??" <<
	gEndl
;

1786 
Log
(è<< 
	gkDEBUG
 << "BDT AdaBoo  wrÚg/®l: " << 
	gsumGlob®wçl£
 << "/" << 
	gsumGlob®w
 << 
	gEndl
;

1789 
DoubË_t
 
	gÃwSumGlob®w
=0;

1790 
	g¡d
::
veùÜ
<
DoubË_t
> 
ÃwSumw
(
sumw
.
size
(),0);

1792 
DoubË_t
 
	gboo¡Weight
=1.;

1793 ià(
	g”r
 >ğ0.5 && 
fU£YesNoL—f
) {

1796 ià(
dt
->
G‘NNodes
() == 1){

1797 
Log
(è<< 
kERROR
 << " YOURree has only 1 Node... kind of‡ funny *tree*. I cannot "

1799 << 
Endl


1801 << 
Endl
;

1804 
Log
(è<< 
	gkERROR
 << " Th”rÜ„©šhBDT boo¡šg i > 0.5. ("<< 
	g”r


1806 << " stİ boo¡šg h”e" << 
	gEndl
;

1809 
	g”r
 = 0.5;

1810 } ià(
	g”r
 < 0) {

1811 
Log
(è<< 
	gkERROR
 << " Theƒrror„ate inhe BDT boosting is < 0. That can happen"

1814 << " fÜhtimbešg I s‘ iˆtØ™ absŞu‹ v®ue.. ju¡ØcÚtšue.." << 
	gEndl
;

1815 
	g”r
 = 
TM©h
::
Abs
(
”r
);

1817 ià(
	gfU£YesNoL—f
)

1818 
	gboo¡Weight
 = 
TM©h
::
Log
((1.-
”r
)/”r)*
fAdaBoo¡B‘a
;

1820 
	gboo¡Weight
 = 
TM©h
::
Log
((1.+
”r
)/(1-”r))*
fAdaBoo¡B‘a
;

1823 
Log
(è<< 
	gkDEBUG
 << "BDT AdaBoo  wrÚg/®l: " << 
	gsumGlob®wçl£
 << "/" << 
	gsumGlob®w
 << " 1-”r/”r="<<
	gboo¡Weight
<< "†og.."<<
	gTM©h
::Log(
boo¡Weight
)<<
Endl
;

1825 
ResuÉs
* 
	g»suÉs
 = 
D©a
()->
G‘ResuÉs
(
G‘M‘hodName
(),
Ty³s
::
kT¿ššg
, Ty³s::
kMaxAÇlysisTy³
);

1828 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1830 ià(
	gfU£YesNoL—f
||
DoReg»ssiÚ
()){

1831 ià((!Ğ(
	gdt
->
CheckEv’t
(*
e
,
fU£YesNoL—f
è> 
	gfNodePur™yLim™
 ) =ğ
D©aInfo
().
IsSigÇl
(*e))è|| 
DoReg»ssiÚ
()) {

1832 
DoubË_t
 
boo¡çùÜ
 = 
TM©h
::
Exp
(
boo¡Weight
);

1834 ià(
DoReg»ssiÚ
()è
	gboo¡çùÜ
 = 
TM©h
::
Pow”
(1/
boo¡Weight
,(1.-TM©h::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0è)/
maxDev
 ) );

1835 iàĞ(*
	ge
)->
G‘Weight
() > 0 ){

1836 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
);

1838 ià(
DoReg»ssiÚ
()è
	g»suÉs
->
G‘Hi¡
("Boo¡Weights")->
Fl
(
boo¡çùÜ
);

1840 iàĞ
	gfInv”£Boo¡NegWeights
 )(*
	ge
)->
SÿËBoo¡Weight
Ğ1. / 
boo¡çùÜ
);

1841 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
);

1847 
DoubË_t
 
	gdtouut
 = (
dt
->
CheckEv’t
(*
e
,
fU£YesNoL—f
) - 0.5)*2.;

1848 
IÁ_t
 
	gŒueTy³
;

1849 ià(
D©aInfo
().
IsSigÇl
(*
e
)è
	gŒueTy³
 = 1;

1850 
	gŒueTy³
 = -1;

1851 
DoubË_t
 
	gboo¡çùÜ
 = 
TM©h
::
Exp
(-1*
boo¡Weight
*
ŒueTy³
*
dtouut
);

1853 iàĞ(*
	ge
)->
G‘Weight
() > 0 ){

1854 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
);

1856 ià(
DoReg»ssiÚ
()è
	g»suÉs
->
G‘Hi¡
("Boo¡Weights")->
Fl
(
boo¡çùÜ
);

1858 iàĞ
	gfInv”£Boo¡NegWeights
 )(*
	ge
)->
SÿËBoo¡Weight
Ğ1. / 
boo¡çùÜ
);

1859 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
);

1862 
	gÃwSumGlob®w
+=(*
e
)->
G‘Weight
();

1863 
	gÃwSumw
[(*
e
)->
G‘CÏss
()] +ğ(*e)->
G‘Weight
();

1868 
DoubË_t
 
	gglob®NÜmWeight
=Ğ(DoubË_tè
ev’tSam¶e
.
size
())/
ÃwSumGlob®w
;

1869 
Log
(è<< 
	gkDEBUG
 << "Ãw Nsig="<<
	gÃwSumw
[0]*
	gglob®NÜmWeight
 << "‚ew Nbkg="<<ÃwSumw[1]*glob®NÜmWeighˆ<< 
	gEndl
;

1872 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1876 ià(
D©aInfo
().
IsSigÇl
(*
e
))(*
	ge
)->
SÿËBoo¡Weight
Ğ
glob®NÜmWeight
 * 
fSigToBkgF¿ùiÚ
 );

1877 (*
	ge
)->
SÿËBoo¡Weight
Ğ
glob®NÜmWeight
 );

1880 ià(!(
DoReg»ssiÚ
()))
	g»suÉs
->
G‘Hi¡
("Boo¡Weights")->
Fl
(
boo¡Weight
);

1881 
	g»suÉs
->
G‘Hi¡
("Boo¡WeightsVsT»e")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),
boo¡Weight
);

1882 
	g»suÉs
->
G‘Hi¡
("E¼ÜF¿c")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),
”r
);

1884 
	gfBoo¡Weight
 = 
boo¡Weight
;

1885 
	gfE¼ÜF¿ùiÚ
 = 
”r
;

1887  
	gboo¡Weight
;

1904 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
AdaCo¡
Ğ
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
 )

1906 
DoubË_t
 
	gCss
 = 
fCss
;

1907 
DoubË_t
 
	gCbb
 = 
fCbb
;

1908 
DoubË_t
 
	gCts_sb
 = 
fCts_sb
;

1909 
DoubË_t
 
	gCtb_ss
 = 
fCtb_ss
;

1911 
DoubË_t
 
	g”r
=0, 
	gsumGlob®Weights
=0, 
	gsumGlob®Co¡
=0;

1913 
	g¡d
::
veùÜ
<
DoubË_t
> 
sumw
(
D©aInfo
().
G‘NCÏs£s
(),0);

1915 
	gveùÜ
<cÚ¡ 
	gTMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1916 
DoubË_t
 
	gw
 = (*
e
)->
G‘Weight
();

1917 
	gsumGlob®Weights
 +ğ
w
;

1918 
UIÁ_t
 
	gişass
=(*
e
)->
G‘CÏss
();

1920 
	gsumw
[
işass
] +ğ
w
;

1922 iàĞ
DoReg»ssiÚ
() ) {

1923 
Log
(è<< 
	gkFATAL
 << " AdaCo¡‚Ù im¶em’‹d fÜ„eg»ssiÚ"<<
	gEndl
;

1926 
DoubË_t
 
	gdtouut
 = (
dt
->
CheckEv’t
(*
e
,
çl£
) - 0.5)*2.;

1927 
IÁ_t
 
	gŒueTy³
;

1928 
BoŞ_t
 
	gisTrueSigÇl
 = 
D©aInfo
().
IsSigÇl
(*
e
);

1929 
BoŞ_t
 
	gisS–eùedSigÇl
 = (
dtouut
>0);

1930 ià(
	gisTrueSigÇl
è
	gŒueTy³
 = 1;

1931 
	gŒueTy³
 = -1;

1933 
DoubË_t
 
	gco¡
=0;

1934 ià(
	gisTrueSigÇl
 && 
	gisS–eùedSigÇl
è
	gco¡
=
Css
;

1935 ià(
	gisTrueSigÇl
 && !
	gisS–eùedSigÇl
è
	gco¡
=
Cts_sb
;

1936 ià(!
	gisTrueSigÇl
 && 
	gisS–eùedSigÇl
è
	gco¡
=
Ctb_ss
;

1937 ià(!
	gisTrueSigÇl
 && !
	gisS–eùedSigÇl
è
	gco¡
=
Cbb
;

1938 
Log
(è<< 
	gkERROR
 << "som‘hšg w’ˆwrÚg iÀAdaCo¡" << 
	gEndl
;

1940 
	gsumGlob®Co¡
+ğ
w
*
ŒueTy³
*
dtouut
*
co¡
;

1945 iàĞ
DoReg»ssiÚ
() ) {

1946 
Log
(è<< 
	gkFATAL
 << " AdaCo¡‚Ù im¶em’‹d fÜ„eg»ssiÚ"<<
	gEndl
;

1951 
	gsumGlob®Co¡
 /ğ
sumGlob®Weights
;

1955 
DoubË_t
 
	gÃwSumGlob®Weights
=0;

1956 
	gveùÜ
<
	gDoubË_t
> 
ÃwSumCÏssWeights
(
sumw
.
size
(),0);

1958 
DoubË_t
 
	gboo¡Weight
 = 
TM©h
::
Log
((1+
sumGlob®Co¡
)/(1-sumGlob®Co¡)è* 
fAdaBoo¡B‘a
;

1960 
ResuÉs
* 
	g»suÉs
 = 
D©a
()->
G‘ResuÉs
(
G‘M‘hodName
(),
Ty³s
::
kT¿ššg
, Ty³s::
kMaxAÇlysisTy³
);

1962 
	gveùÜ
<cÚ¡ 
	gTMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

1963 
DoubË_t
 
	gdtouut
 = (
dt
->
CheckEv’t
(*
e
,
çl£
) - 0.5)*2.;

1964 
IÁ_t
 
	gŒueTy³
;

1965 
BoŞ_t
 
	gisTrueSigÇl
 = 
D©aInfo
().
IsSigÇl
(*
e
);

1966 
BoŞ_t
 
	gisS–eùedSigÇl
 = (
dtouut
>0);

1967 ià(
	gisTrueSigÇl
è
	gŒueTy³
 = 1;

1968 
	gŒueTy³
 = -1;

1970 
DoubË_t
 
	gco¡
=0;

1971 ià(
	gisTrueSigÇl
 && 
	gisS–eùedSigÇl
è
	gco¡
=
Css
;

1972 ià(
	gisTrueSigÇl
 && !
	gisS–eùedSigÇl
è
	gco¡
=
Cts_sb
;

1973 ià(!
	gisTrueSigÇl
 && 
	gisS–eùedSigÇl
è
	gco¡
=
Ctb_ss
;

1974 ià(!
	gisTrueSigÇl
 && !
	gisS–eùedSigÇl
è
	gco¡
=
Cbb
;

1975 
Log
(è<< 
	gkERROR
 << "som‘hšg w’ˆwrÚg iÀAdaCo¡" << 
	gEndl
;

1977 
DoubË_t
 
	gboo¡çùÜ
 = 
TM©h
::
Exp
(-1*
boo¡Weight
*
ŒueTy³
*
dtouut
*
co¡
);

1978 ià(
DoReg»ssiÚ
())
Log
(è<< 
	gkFATAL
 << " AdaCo¡‚Ù im¶em’‹d fÜ„eg»ssiÚ"<<
	gEndl
;

1979 iàĞ(*
	ge
)->
G‘Weight
() > 0 ){

1980 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
);

1982 ià(
DoReg»ssiÚ
())
Log
(è<< 
	gkFATAL
 << " AdaCo¡‚Ù im¶em’‹d fÜ„eg»ssiÚ"<<
	gEndl
;

1984 iàĞ
	gfInv”£Boo¡NegWeights
 )(*
	ge
)->
SÿËBoo¡Weight
Ğ1. / 
boo¡çùÜ
);

1987 
	gÃwSumGlob®Weights
+=(*
e
)->
G‘Weight
();

1988 
	gÃwSumCÏssWeights
[(*
e
)->
G‘CÏss
()] +ğ(*e)->
G‘Weight
();

1993 
DoubË_t
 
	gglob®NÜmWeight
=DoubË_t(
ev’tSam¶e
.
size
())/
ÃwSumGlob®Weights
;

1994 
Log
(è<< 
	gkDEBUG
 << "Ãw Nsig="<<
	gÃwSumCÏssWeights
[0]*
	gglob®NÜmWeight
 << "‚ew Nbkg="<<ÃwSumCÏssWeights[1]*glob®NÜmWeighˆ<< 
	gEndl
;

1997 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2000 ià(
D©aInfo
().
IsSigÇl
(*
e
))(*
	ge
)->
SÿËBoo¡Weight
Ğ
glob®NÜmWeight
 * 
fSigToBkgF¿ùiÚ
 );

2001 (*
	ge
)->
SÿËBoo¡Weight
Ğ
glob®NÜmWeight
 );

2005 ià(!(
DoReg»ssiÚ
()))
	g»suÉs
->
G‘Hi¡
("Boo¡Weights")->
Fl
(
boo¡Weight
);

2006 
	g»suÉs
->
G‘Hi¡
("Boo¡WeightsVsT»e")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),
boo¡Weight
);

2007 
	g»suÉs
->
G‘Hi¡
("E¼ÜF¿c")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),
”r
);

2009 
	gfBoo¡Weight
 = 
boo¡Weight
;

2010 
	gfE¼ÜF¿ùiÚ
 = 
”r
;

2013  
	gboo¡Weight
;

2020 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$Baggšg
( )

2026 
	}
}

2031 
	gTMVA
::
M‘hodBDT
::
G‘BaggedSubSam¶e
(
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
)

2034 
DoubË_t
 
n
;

2035 
TRªdom3
 *
	gŒªdom
 = 
Ãw
 TRªdom3(100*
fFÜe¡
.
size
()+1234);

2037 ià(!
	gfSubSam¶e
.
em±y
()èfSubSam¶e.
ş—r
();

2039 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2040 
	gn
 = 
Œªdom
->
PoissÚD
(
fBaggedSam¶eF¿ùiÚ
);

2041 
IÁ_t
 
	gi
=0;i<
	gn
;i++è
	gfSubSam¶e
.
push_back
(*
e
);

2044 
d–‘e
 
	gŒªdom
;

2065 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
RegBoo¡
Ğ
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& , 
DecisiÚT»e
* )

2073 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
AdaBoo¡R2
Ğ
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
, 
DecisiÚT»e
 *
dt
 )

2075 iàĞ!
DoReg»ssiÚ
(èè
Log
(è<< 
	gkFATAL
 << "Somehow you cho£‡„eg»ssiÚ boo¡ m‘hod fÜ‡ cÏssifiÿtiÚ job" << 
	gEndl
;

2077 
DoubË_t
 
	g”r
=0, 
	gsumw
=0, 
	gsumwçl£
=0, 
	gsumwçl£2
=0;

2078 
DoubË_t
 
	gmaxDev
=0;

2079 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2080 
DoubË_t
 
	gw
 = (*
e
)->
G‘Weight
();

2081 
	gsumw
 +ğ
w
;

2083 
DoubË_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0) );

2084 
	gsumwçl£
 +ğ
w
 * 
tmpDev
;

2085 
	gsumwçl£2
 +ğ
w
 * 
tmpDev
*tmpDev;

2086 ià(
	gtmpDev
 > 
	gmaxDev
èmaxDev = 
tmpDev
;

2090 ià(
	gfAdaBoo¡R2Loss
=="linear"){

2091 
”r
 = 
sumwçl£
/
maxDev
/
sumw
 ;

2093 ià(
	gfAdaBoo¡R2Loss
=="quadratic"){

2094 
”r
 = 
sumwçl£2
/
maxDev
/maxDev/
sumw
 ;

2096 ià(
	gfAdaBoo¡R2Loss
=="exponential"){

2097 
”r
 = 0;

2098 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2099 
DoubË_t
 
	gw
 = (*
e
)->
G‘Weight
();

2100 
DoubË_t
 
	gtmpDev
 = 
TM©h
::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0) );

2101 
	g”r
 +ğ
w
 * (1 - 
exp
 (-
tmpDev
/
maxDev
)è/ 
sumw
;

2106 
Log
(è<< 
	gkFATAL
 << " you've chosen‡ Lossype for Adaboost otherhan†inear, quadratic orƒxponential "

2107 << "‚am–y " << 
	gfAdaBoo¡R2Loss
 << "\n"

2108 << "ªdhi i nÙ im¶em’‹d...‡ypØšhİtiÚ ??" <<
	gEndl
;

2112 ià(
	g”r
 >= 0.5) {

2115 ià(
dt
->
G‘NNodes
() == 1){

2116 
Log
(è<< 
kERROR
 << " YOURree has only 1 Node... kind of‡ funny *tree*. I cannot "

2118 << 
Endl


2120 << 
Endl
;

2123 
Log
(è<< 
	gkERROR
 << " Th”rÜ„©šhBDT boo¡šg i > 0.5. ("<< 
	g”r


2126 << " stİ boo¡šg " << 
	gEndl
;

2129 
	g”r
 = 0.5;

2130 } ià(
	g”r
 < 0) {

2131 
Log
(è<< 
	gkERROR
 << " Theƒrror„ate inhe BDT boosting is < 0. That can happen"

2134 << " fÜhtimbešg I s‘ iˆtØ™ absŞu‹ v®ue.. ju¡ØcÚtšue.." << 
	gEndl
;

2135 
	g”r
 = 
TM©h
::
Abs
(
”r
);

2138 
DoubË_t
 
	gboo¡Weight
 = 
”r
 / (1.-err);

2139 
DoubË_t
 
	gÃwSumw
=0;

2141 
ResuÉs
* 
	g»suÉs
 = 
D©a
()->
G‘ResuÉs
(
G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, Ty³s::
kMaxAÇlysisTy³
);

2143 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2144 
DoubË_t
 
	gboo¡çùÜ
 = 
TM©h
::
Pow”
(
boo¡Weight
,(1.-TM©h::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0è)/
maxDev
 ) );

2145 
	g»suÉs
->
G‘Hi¡
("Boo¡Weights")->
Fl
(
boo¡çùÜ
);

2147 iàĞ(*
	ge
)->
G‘Weight
() > 0 ){

2148 
Flßt_t
 
	gÃwBoo¡Weight
 = (*
e
)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
;

2149 
Flßt_t
 
	gÃwWeight
 = (*
e
)->
G‘Weight
(è* (*e)->
G‘Boo¡Weight
(è* 
boo¡çùÜ
;

2150 ià(
	gÃwWeight
 == 0) {

2151 
Log
(è<< 
kINFO
 << "Weightğ " << (*
e
)->
G‘Weight
(è<< 
Endl
;

2152 
Log
(è<< 
	gkINFO
 << "Boo¡Weightğ" << (*
	ge
)->
G‘Boo¡Weight
(è<< 
	gEndl
;

2153 
Log
(è<< 
	gkINFO
 << "boo¡weight="<<
	gboo¡Weight
 << "ƒ¼ğ" <<
	g”r
 << 
	gEndl
;

2154 
Log
(è<< 
	gkINFO
 << "NewBoo¡Weightğ" << 
	gÃwBoo¡Weight
 << 
	gEndl
;

2155 
Log
(è<< 
	gkINFO
 << "boo¡çùÜğ" << 
	gboo¡çùÜ
 << 
	gEndl
;

2156 
Log
(è<< 
	gkINFO
 << "maxDev = " << 
	gmaxDev
 << 
	gEndl
;

2157 
Log
(è<< 
	gkINFO
 << "tmpDev = " << 
	gTM©h
::
Abs
(
dt
->
CheckEv’t
(*
e
,
kFALSE
è- (*e)->
G‘T¬g‘
(0èè<< 
	gEndl
;

2158 
Log
(è<< 
	gkINFO
 << "rg‘ = " << (*
	ge
)->
G‘T¬g‘
(0è<< 
	gEndl
;

2159 
Log
(è<< 
	gkINFO
 << "e¡im© = " << 
	gdt
->
CheckEv’t
(*
e
,
kFALSE
è<< 
	gEndl
;

2161 (*
	ge
)->
S‘Boo¡Weight
Ğ
ÃwBoo¡Weight
 );

2164 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è/ 
boo¡çùÜ
);

2166 
	gÃwSumw
+=(*
e
)->
G‘Weight
();

2170 
DoubË_t
 
	gnÜmWeight
 = 
sumw
 / 
ÃwSumw
;

2171 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
e
=
ev’tSam¶e
.
begš
(); 
	ge
!óv’tSam¶e.
’d
();e++) {

2174 (*
	ge
)->
S‘Boo¡Weight
Ğ(*
e
)->
G‘Boo¡Weight
(è* 
nÜmWeight
 );

2178 
	g»suÉs
->
G‘Hi¡
("Boo¡WeightsVsT»e")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),1./
boo¡Weight
);

2179 
	g»suÉs
->
G‘Hi¡
("E¼ÜF¿c")->
S‘BšCÚ‹Á
(
fFÜe¡
.
size
(),
”r
);

2181 
	gfBoo¡Weight
 = 
boo¡Weight
;

2182 
	gfE¼ÜF¿ùiÚ
 = 
”r
;

2184  
	gTM©h
::
Log
(1./
boo¡Weight
);

2190 
	gTMVA
::
M‘hodBDT
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

2192 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

2194 ià(
fDoP»£ËùiÚ
){

2195 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

2196 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚLowBkgV¬%d",
iv¬
), 
fIsLowBkgCut
[ivar]);

2197 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚLowBkgV¬%dV®ue",
iv¬
), 
fLowBkgCut
[ivar]);

2198 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚLowSigV¬%d",
iv¬
), 
fIsLowSigCut
[ivar]);

2199 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚLowSigV¬%dV®ue",
iv¬
), 
fLowSigCut
[ivar]);

2200 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚHighBkgV¬%d",
iv¬
), 
fIsHighBkgCut
[ivar]);

2201 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚHighBkgV¬%dV®ue",
iv¬
),
fHighBkgCut
[ivar]);

2202 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚHighSigV¬%d",
iv¬
), 
fIsHighSigCut
[ivar]);

2203 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, 
	`FÜm
("P»£ËùiÚHighSigV¬%dV®ue",
iv¬
),
fHighSigCut
[ivar]);

2208 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NT»es", 
fFÜe¡
.
	`size
() );

2209 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "AÇlysisTy³", 
fFÜe¡
.
	`back
()->
	`G‘AÇlysisTy³
() );

2211 
UIÁ_t
 
i
=0; i< 
fFÜe¡
.
	`size
(); i++) {

2212 * 
Œxml
 = 
fFÜe¡
[
i
]->
	`AddXMLTo
(
wght
);

2213 
	`gToŞs
().
	`AddA‰r
Ğ
Œxml
, "boo¡Weight", 
fBoo¡Weights
[
i
] );

2214 
	`gToŞs
().
	`AddA‰r
Ğ
Œxml
, "™»e", 
i
 );

2216 
	}
}

2221 
	gTMVA
::
M‘hodBDT
::
	$R—dWeightsFromXML
(* 
·»Á
) {

2222 
UIÁ_t
 
i
;

2223 
i
=0; i<
fFÜe¡
.
	`size
(); i++è
d–‘e
 fForest[i];

2224 
fFÜe¡
.
	`ş—r
();

2225 
fBoo¡Weights
.
	`ş—r
();

2227 
UIÁ_t
 
Á»es
;

2228 
UIÁ_t
 
ª®ysisTy³
;

2229 
Flßt_t
 
boo¡Weight
;

2232 ià(
	`gToŞs
().
	`HasA‰r
Ğ
·»Á
, 
	`FÜm
("PreselectionLowBkgVar%d",0))) {

2233 
fIsLowBkgCut
.
	`»size
(
	`G‘Nv¬
());

2234 
fLowBkgCut
.
	`»size
(
	`G‘Nv¬
());

2235 
fIsLowSigCut
.
	`»size
(
	`G‘Nv¬
());

2236 
fLowSigCut
.
	`»size
(
	`G‘Nv¬
());

2237 
fIsHighBkgCut
.
	`»size
(
	`G‘Nv¬
());

2238 
fHighBkgCut
.
	`»size
(
	`G‘Nv¬
());

2239 
fIsHighSigCut
.
	`»size
(
	`G‘Nv¬
());

2240 
fHighSigCut
.
	`»size
(
	`G‘Nv¬
());

2242 
BoŞ_t
 
tmpBoŞ
;

2243 
DoubË_t
 
tmpDoubË
;

2244 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

2245 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚLowBkgV¬%d",
iv¬
), 
tmpBoŞ
);

2246 
fIsLowBkgCut
[
iv¬
]=
tmpBoŞ
;

2247 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚLowBkgV¬%dV®ue",
iv¬
), 
tmpDoubË
);

2248 
fLowBkgCut
[
iv¬
]=
tmpDoubË
;

2249 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚLowSigV¬%d",
iv¬
), 
tmpBoŞ
);

2250 
fIsLowSigCut
[
iv¬
]=
tmpBoŞ
;

2251 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚLowSigV¬%dV®ue",
iv¬
), 
tmpDoubË
);

2252 
fLowSigCut
[
iv¬
]=
tmpDoubË
;

2253 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚHighBkgV¬%d",
iv¬
), 
tmpBoŞ
);

2254 
fIsHighBkgCut
[
iv¬
]=
tmpBoŞ
;

2255 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚHighBkgV¬%dV®ue",
iv¬
), 
tmpDoubË
);

2256 
fHighBkgCut
[
iv¬
]=
tmpDoubË
;

2257 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚHighSigV¬%d",
iv¬
),
tmpBoŞ
);

2258 
fIsHighSigCut
[
iv¬
]=
tmpBoŞ
;

2259 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, 
	`FÜm
("P»£ËùiÚHighSigV¬%dV®ue",
iv¬
), 
tmpDoubË
);

2260 
fHighSigCut
[
iv¬
]=
tmpDoubË
;

2265 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, "NT»es", 
Á»es
 );

2267 if(
	`gToŞs
().
	`HasA‰r
(
·»Á
, "TreeType")) {

2268 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, "T»eTy³", 
ª®ysisTy³
 );

2270 
	`gToŞs
().
	`R—dA‰r
Ğ
·»Á
, "AÇlysisTy³", 
ª®ysisTy³
 );

2273 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
·»Á
);

2274 
i
=0;

2275 
ch
) {

2276 
fFÜe¡
.
	`push_back
Ğ
dyÇmic_ÿ¡
<
DecisiÚT»e
*>ĞDecisiÚT»e::
	`C»©eFromXML
(
ch
, 
	`G‘T¿ššgTMVAV”siÚCode
()) ) );

2277 
fFÜe¡
.
	`back
()->
	`S‘AÇlysisTy³
(
Ty³s
::
	`EAÇlysisTy³
(
ª®ysisTy³
));

2278 
fFÜe¡
.
	`back
()->
	`S‘T»eID
(
i
++);

2279 
	`gToŞs
().
	`R—dA‰r
(
ch
,"boo¡Weight",
boo¡Weight
);

2280 
fBoo¡Weights
.
	`push_back
(
boo¡Weight
);

2281 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

2283 
	}
}

2288 
	gTMVA
::
M‘hodBDT
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

2290 
TSŒšg
 
dummy
;

2292 
IÁ_t
 
	`ª®ysisTy³
(0);

2295 
i¡r
 >> 
dummy
 >> 
fNT»es
;

2296 
	`Log
(è<< 
kINFO
 << "R—d " << 
fNT»es
 << " DecisiÚ»es" << 
Endl
;

2298 
UIÁ_t
 
i
=0;i<
fFÜe¡
.
	`size
();i++è
d–‘e
 fForest[i];

2299 
fFÜe¡
.
	`ş—r
();

2300 
fBoo¡Weights
.
	`ş—r
();

2301 
IÁ_t
 
iT»e
;

2302 
DoubË_t
 
boo¡Weight
;

2303 
i
=0;i<
fNT»es
;i++) {

2304 
i¡r
 >> 
dummy
 >> 
iT»e
 >> dummy >> 
boo¡Weight
;

2305 ià(
iT»e
 !ğ
i
) {

2306 
fFÜe¡
.
	`back
()->
	`Pršt
Ğ
¡d
::
cout
 );

2307 
	`Log
(è<< 
kFATAL
 << "Error while„eading weight file; mismatch iTree="

2308 << 
iT»e
 << " i=" << 
i


2309 << " dummy " << 
dummy


2310 << " boo¡weighˆ" << 
boo¡Weight


2311 << 
Endl
;

2313 
fFÜe¡
.
	`push_back
Ğ
Ãw
 
	`DecisiÚT»e
() );

2314 
fFÜe¡
.
	`back
()->
	`S‘AÇlysisTy³
(
Ty³s
::
	`EAÇlysisTy³
(
ª®ysisTy³
));

2315 
fFÜe¡
.
	`back
()->
	`S‘T»eID
(
i
);

2316 
fFÜe¡
.
	`back
()->
	`R—d
(
i¡r
, 
	`G‘T¿ššgTMVAV”siÚCode
());

2317 
fBoo¡Weights
.
	`push_back
(
boo¡Weight
);

2319 
	}
}

2323 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 ){

2324  
this
->
	`G‘MvaV®ue
Ğ
”r
, 
”rUµ”
, 0 );

2325 
	}
}

2332 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
, 
UIÁ_t
 
u£NT»es
 )

2334 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

2335 ià(
fDoP»£ËùiÚ
) {

2336 
DoubË_t
 
v®
 = 
	`AµlyP»£ËùiÚCuts
(
ev
);

2337 ià(
TM©h
::
	`Abs
(
v®
)>0.05)  val;

2339  
	`Priv©eG‘MvaV®ue
(
ev
, 
”r
, 
”rUµ”
, 
u£NT»es
);

2341 
	}
}

2348 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$Priv©eG‘MvaV®ue
(cÚ¡ 
TMVA
::
Ev’t
* 
ev
, 
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
, 
UIÁ_t
 
u£NT»es
 )

2351 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

2355 
UIÁ_t
 
nT»es
 = 
fFÜe¡
.
	`size
();

2357 ià(
u£NT»es
 > 0 ) 
nT»es
 = useNTrees;

2359 ià(
fBoo¡Ty³
=="G¿d"è 
	`G‘G¿dBoo¡MVA
(
ev
,
nT»es
);

2361 
DoubË_t
 
myMVA
 = 0;

2362 
DoubË_t
 
nÜm
 = 0;

2363 
UIÁ_t
 
™»e
=0; iŒ“<
nT»es
; itree++) {

2365 
myMVA
 +ğ
fBoo¡Weights
[
™»e
] * 
fFÜe¡
[™»e]->
	`CheckEv’t
(
ev
,
fU£YesNoL—f
);

2366 
nÜm
 +ğ
fBoo¡Weights
[
™»e
];

2368  ( 
nÜm
 > 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(èè? 
myMVA
 /=‚orm : 0 ;

2369 
	}
}

2375 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodBDT
::
	$G‘MuÉişassV®ues
()

2377 cÚ¡ 
TMVA
::
Ev’t
 *
e
 = 
	`G‘Ev’t
();

2378 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
èfMuÉişassR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

2379 
fMuÉişassR‘uºV®
->
	`ş—r
();

2381 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

2382 
¡d
::
veùÜ
<
DoubË_t
> 
	`‹mp
(
nCÏs£s
);

2383 autØ
fÜe¡Size
 = 
fFÜe¡
.
	`size
();

2386 
UIÁ_t
 
şassOfT»e
 = 0;

2387 
UIÁ_t
 
™»e
 = 0; iŒ“ < 
fÜe¡Size
; ++itree) {

2388 
‹mp
[
şassOfT»e
] +ğ
fFÜe¡
[
™»e
]->
	`CheckEv’t
(
e
, 
kFALSE
);

2389 ià(++
şassOfT»e
 =ğ
nCÏs£s
) classOfTree = 0;

2394 
¡d
::
	`ŒªsfÜm
(
‹mp
.
	`begš
(),emp.
	`’d
(),emp.begš(), [](
DoubË_t
 
d
){ 
	`exp
(d);});

2396 
UIÁ_t
 
iCÏss
=0; iCÏss<
nCÏs£s
; iClass++){

2397 
DoubË_t
 
nÜm
 = 0.0;

2398 
UIÁ_t
 
j
=0;j<
nCÏs£s
;j++){

2399 if(
iCÏss
!=
j
)

2400 
nÜm
 +ğ
‹mp
[
j
] /emp[
iCÏss
];

2402 (*
fMuÉişassR‘uºV®
).
	`push_back
(1.0/(1.0+
nÜm
));

2405  *
fMuÉişassR‘uºV®
;

2406 
	}
}

2411 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
> & 
TMVA
::
M‘hodBDT
::
	$G‘Reg»ssiÚV®ues
()

2414 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
èfReg»ssiÚR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

2415 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

2417 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
();

2418 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

2420 
DoubË_t
 
myMVA
 = 0;

2421 
DoubË_t
 
nÜm
 = 0;

2422 ià(
fBoo¡Ty³
=="AdaBoostR2") {

2433 
veùÜ
< 
DoubË_t
 > 
	`»¥Ú£
(
fFÜe¡
.
	`size
());

2434 
veùÜ
< 
DoubË_t
 > 
	`weight
(
fFÜe¡
.
	`size
());

2435 
DoubË_t
 
tÙ®SumOfWeights
 = 0;

2437 
UIÁ_t
 
™»e
=0; iŒ“<
fFÜe¡
.
	`size
(); itree++) {

2438 
»¥Ú£
[
™»e
] = 
fFÜe¡
[™»e]->
	`CheckEv’t
(
ev
,
kFALSE
);

2439 
weight
[
™»e
] = 
fBoo¡Weights
[itree];

2440 
tÙ®SumOfWeights
 +ğ
fBoo¡Weights
[
™»e
];

2443 
¡d
::
veùÜ
< std::veùÜ<
DoubË_t
> > 
v‹mp
;

2444 
v‹mp
.
	`push_back
Ğ
»¥Ú£
 );

2445 
v‹mp
.
	`push_back
Ğ
weight
 );

2446 
	`gToŞs
().
	`U£fulSÜtAsûndšg
Ğ
v‹mp
 );

2448 
IÁ_t
 
t
=0;

2449 
DoubË_t
 
sumOfWeights
 = 0;

2450 
sumOfWeights
 <ğ
tÙ®SumOfWeights
/2.) {

2451 
sumOfWeights
 +ğ
v‹mp
[1][
t
];

2452 
t
++;

2455 
DoubË_t
 
rV®
=0;

2456 
IÁ_t
 
couÁ
=0;

2457 
UIÁ_t
 
i
ğ
TM©h
::
	`Max
(
	`UIÁ_t
(0),UIÁ_t(
t
-(
fFÜe¡
.
	`size
()/6)-0.5));

2458 
i
< 
TM©h
::
	`Mš
(
	`UIÁ_t
(
fFÜe¡
.
	`size
()),UIÁ_t(
t
+(fForest.size()/6)+0.5)); i++) {

2459 
couÁ
++;

2460 
rV®
+=
v‹mp
[0][
i
];

2463 
evT
->
	`S‘T¬g‘
(0, 
rV®
/
	`DoubË_t
(
couÁ
) );

2465 if(
fBoo¡Ty³
=="Grad"){

2466 
UIÁ_t
 
™»e
=0; iŒ“<
fFÜe¡
.
	`size
(); itree++) {

2467 
myMVA
 +ğ
fFÜe¡
[
™»e
]->
	`CheckEv’t
(
ev
,
kFALSE
);

2470 
evT
->
	`S‘T¬g‘
(0, 
myMVA
+
fBoo¡Weights
[0] );

2473 
UIÁ_t
 
™»e
=0; iŒ“<
fFÜe¡
.
	`size
(); itree++) {

2475 
myMVA
 +ğ
fBoo¡Weights
[
™»e
] * 
fFÜe¡
[™»e]->
	`CheckEv’t
(
ev
,
kFALSE
);

2476 
nÜm
 +ğ
fBoo¡Weights
[
™»e
];

2479 
evT
->
	`S‘T¬g‘
(0, ( 
nÜm
 > 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(èè? 
myMVA
 /=‚orm : 0 );

2484 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

2485 
fReg»ssiÚR‘uºV®
->
	`push_back
Ğ
evT2
->
	`G‘T¬g‘
(0) );

2487 
d–‘e
 
evT
;

2490  *
fReg»ssiÚR‘uºV®
;

2491 
	}
}

2497 
	gTMVA
::
M‘hodBDT
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

2499 
	`Log
(è<< 
kDEBUG
 << "\tWr™mÚ™Üšg hi¡og¿m tØfe: " << 
	`Ba£Dœ
()->
	`G‘P©h
(è<< 
Endl
;

2503 
fMÚ™ÜNtu¶e
->
	`Wr™e
();

2504 
	}
}

2512 
	gveùÜ
< 
	gDoubË_t
 > 
	gTMVA
::
M‘hodBDT
::
	$G‘V¬ŸbËImpÜnû
()

2514 
fV¬ŸbËImpÜnû
.
	`»size
(
	`G‘Nv¬
());

2515 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++) {

2516 
fV¬ŸbËImpÜnû
[
iv¬
]=0;

2518 
DoubË_t
 
sum
=0;

2519 
UIÁ_t
 
™»e
 = 0; iŒ“ < 
	`G‘NT»es
(); itree++) {

2520 
¡d
::
veùÜ
<
DoubË_t
> 
	`»ÏtiveImpÜnû
(
fFÜe¡
[
™»e
]->
	`G‘V¬ŸbËImpÜnû
());

2521 
UIÁ_t
 
i
=0; i< 
»ÏtiveImpÜnû
.
	`size
(); i++) {

2522 
fV¬ŸbËImpÜnû
[
i
] +ğ
fBoo¡Weights
[
™»e
] * 
»ÏtiveImpÜnû
[i];

2526 
UIÁ_t
 
iv¬
=0; iv¬< 
fV¬ŸbËImpÜnû
.
	`size
(); ivar++){

2527 
fV¬ŸbËImpÜnû
[
iv¬
] = 
TM©h
::
	`Sq¹
(fVariableImportance[ivar]);

2528 
sum
 +ğ
fV¬ŸbËImpÜnû
[
iv¬
];

2530 
UIÁ_t
 
iv¬
=0; iv¬< 
fV¬ŸbËImpÜnû
.
	`size
(); iv¬++èfV¬ŸbËImpÜnû[iv¬] /ğ
sum
;

2532  
fV¬ŸbËImpÜnû
;

2533 
	}
}

2540 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$G‘V¬ŸbËImpÜnû
Ğ
UIÁ_t
 
iv¬
 )

2542 
¡d
::
veùÜ
<
DoubË_t
> 
»ÏtiveImpÜnû
 = 
this
->
	`G‘V¬ŸbËImpÜnû
();

2543 ià(
iv¬
 < (
UIÁ_t
)
»ÏtiveImpÜnû
.
	`size
()) „elativeImportance[ivar];

2544 
	`Log
(è<< 
kFATAL
 << "<G‘V¬ŸbËImpÜnû> iv¬ = " << 
iv¬
 << " i ouˆoà¿ng" << 
Endl
;

2547 
	}
}

2552 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodBDT
::
	$C»©eRªkšg
()

2555 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Variable Importance" );

2556 
veùÜ
< 
DoubË_t
> 
	`impÜnû
(
this
->
	`G‘V¬ŸbËImpÜnû
());

2558 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

2560 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`G‘IÅutLab–
(
iv¬
), 
impÜnû
[ivar] ) );

2563  
fRªkšg
;

2564 
	}
}

2569 
	gTMVA
::
M‘hodBDT
::
	$G‘H–pMes§ge
() const

2571 
	`Log
(è<< 
Endl
;

2572 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

2573 
	`Log
(è<< 
Endl
;

2574 
	`Log
(è<< "Boo¡ed DecisiÚ T»e ¬¨cŞËùiÚ oàšdividu® decisiÚ" << 
Endl
;

2575 
	`Log
(è<< "Œ“ which fÜm‡ muÉiv¬Ÿ‹ cÏssif›¸by (weigh‹dèmajÜ™y " << 
Endl
;

2576 
	`Log
(è<< "vÙoàthšdividu®»es. CÚ£cutivdecisiÚ»e ¬ " << 
Endl
;

2577 
	`Log
(è<< "Œašed usšghÜigš®¿ššg d©¨£ˆw™h„e-weigh‹d " << 
Endl
;

2578 
	`Log
(è<< "ev’ts. By deçuÉ,hAdaBoo¡ m‘hod i em¶oyed, which give " << 
Endl
;

2579 
	`Log
(è<< "ev’t th© w”misşassif›d iÀth´eviou Œ“‡†¬g” " << 
Endl
;

2580 
	`Log
(è<< "weighˆšhŒaššg oàthfŞlowšg»e." << 
Endl
;

2581 
	`Log
(è<< 
Endl
;

2582 
	`Log
(è<< "DecisiÚ»e ¬¨£qu’û oàbš¬y s¶™ oàthd©¨§m¶e" << 
Endl
;

2583 
	`Log
(è<< "usšg‡ sšgË disüimšªˆv¬ŸbË‡ˆ¨time. Ae¡ƒv’ˆ" << 
Endl
;

2584 
	`Log
(è<< "’dšg u°aá”h£qu’û oàËá-righˆ¥l™ š‡ fš® " << 
Endl
;

2585 
	`Log
(è<< "(\"Ëaf\"ènodi şassif›d‡ e™h” sigÇÈÜ background" << 
Endl
;

2586 
	`Log
(è<< "d•’dšg oÀthmajÜ™yy³ oàŒaššgƒv’t šh©‚ode." << 
Endl
;

2587 
	`Log
(è<< 
Endl
;

2588 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

2589 
	`Log
(è<< 
Endl
;

2590 
	`Log
(è<< "ByhÇtu» oàthbš¬y s¶™ ³rfÜmed oÀthšdividu®" << 
Endl
;

2591 
	`Log
(è<< "v¬ŸbËs, decisiÚ»e dØnÙ d—Èw–Èw™h†š—¸cÜ»ÏtiÚs" << 
Endl
;

2592 
	`Log
(è<< "b‘w“Àv¬ŸbË Ñhey‚“dØ­´oxim©thlš—¸¥l™ in" << 
Endl
;

2593 
	`Log
(è<< "thtwØdim’siÚ® s·û by‡ sequ’û oà¥l™ ÚhtwØ" << 
Endl
;

2594 
	`Log
(è<< "v¬ŸbË šdividu®ly). H’û decÜ»ÏtiÚ could bu£fuÈ" << 
Endl
;

2595 
	`Log
(è<< "tØİtimi£hBDT…”fÜmªû." << 
Endl
;

2596 
	`Log
(è<< 
Endl
;

2597 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

2598 
	`Log
(è<< 
Endl
;

2599 
	`Log
(è<< "ThtwØmo¡ impÜÁ…¬am‘” šhcÚfigu¿tiÚ‡»h " << 
Endl
;

2600 
	`Log
(è<< "mšim®‚umb” oàev’t »que¡ed by‡†—ànoda ³rûÁagoàth" <<
Endl
;

2601 
	`Log
(è<< "‚umb” oàŒaššgƒv’t (İtiÚ \"MšNodeSize\"„•Ïcšghaùu®‚umb” " << 
Endl
;

2602 
	`Log
(è<< " oàev’t \"nEv’tsMš\"‡ giv’ iÀ—¾›¸v”siÚs" << 
Endl
;

2603 
	`Log
(è<< "Iàthi numb” i toØÏrge, d‘aed f—tu» " << 
Endl
;

2604 
	`Log
(è<< "šh·¿m‘” s·û‡» h¬dØbmod–Ëd. Ià™ i toØsm®l, " << 
Endl
;

2605 
	`Log
(è<< "thriskØov”Œaš„i£ ªd boo¡šg s“m tØbËs efãùive" << 
Endl
;

2606 
	`Log
(è<< "ypiÿÈv®ue äom ou¸cu¼’ˆex³r›nû fÜ be¡…”fÜmªû " << 
Endl
;

2607 
	`Log
(è<< "‡» b‘w“À0.5(%èªd 10(%è" << 
Endl
;

2608 
	`Log
(è<< 
Endl
;

2609 
	`Log
(è<< "ThdeçuÉ mšim®‚umb” i cu¼’y s‘Ø" << 
Endl
;

2610 
	`Log
(è<< " max(20, (N_Œaššg_ev’t / N_v¬ŸbËs^2 / 10)è" << 
Endl
;

2611 
	`Log
(è<< "ªd cª bchªged byhu£r." << 
Endl
;

2612 
	`Log
(è<< 
Endl
;

2613 
	`Log
(è<< "ThÙh” crucŸÈ·¿m‘”,h´unšg sŒ’gth (\"PruÃSŒ’gth\")," << 
Endl
;

2614 
	`Log
(è<< "i ®sØ»Ï‹dØov”Œaššg. Iˆi ¨»guÏri§tiÚ…¬am‘” " << 
Endl
;

2615 
	`Log
(è<< "th© i u£d wh’ d‘”mššg‡á”hŒaššg which s¶™ " << 
Endl
;

2616 
	`Log
(è<< "¬cÚsid”ed sti¡iÿÎy insignifiÿÁ‡nd‡»„emoved. The" << 
Endl
;

2617 
	`Log
(è<< "u£¸i advi£dØÿ»fuÎy w©chhBDT sü“ÀouuˆfÜ" << 
Endl
;

2618 
	`Log
(è<< "thcom·risÚ b‘w“Àeffic›nc› obšed oÀthŒaššg‡nd" << 
Endl
;

2619 
	`Log
(è<< "thšd•’d’ˆ‹¡ sam¶e. They should bequ® w™hš sti¡iÿl" << 
Endl
;

2620 
	`Log
(è<< "”rÜs, iÀÜd”Ømšimiz¡©i¡iÿÈæuùu©iÚ š difã»Á sam¶es." << 
Endl
;

2621 
	}
}

2626 
	gTMVA
::
M‘hodBDT
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

2628 
TSŒšg
 
nodeName
 = 
şassName
;

2629 
nodeName
.
	`R•ÏûAÎ
("Read","");

2630 
nodeName
.
	`Aµ’d
("Node");

2632 
fout
 << " std::veùÜ<"<<
nodeName
<<"*> fFÜe¡; // i.e.„oÙ‚ode oàdecisiÚ»es" << 
¡d
::
’dl
;

2633 
fout
 << " std::veùÜ<doubË> fBoo¡Weights; //hweight ­¶›d iÀthšdividu® boo¡s" << 
¡d
::
’dl
;

2634 
fout
 << "};" << 
¡d
::
’dl
 << std::endl;

2635 
fout
 << "doubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

2636 
fout
 << "{" << 
¡d
::
’dl
;

2637 
fout
 << " doubË myMVA = 0;" << 
¡d
::
’dl
;

2638 ià(
fDoP»£ËùiÚ
){

2639 
UIÁ_t
 
iv¬
 = 0; iv¬< 
fIsLowBkgCut
.
	`size
(); ivar++){

2640 ià(
fIsLowBkgCut
[
iv¬
]){

2641 
fout
 << " ià(šputV®ues["<<
iv¬
<<"] < " << 
fLowBkgCut
[iv¬] << "è»tuº -1; // i background…»£ËùiÚ cut" << 
¡d
::
’dl
;

2643 ià(
fIsLowSigCut
[
iv¬
]){

2644 
fout
 << " ià(šputV®ues["<<
iv¬
<<"] < "<< 
fLowSigCut
[iv¬] << "è»tuº 1; // i sigÇÈ´e£ËùiÚ cut" << 
¡d
::
’dl
;

2646 ià(
fIsHighBkgCut
[
iv¬
]){

2647 
fout
 << " ià(šputV®ues["<<
iv¬
<<"] > "<<
fHighBkgCut
[iv¬] <<"è„‘uº -1; // i background…»£ËùiÚ cut" << 
¡d
::
’dl
;

2649 ià(
fIsHighSigCut
[
iv¬
]){

2650 
fout
 << " ià(šputV®ues["<<
iv¬
<<"] > "<<
fHighSigCut
[iv¬]<<"è„‘uº 1; // i sigÇÈ´e£ËùiÚ cut" << 
¡d
::
’dl
;

2655 ià(
fBoo¡Ty³
!="Grad"){

2656 
fout
 << " doubË‚Üm = 0;" << 
¡d
::
’dl
;

2658 
fout
 << " fÜ (unsigÃd iÁ iŒ“=0; iŒ“<fFÜe¡.size(); iŒ“++){" << 
¡d
::
’dl
;

2659 
fout
 << " "<<
nodeName
<<" *cu¼’ˆğfFÜe¡[™»e];" << 
¡d
::
’dl
;

2660 
fout
 << " wh(cu¼’t->G‘NodeTy³(è=ğ0è{ //š‹rmedŸ‹‚ode" << 
¡d
::
’dl
;

2661 
fout
 << " ià(cu¼’t->GÛsRight(šputV®ues)ècu¼’t=("<<
nodeName
<<"*)cu¼’t->G‘Right();" << 
¡d
::
’dl
;

2662 
fout
 << "ƒl£ cu¼’t=("<<
nodeName
<<"*)cu¼’t->G‘Leá();" << 
¡d
::
’dl
;

2663 
fout
 << " }" << 
¡d
::
’dl
;

2664 ià(
fBoo¡Ty³
=="Grad"){

2665 
fout
 << " myMVA +ğcu¼’t->G‘Re¥Ú£();" << 
¡d
::
’dl
;

2667 ià(
fU£YesNoL—f
è
fout
 << " myMVA +ğfBoo¡Weights[™»e] * cu¼’t->G‘NodeTy³();" << 
¡d
::
’dl
;

2668 
fout
 << " myMVA +ğfBoo¡Weights[™»e] * cu¼’t->G‘Pur™y();" << 
¡d
::
’dl
;

2669 
fout
 << "‚Üm +ğfBoo¡Weights[™»e];" << 
¡d
::
’dl
;

2671 
fout
 << " }" << 
¡d
::
’dl
;

2672 ià(
fBoo¡Ty³
=="Grad"){

2673 
fout
 << "„‘uº 2.0/(1.0+exp(-2.0*myMVA))-1.0;" << 
¡d
::
’dl
;

2675 
fout
 << "„‘uº myMVA /ğnÜm;" << 
¡d
::
’dl
;

2676 
fout
 << "};" << 
¡d
::
’dl
 << std::endl;

2677 
fout
 << "void " << 
şassName
 << "::In™Ÿlize()" << 
¡d
::
’dl
;

2678 
fout
 << "{" << 
¡d
::
’dl
;

2680 
UIÁ_t
 
™»e
=0; iŒ“<
	`G‘NT»es
(); itree++) {

2681 
fout
 << " // iŒ“ = " << 
™»e
 << 
¡d
::
’dl
;

2682 
fout
 << " fBoo¡Weights.push_back(" << 
fBoo¡Weights
[
™»e
] << ");" << 
¡d
::
’dl
;

2683 
fout
 << " fFÜe¡.push_backĞ" << 
¡d
::
’dl
;

2684 
this
->
	`MakeCÏssIn¡ªtŸ‹Node
((
DecisiÚT»eNode
*)
fFÜe¡
[
™»e
]->
	`G‘RoÙ
(), 
fout
, 
şassName
);

2685 
fout
 <<" );" << 
¡d
::
’dl
;

2687 
fout
 << "„‘uº;" << 
¡d
::
’dl
;

2688 
fout
 << "};" << 
¡d
::
’dl
;

2689 
fout
 << " " << 
¡d
::
’dl
;

2690 
fout
 << "// CËª up" << 
¡d
::
’dl
;

2691 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

2692 
fout
 << "{" << 
¡d
::
’dl
;

2693 
fout
 << " fÜ (unsigÃd iÁ iŒ“=0; iŒ“<fFÜe¡.size(); iŒ“++è{ " << 
¡d
::
’dl
;

2694 
fout
 << " d–‘fFÜe¡[™»e]; " << 
¡d
::
’dl
;

2695 
fout
 << " }" << 
¡d
::
’dl
;

2696 
fout
 << "}" << 
¡d
::
’dl
;

2697 
	}
}

2702 
	gTMVA
::
M‘hodBDT
::
	$MakeCÏssS³cificH—d”
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
) const

2704 
TSŒšg
 
nodeName
 = 
şassName
;

2705 
nodeName
.
	`R•ÏûAÎ
("Read","");

2706 
nodeName
.
	`Aµ’d
("Node");

2708 
fout
 << "#defšNN‚ew "<<
nodeName
 << 
¡d
::
’dl
;

2710 
fout
 << " " << 
¡d
::
’dl
;

2711 
fout
 << "#iâdeà"<<
nodeName
<<"__def" << 
¡d
::
’dl
;

2712 
fout
 << "#defš"<<
nodeName
<<"__def" << 
¡d
::
’dl
;

2713 
fout
 << " " << 
¡d
::
’dl
;

2714 
fout
 << "şas "<<
nodeName
<<" {" << 
¡d
::
’dl
;

2715 
fout
 << " " << 
¡d
::
’dl
;

2716 
fout
 << "public:" << 
¡d
::
’dl
;

2717 
fout
 << " " << 
¡d
::
’dl
;

2718 
fout
 << " // cÚ¡ruùÜ oàªƒs£ÁŸÎy \"em±y\"‚odæßtšg iÀ¥aû" << 
¡d
::
’dl
;

2719 
fout
 << " "<<
nodeName
<<" ( "<<nodeName<<"*†eá,"<<nodeName<<"*„ight," << 
¡d
::
’dl
;

2720 ià(
fU£Fish”Cuts
){

2721 
fout
 << " iÁ‚Fish”CÛff," << 
¡d
::
’dl
;

2722 
UIÁ_t
 
i
=0;i<
	`G‘NV¬ŸbËs
()+1;i++){

2723 
fout
 << " doubË fish”CÛff"<<
i
<<"," << 
¡d
::
’dl
;

2726 
fout
 << " iÁ s–eùÜ, doubË cutV®ue, boŞ cutTy³, " << 
¡d
::
’dl
;

2727 
fout
 << " iÁ‚odeTy³, doubË…ur™y, doubË„e¥Ú£ ) :" << 
¡d
::
’dl
;

2728 
fout
 << " fLeá (†eá )," << 
¡d
::
’dl
;

2729 
fout
 << " fRighˆ („ighˆ )," << 
¡d
::
’dl
;

2730 ià(
fU£Fish”Cuts
è
fout
 << " fNFish”CÛfàĞnFish”CÛfà)," << 
¡d
::
’dl
;

2731 
fout
 << " fS–eùÜ ( s–eùÜ )," << 
¡d
::
’dl
;

2732 
fout
 << " fCutV®u ( cutV®u )," << 
¡d
::
’dl
;

2733 
fout
 << " fCutTy³ ( cutTy³ )," << 
¡d
::
’dl
;

2734 
fout
 << " fNodeTy³ (‚odeTy³ )," << 
¡d
::
’dl
;

2735 
fout
 << " fPur™y (…ur™y )," << 
¡d
::
’dl
;

2736 
fout
 << " fRe¥Ú£ („e¥Ú£ ){" << 
¡d
::
’dl
;

2737 ià(
fU£Fish”Cuts
){

2738 
UIÁ_t
 
i
=0;i<
	`G‘NV¬ŸbËs
()+1;i++){

2739 
fout
 << " fFish”CÛff.push_back(fish”CÛff"<<
i
<<");" << 
¡d
::
’dl
;

2742 
fout
 << " }" << 
¡d
::
’dl
 << std::endl;

2743 
fout
 << " vœtu® ~"<<
nodeName
<<"();" << 
¡d
::
’dl
 << std::endl;

2744 
fout
 << " //e¡ƒv’ˆià™ desûnd thŒ“‡ˆthi nodtØthright" << 
¡d
::
’dl
;

2745 
fout
 << " vœtu® boŞ GÛsRightĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡;" << 
¡d
::
’dl
;

2746 
fout
 << " "<<
nodeName
<<"* G‘RightĞvoid ) {»tuº fRight; };" << 
¡d
::
’dl
 << std::endl;

2747 
fout
 << " //e¡ƒv’ˆià™ desûnd thŒ“‡ˆthi nodtØthËá " << 
¡d
::
’dl
;

2748 
fout
 << " vœtu® boŞ GÛsLeá ( cÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡;" << 
¡d
::
’dl
;

2749 
fout
 << " "<<
nodeName
<<"* G‘LeáĞvoid ) {„‘uº fLeá; }; " << 
¡d
::
’dl
 << std::endl;

2750 
fout
 << " //„‘uº S/(S+BèÕur™yè©hi nod(äom¿ššg)" << 
¡d
::
’dl
 << std::endl;

2751 
fout
 << " doubË G‘Pur™yĞvoid ) cÚ¡ {„‘uº fPur™y; } " << 
¡d
::
’dl
;

2752 
fout
 << " //„‘uºhnodty³" << 
¡d
::
’dl
;

2753 
fout
 << " iÁ G‘NodeTy³Ğvoid ) cÚ¡ {„‘uº fNodeTy³; }" << 
¡d
::
’dl
;

2754 
fout
 << " doubË G‘Re¥Ú£(voidècÚ¡ {»tuº fRe¥Ú£;}" << 
¡d
::
’dl
 << std::endl;

2755 
fout
 << "´iv©e:" << 
¡d
::
’dl
 << std::endl;

2756 
fout
 << " "<<
nodeName
<<"* fLeá; //…oš‹¸tØthËá daugh‹¸node" << 
¡d
::
’dl
;

2757 
fout
 << " "<<
nodeName
<<"* fRight; //…oš‹¸tØthrighˆdaugh‹¸node" << 
¡d
::
’dl
;

2758 ià(
fU£Fish”Cuts
){

2759 
fout
 << " iÁ fNFish”CÛff; // =0 iàthi noddÛ¢'ˆu£ fish”,ƒl£ =nv¬+1 " << 
¡d
::
’dl
;

2760 
fout
 << " std::veùÜ<doubË> fFish”CÛff; //hfish” cÛfà(off£ˆ©hÏ¡ƒËm’t)" << 
¡d
::
’dl
;

2762 
fout
 << " iÁ fS–eùÜ; // index oàv¬ŸbË u£d iÀnod£ËùiÚ (decisiÚ»eè " << 
¡d
::
’dl
;

2763 
fout
 << " doubË fCutV®ue; // cuˆv®u­¶›d oÀthi nodtØdisüimš©bkg‡gaš¡ sig" << 
¡d
::
’dl
;

2764 
fout
 << " boŞ fCutTy³; //rue: iàev’ˆv¬ŸbË > cutV®u==> sigÇÈ, f®£ oth”wi£" << 
¡d
::
’dl
;

2765 
fout
 << " iÁ fNodeTy³; // Ty³ oànode: -1 =ğBkg-Ëaf, 1 =ğSigÇl-Ëaf, 0 = iÁ”ÇÈ" << 
¡d
::
’dl
;

2766 
fout
 << " doubË fPur™y; // Pur™y oànodäom¿ššg"<< 
¡d
::
’dl
;

2767 
fout
 << " doubË fRe¥Ú£; // Reg»ssiÚ„e¥Ú£ v®uoànode" << 
¡d
::
’dl
;

2768 
fout
 << "}; " << 
¡d
::
’dl
;

2769 
fout
 << " " << 
¡d
::
’dl
;

2770 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

2771 
fout
 << " "<<
nodeName
<<"::~"<<nodeName<<"()" << 
¡d
::
’dl
;

2772 
fout
 << "{" << 
¡d
::
’dl
;

2773 
fout
 << " ià(fLeá !ğNULLèd–‘fLeá;" << 
¡d
::
’dl
;

2774 
fout
 << " ià(fRighˆ!ğNULLèd–‘fRight;" << 
¡d
::
’dl
;

2775 
fout
 << "}; " << 
¡d
::
’dl
;

2776 
fout
 << " " << 
¡d
::
’dl
;

2777 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

2778 
fout
 << "boŞ "<<
nodeName
<<"::GÛsRightĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

2779 
fout
 << "{" << 
¡d
::
’dl
;

2780 
fout
 << " //e¡ƒv’ˆià™ desûnd thŒ“‡ˆthi nodtØthright" << 
¡d
::
’dl
;

2781 
fout
 << " boŞ„esuÉ;" << 
¡d
::
’dl
;

2782 ià(
fU£Fish”Cuts
){

2783 
fout
 << " ià(fNFish”CÛfà=ğ0){" << 
¡d
::
’dl
;

2784 
fout
 << "„esuÉ = (šputV®ues[fS–eùÜ] > fCutV®u);" << 
¡d
::
’dl
;

2785 
fout
 << " }–£{" << 
¡d
::
’dl
;

2786 
fout
 << " doubË fish” = fFish”CÛff.©(fFish”CÛff.size()-1);" << 
¡d
::
’dl
;

2787 
fout
 << " fÜ (unsigÃd iÁ iv¬=0; iv¬<fFish”CÛff.size()-1; iv¬++)" << 
¡d
::
’dl
;

2788 
fout
 << " fish” +ğfFish”CÛff.©(iv¬)*šputV®ues.©(iv¬);" << 
¡d
::
’dl
;

2789 
fout
 << "„esuÉ = fish” > fCutV®ue;" << 
¡d
::
’dl
;

2790 
fout
 << " }" << 
¡d
::
’dl
;

2792 
fout
 << "„esuÉ = (šputV®ues[fS–eùÜ] > fCutV®u);" << 
¡d
::
’dl
;

2794 
fout
 << " ià(fCutTy³ =ğŒueè»tuº„esuÉ; //thcut ¬£Ëùšg SigÇÈ;" << 
¡d
::
’dl
;

2795 
fout
 << "ƒl£„‘uº !»suÉ;" << 
¡d
::
’dl
;

2796 
fout
 << "}" << 
¡d
::
’dl
;

2797 
fout
 << " " << 
¡d
::
’dl
;

2798 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

2799 
fout
 << "boŞ "<<
nodeName
<<"::GÛsLeáĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

2800 
fout
 << "{" << 
¡d
::
’dl
;

2801 
fout
 << " //e¡ƒv’ˆià™ desûnd thŒ“‡ˆthi nodtØthËá" << 
¡d
::
’dl
;

2802 
fout
 << " ià(!this->GÛsRight(šputV®ues)è»tuºrue;" << 
¡d
::
’dl
;

2803 
fout
 << "ƒl£„‘uº f®£;" << 
¡d
::
’dl
;

2804 
fout
 << "}" << 
¡d
::
’dl
;

2805 
fout
 << " " << 
¡d
::
’dl
;

2806 
fout
 << "#’dif" << 
¡d
::
’dl
;

2807 
fout
 << " " << 
¡d
::
’dl
;

2808 
	}
}

2813 
	gTMVA
::
M‘hodBDT
::
	$MakeCÏssIn¡ªtŸ‹Node
Ğ
DecisiÚT»eNode
 *
n
, 
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

2815 ià(
n
 =ğ
NULL
) {

2816 
	`Log
(è<< 
kFATAL
 << "MakeCÏssIn¡ªtŸ‹Node: s¹ed w™h undefšed‚ode" <<
Endl
;

2819 
fout
 << "NN("<<
¡d
::
’dl
;

2820 ià(
n
->
	`G‘Leá
(è!ğ
NULL
){

2821 
this
->
	`MakeCÏssIn¡ªtŸ‹Node
Ğ(
DecisiÚT»eNode
*)
n
->
	`G‘Leá
(è, 
fout
, 
şassName
);

2824 
fout
 << "0";

2826 
fout
 << ", " <<
¡d
::
’dl
;

2827 ià(
n
->
	`G‘Right
(è!ğ
NULL
){

2828 
this
->
	`MakeCÏssIn¡ªtŸ‹Node
Ğ(
DecisiÚT»eNode
*)
n
->
	`G‘Right
(), 
fout
, 
şassName
 );

2831 
fout
 << "0";

2833 
fout
 << ", " << 
¡d
::
’dl


2834 << 
¡d
::
	`£»cisiÚ
(6);

2835 ià(
fU£Fish”Cuts
){

2836 
fout
 << 
n
->
	`G‘NFish”CÛff
() << ", ";

2837 
UIÁ_t
 
i
=0; i< 
	`G‘NV¬ŸbËs
()+1; i++) {

2838 ià(
n
->
	`G‘NFish”CÛff
() == 0 ){

2839 
fout
 << "0, ";

2841 
fout
 << 
n
->
	`G‘Fish”CÛff
(
i
) << ", ";

2845 
fout
 << 
n
->
	`G‘S–eùÜ
() << ", "

2846 << 
n
->
	`G‘CutV®ue
() << ", "

2847 << 
n
->
	`G‘CutTy³
() << ", "

2848 << 
n
->
	`G‘NodeTy³
() << ", "

2849 << 
n
->
	`G‘Pur™y
() << ","

2850 << 
n
->
	`G‘Re¥Ú£
() << ") ";

2851 
	}
}

2858 
	gTMVA
::
M‘hodBDT
::
D‘”mšeP»£ËùiÚCuts
(cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>& 
ev’tSam¶e
)

2860 
DoubË_t
 
nTÙS
 = 0.0, 
	gnTÙB
 = 0.0;

2861 
IÁ_t
 
	gnTÙS_unWeigh‹d
 = 0, 
	gnTÙB_unWeigh‹d
 = 0;

2863 
	g¡d
::
veùÜ
<
TMVA
::
BDTEv’tW¿µ”
> 
bdtEv’tSam¶e
;

2865 
	gfIsLowSigCut
.
assign
(
G‘Nv¬
(),
kFALSE
);

2866 
	gfIsLowBkgCut
.
assign
(
G‘Nv¬
(),
kFALSE
);

2867 
	gfIsHighSigCut
.
assign
(
G‘Nv¬
(),
kFALSE
);

2868 
	gfIsHighBkgCut
.
assign
(
G‘Nv¬
(),
kFALSE
);

2870 
	gfLowSigCut
.
assign
(
G‘Nv¬
(),0.);

2871 
	gfLowBkgCut
.
assign
(
G‘Nv¬
(),0.);

2872 
	gfHighSigCut
.
assign
(
G‘Nv¬
(),0.);

2873 
	gfHighBkgCut
.
assign
(
G‘Nv¬
(),0.);

2878  
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>::
cÚ¡_™”©Ü
 
™
 = 
ev’tSam¶e
.
begš
(); 
	g™
 !ğev’tSam¶e.
’d
(); ++it ) {

2879 ià(
D©aInfo
().
IsSigÇl
(*
™
)){

2880 
	gnTÙS
 +ğ(*
™
)->
G‘Weight
();

2881 ++
	gnTÙS_unWeigh‹d
;

2884 
	gnTÙB
 +ğ(*
™
)->
G‘Weight
();

2885 ++
	gnTÙB_unWeigh‹d
;

2887 
	gbdtEv’tSam¶e
.
push_back
(
TMVA
::
BDTEv’tW¿µ”
(*
™
));

2890  
UIÁ_t
 
	giv¬
 = 0; iv¬ < 
G‘Nv¬
(); ivar++ ) {

2891 
	gTMVA
::
BDTEv’tW¿µ”
::
S‘V¬Index
(
iv¬
);

2892 
	g¡d
::
sÜt
Ğ
bdtEv’tSam¶e
.
begš
(),bdtEv’tSam¶e.
’d
() );

2894 
DoubË_t
 
	gbkgWeightCŒ
 = 0.0, 
	gsigWeightCŒ
 = 0.0;

2895 
	g¡d
::
veùÜ
<
TMVA
::
BDTEv’tW¿µ”
>::
™”©Ü
 
™
 = 
bdtEv’tSam¶e
.
begš
(), 
	g™_’d
 = bdtEv’tSam¶e.
’d
();

2896  ; 
	g™
 !ğ
™_’d
; ++it ) {

2897 ià(
D©aInfo
().
IsSigÇl
(**
™
))

2898 
	gsigWeightCŒ
 +ğ(**
™
)->
G‘Weight
();

2900 
	gbkgWeightCŒ
 +ğ(**
™
)->
G‘Weight
();

2902 
	g™
->
S‘CumuÏtiveWeight
(
çl£
,
bkgWeightCŒ
);

2903 
	g™
->
S‘CumuÏtiveWeight
(
Œue
,
sigWeightCŒ
);

2908 
DoubË_t
 
	gdV®
 = (
D©aInfo
().
G‘V¬ŸbËInfo
(
iv¬
).
G‘Max
(è- D©aInfo().G‘V¬ŸbËInfo(iv¬).
G‘Mš
())/100. ;

2909 
DoubË_t
 
	gnS–S
, 
	gnS–B
, 
	geffS
=0.05, 
	geffB
=0.05, 
	g»jS
=0.05, 
	g»jB
=0.05;

2910 
DoubË_t
 
	gtmpEffS
, 
	gtmpEffB
, 
	gtmpRejS
, 
	gtmpRejB
;

2915 
UIÁ_t
 
	g›v
 = 1; iev < 
	gbdtEv’tSam¶e
.
size
(); iev++) {

2918 
	gnS–S
 = 
bdtEv’tSam¶e
[
›v
].
G‘CumuÏtiveWeight
(
Œue
);

2919 
	gnS–B
 = 
bdtEv’tSam¶e
[
›v
].
G‘CumuÏtiveWeight
(
çl£
);

2921 
	gtmpEffS
=
nS–S
/
nTÙS
;

2922 
	gtmpEffB
=
nS–B
/
nTÙB
;

2923 
	gtmpRejS
=1-
tmpEffS
;

2924 
	gtmpRejB
=1-
tmpEffB
;

2925 ià(
	gnS–S
==0 && 
tmpEffB
>
effB
è{effBñmpEffB; 
	gfLowBkgCut
[
iv¬
] = 
bdtEv’tSam¶e
[
›v
].
G‘V®
(è- 
dV®
; 
	gfIsLowBkgCut
[iv¬]=
kTRUE
;}

2926 ià(
	gnS–B
==0 && 
tmpEffS
>
effS
è{effSñmpEffS; 
	gfLowSigCut
[
iv¬
] = 
bdtEv’tSam¶e
[
›v
].
G‘V®
(è- 
dV®
; 
	gfIsLowSigCut
[iv¬]=
kTRUE
;}

2927 ià(
	gnS–B
==
nTÙB
 && 
tmpRejS
>
»jS
è{»jSñmpRejS; 
	gfHighSigCut
[
iv¬
] = 
bdtEv’tSam¶e
[
›v
].
G‘V®
(è+ 
dV®
; 
	gfIsHighSigCut
[iv¬]=
kTRUE
;}

2928 ià(
	gnS–S
==
nTÙS
 && 
tmpRejB
>
»jB
è{»jBñmpRejB; 
	gfHighBkgCut
[
iv¬
] = 
bdtEv’tSam¶e
[
›v
].
G‘V®
(è+ 
dV®
; 
	gfIsHighBkgCut
[iv¬]=
kTRUE
;}

2933 
Log
(è<< 
	gkDEBUG
 << " \tfound‡nd sugge¡hfŞlowšg…ossibË…»-£ËùiÚ cut " << 
	gEndl
;

2934 ià(
	gfDoP»£ËùiÚ
è
Log
(è<< 
	gkDEBUG
 << "\‰hŒaššg wÈbdÚaá”he£ cuts...‡nd G‘MVA v®u»tuº +1, (-1èfÜ‡ sigÇÈ(bkgèev’ˆth©…as£ the£ cuts" << 
	gEndl
;

2935 
Log
(è<< 
	gkDEBUG
 << "\ İtiÚ DoP»£ËùiÚ wa nÙ u£d,he£ cut howev” wÈnÙ b³rfÜmed, buˆthŒaššg wÈ£thfuÎ sam¶e"<<
	gEndl
;

2936 
UIÁ_t
 
	giv¬
=0; iv¬ < 
G‘Nv¬
(); ivar++ ) {

2937 ià(
	gfIsLowBkgCut
[
iv¬
]){

2938 
Log
(è<< 
	gkDEBUG
 << " \tfound cut: Bkg iàv¬ " << 
	giv¬
 << " < " << 
	gfLowBkgCut
[
iv¬
] << 
	gEndl
;

2940 ià(
	gfIsLowSigCut
[
iv¬
]){

2941 
Log
(è<< 
	gkDEBUG
 << " \tfound cut: Sig iàv¬ " << 
	giv¬
 << " < " << 
	gfLowSigCut
[
iv¬
] << 
	gEndl
;

2943 ià(
	gfIsHighBkgCut
[
iv¬
]){

2944 
Log
(è<< 
	gkDEBUG
 << " \tfound cut: Bkg iàv¬ " << 
	giv¬
 << " > " << 
	gfHighBkgCut
[
iv¬
] << 
	gEndl
;

2946 ià(
	gfIsHighSigCut
[
iv¬
]){

2947 
Log
(è<< 
	gkDEBUG
 << " \tfound cut: Sig iàv¬ " << 
	giv¬
 << " > " << 
	gfHighSigCut
[
iv¬
] << 
	gEndl
;

2958 
DoubË_t
 
	gTMVA
::
M‘hodBDT
::
	$AµlyP»£ËùiÚCuts
(cÚ¡ 
Ev’t
* 
ev
)

2960 
DoubË_t
 
»suÉ
=0;

2962 
UIÁ_t
 
iv¬
=0; iv¬ < 
	`G‘Nv¬
(); ivar++ ) {

2963 ià(
fIsLowBkgCut
[
iv¬
]){

2964 ià(
ev
->
	`G‘V®ue
(
iv¬
è< 
fLowBkgCut
[iv¬]è
»suÉ
 = -1;

2966 ià(
fIsLowSigCut
[
iv¬
]){

2967 ià(
ev
->
	`G‘V®ue
(
iv¬
è< 
fLowSigCut
[iv¬]è
»suÉ
 = 1;

2969 ià(
fIsHighBkgCut
[
iv¬
]){

2970 ià(
ev
->
	`G‘V®ue
(
iv¬
è> 
fHighBkgCut
[iv¬]è
»suÉ
 = -1;

2972 ià(
fIsHighSigCut
[
iv¬
]){

2973 ià(
ev
->
	`G‘V®ue
(
iv¬
è> 
fHighSigCut
[iv¬]è
»suÉ
 = 1;

2977  
»suÉ
;

2978 
	}
}

	@src/MethodBase.cxx

72 
	~"TMVA/M‘hodBa£.h
"

74 
	~"TMVA/CÚfig.h
"

75 
	~"TMVA/CÚfigu¿bË.h
"

76 
	~"TMVA/D©aS‘Info.h
"

77 
	~"TMVA/D©aS‘.h
"

78 
	~"TMVA/FaùÜy.h
"

79 
	~"TMVA/IM‘hod.h
"

80 
	~"TMVA/MsgLogg”.h
"

81 
	~"TMVA/PDF.h
"

82 
	~"TMVA/Rªkšg.h
"

83 
	~"TMVA/FaùÜy.h
"

84 
	~"TMVA/D©aLßd”.h
"

85 
	~"TMVA/ToŞs.h
"

86 
	~"TMVA/ResuÉs.h
"

87 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

88 
	~"TMVA/ResuÉsReg»ssiÚ.h
"

89 
	~"TMVA/ResuÉsMuÉişass.h
"

90 
	~"TMVA/RoÙFšd”.h
"

91 
	~"TMVA/Tim”.h
"

92 
	~"TMVA/ToŞs.h
"

93 
	~"TMVA/TS¶še1.h
"

94 
	~"TMVA/Ty³s.h
"

95 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

96 
	~"TMVA/V¬ŸbËGaussT¿nsfÜm.h
"

97 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

98 
	~"TMVA/V¬ŸbËInfo.h
"

99 
	~"TMVA/V¬ŸbËNÜm®izeT¿nsfÜm.h
"

100 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

101 
	~"TMVA/V¬ŸbËT¿nsfÜm.h
"

102 
	~"TMVA/V”siÚ.h
"

104 
	~"TROOT.h
"

105 
	~"TSy¡em.h
"

106 
	~"TObjSŒšg.h
"

107 
	~"TQObjeù.h
"

108 
	~"TS¶še.h
"

109 
	~"TM©rix.h
"

110 
	~"TM©h.h
"

111 
	~"TH1F.h
"

112 
	~"TH2F.h
"

113 
	~"TFe.h
"

114 
	~"TKey.h
"

115 
	~"TG¿ph.h
"

116 
	~"Rio¡»am.h
"

117 
	~"TXMLEngše.h
"

119 
	~<iomª
>

120 
	~<io¡»am
>

121 
	~<f¡»am
>

122 
	~<s¡»am
>

123 
	~<c¡dlib
>

124 
	~<®gÜ™hm
>

125 
	~<lim™s
>

128 
CÏssImp
(
TMVA
::
M‘hodBa£
);

130 
usšg
 
	g¡d
::
’dl
;

131 
usšg
 
	g¡d
::
©of
;

134 cÚ¡ 
BoŞ_t
 
	gU£_S¶šes_fÜ_Eff_
 = 
kTRUE
;

137 cÚ¡ 
IÁ_t
 
	gNBIN_HIST_HIGH
 = 10000;

139 #ifdeà
_WIN32


141 #´agm¨
w¬nšg
 ( 
di§bË
 : 4355 )

145 
	~"TG¿ph.h
"

146 
	~"TMuÉiG¿ph.h
"

151 
	gTMVA
::
IPythÚIÁ”aùive
::
	$IPythÚIÁ”aùive
(è: 
	`fMuÉiG¿ph
(
Ãw
 
	$TMuÉiG¿ph
())

153 
fNumG¿phs
 = 0;

154 
fIndex
 = 0;

155 
	}
}

159 
	gTMVA
::
IPythÚIÁ”aùive
::~
	$IPythÚIÁ”aùive
()

161 ià(
fMuÉiG¿ph
){

162 
d–‘e
 
fMuÉiG¿ph
;

163 
fMuÉiG¿ph
 = 
nuÎ±r
;

166 
	}
}

174 
	gTMVA
::
IPythÚIÁ”aùive
::
In™
(
¡d
::
veùÜ
<
TSŒšg
>& 
g¿phT™Ës
)

176 ià(
fNumG¿phs
!=0){

177 
¡d
::
û¼
 << 
kERROR
 << "IPythÚIÁ”aùive::In™:‡Ì—dy in™Ÿlized..." << std::
’dl
;

180 
IÁ_t
 
	gcŞÜ
 = 2;

181 auto& 
	gt™Ë
 : 
g¿phT™Ës
){

182 
fG¿phs
.
push_back
Ğ
Ãw
 
TG¿ph
() );

183 
	gfG¿phs
.
back
()->
S‘T™Ë
(
t™Ë
);

184 
	gfG¿phs
.
back
()->
S‘Name
(
t™Ë
);

185 
	gfG¿phs
.
back
()->
S‘FlCŞÜ
(
cŞÜ
);

186 
	gfG¿phs
.
back
()->
S‘LšeCŞÜ
(
cŞÜ
);

187 
	gfG¿phs
.
back
()->
S‘M¬k”CŞÜ
(
cŞÜ
);

188 
	gfMuÉiG¿ph
->
Add
(
fG¿phs
.
back
());

189 
	gcŞÜ
 += 2;

190 
	gfNumG¿phs
 += 1;

198 
	gTMVA
::
IPythÚIÁ”aùive
::
	$CË¬G¿phs
()

200 
IÁ_t
 
i
=0; i<
fNumG¿phs
; i++){

201 
fG¿phs
[
i
]->
	`S‘
(0);

203 
	}
}

212 
	gTMVA
::
IPythÚIÁ”aùive
::
	$AddPošt
(
DoubË_t
 
x
, DoubË_ˆ
y1
, DoubË_ˆ
y2
)

214 
fG¿phs
[0]->
	`S‘
(
fIndex
+1);

215 
fG¿phs
[1]->
	`S‘
(
fIndex
+1);

216 
fG¿phs
[0]->
	`S‘Pošt
(
fIndex
, 
x
, 
y1
);

217 
fG¿phs
[1]->
	`S‘Pošt
(
fIndex
, 
x
, 
y2
);

218 
fIndex
++;

220 
	}
}

228 
	gTMVA
::
IPythÚIÁ”aùive
::
AddPošt
(
¡d
::
veùÜ
<
DoubË_t
>& 
d©
)

230 
IÁ_t
 
i
=0; 
	gi
<
	gfNumG¿phs
;i++){

231 
	gfG¿phs
[
i
]->
S‘
(
fIndex
+1);

232 
	gfG¿phs
[
i
]->
S‘Pošt
(
fIndex
, 
d©
[0], dat[i+1]);

234 
	gfIndex
++;

242 
	gTMVA
::
M‘hodBa£
::
	$M‘hodBa£
ĞcÚ¡ 
TSŒšg
& 
jobName
,

243 
Ty³s
::
EMVA
 
m‘hodTy³
,

244 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

245 
D©aS‘Info
& 
dsi
,

246 cÚ¡ 
TSŒšg
& 
theO±iÚ
) :

247 
	`IM‘hod
(),

248 
	`CÚfigu¿bË
 ( 
theO±iÚ
 ),

249 
	`fTmpEv’t
 ( 0 ),

250 
	`fRªkšg
 ( 0 ),

251 
	`fIÅutV¬s
 ( 0 ),

252 
	`fAÇlysisTy³
 ( 
Ty³s
::
kNoAÇlysisTy³
 ),

253 
	`fReg»ssiÚR‘uºV®
 ( 0 ),

254 
	`fMuÉişassR‘uºV®
 ( 0 ),

255 
	`fD©aS‘Info
 ( 
dsi
 ),

256 
	`fSigÇlReã»nûCut
 ( 0.5 ),

257 
	`fSigÇlReã»nûCutOr›Á©iÚ
( 1. ),

258 
	`fV¬ŸbËT¿nsfÜmTy³
 ( 
Ty³s
::
kSigÇl
 ),

259 
	`fJobName
 ( 
jobName
 ),

260 
	`fM‘hodName
 ( 
m‘hodT™Ë
 ),

261 
	`fM‘hodTy³
 ( 
m‘hodTy³
 ),

262 
	`fTe¡v¬
 ( "" ),

263 
	`fTMVAT¿ššgV”siÚ
 ( 
TMVA_VERSION_CODE
 ),

264 
	`fROOTT¿ššgV”siÚ
 ( 
ROOT_VERSION_CODE
 ),

265 
	`fCÚ¡ruùedFromWeightFe
 ( 
kFALSE
 ),

266 
	`fBa£Dœ
 ( 0 ),

267 
	`fM‘hodBa£Dœ
 ( 0 ),

268 
	`fFe
 ( 0 ),

269 
	`fS’tFe
 (
kFALSE
),

270 
	`fMod–P”si¡’û
 (
kTRUE
),

271 
	`fWeightFe
 ( "" ),

272 
	`fEffS
 ( 0 ),

273 
	`fDeçuÉPDF
 ( 0 ),

274 
	`fMVAPdfS
 ( 0 ),

275 
	`fMVAPdfB
 ( 0 ),

276 
	`fS¶S
 ( 0 ),

277 
	`fS¶B
 ( 0 ),

278 
	`fS¶effBvsS
 ( 0 ),

279 
	`fS¶T¿šS
 ( 0 ),

280 
	`fS¶T¿šB
 ( 0 ),

281 
	`fS¶T¿šEffBvsS
 ( 0 ),

282 
	`fV¬T¿nsfÜmSŒšg
 ( "None" ),

283 
	`fT¿nsfÜm©iÚPoš‹r
 ( 0 ),

284 
	`fT¿nsfÜm©iÚ
 ( 
dsi
, 
m‘hodT™Ë
 ),

285 
	`fV”bo£
 ( 
kFALSE
 ),

286 
	`fV”bos™yLev–SŒšg
 ( "Default" ),

287 
	`fH–p
 ( 
kFALSE
 ),

288 
	`fHasMVAPdfs
 ( 
kFALSE
 ),

289 
	`fIgnÜeNegWeightsInT¿ššg
Ğ
kFALSE
 ),

290 
	`fSigÇlCÏss
 ( 0 ),

291 
	`fBackgroundCÏss
 ( 0 ),

292 
	`fS¶RefS
 ( 0 ),

293 
	`fS¶RefB
 ( 0 ),

294 
	`fS¶T¿šRefS
 ( 0 ),

295 
	`fS¶T¿šRefB
 ( 0 ),

296 
	$fS‘upCom¶‘ed
 (
kFALSE
)

298 
	`S‘Te¡v¬Name
();

299 
fLogg”
->
	`S‘Sourû
(
	`G‘Name
());

302 
	}
}

308 
	gTMVA
::
M‘hodBa£
::
	$M‘hodBa£
Ğ
Ty³s
::
EMVA
 
m‘hodTy³
,

309 
D©aS‘Info
& 
dsi
,

310 cÚ¡ 
TSŒšg
& 
weightFe
 ) :

311 
	`IM‘hod
(),

312 
	`CÚfigu¿bË
(""),

313 
	`fTmpEv’t
 ( 0 ),

314 
	`fRªkšg
 ( 0 ),

315 
	`fIÅutV¬s
 ( 0 ),

316 
	`fAÇlysisTy³
 ( 
Ty³s
::
kNoAÇlysisTy³
 ),

317 
	`fReg»ssiÚR‘uºV®
 ( 0 ),

318 
	`fMuÉişassR‘uºV®
 ( 0 ),

319 
	`fD©aS‘Info
 ( 
dsi
 ),

320 
	`fSigÇlReã»nûCut
 ( 0.5 ),

321 
	`fV¬ŸbËT¿nsfÜmTy³
 ( 
Ty³s
::
kSigÇl
 ),

322 
	`fJobName
 ( "" ),

323 
	`fM‘hodName
 ( "MethodBase" ),

324 
	`fM‘hodTy³
 ( 
m‘hodTy³
 ),

325 
	`fTe¡v¬
 ( "" ),

326 
	`fTMVAT¿ššgV”siÚ
 ( 0 ),

327 
	`fROOTT¿ššgV”siÚ
 ( 0 ),

328 
	`fCÚ¡ruùedFromWeightFe
 ( 
kTRUE
 ),

329 
	`fBa£Dœ
 ( 0 ),

330 
	`fM‘hodBa£Dœ
 ( 0 ),

331 
	`fFe
 ( 0 ),

332 
	`fS’tFe
 (
kFALSE
),

333 
	`fMod–P”si¡’û
 (
kTRUE
),

334 
	`fWeightFe
 ( 
weightFe
 ),

335 
	`fEffS
 ( 0 ),

336 
	`fDeçuÉPDF
 ( 0 ),

337 
	`fMVAPdfS
 ( 0 ),

338 
	`fMVAPdfB
 ( 0 ),

339 
	`fS¶S
 ( 0 ),

340 
	`fS¶B
 ( 0 ),

341 
	`fS¶effBvsS
 ( 0 ),

342 
	`fS¶T¿šS
 ( 0 ),

343 
	`fS¶T¿šB
 ( 0 ),

344 
	`fS¶T¿šEffBvsS
 ( 0 ),

345 
	`fV¬T¿nsfÜmSŒšg
 ( "None" ),

346 
	`fT¿nsfÜm©iÚPoš‹r
 ( 0 ),

347 
	`fT¿nsfÜm©iÚ
 ( 
dsi
, "" ),

348 
	`fV”bo£
 ( 
kFALSE
 ),

349 
	`fV”bos™yLev–SŒšg
 ( "Default" ),

350 
	`fH–p
 ( 
kFALSE
 ),

351 
	`fHasMVAPdfs
 ( 
kFALSE
 ),

352 
	`fIgnÜeNegWeightsInT¿ššg
Ğ
kFALSE
 ),

353 
	`fSigÇlCÏss
 ( 0 ),

354 
	`fBackgroundCÏss
 ( 0 ),

355 
	`fS¶RefS
 ( 0 ),

356 
	`fS¶RefB
 ( 0 ),

357 
	`fS¶T¿šRefS
 ( 0 ),

358 
	`fS¶T¿šRefB
 ( 0 ),

359 
	$fS‘upCom¶‘ed
 (
kFALSE
)

361 
fLogg”
->
	`S‘Sourû
(
	`G‘Name
());

364 
	}
}

369 
	gTMVA
::
M‘hodBa£
::~
	$M‘hodBa£
( )

372 ià(!
fS‘upCom¶‘ed
è
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C®lšg de¡ruùÜ oàm‘hod which gÙ‚ev” s‘up" << 
Endl
;

375 ià(
fIÅutV¬s
 !ğ0è{ fIÅutV¬s->
	`ş—r
(); 
d–‘e
 fInputVars; }

376 ià(
fRªkšg
 !ğ0è
d–‘e
 fRanking;

379 ià(
fDeçuÉPDF
!ğ0è{ 
d–‘e
 fDefaultPDF; fDefaultPDF = 0; }

380 ià(
fMVAPdfS
 !ğ0è{ 
d–‘e
 fMVAPdfS; fMVAPdfS = 0; }

381 ià(
fMVAPdfB
 !ğ0è{ 
d–‘e
 fMVAPdfB; fMVAPdfB = 0; }

384 ià(
fS¶S
è{ 
d–‘e
 fSplS; fSplS = 0; }

385 ià(
fS¶B
è{ 
d–‘e
 fSplB; fSplB = 0; }

386 ià(
fS¶effBvsS
è{ 
d–‘e
 fSpleffBvsS; fSpleffBvsS = 0; }

387 ià(
fS¶RefS
è{ 
d–‘e
 fSplRefS; fSplRefS = 0; }

388 ià(
fS¶RefB
è{ 
d–‘e
 fSplRefB; fSplRefB = 0; }

389 ià(
fS¶T¿šRefS
è{ 
d–‘e
 fSplTrainRefS; fSplTrainRefS = 0; }

390 ià(
fS¶T¿šRefB
è{ 
d–‘e
 fSplTrainRefB; fSplTrainRefB = 0; }

391 ià(
fS¶T¿šEffBvsS
è{ 
d–‘e
 fSplTrainEffBvsS; fSplTrainEffBvsS = 0; }

393 
IÁ_t
 
i
 = 0; i < 2; i++ ) {

394 ià(
fEv’tCŞËùiÚs
.
	`©
(
i
)) {

395 
¡d
::
veùÜ
<
Ev’t
*>::
cÚ¡_™”©Ü
 
™
 = 
fEv’tCŞËùiÚs
.
	`©
(
i
)->
	`begš
();

396 
™
 !ğ
fEv’tCŞËùiÚs
.
	`©
(
i
)->
	`’d
(); it++) {

397 
	`d–‘e
 (*
™
);

399 
d–‘e
 
fEv’tCŞËùiÚs
.
	`©
(
i
);

400 
fEv’tCŞËùiÚs
.
	`©
(
i
) = 0;

404 ià(
fReg»ssiÚR‘uºV®
è
d–‘e
 fRegressionReturnVal;

405 ià(
fMuÉişassR‘uºV®
è
d–‘e
 fMulticlassReturnVal;

406 
	}
}

411 
	gTMVA
::
M‘hodBa£
::
	$S‘upM‘hod
()

415 ià(
fS‘upCom¶‘ed
è
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C®lšg S‘upM‘hod fÜh£cÚdime" << 
Endl
;

416 
	`In™Ba£
();

417 
	`Deş¬eBa£O±iÚs
();

418 
	`In™
();

419 
	`Deş¬eO±iÚs
();

420 
fS‘upCom¶‘ed
 = 
kTRUE
;

421 
	}
}

428 
	gTMVA
::
M‘hodBa£
::
	$ProûssS‘up
()

430 
	`ProûssBa£O±iÚs
();

431 
	`ProûssO±iÚs
();

432 
	}
}

438 
	gTMVA
::
M‘hodBa£
::
	$CheckS‘up
()

440 
	`CheckFÜUnu£dO±iÚs
();

441 
	}
}

446 
	gTMVA
::
M‘hodBa£
::
	$In™Ba£
()

448 
	`S‘CÚfigDesütiÚ
( "Configuration options for classifier‡rchitecture‡nduning" );

450 
fNbšs
 = 
	`gCÚfig
().
fV¬ŸbËPlÙtšg
.
fNbšsXOfROCCurve
;

451 
fNbšsMVAouut
 = 
	`gCÚfig
().
fV¬ŸbËPlÙtšg
.fNbinsMVAoutput;

452 
fNbšsH
 = 
NBIN_HIST_HIGH
;

454 
fS¶T¿šS
 = 0;

455 
fS¶T¿šB
 = 0;

456 
fS¶T¿šEffBvsS
 = 0;

457 
fM—nS
 = -1;

458 
fM—nB
 = -1;

459 
fRmsS
 = -1;

460 
fRmsB
 = -1;

461 
fXmš
 = 
DBL_MAX
;

462 
fXmax
 = -
DBL_MAX
;

463 
fTxtWeightsOÆy
 = 
kTRUE
;

464 
fS¶RefS
 = 0;

465 
fS¶RefB
 = 0;

467 
fT¿šTime
 = -1.;

468 
fTe¡Time
 = -1.;

470 
fRªkšg
 = 0;

473 
fIÅutV¬s
 = 
Ãw
 
¡d
::
veùÜ
<
TSŒšg
>;

474 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

475 
fIÅutV¬s
->
	`push_back
(
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Lab–
());

477 
fReg»ssiÚR‘uºV®
 = 0;

478 
fMuÉişassR‘uºV®
 = 0;

480 
fEv’tCŞËùiÚs
.
	`»size
( 2 );

481 
fEv’tCŞËùiÚs
.
	`©
(0) = 0;

482 
fEv’tCŞËùiÚs
.
	`©
(1) = 0;

485 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Signal") != 0) {

486 
fSigÇlCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

488 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Background") != 0) {

489 
fBackgroundCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("Background")->
	`G‘Numb”
();

492 
	`S‘CÚfigDesütiÚ
( "Configuration options for MVA method" );

493 
	`S‘CÚfigName
Ğ
	`TSŒšg
("M‘hod"è+ 
	`G‘M‘hodTy³Name
() );

494 
	}
}

514 
	gTMVA
::
M‘hodBa£
::
	$Deş¬eBa£O±iÚs
()

516 
	`Deş¬eO±iÚRef
Ğ
fV”bo£
, "V", "Verbose output (short form of \"VerbosityLevel\" below - overrideshe†atter one)" );

518 
	`Deş¬eO±iÚRef
Ğ
fV”bos™yLev–SŒšg
="Default", "VerbosityLevel", "Verbosity†evel" );

519 
	`AddP»DefV®
Ğ
	`TSŒšg
("Default") );

520 
	`AddP»DefV®
Ğ
	`TSŒšg
("Debug") );

521 
	`AddP»DefV®
Ğ
	`TSŒšg
("Verbose") );

522 
	`AddP»DefV®
Ğ
	`TSŒšg
("Info") );

523 
	`AddP»DefV®
Ğ
	`TSŒšg
("Warning") );

524 
	`AddP»DefV®
Ğ
	`TSŒšg
("Error") );

525 
	`AddP»DefV®
Ğ
	`TSŒšg
("Fatal") );

529 
fTxtWeightsOÆy
 = 
kTRUE
;

530 
fNÜm®i£
 = 
kFALSE
;

532 
	`Deş¬eO±iÚRef
Ğ
fV¬T¿nsfÜmSŒšg
, "VarTransform", "List of variableransformations…erformed beforeraining,ƒ.g., \"D_Background,P_Signal,G,N_AllClasses\" for: \"Decorrelation, PCA-transformation, Gaussianisation, Normalisation,ƒach forhe given class ofƒvents ('AllClasses' denotes‡llƒvents of‡ll classes, if‚o class indication is given, 'All' is‡ssumed)\"" );

534 
	`Deş¬eO±iÚRef
Ğ
fH–p
, "H", "Print method-specific help message" );

536 
	`Deş¬eO±iÚRef
Ğ
fHasMVAPdfs
, "CreateMVAPdfs", "Create PDFs for classifier outputs (signal‡nd background)" );

538 
	`Deş¬eO±iÚRef
Ğ
fIgnÜeNegWeightsInT¿ššg
, "IgnoreNegWeightsInTraining",

540 
	}
}

545 
	gTMVA
::
M‘hodBa£
::
	$ProûssBa£O±iÚs
()

547 ià(
	`HasMVAPdfs
()) {

551 
fDeçuÉPDF
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
())+"_PDF", 
	`G‘O±iÚs
(), "MVAPdf" );

552 
fDeçuÉPDF
->
	`Deş¬eO±iÚs
();

553 
fDeçuÉPDF
->
	`P¬£O±iÚs
();

554 
fDeçuÉPDF
->
	`ProûssO±iÚs
();

555 
fMVAPdfB
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
())+"_PDFBkg", 
fDeçuÉPDF
->
	`G‘O±iÚs
(), "MVAPdfBkg", fDefaultPDF );

556 
fMVAPdfB
->
	`Deş¬eO±iÚs
();

557 
fMVAPdfB
->
	`P¬£O±iÚs
();

558 
fMVAPdfB
->
	`ProûssO±iÚs
();

559 
fMVAPdfS
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
())+"_PDFSig", 
fMVAPdfB
->
	`G‘O±iÚs
(), "MVAPdfSig", 
fDeçuÉPDF
 );

560 
fMVAPdfS
->
	`Deş¬eO±iÚs
();

561 
fMVAPdfS
->
	`P¬£O±iÚs
();

562 
fMVAPdfS
->
	`ProûssO±iÚs
();

565 
	`S‘O±iÚs
Ğ
fMVAPdfS
->
	`G‘O±iÚs
() );

568 
TMVA
::
	`C»©eV¬ŸbËT¿nsfÜms
Ğ
fV¬T¿nsfÜmSŒšg
,

569 
	`D©aInfo
(),

570 
	`G‘T¿nsfÜm©iÚHªdËr
(),

571 
	`Log
() );

573 ià(!
	`HasMVAPdfs
()) {

574 ià(
fDeçuÉPDF
!ğ0è{ 
d–‘e
 fDefaultPDF; fDefaultPDF = 0; }

575 ià(
fMVAPdfS
 !ğ0è{ 
d–‘e
 fMVAPdfS; fMVAPdfS = 0; }

576 ià(
fMVAPdfB
 !ğ0è{ 
d–‘e
 fMVAPdfB; fMVAPdfB = 0; }

579 ià(
fV”bo£
) {

580 
fV”bos™yLev–SŒšg
 = 
	`TSŒšg
("Verbose");

581 
	`Log
().
	`S‘MšTy³
Ğ
kVERBOSE
 );

583 ià(
fV”bos™yLev–SŒšg
 =ğ"Debug" ) 
	`Log
().
	`S‘MšTy³
Ğ
kDEBUG
 );

584 ià(
fV”bos™yLev–SŒšg
 =ğ"V”bo£" ) 
	`Log
().
	`S‘MšTy³
Ğ
kVERBOSE
 );

585 ià(
fV”bos™yLev–SŒšg
 =ğ"Info" ) 
	`Log
().
	`S‘MšTy³
Ğ
kINFO
 );

586 ià(
fV”bos™yLev–SŒšg
 =ğ"W¬nšg" ) 
	`Log
().
	`S‘MšTy³
Ğ
kWARNING
 );

587 ià(
fV”bos™yLev–SŒšg
 =ğ"E¼Ü" ) 
	`Log
().
	`S‘MšTy³
Ğ
kERROR
 );

588 ià(
fV”bos™yLev–SŒšg
 =ğ"F©®" ) 
	`Log
().
	`S‘MšTy³
Ğ
kFATAL
 );

589 ià(
fV”bos™yLev–SŒšg
 != "Default" ) {

590 
	`Log
(è<< 
kFATAL
 << "<ProcessOptions> Verbosity†evelype '"

591 << 
fV”bos™yLev–SŒšg
 << "' unknown." << 
Endl
;

593 
Ev’t
::
	`S‘IgnÜeNegWeightsInT¿ššg
(
fIgnÜeNegWeightsInT¿ššg
);

594 
	}
}

601 
	gTMVA
::
M‘hodBa£
::
	$Deş¬eCom·tib™yO±iÚs
()

603 
	`Deş¬eO±iÚRef
Ğ
fNÜm®i£
=
kFALSE
, "Normalise", "Normalise input variables" );

604 
	`Deş¬eO±iÚRef
Ğ
fU£DecÜr
=
kFALSE
, "D", "Use-decorrelated-variables flag" );

605 
	`Deş¬eO±iÚRef
Ğ
fV¬ŸbËT¿nsfÜmTy³SŒšg
="Signal", "VarTransformType",

607 
	`AddP»DefV®
Ğ
	`TSŒšg
("Signal") );

608 
	`AddP»DefV®
Ğ
	`TSŒšg
("Background") );

609 
	`Deş¬eO±iÚRef
Ğ
fTxtWeightsOÆy
=
kTRUE
, "TxtWeightFilesOnly", "If True: write‡llraining„esults (weights)‡sext files (False: some‡re written in ROOT format)" );

619 
	`Deş¬eO±iÚRef
Ğ
fNbšsMVAPdf
 = 60, "NbinsMVAPdf", "Number of bins used forhe PDFs of classifier outputs" );

620 
	`Deş¬eO±iÚRef
Ğ
fNsmoÙhMVAPdf
 = 2, "NsmoothMVAPdf", "Number of smoothing iterations for classifier PDFs" );

621 
	}
}

628 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gTMVA
::
M‘hodBa£
::
	$O±imizeTunšgP¬am‘”s
(
TSŒšg
 , TString )

634 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Parameter optimization is‚ot yet implemented for method "

635 << 
	`G‘Name
(è<< 
Endl
;

636 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Cu¼’y wÃedØ£ˆh¬dcoded which…¬am‘” i tuÃd iÀwhich„ªges"<<
Endl
;

638 
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
tuÃdP¬am‘”s
;

639 
tuÃdP¬am‘”s
.
	`size
();

640  
tuÃdP¬am‘”s
;

642 
	}
}

649 
	gTMVA
::
M‘hodBa£
::
S‘TuÃP¬am‘”s
(
¡d
::
m­
<
TSŒšg
,
DoubË_t
> )

655 
	gTMVA
::
M‘hodBa£
::
	$T¿šM‘hod
()

657 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

658 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

661 ià(
	`H–p
()è
	`PrštH–pMes§ge
();

664 if(!
	`IsS’tFe
()è
	`Ba£Dœ
()->
	`cd
();

668 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`C®cT¿nsfÜm©iÚs
(
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
());

671 
	`Log
(è<< 
kDEBUG


672 << "Begš¿ššg" << 
Endl
;

673 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

674 
Tim”
 
	`Œaštim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

675 
	`T¿š
();

676 
	`Log
(è<< 
kDEBUG


677 << "\tEnd oàŒaššg " << 
Endl
;

678 
	`S‘T¿šTime
(
Œaštim”
.
	`EÏp£dSecÚds
());

679 
	`Log
(è<< 
kINFO


680 << "EÏp£dimfÜ¿ššg w™h " << 
nEv’ts
 << "ƒvents: "

681 << 
Œaštim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

683 
	`Log
(è<< 
kDEBUG


687 ià(
	`DoMuÉişass
()) {

688 
	`Log
(è<<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "MuÉişas şassifiÿtiÚ oÀŒaššg sam¶e" << 
Endl
;

689 
	`AddMuÉişassOuut
(
Ty³s
::
kT¿ššg
);

691 ià(!
	`DoReg»ssiÚ
()) {

693 
	`Log
(è<<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "şassifiÿtiÚ oÀŒaššg sam¶e" << 
Endl
;

694 
	`AddCÏssif›rOuut
(
Ty³s
::
kT¿ššg
);

695 ià(
	`HasMVAPdfs
()) {

696 
	`C»©eMVAPdfs
();

697 
	`AddCÏssif›rOuutProb
(
Ty³s
::
kT¿ššg
);

702 
	`Log
(è<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "»g»ssiÚ oÀŒaššg sam¶e" << 
Endl
;

703 
	`AddReg»ssiÚOuut
Ğ
Ty³s
::
kT¿ššg
 );

705 ià(
	`HasMVAPdfs
() ) {

706 
	`Log
(è<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C»©PDFs" << 
Endl
;

707 
	`C»©eMVAPdfs
();

713 ià(
fMod–P”si¡’û
 ) 
	`Wr™eS‹ToFe
();

716 ià((!
	`DoReg»ssiÚ
()è&& (
fMod–P”si¡’û
)è
	`MakeCÏss
();

720 if(!
	`IsS’tFe
())

722 
	`Ba£Dœ
()->
	`cd
();

723 
	`Wr™eMÚ™ÜšgHi¡osToFe
();

725 
	}
}

729 
	gTMVA
::
M‘hodBa£
::
	$G‘Reg»ssiÚDevŸtiÚ
(
UIÁ_t
 
tgtNum
, 
Ty³s
::
ET»eTy³
 
ty³
, 
DoubË_t
& 
¡ddev
, DoubË_t& 
¡ddev90P”ûÁ
 ) const

731 ià(!
	`DoReg»ssiÚ
()è
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "TryšgØu£ G‘Reg»ssiÚDevŸtiÚ(èw™h‡ cÏssifiÿtiÚ job" << 
Endl
;

732 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C»©»suÉ fÜ " << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< 
Endl
;

733 
ResuÉsReg»ssiÚ
* 
»gRes
 = (ResuÉsReg»ssiÚ*)
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kReg»ssiÚ
);

734 
boŞ
 
Œunÿ‹
 = 
çl£
;

735 
TH1F
* 
h1
 = 
»gRes
->
	`Quad¿ticDevŸtiÚ
Ğ
tgtNum
 , 
Œunÿ‹
, 1.);

736 
¡ddev
 = 
	`sq¹
(
h1
->
	`G‘M—n
());

737 
Œunÿ‹
 = 
Œue
;

738 
DoubË_t
 
yq
[1], 
xq
[]={0.9};

739 
h1
->
	`G‘Quªtes
(1,
yq
,
xq
);

740 
TH1F
* 
h2
 = 
»gRes
->
	`Quad¿ticDevŸtiÚ
Ğ
tgtNum
 , 
Œunÿ‹
, 
yq
[0]);

741 
¡ddev90P”ûÁ
 = 
	`sq¹
(
h2
->
	`G‘M—n
());

742 
d–‘e
 
h1
;

743 
d–‘e
 
h2
;

744 
	}
}

749 
	gTMVA
::
M‘hodBa£
::
	$AddReg»ssiÚOuut
(
Ty³s
::
ET»eTy³
 
ty³
)

751 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

753 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C»©»suÉ fÜ " << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< 
Endl
;

755 
ResuÉsReg»ssiÚ
* 
»gRes
 = (ResuÉsReg»ssiÚ*)
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kReg»ssiÚ
);

757 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

760 
Tim”
 
	`tim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

761 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "Ev®u©iÚ oà" << 
	`G‘M‘hodName
() << " on "

762 << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< " sam¶e" << 
Endl
;

764 
»gRes
->
	`Resize
Ğ
nEv’ts
 );

765 
IÁ_t
 
›vt
=0; ievt<
nEv’ts
; ievt++) {

766 
	`D©a
()->
	`S‘Cu¼’tEv’t
(
›vt
);

767 
¡d
::
veùÜ
< 
Flßt_t
 > 
v®s
 = 
	`G‘Reg»ssiÚV®ues
();

768 
»gRes
->
	`S‘V®ue
Ğ
v®s
, 
›vt
 );

769 
tim”
.
	`D¿wProg»ssB¬
Ğ
›vt
 );

772 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())

773 << "EÏp£dimfÜƒv®u©iÚ oà" << 
nEv’ts
 << "ƒvents: "

774 << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

777 ià(
ty³
==
Ty³s
::
kTe¡šg
)

778 
	`S‘Te¡Time
(
tim”
.
	`EÏp£dSecÚds
());

780 
TSŒšg
 
	`hi¡NameP»fix
(
	`G‘Te¡v¬Name
());

781 
hi¡NameP»fix
 +ğ(
ty³
==
Ty³s
::
kT¿ššg
?"train":"test");

782 
»gRes
->
	`C»©eDevŸtiÚHi¡og¿ms
Ğ
hi¡NameP»fix
 );

783 
	}
}

788 
	gTMVA
::
M‘hodBa£
::
	$AddMuÉişassOuut
(
Ty³s
::
ET»eTy³
 
ty³
)

790 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

792 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "C»©»suÉ fÜ " << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< 
Endl
;

794 
ResuÉsMuÉişass
* 
»sMuÉişass
 = 
dyÇmic_ÿ¡
<ResuÉsMuÉişass*>(
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kMuÉişass
));

795 ià(!
»sMuÉişass
è
	`Log
(è<< 
kFATAL
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "uÇbËØü—‹…oš‹¸š AddMuÉişassOuut,ƒx™šg."<<
Endl
;

797 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

800 
Tim”
 
	`tim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

802 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "MuÉişas ev®u©iÚ oà" << 
	`G‘M‘hodName
() << " on "

803 << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< " sam¶e" << 
Endl
;

805 
»sMuÉişass
->
	`Resize
Ğ
nEv’ts
 );

806 
IÁ_t
 
›vt
=0; ievt<
nEv’ts
; ievt++) {

807 
	`D©a
()->
	`S‘Cu¼’tEv’t
(
›vt
);

808 
¡d
::
veùÜ
< 
Flßt_t
 > 
v®s
 = 
	`G‘MuÉişassV®ues
();

809 
»sMuÉişass
->
	`S‘V®ue
Ğ
v®s
, 
›vt
 );

810 
tim”
.
	`D¿wProg»ssB¬
Ğ
›vt
 );

813 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())

814 << "EÏp£dimfÜƒv®u©iÚ oà" << 
nEv’ts
 << "ƒvents: "

815 << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

818 ià(
ty³
==
Ty³s
::
kTe¡šg
)

819 
	`S‘Te¡Time
(
tim”
.
	`EÏp£dSecÚds
());

821 
TSŒšg
 
	`hi¡NameP»fix
(
	`G‘Te¡v¬Name
());

822 
hi¡NameP»fix
 +ğ(
ty³
==
Ty³s
::
kT¿ššg
?"_Train":"_Test");

823 
»sMuÉişass
->
	`C»©eMuÉişassHi¡os
Ğ
hi¡NameP»fix
, 
fNbšsMVAouut
, 
fNbšsH
 );

824 
»sMuÉişass
->
	`C»©eMuÉişassP”fÜmªûHi¡os
(
hi¡NameP»fix
);

825 
	}
}

829 
	gTMVA
::
M‘hodBa£
::
	$NoE¼ÜC®c
(
DoubË_t
* cÚ¡ 
”r
, DoubË_t* cÚ¡ 
”rUµ”
) {

830 ià(
”r
) *err=-1;

831 ià(
”rUµ”
) *errUpper=-1;

832 
	}
}

836 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘MvaV®ue
ĞcÚ¡ 
Ev’t
* cÚ¡ 
ev
, 
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 ) {

837 
fTmpEv’t
 = 
ev
;

838 
DoubË_t
 
v®
 = 
	`G‘MvaV®ue
(
”r
, 
”rUµ”
);

839 
fTmpEv’t
 = 0;

840  
v®
;

841 
	}
}

847 
BoŞ_t
 
	gTMVA
::
M‘hodBa£
::
	$IsSigÇlLike
() {

848  
	`G‘MvaV®ue
()*
	`G‘SigÇlReã»nûCutOr›Á©iÚ
(è> 
	`G‘SigÇlReã»nûCut
()*G‘SigÇlReã»nûCutOr›Á©iÚ(è? 
kTRUE
 : 
kFALSE
;

849 
	}
}

854 
BoŞ_t
 
	gTMVA
::
M‘hodBa£
::
	$IsSigÇlLike
(
DoubË_t
 
mvaV®
) {

855  
mvaV®
*
	`G‘SigÇlReã»nûCutOr›Á©iÚ
(è> 
	`G‘SigÇlReã»nûCut
()*G‘SigÇlReã»nûCutOr›Á©iÚ(è? 
kTRUE
 : 
kFALSE
;

856 
	}
}

861 
	gTMVA
::
M‘hodBa£
::
	$AddCÏssif›rOuut
Ğ
Ty³s
::
ET»eTy³
 
ty³
 )

863 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

865 
ResuÉsCÏssifiÿtiÚ
* 
şRes
 =

866 (
ResuÉsCÏssifiÿtiÚ
*)
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kCÏssifiÿtiÚ
 );

868 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

869 
şRes
->
	`Resize
Ğ
nEv’ts
 );

872 
Tim”
 
	`tim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

873 
¡d
::
veùÜ
<
DoubË_t
> 
mvaV®ues
 = 
	`G‘MvaV®ues
(0, 
nEv’ts
, 
Œue
);

876 ià(
ty³
==
Ty³s
::
kTe¡šg
)

877 
	`S‘Te¡Time
(
tim”
.
	`EÏp£dSecÚds
());

880 
IÁ_t
 
›vt
=0; ievt<
nEv’ts
; ievt++) {

881 
şRes
->
	`S‘V®ue
Ğ
mvaV®ues
[
›vt
], ievt );

883 
	}
}

887 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
M‘hodBa£
::
	$G‘MvaV®ues
(
LÚg64_t
 
fœ¡Evt
, LÚg64_ˆ
Ï¡Evt
, 
BoŞ_t
 
logProg»ss
)

890 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

891 ià(
fœ¡Evt
 > 
Ï¡Evt
 ||†a¡Evˆ> 
nEv’ts
)†astEvt =‚Events;

892 ià(
fœ¡Evt
 < 0) firstEvt = 0;

893 
¡d
::
veùÜ
<
DoubË_t
> 
	`v®ues
(
Ï¡Evt
-
fœ¡Evt
);

895 
nEv’ts
 = 
v®ues
.
	`size
();

898 
Tim”
 
	`tim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

900 ià(
logProg»ss
)

901 
	`Log
(è<< 
kHEADER
<<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Ev®u©iÚ oà" << 
	`G‘M‘hodName
() << " on "

902 << (
	`D©a
()->
	`G‘Cu¼’tTy³
()==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< " sam¶(" << 
nEv’ts
 << "ƒv’ts)" << 
Endl
;

905 
IÁ_t
 
›vt
=
fœ¡Evt
; ievt<
Ï¡Evt
; ievt++) {

906 
	`D©a
()->
	`S‘Cu¼’tEv’t
(
›vt
);

907 
v®ues
[
›vt
] = 
	`G‘MvaV®ue
();

910 ià(
logProg»ss
) {

911 
IÁ_t
 
modulo
 = 
	`IÁ_t
(
nEv’ts
/100);

912 ià(
modulo
 <= 0 ) modulo = 1;

913 ià(
›vt
%
modulo
 =ğ0è
tim”
.
	`D¿wProg»ssB¬
( ievt );

916 ià(
logProg»ss
) {

917 
	`Log
(è<< 
kINFO


918 << "EÏp£dimfÜƒv®u©iÚ oà" << 
nEv’ts
 << "ƒvents: "

919 << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

922  
v®ues
;

923 
	}
}

928 
	gTMVA
::
M‘hodBa£
::
	$AddCÏssif›rOuutProb
Ğ
Ty³s
::
ET»eTy³
 
ty³
 )

930 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

932 
ResuÉsCÏssifiÿtiÚ
* 
mvaProb
 =

933 (
ResuÉsCÏssifiÿtiÚ
*)
	`D©a
()->
	`G‘ResuÉs
(
	`TSŒšg
("´ob_")+
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kCÏssifiÿtiÚ
 );

935 
LÚg64_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

938 
Tim”
 
	`tim”
Ğ
nEv’ts
, 
	`G‘Name
(), 
kTRUE
 );

940 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "Ev®u©iÚ oà" << 
	`G‘M‘hodName
() << " on "

941 << (
ty³
==
Ty³s
::
kT¿ššg
?"Œaššg":"‹¡šg"è<< " sam¶e" << 
Endl
;

943 
mvaProb
->
	`Resize
Ğ
nEv’ts
 );

944 
IÁ_t
 
›vt
=0; ievt<
nEv’ts
; ievt++) {

946 
	`D©a
()->
	`S‘Cu¼’tEv’t
(
›vt
);

947 
Flßt_t
 
´oba
 = ((Flßt_t)
	`G‘Proba
Ğ
	`G‘MvaV®ue
(), 0.5 ));

948 ià(
´oba
 < 0) ;

949 
mvaProb
->
	`S‘V®ue
Ğ
´oba
, 
›vt
 );

952 
IÁ_t
 
modulo
 = 
	`IÁ_t
(
nEv’ts
/100);

953 ià(
modulo
 <= 0 ) modulo = 1;

954 ià(
›vt
%
modulo
 =ğ0è
tim”
.
	`D¿wProg»ssB¬
( ievt );

957 
	`Log
(è<< 
kDEBUG
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())

958 << "EÏp£dimfÜƒv®u©iÚ oà" << 
nEv’ts
 << "ƒvents: "

959 << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

960 
	}
}

969 
	gTMVA
::
M‘hodBa£
::
	$Te¡Reg»ssiÚ
Ğ
DoubË_t
& 
bŸs
, DoubË_t& 
bŸsT
,

970 
DoubË_t
& 
dev
, DoubË_t& 
devT
,

971 
DoubË_t
& 
rms
, DoubË_t& 
rmsT
,

972 
DoubË_t
& 
mInf
, DoubË_t& 
mInfT
,

973 
DoubË_t
& 
cÜr
,

974 
Ty³s
::
ET»eTy³
 
ty³
 )

976 
Ty³s
::
ET»eTy³
 
§vedTy³
 = 
	`D©a
()->
	`G‘Cu¼’tTy³
();

977 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

979 
bŸs
 = 0; 
bŸsT
 = 0; 
dev
 = 0; 
devT
 = 0; 
rms
 = 0; 
rmsT
 = 0;

980 
DoubË_t
 
sumw
 = 0;

981 
DoubË_t
 
m1
 = 0, 
m2
 = 0, 
s1
 = 0, 
s2
 = 0, 
s12
 = 0;

982 cÚ¡ 
IÁ_t
 
Ãvt
 = 
	`G‘NEv’ts
();

983 
Flßt_t
* 
rV
 = 
Ãw
 Flßt_t[
Ãvt
];

984 
Flßt_t
* 
tV
 = 
Ãw
 Flßt_t[
Ãvt
];

985 
Flßt_t
* 
wV
 = 
Ãw
 Flßt_t[
Ãvt
];

986 
Flßt_t
 
xmš
 = 1e30, 
xmax
 = -1e30;

987 
LÚg64_t
 
›vt
=0; ievt<
Ãvt
; ievt++) {

989 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

990 
Flßt_t
 
t
 = 
ev
->
	`G‘T¬g‘
(0);

991 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

992 
Flßt_t
 
r
 = 
	`G‘Reg»ssiÚV®ues
()[0];

993 
Flßt_t
 
d
 = (
r
-
t
);

996 
xmš
 = 
TM©h
::
	`Mš
(xmš, TM©h::Mš(
t
, 
r
));

997 
xmax
 = 
TM©h
::
	`Max
(xmax, TM©h::Max(
t
, 
r
));

1000 
rV
[
›vt
] = 
r
;

1001 
tV
[
›vt
] = 
t
;

1002 
wV
[
›vt
] = 
w
;

1005 
sumw
 +ğ
w
;

1006 
bŸs
 +ğ
w
 * 
d
;

1007 
dev
 +ğ
w
 * 
TM©h
::
	`Abs
(
d
);

1008 
rms
 +ğ
w
 * 
d
 * d;

1011 
m1
 +ğ
t
*
w
; 
s1
 +=*t*w;

1012 
m2
 +ğ
r
*
w
; 
s2
 +=„*r*w;

1013 
s12
 +ğ
t
*
r
;

1017 
bŸs
 /ğ
sumw
;

1018 
dev
 /ğ
sumw
;

1019 
rms
 /ğ
sumw
;

1020 
rms
 = 
TM©h
::
	`Sq¹
Ôm - 
bŸs
*bias);

1023 
m1
 /ğ
sumw
;

1024 
m2
 /ğ
sumw
;

1025 
cÜr
 = 
s12
/
sumw
 - 
m1
*
m2
;

1026 
cÜr
 /ğ
TM©h
::
	`Sq¹
Ğ(
s1
/
sumw
 - 
m1
*m1è* (
s2
/sumw - 
m2
*m2) );

1029 
TH2F
* 
hi¡
 = 
Ãw
 
	`TH2F
Ğ"hi¡", "hi¡", 150, 
xmš
, 
xmax
, 100, xmin, xmax );

1030 
TH2F
* 
hi¡T
 = 
Ãw
 
	`TH2F
Ğ"hi¡T", "hi¡T", 150, 
xmš
, 
xmax
, 100, xmin, xmax );

1033 
DoubË_t
 
devMax
 = 
bŸs
 + 2*
rms
;

1034 
DoubË_t
 
devMš
 = 
bŸs
 - 2*
rms
;

1035 
sumw
 = 0;

1036 
ic
=0;

1037 
LÚg64_t
 
›vt
=0; ievt<
Ãvt
; ievt++) {

1038 
Flßt_t
 
d
 = (
rV
[
›vt
] - 
tV
[ievt]);

1039 
hi¡
->
	`Fl
Ğ
rV
[
›vt
], 
tV
[›vt], 
wV
[ievt] );

1040 ià(
d
 >ğ
devMš
 && d <ğ
devMax
) {

1041 
sumw
 +ğ
wV
[
›vt
];

1042 
bŸsT
 +ğ
wV
[
›vt
] * 
d
;

1043 
devT
 +ğ
wV
[
›vt
] * 
TM©h
::
	`Abs
(
d
);

1044 
rmsT
 +ğ
wV
[
›vt
] * 
d
 * d;

1045 
hi¡T
->
	`Fl
Ğ
rV
[
›vt
], 
tV
[›vt], 
wV
[ievt] );

1046 
ic
++;

1049 
bŸsT
 /ğ
sumw
;

1050 
devT
 /ğ
sumw
;

1051 
rmsT
 /ğ
sumw
;

1052 
rmsT
 = 
TM©h
::
	`Sq¹
ÔmsT - 
bŸsT
*biasT);

1053 
mInf
 = 
	`gToŞs
().
	`G‘Mutu®InfÜm©iÚ
Ğ*
hi¡
 );

1054 
mInfT
 = 
	`gToŞs
().
	`G‘Mutu®InfÜm©iÚ
Ğ*
hi¡T
 );

1056 
d–‘e
 
hi¡
;

1057 
d–‘e
 
hi¡T
;

1059 
d–‘e
 [] 
rV
;

1060 
d–‘e
 [] 
tV
;

1061 
d–‘e
 [] 
wV
;

1063 
	`D©a
()->
	`S‘Cu¼’tTy³
(
§vedTy³
);

1064 
	}
}

1070 
	gTMVA
::
M‘hodBa£
::
	$Te¡MuÉişass
()

1072 
ResuÉsMuÉişass
* 
»sMuÉişass
 = 
dyÇmic_ÿ¡
<ResuÉsMuÉişass*>(
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kMuÉişass
));

1073 ià(!
»sMuÉişass
è
	`Log
(è<< 
kFATAL
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "uÇbËØü—‹…oš‹¸š Te¡MuÉişass,ƒx™šg."<<
Endl
;

1074 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "D‘”mšİtim® muÉişas cut fÜe¡ d©a..." << 
Endl
;

1075 
UIÁ_t
 
işs
 = 0; işs<
	`D©aInfo
().
	`G‘NCÏs£s
(); ++icls) {

1076 
»sMuÉişass
->
	`G‘Be¡MuÉiCÏssCuts
(
işs
);

1078 
	}
}

1084 
	gTMVA
::
M‘hodBa£
::
	$Te¡CÏssifiÿtiÚ
()

1086 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

1088 
ResuÉsCÏssifiÿtiÚ
* 
mvaRes
 = 
dyÇmic_ÿ¡
<ResultsClassification*>

1089 Ğ
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(),
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
) );

1092 ià(0==
mvaRes
 && !(
	`G‘M‘hodTy³Name
().
	`CÚšs
("Cuts"))) {

1093 
	`Log
()<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "mvaRe " << 
mvaRes
 << " G‘M‘hodTy³Nam" << 
	`G‘M‘hodTy³Name
()

1094 << " cÚš " << !(
	`G‘M‘hodTy³Name
().
	`CÚšs
("Cuts")è<< 
Endl
;

1095 
	`Log
(è<< 
kFATAL
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "<Te¡In™> Te¡ v¬ŸbË " << 
	`G‘Te¡v¬Name
()

1096 << "‚Ù found iÀŒ“" << 
Endl
;

1100 
	`gToŞs
().
	`Compu‹St
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
), 
mvaRes
->
	`G‘V®ueVeùÜ
(),

1101 
fM—nS
, 
fM—nB
, 
fRmsS
, 
fRmsB
, 
fXmš
, 
fXmax
, 
fSigÇlCÏss
 );

1104 
DoubË_t
 
Äms
 = 10;

1105 
fXmš
 = 
TM©h
::
	`Max
ĞTM©h::
	`Mš
Ğ
fM—nS
 - 
Äms
*
fRmsS
, 
fM—nB
 -‚rms*
fRmsB
 ), fXmin );

1106 
fXmax
 = 
TM©h
::
	`Mš
ĞTM©h::
	`Max
Ğ
fM—nS
 + 
Äms
*
fRmsS
, 
fM—nB
 +‚rms*
fRmsB
 ), fXmax );

1109 
fCutOr›Á©iÚ
 = (
fM—nS
 > 
fM—nB
è? 
kPos™ive
 : 
kNeg©ive
;

1114 
DoubË_t
 
sxmax
 = 
fXmax
+0.00001;

1118 
TSŒšg
 
Te¡v¬Name
;

1119 if(
	`IsS’tFe
())

1121 
Te¡v¬Name
=
	`FÜm
("[%s]%s",
	`D©aInfo
().
	`G‘Name
(),
	`G‘Te¡v¬Name
().
	`D©a
());

1124 
Te¡v¬Name
=
	`G‘Te¡v¬Name
();

1126 
TH1
* 
mva_s
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_S",Te¡v¬Nam+ "_S", 
fNbšsMVAouut
, 
fXmš
, 
sxmax
 );

1127 
TH1
* 
mva_b
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_B",Te¡v¬Nam+ "_B", 
fNbšsMVAouut
, 
fXmš
, 
sxmax
 );

1128 
mvaRes
->
	`StÜe
(
mva_s
, "MVA_S");

1129 
mvaRes
->
	`StÜe
(
mva_b
, "MVA_B");

1130 
mva_s
->
	`Sumw2
();

1131 
mva_b
->
	`Sumw2
();

1133 
TH1
* 
´oba_s
 = 0;

1134 
TH1
* 
´oba_b
 = 0;

1135 
TH1
* 
¿r™y_s
 = 0;

1136 
TH1
* 
¿r™y_b
 = 0;

1137 ià(
	`HasMVAPdfs
()) {

1139 
´oba_s
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_Proba_S", Te¡v¬Nam+ "_Proba_S", 
fNbšsMVAouut
, 0.0, 1.0 );

1140 
´oba_b
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_Proba_B", Te¡v¬Nam+ "_Proba_B", 
fNbšsMVAouut
, 0.0, 1.0 );

1141 
mvaRes
->
	`StÜe
(
´oba_s
, "Prob_S");

1142 
mvaRes
->
	`StÜe
(
´oba_b
, "Prob_B");

1143 
´oba_s
->
	`Sumw2
();

1144 
´oba_b
->
	`Sumw2
();

1147 
¿r™y_s
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_R¬™y_S", Te¡v¬Nam+ "_R¬™y_S", 
fNbšsMVAouut
, 0.0, 1.0 );

1148 
¿r™y_b
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_R¬™y_B", Te¡v¬Nam+ "_R¬™y_B", 
fNbšsMVAouut
, 0.0, 1.0 );

1149 
mvaRes
->
	`StÜe
(
¿r™y_s
, "Rar_S");

1150 
mvaRes
->
	`StÜe
(
¿r™y_b
, "Rar_B");

1151 
¿r™y_s
->
	`Sumw2
();

1152 
¿r™y_b
->
	`Sumw2
();

1156 
TH1
* 
mva_eff_s
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_S_high", Te¡v¬Nam+ "_S_high", 
fNbšsH
, 
fXmš
, 
sxmax
 );

1157 
TH1
* 
mva_eff_b
 = 
Ãw
 
	`TH1D
Ğ
Te¡v¬Name
 + "_B_high", Te¡v¬Nam+ "_B_high", 
fNbšsH
, 
fXmš
, 
sxmax
 );

1158 
mvaRes
->
	`StÜe
(
mva_eff_s
, "MVA_HIGHBIN_S");

1159 
mvaRes
->
	`StÜe
(
mva_eff_b
, "MVA_HIGHBIN_B");

1160 
mva_eff_s
->
	`Sumw2
();

1161 
mva_eff_b
->
	`Sumw2
();

1165 
ResuÉsCÏssifiÿtiÚ
* 
mvaProb
 = 
dyÇmic_ÿ¡
<ResultsClassification*>

1166 (
	`D©a
()->
	`G‘ResuÉs
Ğ
	`TSŒšg
("´ob_")+
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kMaxAÇlysisTy³
 ) );

1168 
	`Log
(è<< 
kHEADER
 <<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Loİ ov”e¡ƒv’t ªd fÈhi¡og¿m w™h cÏssif›¸»¥Ú£..." << 
Endl
 << Endl;

1169 ià(
mvaProb
è
	`Log
(è<< 
kINFO
 << "AlsØflšg…robab™y‡nd„¬™y hi¡og¿m (Ú„eque¡)..." << 
Endl
;

1170 
¡d
::
veùÜ
<
BoŞ_t
>* 
mvaResTy³s
 = 
mvaRes
->
	`G‘V®ueVeùÜTy³s
();

1173 iàĞ
mvaRes
->
	`G‘Size
(è!ğ
	`G‘NEv’ts
() ) {

1174 
	`Log
(è<< 
kFATAL
 << 
TSŒšg
::
	`FÜm©
("IncÚsi¡’ˆ»suÉ siz %Îd w™h‚umb” oàev’t %u ", 
mvaRes
->
	`G‘Size
(è, 
	`G‘NEv’ts
(èè<< 
Endl
;

1175 
	`as£¹
(
mvaRes
->
	`G‘Size
(è=ğ
	`G‘NEv’ts
());

1178 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1180 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

1181 
Flßt_t
 
v
 = (*
mvaRes
)[
›vt
][0];

1182 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

1184 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)) {

1185 
mvaResTy³s
->
	`push_back
(
kTRUE
);

1186 
mva_s
 ->
	`Fl
Ğ
v
, 
w
 );

1187 ià(
mvaProb
) {

1188 
´oba_s
->
	`Fl
Ğ(*
mvaProb
)[
›vt
][0], 
w
 );

1189 
¿r™y_s
->
	`Fl
Ğ
	`G‘R¬™y
Ğ
v
 ), 
w
 );

1192 
mva_eff_s
 ->
	`Fl
Ğ
v
, 
w
 );

1195 
mvaResTy³s
->
	`push_back
(
kFALSE
);

1196 
mva_b
 ->
	`Fl
Ğ
v
, 
w
 );

1197 ià(
mvaProb
) {

1198 
´oba_b
->
	`Fl
Ğ(*
mvaProb
)[
›vt
][0], 
w
 );

1199 
¿r™y_b
->
	`Fl
Ğ
	`G‘R¬™y
Ğ
v
 ), 
w
 );

1201 
mva_eff_b
 ->
	`Fl
Ğ
v
, 
w
 );

1206 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_s
 );

1207 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_b
 );

1208 
	`gToŞs
().
	`NÜmHi¡
Ğ
´oba_s
 );

1209 
	`gToŞs
().
	`NÜmHi¡
Ğ
´oba_b
 );

1210 
	`gToŞs
().
	`NÜmHi¡
Ğ
¿r™y_s
 );

1211 
	`gToŞs
().
	`NÜmHi¡
Ğ
¿r™y_b
 );

1212 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_eff_s
 );

1213 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_eff_b
 );

1216 ià(
fS¶S
è{ 
d–‘e
 fSplS; fSplS = 0; }

1217 ià(
fS¶B
è{ 
d–‘e
 fSplB; fSplB = 0; }

1218 
fS¶S
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
()è+ " PDF Sig", 
mva_s
, 
PDF
::
kS¶še2
 );

1219 
fS¶B
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
()è+ " PDF Bkg", 
mva_b
, 
PDF
::
kS¶še2
 );

1220 
	}
}

1226 
	gTMVA
::
M‘hodBa£
::
	$Wr™eS‹ToSŒ—m
Ğ
¡d
::
o¡»am
& 
tf
 ) const

1228 
TSŒšg
 
´efix
 = "";

1229 
U£rGroup_t
 * 
u£rInfo
 = 
gSy¡em
->
	`G‘U£rInfo
();

1231 
tf
 << 
´efix
 << "#GEN -*-*-*-*-*-*-*-*-*-*-*- g’”® infØ-*-*-*-*-*-*-*-*-*-*-*-" << 
¡d
::
’dl
 <<…refix << std::endl;

1232 
tf
 << 
´efix
 << "M‘hod : " << 
	`G‘M‘hodTy³Name
(è<< "::" << 
	`G‘M‘hodName
(è<< 
¡d
::
’dl
;

1233 
tf
.
	`£tf
(
¡d
::
ios
::
Ëá
);

1234 
tf
 << 
´efix
 << "TMVA R–—£ : " << 
¡d
::
	`£tw
(10è<< 
	`G‘T¿ššgTMVAV”siÚSŒšg
() << " ["

1235 << 
	`G‘T¿ššgTMVAV”siÚCode
(è<< "]" << 
¡d
::
’dl
;

1236 
tf
 << 
´efix
 << "ROOT R–—£ : " << 
¡d
::
	`£tw
(10è<< 
	`G‘T¿ššgROOTV”siÚSŒšg
() << " ["

1237 << 
	`G‘T¿ššgROOTV”siÚCode
(è<< "]" << 
¡d
::
’dl
;

1238 
tf
 << 
´efix
 << "C»©Ü : " << 
u£rInfo
->
fU£r
 << 
¡d
::
’dl
;

1239 
tf
 << 
´efix
 << "D© : "; 
TD©ime
 *
d
 = 
Ãw
 TD©ime;à<< d->
	`AsSŒšg
(è<< 
¡d
::
’dl
; 
d–‘e
 d;

1240 
tf
 << 
´efix
 << "Ho¡ : " << 
gSy¡em
->
	`G‘BudNode
(è<< 
¡d
::
’dl
;

1241 
tf
 << 
´efix
 << "Dœ : " << 
gSy¡em
->
	`WÜkšgDœeùÜy
(è<< 
¡d
::
’dl
;

1242 
tf
 << 
´efix
 << "T¿ššgƒv’ts: " << 
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è<< 
¡d
::
’dl
;

1244 
TSŒšg
 
	`ª®ysisTy³
(((
cÚ¡_ÿ¡
<
TMVA
::
M‘hodBa£
*>(
this
)->
	`G‘AÇlysisTy³
()==
Ty³s
::
kReg»ssiÚ
) ? "Regression" : "Classification"));

1246 
tf
 << 
´efix
 << "AÇlysi ty³ : " << "[" << ((
	`G‘AÇlysisTy³
()==
Ty³s
::
kReg»ssiÚ
è? "Reg»ssiÚ" : "CÏssifiÿtiÚ"è<< "]" << 
¡d
::
’dl
;

1247 
tf
 << 
´efix
 << 
¡d
::
’dl
;

1249 
d–‘e
 
u£rInfo
;

1252 
tf
 << 
´efix
 << 
¡d
::
’dl
 <<…refix << "#OPT -*-*-*-*-*-*-*-*-*-*-*-*- options -*-*-*-*-*-*-*-*-*-*-*-*-" << std::endl <<…refix << std::endl;

1253 
	`Wr™eO±iÚsToSŒ—m
Ğ
tf
, 
´efix
 );

1254 
tf
 << 
´efix
 << 
¡d
::
’dl
;

1257 
tf
 << 
´efix
 << 
¡d
::
’dl
 <<…refix << "#VAR -*-*-*-*-*-*-*-*-*-*-*-* variables *-*-*-*-*-*-*-*-*-*-*-*-" << std::endl <<…refix << std::endl;

1258 
	`Wr™eV¬sToSŒ—m
Ğ
tf
, 
´efix
 );

1259 
tf
 << 
´efix
 << 
¡d
::
’dl
;

1260 
	}
}

1265 
	gTMVA
::
M‘hodBa£
::
	$AddInfoI‹m
Ğ* 
gi
, cÚ¡ 
TSŒšg
& 
Çme
, cÚ¡ TSŒšg& 
v®ue
) const

1267 * 
™
 = 
	`gToŞs
().
	`AddChd
(
gi
,"Info");

1268 
	`gToŞs
().
	`AddA‰r
(
™
,"Çme", 
Çme
);

1269 
	`gToŞs
().
	`AddA‰r
(
™
,"v®ue", 
v®ue
);

1270 
	}
}

1274 
	gTMVA
::
M‘hodBa£
::
	$AddOuut
Ğ
Ty³s
::
ET»eTy³
 
ty³
, Ty³s::
EAÇlysisTy³
 
ª®ysisTy³
 ) {

1275 ià(
ª®ysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
) {

1276 
	`AddReg»ssiÚOuut
Ğ
ty³
 );

1277 } ià(
ª®ysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

1278 
	`AddMuÉişassOuut
Ğ
ty³
 );

1280 
	`AddCÏssif›rOuut
Ğ
ty³
 );

1281 ià(
	`HasMVAPdfs
())

1282 
	`AddCÏssif›rOuutProb
Ğ
ty³
 );

1284 
	}
}

1290 
	gTMVA
::
M‘hodBa£
::
	$Wr™eS‹ToXML
Ğ* 
·»Á
 ) const

1292 ià(!
·»Á
) ;

1294 
U£rGroup_t
* 
u£rInfo
 = 
gSy¡em
->
	`G‘U£rInfo
();

1296 * 
gi
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "GeneralInfo");

1297 
	`AddInfoI‹m
Ğ
gi
, "TMVA R–—£", 
	`G‘T¿ššgTMVAV”siÚSŒšg
(è+ " [" + 
	`gToŞs
().
	`SŒšgFromIÁ
(
	`G‘T¿ššgTMVAV”siÚCode
()) + "]" );

1298 
	`AddInfoI‹m
Ğ
gi
, "ROOT R–—£", 
	`G‘T¿ššgROOTV”siÚSŒšg
(è+ " [" + 
	`gToŞs
().
	`SŒšgFromIÁ
(
	`G‘T¿ššgROOTV”siÚCode
()) + "]");

1299 
	`AddInfoI‹m
Ğ
gi
, "C»©Ü", 
u£rInfo
->
fU£r
);

1300 
TD©ime
 
dt
; 
	`AddInfoI‹m
Ğ
gi
, "D©e", dt.
	`AsSŒšg
());

1301 
	`AddInfoI‹m
Ğ
gi
, "Ho¡", 
gSy¡em
->
	`G‘BudNode
() );

1302 
	`AddInfoI‹m
Ğ
gi
, "Dœ", 
gSy¡em
->
	`WÜkšgDœeùÜy
());

1303 
	`AddInfoI‹m
Ğ
gi
, "T¿ššgƒv’ts", 
	`gToŞs
().
	`SŒšgFromIÁ
(
	`D©a
()->
	`G‘NT¿ššgEv’ts
()));

1304 
	`AddInfoI‹m
Ğ
gi
, "T¿ššgTime", 
	`gToŞs
().
	`SŒšgFromDoubË
(
cÚ¡_ÿ¡
<
TMVA
::
M‘hodBa£
*>(
this
)->
	`G‘T¿šTime
()));

1306 
Ty³s
::
EAÇlysisTy³
 
aTy³
 = 
cÚ¡_ÿ¡
<
TMVA
::
M‘hodBa£
*>(
this
)->
	`G‘AÇlysisTy³
();

1307 
TSŒšg
 
	`ª®ysisTy³
((
aTy³
==
Ty³s
::
kReg»ssiÚ
) ? "Regression" :

1308 (
aTy³
==
Ty³s
::
kMuÉişass
 ? "Multiclass" : "Classification"));

1309 
	`AddInfoI‹m
Ğ
gi
, "AÇlysisTy³", 
ª®ysisTy³
 );

1310 
d–‘e
 
u£rInfo
;

1313 
	`AddO±iÚsXMLTo
Ğ
·»Á
 );

1316 
	`AddV¬sXMLTo
Ğ
·»Á
 );

1319 ià(
fMod–P”si¡’û
)

1320 
	`AddS³ù©ÜsXMLTo
Ğ
·»Á
 );

1323 
	`AddCÏs£sXMLTo
(
·»Á
);

1326 ià(
	`DoReg»ssiÚ
()è
	`AddT¬g‘sXMLTo
(
·»Á
);

1329 
	`G‘T¿nsfÜm©iÚHªdËr
(
çl£
).
	`AddXMLTo
Ğ
·»Á
 );

1332 * 
pdfs
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "MVAPdfs");

1333 ià(
fMVAPdfS
èfMVAPdfS->
	`AddXMLTo
(
pdfs
);

1334 ià(
fMVAPdfB
èfMVAPdfB->
	`AddXMLTo
(
pdfs
);

1337 
	`AddWeightsXMLTo
Ğ
·»Á
 );

1338 
	}
}

1344 
	gTMVA
::
M‘hodBa£
::
	$R—dS‹FromSŒ—m
Ğ
TFe
& 
rf
 )

1346 
BoŞ_t
 
addDœStus
 = 
TH1
::
	`AddDœeùÜyStus
();

1347 
TH1
::
	`AddDœeùÜy
( 0 );

1348 
fMVAPdfS
 = (
TMVA
::
PDF
*)
rf
.
	`G‘
( "MVA_PDF_Signal" );

1349 
fMVAPdfB
 = (
TMVA
::
PDF
*)
rf
.
	`G‘
( "MVA_PDF_Background" );

1351 
TH1
::
	`AddDœeùÜy
Ğ
addDœStus
 );

1353 
	`R—dWeightsFromSŒ—m
Ğ
rf
 );

1355 
	`S‘Te¡v¬Name
();

1356 
	}
}

1363 
	gTMVA
::
M‘hodBa£
::
	$Wr™eS‹ToFe
() const

1366 
TSŒšg
 
	`tâame
Ğ
	`G‘WeightFeName
() );

1369 
TSŒšg
 
	`xmlâame
Ğ
tâame
 ); 
xmlâame
.
	`R•ÏûAÎ
( ".txt", ".xml" );

1370 
	`Log
(è<< 
kINFO


1372 << 
	`gToŞs
().
	`CŞÜ
("lightblue"è<< 
xmlâame
 << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1373 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`NewDoc
();

1374 * 
roÙnode
 = 
	`gToŞs
().
	`AddChd
(0,"M‘hodS‘up", "", 
Œue
);

1375 
	`gToŞs
().
	`xmËngše
().
	`DocS‘RoÙEËm’t
(
doc
,
roÙnode
);

1376 
	`gToŞs
().
	`AddA‰r
(
roÙnode
,"M‘hod", 
	`G‘M‘hodTy³Name
(è+ "::" + 
	`G‘M‘hodName
());

1377 
	`Wr™eS‹ToXML
(
roÙnode
);

1378 
	`gToŞs
().
	`xmËngše
().
	`SaveDoc
(
doc
,
xmlâame
);

1379 
	`gToŞs
().
	`xmËngše
().
	`F»eDoc
(
doc
);

1380 
	}
}

1385 
	gTMVA
::
M‘hodBa£
::
	$R—dS‹FromFe
()

1389 
TSŒšg
 
	`tâame
(
	`G‘WeightFeName
());

1391 
	`Log
(è<< 
kDEBUG


1393 << 
	`gToŞs
().
	`CŞÜ
("lightblue"è<< 
tâame
 << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1395 ià(
tâame
.
	`EndsW™h
(".xml") ) {

1396 #ià
ROOT_VERSION_CODE
 >ğ
	`ROOT_VERSION
(5,29,0)

1397 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`P¬£Fe
(
tâame
,gToŞs().
	`xmËngšebufãrsize
());

1399 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`P¬£Fe
(
tâame
);

1401 * 
roÙnode
 = 
	`gToŞs
().
	`xmËngše
().
	`DocG‘RoÙEËm’t
(
doc
);

1402 
	`R—dS‹FromXML
(
roÙnode
);

1403 
	`gToŞs
().
	`xmËngše
().
	`F»eDoc
(
doc
);

1406 
¡d
::
febuf
 
fb
;

1407 
fb
.
	`İ’
(
tâame
.
	`D©a
(),
¡d
::
ios
::
š
);

1408 ià(!
fb
.
	`is_İ’
()) {

1409 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<ReadStateFromFile> "

1410 << "UÇbËØİ’ iÅuˆweighˆfe: " << 
tâame
 << 
Endl
;

1412 
¡d
::
i¡»am
 
	`fš
(&
fb
);

1413 
	`R—dS‹FromSŒ—m
(
fš
);

1414 
fb
.
	`şo£
();

1416 ià(!
fTxtWeightsOÆy
) {

1418 
TSŒšg
 
	`râame
Ğ
tâame
 ); 
râame
.
	`R•ÏûAÎ
( ".txt", ".root" );

1419 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Reading„oot weight file: "

1420 << 
	`gToŞs
().
	`CŞÜ
("lightblue"è<< 
râame
 << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1421 
TFe
* 
rfe
 = TFe::
	`O³n
Ğ
râame
, "READ" );

1422 
	`R—dS‹FromSŒ—m
Ğ*
rfe
 );

1423 
rfe
->
	`Clo£
();

1425 
	}
}

1429 
	gTMVA
::
M‘hodBa£
::
	$R—dS‹FromXMLSŒšg
ĞcÚ¡ * 
xml¡r
 ) {

1430 #ià
ROOT_VERSION_CODE
 >ğ
	`ROOT_VERSION
(5,26,00)

1431 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`P¬£SŒšg
(
xml¡r
);

1432 * 
roÙnode
 = 
	`gToŞs
().
	`xmËngše
().
	`DocG‘RoÙEËm’t
(
doc
);

1433 
	`R—dS‹FromXML
(
roÙnode
);

1434 
	`gToŞs
().
	`xmËngše
().
	`F»eDoc
(
doc
);

1436 
	`Log
(è<< 
kFATAL
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()) << "Method MethodBase::ReadStateFromXMLString( const char* xmlstr = "

1437 << 
xml¡r
 << " ) i nÙ‡vaabË fÜ ROOT v”siÚ ´iÜØ5.26/00." << 
Endl
;

1441 
	}
}

1445 
	gTMVA
::
M‘hodBa£
::
	$R—dS‹FromXML
Ğ* 
m‘hodNode
 )

1447 
TSŒšg
 
fuÎM‘hodName
;

1448 
	`gToŞs
().
	`R—dA‰r
Ğ
m‘hodNode
, "M‘hod", 
fuÎM‘hodName
 );

1449 
fM‘hodName
 = 
	`fuÎM‘hodName
(
fuÎM‘hodName
.
	`Index
("::")+2,fuÎM‘hodName.
	`L’gth
());

1452 
	`Log
().
	`S‘Sourû
Ğ
	`G‘Name
() );

1453 
	`Log
(è<< 
kDEBUG


1454 << "R—d m‘hod \"" << 
	`G‘M‘hodName
(è<< "\" oàty³ \"" << 
	`G‘M‘hodTy³Name
(è<< "\"" << 
Endl
;

1457 
	`S‘Te¡v¬Name
();

1459 
TSŒšg
 
	`nodeName
("");

1460 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
m‘hodNode
);

1461 
ch
!=0) {

1462 
nodeName
 = 
	`TSŒšg
Ğ
	`gToŞs
().
	`G‘Name
(
ch
) );

1464 ià(
nodeName
=="GeneralInfo") {

1467 
TSŒšg
 
	`Çme
(""),
	`v®
("");

1468 * 
ªty³Node
 = 
	`gToŞs
().
	`G‘Chd
(
ch
);

1469 
ªty³Node
) {

1470 
	`gToŞs
().
	`R—dA‰r
Ğ
ªty³Node
, "Çme", 
Çme
 );

1472 ià(
Çme
 == "TrainingTime")

1473 
	`gToŞs
().
	`R—dA‰r
Ğ
ªty³Node
, "v®ue", 
fT¿šTime
 );

1475 ià(
Çme
 == "AnalysisType") {

1476 
	`gToŞs
().
	`R—dA‰r
Ğ
ªty³Node
, "v®ue", 
v®
 );

1477 
v®
.
	`ToLow”
();

1478 ià(
v®
 =ğ"»g»ssiÚ" ) 
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kReg»ssiÚ
 );

1479 ià(
v®
 =ğ"şassifiÿtiÚ" ) 
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kCÏssifiÿtiÚ
 );

1480 ià(
v®
 =ğ"muÉişass" ) 
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kMuÉişass
 );

1481 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "AÇlysi ty³ " << 
v®
 << " i nÙ known." << 
Endl
;

1484 ià(
Çme
 == "TMVA Release" ||‚ame == "TMVA") {

1485 
TSŒšg
 
s
;

1486 
	`gToŞs
().
	`R—dA‰r
Ğ
ªty³Node
, "v®ue", 
s
);

1487 
fTMVAT¿ššgV”siÚ
 = 
	`TSŒšg
(
	`s
(
s
.
	`Index
("[")+1,s.Index("]")-s.Index("[")-1)).
	`Atoi
();

1488 
	`Log
(è<< 
kDEBUG
 <<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "MVA m‘hod wa Œašed w™h TMVA V”siÚ: " << 
	`G‘T¿ššgTMVAV”siÚSŒšg
(è<< 
Endl
;

1491 ià(
Çme
 == "ROOT Release" ||‚ame == "ROOT") {

1492 
TSŒšg
 
s
;

1493 
	`gToŞs
().
	`R—dA‰r
Ğ
ªty³Node
, "v®ue", 
s
);

1494 
fROOTT¿ššgV”siÚ
 = 
	`TSŒšg
(
	`s
(
s
.
	`Index
("[")+1,s.Index("]")-s.Index("[")-1)).
	`Atoi
();

1495 
	`Log
(è<< 
kDEBUG


1496 << "MVA m‘hod wa Œašed w™h ROOT V”siÚ: " << 
	`G‘T¿ššgROOTV”siÚSŒšg
(è<< 
Endl
;

1498 
ªty³Node
 = 
	`gToŞs
().
	`G‘NextChd
(antypeNode);

1501 ià(
nodeName
=="Options") {

1502 
	`R—dO±iÚsFromXML
(
ch
);

1503 
	`P¬£O±iÚs
();

1506 ià(
nodeName
=="Variables") {

1507 
	`R—dV¬ŸbËsFromXML
(
ch
);

1509 ià(
nodeName
=="Spectators") {

1510 
	`R—dS³ù©ÜsFromXML
(
ch
);

1512 ià(
nodeName
=="Classes") {

1513 ià(
	`D©aInfo
().
	`G‘NCÏs£s
()==0è
	`R—dCÏs£sFromXML
(
ch
);

1515 ià(
nodeName
=="Targets") {

1516 ià(
	`D©aInfo
().
	`G‘NT¬g‘s
()==0 && 
	`DoReg»ssiÚ
()è
	`R—dT¬g‘sFromXML
(
ch
);

1518 ià(
nodeName
=="Transformations") {

1519 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`R—dFromXML
(
ch
);

1521 ià(
nodeName
=="MVAPdfs") {

1522 
TSŒšg
 
pdâame
;

1523 ià(
fMVAPdfS
è{ 
d–‘e
 fMVAPdfS; fMVAPdfS=0; }

1524 ià(
fMVAPdfB
è{ 
d–‘e
 fMVAPdfB; fMVAPdfB=0; }

1525 * 
pdâode
 = 
	`gToŞs
().
	`G‘Chd
(
ch
);

1526 ià(
pdâode
) {

1527 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "Name", 
pdâame
);

1528 
fMVAPdfS
 = 
Ãw
 
	`PDF
(
pdâame
);

1529 
fMVAPdfS
->
	`R—dXML
(
pdâode
);

1530 
pdâode
 = 
	`gToŞs
().
	`G‘NextChd
(pdfnode);

1531 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "Name", 
pdâame
);

1532 
fMVAPdfB
 = 
Ãw
 
	`PDF
(
pdâame
);

1533 
fMVAPdfB
->
	`R—dXML
(
pdâode
);

1536 ià(
nodeName
=="Weights") {

1537 
	`R—dWeightsFromXML
(
ch
);

1540 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "UÅ¬£d XML‚ode: '" << 
nodeName
 << "'" << 
Endl
;

1542 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1547 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘C®ËrName
(è=ğ""èG‘T¿nsfÜm©iÚHªdËr().
	`S‘C®ËrName
Ğ
	`G‘Name
() );

1548 
	}
}

1553 
	gTMVA
::
M‘hodBa£
::
	$R—dS‹FromSŒ—m
Ğ
¡d
::
i¡»am
& 
fš
 )

1555 
buf
[512];

1558 
	`S‘AÇlysisTy³
(
Ty³s
::
kCÏssifiÿtiÚ
);

1562 
	`G‘Lše
(
fš
,
buf
);

1563 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("M‘hod")è
	`G‘Lše
(
fš
,buf);

1564 
TSŒšg
 
	`Çme¡r
(
buf
);

1566 
TSŒšg
 
m‘hodTy³
 = 
	`Çme¡r
(0,
Çme¡r
.
	`Index
("::"));

1567 
m‘hodTy³
 = 
	`m‘hodTy³
(m‘hodTy³.
	`La¡
(' '),m‘hodTy³.
	`L’gth
());

1568 
m‘hodTy³
 = m‘hodTy³.
	`SŒ
(
TSŒšg
::
kL—dšg
);

1570 
TSŒšg
 
m‘hodName
 = 
	`Çme¡r
(
Çme¡r
.
	`Index
("::")+2,Çme¡r.
	`L’gth
());

1571 
m‘hodName
 = m‘hodName.
	`SŒ
(
TSŒšg
::
kL—dšg
);

1572 ià(
m‘hodName
 =ğ""èm‘hodNamğ
m‘hodTy³
;

1573 
fM‘hodName
 = 
m‘hodName
;

1575 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "R—d m‘hod \"" << 
	`G‘M‘hodName
(è<< "\" oàty³ \"" << 
	`G‘M‘hodTy³Name
(è<< "\"" << 
Endl
;

1578 
	`Log
().
	`S‘Sourû
Ğ
	`G‘Name
() );

1591 
	`G‘Lše
(
fš
,
buf
);

1592 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("#OPT")è
	`G‘Lše
(
fš
,buf);

1593 
	`R—dO±iÚsFromSŒ—m
(
fš
);

1594 
	`P¬£O±iÚs
();

1597 
fš
.
	`g‘lše
(
buf
,512);

1598 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("#VAR")è
fš
.
	`g‘lše
(buf,512);

1599 
	`R—dV¬sFromSŒ—m
(
fš
);

1602 
	`ProûssO±iÚs
();

1604 ià(
	`IsNÜm®i£d
()) {

1605 
V¬ŸbËNÜm®izeT¿nsfÜm
* 
nÜm
 = (VariableNormalizeTransform*)

1606 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËNÜm®izeT¿nsfÜm
(
	`D©aInfo
()), -1 );

1607 
nÜm
->
	`BudT¿nsfÜm©iÚFromV¬Info
Ğ
	`D©aInfo
().
	`G‘V¬ŸbËInfos
() );

1609 
V¬ŸbËT¿nsfÜmBa£
 *
	`v¬T¿fo
(0), *
	`v¬T¿fo2
(0);

1610 iàĞ
fV¬T¿nsfÜmSŒšg
 == "None") {

1611 ià(
fU£DecÜr
)

1612 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËDecÜrT¿nsfÜm
(
	`D©aInfo
()), -1 );

1613 } iàĞ
fV¬T¿nsfÜmSŒšg
 == "Decorrelate" ) {

1614 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËDecÜrT¿nsfÜm
(
	`D©aInfo
()), -1 );

1615 } iàĞ
fV¬T¿nsfÜmSŒšg
 == "PCA" ) {

1616 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËPCAT¿nsfÜm
(
	`D©aInfo
()), -1 );

1617 } iàĞ
fV¬T¿nsfÜmSŒšg
 == "Uniform" ) {

1618 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËGaussT¿nsfÜm
(
	`D©aInfo
(),"Uniform"), -1 );

1619 } iàĞ
fV¬T¿nsfÜmSŒšg
 == "Gauss" ) {

1620 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËGaussT¿nsfÜm
(
	`D©aInfo
()), -1 );

1621 } iàĞ
fV¬T¿nsfÜmSŒšg
 == "GaussDecorr" ) {

1622 
v¬T¿fo
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËGaussT¿nsfÜm
(
	`D©aInfo
()), -1 );

1623 
v¬T¿fo2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`AddT¿nsfÜm©iÚ
Ğ
Ãw
 
	`V¬ŸbËDecÜrT¿nsfÜm
(
	`D©aInfo
()), -1 );

1625 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<ProcessOptions> Variableransform '"

1626 << 
fV¬T¿nsfÜmSŒšg
 << "' unknown." << 
Endl
;

1629 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() > 0) {

1630 
fš
.
	`g‘lše
(
buf
,512);

1631 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("#MAT")è
fš
.
	`g‘lše
(buf,512);

1632 ià(
v¬T¿fo
) {

1633 
TSŒšg
 
	`Œafo
(
fV¬ŸbËT¿nsfÜmTy³SŒšg
); 
Œafo
.
	`ToLow”
();

1634 
v¬T¿fo
->
	`R—dT¿nsfÜm©iÚFromSŒ—m
(
fš
, 
Œafo
 );

1636 ià(
v¬T¿fo2
) {

1637 
TSŒšg
 
	`Œafo
(
fV¬ŸbËT¿nsfÜmTy³SŒšg
); 
Œafo
.
	`ToLow”
();

1638 
v¬T¿fo2
->
	`R—dT¿nsfÜm©iÚFromSŒ—m
(
fš
, 
Œafo
 );

1643 ià(
	`HasMVAPdfs
()) {

1645 
fš
.
	`g‘lše
(
buf
,512);

1646 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("#MVAPDFS")è
fš
.
	`g‘lše
(buf,512);

1647 ià(
fMVAPdfS
 !ğ0è{ 
d–‘e
 fMVAPdfS; fMVAPdfS = 0; }

1648 ià(
fMVAPdfB
 !ğ0è{ 
d–‘e
 fMVAPdfB; fMVAPdfB = 0; }

1649 
fMVAPdfS
 = 
Ãw
 
	`PDF
(
	`TSŒšg
(
	`G‘Name
()) + " MVA PDF Sig");

1650 
fMVAPdfB
 = 
Ãw
 
	`PDF
(
	`TSŒšg
(
	`G‘Name
()) + " MVA PDF Bkg");

1651 
fMVAPdfS
->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

1652 
fMVAPdfB
->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

1654 
fš
 >> *
fMVAPdfS
;

1655 
fš
 >> *
fMVAPdfB
;

1659 
fš
.
	`g‘lše
(
buf
,512);

1660 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("#WGT")è
fš
.
	`g‘lše
(buf,512);

1661 
fš
.
	`g‘lše
(
buf
,512);

1662 
	`R—dWeightsFromSŒ—m
Ğ
fš
 );;

1665 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘C®ËrName
(è=ğ""èG‘T¿nsfÜm©iÚHªdËr().
	`S‘C®ËrName
Ğ
	`G‘Name
() );

1667 
	}
}

1673 
	gTMVA
::
M‘hodBa£
::
	$Wr™eV¬sToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
, cÚ¡ 
TSŒšg
& 
´efix
 ) const

1675 
o
 << 
´efix
 << "NV¬ " << 
	`D©aInfo
().
	`G‘NV¬ŸbËs
(è<< 
¡d
::
’dl
;

1676 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
v¬It
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfos
().
	`begš
();

1677 ; 
v¬It
!=
	`D©aInfo
().
	`G‘V¬ŸbËInfos
().
	`’d
(); v¬It++è{ 
o
 << 
´efix
; v¬It->
	`Wr™eToSŒ—m
(o); }

1678 
o
 << 
´efix
 << "NS³ø" << 
	`D©aInfo
().
	`G‘NS³ù©Üs
(è<< 
¡d
::
’dl
;

1679 
v¬It
 = 
	`D©aInfo
().
	`G‘S³ù©ÜInfos
().
	`begš
();

1680 ; 
v¬It
!=
	`D©aInfo
().
	`G‘S³ù©ÜInfos
().
	`’d
(); v¬It++è{ 
o
 << 
´efix
; v¬It->
	`Wr™eToSŒ—m
(o); }

1681 
	}
}

1688 
	gTMVA
::
M‘hodBa£
::
	$R—dV¬sFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

1690 
TSŒšg
 
dummy
;

1691 
UIÁ_t
 
»adNV¬
;

1692 
i¡r
 >> 
dummy
 >> 
»adNV¬
;

1694 ià(
»adNV¬
!=
	`D©aInfo
().
	`G‘NV¬ŸbËs
()) {

1695 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "You deş¬ed "<< D©aInfo().
	`G‘NV¬ŸbËs
() << " variables inhe Reader"

1696 << " whth”¬" << 
»adNV¬
 << " variables declared inhe file"

1697 << 
Endl
;

1701 
V¬ŸbËInfo
 
v¬Info
;

1702 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
™”©Ü
 
v¬It
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfos
().
	`begš
();

1703 
v¬Idx
 = 0;

1704 ; 
v¬It
!=
	`D©aInfo
().
	`G‘V¬ŸbËInfos
().
	`’d
(); v¬It++, 
v¬Idx
++) {

1705 
v¬Info
.
	`R—dFromSŒ—m
(
i¡r
);

1706 ià(
v¬It
->
	`G‘Ex´essiÚ
(è=ğ
v¬Info
.GetExpression()) {

1707 
v¬Info
.
	`S‘Ex‹º®Lšk
((*
v¬It
).
	`G‘Ex‹º®Lšk
());

1708 (*
v¬It
èğ
v¬Info
;

1711 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "ERROR iÀ<R—dV¬sFromSŒ—m>" << 
Endl
;

1712 
	`Log
(è<< 
kINFO
 << "Thdefš™iÚ (ÜhÜd”èoàthv¬ŸbË found iÀthšpuˆfis" << 
Endl
;

1713 
	`Log
(è<< 
kINFO
 << "i nÙh§ma thÚdeş¬ed iÀthR—d” (which i Ãûs§ry fÜ" << 
Endl
;

1714 
	`Log
(è<< 
kINFO
 << "thcÜ»ù wÜkšg oàthm‘hod):" << 
Endl
;

1715 
	`Log
(è<< 
kINFO
 << " v¬ #" << 
v¬Idx
 <<" deş¬ed iÀR—d”: " << 
v¬It
->
	`G‘Ex´essiÚ
(è<< 
Endl
;

1716 
	`Log
(è<< 
kINFO
 << " v¬ #" << 
v¬Idx
 <<" deş¬ed iÀf : " << 
v¬Info
.
	`G‘Ex´essiÚ
(è<< 
Endl
;

1717 
	`Log
(è<< 
kFATAL
 << "Thex´essiÚ deş¬edØthR—d”‚“d tØbchecked (ÇmÜ ord”‡» wrÚg)" << 
Endl
;

1720 
	}
}

1725 
	gTMVA
::
M‘hodBa£
::
	$AddV¬sXMLTo
Ğ* 
·»Á
 ) const

1727 * 
v¬s
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Variables");

1728 
	`gToŞs
().
	`AddA‰r
Ğ
v¬s
, "NV¬", gToŞs().
	`SŒšgFromIÁ
(
	`D©aInfo
().
	`G‘NV¬ŸbËs
()) );

1730 
UIÁ_t
 
idx
=0; idx<
	`D©aInfo
().
	`G‘V¬ŸbËInfos
().
	`size
(); idx++) {

1731 
V¬ŸbËInfo
& 
vi
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfos
()[
idx
];

1732 * 
v¬
 = 
	`gToŞs
().
	`AddChd
Ğ
v¬s
, "Variable" );

1733 
	`gToŞs
().
	`AddA‰r
Ğ
v¬
, "V¬Index", 
idx
 );

1734 
vi
.
	`AddToXML
Ğ
v¬
 );

1736 
	}
}

1741 
	gTMVA
::
M‘hodBa£
::
	$AddS³ù©ÜsXMLTo
Ğ* 
·»Á
 ) const

1743 * 
¥ecs
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Spectators");

1745 
UIÁ_t
 
wr™eIdx
=0;

1746 
UIÁ_t
 
idx
=0; idx<
	`D©aInfo
().
	`G‘S³ù©ÜInfos
().
	`size
(); idx++) {

1748 
V¬ŸbËInfo
& 
vi
 = 
	`D©aInfo
().
	`G‘S³ù©ÜInfos
()[
idx
];

1752 ià(
vi
.
	`G‘V¬Ty³
()=='C') ;

1754 * 
¥ec
 = 
	`gToŞs
().
	`AddChd
Ğ
¥ecs
, "Spectator" );

1755 
	`gToŞs
().
	`AddA‰r
Ğ
¥ec
, "S³cIndex", 
wr™eIdx
++ );

1756 
vi
.
	`AddToXML
Ğ
¥ec
 );

1758 
	`gToŞs
().
	`AddA‰r
Ğ
¥ecs
, "NS³c", gToŞs().
	`SŒšgFromIÁ
(
wr™eIdx
) );

1759 
	}
}

1764 
	gTMVA
::
M‘hodBa£
::
	$AddCÏs£sXMLTo
Ğ* 
·»Á
 ) const

1766 
UIÁ_t
 
nCÏs£s
=
	`D©aInfo
().
	`G‘NCÏs£s
();

1768 * 
şas£s
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Classes");

1769 
	`gToŞs
().
	`AddA‰r
Ğ
şas£s
, "NCÏss", 
nCÏs£s
 );

1771 
UIÁ_t
 
iCls
=0; iCls<
nCÏs£s
; ++iCls) {

1772 
CÏssInfo
 *
şassInfo
=
	`D©aInfo
().
	`G‘CÏssInfo
 (
iCls
);

1773 
TSŒšg
 
şassName
 =
şassInfo
->
	`G‘Name
();

1774 
UIÁ_t
 
şassNumb”
=
şassInfo
->
	`G‘Numb”
();

1776 * 
şassNode
=
	`gToŞs
().
	`AddChd
(
şas£s
, "Class");

1777 
	`gToŞs
().
	`AddA‰r
Ğ
şassNode
, "Name", 
şassName
 );

1778 
	`gToŞs
().
	`AddA‰r
Ğ
şassNode
, "Index", 
şassNumb”
 );

1780 
	}
}

1784 
	gTMVA
::
M‘hodBa£
::
	$AddT¬g‘sXMLTo
Ğ* 
·»Á
 ) const

1786 * 
rg‘s
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Targets");

1787 
	`gToŞs
().
	`AddA‰r
Ğ
rg‘s
, "NTrgt", gToŞs().
	`SŒšgFromIÁ
(
	`D©aInfo
().
	`G‘NT¬g‘s
()) );

1789 
UIÁ_t
 
idx
=0; idx<
	`D©aInfo
().
	`G‘T¬g‘Infos
().
	`size
(); idx++) {

1790 
V¬ŸbËInfo
& 
vi
 = 
	`D©aInfo
().
	`G‘T¬g‘Infos
()[
idx
];

1791 * 
r
 = 
	`gToŞs
().
	`AddChd
Ğ
rg‘s
, "Target" );

1792 
	`gToŞs
().
	`AddA‰r
Ğ
r
, "T¬g‘Index", 
idx
 );

1793 
vi
.
	`AddToXML
Ğ
r
 );

1795 
	}
}

1800 
	gTMVA
::
M‘hodBa£
::
	$R—dV¬ŸbËsFromXML
Ğ* 
v¬node
 )

1802 
UIÁ_t
 
»adNV¬
;

1803 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "NV¬", 
»adNV¬
);

1805 ià(
»adNV¬
!=
	`D©aInfo
().
	`G‘NV¬ŸbËs
()) {

1806 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "You deş¬ed "<< D©aInfo().
	`G‘NV¬ŸbËs
() << " variables inhe Reader"

1807 << " whth”¬" << 
»adNV¬
 << " variables declared inhe file"

1808 << 
Endl
;

1812 
V¬ŸbËInfo
 
»adV¬Info
, 
exi¡šgV¬Info
;

1813 
v¬Idx
 = 0;

1814 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
v¬node
);

1815 
ch
) {

1816 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "V¬Index", 
v¬Idx
);

1817 
exi¡šgV¬Info
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfos
()[
v¬Idx
];

1818 
»adV¬Info
.
	`R—dFromXML
(
ch
);

1820 ià(
exi¡šgV¬Info
.
	`G‘Ex´essiÚ
(è=ğ
»adV¬Info
.GetExpression()) {

1821 
»adV¬Info
.
	`S‘Ex‹º®Lšk
(
exi¡šgV¬Info
.
	`G‘Ex‹º®Lšk
());

1822 
exi¡šgV¬Info
 = 
»adV¬Info
;

1825 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "ERROR iÀ<R—dV¬ŸbËsFromXML>" << 
Endl
;

1826 
	`Log
(è<< 
kINFO
 << "Thdefš™iÚ (ÜhÜd”èoàthv¬ŸbË found iÀthšpuˆfis" << 
Endl
;

1827 
	`Log
(è<< 
kINFO
 << "nÙh§ma thÚdeş¬ed iÀthR—d” (which i Ãûs§ry fÜhe" << 
Endl
;

1828 
	`Log
(è<< 
kINFO
 << "cÜ»ù wÜkšg oàthm‘hod):" << 
Endl
;

1829 
	`Log
(è<< 
kINFO
 << " v¬ #" << 
v¬Idx
 <<" deş¬ed iÀR—d”: " << 
exi¡šgV¬Info
.
	`G‘Ex´essiÚ
(è<< 
Endl
;

1830 
	`Log
(è<< 
kINFO
 << " v¬ #" << 
v¬Idx
 <<" deş¬ed iÀf : " << 
»adV¬Info
.
	`G‘Ex´essiÚ
(è<< 
Endl
;

1831 
	`Log
(è<< 
kFATAL
 << "Thex´essiÚ deş¬edØthR—d”‚“d tØbchecked (ÇmÜ ord”‡» wrÚg)" << 
Endl
;

1833 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1835 
	}
}

1840 
	gTMVA
::
M‘hodBa£
::
	$R—dS³ù©ÜsFromXML
Ğ* 
¥eúode
 )

1842 
UIÁ_t
 
»adNS³c
;

1843 
	`gToŞs
().
	`R—dA‰r
Ğ
¥eúode
, "NS³c", 
»adNS³c
);

1845 ià(
»adNS³c
!=
	`D©aInfo
().
	`G‘NS³ù©Üs
(
kFALSE
)) {

1846 
	`Log
(è<< 
kFATAL
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "You deş¬ed "<< D©aInfo().
	`G‘NS³ù©Üs
(
kFALSE
) << " spectators inhe Reader"

1847 << " whth”¬" << 
»adNS³c
 << " spectators declared inhe file"

1848 << 
Endl
;

1852 
V¬ŸbËInfo
 
»adS³cInfo
, 
exi¡šgS³cInfo
;

1853 
¥ecIdx
 = 0;

1854 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
¥eúode
);

1855 
ch
) {

1856 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "S³cIndex", 
¥ecIdx
);

1857 
exi¡šgS³cInfo
 = 
	`D©aInfo
().
	`G‘S³ù©ÜInfos
()[
¥ecIdx
];

1858 
»adS³cInfo
.
	`R—dFromXML
(
ch
);

1860 ià(
exi¡šgS³cInfo
.
	`G‘Ex´essiÚ
(è=ğ
»adS³cInfo
.GetExpression()) {

1861 
»adS³cInfo
.
	`S‘Ex‹º®Lšk
(
exi¡šgS³cInfo
.
	`G‘Ex‹º®Lšk
());

1862 
exi¡šgS³cInfo
 = 
»adS³cInfo
;

1865 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "ERROR iÀ<R—dS³ù©ÜsFromXML>" << 
Endl
;

1866 
	`Log
(è<< 
kINFO
 << "Thdefš™iÚ (ÜhÜd”èoàth¥eù©Ü found iÀthšpuˆfis" << 
Endl
;

1867 
	`Log
(è<< 
kINFO
 << "nÙh§ma thÚdeş¬ed iÀthR—d” (which i Ãûs§ry fÜhe" << 
Endl
;

1868 
	`Log
(è<< 
kINFO
 << "cÜ»ù wÜkšg oàthm‘hod):" << 
Endl
;

1869 
	`Log
(è<< 
kINFO
 << " s³ø#" << 
¥ecIdx
 <<" deş¬ed iÀR—d”: " << 
exi¡šgS³cInfo
.
	`G‘Ex´essiÚ
(è<< 
Endl
;

1870 
	`Log
(è<< 
kINFO
 << " s³ø#" << 
¥ecIdx
 <<" deş¬ed iÀf : " << 
»adS³cInfo
.
	`G‘Ex´essiÚ
(è<< 
Endl
;

1871 
	`Log
(è<< 
kFATAL
 << "Thex´essiÚ deş¬edØthR—d”‚“d tØbchecked (ÇmÜ ord”‡» wrÚg)" << 
Endl
;

1873 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1875 
	}
}

1880 
	gTMVA
::
M‘hodBa£
::
	$R—dCÏs£sFromXML
Ğ* 
ş¢ode
 )

1882 
UIÁ_t
 
»adNCls
;

1884 
	`gToŞs
().
	`R—dA‰r
Ğ
ş¢ode
, "NCÏss", 
»adNCls
);

1886 
TSŒšg
 
şassName
="";

1887 
UIÁ_t
 
şassIndex
=0;

1888 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
ş¢ode
);

1889 ià(!
ch
) {

1890 
UIÁ_t
 
işs
 = 0; işs<
»adNCls
;++icls) {

1891 
TSŒšg
 
şas¢ame
 = 
	`FÜm
("şass%i",
işs
);

1892 
	`D©aInfo
().
	`AddCÏss
(
şas¢ame
);

1897 
ch
) {

1898 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Index", 
şassIndex
);

1899 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Name", 
şassName
 );

1900 
	`D©aInfo
().
	`AddCÏss
(
şassName
);

1902 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1907 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Signal") != 0) {

1908 
fSigÇlCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

1911 
fSigÇlCÏss
=0;

1912 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Background") != 0) {

1913 
fBackgroundCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("Background")->
	`G‘Numb”
();

1916 
fBackgroundCÏss
=1;

1917 
	}
}

1922 
	gTMVA
::
M‘hodBa£
::
	$R—dT¬g‘sFromXML
Ğ* 
ºode
 )

1924 
UIÁ_t
 
»adNT¬
;

1925 
	`gToŞs
().
	`R—dA‰r
Ğ
ºode
, "NTrgt", 
»adNT¬
);

1927 
rIdx
 = 0;

1928 
TSŒšg
 
ex´essiÚ
;

1929 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
ºode
);

1930 
ch
) {

1931 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "T¬g‘Index", 
rIdx
);

1932 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Ex´essiÚ", 
ex´essiÚ
);

1933 
	`D©aInfo
().
	`AddT¬g‘
(
ex´essiÚ
,"","",0,0);

1935 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1937 
	}
}

1943 
TDœeùÜy
* 
	gTMVA
::
M‘hodBa£
::
	$Ba£Dœ
() const

1945 ià(
fBa£Dœ
 != 0)  fBaseDir;

1946 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<" Ba£ DœeùÜy fÜ " << 
	`G‘M‘hodName
(è<< "‚Ù s‘ y‘ --> check ià®»adyh”e.." <<
Endl
;

1948 
TDœeùÜy
* 
m‘hodDœ
 = 
	`M‘hodBa£Dœ
();

1949 ià(
m‘hodDœ
==0)

1950 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "M‘hodBa£::Ba£Dœ(è- M‘hodBa£Dœ(è»tuº‡ NULL…oš‹r!" << 
Endl
;

1952 
TSŒšg
 
deçuÉDœ
 = 
	`G‘M‘hodName
();

1953 
TDœeùÜy
 *
sdœ
 = 
m‘hodDœ
->
	`G‘DœeùÜy
(
deçuÉDœ
.
	`D©a
());

1954 if(!
sdœ
)

1956 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<" Ba£ DœeùÜy fÜ " << 
	`G‘M‘hodTy³Name
(è<< " dÛ nÙƒxi¡ y‘--> c»©ed it" <<
Endl
;

1957 
sdœ
 = 
m‘hodDœ
->
	`mkdœ
(
deçuÉDœ
);

1958 
sdœ
->
	`cd
();

1960 
TObjSŒšg
 
	`wfeP©h
Ğ
gSy¡em
->
	`WÜkšgDœeùÜy
() );

1961 
TObjSŒšg
 
	`wfeName
Ğ
	`G‘WeightFeName
() );

1962 
wfeP©h
.
	`Wr™e
( "TrainingPath" );

1963 
wfeName
.
	`Wr™e
( "WeightFileName" );

1966 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<" Ba£ DœeùÜy fÜ " << 
	`G‘M‘hodTy³Name
(è<< "ƒxi¡ed,„‘uº it.." <<
Endl
;

1967  
sdœ
;

1968 
	}
}

1974 
TDœeùÜy
* 
	gTMVA
::
M‘hodBa£
::
	$M‘hodBa£Dœ
() const

1976 ià(
fM‘hodBa£Dœ
 != 0)  fMethodBaseDir;

1978 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<" Ba£ DœeùÜy fÜ " << 
	`G‘M‘hodTy³Name
(è<< "‚Ù s‘ y‘ --> check ià®»adyh”e.." <<
Endl
;

1981 
TDœeùÜy
 *
fFaùÜyBa£Dœ
=
	`G‘Fe
();

1983 
fM‘hodBa£Dœ
 = 
fFaùÜyBa£Dœ
->
	`G‘DœeùÜy
(
	`D©aInfo
().
	`G‘Name
());

1984 if(!
fM‘hodBa£Dœ
)

1986 
fM‘hodBa£Dœ
 = 
fFaùÜyBa£Dœ
->
	`mkdœ
(
	`D©aInfo
().
	`G‘Name
(),
	`FÜm
("Base directory for dataset %s",DataInfo().GetName()));

1987 if(!
fM‘hodBa£Dœ
)
	`Log
()<<
kFATAL
<<"Cª‚Ù c»©dœ "<<
	`D©aInfo
().
	`G‘Name
();

1989 
TSŒšg
 
_m‘hodDœ
 = 
	`FÜm
("M‘hod_%s",
	`G‘M‘hodName
().
	`D©a
());

1990 
fM‘hodBa£Dœ
 = fM‘hodBa£Dœ->
	`G‘DœeùÜy
(
_m‘hodDœ
.
	`D©a
());

1992 if(!
fM‘hodBa£Dœ
){

1993 
fM‘hodBa£Dœ
 = 
fFaùÜyBa£Dœ
->
	`G‘DœeùÜy
(
	`D©aInfo
().
	`G‘Name
())->
	`mkdœ
(
_m‘hodDœ
.
	`D©a
(),
	`FÜm
("DœeùÜy fÜ‡Î % m‘hods", 
	`G‘M‘hodTy³Name
().Data()));

1994 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<" Ba£ DœeùÜy fÜ " << 
	`G‘M‘hodName
(è<< " dÛ nÙƒxi¡ y‘--> c»©ed it" <<
Endl
;

1997 
	`Log
()<<
kDEBUG
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<<"R‘uº from M‘hodBa£Dœ(èaá” c»©šg ba£ dœeùÜy "<<
Endl
;

1998  
fM‘hodBa£Dœ
;

1999 
	}
}

2004 
	gTMVA
::
M‘hodBa£
::
	$S‘WeightFeDœ
Ğ
TSŒšg
 
feDœ
 )

2006 
fFeDœ
 = 
feDœ
;

2007 
gSy¡em
->
	`MakeDœeùÜy
Ğ
fFeDœ
 );

2008 
	}
}

2013 
	gTMVA
::
M‘hodBa£
::
	$S‘WeightFeName
Ğ
TSŒšg
 
theWeightFe
)

2015 
fWeightFe
 = 
theWeightFe
;

2016 
	}
}

2021 
TSŒšg
 
	gTMVA
::
M‘hodBa£
::
	$G‘WeightFeName
() const

2023 ià(
fWeightFe
!="")  fWeightFile;

2027 
TSŒšg
 
suffix
 = "";

2028 
TSŒšg
 
	`wFeDœ
(
	`G‘WeightFeDœ
());

2029  ( 
wFeDœ
 + (wFeDœ[wFeDœ.
	`L’gth
()-1]=='/' ? "" : "/")

2030 + 
	`G‘JobName
(è+ "_" + 
	`G‘M‘hodName
() +

2031 
suffix
 + "." + 
	`gCÚfig
().
	`G‘IONames
().
fWeightFeEx‹nsiÚ
 + ".xml" );

2032 
	}
}

2037 
	gTMVA
::
M‘hodBa£
::
	$Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
ET»eTy³
 
Œ“ty³
)

2039 
	`Ba£Dœ
()->
	`cd
();

2043 ià(0 !ğ
fMVAPdfS
) {

2044 
fMVAPdfS
->
	`G‘Origš®Hi¡
()->
	`Wr™e
();

2045 
fMVAPdfS
->
	`G‘SmoÙhedHi¡
()->
	`Wr™e
();

2046 
fMVAPdfS
->
	`G‘PDFHi¡
()->
	`Wr™e
();

2048 ià(0 !ğ
fMVAPdfB
) {

2049 
fMVAPdfB
->
	`G‘Origš®Hi¡
()->
	`Wr™e
();

2050 
fMVAPdfB
->
	`G‘SmoÙhedHi¡
()->
	`Wr™e
();

2051 
fMVAPdfB
->
	`G‘PDFHi¡
()->
	`Wr™e
();

2055 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
Ğ
	`G‘M‘hodName
(), 
Œ“ty³
, 
Ty³s
::
kMaxAÇlysisTy³
 );

2056 ià(!
»suÉs
)

2057 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<WriteEvaluationHistosToFile> Unknown„esult: "

2058 << 
	`G‘M‘hodName
(è<< (
Œ“ty³
==
Ty³s
::
kT¿ššg
?"/kTraining":"/kTesting")

2059 << "/kMaxAÇlysisTy³" << 
Endl
;

2060 
»suÉs
->
	`G‘StÜage
()->
	`Wr™e
();

2061 ià(
Œ“ty³
==
Ty³s
::
kTe¡šg
) {

2062 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`PlÙV¬ŸbËs
 (
	`G‘Ev’tCŞËùiÚ
Ğ
Ty³s
::
kTe¡šg
 ), 
	`Ba£Dœ
() );

2064 
	}
}

2070 
	gTMVA
::
M‘hodBa£
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

2072 
	}
}

2079 
BoŞ_t
 
TMVA
::
M‘hodBa£
::
	$G‘Lše
(
¡d
::
i¡»am
& 
fš
, * 
buf
 )

2081 
fš
.
	`g‘lše
(
buf
,512);

2082 
TSŒšg
 
	`lše
(
buf
);

2083 ià(
lše
.
	`BegšsW™h
("TMVA Release")) {

2084 
Ssiz_t
 
¡¬t
 = 
lše
.
	`Fœ¡
('[')+1;

2085 
Ssiz_t
 
Ëngth
 = 
lše
.
	`Index
("]",
¡¬t
)-start;

2086 
TSŒšg
 
code
 = 
	`lše
(
¡¬t
,
Ëngth
);

2087 
¡d
::
¡ršg¡»am
 
	`s
(
code
.
	`D©a
());

2088 
s
 >> 
fTMVAT¿ššgV”siÚ
;

2089 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "MVA m‘hod wa Œašed w™h TMVA V”siÚ: " << 
	`G‘T¿ššgTMVAV”siÚSŒšg
(è<< 
Endl
;

2091 ià(
lše
.
	`BegšsW™h
("ROOT Release")) {

2092 
Ssiz_t
 
¡¬t
 = 
lše
.
	`Fœ¡
('[')+1;

2093 
Ssiz_t
 
Ëngth
 = 
lše
.
	`Index
("]",
¡¬t
)-start;

2094 
TSŒšg
 
code
 = 
	`lše
(
¡¬t
,
Ëngth
);

2095 
¡d
::
¡ršg¡»am
 
	`s
(
code
.
	`D©a
());

2096 
s
 >> 
fROOTT¿ššgV”siÚ
;

2097 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "MVA m‘hod wa Œašed w™h ROOT V”siÚ: " << 
	`G‘T¿ššgROOTV”siÚSŒšg
(è<< 
Endl
;

2099 ià(
lše
.
	`BegšsW™h
("Analysisype")) {

2100 
Ssiz_t
 
¡¬t
 = 
lše
.
	`Fœ¡
('[')+1;

2101 
Ssiz_t
 
Ëngth
 = 
lše
.
	`Index
("]",
¡¬t
)-start;

2102 
TSŒšg
 
code
 = 
	`lše
(
¡¬t
,
Ëngth
);

2103 
¡d
::
¡ršg¡»am
 
	`s
(
code
.
	`D©a
());

2104 
¡d
::
¡ršg
 
ª®ysisTy³
;

2105 
s
 >> 
ª®ysisTy³
;

2106 ià(
ª®ysisTy³
 =ğ"»g»ssiÚ" ||‡ÇlysisTy³ =ğ"Reg»ssiÚ"è
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kReg»ssiÚ
 );

2107 ià(
ª®ysisTy³
 =ğ"şassifiÿtiÚ" ||‡ÇlysisTy³ =ğ"CÏssifiÿtiÚ"è
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kCÏssifiÿtiÚ
 );

2108 ià(
ª®ysisTy³
 =ğ"muÉişass" ||‡ÇlysisTy³ =ğ"MuÉişass"è
	`S‘AÇlysisTy³
Ğ
Ty³s
::
kMuÉişass
 );

2109 
	`Log
(è<< 
kFATAL
 << "AÇlysi ty³ " << 
ª®ysisTy³
 << " from weight-fnÙ known!" << 
¡d
::
’dl
;

2111 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Method wasrained for "

2112 << (
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kReg»ssiÚ
 ? "Regression" :

2113 (
	`G‘AÇlysisTy³
(è=ğ
Ty³s
::
kMuÉişass
 ? "MuÉişass" : "CÏssifiÿtiÚ")è<< 
Endl
;

2116  
Œue
;

2117 
	}
}

2122 
	gTMVA
::
M‘hodBa£
::
	$C»©eMVAPdfs
()

2124 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

2128 
ResuÉsCÏssifiÿtiÚ
 * 
mvaRes
 = 
dyÇmic_ÿ¡
<ResultsClassification*>

2129 Ğ
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, Ty³s::
kCÏssifiÿtiÚ
) );

2131 ià(
mvaRes
==0 || mvaRes->
	`G‘Size
()==0) {

2132 
	`Log
(è<< 
kERROR
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<C»©eMVAPdfs> NØ»suÉ oàşassif›¸‹¡šg‡vaabË" << 
Endl
;

2135 
DoubË_t
 
mšV®
 = *
¡d
::
	`mš_–em’t
(
mvaRes
->
	`G‘V®ueVeùÜ
()->
	`begš
(),mvaRes->G‘V®ueVeùÜ()->
	`’d
());

2136 
DoubË_t
 
maxV®
 = *
¡d
::
	`max_–em’t
(
mvaRes
->
	`G‘V®ueVeùÜ
()->
	`begš
(),mvaRes->G‘V®ueVeùÜ()->
	`’d
());

2139 
TH1
* 
hi¡MVAPdfS
 = 
Ãw
 
	`TH1D
Ğ
	`G‘M‘hodTy³Name
() + "_tr_S", GetMethodTypeName() + "_tr_S",

2140 
fMVAPdfS
->
	`G‘Hi¡NBšs
Ğ
mvaRes
->
	`G‘Size
(è), 
mšV®
, 
maxV®
 );

2141 
TH1
* 
hi¡MVAPdfB
 = 
Ãw
 
	`TH1D
Ğ
	`G‘M‘hodTy³Name
() + "_tr_B", GetMethodTypeName() + "_tr_B",

2142 
fMVAPdfB
->
	`G‘Hi¡NBšs
Ğ
mvaRes
->
	`G‘Size
(è), 
mšV®
, 
maxV®
 );

2146 
hi¡MVAPdfS
->
	`Sumw2
();

2147 
hi¡MVAPdfB
->
	`Sumw2
();

2150 
UIÁ_t
 
›vt
=0; ievt<
mvaRes
->
	`G‘Size
(); ievt++) {

2151 
DoubË_t
 
theV®
 = 
mvaRes
->
	`G‘V®ueVeùÜ
()->
	`©
(
›vt
);

2152 
DoubË_t
 
theWeight
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
)->
	`G‘Weight
();

2154 ià(
	`D©aInfo
().
	`IsSigÇl
(
	`D©a
()->
	`G‘Ev’t
(
›vt
))è
hi¡MVAPdfS
->
	`Fl
Ğ
theV®
, 
theWeight
 );

2155 
hi¡MVAPdfB
->
	`Fl
Ğ
theV®
, 
theWeight
 );

2158 
	`gToŞs
().
	`NÜmHi¡
Ğ
hi¡MVAPdfS
 );

2159 
	`gToŞs
().
	`NÜmHi¡
Ğ
hi¡MVAPdfB
 );

2162 if(!
	`IsS’tFe
())

2164 
hi¡MVAPdfS
->
	`Wr™e
();

2165 
hi¡MVAPdfB
->
	`Wr™e
();

2168 
fMVAPdfS
->
	`BudPDF
 ( 
hi¡MVAPdfS
 );

2169 
fMVAPdfB
->
	`BudPDF
 ( 
hi¡MVAPdfB
 );

2170 
fMVAPdfS
->
	`V®id©ePDF
Ğ
hi¡MVAPdfS
 );

2171 
fMVAPdfB
->
	`V®id©ePDF
Ğ
hi¡MVAPdfB
 );

2173 ià(
	`D©aInfo
().
	`G‘NCÏs£s
() == 2) {

2174 
	`Log
(è<< 
kINFO
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())

2175 << 
	`FÜm
( "<CreateMVAPdfs> Separation from histogram (PDF): %1.3f (%1.3f)",

2176 
	`G‘S•¬©iÚ
Ğ
hi¡MVAPdfS
, 
hi¡MVAPdfB
 ), G‘S•¬©iÚĞ
fMVAPdfS
, 
fMVAPdfB
 ) )

2177 << 
Endl
;

2180 
d–‘e
 
hi¡MVAPdfS
;

2181 
d–‘e
 
hi¡MVAPdfB
;

2182 
	}
}

2184 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘Proba
(cÚ¡ 
Ev’t
 *
ev
){

2188 ià(!
fMVAPdfS
 || !
fMVAPdfB
) {

2189 
	`Log
(è<< 
kINFO
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "<G‘Proba> MVA PDF fÜ SigÇÈªd Background dÚ'ˆexi¡ y‘, we'Î c»©them oÀdemªd" << 
Endl
;

2190 
	`C»©eMVAPdfs
();

2192 
DoubË_t
 
sigF¿ùiÚ
 = 
	`D©aInfo
().
	`G‘T¿ššgSumSigÇlWeights
(è/ (D©aInfo().G‘T¿ššgSumSigÇlWeights(è+ D©aInfo().
	`G‘T¿ššgSumBackgrWeights
() );

2193 
DoubË_t
 
mvaV®
 = 
	`G‘MvaV®ue
(
ev
);

2195  
	`G‘Proba
(
mvaV®
,
sigF¿ùiÚ
);

2197 
	}
}

2201 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘Proba
Ğ
DoubË_t
 
mvaV®
, DoubË_ˆ
­_sig
 )

2203 ià(!
fMVAPdfS
 || !
fMVAPdfB
) {

2204 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘Proba> MVA PDF fÜ SigÇÈªd Background dÚ'ˆexi¡" << 
Endl
;

2207 
DoubË_t
 
p_s
 = 
fMVAPdfS
->
	`G‘V®
Ğ
mvaV®
 );

2208 
DoubË_t
 
p_b
 = 
fMVAPdfB
->
	`G‘V®
Ğ
mvaV®
 );

2210 
DoubË_t
 
d’om
 = 
p_s
*
­_sig
 + 
p_b
*(1 -‡p_sig);

2212  (
d’om
 > 0è? (
p_s
*
­_sig
) / denom : -1;

2213 
	}
}

2222 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘R¬™y
Ğ
DoubË_t
 
mvaV®
, 
Ty³s
::
ESBTy³
 
»áy³
 ) const

2224 ià((
»áy³
 =ğ
Ty³s
::
kSigÇl
 && !
fMVAPdfS
è|| (»áy³ =ğTy³s::
kBackground
 && !
fMVAPdfB
)) {

2225 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<GetRarity> Required MVA PDF for Signal or Background does‚otƒxist: "

2226 << "£Ëù o±iÚ \"C»©eMVAPdfs\"" << 
Endl
;

2230 
PDF
* 
thePdf
 = ((
»áy³
 =ğ
Ty³s
::
kSigÇl
è? 
fMVAPdfS
 : 
fMVAPdfB
);

2232  
thePdf
->
	`G‘IÁeg¿l
ĞthePdf->
	`G‘Xmš
(), 
mvaV®
 );

2233 
	}
}

2239 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘Effic›ncy
ĞcÚ¡ 
TSŒšg
& 
theSŒšg
, 
Ty³s
::
ET»eTy³
 
ty³
,
DoubË_t
& 
effS”r
 )

2241 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

2242 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
Ğ
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kCÏssifiÿtiÚ
 );

2243 
¡d
::
veùÜ
<
Flßt_t
>* 
mvaRes
 = 
dyÇmic_ÿ¡
<
ResuÉsCÏssifiÿtiÚ
*>(
»suÉs
)->
	`G‘V®ueVeùÜ
();

2246 
TLi¡
* 
li¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
theSŒšg
 );

2249 
BoŞ_t
 
compu‹A»a
 = 
kFALSE
;

2250 ià(!
li¡
 ||†i¡->
	`G‘Size
(è< 2è
compu‹A»a
 = 
kTRUE
;

2251 ià(
li¡
->
	`G‘Size
() > 2) {

2252 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<GetEfficiency> Wrong‚umber of‡rguments"

2253 << " iÀ¡ršg: " << 
theSŒšg


2254 << " |„equœed fÜm©,ƒ.g., Effic›ncy:0.05, o¸em±y sŒšg" << 
Endl
;

2255 
d–‘e
 
li¡
;

2260 iàĞ
»suÉs
->
	`G‘Hi¡
("MVA_S")->
	`G‘NbšsX
() !=„esults->GetHist("MVA_B")->GetNbinsX() ||

2261 
»suÉs
->
	`G‘Hi¡
("MVA_HIGHBIN_S")->
	`G‘NbšsX
() !=„esults->GetHist("MVA_HIGHBIN_B")->GetNbinsX() ) {

2262 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘Effic›ncy> Bšnšg mism©ch b‘w“ÀsigÇÈªd background hi¡os" << 
Endl
;

2263 
d–‘e
 
li¡
;

2270 
TH1
 * 
effhi¡
 = 
»suÉs
->
	`G‘Hi¡
("MVA_HIGHBIN_S");

2271 
DoubË_t
 
xmš
 = 
effhi¡
->
	`G‘Xaxis
()->
	`G‘Xmš
();

2272 
DoubË_t
 
xmax
 = 
effhi¡
->
	`G‘Xaxis
()->
	`G‘Xmax
();

2274 
	`TTHREAD_TLS
(
DoubË_t
è
ÃvtS
;

2277 ià(
»suÉs
->
	`DÛsExi¡
("MVA_EFF_S")==0) {

2280 
TH1
* 
eff_s
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_effS", G‘Te¡v¬Name(è+ " (sigÇl)", 
fNbšsH
, 
xmš
, 
xmax
 );

2281 
TH1
* 
eff_b
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_effB", G‘Te¡v¬Name(è+ " (background)", 
fNbšsH
, 
xmš
, 
xmax
 );

2282 
»suÉs
->
	`StÜe
(
eff_s
, "MVA_EFF_S");

2283 
»suÉs
->
	`StÜe
(
eff_b
, "MVA_EFF_B");

2286 
IÁ_t
 
sign
 = (
fCutOr›Á©iÚ
 =ğ
kPos™ive
) ? +1 : -1;

2289 
ÃvtS
 = 0;

2290 
UIÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

2293 
BoŞ_t
 
isSigÇl
 = 
	`D©aInfo
().
	`IsSigÇl
(
	`G‘Ev’t
(
›vt
));

2294 
Flßt_t
 
theWeight
 = 
	`G‘Ev’t
(
›vt
)->
	`G‘Weight
();

2295 
Flßt_t
 
theV®
 = (*
mvaRes
)[
›vt
];

2298 
TH1
* 
theHi¡
 = 
isSigÇl
 ? 
eff_s
 : 
eff_b
;

2301 ià(
isSigÇl
è
ÃvtS
+=
theWeight
;

2303 
TAxis
* 
axis
 = 
theHi¡
->
	`G‘Xaxis
();

2304 
IÁ_t
 
maxbš
 = 
	`IÁ_t
((
theV®
 - 
axis
->
	`G‘Xmš
())/×xis->
	`G‘Xmax
(è-‡xis->G‘Xmš())*
fNbšsH
) + 1;

2305 ià(
sign
 > 0 && 
maxbš
 > 
fNbšsH
) ;

2306 ià(
sign
 < 0 && 
maxbš
 < 1 ) ;

2307 ià(
sign
 > 0 && 
maxbš
 < 1 ) maxbin = 1;

2308 ià(
sign
 < 0 && 
maxbš
 > 
fNbšsH
) maxbin = fNbinsH;

2310 ià(
sign
 > 0)

2311 
IÁ_t
 
ibš
=1; ibš<=
maxbš
; ibš++è
theHi¡
->
	`AddBšCÚ‹Á
Ğibš , 
theWeight
);

2312 ià(
sign
 < 0)

2313 
IÁ_t
 
ibš
=
maxbš
+1; ibš<=
fNbšsH
; ibš++è
theHi¡
->
	`AddBšCÚ‹Á
Ğibš , 
theWeight
 );

2315 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘Effic›ncy> Mism©ch iÀsign" << 
Endl
;

2322 
eff_s
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(),eff_s->
	`G‘Maximum
()) );

2323 
eff_b
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(),eff_b->
	`G‘Maximum
()) );

2326 
TH1
* 
eff_BvsS
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_effBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

2327 
»suÉs
->
	`StÜe
(
eff_BvsS
, "MVA_EFF_BvsS");

2328 
eff_BvsS
->
	`S‘XT™Ë
( "Signalƒff" );

2329 
eff_BvsS
->
	`S‘YT™Ë
( "Backgrƒff" );

2332 
TH1
* 
»j_BvsS
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_»jBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

2333 
»suÉs
->
	`StÜe
(
»j_BvsS
);

2334 
»j_BvsS
->
	`S‘XT™Ë
( "Signalƒff" );

2335 
»j_BvsS
->
	`S‘YT™Ë
( "Backgr„ejection (1-eff)" );

2338 
TH1
* 
šveff_BvsS
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
() + "_invBeffvsSeff",

2339 
	`G‘Te¡v¬Name
(), 
fNbšs
, 0, 1 );

2340 
»suÉs
->
	`StÜe
(
šveff_BvsS
);

2341 
šveff_BvsS
->
	`S‘XT™Ë
( "Signalƒff" );

2342 
šveff_BvsS
->
	`S‘YT™Ë
( "Inverse backgr.ƒff (1/eff)" );

2347 ià(
U£_S¶šes_fÜ_Eff_
) {

2348 
fS¶RefS
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_sigÇl",‚ew 
	`TG¿ph
Ğ
eff_s
 ) );

2349 
fS¶RefB
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_background",‚ew 
	`TG¿ph
Ğ
eff_b
 ) );

2352 
	`gToŞs
().
	`CheckS¶šes
Ğ
eff_s
, 
fS¶RefS
 );

2353 
	`gToŞs
().
	`CheckS¶šes
Ğ
eff_b
, 
fS¶RefB
 );

2359 
RoÙFšd”
 
	`roÙFšd”
Ğ
this
, 
fXmš
, 
fXmax
 );

2361 
DoubË_t
 
effB
 = 0;

2362 
fEffS
 = 
eff_s
;

2363 
IÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

2366 
DoubË_t
 
effS
 = 
eff_BvsS
->
	`G‘BšC’‹r
Ğ
bši
 );

2367 
DoubË_t
 
cut
 = 
roÙFšd”
.
	`RoÙ
Ğ
effS
 );

2370 ià(
U£_S¶šes_fÜ_Eff_
è
effB
 = 
fS¶RefB
->
	`Ev®
Ğ
cut
 );

2371 
effB
 = 
eff_b
->
	`G‘BšCÚ‹Á
Ğeff_b->
	`FšdBš
Ğ
cut
 ) );

2374 
eff_BvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 
effB
 );

2375 
»j_BvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0-
effB
 );

2376 ià(
effB
>
¡d
::
num”ic_lim™s
<>::
	`•sÚ
())

2377 
šveff_BvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0/
effB
 );

2381 
fS¶effBvsS
 = 
Ãw
 
	`TS¶še1
Ğ"effBvsS",‚ew 
	`TG¿ph
Ğ
eff_BvsS
 ) );

2385 
DoubË_t
 
effS
 = 0., 
»jB
, 
effS_
 = 0., 
»jB_
 = 0.;

2386 
IÁ_t
 
nbšs_
 = 5000;

2387 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

2390 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

2391 
»jB
 = 1.0 - 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

2394 ià((
effS
 - 
»jB
)*(
effS_
 - 
»jB_
) < 0) ;

2395 
effS_
 = 
effS
;

2396 
»jB_
 = 
»jB
;

2400 
DoubË_t
 
cut
 = 
roÙFšd”
.
	`RoÙ
Ğ0.5*(
effS
 + 
effS_
) );

2401 
	`S‘SigÇlReã»nûCut
Ğ
cut
 );

2402 
fEffS
 = 0;

2406 ià(0 =ğ
fS¶effBvsS
) {

2407 
d–‘e
 
li¡
;

2412 
DoubË_t
 
effS
 = 0, 
effB
 = 0, 
effS_
 = 0, 
effB_
 = 0;

2413 
IÁ_t
 
nbšs_
 = 1000;

2415 ià(
compu‹A»a
) {

2418 
DoubË_t
 
š‹g¿l
 = 0;

2419 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

2422 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

2423 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

2424 
š‹g¿l
 +ğ(1.0 - 
effB
);

2426 
š‹g¿l
 /ğ
nbšs_
;

2428 
d–‘e
 
li¡
;

2429  
š‹g¿l
;

2435 
Flßt_t
 
effB»f
 = 
	`©of
Ğ((
TObjSŒšg
*)
li¡
->
	`At
(1))->
	`G‘SŒšg
() );

2438 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

2441 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

2442 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

2445 ià((
effB
 - 
effB»f
)*(
effB_
 -ƒffBref) <= 0) ;

2446 
effS_
 = 
effS
;

2447 
effB_
 = 
effB
;

2451 
effS
 = 0.5*ÓffS + 
effS_
);

2453 
effS”r
 = 0;

2454 ià(
ÃvtS
 > 0è
effS”r
 = 
TM©h
::
	`Sq¹
Ğ
effS
*(1.0 -ƒffS)/nevtS );

2456 
d–‘e
 
li¡
;

2457  
effS
;

2461 
	}
}

2465 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘T¿ššgEffic›ncy
(cÚ¡ 
TSŒšg
& 
theSŒšg
)

2467 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

2469 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kNoAÇlysisTy³
);

2475 
TLi¡
* 
li¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
theSŒšg
 );

2478 ià(
li¡
->
	`G‘Size
() != 2) {

2479 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<GetTrainingEfficiency> Wrong‚umber of‡rguments"

2480 << " iÀ¡ršg: " << 
theSŒšg


2481 << " |„equœed fÜm©,ƒ.g., Effic›ncy:0.05" << 
Endl
;

2482 
d–‘e
 
li¡
;

2487 
Flßt_t
 
effB»f
 = 
	`©of
Ğ((
TObjSŒšg
*)
li¡
->
	`At
(1))->
	`G‘SŒšg
() );

2489 
d–‘e
 
li¡
;

2492 ià(
»suÉs
->
	`G‘Hi¡
("MVA_S")->
	`G‘NbšsX
() !=„esults->GetHist("MVA_B")->GetNbinsX() ||

2493 
»suÉs
->
	`G‘Hi¡
("MVA_HIGHBIN_S")->
	`G‘NbšsX
() !=„esults->GetHist("MVA_HIGHBIN_B")->GetNbinsX() ) {

2494 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<GetTrainingEfficiency> Binning mismatch between signal‡nd background histos"

2495 << 
Endl
;

2502 
TH1
 * 
effhi¡
 = 
»suÉs
->
	`G‘Hi¡
("MVA_HIGHBIN_S");

2503 
DoubË_t
 
xmš
 = 
effhi¡
->
	`G‘Xaxis
()->
	`G‘Xmš
();

2504 
DoubË_t
 
xmax
 = 
effhi¡
->
	`G‘Xaxis
()->
	`G‘Xmax
();

2507 ià(
»suÉs
->
	`DÛsExi¡
("MVA_TRAIN_S")==0) {

2510 
DoubË_t
 
sxmax
 = 
fXmax
+0.00001;

2513 
TH1
* 
mva_s_Œ
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_T¿š_S",G‘Te¡v¬Name(è+ "_T¿š_S", 
fNbšsMVAouut
, 
fXmš
, 
sxmax
 );

2514 
TH1
* 
mva_b_Œ
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_T¿š_B",G‘Te¡v¬Name(è+ "_T¿š_B", 
fNbšsMVAouut
, 
fXmš
, 
sxmax
 );

2515 
»suÉs
->
	`StÜe
(
mva_s_Œ
, "MVA_TRAIN_S");

2516 
»suÉs
->
	`StÜe
(
mva_b_Œ
, "MVA_TRAIN_B");

2517 
mva_s_Œ
->
	`Sumw2
();

2518 
mva_b_Œ
->
	`Sumw2
();

2521 
TH1
* 
mva_eff_Œ_s
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
() + "_trainingEffS", GetTestvarName() + " (signal)",

2522 
fNbšsH
, 
xmš
, 
xmax
 );

2523 
TH1
* 
mva_eff_Œ_b
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
() + "_trainingEffB", GetTestvarName() + " (background)",

2524 
fNbšsH
, 
xmš
, 
xmax
 );

2525 
»suÉs
->
	`StÜe
(
mva_eff_Œ_s
, "MVA_TRAINEFF_S");

2526 
»suÉs
->
	`StÜe
(
mva_eff_Œ_b
, "MVA_TRAINEFF_B");

2529 
IÁ_t
 
sign
 = (
fCutOr›Á©iÚ
 =ğ
kPos™ive
) ? +1 : -1;

2531 
¡d
::
veùÜ
<
DoubË_t
> 
mvaV®ues
 = 
	`G‘MvaV®ues
(0,
	`D©a
()->
	`G‘NEv’ts
());

2532 
	`as£¹
Ğ(
LÚg64_t
è
mvaV®ues
.
	`size
(è=ğ
	`D©a
()->
	`G‘NEv’ts
());

2535 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

2537 
	`D©a
()->
	`S‘Cu¼’tEv’t
(
›vt
);

2538 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

2540 
DoubË_t
 
theV®
 = 
mvaV®ues
[
›vt
];

2541 
DoubË_t
 
theWeight
 = 
ev
->
	`G‘Weight
();

2543 
TH1
* 
theEffHi¡
 = 
	`D©aInfo
().
	`IsSigÇl
(
ev
è? 
mva_eff_Œ_s
 : 
mva_eff_Œ_b
;

2544 
TH1
* 
theClsHi¡
 = 
	`D©aInfo
().
	`IsSigÇl
(
ev
è? 
mva_s_Œ
 : 
mva_b_Œ
;

2546 
theClsHi¡
->
	`Fl
Ğ
theV®
, 
theWeight
 );

2548 
TAxis
* 
axis
 = 
theEffHi¡
->
	`G‘Xaxis
();

2549 
IÁ_t
 
maxbš
 = 
	`IÁ_t
((
theV®
 - 
axis
->
	`G‘Xmš
())/×xis->
	`G‘Xmax
(è-‡xis->G‘Xmš())*
fNbšsH
) + 1;

2550 ià(
sign
 > 0 && 
maxbš
 > 
fNbšsH
) ;

2551 ià(
sign
 < 0 && 
maxbš
 < 1 ) ;

2552 ià(
sign
 > 0 && 
maxbš
 < 1 ) maxbin = 1;

2553 ià(
sign
 < 0 && 
maxbš
 > 
fNbšsH
) maxbin = fNbinsH;

2555 ià(
sign
 > 0è
IÁ_t
 
ibš
=1; ibš<=
maxbš
; ibš++è
theEffHi¡
->
	`AddBšCÚ‹Á
Ğibš , 
theWeight
 );

2556 
IÁ_t
 
ibš
=
maxbš
+1; ibš<=
fNbšsH
; ibš++è
theEffHi¡
->
	`AddBšCÚ‹Á
Ğibš , 
theWeight
 );

2561 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_s_Œ
 );

2562 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_b_Œ
 );

2565 
mva_eff_Œ_s
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(), mva_eff_Œ_s->
	`G‘Maximum
()) );

2566 
mva_eff_Œ_b
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(), mva_eff_Œ_b->
	`G‘Maximum
()) );

2569 
TH1
* 
eff_bvss
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_ŒaššgEffBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

2571 
TH1
* 
»j_bvss
 = 
Ãw
 
	`TH1D
Ğ
	`G‘Te¡v¬Name
(è+ "_ŒaššgRejBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

2572 
»suÉs
->
	`StÜe
(
eff_bvss
, "EFF_BVSS_TR");

2573 
»suÉs
->
	`StÜe
(
»j_bvss
, "REJ_BVSS_TR");

2578 ià(
U£_S¶šes_fÜ_Eff_
) {

2579 ià(
fS¶T¿šRefS
è
d–‘e
 fSplTrainRefS;

2580 ià(
fS¶T¿šRefB
è
d–‘e
 fSplTrainRefB;

2581 
fS¶T¿šRefS
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_sigÇl",‚ew 
	`TG¿ph
Ğ
mva_eff_Œ_s
 ) );

2582 
fS¶T¿šRefB
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_background",‚ew 
	`TG¿ph
Ğ
mva_eff_Œ_b
 ) );

2585 
	`gToŞs
().
	`CheckS¶šes
Ğ
mva_eff_Œ_s
, 
fS¶T¿šRefS
 );

2586 
	`gToŞs
().
	`CheckS¶šes
Ğ
mva_eff_Œ_b
, 
fS¶T¿šRefB
 );

2592 
RoÙFšd”
 
	`roÙFšd”
(
this
, 
fXmš
, 
fXmax
 );

2594 
DoubË_t
 
effB
 = 0;

2595 
fEffS
 = 
»suÉs
->
	`G‘Hi¡
("MVA_TRAINEFF_S");

2596 
IÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

2599 
DoubË_t
 
effS
 = 
eff_bvss
->
	`G‘BšC’‹r
Ğ
bši
 );

2601 
DoubË_t
 
cut
 = 
roÙFšd”
.
	`RoÙ
Ğ
effS
 );

2604 ià(
U£_S¶šes_fÜ_Eff_
è
effB
 = 
fS¶T¿šRefB
->
	`Ev®
Ğ
cut
 );

2605 
effB
 = 
mva_eff_Œ_b
->
	`G‘BšCÚ‹Á
Ğmva_eff_Œ_b->
	`FšdBš
Ğ
cut
 ) );

2608 
eff_bvss
->
	`S‘BšCÚ‹Á
Ğ
bši
, 
effB
 );

2609 
»j_bvss
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0-
effB
 );

2611 
fEffS
 = 0;

2614 
fS¶T¿šEffBvsS
 = 
Ãw
 
	`TS¶še1
Ğ"effBvsS",‚ew 
	`TG¿ph
Ğ
eff_bvss
 ) );

2618 ià(0 =ğ
fS¶T¿šEffBvsS
)  0.0;

2621 
DoubË_t
 
effS
 = 0., 
effB
, 
effS_
 = 0., 
effB_
 = 0.;

2622 
IÁ_t
 
nbšs_
 = 1000;

2623 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

2626 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

2627 
effB
 = 
fS¶T¿šEffBvsS
->
	`Ev®
Ğ
effS
 );

2630 ià((
effB
 - 
effB»f
)*(
effB_
 -ƒffBref) <= 0) ;

2631 
effS_
 = 
effS
;

2632 
effB_
 = 
effB
;

2635  0.5*(
effS
 + 
effS_
);

2636 
	}
}

2640 
	g¡d
::
veùÜ
<
Flßt_t
> 
TMVA
::
M‘hodBa£
::
G‘MuÉişassEffic›ncy
(
¡d
::veùÜ<¡d::veùÜ<Flßt_t> >& 
pur™y
)

2642 
D©a
()->
S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

2643 
ResuÉsMuÉişass
* 
	g»sMuÉişass
 = 
dyÇmic_ÿ¡
<ResuÉsMuÉişass*>(
D©a
()->
G‘ResuÉs
(
G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kMuÉişass
));

2644 ià(!
	g»sMuÉişass
è
Log
(è<< 
	gkFATAL
<<
FÜm
("D©a£t[%s] : ",
D©aInfo
().
G‘Name
())<< "uÇbËØü—‹…oš‹¸š G‘MuÉişassEffic›ncy,ƒx™šg."<<
	gEndl
;

2646 
	gpur™y
.
push_back
(
»sMuÉişass
->
G‘Ach›vabËPur
());

2647  
	g»sMuÉişass
->
G‘Ach›vabËEff
();

2652 
	g¡d
::
veùÜ
<
Flßt_t
> 
TMVA
::
M‘hodBa£
::
G‘MuÉişassT¿ššgEffic›ncy
(
¡d
::veùÜ<¡d::veùÜ<Flßt_t> >& 
pur™y
)

2654 
D©a
()->
S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

2655 
ResuÉsMuÉişass
* 
	g»sMuÉişass
 = 
dyÇmic_ÿ¡
<ResuÉsMuÉişass*>(
D©a
()->
G‘ResuÉs
(
G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, Ty³s::
kMuÉişass
));

2656 ià(!
	g»sMuÉişass
è
Log
(è<< 
	gkFATAL
<< "uÇbËØü—‹…oš‹¸š G‘MuÉişassT¿ššgEffic›ncy,ƒx™šg."<<
	gEndl
;

2658 
Log
(è<< 
	gkINFO
 <<
FÜm
("D©a£t[%s] : ",
D©aInfo
().
G‘Name
())<< "D‘”mšİtim® muÉişas cut fÜ¿ššg d©a..." << 
	gEndl
;

2659 
UIÁ_t
 
	gişs
 = 0; işs<
D©aInfo
().
G‘NCÏs£s
(); ++icls) {

2660 
	g»sMuÉişass
->
G‘Be¡MuÉiCÏssCuts
(
işs
);

2663 
	gpur™y
.
push_back
(
»sMuÉişass
->
G‘Ach›vabËPur
());

2664  
	g»sMuÉişass
->
G‘Ach›vabËEff
();

2687 
TM©rixD
 
	gTMVA
::
M‘hodBa£
::
	$G‘MuÉişassCÚfusiÚM©rix
(
DoubË_t
 
effB
, 
Ty³s
::
ET»eTy³
 
ty³
)

2689 ià(
	`G‘AÇlysisTy³
(è!ğ
Ty³s
::
kMuÉişass
) {

2690 
	`Log
(è<< 
kFATAL
 << "CªnÙ g‘ cÚfusiÚ m©rix fÜ‚Ú-muÉişas ª®ysis." << 
¡d
::
’dl
;

2691  
	`TM©rixD
(0, 0);

2694 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

2695 
ResuÉsMuÉişass
 *
»sMuÉişass
 =

2696 
dyÇmic_ÿ¡
<
ResuÉsMuÉişass
 *>(
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
ty³
, 
Ty³s
::
kMuÉişass
));

2698 ià(
»sMuÉişass
 =ğ
nuÎ±r
) {

2699 
	`Log
(è<< 
kFATAL
 << 
	`FÜm
("D©a£t[%s] : ", 
	`D©aInfo
().
	`G‘Name
())

2700 << "uÇbËØü—‹…oš‹¸š G‘MuÉişassEffic›ncy,ƒx™šg." << 
Endl
;

2701  
	`TM©rixD
(0, 0);

2704  
»sMuÉişass
->
	`G‘CÚfusiÚM©rix
(
effB
);

2705 
	}
}

2713 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘Signifiÿnû
( ) const

2715 
DoubË_t
 
rms
 = 
	`sq¹
Ğ
fRmsS
*fRmsS + 
fRmsB
*fRmsB );

2717  (
rms
 > 0è? 
TM©h
::
	`Abs
(
fM—nS
 - 
fM—nB
)/rms : 0;

2718 
	}
}

2726 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘S•¬©iÚ
Ğ
TH1
* 
hi¡oS
, TH1* 
hi¡oB
 ) const

2728  
	`gToŞs
().
	`G‘S•¬©iÚ
Ğ
hi¡oS
, 
hi¡oB
 );

2729 
	}
}

2737 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘S•¬©iÚ
Ğ
PDF
* 
pdfS
, PDF* 
pdfB
 ) const

2741 ià((!
pdfS
 && 
pdfB
) || (pdfS && !pdfB))

2742 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘S•¬©iÚ> Mism©ch iÀpdfs" << 
Endl
;

2743 ià(!
pdfS
èpdfS = 
fS¶S
;

2744 ià(!
pdfB
èpdfB = 
fS¶B
;

2746 ià(!
fS¶S
 || !
fS¶B
) {

2747 
	`Log
()<<
kDEBUG
<<
	`FÜm
("[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "could‚ot calculatehe separation, distributions"

2748 << " fS¶S o¸fS¶B‡»‚Ù y‘ fËd" << 
Endl
;

2751  
	`gToŞs
().
	`G‘S•¬©iÚ
Ğ*
pdfS
, *
pdfB
 );

2753 
	}
}

2759 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘ROCIÁeg¿l
(
TH1D
 *
hi¡S
, TH1D *
hi¡B
) const

2763 ià((!
hi¡S
 && 
hi¡B
) || (histS && !histB))

2764 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘ROCIÁeg¿l(TH1D*, TH1D*)> Mism©ch iÀhi¡s" << 
Endl
;

2766 ià(
hi¡S
==0 || 
hi¡B
==0)  0.;

2768 
TMVA
::
PDF
 *
pdfS
 = 
Ãw
 TMVA::
	`PDF
Ğ" PDF Sig", 
hi¡S
, TMVA::PDF::
kS¶še3
 );

2769 
TMVA
::
PDF
 *
pdfB
 = 
Ãw
 TMVA::
	`PDF
Ğ" PDF Bkg", 
hi¡B
, TMVA::PDF::
kS¶še3
 );

2772 
DoubË_t
 
xmš
 = 
TM©h
::
	`Mš
(
pdfS
->
	`G‘Xmš
(), 
pdfB
->GetXmin());

2773 
DoubË_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`G‘Xmax
(), 
pdfB
->GetXmax());

2775 
DoubË_t
 
š‹g¿l
 = 0;

2776 
UIÁ_t
 
n¡•s
 = 1000;

2777 
DoubË_t
 
¡•
 = (
xmax
-
xmš
)/
	`DoubË_t
(
n¡•s
);

2778 
DoubË_t
 
cut
 = 
xmš
;

2779 
UIÁ_t
 
i
=0; i<
n¡•s
; i++) {

2780 
š‹g¿l
 +ğ(1-
pdfB
->
	`G‘IÁeg¿l
(
cut
,
xmax
)è* 
pdfS
->
	`G‘V®
(cut);

2781 
cut
+=
¡•
;

2783  
š‹g¿l
*
¡•
;

2784 
	}
}

2791 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘ROCIÁeg¿l
(
PDF
 *
pdfS
, PDF *
pdfB
) const

2795 ià((!
pdfS
 && 
pdfB
) || (pdfS && !pdfB))

2796 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<G‘S•¬©iÚ> Mism©ch iÀpdfs" << 
Endl
;

2797 ià(!
pdfS
èpdfS = 
fS¶S
;

2798 ià(!
pdfB
èpdfB = 
fS¶B
;

2800 ià(
pdfS
==0 || 
pdfB
==0)  0.;

2802 
DoubË_t
 
xmš
 = 
TM©h
::
	`Mš
(
pdfS
->
	`G‘Xmš
(), 
pdfB
->GetXmin());

2803 
DoubË_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`G‘Xmax
(), 
pdfB
->GetXmax());

2805 
DoubË_t
 
š‹g¿l
 = 0;

2806 
UIÁ_t
 
n¡•s
 = 1000;

2807 
DoubË_t
 
¡•
 = (
xmax
-
xmš
)/
	`DoubË_t
(
n¡•s
);

2808 
DoubË_t
 
cut
 = 
xmš
;

2809 
UIÁ_t
 
i
=0; i<
n¡•s
; i++) {

2810 
š‹g¿l
 +ğ(1-
pdfB
->
	`G‘IÁeg¿l
(
cut
,
xmax
)è* 
pdfS
->
	`G‘V®
(cut);

2811 
cut
+=
¡•
;

2813  
š‹g¿l
*
¡•
;

2814 
	}
}

2821 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘MaximumSignifiÿnû
Ğ
DoubË_t
 
SigÇlEv’ts
,

2822 
DoubË_t
 
BackgroundEv’ts
,

2823 
DoubË_t
& 
max_signifiÿnû_v®ue
 ) const

2825 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
Ğ
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, Ty³s::
kMaxAÇlysisTy³
 );

2827 
DoubË_t
 
	`max_signifiÿnû
(0);

2828 
DoubË_t
 
	`effS
(0),
	`effB
(0),
	`signifiÿnû
(0);

2829 
TH1D
 *
‹mp_hi¡og¿m
 = 
Ãw
 
	`TH1D
("‹mp", "‹mp", 
fNbšsH
, 
fXmš
, 
fXmax
 );

2831 ià(
SigÇlEv’ts
 <ğ0 || 
BackgroundEv’ts
 <= 0) {

2832 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<GetMaximumSignificance> "

2834 << 
Endl
;

2837 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Using„atio SignalEvents/BackgroundEvents = "

2838 << 
SigÇlEv’ts
/
BackgroundEv’ts
 << 
Endl
;

2840 
TH1
* 
eff_s
 = 
»suÉs
->
	`G‘Hi¡
("MVA_EFF_S");

2841 
TH1
* 
eff_b
 = 
»suÉs
->
	`G‘Hi¡
("MVA_EFF_B");

2843 iàĞ(
eff_s
==0è|| (
eff_b
==0) ) {

2844 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "Effic›ncy hi¡og¿m em±y !" << 
Endl
;

2845 
	`Log
(è<< 
kWARNING
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "nØmaximum cuˆfound,„‘uº 0" << 
Endl
;

2849 
IÁ_t
 
bš
=1; bš<=
fNbšsH
; bin++) {

2850 
effS
 = 
eff_s
->
	`G‘BšCÚ‹Á
Ğ
bš
 );

2851 
effB
 = 
eff_b
->
	`G‘BšCÚ‹Á
Ğ
bš
 );

2854 
signifiÿnû
 = 
	`sq¹
(
SigÇlEv’ts
)*Ğ
effS
 )/sq¹ĞeffS + ( 
BackgroundEv’ts
 / SigÇlEv’tsè* 
effB
 );

2856 
‹mp_hi¡og¿m
->
	`S‘BšCÚ‹Á
(
bš
,
signifiÿnû
);

2860 
max_signifiÿnû
 = 
‹mp_hi¡og¿m
->
	`G‘BšC’‹r
Ğ‹mp_hi¡og¿m->
	`G‘MaximumBš
() );

2861 
max_signifiÿnû_v®ue
 = 
‹mp_hi¡og¿m
->
	`G‘BšCÚ‹Á
Ğ‹mp_hi¡og¿m->
	`G‘MaximumBš
() );

2864 
d–‘e
 
‹mp_hi¡og¿m
;

2866 
	`Log
(è<< 
kINFO
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "O±im® cuˆ© : " << 
max_signifiÿnû
 << 
Endl
;

2867 
	`Log
(è<< 
kINFO
<<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
()è<< "Maximum signifiÿnû: " << 
max_signifiÿnû_v®ue
 << 
Endl
;

2869  
max_signifiÿnû
;

2870 
	}
}

2877 
	gTMVA
::
M‘hodBa£
::
	$Sti¡ics
Ğ
Ty³s
::
ET»eTy³
 
Œ“Ty³
, cÚ¡ 
TSŒšg
& 
theV¬Name
,

2878 
DoubË_t
& 
m—nS
, DoubË_t& 
m—nB
,

2879 
DoubË_t
& 
rmsS
, DoubË_t& 
rmsB
,

2880 
DoubË_t
& 
xmš
, DoubË_t& 
xmax
 )

2882 
Ty³s
::
ET»eTy³
 
´eviousT»eTy³
 = 
	`D©a
()->
	`G‘Cu¼’tTy³
();

2883 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Œ“Ty³
);

2885 
LÚg64_t
 
’Œ›s
 = 
	`D©a
()->
	`G‘NEv’ts
();

2888 ià(
’Œ›s
 <=0)

2889 
	`Log
(è<< 
kFATAL
 <<
	`FÜm
("D©a£t[%s] : ",
	`D©aInfo
().
	`G‘Name
())<< "<C®cuÏ‹E¡im©Ü> WrÚg»ty³: " << 
Œ“Ty³
 << 
Endl
;

2892 
UIÁ_t
 
v¬Index
 = 
	`D©aInfo
().
	`FšdV¬Index
Ğ
theV¬Name
 );

2895 
xmš
 = +
DBL_MAX
;

2896 
xmax
 = -
DBL_MAX
;

2897 
LÚg64_t
 
nEv’tsS
 = -1;

2898 
LÚg64_t
 
nEv’tsB
 = -1;

2901 
m—nS
 = 0;

2902 
m—nB
 = 0;

2903 
rmsS
 = 0;

2904 
rmsB
 = 0;

2905 
DoubË_t
 
sumwS
 = 0, 
sumwB
 = 0;

2908 
IÁ_t
 
›vt
 = 0; ievˆ< 
’Œ›s
; ievt++) {

2910 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

2912 
DoubË_t
 
theV¬
 = 
ev
->
	`G‘V®ue
(
v¬Index
);

2913 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

2915 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)) {

2916 
sumwS
 +ğ
weight
;

2917 
m—nS
 +ğ
weight
*
theV¬
;

2918 
rmsS
 +ğ
weight
*
theV¬
*theVar;

2921 
sumwB
 +ğ
weight
;

2922 
m—nB
 +ğ
weight
*
theV¬
;

2923 
rmsB
 +ğ
weight
*
theV¬
*theVar;

2925 
xmš
 = 
TM©h
::
	`Mš
Ğxmš, 
theV¬
 );

2926 
xmax
 = 
TM©h
::
	`Max
Ğxmax, 
theV¬
 );

2928 ++
nEv’tsS
;

2929 ++
nEv’tsB
;

2931 
m—nS
 = m—nS/
sumwS
;

2932 
m—nB
 = m—nB/
sumwB
;

2933 
rmsS
 = 
TM©h
::
	`Sq¹
ĞrmsS/
sumwS
 - 
m—nS
*meanS );

2934 
rmsB
 = 
TM©h
::
	`Sq¹
ĞrmsB/
sumwB
 - 
m—nB
*meanB );

2936 
	`D©a
()->
	`S‘Cu¼’tTy³
(
´eviousT»eTy³
);

2937 
	}
}

2942 
	gTMVA
::
M‘hodBa£
::
	$MakeCÏss
ĞcÚ¡ 
TSŒšg
& 
theCÏssFeName
 ) const

2945 
TSŒšg
 
şassFeName
 = "";

2946 ià(
theCÏssFeName
 == "")

2947 
şassFeName
 = 
	`G‘WeightFeDœ
(è+ "/" + 
	`G‘JobName
(è+ "_" + 
	`G‘M‘hodName
() + ".class.C";

2949 
şassFeName
 = 
theCÏssFeName
;

2951 
TSŒšg
 
şassName
 = 
	`TSŒšg
("R—d"è+ 
	`G‘M‘hodName
();

2953 
TSŒšg
 
	`tâame
Ğ
şassFeName
 );

2954 
	`Log
(è<< 
kINFO


2956 << 
	`gToŞs
().
	`CŞÜ
("lightblue"è<< 
şassFeName
 << gToŞs().CŞÜ("»£t"è<< 
Endl
;

2958 
¡d
::
of¡»am
 
	`fout
Ğ
şassFeName
 );

2959 ià(!
fout
.
	`good
()) {

2960 
	`Log
(è<< 
kFATAL
 << "<MakeCÏss> UÇbËØİ’ fe: " << 
şassFeName
 << 
Endl
;

2965 
fout
 << "// CÏss: " << 
şassName
 << 
¡d
::
’dl
;

2966 
fout
 << "// Autom©iÿÎy g’”©ed by M‘hodBa£::MakeCÏss" << 
¡d
::
’dl
 << "//" << std::endl;

2969 
fout
 << 
¡d
::
’dl
;

2970 
fout
 << "/* cÚfigu¿tiÚ o±iÚ =====================================================" << 
¡d
::
’dl
 << std::endl;

2971 
	`Wr™eS‹ToSŒ—m
Ğ
fout
 );

2972 
fout
 << 
¡d
::
’dl
;

2973 
fout
 << "===========================================================================ğ*/" << 
¡d
::
’dl
;

2976 
fout
 << "" << 
¡d
::
’dl
;

2977 
fout
 << "#šşud<¬¿y>" << 
¡d
::
’dl
;

2978 
fout
 << "#šşud<veùÜ>" << 
¡d
::
’dl
;

2979 
fout
 << "#šşud<cm©h>" << 
¡d
::
’dl
;

2980 
fout
 << "#šşud<¡ršg>" << 
¡d
::
’dl
;

2981 
fout
 << "#šşud<io¡»am>" << 
¡d
::
’dl
;

2982 
fout
 << "" << 
¡d
::
’dl
;

2985 
this
->
	`MakeCÏssS³cificH—d”
Ğ
fout
, 
şassName
 );

2987 
fout
 << "#iâdeàICÏssif›rR—d”__def" << 
¡d
::
’dl
;

2988 
fout
 << "#defšICÏssif›rR—d”__def" << 
¡d
::
’dl
;

2989 
fout
 << 
¡d
::
’dl
;

2990 
fout
 << "şas ICÏssif›rR—d” {" << 
¡d
::
’dl
;

2991 
fout
 << 
¡d
::
’dl
;

2992 
fout
 << "…ublic:" << 
¡d
::
’dl
;

2993 
fout
 << 
¡d
::
’dl
;

2994 
fout
 << " // cÚ¡ruùÜ" << 
¡d
::
’dl
;

2995 
fout
 << " ICÏssif›rR—d”(è: fStusIsCËªĞŒuè{}" << 
¡d
::
’dl
;

2996 
fout
 << " vœtu® ~ICÏssif›rR—d”(è{}" << 
¡d
::
’dl
;

2997 
fout
 << 
¡d
::
’dl
;

2998 
fout
 << " //„‘uº cÏssif›¸»¥Ú£" << 
¡d
::
’dl
;

2999 
fout
 << " vœtu® doubË G‘MvaV®ueĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡ = 0;" << 
¡d
::
’dl
;

3000 
fout
 << 
¡d
::
’dl
;

3001 
fout
 << " //„‘uº şassif›¸¡©us" << 
¡d
::
’dl
;

3002 
fout
 << " boŞ IsStusCËª(ècÚ¡ {„‘uº fStusIsCËª; }" << 
¡d
::
’dl
;

3003 
fout
 << 
¡d
::
’dl
;

3004 
fout
 << "…rÙeùed:" << 
¡d
::
’dl
;

3005 
fout
 << 
¡d
::
’dl
;

3006 
fout
 << " boŞ fStusIsCËª;" << 
¡d
::
’dl
;

3007 
fout
 << "};" << 
¡d
::
’dl
;

3008 
fout
 << 
¡d
::
’dl
;

3009 
fout
 << "#’dif" << 
¡d
::
’dl
;

3010 
fout
 << 
¡d
::
’dl
;

3011 
fout
 << "şas " << 
şassName
 << " :…ubliøICÏssif›rR—d” {" << 
¡d
::
’dl
;

3012 
fout
 << 
¡d
::
’dl
;

3013 
fout
 << "…ublic:" << 
¡d
::
’dl
;

3014 
fout
 << 
¡d
::
’dl
;

3015 
fout
 << " // cÚ¡ruùÜ" << 
¡d
::
’dl
;

3016 
fout
 << " " << 
şassName
 << "Ğ¡d::veùÜ<¡d::¡ršg>&heIÅutV¬ è" << 
¡d
::
’dl
;

3017 
fout
 << " : ICÏssif›rR—d”()," << 
¡d
::
’dl
;

3018 
fout
 << " fCÏssNameĞ\"" << 
şassName
 << "\" )," << 
¡d
::
’dl
;

3019 
fout
 << " fNv¬sĞ" << 
	`G‘Nv¬
(è<< " )," << 
¡d
::
’dl
;

3020 
fout
 << " fIsNÜm®i£dĞ" << (
	`IsNÜm®i£d
(è? "Œue" : "çl£"è<< " )" << 
¡d
::
’dl
;

3021 
fout
 << " { " << 
¡d
::
’dl
;

3022 
fout
 << " //hŒaššg iÅuˆv¬ŸbËs" << 
¡d
::
’dl
;

3023 
fout
 << " const char* inputVars[] = { ";

3024 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

3025 
fout
 << "\"" << 
	`G‘Origš®V¬Name
(
iv¬
) << "\"";

3026 ià(
iv¬
<
	`G‘Nv¬
()-1è
fout
 << ", ";

3028 
fout
 << " };" << 
¡d
::
’dl
;

3029 
fout
 << 
¡d
::
’dl
;

3030 
fout
 << " // sª™y checks" << 
¡d
::
’dl
;

3031 
fout
 << " iàÑheIÅutV¬s.size(è<ğ0è{" << 
¡d
::
’dl
;

3032 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\":ƒm±y iÅuˆveùÜ\" << std::’dl;" << 
¡d
::
’dl
;

3033 
fout
 << " fStusIsCËª = f®£;" << 
¡d
::
’dl
;

3034 
fout
 << " }" << 
¡d
::
’dl
;

3035 
fout
 << 
¡d
::
’dl
;

3036 
fout
 << " iàÑheIÅutV¬s.size(è!ğfNv¬sè{" << 
¡d
::
’dl
;

3037 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\": mism©ch iÀnumb” oàšpuˆv®ues: \"" << 
¡d
::
’dl
;

3038 
fout
 << " <<heIÅutV¬s.size(è<< \" !ğ\" << fNv¬ << std::’dl;" << 
¡d
::
’dl
;

3039 
fout
 << " fStusIsCËª = f®£;" << 
¡d
::
’dl
;

3040 
fout
 << " }" << 
¡d
::
’dl
;

3041 
fout
 << 
¡d
::
’dl
;

3042 
fout
 << " // v®id©špuˆv¬ŸbËs" << 
¡d
::
’dl
;

3043 
fout
 << " fÜ (size_ˆiv¬ = 0; iv¬ <heIÅutV¬s.size(); iv¬++è{" << 
¡d
::
’dl
;

3044 
fout
 << " iàÑheIÅutV¬s[iv¬] !ğšputV¬s[iv¬]è{" << 
¡d
::
’dl
;

3045 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\": mism©ch iÀšpuˆv¬ŸbË‚ames\" << std::’dl" << 
¡d
::
’dl
;

3046 
fout
 << " << \" fÜ v¬ŸbË [\" << iv¬ << \"]: \" <<heIÅutV¬s[iv¬].c_¡r(è<< \" !ğ\" << iÅutV¬s[iv¬] << std::’dl;" << 
¡d
::
’dl
;

3047 
fout
 << " fStusIsCËª = f®£;" << 
¡d
::
’dl
;

3048 
fout
 << " }" << 
¡d
::
’dl
;

3049 
fout
 << " }" << 
¡d
::
’dl
;

3050 
fout
 << 
¡d
::
’dl
;

3051 
fout
 << " // in™Ÿlizmš‡nd max veùÜ (fÜ‚Üm®i§tiÚ)" << 
¡d
::
’dl
;

3052 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++) {

3053 
fout
 << " fVmš[" << 
iv¬
 << "] = " << 
¡d
::
	`£»cisiÚ
(15è<< 
	`G‘Xmš
Ğiv¬ ) << ";" << std::
’dl
;

3054 
fout
 << " fVmax[" << 
iv¬
 << "] = " << 
¡d
::
	`£»cisiÚ
(15è<< 
	`G‘Xmax
Ğiv¬ ) << ";" << std::
’dl
;

3056 
fout
 << 
¡d
::
’dl
;

3057 
fout
 << " // in™Ÿlizšpuˆv¬ŸbËy³s" << 
¡d
::
’dl
;

3058 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

3059 
fout
 << " fTy³[" << 
iv¬
 << "] = \'" << 
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘V¬Ty³
(è<< "\';" << 
¡d
::
’dl
;

3061 
fout
 << 
¡d
::
’dl
;

3062 
fout
 << " // in™ŸlizcÚ¡ªts" << 
¡d
::
’dl
;

3063 
fout
 << " In™Ÿlize();" << 
¡d
::
’dl
;

3064 
fout
 << 
¡d
::
’dl
;

3065 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() != 0) {

3066 
fout
 << " // in™ŸlizŒªsfÜm©iÚ" << 
¡d
::
’dl
;

3067 
fout
 << " In™T¿nsfÜm();" << 
¡d
::
’dl
;

3069 
fout
 << " }" << 
¡d
::
’dl
;

3070 
fout
 << 
¡d
::
’dl
;

3071 
fout
 << " // de¡ruùÜ" << 
¡d
::
’dl
;

3072 
fout
 << " vœtu® ~" << 
şassName
 << "(è{" << 
¡d
::
’dl
;

3073 
fout
 << " CË¬(); // m‘hod-¥ecific" << 
¡d
::
’dl
;

3074 
fout
 << " }" << 
¡d
::
’dl
;

3075 
fout
 << 
¡d
::
’dl
;

3076 
fout
 << " //hşassif›¸»¥Ú£" << 
¡d
::
’dl
;

3077 
fout
 << " // \"šputV®ues\" i ¨veùÜ oàšpuˆv®ue šh§mÜd”‡ th" << 
¡d
::
’dl
;

3078 
fout
 << " // v¬ŸbË giv’ØthcÚ¡ruùÜ" << 
¡d
::
’dl
;

3079 
fout
 << " doubË G‘MvaV®ueĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡;" << 
¡d
::
’dl
;

3080 
fout
 << 
¡d
::
’dl
;

3081 
fout
 << "…riv©e:" << 
¡d
::
’dl
;

3082 
fout
 << 
¡d
::
’dl
;

3083 
fout
 << " // m‘hod-¥ecifiøde¡ruùÜ" << 
¡d
::
’dl
;

3084 
fout
 << " void CË¬();" << 
¡d
::
’dl
;

3085 
fout
 << 
¡d
::
’dl
;

3086 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
()!=0) {

3087 
fout
 << " // iÅuˆv¬ŸbË¿nsfÜm©iÚ" << 
¡d
::
’dl
;

3088 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`MakeFunùiÚ
(
fout
, 
şassName
,1);

3089 
fout
 << " void In™T¿nsfÜm();" << 
¡d
::
’dl
;

3090 
fout
 << " void T¿nsfÜmĞ¡d::veùÜ<doubË> & iv, iÁ sigOrBgd ) cÚ¡;" << 
¡d
::
’dl
;

3091 
fout
 << 
¡d
::
’dl
;

3093 
fout
 << " // commÚ memb” v¬ŸbËs" << 
¡d
::
’dl
;

3094 
fout
 << " cÚ¡ ch¬* fCÏssName;" << 
¡d
::
’dl
;

3095 
fout
 << 
¡d
::
’dl
;

3096 
fout
 << " cÚ¡ size_ˆfNv¬s;" << 
¡d
::
’dl
;

3097 
fout
 << " size_ˆG‘Nv¬(è cÚ¡ {„‘uº fNv¬s; }" << 
¡d
::
’dl
;

3098 
fout
 << " ch¬ G‘Ty³Ğšˆiv¬ ) cÚ¡ {„‘uº fTy³[iv¬]; }" << 
¡d
::
’dl
;

3099 
fout
 << 
¡d
::
’dl
;

3100 
fout
 << " //‚Üm®i§tiÚ oàšpuˆv¬ŸbËs" << 
¡d
::
’dl
;

3101 
fout
 << " cÚ¡ boŞ fIsNÜm®i£d;" << 
¡d
::
’dl
;

3102 
fout
 << " boŞ IsNÜm®i£d(ècÚ¡ {„‘uº fIsNÜm®i£d; }" << 
¡d
::
’dl
;

3103 
fout
 << " doubË fVmš[" << 
	`G‘Nv¬
(è<< "];" << 
¡d
::
’dl
;

3104 
fout
 << " doubË fVmax[" << 
	`G‘Nv¬
(è<< "];" << 
¡d
::
’dl
;

3105 
fout
 << " doubË NÜmV¬ŸbËĞdoubË x, doubË xmš, doubË xmax ) cÚ¡ {" << 
¡d
::
’dl
;

3106 
fout
 << " //‚Üm®i£Øouuˆ¿nge: [-1, 1]" << 
¡d
::
’dl
;

3107 
fout
 << "„‘uº 2*(x - xmš)/(xmax - xmšè- 1.0;" << 
¡d
::
’dl
;

3108 
fout
 << " }" << 
¡d
::
’dl
;

3109 
fout
 << 
¡d
::
’dl
;

3110 
fout
 << " //y³ oàšpuˆv¬ŸbË: 'F' o¸'I'" << 
¡d
::
’dl
;

3111 
fout
 << " ch¬ fTy³[" << 
	`G‘Nv¬
(è<< "];" << 
¡d
::
’dl
;

3112 
fout
 << 
¡d
::
’dl
;

3113 
fout
 << " // in™Ÿlizš‹º® v¬ŸbËs" << 
¡d
::
’dl
;

3114 
fout
 << " void In™Ÿlize();" << 
¡d
::
’dl
;

3115 
fout
 << " doubË G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡;" << 
¡d
::
’dl
;

3116 
fout
 << "" << 
¡d
::
’dl
;

3117 
fout
 << " //…riv©memb” (m‘hod s³cific)" << 
¡d
::
’dl
;

3120 
	`MakeCÏssS³cific
Ğ
fout
, 
şassName
 );

3122 
fout
 << " iÆšdoubË " << 
şassName
 << "::G‘MvaV®ueĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

3123 
fout
 << " {" << 
¡d
::
’dl
;

3124 
fout
 << " // cÏssif›¸»¥Ú£ v®ue" << 
¡d
::
’dl
;

3125 
fout
 << " doubË„‘v® = 0;" << 
¡d
::
’dl
;

3126 
fout
 << 
¡d
::
’dl
;

3127 
fout
 << " // cÏssif›¸»¥Ú£, sª™y check fœ¡" << 
¡d
::
’dl
;

3128 
fout
 << " ià(!IsStusCËª()è{" << 
¡d
::
’dl
;

3129 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\": cªnÙ„‘uº cÏssif›¸»¥Ú£\"" << 
¡d
::
’dl
;

3130 
fout
 << " << \" beÿu£ stu i dœty\" << std::’dl;" << 
¡d
::
’dl
;

3131 
fout
 << "„‘v® = 0;" << 
¡d
::
’dl
;

3132 
fout
 << " }" << 
¡d
::
’dl
;

3133 
fout
 << "ƒl£ {" << 
¡d
::
’dl
;

3134 
fout
 << " ià(IsNÜm®i£d()è{" << 
¡d
::
’dl
;

3135 
fout
 << " //‚Üm®i£ v¬ŸbËs" << 
¡d
::
’dl
;

3136 
fout
 << " std::veùÜ<doubË> iV;" << 
¡d
::
’dl
;

3137 
fout
 << " iV.»£rve(šputV®ues.size());" << 
¡d
::
’dl
;

3138 
fout
 << " iÁ iv¬ = 0;" << 
¡d
::
’dl
;

3139 
fout
 << " fÜ (¡d::veùÜ<doubË>::cÚ¡_™”©Ü v¬IˆğšputV®ues.begš();" << 
¡d
::
’dl
;

3140 
fout
 << " v¬Iˆ!ğšputV®ues.’d(); v¬It++, iv¬++è{" << 
¡d
::
’dl
;

3141 
fout
 << " iV.push_back(NÜmV¬ŸbËĞ*v¬It, fVmš[iv¬], fVmax[iv¬] ));" << 
¡d
::
’dl
;

3142 
fout
 << " }" << 
¡d
::
’dl
;

3143 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
()!=0 &&

3144 
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kLik–ihood
 &&

3145 
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kHM©rix
) {

3146 
fout
 << " T¿nsfÜmĞiV, -1 );" << 
¡d
::
’dl
;

3148 
fout
 << "„‘v® = G‘MvaV®ue__ĞiV );" << 
¡d
::
’dl
;

3149 
fout
 << " }" << 
¡d
::
’dl
;

3150 
fout
 << "ƒl£ {" << 
¡d
::
’dl
;

3151 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
()!=0 &&

3152 
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kLik–ihood
 &&

3153 
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kHM©rix
) {

3154 
fout
 << " std::veùÜ<doubË> iV;" << 
¡d
::
’dl
;

3155 
fout
 << " iÁ iv¬ = 0;" << 
¡d
::
’dl
;

3156 
fout
 << " fÜ (¡d::veùÜ<doubË>::cÚ¡_™”©Ü v¬IˆğšputV®ues.begš();" << 
¡d
::
’dl
;

3157 
fout
 << " v¬Iˆ!ğšputV®ues.’d(); v¬It++, iv¬++è{" << 
¡d
::
’dl
;

3158 
fout
 << " iV.push_back(*v¬It);" << 
¡d
::
’dl
;

3159 
fout
 << " }" << 
¡d
::
’dl
;

3160 
fout
 << " T¿nsfÜmĞiV, -1 );" << 
¡d
::
’dl
;

3161 
fout
 << "„‘v® = G‘MvaV®ue__ĞiV );" << 
¡d
::
’dl
;

3164 
fout
 << "„‘v® = G‘MvaV®ue__ĞšputV®ue );" << 
¡d
::
’dl
;

3166 
fout
 << " }" << 
¡d
::
’dl
;

3167 
fout
 << " }" << 
¡d
::
’dl
;

3168 
fout
 << 
¡d
::
’dl
;

3169 
fout
 << "„‘uº„‘v®;" << 
¡d
::
’dl
;

3170 
fout
 << " }" << 
¡d
::
’dl
;

3173 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
()!=0)

3174 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`MakeFunùiÚ
(
fout
, 
şassName
,2);

3177 
fout
.
	`şo£
();

3178 
	}
}

3183 
	gTMVA
::
M‘hodBa£
::
	$PrštH–pMes§ge
() const

3186 
¡d
::
¡»ambuf
* 
cout_sbuf
 = std::
cout
.
	`rdbuf
();

3187 
¡d
::
of¡»am
* 
o
 = 0;

3188 ià(
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
()) {

3189 
	`Log
(è<< 
kINFO
 << "PršˆH–°mes§gfÜ cÏs " << 
	`G‘Name
(è<< " iÁØfe: " << 
	`G‘Reã»nûFe
(è<< 
Endl
;

3190 
o
 = 
Ãw
 
¡d
::
	`of¡»am
Ğ
	`G‘Reã»nûFe
(), std::
ios
::
­p
 );

3191 ià(!
o
->
	`good
()) {

3192 
	`Log
(è<< 
kFATAL
 << "<PrštH–pMes§ge> UÇbËØ­³ndØouuˆfe: " << 
	`G‘Reã»nûFe
(è<< 
Endl
;

3194 
¡d
::
cout
.
	`rdbuf
Ğ
o
->rdbuf() );

3198 ià(!
o
) {

3199 
	`Log
(è<< 
kINFO
 << 
Endl
;

3200 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bold")

3202 << 
	`gToŞs
().
	`CŞÜ
( "reset" )

3203 << 
Endl
;

3204 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bold")

3205 << "Hƒ†… f o„ M V A mƒ h o d [ " << 
	`G‘Name
() << " ] :"

3206 << 
	`gToŞs
().
	`CŞÜ
( "reset" )

3207 << 
Endl
;

3210 
	`Log
(è<< "H–°fÜ MVA m‘hod [ " << 
	`G‘Name
(è<< " ] :" << 
Endl
;

3214 
	`G‘H–pMes§ge
();

3216 ià(!
o
) {

3217 
	`Log
(è<< 
Endl
;

3218 
	`Log
(è<< "<Suµ»s thi mes§gby s³cifyšg \"!H\" iÀthbookšg o±iÚ>" << 
Endl
;

3219 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bold")

3221 << 
	`gToŞs
().
	`CŞÜ
( "reset" )

3222 << 
Endl
;

3223 
	`Log
(è<< 
Endl
;

3227 
	`Log
(è<< "# End oàMes§ge___" << 
Endl
;

3230 
¡d
::
cout
.
	`rdbuf
Ğ
cout_sbuf
 );

3231 ià(
o
èo->
	`şo£
();

3232 
	}
}

3239 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘V®ueFÜRoÙ
Ğ
DoubË_t
 
theCut
 )

3241 
DoubË_t
 
»tv®
=0;

3244 ià(
U£_S¶šes_fÜ_Eff_
) {

3245 
»tv®
 = 
fS¶RefS
->
	`Ev®
Ğ
theCut
 );

3247 
»tv®
 = 
fEffS
->
	`G‘BšCÚ‹Á
ĞfEffS->
	`FšdBš
Ğ
theCut
 ) );

3255 
DoubË_t
 
•s
 = 1.0e-5;

3256 ià(
theCut
-
fXmš
 < 
•s
è
»tv®
 = (
	`G‘CutOr›Á©iÚ
(è=ğ
kPos™ive
) ? 1.0 : 0.0;

3257 ià(
fXmax
-
theCut
 < 
•s
è
»tv®
 = (
	`G‘CutOr›Á©iÚ
(è=ğ
kPos™ive
) ? 0.0 : 1.0;

3259  
»tv®
;

3260 
	}
}

3266 cÚ¡ 
	g¡d
::
veùÜ
<
TMVA
::
Ev’t
*>& TMVA::
M‘hodBa£
::
	$G‘Ev’tCŞËùiÚ
Ğ
Ty³s
::
ET»eTy³
 
ty³
)

3270 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘EÁr›s
() <= 0) {

3271  (
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
(
ty³
));

3277 
IÁ_t
 
idx
 = 
	`D©a
()->
	`T»eIndex
(
ty³
);

3278 ià(
fEv’tCŞËùiÚs
.
	`©
(
idx
) == 0) {

3279 
fEv’tCŞËùiÚs
.
	`©
(
idx
èğ&(
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
(
ty³
));

3280 
fEv’tCŞËùiÚs
.
	`©
(
idx
èğ
	`G‘T¿nsfÜm©iÚHªdËr
().
	`C®cT¿nsfÜm©iÚs
(*(fEv’tCŞËùiÚs.©(idx)),
kTRUE
);

3282  *(
fEv’tCŞËùiÚs
.
	`©
(
idx
));

3283 
	}
}

3288 
TSŒšg
 
	gTMVA
::
M‘hodBa£
::
	$G‘T¿ššgTMVAV”siÚSŒšg
() const

3290 
UIÁ_t
 
a
 = 
	`G‘T¿ššgTMVAV”siÚCode
() & 0xff0000;‡>>=16;

3291 
UIÁ_t
 
b
 = 
	`G‘T¿ššgTMVAV”siÚCode
() & 0x00ff00; b>>=8;

3292 
UIÁ_t
 
c
 = 
	`G‘T¿ššgTMVAV”siÚCode
() & 0x0000ff;

3294  
	`TSŒšg
(
	`FÜm
("%i.%i.%i",
a
,
b
,
c
));

3295 
	}
}

3300 
TSŒšg
 
	gTMVA
::
M‘hodBa£
::
	$G‘T¿ššgROOTV”siÚSŒšg
() const

3302 
UIÁ_t
 
a
 = 
	`G‘T¿ššgROOTV”siÚCode
() & 0xff0000;‡>>=16;

3303 
UIÁ_t
 
b
 = 
	`G‘T¿ššgROOTV”siÚCode
() & 0x00ff00; b>>=8;

3304 
UIÁ_t
 
c
 = 
	`G‘T¿ššgROOTV”siÚCode
() & 0x0000ff;

3306  
	`TSŒšg
(
	`FÜm
("%i.%02i/%02i",
a
,
b
,
c
));

3307 
	}
}

3311 
DoubË_t
 
	gTMVA
::
M‘hodBa£
::
	$G‘KST¿ššgVsTe¡
(
Ch¬_t
 
SÜB
, 
TSŒšg
 
İt
){

3312 
ResuÉsCÏssifiÿtiÚ
* 
mvaRes
 = 
dyÇmic_ÿ¡
<ResultsClassification*>

3313 Ğ
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(),
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
) );

3315 ià(
mvaRes
 !ğ
NULL
) {

3316 
TH1D
 *
mva_s
 = 
dyÇmic_ÿ¡
<TH1D*> (
mvaRes
->
	`G‘Hi¡
("MVA_S"));

3317 
TH1D
 *
mva_b
 = 
dyÇmic_ÿ¡
<TH1D*> (
mvaRes
->
	`G‘Hi¡
("MVA_B"));

3318 
TH1D
 *
mva_s_Œ
 = 
dyÇmic_ÿ¡
<TH1D*> (
mvaRes
->
	`G‘Hi¡
("MVA_TRAIN_S"));

3319 
TH1D
 *
mva_b_Œ
 = 
dyÇmic_ÿ¡
<TH1D*> (
mvaRes
->
	`G‘Hi¡
("MVA_TRAIN_B"));

3321 iàĞ!
mva_s
 || !
mva_b
 || !
mva_s_Œ
 || !
mva_b_Œ
)  -1;

3323 ià(
SÜB
 == 's' || SorB == 'S')

3324  
mva_s
->
	`KŞmogÜovTe¡
Ğ
mva_s_Œ
, 
İt
.
	`D©a
() );

3326  
mva_b
->
	`KŞmogÜovTe¡
Ğ
mva_b_Œ
, 
İt
.
	`D©a
() );

3329 
	}
}

	@src/MethodBayesClassifier.cxx

35 
	~"TMVA/M‘hodBayesCÏssif›r.h
"

37 
	~"TMVA/CÏssif›rFaùÜy.h
"

38 
	~"TMVA/IM‘hod.h
"

39 
	~"TMVA/M‘hodBa£.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/ToŞs.h
"

42 
	~"TMVA/Ty³s.h
"

44 
	~"Rio¡»am.h
"

45 
	~"TSŒšg.h
"

47 
	$REGISTER_METHOD
(
BayesCÏssif›r
)

49 
	`CÏssImp
(
TMVA
::
M‘hodBayesCÏssif›r
);

54 
TMVA
::
M‘hodBayesCÏssif›r
::
	$M‘hodBayesCÏssif›r
ĞcÚ¡ 
TSŒšg
& 
jobName
,

55 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

56 
D©aS‘Info
& 
theD©a
,

57 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

58 
TMVA
::
	$M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kBayesCÏssif›r
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

60 
	}
}

65 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$M‘hodBayesCÏssif›r
Ğ
D©aS‘Info
& 
theD©a
,

66 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

67 
TMVA
::
	$M‘hodBa£
Ğ
Ty³s
::
kBayesCÏssif›r
, 
theD©a
, 
theWeightFe
)

69 
	}
}

74 
BoŞ_t
 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

76 ifĞ
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2 )  
kTRUE
;

77  
kFALSE
;

78 
	}
}

84 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$In™
( )

86 
	}
}

91 
TMVA
::
M‘hodBayesCÏssif›r
::
	$Deş¬eO±iÚs
()

93 
	}
}

98 
TMVA
::
M‘hodBayesCÏssif›r
::
	$ProûssO±iÚs
()

100 
	}
}

105 
TMVA
::
M‘hodBayesCÏssif›r
::~
	$M‘hodBayesCÏssif›r
( )

107 
	}
}

112 
TMVA
::
M‘hodBayesCÏssif›r
::
	$T¿š
( )

114 
	}
}

118 
TMVA
::
M‘hodBayesCÏssif›r
::
	$AddWeightsXMLTo
( * ) const {

119 
	`Log
(è<< 
kFATAL
 << "PËa£ im¶em’ˆwr™šg oàweight a XML" << 
Endl
;

120 
	}
}

125 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & )

127 
	}
}

132 
DoubË_t
 
TMVA
::
M‘hodBayesCÏssif›r
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

134 
DoubË_t
 
myMVA
 = 0;

137 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

139  
myMVA
;

140 
	}
}

145 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

147 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

148 
fout
 << "};" << 
¡d
::
’dl
;

149 
	}
}

157 
	gTMVA
::
M‘hodBayesCÏssif›r
::
	$G‘H–pMes§ge
() const

159 
	`Log
(è<< 
Endl
;

160 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

161 
	`Log
(è<< 
Endl
;

162 
	`Log
(è<< "<NÚe>" << 
Endl
;

163 
	`Log
(è<< 
Endl
;

164 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

165 
	`Log
(è<< 
Endl
;

166 
	`Log
(è<< "<NÚe>" << 
Endl
;

167 
	`Log
(è<< 
Endl
;

168 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

169 
	`Log
(è<< 
Endl
;

170 
	`Log
(è<< "<NÚe>" << 
Endl
;

171 
	}
}

	@src/MethodBoost.cxx

44 
	~"TMVA/M‘hodBoo¡.h
"

46 
	~"TMVA/CÏssif›rFaùÜy.h
"

47 
	~"TMVA/CÚfig.h
"

48 
	~"TMVA/CÚfigu¿bË.h
"

49 
	~"TMVA/D©aS‘.h
"

50 
	~"TMVA/D©aS‘Info.h
"

51 
	~"TMVA/IM‘hod.h
"

52 
	~"TMVA/M‘hodBa£.h
"

53 
	~"TMVA/M‘hodC©egÜy.h
"

54 
	~"TMVA/M‘hodCompos™eBa£.h
"

55 
	~"TMVA/M‘hodDT.h
"

56 
	~"TMVA/M‘hodFish”.h
"

57 
	~"TMVA/PDF.h
"

58 
	~"TMVA/ResuÉs.h
"

59 
	~"TMVA/Tim”.h
"

60 
	~"TMVA/ToŞs.h
"

61 
	~"TMVA/Ty³s.h
"

63 
	~"TMVA/S•¬©iÚBa£.h
"

64 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

65 
	~"TMVA/GšiIndex.h
"

66 
	~"TMVA/CrossEÁrİy.h
"

67 
	~"TMVA/Reg»ssiÚV¬Ÿnû.h
"

68 
	~"TMVA/QuickMVAProbE¡im©Ü.h
"

70 
	~"Rio¡»am.h
"

71 
	~"TRªdom3.h
"

72 
	~"TFe.h
"

73 
	~"TM©h.h
"

74 
	~"TObjSŒšg.h
"

75 
	~"TH1F.h
"

76 
	~"TH2F.h
"

77 
	~"TG¿ph.h
"

78 
	~"TS¶še.h
"

79 
	~"TDœeùÜy.h
"

80 
	~"TT»e.h
"

82 
	~<®gÜ™hm
>

83 
	~<iomª
>

84 
	~<veùÜ
>

85 
	~<cm©h
>

88 
	$REGISTER_METHOD
(
Boo¡
)

90 
	`CÏssImp
(
TMVA
::
M‘hodBoo¡
);

94 
TMVA
::
M‘hodBoo¡
::
	$M‘hodBoo¡
ĞcÚ¡ 
TSŒšg
& 
jobName
,

95 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

96 
D©aS‘Info
& 
theD©a
,

97 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

98 
TMVA
::
	`M‘hodCompos™eBa£
Ğ
jobName
, 
Ty³s
::
kBoo¡
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

99 , 
	`fBoo¡Num
(0)

100 , 
	`fD‘aedMÚ™Üšg
(
kFALSE
)

101 , 
	`fAdaBoo¡B‘a
(0)

102 , 
	`fRªdomS“d
(0)

103 , 
	`fBaggedSam¶eF¿ùiÚ
(0)

104 , 
	`fBoo¡edM‘hodT™Ë
(
m‘hodT™Ë
)

105 , 
	`fBoo¡edM‘hodO±iÚs
(
theO±iÚ
)

106 , 
	`fMÚ™ÜBoo¡edM‘hod
(
kFALSE
)

107 , 
	`fMÚ™ÜT»e
(0)

108 , 
	`fBoo¡Weight
(0)

109 , 
	`fM‘hodE¼Ü
(0)

110 , 
	`fROC_Œaššg
(0.0)

111 , 
	`fOv”Ïp_š‹g¿l
(0.0)

112 , 
	$fMVAv®ues
(0)

114 
fMVAv®ues
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>;

115 
fD©aS‘Mªag”
 = 
NULL
;

116 
fHi¡ÜicBoŞO±iÚ
 = 
kFALSE
;

117 
	}
}

121 
	gTMVA
::
M‘hodBoo¡
::
	$M‘hodBoo¡
Ğ
D©aS‘Info
& 
dsi
,

122 cÚ¡ 
TSŒšg
& 
theWeightFe
)

123 : 
TMVA
::
	`M‘hodCompos™eBa£
Ğ
Ty³s
::
kBoo¡
, 
dsi
, 
theWeightFe
)

124 , 
	`fBoo¡Num
(0)

125 , 
	`fD‘aedMÚ™Üšg
(
kFALSE
)

126 , 
	`fAdaBoo¡B‘a
(0)

127 , 
	`fRªdomS“d
(0)

128 , 
	`fBaggedSam¶eF¿ùiÚ
(0)

129 , 
	`fBoo¡edM‘hodT™Ë
("")

130 , 
	`fBoo¡edM‘hodO±iÚs
("")

131 , 
	`fMÚ™ÜBoo¡edM‘hod
(
kFALSE
)

132 , 
	`fMÚ™ÜT»e
(0)

133 , 
	`fBoo¡Weight
(0)

134 , 
	`fM‘hodE¼Ü
(0)

135 , 
	`fROC_Œaššg
(0.0)

136 , 
	`fOv”Ïp_š‹g¿l
(0.0)

137 , 
	$fMVAv®ues
(0)

139 
fMVAv®ues
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>;

140 
fD©aS‘Mªag”
 = 
NULL
;

141 
fHi¡ÜicBoŞO±iÚ
 = 
kFALSE
;

142 
	}
}

147 
	gTMVA
::
M‘hodBoo¡
::~
	$M‘hodBoo¡
( )

149 
fM‘hodWeight
.
	`ş—r
();

153 
fT¿šSigMVAHi¡
.
	`ş—r
();

154 
fT¿šBgdMVAHi¡
.
	`ş—r
();

155 
fBT¿šSigMVAHi¡
.
	`ş—r
();

156 
fBT¿šBgdMVAHi¡
.
	`ş—r
();

157 
fTe¡SigMVAHi¡
.
	`ş—r
();

158 
fTe¡BgdMVAHi¡
.
	`ş—r
();

160 ià(
fMVAv®ues
) {

161 
d–‘e
 
fMVAv®ues
;

162 
fMVAv®ues
 = 0;

164 
	}
}

170 
BoŞ_t
 
	gTMVA
::
M‘hodBoo¡
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

172 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

174  
kFALSE
;

175 
	}
}

180 
	gTMVA
::
M‘hodBoo¡
::
	$Deş¬eO±iÚs
()

182 
	`Deş¬eO±iÚRef
Ğ
fBoo¡Num
 = 1, "Boost_Num",

185 
	`Deş¬eO±iÚRef
Ğ
fMÚ™ÜBoo¡edM‘hod
 = 
kTRUE
, "Boost_MonitorMethod",

188 
	`Deş¬eO±iÚRef
Ğ
fD‘aedMÚ™Üšg
 = 
kFALSE
, "Boost_DetailedMonitoring",

191 
	`Deş¬eO±iÚRef
Ğ
fBoo¡Ty³
 = "AdaBoost", "Boost_Type", "Boostingype forhe classifiers" );

192 
	`AddP»DefV®
(
	`TSŒšg
("RealAdaBoost"));

193 
	`AddP»DefV®
(
	`TSŒšg
("AdaBoost"));

194 
	`AddP»DefV®
(
	`TSŒšg
("Bagging"));

196 
	`Deş¬eO±iÚRef
(
fBaggedSam¶eF¿ùiÚ
=.6,"Boost_BaggedSampleFraction","Relative size of baggedƒvent sampleo original size ofhe data sample (used whenever bagging is used)" );

198 
	`Deş¬eO±iÚRef
Ğ
fAdaBoo¡B‘a
 = 1.0, "Boost_AdaBoostBeta",

201 
	`Deş¬eO±iÚRef
Ğ
fT¿nsfÜmSŒšg
 = "step", "Boost_Transform",

203 
	`AddP»DefV®
(
	`TSŒšg
("step"));

204 
	`AddP»DefV®
(
	`TSŒšg
("linear"));

205 
	`AddP»DefV®
(
	`TSŒšg
("log"));

206 
	`AddP»DefV®
(
	`TSŒšg
("gauss"));

208 
	`Deş¬eO±iÚRef
Ğ
fRªdomS“d
 = 0, "Boost_RandomSeed",

211 
TMVA
::
M‘hodCompos™eBa£
::
fM‘hods
.
	`»£rve
(
fBoo¡Num
);

212 
	}
}

219 
	gTMVA
::
M‘hodBoo¡
::
	$Deş¬eCom·tib™yO±iÚs
()

222 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

224 
	`Deş¬eO±iÚRef
Ğ
fHi¡ÜicO±iÚ
 = "ByError", "Boost_MethodWeightType",

226 
	`AddP»DefV®
(
	`TSŒšg
("ByError"));

227 
	`AddP»DefV®
(
	`TSŒšg
("Average"));

228 
	`AddP»DefV®
(
	`TSŒšg
("ByROC"));

229 
	`AddP»DefV®
(
	`TSŒšg
("ByOverlap"));

230 
	`AddP»DefV®
(
	`TSŒšg
("LastMethod"));

232 
	`Deş¬eO±iÚRef
Ğ
fHi¡ÜicO±iÚ
 = "step", "Boost_Transform",

234 
	`AddP»DefV®
(
	`TSŒšg
("step"));

235 
	`AddP»DefV®
(
	`TSŒšg
("linear"));

236 
	`AddP»DefV®
(
	`TSŒšg
("log"));

237 
	`AddP»DefV®
(
	`TSŒšg
("gauss"));

242 
	`AddP»DefV®
(
	`TSŒšg
("HighEdgeGauss"));

243 
	`AddP»DefV®
(
	`TSŒšg
("HighEdgeCoPara"));

246 
	`Deş¬eO±iÚRef
Ğ
fHi¡ÜicBoŞO±iÚ
, "Boost_RecalculateMVACut",

249 
	}
}

254 
BoŞ_t
 
	gTMVA
::
M‘hodBoo¡
::
	$BookM‘hod
Ğ
Ty³s
::
EMVA
 
theM‘hod
, 
TSŒšg
 
m‘hodT™Ë
, TSŒšg 
theO±iÚ
 )

256 
fBoo¡edM‘hodName
 = 
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodName
Ğ
theM‘hod
 );

257 
fBoo¡edM‘hodT™Ë
 = 
m‘hodT™Ë
;

258 
fBoo¡edM‘hodO±iÚs
 = 
theO±iÚ
;

259 
TSŒšg
 
İts
=
theO±iÚ
;

260 
İts
.
	`ToLow”
();

263  
kTRUE
;

264 
	}
}

268 
	gTMVA
::
M‘hodBoo¡
::
	$In™
()

270 
	}
}

275 
TMVA
::
M‘hodBoo¡
::
	$In™Hi¡os
()

278 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

280 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("M‘hodWeight","NÜm®ized CÏssif›¸Weight",
fBoo¡Num
,0,fBoostNum),"ClassifierWeight");

281 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("Boo¡Weight","Boo¡ Weight",
fBoo¡Num
,0,fBoostNum),"BoostWeight");

282 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("E¼F¿ùiÚ","E¼Ü F¿ùiÚ (by boo¡edƒv’ˆweights)",
fBoo¡Num
,0,fBoostNum),"ErrorFraction");

283 ià(
fD‘aedMÚ™Üšg
){

284 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("ROCIÁeg¿l_‹¡","ROC iÁeg¿ÈoàsšgË cÏssif›¸Ñe¡šg sam¶e)",
fBoo¡Num
,0,fBoostNum),"ROCIntegral_test");

285 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("ROCIÁeg¿lBoo¡ed_‹¡","ROC iÁeg¿Èoàboo¡ed m‘hod (‹¡šg sam¶e)",
fBoo¡Num
,0,fBoostNum),"ROCIntegralBoosted_test");

286 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("ROCIÁeg¿l_Œaš","ROC iÁeg¿ÈoàsšgË cÏssif›¸Ñ¿ššg sam¶e)",
fBoo¡Num
,0,fBoostNum),"ROCIntegral_train");

287 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("ROCIÁeg¿lBoo¡ed_Œaš","ROC iÁeg¿Èoàboo¡ed m‘hod (Œaššg sam¶e)",
fBoo¡Num
,0,fBoostNum),"ROCIntegralBoosted_train");

288 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("Ov”ÏpIÁeg®_Œaš","Ov”Ï°š‹g¿ÈÑ¿ššg sam¶e)",
fBoo¡Num
,0,fBoostNum),"Overlap");

292 
»suÉs
->
	`G‘Hi¡
("CÏssif›rWeight")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

293 
»suÉs
->
	`G‘Hi¡
("CÏssif›rWeight")->
	`G‘Yaxis
()->
	`S‘T™Ë
("Classifier Weight");

294 
»suÉs
->
	`G‘Hi¡
("Boo¡Weight")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

295 
»suÉs
->
	`G‘Hi¡
("Boo¡Weight")->
	`G‘Yaxis
()->
	`S‘T™Ë
("Boost Weight");

296 
»suÉs
->
	`G‘Hi¡
("E¼ÜF¿ùiÚ")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

297 
»suÉs
->
	`G‘Hi¡
("E¼ÜF¿ùiÚ")->
	`G‘Yaxis
()->
	`S‘T™Ë
("Error Fraction");

298 ià(
fD‘aedMÚ™Üšg
){

299 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_‹¡")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

300 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_‹¡")->
	`G‘Yaxis
()->
	`S‘T™Ë
("ROC integral of single classifier");

301 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_‹¡")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Number of boosts");

302 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_‹¡")->
	`G‘Yaxis
()->
	`S‘T™Ë
("ROC integral boosted");

303 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_Œaš")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

304 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_Œaš")->
	`G‘Yaxis
()->
	`S‘T™Ë
("ROC integral of single classifier");

305 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_Œaš")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Number of boosts");

306 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_Œaš")->
	`G‘Yaxis
()->
	`S‘T™Ë
("ROC integral boosted");

307 
»suÉs
->
	`G‘Hi¡
("Ov”Ïp")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

308 
»suÉs
->
	`G‘Hi¡
("Ov”Ïp")->
	`G‘Yaxis
()->
	`S‘T™Ë
("Overlap integral");

311 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("Sov”BtÙ®","S/B iÀ»weigh‹d¿ššg sam¶e",
fBoo¡Num
,0,fBoostNum),"SoverBtotal");

312 
»suÉs
->
	`G‘Hi¡
("Sov”BtÙ®")->
	`G‘Yaxis
()->
	`S‘T™Ë
("S/B (boosted sample)");

313 
»suÉs
->
	`G‘Hi¡
("Sov”BtÙ®")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

315 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1F
("S•¬©iÚGaš","S•¬©iÚGaš",
fBoo¡Num
,0,fBoostNum),"SeparationGain");

316 
»suÉs
->
	`G‘Hi¡
("S•¬©iÚGaš")->
	`G‘Yaxis
()->
	`S‘T™Ë
("SeparationGain");

317 
»suÉs
->
	`G‘Hi¡
("S•¬©iÚGaš")->
	`G‘Xaxis
()->
	`S‘T™Ë
("Index of boosted classifier");

321 
fMÚ™ÜT»e
ğ
Ãw
 
	`TT»e
("MonitorBoost","Boost variables");

322 
fMÚ™ÜT»e
->
	`B¿nch
("iM‘hod",&
fCu¼’tM‘hodIdx
,"iMethod/I");

323 
fMÚ™ÜT»e
->
	`B¿nch
("boo¡Weight",&
fBoo¡Weight
,"boostWeight/D");

324 
fMÚ™ÜT»e
->
	`B¿nch
("”rÜF¿ùiÚ",&
fM‘hodE¼Ü
,"errorFraction/D");

325 
fMÚ™ÜBoo¡edM‘hod
 = 
kTRUE
;

327 
	}
}

332 
	gTMVA
::
M‘hodBoo¡
::
	$CheckS‘up
()

334 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fBoo¡Ty³="<<
fBoo¡Ty³
 << 
Endl
;

335 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fAdaBoo¡B‘a="<<
fAdaBoo¡B‘a
<<
Endl
;

336 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fBoo¡Weight="<<
fBoo¡Weight
<<
Endl
;

337 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fM‘hodE¼Ü="<<
fM‘hodE¼Ü
<<
Endl
;

338 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fBoo¡Num="<<
fBoo¡Num
 << 
Endl
;

339 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fRªdomS“d=" << 
fRªdomS“d
<< 
Endl
;

340 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fT¿šSigMVAHi¡.size()="<<
fT¿šSigMVAHi¡
.
	`size
()<<
Endl
;

341 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fTe¡SigMVAHi¡.size()="<<
fTe¡SigMVAHi¡
.
	`size
()<<
Endl
;

342 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fMÚ™ÜBoo¡edM‘hod=" << (
fMÚ™ÜBoo¡edM‘hod
? "Œue" : "çl£"è<< 
Endl
;

343 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: MName=" << 
fBoo¡edM‘hodName
 << " T™Ë="<< 
fBoo¡edM‘hodT™Ë
<< 
Endl
;

344 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: MO±iÚs="<< 
fBoo¡edM‘hodO±iÚs
 << 
Endl
;

345 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fMÚ™ÜT»e=" << 
fMÚ™ÜT»e
 <<
Endl
;

346 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fCu¼’tM‘hodIdx=" <<
fCu¼’tM‘hodIdx
 << 
Endl
;

347 ià(
fM‘hods
.
	`size
()>0è
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fM‘hods[0]" <<fM‘hods[0]<<
Endl
;

348 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fM‘hodWeight.size()" << 
fM‘hodWeight
.
	`size
(è<< 
Endl
;

349 ià(
fM‘hodWeight
.
	`size
()>0è
	`Log
(è<< 
kDEBUG
 << "CheckS‘up: fM‘hodWeight[0]="<<fM‘hodWeight[0]<<
Endl
;

350 
	`Log
(è<< 
kDEBUG
 << "CheckS‘up:ryšgØ»·œhšgs" << 
Endl
;

352 
	}
}

355 
	gTMVA
::
M‘hodBoo¡
::
	$T¿š
()

357 
TDœeùÜy
* 
	`m‘hodDœ
( 0 );

358 
TSŒšg
 
dœName
,
dœT™Ë
;

359 
IÁ_t
 
StİCouÁ”
=0;

360 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

363 
	`In™Hi¡os
();

365 ià(
	`D©a
()->
	`G‘NT¿ššgEv’ts
()==0è
	`Log
(è<< 
kFATAL
 << "<T¿š> D©a(èha z”Øev’ts" << 
Endl
;

366 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

368 ià(
fM‘hods
.
	`size
(è> 0èfM‘hods.
	`ş—r
();

369 
fMVAv®ues
->
	`»size
(
	`D©a
()->
	`G‘NT¿ššgEv’ts
(), 0.0);

371 
	`Log
(è<< 
kINFO
 << "T¿ššg "<< 
fBoo¡Num
 << " " << 
fBoo¡edM‘hodName
 << " w™h™Ë " << 
fBoo¡edM‘hodT™Ë
 << " CÏssif›r ...…©›nû…Ëa£" << 
Endl
;

372 
Tim”
 
	`tim”
Ğ
fBoo¡Num
, 
	`G‘Name
() );

374 
	`Re£tBoo¡Weights
();

377 
	`CËªBoo¡O±iÚs
();

382 
Ssiz_t
 
v¬T¿foS¹
=
fBoo¡edM‘hodO±iÚs
.
	`Index
("~VarTransform=");

383 ià(
v¬T¿foS¹
 >0) {

384 
Ssiz_t
 
v¬T¿foEnd
 =
fBoo¡edM‘hodO±iÚs
.
	`Index
(":",
v¬T¿foS¹
);

385 ià(
v¬T¿foEnd
<
v¬T¿foS¹
)

386 
v¬T¿foEnd
=
fBoo¡edM‘hodO±iÚs
.
	`L’gth
();

387 
fBoo¡edM‘hodO±iÚs
.
	`Remove
(
v¬T¿foS¹
,
v¬T¿foEnd
-varTrafoStart);

392 
fCu¼’tM‘hodIdx
=0;fCu¼’tM‘hodIdx<
fBoo¡Num
;fCurrentMethodIdx++) {

394 ià(
fCu¼’tM‘hodIdx
>0è
TMVA
::
MsgLogg”
::
	`Inhib™Ouut
();

396 
IM‘hod
* 
m‘hod
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
(
¡d
::
	`¡ršg
(
fBoo¡edM‘hodName
),

397 
	`G‘JobName
(),

398 
	`FÜm
("%s_B%04i", 
fBoo¡edM‘hodT™Ë
.
	`D©a
(),
fCu¼’tM‘hodIdx
),

399 
	`D©aInfo
(),

400 
fBoo¡edM‘hodO±iÚs
);

401 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

404 
fCu¼’tM‘hod
 = (
dyÇmic_ÿ¡
<
M‘hodBa£
*>(
m‘hod
));

406 ià(
fCu¼’tM‘hod
==0) {

407 
	`Log
(è<< 
kFATAL
 << "uups.. gues thbookšg oàth" << 
fCu¼’tM‘hodIdx
 << "-th cÏssif›¸somehow faed" << 
Endl
;

412 ià(
fCu¼’tM‘hod
->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
) {

413 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
fCu¼’tM‘hod
));

414 ià(!
m‘hC©
)

415 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /M‘hodBoo¡" << 
Endl
;

416 
m‘hC©
->
fD©aS‘Mªag”
 = fDataSetManager;

419 
fCu¼’tM‘hod
->
	`S‘MsgTy³
(
kWARNING
);

420 
fCu¼’tM‘hod
->
	`S‘upM‘hod
();

421 
fCu¼’tM‘hod
->
	`P¬£O±iÚs
();

423 
fCu¼’tM‘hod
->
	`S‘AÇlysisTy³
Ğ
	`G‘AÇlysisTy³
() );

424 
fCu¼’tM‘hod
->
	`ProûssS‘up
();

425 
fCu¼’tM‘hod
->
	`CheckS‘up
();

429 
fCu¼’tM‘hod
->
	`R”ou‹T¿nsfÜm©iÚHªdËr
 (&(
this
->
	`G‘T¿nsfÜm©iÚHªdËr
()));

433 if(!
	`IsS’tFe
())

435 ià(
fMÚ™ÜBoo¡edM‘hod
) {

436 
m‘hodDœ
=
	`G‘Fe
()->
	`G‘DœeùÜy
(
dœName
=
	`FÜm
("%s_B%04i",
fBoo¡edM‘hodName
.
	`D©a
(),
fCu¼’tM‘hodIdx
));

437 ià(
m‘hodDœ
==0) {

438 
m‘hodDœ
=
	`Ba£Dœ
()->
	`mkdœ
(
dœName
,
dœT™Ë
=
	`FÜm
("DœeùÜy Boo¡ed % #%04i", 
fBoo¡edM‘hodName
.
	`D©a
(),
fCu¼’tM‘hodIdx
));

440 
fCu¼’tM‘hod
->
	`S‘M‘hodDœ
(
m‘hodDœ
);

441 
fCu¼’tM‘hod
->
	`Ba£Dœ
()->
	`cd
();

446 
TMVA
::
M‘hodCompos™eBa£
::
fM‘hods
.
	`push_back
(
m‘hod
);

447 
tim”
.
	`D¿wProg»ssB¬
Ğ
fCu¼’tM‘hodIdx
 );

448 ià(
fCu¼’tM‘hodIdx
==0è
	`MÚ™ÜBoo¡
(
Ty³s
::
kBoo¡ProcBegš
,fCurrentMethodIdx);

449 
	`MÚ™ÜBoo¡
(
Ty³s
::
kBefÜeT¿ššg
,
fCu¼’tM‘hodIdx
);

450 
TMVA
::
MsgLogg”
::
	`Inhib™Ouut
();

451 ià(
fBoo¡Ty³
=="Baggšg"è
	`Baggšg
();

452 
	`SšgËT¿š
();

453 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

454 if(!
	`IsS’tFe
())
fCu¼’tM‘hod
->
	`Wr™eMÚ™ÜšgHi¡osToFe
();

458 
	`C®cMVAV®ues
();

460 if(!
	`IsS’tFe
()èià(
fCu¼’tM‘hodIdx
==0 && 
fMÚ™ÜBoo¡edM‘hod
è
	`C»©eMVAHi¡Üg¿ms
();

467 
	`MÚ™ÜBoo¡
(
Ty³s
::
kBefÜeBoo¡šg
,
fCu¼’tM‘hodIdx
);

468 
	`SšgËBoo¡
(
fCu¼’tM‘hod
);

470 
	`MÚ™ÜBoo¡
(
Ty³s
::
kAá”Boo¡šg
,
fCu¼’tM‘hodIdx
);

471 
»suÉs
->
	`G‘Hi¡
("Boo¡Weight")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1,
fBoo¡Weight
);

472 
»suÉs
->
	`G‘Hi¡
("E¼ÜF¿ùiÚ")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1,
fM‘hodE¼Ü
);

474 ià(
fD‘aedMÚ™Üšg
) {

475 
fROC_Œaššg
 = 
	`G‘Boo¡ROCIÁeg¿l
(
kTRUE
, 
Ty³s
::
kT¿ššg
, kTRUE);

476 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_‹¡")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
	`G‘Boo¡ROCIÁeg¿l
(
kTRUE
, 
Ty³s
::
kTe¡šg
));

477 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_‹¡")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
	`G‘Boo¡ROCIÁeg¿l
(
kFALSE
, 
Ty³s
::
kTe¡šg
));

478 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿l_Œaš")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
fROC_Œaššg
);

479 
»suÉs
->
	`G‘Hi¡
("ROCIÁeg¿lBoo¡ed_Œaš")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
	`G‘Boo¡ROCIÁeg¿l
(
kFALSE
, 
Ty³s
::
kT¿ššg
));

480 
»suÉs
->
	`G‘Hi¡
("Ov”Ïp")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
fOv”Ïp_š‹g¿l
);

485 
fMÚ™ÜT»e
->
	`Fl
();

489 
	`Log
(è<< 
kDEBUG
 << "AdaBoo¡ (m‘hodE¼è”¸ğ" << 
fM‘hodE¼Ü
 << 
Endl
;

490 ià(
fM‘hodE¼Ü
 > 0.49999è
StİCouÁ”
++;

491 ià(
StİCouÁ”
 > 0 && 
fBoo¡Ty³
 != "Bagging") {

492 
tim”
.
	`D¿wProg»ssB¬
Ğ
fBoo¡Num
 );

493 
fBoo¡Num
 = 
fCu¼’tM‘hodIdx
+1;

494 
	`Log
(è<< 
kINFO
 << "E¼Ü„©ha »ached 0.5 ("<< 
fM‘hodE¼Ü
<<"), boo¡šg…roûs ¡İ³d‡ˆ#" << 
fBoo¡Num
 << " cÏssif›r" << 
Endl
;

495 ià(
fBoo¡Num
 < 5)

496 
	`Log
(è<< 
kINFO
 << "Thşassif›¸mighˆbtoØ¡rÚgØboo¡ w™h B‘¨ğ" << 
fAdaBoo¡B‘a
 << ",ry„educšg it." <<
Endl
;

504 
	`Re£tBoo¡Weights
();

506 
Tim”
* 
tim”1
ğ
Ãw
 
	`Tim”
Ğ
fBoo¡Num
, 
	`G‘Name
() );

508 
fCu¼’tM‘hodIdx
=0;fCu¼’tM‘hodIdx<
fBoo¡Num
;fCurrentMethodIdx++) {

511 
tim”1
->
	`D¿wProg»ssB¬
Ğ
fCu¼’tM‘hodIdx
 );

513 ià(
fCu¼’tM‘hodIdx
==
fBoo¡Num
) {

514 
	`Log
(è<< 
kINFO
 << "EÏp£dime: " << 
tim”1
->
	`G‘EÏp£dTime
()

515 << " " << 
Endl
;

518 
TH1F
* 
tmp
 = 
dyÇmic_ÿ¡
<TH1F*>Ğ
»suÉs
->
	`G‘Hi¡
("ClassifierWeight") );

519 ià(
tmp
ètmp->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1,
fM‘hodWeight
[fCurrentMethodIdx]);

528 ià(
fM‘hods
.
	`size
()==1è
fM‘hodWeight
[0] = 1.0;

530 
	`MÚ™ÜBoo¡
(
Ty³s
::
kBoo¡ProcEnd
);

532 
d–‘e
 
tim”1
;

533 
	}
}

537 
	gTMVA
::
M‘hodBoo¡
::
	$CËªBoo¡O±iÚs
()

539 
fBoo¡edM‘hodO±iÚs
=
	`G‘O±iÚs
();

540 
	}
}

544 
	gTMVA
::
M‘hodBoo¡
::
	$C»©eMVAHi¡Üg¿ms
()

546 ià(
fBoo¡Num
 <=0è
	`Log
(è<< 
kFATAL
 << "C»©eHi¡og¿m ÿÎed befÜfBoo¡Num i š™Ÿlized" << 
Endl
;

549 
DoubË_t
 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
, 
Äms
 = 10;

550 
IÁ_t
 
sigÇlCÏss
 = 0;

551 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Signal") != 0) {

552 
sigÇlCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

554 
	`gToŞs
().
	`Compu‹St
Ğ
	`G‘Ev’tCŞËùiÚ
Ğ
Ty³s
::
kMaxT»eTy³
 ), 
fMVAv®ues
,

555 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
, 
sigÇlCÏss
 );

557 
fNbšs
 = 
	`gCÚfig
().
fV¬ŸbËPlÙtšg
.
fNbšsXOfROCCurve
;

558 
xmš
 = 
TM©h
::
	`Max
ĞTM©h::
	`Mš
(
m—nS
 - 
Äms
*
rmsS
, 
m—nB
 -‚rms*
rmsB
 ), xmin );

559 
xmax
 = 
TM©h
::
	`Mš
ĞTM©h::
	`Max
(
m—nS
 + 
Äms
*
rmsS
, 
m—nB
 +‚rms*
rmsB
 ), xmax ) + 0.00001;

562 
UIÁ_t
 
imtd
=0; imtd<
fBoo¡Num
; imtd++) {

563 
fT¿šSigMVAHi¡
 .
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_T¿š_S_%04i",
imtd
), "MVA_T¿š_S", 
fNbšs
, 
xmš
, 
xmax
 ) );

564 
fT¿šBgdMVAHi¡
 .
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_T¿š_B%04i", 
imtd
), "MVA_T¿š_B", 
fNbšs
, 
xmš
, 
xmax
 ) );

565 
fBT¿šSigMVAHi¡
.
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_BT¿š_S%04i",
imtd
), "MVA_Boo¡edT¿š_S", 
fNbšs
, 
xmš
, 
xmax
 ) );

566 
fBT¿šBgdMVAHi¡
.
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_BT¿š_B%04i",
imtd
), "MVA_Boo¡edT¿š_B", 
fNbšs
, 
xmš
, 
xmax
 ) );

567 
fTe¡SigMVAHi¡
 .
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_Te¡_S%04i", 
imtd
), "MVA_Te¡_S", 
fNbšs
, 
xmš
, 
xmax
 ) );

568 
fTe¡BgdMVAHi¡
 .
	`push_back
Ğ
Ãw
 
	`TH1F
Ğ
	`FÜm
("MVA_Te¡_B%04i", 
imtd
), "MVA_Te¡_B", 
fNbšs
, 
xmš
, 
xmax
 ) );

570 
	}
}

575 
	gTMVA
::
M‘hodBoo¡
::
	$Re£tBoo¡Weights
()

577 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

578 cÚ¡ 
Ev’t
 *
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

579 
ev
->
	`S‘Boo¡Weight
( 1.0 );

581 
	}
}

585 
	gTMVA
::
M‘hodBoo¡
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

587 
TDœeùÜy
* 
dœ
=0;

588 ià(
fMÚ™ÜBoo¡edM‘hod
) {

589 
UIÁ_t
 
imtd
=0;imtd<
fBoo¡Num
;imtd++) {

592 
M‘hodBa£
* 
m
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
imtd
]);

593 ià(!
m
) ;

594 
dœ
 = 
m
->
	`Ba£Dœ
();

595 
dœ
->
	`cd
();

596 
fT¿šSigMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

597 
fT¿šSigMVAHi¡
[
imtd
]->
	`Wr™e
();

598 
fT¿šBgdMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

599 
fT¿šBgdMVAHi¡
[
imtd
]->
	`Wr™e
();

600 
fBT¿šSigMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

601 
fBT¿šSigMVAHi¡
[
imtd
]->
	`Wr™e
();

602 
fBT¿šBgdMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

603 
fBT¿šBgdMVAHi¡
[
imtd
]->
	`Wr™e
();

608 
	`Ba£Dœ
()->
	`cd
();

610 
fMÚ™ÜT»e
->
	`Wr™e
();

611 
	}
}

615 
	gTMVA
::
M‘hodBoo¡
::
	$Te¡CÏssifiÿtiÚ
()

617 
M‘hodBa£
::
	`Te¡CÏssifiÿtiÚ
();

618 ià(
fMÚ™ÜBoo¡edM‘hod
) {

619 
UIÁ_t
 
Æoİ
 = 
fTe¡SigMVAHi¡
.
	`size
();

620 ià(
fM‘hods
.
	`size
()<
Æoİ
)‚loop = fMethods.size();

622 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

623 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

624 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

625 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

626 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)) {

627 
UIÁ_t
 
imtd
=0; imtd<
Æoİ
; imtd++) {

628 
fTe¡SigMVAHi¡
[
imtd
]->
	`Fl
(
fM‘hods
[imtd]->
	`G‘MvaV®ue
(),
w
);

632 
UIÁ_t
 
imtd
=0; imtd<
Æoİ
; imtd++) {

633 
fTe¡BgdMVAHi¡
[
imtd
]->
	`Fl
(
fM‘hods
[imtd]->
	`G‘MvaV®ue
(),
w
);

637 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

639 
	}
}

643 
	gTMVA
::
M‘hodBoo¡
::
	$Wr™eEv®u©iÚHi¡osToFe
(
Ty³s
::
ET»eTy³
 
Œ“ty³
)

645 
M‘hodBa£
::
	`Wr™eEv®u©iÚHi¡osToFe
(
Œ“ty³
);

646 ià(
Œ“ty³
==
Ty³s
::
kT¿ššg
) ;

647 
UIÁ_t
 
Æoİ
 = 
fTe¡SigMVAHi¡
.
	`size
();

648 ià(
fM‘hods
.
	`size
()<
Æoİ
)‚loop = fMethods.size();

649 ià(
fMÚ™ÜBoo¡edM‘hod
) {

650 
TDœeùÜy
* 
dœ
=0;

651 
UIÁ_t
 
imtd
=0;imtd<
Æoİ
;imtd++) {

653 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
imtd
]);

654 ià(!
mva
) ;

655 
dœ
 = 
mva
->
	`Ba£Dœ
();

656 ià(
dœ
==0) ;

657 
dœ
->
	`cd
();

658 
fTe¡SigMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

659 
fTe¡SigMVAHi¡
[
imtd
]->
	`Wr™e
();

660 
fTe¡BgdMVAHi¡
[
imtd
]->
	`S‘DœeùÜy
(
dœ
);

661 
fTe¡BgdMVAHi¡
[
imtd
]->
	`Wr™e
();

664 
	}
}

669 
	gTMVA
::
M‘hodBoo¡
::
	$ProûssO±iÚs
()

671 
	}
}

676 
TMVA
::
M‘hodBoo¡
::
	$SšgËT¿š
()

678 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

679 
M‘hodBa£
* 
m‘h
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
	`G‘La¡M‘hod
());

680 ià(
m‘h
){

681 
m‘h
->
	`S‘S’tFe
(
	`IsS’tFe
());

682 if(
	`IsMod–P”si¡’û
()){

683 
TSŒšg
 
_fFeDœ
ğ
	`D©aInfo
().
	`G‘Name
();

684 
_fFeDœ
+="/"+
	`gCÚfig
().
	`G‘IONames
().
fWeightFeDœ
;

685 
m‘h
->
	`S‘WeightFeDœ
(
_fFeDœ
);

687 
m‘h
->
	`S‘Mod–P”si¡’û
(
	`IsMod–P”si¡’û
());

688 
m‘h
->
	`T¿šM‘hod
();

690 
	}
}

696 
	gTMVA
::
M‘hodBoo¡
::
	$FšdMVACut
(
M‘hodBa£
 *
m‘hod
)

698 ià(!
m‘hod
 || m‘hod->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kDT
 ){ ;}

701 cÚ¡ 
IÁ_t
 
nBšs
=10001;

702 
DoubË_t
 
mšMVA
=150000;

703 
DoubË_t
 
maxMVA
=-150000;

704 
LÚg64_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

705 
	`G‘Ev’t
(
›vt
);

706 
DoubË_t
 
v®
=
m‘hod
->
	`G‘MvaV®ue
();

708 ià(
v®
>
maxMVA
) maxMVA=val;

709 ià(
v®
<
mšMVA
) minMVA=val;

711 
maxMVA
 = maxMVA+(maxMVA-
mšMVA
)/
nBšs
;

713 
DoubË_t
 
sum
 = 0.;

715 
TH1D
 *
mvaS
 = 
Ãw
 
	`TH1D
(
	`FÜm
("MVAS_%d",
fCu¼’tM‘hodIdx
è,"",
nBšs
,
mšMVA
,
maxMVA
);

716 
TH1D
 *
mvaB
 = 
Ãw
 
	`TH1D
(
	`FÜm
("MVAB_%d",
fCu¼’tM‘hodIdx
è,"",
nBšs
,
mšMVA
,
maxMVA
);

717 
TH1D
 *
mvaSC
 = 
Ãw
 
	`TH1D
(
	`FÜm
("MVASC_%d",
fCu¼’tM‘hodIdx
),"",
nBšs
,
mšMVA
,
maxMVA
);

718 
TH1D
 *
mvaBC
 = 
Ãw
 
	`TH1D
(
	`FÜm
("MVABC_%d",
fCu¼’tM‘hodIdx
),"",
nBšs
,
mšMVA
,
maxMVA
);

721 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

722 ià(
fD‘aedMÚ™Üšg
){

723 
»suÉs
->
	`StÜe
(
mvaS
, 
	`FÜm
("MVAS_%d",
fCu¼’tM‘hodIdx
));

724 
»suÉs
->
	`StÜe
(
mvaB
, 
	`FÜm
("MVAB_%d",
fCu¼’tM‘hodIdx
));

725 
»suÉs
->
	`StÜe
(
mvaSC
,
	`FÜm
("MVASC_%d",
fCu¼’tM‘hodIdx
));

726 
»suÉs
->
	`StÜe
(
mvaBC
,
	`FÜm
("MVABC_%d",
fCu¼’tM‘hodIdx
));

729 
LÚg64_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

731 
DoubË_t
 
weight
 = 
	`G‘Ev’t
(
›vt
)->
	`G‘Weight
();

732 
DoubË_t
 
mvaV®
=
m‘hod
->
	`G‘MvaV®ue
();

733 
sum
 +=
weight
;

734 ià(
	`D©aInfo
().
	`IsSigÇl
(
	`G‘Ev’t
(
›vt
))){

735 
mvaS
->
	`Fl
(
mvaV®
,
weight
);

737 
mvaB
->
	`Fl
(
mvaV®
,
weight
);

740 
S•¬©iÚBa£
 *
£pGaš
;

755 
£pGaš
 = 
Ãw
 
	`GšiIndex
();

758 
DoubË_t
 
sTÙ
 = 
mvaS
->
	`G‘Sum
();

759 
DoubË_t
 
bTÙ
 = 
mvaB
->
	`G‘Sum
();

761 
mvaSC
->
	`S‘BšCÚ‹Á
(1,
mvaS
->
	`G‘BšCÚ‹Á
(1));

762 
mvaBC
->
	`S‘BšCÚ‹Á
(1,
mvaB
->
	`G‘BšCÚ‹Á
(1));

763 
DoubË_t
 
sS–
=0;

764 
DoubË_t
 
bS–
=0;

765 
DoubË_t
 
£·¿tiÚGaš
=
£pGaš
->
	`G‘S•¬©iÚGaš
(
sS–
,
bS–
,
sTÙ
,
bTÙ
);

766 
DoubË_t
 
mvaCut
=
mvaSC
->
	`G‘BšLowEdge
(1);

767 
DoubË_t
 
sS–Cut
=
sS–
;

768 
DoubË_t
 
bS–Cut
=
bS–
;

772 
DoubË_t
 
mvaCutOr›Á©iÚ
=1;

773 
IÁ_t
 
ibš
=1;ibš<=
nBšs
;ibin++){

774 
mvaSC
->
	`S‘BšCÚ‹Á
(
ibš
,
mvaS
->
	`G‘BšCÚ‹Á
(ibin)+mvaSC->GetBinContent(ibin-1));

775 
mvaBC
->
	`S‘BšCÚ‹Á
(
ibš
,
mvaB
->
	`G‘BšCÚ‹Á
(ibin)+mvaBC->GetBinContent(ibin-1));

777 
sS–
=
mvaSC
->
	`G‘BšCÚ‹Á
(
ibš
);

778 
bS–
=
mvaBC
->
	`G‘BšCÚ‹Á
(
ibš
);

784 ià(
£·¿tiÚGaš
 < 
£pGaš
->
	`G‘S•¬©iÚGaš
(
sS–
,
bS–
,
sTÙ
,
bTÙ
)

787 
£·¿tiÚGaš
 = 
£pGaš
->
	`G‘S•¬©iÚGaš
(
sS–
,
bS–
,
sTÙ
,
bTÙ
);

789 
mvaCut
=
mvaSC
->
	`G‘BšLowEdge
(
ibš
+1);

791 ià(
sS–
*(
bTÙ
-
bS–
è> (
sTÙ
-sS–)*bS–è
mvaCutOr›Á©iÚ
=-1;

792 
mvaCutOr›Á©iÚ
=1;

793 
sS–Cut
=
sS–
;

794 
bS–Cut
=
bS–
;

817 
·»ÁIndex
=
£pGaš
->
	`G‘S•¬©iÚIndex
(
sTÙ
,
bTÙ
);

818 
ËáIndex
 =
£pGaš
->
	`G‘S•¬©iÚIndex
(
sS–Cut
,
bS–Cut
);

819 
rightIndex
 =
£pGaš
->
	`G‘S•¬©iÚIndex
(
sTÙ
-
sS–Cut
,
bTÙ
-
bS–Cut
);

820 
¡d
::
cout


821 << " sTÙ=" << 
sTÙ


822 << " bTÙ=" << 
bTÙ


823 << " s="<<
sS–Cut


824 << " b="<<
bS–Cut


825 << " s2="<<(
sTÙ
-
sS–Cut
)

826 << " b2="<<(
bTÙ
-
bS–Cut
)

827 << " s/b(1)=" << 
sS–Cut
/
bS–Cut


828 << " s/b(2)=" << (
sTÙ
-
sS–Cut
)/(
bTÙ
-
bS–Cut
)

829 << " index befÜcut=" << 
·»ÁIndex


830 << "‡á”:†eá=" << 
ËáIndex


831 << "‡á”:„ight=" << 
rightIndex


832 << " s•Gaš=" << 
·»ÁIndex
-Ğ(
sS–Cut
+
bS–Cut
è* 
ËáIndex
 + (
sTÙ
-sS–Cut+
bTÙ
-bS–Cutè* 
rightIndex
 )/(sTot+bTot)

833 << " s•Gaš="<<
£·¿tiÚGaš


834 << " s•Gaš="<<
£pGaš
->
	`G‘S•¬©iÚGaš
(
sS–Cut
,
bS–Cut
,
sTÙ
,
bTÙ
)

835 << " cut=" << 
mvaCut


836 << " idx="<<
fCu¼’tM‘hodIdx


837 << " cutOr›Á©iÚ="<<
mvaCutOr›Á©iÚ


838 << 
¡d
::
’dl
;

840 
m‘hod
->
	`S‘SigÇlReã»nûCut
(
mvaCut
);

841 
m‘hod
->
	`S‘SigÇlReã»nûCutOr›Á©iÚ
(
mvaCutOr›Á©iÚ
);

843 
»suÉs
->
	`G‘Hi¡
("S•¬©iÚGaš")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1,
£·¿tiÚGaš
);

846 
	`Log
(è<< 
kDEBUG
 << "(Şd s‹pèS‘tšg m‘hod cuˆtØ" <<
m‘hod
->
	`G‘SigÇlReã»nûCut
()<< 
Endl
;

848 if(
	`IsS’tFe
())

850 
mvaS
 ->
	`D–‘e
();

851 
mvaB
 ->
	`D–‘e
();

852 
mvaSC
->
	`D–‘e
();

853 
mvaBC
->
	`D–‘e
();

855 
	}
}

859 
DoubË_t
 
	gTMVA
::
M‘hodBoo¡
::
	$SšgËBoo¡
(
M‘hodBa£
* 
m‘hod
)

861 
DoubË_t
 
»tuºV®
=-1;

864 ià(
fBoo¡Ty³
=="AdaBoo¡"è
»tuºV®
 = 
this
->
	`AdaBoo¡
 (
m‘hod
,1);

865 ià(
fBoo¡Ty³
=="R—lAdaBoo¡"è
»tuºV®
 = 
this
->
	`AdaBoo¡
 (
m‘hod
,0);

866 ià(
fBoo¡Ty³
=="Baggšg"è
»tuºV®
 = 
this
->
	`Baggšg
 ();

868 
	`Log
(è<< 
kFATAL
 << "<Boo¡> unknowÀboo¡ o±iÚ " << 
fBoo¡Ty³
<< " c®Ëd" << 
Endl
;

870 
fM‘hodWeight
.
	`push_back
(
»tuºV®
);

871  
»tuºV®
;

872 
	}
}

876 
DoubË_t
 
	gTMVA
::
M‘hodBoo¡
::
	$AdaBoo¡
(
M‘hodBa£
* 
m‘hod
, 
BoŞ_t
 
disü‘eAdaBoo¡
)

878 ià(!
m‘hod
) {

879 
	`Log
(è<< 
kWARNING
 << " AdaBoo¡ c®Ëd w™houˆşassif›¸»ã»nû -‚“ded fÜ c®cuÏtšg AdaBoo¡ " << 
Endl
;

883 
Flßt_t
 
w
,
v
; 
BoŞ_t
 
sig
=
kTRUE
;

884 
DoubË_t
 
sumAÎ
=0, 
sumWrÚg
=0;

885 
BoŞ_t
* 
WrÚgD‘eùiÚ
=
Ãw
 BoŞ_t[
	`G‘NEv’ts
()];

886 
QuickMVAProbE¡im©Ü
 *
MVAProb
=
NULL
;

888 ià(
disü‘eAdaBoo¡
) {

889 
	`FšdMVACut
(
m‘hod
);

890 
	`Log
(è<< 
kDEBUG
 << " individu® mv¨cuˆv®uğ" << 
m‘hod
->
	`G‘SigÇlReã»nûCut
(è<< 
Endl
;

892 
MVAProb
=
Ãw
 
TMVA
::
	`QuickMVAProbE¡im©Ü
();

899 
LÚg64_t
 
evt
=0;ƒvt<
	`G‘NEv’ts
();ƒvt++) {

900 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
evt
);

901 
MVAProb
->
	`AddEv’t
(
fMVAv®ues
->
	`©
(
evt
),
ev
->
	`G‘Weight
(),ev->
	`G‘CÏss
());

906 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++è
WrÚgD‘eùiÚ
[›vt]=
kTRUE
;

909 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

910 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

911 
sig
=
	`D©aInfo
().
	`IsSigÇl
(
ev
);

912 
v
 = 
fMVAv®ues
->
	`©
(
›vt
);

913 
w
 = 
ev
->
	`G‘Weight
();

914 
sumAÎ
 +ğ
w
;

915 if(!
	`IsS’tFe
())

917 ià(
fMÚ™ÜBoo¡edM‘hod
) {

918 ià(
sig
) {

919 
fBT¿šSigMVAHi¡
[
fCu¼’tM‘hodIdx
]->
	`Fl
(
v
,
w
);

920 
fT¿šSigMVAHi¡
[
fCu¼’tM‘hodIdx
]->
	`Fl
(
v
,
ev
->
	`G‘Origš®Weight
());

923 
fBT¿šBgdMVAHi¡
[
fCu¼’tM‘hodIdx
]->
	`Fl
(
v
,
w
);

924 
fT¿šBgdMVAHi¡
[
fCu¼’tM‘hodIdx
]->
	`Fl
(
v
,
ev
->
	`G‘Origš®Weight
());

929 ià(
disü‘eAdaBoo¡
){

930 ià(
sig
 =ğ
m‘hod
->
	`IsSigÇlLike
(
fMVAv®ues
->
	`©
(
›vt
))){

931 
WrÚgD‘eùiÚ
[
›vt
]=
kFALSE
;

933 
WrÚgD‘eùiÚ
[
›vt
]=
kTRUE
;

934 
sumWrÚg
+=
w
;

937 
DoubË_t
 
mvaProb
 = 
MVAProb
->
	`G‘MVAProbAt
((
Flßt_t
)
fMVAv®ues
->
	`©
(
›vt
));

938 
mvaProb
 = 2*(mvaProb-0.5);

939 
IÁ_t
 
ŒueTy³
;

940 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
ŒueTy³
 = 1;

941 
ŒueTy³
 = -1;

942 
sumWrÚg
+ğ
w
*
ŒueTy³
*
mvaProb
;

946 
fM‘hodE¼Ü
=
sumWrÚg
/
sumAÎ
;

951 
DoubË_t
 
boo¡Weight
=0;

953 ià(
fM‘hodE¼Ü
 == 0) {

954 
	`Log
(è<< 
kWARNING
 << "You¸şassif›¸wÜked…”ãùly oÀthŒaššg sam¶--> s”iou ov”Œaššgƒx³ùed‡nd‚Øboo¡šg dÚ" << 
Endl
;

957 ià(
disü‘eAdaBoo¡
)

958 
boo¡Weight
 = 
TM©h
::
	`Log
((1.-
fM‘hodE¼Ü
)/fM‘hodE¼Ü)*
fAdaBoo¡B‘a
;

960 
boo¡Weight
 = 
TM©h
::
	`Log
((1.+
fM‘hodE¼Ü
)/(1-fM‘hodE¼Ü))*
fAdaBoo¡B‘a
;

970 
DoubË_t
 
ÃwSum
=0., 
ŞdSum
=0.;

973 
DoubË_t
 
boo¡çùÜ
 = 
TM©h
::
	`Exp
(
boo¡Weight
);

976 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

977 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

978 
ŞdSum
 +ğ
ev
->
	`G‘Weight
();

979 ià(
disü‘eAdaBoo¡
){

981 ià(
WrÚgD‘eùiÚ
[
›vt
] && 
boo¡Weight
 != 0) {

982 ià(
ev
->
	`G‘Weight
(è> 0èev->
	`SÿËBoo¡Weight
(
boo¡çùÜ
);

983 
ev
->
	`SÿËBoo¡Weight
(1./
boo¡çùÜ
);

991 
DoubË_t
 
mvaProb
 = 
MVAProb
->
	`G‘MVAProbAt
((
Flßt_t
)
fMVAv®ues
->
	`©
(
›vt
));

992 
mvaProb
 = 2*(mvaProb-0.5);

995 
IÁ_t
 
ŒueTy³
=1;

996 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
ŒueTy³
 = 1;

997 
ŒueTy³
 = -1;

999 
boo¡çùÜ
 = 
TM©h
::
	`Exp
(-1*
boo¡Weight
*
ŒueTy³
*
mvaProb
);

1000 ià(
ev
->
	`G‘Weight
(è> 0èev->
	`SÿËBoo¡Weight
(
boo¡çùÜ
);

1001 
ev
->
	`SÿËBoo¡Weight
(1./
boo¡çùÜ
);

1004 
ÃwSum
 +ğ
ev
->
	`G‘Weight
();

1007 
DoubË_t
 
nÜmWeight
 = 
ŞdSum
/
ÃwSum
;

1009 
DoubË_t
 
nÜmSig
=0, 
nÜmBkg
=0;

1010 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1011 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

1012 
ev
->
	`SÿËBoo¡Weight
(
nÜmWeight
);

1013 ià(
ev
->
	`G‘CÏss
()è
nÜmSig
+óv->
	`G‘Weight
();

1014 
nÜmBkg
+=
ev
->
	`G‘Weight
();

1017 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

1018 
»suÉs
->
	`G‘Hi¡
("Sov”BtÙ®")->
	`S‘BšCÚ‹Á
(
fCu¼’tM‘hodIdx
+1, 
nÜmSig
/
nÜmBkg
);

1020 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1021 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

1023 ià(
ev
->
	`G‘CÏss
()èev->
	`SÿËBoo¡Weight
(
ŞdSum
/
nÜmSig
/2);

1024 
ev
->
	`SÿËBoo¡Weight
(
ŞdSum
/
nÜmBkg
/2);

1028 
d–‘e
[] 
WrÚgD‘eùiÚ
;

1029 ià(
MVAProb
è
d–‘e
 MVAProb;

1031 
fBoo¡Weight
 = 
boo¡Weight
;

1033  
boo¡Weight
;

1034 
	}
}

1040 
DoubË_t
 
	gTMVA
::
M‘hodBoo¡
::
	$Baggšg
()

1042 
TRªdom3
 *
Œªdom
 = 
Ãw
 
	`TRªdom3
(
fRªdomS“d
+
fM‘hods
.
	`size
());

1043 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1044 cÚ¡ 
Ev’t
* 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

1045 
ev
->
	`S‘Boo¡Weight
(
Œªdom
->
	`PoissÚD
(
fBaggedSam¶eF¿ùiÚ
));

1047 
fBoo¡Weight
 = 1;

1049 
	}
}

1058 
	gTMVA
::
M‘hodBoo¡
::
	$G‘H–pMes§ge
() const

1060 
	`Log
(è<< 
Endl
;

1061 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1062 
	`Log
(è<< 
Endl
;

1063 
	`Log
(è<< "Thi m‘hod combše £v”® cÏssif›¸oàÚ¥ec› š‡ "<<
Endl
;

1064 
	`Log
(è<< "sšgË muÉiv¬Ÿ‹ quªt™y vŸhboo¡‡lgÜ™hm." << 
Endl
;

1065 
	`Log
(è<< "thouuˆi ¨weigh‹d sum ov”‡Î individu® cÏssif›rs" <<
Endl
;

1066 
	`Log
(è<< "By deçuÉ,hAdaBoo¡ m‘hod i em¶oyed, which give " << 
Endl
;

1067 
	`Log
(è<< "ev’t th© w”misşassif›d iÀth´eviou Œ“‡†¬g” " << 
Endl
;

1068 
	`Log
(è<< "weighˆšhŒaššg oàthfŞlowšg cÏssif›r."<<
Endl
;

1069 
	`Log
(è<< "O±iÚ®ly, Bagged boo¡šg cª‡lsØb­¶›d." << 
Endl
;

1070 
	`Log
(è<< 
Endl
;

1071 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1072 
	`Log
(è<< 
Endl
;

1073 
	`Log
(è<< "Thmo¡ impÜÁ…¬am‘” iÀthcÚfigu¿tiÚ i th"<<
Endl
;

1074 
	`Log
(è<< "numb” oàboo¡ ­¶›d (Boo¡_Numèªdhchoiû oàboo¡šg"<<
Endl
;

1075 
	`Log
(è<< "(Boo¡_Ty³), which cª b£ˆtØe™h” AdaBoo¡ o¸Baggšg." << 
Endl
;

1076 
	`Log
(è<< "AdaBoo¡šg: Thmo¡ impÜÁ…¬am‘” šhi cÚfigu¿tiÚ" <<
Endl
;

1077 
	`Log
(è<< "i thb‘¨·¿m‘” (Boo¡_AdaBoo¡B‘aè " << 
Endl
;

1078 
	`Log
(è<< "Wh’ boo¡šg‡†š—¸şassif›r, iˆi som‘ime advªgeous"<<
Endl
;

1079 
	`Log
(è<< "tØŒªsfÜmhMVA ouuˆnÚ-lš—¾y. ThfŞlowšg o±iÚs" <<
Endl
;

1080 
	`Log
(è<< "¬avaabË: s‹p,†og,‡nd mšmax,hdeçuÉ i nØŒªsfÜm."<<
Endl
;

1081 
	`Log
(è<<
Endl
;

1082 
	`Log
(è<< "Somşassif›r ¬h¬dØboo¡‡nd dØnÙ im´ovmuch in"<<
Endl
;

1083 
	`Log
(è<< "theœ…”fÜmªû by boo¡šghem, somev’ slighy d‘”iÜ©e"<< 
Endl
;

1084 
	`Log
(è<< "dutØthboo¡šg." <<
Endl
;

1085 
	`Log
(è<< "Thbookšg oàthboo¡ m‘hod i ¥ecŸÈsšû iˆ»quœes"<<
Endl
;

1086 
	`Log
(è<< "thboošg oàthm‘hodØbboo¡ed‡ndhboo¡ it£lf."<<
Endl
;

1087 
	`Log
(è<< "Thi i sŞved by bookšghm‘hodØbboo¡ed‡ndØadd"<<
Endl
;

1088 
	`Log
(è<< "®ÈBoo¡…¬am‘”s, which‡Î begš w™h \"Boo¡_\"Øthe"<<
Endl
;

1089 
	`Log
(è<< "İtiÚ ¡ršg. ThçùÜy s•¬©e thİtiÚ ªd in™Ÿ‹s"<<
Endl
;

1090 
	`Log
(è<< "thboo¡…roûss. ThTMVA maüØdœeùÜy cÚš thexam¶e"<<
Endl
;

1091 
	`Log
(è<< "maüØ\"Boo¡.C\"" <<
Endl
;

1092 
	}
}

1096 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodBoo¡
::
	$C»©eRªkšg
()

1099 
	}
}

1104 
DoubË_t
 
	gTMVA
::
M‘hodBoo¡
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

1106 
DoubË_t
 
mvaV®ue
 = 0;

1107 
DoubË_t
 
nÜm
 = 0;

1108 
DoubË_t
 
•sÚ
 = 
TM©h
::
	`Exp
(-1.);

1110 
UIÁ_t
 
i
=0;i< 
fM‘hods
.
	`size
(); i++){

1111 
M‘hodBa£
* 
m
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
i
]);

1112 ià(
m
==0) ;

1113 
DoubË_t
 
v®
 = 
fTmpEv’t
 ? 
m
->
	`G‘MvaV®ue
(fTmpEvent) : m->GetMvaValue();

1114 
DoubË_t
 
sigcut
 = 
m
->
	`G‘SigÇlReã»nûCut
();

1117 ià(
fT¿nsfÜmSŒšg
 == "linear"){

1120 ià(
fT¿nsfÜmSŒšg
 == "log"){

1121 ià(
v®
 < 
sigcut
) val = sigcut;

1123 
v®
 = 
TM©h
::
	`Log
((v®-
sigcut
)+
•sÚ
);

1125 ià(
fT¿nsfÜmSŒšg
 == "step" ){

1126 ià(
m
->
	`IsSigÇlLike
(
v®
)) val = 1.;

1127 
v®
 = -1.;

1129 ià(
fT¿nsfÜmSŒšg
 == "gauss"){

1130 
v®
 = 
TM©h
::
	`Gaus
((v®-
sigcut
),1);

1133 
	`Log
(è<< 
kFATAL
 << "”rÜ unknowÀŒªsfÜm©iÚ " << 
fT¿nsfÜmSŒšg
<<
Endl
;

1135 
mvaV®ue
+=
v®
*
fM‘hodWeight
[
i
];

1136 
nÜm
 +=
fM‘hodWeight
[
i
];

1139 
mvaV®ue
/=
nÜm
;

1141 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

1143  
mvaV®ue
;

1144 
	}
}

1165 
DoubË_t
 
	gTMVA
::
M‘hodBoo¡
::
	$G‘Boo¡ROCIÁeg¿l
(
BoŞ_t
 
sšgËM‘hod
, 
Ty³s
::
ET»eTy³
 
eTT
, BoŞ_ˆ
C®cOv”ÏpIÁ”g¿l
)

1168 
	`D©a
()->
	`S‘Cu¼’tTy³
(
eTT
);

1170 
M‘hodBa£
* 
m‘hod
 = 
sšgËM‘hod
 ? 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
.
	`back
()) : 0;

1174 ià(
sšgËM‘hod
 && !
m‘hod
) {

1175 
	`Log
(è<< 
kFATAL
 << " What do you do? Your method:"

1176 << 
fM‘hods
.
	`back
()->
	`G‘Name
()

1178 << 
Endl
;

1179 
¡d
::
	`ex™
(1);

1181 
DoubË_t
 
”r
 = 0.0;

1186 
¡d
::
veùÜ
<
DoubË_t
> 
	`OldM‘hodWeight
(
fM‘hodWeight
);

1187 ià(!
sšgËM‘hod
) {

1189 
DoubË_t
 
AÎM‘hodsWeight
 = 0;

1190 
UIÁ_t
 
i
=0; i<=
fCu¼’tM‘hodIdx
; i++)

1191 
AÎM‘hodsWeight
 +ğ
fM‘hodWeight
.
	`©
(
i
);

1193 ià(
AÎM‘hodsWeight
 != 0.0) {

1194 
UIÁ_t
 
i
=0; i<=
fCu¼’tM‘hodIdx
; i++)

1195 
fM‘hodWeight
[
i
] /ğ
AÎM‘hodsWeight
;

1200 
DoubË_t
 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
, 
Äms
 = 10;

1201 
¡d
::
veùÜ
 <
Flßt_t
>* 
mvaRes
;

1202 ià(
sšgËM‘hod
 && 
eTT
==
Ty³s
::
kT¿ššg
)

1203 
mvaRes
 = 
fMVAv®ues
;

1205 
mvaRes
 = 
Ãw
 
¡d
::
veùÜ
 <
Flßt_t
>(
	`G‘NEv’ts
());

1206 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1207 
	`G‘Ev’t
(
›vt
);

1208 (*
mvaRes
)[
›vt
] = 
sšgËM‘hod
 ? 
m‘hod
->
	`G‘MvaV®ue
(&
”r
) : GetMvaValue(&err);

1213 ià(!
sšgËM‘hod
)

1214 
fM‘hodWeight
 = 
OldM‘hodWeight
;

1217 
IÁ_t
 
sigÇlCÏss
 = 0;

1218 ià(
	`D©aInfo
().
	`G‘CÏssInfo
("Signal") != 0) {

1219 
sigÇlCÏss
 = 
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

1221 
	`gToŞs
().
	`Compu‹St
Ğ
	`G‘Ev’tCŞËùiÚ
(
eTT
), 
mvaRes
,

1222 
m—nS
, 
m—nB
, 
rmsS
, 
rmsB
, 
xmš
, 
xmax
, 
sigÇlCÏss
 );

1224 
fNbšs
 = 
	`gCÚfig
().
fV¬ŸbËPlÙtšg
.
fNbšsXOfROCCurve
;

1225 
xmš
 = 
TM©h
::
	`Max
ĞTM©h::
	`Mš
(
m—nS
 - 
Äms
*
rmsS
, 
m—nB
 -‚rms*
rmsB
 ), xmin );

1226 
xmax
 = 
TM©h
::
	`Mš
ĞTM©h::
	`Max
(
m—nS
 + 
Äms
*
rmsS
, 
m—nB
 +‚rms*
rmsB
 ), xmax ) + 0.0001;

1229 
TH1
* 
mva_s
 = 
Ãw
 
	`TH1F
Ğ"MVA_S", "MVA_S", 
fNbšs
, 
xmš
, 
xmax
 );

1230 
TH1
* 
mva_b
 = 
Ãw
 
	`TH1F
Ğ"MVA_B", "MVA_B", 
fNbšs
, 
xmš
, 
xmax
 );

1231 
TH1
 *
mva_s_ov”Ïp
=0, *
mva_b_ov”Ïp
=0;

1232 ià(
C®cOv”ÏpIÁ”g¿l
) {

1233 
mva_s_ov”Ïp
 = 
Ãw
 
	`TH1F
Ğ"MVA_S_OVERLAP", "MVA_S_OVERLAP", 
fNbšs
, 
xmš
, 
xmax
 );

1234 
mva_b_ov”Ïp
 = 
Ãw
 
	`TH1F
Ğ"MVA_B_OVERLAP", "MVA_B_OVERLAP", 
fNbšs
, 
xmš
, 
xmax
 );

1236 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1237 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

1238 
Flßt_t
 
w
 = (
eTT
==
Ty³s
::
kTe¡šg
 ? 
ev
->
	`G‘Weight
(è:ƒv->
	`G‘Origš®Weight
());

1239 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
mva_s
->
	`Fl
Ğ(*
mvaRes
)[
›vt
], 
w
 );

1240 
mva_b
->
	`Fl
Ğ(*
mvaRes
)[
›vt
], 
w
 );

1242 ià(
C®cOv”ÏpIÁ”g¿l
) {

1243 
Flßt_t
 
w_ov
 = 
ev
->
	`G‘Weight
();

1244 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
))

1245 
mva_s_ov”Ïp
->
	`Fl
Ğ(*
mvaRes
)[
›vt
], 
w_ov
 );

1247 
mva_b_ov”Ïp
->
	`Fl
Ğ(*
mvaRes
)[
›vt
], 
w_ov
 );

1250 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_s
 );

1251 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_b
 );

1252 
PDF
 *
fS
 = 
Ãw
 
	`PDF
Ğ"PDF Sig", 
mva_s
, PDF::
kS¶še2
 );

1253 
PDF
 *
fB
 = 
Ãw
 
	`PDF
Ğ"PDF Bkg", 
mva_b
, PDF::
kS¶še2
 );

1256 
DoubË_t
 
ROC
 = 
M‘hodBa£
::
	`G‘ROCIÁeg¿l
(
fS
, 
fB
);

1259 ià(
C®cOv”ÏpIÁ”g¿l
) {

1260 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_s_ov”Ïp
 );

1261 
	`gToŞs
().
	`NÜmHi¡
Ğ
mva_b_ov”Ïp
 );

1263 
fOv”Ïp_š‹g¿l
 = 0.0;

1264 
IÁ_t
 
bš
=1; bš<=
mva_s_ov”Ïp
->
	`G‘NbšsX
(); bin++){

1265 
DoubË_t
 
bc_s
 = 
mva_s_ov”Ïp
->
	`G‘BšCÚ‹Á
(
bš
);

1266 
DoubË_t
 
bc_b
 = 
mva_b_ov”Ïp
->
	`G‘BšCÚ‹Á
(
bš
);

1267 ià(
bc_s
 > 0.0 && 
bc_b
 > 0.0)

1268 
fOv”Ïp_š‹g¿l
 +ğ
TM©h
::
	`Mš
(
bc_s
, 
bc_b
);

1271 
d–‘e
 
mva_s_ov”Ïp
;

1272 
d–‘e
 
mva_b_ov”Ïp
;

1275 
d–‘e
 
mva_s
;

1276 
d–‘e
 
mva_b
;

1277 
d–‘e
 
fS
;

1278 
d–‘e
 
fB
;

1279 ià(!(
sšgËM‘hod
 && 
eTT
==
Ty³s
::
kT¿ššg
)è
d–‘e
 
mvaRes
;

1281 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

1283  
ROC
;

1284 
	}
}

1286 
	gTMVA
::
M‘hodBoo¡
::
	$C®cMVAV®ues
()

1291 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

1292 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
.
	`back
());

1293 ià(!
m‘hod
) {

1294 
	`Log
(è<< 
kFATAL
 << "dyÇmiøÿ¡ØM‘hodBa£* faed" <<
Endl
;

1298 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1299 
	`G‘Ev’t
(
›vt
);

1300 
fMVAv®ues
->
	`©
(
›vt
èğ
m‘hod
->
	`G‘MvaV®ue
();

1306 
	}
}

1314 
	gTMVA
::
M‘hodBoo¡
::
	$MÚ™ÜBoo¡
Ğ
Ty³s
::
EBoo¡Sge
 
¡age
 , 
UIÁ_t
 
m‘hodIndex
 )

1316 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

1318 ià(
	`G‘Cu¼’tM‘hod
(
m‘hodIndex
)->
	`G‘M‘hodTy³
(è=ğ
TMVA
::
Ty³s
::
kDT
) {

1319 
TMVA
::
M‘hodDT
* 
cu¼’tDT
=
dyÇmic_ÿ¡
<TMVA::M‘hodDT*>(
	`G‘Cu¼’tM‘hod
(
m‘hodIndex
));

1320 ià(
cu¼’tDT
){

1321 ià(
¡age
 =ğ
Ty³s
::
kBoo¡ProcBegš
){

1322 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1I
("NodesBefÜePrunšg","node befÜ´unšg",
this
->
	`G‘Boo¡Num
(),0,this->GetBoostNum()),"NodesBeforePruning");

1323 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH1I
("NodesAá”Prunšg","node aá”…runšg",
this
->
	`G‘Boo¡Num
(),0,this->GetBoostNum()),"NodesAfterPruning");

1326 ià(
¡age
 =ğ
Ty³s
::
kBefÜeT¿ššg
){

1328 ià(
¡age
 =ğ
Ty³s
::
kBefÜeBoo¡šg
){

1329 
»suÉs
->
	`G‘Hi¡
("NodesBefÜePrunšg")->
	`S‘BšCÚ‹Á
(
m‘hodIndex
+1,
cu¼’tDT
->
	`G‘NNodesBefÜePrunšg
());

1330 
»suÉs
->
	`G‘Hi¡
("NodesAá”Prunšg")->
	`S‘BšCÚ‹Á
(
m‘hodIndex
+1,
cu¼’tDT
->
	`G‘NNodes
());

1332 ià(
¡age
 =ğ
Ty³s
::
kAá”Boo¡šg
){

1335 ià(
¡age
 !ğ
Ty³s
::
kBoo¡ProcEnd
){

1336 
	`Log
(è<< 
kINFO
 << "<Train>‡verage‚umber of‚odes before/after…runing : "

1337 << 
»suÉs
->
	`G‘Hi¡
("NodesBefÜePrunšg")->
	`G‘M—n
() << " / "

1338 << 
»suÉs
->
	`G‘Hi¡
("NodesAá”Prunšg")->
	`G‘M—n
()

1339 << 
Endl
;

1343 }ià(
	`G‘Cu¼’tM‘hod
(
m‘hodIndex
)->
	`G‘M‘hodTy³
(è=ğ
TMVA
::
Ty³s
::
kFish”
) {

1344 ià(
¡age
 =ğ
Ty³s
::
kAá”Boo¡šg
){

1345 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

1348 ià(
m‘hodIndex
 < 3){

1349 
	`Log
(è<< 
kDEBUG
 << "No detailed boost monitoring for "

1350 << 
	`G‘Cu¼’tM‘hod
(
m‘hodIndex
)->
	`G‘M‘hodName
()

1351 << " y‘‡vaabË " << 
Endl
;

1357 ià(
¡age
 =ğ
Ty³s
::
kBefÜeBoo¡šg
){

1359 ià(
fD‘aedMÚ™Üšg
){

1361 ià(
	`D©aInfo
().
	`G‘NV¬ŸbËs
() == 2) {

1362 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH2F
(
	`FÜm
("Ev’tDi¡Sig_%d",
m‘hodIndex
),Form("EventDistSig_%d",methodIndex),100,0,7,100,0,7));

1363 
»suÉs
->
	`G‘Hi¡
(
	`FÜm
("Ev’tDi¡Sig_%d",
m‘hodIndex
))->
	`S‘M¬k”CŞÜ
(4);

1364 
»suÉs
->
	`StÜe
(
Ãw
 
	`TH2F
(
	`FÜm
("Ev’tDi¡Bkg_%d",
m‘hodIndex
),Form("EventDistBkg_%d",methodIndex),100,0,7,100,0,7));

1365 
»suÉs
->
	`G‘Hi¡
(
	`FÜm
("Ev’tDi¡Bkg_%d",
m‘hodIndex
))->
	`S‘M¬k”CŞÜ
(2);

1367 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

1368 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1369 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

1370 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

1371 
Flßt_t
 
v0
ğ
ev
->
	`G‘V®ue
(0);

1372 
Flßt_t
 
v1
ğ
ev
->
	`G‘V®ue
(1);

1374 
TH2
* 
h
;

1375 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
h
=
»suÉs
->
	`G‘Hi¡2D
(
	`FÜm
("Ev’tDi¡Sig_%d",
m‘hodIndex
));

1376 
h
=
»suÉs
->
	`G‘Hi¡2D
(
	`FÜm
("Ev’tDi¡Bkg_%d",
m‘hodIndex
));

1377 ià(
h
èh->
	`Fl
(
v0
,
v1
,
w
);

1384 
	}
}

	@src/MethodCFMlpANN.cxx

64 
	~"TMVA/M‘hodCFMÍANN.h
"

66 
	~"TMVA/CÏssif›rFaùÜy.h
"

67 
	~"TMVA/CÚfigu¿bË.h
"

68 
	~"TMVA/D©aS‘.h
"

69 
	~"TMVA/D©aS‘Info.h
"

70 
	~"TMVA/IM‘hod.h
"

71 
	~"TMVA/M‘hodBa£.h
"

72 
	~"TMVA/M‘hodCFMÍANN_def.h
"

73 
	~"TMVA/MsgLogg”.h
"

74 
	~"TMVA/ToŞs.h
"

75 
	~"TMVA/Ty³s.h
"

77 
	~"TM©rix.h
"

78 
	~"TObjSŒšg.h
"

79 
	~"Rio¡»am.h
"

80 
	~"TM©h.h
"

82 
	~<c¡dlib
>

83 
	~<io¡»am
>

84 
	~<¡ršg
>

88 
	$REGISTER_METHOD
(
CFMÍANN
)

90 
usšg
 
¡d
::
¡ršg¡»am
;

91 
usšg
 
¡d
::
make_·œ
;

92 
usšg
 
¡d
::
©oi
;

94 
	`CÏssImp
(
TMVA
::
M‘hodCFMÍANN
);

132 
TMVA
::
M‘hodCFMÍANN
::
	$M‘hodCFMÍANN
ĞcÚ¡ 
TSŒšg
& 
jobName
,

133 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

134 
D©aS‘Info
& 
theD©a
,

135 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

136 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kCFMÍANN
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

137 
	`fD©a
(0),

138 
	`fCÏss
(0),

139 
	`fNÏy”s
(0),

140 
	`fNcyşes
(0),

141 
	`fNodes
(0),

142 
	`fYNN
(0),

143 
	$M‘hodCFMÍANN_n£l
(0)

145 
M‘hodCFMÍANN_Uts
::
	`S‘Logg”
(&
	`Log
());

146 
	}
}

151 
	gTMVA
::
M‘hodCFMÍANN
::
	$M‘hodCFMÍANN
Ğ
D©aS‘Info
& 
theD©a
,

152 cÚ¡ 
TSŒšg
& 
theWeightFe
):

153 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kCFMÍANN
, 
theD©a
, 
theWeightFe
),

154 
	`fD©a
(0),

155 
	`fCÏss
(0),

156 
	`fNÏy”s
(0),

157 
	`fNcyşes
(0),

158 
	`fNodes
(0),

159 
	`fYNN
(0),

160 
	$M‘hodCFMÍANN_n£l
(0)

162 
	}
}

167 
BoŞ_t
 
	gTMVA
::
M‘hodCFMÍANN
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

169 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

170  
kFALSE
;

171 
	}
}

178 
	gTMVA
::
M‘hodCFMÍANN
::
	$Deş¬eO±iÚs
()

180 
	`Deş¬eO±iÚRef
Ğ
fNcyşes
 =3000, "NCycles", "Number ofraining cycles" );

181 
	`Deş¬eO±iÚRef
Ğ
fLay”S³c
="N,N-1", "HiddenLayers", "Specification of hidden†ayer‡rchitecture" );

182 
	}
}

187 
	gTMVA
::
M‘hodCFMÍANN
::
	$ProûssO±iÚs
()

189 
fNodes
 = 
Ãw
 
IÁ_t
[20];

190 
fNÏy”s
 = 2;

191 
IÁ_t
 
cu¼’tHidd’Lay”
 = 1;

192 
TSŒšg
 
	`Ïy”S³c
(
fLay”S³c
);

193 
Ïy”S³c
.
	`L’gth
()>0) {

194 
TSŒšg
 
sToAdd
 = "";

195 ià(
Ïy”S³c
.
	`Fœ¡
(',')<0) {

196 
sToAdd
 = 
Ïy”S³c
;

197 
Ïy”S³c
 = "";

200 
sToAdd
 = 
	`Ïy”S³c
(0,
Ïy”S³c
.
	`Fœ¡
(','));

201 
Ïy”S³c
 = 
	`Ïy”S³c
Öay”S³c.
	`Fœ¡
(',')+1,Ïy”S³c.
	`L’gth
());

203 
IÁ_t
 
nNodes
 = 0;

204 ià(
sToAdd
.
	`BegšsW™h
("N"è|| sToAdd.BegšsW™h("n")è{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`G‘Nv¬
(); }

205 
nNodes
 +ğ
	`©oi
(
sToAdd
);

206 
fNodes
[
cu¼’tHidd’Lay”
++] = 
nNodes
;

207 
fNÏy”s
++;

209 
fNodes
[0] = 
	`G‘Nv¬
();

210 
fNodes
[
fNÏy”s
-1] = 2;

212 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

213 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot yet‡vailable for method: "

214 << 
	`G‘M‘hodTy³Name
()

216 << 
Endl
;

219 
	`Log
(è<< 
kINFO
 << "Use configuration (nodes…er†ayer): in=";

220 
IÁ_t
 
i
=0; i<
fNÏy”s
-1; i++è
	`Log
(è<< 
kINFO
 << 
fNodes
[i] << ":";

221 
	`Log
(è<< 
kINFO
 << 
fNodes
[
fNÏy”s
-1] << "=out" << 
Endl
;

224 
	`Log
(è<< "U£ " << 
fNcyşes
 << "¿ššg cyşes" << 
Endl
;

226 
IÁ_t
 
nEvtT¿š
 = 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

229 ià(
nEvtT¿š
>0) {

232 
fD©a
 = 
Ãw
 
	`TM©rix
Ğ
nEvtT¿š
, 
	`G‘Nv¬
() );

233 
fCÏss
 = 
Ãw
 
¡d
::
veùÜ
<
IÁ_t
>Ğ
nEvtT¿š
 );

237 
UIÁ_t
 
iv¬
;

238 
IÁ_t
 
›vt
=0; ievt<
nEvtT¿š
; ievt++) {

239 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
›vt
);

242 (*
fCÏss
)[
›vt
] = 
	`D©aInfo
().
	`IsSigÇl
(
ev
) ? 1 : 2;

245 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

246 (*
fD©a
)Ğ
›vt
, 
iv¬
 ) = 
ev
->
	`G‘V®ue
(ivar);

254 
	}
}

259 
	gTMVA
::
M‘hodCFMÍANN
::
	$In™
( )

262 
	`S‘NÜm®i£d
Ğ
kTRUE
 );

265 
M‘hodCFMÍANN_n£l
 = 0;

266 
	}
}

271 
	gTMVA
::
M‘hodCFMÍANN
::~
	$M‘hodCFMÍANN
( )

273 
d–‘e
 
fD©a
;

274 
d–‘e
 
fCÏss
;

275 
d–‘e
[] 
fNodes
;

277 ià(
fYNN
!=0) {

278 
IÁ_t
 
i
=0; i<
fNÏy”s
; i++è
d–‘e
[] 
fYNN
[i];

279 
d–‘e
[] 
fYNN
;

280 
fYNN
=0;

282 
	}
}

287 
	gTMVA
::
M‘hodCFMÍANN
::
	$T¿š
( )

289 
DoubË_t
 
	`dumD©
(0);

290 
IÁ_t
 
	`Á¿š
(
	`D©a
()->
	`G‘NT¿ššgEv’ts
());

291 
IÁ_t
 
	`Áe¡
(0);

292 
IÁ_t
 
	`nv¬
(
	`G‘Nv¬
());

293 
IÁ_t
 
	`Æay”s
(
fNÏy”s
);

294 
IÁ_t
 *
nodes
 = 
Ãw
 IÁ_t[
Æay”s
];

295 
IÁ_t
 
	`ncyşes
(
fNcyşes
);

297 
IÁ_t
 
i
=0; i<
Æay”s
; i++è
nodes
[i] = 
fNodes
[i];

299 ià(
fYNN
 != 0) {

300 
IÁ_t
 
i
=0; i<
fNÏy”s
; i++è
d–‘e
[] 
fYNN
[i];

301 
d–‘e
[] 
fYNN
;

302 
fYNN
 = 0;

304 
fYNN
 = 
Ãw
 
DoubË_t
*[
Æay”s
];

305 
IÁ_t
 
Ïy”
=0;†ay”<
Æay”s
;†ayer++)

306 
fYNN
[
Ïy”
] = 
Ãw
 
DoubË_t
[
fNodes
[layer]];

309 #iâdeà
R__WIN32


310 
	`T¿š_Â
Ğ&
dumD©
, &dumD©, &
Á¿š
, &
Áe¡
, &
nv¬
, &
Æay”s
, 
nodes
, &
ncyşes
 );

312 
	`Log
(è<< 
kWARNING
 << "<T¿š> sÜry CFMÍANN dÛ nÙ„uÀÚ Wšdows" << 
Endl
;

315 
d–‘e
 [] 
nodes
;

317 
	`Ex™FromT¿ššg
();

318 
	}
}

323 
DoubË_t
 
	gTMVA
::
M‘hodCFMÍANN
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

325 
BoŞ_t
 
isOK
 = 
kTRUE
;

327 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

330 
¡d
::
veùÜ
<
DoubË_t
> 
	`šputVec
Ğ
	`G‘Nv¬
() );

331 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è
šputVec
[iv¬] = 
ev
->
	`G‘V®ue
(ivar);

333 
DoubË_t
 
myMVA
 = 
	`Ev®ANN
Ğ
šputVec
, 
isOK
 );

334 ià(!
isOK
è
	`Log
(è<< 
kFATAL
 << "Ev®ANN„‘uº (!isOKèfÜƒv’ˆ" << 
Endl
;

337 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

339  
myMVA
;

340 
	}
}

345 
DoubË_t
 
	gTMVA
::
M‘hodCFMÍANN
::
Ev®ANN
Ğ
¡d
::
veùÜ
<DoubË_t>& 
šV¬
, 
BoŞ_t
& 
isOK
 )

348 
DoubË_t
* 
	gx“v
 = 
Ãw
 DoubË_t[
G‘Nv¬
()];

349 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); iv¬++è
	gx“v
[
iv¬
] = 
šV¬
[ivar];

352 
	gisOK
 = 
kTRUE
;

353 
UIÁ_t
 
	gjv¬
=0; jv¬<
G‘Nv¬
(); jvar++) {

355 ià(
	gfV¬n_1
.
	gxmax
[
jv¬
] < 
	gx“v
[jv¬]èx“v[jv¬] = 
fV¬n_1
.
xmax
[jvar];

356 ià(
	gfV¬n_1
.
	gxmš
[
jv¬
] > 
	gx“v
[jv¬]èx“v[jv¬] = 
fV¬n_1
.
xmš
[jvar];

357 ià(
	gfV¬n_1
.
	gxmax
[
jv¬
] =ğ
fV¬n_1
.
xmš
[jvar]) {

358 
isOK
 = 
kFALSE
;

359 
	gx“v
[
jv¬
] = 0;

362 
	gx“v
[
jv¬
] = 
x“v
[jv¬] - ((
fV¬n_1
.
xmax
[jv¬] + fV¬n_1.
xmš
[jvar])/2);

363 
	gx“v
[
jv¬
] = 
x“v
[jv¬] / ((
fV¬n_1
.
xmax
[jv¬] - fV¬n_1.
xmš
[jvar])/2);

367 
NN_ava
Ğ
x“v
 );

369 
DoubË_t
 
	g»tv®
 = 0.5*(1.0 + 
fYNN
[
fP¬am_1
.
Ïy”m
-1][0]);

371 
	gd–‘e
 [] 
	gx“v
;

373  
	g»tv®
;

379 
	gTMVA
::
M‘hodCFMÍANN
::
	$NN_ava
Ğ
DoubË_t
* 
x“v
 )

381 
IÁ_t
 
iv¬
=0; iv¬<
fNeur_1
.
ÃurÚ
[0]; iv¬++è
fYNN
[0][iv¬] = 
x“v
[ivar];

383 
IÁ_t
 
Ïy”
=1;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

384 
IÁ_t
 
j
=1; j<=
fNeur_1
.
ÃurÚ
[
Ïy”
]; j++) {

386 
DoubË_t
 
x
 = 
	`Ww_»f
(
fNeur_1
.
ww
, 
Ïy”
+1,
j
);

388 
IÁ_t
 
k
=1; k<=
fNeur_1
.
ÃurÚ
[
Ïy”
-1]; k++) {

389 
x
 +ğ
fYNN
[
Ïy”
-1][
k
-1]*
	`W_»f
(
fNeur_1
.
w
,†ay”+1, 
j
, k);

391 
fYNN
[
Ïy”
][
j
-1] = 
	`NN_fÚc
ĞÏy”, 
x
 );

394 
	}
}

399 
DoubË_t
 
	gTMVA
::
M‘hodCFMÍANN
::
	$NN_fÚc
Ğ
IÁ_t
 
i
, 
DoubË_t
 
u
 ) const

401 
DoubË_t
 
	`f
(0);

403 ià(
u
/
fD–_1
.
‹mp
[
i
] > 170è
f
 = +1;

404 ià(
u
/
fD–_1
.
‹mp
[
i
] < -170è
f
 = -1;

406 
DoubË_t
 
yy
 = 
TM©h
::
	`Exp
(-
u
/
fD–_1
.
‹mp
[
i
]);

407 
f
 = (1 - 
yy
)/(1 + yy);

410  
f
;

411 
	}
}

416 
	gTMVA
::
M‘hodCFMÍANN
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & 
i¡r
 )

418 
TSŒšg
 
v¬
;

421 
UIÁ_t
 
	`nva
(0), 
	`lşass
(0);

422 
i¡r
 >> 
nva
 >> 
lşass
;

424 ià(
	`G‘Nv¬
(è!ğ
nva
)

425 
	`Log
(è<< 
kFATAL
 << "<R—dWeightsFromFe> mism©ch iÀnumb” oàv¬ŸbËs" << 
Endl
;

428 ià(
lşass
 != 2)

429 
	`Log
(è<< 
kFATAL
 << "<R—dWeightsFromFe> mism©ch iÀnumb” oàşas£s" << 
Endl
;

432 ià(
i¡r
.
	`eof
( ))

433 
	`Log
(è<< 
kFATAL
 << "<R—dWeightsFromSŒ—m>„—ched EOF…»m©u»ly " << 
Endl
;

436 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

437 
i¡r
 >> 
fV¬n_1
.
xmax
[
iv¬
] >> fV¬n_1.
xmš
[ivar];

440 
i¡r
 >> 
fP¬am_1
.
Ïy”m
;

442 ià(
fYNN
 != 0) {

443 
IÁ_t
 
i
=0; i<
fNÏy”s
; i++è
d–‘e
[] 
fYNN
[i];

444 
d–‘e
[] 
fYNN
;

445 
fYNN
 = 0;

447 
fYNN
 = 
Ãw
 
DoubË_t
*[
fP¬am_1
.
Ïy”m
];

448 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

451 
i¡r
 >> 
fNeur_1
.
ÃurÚ
[
Ïy”
];

452 
fYNN
[
Ïy”
] = 
Ãw
 
DoubË_t
[
fNeur_1
.
ÃurÚ
[layer]];

456 cÚ¡ 
IÁ_t
 
	`nch¬
( 100 );

457 * 
dumch¬
 = 
Ãw
 [
nch¬
];

460 
IÁ_t
 
Ïy”
=1;†ay”<=
fP¬am_1
.
Ïy”m
-1;†ayer++) {

462 
IÁ_t
 
nq
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
]/10;

463 
IÁ_t
 
Ä
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
] - 
nq
*10;

465 
IÁ_t
 
	`kk
(0);

466 ià(
Ä
==0è
kk
 = 
nq
;

467 
kk
 = 
nq
+1;

469 
IÁ_t
 
k
=1; k<=
kk
; k++) {

470 
IÁ_t
 
jmš
 = 10*
k
 - 9;

471 
IÁ_t
 
jmax
 = 10*
k
;

472 ià(
fNeur_1
.
ÃurÚ
[
Ïy”
]<
jmax
) jmax = fNeur_1.neuron[layer];

473 
IÁ_t
 
j
=
jmš
; j<=
jmax
; j++) {

474 
i¡r
 >> 
	`Ww_»f
(
fNeur_1
.
ww
, 
Ïy”
+1, 
j
);

476 
IÁ_t
 
i
=1; i<=
fNeur_1
.
ÃurÚ
[
Ïy”
-1]; i++) {

477 
IÁ_t
 
j
=
jmš
; j<=
jmax
; j++) {

478 
i¡r
 >> 
	`W_»f
(
fNeur_1
.
w
, 
Ïy”
+1, 
j
, 
i
);

482 
i¡r
.
	`g‘lše
Ğ
dumch¬
, 
nch¬
 );

486 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

489 
i¡r
.
	`g‘lše
Ğ
dumch¬
, 
nch¬
 );

490 
i¡r
.
	`g‘lše
Ğ
dumch¬
, 
nch¬
 );

492 
i¡r
 >> 
fD–_1
.
‹mp
[
Ïy”
];

496 ià((
IÁ_t
)
	`G‘Nv¬
(è!ğ
fNeur_1
.
ÃurÚ
[0]) {

497 
	`Log
(è<< 
kFATAL
 << "<ReadWeightsFromFile> mismatch in zeroth†ayer:"

498 << 
	`G‘Nv¬
(è<< " " << 
fNeur_1
.
ÃurÚ
[0] << 
Endl
;

501 
fNÏy”s
 = 
fP¬am_1
.
Ïy”m
;

502 
d–‘e
[] 
dumch¬
;

503 
	}
}

508 
IÁ_t
 
	gTMVA
::
M‘hodCFMÍANN
::
	$D©aIÁ”çû
Ğ
DoubË_t
* , Double_t* ,

509 
IÁ_t
* , Int_t* ,

510 
IÁ_t
* , IÁ_t* 
nv¬
,

511 
DoubË_t
* 
xpg
, 
IÁ_t
* 
işass
, IÁ_t* 
ik’d
 )

514 *
ik’d
 = 0;

518 ià(0 =ğ
xpg
) {

519 
	`Log
(è<< 
kFATAL
 << "ERROR iÀM‘hodCFMÍANN_D©aIÁ”çû z”Øpoš‹¸xpg" << 
Endl
;

521 ià(*
nv¬
 !ğ(
IÁ_t
)
this
->
	`G‘Nv¬
()) {

522 
	`Log
(è<< 
kFATAL
 << "ERROR in MethodCFMlpANN_DataInterface mismatch in‚um of variables: "

523 << *
nv¬
 << " " << 
this
->
	`G‘Nv¬
(è<< 
Endl
;

527 *
işass
 = ()
this
->
	`G‘CÏss
Ğ
M‘hodCFMÍANN_n£l
 );

528 
UIÁ_t
 
iv¬
=0; iv¬<
this
->
	`G‘Nv¬
(); ivar++)

529 
xpg
[
iv¬
] = ()
this
->
	`G‘D©a
Ğ
M‘hodCFMÍANN_n£l
, ivar );

531 ++
M‘hodCFMÍANN_n£l
;

534 
	}
}

539 
	gTMVA
::
M‘hodCFMÍANN
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

541 *
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

542 
	`gToŞs
().
	`AddA‰r
(
wght
,"NV¬s",
fP¬am_1
.
nv¬
);

543 
	`gToŞs
().
	`AddA‰r
(
wght
,"NCÏs£s",
fP¬am_1
.
lşass
);

544 
	`gToŞs
().
	`AddA‰r
(
wght
,"NLay”s",
fP¬am_1
.
Ïy”m
);

545 * 
mšmaxnode
 = 
	`gToŞs
().
	`AddChd
(
wght
, "VarMinMax");

546 
¡ršg¡»am
 
s
;

547 
s
.
	`´ecisiÚ
( 16 );

548 
IÁ_t
 
iv¬
=0; iv¬<
fP¬am_1
.
nv¬
; ivar++)

549 
s
 << 
¡d
::
sc›Áific
 << 
fV¬n_1
.
xmš
[
iv¬
] << " " << fV¬n_1.
xmax
[ivar] << " ";

550 
	`gToŞs
().
	`AddRawLše
Ğ
mšmaxnode
, 
s
.
	`¡r
().
	`c_¡r
() );

551 * 
ÃurÚs
 = 
	`gToŞs
().
	`AddChd
(
wght
, "NNeurons");

552 
¡ršg¡»am
 
n
;

553 
n
.
	`´ecisiÚ
( 16 );

554 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++)

555 
n
 << 
¡d
::
sc›Áific
 << 
fNeur_1
.
ÃurÚ
[
Ïy”
] << " ";

556 
	`gToŞs
().
	`AddRawLše
Ğ
ÃurÚs
, 
n
.
	`¡r
().
	`c_¡r
() );

557 
IÁ_t
 
Ïy”
=1;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

558 * 
Ïy”node
 = 
	`gToŞs
().
	`AddChd
(
wght
, "Lay”"+gToŞs().
	`SŒšgFromIÁ
(
Ïy”
));

559 
	`gToŞs
().
	`AddA‰r
(
Ïy”node
,"NNeurÚs",
fNeur_1
.
ÃurÚ
[
Ïy”
]);

560 * 
ÃurÚnode
=
NULL
;

561 
IÁ_t
 
ÃurÚ
=0;‚eurÚ<
fNeur_1
.ÃurÚ[
Ïy”
];‚euron++) {

562 
ÃurÚnode
 = 
	`gToŞs
().
	`AddChd
(
Ïy”node
,"NeurÚ"+gToŞs().
	`SŒšgFromIÁ
(
ÃurÚ
));

563 
¡ršg¡»am
 
weights
;

564 
weights
.
	`´ecisiÚ
( 16 );

565 
weights
 << 
¡d
::
sc›Áific
 << 
	`Ww_»f
(
fNeur_1
.
ww
, 
Ïy”
+1, 
ÃurÚ
+1);

566 
IÁ_t
 
i
=0; i<
fNeur_1
.
ÃurÚ
[
Ïy”
-1]; i++) {

567 
weights
 << " " << 
¡d
::
sc›Áific
 << 
	`W_»f
(
fNeur_1
.
w
, 
Ïy”
+1, 
ÃurÚ
+1, 
i
+1);

569 
	`gToŞs
().
	`AddRawLše
Ğ
ÃurÚnode
, 
weights
.
	`¡r
().
	`c_¡r
() );

572 * 
‹m²ode
 = 
	`gToŞs
().
	`AddChd
(
wght
, "LayerTemp");

573 
¡ršg¡»am
 
‹mp
;

574 
‹mp
.
	`´ecisiÚ
( 16 );

575 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

576 
‹mp
 << 
¡d
::
sc›Áific
 << 
fD–_1
.‹mp[
Ïy”
] << " ";

578 
	`gToŞs
().
	`AddRawLše
(
‹m²ode
, 
‹mp
.
	`¡r
().
	`c_¡r
() );

579 
	}
}

583 
	gTMVA
::
M‘hodCFMÍANN
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

585 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NLay”s",
fP¬am_1
.
Ïy”m
 );

586 * 
mšmaxnode
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

587 cÚ¡ * 
mšmaxcÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
mšmaxnode
);

588 
¡ršg¡»am
 
	`cÚ‹Á
(
mšmaxcÚ‹Á
);

589 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

590 
cÚ‹Á
 >> 
fV¬n_1
.
xmš
[
iv¬
] >> fV¬n_1.
xmax
[ivar];

591 ià(
fYNN
 != 0) {

592 
IÁ_t
 
i
=0; i<
fNÏy”s
; i++è
d–‘e
[] 
fYNN
[i];

593 
d–‘e
[] 
fYNN
;

594 
fYNN
 = 0;

596 
fYNN
 = 
Ãw
 
DoubË_t
*[
fP¬am_1
.
Ïy”m
];

597 *
Ïy”node
=
	`gToŞs
().
	`G‘NextChd
(
mšmaxnode
);

598 cÚ¡ * 
ÃurÚscÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
Ïy”node
);

599 
¡ršg¡»am
 
	`ncÚ‹Á
(
ÃurÚscÚ‹Á
);

600 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

603 
ncÚ‹Á
 >> 
fNeur_1
.
ÃurÚ
[
Ïy”
];

604 
fYNN
[
Ïy”
] = 
Ãw
 
DoubË_t
[
fNeur_1
.
ÃurÚ
[layer]];

606 
IÁ_t
 
Ïy”
=1;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

607 
Ïy”node
=
	`gToŞs
().
	`G‘NextChd
(layernode);

608 * 
ÃurÚnode
=
NULL
;

609 
ÃurÚnode
 = 
	`gToŞs
().
	`G‘Chd
(
Ïy”node
);

610 
IÁ_t
 
ÃurÚ
=0;‚eurÚ<
fNeur_1
.ÃurÚ[
Ïy”
];‚euron++) {

611 cÚ¡ * 
ÃurÚweights
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
ÃurÚnode
);

612 
¡ršg¡»am
 
	`weights
(
ÃurÚweights
);

613 
weights
 >> 
	`Ww_»f
(
fNeur_1
.
ww
, 
Ïy”
+1, 
ÃurÚ
+1);

614 
IÁ_t
 
i
=0; i<
fNeur_1
.
ÃurÚ
[
Ïy”
-1]; i++) {

615 
weights
 >> 
	`W_»f
(
fNeur_1
.
w
, 
Ïy”
+1, 
ÃurÚ
+1, 
i
+1);

617 
ÃurÚnode
=
	`gToŞs
().
	`G‘NextChd
(neuronnode);

620 * 
‹m²ode
=
	`gToŞs
().
	`G‘NextChd
(
Ïy”node
);

621 cÚ¡ * 
‹mp
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
‹m²ode
);

622 
¡ršg¡»am
 
	`t
(
‹mp
);

623 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

624 
t
 >> 
fD–_1
.
‹mp
[
Ïy”
];

626 
fNÏy”s
 = 
fP¬am_1
.
Ïy”m
;

627 
	}
}

632 
	gTMVA
::
M‘hodCFMÍANN
::
	$PrštWeights
Ğ
¡d
::
o¡»am
 & 
o
 ) const

635 
o
 << "Numb” oàv¬ " << 
fP¬am_1
.
nv¬
 << 
¡d
::
’dl
;

636 
o
 << "Ouuˆnode  " << 
fP¬am_1
.
lşass
 << 
¡d
::
’dl
;

639 
IÁ_t
 
iv¬
=0; iv¬<
fP¬am_1
.
nv¬
; ivar++)

640 
o
 << "V¬ " << 
iv¬
 << " [" << 
fV¬n_1
.
xmš
[iv¬] << " - " << fV¬n_1.
xmax
[iv¬] << "]" << 
¡d
::
’dl
;

643 
o
 << "Numb” oàÏy” " << 
fP¬am_1
.
Ïy”m
 << 
¡d
::
’dl
;

645 
o
 << "Nodes…er†ayer ";

646 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++)

648 
o
 << 
fNeur_1
.
ÃurÚ
[
Ïy”
] << " ";

649 
o
 << 
¡d
::
’dl
;

652 
IÁ_t
 
Ïy”
=1;†ay”<=
fP¬am_1
.
Ïy”m
-1;†ayer++) {

654 
IÁ_t
 
nq
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
]/10;

655 
IÁ_t
 
Ä
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
] - 
nq
*10;

657 
IÁ_t
 
	`kk
(0);

658 ià(
Ä
==0è
kk
 = 
nq
;

659 
kk
 = 
nq
+1;

661 
IÁ_t
 
k
=1; k<=
kk
; k++) {

662 
IÁ_t
 
jmš
 = 10*
k
 - 9;

663 
IÁ_t
 
jmax
 = 10*
k
;

664 
IÁ_t
 
i
, 
j
;

665 ià(
fNeur_1
.
ÃurÚ
[
Ïy”
]<
jmax
) jmax = fNeur_1.neuron[layer];

666 
j
=
jmš
; j<=
jmax
; j++) {

669 
o
 << 
	`Ww_»f
(
fNeur_1
.
ww
, 
Ïy”
+1, 
j
) << " ";

672 
o
 << 
¡d
::
’dl
;

674 
i
=1; i<=
fNeur_1
.
ÃurÚ
[
Ïy”
-1]; i++) {

675 
j
=
jmš
; j<=
jmax
; j++) {

677 
o
 << 
	`W_»f
(
fNeur_1
.
w
, 
Ïy”
+1, 
j
, 
i
) << " ";

679 
o
 << 
¡d
::
’dl
;

683 
o
 << 
¡d
::
’dl
;

686 
IÁ_t
 
Ïy”
=0;†ay”<
fP¬am_1
.
Ïy”m
;†ayer++) {

687 
o
 << "D–.‹m°š†ay” " << 
Ïy”
 << " : " << 
fD–_1
.
‹mp
[Ïy”] << 
¡d
::
’dl
;

689 
	}
}

693 
	gTMVA
::
M‘hodCFMÍANN
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

696 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

697 
fout
 << "};" << 
¡d
::
’dl
;

698 
	}
}

703 
	gTMVA
::
M‘hodCFMÍANN
::
	$MakeCÏssS³cificH—d”
Ğ
¡d
::
o¡»am
& , cÚ¡ 
TSŒšg
& ) const

705 
	}
}

713 
	gTMVA
::
M‘hodCFMÍANN
::
	$G‘H–pMes§ge
() const

715 
	`Log
(è<< 
Endl
;

716 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

717 
	`Log
(è<< 
Endl
;

718 
	`Log
(è<< "<NÚe>" << 
Endl
;

719 
	`Log
(è<< 
Endl
;

720 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

721 
	`Log
(è<< 
Endl
;

722 
	`Log
(è<< "<NÚe>" << 
Endl
;

723 
	`Log
(è<< 
Endl
;

724 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

725 
	`Log
(è<< 
Endl
;

726 
	`Log
(è<< "<NÚe>" << 
Endl
;

727 
	}
}

	@src/MethodCFMlpANN_Utils.cxx

62 
	~<¡ršg
>

63 
	~<io¡»am
>

64 
	~<c¡dlib
>

66 
	~"TM©h.h
"

67 
	~"TSŒšg.h
"

69 
	~"TMVA/M‘hodCFMÍANN_Uts.h
"

70 
	~"TMVA/MsgLogg”.h
"

71 
	~"TMVA/Tim”.h
"

72 
	~"TMVA/Ty³s.h
"

74 
usšg
 
	g¡d
::
cout
;

75 
usšg
 
	g¡d
::
’dl
;

77 
CÏssImp
(
TMVA
::
M‘hodCFMÍANN_Uts
);

79 cÚ¡ 
IÁ_t
 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
fg_max_nV¬_
 = 
max_nV¬_
;

80 cÚ¡ 
IÁ_t
 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
fg_max_nNodes_
 = 
max_nNodes_
;

81 cÚ¡ * cÚ¡ 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
fg_M‘hodName
 = "--- CFMlpANN ";

86 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$M‘hodCFMÍANN_Uts
():
	`fg_100
(100),

87 
	`fg_0
(0),

88 
	$fg_999
(999)

90 
IÁ_t
 
	`i
(0);

91 
i
=0; i<
max_nV¬_
;++iè
fV¬n_1
.
xmš
[i] = 0;

92 
fCo¡_1
.
ªcout
 = 0;

93 
fCo¡_1
.
›ps
 = 0;

94 
fCo¡_1
.
tŞcou
 = 0;

96 
i
=0; i<
max_nNodes_
;++iè
fD–_1
.
cÛf
[i] = 0;

97 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fD–_1
.
d–
[i] = 0;

98 
i
=0; i<
max_nLay”s_
*
max_nNodes_
*max_nNodes_;++iè
fD–_1
.
d–
[i] = 0;

99 
i
=0; i<
max_nLay”s_
*
max_nNodes_
*max_nNodes_;++iè
fD–_1
.
d–w
[i] = 0;

100 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fD–_1
.
d–ww
[i] = 0;

101 
fD–_1
.
demš
 = 0;

102 
fD–_1
.
demax
 = 0;

103 
fD–_1
.
idde
 = 0;

104 
i
=0; i<
max_nLay”s_
;++iè
fD–_1
.
‹mp
[i] = 0;

106 
i
=0; i<
max_nNodes_
;++iè
fNeur_1
.
cut
[i] = 0;

107 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fNeur_1
.
d–ww
[i] = 0;

108 
i
=0; i<
max_nLay”s_
;++iè
fNeur_1
.
ÃurÚ
[i] = 0;

109 
i
=0; i<
max_nNodes_
;++iè
fNeur_1
.
o
[i] = 0;

110 
i
=0; i<
max_nLay”s_
*
max_nNodes_
*max_nNodes_;++iè
fNeur_1
.
w
[i] = 0;

111 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fNeur_1
.
ww
[i] = 0;

112 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fNeur_1
.
x
[i] = 0;

113 
i
=0; i<
max_nLay”s_
*
max_nNodes_
;++iè
fNeur_1
.
y
[i] = 0;

115 
fP¬am_1
.
“ps
 = 0;

116 
fP¬am_1
.
•smš
 = 0;

117 
fP¬am_1
.
•smax
 = 0;

118 
fP¬am_1
.
‘a
 = 0;

119 
fP¬am_1
.
ichoi
 = 0;

120 
fP¬am_1
.
™e¡
 = 0;

121 
fP¬am_1
.
Ïy”m
 = 0;

122 
fP¬am_1
.
lşass
 = 0;

123 
fP¬am_1
.
nbË¬n
 = 0;

124 
fP¬am_1
.
ndiv
 = 0;

125 
fP¬am_1
.
ndivis
 = 0;

126 
fP¬am_1
.
Ãvl
 = 0;

127 
fP¬am_1
.
Ãvt
 = 0;

128 
fP¬am_1
.
nuÇp
 = 0;

129 
fP¬am_1
.
nunec
 = 0;

130 
fP¬am_1
.
nunishÜt
 = 0;

131 
fP¬am_1
.
nunisÜ
 = 0;

132 
fP¬am_1
.
nv¬
 = 0;

134 
fV¬n_1
.
işass
 = 0;

135 
i
=0; i<
max_Ev’ts_
;++iè
fV¬n_1
.
mşass
[i] = 0;

136 
i
=0; i<
max_Ev’ts_
;++iè
fV¬n_1
.
nşass
[i] = 0;

137 
i
=0; i<
max_nV¬_
;++iè
fV¬n_1
.
xmax
[i] = 0;

139 
fLogg”
 = 0;

140 
	}
}

145 
	gTMVA
::
M‘hodCFMÍANN_Uts
::~
	$M‘hodCFMÍANN_Uts
()

147 
	}
}

151 
TMVA
::
M‘hodCFMÍANN_Uts
::
	$T¿š_Â
Ğ
DoubË_t
 *
tš2
, DoubË_ˆ*
tout2
, 
IÁ_t
 *
Á¿š
,

152 
IÁ_t
 *
Áe¡
, IÁ_ˆ*
nv¬2
, IÁ_ˆ*
Æay”
,

153 
IÁ_t
 *
nodes
, IÁ_ˆ*
ncyşe
 )

158 ià(*
Á¿š
 + *
Áe¡
 > 
max_Ev’ts_
) {

159 
	`´štf
( "*** CFMlpANN_f2c: Warning in Train_nn:‚umber ofraining +esting" \

161 *
Á¿š
 = *Á¿š*(
max_Ev’ts_
/(*Á¿š + *
Áe¡
));

162 *
Áe¡
 = *Áe¡ *(
max_Ev’ts_
/(*
Á¿š
 + *ntest));

164 ià(*
nv¬2
 > 
max_nV¬_
) {

165 
	`´štf
( "*** CFMlpANN_f2c: ERROR in Train_nn:‚umber of variables" \

167 
¡d
::
	`ex™
(1);

169 ià(*
Æay”
 > 
max_nLay”s_
) {

170 
	`´štf
( "*** CFMlpANN_f2c: Warning in Train_nn:‚umber of†ayers" \

172 *
Æay”
 = 
max_nLay”s_
;

174 ià(*
nodes
 > 
max_nNodes_
) {

175 
	`´štf
( "*** CFMlpANN_f2c: Warning in Train_nn:‚umber of‚odes" \

177 *
nodes
 = 
max_nNodes_
;

181 
fV¬n2_1
.
	`C»©e
Ğ*
Á¿š
 + *
Áe¡
, *
nv¬2
 );

182 
fV¬n3_1
.
	`C»©e
Ğ*
Á¿š
 + *
Áe¡
, *
nv¬2
 );

185 
d‘
[20];

187 
	`EÁ»e_Ãw
(
nv¬2
, 
d‘
, 
Á¿š
, 
Áe¡
, 
Æay”
, 
nodes
, 
ncyşe
, (
IÁ_t
)20);

188 ià(
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1] == 1) {

190 
fP¬am_1
.
lşass
 = 2;

194 
fP¬am_1
.
lşass
 = 
fNeur_1
.
ÃurÚ
[fP¬am_1.
Ïy”m
 - 1];

196 
fP¬am_1
.
nv¬
 = 
fNeur_1
.
ÃurÚ
[0];

197 
	`Te¡NN
();

198 
	`IÂ™
(
d‘
, 
tout2
, 
tš2
, (
IÁ_t
)20);

201 
fV¬n2_1
.
	`D–‘e
();

202 
fV¬n3_1
.
	`D–‘e
();

203 
	}
}

207 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$EÁ»e_Ãw
Ğ
IÁ_t
 *, *, IÁ_ˆ*
Á¿š
,

208 
IÁ_t
 *
Áe¡
, IÁ_ˆ*
numÏy”
, IÁ_ˆ*
nodes
,

209 
IÁ_t
 *
numcyşe
, Int_t )

212 
IÁ_t
 
i__1
;

214 
IÁ_t
 
»wr™e
, 
i__
, 
j
, 
ncÛf
;

215 
IÁ_t
 
Áemp
, 
num
, 
»Œaš
;

222 
fCo¡_1
.
ªcout
 = 1e30;

225 
»Œaš
 = 0;

226 
»wr™e
 = 1000;

227 
i__
 = 1; i__ <ğ
max_nNodes_
; ++i__) {

228 
fD–_1
.
cÛf
[
i__
 - 1] = (
Flßt_t
)0.;

230 
i__
 = 1; i__ <ğ
max_nLay”s_
; ++i__) {

231 
fD–_1
.
‹mp
[
i__
 - 1] = (
Flßt_t
)0.;

233 
fP¬am_1
.
Ïy”m
 = *
numÏy”
;

234 ià(
fP¬am_1
.
Ïy”m
 > 
max_nLay”s_
) {

235 
	`´štf
("Error:‚umber of†ayersƒxceeds maximum: %i, %i ==>‡bort",

236 
fP¬am_1
.
Ïy”m
, 
max_nLay”s_
 );

237 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

239 
fP¬am_1
.
Ãvl
 = *
Á¿š
;

240 
fP¬am_1
.
Ãvt
 = *
Áe¡
;

241 
fP¬am_1
.
nbË¬n
 = *
numcyşe
;

242 
fV¬n_1
.
işass
 = 2;

243 
fP¬am_1
.
nunec
 = 10;

244 
fP¬am_1
.
•smš
 = 1e-10;

245 
fP¬am_1
.
•smax
 = 1e-4;

246 
fP¬am_1
.
‘a
 = .5;

247 
fCo¡_1
.
tŞcou
 = 1e-6;

248 
fCo¡_1
.
›ps
 = 2;

249 
fP¬am_1
.
nunisÜ
 = 30;

250 
fP¬am_1
.
nunishÜt
 = 48;

251 
fP¬am_1
.
nuÇp
 = 40;

253 
	`ULog
(è<< 
kINFO
 << "TÙ®‚umb” oàev’t fÜ¿ššg: " << 
fP¬am_1
.
Ãvl
 << 
Endl
;

254 
	`ULog
(è<< 
kINFO
 << "TÙ®‚umb” oàŒaššg cyşe  : " << 
fP¬am_1
.
nbË¬n
 << 
Endl
;

255 ià(
fP¬am_1
.
Ãvl
 > 
max_Ev’ts_
) {

256 
	`´štf
("Error:‚umber of†earningƒventsƒxceeds maximum: %i, %i ==>‡bort",

257 
fP¬am_1
.
Ãvl
, 
max_Ev’ts_
 );

258 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

260 ià(
fP¬am_1
.
Ãvt
 > 
max_Ev’ts_
) {

261 
	`´štf
("Error:‚umber ofestingƒventsƒxceeds maximum: %i, %i ==>‡bort",

262 
fP¬am_1
.
Ãvt
, 
max_Ev’ts_
 );

263 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

265 
i__1
 = 
fP¬am_1
.
Ïy”m
;

266 
j
 = 1; j <ğ
i__1
; ++j) {

267 
num
 = 
nodes
[
j
-1];

268 ià(
num
 < 2) {

269 
num
 = 2;

271 ià(
j
 =ğ
fP¬am_1
.
Ïy”m
 && 
num
 != 2) {

272 
num
 = 2;

274 
fNeur_1
.
ÃurÚ
[
j
 - 1] = 
num
;

276 
i__1
 = 
fP¬am_1
.
Ïy”m
;

277 
j
 = 1; j <ğ
i__1
; ++j) {

278 
	`ULog
(è<< 
kINFO
 << "Numb” oàÏy” fÜ‚eurÚ(" << 
j
 << "): " << 
fNeur_1
.
ÃurÚ
[j - 1] << 
Endl
;

280 ià(
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1] != 2) {

281 
	`´štf
("Error: wrong‚umber of classes‡t output†ayer: %i != 2 ==>‡bort\n",

282 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1]);

283 
	`A¼‘
("stop");

285 
i__1
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

286 
j
 = 1; j <ğ
i__1
; ++j) {

287 
fD–_1
.
cÛf
[
j
 - 1] = 1.;

289 
i__1
 = 
fP¬am_1
.
Ïy”m
;

290 
j
 = 1; j <ğ
i__1
; ++j) {

291 
fD–_1
.
‹mp
[
j
 - 1] = 1.;

293 
fP¬am_1
.
ichoi
 = 
»Œaš
;

294 
fP¬am_1
.
ndivis
 = 
»wr™e
;

295 
fD–_1
.
idde
 = 1;

296 ià(! (
fP¬am_1
.
ichoi
 == 0 || fParam_1.ichoi == 1)) {

297 
	`´štf
( "Bigroubles !!! \n" );

298 
	`A¼‘
("newraining or continued one !");

300 ià(
fP¬am_1
.
ichoi
 == 0) {

301 
	`ULog
(è<< 
kINFO
 << "New¿ššg wÈb³rfÜmed" << 
Endl
;

304 
	`´štf
("%s: New¿ššg wÈbcÚtšued from‡ weighˆfe\n", 
fg_M‘hodName
);

306 
ncÛf
 = 0;

307 
Áemp
 = 0;

308 
i__
 = 1; i__ <ğ
max_nNodes_
; ++i__) {

309 ià(
fD–_1
.
cÛf
[
i__
 - 1] !ğ(
Flßt_t
)0.) {

310 ++
ncÛf
;

313 
i__
 = 1; i__ <ğ
max_nLay”s_
; ++i__) {

314 ià(
fD–_1
.
‹mp
[
i__
 - 1] !ğ(
Flßt_t
)0.) {

315 ++
Áemp
;

318 ià(
ncÛf
 !ğ
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1]) {

319 
	`A¼‘
("ƒntreeƒrror code 1 :‚eedo„eported");

321 ià(
Áemp
 !ğ
fP¬am_1
.
Ïy”m
) {

322 
	`A¼‘
("entreeƒrror code 2 :‚eedo„eported");

324 
	}
}

326 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

327 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

332 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Wši
()

334 
IÁ_t
 
i__1
, 
i__2
, 
i__3
;

335 
IÁ_t
 
i__
, 
j
;

336 
IÁ_t
 
Ïy”
;

338 
i__1
 = 
fP¬am_1
.
Ïy”m
;

339 
Ïy”
 = 2;†ay” <ğ
i__1
; ++layer) {

340 
i__2
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
 - 2];

341 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

342 
i__3
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
 - 1];

343 
j
 = 1; j <ğ
i__3
; ++j) {

344 
	`w_»f
(
Ïy”
, 
j
, 
i__
èğ(
	`S’3a
() * 2. - 1.) * .2;

345 
	`ww_»f
(
Ïy”
, 
j
èğ(
	`S’3a
() * 2. - 1.) * .2;

349 
	}
}

351 #undeà
ww_»f


352 #undeà
w_»f


354 
	#x“v_»f
(
a_1
,
a_2
è
	`fV¬n2_1
×_1,a_2)

	)

355 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

356 
	#x_»f
(
a_1
,
a_2
è
fNeur_1
.
x
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

357 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

358 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

363 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$En_avªt
(
IÁ_t
 *
›v’t
)

365 
IÁ_t
 
i__1
, 
i__2
, 
i__3
;

367 
DoubË_t
 
f
;

368 
IÁ_t
 
i__
, 
j
;

369 
IÁ_t
 
Ïy”
;

371 
i__1
 = 
fNeur_1
.
ÃurÚ
[0];

372 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

373 
	`y_»f
(1, 
i__
èğ
	`x“v_»f
(*
›v’t
, i__);

375 
i__1
 = 
fP¬am_1
.
Ïy”m
 - 1;

376 
Ïy”
 = 1;†ay” <ğ
i__1
; ++layer) {

377 
i__2
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
];

378 
j
 = 1; j <ğ
i__2
; ++j) {

379 
	`x_»f
(
Ïy”
 + 1, 
j
) = 0.;

380 
i__3
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
 - 1];

381 
i__
 = 1; i__ <ğ
i__3
; ++i__) {

382 
	`x_»f
(
Ïy”
 + 1, 
j
èğĞx_»fÖay” + 1, jè+ 
	`y_»f
Öay”, 
i__
)

383 * 
	`w_»f
(
Ïy”
 + 1, 
j
, 
i__
) );

385 
	`x_»f
(
Ïy”
 + 1, 
j
èğx_»fÖay” + 1, jè+ 
	`ww_»f
(layer + 1, j);

386 
i__3
 = 
Ïy”
 + 1;

387 
	`FÚcf
(&
i__3
, &
	`x_»f
(
Ïy”
 + 1, 
j
), &
f
);

388 
	`y_»f
(
Ïy”
 + 1, 
j
èğ
f
;

391 
	}
}

393 #undeà
ww_»f


394 #undeà
y_»f


395 #undeà
x_»f


396 #undeà
w_»f


397 #undeà
x“v_»f


399 
	#x“v_»f
(
a_1
,
a_2
è
	`fV¬n2_1
×_1,a_2)

	)

404 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Leş—º
Ğ
IÁ_t
 *
k‹¡
, 
DoubË_t
 *
tout2
, DoubË_ˆ*
tš2
 )

406 
IÁ_t
 
i__1
, 
i__2
;

408 
IÁ_t
 
i__
, 
j
, 
k
, 
l
;

409 
IÁ_t
 
noşa
[
max_nNodes_
], 
ik’d
;

410 
DoubË_t
 
xpg
[
max_nV¬_
];

412 *
k‹¡
 = 0;

413 
i__1
 = 
fP¬am_1
.
lşass
;

414 
k
 = 1; k <ğ
i__1
; ++k) {

415 
noşa
[
k
 - 1] = 0;

417 
i__1
 = 
fP¬am_1
.
nv¬
;

418 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

419 
fV¬n_1
.
xmš
[
i__
 - 1] = 1e30;

420 
fV¬n_1
.
xmax
[
i__
 - 1] = -fV¬n_1.
xmš
[i__ - 1];

422 
i__1
 = 
fP¬am_1
.
Ãvl
;

423 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

424 
	`D©aIÁ”çû
(
tout2
, 
tš2
, &
fg_100
, &
fg_0
, &
fP¬am_1
.
Ãvl
, &fP¬am_1.
nv¬
,

425 
xpg
, &
fV¬n_1
.
nşass
[
i__
 - 1], &
ik’d
);

426 ià(
ik’d
 == -1) {

430 
	`CŞËùV¬
(&
fP¬am_1
.
nv¬
, &
fV¬n_1
.
nşass
[
i__
 - 1], 
xpg
);

432 
i__2
 = 
fP¬am_1
.
nv¬
;

433 
j
 = 1; j <ğ
i__2
; ++j) {

434 
	`x“v_»f
(
i__
, 
j
èğ
xpg
[j - 1];

436 ià(
fV¬n_1
.
işass
 == 1) {

437 
i__2
 = 
fP¬am_1
.
lşass
;

438 
k
 = 1; k <ğ
i__2
; ++k) {

439 ià(
fV¬n_1
.
nşass
[
i__
 - 1] =ğ
k
) {

440 ++
noşa
[
k
 - 1];

444 
i__2
 = 
fP¬am_1
.
nv¬
;

445 
k
 = 1; k <ğ
i__2
; ++k) {

446 ià(
	`x“v_»f
(
i__
, 
k
è< 
fV¬n_1
.
xmš
[k - 1]) {

447 
fV¬n_1
.
xmš
[
k
 - 1] = 
	`x“v_»f
(
i__
, k);

449 ià(
	`x“v_»f
(
i__
, 
k
è> 
fV¬n_1
.
xmax
[k - 1]) {

450 
fV¬n_1
.
xmax
[
k
 - 1] = 
	`x“v_»f
(
i__
, k);

455 ià(
fV¬n_1
.
işass
 == 1) {

456 
i__2
 = 
fP¬am_1
.
lşass
;

457 
k
 = 1; k <ğ
i__2
; ++k) {

458 
i__1
 = 
fP¬am_1
.
lşass
;

459 
l
 = 1;† <ğ
i__1
; ++l) {

460 ià(
noşa
[
k
 - 1] !ğnoşa[
l
 - 1]) {

461 *
k‹¡
 = 1;

466 
i__1
 = 
fP¬am_1
.
Ãvl
;

467 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

468 
i__2
 = 
fP¬am_1
.
nv¬
;

469 
l
 = 1;† <ğ
i__2
; ++l) {

470 ià(
fV¬n_1
.
xmax
[
l
 - 1] =ğ(
Flßt_t
)0. && fV¬n_1.
xmš
[l - 1] == (

471 
Flßt_t
)0.) {

472 
	`x“v_»f
(
i__
, 
l
èğ(
Flßt_t
)0.;

475 
	`x“v_»f
(
i__
, 
l
èğx“v_»f(i__,†è- (
fV¬n_1
.
xmax
[l - 1] +

476 
fV¬n_1
.
xmš
[
l
 - 1]) / 2.;

477 
	`x“v_»f
(
i__
, 
l
èğx“v_»f(i__,†è/ ((
fV¬n_1
.
xmax
[l - 1] -

478 
fV¬n_1
.
xmš
[
l
 - 1]) / 2.);

482 
	}
}

484 #undeà
x“v_»f


486 
	#d–w_»f
(
a_1
,
a_2
,
a_3
è
fD–_1
.
d–w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

487 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

488 
	#x_»f
(
a_1
,
a_2
è
fNeur_1
.
x
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

489 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

490 
	#d–_»f
(
a_1
,
a_2
,
a_3
è
fD–_1
.
d–
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

491 
	#d–ww_»f
(
a_1
,
a_2
è
fD–_1
.
d–ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

492 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

493 
	#d–_»f
(
a_1
,
a_2
è
fD–_1
.
d–
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

494 
	#d–ww_»f
(
a_1
,
a_2
è
fNeur_1
.
d–ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

499 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$En_¬r›»
Ğ
IÁ_t
 *
›v’t
 )

501 
IÁ_t
 
i__1
, 
i__2
, 
i__3
;

503 
DoubË_t
 
f
;

504 
IÁ_t
 
i__
, 
j
, 
k
, 
l
;

505 
DoubË_t
 
df
, 
uu
;

507 
i__1
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

508 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

509 ià(
fV¬n_1
.
nşass
[*
›v’t
 - 1] =ğ
i__
) {

510 
fNeur_1
.
o
[
i__
 - 1] = 1.;

513 
fNeur_1
.
o
[
i__
 - 1] = -1.;

516 
l
 = 
fP¬am_1
.
Ïy”m
;

517 
i__1
 = 
fNeur_1
.
ÃurÚ
[
l
 - 1];

518 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

519 
f
 = 
	`y_»f
(
l
, 
i__
);

520 
df
 = (
f
 + 1.è* (1. - fè/ (
fD–_1
.
‹mp
[
l
 - 1] * 2.);

521 
	`d–_»f
(
l
, 
i__
èğ
df
 * (
fNeur_1
.
o
[i__ - 1] - 
	`y_»f
(l, i__)) *

522 
fD–_1
.
cÛf
[
i__
 - 1];

523 
	`d–ww_»f
(
l
, 
i__
èğ
fP¬am_1
.
“ps
 * 
	`d–_»f
(l, i__);

524 
i__2
 = 
fNeur_1
.
ÃurÚ
[
l
 - 2];

525 
j
 = 1; j <ğ
i__2
; ++j) {

526 
	`d–w_»f
(
l
, 
i__
, 
j
èğ
fP¬am_1
.
“ps
 * 
	`d–_»f
Ö, i__è* 
	`y_»f
(l -

527 1, 
j
);

531 
l
 = 
fP¬am_1
.
Ïy”m
 - 1;† >= 2; --l) {

532 
i__2
 = 
fNeur_1
.
ÃurÚ
[
l
 - 1];

533 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

534 
uu
 = 0.;

535 
i__1
 = 
fNeur_1
.
ÃurÚ
[
l
];

536 
k
 = 1; k <ğ
i__1
; ++k) {

537 
uu
 +ğ
	`w_»f
(
l
 + 1, 
k
, 
i__
è* 
	`d–_»f
(l + 1, k);

539 
	`FÚcf
(&
l
, &
	`x_»f
Ö, 
i__
), &
f
);

540 
df
 = (
f
 + 1.è* (1. - fè/ (
fD–_1
.
‹mp
[
l
 - 1] * 2.);

541 
	`d–_»f
(
l
, 
i__
èğ
df
 * 
uu
;

542 
	`d–ww_»f
(
l
, 
i__
èğ
fP¬am_1
.
“ps
 * 
	`d–_»f
(l, i__);

543 
i__1
 = 
fNeur_1
.
ÃurÚ
[
l
 - 2];

544 
j
 = 1; j <ğ
i__1
; ++j) {

545 
	`d–w_»f
(
l
, 
i__
, 
j
èğ
fP¬am_1
.
“ps
 * 
	`d–_»f
Ö, i__è* 
	`y_»f
(

546 
l
 - 1, 
j
);

550 
i__1
 = 
fP¬am_1
.
Ïy”m
;

551 
l
 = 2;† <ğ
i__1
; ++l) {

552 
i__2
 = 
fNeur_1
.
ÃurÚ
[
l
 - 1];

553 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

554 
	`d–ww_»f
(
l
, 
i__
èğ
	`d–ww_»f
Ö, i__è+ 
fP¬am_1
.
‘a
 *

555 
	`d–ww_»f
(
l
, 
i__
);

556 
	`ww_»f
(
l
, 
i__
èğww_»fÖ, i__è+ 
	`d–ww_»f
(l, i__);

557 
i__3
 = 
fNeur_1
.
ÃurÚ
[
l
 - 2];

558 
j
 = 1; j <ğ
i__3
; ++j) {

559 
	`d–_»f
(
l
, 
i__
, 
j
èğ
	`d–w_»f
Ö, i__, jè+ 
fP¬am_1
.
‘a
 *

560 
	`d–_»f
(
l
, 
i__
, 
j
);

561 
	`w_»f
(
l
, 
i__
, 
j
èğw_»fÖ, i__, jè+ 
	`d–_»f
(l, i__, j);

565 
	}
}

567 #undeà
d–ww_»f


568 #undeà
d–_»f


569 #undeà
ww_»f


570 #undeà
d–ww_»f


571 #undeà
d–_»f


572 #undeà
y_»f


573 #undeà
x_»f


574 #undeà
w_»f


575 #undeà
d–w_»f


577 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

578 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

582 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Out
Ğ
IÁ_t
 *
iii
, IÁ_ˆ*
maxcyşe
 )

586 ià(*
iii
 =ğ*
maxcyşe
) {

589 
	}
}

591 #undeà
ww_»f


592 #undeà
w_»f


594 
	#d–_»f
(
a_1
,
a_2
,
a_3
è
fD–_1
.
d–
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

595 
	#d–ww_»f
(
a_1
,
a_2
è
fNeur_1
.
d–ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

599 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$IÂ™
Ğ*
d‘
, 
DoubË_t
 *
tout2
, DoubË_ˆ*
tš2
, 
IÁ_t
 )

602 
IÁ_t
 
i__1
, 
i__2
, 
i__3
;

604 
IÁ_t
 
i__
, 
j
;

605 
IÁ_t
 
Ãvod
, 
Ïy”
, 
k‹¡
, 
i1
, 
Äe¡
;

606 
IÁ_t
 
	`›v’t
(0);

607 
IÁ_t
 
kkk
;

608 
DoubË_t
 
xxx
 = 0.0, 
yyy
 = 0.0;

610 
	`Leş—º
(&
k‹¡
, 
tout2
, 
tš2
);

611 
	`Leûv2
(&
k‹¡
, 
tout2
, 
tš2
);

612 ià(
k‹¡
 == 1) {

613 
	`´štf
( " .... strangeo be here (1) ... \n");

614 
¡d
::
	`ex™
(1);

616 
i__1
 = 
fP¬am_1
.
Ïy”m
 - 1;

617 
Ïy”
 = 1;†ay” <ğ
i__1
; ++layer) {

618 
i__2
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
];

619 
j
 = 1; j <ğ
i__2
; ++j) {

620 
	`d–ww_»f
(
Ïy”
 + 1, 
j
) = 0.;

621 
i__3
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
 - 1];

622 
i__
 = 1; i__ <ğ
i__3
; ++i__) {

623 
	`d–_»f
(
Ïy”
 + 1, 
j
, 
i__
) = 0.;

627 ià(
fP¬am_1
.
ichoi
 == 1) {

628 
	`IÆ
();

631 
	`Wši
();

633 
kkk
 = 0;

634 
i__3
 = 
fP¬am_1
.
nbË¬n
;

635 
Tim”
 
	`tim”
Ğ
i__3
, "CFMlpANN" );

636 
IÁ_t
 
num
 = 
i__3
/100;

638 
i1
 = 1; i1 <ğ
i__3
; ++i1) {

640 iàĞĞ
num
>0 && (
i1
-1)%num =ğ0è|| (i1 =ğ
i__3
èè
tim”
.
	`D¿wProg»ssB¬
( i1-1 );

642 
i__2
 = 
fP¬am_1
.
Ãvl
;

643 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

644 ++
kkk
;

645 ià(
fCo¡_1
.
›ps
 == 2) {

646 
fP¬am_1
.
“ps
 = 
	`Fdeüoi
(&
kkk
);

648 ià(
fCo¡_1
.
›ps
 == 1) {

649 
fP¬am_1
.
“ps
 = fP¬am_1.
•smš
;

651 
BoŞ_t
 
doCÚt
 = 
kTRUE
;

652 ià(
fV¬n_1
.
işass
 == 2) {

653 
›v’t
 = (
IÁ_t
è((
DoubË_t
è
fP¬am_1
.
Ãvl
 * 
	`S’3a
());

654 ià(
›v’t
 == 0) {

655 
doCÚt
 = 
kFALSE
;

658 ià(
doCÚt
) {

659 ià(
fV¬n_1
.
işass
 == 1) {

660 
Ãvod
 = 
fP¬am_1
.
Ãvl
 / fP¬am_1.
lşass
;

661 
Äe¡
 = 
i__
 % 
fP¬am_1
.
lşass
;

662 
fP¬am_1
.
ndiv
 = 
i__
 / fP¬am_1.
lşass
;

663 ià(
Äe¡
 != 0) {

664 
›v’t
 = 
fP¬am_1
.
ndiv
 + 1 + (fP¬am_1.
lşass
 - 
Äe¡
) *

665 
Ãvod
;

668 
›v’t
 = 
fP¬am_1
.
ndiv
;

671 
	`En_avªt
(&
›v’t
);

672 
	`En_¬r›»
(&
›v’t
);

675 
yyy
 = 0.;

676 ià(
i1
 % 
fP¬am_1
.
ndivis
 =ğ0 || i1 =ğ1 || i1 =ğfP¬am_1.
nbË¬n
) {

677 
	`Cout
(&
i1
, &
xxx
);

678 
	`Cout2
(&
i1
, &
yyy
);

679 
	`G¿phNN
(&
i1
, &
xxx
, &
yyy
, 
d‘
, (
IÁ_t
)20);

680 
	`Out
(&
i1
, &
fP¬am_1
.
nbË¬n
);

682 ià(
xxx
 < 
fCo¡_1
.
tŞcou
) {

683 
	`G¿phNN
(&
fP¬am_1
.
nbË¬n
, &
xxx
, &
yyy
, 
d‘
, (
IÁ_t
)20);

684 
	`Out
(&
fP¬am_1
.
nbË¬n
, &fParam_1.nblearn);

688 
	}
}

690 #undeà
d–ww_»f


691 #undeà
d–_»f


696 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Te¡NN
()

698 
IÁ_t
 
i__1
;

700 
IÁ_t
 
i__
;

701 
IÁ_t
 
k‹¡
;

703 
k‹¡
 = 0;

704 ià(
fP¬am_1
.
Ïy”m
 > 
max_nLay”s_
) {

705 
k‹¡
 = 1;

706 
	`´štf
("Error:‚umber of†ayersƒxceeds maximum: %i, %i ==>‡bort",

707 
fP¬am_1
.
Ïy”m
, 
max_nLay”s_
 );

708 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

710 ià(
fP¬am_1
.
Ãvl
 > 
max_Ev’ts_
) {

711 
k‹¡
 = 1;

712 
	`´štf
("Error:‚umber ofrainingƒventsƒxceeds maximum: %i, %i ==>‡bort",

713 
fP¬am_1
.
Ãvl
, 
max_Ev’ts_
 );

714 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

716 ià(
fP¬am_1
.
Ãvt
 > 
max_Ev’ts_
) {

717 
	`´štf
("Error:‚umber ofestingƒventsƒxceeds maximum: %i, %i ==>‡bort",

718 
fP¬am_1
.
Ãvt
, 
max_Ev’ts_
 );

719 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded ");

721 ià(
fP¬am_1
.
lşass
 < 
fNeur_1
.
ÃurÚ
[fP¬am_1.
Ïy”m
 - 1]) {

722 
k‹¡
 = 1;

723 
	`´štf
("Error: wrong‚umber of classes‡t ouput†ayer: %i != %i ==>‡bort\n",

724 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1], fP¬am_1.
lşass
);

725 
	`A¼‘
("problem‚eedso„eported ");

727 ià(
fP¬am_1
.
nv¬
 > 
max_nV¬_
) {

728 
k‹¡
 = 1;

729 
	`´štf
("Error:‚umber of variablesƒxceeds maximum: %i, %i ==>‡bort",

730 
fP¬am_1
.
nv¬
, 
fg_max_nV¬_
 );

731 
	`A¼‘
("modification of mlpl3_param_lim.inc is‚eeded");

733 
i__1
 = 
fP¬am_1
.
Ïy”m
;

734 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

735 ià(
fNeur_1
.
ÃurÚ
[
i__
 - 1] > 
max_nNodes_
) {

736 
k‹¡
 = 1;

737 
	`´štf
("Error:‚umber of‚eurons‡t†ayerƒxceeds maximum: %i, %i ==>‡bort",

738 
i__
, 
fg_max_nNodes_
 );

741 ià(
k‹¡
 == 1) {

742 
	`´štf
( " .... strangeo be here (2) ... \n");

743 
¡d
::
	`ex™
(1);

745 
	}
}

747 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

752 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Cout
Ğ
IÁ_t
 * , 
DoubË_t
 *
xxx
 )

754 
IÁ_t
 
i__1
, 
i__2
;

755 
DoubË_t
 
d__1
;

757 
DoubË_t
 
c__
;

758 
IÁ_t
 
i__
, 
j
;

760 
c__
 = 0.;

761 
i__1
 = 
fP¬am_1
.
Ãvl
;

762 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

763 
	`En_avªt
(&
i__
);

764 
i__2
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

765 
j
 = 1; j <ğ
i__2
; ++j) {

766 ià(
fV¬n_1
.
nşass
[
i__
 - 1] =ğ
j
) {

767 
fNeur_1
.
o
[
j
 - 1] = 1.;

770 
fNeur_1
.
o
[
j
 - 1] = -1.;

773 
d__1
 = 
	`y_»f
(
fP¬am_1
.
Ïy”m
, 
j
è- 
fNeur_1
.
o
[j - 1];

774 
c__
 +ğ
fD–_1
.
cÛf
[
j
 - 1] * (
d__1
 * d__1);

777 
c__
 /ğ(
DoubË_t
è(
fP¬am_1
.
Ãvl
 * fP¬am_1.
lşass
) * 2.;

778 *
xxx
 = 
c__
;

779 
fCo¡_1
.
ªcout
 = 
c__
;

780 
	}
}

782 #undeà
y_»f


784 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

785 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

790 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$IÆ
()

792 
IÁ_t
 
i__1
, 
i__2
;

794 
IÁ_t
 
jmax
, 
k
, 
Ïy”
, 
kk
, 
nq
, 
Ä
;

796 
i__1
 = 
fP¬am_1
.
nv¬
;

797 
i__1
 = 
fP¬am_1
.
Ïy”m
;

798 
i__1
 = 
fP¬am_1
.
Ïy”m
 - 1;

799 
Ïy”
 = 1;†ay” <ğ
i__1
; ++layer) {

800 
nq
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
] / 10;

801 
Ä
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
] - 
nq
 * 10;

802 ià(
Ä
 == 0) {

803 
kk
 = 
nq
;

806 
kk
 = 
nq
 + 1;

808 
i__2
 = 
kk
;

809 
k
 = 1; k <ğ
i__2
; ++k) {

811 
jmax
 = 
k
 * 10;

812 ià(
fNeur_1
.
ÃurÚ
[
Ïy”
] < 
jmax
) {

813 
jmax
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
];

818 
	}
}

820 #undeà
ww_»f


821 #undeà
w_»f


826 
DoubË_t
 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Fdeüoi
Ğ
IÁ_t
 *
i__
 )

828 
DoubË_t
 
»t_v®
;

830 
DoubË_t
 
¯a
, 
bbb
;

832 
¯a
 = (
fP¬am_1
.
•smš
 - fP¬am_1.
•smax
è/ (
DoubË_t
è(fP¬am_1.
nbË¬n
 *

833 
fP¬am_1
.
Ãvl
 - 1);

834 
bbb
 = 
fP¬am_1
.
•smax
 - 
¯a
;

835 
»t_v®
 = 
¯a
 * (
DoubË_t
è(*
i__
è+ 
bbb
;

836  
»t_v®
;

837 
	}
}

839 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

844 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$G¿phNN
Ğ
IÁ_t
 *
—º
, 
DoubË_t
 * ,

845 
DoubË_t
 * , * , 
IÁ_t
 )

847 
IÁ_t
 
i__1
, 
i__2
;

849 
DoubË_t
 
xmok
[
max_nNodes_
];

851 
DoubË_t
 
xmko
[
max_nNodes_
];

852 
IÁ_t
 
i__
, 
j
;

853 
IÁ_t
 
ix
;

856 
IÁ_t
 
nko
[
max_nNodes_
], 
nok
[max_nNodes_];

861 ià(*
—º
 == 1) {

864 
i__1
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

865 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

866 
nok
[
i__
 - 1] = 0;

867 
nko
[
i__
 - 1] = 0;

868 
xmok
[
i__
 - 1] = 0.;

869 
xmko
[
i__
 - 1] = 0.;

871 
i__1
 = 
fP¬am_1
.
Ãvl
;

872 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

873 
	`En_avªt
(&
i__
);

874 
i__2
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

875 
j
 = 1; j <ğ
i__2
; ++j) {

877 ià(
fV¬n_1
.
nşass
[
i__
 - 1] =ğ
j
) {

878 ++
nok
[
j
 - 1];

879 
xmok
[
j
 - 1] +ğ
	`y_»f
(
fP¬am_1
.
Ïy”m
, j);

882 ++
nko
[
j
 - 1];

883 
xmko
[
j
 - 1] +ğ
	`y_»f
(
fP¬am_1
.
Ïy”m
, j);

892 
i__1
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

893 
j
 = 1; j <ğ
i__1
; ++j) {

894 
xmok
[
j
 - 1] /ğ(
DoubË_t
è
nok
[j - 1];

895 
xmko
[
j
 - 1] /ğ(
DoubË_t
è
nko
[j - 1];

896 
fNeur_1
.
cut
[
j
 - 1] = (
xmok
[j - 1] + 
xmko
[j - 1]) / 2.;

898 
ix
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

899 
i__1
 = 
ix
;

900 
	}
}

902 #undeà
y_»f


907 
DoubË_t
 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$S’3a
( )

910 
IÁ_t
 
m12
 = 4096;

911 
DoubË_t
 
f1
 = 2.44140625e-4;

912 
DoubË_t
 
f2
 = 5.96046448e-8;

913 
DoubË_t
 
f3
 = 1.45519152e-11;

914 
IÁ_t
 
j1
 = 3823;

915 
IÁ_t
 
j2
 = 4006;

916 
IÁ_t
 
j3
 = 2903;

917 
IÁ_t
 
fg_i1
 = 3823;

918 
IÁ_t
 
fg_i2
 = 4006;

919 
IÁ_t
 
fg_i3
 = 2903;

921 
DoubË_t
 
»t_v®
;

922 
IÁ_t
 
k3
, 
l3
, 
k2
, 
l2
, 
k1
, 
l1
;

925 
k3
 = 
fg_i3
 * 
j3
;

926 
l3
 = 
k3
 / 
m12
;

927 
k2
 = 
fg_i2
 * 
j3
 + 
fg_i3
 * 
j2
 + 
l3
;

928 
l2
 = 
k2
 / 
m12
;

929 
k1
 = 
fg_i1
 * 
j3
 + 
fg_i2
 * 
j2
 + 
fg_i3
 * 
j1
 + 
l2
;

930 
l1
 = 
k1
 / 
m12
;

931 
fg_i1
 = 
k1
 - 
l1
 * 
m12
;

932 
fg_i2
 = 
k2
 - 
l2
 * 
m12
;

933 
fg_i3
 = 
k3
 - 
l3
 * 
m12
;

934 
»t_v®
 = 
f1
 * (
DoubË_t
è
fg_i1
 + 
f2
 * (
Flßt_t
è
fg_i2
 + 
f3
 * (DoubË_tè
fg_i3
;

936  
»t_v®
;

937 
	}
}

941 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$FÚcf
Ğ
IÁ_t
 *
i__
, 
DoubË_t
 *
u
, DoubË_ˆ*
f
 )

944 
DoubË_t
 
yy
;

946 ià(*
u
 / 
fD–_1
.
‹mp
[*
i__
 - 1] > 170.) {

947 *
f
 = .99999999989999999;

949 ià(*
u
 / 
fD–_1
.
‹mp
[*
i__
 - 1] < -170.) {

950 *
f
 = -.99999999989999999;

953 
yy
 = 
TM©h
::
	`Exp
(-(*
u
è/ 
fD–_1
.
‹mp
[*
i__
 - 1]);

954 *
f
 = (1. - 
yy
) / (yy + 1.);

956 
	}
}

958 #undeà
w_»f


960 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

965 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Cout2
Ğ
IÁ_t
 * , 
DoubË_t
 *
yyy
 )

967 
IÁ_t
 
i__1
, 
i__2
;

968 
DoubË_t
 
d__1
;

970 
DoubË_t
 
c__
;

971 
IÁ_t
 
i__
, 
j
;

973 
c__
 = 0.;

974 
i__1
 = 
fP¬am_1
.
Ãvt
;

975 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

976 
	`En_avªt2
(&
i__
);

977 
i__2
 = 
fNeur_1
.
ÃurÚ
[
fP¬am_1
.
Ïy”m
 - 1];

978 
j
 = 1; j <ğ
i__2
; ++j) {

979 ià(
fV¬n_1
.
mşass
[
i__
 - 1] =ğ
j
) {

980 
fNeur_1
.
o
[
j
 - 1] = 1.;

983 
fNeur_1
.
o
[
j
 - 1] = -1.;

986 
d__1
 = 
	`y_»f
(
fP¬am_1
.
Ïy”m
, 
j
è- 
fNeur_1
.
o
[j - 1];

987 
c__
 +ğ
fD–_1
.
cÛf
[
j
 - 1] * (
d__1
 * d__1);

990 
c__
 /ğ(
DoubË_t
è(
fP¬am_1
.
Ãvt
 * fP¬am_1.
lşass
) * 2.;

991 *
yyy
 = 
c__
;

992 
	}
}

994 #undeà
y_»f


996 
	#xx_»f
(
a_1
,
a_2
è
	`fV¬n3_1
×_1,a_2)

	)

1001 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$Leûv2
Ğ
IÁ_t
 *
k‹¡
, 
DoubË_t
 *
tout2
, DoubË_ˆ*
tš2
 )

1003 
IÁ_t
 
i__1
, 
i__2
;

1005 
IÁ_t
 
i__
, 
j
, 
l
;

1007 
IÁ_t
 
ik’d
;

1008 
DoubË_t
 
xpg
[
max_nV¬_
];

1015 *
k‹¡
 = 0;

1016 
i__1
 = 
fP¬am_1
.
lşass
;

1020 
i__1
 = 
fP¬am_1
.
Ãvt
;

1021 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1022 
	`D©aIÁ”çû
(
tout2
, 
tš2
, &
fg_999
, &
fg_0
, &
fP¬am_1
.
Ãvt
, &fP¬am_1.
nv¬
,

1023 
xpg
, &
fV¬n_1
.
mşass
[
i__
 - 1], &
ik’d
);

1025 ià(
ik’d
 == -1) {

1029 
i__2
 = 
fP¬am_1
.
nv¬
;

1030 
j
 = 1; j <ğ
i__2
; ++j) {

1031 
	`xx_»f
(
i__
, 
j
èğ
xpg
[j - 1];

1035 
i__1
 = 
fP¬am_1
.
Ãvt
;

1036 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1037 
i__2
 = 
fP¬am_1
.
nv¬
;

1038 
l
 = 1;† <ğ
i__2
; ++l) {

1039 ià(
fV¬n_1
.
xmax
[
l
 - 1] =ğ(
Flßt_t
)0. && fV¬n_1.
xmš
[l - 1] == (

1040 
Flßt_t
)0.) {

1041 
	`xx_»f
(
i__
, 
l
èğ(
Flßt_t
)0.;

1044 
	`xx_»f
(
i__
, 
l
èğxx_»f(i__,†è- (
fV¬n_1
.
xmax
[l - 1] +

1045 
fV¬n_1
.
xmš
[
l
 - 1]) / 2.;

1046 
	`xx_»f
(
i__
, 
l
èğxx_»f(i__,†è/ ((
fV¬n_1
.
xmax
[l - 1] -

1047 
fV¬n_1
.
xmš
[
l
 - 1]) / 2.);

1051 
	}
}

1053 #undeà
xx_»f


1055 
	#w_»f
(
a_1
,
a_2
,
a_3
è
fNeur_1
.
w
[(×_3)*
max_nNodes_
 + (a_2))*
max_nLay”s_
 +‡_1 - 187]

	)

1056 
	#x_»f
(
a_1
,
a_2
è
fNeur_1
.
x
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

1057 
	#y_»f
(
a_1
,
a_2
è
fNeur_1
.
y
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

1058 
	#ww_»f
(
a_1
,
a_2
è
fNeur_1
.
ww
[×_2)*
max_nLay”s_
 +‡_1 - 7]

	)

1059 
	#xx_»f
(
a_1
,
a_2
è
	`fV¬n3_1
×_1,a_2)

	)

1064 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$En_avªt2
Ğ
IÁ_t
 *
›v’t
 )

1066 
IÁ_t
 
i__1
, 
i__2
, 
i__3
;

1068 
DoubË_t
 
f
;

1069 
IÁ_t
 
i__
, 
j
;

1070 
IÁ_t
 
Ïy”
;

1072 
i__1
 = 
fNeur_1
.
ÃurÚ
[0];

1073 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1074 
	`y_»f
(1, 
i__
èğ
	`xx_»f
(*
›v’t
, i__);

1076 
i__1
 = 
fP¬am_1
.
Ïy”m
 - 1;

1077 
Ïy”
 = 1;†ay” <ğ
i__1
; ++layer) {

1078 
i__2
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
];

1079 
j
 = 1; j <ğ
i__2
; ++j) {

1080 
	`x_»f
(
Ïy”
 + 1, 
j
) = 0.;

1081 
i__3
 = 
fNeur_1
.
ÃurÚ
[
Ïy”
 - 1];

1082 
i__
 = 1; i__ <ğ
i__3
; ++i__) {

1083 
	`x_»f
(
Ïy”
 + 1, 
j
èğx_»fÖay” + 1, jè+ 
	`y_»f
Öay”, 
i__
)

1084 * 
	`w_»f
(
Ïy”
 + 1, 
j
, 
i__
);

1086 
	`x_»f
(
Ïy”
 + 1, 
j
èğx_»fÖay” + 1, jè+ 
	`ww_»f
(layer + 1, j);

1087 
i__3
 = 
Ïy”
 + 1;

1088 
	`FÚcf
(&
i__3
, &
	`x_»f
(
Ïy”
 + 1, 
j
), &
f
);

1089 
	`y_»f
(
Ïy”
 + 1, 
j
èğ
f
;

1093 
	}
}

1095 #undeà
xx_»f


1096 #undeà
ww_»f


1097 #undeà
y_»f


1098 #undeà
x_»f


1099 #undeà
w_»f


1103 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$A¼‘
ĞcÚ¡ * 
mÙ
 )

1106 
	`´štf
("%s: %s",
fg_M‘hodName
, 
mÙ
);

1107 
¡d
::
	`ex™
(1);

1108 
	}
}

1113 
	gTMVA
::
M‘hodCFMÍANN_Uts
::
	$CŞËùV¬
Ğ
IÁ_t
 * , IÁ_ˆ* , 
DoubË_t
 * )

1131 
	}
}

	@src/MethodCategory.cxx

45 
	~"TMVA/M‘hodC©egÜy.h
"

47 
	~<®gÜ™hm
>

48 
	~<iomª
>

49 
	~<veùÜ
>

50 
	~<io¡»am
>

52 
	~"Rio¡»am.h
"

53 
	~"TRªdom3.h
"

54 
	~"TM©h.h
"

55 
	~"TObjSŒšg.h
"

56 
	~"TH1F.h
"

57 
	~"TG¿ph.h
"

58 
	~"TS¶še.h
"

59 
	~"TDœeùÜy.h
"

60 
	~"TT»eFÜmuÏ.h
"

62 
	~"TMVA/CÏssif›rFaùÜy.h
"

63 
	~"TMVA/CÚfig.h
"

64 
	~"TMVA/D©aS‘.h
"

65 
	~"TMVA/D©aS‘Info.h
"

66 
	~"TMVA/D©aS‘Mªag”.h
"

67 
	~"TMVA/IM‘hod.h
"

68 
	~"TMVA/M‘hodBa£.h
"

69 
	~"TMVA/M‘hodCompos™eBa£.h
"

70 
	~"TMVA/MsgLogg”.h
"

71 
	~"TMVA/PDF.h
"

72 
	~"TMVA/Rªkšg.h
"

73 
	~"TMVA/Tim”.h
"

74 
	~"TMVA/ToŞs.h
"

75 
	~"TMVA/Ty³s.h
"

76 
	~"TMVA/V¬ŸbËInfo.h
"

77 
	~"TMVA/V¬ŸbËR—¼ªgeT¿nsfÜm.h
"

79 
	$REGISTER_METHOD
(
C©egÜy
)

81 
	`CÏssImp
(
TMVA
::
M‘hodC©egÜy
);

86 
TMVA
::
M‘hodC©egÜy
::
	$M‘hodC©egÜy
ĞcÚ¡ 
TSŒšg
& 
jobName
,

87 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

88 
D©aS‘Info
& 
theD©a
,

89 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

90 : 
TMVA
::
	`M‘hodCompos™eBa£
Ğ
jobName
, 
Ty³s
::
kC©egÜy
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

91 
	`fC©T»e
(0),

92 
	$fD©aS‘Mªag”
(
NULL
)

94 
	}
}

99 
	gTMVA
::
M‘hodC©egÜy
::
	$M‘hodC©egÜy
Ğ
D©aS‘Info
& 
dsi
,

100 cÚ¡ 
TSŒšg
& 
theWeightFe
)

101 : 
TMVA
::
	`M‘hodCompos™eBa£
Ğ
Ty³s
::
kC©egÜy
, 
dsi
, 
theWeightFe
),

102 
	`fC©T»e
(0),

103 
	$fD©aS‘Mªag”
(
NULL
)

105 
	}
}

110 
	gTMVA
::
M‘hodC©egÜy
::~
	$M‘hodC©egÜy
( )

112 
¡d
::
veùÜ
<
TT»eFÜmuÏ
*>::
™”©Ü
 
fÜmIt
 = 
fC©FÜmuÏs
.
	`begš
();

113 
¡d
::
veùÜ
<
TT»eFÜmuÏ
*>::
™”©Ü
 
Ï¡F
 = 
fC©FÜmuÏs
.
	`’d
();

114 ;
fÜmIt
!=
Ï¡F
; ++fÜmItè
d–‘e
 *formIt;

115 
d–‘e
 
fC©T»e
;

116 
	}
}

122 
BoŞ_t
 
	gTMVA
::
M‘hodC©egÜy
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UIÁ_ˆ
numb”T¬g‘s
 )

124 
¡d
::
veùÜ
<
IM‘hod
*>::
™”©Ü
 
™rM‘hod
 = 
fM‘hods
.
	`begš
();

127 ; 
™rM‘hod
 !ğ
fM‘hods
.
	`’d
(); ++itrMethod ) {

128 iàĞ!(*
™rM‘hod
)->
	`HasAÇlysisTy³
(
ty³
, 
numb”CÏs£s
, 
numb”T¬g‘s
) )

129  
kFALSE
;

131  
kTRUE
;

132 
	}
}

137 
	gTMVA
::
M‘hodC©egÜy
::
	$Deş¬eO±iÚs
()

139 
	}
}

144 
TMVA
::
IM‘hod
* TMVA::
M‘hodC©egÜy
::
	$AddM‘hod
ĞcÚ¡ 
TCut
& 
theCut
,

145 cÚ¡ 
TSŒšg
& 
theV¬ŸbËs
,

146 
Ty³s
::
EMVA
 
theM‘hod
 ,

147 cÚ¡ 
TSŒšg
& 
theT™Ë
,

148 cÚ¡ 
TSŒšg
& 
theO±iÚs
 )

150 
¡d
::
¡ršg
 
addedM‘hodName
 = std::
	`¡ršg
(
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodName
(
theM‘hod
));

152 
	`Log
(è<< 
kINFO
 << "Addšg sub-şassif›r: " << 
addedM‘hodName
 << "::" << 
theT™Ë
 << 
Endl
;

154 
D©aS‘Info
& 
dsi
 = 
	`C»©eC©egÜyDSI
(
theCut
, 
theV¬ŸbËs
, 
theT™Ë
);

156 
IM‘hod
* 
addedM‘hod
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
(
addedM‘hodName
,
	`G‘JobName
(),
theT™Ë
,
dsi
,
theO±iÚs
);

158 
M‘hodBa£
 *
m‘hod
 = (
dyÇmic_ÿ¡
<M‘hodBa£*>(
addedM‘hod
));

159 if(
m‘hod
==0)  0;

161 if(
fMod–P”si¡’û
è
m‘hod
->
	`S‘WeightFeDœ
(
fFeDœ
);

162 
m‘hod
->
	`S‘Mod–P”si¡’û
(
fMod–P”si¡’û
);

163 
m‘hod
->
	`S‘AÇlysisTy³
Ğ
fAÇlysisTy³
 );

164 
m‘hod
->
	`S‘upM‘hod
();

165 
m‘hod
->
	`P¬£O±iÚs
();

166 
m‘hod
->
	`ProûssS‘up
();

167 
m‘hod
->
	`S‘Fe
(
fFe
);

168 
m‘hod
->
	`S‘S’tFe
(
	`IsS’tFe
());

172 cÚ¡ 
TSŒšg
 
	`dœName
(
	`FÜm
("M‘hod_%s",
m‘hod
->
	`G‘M‘hodTy³Name
().
	`D©a
()));

173 
TDœeùÜy
 * 
dœ
 = 
	`Ba£Dœ
()->
	`G‘DœeùÜy
(
dœName
);

174 ià(
dœ
 !ğ0è
m‘hod
->
	`S‘M‘hodBa£Dœ
( dir );

175 
m‘hod
->
	`S‘M‘hodBa£Dœ
Ğ
	`Ba£Dœ
()->
	`mkdœ
(
dœName
,
	`FÜm
("DœeùÜy fÜ‡Î % m‘hods", m‘hod->
	`G‘M‘hodTy³Name
().
	`D©a
())) );

181 
m‘hod
->
	`CheckS‘up
();

184 
m‘hod
->
	`Di§bËWr™šg
Ğ
kTRUE
 );

187 
fM‘hods
.
	`push_back
(
m‘hod
);

188 
fC©egÜyCuts
.
	`push_back
(
theCut
);

189 
fV¬s
.
	`push_back
(
theV¬ŸbËs
);

191 
D©aS‘Info
& 
´im¬yDSI
 = 
	`D©aInfo
();

193 
UIÁ_t
 
ÃwS³ù©ÜIndex
 = 
´im¬yDSI
.
	`G‘S³ù©ÜInfos
().
	`size
();

194 
fC©egÜyS³cIdx
.
	`push_back
(
ÃwS³ù©ÜIndex
);

196 
´im¬yDSI
.
	`AddS³ù©Ü
Ğ
	`FÜm
("%s_ÿt%i:=%s", 
	`G‘Name
(),()
fM‘hods
.
	`size
(),
theCut
.
	`G‘T™Ë
()),

197 
	`FÜm
("%s:%s",
	`G‘Name
(),
m‘hod
->GetName()),

200  
m‘hod
;

201 
	}
}

206 
	gTMVA
::
D©aS‘Info
& 
TMVA
::
M‘hodC©egÜy
::
	$C»©eC©egÜyDSI
(cÚ¡ 
TCut
& 
theCut
,

207 cÚ¡ 
TSŒšg
& 
theV¬ŸbËs
,

208 cÚ¡ 
TSŒšg
& 
theT™Ë
)

211 
TSŒšg
 
dsiName
=
theT™Ë
+"_dsi";

212 
D©aS‘Info
& 
ŞdDSI
 = 
	`D©aInfo
();

213 
D©aS‘Info
* 
dsi
 = 
Ãw
 
	`D©aS‘Info
(
dsiName
);

217 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(*
dsi
);

220 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
™”©Ü
 
™rV¬Info
;

222 
™rV¬Info
 = 
ŞdDSI
.
	`G‘T¬g‘Infos
().
	`begš
(); iŒV¬InfØ!ğŞdDSI.G‘T¬g‘Infos().
	`’d
(); itrVarInfo++)

223 
dsi
->
	`AddT¬g‘
(*
™rV¬Info
);

225 
™rV¬Info
 = 
ŞdDSI
.
	`G‘S³ù©ÜInfos
().
	`begš
(); iŒV¬InfØ!ğŞdDSI.G‘S³ù©ÜInfos().
	`’d
(); itrVarInfo++)

226 
dsi
->
	`AddS³ù©Ü
(*
™rV¬Info
);

229 
¡d
::
veùÜ
<
TSŒšg
> 
v¬ŸbËs
 = 
	`gToŞs
().
	`S¶™SŒšg
(
theV¬ŸbËs
,':' );

232 
¡d
::
veùÜ
<
UIÁ_t
> 
v¬M­
;

233 
IÁ_t
 
couÁ”
=0;

236 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™rV¬ŸbËs
;

237 
BoŞ_t
 
found
 = 
kFALSE
;

240 
™rV¬ŸbËs
 = 
v¬ŸbËs
.
	`begš
(); iŒV¬ŸbË !ğv¬ŸbËs.
	`’d
(); itrVariables++) {

241 
couÁ”
=0;

244 
™rV¬Info
 = 
ŞdDSI
.
	`G‘V¬ŸbËInfos
().
	`begš
(); iŒV¬InfØ!ğŞdDSI.G‘V¬ŸbËInfos().
	`’d
(); itrVarInfo++) {

245 if((*
™rV¬ŸbËs
==
™rV¬Info
->
	`G‘Lab–
()) ) {

248 
dsi
->
	`AddV¬ŸbË
(*
™rV¬Info
);

249 
v¬M­
.
	`push_back
(
couÁ”
);

250 
found
 = 
kTRUE
;

252 
couÁ”
++;

256 
™rV¬Info
 = 
ŞdDSI
.
	`G‘S³ù©ÜInfos
().
	`begš
(); iŒV¬InfØ!ğŞdDSI.G‘S³ù©ÜInfos().
	`’d
(); itrVarInfo++) {

257 if((*
™rV¬ŸbËs
==
™rV¬Info
->
	`G‘Lab–
()) ) {

260 
dsi
->
	`AddV¬ŸbË
(*
™rV¬Info
);

261 
v¬M­
.
	`push_back
(
couÁ”
);

262 
found
 = 
kTRUE
;

264 
couÁ”
++;

268 ià(!
found
) {

269 
	`Log
(è<< 
kFATAL
 <<"Thv¬ŸbË " << 
™rV¬ŸbËs
->
	`D©a
(è<< " wa nÙ found‡nd could‚Ù badded " << 
Endl
;

271 
found
 = 
kFALSE
;

275 ià(
theV¬ŸbËs
=="") {

276 
UIÁ_t
 
i
=0; i<
ŞdDSI
.
	`G‘V¬ŸbËInfos
().
	`size
(); i++) {

277 
dsi
->
	`AddV¬ŸbË
(
ŞdDSI
.
	`G‘V¬ŸbËInfos
()[
i
]);

278 
v¬M­
.
	`push_back
(
i
);

283 
fV¬M­s
.
	`push_back
(
v¬M­
);

286 
UIÁ_t
 
nCÏs£s
=
ŞdDSI
.
	`G‘NCÏs£s
();

287 
TSŒšg
 
şassName
;

289 
UIÁ_t
 
i
=0; i<
nCÏs£s
; i++) {

290 
şassName
 = 
ŞdDSI
.
	`G‘CÏssInfo
(
i
)->
	`G‘Name
();

291 
dsi
->
	`AddCÏss
(
şassName
);

292 
dsi
->
	`S‘Cut
(
ŞdDSI
.
	`G‘Cut
(
i
),
şassName
);

293 
dsi
->
	`AddCut
(
theCut
,
şassName
);

294 
dsi
->
	`S‘WeightEx´essiÚ
(
ŞdDSI
.
	`G‘WeightEx´essiÚ
(
i
),
şassName
);

298 
dsi
->
	`S‘S¶™O±iÚs
(
ŞdDSI
.
	`G‘S¶™O±iÚs
());

299 
dsi
->
	`S‘RoÙDœ
(
ŞdDSI
.
	`G‘RoÙDœ
());

300 
TSŒšg
 
	`nÜm
(
ŞdDSI
.
	`G‘NÜm®iz©iÚ
().
	`D©a
());

301 
dsi
->
	`S‘NÜm®iz©iÚ
(
nÜm
);

303 
D©aS‘Info
& 
dsiReã»nû
ğ(*
dsi
);

305  
dsiReã»nû
;

306 
	}
}

311 
	gTMVA
::
M‘hodC©egÜy
::
	$In™
()

313 
	}
}

318 
TMVA
::
M‘hodC©egÜy
::
	$In™CœcuÏrT»e
(cÚ¡ 
D©aS‘Info
& 
dsi
)

320 
d–‘e
 
fC©T»e
;

322 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
viIt
;

323 cÚ¡ 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬s
 = 
dsi
.
	`G‘V¬ŸbËInfos
();

324 cÚ¡ 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
¥ecs
 = 
dsi
.
	`G‘S³ù©ÜInfos
();

326 
BoŞ_t
 
hasAÎEx‹º®Lšks
 = 
kTRUE
;

327 
viIt
 = 
v¬s
.
	`begš
(); viIˆ!ğv¬s.
	`’d
(); ++viIt)

328 ifĞ
viIt
->
	`G‘Ex‹º®Lšk
() == 0 ) {

329 
hasAÎEx‹º®Lšks
 = 
kFALSE
;

332 
viIt
 = 
¥ecs
.
	`begš
(); viIˆ!ğ¥ecs.
	`’d
(); ++viIt)

333 ifĞ
viIt
->
	`G‘Ex‹º®Lšk
() == 0 ) {

334 
hasAÎEx‹º®Lšks
 = 
kFALSE
;

338 if(!
hasAÎEx‹º®Lšks
) ;

345 
TDœeùÜy
::
TCÚ‹xt
 
	`ùxt
(
nuÎ±r
);

346 
fC©T»e
 = 
Ãw
 
	`TT»e
(
	`FÜm
("Cœc%s",
	`G‘M‘hodName
().
	`D©a
()),"Circular Tree for categorization");

347 
fC©T»e
->
	`S‘CœcuÏr
(1);

350 
viIt
 = 
v¬s
.
	`begš
(); viIˆ!ğv¬s.
	`’d
(); ++viIt) {

351 cÚ¡ 
V¬ŸbËInfo
& 
vi
 = *
viIt
;

352 
fC©T»e
->
	`B¿nch
(
vi
.
	`G‘Ex´essiÚ
(),(
Flßt_t
*)vi.
	`G‘Ex‹º®Lšk
(), 
	`TSŒšg
(vi.GetExpression())+TString("/F"));

354 
viIt
 = 
¥ecs
.
	`begš
(); viIˆ!ğ¥ecs.
	`’d
(); ++viIt) {

355 cÚ¡ 
V¬ŸbËInfo
& 
vi
 = *
viIt
;

356 if(
vi
.
	`G‘V¬Ty³
()=='C') ;

357 
fC©T»e
->
	`B¿nch
(
vi
.
	`G‘Ex´essiÚ
(),(
Flßt_t
*)vi.
	`G‘Ex‹º®Lšk
(), 
	`TSŒšg
(vi.GetExpression())+TString("/F"));

360 
UIÁ_t
 
ÿt
=0; c©!=
fC©egÜyCuts
.
	`size
(); ++cat) {

361 
fC©FÜmuÏs
.
	`push_back
(
Ãw
 
	`TT»eFÜmuÏ
(
	`FÜm
("C©egÜy_%i",
ÿt
), 
fC©egÜyCuts
[ÿt].
	`G‘T™Ë
(), 
fC©T»e
));

363 
	}
}

368 
	gTMVA
::
M‘hodC©egÜy
::
	$T¿š
()

371 cÚ¡ 
IÁ_t
 
MšNoT¿ššgEv’ts
 = 10;

373 
Ty³s
::
EAÇlysisTy³
 
ª®ysisTy³
 = 
	`G‘AÇlysisTy³
();

376 
	`Log
(è<< 
kINFO
 << "Train‡ll sub-classifiers for "

377 << (
ª®ysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Reg»ssiÚ" : "CÏssifiÿtiÚ"è<< " ..." << 
Endl
;

380 ià(
fM‘hods
.
	`em±y
()) {

381 
	`Log
(è<< 
kINFO
 << "...nÙhšg foundØŒaš" << 
Endl
;

385 
¡d
::
veùÜ
<
IM‘hod
*>::
™”©Ü
 
™rM‘hod
;

388 
™rM‘hod
 = 
fM‘hods
.
	`begš
(); iŒM‘hod !ğfM‘hods.
	`’d
(); ++itrMethod ) {

390 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

391 if(!
mva
) ;

392 
mva
->
	`S‘AÇlysisTy³
Ğ
ª®ysisTy³
 );

393 ià(!
mva
->
	`HasAÇlysisTy³
Ğ
ª®ysisTy³
,

394 
mva
->
	`D©aInfo
().
	`G‘NCÏs£s
(),

395 
mva
->
	`D©aInfo
().
	`G‘NT¬g‘s
() ) ) {

396 
	`Log
(è<< 
kWARNING
 << "M‘hod " << 
mva
->
	`G‘M‘hodTy³Name
() << " is‚ot capable of handling " ;

397 ià(
ª®ysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
)

398 
	`Log
(è<< "»g»ssiÚ w™h " << 
mva
->
	`D©aInfo
().
	`G‘NT¬g‘s
(è<< "¬g‘s." << 
Endl
;

400 
	`Log
(è<< "şassifiÿtiÚ w™h " << 
mva
->
	`D©aInfo
().
	`G‘NCÏs£s
(è<< " cÏs£s." << 
Endl
;

401 
™rM‘hod
 = 
fM‘hods
.
	`”a£
( itrMethod );

404 ià(
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è>ğ
MšNoT¿ššgEv’ts
) {

406 
	`Log
(è<< 
kINFO
 << "T¿š m‘hod: " << 
mva
->
	`G‘M‘hodName
() << " for "

407 << (
ª®ysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 ? "Reg»ssiÚ" : "CÏssifiÿtiÚ"è<< 
Endl
;

408 
mva
->
	`T¿šM‘hod
();

409 
	`Log
(è<< 
kINFO
 << "T¿ššg fšished" << 
Endl
;

413 
	`Log
(è<< 
kWARNING
 << "M‘hod " << 
mva
->
	`G‘M‘hodName
()

415 << 
mva
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
()

416 << "]hª„equœed [" << 
MšNoT¿ššgEv’ts
 << "]" << 
Endl
;

418 
	`Log
(è<< 
kERROR
 << " w/ØŒaššg/‹¡ƒv’t fÜh© c©egÜy, I b‘‹¸¡İ h”ªd†‘ you fix " << 
Endl
;

419 
	`Log
(è<< 
kFATAL
 << "th© oÃ fœ¡, oth”wi£hšg g‘oØmessy†©” ... " << 
Endl
;

424 ià(
ª®ysisTy³
 !ğ
Ty³s
::
kReg»ssiÚ
) {

427 
	`Log
(è<< 
kINFO
 << "Begš„ªkšg oàšpuˆv¬ŸbËs..." << 
Endl
;

428 
™rM‘hod
 = 
fM‘hods
.
	`begš
(); iŒM‘hod !ğfM‘hods.
	`’d
(); itrMethod++) {

429 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

430 ià(
mva
 && mva->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è>ğ
MšNoT¿ššgEv’ts
) {

431 cÚ¡ 
Rªkšg
* 
¿nkšg
 = (*
™rM‘hod
)->
	`C»©eRªkšg
();

432 ià(
¿nkšg
 != 0)

433 
¿nkšg
->
	`Pršt
();

435 
	`Log
(è<< 
kINFO
 << "No variable„anking supplied by classifier: "

436 << 
dyÇmic_ÿ¡
<
M‘hodBa£
*>(*
™rM‘hod
)->
	`G‘M‘hodName
(è<< 
Endl
;

440 
	}
}

445 
	gTMVA
::
M‘hodC©egÜy
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

447 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

448 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NSubM‘hods", 
fM‘hods
.
	`size
() );

449 * 
	`subm‘hod
(0);

451 
¡d
::
veùÜ
<
IM‘hod
*>::
™”©Ü
 
™rM‘hod
;

454 
UIÁ_t
 
i
=0; i<
fM‘hods
.
	`size
(); i++) {

455 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
i
]);

456 
subm‘hod
 = 
	`gToŞs
().
	`AddChd
(
wght
, "SubMethod");

457 
	`gToŞs
().
	`AddA‰r
(
subm‘hod
, "Index", 
i
);

458 
	`gToŞs
().
	`AddA‰r
(
subm‘hod
, "M‘hod", 
m‘hod
->
	`G‘M‘hodTy³Name
(è+ "::" + m‘hod->
	`G‘M‘hodName
());

459 
	`gToŞs
().
	`AddA‰r
(
subm‘hod
, "Cut", 
fC©egÜyCuts
[
i
]);

460 
	`gToŞs
().
	`AddA‰r
(
subm‘hod
, "V¬ŸbËs", 
fV¬s
[
i
]);

461 
m‘hod
->
	`Wr™eS‹ToXML
Ğ
subm‘hod
 );

463 
	}
}

468 
	gTMVA
::
M‘hodC©egÜy
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

470 
UIÁ_t
 
nSubM‘hods
;

471 
TSŒšg
 
fuÎM‘hodName
;

472 
TSŒšg
 
m‘hodTy³
;

473 
TSŒšg
 
m‘hodT™Ë
;

474 
TSŒšg
 
theCutSŒšg
;

475 
TSŒšg
 
theV¬ŸbËs
;

476 
IÁ_t
 
t™ËL’gth
;

477 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NSubM‘hods", 
nSubM‘hods
 );

478 * 
subM‘hodNode
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

480 
	`Log
(è<< 
kINFO
 << "Reü—tšg sub-şassif›r äom XML-f" << 
Endl
;

483 
UIÁ_t
 
i
=0; i<
nSubM‘hods
; i++) {

484 
	`gToŞs
().
	`R—dA‰r
Ğ
subM‘hodNode
, "M‘hod", 
fuÎM‘hodName
 );

485 
	`gToŞs
().
	`R—dA‰r
Ğ
subM‘hodNode
, "Cut", 
theCutSŒšg
 );

486 
	`gToŞs
().
	`R—dA‰r
Ğ
subM‘hodNode
, "V¬ŸbËs", 
theV¬ŸbËs
 );

489 
m‘hodTy³
 = 
	`fuÎM‘hodName
(0,
fuÎM‘hodName
.
	`Index
("::"));

490 ià(
m‘hodTy³
.
	`CÚšs
(" ")èm‘hodTy³ = 
	`m‘hodTy³
(m‘hodTy³.
	`La¡
(' ')+1,m‘hodTy³.
	`L’gth
());

493 
t™ËL’gth
 = 
fuÎM‘hodName
.
	`L’gth
()-fuÎM‘hodName.
	`Index
("::")-2;

494 
m‘hodT™Ë
 = 
	`fuÎM‘hodName
(
fuÎM‘hodName
.
	`Index
("::")+2,
t™ËL’gth
);

497 
D©aS‘Info
& 
dsi
 = 
	`C»©eC©egÜyDSI
(
	`TCut
(
theCutSŒšg
), 
theV¬ŸbËs
, 
m‘hodT™Ë
);

500 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>Ğ
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
Ğ
m‘hodTy³
.
	`D©a
(),

501 
dsi
, "none" ) );

502 if(
m‘hod
==0)

503 
	`Log
(è<< 
kFATAL
 << "Could‚Ù c»©sub-m‘hod " << 
m‘hod
 << " from XML." << 
Endl
;

505 
m‘hod
->
	`S‘upM‘hod
();

506 
m‘hod
->
	`R—dS‹FromXML
(
subM‘hodNode
);

508 
fM‘hods
.
	`push_back
(
m‘hod
);

509 
fC©egÜyCuts
.
	`push_back
(
	`TCut
(
theCutSŒšg
));

510 
fV¬s
.
	`push_back
(
theV¬ŸbËs
);

512 
D©aS‘Info
& 
´im¬yDSI
 = 
	`D©aInfo
();

514 
UIÁ_t
 
¥eù©ÜIdx
 = 10000;

515 
UIÁ_t
 
couÁ”
=0;

518 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
¥eù©Üs
=
´im¬yDSI
.
	`G‘S³ù©ÜInfos
();

519 
¡d
::
veùÜ
<
V¬ŸbËInfo
>::
™”©Ü
 
™rV¬Info
;

520 
TSŒšg
 
¥ecName
ğ
	`FÜm
("%s_ÿt%i", 
	`G‘Name
(),()
fC©egÜyS³cIdx
.
	`size
()+1);

522 
™rV¬Info
 = 
¥eù©Üs
.
	`begš
(); iŒV¬InfØ!ğ¥eù©Üs.
	`’d
(); ++™rV¬Info, ++
couÁ”
) {

523 if((
¥ecName
==
™rV¬Info
->
	`G‘Lab–
()è|| (¥ecName==™rV¬Info->
	`G‘Ex´essiÚ
())) {

524 
¥eù©ÜIdx
=
couÁ”
;

525 
fC©egÜyS³cIdx
.
	`push_back
(
¥eù©ÜIdx
);

530 
subM‘hodNode
 = 
	`gToŞs
().
	`G‘NextChd
(subMethodNode);

533 
	`In™CœcuÏrT»e
(
	`D©aInfo
());

535 
	}
}

540 
	gTMVA
::
M‘hodC©egÜy
::
	$ProûssO±iÚs
()

542 
	}
}

550 
TMVA
::
M‘hodC©egÜy
::
	$G‘H–pMes§ge
() const

552 
	`Log
(è<< 
Endl
;

553 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

554 
	`Log
(è<< 
Endl
;

555 
	`Log
(è<< "Thi m‘hod‡Îow tØdefšdifã»Á c©egÜ› oàev’ts. The" <<
Endl
;

556 
	`Log
(è<< "ÿ‹gÜ› ¬defšed vŸ cut Úhv¬ŸbËs. FÜƒach" << 
Endl
;

557 
	`Log
(è<< "ÿ‹gÜy,‡ difã»Á cÏssif›¸ªd s‘ oàv¬ŸbË ÿÀbe" <<
Endl
;

558 
	`Log
(è<< "¥ecif›d. Thÿ‹gÜ› which‡» defšed fÜhi m‘hod mu¡" << 
Endl
;

559 
	`Log
(è<< "bdisjošt." << 
Endl
;

560 
	}
}

565 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodC©egÜy
::
	$C»©eRªkšg
()

568 
	}
}

572 
BoŞ_t
 
	gTMVA
::
M‘hodC©egÜy
::
	$Pas£sCut
ĞcÚ¡ 
Ev’t
* 
ev
, 
UIÁ_t
 
m‘hodIdx
 )

577 ià(
fC©T»e
) {

578 ià(
m‘hodIdx
>=
fC©FÜmuÏs
.
	`size
()) {

579 
	`Log
(è<< 
kFATAL
 << "L¬gm‘hod index " << 
m‘hodIdx
 << ",‚umber of category formulas = "

580 << 
fC©FÜmuÏs
.
	`size
(è<< 
Endl
;

582 
TT»eFÜmuÏ
* 
f
 = 
fC©FÜmuÏs
[
m‘hodIdx
];

583  
f
->
	`Ev®In¡ªû
(0) > 0.5;

589 ià(
m‘hodIdx
>=
fC©egÜyS³cIdx
.
	`size
()) {

590 
	`Log
(è<< 
kFATAL
 << "UnknowÀm‘hod index " << 
m‘hodIdx
 << " maximum‡llowed index="

591 << 
fC©egÜyS³cIdx
.
	`size
(è<< 
Endl
;

593 
UIÁ_t
 
¥eù©ÜIdx
 = 
fC©egÜyS³cIdx
[
m‘hodIdx
];

594 
Flßt_t
 
¥ecV®
 = 
ev
->
	`G‘S³ù©Ü
(
¥eù©ÜIdx
);

595 
BoŞ_t
 
·ss
 = (
¥ecV®
>0.5);

596  
·ss
;

598 
	}
}

603 
DoubË_t
 
	gTMVA
::
M‘hodC©egÜy
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

605 ià(
fM‘hods
.
	`em±y
())  0;

607 
UIÁ_t
 
m‘hodToU£
 = 0;

608 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

611 
IÁ_t
 
su™abËCutsN
 = 0;

613 
UIÁ_t
 
i
=0; i<
fM‘hods
.
	`size
(); ++i) {

614 ià(
	`Pas£sCut
(
ev
, 
i
)) {

615 ++
su™abËCutsN
;

616 
m‘hodToU£
=
i
;

620 ià(
su™abËCutsN
 == 0) {

621 
	`Log
(è<< 
kWARNING
 << "Ev’ˆdÛ nÙ†› w™hšhcuˆoàªy sub-şassif›r." << 
Endl
;

625 ià(
su™abËCutsN
 > 1) {

626 
	`Log
(è<< 
kFATAL
 << "Thdefšed c©egÜ› ¬nÙ disjošt." << 
Endl
;

631 
ev
->
	`S‘V¬ŸbËA¼ªgem’t
(&
fV¬M­s
[
m‘hodToU£
]);

632 
DoubË_t
 
mvaV®ue
 = 
dyÇmic_ÿ¡
<
M‘hodBa£
*>(
fM‘hods
[
m‘hodToU£
])->
	`G‘MvaV®ue
(
ev
,
”r
,
”rUµ”
);

633 
ev
->
	`S‘V¬ŸbËA¼ªgem’t
(0);

635  
mvaV®ue
;

636 
	}
}

643 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
> &
TMVA
::
M‘hodC©egÜy
::
	$G‘Reg»ssiÚV®ues
()

645 ià(
fM‘hods
.
	`em±y
()è 
M‘hodBa£
::
	`G‘Reg»ssiÚV®ues
();

647 
UIÁ_t
 
m‘hodToU£
 = 0;

648 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

651 
IÁ_t
 
su™abËCutsN
 = 0;

653 
UIÁ_t
 
i
=0; i<
fM‘hods
.
	`size
(); ++i) {

654 ià(
	`Pas£sCut
(
ev
, 
i
)) {

655 ++
su™abËCutsN
;

656 
m‘hodToU£
=
i
;

660 ià(
su™abËCutsN
 == 0) {

661 
	`Log
(è<< 
kWARNING
 << "Ev’ˆdÛ nÙ†› w™hšhcuˆoàªy sub-şassif›r." << 
Endl
;

662  
M‘hodBa£
::
	`G‘Reg»ssiÚV®ues
();

665 ià(
su™abËCutsN
 > 1) {

666 
	`Log
(è<< 
kFATAL
 << "Thdefšed c©egÜ› ¬nÙ disjošt." << 
Endl
;

667  
M‘hodBa£
::
	`G‘Reg»ssiÚV®ues
();

669 
M‘hodBa£
* 
m‘h
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
m‘hodToU£
]);

670 ià(!
m‘h
){

671 
	`Log
(è<< 
kFATAL
 << "m‘hod‚Ù found iÀC©egÜy Reg»ssiÚ m‘hod" << 
Endl
;

672  
M‘hodBa£
::
	`G‘Reg»ssiÚV®ues
();

675  
m‘h
->
	`G‘Reg»ssiÚV®ues
(
ev
);

676 
	}
}

	@src/MethodCompositeBase.cxx

42 
	~"TMVA/M‘hodCompos™eBa£.h
"

44 
	~"TMVA/CÏssif›rFaùÜy.h
"

45 
	~"TMVA/D©aS‘Info.h
"

46 
	~"TMVA/FaùÜy.h
"

47 
	~"TMVA/IM‘hod.h
"

48 
	~"TMVA/M‘hodBa£.h
"

49 
	~"TMVA/M‘hodBoo¡.h
"

50 
	~"TMVA/MsgLogg”.h
"

51 
	~"TMVA/ToŞs.h
"

52 
	~"TMVA/Ty³s.h
"

53 
	~"TMVA/CÚfig.h
"

55 
	~"Rio¡»am.h
"

56 
	~"TRªdom3.h
"

57 
	~"TM©h.h
"

58 
	~"TObjSŒšg.h
"

60 
	~<®gÜ™hm
>

61 
	~<iomª
>

62 
	~<veùÜ
>

65 
usšg
 
	g¡d
::
veùÜ
;

67 
CÏssImp
(
TMVA
::
M‘hodCompos™eBa£
);

71 
	gTMVA
::
M‘hodCompos™eBa£
::
	$M‘hodCompos™eBa£
ĞcÚ¡ 
TSŒšg
& 
jobName
,

72 
Ty³s
::
EMVA
 
m‘hodTy³
,

73 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

74 
D©aS‘Info
& 
theD©a
,

75 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

76 : 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
m‘hodTy³
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

77 
	`fCu¼’tM‘hodIdx
(0), 
	$fCu¼’tM‘hod
(0)

78 {
	}
}

82 
	gTMVA
::
M‘hodCompos™eBa£
::
	$M‘hodCompos™eBa£
Ğ
Ty³s
::
EMVA
 
m‘hodTy³
,

83 
D©aS‘Info
& 
dsi
,

84 cÚ¡ 
TSŒšg
& 
weightFe
)

85 : 
TMVA
::
	`M‘hodBa£
Ğ
m‘hodTy³
, 
dsi
, 
weightFe
),

86 
	`fCu¼’tM‘hodIdx
(0), 
	$fCu¼’tM‘hod
(0)

87 {
	}
}

92 
	gTMVA
::
IM‘hod
* 
TMVA
::
M‘hodCompos™eBa£
::
	$G‘M‘hod
ĞcÚ¡ 
TSŒšg
 &
m‘hodT™Ë
 ) const

94 
¡d
::
veùÜ
<
IM‘hod
*>::
cÚ¡_™”©Ü
 
™rM‘hod
 = 
fM‘hods
.
	`begš
();

95 
¡d
::
veùÜ
<
IM‘hod
*>::
cÚ¡_™”©Ü
 
™rM‘hodEnd
 = 
fM‘hods
.
	`’d
();

97 ; 
™rM‘hod
 !ğ
™rM‘hodEnd
; itrMethod++) {

98 
M‘hodBa£
* 
mva
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(*
™rM‘hod
);

99 iàĞ(
mva
->
	`G‘M‘hodName
())==
m‘hodT™Ë
 )  mva;

102 
	}
}

107 
	gTMVA
::
IM‘hod
* 
TMVA
::
M‘hodCompos™eBa£
::
	$G‘M‘hod
ĞcÚ¡ 
IÁ_t
 
šdex
 ) const

109 
¡d
::
veùÜ
<
IM‘hod
*>::
cÚ¡_™”©Ü
 
™rM‘hod
 = 
fM‘hods
.
	`begš
()+
šdex
;

110 ià(
™rM‘hod
<
fM‘hods
.
	`’d
())  *itrMethod;

112 
	}
}

117 
	gTMVA
::
M‘hodCompos™eBa£
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

119 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

120 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NM‘hods", 
fM‘hods
.
	`size
() );

121 
UIÁ_t
 
i
=0; i< 
fM‘hods
.
	`size
(); i++)

123 * 
m‘hxml
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Method" );

124 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
[
i
]);

125 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"Index", 
i
 );

126 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"Weight", 
fM‘hodWeight
[
i
]);

127 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"M‘hodSigCut", 
m‘hod
->
	`G‘SigÇlReã»nûCut
());

128 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"M‘hodSigCutOr›Á©iÚ", 
m‘hod
->
	`G‘SigÇlReã»nûCutOr›Á©iÚ
());

129 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"M‘hodTy³Name", 
m‘hod
->
	`G‘M‘hodTy³Name
());

130 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"M‘hodName", 
m‘hod
->
	`G‘M‘hodName
() );

131 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"JobName", 
m‘hod
->
	`G‘JobName
());

132 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"O±iÚs", 
m‘hod
->
	`G‘O±iÚs
());

133 ià(
m‘hod
->
fT¿nsfÜm©iÚPoš‹r
)

134 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"U£MašM‘hodT¿nsfÜm©iÚ", 
	`TSŒšg
("true"));

136 
	`gToŞs
().
	`AddA‰r
(
m‘hxml
,"U£MašM‘hodT¿nsfÜm©iÚ", 
	`TSŒšg
("false"));

137 
m‘hod
->
	`AddWeightsXMLTo
(
m‘hxml
);

139 
	}
}

144 
	gTMVA
::
M‘hodCompos™eBa£
::~
	$M‘hodCompos™eBa£
( )

146 
¡d
::
veùÜ
<
IM‘hod
*>::
™”©Ü
 
™rM‘hod
 = 
fM‘hods
.
	`begš
();

147 ; 
™rM‘hod
 !ğ
fM‘hods
.
	`’d
(); itrMethod++) {

148 
	`Log
(è<< 
kVERBOSE
 << "D–‘m‘hod: " << (*
™rM‘hod
)->
	`G‘Name
(è<< 
Endl
;

149 
	`d–‘e
 (*
™rM‘hod
);

151 
fM‘hods
.
	`ş—r
();

152 
	}
}

157 
	gTMVA
::
M‘hodCompos™eBa£
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

159 
UIÁ_t
 
nM‘hods
;

160 
TSŒšg
 
m‘hodName
, 
m‘hodTy³Name
, 
jobName
, 
İtiÚSŒšg
;

162 
UIÁ_t
 
i
=0;i<
fM‘hods
.
	`size
();i++è
d–‘e
 fMethods[i];

163 
fM‘hods
.
	`ş—r
();

164 
fM‘hodWeight
.
	`ş—r
();

165 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NM‘hods", 
nM‘hods
 );

166 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

167 
UIÁ_t
 
i
=0; i< 
nM‘hods
; i++) {

168 
DoubË_t
 
m‘hodWeight
, 
m‘hodSigCut
, 
m‘hodSigCutOr›Á©iÚ
;

169 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Weight", 
m‘hodWeight
 );

170 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "M‘hodSigCut", 
m‘hodSigCut
);

171 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "M‘hodSigCutOr›Á©iÚ", 
m‘hodSigCutOr›Á©iÚ
);

172 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "M‘hodTy³Name", 
m‘hodTy³Name
 );

173 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "M‘hodName", 
m‘hodName
 );

174 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "JobName", 
jobName
 );

175 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "O±iÚs", 
İtiÚSŒšg
 );

178 ià(
	`gToŞs
().
	`HasA‰r
Ğ
ch
, "UseMainMethodTransformation")) {

179 
TSŒšg
 
	`»rou‹SŒšg
("");

180 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "U£MašM‘hodT¿nsfÜm©iÚ", 
»rou‹SŒšg
 );

181 
»rou‹SŒšg
.
	`ToLow”
();

187 
İtiÚSŒšg
.
	`R•ÏûAÎ
("~","");

189 
İtiÚSŒšg
.
	`R•ÏûAÎ
("Boost_","~Boost_");

190 
İtiÚSŒšg
.
	`R•ÏûAÎ
("!~","~!");

192 ià(
i
==0){

194 ((
TMVA
::
M‘hodBoo¡
*)
this
)->
	`BookM‘hod
Ğ
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodTy³
Ğ
m‘hodTy³Name
), 
m‘hodName
, 
İtiÚSŒšg
 );

196 
fM‘hods
.
	`push_back
(
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
(

197 
¡d
::
	`¡ršg
(
m‘hodTy³Name
),
jobName
, 
m‘hodName
,
	`D©aInfo
(),
İtiÚSŒšg
));

199 
fM‘hodWeight
.
	`push_back
(
m‘hodWeight
);

200 
M‘hodBa£
* 
m‘h
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
.
	`back
());

202 if(
m‘h
==0)

203 
	`Log
(è<< 
kFATAL
 << "Could‚Ù„—d m‘hod from XML" << 
Endl
;

205 * 
m‘hXML
 = 
	`gToŞs
().
	`G‘Chd
(
ch
);

207 
TSŒšg
 
_fFeDœ
ğ
m‘h
->
	`D©aInfo
().
	`G‘Name
();

208 
_fFeDœ
+="/"+
	`gCÚfig
().
	`G‘IONames
().
fWeightFeDœ
;

209 
m‘h
->
	`S‘WeightFeDœ
(
_fFeDœ
);

210 
m‘h
->
	`S‘Mod–P”si¡’û
(
	`IsMod–P”si¡’û
());

211 
m‘h
->
	`S‘S’tFe
(
	`IsS’tFe
());

212 
m‘h
->
	`S‘upM‘hod
();

213 
m‘h
->
	`S‘MsgTy³
(
kWARNING
);

214 
m‘h
->
	`P¬£O±iÚs
();

215 
m‘h
->
	`ProûssS‘up
();

216 
m‘h
->
	`CheckS‘up
();

217 
m‘h
->
	`R—dWeightsFromXML
(
m‘hXML
);

218 
m‘h
->
	`S‘SigÇlReã»nûCut
(
m‘hodSigCut
);

219 
m‘h
->
	`S‘SigÇlReã»nûCutOr›Á©iÚ
(
m‘hodSigCutOr›Á©iÚ
);

221 
m‘h
->
	`R”ou‹T¿nsfÜm©iÚHªdËr
 (&(
this
->
	`G‘T¿nsfÜm©iÚHªdËr
()));

223 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

226 
	}
}

231 
	gTMVA
::
M‘hodCompos™eBa£
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

233 
TSŒšg
 
v¬
, 
dummy
;

234 
TSŒšg
 
m‘hodName
, 
m‘hodT™Ë
=
	`G‘M‘hodName
(),

235 
jobName
=
	`G‘JobName
(),
İtiÚSŒšg
=
	`G‘O±iÚs
();

236 
UIÁ_t
 
m‘hodNum
; 
DoubË_t
 
m‘hodWeight
;

239 
i¡r
 >> 
dummy
 >> 
m‘hodNum
;

240 
	`Log
(è<< 
kINFO
 << "R—d " << 
m‘hodNum
 << " CÏssif›rs" << 
Endl
;

241 
UIÁ_t
 
i
=0;i<
fM‘hods
.
	`size
();i++è
d–‘e
 fMethods[i];

242 
fM‘hods
.
	`ş—r
();

243 
fM‘hodWeight
.
	`ş—r
();

244 
UIÁ_t
 
i
=0; i<
m‘hodNum
; i++) {

245 
i¡r
 >> 
dummy
 >> 
m‘hodName
 >> dummy >> 
fCu¼’tM‘hodIdx
 >> dummy >> 
m‘hodWeight
;

246 ià((
UIÁ_t
)
fCu¼’tM‘hodIdx
 !ğ
i
) {

247 
	`Log
(è<< 
kFATAL
 << "Error while„eading weight file; mismatch MethodIndex="

248 << 
fCu¼’tM‘hodIdx
 << " i=" << 
i


249 << " M‘hodNam" << 
m‘hodName


250 << " dummy " << 
dummy


251 << " M‘hodWeightğ" << 
m‘hodWeight


252 << 
Endl
;

254 ià(
	`G‘M‘hodTy³
(è!ğ
Ty³s
::
kBoo¡
 || 
i
==0) {

255 
i¡r
 >> 
dummy
 >> 
jobName
;

256 
i¡r
 >> 
dummy
 >> 
m‘hodT™Ë
;

257 
i¡r
 >> 
dummy
 >> 
İtiÚSŒšg
;

258 ià(
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kBoo¡
)

259 ((
TMVA
::
M‘hodBoo¡
*)
this
)->
	`BookM‘hod
Ğ
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodTy³
Ğ
m‘hodName
), 
m‘hodT™Ë
, 
İtiÚSŒšg
 );

261 
m‘hodT™Ë
=
	`FÜm
("% (%04i)",
	`G‘M‘hodName
().
	`D©a
(),
fCu¼’tM‘hodIdx
);

262 
fM‘hods
.
	`push_back
(
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
Ğ
¡d
::
	`¡ršg
(
m‘hodName
), 
jobName
,

263 
m‘hodT™Ë
,
	`D©aInfo
(), 
İtiÚSŒšg
) );

264 
fM‘hodWeight
.
	`push_back
Ğ
m‘hodWeight
 );

265 if(
M‘hodBa£
* 
m
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
fM‘hods
.
	`back
()) )

266 
m
->
	`R—dWeightsFromSŒ—m
(
i¡r
);

268 
	}
}

273 
DoubË_t
 
	gTMVA
::
M‘hodCompos™eBa£
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

275 
DoubË_t
 
mvaV®ue
 = 0;

276 
UIÁ_t
 
i
=0;i< 
fM‘hods
.
	`size
(); i++è
mvaV®ue
+=fM‘hods[i]->
	`G‘MvaV®ue
()*
fM‘hodWeight
[i];

279 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

281  
mvaV®ue
;

282 
	}
}

	@src/MethodCuts.cxx

77 
	~"TMVA/M‘hodCuts.h
"

79 
	~"TMVA/Bš¬yS—rchT»e.h
"

80 
	~"TMVA/CÏssif›rFaùÜy.h
"

81 
	~"TMVA/CÚfig.h
"

82 
	~"TMVA/CÚfigu¿bË.h
"

83 
	~"TMVA/D©aS‘.h
"

84 
	~"TMVA/D©aS‘Info.h
"

85 
	~"TMVA/Ev’t.h
"

86 
	~"TMVA/IF™‹rT¬g‘.h
"

87 
	~"TMVA/IM‘hod.h
"

88 
	~"TMVA/G’‘icF™‹r.h
"

89 
	~"TMVA/IÁ”v®.h
"

90 
	~"TMVA/F™‹rBa£.h
"

91 
	~"TMVA/MCF™‹r.h
"

92 
	~"TMVA/M‘hodBa£.h
"

93 
	~"TMVA/M‘hodFDA.h
"

94 
	~"TMVA/Mšu™F™‹r.h
"

95 
	~"TMVA/MsgLogg”.h
"

96 
	~"TMVA/PDF.h
"

97 
	~"TMVA/ResuÉs.h
"

98 
	~"TMVA/SimuÏ‹dAÂ—lšgF™‹r.h
"

99 
	~"TMVA/Tim”.h
"

100 
	~"TMVA/ToŞs.h
"

101 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

102 
	~"TMVA/Ty³s.h
"

103 
	~"TMVA/TS¶še1.h
"

104 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

106 
	~"Rio¡»am.h
"

107 
	~"TH1F.h
"

108 
	~"TObjSŒšg.h
"

109 
	~"TDœeùÜy.h
"

110 
	~"TM©h.h
"

111 
	~"TG¿ph.h
"

112 
	~"TS¶še.h
"

113 
	~"TRªdom3.h
"

115 
	~<c¡dlib
>

116 
	~<io¡»am
>

118 
usšg
 
	g¡d
::
©of
;

120 
	$REGISTER_METHOD
(
Cuts
)

122 
	`CÏssImp
(
TMVA
::
M‘hodCuts
);

124 cÚ¡ 
DoubË_t
 
TMVA
::
M‘hodCuts
::
fgMaxAbsCutV®
 = 1.0e30;

129 
TMVA
::
M‘hodCuts
::
	$M‘hodCuts
ĞcÚ¡ 
TSŒšg
& 
jobName
,

130 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

131 
D©aS‘Info
& 
theD©a
,

132 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

133 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kCuts
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

134 
	`fF™M‘hod
 ( 
kU£G’‘icAlgÜ™hm
 ),

135 
	`fEffM‘hod
 ( 
kU£Ev’tS–eùiÚ
 ),

136 
	`fF™P¬ams
 (0),

137 
	`fTe¡SigÇlEff
(0.7),

138 
	`fEffSMš
 ( 0 ),

139 
	`fEffSMax
 ( 0 ),

140 
	`fCutRªgeMš
( 0 ),

141 
	`fCutRªgeMax
( 0 ),

142 
	`fBš¬yT»eS
( 0 ),

143 
	`fBš¬yT»eB
( 0 ),

144 
	`fCutMš
 ( 0 ),

145 
	`fCutMax
 ( 0 ),

146 
	`fTmpCutMš
 ( 0 ),

147 
	`fTmpCutMax
 ( 0 ),

148 
	`fAÎV¬sI
 ( 0 ),

149 
	`fN·r
 ( 0 ),

150 
	`fEffRef
 ( 0 ),

151 
	`fRªgeSign
 ( 0 ),

152 
	`fRªdom
 ( 0 ),

153 
	`fM—nS
 ( 0 ),

154 
	`fM—nB
 ( 0 ),

155 
	`fRmsS
 ( 0 ),

156 
	`fRmsB
 ( 0 ),

157 
	`fEffBvsSLoÿl
( 0 ),

158 
	`fV¬Hi¡S
 ( 0 ),

159 
	`fV¬Hi¡B
 ( 0 ),

160 
	`fV¬Hi¡S_smoÙh
( 0 ),

161 
	`fV¬Hi¡B_smoÙh
( 0 ),

162 
	`fV¬PdfS
 ( 0 ),

163 
	`fV¬PdfB
 ( 0 ),

164 
	$fNegEffW¬nšg
Ğ
kFALSE
 )

166 
	}
}

171 
	gTMVA
::
M‘hodCuts
::
	$M‘hodCuts
Ğ
D©aS‘Info
& 
theD©a
,

172 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

173 
	`M‘hodBa£
Ğ
Ty³s
::
kCuts
, 
theD©a
, 
theWeightFe
),

174 
	`fF™M‘hod
 ( 
kU£G’‘icAlgÜ™hm
 ),

175 
	`fEffM‘hod
 ( 
kU£Ev’tS–eùiÚ
 ),

176 
	`fF™P¬ams
 (0),

177 
	`fTe¡SigÇlEff
(0.7),

178 
	`fEffSMš
 ( 0 ),

179 
	`fEffSMax
 ( 0 ),

180 
	`fCutRªgeMš
( 0 ),

181 
	`fCutRªgeMax
( 0 ),

182 
	`fBš¬yT»eS
( 0 ),

183 
	`fBš¬yT»eB
( 0 ),

184 
	`fCutMš
 ( 0 ),

185 
	`fCutMax
 ( 0 ),

186 
	`fTmpCutMš
 ( 0 ),

187 
	`fTmpCutMax
 ( 0 ),

188 
	`fAÎV¬sI
 ( 0 ),

189 
	`fN·r
 ( 0 ),

190 
	`fEffRef
 ( 0 ),

191 
	`fRªgeSign
 ( 0 ),

192 
	`fRªdom
 ( 0 ),

193 
	`fM—nS
 ( 0 ),

194 
	`fM—nB
 ( 0 ),

195 
	`fRmsS
 ( 0 ),

196 
	`fRmsB
 ( 0 ),

197 
	`fEffBvsSLoÿl
( 0 ),

198 
	`fV¬Hi¡S
 ( 0 ),

199 
	`fV¬Hi¡B
 ( 0 ),

200 
	`fV¬Hi¡S_smoÙh
( 0 ),

201 
	`fV¬Hi¡B_smoÙh
( 0 ),

202 
	`fV¬PdfS
 ( 0 ),

203 
	`fV¬PdfB
 ( 0 ),

204 
	$fNegEffW¬nšg
Ğ
kFALSE
 )

206 
	}
}

211 
BoŞ_t
 
	gTMVA
::
M‘hodCuts
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
,

212 
UIÁ_t
 )

214  (
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 == 2);

215 
	}
}

220 
	gTMVA
::
M‘hodCuts
::
	$In™
( )

222 
fV¬Hi¡S
 = 
fV¬Hi¡B
 = 0;

223 
fV¬Hi¡S_smoÙh
 = 
fV¬Hi¡B_smoÙh
 = 0;

224 
fV¬PdfS
 = 
fV¬PdfB
 = 0;

225 
fF™P¬ams
 = 0;

226 
fBš¬yT»eS
 = 
fBš¬yT»eB
 = 0;

227 
fEffSMš
 = 0;

228 
fEffSMax
 = 0;

231 
fN·r
 = 2*
	`G‘Nv¬
();

232 
fRªgeSign
 = 
Ãw
 
¡d
::
veùÜ
<
IÁ_t
> ( 
	`G‘Nv¬
() );

233 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è(*
fRªgeSign
)[ivar] = +1;

235 
fM—nS
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

236 
fM—nB
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

237 
fRmsS
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

238 
fRmsB
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

241 
fF™P¬ams
 = 
Ãw
 
¡d
::
veùÜ
<
EF™P¬am‘”s
>Ğ
	`G‘Nv¬
() );

242 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è(*
fF™P¬ams
)[iv¬] = 
kNÙEnfÜûd
;

244 
fF™M‘hod
 = 
kU£MÚ‹C¬lo
;

245 
fTe¡SigÇlEff
 = -1;

248 
fCutMš
 = 
Ãw
 
DoubË_t
*[
	`G‘Nv¬
()];

249 
fCutMax
 = 
Ãw
 
DoubË_t
*[
	`G‘Nv¬
()];

250 
UIÁ_t
 
i
=0; i<
	`G‘Nv¬
(); i++) {

251 
fCutMš
[
i
] = 
Ãw
 
DoubË_t
[
fNbšs
];

252 
fCutMax
[
i
] = 
Ãw
 
DoubË_t
[
fNbšs
];

256 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

257 
IÁ_t
 
ibš
=0; ibš<
fNbšs
; ibin++) {

258 
fCutMš
[
iv¬
][
ibš
] = 0;

259 
fCutMax
[
iv¬
][
ibš
] = 0;

263 
fTmpCutMš
 = 
Ãw
 
DoubË_t
[
	`G‘Nv¬
()];

264 
fTmpCutMax
 = 
Ãw
 
DoubË_t
[
	`G‘Nv¬
()];

265 
	}
}

270 
	gTMVA
::
M‘hodCuts
::~
	$M‘hodCuts
( )

272 
d–‘e
 
fRªgeSign
;

273 
d–‘e
 
fM—nS
;

274 
d–‘e
 
fM—nB
;

275 
d–‘e
 
fRmsS
;

276 
d–‘e
 
fRmsB
;

277 
d–‘e
 
fF™P¬ams
;

278 
d–‘e
 
fEffBvsSLoÿl
;

280 ià(
NULL
 !ğ
fCutRªgeMš
è
d–‘e
 [] fCutRangeMin;

281 ià(
NULL
 !ğ
fCutRªgeMax
è
d–‘e
 [] fCutRangeMax;

282 ià(
NULL
 !ğ
fAÎV¬sI
è
d–‘e
 [] fAllVarsI;

284 
UIÁ_t
 
i
=0;i<
	`G‘Nv¬
();i++) {

285 ià(
NULL
 !ğ
fCutMš
[
i
] ) 
d–‘e
 [] fCutMin[i];

286 ià(
NULL
 !ğ
fCutMax
[
i
] ) 
d–‘e
 [] fCutMax[i];

287 ià(
NULL
 !ğ
fCutRªge
[
i
]è
d–‘e
 fCutRange[i];

290 ià(
NULL
 !ğ
fCutMš
è
d–‘e
 [] fCutMin;

291 ià(
NULL
 !ğ
fCutMax
è
d–‘e
 [] fCutMax;

293 ià(
NULL
 !ğ
fTmpCutMš
è
d–‘e
 [] fTmpCutMin;

294 ià(
NULL
 !ğ
fTmpCutMax
è
d–‘e
 [] fTmpCutMax;

296 ià(
NULL
 !ğ
fBš¬yT»eS
è
d–‘e
 fBinaryTreeS;

297 ià(
NULL
 !ğ
fBš¬yT»eB
è
d–‘e
 fBinaryTreeB;

298 
	}
}

319 
	gTMVA
::
M‘hodCuts
::
	$Deş¬eO±iÚs
()

321 
	`Deş¬eO±iÚRef
(
fF™M‘hodS
 = "GA", "FitMethod", "Minimisation Method (GA, SA,‡nd MC‡rehe…rimary methodso be used;he others have been introduced foresting…urposes‡nd‡re depreciated)");

322 
	`AddP»DefV®
(
	`TSŒšg
("GA"));

323 
	`AddP»DefV®
(
	`TSŒšg
("SA"));

324 
	`AddP»DefV®
(
	`TSŒšg
("MC"));

325 
	`AddP»DefV®
(
	`TSŒšg
("MCEvents"));

326 
	`AddP»DefV®
(
	`TSŒšg
("MINUIT"));

327 
	`AddP»DefV®
(
	`TSŒšg
("EventScan"));

330 
	`Deş¬eO±iÚRef
(
fEffM‘hodS
 = "EffSel", "EffMethod", "Selection Method");

331 
	`AddP»DefV®
(
	`TSŒšg
("EffSel"));

332 
	`AddP»DefV®
(
	`TSŒšg
("EffPDF"));

335 
fCutRªge
.
	`»size
(
	`G‘Nv¬
());

336 
fCutRªgeMš
 = 
Ãw
 
DoubË_t
[
	`G‘Nv¬
()];

337 
fCutRªgeMax
 = 
Ãw
 
DoubË_t
[
	`G‘Nv¬
()];

338 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

339 
fCutRªge
[
iv¬
] = 0;

340 
fCutRªgeMš
[
iv¬
] = 
fCutRªgeMax
[ivar] = -1;

343 
	`Deş¬eO±iÚRef
Ğ
fCutRªgeMš
, 
	`G‘Nv¬
(), "CutRangeMin", "Minimum of‡llowed cut„ange (set…er variable)" );

344 
	`Deş¬eO±iÚRef
Ğ
fCutRªgeMax
, 
	`G‘Nv¬
(), "CutRangeMax", "Maximum of‡llowed cut„ange (set…er variable)" );

346 
fAÎV¬sI
 = 
Ãw
 
TSŒšg
[
	`G‘Nv¬
()];

348 
UIÁ_t
 
i
=0; i<
	`G‘Nv¬
(); i++è
fAÎV¬sI
[i] = "NotEnforced";

350 
	`Deş¬eO±iÚRef
(
fAÎV¬sI
, 
	`G‘Nv¬
(), "VarProp", "Categorisation of cuts");

351 
	`AddP»DefV®
(
	`TSŒšg
("NotEnforced"));

352 
	`AddP»DefV®
(
	`TSŒšg
("FMax"));

353 
	`AddP»DefV®
(
	`TSŒšg
("FMin"));

354 
	`AddP»DefV®
(
	`TSŒšg
("FSmart"));

355 
	}
}

363 
	gTMVA
::
M‘hodCuts
::
	$ProûssO±iÚs
()

365 ià(
	`IsNÜm®i£d
()) {

366 
	`Log
(è<< 
kWARNING
 << "NÜm®i§tiÚ oàthšpuˆv¬ŸbË fÜ cuˆİtimi§tiÚ i nÙ" << 
Endl
;

367 
	`Log
(è<< 
kWARNING
 << "suµÜ‹d beÿu£hi ´ovide šŒª¥¬’ˆcuˆv®ues,‡nd‚o" << 
Endl
;

368 
	`Log
(è<< 
kWARNING
 << "im´ovem’ˆšh³rfÜmªû oàth®gÜ™hm." << 
Endl
;

369 
	`Log
(è<< 
kWARNING
 << "PËa£„emov\"NÜm®i£\" o±iÚ from bookšg o±iÚ sŒšg" << 
Endl
;

370 
	`Log
(è<< 
kWARNING
 << "==> WÈ»£ˆnÜm®i§tiÚ fÏgØ\"F®£\"" << 
Endl
;

371 
	`S‘NÜm®i£d
Ğ
kFALSE
 );

374 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

375 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot yet‡vailable for method: "

376 << 
	`G‘M‘hodTy³Name
()

378 << 
Endl
;

381 ià(
fF™M‘hodS
 =ğ"MC" ) 
fF™M‘hod
 = 
kU£MÚ‹C¬lo
;

382 ià(
fF™M‘hodS
 =ğ"MCEv’ts"è
fF™M‘hod
 = 
kU£MÚ‹C¬loEv’ts
;

383 ià(
fF™M‘hodS
 =ğ"GA" ) 
fF™M‘hod
 = 
kU£G’‘icAlgÜ™hm
;

384 ià(
fF™M‘hodS
 =ğ"SA" ) 
fF™M‘hod
 = 
kU£SimuÏ‹dAÂ—lšg
;

385 ià(
fF™M‘hodS
 == "MINUIT" ) {

386 
fF™M‘hod
 = 
kU£Mšu™
;

387 
	`Log
(è<< 
kWARNING
 << "poÜ…”fÜmªû oàMINUIT iÀM‘hodCuts;…»ã¼ed f™ m‘hod: GA" << 
Endl
;

389 ià(
fF™M‘hodS
 =ğ"Ev’tSÿn" ) 
fF™M‘hod
 = 
kU£Ev’tSÿn
;

390 
	`Log
(è<< 
kFATAL
 << "unknowÀmšimi§tiÚ m‘hod: " << 
fF™M‘hodS
 << 
Endl
;

392 ià(
fEffM‘hodS
 =ğ"EFFSEL" ) 
fEffM‘hod
 = 
kU£Ev’tS–eùiÚ
;

393 ià(
fEffM‘hodS
 =ğ"EFFPDF" ) 
fEffM‘hod
 = 
kU£PDFs
;

394 
fEffM‘hod
 = 
kU£Ev’tS–eùiÚ
;

397 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("Use optimization method: \"%s\"",

398 (
fF™M‘hod
 =ğ
kU£MÚ‹C¬lo
) ? "Monte Carlo" :

399 (
fF™M‘hod
 =ğ
kU£MÚ‹C¬lo
) ? "Monte-Carlo-Event sampling" :

400 (
fF™M‘hod
 =ğ
kU£Ev’tSÿn
) ? "Full Event Scan (slow)" :

401 (
fF™M‘hod
 =ğ
kU£Mšu™
è? "MINUIT" : "G’‘iøAlgÜ™hm" ) << 
Endl
;

402 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("Useƒfficiency computation method: \"%s\"",

403 (
fEffM‘hod
 =ğ
kU£Ev’tS–eùiÚ
è? "Ev’ˆS–eùiÚ" : "PDF" ) << 
Endl
;

406 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

407 
fCutRªge
[
iv¬
] = 
Ãw
 
	`IÁ”v®
Ğ
fCutRªgeMš
[iv¬], 
fCutRªgeMax
[ivar] );

411 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

412 
EF™P¬am‘”s
 
theF™P
 = 
kNÙEnfÜûd
;

413 ià(
fAÎV¬sI
[
iv¬
] =ğ"" || fAÎV¬sI[iv¬] =ğ"NÙEnfÜûd"è
theF™P
 = 
kNÙEnfÜûd
;

414 ià(
fAÎV¬sI
[
iv¬
] =ğ"FMax" ) 
theF™P
 = 
kFÜûMax
;

415 ià(
fAÎV¬sI
[
iv¬
] =ğ"FMš" ) 
theF™P
 = 
kFÜûMš
;

416 ià(
fAÎV¬sI
[
iv¬
] =ğ"FSm¬t" ) 
theF™P
 = 
kFÜûSm¬t
;

418 
	`Log
(è<< 
kFATAL
 << "unknowÀv®u\'" << 
fAÎV¬sI
[
iv¬
]

419 << "\' fÜ f™…¬am‘” o±iÚ " << 
	`FÜm
("V¬Prİ[%i]",
iv¬
è<< 
Endl
;

421 (*
fF™P¬ams
)[
iv¬
] = 
theF™P
;

423 ià(
theF™P
 !ğ
kNÙEnfÜûd
)

424 
	`Log
(è<< 
kINFO
 << "U£ \"" << 
fAÎV¬sI
[
iv¬
]

425 << "\" cut fÜ v¬ŸbË: " << "'" << (*
fIÅutV¬s
)[
iv¬
] << "'" << 
Endl
;

427 
	}
}

432 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

435 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

438 ià(
fCutMš
 =ğ
NULL
 || 
fCutMax
 =ğNULL || 
fNbšs
 == 0) {

439 
	`Log
(è<< 
kFATAL
 << "<Eval_Cuts> fCutMin/Max have zero…ointer. "

440 << "Did you book Cut ?" << 
Endl
;

443 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

446 ià(
fTe¡SigÇlEff
 > 0) {

448 
IÁ_t
 
ibš
 = 
fEffBvsSLoÿl
->
	`FšdBš
Ğ
fTe¡SigÇlEff
 );

449 ià(
ibš
 < 0 ) ibin = 0;

450 ià(
ibš
 >ğ
fNbšs
) ibin = fNbins - 1;

452 
BoŞ_t
 
·s£d
 = 
kTRUE
;

453 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

454 
·s£d
 &ğĞ(
ev
->
	`G‘V®ue
(
iv¬
è> 
fCutMš
[iv¬][
ibš
]) &&

455 (
ev
->
	`G‘V®ue
(
iv¬
è<ğ
fCutMax
[iv¬][
ibš
]) );

457  
·s£d
 ? 1. : 0. ;

460 
	}
}

465 
	gTMVA
::
M‘hodCuts
::
	$PrštCuts
Ğ
DoubË_t
 
effS
 ) const

467 
¡d
::
veùÜ
<
DoubË_t
> 
cutsMš
;

468 
¡d
::
veùÜ
<
DoubË_t
> 
cutsMax
;

469 
IÁ_t
 
ibš
 = 
fEffBvsSLoÿl
->
	`FšdBš
Ğ
effS
 );

471 
DoubË_t
 
ŒueEffS
 = 
	`G‘Cuts
Ğ
effS
, 
cutsMš
, 
cutsMax
 );

474 
¡d
::
veùÜ
<
TSŒšg
>* 
v¬Vec
 = 0;

475 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NumOfT¿nsfÜm©iÚs
() == 0) {

477 
v¬Vec
 = 
Ãw
 
¡d
::
veùÜ
<
TSŒšg
>;

478 
UIÁ_t
 
iv¬
=0; iv¬<
cutsMš
.
	`size
(); ivar++) {

479 
v¬Vec
->
	`push_back
Ğ
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Lab–
() );

482 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NumOfT¿nsfÜm©iÚs
() == 1) {

484 
v¬Vec
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚSŒšgsOfLa¡T¿nsfÜm
();

488 
v¬Vec
 = 
Ãw
 
¡d
::
veùÜ
<
TSŒšg
>;

489 
UIÁ_t
 
iv¬
=0; iv¬<
cutsMš
.
	`size
(); ivar++) {

490 
v¬Vec
->
	`push_back
Ğ
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Lab–
() + " [transformed]" );

494 
UIÁ_t
 
maxL
 = 0;

495 
UIÁ_t
 
iv¬
=0; iv¬<
cutsMš
.
	`size
(); ivar++) {

496 ià((
UIÁ_t
)(*
v¬Vec
)[
iv¬
].
	`L’gth
(è> 
maxL
) maxL = (*varVec)[ivar].Length();

498 
UIÁ_t
 
maxLše
 = 20+
maxL
+16;

500 
UIÁ_t
 
i
=0; i<
maxLše
; i++è
	`Log
() << "-";

501 
	`Log
(è<< 
Endl
;

502 
	`Log
(è<< 
kHEADER
 << "Cuˆv®ue fÜ„eque¡ed sigÇÈeffic›ncy: " << 
ŒueEffS
 << 
Endl
;

503 
	`Log
(è<< 
kINFO
 << "CÜ»¥Údšg backgroundƒffic›ncy : " << 
fEffBvsSLoÿl
->
	`G‘BšCÚ‹Á
Ğ
ibš
 ) << 
Endl
;

504 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NumOfT¿nsfÜm©iÚs
() == 1) {

505 
	`Log
(è<< 
kINFO
 << "Transformation‡ppliedo input variables : \""

506 << 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NameOfLa¡T¿nsfÜm
(è<< "\"" << 
Endl
;

508 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NumOfT¿nsfÜm©iÚs
() > 1) {

509 
	`Log
(è<< 
kINFO
 << "[ MÜthª oÃ (=" << 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘NumOfT¿nsfÜm©iÚs
() << ") "

510 << "¿nsfÜm©iÚ ­¶›d iÀŒªsfÜm©iÚ chaš; cut ­¶›d oÀŒªsfÜmed quªt™› ] " << 
Endl
;

513 
	`Log
(è<< 
kINFO
 << "T¿nsfÜm©iÚ‡µl›dØšpuˆv¬ŸbË : NÚe" << 
Endl
;

515 
UIÁ_t
 
i
=0; i<
maxLše
; i++è
	`Log
() << "-";

516 
	`Log
(è<< 
Endl
;

517 
UIÁ_t
 
iv¬
=0; iv¬<
cutsMš
.
	`size
(); ivar++) {

518 
	`Log
(è<< 
kINFO


519 << "Cut[" << 
¡d
::
	`£tw
(2è<< 
iv¬
 << "]: "

520 << 
¡d
::
	`£tw
(10è<< 
cutsMš
[
iv¬
]

522 << 
¡d
::
	`£tw
(
maxL
è<< (*
v¬Vec
)[
iv¬
]

524 << 
¡d
::
	`£tw
(10è<< 
cutsMax
[
iv¬
] << 
Endl
;

526 
UIÁ_t
 
i
=0; i<
maxLše
; i++è
	`Log
() << "-";

527 
	`Log
(è<< 
Endl
;

529 
d–‘e
 
v¬Vec
;

530 
	}
}

536 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
	$G‘Cuts
Ğ
DoubË_t
 
effS
, DoubË_t* 
cutMš
, DoubË_t* 
cutMax
 ) const

538 
¡d
::
veùÜ
<
DoubË_t
> 
	`cMš
Ğ
	`G‘Nv¬
() );

539 
¡d
::
veùÜ
<
DoubË_t
> 
	`cMax
Ğ
	`G‘Nv¬
() );

540 
DoubË_t
 
ŒueEffS
 = 
	`G‘Cuts
Ğ
effS
, 
cMš
, 
cMax
 );

541 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

542 
cutMš
[
iv¬
] = 
cMš
[ivar];

543 
cutMax
[
iv¬
] = 
cMax
[ivar];

545  
ŒueEffS
;

546 
	}
}

551 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
G‘Cuts
ĞDoubË_ˆ
effS
,

552 
¡d
::
veùÜ
<
DoubË_t
>& 
cutMš
,

553 
¡d
::
veùÜ
<
DoubË_t
>& 
cutMax
 ) const

556 
IÁ_t
 
ibš
 = 
fEffBvsSLoÿl
->
FšdBš
Ğ
effS
 );

559 
DoubË_t
 
	gŒueEffS
 = 
fEffBvsSLoÿl
->
G‘BšLowEdge
Ğ
ibš
 );

561 
	gibš
--;

562 ià(
	gibš
 < 0 ) ibin = 0;

563 ià(
	gibš
 >ğ
fNbšs
è
ibš
 = fNbins - 1;

565 
	gcutMš
.
ş—r
();

566 
	gcutMax
.
ş—r
();

567 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

568 
	gcutMš
.
push_back
Ğ
fCutMš
[
iv¬
][
ibš
] );

569 
	gcutMax
.
push_back
Ğ
fCutMax
[
iv¬
][
ibš
] );

572  
	gŒueEffS
;

578 
	gTMVA
::
M‘hodCuts
::
	$T¿š
( )

580 ià(
fEffM‘hod
 =ğ
kU£PDFs
è
	`C»©eV¬ŸbËPDFs
();

583 ià(
fBš¬yT»eS
 !ğ0è{ 
d–‘e
 fBinaryTreeS; fBinaryTreeS = 0; }

584 ià(
fBš¬yT»eB
 !ğ0è{ 
d–‘e
 fBinaryTreeB; fBinaryTreeB = 0; }

590 
fBš¬yT»eS
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

591 
fBš¬yT»eS
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
), 
fSigÇlCÏss
 );

592 
fBš¬yT»eB
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

593 
fBš¬yT»eB
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
), 
fBackgroundCÏss
 );

595 
UIÁ_t
 
iv¬
 =0; iv¬ < 
	`D©a
()->
	`G‘NV¬ŸbËs
(); ivar++) {

596 (*
fM—nS
)[
iv¬
] = 
fBš¬yT»eS
->
	`M—n
(
Ty³s
::
kSigÇl
, ivar);

597 (*
fRmsS
)[
iv¬
] = 
fBš¬yT»eS
->
	`RMS
 (
Ty³s
::
kSigÇl
, ivar);

598 (*
fM—nB
)[
iv¬
] = 
fBš¬yT»eB
->
	`M—n
(
Ty³s
::
kBackground
, ivar);

599 (*
fRmsB
)[
iv¬
] = 
fBš¬yT»eB
->
	`RMS
 (
Ty³s
::
kBackground
, ivar);

602 
DoubË_t
 
xmš
 = 
TM©h
::
	`Mš
(
fBš¬yT»eS
->Mš(
Ty³s
::
kSigÇl
, 
iv¬
),

603 
fBš¬yT»eB
->
	`Mš
(
Ty³s
::
kBackground
, 
iv¬
));

604 
DoubË_t
 
xmax
 = 
TM©h
::
	`Max
(
fBš¬yT»eS
->Max(
Ty³s
::
kSigÇl
, 
iv¬
),

605 
fBš¬yT»eB
->
	`Max
(
Ty³s
::
kBackground
, 
iv¬
));

608 
DoubË_t
 
•s
 = 0.01*(
xmax
 - 
xmš
);

609 
xmš
 -ğ
•s
;

610 
xmax
 +ğ
•s
;

612 ià(
TM©h
::
	`Abs
(
fCutRªge
[
iv¬
]->
	`G‘Mš
(è- fCutRªge[iv¬]->
	`G‘Max
()) < 1.0e-300 ) {

613 
fCutRªge
[
iv¬
]->
	`S‘Mš
Ğ
xmš
 );

614 
fCutRªge
[
iv¬
]->
	`S‘Max
Ğ
xmax
 );

616 ià(
xmš
 > 
fCutRªge
[
iv¬
]->
	`G‘Mš
()èfCutRªge[iv¬]->
	`S‘Mš
( xmin );

617 ià(
xmax
 < 
fCutRªge
[
iv¬
]->
	`G‘Max
()èfCutRªge[iv¬]->
	`S‘Max
( xmax );

620 
¡d
::
veùÜ
<
TH1F
*> 
sigÇlDi¡
, 
bkgDi¡
;

623 
d–‘e
 
fEffBvsSLoÿl
;

624 
fEffBvsSLoÿl
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
() + "_effBvsSLocal",

625 
	`TSŒšg
(
	`G‘Name
()è+ "ƒffic›ncy oàB v S", 
fNbšs
, 0.0, 1.0 );

626 
fEffBvsSLoÿl
->
	`S‘DœeùÜy
(0);

629 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
fEffBvsSLoÿl
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

632 ià(
fF™M‘hod
 =ğ
kU£G’‘icAlgÜ™hm
 ||

633 
fF™M‘hod
 =ğ
kU£MÚ‹C¬lo
 ||

634 
fF™M‘hod
 =ğ
kU£Mšu™
 ||

635 
fF™M‘hod
 =ğ
kU£SimuÏ‹dAÂ—lšg
) {

638 
¡d
::
veùÜ
<
IÁ”v®
*> 
¿nges
;

640 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

642 
IÁ_t
 
nbšs
 = 0;

643 ià(
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘V¬Ty³
() == 'I') {

644 
nbšs
 = 
	`IÁ_t
(
fCutRªge
[
iv¬
]->
	`G‘Max
(è- fCutRªge[iv¬]->
	`G‘Mš
()) + 1;

647 ià((*
fF™P¬ams
)[
iv¬
] =ğ
kFÜûSm¬t
) {

648 ià((*
fM—nS
)[
iv¬
] > (*
fM—nB
)[iv¬]è(*
fF™P¬ams
)[iv¬] = 
kFÜûMax
;

649 (*
fF™P¬ams
)[
iv¬
] = 
kFÜûMš
;

652 ià((*
fF™P¬ams
)[
iv¬
] =ğ
kFÜûMš
) {

653 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ
fCutRªge
[
iv¬
]->
	`G‘Mš
(), fCutRªge[iv¬]->G‘Mš(), 
nbšs
 ) );

654 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ0, 
fCutRªge
[
iv¬
]->
	`G‘Max
(è- fCutRªge[iv¬]->
	`G‘Mš
(), 
nbšs
 ) );

656 ià((*
fF™P¬ams
)[
iv¬
] =ğ
kFÜûMax
) {

657 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ
fCutRªge
[
iv¬
]->
	`G‘Mš
(), fCutRªge[iv¬]->
	`G‘Max
(), 
nbšs
 ) );

658 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ
fCutRªge
[
iv¬
]->
	`G‘Max
(è- fCutRªge[iv¬]->
	`G‘Mš
(),

659 
fCutRªge
[
iv¬
]->
	`G‘Max
(è- fCutRªge[iv¬]->
	`G‘Mš
(), 
nbšs
 ) );

662 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ
fCutRªge
[
iv¬
]->
	`G‘Mš
(), fCutRªge[iv¬]->
	`G‘Max
(), 
nbšs
 ) );

663 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ0, 
fCutRªge
[
iv¬
]->
	`G‘Max
(è- fCutRªge[iv¬]->
	`G‘Mš
(), 
nbšs
 ) );

668 
F™‹rBa£
* 
f™‹r
 = 
NULL
;

670 
fF™M‘hod
) {

671 
kU£G’‘icAlgÜ™hm
:

672 
f™‹r
 = 
Ãw
 
	`G’‘icF™‹r
Ğ*
this
, 
	`FÜm
("%sF™‹r_GA", 
	`G‘Name
()), 
¿nges
, 
	`G‘O±iÚs
() );

674 
kU£MÚ‹C¬lo
:

675 
f™‹r
 = 
Ãw
 
	`MCF™‹r
 ( *
this
, 
	`FÜm
("%sF™‹r_MC", 
	`G‘Name
()), 
¿nges
, 
	`G‘O±iÚs
() );

677 
kU£Mšu™
:

678 
f™‹r
 = 
Ãw
 
	`Mšu™F™‹r
 ( *
this
, 
	`FÜm
("%sF™‹r_MINUIT", 
	`G‘Name
()), 
¿nges
, 
	`G‘O±iÚs
() );

680 
kU£SimuÏ‹dAÂ—lšg
:

681 
f™‹r
 = 
Ãw
 
	`SimuÏ‹dAÂ—lšgF™‹r
Ğ*
this
, 
	`FÜm
("%sF™‹r_SA", 
	`G‘Name
()), 
¿nges
, 
	`G‘O±iÚs
() );

684 
	`Log
(è<< 
kFATAL
 << "WrÚg f™ m‘hod: " << 
fF™M‘hod
 << 
Endl
;

687 ià(
fIÁ”aùive
è
f™‹r
->
	`S‘IPythÚIÁ”aùive
(&
fEx™FromT¿ššg
, &
fIPyMaxI‹r
, &
fIPyCu¼’tI‹r
);

689 
f™‹r
->
	`CheckFÜUnu£dO±iÚs
();

692 
f™‹r
->
	`Run
();

695 
UIÁ_t
 
iv¬
=0; iv¬<
¿nges
.
	`size
(); iv¬++è
d–‘e
„anges[ivar];

696 
d–‘e
 
f™‹r
;

700 ià(
fF™M‘hod
 =ğ
kU£Ev’tSÿn
) {

702 
IÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

703 
IÁ_t
 
ic
 = 0;

706 
IÁ_t
 
n§m¶es
 = 
	`IÁ_t
(0.5*
Ãv’ts
*(nevents - 1));

707 
Tim”
 
	`tim”
Ğ
n§m¶es
, 
	`G‘Name
() );

708 
fIPyMaxI‹r
 = 
n§m¶es
;

710 
	`Log
(è<< 
kINFO
 << "RuÂšg fuÎƒv’ˆsÿn: " << 
Endl
;

711 
IÁ_t
 
›vt1
=0; ievt1<
Ãv’ts
; ievt1++) {

712 
IÁ_t
 
›vt2
=
›vt1
+1; ievt2<
Ãv’ts
; ievt2++) {

714 
fIPyCu¼’tI‹r
 = 
ic
;

715 ià(
fEx™FromT¿ššg
) ;

716 
	`E¡im©ÜFunùiÚ
Ğ
›vt1
, 
›vt2
 );

719 
ic
++;

720 ià((
n§m¶es
<10000è|| 
ic
%10000 =ğ0è
tim”
.
	`D¿wProg»ssB¬
( ic );

725 ià(
fF™M‘hod
 =ğ
kU£MÚ‹C¬loEv’ts
) {

727 
IÁ_t
 
n§m¶es
 = 200000;

728 
UIÁ_t
 
£ed
 = 100;

729 
	`Deş¬eO±iÚRef
Ğ
n§m¶es
, "SampleSize", "Number of Monte-Carlo-Event samples" );

730 
	`Deş¬eO±iÚRef
Ğ
£ed
, "Seed", "Seed forhe„andom generator (0akes„andom seeds)" );

731 
	`P¬£O±iÚs
();

733 
IÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

734 
IÁ_t
 
ic
 = 0;

737 
Tim”
 
	`tim”
Ğ
n§m¶es
, 
	`G‘Name
() );

738 
fIPyMaxI‹r
 = 
n§m¶es
;

741 
TRªdom3
*
ºd
 = 
Ãw
 
	`TRªdom3
Ğ
£ed
 );

743 
	`Log
(è<< 
kINFO
 << "RuÂšg MÚ‹-C¬lo-Ev’ˆ§m¶šg ov” " << 
n§m¶es
 << "ƒv’ts" << 
Endl
;

744 
¡d
::
veùÜ
<
DoubË_t
> 
	`·rs
Ğ2*
	`G‘Nv¬
() );

746 
IÁ_t
 
™oy
=0; itoy<
n§m¶es
; itoy++) {

747 
fIPyCu¼’tI‹r
 = 
ic
;

748 ià(
fEx™FromT¿ššg
) ;

750 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

755 
BoŞ_t
 
isSigÇl
 = 
kFALSE
;

756 
IÁ_t
 
›vt1
, 
›vt2
;

757 
DoubË_t
 
evt1
 = 0., 
evt2
 = 0.;

758 
IÁ_t
 
nb»ak
 = 0;

759 !
isSigÇl
) {

760 
›vt1
 = 
	`IÁ_t
(
ºd
->
	`UnifÜm
(0.,1.)*
Ãv’ts
);

761 
›vt2
 = 
	`IÁ_t
(
ºd
->
	`UnifÜm
(0.,1.)*
Ãv’ts
);

763 cÚ¡ 
Ev’t
 *
ev1
 = 
	`G‘Ev’t
(
›vt1
);

764 
isSigÇl
 = 
	`D©aInfo
().
	`IsSigÇl
(
ev1
);

765 
evt1
 = 
ev1
->
	`G‘V®ue
Ğ
iv¬
 );

767 cÚ¡ 
Ev’t
 *
ev2
 = 
	`G‘Ev’t
(
›vt2
);

768 
isSigÇl
 &ğ
	`D©aInfo
().
	`IsSigÇl
(
ev2
);

769 
evt2
 = 
ev2
->
	`G‘V®ue
Ğ
iv¬
 );

771 ià(
nb»ak
++ > 10000) {

772 
	`Log
(è<< 
kFATAL
 << "<MCEvents>: could‚ot find signalƒvents"

774 << 
Endl
;

775 
isSigÇl
 = 1;

780 ià(
evt1
 > 
evt2
è{ 
DoubË_t
 
z
 =ƒvt1;ƒvt1 =ƒvt2;ƒvt2 = z; }

781 
·rs
[2*
iv¬
] = 
evt1
;

782 
·rs
[2*
iv¬
+1] = 
evt2
 - 
evt1
;

786 
	`E¡im©ÜFunùiÚ
Ğ
·rs
 );

789 
ic
++;

790 ià((
n§m¶es
<1000è|| 
ic
%1000 =ğ0è
tim”
.
	`D¿wProg»ssB¬
( ic );

793 
d–‘e
 
ºd
;

796 
	`Log
(è<< 
kFATAL
 << "UnknowÀmšimi§tiÚ m‘hod: " << 
fF™M‘hod
 << 
Endl
;

798 ià(
fBš¬yT»eS
 !ğ0è{ 
d–‘e
 fBinaryTreeS; fBinaryTreeS = 0; }

799 ià(
fBš¬yT»eB
 !ğ0è{ 
d–‘e
 fBinaryTreeB; fBinaryTreeB = 0; }

802 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

803 
IÁ_t
 
ibš
=0; ibš<
fNbšs
; ibin++) {

805 ià((*
fF™P¬ams
)[
iv¬
] =ğ
kFÜûMš
 && 
fCutMš
[iv¬][
ibš
] > -
fgMaxAbsCutV®
) {

806 
fCutMš
[
iv¬
][
ibš
] = -
fgMaxAbsCutV®
;

808 ià((*
fF™P¬ams
)[
iv¬
] =ğ
kFÜûMax
 && 
fCutMax
[iv¬][
ibš
] < 
fgMaxAbsCutV®
) {

809 
fCutMax
[
iv¬
][
ibš
] = 
fgMaxAbsCutV®
;

817 
DoubË_t
 
•sÚ
 = 0.0001;

818 
DoubË_t
 
eff
=0.1;ƒff<0.95;ƒfà+ğ0.1è
	`PrštCuts
Ğeff+
•sÚ
 );

820 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

821 
	`Ex™FromT¿ššg
();

822 
	}
}

827 
	gTMVA
::
M‘hodCuts
::
	$Te¡CÏssifiÿtiÚ
()

829 
	}
}

834 
DoubË_t
 
TMVA
::
M‘hodCuts
::
	$E¡im©ÜFunùiÚ
Ğ
IÁ_t
 
›vt1
, IÁ_ˆ
›vt2
 )

836 cÚ¡ 
Ev’t
 *
ev1
 = 
	`G‘Ev’t
(
›vt1
);

837 ià(!
	`D©aInfo
().
	`IsSigÇl
(
ev1
))  -1;

839 cÚ¡ 
Ev’t
 *
ev2
 = 
	`G‘Ev’t
(
›vt2
);

840 ià(!
	`D©aInfo
().
	`IsSigÇl
(
ev2
))  -1;

842 cÚ¡ 
IÁ_t
 
nv¬
 = 
	`G‘Nv¬
();

843 
DoubË_t
* 
evt1
 = 
Ãw
 DoubË_t[
nv¬
];

844 
DoubË_t
* 
evt2
 = 
Ãw
 DoubË_t[
nv¬
];

846 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

847 
evt1
[
iv¬
] = 
ev1
->
	`G‘V®ue
( ivar );

848 
evt2
[
iv¬
] = 
ev2
->
	`G‘V®ue
( ivar );

852 
¡d
::
veùÜ
<
DoubË_t
> 
·rs
;

853 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

854 
DoubË_t
 
cutMš
;

855 
DoubË_t
 
cutMax
;

856 ià(
evt1
[
iv¬
] < 
evt2
[ivar]) {

857 
cutMš
 = 
evt1
[
iv¬
];

858 
cutMax
 = 
evt2
[
iv¬
];

861 
cutMš
 = 
evt2
[
iv¬
];

862 
cutMax
 = 
evt1
[
iv¬
];

865 
·rs
.
	`push_back
Ğ
cutMš
 );

866 
·rs
.
	`push_back
Ğ
cutMax
 - 
cutMš
 );

869 
d–‘e
 [] 
evt1
;

870 
d–‘e
 [] 
evt2
;

872  
	`Compu‹E¡im©Ü
Ğ
·rs
 );

873 
	}
}

878 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

880  
Compu‹E¡im©Ü
Ğ
·rs
 );

893 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
Compu‹E¡im©Ü
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

899 
DoubË_t
 
effS
 = 0, 
	geffB
 = 0;

900 
	gthis
->
M©chP¬sToCuts
Ğ
·rs
, &
fTmpCutMš
[0], &
fTmpCutMax
[0] );

903 
	gfEffM‘hod
) {

904 
	gkU£PDFs
:

905 
this
->
G‘EffsäomPDFs
 (&
fTmpCutMš
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

907 
	gkU£Ev’tS–eùiÚ
:

908 
this
->
G‘EffsäomS–eùiÚ
 (&
fTmpCutMš
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

911 
this
->
G‘EffsäomS–eùiÚ
 (&
fTmpCutMš
[0], &
fTmpCutMax
[0], 
effS
, 
effB
);

914 
DoubË_t
 
	g‘a
 = 0;

922 
IÁ_t
 
	gibšS
 = 
fEffBvsSLoÿl
->
FšdBš
Ğ
effS
 );

924 
DoubË_t
 
	geffBH
 = 
fEffBvsSLoÿl
->
G‘BšCÚ‹Á
Ğ
ibšS
 );

925 
DoubË_t
 
	geffBH_Ëá
 = (
ibšS
 > 1 ) ? 
fEffBvsSLoÿl
->
G‘BšCÚ‹Á
ĞibšS-1 ) : 
effBH
;

926 
DoubË_t
 
	geffBH_right
 = (
ibšS
 < 
fNbšs
è? 
fEffBvsSLoÿl
->
G‘BšCÚ‹Á
ĞibšS+1 ) : 
effBH
;

928 
DoubË_t
 
	gav”age
 = 0.5*(
effBH_Ëá
 + 
effBH_right
);

929 ià(
	geffBH
 < 
	geffB
è
	gav”age
 = 
effBH
;

933 
	g‘a
 = ( -
TM©h
::
Abs
(
effBH
-
av”age
è+ (1.0 - (effBH - 
effB
))è/ (1.0 + 
effS
);

940 ià(
	geffBH
 < 0 ||ƒffBH > 
	geffB
) {

941 
	gfEffBvsSLoÿl
->
S‘BšCÚ‹Á
Ğ
ibšS
, 
effB
 );

942 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

943 
	gfCutMš
[
iv¬
][
ibšS
-1] = 
fTmpCutMš
[ivar];

944 
	gfCutMax
[
iv¬
][
ibšS
-1] = 
fTmpCutMax
[ivar];

953 ià(
	gibšS
<=1) {

957 
DoubË_t
 
³ÇÉy
=0.,
	gdiff
=0.;

958 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

959 
	gdiff
=(
fCutRªge
[
iv¬
]->
G‘Max
()-
fTmpCutMax
[iv¬])/(fCutRªge[iv¬]->G‘Max()-fCutRªge[iv¬]->
G‘Mš
());

960 
	g³ÇÉy
+=
diff
*diff;

961 
	gdiff
=(
fCutRªge
[
iv¬
]->
G‘Mš
()-
fTmpCutMš
[iv¬])/(fCutRªge[iv¬]->
G‘Max
()-fCutRange[ivar]->GetMin());

962 
	g³ÇÉy
+=4.*
diff
*diff;

965 ià(
	geffS
<1.e-4è 10.0+
	g³ÇÉy
;

966  10.*(1.-10.*
	geffS
);

968  
	g‘a
;

974 
	gTMVA
::
M‘hodCuts
::
M©chP¬sToCuts
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> & 
·rs
,

975 
DoubË_t
* 
cutMš
, DoubË_t* 
cutMax
 )

977 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

978 
IÁ_t
 
	g¬
 = 2*
iv¬
;

979 
	gcutMš
[
iv¬
] = ((*
fRªgeSign
)[iv¬] > 0è? 
·rs
[
¬
] :…ars[ipar] -…ars[ipar+1];

980 
	gcutMax
[
iv¬
] = ((*
fRªgeSign
)[iv¬] > 0è? 
·rs
[
¬
] +…ars[ipar+1] :…ars[ipar];

987 
	gTMVA
::
M‘hodCuts
::
M©chCutsToP¬s
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
·rs
,

988 
DoubË_t
** 
cutMšAÎ
, DoubË_t** 
cutMaxAÎ
, 
IÁ_t
 
ibš
 )

990 ià(
	gibš
 < 1 || ibš > 
	gfNbšs
è
Log
(è<< 
	gkFATAL
 << "::MatchCutsToPars: binƒrror: "

991 << 
	gibš
 << 
	gEndl
;

993 cÚ¡ 
UIÁ_t
 
	gnv¬
 = 
G‘Nv¬
();

994 
DoubË_t
 *
	gcutMš
 = 
Ãw
 DoubË_t[
nv¬
];

995 
DoubË_t
 *
	gcutMax
 = 
Ãw
 DoubË_t[
nv¬
];

996 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

997 
	gcutMš
[
iv¬
] = 
cutMšAÎ
[iv¬][
ibš
-1];

998 
	gcutMax
[
iv¬
] = 
cutMaxAÎ
[iv¬][
ibš
-1];

1001 
M©chCutsToP¬s
Ğ
·rs
, 
cutMš
, 
cutMax
 );

1002 
	gd–‘e
 [] 
	gcutMš
;

1003 
	gd–‘e
 [] 
	gcutMax
;

1009 
	gTMVA
::
M‘hodCuts
::
M©chCutsToP¬s
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
·rs
,

1010 
DoubË_t
* 
cutMš
, DoubË_t* 
cutMax
 )

1012 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

1013 
IÁ_t
 
	g¬
 = 2*
iv¬
;

1014 
	g·rs
[
¬
] = ((*
fRªgeSign
)[
iv¬
] > 0è? 
cutMš
[iv¬] : 
cutMax
[ivar];

1015 
	g·rs
[
¬
+1] = 
cutMax
[
iv¬
] - 
cutMš
[ivar];

1023 
	gTMVA
::
M‘hodCuts
::
	$G‘EffsäomPDFs
Ğ
DoubË_t
* 
cutMš
, DoubË_t* 
cutMax
,

1024 
DoubË_t
& 
effS
, DoubË_t& 
effB
 )

1026 
effS
 = 1.0;

1027 
effB
 = 1.0;

1028 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1029 
effS
 *ğ(*
fV¬PdfS
)[
iv¬
]->
	`G‘IÁeg¿l
Ğ
cutMš
[iv¬], 
cutMax
[ivar] );

1030 
effB
 *ğ(*
fV¬PdfB
)[
iv¬
]->
	`G‘IÁeg¿l
Ğ
cutMš
[iv¬], 
cutMax
[ivar] );

1034 ifĞ
effS
 < 0.0 ) {

1035 
effS
 = 0.0;

1036 ifĞ!
fNegEffW¬nšg
 ) 
	`Log
(è<< 
kWARNING
 << "Neg©ivsigÇÈeffic›ncy found‡nd s‘Ø0. Thi i ´obably dutØmªyƒv’t w™h‚eg©ivweight š‡ c”š cut-»giÚ." << 
Endl
;

1037 
fNegEffW¬nšg
 = 
kTRUE
;

1039 ifĞ
effB
 < 0.0 ) {

1040 
effB
 = 0.0;

1041 ifĞ!
fNegEffW¬nšg
 ) 
	`Log
(è<< 
kWARNING
 << "Neg©ivbackgroundƒffic›ncy found‡nd s‘Ø0. Thi i ´obably dutØmªyƒv’t w™h‚eg©ivweight š‡ c”š cut-»giÚ." << 
Endl
;

1042 
fNegEffW¬nšg
 = 
kTRUE
;

1044 
	}
}

1050 
	gTMVA
::
M‘hodCuts
::
	$G‘EffsäomS–eùiÚ
Ğ
DoubË_t
* 
cutMš
, DoubË_t* 
cutMax
,

1051 
DoubË_t
& 
effS
, DoubË_t& 
effB
)

1053 
Flßt_t
 
nTÙS
 = 0, 
nTÙB
 = 0;

1054 
Flßt_t
 
nS–S
 = 0, 
nS–B
 = 0;

1056 
VŞume
* 
vŞume
 = 
Ãw
 
	`VŞume
Ğ
cutMš
, 
cutMax
, 
	`G‘Nv¬
() );

1059 
nS–S
 = 
fBš¬yT»eS
->
	`S—rchVŞume
Ğ
vŞume
 );

1060 
nS–B
 = 
fBš¬yT»eB
->
	`S—rchVŞume
Ğ
vŞume
 );

1062 
d–‘e
 
vŞume
;

1065 
nTÙS
 = 
fBš¬yT»eS
->
	`G‘SumOfWeights
();

1066 
nTÙB
 = 
fBš¬yT»eB
->
	`G‘SumOfWeights
();

1069 ià(
nTÙS
 =ğ0 && 
nTÙB
 == 0) {

1070 
	`Log
(è<< 
kFATAL
 << "<GetEffsfromSelection> fatalƒrror in zerootal‚umber ofƒvents:"

1071 << "‚TÙS,‚TÙB: " << 
nTÙS
 << " " << 
nTÙB
 << " ***" << 
Endl
;

1075 ià(
nTÙS
 == 0 ) {

1076 
effS
 = 0;

1077 
effB
 = 
nS–B
/
nTÙB
;

1078 
	`Log
(è<< 
kWARNING
 << "<Compu‹E¡im©Ü> z”Ønumb” oàsigÇÈev’ts" << 
Endl
;

1080 ià(
nTÙB
 == 0) {

1081 
effB
 = 0;

1082 
effS
 = 
nS–S
/
nTÙS
;

1083 
	`Log
(è<< 
kWARNING
 << "<Compu‹E¡im©Ü> z”Ønumb” oàbackgroundƒv’ts" << 
Endl
;

1086 
effS
 = 
nS–S
/
nTÙS
;

1087 
effB
 = 
nS–B
/
nTÙB
;

1091 ifĞ
effS
 < 0.0 ) {

1092 
effS
 = 0.0;

1093 ifĞ!
fNegEffW¬nšg
 ) 
	`Log
(è<< 
kWARNING
 << "Neg©ivsigÇÈeffic›ncy found‡nd s‘Ø0. Thi i ´obably dutØmªyƒv’t w™h‚eg©ivweight š‡ c”š cut-»giÚ." << 
Endl
;

1094 
fNegEffW¬nšg
 = 
kTRUE
;

1096 ifĞ
effB
 < 0.0 ) {

1097 
effB
 = 0.0;

1098 ifĞ!
fNegEffW¬nšg
 ) 
	`Log
(è<< 
kWARNING
 << "Neg©ivbackgroundƒffic›ncy found‡nd s‘Ø0. Thi i ´obably dutØmªyƒv’t w™h‚eg©ivweight š‡ c”š cut-»giÚ." << 
Endl
;

1099 
fNegEffW¬nšg
 = 
kTRUE
;

1101 
	}
}

1106 
	gTMVA
::
M‘hodCuts
::
	$C»©eV¬ŸbËPDFs
( )

1109 
fV¬Hi¡S
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*>Ğ
	`G‘Nv¬
() );

1110 
fV¬Hi¡B
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*>Ğ
	`G‘Nv¬
() );

1111 
fV¬Hi¡S_smoÙh
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*>Ğ
	`G‘Nv¬
() );

1112 
fV¬Hi¡B_smoÙh
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*>Ğ
	`G‘Nv¬
() );

1113 
fV¬PdfS
 = 
Ãw
 
¡d
::
veùÜ
<
PDF
*>Ğ
	`G‘Nv¬
() );

1114 
fV¬PdfB
 = 
Ãw
 
¡d
::
veùÜ
<
PDF
*>Ğ
	`G‘Nv¬
() );

1116 
IÁ_t
 
nsmoÙh
 = 0;

1119 
DoubË_t
 
mšV®
 = 
DBL_MAX
;

1120 
DoubË_t
 
maxV®
 = -
DBL_MAX
;

1121  
UIÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++ ){

1122 cÚ¡ 
Ev’t
 *
ev
 = 
	`G‘Ev’t
(
›vt
);

1123 
Flßt_t
 
v®
 = 
ev
->
	`G‘V®ue
(
›vt
);

1124 ifĞ
v®
 > 
mšV®
 ) minVal = val;

1125 ifĞ
v®
 < 
maxV®
 ) maxVal = val;

1128 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1131 
TSŒšg
 
hi¡T™Ë
 = (*
fIÅutV¬s
)[
iv¬
] + " signalraining";

1132 
TSŒšg
 
hi¡Name
 = (*
fIÅutV¬s
)[
iv¬
] + "_sig";

1143 (*
fV¬Hi¡S
)[
iv¬
] = 
Ãw
 
	`TH1F
(
hi¡Name
.
	`D©a
(), 
hi¡T™Ë
.D©a(), 
fNbšs
, 
mšV®
, 
maxV®
 );

1146 
hi¡T™Ë
 = (*
fIÅutV¬s
)[
iv¬
] + " backgroundraining";

1147 
hi¡Name
 = (*
fIÅutV¬s
)[
iv¬
] + "_bgd";

1158 (*
fV¬Hi¡B
)[
iv¬
] = 
Ãw
 
	`TH1F
(
hi¡Name
.
	`D©a
(), 
hi¡T™Ë
.D©a(), 
fNbšs
, 
mšV®
, 
maxV®
 );

1160  
UIÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++ ){

1161 cÚ¡ 
Ev’t
 *
ev
 = 
	`G‘Ev’t
(
›vt
);

1162 
Flßt_t
 
v®
 = 
ev
->
	`G‘V®ue
(
›vt
);

1163 ifĞ
	`D©aInfo
().
	`IsSigÇl
(
ev
) ){

1164 (*
fV¬Hi¡S
)[
iv¬
]->
	`Fl
Ğ
v®
 );

1166 (*
fV¬Hi¡B
)[
iv¬
]->
	`Fl
Ğ
v®
 );

1173 (*
fV¬Hi¡S_smoÙh
)[
iv¬
] = (
TH1F
*)(*
fV¬Hi¡S
)[iv¬]->
	`ClÚe
();

1174 
hi¡T™Ë
 = (*
fIÅutV¬s
)[
iv¬
] + " signalraining smoothed ";

1175 
hi¡T™Ë
 +ğ
nsmoÙh
;

1176 
hi¡T™Ë
 +="imes";

1177 
hi¡Name
 = (*
fIÅutV¬s
)[
iv¬
] + "_sig_smooth";

1178 (*
fV¬Hi¡S_smoÙh
)[
iv¬
]->
	`S‘Name
(
hi¡Name
);

1179 (*
fV¬Hi¡S_smoÙh
)[
iv¬
]->
	`S‘T™Ë
(
hi¡T™Ë
);

1182 (*
fV¬Hi¡S_smoÙh
)[
iv¬
]->
	`SmoÙh
(
nsmoÙh
);

1197 (*
fV¬Hi¡B_smoÙh
)[
iv¬
] = (
TH1F
*)(*
fV¬Hi¡B
)[iv¬]->
	`ClÚe
();

1198 
hi¡T™Ë
 = (*
fIÅutV¬s
)[
iv¬
]+" backgroundraining smoothed ";

1199 
hi¡T™Ë
 +ğ
nsmoÙh
;

1200 
hi¡T™Ë
 +="imes";

1201 
hi¡Name
 = (*
fIÅutV¬s
)[
iv¬
]+"_bgd_smooth";

1202 (*
fV¬Hi¡B_smoÙh
)[
iv¬
]->
	`S‘Name
(
hi¡Name
);

1203 (*
fV¬Hi¡B_smoÙh
)[
iv¬
]->
	`S‘T™Ë
(
hi¡T™Ë
);

1206 (*
fV¬Hi¡B_smoÙh
)[
iv¬
]->
	`SmoÙh
(
nsmoÙh
);

1209 (*
fV¬PdfS
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
()è+ " PDF V¬ Sig " + 
	`G‘IÅutV¬
Ğiv¬ ), (*
fV¬Hi¡S_smoÙh
)[iv¬], 
PDF
::
kS¶še2
 );

1210 (*
fV¬PdfB
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
()è+ " PDF V¬ Bkg " + 
	`G‘IÅutV¬
Ğiv¬ ), (*
fV¬Hi¡B_smoÙh
)[iv¬], 
PDF
::
kS¶še2
 );

1212 
	}
}

1217 
	gTMVA
::
M‘hodCuts
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

1219 
TSŒšg
 
dummy
;

1220 
UIÁ_t
 
dummyIÁ
;

1223 
i¡r
 >> 
dummy
 >> dummy;

1225 
i¡r
 >> 
dummy
 >> 
fNbšs
;

1228 
i¡r
 >> 
dummy
 >> dummy >> dummy >> dummy >> dummy >> dummy >> 
dummyIÁ
 >> dummy ;

1231 ià(
dummyIÁ
 !ğ
	`D©a
()->
	`G‘NV¬ŸbËs
()) {

1232 
	`Log
(è<< 
kFATAL
 << "<ReadWeightsFromStream> fatalƒrror: mismatch "

1233 << "š‚umb” oàv¬ŸbËs: " << 
dummyIÁ
 << " !ğ" << 
	`D©a
()->
	`G‘NV¬ŸbËs
(è<< 
Endl
;

1238 ià(
fF™M‘hod
 =ğ
kU£MÚ‹C¬lo
) {

1239 
	`Log
(è<< 
kWARNING
 << "R—d cut İtimi£d usšg sam¶oàMCƒv’ts" << 
Endl
;

1241 ià(
fF™M‘hod
 =ğ
kU£MÚ‹C¬loEv’ts
) {

1242 
	`Log
(è<< 
kWARNING
 << "R—d cut İtimi£d usšg sam¶oàMCƒv’ts" << 
Endl
;

1244 ià(
fF™M‘hod
 =ğ
kU£G’‘icAlgÜ™hm
) {

1245 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg G’‘iøAlgÜ™hm" << 
Endl
;

1247 ià(
fF™M‘hod
 =ğ
kU£SimuÏ‹dAÂ—lšg
) {

1248 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg SimuÏ‹d AÂ—lšg‡lgÜ™hm" << 
Endl
;

1250 ià(
fF™M‘hod
 =ğ
kU£Ev’tSÿn
) {

1251 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg FuÎ Ev’ˆSÿn" << 
Endl
;

1254 
	`Log
(è<< 
kWARNING
 << "unknowÀm‘hod: " << 
fF™M‘hod
 << 
Endl
;

1256 
	`Log
(è<< 
kINFO
 << "š " << 
fNbšs
 << " sigÇÈeffic›ncy bš ªd fÜ " << 
	`G‘Nv¬
(è<< " v¬ŸbËs" << 
Endl
;

1259 
bufãr
[200];

1260 
i¡r
.
	`g‘lše
(
bufãr
,200);

1261 
i¡r
.
	`g‘lše
(
bufãr
,200);

1263 
IÁ_t
 
tmpbš
;

1264 
Flßt_t
 
tm³ffS
, 
tm³ffB
;

1265 ià(
fEffBvsSLoÿl
 !ğ0è
d–‘e
 fEffBvsSLocal;

1266 
fEffBvsSLoÿl
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
() + "_effBvsSLocal",

1267 
	`TSŒšg
(
	`G‘Name
()è+ "ƒffic›ncy oàB v S", 
fNbšs
, 0.0, 1.0 );

1268 
fEffBvsSLoÿl
->
	`S‘DœeùÜy
(0);

1270 
IÁ_t
 
ibš
=0; ibš<
fNbšs
; ibin++) {

1271 
i¡r
 >> 
tmpbš
 >> 
tm³ffS
 >> 
tm³ffB
;

1272 
fEffBvsSLoÿl
->
	`S‘BšCÚ‹Á
Ğ
ibš
+1, 
tm³ffB
 );

1274 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1275 
i¡r
 >> 
fCutMš
[
iv¬
][
ibš
] >> 
fCutMax
[ivar][ibin];

1279 
fEffSMš
 = 
fEffBvsSLoÿl
->
	`G‘BšC’‹r
(1);

1280 
fEffSMax
 = 
fEffBvsSLoÿl
->
	`G‘BšC’‹r
(
fNbšs
);

1281 
	}
}

1287 
	gTMVA
::
M‘hodCuts
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

1290 
¡d
::
veùÜ
<
DoubË_t
> 
cutsMš
;

1291 
¡d
::
veùÜ
<
DoubË_t
> 
cutsMax
;

1293 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

1294 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "O±imi§tiÚM‘hod", (
IÁ_t
)
fEffM‘hod
);

1295 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "F™M‘hod", (
IÁ_t
)
fF™M‘hod
 );

1296 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "nbšs", 
fNbšs
 );

1297 
	`gToŞs
().
	`AddComm’t
Ğ
wght
, 
	`FÜm
Ğ"B–ow‡»hİtimi£d cut fÜ %˜v¬ŸbËs: FÜm©: ibš(hi¡èeffSƒffB cutMš[iv¬=0] cutMax[iv¬=0] ... cutMš[iv¬ò-1] cutMax[iv¬ò-1]", 
	`G‘Nv¬
() ) );

1307 
IÁ_t
 
ibš
=0; ibš<
fNbšs
; ibin++) {

1308 
DoubË_t
 
effS
 = 
fEffBvsSLoÿl
->
	`G‘BšC’‹r
 ( 
ibš
 + 1 );

1309 
DoubË_t
 
ŒueEffS
 = 
	`G‘Cuts
Ğ
effS
, 
cutsMš
, 
cutsMax
 );

1310 ià(
TM©h
::
	`Abs
(
ŒueEffS
) < 1e-10)rueEffS = 0;

1312 * 
bšxml
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Bin" );

1313 
	`gToŞs
().
	`AddA‰r
Ğ
bšxml
, "ibš", 
ibš
+1 );

1314 
	`gToŞs
().
	`AddA‰r
Ğ
bšxml
, "effS", 
ŒueEffS
 );

1315 
	`gToŞs
().
	`AddA‰r
Ğ
bšxml
, "effB", 
fEffBvsSLoÿl
->
	`G‘BšCÚ‹Á
Ğ
ibš
 + 1 ) );

1316 * 
cutsxml
 = 
	`gToŞs
().
	`AddChd
Ğ
bšxml
, "Cuts" );

1317 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1318 
	`gToŞs
().
	`AddA‰r
Ğ
cutsxml
, 
	`FÜm
Ğ"cutMš_%i", 
iv¬
 ), 
cutsMš
[ivar] );

1319 
	`gToŞs
().
	`AddA‰r
Ğ
cutsxml
, 
	`FÜm
Ğ"cutMax_%i", 
iv¬
 ), 
cutsMax
[ivar] );

1322 
	}
}

1327 
	gTMVA
::
M‘hodCuts
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

1330 
UIÁ_t
 
i
=0; i<
	`G‘Nv¬
(); i++) {

1331 ià(
fCutMš
[
i
] !ğ0è
d–‘e
 [] fCutMin[i];

1332 ià(
fCutMax
[
i
] !ğ0è
d–‘e
 [] fCutMax[i];

1334 ià(
fCutMš
 !ğ0è
d–‘e
 [] fCutMin;

1335 ià(
fCutMax
 !ğ0è
d–‘e
 [] fCutMax;

1337 
IÁ_t
 
tmpEffM‘hod
, 
tmpF™M‘hod
;

1338 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "O±imi§tiÚM‘hod", 
tmpEffM‘hod
 );

1339 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "F™M‘hod", 
tmpF™M‘hod
 );

1340 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "nbšs", 
fNbšs
 );

1342 
fEffM‘hod
 = (
EEffM‘hod
)
tmpEffM‘hod
;

1343 
fF™M‘hod
 = (
EF™M‘hodTy³
)
tmpF™M‘hod
;

1346 ià(
fF™M‘hod
 =ğ
kU£MÚ‹C¬lo
) {

1347 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg sam¶oàMCƒv’ts" << 
Endl
;

1349 ià(
fF™M‘hod
 =ğ
kU£MÚ‹C¬loEv’ts
) {

1350 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg sam¶oàMC-Ev’ˆev’ts" << 
Endl
;

1352 ià(
fF™M‘hod
 =ğ
kU£G’‘icAlgÜ™hm
) {

1353 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg G’‘iøAlgÜ™hm" << 
Endl
;

1355 ià(
fF™M‘hod
 =ğ
kU£SimuÏ‹dAÂ—lšg
) {

1356 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg SimuÏ‹d AÂ—lšg‡lgÜ™hm" << 
Endl
;

1358 ià(
fF™M‘hod
 =ğ
kU£Ev’tSÿn
) {

1359 
	`Log
(è<< 
kINFO
 << "R—d cut İtimi£d usšg FuÎ Ev’ˆSÿn" << 
Endl
;

1362 
	`Log
(è<< 
kWARNING
 << "unknowÀm‘hod: " << 
fF™M‘hod
 << 
Endl
;

1364 
	`Log
(è<< 
kINFO
 << "R—dšg " << 
fNbšs
 << " sigÇÈeffic›ncy bš fÜ " << 
	`G‘Nv¬
(è<< " v¬ŸbËs" << 
Endl
;

1366 
d–‘e
 
fEffBvsSLoÿl
;

1367 
fEffBvsSLoÿl
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
() + "_effBvsSLocal",

1368 
	`TSŒšg
(
	`G‘Name
()è+ "ƒffic›ncy oàB v S", 
fNbšs
, 0.0, 1.0 );

1369 
fEffBvsSLoÿl
->
	`S‘DœeùÜy
(0);

1370 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
fEffBvsSLoÿl
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

1372 
fCutMš
 = 
Ãw
 
DoubË_t
*[
	`G‘Nv¬
()];

1373 
fCutMax
 = 
Ãw
 
DoubË_t
*[
	`G‘Nv¬
()];

1374 
UIÁ_t
 
i
=0;i<
	`G‘Nv¬
();i++) {

1375 
fCutMš
[
i
] = 
Ãw
 
DoubË_t
[
fNbšs
];

1376 
fCutMax
[
i
] = 
Ãw
 
DoubË_t
[
fNbšs
];

1380 
IÁ_t
 
tmpbš
;

1381 
Flßt_t
 
tm³ffS
, 
tm³ffB
;

1382 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
,"Bin");

1383 
ch
) {

1389 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "ibš", 
tmpbš
 );

1390 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "effS", 
tm³ffS
 );

1391 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "effB", 
tm³ffB
 );

1394 ià(
tmpbš
-1 >ğ
fNbšs
 ||mpbin-1 < 0) {

1395 
	`Log
(è<< 
kFATAL
 << "Mism©ch iÀbšs: " << 
tmpbš
-1 << " >ğ" << 
fNbšs
 << 
Endl
;

1398 
fEffBvsSLoÿl
->
	`S‘BšCÚ‹Á
Ğ
tmpbš
, 
tm³ffB
 );

1399 * 
ù
 = 
	`gToŞs
().
	`G‘Chd
(
ch
);

1400 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1401 
	`gToŞs
().
	`R—dA‰r
Ğ
ù
, 
	`FÜm
Ğ"cutMš_%i", 
iv¬
 ), 
fCutMš
[iv¬][
tmpbš
-1] );

1402 
	`gToŞs
().
	`R—dA‰r
Ğ
ù
, 
	`FÜm
Ğ"cutMax_%i", 
iv¬
 ), 
fCutMax
[iv¬][
tmpbš
-1] );

1404 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch, "Bin");

1406 
	}
}

1411 
	gTMVA
::
M‘hodCuts
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

1413 
	`Log
(è<< 
kINFO
 << "Wr™mÚ™Üšg hi¡og¿m tØfe: " << 
	`Ba£Dœ
()->
	`G‘P©h
(è<< 
Endl
;

1415 
fEffBvsSLoÿl
->
	`Wr™e
();

1418 ià(
fEffM‘hod
 =ğ
kU£PDFs
) {

1419 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1420 (*
fV¬Hi¡S
)[
iv¬
]->
	`Wr™e
();

1421 (*
fV¬Hi¡B
)[
iv¬
]->
	`Wr™e
();

1422 (*
fV¬Hi¡S_smoÙh
)[
iv¬
]->
	`Wr™e
();

1423 (*
fV¬Hi¡B_smoÙh
)[
iv¬
]->
	`Wr™e
();

1424 (*
fV¬PdfS
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`Wr™e
();

1425 (*
fV¬PdfB
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`Wr™e
();

1428 
	}
}

1442 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
	$G‘T¿ššgEffic›ncy
(cÚ¡ 
TSŒšg
& 
theSŒšg
)

1445 
TLi¡
* 
li¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
theSŒšg
 );

1447 ià(
li¡
->
	`G‘Size
() != 2) {

1448 
	`Log
(è<< 
kFATAL
 << "<GetTrainingEfficiency> wrong‚umber of‡rguments"

1449 << " iÀ¡ršg: " << 
theSŒšg


1450 << " |„equœed fÜm©,ƒ.g., Effic›ncy:0.05" << 
Endl
;

1454 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, 
	`G‘AÇlysisTy³
());

1458 
Flßt_t
 
effB»f
 = 
	`©of
Ğ((
TObjSŒšg
*)
li¡
->
	`At
(1))->
	`G‘SŒšg
() );

1460 
d–‘e
 
li¡
;

1463 ià(
»suÉs
->
	`G‘Hi¡
("EFF_BVSS_TR")==0) {

1465 ià(
fBš¬yT»eS
 !ğ0è{ 
d–‘e
 fBinaryTreeS; fBinaryTreeS = 0; }

1466 ià(
fBš¬yT»eB
 !ğ0è{ 
d–‘e
 fBinaryTreeB; fBinaryTreeB = 0; }

1468 
fBš¬yT»eS
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

1469 
fBš¬yT»eS
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
), 
fSigÇlCÏss
 );

1470 
fBš¬yT»eB
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

1471 
fBš¬yT»eB
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
), 
fBackgroundCÏss
 );

1479 
TH1
* 
eff_bvss_Œ
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_ŒaššgEffBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

1480 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
eff_bvss_Œ
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

1481 
TH1
* 
»j_bvss_Œ
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_ŒaššgRejBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

1482 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
»j_bvss_Œ
->
	`S‘BšCÚ‹Á
( ibin, 0. );

1483 
»suÉs
->
	`StÜe
(
eff_bvss_Œ
, "EFF_BVSS_TR");

1484 
»suÉs
->
	`StÜe
(
»j_bvss_Œ
, "REJ_BVSS_TR");

1489 
DoubË_t
* 
tmpCutMš
 = 
Ãw
 DoubË_t[
	`G‘Nv¬
()];

1490 
DoubË_t
* 
tmpCutMax
 = 
Ãw
 DoubË_t[
	`G‘Nv¬
()];

1491 
IÁ_t
 
nFaedBšs
=0;

1492 
IÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

1493 
UIÁ_t
 
iv¬
=0; iv¬ <
	`G‘Nv¬
(); ivar++){

1494 
tmpCutMš
[
iv¬
] = 
fCutMš
[iv¬][
bši
-1];

1495 
tmpCutMax
[
iv¬
] = 
fCutMax
[iv¬][
bši
-1];

1498 
DoubË_t
 
effS
, 
effB
;

1499 
this
->
	`G‘EffsäomS–eùiÚ
Ğ&
tmpCutMš
[0], &
tmpCutMax
[0], 
effS
, 
effB
);

1501 
IÁ_t
 
effBš
 = 
eff_bvss_Œ
->
	`G‘Xaxis
()->
	`FšdBš
(
effS
);

1502 ià(
effBš
 !ğ
bši
){

1503 
	`Log
()<< 
kVERBOSE
 << "uÇbËØfÈeffic›ncy bš " << 
bši
<< " " << 
effBš
 <<
Endl
;

1504 
nFaedBšs
++;

1508 
eff_bvss_Œ
->
	`S‘BšCÚ‹Á
Ğ
bši
, 
effB
 );

1509 
»j_bvss_Œ
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0-
effB
 );

1512 ià(
nFaedBšs
>0è
	`Log
()<< 
kWARNING
 << " uÇbËØfÈ"<<‚FaedBš <<"ƒffic›ncy bš " <<
Endl
;

1514 
d–‘e
 [] 
tmpCutMš
;

1515 
d–‘e
 [] 
tmpCutMax
;

1518 
fS¶T¿šEffBvsS
 = 
Ãw
 
	`TS¶še1
Ğ"ŒašEffBvsS",‚ew 
	`TG¿ph
Ğ
eff_bvss_Œ
 ) );

1522 ià(
NULL
 =ğ
fS¶T¿šEffBvsS
)  0.0;

1525 
DoubË_t
 
effS
 = 0., 
effB
, 
effS_
 = 0., 
effB_
 = 0.;

1526 
IÁ_t
 
nbšs_
 = 1000;

1529 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

1531 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

1532 
effB
 = 
fS¶T¿šEffBvsS
->
	`Ev®
Ğ
effS
 );

1535 ià((
effB
 - 
effB»f
)*(
effB_
 -ƒffBref) < 0) ;

1536 
effS_
 = 
effS
;

1537 
effB_
 = 
effB
;

1540  0.5*(
effS
 + 
effS_
);

1541 
	}
}

1555 
DoubË_t
 
	gTMVA
::
M‘hodCuts
::
	$G‘Effic›ncy
ĞcÚ¡ 
TSŒšg
& 
theSŒšg
, 
Ty³s
::
ET»eTy³
 
ty³
, 
DoubË_t
& 
effS”r
 )

1557 
	`D©a
()->
	`S‘Cu¼’tTy³
(
ty³
);

1559 
ResuÉs
* 
»suÉs
 = 
	`D©a
()->
	`G‘ResuÉs
Ğ
	`G‘M‘hodName
(), 
Ty³s
::
kTe¡šg
, 
	`G‘AÇlysisTy³
() );

1562 
TLi¡
* 
li¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
theSŒšg
, ":" );

1564 ià(
li¡
->
	`G‘Size
() > 2) {

1565 
d–‘e
 
li¡
;

1566 
	`Log
(è<< 
kFATAL
 << "<GetEfficiency> wrong‚umber of‡rguments"

1567 << " iÀ¡ršg: " << 
theSŒšg


1568 << " |„equœed fÜm©,ƒ.g., Effic›ncy:0.05, o¸em±y sŒšg" << 
Endl
;

1573 
BoŞ_t
 
compu‹A»a
 = (
li¡
->
	`G‘Size
() < 2);

1577 
Flßt_t
 
effB»f
 = (
compu‹A»a
?1.:
	`©of
Ğ((
TObjSŒšg
*)
li¡
->
	`At
(1))->
	`G‘SŒšg
() ));

1579 
d–‘e
 
li¡
;

1583 ià(
»suÉs
->
	`G‘Hi¡
("MVA_EFF_BvsS")==0) {

1585 ià(
fBš¬yT»eS
!=0è{ 
d–‘e
 fBinaryTreeS; fBinaryTreeS = 0; }

1586 ià(
fBš¬yT»eB
!=0è{ 
d–‘e
 fBinaryTreeB; fBinaryTreeB = 0; }

1591 
fBš¬yT»eS
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

1592 
fBš¬yT»eS
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
), 
fSigÇlCÏss
 );

1593 
fBš¬yT»eB
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

1594 
fBš¬yT»eB
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
), 
fBackgroundCÏss
 );

1603 
TH1
* 
eff_BvsS
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_effBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

1604 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
eff_BvsS
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

1605 
TH1
* 
»j_BvsS
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_»jBvsS", G‘Te¡v¬Name(è+ "", 
fNbšs
, 0, 1 );

1606 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
»j_BvsS
->
	`S‘BšCÚ‹Á
( ibin, 0.0 );

1607 
»suÉs
->
	`StÜe
(
eff_BvsS
, "MVA_EFF_BvsS");

1608 
»suÉs
->
	`StÜe
(
»j_BvsS
);

1610 
DoubË_t
 
xmš
 = 0.;

1611 
DoubË_t
 
xmax
 = 1.000001;

1613 
TH1
* 
eff_s
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_effS", G‘Te¡v¬Name(è+ " (sigÇl)", 
fNbšs
, 
xmš
, 
xmax
);

1614 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
eff_s
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

1615 
TH1
* 
eff_b
 = 
Ãw
 
	`TH1F
Ğ
	`G‘Te¡v¬Name
(è+ "_effB", G‘Te¡v¬Name(è+ " (background)", 
fNbšs
, 
xmš
, 
xmax
);

1616 
IÁ_t
 
ibš
=1; ibš<=
fNbšs
; ibš++è
eff_b
->
	`S‘BšCÚ‹Á
( ibin, -0.1 );

1617 
»suÉs
->
	`StÜe
(
eff_s
, "MVA_S");

1618 
»suÉs
->
	`StÜe
(
eff_b
, "MVA_B");

1623 
DoubË_t
* 
tmpCutMš
 = 
Ãw
 DoubË_t[
	`G‘Nv¬
()];

1624 
DoubË_t
* 
tmpCutMax
 = 
Ãw
 DoubË_t[
	`G‘Nv¬
()];

1625 
TG¿ph
* 
tmpBvsS
 = 
Ãw
 
	`TG¿ph
(
fNbšs
+1);

1626 
tmpBvsS
->
	`S‘Pošt
(0, 0., 0.);

1628 
IÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

1629 
UIÁ_t
 
iv¬
=0; iv¬ <
	`G‘Nv¬
(); ivar++) {

1630 
tmpCutMš
[
iv¬
] = 
fCutMš
[iv¬][
bši
-1];

1631 
tmpCutMax
[
iv¬
] = 
fCutMax
[iv¬][
bši
-1];

1634 
DoubË_t
 
effS
, 
effB
;

1635 
this
->
	`G‘EffsäomS–eùiÚ
Ğ&
tmpCutMš
[0], &
tmpCutMax
[0], 
effS
, 
effB
);

1636 
tmpBvsS
->
	`S‘Pošt
(
bši
, 
effS
, 
effB
);

1638 
eff_s
->
	`S‘BšCÚ‹Á
(
bši
, 
effS
);

1639 
eff_b
->
	`S‘BšCÚ‹Á
(
bši
, 
effB
);

1641 
tmpBvsS
->
	`S‘Pošt
(
fNbšs
+1, 1., 1.);

1643 
d–‘e
 [] 
tmpCutMš
;

1644 
d–‘e
 [] 
tmpCutMax
;

1647 
fS¶effBvsS
 = 
Ãw
 
	`TS¶še1
Ğ"effBvsS", 
tmpBvsS
 );

1648 
IÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

1649 
DoubË_t
 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
fNbšs
);

1650 
DoubË_t
 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

1651 
eff_BvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 
effB
 );

1652 
»j_BvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0-
effB
 );

1657 ià(
NULL
 =ğ
fS¶effBvsS
)  0.0;

1660 
DoubË_t
 
effS
 = 0, 
effB
 = 0, 
effS_
 = 0, 
effB_
 = 0;

1661 
IÁ_t
 
nbšs_
 = 1000;

1663 ià(
compu‹A»a
) {

1666 
DoubË_t
 
š‹g¿l
 = 0;

1667 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

1670 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

1671 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

1672 
š‹g¿l
 +ğ(1.0 - 
effB
);

1674 
š‹g¿l
 /ğ
nbšs_
;

1676  
š‹g¿l
;

1681 
IÁ_t
 
bši
=1; bši<=
nbšs_
; bini++) {

1683 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs_
);

1684 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

1687 ià((
effB
 - 
effB»f
)*(
effB_
 -ƒffBref) < 0) ;

1688 
effS_
 = 
effS
;

1689 
effB_
 = 
effB
;

1692 
effS
 = 0.5*ÓffS + 
effS_
);

1693 
effS”r
 = 0;

1694 ià(
	`D©a
()->
	`G‘NEvtSigTe¡
() > 0)

1695 
effS”r
 = 
TM©h
::
	`Sq¹
Ğ
effS
*(1.0 -ƒffS)/
	`DoubË_t
(
	`D©a
()->
	`G‘NEvtSigTe¡
()) );

1697  
effS
;

1702 
	}
}

1707 
	gTMVA
::
M‘hodCuts
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

1709 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

1710 
fout
 << "};" << 
¡d
::
’dl
;

1711 
	}
}

1719 
	gTMVA
::
M‘hodCuts
::
	$G‘H–pMes§ge
() const

1721 
TSŒšg
 
bŞd
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
() ? "<b>" : "";

1722 
TSŒšg
 
»sbŞd
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
() ? "</b>" : "";

1723 
TSŒšg
 
brk
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
() ? "<br>" : "";

1725 
	`Log
(è<< 
Endl
;

1726 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1727 
	`Log
(è<< 
Endl
;

1728 
	`Log
(è<< "Thİtimi§tiÚ oà»ùªguÏ¸cut ³rfÜmed by TMVA maximi£ " << 
Endl
;

1729 
	`Log
(è<< "thbackground„ejeùiÚ‡ˆgiv’ sigÇÈeffic›ncy,‡nd sÿn " << 
Endl
;

1730 
	`Log
(è<< "ov”hfuÎ„ªgoàthÏ‰” quªt™y. Th»İtimi§tiÚ" << 
Endl
;

1731 
	`Log
(è<< "m‘hod ¬İtiÚ®: MÚ‹ C¬lØ§m¶šg (MC),‡ G’‘ics" << 
Endl
;

1732 
	`Log
(è<< "AlgÜ™hm (GA),‡nd SimuÏ‹d AÂ—lšg (SA). GA‡nd SA‡»" << 
Endl
;

1733 
	`Log
(è<< "ex³ùedØ³rfÜm be¡." << 
Endl
;

1734 
	`Log
(è<< 
Endl
;

1735 
	`Log
(è<< "ThdifficuÉyØfšdhİtim® cut ¡rÚgly inü—£ w™h" << 
Endl
;

1736 
	`Log
(è<< "thdim’siÚ®™y (numb” oàšpuˆv¬ŸbËsèoàth´obËm." << 
Endl
;

1737 
	`Log
(è<< "Thi behaviÜ i dutØthnÚ-uniqu’es oàthsŞutiÚ s·û."<< 
Endl
;

1738 
	`Log
(è<< 
Endl
;

1739 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1740 
	`Log
(è<< 
Endl
;

1741 
	`Log
(è<< "Iàthdim’siÚ®™yƒxûeds, say, 4 iÅuˆv¬ŸbËs, iˆi " << 
Endl
;

1742 
	`Log
(è<< "advi§bËØsüutšizth£·¿tiÚ…ow” oàthv¬ŸbËs," << 
Endl
;

1743 
	`Log
(è<< "ªdØ»movthw—ke¡ oÃs. IàsomamÚghšpuˆv¬ŸbËs" << 
Endl
;

1744 
	`Log
(è<< "ÿÀbdesüibed by‡ sšgË cuˆÓ.g., beÿu£ sigÇÈ‹nd tØbe" << 
Endl
;

1745 
	`Log
(è<< "Ïrg”hª background),hi ÿÀbšdiÿ‹dØM‘hodCut vŸ" << 
Endl
;

1746 
	`Log
(è<< "th\"Fsm¬t\" o±iÚ (£İtiÚ sŒšg). Choosšghi İtiÚ" << 
Endl
;

1747 
	`Log
(è<< "»duû thnumb” oà»quœem’t fÜhv¬ŸbË from 2 (mš/max)" << 
Endl
;

1748 
	`Log
(è<< "tØ¨sšgË oÃ (TMVA fšd ouˆwh‘h” iˆi tØbš‹½»‹d‡s" << 
Endl
;

1749 
	`Log
(è<< "mš o¸max)." << 
Endl
;

1750 
	`Log
(è<< 
Endl
;

1751 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1752 
	`Log
(è<< "" << 
Endl
;

1753 
	`Log
(è<< 
bŞd
 << "MÚ‹ C¬lØ§m¶šg:" << 
»sbŞd
 << 
Endl
;

1754 
	`Log
(è<< "" << 
Endl
;

1755 
	`Log
(è<< "A·¹ fÜmh\"Fsm¬t\" o±iÚ fÜhv¬ŸbËs,hÚly way" << 
Endl
;

1756 
	`Log
(è<< "tØim´ovthMC sam¶šg i tØšü—£h§m¶šg„©e. This" << 
Endl
;

1757 
	`Log
(è<< "i dÚvŸhcÚfigu¿tiÚ o±iÚ \"MC_NRªdCuts\". ThexecutiÚ" << 
Endl
;

1758 
	`Log
(è<< "timsÿË lš—¾y w™hh§m¶šg„©e." << 
Endl
;

1759 
	`Log
(è<< "" << 
Endl
;

1760 
	`Log
(è<< 
bŞd
 << "G’‘iøAlgÜ™hm:" << 
»sbŞd
 << 
Endl
;

1761 
	`Log
(è<< "" << 
Endl
;

1762 
	`Log
(è<< "Th®gÜ™hm”mš©e iànØsignifiÿÁ f™Ãs šü—£ has" << 
Endl
;

1763 
	`Log
(è<< "b“Àach›ved w™hšhÏ¡ \"n¡•s\" s‹p oàthÿlcuÏtiÚ." << 
Endl
;

1764 
	`Log
(è<< "WiggË šhROC curvÜ cÚ¡ªˆbackground„ejeùiÚ oà1" << 
Endl
;

1765 
	`Log
(è<< "šdiÿ‹h©hGA faedØ®way cÚv”g©hŒumaximum" << 
Endl
;

1766 
	`Log
(è<< "f™Ãss. IÀsuch‡ ca£, iˆi »comm’dedØbrßd’h£¬ch " << 
Endl
;

1767 
	`Log
(è<< "by inü—sšghpİuÏtiÚ siz(\"pİSize\"èªdØgivthGA " << 
Endl
;

1768 
	`Log
(è<< "mÜtimtØfšd im´ovem’t by inü—sšghnumb” oà¡•s" << 
Endl
;

1769 
	`Log
(è<< "(\"n¡•s\")" << 
Endl
;

1770 
	`Log
(è<< " -> inü—£ \"pİSize\" (©†—¡ >10 *‚umb” oàv¬ŸbËs)" << 
Endl
;

1771 
	`Log
(è<< " -> inü—£ \"n¡•s\"" << 
Endl
;

1772 
	`Log
(è<< "" << 
Endl
;

1773 
	`Log
(è<< 
bŞd
 << "SimuÏ‹d AÂ—lšg (SAè®gÜ™hm:" << 
»sbŞd
 << 
Endl
;

1774 
	`Log
(è<< "" << 
Endl
;

1775 
	`Log
(è<< "\"Inü—sšg Ad­tive\"‡µrßch:" << 
Endl
;

1776 
	`Log
(è<< "" << 
Endl
;

1777 
	`Log
(è<< "Th®gÜ™hm s“k loÿÈmšim¨ªdƒx¶Üe theœ‚eighbÜhoods, whe" << 
Endl
;

1778 
	`Log
(è<< "chªgšghamb›Áem³¿tu» d•’dšg oÀthnumb” oàçu»s" << 
Endl
;

1779 
	`Log
(è<< "šh´eviou ¡•s. Th³rfÜmªû cª bim´oved by inü—sšg" << 
Endl
;

1780 
	`Log
(è<< "thnumb” oà™”©iÚ s‹p (\"MaxC®ls\"), o¸by‡dju¡šghe" << 
Endl
;

1781 
	`Log
(è<< "mšim®em³¿tu» (\"MšTem³¿tu»\"). Mªu®‡dju¡m’t oàthe" << 
Endl
;

1782 
	`Log
(è<< "¥“d oàth‹m³¿tu» inü—£ (\"Tem³¿tu»SÿË\"‡nd \"Ad­tiveS³ed\")" << 
Endl
;

1783 
	`Log
(è<< "tØšdividu® d©¨£t should‡lsØh–p. Summ¬y:" << 
brk
 << 
Endl
;

1784 
	`Log
(è<< " -> inü—£ \"MaxC®ls\"" << 
brk
 << 
Endl
;

1785 
	`Log
(è<< " ->‡dju¡ \"MšTem³¿tu»\"" << 
brk
 << 
Endl
;

1786 
	`Log
(è<< " ->‡dju¡ \"Tem³¿tu»SÿË\"" << 
brk
 << 
Endl
;

1787 
	`Log
(è<< " ->‡dju¡ \"Ad­tiveS³ed\"" << 
Endl
;

1788 
	`Log
(è<< "" << 
Endl
;

1789 
	`Log
(è<< "\"Deü—sšg Ad­tive\"‡µrßch:" << 
Endl
;

1790 
	`Log
(è<< "" << 
Endl
;

1791 
	`Log
(è<< "Th®gÜ™hm c®cuÏ‹ thš™ŸÈ‹m³¿tu» (ba£d oÀthefãù-" << 
Endl
;

1792 
	`Log
(è<< "iv’es oàÏrg¡•sèªdhmuÉl›¸th©ƒnsu» tØ»achhe" << 
Endl
;

1793 
	`Log
(è<< "mšim®em³¿tu» w™hh»que¡ed‚umb” oà™”©iÚ s‹ps." << 
Endl
;

1794 
	`Log
(è<< "Th³rfÜmªû cª bim´oved by‡dju¡šghmšim®em³¿tu»" << 
Endl
;

1795 
	`Log
(è<< " (\"MšTem³¿tu»\"èªd by inü—sšg‚umb” oà¡• (\"MaxC®ls\"):" << 
brk
 << 
Endl
;

1796 
	`Log
(è<< " -> inü—£ \"MaxC®ls\"" << 
brk
 << 
Endl
;

1797 
	`Log
(è<< " ->‡dju¡ \"MšTem³¿tu»\"" << 
Endl
;

1798 
	`Log
(è<< " " << 
Endl
;

1799 
	`Log
(è<< "Oth” k”Ãls:" << 
Endl
;

1800 
	`Log
(è<< "" << 
Endl
;

1801 
	`Log
(è<< "AÉ”Çtivway oàcouÁšgh‹m³¿tu» chªg¬im¶em’‹d. " << 
Endl
;

1802 
	`Log
(è<< "Each oàthem s¹ w™hhmaximumem³¿tu» (\"MaxTem³¿tu»\")" << 
Endl
;

1803 
	`Log
(è<< "ªd deü—£ whchªgšgh‹m³¿tu»‡ccÜdšgØ¨giv’" << 
Endl
;

1804 
	`Log
(è<< "´esütiÚ:" << 
brk
 << 
Endl
;

1805 
	`Log
(è<< "Cu¼’tTem³¿tu» =" << 
brk
 << 
Endl
;

1806 
	`Log
(è<< " - Sq¹: In™ŸlTem³¿tu» / Sq¹(S‹pNumb”+2è* Tem³¿tu»SÿË" << 
brk
 << 
Endl
;

1807 
	`Log
(è<< " - Log: In™ŸlTem³¿tu» / Log(S‹pNumb”+2è* Tem³¿tu»SÿË" << 
brk
 << 
Endl
;

1808 
	`Log
(è<< " - Homo: In™ŸlTem³¿tu» / (S‹pNumb”+2è* Tem³¿tu»SÿË" << 
brk
 << 
Endl
;

1809 
	`Log
(è<< " - Sš: (Sš(S‹pNumb” / Tem³¿tu»SÿËè+ 1è/ (S‹pNumb” + 1)*In™ŸlTem³¿tu» + Eps" << 
brk
 << 
Endl
;

1810 
	`Log
(è<< " - Geo: Cu¼’tTem³¿tu» * Tem³¿tu»SÿË" << 
Endl
;

1811 
	`Log
(è<< "" << 
Endl
;

1812 
	`Log
(è<< "Theœ…”fÜmªû cª bim´oved by‡dju¡šg in™ŸÈ‹m³¿tu»" << 
Endl
;

1813 
	`Log
(è<< "(\"In™ŸlTem³¿tu»\"),hnumb” oà™”©iÚ s‹p (\"MaxC®ls\")," << 
Endl
;

1814 
	`Log
(è<< "ªdhmuÉl›¸th© sÿË th‹m³¿tu» deü—£" << 
Endl
;

1815 
	`Log
(è<< "(\"Tem³¿tu»SÿË\")" << 
brk
 << 
Endl
;

1816 
	`Log
(è<< " -> inü—£ \"MaxC®ls\"" << 
brk
 << 
Endl
;

1817 
	`Log
(è<< " ->‡dju¡ \"In™ŸlTem³¿tu»\"" << 
brk
 << 
Endl
;

1818 
	`Log
(è<< " ->‡dju¡ \"Tem³¿tu»SÿË\"" << 
brk
 << 
Endl
;

1819 
	`Log
(è<< " ->‡dju¡ \"K”ÃlTem³¿tu»\"" << 
Endl
;

1820 
	}
}

	@src/MethodDAE.cxx

28 
	~"TMVA/M‘hodDAE.h
"

30 
	~"TMVA/CÏssif›rFaùÜy.h
"

31 
	~"TMVA/CÚfigu¿bË.h
"

32 
	~"TMVA/IM‘hod.h
"

33 
	~"TMVA/Ty³s.h
"

35 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

36 
	~"TMVA/DNN/FunùiÚs.h
"

38 
	~<io¡»am
>

40 
	$REGISTER_METHOD
(
DAE
)

41 
	$CÏssImp
(
TMVA
::
M‘hodDAE
)

43 
usšg
 
TMVA
::
DNN
::
EAùiv©iÚFunùiÚ
;

44 
usšg
 
TMVA
::
DNN
::
ELossFunùiÚ
;

45 
usšg
 
TMVA
::
DNN
::
EIn™Ÿliz©iÚ
;

46 
usšg
 
TMVA
::
DNN
::
EOuutFunùiÚ
;

48 
Çme¥aû
 
TMVA
 {

52 
TMVA
::
M‘hodDAE
::
	`M‘hodDAE
(cÚ¡ 
TSŒšg
 &
jobName
, cÚ¡ TSŒšg &
m‘hodT™Ë
,

53 
D©aS‘Info
 &
theD©a
, cÚ¡ 
TSŒšg
 &
theO±iÚ
)

54 : 
	`M‘hodBa£
(
jobName
, 
Ty³s
::
kDAE
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

55 
	`fWeightIn™Ÿliz©iÚ
(), 
	`fOuutFunùiÚ
(), 
	`fLayoutSŒšg
(),

56 
	`fE¼ÜSŒ©egy
(), 
	`fT¿ššgSŒ©egySŒšg
(),

57 
	`fWeightIn™Ÿliz©iÚSŒšg
(), 
	`fArch™eùu»SŒšg
(), 
	`fResume
(
çl£
),

58 
	`fT¿ššgS‘tšgs
()

66 
TMVA
::
M‘hodDAE
::
	`M‘hodDAE
(
D©aS‘Info
 &
theD©a
, cÚ¡ 
TSŒšg
 &
theWeightFe
)

67 : 
	`M‘hodBa£
(
Ty³s
::
kDAE
, 
theD©a
, 
theWeightFe
), 
	`fWeightIn™Ÿliz©iÚ
(),

68 
	`fOuutFunùiÚ
(), 
	`fLayoutSŒšg
(), 
	`fE¼ÜSŒ©egy
(),

69 
	`fT¿ššgSŒ©egySŒšg
(), 
	`fWeightIn™Ÿliz©iÚSŒšg
(),

70 
	`fArch™eùu»SŒšg
(), 
	`fResume
(
çl£
), 
	`fT¿ššgS‘tšgs
() {

77 
TMVA
::
M‘hodDAE
::~
	`M‘hodDAE
() {

83 
TMVA
::
M‘hodDAE
::
	`In™
() {

89 
TMVA
::
M‘hodDAE
::
	`Deş¬eO±iÚs
() {

95 
TMVA
::
M‘hodDAE
::
	`ProûssO±iÚs
() {

103 autØ
TMVA
::
M‘hodDAE
::
	`P¬£LayoutSŒšg
(
TSŒšg
 
ÏyoutSŒšg
)

104 -> 
LayoutVeùÜ_t
 {

106 
LayoutVeùÜ_t
 
Ïyout
;

107  
Ïyout
;

112 
BoŞ_t
 
TMVA
::
M‘hodDAE
::
	`HasAÇlysisTy³
(
Ty³s
::
EAÇlysisTy³
 
ty³
,

113 
UIÁ_t
 
numb”CÏs£s
,

114 
UIÁ_t
 ) {

116  
Œue
;

120 
TMVA
::
M‘hodDAE
::
	`T¿š
() {

122 ià(
fArch™eùu»SŒšg
 == "GPU") {

123 
	`T¿šGpu
();

125 } ià(
fArch™eùu»SŒšg
 == "OpenCL") {

126 
	`Log
(è<< 
kFATAL
 << "O³nCL back’d‚Ù y‘ suµÜ‹d." << 
Endl
;

128 } ià(
fArch™eùu»SŒšg
 == "CPU") {

129 
	`T¿šCpu
();

135 
TMVA
::
M‘hodDAE
::
	`T¿šGpu
() {

140 
TMVA
::
M‘hodDAE
::
	`T¿šCpu
() {

145 
DoubË_t
 
TMVA
::
M‘hodDAE
::
	`G‘MvaV®ue
(Double_t * ,

146 
DoubË_t
 * ) {

152 
TMVA
::
M‘hodDAE
::
	`AddWeightsXMLTo
(*
·»Á
) const {

157 
TMVA
::
M‘hodDAE
::
	`R—dWeightsFromXML
(*
roÙXML
) {

162 
TMVA
::
M‘hodDAE
::
	`R—dWeightsFromSŒ—m
(
¡d
::
i¡»am
 & ) {}

165 cÚ¡ 
TMVA
::
Rªkšg
 *TMVA::
M‘hodDAE
::
	`C»©eRªkšg
() {

167  
NULL
;

171 
TMVA
::
M‘hodDAE
::
	`G‘H–pMes§ge
() const {

175 
	}
}

	@src/MethodDNN.cxx

33 
	~"TMVA/M‘hodDNN.h
"

35 
	~"TSŒšg.h
"

36 
	~"TT»e.h
"

37 
	~"TFe.h
"

38 
	~"TFÜmuÏ.h
"

40 
	~"TMVA/CÏssif›rFaùÜy.h
"

41 
	~"TMVA/CÚfigu¿bË.h
"

42 
	~"TMVA/IM‘hod.h
"

43 
	~"TMVA/MsgLogg”.h
"

44 
	~"TMVA/M‘hodBa£.h
"

45 
	~"TMVA/Tim”.h
"

46 
	~"TMVA/Ty³s.h
"

47 
	~"TMVA/ToŞs.h
"

48 
	~"TMVA/CÚfig.h
"

49 
	~"TMVA/Rªkšg.h
"

51 
	~"TMVA/DNN/N‘.h
"

52 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

54 
	~"TMVA/Neu¿lN‘.h
"

55 
	~"TMVA/MÚ™Üšg.h
"

57 
	~<®gÜ™hm
>

58 
	~<io¡»am
>

59 
	~<¡ršg
>

60 
	~<iomª
>

62 
	$REGISTER_METHOD
(
DNN
)

64 
	`CÏssImp
(
TMVA
::
M‘hodDNN
);

66 
Çme¥aû
 
TMVA


68 
usšg
 
Çme¥aû
 
DNN
;

73 
TMVA
::
M‘hodDNN
::
	`M‘hodDNN
(cÚ¡ 
TSŒšg
 &
jobName
, cÚ¡ TSŒšg &
m‘hodT™Ë
, 
D©aS‘Info
 &
theD©a
,

74 cÚ¡ 
TSŒšg
 &
theO±iÚ
)

75 : 
	`M‘hodBa£
(
jobName
, 
Ty³s
::
kDNN
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
), 
	`fWeightIn™Ÿliz©iÚ
(), 
	`fOuutFunùiÚ
(),

76 
	`fLayoutSŒšg
(), 
	`fE¼ÜSŒ©egy
(), 
	`fT¿ššgSŒ©egySŒšg
(), 
	`fWeightIn™Ÿliz©iÚSŒšg
(),

77 
	`fArch™eùu»SŒšg
(), 
	`fT¿ššgS‘tšgs
(), 
	`fResume
(
çl£
), 
	`fS‘tšgs
()

84 
TMVA
::
M‘hodDNN
::
	`M‘hodDNN
(
D©aS‘Info
& 
theD©a
,

85 cÚ¡ 
TSŒšg
& 
theWeightFe
)

86 : 
	`M‘hodBa£
Ğ
Ty³s
::
kDNN
, 
theD©a
, 
theWeightFe
),

87 
	`fWeightIn™Ÿliz©iÚ
(), 
	`fOuutFunùiÚ
(), 
	`fLayoutSŒšg
(), 
	`fE¼ÜSŒ©egy
(),

88 
	`fT¿ššgSŒ©egySŒšg
(), 
	`fWeightIn™Ÿliz©iÚSŒšg
(), 
	`fArch™eùu»SŒšg
(),

89 
	`fT¿ššgS‘tšgs
(), 
	`fResume
(
çl£
), 
	`fS‘tšgs
()

91 
fWeightIn™Ÿliz©iÚ
 = 
DNN
::
EIn™Ÿliz©iÚ
::
kGauss
;

92 
fOuutFunùiÚ
 = 
DNN
::
EOuutFunùiÚ
::
kSigmoid
;

98 
TMVA
::
M‘hodDNN
::~
	`M‘hodDNN
()

100 
fWeightIn™Ÿliz©iÚ
 = 
DNN
::
EIn™Ÿliz©iÚ
::
kGauss
;

101 
fOuutFunùiÚ
 = 
DNN
::
EOuutFunùiÚ
::
kSigmoid
;

108 
BoŞ_t
 
TMVA
::
M‘hodDNN
::
	`HasAÇlysisTy³
(
Ty³s
::
EAÇlysisTy³
 
ty³
,

109 
UIÁ_t
 
numb”CÏs£s
,

110 
UIÁ_t
 )

112 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2 )  
kTRUE
;

113 ià(
ty³
 =ğ
Ty³s
::
kMuÉişass
 )  
kTRUE
;

114 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 )  
kTRUE
;

116  
kFALSE
;

122 
TMVA
::
M‘hodDNN
::
	`In™
()

125 autØ&
dsi
 = 
this
->
	`D©aInfo
();

126 autØ
numCÏs£s
 = 
dsi
.
	`G‘NCÏs£s
();

127 
UIÁ_t
 
i
 = 0; i < 
numCÏs£s
; ++i) {

128 ià(
dsi
.
	`G‘WeightEx´essiÚ
(
i
è!ğ
	`TSŒšg
("")) {

129 
	`Log
(è<< 
kERROR
 << "Cu¼’yƒv’ˆweight ¬nÙ cÚsid”ed…rİ”ly byhi m‘hod." << 
Endl
;

143 
TMVA
::
M‘hodDNN
::
	`Deş¬eO±iÚs
()

146 
	`Deş¬eO±iÚRef
(
fLayoutSŒšg
="SOFTSIGN|(N+100)*2,LINEAR",

150 
	`Deş¬eO±iÚRef
(
fE¼ÜSŒ©egy
="CROSSENTROPY",

154 
	`AddP»DefV®
(
	`TSŒšg
("CROSSENTROPY"));

155 
	`AddP»DefV®
(
	`TSŒšg
("SUMOFSQUARES"));

156 
	`AddP»DefV®
(
	`TSŒšg
("MUTUALEXCLUSIVE"));

158 
	`Deş¬eO±iÚRef
(
fWeightIn™Ÿliz©iÚSŒšg
="XAVIER",

161 
	`AddP»DefV®
(
	`TSŒšg
("XAVIER"));

162 
	`AddP»DefV®
(
	`TSŒšg
("XAVIERUNIFORM"));

164 
	`Deş¬eO±iÚRef
(
fArch™eùu»SŒšg
 = "CPU", "Architecture", "Which‡rchitectureo…erformheraining on.");

165 
	`AddP»DefV®
(
	`TSŒšg
("STANDARD"));

166 
	`AddP»DefV®
(
	`TSŒšg
("CPU"));

167 
	`AddP»DefV®
(
	`TSŒšg
("GPU"));

168 
	`AddP»DefV®
(
	`TSŒšg
("OPENCL"));

170 
	`Deş¬eO±iÚRef
(

171 
fT¿ššgSŒ©egySŒšg
 = "LearningRate=1e-1,"

199 autØ
TMVA
::
M‘hodDNN
::
	`P¬£LayoutSŒšg
(
TSŒšg
 
ÏyoutSŒšg
)

200 -> 
LayoutVeùÜ_t


202 
LayoutVeùÜ_t
 
Ïyout
;

203 cÚ¡ 
TSŒšg
 
	`Ïy”D–im™”
(",");

204 cÚ¡ 
TSŒšg
 
	`subD–im™”
("|");

206 cÚ¡ 
size_t
 
šputSize
 = 
	`G‘Nv¬
();

208 
TObjA¼ay
* 
Ïy”SŒšgs
 = 
ÏyoutSŒšg
.
	`Tok’ize
(
Ïy”D–im™”
);

209 
TI‹r
 
	`ÃxtLay”
 (
Ïy”SŒšgs
);

210 
TObjSŒšg
* 
Ïy”SŒšg
 = (TObjSŒšg*)
	`ÃxtLay”
 ();

212 ; 
Ïy”SŒšg
 !ğ
nuÎ±r
;†ay”SŒšg = (
TObjSŒšg
*è
	`ÃxtLay”
()) {

213 
numNodes
 = 0;

214 
EAùiv©iÚFunùiÚ
 
aùiv©iÚFunùiÚ
 = EAùiv©iÚFunùiÚ::
kTªh
;

216 
TObjA¼ay
* 
subSŒšgs
 = 
Ïy”SŒšg
->
	`G‘SŒšg
().
	`Tok’ize
(
subD–im™”
);

217 
TI‹r
 
	`ÃxtTok’
 (
subSŒšgs
);

218 
TObjSŒšg
* 
tok’
 = (TObjSŒšg *è
	`ÃxtTok’
();

219 
idxTok’
 = 0;

220 ; 
tok’
 !ğ
nuÎ±r
;ok’ = (
TObjSŒšg
 *è
	`ÃxtTok’
()) {

221 
idxTok’
)

225 
TSŒšg
 
	`¡rAùFnc
 (
tok’
->
	`G‘SŒšg
 ());

226 ià(
¡rAùFnc
 == "RELU") {

227 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kR–u
;

228 } ià(
¡rAùFnc
 == "TANH") {

229 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kTªh
;

230 } ià(
¡rAùFnc
 == "SYMMRELU") {

231 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kSymmR–u
;

232 } ià(
¡rAùFnc
 == "SOFTSIGN") {

233 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kSoáSign
;

234 } ià(
¡rAùFnc
 == "SIGMOID") {

235 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kSigmoid
;

236 } ià(
¡rAùFnc
 == "LINEAR") {

237 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kId’t™y
;

238 } ià(
¡rAùFnc
 == "GAUSS") {

239 
aùiv©iÚFunùiÚ
 = 
DNN
::
EAùiv©iÚFunùiÚ
::
kGauss
;

245 
TSŒšg
 
	`¡rNumNodes
 (
tok’
->
	`G‘SŒšg
 ());

246 
TSŒšg
 
	`¡rN
 ("x");

247 
¡rNumNodes
.
	`R•ÏûAÎ
 ("N", 
¡rN
);

248 
¡rNumNodes
.
	`R•ÏûAÎ
 ("n", 
¡rN
);

249 
TFÜmuÏ
 
	`fml
 ("tmp",
¡rNumNodes
);

250 
numNodes
 = 
fml
.
	`Ev®
 (
šputSize
);

254 ++
idxTok’
;

256 
Ïyout
.
	`push_back
(
¡d
::
	`make_·œ
(
numNodes
, 
aùiv©iÚFunùiÚ
));

258  
Ïyout
;

264 autØ
TMVA
::
M‘hodDNN
::
	`P¬£KeyV®ueSŒšg
(
TSŒšg
 
·r£SŒšg
,

265 
TSŒšg
 
blockD–im
,

266 
TSŒšg
 
tok’D–im
)

267 -> 
KeyV®ueVeùÜ_t


269 
KeyV®ueVeùÜ_t
 
blockKeyV®ues
;

270 cÚ¡ 
TSŒšg
 
	`keyV®ueD–im
 ("=");

272 
TObjA¼ay
* 
blockSŒšgs
 = 
·r£SŒšg
.
	`Tok’ize
 (
blockD–im
);

273 
TI‹r
 
	`ÃxtBlock
 (
blockSŒšgs
);

274 
TObjSŒšg
* 
blockSŒšg
 = (TObjSŒšg *è
	`ÃxtBlock
();

276 ; 
blockSŒšg
 !ğ
nuÎ±r
; blockSŒšg = (
TObjSŒšg
 *è
	`ÃxtBlock
())

278 
blockKeyV®ues
.
	`push_back
 (
¡d
::
m­
<
TSŒšg
,TString>());

279 
¡d
::
m­
<
TSŒšg
,TSŒšg>& 
cu¼’tBlock
 = 
blockKeyV®ues
.
	`back
 ();

281 
TObjA¼ay
* 
subSŒšgs
 = 
blockSŒšg
->
	`G‘SŒšg
 ().
	`Tok’ize
 (
tok’D–im
);

282 
TI‹r
 
	`ÃxtTok’
 (
subSŒšgs
);

283 
TObjSŒšg
* 
tok’
 = (TObjSŒšg*)
	`ÃxtTok’
 ();

285 ; 
tok’
 !ğ
nuÎ±r
;ok’ = (
TObjSŒšg
 *)
	`ÃxtTok’
())

287 
TSŒšg
 
	`¡rKeyV®ue
 (
tok’
->
	`G‘SŒšg
 ());

288 
d–imPos
 = 
¡rKeyV®ue
.
	`Fœ¡
 (
keyV®ueD–im
.
	`D©a
 ());

289 ià(
d–imPos
 <= 0)

292 
TSŒšg
 
¡rKey
 = 
	`TSŒšg
 (
	`¡rKeyV®ue
 (0, 
d–imPos
));

293 
¡rKey
.
	`ToUµ”
();

294 
TSŒšg
 
¡rV®ue
 = 
	`TSŒšg
 (
	`¡rKeyV®ue
 (
d–imPos
+1, 
¡rKeyV®ue
.
	`L’gth
 ()));

296 
¡rKey
.
	`SŒ
 (
TSŒšg
::
kBÙh
, ' ');

297 
¡rV®ue
.
	`SŒ
 (
TSŒšg
::
kBÙh
, ' ');

299 
cu¼’tBlock
.
	`š£¹
 (
¡d
::
	`make_·œ
 (
¡rKey
, 
¡rV®ue
));

302  
blockKeyV®ues
;

307 
TSŒšg
 
	`ãtchV®ue
 (cÚ¡ 
¡d
::
m­
<TSŒšg, TSŒšg>& 
keyV®ueM­
, TSŒšg 
key
)

309 
key
.
	`ToUµ”
 ();

310 
¡d
::
m­
<
TSŒšg
, TSŒšg>::
cÚ¡_™”©Ü
 
™
 = 
keyV®ueM­
.
	`fšd
 (
key
);

311 ià(
™
 =ğ
keyV®ueM­
.
	`’d
()) {

312  
	`TSŒšg
 ("");

314  
™
->
£cÚd
;

319 
‹m¶©e
 <
ty³Çme
 
T
>

320 
T
 
	`ãtchV®ue
(cÚ¡ 
¡d
::
m­
<
TSŒšg
,TSŒšg>& 
keyV®ueM­
,

321 
TSŒšg
 
key
,

322 
T
 
deçuÉV®ue
);

326 
‹m¶©e
 <>

327 
	`ãtchV®ue
(cÚ¡ 
¡d
::
m­
<
TSŒšg
,TSŒšg>& 
keyV®ueM­
,

328 
TSŒšg
 
key
,

329 
deçuÉV®ue
)

331 
TSŒšg
 
	`v®ue
 (
	`ãtchV®ue
 (
keyV®ueM­
, 
key
));

332 ià(
v®ue
 == "") {

333  
deçuÉV®ue
;

335  
v®ue
.
	`Atoi
 ();

340 
‹m¶©e
 <>

341 
	`ãtchV®ue
 (cÚ¡ 
¡d
::
m­
<
TSŒšg
,TSŒšg>& 
keyV®ueM­
,

342 
TSŒšg
 
key
, 
deçuÉV®ue
)

344 
TSŒšg
 
	`v®ue
 (
	`ãtchV®ue
 (
keyV®ueM­
, 
key
));

345 ià(
v®ue
 == "") {

346  
deçuÉV®ue
;

348  
v®ue
.
	`Atof
 ();

353 
‹m¶©e
 <>

354 
TSŒšg
 
	`ãtchV®ue
 (cÚ¡ 
¡d
::
m­
<TSŒšg,TSŒšg>& 
keyV®ueM­
,

355 
TSŒšg
 
key
, TSŒšg 
deçuÉV®ue
)

357 
TSŒšg
 
	`v®ue
 (
	`ãtchV®ue
 (
keyV®ueM­
, 
key
));

358 ià(
v®ue
 == "") {

359  
deçuÉV®ue
;

361  
v®ue
;

366 
‹m¶©e
 <>

367 
boŞ
 
	`ãtchV®ue
 (cÚ¡ 
¡d
::
m­
<
TSŒšg
,TSŒšg>& 
keyV®ueM­
,

368 
TSŒšg
 
key
, 
boŞ
 
deçuÉV®ue
)

370 
TSŒšg
 
	`v®ue
 (
	`ãtchV®ue
 (
keyV®ueM­
, 
key
));

371 ià(
v®ue
 == "") {

372  
deçuÉV®ue
;

374 
v®ue
.
	`ToUµ”
 ();

375 ià(
v®ue
 == "TRUE" || value == "T" || value == "1") {

376  
Œue
;

378  
çl£
;

383 
‹m¶©e
 <>

384 
¡d
::
veùÜ
<> 
	`ãtchV®ue
(cÚ¡ std::
m­
<
TSŒšg
, TSŒšg> & 
keyV®ueM­
,

385 
TSŒšg
 
key
,

386 
¡d
::
veùÜ
<> 
deçuÉV®ue
)

388 
TSŒšg
 
	`·r£SŒšg
 (
	`ãtchV®ue
 (
keyV®ueM­
, 
key
));

389 ià(
·r£SŒšg
 == "") {

390  
deçuÉV®ue
;

392 
·r£SŒšg
.
	`ToUµ”
 ();

393 
¡d
::
veùÜ
<> 
v®ues
;

395 cÚ¡ 
TSŒšg
 
	`tok’D–im
 ("+");

396 
TObjA¼ay
* 
tok’SŒšgs
 = 
·r£SŒšg
.
	`Tok’ize
 (
tok’D–im
);

397 
TI‹r
 
	`ÃxtTok’
 (
tok’SŒšgs
);

398 
TObjSŒšg
* 
tok’SŒšg
 = (TObjSŒšg*)
	`ÃxtTok’
 ();

399 ; 
tok’SŒšg
 !ğ
NULL
;ok’SŒšg = (
TObjSŒšg
*)
	`ÃxtTok’
 ()) {

400 
¡d
::
¡ršg¡»am
 
s¡r
;

401 
cu¼’tV®ue
;

402 
s¡r
 << 
tok’SŒšg
->
	`G‘SŒšg
 ().
	`D©a
 ();

403 
s¡r
 >> 
cu¼’tV®ue
;

404 
v®ues
.
	`push_back
 (
cu¼’tV®ue
);

406  
v®ues
;

411 
TMVA
::
M‘hodDNN
::
	`ProûssO±iÚs
()

413 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

414 
	`Log
(è<< 
kINFO


416 << 
Endl
;

419 ià(
fArch™eùu»SŒšg
 == "STANDARD") {

420 
	`Log
(è<< 
kERROR
 << "The STANDARD‡rchitecture has been deprecated. "

424 << 
Endl
;

425 
	`Log
(è<< 
kFATAL
 << "The STANDARD‡rchitecture has been deprecated. "

429 << 
Endl
;

432 ià(
fArch™eùu»SŒšg
 == "OPENCL") {

433 
	`Log
(è<< 
kERROR
 << "The OPENCL‡rchitecture has‚ot been implemented yet. "

437 << 
Endl
;

438 
	`Log
(è<< 
kFATAL
 << "The OPENCL‡rchitecture has‚ot been implemented yet. "

442 << 
Endl
;

445 ià(
fArch™eùu»SŒšg
 == "GPU") {

446 #iâdeà
DNNCUDA


447 
	`Log
(è<< 
kERROR
 << "CUDA backend‚otƒnabled. Please make sure "

450 << 
Endl
;

451 
	`Log
(è<< 
kFATAL
 << "CUDA backend‚otƒnabled. Please make sure "

454 << 
Endl
;

458 ià(
fArch™eùu»SŒšg
 == "CPU") {

459 #iâdeà
DNNCPU


460 
	`Log
(è<< 
kERROR
 << "Multi-core CPU backend‚otƒnabled. Please make sure "

463 << 
Endl
;

464 
	`Log
(è<< 
kFATAL
 << "Multi-core CPU backend‚otƒnabled. Please make sure "

467 << 
Endl
;

475 
fLayout
 = 
TMVA
::
M‘hodDNN
::
	`P¬£LayoutSŒšg
 (
fLayoutSŒšg
);

476 
size_t
 
šputSize
 = 
	`G‘NV¬ŸbËs
 ();

477 
size_t
 
ouutSize
 = 1;

478 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
 && 
	`G‘NT¬g‘s
() != 0) {

479 
ouutSize
 = 
	`G‘NT¬g‘s
();

480 } ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
 && 
	`D©aInfo
().
	`G‘NCÏs£s
() >= 2) {

481 
ouutSize
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

484 
fN‘
.
	`S‘B©chSize
(1);

485 
fN‘
.
	`S‘IÅutWidth
(
šputSize
);

487 autØ
™Layout
 = 
¡d
::
	`begš
 (
fLayout
);

488 autØ
™LayoutEnd
 = 
¡d
::
	`’d
 (
fLayout
)-1;

489  ; 
™Layout
 !ğ
™LayoutEnd
; ++itLayout) {

490 
fN‘
.
	`AddLay”
((*
™Layout
).
fœ¡
, (*™Layout).
£cÚd
);

492 
fN‘
.
	`AddLay”
(
ouutSize
, 
EAùiv©iÚFunùiÚ
::
kId’t™y
);

498 
fOuutFunùiÚ
 = 
EOuutFunùiÚ
::
kSigmoid
;

499 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
)

501 ià(
fE¼ÜSŒ©egy
 == "SUMOFSQUARES") {

502 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kM—nSqu¬edE¼Ü
);

504 ià(
fE¼ÜSŒ©egy
 == "CROSSENTROPY") {

505 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kCrossEÁrİy
);

507 
fOuutFunùiÚ
 = 
EOuutFunùiÚ
::
kSigmoid
;

508 } ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kReg»ssiÚ
) {

509 ià(
fE¼ÜSŒ©egy
 != "SUMOFSQUARES") {

510 
	`Log
 (è<< 
kWARNING
 << "For„egression only SUMOFSQUARES is‡ valid "

512 << " SUMOFSQUARES‚ow." << 
Endl
;

514 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kM—nSqu¬edE¼Ü
);

515 
fOuutFunùiÚ
 = 
EOuutFunùiÚ
::
kId’t™y
;

516 } ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

517 ià(
fE¼ÜSŒ©egy
 == "SUMOFSQUARES") {

518 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kM—nSqu¬edE¼Ü
);

520 ià(
fE¼ÜSŒ©egy
 == "CROSSENTROPY") {

521 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kCrossEÁrİy
);

523 ià(
fE¼ÜSŒ©egy
 == "MUTUALEXCLUSIVE") {

524 
fN‘
.
	`S‘LossFunùiÚ
(
ELossFunùiÚ
::
kSoámaxCrossEÁrİy
);

526 
fOuutFunùiÚ
 = 
EOuutFunùiÚ
::
kSoámax
;

533 ià(
fWeightIn™Ÿliz©iÚSŒšg
 == "XAVIER") {

534 
fWeightIn™Ÿliz©iÚ
 = 
DNN
::
EIn™Ÿliz©iÚ
::
kGauss
;

536 ià(
fWeightIn™Ÿliz©iÚSŒšg
 == "XAVIERUNIFORM") {

537 
fWeightIn™Ÿliz©iÚ
 = 
DNN
::
EIn™Ÿliz©iÚ
::
kUnifÜm
;

540 
fWeightIn™Ÿliz©iÚ
 = 
DNN
::
EIn™Ÿliz©iÚ
::
kGauss
;

547 
KeyV®ueVeùÜ_t
 
¡¿‹gyKeyV®ues
 = 
	`P¬£KeyV®ueSŒšg
(
fT¿ššgSŒ©egySŒšg
,

548 
	`TSŒšg
 ("|"),

549 
	`TSŒšg
 (","));

550 auto& 
block
 : 
¡¿‹gyKeyV®ues
) {

551 
TT¿ššgS‘tšgs
 
£‰šgs
;

553 
£‰šgs
.
cÚv”g’ûS‹ps
 = 
	`ãtchV®ue
(
block
, "ConvergenceSteps", 100);

554 
£‰šgs
.
b©chSize
 = 
	`ãtchV®ue
(
block
, "BatchSize", 30);

555 
£‰šgs
.
‹¡IÁ”v®
 = 
	`ãtchV®ue
(
block
, "TestRepetitions", 7);

556 
£‰šgs
.
weightDeÿy
 = 
	`ãtchV®ue
(
block
, "WeightDecay", 0.0);

557 
£‰šgs
.
Ë¬nšgR©e
 = 
	`ãtchV®ue
(
block
, "LearningRate", 1e-5);

558 
£‰šgs
.
mom’tum
 = 
	`ãtchV®ue
(
block
, "Momentum", 0.3);

559 
£‰šgs
.
drİoutProbab™›s
 = 
	`ãtchV®ue
(
block
, "DropConfig",

560 
¡d
::
veùÜ
<
DoubË_t
>());

562 
TSŒšg
 
»guÏriz©iÚ
 = 
	`ãtchV®ue
(
block
, "Regularization",

563 
	`TSŒšg
 ("NONE"));

564 ià(
»guÏriz©iÚ
 == "L1") {

565 
£‰šgs
.
»guÏriz©iÚ
 = 
DNN
::
EReguÏriz©iÚ
::
kL1
;

566 } ià(
»guÏriz©iÚ
 == "L2") {

567 
£‰šgs
.
»guÏriz©iÚ
 = 
DNN
::
EReguÏriz©iÚ
::
kL2
;

570 
TSŒšg
 
¡rMuÉ™h»adšg
 = 
	`ãtchV®ue
(
block
, "Multithreading",

571 
	`TSŒšg
 ("True"));

572 ià(
¡rMuÉ™h»adšg
.
	`BegšsW™h
 ("T")) {

573 
£‰šgs
.
muÉ™h»adšg
 = 
Œue
;

575 
£‰šgs
.
muÉ™h»adšg
 = 
çl£
;

578 
fT¿ššgS‘tšgs
.
	`push_back
(
£‰šgs
);

584 
TMVA
::
M‘hodDNN
::
	`T¿š
()

586 ià(
fIÁ”aùive
 && fIÁ”aùive->
	`NÙIn™Ÿlized
()){

587 
¡d
::
veùÜ
<
TSŒšg
> 
t™Ës
 = {"Error onraining set", "Error onest set"};

588 
fIÁ”aùive
->
	`In™
(
t™Ës
);

590 
fIPyMaxI‹r
 = 100;

593 ià(
fArch™eùu»SŒšg
 == "GPU") {

594 
	`T¿šGpu
();

595 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

596 
	`Ex™FromT¿ššg
();

598 } ià(
fArch™eùu»SŒšg
 == "OpenCL") {

599 
	`Log
(è<< 
kFATAL
 << "O³nCL back’d‚Ù y‘ suµÜ‹d." << 
Endl
;

601 } ià(
fArch™eùu»SŒšg
 == "CPU") {

602 
	`T¿šCpu
();

603 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

604 
	`Ex™FromT¿ššg
();

608 
	`Log
(è<< 
kINFO
 << "Using Standard Implementation.";

610 
¡d
::
veùÜ
<
P©‹º
> 
ŒašP©‹º
;

611 
¡d
::
veùÜ
<
P©‹º
> 
‹¡P©‹º
;

613 cÚ¡ 
¡d
::
veùÜ
<
TMVA
::
Ev’t
*>& 
ev’tCŞËùiÚT¿ššg
 = 
	`G‘Ev’tCŞËùiÚ
 (
Ty³s
::
kT¿ššg
);

614 cÚ¡ 
¡d
::
veùÜ
<
TMVA
::
Ev’t
*>& 
ev’tCŞËùiÚTe¡šg
 = 
	`G‘Ev’tCŞËùiÚ
 (
Ty³s
::
kTe¡šg
);

616 autØ&
ev’t
 : 
ev’tCŞËùiÚT¿ššg
) {

617 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
v®ues
 = 
ev’t
->
	`G‘V®ues
();

618 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
) {

619 
ouutV®ue
 = 
ev’t
->
	`G‘CÏss
 () == 0 ? 0.9 : 0.1;

620 
ŒašP©‹º
.
	`push_back
(
	`P©‹º
 (
v®ues
.
	`begš
(),

621 
v®ues
.
	`’d
(),

622 
ouutV®ue
,

623 
ev’t
->
	`G‘Weight
()));

624 
ŒašP©‹º
.
	`back
().
	`addIÅut
(1.0);

625 } ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

626 
¡d
::
veùÜ
<
Flßt_t
> 
	`ÚeHÙ
(
	`D©aInfo
().
	`G‘NCÏs£s
(), 0.0);

627 
ÚeHÙ
[
ev’t
->
	`G‘CÏss
()] = 1.0;

628 
ŒašP©‹º
.
	`push_back
(
	`P©‹º
 (
v®ues
.
	`begš
(), v®ues.
	`’d
(),

629 
ÚeHÙ
.
	`cbegš
(), oÃHÙ.
	`ûnd
(),

630 
ev’t
->
	`G‘Weight
()));

631 
ŒašP©‹º
.
	`back
().
	`addIÅut
(1.0);

633 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
rg‘s
 = 
ev’t
->
	`G‘T¬g‘s
 ();

634 
ŒašP©‹º
.
	`push_back
(
	`P©‹º
(
v®ues
.
	`begš
(),

635 
v®ues
.
	`’d
(),

636 
rg‘s
.
	`begš
(),

637 
rg‘s
.
	`’d
(),

638 
ev’t
->
	`G‘Weight
 ()));

639 
ŒašP©‹º
.
	`back
 ().
	`addIÅut
 (1.0);

643 autØ&
ev’t
 : 
ev’tCŞËùiÚTe¡šg
) {

644 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
v®ues
 = 
ev’t
->
	`G‘V®ues
();

645 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
) {

646 
ouutV®ue
 = 
ev’t
->
	`G‘CÏss
 () == 0 ? 0.9 : 0.1;

647 
‹¡P©‹º
.
	`push_back
(
	`P©‹º
 (
v®ues
.
	`begš
(),

648 
v®ues
.
	`’d
(),

649 
ouutV®ue
,

650 
ev’t
->
	`G‘Weight
()));

651 
‹¡P©‹º
.
	`back
().
	`addIÅut
(1.0);

652 } ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kMuÉişass
) {

653 
¡d
::
veùÜ
<
Flßt_t
> 
	`ÚeHÙ
(
	`D©aInfo
().
	`G‘NCÏs£s
(), 0.0);

654 
ÚeHÙ
[
ev’t
->
	`G‘CÏss
()] = 1.0;

655 
‹¡P©‹º
.
	`push_back
(
	`P©‹º
 (
v®ues
.
	`begš
(), v®ues.
	`’d
(),

656 
ÚeHÙ
.
	`cbegš
(), oÃHÙ.
	`ûnd
(),

657 
ev’t
->
	`G‘Weight
()));

658 
‹¡P©‹º
.
	`back
().
	`addIÅut
(1.0);

660 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
rg‘s
 = 
ev’t
->
	`G‘T¬g‘s
 ();

661 
‹¡P©‹º
.
	`push_back
(
	`P©‹º
(
v®ues
.
	`begš
(),

662 
v®ues
.
	`’d
(),

663 
rg‘s
.
	`begš
(),

664 
rg‘s
.
	`’d
(),

665 
ev’t
->
	`G‘Weight
 ()));

666 
‹¡P©‹º
.
	`back
 ().
	`addIÅut
 (1.0);

670 
TMVA
::
DNN
::
N‘
 
Ãt
;

671 
¡d
::
veùÜ
<> 
weights
;

673 
Ãt
.
	`S‘IpythÚIÁ”aùive
(
fIÁ”aùive
, &
fEx™FromT¿ššg
, &
fIPyMaxI‹r
, &
fIPyCu¼’tI‹r
);

675 
Ãt
.
	`£tIÅutSize
(
fN‘
.
	`G‘IÅutWidth
() + 1);

676 
Ãt
.
	`£tOuutSize
(
fN‘
.
	`G‘OuutWidth
() + 1);

678 
size_t
 
i
 = 0; i < 
fN‘
.
	`G‘D•th
(); i++) {

679 
EAùiv©iÚFunùiÚ
 
f
 = 
fN‘
.
	`G‘Lay”
(
i
).
	`G‘Aùiv©iÚFunùiÚ
();

680 
EnumFunùiÚ
 
g
 = EnumFunùiÚ::
LINEAR
;

681 
f
) {

682 
EAùiv©iÚFunùiÚ
::
kId’t™y
: 
g
 = 
EnumFunùiÚ
::
LINEAR
; ;

683 
EAùiv©iÚFunùiÚ
::
kR–u
: 
g
 = 
EnumFunùiÚ
::
RELU
; ;

684 
EAùiv©iÚFunùiÚ
::
kSigmoid
: 
g
 = 
EnumFunùiÚ
::
SIGMOID
; ;

685 
EAùiv©iÚFunùiÚ
::
kTªh
: 
g
 = 
EnumFunùiÚ
::
TANH
; ;

686 
EAùiv©iÚFunùiÚ
::
kSymmR–u
: 
g
 = 
EnumFunùiÚ
::
SYMMRELU
; ;

687 
EAùiv©iÚFunùiÚ
::
kSoáSign
: 
g
 = 
EnumFunùiÚ
::
SOFTSIGN
; ;

688 
EAùiv©iÚFunùiÚ
::
kGauss
: 
g
 = 
EnumFunùiÚ
::
GAUSS
; ;

690 ià(
i
 < 
fN‘
.
	`G‘D•th
() - 1) {

691 
Ãt
.
	`addLay”
(
	`Lay”
(
fN‘
.
	`G‘Lay”
(
i
).
	`G‘Width
(), 
g
));

693 
ModeOuutV®ues
 
h
 = ModeOuutV®ues::
DIRECT
;

694 
fOuutFunùiÚ
) {

695 
EOuutFunùiÚ
::
kId’t™y
: 
h
 = 
ModeOuutV®ues
::
DIRECT
; ;

696 
EOuutFunùiÚ
::
kSigmoid
: 
h
 = 
ModeOuutV®ues
::
SIGMOID
; ;

697 
EOuutFunùiÚ
::
kSoámax
: 
h
 = 
ModeOuutV®ues
::
SOFTMAX
; ;

699 
Ãt
.
	`addLay”
(
	`Lay”
(
fN‘
.
	`G‘Lay”
(
i
).
	`G‘Width
(), 
g
, 
h
));

703 
fN‘
.
	`G‘LossFunùiÚ
()) {

704 
ELossFunùiÚ
::
kM—nSqu¬edE¼Ü
:

705 
Ãt
.
	`£tE¼ÜFunùiÚ
(
ModeE¼ÜFunùiÚ
::
SUMOFSQUARES
);

707 
ELossFunùiÚ
::
kCrossEÁrİy
:

708 
Ãt
.
	`£tE¼ÜFunùiÚ
(
ModeE¼ÜFunùiÚ
::
CROSSENTROPY
);

710 
ELossFunùiÚ
::
kSoámaxCrossEÁrİy
:

711 
Ãt
.
	`£tE¼ÜFunùiÚ
(
ModeE¼ÜFunùiÚ
::
CROSSENTROPY_MUTUALEXCLUSIVE
);

715 
fWeightIn™Ÿliz©iÚ
) {

716 
EIn™Ÿliz©iÚ
::
kGauss
:

717 
Ãt
.
	`š™ŸlizeWeights
(
WeightIn™Ÿliz©iÚSŒ©egy
::
XAVIER
,

718 
¡d
::
	`back_š£¹”
(
weights
));

720 
EIn™Ÿliz©iÚ
::
kUnifÜm
:

721 
Ãt
.
	`š™ŸlizeWeights
(
WeightIn™Ÿliz©iÚSŒ©egy
::
XAVIERUNIFORM
,

722 
¡d
::
	`back_š£¹”
(
weights
));

725 
Ãt
.
	`š™ŸlizeWeights
(
WeightIn™Ÿliz©iÚSŒ©egy
::
XAVIER
,

726 
¡d
::
	`back_š£¹”
(
weights
));

730 
idxS‘tšg
 = 0;

731 autØ
s
 : 
fT¿ššgS‘tšgs
) {

733 
EnumReguÏriz©iÚ
 
r
 = EnumReguÏriz©iÚ::
NONE
;

734 
s
.
»guÏriz©iÚ
) {

735 
EReguÏriz©iÚ
::
kNÚe
: 
r
 = 
EnumReguÏriz©iÚ
::
NONE
; ;

736 
EReguÏriz©iÚ
::
kL1
: 
r
 = 
EnumReguÏriz©iÚ
::
L1
; ;

737 
EReguÏriz©iÚ
::
kL2
: 
r
 = 
EnumReguÏriz©iÚ
::
L2
; ;

740 
S‘tšgs
 * 
£‰šgs
 = 
Ãw
 
	`S‘tšgs
(
	`TSŒšg
(), 
s
.
cÚv”g’ûS‹ps
, s.
b©chSize
,

741 
s
.
‹¡IÁ”v®
, s.
weightDeÿy
, 
r
,

742 
Mšimiz”Ty³
::
fS‹•e¡
, 
s
.
Ë¬nšgR©e
,

743 
s
.
mom’tum
, 1, s.
muÉ™h»adšg
);

744 
¡d
::
sh¬ed_±r
<
S‘tšgs
> 
	`±rS‘tšgs
(
£‰šgs
);

745 
±rS‘tšgs
->
	`£tMÚ™Üšg
 (0);

746 
	`Log
(è<< 
kINFO


747 << "T¿ššg w™h†—ºšg„©ğ" << 
±rS‘tšgs
->
	`Ë¬nšgR©e
 ()

748 << ", mom’tum = " << 
±rS‘tšgs
->
	`mom’tum
 ()

749 << ",„•‘™iÚ ğ" << 
±rS‘tšgs
->
	`»³t™iÚs
 ()

750 << 
Endl
;

752 
±rS‘tšgs
->
	`£tProg»ssLim™s
 ((
idxS‘tšg
)*100.0/(
fS‘tšgs
.
	`size
 ()),

753 (
idxS‘tšg
+1)*100.0/(
fS‘tšgs
.
	`size
 ()));

755 cÚ¡ 
¡d
::
veùÜ
<>& 
drİCÚfig
 = 
±rS‘tšgs
->
	`drİF¿ùiÚs
 ();

756 ià(!
drİCÚfig
.
	`em±y
 ()) {

757 
	`Log
 (è<< 
kINFO
 << "Drİ cÚfigu¿tiÚ" << 
Endl


758 << " drİ„•‘™iÚ ğ" << 
±rS‘tšgs
->
	`drİR•‘™iÚs
()

759 << 
Endl
;

762 
idx
 = 0;

763 autØ
f
 : 
drİCÚfig
) {

764 
	`Log
 (è<< 
kINFO
 << " Lay” " << 
idx
 << " = " << 
f
 << 
Endl
;

765 ++
idx
;

767 
	`Log
 (è<< 
kINFO
 << 
Endl
;

769 
DNN
::
S‹•e¡
 
	`mšimiz”
(
±rS‘tšgs
->
	`Ë¬nšgR©e
(),

770 
±rS‘tšgs
->
	`mom’tum
(),

771 
±rS‘tšgs
->
	`»³t™iÚs
());

772 
Ãt
.
	`Œaš
(
weights
, 
ŒašP©‹º
, 
‹¡P©‹º
, 
mšimiz”
, *
±rS‘tšgs
.
	`g‘
());

773 
±rS‘tšgs
.
	`»£t
();

774 
	`Log
 (è<< 
kINFO
 << 
Endl
;

775 
idxS‘tšg
++;

777 
size_t
 
weightIndex
 = 0;

778 
size_t
 
l
 = 0;† < 
fN‘
.
	`G‘D•th
();†++) {

779 autØ& 
Ïy”Weights
 = 
fN‘
.
	`G‘Lay”
(
l
).
	`G‘Weights
();

780 
IÁ_t
 
j
 = 0; j < 
Ïy”Weights
.
	`G‘NcŞs
(); j++) {

781 
IÁ_t
 
i
 = 0; i < 
Ïy”Weights
.
	`G‘Nrows
(); i++) {

782 
	`Ïy”Weights
(
i
,
j
èğ
weights
[
weightIndex
];

783 
weightIndex
++;

786 autØ& 
Ïy”BŸ£s
 = 
fN‘
.
	`G‘Lay”
(
l
).
	`G‘BŸ£s
();

787 ià(
l
 == 0) {

788 
IÁ_t
 
i
 = 0; i < 
Ïy”BŸ£s
.
	`G‘Nrows
(); i++) {

789 
	`Ïy”BŸ£s
(
i
,0èğ
weights
[
weightIndex
];

790 
weightIndex
++;

793 
IÁ_t
 
i
 = 0; i < 
Ïy”BŸ£s
.
	`G‘Nrows
(); i++) {

794 
	`Ïy”BŸ£s
(
i
,0) = 0.0;

798 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

799 
	`Ex™FromT¿ššg
();

804 
TMVA
::
M‘hodDNN
::
	`T¿šGpu
()

807 #ifdeà
DNNCUDA


809 
size_t
 
nT¿ššgSam¶es
 = 
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
).
	`size
();

810 
size_t
 
nTe¡Sam¶es
 = 
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
).
	`size
();

812 
	`Log
(è<< 
kINFO
 << "S¹ oàÃu¿ÈÃtwÜk¿ššg oÀGPU." << 
Endl
;

814 
size_t
 
ŒaššgPha£
 = 1;

815 
fN‘
.
	`In™Ÿlize
(
fWeightIn™Ÿliz©iÚ
);

816 
TT¿ššgS‘tšgs
 & 
£‰šgs
 : 
fT¿ššgS‘tšgs
) {

818 ià(
fIÁ”aùive
){

819 
fIÁ”aùive
->
	`CË¬G¿phs
();

822 
TN‘
<
TCuda
<>> 
	`Ãt
(
£‰šgs
.
b©chSize
, 
fN‘
);

823 
Ãt
.
	`S‘WeightDeÿy
(
£‰šgs
.
weightDeÿy
);

824 
Ãt
.
	`S‘ReguÏriz©iÚ
(
£‰šgs
.
»guÏriz©iÚ
);

828 
¡d
::
veùÜ
<
DoubË_t
> 
	`drİoutVeùÜ
(
£‰šgs
.
drİoutProbab™›s
);

829 autØ& 
p
 : 
drİoutVeùÜ
) {

830 
p
 = 1.0 -…;

832 
Ãt
.
	`S‘DrİoutProbab™›s
(
drİoutVeùÜ
);

834 
Ãt
.
	`In™ŸlizeG¿d›Ás
();

835 autØ
‹¡N‘
 = 
Ãt
.
	`C»©eClÚe
(
£‰šgs
.
b©chSize
);

837 
	`Log
(è<< 
kINFO
 << "T¿ššg…ha£ " << 
ŒaššgPha£
 << " of "

838 << 
fT¿ššgS‘tšgs
.
	`size
(è<< ":" << 
Endl
;

839 
ŒaššgPha£
++;

841 
usšg
 
D©aLßd”_t
 = 
TD©aLßd”
<
TMVAIÅut_t
, 
TCuda
<>>;

843 
size_t
 
nTh»ads
 = 1;

844 
D©aLßd”_t
 
	`ŒaššgD©a
(
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
),

845 
nT¿ššgSam¶es
,

846 
Ãt
.
	`G‘B©chSize
(),

847 
Ãt
.
	`G‘IÅutWidth
(),

848 
Ãt
.
	`G‘OuutWidth
(), 
nTh»ads
);

849 
D©aLßd”_t
 
	`‹¡D©a
(
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
),

850 
nTe¡Sam¶es
,

851 
‹¡N‘
.
	`G‘B©chSize
(),

852 
Ãt
.
	`G‘IÅutWidth
(),

853 
Ãt
.
	`G‘OuutWidth
(), 
nTh»ads
);

854 
DNN
::
TG¿d›ÁDesûÁ
<
TCuda
<>> 
	`mšimiz”
(
£‰šgs
.
Ë¬nšgR©e
,

855 
£‰šgs
.
cÚv”g’ûS‹ps
,

856 
£‰šgs
.
‹¡IÁ”v®
);

858 
¡d
::
veùÜ
<
TN‘
<
TCuda
<>>> 
Ãts
{};

859 
¡d
::
veùÜ
<
TB©ch
<
TCuda
<>>> 
b©ches
{};

860 
Ãts
.
	`»£rve
(
nTh»ads
);

861 
size_t
 
i
 = 0; i < 
nTh»ads
; i++) {

862 
Ãts
.
	`push_back
(
Ãt
);

863 
size_t
 
j
 = 0; j < 
Ãt
.
	`G‘D•th
(); j++)

865 autØ&
ma¡”Lay”
 = 
Ãt
.
	`G‘Lay”
(
j
);

866 autØ&
Ïy”
 = 
Ãts
.
	`back
().
	`G‘Lay”
(
j
);

867 
TCuda
<>::
	`Cİy
(
Ïy”
.
	`G‘Weights
(),

868 
ma¡”Lay”
.
	`G‘Weights
());

869 
TCuda
<>::
	`Cİy
(
Ïy”
.
	`G‘BŸ£s
(),

870 
ma¡”Lay”
.
	`G‘BŸ£s
());

874 
boŞ
 
cÚv”ged
 = 
çl£
;

875 
size_t
 
¡•CouÁ
 = 0;

876 
size_t
 
b©chesInEpoch
 = 
nT¿ššgSam¶es
 / 
Ãt
.
	`G‘B©chSize
();

878 
¡d
::
chrÚo
::
time_pošt
<¡d::chrÚo::
sy¡em_şock
> 
¡¬t
, 
’d
;

879 
¡¬t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

881 ià(!
fIÁ”aùive
) {

882 
	`Log
(è<< 
¡d
::
	`£tw
(10) << "Epoch" << " | "

883 << 
¡d
::
	`£tw
(12) << "Train Err."

884 << 
¡d
::
	`£tw
(12) << "Test Err."

885 << 
¡d
::
	`£tw
(12) << "GFLOP/s"

886 << 
¡d
::
	`£tw
(12è<< "CÚv. S‹ps" << 
Endl
;

887 
¡d
::
¡ršg
 
	`£·¿tÜ
(62, '-');

888 
	`Log
(è<< 
£·¿tÜ
 << 
Endl
;

891 !
cÚv”ged
)

893 
¡•CouÁ
++;

896 
ŒaššgD©a
.
	`Shufæe
();

897 
size_t
 
i
 = 0; i < 
b©chesInEpoch
; i +ğ
nTh»ads
) {

898 
b©ches
.
	`ş—r
();

899 
size_t
 
j
 = 0; j < 
nTh»ads
; j++) {

900 
b©ches
.
	`»£rve
(
nTh»ads
);

901 
b©ches
.
	`push_back
(
ŒaššgD©a
.
	`G‘B©ch
());

903 ià(
£‰šgs
.
mom’tum
 > 0.0) {

904 
mšimiz”
.
	`S‹pMom’tum
(
Ãt
, 
Ãts
, 
b©ches
, 
£‰šgs
.
mom’tum
);

906 
mšimiz”
.
	`S‹p
(
Ãt
, 
Ãts
, 
b©ches
);

910 ià((
¡•CouÁ
 % 
mšimiz”
.
	`G‘Te¡IÁ”v®
()) == 0) {

913 
DoubË_t
 
‹¡E¼Ü
 = 0.0;

914 autØ
b©ch
 : 
‹¡D©a
) {

915 autØ
šputM©rix
 = 
b©ch
.
	`G‘IÅut
();

916 autØ
ouutM©rix
 = 
b©ch
.
	`G‘Ouut
();

917 
‹¡E¼Ü
 +ğ
‹¡N‘
.
	`Loss
(
šputM©rix
, 
ouutM©rix
);

919 
‹¡E¼Ü
 /ğ(
DoubË_t
è(
nTe¡Sam¶es
 / 
£‰šgs
.
b©chSize
);

921 
’d
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

924 
DoubË_t
 
ŒaššgE¼Ü
 = 0.0;

925 autØ
b©ch
 : 
ŒaššgD©a
) {

926 autØ
šputM©rix
 = 
b©ch
.
	`G‘IÅut
();

927 autØ
ouutM©rix
 = 
b©ch
.
	`G‘Ouut
();

928 
ŒaššgE¼Ü
 +ğ
Ãt
.
	`Loss
(
šputM©rix
, 
ouutM©rix
);

930 
ŒaššgE¼Ü
 /ğ(
DoubË_t
è(
nT¿ššgSam¶es
 / 
£‰šgs
.
b©chSize
);

933 
¡d
::
chrÚo
::
du¿tiÚ
<> 
–­£d_£cÚds
 = 
’d
 - 
¡¬t
;

934 
£cÚds
 = 
–­£d_£cÚds
.
	`couÁ
();

935 
nFlİs
 = (è(
£‰šgs
.
‹¡IÁ”v®
 * 
b©chesInEpoch
);

936 
nFlİs
 *ğ
Ãt
.
	`G‘NFlİs
() * 1e-9;

938 
cÚv”ged
 = 
mšimiz”
.
	`HasCÚv”ged
(
‹¡E¼Ü
);

939 
¡¬t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

941 ià(
fIÁ”aùive
) {

942 
fIÁ”aùive
->
	`AddPošt
(
¡•CouÁ
, 
ŒaššgE¼Ü
, 
‹¡E¼Ü
);

943 
fIPyCu¼’tI‹r
 = 100.0 * 
mšimiz”
.
	`G‘CÚv”g’ûCouÁ
()

944 / 
mšimiz”
.
	`G‘CÚv”g’ûS‹ps
 ();

945 ià(
fEx™FromT¿ššg
) ;

947 
	`Log
(è<< 
¡d
::
	`£tw
(10è<< 
¡•CouÁ
 << " | "

948 << 
¡d
::
	`£tw
(12è<< 
ŒaššgE¼Ü


949 << 
¡d
::
	`£tw
(12è<< 
‹¡E¼Ü


950 << 
¡d
::
	`£tw
(12è<< 
nFlİs
 / 
£cÚds


951 << 
¡d
::
	`£tw
(12è<< 
mšimiz”
.
	`G‘CÚv”g’ûCouÁ
(è<< 
Endl
;

952 ià(
cÚv”ged
) {

953 
	`Log
(è<< 
Endl
;

958 
size_t
 
l
 = 0;† < 
Ãt
.
	`G‘D•th
();†++) {

959 
fN‘
.
	`G‘Lay”
(
l
).
	`G‘Weights
(èğ(
TM©rixT
<
DoubË_t
>è
Ãt
.GetLayer(l).GetWeights();

960 
fN‘
.
	`G‘Lay”
(
l
).
	`G‘BŸ£s
(èğ(
TM©rixT
<
DoubË_t
>è
Ãt
.GetLayer(l).GetBiases();

966 
	`Log
(è<< 
kFATAL
 << "CUDA backend‚otƒnabled. Please make sure "

968 "d‘eùed by CMAKE." << 
Endl
;

974 
TMVA
::
M‘hodDNN
::
	`T¿šCpu
()

977 #ifdeà
DNNCPU


979 
size_t
 
nT¿ššgSam¶es
 = 
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
).
	`size
();

980 
size_t
 
nTe¡Sam¶es
 = 
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
).
	`size
();

982 
	`Log
(è<< 
kINFO
 << "S¹ oàÃu¿ÈÃtwÜk¿ššg oÀCPU." << 
Endl
 << Endl;

984 
fN‘
.
	`In™Ÿlize
(
fWeightIn™Ÿliz©iÚ
);

986 
size_t
 
ŒaššgPha£
 = 1;

987 
TT¿ššgS‘tšgs
 & 
£‰šgs
 : 
fT¿ššgS‘tšgs
) {

989 ià(
fIÁ”aùive
){

990 
fIÁ”aùive
->
	`CË¬G¿phs
();

993 
	`Log
(è<< "T¿ššg…ha£ " << 
ŒaššgPha£
 << " of "

994 << 
fT¿ššgS‘tšgs
.
	`size
(è<< ":" << 
Endl
;

995 
ŒaššgPha£
++;

997 
TN‘
<
TCpu
<>> 
	`Ãt
(
£‰šgs
.
b©chSize
, 
fN‘
);

998 
Ãt
.
	`S‘WeightDeÿy
(
£‰šgs
.
weightDeÿy
);

999 
Ãt
.
	`S‘ReguÏriz©iÚ
(
£‰šgs
.
»guÏriz©iÚ
);

1002 
¡d
::
veùÜ
<
DoubË_t
> 
	`drİoutVeùÜ
(
£‰šgs
.
drİoutProbab™›s
);

1003 autØ& 
p
 : 
drİoutVeùÜ
) {

1004 
p
 = 1.0 -…;

1006 
Ãt
.
	`S‘DrİoutProbab™›s
(
drİoutVeùÜ
);

1008 
Ãt
.
	`In™ŸlizeG¿d›Ás
();

1009 autØ
‹¡N‘
 = 
Ãt
.
	`C»©eClÚe
(
£‰šgs
.
b©chSize
);

1011 
usšg
 
D©aLßd”_t
 = 
TD©aLßd”
<
TMVAIÅut_t
, 
TCpu
<>>;

1013 
size_t
 
nTh»ads
 = 1;

1014 
D©aLßd”_t
 
	`ŒaššgD©a
(
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kT¿ššg
),

1015 
nT¿ššgSam¶es
,

1016 
Ãt
.
	`G‘B©chSize
(),

1017 
Ãt
.
	`G‘IÅutWidth
(),

1018 
Ãt
.
	`G‘OuutWidth
(), 
nTh»ads
);

1019 
D©aLßd”_t
 
	`‹¡D©a
(
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
),

1020 
nTe¡Sam¶es
,

1021 
‹¡N‘
.
	`G‘B©chSize
(),

1022 
Ãt
.
	`G‘IÅutWidth
(),

1023 
Ãt
.
	`G‘OuutWidth
(), 
nTh»ads
);

1024 
DNN
::
TG¿d›ÁDesûÁ
<
TCpu
<>> 
	`mšimiz”
(
£‰šgs
.
Ë¬nšgR©e
,

1025 
£‰šgs
.
cÚv”g’ûS‹ps
,

1026 
£‰šgs
.
‹¡IÁ”v®
);

1028 
¡d
::
veùÜ
<
TN‘
<
TCpu
<>>> 
Ãts
{};

1029 
¡d
::
veùÜ
<
TB©ch
<
TCpu
<>>> 
b©ches
{};

1030 
Ãts
.
	`»£rve
(
nTh»ads
);

1031 
size_t
 
i
 = 0; i < 
nTh»ads
; i++) {

1032 
Ãts
.
	`push_back
(
Ãt
);

1033 
size_t
 
j
 = 0; j < 
Ãt
.
	`G‘D•th
(); j++)

1035 autØ&
ma¡”Lay”
 = 
Ãt
.
	`G‘Lay”
(
j
);

1036 autØ&
Ïy”
 = 
Ãts
.
	`back
().
	`G‘Lay”
(
j
);

1037 
TCpu
<>::
	`Cİy
(
Ïy”
.
	`G‘Weights
(),

1038 
ma¡”Lay”
.
	`G‘Weights
());

1039 
TCpu
<>::
	`Cİy
(
Ïy”
.
	`G‘BŸ£s
(),

1040 
ma¡”Lay”
.
	`G‘BŸ£s
());

1044 
boŞ
 
cÚv”ged
 = 
çl£
;

1045 
size_t
 
¡•CouÁ
 = 0;

1046 
size_t
 
b©chesInEpoch
 = 
nT¿ššgSam¶es
 / 
Ãt
.
	`G‘B©chSize
();

1048 
¡d
::
chrÚo
::
time_pošt
<¡d::chrÚo::
sy¡em_şock
> 
¡¬t
, 
’d
;

1049 
¡¬t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

1051 ià(!
fIÁ”aùive
) {

1052 
	`Log
(è<< 
¡d
::
	`£tw
(10) << "Epoch" << " | "

1053 << 
¡d
::
	`£tw
(12) << "Train Err."

1054 << 
¡d
::
	`£tw
(12) << "Test Err."

1055 << 
¡d
::
	`£tw
(12) << "GFLOP/s"

1056 << 
¡d
::
	`£tw
(12è<< "CÚv. S‹ps" << 
Endl
;

1057 
¡d
::
¡ršg
 
	`£·¿tÜ
(62, '-');

1058 
	`Log
(è<< 
£·¿tÜ
 << 
Endl
;

1061 !
cÚv”ged
)

1063 
¡•CouÁ
++;

1065 
ŒaššgD©a
.
	`Shufæe
();

1066 
size_t
 
i
 = 0; i < 
b©chesInEpoch
; i +ğ
nTh»ads
) {

1067 
b©ches
.
	`ş—r
();

1068 
size_t
 
j
 = 0; j < 
nTh»ads
; j++) {

1069 
b©ches
.
	`»£rve
(
nTh»ads
);

1070 
b©ches
.
	`push_back
(
ŒaššgD©a
.
	`G‘B©ch
());

1072 ià(
£‰šgs
.
mom’tum
 > 0.0) {

1073 
mšimiz”
.
	`S‹pMom’tum
(
Ãt
, 
Ãts
, 
b©ches
, 
£‰šgs
.
mom’tum
);

1075 
mšimiz”
.
	`S‹p
(
Ãt
, 
Ãts
, 
b©ches
);

1079 ià((
¡•CouÁ
 % 
mšimiz”
.
	`G‘Te¡IÁ”v®
()) == 0) {

1082 
DoubË_t
 
‹¡E¼Ü
 = 0.0;

1083 autØ
b©ch
 : 
‹¡D©a
) {

1084 autØ
šputM©rix
 = 
b©ch
.
	`G‘IÅut
();

1085 autØ
ouutM©rix
 = 
b©ch
.
	`G‘Ouut
();

1086 
‹¡E¼Ü
 +ğ
‹¡N‘
.
	`Loss
(
šputM©rix
, 
ouutM©rix
);

1088 
‹¡E¼Ü
 /ğ(
DoubË_t
è(
nTe¡Sam¶es
 / 
£‰šgs
.
b©chSize
);

1090 
’d
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

1093 
DoubË_t
 
ŒaššgE¼Ü
 = 0.0;

1094 autØ
b©ch
 : 
ŒaššgD©a
) {

1095 autØ
šputM©rix
 = 
b©ch
.
	`G‘IÅut
();

1096 autØ
ouutM©rix
 = 
b©ch
.
	`G‘Ouut
();

1097 
ŒaššgE¼Ü
 +ğ
Ãt
.
	`Loss
(
šputM©rix
, 
ouutM©rix
);

1099 
ŒaššgE¼Ü
 /ğ(
DoubË_t
è(
nT¿ššgSam¶es
 / 
£‰šgs
.
b©chSize
);

1101 ià(
fIÁ”aùive
){

1102 
fIÁ”aùive
->
	`AddPošt
(
¡•CouÁ
, 
ŒaššgE¼Ü
, 
‹¡E¼Ü
);

1103 
fIPyCu¼’tI‹r
 = 100*()
mšimiz”
.
	`G‘CÚv”g’ûCouÁ
(è/()
£‰šgs
.
cÚv”g’ûS‹ps
;

1104 ià(
fEx™FromT¿ššg
) ;

1108 
¡d
::
chrÚo
::
du¿tiÚ
<> 
–­£d_£cÚds
 = 
’d
 - 
¡¬t
;

1109 
£cÚds
 = 
–­£d_£cÚds
.
	`couÁ
();

1110 
nFlİs
 = (è(
£‰šgs
.
‹¡IÁ”v®
 * 
b©chesInEpoch
);

1111 
nFlİs
 *ğ
Ãt
.
	`G‘NFlİs
() * 1e-9;

1113 
cÚv”ged
 = 
mšimiz”
.
	`HasCÚv”ged
(
‹¡E¼Ü
);

1114 
¡¬t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

1116 ià(
fIÁ”aùive
) {

1117 
fIÁ”aùive
->
	`AddPošt
(
¡•CouÁ
, 
ŒaššgE¼Ü
, 
‹¡E¼Ü
);

1118 
fIPyCu¼’tI‹r
 = 100.0 * 
mšimiz”
.
	`G‘CÚv”g’ûCouÁ
()

1119 / 
mšimiz”
.
	`G‘CÚv”g’ûS‹ps
 ();

1120 ià(
fEx™FromT¿ššg
) ;

1122 
	`Log
(è<< 
¡d
::
	`£tw
(10è<< 
¡•CouÁ
 << " | "

1123 << 
¡d
::
	`£tw
(12è<< 
ŒaššgE¼Ü


1124 << 
¡d
::
	`£tw
(12è<< 
‹¡E¼Ü


1125 << 
¡d
::
	`£tw
(12è<< 
nFlİs
 / 
£cÚds


1126 << 
¡d
::
	`£tw
(12è<< 
mšimiz”
.
	`G‘CÚv”g’ûCouÁ
(è<< 
Endl
;

1127 ià(
cÚv”ged
) {

1128 
	`Log
(è<< 
Endl
;

1135 
size_t
 
l
 = 0;† < 
Ãt
.
	`G‘D•th
();†++) {

1136 autØ& 
Ïy”
 = 
fN‘
.
	`G‘Lay”
(
l
);

1137 
Ïy”
.
	`G‘Weights
(èğ(
TM©rixT
<
DoubË_t
>è
Ãt
.
	`G‘Lay”
(
l
).GetWeights();

1138 
Ïy”
.
	`G‘BŸ£s
(èğ(
TM©rixT
<
DoubË_t
>è
Ãt
.
	`G‘Lay”
(
l
).GetBiases();

1143 
	`Log
(è<< 
kFATAL
 << "Multi-core CPU backend‚otƒnabled. Please make sure "

1145 "d‘eùed by CMaka w–Èth©himˆCMakæag i £t." << 
Endl
;

1151 
DoubË_t
 
TMVA
::
M‘hodDNN
::
	`G‘MvaV®ue
( Double_t* , Double_t* )

1153 
size_t
 
nV¬ŸbËs
 = 
	`G‘Ev’t
()->
	`G‘NV¬ŸbËs
();

1154 
M©rix_t
 
	`X
(1, 
nV¬ŸbËs
);

1155 
M©rix_t
 
	`YH©
(1, 1);

1157 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
šputV®ues
 = 
	`G‘Ev’t
()->
	`G‘V®ues
();

1158 
size_t
 
i
 = 0; i < 
nV¬ŸbËs
; i++) {

1159 
	`X
(0,
i
èğ
šputV®ues
[i];

1162 
fN‘
.
	`P»diùiÚ
(
YH©
, 
X
, 
fOuutFunùiÚ
);

1163  
	`YH©
(0,0);

1168 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> & 
TMVA
::
M‘hodDNN
::
	`G‘Reg»ssiÚV®ues
()

1170 
size_t
 
nV¬ŸbËs
 = 
	`G‘Ev’t
()->
	`G‘NV¬ŸbËs
();

1171 
M©rix_t
 
	`X
(1, 
nV¬ŸbËs
);

1173 cÚ¡ 
Ev’t
 *
ev
 = 
	`G‘Ev’t
();

1174 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
šputV®ues
 = 
ev
->
	`G‘V®ues
();

1175 
size_t
 
i
 = 0; i < 
nV¬ŸbËs
; i++) {

1176 
	`X
(0,
i
èğ
šputV®ues
[i];

1179 
size_t
 
nT¬g‘s
 = 
¡d
::
	`max
(1u, 
ev
->
	`G‘NT¬g‘s
());

1180 
M©rix_t
 
	`YH©
(1, 
nT¬g‘s
);

1181 
¡d
::
veùÜ
<
Flßt_t
> 
	`ouut
(
nT¬g‘s
);

1182 autØ
Ãt
 = 
fN‘
.
	`C»©eClÚe
(1);

1183 
Ãt
.
	`P»diùiÚ
(
YH©
, 
X
, 
fOuutFunùiÚ
);

1185 
size_t
 
i
 = 0; i < 
nT¬g‘s
; i++)

1186 
ouut
[
i
] = 
	`YH©
(0, i);

1188 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
) {

1189 
fReg»ssiÚR‘uºV®
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

1191 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

1193 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

1194 
size_t
 
i
 = 0; i < 
nT¬g‘s
; ++i) {

1195 
evT
->
	`S‘T¬g‘
(
i
, 
ouut
[i]);

1198 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
(
evT
);

1199 
size_t
 
i
 = 0; i < 
nT¬g‘s
; ++i) {

1200 
fReg»ssiÚR‘uºV®
->
	`push_back
(
evT2
->
	`G‘T¬g‘
(
i
));

1202 
d–‘e
 
evT
;

1203  *
fReg»ssiÚR‘uºV®
;

1206 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> & 
TMVA
::
M‘hodDNN
::
	`G‘MuÉişassV®ues
()

1208 
size_t
 
nV¬ŸbËs
 = 
	`G‘Ev’t
()->
	`G‘NV¬ŸbËs
();

1209 
M©rix_t
 
	`X
(1, 
nV¬ŸbËs
);

1210 
M©rix_t
 
	`YH©
(1, 
	`D©aInfo
().
	`G‘NCÏs£s
());

1211 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
) {

1212 
fMuÉişassR‘uºV®
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>(
	`D©aInfo
().
	`G‘NCÏs£s
());

1215 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
šputV®ues
 = 
	`G‘Ev’t
()->
	`G‘V®ues
();

1216 
size_t
 
i
 = 0; i < 
nV¬ŸbËs
; i++) {

1217 
	`X
(0,
i
èğ
šputV®ues
[i];

1220 
fN‘
.
	`P»diùiÚ
(
YH©
, 
X
, 
fOuutFunùiÚ
);

1221 
size_t
 
i
 = 0; i < (size_tè
YH©
.
	`G‘NcŞs
(); i++) {

1222 (*
fMuÉişassR‘uºV®
)[
i
] = 
	`YH©
(0, i);

1224  *
fMuÉişassR‘uºV®
;

1229 
TMVA
::
M‘hodDNN
::
	`AddWeightsXMLTo
Ğ* 
·»Á
 ) const

1231 * 
Â
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
·»Á
, 0, "Weights");

1232 
IÁ_t
 
šputWidth
 = 
fN‘
.
	`G‘IÅutWidth
();

1233 
IÁ_t
 
d•th
 = 
fN‘
.
	`G‘D•th
();

1234 
lossFunùiÚ
 = 
¡©ic_ÿ¡
<>(
fN‘
.
	`G‘LossFunùiÚ
());

1235 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Â
, 0, "InputWidth",

1236 
	`gToŞs
().
	`SŒšgFromIÁ
(
šputWidth
));

1237 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Â
, 0, "D•th", gToŞs().
	`SŒšgFromIÁ
(
d•th
));

1238 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Â
, 0, "LossFunùiÚ", 
	`TSŒšg
(
lossFunùiÚ
));

1239 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Â
, 0, "OutputFunction",

1240 
	`TSŒšg
(
¡©ic_ÿ¡
<>(
fOuutFunùiÚ
)));

1242 
IÁ_t
 
i
 = 0; i < 
d•th
; i++) {

1243 cÚ¡‡uto& 
Ïy”
 = 
fN‘
.
	`G‘Lay”
(
i
);

1244 autØ
Ïy”xml
 = 
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
Â
, 0, "Layer");

1245 
aùiv©iÚFunùiÚ
 = 
¡©ic_ÿ¡
<>(
Ïy”
.
	`G‘Aùiv©iÚFunùiÚ
());

1246 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
Ïy”xml
, 0, "ActivationFunction",

1247 
TSŒšg
::
	`Itß
(
aùiv©iÚFunùiÚ
, 10));

1248 
	`Wr™eM©rixXML
(
Ïy”xml
, "Weights", 
Ïy”
.
	`G‘Weights
());

1249 
	`Wr™eM©rixXML
(
Ïy”xml
, "BŸ£s", 
Ïy”
.
	`G‘BŸ£s
());

1255 
TMVA
::
M‘hodDNN
::
	`R—dWeightsFromXML
(* 
roÙXML
)

1257 autØ
ÃtXML
 = 
	`gToŞs
().
	`G‘Chd
(
roÙXML
, "Weights");

1258 ià(!
ÃtXML
){

1259 
ÃtXML
 = 
roÙXML
;

1262 
fN‘
.
	`CË¬
();

1263 
fN‘
.
	`S‘B©chSize
(1);

1265 
size_t
 
šputWidth
, 
d•th
;

1266 
	`gToŞs
().
	`R—dA‰r
(
ÃtXML
, "IÅutWidth", 
šputWidth
);

1267 
	`gToŞs
().
	`R—dA‰r
(
ÃtXML
, "D•th", 
d•th
);

1268 
lossFunùiÚCh¬
;

1269 
	`gToŞs
().
	`R—dA‰r
(
ÃtXML
, "LossFunùiÚ", 
lossFunùiÚCh¬
);

1270 
ouutFunùiÚCh¬
;

1271 
	`gToŞs
().
	`R—dA‰r
(
ÃtXML
, "OuutFunùiÚ", 
ouutFunùiÚCh¬
);

1273 
fN‘
.
	`S‘IÅutWidth
(
šputWidth
);

1274 
fN‘
.
	`S‘LossFunùiÚ
(
¡©ic_ÿ¡
<
ELossFunùiÚ
>(
lossFunùiÚCh¬
));

1275 
fOuutFunùiÚ
 = 
¡©ic_ÿ¡
<
EOuutFunùiÚ
>(
ouutFunùiÚCh¬
);

1277 
size_t
 
´eviousWidth
 = 
šputWidth
;

1278 autØ
Ïy”XML
 = 
	`gToŞs
().
	`xmËngše
().
	`G‘Chd
(
ÃtXML
, "Layer");

1279 
size_t
 
i
 = 0; i < 
d•th
; i++) {

1280 
TSŒšg
 
fSŒšg
;

1281 
EAùiv©iÚFunùiÚ
 
f
;

1284 
	`gToŞs
().
	`R—dA‰r
(
Ïy”XML
, "Aùiv©iÚFunùiÚ", 
fSŒšg
);

1285 
f
 = 
¡©ic_ÿ¡
<
EAùiv©iÚFunùiÚ
>(
fSŒšg
.
	`Atoi
());

1288 
size_t
 
width
;

1289 autØ
m©rixXML
 = 
	`gToŞs
().
	`G‘Chd
(
Ïy”XML
, "Weights");

1290 
	`gToŞs
().
	`R—dA‰r
(
m©rixXML
, "rows", 
width
);

1292 
fN‘
.
	`AddLay”
(
width
, 
f
);

1293 
TM©rixT
<
DoubË_t
> 
	`weights
(
width
, 
´eviousWidth
);

1294 
TM©rixT
<
DoubË_t
> 
	`bŸ£s
(
width
, 1);

1295 
	`R—dM©rixXML
(
Ïy”XML
, "Weights", 
weights
);

1296 
	`R—dM©rixXML
(
Ïy”XML
, "BŸ£s", 
bŸ£s
);

1297 
fN‘
.
	`G‘Lay”
(
i
).
	`G‘Weights
(èğ
weights
;

1298 
fN‘
.
	`G‘Lay”
(
i
).
	`G‘BŸ£s
(èğ
bŸ£s
;

1300 
Ïy”XML
 = 
	`gToŞs
().
	`G‘NextChd
(layerXML);

1301 
´eviousWidth
 = 
width
;

1307 
TMVA
::
M‘hodDNN
::
	`R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & )

1313 cÚ¡ 
TMVA
::
Rªkšg
* TMVA::
M‘hodDNN
::
	`C»©eRªkšg
()

1315 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Importance" );

1316 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1317 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`G‘IÅutLab–
(
iv¬
), 1.0));

1319  
fRªkšg
;

1324 
TMVA
::
M‘hodDNN
::
	`MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& ,

1325 cÚ¡ 
TSŒšg
& ) const

1331 
TMVA
::
M‘hodDNN
::
	`G‘H–pMes§ge
() const

1337 
TSŒšg
 
cŞ
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("bold");

1338 
TSŒšg
 
cŞ»s
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("reset");

1340 
	`Log
(è<< 
Endl
;

1341 
	`Log
(è<< 
cŞ
 << "--- ShÜˆdesütiÚ:" << 
cŞ»s
 << 
Endl
;

1342 
	`Log
(è<< 
Endl
;

1343 
	`Log
(è<< "ThDNN‚eu¿ÈÃtwÜk i ¨ãedfÜw¬d" << 
Endl
;

1344 
	`Log
(è<< "muÉay”…”û±rÚ im¶em’tiÚ. ThDNN ha ¨u£r-" << 
Endl
;

1345 
	`Log
(è<< "defšed hidd’†ay”‡rch™eùu», wh”thnumb” oàšpuˆ(ouut)" << 
Endl
;

1346 
	`Log
(è<< "node i d‘”mšed byhšpuˆv¬ŸbË (ouuˆşas£s, i.e., " << 
Endl
;

1347 
	`Log
(è<< "sigÇÈªd oÃ background,„eg»ssiÚ o¸muÉişass). " << 
Endl
;

1348 
	`Log
(è<< 
Endl
;

1349 
	`Log
(è<< 
cŞ
 << "--- P”fÜmªû o±imi§tiÚ:" << 
cŞ»s
 << 
Endl
;

1350 
	`Log
(è<< 
Endl
;

1352 cÚ¡ * 
txt
 = "The DNN supports various optionso improve…erformance inerms ofraining speed‡nd \n \
 of overfitting: \n \
\n \
- differentraining settings can be stacked. Suchhathe initialraining \n\
 done with‡†arge†earning„ate‡nd‡†arge drop out fraction whilst \n \
‡†ater stage†earning„ate‡nd drop out can be„educed. \n \
- drop out \n \
[recommended: \n \
raining stage: 0.0 forhe first†ayer, 0.5 for†ater†ayers. \n \
raining stage: 0.1 or 0.0 for‡ll†ayers \n \
raining stage: 0.0] \n \
 out is‡echnique where‡‡tƒachraining cycle‡ fraction of‡rbitrary \n \
 is disabled. This„educes co-adaptation of weights‡ndhus„educes overfitting. \n \
- L1‡nd L2„egularization‡re‡vailable \n \
- Minibatches \n \
[recommended 10 - 150] \n \
 mini-batch sizes can be chosen. \n \
- Multithreading \n \
[recommended: True] \n \
 can beurned on. The minibatches‡re distributedohe‡vailable \n \
. The‡lgorithm is†ock-free (\"Hogwild!\"-style) forƒach cycle. \n \
\n \
: \n \
\"Layout\": \n \
-ƒxample: \"TANH|(N+30)*2,TANH|(N+30),LINEAR\" \n \
- meaning: \n \
.wo hidden†ayers (separated by \",\") \n \
.he‡ctivation function is TANH (other options: RELU, SOFTSIGN, LINEAR) \n \
.he‡ctivation function forhe output†ayer is LINEAR \n \
.he first hidden†ayer has (N+30)*2‚odes where N ishe‚umber of input‚eurons \n \
.he second hidden†ayer has N+30‚odes, where N ishe‚umber of input‚eurons \n \
.he‚umber of‚odes inhe output†ayer is determined byhe‚umber of output‚odes \n \
 canherefore‚ot be chosen freely. \n \
\n \
\"ErrorStrategy\": \n \
- SUMOFSQUARES \n \
ƒrror ofhe‚eural‚et is determined by‡ sum-of-squaresƒrror function \n \
„egression,his ishe only…ossible choice. \n \
- CROSSENTROPY \n \
ƒrror ofhe‚eural‚et is determined by‡ crossƒntropy function. The \n \
 values‡re‡utomatically (internally)ransformed into…robabilities \n \
‡ sigmoid function. \n \
 signal/background classificationhis ishe default choice. \n \
 multiclass using crossƒntropy morehan one or‚o output classes \n \
 beƒquallyrue or false (e.g. Event 0: A‡nd B‡rerue, Event 1: \n \
‡nd C isrue, Event 2: C isrue, ...) \n \
- MUTUALEXCLUSIVE \n \
 multiclass settings,ƒxactly one ofhe output classes can berue (e.g.ƒither A or B or C) \n \
\n \
\"WeightInitialization\" \n \
- XAVIER \n \
[recommended] \n \
\"Xavier Glorot & Yoshua Bengio\"-style of initializinghe weights. The weights‡re chosen„andomly \n \
hathe variance ofhe values ofhe‚odes is…reserved forƒach†ayer. \n \
- XAVIERUNIFORM \n \
 same‡s XAVIER, but with uniformly distributed weights instead of gaussian weights \n \
- LAYERSIZE \n \
 values scaled byhe†ayer size \n \
\n \
\"TrainingStrategy\" \n \
-ƒxample: \"LearningRate=1e-1,Momentum=0.3,ConvergenceSteps=50,BatchSize=30,TestRepetitions=7,WeightDecay=0.0,Renormalize=L2,DropConfig=0.0,DropRepetitions=5|LearningRate=1e-4,Momentum=0.3,ConvergenceSteps=50,BatchSize=20,TestRepetitions=7,WeightDecay=0.001,Renormalize=L2,DropFraction=0.0,DropRepetitions=5\" \n \
-ƒxplanation:wo stackedraining settings separated by \"|\" \n \
. firstraining setting: \"LearningRate=1e-1,Momentum=0.3,ConvergenceSteps=50,BatchSize=30,TestRepetitions=7,WeightDecay=0.0,Renormalize=L2,DropConfig=0.0,DropRepetitions=5\" \n \
. secondraining setting : \"LearningRate=1e-4,Momentum=0.3,ConvergenceSteps=50,BatchSize=20,TestRepetitions=7,WeightDecay=0.001,Renormalize=L2,DropFractions=0.0,DropRepetitions=5\" \n \
. LearningRate : \n \
-„ecommended for classification: 0.1 initially, 1e-4†ater \n \
-„ecommended for„egression: 1e-4‡nd†ess \n \
. Momentum : \n \
‡ fraction ofhe momentum forhe‚extraining batch [fraction = 0.0 - 1.0] \n \
. Repetitions : \n \
 \"Repetitions\"„epetitions withhe same minibatch before switchingohe‚ext one \n \
. ConvergenceSteps : \n \
hat convergence is„eached‡fter \"ConvergenceSteps\" cycles where‚o improvement \n \
heƒrror onheest samples has been found. (Mindhat only‡tƒach \"TestRepetitions\" \n \
heest samples‡reƒvaluated‡ndhushe convergence is checked) \n \
. BatchSize \n \
 ofhe mini-batches. \n \
. TestRepetitions \n \
estinghe‚eural‚et onheest samplesƒach \"TestRepetitions\" cycle \n \
. WeightDecay \n \
 \"Renormalize\" is seto L1 or L2, \"WeightDecay\"…rovideshe„enormalization factor \n \
. Renormalize \n \
, L1 (|w|) or L2 (w^2) \n \
. DropConfig \n \
‡ fraction of‡rbitrary‚odes ofƒach ofhe†ayers‡ccordingohe values given \n \
he DropConfig. \n \
[example: DropConfig=0.0+0.5+0.3 \n \
: drop‚o‚odes in†ayer 0 (input†ayer), half ofhe‚odes in†ayer 1‡nd 30% ofhe‚odes \n \
†ayer 2 \n \
:†eave‡llhe‚odesurned on forhe input†ayer (layer 0) \n \
 off half ofhe‚odes in†ater†ayers forhe initialraining;†eave‡ll‚odes \n \
 on (0.0) in†aterraining stages] \n \
. DropRepetitions \n \
 \"DropRepetitions\" cyclehe configuration of which‚odes‡re dropped is changed \n \
[recommended : 1] \n \
. Multithreading \n \
 on multithreading [recommended: True] \n \
\n";

1450 
	`Log
 (è<< 
txt
 << 
Endl
;

1453 
	}
}

	@src/MethodDT.cxx

91 
	~"TMVA/M‘hodDT.h
"

93 
	~"TMVA/Bš¬yS—rchT»e.h
"

94 
	~"TMVA/CCPruÃr.h
"

95 
	~"TMVA/CÏssif›rFaùÜy.h
"

96 
	~"TMVA/CÚfigu¿bË.h
"

97 
	~"TMVA/CrossEÁrİy.h
"

98 
	~"TMVA/D©aS‘.h
"

99 
	~"TMVA/DecisiÚT»e.h
"

100 
	~"TMVA/GšiIndex.h
"

101 
	~"TMVA/IM‘hod.h
"

102 
	~"TMVA/M‘hodBa£.h
"

103 
	~"TMVA/M‘hodBoo¡.h
"

104 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

105 
	~"TMVA/MsgLogg”.h
"

106 
	~"TMVA/Rªkšg.h
"

107 
	~"TMVA/SdivSq¹S¶usB.h
"

108 
	~"TMVA/S•¬©iÚBa£.h
"

109 
	~"TMVA/Tim”.h
"

110 
	~"TMVA/ToŞs.h
"

111 
	~"TMVA/Ty³s.h
"

113 
	~"Rio¡»am.h
"

114 
	~"TRªdom3.h
"

115 
	~"TM©h.h
"

116 
	~"TObjSŒšg.h
"

118 
	~<®gÜ™hm
>

120 
usšg
 
	g¡d
::
veùÜ
;

122 
	$REGISTER_METHOD
(
DT
)

124 
	`CÏssImp
(
TMVA
::
M‘hodDT
);

129 
TMVA
::
M‘hodDT
::
	$M‘hodDT
ĞcÚ¡ 
TSŒšg
& 
jobName
,

130 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

131 
D©aS‘Info
& 
theD©a
,

132 cÚ¡ 
TSŒšg
& 
theO±iÚ
) :

133 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kDT
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

134 , 
	`fT»e
(0)

135 , 
	`fS•Ty³
(0)

136 , 
	`fMšNodeEv’ts
(0)

137 , 
	`fMšNodeSize
(0)

138 , 
	`fNCuts
(0)

139 , 
	`fU£YesNoL—f
(
kFALSE
)

140 , 
	`fNodePur™yLim™
(0)

141 , 
	`fMaxD•th
(0)

142 , 
	`fE¼ÜF¿ùiÚ
(0)

143 , 
	`fPruÃSŒ’gth
(0)

144 , 
	`fPruÃM‘hod
(
DecisiÚT»e
::
kNoPrunšg
)

145 , 
	`fAutom©ic
(
kFALSE
)

146 , 
	`fRªdomi£dT»es
(
kFALSE
)

147 , 
	`fU£Nv¬s
(0)

148 , 
	`fU£PoissÚNv¬s
(0)

149 , 
	$fD–PruÃSŒ’gth
(0)

151 
fPruÃBefÜeBoo¡
 = 
kFALSE
;

152 
	}
}

157 
	gTMVA
::
M‘hodDT
::
	$M‘hodDT
Ğ
D©aS‘Info
& 
dsi
,

158 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

159 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kDT
, 
dsi
, 
theWeightFe
)

160 , 
	`fT»e
(0)

161 , 
	`fS•Ty³
(0)

162 , 
	`fMšNodeEv’ts
(0)

163 , 
	`fMšNodeSize
(0)

164 , 
	`fNCuts
(0)

165 , 
	`fU£YesNoL—f
(
kFALSE
)

166 , 
	`fNodePur™yLim™
(0)

167 , 
	`fMaxD•th
(0)

168 , 
	`fE¼ÜF¿ùiÚ
(0)

169 , 
	`fPruÃSŒ’gth
(0)

170 , 
	`fPruÃM‘hod
(
DecisiÚT»e
::
kNoPrunšg
)

171 , 
	`fAutom©ic
(
kFALSE
)

172 , 
	`fRªdomi£dT»es
(
kFALSE
)

173 , 
	`fU£Nv¬s
(0)

174 , 
	$fD–PruÃSŒ’gth
(0)

176 
fPruÃBefÜeBoo¡
 = 
kFALSE
;

177 
	}
}

182 
BoŞ_t
 
	gTMVA
::
M‘hodDT
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

184 ifĞ
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2 )  
kTRUE
;

185  
kFALSE
;

186 
	}
}

214 
	gTMVA
::
M‘hodDT
::
	$Deş¬eO±iÚs
()

216 
	`Deş¬eO±iÚRef
(
fRªdomi£dT»es
,"UseRandomisedTrees","Choose‡tƒach‚ode splitting‡„andom set of variables‡nd *bagging*");

217 
	`Deş¬eO±iÚRef
(
fU£Nv¬s
,"UseNvars","Number of variables used if„andomised Tree option is chosen");

218 
	`Deş¬eO±iÚRef
(
fU£PoissÚNv¬s
,"UsePoissonNvars", "Interpret \"UseNvars\"‚ot‡s fixed‚umber but‡s mean of‡ Poisson distribution inƒach split with RandomisedTree option");

219 
	`Deş¬eO±iÚRef
(
fU£YesNoL—f
=
kTRUE
, "UseYesNoLeaf",

221 
	`Deş¬eO±iÚRef
(
fNodePur™yLim™
=0.5, "NodePurityLimit", "In boosting/pruning,‚odes with…urity > NodePurityLimit‡re signal; background otherwise.");

222 
	`Deş¬eO±iÚRef
(
fS•Ty³S
="GiniIndex", "SeparationType", "Separation criterion for‚ode splitting");

223 
	`AddP»DefV®
(
	`TSŒšg
("MisClassificationError"));

224 
	`AddP»DefV®
(
	`TSŒšg
("GiniIndex"));

225 
	`AddP»DefV®
(
	`TSŒšg
("CrossEntropy"));

226 
	`AddP»DefV®
(
	`TSŒšg
("SDivSqrtSPlusB"));

227 
	`Deş¬eO±iÚRef
(
fMšNodeEv’ts
=-1, "nEventsMin", "deprecated !!! Minimum‚umber ofƒvents„equired in‡†eaf‚ode");

228 
	`Deş¬eO±iÚRef
(
fMšNodeSizeS
, "MinNodeSize", "Minimum…ercentage ofrainingƒvents„equired in‡†eaf‚ode (default: Classification: 10%, Regression: 1%)");

229 
	`Deş¬eO±iÚRef
(
fNCuts
, "nCuts", "Number of steps during‚ode cut optimisation");

230 
	`Deş¬eO±iÚRef
(
fPruÃSŒ’gth
, "PruneStrength", "Pruning strength (negative value ==‡utomatic‡djustment)");

231 
	`Deş¬eO±iÚRef
(
fPruÃM‘hodS
="NoPruning", "PruneMethod", "Pruning method: NoPruning (switched off), ExpectedError or CostComplexity");

233 
	`AddP»DefV®
(
	`TSŒšg
("NoPruning"));

234 
	`AddP»DefV®
(
	`TSŒšg
("ExpectedError"));

235 
	`AddP»DefV®
(
	`TSŒšg
("CostComplexity"));

237 ià(
	`DoReg»ssiÚ
()) {

238 
	`Deş¬eO±iÚRef
(
fMaxD•th
=50,"MaxDepth","Max depth ofhe decisionree‡llowed");

240 
	`Deş¬eO±iÚRef
(
fMaxD•th
=3,"MaxDepth","Max depth ofhe decisionree‡llowed");

242 
	}
}

247 
	gTMVA
::
M‘hodDT
::
	$Deş¬eCom·tib™yO±iÚs
() {

249 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

251 
	`Deş¬eO±iÚRef
(
fPruÃBefÜeBoo¡
=
kFALSE
, "PruneBeforeBoost",

253 
	}
}

258 
	gTMVA
::
M‘hodDT
::
	$ProûssO±iÚs
()

260 
fS•Ty³S
.
	`ToLow”
();

261 ià(
fS•Ty³S
 =ğ"misşassifiÿtiÚ”rÜ"è
fS•Ty³
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

262 ià(
fS•Ty³S
 =ğ"gšišdex"è
fS•Ty³
 = 
Ãw
 
	`GšiIndex
();

263 ià(
fS•Ty³S
 =ğ"üos£Árİy"è
fS•Ty³
 = 
Ãw
 
	`CrossEÁrİy
();

264 ià(
fS•Ty³S
 =ğ"sdivsq¹¥lusb"è
fS•Ty³
 = 
Ãw
 
	`SdivSq¹S¶usB
();

266 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

267 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀS•¬©iÚ Index o±iÚ c®Ëd" << 
Endl
;

272 
fPruÃM‘hodS
.
	`ToLow”
();

273 ià(
fPruÃM‘hodS
 =ğ"ex³ùed”rÜ" ) 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kEx³ùedE¼ÜPrunšg
;

274 ià(
fPruÃM‘hodS
 =ğ"co¡com¶ex™y" ) 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
;

275 ià(
fPruÃM‘hodS
 =ğ"nİrunšg" ) 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

277 
	`Log
(è<< 
kINFO
 << 
	`G‘O±iÚs
(è<< 
Endl
;

278 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> unknowÀPruÃM‘hod o±iÚ:" << 
fPruÃM‘hodS
 <<" c®Ëd" << 
Endl
;

281 ià(
fPruÃSŒ’gth
 < 0è
fAutom©ic
 = 
kTRUE
;

282 
fAutom©ic
 = 
kFALSE
;

283 ià(
fAutom©ic
 && 
fPruÃM‘hod
==!
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
){

284 
	`Log
(è<< 
kFATAL


285 << "SÜry‡utom©iø´unšg sŒ’gth d‘”mš©iÚ i nÙ im¶em’‹d y‘ fÜ Ex³ùedE¼ÜPrunšg" << 
Endl
;

289 ià(
this
->
	`D©a
()->
	`HasNeg©iveEv’tWeights
()){

290 
	`Log
(è<< 
kINFO
 << " You‡re using‡ Monte Carlohat has‡lso‚egative weights. "

294 <<
fMšNodeSizeS


299 << "which ignÜe ev’t w™h‚eg©ivweighˆšhŒaššg. " << 
Endl


300 << 
Endl
 << "Note: You'll get‡ WARNING message duringheraining ifhat shouldƒver happen" << Endl;

303 ià(
fRªdomi£dT»es
){

304 
	`Log
(è<< 
kINFO
 << " Rªdomi£d»e should u£ *baggšg*‡ *boo¡* m‘hod. Did you s‘hi šh*M‘hodBoo¡* ? . H”I cªƒnfÜû oÆyh*nØ´unšg*" << 
Endl
;

305 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

309 ià(
fMšNodeEv’ts
 > 0){

310 
fMšNodeSize
 = 
fMšNodeEv’ts
 / 
	`D©a
()->
	`G‘NT¿ššgEv’ts
() * 100;

311 
	`Log
(è<< 
kWARNING
 << "You haveƒxplicitly set *nEventsMin*,he min‡bsolute‚umber \n"

315 << "nEv’tsMš="<<
fMšNodeEv’ts
<< "--> MšNodeSize="<<
fMšNodeSize
<<"%"

316 << 
Endl
;

318 
	`S‘MšNodeSize
(
fMšNodeSizeS
);

320 
	}
}

322 
	gTMVA
::
M‘hodDT
::
	$S‘MšNodeSize
(
DoubË_t
 
sizeInP”ûÁ
){

323 ià(
sizeInP”ûÁ
 > 0 && sizeInPercent < 50){

324 
fMšNodeSize
=
sizeInP”ûÁ
;

327 
	`Log
(è<< 
kERROR
 << "you have demanded‡ minimal‚ode size of "

328 << 
sizeInP”ûÁ
 << "% ofherainingƒvents.. \n"

329 << "h© somehow dÛ nÙ mak£n£ "<<
Endl
;

332 
	}
}

333 
	gTMVA
::
M‘hodDT
::
	$S‘MšNodeSize
(
TSŒšg
 
sizeInP”ûÁ
){

334 
sizeInP”ûÁ
.
	`R•ÏûAÎ
("%","");

335 ià(
sizeInP”ûÁ
.
	`IsAÊum
()è
	`S‘MšNodeSize
(sizeInP”ûÁ.
	`Atof
());

337 
	`Log
(è<< 
kERROR
 << "I had…roblems„eadinghe option MinNodeEvents, which\n"

338 << "aá”„emovšg‡…ossibË % sigÀnow„—d " << 
sizeInP”ûÁ
 << 
Endl
;

340 
	}
}

345 
	gTMVA
::
M‘hodDT
::
	$In™
( )

347 
fMšNodeEv’ts
 = -1;

348 
fMšNodeSize
 = 5;

349 
fMšNodeSizeS
 = "5%";

350 
fNCuts
 = 20;

351 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

352 
fPruÃSŒ’gth
 = 5;

353 
fD–PruÃSŒ’gth
=0.1;

354 
fRªdomi£dT»es
ğ
kFALSE
;

355 
fU£Nv¬s
 = 
	`G‘Nv¬
();

356 
fU£PoissÚNv¬s
 = 
kTRUE
;

359 
	`S‘SigÇlReã»nûCut
( 0 );

360 ià(
fAÇlysisTy³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 || fAÇlysisTy³ =ğTy³s::
kMuÉişass
 ) {

361 
fMaxD•th
 = 3;

363 
fMaxD•th
 = 50;

365 
	}
}

370 
	gTMVA
::
M‘hodDT
::~
	$M‘hodDT
( )

372 
d–‘e
 
fT»e
;

373 
	}
}

377 
	gTMVA
::
M‘hodDT
::
	$T¿š
( )

379 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
Œue
;

380 
fT»e
 = 
Ãw
 
	`DecisiÚT»e
Ğ
fS•Ty³
, 
fMšNodeSize
, 
fNCuts
, &(
	`D©aInfo
()), 0,

381 
fRªdomi£dT»es
, 
fU£Nv¬s
, 
fU£PoissÚNv¬s
,
fMaxD•th
,0 );

382 
fT»e
->
	`S‘NV¬s
(
	`G‘Nv¬
());

383 ià(
fRªdomi£dT»es
è
	`Log
()<<
kWARNING
<<"„andomised Trees do‚ot work yet inhis framework,"

385 << " wÈb®Èth§mªdh© i nÙ good " << 
Endl
;

386 
fT»e
->
	`S‘AÇlysisTy³
Ğ
	`G‘AÇlysisTy³
() );

389 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

390 
UIÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

391 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
tmp
;

392 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

393 cÚ¡ 
Ev’t
 *
ev’t
 = 
	`G‘Ev’t
(
›vt
);

394 
tmp
.
	`push_back
(
ev’t
);

396 
fT»e
->
	`BudT»e
(
tmp
);

397 ià(
fPruÃM‘hod
 !ğ
DecisiÚT»e
::
kNoPrunšg
è
fT»e
->
	`PruÃT»e
();

399 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
çl£
;

400 
	`Ex™FromT¿ššg
();

401 
	}
}

408 
DoubË_t
 
	gTMVA
::
M‘hodDT
::
	$PruÃT»e
( )

413 ià(
fAutom©ic
 && 
fPruÃM‘hod
 =ğ
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
) {

414 
CCPruÃr
* 
´uÃToŞ
 = 
Ãw
 
	`CCPruÃr
(
fT»e
, 
this
->
	`D©a
(è, 
fS•Ty³
);

415 
´uÃToŞ
->
	`O±imize
();

416 
¡d
::
veùÜ
<
DecisiÚT»eNode
*> 
nodes
 = 
´uÃToŞ
->
	`G‘O±im®PruÃSequ’û
();

417 
fPruÃSŒ’gth
 = 
´uÃToŞ
->
	`G‘O±im®PruÃSŒ’gth
();

418 
UIÁ_t
 
i
 = 0; i < 
nodes
.
	`size
(); i++)

419 
fT»e
->
	`PruÃNode
(
nodes
[
i
]);

420 
d–‘e
 
´uÃToŞ
;

422 ià(
fAutom©ic
 && 
fPruÃM‘hod
 !ğ
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
){

499 
fT»e
->
	`S‘PruÃSŒ’gth
(
fPruÃSŒ’gth
);

500 
fT»e
->
	`PruÃT»e
();

503  
fPruÃSŒ’gth
;

504 
	}
}

508 
DoubË_t
 
	gTMVA
::
M‘hodDT
::
	$Te¡T»eQu®™y
Ğ
DecisiÚT»e
 *
dt
 )

510 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kV®id©iÚ
);

512 
DoubË_t
 
SumCÜ»ù
=0,
SumWrÚg
=0;

513 
LÚg64_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++)

515 cÚ¡ 
Ev’t
 * 
ev
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

516 ià((
dt
->
	`CheckEv’t
(
ev
è> dt->
	`G‘NodePur™yLim™
(èè=ğ
	`D©aInfo
().
	`IsSigÇl
Óv)è
SumCÜ»ù
+óv->
	`G‘Weight
();

517 
SumWrÚg
+=
ev
->
	`G‘Weight
();

519 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

520  
SumCÜ»ù
 / (SumCÜ»ù + 
SumWrÚg
);

521 
	}
}

525 
	gTMVA
::
M‘hodDT
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

527 
fT»e
->
	`AddXMLTo
(
·»Á
);

529 
	}
}

533 
	gTMVA
::
M‘hodDT
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
)

535 if(
fT»e
)

536 
d–‘e
 
fT»e
;

537 
fT»e
 = 
Ãw
 
	`DecisiÚT»e
();

538 
fT»e
->
	`R—dXML
(
wghŠode
,
	`G‘T¿ššgTMVAV”siÚCode
());

539 
	}
}

543 
	gTMVA
::
M‘hodDT
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

545 
d–‘e
 
fT»e
;

546 
fT»e
 = 
Ãw
 
	`DecisiÚT»e
();

547 
fT»e
->
	`R—d
(
i¡r
);

548 
	}
}

553 
DoubË_t
 
	gTMVA
::
M‘hodDT
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

556 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

558  
fT»e
->
	`CheckEv’t
(
	`G‘Ev’t
(),
fU£YesNoL—f
);

559 
	}
}

563 
	gTMVA
::
M‘hodDT
::
	$G‘H–pMes§ge
() const

565 
	}
}

568 cÚ¡ 
TMVA
::
Rªkšg
* TMVA::
M‘hodDT
::
	$C»©eRªkšg
()

571 
	}
}

	@src/MethodFDA.cxx

43 
	~"TMVA/M‘hodFDA.h
"

45 
	~"TMVA/CÏssif›rFaùÜy.h
"

46 
	~"TMVA/CÚfig.h
"

47 
	~"TMVA/CÚfigu¿bË.h
"

48 
	~"TMVA/D©aS‘Info.h
"

49 
	~"TMVA/F™‹rBa£.h
"

50 
	~"TMVA/G’‘icF™‹r.h
"

51 
	~"TMVA/IÁ”v®.h
"

52 
	~"TMVA/IF™‹rT¬g‘.h
"

53 
	~"TMVA/IM‘hod.h
"

54 
	~"TMVA/MCF™‹r.h
"

55 
	~"TMVA/M‘hodBa£.h
"

56 
	~"TMVA/Mšu™F™‹r.h
"

57 
	~"TMVA/MsgLogg”.h
"

58 
	~"TMVA/Tim”.h
"

59 
	~"TMVA/ToŞs.h
"

60 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

61 
	~"TMVA/Ty³s.h
"

62 
	~"TMVA/SimuÏ‹dAÂ—lšgF™‹r.h
"

64 
	~"Rio¡»am.h
"

65 
	~"TLi¡.h
"

66 
	~"TFÜmuÏ.h
"

67 
	~"TSŒšg.h
"

68 
	~"TObjSŒšg.h
"

69 
	~"TRªdom3.h
"

70 
	~"TM©h.h
"

72 
	~<®gÜ™hm
>

73 
	~<™”©Ü
>

74 
	~<¡dexû±
>

75 
	~<s¡»am
>

77 
usšg
 
	g¡d
::
¡ršg¡»am
;

79 
	$REGISTER_METHOD
(
FDA
)

81 
	`CÏssImp
(
TMVA
::
M‘hodFDA
);

86 
TMVA
::
M‘hodFDA
::
	$M‘hodFDA
ĞcÚ¡ 
TSŒšg
& 
jobName
,

87 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

88 
D©aS‘Info
& 
theD©a
,

89 cÚ¡ 
TSŒšg
& 
theO±iÚ
)

90 : 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kFDA
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

91 
	`IF™‹rT¬g‘
 (),

92 
	`fFÜmuÏ
 ( 0 ),

93 
	`fNP¬s
 ( 0 ),

94 
	`fF™‹r
 ( 0 ),

95 
	`fCÚv”g”F™‹r
( 0 ),

96 
	`fSumOfWeightsSig
( 0 ),

97 
	`fSumOfWeightsBkg
( 0 ),

98 
	`fSumOfWeights
 ( 0 ),

99 
	$fOuutDim’siÚs
( 0 )

101 
	}
}

106 
	gTMVA
::
M‘hodFDA
::
	$M‘hodFDA
Ğ
D©aS‘Info
& 
theD©a
,

107 cÚ¡ 
TSŒšg
& 
theWeightFe
)

108 : 
	`M‘hodBa£
Ğ
Ty³s
::
kFDA
, 
theD©a
, 
theWeightFe
),

109 
	`IF™‹rT¬g‘
 (),

110 
	`fFÜmuÏ
 ( 0 ),

111 
	`fNP¬s
 ( 0 ),

112 
	`fF™‹r
 ( 0 ),

113 
	`fCÚv”g”F™‹r
( 0 ),

114 
	`fSumOfWeightsSig
( 0 ),

115 
	`fSumOfWeightsBkg
( 0 ),

116 
	`fSumOfWeights
 ( 0 ),

117 
	$fOuutDim’siÚs
( 0 )

119 
	}
}

124 
	gTMVA
::
M‘hodFDA
::
	$In™
( )

126 
fNP¬s
 = 0;

128 
fBe¡P¬s
.
	`ş—r
();

130 
fSumOfWeights
 = 0;

131 
fSumOfWeightsSig
 = 0;

132 
fSumOfWeightsBkg
 = 0;

134 
fFÜmuÏSŒšgP
 = "";

135 
fP¬RªgeSŒšgP
 = "";

136 
fFÜmuÏSŒšgT
 = "";

137 
fP¬RªgeSŒšgT
 = "";

139 
fF™M‘hod
 = "";

140 
fCÚv”g”
 = "";

142 ifĞ
	`DoMuÉişass
() )

143 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
èfMuÉişassR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

145 
	}
}

163 
	gTMVA
::
M‘hodFDA
::
	$Deş¬eO±iÚs
()

165 
	`Deş¬eO±iÚRef
Ğ
fFÜmuÏSŒšgP
 = "(0)", "Formula", "The discrimination formula" );

166 
	`Deş¬eO±iÚRef
Ğ
fP¬RªgeSŒšgP
 = "()", "ParRanges", "Parameter„anges" );

169 
	`Deş¬eO±iÚRef
Ğ
fF™M‘hod
 = "MINUIT", "FitMethod", "Optimisation Method");

170 
	`AddP»DefV®
(
	`TSŒšg
("MC"));

171 
	`AddP»DefV®
(
	`TSŒšg
("GA"));

172 
	`AddP»DefV®
(
	`TSŒšg
("SA"));

173 
	`AddP»DefV®
(
	`TSŒšg
("MINUIT"));

175 
	`Deş¬eO±iÚRef
Ğ
fCÚv”g”
 = "None", "Converger", "FitMethod uses Convergero improve„esult");

176 
	`AddP»DefV®
(
	`TSŒšg
("None"));

177 
	`AddP»DefV®
(
	`TSŒšg
("MINUIT"));

178 
	}
}

183 
	gTMVA
::
M‘hodFDA
::
	$C»©eFÜmuÏ
()

186 
fFÜmuÏSŒšgT
 = 
fFÜmuÏSŒšgP
;

191 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; ipar++) {

192 
fFÜmuÏSŒšgT
.
	`R•ÏûAÎ
Ğ
	`FÜm
("(%i)",
¬
), Form("[%i]",ipar) );

196 
IÁ_t
 
¬
=
fNP¬s
; ipar<1000; ipar++) {

197 ià(
fFÜmuÏSŒšgT
.
	`CÚšs
Ğ
	`FÜm
("(%i)",
¬
) ))

198 
	`Log
(è<< 
kFATAL


199 << "<C»©eFÜmuÏ> FÜmuÏ cÚš ex´essiÚ: \"" << 
	`FÜm
("(%i)",
¬
) << "\", "

203 << 
Endl
;

207 
IÁ_t
 
iv¬
=
	`G‘Nv¬
()-1; ivar >= 0; ivar--) {

208 
fFÜmuÏSŒšgT
.
	`R•ÏûAÎ
Ğ
	`FÜm
("x%i",
iv¬
), FÜm("[%i]",iv¬+
fNP¬s
) );

212 
UIÁ_t
 
iv¬
=
	`G‘Nv¬
(); ivar<1000; ivar++) {

213 ià(
fFÜmuÏSŒšgT
.
	`CÚšs
Ğ
	`FÜm
("x%i",
iv¬
) ))

214 
	`Log
(è<< 
kFATAL


215 << "<C»©eFÜmuÏ> FÜmuÏ cÚš ex´essiÚ: \"" << 
	`FÜm
("x%i",
iv¬
) << "\", "

216 << "which cªnÙ b©Œibu‹dØª iÅuˆv¬ŸbË" << 
Endl
;

219 
	`Log
(è<< "U£r-defšed fÜmuÏ sŒšg : \"" << 
fFÜmuÏSŒšgP
 << "\"" << 
Endl
;

220 
	`Log
(è<< "TFÜmuÏ-com·tibË fÜmuÏ sŒšg: \"" << 
fFÜmuÏSŒšgT
 << "\"" << 
Endl
;

221 
	`Log
(è<< 
kDEBUG
 << "C»©šg‡nd compšg fÜmuÏ" << 
Endl
;

224 ià(
fFÜmuÏ
è
d–‘e
 fFormula;

225 
fFÜmuÏ
 = 
Ãw
 
	`TFÜmuÏ
Ğ"FDA_FÜmuÏ", 
fFÜmuÏSŒšgT
 );

228 ià(!
fFÜmuÏ
->
	`IsV®id
())

229 
	`Log
(è<< 
kFATAL
 << "<ProûssO±iÚs> FÜmuÏƒx´essiÚ could‚Ù b´İ”ly comped" << 
Endl
;

232 ià(
fFÜmuÏ
->
	`G‘N·r
(è> (
IÁ_t
)(
fNP¬s
 + 
	`G‘Nv¬
()))

233 
	`Log
(è<< 
kFATAL
 << "<ProcessOptions> Dubious‚umber of…arameters in formulaƒxpression: "

234 << 
fFÜmuÏ
->
	`G‘N·r
(è<< " - com·»dØmaximum‡Îowed: " << 
fNP¬s
 + 
	`G‘Nv¬
(è<< 
Endl
;

235 
	}
}

240 
	gTMVA
::
M‘hodFDA
::
	$ProûssO±iÚs
()

243 
fP¬RªgeSŒšgT
 = 
fP¬RªgeSŒšgP
;

246 
fP¬RªgeSŒšgT
.
	`R•ÏûAÎ
( " ", "" );

247 
fNP¬s
 = 
fP¬RªgeSŒšgT
.
	`CouÁCh¬
( ')' );

249 
TLi¡
* 
·rLi¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
fP¬RªgeSŒšgT
, ";" );

250 ià((
UIÁ_t
)
·rLi¡
->
	`G‘Size
(è!ğ
fNP¬s
) {

251 
	`Log
(è<< 
kFATAL
 << "<ProcessOptions> Mismatch in…arameter string: "

252 << "thnumb” oà·¿m‘”s: " << 
fNP¬s
 << " !=„anges defined: "

253 << 
·rLi¡
->
	`G‘Size
() << ";he format ofhe \"ParRanges\" string "

257 << 
Endl
;

260 
fP¬Rªge
.
	`»size
Ğ
fNP¬s
 );

261 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; i·r++è
fP¬Rªge
[ipar] = 0;

263 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; ipar++) {

265 
TSŒšg
 
¡r
 = ((
TObjSŒšg
*)
·rLi¡
->
	`At
(
¬
))->
	`G‘SŒšg
();

266 
Ssiz_t
 
i¡r
 = 
¡r
.
	`Fœ¡
( ',' );

267 
TSŒšg
 
	`pmšS
(
	`¡r
(1,
i¡r
-1));

268 
TSŒšg
 
	`pmaxS
(
	`¡r
(
i¡r
+1,
¡r
.
	`L’gth
()-2-istr));

270 
¡ršg¡»am
 
¡mš
; 
Flßt_t
 
pmš
=0; stmš << 
pmšS
.
	`D©a
(); stmin >>…min;

271 
¡ršg¡»am
 
¡max
; 
Flßt_t
 
pmax
=0; stmax << 
pmaxS
.
	`D©a
(); stmax >>…max;

274 ià(
TM©h
::
	`Abs
(
pmax
-
pmš
) < 1.e-30)…max =…min;

275 ià(
pmš
 > 
pmax
è
	`Log
(è<< 
kFATAL
 << "<ProcessOptions> max > min in interval for…arameter: ["

276 << 
¬
 << "] : [" << 
pmš
 << ", " << 
pmax
 << "] " << 
Endl
;

278 
	`Log
(è<< 
kINFO
 << "C»©·¿m‘” iÁ”v® fÜ…¬am‘” " << 
¬
 << " : [" << 
pmš
 << "," << 
pmax
 << "]" << 
Endl
;

279 
fP¬Rªge
[
¬
] = 
Ãw
 
	`IÁ”v®
Ğ
pmš
, 
pmax
 );

281 
d–‘e
 
·rLi¡
;

284 
	`C»©eFÜmuÏ
();

288 
fOuutDim’siÚs
 = 1;

289 ifĞ
	`DoReg»ssiÚ
() )

290 
fOuutDim’siÚs
 = 
	`D©aInfo
().
	`G‘NT¬g‘s
();

291 ifĞ
	`DoMuÉişass
() )

292 
fOuutDim’siÚs
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

294  
IÁ_t
 
dim
 = 1; dim < 
fOuutDim’siÚs
; ++dim ){

295  
UIÁ_t
 
·r
 = 0;…¬ < 
fNP¬s
; ++par ){

296 
fP¬Rªge
.
	`push_back
ĞfP¬Rªge.
	`©
(
·r
) );

302 
fCÚv”g”F™‹r
 = (
IF™‹rT¬g‘
*)
this
;

303 ià(
fCÚv”g”
 == "MINUIT") {

304 
fCÚv”g”F™‹r
 = 
Ãw
 
	`Mšu™F™‹r
Ğ*
this
, 
	`FÜm
("%s_CÚv”g”_Mšu™", 
	`G‘Name
()), 
fP¬Rªge
, 
	`G‘O±iÚs
() );

305 
	`S‘O±iÚs
(
dyÇmic_ÿ¡
<
CÚfigu¿bË
*>(
fCÚv”g”F™‹r
)->
	`G‘O±iÚs
());

308 if(
fF™M‘hod
 == "MC")

309 
fF™‹r
 = 
Ãw
 
	`MCF™‹r
Ğ*
fCÚv”g”F™‹r
, 
	`FÜm
("%s_F™‹r_MC", 
	`G‘Name
()), 
fP¬Rªge
, 
	`G‘O±iÚs
() );

310 ià(
fF™M‘hod
 == "GA")

311 
fF™‹r
 = 
Ãw
 
	`G’‘icF™‹r
Ğ*
fCÚv”g”F™‹r
, 
	`FÜm
("%s_F™‹r_GA", 
	`G‘Name
()), 
fP¬Rªge
, 
	`G‘O±iÚs
() );

312 ià(
fF™M‘hod
 == "SA")

313 
fF™‹r
 = 
Ãw
 
	`SimuÏ‹dAÂ—lšgF™‹r
Ğ*
fCÚv”g”F™‹r
, 
	`FÜm
("%s_F™‹r_SA", 
	`G‘Name
()), 
fP¬Rªge
, 
	`G‘O±iÚs
() );

314 ià(
fF™M‘hod
 == "MINUIT")

315 
fF™‹r
 = 
Ãw
 
	`Mšu™F™‹r
Ğ*
fCÚv”g”F™‹r
, 
	`FÜm
("%s_F™‹r_Mšu™", 
	`G‘Name
()), 
fP¬Rªge
, 
	`G‘O±iÚs
() );

317 
	`Log
(è<< 
kFATAL
 << "<T¿š> DØnÙ und”¡ªd f™ m‘hod:" << 
fF™M‘hod
 << 
Endl
;

320 
fF™‹r
->
	`CheckFÜUnu£dO±iÚs
();

321 
	}
}

326 
	gTMVA
::
M‘hodFDA
::~
	$M‘hodFDA
( )

328 
	`CË¬AÎ
();

329 
	}
}

334 
BoŞ_t
 
	gTMVA
::
M‘hodFDA
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

336 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

337 ià(
ty³
 =ğ
Ty³s
::
kMuÉişass
 )  
kTRUE
;

338 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 )  
kTRUE
;

339  
kFALSE
;

340 
	}
}

346 
	gTMVA
::
M‘hodFDA
::
	$CË¬AÎ
( )

351 
UIÁ_t
 
¬
=0; i·r<
fP¬Rªge
.
	`size
(è&& i·r<
fNP¬s
; ipar++) {

352 ià(
fP¬Rªge
[
¬
] !ğ0è{ 
d–‘e
 fParRange[ipar]; fParRange[ipar] = 0; }

354 
fP¬Rªge
.
	`ş—r
();

356 ià(
fFÜmuÏ
 !ğ0è{ 
d–‘e
 fFormula; fFormula = 0; }

357 
fBe¡P¬s
.
	`ş—r
();

358 
	}
}

363 
	gTMVA
::
M‘hodFDA
::
	$T¿š
( )

366 
fSumOfWeights
 = 0;

367 
fSumOfWeightsSig
 = 0;

368 
fSumOfWeightsBkg
 = 0;

370 
UIÁ_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

373 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

376 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

378 ià(!
	`DoReg»ssiÚ
()) {

379 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è{ 
fSumOfWeightsSig
 +ğ
w
; }

380 { 
fSumOfWeightsBkg
 +ğ
w
; }

382 
fSumOfWeights
 +ğ
w
;

386 ià(!
	`DoReg»ssiÚ
()) {

387 ià(
fSumOfWeightsSig
 <ğ0 || 
fSumOfWeightsBkg
 <= 0) {

388 
	`Log
(è<< 
kFATAL
 << "<Train> Troubles in sum of weights: "

389 << 
fSumOfWeightsSig
 << " (Sè: " << 
fSumOfWeightsBkg
 << " (B)" << 
Endl
;

392 ià(
fSumOfWeights
 <= 0) {

393 
	`Log
(è<< 
kFATAL
 << "<Train> Troubles in sum of weights: "

394 << 
fSumOfWeights
 << 
Endl
;

398 
fBe¡P¬s
.
	`ş—r
();

399 
¡d
::
veùÜ
<
IÁ”v®
*>::
cÚ¡_™”©Ü
 
·rIt
 = 
fP¬Rªge
.
	`begš
();…¬Iˆ!ğfP¬Rªge.
	`’d
();…arIt++) {

400 
fBe¡P¬s
.
	`push_back
Ğ(*
·rIt
)->
	`G‘M—n
() );

404 
DoubË_t
 
e¡im©Ü
 = 
fF™‹r
->
	`Run
Ğ
fBe¡P¬s
 );

407 
	`PrštResuÉs
Ğ
fF™M‘hod
, 
fBe¡P¬s
, 
e¡im©Ü
 );

409 
d–‘e
 
fF™‹r
; fFitter = 0;

410 ià(
fCÚv”g”F™‹r
!=0 && fCÚv”g”F™‹r!=(
IF™‹rT¬g‘
*)
this
) {

411 
d–‘e
 
fCÚv”g”F™‹r
;

412 
fCÚv”g”F™‹r
 = 0;

414 
	`Ex™FromT¿ššg
();

415 
	}
}

421 
	gTMVA
::
M‘hodFDA
::
PrštResuÉs
ĞcÚ¡ 
TSŒšg
& 
f™‹r
, 
¡d
::
veùÜ
<
DoubË_t
>& 
·rs
, cÚ¡ DoubË_ˆ
e¡im©Ü
 ) const

423 
Log
(è<< 
	gkINFO
;

424 
Log
(è<< 
	gkHEADER
 << "ResuÉ fÜ…¬am‘” f™ usšg \"" << 
	gf™‹r
 << "\" f™‹r:" << 
	gEndl
;

425 
	g¡d
::
veùÜ
<
TSŒšg
> 
·rNames
;

426 
UIÁ_t
 
	g¬
=0; i·r<
	g·rs
.
size
(); i·r++è
	g·rNames
.
push_back
Ğ
FÜm
("P¬(%i)",
¬
 ) );

427 
gToŞs
().
FÜm©‹dOuut
Ğ
·rs
, 
·rNames
, "P¬am‘”" , "F™„esuÉ", 
Log
(), "%g" );

428 
Log
(è<< "Disüimš©Üƒx´essiÚ: \"" << 
	gfFÜmuÏSŒšgP
 << "\"" << 
	gEndl
;

429 
Log
(è<< "V®uoàe¡im©Ü‡ˆmšimum: " << 
	ge¡im©Ü
 << 
	gEndl
;

435 
DoubË_t
 
	gTMVA
::
M‘hodFDA
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

437 cÚ¡ 
DoubË_t
 
sumOfWeights
[] = { 
fSumOfWeightsBkg
, 
fSumOfWeightsSig
, 
fSumOfWeights
 };

438 
DoubË_t
 
	ge¡im©Ü
[] = { 0, 0, 0 };

440 
DoubË_t
 
	g»suÉ
, 
	gdevŸtiÚ
;

441 
DoubË_t
 
	gdesœed
 = 0.0;

444 ifĞ
DoReg»ssiÚ
() ){

445 
UIÁ_t
 
	g›vt
=0; ievt<
G‘NEv’ts
(); ievt++) {

447 cÚ¡ 
	gTMVA
::
Ev’t
* 
ev
 = 
G‘Ev’t
(
›vt
);

449  
IÁ_t
 
	gdim
 = 0; dim < 
	gfOuutDim’siÚs
; ++dim ){

450 
	gdesœed
 = 
ev
->
G‘T¬g‘
Ğ
dim
 );

451 
	g»suÉ
 = 
IÁ”´‘FÜmuÏ
Ğ
ev
, 
·rs
.
begš
(),…¬s.
’d
() );

452 
	gdevŸtiÚ
 = 
TM©h
::
Pow”
(
»suÉ
 - 
desœed
, 2);

453 
	ge¡im©Ü
[2] +ğ
devŸtiÚ
 * 
ev
->
G‘Weight
();

456 
	ge¡im©Ü
[2] /ğ
sumOfWeights
[2];

458  
	ge¡im©Ü
[2];

460 }ifĞ
DoMuÉişass
() ){

461 
UIÁ_t
 
	g›vt
=0; ievt<
G‘NEv’ts
(); ievt++) {

463 cÚ¡ 
	gTMVA
::
Ev’t
* 
ev
 = 
G‘Ev’t
(
›vt
);

465 
C®cuÏ‹MuÉişassV®ues
Ğ
ev
, 
·rs
, *
fMuÉişassR‘uºV®
 );

467 
DoubË_t
 
	güossEÁrİy
 = 0.0;

468  
IÁ_t
 
	gdim
 = 0; dim < 
	gfOuutDim’siÚs
; ++dim ){

469 
DoubË_t
 
	gy
 = 
fMuÉişassR‘uºV®
->
©
(
dim
);

470 
DoubË_t
 
	gt
 = (
ev
->
G‘CÏss
(è=ğ
¡©ic_ÿ¡
<
UIÁ_t
>(
dim
) ? 1.0 : 0.0 );

471 
	güossEÁrİy
 +ğ
t
*
log
(
y
);

473 
	ge¡im©Ü
[2] +ğ
ev
->
G‘Weight
()*
üossEÁrİy
;

475 
	ge¡im©Ü
[2] /ğ
sumOfWeights
[2];

477  
	ge¡im©Ü
[2];

480 
UIÁ_t
 
	g›vt
=0; ievt<
G‘NEv’ts
(); ievt++) {

482 cÚ¡ 
	gTMVA
::
Ev’t
* 
ev
 = 
G‘Ev’t
(
›vt
);

484 
	gdesœed
 = (
D©aInfo
().
IsSigÇl
(
ev
) ? 1.0 : 0.0);

485 
	g»suÉ
 = 
IÁ”´‘FÜmuÏ
Ğ
ev
, 
·rs
.
begš
(),…¬s.
’d
() );

486 
	gdevŸtiÚ
 = 
TM©h
::
Pow”
(
»suÉ
 - 
desœed
, 2);

487 
	ge¡im©Ü
[
IÁ_t
(
desœed
)] +ğ
devŸtiÚ
 * 
ev
->
G‘Weight
();

489 
	ge¡im©Ü
[0] /ğ
sumOfWeights
[0];

490 
	ge¡im©Ü
[1] /ğ
sumOfWeights
[1];

492  
	ge¡im©Ü
[0] +ƒstimator[1];

499 
DoubË_t
 
	gTMVA
::
M‘hodFDA
::
IÁ”´‘FÜmuÏ
ĞcÚ¡ 
Ev’t
* 
ev’t
, 
¡d
::
veùÜ
<DoubË_t>::
™”©Ü
 
·rBegš
, std::veùÜ<DoubË_t>::™”©Ü 
·rEnd
 )

501 
IÁ_t
 
¬
 = 0;

503  
	g¡d
::
veùÜ
<
DoubË_t
>::
™”©Ü
 
™
 = 
·rBegš
; 
	g™
 !ğ
·rEnd
; ++it ){

505 
	gfFÜmuÏ
->
S‘P¬am‘”
Ğ
¬
, (*
™
) );

506 ++
	g¬
;

508 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); iv¬++è
	gfFÜmuÏ
->
S‘P¬am‘”
Ğ
iv¬
+
¬
, 
ev’t
->
G‘V®ue
(ivar) );

510 
DoubË_t
 
	g»suÉ
 = 
fFÜmuÏ
->
Ev®
( 0 );

512  
	g»suÉ
;

518 
DoubË_t
 
	gTMVA
::
M‘hodFDA
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

520 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

523 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

525  
	`IÁ”´‘FÜmuÏ
Ğ
ev
, 
fBe¡P¬s
.
	`begš
(), fBe¡P¬s.
	`’d
() );

526 
	}
}

530 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodFDA
::
	$G‘Reg»ssiÚV®ues
()

532 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
èfReg»ssiÚR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

533 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

535 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

537 
Ev’t
* 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

539  
IÁ_t
 
dim
 = 0; dim < 
fOuutDim’siÚs
; ++dim ){

540 
IÁ_t
 
off£t
 = 
dim
*
fNP¬s
;

541 
evT
->
	`S‘T¬g‘
(
dim
,
	`IÁ”´‘FÜmuÏ
Ğ
ev
, 
fBe¡P¬s
.
	`begš
()+
off£t
, fBe¡P¬s.begš()+off£t+
fNP¬s
 ) );

543 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

544 
fReg»ssiÚR‘uºV®
->
	`push_back
(
evT2
->
	`G‘T¬g‘
(0));

546 
d–‘e
 
evT
;

548  (*
fReg»ssiÚR‘uºV®
);

549 
	}
}

553 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodFDA
::
	$G‘MuÉişassV®ues
()

555 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
èfMuÉişassR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

556 
fMuÉişassR‘uºV®
->
	`ş—r
();

557 
¡d
::
veùÜ
<
Flßt_t
> 
‹mp
;

560 cÚ¡ 
TMVA
::
Ev’t
* 
evt
 = 
	`G‘Ev’t
();

562 
	`C®cuÏ‹MuÉişassV®ues
Ğ
evt
, 
fBe¡P¬s
, 
‹mp
 );

564 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

565 
UIÁ_t
 
iCÏss
=0; iCÏss<
nCÏs£s
; iClass++){

566 
DoubË_t
 
nÜm
 = 0.0;

567 
UIÁ_t
 
j
=0;j<
nCÏs£s
;j++){

568 if(
iCÏss
!=
j
)

569 
nÜm
+=
	`exp
(
‹mp
[
j
]-‹mp[
iCÏss
]);

571 (*
fMuÉişassR‘uºV®
).
	`push_back
(1.0/(1.0+
nÜm
));

574  (*
fMuÉişassR‘uºV®
);

575 
	}
}

581 
	gTMVA
::
M‘hodFDA
::
C®cuÏ‹MuÉişassV®ues
ĞcÚ¡ 
TMVA
::
Ev’t
*& 
evt
, 
¡d
::
veùÜ
<
DoubË_t
>& 
·¿m‘”s
, std::veùÜ<
Flßt_t
>& 
v®ues
)

583 
v®ues
.
ş—r
();

591 
DoubË_t
 
	gsum
=0;

592  
IÁ_t
 
	gdim
 = 0; dim < 
	gfOuutDim’siÚs
; ++dim ){

593 
IÁ_t
 
	goff£t
 = 
dim
*
fNP¬s
;

594 
DoubË_t
 
	gv®ue
 = 
IÁ”´‘FÜmuÏ
Ğ
evt
, 
·¿m‘”s
.
begš
()+
off£t
,…¬am‘”s.begš()+off£t+
fNP¬s
 );

596 
	gv®ues
.
push_back
Ğ
v®ue
 );

597 
	gsum
 +ğ
v®ue
;

607 
	gTMVA
::
M‘hodFDA
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

611 
i¡r
 >> 
fNP¬s
;

613 
fBe¡P¬s
.
	`ş—r
();

614 
fBe¡P¬s
.
	`»size
Ğ
fNP¬s
 );

615 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; i·r++è
i¡r
 >> 
fBe¡P¬s
[ipar];

616 
	}
}

622 
	gTMVA
::
M‘hodFDA
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

624 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

625 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NP¬s", 
fNP¬s
 );

626 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NDim", 
fOuutDim’siÚs
 );

627 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
*
fOuutDim’siÚs
; ipar++) {

628 * 
cÛffxml
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Parameter" );

629 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "Index", 
¬
 );

630 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "V®ue", 
fBe¡P¬s
[
¬
] );

634 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "FÜmuÏ", 
fFÜmuÏSŒšgP
 );

635 
	}
}

640 
	gTMVA
::
M‘hodFDA
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

642 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NP¬s", 
fNP¬s
 );

644 if(
	`gToŞs
().
	`HasA‰r
Ğ
wghŠode
, "NDim")) {

645 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NDim" , 
fOuutDim’siÚs
 );

648 
fOuutDim’siÚs
 = 1;

651 
fBe¡P¬s
.
	`ş—r
();

652 
fBe¡P¬s
.
	`»size
Ğ
fNP¬s
*
fOuutDim’siÚs
 );

654 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

655 
DoubË_t
 
·r
;

656 
UIÁ_t
 
¬
;

657 
ch
) {

658 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Index", 
¬
 );

659 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "V®ue", 
·r
 );

662 ià(
¬
 >ğ
fNP¬s
*
fOuutDim’siÚs
è
	`Log
(è<< 
kFATAL
 << "<ReadWeightsFromXML> index out of„ange: "

663 << 
¬
 << " >ğ" << 
fNP¬s
 << 
Endl
;

664 
fBe¡P¬s
[
¬
] = 
·r
;

666 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

670 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "FÜmuÏ", 
fFÜmuÏSŒšgP
 );

673 
	`C»©eFÜmuÏ
();

674 
	}
}

679 
	gTMVA
::
M‘hodFDA
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

681 
fout
 << " doubË fP¬am‘”[" << 
fNP¬s
 << "];" << 
¡d
::
’dl
;

682 
fout
 << "};" << 
¡d
::
’dl
;

683 
fout
 << "" << 
¡d
::
’dl
;

684 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

685 
fout
 << "{" << 
¡d
::
’dl
;

686 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; ipar++) {

687 
fout
 << " fP¬am‘”[" << 
¬
 << "] = " << 
fBe¡P¬s
[¬] << ";" << 
¡d
::
’dl
;

689 
fout
 << "}" << 
¡d
::
’dl
;

690 
fout
 << 
¡d
::
’dl
;

691 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

692 
fout
 << "{" << 
¡d
::
’dl
;

693 
fout
 << " // iÁ”´‘hfÜmuÏ" << 
¡d
::
’dl
;

696 
TSŒšg
 
¡r
 = 
fFÜmuÏSŒšgT
;

697 
UIÁ_t
 
¬
=0; i·r<
fNP¬s
; ipar++) {

698 
¡r
.
	`R•ÏûAÎ
Ğ
	`FÜm
("[%i]", 
¬
), Form("fParameter[%i]", ipar) );

702 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

703 
¡r
.
	`R•ÏûAÎ
Ğ
	`FÜm
("[%i]", 
iv¬
+
fNP¬s
), Form("inputValues[%i]", ivar) );

706 
fout
 << " doubË„‘v® = " << 
¡r
 << ";" << 
¡d
::
’dl
;

707 
fout
 << 
¡d
::
’dl
;

708 
fout
 << "„‘uº„‘v®; " << 
¡d
::
’dl
;

709 
fout
 << "}" << 
¡d
::
’dl
;

710 
fout
 << 
¡d
::
’dl
;

711 
fout
 << "// CËª up" << 
¡d
::
’dl
;

712 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

713 
fout
 << "{" << 
¡d
::
’dl
;

714 
fout
 << " //‚ÙhšgØş—r" << 
¡d
::
’dl
;

715 
fout
 << "}" << 
¡d
::
’dl
;

716 
	}
}

724 
	gTMVA
::
M‘hodFDA
::
	$G‘H–pMes§ge
() const

726 
	`Log
(è<< 
Endl
;

727 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

728 
	`Log
(è<< 
Endl
;

729 
	`Log
(è<< "ThfunùiÚ disüimšªˆª®ysi (FDAèi ¨şassif›¸su™abË " << 
Endl
;

730 
	`Log
(è<< "tØsŞvlš—¸Ü sim¶nÚlš—¸disüimš©iÚ…robËms." << 
Endl
;

731 
	`Log
(è<< 
Endl
;

732 
	`Log
(è<< "Thu£¸´ovide thdesœed funùiÚ w™h‡dju¡abË…¬am‘”s" << 
Endl
;

733 
	`Log
(è<< "vŸhcÚfigu¿tiÚ o±iÚ sŒšg,‡nd FDA f™ th·¿m‘” to" << 
Endl
;

734 
	`Log
(è<< "™,„equœšghsigÇÈ(backgroundèfunùiÚ v®utØba şo£" << 
Endl
;

735 
	`Log
(è<< "a possibËØ1 (0). It advªgov”hmÜšvŞved‡nd" << 
Endl
;

736 
	`Log
(è<< "autom©iønÚlš—¸disüimš©Ü i thsim¶ic™y‡nd¿n¥¬’cy " << 
Endl
;

737 
	`Log
(è<< "oàthdisüimš©iÚƒx´essiÚ. A shÜtcomšg i th© FDA wl" << 
Endl
;

738 
	`Log
(è<< "und”³rfÜm fÜ invŞved…robËm w™h com¶iÿ‹d,…ha£ s·û" << 
Endl
;

739 
	`Log
(è<< "d•’d’ˆnÚlš—¸cÜ»ÏtiÚs." << 
Endl
;

740 
	`Log
(è<< 
Endl
;

741 
	`Log
(è<< "PËa£ cÚsuÉhU£r GuidfÜhfÜm© oàthfÜmuÏ sŒšg" << 
Endl
;

742 
	`Log
(è<< "ªdh®lowed…¬am‘”„ªges:" << 
Endl
;

743 ià(
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
()) {

744 
	`Log
() << "<a href=\"http://tmva.sourceforge.net/docu/TMVAUsersGuide.pdf\">"

745 << "h‰p://tmva.sourûfÜge.Ãt/docu/TMVAU£rsGuide.pdf</a>" << 
Endl
;

747 
	`Log
(è<< "h‰p://tmva.sourûfÜge.Ãt/docu/TMVAU£rsGuide.pdf" << 
Endl
;

748 
	`Log
(è<< 
Endl
;

749 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

750 
	`Log
(è<< 
Endl
;

751 
	`Log
(è<< "ThFDA…”fÜmªû d•’d Úhcom¶ex™y‡nd fid–™y oàthe" << 
Endl
;

752 
	`Log
(è<< "u£r-defšed disüimš©Ü funùiÚ. A ¨g’”®„uË, iˆshould" << 
Endl
;

753 
	`Log
(è<< "babËØ»´oduûhdisüimš©iÚ…ow” oàªy†š—r" << 
Endl
;

754 
	`Log
(è<< "disüimšªˆª®ysis. TØ»ach iÁØthnÚlš—¸domaš, iˆis" << 
Endl
;

755 
	`Log
(è<< "u£fuÈtØš¥eùhcÜ»ÏtiÚ…rofe oàthšpuˆv¬ŸbËs," << 
Endl
;

756 
	`Log
(è<< "ªd‡dd quad¿tiøªd high”…ŞynomŸÈ‹rm b‘w“Àv¬ŸbË as" << 
Endl
;

757 
	`Log
(è<< "Ãûs§ry. Com·risÚ w™h mÜšvŞved‚Úlš—¸şassif›r ÿn" << 
Endl
;

758 
	`Log
(è<< "bu£d‡ ¨guide." << 
Endl
;

759 
	`Log
(è<< 
Endl
;

760 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

761 
	`Log
(è<< 
Endl
;

762 
	`Log
(è<< "D•’dšg oÀthfunùiÚ u£d,hchoiû oà\"F™M‘hod\" is" << 
Endl
;

763 
	`Log
(è<< "üucŸÈfÜ g‘tšg v®uabË sŞutiÚ w™h FDA. A ¨guid–š™" << 
Endl
;

764 
	`Log
(è<< "i »comm’dedØ¡¬ˆw™h \"F™M‘hod=MINUIT\". Wh’ mÜcom¶ex" << 
Endl
;

765 
	`Log
(è<< "funùiÚ ¬u£d wh”MINUIT dÛ nÙ cÚv”gtØ»asÚabË" << 
Endl
;

766 
	`Log
(è<< "»suÉs,hu£¸should sw™chØnÚ-g¿d›Á F™M‘hod such" << 
Endl
;

767 
	`Log
(è<< "a G’‘icAlgÜ™hm (GAèÜ MÚ‹ C¬lØ(MC). Iˆmighˆ´ovtØbe" << 
Endl
;

768 
	`Log
(è<< "u£fuÈtØcombšGA (Ü MCèw™h MINUIT by s‘tšghİtiÚ" << 
Endl
;

769 
	`Log
(è<< "\"CÚv”g”=MINUIT\". GA (MCèwÈth’ s‘h¡¬tšg…¬am‘”s" << 
Endl
;

770 
	`Log
(è<< "fÜ MINUIT suchh©hbasiøqu®™y oàGA (MCèoàfšdšg glob®" << 
Endl
;

771 
	`Log
(è<< "mšim¨i combšed w™hheffiÿcy oàMINUIT oàfšdšg†oÿl" << 
Endl
;

772 
	`Log
(è<< "mšima." << 
Endl
;

773 
	}
}

	@src/MethodFisher.cxx

104 
	~"TMVA/M‘hodFish”.h
"

106 
	~"TMVA/CÏssif›rFaùÜy.h
"

107 
	~"TMVA/CÚfigu¿bË.h
"

108 
	~"TMVA/D©aS‘.h
"

109 
	~"TMVA/D©aS‘Info.h
"

110 
	~"TMVA/Ev’t.h
"

111 
	~"TMVA/IM‘hod.h
"

112 
	~"TMVA/M‘hodBa£.h
"

113 
	~"TMVA/MsgLogg”.h
"

114 
	~"TMVA/Rªkšg.h
"

115 
	~"TMVA/ToŞs.h
"

116 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

117 
	~"TMVA/Ty³s.h
"

118 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

120 
	~"TM©h.h
"

121 
	~"TM©rix.h
"

122 
	~"TLi¡.h
"

123 
	~"Rio¡»am.h
"

125 
	~<iomª
>

126 
	~<ÿs£¹
>

128 
	$REGISTER_METHOD
(
Fish”
)

130 
	`CÏssImp
(
TMVA
::
M‘hodFish”
);

135 
TMVA
::
M‘hodFish”
::
	$M‘hodFish”
ĞcÚ¡ 
TSŒšg
& 
jobName
,

136 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

137 
D©aS‘Info
& 
dsi
,

138 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

139 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kFish”
, 
m‘hodT™Ë
, 
dsi
, 
theO±iÚ
),

140 
	`fM—nM©x
 ( 0 ),

141 
	`fTheM‘hod
 ( "Fisher" ),

142 
	`fFish”M‘hod
 ( 
kFish”
 ),

143 
	`fB‘w
 ( 0 ),

144 
	`fW™h
 ( 0 ),

145 
	`fCov
 ( 0 ),

146 
	`fSumOfWeightsS
( 0 ),

147 
	`fSumOfWeightsB
( 0 ),

148 
	`fDisüimPow
 ( 0 ),

149 
	`fFish”CÛff
 ( 0 ),

150 
	$fF0
 ( 0 )

152 
	}
}

157 
	gTMVA
::
M‘hodFish”
::
	$M‘hodFish”
Ğ
D©aS‘Info
& 
dsi
,

158 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

159 
	`M‘hodBa£
Ğ
Ty³s
::
kFish”
, 
dsi
, 
theWeightFe
),

160 
	`fM—nM©x
 ( 0 ),

161 
	`fTheM‘hod
 ( "Fisher" ),

162 
	`fFish”M‘hod
 ( 
kFish”
 ),

163 
	`fB‘w
 ( 0 ),

164 
	`fW™h
 ( 0 ),

165 
	`fCov
 ( 0 ),

166 
	`fSumOfWeightsS
( 0 ),

167 
	`fSumOfWeightsB
( 0 ),

168 
	`fDisüimPow
 ( 0 ),

169 
	`fFish”CÛff
 ( 0 ),

170 
	$fF0
 ( 0 )

172 
	}
}

177 
	gTMVA
::
M‘hodFish”
::
	$In™
( )

180 
fFish”CÛff
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

183 
	`S‘SigÇlReã»nûCut
( 0.0 );

186 
	`In™M©riûs
();

187 
	}
}

194 
	gTMVA
::
M‘hodFish”
::
	$Deş¬eO±iÚs
()

196 
	`Deş¬eO±iÚRef
Ğ
fTheM‘hod
 = "Fisher", "Method", "Discrimination method" );

197 
	`AddP»DefV®
(
	`TSŒšg
("Fisher"));

198 
	`AddP»DefV®
(
	`TSŒšg
("Mahalanobis"));

199 
	}
}

204 
	gTMVA
::
M‘hodFish”
::
	$ProûssO±iÚs
()

206 ià(
fTheM‘hod
 =ğ"Fish”" ) 
fFish”M‘hod
 = 
kFish”
;

207 
fFish”M‘hod
 = 
kMah®ªobis
;

210 
	`In™M©riûs
();

211 
	}
}

216 
	gTMVA
::
M‘hodFish”
::~
	$M‘hodFish”
( )

218 ià(
fB‘w
 ) { 
d–‘e
 fBetw; fBetw = 0; }

219 ià(
fW™h
 ) { 
d–‘e
 fWith; fWith = 0; }

220 ià(
fCov
 ) { 
d–‘e
 fCov; fCov = 0; }

221 ià(
fDisüimPow
 ) { 
d–‘e
 fDiscrimPow; fDiscrimPow = 0; }

222 ià(
fFish”CÛff
è{ 
d–‘e
 fFisherCoeff; fFisherCoeff = 0; }

223 
	}
}

228 
BoŞ_t
 
	gTMVA
::
M‘hodFish”
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

230 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

231  
kFALSE
;

232 
	}
}

237 
	gTMVA
::
M‘hodFish”
::
	$T¿š
( )

240 
	`G‘M—n
();

243 
	`G‘Cov_W™hšCÏss
();

246 
	`G‘Cov_B‘w“nCÏss
();

249 
	`G‘Cov_FuÎ
();

254 
	`G‘Fish”CÛff
();

257 
	`G‘DisüimPow”
();

260 
	`PrštCÛffic›Ás
();

262 
	`Ex™FromT¿ššg
();

263 
	}
}

268 
DoubË_t
 
	gTMVA
::
M‘hodFish”
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

270 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
();

271 
DoubË_t
 
»suÉ
 = 
fF0
;

272 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

273 
»suÉ
 +ğ(*
fFish”CÛff
)[
iv¬
]*
ev
->
	`G‘V®ue
(ivar);

276 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

278  
»suÉ
;

280 
	}
}

285 
	gTMVA
::
M‘hodFish”
::
	$In™M©riûs
( )

288 
fM—nM©x
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), 3 );

291 
fB‘w
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), GetNvar() );

292 
fW™h
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), GetNvar() );

293 
fCov
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), GetNvar() );

296 
fDisüimPow
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
() );

297 
	}
}

302 
	gTMVA
::
M‘hodFish”
::
	$G‘M—n
( )

305 
fSumOfWeightsS
 = 0;

306 
fSumOfWeightsB
 = 0;

308 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

311 
DoubË_t
* 
sumS
 = 
Ãw
 DoubË_t[
nv¬
];

312 
DoubË_t
* 
sumB
 = 
Ãw
 DoubË_t[
nv¬
];

313 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; iv¬++è{ 
sumS
[iv¬] = 
sumB
[ivar] = 0; }

316 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

319 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
›vt
);

322 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

323 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
fSumOfWeightsS
 +ğ
weight
;

324 
fSumOfWeightsB
 +ğ
weight
;

326 
DoubË_t
* 
sum
 = 
	`D©aInfo
().
	`IsSigÇl
(
ev
è? 
sumS
 : 
sumB
;

328 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; iv¬++è
sum
[iv¬] +ğ
ev
->
	`G‘V®ue
Ğiv¬ )*
weight
;

331 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

332 (*
fM—nM©x
)Ğ
iv¬
, 2 ) = 
sumS
[ivar];

333 (*
fM—nM©x
)Ğ
iv¬
, 0 ) = 
sumS
[iv¬]/
fSumOfWeightsS
;

335 (*
fM—nM©x
)Ğ
iv¬
, 2 ) +ğ
sumB
[ivar];

336 (*
fM—nM©x
)Ğ
iv¬
, 1 ) = 
sumB
[iv¬]/
fSumOfWeightsB
;

339 (*
fM—nM©x
)Ğ
iv¬
, 2 ) /ğ(
fSumOfWeightsS
 + 
fSumOfWeightsB
);

343 
d–‘e
 [] 
sumS
;

344 
d–‘e
 [] 
sumB
;

345 
	}
}

351 
	gTMVA
::
M‘hodFish”
::
	$G‘Cov_W™hšCÏss
( )

354 
	`as£¹
Ğ
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0 );

359 cÚ¡ 
IÁ_t
 
nv¬
 = 
	`G‘Nv¬
();

360 cÚ¡ 
IÁ_t
 
nv¬2
 = 
nv¬
*nvar;

361 
DoubË_t
 *
sumSig
 = 
Ãw
 DoubË_t[
nv¬2
];

362 
DoubË_t
 *
sumBgd
 = 
Ãw
 DoubË_t[
nv¬2
];

363 
DoubË_t
 *
xv®
 = 
Ãw
 DoubË_t[
nv¬
];

364 
	`mem£t
(
sumSig
,0,
nv¬2
*(
DoubË_t
));

365 
	`mem£t
(
sumBgd
,0,
nv¬2
*(
DoubË_t
));

368 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

371 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

373 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

375 
IÁ_t
 
x
=0; x<
nv¬
; x++è
xv®
[x] = 
ev
->
	`G‘V®ue
( x );

376 
IÁ_t
 
k
=0;

377 
IÁ_t
 
x
=0; x<
nv¬
; x++) {

378 
IÁ_t
 
y
=0; y<
nv¬
; y++) {

379 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)) {

380 
DoubË_t
 
v
 = ( (
xv®
[
x
] - (*
fM—nM©x
)(x, 0))*(xv®[
y
] - (*fM—nM©x)(y, 0)è)*
weight
;

381 
sumSig
[
k
] +ğ
v
;

383 
DoubË_t
 
v
 = ( (
xv®
[
x
] - (*
fM—nM©x
)(x, 1))*(xv®[
y
] - (*fM—nM©x)(y, 1)è)*
weight
;

384 
sumBgd
[
k
] +ğ
v
;

386 
k
++;

390 
IÁ_t
 
k
=0;

391 
IÁ_t
 
x
=0; x<
nv¬
; x++) {

392 
IÁ_t
 
y
=0; y<
nv¬
; y++) {

402 (*
fW™h
)(
x
, 
y
èğ
sumSig
[
k
]/
fSumOfWeightsS
 + 
sumBgd
[k]/
fSumOfWeightsB
;

403 
k
++;

407 
d–‘e
 [] 
sumSig
;

408 
d–‘e
 [] 
sumBgd
;

409 
d–‘e
 [] 
xv®
;

410 
	}
}

417 
	gTMVA
::
M‘hodFish”
::
	$G‘Cov_B‘w“nCÏss
( )

420 
	`as£¹
Ğ
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0);

422 
DoubË_t
 
´odSig
, 
´odBgd
;

424 
UIÁ_t
 
x
=0; x<
	`G‘Nv¬
(); x++) {

425 
UIÁ_t
 
y
=0; y<
	`G‘Nv¬
(); y++) {

427 
´odSig
 = ( ((*
fM—nM©x
)(
x
, 0) - (*fMeanMatx)(x, 2))*

428 ((*
fM—nM©x
)(
y
, 0) - (*fMeanMatx)(y, 2)) );

429 
´odBgd
 = ( ((*
fM—nM©x
)(
x
, 1) - (*fMeanMatx)(x, 2))*

430 ((*
fM—nM©x
)(
y
, 1) - (*fMeanMatx)(y, 2)) );

432 (*
fB‘w
)(
x
, 
y
èğ(
fSumOfWeightsS
*
´odSig
 + 
fSumOfWeightsB
*
´odBgd
) / (fSumOfWeightsS + fSumOfWeightsB);

435 
	}
}

440 
	gTMVA
::
M‘hodFish”
::
	$G‘Cov_FuÎ
( )

442 
UIÁ_t
 
x
=0; x<
	`G‘Nv¬
(); x++)

443 
UIÁ_t
 
y
=0; y<
	`G‘Nv¬
(); y++)

444 (*
fCov
)(
x
, 
y
èğ(*
fW™h
)(x, yè+ (*
fB‘w
)(x, y);

445 
	}
}

457 
	gTMVA
::
M‘hodFish”
::
	$G‘Fish”CÛff
( )

460 
	`as£¹
Ğ
fSumOfWeightsS
 > 0 && 
fSumOfWeightsB
 > 0);

463 
TM©rixD
* 
theM©
 = 0;

464 
	`G‘Fish”M‘hod
()) {

465 
kFish”
:

466 
theM©
 = 
fW™h
;

468 
kMah®ªobis
:

469 
theM©
 = 
fCov
;

472 
	`Log
(è<< 
kFATAL
 << "<G‘Fish”CÛff> undefšed m‘hod" << 
	`G‘Fish”M‘hod
(è<< 
Endl
;

475 
TM©rixD
 
	`švCov
Ğ*
theM©
 );

477 iàĞ
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
()) < 10E-24 ) {

478 
	`Log
(è<< 
kWARNING
 << "<GetFisherCoeff> matrix is‡lmost singular with determinant="

479 << 
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
())

481 << 
Endl
;

483 iàĞ
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
()) < 10E-120 ) {

484 
theM©
->
	`Pršt
();

485 
	`Log
(è<< 
kFATAL
 << "<GetFisherCoeff> matrix is singular with determinant="

486 << 
TM©h
::
	`Abs
(
švCov
.
	`D‘”mšªt
())

489 << 
Endl
;

492 
švCov
.
	`Inv”t
();

495 
DoubË_t
 
xçù
 = 
TM©h
::
	`Sq¹
Ğ
fSumOfWeightsS
*
fSumOfWeightsB
 ) / (fSumOfWeightsS + fSumOfWeightsB);

498 
¡d
::
veùÜ
<
DoubË_t
> 
	`diffM—ns
Ğ
	`G‘Nv¬
() );

499 
UIÁ_t
 
iv¬
, 
jv¬
;

500 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

501 (*
fFish”CÛff
)[
iv¬
] = 0;

503 
jv¬
=0; jv¬<
	`G‘Nv¬
(); jvar++) {

504 
DoubË_t
 
d
 = (*
fM—nM©x
)(
jv¬
, 0) - (*fMeanMatx)(jvar, 1);

505 (*
fFish”CÛff
)[
iv¬
] +ğ
	`švCov
(iv¬, 
jv¬
)*
d
;

508 (*
fFish”CÛff
)[
iv¬
] *ğ
xçù
;

513 
fF0
 = 0.0;

514 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

515 
fF0
 +ğ(*
fFish”CÛff
)[
iv¬
]*((*
fM—nM©x
)(ivar, 0) + (*fMeanMatx)(ivar, 1));

517 
fF0
 /= -2.0;

518 
	}
}

528 
	gTMVA
::
M‘hodFish”
::
	$G‘DisüimPow”
( )

530 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

531 ià((*
fCov
)(
iv¬
, ivar) != 0)

532 (*
fDisüimPow
)[
iv¬
] = (*
fB‘w
)(iv¬, iv¬)/(*
fCov
)(ivar, ivar);

534 (*
fDisüimPow
)[
iv¬
] = 0;

536 
	}
}

541 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodFish”
::
	$C»©eRªkšg
()

544 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Discr.…ower" );

546 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

547 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`G‘IÅutLab–
(
iv¬
), (*
fDisüimPow
)[ivar] ) );

550  
fRªkšg
;

551 
	}
}

557 
	gTMVA
::
M‘hodFish”
::
	$PrštCÛffic›Ás
( )

559 
	`Log
(è<< 
kHEADER
 << "ResuÉ fÜ Fish” cÛffic›Ás:" << 
Endl
;

561 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() != 0) {

562 
	`Log
(è<< 
kINFO
 << "NOTE: ThcÛffic›Á mu¡ b­¶›dØTRANFORMED v¬ŸbËs" << 
Endl
;

563 
	`Log
(è<< 
kINFO
 << " Li¡ oàthŒªsfÜm©iÚ: " << 
Endl
;

564 
TLi¡I‹r
 
	`ŒIt
(&
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
());

565 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
()) {

566 
	`Log
(è<< 
kINFO
 << " -- " << 
Œf
->
	`G‘Name
(è<< 
Endl
;

569 
¡d
::
veùÜ
<
TSŒšg
> 
v¬s
;

570 
¡d
::
veùÜ
<
DoubË_t
> 
cÛffs
;

571 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

572 
v¬s
 .
	`push_back
Ğ
	`G‘IÅutLab–
(
iv¬
) );

573 
cÛffs
.
	`push_back
Ğ(*
fFish”CÛff
)[
iv¬
] );

575 
v¬s
 .
	`push_back
( "(offset)" );

576 
cÛffs
.
	`push_back
Ğ
fF0
 );

577 
TMVA
::
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
cÛffs
, 
v¬s
, "V¬ŸbË" , "CÛffic›Á", 
	`Log
() );

582 ià(
	`IsNÜm®i£d
()) {

583 
	`Log
(è<< 
kINFO
 << "NOTE: You havcho£ÀtØu£h\"NÜm®i£\" bookšg o±iÚ. H’û,he" << 
Endl
;

584 
	`Log
(è<< 
kINFO
 << " cÛffic›Á mu¡ b­¶›dØNORMALISED ('èv¬ŸbË a fŞlows:" << 
Endl
;

585 
IÁ_t
 
maxL
 = 0;

586 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++èià(
	`G‘IÅutLab–
(iv¬).
	`L’gth
(è> 
maxL
) maxL = GetInputLabel(ivar).Length();

589 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

590 
	`Log
(è<< 
kINFO


591 << 
¡d
::
	`£tw
(
maxL
+9è<< 
	`TSŒšg
("["è+ 
	`G‘IÅutLab–
(
iv¬
) + "]' = 2*("

592 << 
¡d
::
	`£tw
(
maxL
+2è<< 
	`TSŒšg
("["è+ 
	`G‘IÅutLab–
(
iv¬
) + "]"

593 << 
¡d
::
	`£tw
(3è<< (
	`G‘Xmš
(
iv¬
) > 0 ? " - " : " + ")

594 << 
¡d
::
	`£tw
(6è<< 
TM©h
::
	`Abs
(
	`G‘Xmš
(
iv¬
)) << std::setw(3) << ")/"

595 << 
¡d
::
	`£tw
(6è<< (
	`G‘Xmax
(
iv¬
è- 
	`G‘Xmš
(ivar) )

596 << 
¡d
::
	`£tw
(3) << " - 1"

597 << 
Endl
;

599 
	`Log
(è<< 
kINFO
 << "ThTMVA R—d” wÈ´İ”ly‡ccouÁ fÜhi nÜm®i§tiÚ, buˆiàthe" << 
Endl
;

600 
	`Log
(è<< 
kINFO
 << "Fish” cÏssif›¸i ­¶›d outsidthR—d”,hŒªsfÜm©iÚ mu¡ be" << 
Endl
;

601 
	`Log
(è<< 
kINFO
 << "im¶em’‹d -- o¸th\"NÜm®i£\" o±iÚ i »moved‡nd Fish”„‘¿šed." << 
Endl
;

602 
	`Log
(è<< 
kINFO
 << 
Endl
;

604 
	}
}

609 
	gTMVA
::
M‘hodFish”
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

611 
i¡r
 >> 
fF0
;

612 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è
i¡r
 >> (*
fFish”CÛff
)[ivar];

613 
	}
}

618 
	gTMVA
::
M‘hodFish”
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

620 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

621 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NCÛff", 
	`G‘Nv¬
()+1 );

622 * 
cÛffxml
 = 
	`gToŞs
().
	`AddChd
(
wght
, "Coefficient");

623 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "Index", 0 );

624 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "V®ue", 
fF0
 );

625 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

626 
cÛffxml
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Coefficient" );

627 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "Index", 
iv¬
+1 );

628 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "V®ue", (*
fFish”CÛff
)[
iv¬
] );

630 
	}
}

635 
	gTMVA
::
M‘hodFish”
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

637 
UIÁ_t
 
ncÛff
, 
cÛffidx
;

638 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NCÛff", 
ncÛff
 );

639 
fFish”CÛff
->
	`»size
(
ncÛff
-1);

641 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

642 
DoubË_t
 
cÛff
;

643 
ch
) {

644 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Index", 
cÛffidx
 );

645 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "V®ue", 
cÛff
 );

646 ià(
cÛffidx
==0è
fF0
 = 
cÛff
;

647 (*
fFish”CÛff
)[
cÛffidx
-1] = 
cÛff
;

648 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

650 
	}
}

655 
	gTMVA
::
M‘hodFish”
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

657 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

658 
fout
 << " doubË fFish”0;" << 
¡d
::
’dl
;

659 
fout
 << " std::veùÜ<doubË> fFish”CÛffic›Ás;" << 
¡d
::
’dl
;

660 
fout
 << "};" << 
¡d
::
’dl
;

661 
fout
 << "" << 
¡d
::
’dl
;

662 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

663 
fout
 << "{" << 
¡d
::
’dl
;

664 
fout
 << " fFish”0 = " << 
¡d
::
	`£»cisiÚ
(12è<< 
fF0
 << ";" << std::
’dl
;

665 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

666 
fout
 << " fFish”CÛffic›Ás.push_backĞ" << 
¡d
::
	`£»cisiÚ
(12è<< (*
fFish”CÛff
)[
iv¬
] << " );" << std::
’dl
;

668 
fout
 << 
¡d
::
’dl
;

669 
fout
 << " // sª™y check" << 
¡d
::
’dl
;

670 
fout
 << " ià(fFish”CÛffic›Ás.size(è!ğfNv¬sè{" << 
¡d
::
’dl
;

671 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\"::In™Ÿlize: mism©ch iÀnumb” oàšpuˆv®ues\"" << 
¡d
::
’dl
;

672 
fout
 << " << fFish”CÛffic›Ás.size(è<< \" !ğ\" << fNv¬ << std::’dl;" << 
¡d
::
’dl
;

673 
fout
 << " fStusIsCËª = f®£;" << 
¡d
::
’dl
;

674 
fout
 << " } " << 
¡d
::
’dl
;

675 
fout
 << "}" << 
¡d
::
’dl
;

676 
fout
 << 
¡d
::
’dl
;

677 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

678 
fout
 << "{" << 
¡d
::
’dl
;

679 
fout
 << " doubË„‘v® = fFish”0;" << 
¡d
::
’dl
;

680 
fout
 << " fÜ (size_ˆiv¬ = 0; iv¬ < fNv¬s; iv¬++è{" << 
¡d
::
’dl
;

681 
fout
 << "„‘v® +ğfFish”CÛffic›Ás[iv¬]*šputV®ues[iv¬];" << 
¡d
::
’dl
;

682 
fout
 << " }" << 
¡d
::
’dl
;

683 
fout
 << 
¡d
::
’dl
;

684 
fout
 << "„‘uº„‘v®;" << 
¡d
::
’dl
;

685 
fout
 << "}" << 
¡d
::
’dl
;

686 
fout
 << 
¡d
::
’dl
;

687 
fout
 << "// CËª up" << 
¡d
::
’dl
;

688 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

689 
fout
 << "{" << 
¡d
::
’dl
;

690 
fout
 << " // cË¬ cÛffic›Ás" << 
¡d
::
’dl
;

691 
fout
 << " fFish”CÛffic›Ás.ş—r(); " << 
¡d
::
’dl
;

692 
fout
 << "}" << 
¡d
::
’dl
;

693 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

694 
	}
}

702 
	gTMVA
::
M‘hodFish”
::
	$G‘H–pMes§ge
() const

704 
	`Log
(è<< 
Endl
;

705 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

706 
	`Log
(è<< 
Endl
;

707 
	`Log
(è<< "Fish” disüimšªt £Ëùƒv’t by di¡šguishšghm—À" << 
Endl
;

708 
	`Log
(è<< "v®ue oàthsigÇÈªd background di¡ributiÚ š‡¿ns- " << 
Endl
;

709 
	`Log
(è<< "fÜmed v¬ŸbË s·û wh”lš—¸cÜ»ÏtiÚ ¬»moved." << 
Endl
;

710 
	`Log
(è<< 
Endl
;

711 
	`Log
(è<< " (MÜ´eci£ly:h\"lš—¸disüimš©Ü\" d‘”mšes" << 
Endl
;

712 
	`Log
(è<< "‡Àaxi šh(cÜ»Ï‹dèhy³r¥aû oàthšpuˆ" << 
Endl
;

713 
	`Log
(è<< " v¬ŸbË suchh©, wh’…rojeùšghouuˆşas£ " << 
Endl
;

714 
	`Log
(è<< " (sigÇÈªd backgroundèupÚhi axis,hey‡»…ushed " << 
Endl
;

715 
	`Log
(è<< "‡ ç¸a possibË‡way fromƒach oth”, whev’ts" << 
Endl
;

716 
	`Log
(è<< " oà¨§mşas ¬cÚfšed iÀ¨şo£ vicš™y. Th " << 
Endl
;

717 
	`Log
(è<< "†š—r™y…rİ”ty oàthi şassif›¸i »æeùed iÀth" << 
Endl
;

718 
	`Log
(è<< " m‘riøw™h which \"ç¸­¬t\"‡nd \"şo£ vicš™y\"‡» " << 
Endl
;

719 
	`Log
(è<< " d‘”mšed:hcov¬Ÿnû m©rix oàthdisüimš©šg" << 
Endl
;

720 
	`Log
(è<< " v¬ŸbË s·û.)" << 
Endl
;

721 
	`Log
(è<< 
Endl
;

722 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

723 
	`Log
(è<< 
Endl
;

724 
	`Log
(è<< "O±im®…”fÜmªû fÜ Fish” disüimšªt i obšed fÜ " << 
Endl
;

725 
	`Log
(è<< "lš—¾y cÜ»Ï‹d GaussŸn-di¡ribu‹d v¬ŸbËs. Any devŸtiÚ" << 
Endl
;

726 
	`Log
(è<< "äomhi id—È»duû thach›vabË s•¬©iÚ…ow”. IÀ" << 
Endl
;

727 
	`Log
(è<< "·¹icuÏr,‚Ødisüimš©iÚ‡ˆ®Èi ach›ved fÜ‡ v¬ŸbË" << 
Endl
;

728 
	`Log
(è<< "th© ha th§m§m¶m—ÀfÜ sigÇÈªd background,ƒv’ ià" << 
Endl
;

729 
	`Log
(è<< "thsh­e oàthdi¡ributiÚ ¬v”y difã»Á. Thus, Fish” " << 
Endl
;

730 
	`Log
(è<< "disüimšªt oá’ b’ef™ from su™abË¿nsfÜm©iÚ oàth" << 
Endl
;

731 
	`Log
(è<< "špuˆv¬ŸbËs. FÜƒxam¶e, ià¨v¬ŸbË x iÀ[-1,1] ha ¨" << 
Endl
;

732 
	`Log
(è<< "¨·¿bŞiøsigÇÈdi¡ributiÚs,‡nd‡ unifÜm background" << 
Endl
;

733 
	`Log
(è<< "di¡ributiÚs,heœ m—Àv®ui z”Øš bÙh ca£s,†—dšg " << 
Endl
;

734 
	`Log
(è<< "tØnØ£·¿tiÚ. Thsim¶ŒªsfÜm©iÚ x -> |x|„’d” thi " << 
Endl
;

735 
	`Log
(è<< "v¬ŸbË…ow”fuÈfÜhu£ iÀ¨Fish” disüimšªt." << 
Endl
;

736 
	`Log
(è<< 
Endl
;

737 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

738 
	`Log
(è<< 
Endl
;

739 
	`Log
(è<< "<NÚe>" << 
Endl
;

740 
	}
}

	@src/MethodHMatrix.cxx

29 
	~"TMVA/M‘hodHM©rix.h
"

31 
	~"TMVA/CÏssif›rFaùÜy.h
"

32 
	~"TMVA/D©aS‘.h
"

33 
	~"TMVA/D©aS‘Info.h
"

34 
	~"TMVA/IM‘hod.h
"

35 
	~"TMVA/M‘hodBa£.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/ToŞs.h
"

38 
	~"TMVA/Ty³s.h
"

40 
	~"Rio¡»am.h
"

41 
	~"TM©rix.h
"

42 
	~"TVeùÜT.h
"

43 
	~"TLi¡.h
"

45 
	~<®gÜ™hm
>

47 
	$REGISTER_METHOD
(
HM©rix
)

49 
	`CÏssImp
(
TMVA
::
M‘hodHM©rix
);

83 
TMVA
::
M‘hodHM©rix
::
	$M‘hodHM©rix
ĞcÚ¡ 
TSŒšg
& 
jobName
,

84 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

85 
D©aS‘Info
& 
theD©a
,

86 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

87 : 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kHM©rix
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

88 ,
	`fInvHM©rixS
(0)

89 ,
	`fInvHM©rixB
(0)

90 ,
	`fVecM—nS
(0)

91 ,
	$fVecM—nB
(0)

93 
	}
}

98 
	gTMVA
::
M‘hodHM©rix
::
	$M‘hodHM©rix
Ğ
D©aS‘Info
& 
theD©a
,

99 cÚ¡ 
TSŒšg
& 
theWeightFe
)

100 : 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kHM©rix
, 
theD©a
, 
theWeightFe
)

101 ,
	`fInvHM©rixS
(0)

102 ,
	`fInvHM©rixB
(0)

103 ,
	`fVecM—nS
(0)

104 ,
	$fVecM—nB
(0)

106 
	}
}

111 
	gTMVA
::
M‘hodHM©rix
::
	$In™
( )

115 
fInvHM©rixS
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), GetNvar() );

116 
fInvHM©rixB
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
(), GetNvar() );

117 
fVecM—nS
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

118 
fVecM—nB
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

121 
	`S‘SigÇlReã»nûCut
( 0.0 );

122 
	}
}

127 
	gTMVA
::
M‘hodHM©rix
::~
	$M‘hodHM©rix
( )

129 ià(
NULL
 !ğ
fInvHM©rixS
è
d–‘e
 fInvHMatrixS;

130 ià(
NULL
 !ğ
fInvHM©rixB
è
d–‘e
 fInvHMatrixB;

131 ià(
NULL
 !ğ
fVecM—nS
 ) 
d–‘e
 fVecMeanS;

132 ià(
NULL
 !ğ
fVecM—nB
 ) 
d–‘e
 fVecMeanB;

133 
	}
}

138 
BoŞ_t
 
	gTMVA
::
M‘hodHM©rix
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

140 ifĞ
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2 )  
kTRUE
;

141  
kFALSE
;

142 
	}
}

148 
	gTMVA
::
M‘hodHM©rix
::
	$Deş¬eO±iÚs
()

150 
	}
}

155 
TMVA
::
M‘hodHM©rix
::
	$ProûssO±iÚs
()

157 
	}
}

162 
TMVA
::
M‘hodHM©rix
::
	$T¿š
( )

165 
	`Compu‹Cov¬Ÿnû
Ğ
kTRUE
, 
fInvHM©rixS
 );

166 
	`Compu‹Cov¬Ÿnû
Ğ
kFALSE
, 
fInvHM©rixB
 );

169 ià(
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`D‘”mšªt
()) < 10E-24) {

170 
	`Log
(è<< 
kWARNING
 << "<Train> H-matrix S is‡lmost singular with determinant= "

171 << 
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`D‘”mšªt
())

173 << 
Endl
;

175 ià(
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`D‘”mšªt
()) < 10E-24) {

176 
	`Log
(è<< 
kWARNING
 << "<Train> H-matrix B is‡lmost singular with determinant= "

177 << 
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`D‘”mšªt
())

179 << 
Endl
;

182 ià(
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`D‘”mšªt
()) < 10E-120) {

183 
	`Log
(è<< 
kFATAL
 << "<Train> H-matrix S is singular with determinant= "

184 << 
TM©h
::
	`Abs
(
fInvHM©rixS
->
	`D‘”mšªt
())

186 << 
Endl
;

188 ià(
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`D‘”mšªt
()) < 10E-120) {

189 
	`Log
(è<< 
kFATAL
 << "<Train> H-matrix B is singular with determinant= "

190 << 
TM©h
::
	`Abs
(
fInvHM©rixB
->
	`D‘”mšªt
())

192 << 
Endl
;

196 
fInvHM©rixS
->
	`Inv”t
();

197 
fInvHM©rixB
->
	`Inv”t
();

198 
	`Ex™FromT¿ššg
();

199 
	}
}

204 
	gTMVA
::
M‘hodHM©rix
::
	$Compu‹Cov¬Ÿnû
Ğ
BoŞ_t
 
isSigÇl
, 
TM©rixD
* 
m©
 )

206 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

208 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

209 
UIÁ_t
 
iv¬
, 
jv¬
;

212 
TVeùÜD
 
	`vec
(
nv¬
); 
vec
 *= 0;

213 
TM©rixD
 
	`m©2
(
nv¬
,‚v¬); 
m©2
 *= 0;

216 
DoubË_t
 
sumOfWeights
 = 0;

217 
DoubË_t
 *
xv®
 = 
Ãw
 DoubË_t[
nv¬
];

220 
IÁ_t
 
i
=0, 
iEnd
=
	`D©a
()->
	`G‘NEv’ts
(); i<iEnd; ++i) {

223 cÚ¡ 
Ev’t
* 
ÜigEvt
 = 
	`D©a
()->
	`G‘Ev’t
(
i
);

224 
DoubË_t
 
weight
 = 
ÜigEvt
->
	`G‘Weight
();

227 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
weight
 <= 0) ;

229 ià(
	`D©aInfo
().
	`IsSigÇl
(
ÜigEvt
è!ğ
isSigÇl
) ;

232 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
ÜigEvt
->
	`G‘CÏss
() );

233 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`T¿nsfÜm
Ğ
ÜigEvt
 );

236 
sumOfWeights
 +ğ
weight
;

239 
iv¬
=0; iv¬<
nv¬
; iv¬++è
xv®
[iv¬] = 
ev
->
	`G‘V®ue
(ivar);

242 
iv¬
=0; iv¬<
nv¬
; ivar++) {

244 
	`vec
(
iv¬
è+ğ
xv®
[iv¬]*
weight
;

245 
	`m©2
(
iv¬
, iv¬è+ğ(
xv®
[iv¬]*xv®[iv¬])*
weight
;

247 
jv¬
=
iv¬
+1; jv¬<
nv¬
; jvar++) {

248 
	`m©2
(
iv¬
, 
jv¬
è+ğ(
xv®
[iv¬]*xv®[jv¬])*
weight
;

249 
	`m©2
(
jv¬
, 
iv¬
) = mat2(ivar, jvar);

255 
iv¬
=0; iv¬<
nv¬
; ivar++) {

257 ià(
isSigÇl
è(*
fVecM—nS
)(
iv¬
èğ
	`vec
(iv¬)/
sumOfWeights
;

258 (*
fVecM—nB
)(
iv¬
èğ
	`vec
(iv¬)/
sumOfWeights
;

260 
jv¬
=0; jv¬<
nv¬
; jvar++) {

261 (*
m©
)(
iv¬
, 
jv¬
èğ
	`m©2
(iv¬, jv¬)/
sumOfWeights
 - 
	`vec
(ivar)*vec(jvar)/(sumOfWeights*sumOfWeights);

265 
d–‘e
 [] 
xv®
;

266 
	}
}

271 
DoubË_t
 
	gTMVA
::
M‘hodHM©rix
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

273 
DoubË_t
 
s
 = 
	`G‘Chi2
Ğ
Ty³s
::
kSigÇl
 );

274 
DoubË_t
 
b
 = 
	`G‘Chi2
Ğ
Ty³s
::
kBackground
 );

276 ià(
s
+
b
 < 0è
	`Log
(è<< 
kFATAL
 << "bigroubË: s+b: " << s+b << 
Endl
;

279 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

281  (
b
 - 
s
)/(s + b);

282 
	}
}

287 
DoubË_t
 
	gTMVA
::
M‘hodHM©rix
::
	$G‘Chi2
Ğ
Ty³s
::
ESBTy³
 
ty³
 )

291 cÚ¡ 
Ev’t
* 
ÜigEvt
 = 
fTmpEv’t
 ? fTmpEv’t:
	`D©a
()->
	`G‘Ev’t
();

294 
UIÁ_t
 
	`iv¬
(0), 
	`jv¬
(0), 
	`nv¬
(
	`G‘Nv¬
());

295 
¡d
::
veùÜ
<
DoubË_t
> 
	`v®
Ğ
nv¬
 );

298 ià(
ty³
==
Ty³s
::
kSigÇl
)

299 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
fSigÇlCÏss
 );

301 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
fBackgroundCÏss
 );

303 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`T¿nsfÜm
Ğ
ÜigEvt
 );

305 
iv¬
=0; iv¬<
nv¬
; iv¬++è
v®
[iv¬] = 
ev
->
	`G‘V®ue
( ivar );

307 
DoubË_t
 
chi2
 = 0;

308 
iv¬
=0; iv¬<
nv¬
; ivar++) {

309 
jv¬
=0; jv¬<
nv¬
; jvar++) {

310 ià(
ty³
 =ğ
Ty³s
::
kSigÇl
)

311 
chi2
 +ğĞ(
v®
[
iv¬
] - (*
fVecM—nS
)(iv¬))*(v®[
jv¬
] - (*fVecMeanS)(jvar))

312 * (*
fInvHM©rixS
)(
iv¬
,
jv¬
) );

314 
chi2
 +ğĞ(
v®
[
iv¬
] - (*
fVecM—nB
)(iv¬))*(v®[
jv¬
] - (*fVecMeanB)(jvar))

315 * (*
fInvHM©rixB
)(
iv¬
,
jv¬
) );

320 ià(
chi2
 < 0è
	`Log
(è<< 
kFATAL
 << "<G‘Chi2>‚eg©ivchi2: " << chi2 << 
Endl
;

322  
chi2
;

323 
	}
}

328 
	gTMVA
::
M‘hodHM©rix
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

330 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

331 
	`gToŞs
().
	`Wr™eTVeùÜDToXML
Ğ
wght
, "VecM—nS", 
fVecM—nS
 );

332 
	`gToŞs
().
	`Wr™eTVeùÜDToXML
Ğ
wght
, "VecM—nB", 
fVecM—nB
 );

333 
	`gToŞs
().
	`Wr™eTM©rixDToXML
Ğ
wght
, "InvHM©S", 
fInvHM©rixS
 );

334 
	`gToŞs
().
	`Wr™eTM©rixDToXML
Ğ
wght
, "InvHM©B", 
fInvHM©rixB
 );

335 
	}
}

340 
	gTMVA
::
M‘hodHM©rix
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

342 * 
desúode
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

343 
	`gToŞs
().
	`R—dTVeùÜDFromXML
Ğ
desúode
, "VecM—nS", 
fVecM—nS
 );

344 
desúode
 = 
	`gToŞs
().
	`G‘NextChd
(descnode);

345 
	`gToŞs
().
	`R—dTVeùÜDFromXML
Ğ
desúode
, "VecM—nB", 
fVecM—nB
 );

346 
desúode
 = 
	`gToŞs
().
	`G‘NextChd
(descnode);

347 
	`gToŞs
().
	`R—dTM©rixDFromXML
Ğ
desúode
, "InvHM©S", 
fInvHM©rixS
 );

348 
desúode
 = 
	`gToŞs
().
	`G‘NextChd
(descnode);

349 
	`gToŞs
().
	`R—dTM©rixDFromXML
Ğ
desúode
, "InvHM©B", 
fInvHM©rixB
 );

350 
	}
}

357 
	gTMVA
::
M‘hodHM©rix
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

359 
UIÁ_t
 
iv¬
,
jv¬
;

360 
TSŒšg
 
v¬
, 
dummy
;

361 
i¡r
 >> 
dummy
;

365 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

366 
i¡r
 >> (*
fVecM—nS
)(
iv¬
è>> (*
fVecM—nB
)(ivar);

369 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

370 
jv¬
=0; jv¬<
	`G‘Nv¬
(); jvar++)

371 
i¡r
 >> (*
fInvHM©rixS
)(
iv¬
,
jv¬
);

374 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++)

375 
jv¬
=0; jv¬<
	`G‘Nv¬
(); jvar++)

376 
i¡r
 >> (*
fInvHM©rixB
)(
iv¬
,
jv¬
);

377 
	}
}

382 
	gTMVA
::
M‘hodHM©rix
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

384 
fout
 << " //‡¼ay oàšpuˆevˆvs. v¬ŸbË " << 
¡d
::
’dl
;

385 
fout
 << " doubË fInvHM©rixS[" << 
	`G‘Nv¬
(è<< "][" << G‘Nv¬(è<< "]; // inv”£ H-m©rix (sigÇl)" << 
¡d
::
’dl
;

386 
fout
 << " doubË fInvHM©rixB[" << 
	`G‘Nv¬
(è<< "][" << G‘Nv¬(è<< "]; // inv”£ H-m©rix (background)" << 
¡d
::
’dl
;

387 
fout
 << " doubË fVecM—nS[" << 
	`G‘Nv¬
(è<< "]; // veùÜ oàm—Àv®ue (sigÇl)" << 
¡d
::
’dl
;

388 
fout
 << " doubË fVecM—nB[" << 
	`G‘Nv¬
(è<< "]; // veùÜ oàm—Àv®ue (background)" << 
¡d
::
’dl
;

389 
fout
 << " " << 
¡d
::
’dl
;

390 
fout
 << " doubË G‘Chi2ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ues, iÁy³ ) cÚ¡;" << 
¡d
::
’dl
;

391 
fout
 << "};" << 
¡d
::
’dl
;

392 
fout
 << " " << 
¡d
::
’dl
;

393 
fout
 << "void " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

394 
fout
 << "{" << 
¡d
::
’dl
;

395 
fout
 << " // in™ veùÜ w™h m—Àv®ues" << 
¡d
::
’dl
;

396 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

397 
fout
 << " fVecM—nS[" << 
iv¬
 << "] = " << (*
fVecM—nS
)(iv¬è<< ";" << 
¡d
::
’dl
;

398 
fout
 << " fVecM—nB[" << 
iv¬
 << "] = " << (*
fVecM—nB
)(iv¬è<< ";" << 
¡d
::
’dl
;

400 
fout
 << " " << 
¡d
::
’dl
;

401 
fout
 << " // in™ H-m©riûs" << 
¡d
::
’dl
;

402 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

403 
UIÁ_t
 
jv¬
=0; jv¬<
	`G‘Nv¬
(); jvar++) {

404 
fout
 << " fInvHM©rixS[" << 
iv¬
 << "][" << 
jv¬
 << "] = "

405 << (*
fInvHM©rixS
)(
iv¬
,
jv¬
è<< ";" << 
¡d
::
’dl
;

406 
fout
 << " fInvHM©rixB[" << 
iv¬
 << "][" << 
jv¬
 << "] = "

407 << (*
fInvHM©rixB
)(
iv¬
,
jv¬
è<< ";" << 
¡d
::
’dl
;

410 
fout
 << "}" << 
¡d
::
’dl
;

411 
fout
 << " " << 
¡d
::
’dl
;

412 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

413 
fout
 << "{" << 
¡d
::
’dl
;

414 
fout
 << " //„‘uº thH-m©rix sigÇÈe¡im©Ü" << 
¡d
::
’dl
;

415 
fout
 << " std::veùÜ<doubË> iÅutV®uesSig = iÅutV®ues;" << 
¡d
::
’dl
;

416 
fout
 << " std::veùÜ<doubË> iÅutV®uesBgd = iÅutV®ues;" << 
¡d
::
’dl
;

417 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() != 0) {

419 
UIÁ_t
 
sigÇlCÏss
 =
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

420 
UIÁ_t
 
backgroundCÏss
=
	`D©aInfo
().
	`G‘CÏssInfo
("Background")->
	`G‘Numb”
();

422 
fout
 << " T¿nsfÜm(šputV®uesSig," << 
sigÇlCÏss
 << ");" << 
¡d
::
’dl
;

423 
fout
 << " T¿nsfÜm(šputV®uesBgd," << 
backgroundCÏss
 << ");" << 
¡d
::
’dl
;

428 
fout
 << " doubË s = G‘Chi2ĞšputV®uesSig, " << 
Ty³s
::
kSigÇl
 << " );" << 
¡d
::
’dl
;

429 
fout
 << " doubË b = G‘Chi2ĞšputV®uesBgd, " << 
Ty³s
::
kBackground
 << " );" << 
¡d
::
’dl
;

433 
fout
 << " " << 
¡d
::
’dl
;

434 
fout
 << " ià(s+b <ğ0è¡d::couˆ<< \"ProbËm iÀşas " << 
şassName
 << "::G‘MvaV®ue__: s+b = \"" << 
¡d
::
’dl
;

435 
fout
 << " << s+b << \" <ğ0 \" << std::’dl;" << 
¡d
::
’dl
;

436 
fout
 << " " << 
¡d
::
’dl
;

437 
fout
 << "„‘uº (b - s)/( + b);" << 
¡d
::
’dl
;

438 
fout
 << "}" << 
¡d
::
’dl
;

439 
fout
 << " " << 
¡d
::
’dl
;

440 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘Chi2ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ues, iÁy³ ) cÚ¡" << 
¡d
::
’dl
;

441 
fout
 << "{" << 
¡d
::
’dl
;

442 
fout
 << " // compu‹ chi2-e¡im©Ü fÜƒv’ˆaccÜdšgØty³ (sigÇl/background)" << 
¡d
::
’dl
;

443 
fout
 << " " << 
¡d
::
’dl
;

444 
fout
 << " size_ˆiv¬,jv¬;" << 
¡d
::
’dl
;

445 
fout
 << " doubË chi2 = 0;" << 
¡d
::
’dl
;

446 
fout
 << " fÜ (iv¬=0; iv¬<G‘Nv¬(); iv¬++è{" << 
¡d
::
’dl
;

447 
fout
 << " fÜ (jv¬=0; jv¬<G‘Nv¬(); jv¬++è{" << 
¡d
::
’dl
;

448 
fout
 << " iàÑy³ =ğ" << 
Ty³s
::
kSigÇl
 << "è" << 
¡d
::
’dl
;

449 
fout
 << " chi2 +ğĞ(šputV®ues[iv¬] - fVecM—nS[iv¬])*(šputV®ues[jv¬] - fVecM—nS[jv¬])" << 
¡d
::
’dl
;

450 
fout
 << " * fInvHM©rixS[iv¬][jv¬] );" << 
¡d
::
’dl
;

451 
fout
 << "ƒl£" << 
¡d
::
’dl
;

452 
fout
 << " chi2 +ğĞ(šputV®ues[iv¬] - fVecM—nB[iv¬])*(šputV®ues[jv¬] - fVecM—nB[jv¬])" << 
¡d
::
’dl
;

453 
fout
 << " * fInvHM©rixB[iv¬][jv¬] );" << 
¡d
::
’dl
;

454 
fout
 << " }" << 
¡d
::
’dl
;

455 
fout
 << " } //†oİ ov” v¬ŸbË  " << 
¡d
::
’dl
;

456 
fout
 << " " << 
¡d
::
’dl
;

457 
fout
 << " // sª™y check" << 
¡d
::
’dl
;

458 
fout
 << " ià(chi2 < 0è¡d::couˆ<< \"ProbËm iÀşas " << 
şassName
 << "::G‘Chi2: chi2 = \"" << 
¡d
::
’dl
;

459 
fout
 << " << chi2 << \" < 0 \" << std::’dl;" << 
¡d
::
’dl
;

460 
fout
 << " " << 
¡d
::
’dl
;

461 
fout
 << "„‘uº chi2;" << 
¡d
::
’dl
;

462 
fout
 << "}" << 
¡d
::
’dl
;

463 
fout
 << " " << 
¡d
::
’dl
;

464 
fout
 << "// CËª up" << 
¡d
::
’dl
;

465 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

466 
fout
 << "{" << 
¡d
::
’dl
;

467 
fout
 << " //‚ÙhšgØş—r" << 
¡d
::
’dl
;

468 
fout
 << "}" << 
¡d
::
’dl
;

469 
	}
}

477 
	gTMVA
::
M‘hodHM©rix
::
	$G‘H–pMes§ge
() const

479 
	`Log
(è<< 
Endl
;

480 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

481 
	`Log
(è<< 
Endl
;

482 
	`Log
(è<< "ThH-M©rix cÏssif›¸disüimš©e Úşas (sigÇlèoà¨ã©u»" << 
Endl
;

483 
	`Log
(è<< "veùÜ from‡nÙh” (background). ThcÜ»Ï‹dƒËm’t oàthe" << 
Endl
;

484 
	`Log
(è<< "veùÜ‡»‡ssumedØbGaussŸÀdi¡ribu‹d,‡ndhšv”£ of" << 
Endl
;

485 
	`Log
(è<< "thcov¬Ÿnû m©rix i thH-M©rix. A muÉiv¬Ÿ‹ chi-squ¬ed" << 
Endl
;

486 
	`Log
(è<< "e¡im©Ü i buˆth©ƒx¶o™ difã»nû šhm—Àv®ue of" << 
Endl
;

487 
	`Log
(è<< "thveùÜƒËm’t b‘w“ÀthtwØşas£ fÜhpu½o£ of" << 
Endl
;

488 
	`Log
(è<< "disüimš©iÚ." << 
Endl
;

489 
	`Log
(è<< 
Endl
;

490 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

491 
	`Log
(è<< 
Endl
;

492 
	`Log
(è<< "ThTMVA im¶em’tiÚ oàthH-M©rix cÏssif›¸ha b“Àshown" << 
Endl
;

493 
	`Log
(è<< "tØund”³rfÜm iÀcom·risÚ w™hhcÜ»¥Údšg Fish” disüimšªt," << 
Endl
;

494 
	`Log
(è<< "wh’ usšg sim¬‡ssum±iÚ ªd com¶ex™y. It u£ i th”efÜe" << 
Endl
;

495 
	`Log
(è<< "d•»cŸ‹d. OÆy iÀÿ£ wh”thbackground mod– i ¡rÚgly" << 
Endl
;

496 
	`Log
(è<< "nÚ-GaussŸn, H-M©rix may…”fÜm b‘‹¸thª Fish”. IÀsuch" << 
Endl
;

497 
	`Log
(è<< "occu¼’û thu£¸i advi£dØem¶oy‚Ú-lš—¸şassif›rs. " << 
Endl
;

498 
	`Log
(è<< 
Endl
;

499 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

500 
	`Log
(è<< 
Endl
;

501 
	`Log
(è<< "NÚe" << 
Endl
;

502 
	}
}

	@src/MethodKNN.cxx

33 
	~"TMVA/M‘hodKNN.h
"

35 
	~"TMVA/CÏssif›rFaùÜy.h
"

36 
	~"TMVA/CÚfigu¿bË.h
"

37 
	~"TMVA/D©aS‘Info.h
"

38 
	~"TMVA/Ev’t.h
"

39 
	~"TMVA/LDA.h
"

40 
	~"TMVA/IM‘hod.h
"

41 
	~"TMVA/M‘hodBa£.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/Rªkšg.h
"

44 
	~"TMVA/ToŞs.h
"

45 
	~"TMVA/Ty³s.h
"

47 
	~"TFe.h
"

48 
	~"TM©h.h
"

49 
	~"TT»e.h
"

51 
	~<cm©h
>

52 
	~<¡ršg
>

53 
	~<c¡dlib
>

55 
	$REGISTER_METHOD
(
KNN
)

57 
	`CÏssImp
(
TMVA
::
M‘hodKNN
);

62 
TMVA
::
M‘hodKNN
::
	$M‘hodKNN
ĞcÚ¡ 
TSŒšg
& 
jobName
,

63 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

64 
D©aS‘Info
& 
theD©a
,

65 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

66 : 
TMVA
::
	`M‘hodBa£
(
jobName
, 
Ty³s
::
kKNN
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

67 , 
	`fSumOfWeightsS
(0)

68 , 
	`fSumOfWeightsB
(0)

69 , 
	`fModuË
(0)

70 , 
	`âkNN
(0)

71 , 
	`fB®ªûD•th
(0)

72 , 
	`fSÿËF¿c
(0)

73 , 
	`fSigmaFaù
(0)

74 , 
	`fTrim
(
kFALSE
)

75 , 
	`fU£K”Ãl
(
kFALSE
)

76 , 
	`fU£Weight
(
kFALSE
)

77 , 
	`fU£LDA
(
kFALSE
)

78 , 
	$fT»eO±D•th
(0)

80 
	}
}

85 
	gTMVA
::
M‘hodKNN
::
	$M‘hodKNN
Ğ
D©aS‘Info
& 
theD©a
,

86 cÚ¡ 
TSŒšg
& 
theWeightFe
)

87 : 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kKNN
, 
theD©a
, 
theWeightFe
)

88 , 
	`fSumOfWeightsS
(0)

89 , 
	`fSumOfWeightsB
(0)

90 , 
	`fModuË
(0)

91 , 
	`âkNN
(0)

92 , 
	`fB®ªûD•th
(0)

93 , 
	`fSÿËF¿c
(0)

94 , 
	`fSigmaFaù
(0)

95 , 
	`fTrim
(
kFALSE
)

96 , 
	`fU£K”Ãl
(
kFALSE
)

97 , 
	`fU£Weight
(
kFALSE
)

98 , 
	`fU£LDA
(
kFALSE
)

99 , 
	$fT»eO±D•th
(0)

101 
	}
}

106 
	gTMVA
::
M‘hodKNN
::~
	$M‘hodKNN
()

108 ià(
fModuË
è
d–‘e
 fModule;

109 
	}
}

124 
	gTMVA
::
M‘hodKNN
::
	$Deş¬eO±iÚs
()

126 
	`Deş¬eO±iÚRef
(
âkNN
 = 20, "nkNN", "Number of k-nearest‚eighbors");

127 
	`Deş¬eO±iÚRef
(
fB®ªûD•th
 = 6, "BalanceDepth", "Binaryree balance depth");

128 
	`Deş¬eO±iÚRef
(
fSÿËF¿c
 = 0.80, "ScaleFrac", "Fraction ofƒvents usedo compute variable width");

129 
	`Deş¬eO±iÚRef
(
fSigmaFaù
 = 1.0, "SigmaFact", "Scale factor for sigma in Gaussian kernel");

130 
	`Deş¬eO±iÚRef
(
fK”Ãl
 = "Gaus", "Kernel", "Use…olynomial (=Poln) or Gaussian (=Gaus) kernel");

131 
	`Deş¬eO±iÚRef
(
fTrim
 = 
kFALSE
, "Trim", "Useƒqual‚umber of signal‡nd backgroundƒvents");

132 
	`Deş¬eO±iÚRef
(
fU£K”Ãl
 = 
kFALSE
, "UseKernel", "Use…olynomial kernel weight");

133 
	`Deş¬eO±iÚRef
(
fU£Weight
 = 
kTRUE
, "UseWeight", "Use weighto count kNNƒvents");

134 
	`Deş¬eO±iÚRef
(
fU£LDA
 = 
kFALSE
, "UseLDA", "Use†ocal†inear discriminant -ƒxperimental feature");

135 
	}
}

140 
	gTMVA
::
M‘hodKNN
::
	$Deş¬eCom·tib™yO±iÚs
() {

141 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

142 
	`Deş¬eO±iÚRef
(
fT»eO±D•th
 = 6, "TreeOptDepth", "Binaryree optimisation depth");

143 
	}
}

148 
	gTMVA
::
M‘hodKNN
::
	$ProûssO±iÚs
()

150 ià(!(
âkNN
 > 0)) {

151 
âkNN
 = 10;

152 
	`Log
(è<< 
kWARNING
 << "kNN mu¡ b¨pos™ivš‹g”: s‘ kNN = " << 
âkNN
 << 
Endl
;

154 ià(
fSÿËF¿c
 < 0.0) {

155 
fSÿËF¿c
 = 0.0;

156 
	`Log
(è<< 
kWARNING
 << "SÿËF¿øÿÀnÙ bÃg©ive: s‘ SÿËF¿øğ" << 
fSÿËF¿c
 << 
Endl
;

158 ià(
fSÿËF¿c
 > 1.0) {

159 
fSÿËF¿c
 = 1.0;

161 ià(!(
fB®ªûD•th
 > 0)) {

162 
fB®ªûD•th
 = 6;

163 
	`Log
(è<< 
kWARNING
 << "O±imizmu¡ b¨pos™ivš‹g”: s‘ O±imizğ" << 
fB®ªûD•th
 << 
Endl
;

166 
	`Log
(è<< 
kVERBOSE


168 << " kNN = \n" << 
âkNN


169 << " U£K”ÃÈğ\n" << 
fU£K”Ãl


170 << " SigmaFaù = \n" << 
fSigmaFaù


171 << " SÿËF¿øğ\n" << 
fSÿËF¿c


172 << " K”ÃÈğ\n" << 
fK”Ãl


173 << " Trim = \n" << 
fTrim


174 << " O±imizğ" << 
fB®ªûD•th
 << 
Endl
;

175 
	}
}

180 
BoŞ_t
 
	gTMVA
::
M‘hodKNN
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

182 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

183 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
è 
kTRUE
;

184  
kFALSE
;

185 
	}
}

190 
	gTMVA
::
M‘hodKNN
::
	$In™
()

195 
fModuË
 = 
Ãw
 
kNN
::
	`ModuËkNN
();

196 
fSumOfWeightsS
 = 0;

197 
fSumOfWeightsB
 = 0;

198 
	}
}

203 
	gTMVA
::
M‘hodKNN
::
	$MakeKNN
()

205 ià(!
fModuË
) {

206 
	`Log
(è<< 
kFATAL
 << "ModuËkNN i nÙ c»©ed" << 
Endl
;

209 
fModuË
->
	`CË¬
();

211 
¡d
::
¡ršg
 
İtiÚ
;

212 ià(
fSÿËF¿c
 > 0.0) {

213 
İtiÚ
 += "metric";

215 ià(
fTrim
) {

216 
İtiÚ
 += "trim";

219 
	`Log
(è<< 
kINFO
 << "C»©šg kd-Œ“ w™h " << 
fEv’t
.
	`size
(è<< "ƒv’ts" << 
Endl
;

221 
kNN
::
Ev’tVec
::
cÚ¡_™”©Ü
 
ev’t
 = 
fEv’t
.
	`begš
();ƒv’ˆ!ğfEv’t.
	`’d
(); ++event) {

222 
fModuË
->
	`Add
(*
ev’t
);

226 
fModuË
->
	`Fl
(
¡©ic_ÿ¡
<
UIÁ_t
>(
fB®ªûD•th
),

227 
¡©ic_ÿ¡
<
UIÁ_t
>(100.0*
fSÿËF¿c
),

228 
İtiÚ
);

229 
	}
}

234 
	gTMVA
::
M‘hodKNN
::
	$T¿š
()

236 
	`Log
(è<< 
kHEADER
 << "<T¿š> s¹..." << 
Endl
;

238 ià(
	`IsNÜm®i£d
()) {

239 
	`Log
(è<< 
kINFO
 << "IÅuˆev’t ¬nÜm®ized - s‘tšg SÿËF¿øtØ0" << 
Endl
;

240 
fSÿËF¿c
 = 0.0;

243 ià(!
fEv’t
.
	`em±y
()) {

244 
	`Log
(è<< 
kINFO
 << "E¿sšg " << 
fEv’t
.
	`size
(è<< "…»viou¦y stÜedƒv’ts" << 
Endl
;

245 
fEv’t
.
	`ş—r
();

247 ià(
	`G‘NV¬ŸbËs
() < 1)

248 
	`Log
(è<< 
kFATAL
 << "M‘hodKNN::T¿š(è- mism©ched o¸wrÚg‚umb” oàev’ˆv¬ŸbËs" << 
Endl
;

251 
	`Log
(è<< 
kINFO
 << "R—dšg " << 
	`G‘NEv’ts
(è<< "ƒv’ts" << 
Endl
;

253 
UIÁ_t
 
›vt
 = 0; ievˆ< 
	`G‘NEv’ts
(); ++ievt) {

255 cÚ¡ 
Ev’t
* 
evt_
 = 
	`G‘Ev’t
(
›vt
);

256 
DoubË_t
 
weight
 = 
evt_
->
	`G‘Weight
();

259 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
weight
 <= 0) ;

261 
kNN
::
V¬Vec
 
	`vvec
(
	`G‘NV¬ŸbËs
(), 0.0);

262 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
evt_
 -> 
	`G‘NV¬ŸbËs
(); ++iv¬è
vvec
[iv¬] =ƒvt_->
	`G‘V®ue
(ivar);

264 
ShÜt_t
 
ev’t_ty³
 = 0;

266 ià(
	`D©aInfo
().
	`IsSigÇl
(
evt_
)) {

267 
fSumOfWeightsS
 +ğ
weight
;

268 
ev’t_ty³
 = 1;

271 
fSumOfWeightsB
 +ğ
weight
;

272 
ev’t_ty³
 = 2;

278 
kNN
::
Ev’t
 
	`ev’t_kÂ
(
vvec
, 
weight
, 
ev’t_ty³
);

279 
ev’t_kÂ
.
	`S‘T¬g‘s
(
evt_
->
	`G‘T¬g‘s
());

280 
fEv’t
.
	`push_back
(
ev’t_kÂ
);

283 
	`Log
(è<< 
kINFO


284 << "Numb” oàsigÇÈev’t " << 
fSumOfWeightsS
 << 
Endl


285 << "Numb” oàbackgroundƒv’t " << 
fSumOfWeightsB
 << 
Endl
;

288 
	`MakeKNN
();

290 
	`Ex™FromT¿ššg
();

291 
	}
}

296 
DoubË_t
 
	gTMVA
::
M‘hodKNN
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

299 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

304 cÚ¡ 
Ev’t
 *
ev
 = 
	`G‘Ev’t
();

305 cÚ¡ 
IÁ_t
 
nv¬
 = 
	`G‘NV¬ŸbËs
();

306 cÚ¡ 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

307 cÚ¡ 
UIÁ_t
 
kÂ
 = 
¡©ic_ÿ¡
<UIÁ_t>(
âkNN
);

309 
kNN
::
V¬Vec
 
	`vvec
(
¡©ic_ÿ¡
<
UIÁ_t
>(
nv¬
), 0.0);

311 
IÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬
; ++ivar) {

312 
vvec
[
iv¬
] = 
ev
->
	`G‘V®ue
(ivar);

318 cÚ¡ 
kNN
::
Ev’t
 
	`ev’t_kÂ
(
vvec
, 
weight
, 3);

319 
fModuË
->
	`Fšd
(
ev’t_kÂ
, 
kÂ
 + 2);

321 cÚ¡ 
kNN
::
Li¡
 &
¾i¡
 = 
fModuË
->
	`G‘kNNLi¡
();

322 ià(
¾i¡
.
	`size
(è!ğ
kÂ
 + 2) {

323 
	`Log
(è<< 
kFATAL
 << "kNN„esuÉ†i¡ i em±y" << 
Endl
;

327 ià(
fU£LDA
è 
M‘hodKNN
::
	`g‘LDAV®ue
(
¾i¡
, 
ev’t_kÂ
);

332 
BoŞ_t
 
u£_gaus
 = 
çl£
, 
u£_pŞn
 = false;

333 ià(
fU£K”Ãl
) {

334 ià(
fK”Ãl
 =ğ"Gaus"è
u£_gaus
 = 
Œue
;

335 ià(
fK”Ãl
 =ğ"PŞn"è
u£_pŞn
 = 
Œue
;

341 
DoubË_t
 
k¿dius
 = -1.0;

342 ià(
u£_pŞn
) {

343 
k¿dius
 = 
M‘hodKNN
::
	`g‘K”ÃlRadius
(
¾i¡
);

345 ià(!(
k¿dius
 > 0.0)) {

346 
	`Log
(è<< 
kFATAL
 << "kNN„adiu i nÙ…os™ive" << 
Endl
;

350 
k¿dius
 = 1.0/
TM©h
::
	`Sq¹
(kradius);

356 
¡d
::
veùÜ
<
DoubË_t
> 
rms_vec
;

357 ià(
u£_gaus
) {

358 
rms_vec
 = 
TMVA
::
M‘hodKNN
::
	`g‘RMS
(
¾i¡
, 
ev’t_kÂ
);

360 ià(
rms_vec
.
	`em±y
(è||„ms_vec.
	`size
(è!ğ
ev’t_kÂ
.
	`G‘NV¬
()) {

361 
	`Log
(è<< 
kFATAL
 << "FaedØcompu‹ RMS veùÜ" << 
Endl
;

366 
UIÁ_t
 
couÁ_®l
 = 0;

367 
DoubË_t
 
weight_®l
 = 0, 
weight_sig
 = 0, 
weight_bac
 = 0;

369 
kNN
::
Li¡
::
cÚ¡_™”©Ü
 
l™
 = 
¾i¡
.
	`begš
();†™ !ğ¾i¡.
	`’d
(); ++lit) {

372 cÚ¡ 
kNN
::
Node
<kNN::
Ev’t
> &
node
 = *(
l™
->
fœ¡
);

376 ià(
l™
->
£cÚd
 < 0.0) {

377 
	`Log
(è<< 
kFATAL
 << "A‚eighbÜ ha Ãg©ivdi¡ªûØqu”yƒv’t" << 
Endl
;

379 ià(!(
l™
->
£cÚd
 > 0.0)) {

380 
	`Log
(è<< 
kVERBOSE
 << "A‚eighbÜ ha z”Ødi¡ªûØqu”yƒv’t" << 
Endl
;

384 
DoubË_t
 
evweight
 = 
node
.
	`G‘Weight
();

385 ià(
u£_gaus
è
evweight
 *ğ
M‘hodKNN
::
	`GausK”Ãl
(
ev’t_kÂ
, 
node
.
	`G‘Ev’t
(), 
rms_vec
);

386 ià(
u£_pŞn
è
evweight
 *ğ
M‘hodKNN
::
	`PŞnK”Ãl
(
TM©h
::
	`Sq¹
(
l™
->
£cÚd
)*
k¿dius
);

388 ià(
fU£Weight
è
weight_®l
 +ğ
evweight
;

389 ++
weight_®l
;

391 ià(
node
.
	`G‘Ev’t
().
	`G‘Ty³
() == 1) {

392 ià(
fU£Weight
è
weight_sig
 +ğ
evweight
;

393 ++
weight_sig
;

395 ià(
node
.
	`G‘Ev’t
().
	`G‘Ty³
() == 2) {

396 ià(
fU£Weight
è
weight_bac
 +ğ
evweight
;

397 ++
weight_bac
;

400 
	`Log
(è<< 
kFATAL
 << "UnknowÀty³ fÜ¿ššgƒv’t" << 
Endl
;

404 ++
couÁ_®l
;

406 ià(
couÁ_®l
 >ğ
kÂ
) {

412 ià(!(
couÁ_®l
 > 0)) {

413 
	`Log
(è<< 
kFATAL
 << "SizkNN„esuÉ†i¡ i nÙ…os™ive" << 
Endl
;

418 ià(
couÁ_®l
 < 
kÂ
) {

419 
	`Log
(è<< 
kDEBUG
 << "couÁ_®Èªd kNN havdifã»Á size: " << 
couÁ_®l
 << " < " << 
kÂ
 << 
Endl
;

423 ià(!(
weight_®l
 > 0.0)) {

424 
	`Log
(è<< 
kFATAL
 << "kNN„esuÉÙ® weighˆi nÙ…os™ive" << 
Endl
;

428  
weight_sig
/
weight_®l
;

429 
	}
}

435 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
M‘hodKNN
::
	$G‘Reg»ssiÚV®ues
()

437 ifĞ
fReg»ssiÚR‘uºV®
 == 0 )

438 
fReg»ssiÚR‘uºV®
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>;

440 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

445 cÚ¡ 
Ev’t
 *
evt
 = 
	`G‘Ev’t
();

446 cÚ¡ 
IÁ_t
 
nv¬
 = 
	`G‘NV¬ŸbËs
();

447 cÚ¡ 
UIÁ_t
 
kÂ
 = 
¡©ic_ÿ¡
<UIÁ_t>(
âkNN
);

448 
¡d
::
veùÜ
<> 
»g_vec
;

450 
kNN
::
V¬Vec
 
	`vvec
(
¡©ic_ÿ¡
<
UIÁ_t
>(
nv¬
), 0.0);

452 
IÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬
; ++ivar) {

453 
vvec
[
iv¬
] = 
evt
->
	`G‘V®ue
(ivar);

459 cÚ¡ 
kNN
::
Ev’t
 
	`ev’t_kÂ
(
vvec
, 
evt
->
	`G‘Weight
(), 3);

460 
fModuË
->
	`Fšd
(
ev’t_kÂ
, 
kÂ
 + 2);

462 cÚ¡ 
kNN
::
Li¡
 &
¾i¡
 = 
fModuË
->
	`G‘kNNLi¡
();

463 ià(
¾i¡
.
	`size
(è!ğ
kÂ
 + 2) {

464 
	`Log
(è<< 
kFATAL
 << "kNN„esuÉ†i¡ i em±y" << 
Endl
;

465  *
fReg»ssiÚR‘uºV®
;

469 
DoubË_t
 
weight_®l
 = 0;

470 
UIÁ_t
 
couÁ_®l
 = 0;

472 
kNN
::
Li¡
::
cÚ¡_™”©Ü
 
l™
 = 
¾i¡
.
	`begš
();†™ !ğ¾i¡.
	`’d
(); ++lit) {

475 cÚ¡ 
kNN
::
Node
<kNN::
Ev’t
> &
node
 = *(
l™
->
fœ¡
);

476 cÚ¡ 
kNN
::
V¬Vec
 &
tvec
 = 
node
.
	`G‘Ev’t
().
	`G‘T¬g‘s
();

477 cÚ¡ 
DoubË_t
 
weight
 = 
node
.
	`G‘Ev’t
().
	`G‘Weight
();

479 ià(
»g_vec
.
	`em±y
()) {

480 
»g_vec
ğ
kNN
::
	`V¬Vec
(
tvec
.
	`size
(), 0.0);

483 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
tvec
.
	`size
(); ++ivar) {

484 ià(
fU£Weight
è
»g_vec
[
iv¬
] +ğ
tvec
[iv¬]*
weight
;

485 
»g_vec
[
iv¬
] +ğ
tvec
[ivar];

488 ià(
fU£Weight
è
weight_®l
 +ğ
weight
;

489 ++
weight_®l
;

492 ++
couÁ_®l
;

494 ià(
couÁ_®l
 =ğ
kÂ
) {

500 ià(!(
weight_®l
 > 0.0)) {

501 
	`Log
(è<< 
kFATAL
 << "TÙ® weighˆsum i nÙ…os™ive: " << 
weight_®l
 << 
Endl
;

502  *
fReg»ssiÚR‘uºV®
;

505 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
»g_vec
.
	`size
(); ++ivar) {

506 
»g_vec
[
iv¬
] /ğ
weight_®l
;

510 
fReg»ssiÚR‘uºV®
->
	`š£¹
(fReg»ssiÚR‘uºV®->
	`begš
(), 
»g_vec
.begš(),„eg_vec.
	`’d
());

512  *
fReg»ssiÚR‘uºV®
;

513 
	}
}

518 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodKNN
::
	$C»©eRªkšg
()

521 
	}
}

526 
	gTMVA
::
M‘hodKNN
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const {

527 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

528 
	`gToŞs
().
	`AddA‰r
(
wght
,"NEv’ts",
fEv’t
.
	`size
());

529 ià(
fEv’t
.
	`size
()>0è
	`gToŞs
().
	`AddA‰r
(
wght
,"NV¬",fEv’t.
	`begš
()->
	`G‘NV¬
());

530 ià(
fEv’t
.
	`size
()>0è
	`gToŞs
().
	`AddA‰r
(
wght
,"NTgt",fEv’t.
	`begš
()->
	`G‘NTgt
());

532 
kNN
::
Ev’tVec
::
cÚ¡_™”©Ü
 
ev’t
 = 
fEv’t
.
	`begš
();ƒv’ˆ!ğfEv’t.
	`’d
(); ++event) {

534 
¡d
::
¡ršg¡»am
 
	`s
("");

535 
s
.
	`´ecisiÚ
( 16 );

536 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
ev’t
->
	`G‘NV¬
(); ++ivar) {

537 ià(
iv¬
>0è
s
 << " ";

538 
s
 << 
¡d
::
sc›Áific
 << 
ev’t
->
	`G‘V¬
(
iv¬
);

541 
UIÁ_t
 
™gt
 = 0; itgˆ< 
ev’t
->
	`G‘NTgt
(); ++itgt) {

542 
s
 << " " << 
¡d
::
sc›Áific
 << 
ev’t
->
	`G‘Tgt
(
™gt
);

545 * 
evt
 = 
	`gToŞs
().
	`AddChd
(
wght
, "Ev’t", 
s
.
	`¡r
().
	`c_¡r
());

546 
	`gToŞs
().
	`AddA‰r
(
evt
,"Ty³", 
ev’t
->
	`G‘Ty³
());

547 
	`gToŞs
().
	`AddA‰r
(
evt
,"Weight", 
ev’t
->
	`G‘Weight
());

549 
	}
}

553 
	gTMVA
::
M‘hodKNN
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 ) {

554 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

555 
UIÁ_t
 
nv¬
 = 0, 
Ágt
 = 0;

556 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NV¬", 
nv¬
 );

557 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NTgt", 
Ágt
 );

560 
ShÜt_t
 
	`evtTy³
(0);

561 
DoubË_t
 
	`evtWeight
(0);

563 
ch
) {

565 
kNN
::
V¬Vec
 
	`vvec
(
nv¬
, 0);

566 
kNN
::
V¬Vec
 
	`tvec
(
Ágt
, 0);

568 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Ty³", 
evtTy³
 );

569 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Weight", 
evtWeight
 );

570 
¡d
::
¡ršg¡»am
 
	`s
Ğ
	`gToŞs
().
	`G‘CÚ‹Á
(
ch
) );

572 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++)

573 
s
 >> 
vvec
[
iv¬
];

575 
UIÁ_t
 
™gt
=0; itgt<
Ágt
; itgt++)

576 
s
 >> 
tvec
[
™gt
];

578 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

580 
kNN
::
Ev’t
 
	`ev’t_kÂ
(
vvec
, 
evtWeight
, 
evtTy³
, 
tvec
);

581 
fEv’t
.
	`push_back
(
ev’t_kÂ
);

585 
	`MakeKNN
();

586 
	}
}

591 
	gTMVA
::
M‘hodKNN
::
	$R—dWeightsFromSŒ—m
(
¡d
::
i¡»am
& 
is
)

593 
	`Log
(è<< 
kINFO
 << "S¹šg R—dWeightsFromSŒ—m(¡d::i¡»am& isèfunùiÚ..." << 
Endl
;

595 ià(!
fEv’t
.
	`em±y
()) {

596 
	`Log
(è<< 
kINFO
 << "E¿sšg " << 
fEv’t
.
	`size
(è<< "…»viou¦y stÜedƒv’ts" << 
Endl
;

597 
fEv’t
.
	`ş—r
();

600 
UIÁ_t
 
nv¬
 = 0;

602 !
is
.
	`eof
()) {

603 
¡d
::
¡ršg
 
lše
;

604 
¡d
::
	`g‘lše
(
is
, 
lše
);

606 ià(
lše
.
	`em±y
(è||†še.
	`fšd
("#"è!ğ
¡d
::
¡ršg
::
Åos
) {

610 
UIÁ_t
 
couÁ
 = 0;

611 
¡d
::
¡ršg
::
size_ty³
 
pos
=0;

612  (
pos
=
lše
.
	`fšd
(',',pos)è!ğ
¡d
::
¡ršg
::
Åos
 ) { 
couÁ
++;…os++; }

614 ià(
nv¬
 == 0) {

615 
nv¬
 = 
couÁ
 - 2;

617 ià(
couÁ
 < 3 || 
nv¬
 != count - 2) {

618 
	`Log
(è<< 
kFATAL
 << "Missšg comm¨d–im‘”(s)" << 
Endl
;

622 
IÁ_t
 
ty³
 = -1;

623 
DoubË_t
 
weight
 = -1.0;

625 
kNN
::
V¬Vec
 
	`vvec
(
nv¬
, 0.0);

627 
UIÁ_t
 
vcouÁ
 = 0;

628 
¡d
::
¡ršg
::
size_ty³
 
´ev
 = 0;

630 
¡d
::
¡ršg
::
size_ty³
 
os
 = 0; ipo < 
lše
.
	`size
(); ++ipos) {

631 ià(
lše
[
os
] !ğ',' && ipo + 1 !ğlše.
	`size
()) {

635 ià(!(
os
 > 
´ev
)) {

636 
	`Log
(è<< 
kFATAL
 << "WrÚg sub¡ršg†im™s" << 
Endl
;

639 
¡d
::
¡ršg
 
v¡ršg
 = 
lše
.
	`sub¡r
(
´ev
, 
os
 -…rev);

640 ià(
os
 + 1 =ğ
lše
.
	`size
()) {

641 
v¡ršg
 = 
lše
.
	`sub¡r
(
´ev
, 
os
 -…rev + 1);

644 ià(
v¡ršg
.
	`em±y
()) {

645 
	`Log
(è<< 
kFATAL
 << "FaedØ·r£ sŒšg" << 
Endl
;

648 ià(
vcouÁ
 == 0) {

651 ià(
vcouÁ
 == 1) {

652 
ty³
 = 
¡d
::
	`©oi
(
v¡ršg
.
	`c_¡r
());

654 ià(
vcouÁ
 == 2) {

655 
weight
 = 
¡d
::
	`©of
(
v¡ršg
.
	`c_¡r
());

657 ià(
vcouÁ
 - 3 < 
vvec
.
	`size
()) {

658 
vvec
[
vcouÁ
 - 3] = 
¡d
::
	`©of
(
v¡ršg
.
	`c_¡r
());

661 
	`Log
(è<< 
kFATAL
 << "WrÚg v¬ŸbË couÁ" << 
Endl
;

664 
´ev
 = 
os
 + 1;

665 ++
vcouÁ
;

668 
fEv’t
.
	`push_back
(
kNN
::
	`Ev’t
(
vvec
, 
weight
, 
ty³
));

671 
	`Log
(è<< 
kINFO
 << "R—d " << 
fEv’t
.
	`size
(è<< "ƒv’t äomexˆfe" << 
Endl
;

674 
	`MakeKNN
();

675 
	}
}

680 
	gTMVA
::
M‘hodKNN
::
	$Wr™eWeightsToSŒ—m
(
TFe
 &
rf
) const

682 
	`Log
(è<< 
kINFO
 << "S¹šg Wr™eWeightsToSŒ—m(TF&rfèfunùiÚ..." << 
Endl
;

684 ià(
fEv’t
.
	`em±y
()) {

685 
	`Log
(è<< 
kWARNING
 << "M‘hodKNN cÚš nØev’t " << 
Endl
;

689 
kNN
::
Ev’t
 *
ev’t
 = 
Ãw
 kNN::
	`Ev’t
();

690 
TT»e
 *
Œ“
 = 
Ãw
 
	`TT»e
("knn", "eventree");

691 
Œ“
->
	`S‘DœeùÜy
(0);

692 
Œ“
->
	`B¿nch
("ev’t", "TMVA::kNN::Ev’t", &
ev’t
);

694 
DoubË_t
 
size
 = 0.0;

695 
kNN
::
Ev’tVec
::
cÚ¡_™”©Ü
 
™
 = 
fEv’t
.
	`begš
(); iˆ!ğfEv’t.
	`’d
(); ++it) {

696 (*
ev’t
èğ(*
™
);

697 
size
 +ğ
Œ“
->
	`Fl
();

701 
rf
.
	`Wr™eTObjeù
(
Œ“
, "knn", "Overwrite");

704 
size
 /= 1048576.0;

706 
	`Log
(è<< 
kINFO
 << "WrÙ" << 
size
 << "MB‡nd " << 
fEv’t
.
	`size
()

707 << "ƒv’t tØROOT fe" << 
Endl
;

709 
d–‘e
 
Œ“
;

710 
d–‘e
 
ev’t
;

711 
	}
}

716 
	gTMVA
::
M‘hodKNN
::
	$R—dWeightsFromSŒ—m
(
TFe
 &
rf
)

718 
	`Log
(è<< 
kINFO
 << "S¹šg R—dWeightsFromSŒ—m(TF&rfèfunùiÚ..." << 
Endl
;

720 ià(!
fEv’t
.
	`em±y
()) {

721 
	`Log
(è<< 
kINFO
 << "E¿sšg " << 
fEv’t
.
	`size
(è<< "…»viou¦y stÜedƒv’ts" << 
Endl
;

722 
fEv’t
.
	`ş—r
();

726 
TT»e
 *
Œ“
 = 
dyÇmic_ÿ¡
<TT»*>(
rf
.
	`G‘
("knn"));

727 ià(!
Œ“
) {

728 
	`Log
(è<< 
kFATAL
 << "FaedØfšd kÂ»e" << 
Endl
;

732 
kNN
::
Ev’t
 *
ev’t
 = 
Ãw
 kNN::
	`Ev’t
();

733 
Œ“
->
	`S‘B¿nchAdd»ss
("ev’t", &
ev’t
);

735 cÚ¡ 
IÁ_t
 
Ãv’t
 = 
Œ“
->
	`G‘EÁr›s
();

737 
DoubË_t
 
size
 = 0.0;

738 
IÁ_t
 
i
 = 0; i < 
Ãv’t
; ++i) {

739 
size
 +ğ
Œ“
->
	`G‘EÁry
(
i
);

740 
fEv’t
.
	`push_back
(*
ev’t
);

744 
size
 /= 1048576.0;

746 
	`Log
(è<< 
kINFO
 << "R—d " << 
size
 << "MB‡nd " << 
fEv’t
.
	`size
()

747 << "ƒv’t äom ROOT fe" << 
Endl
;

749 
d–‘e
 
ev’t
;

752 
	`MakeKNN
();

753 
	}
}

758 
	gTMVA
::
M‘hodKNN
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

760 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

761 
fout
 << "};" << 
¡d
::
’dl
;

762 
	}
}

770 
	gTMVA
::
M‘hodKNN
::
	$G‘H–pMes§ge
() const

772 
	`Log
(è<< 
Endl
;

773 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

774 
	`Log
(è<< 
Endl
;

775 
	`Log
(è<< "Thk-Ã¬e¡‚eighbÜ (k-NNè®gÜ™hm i ¨muÉi-dim’siÚ® cÏssifiÿtiÚ" << 
Endl


776 << "ªd„eg»ssiÚ‡lgÜ™hm. Sim¬lyØÙh” TMVA‡lgÜ™hms, k-NN u£ ¨£ˆof" << 
Endl


777 << "Œaššgƒv’t fÜ which‡ cÏssifiÿtiÚ c©egÜy/»g»ssiÚ¬g‘ i known. " << 
Endl


778 << "Thk-NN m‘hod com·» ¨‹¡ƒv’ˆtØ®ÈŒaššgƒv’t usšg‡ di¡ªû " << 
Endl


779 << "funùiÚ, which i ª Euşid—Àdi¡ªû iÀ¨¥aû defšed byhšpuˆv¬ŸbËs. "<< 
Endl


780 << "Thk-NN m‘hod,‡ im¶em’‹d iÀTMVA, u£ ¨kd-Œ“‡lgÜ™hmØ³rfÜm‡" << 
Endl


781 << "quick s—rch fÜhkƒv’t w™h shÜ‹¡ di¡ªûØth‹¡ƒv’t. Thm‘hod" << 
Endl


782 << "»tuº ¨äaùiÚ oàsigÇÈev’t amÚghk‚eighbÜs. Iˆi »comm’ded" << 
Endl


783 << "th©‡ hi¡og¿m which stÜe thk-NN decisiÚ v¬ŸbË i bšÃd w™h k+1 bšs" << 
Endl


784 << "b‘w“À0‡nd 1." << 
Endl
;

786 
	`Log
(è<< 
Endl
;

787 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bold") << "--- Performanceuning via configuration options: "

788 << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
;

789 
	`Log
(è<< 
Endl
;

790 
	`Log
(è<< "Thk-NN m‘hodƒ¡im©e ¨d’s™y oàsigÇÈªd backgroundƒv’t š‡ "<< 
Endl


791 << "ÃighbÜhood‡roundh‹¡ƒv’t. Thm‘hod‡ssume th©hd’s™y oàth" << 
Endl


792 << "sigÇÈªd backgroundƒv’t i unifÜm‡nd cÚ¡ªˆw™hšhÃighbÜhood. " << 
Endl


793 << "k i ª‡dju¡abË…¬am‘”‡nd iˆd‘”mše ª‡v”agsizoàth" << 
Endl


794 << "ÃighbÜhood. Sm®Èk v®ue Öes thª 10è¬£ns™ivtØ¡©i¡iÿÈ" << 
Endl


795 << "æuùu©iÚ ªd†¬g(g»©”hª 100èv®ue mighˆnÙ suffic›Ály c­tu» " << 
Endl


796 << "loÿÈdifã»nû b‘w“Àev’t šhŒaššg s‘. Th¥“d oàthk-NN" << 
Endl


797 << "m‘hod‡lsØšü—£ w™h†¬g” v®ue oàk. " << 
Endl
;

798 
	`Log
(è<< 
Endl
;

799 
	`Log
(è<< "Thk-NN m‘hod‡ssign equ® weighˆtØ®Èšpuˆv¬ŸbËs. Difã»Á sÿË " << 
Endl


800 << "amÚghšpuˆv¬ŸbË i com³n§‹d usšg SÿËF¿ø·¿m‘”:hšpuˆ" << 
Endl


801 << "v¬ŸbË ¬sÿËd sØth©hwidth fÜ c’Œ® SÿËF¿c*100%ƒv’t ¬" << 
Endl


802 << "equ®‡mÚg‡Îhšpuˆv¬ŸbËs." << 
Endl
;

804 
	`Log
(è<< 
Endl
;

805 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bold") << "--- Additional configuration options: "

806 << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
;

807 
	`Log
(è<< 
Endl
;

808 
	`Log
(è<< "Thm‘hod inşue ª o±iÚØu£‡ GaussŸÀk”ÃÈtØsmoÙh ouˆthk-NN" << 
Endl


809 << "»¥Ú£. Thk”ÃÈ»-weight ev’t usšg‡ di¡ªûØth‹¡ƒv’t." << 
Endl
;

810 
	}
}

815 
DoubË_t
 
	gTMVA
::
M‘hodKNN
::
	$PŞnK”Ãl
(cÚ¡ 
DoubË_t
 
v®ue
) const

817 cÚ¡ 
DoubË_t
 
av®ue
 = 
TM©h
::
	`Abs
(
v®ue
);

819 ià(!(
av®ue
 < 1.0)) {

823 cÚ¡ 
DoubË_t
 
´od
 = 1.0 - 
av®ue
 *‡value *‡value;

825  (
´od
 *…rod *…rod);

826 
	}
}

831 
DoubË_t
 
	gTMVA
::
M‘hodKNN
::
GausK”Ãl
(cÚ¡ 
kNN
::
Ev’t
 &
ev’t_kÂ
,

832 cÚ¡ 
kNN
::
Ev’t
 &
ev’t
, cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> &
svec
) const

834 ià(
ev’t_kÂ
.
G‘NV¬
(è!ğ
ev’t
.G‘NV¬(è||ƒv’t_kÂ.G‘NV¬(è!ğ
svec
.
size
()) {

835 
Log
(è<< 
kFATAL
 << "Mism©ched veùÜ š GaussŸÀk”ÃÈfunùiÚ" << 
Endl
;

842 
	gsum_exp
 = 0.0;

844 
	giv¬
 = 0; iv¬ < 
	gev’t_kÂ
.
G‘NV¬
(); ++ivar) {

846 cÚ¡ 
DoubË_t
 
	gdiff_
 = 
ev’t
.
G‘V¬
(
iv¬
è- 
ev’t_kÂ
.GetVar(ivar);

847 cÚ¡ 
DoubË_t
 
	gsigm_
 = 
svec
[
iv¬
];

848 ià(!(
	gsigm_
 > 0.0)) {

849 
Log
(è<< 
	gkFATAL
 << "Bad sigm¨v®uğ" << 
	gsigm_
 << 
	gEndl
;

853 
	gsum_exp
 +ğ
diff_
*diff_/(2.0*
sigm_
*sigm_);

861  
	g¡d
::
exp
(-
sum_exp
);

869 
DoubË_t
 
	gTMVA
::
M‘hodKNN
::
	$g‘K”ÃlRadius
(cÚ¡ 
kNN
::
Li¡
 &
¾i¡
) const

871 
DoubË_t
 
k¿dius
 = -1.0;

872 
UIÁ_t
 
kcouÁ
 = 0;

873 cÚ¡ 
UIÁ_t
 
kÂ
 = 
¡©ic_ÿ¡
<UIÁ_t>(
âkNN
);

875 
kNN
::
Li¡
::
cÚ¡_™”©Ü
 
l™
 = 
¾i¡
.
	`begš
();†™ !ğ¾i¡.
	`’d
(); ++lit)

877 ià(!(
l™
->
£cÚd
 > 0.0)) ;

879 ià(
k¿dius
 < 
l™
->
£cÚd
 || kradius < 0.0) kradius =†it->second;

881 ++
kcouÁ
;

882 ià(
kcouÁ
 >ğ
kÂ
) ;

885  
k¿dius
;

886 
	}
}

893 cÚ¡ 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
M‘hodKNN
::
	$g‘RMS
(cÚ¡ 
kNN
::
Li¡
 &
¾i¡
, cÚ¡ kNN::
Ev’t
 &
ev’t_kÂ
) const

895 
¡d
::
veùÜ
<
DoubË_t
> 
rvec
;

896 
UIÁ_t
 
kcouÁ
 = 0;

897 cÚ¡ 
UIÁ_t
 
kÂ
 = 
¡©ic_ÿ¡
<UIÁ_t>(
âkNN
);

899 
kNN
::
Li¡
::
cÚ¡_™”©Ü
 
l™
 = 
¾i¡
.
	`begš
();†™ !ğ¾i¡.
	`’d
(); ++lit)

901 ià(!(
l™
->
£cÚd
 > 0.0)) ;

903 cÚ¡ 
kNN
::
Node
<kNN::
Ev’t
> *
node_
 = 
l™
 -> 
fœ¡
;

904 cÚ¡ 
kNN
::
Ev’t
 &
ev’t_
 = 
node_
-> 
	`G‘Ev’t
();

906 ià(
rvec
.
	`em±y
()) {

907 
rvec
.
	`š£¹
Ôvec.
	`’d
(), 
ev’t_
.
	`G‘NV¬
(), 0.0);

909 ià(
rvec
.
	`size
(è!ğ
ev’t_
.
	`G‘NV¬
()) {

910 
	`Log
(è<< 
kFATAL
 << "WrÚg‚umb” oàv¬ŸbËs, should‚ev” h­³n!" << 
Endl
;

911 
rvec
.
	`ş—r
();

912  
rvec
;

915 
iv¬
 = 0; iv¬ < 
ev’t_
.
	`G‘NV¬
(); ++ivar) {

916 cÚ¡ 
DoubË_t
 
diff_
 = 
ev’t_
.
	`G‘V¬
(
iv¬
è- 
ev’t_kÂ
.GetVar(ivar);

917 
rvec
[
iv¬
] +ğ
diff_
*diff_;

920 ++
kcouÁ
;

921 ià(
kcouÁ
 >ğ
kÂ
) ;

924 ià(
kcouÁ
 < 1) {

925 
	`Log
(è<< 
kFATAL
 << "Badƒv’ˆkcouÁ = " << 
kcouÁ
 << 
Endl
;

926 
rvec
.
	`ş—r
();

927  
rvec
;

930 
iv¬
 = 0; iv¬ < 
rvec
.
	`size
(); ++ivar) {

931 ià(!(
rvec
[
iv¬
] > 0.0)) {

932 
	`Log
(è<< 
kFATAL
 << "Bad RMS v®uğ" << 
rvec
[
iv¬
] << 
Endl
;

933 
rvec
.
	`ş—r
();

934  
rvec
;

937 
rvec
[
iv¬
] = 
¡d
::
	`abs
(
fSigmaFaù
)*¡d::
	`sq¹
Ôvec[iv¬]/
kcouÁ
);

940  
rvec
;

941 
	}
}

945 
DoubË_t
 
	gTMVA
::
M‘hodKNN
::
	$g‘LDAV®ue
(cÚ¡ 
kNN
::
Li¡
 &
¾i¡
, cÚ¡ kNN::
Ev’t
 &
ev’t_kÂ
)

947 
LDAEv’ts
 
sig_vec
, 
bac_vec
;

949 
kNN
::
Li¡
::
cÚ¡_™”©Ü
 
l™
 = 
¾i¡
.
	`begš
();†™ !ğ¾i¡.
	`’d
(); ++lit) {

952 cÚ¡ 
kNN
::
Node
<kNN::
Ev’t
> &
node
 = *(
l™
->
fœ¡
);

953 cÚ¡ 
kNN
::
V¬Vec
 &
tvec
 = 
node
.
	`G‘Ev’t
().
	`G‘V¬s
();

955 ià(
node
.
	`G‘Ev’t
().
	`G‘Ty³
() == 1) {

956 
sig_vec
.
	`push_back
(
tvec
);

958 ià(
node
.
	`G‘Ev’t
().
	`G‘Ty³
() == 2) {

959 
bac_vec
.
	`push_back
(
tvec
);

962 
	`Log
(è<< 
kFATAL
 << "UnknowÀty³ fÜ¿ššgƒv’t" << 
Endl
;

966 
fLDA
.
	`In™Ÿlize
(
sig_vec
, 
bac_vec
);

968  
fLDA
.
	`G‘Prob
(
ev’t_kÂ
.
	`G‘V¬s
(), 1);

969 
	}
}

	@src/MethodLD.cxx

38 
	~"TMVA/M‘hodLD.h
"

40 
	~"TMVA/CÏssif›rFaùÜy.h
"

41 
	~"TMVA/CÚfigu¿bË.h
"

42 
	~"TMVA/D©aS‘.h
"

43 
	~"TMVA/D©aS‘Info.h
"

44 
	~"TMVA/IM‘hod.h
"

45 
	~"TMVA/M‘hodBa£.h
"

46 
	~"TMVA/MsgLogg”.h
"

47 
	~"TMVA/PDF.h
"

48 
	~"TMVA/Rªkšg.h
"

49 
	~"TMVA/ToŞs.h
"

50 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

51 
	~"TMVA/Ty³s.h
"

52 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

54 
	~"Rio¡»am.h
"

55 
	~"TM©h.h
"

56 
	~"TM©rix.h
"

57 
	~"TM©rixD.h
"

58 
	~"TLi¡.h
"

60 
	~<iomª
>

62 
usšg
 
	g¡d
::
veùÜ
;

64 
	$REGISTER_METHOD
(
LD
)

66 
	`CÏssImp
(
TMVA
::
M‘hodLD
);

71 
TMVA
::
M‘hodLD
::
	$M‘hodLD
ĞcÚ¡ 
TSŒšg
& 
jobName
,

72 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

73 
D©aS‘Info
& 
dsi
,

74 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

75 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kLD
, 
m‘hodT™Ë
, 
dsi
, 
theO±iÚ
),

76 
	`fNRegOut
 ( 0 ),

77 
	`fSumM©x
 ( 0 ),

78 
	`fSumV®M©x
( 0 ),

79 
	`fCÛffM©x
 ( 0 ),

80 
	$fLDCÛff
 ( 0 )

82 
	}
}

87 
	gTMVA
::
M‘hodLD
::
	$M‘hodLD
Ğ
D©aS‘Info
& 
theD©a
, cÚ¡ 
TSŒšg
& 
theWeightFe
)

88 : 
	`M‘hodBa£
Ğ
Ty³s
::
kLD
, 
theD©a
, 
theWeightFe
),

89 
	`fNRegOut
 ( 0 ),

90 
	`fSumM©x
 ( 0 ),

91 
	`fSumV®M©x
( 0 ),

92 
	`fCÛffM©x
 ( 0 ),

93 
	$fLDCÛff
 ( 0 )

95 
	}
}

100 
	gTMVA
::
M‘hodLD
::
	$In™
( )

102 if(
	`D©aInfo
().
	`G‘NT¬g‘s
()!=0è
fNRegOut
 = DataInfo().GetNTargets();

103 
fNRegOut
 = 1;

105 
fLDCÛff
 = 
Ãw
 
veùÜ
< veùÜ< 
DoubË_t
 >* >(
fNRegOut
);

106 
IÁ_t
 
iout
 = 0; iout<
fNRegOut
; iout++){

107 (*
fLDCÛff
)[
iout
] = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
	`G‘Nv¬
()+1 );

111 
	`S‘SigÇlReã»nûCut
( 0.0 );

112 
	}
}

117 
	gTMVA
::
M‘hodLD
::~
	$M‘hodLD
( )

119 ià(
fSumM©x
è{ 
d–‘e
 fSumMatx; fSumMatx = 0; }

120 ià(
fSumV®M©x
è{ 
d–‘e
 fSumValMatx; fSumValMatx = 0; }

121 ià(
fCÛffM©x
è{ 
d–‘e
 fCoeffMatx; fCoeffMatx = 0; }

122 ià(
fLDCÛff
) {

123 
veùÜ
< veùÜ< 
DoubË_t
 >* >::
™”©Ü
 
vi
=
fLDCÛff
->
	`begš
(); vi!=fLDCÛff->
	`’d
(); vi++){

124 ià(*
vi
è{ 
d–‘e
 *vi; *vi = 0; }

126 
d–‘e
 
fLDCÛff
; fLDCoeff = 0;

128 
	}
}

133 
BoŞ_t
 
	gTMVA
::
M‘hodLD
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UIÁ_ˆ
numb”T¬g‘s
 )

135 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

136 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 && 
numb”T¬g‘s
 == 1) {

137 
	`Log
(è<< "»g»ssiÚ w™h " << 
numb”T¬g‘s
 << "argets.";

138  
kTRUE
;

140  
kFALSE
;

141 
	}
}

147 
	gTMVA
::
M‘hodLD
::
	$T¿š
( )

149 
	`G‘Sum
();

152 
	`G‘SumV®
();

155 
	`G‘LDCÛff
();

158 
	`PrštCÛffic›Ás
();

160 
	`Ex™FromT¿ššg
();

161 
	}
}

166 
DoubË_t
 
	gTMVA
::
M‘hodLD
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

168 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

170 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
èfReg»ssiÚR‘uºV® = 
Ãw
 
veùÜ
< 
Flßt_t
 >();

171 
fReg»ssiÚR‘uºV®
->
	`»size
Ğ
fNRegOut
 );

173 
IÁ_t
 
iout
 = 0; iout<
fNRegOut
; iout++) {

174 (*
fReg»ssiÚR‘uºV®
)[
iout
] = (*(*
fLDCÛff
)[iout])[0] ;

176 
icÛff
=0;

177 
¡d
::
veùÜ
<
Flßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
ev
->
	`G‘V®ues
().
	`begš
();™!óv->G‘V®ues().
	`’d
();++it){

178 (*
fReg»ssiÚR‘uºV®
)[
iout
] +ğ(*(*
fLDCÛff
)[iout])[++
icÛff
] * (*
™
);

183 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

185  (*
fReg»ssiÚR‘uºV®
)[0];

186 
	}
}

191 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
M‘hodLD
::
	$G‘Reg»ssiÚV®ues
()

193 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

195 ià(
fReg»ssiÚR‘uºV®
 =ğ
NULL
èfReg»ssiÚR‘uºV® = 
Ãw
 
veùÜ
< 
Flßt_t
 >();

196 
fReg»ssiÚR‘uºV®
->
	`»size
Ğ
fNRegOut
 );

198 
IÁ_t
 
iout
 = 0; iout<
fNRegOut
; iout++) {

199 (*
fReg»ssiÚR‘uºV®
)[
iout
] = (*(*
fLDCÛff
)[iout])[0] ;

201 
icÛff
 = 0;

202 
¡d
::
veùÜ
<
Flßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
ev
->
	`G‘V®ues
().
	`begš
();™!óv->G‘V®ues().
	`’d
();++it){

203 (*
fReg»ssiÚR‘uºV®
)[
iout
] +ğ(*(*
fLDCÛff
)[iout])[++
icÛff
] * (*
™
);

208 
Ev’t
* 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

209 
IÁ_t
 
iout
 = 0; iout<
fNRegOut
; iout++è
evT
->
	`S‘T¬g‘
(iout,(*
fReg»ssiÚR‘uºV®
)[iout]);

211 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

212 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

213 
IÁ_t
 
iout
 = 0; iout<
fNRegOut
; iout++è
fReg»ssiÚR‘uºV®
->
	`push_back
(
evT2
->
	`G‘T¬g‘
(iout));

215 
d–‘e
 
evT
;

216  (*
fReg»ssiÚR‘uºV®
);

217 
	}
}

222 
	gTMVA
::
M‘hodLD
::
	$In™M©riûs
( )

224 
fSumM©x
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
()+1, GetNvar()+1 );

225 
fSumV®M©x
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
()+1, 
fNRegOut
 );

226 
fCÛffM©x
 = 
Ãw
 
	`TM©rixD
Ğ
	`G‘Nv¬
()+1, 
fNRegOut
 );

228 
	}
}

234 
	gTMVA
::
M‘hodLD
::
	$G‘Sum
( )

236 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

238 
UIÁ_t
 
iv¬
 = 0; iv¬<=
nv¬
; ivar++){

239 
UIÁ_t
 
jv¬
 = 0; jv¬<=
nv¬
; jv¬++è(*
fSumM©x
)Ğ
iv¬
, jvar ) = 0;

243 
LÚg64_t
 
Ãvts
 = 
	`D©a
()->
	`G‘NEv’ts
();

244 
IÁ_t
 
›vt
=0; ievt<
Ãvts
; ievt++) {

245 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
›vt
);

246 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

248 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
weight
 <= 0) ;

251 (*
fSumM©x
)Ğ0, 0 ) +ğ
weight
;

254 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

255 (*
fSumM©x
)Ğ
iv¬
+1, 0 ) +ğ
ev
->
	`G‘V®ue
Ğiv¬ ) * 
weight
;

256 (*
fSumM©x
)Ğ0, 
iv¬
+1 ) +ğ
ev
->
	`G‘V®ue
Ğiv¬ ) * 
weight
;

260 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++){

261 
UIÁ_t
 
jv¬
=0; jv¬<
nv¬
; jvar++){

262 (*
fSumM©x
)Ğ
iv¬
+1, 
jv¬
+1 ) +ğ
ev
->
	`G‘V®ue
Ğiv¬ ) *ƒv->G‘V®ueĞjv¬ ) * 
weight
;

266 
	}
}

271 
	gTMVA
::
M‘hodLD
::
	$G‘SumV®
( )

273 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

275 
IÁ_t
 
iv¬
 = 0; iv¬<
fNRegOut
; ivar++){

276 
UIÁ_t
 
jv¬
 = 0; jv¬<=
nv¬
; jvar++){

277 (*
fSumV®M©x
)(
jv¬
,
iv¬
) = 0;

282 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

285 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

286 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

289 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
weight
 <= 0) ;

291 
IÁ_t
 
iv¬
=0; iv¬<
fNRegOut
; ivar++) {

293 
DoubË_t
 
v®
 = 
weight
;

295 ià(!
	`DoReg»ssiÚ
()){

296 
v®
 *ğ
	`D©aInfo
().
	`IsSigÇl
(
ev
);

298 
v®
 *ğ
ev
->
	`G‘T¬g‘
Ğ
iv¬
 );

300 (*
fSumV®M©x
)Ğ0,
iv¬
 ) +ğ
v®
;

301 
UIÁ_t
 
jv¬
=0; jv¬<
nv¬
; jvar++) {

302 (*
fSumV®M©x
)(
jv¬
+1,
iv¬
 ) +ğ
ev
->
	`G‘V®ue
(jv¬è* 
v®
;

306 
	}
}

311 
	gTMVA
::
M‘hodLD
::
	$G‘LDCÛff
( )

313 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

315 
IÁ_t
 
iv¬
 = 0; iv¬<
fNRegOut
; ivar++){

316 
TM©rixD
 
	`švSum
Ğ*
fSumM©x
 );

317 iàĞ
TM©h
::
	`Abs
(
švSum
.
	`D‘”mšªt
()) < 10E-24 ) {

318 
	`Log
(è<< 
kWARNING
 << "<GetCoeff> matrix is‡lmost singular with determinant="

319 << 
TM©h
::
	`Abs
(
švSum
.
	`D‘”mšªt
())

321 << 
Endl
;

323 iàĞ
TM©h
::
	`Abs
(
švSum
.
	`D‘”mšªt
()) < 10E-120 ) {

324 
	`Log
(è<< 
kFATAL
 << "<GetCoeff> matrix is singular with determinant="

325 << 
TM©h
::
	`Abs
(
švSum
.
	`D‘”mšªt
())

327 << 
Endl
;

329 
švSum
.
	`Inv”t
();

331 
fCÛffM©x
 = 
Ãw
 
	`TM©rixD
Ğ
švSum
 * (*
fSumV®M©x
));

332 
UIÁ_t
 
jv¬
 = 0; jv¬<
nv¬
+1; jvar++) {

333 (*(*
fLDCÛff
)[
iv¬
])[
jv¬
] = (*
fCÛffM©x
)(jvar, ivar );

335 ià(!
	`DoReg»ssiÚ
()) {

336 (*(*
fLDCÛff
)[
iv¬
])[0]=0.0;

337 
UIÁ_t
 
jv¬
 = 1; jv¬<
nv¬
+1; jvar++){

338 (*(*
fLDCÛff
)[
iv¬
])[0]+=(*
fCÛffM©x
)(
jv¬
,iv¬)*(*
fSumM©x
)(0,jvar)/(*fSumMatx)( 0, 0 );

340 (*(*
fLDCÛff
)[
iv¬
])[0]/=-2.0;

344 
	}
}

349 
	gTMVA
::
M‘hodLD
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

351 
IÁ_t
 
iout
=0; iout<
fNRegOut
; iout++){

352 
UIÁ_t
 
icÛff
=0; icÛff<
	`G‘Nv¬
()+1; icoeff++){

353 
i¡r
 >> (*(*
fLDCÛff
)[
iout
])[
icÛff
];

356 
	}
}

362 
	gTMVA
::
M‘hodLD
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

364 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

365 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NOut", 
fNRegOut
 );

366 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "NCÛff", 
	`G‘Nv¬
()+1 );

367 
IÁ_t
 
iout
=0; iout<
fNRegOut
; iout++) {

368 
UIÁ_t
 
icÛff
=0; icÛff<
	`G‘Nv¬
()+1; icoeff++) {

369 * 
cÛffxml
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Coefficient" );

370 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "IndexOut", 
iout
 );

371 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "IndexCÛff", 
icÛff
 );

372 
	`gToŞs
().
	`AddA‰r
Ğ
cÛffxml
, "V®ue", (*(*
fLDCÛff
)[
iout
])[
icÛff
] );

375 
	}
}

380 
	gTMVA
::
M‘hodLD
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

382 
UIÁ_t
 
ncÛff
;

383 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NOut", 
fNRegOut
 );

384 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NCÛff", 
ncÛff
 );

387 ià(
ncÛff
 !ğ
	`G‘Nv¬
()+1è
	`Log
(è<< 
kFATAL
 << "Mismatch in‚umber of output variables/coefficients: "

388 << 
ncÛff
 << " !ğ" << 
	`G‘Nv¬
()+1 << 
Endl
;

391 ià(
fLDCÛff
) {

392 
veùÜ
< veùÜ< 
DoubË_t
 >* >::
™”©Ü
 
vi
=
fLDCÛff
->
	`begš
(); vi!=fLDCÛff->
	`’d
(); vi++){

393 ià(*
vi
è{ 
d–‘e
 *vi; *vi = 0; }

395 
d–‘e
 
fLDCÛff
; fLDCoeff = 0;

397 
fLDCÛff
 = 
Ãw
 
veùÜ
< veùÜ< 
DoubË_t
 >* >(
fNRegOut
);

398 
IÁ_t
 
iv¬
 = 0; iv¬<
fNRegOut
; iv¬++è(*
fLDCÛff
)[iv¬] = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
ncÛff
 );

400 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

401 
DoubË_t
 
cÛff
;

402 
IÁ_t
 
iout
, 
icÛff
;

403 
ch
) {

404 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "IndexOut", 
iout
 );

405 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "IndexCÛff", 
icÛff
 );

406 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "V®ue", 
cÛff
 );

408 (*(*
fLDCÛff
)[
iout
])[
icÛff
] = 
cÛff
;

410 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

412 
	}
}

417 
	gTMVA
::
M‘hodLD
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

419 
fout
 << " std::veùÜ<doubË> fLDCÛffic›Ás;" << 
¡d
::
’dl
;

420 
fout
 << "};" << 
¡d
::
’dl
;

421 
fout
 << "" << 
¡d
::
’dl
;

422 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

423 
fout
 << "{" << 
¡d
::
’dl
;

424 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
()+1; ivar++) {

425 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

426 
fout
 << " fLDCoefficients.push_back( "

427 << 
¡d
::
	`£»cisiÚ
(12è<< (*(*
fLDCÛff
)[0])[
iv¬
]

428 << 
¡d
::
	`£»cisiÚ
(
dp
è<< " );" << std::
’dl
;

430 
fout
 << 
¡d
::
’dl
;

431 
fout
 << " // sª™y check" << 
¡d
::
’dl
;

432 
fout
 << " ià(fLDCÛffic›Ás.size(è!ğfNv¬s+1è{" << 
¡d
::
’dl
;

433 
fout
 << " std::couˆ<< \"ProbËm iÀşas \\\"\" << fCÏssNam<< \"\\\"::In™Ÿlize: mism©ch iÀnumb” oàšpuˆv®ues\"" << 
¡d
::
’dl
;

434 
fout
 << " << fLDCÛffic›Ás.size(è<< \" !ğ\" << fNv¬s+1 << std::’dl;" << 
¡d
::
’dl
;

435 
fout
 << " fStusIsCËª = f®£;" << 
¡d
::
’dl
;

436 
fout
 << " } " << 
¡d
::
’dl
;

437 
fout
 << "}" << 
¡d
::
’dl
;

438 
fout
 << 
¡d
::
’dl
;

439 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

440 
fout
 << "{" << 
¡d
::
’dl
;

441 
fout
 << " doubË„‘v® = fLDCÛffic›Ás[0];" << 
¡d
::
’dl
;

442 
fout
 << " fÜ (size_ˆiv¬ = 1; iv¬ < fNv¬s+1; iv¬++è{" << 
¡d
::
’dl
;

443 
fout
 << "„‘v® +ğfLDCÛffic›Ás[iv¬]*šputV®ues[iv¬-1];" << 
¡d
::
’dl
;

444 
fout
 << " }" << 
¡d
::
’dl
;

445 
fout
 << 
¡d
::
’dl
;

446 
fout
 << "„‘uº„‘v®;" << 
¡d
::
’dl
;

447 
fout
 << "}" << 
¡d
::
’dl
;

448 
fout
 << 
¡d
::
’dl
;

449 
fout
 << "// CËª up" << 
¡d
::
’dl
;

450 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

451 
fout
 << "{" << 
¡d
::
’dl
;

452 
fout
 << " // cË¬ cÛffic›Ás" << 
¡d
::
’dl
;

453 
fout
 << " fLDCÛffic›Ás.ş—r(); " << 
¡d
::
’dl
;

454 
fout
 << "}" << 
¡d
::
’dl
;

455 
	}
}

459 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodLD
::
	$C»©eRªkšg
()

462 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Discr.…ower" );

464 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

465 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`G‘IÅutLab–
(
iv¬
), 
TM©h
::
	`Abs
((* (*
fLDCÛff
)[0])[ivar+1] )) );

468  
fRªkšg
;

469 
	}
}

474 
	gTMVA
::
M‘hodLD
::
	$Deş¬eO±iÚs
()

476 
	`AddP»DefV®
(
	`TSŒšg
("LD"));

477 
	}
}

482 
	gTMVA
::
M‘hodLD
::
	$ProûssO±iÚs
()

484 ià(
	`HasT¿ššgT»e
()è
	`In™M©riûs
();

485 
	}
}

490 
	gTMVA
::
M‘hodLD
::
	$PrštCÛffic›Ás
( )

492 
	`Log
(è<< 
kHEADER
 << "ResuÉ fÜ LD cÛffic›Ás:" << 
Endl
;

494 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() != 0) {

495 
	`Log
(è<< 
kINFO
 << "NOTE: ThcÛffic›Á mu¡ b­¶›dØTRANFORMED v¬ŸbËs" << 
Endl
;

496 
	`Log
(è<< 
kINFO
 << " Li¡ oàthŒªsfÜm©iÚ: " << 
Endl
;

497 
TLi¡I‹r
 
	`ŒIt
(&
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
());

498 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
() ) {

499 
	`Log
(è<< 
kINFO
 << " -- " << 
Œf
->
	`G‘Name
(è<< 
Endl
;

502 
¡d
::
veùÜ
<
TSŒšg
> 
v¬s
;

503 
¡d
::
veùÜ
<
DoubË_t
> 
cÛffs
;

504 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

505 
v¬s
 .
	`push_back
Ğ
	`G‘IÅutLab–
(
iv¬
) );

506 
cÛffs
.
	`push_back
Ğ(* (*
fLDCÛff
)[0])[
iv¬
+1] );

508 
v¬s
 .
	`push_back
( "(offset)" );

509 
cÛffs
.
	`push_back
((* (*
fLDCÛff
)[0])[0] );

510 
TMVA
::
	`gToŞs
().
	`FÜm©‹dOuut
Ğ
cÛffs
, 
v¬s
, "V¬ŸbË" , "CÛffic›Á", 
	`Log
() );

511 ià(
	`IsNÜm®i£d
()) {

512 
	`Log
(è<< 
kINFO
 << "NOTE: You havcho£ÀtØu£h\"NÜm®i£\" bookšg o±iÚ. H’û,he" << 
Endl
;

513 
	`Log
(è<< 
kINFO
 << " cÛffic›Á mu¡ b­¶›dØNORMALISED ('èv¬ŸbË a fŞlows:" << 
Endl
;

514 
IÁ_t
 
maxL
 = 0;

515 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++èià(
	`G‘IÅutLab–
(iv¬).
	`L’gth
(è> 
maxL
) maxL = GetInputLabel(ivar).Length();

518 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

519 
	`Log
(è<< 
kINFO


520 << 
¡d
::
	`£tw
(
maxL
+9è<< 
	`TSŒšg
("["è+ 
	`G‘IÅutLab–
(
iv¬
) + "]' = 2*("

521 << 
¡d
::
	`£tw
(
maxL
+2è<< 
	`TSŒšg
("["è+ 
	`G‘IÅutLab–
(
iv¬
) + "]"

522 << 
¡d
::
	`£tw
(3è<< (
	`G‘Xmš
(
iv¬
) > 0 ? " - " : " + ")

523 << 
¡d
::
	`£tw
(6è<< 
TM©h
::
	`Abs
(
	`G‘Xmš
(
iv¬
)) << std::setw(3) << ")/"

524 << 
¡d
::
	`£tw
(6è<< (
	`G‘Xmax
(
iv¬
è- 
	`G‘Xmš
(ivar) )

525 << 
¡d
::
	`£tw
(3) << " - 1"

526 << 
Endl
;

528 
	`Log
(è<< 
kINFO
 << "ThTMVA R—d” wÈ´İ”ly‡ccouÁ fÜhi nÜm®i§tiÚ, buˆiàthe" << 
Endl
;

529 
	`Log
(è<< 
kINFO
 << "LD cÏssif›¸i ­¶›d outsidthR—d”,hŒªsfÜm©iÚ mu¡ be" << 
Endl
;

530 
	`Log
(è<< 
kINFO
 << "im¶em’‹d -- o¸th\"NÜm®i£\" o±iÚ i »moved‡nd LD„‘¿šed." << 
Endl
;

531 
	`Log
(è<< 
kINFO
 << 
Endl
;

533 
	}
}

541 
	gTMVA
::
M‘hodLD
::
	$G‘H–pMes§ge
() const

543 
	`Log
(è<< 
Endl
;

544 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

545 
	`Log
(è<< 
Endl
;

546 
	`Log
(è<< "Lš—¸disüimšªt £Ëùƒv’t by di¡šguishšghm—À" << 
Endl
;

547 
	`Log
(è<< "v®ue oàthsigÇÈªd background di¡ributiÚ š‡¿ns- " << 
Endl
;

548 
	`Log
(è<< "fÜmed v¬ŸbË s·û wh”lš—¸cÜ»ÏtiÚ ¬»moved." << 
Endl
;

549 
	`Log
(è<< "ThLD im¶em’tiÚ h”i equiv®’ˆtØth\"Fish”\" disüimšªt" << 
Endl
;

550 
	`Log
(è<< "fÜ cÏssifiÿtiÚ, buˆ®sØ´ovide lš—¸»g»ssiÚ." << 
Endl
;

551 
	`Log
(è<< 
Endl
;

552 
	`Log
(è<< " (MÜ´eci£ly:h\"lš—¸disüimš©Ü\" d‘”mšes" << 
Endl
;

553 
	`Log
(è<< "‡Àaxi šh(cÜ»Ï‹dèhy³r¥aû oàthšpuˆ" << 
Endl
;

554 
	`Log
(è<< " v¬ŸbË suchh©, wh’…rojeùšghouuˆşas£ " << 
Endl
;

555 
	`Log
(è<< " (sigÇÈªd backgroundèupÚhi axis,hey‡»…ushed " << 
Endl
;

556 
	`Log
(è<< "‡ ç¸a possibË‡way fromƒach oth”, whev’ts" << 
Endl
;

557 
	`Log
(è<< " oà¨§mşas ¬cÚfšed iÀ¨şo£ vicš™y. Th " << 
Endl
;

558 
	`Log
(è<< "†š—r™y…rİ”ty oàthi şassif›¸i »æeùed iÀth" << 
Endl
;

559 
	`Log
(è<< " m‘riøw™h which \"ç¸­¬t\"‡nd \"şo£ vicš™y\"‡» " << 
Endl
;

560 
	`Log
(è<< " d‘”mšed:hcov¬Ÿnû m©rix oàthdisüimš©šg" << 
Endl
;

561 
	`Log
(è<< " v¬ŸbË s·û.)" << 
Endl
;

562 
	`Log
(è<< 
Endl
;

563 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

564 
	`Log
(è<< 
Endl
;

565 
	`Log
(è<< "O±im®…”fÜmªû fÜhlš—¸disüimšªˆi obšed fÜ " << 
Endl
;

566 
	`Log
(è<< "lš—¾y cÜ»Ï‹d GaussŸn-di¡ribu‹d v¬ŸbËs. Any devŸtiÚ" << 
Endl
;

567 
	`Log
(è<< "äomhi id—È»duû thach›vabË s•¬©iÚ…ow”. IÀ" << 
Endl
;

568 
	`Log
(è<< "·¹icuÏr,‚Ødisüimš©iÚ‡ˆ®Èi ach›ved fÜ‡ v¬ŸbË" << 
Endl
;

569 
	`Log
(è<< "th© ha th§m§m¶m—ÀfÜ sigÇÈªd background,ƒv’ ià" << 
Endl
;

570 
	`Log
(è<< "thsh­e oàthdi¡ributiÚ ¬v”y difã»Á. Thus,hlš—¸" << 
Endl
;

571 
	`Log
(è<< "disüimšªˆoá’ b’ef™ äom‡ su™abË¿nsfÜm©iÚ oàth" << 
Endl
;

572 
	`Log
(è<< "špuˆv¬ŸbËs. FÜƒxam¶e, ià¨v¬ŸbË x iÀ[-1,1] ha ¨" << 
Endl
;

573 
	`Log
(è<< "¨·¿bŞiøsigÇÈdi¡ributiÚs,‡nd‡ unifÜm background" << 
Endl
;

574 
	`Log
(è<< "di¡ributiÚs,heœ m—Àv®ui z”Øš bÙh ca£s,†—dšg " << 
Endl
;

575 
	`Log
(è<< "tØnØ£·¿tiÚ. Thsim¶ŒªsfÜm©iÚ x -> |x|„’d” thi " << 
Endl
;

576 
	`Log
(è<< "v¬ŸbË…ow”fuÈfÜhu£ iÀ¨lš—¸disüimšªt." << 
Endl
;

577 
	`Log
(è<< 
Endl
;

578 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

579 
	`Log
(è<< 
Endl
;

580 
	`Log
(è<< "<NÚe>" << 
Endl
;

581 
	}
}

	@src/MethodLikelihood.cxx

110 
	~"TMVA/M‘hodLik–ihood.h
"

112 
	~"TMVA/CÚfigu¿bË.h
"

113 
	~"TMVA/CÏssif›rFaùÜy.h
"

114 
	~"TMVA/D©aS‘.h
"

115 
	~"TMVA/D©aS‘Info.h
"

116 
	~"TMVA/IM‘hod.h
"

117 
	~"TMVA/M‘hodBa£.h
"

118 
	~"TMVA/MsgLogg”.h
"

119 
	~"TMVA/PDF.h
"

120 
	~"TMVA/Rªkšg.h
"

121 
	~"TMVA/ToŞs.h
"

122 
	~"TMVA/Ty³s.h
"

123 
	~"TMVA/V¬ŸbËInfo.h
"

125 
	~"TM©rixD.h
"

126 
	~"TVeùÜ.h
"

127 
	~"TM©h.h
"

128 
	~"TObjSŒšg.h
"

129 
	~"TFe.h
"

130 
	~"TKey.h
"

131 
	~"TH1.h
"

132 
	~"TCÏss.h
"

133 
	~"Rio¡»am.h
"

135 
	~<iomª
>

136 
	~<veùÜ
>

137 
	~<c¡dlib
>

139 
	$REGISTER_METHOD
(
Lik–ihood
)

141 
	`CÏssImp
(
TMVA
::
M‘hodLik–ihood
);

146 
TMVA
::
M‘hodLik–ihood
::
	$M‘hodLik–ihood
ĞcÚ¡ 
TSŒšg
& 
jobName
,

147 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

148 
D©aS‘Info
& 
theD©a
,

149 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

150 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kLik–ihood
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

151 
	`fEpsÚ
 ( 1.e3 * 
DBL_MIN
 ),

152 
	`fT¿nsfÜmLik–ihoodOuut
Ğ
kFALSE
 ),

153 
	`fDrİV¬ŸbË
 ( 0 ),

154 
	`fHi¡Sig
 ( 0 ),

155 
	`fHi¡Bgd
 ( 0 ),

156 
	`fHi¡Sig_smoÙh
( 0 ),

157 
	`fHi¡Bgd_smoÙh
( 0 ),

158 
	`fDeçuÉPDFLik
 ( 0 ),

159 
	`fPDFSig
 ( 0 ),

160 
	`fPDFBgd
 ( 0 ),

161 
	`fNsmoÙh
 ( 2 ),

162 
	`fNsmoÙhV¬S
 ( 0 ),

163 
	`fNsmoÙhV¬B
 ( 0 ),

164 
	`fAv”ageEvtP”Bš
( 0 ),

165 
	`fAv”ageEvtP”BšV¬S
 (0),

166 
	`fAv”ageEvtP”BšV¬B
 (0),

167 
	`fKDEfšeFaùÜ
 ( 0 ),

168 
	$fIÁ”pŞ©eSŒšg
(0)

170 
	}
}

175 
	gTMVA
::
M‘hodLik–ihood
::
	$M‘hodLik–ihood
Ğ
D©aS‘Info
& 
theD©a
,

176 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

177 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kLik–ihood
, 
theD©a
, 
theWeightFe
),

178 
	`fEpsÚ
 ( 1.e3 * 
DBL_MIN
 ),

179 
	`fT¿nsfÜmLik–ihoodOuut
Ğ
kFALSE
 ),

180 
	`fDrİV¬ŸbË
 ( 0 ),

181 
	`fHi¡Sig
 ( 0 ),

182 
	`fHi¡Bgd
 ( 0 ),

183 
	`fHi¡Sig_smoÙh
( 0 ),

184 
	`fHi¡Bgd_smoÙh
( 0 ),

185 
	`fDeçuÉPDFLik
 ( 0 ),

186 
	`fPDFSig
 ( 0 ),

187 
	`fPDFBgd
 ( 0 ),

188 
	`fNsmoÙh
 ( 2 ),

189 
	`fNsmoÙhV¬S
 ( 0 ),

190 
	`fNsmoÙhV¬B
 ( 0 ),

191 
	`fAv”ageEvtP”Bš
( 0 ),

192 
	`fAv”ageEvtP”BšV¬S
 (0),

193 
	`fAv”ageEvtP”BšV¬B
 (0),

194 
	`fKDEfšeFaùÜ
 ( 0 ),

195 
	$fIÁ”pŞ©eSŒšg
(0)

197 
	}
}

202 
	gTMVA
::
M‘hodLik–ihood
::~
	$M‘hodLik–ihood
( )

204 ià(
NULL
 !ğ
fDeçuÉPDFLik
è
d–‘e
 fDefaultPDFLik;

205 ià(
NULL
 !ğ
fHi¡Sig
è
d–‘e
 fHistSig;

206 ià(
NULL
 !ğ
fHi¡Bgd
è
d–‘e
 fHistBgd;

207 ià(
NULL
 !ğ
fHi¡Sig_smoÙh
è
d–‘e
 fHistSig_smooth;

208 ià(
NULL
 !ğ
fHi¡Bgd_smoÙh
è
d–‘e
 fHistBgd_smooth;

209 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

210 ià((*
fPDFSig
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFSig)[ivar];

211 ià((*
fPDFBgd
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFBgd)[ivar];

213 ià(
NULL
 !ğ
fPDFSig
è
d–‘e
 fPDFSig;

214 ià(
NULL
 !ğ
fPDFBgd
è
d–‘e
 fPDFBgd;

215 
	}
}

220 
BoŞ_t
 
	gTMVA
::
M‘hodLik–ihood
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
,

221 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

223 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

224  
kFALSE
;

225 
	}
}

230 
	gTMVA
::
M‘hodLik–ihood
::
	$In™
( )

233 
fDrİV¬ŸbË
 = -1;

234 
fHi¡Sig
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*> ( 
	`G‘Nv¬
(), (TH1*)0 );

235 
fHi¡Bgd
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*> ( 
	`G‘Nv¬
(), (TH1*)0 );

236 
fHi¡Sig_smoÙh
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*> ( 
	`G‘Nv¬
(), (TH1*)0 );

237 
fHi¡Bgd_smoÙh
 = 
Ãw
 
¡d
::
veùÜ
<
TH1
*> ( 
	`G‘Nv¬
(), (TH1*)0 );

238 
fPDFSig
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
PDF
*>Ğ
	`G‘Nv¬
(), (TMVA::PDF*)0 );

239 
fPDFBgd
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
PDF
*>Ğ
	`G‘Nv¬
(), (TMVA::PDF*)0 );

240 
	}
}

247 
	gTMVA
::
M‘hodLik–ihood
::
	$Deş¬eO±iÚs
()

249 
	`Deş¬eO±iÚRef
Ğ
fT¿nsfÜmLik–ihoodOuut
 = 
kFALSE
, "TransformOutput",

255 
TSŒšg
 
upd©edO±iÚs
 = 
	`G‘O±iÚs
();

256 
fDeçuÉPDFLik
 = 
Ãw
 
	`PDF
Ğ
	`TSŒšg
(
	`G‘Name
()è+ " PDF", 
upd©edO±iÚs
 );

257 
fDeçuÉPDFLik
->
	`Deş¬eO±iÚs
();

258 
fDeçuÉPDFLik
->
	`P¬£O±iÚs
();

259 
upd©edO±iÚs
 = 
fDeçuÉPDFLik
->
	`G‘O±iÚs
();

260 
UIÁ_t
 
iv¬
 = 0; iv¬< 
	`D©aInfo
().
	`G‘NV¬ŸbËs
(); ivar++) {

261 (*
fPDFSig
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`FÜm
("% PDF Sig[%d]", 
	`G‘Name
(), iv¬), 
upd©edO±iÚs
,

262 
	`FÜm
("Sig[%d]",
iv¬
), 
fDeçuÉPDFLik
 );

263 (*
fPDFSig
)[
iv¬
]->
	`Deş¬eO±iÚs
();

264 (*
fPDFSig
)[
iv¬
]->
	`P¬£O±iÚs
();

265 
upd©edO±iÚs
 = (*
fPDFSig
)[
iv¬
]->
	`G‘O±iÚs
();

266 (*
fPDFBgd
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`FÜm
("% PDF Bkg[%d]", 
	`G‘Name
(), iv¬), 
upd©edO±iÚs
,

267 
	`FÜm
("Bkg[%d]",
iv¬
), 
fDeçuÉPDFLik
 );

268 (*
fPDFBgd
)[
iv¬
]->
	`Deş¬eO±iÚs
();

269 (*
fPDFBgd
)[
iv¬
]->
	`P¬£O±iÚs
();

270 
upd©edO±iÚs
 = (*
fPDFBgd
)[
iv¬
]->
	`G‘O±iÚs
();

274 
	`S‘O±iÚs
Ğ
upd©edO±iÚs
 );

275 
	}
}

278 
	gTMVA
::
M‘hodLik–ihood
::
	$Deş¬eCom·tib™yO±iÚs
()

282 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

283 
	`Deş¬eO±iÚRef
Ğ
fNsmoÙh
 = 1, "NSmooth",

285 
	`Deş¬eO±iÚRef
Ğ
fAv”ageEvtP”Bš
 = 50, "NAvEvtPerBin",

287 
	`Deş¬eO±iÚRef
Ğ
fKDEfšeFaùÜ
 =1. , "KDEFineFactor",

289 
	`Deş¬eO±iÚRef
Ğ
fBÜd”M‘hodSŒšg
 = "None", "KDEborder",

291 
	`Deş¬eO±iÚRef
Ğ
fKDE™”SŒšg
 = "Nonadaptive", "KDEiter",

293 
	`Deş¬eO±iÚRef
Ğ
fKDEty³SŒšg
 = "Gauss", "KDEtype",

295 
fAv”ageEvtP”BšV¬S
 = 
Ãw
 
IÁ_t
[
	`G‘Nv¬
()];

296 
fAv”ageEvtP”BšV¬B
 = 
Ãw
 
IÁ_t
[
	`G‘Nv¬
()];

297 
fNsmoÙhV¬S
 = 
Ãw
 
IÁ_t
[
	`G‘Nv¬
()];

298 
fNsmoÙhV¬B
 = 
Ãw
 
IÁ_t
[
	`G‘Nv¬
()];

299 
fIÁ”pŞ©eSŒšg
 = 
Ãw
 
TSŒšg
[
	`G‘Nv¬
()];

300 
UIÁ_t
 
i
=0; i<
	`G‘Nv¬
(); ++i) {

301 
fAv”ageEvtP”BšV¬S
[
i
] = 
fAv”ageEvtP”BšV¬B
[i] = 0;

302 
fNsmoÙhV¬S
[
i
] = 
fNsmoÙhV¬B
[i] = 0;

303 
fIÁ”pŞ©eSŒšg
[
i
] = "";

305 
	`Deş¬eO±iÚRef
Ğ
fAv”ageEvtP”BšV¬S
, 
	`G‘Nv¬
(), "NAvEvtPerBinSig",

307 
	`Deş¬eO±iÚRef
Ğ
fAv”ageEvtP”BšV¬B
, 
	`G‘Nv¬
(), "NAvEvtPerBinBkg",

309 
	`Deş¬eO±iÚRef
(
fNsmoÙhV¬S
, 
	`G‘Nv¬
(), "NSmoothSig",

311 
	`Deş¬eO±iÚRef
(
fNsmoÙhV¬B
, 
	`G‘Nv¬
(), "NSmoothBkg",

313 
	`Deş¬eO±iÚRef
(
fIÁ”pŞ©eSŒšg
, 
	`G‘Nv¬
(), "PDFInterpol", "Method of interpolating„eference histograms (e.g. Spline2 or KDE)");

314 
	}
}

320 
	gTMVA
::
M‘hodLik–ihood
::
	$ProûssO±iÚs
()

322 
	`S‘SigÇlReã»nûCut
Ğ
	`T¿nsfÜmLik–ihoodOuut
( 0.5, 0.5 ) );

324 
fDeçuÉPDFLik
->
	`ProûssO±iÚs
();

325 
UIÁ_t
 
iv¬
 = 0; iv¬< 
	`D©aInfo
().
	`G‘NV¬ŸbËs
(); ivar++) {

326 (*
fPDFBgd
)[
iv¬
]->
	`ProûssO±iÚs
();

327 (*
fPDFSig
)[
iv¬
]->
	`ProûssO±iÚs
();

329 
	}
}

339 
	gTMVA
::
M‘hodLik–ihood
::
	$T¿š
( )

341 
UIÁ_t
 
nv¬
=
	`G‘Nv¬
();

342 
¡d
::
veùÜ
<
DoubË_t
> 
	`xmš
(
nv¬
), 
	`xmax
(nvar);

343 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; iv¬++è{
xmš
[iv¬]=1e30; 
xmax
[ivar]=-1e30;}

345 
UIÁ_t
 
Ãv’ts
=
	`D©a
()->
	`G‘NEv’ts
();

346 
UIÁ_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

349 cÚ¡ 
Ev’t
* 
ÜigEv
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

350 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ÜigEv
->
	`G‘Weight
()<=0) ;

352 
şs
=0;cls<2;cls++){

353 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
(
şs
);

354 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`T¿nsfÜm
Ğ
ÜigEv
 );

355 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

356 
Flßt_t
 
v®ue
 = 
ev
->
	`G‘V®ue
(
iv¬
);

357 ià(
v®ue
 < 
xmš
[
iv¬
]) xmin[ivar] = value;

358 ià(
v®ue
 > 
xmax
[
iv¬
]) xmax[ivar] = value;

365 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

366 
TSŒšg
 
v¬
 = (*
fIÅutV¬s
)[
iv¬
];

373 ià(
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘V¬Ty³
() == 'I') {

375 
IÁ_t
 
ixmš
 = 
TM©h
::
	`Nšt
Ğ
xmš
[
iv¬
] );

376 
xmax
[
iv¬
]=xmax[ivar]+1;

377 
IÁ_t
 
ixmax
 = 
TM©h
::
	`Nšt
Ğ
xmax
[
iv¬
] );

378 
IÁ_t
 
nbšs
 = 
ixmax
 - 
ixmš
;

379 (*
fHi¡Sig
)[
iv¬
] = 
Ãw
 
	`TH1F
(
	`G‘M‘hodName
()+"_"+
v¬
 + "_sig", v¬ + " sigÇÈŒaššg", 
nbšs
, 
ixmš
, 
ixmax
 );

380 (*
fHi¡Bgd
)[
iv¬
] = 
Ãw
 
	`TH1F
(
	`G‘M‘hodName
()+"_"+
v¬
 + "_bgd", v¬ + " background¿ššg", 
nbšs
, 
ixmš
, 
ixmax
 );

383 
UIÁ_t
 
mšNEvt
 = 
TM©h
::
	`Mš
(
	`D©a
()->
	`G‘NEvtSigT¿š
(),D©a()->
	`G‘NEvtBkgdT¿š
());

384 
IÁ_t
 
nbšsS
 = (*
fPDFSig
)[
iv¬
]->
	`G‘Hi¡NBšs
Ğ
mšNEvt
 );

385 
IÁ_t
 
nbšsB
 = (*
fPDFBgd
)[
iv¬
]->
	`G‘Hi¡NBšs
Ğ
mšNEvt
 );

387 (*
fHi¡Sig
)[
iv¬
] = 
Ãw
 
	`TH1F
Ğ
	`FÜm
("%s_%s_%s_sig",
	`D©aInfo
().
	`G‘Name
(),
	`G‘M‘hodName
().
	`D©a
(),
v¬
.Data()),

388 
	`FÜm
("%s_%s_% sigÇÈŒaššg",
	`D©aInfo
().
	`G‘Name
(),
	`G‘M‘hodName
().
	`D©a
(),
v¬
.D©a()), 
nbšsS
, 
xmš
[
iv¬
], 
xmax
[ivar] );

389 (*
fHi¡Bgd
)[
iv¬
] = 
Ãw
 
	`TH1F
Ğ
	`FÜm
("%s_%s_%s_bgd",
	`D©aInfo
().
	`G‘Name
(),
	`G‘M‘hodName
().
	`D©a
(),
v¬
.Data()),

390 
	`FÜm
("%s_%s_% background¿ššg",
	`D©aInfo
().
	`G‘Name
(),
	`G‘M‘hodName
().
	`D©a
(),
v¬
.D©a()), 
nbšsB
, 
xmš
[
iv¬
], 
xmax
[ivar] );

395 
	`Log
(è<< 
kINFO
 << "Flšg„eã»nû hi¡og¿ms" << 
Endl
;

398 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

402 cÚ¡ 
Ev’t
* 
ÜigEv
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

403 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ÜigEv
->
	`G‘Weight
()<=0) ;

404 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
ÜigEv
->
	`G‘CÏss
() );

405 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`T¿nsfÜm
Ğ
ÜigEv
 );

408 
Flßt_t
 
weight
 = 
ev
->
	`G‘Weight
();

411 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

412 
DoubË_t
 
v®ue
 = 
ev
->
	`G‘V®ue
(
iv¬
);

414 ià(
v®ue
 >ğ
xmax
[
iv¬
]) value = xmax[ivar] - 1.0e-10;

415 ià(
v®ue
 < 
xmš
[
iv¬
]) value = xmin[ivar] + 1.0e-10;

417 ià(
v®ue
 >=(*
fHi¡Sig
)[
iv¬
]->
	`G‘Xaxis
()->
	`G‘Xmax
() ||

418 
v®ue
 <(*
fHi¡Sig
)[
iv¬
]->
	`G‘Xaxis
()->
	`G‘Xmš
()){

419 
	`Log
()<<
kWARNING


421 <<(*
fIÅutV¬s
)[
iv¬
]

422 << ", xmš="<<(*
fHi¡Sig
)[
iv¬
]->
	`G‘Xaxis
()->
	`G‘Xmš
()

423 << ", v®ue="<<
v®ue


424 << ", xmax="<<(*
fHi¡Sig
)[
iv¬
]->
	`G‘Xaxis
()->
	`G‘Xmax
()

425 << 
Endl
;

427 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è(*
fHi¡Sig
)[
iv¬
]->
	`Fl
Ğ
v®ue
, 
weight
 );

428 (*
fHi¡Bgd
)[
iv¬
]->
	`Fl
Ğ
v®ue
, 
weight
 );

433 
	`Log
(è<< 
kINFO
 << "Budšg PDF ouˆoà»ã»nû hi¡og¿ms" << 
Endl
;

434 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

438 (*
fPDFSig
)[
iv¬
]->
	`BudPDF
Ğ(*
fHi¡Sig
)[ivar] );

439 (*
fPDFBgd
)[
iv¬
]->
	`BudPDF
Ğ(*
fHi¡Bgd
)[ivar] );

441 (*
fPDFSig
)[
iv¬
]->
	`V®id©ePDF
Ğ(*
fHi¡Sig
)[ivar] );

442 (*
fPDFBgd
)[
iv¬
]->
	`V®id©ePDF
Ğ(*
fHi¡Bgd
)[ivar] );

445 ià((*
fPDFSig
)[
iv¬
]->
	`G‘SmoÙhedHi¡
(è!ğ0è(*
fHi¡Sig_smoÙh
)[ivar] = (*fPDFSig)[ivar]->GetSmoothedHist();

446 ià((*
fPDFBgd
)[
iv¬
]->
	`G‘SmoÙhedHi¡
(è!ğ0è(*
fHi¡Bgd_smoÙh
)[ivar] = (*fPDFBgd)[ivar]->GetSmoothedHist();

448 
	`Ex™FromT¿ššg
();

449 
	}
}

455 
DoubË_t
 
	gTMVA
::
M‘hodLik–ihood
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

457 
UIÁ_t
 
iv¬
;

460 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

463 
TVeùÜ
 
	`vs
Ğ
	`G‘Nv¬
() );

464 
TVeùÜ
 
	`vb
Ğ
	`G‘Nv¬
() );

469 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
fSigÇlCÏss
 );

472 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

473 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è
	`vs
(iv¬èğ
ev
->
	`G‘V®ue
(ivar);

475 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
fBackgroundCÏss
 );

478 
ev
 = 
	`G‘Ev’t
();

479 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è
	`vb
(iv¬èğ
ev
->
	`G‘V®ue
(ivar);

482 
DoubË_t
 
	`ps
(1), 
	`pb
(1), 
	`p
(0);

483 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

486 ià((
IÁ_t
)
iv¬
 =ğ
fDrİV¬ŸbË
) ;

488 
DoubË_t
 
x
[2] = { 
	`vs
(
iv¬
), 
	`vb
(ivar) };

490 
UIÁ_t
 
™y³
=0; itype < 2; itype++) {

493 ià(
x
[
™y³
] >ğ(*
fPDFSig
)[
iv¬
]->
	`G‘Xmax
()) x[itype] = (*fPDFSig)[ivar]->GetXmax() - 1.0e-10;

494 ià(
x
[
™y³
] < (*
fPDFSig
)[
iv¬
]->
	`G‘Xmš
()) x[itype] = (*fPDFSig)[ivar]->GetXmin();

497 
PDF
* 
pdf
 = (
™y³
 =ğ0è? (*
fPDFSig
)[
iv¬
] : (*
fPDFBgd
)[ivar];

498 ià(
pdf
 =ğ0è
	`Log
(è<< 
kFATAL
 << "<G‘MvaV®ue> Reã»nû hi¡og¿m dÚ'ˆexi¡" << 
Endl
;

499 
TH1
* 
hi¡
 = 
pdf
->
	`G‘PDFHi¡
();

503 
IÁ_t
 
bš
 = 
hi¡
->
	`FšdBš
(
x
[
™y³
]);

507 ià((*
fPDFSig
)[
iv¬
]->
	`G‘IÁ”pŞM‘hod
(è=ğ
TMVA
::
PDF
::
kS¶še0
 ||

508 
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘V¬Ty³
() == 'N') {

509 
p
 = 
TM©h
::
	`Max
Ğ
hi¡
->
	`G‘BšCÚ‹Á
(
bš
), 
fEpsÚ
 );

511 
IÁ_t
 
Ãxtbš
 = 
bš
;

512 ià((
x
[
™y³
] > 
hi¡
->
	`G‘BšC’‹r
(
bš
è&& bš !ğhi¡->
	`G‘NbšsX
()) || bin == 1)

513 
Ãxtbš
++;

515 
Ãxtbš
--;

518 
DoubË_t
 
dx
 = 
hi¡
->
	`G‘BšC’‹r
(
bš
è- hi¡->G‘BšC’‹r(
Ãxtbš
);

519 
DoubË_t
 
dy
 = 
hi¡
->
	`G‘BšCÚ‹Á
(
bš
è- hi¡->G‘BšCÚ‹Á(
Ãxtbš
);

520 
DoubË_t
 
like
 = 
hi¡
->
	`G‘BšCÚ‹Á
(
bš
è+ (
x
[
™y³
] - hi¡->
	`G‘BšC’‹r
(bš)è* 
dy
/
dx
;

522 
p
 = 
TM©h
::
	`Max
Ğ
like
, 
fEpsÚ
 );

525 ià(
™y³
 =ğ0è
ps
 *ğ
p
;

526 
pb
 *ğ
p
;

531  
	`T¿nsfÜmLik–ihoodOuut
Ğ
ps
, 
pb
 );

532 
	}
}

537 
DoubË_t
 
	gTMVA
::
M‘hodLik–ihood
::
	$T¿nsfÜmLik–ihoodOuut
Ğ
DoubË_t
 
ps
, DoubË_ˆ
pb
 ) const

539 ià(
ps
 < 
fEpsÚ
)…s = fEpsilon;

540 ià(
pb
 < 
fEpsÚ
)…b = fEpsilon;

541 
DoubË_t
 
r
 = 
ps
/Õ + 
pb
);

542 ià(
r
 >= 1.0)„ = 1. - 1.e-15;

544 ià(
fT¿nsfÜmLik–ihoodOuut
) {

548 ià(
r
 <ğ0.0è¸ğ
fEpsÚ
;

549 ià(
r
 >= 1.0)„ = 1. - 1.e-15;

551 
DoubË_t
 
u
 = 15.0;

552 
r
 = - 
TM©h
::
	`Log
(1.0/¸- 1.0)/
u
;

555  
r
;

556 
	}
}

561 
	gTMVA
::
M‘hodLik–ihood
::
	$Wr™eO±iÚsToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
, cÚ¡ 
TSŒšg
& 
´efix
 ) const

563 
CÚfigu¿bË
::
	`Wr™eO±iÚsToSŒ—m
Ğ
o
, 
´efix
);

566 ià(
fDeçuÉPDFLik
 != 0) {

567 
o
 << 
´efix
 << 
¡d
::
’dl
 <<…refix << "#Default Likelihood PDF Options:" << std::endl <<…refix << std::endl;

568 
fDeçuÉPDFLik
->
	`Wr™eO±iÚsToSŒ—m
Ğ
o
, 
´efix
 );

570 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fPDFSig
->
	`size
(); ivar++) {

571 ià((*
fPDFSig
)[
iv¬
] != 0) {

572 
o
 << 
´efix
 << 
¡d
::
’dl
 <<…»fix << 
	`FÜm
("#SigÇl[%d] Lik–ihood PDF O±iÚs:",
iv¬
) << std::endl <<…refix << std::endl;

573 (*
fPDFSig
)[
iv¬
]->
	`Wr™eO±iÚsToSŒ—m
Ğ
o
, 
´efix
 );

575 ià((*
fPDFBgd
)[
iv¬
] != 0) {

576 
o
 << 
´efix
 << 
¡d
::
’dl
 <<…refix << "#Background[%d] Likelihood PDF Options:" << std::endl <<…refix << std::endl;

577 (*
fPDFBgd
)[
iv¬
]->
	`Wr™eO±iÚsToSŒ—m
Ğ
o
, 
´efix
 );

580 
	}
}

585 
	gTMVA
::
M‘hodLik–ihood
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

587 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

588 
	`gToŞs
().
	`AddA‰r
(
wght
, "NV¬ŸbËs", 
	`G‘Nv¬
());

589 
	`gToŞs
().
	`AddA‰r
(
wght
, "NClasses", 2);

590 * 
pdfw¿p
;

591 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

592 iàĞ(*
fPDFSig
)[
iv¬
]==0 || (*
fPDFBgd
)[ivar]==0 )

593 
	`Log
(è<< 
kFATAL
 << "Reã»nû hi¡og¿m fÜ v¬ŸbË " << 
iv¬


594 << " dÚ'ˆexi¡, cª'ˆwr™™Øweighˆfe" << 
Endl
;

595 
pdfw¿p
 = 
	`gToŞs
().
	`AddChd
(
wght
, "PDFDescriptor");

596 
	`gToŞs
().
	`AddA‰r
(
pdfw¿p
, "V¬Index", 
iv¬
);

597 
	`gToŞs
().
	`AddA‰r
(
pdfw¿p
, "ClassIndex", 0);

598 (*
fPDFSig
)[
iv¬
]->
	`AddXMLTo
(
pdfw¿p
);

599 
pdfw¿p
 = 
	`gToŞs
().
	`AddChd
(
wght
, "PDFDescriptor");

600 
	`gToŞs
().
	`AddA‰r
(
pdfw¿p
, "V¬Index", 
iv¬
);

601 
	`gToŞs
().
	`AddA‰r
(
pdfw¿p
, "ClassIndex", 1);

602 (*
fPDFBgd
)[
iv¬
]->
	`AddXMLTo
(
pdfw¿p
);

604 
	}
}

609 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodLik–ihood
::
	$C»©eRªkšg
()

612 ià(
fRªkšg
è
d–‘e
 fRanking;

613 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Delta Separation" );

615 
DoubË_t
 
£pRef
 = -1, 
£p
 = -1;

616 
IÁ_t
 
iv¬
=-1; iv¬<(IÁ_t)
	`G‘Nv¬
(); ivar++) {

619 
fDrİV¬ŸbË
 = 
iv¬
;

621 
TSŒšg
 
ÇmeS
 = 
	`FÜm
Ğ"rS_%i", 
iv¬
+1 );

622 
TSŒšg
 
ÇmeB
 = 
	`FÜm
Ğ"rB_%i", 
iv¬
+1 );

623 
TH1
* 
rS
 = 
Ãw
 
	`TH1F
Ğ
ÇmeS
,‚ameS, 80, 0, 1 );

624 
TH1
* 
rB
 = 
Ãw
 
	`TH1F
Ğ
ÇmeB
,‚ameB, 80, 0, 1 );

627 
IÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NT¿ššgEv’ts
(); ievt++) {

629 cÚ¡ 
Ev’t
* 
ÜigEv
 = 
	`D©a
()->
	`G‘Ev’t
(
›vt
);

630 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
ÜigEv
->
	`G‘CÏss
() );

631 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`T¿nsfÜm
(
	`D©a
()->
	`G‘Ev’t
(
›vt
));

633 
DoubË_t
 
lk
 = 
this
->
	`G‘MvaV®ue
();

634 
DoubË_t
 
w
 = 
ev
->
	`G‘Weight
();

635 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
)è
rS
->
	`Fl
Ğ
lk
, 
w
 );

636 
rB
->
	`Fl
Ğ
lk
, 
w
 );

640 
£p
 = 
TMVA
::
	`gToŞs
().
	`G‘S•¬©iÚ
Ğ
rS
, 
rB
 );

641 ià(
iv¬
 =ğ-1è
£pRef
 = 
£p
;

642 
£p
 = 
£pRef
 - sep;

645 
d–‘e
 
rS
;

646 
d–‘e
 
rB
;

648 ià(
iv¬
 >ğ0è
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘IÁ”ÇlName
(), 
£p
 ) );

651 
fDrİV¬ŸbË
 = -1;

653  
fRªkšg
;

654 
	}
}

659 
	gTMVA
::
M‘hodLik–ihood
::
	$Wr™eWeightsToSŒ—m
Ğ
TFe
& ) const

661 
TSŒšg
 
²ame
 = "PDF_";

662 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

663 (*
fPDFSig
)[
iv¬
]->
	`Wr™e
Ğ
²ame
 + 
	`G‘IÅutV¬
( ivar ) + "_S" );

664 (*
fPDFBgd
)[
iv¬
]->
	`Wr™e
Ğ
²ame
 + 
	`G‘IÅutV¬
( ivar ) + "_B" );

666 
	}
}

671 
	gTMVA
::
M‘hodLik–ihood
::
	$R—dWeightsFromXML
(* 
wghŠode
)

673 
TSŒšg
 
²ame
 = "PDF_";

674 
BoŞ_t
 
addDœStus
 = 
TH1
::
	`AddDœeùÜyStus
();

675 
TH1
::
	`AddDœeùÜy
(0);

676 
UIÁ_t
 
nv¬s
=0;

677 
	`gToŞs
().
	`R—dA‰r
(
wghŠode
, "NV¬ŸbËs",
nv¬s
);

678 * 
desúode
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

679 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++){

680 * 
pdâode
 = 
	`gToŞs
().
	`G‘Chd
(
desúode
);

681 
	`Log
(è<< 
kDEBUG
 << "R—dšg sigÇÈªd background PDF fÜ v¬ŸbË: " << 
	`G‘IÅutV¬
Ğ
iv¬
 ) << 
Endl
;

682 ià((*
fPDFSig
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFSig)[ivar];

683 ià((*
fPDFBgd
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFBgd)[ivar];

684 (*
fPDFSig
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`G‘IÅutV¬
( ivar ) + " PDF Sig" );

685 (*
fPDFBgd
)[
iv¬
] = 
Ãw
 
	`PDF
Ğ
	`G‘IÅutV¬
( ivar ) + " PDF Bkg" );

686 (*
fPDFSig
)[
iv¬
]->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

687 (*
fPDFBgd
)[
iv¬
]->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

688 (*(*
fPDFSig
)[
iv¬
]).
	`R—dXML
(
pdâode
);

689 
desúode
 = 
	`gToŞs
().
	`G‘NextChd
(descnode);

690 
pdâode
 = 
	`gToŞs
().
	`G‘Chd
(
desúode
);

691 (*(*
fPDFBgd
)[
iv¬
]).
	`R—dXML
(
pdâode
);

692 
desúode
 = 
	`gToŞs
().
	`G‘NextChd
(descnode);

694 
TH1
::
	`AddDœeùÜy
(
addDœStus
);

695 
	}
}

701 
	gTMVA
::
M‘hodLik–ihood
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & 
i¡r
 )

703 
TSŒšg
 
²ame
 = "PDF_";

704 
BoŞ_t
 
addDœStus
 = 
TH1
::
	`AddDœeùÜyStus
();

705 
TH1
::
	`AddDœeùÜy
(0);

706 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

707 
	`Log
(è<< 
kDEBUG
 << "R—dšg sigÇÈªd background PDF fÜ v¬ŸbË: " << 
	`G‘IÅutV¬
Ğ
iv¬
 ) << 
Endl
;

708 ià((*
fPDFSig
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFSig)[ivar];

709 ià((*
fPDFBgd
)[
iv¬
] !=0è
	`d–‘e
 (*fPDFBgd)[ivar];

710 (*
fPDFSig
)[
iv¬
] = 
Ãw
 
	`PDF
(
	`G‘IÅutV¬
( ivar ) + " PDF Sig" );

711 (*
fPDFBgd
)[
iv¬
] = 
Ãw
 
	`PDF
(
	`G‘IÅutV¬
( ivar ) + " PDF Bkg");

712 (*
fPDFSig
)[
iv¬
]->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

713 (*
fPDFBgd
)[
iv¬
]->
	`S‘R—dšgV”siÚ
Ğ
	`G‘T¿ššgTMVAV”siÚCode
() );

714 
i¡r
 >> *(*
fPDFSig
)[
iv¬
];

715 
i¡r
 >> *(*
fPDFBgd
)[
iv¬
];

717 
TH1
::
	`AddDœeùÜy
(
addDœStus
);

718 
	}
}

723 
	gTMVA
::
M‘hodLik–ihood
::
	$R—dWeightsFromSŒ—m
Ğ
TFe
& 
rf
 )

725 
TSŒšg
 
²ame
 = "PDF_";

726 
BoŞ_t
 
addDœStus
 = 
TH1
::
	`AddDœeùÜyStus
();

727 
TH1
::
	`AddDœeùÜy
(0);

728 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

729 (*
fPDFSig
)[
iv¬
] = (
TMVA
::
PDF
*)
rf
.
	`G‘
Ğ
	`FÜm
Ğ"PDF_%s_S", 
	`G‘IÅutV¬
Ğiv¬ ).
	`D©a
() ) );

730 (*
fPDFBgd
)[
iv¬
] = (
TMVA
::
PDF
*)
rf
.
	`G‘
Ğ
	`FÜm
Ğ"PDF_%s_B", 
	`G‘IÅutV¬
Ğiv¬ ).
	`D©a
() ) );

732 
TH1
::
	`AddDœeùÜy
(
addDœStus
);

733 
	}
}

738 
	gTMVA
::
M‘hodLik–ihood
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

740 
	`Log
(è<< 
kINFO
 << "Wr™mÚ™Üšg hi¡og¿m tØfe: " << 
	`Ba£Dœ
()->
	`G‘P©h
(è<< 
Endl
;

741 
	`Ba£Dœ
()->
	`cd
();

743 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

744 (*
fHi¡Sig
)[
iv¬
]->
	`Wr™e
();

745 (*
fHi¡Bgd
)[
iv¬
]->
	`Wr™e
();

746 ià((*
fHi¡Sig_smoÙh
)[
iv¬
] !ğ0è(*fHi¡Sig_smoÙh)[iv¬]->
	`Wr™e
();

747 ià((*
fHi¡Bgd_smoÙh
)[
iv¬
] !ğ0è(*fHi¡Bgd_smoÙh)[iv¬]->
	`Wr™e
();

748 (*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`Wr™e
();

749 (*
fPDFBgd
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`Wr™e
();

751 ià((*
fPDFSig
)[
iv¬
]->
	`G‘NSmoÙhHi¡
(è!ğ0è(*fPDFSig)[iv¬]->G‘NSmoÙhHi¡()->
	`Wr™e
();

752 ià((*
fPDFBgd
)[
iv¬
]->
	`G‘NSmoÙhHi¡
(è!ğ0è(*fPDFBgd)[iv¬]->G‘NSmoÙhHi¡()->
	`Wr™e
();

755 
Flßt_t
 
xmš
=((*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘Xaxis
())->
	`G‘Xmš
();

756 
Flßt_t
 
xmax
=((*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘Xaxis
())->
	`G‘Xmax
();

757 
TH1F
* 
mm
 = 
Ãw
 
	`TH1F
Ğ(*
fIÅutV¬s
)[
iv¬
]+"_additional_check",

758 (*
fIÅutV¬s
)[
iv¬
]+"_add™iÚ®_check", 15000, 
xmš
, 
xmax
 );

759 
DoubË_t
 
štBš
 = (
xmax
-
xmš
)/15000;

760 
IÁ_t
 
bš
=0; bin < 15000; bin++) {

761 
DoubË_t
 
x
 = (
bš
 + 0.5)*
štBš
 + 
xmš
;

762 
mm
->
	`S‘BšCÚ‹Á
(
bš
+1 ,(*
fPDFSig
)[
iv¬
]->
	`G‘V®
(
x
));

764 
mm
->
	`Wr™e
();

767 
TH1
* 
h
[2] = { (*
fHi¡Sig
)[
iv¬
], (*
fHi¡Bgd
)[ivar] };

768 
UIÁ_t
 
i
=0; i<2; i++) {

769 
TH1
* 
hşÚe
 = (
TH1F
*)
h
[
i
]->
	`ClÚe
Ğ
	`TSŒšg
(h[i]->
	`G‘Name
()) + "_nice" );

770 
hşÚe
->
	`S‘Name
 ( 
	`TSŒšg
(
h
[
i
]->
	`G‘Name
()) + "_nice" );

771 
hşÚe
->
	`S‘T™Ë
Ğ
	`TSŒšg
(
h
[
i
]->
	`G‘T™Ë
()) + "" );

772 ià(
hşÚe
->
	`G‘NbšsX
() > 100) {

773 
IÁ_t
 
»sFaùÜ
 = 5;

774 
hşÚe
->
	`Rebš
Ğ
»sFaùÜ
 );

775 
hşÚe
->
	`SÿË
Ğ1.0/
»sFaùÜ
 );

777 
hşÚe
->
	`Wr™e
();

781 
	}
}

786 
	gTMVA
::
M‘hodLik–ihood
::
	$MakeCÏssS³cificH—d”
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& ) const

788 
fout
 << "#šşud<m©h.h>" << 
¡d
::
’dl
;

789 
fout
 << "#šşud<c¡dlib>" << 
¡d
::
’dl
;

790 
	}
}

795 
	gTMVA
::
M‘hodLik–ihood
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

797 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

798 
fout
 << " doubË fEpsÚ;" << 
¡d
::
’dl
;

800 
IÁ_t
 * 
nbš
 = 
Ãw
 IÁ_t[
	`G‘Nv¬
()];

802 
IÁ_t
 
nbšMax
=-1;

803 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

804 
nbš
[
iv¬
]=(*
fPDFSig
)[iv¬]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
();

805 ià(
nbš
[
iv¬
] > 
nbšMax
)‚binMax=nbin[ivar];

808 
fout
 << " stiøæßˆfRefS[][" << 
nbšMax
 << "]; "

809 << "// sigÇÈ»ã»nû veùÜ [nv¬s][max_nbšs]" << 
¡d
::
’dl
;

810 
fout
 << " stiøæßˆfRefB[][" << 
nbšMax
 << "]; "

811 << "// backg¸»ã»nû veùÜ [nv¬s][max_nbšs]" << 
¡d
::
’dl
 << std::endl;

812 
fout
 << "// ià¨v¬ŸbË ha ™ PDFƒncoded‡ ¨¥lše0 -->»© iˆlikª IÁeg” v®ued oÃ" <<
¡d
::
’dl
;

813 
fout
 << " boŞ fHasDisü‘PDF[" << 
	`G‘Nv¬
(è<<"]; "<< 
¡d
::
’dl
;

814 
fout
 << " iÁ fNbš[" << 
	`G‘Nv¬
() << "]; "

815 << "//‚umb” oàbš (disü‘v¬ŸbË may havËs bšs)" << 
¡d
::
’dl
;

816 
fout
 << " doubË fHi¡Mš[" << 
	`G‘Nv¬
(è<< "]; " << 
¡d
::
’dl
;

817 
fout
 << " doubË fHi¡Max[" << 
	`G‘Nv¬
(è<< "]; " << 
¡d
::
’dl
;

819 
fout
 << " doubË T¿nsfÜmLik–ihoodOuutĞdoubË, doubË ) cÚ¡;" << 
¡d
::
’dl
;

820 
fout
 << "};" << 
¡d
::
’dl
;

821 
fout
 << "" << 
¡d
::
’dl
;

822 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

823 
fout
 << "{" << 
¡d
::
’dl
;

824 
fout
 << " fEpsÚ = " << 
fEpsÚ
 << ";" << 
¡d
::
’dl
;

825 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

826 
fout
 << " fNbš[" << 
iv¬
 << "] = " << (*
fPDFSig
)[iv¬]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
(è<< ";" << 
¡d
::
’dl
;

827 
fout
 << " fHi¡Mš[" << 
iv¬
 << "] = " << (*
fPDFSig
)[iv¬]->
	`G‘PDFHi¡
()->
	`G‘Xaxis
()->
	`G‘Xmš
(è<< ";" << 
¡d
::
’dl
;

828 
fout
 << " fHi¡Max[" << 
iv¬
 << "] = " << (*
fPDFSig
)[iv¬]->
	`G‘PDFHi¡
()->
	`G‘Xaxis
()->
	`G‘Xmax
(è<< ";" << 
¡d
::
’dl
;

830 ià((((*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
(è!ğ
nbš
[ivar] ||

831 (*
fPDFBgd
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
(è!ğ
nbš
[ivar])

833 (*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
(è!ğ(*
fPDFBgd
)[ivar]->GetPDFHist()->GetNbinsX()) {

834 
	`Log
(è<< 
kFATAL
 << "<MakeClassSpecific> Mismatch in binning of variable "

835 << "\"" << 
	`G‘Origš®V¬Name
(
iv¬
è<< "\" oàty³: \'" << 
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(iv¬).
	`G‘V¬Ty³
()

837 << "nxS = " << (*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
() << ", "

838 << "nxB = " << (*
fPDFBgd
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘NbšsX
()

839 << " whwex³ù " << 
nbš
[
iv¬
]

840 << 
Endl
;

843 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++){

844 ià((*
fPDFSig
)[
iv¬
]->
	`G‘IÁ”pŞM‘hod
(è=ğ
TMVA
::
PDF
::
kS¶še0
)

845 
fout
 << " fHasDisü‘PDF[" << 
iv¬
 <<"] =rue; " << 
¡d
::
’dl
;

847 
fout
 << " fHasDisü‘PDF[" << 
iv¬
 <<"] = f®£; " << 
¡d
::
’dl
;

850 
fout
 << "}" << 
¡d
::
’dl
 << std::endl;

852 
fout
 << "šlšdoubË " << 
şassName


853 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

854 
fout
 << "{" << 
¡d
::
’dl
;

855 
fout
 << " doubË…s(1),…b(1);" << 
¡d
::
’dl
;

856 
fout
 << " std::veùÜ<doubË> iÅutV®uesSig = iÅutV®ues;" << 
¡d
::
’dl
;

857 
fout
 << " std::veùÜ<doubË> iÅutV®uesBgd = iÅutV®ues;" << 
¡d
::
’dl
;

858 ià(
	`G‘T¿nsfÜm©iÚHªdËr
().
	`G‘T¿nsfÜm©iÚLi¡
().
	`G‘Size
() != 0) {

859 
fout
 << " T¿nsfÜm(šputV®uesSig,0);" << 
¡d
::
’dl
;

860 
fout
 << " T¿nsfÜm(šputV®uesBgd,1);" << 
¡d
::
’dl
;

862 
fout
 << " fÜ (size_ˆiv¬ = 0; iv¬ < G‘Nv¬(); iv¬++è{" << 
¡d
::
’dl
;

863 
fout
 << 
¡d
::
’dl
;

864 
fout
 << " // dummy‡ˆ´e£Á... wÈbu£d fÜ v¬ŸbË¿nsfÜms" << 
¡d
::
’dl
;

865 
fout
 << " doubË x[2] = { iÅutV®uesSig[iv¬], iÅutV®uesBgd[iv¬] };" << 
¡d
::
’dl
;

866 
fout
 << 
¡d
::
’dl
;

867 
fout
 << " fÜ (šˆ™y³=0; ity³ < 2; ity³++è{" << 
¡d
::
’dl
;

868 
fout
 << 
¡d
::
’dl
;

869 
fout
 << " // iÁ”pŞ©lš—¾y b‘w“ÀadjaûÁ bšs" << 
¡d
::
’dl
;

870 
fout
 << " //hi i nÙ u£fuÈfÜ disü‘v¬ŸbË (Ü fÜûd S¶še0)" << 
¡d
::
’dl
;

871 
fout
 << " iÁ bš = iÁ((x[™y³] - fHi¡Mš[iv¬])/(fHi¡Max[iv¬] - fHi¡Mš[iv¬])*fNbš[iv¬]è+ 0;" << 
¡d
::
’dl
;

872 
fout
 << 
¡d
::
’dl
;

873 
fout
 << " // sšûh‹¡ d©¨§m¶i š g’”® difã»Á fromhŒaššg sam¶e" << 
¡d
::
’dl
;

874 
fout
 << " // iˆÿÀh­³Àth©hmš/max oàthŒaššg sam¶¬Œe¥as£d --> cÜ»ùhis" << 
¡d
::
’dl
;

875 
fout
 << " ià (bš < 0è{" << 
¡d
::
’dl
;

876 
fout
 << " bš = 0;" << 
¡d
::
’dl
;

877 
fout
 << " x[™y³] = fHi¡Mš[iv¬];" << 
¡d
::
’dl
;

878 
fout
 << " }" << 
¡d
::
’dl
;

879 
fout
 << "ƒl£ ià(bš >ğfNbš[iv¬]è{" << 
¡d
::
’dl
;

880 
fout
 << " bš = fNbš[iv¬]-1;" << 
¡d
::
’dl
;

881 
fout
 << " x[™y³] = fHi¡Max[iv¬];" << 
¡d
::
’dl
;

882 
fout
 << " }" << 
¡d
::
’dl
;

883 
fout
 << 
¡d
::
’dl
;

884 
fout
 << " // fšd cÜ»¥Údšg hi¡og¿m from cached indiûs" << 
¡d
::
’dl
;

885 
fout
 << " flßˆ»àğ(™y³ =ğ0è? fRefS[iv¬][bš] : fRefB[iv¬][bš];" << 
¡d
::
’dl
;

886 
fout
 << 
¡d
::
’dl
;

887 
fout
 << " // sª™y check" << 
¡d
::
’dl
;

888 
fout
 << " iàÔeà< 0è{" << 
¡d
::
’dl
;

889 
fout
 << " std::couˆ<< \"F©®ƒ¼Ü iÀ" << 
şassName


890 << ": bšƒÁry < 0 ==>‡bÜt\" << std::’dl;" << 
¡d
::
’dl
;

891 
fout
 << " std::ex™(1);" << 
¡d
::
’dl
;

892 
fout
 << " }" << 
¡d
::
’dl
;

893 
fout
 << 
¡d
::
’dl
;

894 
fout
 << " doubË… =„ef;" << 
¡d
::
’dl
;

895 
fout
 << 
¡d
::
’dl
;

896 
fout
 << " ià(G‘Ty³(iv¬è!ğ'I' && !fHasDisü‘PDF[iv¬]è{" << 
¡d
::
’dl
;

897 
fout
 << " flßˆbšûÁ” = (bš + 0.5)/fNbš[iv¬]*(fHi¡Max[iv¬] - fHi¡Mš[iv¬]è+ fHi¡Mš[iv¬];" << 
¡d
::
’dl
;

898 
fout
 << " iÁ‚extbš = bš;" << 
¡d
::
’dl
;

899 
fout
 << " ià((x[™y³] > bšûÁ” && bš !ğfNbš[iv¬]-1è|| bš =ğ0è" << 
¡d
::
’dl
;

900 
fout
 << "‚extbš++;" << 
¡d
::
’dl
;

901 
fout
 << "ƒl£" << 
¡d
::
’dl
;

902 
fout
 << "‚extbš--; " << 
¡d
::
’dl
;

903 
fout
 << 
¡d
::
’dl
;

904 
fout
 << " doubË„eâexˆ = (™y³ =ğ0è? fRefS[iv¬][Ãxtbš] : fRefB[iv¬][Ãxtbš];" << 
¡d
::
’dl
;

905 
fout
 << " flßˆÃxtbšûÁ” = (Ãxtbš + 0.5)/fNbš[iv¬]*(fHi¡Max[iv¬] - fHi¡Mš[iv¬]è+ fHi¡Mš[iv¬];" << 
¡d
::
’dl
;

906 
fout
 << 
¡d
::
’dl
;

907 
fout
 << " doubË dx = bšûÁ” -‚extbšûÁ”;" << 
¡d
::
’dl
;

908 
fout
 << " doubË dy =„eà-„eâext;" << 
¡d
::
’dl
;

909 
fout
 << "… +ğ(x[™y³] - bšûÁ”è* dy/dx;" << 
¡d
::
’dl
;

910 
fout
 << " }" << 
¡d
::
’dl
;

911 
fout
 << 
¡d
::
’dl
;

912 
fout
 << " iàÕ < fEpsÚè°ğfEpsÚ; //‡void z”Ø»¥Ú£" << 
¡d
::
’dl
;

913 
fout
 << 
¡d
::
’dl
;

914 
fout
 << " ià(™y³ =ğ0èp *ğp;" << 
¡d
::
’dl
;

915 
fout
 << "ƒl£…b *ğp;" << 
¡d
::
’dl
;

916 
fout
 << " } " << 
¡d
::
’dl
;

917 
fout
 << " } " << 
¡d
::
’dl
;

918 
fout
 << 
¡d
::
’dl
;

919 
fout
 << " //hlik–ihood„©iØÑ¿nsfÜm iˆ?)" << 
¡d
::
’dl
;

920 
fout
 << "„‘uº T¿nsfÜmLik–ihoodOuutĞps,…b ); " << 
¡d
::
’dl
;

921 
fout
 << "}" << 
¡d
::
’dl
 << std::endl;

923 
fout
 << "šlšdoubË " << 
şassName
 << "::T¿nsfÜmLik–ihoodOuutĞdoubË…s, doubË…b ) cÚ¡" << 
¡d
::
’dl
;

924 
fout
 << "{" << 
¡d
::
’dl
;

925 
fout
 << " //„‘uº ŒªsfÜmed o¸nÚ-ŒªsfÜmed ouut" << 
¡d
::
’dl
;

926 
fout
 << " iàÕ < fEpsÚèp ğfEpsÚ;" << 
¡d
::
’dl
;

927 
fout
 << " iàÕb < fEpsÚèpb = fEpsÚ;" << 
¡d
::
’dl
;

928 
fout
 << " doubË„ =…s/Õ +…b);" << 
¡d
::
’dl
;

929 
fout
 << " iàÔ >ğ1.0è¸ğ1. - 1.e-15;" << 
¡d
::
’dl
;

930 
fout
 << 
¡d
::
’dl
;

931 
fout
 << " ià(" << (
fT¿nsfÜmLik–ihoodOuut
 ? "Œue" : "çl£"è<< "è{" << 
¡d
::
’dl
;

932 
fout
 << " // inv”£ F”m˜funùiÚ" << 
¡d
::
’dl
;

933 
fout
 << 
¡d
::
’dl
;

934 
fout
 << " // sª™y check" << 
¡d
::
’dl
;

935 
fout
 << " ià (¸<ğ0.0è¸ğfEpsÚ;" << 
¡d
::
’dl
;

936 
fout
 << "ƒl£ iàÔ >ğ1.0è¸ğ1. - 1.e-15;" << 
¡d
::
’dl
;

937 
fout
 << 
¡d
::
’dl
;

938 
fout
 << " doubËau = 15.0;" << 
¡d
::
’dl
;

939 
fout
 << "„ = -†og(1.0/¸- 1.0)/u;" << 
¡d
::
’dl
;

940 
fout
 << " }" << 
¡d
::
’dl
;

941 
fout
 << 
¡d
::
’dl
;

942 
fout
 << "„‘uº„;" << 
¡d
::
’dl
;

943 
fout
 << "}" << 
¡d
::
’dl
;

944 
fout
 << 
¡d
::
’dl
;

946 
fout
 << "// CËª up" << 
¡d
::
’dl
;

947 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

948 
fout
 << "{" << 
¡d
::
’dl
;

949 
fout
 << " //‚ÙhšgØş—r" << 
¡d
::
’dl
;

950 
fout
 << "}" << 
¡d
::
’dl
 << std::endl;

952 
fout
 << "// sigÇÈm­" << 
¡d
::
’dl
;

953 
fout
 << "æßˆ" << 
şassName
 << "::fRefS[][" << 
nbšMax
 << "] = " << 
¡d
::
’dl
;

954 
fout
 << "{ " << 
¡d
::
’dl
;

955 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

956 
fout
 << " { ";

957 
IÁ_t
 
ibš
=1; ibš<=
nbšMax
; ibin++) {

958 ià(
ibš
-1 < 
nbš
[
iv¬
])

959 
fout
 << (*
fPDFSig
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘BšCÚ‹Á
(
ibš
);

961 
fout
 << -1;

963 ià(
ibš
 < 
nbšMax
è
fout
 << ", ";

965 
fout
 << " }, " << 
¡d
::
’dl
;

967 
fout
 << "}; " << 
¡d
::
’dl
;

968 
fout
 << 
¡d
::
’dl
;

970 
fout
 << "// background m­" << 
¡d
::
’dl
;

971 
fout
 << "æßˆ" << 
şassName
 << "::fRefB[][" << 
nbšMax
 << "] = " << 
¡d
::
’dl
;

972 
fout
 << "{ " << 
¡d
::
’dl
;

973 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

974 
fout
 << " { ";

975 
fout
 << 
¡d
::
	`£»cisiÚ
(8);

976 
IÁ_t
 
ibš
=1; ibš<=
nbšMax
; ibin++) {

977 ià(
ibš
-1 < 
nbš
[
iv¬
])

978 
fout
 << (*
fPDFBgd
)[
iv¬
]->
	`G‘PDFHi¡
()->
	`G‘BšCÚ‹Á
(
ibš
);

980 
fout
 << -1;

982 ià(
ibš
 < 
nbšMax
è
fout
 << ", ";

984 
fout
 << " }, " << 
¡d
::
’dl
;

986 
fout
 << "}; " << 
¡d
::
’dl
;

987 
fout
 << 
¡d
::
’dl
;

988 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

990 
d–‘e
[] 
nbš
;

991 
	}
}

999 
	gTMVA
::
M‘hodLik–ihood
::
	$G‘H–pMes§ge
() const

1001 
	`Log
(è<< 
Endl
;

1002 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1003 
	`Log
(è<< 
Endl
;

1004 
	`Log
(è<< "Thmaximum-lik–ihood cÏssif›¸mod– thd©¨w™h…robab™y " << 
Endl
;

1005 
	`Log
(è<< "d’s™y funùiÚ (PDFè»´oducšghsigÇÈªd background" << 
Endl
;

1006 
	`Log
(è<< "di¡ributiÚ oàthšpuˆv¬ŸbËs. CÜ»ÏtiÚ amÚgh" << 
Endl
;

1007 
	`Log
(è<< "v¬ŸbË ¬ignÜed." << 
Endl
;

1008 
	`Log
(è<< 
Endl
;

1009 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1010 
	`Log
(è<< 
Endl
;

1011 
	`Log
(è<< "Requœed fÜ good…”fÜmªû‡» decÜ»Ï‹d iÅuˆv¬ŸbËs" << 
Endl
;

1012 
	`Log
(è<< "(PCA¿nsfÜm©iÚ vŸhİtiÚ \"V¬T¿nsfÜm=DecÜ»Ï‹\"" << 
Endl
;

1013 
	`Log
(è<< "may bŒ›d). I¼educibË‚Ú-lš—¸cÜ»ÏtiÚ may b»duûd" << 
Endl
;

1014 
	`Log
(è<< "by…»combššg sŒÚgly cÜ»Ï‹d iÅuˆv¬ŸbËs, o¸by sim¶y" << 
Endl
;

1015 
	`Log
(è<< "»movšg oÃ oàthv¬ŸbËs." << 
Endl
;

1016 
	`Log
(è<< 
Endl
;

1017 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1018 
	`Log
(è<< 
Endl
;

1019 
	`Log
(è<< "High fid–™y PDFƒ¡im©e ¬mªd©Üy, i.e., suffic›Á¿ššg " << 
Endl
;

1020 
	`Log
(è<< "¡©i¡ic i »quœedØpİuÏ‹h oàthdi¡ributiÚs" << 
Endl
;

1021 
	`Log
(è<< "Iˆwould b¨su½ri£ iàthdeçuÉ S¶šÜ KDE k”ÃÈ·¿m‘”s" << 
Endl
;

1022 
	`Log
(è<< "´ovid¨§tisfyšg f™Øthd©a. Thu£¸i advi£dØ´İ”ly" << 
Endl
;

1023 
	`Log
(è<< "tuÃhev’t ³¸bš‡nd smoÙh o±iÚ šh¥lšÿ£s" << 
Endl
;

1024 
	`Log
(è<< "šdividu®ly…” v¬ŸbË. IàthKDE k”ÃÈi u£d,had­tive" << 
Endl
;

1025 
	`Log
(è<< "GaussŸÀk”ÃÈmay†—dØ¬‹çùs, sØ¶—£‡lway ®sØŒy" << 
Endl
;

1026 
	`Log
(è<< "thnÚ-ad­tivÚe." << 
Endl
;

1027 
	`Log
(è<< "" << 
Endl
;

1028 
	`Log
(è<< "AÎunšg…¬am‘” mu¡ badju¡ed individu®ly fÜƒach iÅut" << 
Endl
;

1029 
	`Log
(è<< "v¬ŸbË!" << 
Endl
;

1030 
	}
}

	@src/MethodMLP.cxx

45 
	~"TMVA/M‘hodMLP.h
"

47 
	~"TMVA/CÚfig.h
"

48 
	~"TMVA/CÚfigu¿bË.h
"

49 
	~"TMVA/CÚv”g’ûTe¡.h
"

50 
	~"TMVA/CÏssif›rFaùÜy.h
"

51 
	~"TMVA/D©aS‘.h
"

52 
	~"TMVA/D©aS‘Info.h
"

53 
	~"TMVA/F™‹rBa£.h
"

54 
	~"TMVA/G’‘icF™‹r.h
"

55 
	~"TMVA/IF™‹rT¬g‘.h
"

56 
	~"TMVA/IM‘hod.h
"

57 
	~"TMVA/IÁ”v®.h
"

58 
	~"TMVA/M‘hodANNBa£.h
"

59 
	~"TMVA/MsgLogg”.h
"

60 
	~"TMVA/TNeurÚ.h
"

61 
	~"TMVA/TSyÇp£.h
"

62 
	~"TMVA/Tim”.h
"

63 
	~"TMVA/ToŞs.h
"

64 
	~"TMVA/Ty³s.h
"

66 
	~"TH1.h
"

67 
	~"TSŒšg.h
"

68 
	~"TT»e.h
"

69 
	~"Rio¡»am.h
"

70 
	~"TF™‹r.h
"

71 
	~"TM©rixD.h
"

72 
	~"TM©h.h
"

73 
	~"TFe.h
"

75 
	~<cm©h
>

76 
	~<veùÜ
>

78 #ifdeà
M‘hodMLP_U£Mšu™__


79 
	gTMVA
::
M‘hodMLP
* 
TMVA
::M‘hodMLP::
fgThis
 = 0;

80 
BoŞ_t
 
	gM‘hodMLP_U£Mšu™
 = 
kTRUE
;

83 
	$REGISTER_METHOD
(
MLP
)

85 
	`CÏssImp
(
TMVA
::
M‘hodMLP
);

87 
usšg
 
¡d
::
veùÜ
;

92 
TMVA
::
M‘hodMLP
::
	$M‘hodMLP
ĞcÚ¡ 
TSŒšg
& 
jobName
,

93 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

94 
D©aS‘Info
& 
theD©a
,

95 cÚ¡ 
TSŒšg
& 
theO±iÚ
)

96 : 
	`M‘hodANNBa£
Ğ
jobName
, 
Ty³s
::
kMLP
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

97 
	`fU£ReguÏtÜ
(
çl£
), 
	`fC®cuÏ‹E¼Üs
(false),

98 
	`fPriÜ
(0.0), 
	`fPriÜDev
(0), 
	`fUpd©eLim™
(0),

99 
	`fT¿ššgM‘hod
(
kBFGS
), 
	`fT¿šM‘hodS
("BFGS"),

100 
	`fSam¶šgF¿ùiÚ
(1.0), 
	`fSam¶šgEpoch
(0.0), 
	`fSam¶šgWeight
(0.0),

101 
	`fSam¶šgT¿ššg
(
çl£
), 
	`fSam¶šgTe¡šg
(false),

102 
	`fLa¡AÍha
(0.0), 
	`fTau
(0.),

103 
	`fRe£tS‹p
(0), 
	`fL—ºR©e
(0.0), 
	`fDeÿyR©e
(0.0),

104 
	`fBPMode
(
kSequ’tŸl
), 
	`fBpModeS
("None"),

105 
	`fB©chSize
(0), 
	`fTe¡R©e
(0), 
	`fEpochMÚ
(
çl£
),

106 
	`fGA_n¡•s
(0), 
	`fGA_´eC®c
(0), 
	`fGA_SC_¡•s
(0),

107 
	`fGA_SC_¿‹
(0), 
	`fGA_SC_çùÜ
(0.0),

108 
	`fDevŸtiÚsFromT¬g‘s
(0),

109 
	$fWeightRªge
 (1.0)

112 
	}
}

117 
	gTMVA
::
M‘hodMLP
::
	$M‘hodMLP
Ğ
D©aS‘Info
& 
theD©a
,

118 cÚ¡ 
TSŒšg
& 
theWeightFe
)

119 : 
	`M‘hodANNBa£
Ğ
Ty³s
::
kMLP
, 
theD©a
, 
theWeightFe
),

120 
	`fU£ReguÏtÜ
(
çl£
), 
	`fC®cuÏ‹E¼Üs
(false),

121 
	`fPriÜ
(0.0), 
	`fPriÜDev
(0), 
	`fUpd©eLim™
(0),

122 
	`fT¿ššgM‘hod
(
kBFGS
), 
	`fT¿šM‘hodS
("BFGS"),

123 
	`fSam¶šgF¿ùiÚ
(1.0), 
	`fSam¶šgEpoch
(0.0), 
	`fSam¶šgWeight
(0.0),

124 
	`fSam¶šgT¿ššg
(
çl£
), 
	`fSam¶šgTe¡šg
(false),

125 
	`fLa¡AÍha
(0.0), 
	`fTau
(0.),

126 
	`fRe£tS‹p
(0), 
	`fL—ºR©e
(0.0), 
	`fDeÿyR©e
(0.0),

127 
	`fBPMode
(
kSequ’tŸl
), 
	`fBpModeS
("None"),

128 
	`fB©chSize
(0), 
	`fTe¡R©e
(0), 
	`fEpochMÚ
(
çl£
),

129 
	`fGA_n¡•s
(0), 
	`fGA_´eC®c
(0), 
	`fGA_SC_¡•s
(0),

130 
	`fGA_SC_¿‹
(0), 
	`fGA_SC_çùÜ
(0.0),

131 
	`fDevŸtiÚsFromT¬g‘s
(0),

132 
	$fWeightRªge
 (1.0)

134 
	}
}

140 
	gTMVA
::
M‘hodMLP
::~
	$M‘hodMLP
()

142 
	}
}

144 
TMVA
::
M‘hodMLP
::
	$T¿š
()

146 
	`T¿š
(
	`NumCyşes
());

147 
	}
}

154 
BoŞ_t
 
	gTMVA
::
M‘hodMLP
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

156 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2 )  
kTRUE
;

157 ià(
ty³
 =ğ
Ty³s
::
kMuÉişass
 )  
kTRUE
;

158 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 )  
kTRUE
;

160  
kFALSE
;

161 
	}
}

166 
	gTMVA
::
M‘hodMLP
::
	$In™
()

169 
	`S‘SigÇlReã»nûCut
( 0.5 );

170 #ifdeà
M‘hodMLP_U£Mšu™__


171 
fgThis
 = 
this
;

173 
	}
}

197 
	gTMVA
::
M‘hodMLP
::
	$Deş¬eO±iÚs
()

199 
	`Deş¬eO±iÚRef
(
fT¿šM‘hodS
="BP", "TrainingMethod",

201 
	`AddP»DefV®
(
	`TSŒšg
("BP"));

202 
	`AddP»DefV®
(
	`TSŒšg
("GA"));

203 
	`AddP»DefV®
(
	`TSŒšg
("BFGS"));

205 
	`Deş¬eO±iÚRef
(
fL—ºR©e
=0.02, "LearningRate", "ANN†earning„ate…arameter");

206 
	`Deş¬eO±iÚRef
(
fDeÿyR©e
=0.01, "DecayRate", "Decay„ate for†earning…arameter");

207 
	`Deş¬eO±iÚRef
(
fTe¡R©e
 =10, "TestRate", "Test for overtraining…erformed‡tƒach #thƒpochs");

208 
	`Deş¬eO±iÚRef
(
fEpochMÚ
 = 
kFALSE
, "EpochMonitoring", "Provideƒpoch-wise monitoring…lots‡ccordingo TestRate (caution: causes big ROOT output file!)" );

210 
	`Deş¬eO±iÚRef
(
fSam¶šgF¿ùiÚ
=1.0, "Sampling","Only 'Sampling' (randomly selected)ƒvents‡rerainedƒachƒpoch");

211 
	`Deş¬eO±iÚRef
(
fSam¶šgEpoch
=1.0, "SamplingEpoch","Sampling is used forhe first 'SamplingEpoch'ƒpochs,‡fterwards,‡llƒvents‡reaken forraining");

212 
	`Deş¬eO±iÚRef
(
fSam¶šgWeight
=1.0, "SamplingImportance"," The sampling weights ofƒvents inƒpochs which successful (worseƒstimatorhan before)‡re multiplied with SamplingImportance,ƒlsehey‡re divided.");

214 
	`Deş¬eO±iÚRef
(
fSam¶šgT¿ššg
=
kTRUE
, "SamplingTraining","Theraining sample is sampled");

215 
	`Deş¬eO±iÚRef
(
fSam¶šgTe¡šg
ğ
kFALSE
, "SamplingTesting" ,"Theesting sample is sampled");

217 
	`Deş¬eO±iÚRef
(
fRe£tS‹p
=50, "ResetStep", "How often BFGS should„eset history");

218 
	`Deş¬eO±iÚRef
(
fTau
 =3.0, "Tau", "LineSearch \"size step\"");

220 
	`Deş¬eO±iÚRef
(
fBpModeS
="sequential", "BPMode",

222 
	`AddP»DefV®
(
	`TSŒšg
("sequential"));

223 
	`AddP»DefV®
(
	`TSŒšg
("batch"));

225 
	`Deş¬eO±iÚRef
(
fB©chSize
=-1, "BatchSize",

228 
	`Deş¬eO±iÚRef
(
fIm´ovem’t
=1e-30, "ConvergenceImprove",

231 
	`Deş¬eO±iÚRef
(
fS‹ps
=-1, "ConvergenceTests",

234 
	`Deş¬eO±iÚRef
(
fU£ReguÏtÜ
=
kFALSE
, "UseRegulator",

236 
	`Deş¬eO±iÚRef
(
fUpd©eLim™
=10000, "UpdateLimit",

238 
	`Deş¬eO±iÚRef
(
fC®cuÏ‹E¼Üs
=
kFALSE
, "CalculateErrors",

241 
	`Deş¬eO±iÚRef
(
fWeightRªge
=1.0, "WeightRange",

244 
	}
}

249 
	gTMVA
::
M‘hodMLP
::
	$ProûssO±iÚs
()

251 
M‘hodANNBa£
::
	`ProûssO±iÚs
();

254 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

255 
	`Log
(è<< 
kINFO


257 << 
Endl
;

261 ià(
fT¿šM‘hodS
 =ğ"BP" ) 
fT¿ššgM‘hod
 = 
kBP
;

262 ià(
fT¿šM‘hodS
 =ğ"BFGS"è
fT¿ššgM‘hod
 = 
kBFGS
;

263 ià(
fT¿šM‘hodS
 =ğ"GA" ) 
fT¿ššgM‘hod
 = 
kGA
;

265 ià(
fBpModeS
 =ğ"£qu’tŸl"è
fBPMode
 = 
kSequ’tŸl
;

266 ià(
fBpModeS
 =ğ"b©ch"è
fBPMode
 = 
kB©ch
;

270 ià(
fBPMode
 =ğ
kB©ch
) {

271 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

272 
IÁ_t
 
numEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

273 ià(
fB©chSize
 < 1 || fB©chSiz> 
numEv’ts
) fBatchSize =‚umEvents;

275 
	}
}

280 
	gTMVA
::
M‘hodMLP
::
	$In™ŸlizeL—ºšgR©es
()

282 
	`Log
(è<< 
kDEBUG
 << "In™ŸlizË¬nšg„©es" << 
Endl
;

283 
TSyÇp£
 *
syÇp£
;

284 
IÁ_t
 
numSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

285 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++) {

286 
syÇp£
 = (
TSyÇp£
*)
fSyÇp£s
->
	`At
(
i
);

287 
syÇp£
->
	`S‘L—ºšgR©e
(
fL—ºR©e
);

289 
	}
}

294 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
ET»eTy³
 
Œ“Ty³
, 
IÁ_t
 
iEpoch
 )

297 ià(
Œ“Ty³
!=
Ty³s
::
kT¿ššg
 &&»eTy³!=Ty³s::
kTe¡šg
) {

298 
	`Log
(è<< 
kFATAL
 << "<C®cuÏ‹E¡im©Ü> f©®ƒ¼Ü: wrÚg»ty³: " << 
Œ“Ty³
 << 
Endl
;

301 
Ty³s
::
ET»eTy³
 
§veTy³
 = 
	`D©a
()->
	`G‘Cu¼’tTy³
();

302 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Œ“Ty³
);

305 
TSŒšg
 
ty³
 = (
Œ“Ty³
 =ğ
Ty³s
::
kT¿ššg
 ? "train" : "test");

306 
TSŒšg
 
Çme
 = 
	`FÜm
("cÚv”g’û‹¡___mÍ_%s_•och_%04i", 
ty³
.
	`D©a
(), 
iEpoch
);

307 
TSŒšg
 
ÇmeB
 = 
Çme
 + "_B";

308 
TSŒšg
 
ÇmeS
 = 
Çme
 + "_S";

309 
IÁ_t
 
nbš
 = 100;

310 
Flßt_t
 
lim™
 = 2;

311 
TH1
* 
hi¡S
 = 0;

312 
TH1
* 
hi¡B
 = 0;

313 ià(
fEpochMÚ
 && 
iEpoch
 >ğ0 && !
	`DoReg»ssiÚ
()) {

314 
hi¡S
 = 
Ãw
 
	`TH1F
Ğ
ÇmeS
,‚ameS, 
nbš
, -
lim™
,†imit );

315 
hi¡B
 = 
Ãw
 
	`TH1F
Ğ
ÇmeB
,‚ameB, 
nbš
, -
lim™
,†imit );

318 
DoubË_t
 
e¡im©Ü
 = 0;

321 
IÁ_t
 
nEv’ts
 = 
	`G‘NEv’ts
();

322 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

323 
UIÁ_t
 
nTgts
 = 
	`D©aInfo
().
	`G‘NT¬g‘s
();

326 
Flßt_t
 
sumOfWeights
 = 0.f;

327 ifĞ
fWeightRªge
 < 1.f ){

328 
fDevŸtiÚsFromT¬g‘s
 = 
Ãw
 
¡d
::
veùÜ
<¡d::
·œ
<
Flßt_t
,Flßt_t> >(
nEv’ts
);

331 
IÁ_t
 
i
 = 0; i < 
nEv’ts
; i++) {

333 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
i
);

335 ià((
ev
->
	`G‘Weight
(è< 0è&& 
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()

336 && (
§veTy³
 =ğ
Ty³s
::
kT¿ššg
)){

340 
DoubË_t
 
w
 = 
ev
->
	`G‘Weight
();

342 
	`FÜûN‘wÜkIÅuts
Ğ
ev
 );

343 
	`FÜûN‘wÜkC®cuÏtiÚs
();

345 
DoubË_t
 
d
 = 0, 
v
 = 0;

346 ià(
	`DoReg»ssiÚ
()) {

347 
UIÁ_t
 
™gt
 = 0; itgˆ< 
nTgts
; itgt++) {

348 
v
 = 
	`G‘OuutNeurÚ
Ğ
™gt
 )->
	`G‘Aùiv©iÚV®ue
();

349 
DoubË_t
 
rg‘V®ue
 = 
ev
->
	`G‘T¬g‘
Ğ
™gt
 );

350 
DoubË_t
 
dt
 = 
v
 - 
rg‘V®ue
;

351 
d
 +ğ(
dt
*dt);

353 
e¡im©Ü
 +ğ
d
*
w
;

354 } ià(
	`DoMuÉişass
() ) {

355 
UIÁ_t
 
şs
 = 
ev
->
	`G‘CÏss
();

356 ià(
fE¡im©Ü
==
kCE
){

357 
DoubË_t
 
	`nÜm
(0);

358 
UIÁ_t
 
işs
 = 0; iş < 
nCÏs£s
; icls++) {

359 
Flßt_t
 
aùiv©iÚV®ue
 = 
	`G‘OuutNeurÚ
Ğ
işs
 )->
	`G‘Aùiv©iÚV®ue
();

360 
nÜm
 +ğ
	`exp
Ğ
aùiv©iÚV®ue
 );

361 if(
işs
==
şs
)

362 
d
 = 
	`exp
Ğ
aùiv©iÚV®ue
 );

364 
d
 = -
TM©h
::
	`Log
(d/
nÜm
);

367 
UIÁ_t
 
işs
 = 0; iş < 
nCÏs£s
; icls++) {

368 
DoubË_t
 
desœed
 = (
işs
==
şs
) ? 1.0 : 0.0;

369 
v
 = 
	`G‘OuutNeurÚ
Ğ
işs
 )->
	`G‘Aùiv©iÚV®ue
();

370 
d
 = (
desœed
-
v
)*(desired-v);

373 
e¡im©Ü
 +ğ
d
*
w
;

375 
DoubË_t
 
desœed
 = 
	`D©aInfo
().
	`IsSigÇl
(
ev
)?1.:0.;

376 
v
 = 
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
();

377 ià(
fE¡im©Ü
==
kMSE
è
d
 = (
desœed
-
v
)*(desired-v);

378 ià(
fE¡im©Ü
==
kCE
è
d
 = -2*(
desœed
*
TM©h
::
	`Log
(
v
)+(1-desired)*TMath::Log(1-v));

379 
e¡im©Ü
 +ğ
d
*
w
;

382 ifĞ
fDevŸtiÚsFromT¬g‘s
 )

383 
fDevŸtiÚsFromT¬g‘s
->
	`push_back
(
¡d
::
·œ
<
Flßt_t
,Flßt_t>(
d
,
w
));

385 
sumOfWeights
 +ğ
w
;

389 ià(
	`D©aInfo
().
	`IsSigÇl
(
ev
è&& 
hi¡S
 !ğ0èhi¡S->
	`Fl
Ğ(
v
), (
w
) );

390 ià(
hi¡B
 !ğ0èhi¡B->
	`Fl
Ğ(
v
), (
w
) );

394 ifĞ
fDevŸtiÚsFromT¬g‘s
 ) {

395 
¡d
::
	`sÜt
(
fDevŸtiÚsFromT¬g‘s
->
	`begš
(),fDevŸtiÚsFromT¬g‘s->
	`’d
());

397 
Flßt_t
 
sumOfWeightsInRªge
 = 
fWeightRªge
*
sumOfWeights
;

398 
e¡im©Ü
 = 0.f;

400 
Flßt_t
 
weightRªgeCut
 = 
fWeightRªge
*
sumOfWeights
;

401 
Flßt_t
 
weightSum
 = 0.f;

402 
¡d
::
veùÜ
<¡d::
·œ
<
Flßt_t
,Flßt_t> >::
™”©Ü
 
™Dev
 = 
fDevŸtiÚsFromT¬g‘s
->
	`begš
(), 
™DevEnd
 = fDevŸtiÚsFromT¬g‘s->
	`’d
(); itDev != itDevEnd; ++itDev ){

403 
devŸtiÚ
 = (*
™Dev
).
fœ¡
;

404 
devWeight
 = (*
™Dev
).
£cÚd
;

405 
weightSum
 +ğ
devWeight
;

406 ifĞ
weightSum
 <ğ
weightRªgeCut
 ) {

407 
e¡im©Ü
 +ğ
devWeight
*
devŸtiÚ
;

411 
sumOfWeights
 = 
sumOfWeightsInRªge
;

412 
d–‘e
 
fDevŸtiÚsFromT¬g‘s
;

415 ià(
hi¡S
 !ğ0è
fEpochMÚHi¡S
.
	`push_back
( histS );

416 ià(
hi¡B
 !ğ0è
fEpochMÚHi¡B
.
	`push_back
( histB );

421 ià(
	`DoReg»ssiÚ
()è
e¡im©Ü
 =ƒ¡im©Ü/
	`Flßt_t
(
sumOfWeights
);

422 ià(
	`DoMuÉişass
()è
e¡im©Ü
 =ƒ¡im©Ü/
	`Flßt_t
(
sumOfWeights
);

423 
e¡im©Ü
 =ƒ¡im©Ü/
	`Flßt_t
(
sumOfWeights
);

428 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
§veTy³
 );

431 ià(
fEpochMÚ
 && 
iEpoch
 >ğ0 && !
	`DoReg»ssiÚ
(è&& 
Œ“Ty³
 =ğ
Ty³s
::
kT¿ššg
) {

432 
	`C»©eWeightMÚ™ÜšgHi¡s
Ğ
	`FÜm
("•ochmÚ™Üšg___•och_%04i_weights_hi¡", 
iEpoch
), &
fEpochMÚHi¡W
 );

435  
e¡im©Ü
;

436 
	}
}

440 
	gTMVA
::
M‘hodMLP
::
	$T¿š
(
IÁ_t
 
nEpochs
)

442 ià(
fN‘wÜk
 == 0) {

444 
	`Log
(è<< 
kFATAL
 <<"ANN N‘wÜk i nÙ in™Ÿlized, došg iˆnow!"<< 
Endl
;

445 
	`S‘AÇlysisTy³
(
	`G‘AÇlysisTy³
());

447 
	`Log
(è<< 
kDEBUG
 << "»š™ŸlizË¬nšg„©es" << 
Endl
;

448 
	`In™ŸlizeL—ºšgR©es
();

449 
	`Log
(è<< 
kHEADER
;

450 
	`PrštMes§ge
("Training Network");

451 
	`Log
(è<< 
Endl
;

452 
IÁ_t
 
nEv’ts
=
	`G‘NEv’ts
();

453 
IÁ_t
 
nSyÇp£s
=
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

454 ià(
nSyÇp£s
>
nEv’ts
)

455 
	`Log
()<<
kWARNING
<<"ANNoØcom¶iÿ‹d: #ev’ts="<<
nEv’ts
<<"\t#syÇp£s="<<
nSyÇp£s
<<
Endl
;

457 
fIPyMaxI‹r
 = 
nEpochs
;

458 ià(
fIÁ”aùive
 && fIÁ”aùive->
	`NÙIn™Ÿlized
()){

459 
¡d
::
veùÜ
<
TSŒšg
> 
t™Ës
 = {"Error onraining set", "Error onest set"};

460 
fIÁ”aùive
->
	`In™
(
t™Ës
);

463 #ifdeà
M‘hodMLP_U£Mšu™__


464 ià(
u£Mšu™
è
	`Mšu™Mšimize
();

466 ià(
fT¿ššgM‘hod
 =ğ
kGA
è
	`G’‘icMšimize
();

467 ià(
fT¿ššgM‘hod
 =ğ
kBFGS
è
	`BFGSMšimize
(
nEpochs
);

468 
	`BackPrİag©iÚMšimize
(
nEpochs
);

471 
ŒašE
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 0 ) ;

472 
‹¡E
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kTe¡šg
, 0 ) ;

473 ià(
fU£ReguÏtÜ
){

474 
	`Log
()<<
kINFO
<<"Fš®izšg hªdlšg oàReguÏtÜ”ms,¿šE="<<
ŒašE
<<"e¡E="<<
‹¡E
<<
Endl
;

475 
	`Upd©eReguÏtÜs
();

476 
	`Log
()<<
kINFO
<<"DÚw™h hªdlšg oàReguÏtÜ”ms"<<
Endl
;

479 ifĞ
fC®cuÏ‹E¼Üs
 || 
fU£ReguÏtÜ
 )

481 
IÁ_t
 
numSyÇp£s
=
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

482 
fInvHessŸn
.
	`ResizeTo
(
numSyÇp£s
,numSynapses);

483 
	`G‘AµroxInvHessŸn
Ğ
fInvHessŸn
 ,
çl£
);

485 
	`Ex™FromT¿ššg
();

486 
	}
}

491 
	gTMVA
::
M‘hodMLP
::
	$BFGSMšimize
Ğ
IÁ_t
 
nEpochs
 )

493 
Tim”
 
	`tim”
Ğ(
fS‹ps
>0?100:
nEpochs
), 
	`G‘Name
() );

496 
IÁ_t
 
nbšTe¡
 = 
	`IÁ_t
(
nEpochs
/
fTe¡R©e
);

497 if(!
	`IsS’tFe
())

499 
fE¡im©ÜHi¡T¿š
 = 
Ãw
 
	`TH1F
( "estimatorHistTrain", "trainingƒstimator",

500 
nbšTe¡
, 
	`IÁ_t
(
fTe¡R©e
/2),‚binTest*fTestRate+Int_t(fTestRate/2) );

501 
fE¡im©ÜHi¡Te¡
 = 
Ãw
 
	`TH1F
( "estimatorHistTest", "testƒstimator",

502 
nbšTe¡
, 
	`IÁ_t
(
fTe¡R©e
/2),‚binTest*fTestRate+Int_t(fTestRate/2) );

505 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

506 
IÁ_t
 
nWeights
 = 
nSyÇp£s
;

508 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

509 
TSyÇp£
* 
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

510 
syÇp£
->
	`S‘DEDw
(0.0);

513 
¡d
::
veùÜ
<
DoubË_t
> 
	`bufãr
Ğ
nWeights
 );

514 
IÁ_t
 
i
=0;i<
nWeights
;i++è
bufãr
[i] = 0.;

516 
TM©rixD
 
	`Dœ
 ( 
nWeights
, 1 );

517 
TM©rixD
 
	`HessŸn
 ( 
nWeights
,‚Weights );

518 
TM©rixD
 
	`Gamma
 ( 
nWeights
, 1 );

519 
TM©rixD
 
	`D–
 ( 
nWeights
, 1 );

520 
IÁ_t
 
RegUpd©eCD
=0;

521 
IÁ_t
 
RegUpd©eTimes
=0;

522 
DoubË_t
 
AccuE¼Ü
=0;

524 
DoubË_t
 
ŒašE
 = -1;

525 
DoubË_t
 
‹¡E
 = -1;

527 
fLa¡AÍha
 = 0.;

529 if(
fSam¶šgT¿ššg
 || 
fSam¶šgTe¡šg
)

530 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0,
fRªdomS“d
);

532 ià(
fS‹ps
 > 0è
	`Log
(è<< 
kINFO
 << "IÇccu¿‹…rog»s timšg fÜ MLP... " << 
Endl
;

533 
tim”
.
	`D¿wProg»ssB¬
( 0 );

536 
IÁ_t
 
i
 = 0; i < 
nEpochs
; i++) {

538 ià(
fEx™FromT¿ššg
) ;

539 
fIPyCu¼’tI‹r
 = 
i
;

540 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
) {

541 ià((
i
+1)%
fTe¡R©e
 == 0 || (i == 0)) {

542 ià(
fSam¶šgT¿ššg
) {

543 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

544 
	`D©a
()->
	`In™Sam¶šg
(
fSam¶šgF¿ùiÚ
,
fSam¶šgWeight
);

545 
	`D©a
()->
	`C»©eSam¶šg
();

547 ià(
fSam¶šgTe¡šg
) {

548 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kTe¡šg
 );

549 
	`D©a
()->
	`In™Sam¶šg
(
fSam¶šgF¿ùiÚ
,
fSam¶šgWeight
);

550 
	`D©a
()->
	`C»©eSam¶šg
();

555 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

556 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0);

557 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kTe¡šg
 );

558 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0);

560 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

563 ià(
fU£ReguÏtÜ
) {

564 
	`Upd©ePriÜs
();

565 
RegUpd©eCD
++;

569 
	`S‘GammaD–
Ğ
Gamma
, 
D–
, 
bufãr
 );

571 ià(
i
 % 
fRe£tS‹p
 =ğ0 && i<0.5*
nEpochs
) {

572 
	`S‹•e¡Dœ
Ğ
Dœ
 );

573 
HessŸn
.
	`Un™M©rix
();

574 
RegUpd©eCD
=0;

577 ià(
	`G‘HessŸn
Ğ
HessŸn
, 
Gamma
, 
D–
 )) {

578 
	`S‹•e¡Dœ
Ğ
Dœ
 );

579 
HessŸn
.
	`Un™M©rix
();

580 
RegUpd©eCD
=0;

582 
	`S‘Dœ
Ğ
HessŸn
, 
Dœ
 );

585 
DoubË_t
 
dE¼Ü
=0;

586 ià(
	`D”ivDœ
Ğ
Dœ
 ) > 0) {

587 
	`S‹•e¡Dœ
Ğ
Dœ
 );

588 
HessŸn
.
	`Un™M©rix
();

589 
RegUpd©eCD
=0;

591 ià(
	`LšeS—rch
Ğ
Dœ
, 
bufãr
, &
dE¼Ü
 )) {

592 
HessŸn
.
	`Un™M©rix
();

593 
	`S‹•e¡Dœ
Ğ
Dœ
 );

594 
RegUpd©eCD
=0;

595 ià(
	`LšeS—rch
(
Dœ
, 
bufãr
, &
dE¼Ü
)) {

596 
i
 = 
nEpochs
;

597 
	`Log
(è<< 
kFATAL
 << "Lš£¬ch faed! HugŒoubË somewh”e..." << 
Endl
;

602 ià(
dE¼Ü
<0è
	`Log
()<<
kWARNING
<<"\Âeg©ivdE¼Ü=" <<dE¼Ü<<
Endl
;

603 
AccuE¼Ü
+=
dE¼Ü
;

605 iàĞ
fU£ReguÏtÜ
 && 
RegUpd©eTimes
<
fUpd©eLim™
 && 
RegUpd©eCD
>=5 && 
	`çbs
(
dE¼Ü
)<0.1*
AccuE¼Ü
) {

606 
	`Log
()<<
kDEBUG
<<"\n\nUpd©»guÏtÜ "<<
RegUpd©eTimes
<<" oÀ•och "<<
i
<<"\tdE¼Ü="<<
dE¼Ü
<<
Endl
;

607 
	`Upd©eReguÏtÜs
();

608 
HessŸn
.
	`Un™M©rix
();

609 
RegUpd©eCD
=0;

610 
RegUpd©eTimes
++;

611 
AccuE¼Ü
=0;

616 ià((
i
+1)%
fTe¡R©e
 == 0) {

619 
ŒašE
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 
i
 ) ;

620 
‹¡E
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kTe¡šg
, 
i
 ) ;

621 ià(
fIÁ”aùive
èfIÁ”aùive->
	`AddPošt
(
i
+1, 
ŒašE
, 
‹¡E
);

622 if(!
	`IsS’tFe
())

624 
fE¡im©ÜHi¡T¿š
->
	`Fl
Ğ
i
+1, 
ŒašE
 );

625 
fE¡im©ÜHi¡Te¡
 ->
	`Fl
Ğ
i
+1, 
‹¡E
 );

627 
BoŞ_t
 
sucûss
 = 
kFALSE
;

628 ià((
‹¡E
 < 
	`G‘Cu¼’tV®ue
()) || (GetCurrentValue()<1e-100)) {

629 
sucûss
 = 
kTRUE
;

631 
	`D©a
()->
	`Ev’tResuÉ
Ğ
sucûss
 );

633 
	`S‘Cu¼’tV®ue
Ğ
‹¡E
 );

634 ià(
	`HasCÚv”ged
()) {

635 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
) {

636 
IÁ_t
 
ÃwEpoch
 = 
	`IÁ_t
(
fSam¶šgEpoch
*
nEpochs
);

637 
i
 = 
ÃwEpoch
;

638 
	`Re£tCÚv”g’ûCouÁ”
();

645 
TSŒšg
 
cÚvText
 = 
	`FÜm
Ğ"<D^2> (Œaš/‹¡/•och): %.4g/%.4g/%d", 
ŒašE
, 
‹¡E
,
i
 );

646 ià(
fS‹ps
 > 0) {

647 
Flßt_t
 
´og»ss
 = 0;

648 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
)

650 
´og»ss
 = 
	`Prog»ss
()*
fSam¶šgF¿ùiÚ
*100*
fSam¶šgEpoch
;

654 
´og»ss
 = 100.0*(
fSam¶šgF¿ùiÚ
*
fSam¶šgEpoch
+(1.0-fSam¶šgEpoch)*
	`Prog»ss
());

656 
Flßt_t
 
´og»ss2
ğ100.0*
RegUpd©eTimes
/
fUpd©eLim™
;

657 ià(
´og»ss2
>
´og»ss
)…rogress=progress2;

658 
tim”
.
	`D¿wProg»ssB¬
Ğ
	`IÁ_t
(
´og»ss
), 
cÚvText
 );

661 
IÁ_t
 
´og»ss
=
	`IÁ_t
(
nEpochs
*
RegUpd©eTimes
/
	`Flßt_t
(
fUpd©eLim™
));

662 ià(
´og»ss
<
i
)…rogress=i;

663 
tim”
.
	`D¿wProg»ssB¬
Ğ
´og»ss
, 
cÚvText
 );

667 ià(
fgPRINT_SEQ
) {

668 
	`PrštN‘wÜk
();

669 
	`Wa™FÜKeybßrd
();

672 
	}
}

676 
	gTMVA
::
M‘hodMLP
::
S‘GammaD–
Ğ
TM©rixD
 &
Gamma
, TM©rixD &
D–
, 
¡d
::
veùÜ
<
DoubË_t
> &
bufãr
 )

678 
IÁ_t
 
nWeights
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

680 
IÁ_t
 
	gIDX
 = 0;

681 
IÁ_t
 
	gnSyÇp£s
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

682 
IÁ_t
 
	gi
=0;i<
	gnSyÇp£s
;i++) {

683 
TSyÇp£
 *
	gsyÇp£
 = (TSyÇp£*)
fSyÇp£s
->
At
(
i
);

684 
	gGamma
[
IDX
++][0] = -
syÇp£
->
G‘DEDw
();

687 
IÁ_t
 
	gi
=0;i<
	gnWeights
;i++è
	gD–
[
i
][0] = 
bufãr
[i];

689 
Compu‹DEDw
();

691 
	gIDX
 = 0;

692 
IÁ_t
 
	gi
=0;i<
	gnSyÇp£s
;i++)

694 
TSyÇp£
 *
	gsyÇp£
 = (TSyÇp£*)
fSyÇp£s
->
At
(
i
);

695 
	gGamma
[
IDX
++][0] +ğ
syÇp£
->
G‘DEDw
();

701 
	gTMVA
::
M‘hodMLP
::
	$Compu‹DEDw
()

703 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

704 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

705 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

706 
syÇp£
->
	`S‘DEDw
( 0.0 );

709 
IÁ_t
 
nEv’ts
 = 
	`G‘NEv’ts
();

710 
IÁ_t
 
nPosEv’ts
 = 
nEv’ts
;

711 
IÁ_t
 
i
=0;i<
nEv’ts
;i++) {

713 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
i
);

714 ià((
ev
->
	`G‘Weight
(è< 0è&& 
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()

715 && (
	`D©a
()->
	`G‘Cu¼’tTy³
(è=ğ
Ty³s
::
kT¿ššg
)){

716 --
nPosEv’ts
;

720 
	`SimuÏ‹Ev’t
Ğ
ev
 );

722 
IÁ_t
 
j
=0;j<
nSyÇp£s
;j++) {

723 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
j
);

724 
syÇp£
->
	`S‘DEDw
ĞsyÇp£->
	`G‘DEDw
(è+ syÇp£->
	`G‘D–
() );

728 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

729 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

730 
DoubË_t
 
DEDw
=
syÇp£
->
	`G‘DEDw
();

731 ià(
fU£ReguÏtÜ
è
DEDw
+=
fPriÜDev
[
i
];

732 
syÇp£
->
	`S‘DEDw
Ğ
DEDw
 / 
nPosEv’ts
 );

734 
	}
}

738 
	gTMVA
::
M‘hodMLP
::
	$SimuÏ‹Ev’t
ĞcÚ¡ 
Ev’t
* 
ev
 )

740 
DoubË_t
 
ev’tWeight
 = 
ev
->
	`G‘Weight
();

742 
	`FÜûN‘wÜkIÅuts
Ğ
ev
 );

743 
	`FÜûN‘wÜkC®cuÏtiÚs
();

745 ià(
	`DoReg»ssiÚ
()) {

746 
UIÁ_t
 
Ágt
 = 
	`D©aInfo
().
	`G‘NT¬g‘s
();

747 
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágt
; itgt++) {

748 
DoubË_t
 
desœed
 = 
ev
->
	`G‘T¬g‘
(
™gt
);

749 
DoubË_t
 
”rÜ
 = ( 
	`G‘OuutNeurÚ
Ğ
™gt
 )->
	`G‘Aùiv©iÚV®ue
(è- 
desœed
 )*
ev’tWeight
;

750 
	`G‘OuutNeurÚ
Ğ
™gt
 )->
	`S‘E¼Ü
(
”rÜ
);

752 } ià(
	`DoMuÉişass
()) {

753 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

754 
UIÁ_t
 
şs
 = 
ev
->
	`G‘CÏss
();

755 
UIÁ_t
 
işs
 = 0; iş < 
nCÏs£s
; icls++) {

756 
DoubË_t
 
desœed
 = ( 
şs
==
işs
 ? 1.0 : 0.0 );

757 
DoubË_t
 
”rÜ
 = ( 
	`G‘OuutNeurÚ
Ğ
işs
 )->
	`G‘Aùiv©iÚV®ue
(è- 
desœed
 )*
ev’tWeight
;

758 
	`G‘OuutNeurÚ
Ğ
işs
 )->
	`S‘E¼Ü
(
”rÜ
);

761 
DoubË_t
 
desœed
 = 
	`G‘DesœedOuut
Ğ
ev
 );

762 
DoubË_t
 
”rÜ
=-1;

763 ià(
fE¡im©Ü
==
kMSE
è
”rÜ
 = ( 
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
(è- 
desœed
 )*
ev’tWeight
;

764 ià(
fE¡im©Ü
==
kCE
è
”rÜ
 = -
ev’tWeight
/(
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
(è-1 + 
desœed
);

765 
	`G‘OuutNeurÚ
()->
	`S‘E¼Ü
(
”rÜ
);

768 
	`C®cuÏ‹NeurÚD–s
();

769 
IÁ_t
 
j
=0;j<
fSyÇp£s
->
	`G‘EÁr›sFa¡
();j++) {

770 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
j
);

771 
syÇp£
->
	`In™D–
();

772 
syÇp£
->
	`C®cuÏ‹D–
();

774 
	}
}

778 
	gTMVA
::
M‘hodMLP
::
	$S‹•e¡Dœ
Ğ
TM©rixD
 &
Dœ
 )

780 
IÁ_t
 
IDX
 = 0;

781 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

783 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

784 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

785 
Dœ
[
IDX
++][0] = -
syÇp£
->
	`G‘DEDw
();

787 
	}
}

791 
BoŞ_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘HessŸn
Ğ
TM©rixD
 &
HessŸn
, TM©rixD &
Gamma
, TM©rixD &
D–
 )

793 
TM©rixD
 
	`gd
(
Gamma
, TM©rixD::
kT¿n¥o£MuÉ
, 
D–
);

794 ià((
DoubË_t
è
gd
[0][0] =ğ0.è 
kTRUE
;

795 
TM©rixD
 
	`aHg
(
HessŸn
, TM©rixD::
kMuÉ
, 
Gamma
);

796 
TM©rixD
 
	`tmp
(
Gamma
, TM©rixD::
kT¿n¥o£MuÉ
, 
HessŸn
);

797 
TM©rixD
 
	`gHg
(
Gamma
, TM©rixD::
kT¿n¥o£MuÉ
, 
aHg
);

798 
DoubË_t
 
a
 = 1 / (DoubË_tè
gd
[0][0];

799 
DoubË_t
 
f
 = 1 + ((DoubË_t)
gHg
[0][0]*
a
);

800 
TM©rixD
 
	`»s
(
	`TM©rixD
(
D–
, TM©rixD::
kMuÉ
, TM©rixD(TM©rixD::
kT¿n¥o£d
,Delta)));

801 
»s
 *ğ
f
;

802 
»s
 -ğ(
	`TM©rixD
(
D–
, 
TM©rixD
::
kMuÉ
, 
tmp
è+ TM©rixD(
aHg
, TMatrixD::kMult,

803 
	`TM©rixD
(
TM©rixD
::
kT¿n¥o£d
,
D–
)));

804 
»s
 *ğ
a
;

805 
HessŸn
 +ğ
»s
;

807  
kFALSE
;

808 
	}
}

812 
	gTMVA
::
M‘hodMLP
::
	$S‘Dœ
Ğ
TM©rixD
 &
HessŸn
, TM©rixD &
dœ
 )

814 
IÁ_t
 
IDX
 = 0;

815 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

816 
TM©rixD
 
	`DEDw
(
nSyÇp£s
, 1);

818 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

819 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

820 
DEDw
[
IDX
++][0] = 
syÇp£
->
	`G‘DEDw
();

823 
dœ
 = 
HessŸn
 * 
DEDw
;

824 
IÁ_t
 
i
=0;i<
IDX
;i++è
dœ
[i][0] = -dir[i][0];

825 
	}
}

829 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$D”ivDœ
Ğ
TM©rixD
 &
Dœ
 )

831 
IÁ_t
 
IDX
 = 0;

832 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

833 
DoubË_t
 
ResuÉ
 = 0.0;

835 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

836 
TSyÇp£
 *
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

837 
ResuÉ
 +ğ
Dœ
[
IDX
++][0] * 
syÇp£
->
	`G‘DEDw
();

839  
ResuÉ
;

840 
	}
}

844 
BoŞ_t
 
	gTMVA
::
M‘hodMLP
::
LšeS—rch
(
TM©rixD
 &
Dœ
, 
¡d
::
veùÜ
<
DoubË_t
> &
bufãr
, DoubË_t* 
dE¼Ü
)

846 
IÁ_t
 
	gIDX
 = 0;

847 
IÁ_t
 
	gnSyÇp£s
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

848 
IÁ_t
 
	gnWeights
 = 
nSyÇp£s
;

850 
	g¡d
::
veùÜ
<
DoubË_t
> 
Origš
(
nWeights
);

851 
IÁ_t
 
	gi
=0;i<
	gnSyÇp£s
;i++) {

852 
TSyÇp£
 *
	gsyÇp£
 = (TSyÇp£*)
fSyÇp£s
->
At
(
i
);

853 
	gOrigš
[
i
] = 
syÇp£
->
G‘Weight
();

856 
DoubË_t
 
	g”r1
 = 
G‘E¼Ü
();

857 
DoubË_t
 
	g”rOrigš
=
”r1
;

858 
DoubË_t
 
	g®pha1
 = 0.;

859 
DoubË_t
 
	g®pha2
 = 
fLa¡AÍha
;

862 ià(
	g®pha2
 < 0.01)‡lpha2 = 0.01;

863 ià(
	g®pha2
 > 2.0)‡lpha2 = 2.0;

864 
DoubË_t
 
	g®pha_Üigš®
 = 
®pha2
;

865 
DoubË_t
 
	g®pha3
 = 
®pha2
;

867 
S‘DœWeights
Ğ
Origš
, 
Dœ
, 
®pha2
 );

868 
DoubË_t
 
	g”r2
 = 
G‘E¼Ü
();

870 
DoubË_t
 
	g”r3
 = 
”r2
;

871 
BoŞ_t
 
	gbšgo
 = 
kFALSE
;

874 ià(
	g”r1
 > 
	g”r2
) {

875 
IÁ_t
 
	gi
=0;i<100;i++) {

876 
	g®pha3
 *ğ
fTau
;

877 
S‘DœWeights
(
Origš
, 
Dœ
, 
®pha3
);

878 
	g”r3
 = 
G‘E¼Ü
();

879 ià(
	g”r3
 > 
	g”r2
) {

880 
	gbšgo
 = 
kTRUE
;

883 
	g®pha1
 = 
®pha2
;

884 
	g”r1
 = 
”r2
;

885 
	g®pha2
 = 
®pha3
;

886 
	g”r2
 = 
”r3
;

888 ià(!
	gbšgo
) {

889 
S‘DœWeights
(
Origš
, 
Dœ
, 0.);

890  
	gkTRUE
;

894 
IÁ_t
 
	gi
=0;i<100;i++) {

895 
	g®pha2
 /ğ
fTau
;

896 ià(
	gi
==50) {

897 
Log
(è<< 
kWARNING
 << "lše£¬ch, s¹šgØšve¡ig©dœeùiÚ oµos™oà¡“³¡DIR" << 
Endl
;

898 
	g®pha2
 = -
®pha_Üigš®
;

900 
S‘DœWeights
(
Origš
, 
Dœ
, 
®pha2
);

901 
	g”r2
 = 
G‘E¼Ü
();

902 ià(
	g”r1
 > 
	g”r2
) {

903 
	gbšgo
 = 
kTRUE
;

906 
	g®pha3
 = 
®pha2
;

907 
	g”r3
 = 
”r2
;

909 ià(!
	gbšgo
) {

910 
S‘DœWeights
(
Origš
, 
Dœ
, 0.);

911 
Log
(è<< 
	gkWARNING
 << "lše£¬ch, faedƒv’ iÀİpos™dœeùiÚ oà¡“³¡DIR" << 
	gEndl
;

912 
	gfLa¡AÍha
 = 0.05;

913  
	gkTRUE
;

917 ià(
	g®pha1
>0 && 
	g®pha2
>0 && 
	g®pha3
 > 0) {

918 
	gfLa¡AÍha
 = 0.5 * (
®pha1
 + 
®pha3
 -

919 (
”r3
 - 
”r1
è/ (Ó¼3 - 
”r2
è/ ( 
®pha3
 - 
®pha2
 )

920 - ( 
”r2
 - 
”r1
 ) / (
®pha2
 - 
®pha1
 )));

923 
	gfLa¡AÍha
 = 
®pha2
;

926 
	gfLa¡AÍha
 = 
fLa¡AÍha
 < 10000 ? fLastAlpha : 10000;

928 
S‘DœWeights
(
Origš
, 
Dœ
, 
fLa¡AÍha
);

934 
DoubË_t
 
	gfš®E¼Ü
 = 
G‘E¼Ü
();

935 ià(
	gfš®E¼Ü
 > 
	g”r1
) {

936 
Log
(è<< 
	gkWARNING
 << "Line search increasedƒrror! Something is wrong."

937 << "fLa¡AÍha=" << 
	gfLa¡AÍha
 << "®123=" << 
	g®pha1
 << " "

938 << 
	g®pha2
 << " " << 
	g®pha3
 << "ƒ¼1="<< 
	g”r1
 << "ƒ¼fš®=" << 
	gfš®E¼Ü
 << 
	gEndl
;

941 
IÁ_t
 
	gi
=0;i<
	gnSyÇp£s
;i++) {

942 
TSyÇp£
 *
	gsyÇp£
 = (TSyÇp£*)
fSyÇp£s
->
At
(
i
);

943 
	gbufãr
[
IDX
] = 
syÇp£
->
G‘Weight
(è- 
Origš
[IDX];

944 
	gIDX
++;

947 ià(
	gdE¼Ü
è(*dE¼Ü)=(
”rOrigš
-
fš®E¼Ü
)/finalError;

949  
	gkFALSE
;

954 
	gTMVA
::
M‘hodMLP
::
S‘DœWeights
Ğ
¡d
::
veùÜ
<
DoubË_t
> &
Origš
, 
TM©rixD
 &
Dœ
, DoubË_ˆ
®pha
 )

956 
IÁ_t
 
	gIDX
 = 0;

957 
IÁ_t
 
	gnSyÇp£s
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

959 
IÁ_t
 
	gi
=0;i<
	gnSyÇp£s
;i++) {

960 
TSyÇp£
 *
	gsyÇp£
 = (TSyÇp£*)
fSyÇp£s
->
At
(
i
);

961 
	gsyÇp£
->
S‘Weight
Ğ
Origš
[
IDX
] + 
Dœ
[IDX][0] * 
®pha
 );

962 
	gIDX
++;

964 ià(
	gfU£ReguÏtÜ
è
Upd©ePriÜs
();

970 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘E¼Ü
()

972 
IÁ_t
 
nEv’ts
 = 
	`G‘NEv’ts
();

973 
UIÁ_t
 
Ágts
 = 
	`G‘NT¬g‘s
();

974 
DoubË_t
 
ResuÉ
 = 0.;

976 
IÁ_t
 
i
=0;i<
nEv’ts
;i++) {

977 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
i
);

979 ià((
ev
->
	`G‘Weight
(è< 0è&& 
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()

980 && (
	`D©a
()->
	`G‘Cu¼’tTy³
(è=ğ
Ty³s
::
kT¿ššg
)){

983 
	`SimuÏ‹Ev’t
Ğ
ev
 );

985 
DoubË_t
 
”rÜ
 = 0.;

986 ià(
	`DoReg»ssiÚ
()) {

987 
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; itgt++) {

988 
”rÜ
 +ğ
	`G‘MSEE¼
Ğ
ev
, 
™gt
 );

990 } iàĞ
	`DoMuÉişass
() ){

991  
UIÁ_t
 
işs
 = 0, 
işsEnd
 = 
	`D©aInfo
().
	`G‘NCÏs£s
(); icls < iclsEnd; icls++ ){

992 
”rÜ
 +ğ
	`G‘MSEE¼
Ğ
ev
, 
işs
 );

995 ià(
fE¡im©Ü
==
kMSE
è
”rÜ
 = 
	`G‘MSEE¼
Ğ
ev
 );

996 ià(
fE¡im©Ü
==
kCE
è
”rÜ
ğ
	`G‘CEE¼
Ğ
ev
 );

998 
ResuÉ
 +ğ
”rÜ
 * 
ev
->
	`G‘Weight
();

1000 ià(
fU£ReguÏtÜ
è
ResuÉ
+=
fPriÜ
;

1001 ià(
ResuÉ
<0è
	`Log
()<<
kWARNING
<<"\nNeg©ivE¼Ü!!! :"<<ResuÉ-
fPriÜ
<<"+"<<fPriÜ<<
Endl
;

1002  
ResuÉ
;

1003 
	}
}

1007 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘MSEE¼
ĞcÚ¡ 
Ev’t
* 
ev
, 
UIÁ_t
 
šdex
 )

1009 
DoubË_t
 
”rÜ
 = 0;

1010 
DoubË_t
 
ouut
 = 
	`G‘OuutNeurÚ
Ğ
šdex
 )->
	`G‘Aùiv©iÚV®ue
();

1011 
DoubË_t
 
rg‘
 = 0;

1012 ià(
	`DoReg»ssiÚ
()è
rg‘
 = 
ev
->
	`G‘T¬g‘
Ğ
šdex
 );

1013 ià(
	`DoMuÉişass
()è
rg‘
 = (
ev
->
	`G‘CÏss
(è=ğ
šdex
 ? 1.0 : 0.0 );

1014 
rg‘
 = 
	`G‘DesœedOuut
Ğ
ev
 );

1016 
”rÜ
 = 0.5*(
ouut
-
rg‘
)*(output-target);

1018  
”rÜ
;

1020 
	}
}

1024 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘CEE¼
ĞcÚ¡ 
Ev’t
* 
ev
, 
UIÁ_t
 
šdex
 )

1026 
DoubË_t
 
”rÜ
 = 0;

1027 
DoubË_t
 
ouut
 = 
	`G‘OuutNeurÚ
Ğ
šdex
 )->
	`G‘Aùiv©iÚV®ue
();

1028 
DoubË_t
 
rg‘
 = 0;

1029 ià(
	`DoReg»ssiÚ
()è
rg‘
 = 
ev
->
	`G‘T¬g‘
Ğ
šdex
 );

1030 ià(
	`DoMuÉişass
()è
rg‘
 = (
ev
->
	`G‘CÏss
(è=ğ
šdex
 ? 1.0 : 0.0 );

1031 
rg‘
 = 
	`G‘DesœedOuut
Ğ
ev
 );

1033 
”rÜ
 = -(
rg‘
*
TM©h
::
	`Log
(
ouut
)+(1-target)*TMath::Log(1-output));

1035  
”rÜ
;

1036 
	}
}

1041 
	gTMVA
::
M‘hodMLP
::
	$BackPrİag©iÚMšimize
(
IÁ_t
 
nEpochs
)

1044 
Tim”
 
	`tim”
Ğ(
fS‹ps
>0?100:
nEpochs
), 
	`G‘Name
() );

1045 
IÁ_t
 
Ï‹Epoch
 = (IÁ_t)(
nEpochs
*0.95) - 1;

1048 
IÁ_t
 
nbšTe¡
 = 
	`IÁ_t
(
nEpochs
/
fTe¡R©e
);

1049 if(!
	`IsS’tFe
())

1051 
fE¡im©ÜHi¡T¿š
 = 
Ãw
 
	`TH1F
( "estimatorHistTrain", "trainingƒstimator",

1052 
nbšTe¡
, 
	`IÁ_t
(
fTe¡R©e
/2),‚binTest*fTestRate+Int_t(fTestRate/2) );

1053 
fE¡im©ÜHi¡Te¡
 = 
Ãw
 
	`TH1F
( "estimatorHistTest", "testƒstimator",

1054 
nbšTe¡
, 
	`IÁ_t
(
fTe¡R©e
/2),‚binTest*fTestRate+Int_t(fTestRate/2) );

1056 if(
fSam¶šgT¿ššg
 || 
fSam¶šgTe¡šg
)

1057 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0,
fRªdomS“d
);

1059 ià(
fS‹ps
 > 0è
	`Log
(è<< 
kINFO
 << "IÇccu¿‹…rog»s timšg fÜ MLP... " << 
Endl
;

1060 
tim”
.
	`D¿wProg»ssB¬
(0);

1063 
DoubË_t
 
ŒašE
 = -1;

1064 
DoubË_t
 
‹¡E
 = -1;

1067 
IÁ_t
 
i
 = 0; i < 
nEpochs
; i++) {

1069 ià(
fEx™FromT¿ššg
) ;

1070 
fIPyCu¼’tI‹r
 = 
i
;

1071 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
) {

1072 ià((
i
+1)%
fTe¡R©e
 == 0 || (i == 0)) {

1073 ià(
fSam¶šgT¿ššg
) {

1074 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

1075 
	`D©a
()->
	`In™Sam¶šg
(
fSam¶šgF¿ùiÚ
,
fSam¶šgWeight
);

1076 
	`D©a
()->
	`C»©eSam¶šg
();

1078 ià(
fSam¶šgTe¡šg
) {

1079 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kTe¡šg
 );

1080 
	`D©a
()->
	`In™Sam¶šg
(
fSam¶šgF¿ùiÚ
,
fSam¶šgWeight
);

1081 
	`D©a
()->
	`C»©eSam¶šg
();

1086 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

1087 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0);

1088 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kTe¡šg
 );

1089 
	`D©a
()->
	`In™Sam¶šg
(1.0,1.0);

1091 
	`D©a
()->
	`S‘Cu¼’tTy³
Ğ
Ty³s
::
kT¿ššg
 );

1093 
	`T¿šOÃEpoch
();

1094 
	`DeÿySyÇp£Weights
(
i
 >ğ
Ï‹Epoch
);

1097 ià((
i
+1)%
fTe¡R©e
 == 0) {

1098 
ŒašE
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 
i
 );

1099 
‹¡E
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kTe¡šg
, 
i
 );

1100 ià(
fIÁ”aùive
èfIÁ”aùive->
	`AddPošt
(
i
+1, 
ŒašE
, 
‹¡E
);

1101 if(!
	`IsS’tFe
())

1103 
fE¡im©ÜHi¡T¿š
->
	`Fl
Ğ
i
+1, 
ŒašE
 );

1104 
fE¡im©ÜHi¡Te¡
 ->
	`Fl
Ğ
i
+1, 
‹¡E
 );

1106 
BoŞ_t
 
sucûss
 = 
kFALSE
;

1107 ià((
‹¡E
 < 
	`G‘Cu¼’tV®ue
()) || (GetCurrentValue()<1e-100)) {

1108 
sucûss
 = 
kTRUE
;

1110 
	`D©a
()->
	`Ev’tResuÉ
Ğ
sucûss
 );

1112 
	`S‘Cu¼’tV®ue
Ğ
‹¡E
 );

1113 ià(
	`HasCÚv”ged
()) {

1114 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
) {

1115 
IÁ_t
 
ÃwEpoch
 = 
	`IÁ_t
(
fSam¶šgEpoch
*
nEpochs
);

1116 
i
 = 
ÃwEpoch
;

1117 
	`Re£tCÚv”g’ûCouÁ”
();

1120 ià(
Ï‹Epoch
 > 
i
)†ateEpoch = i;

1127 
TSŒšg
 
cÚvText
 = 
	`FÜm
Ğ"<D^2> (Œaš/‹¡): %.4g/%.4g", 
ŒašE
, 
‹¡E
 );

1128 ià(
fS‹ps
 > 0) {

1129 
Flßt_t
 
´og»ss
 = 0;

1130 ià(
	`Flßt_t
(
i
)/
nEpochs
 < 
fSam¶šgEpoch
)

1131 
´og»ss
 = 
	`Prog»ss
()*
fSam¶šgEpoch
*
fSam¶šgF¿ùiÚ
*100;

1133 
´og»ss
 = 100*(
fSam¶šgEpoch
*
fSam¶šgF¿ùiÚ
+(1.0-fSam¶šgF¿ùiÚ*fSam¶šgEpoch)*
	`Prog»ss
());

1135 
tim”
.
	`D¿wProg»ssB¬
Ğ
	`IÁ_t
(
´og»ss
), 
cÚvText
 );

1138 
tim”
.
	`D¿wProg»ssB¬
Ğ
i
, 
cÚvText
 );

1141 
	}
}

1146 
	gTMVA
::
M‘hodMLP
::
	$T¿šOÃEpoch
()

1148 
IÁ_t
 
nEv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

1151 
IÁ_t
* 
šdex
 = 
Ãw
 IÁ_t[
nEv’ts
];

1152 
IÁ_t
 
i
 = 0; i < 
nEv’ts
; i++è
šdex
[i] = i;

1153 
	`Shufæe
(
šdex
, 
nEv’ts
);

1156 
IÁ_t
 
i
 = 0; i < 
nEv’ts
; i++) {

1158 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
šdex
[
i
]);

1159 ià((
ev
->
	`G‘Weight
(è< 0è&& 
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()

1160 && (
	`D©a
()->
	`G‘Cu¼’tTy³
(è=ğ
Ty³s
::
kT¿ššg
)){

1164 
	`T¿šOÃEv’t
(
šdex
[
i
]);

1167 ià(
fBPMode
 =ğ
kB©ch
 && (
i
+1)%
fB©chSize
 == 0) {

1168 
	`Adju¡SyÇp£Weights
();

1169 ià(
fgPRINT_BATCH
) {

1170 
	`PrštN‘wÜk
();

1171 
	`Wa™FÜKeybßrd
();

1176 ià(
fgPRINT_SEQ
) {

1177 
	`PrštN‘wÜk
();

1178 
	`Wa™FÜKeybßrd
();

1182 
d–‘e
[] 
šdex
;

1183 
	}
}

1194 
	gTMVA
::
M‘hodMLP
::
	$Shufæe
(
IÁ_t
* 
šdex
, IÁ_ˆ
n
)

1196 
IÁ_t
 
j
, 
k
;

1197 
IÁ_t
 
a
 = 
n
 - 1;

1198 
IÁ_t
 
i
 = 0; i < 
n
; i++) {

1199 
j
 = (
IÁ_t
è(
äg’
->
	`Rndm
(è* 
a
);

1200 ià(
j
<
n
){

1201 
k
 = 
šdex
[
j
];

1202 
šdex
[
j
] = index[
i
];

1203 
šdex
[
i
] = 
k
;

1206 
	}
}

1212 
	gTMVA
::
M‘hodMLP
::
	$DeÿySyÇp£Weights
(
BoŞ_t
 
Ï‹Epoch
)

1214 
TSyÇp£
* 
syÇp£
;

1215 
IÁ_t
 
numSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1216 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++) {

1217 
syÇp£
 = (
TSyÇp£
*)
fSyÇp£s
->
	`At
(
i
);

1218 ià(
Ï‹Epoch
è
syÇp£
->
	`DeÿyL—ºšgR©e
(
TM©h
::
	`Sq¹
(
fDeÿyR©e
));

1219 
syÇp£
->
	`DeÿyL—ºšgR©e
(
fDeÿyR©e
);

1221 
	}
}

1226 
	gTMVA
::
M‘hodMLP
::
	$T¿šOÃEv’tFa¡
(
IÁ_t
 
›vt
, 
Flßt_t
*& 
b¿nchV¬
, IÁ_t& 
ty³
)

1228 
	`G‘Ev’t
(
›vt
);

1236 
DoubË_t
 
ev’tWeight
 = 1.0;

1239 
DoubË_t
 
desœed
;

1240 ià(
ty³
 =ğ0è
desœed
 = 
fOuut
->
	`G‘Mš
();

1241 
desœed
 = 
fOuut
->
	`G‘Max
();

1244 
DoubË_t
 
x
;

1245 
TNeurÚ
* 
ÃurÚ
;

1247 
UIÁ_t
 
j
 = 0; j < 
	`G‘Nv¬
(); j++) {

1248 
x
 = 
b¿nchV¬
[
j
];

1249 ià(
	`IsNÜm®i£d
()è
x
 = 
	`gToŞs
().
	`NÜmV¬ŸbË
Ğx, 
	`G‘Xmš
Ğ
j
 ), 
	`G‘Xmax
( j ) );

1250 
ÃurÚ
 = 
	`G‘IÅutNeurÚ
(
j
);

1251 
ÃurÚ
->
	`FÜûV®ue
(
x
);

1254 
	`FÜûN‘wÜkC®cuÏtiÚs
();

1255 
	`Upd©eN‘wÜk
(
desœed
, 
ev’tWeight
);

1256 
	}
}

1262 
	gTMVA
::
M‘hodMLP
::
	$T¿šOÃEv’t
(
IÁ_t
 
›vt
)

1269 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
›vt
);

1270 
DoubË_t
 
ev’tWeight
 = 
ev
->
	`G‘Weight
();

1271 
	`FÜûN‘wÜkIÅuts
Ğ
ev
 );

1272 
	`FÜûN‘wÜkC®cuÏtiÚs
();

1273 ià(
	`DoReg»ssiÚ
()è
	`Upd©eN‘wÜk
Ğ
ev
->
	`G‘T¬g‘s
(), 
ev’tWeight
 );

1274 ià(
	`DoMuÉişass
()è
	`Upd©eN‘wÜk
Ğ*
	`D©aInfo
().
	`G‘T¬g‘sFÜMuÉişass
Ğ
ev
 ), 
ev’tWeight
 );

1275 
	`Upd©eN‘wÜk
Ğ
	`G‘DesœedOuut
Ğ
ev
 ), 
ev’tWeight
 );

1276 
	}
}

1281 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘DesœedOuut
ĞcÚ¡ 
Ev’t
* 
ev
 )

1283  
	`D©aInfo
().
	`IsSigÇl
(
ev
)?
fOuut
->
	`G‘Max
():fOuut->
	`G‘Mš
();

1284 
	}
}

1290 
	gTMVA
::
M‘hodMLP
::
	$Upd©eN‘wÜk
(
DoubË_t
 
desœed
, DoubË_ˆ
ev’tWeight
)

1292 
DoubË_t
 
”rÜ
 = 
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
(è- 
desœed
;

1293 ià(
fE¡im©Ü
==
kMSE
è
”rÜ
 = 
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
(è- 
desœed
 ;

1294 ià(
fE¡im©Ü
==
kCE
è
”rÜ
 = -1./(
	`G‘OuutNeurÚ
()->
	`G‘Aùiv©iÚV®ue
(è-1 + 
desœed
);

1295 
	`Log
(è<< 
kFATAL
 << "E¡im©Üy³ un¥ecif›d!!" << 
Endl
;

1296 
”rÜ
 *ğ
ev’tWeight
;

1297 
	`G‘OuutNeurÚ
()->
	`S‘E¼Ü
(
”rÜ
);

1298 
	`C®cuÏ‹NeurÚD–s
();

1299 
	`Upd©eSyÇp£s
();

1300 
	}
}

1306 
	gTMVA
::
M‘hodMLP
::
Upd©eN‘wÜk
(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
desœed
, 
DoubË_t
 
ev’tWeight
)

1309 
DoubË_t
 
	gnÜm
 = 0.;

1310 
UIÁ_t
 
	gi
 = 0, 
	giEnd
 = 
desœed
.
size
(); i < iEnd; ++i) {

1311 
DoubË_t
 
	gaù
 = 
G‘OuutNeurÚ
(
i
)->
G‘Aùiv©iÚV®ue
();

1312 
	gnÜm
 +ğ
TM©h
::
Exp
(
aù
);

1316 
UIÁ_t
 
	gi
 = 0, 
	giEnd
 = 
desœed
.
size
(); i < iEnd; ++i) {

1317 
DoubË_t
 
	gaù
 = 
G‘OuutNeurÚ
(
i
)->
G‘Aùiv©iÚV®ue
();

1318 
DoubË_t
 
	gouut
 = 
TM©h
::
Exp
(
aù
è/ 
nÜm
;

1319 
DoubË_t
 
	g”rÜ
 = 
ouut
 - 
desœed
.
©
(
i
);

1320 
	g”rÜ
 *ğ
ev’tWeight
;

1321 
G‘OuutNeurÚ
(
i
)->
S‘E¼Ü
(
”rÜ
);

1325 
C®cuÏ‹NeurÚD–s
();

1326 
Upd©eSyÇp£s
();

1332 
	gTMVA
::
M‘hodMLP
::
	$C®cuÏ‹NeurÚD–s
()

1334 
TNeurÚ
* 
ÃurÚ
;

1335 
IÁ_t
 
numNeurÚs
;

1336 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

1337 
TObjA¼ay
* 
curLay”
;

1341 
IÁ_t
 
i
 = 
numLay”s
-1; i >= 0; i--) {

1342 
curLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

1343 
numNeurÚs
 = 
curLay”
->
	`G‘EÁr›sFa¡
();

1345 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

1346 
ÃurÚ
 = (
TNeurÚ
*è
curLay”
->
	`At
(
j
);

1347 
ÃurÚ
->
	`C®cuÏ‹D–
();

1350 
	}
}

1360 
	gTMVA
::
M‘hodMLP
::
	$G’‘icMšimize
()

1362 
	`PrštMes§ge
("Minimizing Estimator with GA");

1365 
fGA_´eC®c
 = 1;

1366 
fGA_SC_¡•s
 = 10;

1367 
fGA_SC_¿‹
 = 5;

1368 
fGA_SC_çùÜ
 = 0.95;

1369 
fGA_n¡•s
 = 30;

1372 
¡d
::
veùÜ
<
IÁ”v®
*> 
¿nges
;

1374 
IÁ_t
 
numWeights
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1375 
IÁ_t
 
iv¬
=0; iv¬< 
numWeights
; ivar++) {

1376 
¿nges
.
	`push_back
Ğ
Ãw
 
	`IÁ”v®
Ğ0, 
	`G‘Xmax
(
iv¬
è- 
	`G‘Xmš
(ivar) ));

1379 
F™‹rBa£
 *
gf
 = 
Ãw
 
	`G’‘icF™‹r
Ğ*
this
, 
	`Log
().
	`G‘Prš‹dSourû
(), 
¿nges
, 
	`G‘O±iÚs
() );

1380 
gf
->
	`Run
();

1382 
DoubË_t
 
e¡im©Ü
 = 
	`C®cuÏ‹E¡im©Ü
();

1383 
	`Log
(è<< 
kINFO
 << "GA:ƒ¡im©Ü‡á” o±imiz©iÚ: " << 
e¡im©Ü
 << 
Endl
;

1384 
	}
}

1389 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·¿m‘”s
)

1391  
Compu‹E¡im©Ü
Ğ
·¿m‘”s
 );

1397 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
Compu‹E¡im©Ü
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·¿m‘”s
)

1399 
TSyÇp£
* 
syÇp£
;

1400 
IÁ_t
 
	gnumSyÇp£s
 = 
fSyÇp£s
->
G‘EÁr›sFa¡
();

1402 
IÁ_t
 
	gi
 = 0; i < 
	gnumSyÇp£s
; i++) {

1403 
	gsyÇp£
 = (
TSyÇp£
*)
fSyÇp£s
->
At
(
i
);

1404 
	gsyÇp£
->
S‘Weight
(
·¿m‘”s
.
©
(
i
));

1406 ià(
	gfU£ReguÏtÜ
è
Upd©ePriÜs
();

1408 
DoubË_t
 
	ge¡im©Ü
 = 
C®cuÏ‹E¡im©Ü
();

1410  
	ge¡im©Ü
;

1416 
	gTMVA
::
M‘hodMLP
::
	$Upd©eSyÇp£s
()

1418 
TNeurÚ
* 
ÃurÚ
;

1419 
IÁ_t
 
numNeurÚs
;

1420 
TObjA¼ay
* 
curLay”
;

1421 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

1423 
IÁ_t
 
i
 = 0; i < 
numLay”s
; i++) {

1424 
curLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

1425 
numNeurÚs
 = 
curLay”
->
	`G‘EÁr›sFa¡
();

1427 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

1428 
ÃurÚ
 = (
TNeurÚ
*è
curLay”
->
	`At
(
j
);

1429 ià(
fBPMode
 =ğ
kB©ch
è
ÃurÚ
->
	`Upd©eSyÇp£sB©ch
();

1430 
ÃurÚ
->
	`Upd©eSyÇp£sSequ’tŸl
();

1433 
	}
}

1438 
	gTMVA
::
M‘hodMLP
::
	$Adju¡SyÇp£Weights
()

1440 
TNeurÚ
* 
ÃurÚ
;

1441 
IÁ_t
 
numNeurÚs
;

1442 
TObjA¼ay
* 
curLay”
;

1443 
IÁ_t
 
numLay”s
 = 
fN‘wÜk
->
	`G‘EÁr›sFa¡
();

1445 
IÁ_t
 
i
 = 
numLay”s
-1; i >= 0; i--) {

1446 
curLay”
 = (
TObjA¼ay
*)
fN‘wÜk
->
	`At
(
i
);

1447 
numNeurÚs
 = 
curLay”
->
	`G‘EÁr›sFa¡
();

1449 
IÁ_t
 
j
 = 0; j < 
numNeurÚs
; j++) {

1450 
ÃurÚ
 = (
TNeurÚ
*è
curLay”
->
	`At
(
j
);

1451 
ÃurÚ
->
	`Adju¡SyÇp£Weights
();

1454 
	}
}

1458 
	gTMVA
::
M‘hodMLP
::
	$Upd©ePriÜs
()

1460 
fPriÜ
=0;

1461 
fPriÜDev
.
	`ş—r
();

1462 
IÁ_t
 
nSyÇp£s
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1463 
IÁ_t
 
i
=0;i<
nSyÇp£s
;i++) {

1464 
TSyÇp£
* 
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

1465 
fPriÜ
+=0.5*
fReguÏtÜs
[
fReguÏtÜIdx
[
i
]]*(
syÇp£
->
	`G‘Weight
())*(synapse->GetWeight());

1466 
fPriÜDev
.
	`push_back
(
fReguÏtÜs
[
fReguÏtÜIdx
[
i
]]*(
syÇp£
->
	`G‘Weight
()));

1468 
	}
}

1472 
	gTMVA
::
M‘hodMLP
::
	$Upd©eReguÏtÜs
()

1474 
TM©rixD
 
	`InvH
(0,0);

1475 
	`G‘AµroxInvHessŸn
(
InvH
);

1476 
IÁ_t
 
numSyÇp£s
=
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1477 
IÁ_t
 
numReguÏtÜs
=
fReguÏtÜs
.
	`size
();

1478 
Flßt_t
 
gamma
=0,

1479 
v¬Ÿnû
=1.;

1480 
¡d
::
veùÜ
<
IÁ_t
> 
	`nWDP
(
numReguÏtÜs
);

1481 
¡d
::
veùÜ
<
DoubË_t
> 
	`Œaû
(
numReguÏtÜs
),
	`weightSum
(numRegulators);

1482 
i
=0;i<
numSyÇp£s
;i++) {

1483 
TSyÇp£
* 
syÇp£s
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

1484 
IÁ_t
 
idx
=
fReguÏtÜIdx
[
i
];

1485 
nWDP
[
idx
]++;

1486 
Œaû
[
idx
]+=
InvH
[
i
][i];

1487 
gamma
+=1-
fReguÏtÜs
[
idx
]*
InvH
[
i
][i];

1488 
weightSum
[
idx
]+=(
syÇp£s
->
	`G‘Weight
())*(synapses->GetWeight());

1490 ià(
fE¡im©Ü
==
kMSE
) {

1491 ià(
	`G‘NEv’ts
()>
gamma
è
v¬Ÿnû
=
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 0 )/(1-(gamma/GetNEvents()));

1492 
v¬Ÿnû
=
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 0 );

1496 
i
=0;i<
numReguÏtÜs
;i++)

1499 
fReguÏtÜs
[
i
]=
v¬Ÿnû
*
nWDP
[i]/(
weightSum
[i]+v¬Ÿnû*
Œaû
[i]);

1500 ià(
fReguÏtÜs
[
i
]<0) fRegulators[i]=0;

1501 
	`Log
()<<
kDEBUG
<<"R"<<
i
<<":"<<
fReguÏtÜs
[i]<<"\t";

1503 
ŒašE
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kT¿ššg
, 0 ) ;

1504 
‹¡E
 = 
	`C®cuÏ‹E¡im©Ü
Ğ
Ty³s
::
kTe¡šg
, 0 ) ;

1506 
	`Log
()<<
kDEBUG
<<"\n"<<"ŒašE:"<<
ŒašE
<<"\‰e¡E:"<<
‹¡E
<<"\tv¬Ÿnû:"<<
v¬Ÿnû
<<"\tgamma:"<<
gamma
<<
Endl
;

1508 
	}
}

1512 
	gTMVA
::
M‘hodMLP
::
	$G‘AµroxInvHessŸn
(
TM©rixD
& 
InvHessŸn
, 
boŞ
 
»guÏ‹
)

1514 
IÁ_t
 
numSyÇp£s
=
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1515 
InvHessŸn
.
	`ResizeTo
Ğ
numSyÇp£s
,‚umSynapses );

1516 
InvHessŸn
=0;

1517 
TM©rixD
 
	`£ns
(
numSyÇp£s
,1);

1518 
TM©rixD
 
	`£nsT
(1,
numSyÇp£s
);

1519 
IÁ_t
 
nEv’ts
 = 
	`G‘NEv’ts
();

1520 
IÁ_t
 
i
=0;i<
nEv’ts
;i++) {

1521 
	`G‘Ev’t
(
i
);

1522 
ouutV®ue
=
	`G‘MvaV®ue
();

1523 
	`G‘OuutNeurÚ
()->
	`S‘E¼Ü
(1./
fOuut
->
	`Ev®D”iv©ive
(G‘OuutNeurÚ()->
	`G‘V®ue
()));

1524 
	`C®cuÏ‹NeurÚD–s
();

1525 
IÁ_t
 
j
 = 0; j < 
numSyÇp£s
; j++){

1526 
TSyÇp£
* 
syÇp£s
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
j
);

1527 
syÇp£s
->
	`In™D–
();

1528 
syÇp£s
->
	`C®cuÏ‹D–
();

1529 
£ns
[
j
][0]=
£nsT
[0][j]=
syÇp£s
->
	`G‘D–
();

1531 ià(
fE¡im©Ü
==
kMSE
 ) 
InvHessŸn
+=
£ns
*
£nsT
;

1532 ià(
fE¡im©Ü
==
kCE
è
InvHessŸn
+=(
ouutV®ue
*(1-ouutV®ue))*
£ns
*
£nsT
;

1536 ià(
»guÏ‹
) {

1537 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++){

1538 
InvHessŸn
[
i
][i]+=
fReguÏtÜs
[
fReguÏtÜIdx
[i]];

1542 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++){

1543 
InvHessŸn
[
i
][i]+=1e-6;

1547 
InvHessŸn
.
	`Inv”t
();

1549 
	}
}

1553 
DoubË_t
 
	gTMVA
::
M‘hodMLP
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”rLow”
, DoubË_t* 
”rUµ”
 )

1555 
DoubË_t
 
MvaV®ue
 = 
M‘hodANNBa£
::
	`G‘MvaV®ue
();

1558 ià(!
fC®cuÏ‹E¼Üs
 || 
”rLow”
==0 || 
”rUµ”
==0)

1559  
MvaV®ue
;

1561 
DoubË_t
 
MvaUµ”
,
MvaLow”
,
medŸn
,
v¬Ÿnû
;

1562 
IÁ_t
 
numSyÇp£s
=
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1563 ià(
fInvHessŸn
.
	`G‘NcŞs
()!=
numSyÇp£s
) {

1564 
	`Log
(è<< 
kWARNING
 << "šcÚsi¡’ˆdim’siÚ " << 
fInvHessŸn
.
	`G‘NcŞs
(è<< " v " << 
numSyÇp£s
 << 
Endl
;

1566 
TM©rixD
 
	`£ns
(
numSyÇp£s
,1);

1567 
TM©rixD
 
	`£nsT
(1,
numSyÇp£s
);

1568 
	`G‘OuutNeurÚ
()->
	`S‘E¼Ü
(1./
fOuut
->
	`Ev®D”iv©ive
(G‘OuutNeurÚ()->
	`G‘V®ue
()));

1570 
	`C®cuÏ‹NeurÚD–s
();

1571 
IÁ_t
 
i
 = 0; i < 
numSyÇp£s
; i++){

1572 
TSyÇp£
* 
syÇp£s
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
i
);

1573 
syÇp£s
->
	`In™D–
();

1574 
syÇp£s
->
	`C®cuÏ‹D–
();

1575 
£nsT
[0][
i
]=
syÇp£s
->
	`G‘D–
();

1577 
£ns
.
	`T¿n¥o£
(
£nsT
);

1578 
TM©rixD
 
sig
=
£nsT
*
fInvHessŸn
*
£ns
;

1579 
v¬Ÿnû
=
sig
[0][0];

1580 
medŸn
=
	`G‘OuutNeurÚ
()->
	`G‘V®ue
();

1582 ià(
v¬Ÿnû
<0) {

1583 
	`Log
()<<
kWARNING
<<"Neg©ivv¬Ÿnû!!! medŸn=" << 
medŸn
 << "\tv¬Ÿnû(sigma^2)=" << 
v¬Ÿnû
 <<
Endl
;

1584 
v¬Ÿnû
=0;

1586 
v¬Ÿnû
=
	`sq¹
(variance);

1589 
MvaUµ”
=
fOuut
->
	`Ev®
(
medŸn
+
v¬Ÿnû
);

1590 if(
”rUµ”
)

1591 *
”rUµ”
=
MvaUµ”
-
MvaV®ue
;

1594 
MvaLow”
=
fOuut
->
	`Ev®
(
medŸn
-
v¬Ÿnû
);

1595 if(
”rLow”
)

1596 *
”rLow”
=
MvaV®ue
-
MvaLow”
;

1598  
MvaV®ue
;

1599 
	}
}

1602 #ifdeà
M‘hodMLP_U£Mšu™__


1607 
	gTMVA
::
M‘hodMLP
::
	$Mšu™Mšimize
()

1609 
fNumb”OfWeights
 = 
fSyÇp£s
->
	`G‘EÁr›sFa¡
();

1611 
TF™‹r
* 
tf™‹r
 = 
Ãw
 
	`TF™‹r
Ğ
fNumb”OfWeights
 );

1614 
DoubË_t
 
¬gs
[10];

1617 
¬gs
[0] = 2;

1618 
tf™‹r
->
	`Execu‹Commªd
Ğ"SET PRINTOUT", 
¬gs
, 1 );

1619 
tf™‹r
->
	`Execu‹Commªd
Ğ"SET NOWARNINGS", 
¬gs
, 0 );

1621 
w
[54];

1624 
IÁ_t
 
¬
=0; i·¸< 
fNumb”OfWeights
; ipar++) {

1625 
TSŒšg
 
·rName
 = 
	`FÜm
("w%i", 
¬
);

1626 
tf™‹r
->
	`S‘P¬am‘”
Ğ
¬
,

1627 
·rName
, 
w
[
¬
], 0.1, 0, 0 );

1631 
tf™‹r
->
	`S‘FCN
Ğ&
IFCN
 );

1634 
¬gs
[0] = 2;

1635 
tf™‹r
->
	`Execu‹Commªd
Ğ"SET STRATEGY", 
¬gs
, 1 );

1638 
¬gs
[0] = 1e-04;

1639 
tf™‹r
->
	`Execu‹Commªd
Ğ"MIGRAD", 
¬gs
, 1 );

1641 
BoŞ_t
 
doB‘‹r
 = 
kFALSE
;

1642 
BoŞ_t
 
doEv’B‘‹r
 = 
kFALSE
;

1643 ià(
doB‘‹r
) {

1644 
¬gs
[0] = 1e-04;

1645 
tf™‹r
->
	`Execu‹Commªd
Ğ"IMPROVE", 
¬gs
, 1 );

1647 ià(
doEv’B‘‹r
) {

1648 
¬gs
[0] = 500;

1649 
tf™‹r
->
	`Execu‹Commªd
Ğ"MINOS", 
¬gs
, 1 );

1652 
	}
}

1668 
	gTMVA
::
M‘hodMLP
::
	$IFCN
Ğ
IÁ_t
& 
Å¬s
, 
DoubË_t
* 
g¿d
, DoubË_ˆ&
f
, DoubË_t* 
f™P¬s
, IÁ_ˆ
iæag
 )

1670 ((
M‘hodMLP
*)
	`G‘ThisPŒ
())->
	`FCN
Ğ
Å¬s
, 
g¿d
, 
f
, 
f™P¬s
, 
iæag
 );

1671 
	}
}

1673 
	$TTHREAD_TLS
(
IÁ_t
è
nc
 = 0;

1674 
	$TTHREAD_TLS
(è
mšf
 = 1000000;

1676 
TMVA
::
M‘hodMLP
::
	$FCN
Ğ
IÁ_t
& 
Å¬s
, 
DoubË_t
* 
g¿d
, DoubË_ˆ&
f
, DoubË_t* 
f™P¬s
, IÁ_ˆ
iæag
 )

1679 
IÁ_t
 
¬
=0; i·r<
fNumb”OfWeights
; ipar++) {

1680 
TSyÇp£
* 
syÇp£
 = (TSyÇp£*)
fSyÇp£s
->
	`At
(
¬
);

1681 
syÇp£
->
	`S‘Weight
(
f™P¬s
[
¬
]);

1685 
f
 = 
	`C®cuÏ‹E¡im©Ü
();

1687 
nc
++;

1688 ià(
f
 < 
mšf
) minf = f;

1689 
IÁ_t
 
¬
=0; i·r<
fNumb”OfWeights
; i·r++è
	`Log
(è<< 
kDEBUG
 << 
f™P¬s
[ipar] << " ";

1690 
	`Log
(è<< 
kDEBUG
 << 
Endl
;

1691 
	`Log
(è<< 
kDEBUG
 << "***** Newƒ¡im©Ü: " << 
f
 << " mš: " << 
mšf
 << " -->‚ÿÎs: " << 
nc
 << 
Endl
;

1692 
	}
}

1697 
	gTMVA
::
M‘hodMLP
* 
TMVA
::M‘hodMLP::
	$G‘ThisPŒ
()

1699  
fgThis
;

1700 
	}
}

1708 
	gTMVA
::
M‘hodMLP
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

1710 
M‘hodANNBa£
::
	`MakeCÏssS³cific
(
fout
, 
şassName
);

1711 
	}
}

1719 
	gTMVA
::
M‘hodMLP
::
	$G‘H–pMes§ge
() const

1721 
TSŒšg
 
cŞ
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("bold");

1722 
TSŒšg
 
cŞ»s
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("reset");

1724 
	`Log
(è<< 
Endl
;

1725 
	`Log
(è<< 
cŞ
 << "--- ShÜˆdesütiÚ:" << 
cŞ»s
 << 
Endl
;

1726 
	`Log
(è<< 
Endl
;

1727 
	`Log
(è<< "ThMLP‡¹ificŸÈÃu¿ÈÃtwÜk (ANNèi ¨Œad™iÚ® f“d-" << 
Endl
;

1728 
	`Log
(è<< "fÜw¬d muÉay”…”û±rÚ im¶em’tiÚ. ThMLP ha ¨u£r-" << 
Endl
;

1729 
	`Log
(è<< "defšed hidd’†ay”‡rch™eùu», whthnumb” oàšpuˆ(ouut)" << 
Endl
;

1730 
	`Log
(è<< "node i d‘”mšed byhšpuˆv¬ŸbË (ouuˆşas£s, i.e., " << 
Endl
;

1731 
	`Log
(è<< "sigÇÈªd oÃ background). " << 
Endl
;

1732 
	`Log
(è<< 
Endl
;

1733 
	`Log
(è<< 
cŞ
 << "--- P”fÜmªû o±imi§tiÚ:" << 
cŞ»s
 << 
Endl
;

1734 
	`Log
(è<< 
Endl
;

1735 
	`Log
(è<< "Neu¿ÈÃtwÜk ¬¡abË‡nd…”fÜmšg fÜ‡†¬gv¬›ty oà" << 
Endl
;

1736 
	`Log
(è<< "lš—¸ªd‚Ú-lš—¸şassifiÿtiÚ…robËms. Howev”, iÀcÚŒa¡" << 
Endl
;

1737 
	`Log
(è<< "tØÓ.g.èboo¡ed decisiÚ»es,hu£¸i advi£dØ»duûh" << 
Endl
;

1738 
	`Log
(è<< "numb” oàšpuˆv¬ŸbË th© havÚly†™disüimš©iÚ…ow”. " << 
Endl
;

1739 
	`Log
(è<< "" << 
Endl
;

1740 
	`Log
(è<< "IÀth‹¡ whavÿ¼›d ouˆsØçr,hMLP‡nd ROOT‚‘wÜks" << 
Endl
;

1741 
	`Log
(è<< "(TMÍANN, iÁ”çûd vŸ TMVAè³rfÜmedƒqu®ly w–l, w™h howev”" << 
Endl
;

1742 
	`Log
(è<< "¨ş—¸¥“d‡dvªgfÜhMLP. ThCËrmÚt-F”¿nd‚eu¿È" << 
Endl
;

1743 
	`Log
(è<< "Ãˆ(CFMÍANNèexhib™ed wÜ£ cÏssifiÿtiÚ…”fÜmªû iÀthe£" << 
Endl
;

1744 
	`Log
(è<< "‹¡s, which i ·¹ly dutØth¦ow cÚv”g’û oà™ Œaššg" << 
Endl
;

1745 
	`Log
(è<< "×ˆËa¡ 10k¿ššg cyşe ¬»quœedØach›v­´oxim©–y" << 
Endl
;

1746 
	`Log
(è<< "com³t™iv»suÉs)." << 
Endl
;

1747 
	`Log
(è<< 
Endl
;

1748 
	`Log
(è<< 
cŞ
 << "Ov”Œaššg: " << 
cŞ»s


1749 << "ÚlyhTMÍANN…”fÜm ªƒx¶ic™ s•¬©iÚ oàthe" << 
Endl
;

1750 
	`Log
(è<< "fuÎ¿ššg sam¶štØšd•’d’ˆŒaššg‡nd v®id©iÚ sam¶es." << 
Endl
;

1751 
	`Log
(è<< "Whavfoundh© iÀmo¡ high-’”gy…hysic ­¶iÿtiÚ th" << 
Endl
;

1752 
	`Log
(è<< "avaabË deg»e oàä“dom (Œaššgƒv’tsè¬suffic›ÁØ" << 
Endl
;

1753 
	`Log
(è<< "cÚ¡¿šhweight oàth»Ïtiv–y sim¶¬ch™eùu» »quœed" << 
Endl
;

1754 
	`Log
(è<< "tØach›vgood…”fÜmªû. H’û‚Øov”Œaššg should occur,‡nd " << 
Endl
;

1755 
	`Log
(è<< "thu£ oàv®id©iÚ sam¶e would oÆy„eduûhavaabË¿ššg" << 
Endl
;

1756 
	`Log
(è<< "šfÜm©iÚ. Howev”, iàth³rfÜmªû oÀthŒaššg sam¶i " << 
Endl
;

1757 
	`Log
(è<< "foundØbsignifiÿÁly b‘‹¸thªhÚfound w™hhšde-" << 
Endl
;

1758 
	`Log
(è<< "³nd’ˆ‹¡ sam¶e, cautiÚ i Ãeded. Th»suÉ fÜhe£ sam¶e " << 
Endl
;

1759 
	`Log
(è<< "¬´š‹dØ¡ªd¬d ouuˆ©h’d oà—ch¿ššg job." << 
Endl
;

1760 
	`Log
(è<< 
Endl
;

1761 
	`Log
(è<< 
cŞ
 << "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << 
cŞ»s
 << 
Endl
;

1762 
	`Log
(è<< 
Endl
;

1763 
	`Log
(è<< "Thhidd’†ay”‡rch™eùu» fÜ‡Î ANN i defšed byhİtiÚ" << 
Endl
;

1764 
	`Log
(è<< "\"Hidd’Lay”s=N+1,N,...\", wh”h”thfœ¡ hidd’†ay” ha N+1" << 
Endl
;

1765 
	`Log
(è<< "ÃurÚ ªdh£cÚd N‚eurÚ ×nd sØÚ),‡nd wh”N i thnumb” " << 
Endl
;

1766 
	`Log
(è<< "oàšpuˆv¬ŸbËs. Exûssivnumb” oàhidd’†ay” should bavoided," << 
Endl
;

1767 
	`Log
(è<< "š favou¸oàmÜÃurÚ šhfœ¡ hidd’†ay”." << 
Endl
;

1768 
	`Log
(è<< "" << 
Endl
;

1769 
	`Log
(è<< "Thnumb” oàcyşe should babov500. A §id, iàthnumb” of" << 
Endl
;

1770 
	`Log
(è<< "adju¡abË weight i sm®Ècom·»dØthŒaššg sam¶size," << 
Endl
;

1771 
	`Log
(è<< "usšg‡†¬gnumb” oàŒaššg sam¶e should‚Ù†—dØov”Œaššg." << 
Endl
;

1772 
	}
}

	@src/MethodPDEFoam.cxx

52 
	~"TMVA/M‘hodPDEFßm.h
"

54 
	~"TMVA/CÏssif›rFaùÜy.h
"

55 
	~"TMVA/CÚfig.h
"

56 
	~"TMVA/CÚfigu¿bË.h
"

57 
	~"TMVA/CrossEÁrİy.h
"

58 
	~"TMVA/D©aS‘.h
"

59 
	~"TMVA/D©aS‘Info.h
"

60 
	~"TMVA/Ev’t.h
"

61 
	~"TMVA/GšiIndex.h
"

62 
	~"TMVA/GšiIndexW™hL­Ïû.h
"

63 
	~"TMVA/IM‘hod.h
"

64 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

65 
	~"TMVA/M‘hodBa£.h
"

66 
	~"TMVA/MsgLogg”.h
"

67 
	~"TMVA/Rªkšg.h
"

68 
	~"TMVA/SdivSq¹S¶usB.h
"

69 
	~"TMVA/S•¬©iÚBa£.h
"

70 
	~"TMVA/ToŞs.h
"

71 
	~"TMVA/Ty³s.h
"

72 
	~"TMVA/V¬ŸbËInfo.h
"

74 
	~"TM©h.h
"

75 
	~"TH1F.h
"

76 
	~"TFe.h
"

78 
	$REGISTER_METHOD
(
PDEFßm
)

80 
	`CÏssImp
(
TMVA
::
M‘hodPDEFßm
);

85 
TMVA
::
M‘hodPDEFßm
::
	$M‘hodPDEFßm
ĞcÚ¡ 
TSŒšg
& 
jobName
,

86 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

87 
D©aS‘Info
& 
dsi
,

88 cÚ¡ 
TSŒšg
& 
theO±iÚ
 ) :

89 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kPDEFßm
, 
m‘hodT™Ë
, 
dsi
, 
theO±iÚ
)

90 , 
	`fSigBgS•¬©ed
(
kFALSE
)

91 , 
	`fF¿c
(0.001)

92 , 
	`fDisüE¼Cut
(-1.0)

93 , 
	`fVŞF¿c
(1.0/15.0)

94 , 
	`âC–ls
(999)

95 , 
	`âAùiveC–ls
(500)

96 , 
	`âSam¶
(2000)

97 , 
	`âBš
(5)

98 , 
	`fEvP”Bš
(10000)

99 , 
	`fCom´ess
(
kTRUE
)

100 , 
	`fMuÉiT¬g‘Reg»ssiÚ
(
kFALSE
)

101 , 
	`fNmš
(100)

102 , 
	`fCutNmš
(
kTRUE
)

103 , 
	`fMaxD•th
(0)

104 , 
	`fK”ÃlSŒ
("None")

105 , 
	`fK”Ãl
(
kNÚe
)

106 , 
	`fK”ÃlE¡im©Ü
(
NULL
)

107 , 
	`fT¬g‘S–eùiÚSŒ
("Mean")

108 , 
	`fT¬g‘S–eùiÚ
(
kM—n
)

109 , 
	`fFlFßmW™hOrigWeights
(
kFALSE
)

110 , 
	`fU£YesNoC–l
(
kFALSE
)

111 , 
	`fDTLogic
("None")

112 , 
	`fDTS•¬©iÚ
(
kFßm
)

113 , 
	`fP“kMax
(
kTRUE
)

114 , 
	`fXmš
()

115 , 
	`fXmax
()

116 , 
	$fFßm
()

118 
	}
}

123 
	gTMVA
::
M‘hodPDEFßm
::
	$M‘hodPDEFßm
Ğ
D©aS‘Info
& 
dsi
,

124 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

125 
	`M‘hodBa£
Ğ
Ty³s
::
kPDEFßm
, 
dsi
, 
theWeightFe
)

126 , 
	`fSigBgS•¬©ed
(
kFALSE
)

127 , 
	`fF¿c
(0.001)

128 , 
	`fDisüE¼Cut
(-1.0)

129 , 
	`fVŞF¿c
(1.0/15.0)

130 , 
	`âC–ls
(999)

131 , 
	`âAùiveC–ls
(500)

132 , 
	`âSam¶
(2000)

133 , 
	`âBš
(5)

134 , 
	`fEvP”Bš
(10000)

135 , 
	`fCom´ess
(
kTRUE
)

136 , 
	`fMuÉiT¬g‘Reg»ssiÚ
(
kFALSE
)

137 , 
	`fNmš
(100)

138 , 
	`fCutNmš
(
kTRUE
)

139 , 
	`fMaxD•th
(0)

140 , 
	`fK”ÃlSŒ
("None")

141 , 
	`fK”Ãl
(
kNÚe
)

142 , 
	`fK”ÃlE¡im©Ü
(
NULL
)

143 , 
	`fT¬g‘S–eùiÚSŒ
("Mean")

144 , 
	`fT¬g‘S–eùiÚ
(
kM—n
)

145 , 
	`fFlFßmW™hOrigWeights
(
kFALSE
)

146 , 
	`fU£YesNoC–l
(
kFALSE
)

147 , 
	`fDTLogic
("None")

148 , 
	`fDTS•¬©iÚ
(
kFßm
)

149 , 
	`fP“kMax
(
kTRUE
)

150 , 
	`fXmš
()

151 , 
	`fXmax
()

152 , 
	$fFßm
()

154 
	}
}

160 
BoŞ_t
 
	gTMVA
::
M‘hodPDEFßm
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

162 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

163 ià(
ty³
 =ğ
Ty³s
::
kMuÉişass
 )  
kTRUE
;

164 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
è 
kTRUE
;

165  
kFALSE
;

166 
	}
}

171 
	gTMVA
::
M‘hodPDEFßm
::
	$In™
( )

174 
fSigBgS•¬©ed
 = 
kFALSE
;

175 
fF¿c
 = 0.001;

176 
fDisüE¼Cut
 = -1.;

177 
fVŞF¿c
 = 1./15.;

178 
âAùiveC–ls
 = 500;

179 
âC–ls
 = 
âAùiveC–ls
*2-1;

180 
âSam¶
 = 2000;

181 
âBš
 = 5;

182 
fEvP”Bš
 = 10000;

183 
fNmš
 = 100;

184 
fMaxD•th
 = 0;

185 
fFlFßmW™hOrigWeights
 = 
kFALSE
;

186 
fU£YesNoC–l
 = 
kFALSE
;

187 
fDTLogic
 = "None";

188 
fDTS•¬©iÚ
 = 
kFßm
;

190 
fK”Ãl
 = 
kNÚe
;

191 
fK”ÃlE¡im©Ü
ğ
NULL
;

192 
fT¬g‘S–eùiÚ
ğ
kM—n
;

194 
fCom´ess
 = 
kTRUE
;

195 
fMuÉiT¬g‘Reg»ssiÚ
 = 
kFALSE
;

197 
	`D–‘eFßms
();

199 ià(
fU£YesNoC–l
)

200 
	`S‘SigÇlReã»nûCut
( 0.0 );

202 
	`S‘SigÇlReã»nûCut
( 0.5 );

203 
	}
}

208 
	gTMVA
::
M‘hodPDEFßm
::
	$Deş¬eO±iÚs
()

210 
	`Deş¬eO±iÚRef
Ğ
fSigBgS•¬©ed
 = 
kFALSE
, "SigBgSeparate", "Separate foams for signal‡nd background" );

211 
	`Deş¬eO±iÚRef
Ğ
fF¿c
 = 0.001, "TailCut", "Fraction of outlierƒventshat‡reƒxcluded fromhe foam inƒach dimension" );

212 
	`Deş¬eO±iÚRef
Ğ
fVŞF¿c
 = 1./15., "VolFrac", "Size of sampling box, used for density calculation during foam build-up (maximum value: 1.0 isƒquivalento volume ofƒntire foam)");

213 
	`Deş¬eO±iÚRef
Ğ
âAùiveC–ls
 = 500, "nActiveCells", "Maximum‚umber of‡ctive cellso be created byhe foam");

214 
	`Deş¬eO±iÚRef
Ğ
âSam¶
 = 2000, "nSampl", "Number of generated MCƒvents…er cell");

215 
	`Deş¬eO±iÚRef
Ğ
âBš
 = 5, "nBin", "Number of bins inƒdge histograms");

216 
	`Deş¬eO±iÚRef
Ğ
fCom´ess
 = 
kTRUE
, "Compress", "Compress foam output file");

217 
	`Deş¬eO±iÚRef
Ğ
fMuÉiT¬g‘Reg»ssiÚ
 = 
kFALSE
, "MultiTargetRegression", "Do„egression with multipleargets");

218 
	`Deş¬eO±iÚRef
Ğ
fNmš
 = 100, "Nmin", "Number ofƒvents in cell„equiredo split cell");

219 
	`Deş¬eO±iÚRef
Ğ
fMaxD•th
 = 0, "MaxDepth", "Maximum depth of cellree (0=unlimited)");

220 
	`Deş¬eO±iÚRef
Ğ
fFlFßmW™hOrigWeights
 = 
kFALSE
, "FillFoamWithOrigWeights", "Fill foam with original or boost weights");

221 
	`Deş¬eO±iÚRef
Ğ
fU£YesNoC–l
 = 
kFALSE
, "UseYesNoCell", "Return -1 or 1 for bkg or signal†ikeƒvents");

222 
	`Deş¬eO±iÚRef
Ğ
fDTLogic
 = "None", "DTLogic", "Use decisionree‡lgorithmo split cells");

223 
	`AddP»DefV®
(
	`TSŒšg
("None"));

224 
	`AddP»DefV®
(
	`TSŒšg
("GiniIndex"));

225 
	`AddP»DefV®
(
	`TSŒšg
("MisClassificationError"));

226 
	`AddP»DefV®
(
	`TSŒšg
("CrossEntropy"));

227 
	`AddP»DefV®
(
	`TSŒšg
("GiniIndexWithLaplace"));

228 
	`AddP»DefV®
(
	`TSŒšg
("SdivSqrtSplusB"));

230 
	`Deş¬eO±iÚRef
Ğ
fK”ÃlSŒ
 = "None", "Kernel", "Kernelype used");

231 
	`AddP»DefV®
(
	`TSŒšg
("None"));

232 
	`AddP»DefV®
(
	`TSŒšg
("Gauss"));

233 
	`AddP»DefV®
(
	`TSŒšg
("LinNeighbors"));

234 
	`Deş¬eO±iÚRef
Ğ
fT¬g‘S–eùiÚSŒ
 = "Mean", "TargetSelection", "Target selection method");

235 
	`AddP»DefV®
(
	`TSŒšg
("Mean"));

236 
	`AddP»DefV®
(
	`TSŒšg
("Mpv"));

237 
	}
}

243 
	gTMVA
::
M‘hodPDEFßm
::
	$Deş¬eCom·tib™yO±iÚs
() {

244 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

245 
	`Deş¬eO±iÚRef
(
fCutNmš
 = 
kTRUE
, "CutNmin", "Requirement for minimal‚umber ofƒvents in cell");

246 
	`Deş¬eO±iÚRef
(
fP“kMax
 = 
kTRUE
, "PeekMax", "Peek cell with max.†oss forhe‚ext split");

247 
	}
}

252 
	gTMVA
::
M‘hodPDEFßm
::
	$ProûssO±iÚs
()

254 ià(!(
fF¿c
>=0. && fFrac<=1.)) {

255 
	`Log
(è<< 
kWARNING
 << "TaCuˆnÙ iÀ[0.,1] ==> usšg 0.001 in¡—d" << 
Endl
;

256 
fF¿c
 = 0.001;

259 ià(
âAùiveC–ls
 < 1) {

260 
	`Log
(è<< 
kWARNING
 << "invalid‚umber of‡ctive cells specified: "

261 << 
âAùiveC–ls
 << "; s‘tšg‚AùiveC–ls=2" << 
Endl
;

262 
âAùiveC–ls
 = 2;

264 
âC–ls
 = 
âAùiveC–ls
*2-1;

267 ià(
fSigBgS•¬©ed
 && 
fDTLogic
 != "None") {

268 
	`Log
(è<< 
kFATAL
 << "DecisiÚ»logiøwÜk Úly fÜ‡ sšgË fßm (SigBgS•¬©e=F)" << 
Endl
;

272 ià(
fDTLogic
 == "None")

273 
fDTS•¬©iÚ
 = 
kFßm
;

274 ià(
fDTLogic
 == "GiniIndex")

275 
fDTS•¬©iÚ
 = 
kGšiIndex
;

276 ià(
fDTLogic
 == "MisClassificationError")

277 
fDTS•¬©iÚ
 = 
kMisCÏssifiÿtiÚE¼Ü
;

278 ià(
fDTLogic
 == "CrossEntropy")

279 
fDTS•¬©iÚ
 = 
kCrossEÁrİy
;

280 ià(
fDTLogic
 == "GiniIndexWithLaplace")

281 
fDTS•¬©iÚ
 = 
kGšiIndexW™hL­Ïû
;

282 ià(
fDTLogic
 == "SdivSqrtSplusB")

283 
fDTS•¬©iÚ
 = 
kSdivSq¹S¶usB
;

285 
	`Log
(è<< 
kWARNING
 << "UnknowÀ£·¿tiÚy³: " << 
fDTLogic


286 << ", s‘tšgØNÚe" << 
Endl
;

287 
fDTLogic
 = "None";

288 
fDTS•¬©iÚ
 = 
kFßm
;

291 ià(
fK”ÃlSŒ
 =ğ"NÚe" ) 
fK”Ãl
 = 
kNÚe
;

292 ià(
fK”ÃlSŒ
 =ğ"Gauss" ) 
fK”Ãl
 = 
kGaus
;

293 ià(
fK”ÃlSŒ
 =ğ"LšNeighbÜs"è
fK”Ãl
 = 
kLšN
;

295 ià(
fT¬g‘S–eùiÚSŒ
 =ğ"M—n" ) 
fT¬g‘S–eùiÚ
 = 
kM—n
;

296 
fT¬g‘S–eùiÚ
 = 
kMpv
;

299 ià(
	`DoReg»ssiÚ
(è&& 
	`D©a
()->
	`G‘NT¬g‘s
(è> 1 && !
fMuÉiT¬g‘Reg»ssiÚ
) {

300 
	`Log
(è<< 
kWARNING
 << "Warning:‚umber ofargets > 1"

302 << " --> I'm s‘tšg MuÉiT¬g‘Reg»ssiÚ=T" << 
Endl
;

303 
fMuÉiT¬g‘Reg»ssiÚ
 = 
kTRUE
;

305 
	}
}

310 
	gTMVA
::
M‘hodPDEFßm
::~
	$M‘hodPDEFßm
( )

312 
	`D–‘eFßms
();

314 ià(
fK”ÃlE¡im©Ü
 !ğ
NULL
)

315 
d–‘e
 
fK”ÃlE¡im©Ü
;

316 
	}
}

322 
	gTMVA
::
M‘hodPDEFßm
::
	$C®cXmšXmax
()

324 
fXmš
.
	`ş—r
();

325 
fXmax
.
	`ş—r
();

326 
UIÁ_t
 
kDim
 = 
	`G‘Nv¬
();

327 
UIÁ_t
 
tDim
 = 
	`D©a
()->
	`G‘NT¬g‘s
();

328 
UIÁ_t
 
vDim
 = 
	`D©a
()->
	`G‘NV¬ŸbËs
();

329 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

330 
kDim
 +ğ
tDim
;

332 
Flßt_t
 *
xmš
 = 
Ãw
 Flßt_t[
kDim
];

333 
Flßt_t
 *
xmax
 = 
Ãw
 Flßt_t[
kDim
];

336 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

337 
xmš
[
dim
] = 
FLT_MAX
;

338 
xmax
[
dim
] = 
FLT_MIN
;

341 
	`Log
(è<< 
kDEBUG
 << "Numb” oàŒaššgƒv’ts: " << 
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è<< 
Endl
;

342 
IÁ_t
 
Ãvoutside
 = (IÁ_t)((
	`D©a
()->
	`G‘NT¿ššgEv’ts
())*(
fF¿c
));

343 
IÁ_t
 
¿ngehi¡bšs
 = 10000;

347 
LÚg64_t
 
i
=0; i<(
	`G‘NEv’ts
()); i++) {

348 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
i
);

349 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

350 
Flßt_t
 
v®
;

351 ià(
fMuÉiT¬g‘Reg»ssiÚ
) {

352 ià(
dim
 < 
vDim
)

353 
v®
 = 
ev
->
	`G‘V®ue
(
dim
);

355 
v®
 = 
ev
->
	`G‘T¬g‘
(
dim
-
vDim
);

358 
v®
 = 
ev
->
	`G‘V®ue
(
dim
);

360 ià(
v®
<
xmš
[
dim
])

361 
xmš
[
dim
] = 
v®
;

362 ià(
v®
>
xmax
[
dim
])

363 
xmax
[
dim
] = 
v®
;

370 
TH1F
 **
¿nge_h
 = 
Ãw
 TH1F*[
kDim
];

371 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

372 
¿nge_h
[
dim
] = 
Ãw
 
	`TH1F
(
	`FÜm
("¿nge%i", dim), "¿nge", 
¿ngehi¡bšs
, 
xmš
[dim], 
xmax
[dim]);

376 
LÚg64_t
 
i
=0; i<
	`G‘NEv’ts
(); i++) {

377 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
i
);

378 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

379 ià(
fMuÉiT¬g‘Reg»ssiÚ
) {

380 ià(
dim
 < 
vDim
)

381 
¿nge_h
[
dim
]->
	`Fl
(
ev
->
	`G‘V®ue
(dim));

383 
¿nge_h
[
dim
]->
	`Fl
(
ev
->
	`G‘T¬g‘
(dim-
vDim
));

386 
¿nge_h
[
dim
]->
	`Fl
(
ev
->
	`G‘V®ue
(dim));

391 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

392 
IÁ_t
 
i
=1; i<(
¿ngehi¡bšs
+1); i++) {

393 ià(
¿nge_h
[
dim
]->
	`IÁeg¿l
(0, 
i
è> 
Ãvoutside
) {

394 
xmš
[
dim
]=
¿nge_h
[dim]->
	`G‘BšLowEdge
(
i
);

398 
IÁ_t
 
i
=
¿ngehi¡bšs
; i>0; i--) {

399 ià(
¿nge_h
[
dim
]->
	`IÁeg¿l
(
i
, (
¿ngehi¡bšs
+1)è> 
Ãvoutside
) {

400 
xmax
[
dim
]=
¿nge_h
[dim]->
	`G‘BšLowEdge
(
i
+1);

408 
fXmš
.
	`ş—r
();

409 
fXmax
.
	`ş—r
();

410 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++) {

411 
fXmš
.
	`push_back
(
xmš
[
dim
]);

412 
fXmax
.
	`push_back
(
xmax
[
dim
]);

416 
d–‘e
[] 
xmš
;

417 
d–‘e
[] 
xmax
;

420 
UIÁ_t
 
dim
=0; dim<
kDim
; dim++)

421 
d–‘e
 
¿nge_h
[
dim
];

422 
d–‘e
[] 
¿nge_h
;

425 
	}
}

430 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿š
( )

432 
	`Log
(è<< 
kVERBOSE
 << "C®cuÏ‹ Xmš‡nd Xmax fÜƒv”y dim’siÚ" << 
Endl
;

433 
	`C®cXmšXmax
();

436 
	`D–‘eFßms
();

439 ià(
	`DoReg»ssiÚ
()) {

440 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

441 
	`T¿šMuÉiT¬g‘Reg»ssiÚ
();

443 
	`T¿šMÚoT¬g‘Reg»ssiÚ
();

446 ià(
	`DoMuÉişass
())

447 
	`T¿šMuÉiCÏssifiÿtiÚ
();

449 ià(
	`D©aInfo
().
	`G‘NÜm®iz©iÚ
() != "EQUALNUMEVENTS" ) {

450 
	`Log
(è<< 
kHEADER
 << "NÜmMode=" << 
	`D©aInfo
().
	`G‘NÜm®iz©iÚ
()

453 << " sigÇÈ´obab™›s." << 
Endl
;

456 
	`Log
(è<< 
kDEBUG
 << "N_sig fÜ¿ššgƒv’ts: " << 
	`D©a
()->
	`G‘NEvtSigT¿š
(è<< 
Endl
;

457 
	`Log
(è<< 
kDEBUG
 << "N_bg fÜ¿ššgƒv’ts: " << 
	`D©a
()->
	`G‘NEvtBkgdT¿š
(è<< 
Endl
;

458 
	`Log
(è<< 
kDEBUG
 << "U£¸nÜm®iz©iÚ: " << 
	`D©aInfo
().
	`G‘NÜm®iz©iÚ
().
	`D©a
(è<< 
Endl
;

460 ià(
fSigBgS•¬©ed
)

461 
	`T¿šS•¬©edCÏssifiÿtiÚ
();

463 
	`T¿šUnif›dCÏssifiÿtiÚ
();

468 
UIÁ_t
 
i
=0; i<
fFßm
.
	`size
(); i++) {

469 if(
fFßm
.
	`©
(
i
))

470 
fFßm
.
	`©
(
i
)->
	`D–‘eBš¬yS—rchT»e
();

472 
	`Ex™FromT¿ššg
();

473 
	}
}

481 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿šS•¬©edCÏssifiÿtiÚ
()

483 
TSŒšg
 
fßmÿ±iÚ
[2];

484 
fßmÿ±iÚ
[0] = "SignalFoam";

485 
fßmÿ±iÚ
[1] = "BgFoam";

487 
i
=0; i<2; i++) {

489 
fFßm
.
	`push_back
Ğ
	`In™Fßm
(
fßmÿ±iÚ
[
i
], 
kS•¬©e
) );

491 
	`Log
(è<< 
kVERBOSE
 << "Flšg bš¬y s—rch»oà" << 
fßmÿ±iÚ
[
i
]

492 << " w™hƒv’ts" << 
Endl
;

494 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

495 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

496 ià((
i
==0 && 
	`D©aInfo
().
	`IsSigÇl
(
ev
)) || (i==1 && !DataInfo().IsSignal(ev)))

497 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

498 
fFßm
.
	`back
()->
	`FlBš¬yS—rchT»e
(
ev
);

501 
	`Log
(è<< 
kINFO
 << "Bud u°" << 
fßmÿ±iÚ
[
i
] << 
Endl
;

502 
fFßm
.
	`back
()->
	`C»©e
();

504 
	`Log
(è<< 
kVERBOSE
 << "Flšg fßm c–l w™hƒv’ts" << 
Endl
;

506 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

507 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

508 
Flßt_t
 
weight
 = 
fFlFßmW™hOrigWeights
 ? 
ev
->
	`G‘Origš®Weight
(è:ƒv->
	`G‘Weight
();

509 ià((
i
==0 && 
	`D©aInfo
().
	`IsSigÇl
(
ev
)) || (i==1 && !DataInfo().IsSignal(ev)))

510 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

511 
fFßm
.
	`back
()->
	`FlFßmC–ls
(
ev
, 
weight
);

514 
	}
}

520 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿šUnif›dCÏssifiÿtiÚ
()

522 
fFßm
.
	`push_back
Ğ
	`In™Fßm
("DisüFßm", 
kDisü
, 
fSigÇlCÏss
) );

524 
	`Log
(è<< 
kVERBOSE
 << "Flšg bš¬y s—rch»oàdisüimš©Ü fßm w™hƒv’ts" << 
Endl
;

526 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

527 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

528 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

529 
fFßm
.
	`back
()->
	`FlBš¬yS—rchT»e
(
ev
);

532 
	`Log
(è<< 
kINFO
 << "Bud u°disüimš©Ü fßm" << 
Endl
;

533 
fFßm
.
	`back
()->
	`C»©e
();

535 
	`Log
(è<< 
kVERBOSE
 << "Flšg fßm c–l w™hƒv’ts" << 
Endl
;

537 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

538 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

539 
Flßt_t
 
weight
 = 
fFlFßmW™hOrigWeights
 ? 
ev
->
	`G‘Origš®Weight
(è:ƒv->
	`G‘Weight
();

540 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

541 
fFßm
.
	`back
()->
	`FlFßmC–ls
(
ev
, 
weight
);

544 
	`Log
(è<< 
kVERBOSE
 << "C®cuÏ‹ c–Èdisüimš©Ü"<< 
Endl
;

546 
fFßm
.
	`back
()->
	`Fš®ize
();

547 
	}
}

556 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿šMuÉiCÏssifiÿtiÚ
()

558 
UIÁ_t
 
iCÏss
=0; iCÏss<
	`D©aInfo
().
	`G‘NCÏs£s
(); ++iClass) {

560 
fFßm
.
	`push_back
Ğ
	`In™Fßm
(
	`FÜm
("MuÉiCÏssFßm%u",
iCÏss
), 
kMuÉiCÏss
, iClass) );

562 
	`Log
(è<< 
kVERBOSE
 << "Filling binary searchree of multiclass foam "

563 << 
iCÏss
 << " w™hƒv’ts" << 
Endl
;

565 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

566 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

567 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

568 
fFßm
.
	`back
()->
	`FlBš¬yS—rchT»e
(
ev
);

571 
	`Log
(è<< 
kINFO
 << "Bud u°muÉişas fßm " << 
iCÏss
 << 
Endl
;

572 
fFßm
.
	`back
()->
	`C»©e
();

574 
	`Log
(è<< 
kVERBOSE
 << "Flšg fßm c–l w™hƒv’ts" << 
Endl
;

577 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

578 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

579 
Flßt_t
 
weight
 = 
fFlFßmW™hOrigWeights
 ? 
ev
->
	`G‘Origš®Weight
(è:ƒv->
	`G‘Weight
();

580 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

581 
fFßm
.
	`back
()->
	`FlFßmC–ls
(
ev
, 
weight
);

584 
	`Log
(è<< 
kVERBOSE
 << "C®cuÏ‹ c–Èdisüimš©Ü"<< 
Endl
;

586 
fFßm
.
	`back
()->
	`Fš®ize
();

588 
	}
}

595 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿šMÚoT¬g‘Reg»ssiÚ
()

597 ià(
	`D©a
()->
	`G‘NT¬g‘s
() != 1) {

598 
	`Log
(è<< 
kFATAL
 << "Can't do mono-target„egression with "

599 << 
	`D©a
()->
	`G‘NT¬g‘s
(è<< "¬g‘s!" << 
Endl
;

602 
	`Log
(è<< 
kDEBUG
 << "M‘hodPDEFßm:‚umb” oàT¬g‘s: " << 
	`D©a
()->
	`G‘NT¬g‘s
(è<< 
Endl
;

604 
fFßm
.
	`push_back
Ğ
	`In™Fßm
("MÚoT¬g‘Reg»ssiÚFßm", 
kMÚoT¬g‘
) );

606 
	`Log
(è<< 
kVERBOSE
 << "Flšg bš¬y s—rch»w™hƒv’ts" << 
Endl
;

608 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

609 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

610 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

611 
fFßm
.
	`back
()->
	`FlBš¬yS—rchT»e
(
ev
);

614 
	`Log
(è<< 
kINFO
 << "Bud mÚØrg‘„eg»ssiÚ fßm" << 
Endl
;

615 
fFßm
.
	`back
()->
	`C»©e
();

617 
	`Log
(è<< 
kVERBOSE
 << "Flšg fßm c–l w™hƒv’ts" << 
Endl
;

619 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

620 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
k
);

621 
Flßt_t
 
weight
 = 
fFlFßmW™hOrigWeights
 ? 
ev
->
	`G‘Origš®Weight
(è:ƒv->
	`G‘Weight
();

622 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

623 
fFßm
.
	`back
()->
	`FlFßmC–ls
(
ev
, 
weight
);

626 
	`Log
(è<< 
kVERBOSE
 << "C®cuÏ‹‡v”agûÎ¬g‘s"<< 
Endl
;

628 
fFßm
.
	`back
()->
	`Fš®ize
();

629 
	}
}

636 
	gTMVA
::
M‘hodPDEFßm
::
	$T¿šMuÉiT¬g‘Reg»ssiÚ
()

638 
	`Log
(è<< 
kDEBUG
 << "Numb” oàv¬ŸbËs: " << 
	`D©a
()->
	`G‘NV¬ŸbËs
(è<< 
Endl
;

639 
	`Log
(è<< 
kDEBUG
 << "Numb” oàT¬g‘s: " << 
	`D©a
()->
	`G‘NT¬g‘s
(è<< 
Endl
;

640 
	`Log
(è<< 
kDEBUG
 << "Dim’siÚ oàfßm: " << 
	`D©a
()->
	`G‘NV¬ŸbËs
()+D©a()->
	`G‘NT¬g‘s
(è<< 
Endl
;

641 ià(
fK”Ãl
==
kLšN
)

642 
	`Log
(è<< 
kFATAL
 << "LinNeighbors kernel currently‚ot supported"

643 << " fÜ muÉ˜rg‘„eg»ssiÚ" << 
Endl
;

645 
fFßm
.
	`push_back
Ğ
	`In™Fßm
("MuÉiT¬g‘Reg»ssiÚFßm", 
kMuÉiT¬g‘
) );

647 
	`Log
(è<< 
kVERBOSE
 << "Filling binary searchree of multiarget„egression foam withƒvents"

648 << 
Endl
;

650 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

651 
Ev’t
 *
ev
 = 
Ãw
 
	`Ev’t
(*
	`G‘Ev’t
(
k
));

654 
¡d
::
veùÜ
<
Flßt_t
> 
	`rg‘s
(
ev
->
	`G‘T¬g‘s
());

655 cÚ¡ 
UIÁ_t
 
nV¬ŸbËs
 = 
ev
->
	`G‘V®ues
().
	`size
();

656 
UIÁ_t
 
i
 = 0; i < 
rg‘s
.
	`size
(); ++i)

657 
ev
->
	`S‘V®
(
i
+
nV¬ŸbËs
, 
rg‘s
.
	`©
(i));

658 
ev
->
	`G‘T¬g‘s
().
	`ş—r
();

659 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

660 
fFßm
.
	`back
()->
	`FlBš¬yS—rchT»e
(
ev
);

663 
d–‘e
 
ev
;

666 
	`Log
(è<< 
kINFO
 << "Bud muÉ˜rg‘„eg»ssiÚ fßm" << 
Endl
;

667 
fFßm
.
	`back
()->
	`C»©e
();

669 
	`Log
(è<< 
kVERBOSE
 << "Flšg fßm c–l w™hƒv’ts" << 
Endl
;

671 
LÚg64_t
 
k
=0; k<
	`G‘NEv’ts
(); ++k) {

672 
Ev’t
 *
ev
 = 
Ãw
 
	`Ev’t
(*
	`G‘Ev’t
(
k
));

675 
¡d
::
veùÜ
<
Flßt_t
> 
rg‘s
 = 
ev
->
	`G‘T¬g‘s
();

676 cÚ¡ 
UIÁ_t
 
nV¬ŸbËs
 = 
ev
->
	`G‘V®ues
().
	`size
();

677 
Flßt_t
 
weight
 = 
fFlFßmW™hOrigWeights
 ? 
ev
->
	`G‘Origš®Weight
(è:ƒv->
	`G‘Weight
();

678 
UIÁ_t
 
i
 = 0; i < 
rg‘s
.
	`size
(); ++i)

679 
ev
->
	`S‘V®
(
i
+
nV¬ŸbËs
, 
rg‘s
.
	`©
(i));

680 
ev
->
	`G‘T¬g‘s
().
	`ş—r
();

681 ià(!(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
(è&& 
ev
->
	`G‘Weight
()<=0))

682 
fFßm
.
	`back
()->
	`FlFßmC–ls
(
ev
, 
weight
);

684 
d–‘e
 
ev
;

686 
	}
}

709 
DoubË_t
 
	gTMVA
::
M‘hodPDEFßm
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

711 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

712 
DoubË_t
 
disü
 = 0.;

714 ià(
fSigBgS•¬©ed
) {

715 
¡d
::
veùÜ
<
Flßt_t
> 
xvec
 = 
ev
->
	`G‘V®ues
();

717 
DoubË_t
 
d’s™y_sig
 = 0.;

718 
DoubË_t
 
d’s™y_bg
 = 0.;

719 
d’s™y_sig
 = 
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
(
xvec
, 
kV®ueD’s™y
, 
fK”ÃlE¡im©Ü
);

720 
d’s™y_bg
 = 
fFßm
.
	`©
(1)->
	`G‘C–lV®ue
(
xvec
, 
kV®ueD’s™y
, 
fK”ÃlE¡im©Ü
);

723 iàĞ(
d’s™y_sig
+
d’s™y_bg
) > 0 )

724 
disü
 = 
d’s™y_sig
/(d’s™y_sig+
d’s™y_bg
);

726 
disü
 = 0.5;

730 
disü
 = 
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
(
ev
->
	`G‘V®ues
(), 
kV®ue
, 
fK”ÃlE¡im©Ü
);

734 ià(
”r
 || 
”rUµ”
) {

735 cÚ¡ 
DoubË_t
 
disü_”rÜ
 = 
	`C®cuÏ‹MVAE¼Ü
();

736 ià(
”r
 !ğ0è*”¸ğ
disü_”rÜ
;

737 ià(
”rUµ”
 !ğ0è*”rUµ” = 
disü_”rÜ
;

740 ià(
fU£YesNoC–l
)

741  (
disü
 < 0.5 ? -1 : 1);

743  
disü
;

744 
	}
}

755 
DoubË_t
 
	gTMVA
::
M‘hodPDEFßm
::
	$C®cuÏ‹MVAE¼Ü
()

757 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

758 
DoubË_t
 
mvaE¼Ü
 = 0.0;

760 ià(
fSigBgS•¬©ed
) {

761 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
xvec
 = 
ev
->
	`G‘V®ues
();

763 cÚ¡ 
DoubË_t
 
Ãv’tsB
 = 
fFßm
.
	`©
(1)->
	`G‘C–lV®ue
(
xvec
, 
kV®ue
, 
fK”ÃlE¡im©Ü
);

764 cÚ¡ 
DoubË_t
 
Ãv’tsS
 = 
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
(
xvec
, 
kV®ue
, 
fK”ÃlE¡im©Ü
);

765 cÚ¡ 
DoubË_t
 
sÿËB
 = 1.;

767 cÚ¡ 
DoubË_t
 
”rÜS
 = 
Ãv’tsS
 =ğ0 ? 1.0 : 
TM©h
::
	`Sq¹
(neventsS);

768 cÚ¡ 
DoubË_t
 
”rÜB
 = 
Ãv’tsB
 =ğ0 ? 1.0 : 
TM©h
::
	`Sq¹
(neventsB);

770 ià((
Ãv’tsS
 > 1e-10è|| (
Ãv’tsB
 > 1e-10)) {

772 
mvaE¼Ü
 = 
TM©h
::
	`Sq¹
(
	`Sqr
(
sÿËB
 * 
Ãv’tsB
 / Sqr(
Ãv’tsS
 + sÿËB *‚ev’tsBè* 
”rÜS
) +

773 
	`Sqr
(
sÿËB
 * 
Ãv’tsS
 / SqrÒev’tsS + sÿËB * 
Ãv’tsB
è* 
”rÜB
));

775 
mvaE¼Ü
 = 1.0;

779 
mvaE¼Ü
 = 
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
(
ev
->
	`G‘V®ues
(), 
kV®ueE¼Ü
, 
fK”ÃlE¡im©Ü
);

782  
mvaE¼Ü
;

783 
	}
}

789 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodPDEFßm
::
	$G‘MuÉişassV®ues
()

791 cÚ¡ 
TMVA
::
Ev’t
 *
ev
 = 
	`G‘Ev’t
();

792 
¡d
::
veùÜ
<
Flßt_t
> 
xvec
 = 
ev
->
	`G‘V®ues
();

794 ià(
fMuÉişassR‘uºV®
 =ğ
NULL
)

795 
fMuÉişassR‘uºV®
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

796 
fMuÉişassR‘uºV®
->
	`ş—r
();

797 
fMuÉişassR‘uºV®
->
	`»£rve
(
	`D©aInfo
().
	`G‘NCÏs£s
());

799 
¡d
::
veùÜ
<
Flßt_t
> 
‹mp
;

800 
UIÁ_t
 
nCÏs£s
 = 
	`D©aInfo
().
	`G‘NCÏs£s
();

801 
‹mp
.
	`»£rve
(
nCÏs£s
);

802 
UIÁ_t
 
iCÏss
 = 0; iCÏs < 
nCÏs£s
; ++iClass) {

803 
‹mp
.
	`push_back
(
fFßm
.
	`©
(
iCÏss
)->
	`G‘C–lV®ue
(
xvec
, 
kV®ue
, 
fK”ÃlE¡im©Ü
));

806 
UIÁ_t
 
iCÏss
 = 0; iCÏs < 
nCÏs£s
; ++iClass) {

807 
Flßt_t
 
nÜm
 = 0.0;

808 
UIÁ_t
 
j
 = 0; j < 
nCÏs£s
; ++j) {

809 ià(
iCÏss
 !ğ
j
)

810 
nÜm
 +ğ
	`exp
(
‹mp
[
j
] -emp[
iCÏss
]);

812 
fMuÉişassR‘uºV®
->
	`push_back
(1.0 / (1.0 + 
nÜm
));

815  *
fMuÉişassR‘uºV®
;

816 
	}
}

823 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodPDEFßm
::
	$C»©eRªkšg
()

826 
fRªkšg
 = 
Ãw
 
	`Rªkšg
(
	`G‘Name
(), "Variable Importance");

827 
¡d
::
veùÜ
<
Flßt_t
> 
	`impÜnû
(
	`G‘Nv¬
(), 0);

830 
UIÁ_t
 
ifßm
 = 0; ifßm < 
fFßm
.
	`size
(); ++ifoam) {

832 
PDEFßmC–l
 *
roÙ_ûÎ
 = 
fFßm
.
	`©
(
ifßm
)->
	`G‘RoÙC–l
();

833 
¡d
::
veùÜ
<
UIÁ_t
> 
	`nCuts
(
fFßm
.
	`©
(
ifßm
)->
	`G‘TÙDim
(), 0);

834 
	`G‘NCuts
(
roÙ_ûÎ
, 
nCuts
);

838 
UIÁ_t
 
sumOfCuts
 = 0;

839 
¡d
::
veùÜ
<
Flßt_t
> 
tmp_impÜnû
;

840 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ++ivar) {

841 
sumOfCuts
 +ğ
nCuts
.
	`©
(
iv¬
);

842 
tmp_impÜnû
.
	`push_back
Ğ
nCuts
.
	`©
(
iv¬
) );

846 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ++ivar) {

847 ià(
sumOfCuts
 > 0)

848 
tmp_impÜnû
.
	`©
(
iv¬
è/ğ
sumOfCuts
;

850 
tmp_impÜnû
.
	`©
(
iv¬
) = 0;

853 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ++ivar) {

854 
impÜnû
.
	`©
(
iv¬
è+ğ
tmp_impÜnû
.©(iv¬è/ 
fFßm
.
	`size
();

859 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ++ivar) {

860 
fRªkšg
->
	`AddRªk
(
	`Rªk
(
	`G‘IÅutLab–
(
iv¬
), 
impÜnû
.
	`©
(ivar)));

863  
fRªkšg
;

864 
	}
}

876 
	gTMVA
::
M‘hodPDEFßm
::
G‘NCuts
(
PDEFßmC–l
 *
ûÎ
, 
¡d
::
veùÜ
<
UIÁ_t
> &
nCuts
)

878 ià(
ûÎ
 =ğ
NULL
 || c–l->
G‘St
() == 1)

881 
	gnCuts
.
©
(
ûÎ
->
G‘Be¡
())++;

883 ià(
	gûÎ
->
G‘Dau0
(è!ğ
NULL
)

884 
G‘NCuts
(
ûÎ
->
G‘Dau0
(), 
nCuts
);

885 ià(
	gûÎ
->
G‘Dau1
(è!ğ
NULL
)

886 
G‘NCuts
(
ûÎ
->
G‘Dau1
(), 
nCuts
);

892 
	gTMVA
::
M‘hodPDEFßm
::
	$S‘XmšXmax
Ğ
TMVA
::
PDEFßm
 *
pdefßm
 )

894 ià(!
pdefßm
){

895 
	`Log
(è<< 
kFATAL
 << "NuÎ…oš‹¸giv’!" << 
Endl
;

899 
UIÁ_t
 
num_v¬s
 = 
	`G‘Nv¬
();

900 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

901 
num_v¬s
 +ğ
	`D©a
()->
	`G‘NT¬g‘s
();

903 
UIÁ_t
 
idim
=0; idim<
num_v¬s
; idim++) {

904 
	`Log
()<< 
kDEBUG
 << "fßm: S‘Xmš[dim="<<
idim
<<"]: " << 
fXmš
.
	`©
(idimè<< 
Endl
;

905 
	`Log
()<< 
kDEBUG
 << "fßm: S‘Xmax[dim="<<
idim
<<"]: " << 
fXmax
.
	`©
(idimè<< 
Endl
;

906 
pdefßm
->
	`S‘Xmš
(
idim
, 
fXmš
.
	`©
(idim));

907 
pdefßm
->
	`S‘Xmax
(
idim
, 
fXmax
.
	`©
(idim));

909 
	}
}

934 
	gTMVA
::
PDEFßm
* 
TMVA
::
M‘hodPDEFßm
::
	$In™Fßm
(
TSŒšg
 
fßmÿ±iÚ
, 
EFßmTy³
 
á
, 
UIÁ_t
 
şs
)

937 
IÁ_t
 
dim
 = 1;

938 ià(
á
 =ğ
kMuÉiT¬g‘
)

940 
dim
 = 
	`D©a
()->
	`G‘NT¬g‘s
(è+ D©a()->
	`G‘NV¬ŸbËs
();

942 
dim
 = 
	`G‘Nv¬
();

945 
¡d
::
veùÜ
<
DoubË_t
> 
box
;

946 
IÁ_t
 
idim
 = 0; idim < 
dim
; ++idim) {

947 
box
.
	`push_back
((
fXmax
.
	`©
(
idim
è- 
fXmš
.©(idim))* 
fVŞF¿c
);

951 
PDEFßm
 *
pdefßm
 = 
NULL
;

952 
PDEFßmD’s™yBa£
 *
d’s™y
 = 
NULL
;

953 ià(
fDTS•¬©iÚ
 =ğ
kFßm
) {

955 
á
) {

956 
kS•¬©e
:

957 
pdefßm
 = 
Ãw
 
	`PDEFßmEv’t
(
fßmÿ±iÚ
);

958 
d’s™y
 = 
Ãw
 
	`PDEFßmEv’tD’s™y
(
box
);

960 
kMuÉiT¬g‘
:

961 
pdefßm
 = 
Ãw
 
	`PDEFßmMuÉiT¬g‘
(
fßmÿ±iÚ
, 
fT¬g‘S–eùiÚ
);

962 
d’s™y
 = 
Ãw
 
	`PDEFßmEv’tD’s™y
(
box
);

964 
kDisü
:

965 
kMuÉiCÏss
:

966 
pdefßm
 = 
Ãw
 
	`PDEFßmDisüimšªt
(
fßmÿ±iÚ
, 
şs
);

967 
d’s™y
 = 
Ãw
 
	`PDEFßmDisüimšªtD’s™y
(
box
, 
şs
);

969 
kMÚoT¬g‘
:

970 
pdefßm
 = 
Ãw
 
	`PDEFßmT¬g‘
(
fßmÿ±iÚ
, 0);

971 
d’s™y
 = 
Ãw
 
	`PDEFßmT¬g‘D’s™y
(
box
, 0);

974 
	`Log
(è<< 
kFATAL
 << "UnknowÀPDEFßmy³!" << 
Endl
;

982 
S•¬©iÚBa£
 *
£pTy³
 = 
NULL
;

983 
fDTS•¬©iÚ
) {

984 
kGšiIndex
:

985 
£pTy³
 = 
Ãw
 
	`GšiIndex
();

987 
kMisCÏssifiÿtiÚE¼Ü
:

988 
£pTy³
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

990 
kCrossEÁrİy
:

991 
£pTy³
 = 
Ãw
 
	`CrossEÁrİy
();

993 
kGšiIndexW™hL­Ïû
:

994 
£pTy³
 = 
Ãw
 
	`GšiIndexW™hL­Ïû
();

996 
kSdivSq¹S¶usB
:

997 
£pTy³
 = 
Ãw
 
	`SdivSq¹S¶usB
();

1000 
	`Log
(è<< 
kFATAL
 << "S•¬©iÚy³ " << 
fDTS•¬©iÚ


1001 << " cu¼’y‚Ù suµÜ‹d" << 
Endl
;

1004 
á
) {

1005 
kDisü
:

1006 
kMuÉiCÏss
:

1007 
pdefßm
 = 
Ãw
 
	`PDEFßmDecisiÚT»e
(
fßmÿ±iÚ
, 
£pTy³
, 
şs
);

1008 
d’s™y
 = 
Ãw
 
	`PDEFßmDecisiÚT»eD’s™y
(
box
, 
şs
);

1011 
	`Log
(è<< 
kFATAL
 << "Decisionree cell split‡lgorithm is only"

1013 << " PDE-Fßm (SigBgS•¬©e=F)" << 
Endl
;

1018 ià(
pdefßm
èpdefßm->
	`S‘D’s™y
(
d’s™y
);

1019 
	`Log
(è<< 
kFATAL
 << "PDEFßm…oš‹¸nÙ s‘,ƒx™šg.." << 
Endl
;

1022 
fK”ÃlE¡im©Ü
 = 
	`C»©ePDEFßmK”Ãl
();

1025 
pdefßm
->
	`Log
().
	`S‘MšTy³
(
this
->Log().
	`G‘MšTy³
());

1028 
pdefßm
->
	`S‘Dim
Ğ
dim
);

1029 
pdefßm
->
	`S‘nC–ls
Ğ
âC–ls
);

1030 
pdefßm
->
	`S‘nSam¶
Ğ
âSam¶
);

1031 
pdefßm
->
	`S‘nBš
Ğ
âBš
);

1032 
pdefßm
->
	`S‘EvP”Bš
Ğ
fEvP”Bš
);

1035 
pdefßm
->
	`S‘Nmš
(
fNmš
);

1036 
pdefßm
->
	`S‘MaxD•th
(
fMaxD•th
);

1039 
pdefßm
->
	`In™Ÿlize
();

1042 
	`S‘XmšXmax
(
pdefßm
);

1044  
pdefßm
;

1045 
	}
}

1050 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodPDEFßm
::
	$G‘Reg»ssiÚV®ues
()

1052 ià(
fReg»ssiÚR‘uºV®
 =ğ0èfReg»ssiÚR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

1053 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

1054 
fReg»ssiÚR‘uºV®
->
	`»£rve
(
	`D©a
()->
	`G‘NT¬g‘s
());

1056 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

1057 
¡d
::
veùÜ
<
Flßt_t
> 
v®s
 = 
ev
->
	`G‘V®ues
();

1059 ià(
v®s
.
	`em±y
()) {

1060 
	`Log
(è<< 
kWARNING
 << "<G‘Reg»ssiÚV®ues> v®uveùÜ i em±y. " << 
Endl
;

1063 ià(
fMuÉiT¬g‘Reg»ssiÚ
) {

1065 
¡d
::
m­
<
IÁ_t
, 
Flßt_t
> 
xvec
;

1066 
UIÁ_t
 
i
=0; i<
v®s
.
	`size
(); ++i)

1067 
xvec
.
	`š£¹
(
¡d
::
·œ
<
IÁ_t
, 
Flßt_t
>(
i
, 
v®s
.
	`©
(i)));

1069 
¡d
::
veùÜ
<
Flßt_t
> 
rg‘s
 = 
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
Ğ
xvec
, 
kV®ue
 );

1072 ià(
rg‘s
.
	`size
(è!ğ
	`D©a
()->
	`G‘NT¬g‘s
())

1073 
	`Log
(è<< 
kFATAL
 << "Something wrong with multi-target„egression foam: "

1074 << "numb” oàrg‘ dÛ nÙ m©chhD©aS‘()" << 
Endl
;

1075 
UIÁ_t
 
i
=0; i<
rg‘s
.
	`size
(); i++)

1076 
fReg»ssiÚR‘uºV®
->
	`push_back
(
rg‘s
.
	`©
(
i
));

1079 
fReg»ssiÚR‘uºV®
->
	`push_back
(
fFßm
.
	`©
(0)->
	`G‘C–lV®ue
(
v®s
, 
kV®ue
, 
fK”ÃlE¡im©Ü
));

1083 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

1084 
UIÁ_t
 
™gt
 = 0; itgˆ< 
	`D©a
()->
	`G‘NT¬g‘s
(); itgt++) {

1085 
evT
->
	`S‘T¬g‘
(
™gt
, 
fReg»ssiÚR‘uºV®
->
	`©
(itgt) );

1087 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

1088 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

1089 
UIÁ_t
 
™gt
 = 0; itgˆ< 
	`D©a
()->
	`G‘NT¬g‘s
(); itgt++) {

1090 
fReg»ssiÚR‘uºV®
->
	`push_back
Ğ
evT2
->
	`G‘T¬g‘
(
™gt
) );

1093 
d–‘e
 
evT
;

1095  (*
fReg»ssiÚR‘uºV®
);

1096 
	}
}

1102 
	gTMVA
::
PDEFßmK”ÃlBa£
* 
TMVA
::
M‘hodPDEFßm
::
	$C»©ePDEFßmK”Ãl
()

1104 
fK”Ãl
) {

1105 
kNÚe
:

1106  
Ãw
 
	`PDEFßmK”ÃlTrivŸl
();

1107 
kLšN
:

1108  
Ãw
 
	`PDEFßmK”ÃlLšN
();

1109 
kGaus
:

1110  
Ãw
 
	`PDEFßmK”ÃlGauss
(
fVŞF¿c
/2.0);

1112 
	`Log
(è<< 
kFATAL
 << "K”Ãl: " << 
fK”Ãl
 << "‚Ù suµÜ‹d!" << 
Endl
;

1113  
NULL
;

1115  
NULL
;

1116 
	}
}

1121 
	gTMVA
::
M‘hodPDEFßm
::
	$D–‘eFßms
()

1123 
UIÁ_t
 
i
=0; i<
fFßm
.
	`size
(); i++)

1124 ià(
fFßm
.
	`©
(
i
)è
d–‘e
 fFoam.at(i);

1125 
fFßm
.
	`ş—r
();

1126 
	}
}

1134 
	gTMVA
::
M‘hodPDEFßm
::
	$Re£t
()

1136 
	`D–‘eFßms
();

1138 ià(
fK”ÃlE¡im©Ü
 !ğ
NULL
) {

1139 
d–‘e
 
fK”ÃlE¡im©Ü
;

1140 
fK”ÃlE¡im©Ü
 = 
NULL
;

1142 
	}
}

1146 
	gTMVA
::
M‘hodPDEFßm
::
	$PrštCÛffic›Ás
( )

1147 {
	}
}

1152 
TMVA
::
M‘hodPDEFßm
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

1154 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

1155 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "SigBgS•¬©ed", 
fSigBgS•¬©ed
 );

1156 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "F¿c", 
fF¿c
 );

1157 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "DisüE¼Cut", 
fDisüE¼Cut
 );

1158 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "VŞF¿c", 
fVŞF¿c
 );

1159 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "nC–ls", 
âC–ls
 );

1160 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "nSam¶", 
âSam¶
 );

1161 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "nBš", 
âBš
 );

1162 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "EvP”Bš", 
fEvP”Bš
 );

1163 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "Com´ess", 
fCom´ess
 );

1164 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "DoReg»ssiÚ", 
	`DoReg»ssiÚ
() );

1165 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "CutNmš", 
fNmš
>0 );

1166 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "Nmš", 
fNmš
 );

1167 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "CutRMSmš", 
çl£
 );

1168 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "RMSmin", 0.0 );

1169 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "K”Ãl", 
	`K”ÃlToUIÁ
(
fK”Ãl
) );

1170 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "T¬g‘S–eùiÚ", 
	`T¬g‘S–eùiÚToUIÁ
(
fT¬g‘S–eùiÚ
) );

1171 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "FlFßmW™hOrigWeights", 
fFlFßmW™hOrigWeights
 );

1172 
	`gToŞs
().
	`AddA‰r
Ğ
wght
, "U£YesNoC–l", 
fU£YesNoC–l
 );

1175 *
xmš_w¿p
;

1176 
UIÁ_t
 
i
=0; i<
fXmš
.
	`size
(); i++){

1177 
xmš_w¿p
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Xmin" );

1178 
	`gToŞs
().
	`AddA‰r
Ğ
xmš_w¿p
, "Index", 
i
 );

1179 
	`gToŞs
().
	`AddA‰r
Ğ
xmš_w¿p
, "V®ue", 
fXmš
.
	`©
(
i
) );

1181 *
xmax_w¿p
;

1182 
UIÁ_t
 
i
=0; i<
fXmax
.
	`size
(); i++){

1183 
xmax_w¿p
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Xmax" );

1184 
	`gToŞs
().
	`AddA‰r
Ğ
xmax_w¿p
, "Index", 
i
 );

1185 
	`gToŞs
().
	`AddA‰r
Ğ
xmax_w¿p
, "V®ue", 
fXmax
.
	`©
(
i
) );

1189 
	`Wr™eFßmsToFe
();

1190 
	}
}

1195 
	gTMVA
::
M‘hodPDEFßm
::
	$Wr™eFßmsToFe
() const

1198 
	`FlV¬ŸbËNamesToFßm
();

1200 
TSŒšg
 
	`râame
Ğ
	`G‘WeightFeName
() );

1203 
râame
.
	`R•ÏûAÎ
Ğ
	`TSŒšg
("."è+ 
	`gCÚfig
().
	`G‘IONames
().
fWeightFeEx‹nsiÚ
 + ".txt", ".xml" );

1206 
râame
.
	`R•ÏûAÎ
( ".xml", "_foams.root" );

1208 
TFe
 *
roÙFe
 = 0;

1209 ià(
fCom´ess
è
roÙFe
 = 
Ãw
 
	`TFe
(
râame
, "RECREATE", "foamfile", 9);

1210 
roÙFe
 = 
Ãw
 
	`TFe
(
râame
, "RECREATE");

1213 
UIÁ_t
 
i
=0; i<
fFßm
.
	`size
(); ++i) {

1214 
	`Log
(è<< "wr™šg fßm " << 
fFßm
.
	`©
(
i
)->
	`G‘FßmName
().
	`D©a
()

1215 << "Øfe" << 
Endl
;

1216 
fFßm
.
	`©
(
i
)->
	`Wr™e
(fFßm.©(i)->
	`G‘FßmName
().
	`D©a
());

1219 
roÙFe
->
	`Clo£
();

1220 
	`Log
(è<< 
kINFO
 << "Foams writteno file: "

1221 << 
	`gToŞs
().
	`CŞÜ
("lightblue"è<< 
râame
 << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1222 
	}
}

1227 
	gTMVA
::
M‘hodPDEFßm
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

1229 
i¡r
 >> 
fSigBgS•¬©ed
;

1230 
i¡r
 >> 
fF¿c
;

1231 
i¡r
 >> 
fDisüE¼Cut
;

1232 
i¡r
 >> 
fVŞF¿c
;

1233 
i¡r
 >> 
âC–ls
;

1234 
i¡r
 >> 
âSam¶
;

1235 
i¡r
 >> 
âBš
;

1236 
i¡r
 >> 
fEvP”Bš
;

1237 
i¡r
 >> 
fCom´ess
;

1239 
BoŞ_t
 
»gr
;

1240 
i¡r
 >> 
»gr
;

1241 
	`S‘AÇlysisTy³
Ğ(
»gr
 ? 
Ty³s
::
kReg»ssiÚ
 : Ty³s::
kCÏssifiÿtiÚ
 ) );

1243 
BoŞ_t
 
CutNmš
, 
CutRMSmš
;

1244 
Flßt_t
 
RMSmš
;

1245 
i¡r
 >> 
CutNmš
;

1246 
i¡r
 >> 
fNmš
;

1247 
i¡r
 >> 
CutRMSmš
;

1248 
i¡r
 >> 
RMSmš
;

1250 
UIÁ_t
 
k”
 = 0;

1251 
i¡r
 >> 
k”
;

1252 
fK”Ãl
 = 
	`UIÁToK”Ãl
(
k”
);

1254 
UIÁ_t
 
ts
 = 0;

1255 
i¡r
 >> 
ts
;

1256 
fT¬g‘S–eùiÚ
 = 
	`UIÁToT¬g‘S–eùiÚ
(
ts
);

1258 
i¡r
 >> 
fFlFßmW™hOrigWeights
;

1259 
i¡r
 >> 
fU£YesNoC–l
;

1262 
fXmš
.
	`ş—r
();

1263 
fXmax
.
	`ş—r
();

1264 
UIÁ_t
 
kDim
 = 
	`G‘Nv¬
();

1265 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

1266 
kDim
 +ğ
	`D©a
()->
	`G‘NT¬g‘s
();

1267 
fXmš
.
	`assign
(
kDim
, 0);

1268 
fXmax
.
	`assign
(
kDim
, 0);

1271 
UIÁ_t
 
i
=0; i<
kDim
; i++)

1272 
i¡r
 >> 
fXmš
.
	`©
(
i
);

1273 
UIÁ_t
 
i
=0; i<
kDim
; i++)

1274 
i¡r
 >> 
fXmax
.
	`©
(
i
);

1277 
	`R—dFßmsFromFe
();

1278 
	}
}

1283 
	gTMVA
::
M‘hodPDEFßm
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

1285 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "SigBgS•¬©ed", 
fSigBgS•¬©ed
 );

1286 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "F¿c", 
fF¿c
 );

1287 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "DisüE¼Cut", 
fDisüE¼Cut
 );

1288 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "VŞF¿c", 
fVŞF¿c
 );

1289 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "nC–ls", 
âC–ls
 );

1290 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "nSam¶", 
âSam¶
 );

1291 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "nBš", 
âBš
 );

1292 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "EvP”Bš", 
fEvP”Bš
 );

1293 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Com´ess", 
fCom´ess
 );

1294 
BoŞ_t
 
»gr
;

1295 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "DoReg»ssiÚ", 
»gr
 );

1296 
BoŞ_t
 
CutNmš
;

1297 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "CutNmš", 
CutNmš
 );

1298 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Nmš", 
fNmš
 );

1299 
BoŞ_t
 
CutRMSmš
;

1300 
Flßt_t
 
RMSmš
;

1301 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "CutRMSmš", 
CutRMSmš
 );

1302 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "RMSmš", 
RMSmš
 );

1303 
UIÁ_t
 
k”
 = 0;

1304 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "K”Ãl", 
k”
 );

1305 
fK”Ãl
 = 
	`UIÁToK”Ãl
(
k”
);

1306 
UIÁ_t
 
ts
 = 0;

1307 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "T¬g‘S–eùiÚ", 
ts
 );

1308 
fT¬g‘S–eùiÚ
 = 
	`UIÁToT¬g‘S–eùiÚ
(
ts
);

1309 ià(
	`gToŞs
().
	`HasA‰r
(
wghŠode
, "FillFoamWithOrigWeights"))

1310 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "FlFßmW™hOrigWeights", 
fFlFßmW™hOrigWeights
 );

1311 ià(
	`gToŞs
().
	`HasA‰r
(
wghŠode
, "UseYesNoCell"))

1312 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "U£YesNoC–l", 
fU£YesNoC–l
 );

1315 
fXmš
.
	`ş—r
();

1316 
fXmax
.
	`ş—r
();

1317 
UIÁ_t
 
kDim
 = 
	`G‘Nv¬
();

1318 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

1319 
kDim
 +ğ
	`D©a
()->
	`G‘NT¬g‘s
();

1320 
fXmš
.
	`assign
(
kDim
, 0);

1321 
fXmax
.
	`assign
(
kDim
, 0);

1324 *
xmš_w¿p
 = 
	`gToŞs
().
	`G‘Chd
Ğ
wghŠode
 );

1325 
UIÁ_t
 
couÁ”
=0; couÁ”<
kDim
; counter++) {

1326 
UIÁ_t
 
i
=0;

1327 
	`gToŞs
().
	`R—dA‰r
Ğ
xmš_w¿p
 , "Index", 
i
 );

1328 ià(
i
>=
kDim
)

1329 
	`Log
(è<< 
kFATAL
 << "dim’siÚ index ouˆoà¿nge:" << 
i
 << 
Endl
;

1330 
	`gToŞs
().
	`R—dA‰r
Ğ
xmš_w¿p
 , "V®ue", 
fXmš
.
	`©
(
i
) );

1331 
xmš_w¿p
 = 
	`gToŞs
().
	`G‘NextChd
( xmin_wrap );

1334 *
xmax_w¿p
 = 
xmš_w¿p
;

1335 
UIÁ_t
 
couÁ”
=0; couÁ”<
kDim
; counter++) {

1336 
UIÁ_t
 
i
=0;

1337 
	`gToŞs
().
	`R—dA‰r
Ğ
xmax_w¿p
 , "Index", 
i
 );

1338 ià(
i
>=
kDim
)

1339 
	`Log
(è<< 
kFATAL
 << "dim’siÚ index ouˆoà¿nge:" << 
i
 << 
Endl
;

1340 
	`gToŞs
().
	`R—dA‰r
Ğ
xmax_w¿p
 , "V®ue", 
fXmax
.
	`©
(
i
) );

1341 
xmax_w¿p
 = 
	`gToŞs
().
	`G‘NextChd
( xmax_wrap );

1345 
	`D–‘eFßms
();

1348 
	`R—dFßmsFromFe
();

1351 ià(
fK”ÃlE¡im©Ü
 !ğ
NULL
)

1352 
d–‘e
 
fK”ÃlE¡im©Ü
;

1353 
fK”ÃlE¡im©Ü
 = 
	`C»©ePDEFßmK”Ãl
();

1354 
	}
}

1374 
	gTMVA
::
PDEFßm
* 
TMVA
::
M‘hodPDEFßm
::
	$R—dClÚedFßmFromFe
(
TFe
* 
fe
, cÚ¡ 
TSŒšg
& 
fßmÇme
)

1376 ià(
fe
 =ğ
NULL
) {

1377 
	`Log
(è<< 
kWARNING
 << "<R—dClÚedFßmFromFe>: NULL…oš‹¸giv’" << 
Endl
;

1378  
NULL
;

1382 
PDEFßm
 *
fßm
 = (PDEFßm*è
fe
->
	`G‘
(
fßmÇme
);

1383 ià(
fßm
 =ğ
NULL
) {

1384  
NULL
;

1387 
fßm
 = (
PDEFßm
*èfßm->
	`ClÚe
();

1388 ià(
fßm
 =ğ
NULL
) {

1389 
	`Log
(è<< 
kWARNING
 << "<R—dClÚedFßmFromFe>: " << 
fßmÇme


1390 << " could‚Ù bşÚed!" << 
Endl
;

1391  
NULL
;

1394  
fßm
;

1395 
	}
}

1400 
	gTMVA
::
M‘hodPDEFßm
::
	$R—dFßmsFromFe
()

1402 
TSŒšg
 
	`râame
Ğ
	`G‘WeightFeName
() );

1405 
râame
.
	`R•ÏûAÎ
Ğ
	`TSŒšg
("."è+ 
	`gCÚfig
().
	`G‘IONames
().
fWeightFeEx‹nsiÚ
 + ".txt", ".xml" );

1408 
râame
.
	`R•ÏûAÎ
( ".xml", "_foams.root" );

1410 
	`Log
(è<< 
kINFO
 << "R—d fßm äom fe: " << 
	`gToŞs
().
	`CŞÜ
("lightblue")

1411 << 
râame
 << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
;

1412 
TFe
 *
roÙFe
 = 
Ãw
 
	`TFe
Ğ
râame
, "READ" );

1413 ià(
roÙFe
->
	`IsZomb›
()è
	`Log
(è<< 
kFATAL
 << "CªnÙ o³Àf\"" << 
râame
 << "\"" << 
Endl
;

1416 ià(
	`DoReg»ssiÚ
()) {

1417 ià(
fMuÉiT¬g‘Reg»ssiÚ
)

1418 
fFßm
.
	`push_back
(
	`R—dClÚedFßmFromFe
(
roÙFe
, "MultiTargetRegressionFoam"));

1420 
fFßm
.
	`push_back
(
	`R—dClÚedFßmFromFe
(
roÙFe
, "MonoTargetRegressionFoam"));

1422 ià(
fSigBgS•¬©ed
) {

1423 
fFßm
.
	`push_back
(
	`R—dClÚedFßmFromFe
(
roÙFe
, "SignalFoam"));

1424 
fFßm
.
	`push_back
(
	`R—dClÚedFßmFromFe
(
roÙFe
, "BgFoam"));

1427 
PDEFßm
 *
fßm
 = 
	`R—dClÚedFßmFromFe
(
roÙFe
, "DiscrFoam");

1428 ià(
fßm
 !ğ
NULL
)

1429 
fFßm
.
	`push_back
(
fßm
);

1432 
UIÁ_t
 
iCÏss
=0; iCÏss<
	`D©aInfo
().
	`G‘NCÏs£s
(); ++iClass) {

1433 
fFßm
.
	`push_back
(
	`R—dClÚedFßmFromFe
(
roÙFe
, 
	`FÜm
("MuÉiCÏssFßm%u",
iCÏss
)));

1441 
roÙFe
->
	`Clo£
();

1442 
d–‘e
 
roÙFe
;

1444 
UIÁ_t
 
i
=0; i<
fFßm
.
	`size
(); ++i) {

1445 ià(!
fFßm
.
	`©
(0))

1446 
	`Log
(è<< 
kFATAL
 << "Could‚Ù†ßd fßm!" << 
Endl
;

1448 
	}
}

1453 
	gTMVA
::
M‘hodPDEFßm
::
EK”Ãl
 
TMVA
::M‘hodPDEFßm::
	$UIÁToK”Ãl
(
UIÁ_t
 
ik”
)

1455 
ik”
) {

1456 0:  
kNÚe
;

1457 1:  
kGaus
;

1458 2:  
kLšN
;

1460 
	`Log
(è<< 
kWARNING
 << "<UIÁToK”Ãl>: unknowÀk”ÃÈnumb”: " << 
ik”
 << 
Endl
;

1461  
kNÚe
;

1463  
kNÚe
;

1464 
	}
}

1469 
	gTMVA
::
ET¬g‘S–eùiÚ
 
TMVA
::
M‘hodPDEFßm
::
	$UIÁToT¬g‘S–eùiÚ
(
UIÁ_t
 
™s
)

1471 
™s
) {

1472 0:  
kM—n
;

1473 1:  
kMpv
;

1475 
	`Log
(è<< 
kWARNING
 << "<UIÁToT¬g‘S–eùiÚ>: unknowÀm‘hod T¬g‘S–eùiÚ: " << 
™s
 << 
Endl
;

1476  
kM—n
;

1478  
kM—n
;

1479 
	}
}

1484 
	gTMVA
::
M‘hodPDEFßm
::
	$FlV¬ŸbËNamesToFßm
() const

1486 
UIÁ_t
 
ifßm
=0; ifßm<
fFßm
.
	`size
(); ifoam++) {

1487 
IÁ_t
 
idim
=0; idim<
fFßm
.
	`©
(
ifßm
)->
	`G‘TÙDim
(); idim++) {

1488 if(
fMuÉiT¬g‘Reg»ssiÚ
 && (
UIÁ_t
)
idim
>=
	`D©aInfo
().
	`G‘NV¬ŸbËs
())

1489 
fFßm
.
	`©
(
ifßm
)->
	`AddV¬ŸbËName
(
	`D©aInfo
().
	`G‘T¬g‘Info
(
idim
-D©aInfo().
	`G‘NV¬ŸbËs
()).
	`G‘Ex´essiÚ
().
	`D©a
());

1491 
fFßm
.
	`©
(
ifßm
)->
	`AddV¬ŸbËName
(
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
idim
).
	`G‘Ex´essiÚ
().
	`D©a
());

1494 
	}
}

1500 
	gTMVA
::
M‘hodPDEFßm
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& , cÚ¡ 
TSŒšg
& ) const

1502 
	}
}

1507 
	gTMVA
::
M‘hodPDEFßm
::
	$G‘H–pMes§ge
() const

1509 
	`Log
(è<< 
Endl
;

1510 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1511 
	`Log
(è<< 
Endl
;

1512 
	`Log
(è<< "PDE-Fßm i ¨v¬ŸtiÚ oàthPDE-RS m‘hod usšg‡ s–f-ad­tšg" << 
Endl
;

1513 
	`Log
(è<< "bšnšg m‘hodØdividthmuÉi-dim’siÚ® v¬ŸbË s·û iÁØa" << 
Endl
;

1514 
	`Log
(è<< "fš™numb” oàhy³r-»ùªgË (ûÎs). Thbšnšg‡lgÜ™hm " << 
Endl
;

1515 
	`Log
(è<< "adju¡ thsizªd…os™iÚ oà¨´edefšed‚umb” oàûÎ such" << 
Endl
;

1516 
	`Log
(è<< "th©hv¬Ÿnû oàthsigÇÈªd background d’s™› šsidth" << 
Endl
;

1517 
	`Log
(è<< "ûÎ »ache ¨mšimum" << 
Endl
;

1518 
	`Log
(è<< 
Endl
;

1519 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- U£ oàbookšg o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1520 
	`Log
(è<< 
Endl
;

1521 
	`Log
(è<< "ThPDEFßm cÏssif›¸suµÜt twØdifã»Á‡lgÜ™hms: " << 
Endl
;

1522 
	`Log
(è<< 
Endl
;

1523 
	`Log
(è<< " (1èC»©Úfßm, which stÜe thsigÇÈov” background" << 
Endl
;

1524 
	`Log
(è<< "…robab™y d’s™y. Duršg fßm budu°thv¬Ÿnû oàthe" << 
Endl
;

1525 
	`Log
(è<< " disüimšªˆšsidthûÎ i mšimi£d." << 
Endl
;

1526 
	`Log
(è<< 
Endl
;

1527 
	`Log
(è<< " Bookšg o±iÚ: SigBgS•¬©ed=F" << 
Endl
;

1528 
	`Log
(è<< 
Endl
;

1529 
	`Log
(è<< " (2èC»©twØ£·¿‹ fßms, oÃ fÜhsigÇÈev’t ªd oÃ fÜ" << 
Endl
;

1530 
	`Log
(è<< " backgroundƒv’ts. Duršg fßm budu°thv¬Ÿnû oàthe" << 
Endl
;

1531 
	`Log
(è<< "ƒv’ˆd’s™y insidthûÎ i mšimi£d s•¬©–y fÜ" << 
Endl
;

1532 
	`Log
(è<< " sigÇÈªd background." << 
Endl
;

1533 
	`Log
(è<< 
Endl
;

1534 
	`Log
(è<< " Bookšg o±iÚ: SigBgS•¬©ed=T" << 
Endl
;

1535 
	`Log
(è<< 
Endl
;

1536 
	`Log
(è<< "ThfŞlowšg o±iÚ ÿÀb£ˆÑhli¡ed v®ue ¬foundØba" << 
Endl
;

1537 
	`Log
(è<< "good s¹šg…ošˆfÜ mo¡‡µliÿtiÚs):" << 
Endl
;

1538 
	`Log
(è<< 
Endl
;

1539 
	`Log
(è<< " SigBgS•¬© F®£ S•¬©SigÇÈªd Background" << 
Endl
;

1540 
	`Log
(è<< " TaCuˆ 0.001 F¿ùiÚ oàou›¸ev’t th©ƒxşuded" << 
Endl
;

1541 
	`Log
(è<< " fromhfßm iÀ—ch dim’siÚ " << 
Endl
;

1542 
	`Log
(è<< " VŞF¿ø 0.0666 VŞumäaùiÚ (u£d fÜ d’s™y c®cuÏtiÚ" << 
Endl
;

1543 
	`Log
(è<< " duršg fßm bud-upè" << 
Endl
;

1544 
	`Log
(è<< "‚AùiveC–l  500 Maxim®‚umb” oàaùivûÎ š fš® fßm " << 
Endl
;

1545 
	`Log
(è<< "‚Sam¶ 2000 Numb” oàMCƒv’t ³¸ûÎ iÀfßm bud-u°" << 
Endl
;

1546 
	`Log
(è<< "‚Bš 5 Numb” oàbš u£d iÀfßm bud-u°" << 
Endl
;

1547 
	`Log
(è<< " Nmš 100 Numb” oàev’t š c–È»quœedØ¥l™ c–l" << 
Endl
;

1548 
	`Log
(è<< " K”ÃÈ NÚ K”ÃÈty³ u£d (possibË v®ue ¬e: NÚe," << 
Endl
;

1549 
	`Log
(è<< " Gauss)" << 
Endl
;

1550 
	`Log
(è<< " Com´es  Tru Com´es fßm ouuˆf" << 
Endl
;

1551 
	`Log
(è<< 
Endl
;

1552 
	`Log
(è<< " Add™iÚ®„eg»ssiÚ o±iÚs:" << 
Endl
;

1553 
	`Log
(è<< 
Endl
;

1554 
	`Log
(è<< "MuÉiT¬g‘Reg»ssiÚ F®£ DØ»g»ssiÚ w™h muÉË¬g‘ " << 
Endl
;

1555 
	`Log
(è<< " T¬g‘S–eùiÚ M—À T¬g‘ s–eùiÚ m‘hod (possibË v®ue ¬e: " << 
Endl
;

1556 
	`Log
(è<< " M—n, Mpv)" << 
Endl
;

1557 
	`Log
(è<< 
Endl
;

1558 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1559 
	`Log
(è<< 
Endl
;

1560 
	`Log
(è<< "Th³rfÜmªû oàthtwØim¶em’tiÚ wa foundØbsim¬ fÜ" << 
Endl
;

1561 
	`Log
(è<< "mo¡ƒxam¶e ¡ud›d. FÜh§mnumb” oàûÎ ³¸fßm,htwo-" << 
Endl
;

1562 
	`Log
(è<< "fßm o±iÚ‡µroxim©–y doubË thamouÁ oàcompu‹¸memÜy‚“ded" << 
Endl
;

1563 
	`Log
(è<< "duršg cÏssifiÿtiÚ. FÜ s³cŸÈÿ£ wh”thev’t-d’s™y" << 
Endl
;

1564 
	`Log
(è<< "di¡ributiÚ oàsigÇÈªd backgroundƒv’t i v”y difã»Á,he" << 
Endl
;

1565 
	`Log
(è<< "two-fßm o±iÚ wa foundØ³rfÜm signifiÿÁly b‘‹¸thªhe" << 
Endl
;

1566 
	`Log
(è<< "İtiÚ w™h oÆy oÃ fßm." << 
Endl
;

1567 
	`Log
(è<< 
Endl
;

1568 
	`Log
(è<< "IÀÜd”Øgaš b‘‹¸şassifiÿtiÚ…”fÜmªû w»comm’dØ£t" << 
Endl
;

1569 
	`Log
(è<< "th·¿m‘” \"nAùiveC–ls\"Ø¨high v®ue." << 
Endl
;

1570 
	`Log
(è<< 
Endl
;

1571 
	`Log
(è<< "Th·¿m‘” \"VŞF¿c\" s³cif› thsizoàth§m¶šg vŞume" << 
Endl
;

1572 
	`Log
(è<< "duršg fßm budu°ªd should btuÃd iÀÜd”Øach›vİtim®" << 
Endl
;

1573 
	`Log
(è<< "³rfÜmªû. A†¬g” box†—d tØ¨»duûd sti¡iÿÈunû¹ašty" << 
Endl
;

1574 
	`Log
(è<< "fÜ sm®ÈŒaššg sam¶e ªdØsmoÙh” sam¶šg. A sm®Ë¸box on" << 
Endl
;

1575 
	`Log
(è<< "thÙh” hªd inü—£ th£ns™iv™yØ¡©i¡iÿÈæuùu©iÚs" << 
Endl
;

1576 
	`Log
(è<< "šhŒaššg sam¶es, buˆfÜ suffic›Ály†¬gŒaššg sam¶es" << 
Endl
;

1577 
	`Log
(è<< "™ wÈ»suÉ iÀ¨mÜ´eci£†oÿÈe¡im©oàth§m¶ed" << 
Endl
;

1578 
	`Log
(è<< "d’s™y. IÀg’”®, high” dim’siÚ®…robËm »quœÏrg” box" << 
Endl
;

1579 
	`Log
(è<< "sizes, dutØth»duûd‡v”agnumb” oàev’t ³¸box vŞume. The" << 
Endl
;

1580 
	`Log
(è<< "deçuÉ v®uoà0.0666 wa İtimi£d fÜ‡Àexam¶w™h 5" << 
Endl
;

1581 
	`Log
(è<< "ob£rvabË ªd¿ššg sam¶e oàthÜd” oà50000 sigÇÈªd" << 
Endl
;

1582 
	`Log
(è<< "backgroundƒv’t —ch." << 
Endl
;

1583 
	`Log
(è<< 
Endl
;

1584 
	`Log
(è<< "Fu¹h”mÜk”ÃÈweightšg cª baùiv©ed, which wÈËadØª" << 
Endl
;

1585 
	`Log
(è<< "add™iÚ®…”fÜmªû im´ovem’t. NÙth© Gaus weightšg wl" << 
Endl
;

1586 
	`Log
(è<< "signifiÿÁly inü—£h»¥Ú£imoàthm‘hod. LšNeighbÜs" << 
Endl
;

1587 
	`Log
(è<< "weightšg…”fÜm ¨lš—¸š‹½Ş©iÚ w™h dœeù‚eighbÜ c–ls" << 
Endl
;

1588 
	`Log
(è<< "fÜƒach dim’siÚ‡nd i much fa¡”hª Gaus weightšg." << 
Endl
;

1589 
	`Log
(è<< 
Endl
;

1590 
	`Log
(è<< "ThşassifiÿtiÚ„esuÉ w”foundØb¿th” in£ns™ivtØthe" << 
Endl
;

1591 
	`Log
(è<< "v®ue oàth·¿m‘” \"nSam¶es\"‡nd \"nBš\"." << 
Endl
;

1592 
	}
}

	@src/MethodPDERS.cxx

66 
	~"TMVA/M‘hodPDERS.h
"

68 
	~"TMVA/Bš¬yT»e.h
"

69 
	~"TMVA/Bš¬yS—rchT»e.h
"

70 
	~"TMVA/CÚfigu¿bË.h
"

71 
	~"TMVA/CÏssif›rFaùÜy.h
"

72 
	~"TMVA/Ev’t.h
"

73 
	~"TMVA/IM‘hod.h
"

74 
	~"TMVA/M‘hodBa£.h
"

75 
	~"TMVA/MsgLogg”.h
"

76 
	~"TMVA/RoÙFšd”.h
"

77 
	~"TMVA/ToŞs.h
"

78 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

79 
	~"TMVA/Ty³s.h
"

81 
	~"Th»adLoÿlStÜage.h
"

82 
	~"TBufãr.h
"

83 
	~"TFe.h
"

84 
	~"TObjSŒšg.h
"

85 
	~"TM©h.h
"

87 
	~<as£¹.h
>

88 
	~<®gÜ™hm
>

90 
Çme¥aû
 
	gTMVA
 {

91 cÚ¡ 
BoŞ_t
 
	gM‘hodPDERS_U£FšdRoÙ
 = 
kFALSE
;

95 
	$REGISTER_METHOD
(
PDERS
)

97 
	`CÏssImp
(
TMVA
::
M‘hodPDERS
);

102 
TMVA
::
M‘hodPDERS
::
	$M‘hodPDERS
ĞcÚ¡ 
TSŒšg
& 
jobName
,

103 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

104 
D©aS‘Info
& 
theD©a
,

105 cÚ¡ 
TSŒšg
& 
theO±iÚ
) :

106 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kPDERS
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

107 
	`fFúC®l
(0),

108 
	`fVRªgeMode
(
kAd­tive
),

109 
	`fK”ÃlE¡im©Ü
(
kBox
),

110 
	`fD–
(0),

111 
	`fShiá
(0),

112 
	`fSÿËS
(0),

113 
	`fSÿËB
(0),

114 
	`fD–F¿c
(0),

115 
	`fGaussSigma
(0),

116 
	`fGaussSigmaNÜm
(0),

117 
	`fNRegOut
(0),

118 
	`fNEv’tsMš
(0),

119 
	`fNEv’tsMax
(0),

120 
	`fMaxVI‹¿tiÚs
(0),

121 
	`fIn™ŸlSÿË
(0),

122 
	`fIn™ŸlizedVŞumeEË
(0),

123 
	`fkNNMš
(0),

124 
	`fkNNMax
(0),

125 
	`fMax_di¡ªû
(0),

126 
	`fPrš‹d
(0),

127 
	$fNÜmT»e
(0)

129 
fH–pVŞume
 = 
NULL
;

130 
fBš¬yT»e
 = 
NULL
;

131 
	}
}

136 
	gTMVA
::
M‘hodPDERS
::
	$M‘hodPDERS
Ğ
D©aS‘Info
& 
theD©a
,

137 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

138 
	`M‘hodBa£
Ğ
Ty³s
::
kPDERS
, 
theD©a
, 
theWeightFe
),

139 
	`fFúC®l
(0),

140 
	`fVRªgeMode
(
kAd­tive
),

141 
	`fK”ÃlE¡im©Ü
(
kBox
),

142 
	`fD–
(0),

143 
	`fShiá
(0),

144 
	`fSÿËS
(0),

145 
	`fSÿËB
(0),

146 
	`fD–F¿c
(0),

147 
	`fGaussSigma
(0),

148 
	`fGaussSigmaNÜm
(0),

149 
	`fNRegOut
(0),

150 
	`fNEv’tsMš
(0),

151 
	`fNEv’tsMax
(0),

152 
	`fMaxVI‹¿tiÚs
(0),

153 
	`fIn™ŸlSÿË
(0),

154 
	`fIn™ŸlizedVŞumeEË
(0),

155 
	`fkNNMš
(0),

156 
	`fkNNMax
(0),

157 
	`fMax_di¡ªû
(0),

158 
	`fPrš‹d
(0),

159 
	$fNÜmT»e
(0)

161 
fH–pVŞume
 = 
NULL
;

162 
fBš¬yT»e
 = 
NULL
;

163 
	}
}

168 
BoŞ_t
 
	gTMVA
::
M‘hodPDERS
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

170 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

171 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
è 
kTRUE
;

172  
kFALSE
;

173 
	}
}

178 
	gTMVA
::
M‘hodPDERS
::
	$In™
( )

180 
fBš¬yT»e
 = 
NULL
;

182 
	`Upd©eThis
();

185 
fD–F¿c
 = 3.0;

186 
fVRªgeMode
 = 
kAd­tive
;

187 
fK”ÃlE¡im©Ü
 = 
kBox
;

190 
fNEv’tsMš
 = 100;

191 
fNEv’tsMax
 = 200;

192 
fMaxVI‹¿tiÚs
 = 150;

193 
fIn™ŸlSÿË
 = 0.99;

194 
fGaussSigma
 = 0.1;

195 
fNÜmT»e
 = 
kFALSE
;

197 
fkNNMš
 = 
	`IÁ_t
(
fNEv’tsMš
);

198 
fkNNMax
 = 
	`IÁ_t
(
fNEv’tsMax
);

200 
fIn™ŸlizedVŞumeEË
 = 
kFALSE
;

201 
fAv”ageRMS
.
	`ş—r
();

204 
	`S‘SigÇlReã»nûCut
( 0.0 );

205 
	}
}

210 
	gTMVA
::
M‘hodPDERS
::~
	$M‘hodPDERS
( )

212 ià(
fD–
è
d–‘e
 fDelta;

213 ià(
fShiá
è
d–‘e
 fShift;

215 ià(
NULL
 !ğ
fBš¬yT»e
è
d–‘e
 fBinaryTree;

216 
	}
}

254 
	gTMVA
::
M‘hodPDERS
::
	$Deş¬eO±iÚs
()

256 
	`Deş¬eO±iÚRef
(
fVŞumeRªge
="Adaptive", "VolumeRangeMode", "Methodo determine volume size");

257 
	`AddP»DefV®
(
	`TSŒšg
("Unscaled"));

258 
	`AddP»DefV®
(
	`TSŒšg
("MinMax"));

259 
	`AddP»DefV®
(
	`TSŒšg
("RMS"));

260 
	`AddP»DefV®
(
	`TSŒšg
("Adaptive"));

261 
	`AddP»DefV®
(
	`TSŒšg
("kNN"));

263 
	`Deş¬eO±iÚRef
(
fK”ÃlSŒšg
="Box", "KernelEstimator", "Kernelƒstimation function");

264 
	`AddP»DefV®
(
	`TSŒšg
("Box"));

265 
	`AddP»DefV®
(
	`TSŒšg
("Sphere"));

266 
	`AddP»DefV®
(
	`TSŒšg
("Teepee"));

267 
	`AddP»DefV®
(
	`TSŒšg
("Gauss"));

268 
	`AddP»DefV®
(
	`TSŒšg
("Sinc3"));

269 
	`AddP»DefV®
(
	`TSŒšg
("Sinc5"));

270 
	`AddP»DefV®
(
	`TSŒšg
("Sinc7"));

271 
	`AddP»DefV®
(
	`TSŒšg
("Sinc9"));

272 
	`AddP»DefV®
(
	`TSŒšg
("Sinc11"));

273 
	`AddP»DefV®
(
	`TSŒšg
("Lanczos2"));

274 
	`AddP»DefV®
(
	`TSŒšg
("Lanczos3"));

275 
	`AddP»DefV®
(
	`TSŒšg
("Lanczos5"));

276 
	`AddP»DefV®
(
	`TSŒšg
("Lanczos8"));

277 
	`AddP»DefV®
(
	`TSŒšg
("Trim"));

279 
	`Deş¬eO±iÚRef
(
fD–F¿c
 , "DeltaFrac", "nEventsMin/Max for minmax‡nd„ms volume„ange");

280 
	`Deş¬eO±iÚRef
(
fNEv’tsMš
 , "NEventsMin", "nEventsMin for‡daptive volume„ange");

281 
	`Deş¬eO±iÚRef
(
fNEv’tsMax
 , "NEventsMax", "nEventsMax for‡daptive volume„ange");

282 
	`Deş¬eO±iÚRef
(
fMaxVI‹¿tiÚs
, "MaxVIterations", "MaxVIterations for‡daptive volume„ange");

283 
	`Deş¬eO±iÚRef
(
fIn™ŸlSÿË
 , "InitialScale", "InitialScale for‡daptive volume„ange");

284 
	`Deş¬eO±iÚRef
(
fGaussSigma
 , "GaussSigma", "Width (wrt volume size) of Gaussian kernelƒstimator");

285 
	`Deş¬eO±iÚRef
(
fNÜmT»e
 , "NormTree", "Normalize binary searchree");

286 
	}
}

291 
	gTMVA
::
M‘hodPDERS
::
	$ProûssO±iÚs
()

293 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

294 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot yet‡vailable for method: "

295 << 
	`G‘M‘hodTy³Name
()

297 << 
Endl
;

300 
fGaussSigmaNÜm
 = 
fGaussSigma
;

302 
fVRªgeMode
 = 
M‘hodPDERS
::
kUnsuµÜ‹d
;

304 ià(
fVŞumeRªge
 =ğ"MšMax" ) 
fVRªgeMode
 = 
kMšMax
;

305 ià(
fVŞumeRªge
 =ğ"RMS" ) 
fVRªgeMode
 = 
kRMS
;

306 ià(
fVŞumeRªge
 =ğ"Ad­tive" ) 
fVRªgeMode
 = 
kAd­tive
;

307 ià(
fVŞumeRªge
 =ğ"UnsÿËd" ) 
fVRªgeMode
 = 
kUnsÿËd
;

308 ià(
fVŞumeRªge
 =ğ"kNN" ) 
fVRªgeMode
 = 
kkNN
;

310 
	`Log
(è<< 
kFATAL
 << "VŞumeRªgeMod·¿m‘” '" << 
fVŞumeRªge
 << "' unknown" << 
Endl
;

313 ià(
fK”ÃlSŒšg
 =ğ"Box" ) 
fK”ÃlE¡im©Ü
 = 
kBox
;

314 ià(
fK”ÃlSŒšg
 =ğ"Sph”e" ) 
fK”ÃlE¡im©Ü
 = 
kSph”e
;

315 ià(
fK”ÃlSŒšg
 =ğ"T“³e" ) 
fK”ÃlE¡im©Ü
 = 
kT“³e
;

316 ià(
fK”ÃlSŒšg
 =ğ"Gauss" ) 
fK”ÃlE¡im©Ü
 = 
kGauss
;

317 ià(
fK”ÃlSŒšg
 =ğ"Sšc3" ) 
fK”ÃlE¡im©Ü
 = 
kSšc3
;

318 ià(
fK”ÃlSŒšg
 =ğ"Sšc5" ) 
fK”ÃlE¡im©Ü
 = 
kSšc5
;

319 ià(
fK”ÃlSŒšg
 =ğ"Sšc7" ) 
fK”ÃlE¡im©Ü
 = 
kSšc7
;

320 ià(
fK”ÃlSŒšg
 =ğ"Sšc9" ) 
fK”ÃlE¡im©Ü
 = 
kSšc9
;

321 ià(
fK”ÃlSŒšg
 =ğ"Sšc11" ) 
fK”ÃlE¡im©Ü
 = 
kSšc11
;

322 ià(
fK”ÃlSŒšg
 =ğ"Lªczos2" ) 
fK”ÃlE¡im©Ü
 = 
kLªczos2
;

323 ià(
fK”ÃlSŒšg
 =ğ"Lªczos3" ) 
fK”ÃlE¡im©Ü
 = 
kLªczos3
;

324 ià(
fK”ÃlSŒšg
 =ğ"Lªczos5" ) 
fK”ÃlE¡im©Ü
 = 
kLªczos5
;

325 ià(
fK”ÃlSŒšg
 =ğ"Lªczos8" ) 
fK”ÃlE¡im©Ü
 = 
kLªczos8
;

326 ià(
fK”ÃlSŒšg
 =ğ"Trim" ) 
fK”ÃlE¡im©Ü
 = 
kTrim
;

328 
	`Log
(è<< 
kFATAL
 << "K”ÃlE¡im©Ü…¬am‘” '" << 
fK”ÃlSŒšg
 << "' unknown" << 
Endl
;

333 
	`Log
(è<< 
kVERBOSE
 << "interpreted option string: vRangeMethod: '"

334 << (cÚ¡ *)((
fVRªgeMode
 =ğ
kMšMax
) ? "MinMax" :

335 (
fVRªgeMode
 =ğ
kUnsÿËd
) ? "Unscaled" :

336 (
fVRªgeMode
 =ğ
kRMS
 ) ? "RMS" : "Ad­tive"è<< "'" << 
Endl
;

337 ià(
fVRªgeMode
 =ğ
kMšMax
 || fVRªgeMod=ğ
kRMS
)

338 
	`Log
(è<< 
kVERBOSE
 << "d–F¿c: " << 
fD–F¿c
 << 
Endl
;

340 
	`Log
(è<< 
kVERBOSE
 << "nEventsMin/Max, maxVIterations, initialScale: "

341 << 
fNEv’tsMš
 << " " << 
fNEv’tsMax


342 << " " << 
fMaxVI‹¿tiÚs
 << " " << 
fIn™ŸlSÿË
 << 
Endl
;

343 
	`Log
(è<< 
kVERBOSE
 << "K”ÃlE¡im©Ü = " << 
fK”ÃlSŒšg
 << 
Endl
;

344 
	}
}

352 
	gTMVA
::
M‘hodPDERS
::
	$T¿š
( )

354 ià(
	`IsNÜm®i£d
()è
	`Log
(è<< 
kFATAL
 << "\"Normalise\" option cannot be used with PDERS; "

357 << 
Endl
;

359 
	`C»©eBš¬yS—rchT»e
Ğ
Ty³s
::
kT¿ššg
 );

361 
	`C®cAv”ages
();

362 
	`S‘VŞumeEËm’t
();

364 
fIn™ŸlizedVŞumeEË
 = 
kTRUE
;

365 
	`Ex™FromT¿ššg
();

366 
	}
}

372 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

374 ià(
fIn™ŸlizedVŞumeEË
 =ğ
kFALSE
) {

375 
fIn™ŸlizedVŞumeEË
 = 
kTRUE
;

378 
	`as£¹
Ğ
fBš¬yT»e
 );

380 
	`C®cAv”ages
();

381 
	`S‘VŞumeEËm’t
();

385 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

387  
this
->
	`CRSÿlc
Ğ*
	`G‘Ev’t
() );

388 
	}
}

392 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
M‘hodPDERS
::
	$G‘Reg»ssiÚV®ues
()

394 ià(
fReg»ssiÚR‘uºV®
 =ğ0èfReg»ssiÚR‘uºV® = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>;

395 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

398 ià(
fIn™ŸlizedVŞumeEË
 =ğ
kFALSE
) {

399 
fIn™ŸlizedVŞumeEË
 = 
kTRUE
;

402 
	`as£¹
Ğ
fBš¬yT»e
 );

404 
	`C®cAv”ages
();

406 
	`S‘VŞumeEËm’t
();

409 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

410 
this
->
	`RRSÿlc
Ğ*
ev
, 
fReg»ssiÚR‘uºV®
 );

412 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ev
);

413 
UIÁ_t
 
iv¬
 = 0;

414 
¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™
 = 
fReg»ssiÚR‘uºV®
->
	`begš
(); iˆ!ğfReg»ssiÚR‘uºV®->
	`’d
(); it++ ) {

415 
evT
->
	`S‘T¬g‘
(
iv¬
,(*
™
));

416 
iv¬
++;

419 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

420 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

422 
iv¬
 = 0; iv¬<
evT2
->
	`G‘NT¬g‘s
(); ivar++) {

423 
fReg»ssiÚR‘uºV®
->
	`push_back
(
evT2
->
	`G‘T¬g‘
(
iv¬
));

426 
d–‘e
 
evT
;

429  (*
fReg»ssiÚR‘uºV®
);

430 
	}
}

435 
	gTMVA
::
M‘hodPDERS
::
	$C®cAv”ages
()

437 ià(
fVRªgeMode
 =ğ
kAd­tive
 || fVRªgeMod=ğ
kRMS
 || fVRªgeMod=ğ
kkNN
 ) {

438 
fAv”ageRMS
.
	`ş—r
();

439 
fBš¬yT»e
->
	`C®cSti¡ics
();

441 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

442 ià(!
	`DoReg»ssiÚ
()){

443 
Flßt_t
 
rmsS
 = 
fBš¬yT»e
->
	`RMS
(
Ty³s
::
kSigÇl
, 
iv¬
);

444 
Flßt_t
 
rmsB
 = 
fBš¬yT»e
->
	`RMS
(
Ty³s
::
kBackground
, 
iv¬
);

445 
fAv”ageRMS
.
	`push_back
Ğ(
rmsS
 + 
rmsB
)*0.5 );

447 
Flßt_t
 
rms
 = 
fBš¬yT»e
->
	`RMS
Ğ
iv¬
 );

448 
fAv”ageRMS
.
	`push_back
Ğ
rms
 );

452 
	}
}

457 
	gTMVA
::
M‘hodPDERS
::
	$C»©eBš¬yS—rchT»e
Ğ
Ty³s
::
ET»eTy³
 
ty³
 )

459 ià(
NULL
 !ğ
fBš¬yT»e
è
d–‘e
 fBinaryTree;

460 
fBš¬yT»e
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

461 ià(
fNÜmT»e
) {

462 
fBš¬yT»e
->
	`S‘NÜm®ize
Ğ
kTRUE
 );

465 
fBš¬yT»e
->
	`Fl
Ğ
	`G‘Ev’tCŞËùiÚ
(
ty³
) );

467 ià(
fNÜmT»e
) {

468 
fBš¬yT»e
->
	`NÜm®izeT»e
();

471 ià(!
	`DoReg»ssiÚ
()) {

473 
fSÿËS
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kSigÇl
 );

474 
fSÿËB
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kBackground
 );

476 
	`Log
(è<< 
kVERBOSE
 << "SigÇÈªd background sÿËs: " << 
fSÿËS
 << " " << 
fSÿËB
 << 
Endl
;

478 
	}
}

483 
	gTMVA
::
M‘hodPDERS
::
	$S‘VŞumeEËm’t
( ) {

484 ià(
	`G‘Nv¬
()==0) {

485 
	`Log
(è<< 
kFATAL
 << "G‘Nv¬(è=ğ0" << 
Endl
;

490 
fkNNMš
 = 
	`IÁ_t
(
fNEv’tsMš
);

491 
fkNNMax
 = 
	`IÁ_t
(
fNEv’tsMax
);

493 ià(
fD–
è
d–‘e
 fDelta;

494 ià(
fShiá
è
d–‘e
 fShift;

495 
fD–
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>Ğ
	`G‘Nv¬
() );

496 
fShiá
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>Ğ
	`G‘Nv¬
() );

498 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

499 
fVRªgeMode
) {

501 
kRMS
:

502 
kkNN
:

503 
kAd­tive
:

505 ià(
fAv”ageRMS
.
	`size
(è!ğ
	`G‘Nv¬
())

506 
	`Log
(è<< 
kFATAL
 << "<S‘VŞumeEËm’t> RMS‚Ù compu‹d: " << 
fAv”ageRMS
.
	`size
(è<< 
Endl
;

507 (*
fD–
)[
iv¬
] = 
fAv”ageRMS
[iv¬]*
fD–F¿c
;

508 
	`Log
(è<< 
kVERBOSE
 << "d– oàv¬[" << (*
fIÅutV¬s
)[
iv¬
]

509 << "\t]: " << 
fAv”ageRMS
[
iv¬
]

510 << "\ˆ | com°w™h |max - mš|: " << (
	`G‘Xmax
Ğ
iv¬
 ) - 
	`G‘Xmš
( ivar ))

511 << 
Endl
;

513 
kMšMax
:

514 (*
fD–
)[
iv¬
] = (
	`G‘Xmax
Ğiv¬ ) - 
	`G‘Xmš
Ğiv¬ ))*
fD–F¿c
;

516 
kUnsÿËd
:

517 (*
fD–
)[
iv¬
] = 
fD–F¿c
;

520 
	`Log
(è<< 
kFATAL
 << "<SetVolumeElement> unknown„ange-set mode: "

521 << 
fVRªgeMode
 << 
Endl
;

523 (*
fShiá
)[
iv¬
] = 0.5;

526 
	}
}

531 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$IG‘VŞumeCÚ‹ÁFÜRoÙ
Ğ
DoubË_t
 
sÿË
 )

533  
	`ThisPDERS
()->
	`G‘VŞumeCÚ‹ÁFÜRoÙ
Ğ
sÿË
 );

534 
	}
}

539 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$G‘VŞumeCÚ‹ÁFÜRoÙ
Ğ
DoubË_t
 
sÿË
 )

541 
VŞume
 
	`v
Ğ*
fH–pVŞume
 );

542 
v
.
	`SÿËIÁ”v®
Ğ
sÿË
 );

544 
DoubË_t
 
couÁ
 = 
	`G‘Bš¬yT»e
()->
	`S—rchVŞume
Ğ&
v
 );

546 
v
.
	`D–‘e
();

547  
couÁ
;

548 
	}
}

550 
	gTMVA
::
M‘hodPDERS
::
G‘Sam¶e
ĞcÚ¡ 
Ev’t
& 
e
,

551 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>& 
ev’ts
,

552 
VŞume
 *
vŞume
 )

554 
Flßt_t
 
	gcouÁ
 = 0;

562 #ifdeà 
TMVA_M‘hodPDERS__couÁByHªd__Debug__


565 
	gcouÁ
 = 
fBš¬yT»e
->
S—rchVŞume
Ğ
vŞume
 );

567 
IÁ_t
 
	giS
 = 0, 
	giB
 = 0;

568 
UIÁ_t
 
	gnv¬
 = 
G‘Nv¬
();

569 
UIÁ_t
 
	g›vt_
=0; ievt_<
D©a
()->
G‘NT¿ššgEv’ts
(); ievt_++) {

570 cÚ¡ 
Ev’t
 * 
	gev
 = 
G‘T¿ššgEv’t
(
›vt_
);

571 
BoŞ_t
 
	gšV
;

572 
IÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

573 
Flßt_t
 
	gx
 = 
ev
->
G‘V®ue
(
iv¬
);

574 
	gšV
 = (
x
 > (*
vŞume
->
Low”
)[
iv¬
] && x <ğ(*vŞume->
Uµ”
)[ivar]);

575 ià(!
	gšV
) ;

577 ià(
	gšV
) {

578 
	gš
++;

581 
Log
(è<< 
	gkVERBOSE
 << "debug: mye¡: " << 
	gš
 << 
	gEndl
;

582 
Log
(è<< 
	gkVERBOSE
 << "debug: bšT»e: " << 
	gcouÁ
 << 
	gEndl
 << Endl;

588 ià(
	gfVRªgeMode
 =ğ
kRMS
 || 
fVRªgeMode
 =ğ
kMšMax
 || fVRªgeMod=ğ
kUnsÿËd
) {

590 
¡d
::
veùÜ
<
DoubË_t
> *
lb
 = 
Ãw
 std::veùÜ<DoubË_t>Ğ
G‘Nv¬
() );

591 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); iv¬++è(*
	glb
)[
iv¬
] = 
e
.
G‘V®ue
(ivar);

592 
	g¡d
::
veùÜ
<
DoubË_t
> *
ub
 = 
Ãw
 
¡d
::veùÜ<DoubË_t>Ğ*
lb
 );

593 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

594 (*
	glb
)[
iv¬
] -ğ(*
fD–
)[iv¬]*(1.0 - (*
fShiá
)[ivar]);

595 (*
	gub
)[
iv¬
] +ğ(*
fD–
)[iv¬]*(*
fShiá
)[ivar];

597 
VŞume
* 
	gsvŞume
 = 
Ãw
 VŞumeĞ
lb
, 
ub
 );

600 
	gfBš¬yT»e
->
S—rchVŞume
Ğ
svŞume
, &
ev’ts
 );

602 ià(
	gfVRªgeMode
 =ğ
kAd­tive
) {

608 ià(
M‘hodPDERS_U£FšdRoÙ
) {

612 
fH–pVŞume
 = 
vŞume
;

614 
Upd©eThis
();

615 
RoÙFšd”
 
roÙFšd”
Ğ
this
, 0.01, 50, 200, 10 );

616 
DoubË_t
 
	gsÿË
 = 
roÙFšd”
.
RoÙ
Ğ(
fNEv’tsMš
 + 
fNEv’tsMax
)/2.0 );

618 
	gvŞume
->
SÿËIÁ”v®
Ğ
sÿË
 );

620 
	gfBš¬yT»e
->
S—rchVŞume
Ğ
vŞume
, &
ev’ts
 );

622 
	gfH–pVŞume
 = 
NULL
;

628 
	gcouÁ
 = 
fBš¬yT»e
->
S—rchVŞume
Ğ
vŞume
 );

630 
Flßt_t
 
	gnEv’tsO
 = 
couÁ
;

631 
IÁ_t
 
	gi_
=0;

633 
	gnEv’tsO
 < 
	gfNEv’tsMš
) {

634 
	gvŞume
->
SÿËIÁ”v®
( 1.15 );

635 
	gcouÁ
 = 
fBš¬yT»e
->
S—rchVŞume
Ğ
vŞume
 );

636 
	gnEv’tsO
 = 
couÁ
;

637 
	gi_
++;

639 ià(
	gi_
 > 50è
Log
(è<< 
	gkWARNING
 << "w¬nšg iÀev’t: " << 
	ge


641 << ">50 i‹¿tiÚ š whloİ (" << 
	gi_
 << ")" << 
	gEndl
;

643 
Flßt_t
 
	gnEv’tsN
 = 
nEv’tsO
;

644 
Flßt_t
 
	gnEv’tsE
 = 0.5*(
fNEv’tsMš
 + 
fNEv’tsMax
);

645 
Flßt_t
 
	gsÿËO
 = 1.0;

646 
Flßt_t
 
	gsÿËN
 = 
fIn™ŸlSÿË
;

647 
Flßt_t
 
	gsÿË
 = 
sÿËN
;

648 
Flßt_t
 
	gsÿËBe¡
 = 
sÿËN
;

649 
Flßt_t
 
	gnEv’tsBe¡
 = 
nEv’tsN
;

651 
IÁ_t
 
	gic
=1; ic<
	gfMaxVI‹¿tiÚs
; ic++) {

652 ià(
	gnEv’tsN
 < 
	gfNEv’tsMš
 ||‚Ev’tsN > 
	gfNEv’tsMax
) {

655 
VŞume
* 
	gv
 = 
Ãw
 VŞumeĞ*
vŞume
 );

656 
	gv
->
SÿËIÁ”v®
Ğ
sÿË
 );

657 
	gnEv’tsN
 = 
fBš¬yT»e
->
S—rchVŞume
Ğ
v
 );

660 ià(
	gnEv’tsN
 > 1 &&‚Ev’tsN - 
	gnEv’tsO
 != 0)

661 ià(
sÿËN
 - 
sÿËO
 != 0)

662 
sÿË
 +ğ(
sÿËN
 - 
sÿËO
)/(
nEv’tsN
 - 
nEv’tsO
)*(
nEv’tsE
 -‚EventsN);

664 
	gsÿË
 += (-0.01);

666 
	gsÿË
 += 0.5;

669 
	gsÿËN
 = 
sÿË
;

672 ià(
	gTM©h
::
Abs
(
nEv’tsN
 - 
nEv’tsE
è< 
TM©h
::Abs(
nEv’tsBe¡
 -‚EventsE) &&

673 (
nEv’tsN
 >ğ
fNEv’tsMš
 || 
nEv’tsBe¡
 <‚EventsN)) {

674 
nEv’tsBe¡
 = 
nEv’tsN
;

675 
	gsÿËBe¡
 = 
sÿË
;

678 
	gv
->
D–‘e
();

679 
d–‘e
 
	gv
;

685 
	gnEv’tsN
 = 
nEv’tsBe¡
;

687 ià(
	gnEv’tsN
 < 
	gfNEv’tsMš
-1 ||‚Ev’tsN > 
	gfNEv’tsMax
+1)

688 
Log
(è<< 
	gkWARNING
 << "w¬nšg iÀev’ˆ" << 
	ge


690 << "max. #™”©iÚ (" << 
	gfMaxVI‹¿tiÚs
 << ")"

691 << "[‚Ev’ts: " << 
	gnEv’tsN
 << " " << 
	gfNEv’tsMš
 << " " << 
	gfNEv’tsMax
 << "]"

692 << 
	gEndl
;

694 
	gvŞume
->
SÿËIÁ”v®
Ğ
sÿËBe¡
 );

695 
	gfBš¬yT»e
->
S—rchVŞume
Ğ
vŞume
, &
ev’ts
 );

700 } ià(
	gfVRªgeMode
 =ğ
kkNN
) {

701 
VŞume
 
v
(*
vŞume
);

703 
	gev’ts
.
ş—r
();

705 
IÁ_t
 
	gkNNcouÁ
 = 
fBš¬yT»e
->
S—rchVŞumeW™hMaxLim™
Ğ&
v
, &
ev’ts
, 
fkNNMax
+1 );

708 
IÁ_t
 
	gt_times
 = 0;

710  !(
	gkNNcouÁ
 >ğ
fkNNMš
 && 
kNNcouÁ
 <ğ
fkNNMax
) ) {

711 ià(
kNNcouÁ
 < 
fkNNMš
) {

712 
Flßt_t
 
sÿË
 = 2;

713 
	gvŞume
->
SÿËIÁ”v®
Ğ
sÿË
 );

715 ià(
	gkNNcouÁ
 > 
	gfkNNMax
) {

716 
Flßt_t
 
	gsÿË
 = 0.1;

717 
	gvŞume
->
SÿËIÁ”v®
Ğ
sÿË
 );

719 
	gev’ts
.
ş—r
();

721 
	gv
 = *
vŞume
 ;

723 
	gkNNcouÁ
 = 
fBš¬yT»e
->
S—rchVŞumeW™hMaxLim™
Ğ&
v
, &
ev’ts
, 
fkNNMax
+1 );

725 
	gt_times
++;

727 ià(
	gt_times
 =ğ
fMaxVI‹¿tiÚs
) {

728 
Log
(è<< 
kWARNING
 << "w¬nšg iÀev’t" << 
e


730 << "max. #™”©iÚ (" << 
fMaxVI‹¿tiÚs
 << ")"

731 << "[ kNN: " << 
fkNNMš
 << " " << 
fkNNMax
 << 
Endl
;

737 
DoubË_t
 *
	gdim_nÜm®iz©iÚ
 = 
Ãw
 DoubË_t[
G‘Nv¬
()];

738 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

739 
	gdim_nÜm®iz©iÚ
 [
iv¬
] = 1.0 / ((*
v
.
fUµ”
)[iv¬] - (*v.
fLow”
)[ivar]);

742 
	g¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*> 
‹mpVeùÜ
;

744 ià(
	gkNNcouÁ
 >ğ
fkNNMš
) {

745 
¡d
::
veùÜ
<
DoubË_t
> *
di¡ªûs
 = 
Ãw
 std::veùÜ<DoubË_t>Ğ
kNNcouÁ
 );

748 
IÁ_t
 
	gj
=0;j< IÁ_t(
ev’ts
.
size
()) ;j++)

749 (*
	gdi¡ªûs
)[
j
] = 
G‘NÜm®izedDi¡ªû
 ( 
e
, *
ev’ts
[j], 
dim_nÜm®iz©iÚ
 );

752 
	g¡d
::
veùÜ
<
DoubË_t
>::
™”©Ü
 
wsk
 = 
di¡ªûs
->
begš
();

753 
IÁ_t
 
	gj
=0;j<
	gfkNNMš
-1;j++è
	gwsk
++;

754 
	g¡d
::
Áh_–em’t
Ğ
di¡ªûs
->
begš
(), 
wsk
, di¡ªûs->
’d
() );

758 
IÁ_t
 
	gj
=0;j<IÁ_t(
ev’ts
.
size
());j++) {

759 
DoubË_t
 
	gdi¡
 = 
G‘NÜm®izedDi¡ªû
Ğ
e
, *
ev’ts
[
j
], 
dim_nÜm®iz©iÚ
 );

761 ià(
	gdi¡
 <ğ(*
di¡ªûs
)[
fkNNMš
-1])

762 
‹mpVeùÜ
.
push_back
Ğ
ev’ts
[
j
] );

764 
	gfMax_di¡ªû
 = (*
di¡ªûs
)[
fkNNMš
-1];

765 
d–‘e
 
	gdi¡ªûs
;

767 
	gd–‘e
[] 
	gdim_nÜm®iz©iÚ
;

768 
	gev’ts
 = 
‹mpVeùÜ
;

773 
Log
(è<< 
	gkFATAL
 << "<G‘Sam¶e> unknowÀRªgeMode: " << 
	gfVRªgeMode
 << 
	gEndl
;

780 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$CRSÿlc
ĞcÚ¡ 
Ev’t
& 
e
 )

782 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*> 
ev’ts
;

787 
¡d
::
veùÜ
<
DoubË_t
> *
lb
 = 
Ãw
 std::veùÜ<DoubË_t>Ğ
	`G‘Nv¬
() );

788 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); iv¬++è(*
lb
)[iv¬] = 
e
.
	`G‘V®ue
(ivar);

790 
¡d
::
veùÜ
<
DoubË_t
> *
ub
 = 
Ãw
 std::veùÜ<DoubË_t>Ğ*
lb
 );

791 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

792 (*
lb
)[
iv¬
] -ğ(*
fD–
)[iv¬]*(1.0 - (*
fShiá
)[ivar]);

793 (*
ub
)[
iv¬
] +ğ(*
fD–
)[iv¬]*(*
fShiá
)[ivar];

796 
VŞume
 *
vŞume
 = 
Ãw
 
	`VŞume
Ğ
lb
, 
ub
 );

798 
	`G‘Sam¶e
Ğ
e
, 
ev’ts
, 
vŞume
 );

799 
DoubË_t
 
couÁ
 = 
	`CK”ÃlE¡im©e
Ğ
e
, 
ev’ts
, *
vŞume
 );

800 
d–‘e
 
vŞume
;

801 
d–‘e
 
lb
;

802 
d–‘e
 
ub
;

804  
couÁ
;

805 
	}
}

809 
	gTMVA
::
M‘hodPDERS
::
RRSÿlc
ĞcÚ¡ 
Ev’t
& 
e
, 
¡d
::
veùÜ
<
Flßt_t
>* 
couÁ
 )

811 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*> 
ev’ts
;

816 
	g¡d
::
veùÜ
<
DoubË_t
> *
lb
 = 
Ãw
 
¡d
::veùÜ<DoubË_t>Ğ
G‘Nv¬
() );

817 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); iv¬++è(*
	glb
)[
iv¬
] = 
e
.
G‘V®ue
(ivar);

819 
	g¡d
::
veùÜ
<
DoubË_t
> *
ub
 = 
Ãw
 
¡d
::veùÜ<DoubË_t>Ğ*
lb
 );

820 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++) {

821 (*
	glb
)[
iv¬
] -ğ(*
fD–
)[iv¬]*(1.0 - (*
fShiá
)[ivar]);

822 (*
	gub
)[
iv¬
] +ğ(*
fD–
)[iv¬]*(*
fShiá
)[ivar];

824 
VŞume
 *
	gvŞume
 = 
Ãw
 VŞumeĞ
lb
, 
ub
 );

826 
G‘Sam¶e
Ğ
e
, 
ev’ts
, 
vŞume
 );

827 
RK”ÃlE¡im©e
Ğ
e
, 
ev’ts
, *
vŞume
, 
couÁ
 );

829 
d–‘e
 
	gvŞume
;

836 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
CK”ÃlE¡im©e
ĞcÚ¡ 
Ev’t
 & 
ev’t
,

837 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>& 
ev’ts
, 
VŞume
& 
v
 )

839 
DoubË_t
 *
	gdim_nÜm®iz©iÚ
 = 
Ãw
 DoubË_t[
G‘Nv¬
()];

840 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++)

841 
	gdim_nÜm®iz©iÚ
 [
iv¬
] = 2 / ((*
v
.
fUµ”
)[iv¬] - (*v.
fLow”
)[ivar]);

843 
DoubË_t
 
	gpdfSumS
 = 0;

844 
DoubË_t
 
	gpdfSumB
 = 0;

847 
	g¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>::
™”©Ü
 
›v
 = 
ev’ts
.
begš
(); 
	g›v
 !ğev’ts.
’d
(); iev++) {

850 
DoubË_t
 
	gnÜm®ized_di¡ªû
 = 
G‘NÜm®izedDi¡ªû
 (
ev’t
, *(*
›v
), 
dim_nÜm®iz©iÚ
);

854 ià(
	gnÜm®ized_di¡ªû
 > 1 && 
	gfK”ÃlE¡im©Ü
 !ğ
kBox
) ;

856 iàĞ(*
	g›v
)->
G‘CÏss
()==
fSigÇlCÏss
 )

857 
pdfSumS
 +ğ
AµlyK”ÃlFunùiÚ
 (
nÜm®ized_di¡ªû
è* (*
›v
)->
G‘Weight
();

859 
	gpdfSumB
 +ğ
AµlyK”ÃlFunùiÚ
 (
nÜm®ized_di¡ªû
è* (*
›v
)->
G‘Weight
();

861 
	gpdfSumS
 = 
K”ÃlNÜm®iz©iÚ
Ğ
pdfSumS
 < 0. ? 0. :…dfSumS );

862 
	gpdfSumB
 = 
K”ÃlNÜm®iz©iÚ
Ğ
pdfSumB
 < 0. ? 0. :…dfSumB );

864 
	gd–‘e
[] 
	gdim_nÜm®iz©iÚ
;

866 ià(
	gpdfSumS
 < 1e-20 && 
	gpdfSumB
 < 1e-20)  0.5;

867 ià(
	gpdfSumB
 < 1e-20)  1.0;

868 ià(
	gpdfSumS
 < 1e-20)  0.0;

870 
Flßt_t
 
	gr
 = 
pdfSumB
*
fSÿËB
/(
pdfSumS
*
fSÿËS
);

871  1.0/(
	gr
 + 1.0);

877 
	gTMVA
::
M‘hodPDERS
::
RK”ÃlE¡im©e
ĞcÚ¡ 
Ev’t
 & 
ev’t
,

878 
¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>& 
ev’ts
, 
VŞume
& 
v
,

879 
¡d
::
veùÜ
<
Flßt_t
>* 
pdfSum
 )

881 
DoubË_t
 *
dim_nÜm®iz©iÚ
 = 
Ãw
 DoubË_t[
G‘Nv¬
()];

882 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘Nv¬
(); ivar++)

883 
	gdim_nÜm®iz©iÚ
 [
iv¬
] = 2 / ((*
v
.
fUµ”
)[iv¬] - (*v.
fLow”
)[ivar]);

886 
	gpdfSum
->
ş—r
();

887 
Flßt_t
 
	gpdfDiv
 = 0;

888 
	gfNRegOut
 = 1;

890 
IÁ_t
 
	giv¬
 = 0; iv¬ < 
	gfNRegOut
 ; ivar++)

891 
	gpdfSum
->
push_back
( 0 );

894 
	g¡d
::
veùÜ
<cÚ¡ 
Bš¬yS—rchT»eNode
*>::
™”©Ü
 
›v
 = 
ev’ts
.
begš
(); 
	g›v
 !ğev’ts.
’d
(); iev++) {

897 
DoubË_t
 
	gnÜm®ized_di¡ªû
 = 
G‘NÜm®izedDi¡ªû
 (
ev’t
, *(*
›v
), 
dim_nÜm®iz©iÚ
);

901 ià(
	gnÜm®ized_di¡ªû
 > 1 && 
	gfK”ÃlE¡im©Ü
 !ğ
kBox
) ;

903 
IÁ_t
 
	giv¬
 = 0; iv¬ < 
	gfNRegOut
 ; ivar++) {

904 
	gpdfSum
->
©
(
iv¬
è+ğ
AµlyK”ÃlFunùiÚ
 (
nÜm®ized_di¡ªû
è* (*
›v
)->
G‘Weight
(è* (*›v)->
G‘T¬g‘s
()[ivar];

905 
	gpdfDiv
 +ğ
AµlyK”ÃlFunùiÚ
 (
nÜm®ized_di¡ªû
è* (*
›v
)->
G‘Weight
();

909 
	gd–‘e
[] 
	gdim_nÜm®iz©iÚ
;

911 ià(
	gpdfDiv
 == 0)

914 
IÁ_t
 
	giv¬
 = 0; iv¬ < 
	gfNRegOut
 ; ivar++)

915 
	gpdfSum
->
©
(
iv¬
è/ğ
pdfDiv
;

924 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$AµlyK”ÃlFunùiÚ
 (
DoubË_t
 
nÜm®ized_di¡ªû
)

926 
fK”ÃlE¡im©Ü
) {

927 
kBox
:

928 
kSph”e
:

931 
kT“³e
:

932  (1 - 
nÜm®ized_di¡ªû
);

934 
kGauss
:

935  
TM©h
::
	`Gaus
Ğ
nÜm®ized_di¡ªû
, 0, 
fGaussSigmaNÜm
, 
kFALSE
);

937 
kSšc3
:

938 
kSšc5
:

939 
kSšc7
:

940 
kSšc9
:

941 
kSšc11
: {

942 
DoubË_t
 
side_üossšgs
 = 2 + ((è
fK”ÃlE¡im©Ü
è- ((è
kSšc3
);

943  
	`NÜmSšc
 (
side_üossšgs
 * 
nÜm®ized_di¡ªû
);

946 
kLªczos2
:

947  
	`LªczosF‹r
 (2, 
nÜm®ized_di¡ªû
);

949 
kLªczos3
:

950  
	`LªczosF‹r
 (3, 
nÜm®ized_di¡ªû
);

952 
kLªczos5
:

953  
	`LªczosF‹r
 (5, 
nÜm®ized_di¡ªû
);

955 
kLªczos8
:

956  
	`LªczosF‹r
 (8, 
nÜm®ized_di¡ªû
);

958 
kTrim
: {

959 
DoubË_t
 
x
 = 
nÜm®ized_di¡ªû
 / 
fMax_di¡ªû
;

960 
x
 = 1 - x*x*x;

961  
x
*x*x;

965 
	`Log
(è<< 
kFATAL
 << "K”ÃÈe¡im©iÚ funùiÚ unsuµÜ‹d. Enum”©Ü i " << 
fK”ÃlE¡im©Ü
 << 
Endl
;

970 
	}
}

976 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$K”ÃlNÜm®iz©iÚ
 (
DoubË_t
 
pdf
)

980 
	`TTHREAD_TLS
(
DoubË_t
è
»t
 = 1.0;

982 ià(
»t
 !ğ0.0è„‘*
pdf
;

985 
fK”ÃlE¡im©Ü
) {

986 
kBox
:

987 
kSph”e
:

988 
»t
 = 1.;

990 
kT“³e
:

991 
»t
 = (
	`G‘Nv¬
(è* (G‘Nv¬(è+ 1è* 
TM©h
::
	`Gamma
 (((
DoubË_t
) GetNvar()) / 2.)) /

992 Ğ
TM©h
::
	`Pow”
 (2., (
DoubË_t
è
	`G‘Nv¬
(è+ 1è* TM©h::Pow” (TM©h::
	`Pi
(), ((Double_t) GetNvar()) / 2.));

994 
kGauss
:

996 
»t
 = 1. / 
TM©h
::
	`Pow”
 ( 2 * TM©h::
	`Pi
(è* 
fGaussSigmaNÜm
 * fGaussSigmaNÜm, ((
DoubË_t
è
	`G‘Nv¬
()) / 2.);

998 
kSšc3
:

999 
kSšc5
:

1000 
kSšc7
:

1001 
kSšc9
:

1002 
kSšc11
:

1003 
kLªczos2
:

1004 
kLªczos3
:

1005 
kLªczos5
:

1006 
kLªczos8
:

1008 
»t
 = 1 / 
TM©h
::
	`Pow”
 ( 2., (
DoubË_t
è
	`G‘Nv¬
() );

1011 
	`Log
(è<< 
kFATAL
 << "K”ÃÈe¡im©iÚ funùiÚ unsuµÜ‹d. Enum”©Ü i " << 
fK”ÃlE¡im©Ü
 << 
Endl
;

1015 
»t
 *ğĞ
TM©h
::
	`Pow”
 (2., 
¡©ic_ÿ¡
<
IÁ_t
>(
	`G‘Nv¬
())è* TM©h::
	`Gamma
 (1 + (((
DoubË_t
) GetNvar()) / 2.)) ) /

1016 
TM©h
::
	`Pow”
 (TM©h::
	`Pi
(), ((
DoubË_t
è
	`G‘Nv¬
()) / 2.);

1018  
»t
*
pdf
;

1019 
	}
}

1024 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$G‘NÜm®izedDi¡ªû
 ( cÚ¡ 
Ev’t
 &
ba£_ev’t
,

1025 cÚ¡ 
Bš¬yS—rchT»eNode
 &
§m¶e_ev’t
,

1026 
DoubË_t
 *
dim_nÜm®iz©iÚ
)

1028 
DoubË_t
 
»t
=0;

1029 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

1030 
DoubË_t
 
di¡
 = 
dim_nÜm®iz©iÚ
[
iv¬
] * (
§m¶e_ev’t
.
	`G‘Ev’tV
()[iv¬] - 
ba£_ev’t
.
	`G‘V®ue
(ivar));

1031 
»t
 +ğ
di¡
*dist;

1034 
»t
 /ğ
	`G‘Nv¬
();

1035  
TM©h
::
	`Sq¹
 (
»t
);

1036 
	}
}

1041 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$NÜmSšc
 (
DoubË_t
 
x
)

1043 ià(
x
 < 10e-10 && x > -10e-10) {

1047 
DoubË_t
 
pix
 = 
TM©h
::
	`Pi
(è* 
x
;

1048 
DoubË_t
 
sšc
 = 
TM©h
::
	`Sš
(
pix
) /…ix;

1049 
DoubË_t
 
»t
;

1051 ià(
	`G‘Nv¬
() % 2)

1052 
»t
 = 
TM©h
::
	`Pow”
 (
sšc
, 
¡©ic_ÿ¡
<
IÁ_t
>(
	`G‘Nv¬
()));

1054 
»t
 = 
TM©h
::
	`Abs
 (
sšc
è* TM©h::
	`Pow”
 (sšc, 
¡©ic_ÿ¡
<
IÁ_t
>(
	`G‘Nv¬
() - 1));

1056  
»t
;

1057 
	}
}

1062 
DoubË_t
 
	gTMVA
::
M‘hodPDERS
::
	$LªczosF‹r
 (
IÁ_t
 
Ëv–
, 
DoubË_t
 
x
)

1064 ià(
x
 < 10e-10 && x > -10e-10) {

1068 
DoubË_t
 
pix
 = 
TM©h
::
	`Pi
(è* 
x
;

1069 
DoubË_t
 
pixtime¢
 = 
pix
 * ((DoubË_tè
Ëv–
);

1070 
DoubË_t
 
Ïnczos
 = (
TM©h
::
	`Sš
(
pix
è/…ixè* (TM©h::Sš(
pixtime¢
) /…ixtimesn);

1071 
DoubË_t
 
»t
;

1073 ià(
	`G‘Nv¬
(è% 2è
»t
 = 
TM©h
::
	`Pow”
 (
Ïnczos
, 
¡©ic_ÿ¡
<
IÁ_t
>(GetNvar()));

1074 
»t
 = 
TM©h
::
	`Abs
 (
Ïnczos
è* TM©h::
	`Pow”
 (Ïnczos, 
¡©ic_ÿ¡
<
IÁ_t
>(
	`G‘Nv¬
() - 1));

1076  
»t
;

1077 
	}
}

1082 
Flßt_t
 
	gTMVA
::
M‘hodPDERS
::
	$G‘E¼Ü
Ğ
Flßt_t
 
couÁS
, Flßt_ˆ
couÁB
,

1083 
Flßt_t
 
sumW2S
, Flßt_ˆ
sumW2B
 ) const

1085 
Flßt_t
 
c
 = 
fSÿËB
/
fSÿËS
;

1086 
Flßt_t
 
d
 = 
couÁS
 + 
c
*
couÁB
; d *= d;

1088 ià(
d
 < 1e-10)  1;

1090 
Flßt_t
 
f
 = 
c
*c/
d
/d;

1091 
Flßt_t
 
”r
 = 
f
*
couÁB
*couÁB*
sumW2S
 + f*
couÁS
*couÁS*
sumW2B
;

1093 ià(
”r
 < 1e-10)  1;

1095  
	`sq¹
(
”r
);

1096 
	}
}

1101 
	gTMVA
::
M‘hodPDERS
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

1103 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

1104 ià(
fBš¬yT»e
)

1105 
fBš¬yT»e
->
	`AddXMLTo
(
wght
);

1107 
	`Log
(è<< 
kFATAL
 << "SigÇÈªd background bš¬y s—rch»nÙ‡vaabË" << 
Endl
;

1109 
	}
}

1113 
	gTMVA
::
M‘hodPDERS
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
)

1115 ià(
NULL
 !ğ
fBš¬yT»e
è
d–‘e
 fBinaryTree;

1116 * 
Œ“node
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

1117 
fBš¬yT»e
 = 
TMVA
::
Bš¬yS—rchT»e
::
	`C»©eFromXML
(
Œ“node
);

1118 if(!
fBš¬yT»e
)

1119 
	`Log
(è<< 
kFATAL
 << "Could‚Ù c»©Bš¬yS—rchT»äom XML" << 
Endl
;

1120 if(!
fBš¬yT»e
)

1121 
	`Log
(è<< 
kFATAL
 << "Could‚Ù c»©Bš¬yS—rchT»äom XML" << 
Endl
;

1122 
fBš¬yT»e
->
	`S‘P”iode
Ğ
	`G‘Nv¬
() );

1123 
fBš¬yT»e
->
	`C®cSti¡ics
();

1124 
fBš¬yT»e
->
	`CouÁNodes
();

1125 ià(
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kSigÇl
 ) > 0)

1126 
fSÿËS
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kSigÇl
 );

1127 
fSÿËS
 = 1;

1128 ià(
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kBackground
 ) > 0)

1129 
fSÿËB
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kBackground
 );

1130 
fSÿËB
 = 1;

1131 
	`Log
(è<< 
kINFO
 << "sigÇÈªd background sÿËs: " << 
fSÿËS
 << " " << 
fSÿËB
 << 
Endl
;

1132 
	`C®cAv”ages
();

1133 
	`S‘VŞumeEËm’t
();

1134 
fIn™ŸlizedVŞumeEË
 = 
kTRUE
;

1135 
	}
}

1140 
	gTMVA
::
M‘hodPDERS
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
)

1142 ià(
NULL
 !ğ
fBš¬yT»e
è
d–‘e
 fBinaryTree;

1144 
fBš¬yT»e
 = 
Ãw
 
	`Bš¬yS—rchT»e
();

1146 
i¡r
 >> *
fBš¬yT»e
;

1148 
fBš¬yT»e
->
	`S‘P”iode
Ğ
	`G‘Nv¬
() );

1150 
fBš¬yT»e
->
	`C®cSti¡ics
();

1152 
fBš¬yT»e
->
	`CouÁNodes
();

1155 
fSÿËS
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kSigÇl
 );

1156 
fSÿËB
 = 1.0/
fBš¬yT»e
->
	`G‘SumOfWeights
Ğ
Ty³s
::
kBackground
 );

1158 
	`Log
(è<< 
kINFO
 << "sigÇÈªd background sÿËs: " << 
fSÿËS
 << " " << 
fSÿËB
 << 
Endl
;

1160 
	`C®cAv”ages
();

1162 
	`S‘VŞumeEËm’t
();

1164 
fIn™ŸlizedVŞumeEË
 = 
kTRUE
;

1165 
	}
}

1170 
	gTMVA
::
M‘hodPDERS
::
	$Wr™eWeightsToSŒ—m
Ğ
TFe
& ) const

1172 
	}
}

1177 
TMVA
::
M‘hodPDERS
::
	$R—dWeightsFromSŒ—m
Ğ
TFe
& )

1179 
	}
}

1184 
TMVA
::
M‘hodPDERS
* TMVA::M‘hodPDERS::
	$ThisPDERS
( )

1186  
	`G‘M‘hodPDERSTh»adLoÿl
();

1187 
	}
}

1191 
	gTMVA
::
M‘hodPDERS
::
	$Upd©eThis
( )

1193 
	`G‘M‘hodPDERSTh»adLoÿl
(èğ
this
;

1194 
	}
}

1199 
	gTMVA
::
M‘hodPDERS
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

1201 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

1202 
fout
 << "};" << 
¡d
::
’dl
;

1203 
	}
}

1211 
	gTMVA
::
M‘hodPDERS
::
	$G‘H–pMes§ge
() const

1213 
	`Log
(è<< 
Endl
;

1214 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1215 
	`Log
(è<< 
Endl
;

1216 
	`Log
(è<< "PDERS i ¨g’”®iz©iÚ oàth´ojeùivlik–ihood cÏssif›¸" << 
Endl
;

1217 
	`Log
(è<< "tØN dim’siÚs, wh”N i thnumb” oàšpuˆv¬ŸbË u£d." << 
Endl
;

1218 
	`Log
(è<< "IÀ™ ad­tivfÜm iˆi mo¡lyƒquiv®’ˆtØk-N—»¡-NeighbÜ" << 
Endl
;

1219 
	`Log
(è<< "(k-NNèm‘hods. IàthmuÉidim’siÚ® PDF fÜ sigÇÈªd background" << 
Endl
;

1220 
	`Log
(è<< "w”known,hi şassif›¸wouldƒx¶o™hfuÎ infÜm©iÚ" << 
Endl
;

1221 
	`Log
(è<< "cÚšed iÀthšpuˆv¬ŸbËs,‡nd would h’û bİtim®. IÀ" << 
Endl
;

1222 
	`Log
(è<< "´aùiû howev”, hugŒaššg sam¶e ¬Ãûs§ryØsuffic›Ály " << 
Endl
;

1223 
	`Log
(è<< "pİuÏ‹hmuÉidim’siÚ®…ha£ s·û. " << 
Endl
;

1224 
	`Log
(è<< 
Endl
;

1225 
	`Log
(è<< "Thsim¶e¡ im¶em’tiÚ oàPDERS couÁ thnumb” oàsigÇl" << 
Endl
;

1226 
	`Log
(è<< "ªd backgroundƒv’t šhvicš™y oà¨‹¡ƒv’t,‡nd„‘uºs" << 
Endl
;

1227 
	`Log
(è<< "¨weighˆaccÜdšgØthmajÜ™y s³c› oàthÃighbÜšgƒv’ts." << 
Endl
;

1228 
	`Log
(è<< "A mÜšvŞved v”siÚ oàPDERS (£Ëùed byhİtiÚ \"K”ÃlE¡im©Ü\")" << 
Endl
;

1229 
	`Log
(è<< "u£ K”ÃÈe¡im©iÚ m‘hod tØ­´oxim©thsh­oàthPDF." << 
Endl
;

1230 
	`Log
(è<< 
Endl
;

1231 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1232 
	`Log
(è<< 
Endl
;

1233 
	`Log
(è<< "PDERS cª bv”y…ow”fuÈš ca£ oà¡rÚgly‚Ú-lš—¸´obËms, " << 
Endl
;

1234 
	`Log
(è<< "e.g., di¡šù i¦ªd oàsigÇÈªd background„egiÚs. Beÿu£ oà" << 
Endl
;

1235 
	`Log
(è<< "thexpÚ’tŸÈgrowth oàthpha£ s·û, iˆi impÜÁØ»¡riù" << 
Endl
;

1236 
	`Log
(è<< "thnumb” oàšpuˆv¬ŸbË (dim’siÚètØth¡riùly‚eûs§ry." << 
Endl
;

1237 
	`Log
(è<< 
Endl
;

1238 
	`Log
(è<< "NÙth© PDERS i ¨¦owly„e¥Údšg cÏssif›r. MÜeov”,hÃûss™y" << 
Endl
;

1239 
	`Log
(è<< "tØ¡Üth’tœbš¬y»š memÜy,Øavoid‡cûssšg vœtu® " << 
Endl
;

1240 
	`Log
(è<< "memÜy,†im™ thnumb” oàŒaššgƒv’t th© cªƒfãùiv–y b" << 
Endl
;

1241 
	`Log
(è<< "u£dØmod–hmuÉidim’siÚ® PDF." << 
Endl
;

1242 
	`Log
(è<< 
Endl
;

1243 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

1244 
	`Log
(è<< 
Endl
;

1245 
	`Log
(è<< "IàthPDERS„e¥Ú£ i foundoØ¦ow wh’ usšghad­tivvŞum" << 
Endl
;

1246 
	`Log
(è<< "siz(İtiÚ \"VŞumeRªgeMode=Ad­tive\"), iˆmighˆbfound b’eficŸl" << 
Endl
;

1247 
	`Log
(è<< "tØ»duûhnumb” oàev’t »quœed iÀthvŞume,‡nd/ÜØ’Ïrge" << 
Endl
;

1248 
	`Log
(è<< "th®lowed„ªg(\"Nev’tsMš/Max\"). PDERS i »Ïtiv–y in£ns™ive" << 
Endl
;

1249 
	`Log
(è<< "tØthwidth (\"GaussSigma\"èoàthGaussŸÀk”ÃÈ(iàu£d)." << 
Endl
;

1250 
	}
}

	@src/MethodPlugins.cxx

50 
	~"TPlugšMªag”.h
"

51 
	~"TROOT.h
"

53 
	~"TMVA/CÏssif›rFaùÜy.h
"

54 
	~"TMVA/Rªkšg.h
"

55 
	~"TMVA/ToŞs.h
"

56 
	~"TMVA/Ty³s.h
"

58 
	~<c¡dio
>

59 
	~<io¡»am
>

61 
	gÇme¥aû


63 
	gTMVA
::
IM‘hod
* 
C»©eM‘hodPlugšs
(cÚ¡ 
TSŒšg
& 
jobName
, cÚ¡ TSŒšg& 
m‘hodT™Ë
, 
TMVA
::
D©aS‘Info
& 
theD©a
, cÚ¡ TSŒšg& 
theO±iÚ
)

66 
TPlugšMªag”
 *
¶ugšMªag”
(0);

67 
TPlugšHªdËr
 *
¶ugšHªdËr
(0);

68 
	g¶ugšMªag”
 = 
gROOT
->
G‘PlugšMªag”
();

70 
TSŒšg
 
	gmyM‘hodT™Ë
;

71 if(
	gjobName
=="" && 
m‘hodT™Ë
=="") {

72 
myM‘hodT™Ë
 = 
theO±iÚ
.
Cİy
();

73 
Ssiz_t
 
	gfœ¡Und”scÜe
 = 
myM‘hodT™Ë
.
Fœ¡
('_');

74 
Ssiz_t
 
	gfœ¡Pošt
 = 
myM‘hodT™Ë
.
La¡
('.');

75 
	gmyM‘hodT™Ë
.
Remove
(
fœ¡Pošt
,
myM‘hodT™Ë
.
L’gth
() - firstPoint);

76 
	gmyM‘hodT™Ë
.
Remove
(0,
fœ¡Und”scÜe
-1);

78 
	gmyM‘hodT™Ë
 = 
m‘hodT™Ë
;

79 
	g¶ugšHªdËr
 = 
¶ugšMªag”
->
FšdHªdËr
("TMVA@@M‘hodBa£", 
myM‘hodT™Ë
);

80 if(!
	g¶ugšHªdËr
)

82 
	g¡d
::
û¼
 << "Couldn'ˆfšd…lugš hªdË¸fÜ TMVA@@M‘hodBa£‡nd " << 
m‘hodT™Ë
 << 
¡d
::
’dl
;

86 ià(
	g¶ugšHªdËr
->
LßdPlugš
() == 0) {

87 if(
jobName
=="" && 
m‘hodT™Ë
=="") {

89  (
TMVA
::
IM‘hod
*è
¶ugšHªdËr
->
ExecPlugš
(2, &
theD©a
, &
theO±iÚ
);

93  (
	gTMVA
::
IM‘hod
*è
¶ugšHªdËr
->
ExecPlugš
(4, &
jobName
, &
m‘hodT™Ë
, &
theD©a
, &
theO±iÚ
);

100 
	s»gi¡¿tiÚ
 {

101 
»gi¡¿tiÚ
() {

102 
	gTMVA
::
CÏssif›rFaùÜy
::
In¡ªû
().
Regi¡”
("Plugšs", 
C»©eM‘hodPlugšs
);

103 
	gTMVA
::
Ty³s
::
In¡ªû
().
AddTy³M­pšg
(
TMVA
::Ty³s::
kPlugšs
, "Plugins");

105 } 
	gš¡ªû
;

	@src/MethodRuleFit.cxx

31 
	~"TMVA/M‘hodRuËF™.h
"

33 
	~"TMVA/CÏssif›rFaùÜy.h
"

34 
	~"TMVA/CÚfig.h
"

35 
	~"TMVA/CÚfigu¿bË.h
"

36 
	~"TMVA/CrossEÁrİy.h
"

37 
	~"TMVA/D©aS‘.h
"

38 
	~"TMVA/DecisiÚT»e.h
"

39 
	~"TMVA/GšiIndex.h
"

40 
	~"TMVA/IM‘hod.h
"

41 
	~"TMVA/M‘hodBa£.h
"

42 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

43 
	~"TMVA/MsgLogg”.h
"

44 
	~"TMVA/Rªkšg.h
"

45 
	~"TMVA/RuËF™API.h
"

46 
	~"TMVA/SdivSq¹S¶usB.h
"

47 
	~"TMVA/S•¬©iÚBa£.h
"

48 
	~"TMVA/Tim”.h
"

49 
	~"TMVA/ToŞs.h
"

50 
	~"TMVA/Ty³s.h
"

52 
	~"Rio¡»am.h
"

53 
	~"TRªdom3.h
"

54 
	~"TM©h.h
"

55 
	~"TM©rix.h
"

56 
	~"TDœeùÜy.h
"

58 
	~<®gÜ™hm
>

59 
	~<li¡
>

61 
usšg
 
	g¡d
::
mš
;

63 
	$REGISTER_METHOD
(
RuËF™
)

65 
	`CÏssImp
(
TMVA
::
M‘hodRuËF™
);

70 
TMVA
::
M‘hodRuËF™
::
	$M‘hodRuËF™
ĞcÚ¡ 
TSŒšg
& 
jobName
,

71 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

72 
D©aS‘Info
& 
theD©a
,

73 cÚ¡ 
TSŒšg
& 
theO±iÚ
) :

74 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kRuËF™
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

75 , 
	`fSigÇlF¿ùiÚ
(0)

76 , 
	`fNTImpÜnû
(0)

77 , 
	`fNTCÛffic›Á
(0)

78 , 
	`fNTSuµÜt
(0)

79 , 
	`fNTNcuts
(0)

80 , 
	`fNTNv¬s
(0)

81 , 
	`fNTPg
(0)

82 , 
	`fNTPss
(0)

83 , 
	`fNTPsb
(0)

84 , 
	`fNTPbs
(0)

85 , 
	`fNTPbb
(0)

86 , 
	`fNTSSB
(0)

87 , 
	`fNTTy³
(0)

88 , 
	`fU£RuËF™JF
(
kFALSE
)

89 , 
	`fRFNruËs
(0)

90 , 
	`fRFN’dnodes
(0)

91 , 
	`fNT»es
(0)

92 , 
	`fT»eEveF¿c
(0)

93 , 
	`fS•Ty³
(0)

94 , 
	`fMšF¿cNEve
(0)

95 , 
	`fMaxF¿cNEve
(0)

96 , 
	`fNCuts
(0)

97 , 
	`fPruÃM‘hod
(
TMVA
::
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
)

98 , 
	`fPruÃSŒ’gth
(0)

99 , 
	`fU£Boo¡
(
kFALSE
)

100 , 
	`fGDP©hEveF¿c
(0)

101 , 
	`fGDV®idEveF¿c
(0)

102 , 
	`fGDTau
(0)

103 , 
	`fGDTauP»c
(0)

104 , 
	`fGDTauMš
(0)

105 , 
	`fGDTauMax
(0)

106 , 
	`fGDTauSÿn
(0)

107 , 
	`fGDP©hS‹p
(0)

108 , 
	`fGDNP©hS‹ps
(0)

109 , 
	`fGDE¼SÿË
(0)

110 , 
	`fMšimp
(0)

111 , 
	`fRuËMšDi¡
(0)

112 , 
	$fLšQuªte
(0)

114 
fMÚ™ÜNtu¶e
 = 
NULL
;

115 
	}
}

120 
	gTMVA
::
M‘hodRuËF™
::
	$M‘hodRuËF™
Ğ
D©aS‘Info
& 
theD©a
,

121 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

122 
	`M‘hodBa£
Ğ
Ty³s
::
kRuËF™
, 
theD©a
, 
theWeightFe
)

123 , 
	`fSigÇlF¿ùiÚ
(0)

124 , 
	`fNTImpÜnû
(0)

125 , 
	`fNTCÛffic›Á
(0)

126 , 
	`fNTSuµÜt
(0)

127 , 
	`fNTNcuts
(0)

128 , 
	`fNTNv¬s
(0)

129 , 
	`fNTPg
(0)

130 , 
	`fNTPss
(0)

131 , 
	`fNTPsb
(0)

132 , 
	`fNTPbs
(0)

133 , 
	`fNTPbb
(0)

134 , 
	`fNTSSB
(0)

135 , 
	`fNTTy³
(0)

136 , 
	`fU£RuËF™JF
(
kFALSE
)

137 , 
	`fRFNruËs
(0)

138 , 
	`fRFN’dnodes
(0)

139 , 
	`fNT»es
(0)

140 , 
	`fT»eEveF¿c
(0)

141 , 
	`fS•Ty³
(0)

142 , 
	`fMšF¿cNEve
(0)

143 , 
	`fMaxF¿cNEve
(0)

144 , 
	`fNCuts
(0)

145 , 
	`fPruÃM‘hod
(
TMVA
::
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
)

146 , 
	`fPruÃSŒ’gth
(0)

147 , 
	`fU£Boo¡
(
kFALSE
)

148 , 
	`fGDP©hEveF¿c
(0)

149 , 
	`fGDV®idEveF¿c
(0)

150 , 
	`fGDTau
(0)

151 , 
	`fGDTauP»c
(0)

152 , 
	`fGDTauMš
(0)

153 , 
	`fGDTauMax
(0)

154 , 
	`fGDTauSÿn
(0)

155 , 
	`fGDP©hS‹p
(0)

156 , 
	`fGDNP©hS‹ps
(0)

157 , 
	`fGDE¼SÿË
(0)

158 , 
	`fMšimp
(0)

159 , 
	`fRuËMšDi¡
(0)

160 , 
	$fLšQuªte
(0)

162 
fMÚ™ÜNtu¶e
 = 
NULL
;

163 
	}
}

168 
	gTMVA
::
M‘hodRuËF™
::~
	$M‘hodRuËF™
( )

170 
UIÁ_t
 
i
=0; i<
fEv’tSam¶e
.
	`size
(); i++è
d–‘e
 fEventSample[i];

171 
UIÁ_t
 
i
=0; i<
fFÜe¡
.
	`size
(); i++è
d–‘e
 fForest[i];

172 
	}
}

177 
BoŞ_t
 
	gTMVA
::
M‘hodRuËF™
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UInt_t )

179 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

180  
kFALSE
;

181 
	}
}

228 
	gTMVA
::
M‘hodRuËF™
::
	$Deş¬eO±iÚs
()

230 
	`Deş¬eO±iÚRef
(
fGDTau
=-1, "GDTau", "Gradient-directed (GD)…ath: default fit cut-off");

231 
	`Deş¬eO±iÚRef
(
fGDTauP»c
=0.01, "GDTauPrec", "GD…ath:…recision ofau");

232 
	`Deş¬eO±iÚRef
(
fGDP©hS‹p
=0.01, "GDStep", "GD…ath: step size");

233 
	`Deş¬eO±iÚRef
(
fGDNP©hS‹ps
=10000, "GDNSteps", "GD…ath:‚umber of steps");

234 
	`Deş¬eO±iÚRef
(
fGDE¼SÿË
=1.1, "GDErrScale", "Stop scan whenƒrror > scale*errmin");

235 
	`Deş¬eO±iÚRef
(
fLšQuªte
, "LinQuantile", "Quantile of†inearerms (removes outliers)");

236 
	`Deş¬eO±iÚRef
(
fGDP©hEveF¿c
=0.5, "GDPathEveFrac", "Fraction ofƒvents used forhe…ath search");

237 
	`Deş¬eO±iÚRef
(
fGDV®idEveF¿c
=0.5, "GDValidEveFrac", "Fraction ofƒvents used forhe validation");

239 
	`Deş¬eO±iÚRef
(
fMšF¿cNEve
=0.1, "fEventsMin", "Minimum fraction ofƒvents in‡ splittable‚ode");

240 
	`Deş¬eO±iÚRef
(
fMaxF¿cNEve
=0.9, "fEventsMax", "Maximum fraction ofƒvents in‡ splittable‚ode");

241 
	`Deş¬eO±iÚRef
(
fNT»es
=20, "nTrees", "Number ofrees in forest.");

243 
	`Deş¬eO±iÚRef
(
fFÜe¡Ty³S
="AdaBoost", "ForestType", "Methodo use for forest generation (AdaBoost or RandomForest)");

244 
	`AddP»DefV®
(
	`TSŒšg
("AdaBoost"));

245 
	`AddP»DefV®
(
	`TSŒšg
("Random"));

247 
	`Deş¬eO±iÚRef
(
fRuËMšDi¡
=0.001, "RuleMinDist", "Minimum distance between„ules");

248 
	`Deş¬eO±iÚRef
(
fMšimp
=0.01, "MinImp", "Minimum„ule importance‡ccepted");

250 
	`Deş¬eO±iÚRef
(
fMod–Ty³S
="ModRuleLinear", "Model", "Modelo be used");

251 
	`AddP»DefV®
(
	`TSŒšg
("ModRule"));

252 
	`AddP»DefV®
(
	`TSŒšg
("ModRuleLinear"));

253 
	`AddP»DefV®
(
	`TSŒšg
("ModLinear"));

254 
	`Deş¬eO±iÚRef
(
fRuËF™ModuËS
="RFTMVA", "RuleFitModule","Which RuleFit moduleo use");

255 
	`AddP»DefV®
(
	`TSŒšg
("RFTMVA"));

256 
	`AddP»DefV®
(
	`TSŒšg
("RFFriedman"));

258 
	`Deş¬eO±iÚRef
(
fRFWÜkDœ
="./rulefit", "RFWorkDir", "Friedman\'s RuleFit module (RFF): working dir");

259 
	`Deş¬eO±iÚRef
(
fRFNruËs
=2000, "RFNrules", "RFF: Mximum‚umber of„ules");

260 
	`Deş¬eO±iÚRef
(
fRFN’dnodes
=4, "RFNendnodes", "RFF: Average‚umber ofƒnd‚odes");

261 
	}
}

266 
	gTMVA
::
M‘hodRuËF™
::
	$ProûssO±iÚs
()

268 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

269 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot yet‡vailable for method: "

270 << 
	`G‘M‘hodTy³Name
()

272 << 
Endl
;

275 
fRuËF™ModuËS
.
	`ToLow”
();

276 ià(
fRuËF™ModuËS
 =ğ"rámva"è
fU£RuËF™JF
 = 
kFALSE
;

277 ià(
fRuËF™ModuËS
 =ğ"rfä›dmª"è
fU£RuËF™JF
 = 
kTRUE
;

278 
fU£RuËF™JF
 = 
kTRUE
;

280 
fS•Ty³S
.
	`ToLow”
();

281 ià(
fS•Ty³S
 =ğ"misşassifiÿtiÚ”rÜ"è
fS•Ty³
 = 
Ãw
 
	`MisCÏssifiÿtiÚE¼Ü
();

282 ià(
fS•Ty³S
 =ğ"gšišdex"è
fS•Ty³
 = 
Ãw
 
	`GšiIndex
();

283 ià(
fS•Ty³S
 =ğ"üos£Árİy"è
fS•Ty³
 = 
Ãw
 
	`CrossEÁrİy
();

284 
fS•Ty³
 = 
Ãw
 
	`SdivSq¹S¶usB
();

286 
fMod–Ty³S
.
	`ToLow”
();

287 ià(
fMod–Ty³S
 =ğ"modlš—r" ) 
fRuËF™
.
	`S‘Mod–Lš—r
();

288 ià(
fMod–Ty³S
 =ğ"modruË" ) 
fRuËF™
.
	`S‘Mod–RuËs
();

289 
fRuËF™
.
	`S‘Mod–FuÎ
();

291 
fPruÃM‘hodS
.
	`ToLow”
();

292 ià(
fPruÃM‘hodS
 =ğ"ex³ùed”rÜ" ) 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kEx³ùedE¼ÜPrunšg
;

293 ià(
fPruÃM‘hodS
 =ğ"co¡com¶ex™y" ) 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kCo¡Com¶ex™yPrunšg
;

294 
fPruÃM‘hod
 = 
DecisiÚT»e
::
kNoPrunšg
;

296 
fFÜe¡Ty³S
.
	`ToLow”
();

297 ià(
fFÜe¡Ty³S
 =ğ"¿ndom" ) 
fU£Boo¡
 = 
kFALSE
;

298 ià(
fFÜe¡Ty³S
 =ğ"adaboo¡" ) 
fU£Boo¡
 = 
kTRUE
;

299 
fU£Boo¡
 = 
kTRUE
;

304 ià(
fU£Boo¡
 && (!
fU£RuËF™JF
)è
fT»eEveF¿c
 = 1.0;

308 ià(
fT»eEveF¿c
<=0) {

309 
IÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

310 
DoubË_t
 
n
 = 
¡©ic_ÿ¡
<DoubË_t>(
Ãv’ts
);

311 
fT»eEveF¿c
 = 
	`mš
Ğ0.5, (100.0 +6.0*
	`sq¹
(
n
))/n);

314 
	`V”ifyRªge
(
	`Log
(), "nT»es", 
fNT»es
,0,100000,20);

315 
	`V”ifyRªge
(
	`Log
(), "MšImp", 
fMšimp
,0.0,1.0,0.0);

316 
	`V”ifyRªge
(
	`Log
(), "GDTauP»c", 
fGDTauP»c
,1e-5,5e-1);

317 
	`V”ifyRªge
(
	`Log
(), "GDTauMš", 
fGDTauMš
,0.0,1.0);

318 
	`V”ifyRªge
(
	`Log
(), "GDTauMax", 
fGDTauMax
,
fGDTauMš
,1.0);

319 
	`V”ifyRªge
(
	`Log
(), "GDP©hS‹p", 
fGDP©hS‹p
,0.0,100.0,0.01);

320 
	`V”ifyRªge
(
	`Log
(), "GDE¼SÿË", 
fGDE¼SÿË
,1.0,100.0,1.1);

321 
	`V”ifyRªge
(
	`Log
(), "GDP©hEveF¿c", 
fGDP©hEveF¿c
,0.01,0.9,0.5);

322 
	`V”ifyRªge
(
	`Log
(), "GDV®idEveF¿c",
fGDV®idEveF¿c
,0.01,1.0-
fGDP©hEveF¿c
,1.0-fGDPathEveFrac);

323 
	`V”ifyRªge
(
	`Log
(), "fEv’tsMš", 
fMšF¿cNEve
,0.0,1.0);

324 
	`V”ifyRªge
(
	`Log
(), "fEv’tsMax", 
fMaxF¿cNEve
,
fMšF¿cNEve
,1.0);

326 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`S‘LšQuªte
(
fLšQuªte
);

327 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDTauRªge
(
fGDTauMš
,
fGDTauMax
);

328 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDTau
(
fGDTau
);

329 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDTauP»c
(
fGDTauP»c
);

330 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDTauSÿn
(
fGDTauSÿn
);

331 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDP©hS‹p
(
fGDP©hS‹p
);

332 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDNP©hS‹ps
(
fGDNP©hS‹ps
);

333 
fRuËF™
.
	`G‘RuËF™P¬amsPŒ
()->
	`S‘GDE¼SÿË
(
fGDE¼SÿË
);

334 
fRuËF™
.
	`S‘ImpÜnûCut
(
fMšimp
);

335 
fRuËF™
.
	`S‘RuËMšDi¡
(
fRuËMšDi¡
);

340 ià(
fU£RuËF™JF
) {

341 
	`Log
(è<< 
kINFO
 << "" << 
Endl
;

342 
	`Log
(è<< 
kINFO
 << "--------------------------------------" <<
Endl
;

343 
	`Log
(è<< 
kINFO
 << "Fr›dmª RuËF™ moduË i £Ëùed." << 
Endl
;

344 
	`Log
(è<< 
kINFO
 << "OÆyhfŞlowšg o±iÚ ¬u£d:" << 
Endl
;

345 
	`Log
(è<< 
kINFO
 << 
Endl
;

346 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " Mod–" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

347 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " RFWÜkDœ" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

348 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " RFNruËs" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

349 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " RFN’dnodes" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

350 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " GDNP©hS‹ps" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

351 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " GDP©hS‹p" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

352 
	`Log
(è<< 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< " GDE¼SÿË" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

353 
	`Log
(è<< 
kINFO
 << "--------------------------------------" <<
Endl
;

354 
	`Log
(è<< 
kINFO
 << 
Endl
;

364 
fRuËF™
.
	`U£ImpÜnûVisHi¡s
();

366 
fRuËF™
.
	`S‘MsgTy³
Ğ
	`Log
().
	`G‘MšTy³
() );

368 ià(
	`HasT¿ššgT»e
()è
	`In™Ev’tSam¶e
();

370 
	}
}

375 
	gTMVA
::
M‘hodRuËF™
::
	$In™MÚ™ÜNtu¶e
()

377 
	`Ba£Dœ
()->
	`cd
();

378 
fMÚ™ÜNtu¶e
ğ
Ãw
 
	`TT»e
("MonitorNtuple_RuleFit","RuleFit variables");

379 
fMÚ™ÜNtu¶e
->
	`B¿nch
("impÜnû",&
fNTImpÜnû
,"importance/D");

380 
fMÚ™ÜNtu¶e
->
	`B¿nch
("suµÜt",&
fNTSuµÜt
,"support/D");

381 
fMÚ™ÜNtu¶e
->
	`B¿nch
("cÛffic›Á",&
fNTCÛffic›Á
,"coefficient/D");

382 
fMÚ™ÜNtu¶e
->
	`B¿nch
("ncuts",&
fNTNcuts
,"ncuts/I");

383 
fMÚ™ÜNtu¶e
->
	`B¿nch
("nv¬s",&
fNTNv¬s
,"nvars/I");

384 
fMÚ™ÜNtu¶e
->
	`B¿nch
("ty³",&
fNTTy³
,"type/I");

385 
fMÚ™ÜNtu¶e
->
	`B¿nch
("±ag",&
fNTPg
,"ptag/D");

386 
fMÚ™ÜNtu¶e
->
	`B¿nch
("pss",&
fNTPss
,"pss/D");

387 
fMÚ™ÜNtu¶e
->
	`B¿nch
("psb",&
fNTPsb
,"psb/D");

388 
fMÚ™ÜNtu¶e
->
	`B¿nch
("pbs",&
fNTPbs
,"pbs/D");

389 
fMÚ™ÜNtu¶e
->
	`B¿nch
("pbb",&
fNTPbb
,"pbb/D");

390 
fMÚ™ÜNtu¶e
->
	`B¿nch
("sov”sb",&
fNTSSB
,"soversb/D");

391 
	}
}

396 
	gTMVA
::
M‘hodRuËF™
::
	$In™
()

399 
	`S‘SigÇlReã»nûCut
( 0.0 );

403 
fLšQuªte
 = 0.025;

404 
fT»eEveF¿c
 = -1.0;

405 
fNCuts
 = 20;

406 
fS•Ty³S
 = "GiniIndex";

407 
fPruÃM‘hodS
 = "NONE";

408 
fPruÃSŒ’gth
 = 3.5;

409 
fGDTauMš
 = 0.0;

410 
fGDTauMax
 = 1.0;

411 
fGDTauSÿn
 = 1000;

413 
	}
}

421 
	gTMVA
::
M‘hodRuËF™
::
	$In™Ev’tSam¶e
( )

423 ià(
	`D©a
()->
	`G‘NEv’ts
()==0è
	`Log
(è<< 
kFATAL
 << "<In™> D©a().T¿ššgT»e(èi z”Øpoš‹r" << 
Endl
;

425 
IÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NEv’ts
();

426 
IÁ_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++){

427 cÚ¡ 
Ev’t
 * 
ev
 = 
	`G‘Ev’t
(
›vt
);

428 
fEv’tSam¶e
.
	`push_back
Ğ
Ãw
 
	`Ev’t
(*
ev
));

430 ià(
fT»eEveF¿c
<=0) {

431 
DoubË_t
 
n
 = 
¡©ic_ÿ¡
<DoubË_t>(
Ãv’ts
);

432 
fT»eEveF¿c
 = 
	`mš
Ğ0.5, (100.0 +6.0*
	`sq¹
(
n
))/n);

434 ià(
fT»eEveF¿c
>1.0) fTreeEveFrac=1.0;

436 
¡d
::
	`¿ndom_shufæe
(
fEv’tSam¶e
.
	`begš
(), fEv’tSam¶e.
	`’d
());

438 
	`Log
(è<< 
kDEBUG
 << "S‘ sub-§m¶äaùiÚØ" << 
fT»eEveF¿c
 << 
Endl
;

439 
	}
}

443 
	gTMVA
::
M‘hodRuËF™
::
	$T¿š
( )

445 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
Œue
;

448 if(!
	`IsS’tFe
()è
	`In™MÚ™ÜNtu¶e
();

451 
this
->
	`In™Ev’tSam¶e
();

453 ià(
fU£RuËF™JF
) {

454 
	`T¿šJFRuËF™
();

457 
	`T¿šTMVARuËF™
();

459 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`CË¬RuËM­
();

460 
TMVA
::
DecisiÚT»eNode
::
fgIsT¿ššg
=
çl£
;

461 
	`Ex™FromT¿ššg
();

462 
	}
}

467 
	gTMVA
::
M‘hodRuËF™
::
	$T¿šTMVARuËF™
( )

469 ià(
	`IsNÜm®i£d
()è
	`Log
(è<< 
kFATAL
 << "\"Normalise\" option cannot be used with RuleFit; "

472 << 
Endl
;

475 
Tim”
 
	`tim”
Ğ1, 
	`G‘Name
() );

487 
fRuËF™
.
	`In™Ÿlize
Ğ
this
 );

493 
	`Log
(è<< 
kDEBUG
 << "F™tšg„uË cÛffic›Á ..." << 
Endl
;

494 
fRuËF™
.
	`F™CÛffic›Ás
();

497 
	`Log
(è<< 
kDEBUG
 << "Computšg„uË‡nd v¬ŸbË impÜnû" << 
Endl
;

498 
fRuËF™
.
	`C®cImpÜnû
();

501 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`Pršt
();

503 if(!
	`IsS’tFe
())

505 
	`Log
(è<< 
kDEBUG
 << "Flšg„uË‚tu¶e" << 
Endl
;

506 
UIÁ_t
 
ÄuËs
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËsCÚ¡
().
	`size
();

507 cÚ¡ 
RuË
 *
ruË
;

508 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++ ) {

509 
ruË
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËsCÚ¡
(
i
);

510 
fNTImpÜnû
 = 
ruË
->
	`G‘R–ImpÜnû
();

511 
fNTSuµÜt
 = 
ruË
->
	`G‘SuµÜt
();

512 
fNTCÛffic›Á
 = 
ruË
->
	`G‘CÛffic›Á
();

513 
fNTTy³
 = (
ruË
->
	`IsSigÇlRuË
() ? 1:-1 );

514 
fNTNv¬s
 = 
ruË
->
	`G‘RuËCut
()->
	`G‘Nv¬s
();

515 
fNTNcuts
 = 
ruË
->
	`G‘RuËCut
()->
	`G‘Ncuts
();

516 
fNTPg
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËPTag
(
i
);

517 
fNTPss
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËPSS
(
i
);

518 
fNTPsb
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËPSB
(
i
);

519 
fNTPbs
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËPBS
(
i
);

520 
fNTPbb
 = 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘RuËPBB
(
i
);

521 
fNTSSB
 = 
ruË
->
	`G‘SSB
();

522 
fMÚ™ÜNtu¶e
->
	`Fl
();

525 
fRuËF™
.
	`MakeVisHi¡s
();

526 
fRuËF™
.
	`MakeDebugHi¡s
();

528 
	`Log
(è<< 
kDEBUG
 << "T¿ššg dÚe" << 
Endl
;

530 
	}
}

535 
	gTMVA
::
M‘hodRuËF™
::
	$T¿šJFRuËF™
( )

537 
fRuËF™
.
	`In™PŒs
Ğ
this
 );

538 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

539 
UIÁ_t
 
Ãv’ts
 = 
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

540 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
tmp
;

541 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

542 cÚ¡ 
Ev’t
 *
ev’t
 = 
	`G‘Ev’t
(
›vt
);

543 
tmp
.
	`push_back
(
ev’t
);

545 
fRuËF™
.
	`S‘T¿ššgEv’ts
Ğ
tmp
 );

547 
RuËF™API
 *
rfAPI
 = 
Ãw
 
	`RuËF™API
Ğ
this
, &
fRuËF™
, 
	`Log
().
	`G‘MšTy³
() );

549 
rfAPI
->
	`W–comeMes§ge
();

552 
Tim”
 
	`tim”
Ğ1, 
	`G‘Name
() );

554 
	`Log
(è<< 
kINFO
 << "T¿ššg ..." << 
Endl
;

555 
rfAPI
->
	`T¿šRuËF™
();

557 
	`Log
(è<< 
kDEBUG
 << "»adšg mod– summ¬y from„f_go.exouut" << 
Endl
;

558 
rfAPI
->
	`R—dMod–Sum
();

562 
	`Log
(è<< 
kDEBUG
 << "ÿlcuÏtšg„uË‡nd v¬ŸbË impÜnû" << 
Endl
;

563 
fRuËF™
.
	`C®cImpÜnû
();

566 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`Pršt
();

568 if(!
	`IsS’tFe
())
fRuËF™
.
	`MakeVisHi¡s
();

570 
d–‘e
 
rfAPI
;

572 
	`Log
(è<< 
kDEBUG
 << "dÚŒaššg" << 
Endl
;

573 
	}
}

578 cÚ¡ 
	gTMVA
::
Rªkšg
* 
TMVA
::
M‘hodRuËF™
::
	$C»©eRªkšg
()

581 
fRªkšg
 = 
Ãw
 
	`Rªkšg
Ğ
	`G‘Name
(), "Importance" );

583 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

584 
fRªkšg
->
	`AddRªk
Ğ
	`Rªk
Ğ
	`G‘IÅutLab–
(
iv¬
), 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘V¬ImpÜnû
(ivar) ) );

587  
fRªkšg
;

588 
	}
}

593 
	gTMVA
::
M‘hodRuËF™
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

595 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`AddXMLTo
Ğ
·»Á
 );

596 
	}
}

601 
	gTMVA
::
M‘hodRuËF™
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
 & 
i¡r
 )

603 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`R—dRaw
Ğ
i¡r
 );

604 
	}
}

609 
	gTMVA
::
M‘hodRuËF™
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

611 
fRuËF™
.
	`G‘RuËEn£mbËPŒ
()->
	`R—dFromXML
Ğ
wghŠode
 );

612 
	}
}

617 
DoubË_t
 
	gTMVA
::
M‘hodRuËF™
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

620 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

622  
fRuËF™
.
	`Ev®Ev’t
Ğ*
	`G‘Ev’t
() );

623 
	}
}

628 
	gTMVA
::
M‘hodRuËF™
::
	$Wr™eMÚ™ÜšgHi¡osToFe
( ) const

630 
	`Ba£Dœ
()->
	`cd
();

631 
	`Log
(è<< 
kINFO
 << "Wr™mÚ™Üšg‚tu¶tØfe: " << 
	`Ba£Dœ
()->
	`G‘P©h
(è<< 
Endl
;

632 
fMÚ™ÜNtu¶e
->
	`Wr™e
();

633 
	}
}

638 
	gTMVA
::
M‘hodRuËF™
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

640 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

641 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

642 
fout
 << "};" << 
¡d
::
’dl
;

643 
fout
 << "void " << 
şassName
 << "::In™Ÿlize(){}" << 
¡d
::
’dl
;

644 
fout
 << "void " << 
şassName
 << "::CË¬(){}" << 
¡d
::
’dl
;

645 
fout
 << "doubË " << 
şassName
 << "::G‘MvaV®ue__ĞcÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡ {" << 
¡d
::
’dl
;

646 
fout
 << " doubË„v®=" << 
¡d
::
	`£»cisiÚ
(10è<< 
fRuËF™
.
	`G‘RuËEn£mbË
().
	`G‘Off£t
(è<< ";" << std::
’dl
;

647 
	`MakeCÏssRuËCuts
(
fout
);

648 
	`MakeCÏssLš—r
(
fout
);

649 
fout
 << "„‘uº„v®;" << 
¡d
::
’dl
;

650 
fout
 << "}" << 
¡d
::
’dl
;

651 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

652 
	}
}

657 
	gTMVA
::
M‘hodRuËF™
::
	$MakeCÏssRuËCuts
Ğ
¡d
::
o¡»am
& 
fout
 ) const

659 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

660 ià(!
fRuËF™
.
	`G‘RuËEn£mbË
().
	`DoRuËs
()) {

661 
fout
 << " //" << 
¡d
::
’dl
;

662 
fout
 << " // ==> MODEL CONTAINS NO RULES <==" << 
¡d
::
’dl
;

663 
fout
 << " //" << 
¡d
::
’dl
;

666 cÚ¡ 
RuËEn£mbË
 *
»ns
 = &(
fRuËF™
.
	`G‘RuËEn£mbË
());

667 cÚ¡ 
¡d
::
veùÜ
< 
RuË
* > *
ruËs
 = &(
»ns
->
	`G‘RuËsCÚ¡
());

668 cÚ¡ 
RuËCut
 *
ruËCut
;

670 
¡d
::
li¡
< std::
·œ
<
DoubË_t
,
IÁ_t
> > 
sÜ‹dRuËs
;

671 
UIÁ_t
 
œ
=0; ir<
ruËs
->
	`size
(); ir++) {

672 
sÜ‹dRuËs
.
	`push_back
Ğ
¡d
::
·œ
<
DoubË_t
,
IÁ_t
>Ğ(*
ruËs
)[
œ
]->
	`G‘ImpÜnû
()/
»ns
->
	`G‘ImpÜnûRef
(),ir ) );

674 
sÜ‹dRuËs
.
	`sÜt
();

676 
fout
 << " //" << 
¡d
::
’dl
;

677 
fout
 << " // h”fŞlow ®ÈruË Üd”ed iÀimpÜnû (mo¡ impÜÁ fœ¡)" << 
¡d
::
’dl
;

678 
fout
 << " //‡ˆth’d oà—ch†še,h»ÏtivimpÜnû oàthruË i giv’" << 
¡d
::
’dl
;

679 
fout
 << " //" << 
¡d
::
’dl
;

681  
¡d
::
li¡
< std::
·œ
<,> >::
»v”£_™”©Ü
 
™·œ
 = 
sÜ‹dRuËs
.
	`rbegš
();

682 
™·œ
 !ğ
sÜ‹dRuËs
.
	`»nd
(); itpair++ ) {

683 
UIÁ_t
 
œ
 = 
™·œ
->
£cÚd
;

684 
DoubË_t
 
im´
 = 
™·œ
->
fœ¡
;

685 
ruËCut
 = (*
ruËs
)[
œ
]->
	`G‘RuËCut
();

686 ià(
im´
<
»ns
->
	`G‘ImpÜnûCut
()è
fout
 << " //" << 
¡d
::
’dl
;

687 
fout
 << " ià(" << 
¡d
::
æush
;

688 
UIÁ_t
 
ic
=0; ic<
ruËCut
->
	`G‘Nv¬s
(); ic++) {

689 
DoubË_t
 
£l
 = 
ruËCut
->
	`G‘S–eùÜ
(
ic
);

690 
DoubË_t
 
v®mš
 = 
ruËCut
->
	`G‘CutMš
(
ic
);

691 
DoubË_t
 
v®max
 = 
ruËCut
->
	`G‘CutMax
(
ic
);

692 
BoŞ_t
 
domš
 = 
ruËCut
->
	`G‘CutDoMš
(
ic
);

693 
BoŞ_t
 
domax
 = 
ruËCut
->
	`G‘CutDoMax
(
ic
);

695 ià(
ic
>0è
fout
 << "&&" << 
¡d
::
æush
;

696 ià(
domš
) {

697 
fout
 << "(" << 
¡d
::
	`£»cisiÚ
(10è<< 
v®mš
 << std::
æush
;

698 
fout
 << "<šputV®ues[" << 
£l
 << "])" << 
¡d
::
æush
;

700 ià(
domax
) {

701 ià(
domš
è
fout
 << "&&" << 
¡d
::
æush
;

702 
fout
 << "(šputV®ues[" << 
£l
 << "]" << 
¡d
::
æush
;

703 
fout
 << "<" << 
¡d
::
	`£»cisiÚ
(10è<< 
v®max
 << ")" <<¡d::
æush
;

706 
fout
 << "èrv®+=" << 
¡d
::
	`£»cisiÚ
(10è<< (*
ruËs
)[
œ
]->
	`G‘CÛffic›Á
(è<< ";" << std::
æush
;

707 
fout
 << " // impÜnû = " << 
	`FÜm
("%3.3f",
im´
è<< 
¡d
::
’dl
;

709 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

710 
	}
}

715 
	gTMVA
::
M‘hodRuËF™
::
	$MakeCÏssLš—r
Ğ
¡d
::
o¡»am
& 
fout
 ) const

717 ià(!
fRuËF™
.
	`G‘RuËEn£mbË
().
	`DoLš—r
()) {

718 
fout
 << " //" << 
¡d
::
’dl
;

719 
fout
 << " // ==> MODEL CONTAINS NO LINEAR TERMS <==" << 
¡d
::
’dl
;

720 
fout
 << " //" << 
¡d
::
’dl
;

723 
fout
 << " //" << 
¡d
::
’dl
;

724 
fout
 << " // h”fŞlow ®Èlš—¸‹rms" << 
¡d
::
’dl
;

725 
fout
 << " //‡ˆth’d oà—ch†še,h»ÏtivimpÜnû oàth‹rm i giv’" << 
¡d
::
’dl
;

726 
fout
 << " //" << 
¡d
::
’dl
;

727 cÚ¡ 
RuËEn£mbË
 *
»ns
 = &(
fRuËF™
.
	`G‘RuËEn£mbË
());

728 
UIÁ_t
 
Æš
 = 
»ns
->
	`G‘NLš—r
();

729 
UIÁ_t
 

=0; il<
Æš
; il++) {

730 ià(
»ns
->
	`IsLšT”mOK
(

)) {

731 
DoubË_t
 
nÜm
 = 
»ns
->
	`G‘LšNÜm
(

);

732 
DoubË_t
 
imp
 = 
»ns
->
	`G‘LšImpÜnû
(

)/»ns->
	`G‘ImpÜnûRef
();

733 
fout
 << "„val+="

736 << 
¡d
::
	`£»cisiÚ
(10è<< 
»ns
->
	`G‘LšCÛffic›Ás
(

)*
nÜm


737 << "*¡d::mšĞdoubË(" << 
¡d
::
	`£»cisiÚ
(10è<< 
»ns
->
	`G‘LšDP
(

)

738 << "), std::maxĞdoubË(šputV®ues[" << 

 << "]), doubË(" << 
¡d
::
	`£»cisiÚ
(10è<< 
»ns
->
	`G‘LšDM
(il) << ")));"

739 << 
¡d
::
æush
;

740 
fout
 << " // impÜnû = " << 
	`FÜm
("%3.3f",
imp
è<< 
¡d
::
’dl
;

743 
	}
}

751 
	gTMVA
::
M‘hodRuËF™
::
	$G‘H–pMes§ge
() const

753 
TSŒšg
 
cŞ
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("bold");

754 
TSŒšg
 
cŞ»s
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
(è? 
	`TSŒšg
(è: 
	`gToŞs
().
	`CŞÜ
("reset");

755 
TSŒšg
 
brk
 = 
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
() ? "<br>" : "";

757 
	`Log
(è<< 
Endl
;

758 
	`Log
(è<< 
cŞ
 << "--- ShÜˆdesütiÚ:" << 
cŞ»s
 << 
Endl
;

759 
	`Log
(è<< 
Endl
;

760 
	`Log
(è<< "Thi m‘hod u£ ¨cŞËùiÚ oàsØÿÎed„uË tØü—‹‡" << 
Endl
;

761 
	`Log
(è<< "disüimš©šg scÜšg funùiÚ. Each„uË cÚsi¡ oà¨£r›s" << 
Endl
;

762 
	`Log
(è<< "oàcut š…¬am‘” s·û. Th’£mbË oàruË ¬ü—‹d" << 
Endl
;

763 
	`Log
(è<< "äom‡ fÜe¡ oàdecisiÚ»es,¿šed usšghŒaššg d©a." << 
Endl
;

764 
	`Log
(è<< "Each‚od×·¹ fromhroÙècÜ»¥Úd tØÚruË." << 
Endl
;

765 
	`Log
(è<< "ThscÜšg funùiÚ i th’ obšed by†š—¾y combššg" << 
Endl
;

766 
	`Log
(è<< "thruËs. A f™tšg…roûdu» i ­¶›dØfšdhİtimum" << 
Endl
;

767 
	`Log
(è<< "£ˆoàcÛffic›Ás. ThgßÈi tØfšd‡ mod– w™h few„uËs" << 
Endl
;

768 
	`Log
(è<< "buˆw™h‡ sŒÚg disüimš©šg…ow”." << 
Endl
;

769 
	`Log
(è<< 
Endl
;

770 
	`Log
(è<< 
cŞ
 << "--- P”fÜmªû o±imi§tiÚ:" << 
cŞ»s
 << 
Endl
;

771 
	`Log
(è<< 
Endl
;

772 
	`Log
(è<< "Th”¬twØimpÜÁ cÚsid”©iÚ tØmakwh’ o±imisšg:" << 
Endl
;

773 
	`Log
(è<< 
Endl
;

774 
	`Log
(è<< " 1. TİŞogy oàthdecisiÚ»fÜe¡" << 
brk
 << 
Endl
;

775 
	`Log
(è<< " 2. F™tšg oàthcÛffic›Ás" << 
Endl
;

776 
	`Log
(è<< 
Endl
;

777 
	`Log
(è<< "Thmaximum com¶ex™y oàthruË i defšed byhsizof" << 
Endl
;

778 
	`Log
(è<< "thŒ“s. L¬gŒ“ wÈy›ld mªy com¶ex„uË ªd c­tu»" << 
Endl
;

779 
	`Log
(è<< "high” ord” cÜ»ÏtiÚs. OÀthÙh” hªd, sm®ÈŒ“ wl" << 
Endl
;

780 
	`Log
(è<< "ËadØ¨sm®Ë¸’£mbË w™h sim¶ruËs, oÆy c­abË of" << 
Endl
;

781 
	`Log
(è<< "mod–šg sim¶¡ruùu»s." << 
Endl
;

782 
	`Log
(è<< "Sev”®…¬am‘” exi¡ fÜ cÚŒŞlšghcom¶ex™y oàthe" << 
Endl
;

783 
	`Log
(è<< "ruËƒn£mbË." << 
Endl
;

784 
	`Log
(è<< 
Endl
;

785 
	`Log
(è<< "Thf™tšg…roûdu» s—rche fÜ‡ mšimum usšg‡ g¿d›Á" << 
Endl
;

786 
	`Log
(è<< "dœeùed…©h. A·¹ from s‹°sizªd‚umb” oà¡•s,he" << 
Endl
;

787 
	`Log
(è<< "evŞutiÚ oàth·th i defšed by‡ cut-ofà·¿m‘”,au." << 
Endl
;

788 
	`Log
(è<< "Thi ·¿m‘” i unknowÀªd d•’d ÚhŒaššg d©a." << 
Endl
;

789 
	`Log
(è<< "A†¬gv®uwÈ‹ndØgivÏrgweight tØ¨ãw„uËs." << 
Endl
;

790 
	`Log
(è<< "Sim¬ly,‡ sm®Èv®uwÈËadØ¨Ïrg£ˆoàruËs" << 
Endl
;

791 
	`Log
(è<< "w™h sim¬ weights." << 
Endl
;

792 
	`Log
(è<< 
Endl
;

793 
	`Log
(è<< "A fš®…ošˆi thmod– u£d;„uË ªd/Ü†š—¸‹rms." << 
Endl
;

794 
	`Log
(è<< "FÜ‡ giv’¿ššg sam¶e,h»suÉ may im´ovby‡ddšg" << 
Endl
;

795 
	`Log
(è<< "lš—¸‹rms. Iàbe¡…”fÜmªû i obšed usšg oÆy†š—r" << 
Endl
;

796 
	`Log
(è<< "‹rms, iˆi v”y†ik–yh©hFish” disüimšªˆwould be" << 
Endl
;

797 
	`Log
(è<< "¨b‘‹¸choiû. Id—Îyhf™tšg…roûdu» should babËo" << 
Endl
;

798 
	`Log
(è<< "makthi choiû by givšg‡µrİrŸ‹ weight fÜƒ™h””ms." << 
Endl
;

799 
	`Log
(è<< 
Endl
;

800 
	`Log
(è<< 
cŞ
 << "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << 
cŞ»s
 << 
Endl
;

801 
	`Log
(è<< 
Endl
;

802 
	`Log
(è<< "I. TUNING OF RULE ENSEMBLE:" << 
Endl
;

803 
	`Log
(è<< 
Endl
;

804 
	`Log
(è<< " " << 
cŞ
 << "FÜe¡Ty³ " << 
cŞ»s


805 << ": Recomm’ded i tØu£hdeçuÉ \"AdaBoo¡\"." << 
brk
 << 
Endl
;

806 
	`Log
(è<< " " << 
cŞ
 << "nT»e  " << 
cŞ»s


807 << ": MÜŒ“ Ëad tØmÜruË buˆ®sØ¦ow" << 
Endl
;

808 
	`Log
(è<< "…”fÜmªû. W™hoØãw»e thrisk is" << 
Endl
;

809 
	`Log
(è<< "h©hruËƒn£mbË become toØsim¶e." << 
brk
 << 
Endl
;

810 
	`Log
(è<< " " << 
cŞ
 << "fEv’tsMš " << 
cŞ»s
 << 
brk
 << 
Endl
;

811 
	`Log
(è<< " " << 
cŞ
 << "fEv’tsMax " << 
cŞ»s


812 << ": W™h‡†ow” mš, mÜÏrgŒ“ wÈbg’”©ed" << 
Endl
;

813 
	`Log
(è<< "†—dšgØmÜcom¶ex„uËs." << 
Endl
;

814 
	`Log
(è<< " W™h‡ high” max, mÜsm®ÈŒ“ wÈbe" << 
Endl
;

815 
	`Log
(è<< " g’”©ed†—dšgØmÜsim¶ruËs." << 
Endl
;

816 
	`Log
(è<< " By chªgšghi ¿nge,hav”agcom¶ex™y" << 
Endl
;

817 
	`Log
(è<< " oàthruËƒn£mbË cª bcÚŒŞËd." << 
brk
 << 
Endl
;

818 
	`Log
(è<< " " << 
cŞ
 << "RuËMšDi¡ " << 
cŞ»s


819 << ": By inü—sšghmšimum di¡ªû b‘w“n" << 
Endl
;

820 
	`Log
(è<< "„uËs, few”‡nd mÜdiv”£„uË wÈ»maš." << 
Endl
;

821 
	`Log
(è<< " In™ŸÎy iˆi ¨good id—Øk“°thi sm®l" << 
Endl
;

822 
	`Log
(è<< " o¸z”Øªd†‘hf™tšg dØth£ËùiÚ of" << 
Endl
;

823 
	`Log
(è<< "„uËs. IÀÜd”Ø»duûh’£mbË size," << 
Endl
;

824 
	`Log
(è<< "hv®uÿÀth’ bšü—£d." << 
Endl
;

825 
	`Log
(è<< 
Endl
;

827 
	`Log
(è<< "II. TUNING OF THE FITTING:" << 
Endl
;

828 
	`Log
(è<< 
Endl
;

829 
	`Log
(è<< " " << 
cŞ
 << "GDP©hEveF¿ø" << 
cŞ»s


830 << ": f¿ùiÚ oàev’t š…©hƒv®u©iÚ" << 
Endl
;

831 
	`Log
(è<< " Inü—sšghi äaùiÚ wÈim´ovth·th" << 
Endl
;

832 
	`Log
(è<< " fšdšg. Howev”,‡oØhigh v®uwÈgivãw" << 
Endl
;

833 
	`Log
(è<< " uniquev’t avaabË fÜƒ¼Üƒ¡im©iÚ." << 
Endl
;

834 
	`Log
(è<< " Iˆi »comm’dedØu£hdeçuÉ = 0.5." << 
brk
 << 
Endl
;

835 
	`Log
(è<< " " << 
cŞ
 << "GDTau " << 
cŞ»s


836 << ": cutofà·¿m‘”au" << 
Endl
;

837 
	`Log
(è<< " By deçuÉhi v®ui £ˆtØ-1.0." << 
Endl
;

839 
	`Log
(è<< " Thi m—n th©hcuˆofà·¿m‘” is" << 
Endl
;

840 
	`Log
(è<< "‡utom©iÿÎyƒ¡im©ed. IÀmo¡ ca£s" << 
Endl
;

841 
	`Log
(è<< "hi should bfše. Howev”, you may wªt" << 
Endl
;

842 
	`Log
(è<< "Øfixhi v®uiàyou‡Ì—dy know it" << 
Endl
;

843 
	`Log
(è<< "‡nd wªˆtØ»duû oÀŒaššgime." << 
brk
 << 
Endl
;

844 
	`Log
(è<< " " << 
cŞ
 << "GDTauP»ø " << 
cŞ»s


845 << ":…»cisiÚ oàe¡im©edau" << 
Endl
;

846 
	`Log
(è<< " Inü—£hi ´ecisiÚØfšd‡ mÜe" << 
Endl
;

847 
	`Log
(è<< " o±imum cut-ofà·¿m‘”." << 
brk
 << 
Endl
;

848 
	`Log
(è<< " " << 
cŞ
 << "GDNS‹° " << 
cŞ»s


849 << ":‚umb” oà¡• š…©h s—rch" << 
Endl
;

850 
	`Log
(è<< " Iàthnumb” oà¡• i toØsm®l,h’" << 
Endl
;

851 
	`Log
(è<< "h´og¿m wÈgiv¨w¬nšg mes§ge." << 
Endl
;

852 
	`Log
(è<< 
Endl
;

853 
	`Log
(è<< "III. WARNING MESSAGES" << 
Endl
;

854 
	`Log
(è<< 
Endl
;

855 
	`Log
(è<< 
cŞ
 << "Risk(i+1)>=Risk(ièš…©h" << 
cŞ»s
 << 
brk
 << 
Endl
;

856 
	`Log
(è<< 
cŞ
 << "ChaÙiøbehaviou¸oàriskƒvŞutiÚ." << 
cŞ»s
 << 
Endl
;

858 
	`Log
(è<< " Th”rÜ„©wa ¡Èdeü—sšg‡ˆth’d" << 
Endl
;

859 
	`Log
(è<< " By cÚ¡ruùiÚhRisk should‡lway deü—£." << 
Endl
;

860 
	`Log
(è<< " Howev”, iàthŒaššg sam¶i toØsm®ÈÜ" << 
Endl
;

861 
	`Log
(è<< "hmod– i ov”Œašed, such w¬nšg ÿn" << 
Endl
;

862 
	`Log
(è<< " occur." << 
Endl
;

863 
	`Log
(è<< " Thw¬nšg ÿÀ§ãly bignÜed iàÚly‡" << 
Endl
;

864 
	`Log
(è<< " few (<3èoccur. IàmÜw¬nšg ¬g’”©ed," << 
Endl
;

865 
	`Log
(è<< "hf™tšg fas." << 
Endl
;

866 
	`Log
(è<< " A„emedy may btØšü—£hv®ue" << 
brk
 << 
Endl
;

867 
	`Log
() << " "

868 << 
cŞ
 << "GDV®idEveF¿c" << 
cŞ»s


869 << "Ø1.0 (Ü‡†¬g” v®ue)." << 
brk
 << 
Endl
;

870 
	`Log
() << " In‡ddition, if "

871 << 
cŞ
 << "GDP©hEveF¿c" << 
cŞ»s


872 << " i toØhigh" << 
Endl
;

873 
	`Log
(è<< "h§mw¬nšg may occu¸sšûhev’ts" << 
Endl
;

874 
	`Log
(è<< " u£d fÜƒ¼Üƒ¡im©iÚ‡»‡lsØu£d fÜ" << 
Endl
;

875 
	`Log
(è<< "…©hƒ¡im©iÚ." << 
Endl
;

876 
	`Log
(è<< " AnÙh”…ossib™y i tØmodifyhmod– - " << 
Endl
;

877 
	`Log
(è<< " S“‡bovÚunšghruËƒn£mbË." << 
Endl
;

878 
	`Log
(è<< 
Endl
;

879 
	`Log
(è<< 
cŞ
 << "Theƒrror„ate was still decreasing‡theƒnd ofhe…ath"

880 << 
cŞ»s
 << 
Endl
;

881 
	`Log
() << " Too few steps in…ath! Increase "

882 << 
cŞ
 << "GDNS‹ps" << 
cŞ»s
 << "." << 
Endl
;

883 
	`Log
(è<< 
Endl
;

884 
	`Log
(è<< 
cŞ
 << "R—ched mšimumƒ¬ly iÀth£¬ch" << 
cŞ»s
 << 
Endl
;

886 
	`Log
(è<< " Mšimum wa foundƒ¬ly iÀthf™tšg. This" << 
Endl
;

887 
	`Log
() << " may indicatehathe used step size "

888 << 
cŞ
 << "GDS‹p" << 
cŞ»s
 << "." << 
Endl
;

889 
	`Log
(è<< " wa toØÏrge. Reduû iˆªd„”un." << 
Endl
;

890 
	`Log
(è<< " Iàth»suÉ ¡È¬nÙ OK, modifyhe" << 
Endl
;

891 
	`Log
(è<< " mod–ƒ™h” by modifyšghruËƒn£mbË" << 
Endl
;

892 
	`Log
(è<< " o¸add/»movlš—¸‹rms" << 
Endl
;

893 
	}
}

	@src/MethodSVM.cxx

45 
	~"TMVA/M‘hodSVM.h
"

47 
	~"TMVA/ToŞs.h
"

48 
	~"TMVA/Tim”.h
"

50 
	~"TMVA/SVWÜkšgS‘.h
"

52 
	~"TMVA/SVEv’t.h
"

54 
	~"TMVA/SVK”ÃlFunùiÚ.h
"

56 
	~"TMVA/CÏssif›rFaùÜy.h
"

57 
	~"TMVA/CÚfigu¿bË.h
"

58 
	~"TMVA/D©aS‘.h
"

59 
	~"TMVA/D©aS‘Info.h
"

60 
	~"TMVA/Ev’t.h
"

61 
	~"TMVA/IM‘hod.h
"

62 
	~"TMVA/M‘hodBa£.h
"

63 
	~"TMVA/MsgLogg”.h
"

64 
	~"TMVA/Ty³s.h
"

65 
	~"TMVA/IÁ”v®.h
"

66 
	~"TMVA/O±imizeCÚfigP¬am‘”s.h
"

67 
	~"TMVA/ResuÉs.h
"

68 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

69 
	~"TMVA/V¬ŸbËInfo.h
"

71 
	~"Rio¡»am.h
"

72 
	~"TFe.h
"

73 
	~"TVeùÜD.h
"

74 
	~"TM©h.h
"

76 
	~<¡ršg
>

78 
usšg
 
	g¡d
::
veùÜ
;

79 
usšg
 
	g¡d
::
¡ršg
;

80 
usšg
 
	g¡d
::
¡ršg¡»am
;

83 
	$REGISTER_METHOD
(
SVM
)

85 
	`CÏssImp
(
TMVA
::
M‘hodSVM
);

90 
TMVA
::
M‘hodSVM
::
	$M‘hodSVM
ĞcÚ¡ 
TSŒšg
& 
jobName
, cÚ¡ TSŒšg& 
m‘hodT™Ë
, 
D©aS‘Info
& 
theD©a
,

91 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

92 : 
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kSVM
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
)

93 , 
	`fCo¡
(0)

94 , 
	`fTŞ”ªû
(0)

95 , 
	`fMaxI‹r
(0)

96 , 
	`fNSubS‘s
(0)

97 , 
	`fB·rm
(0)

98 , 
	`fGamma
(0)

99 , 
	`fWgS‘
(0)

100 , 
	`fIÅutD©a
(0)

101 , 
	`fSuµÜtVeùÜs
(0)

102 , 
	`fSVK”ÃlFunùiÚ
(0)

103 , 
	`fMšV¬s
(0)

104 , 
	`fMaxV¬s
(0)

105 , 
	`fDoubËSigmaSqu¬ed
(0)

106 , 
	`fOrd”
(0)

107 , 
	`fTh‘a
(0)

108 , 
	`fK­·
(0)

109 , 
	`fMuÉ
(0)

110 ,
	`fNumV¬s
(0)

111 , 
	`fGammas
("")

112 , 
	`fGammaLi¡
("")

113 , 
	`fD©aSize
(0)

114 , 
	$fLoss
(0)

116 
fV¬Names
.
	`ş—r
();

117 
fNumV¬s
 = 
theD©a
.
	`G‘V¬ŸbËInfos
().
	`size
();

118  
i
=0; i<
fNumV¬s
; i++){

119 
fV¬Names
.
	`push_back
(
theD©a
.
	`G‘V¬ŸbËInfos
().
	`©
(
i
).
	`G‘T™Ë
());

121 
	}
}

126 
	gTMVA
::
M‘hodSVM
::
	$M‘hodSVM
Ğ
D©aS‘Info
& 
theD©a
, cÚ¡ 
TSŒšg
& 
theWeightFe
)

127 : 
	`M‘hodBa£
Ğ
Ty³s
::
kSVM
, 
theD©a
, 
theWeightFe
)

128 , 
	`fCo¡
(0)

129 , 
	`fTŞ”ªû
(0)

130 , 
	`fMaxI‹r
(0)

131 , 
	`fNSubS‘s
(0)

132 , 
	`fB·rm
(0)

133 , 
	`fGamma
(0)

134 , 
	`fWgS‘
(0)

135 , 
	`fIÅutD©a
(0)

136 , 
	`fSuµÜtVeùÜs
(0)

137 , 
	`fSVK”ÃlFunùiÚ
(0)

138 , 
	`fMšV¬s
(0)

139 , 
	`fMaxV¬s
(0)

140 , 
	`fDoubËSigmaSqu¬ed
(0)

141 , 
	`fOrd”
(0)

142 , 
	`fTh‘a
(0)

143 , 
	`fK­·
(0)

144 , 
	`fMuÉ
(0)

145 , 
	`fNumV¬s
(0)

146 , 
	`fGammas
("")

147 , 
	`fGammaLi¡
("")

148 , 
	`fD©aSize
(0)

149 , 
	$fLoss
(0)

151 
fV¬Names
.
	`ş—r
();

152 
fNumV¬s
 = 
theD©a
.
	`G‘V¬ŸbËInfos
().
	`size
();

153  
i
=0;i<
fNumV¬s
; i++){

154 
fV¬Names
.
	`push_back
(
theD©a
.
	`G‘V¬ŸbËInfos
().
	`©
(
i
).
	`G‘T™Ë
());

156 
	}
}

161 
	gTMVA
::
M‘hodSVM
::~
	$M‘hodSVM
()

163 
fSuµÜtVeùÜs
->
	`ş—r
();

164 
UIÁ_t
 
i
=0; i<
fIÅutD©a
->
	`size
(); i++) {

165 
d–‘e
 
fIÅutD©a
->
	`©
(
i
);

167 ià(
fWgS‘
 !=0è{ 
d–‘e
 fWgSet; fWgSet=0; }

168 ià(
fSVK”ÃlFunùiÚ
 !=0 ) { 
d–‘e
 fSVKernelFunction; fSVKernelFunction = 0; }

169 
	}
}

174 
	gTMVA
::
M‘hodSVM
::
	$Re£t
( )

177 
fSuµÜtVeùÜs
->
	`ş—r
();

178 
UIÁ_t
 
i
=0; i<
fIÅutD©a
->
	`size
(); i++){

179 
d–‘e
 
fIÅutD©a
->
	`©
(
i
);

180 
fIÅutD©a
->
	`©
(
i
)=0;

182 
fIÅutD©a
->
	`ş—r
();

183 ià(
fWgS‘
 !=0) { fWgSet=0; }

184 ià(
fSVK”ÃlFunùiÚ
 !=0 ) { fSVKernelFunction = 0; }

185 ià(
	`D©a
()){

186 
	`D©a
()->
	`D–‘eResuÉs
(
	`G‘M‘hodName
(), 
Ty³s
::
kT¿ššg
, 
	`G‘AÇlysisTy³
());

189 
	`Log
(è<< 
kDEBUG
 << " sucûssfuÎy(?è»£ˆthm‘hod " << 
Endl
;

190 
	}
}

195 
BoŞ_t
 
	gTMVA
::
M‘hodSVM
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
, UIÁ_ˆ
numb”T¬g‘s
 )

197 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

198 ià(
ty³
 =ğ
Ty³s
::
kReg»ssiÚ
 && 
numb”T¬g‘s
 =ğ1è 
kTRUE
;

199  
kFALSE
;

200 
	}
}

205 
	gTMVA
::
M‘hodSVM
::
	$In™
()

208 
	`S‘NÜm®i£d
Ğ
kTRUE
 );

213 
fIÅutD©a
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>(0);

214 
fSuµÜtVeùÜs
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>(0);

215 
	}
}

220 
	gTMVA
::
M‘hodSVM
::
	$Deş¬eO±iÚs
()

222 
	`Deş¬eO±iÚRef
Ğ
fTheK”Ãl
 = "RBF", "Kernel", "Pick which kernel ( RBF or MultiGauss )");

224 
	`Deş¬eO±iÚRef
Ğ
fGamma
 = 1., "Gamma", "RBF kernel…arameter: Gamma (size ofhe Kernel)");

226 
	`Deş¬eO±iÚRef
Ğ
fOrd”
 = 3, "Order", "Polynomial Kernel…arameter:…olynomial order");

227 
	`Deş¬eO±iÚRef
Ğ
fTh‘a
 = 1., "Theta", "Polynomial Kernel…arameter:…olynomialheta");

229 
	`Deş¬eO±iÚRef
Ğ
fGammas
 = "", "GammaList", "MultiGauss…arameters" );

232 
	`Deş¬eO±iÚRef
Ğ
fTuÃ
 = "All", "Tune", "Tune Parameters");

234 
	`Deş¬eO±iÚRef
Ğ
fMuÉiK”Ãls
 = "None", "KernelList", "Sum or…roduct of kernels");

235 
	`Deş¬eO±iÚRef
Ğ
fLoss
 = "hinge", "Loss", "Loss function");

237 
	`Deş¬eO±iÚRef
Ğ
fCo¡
, "C", "Cost…arameter" );

238 ià(
	`DoReg»ssiÚ
()) {

239 
fCo¡
 = 0.002;

241 
fCo¡
 = 1.;

243 
	`Deş¬eO±iÚRef
Ğ
fTŞ”ªû
 = 0.01, "Tol", "Tolerance…arameter" );

244 
	`Deş¬eO±iÚRef
Ğ
fMaxI‹r
 = 1000, "MaxIter", "Maximum‚umber ofraining†oops" );

246 
	}
}

251 
	gTMVA
::
M‘hodSVM
::
	$Deş¬eCom·tib™yO±iÚs
()

253 
M‘hodBa£
::
	`Deş¬eCom·tib™yO±iÚs
();

254 
	`Deş¬eO±iÚRef
Ğ
fNSubS‘s
 = 1, "NSubSets", "Number ofraining subsets" );

255 
	`Deş¬eO±iÚRef
Ğ
fTheK”Ãl
 = "Gauss", "Kernel", "Uses kernel function");

257 
	`Deş¬eO±iÚRef
Ğ
fDoubËSigmaSqu¬ed
 = 2., "Sigma", "Kernel…arameter: sigma");

259 
	`Deş¬eO±iÚRef
Ğ
fOrd”
 = 3, "Order", "Polynomial Kernel…arameter:…olynomial order");

261 
	`Deş¬eO±iÚRef
Ğ
fTh‘a
 = 1., "Theta", "Sigmoid Kernel…arameter:heta");

262 
	`Deş¬eO±iÚRef
Ğ
fK­·
 = 1., "Kappa", "Sigmoid Kernel…arameter: kappa");

263 
	}
}

268 
	gTMVA
::
M‘hodSVM
::
	$ProûssO±iÚs
()

270 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

271 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot yet‡vailable for method: "

272 << 
	`G‘M‘hodTy³Name
()

274 << 
Endl
;

276 
	}
}

281 
	gTMVA
::
M‘hodSVM
::
	$T¿š
()

283 
fIPyMaxI‹r
 = 
fMaxI‹r
;

284 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

286 
	`Log
(è<< 
kDEBUG
 << "C»©ev’ˆveùÜ"<< 
Endl
;

288 
fD©aSize
 = 
	`D©a
()->
	`G‘NEv’ts
();

289 
IÁ_t
 
nSigÇl
 = 
	`D©a
()->
	`G‘NEvtSigT¿š
();

290 
IÁ_t
 
nBackground
 = 
	`D©a
()->
	`G‘NEvtBkgdT¿š
();

291 
DoubË_t
 
CSig
;

292 
DoubË_t
 
CBkg
;

297 if(
nSigÇl
 < 
nBackground
){

298 
CSig
 = 
fCo¡
;

299 
CBkg
 = 
CSig
*(()
nSigÇl
/
nBackground
);

302 
CBkg
 = 
fCo¡
;

303 
CSig
 = 
CBkg
*(()
nSigÇl
/
nBackground
);

307 
IÁ_t
 
›vÁ
=0; ievÁ<
	`D©a
()->
	`G‘NEv’ts
(); ievnt++){

308 ià(
	`G‘Ev’t
(
›vÁ
)->
	`G‘Weight
() != 0){

309 if(
	`D©aInfo
().
	`IsSigÇl
(
	`G‘Ev’t
(
›vÁ
))){

310 
fIÅutD©a
->
	`push_back
(
Ãw
 
	`SVEv’t
(
	`G‘Ev’t
(
›vÁ
), 
CSig
, 
	`D©aInfo
().
IsSigÇl
\

311 (
	`G‘Ev’t
(
›vÁ
))));

314 
fIÅutD©a
->
	`push_back
(
Ãw
 
	`SVEv’t
(
	`G‘Ev’t
(
›vÁ
), 
CBkg
, 
	`D©aInfo
().
IsSigÇl
\

315 (
	`G‘Ev’t
(
›vÁ
))));

323 ifĞ
fTheK”Ãl
 == "RBF"){

324 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
Ğ
SVK”ÃlFunùiÚ
::
kRBF
, 
fGamma
);

326 ifĞ
fTheK”Ãl
 == "MultiGauss" ){

327 if(
fGammas
!=""){

328 
	`S‘MGamma
(
fGammas
);

329 
fGammaLi¡
=
fGammas
;

332 if(
fmGamma
.
	`size
()!=0){ 
	`G‘MGamma
(fmGamma); }

334 
IÁ_t
 
ngammas
=0;‚gammas<
fNumV¬s
; ++ngammas){

335 
fmGamma
.
	`push_back
(1.0);

337 
	`G‘MGamma
(
fmGamma
);

340 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
fmGamma
);

342 ifĞ
fTheK”Ãl
 == "Polynomial" ){

343 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
Ğ
SVK”ÃlFunùiÚ
::
kPŞynomŸl
, 
fOrd”
,
fTh‘a
);

345 ifĞ
fTheK”Ãl
 == "Prod" ){

346 if(
fGammas
!=""){

347 
	`S‘MGamma
(
fGammas
);

348 
fGammaLi¡
=
fGammas
;

351 if(
fmGamma
.
	`size
()!=0){ 
	`G‘MGamma
(fmGamma); }

353 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
Ğ
SVK”ÃlFunùiÚ
::
kProd
, 
	`MakeK”ÃlLi¡
(
fMuÉiK”Ãls
,
fTheK”Ãl
), 
fmGamma
, 
fGamma
, 
fOrd”
, 
fTh‘a
 );

355 ifĞ
fTheK”Ãl
 == "Sum" ){

356 if(
fGammas
!=""){

357 
	`S‘MGamma
(
fGammas
);

358 
fGammaLi¡
=
fGammas
;

361 if(
fmGamma
.
	`size
()!=0){ 
	`G‘MGamma
(fmGamma); }

363 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
Ğ
SVK”ÃlFunùiÚ
::
kSum
, 
	`MakeK”ÃlLi¡
(
fMuÉiK”Ãls
,
fTheK”Ãl
), 
fmGamma
, 
fGamma
, 
fOrd”
, 
fTh‘a
 );

366 
	`Log
(è<< 
kWARNING
 << 
fTheK”Ãl
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

367 
	`ex™
(1);

370 
	`Log
()<< 
kINFO
 << "Budšg SVM WÜkšg S‘...w™h "<<
fIÅutD©a
->
	`size
()<<"ƒv’ˆš¡ªûs"<< 
Endl
;

371 
Tim”
 
	`bldw¡ime
Ğ
	`G‘Name
());

372 
fWgS‘
 = 
Ãw
 
	`SVWÜkšgS‘
Ğ
fIÅutD©a
, 
fSVK”ÃlFunùiÚ
,
fTŞ”ªû
, 
	`DoReg»ssiÚ
() );

373 
	`Log
(è<< 
kINFO
 <<"EÏp£dimfÜ WÜkšg S‘ bud: "<< 
bldw¡ime
.
	`G‘EÏp£dTime
()<<
Endl
;

376 
Tim”
 
	`tim”
Ğ
	`G‘Name
() );

377 
	`Log
(è<< 
kINFO
 << "SÜry,‚ØcomputšgimfÜeÿ¡‡vaabË fÜ SVM,…Ëa£ wa™ ..." << 
Endl
;

379 ià(
fIÁ”aùive
è
fWgS‘
->
	`S‘IPythÚIÁ”aùive
(&
fEx™FromT¿ššg
, &
fIPyCu¼’tI‹r
);

381 
fWgS‘
->
	`T¿š
(
fMaxI‹r
);

383 
	`Log
(è<< 
kINFO
 << "EÏp£dime: " << 
tim”
.
	`G‘EÏp£dTime
()

384 << " " << 
Endl
;

386 
fB·rm
 = 
fWgS‘
->
	`G‘B·r
();

387 
fSuµÜtVeùÜs
 = 
fWgS‘
->
	`G‘SuµÜtVeùÜs
();

388 
d–‘e
 
fWgS‘
;

389 
fWgS‘
=0;

391 ià(!
fEx™FromT¿ššg
è
fIPyMaxI‹r
 = 
fIPyCu¼’tI‹r
;

392 
	`Ex™FromT¿ššg
();

393 
	}
}

398 
	gTMVA
::
M‘hodSVM
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

400 * 
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

401 
	`gToŞs
().
	`AddA‰r
(
wght
,"fB·rm",
fB·rm
);

402 
	`gToŞs
().
	`AddA‰r
(
wght
,"fGamma",
fGamma
);

403 
	`gToŞs
().
	`AddA‰r
(
wght
,"fGammaLi¡",
fGammaLi¡
);

404 
	`gToŞs
().
	`AddA‰r
(
wght
,"fTh‘a",
fTh‘a
);

405 
	`gToŞs
().
	`AddA‰r
(
wght
,"fOrd”",
fOrd”
);

406 
	`gToŞs
().
	`AddA‰r
(
wght
,"NSupVec",
fSuµÜtVeùÜs
->
	`size
());

408 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
vec™”
=
fSuµÜtVeùÜs
->
	`begš
();

409 
vec™”
!=
fSuµÜtVeùÜs
->
	`’d
() ; ++veciter ) {

410 
TVeùÜD
 
	`‹mp
(
	`G‘Nv¬
()+4);

411 
‹mp
[0] = (*
vec™”
)->
	`G‘Ns
();

412 
‹mp
[1] = (*
vec™”
)->
	`G‘Ty³FÏg
();

413 
‹mp
[2] = (*
vec™”
)->
	`G‘AÍha
();

414 
‹mp
[3] = (*
vec™”
)->
	`G‘AÍha_p
();

415 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++)

416 
‹mp
[
iv¬
+4] = (*(*
vec™”
)->
	`G‘D©aVeùÜ
())[ivar];

417 
	`gToŞs
().
	`Wr™eTVeùÜDToXML
(
wght
,"SuµÜtVeùÜ",&
‹mp
);

420 * 
maxnode
 = 
	`gToŞs
().
	`AddChd
(
wght
, "Maxima");

421 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++)

422 
	`gToŞs
().
	`AddA‰r
(
maxnode
, "V¬"+gToŞs().
	`SŒšgFromIÁ
(
iv¬
), 
	`G‘Xmax
(ivar));

423 * 
mšnode
 = 
	`gToŞs
().
	`AddChd
(
wght
, "Minima");

424 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++)

425 
	`gToŞs
().
	`AddA‰r
(
mšnode
, "V¬"+gToŞs().
	`SŒšgFromIÁ
(
iv¬
), 
	`G‘Xmš
(ivar));

426 
	}
}

430 
	gTMVA
::
M‘hodSVM
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

432 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "fB·rm",
fB·rm
 );

433 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "fGamma",
fGamma
);

434 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "fGammaLi¡",
fGammaLi¡
);

435 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "fOrd”",
fOrd”
);

436 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "fTh‘a",
fTh‘a
);

437 
UIÁ_t
 
fNsupv
=0;

438 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NSupVec",
fNsupv
 );

440 
Flßt_t
 
®pha
=0.;

441 
Flßt_t
 
®pha_p
 = 0.;

443 
IÁ_t
 
ty³FÏg
=-1;

445 
¡d
::
veùÜ
<
Flßt_t
>* 
sveùÜ
 = 
Ãw
 std::veùÜ<Flßt_t>(
	`G‘Nv¬
());

447 ià(
fMaxV¬s
!=0è
d–‘e
 fMaxVars;

448 
fMaxV¬s
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

449 ià(
fMšV¬s
!=0è
d–‘e
 fMinVars;

450 
fMšV¬s
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

451 ià(
fSuµÜtVeùÜs
!=0) {

452 
veùÜ
< 
SVEv’t
* >::
™”©Ü
 
™
 = 
fSuµÜtVeùÜs
->
	`begš
(); it!=fSuµÜtVeùÜs->
	`’d
(); ++it)

453 
d–‘e
 *
™
;

454 
d–‘e
 
fSuµÜtVeùÜs
;

456 
fSuµÜtVeùÜs
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>(0);

457 * 
suµÜtveùÜnode
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

458 
UIÁ_t
 
›vt
 = 0; ievˆ< 
fNsupv
; ievt++) {

459 
TVeùÜD
 
	`‹mp
(
	`G‘Nv¬
()+4);

460 
	`gToŞs
().
	`R—dTVeùÜDFromXML
(
suµÜtveùÜnode
,"SuµÜtVeùÜ",&
‹mp
);

462 
ty³FÏg
=()
‹mp
[1];

463 
®pha
=
‹mp
[2];

464 
®pha_p
=
‹mp
[3];

465 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); iv¬++è(*
sveùÜ
)[iv¬]=
‹mp
[ivar+4];

467 
fSuµÜtVeùÜs
->
	`push_back
(
Ãw
 
	`SVEv’t
(
sveùÜ
,
®pha
,
®pha_p
,
ty³FÏg
));

468 
suµÜtveùÜnode
 = 
	`gToŞs
().
	`G‘NextChd
(supportvectornode);

471 * 
maxmšnode
 = 
suµÜtveùÜnode
;

472 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++)

473 
	`gToŞs
().
	`R—dA‰r
Ğ
maxmšnode
,"V¬"+gToŞs().
	`SŒšgFromIÁ
(
iv¬
),(*
fMaxV¬s
)[ivar]);

474 
maxmšnode
 = 
	`gToŞs
().
	`G‘NextChd
(maxminnode);

475 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++)

476 
	`gToŞs
().
	`R—dA‰r
Ğ
maxmšnode
,"V¬"+gToŞs().
	`SŒšgFromIÁ
(
iv¬
),(*
fMšV¬s
)[ivar]);

477 ià(
fSVK”ÃlFunùiÚ
!=0è
d–‘e
 fSVKernelFunction;

478 ifĞ
fTheK”Ãl
 == "RBF" ){

479 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
SVK”ÃlFunùiÚ
::
kRBF
, 
fGamma
);

481 ifĞ
fTheK”Ãl
 == "MultiGauss" ){

482 
	`S‘MGamma
(
fGammaLi¡
);

483 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
fmGamma
);

485 ifĞ
fTheK”Ãl
 == "Polynomial" ){

486 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
SVK”ÃlFunùiÚ
::
kPŞynomŸl
, 
fOrd”
, 
fTh‘a
);

488 ifĞ
fTheK”Ãl
 == "Prod" ){

489 
	`S‘MGamma
(
fGammaLi¡
);

490 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
SVK”ÃlFunùiÚ
::
kSum
, 
	`MakeK”ÃlLi¡
(
fMuÉiK”Ãls
,
fTheK”Ãl
), 
fmGamma
, 
fGamma
, 
fOrd”
, 
fTh‘a
);

492 ifĞ
fTheK”Ãl
 == "Sum" ){

493 
	`S‘MGamma
(
fGammaLi¡
);

494 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(
SVK”ÃlFunùiÚ
::
kSum
, 
	`MakeK”ÃlLi¡
(
fMuÉiK”Ãls
,
fTheK”Ãl
), 
fmGamma
, 
fGamma
, 
fOrd”
, 
fTh‘a
);

497 
	`Log
(è<< 
kWARNING
 << 
fTheK”Ãl
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

498 
	`ex™
(1);

500 
d–‘e
 
sveùÜ
;

501 
	}
}

507 
	gTMVA
::
M‘hodSVM
::
	$Wr™eWeightsToSŒ—m
Ğ
TFe
& ) const

509 
	}
}

513 
TMVA
::
M‘hodSVM
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

515 ià(
fSuµÜtVeùÜs
 !=0è{ 
d–‘e
 fSupportVectors; fSupportVectors = 0;}

516 
fSuµÜtVeùÜs
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>(0);

519 
i¡r
 >> 
fB·rm
;

521 
UIÁ_t
 
fNsupv
;

523 
i¡r
 >> 
fNsupv
;

524 
fSuµÜtVeùÜs
->
	`»£rve
(
fNsupv
);

526 
Flßt_t
 
ty³T®pha
=0.;

527 
Flßt_t
 
®pha
=0.;

528 
IÁ_t
 
ty³FÏg
=-1;

529 
UIÁ_t
 
ns
 = 0;

530 
¡d
::
veùÜ
<
Flßt_t
>* 
sveùÜ
 = 
Ãw
 std::veùÜ<Flßt_t>(
	`G‘Nv¬
());

532 
fMaxV¬s
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

533 
fMšV¬s
 = 
Ãw
 
	`TVeùÜD
Ğ
	`G‘Nv¬
() );

535 
UIÁ_t
 
›vt
 = 0; ievˆ< 
fNsupv
; ievt++) {

536 
i¡r
>>
ns
;

537 
i¡r
>>
ty³T®pha
;

538 
ty³FÏg
 = 
ty³T®pha
<0?-1:1;

539 
®pha
 = 
ty³T®pha
<0?-typeTalpha:typeTalpha;

540 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); iv¬++è
i¡r
 >> 
sveùÜ
->
	`©
(ivar);

542 
fSuµÜtVeùÜs
->
	`push_back
(
Ãw
 
	`SVEv’t
(
sveùÜ
,
®pha
,
ty³FÏg
,
ns
));

545 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); iv¬++è
i¡r
 >> (*
fMaxV¬s
)[ivar];

547 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); iv¬++è
i¡r
 >> (*
fMšV¬s
)[ivar];

549 
d–‘e
 
fSVK”ÃlFunùiÚ
;

550 ià(
fTheK”Ãl
 == "Gauss" ) {

551 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
(1/
fDoubËSigmaSqu¬ed
);

554 
SVK”ÃlFunùiÚ
::
EK”ÃlTy³
 
k
 = SVK”ÃlFunùiÚ::
kLš—r
;

555 if(
fTheK”Ãl
 =ğ"Lš—r"è
k
 = 
SVK”ÃlFunùiÚ
::
kLš—r
;

556 ià(
fTheK”Ãl
 =ğ"PŞynomŸl"è
k
 = 
SVK”ÃlFunùiÚ
::
kPŞynomŸl
;

557 ià(
fTheK”Ãl
 =ğ"Sigmoid" ) 
k
 = 
SVK”ÃlFunùiÚ
::
kSigmoid®
;

559 
	`Log
(è<< 
kFATAL
 <<"UnknowÀk”ÃÈfunùiÚ found iÀweighˆfe!" << 
Endl
;

561 
fSVK”ÃlFunùiÚ
 = 
Ãw
 
	`SVK”ÃlFunùiÚ
();

562 
fSVK”ÃlFunùiÚ
->
	`£tCom·tib™yP¬ams
(
k
, 
fOrd”
, 
fTh‘a
, 
fK­·
);

564 
d–‘e
 
sveùÜ
;

565 
	}
}

570 
	gTMVA
::
M‘hodSVM
::
	$R—dWeightsFromSŒ—m
Ğ
TFe
& )

572 
	}
}

577 
DoubË_t
 
TMVA
::
M‘hodSVM
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

579 
DoubË_t
 
myMVA
 = 0;

582 
SVEv’t
* 
ev
 = 
Ãw
 
	`SVEv’t
Ğ
	`G‘Ev’t
(), 0. );

584 
UIÁ_t
 
›vt
 = 0; ievˆ< 
fSuµÜtVeùÜs
->
	`size
() ; ievt++) {

585 
myMVA
 +ğĞ
fSuµÜtVeùÜs
->
	`©
(
›vt
)->
	`G‘AÍha
()

586 * 
fSuµÜtVeùÜs
->
	`©
(
›vt
)->
	`G‘Ty³FÏg
()

587 * 
fSVK”ÃlFunùiÚ
->
	`Ev®u©e
Ğ
fSuµÜtVeùÜs
->
	`©
(
›vt
), 
ev
 ) );

590 
d–‘e
 
ev
;

592 
myMVA
 -ğ
fB·rm
;

595 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

598  1.0/(1.0 + 
TM©h
::
	`Exp
(
myMVA
));

599 
	}
}

602 cÚ¡ 
	g¡d
::
veùÜ
<
Flßt_t
>& 
TMVA
::
M‘hodSVM
::
	$G‘Reg»ssiÚV®ues
()

604 ifĞ
fReg»ssiÚR‘uºV®
 =ğ
NULL
 )

605 
fReg»ssiÚR‘uºV®
 = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
>();

606 
fReg»ssiÚR‘uºV®
->
	`ş—r
();

608 
DoubË_t
 
myMVA
 = 0;

610 cÚ¡ 
Ev’t
 *
ba£ev
 = 
	`G‘Ev’t
();

611 
SVEv’t
* 
ev
 = 
Ãw
 
	`SVEv’t
Ğ
ba£ev
,0. );

613 
UIÁ_t
 
›vt
 = 0; ievˆ< 
fSuµÜtVeùÜs
->
	`size
() ; ievt++) {

614 
myMVA
 +ğĞ
fSuµÜtVeùÜs
->
	`©
(
›vt
)->
	`G‘D–AÍha
()

615 *
fSVK”ÃlFunùiÚ
->
	`Ev®u©e
Ğ
fSuµÜtVeùÜs
->
	`©
(
›vt
), 
ev
 ) );

617 
myMVA
 +ğ
fB·rm
;

618 
Ev’t
 * 
evT
 = 
Ãw
 
	`Ev’t
(*
ba£ev
);

619 
evT
->
	`S‘T¬g‘
(0,
myMVA
);

621 cÚ¡ 
Ev’t
* 
evT2
 = 
	`G‘T¿nsfÜm©iÚHªdËr
().
	`Inv”£T¿nsfÜm
Ğ
evT
 );

623 
fReg»ssiÚR‘uºV®
->
	`push_back
(
evT2
->
	`G‘T¬g‘
(0));

625 
d–‘e
 
evT
;

627 
d–‘e
 
ev
;

629  *
fReg»ssiÚR‘uºV®
;

630 
	}
}

635 
	gTMVA
::
M‘hodSVM
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
şassName
 ) const

637 cÚ¡ 
fNsupv
 = 
fSuµÜtVeùÜs
->
	`size
();

638 
fout
 << " //‚Ù im¶em’‹d fÜ cÏss: \"" << 
şassName
 << "\"" << 
¡d
::
’dl
;

639 
fout
 << " flßˆ fB·¿m‘”;" << 
¡d
::
’dl
;

640 
fout
 << " iÁ fNOfSuµVec;" << 
¡d
::
’dl
;

641 
fout
 << " stiøæßˆfAÎSuµVeùÜs[][" << 
fNsupv
 << "];" << 
¡d
::
’dl
;

642 
fout
 << " stiøæßˆfAÍhaTy³CÛf[" << 
fNsupv
 << "];" << 
¡d
::
’dl
;

643 
fout
 << 
¡d
::
’dl
;

644 
fout
 << " // K”ÃÈ·¿m‘”(sè" << 
¡d
::
’dl
;

645 
fout
 << " flßˆfGamma;" << 
¡d
::
’dl
;

646 
fout
 << "};" << 
¡d
::
’dl
;

647 
fout
 << "" << 
¡d
::
’dl
;

650 
fout
 << "šlšvoid " << 
şassName
 << "::In™Ÿlize(è" << 
¡d
::
’dl
;

651 
fout
 << "{" << 
¡d
::
’dl
;

652 
fout
 << " fB·¿m‘” = " << 
fB·rm
 << ";" << 
¡d
::
’dl
;

653 
fout
 << " fNOfSuµVeøğ" << 
fNsupv
 << ";" << 
¡d
::
’dl
;

654 
fout
 << " fGamm¨ğ" << 
fGamma
 << ";" <<
¡d
::
’dl
;

655 
fout
 << "}" << 
¡d
::
’dl
;

656 
fout
 << 
¡d
::
’dl
;

659 
fout
 << "šlšdoubË " << 
şassName
 << "::G‘MvaV®ue__(cÚ¡ std::veùÜ<doubË>& iÅutV®ue ècÚ¡" << 
¡d
::
’dl
;

660 
fout
 << "{" << 
¡d
::
’dl
;

661 
fout
 << " doubË mvav® = 0; " << 
¡d
::
’dl
;

662 
fout
 << " doubËem°ğ0; " << 
¡d
::
’dl
;

663 
fout
 << 
¡d
::
’dl
;

664 
fout
 << " fÜ (šˆ›vˆğ0; ievˆ< fNOfSuµVec; ievt++ ){" << 
¡d
::
’dl
;

665 
fout
 << "em°ğ0;" << 
¡d
::
’dl
;

666 
fout
 << " fÜ ( unsigÃd iÁ iv¬ = 0; iv¬ < G‘Nv¬(); iv¬++ ) {" << 
¡d
::
’dl
;

668 
fout
 << "em°+ğ(fAÎSuµVeùÜs[iv¬][›vt] - iÅutV®ues[iv¬]è " << 
¡d
::
’dl
;

669 
fout
 << " * (fAÎSuµVeùÜs[iv¬][›vt] - iÅutV®ues[iv¬]); " << 
¡d
::
’dl
;

670 
fout
 << " }" << 
¡d
::
’dl
;

671 
fout
 << " mvav® +ğfAÍhaTy³CÛf[›vt] *ƒxpĞ-fGamm¨*em°); " << 
¡d
::
’dl
;

673 
fout
 << " }" << 
¡d
::
’dl
;

674 
fout
 << " mvav® -ğfB·¿m‘”;" << 
¡d
::
’dl
;

675 
fout
 << "„‘uº 1./(1. +ƒxp(mvav®));" << 
¡d
::
’dl
;

676 
fout
 << "}" << 
¡d
::
’dl
;

677 
fout
 << "// CËª up" << 
¡d
::
’dl
;

678 
fout
 << "šlšvoid " << 
şassName
 << "::CË¬(è" << 
¡d
::
’dl
;

679 
fout
 << "{" << 
¡d
::
’dl
;

680 
fout
 << " //‚ÙhšgØş—¸" << 
¡d
::
’dl
;

681 
fout
 << "}" << 
¡d
::
’dl
;

682 
fout
 << "" << 
¡d
::
’dl
;

685 
fout
 << "æßˆ" << 
şassName
 << "::fAÍhaTy³CÛf[] =" << 
¡d
::
’dl
;

686 
fout
 << "{ ";

687 
IÁ_t
 
isv
 = 0; isv < 
fNsupv
; isv++) {

688 
fout
 << 
fSuµÜtVeùÜs
->
	`©
(
isv
)->
	`G‘D–AÍha
(è* fSuµÜtVeùÜs->©(isv)->
	`G‘Ty³FÏg
();

689 ià(
isv
 < 
fNsupv
-1è
fout
 << ", ";

691 
fout
 << " };" << 
¡d
::
’dl
 << std::endl;

693 
fout
 << "æßˆ" << 
şassName
 << "::fAÎSuµVeùÜs[][" << 
fNsupv
 << "] =" << 
¡d
::
’dl
;

694 
fout
 << "{";

695 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
	`G‘Nv¬
(); ivar++) {

696 
fout
 << 
¡d
::
’dl
;

697 
fout
 << " { ";

698 
IÁ_t
 
isv
 = 0; isv < 
fNsupv
; isv++){

699 
fout
 << 
fSuµÜtVeùÜs
->
	`©
(
isv
)->
	`G‘D©aVeùÜ
()->©(
iv¬
);

700 ià(
isv
 < 
fNsupv
-1è
fout
 << ", ";

702 
fout
 << " }";

703 ià(
iv¬
 < 
	`G‘Nv¬
()-1è
fout
 << ", " << 
¡d
::
’dl
;

704 
fout
 << 
¡d
::
’dl
;

706 
fout
 << "};" << 
¡d
::
’dl
<< std::endl;

707 
	}
}

715 
	gTMVA
::
M‘hodSVM
::
	$G‘H–pMes§ge
() const

717 
	`Log
(è<< 
Endl
;

718 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

719 
	`Log
(è<< 
Endl
;

720 
	`Log
(è<< "ThSuµÜˆVeùÜ Machš(SVMèbud ¨hy³½ÏÃ s•¬©šg" << 
Endl
;

721 
	`Log
(è<< "sigÇÈªd backgroundƒv’t (veùÜsèusšghmšim® sub£ˆoà" << 
Endl
;

722 
	`Log
(è<< "®ÈveùÜ u£d fÜ¿ššg (suµÜˆveùÜs). Thex‹nsiÚo" << 
Endl
;

723 
	`Log
(è<< "thnÚ-lš—¸ÿ£ i ³rfÜmed by m­pšg iÅuˆveùÜ štØ¨" << 
Endl
;

724 
	`Log
(è<< "high”-dim’siÚ® f—tu» s·û iÀwhich†š—¸£·¿tiÚ i " << 
Endl
;

725 
	`Log
(è<< "possibË. Thu£ oàthk”ÃÈfunùiÚ th”ebyƒlimš©e th" << 
Endl
;

726 
	`Log
(è<< "ex¶ic™¿nsfÜm©iÚØthã©u» s·û. Thim¶em’‹d SVM " << 
Endl
;

727 
	`Log
(è<< "®gÜ™hm…”fÜm thşassifiÿtiÚask usšg†š—r,…ŞynomŸl, " << 
Endl
;

728 
	`Log
(è<< "GaussŸÀªd sigmoid® k”ÃÈfunùiÚs. ThGaussŸÀk”ÃÈ®low " << 
Endl
;

729 
	`Log
(è<< "tØ­¶y‡ny disüimšªˆsh­šhšpuˆ¥aû." << 
Endl
;

730 
	`Log
(è<< 
Endl
;

731 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªû o±imi§tiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

732 
	`Log
(è<< 
Endl
;

733 
	`Log
(è<< "SVM i ¨g’”®…u½o£‚Ú-lš—¸şassifiÿtiÚ m‘hod, which " << 
Endl
;

734 
	`Log
(è<< "dÛ nÙ„equœd©¨´•roûssšg†ikdecÜ»ÏtiÚ o¸Pršc® " << 
Endl
;

735 
	`Log
(è<< "CompÚ’ˆAÇlysis. Iˆg’”®i£ qu™w–Èªd cª hªdË‡Çly£ " << 
Endl
;

736 
	`Log
(è<< "w™h†¬gnumb” oàšpuˆv¬ŸbËs." << 
Endl
;

737 
	`Log
(è<< 
Endl
;

738 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- P”fÜmªûunšg vŸ cÚfigu¿tiÚ o±iÚs:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

739 
	`Log
(è<< 
Endl
;

740 
	`Log
(è<< "O±im®…”fÜmªû„equœe ´im¬y‡…rİ” choiû oàthk”ÃÈ" << 
Endl
;

741 
	`Log
(è<< "·¿m‘” Ñhwidth \"Sigma\" iÀÿ£ oàGaussŸÀk”Ãlèªdhe" << 
Endl
;

742 
	`Log
(è<< "co¡…¬am‘” \"C\". Thu£¸mu¡ o±imi£hemƒmpœiÿÎy by„uÂšg" << 
Endl
;

743 
	`Log
(è<< "SVM sev”®ime w™h difã»Á…¬am‘” s‘s. ThtimÃeded fÜ " << 
Endl
;

744 
	`Log
(è<< "—chƒv®u©iÚ sÿË likthsqu¬oàthnumb” oàŒaššg " << 
Endl
;

745 
	`Log
(è<< "ev’t sØth©‡ cßr£…»limš¬yunšg should b³rfÜmed oÀ" << 
Endl
;

746 
	`Log
(è<< "»duûd d©¨£ts." << 
Endl
;

747 
	}
}

760 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gTMVA
::
M‘hodSVM
::
	$O±imizeTunšgP¬am‘”s
(
TSŒšg
 
fomTy³
, TSŒšg 
f™Ty³
)

763 
¡d
::
m­
< 
TSŒšg
,¡d::
veùÜ
<
DoubË_t
> > 
İtV¬s
;

765 if(
fTuÃ
 != "All"){

766 
İtV¬s
ğ
	`G‘TunšgO±iÚs
();

768 
¡d
::
m­
< 
TSŒšg
,¡d::
veùÜ
<
DoubË_t
> >::
™”©Ü
 
™”
;

770 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*> 
tuÃP¬am‘”s
;

771 
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
tuÃdP¬am‘”s
;

774 
	`Log
(è<< 
kINFO
 << "Usšgh" << 
fTheK”Ãl
 << " k”Ãl." << 
Endl
;

776 ifĞ
fTheK”Ãl
 == "RBF" ){

777 if(
fTuÃ
 == "All"){

778 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Gamma",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

779 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("C",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

782 
™”
=
İtV¬s
.
	`begš
(); i‹r!=İtV¬s.
	`’d
(); iter++){

783 ifĞ
™”
->
fœ¡
 == "Gamma" || iter->first == "C"){

784 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
™”
->
fœ¡
, 
Ãw
 
	`IÁ”v®
(™”->
£cÚd
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

787 
	`Log
(è<< 
kWARNING
 << 
™”
->
fœ¡
 << " i nÙ‡„ecogni£duÃabË…¬am‘”." << 
Endl
;

788 
	`ex™
(1);

793 ifĞ
fTheK”Ãl
 == "Polynomial" ){

794 ià(
fTuÃ
 == "All"){

795 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Ord”", 
Ãw
 
	`IÁ”v®
(1,10,10)));

796 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Th‘a", 
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

797 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("C", 
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

800 
™”
=
İtV¬s
.
	`begš
(); i‹r!=İtV¬s.
	`’d
(); iter++){

801 ifĞ
™”
->
fœ¡
 == "Theta" || iter->first == "C"){

802 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
™”
->
fœ¡
, 
Ãw
 
	`IÁ”v®
(™”->
£cÚd
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

804 ifĞ
™”
->
fœ¡
 == "Order"){

805 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
™”
->
fœ¡
, 
Ãw
 
	`IÁ”v®
(™”->
£cÚd
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

808 
	`Log
(è<< 
kWARNING
 << 
™”
->
fœ¡
 << " i nÙ‡„ecogni£duÃabË…¬am‘”." << 
Endl
;

809 
	`ex™
(1);

814 ifĞ
fTheK”Ãl
 == "MultiGauss" ){

815 ià(
fTuÃ
 == "All"){

816 
i
=0; i<
fNumV¬s
; i++){

817 
¡ršg¡»am
 
s
;

818 
s
 << 
fV¬Names
.
	`©
(
i
);

819 
¡ršg
 
¡r
 = "Gamma_" + 
s
.
	`¡r
();

820 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
¡r
,
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

822 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("C",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

824 
™”
=
İtV¬s
.
	`begš
(); i‹r!=İtV¬s.
	`’d
(); iter++){

825 ifĞ
™”
->
fœ¡
 == "GammaList"){

826 
j
=0; j<
fNumV¬s
; j++){

827 
¡ršg¡»am
 
s
;

828 
s
 << 
fV¬Names
.
	`©
(
j
);

829 
¡ršg
 
¡r
 = "Gamma_" + 
s
.
	`¡r
();

830 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
¡r
, 
Ãw
 
	`IÁ”v®
(
™”
->
£cÚd
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

833 ifĞ
™”
->
fœ¡
 == "C"){

834 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
™”
->
fœ¡
, 
Ãw
 
	`IÁ”v®
(™”->
£cÚd
.
	`©
(0),iter->second.at(1),iter->second.at(2))));

837 
	`Log
(è<< 
kWARNING
 << 
™”
->
fœ¡
 << " i nÙ‡„ecogni£duÃabË…¬am‘”." << 
Endl
;

838 
	`ex™
(1);

843 ifĞ
fTheK”Ãl
 == "Prod" ){

844 
¡d
::
¡ršg¡»am
 
	`‹mp¡ršg
(
fMuÉiK”Ãls
);

845 
¡d
::
¡ršg
 
v®ue
;

846 
¡d
::
	`g‘lše
(
‹mp¡ršg
,
v®ue
,'*')){

847 if(
v®ue
 == "RBF"){

848 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Gamma",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

850 if(
v®ue
 == "MultiGauss"){

851 
i
=0; i<
fNumV¬s
; i++){

852 
¡ršg¡»am
 
s
;

853 
s
 << 
fV¬Names
.
	`©
(
i
);

854 
¡ršg
 
¡r
 = "Gamma_" + 
s
.
	`¡r
();

855 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
¡r
,
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

858 if(
v®ue
 == "Polynomial"){

859 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Ord”",
Ãw
 
	`IÁ”v®
(1,10,10)));

860 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Th‘a",
Ãw
 
	`IÁ”v®
(0.0,1.0,101)));

863 
	`Log
(è<< 
kWARNING
 << 
v®ue
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

864 
	`ex™
(1);

867 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("C",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

869 ifĞ
fTheK”Ãl
 == "Sum" ){

870 
¡d
::
¡ršg¡»am
 
	`‹mp¡ršg
(
fMuÉiK”Ãls
);

871 
¡d
::
¡ršg
 
v®ue
;

872 
¡d
::
	`g‘lše
(
‹mp¡ršg
,
v®ue
,'+')){

873 if(
v®ue
 == "RBF"){

874 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Gamma",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

876 if(
v®ue
 == "MultiGauss"){

877 
i
=0; i<
fNumV¬s
; i++){

878 
¡ršg¡»am
 
s
;

879 
s
 << 
fV¬Names
.
	`©
(
i
);

880 
¡ršg
 
¡r
 = "Gamma_" + 
s
.
	`¡r
();

881 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>(
¡r
,
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

884 if(
v®ue
 == "Polynomial"){

885 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Ord”",
Ãw
 
	`IÁ”v®
(1,10,10)));

886 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("Th‘a",
Ãw
 
	`IÁ”v®
(0.0,1.0,101)));

889 
	`Log
(è<< 
kWARNING
 << 
v®ue
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

890 
	`ex™
(1);

893 
tuÃP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
IÁ”v®
*>("C",
Ãw
 
	`IÁ”v®
(0.01,1.,100)));

896 
	`Log
(è<< 
kWARNING
 << 
fTheK”Ãl
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

897 
	`ex™
(1);

899 
	`Log
(è<< 
kINFO
 << "hfŞlowšg SVM…¬am‘” wÈbtuÃd oÀth»¥eùiv*grid*\n" << 
Endl
;

900 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

901 
™
=
tuÃP¬am‘”s
.
	`begš
(); it!ñuÃP¬am‘”s.
	`’d
(); it++){

902 
	`Log
(è<< 
kWARNING
 << 
™
->
fœ¡
 <<
Endl
;

903 
¡d
::
o¡ršg¡»am
 
oss
;

904 (
™
->
£cÚd
)->
	`Pršt
(
oss
);

905 
	`Log
()<<
oss
.
	`¡r
();

906 
	`Log
()<<
Endl
;

908 
O±imizeCÚfigP¬am‘”s
 
	`İtimize
(
this
, 
tuÃP¬am‘”s
, 
fomTy³
, 
f™Ty³
);

909 
tuÃdP¬am‘”s
=
İtimize
.
	`İtimize
();

911  
tuÃdP¬am‘”s
;

913 
	}
}

917 
	gTMVA
::
M‘hodSVM
::
S‘TuÃP¬am‘”s
(
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
tuÃP¬am‘”s
)

919 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
>::
™”©Ü
 
™
;

920 ifĞ
	gfTheK”Ãl
 == "RBF" ){

921 
™
=
tuÃP¬am‘”s
.
begš
(); 
	g™
!ñuÃP¬am‘”s.
’d
(); it++){

922 
Log
(è<< 
	gkWARNING
 << 
	g™
->
	gfœ¡
 << " = " << it->
	g£cÚd
 << 
	gEndl
;

923 ià(
	g™
->
	gfœ¡
 == "Gamma"){

924 
S‘Gamma
 (
™
->
£cÚd
);

926 if(
	g™
->
	gfœ¡
 == "C"){

927 
S‘Co¡
 (
™
->
£cÚd
);

930 
Log
(è<< 
	gkFATAL
 << " S‘P¬am‘” fÜ " << 
	g™
->
	gfœ¡
 << "‚Ù im¶em’‹d " << 
	gEndl
;

934 ifĞ
	gfTheK”Ãl
 == "MultiGauss" ){

935 
fmGamma
.
ş—r
();

936 
	gi
=0; i<
	gfNumV¬s
; i++){

937 
¡ršg¡»am
 
	gs
;

938 
	gs
 << 
	gfV¬Names
.
©
(
i
);

939 
¡ršg
 
	g¡r
 = "Gamma_" + 
s
.
¡r
();

940 
Log
(è<< 
	gkWARNING
 << 
	gtuÃP¬am‘”s
.
fšd
(
¡r
)->
	gfœ¡
 << " = " <<uÃP¬am‘”s.fšd(¡r)->
	g£cÚd
 << 
	gEndl
;

941 
	gfmGamma
.
push_back
(
tuÃP¬am‘”s
.
fšd
(
¡r
)->
£cÚd
);

943 
	g™
=
tuÃP¬am‘”s
.
begš
(); it!ñuÃP¬am‘”s.
’d
(); it++){

944 ià(
	g™
->
	gfœ¡
 == "C"){

945 
Log
(è<< 
kWARNING
 << 
™
->
fœ¡
 << " = " << it->
£cÚd
 << 
Endl
;

946 
S‘Co¡
(
™
->
£cÚd
);

951 ifĞ
	gfTheK”Ãl
 == "Polynomial" ){

952 
™
=
tuÃP¬am‘”s
.
begš
(); 
	g™
!ñuÃP¬am‘”s.
’d
(); it++){

953 
Log
(è<< 
	gkWARNING
 << 
	g™
->
	gfœ¡
 << " = " << it->
	g£cÚd
 << 
	gEndl
;

954 ià(
	g™
->
	gfœ¡
 == "Order"){

955 
S‘Ord”
(
™
->
£cÚd
);

957 ià(
	g™
->
	gfœ¡
 == "Theta"){

958 
S‘Th‘a
(
™
->
£cÚd
);

960 if(
	g™
->
	gfœ¡
 =ğ"C"){ 
S‘Co¡
 (
™
->
£cÚd
);

962 if(
	g™
->
	gfœ¡
 == "Mult"){

963 
S‘MuÉ
(
™
->
£cÚd
);

966 
Log
(è<< 
	gkFATAL
 << " S‘P¬am‘” fÜ " << 
	g™
->
	gfœ¡
 << "‚Ù im¶em’‹d " << 
	gEndl
;

970 ifĞ
	gfTheK”Ãl
 =ğ"Prod" || 
fTheK”Ãl
 == "Sum"){

971 
fmGamma
.
ş—r
();

972 
	g™
=
tuÃP¬am‘”s
.
begš
(); it!ñuÃP¬am‘”s.
’d
(); it++){

973 
boŞ
 
	gfoundP¬am
 = 
çl£
;

974 
Log
(è<< 
	gkWARNING
 << 
	g™
->
	gfœ¡
 << " = " << it->
	g£cÚd
 << 
	gEndl
;

975 
	gi
=0; i<
	gfNumV¬s
; i++){

976 
¡ršg¡»am
 
	gs
;

977 
	gs
 << 
	gfV¬Names
.
©
(
i
);

978 
¡ršg
 
	g¡r
 = "Gamma_" + 
s
.
¡r
();

979 if(
	g™
->
	gfœ¡
 =ğ
¡r
){

980 
fmGamma
.
push_back
(
™
->
£cÚd
);

981 
	gfoundP¬am
 = 
Œue
;

984 ià(
	g™
->
	gfœ¡
 == "Gamma"){

985 
S‘Gamma
 (
™
->
£cÚd
);

986 
	gfoundP¬am
 = 
Œue
;

988 ià(
	g™
->
	gfœ¡
 == "Order"){

989 
S‘Ord”
 (
™
->
£cÚd
);

990 
	gfoundP¬am
 = 
Œue
;

992 ià(
	g™
->
	gfœ¡
 == "Theta"){

993 
S‘Th‘a
 (
™
->
£cÚd
);

994 
	gfoundP¬am
 = 
Œue
;

996 ià(
	g™
->
	gfœ¡
 =ğ"C"){ 
S‘Co¡
 (
™
->
£cÚd
);

997 
S‘Co¡
 (
™
->
£cÚd
);

998 
	gfoundP¬am
 = 
Œue
;

1001 if(!
	gfoundP¬am
){

1002 
Log
(è<< 
	gkFATAL
 << " S‘P¬am‘” fÜ " << 
	g™
->
	gfœ¡
 << "‚Ù im¶em’‹d " << 
	gEndl
;

1008 
Log
(è<< 
	gkWARNING
 << 
	gfTheK”Ãl
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
	gEndl
;

1009 
ex™
(1);

1018 
	gTMVA
::
M‘hodSVM
::
	$S‘MGamma
(
¡d
::
¡ršg
 & 
mg
){

1019 
¡d
::
¡ršg¡»am
 
	`‹mp¡ršg
(
mg
);

1020 
Flßt_t
 
v®ue
;

1021 
‹mp¡ršg
 >> 
v®ue
){

1022 
fmGamma
.
	`push_back
(
v®ue
);

1024 ià(
‹mp¡ršg
.
	`³ek
() == ','){

1025 
‹mp¡ršg
.
	`ignÜe
();

1028 
	}
}

1032 
	gTMVA
::
M‘hodSVM
::
G‘MGamma
(cÚ¡ 
¡d
::
veùÜ
<> & 
gammas
){

1033 
¡d
::
o¡ršg¡»am
 
‹mp¡ršg
;

1034 
UIÁ_t
 
	gi
 = 0; i<
	ggammas
.
size
(); ++i){

1035 
	g‹mp¡ršg
 << 
	ggammas
.
©
(
i
);

1036 if(
	gi
!=(
gammas
.
size
()-1)){

1037 
‹mp¡ršg
 << ",";

1040 
	gfGammaLi¡
ğ
‹mp¡ršg
.
¡r
();

1054 
	g¡d
::
veùÜ
<
TMVA
::
SVK”ÃlFunùiÚ
::
EK”ÃlTy³
> TMVA::
M‘hodSVM
::
	$MakeK”ÃlLi¡
(
¡d
::
¡ršg
 
muÉiK”Ãls
, 
TSŒšg
 
k”Ãl
)

1056 
¡d
::
veùÜ
<
TMVA
::
SVK”ÃlFunùiÚ
::
EK”ÃlTy³
> 
k”ÃlsLi¡
;

1057 
¡d
::
¡ršg¡»am
 
	`‹mp¡ršg
(
muÉiK”Ãls
);

1058 
¡d
::
¡ršg
 
v®ue
;

1059 if(
k”Ãl
=="Prod"){

1060 
¡d
::
	`g‘lše
(
‹mp¡ršg
,
v®ue
,'*')){

1061 if(
v®ue
 =ğ"RBF"){ 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kRBF
);}

1062 if(
v®ue
 == "MultiGauss"){

1063 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kMuÉiGauss
);

1064 if(
fGammas
!=""){

1065 
	`S‘MGamma
(
fGammas
);

1068 if(
v®ue
 =ğ"PŞynomŸl"){ 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kPŞynomŸl
);}

1070 
	`Log
(è<< 
kWARNING
 << 
v®ue
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

1071 
	`ex™
(1);

1075 if(
k”Ãl
=="Sum"){

1076 
¡d
::
	`g‘lše
(
‹mp¡ršg
,
v®ue
,'+')){

1077 if(
v®ue
 =ğ"RBF"){ 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kRBF
);}

1078 if(
v®ue
 == "MultiGauss"){

1079 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kMuÉiGauss
);

1080 if(
fGammas
!=""){

1081 
	`S‘MGamma
(
fGammas
);

1084 if(
v®ue
 =ğ"PŞynomŸl"){ 
k”ÃlsLi¡
.
	`push_back
(
SVK”ÃlFunùiÚ
::
kPŞynomŸl
);}

1086 
	`Log
(è<< 
kWARNING
 << 
v®ue
 << " i nÙ‡„ecogni£d k”ÃÈfunùiÚ." << 
Endl
;

1087 
	`ex™
(1);

1092 
	`Log
(è<< 
kWARNING
 << "UÇbËØ¥l™ MuÉiK”Ãls. D–im™” */+„equœed." << 
Endl
;

1093 
	`ex™
(1);

1095  
k”ÃlsLi¡
;

1096 
	}
}

1106 
	g¡d
::
m­
< 
TSŒšg
,¡d::
veùÜ
<
DoubË_t
> > 
TMVA
::
M‘hodSVM
::
	$G‘TunšgO±iÚs
()

1108 
¡d
::
m­
< 
TSŒšg
,¡d::
veùÜ
<
DoubË_t
> > 
İtV¬s
;

1109 
¡d
::
¡ršg¡»am
 
	`‹mp¡ršg
(
fTuÃ
);

1110 
¡d
::
¡ršg
 
v®ue
;

1111 
¡d
::
	`g‘lše
(
‹mp¡ršg
,
v®ue
,',')){

1112 
fœ¡
 = 
v®ue
.
	`fšd
('[')+1;

1113 
Ï¡
 = 
v®ue
.
	`fšd_Ï¡_of
(']');

1114 
¡d
::
¡ršg
 
İtP¬am
 = 
v®ue
.
	`sub¡r
(0,
fœ¡
-1);

1115 
¡d
::
¡ršg¡»am
 
	`¡rNew
 (
v®ue
.
	`sub¡r
(
fœ¡
,
Ï¡
-first));

1116 
DoubË_t
 
İtIÁ”v®
;

1117 
¡d
::
veùÜ
<
DoubË_t
> 
‹mpVec
;

1118 
UIÁ_t
 
i
 = 0;

1119 
¡rNew
 >> 
İtIÁ”v®
){

1120 
‹mpVec
.
	`push_back
(
İtIÁ”v®
);

1121 ià(
¡rNew
.
	`³ek
() == ';'){

1122 
¡rNew
.
	`ignÜe
();

1124 ++
i
;

1126 if(
i
 !ğ3 && i =ğ
‹mpVec
.
	`size
()){

1127 if(
İtP¬am
 == "C" || optParam == "Gamma" || optParam == "GammaList" || optParam == "Theta"){

1128 
i
){

1130 
‹mpVec
.
	`push_back
(0.01);

1132 
‹mpVec
.
	`push_back
(1.);

1134 
‹mpVec
.
	`push_back
(100);

1137 if(
İtP¬am
 == "Order"){

1138 
i
){

1140 
‹mpVec
.
	`push_back
(1);

1142 
‹mpVec
.
	`push_back
(10);

1144 
‹mpVec
.
	`push_back
(10);

1148 
	`Log
(è<< 
kWARNING
 << 
İtP¬am
 << " i nÙ‡„ecogni£duÃabË…¬am‘”." << 
Endl
;

1149 
	`ex™
(1);

1152 
İtV¬s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,¡d::
veùÜ
<
DoubË_t
> >(
İtP¬am
,
‹mpVec
));

1154  
İtV¬s
;

1155 
	}
}

1163 
DoubË_t
 
	gTMVA
::
M‘hodSVM
::
	$g‘Loss
(
TSŒšg
 
lossFunùiÚ
){

1164 
DoubË_t
 
loss
 = 0.0;

1165 
DoubË_t
 
sumW
 = 0.0;

1166 
DoubË_t
 
‹mp
 = 0.0;

1167 
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

1168 
ResuÉsCÏssifiÿtiÚ
* 
mvaRes
 = 
dyÇmic_ÿ¡
<ResuÉsCÏssifiÿtiÚ*> ( 
	`D©a
()->
	`G‘ResuÉs
(
	`G‘M‘hodName
(),
Ty³s
::
kTe¡šg
, Ty³s::
kCÏssifiÿtiÚ
) );

1169 
LÚg64_t
 
›vt
=0; ievt<
	`G‘NEv’ts
(); ievt++) {

1170 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
(
›vt
);

1171 
Flßt_t
 
v
 = (*
mvaRes
)[
›vt
][0];

1172 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

1173 if(
	`D©aInfo
().
	`IsSigÇl
(
ev
)){

1174 if(
lossFunùiÚ
 == "hinge"){

1175 
‹mp
 +ğ
w
*(1-
v
);

1177 if(
lossFunùiÚ
 == "exp"){

1178 
‹mp
 +ğ
w
*
TM©h
::
	`Exp
(-
v
);

1180 if(
lossFunùiÚ
 == "binomial"){

1181 
‹mp
 +ğ
w
*
TM©h
::
	`Log
(1+TM©h::
	`Exp
(-2*
v
));

1184 
	`Log
(è<< 
kWARNING
 << 
lossFunùiÚ
 << " i nÙ‡„ecogni£d†os funùiÚ." << 
Endl
;

1185 
	`ex™
(1);

1189 if(
lossFunùiÚ
 == "hinge"){

1190 
‹mp
 +ğ
w
*
v
;

1192 if(
lossFunùiÚ
 == "exp"){

1193 
‹mp
 +ğ
w
*
TM©h
::
	`Exp
(-(1-
v
));

1195 if(
lossFunùiÚ
 == "binomial"){

1196 
‹mp
 +ğ
w
*
TM©h
::
	`Log
(1+TM©h::
	`Exp
(-2*(1-
v
)));

1199 
	`Log
(è<< 
kWARNING
 << 
lossFunùiÚ
 << " i nÙ‡„ecogni£d†os funùiÚ." << 
Endl
;

1200 
	`ex™
(1);

1203 
sumW
 +ğ
w
;

1205 
loss
 = 
‹mp
/
sumW
;

1207  
loss
;

1208 
	}
}

	@src/MethodTMlpANN.cxx

46 
	~"TMVA/M‘hodTMÍANN.h
"

48 
	~"TMVA/CÚfig.h
"

49 
	~"TMVA/CÚfigu¿bË.h
"

50 
	~"TMVA/D©aS‘.h
"

51 
	~"TMVA/D©aS‘Info.h
"

52 
	~"TMVA/IM‘hod.h
"

53 
	~"TMVA/M‘hodBa£.h
"

54 
	~"TMVA/MsgLogg”.h
"

55 
	~"TMVA/Ty³s.h
"

56 
	~"TMVA/V¬ŸbËInfo.h
"

58 
	~"TMVA/CÏssif›rFaùÜy.h
"

59 
	~"TMVA/ToŞs.h
"

61 
	~"Rio¡»am.h
"

62 
	~"TL—f.h
"

63 
	~"TEv’tLi¡.h
"

64 
	~"TObjSŒšg.h
"

65 
	~"TROOT.h
"

66 
	~"TMuÉiLay”P”û±rÚ.h
"

68 
	~<c¡dlib
>

69 
	~<io¡»am
>

70 
	~<f¡»am
>

73 
usšg
 
	g¡d
::
©oi
;

76 cÚ¡ 
BoŞ_t
 
	gEnfÜûNÜm®iz©iÚ__
=
kTRUE
;

77 #ià
ROOT_VERSION_CODE
 > 
ROOT_VERSION
(5,13,06)

84 
	$REGISTER_METHOD
(
TMÍANN
)

86 
	`CÏssImp
(
TMVA
::
M‘hodTMÍANN
);

91 
TMVA
::
M‘hodTMÍANN
::
	$M‘hodTMÍANN
ĞcÚ¡ 
TSŒšg
& 
jobName
,

92 cÚ¡ 
TSŒšg
& 
m‘hodT™Ë
,

93 
D©aS‘Info
& 
theD©a
,

94 cÚ¡ 
TSŒšg
& 
theO±iÚ
) :

95 
TMVA
::
	`M‘hodBa£
Ğ
jobName
, 
Ty³s
::
kTMÍANN
, 
m‘hodT™Ë
, 
theD©a
, 
theO±iÚ
),

96 
	`fMLP
(0),

97 
	`fLoÿlT¿ššgT»e
(0),

98 
	`fNcyşes
(100),

99 
	`fV®id©iÚF¿ùiÚ
(0.5),

100 
	`fL—ºšgM‘hod
( "" )

102 
	}
}

107 
	gTMVA
::
M‘hodTMÍANN
::
	$M‘hodTMÍANN
Ğ
D©aS‘Info
& 
theD©a
,

108 cÚ¡ 
TSŒšg
& 
theWeightFe
) :

109 
TMVA
::
	`M‘hodBa£
Ğ
Ty³s
::
kTMÍANN
, 
theD©a
, 
theWeightFe
),

110 
	`fMLP
(0),

111 
	`fLoÿlT¿ššgT»e
(0),

112 
	`fNcyşes
(100),

113 
	`fV®id©iÚF¿ùiÚ
(0.5),

114 
	`fL—ºšgM‘hod
( "" )

116 
	}
}

121 
BoŞ_t
 
	gTMVA
::
M‘hodTMÍANN
::
	$HasAÇlysisTy³
Ğ
Ty³s
::
EAÇlysisTy³
 
ty³
, 
UIÁ_t
 
numb”CÏs£s
,

122 
UIÁ_t
 )

124 ià(
ty³
 =ğ
Ty³s
::
kCÏssifiÿtiÚ
 && 
numb”CÏs£s
 =ğ2è 
kTRUE
;

125  
kFALSE
;

126 
	}
}

132 
	gTMVA
::
M‘hodTMÍANN
::
	$In™
( )

134 
	}
}

139 
TMVA
::
M‘hodTMÍANN
::~
	$M‘hodTMÍANN
( )

141 ià(
fMLP
è
d–‘e
 fMLP;

142 
	}
}

147 
	gTMVA
::
M‘hodTMÍANN
::
	$C»©eMLPO±iÚs
Ğ
TSŒšg
 
Ïy”S³c
 )

149 
fHidd’Lay”
 = ":";

151 
Ïy”S³c
.
	`L’gth
()>0) {

152 
TSŒšg
 
sToAdd
="";

153 ià(
Ïy”S³c
.
	`Fœ¡
(',')<0) {

154 
sToAdd
 = 
Ïy”S³c
;

155 
Ïy”S³c
 = "";

158 
sToAdd
 = 
	`Ïy”S³c
(0,
Ïy”S³c
.
	`Fœ¡
(','));

159 
Ïy”S³c
 = 
	`Ïy”S³c
Öay”S³c.
	`Fœ¡
(',')+1,Ïy”S³c.
	`L’gth
());

161 
nNodes
 = 0;

162 ià(
sToAdd
.
	`BegšsW™h
("N")è{ sToAdd.
	`Remove
(0,1); 
nNodes
 = 
	`G‘Nv¬
(); }

163 
nNodes
 +ğ
	`©oi
(
sToAdd
);

164 
fHidd’Lay”
 = 
	`FÜm
Ğ"%s%i:", (cÚ¡ *)fHidd’Lay”, 
nNodes
 );

168 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™rV¬
 = (*
fIÅutV¬s
).
	`begš
();

169 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™rV¬End
 = (*
fIÅutV¬s
).
	`’d
();

170 
fMLPBudO±iÚs
 = "";

171 ; 
™rV¬
 !ğ
™rV¬End
; itrVar++) {

172 ià(
EnfÜûNÜm®iz©iÚ__
è
fMLPBudO±iÚs
 += "@";

173 
TSŒšg
 
myV¬
 = *
™rV¬
; ;

174 
fMLPBudO±iÚs
 +ğ
myV¬
;

175 
fMLPBudO±iÚs
 += ",";

177 
fMLPBudO±iÚs
.
	`Chİ
();

180 
fMLPBudO±iÚs
 +ğ
fHidd’Lay”
;

181 
fMLPBudO±iÚs
 += "type";

183 
	`Log
(è<< 
kINFO
 << "U£ " << 
fNcyşes
 << "¿ššg cyşes" << 
Endl
;

184 
	`Log
(è<< 
kINFO
 << "U£ cÚfigu¿tiÚ (node ³¸hidd’†ay”): " << 
fHidd’Lay”
 << 
Endl
;

185 
	}
}

202 
	gTMVA
::
M‘hodTMÍANN
::
	$Deş¬eO±iÚs
()

204 
	`Deş¬eO±iÚRef
Ğ
fNcyşes
 = 200, "NCycles", "Number ofraining cycles" );

205 
	`Deş¬eO±iÚRef
Ğ
fLay”S³c
 = "N,N-1", "HiddenLayers", "Specification of hidden†ayer‡rchitecture (N stands for‚umber of variables;‡ny integers may‡lso be used)" );

207 
	`Deş¬eO±iÚRef
Ğ
fV®id©iÚF¿ùiÚ
 = 0.5, "ValidationFraction",

210 
	`Deş¬eO±iÚRef
Ğ
fL—ºšgM‘hod
 = "Stochastic", "LearningMethod", "Learning method" );

211 
	`AddP»DefV®
Ğ
	`TSŒšg
("Stochastic") );

212 
	`AddP»DefV®
Ğ
	`TSŒšg
("Batch") );

213 
	`AddP»DefV®
Ğ
	`TSŒšg
("SteepestDescent") );

214 
	`AddP»DefV®
Ğ
	`TSŒšg
("RibierePolak") );

215 
	`AddP»DefV®
Ğ
	`TSŒšg
("FletcherReeves") );

216 
	`AddP»DefV®
Ğ
	`TSŒšg
("BFGS") );

217 
	}
}

222 
	gTMVA
::
M‘hodTMÍANN
::
	$ProûssO±iÚs
()

224 
	`C»©eMLPO±iÚs
(
fLay”S³c
);

226 ià(
	`IgnÜeEv’tsW™hNegWeightsInT¿ššg
()) {

227 
	`Log
(è<< 
kFATAL
 << "Mechanismo ignoreƒvents with‚egative weights inraining‚ot‡vailable for method"

228 << 
	`G‘M‘hodTy³Name
()

230 << 
Endl
;

232 
	}
}

237 
DoubË_t
 
	gTMVA
::
M‘hodTMÍANN
::
	$G‘MvaV®ue
Ğ
DoubË_t
* 
”r
, DoubË_t* 
”rUµ”
 )

239 cÚ¡ 
Ev’t
* 
ev
 = 
	`G‘Ev’t
();

240 
	`TTHREAD_TLS_DECL_ARG
(
DoubË_t
*, 
d
, 
Ãw
 DoubË_t[
	`D©a
()->
	`G‘NV¬ŸbËs
()]);

242 
UIÁ_t
 
iv¬
 = 0; iv¬<
	`D©a
()->
	`G‘NV¬ŸbËs
(); ivar++) {

243 
d
[
iv¬
] = (
DoubË_t
)
ev
->
	`G‘V®ue
(ivar);

245 
DoubË_t
 
mvaV®
 = 
fMLP
->
	`Ev®u©e
(0,
d
);

248 
	`NoE¼ÜC®c
(
”r
, 
”rUµ”
);

250  
mvaV®
;

251 
	}
}

267 
	gTMVA
::
M‘hodTMÍANN
::
	$T¿š
( )

269 
IÁ_t
 
ty³
;

270 
Flßt_t
 
weight
;

271 cÚ¡ 
LÚg_t
 
bask‘size
 = 128000;

272 
Flßt_t
* 
vA¼
 = 
Ãw
 Flßt_t[
	`G‘Nv¬
()];

274 
TT»e
 *
loÿlT¿ššgT»e
 = 
Ãw
 
	`TT»e
( "TMLPtrain", "Localrainingree for TMlpANN" );

275 
loÿlT¿ššgT»e
->
	`B¿nch
Ğ"ty³", &
ty³
, "ty³/I", 
bask‘size
 );

276 
loÿlT¿ššgT»e
->
	`B¿nch
Ğ"weight", &
weight
, "weight/F", 
bask‘size
 );

278 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘Nv¬
(); ivar++) {

279 cÚ¡ * 
myV¬
 = 
	`G‘IÁ”ÇlV¬Name
(
iv¬
).
	`D©a
();

280 
loÿlT¿ššgT»e
->
	`B¿nch
Ğ
myV¬
, &
vA¼
[
iv¬
], 
	`FÜm
("V¬%02i/F", iv¬), 
bask‘size
 );

283 
UIÁ_t
 
›vt
=0; ievt<
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

284 cÚ¡ 
Ev’t
 *
ev
 = 
	`G‘Ev’t
(
›vt
);

285 
UIÁ_t
 
i
=0; i<
	`G‘Nv¬
(); i++) {

286 
vA¼
[
i
] = 
ev
->
	`G‘V®ue
( i );

288 
ty³
 = 
	`D©aInfo
().
	`IsSigÇl
Ğ
ev
 ) ? 1 : 0;

289 
weight
 = 
ev
->
	`G‘Weight
();

290 
loÿlT¿ššgT»e
->
	`Fl
();

297 
TSŒšg
 
ŒašLi¡
 = "Entry$<";

298 
ŒašLi¡
 +ğ1.0-
fV®id©iÚF¿ùiÚ
;

299 
ŒašLi¡
 += "*";

300 
ŒašLi¡
 +ğ(
IÁ_t
)
	`D©a
()->
	`G‘NEvtSigT¿š
();

301 
ŒašLi¡
 += " || (Entry$>";

302 
ŒašLi¡
 +ğ(
IÁ_t
)
	`D©a
()->
	`G‘NEvtSigT¿š
();

303 
ŒašLi¡
 += " && Entry$<";

304 
ŒašLi¡
 +ğ(
IÁ_t
)(
	`D©a
()->
	`G‘NEvtSigT¿š
(è+ (1.0 - 
fV®id©iÚF¿ùiÚ
)*D©a()->
	`G‘NEvtBkgdT¿š
());

305 
ŒašLi¡
 += ")";

306 
TSŒšg
 
‹¡Li¡
 = 
	`TSŒšg
("!("è+ 
ŒašLi¡
 + ")";

309 
	`Log
(è<< 
kHEADER
 << "Requœem’ˆfÜ¿ššgƒv’ts: \"" << 
ŒašLi¡
 << "\"" << 
Endl
;

310 
	`Log
(è<< 
kINFO
 << "Requœem’ˆfÜ v®id©iÚƒv’ts: \"" << 
‹¡Li¡
 << "\"" << 
Endl
;

315 ià(
fMLP
 !ğ0è{ 
d–‘e
 fMLP; fMLP = 0; }

316 
fMLP
 = 
Ãw
 
	`TMuÉiLay”P”û±rÚ
Ğ
fMLPBudO±iÚs
.
	`D©a
(),

317 
loÿlT¿ššgT»e
,

318 
ŒašLi¡
,

319 
‹¡Li¡
 );

320 
fMLP
->
	`S‘Ev’tWeight
( "weight" );

323 #ià
ROOT_VERSION_CODE
 > 
	`ROOT_VERSION
(5,13,06)

324 
TMuÉiLay”P”û±rÚ
::
EL—ºšgM‘hod
 
Ë¬nšgM‘hod
 = TMuÉiLay”P”û±rÚ::
kStocha¡ic
;

326 
TMuÉiLay”P”û±rÚ
::
L—ºšgM‘hod
 
Ë¬nšgM‘hod
 = TMuÉiLay”P”û±rÚ::
kStocha¡ic
;

329 
fL—ºšgM‘hod
.
	`ToLow”
();

330 ià(
fL—ºšgM‘hod
 =ğ"¡ocha¡ic" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kStocha¡ic
;

331 ià(
fL—ºšgM‘hod
 =ğ"b©ch" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kB©ch
;

332 ià(
fL—ºšgM‘hod
 =ğ"¡“³¡desûÁ" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kS‹•e¡DesûÁ
;

333 ià(
fL—ºšgM‘hod
 =ğ"rib›»pŞak" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kRib›»PŞak
;

334 ià(
fL—ºšgM‘hod
 =ğ"æ‘ch”»eves" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kFËtch”R“ves
;

335 ià(
fL—ºšgM‘hod
 =ğ"bfgs" ) 
Ë¬nšgM‘hod
 = 
TMuÉiLay”P”û±rÚ
::
kBFGS
;

337 
	`Log
(è<< 
kFATAL
 << "UnknowÀL—ºšg M‘hod: \"" << 
fL—ºšgM‘hod
 << "\"" << 
Endl
;

339 
fMLP
->
	`S‘L—ºšgM‘hod
Ğ
Ë¬nšgM‘hod
 );

342 
fMLP
->
	`T¿š
(
fNcyşes
, "" );

346 
d–‘e
 
loÿlT¿ššgT»e
;

347 
d–‘e
 [] 
vA¼
;

348 
	}
}

353 
	gTMVA
::
M‘hodTMÍANN
::
	$AddWeightsXMLTo
Ğ* 
·»Á
 ) const

356 *
wght
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Weights");

357 * 
¬ch
 = 
	`gToŞs
().
	`AddChd
Ğ
wght
, "Architecture" );

358 
	`gToŞs
().
	`AddA‰r
Ğ
¬ch
, "BudO±iÚs", 
fMLPBudO±iÚs
.
	`D©a
() );

361 cÚ¡ 
TSŒšg
 
tmpfe
=
	`G‘WeightFeDœ
()+"/TMlp.nn.weights.temp";

362 
fMLP
->
	`DumpWeights
Ğ
tmpfe
.
	`D©a
() );

363 
¡d
::
if¡»am
 
	`šf
Ğ
tmpfe
.
	`D©a
() );

364 
‹mp
[256];

365 
TSŒšg
 
	`d©a
("");

366 *
ch
=
NULL
;

367 
šf
.
	`g‘lše
(
‹mp
,256)) {

368 
TSŒšg
 
	`dummy
(
‹mp
);

370 ià(
dummy
.
	`BegšsW™h
('#')) {

371 ià(
ch
!=0è
	`gToŞs
().
	`AddRawLše
Ğch, 
d©a
.
	`D©a
() );

372 
dummy
 = dummy.
	`SŒ
(
TSŒšg
::
kL—dšg
, '#');

373 
dummy
 = 
	`dummy
(0,dummy.
	`Fœ¡
(' '));

374 
ch
 = 
	`gToŞs
().
	`AddChd
(
wght
, 
dummy
);

375 
d©a
.
	`Resize
(0);

378 
d©a
 +ğ(
dummy
 + " ");

380 ià(
ch
 !ğ0è
	`gToŞs
().
	`AddRawLše
Ğch, 
d©a
.
	`D©a
() );

382 
šf
.
	`şo£
();

383 
	}
}

389 
	gTMVA
::
M‘hodTMÍANN
::
	$R—dWeightsFromXML
Ğ* 
wghŠode
 )

391 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
wghŠode
);

392 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "BudO±iÚs", 
fMLPBudO±iÚs
 );

394 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

395 cÚ¡ 
TSŒšg
 
âame
 = 
	`G‘WeightFeDœ
()+"/TMlp.nn.weights.temp";

396 
¡d
::
of¡»am
 
	`fout
Ğ
âame
.
	`D©a
() );

397 
‹mp1
=0,
‹mp2
=0;

398 
ch
) {

399 cÚ¡ * 
nodecÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
ch
);

400 
¡d
::
¡ršg¡»am
 
	`cÚ‹Á
(
nodecÚ‹Á
);

401 ià(
	`¡rcmp
(
	`gToŞs
().
	`G‘Name
(
ch
),"input")==0) {

402 
fout
 << "#špuˆnÜm®iz©iÚ" << 
¡d
::
’dl
;

403 (
cÚ‹Á
 >> 
‹mp1
è&&(cÚ‹Á >> 
‹mp2
)) {

404 
fout
 << 
‹mp1
 << " " << 
‹mp2
 << 
¡d
::
’dl
;

407 ià(
	`¡rcmp
(
	`gToŞs
().
	`G‘Name
(
ch
),"output")==0) {

408 
fout
 << "#ouuˆnÜm®iz©iÚ" << 
¡d
::
’dl
;

409 (
cÚ‹Á
 >> 
‹mp1
è&&(cÚ‹Á >> 
‹mp2
)) {

410 
fout
 << 
‹mp1
 << " " << 
‹mp2
 << 
¡d
::
’dl
;

413 ià(
	`¡rcmp
(
	`gToŞs
().
	`G‘Name
(
ch
),"neurons")==0) {

414 
fout
 << "#ÃurÚ weights" << 
¡d
::
’dl
;

415 
cÚ‹Á
 >> 
‹mp1
) {

416 
fout
 << 
‹mp1
 << 
¡d
::
’dl
;

419 ià(
	`¡rcmp
(
	`gToŞs
().
	`G‘Name
(
ch
),"synapses")==0) {

420 
fout
 << "#synapses weights" ;

421 
cÚ‹Á
 >> 
‹mp1
) {

422 
fout
 << 
¡d
::
’dl
 << 
‹mp1
 ;

425 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

427 
fout
.
	`şo£
();;

431 
	`TTHREAD_TLS_DECL_ARG
(
DoubË_t
*, 
d
, 
Ãw
 DoubË_t[
	`D©a
()->
	`G‘NV¬ŸbËs
()]);

432 
	`TTHREAD_TLS
(
IÁ_t
è
ty³
;

434 
gROOT
->
	`cd
();

435 
TT»e
 * 
dummyT»e
 = 
Ãw
 
	`TT»e
("dummy","Empty dummyree", 1);

436 
UIÁ_t
 
iv¬
 = 0; iv¬<
	`D©a
()->
	`G‘NV¬ŸbËs
(); ivar++) {

437 
TSŒšg
 
vn
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘IÁ”ÇlName
();

438 
dummyT»e
->
	`B¿nch
(
	`FÜm
("%s",
vn
.
	`D©a
()), 
d
+
iv¬
, Form("%s/D",vn.Data()));

440 
dummyT»e
->
	`B¿nch
("ty³", &
ty³
, "type/I");

442 ià(
fMLP
 !ğ0è{ 
d–‘e
 fMLP; fMLP = 0; }

443 
fMLP
 = 
Ãw
 
	`TMuÉiLay”P”û±rÚ
Ğ
fMLPBudO±iÚs
.
	`D©a
(), 
dummyT»e
 );

444 
fMLP
->
	`LßdWeights
Ğ
âame
 );

445 
	}
}

452 
	gTMVA
::
M‘hodTMÍANN
::
	$R—dWeightsFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

454 
¡d
::
of¡»am
 
	`fout
( "./TMlp.nn.weights.temp" );

455 
fout
 << 
i¡r
.
	`rdbuf
();

456 
fout
.
	`şo£
();

459 
	`Log
(è<< 
kINFO
 << "Lßd TMLP weight štØ" << 
fMLP
 << 
Endl
;

461 
DoubË_t
* 
d
 = 
Ãw
 DoubË_t[
	`D©a
()->
	`G‘NV¬ŸbËs
()] ;

462 
IÁ_t
 
ty³
;

463 
gROOT
->
	`cd
();

464 
TT»e
 * 
dummyT»e
 = 
Ãw
 
	`TT»e
("dummy","Empty dummyree", 1);

465 
UIÁ_t
 
iv¬
 = 0; iv¬<
	`D©a
()->
	`G‘NV¬ŸbËs
(); ivar++) {

466 
TSŒšg
 
vn
 = 
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Lab–
();

467 
dummyT»e
->
	`B¿nch
(
	`FÜm
("%s",
vn
.
	`D©a
()), 
d
+
iv¬
, Form("%s/D",vn.Data()));

469 
dummyT»e
->
	`B¿nch
("ty³", &
ty³
, "type/I");

471 ià(
fMLP
 !ğ0è{ 
d–‘e
 fMLP; fMLP = 0; }

472 
fMLP
 = 
Ãw
 
	`TMuÉiLay”P”û±rÚ
Ğ
fMLPBudO±iÚs
.
	`D©a
(), 
dummyT»e
 );

474 
fMLP
->
	`LßdWeights
( "./TMlp.nn.weights.temp" );

477 
d–‘e
 [] 
d
;

478 
	}
}

484 
	gTMVA
::
M‘hodTMÍANN
::
	$MakeCÏss
ĞcÚ¡ 
TSŒšg
& 
theCÏssFeName
 ) const

487 
TSŒšg
 
şassFeName
 = "";

488 ià(
theCÏssFeName
 == "")

489 
şassFeName
 = 
	`G‘WeightFeDœ
(è+ "/" + 
	`G‘JobName
(è+ "_" + 
	`G‘M‘hodName
() + ".class";

491 
şassFeName
 = 
theCÏssFeName
;

493 
şassFeName
.
	`R•ÏûAÎ
(".class","");

494 
	`Log
(è<< 
kINFO
 << "C»©šg s³cifiø(TMuÉiLay”P”û±rÚè¡ªd®Ú»¥Ú£ cÏss: " << 
şassFeName
 << 
Endl
;

495 
fMLP
->
	`ExpÜt
Ğ
şassFeName
.
	`D©a
() );

496 
	}
}

502 
	gTMVA
::
M‘hodTMÍANN
::
	$MakeCÏssS³cific
Ğ
¡d
::
o¡»am
& , cÚ¡ 
TSŒšg
& ) const

504 
	}
}

512 
	gTMVA
::
M‘hodTMÍANN
::
	$G‘H–pMes§ge
() const

514 
	`Log
(è<< 
Endl
;

515 
	`Log
(è<< 
	`gToŞs
().
	`CŞÜ
("bŞd"è<< "--- ShÜˆdesütiÚ:" << gToŞs().CŞÜ("»£t"è<< 
Endl
;

516 
	`Log
(è<< 
Endl
;

517 
	`Log
(è<< "Thi ãed-fÜw¬d muÉay”…”û±rÚ‚eu¿ÈÃtwÜk i th" << 
Endl
;

518 
	`Log
(è<< "¡ªd¬d im¶em’tiÚ di¡ribu‹d w™h ROOT (şas TMuÉiLay”P”û±rÚ)." << 
Endl
;

519 
	`Log
(è<< 
Endl
;

520 
	`Log
(è<< "D‘aed infÜm©iÚ i avaabË h”e:" << 
Endl
;

521 ià(
	`gCÚfig
().
	`Wr™eO±iÚsReã»nû
()) {

522 
	`Log
() << "<a href=\"http://root.cern.ch/root/html/TMultiLayerPerceptron.html\">";

523 
	`Log
(è<< "h‰p://roÙ.ûº.ch/roÙ/html/TMuÉiLay”P”û±rÚ.html</a>" << 
Endl
;

525 
	`Log
(è<< "h‰p://roÙ.ûº.ch/roÙ/html/TMuÉiLay”P”û±rÚ.html" << 
Endl
;

526 
	`Log
(è<< 
Endl
;

527 
	}
}

	@src/MinuitFitter.cxx

29 
	~"TMVA/Mšu™F™‹r.h
"

31 
	~"TMVA/CÚfigu¿bË.h
"

32 
	~"TMVA/F™‹rBa£.h
"

33 
	~"TMVA/IF™‹rT¬g‘.h
"

34 
	~"TMVA/IÁ”v®.h
"

35 
	~"TMVA/Mšu™W¿µ”.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/Tim”.h
"

38 
	~"TMVA/Ty³s.h
"

40 
	~"TF™‹r.h
"

42 
CÏssImp
(
TMVA
::
Mšu™F™‹r
);

47 
	gTMVA
::
Mšu™F™‹r
::Mšu™F™‹rĞ
IF™‹rT¬g‘
& 
rg‘
,

48 cÚ¡ 
TSŒšg
& 
Çme
,

49 
¡d
::
veùÜ
<
TMVA
::
IÁ”v®
*>& 
¿nges
,

50 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

51 : 
TMVA
::
F™‹rBa£
Ğ
rg‘
, 
Çme
, 
¿nges
, 
theO±iÚ
 ),

52 
	gTMVA
::
	$IF™‹rT¬g‘
( )

55 
	`Deş¬eO±iÚs
();

56 
	`P¬£O±iÚs
();

58 
	`In™
();

59 
	}
}

64 
	gTMVA
::
Mšu™F™‹r
::~
	$Mšu™F™‹r
( )

66 
d–‘e
 
fMšW¿p
;

67 
	}
}

72 
	gTMVA
::
Mšu™F™‹r
::
	$Deş¬eO±iÚs
()

74 
	`Deş¬eO±iÚRef
(
fE¼ÜLev–
 = 1, "ErrorLevel", "TMinuit:ƒrror†evel: 0.5=logL fit, 1=chi-squared fit" );

75 
	`Deş¬eO±iÚRef
(
fPrštLev–
 = -1, "PrintLevel", "TMinuit: output†evel: -1=least, 0, +1=all garbage" );

76 
	`Deş¬eO±iÚRef
(
fF™SŒ©egy
 = 2, "FitStrategy", "TMinuit: fit strategy: 2=best" );

77 
	`Deş¬eO±iÚRef
(
fPrštW¬nšgs
 = 
kFALSE
, "PrintWarnings", "TMinuit: suppress warnings" );

78 
	`Deş¬eO±iÚRef
(
fU£Im´ove
 = 
kTRUE
, "UseImprove", "TMinuit: use IMPROVE" );

79 
	`Deş¬eO±iÚRef
(
fU£Mšos
 = 
kTRUE
, "UseMinos", "TMinuit: use MINOS" );

80 
	`Deş¬eO±iÚRef
(
fB©ch
 = 
kFALSE
, "SetBatch", "TMinuit: use batch mode" );

81 
	`Deş¬eO±iÚRef
(
fMaxC®ls
 = 1000, "MaxCalls", "TMinuit:‡pproximate maximum‚umber of function calls" );

82 
	`Deş¬eO±iÚRef
(
fTŞ”ªû
 = 0.1, "Tolerance", "TMinuit:oleranceohe function value‡the minimum" );

83 
	}
}

88 
	gTMVA
::
Mšu™F™‹r
::
	$In™
()

90 
DoubË_t
 
¬gs
[10];

93 ià(!
fB©ch
è
	`Log
(è<< 
kINFO
 << "<Mšu™F™‹r> In™ " << 
Endl
;

96 
Tim”
 
tim”
;

103 
fMšW¿p
 = 
Ãw
 
	`Mšu™W¿µ”
Ğ
fF™‹rT¬g‘
, 2*
	`G‘N·rs
() );

106 
¬gs
[0] = 
fPrštLev–
;

107 
fMšW¿p
->
	`Execu‹Commªd
Ğ"SET PRINTOUT", 
¬gs
, 1 );

109 ià(
fB©ch
è
fMšW¿p
->
	`Execu‹Commªd
Ğ"SET BAT", 
¬gs
, 0 );

112 
fMšW¿p
->
	`CË¬
();

115 
¬gs
[0] = 
fE¼ÜLev–
;

116 
fMšW¿p
->
	`Execu‹Commªd
Ğ"SET ERR", 
¬gs
, 1 );

119 ià(!
fPrštW¬nšgs
è
fMšW¿p
->
	`Execu‹Commªd
Ğ"SET NOWARNINGS", 
¬gs
, 0 );

122 
¬gs
[0] = 
fF™SŒ©egy
;

123 
fMšW¿p
->
	`Execu‹Commªd
Ğ"SET STRATEGY", 
¬gs
, 1 );

124 
	}
}

129 
DoubË_t
 
	gTMVA
::
Mšu™F™‹r
::
Run
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

132 
DoubË_t
 
¬gs
[10];

135 iàĞ!
	gfB©ch
 ) 
Log
(è<< 
	gkINFO
 << "<Mšu™F™‹r> F™tšg,…Ëa£ b·t›Á ... " << 
	gEndl
;

138 ià((
	gIÁ_t
)
	g·rs
.
size
(è!ğ
G‘N·rs
())

139 
Log
(è<< 
kFATAL
 << "<Run> Mismatch in‚umber of…arameters: (a)"

140 << 
G‘N·rs
(è<< " !ğ" << 
·rs
.
size
(è<< 
Endl
;

143 
Tim”
* 
	gtim”
 = 0;

144 ià(!
	gfB©ch
è
	gtim”
 = 
Ãw
 
Tim”
();

147 
IÁ_t
 
	g¬
=0; i·r<
	gfN·rs
; ipar++) {

148 
	gfMšW¿p
->
S‘P¬am‘”
Ğ
¬
, 
FÜm
( "Par%i",ipar ),

149 
·rs
[
¬
], 
fRªges
[¬]->
G‘Width
()/100.0,

150 
fRªges
[
¬
]->
G‘Mš
(), fRªges[¬]->
G‘Max
() );

151 ià(
	gfRªges
[
¬
]->
G‘Width
(è=ğ0.0è
fMšW¿p
->
FixP¬am‘”
( ipar );

157 
	g¬gs
[0] = 
fMaxC®ls
;

158 
	g¬gs
[1] = 
fTŞ”ªû
;

161 
	gfMšW¿p
->
Execu‹Commªd
Ğ"MIG¿d", 
¬gs
, 2 );

164 ià(
	gfU£Im´ove
è
	gfMšW¿p
->
Execu‹Commªd
Ğ"IMProve", 
¬gs
, 0 );

167 ià(
	gfU£Mšos
) {

168 
	g¬gs
[0] = 500;

169 
	gfMšW¿p
->
Execu‹Commªd
Ğ"MINOs", 
¬gs
, 1 );

173 
DoubË_t
 
	gchi2
;

174 
DoubË_t
 
	gedm
;

175 
DoubË_t
 
	g”rdef
;

176 
IÁ_t
 
	gnv·r
;

177 
IÁ_t
 
	gÅ¬x
;

178 
	gfMšW¿p
->
G‘Sts
Ğ
chi2
, 
edm
, 
”rdef
, 
nv·r
, 
Å¬x
 );

181 ià(
G‘N·rs
(è!ğ
Å¬x
) {

182 
Log
(è<< 
kFATAL
 << "<Run> Mismatch in‚umber of…arameters: "

183 << 
G‘N·rs
(è<< " !ğ" << 
Å¬x
 << 
Endl
;

187 
IÁ_t
 
	g¬
=0; i·r<
G‘N·rs
(); ipar++) {

188 
DoubË_t
 
	g”½
, 
	g”rm
, 
	g”rsym
, 
	gglobcÜ
, 
	gcu¼V®
, 
	gcu¼E¼
;

189 
	gfMšW¿p
->
G‘P¬am‘”
Ğ
¬
, 
cu¼V®
, 
cu¼E¼
 );

190 
	g·rs
[
¬
] = 
cu¼V®
;

191 
	gfMšW¿p
->
G‘E¼Üs
Ğ
¬
, 
”½
, 
”rm
, 
”rsym
, 
globcÜ
 );

197 ià(!
	gfB©ch
) {

198 
Log
(è<< 
	gkINFO
 << "EÏp£dime: " << 
	gtim”
->
G‘EÏp£dTime
()

199 << " " << 
	gEndl
;

200 
d–‘e
 
	gtim”
;

203 
	gfMšW¿p
->
CË¬
();

205  
	gchi2
;

211 
DoubË_t
 
	gTMVA
::
Mšu™F™‹r
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

213  
Run
Ğ
·rs
 );

	@src/MinuitWrapper.cxx

29 
	~"TMVA/Mšu™W¿µ”.h
"

31 
	~"TMVA/IF™‹rT¬g‘.h
"

33 
CÏssImp
(
TMVA
::
Mšu™W¿µ”
);

38 
	gTMVA
::
Mšu™W¿µ”
::
	$Mšu™W¿µ”
Ğ
IF™‹rT¬g‘
& 
rg‘
, 
IÁ_t
 
max·r
 )

39 : 
	`TMšu™
Ğ
max·r
 ),

40 
	`fF™‹rT¬g‘
Ğ
rg‘
 ),

41 
	$fNumP¬
Ğ
max·r
 )

43  
IÁ_t
 
i
=0; i< 
max·r
; i++ ) {

44 
fP¬am‘”s
.
	`push_back
(0.0);

46 
	}
}

51 
IÁ_t
 
	gTMVA
::
Mšu™W¿µ”
::
	$Ev®
(
IÁ_t
 , 
DoubË_t
*, DoubË_t& 
f
, DoubË_t* 
·r
, Int_t)

53 
IÁ_t
 
¬
=0; i·r<
fNumP¬
; i·r++è
fP¬am‘”s
[¬] = 
·r
[ipar];

55 
f
 = 
fF™‹rT¬g‘
.
	`E¡im©ÜFunùiÚ
Ğ
fP¬am‘”s
 );

57 
	}
}

64 
IÁ_t
 
	gTMVA
::
Mšu™W¿µ”
::
	$Execu‹Commªd
(cÚ¡ *
commªd
, 
DoubË_t
 *
¬gs
, 
IÁ_t
 
Çrgs
)

66 
IÁ_t
 
›¼
 = 0;

67 
	`mÃxcm
(
commªd
,
¬gs
,
Çrgs
,
›¼
);

68  
›¼
;

69 
	}
}

74 
	gTMVA
::
Mšu™W¿µ”
::
	$CË¬
(
O±iÚ_t
 *)

77 
DoubË_t
 
v®
 = 3;

78 
IÁ_t
 
š£ed
 = 12345;

79 
	`mÄn15
(
v®
,
š£ed
);

80 
	}
}

90 
IÁ_t
 
	gTMVA
::
Mšu™W¿µ”
::
	$G‘Sts
(
DoubË_t
 &
amš
, DoubË_ˆ&
edm
, DoubË_ˆ&
”rdef
, 
IÁ_t
 &
nv·r
, IÁ_ˆ&
Å¬x
)

92 
IÁ_t
 
›¼
 = 0;

93 
	`mn¡©
(
amš
,
edm
,
”rdef
,
nv·r
,
Å¬x
,
›¼
);

94  
›¼
;

95 
	}
}

105 
IÁ_t
 
	gTMVA
::
Mšu™W¿µ”
::
	$G‘E¼Üs
(
IÁ_t
 
¬
,
DoubË_t
 &
•lus
, DoubË_ˆ&
emšus
, DoubË_ˆ&
•¬ab
, DoubË_ˆ&
globcc
)

107 
IÁ_t
 
›¼
 = 0;

108 
	`mÃ¼s
(
¬
, 
•lus
,
emšus
,
•¬ab
,
globcc
);

109  
›¼
;

110 
	}
}

121 
IÁ_t
 
	gTMVA
::
Mšu™W¿µ”
::
	$S‘P¬am‘”
(
IÁ_t
 
¬
,cÚ¡ *
·ºame
,
DoubË_t
 
v®ue
,DoubË_ˆ
v”r
,DoubË_ˆ
vlow
, DoubË_ˆ
vhigh
)

124 
IÁ_t
 
›¼
 = 0;

125 
	`mÅ¬m
(
¬
,
·ºame
,
v®ue
,
v”r
,
vlow
,
vhigh
,
›¼
);

126  
›¼
;

127 
	}
}

132 
TObjeù
 *
	gTMVA
::
Mšu™W¿µ”
::
	$ClÚe
(cÚ¡* 
ÃwÇme
) const

134 
Mšu™W¿µ”
 *
Çmed
 = (Mšu™W¿µ”*)
TNamed
::
	`ClÚe
(
ÃwÇme
);

135 
Çmed
->
fF™‹rT¬g‘
 = fFitterTarget;

137 
	}
}

	@src/MisClassificationError.cxx

34 
	~"TMVA/MisCÏssifiÿtiÚE¼Ü.h
"

36 
	~"Rty³s.h
"

38 
CÏssImp
(
TMVA
::
MisCÏssifiÿtiÚE¼Ü
);

43 
DoubË_t
 
	gTMVA
::
MisCÏssifiÿtiÚE¼Ü
::
	$G‘S•¬©iÚIndex
ĞcÚ¡ 
DoubË_t
 
s
, cÚ¡ DoubË_ˆ
b
 )

45 iàĞ
s
+
b
 <= 0)  0;

47 
DoubË_t
 
p
 = 
s
/(s+
b
);

48 ià(
p
 >= 1-p)  1-p;

49  
p
;

50 
	}
}

	@src/ModulekNN.cxx

32 
	~"TMVA/ModuËkNN.h
"

34 
	~"TMVA/MsgLogg”.h
"

35 
	~"TMVA/Ty³s.h
"

37 
	~"Th»adLoÿlStÜage.h
"

38 
	~"TM©h.h
"

39 
	~"TRªdom3.h
"

41 
	~<as£¹.h
>

42 
	~<iomª
>

43 
	~<io¡»am
>

44 
	~<s¡»am
>

45 
	~<®gÜ™hm
>

50 
	gTMVA
::
kNN
::
Ev’t
::
	$Ev’t
()

51 :
	`fV¬
(),

52 
	`fWeight
(-1.0),

53 
	`fTy³
(-1)

55 
	}
}

60 
	gTMVA
::
kNN
::
Ev’t
::
	$Ev’t
(cÚ¡ 
V¬Vec
 &
v¬
, cÚ¡ 
DoubË_t
 
weight
, cÚ¡ 
ShÜt_t
 
ty³
)

61 :
	`fV¬
(
v¬
),

62 
	`fWeight
(
weight
),

63 
	$fTy³
(
ty³
)

65 
	}
}

70 
	gTMVA
::
kNN
::
Ev’t
::
	$Ev’t
(cÚ¡ 
V¬Vec
 &
v¬
, cÚ¡ 
DoubË_t
 
weight
, cÚ¡ 
ShÜt_t
 
ty³
, cÚ¡ V¬Veø&
tvec
)

71 :
	`fV¬
(
v¬
),

72 
	`fTgt
(
tvec
),

73 
	`fWeight
(
weight
),

74 
	$fTy³
(
ty³
)

76 
	}
}

81 
	gTMVA
::
kNN
::
Ev’t
::~
	$Ev’t
()

83 
	}
}

88 
TMVA
::
kNN
::
V¬Ty³
 TMVA::kNN::
Ev’t
::
	$G‘Di¡
(cÚ¡ 
Ev’t
 &
Ùh”
) const

90 cÚ¡ 
UIÁ_t
 
nv¬
 = 
	`G‘NV¬
();

92 ià(
nv¬
 !ğ
Ùh”
.
	`G‘NV¬
()) {

93 
¡d
::
û¼
 << "Di¡ªû:wØev’t havdifã»Á dim’siÚs" << std::
’dl
;

97 
V¬Ty³
 
sum
 = 0.0;

98 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬
; ++ivar) {

99 
sum
 +ğ
	`G‘Di¡
(
Ùh”
.
	`G‘V¬
(
iv¬
), ivar);

102  
sum
;

103 
	}
}

107 
	gTMVA
::
kNN
::
Ev’t
::
	$S‘T¬g‘s
(cÚ¡ 
V¬Vec
 &
tvec
)

109 
fTgt
 = 
tvec
;

110 
	}
}

114 cÚ¡ 
	gTMVA
::
kNN
::
V¬Vec
& 
TMVA
::kNN::
Ev’t
::
	$G‘T¬g‘s
() const

116  
fTgt
;

117 
	}
}

121 cÚ¡ 
	gTMVA
::
kNN
::
V¬Vec
& 
TMVA
::kNN::
Ev’t
::
	$G‘V¬s
() const

123  
fV¬
;

124 
	}
}

129 
	gTMVA
::
kNN
::
Ev’t
::
	$Pršt
() const

131 
	`Pršt
(
¡d
::
cout
);

132 
	}
}

137 
	gTMVA
::
kNN
::
Ev’t
::
	$Pršt
(
¡d
::
o¡»am
& 
os
) const

139 
IÁ_t
 
dp
 = 
os
.
	`´ecisiÚ
();

140 
os
 << "Event: ";

141 
UIÁ_t
 
iv¬
 = 0; iv¬ !ğ
	`G‘NV¬
(); ++ivar) {

142 ià(
iv¬
 == 0) {

143 
os
 << "(";

146 
os
 << ", ";

149 
os
 << 
¡d
::
	`£tfl
(' 'è<< std::
	`£tw
(5è<< std::
	`£»cisiÚ
(3è<< 
	`G‘V¬
(
iv¬
);

152 ià(
	`G‘NV¬
() > 0) {

153 
os
 << ")";

156 
os
 << "‚o variables";

158 
os
 << 
¡d
::
	`£»cisiÚ
(
dp
);

159 
	}
}

164 
	g¡d
::
o¡»am
& 
TMVA
::
kNN
::
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gTMVA
::kNN::
Ev’t
& 
ev’t
)

166 
ev’t
.
Pršt
(
os
);

167  
	gos
;

173 
	gTMVA
::
kNN
::
ModuËkNN
::
	$ModuËkNN
()

174 :
	`fDimn
(0),

175 
	`fT»e
(0),

176 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("ModulekNN") )

178 
	}
}

183 
	gTMVA
::
kNN
::
ModuËkNN
::~
	$ModuËkNN
()

185 ià(
fT»e
) {

186 
d–‘e
 
fT»e
; fTree = 0;

188 
d–‘e
 
fLogg”
;

189 
	}
}

194 
	gTMVA
::
kNN
::
ModuËkNN
::
	$CË¬
()

196 
fDimn
 = 0;

198 ià(
fT»e
) {

199 
d–‘e
 
fT»e
;

200 
fT»e
 = 0;

203 
fV¬SÿË
.
	`ş—r
();

204 
fCouÁ
.
	`ş—r
();

205 
fEv’t
.
	`ş—r
();

206 
fV¬
.
	`ş—r
();

207 
	}
}

212 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Add
(cÚ¡ 
Ev’t
 &
ev’t
)

214 ià(
fT»e
) {

215 
	`Log
(è<< 
kFATAL
 << "<Add> CªnÙ‡ddƒv’t:»i ®»ady but" << 
Endl
;

219 ià(
fDimn
 < 1) {

220 
fDimn
 = 
ev’t
.
	`G‘NV¬
();

222 ià(
fDimn
 !ğ
ev’t
.
	`G‘NV¬
()) {

223 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Add(è-‚umb” oàdim’siÚ dÛ nÙ m©ch…»viou ev’ts" << 
Endl
;

227 
fEv’t
.
	`push_back
(
ev’t
);

229 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fDimn
; ++ivar) {

230 
fV¬
[
iv¬
].
	`push_back
(
ev’t
.
	`G‘V¬
(ivar));

233 
¡d
::
m­
<
ShÜt_t
, 
UIÁ_t
>::
™”©Ü
 
c™
 = 
fCouÁ
.
	`fšd
(
ev’t
.
	`G‘Ty³
());

234 ià(
c™
 =ğ
fCouÁ
.
	`’d
()) {

235 
fCouÁ
[
ev’t
.
	`G‘Ty³
()] = 1;

238 ++(
c™
->
£cÚd
);

240 
	}
}

245 
BoŞ_t
 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Fl
(cÚ¡ 
UShÜt_t
 
od•th
, cÚ¡ 
UIÁ_t
 
iäac
, cÚ¡ 
¡d
::
¡ršg
 &
İtiÚ
)

247 ià(
fT»e
) {

248 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::FÈ-»ha ®»ady b“Àü—‹d" << 
Endl
;

249  
kFALSE
;

254 
UIÁ_t
 
mš
 = 0;

255 ià(
İtiÚ
.
	`fšd
("Œim"è!ğ
¡d
::
¡ršg
::
Åos
) {

256 
¡d
::
m­
<
ShÜt_t
, 
UIÁ_t
>::
cÚ¡_™”©Ü
 
™
 = 
fCouÁ
.
	`begš
(); iˆ!ğfCouÁ.
	`’d
(); ++it) {

257 ià(
mš
 =ğ0 || mš > 
™
->
£cÚd
) {

258 
mš
 = 
™
->
£cÚd
;

262 
	`Log
(è<< 
kINFO
 << "<Fl> WÈŒim‡Îƒv’ˆty³ tØ" << 
mš
 << "ƒv’ts" << 
Endl
;

264 
fCouÁ
.
	`ş—r
();

265 
fV¬
.
	`ş—r
();

267 
Ev’tVec
 
evec
;

269 
Ev’tVec
::
cÚ¡_™”©Ü
 
ev’t
 = 
fEv’t
.
	`begš
();ƒv’ˆ!ğfEv’t.
	`’d
(); ++event) {

270 
¡d
::
m­
<
ShÜt_t
, 
UIÁ_t
>::
™”©Ü
 
c™
 = 
fCouÁ
.
	`fšd
(
ev’t
->
	`G‘Ty³
());

271 ià(
c™
 =ğ
fCouÁ
.
	`’d
()) {

272 
fCouÁ
[
ev’t
->
	`G‘Ty³
()] = 1;

274 ià(
c™
->
£cÚd
 < 
mš
) {

275 ++(
c™
->
£cÚd
);

281 
UIÁ_t
 
d
 = 0; d < 
fDimn
; ++d) {

282 
fV¬
[
d
].
	`push_back
(
ev’t
->
	`G‘V¬
(d));

285 
evec
.
	`push_back
(*
ev’t
);

288 
	`Log
(è<< 
kINFO
 << "<Fl> E¿£d " << 
fEv’t
.
	`size
(è- 
evec
.size(è<< "ƒv’ts" << 
Endl
;

290 
fEv’t
 = 
evec
;

294 
fCouÁ
.
	`ş—r
();

297 
V¬M­
::
™”©Ü
 
™
 = 
fV¬
.
	`begš
(); iˆ!ğfV¬.
	`’d
(); ++it) {

298 
¡d
::
	`sÜt
((
™
->
£cÚd
).
	`begš
(), (™->£cÚd).
	`’d
());

301 ià(
İtiÚ
.
	`fšd
("m‘ric"è!ğ
¡d
::
¡ršg
::
Åos
 && 
iäac
 > 0) {

302 
	`Compu‹M‘ric
(
iäac
);

306 
V¬M­
::
™”©Ü
 
™
 = 
fV¬
.
	`begš
(); iˆ!ğfV¬.
	`’d
(); ++it) {

307 
¡d
::
	`sÜt
((
™
->
£cÚd
).
	`begš
(), (™->£cÚd).
	`’d
());

315 
fT»e
 = 
	`O±imize
(
od•th
);

317 ià(!
fT»e
) {

318 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Fl(è- faedØü—‹»e" << 
Endl
;

319  
kFALSE
;

322 
Ev’tVec
::
cÚ¡_™”©Ü
 
ev’t
 = 
fEv’t
.
	`begš
();ƒv’ˆ!ğfEv’t.
	`’d
(); ++event) {

323 
fT»e
->
	`Add
(*
ev’t
, 0);

325 
¡d
::
m­
<
ShÜt_t
, 
UIÁ_t
>::
™”©Ü
 
c™
 = 
fCouÁ
.
	`fšd
(
ev’t
->
	`G‘Ty³
());

326 ià(
c™
 =ğ
fCouÁ
.
	`’d
()) {

327 
fCouÁ
[
ev’t
->
	`G‘Ty³
()] = 1;

330 ++(
c™
->
£cÚd
);

334 
¡d
::
m­
<
ShÜt_t
, 
UIÁ_t
>::
cÚ¡_™”©Ü
 
™
 = 
fCouÁ
.
	`begš
(); iˆ!ğfCouÁ.
	`’d
(); ++it) {

335 
	`Log
(è<< 
kINFO
 << "<Fl> CÏs " << 
™
->
fœ¡
 << " ha " << 
¡d
::
	`£tw
(8)

336 << 
™
->
£cÚd
 << "ƒv’ts" << 
Endl
;

339  
kTRUE
;

340 
	}
}

348 
BoŞ_t
 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Fšd
(
Ev’t
 
ev’t
, cÚ¡ 
UIÁ_t
 
nfšd
, cÚ¡ 
¡d
::
¡ršg
 &
İtiÚ
) const

350 ià(!
fT»e
) {

351 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Fšd(è-»ha nÙ b“ÀfËd" << 
Endl
;

352  
kFALSE
;

354 ià(
fDimn
 !ğ
ev’t
.
	`G‘NV¬
()) {

355 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Fšd(è-‚umb” oàdim’siÚ dÛ nÙ m©ch¿ššgƒv’ts" << 
Endl
;

356  
kFALSE
;

358 ià(
nfšd
 < 1) {

359 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Fšd(è-„eque¡ed 0‚—»¡‚eighbÜs" << 
Endl
;

360  
kFALSE
;

365 ià(!
fV¬SÿË
.
	`em±y
()) {

366 
ev’t
 = 
	`SÿË
(event);

370 
fkNNEv’t
 = 
ev’t
;

371 
fkNNLi¡
.
	`ş—r
();

373 if(
İtiÚ
.
	`fšd
("weight"è!ğ
¡d
::
¡ršg
::
Åos
)

378 
kNN
::
Fšd
<kNN::
Ev’t
>(
fkNNLi¡
, 
fT»e
, 
ev’t
, 
	`DoubË_t
(
nfšd
), 0.0);

384 
kNN
::
Fšd
<kNN::
Ev’t
>(
fkNNLi¡
, 
fT»e
, 
ev’t
, 
nfšd
);

387  
kTRUE
;

388 
	}
}

393 
BoŞ_t
 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Fšd
(cÚ¡ 
UIÁ_t
 
nfšd
, cÚ¡ 
¡d
::
¡ršg
 &
İtiÚ
) const

395 ià(
fCouÁ
.
	`em±y
(è|| !
fT»e
) {

396  
kFALSE
;

398 
¡d
::
	tm­
<
	tShÜt_t
, 
	tUIÁ_t
>::
	tcÚ¡_™”©Ü
 const_iterator;

399 
	`TTHREAD_TLS_DECL_ARG
(
cÚ¡_™”©Ü
,
c™
,
fCouÁ
.
	`’d
());

401 ià(
c™
 =ğ
fCouÁ
.
	`’d
()) {

402 
c™
 = 
fCouÁ
.
	`begš
();

405 cÚ¡ 
ShÜt_t
 
‘y³
 = (
c™
++)->
fœ¡
;

407 ià(
İtiÚ
 == "flat") {

408 
V¬Vec
 
dvec
;

409 
UIÁ_t
 
d
 = 0; d < 
fDimn
; ++d) {

410 
V¬M­
::
cÚ¡_™”©Ü
 
v™
 = 
fV¬
.
	`fšd
(
d
);

411 ià(
v™
 =ğ
fV¬
.
	`’d
()) {

412  
kFALSE
;

415 cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> &
vvec
 = 
v™
->
£cÚd
;

417 ià(
vvec
.
	`em±y
()) {

418  
kFALSE
;

422 cÚ¡ 
V¬Ty³
 
mš
 = 
vvec
.
	`äÚt
();

423 cÚ¡ 
V¬Ty³
 
max
 = 
vvec
.
	`back
();

424 cÚ¡ 
V¬Ty³
 
width
 = 
max
 - 
mš
;

426 ià(
width
 < 0.0 || width > 0.0) {

427 
dvec
.
	`push_back
(
mš
 + 
width
*
	`G‘RndmTh»adLoÿl
().
	`Rndm
());

430  
kFALSE
;

434 cÚ¡ 
Ev’t
 
	`ev’t
(
dvec
, 1.0, 
‘y³
);

436 
	`Fšd
(
ev’t
, 
nfšd
);

438  
kTRUE
;

441  
kFALSE
;

442 
	}
}

449 
	gTMVA
::
kNN
::
Node
<
TMVA
::kNN::
Ev’t
>* TMVA::kNN::
ModuËkNN
::
	$O±imize
(cÚ¡ 
UIÁ_t
 
od•th
)

451 ià(
fV¬
.
	`em±y
(è|| 
fDimn
 !ğfV¬.
	`size
()) {

452 
	`Log
(è<< 
kWARNING
 << "<O±imize> CªnÙ bud‡»e" << 
Endl
;

456 cÚ¡ 
UIÁ_t
 
size
 = (
fV¬
.
	`begš
()->
£cÚd
).
	`size
();

457 ià(
size
 < 1) {

458 
	`Log
(è<< 
kWARNING
 << "<O±imize> CªnÙ bud‡»w™houˆev’ts" << 
Endl
;

462 
V¬M­
::
cÚ¡_™”©Ü
 
™
 = 
fV¬
.
	`begš
();

463 ; 
™
 !ğ
fV¬
.
	`’d
(); ++it) {

464 ià((
™
->
£cÚd
).
	`size
(è!ğ
size
) {

465 
	`Log
(è<< 
kWARNING
 << "<O±imize> # oàv¬ŸbË dÛ¢'ˆm©ch b‘w“Àdim’siÚs" << 
Endl
;

470 ià((
fDimn
*
size
è< 
TM©h
::
	`Pow”
(2.0, (
od•th
))) {

471 
	`Log
(è<< 
kWARNING
 << "<O±imize> O±imiz©iÚ d•thƒxûed numb” oàev’ts" << 
Endl
;

475 
	`Log
(è<< 
kHEADER
 << "O±imizšg»fÜ " << 
fDimn
 << " v¬ŸbË w™h " << 
size
 << " v®ues" << 
Endl
;

477 
¡d
::
veùÜ
<
Node
<
Ev’t
> *> 
pvec
, 
cvec
;

479 
™
 = 
fV¬
.
	`fšd
(0);

480 ià(
™
 =ğ
fV¬
.
	`’d
(è|| (™->
£cÚd
).
	`size
() < 2) {

481 
	`Log
(è<< 
kWARNING
 << "<O±imize> Missšg 0 v¬ŸbË" << 
Endl
;

485 cÚ¡ 
Ev’t
 
	`³v’t
(
	`V¬Vec
(
fDimn
, (
™
->
£cÚd
)[
size
/2]), -1.0, -1);

487 
Node
<
Ev’t
> *
Œ“
 = 
Ãw
 Node<Ev’t>(0, 
³v’t
, 0);

489 
pvec
.
	`push_back
(
Œ“
);

491 
UIÁ_t
 
d•th
 = 1; d•th < 
od•th
; ++depth) {

492 cÚ¡ 
UIÁ_t
 
mod
 = 
d•th
 % 
fDimn
;

494 
V¬M­
::
cÚ¡_™”©Ü
 
v™
 = 
fV¬
.
	`fšd
(
mod
);

495 ià(
v™
 =ğ
fV¬
.
	`’d
()) {

496 
	`Log
(è<< 
kFATAL
 << "Missšg " << 
mod
 << " v¬ŸbË" << 
Endl
;

499 cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> &
dvec
 = 
v™
->
£cÚd
;

501 ià(
dvec
.
	`size
() < 2) {

502 
	`Log
(è<< 
kFATAL
 << "Missšg " << 
mod
 << " v¬ŸbË" << 
Endl
;

506 
UIÁ_t
 
ichd
 = 1;

507 
¡d
::
veùÜ
<
Node
<
Ev’t
> *>::
™”©Ü
 
p™
 = 
pvec
.
	`begš
();…™ !ğpvec.
	`’d
(); ++pit) {

508 
Node
<
Ev’t
> *
·»Á
 = *
p™
;

510 cÚ¡ 
V¬Ty³
 
lmedŸn
 = 
dvec
[
size
*
ichd
/(2*
pvec
.
	`size
() + 1)];

511 ++
ichd
;

513 cÚ¡ 
V¬Ty³
 
rmedŸn
 = 
dvec
[
size
*
ichd
/(2*
pvec
.
	`size
() + 1)];

514 ++
ichd
;

516 cÚ¡ 
Ev’t
 
	`Ëv’t
(
	`V¬Vec
(
fDimn
, 
lmedŸn
), -1.0, -1);

517 cÚ¡ 
Ev’t
 
	`»v’t
(
	`V¬Vec
(
fDimn
, 
rmedŸn
), -1.0, -1);

519 
Node
<
Ev’t
> *
lchd
 = 
Ãw
 Node<Ev’t>(
·»Á
, 
Ëv’t
, 
mod
);

520 
Node
<
Ev’t
> *
rchd
 = 
Ãw
 Node<Ev’t>(
·»Á
, 
»v’t
, 
mod
);

522 
·»Á
->
	`S‘NodeL
(
lchd
);

523 
·»Á
->
	`S‘NodeR
(
rchd
);

525 
cvec
.
	`push_back
(
lchd
);

526 
cvec
.
	`push_back
(
rchd
);

529 
pvec
 = 
cvec
;

530 
cvec
.
	`ş—r
();

533  
Œ“
;

534 
	}
}

542 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Compu‹M‘ric
(cÚ¡ 
UIÁ_t
 
iäac
)

544 ià(
iäac
 == 0) {

547 ià(
iäac
 > 100) {

548 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Compu‹M‘riø- f¿ùiÚ cª‚Ùƒxûed 100%" << 
Endl
;

551 ià(!
fV¬SÿË
.
	`em±y
()) {

552 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Compu‹M‘riø- m‘riøi ®»ady compu‹d" << 
Endl
;

555 ià(
fEv’t
.
	`size
() < 100) {

556 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Compu‹M‘riø-‚umb” oàev’t i toØsm®l" << 
Endl
;

560 cÚ¡ 
UIÁ_t
 
läac
 = (100 - 
iäac
)/2;

561 cÚ¡ 
UIÁ_t
 
räac
 = 100 - (100 - 
iäac
)/2;

563 
	`Log
(è<< 
kINFO
 << "Computing scale factor for 1d distributions: "

564 << "(iäac, bÙtom,İèğ(" << 
iäac
 << "%, " << 
läac
 << "%, " << 
räac
 << "%)" << 
Endl
;

566 
fV¬SÿË
.
	`ş—r
();

568 
V¬M­
::
cÚ¡_™”©Ü
 
v™
 = 
fV¬
.
	`begš
(); v™ !ğfV¬.
	`’d
(); ++vit) {

569 cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> &
dvec
 = 
v™
->
£cÚd
;

571 
¡d
::
veùÜ
<
DoubË_t
>::
cÚ¡_™”©Ü
 
beg_™
 = 
dvec
.
	`’d
();

572 
¡d
::
veùÜ
<
DoubË_t
>::
cÚ¡_™”©Ü
 
’d_™
 = 
dvec
.
	`’d
();

574 
IÁ_t
 
di¡
 = 0;

575 
¡d
::
veùÜ
<
DoubË_t
>::
cÚ¡_™”©Ü
 
d™
 = 
dvec
.
	`begš
(); d™ !ğdvec.
	`’d
(); ++d™, ++
di¡
) {

577 ià((100*
di¡
)/
dvec
.
	`size
(è=ğ
läac
 && 
beg_™
 =ğdvec.
	`’d
()) {

578 
beg_™
 = 
d™
;

581 ià((100*
di¡
)/
dvec
.
	`size
(è=ğ
räac
 && 
’d_™
 =ğdvec.
	`’d
()) {

582 
’d_™
 = 
d™
;

586 ià(
beg_™
 =ğ
dvec
.
	`’d
(è|| 
’d_™
 == dvec.end()) {

587 
beg_™
 = 
dvec
.
	`begš
();

588 
’d_™
 = 
dvec
.
	`’d
();

590 
	`as£¹
(
beg_™
 !ğ
’d_™
 && "Empty vector");

592 --
’d_™
;

595 cÚ¡ 
DoubË_t
 
Íos
 = *
beg_™
;

596 cÚ¡ 
DoubË_t
 
½os
 = *
’d_™
;

598 ià(!(
Íos
 < 
½os
)) {

599 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::Compu‹M‘ric(è- mš v®ui g»©”hª max v®ue" << 
Endl
;

610 
fV¬SÿË
[
v™
->
fœ¡
] = 
½os
 - 
Íos
;

613 
fV¬
.
	`ş—r
();

615 
UIÁ_t
 
›v’t
 = 0; iev’ˆ< 
fEv’t
.
	`size
(); ++ievent) {

616 
fEv’t
[
›v’t
] = 
	`SÿË
(fEvent[ievent]);

618 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fDimn
; ++ivar) {

619 
fV¬
[
iv¬
].
	`push_back
(
fEv’t
[
›v’t
].
	`G‘V¬
(ivar));

622 
	}
}

628 cÚ¡ 
	gTMVA
::
kNN
::
Ev’t
 
TMVA
::kNN::
ModuËkNN
::
	$SÿË
(cÚ¡ 
Ev’t
 &
ev’t
) const

630 ià(
fV¬SÿË
.
	`em±y
()) {

631  
ev’t
;

634 ià(
ev’t
.
	`G‘NV¬
(è!ğ
fV¬SÿË
.
	`size
()) {

635 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::SÿË(è- mism©ched m‘riøªdƒv’ˆsize" << 
Endl
;

636  
ev’t
;

639 
V¬Vec
 
	`vvec
(
ev’t
.
	`G‘NV¬
(), 0.0);

641 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
ev’t
.
	`G‘NV¬
(); ++ivar) {

642 
¡d
::
m­
<, 
DoubË_t
>::
cÚ¡_™”©Ü
 
f™
 = 
fV¬SÿË
.
	`fšd
(
iv¬
);

643 ià(
f™
 =ğ
fV¬SÿË
.
	`’d
()) {

644 
	`Log
(è<< 
kFATAL
 << "ModuËkNN::SÿË(è- faedØfšd sÿË fÜ " << 
iv¬
 << 
Endl
;

648 ià(
f™
->
£cÚd
 > 0.0) {

649 
vvec
[
iv¬
] = 
ev’t
.
	`G‘V¬
(iv¬)/
f™
->
£cÚd
;

652 
	`Log
(è<< 
kFATAL
 << "V¬ŸbË " << 
iv¬
 << " ha z”Øwidth" << 
Endl
;

656  
	`Ev’t
(
vvec
, 
ev’t
.
	`G‘Weight
(),ƒv’t.
	`G‘Ty³
(),ƒv’t.
	`G‘T¬g‘s
());

657 
	}
}

662 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Pršt
() const

664 
	`Pršt
(
¡d
::
cout
);

665 
	}
}

670 
	gTMVA
::
kNN
::
ModuËkNN
::
	$Pršt
(
¡d
::
o¡»am
 &
os
) const

672 
os
 << "----------------------------------------------------------------------"<< 
¡d
::
’dl
;

673 
os
 << "Prštšg kÂ„esuÉ" << 
¡d
::
’dl
;

674 
os
 << 
fkNNEv’t
 << 
¡d
::
’dl
;

676 
UIÁ_t
 
couÁ
 = 0;

678 
¡d
::
m­
<
ShÜt_t
, 
DoubË_t
> 
mš
, 
max
;

680 
os
 << "Prštšg " << 
fkNNLi¡
.
	`size
(è<< "‚—»¡‚eighbÜs" << 
¡d
::
’dl
;

681 
Li¡
::
cÚ¡_™”©Ü
 
™
 = 
fkNNLi¡
.
	`begš
(); iˆ!ğfkNNLi¡.
	`’d
(); ++it) {

682 
os
 << ++
couÁ
 << ": " << 
™
->
£cÚd
 << ": " << it->
fœ¡
->
	`G‘Ev’t
(è<< 
¡d
::
’dl
;

684 cÚ¡ 
Ev’t
 &
ev’t
 = 
™
->
fœ¡
->
	`G‘Ev’t
();

685 
UShÜt_t
 
iv¬
 = 0; iv¬ < 
ev’t
.
	`G‘NV¬
(); ++ivar) {

686 ià(
mš
.
	`fšd
(
iv¬
è=ğmš.
	`’d
()) {

687 
mš
[
iv¬
] = 
ev’t
.
	`G‘V¬
(ivar);

689 ià(
mš
[
iv¬
] > 
ev’t
.
	`G‘V¬
(ivar)) {

690 
mš
[
iv¬
] = 
ev’t
.
	`G‘V¬
(ivar);

693 ià(
max
.
	`fšd
(
iv¬
è=ğmax.
	`’d
()) {

694 
max
[
iv¬
] = 
ev’t
.
	`G‘V¬
(ivar);

696 ià(
max
[
iv¬
] < 
ev’t
.
	`G‘V¬
(ivar)) {

697 
max
[
iv¬
] = 
ev’t
.
	`G‘V¬
(ivar);

702 ià(
mš
.
	`size
(è=ğ
max
.size()) {

703 
¡d
::
m­
<
ShÜt_t
, 
DoubË_t
>::
cÚ¡_™”©Ü
 
m™
 = 
mš
.
	`begš
(); m™ !ğmš.
	`’d
(); ++mit) {

704 cÚ¡ 
ShÜt_t
 
i
 = 
m™
->
fœ¡
;

705 
	`Log
(è<< 
kINFO
 << "(v¬, mš, maxèğ(" << 
i
 << "," << 
mš
[i] << ", " << 
max
[i] << ")" << 
Endl
;

709 
os
 << "----------------------------------------------------------------------" << 
¡d
::
’dl
;

710 
	}
}

	@src/MsgLogger.cxx

36 
	~"TMVA/MsgLogg”.h
"

38 
	~"TMVA/CÚfig.h
"

39 
	~"TMVA/Ty³s.h
"

42 
	~"Rio¡»am.h
"

43 
	~"Rty³s.h
"

44 
	~"TObjeù.h
"

47 
	~<as£¹.h
>

48 
	~<c¡dlib
>

49 
	~<iomª
>

50 
	~<memÜy
>

53 
CÏssImp
(
TMVA
::
MsgLogg”
);

57 cÚ¡ 
UIÁ_t
 
	gTMVA
::
MsgLogg”
::
fgMaxSourûSize
 = 25;

59 cÚ¡ 
	g¡d
::
¡ršg
 
TMVA
::
MsgLogg”
::
fgP»fix
 = "";

60 cÚ¡ 
	g¡d
::
¡ršg
 
TMVA
::
MsgLogg”
::
fgSuffix
 = ": ";

61 #ià
__ılu¥lus
 > 199711L

62 
	g¡d
::
©omic
<
BoŞ_t
> 
TMVA
::
MsgLogg”
::
fgInhib™Ouut
{
kFALSE
};

63 
	g¡d
::
©omic
<cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>*> TMVA::
MsgLogg”
::
fgTy³M­
{0};

64 
	g¡d
::
©omic
<cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>*> TMVA::
MsgLogg”
::
fgCŞÜM­
{0};

66 
BoŞ_t
 
	gTMVA
::
MsgLogg”
::
fgInhib™Ouut
 = 
kFALSE
;

67 cÚ¡ 
	g¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>* TMVA::
MsgLogg”
::
fgTy³M­
 = 0;

68 cÚ¡ 
	g¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>* TMVA::
MsgLogg”
::
fgCŞÜM­
 = 0;

70 
	g¡d
::
unique_±r
<cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
> > 
gOwnTy³M­
;

71 
	g¡d
::
unique_±r
<cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
> > 
gOwnCŞÜM­
;

74 
	gTMVA
::
MsgLogg”
::
	$Inhib™Ouut
(è{ 
fgInhib™Ouut
 = 
kTRUE
; 
	}
}

75 
	gTMVA
::
MsgLogg”
::
	$EÇbËOuut
(è{ 
fgInhib™Ouut
 = 
kFALSE
; 
	}
}

79 
	gTMVA
::
MsgLogg”
::
	$MsgLogg”
ĞcÚ¡ 
TObjeù
* 
sourû
, 
EMsgTy³
 
mšTy³
 )

80 : 
	`fObjSourû
 ( 
sourû
 ),

81 
	`fSŒSourû
 ( "" ),

82 
	`fAùiveTy³
Ğ
kINFO
 ),

83 
	$fMšTy³
 ( 
mšTy³
 )

85 
	`In™M­s
();

86 
	}
}

91 
	gTMVA
::
MsgLogg”
::
	$MsgLogg”
ĞcÚ¡ 
¡d
::
¡ršg
& 
sourû
, 
EMsgTy³
 
mšTy³
 )

92 : 
	`fObjSourû
 ( 0 ),

93 
	`fSŒSourû
 ( 
sourû
 ),

94 
	`fAùiveTy³
Ğ
kINFO
 ),

95 
	$fMšTy³
 ( 
mšTy³
 )

97 
	`In™M­s
();

98 
	}
}

103 
	gTMVA
::
MsgLogg”
::
	$MsgLogg”
Ğ
EMsgTy³
 
mšTy³
 )

104 : 
	`fObjSourû
 ( 0 ),

105 
	`fSŒSourû
 ( "Unknown" ),

106 
	`fAùiveTy³
Ğ
kINFO
 ),

107 
	$fMšTy³
 ( 
mšTy³
 )

109 
	`In™M­s
();

110 
	}
}

115 
	gTMVA
::
MsgLogg”
::
	$MsgLogg”
ĞcÚ¡ 
MsgLogg”
& 
·»Á
 )

116 : 
¡d
::
basic_ios
<
MsgLogg”
::
ch¬_ty³
, MsgLogg”::
Œa™s_ty³
>(),

117 
¡d
::
	`o¡ršg¡»am
(),

118 
	`TObjeù
(),

119 
	$fObjSourû
(0)

121 
	`In™M­s
();

122 *
this
 = 
·»Á
;

123 
	}
}

128 
	gTMVA
::
MsgLogg”
::~
	$MsgLogg”
()

130 
	}
}

135 
TMVA
::
MsgLogg”
& TMVA::MsgLogg”::
İ”©Ü
ğĞcÚ¡ MsgLogg”& 
·»Á
 )

137 ià(&
·»Á
 !ğ
this
) {

138 
fObjSourû
 = 
·»Á
.fObjSource;

139 
	gfSŒSourû
 = 
·»Á
.
fSŒSourû
;

140 
	gfAùiveTy³
 = 
·»Á
.
fAùiveTy³
;

141 
	gfMšTy³
 = 
·»Á
.
fMšTy³
;

144  *
	gthis
;

150 
	g¡d
::
¡ršg
 
TMVA
::
MsgLogg”
::
	$G‘FÜm©‹dSourû
() const

152 
¡d
::
¡ršg
 
sourû_Çme
;

153 ià(
fAùiveTy³
 =ğ
kHEADER
)

155 
sourû_Çme
 = 
fSŒSourû
;

157 ià(
fAùiveTy³
 =ğ
kWARNING
)

159 
sourû_Çme
 ="<WARNING>";

161 ià(
sourû_Çme
.
	`size
(è> 
fgMaxSourûSize
) {

162 
sourû_Çme
 = sourû_Çme.
	`sub¡r
Ğ0, 
fgMaxSourûSize
 - 3 );

163 
sourû_Çme
 += "...";

166  
sourû_Çme
;

167 
	}
}

172 
	g¡d
::
¡ršg
 
TMVA
::
MsgLogg”
::
	$G‘Prš‹dSourû
() const

174 
¡d
::
¡ršg
 
sourû_Çme
 = 
	`G‘FÜm©‹dSourû
();

175 ià(
sourû_Çme
.
	`size
(è< 
fgMaxSourûSize
)

176 
¡d
::
¡ršg
::
size_ty³
 
i
=
sourû_Çme
.
	`size
(); i<
fgMaxSourûSize
; i++èsourû_Çme.
	`push_back
( ' ' );

178  
fgP»fix
 + 
sourû_Çme
 + 
fgSuffix
;

179 
	}
}

184 
	gTMVA
::
MsgLogg”
::
	$S’d
()

187 
¡d
::
¡ršg
 
sourû_Çme
 = 
	`G‘FÜm©‹dSourû
();

189 
¡d
::
¡ršg
 
mes§ge
 = 
this
->
	`¡r
();

190 
¡d
::
¡ršg
::
size_ty³
 
´evious_pos
 = 0, 
cu¼’t_pos
 = 0;

193 
kTRUE
) {

194 
cu¼’t_pos
 = 
mes§ge
.
	`fšd
Ğ'\n', 
´evious_pos
 );

195 
¡d
::
¡ršg
 
lše
 = 
mes§ge
.
	`sub¡r
Ğ
´evious_pos
, 
cu¼’t_pos
 -…revious_pos );

197 
¡d
::
o¡ršg¡»am
 
mes§ge_to_£nd
;

199 
mes§ge_to_£nd
.
	`£tf
Ğ
¡d
::
ios
::
adju¡f›ld
, std::ios::
Ëá
 );

200 
mes§ge_to_£nd
.
	`width
Ğ
fgMaxSourûSize
 );

201 
mes§ge_to_£nd
 << 
sourû_Çme
 << 
fgSuffix
 << 
lše
;

202 
¡d
::
¡ršg
 
msg
 = 
mes§ge_to_£nd
.
	`¡r
();

203 
this
->
	`Wr™eMsg
Ğ
fAùiveTy³
, 
msg
 );

205 ià(
cu¼’t_pos
 =ğ
mes§ge
.
Åos
) ;

206 
´evious_pos
 = 
cu¼’t_pos
 + 1;

210 
this
->
	`¡r
( "" );

211 
fAùiveTy³
 = 
kINFO
;

213 
	}
}

219 
	gTMVA
::
MsgLogg”
::
	$Wr™eMsg
Ğ
EMsgTy³
 
ty³
, cÚ¡ 
¡d
::
¡ršg
& 
lše
 ) const

221 iàĞ(
ty³
 < 
fMšTy³
 || 
fgInhib™Ouut
è&&y³!=
kFATAL
 ) ;

223 
¡d
::
m­
<
EMsgTy³
, std::
¡ršg
>::
cÚ¡_™”©Ü
 
¡y³
;

225 ià((
¡y³
 = 
fgTy³M­
.
	`lßd
()->
	`fšd
Ğ
ty³
 )è!ğfgTy³M­.lßd()->
	`’d
()) {

226 ià(!
	`gCÚfig
().
	`IsS’t
(è|| 
ty³
==
kFATAL
) {

227 ià(
	`gCÚfig
().
	`U£CŞÜ
()) {

229 ià(
ty³
 =ğ
kHEADER
 ||y³ ==
kWARNING
)

230 
¡d
::
cout
 << 
fgP»fix
 << 
lše
 << std::
’dl
;

231 ià(
ty³
 =ğ
kINFO
 ||y³ =ğ
kVERBOSE
)

233 
¡d
::
cout
 << 
lše
 << std::
’dl
;

236 
¡d
::
cout
 << 
fgCŞÜM­
.
	`lßd
()->
	`fšd
Ğ
ty³
 )->
£cÚd
 << "<" << 
¡y³
->£cÚd << ">" << 
lše
 << "\033[0m" << std::
’dl
;

241 ià(
ty³
 =ğ
kINFO
è
¡d
::
cout
 << 
fgP»fix
 << 
lše
 << std::
’dl
;

242 
¡d
::
cout
 << 
fgP»fix
 << "<" << 
¡y³
->
£cÚd
 << "> " << 
lše
 << std::
’dl
;

248 ià(
ty³
 =ğ
kFATAL
) {

249 
¡d
::
cout
 << "***>‡bÜˆ´og¿mƒxecutiÚ" << std::
’dl
;

250 
throw
 
¡d
::
	`ruÁime_”rÜ
("FATALƒrror");

255 
	}
}

260 
	gTMVA
::
MsgLogg”
& 
TMVA
::MsgLogg”::
	$Endmsg
Ğ
MsgLogg”
& 
logg”
 )

262 
logg”
.
	`S’d
();

263  
logg”
;

264 
	}
}

269 
	gTMVA
::
MsgLogg”
::
	$In™M­s
()

271 if(!
fgTy³M­
) {

272 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>*
tmp
 = 
Ãw
 std::map<TMVA::EMsgType, std::string>();

274 (*
tmp
)[
kVERBOSE
] = 
¡d
::
	`¡ršg
("VERBOSE");

275 (*
tmp
)[
kDEBUG
] = 
¡d
::
	`¡ršg
("DEBUG");

276 (*
tmp
)[
kINFO
] = 
¡d
::
	`¡ršg
("INFO");

277 (*
tmp
)[
kWARNING
] = 
¡d
::
	`¡ršg
("WARNING");

278 (*
tmp
)[
kERROR
] = 
¡d
::
	`¡ršg
("ERROR");

279 (*
tmp
)[
kFATAL
] = 
¡d
::
	`¡ršg
("FATAL");

280 (*
tmp
)[
kSILENT
] = 
¡d
::
	`¡ršg
("SILENT");

281 (*
tmp
)[
kHEADER
] = 
¡d
::
	`¡ršg
("HEADER");

282 cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>* 
ex³ùed
=0;

283 if(
fgTy³M­
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
,
tmp
)) {

285 
gOwnTy³M­
.
	`»£t
(
tmp
);

288 
d–‘e
 
tmp
;

292 if(!
fgCŞÜM­
) {

293 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>*
tmp
 = 
Ãw
 std::map<TMVA::EMsgType, std::string>();

295 (*
tmp
)[
kVERBOSE
] = 
¡d
::
	`¡ršg
("");

296 (*
tmp
)[
kDEBUG
] = 
¡d
::
	`¡ršg
("\033[34m");

297 (*
tmp
)[
kINFO
] = 
¡d
::
	`¡ršg
("");

298 (*
tmp
)[
kWARNING
] = 
¡d
::
	`¡ršg
("\033[1;31m");

299 (*
tmp
)[
kERROR
] = 
¡d
::
	`¡ršg
("\033[31m");

300 (*
tmp
)[
kFATAL
] = 
¡d
::
	`¡ršg
("\033[37;41;1m");

301 (*
tmp
)[
kSILENT
] = 
¡d
::
	`¡ršg
("\033[30m");

303 cÚ¡ 
¡d
::
m­
<
TMVA
::
EMsgTy³
, std::
¡ršg
>* 
ex³ùed
=0;

304 if(
fgCŞÜM­
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
,
tmp
)) {

306 
gOwnCŞÜM­
.
	`»£t
(
tmp
);

309 
d–‘e
 
tmp
;

312 
	}
}

	@src/NeuralNet.cxx

3 
	~"TMVA/Neu¿lN‘.h
"

5 
	~"TMVA/M‘hodDNN.h
"

7 
Çme¥aû
 
	gTMVA


9 
Çme¥aû
 
	gDNN


14 
gaussDoubË
 (
m—n
, 
sigma
)

16 
	g¡d
::
deçuÉ_¿ndom_’gše
 
g’”©Ü
;

17 
	g¡d
::
nÜm®_di¡ributiÚ
<> 
di¡ributiÚ
 (
m—n
, 
sigma
);

18  
di¡ributiÚ
 (
g’”©Ü
);

22 
unifÜmDoubË
 (
mšV®ue
, 
maxV®ue
)

24 
	g¡d
::
deçuÉ_¿ndom_’gše
 
g’”©Ü
;

25 
	g¡d
::
unifÜm_»®_di¡ributiÚ
<> 
di¡ributiÚ
(
mšV®ue
, 
maxV®ue
);

26  
di¡ributiÚ
(
g’”©Ü
);

31 
¿ndomIÁ
 (
maxV®ue
)

33 
	g¡d
::
deçuÉ_¿ndom_’gše
 
g’”©Ü
;

34 
	g¡d
::
unifÜm_št_di¡ributiÚ
<> 
di¡ributiÚ
(0,
maxV®ue
-1);

35  
di¡ributiÚ
(
g’”©Ü
);

39 
¡ud’‰DoubË
 (
di¡ributiÚP¬am‘”
)

41 
	g¡d
::
deçuÉ_¿ndom_’gše
 
g’”©Ü
;

42 
	g¡d
::
¡ud’t_t_di¡ributiÚ
<> 
di¡ributiÚ
 (
di¡ributiÚP¬am‘”
);

43  
di¡ributiÚ
 (
g’”©Ü
);

47 
	gLay”D©a
::
Lay”D©a
 (
size_t
 
šputSize
)

48 : 
m_hasDrİOut
 (
çl£
)

49 , 
m_isIÅutLay”
 (
Œue
)

50 , 
m_hasWeights
 (
çl£
)

51 , 
m_hasG¿d›Ás
 (
çl£
)

52 , 
m_eModeOuut
 (
ModeOuutV®ues
::
DIRECT
)

54 
m_size
 = 
šputSize
;

55 
	gm_d–s
.
assign
 (
m_size
, 0);

60 
	gLay”D©a
::
Lay”D©a
 (
cÚ¡_™”©Ü_ty³
 
™IÅutBegš
, cÚ¡_™”©Ü_ty³ 
™IÅutEnd
, 
ModeOuutV®ues
 
eModeOuut
)

61 : 
m_hasDrİOut
 (
çl£
)

62 , 
m_isIÅutLay”
 (
Œue
)

63 , 
m_hasWeights
 (
çl£
)

64 , 
m_hasG¿d›Ás
 (
çl£
)

65 , 
m_eModeOuut
 (
eModeOuut
)

67 
	gm_™IÅutBegš
 = 
™IÅutBegš
;

68 
	gm_™IÅutEnd
 = 
™IÅutEnd
;

69 
	gm_size
 = 
¡d
::
di¡ªû
 (
™IÅutBegš
, 
™IÅutEnd
);

70 
	gm_d–s
.
assign
 (
m_size
, 0);

76 
	gLay”D©a
::
Lay”D©a
 (
size_t
 
_size
,

77 
cÚ¡_™”©Ü_ty³
 
™WeightBegš
,

78 
™”©Ü_ty³
 
™G¿d›ÁBegš
,

79 
¡d
::
sh¬ed_±r
<¡d::
funùiÚ
<()>> 
_aùiv©iÚFunùiÚ
,

80 
¡d
::
sh¬ed_±r
<¡d::
funùiÚ
<()>> 
_šv”£Aùiv©iÚFunùiÚ
,

81 
ModeOuutV®ues
 
eModeOuut
)

82 : 
m_size
 (
_size
)

83 , 
m_hasDrİOut
 (
çl£
)

84 , 
m_™CÚ¡WeightBegš
 (
™WeightBegš
)

85 , 
m_™G¿d›ÁBegš
 (
™G¿d›ÁBegš
)

86 , 
m_aùiv©iÚFunùiÚ
 (
_aùiv©iÚFunùiÚ
)

87 , 
m_šv”£Aùiv©iÚFunùiÚ
 (
_šv”£Aùiv©iÚFunùiÚ
)

88 , 
m_isIÅutLay”
 (
çl£
)

89 , 
m_hasWeights
 (
Œue
)

90 , 
m_hasG¿d›Ás
 (
Œue
)

91 , 
m_eModeOuut
 (
eModeOuut
)

93 
	gm_v®ues
.
assign
 (
_size
, 0);

94 
	gm_d–s
.
assign
 (
_size
, 0);

95 
	gm_v®ueG¿d›Ás
.
assign
 (
_size
, 0);

101 
	gLay”D©a
::
Lay”D©a
 (
size_t
 
_size
, 
cÚ¡_™”©Ü_ty³
 
™WeightBegš
,

102 
¡d
::
sh¬ed_±r
<¡d::
funùiÚ
<()>> 
_aùiv©iÚFunùiÚ
,

103 
ModeOuutV®ues
 
eModeOuut
)

104 : 
m_size
 (
_size
)

105 , 
m_hasDrİOut
 (
çl£
)

106 , 
m_™CÚ¡WeightBegš
 (
™WeightBegš
)

107 , 
m_aùiv©iÚFunùiÚ
 (
_aùiv©iÚFunùiÚ
)

108 , 
m_šv”£Aùiv©iÚFunùiÚ
 ()

109 , 
m_isIÅutLay”
 (
çl£
)

110 , 
m_hasWeights
 (
Œue
)

111 , 
m_hasG¿d›Ás
 (
çl£
)

112 , 
m_eModeOuut
 (
eModeOuut
)

114 
	gm_v®ues
.
assign
 (
_size
, 0);

119 
ty³Çme
 
	gLay”D©a
::
cÚš”_ty³
 
Lay”D©a
::
compu‹Probab™›s
 () const

121 
cÚš”_ty³
 
´obab™›sCÚš”
;

122 ià(
	gTMVA
::
DNN
::
isFÏgS‘
 (
ModeOuutV®ues
::
SIGMOID
, 
m_eModeOuut
))

124 
	g¡d
::
ŒªsfÜm
 (
begš
 (
m_v®ues
), 
’d
 (m_v®ues), 
¡d
::
back_š£¹”
 (
´obab™›sCÚš”
), (*
Sigmoid
.
g‘
 ()));

126 ià(
	gTMVA
::
DNN
::
isFÏgS‘
 (
ModeOuutV®ues
::
SOFTMAX
, 
m_eModeOuut
))

128 
	gsum
 = 0;

129 
	g´obab™›sCÚš”
 = 
m_v®ues
;

130 
	g¡d
::
fÜ_—ch
 (
begš
 (
´obab™›sCÚš”
), 
’d
 (´obab™›sCÚš”), [&
sum
](& 
p
){… = 
¡d
::
exp
 (p); sum +=…; });

131 ià(
	gsum
 != 0)

132 
¡d
::
fÜ_—ch
 (
begš
 (
´obab™›sCÚš”
), 
’d
 (´obab™›sCÚš”), [
sum
 ](& 
p
){… /= sum; });

136 
	g´obab™›sCÚš”
.
assign
 (
begš
 (
m_v®ues
), 
’d
 (m_values));

138  
	g´obab™›sCÚš”
;

145 
	gLay”
::
Lay”
 (
size_t
 
_numNodes
, 
EnumFunùiÚ
 
_aùiv©iÚFunùiÚ
, 
ModeOuutV®ues
 
eModeOuutV®ues
)

146 : 
m_numNodes
 (
_numNodes
)

147 , 
m_eModeOuutV®ues
 (
eModeOuutV®ues
)

148 , 
m_aùiv©iÚFunùiÚTy³
 (
_aùiv©iÚFunùiÚ
)

150 
size_t
 
	giNode
 = 0; iNod< 
	g_numNodes
; ++iNode)

152 autØ
	gaùFnc
 = 
Lš—r
;

153 autØ
	gšvAùFnc
 = 
InvLš—r
;

154 
	g_aùiv©iÚFunùiÚ
)

156 
	gEnumFunùiÚ
::
ZERO
:

157 
aùFnc
 = 
Z”oFnc
;

158 
	gšvAùFnc
 = 
Z”oFnc
;

160 
	gEnumFunùiÚ
::
LINEAR
:

161 
aùFnc
 = 
Lš—r
;

162 
	gšvAùFnc
 = 
InvLš—r
;

164 
	gEnumFunùiÚ
::
TANH
:

165 
aùFnc
 = 
Tªh
;

166 
	gšvAùFnc
 = 
InvTªh
;

168 
	gEnumFunùiÚ
::
RELU
:

169 
aùFnc
 = 
ReLU
;

170 
	gšvAùFnc
 = 
InvReLU
;

172 
	gEnumFunùiÚ
::
SYMMRELU
:

173 
aùFnc
 = 
SymmReLU
;

174 
	gšvAùFnc
 = 
InvSymmReLU
;

176 
	gEnumFunùiÚ
::
TANHSHIFT
:

177 
aùFnc
 = 
TªhShiá
;

178 
	gšvAùFnc
 = 
InvTªhShiá
;

180 
	gEnumFunùiÚ
::
SOFTSIGN
:

181 
aùFnc
 = 
SoáSign
;

182 
	gšvAùFnc
 = 
InvSoáSign
;

184 
	gEnumFunùiÚ
::
SIGMOID
:

185 
aùFnc
 = 
Sigmoid
;

186 
	gšvAùFnc
 = 
InvSigmoid
;

188 
	gEnumFunùiÚ
::
GAUSS
:

189 
aùFnc
 = 
Gauss
;

190 
	gšvAùFnc
 = 
InvGauss
;

192 
	gEnumFunùiÚ
::
GAUSSCOMPLEMENT
:

193 
aùFnc
 = 
GaussCom¶em’t
;

194 
	gšvAùFnc
 = 
InvGaussCom¶em’t
;

197 
	gm_aùiv©iÚFunùiÚ
 = 
aùFnc
;

198 
	gm_šv”£Aùiv©iÚFunùiÚ
 = 
švAùFnc
;

211 
	gS‘tšgs
::
S‘tšgs
 (
TSŒšg
 
Çme
,

212 
size_t
 
_cÚv”g’ûS‹ps
, size_ˆ
_b©chSize
, size_ˆ
_‹¡R•‘™iÚs
,

213 
_çùÜWeightDeÿy
, 
EnumReguÏriz©iÚ
 
eReguÏriz©iÚ
,

214 
Mšimiz”Ty³
 
_eMšimiz”Ty³
, 
_Ë¬nšgR©e
,

215 
_mom’tum
, 
_»³t™iÚs
, 
boŞ
 
_u£MuÉ™h»adšg
)

216 : 
m_tim”
 (100, 
Çme
)

217 , 
m_mšProg»ss
 (0)

218 , 
m_maxProg»ss
 (100)

219 , 
m_cÚv”g’ûS‹ps
 (
_cÚv”g’ûS‹ps
)

220 , 
m_b©chSize
 (
_b©chSize
)

221 , 
m_‹¡R•‘™iÚs
 (
_‹¡R•‘™iÚs
)

222 , 
m_çùÜWeightDeÿy
 (
_çùÜWeightDeÿy
)

223 , 
couÁ_E
 (0)

224 , 
couÁ_dE
 (0)

225 , 
couÁ_mb_E
 (0)

226 , 
couÁ_mb_dE
 (0)

227 , 
m_»guÏriz©iÚ
 (
eReguÏriz©iÚ
)

228 , 
fL—ºšgR©e
 (
_Ë¬nšgR©e
)

229 , 
fMom’tum
 (
_mom’tum
)

230 , 
fR•‘™iÚs
 (
_»³t™iÚs
)

231 , 
fMšimiz”Ty³
 (
_eMšimiz”Ty³
)

232 , 
m_cÚv”g’ûCouÁ
 (0)

233 , 
m_maxCÚv”g’ûCouÁ
 (0)

234 , 
m_mšE¼Ü
 (1e10)

235 , 
m_u£MuÉ™h»adšg
 (
_u£MuÉ™h»adšg
)

236 , 
fMÚ™Üšg
 (
NULL
)

240 
	gS‘tšgs
::~
S‘tšgs
 ()

260 
CÏssifiÿtiÚS‘tšgs
::
¡¬tT¿šCyşe
 ()

262 ià(
fMÚ™Üšg
)

264 
ü—‹
 ("ROC", 100, 0, 1, 100, 0, 1);

265 
ü—‹
 ("Significance", 100, 0, 1, 100, 0, 3);

266 
ü—‹
 ("OutputSig", 100, 0, 1);

267 
ü—‹
 ("OutputBkg", 100, 0, 1);

268 
	gfMÚ™Üšg
->
ProûssEv’ts
 ();

275 
	gCÏssifiÿtiÚS‘tšgs
::
’dT¿šCyşe
 ()

277 ià(
fMÚ™Üšg
èfMÚ™Üšg->
ProûssEv’ts
 ();

283 
	gCÏssifiÿtiÚS‘tšgs
::
‹¡Sam¶e
 (, 
ouut
, 
rg‘
, 
weight
)

286 
	gm_ouut
.
push_back
 (
ouut
);

287 
	gm_rg‘s
.
push_back
 (
rg‘
);

288 
	gm_weights
.
push_back
 (
weight
);

295 
	gCÏssifiÿtiÚS‘tšgs
::
¡¬tTe¡Cyşe
 ()

297 
m_ouut
.
ş—r
 ();

298 
	gm_rg‘s
.
ş—r
 ();

299 
	gm_weights
.
ş—r
 ();

305 
	gCÏssifiÿtiÚS‘tšgs
::
’dTe¡Cyşe
 ()

307 ià(
m_ouut
.
em±y
 ())

309 
	gmšV®
 = *
¡d
::
mš_–em’t
 (
begš
 (
m_ouut
), 
’d
 (m_output));

310 
	gmaxV®
 = *
¡d
::
max_–em’t
 (
begš
 (
m_ouut
), 
’d
 (m_output));

311 cÚ¡ 
size_t
 
	gnumBšsROC
 = 1000;

312 cÚ¡ 
size_t
 
	gnumBšsD©a
 = 100;

314 
	g¡d
::
veùÜ
<> 
ŒuePos™ives
 (
numBšsROC
+1, 0);

315 
	g¡d
::
veùÜ
<> 
çl£Pos™ives
 (
numBšsROC
+1, 0);

316 
	g¡d
::
veùÜ
<> 
ŒueNeg©ives
 (
numBšsROC
+1, 0);

317 
	g¡d
::
veùÜ
<> 
çl£Neg©ives
 (
numBšsROC
+1, 0);

319 
	g¡d
::
veùÜ
<> 
x
 (
numBšsD©a
, 0);

320 
	g¡d
::
veùÜ
<> 
d©Sig
 (
numBšsD©a
+1, 0);

321 
	g¡d
::
veùÜ
<> 
d©Bkg
 (
numBšsD©a
+1, 0);

323 
	gbšSizeROC
 = (
maxV®
 - 
mšV®
)/()
numBšsROC
;

324 
	gbšSizeD©a
 = (
maxV®
 - 
mšV®
)/()
numBšsD©a
;

326 
	gsumWeightsSig
 = 0.0;

327 
	gsumWeightsBkg
 = 0.0;

329 
size_t
 
	gb
 = 0; b < 
	gnumBšsD©a
; ++b)

331 
	gbšD©a
 = 
mšV®
 + 
b
*
bšSizeD©a
;

332 
	gx
.
©
 (
b
èğ
bšD©a
;

335 ià(
çbs
(
bšSizeROC
) < 0.0001)

338 
size_t
 
	gi
 = 0, 
	giEnd
 = 
m_ouut
.
size
 (); i < iEnd; ++i)

340 
	gv®
 = 
m_ouut
.
©
 (
i
);

341 
	gŒuth
 = 
m_rg‘s
.
©
 (
i
);

342 
	gweight
 = 
m_weights
.
©
 (
i
);

344 
boŞ
 
	gisSigÇl
 = (
Œuth
 > 0.5 ? 
Œue
 : 
çl£
);

346 ià(
	gm_sumOfSigWeights
 !ğ0 && 
m_sumOfBkgWeights
 != 0)

348 ià(
isSigÇl
)

349 
weight
 *ğ
m_sumOfSigWeights
;

351 
	gweight
 *ğ
m_sumOfBkgWeights
;

354 
size_t
 
	gbšROC
 = (
v®
-
mšV®
)/
bšSizeROC
;

355 
size_t
 
	gbšD©a
 = (
v®
-
mšV®
)/
bšSizeD©a
;

357 ià(
	gisSigÇl
)

359 
size_t
 
	gn
 = 0;‚ <ğ
bšROC
; ++n)

361 
	gŒuePos™ives
.
©
 (
n
è+ğ
weight
;

363 
size_t
 
	gn
 = 
bšROC
+1;‚ < 
	gnumBšsROC
; ++n)

365 
	gçl£Neg©ives
.
©
 (
n
è+ğ
weight
;

368 
	gd©Sig
.
©
 (
bšD©a
è+ğ
weight
;

369 
	gsumWeightsSig
 +ğ
weight
;

373 
size_t
 
	gn
 = 0;‚ <ğ
bšROC
; ++n)

375 
	gçl£Pos™ives
.
©
 (
n
è+ğ
weight
;

377 
size_t
 
	gn
 = 
bšROC
+1;‚ < 
	gnumBšsROC
; ++n)

379 
	gŒueNeg©ives
.
©
 (
n
è+ğ
weight
;

382 
	gd©Bkg
.
©
 (
bšD©a
è+ğ
weight
;

383 
	gsumWeightsBkg
 +ğ
weight
;

387 
	g¡d
::
veùÜ
<> 
sigEff
;

388 
	g¡d
::
veùÜ
<> 
backRej
;

390 
	gbe¡Signifiÿnû
 = 0;

391 
	gbe¡CutSignifiÿnû
 = 0;

393 
	gnumEv’tsSÿËFaùÜ
 = 1.0;

394 ià(
	gm_sÿËToNumEv’ts
 > 0)

396 
size_t
 
	gnumEv’ts
 = 
m_ouut
.
size
 ();

397 
	gnumEv’tsSÿËFaùÜ
 = (
m_sÿËToNumEv’ts
)/(
numEv’ts
);

400 
ş—r
 ("ROC");

401 
ş—r
 ("Significance");

403 
size_t
 
	gi
 = 0; i < 
	gnumBšsROC
; ++i)

405 
	g
 = 
ŒuePos™ives
.
©
 (
i
è* 
numEv’tsSÿËFaùÜ
;

406 
	gå
 = 
çl£Pos™ives
.
©
 (
i
è* 
numEv’tsSÿËFaùÜ
;

407 
	gŠ
 = 
ŒueNeg©ives
.
©
 (
i
è* 
numEv’tsSÿËFaùÜ
;

408 
	gâ
 = 
çl£Neg©ives
.
©
 (
i
è* 
numEv’tsSÿËFaùÜ
;

410 
	g£ff
 = (

+
â
 == 0.0 ? 1.0 : (tp / (tp+fn)));

411 
	gb»j
 = (
Š
+
å
 == 0.0 ? 0.0 : (tn / (tn+fp)));

413 
	gsigEff
.
push_back
 (
£ff
);

414 
	gbackRej
.
push_back
 (
b»j
);

417 
addPošt
 ("ROC", 
£ff
, 
b»j
);

420 
	gcu¼’tCut
 = (
i
 * 
bšSizeROC
)+
mšV®
;

422 
	gsig
 = 

;

423 
	gbkg
 = 
å
;

424 
	gsignifiÿnû
 = 
sig
 / 
sq¹
 (sig + 
bkg
);

425 ià(
	gsignifiÿnû
 > 
	gbe¡Signifiÿnû
)

427 
	gbe¡Signifiÿnû
 = 
signifiÿnû
;

428 
	gbe¡CutSignifiÿnû
 = 
cu¼’tCut
;

431 
addPošt
 ("Signifiÿnû", 
cu¼’tCut
, 
signifiÿnû
);

435 
	gm_signifiÿnûs
.
push_back
 (
be¡Signifiÿnû
);

436 
size_t
 
	g‹¡Cyşe
 = 0;

438 
ş—r
 ("OutputSig");

439 
ş—r
 ("OutputBkg");

440 
size_t
 
	gi
 = 0; i < 
	gnumBšsD©a
; ++i)

442 
addPošt
 ("OuutSig", 
x
.
©
 (
i
), 
d©Sig
.© (i)/
sumWeightsSig
);

443 
addPošt
 ("OuutBkg", 
x
.
©
 (
i
), 
d©Bkg
.© (i)/
sumWeightsBkg
);

449 ++
	g‹¡Cyşe
;

451 ià(
	gfMÚ™Üšg
)

453 
¶Ù
 ("ROC", "", 2, 
kRed
);

454 
¶Ù
 ("Signifiÿnû", "", 3, 
kRed
);

455 
¶Ù
 ("OuutSig", "", 4, 
kRed
);

456 
¶Ù
 ("OuutBkg", "§me", 4, 
kBlue
);

457 
	gfMÚ™Üšg
->
ProûssEv’ts
 ();

460 
	gm_cutV®ue
 = 
be¡CutSignifiÿnû
;

467 
boŞ
 
	gS‘tšgs
::
hasCÚv”ged
 (
‹¡E¼Ü
)

471 ià(
‹¡E¼Ü
 < 
m_mšE¼Ü
*0.999)

473 
m_cÚv”g’ûCouÁ
 = 0;

474 
	gm_mšE¼Ü
 = 
‹¡E¼Ü
;

478 ++
	gm_cÚv”g’ûCouÁ
;

479 
	gm_maxCÚv”g’ûCouÁ
 = 
¡d
::
max
 (
m_cÚv”g’ûCouÁ
, 
m_maxCÚv”g’ûCouÁ
);

483 ià(
	gm_cÚv”g’ûCouÁ
 >ğ
cÚv”g’ûS‹ps
 (è|| 
‹¡E¼Ü
 <= 0)

484  
Œue
;

486  
	gçl£
;

494 
	gCÏssifiÿtiÚS‘tšgs
::
£tWeightSums
 (
sumOfSigWeights
, 
sumOfBkgWeights
)

496 
	gm_sumOfSigWeights
 = 
sumOfSigWeights
; 
	gm_sumOfBkgWeights
 = 
sumOfBkgWeights
;

502 
	gCÏssifiÿtiÚS‘tšgs
::
£tResuÉComputiÚ
 (

503 
¡d
::
¡ršg
 
_feNameN‘CÚfig
,

504 
¡d
::
¡ršg
 
_feNameResuÉ
,

505 
¡d
::
veùÜ
<
P©‹º
>* 
_»suÉP©‹ºCÚš”
)

507 
m_pResuÉP©‹ºCÚš”
 = 
_»suÉP©‹ºCÚš”
;

508 
	gm_feNameResuÉ
 = 
_feNameResuÉ
;

509 
	gm_feNameN‘CÚfig
 = 
_feNameN‘CÚfig
;

522 
size_t
 
	gN‘
::
numWeights
 (size_ˆ
ŒaššgS¹Lay”
) const

524 
size_t
 
num
 (0);

525 
size_t
 
šdex
 (0);

526 
size_t
 
´evNodes
 (
šputSize
 ());

527 auto& 
	gÏy”
 : 
m_Ïy”s
)

529 ià(
šdex
 >ğ
ŒaššgS¹Lay”
)

530 
num
 +ğ
Ïy”
.
numWeights
 (
´evNodes
);

531 
	g´evNodes
 = 
Ïy”
.
numNodes
 ();

532 ++
	gšdex
;

534  
	gnum
;

538 
size_t
 
	gN‘
::
numNodes
 (size_ˆ
ŒaššgS¹Lay”
) const

540 
size_t
 
num
 (0);

541 
size_t
 
šdex
 (0);

542 auto& 
	gÏy”
 : 
m_Ïy”s
)

544 ià(
šdex
 >ğ
ŒaššgS¹Lay”
)

545 
num
 +ğ
Ïy”
.
numNodes
 ();

546 ++
	gšdex
;

548  
	gnum
;

554 
	gN‘
::
flDrİCÚš”
 (
DrİCÚš”
& 
drİCÚš”
, 
drİF¿ùiÚ
, 
size_t
 
_numNodes
) const

556 
size_t
 
	gnumDrİs
 = 
drİF¿ùiÚ
 * 
_numNodes
;

557 ià(
	gnumDrİs
 >ğ
_numNodes
)

558 
numDrİs
 = 
_numNodes
 - 1;

559 
	gdrİCÚš”
.
š£¹
 (
’d
 (
drİCÚš”
), 
_numNodes
-
numDrİs
, 
Œue
);

560 
	gdrİCÚš”
.
š£¹
 (
’d
 (
drİCÚš”
), 
numDrİs
, 
çl£
);

562 
	g¡d
::
¿ndom_shufæe
 (
’d
 (
drİCÚš”
)-
_numNodes
,ƒnd (dropContainer));

	@src/Node.cxx

40 
	~<¡dexû±
>

41 
	~<iosfwd
>

42 
	~<io¡»am
>

44 
	~"TMVA/Node.h
"

45 
	~"TMVA/ToŞs.h
"

47 
CÏssImp
(
TMVA
::
Node
);

49 
IÁ_t
 
	gTMVA
::
Node
::
fgCouÁ
 = 0;

51 
	gTMVA
::
Node
::
	$Node
()

52 : 
	`fP¬’t
Ğ
NULL
 ),

53 
	`fLeá
 ( 
NULL
),

54 
	`fRight
 ( 
NULL
 ),

55 
	`fPos
 ( 'u' ),

56 
	`fD•th
 ( 0 ),

57 
	$fP¬’tT»e
Ğ
NULL
 )

60 
fgCouÁ
++;

61 
	}
}

66 
	gTMVA
::
Node
::
	$Node
Ğ
Node
* 
p
, 
pos
 )

67 : 
	`fP¬’t
 ( 
p
 ),

68 
	`fLeá
 ( 
NULL
 ),

69 
	`fRight
Ğ
NULL
 ),

70 
	`fPos
 ( 
pos
 ),

71 
	`fD•th
Ğ
p
->
	`G‘D•th
() + 1),

72 
	`fP¬’tT»e
(
p
->
	$G‘P¬’tT»e
())

74 
fgCouÁ
++;

75 ià(
fPos
 =ğ'l' ) 
p
->
	`S‘Leá
(
this
);

76 ià(
fPos
 =ğ'r' ) 
p
->
	`S‘Right
(
this
);

77 
	}
}

84 
	gTMVA
::
Node
::
	$Node
 ( cÚ¡ 
Node
 &
n
 )

85 : 
	`fP¬’t
Ğ
NULL
 ),

86 
	`fLeá
 ( 
NULL
),

87 
	`fRight
 ( 
NULL
 ),

88 
	`fPos
 ( 
n
.
fPos
 ),

89 
	`fD•th
 ( 
n
.
fD•th
 ),

90 
	$fP¬’tT»e
Ğ
NULL
 )

92 
fgCouÁ
++;

93 
	}
}

98 
	gTMVA
::
Node
::~
	$Node
()

100 
fgCouÁ
--;

101 
	}
}

106 
	gTMVA
::
Node
::
	$G‘CouÁ
()

108  
fgCouÁ
;

109 
	}
}

114 
IÁ_t
 
	gTMVA
::
Node
::
	$CouÁMeAndAÎDaugh‹rs
() const

116 
IÁ_t
 
n
=1;

117 ià(
this
->
	`G‘Leá
(è!ğ
NULL
)

118 
n
+ğ
this
->
	`G‘Leá
()->
	`CouÁMeAndAÎDaugh‹rs
();

119 ià(
this
->
	`G‘Right
(è!ğ
NULL
)

120 
n
+ğ
this
->
	`G‘Right
()->
	`CouÁMeAndAÎDaugh‹rs
();

122  
n
;

123 
	}
}

129 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<<Ğ
¡d
::o¡»am& 
os
, cÚ¡ 
	gTMVA
::
Node
& 
node
 )

131 
node
.
Pršt
(
os
);

132  
	gos
;

138 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<<Ğ
¡d
::o¡»am& 
os
, cÚ¡ 
	gTMVA
::
Node
* 
node
 )

140 ià(
node
!=
NULL
ènode->
Pršt
(
os
);

141  
	gos
;

147 * 
	gTMVA
::
Node
::
	$AddXMLTo
Ğ* 
·»Á
 ) const

149 
¡d
::
¡ršg¡»am
 
	`s
("");

150 
	`AddCÚ‹ÁToNode
(
s
);

151 * 
node
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Node", 
s
.
	`¡r
().
	`c_¡r
());

152 
	`gToŞs
().
	`AddA‰r
Ğ
node
, "pos", 
fPos
 );

153 
	`gToŞs
().
	`AddA‰r
Ğ
node
, "d•th", 
fD•th
 );

154 
this
->
	`AddA‰ribu‹sToNode
(
node
);

155 ià(
this
->
	`G‘Leá
()èthis->G‘Leá()->
	`AddXMLTo
(
node
);

156 ià(
this
->
	`G‘Right
()èthis->G‘Right()->
	`AddXMLTo
(
node
);

157  
node
;

158 
	}
}

163 
	gTMVA
::
Node
::
	$R—dXML
Ğ* 
node
, 
UIÁ_t
 
tmva_V”siÚ_Code
 )

165 
	`R—dA‰ribu‹s
(
node
, 
tmva_V”siÚ_Code
);

166 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
node
);

167 ià(
cÚ‹Á
) {

168 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

169 
	`R—dCÚ‹Á
(
s
);

171 
	`gToŞs
().
	`R—dA‰r
Ğ
node
, "pos", 
fPos
 );

172 
	`gToŞs
().
	`R—dA‰r
Ğ
node
, "d•th", 
fD•th
 );

174 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
node
);

175 
ch
) {

176 
Node
* 
n
 = 
	`C»©eNode
();

177 
n
->
	`R—dXML
(
ch
, 
tmva_V”siÚ_Code
);

178 ià(
n
->
	`G‘Pos
()=='l'è{ 
this
->
	`S‘Leá
(n); }

179 if(
n
->
	`G‘Pos
()=='r'è{ 
this
->
	`S‘Right
(n); }

181 
¡d
::
cout
 << "Ã™h”†eá‚Ü„ight" << std::
’dl
;

183 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

185 
	}
}

	@src/OptimizeConfigParameters.cxx

28 
	~"TMVA/O±imizeCÚfigP¬am‘”s.h
"

30 
	~"TMVA/D©aS‘.h
"

31 
	~"TMVA/D©aS‘Info.h
"

32 
	~"TMVA/Ev’t.h
"

33 
	~"TMVA/IF™‹rT¬g‘.h
"

34 
	~"TMVA/F™‹rBa£.h
"

35 
	~"TMVA/G’‘icF™‹r.h
"

36 
	~"TMVA/IM‘hod.h
"

37 
	~"TMVA/IÁ”v®.h
"

38 
	~"TMVA/M‘hodBa£.h
"

39 
	~"TMVA/M‘hodFDA.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/Mšu™F™‹r.h
"

42 
	~"TMVA/PDF.h
"

43 
	~"TMVA/ToŞs.h
"

44 
	~"TMVA/Ty³s.h
"

46 
	~"TDœeùÜy.h
"

47 
	~"TG¿ph.h
"

48 
	~"TH1.h
"

49 
	~"TH2.h
"

50 
	~"TM©h.h
"

52 
	~<c¡dlib
>

53 
	~<lim™s
>

56 
CÏssImp
(
TMVA
::
O±imizeCÚfigP¬am‘”s
);

61 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::O±imizeCÚfigP¬am‘”s(
M‘hodBa£
 * cÚ¡ 
m‘hod
, 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*> 
tuÃP¬am‘”s
, TSŒšg 
fomTy³
, TSŒšg 
İtimiz©iÚF™Ty³
)

62 : 
fM‘hod
(
m‘hod
),

63 
fTuÃP¬am‘”s
(
tuÃP¬am‘”s
),

64 
fFOMTy³
(
fomTy³
),

65 
fO±imiz©iÚF™Ty³
(
İtimiz©iÚF™Ty³
),

66 
fMvaSig
(
NULL
),

67 
fMvaBkg
(
NULL
),

68 
fMvaSigFšeBš
(
NULL
),

69 
fMvaBkgFšeBš
(
NULL
),

70 
	$fNÙDÚeY‘
(
kFALSE
)

72 
¡d
::
¡ršg
 
Çme
 = "OptimizeConfigParameters_";

73 
Çme
 +ğ
¡d
::
	`¡ršg
(
	`G‘M‘hod
()->
	`G‘Name
());

74 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
Çme
);

75 ià(
fM‘hod
->
	`DoReg»ssiÚ
()){

76 
	`Log
(è<< 
kFATAL
 << " ERROR: Sorry, Regression is‚ot yet implement for‡utomatic…arameter optimization"

77 << " -->ƒx™" << 
Endl
;

80 
	`Log
(è<< 
kINFO
 << "Automatic optimisation ofuning…arameters in "

81 << 
	`G‘M‘hod
()->
	`G‘Name
(è<< " u£s:" << 
Endl
;

83 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

84 
™
=
fTuÃP¬am‘”s
.
	`begš
(); it!=fTuÃP¬am‘”s.
	`’d
();it++) {

85 
	`Log
(è<< 
kINFO
 << 
™
->
fœ¡


86 << " iÀ¿ngäom: " << 
™
->
£cÚd
->
	`G‘Mš
()

87 << "o: " << 
™
->
£cÚd
->
	`G‘Max
()

88 << " iÀ: " << 
™
->
£cÚd
->
	`G‘Nbšs
() << " steps"

89 << 
Endl
;

91 
	`Log
(è<< 
kINFO
 << " usšghİtiÚs: " << 
fFOMTy³
 << "‡nd " << 
fO±imiz©iÚF™Ty³
 << 
Endl
;

92 
	}
}

97 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::~
	$O±imizeCÚfigP¬am‘”s
()

99 if(!
	`G‘M‘hod
()->
	`IsS’tFe
()èG‘M‘hod()->
	`Ba£Dœ
()->
	`cd
();

100 
IÁ_t
 
n
=
	`IÁ_t
(
fFOMvsI‹r
.
	`size
());

101 
Flßt_t
 *
x
 = 
Ãw
 Flßt_t[
n
];

102 
Flßt_t
 *
y
 = 
Ãw
 Flßt_t[
n
];

103 
Flßt_t
 
ymš
=+999999999;

104 
Flßt_t
 
ymax
=-999999999;

106 
IÁ_t
 
i
=0;i<
n
;i++){

107 
x
[
i
] = 
	`Flßt_t
(i);

108 
y
[
i
] = 
fFOMvsI‹r
[i];

109 ià(
ymš
>
y
[
i
]) ymin=y[i];

110 ià(
ymax
<
y
[
i
]) ymax=y[i];

113 
TH2D
 *
h
=
Ãw
 
	`TH2D
(
	`TSŒšg
(
	`G‘M‘hod
()->
	`G‘Name
())+"_FOMvsI‹rF¿me","",2,0,
n
,2,
ymš
*0.95,
ymax
*1.05);

114 
h
->
	`S‘XT™Ë
("#™”©iÚ "+
fO±imiz©iÚF™Ty³
);

115 
h
->
	`S‘YT™Ë
(
fFOMTy³
);

116 
TG¿ph
 *
gFOMvsI‹r
 = 
Ãw
 
	`TG¿ph
(
n
,
x
,
y
);

117 
gFOMvsI‹r
->
	`S‘Name
((
	`TSŒšg
(
	`G‘M‘hod
()->
	`G‘Name
())+"_FOMvsI‹r").
	`D©a
());

118 if(!
	`G‘M‘hod
()->
	`IsS’tFe
()è
gFOMvsI‹r
->
	`Wr™e
();

119 if(!
	`G‘M‘hod
()->
	`IsS’tFe
()è
h
->
	`Wr™e
();

121 
d–‘e
 [] 
x
;

122 
d–‘e
 [] 
y
;

124 
	}
}

128 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$İtimize
()

130 ià(
fO±imiz©iÚF™Ty³
 =ğ"Sÿn" ) 
this
->
	`İtimizeSÿn
();

131 ià(
fO±imiz©iÚF™Ty³
 =ğ"F™GA" || fO±imiz©iÚF™Ty³ =ğ"Mšu™" ) 
this
->
	`İtimizeF™
();

133 
	`Log
(è<< 
kFATAL
 << "You havcho£Àa İtimiz©iÚy³ " << 
fO±imiz©iÚF™Ty³


134 << "h© i nÙ (y‘ècoded -->ƒx™()" << 
Endl
;

137 
	`Log
(è<< 
kINFO
 << "FÜ " << 
	`G‘M‘hod
()->
	`G‘Name
(è<< "hİtimized P¬am‘” ¬e: " << 
Endl
;

138 
¡d
::
m­
<
TSŒšg
,
DoubË_t
>::
™”©Ü
 
™
;

139 
™
=
fTuÃdP¬am‘”s
.
	`begš
(); it!ğfTuÃdP¬am‘”s.
	`’d
(); it++){

140 
	`Log
(è<< 
kINFO
 << 
™
->
fœ¡
 << " = " << it->
£cÚd
 << 
Endl
;

142  
fTuÃdP¬am‘”s
;

144 
	}
}

150 
	g¡d
::
veùÜ
< > 
TMVA
::
O±imizeCÚfigP¬am‘”s
::
G‘SÿnIndiûs
Ğ
v®
, 
¡d
::veùÜ<> 
ba£
){

151 
¡d
::
veùÜ
 < > 
šdiûs
;

152 
UIÁ_t
 
	gi
=0; i< 
	gba£
.
size
(); i++){

153 
	gšdiûs
.
push_back
(
v®
 % 
ba£
[
i
] );

154 
	gv®
 = Ğ
æoÜ
Ğ(
v®
è/ (
ba£
[
i
]) ) );

156  
	gšdiûs
;

165 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$İtimizeSÿn
()

168 
DoubË_t
 
be¡FOM
=-1000000, 
cu¼’tFOM
;

170 
¡d
::
m­
<
TSŒšg
,
DoubË_t
> 
cu¼’tP¬am‘”s
;

171 
¡d
::
m­
<
TSŒšg
,
TMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

175 
cu¼’tP¬am‘”s
.
	`ş—r
();

176 
fTuÃdP¬am‘”s
.
	`ş—r
();

178 
™
=
fTuÃP¬am‘”s
.
	`begš
(); it!=fTuÃP¬am‘”s.
	`’d
(); it++){

179 
cu¼’tP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
DoubË_t
>(
™
->
fœ¡
,™->
£cÚd
->
	`G‘Mš
()));

180 
fTuÃdP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
DoubË_t
>(
™
->
fœ¡
,™->
£cÚd
->
	`G‘Mš
()));

187 
¡d
::
veùÜ
< std::veùÜ <
DoubË_t
> > 
v
;

188 
™
=
fTuÃP¬am‘”s
.
	`begš
(); it!=fTuÃP¬am‘”s.
	`’d
(); it++){

189 
¡d
::
veùÜ
< 
DoubË_t
 > 
tmp
;

190 
IÁ_t
 
k
=0; k<
™
->
£cÚd
->
	`G‘Nbšs
(); k++){

191 
tmp
.
	`push_back
(
™
->
£cÚd
->
	`G‘EËm’t
(
k
));

193 
v
.
	`push_back
(
tmp
);

195 
IÁ_t
 
NtÙ
 = 1;

196 
¡d
::
veùÜ
< > 
Nšdividu®
;

197 
UIÁ_t
 
i
=0; i<
v
.
	`size
(); i++) {

198 
NtÙ
 *ğ
v
[
i
].
	`size
();

199 
Nšdividu®
.
	`push_back
(
v
[
i
].
	`size
());

203 
i
=0; i<
NtÙ
; i++){

204 
UIÁ_t
 
šdex
=0;

205 
¡d
::
veùÜ
<> 
šdiûs
 = 
	`G‘SÿnIndiûs
(
i
, 
Nšdividu®
 );

206 
™
=
fTuÃP¬am‘”s
.
	`begš
(), 
šdex
=0; index< 
šdiûs
.
	`size
(); index++, it++){

207 
cu¼’tP¬am‘”s
[
™
->
fœ¡
] = 
v
[
šdex
][
šdiûs
[index]];

209 
	`Log
(è<< 
kINFO
 << "--------------------------" << 
Endl
;

210 
	`Log
(è<< 
kINFO
 <<"S‘tšg bešgƒv®u©ed:" << 
Endl
;

211 
¡d
::
m­
<
TSŒšg
,
DoubË_t
>::
™”©Ü
 
™_´št
=
cu¼’tP¬am‘”s
.
	`begš
();

212 
™_´št
!=
cu¼’tP¬am‘”s
.
	`’d
(); it_print++){

213 
	`Log
(è<< 
kINFO
 << " " << 
™_´št
->
fœ¡
 << " = " << it_´št->
£cÚd
 << 
Endl
;

216 
	`G‘M‘hod
()->
	`Re£t
();

217 
	`G‘M‘hod
()->
	`S‘TuÃP¬am‘”s
(
cu¼’tP¬am‘”s
);

219 if(!
	`G‘M‘hod
()->
	`IsS’tFe
()èG‘M‘hod()->
	`Ba£Dœ
()->
	`cd
();

220 ià(
i
==0è
	`G‘M‘hod
()->
	`G‘T¿nsfÜm©iÚHªdËr
().
	`C®cT¿nsfÜm©iÚs
(

221 
	`G‘M‘hod
()->
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
());

222 
Ev’t
::
	`S‘IsT¿ššg
(
kTRUE
);

223 
	`G‘M‘hod
()->
	`T¿š
();

224 
Ev’t
::
	`S‘IsT¿ššg
(
kFALSE
);

225 
cu¼’tFOM
 = 
	`G‘FOM
();

226 
	`Log
(è<< 
kINFO
 << "FOM wa found : " << 
cu¼’tFOM
 << "; cu¼’ˆbe¡ i " << 
be¡FOM
 << 
Endl
;

228 ià(
cu¼’tFOM
 > 
be¡FOM
) {

229 
be¡FOM
 = 
cu¼’tFOM
;

230 
¡d
::
m­
<
TSŒšg
,
DoubË_t
>::
™”©Ü
 
™”
=
cu¼’tP¬am‘”s
.
	`begš
();

231 
™”
 !ğ
cu¼’tP¬am‘”s
.
	`’d
(); iter++){

232 
fTuÃdP¬am‘”s
[
™”
->
fœ¡
]=™”->
£cÚd
;

237 
	`G‘M‘hod
()->
	`Re£t
();

238 
	`G‘M‘hod
()->
	`S‘TuÃP¬am‘”s
(
fTuÃdP¬am‘”s
);

239 
	}
}

243 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$İtimizeF™
()

246 
¡d
::
veùÜ
<
TMVA
::
IÁ”v®
*> 
¿nges
;

247 
¡d
::
m­
<
TSŒšg
, 
TMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

248 
¡d
::
veùÜ
<
DoubË_t
> 
·rs
;

250 
™
=
fTuÃP¬am‘”s
.
	`begš
(); iˆ!ğfTuÃP¬am‘”s.
	`’d
(); it++){

251 
¿nges
.
	`push_back
(
Ãw
 
TMVA
::
	`IÁ”v®
(*(
™
->
£cÚd
)));

252 
·rs
.
	`push_back
Ğ(
™
->
£cÚd
)->
	`G‘M—n
() );

258 
	`G‘M‘hod
()->
	`G‘T¿nsfÜm©iÚHªdËr
().
	`C®cT¿nsfÜm©iÚs
(G‘M‘hod()->
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
());

262 
F™‹rBa£
* 
f™‹r
 = 
NULL
;

264 iàĞ
fO±imiz©iÚF™Ty³
 == "Minuit" ) {

265 
TSŒšg
 
İt
="";

266 
f™‹r
 = 
Ãw
 
	`Mšu™F™‹r
Ğ*
this
,

268 
¿nges
, 
İt
 );

269 }iàĞ
fO±imiz©iÚF™Ty³
 == "FitGA" ) {

270 
TSŒšg
 
İt
="PopSize=20:Steps=30:Cycles=3:ConvCrit=0.01:SaveBestCycle=5";

271 
f™‹r
 = 
Ãw
 
	`G’‘icF™‹r
Ğ*
this
,

273 
¿nges
, 
İt
 );

275 
	`Log
(è<< 
kWARNING
 << " you did‚ot specify‡ valid OptimizationFitType "

276 << " wÈu£hdeçuÉ (F™GAè" << 
Endl
;

277 
TSŒšg
 
İt
="PopSize=20:Steps=30:Cycles=3:ConvCrit=0.01:SaveBestCycle=5";

278 
f™‹r
 = 
Ãw
 
	`G’‘icF™‹r
Ğ*
this
,

280 
¿nges
, 
İt
 );

283 
f™‹r
->
	`CheckFÜUnu£dO±iÚs
();

286 
f™‹r
->
	`Run
(
·rs
);

289 
UIÁ_t
 
¬
=0; i·r<
¿nges
.
	`size
(); i·r++è
d–‘e
„anges[ipar];

291 
	`G‘M‘hod
()->
	`Re£t
();

293 
fTuÃdP¬am‘”s
.
	`ş—r
();

294 
IÁ_t
 
jcouÁ
=0;

295 
™
=
fTuÃP¬am‘”s
.
	`begš
(); it!=fTuÃP¬am‘”s.
	`’d
(); it++){

296 
fTuÃdP¬am‘”s
.
	`š£¹
(
¡d
::
·œ
<
TSŒšg
,
DoubË_t
>(
™
->
fœ¡
,
·rs
[
jcouÁ
++]));

299 
	`G‘M‘hod
()->
	`S‘TuÃP¬am‘”s
(
fTuÃdP¬am‘”s
);

301 
	}
}

306 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t> & 
·rs
)

308 
¡d
::
m­
< std::
veùÜ
<
DoubË_t
> , 
	gDoubË_t
>::
cÚ¡_™”©Ü
 
™”
;

309 
	g™”
 = 
fAÌ—dyT¿šedP¬Combš©iÚ
.
fšd
(
·rs
);

311 ià(
	g™”
 !ğ
fAÌ—dyT¿šedP¬Combš©iÚ
.
’d
()) {

315  
™”
->
£cÚd
;

317 
	g¡d
::
m­
<
TSŒšg
,
	gDoubË_t
> 
	gcu¼’tP¬am‘”s
;

318 
IÁ_t
 
	gicouÁ
 =0;

320 
	g¡d
::
m­
<
TSŒšg
, 
	gTMVA
::
IÁ”v®
*>::
™”©Ü
 
™
;

321 
	g™
=
fTuÃP¬am‘”s
.
begš
(); it!=fTuÃP¬am‘”s.
’d
(); it++){

322 
	gcu¼’tP¬am‘”s
[
™
->
fœ¡
] = 
·rs
[
icouÁ
++];

324 
G‘M‘hod
()->
Re£t
();

325 
G‘M‘hod
()->
S‘TuÃP¬am‘”s
(
cu¼’tP¬am‘”s
);

326 if(!
G‘M‘hod
()->
IsS’tFe
()èG‘M‘hod()->
Ba£Dœ
()->
cd
();

328 ià(
	gfNÙDÚeY‘
){

329 
G‘M‘hod
()->
G‘T¿nsfÜm©iÚHªdËr
().

330 
C®cT¿nsfÜm©iÚs
(
G‘M‘hod
()->
D©a
()->
G‘Ev’tCŞËùiÚ
());

331 
	gfNÙDÚeY‘
=
kFALSE
;

333 
	gEv’t
::
S‘IsT¿ššg
(
kTRUE
);

334 
G‘M‘hod
()->
T¿š
();

335 
	gEv’t
::
S‘IsT¿ššg
(
kFALSE
);

338 
DoubË_t
 
	gcu¼’tFOM
 = 
G‘FOM
();

340 
	gfAÌ—dyT¿šedP¬Combš©iÚ
.
š£¹
(
¡d
::
make_·œ
(
·rs
,-
cu¼’tFOM
));

341  -
	gcu¼’tFOM
;

349 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘FOM
()

351 
DoubË_t
 
fom
=0;

352 ià(
fM‘hod
->
	`DoReg»ssiÚ
()){

353 
¡d
::
cout
 << " ERROR: Sorry, Regression is‚ot yet implement for‡utomatic…arameter optimisation"

354 << " -->ƒx™" << 
¡d
::
’dl
;

355 
¡d
::
	`ex™
(1);

357 ià(
fFOMTy³
 =ğ"S•¬©iÚ"è
fom
 = 
	`G‘S•¬©iÚ
();

358 ià(
fFOMTy³
 =ğ"ROCIÁeg¿l"è
fom
 = 
	`G‘ROCIÁeg¿l
();

359 ià(
fFOMTy³
 =ğ"SigEffAtBkgEff01"è
fom
 = 
	`G‘SigEffAtBkgEff
(0.1);

360 ià(
fFOMTy³
 =ğ"SigEffAtBkgEff001"è
fom
 = 
	`G‘SigEffAtBkgEff
(0.01);

361 ià(
fFOMTy³
 =ğ"SigEffAtBkgEff002"è
fom
 = 
	`G‘SigEffAtBkgEff
(0.02);

362 ià(
fFOMTy³
 =ğ"BkgRejAtSigEff05"è
fom
 = 
	`G‘BkgRejAtSigEff
(0.5);

363 ià(
fFOMTy³
 =ğ"BkgEffAtSigEff05"è
fom
 = 
	`G‘BkgEffAtSigEff
(0.5);

365 
	`Log
()<<
kFATAL
 << " ERROR, you've specified‡s Figure of Merit inhe "

366 << "…¬am‘” o±imi§tiÚ " << 
fFOMTy³
 << " which has‚ot"

367 << " b“Àim¶em’‹d y‘!! --->ƒx™ " << 
Endl
;

370 
fFOMvsI‹r
.
	`push_back
(
fom
);

372  
fom
;

373 
	}
}

378 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘MVADi¡s
()

380 ià(
fMvaSig
èfMvaSig->
	`D–‘e
();

381 ià(
fMvaBkg
èfMvaBkg->
	`D–‘e
();

382 ià(
fMvaSigFšeBš
èfMvaSigFšeBš->
	`D–‘e
();

383 ià(
fMvaBkgFšeBš
èfMvaBkgFšeBš->
	`D–‘e
();

391 
fMvaSig
 = 
Ãw
 
	`TH1D
("fMvaSig","",100,-1.5,1.5);

392 
fMvaBkg
 = 
Ãw
 
	`TH1D
("fMvaBkg","",100,-1.5,1.5);

393 
fMvaSigFšeBš
 = 
Ãw
 
	`TH1D
("fMvaSigFineBin","",100000,-1.5,1.5);

394 
fMvaBkgFšeBš
 = 
Ãw
 
	`TH1D
("fMvaBkgFineBin","",100000,-1.5,1.5);

396 cÚ¡ 
¡d
::
veùÜ
< 
Ev’t
*> 
ev’ts
=
fM‘hod
->
	`D©a
()->
	`G‘Ev’tCŞËùiÚ
(
Ty³s
::
kTe¡šg
);

398 
UIÁ_t
 
sigÇlCÏssNr
 = 
fM‘hod
->
	`D©aInfo
().
	`G‘CÏssInfo
("SigÇl")->
	`G‘Numb”
();

402 
UIÁ_t
 
›v
=0; iev < 
ev’ts
.
	`size
() ; iev++){

406 ià(
ev’ts
[
›v
]->
	`G‘CÏss
(è=ğ
sigÇlCÏssNr
) {

407 
fMvaSig
->
	`Fl
(
fM‘hod
->
	`G‘MvaV®ue
(
ev’ts
[
›v
]),ev’ts[›v]->
	`G‘Weight
());

408 
fMvaSigFšeBš
->
	`Fl
(
fM‘hod
->
	`G‘MvaV®ue
(
ev’ts
[
›v
]),ev’ts[›v]->
	`G‘Weight
());

410 
fMvaBkg
->
	`Fl
(
fM‘hod
->
	`G‘MvaV®ue
(
ev’ts
[
›v
]),ev’ts[›v]->
	`G‘Weight
());

411 
fMvaBkgFšeBš
->
	`Fl
(
fM‘hod
->
	`G‘MvaV®ue
(
ev’ts
[
›v
]),ev’ts[›v]->
	`G‘Weight
());

414 
	}
}

419 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘S•¬©iÚ
()

421 
	`G‘MVADi¡s
();

423 
PDF
 *
¥lS
 = 
Ãw
 
	`PDF
Ğ" PDF Sig", 
fMvaSig
, PDF::
kS¶še2
 );

424 
PDF
 *
¥lB
 = 
Ãw
 
	`PDF
Ğ" PDF Bkg", 
fMvaBkg
, PDF::
kS¶še2
 );

425  
	`gToŞs
().
	`G‘S•¬©iÚ
(*
¥lS
,*
¥lB
);

427 
¡d
::
cout
 << "S•¬©iÚ c®cuÏtiÚ vŸ hi¡og¿m ÒÙ PDFsè£em tØgiv¡È¡¿ng»suÉs!! DÚ'ˆdØth©, check!!"<<¡d::
’dl
;

428  
	`gToŞs
().
	`G‘S•¬©iÚ
(
fMvaSigFšeBš
,
fMvaBkgFšeBš
);

430 
	}
}

443 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘ROCIÁeg¿l
()

445 
	`G‘MVADi¡s
();

447 
DoubË_t
 
š‹g¿l
 = 0;

449 
PDF
 *
pdfS
 = 
Ãw
 
	`PDF
Ğ" PDF Sig", 
fMvaSig
, PDF::
kS¶še2
 );

450 
PDF
 *
pdfB
 = 
Ãw
 
	`PDF
Ğ" PDF Bkg", 
fMvaBkg
, PDF::
kS¶še2
 );

452 
DoubË_t
 
xmš
 = 
TM©h
::
	`Mš
(
pdfS
->
	`G‘Xmš
(), 
pdfB
->GetXmin());

453 
DoubË_t
 
xmax
 = 
TM©h
::
	`Max
(
pdfS
->
	`G‘Xmax
(), 
pdfB
->GetXmax());

455 
UIÁ_t
 
n¡•s
 = 1000;

456 
DoubË_t
 
¡•
 = (
xmax
-
xmš
)/
	`DoubË_t
(
n¡•s
);

457 
DoubË_t
 
cut
 = 
xmš
;

458 
UIÁ_t
 
i
=0; i<
n¡•s
; i++){

459 
š‹g¿l
 +ğ(1-
pdfB
->
	`G‘IÁeg¿l
(
cut
,
xmax
)è* 
pdfS
->
	`G‘V®
(cut);

460 
cut
+=
¡•
;

462 
š‹g¿l
*=
¡•
;

465 iàĞ(
fMvaSigFšeBš
->
	`G‘Xaxis
()->
	`G‘Xmš
(è!ğ
fMvaBkgFšeBš
->GetXaxis()->GetXmin()) ||

466 (
fMvaSigFšeBš
->
	`G‘NbšsX
(è!ğ
fMvaBkgFšeBš
->GetNbinsX()) ){

467 
¡d
::
cout
 << " E¼Ü iÀO±imizeCÚfigP¬am‘” G‘ROCIÁeg¿l, uÃqu® hi¡og¿m fÜ sig‡nd bkg.." << std::
’dl
;

468 
¡d
::
	`ex™
(1);

471 
DoubË_t
 *
cumuÏtÜ
 = 
fMvaBkgFšeBš
->
	`G‘IÁeg¿l
();

472 
IÁ_t
 
nbšs
 = 
fMvaSigFšeBš
->
	`G‘NbšsX
();

476 
DoubË_t
 
sigIÁeg¿l
 = 0;

477 
IÁ_t
 
ibš
=1; ibš<=
nbšs
; ibin++){

478 
sigIÁeg¿l
 +ğ
fMvaSigFšeBš
->
	`G‘BšCÚ‹Á
(
ibš
è* fMvaSigFšeBš->
	`G‘BšWidth
(ibin);

482 
IÁ_t
 
ibš
=1; ibš <ğ
nbšs
; ibin++){

483 
š‹g¿l
 +ğ(
cumuÏtÜ
[
ibš
]è* 
fMvaSigFšeBš
->
	`G‘BšCÚ‹Á
(ibš)/
sigIÁeg¿l
 * fMvaSigFšeBš->
	`G‘BšWidth
(ibin) ;

488  
š‹g¿l
;

489 
	}
}

494 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘SigEffAtBkgEff
(
DoubË_t
 
bkgEff
)

496 
	`G‘MVADi¡s
();

497 
DoubË_t
 
sigEff
=0;

500 iàĞ(
fMvaSigFšeBš
->
	`G‘Xaxis
()->
	`G‘Xmš
(è!ğ
fMvaBkgFšeBš
->GetXaxis()->GetXmin()) ||

501 (
fMvaSigFšeBš
->
	`G‘NbšsX
(è!ğ
fMvaBkgFšeBš
->GetNbinsX()) ){

502 
¡d
::
cout
 << " E¼Ü iÀO±imizeCÚfigP¬am‘” G‘SigEffAt, uÃqu® hi¡og¿m fÜ sig‡nd bkg.." << std::
’dl
;

503 
¡d
::
	`ex™
(1);

505 
DoubË_t
 *
bkgCumuÏtÜ
 = 
fMvaBkgFšeBš
->
	`G‘IÁeg¿l
();

506 
DoubË_t
 *
sigCumuÏtÜ
 = 
fMvaSigFšeBš
->
	`G‘IÁeg¿l
();

508 
IÁ_t
 
nbšs
=
fMvaBkgFšeBš
->
	`G‘NbšsX
();

509 
IÁ_t
 
ibš
=0;

517 
bkgCumuÏtÜ
[
nbšs
-
ibš
] > (1-
bkgEff
)) {

518 
sigEff
 = 
sigCumuÏtÜ
[
nbšs
]-sigCumuÏtÜ[nbšs-
ibš
];

519 
ibš
++;

522  
sigEff
;

523 
	}
}

531 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘BkgEffAtSigEff
(
DoubË_t
 
sigEff
)

533 
	`G‘MVADi¡s
();

534 
DoubË_t
 
bkgEff
=0;

537 iàĞ(
fMvaSigFšeBš
->
	`G‘Xaxis
()->
	`G‘Xmš
(è!ğ
fMvaBkgFšeBš
->GetXaxis()->GetXmin()) ||

538 (
fMvaSigFšeBš
->
	`G‘NbšsX
(è!ğ
fMvaBkgFšeBš
->GetNbinsX()) ){

539 
¡d
::
cout
 << " E¼Ü iÀO±imizeCÚfigP¬am‘” G‘BkgEffAt, uÃqu® hi¡og¿m fÜ sig‡nd bkg.." << std::
’dl
;

540 
¡d
::
	`ex™
(1);

543 
DoubË_t
 *
bkgCumuÏtÜ
 = 
fMvaBkgFšeBš
->
	`G‘IÁeg¿l
();

544 
DoubË_t
 *
sigCumuÏtÜ
 = 
fMvaSigFšeBš
->
	`G‘IÁeg¿l
();

546 
IÁ_t
 
nbšs
=
fMvaBkgFšeBš
->
	`G‘NbšsX
();

547 
IÁ_t
 
ibš
=0;

555  
sigCumuÏtÜ
[
nbšs
]-sigCumuÏtÜ[nbšs-
ibš
] < 
sigEff
) {

556 
bkgEff
 = 
bkgCumuÏtÜ
[
nbšs
]-bkgCumuÏtÜ[nbšs-
ibš
];

557 
ibš
++;

560  
bkgEff
;

561 
	}
}

568 
DoubË_t
 
	gTMVA
::
O±imizeCÚfigP¬am‘”s
::
	$G‘BkgRejAtSigEff
(
DoubË_t
 
sigEff
)

570 
	`G‘MVADi¡s
();

571 
DoubË_t
 
bkgRej
=0;

574 iàĞ(
fMvaSigFšeBš
->
	`G‘Xaxis
()->
	`G‘Xmš
(è!ğ
fMvaBkgFšeBš
->GetXaxis()->GetXmin()) ||

575 (
fMvaSigFšeBš
->
	`G‘NbšsX
(è!ğ
fMvaBkgFšeBš
->GetNbinsX()) ){

576 
¡d
::
cout
 << " E¼Ü iÀO±imizeCÚfigP¬am‘” G‘BkgEffAt, uÃqu® hi¡og¿m fÜ sig‡nd bkg.." << std::
’dl
;

577 
¡d
::
	`ex™
(1);

580 
DoubË_t
 *
bkgCumuÏtÜ
 = 
fMvaBkgFšeBš
->
	`G‘IÁeg¿l
();

581 
DoubË_t
 *
sigCumuÏtÜ
 = 
fMvaSigFšeBš
->
	`G‘IÁeg¿l
();

583 
IÁ_t
 
nbšs
=
fMvaBkgFšeBš
->
	`G‘NbšsX
();

584 
IÁ_t
 
ibš
=0;

592  
sigCumuÏtÜ
[
nbšs
]-sigCumuÏtÜ[nbšs-
ibš
] < 
sigEff
) {

593 
bkgRej
 = 
bkgCumuÏtÜ
[
nbšs
-
ibš
];

594 
ibš
++;

597  
bkgRej
;

598 
	}
}

	@src/Option.cxx

34 
	~"TMVA/O±iÚ.h
"

36 
	~"TMVA/Ty³s.h
"

38 
	~"Th»adLoÿlStÜage.h
"

39 
	~"TObjeù.h
"

40 
	~"TSŒšg.h
"

46 
	gTMVA
::
O±iÚBa£
::
	$O±iÚBa£
ĞcÚ¡ 
TSŒšg
& 
Çme
, cÚ¡ TSŒšg& 
desc
 )

47 : 
	`TObjeù
(),

48 
	`fName
 ( 
Çme
 ),

49 
	`fNameAÎLow”
Ğ
Çme
 ),

50 
	`fDesütiÚ
 ( 
desc
 ),

51 
	$fIsS‘
 ( 
kFALSE
 )

53 
fNameAÎLow”
.
	`ToLow”
();

54 
	}
}

59 
BoŞ_t
 
	gTMVA
::
O±iÚBa£
::
	$S‘V®ue
ĞcÚ¡ 
TSŒšg
& 
vs
, 
IÁ_t
 )

61 
fIsS‘
 = 
kTRUE
;

62 
	`S‘V®ueLoÿl
(
vs
);

63  
kTRUE
;

64 
	}
}

66 
	gTMVA
::
MsgLogg”
& 
TMVA
::
O±iÚBa£
::
	$Log
()

68 
	`TTHREAD_TLS_DECL_ARG2
(
MsgLogg”
,
logg”
,"O±iÚ",
kDEBUG
);

69  
logg”
;

70 
	}
}

	@src/OptionMap.cxx

1 
	~<TMVA/O±iÚM­.h
>

	@src/PDEFoam.cxx

68 
	~"TMVA/PDEFßm.h
"

70 
	~"TMVA/Ev’t.h
"

71 
	~"TMVA/MsgLogg”.h
"

72 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

73 
	~"TMVA/Tim”.h
"

74 
	~"TMVA/ToŞs.h
"

75 
	~"TMVA/Ty³s.h
"

77 
	~"TStyË.h
"

78 
	~"TObjeù.h
"

79 
	~"TH1D.h
"

80 
	~"TM©h.h
"

81 
	~"TVeùÜT.h
"

82 
	~"TRªdom3.h
"

83 
	~"TCŞÜ.h
"

84 
	~"TDœeùÜy.h
"

85 
	~"TObjA¼ay.h
"

87 
	~<ÿs£¹
>

88 
	~<f¡»am
>

89 
	~<io¡»am
>

90 
	~<iomª
>

91 
	~<lim™s
>

92 
	~<s¡»am
>

94 
CÏssImp
(
TMVA
::
PDEFßm
);

96 cÚ¡ 
Flßt_t
 
	gkHigh
ğ
FLT_MAX
;

97 cÚ¡ 
Flßt_t
 
	gkVlow
=-
FLT_MAX
;

99 
usšg
 
Çme¥aû
 
	g¡d
;

104 
	gTMVA
::
PDEFßm
::
	$PDEFßm
() :

105 
	`fName
("PDEFoam"),

106 
	`fDim
(0),

107 
	`fNC–ls
(0),

108 
	`fNBš
(5),

109 
	`fNSam¶
(2000),

110 
	`fEvP”Bš
(0),

111 
	`fMaskDiv
(0),

112 
	`fInhiDiv
(0),

113 
	`fNoAù
(1),

114 
	`fLa¡Ce
(-1),

115 
	`fC–ls
(0),

116 
	`fHi¡Edg
(0),

117 
	`fRvec
(0),

118 
	`fP£Rª
(
Ãw
 
	`TRªdom3
(4356)),

119 
	`fAÍha
(0),

120 
	`fFßmTy³
(
kS•¬©e
),

121 
	`fXmš
(0),

122 
	`fXmax
(0),

123 
	`fNEËm’ts
(0),

124 
	`fNmš
(100),

125 
	`fMaxD•th
(0),

126 
	`fVŞF¿c
(1.0/15.0),

127 
	`fFlFßmW™hOrigWeights
(
kFALSE
),

128 
	`fDTS•¬©iÚ
(
kFßm
),

129 
	`fP“kMax
(
kTRUE
),

130 
	`fDi¡r
(
NULL
),

131 
	`fTim”
(
Ãw
 
	`Tim”
(0, "PDEFßm", 
kTRUE
)),

132 
	`fV¬ŸbËNames
(
Ãw
 
	`TObjA¼ay
()),

133 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("PDEFoam"))

136 ià(
fV¬ŸbËNames
)

137 
fV¬ŸbËNames
->
	`S‘OwÃr
(
kTRUE
);

138 
	}
}

143 
	gTMVA
::
PDEFßm
::
	$PDEFßm
(cÚ¡ 
TSŒšg
& 
Çme
) :

144 
	`fName
(
Çme
),

145 
	`fDim
(0),

146 
	`fNC–ls
(1000),

147 
	`fNBš
(5),

148 
	`fNSam¶
(2000),

149 
	`fEvP”Bš
(0),

150 
	`fMaskDiv
(0),

151 
	`fInhiDiv
(0),

152 
	`fNoAù
(1),

153 
	`fLa¡Ce
(-1),

154 
	`fC–ls
(0),

155 
	`fHi¡Edg
(0),

156 
	`fRvec
(0),

157 
	`fP£Rª
(
Ãw
 
	`TRªdom3
(4356)),

158 
	`fAÍha
(0),

159 
	`fFßmTy³
(
kS•¬©e
),

160 
	`fXmš
(0),

161 
	`fXmax
(0),

162 
	`fNEËm’ts
(0),

163 
	`fNmš
(100),

164 
	`fMaxD•th
(0),

165 
	`fVŞF¿c
(1.0/15.0),

166 
	`fFlFßmW™hOrigWeights
(
kFALSE
),

167 
	`fDTS•¬©iÚ
(
kFßm
),

168 
	`fP“kMax
(
kTRUE
),

169 
	`fDi¡r
(
NULL
),

170 
	`fTim”
(
Ãw
 
	`Tim”
(1, "PDEFßm", 
kTRUE
)),

171 
	`fV¬ŸbËNames
(
Ãw
 
	`TObjA¼ay
()),

172 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("PDEFoam"))

174 if(
	`¡¾’
(
Çme
) > 128)

175 
	`Log
(è<< 
kFATAL
 << "NamtoØlÚg " << 
Çme
.
	`D©a
(è<< 
Endl
;

178 ià(
fV¬ŸbËNames
)

179 
fV¬ŸbËNames
->
	`S‘OwÃr
(
kTRUE
);

180 
	}
}

185 
	gTMVA
::
PDEFßm
::~
	$PDEFßm
()

187 
d–‘e
 
fV¬ŸbËNames
;

188 
d–‘e
 
fTim”
;

189 ià(
fDi¡r
è
d–‘e
 fDistr;

190 ià(
fP£Rª
è
d–‘e
 fPseRan;

191 ià(
fXmš
è{ 
d–‘e
 [] fXmin; fXmin=0; }

192 ià(
fXmax
è{ 
d–‘e
 [] fXmax; fXmax=0; }

194 
	`Re£tC–lEËm’ts
();

195 if(
fC–ls
!= 0) {

196 
IÁ_t
 
i
=0; i<
fNC–ls
; i++è
d–‘e
 
fC–ls
[i];

197 
d–‘e
 [] 
fC–ls
;

199 
d–‘e
 [] 
fRvec
;

200 
d–‘e
 [] 
fAÍha
;

201 
d–‘e
 [] 
fMaskDiv
;

202 
d–‘e
 [] 
fInhiDiv
;

204 
d–‘e
 
fLogg”
;

205 
	}
}

210 
	gTMVA
::
PDEFßm
::
	$PDEFßm
(cÚ¡ 
PDEFßm
 &
äom
) :

211 
	`TObjeù
(
äom
)

212 , 
	`fDim
(0)

213 , 
	`fNC–ls
(0)

214 , 
	`fNBš
(0)

215 , 
	`fNSam¶
(0)

216 , 
	`fEvP”Bš
(0)

217 , 
	`fMaskDiv
(0)

218 , 
	`fInhiDiv
(0)

219 , 
	`fNoAù
(0)

220 , 
	`fLa¡Ce
(0)

221 , 
	`fC–ls
(0)

222 , 
	`fHi¡Edg
(0)

223 , 
	`fRvec
(0)

224 , 
	`fP£Rª
(0)

225 , 
	`fAÍha
(0)

226 , 
	`fFßmTy³
(
kS•¬©e
)

227 , 
	`fXmš
(0)

228 , 
	`fXmax
(0)

229 , 
	`fNEËm’ts
(0)

230 , 
	`fNmš
(0)

231 , 
	`fMaxD•th
(0)

232 , 
	`fVŞF¿c
(1.0/15.0)

233 , 
	`fFlFßmW™hOrigWeights
(
kFALSE
)

234 , 
	`fDTS•¬©iÚ
(
kFßm
)

235 , 
	`fP“kMax
(
kTRUE
)

236 , 
	`fDi¡r
(0)

237 , 
	`fTim”
(0)

238 , 
	`fV¬ŸbËNames
(0)

239 , 
	`fLogg”
(
Ãw
 
	$MsgLogg”
(*
äom
.
fLogg”
))

241 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

244 ià(
fV¬ŸbËNames
)

245 
fV¬ŸbËNames
->
	`S‘OwÃr
(
kTRUE
);

246 
	}
}

251 
	gTMVA
::
PDEFßm
::
	$S‘Dim
(
IÁ_t
 
kDim
)

253 ià(
kDim
 < 1)

254 
	`Log
(è<< 
kFATAL
 << "<S‘Dim>: Dim’siÚ i z”ØÜ‚eg©ive!" << 
Endl
;

256 
fDim
 = 
kDim
;

257 ià(
fXmš
è
d–‘e
 [] fXmin;

258 ià(
fXmax
è
d–‘e
 [] fXmax;

259 
fXmš
 = 
Ãw
 
DoubË_t
[
	`G‘TÙDim
()];

260 
fXmax
 = 
Ãw
 
DoubË_t
[
	`G‘TÙDim
()];

261 
	}
}

266 
	gTMVA
::
PDEFßm
::
	$S‘Xmš
(
IÁ_t
 
idim
, 
DoubË_t
 
wmš
)

268 ià(
idim
<0 || idim>=
	`G‘TÙDim
())

269 
	`Log
(è<< 
kFATAL
 << "<S‘Xmš>: Dim’siÚ ouˆoàbounds!" << 
Endl
;

271 
fXmš
[
idim
]=
wmš
;

272 
	}
}

277 
	gTMVA
::
PDEFßm
::
	$S‘Xmax
(
IÁ_t
 
idim
, 
DoubË_t
 
wmax
)

279 ià(
idim
<0 || idim>=
	`G‘TÙDim
())

280 
	`Log
(è<< 
kFATAL
 << "<S‘Xmax>: Dim’siÚ ouˆoàbounds!" << 
Endl
;

282 
fXmax
[
idim
]=
wmax
;

283 
	}
}

293 
	gTMVA
::
PDEFßm
::
	$C»©e
()

295 
BoŞ_t
 
addStus
 = 
TH1
::
	`AddDœeùÜyStus
();

296 
TH1
::
	`AddDœeùÜy
(
kFALSE
);

298 if(
fP£Rª
==0è
	`Log
(è<< 
kFATAL
 << "Rªdom‚umb” g’”©Ü‚Ù s‘" << 
Endl
;

299 if(
fDi¡r
==0è
	`Log
(è<< 
kFATAL
 << "Di¡ributiÚ funùiÚ‚Ù s‘" << 
Endl
;

300 if(
fDim
==0è
	`Log
(è<< 
kFATAL
 << "Z”Ødim’siÚ‚Ù‡Îowed" << 
Endl
;

306 
fRvec
 = 
Ãw
 
DoubË_t
[
fDim
];

307 if(
fRvec
==0è
	`Log
(è<< 
kFATAL
 << "CªnÙ in™Ÿlizbufã¸fRvec" << 
Endl
;

309 if(
fDim
>0){

310 
fAÍha
 = 
Ãw
 
DoubË_t
[
fDim
];

311 if(
fAÍha
==0è
	`Log
(è<< 
kFATAL
 << "CªnÙ in™Ÿlizbufã¸fAÍha" << 
Endl
;

315 if(
fInhiDiv
 == 0){

316 
fInhiDiv
 = 
Ãw
 
IÁ_t
[
fDim
];

317 
IÁ_t
 
i
=0; i<
fDim
; i++è
fInhiDiv
[i]=0;

320 if(
fMaskDiv
 == 0){

321 
fMaskDiv
 = 
Ãw
 
IÁ_t
[
fDim
];

322 
IÁ_t
 
i
=0; i<
fDim
; i++è
fMaskDiv
[i]=1;

325 
fHi¡Edg
 = 
Ãw
 
	`TObjA¼ay
(
fDim
);

326 
IÁ_t
 
i
=0; i<
fDim
; i++){

327 
TSŒšg
 
hÇme
, 
ht™Ë
;

328 
hÇme
 = 
fName
+
	`TSŒšg
("_HistEdge_");

329 
hÇme
 +ğ
i
;

330 
ht™Ë
 = 
	`TSŒšg
("Edge Histogram No. ");

331 
ht™Ë
 +ğ
i
;

332 (*
fHi¡Edg
)[
i
] = 
Ãw
 
	`TH1D
(
hÇme
.
	`D©a
(),
ht™Ë
.D©a(),
fNBš
,0.0, 1.0);

333 ((
TH1D
*)(*
fHi¡Edg
)[
i
])->
	`Sumw2
();

341 
	`Re£tC–lEËm’ts
();

344 
	`In™C–ls
();

345 
	`Grow
();

347 
TH1
::
	`AddDœeùÜy
(
addStus
);

350 
	`Re£tC–lEËm’ts
();

351 
	}
}

357 
	gTMVA
::
PDEFßm
::
	$In™C–ls
()

359 
fLa¡Ce
 =-1;

360 if(
fC–ls
!= 0) {

361 
IÁ_t
 
i
=0; i<
fNC–ls
; i++è
d–‘e
 
fC–ls
[i];

362 
d–‘e
 [] 
fC–ls
;

365 
fC–ls
 = 
	`Ãw
(
nÙhrow
è
PDEFßmC–l
*[
fNC–ls
];

366 ià(!
fC–ls
) {

367 
	`Log
(è<< 
kFATAL
 << "nÙƒnough memÜyØü—‹ " << 
fNC–ls


368 << " c–ls" << 
Endl
;

370 
IÁ_t
 
i
=0; i<
fNC–ls
; i++){

371 
fC–ls
[
i
]ğ
Ãw
 
	`PDEFßmC–l
(
fDim
);

372 
fC–ls
[
i
]->
	`S‘S”Ÿl
(i);

378 
	`C–lFl
(1, 0);

381 
LÚg_t
 
iC–l
=0; iC–l<=
fLa¡Ce
; iCell++){

382 
	`Ex¶Üe
Ğ
fC–ls
[
iC–l
] );

384 
	}
}

390 
IÁ_t
 
	gTMVA
::
PDEFßm
::
	$C–lFl
(
IÁ_t
 
¡©us
, 
PDEFßmC–l
 *
·»Á
)

392 
PDEFßmC–l
 *
ûÎ
;

393 ià(
fLa¡Ce
==
fNC–ls
){

394 
	`Log
(è<< 
kFATAL
 << "ToØmªy c–ls" << 
Endl
;

396 
fLa¡Ce
++;

398 
ûÎ
 = 
fC–ls
[
fLa¡Ce
];

400 
ûÎ
->
	`Fl
(
¡©us
, 
·»Á
, 0, 0);

402 
ûÎ
->
	`S‘Be¡
( -1);

403 
ûÎ
->
	`S‘Xdiv
(0.5);

404 
DoubË_t
 
xIÁ2
,
xDri2
;

405 if(
·»Á
!=0){

406 
xIÁ2
 = 0.5*
·»Á
->
	`G‘IÁg
();

407 
xDri2
 = 0.5*
·»Á
->
	`G‘Driv
();

408 
ûÎ
->
	`S‘IÁg
(
xIÁ2
);

409 
ûÎ
->
	`S‘Driv
(
xDri2
);

411 
ûÎ
->
	`S‘IÁg
(0.0);

412 
ûÎ
->
	`S‘Driv
(0.0);

414  
fLa¡Ce
;

415 
	}
}

435 
	gTMVA
::
PDEFßm
::
	$Ex¶Üe
(
PDEFßmC–l
 *
ûÎ
)

437 
DoubË_t
 
wt
, 
dx
, 
xBe¡
=0, 
yBe¡
;

438 
DoubË_t
 
štOld
, 
driOld
;

440 
LÚg_t
 
›v
;

441 
DoubË_t
 
ÃvMC
;

442 
IÁ_t
 
i
, 
j
, 
k
;

443 
IÁ_t
 
nProj
, 
kBe¡
;

444 
DoubË_t
 
ûSum
[5], 
x´oj
;

446 
DoubË_t
 
ev’t_d’s™y
 = 0;

447 
DoubË_t
 
tÙev’ts
 = 0;

448 
DoubË_t
 
tÙev’tsOld
 = 0;

450 
PDEFßmVeù
 
	`ûÎSize
(
fDim
);

451 
PDEFßmVeù
 
	`ûÎPosi
(
fDim
);

453 
ûÎ
->
	`G‘Hcub
(
ûÎPosi
,
ûÎSize
);

455 
PDEFßmC–l
 *
·»Á
;

457 
DoubË_t
 *
xRªd
 = 
Ãw
 DoubË_t[
fDim
];

459 
DoubË_t
 *
vŞP¬t
=0;

462 
DoubË_t
 
vŞ_sÿË
 = 1.0;

463 
IÁ_t
 
idim
 = 0; idim < 
fDim
; ++idim)

464 
vŞ_sÿË
 *ğ
fXmax
[
idim
] - 
fXmš
[idim];

466 
ûÎ
->
	`C®cVŞume
();

467 
dx
 = 
ûÎ
->
	`G‘VŞume
(è* 
vŞ_sÿË
;

468 
štOld
 = 
ûÎ
->
	`G‘IÁg
();

469 
driOld
 = 
ûÎ
->
	`G‘Driv
();

470 
tÙev’tsOld
 = 
	`G‘C–lEËm’t
(
ûÎ
, 0);

475 
ûSum
[0]=0;

476 
ûSum
[1]=0;

477 
ûSum
[2]=0;

478 
ûSum
[3]=
kHigh
;

479 
ûSum
[4]=
kVlow
;

481 
i
=0;i<
fDim
;i++è((
TH1D
 *)(*
fHi¡Edg
)[i])->
	`Re£t
();

483 
DoubË_t
 
ÃvEff
=0.;

485 
›v
=0;›v<
fNSam¶
;iev++){

486 
	`MakeAÍha
();

488 ià(
fDim
>0è
j
=0; j<fDim; j++è
xRªd
[j]ğ
ûÎPosi
[j] +
fAÍha
[j]*(
ûÎSize
[j]);

490 
wt
 = 
dx
*
	`Ev®
(
xRªd
, 
ev’t_d’s™y
);

491 
tÙev’ts
 +ğ
ev’t_d’s™y
;

493 
nProj
 = 0;

494 ià(
fDim
>0) {

495 
k
=0; k<
fDim
; k++) {

496 
x´oj
 =
fAÍha
[
k
];

497 ((
TH1D
 *)(*
fHi¡Edg
)[
nProj
])->
	`Fl
(
x´oj
,
wt
);

498 
nProj
++;

502 
ûSum
[0] +ğ
wt
;

503 
ûSum
[1] +ğ
wt
*wt;

504 
ûSum
[2]++;

505 ià(
ûSum
[3]>
wt
) ceSum[3]=wt;

506 ià(
ûSum
[4]<
wt
) ceSum[4]=wt;

508 ià(
ûSum
[1]>0è
ÃvEff
 = ceSum[0]*ceSum[0]/ceSum[1];

509 
ÃvEff
 = 0;

510 iàĞ
ÃvEff
 >ğ
fNBš
*
fEvP”Bš
) ;

512 
tÙev’ts
 *ğ
dx
;

514 ià(
fNSam¶
>0è
tÙev’ts
 /= fNSampl;

518 ià(
ûÎ
==
fC–ls
[0] && 
ûSum
[0]<=0.0){

519 ià(
ûSum
[0]==0.0)

520 
	`Log
(è<< 
kFATAL
 << "Noƒvents were found duringƒxploration of "

522 << "ªd VŞF¿c." << 
Endl
;

524 
	`Log
(è<< 
kWARNING
 << "Negative‚umber ofƒvents found during "

525 << "ex¶Ü©iÚ oàroÙ c–l" << 
Endl
;

530 
k
=0; k<
fDim
;k++){

531 
fMaskDiv
[
k
] =1;

532 iàĞ
fInhiDiv
[
k
]==1è
fMaskDiv
[k] =0;

534 
kBe¡
=-1;

538 
ÃvMC
 = 
ûSum
[2];

539 
DoubË_t
 
štTrue
 = 
ûSum
[0]/(
ÃvMC
+0.000001);

540 
DoubË_t
 
štDriv
=0.;

542 ià(
kBe¡
 =ğ-1è
	`V¬edu
(
ûSum
,kBe¡,
xBe¡
,
yBe¡
);

543 
štDriv
 =
	`sq¹
(
ûSum
[1]/
ÃvMC
è-
štTrue
;

546 
ûÎ
->
	`S‘Be¡
(
kBe¡
);

547 
ûÎ
->
	`S‘Xdiv
(
xBe¡
);

548 
ûÎ
->
	`S‘IÁg
(
štTrue
);

549 
ûÎ
->
	`S‘Driv
(
štDriv
);

550 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
tÙev’ts
);

553 
DoubË_t
 
·rIÁg
, 
·rDriv
;

554 
·»Á
 = 
ûÎ
->
	`G‘P¬e
();…arent!=0;…arent =…arent->GetPare()){

555 
·rIÁg
 = 
·»Á
->
	`G‘IÁg
();

556 
·rDriv
 = 
·»Á
->
	`G‘Driv
();

557 
·»Á
->
	`S‘IÁg
Ğ
·rIÁg
 +
štTrue
 -
štOld
 );

558 
·»Á
->
	`S‘Driv
Ğ
·rDriv
 +
štDriv
 -
driOld
 );

559 
	`S‘C–lEËm’t
Ğ
·»Á
, 0, 
	`G‘C–lEËm’t
Õ¬’t, 0è+ 
tÙev’ts
 - 
tÙev’tsOld
);

561 
d–‘e
 [] 
vŞP¬t
;

562 
d–‘e
 [] 
xRªd
;

563 
	}
}

571 
	gTMVA
::
PDEFßm
::
	$V¬edu
(
DoubË_t
 
ûSum
[5], 
IÁ_t
 &
kBe¡
, DoubË_ˆ&
xBe¡
, DoubË_ˆ&
yBe¡
)

573 
DoubË_t
 
ÃÁ
 = 
ûSum
[2];

575 
DoubË_t
 
sswAÎ
 = 
ûSum
[1];

576 
DoubË_t
 
ssw
 = 
	`sq¹
(
sswAÎ
)/sq¹(
ÃÁ
);

578 
DoubË_t
 
sswIn
,
sswOut
,
xLo
,
xUp
;

579 
kBe¡
 =-1;

580 
xBe¡
 =0.5;

581 
yBe¡
 =1.0;

582 
DoubË_t
 
maxGaš
=0.0;

584 
IÁ_t
 
kProj
=0; kProj<
fDim
; kProj++) {

585 ifĞ
fMaskDiv
[
kProj
]) {

588 
DoubË_t
 
sswtBe¡
 = 
kHigh
;

589 
DoubË_t
 
gaš
 =0.0;

590 
DoubË_t
 
xMš
=0.0; DoubË_ˆ
xMax
=0.0;

592 
IÁ_t
 
jLo
=1; jLo<=
fNBš
; jLo++) {

593 
DoubË_t
 
aswIn
=0; DoubË_ˆ
asswIn
=0;

594 
IÁ_t
 
jUp
=
jLo
; jUp<=
fNBš
;jUp++) {

595 
aswIn
 +ğ((
TH1D
 *)(*
fHi¡Edg
)[
kProj
])->
	`G‘BšCÚ‹Á
(
jUp
);

596 
asswIn
 +ğ
	`Sqr
(((
TH1D
 *)(*
fHi¡Edg
)[
kProj
])->
	`G‘BšE¼Ü
Ğ
jUp
));

597 
xLo
=(
jLo
-1.0)/
fNBš
;

598 
xUp
=(
jUp
*1.0)/
fNBš
;

601 iàĞ(
xUp
-
xLo
è< 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
()è
sswIn
=0.;

602 
sswIn
 = 
	`sq¹
(
asswIn
è/sq¹(
ÃÁ
*(
xUp
-
xLo
)) *(xUp-xLo);

603 iàĞ(1.0-
xUp
+
xLo
è< 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
()è
sswOut
=0.;

604 iàĞ
sswAÎ
-
asswIn
 < 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
()è
sswOut
=0.;

605 
sswOut
ğ
	`sq¹
(
sswAÎ
-
asswIn
)/sq¹(
ÃÁ
*(1.0-
xUp
+
xLo
)) *(1.0-xUp+xLo);

606 ifĞ(
sswIn
+
sswOut
è< 
sswtBe¡
) {

607 
sswtBe¡
 = 
sswIn
+
sswOut
;

608 
gaš
 = 
ssw
-
sswtBe¡
;

611 
xMš
 = 
xLo
;

612 
xMax
 = 
xUp
;

616 
IÁ_t
 
iLo
 = (IÁ_tè(
fNBš
*
xMš
);

617 
IÁ_t
 
iUp
 = (IÁ_tè(
fNBš
*
xMax
);

619 if(
gaš
>=
maxGaš
) {

620 
maxGaš
=
gaš
;

621 
kBe¡
=
kProj
;

622 
xBe¡
=
xMš
;

623 
yBe¡
=
xMax
;

624 if(
iLo
 =ğ0è
xBe¡
=
yBe¡
;

625 if(
iUp
 =ğ
fNBš
è
yBe¡
=
xBe¡
;

630 ifĞ(
kBe¡
 >ğ
fDim
) || (kBest<0) )

631 
	`Log
(è<< 
kFATAL
 << "Som‘hšg wrÚg w™h kBe¡" << 
Endl
;

632 
	}
}

638 
	gTMVA
::
PDEFßm
::
	$MakeAÍha
()

641 
fP£Rª
->
	`RndmA¼ay
(
fDim
,
fRvec
);

642 
IÁ_t
 
k
=0; k<
fDim
; k++è
fAÍha
[k] = 
fRvec
[k];

643 
	}
}

652 
LÚg_t
 
	gTMVA
::
PDEFßm
::
	$P“kMax
()

654 
LÚg_t
 
iC–l
 = -1;

656 
LÚg_t
 
i
;

657 
DoubË_t
 
drivMax
, 
driv
, 
xDiv
;

658 
BoŞ_t
 
bCutNmš
 = 
kTRUE
;

659 
BoŞ_t
 
bCutMaxD•th
 = 
kTRUE
;

661 
drivMax
 = 0;

662 
i
=0; i<=
fLa¡Ce
; i++) {

663 ifĞ
fC–ls
[
i
]->
	`G‘St
() == 1 ) {

665 
driv
 = 
fC–ls
[
i
]->
	`G‘Driv
();

666 ià(
driv
 < 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
())

670 
xDiv
 = 
TM©h
::
	`Abs
(
fC–ls
[
i
]->
	`G‘Xdiv
());

671 ià(
xDiv
 <ğ
¡d
::
num”ic_lim™s
<
DoubË_t
>::
	`•sÚ
() ||

672 
xDiv
 >ğ1.0 - 
¡d
::
num”ic_lim™s
<
DoubË_t
>::
	`•sÚ
())

676 ià(
	`G‘MaxD•th
() > 0)

677 
bCutMaxD•th
 = 
fC–ls
[
i
]->
	`G‘D•th
(è< 
	`G‘MaxD•th
();

680 ià(
	`G‘Nmš
() > 0)

681 
bCutNmš
 = 
	`G‘C–lEËm’t
(
fC–ls
[
i
], 0è> 
	`G‘Nmš
();

684 if(
driv
 > 
drivMax
 && 
bCutNmš
 && 
bCutMaxD•th
) {

685 
drivMax
 = 
driv
;

686 
iC–l
 = 
i
;

691 ià(
iC–l
 == -1){

692 ià(!
bCutNmš
)

693 
	`Log
(è<< 
kVERBOSE
 << "Warning: No cell with morehan "

694 << 
	`G‘Nmš
(è<< "ƒv’t found!" << 
Endl
;

695 ià(!
bCutMaxD•th
)

696 
	`Log
(è<< 
kVERBOSE
 << "Warning: Maximum depth„eached: "

697 << 
	`G‘MaxD•th
(è<< 
Endl
;

699 
	`Log
(è<< 
kWARNING
 << "<PDEFßm::P“kMax>:‚ØmÜÿndid©ûÎ (drivMax>0èfound fÜ fu¹h” s¶™tšg." << 
Endl
;

702 (
iC–l
);

703 
	}
}

715 
IÁ_t
 
	gTMVA
::
PDEFßm
::
	$Divide
(
PDEFßmC–l
 *
ûÎ
)

718 
IÁ_t
 
kBe¡
;

720 if(
fLa¡Ce
+1 >ğ
fNC–ls
è
	`Log
(è<< 
kFATAL
 << "Bufã¸lim™ i »ached, fLa¡Ce=âBuf" << 
Endl
;

722 
ûÎ
->
	`S‘St
(0);

723 
fNoAù
++;

726 
kBe¡
 = 
ûÎ
->
	`G‘Be¡
();

727 ifĞ
kBe¡
<0 || kBe¡>=
fDim
 ) 
	`Log
(è<< 
kFATAL
 << "WrÚg kBe¡" << 
Endl
;

733 
IÁ_t
 
d1
 = 
	`C–lFl
(1, 
ûÎ
);

734 
IÁ_t
 
d2
 = 
	`C–lFl
(1, 
ûÎ
);

735 
ûÎ
->
	`S‘Dau0
((
fC–ls
[
d1
]));

736 
ûÎ
->
	`S‘Dau1
((
fC–ls
[
d2
]));

738 
	`Ex¶Üe
Ğ(
fC–ls
[
d1
]) );

739 
	`Ex¶Üe
Ğ(
fC–ls
[
d2
]) );

742 
	}
}

748 
DoubË_t
 
	gTMVA
::
PDEFßm
::
	$Ev®
(
DoubË_t
 *
xRªd
, DoubË_ˆ&
ev’t_d’s™y
)

754 
¡d
::
veùÜ
<
DoubË_t
> 
xvec
;

755 
xvec
.
	`»£rve
(
	`G‘TÙDim
());

756 
IÁ_t
 
idim
 = 0; idim < 
	`G‘TÙDim
(); ++idim)

757 
xvec
.
	`push_back
Ğ
	`V¬T¿nsfÜmInv”s
(
idim
, 
xRªd
[idim]) );

759  
	`G‘Di¡r
()->
	`D’s™y
(
xvec
, 
ev’t_d’s™y
);

760 
	}
}

768 
	gTMVA
::
PDEFßm
::
	$Grow
()

770 
fTim”
->
	`In™
(
fNC–ls
);

772 
LÚg_t
 
iC–l
;

773 
PDEFßmC–l
* 
ÃwC–l
;

775  (
fLa¡Ce
+2è< 
fNC–ls
 ) {

776 
iC–l
 = 
	`P“kMax
();

778 iàĞ(
iC–l
<0è|| (iC–l>
fLa¡Ce
) ) {

779 
	`Log
(è<< 
kVERBOSE
 << "B»ak: "<< 
fLa¡Ce
+1 << " c–l ü—‹d" << 
Endl
;

781 
LÚg_t
 
jC–l
=
fLa¡Ce
+1; jC–l<
fNC–ls
; jCell++)

782 
d–‘e
 
fC–ls
[
jC–l
];

783 
fNC–ls
 = 
fLa¡Ce
+1;

786 
ÃwC–l
 = 
fC–ls
[
iC–l
];

788 
	`OuutGrow
();

790 iàĞ
	`Divide
Ğ
ÃwC–l
 )==0) ;

792 
	`OuutGrow
Ğ
kTRUE
 );

793 
	`CheckAÎ
(1);

795 
	`Log
(è<< 
kVERBOSE
 << 
	`G‘NAùiveC–ls
(è<< "‡ùivûÎ ü—‹d" << 
Endl
;

796 
	}
}

803 
	gTMVA
::
PDEFßm
::
	$S‘InhiDiv
(
IÁ_t
 
iDim
, IÁ_ˆ
šhiDiv
)

805 if(
fDim
==0è
	`Log
(è<< 
kFATAL
 << "S‘InhiDiv: fDim=0" << 
Endl
;

806 if(
fInhiDiv
 == 0) {

807 
fInhiDiv
 = 
Ãw
 
IÁ_t
[ 
fDim
 ];

808 
IÁ_t
 
i
=0; i<
fDim
; i++è
fInhiDiv
[i]=0;

811 ifĞĞ0<=
iDim
è&& (iDim<
fDim
)) {

812 
fInhiDiv
[
iDim
] = 
šhiDiv
;

814 
	`Log
(è<< 
kFATAL
 << "WrÚg iDim" << 
Endl
;

815 
	}
}

823 
	gTMVA
::
PDEFßm
::
	$CheckAÎ
(
IÁ_t
 
Ëv–
)

825 
IÁ_t
 
”rÜs
, 
w¬nšgs
;

826 
PDEFßmC–l
 *
ûÎ
;

827 
LÚg_t
 
iC–l
;

829 
”rÜs
 = 0; 
w¬nšgs
 = 0;

830 ià(
Ëv–
==1è
	`Log
(è<< 
kVERBOSE
 << "P”fÜmšg cÚsi¡’cy check fÜ c»©ed fßm" << 
Endl
;

831 
iC–l
=1; iC–l<=
fLa¡Ce
; iCell++) {

832 
ûÎ
 = 
fC–ls
[
iC–l
];

834 ifĞ((
ûÎ
->
	`G‘Dau0
()==0è&& (ûÎ->
	`G‘Dau1
()!=0) ) ||

835 ((
ûÎ
->
	`G‘Dau1
()==0è&& (ûÎ->
	`G‘Dau0
()!=0) ) ) {

836 
”rÜs
++;

837 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d ha Úly oÃ daugh‹¸" << 
iC–l
 << 
Endl
;

839 ifĞ(
ûÎ
->
	`G‘Dau0
()==0è&& (ûÎ->
	`G‘Dau1
()==0è&& (ûÎ->
	`G‘St
()==0) ) {

840 
”rÜs
++;

841 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d ha nØdaugh‹¸ªd i šaùiv" << 
iC–l
 << 
Endl
;

843 ifĞ(
ûÎ
->
	`G‘Dau0
()!=0è&& (ûÎ->
	`G‘Dau1
()!=0è&& (ûÎ->
	`G‘St
()==1) ) {

844 
”rÜs
++;

845 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d ha twØdaugh‹r ªd i aùiv" << 
iC–l
 << 
Endl
;

849 ifĞ(
ûÎ
->
	`G‘P¬e
())!=
fC–ls
[0] ) {

850 iàĞ(
ûÎ
 !ğûÎ->
	`G‘P¬e
()->
	`G‘Dau0
()è&& (ûÎ !ğûÎ->G‘P¬e()->
	`G‘Dau1
()) ) {

851 
”rÜs
++;

852 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d…¬’ˆnÙ…oštšgØthi ûÎ " << 
iC–l
 << 
Endl
;

857 if(
ûÎ
->
	`G‘Dau0
()!=0) {

858 if(
ûÎ
 !ğ(ûÎ->
	`G‘Dau0
())->
	`G‘P¬e
()) {

859 
”rÜs
++;

860 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d daugh‹¸0‚Ù…oštšgØthi ûÎ " << 
iC–l
 << 
Endl
;

863 if(
ûÎ
->
	`G‘Dau1
()!=0) {

864 if(
ûÎ
 !ğ(ûÎ->
	`G‘Dau1
())->
	`G‘P¬e
()) {

865 
”rÜs
++;

866 ià(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–l' nØ%d daugh‹¸1‚Ù…oštšgØthi ûÎ " << 
iC–l
 << 
Endl
;

869 if(
ûÎ
->
	`G‘VŞume
()<1E-50) {

870 
”rÜs
++;

871 if(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–Èno. " << 
iC–l
 << " ha VŞumoà<1E-50" << 
Endl
;

876 
iC–l
=0; iC–l<=
fLa¡Ce
; iCell++) {

877 
ûÎ
 = 
fC–ls
[
iC–l
];

878 ifĞ(
ûÎ
->
	`G‘St
()==1è&& (ûÎ->
	`G‘VŞume
()<1E-11) ) {

879 
”rÜs
++;

880 if(
Ëv–
==1è
	`Log
(è<< 
kFATAL
 << "ERROR: C–Èno. " << 
iC–l
 << " i aùivbuˆVŞumi 0 " << 
Endl
;

884 if(
Ëv–
==1){

885 
	`Log
(è<< 
kVERBOSE
 << "Check ha found " << 
”rÜs
 << "ƒ¼Ü ªd " << 
w¬nšgs
 << " w¬nšgs." << 
Endl
;

887 if(
”rÜs
>0){

888 
	`Info
("CheckAÎ","Check - foundÙ® %dƒ¼Ü \n",
”rÜs
);

890 
	}
}

896 
	gTMVA
::
PDEFßm
::
	$PrštC–l
(
LÚg_t
 
iC–l
)

898 ià(
iC–l
 < 0 || iC–È> 
fLa¡Ce
) {

899 
	`Log
(è<< 
kWARNING
 << "<PrštC–l(iC–l=" << 
iC–l


900 << ")>: c–Ènumb” " << 
iC–l
 << " out of bounds!"

901 << 
Endl
;

905 
PDEFßmVeù
 
	`ûÎPosi
(
fDim
), 
	`ûÎSize
(fDim);

906 
fC–ls
[
iC–l
]->
	`G‘Hcub
(
ûÎPosi
,
ûÎSize
);

907 
IÁ_t
 
kBe¡
 = 
fC–ls
[
iC–l
]->
	`G‘Be¡
();

908 
DoubË_t
 
xBe¡
 = 
fC–ls
[
iC–l
]->
	`G‘Xdiv
();

910 
	`Log
(è<< "C–l[" << 
iC–l
 << "]={ ";

911 
	`Log
(è<< " " << 
fC–ls
[
iC–l
] << " " << 
Endl
;

912 
	`Log
() << " Xdiv[abs. coord.]="

913 << 
	`V¬T¿nsfÜmInv”s
(
kBe¡
,
ûÎPosi
[kBe¡] + 
xBe¡
*
ûÎSize
[kBest])

914 << 
Endl
;

915 
	`Log
() << " Abs. coord. = (";

916 
IÁ_t
 
idim
=0; idim<
fDim
; idim++) {

917 
	`Log
(è<< "dim[" << 
idim
 << "]={"

918 << 
	`V¬T¿nsfÜmInv”s
(
idim
,
ûÎPosi
[idim]) << ","

919 << 
	`V¬T¿nsfÜmInv”s
(
idim
,
ûÎPosi
[idim] + 
ûÎSize
[idim])

921 ià(
idim
 < 
fDim
-1)

922 
	`Log
() << ", ";

924 
	`Log
(è<< ")" << 
Endl
;

925 
fC–ls
[
iC–l
]->
	`Pršt
("1");

927 
	`Log
() << "Elements: [";

928 
TVeùÜD
 *
vec
 = (TVeùÜD*)
fC–ls
[
iC–l
]->
	`G‘EËm’t
();

929 ià(
vec
 !ğ
NULL
){

930 
IÁ_t
 
i
=0; i<
vec
->
	`G‘Nrows
(); i++){

931 ià(
i
>0è
	`Log
() << ", ";

932 
	`Log
(è<< 
	`G‘C–lEËm’t
(
fC–ls
[
iC–l
], 
i
);

935 
	`Log
() << "not set";

936 
	`Log
(è<< "]" << 
Endl
;

937 
	`Log
()<<"}"<<
Endl
;

938 
	}
}

943 
	gTMVA
::
PDEFßm
::
	$PrštC–ls
()

945 
LÚg_t
 
iC–l
=0; iC–l<=
fLa¡Ce
; iCell++)

946 
	`PrštC–l
(
iC–l
);

947 
	}
}

956 
	gTMVA
::
PDEFßm
::
	$FlFßmC–ls
(cÚ¡ 
Ev’t
* 
ev
, 
Flßt_t
 
wt
)

959 
¡d
::
veùÜ
<
Flßt_t
> 
v®ues
 = 
ev
->
	`G‘V®ues
();

960 
¡d
::
veùÜ
<
Flßt_t
> 
tv®ues
 = 
	`V¬T¿nsfÜm
(
v®ues
);

961 
PDEFßmC–l
 *
ûÎ
 = 
	`FšdC–l
(
tv®ues
);

965 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
	`G‘C–lEËm’t
(ûÎ, 0è+ 
wt
);

966 
	`S‘C–lEËm’t
(
ûÎ
, 1, 
	`G‘C–lEËm’t
(ûÎ, 1è+ 
wt
*wt);

967 
	}
}

972 
	gTMVA
::
PDEFßm
::
	$Re£tC–lEËm’ts
()

974 ià(!
fC–ls
) ;

976 
	`Log
(è<< 
kVERBOSE
 << "D–‘ûÎƒËm’ts" << 
Endl
;

977 
LÚg_t
 
iC–l
 = 0; iC–È< 
fNC–ls
; ++iCell) {

978 
TObjeù
* 
–em’ts
 = 
fC–ls
[
iC–l
]->
	`G‘EËm’t
();

979 ià(
–em’ts
) {

980 
d–‘e
 
–em’ts
;

981 
fC–ls
[
iC–l
]->
	`S‘EËm’t
(
NULL
);

984 
	}
}

991 
BoŞ_t
 
	gTMVA
::
PDEFßm
::
	$C–lV®ueIsUndefšed
Ğ
PDEFßmC–l
* )

993  
kFALSE
;

994 
	}
}

1017 
Flßt_t
 
	gTMVA
::
PDEFßm
::
G‘C–lV®ue
(cÚ¡ 
¡d
::
veùÜ
<Flßt_t> &
xvec
, 
EC–lV®ue
 
cv
, 
PDEFßmK”ÃlBa£
 *
k”Ãl
)

1019 
	g¡d
::
veùÜ
<
Flßt_t
> 
txvec
(
V¬T¿nsfÜm
(
xvec
));

1020 ià(
	gk”Ãl
 =ğ
NULL
)

1021  
G‘C–lV®ue
(
FšdC–l
(
txvec
), 
cv
);

1023  
	gk”Ãl
->
E¡im©e
(
this
, 
txvec
, 
cv
);

1044 
	g¡d
::
veùÜ
<
Flßt_t
> 
TMVA
::
PDEFßm
::
G‘C–lV®ue
ĞcÚ¡ 
¡d
::
m­
<
IÁ_t
,Flßt_t>& 
xvec
, 
EC–lV®ue
 
cv
 )

1047 
	g¡d
::
m­
<
IÁ_t
,
	gFlßt_t
> 
	gtxvec
;

1048 
	g¡d
::
m­
<
IÁ_t
,
	gFlßt_t
>::
cÚ¡_™”©Ü
 
™
=
xvec
.
begš
(); 
	g™
!=xvec.
’d
(); ++it)

1049 
	gtxvec
.
š£¹
(
¡d
::
·œ
<
IÁ_t
, 
Flßt_t
>(
™
->
fœ¡
, 
V¬T¿nsfÜm
(™->fœ¡, it->
£cÚd
)));

1052 
	g¡d
::
veùÜ
<
PDEFßmC–l
*> 
ûÎs
 = 
FšdC–ls
(
txvec
);

1055 
	g¡d
::
veùÜ
<
Flßt_t
> 
ûÎ_v®ues
;

1056 
	gûÎ_v®ues
.
»£rve
(
ûÎs
.
size
());

1057 
	g¡d
::
veùÜ
<
PDEFßmC–l
*>::
cÚ¡_™”©Ü
 
ûÎ_™
=
ûÎs
.
begš
();

1058 
	gûÎ_™
 !ğ
ûÎs
.
’d
(); ++cell_it)

1059 
	gûÎ_v®ues
.
push_back
(
G‘C–lV®ue
(*
ûÎ_™
, 
cv
));

1061  
	gûÎ_v®ues
;

1081 
	gTMVA
::
PDEFßmC–l
* 
TMVA
::
PDEFßm
::
FšdC–l
ĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
xvec
 ) const

1083 
PDEFßmVeù
 
ûÎPosi0
(
G‘TÙDim
()), 
ûÎSize0
(GetTotDim());

1084 
PDEFßmC–l
 *
	gûÎ
, *
	gûÎ0
;

1086 
	gûÎ
=
fC–ls
[0];

1087 
IÁ_t
 
	gidim
=0;

1088 
	gûÎ
->
G‘St
()!=1) {

1089 
idim
=
ûÎ
->
G‘Be¡
();

1090 
	gûÎ0
=
ûÎ
->
G‘Dau0
();

1091 
	gûÎ0
->
G‘Hcub
(
ûÎPosi0
,
ûÎSize0
);

1093 ià(
	gxvec
.
©
(
idim
)<=
ûÎPosi0
[idim]+
ûÎSize0
[idim])

1094 
ûÎ
=
ûÎ0
;

1096 
	gûÎ
=(
ûÎ
->
G‘Dau1
());

1098  
	gûÎ
;

1119 
	gTMVA
::
PDEFßm
::
FšdC–ls
(cÚ¡ 
¡d
::
m­
<
IÁ_t
, 
Flßt_t
> &
txvec
, 
PDEFßmC–l
* 
ûÎ
, std::
veùÜ
<PDEFßmC–l*> &
ûÎs
) const

1121 
PDEFßmVeù
 
ûÎPosi0
(
G‘TÙDim
()), 
ûÎSize0
(GetTotDim());

1122 
PDEFßmC–l
 *
	gûÎ0
;

1123 
IÁ_t
 
	gidim
=0;

1125 
	gûÎ
->
G‘St
()!=1) {

1126 
idim
=
ûÎ
->
G‘Be¡
();

1129 
	gm­
<
	gIÁ_t
, 
	gFlßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
txvec
.
fšd
(
idim
);

1131 ià(
	g™
 !ğ
txvec
.
’d
()){

1134 
ûÎ0
=
ûÎ
->
G‘Dau0
();

1135 
	gûÎ0
->
G‘Hcub
(
ûÎPosi0
,
ûÎSize0
);

1137 ià(
	g™
->
	g£cÚd
 <ğ
ûÎPosi0
[
idim
] + 
ûÎSize0
[idim])

1138 
ûÎ
=
ûÎ0
;

1140 
	gûÎ
=
ûÎ
->
G‘Dau1
();

1143 
FšdC–ls
(
txvec
, 
ûÎ
->
G‘Dau0
(), 
ûÎs
);

1144 
FšdC–ls
(
txvec
, 
ûÎ
->
G‘Dau1
(), 
ûÎs
);

1148 
	gûÎs
.
push_back
(
ûÎ
);

1166 
	g¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*> TMVA::
PDEFßm
::
FšdC–ls
(cÚ¡ 
¡d
::veùÜ<
Flßt_t
> &
txvec
) const

1169 
¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
> 
	gtxvec_m­
;

1170 
UIÁ_t
 
	gi
=0; i<
	gtxvec
.
size
(); ++i)

1171 
	gtxvec_m­
.
š£¹
(
¡d
::
·œ
<
IÁ_t
, 
Flßt_t
>(
i
, 
txvec
.
©
(i)));

1174 
	g¡d
::
veùÜ
<
PDEFßmC–l
*> 
ûÎs
(0);

1177 
FšdC–ls
(
txvec_m­
, 
fC–ls
[0], 
ûÎs
);

1179  
	gûÎs
;

1197 
	g¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*> TMVA::
PDEFßm
::
FšdC–ls
(cÚ¡ 
¡d
::
m­
<
IÁ_t
, 
Flßt_t
> &
txvec
) const

1200 
	g¡d
::
veùÜ
<
PDEFßmC–l
*> 
ûÎs
(0);

1203 
FšdC–ls
(
txvec
, 
fC–ls
[0], 
ûÎs
);

1205  
	gûÎs
;

1219 
TH1D
* 
	gTMVA
::
PDEFßm
::
	$D¿w1Dim
Ğ
EC–lV®ue
 
ûÎ_v®ue
, 
IÁ_t
 
nbš
, 
PDEFßmK”ÃlBa£
 *
k”Ãl
 )

1222 iàĞ
	`G‘TÙDim
()!=1 )

1223 
	`Log
(è<< 
kFATAL
 << "<Draw1Dim>: function can only be used for 1-dimensional foams!"

1224 << 
Endl
;

1226 
TSŒšg
 
	`hÇme
("h_1dim");

1227 
TH1D
* 
h1
=(TH1D*)
gDœeùÜy
->
	`G‘
(
hÇme
);

1228 ià(
h1
è
d–‘e
 h1;

1229 
h1
ğ
Ãw
 
	`TH1D
(
hÇme
, "1-dim’siÚ® Fßm", 
nbš
, 
fXmš
[0], 
fXmax
[0]);

1231 ià(!
h1
è
	`Log
(è<< 
kFATAL
 << "ERROR: Cª‚Ù c»©hi¡o" << 
hÇme
 << 
Endl
;

1234 
IÁ_t
 
ibšx
=1; ibšx<=
h1
->
	`G‘NbšsX
(); ++ibinx) {

1236 
¡d
::
veùÜ
<
Flßt_t
> 
txvec
;

1237 
txvec
.
	`push_back
Ğ
	`V¬T¿nsfÜm
(0, 
h1
->
	`G‘BšC’‹r
(
ibšx
)) );

1238 
Flßt_t
 
v®
 = 0;

1239 ià(
k”Ãl
 !ğ
NULL
) {

1241 
v®
 = 
k”Ãl
->
	`E¡im©e
(
this
, 
txvec
, 
ûÎ_v®ue
);

1243 
v®
 = 
	`G‘C–lV®ue
(
	`FšdC–l
(
txvec
), 
ûÎ_v®ue
);

1246 
h1
->
	`S‘BšCÚ‹Á
(
ibšx
, 
v®
 + h1->
	`G‘BšCÚ‹Á
(ibinx));

1249  
h1
;

1250 
	}
}

1271 
TH2D
* 
	gTMVA
::
PDEFßm
::
	$Projeù2
Ğ
IÁ_t
 
idim1
, IÁ_ˆ
idim2
, 
EC–lV®ue
 
ûÎ_v®ue
, 
PDEFßmK”ÃlBa£
 *
k”Ãl
, 
UIÁ_t
 
nbš
 )

1274 ià((
idim1
>=
	`G‘TÙDim
()) || (idim1<0) ||

1275 (
idim2
>=
	`G‘TÙDim
()) || (idim2<0) ||

1276 (
idim1
==
idim2
) )

1277 
	`Log
(è<< 
kFATAL
 << "<Project2>: wrong dimensions given: "

1278 << 
idim1
 << ", " << 
idim2
 << 
Endl
;

1283 ià(
nbš
>1000){

1284 
	`Log
(è<< 
kWARNING
 << "W¬nšg:‚umb” oàbš toØbig: " << 
nbš


1285 << " Usšg 1000 bš fÜƒach dim’siÚ in¡—d." << 
Endl
;

1286 
nbš
 = 1000;

1287 } ià(
nbš
<1) {

1288 
	`Log
(è<< 
kWARNING
 << "WrÚg bš‚umb”: " << 
nbš


1289 << "; s‘‚bš=50" << 
Endl
;

1290 
nbš
 = 50;

1294 
TSŒšg
 
	`hÇme
(
	`FÜm
("h_%d_vs_%d",
idim1
,
idim2
));

1297 
TH2D
* 
h1
=(TH2D*)
gDœeùÜy
->
	`G‘
(
hÇme
.
	`D©a
());

1298 ià(
h1
è
d–‘e
 h1;

1299 
h1
ğ
Ãw
 
	`TH2D
(
hÇme
.
	`D©a
(), 
	`FÜm
("v¬%d v v¬%d",
idim1
,
idim2
), 
nbš
, 
fXmš
[idim1], 
fXmax
[idim1],‚bin, fXmin[idim2], fXmax[idim2]);

1301 ià(!
h1
è
	`Log
(è<< 
kFATAL
 << "ERROR: Cª‚Ù c»©hi¡o" << 
hÇme
 << 
Endl
;

1305 
IÁ_t
 
xbš
 = 1; xbš <ğ
h1
->
	`G‘NbšsX
(); ++xbin) {

1306 
IÁ_t
 
ybš
 = 1; ybš <ğ
h1
->
	`G‘NbšsY
(); ++ybin) {

1309 
¡d
::
m­
<
IÁ_t
, 
Flßt_t
> 
txvec
;

1310 
txvec
[
idim1
] = 
	`V¬T¿nsfÜm
(idim1, 
h1
->
	`G‘Xaxis
()->
	`G‘BšC’‹r
(
xbš
));

1311 
txvec
[
idim2
] = 
	`V¬T¿nsfÜm
(idim2, 
h1
->
	`G‘Yaxis
()->
	`G‘BšC’‹r
(
ybš
));

1315 
¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*> 
ûÎs
 = 
	`FšdC–ls
(
txvec
);

1319 
Flßt_t
 
sum_cv
 = 0;

1320 
¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*>::
cÚ¡_™”©Ü
 
™
 = 
ûÎs
.
	`begš
();

1321 
™
 !ğ
ûÎs
.
	`’d
(); ++it) {

1323 
PDEFßmVeù
 
	`ûÎPosi
(
	`G‘TÙDim
()), 
	`ûÎSize
(GetTotDim());

1324 (*
™
)->
	`G‘Hcub
(
ûÎPosi
,
ûÎSize
);

1327 
¡d
::
veùÜ
<
Flßt_t
> 
tvec
;

1328 
IÁ_t
 
i
=0; i<
	`G‘TÙDim
(); ++i) {

1329 iàĞ
i
 !ğ
idim1
 && i !ğ
idim2
 )

1330 
tvec
.
	`push_back
(
ûÎPosi
[
i
] + 0.5*
ûÎSize
[i]);

1332 
tvec
.
	`push_back
(
txvec
[
i
]);

1334 ià(
k”Ãl
 !ğ
NULL
) {

1336 
sum_cv
 +ğ
k”Ãl
->
	`E¡im©e
(
this
, 
tvec
, 
ûÎ_v®ue
);

1338 
sum_cv
 +ğ
	`G‘C–lV®ue
(
	`FšdC–l
(
tvec
), 
ûÎ_v®ue
);

1343 
h1
->
	`S‘BšCÚ‹Á
(
xbš
, 
ybš
, 
sum_cv
 + h1->
	`G‘BšCÚ‹Á
(xbin, ybin));

1347  
h1
;

1348 
	}
}

1357 
Flßt_t
 
	gTMVA
::
PDEFßm
::
	$G‘C–lV®ue
(cÚ¡ 
PDEFßmC–l
* 
ûÎ
, 
EC–lV®ue
 
cv
)

1360 
cv
) {

1362 
kV®ue
:

1363  
	`G‘C–lEËm’t
(
ûÎ
, 0);

1365 
kV®ueE¼Ü
:

1366  
	`G‘C–lEËm’t
(
ûÎ
, 1);

1368 
kV®ueD’s™y
: {

1370 
DoubË_t
 
vŞume
 = 
ûÎ
->
	`G‘VŞume
();

1371 ià(
vŞume
 > 
num”ic_lim™s
<>::
	`•sÚ
()) {

1372  
	`G‘C–lV®ue
(
ûÎ
, 
kV®ue
)/
vŞume
;

1374 ià(
vŞume
<=0){

1375 
ûÎ
->
	`Pršt
("1");

1376 
	`Log
(è<< 
kWARNING
 << "<GetCellDensity(cell)>: ERROR: cell volume"

1379 << " c–ÈvŞume=" << 
vŞume


1380 << " c–È’Œ›s=" << 
	`G‘C–lV®ue
(
ûÎ
, 
kV®ue
è<< 
Endl
;

1382 
	`Log
(è<< 
kWARNING
 << "<GetCellDensity(cell)>: WARNING: cell volume"

1384 << " c–ÈvŞume: " << 
vŞume
 << 
Endl
;

1390 
kM—nV®ue
:

1391  
ûÎ
->
	`G‘IÁg
();

1393 
kRms
:

1394  
ûÎ
->
	`G‘Driv
();

1396 
kRmsOvM—n
:

1397 ià(
ûÎ
->
	`G‘IÁg
() != 0)

1398  
ûÎ
->
	`G‘Driv
()/ûÎ->
	`G‘IÁg
();

1402 
kC–lVŞume
:

1403  
ûÎ
->
	`G‘VŞume
();

1406 
	`Log
(è<< 
kFATAL
 << "<G‘C–lV®ue>: unknowÀûÎ v®ue" << 
Endl
;

1411 
	}
}

1417 
DoubË_t
 
	gTMVA
::
PDEFßm
::
	$G‘C–lEËm’t
ĞcÚ¡ 
PDEFßmC–l
 *
ûÎ
, 
UIÁ_t
 
i
 ) const

1420 
TVeùÜD
 *
vec
 = (TVeùÜD*)
ûÎ
->
	`G‘EËm’t
();

1423 ià(!
vec
 || 
i
 >ğ(
UIÁ_t
èvec->
	`G‘Nrows
())

1426  (*
vec
)(
i
);

1427 
	}
}

1433 
	gTMVA
::
PDEFßm
::
	$S‘C–lEËm’t
Ğ
PDEFßmC–l
 *
ûÎ
, 
UIÁ_t
 
i
, 
DoubË_t
 
v®ue
 )

1435 
TVeùÜD
 *
vec
 = 
NULL
;

1439 ià(
ûÎ
->
	`G‘EËm’t
(è=ğ
NULL
) {

1440 
vec
 = 
Ãw
 
	`TVeùÜD
(
i
+1);

1441 
vec
->
	`Z”o
();

1442 (*
vec
)(
i
èğ
v®ue
;

1443 
ûÎ
->
	`S‘EËm’t
(
vec
);

1446 
vec
 = (
TVeùÜD
*)
ûÎ
->
	`G‘EËm’t
();

1447 ià(!
vec
)

1448 
	`Log
(è<< 
kFATAL
 << "<S‘C–lEËm’t> ERROR: c–È–em’ˆi nÙ‡ TVeùÜD*" << 
Endl
;

1450 ià(
i
 >ğ(
UIÁ_t
è
vec
->
	`G‘Nrows
())

1451 
vec
->
	`ResizeTo
(0,
i
);

1453 (*
vec
)(
i
èğ
v®ue
;

1455 
	}
}

1461 
	gTMVA
::
PDEFßm
::
	$OuutGrow
Ğ
BoŞ_t
 
fšished
 )

1463 ià(
fšished
) {

1464 
	`Log
(è<< 
kINFO
 << "EÏp£dime: " + 
fTim”
->
	`G‘EÏp£dTime
()

1465 << " " << 
Endl
;

1469 
IÁ_t
 
modulo
 = 1;

1471 ià(
fNC–ls
 >ğ100è
modulo
 = 
	`IÁ_t
(fNCells/100);

1472 ià(
fLa¡Ce
%
modulo
 =ğ0è
fTim”
->
	`D¿wProg»ssB¬
( fLastCe );

1473 
	}
}

1512 
	gTMVA
::
PDEFßm
::
	$RoÙPlÙ2dim
ĞcÚ¡ 
TSŒšg
& 
f’ame
, TSŒšg 
İt
,

1513 
BoŞ_t
 
ü—‹Cªvas
, BoŞ_ˆ
cŞÜs
 )

1515 ià(
	`G‘TÙDim
() != 2)

1516 
	`Log
(è<< 
kFATAL
 << "RootPlot2dim() can only be used with "

1517 << "two-dim’siÚ® fßms!" << 
Endl
;

1520 
EC–lV®ue
 
ûÎ_v®ue
 = 
kV®ue
;

1521 
BoŞ_t
 
¶ÙûÎnumb”
 = 
kFALSE
;

1522 
BoŞ_t
 
flûÎs
 = 
kTRUE
;

1523 ià(
İt
.
	`CÚšs
("cell_value")){

1524 
ûÎ_v®ue
 = 
kV®ue
;

1525 } ià(
İt
.
	`CÚšs
("rms_ov_mean")){

1526 
ûÎ_v®ue
 = 
kRmsOvM—n
;

1527 } ià(
İt
.
	`CÚšs
("rms")){

1528 
ûÎ_v®ue
 = 
kRms
;

1530 
flûÎs
 = 
kFALSE
;

1532 ià(
İt
.
	`CÚšs
("cellnumber"))

1533 
¶ÙûÎnumb”
 = 
kTRUE
;

1536 
¡d
::
of¡»am
 
	`outfe
(
f’ame
, std::
ios
::
out
);

1538 
outfe
<<"{" << 
¡d
::
’dl
;

1541 ià(!
cŞÜs
) {

1543 
outfe
 << "TCŞÜ *g¿ycŞÜs[100];" << 
¡d
::
’dl
;

1544 
outfe
 << "fÜ (IÁ_ˆi=0.; i<100; i++)" << 
¡d
::
’dl
;

1545 
outfe
 << " g¿ycŞÜs[i]òew TCŞÜ(1000+i, 1-(Flßt_t)i/100.,1-(Flßt_t)i/100.,1-(Flßt_t)i/100.);"<< 
¡d
::
’dl
;

1547 ià(
ü—‹Cªvas
)

1548 
outfe
 << "cM­ =‚ew TCªvas(\"" << 
fName
 << "\",\"Cell Map for "

1549 << 
fName
 << "\",600,600);" << 
¡d
::
’dl
;

1551 
outfe
<<"TBox*aòew TBox();"<<
¡d
::
’dl
;

1552 
outfe
<<"a->S‘FlStyË(0);"<<
¡d
::
’dl
;

1553 
outfe
<<"a->S‘LšeWidth(4);"<<
¡d
::
’dl
;

1554 
outfe
<<"TBox *b1òew TBox();"<<
¡d
::
’dl
;

1555 
outfe
<<"TText*tòew TText();"<<
¡d
::
’dl
;

1556 ià(
flûÎs
) {

1557 
outfe
 << (
cŞÜs
 ? "gStyle->SetPalette(1, 0);" : "gStyle->SetPalette(0);")

1558 << 
¡d
::
’dl
;

1559 
outfe
 <<"b1->S‘FlStyË(1001);"<<
¡d
::
’dl
;

1560 
outfe
<<"TBox *b2òew TBox();"<<
¡d
::
’dl
;

1561 
outfe
 <<"b2->S‘FlStyË(0);"<<
¡d
::
’dl
;

1564 
outfe
 <<"b1->S‘FlStyË(0);"<<
¡d
::
’dl
;

1567 ià(
flûÎs
)

1568 (
cŞÜs
 ? 
gStyË
->
	`S‘P®‘‹
(1, 0) : gStyle->SetPalette(0) );

1570 
Flßt_t
 
zmš
 = 1E8;

1571 
Flßt_t
 
zmax
 = -1E8;

1575 ià(
flûÎs
) {

1576 
LÚg_t
 
iC–l
=1; iC–l<=
fLa¡Ce
; iCell++) {

1577 iàĞ
fC–ls
[
iC–l
]->
	`G‘St
() == 1) {

1578 
Flßt_t
 
v®ue
 = 
	`G‘C–lV®ue
(
fC–ls
[
iC–l
], 
ûÎ_v®ue
);

1579 ià(
v®ue
<
zmš
)

1580 
zmš
=
v®ue
;

1581 ià(
v®ue
>
zmax
)

1582 
zmax
=
v®ue
;

1585 
outfe
 << "// ob£rved mšimum‡nd maximum oàdi¡ributiÚ: " << 
¡d
::
’dl
;

1586 
outfe
 << "// Flßt_ˆzmš = "<< 
zmš
 << ";" << 
¡d
::
’dl
;

1587 
outfe
 << "// Flßt_ˆzmax = "<< 
zmax
 << ";" << 
¡d
::
’dl
;

1590 
outfe
 << "// u£d mšimum‡nd maximum oàdi¡ributiÚ (kšg iÁØaccouÁ†og sÿË ià­¶iÿbË): " << 
¡d
::
’dl
;

1591 
outfe
 << "Flßt_ˆzmš = "<< 
zmš
 << ";" << 
¡d
::
’dl
;

1592 
outfe
 << "Flßt_ˆzmax = "<< 
zmax
 << ";" << 
¡d
::
’dl
;

1594 
Flßt_t
 
x1
,
y1
,
x2
,
y2
,
x
,
y
;

1595 
Flßt_t
 
offs
 = 0.01;

1596 
Flßt_t
 
Íag
 = 1-2*
offs
;

1597 
IÁ_t
 
ncŞÜs
 = 
cŞÜs
 ? 
gStyË
->
	`G‘Numb”OfCŞÜs
() : 100;

1598 
Flßt_t
 
sÿË
 = (
ncŞÜs
-1)/(
zmax
 - 
zmš
);

1599 
PDEFßmVeù
 
	`ûÎPosi
(
	`G‘TÙDim
()), 
	`ûÎSize
(GetTotDim());

1603 
outfe
 << "// ==========ğReùªguÏ¸ûÎ  ==========="<< 
¡d
::
’dl
;

1604 
LÚg_t
 
iC–l
=1; iC–l<=
fLa¡Ce
; iCell++) {

1605 iàĞ
fC–ls
[
iC–l
]->
	`G‘St
() == 1) {

1606 
fC–ls
[
iC–l
]->
	`G‘Hcub
(
ûÎPosi
,
ûÎSize
);

1607 
x1
 = 
offs
+
Íag
*(
ûÎPosi
[0]);

1608 
y1
 = 
offs
+
Íag
*(
ûÎPosi
[1]);

1609 
x2
 = 
offs
+
Íag
*(
ûÎPosi
[0]+
ûÎSize
[0]);

1610 
y2
 = 
offs
+
Íag
*(
ûÎPosi
[1]+
ûÎSize
[1]);

1612 ià(
flûÎs
) {

1614 
Flßt_t
 
v®ue
 = 
	`G‘C–lV®ue
(
fC–ls
[
iC–l
], 
ûÎ_v®ue
);

1617 
IÁ_t
 
cŞÜ
;

1618 ià(
cŞÜs
)

1619 
cŞÜ
 = 
gStyË
->
	`G‘CŞÜP®‘‹
(
	`IÁ_t
((
v®ue
-
zmš
)*
sÿË
));

1621 
cŞÜ
 = 1000+(
	`IÁ_t
((
v®ue
-
zmš
)*
sÿË
));

1624 
outfe
 << "b1->S‘FlCŞÜ(" << 
cŞÜ
 << ");" << 
¡d
::
’dl
;

1628 
outfe
<<"b1->D¿wBox("<<
x1
<<","<<
y1
<<","<<
x2
<<","<<
y2
<<");"<<
¡d
::
’dl
;

1629 ià(
flûÎs
)

1630 
outfe
<<"b2->D¿wBox("<<
x1
<<","<<
y1
<<","<<
x2
<<","<<
y2
<<");"<<
¡d
::
’dl
;

1633 ià(
¶ÙûÎnumb”
) {

1634 
outfe
<<"t->S‘TextCŞÜ(4);"<<
¡d
::
’dl
;

1635 if(
fLa¡Ce
<51)

1636 
outfe
<<"t->S‘TextSize(0.025);"<<
¡d
::
’dl
;

1637 if(
fLa¡Ce
<251)

1638 
outfe
<<"t->S‘TextSize(0.015);"<<
¡d
::
’dl
;

1640 
outfe
<<"t->S‘TextSize(0.008);"<<
¡d
::
’dl
;

1641 
x
 = 
offs
+
Íag
*(
ûÎPosi
[0]+0.5*
ûÎSize
[0]);

1642 
y
 = 
offs
+
Íag
*(
ûÎPosi
[1]+0.5*
ûÎSize
[1]);

1643 
outfe
<<"t->D¿wText("<<
x
<<","<<
y
<<","<<"\""<<
iC–l
<<"\""<<");"<<
¡d
::
’dl
;

1647 
outfe
<<"// =============ğEnd ReùªgË ==========="<< 
¡d
::
’dl
;

1649 
outfe
 << "}" << 
¡d
::
’dl
;

1650 
outfe
.
	`æush
();

1651 
outfe
.
	`şo£
();

1652 
	}
}

1658 
	gTMVA
::
PDEFßm
::
	$FlBš¬yS—rchT»e
ĞcÚ¡ 
Ev’t
* 
ev
 )

1660 
	`G‘Di¡r
()->
	`FlBš¬yS—rchT»e
(
ev
);

1661 
	}
}

1667 
	gTMVA
::
PDEFßm
::
	$D–‘eBš¬yS—rchT»e
()

1669 if(
fDi¡r
è
d–‘e
 fDistr;

1670 
fDi¡r
 = 
NULL
;

1671 
	}
}

	@src/PDEFoamCell.cxx

35 
	~"TMVA/PDEFßmC–l.h
"

37 
	~"TMVA/PDEFßmVeù.h
"

39 
	~<io¡»am
>

40 
	~<o¡»am
>

42 
	~"Rty³s.h
"

43 
	~"TObjeù.h
"

44 
	~"TRef.h
"

46 
usšg
 
Çme¥aû
 
	g¡d
;

48 
CÏssImp
(
TMVA
::
PDEFßmC–l
);

53 
	gTMVA
::
PDEFßmC–l
::
	$PDEFßmC–l
()

54 : 
	`TObjeù
(),

55 
	`fDim
(0),

56 
	`fS”Ÿl
(0),

57 
	`fStus
(1),

58 
	`fP¬’t
(0),

59 
	`fDaught0
(0),

60 
	`fDaught1
(0),

61 
	`fXdiv
(0.0),

62 
	`fBe¡
(0),

63 
	`fVŞume
(0.0),

64 
	`fIÁeg¿l
(0.0),

65 
	`fDrive
(0.0),

66 
	$fEËm’t
(0)

68 
	}
}

73 
	gTMVA
::
PDEFßmC–l
::
	$PDEFßmC–l
(
IÁ_t
 
kDim
)

74 : 
	`TObjeù
(),

75 
	`fDim
(
kDim
),

76 
	`fS”Ÿl
(0),

77 
	`fStus
(1),

78 
	`fP¬’t
(0),

79 
	`fDaught0
(0),

80 
	`fDaught1
(0),

81 
	`fXdiv
(0.0),

82 
	`fBe¡
(0),

83 
	`fVŞume
(0.0),

84 
	`fIÁeg¿l
(0.0),

85 
	`fDrive
(0.0),

86 
	$fEËm’t
(0)

88 iàĞ
kDim
 <= 0 )

89 
	`E¼Ü
( "PDEFoamCell", "Dimension haso be >0" );

90 
	}
}

95 
	gTMVA
::
PDEFßmC–l
::
	$PDEFßmC–l
(cÚ¡ 
PDEFßmC–l
 &
ûÎ
)

96 : 
	`TObjeù
(),

97 
	`fDim
 (
ûÎ
.
fDim
),

98 
	`fS”Ÿl
 (
ûÎ
.
fS”Ÿl
),

99 
	`fStus
 (
ûÎ
.
fStus
),

100 
	`fP¬’t
 (
ûÎ
.
fP¬’t
),

101 
	`fDaught0
 (
ûÎ
.
fDaught0
),

102 
	`fDaught1
 (
ûÎ
.
fDaught1
),

103 
	`fXdiv
 (
ûÎ
.
fXdiv
),

104 
	`fBe¡
 (
ûÎ
.
fBe¡
),

105 
	`fVŞume
 (
ûÎ
.
fVŞume
),

106 
	`fIÁeg¿l
(
ûÎ
.
fIÁeg¿l
),

107 
	`fDrive
 (
ûÎ
.
fDrive
),

108 
	$fEËm’t
 (
ûÎ
.
fEËm’t
)

110 
	`E¼Ü
( "PDEFoamCell", "COPY CONSTRUCTOR NOT IMPLEMENTED" );

111 
	}
}

116 
	gTMVA
::
PDEFßmC–l
::~
	$PDEFßmC–l
()

118 
	}
}

123 
TMVA
::
PDEFßmC–l
::
	$Fl
(
IÁ_t
 
¡©us
, 
PDEFßmC–l
 *
·»Á
, PDEFßmC–È*
daugh1
, PDEFßmC–È*
daugh2
)

125 
fStus
 = 
¡©us
;

126 
fP¬’t
 = 
·»Á
;

127 
fDaught0
 = 
daugh1
;

128 
fDaught1
 = 
daugh2
;

129 
	}
}

140 
	gTMVA
::
PDEFßmC–l
::
	$G‘Hcub
Ğ
PDEFßmVeù
 &
ûÎPosi
, PDEFßmVeù &
ûÎSize
) const

142 if(
fDim
<1) ;

143 cÚ¡ 
PDEFßmC–l
 *
pC–l
,*
dC–l
;

144 
ûÎPosi
 = 0.0; 
ûÎSize
=1.0;

145 
dC–l
 = 
this
;

146 
dC–l
 != 0) {

147 
pC–l
 = 
dC–l
->
	`G‘P¬e
();

148 ifĞ
pC–l
== 0) ;

149 
IÁ_t
 
kDiv
 = 
pC–l
->
fBe¡
;

150 
DoubË_t
 
xDivi
 = 
pC–l
->
fXdiv
;

151 if(
dC–l
 =ğ
pC–l
->
	`G‘Dau0
() ) {

152 
ûÎSize
[
kDiv
] *=
xDivi
;

153 
ûÎPosi
[
kDiv
] *=
xDivi
;

154 } ifĞ
dC–l
 =ğ
pC–l
->
	`G‘Dau1
() ) {

155 
ûÎSize
[
kDiv
] *=(1.0-
xDivi
);

156 
ûÎPosi
[
kDiv
] =ûÎPosi[kDiv]*(1.0-
xDivi
)+xDivi;

158 
	`E¼Ü
( "GetHcub ","Something wrong with†inkedree \n");

160 
dC–l
=
pC–l
;

162 
	}
}

169 
	gTMVA
::
PDEFßmC–l
::
	$G‘HSize
Ğ
PDEFßmVeù
 &
ûÎSize
) const

171 if(
fDim
<1) ;

172 cÚ¡ 
PDEFßmC–l
 *
pC–l
,*
dC–l
;

173 
ûÎSize
=1.0;

174 
dC–l
 = 
this
;

175 
dC–l
 != 0) {

176 
pC–l
 = 
dC–l
->
	`G‘P¬e
();

177 ifĞ
pC–l
== 0) ;

178 
IÁ_t
 
kDiv
 = 
pC–l
->
fBe¡
;

179 
DoubË_t
 
xDivi
 = 
pC–l
->
fXdiv
;

180 if(
dC–l
 =ğ
pC–l
->
	`G‘Dau0
() ) {

181 
ûÎSize
[
kDiv
]=ûÎSize[kDiv]*
xDivi
;

182 } if(
dC–l
 =ğ
pC–l
->
	`G‘Dau1
() ) {

183 
ûÎSize
[
kDiv
]=ûÎSize[kDiv]*(1.0-
xDivi
);

185 
	`E¼Ü
( "GetHSize ","Something wrong with†inkedree \n");

187 
dC–l
=
pC–l
;

189 
	}
}

194 
	gTMVA
::
PDEFßmC–l
::
	$C®cVŞume
()

196 
IÁ_t
 
k
;

197 
DoubË_t
 
vŞu
=1.0;

198 if(
fDim
>0) {

199 
PDEFßmVeù
 
	`ûÎSize
(
fDim
);

200 
	`G‘HSize
(
ûÎSize
);

201 
k
=0; k<
fDim
; k++è
vŞu
 *ğ
ûÎSize
[k];

203 
fVŞume
 =
vŞu
;

204 
	}
}

210 
UIÁ_t
 
	gTMVA
::
PDEFßmC–l
::
	$G‘D•th
()

213 ià(
fP¬’t
 == 0)

216 
UIÁ_t
 
d•th
 = 1;

217 
PDEFßmC–l
 *
ûÎ
 = 
this
;

218 (
ûÎ
=ûÎ->
	`G‘P¬e
()) != 0){

219 ++
d•th
;

221  
d•th
;

222 
	}
}

227 
UIÁ_t
 
	gTMVA
::
PDEFßmC–l
::
	$G‘T»eD•th
(
UIÁ_t
 
d•th
)

229 ià(
	`G‘St
() == 1)

230  
d•th
 + 1;

232 
UIÁ_t
 
d•th0
 = 0, 
d•th1
 = 0;

233 ià(
	`G‘Dau0
(è!ğ
NULL
)

234 
d•th0
 = 
	`G‘Dau0
()->
	`G‘T»eD•th
(
d•th
+1);

235 ià(
	`G‘Dau1
(è!ğ
NULL
)

236 
d•th1
 = 
	`G‘Dau1
()->
	`G‘T»eD•th
(
d•th
+1);

238  (
d•th0
 > 
d•th1
 ? depth0 : depth1);

239 
	}
}

244 
	gTMVA
::
PDEFßmC–l
::
	$Pršt
(
O±iÚ_t
 *
İtiÚ
) const

246 ià(!
İtiÚ
è
	`E¼Ü
( "Print", "No option set\n");

248 
¡d
::
cout
 << " Stusğ"<< 
fStus
 <<",";

249 
¡d
::
cout
 << " VŞumeğ"<< 
fVŞume
 <<",";

250 
¡d
::
cout
 << " TrueIÁegğ" << 
fIÁeg¿l
 <<",";

251 
¡d
::
cout
 << " DriveIÁegğ"<< 
fDrive
 <<",";

252 
¡d
::
cout
 << std::
’dl
;;

253 
¡d
::
cout
 << " Xdivğ"<<
fXdiv
<<",";

254 
¡d
::
cout
 << " Be¡ğ"<<
fBe¡
<<",";

255 
¡d
::
cout
 << " P¬’tğ {"<< (
	`G‘P¬e
(è? G‘P¬e()->
	`G‘S”Ÿl
() : -1) <<"} ";

256 
¡d
::
cout
 << " Daught0ğ{"<< (
	`G‘Dau0
(è? G‘Dau0()->
	`G‘S”Ÿl
() : -1 )<<"} ";

257 
¡d
::
cout
 << " Daught1ğ{"<< (
	`G‘Dau1
(è? G‘Dau1()->
	`G‘S”Ÿl
() : -1 )<<"} ";

258 
¡d
::
cout
 << std::
’dl
;;

261 ià(
fDim
>0 ) {

262 
PDEFßmVeù
 
	`ûÎPosi
(
fDim
); PDEFßmVeù 
	`ûÎSize
(fDim);

263 
	`G‘Hcub
(
ûÎPosi
,
ûÎSize
);

264 
¡d
::
cout
 <<" Posiğ"; 
ûÎPosi
.
	`Pršt
("1"); std::cout<<","<< std::
’dl
;;

265 
¡d
::
cout
 <<" Sizeğ"; 
ûÎSize
.
	`Pršt
("1"); std::cout<<","<< std::
’dl
;;

267 
	}
}

	@src/PDEFoamDecisionTree.cxx

48 
	~"TMVA/PDEFßmDecisiÚT»e.h
"

49 
	~"TMVA/PDEFßmDecisiÚT»eD’s™y.h
"

51 
	~"TMVA/MsgLogg”.h
"

52 
	~"TMVA/PDEFßmC–l.h
"

53 
	~"TMVA/PDEFßmD’s™yBa£.h
"

54 
	~"TMVA/PDEFßmVeù.h
"

55 
	~"TMVA/S•¬©iÚBa£.h
"

56 
	~"TMVA/Ty³s.h
"

57 
	~"TMVA/VŞume.h
"

59 
	~"Rty³s.h
"

60 
	~"TH1D.h
"

62 
şass
 
	gTSŒšg
;

64 
CÏssImp
(
TMVA
::
PDEFßmDecisiÚT»e
);

69 
	gTMVA
::
PDEFßmDecisiÚT»e
::
	$PDEFßmDecisiÚT»e
()

70 : 
	`PDEFßmDisüimšªt
()

71 , 
	$fS•Ty³
(
NULL
)

73 
	}
}

85 
	gTMVA
::
PDEFßmDecisiÚT»e
::
	$PDEFßmDecisiÚT»e
(cÚ¡ 
TSŒšg
& 
Çme
, 
S•¬©iÚBa£
 *
£pTy³
, 
UIÁ_t
 
şs
)

86 : 
	`PDEFßmDisüimšªt
(
Çme
, 
şs
)

87 , 
	$fS•Ty³
(
£pTy³
)

89 
	}
}

94 
	gTMVA
::
PDEFßmDecisiÚT»e
::
	$PDEFßmDecisiÚT»e
(cÚ¡ 
PDEFßmDecisiÚT»e
 &
äom
)

95 : 
	`PDEFßmDisüimšªt
(
äom
)

96 , 
	$fS•Ty³
(
äom
.
fS•Ty³
)

98 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

99 
	}
}

105 
	gTMVA
::
PDEFßmDecisiÚT»e
::~
	$PDEFßmDecisiÚT»e
()

107 ià(
fS•Ty³
)

108 
d–‘e
 
fS•Ty³
;

109 
	}
}

125 
	gTMVA
::
PDEFßmDecisiÚT»e
::
	$Ex¶Üe
(
PDEFßmC–l
 *
ûÎ
)

127 ià(!
ûÎ
)

128 
	`Log
(è<< 
kFATAL
 << "<DTEx¶Üe> NuÎ…oš‹¸giv’!" << 
Endl
;

131 
¡d
::
veùÜ
<
TH1D
*> 
hsig
, 
hbkg
, 
hsig_unw
, 
hbkg_unw
;

132 
hsig
.
	`»£rve
(
fDim
);

133 
hbkg
.
	`»£rve
(
fDim
);

134 
hsig_unw
.
	`»£rve
(
fDim
);

135 
hbkg_unw
.
	`»£rve
(
fDim
);

136 
IÁ_t
 
idim
 = 0; idim < 
fDim
; idim++) {

137 
hsig
.
	`push_back
(
Ãw
 
	`TH1D
(
	`FÜm
("hsig_%i", 
idim
),

138 
	`FÜm
("sigÇl[%i]", 
idim
), 
fNBš
, 
fXmš
[idim], 
fXmax
[idim]));

139 
hbkg
.
	`push_back
(
Ãw
 
	`TH1D
(
	`FÜm
("hbkg_%i", 
idim
),

140 
	`FÜm
("background[%i]", 
idim
), 
fNBš
, 
fXmš
[idim], 
fXmax
[idim]));

141 
hsig_unw
.
	`push_back
(
Ãw
 
	`TH1D
(
	`FÜm
("hsig_unw_%i", 
idim
),

142 
	`FÜm
("sigÇl_unw[%i]", 
idim
), 
fNBš
, 
fXmš
[idim], 
fXmax
[idim]));

143 
hbkg_unw
.
	`push_back
(
Ãw
 
	`TH1D
(
	`FÜm
("hbkg_unw_%i", 
idim
),

144 
	`FÜm
("background_unw[%i]", 
idim
), 
fNBš
, 
fXmš
[idim], 
fXmax
[idim]));

148 
PDEFßmVeù
 
	`ûÎSize
(
	`G‘TÙDim
()), 
	`ûÎPosi
(GetTotDim());

149 
ûÎ
->
	`G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

152 
¡d
::
veùÜ
<
DoubË_t
> 
	`lb
(
	`G‘TÙDim
());

153 
¡d
::
veùÜ
<
DoubË_t
> 
	`ub
(
	`G‘TÙDim
());

154 
IÁ_t
 
idim
 = 0; idim < 
	`G‘TÙDim
(); idim++) {

155 
lb
[
idim
] = 
	`V¬T¿nsfÜmInv”s
(idim, 
ûÎPosi
[idim] - 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
());

156 
ub
[
idim
] = 
	`V¬T¿nsfÜmInv”s
(idim, 
ûÎPosi
[idim] + 
ûÎSize
[idim] + 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
());

160 
PDEFßmDecisiÚT»eD’s™y
 *
di¡r
 = 
dyÇmic_ÿ¡
<PDEFßmDecisiÚT»eD’s™y*>(
fDi¡r
);

161 ià(
di¡r
 =ğ
NULL
)

162 
	`Log
(è<< 
kFATAL
 << "<PDEFoamDecisionTree::Explore>: cast failed: "

163 << "PDEFßmD’s™yBa£* --> PDEFßmDecisiÚT»eD’s™y*" << 
Endl
;

166 
TMVA
::
VŞume
 
	`vŞume
(&
lb
, &
ub
);

169 
di¡r
->
	`FlHi¡og¿ms
(
vŞume
, 
hsig
, 
hbkg
, 
hsig_unw
, 
hbkg_unw
);

172 
DoubË_t
 
xBe¡
 = 0.5;

173 
IÁ_t
 
kBe¡
 = -1;

174 
DoubË_t
 
maxGaš
 = -1.0;

175 
DoubË_t
 
nTÙS
 = 
hsig
.
	`©
(0)->
	`IÁeg¿l
(0, hsig.©(0)->
	`G‘NbšsX
() + 1);

176 
DoubË_t
 
nTÙB
 = 
hbkg
.
	`©
(0)->
	`IÁeg¿l
(0, hbkg.©(0)->
	`G‘NbšsX
() + 1);

177 
DoubË_t
 
nTÙS_unw
 = 
hsig_unw
.
	`©
(0)->
	`IÁeg¿l
(0, hsig_unw.©(0)->
	`G‘NbšsX
() + 1);

178 
DoubË_t
 
nTÙB_unw
 = 
hbkg_unw
.
	`©
(0)->
	`IÁeg¿l
(0, hbkg_unw.©(0)->
	`G‘NbšsX
() + 1);

180 
IÁ_t
 
idim
 = 0; idim < 
fDim
; ++idim) {

181 
DoubË_t
 
nS–S
 = 
hsig
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(0);

182 
DoubË_t
 
nS–B
 = 
hbkg
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(0);

183 
DoubË_t
 
nS–S_unw
 = 
hsig_unw
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(0);

184 
DoubË_t
 
nS–B_unw
 = 
hbkg_unw
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(0);

185 
IÁ_t
 
jLo
 = 1; jLØ< 
fNBš
; jLo++) {

186 
nS–S
 +ğ
hsig
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(
jLo
);

187 
nS–B
 +ğ
hbkg
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(
jLo
);

188 
nS–S_unw
 +ğ
hsig_unw
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(
jLo
);

189 
nS–B_unw
 +ğ
hbkg_unw
.
	`©
(
idim
)->
	`G‘BšCÚ‹Á
(
jLo
);

193 ià(!((
nS–S_unw
 + 
nS–B_unw
è>ğ
	`G‘Nmš
() &&

194 (
nTÙS_unw
 - 
nS–S_unw
 + 
nTÙB_unw
 - 
nS–B_unw
è>ğ
	`G‘Nmš
()))

197 
DoubË_t
 
xLo
 = 1.0 * 
jLo
 / 
fNBš
;

200 
DoubË_t
 
gaš
 = 
fS•Ty³
->
	`G‘S•¬©iÚGaš
(
nS–S
, 
nS–B
, 
nTÙS
, 
nTÙB
);

202 ià(
gaš
 >ğ
maxGaš
) {

203 
maxGaš
 = 
gaš
;

204 
xBe¡
 = 
xLo
;

205 
kBe¡
 = 
idim
;

210 ià(
kBe¡
 >ğ
fDim
 || kBest < 0) {

215 
maxGaš
 = -1.0;

219 
ûÎ
->
	`S‘Be¡
(
kBe¡
);

220 
ûÎ
->
	`S‘Xdiv
(
xBe¡
);

221 ià(
nTÙB
 + 
nTÙS
 > 0)

222 
ûÎ
->
	`S‘IÁg
(
nTÙS
 / (
nTÙB
 +‚TotS));

224 
ûÎ
->
	`S‘IÁg
(0.0);

225 
ûÎ
->
	`S‘Driv
(
maxGaš
);

226 
ûÎ
->
	`C®cVŞume
();

230 ià(
	`G‘Nmš
() > 0)

231 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
nTÙS
 + 
nTÙB
);

234 
UIÁ_t
 
ih
 = 0; ih < 
hsig
.
	`size
(); ih++è
d–‘e
 hsig.
	`©
(ih);

235 
UIÁ_t
 
ih
 = 0; ih < 
hbkg
.
	`size
(); ih++è
d–‘e
 hbkg.
	`©
(ih);

236 
UIÁ_t
 
ih
 = 0; ih < 
hsig_unw
.
	`size
(); ih++è
d–‘e
 hsig_unw.
	`©
(ih);

237 
UIÁ_t
 
ih
 = 0; ih < 
hbkg_unw
.
	`size
(); ih++è
d–‘e
 hbkg_unw.
	`©
(ih);

238 
	}
}

	@src/PDEFoamDecisionTreeDensity.cxx

42 
	~"TMVA/PDEFßmDecisiÚT»eD’s™y.h
"

44 
	~"TMVA/Bš¬yS—rchT»e.h
"

45 
	~"TMVA/M‘hodPDERS.h
"

46 
	~"TMVA/MsgLogg”.h
"

47 
	~"TMVA/PDEFßmD’s™yBa£.h
"

48 
	~"TMVA/Ty³s.h
"

49 
	~"TMVA/VŞume.h
"

51 
	~"Rty³sCÜe.h
"

52 
	~"TH1D.h
"

54 
	~<lim™s
>

56 
CÏssImp
(
TMVA
::
PDEFßmDecisiÚT»eD’s™y
);

60 
	gTMVA
::
PDEFßmDecisiÚT»eD’s™y
::
	$PDEFßmDecisiÚT»eD’s™y
()

61 : 
	`PDEFßmD’s™yBa£
()

62 , 
	$fCÏss
(0)

63 {
	}
}

75 
	gTMVA
::
PDEFßmDecisiÚT»eD’s™y
::PDEFßmDecisiÚT»eD’s™y(
¡d
::
veùÜ
<
DoubË_t
> 
box
, 
UIÁ_t
 
şs
)

76 : 
PDEFßmD’s™yBa£
(
box
)

77 , 
	$fCÏss
(
şs
)

79 
	}
}

84 
	gTMVA
::
PDEFßmDecisiÚT»eD’s™y
::
	$PDEFßmDecisiÚT»eD’s™y
(cÚ¡ 
PDEFßmDecisiÚT»eD’s™y
 &
di¡r
)

85 : 
	`PDEFßmD’s™yBa£
(
di¡r
)

86 , 
	$fCÏss
(
di¡r
.
fCÏss
)

88 
	}
}

94 
DoubË_t
 
	gTMVA
::
PDEFßmDecisiÚT»eD’s™y
::
D’s™y
(
¡d
::
veùÜ
<Double_t>& ,

95 
DoubË_t
& )

111 
	gTMVA
::
PDEFßmDecisiÚT»eD’s™y
::
FlHi¡og¿ms
(
TMVA
::
VŞume
 &
vŞume
, 
¡d
::
veùÜ
<
TH1D
*> &
hsig
,

112 
¡d
::
veùÜ
<
TH1D
*> &
hbkg
, std::veùÜ<TH1D*> &
hsig_unw
,

113 
¡d
::
veùÜ
<
TH1D
*> &
hbkg_unw
)

116 ià(
hsig
.
size
(è!ğ
vŞume
.
fLow”
->size()

117 || 
hbkg
.
size
(è!ğ
vŞume
.
fLow”
->size()

118 || 
hsig_unw
.
size
(è!ğ
vŞume
.
fLow”
->size()

119 || 
hbkg_unw
.
size
(è!ğ
vŞume
.
fLow”
->size())

120 
Log
(è<< 
kFATAL
 << "<PDEFßmDi¡r::FlHi¡og¿ms> Edghi¡og¿m havwrÚg size!" << 
Endl
;

123 
UIÁ_t
 
	gidim
 = 0; idim < 
	ghsig
.
size
(); ++idim) {

124 ià(!
	ghsig
.
©
(
idim
è|| !
	ghbkg
.at(idim) ||

125 !
	ghsig_unw
.
©
(
idim
è|| !
	ghbkg_unw
.at(idim))

126 
Log
(è<< 
	gkFATAL
 << "<PDEFßmDi¡r::FlHi¡> Hi¡og¿m nÙ in™Ÿlized!" << 
	gEndl
;

130 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*> 
nodes
;

133 
	gfB¡
->
S—rchVŞume
(&
vŞume
, &
nodes
);

136 
	g¡d
::
veùÜ
<
Flßt_t
> 
xmš
(
vŞume
.
fLow”
->
size
(), 
¡d
::
num”ic_lim™s
<>::
max
());

137 
	g¡d
::
veùÜ
<
Flßt_t
> 
xmax
(
vŞume
.
fLow”
->
size
(), -
¡d
::
num”ic_lim™s
<>::
max
());

138 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*>::
cÚ¡_™”©Ü
 
™
 = 
nodes
.
begš
();

139 
	g™
 !ğ
nodes
.
’d
(); ++it) {

140 
	g¡d
::
veùÜ
<
Flßt_t
> 
ev
 = (*
™
)->
G‘Ev’tV
();

141 
UIÁ_t
 
	gidim
 = 0; idim < 
	gxmš
.
size
(); ++idim) {

142 ià(
	gev
.
©
(
idim
è< 
	gxmš
.©(idim)èxmš.©(idimèğ
ev
.at(idim);

143 ià(
	gev
.
©
(
idim
è> 
	gxmax
.©(idim)èxmax.©(idimèğ
ev
.at(idim);

148 
UIÁ_t
 
	gidim
 = 0; idim < 
	ghsig
.
size
(); ++idim) {

149 
	ghsig
.
©
(
idim
)->
G‘Xaxis
()->
S‘Lim™s
(
xmš
.©(idim), 
xmax
.at(idim));

150 
	ghbkg
.
©
(
idim
)->
G‘Xaxis
()->
S‘Lim™s
(
xmš
.©(idim), 
xmax
.at(idim));

151 
	ghsig_unw
.
©
(
idim
)->
G‘Xaxis
()->
S‘Lim™s
(
xmš
.©(idim), 
xmax
.at(idim));

152 
	ghbkg_unw
.
©
(
idim
)->
G‘Xaxis
()->
S‘Lim™s
(
xmš
.©(idim), 
xmax
.at(idim));

153 
	ghsig
.
©
(
idim
)->
Re£t
();

154 
	ghbkg
.
©
(
idim
)->
Re£t
();

155 
	ghsig_unw
.
©
(
idim
)->
Re£t
();

156 
	ghbkg_unw
.
©
(
idim
)->
Re£t
();

160 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*>::
cÚ¡_™”©Ü
 
™
 = 
nodes
.
begš
();

161 
	g™
 !ğ
nodes
.
’d
(); ++it) {

162 
	g¡d
::
veùÜ
<
Flßt_t
> 
ev
 = (*
™
)->
G‘Ev’tV
();

163 
Flßt_t
 
	gwt
 = (*
™
)->
G‘Weight
();

164 
UIÁ_t
 
	gidim
 = 0; idim < 
	gev
.
size
(); ++idim) {

165 ià((*
	g™
)->
G‘CÏss
(è=ğ
fCÏss
) {

166 
hsig
.
©
(
idim
)->
Fl
(
ev
.©(idim), 
wt
);

167 
	ghsig_unw
.
©
(
idim
)->
Fl
(
ev
.at(idim), 1);

169 
	ghbkg
.
©
(
idim
)->
Fl
(
ev
.©(idim), 
wt
);

170 
	ghbkg_unw
.
©
(
idim
)->
Fl
(
ev
.at(idim), 1);

	@src/PDEFoamDensityBase.cxx

67 
	~"TMVA/PDEFßmD’s™yBa£.h
"

69 
	~"TMVA/Bš¬yS—rchT»e.h
"

70 
	~"TMVA/MsgLogg”.h
"

71 
	~"TMVA/Ty³s.h
"

73 
	~"Rty³sCÜe.h
"

74 
	~"Rty³s.h
"

75 
	~"TObjeù.h
"

77 
	~<funùiÚ®
>

78 
	~<num”ic
>

79 
	~<veùÜ
>

81 
CÏssImp
(
TMVA
::
PDEFßmD’s™yBa£
);

85 
	gTMVA
::
PDEFßmD’s™yBa£
::
	$PDEFßmD’s™yBa£
()

86 : 
	`TObjeù
(),

87 
	`fBox
(),

88 
	`fBoxVŞume
(1.0),

89 
	`fBoxHasChªged
(
kTRUE
),

90 
	`fB¡
(
Ãw
 
TMVA
::
	`Bš¬yS—rchT»e
()),

91 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("PDEFoamDensityBase"))

92 {
	}
}

100 
	gTMVA
::
PDEFßmD’s™yBa£
::PDEFßmD’s™yBa£(
¡d
::
veùÜ
<
DoubË_t
> 
box
)

101 : 
TObjeù
(),

102 
fBox
(
box
),

103 
fBoxVŞume
(1.0),

104 
fBoxHasChªged
(
kTRUE
),

105 
fB¡
(
Ãw
 
TMVA
::
Bš¬yS—rchT»e
()),

106 
fLogg”
(
Ãw
 
MsgLogg”
("PDEFoamDensityBase"))

108 ià(
	gbox
.
em±y
())

109 
Log
(è<< 
	gkFATAL
 << "Dim’siÚ oàPDEFßmD’s™yBa£ i z”o" << 
	gEndl
;

112 
	gfB¡
->
S‘P”iode
(
box
.
size
());

118 
	gTMVA
::
PDEFßmD’s™yBa£
::~
	$PDEFßmD’s™yBa£
()

120 ià(
fB¡
è
d–‘e
 fBst;

121 ià(
fLogg”
è
d–‘e
 fLogger;

122 
	}
}

130 
	gTMVA
::
PDEFßmD’s™yBa£
::
	$PDEFßmD’s™yBa£
(cÚ¡ 
PDEFßmD’s™yBa£
 &
di¡r
)

131 : 
	`TObjeù
(),

132 
	`fBox
(
di¡r
.
fBox
),

133 
	`fBoxVŞume
(
di¡r
.
fBoxVŞume
),

134 
	`fBoxHasChªged
(
di¡r
.
fBoxHasChªged
),

135 
	`fB¡
(
Ãw
 
	`Bš¬yS—rchT»e
(*
di¡r
.
fB¡
)),

136 
	`fLogg”
(
Ãw
 
	$MsgLogg”
(*
di¡r
.
fLogg”
))

138 
	}
}

144 
	gTMVA
::
PDEFßmD’s™yBa£
::
	$FlBš¬yS—rchT»e
(cÚ¡ 
Ev’t
* 
ev
)

146 ià(
fB¡
 =ğ
NULL
)

147 
	`Log
(è<< 
kFATAL
 << "<PDEFoamDensityBase::FillBinarySearchTree> "

148 << "Bš¬y»i nÙ s‘!" << 
Endl
;

151 
fB¡
->
	`In£¹
(
ev
);

152 
	}
}

161 
DoubË_t
 
	gTMVA
::
PDEFßmD’s™yBa£
::
	$G‘BoxVŞume
()

163 ià(
fBoxHasChªged
) {

164 
fBoxHasChªged
 = 
kFALSE
;

165 
fBoxVŞume
 = 
¡d
::
	`accumuÏ‹
(
fBox
.
	`begš
(), fBox.
	`’d
(), 1.0,

166 
¡d
::
muÉl›s
<
DoubË_t
>());

168  
fBoxVŞume
;

169 
	}
}

	@src/PDEFoamDiscriminant.cxx

43 
	~"TMVA/PDEFßmDisüimšªt.h
"

46 
	~"TMVA/Ev’t.h
"

47 
	~"TMVA/MsgLogg”.h
"

48 
	~"TMVA/PDEFßm.h
"

49 
	~"TMVA/PDEFßmC–l.h
"

50 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

51 
	~"TMVA/Ty³s.h
"

53 
	~"TDœeùÜy.h
"

54 
	~"TM©h.h
"

55 
	~"TH2D.h
"

57 
	~<şim™s
>

59 
CÏssImp
(
TMVA
::
PDEFßmDisüimšªt
);

64 
	gTMVA
::
PDEFßmDisüimšªt
::
	$PDEFßmDisüimšªt
()

65 : 
	`PDEFßm
()

66 , 
	$fCÏss
(0)

68 
	}
}

72 
	gTMVA
::
PDEFßmDisüimšªt
::
	$PDEFßmDisüimšªt
(cÚ¡ 
TSŒšg
& 
Çme
, 
UIÁ_t
 
şs
)

73 : 
	`PDEFßm
(
Çme
)

74 , 
	$fCÏss
(
şs
)

75 {
	}
}

80 
	gTMVA
::
PDEFßmDisüimšªt
::
	$PDEFßmDisüimšªt
(cÚ¡ 
PDEFßmDisüimšªt
 &
äom
)

81 : 
	`PDEFßm
(
äom
)

82 , 
	$fCÏss
(
äom
.
fCÏss
)

84 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

85 
	}
}

92 
	gTMVA
::
PDEFßmDisüimšªt
::
	$FlFßmC–ls
(cÚ¡ 
Ev’t
* 
ev
, 
Flßt_t
 
wt
)

95 
¡d
::
veùÜ
<
Flßt_t
> 
v®ues
 = 
ev
->
	`G‘V®ues
();

96 
¡d
::
veùÜ
<
Flßt_t
> 
tv®ues
 = 
	`V¬T¿nsfÜm
(
v®ues
);

97 
PDEFßmC–l
 *
ûÎ
 = 
	`FšdC–l
(
tv®ues
);

101 ià(
ev
->
	`G‘CÏss
(è=ğ
fCÏss
)

102 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
	`G‘C–lEËm’t
(ûÎ, 0è+ 
wt
);

104 
	`S‘C–lEËm’t
(
ûÎ
, 1, 
	`G‘C–lEËm’t
(ûÎ, 1è+ 
wt
);

105 
	}
}

111 
	gTMVA
::
PDEFßmDisüimšªt
::
	$Fš®ize
()

114 
LÚg_t
 
iC–l
 = 0; iC–È<ğ
fLa¡Ce
; iCell++) {

115 ià(!(
fC–ls
[
iC–l
]->
	`G‘St
()))

118 
DoubË_t
 
n_sig
 = 
	`G‘C–lEËm’t
(
fC–ls
[
iC–l
], 0);

119 
DoubË_t
 
n_bg
 = 
	`G‘C–lEËm’t
(
fC–ls
[
iC–l
], 1);

121 ià(
n_sig
 < 0.) {

122 
	`Log
(è<< 
kWARNING
 << "Neg©ivnumb” oàsigÇÈev’t š c–È" << 
iC–l


123 << ": " << 
n_sig
 << ". S‘Ø0." << 
Endl
;

124 
n_sig
 = 0.;

126 ià(
n_bg
 < 0.) {

127 
	`Log
(è<< 
kWARNING
 << "Neg©ivnumb” oàbackgroundƒv’t š c–È" << 
iC–l


128 << ": " << 
n_bg
 << ". S‘Ø0." << 
Endl
;

129 
n_bg
 = 0.;

133 ià(
n_sig
 + 
n_bg
 > 0) {

135 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 0, 
n_sig
 / (n_sig + 
n_bg
));

137 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 1, 
TM©h
::
	`Sq¹
(
	`Sqr
(
n_sig
 / SqrÒ_sig + 
n_bg
))*n_sig +

138 
	`Sqr
(
n_bg
 / Sqr(
n_sig
 +‚_bg))*n_bg));

141 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 0, 0.5);

142 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 1, 1.);

145 
	}
}

171 
TH2D
* 
	gTMVA
::
PDEFßmDisüimšªt
::
	$Projeù2
(
IÁ_t
 
idim1
, IÁ_ˆ
idim2
, 
EC–lV®ue
 
ûÎ_v®ue
, 
PDEFßmK”ÃlBa£
 *
k”Ãl
, 
UIÁ_t
 
nbš
)

174 ià((
idim1
 >ğ
	`G‘TÙDim
()) || (idim1 < 0) ||

175 (
idim2
 >ğ
	`G‘TÙDim
()) || (idim2 < 0) ||

176 (
idim1
 =ğ
idim2
))

177 
	`Log
(è<< 
kFATAL
 << "<Project2>: wrong dimensions given: "

178 << 
idim1
 << ", " << 
idim2
 << 
Endl
;

183 ià(
nbš
 > 1000) {

184 
	`Log
(è<< 
kWARNING
 << "W¬nšg:‚umb” oàbš toØbig: " << 
nbš


185 << " Usšg 1000 bš fÜƒach dim’siÚ in¡—d." << 
Endl
;

186 
nbš
 = 1000;

187 } ià(
nbš
 < 1) {

188 
	`Log
(è<< 
kWARNING
 << "WrÚg bš‚umb”: " << 
nbš


189 << "; s‘‚bš=50" << 
Endl
;

190 
nbš
 = 50;

194 
TSŒšg
 
	`hÇme
(
	`FÜm
("h_%d_vs_%d", 
idim1
, 
idim2
));

197 
TH2D
* 
h1
 = (TH2D*)
gDœeùÜy
->
	`G‘
(
hÇme
.
	`D©a
());

198 ià(
h1
è
d–‘e
 h1;

199 
h1
 = 
Ãw
 
	`TH2D
(
hÇme
.
	`D©a
(), 
	`FÜm
("v¬%d v v¬%d", 
idim1
, 
idim2
), 
nbš
, 
fXmš
[idim1], 
fXmax
[idim1],‚bin, fXmin[idim2], fXmax[idim2]);

201 ià(!
h1
è
	`Log
(è<< 
kFATAL
 << "ERROR: Cª‚Ù c»©hi¡o" << 
hÇme
 << 
Endl
;

202 ià(
ûÎ_v®ue
 =ğ
kV®ue
)

203 
h1
->
	`G‘Zaxis
()->
	`S‘RªgeU£r
(-
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(),

204 1. + 
¡d
::
num”ic_lim™s
<>::
	`•sÚ
());

208 
IÁ_t
 
xbš
 = 1; xbš <ğ
h1
->
	`G‘NbšsX
(); ++xbin) {

209 
IÁ_t
 
ybš
 = 1; ybš <ğ
h1
->
	`G‘NbšsY
(); ++ybin) {

212 
¡d
::
m­
<
IÁ_t
, 
Flßt_t
> 
txvec
;

213 
txvec
[
idim1
] = 
	`V¬T¿nsfÜm
(idim1, 
h1
->
	`G‘Xaxis
()->
	`G‘BšC’‹r
(
xbš
));

214 
txvec
[
idim2
] = 
	`V¬T¿nsfÜm
(idim2, 
h1
->
	`G‘Yaxis
()->
	`G‘BšC’‹r
(
ybš
));

218 
¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*> 
ûÎs
 = 
	`FšdC–ls
(
txvec
);

222 
Flßt_t
 
sum_cv
 = 0;

223 
¡d
::
veùÜ
<
TMVA
::
PDEFßmC–l
*>::
cÚ¡_™”©Ü
 
™
 = 
ûÎs
.
	`begš
();

224 
™
 !ğ
ûÎs
.
	`’d
(); ++it) {

226 
PDEFßmVeù
 
	`ûÎPosi
(
	`G‘TÙDim
()), 
	`ûÎSize
(GetTotDim());

227 (*
™
)->
	`G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

230 
¡d
::
veùÜ
<
Flßt_t
> 
tvec
;

231 
IÁ_t
 
i
 = 0; i < 
	`G‘TÙDim
(); ++i) {

232 ià(
i
 !ğ
idim1
 && i !ğ
idim2
)

233 
tvec
.
	`push_back
(
ûÎPosi
[
i
] + 0.5 * 
ûÎSize
[i]);

235 
tvec
.
	`push_back
(
txvec
[
i
]);

238 
Flßt_t
 
cv
 = 0;

239 ià(
k”Ãl
 !ğ
NULL
) {

240 
cv
 = 
k”Ãl
->
	`E¡im©e
(
this
, 
tvec
, 
ûÎ_v®ue
);

242 
cv
 = 
	`G‘C–lV®ue
(
	`FšdC–l
(
tvec
), 
ûÎ_v®ue
);

244 ià(
ûÎ_v®ue
 =ğ
kV®ue
) {

247 
Flßt_t
 
¬—_ûÎ
 = 1.;

248 
IÁ_t
 
d1
 = 0; d1 < 
	`G‘TÙDim
(); ++d1) {

249 ià((
d1
 !ğ
idim1
è&& (d1 !ğ
idim2
))

250 
¬—_ûÎ
 *ğ
ûÎSize
[
d1
];

254 
cv
 *ğ
¬—_ûÎ
;

256 
sum_cv
 +ğ
cv
;

260 
h1
->
	`S‘BšCÚ‹Á
(
xbš
, 
ybš
, 
sum_cv
 + h1->
	`G‘BšCÚ‹Á
(xbin, ybin));

264  
h1
;

265 
	}
}

	@src/PDEFoamDiscriminantDensity.cxx

43 
	~"TMVA/PDEFßmDisüimšªtD’s™y.h
"

45 
	~"TMVA/Bš¬yS—rchT»e.h
"

46 
	~"TMVA/Bš¬yS—rchT»eNode.h
"

47 
	~"TMVA/MsgLogg”.h
"

48 
	~"TMVA/PDEFßmD’s™yBa£.h
"

49 
	~"TMVA/Ty³s.h
"

50 
	~"TMVA/VŞume.h
"

52 
	~"Rty³s.h
"

54 
	~<cm©h
>

55 
	~<veùÜ
>

57 
CÏssImp
(
TMVA
::
PDEFßmDisüimšªtD’s™y
);

61 
	gTMVA
::
PDEFßmDisüimšªtD’s™y
::
	$PDEFßmDisüimšªtD’s™y
()

62 : 
	`PDEFßmD’s™yBa£
()

63 , 
	$fCÏss
(0)

64 {
	}
}

76 
	gTMVA
::
PDEFßmDisüimšªtD’s™y
::PDEFßmDisüimšªtD’s™y(
¡d
::
veùÜ
<
DoubË_t
> 
box
, 
UIÁ_t
 
şs
)

77 : 
PDEFßmD’s™yBa£
(
box
)

78 , 
	$fCÏss
(
şs
)

80 
	}
}

85 
	gTMVA
::
PDEFßmDisüimšªtD’s™y
::
	$PDEFßmDisüimšªtD’s™y
(cÚ¡ 
PDEFßmDisüimšªtD’s™y
 &
di¡r
)

86 : 
	`PDEFßmD’s™yBa£
(
di¡r
)

87 , 
	$fCÏss
(
di¡r
.
fCÏss
)

89 
	}
}

108 
DoubË_t
 
	gTMVA
::
PDEFßmDisüimšªtD’s™y
::
D’s™y
(
¡d
::
veùÜ
<DoubË_t> &
xev
, DoubË_ˆ&
ev’t_d’s™y
)

110 ià(!
	gfB¡
)

111 
Log
(è<< 
	gkFATAL
 << "<PDEFßmDisüimšªtD’s™y::D’s™y()> Bš¬y»nÙ s‘!" << 
	gEndl
;

114 
	g¡d
::
veùÜ
<
DoubË_t
> 
lb
(
G‘Box
().
size
());

115 
	g¡d
::
veùÜ
<
DoubË_t
> 
ub
(
G‘Box
().
size
());

118 cÚ¡ 
DoubË_t
 
	g´obevŞume_šv
 = 1.0 / 
G‘BoxVŞume
();

121 
UIÁ_t
 
	gidim
 = 0; idim < 
G‘Box
().
size
(); ++idim) {

122 
	glb
[
idim
] = 
xev
[idim] - 
G‘Box
().
©
(idim) / 2.0;

123 
	gub
[
idim
] = 
xev
[idim] + 
G‘Box
().
©
(idim) / 2.0;

126 
	gTMVA
::
VŞume
 
vŞume
(&
lb
, &
ub
);

127 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*> 
nodes
;

130 cÚ¡ 
DoubË_t
 
	gsumOfWeights
 = 
fB¡
->
S—rchVŞume
(&
vŞume
, &
nodes
);

133 
	gev’t_d’s™y
 = 
nodes
.
size
(è* 
´obevŞume_šv
;

135 
DoubË_t
 
	gn_sig
 = 0;

137 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*>::
cÚ¡_™”©Ü
 
™
 = 
nodes
.
begš
();

138 
	g™
 !ğ
nodes
.
’d
(); ++it) {

139 ià((*
	g™
)->
G‘CÏss
(è=ğ
fCÏss
)

140 
n_sig
 +ğ(*
™
)->
G‘Weight
();

144  (
	gn_sig
 / (
	gsumOfWeights
 + 0.1)è* 
	g´obevŞume_šv
;

	@src/PDEFoamEvent.cxx

39 
	~"TMVA/PDEFßmEv’t.h
"

41 
	~"TMVA/Ev’t.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/PDEFßm.h
"

44 
	~"TMVA/Ty³s.h
"

46 
	~"Rty³s.h
"

48 
Çme¥aû
 
	gTMVA
 {

49 
şass
 
	gPDEFßmC–l
;

51 
şass
 
	gTSŒšg
;

53 
CÏssImp
(
TMVA
::
PDEFßmEv’t
);

58 
	gTMVA
::
PDEFßmEv’t
::
	$PDEFßmEv’t
()

59 : 
	$PDEFßm
()

61 
	}
}

65 
TMVA
::
PDEFßmEv’t
::
	$PDEFßmEv’t
(cÚ¡ 
TSŒšg
& 
Çme
)

66 : 
	$PDEFßm
(
Çme
)

67 {
	}
}

72 
TMVA
::
PDEFßmEv’t
::
	$PDEFßmEv’t
(cÚ¡ 
PDEFßmEv’t
 &
äom
)

73 : 
	$PDEFßm
(
äom
)

75 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

76 
	}
}

83 
	gTMVA
::
PDEFßmEv’t
::
	$FlFßmC–ls
(cÚ¡ 
Ev’t
* 
ev
, 
Flßt_t
 
wt
)

86 
¡d
::
veùÜ
<
Flßt_t
> 
v®ues
 = 
ev
->
	`G‘V®ues
();

87 
¡d
::
veùÜ
<
Flßt_t
> 
tv®ues
 = 
	`V¬T¿nsfÜm
(
v®ues
);

88 
PDEFßmC–l
 *
ûÎ
 = 
	`FšdC–l
(
tv®ues
);

92 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
	`G‘C–lEËm’t
(ûÎ, 0è+ 
wt
);

93 
	`S‘C–lEËm’t
(
ûÎ
, 1, 
	`G‘C–lEËm’t
(ûÎ, 1è+ 
wt
 * wt);

94 
	}
}

	@src/PDEFoamEventDensity.cxx

42 
	~"TMVA/PDEFßmEv’tD’s™y.h
"

44 
	~"TMVA/Bš¬yS—rchT»e.h
"

45 
	~"TMVA/Bš¬yS—rchT»eNode.h
"

46 
	~"TMVA/MsgLogg”.h
"

47 
	~"TMVA/PDEFßmD’s™yBa£.h
"

48 
	~"TMVA/Ty³s.h
"

49 
	~"TMVA/VŞume.h
"

51 
	~"Rty³s.h
"

53 
	~<cm©h
>

54 
	~<veùÜ
>

56 
CÏssImp
(
TMVA
::
PDEFßmEv’tD’s™y
);

60 
	gTMVA
::
PDEFßmEv’tD’s™y
::
	$PDEFßmEv’tD’s™y
()

61 : 
	$PDEFßmD’s™yBa£
()

62 {
	}
}

71 
TMVA
::
PDEFßmEv’tD’s™y
::PDEFßmEv’tD’s™y(
¡d
::
veùÜ
<
DoubË_t
> 
box
)

72 : 
	$PDEFßmD’s™yBa£
(
box
)

74 
	}
}

79 
TMVA
::
PDEFßmEv’tD’s™y
::
	$PDEFßmEv’tD’s™y
(cÚ¡ 
PDEFßmEv’tD’s™y
 &
di¡r
)

80 : 
	$PDEFßmD’s™yBa£
(
di¡r
)

82 
	}
}

101 
DoubË_t
 
TMVA
::
PDEFßmEv’tD’s™y
::
D’s™y
(
¡d
::
veùÜ
<DoubË_t> &
xev
, DoubË_ˆ&
ev’t_d’s™y
)

103 ià(!
	gfB¡
)

104 
Log
(è<< 
	gkFATAL
 << "<PDEFßmEv’tD’s™y::D’s™y()> Bš¬y»nÙ found!" << 
	gEndl
;

107 
	g¡d
::
veùÜ
<
DoubË_t
> 
lb
(
G‘Box
().
size
());

108 
	g¡d
::
veùÜ
<
DoubË_t
> 
ub
(
G‘Box
().
size
());

111 cÚ¡ 
DoubË_t
 
	g´obevŞume_šv
 = 1.0 / 
G‘BoxVŞume
();

114 
UIÁ_t
 
	gidim
 = 0; idim < 
G‘Box
().
size
(); ++idim) {

115 
	glb
[
idim
] = 
xev
[idim] - 
G‘Box
().
©
(idim) / 2.0;

116 
	gub
[
idim
] = 
xev
[idim] + 
G‘Box
().
©
(idim) / 2.0;

119 
	gTMVA
::
VŞume
 
vŞume
(&
lb
, &
ub
);

120 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*> 
nodes
;

123 cÚ¡ 
DoubË_t
 
	gsumOfWeights
 = 
fB¡
->
S—rchVŞume
(&
vŞume
, &
nodes
);

126 
	gev’t_d’s™y
 = 
nodes
.
size
(è* 
´obevŞume_šv
;

129  (
	gsumOfWeights
 + 0.1è* 
	g´obevŞume_šv
;

	@src/PDEFoamKernelBase.cxx

39 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

41 
	~"TMVA/MsgLogg”.h
"

43 
	~"Rty³s.h
"

44 
	~"TObjeù.h
"

46 
CÏssImp
(
TMVA
::
PDEFßmK”ÃlBa£
);

51 
	gTMVA
::
PDEFßmK”ÃlBa£
::
	$PDEFßmK”ÃlBa£
()

52 : 
	`TObjeù
()

53 , 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("PDEFoamKernelBase"))

55 
	}
}

60 
	gTMVA
::
PDEFßmK”ÃlBa£
::
	$PDEFßmK”ÃlBa£
(cÚ¡ 
PDEFßmK”ÃlBa£
 &
Ùh”
)

61 : 
	`TObjeù
()

62 , 
	`fLogg”
(
Ãw
 
	$MsgLogg”
(*
Ùh”
.
fLogg”
))

64 
	}
}

69 
	gTMVA
::
PDEFßmK”ÃlBa£
::~
	$PDEFßmK”ÃlBa£
()

71 ià(
fLogg”
 !ğ
NULL
)

72 
d–‘e
 
fLogg”
;

73 
	}
}

	@src/PDEFoamKernelGauss.cxx

34 
	~"TMVA/PDEFßmK”ÃlGauss.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/PDEFßm.h
"

38 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

39 
	~"TMVA/Ty³s.h
"

41 
	~"TM©h.h
"

43 
	~"Rty³s.h
"

45 
CÏssImp
(
TMVA
::
PDEFßmK”ÃlGauss
);

50 
	gTMVA
::
PDEFßmK”ÃlGauss
::
	$PDEFßmK”ÃlGauss
(
Flßt_t
 
sigma
)

51 : 
	`PDEFßmK”ÃlBa£
()

52 , 
	$fSigma
(
sigma
)

54 
	}
}

59 
	gTMVA
::
PDEFßmK”ÃlGauss
::
	$PDEFßmK”ÃlGauss
(cÚ¡ 
PDEFßmK”ÃlGauss
 &
Ùh”
)

60 : 
	`PDEFßmK”ÃlBa£
(
Ùh”
)

61 , 
	$fSigma
(
Ùh”
.
fSigma
)

63 
	}
}

79 
Flßt_t
 
	gTMVA
::
PDEFßmK”ÃlGauss
::
E¡im©e
(
PDEFßm
 *
fßm
, 
¡d
::
veùÜ
<Flßt_t> &
txvec
, 
EC–lV®ue
 
cv
)

81 ià(
	gfßm
 =ğ
NULL
)

82 
Log
(è<< 
kFATAL
 << "<PDEFßmK”ÃlGauss::E¡im©e>: PDEFßm‚Ù s‘!" << 
Endl
;

84 
Flßt_t
 
	g»suÉ
 = 0, 
	gnÜm
 = 0;

86 
LÚg_t
 
	giC–l
 = 0; iC–È<ğ
fßm
->
fLa¡Ce
; iCell++) {

87 ià(!(
	gfßm
->
	gfC–ls
[
iC–l
]->
G‘St
())) ;

90 
Flßt_t
 
	gûÎ_v®
 = 0;

91 ià(!
	gfßm
->
C–lV®ueIsUndefšed
(
fßm
->
fC–ls
[
iC–l
]))

93 
	gûÎ_v®
 = 
fßm
->
G‘C–lV®ue
(fßm->
fC–ls
[
iC–l
], 
cv
);

96 
	gûÎ_v®
 = 
G‘Av”ageNeighbÜsV®ue
(
fßm
, 
txvec
, 
cv
);

99 
Flßt_t
 
	ggau
 = 
WeightGaus
(
fßm
, fßm->
fC–ls
[
iC–l
], 
txvec
);

101 
	g»suÉ
 +ğ
gau
 * 
ûÎ_v®
;

102 
	gnÜm
 +ğ
gau
;

105  (
	gnÜm
 !ğ0 ? 
»suÉ
 / 
nÜm
 : 0);

119 
Flßt_t
 
	gTMVA
::
PDEFßmK”ÃlGauss
::
G‘Av”ageNeighbÜsV®ue
(
PDEFßm
 *
fßm
,

120 
¡d
::
veùÜ
<
Flßt_t
> &
txvec
,

121 
EC–lV®ue
 
cv
)

123 cÚ¡ 
Flßt_t
 
	gxoff£t
 = 1.e-6;

124 
Flßt_t
 
	gnÜm
 = 0;

125 
Flßt_t
 
	g»suÉ
 = 0;

127 
PDEFßmC–l
 *
	gûÎ
 = 
fßm
->
FšdC–l
(
txvec
);

128 
PDEFßmVeù
 
ûÎSize
(
fßm
->
G‘TÙDim
());

129 
PDEFßmVeù
 
ûÎPosi
(
fßm
->
G‘TÙDim
());

130 
	gûÎ
->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

133 
IÁ_t
 
	gdim
 = 0; dim < 
	gfßm
->
G‘TÙDim
(); dim++) {

134 
	g¡d
::
veùÜ
<
Flßt_t
> 
Áxvec
(
txvec
);

135 
PDEFßmC–l
* 
	gËá_ûÎ
 = 0;

136 
PDEFßmC–l
* 
	gright_ûÎ
 = 0;

139 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] - 
xoff£t
;

140 
	gËá_ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

141 ià(!
	gfßm
->
C–lV®ueIsUndefšed
(
Ëá_ûÎ
)) {

143 
	g»suÉ
 +ğ
fßm
->
G‘C–lV®ue
(
Ëá_ûÎ
, 
cv
);

144 
	gnÜm
++;

147 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] + 
ûÎSize
[dim] + 
xoff£t
;

148 
	gright_ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

149 ià(!
	gfßm
->
C–lV®ueIsUndefšed
(
right_ûÎ
)) {

151 
	g»suÉ
 +ğ
fßm
->
G‘C–lV®ue
(
right_ûÎ
, 
cv
);

152 
	gnÜm
++;

155 ià(
	gnÜm
 > 0è
	g»suÉ
 /ğ
nÜm
;

156 
	g»suÉ
 = 0;

158  
	g»suÉ
;

182 
Flßt_t
 
	gTMVA
::
PDEFßmK”ÃlGauss
::
WeightGaus
(
PDEFßm
 *
fßm
, 
PDEFßmC–l
* 
ûÎ
,

183 
¡d
::
veùÜ
<
Flßt_t
> &
txvec
)

186 
PDEFßmVeù
 
ûÎSize
(
fßm
->
G‘TÙDim
());

187 
PDEFßmVeù
 
ûÎPosi
(
fßm
->
G‘TÙDim
());

188 
	gûÎ
->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

191 
	g¡d
::
veùÜ
<
Flßt_t
> 
ûÎ_ûÁ”
;

192 
	gûÎ_ûÁ”
.
»£rve
(
fßm
->
G‘TÙDim
());

193 
IÁ_t
 
	gi
 = 0; i < 
	gfßm
->
G‘TÙDim
(); ++i) {

194 ià(
	gtxvec
[
i
] < 0.)xvec[i] = 0.;

195 ià(
	gtxvec
[
i
] > 1.)xvec[i] = 1.;

197 ià(
	gûÎPosi
[
i
] > 
	gtxvec
.
©
(i))

198 
	gûÎ_ûÁ”
.
push_back
(
ûÎPosi
[
i
]);

199 ià(
	gûÎPosi
[
i
] + 
	gûÎSize
[i] < 
	gtxvec
.
©
(i))

200 
	gûÎ_ûÁ”
.
push_back
(
ûÎPosi
[
i
] + 
ûÎSize
[i]);

202 
	gûÎ_ûÁ”
.
push_back
(
txvec
.
©
(
i
));

205 
Flßt_t
 
	gdi¡ªû
 = 0;

206 
IÁ_t
 
	gi
 = 0; i < 
	gfßm
->
G‘TÙDim
(); ++i)

207 
	gdi¡ªû
 +ğ
Sqr
(
txvec
.
©
(
i
è- 
ûÎ_ûÁ”
.at(i));

208 
	gdi¡ªû
 = 
TM©h
::
Sq¹
(
di¡ªû
);

211  
	gTM©h
::
Gaus
(
di¡ªû
, 0, 
fSigma
, 
kFALSE
);

	@src/PDEFoamKernelLinN.cxx

34 
	~"TMVA/PDEFßmK”ÃlLšN.h
"

36 
	~"TMVA/PDEFßm.h
"

37 
	~"TMVA/MsgLogg”.h
"

38 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

39 
	~"TMVA/Ty³s.h
"

41 
	~"Rty³s.h
"

43 
	~<veùÜ
>

45 
CÏssImp
(
TMVA
::
PDEFßmK”ÃlLšN
);

50 
	gTMVA
::
PDEFßmK”ÃlLšN
::
	$PDEFßmK”ÃlLšN
()

51 : 
	$PDEFßmK”ÃlBa£
()

53 
	}
}

58 
TMVA
::
PDEFßmK”ÃlLšN
::
	$PDEFßmK”ÃlLšN
(cÚ¡ 
PDEFßmK”ÃlLšN
 &
Ùh”
)

59 : 
	$PDEFßmK”ÃlBa£
(
Ùh”
)

61 
	}
}

77 
Flßt_t
 
TMVA
::
PDEFßmK”ÃlLšN
::
E¡im©e
(
PDEFßm
 *
fßm
, 
¡d
::
veùÜ
<Flßt_t> &
txvec
, 
EC–lV®ue
 
cv
)

79 ià(
	gfßm
 =ğ
NULL
)

80 
Log
(è<< 
kFATAL
 << "<PDEFßmK”ÃlLšN::E¡im©e>: PDEFßm‚Ù s‘!" << 
Endl
;

82  
WeightLšNeighbÜs
(
fßm
, 
txvec
, 
cv
, 
kTRUE
);

106 
Flßt_t
 
	gTMVA
::
PDEFßmK”ÃlLšN
::
WeightLšNeighbÜs
(
PDEFßm
 *
fßm
, 
¡d
::
veùÜ
<Flßt_t> &
txvec
, 
EC–lV®ue
 
cv
, 
BoŞ_t
 
Œ—tEm±yC–ls
)

108 
Flßt_t
 
	g»suÉ
 = 0.;

109 
UIÁ_t
 
	gnÜm
 = 0;

110 cÚ¡ 
Flßt_t
 
	gxoff£t
 = 1.e-6;

112 ià(
	gtxvec
.
size
(è!ğ
UIÁ_t
(
fßm
->
G‘TÙDim
()))

113 
Log
(è<< 
kFATAL
 << "WrÚg dim’siÚ oàev’ˆv¬ŸbË!" << 
Endl
;

116 
PDEFßmC–l
 *
	gûÎ
 = 
fßm
->
FšdC–l
(
txvec
);

117 
PDEFßmVeù
 
ûÎSize
(
fßm
->
G‘TÙDim
());

118 
PDEFßmVeù
 
ûÎPosi
(
fßm
->
G‘TÙDim
());

119 
	gûÎ
->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

121 
Flßt_t
 
	gûÎv®
 = 0;

122 ià(!(
	gŒ—tEm±yC–ls
 && 
	gfßm
->
C–lV®ueIsUndefšed
(
ûÎ
)))

124 
	gûÎv®
 = 
fßm
->
G‘C–lV®ue
(
ûÎ
, 
cv
);

128 
	gûÎv®
 = 
G‘Av”ageNeighbÜsV®ue
(
fßm
, 
txvec
, 
cv
);

131 
IÁ_t
 
	gdim
 = 0; dim < 
	gfßm
->
G‘TÙDim
(); dim++) {

132 
	g¡d
::
veùÜ
<
Flßt_t
> 
Áxvec
(
txvec
);

133 
Flßt_t
 
	gmšdi¡
;

134 
PDEFßmC–l
 *
	gmšdi¡ûÎ
 = 0;

136 
	gmšdi¡
 = (
txvec
[
dim
] - 
ûÎPosi
[dim]è/ 
ûÎSize
[dim];

137 ià(
	gmšdi¡
 < 0.5) {

138 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] - 
xoff£t
;

139 
	gmšdi¡ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

141 
	gmšdi¡
 = 1 - 
mšdi¡
;

142 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] + 
ûÎSize
[dim] + 
xoff£t
;

143 
	gmšdi¡ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

146 
Flßt_t
 
	gmšdi¡ûÎv®
 = 
fßm
->
G‘C–lV®ue
(
mšdi¡ûÎ
, 
cv
);

149 ià(!(
	gŒ—tEm±yC–ls
 && 
	gfßm
->
C–lV®ueIsUndefšed
(
mšdi¡ûÎ
))) {

150 
	g»suÉ
 +ğ
ûÎv®
 * (0.5 + 
mšdi¡
);

151 
	g»suÉ
 +ğ
mšdi¡ûÎv®
 * (0.5 - 
mšdi¡
);

152 
	gnÜm
++;

155 ià(
	gnÜm
 =ğ0è 
ûÎv®
;

156  
	g»suÉ
 / 
	gnÜm
;

170 
Flßt_t
 
	gTMVA
::
PDEFßmK”ÃlLšN
::
G‘Av”ageNeighbÜsV®ue
(
PDEFßm
 *
fßm
,

171 
¡d
::
veùÜ
<
Flßt_t
> &
txvec
,

172 
EC–lV®ue
 
cv
)

174 cÚ¡ 
Flßt_t
 
	gxoff£t
 = 1.e-6;

175 
Flßt_t
 
	gnÜm
 = 0;

176 
Flßt_t
 
	g»suÉ
 = 0;

178 
PDEFßmC–l
 *
	gûÎ
 = 
fßm
->
FšdC–l
(
txvec
);

179 
PDEFßmVeù
 
ûÎSize
(
fßm
->
G‘TÙDim
());

180 
PDEFßmVeù
 
ûÎPosi
(
fßm
->
G‘TÙDim
());

181 
	gûÎ
->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

184 
IÁ_t
 
	gdim
 = 0; dim < 
	gfßm
->
G‘TÙDim
(); dim++) {

185 
	g¡d
::
veùÜ
<
Flßt_t
> 
Áxvec
(
txvec
);

186 
PDEFßmC–l
* 
	gËá_ûÎ
 = 0;

187 
PDEFßmC–l
* 
	gright_ûÎ
 = 0;

190 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] - 
xoff£t
;

191 
	gËá_ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

192 ià(!
	gfßm
->
C–lV®ueIsUndefšed
(
Ëá_ûÎ
)) {

194 
	g»suÉ
 +ğ
fßm
->
G‘C–lV®ue
(
Ëá_ûÎ
, 
cv
);

195 
	gnÜm
++;

198 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] + 
ûÎSize
[dim] + 
xoff£t
;

199 
	gright_ûÎ
 = 
fßm
->
FšdC–l
(
Áxvec
);

200 ià(!
	gfßm
->
C–lV®ueIsUndefšed
(
right_ûÎ
)) {

202 
	g»suÉ
 +ğ
fßm
->
G‘C–lV®ue
(
right_ûÎ
, 
cv
);

203 
	gnÜm
++;

206 ià(
	gnÜm
 > 0è
	g»suÉ
 /ğ
nÜm
;

207 
	g»suÉ
 = 0;

209  
	g»suÉ
;

	@src/PDEFoamKernelTrivial.cxx

34 
	~"TMVA/PDEFßmK”ÃlTrivŸl.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/PDEFßm.h
"

38 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

39 
	~"TMVA/Ty³s.h
"

41 
	~"Rty³s.h
"

43 
	~<veùÜ
>

45 
CÏssImp
(
TMVA
::
PDEFßmK”ÃlTrivŸl
);

50 
	gTMVA
::
PDEFßmK”ÃlTrivŸl
::
	$PDEFßmK”ÃlTrivŸl
()

51 : 
	$PDEFßmK”ÃlBa£
()

53 
	}
}

58 
TMVA
::
PDEFßmK”ÃlTrivŸl
::
	$PDEFßmK”ÃlTrivŸl
(cÚ¡ 
PDEFßmK”ÃlTrivŸl
 &
Ùh”
)

59 : 
	$PDEFßmK”ÃlBa£
(
Ùh”
)

61 
	}
}

75 
Flßt_t
 
TMVA
::
PDEFßmK”ÃlTrivŸl
::
E¡im©e
(
PDEFßm
 *
fßm
, 
¡d
::
veùÜ
<Flßt_t> &
txvec
, 
EC–lV®ue
 
cv
)

77 ià(
	gfßm
 =ğ
NULL
)

78 
Log
(è<< 
kFATAL
 << "<PDEFßmK”ÃlTrivŸl::E¡im©e>: PDEFßm‚Ù s‘!" << 
Endl
;

80  
	gfßm
->
G‘C–lV®ue
(
fßm
->
FšdC–l
(
txvec
), 
cv
);

	@src/PDEFoamMultiTarget.cxx

50 
	~"TMVA/PDEFßmMuÉiT¬g‘.h
"

52 
	~"TMVA/MsgLogg”.h
"

53 
	~"TMVA/PDEFßm.h
"

54 
	~"TMVA/PDEFßmEv’t.h
"

55 
	~"TMVA/Ty³s.h
"

57 
	~"Rty³s.h
"

59 
	~<m­
>

61 
şass
 
	gTSŒšg
;

63 
CÏssImp
(
TMVA
::
PDEFßmMuÉiT¬g‘
);

68 
	gTMVA
::
PDEFßmMuÉiT¬g‘
::
	$PDEFßmMuÉiT¬g‘
()

69 : 
	`PDEFßmEv’t
()

70 , 
	$fT¬g‘S–eùiÚ
(
kM—n
)

72 
	}
}

95 
	gTMVA
::
PDEFßmMuÉiT¬g‘
::
	$PDEFßmMuÉiT¬g‘
(cÚ¡ 
TSŒšg
& 
Çme
, 
ET¬g‘S–eùiÚ
 
ts
)

96 : 
	`PDEFßmEv’t
(
Çme
)

97 , 
	$fT¬g‘S–eùiÚ
(
ts
)

99 
	}
}

104 
	gTMVA
::
PDEFßmMuÉiT¬g‘
::
	$PDEFßmMuÉiT¬g‘
(cÚ¡ 
PDEFßmMuÉiT¬g‘
 &
äom
)

105 : 
	`PDEFßmEv’t
(
äom
)

106 , 
	$fT¬g‘S–eùiÚ
(
äom
.
fT¬g‘S–eùiÚ
)

108 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

109 
	}
}

128 
	g¡d
::
veùÜ
<
Flßt_t
> 
TMVA
::
PDEFßmMuÉiT¬g‘
::
G‘C–lV®ue
(cÚ¡ 
¡d
::
m­
<
IÁ_t
, Flßt_t>& 
xvec
, 
EC–lV®ue
 )

131 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
> 
	gtxvec
;

132 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
xvec
.
begš
();

133 
	g™
 !ğ
xvec
.
’d
(); ++it) {

134 
Flßt_t
 
	gcoÜdš©e
 = 
™
->
£cÚd
;

135 
IÁ_t
 
	gdim
 = 
™
->
fœ¡
;

138 ià(
	gcoÜdš©e
 <ğ
fXmš
[
dim
])

139 
coÜdš©e
 = 
fXmš
[
dim
] + 
¡d
::
num”ic_lim™s
<>::
•sÚ
();

140 ià(
	gcoÜdš©e
 >ğ
fXmax
[
dim
])

141 
coÜdš©e
 = 
fXmax
[
dim
] - 
¡d
::
num”ic_lim™s
<>::
•sÚ
();

143 
	gtxvec
.
š£¹
(
¡d
::
·œ
<
IÁ_t
, 
Flßt_t
>(
dim
, 
V¬T¿nsfÜm
(dim, 
coÜdš©e
)));

147 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
> 
	grg‘
;

150 
	g¡d
::
veùÜ
<
PDEFßmC–l
*> 
ûÎs
 = 
FšdC–ls
(
txvec
);

151 ià(
	gûÎs
.
em±y
()) {

154  
	g¡d
::
veùÜ
<
Flßt_t
>(
G‘TÙDim
(è- 
xvec
.
size
(), 0);

158 
IÁ_t
 
	gidim
 = 0; idim < 
G‘TÙDim
(); ++idim) {

160 ià(
	gtxvec
.
fšd
(
idim
è=ğ
txvec
.
’d
())

161 
rg‘
.
š£¹
(
¡d
::
·œ
<
IÁ_t
, 
Flßt_t
>(
idim
, 0));

164 
	gfT¬g‘S–eùiÚ
) {

165 
	gkM—n
:

166 
C®cuÏ‹M—n
(
rg‘
, 
ûÎs
);

168 
	gkMpv
:

169 
C®cuÏ‹Mpv
(
rg‘
, 
ûÎs
);

172 
Log
() << "<PDEFoamMultiTarget::GetCellValue>: "

173 << "unknowÀrg‘ s–eùiÚy³!" << 
Endl
;

178 
	g¡d
::
veùÜ
<
Flßt_t
> 
»suÉ
;

179 
	g»suÉ
.
»£rve
(
rg‘
.
size
());

180 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
>::
cÚ¡_™”©Ü
 
™
 = 
rg‘
.
begš
();

181 
	g™
 !ğ
rg‘
.
’d
(); ++it)

182 
	g»suÉ
.
push_back
(
™
->
£cÚd
);

184  
	g»suÉ
;

202 
	gTMVA
::
PDEFßmMuÉiT¬g‘
::
C®cuÏ‹Mpv
(
¡d
::
m­
<
IÁ_t
, 
Flßt_t
>& 
rg‘
, cÚ¡ std::
veùÜ
<
PDEFßmC–l
*>& 
ûÎs
)

204 
DoubË_t
 
max_d’s
 = 0.0;

207 
	g¡d
::
veùÜ
<
PDEFßmC–l
*>::
cÚ¡_™”©Ü
 
ûÎ_™
 = 
ûÎs
.
begš
();

208 
	gûÎ_™
 !ğ
ûÎs
.
’d
(); ++cell_it) {

211 cÚ¡ 
DoubË_t
 
	gûÎ_d’s™y
 = 
G‘C–lV®ue
(*
ûÎ_™
, 
kV®ueD’s™y
);

214 ià(
	gûÎ_d’s™y
 > 
	gmax_d’s
) {

216 
PDEFßmVeù
 
ûÎPosi
(
G‘TÙDim
()), 
ûÎSize
(GetTotDim());

217 (*
	gûÎ_™
)->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

220 
	gmax_d’s
 = 
ûÎ_d’s™y
;

223 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
>::
™”©Ü
 
rg‘_™
 = 
rg‘
.
begš
();

224 
	grg‘_™
 !ğ
rg‘
.
’d
(); ++target_it) {

225 cÚ¡ 
IÁ_t
 
	gdim
 = 
rg‘_™
->
fœ¡
;

226 
	grg‘_™
->
	g£cÚd
 =

227 
V¬T¿nsfÜmInv”s
(
dim
, 
ûÎPosi
[dim] + 0.5 * 
ûÎSize
[dim]);

248 
	gTMVA
::
PDEFßmMuÉiT¬g‘
::
C®cuÏ‹M—n
(
¡d
::
m­
<
IÁ_t
, 
Flßt_t
>& 
rg‘
, cÚ¡ std::
veùÜ
<
PDEFßmC–l
*>& 
ûÎs
)

251 
¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
> 
	gnÜm
;

254 
	g¡d
::
veùÜ
<
PDEFßmC–l
*>::
cÚ¡_™”©Ü
 
ûÎ_™
 = 
ûÎs
.
begš
();

255 
	gûÎ_™
 !ğ
ûÎs
.
’d
(); ++cell_it) {

258 cÚ¡ 
DoubË_t
 
	gûÎ_d’s™y
 = 
G‘C–lV®ue
(*
ûÎ_™
, 
kV®ueD’s™y
);

261 
PDEFßmVeù
 
ûÎPosi
(
G‘TÙDim
()), 
ûÎSize
(GetTotDim());

262 (*
	gûÎ_™
)->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

265 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
>::
™”©Ü
 
rg‘_™
 = 
rg‘
.
begš
();

266 
	grg‘_™
 !ğ
rg‘
.
’d
(); ++target_it) {

267 cÚ¡ 
IÁ_t
 
	gdim
 = 
rg‘_™
->
fœ¡
;

268 
	grg‘_™
->
	g£cÚd
 +ğ
ûÎ_d’s™y
 *

269 
V¬T¿nsfÜmInv”s
(
dim
, 
ûÎPosi
[dim] + 0.5 * 
ûÎSize
[dim]);

270 
	gnÜm
[
dim
] +ğ
ûÎ_d’s™y
;

275 
	g¡d
::
m­
<
IÁ_t
, 
	gFlßt_t
>::
™”©Ü
 
rg‘_™
 = 
rg‘
.
begš
();

276 
	grg‘_™
 !ğ
rg‘
.
’d
(); ++target_it) {

279 cÚ¡ 
IÁ_t
 
	gdim
 = 
rg‘_™
->
fœ¡
;

282 ià(
	gnÜm
[
dim
] > 
	g¡d
::
num”ic_lim™s
<
Flßt_t
>::
•sÚ
()) {

283 
rg‘
[
dim
] /ğ
nÜm
[dim];

287 
	grg‘
[
dim
] = (
fXmax
[dim] - 
fXmš
[dim]) / 2.;

	@src/PDEFoamTarget.cxx

39 
	~"TMVA/PDEFßmT¬g‘.h
"

41 
	~"TMVA/Ev’t.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/PDEFßm.h
"

44 
	~"TMVA/PDEFßmC–l.h
"

45 
	~"TMVA/PDEFßmK”ÃlBa£.h
"

46 
	~"TMVA/Ty³s.h
"

48 
	~"TM©h.h
"

50 
	~"Rty³s.h
"

52 
CÏssImp
(
TMVA
::
PDEFßmT¬g‘
);

57 
	gTMVA
::
PDEFßmT¬g‘
::
	$PDEFßmT¬g‘
()

58 : 
	`PDEFßm
()

59 , 
	$fT¬g‘
(0)

61 
	}
}

72 
	gTMVA
::
PDEFßmT¬g‘
::
	$PDEFßmT¬g‘
(cÚ¡ 
TSŒšg
& 
Çme
, 
UIÁ_t
 
rg‘
)

73 : 
	`PDEFßm
(
Çme
)

74 , 
	$fT¬g‘
(
rg‘
)

76 
	}
}

81 
	gTMVA
::
PDEFßmT¬g‘
::
	$PDEFßmT¬g‘
(cÚ¡ 
PDEFßmT¬g‘
 &
äom
)

82 : 
	`PDEFßm
(
äom
)

83 , 
	$fT¬g‘
(
äom
.
fT¬g‘
)

85 
	`Log
(è<< 
kFATAL
 << "COPY CONSTRUCTOR NOT IMPLEMENTED" << 
Endl
;

86 
	}
}

93 
	gTMVA
::
PDEFßmT¬g‘
::
	$FlFßmC–ls
(cÚ¡ 
Ev’t
* 
ev
, 
Flßt_t
 
wt
)

96 
¡d
::
veùÜ
<
Flßt_t
> 
v®ues
 = 
ev
->
	`G‘V®ues
();

97 
¡d
::
veùÜ
<
Flßt_t
> 
tv®ues
 = 
	`V¬T¿nsfÜm
(
v®ues
);

98 
¡d
::
veùÜ
<
Flßt_t
> 
rg‘s
 = 
ev
->
	`G‘T¬g‘s
();

99 
PDEFßmC–l
 *
ûÎ
 = 
	`FšdC–l
(
tv®ues
);

103 
	`S‘C–lEËm’t
(
ûÎ
, 0, 
	`G‘C–lEËm’t
(ûÎ, 0è+ 
wt
);

104 
	`S‘C–lEËm’t
(
ûÎ
, 1, 
	`G‘C–lEËm’t
(ûÎ, 1è+ 
wt
 * 
rg‘s
.
	`©
(
fT¬g‘
));

105 
	}
}

112 
	gTMVA
::
PDEFßmT¬g‘
::
	$Fš®ize
()

115 
LÚg_t
 
iC–l
 = 0; iC–È<ğ
fLa¡Ce
; iCell++) {

116 ià(!(
fC–ls
[
iC–l
]->
	`G‘St
()))

119 
DoubË_t
 
n_ev
 = 
	`G‘C–lEËm’t
(
fC–ls
[
iC–l
], 0);

120 
DoubË_t
 
r
 = 
	`G‘C–lEËm’t
(
fC–ls
[
iC–l
], 1);

122 ià(
n_ev
 > 0) {

123 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 0, 
r
 / 
n_ev
);

124 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 1, 
r
 / 
TM©h
::
	`Sq¹
(
n_ev
));

126 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 0, 0.0);

127 
	`S‘C–lEËm’t
(
fC–ls
[
iC–l
], 1, -1);

130 
	}
}

136 
BoŞ_t
 
	gTMVA
::
PDEFßmT¬g‘
::
	$C–lV®ueIsUndefšed
(
PDEFßmC–l
* 
ûÎ
)

138  
	`G‘C–lV®ue
(
ûÎ
, 
kV®ueE¼Ü
) == -1;

139 
	}
}

150 
Flßt_t
 
	gTMVA
::
PDEFßmT¬g‘
::
G‘C–lV®ue
(cÚ¡ 
¡d
::
veùÜ
<Flßt_t> &
xvec
, 
EC–lV®ue
 
cv
, 
PDEFßmK”ÃlBa£
 *
k”Ãl
)

152 
	g¡d
::
veùÜ
<
Flßt_t
> 
txvec
(
V¬T¿nsfÜm
(
xvec
));

153 
PDEFßmC–l
 *
	gûÎ
 = 
FšdC–l
(
txvec
);

155 ià(!
C–lV®ueIsUndefšed
(
ûÎ
)) {

157 ià(
	gk”Ãl
 =ğ
NULL
)

158  
G‘C–lV®ue
(
ûÎ
, 
cv
);

160  
	gk”Ãl
->
E¡im©e
(
this
, 
txvec
, 
cv
);

163  
G‘Av”ageNeighbÜsV®ue
(
txvec
, 
kV®ue
);

175 
Flßt_t
 
	gTMVA
::
PDEFßmT¬g‘
::
G‘Av”ageNeighbÜsV®ue
(
¡d
::
veùÜ
<Flßt_t> &
txvec
,

176 
EC–lV®ue
 
cv
)

178 cÚ¡ 
Flßt_t
 
	gxoff£t
 = 1.e-6;

179 
Flßt_t
 
	gnÜm
 = 0;

180 
Flßt_t
 
	g»suÉ
 = 0;

182 
PDEFßmC–l
 *
	gûÎ
 = 
FšdC–l
(
txvec
);

183 
PDEFßmVeù
 
ûÎSize
(
G‘TÙDim
());

184 
PDEFßmVeù
 
ûÎPosi
(
G‘TÙDim
());

185 
	gûÎ
->
G‘Hcub
(
ûÎPosi
, 
ûÎSize
);

188 
IÁ_t
 
	gdim
 = 0; dim < 
G‘TÙDim
(); dim++) {

189 
	g¡d
::
veùÜ
<
Flßt_t
> 
Áxvec
(
txvec
);

190 
PDEFßmC–l
* 
	gËá_ûÎ
 = 0;

191 
PDEFßmC–l
* 
	gright_ûÎ
 = 0;

194 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] - 
xoff£t
;

195 
	gËá_ûÎ
 = 
FšdC–l
(
Áxvec
);

196 ià(!
C–lV®ueIsUndefšed
(
Ëá_ûÎ
)) {

198 
	g»suÉ
 +ğ
G‘C–lV®ue
(
Ëá_ûÎ
, 
cv
);

199 
	gnÜm
++;

202 
	gÁxvec
[
dim
] = 
ûÎPosi
[dim] + 
ûÎSize
[dim] + 
xoff£t
;

203 
	gright_ûÎ
 = 
FšdC–l
(
Áxvec
);

204 ià(!
C–lV®ueIsUndefšed
(
right_ûÎ
)) {

206 
	g»suÉ
 +ğ
G‘C–lV®ue
(
right_ûÎ
, 
cv
);

207 
	gnÜm
++;

210 ià(
	gnÜm
 > 0è
	g»suÉ
 /ğ
nÜm
;

211 
	g»suÉ
 = 0;

213  
	g»suÉ
;

	@src/PDEFoamTargetDensity.cxx

41 
	~"TMVA/PDEFßmT¬g‘D’s™y.h
"

43 
	~"TMVA/Bš¬yS—rchT»e.h
"

44 
	~"TMVA/MsgLogg”.h
"

45 
	~"TMVA/PDEFßmD’s™yBa£.h
"

46 
	~"TMVA/Ty³s.h
"

47 
	~"TMVA/VŞume.h
"

49 
	~"Rty³s.h
"

51 
	~<cm©h
>

52 
	~<veùÜ
>

54 
CÏssImp
(
TMVA
::
PDEFßmT¬g‘D’s™y
);

58 
	gTMVA
::
PDEFßmT¬g‘D’s™y
::
	$PDEFßmT¬g‘D’s™y
()

59 : 
	`PDEFßmD’s™yBa£
()

60 , 
	$fT¬g‘
(0)

61 {
	}
}

73 
	gTMVA
::
PDEFßmT¬g‘D’s™y
::PDEFßmT¬g‘D’s™y(
¡d
::
veùÜ
<
DoubË_t
> 
box
, 
UIÁ_t
 
rg‘
)

74 : 
PDEFßmD’s™yBa£
(
box
)

75 , 
	$fT¬g‘
(
rg‘
)

77 
	}
}

82 
	gTMVA
::
PDEFßmT¬g‘D’s™y
::
	$PDEFßmT¬g‘D’s™y
(cÚ¡ 
PDEFßmT¬g‘D’s™y
 &
di¡r
)

83 : 
	`PDEFßmD’s™yBa£
(
di¡r
)

84 , 
	$fT¬g‘
(
di¡r
.
fT¬g‘
)

86 
	}
}

104 
DoubË_t
 
	gTMVA
::
PDEFßmT¬g‘D’s™y
::
D’s™y
(
¡d
::
veùÜ
<DoubË_t> &
xev
, DoubË_ˆ&
ev’t_d’s™y
)

106 ià(!
	gfB¡
)

107 
Log
(è<< 
	gkFATAL
 << "<PDEFßmT¬g‘D’s™y::D’s™y()> Bš¬y»nÙ found!" << 
	gEndl
;

110 
	g¡d
::
veùÜ
<
DoubË_t
> 
lb
(
G‘Box
().
size
());

111 
	g¡d
::
veùÜ
<
DoubË_t
> 
ub
(
G‘Box
().
size
());

114 cÚ¡ 
DoubË_t
 
	g´obevŞume_šv
 = 1.0 / 
G‘BoxVŞume
();

117 
UIÁ_t
 
	gidim
 = 0; idim < 
G‘Box
().
size
(); ++idim) {

118 
	glb
[
idim
] = 
xev
[idim] - 
G‘Box
().
©
(idim) / 2.0;

119 
	gub
[
idim
] = 
xev
[idim] + 
G‘Box
().
©
(idim) / 2.0;

122 
	gTMVA
::
VŞume
 
vŞume
(&
lb
, &
ub
);

123 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*> 
nodes
;

126 cÚ¡ 
DoubË_t
 
	gsumOfWeights
 = 
fB¡
->
S—rchVŞume
(&
vŞume
, &
nodes
);

129 
	gev’t_d’s™y
 = 
nodes
.
size
(è* 
´obevŞume_šv
;

131 
DoubË_t
 
	gn_r
 = 0;

133 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Bš¬yS—rchT»eNode
*>::
cÚ¡_™”©Ü
 
™
 = 
nodes
.
begš
();

134 
	g™
 !ğ
nodes
.
’d
(); ++it) {

135 
	gn_r
 +ğ((*
™
)->
G‘T¬g‘s
()).
©
(
fT¬g‘
è* ((*™)->
G‘Weight
());

139  (
	gn_r
 / (
	gsumOfWeights
 + 0.1)è* 
	g´obevŞume_šv
;

	@src/PDEFoamVect.cxx

33 
	~"TMVA/PDEFßmVeù.h
"

35 
	~"Rty³s.h
"

36 
	~"TObjeù.h
"

38 
	~<io¡»am
>

39 
	~<iomª
>

41 
usšg
 
Çme¥aû
 
	g¡d
;

45 
CÏssImp
(
TMVA
::
PDEFßmVeù
);

50 
	gTMVA
::
PDEFßmVeù
::
	$PDEFßmVeù
()

51 : 
	`TObjeù
(),

52 
	`fDim
(0),

53 
	$fCoÜds
(0)

55 
	}
}

61 
	gTMVA
::
PDEFßmVeù
::
	$PDEFßmVeù
(
IÁ_t
 
n
)

62 : 
	`TObjeù
(),

63 
	`fDim
(
n
),

64 
	$fCoÜds
(0)

66 ià(
n
>0) {

67 
fCoÜds
 = 
Ãw
 
DoubË_t
[
fDim
];

68 
IÁ_t
 
i
=0; i<
n
; i++è*(
fCoÜds
+i)=0.0;

70 
	}
}

75 
	gTMVA
::
PDEFßmVeù
::
	$PDEFßmVeù
(cÚ¡ 
PDEFßmVeù
 &
veù
)

76 : 
	`TObjeù
(),

77 
	`fDim
(
veù
.
fDim
),

78 
	$fCoÜds
(
veù
.
fCoÜds
)

80 
	`E¼Ü
( "PDEFoamVect", "COPY CONSTRUCTOR NOT IMPLEMENTED" );

81 
	}
}

86 
	gTMVA
::
PDEFßmVeù
::~
	$PDEFßmVeù
()

88 
d–‘e
 [] 
fCoÜds
;

89 
fCoÜds
=0;

90 
	}
}

99 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
 =(cÚ¡ PDEFßmVeù& 
veù
)

101 ià(&
veù
 =ğ
this
)  *this;

102 ià(
	gfDim
 !ğ
veù
.
fDim
)

103 
E¼Ü
("PDEFßmVeù", "İ”©Ü=Dims.‡» difã»Á: %d‡nd %d \À", 
fDim
, 
veù
.fDim);

104 ià(
	gfDim
 !ğ
veù
.
fDim
) {

105 
d–‘e
 [] 
fCoÜds
;

106 
	gfCoÜds
 = 
Ãw
 
DoubË_t
[
fDim
];

108 
	gfDim
 = 
veù
.
fDim
;

109 
IÁ_t
 
	gi
=0; i<
	gfDim
; i++)

110 
	gfCoÜds
[
i
] = 
veù
.
fCoÜds
[i];

111  *
	gthis
;

120 
	gDoubË_t
 &
	gTMVA
::
PDEFßmVeù
::
İ”©Ü
[](
IÁ_t
 
n
)

122 ià((
n
<0è|| (n>=
fDim
)) {

123 
E¼Ü
( "PDEFoamVect","operator[], out of„ange \n");

125  
	gfCoÜds
[
n
];

131 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
*=(cÚ¡ 
DoubË_t
 &
x
)

133 
IÁ_t
 
i
=0;
	gi
<
	gfDim
;i++)

134 
	gfCoÜds
[
i
] = 
fCoÜds
[i]*
x
;

135  *
	gthis
;

141 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
+=(cÚ¡ PDEFßmVeù& 
shiá
)

143 if(
fDim
 !ğ
shiá
.fDim){

144 
E¼Ü
("PDEFßmVeù", "İ”©Ü+, difã»Á dim’siÚsğ%d %d \n", 
fDim
, 
shiá
.fDim);

146 
IÁ_t
 
	gi
=0;i<
	gfDim
;i++)

147 
	gfCoÜds
[
i
] = 
fCoÜds
[i] + 
shiá
.fCoords[i];

148  *
	gthis
;

154 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
-=(cÚ¡ PDEFßmVeù& 
shiá
)

156 if(
fDim
 !ğ
shiá
.fDim) {

157 
E¼Ü
("PDEFßmVeù", "İ”©Ü+, difã»Á dim’siÚsğ%d %d \n", 
fDim
, 
shiá
.fDim);

159 
IÁ_t
 
	gi
=0;i<
	gfDim
;i++)

160 
	gfCoÜds
[
i
] = 
fCoÜds
[i] - 
shiá
.fCoords[i];

161  *
	gthis
;

168 
	gTMVA
::
PDEFßmVeù
 
TMVA
::PDEFßmVeù::
İ”©Ü
+(cÚ¡ PDEFßmVeù &
p2
)

170 
PDEFßmVeù
 
‹mp
(
fDim
);

171 
	g‹mp
 = (*
this
);

172 
	g‹mp
 +ğ
p2
;

173  
	g‹mp
;

180 
	gTMVA
::
PDEFßmVeù
 
TMVA
::PDEFßmVeù::
İ”©Ü
-(cÚ¡ PDEFßmVeù &
p2
)

182 
PDEFßmVeù
 
‹mp
(
fDim
);

183 
	g‹mp
 = (*
this
);

184 
	g‹mp
 -ğ
p2
;

185  
	g‹mp
;

191 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
 =(
DoubË_t
 
Veù
[])

193 
IÁ_t
 
i
=0; 
	gi
<
	gfDim
; i++)

194 
	gfCoÜds
[
i
] = 
Veù
[i];

195  *
	gthis
;

201 
	gTMVA
::
PDEFßmVeù
& 
TMVA
::PDEFßmVeù::
İ”©Ü
 =(
DoubË_t
 
x
)

203 if(
fCoÜds
 != 0) {

204 
IÁ_t
 
i
=0; 
	gi
<
	gfDim
; i++)

205 
	gfCoÜds
[
i
] = 
x
;

207  *
	gthis
;

217 
	gTMVA
::
PDEFßmVeù
::
	$Pršt
(
O±iÚ_t
 *
İtiÚ
) const

219 
¡»amsize
 
wid
 = 
¡d
::
cout
.
	`width
();

220 if(!
İtiÚ
è
	`E¼Ü
( "Print ", "No option set \n");

221 
¡d
::
cout
 << "(";

222 
IÁ_t
 
i
=0; i<
fDim
-1; i++)

223 
¡d
::
cout
 << std::
	`£tw
(12è<< *(
fCoÜds
+
i
) << ",";

224 
¡d
::
cout
 << std::
	`£tw
(12è<< *(
fCoÜds
+
fDim
-1);

225 
¡d
::
cout
 << ")";

226 
¡d
::
cout
.
	`width
(
wid
);

227 
	}
}

	@src/PDF.cxx

38 
	~"TMVA/PDF.h
"

40 
	~"TMVA/CÚfigu¿bË.h
"

41 
	~"TMVA/KDEK”Ãl.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/Ty³s.h
"

44 
	~"TMVA/ToŞs.h
"

45 
	~"TMVA/TS¶še1.h
"

46 
	~"TMVA/TS¶še2.h
"

47 
	~"TMVA/V”siÚ.h
"

49 
	~"Rio¡»am.h
"

50 
	~"TF1.h
"

51 
	~"TH1F.h
"

52 
	~"TM©h.h
"

53 
	~"TVeùÜD.h
"

55 
	~<c¡dlib
>

56 
	~<iomª
>

59 cÚ¡ 
IÁ_t
 
	gTMVA
::
PDF
::
fgNbš_PdfHi¡
 = 10000;

60 cÚ¡ 
BoŞ_t
 
	gTMVA
::
PDF
::
fgMªu®IÁeg¿tiÚ
 = 
kTRUE
;

61 cÚ¡ 
DoubË_t
 
	gTMVA
::
PDF
::
fgEpsÚ
 = 1.0e-12;

63 
CÏssImp
(
TMVA
::
PDF
);

68 
	gTMVA
::
PDF
::
	$PDF
ĞcÚ¡ 
TSŒšg
& 
Çme
, 
BoŞ_t
 
nÜm
 )

69 : 
	`CÚfigu¿bË
 (""),

70 
	`fU£Hi¡og¿m
 ( 
kFALSE
 ),

71 
	`fPDFName
 ( 
Çme
 ),

72 
	`fNsmoÙh
 ( 0 ),

73 
	`fMšNsmoÙh
 (-1 ),

74 
	`fMaxNsmoÙh
 (-1 ),

75 
	`fNSmoÙhHi¡
 ( 0 ),

76 
	`fIÁ”pŞM‘hod
Ğ
PDF
::
kS¶še2
 ),

77 
	`fS¶še
 ( 0 ),

78 
	`fPDFHi¡
 ( 0 ),

79 
	`fHi¡
 ( 0 ),

80 
	`fHi¡Origš®
 ( 0 ),

81 
	`fG¿ph
 ( 0 ),

82 
	`fIG‘V®
 ( 0 ),

83 
	`fHi¡AvgEvtP”Bš
 ( 0 ),

84 
	`fHi¡DefšedNBšs
 ( 0 ),

85 
	`fKDEty³SŒšg
 ( 0 ),

86 
	`fKDE™”SŒšg
 ( 0 ),

87 
	`fBÜd”M‘hodSŒšg
( 0 ),

88 
	`fIÁ”pŞ©eSŒšg
 ( 0 ),

89 
	`fKDEty³
 ( 
KDEK”Ãl
::
kNÚe
 ),

90 
	`fKDE™”
 ( 
KDEK”Ãl
::
kNÚad­tiveKDE
 ),

91 
	`fKDEbÜd”
 ( 
KDEK”Ãl
::
kNoT»©m’t
 ),

92 
	`fFšeFaùÜ
 ( 0. ),

93 
	`fR—dšgV”siÚ
( 0 ),

94 
	`fCheckHi¡
 ( 
kFALSE
 ),

95 
	`fNÜm®ize
 ( 
nÜm
 ),

96 
	`fSuffix
 ( "" ),

97 
	$fLogg”
 ( 0 )

99 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

100 
	`G‘ThisPdfTh»adLoÿl
(èğ
this
;

101 
	}
}

106 
	gTMVA
::
PDF
::
	$PDF
ĞcÚ¡ 
TSŒšg
& 
Çme
,

107 cÚ¡ 
TH1
 *
hi¡
,

108 
PDF
::
EIÁ”pŞ©eM‘hod
 
m‘hod
,

109 
IÁ_t
 
mšnsmoÙh
,

110 
IÁ_t
 
maxnsmoÙh
,

111 
BoŞ_t
 
checkHi¡
,

112 
BoŞ_t
 
nÜm
) :

113 
	`CÚfigu¿bË
 (""),

114 
	`fU£Hi¡og¿m
 ( 
kFALSE
 ),

115 
	`fPDFName
 ( 
Çme
 ),

116 
	`fMšNsmoÙh
 ( 
mšnsmoÙh
 ),

117 
	`fMaxNsmoÙh
 ( 
maxnsmoÙh
 ),

118 
	`fNSmoÙhHi¡
 ( 0 ),

119 
	`fIÁ”pŞM‘hod
Ğ
m‘hod
 ),

120 
	`fS¶še
 ( 0 ),

121 
	`fPDFHi¡
 ( 0 ),

122 
	`fHi¡
 ( 0 ),

123 
	`fHi¡Origš®
 ( 0 ),

124 
	`fG¿ph
 ( 0 ),

125 
	`fIG‘V®
 ( 0 ),

126 
	`fHi¡AvgEvtP”Bš
 ( 0 ),

127 
	`fHi¡DefšedNBšs
 ( 0 ),

128 
	`fKDEty³SŒšg
 ( 0 ),

129 
	`fKDE™”SŒšg
 ( 0 ),

130 
	`fBÜd”M‘hodSŒšg
( 0 ),

131 
	`fIÁ”pŞ©eSŒšg
 ( 0 ),

132 
	`fKDEty³
 ( 
KDEK”Ãl
::
kNÚe
 ),

133 
	`fKDE™”
 ( 
KDEK”Ãl
::
kNÚad­tiveKDE
 ),

134 
	`fKDEbÜd”
 ( 
KDEK”Ãl
::
kNoT»©m’t
 ),

135 
	`fFšeFaùÜ
 ( 0. ),

136 
	`fR—dšgV”siÚ
( 0 ),

137 
	`fCheckHi¡
 ( 
checkHi¡
 ),

138 
	`fNÜm®ize
 ( 
nÜm
 ),

139 
	`fSuffix
 ( "" ),

140 
	$fLogg”
 ( 0 )

142 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

143 
	`BudPDF
Ğ
hi¡
 );

144 
	}
}

149 
	gTMVA
::
PDF
::
	$PDF
ĞcÚ¡ 
TSŒšg
& 
Çme
,

150 cÚ¡ 
TH1
* 
hi¡
,

151 
KDEK”Ãl
::
EK”ÃlTy³
 
kty³
,

152 
KDEK”Ãl
::
EK”ÃlI‹r
 
k™”
,

153 
KDEK”Ãl
::
EK”ÃlBÜd”
 
kbÜd”
,

154 
Flßt_t
 
FšeFaùÜ
,

155 
BoŞ_t
 
nÜm
) :

156 
	`CÚfigu¿bË
 (""),

157 
	`fU£Hi¡og¿m
 ( 
kFALSE
 ),

158 
	`fPDFName
 ( 
Çme
 ),

159 
	`fNsmoÙh
 ( 0 ),

160 
	`fMšNsmoÙh
 (-1 ),

161 
	`fMaxNsmoÙh
 (-1 ),

162 
	`fNSmoÙhHi¡
 ( 0 ),

163 
	`fIÁ”pŞM‘hod
Ğ
PDF
::
kKDE
 ),

164 
	`fS¶še
 ( 0 ),

165 
	`fPDFHi¡
 ( 0 ),

166 
	`fHi¡
 ( 0 ),

167 
	`fHi¡Origš®
 ( 0 ),

168 
	`fG¿ph
 ( 0 ),

169 
	`fIG‘V®
 ( 0 ),

170 
	`fHi¡AvgEvtP”Bš
 ( 0 ),

171 
	`fHi¡DefšedNBšs
 ( 0 ),

172 
	`fKDEty³SŒšg
 ( 0 ),

173 
	`fKDE™”SŒšg
 ( 0 ),

174 
	`fBÜd”M‘hodSŒšg
( 0 ),

175 
	`fIÁ”pŞ©eSŒšg
 ( 0 ),

176 
	`fKDEty³
 ( 
kty³
 ),

177 
	`fKDE™”
 ( 
k™”
 ),

178 
	`fKDEbÜd”
 ( 
kbÜd”
 ),

179 
	`fFšeFaùÜ
 ( 
FšeFaùÜ
),

180 
	`fR—dšgV”siÚ
( 0 ),

181 
	`fCheckHi¡
 ( 
kFALSE
 ),

182 
	`fNÜm®ize
 ( 
nÜm
 ),

183 
	`fSuffix
 ( "" ),

184 
	$fLogg”
 ( 0 )

186 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

187 
	`BudPDF
Ğ
hi¡
 );

188 
	}
}

192 
	gTMVA
::
PDF
::
	$PDF
ĞcÚ¡ 
TSŒšg
& 
Çme
,

193 cÚ¡ 
TSŒšg
& 
İtiÚs
,

194 cÚ¡ 
TSŒšg
& 
suffix
,

195 
PDF
* 
deçuÉPDF
,

196 
BoŞ_t
 
nÜm
) :

197 
	`CÚfigu¿bË
 (
İtiÚs
),

198 
	`fU£Hi¡og¿m
 ( 
kFALSE
 ),

199 
	`fPDFName
 ( 
Çme
 ),

200 
	`fNsmoÙh
 ( 0 ),

201 
	`fMšNsmoÙh
 ( -1 ),

202 
	`fMaxNsmoÙh
 ( -1 ),

203 
	`fNSmoÙhHi¡
 ( 0 ),

204 
	`fIÁ”pŞM‘hod
Ğ
PDF
::
kS¶še0
 ),

205 
	`fS¶še
 ( 0 ),

206 
	`fPDFHi¡
 ( 0 ),

207 
	`fHi¡
 ( 0 ),

208 
	`fHi¡Origš®
 ( 0 ),

209 
	`fG¿ph
 ( 0 ),

210 
	`fIG‘V®
 ( 0 ),

211 
	`fHi¡AvgEvtP”Bš
 ( 50 ),

212 
	`fHi¡DefšedNBšs
 ( 0 ),

213 
	`fKDEty³SŒšg
 ( "Gauss" ),

214 
	`fKDE™”SŒšg
 ( "Nonadaptive" ),

215 
	`fBÜd”M‘hodSŒšg
( "None" ),

216 
	`fIÁ”pŞ©eSŒšg
 ( "Spline2" ),

217 
	`fKDEty³
 ( 
KDEK”Ãl
::
kNÚe
 ),

218 
	`fKDE™”
 ( 
KDEK”Ãl
::
kNÚad­tiveKDE
 ),

219 
	`fKDEbÜd”
 ( 
KDEK”Ãl
::
kNoT»©m’t
 ),

220 
	`fFšeFaùÜ
 ( 1. ),

221 
	`fR—dšgV”siÚ
( 0 ),

222 
	`fCheckHi¡
 ( 
kFALSE
 ),

223 
	`fNÜm®ize
 ( 
nÜm
 ),

224 
	`fSuffix
 ( 
suffix
 ),

225 
	$fLogg”
 ( 0 )

227 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

228 ià(
deçuÉPDF
 != 0) {

229 
fNsmoÙh
 = 
deçuÉPDF
->fNsmooth;

230 
fMšNsmoÙh
 = 
deçuÉPDF
->fMinNsmooth;

231 
fMaxNsmoÙh
 = 
deçuÉPDF
->fMaxNsmooth;

232 
fHi¡AvgEvtP”Bš
 = 
deçuÉPDF
->fHistAvgEvtPerBin;

233 
fHi¡AvgEvtP”Bš
 = 
deçuÉPDF
->fHistAvgEvtPerBin;

234 
fIÁ”pŞ©eSŒšg
 = 
deçuÉPDF
->fInterpolateString;

235 
fKDEty³SŒšg
 = 
deçuÉPDF
->fKDEtypeString;

236 
fKDE™”SŒšg
 = 
deçuÉPDF
->fKDEiterString;

237 
fFšeFaùÜ
 = 
deçuÉPDF
->fFineFactor;

238 
fBÜd”M‘hodSŒšg
 = 
deçuÉPDF
->fBorderMethodString;

239 
fCheckHi¡
 = 
deçuÉPDF
->fCheckHist;

240 
fHi¡DefšedNBšs
 = 
deçuÉPDF
->fHistDefinedNBins;

242 
	}
}

245 
	gTMVA
::
PDF
::~
	$PDF
()

248 ià(
fS¶še
 !ğ
NULL
è
d–‘e
 fSpline;

249 ià(
fHi¡
 !ğ
NULL
è
d–‘e
 fHist;

250 ià(
fPDFHi¡
 !ğ
NULL
è
d–‘e
 fPDFHist;

251 ià(
fHi¡Origš®
 !ğ
NULL
è
d–‘e
 fHistOriginal;

252 ià(
fIG‘V®
 !ğ
NULL
è
d–‘e
 fIGetVal;

253 ià(
fG¿ph
 !ğ
NULL
è
d–‘e
 fGraph;

254 
d–‘e
 
fLogg”
;

255 
	}
}

259 
	gTMVA
::
PDF
::
	$BudPDF
ĞcÚ¡ 
TH1
* 
hi¡
 )

261 
	`G‘ThisPdfTh»adLoÿl
(èğ
this
;

263 ià(
hi¡
 =ğ
NULL
è
	`Log
(è<< 
kFATAL
 << "C®Ëd w™houˆv®id hi¡og¿m…oš‹r!" << 
Endl
;

266 ià(
hi¡
->
	`G‘EÁr›s
() <= 0)

267 
	`Log
(è<< 
kFATAL
 << "Numb” oà’Œ› <ğ0 (" << 
hi¡
->
	`G‘EÁr›s
(è<< " iÀhi¡og¿m: " << hi¡->
	`G‘T™Ë
(è<< 
Endl
;

269 ià(
fIÁ”pŞM‘hod
 =ğ
PDF
::
kKDE
) {

270 
	`Log
()<< 
kDEBUG
 << "Create "

271 << ((
fKDE™”
 =ğ
KDEK”Ãl
::
kNÚad­tiveKDE
) ? "nonadaptive " :

272 (
fKDE™”
 =ğ
KDEK”Ãl
::
kAd­tiveKDE
) ? "adaptive " : "??? ")

273 << ((
fKDEty³
 =ğ
KDEK”Ãl
::
kGauss
) ? "Gauss " : "??? ")

274 << "ty³ KDE k”ÃÈfÜ hi¡og¿m: \"" << 
hi¡
->
	`G‘Name
() << "\""

275 << 
Endl
;

279 ià(
fMšNsmoÙh
<0)

280 
	`Log
(è<< 
kFATAL
 << "PDF cÚ¡ruùiÚ c®Ëd w™h mšnsmoÙh<0" << 
Endl
;

281 ià(
fMaxNsmoÙh
<=0)

282 
fMaxNsmoÙh
 = 
fMšNsmoÙh
;

283 ià(
fMaxNsmoÙh
<
fMšNsmoÙh
)

284 
	`Log
(è<< 
kFATAL
 << "PDF cÚ¡ruùiÚ c®Ëd w™h maxnsmoÙh<mšnsmoÙh" << 
Endl
;

287 
fHi¡Origš®
 = (
TH1F
*)
hi¡
->
	`ClÚe
Ğ
	`TSŒšg
(hi¡->
	`G‘Name
()) + "_original" );

288 
fHi¡
 = (
TH1F
*)
hi¡
->
	`ClÚe
Ğ
	`TSŒšg
(hi¡->
	`G‘Name
()) + "_smoothed" );

289 
fHi¡Origš®
->
	`S‘T™Ë
ĞfHi¡Origš®->
	`G‘Name
() );

290 
fHi¡
 ->
	`S‘T™Ë
ĞfHi¡->
	`G‘Name
() );

293 
fHi¡Origš®
->
	`S‘DœeùÜy
(0);

294 
fHi¡
 ->
	`S‘DœeùÜy
(0);

295 
fU£Hi¡og¿m
 = 
kFALSE
;

297 ià(
fIÁ”pŞM‘hod
 =ğ
PDF
::
kKDE
è
	`BudKDEPDF
();

298 
	`BudS¶šePDF
();

299 
	}
}

303 
IÁ_t
 
	gTMVA
::
PDF
::
	$G‘Hi¡NBšs
 ( 
IÁ_t
 
evtNum
 )

305 
IÁ_t
 
ResŞutiÚFaùÜ
 = (
fIÁ”pŞM‘hod
 =ğ
PDF
::
kKDE
) ? 5 : 1;

306 ià(
evtNum
 =ğ0 && 
fHi¡DefšedNBšs
 == 0)

307 
	`Log
(è<< 
kFATAL
 << "NØnumb” oàbš £ˆfÜ PDF" << 
Endl
;

308 ià(
fHi¡DefšedNBšs
 > 0)

309  
fHi¡DefšedNBšs
 * 
ResŞutiÚFaùÜ
;

310 iàĞ
evtNum
 > 0 && 
fHi¡AvgEvtP”Bš
 > 0 )

311  
evtNum
 / 
fHi¡AvgEvtP”Bš
 * 
ResŞutiÚFaùÜ
;

313 
	`Log
(è<< 
kFATAL
 << "NØnumb” oàbš Ü‡v”agev’ˆ³¸bš s‘ fÜ PDF" << 
fHi¡AvgEvtP”Bš
 << 
Endl
;

315 
	}
}

320 
	gTMVA
::
PDF
::
	$BudS¶šePDF
()

323 ià(
fIÁ”pŞM‘hod
 !ğ
PDF
::
kS¶še0
 && 
fCheckHi¡
è
	`CheckHi¡
();

325 
fNSmoÙhHi¡
 = 0;

326 ià(
fMaxNsmoÙh
 > 0 && 
fMšNsmoÙh
 >=0 ) 
	`SmoÙhHi¡og¿m
();

329 
	`FlHi¡ToG¿ph
();

332 
fIÁ”pŞM‘hod
) {

334 
kS¶še0
:

337 
fU£Hi¡og¿m
 = 
kTRUE
;

340 
kS¶še1
:

341 
fS¶še
 = 
Ãw
 
TMVA
::
	`TS¶še1
Ğ"¥lše1",‚ew 
	`TG¿ph
(*
fG¿ph
) );

344 
kS¶še2
:

345 
fS¶še
 = 
Ãw
 
TMVA
::
	`TS¶še2
Ğ"¥lše2",‚ew 
	`TG¿ph
(*
fG¿ph
) );

348 
kS¶še3
:

349 
fS¶še
 = 
Ãw
 
	`TS¶še3
Ğ"¥lše3",‚ew 
	`TG¿ph
(*
fG¿ph
) );

352 
kS¶še5
:

353 
fS¶še
 = 
Ãw
 
	`TS¶še5
Ğ"¥lše5",‚ew 
	`TG¿ph
(*
fG¿ph
) );

357 
	`Log
(è<< 
kWARNING
 << "NØv®id iÁ”pŞ©iÚ m‘hod giv’! U£ S¶še2" << 
Endl
;

358 
fS¶še
 = 
Ãw
 
TMVA
::
	`TS¶še2
Ğ"¥lše2",‚ew 
	`TG¿ph
(*
fG¿ph
) );

359 
	`Log
(è<< 
kFATAL
 << " W–l.. .thškšg‡bouˆ™, I b‘‹¸qu™ sØyou‚Ùiû you‡» fÜûdØfixhmi¡ak" << 
Endl
;

360 
¡d
::
	`ex™
(1);

363 
	`FlS¶šeToHi¡
();

365 ià(!
	`U£Hi¡og¿m
()) {

366 
fS¶še
->
	`S‘T™Ë
Ğ(
TSŒšg
)
fHi¡
->
	`G‘T™Ë
() + fSpline->GetTitle() );

367 
fS¶še
->
	`S‘Name
 ( (
TSŒšg
)
fHi¡
->
	`G‘Name
() + fSpline->GetName() );

372 
DoubË_t
 
š‹g¿l
 = 
	`G‘IÁeg¿l
();

373 ià(
š‹g¿l
 < 0è
	`Log
(è<< 
kFATAL
 << "IÁeg¿l: " << iÁeg¿È<< " <ğ0" << 
Endl
;

376 ià(
fNÜm®ize
)

377 ià(
š‹g¿l
>0è
fPDFHi¡
->
	`SÿË
( 1.0/integral );

379 
fPDFHi¡
->
	`S‘DœeùÜy
(0);

380 
	}
}

386 
	gTMVA
::
PDF
::
	$BudKDEPDF
()

388 
fPDFHi¡
 = 
Ãw
 
	`TH1F
Ğ"", "", 
fgNbš_PdfHi¡
, 
	`G‘Xmš
(), 
	`G‘Xmax
() );

389 
fPDFHi¡
->
	`S‘T™Ë
Ğ(
TSŒšg
)
fHi¡
->
	`G‘T™Ë
() + "_hist from_KDE" );

390 
fPDFHi¡
->
	`S‘Name
 ( (
TSŒšg
)
fHi¡
->
	`G‘Name
() + "_hist_from_KDE" );

393 
Flßt_t
 
hi¡oLowEdge
 = 
fHi¡
->
	`G‘BšLowEdge
(1);

394 
Flßt_t
 
hi¡oUµ”Edge
 = 
fPDFHi¡
->
	`G‘BšLowEdge
(fPDFHi¡->
	`G‘NbšsX
()è+ fPDFHi¡->
	`G‘BšWidth
(fPDFHist->GetNbinsX());

395 
KDEK”Ãl
 *
k”n
 = 
Ãw
 
TMVA
::
	`KDEK”Ãl
Ğ
fKDE™”
,

396 
fHi¡
, 
hi¡oLowEdge
, 
hi¡oUµ”Edge
,

397 
fKDEbÜd”
, 
fFšeFaùÜ
 );

398 
k”n
->
	`S‘K”ÃlTy³
(
fKDEty³
);

400 
IÁ_t
 
i
=1;i<
fHi¡
->
	`G‘NbšsX
();i++) {

402 
IÁ_t
 
j
=1;j<
fPDFHi¡
->
	`G‘NbšsX
();j++) {

404 
fPDFHi¡
->
	`AddBšCÚ‹Á
(
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

405 
k”n
->
	`G‘BšK”ÃlIÁeg¿l
(
fPDFHi¡
->
	`G‘BšLowEdge
(
j
),

406 
fPDFHi¡
->
	`G‘BšLowEdge
(
j
+1),

407 
fHi¡
->
	`G‘BšC’‹r
(
i
),

408 
i
)

411 ià(
fKDEbÜd”
 == 3) {

415 ià(
i
 < 
fHi¡
->
	`G‘NbšsX
()/5 ) {

416 
IÁ_t
 
j
=1;j<
fPDFHi¡
->
	`G‘NbšsX
();j++) {

418 
fPDFHi¡
->
	`AddBšCÚ‹Á
(
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

419 
k”n
->
	`G‘BšK”ÃlIÁeg¿l
(
fPDFHi¡
->
	`G‘BšLowEdge
(
j
),

420 
fPDFHi¡
->
	`G‘BšLowEdge
(
j
+1),

421 2*
hi¡oLowEdge
-
fHi¡
->
	`G‘BšC’‹r
(
i
),

422 
i
)

426 ià(
i
 > 4*
fHi¡
->
	`G‘NbšsX
()/5) {

427 
IÁ_t
 
j
=1;j<
fPDFHi¡
->
	`G‘NbšsX
();j++) {

429 
fPDFHi¡
->
	`AddBšCÚ‹Á
Ğ
j
,
fHi¡
->
	`G‘BšCÚ‹Á
(
i
)*

430 
k”n
->
	`G‘BšK”ÃlIÁeg¿l
(
fPDFHi¡
->
	`G‘BšLowEdge
(
j
),

431 
fPDFHi¡
->
	`G‘BšLowEdge
(
j
+1),

432 2*
hi¡oUµ”Edge
-
fHi¡
->
	`G‘BšC’‹r
(
i
), i) );

438 
fPDFHi¡
->
	`S‘EÁr›s
(
fHi¡
->
	`G‘EÁr›s
());

440 
d–‘e
 
k”n
;

443 
DoubË_t
 
š‹g¿l
 = 
	`G‘IÁeg¿l
();

444 ià(
š‹g¿l
 < 0è
	`Log
(è<< 
kFATAL
 << "IÁeg¿l: " << iÁeg¿È<< " <ğ0" << 
Endl
;

447 ià(
fNÜm®ize
)

448 ià(
š‹g¿l
>0è
fPDFHi¡
->
	`SÿË
( 1.0/integral );

449 
fPDFHi¡
->
	`S‘DœeùÜy
(0);

450 
	}
}

454 
	gTMVA
::
PDF
::
	$SmoÙhHi¡og¿m
()

456 if(
fHi¡
->
	`G‘NbšsX
()==1) ;

457 ià(
fMaxNsmoÙh
 =ğ
fMšNsmoÙh
) {

458 
fHi¡
->
	`SmoÙh
Ğ
fMšNsmoÙh
 );

464 
Flßt_t
 
E¼
=0, 
E¼Avg
=0, 
E¼RMS
=0 ; 
IÁ_t
 
num
=0, 
smoÙh
;

465 
IÁ_t
 
bš
=0; bš<
fHi¡
->
	`G‘NbšsX
(); bin++) {

466 ià(
fHi¡
->
	`G‘BšCÚ‹Á
(
bš
+1è<ğfHi¡->
	`G‘BšE¼Ü
(bin+1)) ;

467 
E¼
 = 
fHi¡
->
	`G‘BšE¼Ü
(
bš
+1è/ fHi¡->
	`G‘BšCÚ‹Á
(bin+1);

468 
E¼Avg
 +ğ
E¼
; 
E¼RMS
 +ğE¼*E¼; 
num
++;

470 
E¼Avg
 /ğ
num
;

471 
E¼RMS
 = 
TM©h
::
	`Sq¹
(E¼RMS/
num
-
E¼Avg
*ErrAvg) ;

474 
Flßt_t
 
MaxE¼
=
E¼Avg
+
E¼RMS
, 
MšE¼
=ErrAvg-ErrRMS;

475 
fNSmoÙhHi¡
 = 
Ãw
 
	`TH1I
("","",
fHi¡
->
	`G‘NbšsX
(),0,fHist->GetNbinsX());

476 
fNSmoÙhHi¡
->
	`S‘T™Ë
Ğ(
TSŒšg
)
fHi¡
->
	`G‘T™Ë
() + "_Nsmooth" );

477 
fNSmoÙhHi¡
->
	`S‘Name
 ( (
TSŒšg
)
fHi¡
->
	`G‘Name
() + "_Nsmooth" );

478 
IÁ_t
 
bš
=0; bš<
fHi¡
->
	`G‘NbšsX
(); bin++) {

479 ià(
fHi¡
->
	`G‘BšCÚ‹Á
(
bš
+1è<ğfHi¡->
	`G‘BšE¼Ü
(bin+1))

480 
smoÙh
=
fMaxNsmoÙh
;

482 
E¼
 = 
fHi¡
->
	`G‘BšE¼Ü
(
bš
+1è/ fHi¡->
	`G‘BšCÚ‹Á
(bin+1);

483 
smoÙh
=(
IÁ_t
)((
E¼
-
MšE¼
è/(
MaxE¼
-MšE¼è* (
fMaxNsmoÙh
-
fMšNsmoÙh
)) + fMinNsmooth;

485 
smoÙh
 = 
TM©h
::
	`Max
(
fMšNsmoÙh
,TM©h::
	`Mš
(
fMaxNsmoÙh
,smooth));

486 
fNSmoÙhHi¡
->
	`S‘BšCÚ‹Á
(
bš
+1,
smoÙh
);

491 
IÁ_t
 
n
=
fMaxNsmoÙh
;‚>=0;‚--) {

493 ià(
n
 <ğ
fMšNsmoÙh
è{ 
fHi¡
->
	`SmoÙh
(); ; }

494 
IÁ_t
 
MšBš
=-1,
MaxBš
 =-1;

495 
IÁ_t
 
bš
=0; bš < 
fHi¡
->
	`G‘NbšsX
(); bin++) {

496 ià(
fNSmoÙhHi¡
->
	`G‘BšCÚ‹Á
(
bš
+1è>ğ
n
) {

497 ià(
MšBš
==-1èMšBš = 
bš
;

498 
MaxBš
=
bš
;

500 ià(
MaxBš
 >= 0) {

501 #ià
ROOT_VERSION_CODE
 > 
	`ROOT_VERSION
(5,19,2)

502 
fHi¡
->
	`SmoÙh
(1,"R");

504 
fHi¡
->
	`SmoÙh
(1,
MšBš
+1,
MaxBš
+1);

506 
MšBš
=
MaxBš
=-1;

509 
MšBš
 = -1;

512 
	}
}

517 
	gTMVA
::
PDF
::
	$FlHi¡ToG¿ph
()

519 
fG¿ph
=
Ãw
 
	`TG¿ph
(
fHi¡
);

520 
	}
}

526 
	gTMVA
::
PDF
::
	$FlS¶šeToHi¡
()

528 ià(
	`U£Hi¡og¿m
()) {

530 
fPDFHi¡
 = (
TH1
*)
fHi¡
->
	`ClÚe
();

531 
fPDFHi¡
->
	`S‘T™Ë
Ğ(
TSŒšg
)
fHi¡
->
	`G‘T™Ë
() + "_hist from_spline0" );

532 
fPDFHi¡
->
	`S‘Name
 ( (
TSŒšg
)
fHi¡
->
	`G‘Name
() + "_hist_from_spline0" );

536 
fPDFHi¡
 = 
Ãw
 
	`TH1F
Ğ"", "", 
fgNbš_PdfHi¡
, 
	`G‘Xmš
(), 
	`G‘Xmax
() );

537 
fPDFHi¡
->
	`S‘T™Ë
Ğ(
TSŒšg
)
fHi¡
->
	`G‘T™Ë
(è+ "_hi¡ from_" + 
fS¶še
->GetTitle() );

538 
fPDFHi¡
->
	`S‘Name
 ( (
TSŒšg
)
fHi¡
->
	`G‘Name
(è+ "_hi¡_äom_" + 
fS¶še
->
	`G‘T™Ë
() );

540 
IÁ_t
 
bš
=1; bš <ğ
fgNbš_PdfHi¡
; bin++) {

541 
DoubË_t
 
x
 = 
fPDFHi¡
->
	`G‘BšC’‹r
Ğ
bš
 );

542 
DoubË_t
 
y
 = 
fS¶še
->
	`Ev®
Ğ
x
 );

546 ià(
y
 <ğ
fgEpsÚ
èy = 
fHi¡
->
	`G‘BšCÚ‹Á
ĞfHi¡->
	`FšdBš
Ğ
x
 ) );

547 
fPDFHi¡
->
	`S‘BšCÚ‹Á
Ğ
bš
, 
TM©h
::
	`Max
(
y
, 
fgEpsÚ
) );

550 
fPDFHi¡
->
	`S‘DœeùÜy
(0);

551 
	}
}

556 
	gTMVA
::
PDF
::
	$CheckHi¡
() const

558 ià(
fHi¡
 =ğ
NULL
) {

559 
	`Log
(è<< 
kFATAL
 << "<CheckHi¡> C®Ëd w™houˆv®id hi¡og¿m…oš‹r!" << 
Endl
;

562 
IÁ_t
 
nbšs
 = 
fHi¡
->
	`G‘NbšsX
();

564 
IÁ_t
 
em±yBšs
=0;

566 
IÁ_t
 
bš
=1; bš<=
nbšs
; bin++)

567 ià(
fHi¡
->
	`G‘BšCÚ‹Á
(
bš
è=ğ0è
em±yBšs
++;

569 ià(((
Flßt_t
)
em±yBšs
/(Flßt_t)
nbšs
) > 0.5) {

570 
	`Log
(è<< 
kWARNING
 << "MÜthª 50% (" << (((
Flßt_t
)
em±yBšs
/(Flßt_t)
nbšs
)*100)

572 << 
fHi¡
->
	`G‘Name
(è<< "'‡»ƒm±y!" << 
Endl
;

573 
	`Log
(è<< 
kWARNING
 << "X_mš=" << 
	`G‘Xmš
()

574 << " m—n=" << 
fHi¡
->
	`G‘M—n
(è<< " X_maxğ" << 
	`G‘Xmax
(è<< 
Endl
;

576 
	}
}

581 
	gTMVA
::
PDF
::
	$V®id©ePDF
Ğ
TH1
* 
Üigš®Hi¡
 ) const

584 ià(!
Üigš®Hi¡
èÜigš®Hi¡ = 
fHi¡Origš®
;

586 
IÁ_t
 
nbšs
 = 
Üigš®Hi¡
->
	`G‘NbšsX
();

589 ià(
Üigš®Hi¡
->
	`G‘Sumw2
()->
	`G‘Size
(è=ğ0èÜigš®Hi¡->
	`Sumw2
();

593 
DoubË_t
 
chi2
 = 0;

594 
IÁ_t
 
ndof
 = 0;

595 
IÁ_t
 
nc1
 = 0;

596 
IÁ_t
 
nc2
 = 0;

597 
IÁ_t
 
nc3
 = 0;

598 
IÁ_t
 
nc6
 = 0;

599 
IÁ_t
 
bš
=1; bš<=
nbšs
; bin++) {

600 
DoubË_t
 
x
 = 
Üigš®Hi¡
->
	`G‘BšC’‹r
Ğ
bš
 );

601 
DoubË_t
 
y
 = 
Üigš®Hi¡
->
	`G‘BšCÚ‹Á
Ğ
bš
 );

602 
DoubË_t
 
ey
 = 
Üigš®Hi¡
->
	`G‘BšE¼Ü
Ğ
bš
 );

604 
IÁ_t
 
bšPdfHi¡
 = 
fPDFHi¡
->
	`FšdBš
Ğ
x
 );

605 ià(
bšPdfHi¡
<0) ;

607 
DoubË_t
 
y»f
 = 
	`G‘V®
Ğ
x
 );

608 
DoubË_t
 
¼ef
 = ( 
Üigš®Hi¡
->
	`G‘SumOfWeights
()/
fPDFHi¡
->GetSumOfWeights() *

609 
Üigš®Hi¡
->
	`G‘BšWidth
Ğ
bš
 )/
fPDFHi¡
->G‘BšWidthĞ
bšPdfHi¡
 ) );

611 ià(
y
 > 0) {

612 
ndof
++;

613 
DoubË_t
 
d
 = 
TM©h
::
	`Abs
Ğ(
y
 - 
y»f
*
¼ef
)/
ey
 );

616 
chi2
 +ğ
d
*d;

617 ià(
d
 > 1è{ 
nc1
++; ià(d > 2è{ 
nc2
++; ià(d > 3è{ 
nc3
++; ià(d > 6è
nc6
++; } } }

621 
	`Log
(è<< 
kDEBUG
 << "V®id©iÚ„esuÉ fÜ PDF \"" << 
Üigš®Hi¡
->
	`G‘T™Ë
(è<< "\"" << ": " << 
Endl
;

622 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
( " chi2/ndof(!=0) = %.1f/%i = %.2f (Prob = %.2f)",

623 
chi2
, 
ndof
, chi2/ndof, 
TM©h
::
	`Prob
Ğchi2,‚doàèè<< 
Endl
;

624 ià((1.0 - 
TM©h
::
	`Prob
Ğ
chi2
, 
ndof
 )) > 0.9999994) {

625 
	`Log
(è<< 
kDEBUG
 << "Com·risÚ oàthÜigš® hi¡og¿m \"" << 
Üigš®Hi¡
->
	`G‘T™Ë
(è<< "\"" << 
Endl
;

626 
	`Log
(è<< 
kDEBUG
 << "w™hhcÜ»¥Údšg PDF gav¨chi2/ndoàoà" << 
chi2
/
ndof
 << "," << 
Endl
;

627 
	`Log
(è<< 
kDEBUG
 << "which cÜ»¥Úd tØ¨devŸtiÚ oàmÜthª 5 sigma! PËa£ check!" << 
Endl
;

629 
	`Log
(è<< 
kDEBUG
 << 
	`FÜm
( " #bins-found(#expected-bins) deviating > [1,2,3,6] sigmas: " \

631 
nc1
, 
	`IÁ_t
(
TM©h
::
	`Prob
(1.0,1)*
ndof
), 
nc2
, Int_t(TMath::Prob(4.0,1)*ndof),

632 
nc3
, 
	`IÁ_t
(
TM©h
::
	`Prob
(9.0,1)*
ndof
), 
nc6
, IÁ_t(TM©h::Prob(36.0,1)*ndofèè<< 
Endl
;

633 
	}
}

638 
DoubË_t
 
	gTMVA
::
PDF
::
	$G‘IÁeg¿l
() const

640 
DoubË_t
 
š‹g¿l
 = 
fPDFHi¡
->
	`G‘SumOfWeights
();

641 
š‹g¿l
 *ğ
	`G‘PdfHi¡BšWidth
();

643  
š‹g¿l
;

644 
	}
}

649 
DoubË_t
 
	gTMVA
::
PDF
::
	$IG‘V®
Ğ
DoubË_t
* 
x
, Double_t* )

651  
	`ThisPDF
()->
	`G‘V®
Ğ
x
[0] );

652 
	}
}

657 
DoubË_t
 
	gTMVA
::
PDF
::
	$G‘IÁeg¿l
Ğ
DoubË_t
 
xmš
, DoubË_ˆ
xmax
 )

659 
DoubË_t
 
š‹g¿l
 = 0;

661 ià(
fgMªu®IÁeg¿tiÚ
) {

664 
IÁ_t
 
imš
 = 
fPDFHi¡
->
	`FšdBš
(
xmš
);

665 
IÁ_t
 
imax
 = 
fPDFHi¡
->
	`FšdBš
(
xmax
);

666 ià(
imš
 < 1) imin = 1;

667 ià(
imax
 > 
fPDFHi¡
->
	`G‘NbšsX
()) imax = fPDFHist->GetNbinsX();

669 
IÁ_t
 
bši
 = 
imš
; bš˜<ğ
imax
; bini++) {

670 
Flßt_t
 
dx
 = 
fPDFHi¡
->
	`G‘BšWidth
(
bši
);

672 ià(
bši
 =ğ
imš
è
dx
 = 
fPDFHi¡
->
	`G‘BšLowEdge
(bši+1è- 
xmš
;

673 ià(
bši
 =ğ
imax
è
dx
 = 
xmax
 - 
fPDFHi¡
->
	`G‘BšLowEdge
(bini);

674 ià(
dx
 < 0 && dx > -1.0e-8) dx = 0;

675 ià(
dx
<0) {

676 
	`Log
(è<< 
kWARNING


677 << "dx = " << 
dx
 << 
¡d
::
’dl


678 << "bš˜ğ" << 
bši
 << 
¡d
::
’dl


679 << "xmš = " << 
xmš
 << 
¡d
::
’dl


680 << "xmax = " << 
xmax
 << 
¡d
::
’dl


681 << "imš = " << 
imš
 << 
¡d
::
’dl


682 << "imax = " << 
imax
 << 
¡d
::
’dl


683 << "lowƒdgoàimš" << 
fPDFHi¡
->
	`G‘BšLowEdge
(
imš
è<< 
¡d
::
’dl


684 << "lowƒdgoàimš+1" << 
fPDFHi¡
->
	`G‘BšLowEdge
(
imš
+1è<< 
Endl
;

685 
	`Log
(è<< 
kFATAL
 << "<G‘IÁeg¿l> dx = " << 
dx
 << " < 0" << 
Endl
;

687 
š‹g¿l
 +ğ
fPDFHi¡
->
	`G‘BšCÚ‹Á
(
bši
)*
dx
;

694 ià(
fIG‘V®
 =ğ0èfIG‘V® = 
Ãw
 
	`TF1
Ğ"IG‘V®", 
PDF
::
IG‘V®
, 
	`G‘Xmš
(), 
	`G‘Xmax
(), 0 );

695 
š‹g¿l
 = 
fIG‘V®
->
	`IÁeg¿l
Ğ
xmš
, 
xmax
 );

698  
š‹g¿l
;

699 
	}
}

704 
DoubË_t
 
	gTMVA
::
PDF
::
	$G‘V®
Ğ
DoubË_t
 
x
 ) const

707 
IÁ_t
 
bš
 = 
fPDFHi¡
->
	`FšdBš
(
x
);

708 
bš
 = 
TM©h
::
	`Max
(bin,1);

709 
bš
 = 
TM©h
::
	`Mš
(bš,
fPDFHi¡
->
	`G‘NbšsX
());

711 
DoubË_t
 
»tv®
 = 0;

713 ià(
	`U£Hi¡og¿m
()) {

715 
»tv®
 = 
fPDFHi¡
->
	`G‘BšCÚ‹Á
Ğ
bš
 );

719 
IÁ_t
 
Ãxtbš
 = 
bš
;

720 ià((
x
 > 
fPDFHi¡
->
	`G‘BšC’‹r
(
bš
è&& bš !ğfPDFHi¡->
	`G‘NbšsX
()) || bin == 1)

721 
Ãxtbš
++;

723 
Ãxtbš
--;

726 
DoubË_t
 
dx
 = 
fPDFHi¡
->
	`G‘BšC’‹r
Ğ
bš
 ) - fPDFHi¡->G‘BšC’‹rĞ
Ãxtbš
 );

727 
DoubË_t
 
dy
 = 
fPDFHi¡
->
	`G‘BšCÚ‹Á
Ğ
bš
 ) - fPDFHi¡->G‘BšCÚ‹ÁĞ
Ãxtbš
 );

728 
»tv®
 = 
fPDFHi¡
->
	`G‘BšCÚ‹Á
Ğ
bš
 ) + (
x
 - fPDFHi¡->
	`G‘BšC’‹r
Ğbš ))*
dy
/
dx
;

731  
TM©h
::
	`Max
Ğ
»tv®
, 
fgEpsÚ
 );

732 
	}
}

737 
DoubË_t
 
	gTMVA
::
PDF
::
	$G‘V®Inv”£
Ğ
DoubË_t
 
y
, 
BoŞ_t
 
isMÚÙÚou¦yInü—sšgFunùiÚ
 ) const

739 
IÁ_t
 
low”Bš
=0, 
high”Bš
=0;

740 
DoubË_t
 
low”BšV®ue
=0, 
high”BšV®ue
=0;

741 
	`FšdBšInv”£
(
fPDFHi¡
,
low”Bš
,
high”Bš
,
low”BšV®ue
,
high”BšV®ue
,
y
,
isMÚÙÚou¦yInü—sšgFunùiÚ
);

743 
DoubË_t
 
xV®ueLow”Bš
 =
fPDFHi¡
->
	`G‘BšC’‹r
 (
low”Bš
);

744 
DoubË_t
 
xV®ueHigh”Bš
=
fPDFHi¡
->
	`G‘BšC’‹r
 (
high”Bš
);

746 
DoubË_t
 
Ëngth
 =(
high”BšV®ue
-
low”BšV®ue
);

747 
DoubË_t
 
äaùiÚ
=
low”BšV®ue
;

748 ià(
Ëngth
>1.0e-10)

749 
äaùiÚ
=(
y
-
low”BšV®ue
)/
Ëngth
;

751 
DoubË_t
 
ËngthX
 =
xV®ueHigh”Bš
-
xV®ueLow”Bš
;

752 
DoubË_t
 
x
 =
xV®ueLow”Bš
+
ËngthX
*
äaùiÚ
;

758  
x
;

759 
	}
}

764 
	gTMVA
::
PDF
::
	$FšdBšInv”£
ĞcÚ¡ 
TH1
* 
hi¡og¿m
, 
IÁ_t
& 
low”Bš
, IÁ_t& 
high”Bš
, 
DoubË_t
& 
low”BšV®ue
, DoubË_t& 
high”BšV®ue
,

765 
DoubË_t
 
y
, 
BoŞ_t
 
isMÚÙÚou¦yInü—sšgFunùiÚ
 ) const

767 ià(
isMÚÙÚou¦yInü—sšgFunùiÚ
) {

768 
high”Bš
=
hi¡og¿m
->
	`G‘NbšsX
();

769 
low”Bš
 =0;

771 
IÁ_t
 
bš
=
high”Bš
/2;

773 
bš
>
low”Bš
 && bš<
high”Bš
) {

774 
DoubË_t
 
bšCÚ‹Á
=
hi¡og¿m
->
	`G‘BšCÚ‹Á
(
bš
);

776 ià(
y
<
bšCÚ‹Á
) {

777 
high”Bš
 =
bš
;

778 
high”BšV®ue
=
bšCÚ‹Á
;

780 ià(
y
>=
bšCÚ‹Á
){

781 
low”Bš
 =
bš
;

782 
low”BšV®ue
 =
bšCÚ‹Á
;

784 
bš
=
low”Bš
+(
high”Bš
-lowerBin)/2;

789 
IÁ_t
 
bš
=0, 
bšEnd
=
hi¡og¿m
->
	`G‘NbšsX
(); bin<binEnd; ++bin) {

790 
DoubË_t
 
bšCÚ‹Á
=
hi¡og¿m
->
	`G‘BšCÚ‹Á
(
bš
);

791 ià(
bšCÚ‹Á
<
y
) {

792 
low”Bš
 =
bš
;

793 
high”Bš
=
bš
;

794 
low”BšV®ue
 =
bšCÚ‹Á
;

795 
high”BšV®ue
=
bšCÚ‹Á
;

798 
high”Bš
=
bš
;

799 
high”BšV®ue
=
bšCÚ‹Á
;

803 
	}
}

823 
	gTMVA
::
PDF
::
	$Deş¬eO±iÚs
()

825 
	`Deş¬eO±iÚRef
Ğ
fNsmoÙh
, 
	`FÜm
("NSmoÙh%s",
fSuffix
.
	`D©a
()),

827 
	`Deş¬eO±iÚRef
Ğ
fMšNsmoÙh
, 
	`FÜm
("MšNSmoÙh%s",
fSuffix
.
	`D©a
()),

830 
	`Deş¬eO±iÚRef
Ğ
fMaxNsmoÙh
, 
	`FÜm
("MaxNSmoÙh%s",
fSuffix
.
	`D©a
()),

833 
	`Deş¬eO±iÚRef
Ğ
fHi¡AvgEvtP”Bš
, 
	`FÜm
("NAvEvtP”Bš%s",
fSuffix
.
	`D©a
()),

836 
	`Deş¬eO±iÚRef
Ğ
fHi¡DefšedNBšs
, 
	`FÜm
("Nbšs%s",
fSuffix
.
	`D©a
()),

839 
	`Deş¬eO±iÚRef
Ğ
fCheckHi¡
, 
	`FÜm
("CheckHi¡%s",
fSuffix
.
	`D©a
()),

842 
	`Deş¬eO±iÚRef
Ğ
fIÁ”pŞ©eSŒšg
, 
	`FÜm
("PDFIÁ”pŞ%s",
fSuffix
.
	`D©a
()),

844 
	`AddP»DefV®
(
	`TSŒšg
("Spline0"));

845 
	`AddP»DefV®
(
	`TSŒšg
("Spline1"));

846 
	`AddP»DefV®
(
	`TSŒšg
("Spline2"));

847 
	`AddP»DefV®
(
	`TSŒšg
("Spline3"));

848 
	`AddP»DefV®
(
	`TSŒšg
("Spline5"));

849 
	`AddP»DefV®
(
	`TSŒšg
("KDE"));

851 
	`Deş¬eO±iÚRef
Ğ
fKDEty³SŒšg
, 
	`FÜm
("KDEty³%s",
fSuffix
.
	`D©a
()), "KDE kernelype (1=Gauss)" );

852 
	`AddP»DefV®
(
	`TSŒšg
("Gauss"));

854 
	`Deş¬eO±iÚRef
Ğ
fKDE™”SŒšg
, 
	`FÜm
("KDE™”%s",
fSuffix
.
	`D©a
()), "Number of iterations (1=non-adaptive, 2=adaptive)" );

855 
	`AddP»DefV®
(
	`TSŒšg
("Nonadaptive"));

856 
	`AddP»DefV®
(
	`TSŒšg
("Adaptive"));

858 
	`Deş¬eO±iÚRef
Ğ
fFšeFaùÜ
 , 
	`FÜm
("KDEFšeFaùÜ%s",
fSuffix
.
	`D©a
()),

861 
	`Deş¬eO±iÚRef
Ğ
fBÜd”M‘hodSŒšg
, 
	`FÜm
("KDEbÜd”%s",
fSuffix
.
	`D©a
()),

863 
	`AddP»DefV®
(
	`TSŒšg
("None"));

864 
	`AddP»DefV®
(
	`TSŒšg
("Renorm"));

865 
	`AddP»DefV®
(
	`TSŒšg
("Mirror"));

867 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

868 
	`S‘CÚfigDesütiÚ
( "Configuration options forhe PDF class" );

869 
	}
}

873 
	gTMVA
::
PDF
::
	$ProûssO±iÚs
()

875 ià(
fNsmoÙh
 < 0) fNsmooth = 0;

877 ià(
fMaxNsmoÙh
 < 0 || 
fMšNsmoÙh
 < 0) {

878 
fMšNsmoÙh
 = 
fMaxNsmoÙh
 = 
fNsmoÙh
;

881 ià(
fMaxNsmoÙh
 < 
fMšNsmoÙh
 && fMinNsmooth >= 0) {

882 
	`Log
(è<< 
kFATAL
 << "ERROR: MaxNsmooth = "

883 << 
fMaxNsmoÙh
 << " < MšNsmoÙh = " << 
fMšNsmoÙh
 << 
Endl
;

886 ià(
fMaxNsmoÙh
 < 0 || 
fMšNsmoÙh
 < 0) {

887 
	`Log
(è<< 
kFATAL
 << "ERROR: MaxNsmooth = "

888 << 
fMaxNsmoÙh
 << " o¸MšNsmoÙh = " << 
fMšNsmoÙh
 << " sm®Ë¸thª z”o" << 
Endl
;

892 ià(
fIÁ”pŞ©eSŒšg
 =ğ"S¶še0"è
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kS¶še0
;

893 ià(
fIÁ”pŞ©eSŒšg
 =ğ"S¶še1"è
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kS¶še1
;

894 ià(
fIÁ”pŞ©eSŒšg
 =ğ"S¶še2"è
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kS¶še2
;

895 ià(
fIÁ”pŞ©eSŒšg
 =ğ"S¶še3"è
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kS¶še3
;

896 ià(
fIÁ”pŞ©eSŒšg
 =ğ"S¶še5"è
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kS¶še5
;

897 ià(
fIÁ”pŞ©eSŒšg
 =ğ"KDE" ) 
fIÁ”pŞM‘hod
 = 
TMVA
::
PDF
::
kKDE
;

898 ià(
fIÁ”pŞ©eSŒšg
 != "" ) {

899 
	`Log
(è<< 
kFATAL
 << "unknowÀ£‰šg fÜ o±iÚ 'IÁ”pŞ©eM‘hod': " << 
fKDEty³SŒšg
 << ((
fSuffix
=="")?"":
	`FÜm
(" fÜ…dàw™h suffix %s",fSuffix.
	`D©a
())è<< 
Endl
;

903 ià(
fKDEty³SŒšg
 =ğ"Gauss" ) 
fKDEty³
 = 
KDEK”Ãl
::
kGauss
;

904 ià(
fKDEty³SŒšg
 != "" )

905 
	`Log
(è<< 
kFATAL
 << "unknowÀ£‰šg fÜ o±iÚ 'KDEty³': " << 
fKDEty³SŒšg
 << ((
fSuffix
=="")?"":
	`FÜm
(" fÜ…dàw™h suffix %s",fSuffix.
	`D©a
())è<< 
Endl
;

906 ià(
fKDE™”SŒšg
 =ğ"NÚad­tive"è
fKDE™”
 = 
KDEK”Ãl
::
kNÚad­tiveKDE
;

907 ià(
fKDE™”SŒšg
 =ğ"Ad­tive" ) 
fKDE™”
 = 
KDEK”Ãl
::
kAd­tiveKDE
;

908 ià(
fKDE™”SŒšg
 != "" )

909 
	`Log
(è<< 
kFATAL
 << "unknowÀ£‰šg fÜ o±iÚ 'KDE™”': " << 
fKDEty³SŒšg
 << ((
fSuffix
=="")?"":
	`FÜm
(" fÜ…dàw™h suffix %s",fSuffix.
	`D©a
())è<< 
Endl
;

911 iàĞ
fBÜd”M‘hodSŒšg
 =ğ"NÚe" ) 
fKDEbÜd”
ğ
KDEK”Ãl
::
kNoT»©m’t
;

912 iàĞ
fBÜd”M‘hodSŒšg
 =ğ"R’Üm" ) 
fKDEbÜd”
ğ
KDEK”Ãl
::
kK”ÃlR’Üm
;

913 iàĞ
fBÜd”M‘hodSŒšg
 =ğ"MœrÜ" ) 
fKDEbÜd”
ğ
KDEK”Ãl
::
kSam¶eMœrÜ
;

914 iàĞ
fKDE™”SŒšg
 != "" ) {

915 
	`Log
(è<< 
kFATAL
 << "unknowÀ£‰šg fÜ o±iÚ 'KDEBÜd”': " << 
fKDEty³SŒšg
 << ((
fSuffix
=="")?"":
	`FÜm
(" fÜ…dàw™h suffix %s",fSuffix.
	`D©a
())è<< 
Endl
;

917 
	}
}

922 
	gTMVA
::
PDF
::
	$AddXMLTo
Ğ* 
·»Á
 )

924 * 
pdfxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "PDF");

925 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "Name", 
fPDFName
 );

926 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "MšNSmoÙh", 
fMšNsmoÙh
 );

927 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "MaxNSmoÙh", 
fMaxNsmoÙh
 );

928 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "IÁ”pŞM‘hod", 
fIÁ”pŞM‘hod
 );

929 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "KDE_ty³", 
fKDEty³
 );

930 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "KDE_™”", 
fKDE™”
 );

931 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "KDE_bÜd”", 
fKDEbÜd”
 );

932 
	`gToŞs
().
	`AddA‰r
(
pdfxml
, "KDE_fšeçùÜ", 
fFšeFaùÜ
 );

933 * 
pdfhi¡
 = 
	`gToŞs
().
	`AddChd
(
pdfxml
,"Histogram" );

934 
TH1
* 
hi¡ToWr™e
 = 
	`G‘Origš®Hi¡
();

935 
BoŞ_t
 
hasEquidi¡ªtBšnšg
 = 
	`gToŞs
().
	`Hi¡oHasEquidi¡ªtBšs
(*
hi¡ToWr™e
);

936 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡
, "Name", 
hi¡ToWr™e
->
	`G‘Name
() );

937 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡
, "NBšs", 
hi¡ToWr™e
->
	`G‘NbšsX
() );

938 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡
, "XMš", 
hi¡ToWr™e
->
	`G‘Xaxis
()->
	`G‘Xmš
() );

939 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡
, "XMax", 
hi¡ToWr™e
->
	`G‘Xaxis
()->
	`G‘Xmax
() );

940 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡
, "HasEquidi¡ªtBšs", 
hasEquidi¡ªtBšnšg
 );

942 
TSŒšg
 
	`bšcÚ‹Á
("");

943 
IÁ_t
 
i
=0; i<
hi¡ToWr™e
->
	`G‘NbšsX
(); i++) {

944 
bšcÚ‹Á
 +ğ
	`gToŞs
().
	`SŒšgFromDoubË
(
hi¡ToWr™e
->
	`G‘BšCÚ‹Á
(
i
+1));

945 
bšcÚ‹Á
 += " ";

947 
	`gToŞs
().
	`AddRawLše
(
pdfhi¡
, 
bšcÚ‹Á
 );

949 ià(!
hasEquidi¡ªtBšnšg
) {

950 * 
pdfhi¡bšs
 = 
	`gToŞs
().
	`AddChd
(
pdfxml
,"HistogramBinning" );

951 
	`gToŞs
().
	`AddA‰r
(
pdfhi¡bšs
, "NBšs", 
hi¡ToWr™e
->
	`G‘NbšsX
() );

952 
TSŒšg
 
	`bšns
("");

953 
IÁ_t
 
i
=1; i<=
hi¡ToWr™e
->
	`G‘NbšsX
()+1; i++) {

954 
bšns
 +ğ
	`gToŞs
().
	`SŒšgFromDoubË
(
hi¡ToWr™e
->
	`G‘Xaxis
()->
	`G‘BšLowEdge
(
i
));

955 
bšns
 += " ";

957 
	`gToŞs
().
	`AddRawLše
(
pdfhi¡bšs
, 
bšns
 );

959 
	}
}

964 
	gTMVA
::
PDF
::
	$R—dXML
Ğ* 
pdâode
 )

966 
UIÁ_t
 
’umšt
;

968 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "MšNSmoÙh", 
fMšNsmoÙh
 );

969 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "MaxNSmoÙh", 
fMaxNsmoÙh
 );

970 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "IÁ”pŞM‘hod", 
’umšt
 ); 
fIÁ”pŞM‘hod
 = 
	`EIÁ”pŞ©eM‘hod
(enumint);

971 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "KDE_ty³", 
’umšt
 ); 
fKDEty³
 = 
KDEK”Ãl
::
	`EK”ÃlTy³
(enumint);

972 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "KDE_™”", 
’umšt
 ); 
fKDE™”
 = 
KDEK”Ãl
::
	`EK”ÃlI‹r
(enumint);

973 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "KDE_bÜd”", 
’umšt
 ); 
fKDEbÜd”
 = 
KDEK”Ãl
::
	`EK”ÃlBÜd”
(enumint);

974 
	`gToŞs
().
	`R—dA‰r
(
pdâode
, "KDE_fšeçùÜ", 
fFšeFaùÜ
 );

976 
TSŒšg
 
hÇme
;

977 
UIÁ_t
 
nbšs
;

978 
DoubË_t
 
xmš
, 
xmax
;

979 
BoŞ_t
 
hasEquidi¡ªtBšnšg
;

981 * 
hi¡ch
 = 
	`gToŞs
().
	`G‘Chd
(
pdâode
);

982 
	`gToŞs
().
	`R—dA‰r
Ğ
hi¡ch
, "Name", 
hÇme
 );

983 
	`gToŞs
().
	`R—dA‰r
Ğ
hi¡ch
, "NBšs", 
nbšs
 );

984 
	`gToŞs
().
	`R—dA‰r
Ğ
hi¡ch
, "XMš", 
xmš
 );

985 
	`gToŞs
().
	`R—dA‰r
Ğ
hi¡ch
, "XMax", 
xmax
 );

986 
	`gToŞs
().
	`R—dA‰r
Ğ
hi¡ch
, "HasEquidi¡ªtBšs", 
hasEquidi¡ªtBšnšg
 );

989 
TH1
* 
Ãwhi¡
 = 0;

990 ià(
hasEquidi¡ªtBšnšg
) {

991 
Ãwhi¡
 = 
Ãw
 
	`TH1F
Ğ
hÇme
, hÇme, 
nbšs
, 
xmš
, 
xmax
 );

992 
Ãwhi¡
->
	`S‘DœeùÜy
(0);

993 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
hi¡ch
);

994 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

995 
DoubË_t
 
v®
;

996 
UIÁ_t
 
i
=0; i<
nbšs
; i++) {

997 
s
 >> 
v®
;

998 
Ãwhi¡
->
	`S‘BšCÚ‹Á
(
i
+1,
v®
);

1002 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
hi¡ch
);

1003 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

1004 
DoubË_t
 
v®
;

1005 * 
bšch
 = 
	`gToŞs
().
	`G‘NextChd
(
hi¡ch
);

1006 
UIÁ_t
 
nbšnšg
;

1007 
	`gToŞs
().
	`R—dA‰r
Ğ
bšch
, "NBšs", 
nbšnšg
 );

1008 
TVeùÜD
 
	`bšns
(
nbšnšg
+1);

1009 ià(
nbšnšg
 !ğ
nbšs
) {

1010 
	`Log
(è<< 
kFATAL
 << "Numb” oàbš š cÚ‹Á‡nd bšnšg‡¼ay difãrs"<<
Endl
;

1012 cÚ¡ * 
bšSŒšg
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
bšch
);

1013 
¡d
::
¡ršg¡»am
 
	`sb
(
bšSŒšg
);

1014 
UIÁ_t
 
i
=0; i<=
nbšs
; i++è
sb
 >> 
bšns
[i];

1015 
Ãwhi¡
 = 
Ãw
 
	`TH1F
Ğ
hÇme
, hÇme, 
nbšs
, 
bšns
.
	`G‘M©rixA¼ay
() );

1016 
Ãwhi¡
->
	`S‘DœeùÜy
(0);

1017 
UIÁ_t
 
i
=0; i<
nbšs
; i++) {

1018 
s
 >> 
v®
;

1019 
Ãwhi¡
->
	`S‘BšCÚ‹Á
(
i
+1,
v®
);

1023 
TSŒšg
 
hÇmeSmoÙh
 = 
hÇme
;

1024 
hÇmeSmoÙh
.
	`R•ÏûAÎ
( "_original", "_smoothed" );

1026 ià(
fHi¡Origš®
 !ğ0è
d–‘e
 fHistOriginal;

1027 
fHi¡Origš®
 = 
Ãwhi¡
;

1028 
fHi¡
 = (
TH1F
*)
fHi¡Origš®
->
	`ClÚe
Ğ
hÇmeSmoÙh
 );

1029 
fHi¡
->
	`S‘T™Ë
Ğ
hÇmeSmoÙh
 );

1030 
fHi¡
->
	`S‘DœeùÜy
(0);

1032 ià(
fIÁ”pŞM‘hod
 =ğ
PDF
::
kKDE
è
	`BudKDEPDF
();

1033 
	`BudS¶šePDF
();

1034 
	}
}

1039 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<< ( 
¡d
::o¡»am& 
os
, cÚ¡ 
	gPDF
& 
	gpdf
 )

1041 
IÁ_t
 
	gdp
 = 
os
.
´ecisiÚ
();

1042 
	gos
 << "MšNSmoÙh " << 
	gpdf
.
	gfMšNsmoÙh
 << 
	g¡d
::
’dl
;

1043 
	gos
 << "MaxNSmoÙh " << 
	gpdf
.
	gfMaxNsmoÙh
 << 
	g¡d
::
’dl
;

1044 
	gos
 << "IÁ”pŞM‘hod " << 
	gpdf
.
	gfIÁ”pŞM‘hod
 << 
	g¡d
::
’dl
;

1045 
	gos
 << "KDE_ty³ " << 
	gpdf
.
	gfKDEty³
 << 
	g¡d
::
’dl
;

1046 
	gos
 << "KDE_™” " << 
	gpdf
.
	gfKDE™”
 << 
	g¡d
::
’dl
;

1047 
	gos
 << "KDE_bÜd” " << 
	gpdf
.
	gfKDEbÜd”
 << 
	g¡d
::
’dl
;

1048 
	gos
 << "KDE_fšeçùÜ " << 
	gpdf
.
	gfFšeFaùÜ
 << 
	g¡d
::
’dl
;

1050 
TH1
* 
	ghi¡ToWr™e
 = 
pdf
.
G‘Origš®Hi¡
();

1052 cÚ¡ 
IÁ_t
 
	gnBšs
 = 
hi¡ToWr™e
->
G‘NbšsX
();

1055 
	gos
 << "Histogram "

1056 << 
	ghi¡ToWr™e
->
G‘Name
()

1057 << " " << 
	gnBšs


1058 << " " << 
	g¡d
::
£»cisiÚ
(12è<< 
hi¡ToWr™e
->
G‘Xaxis
()->
G‘Xmš
()

1059 << " " << 
¡d
::
£»cisiÚ
(12è<< 
hi¡ToWr™e
->
G‘Xaxis
()->
G‘Xmax
()

1060 << 
¡d
::
’dl
;

1063 
	gos
 << "Weight " << 
	g¡d
::
’dl
;

1064 
	gos
 << 
	g¡d
::
£»cisiÚ
(8);

1065 
IÁ_t
 
	gi
=0; i<
	gnBšs
; i++) {

1066 
	gos
 << 
	g¡d
::
£tw
(15è<< 
¡d
::
Ëá
 << 
hi¡ToWr™e
->
G‘BšCÚ‹Á
(
i
+1è<< std::
right
 << " ";

1067 ià((
	gi
+1)%5==0è
os
 << 
¡d
::
’dl
;

1070 
	gos
 << 
	g¡d
::
£»cisiÚ
(
dp
);

1071  
	gos
;

1077 
	g¡d
::
i¡»am
& 
TMVA
::
İ”©Ü
>> ( 
¡d
::i¡»am& 
i¡r
, 
	gPDF
& 
	gpdf
 )

1079 
TSŒšg
 
	gdevnuÎS
;

1080 
IÁ_t
 
	gv®I
;

1081 
IÁ_t
 
	gnbšs
=-1;

1082 
Flßt_t
 
	gxmš
=-1., 
	gxmax
=-1.;

1083 
TSŒšg
 
	ghÇme
="_original";

1084 
BoŞ_t
 
	gdÚeR—dšg
 = 
kFALSE
;

1085 !
	gdÚeR—dšg
) {

1086 
	gi¡r
 >> 
	gdevnuÎS
;

1087 ià(
	gdevnuÎS
=="NSmooth")

1088 {
i¡r
 >> 
pdf
.
fMšNsmoÙh
; 
	gpdf
.
	gfMaxNsmoÙh
=pdf.fMinNsmooth;}

1089 ià(
	gdevnuÎS
=="MšNSmoÙh"è
i¡r
 >> 
pdf
.
fMšNsmoÙh
;

1090 ià(
	gdevnuÎS
=="MaxNSmoÙh"è
i¡r
 >> 
pdf
.
fMaxNsmoÙh
;

1092 ià(
	gdevnuÎS
 =ğ"IÁ”pŞM‘hod"è{ 
i¡r
 >> 
v®I
; 
	gpdf
.
	gfIÁ”pŞM‘hod
 = 
PDF
::
EIÁ”pŞ©eM‘hod
(valI);}

1093 ià(
	gdevnuÎS
 =ğ"KDE_ty³"è{ 
i¡r
 >> 
v®I
; 
	gpdf
.
	gfKDEty³
 = 
KDEK”Ãl
::
EK”ÃlTy³
(valI); }

1094 ià(
	gdevnuÎS
 =ğ"KDE_™”"è{ 
i¡r
 >> 
v®I
; 
	gpdf
.
	gfKDE™”
 = 
KDEK”Ãl
::
EK”ÃlI‹r
(valI);}

1095 ià(
	gdevnuÎS
 =ğ"KDE_bÜd”"è{ 
i¡r
 >> 
v®I
; 
	gpdf
.
	gfKDEbÜd”
 = 
KDEK”Ãl
::
EK”ÃlBÜd”
(valI);}

1096 ià(
	gdevnuÎS
 == "KDE_finefactor") {

1097 
i¡r
 >> 
pdf
.
fFšeFaùÜ
;

1098 ià(
	gpdf
.
G‘R—dšgV”siÚ
(è!ğ0 && 
pdf
.G‘R—dšgV”siÚ(è< 
TMVA_VERSION
(3,7,3)) {

1100 
	gi¡r
 >> 
	gnbšs
 >> 
	gxmš
 >> 
	gxmax
;

1101 
	gdÚeR—dšg
 = 
kTRUE
;

1104 ià(
	gdevnuÎS
 =ğ"Hi¡og¿m"è{ 
i¡r
 >> 
hÇme
 >> 
nbšs
 >> 
xmš
 >> 
xmax
; }

1105 ià(
	gdevnuÎS
 =ğ"Weights"è{ 
dÚeR—dšg
 = 
kTRUE
; }

1108 
TSŒšg
 
	ghÇmeSmoÙh
 = 
hÇme
;

1109 
	ghÇmeSmoÙh
.
R•ÏûAÎ
( "_original", "_smoothed" );

1112 ià(
	gnbšs
==-1) {

1113 
¡d
::
cout
 << "PDF,ryšgØü—‹‡ hi¡og¿m w™houˆdefšed bšnšg"<< std::
’dl
;

1114 
	g¡d
::
ex™
(1);

1116 
TH1
* 
	gÃwhi¡
 = 
Ãw
 
TH1F
Ğ
hÇme
,hÇme, 
nbšs
, 
xmš
, 
xmax
 );

1117 
	gÃwhi¡
->
S‘DœeùÜy
(0);

1118 
Flßt_t
 
	gv®
;

1119 
IÁ_t
 
	gi
=0; i<
	gnbšs
; i++) {

1120 
	gi¡r
 >> 
	gv®
;

1121 
	gÃwhi¡
->
S‘BšCÚ‹Á
(
i
+1,
v®
);

1124 ià(
	gpdf
.
	gfHi¡Origš®
 !ğ0è
d–‘e
 
pdf
.
fHi¡Origš®
;

1125 
	gpdf
.
	gfHi¡Origš®
 = 
Ãwhi¡
;

1126 
	gpdf
.
	gfHi¡
 = (
TH1F
*)
pdf
.
fHi¡Origš®
->
ClÚe
Ğ
hÇmeSmoÙh
 );

1127 
	gpdf
.
	gfHi¡
->
S‘T™Ë
Ğ
hÇmeSmoÙh
 );

1128 
	gpdf
.
	gfHi¡
->
S‘DœeùÜy
(0);

1130 ià(
	gpdf
.
	gfMšNsmoÙh
>=0è
pdf
.
BudS¶šePDF
();

1132 
	gpdf
.
	gfIÁ”pŞM‘hod
 = 
PDF
::
kKDE
;

1133 
	gpdf
.
BudKDEPDF
();

1136  
	gi¡r
;

1139 
	gTMVA
::
PDF
* 
TMVA
::PDF::
	$ThisPDF
( )

1142  
	`G‘ThisPdfTh»adLoÿl
();

1143 
	}
}

	@src/QuickMVAProbEstimator.cxx

6 
	~"TMVA/QuickMVAProbE¡im©Ü.h
"

8 
	~"TMVA/MsgLogg”.h
"

9 
	~"TMVA/Ty³s.h
"

11 
	~"TM©h.h
"

13 
	~<io¡»am
>

16 
	gTMVA
::
QuickMVAProbE¡im©Ü
::
	$AddEv’t
(
DoubË_t
 
v®
, DoubË_ˆ
weight
, 
IÁ_t
 
ty³
){

17 
Ev’tInfo
 
ev
;

18 
ev
.
ev’tV®ue
=
v®
;ƒv.
ev’tWeight
=
weight
;ƒv.
ev’tTy³
=
ty³
;

20 
fEvtVeùÜ
.
	`push_back
(
ev
);

21 ià(
fIsSÜ‹d
èfIsSÜ‹d=
çl£
;

23 
	}
}

26 
DoubË_t
 
	gTMVA
::
QuickMVAProbE¡im©Ü
::
	$G‘MVAProbAt
(
DoubË_t
 
v®ue
){

32 ià(!
fIsSÜ‹d
) {

33 
¡d
::
	`sÜt
(
fEvtVeùÜ
.
	`begš
(),fEvtVeùÜ.
	`’d
(),
TMVA
::
QuickMVAProbE¡im©Ü
::
com·»
), 
fIsSÜ‹d
=
Œue
;

36 
DoubË_t
 
³rûÁage
 = 0.1;

37 
UIÁ_t
 
nRªge
 = 
TM©h
::
	`Max
(
fNMš
,(UIÁ_tè(
fEvtVeùÜ
.
	`size
(è* 
³rûÁage
));

38 
nRªge
 = 
TM©h
::
	`Mš
(
fNMax
,nRange);

40 ià(
nRªge
 > 
fEvtVeùÜ
.
	`size
()) {

41 
nRªge
 = 
fEvtVeùÜ
.
	`size
()/3.;

42 
	`Log
(è<< 
kWARNING
 << " !! you havÚly " << 
fEvtVeùÜ
.
	`size
() << " ofƒvents.. . I choose "

43 << 
nRªge
 << " fÜhquick‡nd dœty kNN MVAProbƒ¡im©e" << 
Endl
;

46 
Ev’tInfo
 
tmp
;mp.
ev’tV®ue
=
v®ue
;

47 
¡d
::
veùÜ
<
Ev’tInfo
>::
™”©Ü
 
™
 = std::
	`uµ”_bound
(
fEvtVeùÜ
.
	`begš
(),fEvtVeùÜ.
	`’d
(),
tmp
,
TMVA
::
QuickMVAProbE¡im©Ü
::
com·»
);

49 
UIÁ_t
 
iLeá
=0, 
iRight
=0;

50 
DoubË_t
 
nSigÇl
=0;

51 
DoubË_t
 
nBackgr
=0;

53  (
iLeá
+
iRight
è< 
nRªge
){

54 iàĞ
fEvtVeùÜ
.
	`’d
(è> 
™
+
iRight
+1){

55 
iRight
++;

56 iàĞ((
™
+
iRight
))->
ev’tTy³
 =ğ0è
nSigÇl
+=((™+iRight))->
ev’tWeight
;

57 
nBackgr
+=((
™
+
iRight
))->
ev’tWeight
;

59 iàĞ
fEvtVeùÜ
.
	`begš
(è<ğ
™
-
iLeá
-1){

60 
iLeá
++;

61 iàĞ((
™
-
iLeá
))->
ev’tTy³
 =ğ0è
nSigÇl
+=((™-iLeá))->
ev’tWeight
;

62 
nBackgr
+=((
™
-
iLeá
))->
ev’tWeight
;

66 
DoubË_t
 
mvaProb
 = (
nSigÇl
+
nBackgr
) ?‚Signal/(nSignal+nBackgr) : -1 ;

67  
mvaProb
;

69 
	}
}

	@src/ROCCalc.cxx

6 
	~<®gÜ™hm
>

7 
	~<c¡dlib
>

8 
	~<”ºo.h
>

10 
	~"TObjSŒšg.h
"

11 
	~"TM©h.h
"

12 
	~"TSŒšg.h
"

13 
	~"TT»e.h
"

14 
	~"TL—f.h
"

15 
	~"TH1.h
"

16 
	~"TH2.h
"

17 
	~"TLi¡.h
"

18 
	~"TS¶še.h
"

19 
	~"TVeùÜ.h
"

20 
	~"TM©rixD.h
"

21 
	~"TM©rixDSymEig’.h
"

22 
	~"TVeùÜD.h
"

23 
	~"TT»eFÜmuÏ.h
"

24 
	~"TXMLEngše.h
"

25 
	~"TROOT.h
"

26 
	~"TM©rixDSymEig’.h
"

27 
	~"TCŞÜ.h
"

28 
	~"TMVA/CÚfig.h
"

31 
	~"TMVA/ToŞs.h
"

32 
	~"TMVA/ROCC®c.h
"

33 
	~"TMVA/CÚfig.h
"

34 
	~"TMVA/Ev’t.h
"

35 
	~"TMVA/V”siÚ.h
"

36 
	~"TMVA/PDF.h
"

37 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/PDF.h
"

40 
	~"TMVA/TS¶še1.h
"

41 
	~"TMVA/TS¶še2.h
"

42 
	~"TMVA/Ty³s.h
"

44 
usšg
 
Çme¥aû
 
	g¡d
;

48 
	gTMVA
::
ROCC®c
::
	$ROCC®c
(
TH1
* 
mvaS
, TH1* 
mvaB
) :

49 
	`fMaxI‹r
(100),

50 
	`fAbsTŞ
(0.0),

51 
	`fStus
(
kTRUE
),

52 
	`fmvaS
(0),

53 
	`fmvaB
(0),

54 
	`fmvaSpdf
(0),

55 
	`fmvaBpdf
(0),

56 
	`fS¶S
(0),

57 
	`fS¶B
(0),

58 
	`fS¶mvaCumS
(0),

59 
	`fS¶mvaCumB
(0),

60 
	`fS¶effBvsS
(0),

61 
	`âStÙ
(0),

62 
	`âBtÙ
(0),

63 
	`fSignifiÿnû
(0),

64 
	`fPur™y
(0),

65 
	`effBvsS
(0),

66 
	`»jBvsS
(0),

67 
	`šveffBvsS
(0),

68 
	`fLogg”
 ( 
Ãw
 
TMVA
::
	`MsgLogg”
("ROCCalc") )

70 
fU£S¶šes
 = 
kTRUE
;

71 
fNbšs
 = 100;

74 
fmvaS
 = 
mvaS
; fmvaS->
	`S‘T™Ë
("MVA Signal");

75 
fmvaB
 = 
mvaB
; fmvaB->
	`S‘T™Ë
("MVA Backgr");

76 
fXmax
 = 
fmvaS
->
	`G‘Xaxis
()->
	`G‘Xmax
();

77 
fXmš
 = 
fmvaS
->
	`G‘Xaxis
()->
	`G‘Xmš
();

79 ià(
TM©h
::
	`Abs
(
fXmax
-
fmvaB
->
	`G‘Xaxis
()->
	`G‘Xmax
()) > 0.000001 ||

80 
TM©h
::
	`Abs
(
fXmš
-
fmvaB
->
	`G‘Xaxis
()->
	`G‘Xmš
()) > 0.000001 ||

81 
fmvaB
->
	`G‘NbšsX
(è!ğ
fmvaS
->GetNbinsX()) {

82 
	`Log
(è<< 
kERROR
 << "CªnÙ c® ROC curv‘c,‡ š…uˆmvaS‡nd mvaB havdifã»À#nbš Ü„ªg"<<
Endl
;

83 
fStus
=
kFALSE
;

85 ià(!
	`¡rcmp
(
fmvaS
->
	`G‘Xaxis
()->
	`G‘T™Ë
(),"")èfmvaS->
	`S‘XT™Ë
("MVA-value");

86 ià(!
	`¡rcmp
(
fmvaB
->
	`G‘Xaxis
()->
	`G‘T™Ë
(),"")èfmvaB->
	`S‘XT™Ë
("MVA-value");

87 ià(!
	`¡rcmp
(
fmvaS
->
	`G‘Yaxis
()->
	`G‘T™Ë
(),"")èfmvaS->
	`S‘YT™Ë
("#entries");

88 ià(!
	`¡rcmp
(
fmvaB
->
	`G‘Yaxis
()->
	`G‘T™Ë
(),"")èfmvaB->
	`S‘YT™Ë
("#entries");

89 
	`AµlySigÇlAndBackgroundStyË
(
fmvaS
, 
fmvaB
);

94 
fmvaSpdf
 = 
mvaS
->
	`RebšX
(mvaS->
	`G‘NbšsX
()/10,"MVA Signal PDF");

95 
fmvaBpdf
 = 
mvaB
->
	`RebšX
(mvaB->
	`G‘NbšsX
()/10,"MVA Backgr PDF");

96 if(
fmvaSpdf
==0||
fmvaBpdf
==0)

98 
	`Log
(è<< 
kERROR
 << "CªnÙ Rebš Hi¡og¿m mvaS‡nd mvaB, ROC v®ue wÈbÿlcuÏ‹d w™houˆRebš hi¡og¿ms."<<
Endl
;

99 
fStus
=
kFALSE
;

100 
fmvaSpdf
 = (
TH1
*)
mvaS
->
	`ClÚe
("MVA Signal PDF");

101 
fmvaBpdf
 = (
TH1
*)
mvaB
->
	`ClÚe
("MVA Backgr PDF");

103 
fmvaSpdf
->
	`S‘T™Ë
("MVA Signal PDF");

104 
fmvaBpdf
->
	`S‘T™Ë
("MVA Backgr PDF");

105 
fmvaSpdf
->
	`SÿË
(1./fmvaSpdf->
	`G‘SumOfWeights
());

106 
fmvaBpdf
->
	`SÿË
(1./fmvaBpdf->
	`G‘SumOfWeights
());

107 
fmvaSpdf
->
	`S‘Maximum
(
TM©h
::
	`Max
(fmvaSpdf->
	`G‘Maximum
(), 
fmvaBpdf
->GetMaximum()));

108 
fmvaBpdf
->
	`S‘Maximum
(
TM©h
::
	`Max
(
fmvaSpdf
->
	`G‘Maximum
(), fmvaBpdf->GetMaximum()));

109 
	`AµlySigÇlAndBackgroundStyË
(
fmvaSpdf
, 
fmvaBpdf
);

111 
fCutOr›Á©iÚ
 = (
fmvaS
->
	`G‘M—n
(è> 
fmvaB
->GetMean()) ? +1 : -1;

113 
fNevtS
 = 0;

115 
	}
}

119 
	gTMVA
::
ROCC®c
::
	$AµlySigÇlAndBackgroundStyË
Ğ
TH1
* 
sig
, TH1* 
bkg
, TH1* 
ªy
 ) {

120 
IÁ_t
 
c_SigÇlLše
 = 
TCŞÜ
::
	`G‘CŞÜ
( "#0000ee" );

121 
IÁ_t
 
c_SigÇlFl
 = 
TCŞÜ
::
	`G‘CŞÜ
( "#7d99d1" );

122 
IÁ_t
 
c_BackgroundLše
 = 
TCŞÜ
::
	`G‘CŞÜ
( "#ff0000" );

123 
IÁ_t
 
c_BackgroundFl
 = 
TCŞÜ
::
	`G‘CŞÜ
( "#ff0000" );

129 
IÁ_t
 
FlCŞÜ__S
 = 
c_SigÇlFl
;

130 
IÁ_t
 
FlStyË__S
 = 1001;

131 
IÁ_t
 
LšeCŞÜ__S
 = 
c_SigÇlLše
;

132 
IÁ_t
 
LšeWidth__S
 = 2;

136 
IÁ_t
 
FlCŞÜ__B
 = 
c_BackgroundFl
;

137 
IÁ_t
 
FlStyË__B
 = 3554;

138 
IÁ_t
 
LšeCŞÜ__B
 = 
c_BackgroundLše
;

139 
IÁ_t
 
LšeWidth__B
 = 2;

141 ià(
sig
 !ğ
NULL
) {

142 
sig
->
	`S‘LšeCŞÜ
Ğ
LšeCŞÜ__S
 );

143 
sig
->
	`S‘LšeWidth
Ğ
LšeWidth__S
 );

144 
sig
->
	`S‘FlStyË
Ğ
FlStyË__S
 );

145 
sig
->
	`S‘FlCŞÜ
Ğ
FlCŞÜ__S
 );

148 ià(
bkg
 !ğ
NULL
) {

149 
bkg
->
	`S‘LšeCŞÜ
Ğ
LšeCŞÜ__B
 );

150 
bkg
->
	`S‘LšeWidth
Ğ
LšeWidth__B
 );

151 
bkg
->
	`S‘FlStyË
Ğ
FlStyË__B
 );

152 
bkg
->
	`S‘FlCŞÜ
Ğ
FlCŞÜ__B
 );

155 ià(
ªy
 !ğ
NULL
) {

156 
ªy
->
	`S‘LšeCŞÜ
Ğ
LšeCŞÜ__S
 );

157 
ªy
->
	`S‘LšeWidth
Ğ
LšeWidth__S
 );

158 
ªy
->
	`S‘FlStyË
Ğ
FlStyË__S
 );

159 
ªy
->
	`S‘FlCŞÜ
Ğ
FlCŞÜ__S
 );

161 
	}
}

166 
	gTMVA
::
ROCC®c
::~
	$ROCC®c
() {

168 ià(
fS¶S
è{ 
d–‘e
 fSplS; fSplS = 0; }

169 ià(
fS¶B
è{ 
d–‘e
 fSplB; fSplB = 0; }

170 ià(
fS¶effBvsS
è{ 
d–‘e
 fSpleffBvsS; fSpleffBvsS = 0; }

171 ià(
fS¶mvaCumS
è{ 
d–‘e
 fSplmvaCumS; fSplmvaCumS = 0; }

172 ià(
fS¶mvaCumB
è{ 
d–‘e
 fSplmvaCumB; fSplmvaCumB = 0; }

173 ià(
fmvaScumul
è{ 
d–‘e
 fmvaScumul; }

174 ià(
fmvaBcumul
è{ 
d–‘e
 fmvaBcumul; }

175 ià(
effBvsS
è{ 
d–‘e
ƒffBvsS; }

176 ià(
»jBvsS
è{ 
d–‘e
„ejBvsS; }

177 ià(
šveffBvsS
è{ 
d–‘e
 inveffBvsS; }

178 
d–‘e
 
fLogg”
;

179 
	}
}

184 
TH1D
* 
	gTMVA
::
ROCC®c
::
	$G‘ROC
(){

187 
fNevtS
 = 
fmvaS
->
	`G‘SumOfWeights
();

188 ià(
fNevtS
 < 2) {

189 
	`Log
(è<< 
kERROR
 << "I gues thmv¨di¡ributiÚ ãd iÁØROCC®øw”®»ady‚Üm®ized,h”efÜthÿlcuÏ‹dƒ¼Ü oÀtheffic›ncy wÈbšcÜ»ù !! " << 
Endl
;

190 
fNevtS
 = 0;

191 
fStus
=
kFALSE
;

193 
fmvaScumul
 = 
	`gToŞs
().
	`G‘CumuÏtiveDi¡
(
fmvaS
);

194 
fmvaBcumul
 = 
	`gToŞs
().
	`G‘CumuÏtiveDi¡
(
fmvaB
);

195 
fmvaScumul
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(),fmvaScumul->
	`G‘Maximum
()) );

196 
fmvaBcumul
->
	`SÿË
Ğ1.0/
TM©h
::
	`Max
(
¡d
::
num”ic_lim™s
<>::
	`•sÚ
(),fmvaBcumul->
	`G‘Maximum
()) );

197 
fmvaScumul
->
	`S‘Mšimum
(0);

198 
fmvaBcumul
->
	`S‘Mšimum
(0);

203 if(
effBvsS
==0èeffBvsS = 
Ãw
 
	`TH1D
("effBvsS", "ROC-Curve", 
fNbšs
, 0, 1 );

204 
effBvsS
->
	`S‘XT™Ë
( "Signalƒff" );

205 
effBvsS
->
	`S‘YT™Ë
( "Backgrƒff" );

208 if(
»jBvsS
==0è»jBvsS = 
Ãw
 
	`TH1D
Ğ"»jBvsS", "ROC-Curve", 
fNbšs
, 0, 1 );

209 
»jBvsS
->
	`S‘XT™Ë
( "Signalƒff" );

210 
»jBvsS
->
	`S‘YT™Ë
( "Backgr„ejection (1-eff)" );

213 if(
šveffBvsS
 ==0èšveffBvsS = 
Ãw
 
	`TH1D
("švBeffvsSeff", "ROC-Curve" , 
fNbšs
, 0, 1 );

214 
šveffBvsS
->
	`S‘XT™Ë
( "Signalƒff" );

215 
šveffBvsS
->
	`S‘YT™Ë
( "Inverse backgr.ƒff (1/eff)" );

220 ià(
fU£S¶šes
) {

221 
fS¶mvaCumS
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_sigÇl",‚ew 
	`TG¿ph
Ğ
fmvaScumul
 ) );

222 
fS¶mvaCumB
 = 
Ãw
 
	`TS¶še1
Ğ"¥lše2_background",‚ew 
	`TG¿ph
Ğ
fmvaBcumul
 ) );

224 
	`gToŞs
().
	`CheckS¶šes
Ğ
fmvaScumul
, 
fS¶mvaCumS
 );

225 
	`gToŞs
().
	`CheckS¶šes
Ğ
fmvaBcumul
, 
fS¶mvaCumB
 );

228 
DoubË_t
 
effB
 = 0;

229 
UIÁ_t
 
bši
=1; bši<=
fNbšs
; bini++) {

232 
DoubË_t
 
effS
 = 
effBvsS
->
	`G‘BšC’‹r
Ğ
bši
 );

233 
DoubË_t
 
cut
 = 
	`RoÙ
Ğ
effS
 );

236 ià(
fU£S¶šes
è
effB
 = 
fS¶mvaCumB
->
	`Ev®
Ğ
cut
 );

237 
effB
 = 
fmvaBcumul
->
	`G‘BšCÚ‹Á
ĞfmvaBcumul->
	`FšdBš
Ğ
cut
 ) );

240 
effBvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 
effB
 );

241 
»jBvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0-
effB
 );

242 ià(
effB
>
¡d
::
num”ic_lim™s
<>::
	`•sÚ
())

243 
šveffBvsS
->
	`S‘BšCÚ‹Á
Ğ
bši
, 1.0/
effB
 );

247 
fS¶effBvsS
 = 
Ãw
 
	`TS¶še1
Ğ"effBvsS",‚ew 
	`TG¿ph
Ğ
effBvsS
 ) );

252 
DoubË_t
 
effS
 = 0., 
»jB
 = 0., 
effS_
 = 0., 
»jB_
 = 0.;

253 
IÁ_t
 
nbšs
 = 5000;

254 
IÁ_t
 
bši
=1; bši<=
nbšs
; bini++) {

257 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs
);

258 
»jB
 = 1.0 - 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

261 ià((
effS
 - 
»jB
)*(
effS_
 - 
»jB_
) < 0) ;

262 
effS_
 = 
effS
;

263 
»jB_
 = 
»jB
;

266 
fSigÇlCut
 = 
	`RoÙ
Ğ0.5*(
effS
 + 
effS_
) );

268  
»jBvsS
;

269 
	}
}

274 
DoubË_t
 
	gTMVA
::
ROCC®c
::
	$G‘ROCIÁeg¿l
(){

275 
DoubË_t
 
effS
 = 0, 
effB
 = 0;

276 
IÁ_t
 
nbšs
 = 1000;

277 ià(
fS¶effBvsS
 =ğ0è
this
->
	`G‘ROC
();

280 
DoubË_t
 
š‹g¿l
 = 0;

281 
IÁ_t
 
bši
=1; bši<=
nbšs
; bini++) {

284 
effS
 = (
bši
 - 0.5)/
	`Flßt_t
(
nbšs
);

285 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

286 
š‹g¿l
 +ğ(1.0 - 
effB
);

288 
š‹g¿l
 /ğ
nbšs
;

290  
š‹g¿l
;

291 
	}
}

298 
DoubË_t
 
	gTMVA
::
ROCC®c
::
	$G‘EffSFÜEffBof
(
DoubË_t
 
effB»f
, DoubË_ˆ&
effS”r
){

300 
DoubË_t
 
effS
=0., 
effB
, 
effSOld
=1., 
effBOld
=0.;

301 
IÁ_t
 
nbšs
 = 1000;

302 ià(
fS¶effBvsS
 =ğ0è
this
->
	`G‘ROC
();

304 
Flßt_t
 
¡•
=1./
nbšs
;

305 
IÁ_t
 
bši
=1; bši<=
nbšs
; bini++) {

307 
effS
 = (
bši
 - 0.5)*
¡•
;

308 
effB
 = 
fS¶effBvsS
->
	`Ev®
Ğ
effS
 );

311 ià((
effB
 - 
effB»f
)*(
effBOld
 -ƒffBref) <= 0) ;

312 
effSOld
 = 
effS
;

313 
effBOld
 = 
effB
;

317 
effS
 = 0.5*ÓffS + 
effSOld
);

320 ià(
fNevtS
 > 0è
effS”r
 = 
TM©h
::
	`Sq¹
Ğ
effS
*(1.0 -ƒffS)/fNevtS );

321 
effS”r
 = 0;

323  
effS
;

324 
	}
}

329 
DoubË_t
 
	gTMVA
::
ROCC®c
::
	$G‘EffFÜRoÙ
Ğ
DoubË_t
 
theCut
 )

331 
DoubË_t
 
»tV®
=0;

334 ià(
fU£S¶šes
è
»tV®
 = 
fS¶mvaCumS
->
	`Ev®
Ğ
theCut
 );

335 
»tV®
 = 
fmvaScumul
->
	`G‘BšCÚ‹Á
ĞfmvaScumul->
	`FšdBš
Ğ
theCut
 ) );

343 
DoubË_t
 
•s
 = 1.0e-5;

344 ià(
theCut
-
fXmš
 < 
•s
è
»tV®
 = (
fCutOr›Á©iÚ
 > 0) ? 1.0 : 0.0;

345 ià(
fXmax
-
theCut
 < 
•s
è
»tV®
 = (
fCutOr›Á©iÚ
 > 0) ? 0.0 : 1.0;

348  
»tV®
;

349 
	}
}

354 
DoubË_t
 
	gTMVA
::
ROCC®c
::
	$RoÙ
Ğ
DoubË_t
 
»fV®ue
 )

356 
DoubË_t
 
a
 = 
fXmš
, 
b
 = 
fXmax
;

357 
DoubË_t
 
ç
 = 
	`G‘EffFÜRoÙ
Ğ
a
 ) - 
»fV®ue
;

358 
DoubË_t
 
fb
 = 
	`G‘EffFÜRoÙ
Ğ
b
 ) - 
»fV®ue
;

359 ià(
fb
*
ç
 > 0) {

360 
	`Log
(è<< 
kWARNING
 << "<ROCCalc::Root> initial interval w/o„oot: "

361 << "×=" << 
a
 << ", b=" << 
b
 << "),"

362 << " (Eff_a=" << 
	`G‘EffFÜRoÙ
Ğ
a
 )

363 << ", Eff_b=" << 
	`G‘EffFÜRoÙ
Ğ
b
 ) << "), "

364 << "(ç=" << 
ç
 << ", fb=" << 
fb
 << "), "

365 << "»fV®uğ" << 
»fV®ue
 << 
Endl
;

369 
BoŞ_t
 
	`ac_equ®
(
kFALSE
);

370 
DoubË_t
 
fc
 = 
fb
;

371 
DoubË_t
 
c
 = 0, 
d
 = 0, 
e
 = 0;

372 
IÁ_t
 
™”
ğ0; i‹¸<ğ
fMaxI‹r
; iter++) {

373 ià((
fb
 < 0 && 
fc
 < 0) || (fb > 0 && fc > 0)) {

376 
ac_equ®
 = 
kTRUE
;

377 
c
 = 
a
; 
fc
 = 
ç
;

378 
d
 = 
b
 - 
a
; 
e
 = b -‡;

381 ià(
TM©h
::
	`Abs
(
fc
è< TM©h::Abs(
fb
)) {

382 
ac_equ®
 = 
kTRUE
;

383 
a
 = 
b
; b = 
c
; c =‡;

384 
ç
 = 
fb
; fb = 
fc
; fc = fa;

387 
DoubË_t
 
tŞ
 = 0.5 * 2.2204460492503131e-16 * 
TM©h
::
	`Abs
(
b
);

388 
DoubË_t
 
m
 = 0.5 * (
c
 - 
b
);

389 ià(
fb
 =ğ0 || 
TM©h
::
	`Abs
(
m
è<ğ
tŞ
 || TM©h::Abs(fbè< 
fAbsTŞ
è 
b
;

392 ià(
TM©h
::
	`Abs
 (
e
è< 
tŞ
 || TM©h::Ab (
ç
è<ğTM©h::Ab (
fb
)è{ 
d
 = 
m
;ƒ = m; }

395 
DoubË_t
 
p
, 
q
, 
r
;

396 
DoubË_t
 
s
 = 
fb
 / 
ç
;

398 ià(
ac_equ®
è{ 
p
 = 2 * 
m
 * 
s
; 
q
 = 1 - s; }

400 
q
 = 
ç
 / 
fc
; 
r
 = 
fb
 / fc;

401 
p
 = 
s
 * (2 * 
m
 * 
q
 * (q - 
r
è- (
b
 - 
a
) * (r - 1));

402 
q
 = (q - 1è* (
r
 - 1è* (
s
 - 1);

405 ià(
p
 > 0è
q
 = -q;

406 
p
 = -p;

408 
DoubË_t
 
mš1
 = 3 * 
m
 * 
q
 - 
TM©h
::
	`Abs
 (
tŞ
 * q);

409 
DoubË_t
 
mš2
 = 
TM©h
::
	`Abs
 (
e
 * 
q
);

410 ià(2 * 
p
 < (
mš1
 < 
mš2
 ? min1 : min2)) {

412 
e
 = 
d
; d = 
p
 / 
q
;

414 { 
d
 = 
m
; 
e
 = m; }

417 
a
 = 
b
; 
ç
 = 
fb
;

419 ià(
TM©h
::
	`Abs
(
d
è> 
tŞ
è
b
 += d;

420 
b
 +ğ(
m
 > 0 ? +
tŞ
 : -tol);

422 
fb
 = 
	`G‘EffFÜRoÙ
Ğ
b
 ) - 
»fV®ue
;

427 
	`Log
(è<< 
kWARNING
 << "<ROCC®c::RoÙ> maximum i‹¿tiÚ (" << 
fMaxI‹r


428 << "è»ached befÜcÚv”g’û" << 
Endl
;

430  
b
;

431 
	}
}

435 
TH1
* 
	gTMVA
::
ROCC®c
::
	$G‘Pur™y
Ğ
IÁ_t
 
nStÙ
, IÁ_ˆ
nBtÙ
)

437 ià(
âStÙ
!=
nStÙ
 || 
âBtÙ
!=
nBtÙ
 || !
fSignifiÿnû
) {

438 
	`G‘Signifiÿnû
(
nStÙ
, 
nBtÙ
);

439 
âStÙ
=
nStÙ
;

440 
âBtÙ
=
nBtÙ
;

442  
fPur™y
;

443 
	}
}

446 
TH1
* 
	gTMVA
::
ROCC®c
::
	$G‘Signifiÿnû
Ğ
IÁ_t
 
nStÙ
, IÁ_ˆ
nBtÙ
)

448 ià(
âStÙ
==
nStÙ
 && 
âBtÙ
==
nBtÙ
 && !
fSignifiÿnû
)  fSignificance;

449 
âStÙ
=
nStÙ
; 
âBtÙ
=
nBtÙ
;

451 
fSignifiÿnû
 = (
TH1
*è
fmvaScumul
->
	`ClÚe
("Signifiÿnû"); fSignifiÿnû->
	`S‘T™Ë
("Significance");

452 
fSignifiÿnû
->
	`Re£t
(); fSignifiÿnû->
	`S‘FlStyË
(0);

453 
fSignifiÿnû
->
	`S‘XT™Ë
("mva cut value");

454 
fSignifiÿnû
->
	`S‘YT™Ë
("Stat. significance S/Sqrt(S+B)");

455 
fSignifiÿnû
->
	`S‘LšeCŞÜ
(2);

456 
fSignifiÿnû
->
	`S‘LšeWidth
(5);

458 
fPur™y
 = (
TH1
*è
fmvaScumul
->
	`ClÚe
("Pur™y"); fPur™y->
	`S‘T™Ë
("Purity");

459 
fPur™y
->
	`Re£t
(); fPur™y->
	`S‘FlStyË
(0);

460 
fPur™y
->
	`S‘XT™Ë
("mva cut value");

461 
fPur™y
->
	`S‘YT™Ë
("Purity: S/(S+B)");

462 
fPur™y
->
	`S‘LšeCŞÜ
(3);

463 
fPur™y
->
	`S‘LšeWidth
(5);

465 
DoubË_t
 
maxSig
=0;

466 
IÁ_t
 
i
=1; i<=
fSignifiÿnû
->
	`G‘NbšsX
(); i++) {

467 
DoubË_t
 
S
 = 
fmvaScumul
->
	`G‘BšCÚ‹Á
Ğ
i
 ) * 
nStÙ
;

468 
DoubË_t
 
B
 = 
fmvaBcumul
->
	`G‘BšCÚ‹Á
Ğ
i
 ) * 
nBtÙ
;

469 
DoubË_t
 
pur™y
;

470 
DoubË_t
 
sig
;

471 ià(
S
+
B
 > 0){

472 
pur™y
 = 
S
/(S+
B
);

473 
sig
 = 
S
/
TM©h
::
	`Sq¹
(S+
B
);

474 ià(
sig
 > 
maxSig
) {

475 
maxSig
 = 
sig
;

478 
pur™y
=0;

479 
sig
=0;

481 
cout
 << "S="<<
S
<<" B="<<
B
<< "…ur™y="<<
pur™y
<< 
’dl
;

482 
fPur™y
->
	`S‘BšCÚ‹Á
Ğ
i
, 
pur™y
 );

483 
fSignifiÿnû
->
	`S‘BšCÚ‹Á
Ğ
i
, 
sig
 );

500  
fSignifiÿnû
;

502 
	}
}

	@src/ROCCurve.cxx

28 
	~"TMVA/ToŞs.h
"

29 
	~"TMVA/TS¶še1.h
"

30 
	~"TMVA/ROCCurve.h
"

31 
	~"TMVA/CÚfig.h
"

32 
	~"TMVA/V”siÚ.h
"

33 
	~"TMVA/MsgLogg”.h
"

34 
	~"TG¿ph.h
"

35 
	~"TM©h.h
"

37 
	~<veùÜ
>

38 
	~<ÿs£¹
>

40 
usšg
 
Çme¥aû
 
	g¡d
;

45 
	gTMVA
::
ROCCurve
::ROCCurve(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaV®ues
, cÚ¡ std::veùÜ<
BoŞ_t
> &
mvaT¬g‘s
,

46 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaWeights
)

47 : 
fLogg”
(
Ãw
 
TMVA
::
MsgLogg”
("ROCCurve")), 
	$fG¿ph
(
NULL
)

49 
	`as£¹
(
mvaV®ues
.
	`size
(è=ğ
mvaT¬g‘s
.size());

50 
	`as£¹
(
mvaV®ues
.
	`size
(è=ğ
mvaWeights
.size());

52 
UIÁ_t
 
i
 = 0; i < 
mvaV®ues
.
	`size
(); i++) {

53 ià(
mvaT¬g‘s
[
i
]) {

54 
fMvaSigÇl
.
	`push_back
(
mvaV®ues
[
i
]);

55 
fMvaSigÇlWeights
.
	`push_back
(
mvaWeights
[
i
]);

57 
fMvaBackground
.
	`push_back
(
mvaV®ues
[
i
]);

58 
fMvaBackgroundWeights
.
	`push_back
(
mvaWeights
[
i
]);

61 
	}
}

66 
	gTMVA
::
ROCCurve
::ROCCurve(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaV®ues
, cÚ¡ std::veùÜ<
BoŞ_t
> &
mvaT¬g‘s
)

67 : 
fLogg”
(
Ãw
 
TMVA
::
MsgLogg”
("ROCCurve")), 
	$fG¿ph
(
NULL
)

69 
	`as£¹
(
mvaV®ues
.
	`size
(è=ğ
mvaT¬g‘s
.size());

71 
UIÁ_t
 
i
 = 0; i < 
mvaV®ues
.
	`size
(); i++) {

72 ià(
mvaT¬g‘s
[
i
]) {

73 
fMvaSigÇl
.
	`push_back
(
mvaV®ues
[
i
]);

75 
fMvaBackground
.
	`push_back
(
mvaV®ues
[
i
]);

78 
	}
}

83 
	gTMVA
::
ROCCurve
::ROCCurve(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaSigÇl
, cÚ¡ std::veùÜ<Flßt_t> &
mvaBackground
)

84 : 
fLogg”
(
Ãw
 
TMVA
::
MsgLogg”
("ROCCurve")), 
	$fG¿ph
(
NULL
)

86 
fMvaSigÇl
 = 
mvaSigÇl
;

87 
fMvaBackground
 = 
mvaBackground
;

88 
	}
}

93 
	gTMVA
::
ROCCurve
::ROCCurve(cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaSigÇl
, cÚ¡ std::veùÜ<Flßt_t> &
mvaBackground
,

94 cÚ¡ 
¡d
::
veùÜ
<
Flßt_t
> &
mvaSigÇlWeights
, cÚ¡ std::veùÜ<Flßt_t> &
mvaBackgroundWeights
)

95 : 
	$ROCCurve
(
mvaSigÇl
, 
mvaBackground
)

97 
	`as£¹
(
mvaSigÇl
.
	`size
(è=ğ
mvaSigÇlWeights
.size());

98 
	`as£¹
(
mvaBackground
.
	`size
(è=ğ
mvaBackgroundWeights
.size());

100 
fMvaSigÇlWeights
 = 
mvaSigÇlWeights
;

101 
fMvaBackgroundWeights
 = 
mvaBackgroundWeights
;

102 
	}
}

107 
	gTMVA
::
ROCCurve
::~
	$ROCCurve
() {

108 
d–‘e
 
fLogg”
;

109 if(
fG¿ph
è
d–‘e
 fGraph;

110 
	}
}

115 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
ROCCurve
::
	$Compu‹S³cific™y
(cÚ¡ 
UIÁ_t
 
num_pošts
)

117 ià(
num_pošts
 <= 2) {

121 
UIÁ_t
 
num_divisiÚs
 = 
num_pošts
 - 1;

122 
¡d
::
veùÜ
<
DoubË_t
> 
¥ecific™y_veùÜ
;

123 
¥ecific™y_veùÜ
.
	`push_back
(0.0);

125 
DoubË_t
 
th»shŞd
 = -1.0;h»shŞd < 1.0;h»shŞd +ğ(1.0 / 
num_divisiÚs
)) {

126 
DoubË_t
 
çl£_pos™ives
 = 0.0;

127 
DoubË_t
 
Œue_Ãg©ives
 = 0.0;

129 
size_t
 
i
 = 0; i < 
fMvaBackground
.
	`size
(); ++i) {

130 autØ
v®ue
 = 
fMvaBackground
.
	`©
(
i
);

131 autØ
weight
 = 
fMvaBackgroundWeights
.
	`em±y
(è? (1.0è: fMvaBackgroundWeights.
	`©
(
i
);

133 ià(
v®ue
 > 
th»shŞd
) {

134 
çl£_pos™ives
 +ğ
weight
;

136 
Œue_Ãg©ives
 +ğ
weight
;

140 
DoubË_t
 
tÙ®_background
 = 
çl£_pos™ives
 + 
Œue_Ãg©ives
;

141 
DoubË_t
 
¥ecific™y
 =

142 (
tÙ®_background
 <ğ
¡d
::
num”ic_lim™s
<
DoubË_t
>::
	`mš
()è? (0.0è: (
Œue_Ãg©ives
 /otal_background);

144 
¥ecific™y_veùÜ
.
	`push_back
(
¥ecific™y
);

147 
¥ecific™y_veùÜ
.
	`push_back
(1.0);

148  
¥ecific™y_veùÜ
;

149 
	}
}

154 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
ROCCurve
::
	$Compu‹S’s™iv™y
(cÚ¡ 
UIÁ_t
 
num_pošts
)

156 ià(
num_pošts
 <= 2) {

160 
UIÁ_t
 
num_divisiÚs
 = 
num_pošts
 - 1;

161 
¡d
::
veùÜ
<
DoubË_t
> 
£ns™iv™y_veùÜ
;

162 
£ns™iv™y_veùÜ
.
	`push_back
(1.0);

164 
DoubË_t
 
th»shŞd
 = -1.0;h»shŞd < 1.0;h»shŞd +ğ(1.0 / 
num_divisiÚs
)) {

165 
DoubË_t
 
Œue_pos™ives
 = 0.0;

166 
DoubË_t
 
çl£_Ãg©ives
 = 0.0;

168 
size_t
 
i
 = 0; i < 
fMvaSigÇl
.
	`size
(); ++i) {

169 autØ
v®ue
 = 
fMvaSigÇl
.
	`©
(
i
);

170 autØ
weight
 = 
fMvaSigÇlWeights
.
	`em±y
(è? (1.0è: fMvaSigÇlWeights.
	`©
(
i
);

172 ià(
v®ue
 > 
th»shŞd
) {

173 
Œue_pos™ives
 +ğ
weight
;

175 
çl£_Ãg©ives
 +ğ
weight
;

179 
DoubË_t
 
tÙ®_sigÇl
 = 
Œue_pos™ives
 + 
çl£_Ãg©ives
;

180 
DoubË_t
 
£ns™iv™y
 =

181 (
tÙ®_sigÇl
 <ğ
¡d
::
num”ic_lim™s
<
DoubË_t
>::
	`mš
()è? (0.0è: (
Œue_pos™ives
 /otal_signal);

182 
£ns™iv™y_veùÜ
.
	`push_back
(
£ns™iv™y
);

185 
£ns™iv™y_veùÜ
.
	`push_back
(0.0);

186  
£ns™iv™y_veùÜ
;

187 
	}
}

199 
DoubË_t
 
	gTMVA
::
ROCCurve
::
	$G‘EffSFÜEffB
(
DoubË_t
 
effB
, cÚ¡ 
UIÁ_t
 
num_pošts
)

201 
	`as£¹
(0.0 <ğ
effB
 
ªd
ƒffB <= 1.0);

203 autØ
effS_vec
 = 
	`Compu‹S’s™iv™y
(
num_pošts
);

204 autØ
effB_vec
 = 
	`Compu‹S³cific™y
(
num_pošts
);

207 autØ
com¶em’t
 = [](
DoubË_t
 
x
) {  1 - x; };

208 
¡d
::
	`ŒªsfÜm
(
effB_vec
.
	`begš
(),ƒffB_vec.
	`’d
(),ƒffB_vec.begš(), 
com¶em’t
);

211 
¡d
::
	`»v”£
(
effS_vec
.
	`begš
(),ƒffS_vec.
	`’d
());

212 
¡d
::
	`»v”£
(
effB_vec
.
	`begš
(),ƒffB_vec.
	`’d
());

214 
TG¿ph
 *
g¿ph
 = 
Ãw
 
	`TG¿ph
(
effS_vec
.
	`size
(), &
effB_vec
[0], &effS_vec[0]);

217 
TS¶še1
 
rocS¶še
 = 
	`TS¶še1
("", 
g¿ph
);

218  
rocS¶še
.
	`Ev®
(
effB
);

219 
	}
}

230 
DoubË_t
 
	gTMVA
::
ROCCurve
::
	$G‘ROCIÁeg¿l
(cÚ¡ 
UIÁ_t
 
num_pošts
)

232 autØ
£ns™iv™y
 = 
	`Compu‹S’s™iv™y
(
num_pošts
);

233 autØ
¥ecific™y
 = 
	`Compu‹S³cific™y
(
num_pošts
);

235 
DoubË_t
 
š‹g¿l
 = 0.0;

236 
UIÁ_t
 
i
 = 0; i < 
£ns™iv™y
.
	`size
() - 1; i++) {

238 
DoubË_t
 
cu¼FÄ
 = 1 - 
£ns™iv™y
[
i
];

239 
DoubË_t
 
ÃxtFÄ
 = 1 - 
£ns™iv™y
[
i
 + 1];

241 
š‹g¿l
 +ğ0.5 * (
ÃxtFÄ
 - 
cu¼FÄ
è* (
¥ecific™y
[
i
] + specificity[i + 1]);

244  
š‹g¿l
;

245 
	}
}

256 
TG¿ph
 *
	gTMVA
::
ROCCurve
::
	$G‘ROCCurve
(cÚ¡ 
UIÁ_t
 
num_pošts
)

258 ià(
fG¿ph
 !ğ
nuÎ±r
) {

259 
d–‘e
 
fG¿ph
;

262 autØ
£ns™iv™y
 = 
	`Compu‹S’s™iv™y
(
num_pošts
);

263 autØ
¥ecific™y
 = 
	`Compu‹S³cific™y
(
num_pošts
);

265 
fG¿ph
 = 
Ãw
 
	`TG¿ph
(
£ns™iv™y
.
	`size
(), &£ns™iv™y[0], &
¥ecific™y
[0]);

267  
fG¿ph
;

268 
	}
}

	@src/Ranking.cxx

32 
	~"TMVA/Rªkšg.h
"

34 
	~"TMVA/MsgLogg”.h
"

35 
	~"TMVA/Ty³s.h
"

37 
	~"TSŒšg.h
"

39 
	~<iomª
>

41 
CÏssImp
(
TMVA
::
Rªkšg
);

46 
	gTMVA
::
Rªkšg
::
	$Rªkšg
()

47 : 
	`fRªkšg
(),

48 
	`fCÚ‹xt
(""),

49 
	`fRªkšgDisüimš©ÜName
( "" ),

50 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("", 
kINFO
) )

52 
	}
}

57 
	gTMVA
::
Rªkšg
::
	$Rªkšg
ĞcÚ¡ 
TSŒšg
& 
cÚ‹xt
, cÚ¡ TSŒšg& 
¿nkšgDisüimš©ÜName
 )

58 : 
	`fRªkšg
(),

59 
	`fCÚ‹xt
Ğ
cÚ‹xt
 ),

60 
	`fRªkšgDisüimš©ÜName
Ğ
¿nkšgDisüimš©ÜName
 ),

61 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
fCÚ‹xt
.
	`D©a
(), 
kINFO
) )

63 
	}
}

68 
	gTMVA
::
Rªkšg
::~
	$Rªkšg
()

70 
fRªkšg
.
	`ş—r
();

71 
d–‘e
 
fLogg”
;

72 
	}
}

76 
	gTMVA
::
Rªkšg
::
	$S‘CÚ‹xt
ĞcÚ¡ 
TSŒšg
& 
cÚ‹xt
)

78 
fCÚ‹xt
 = 
cÚ‹xt
;

79 
fLogg”
->
	`S‘Sourû
Ğ
fCÚ‹xt
.
	`D©a
() );

80 
	}
}

86 
	gTMVA
::
Rªkšg
::
	$AddRªk
ĞcÚ¡ 
Rªk
& 
¿nk
 )

93 
fRªkšg
.
	`push_back
Ğ
¿nk
 );

95 
UIÁ_t
 
sizeoç¼ay
=
fRªkšg
.
	`size
();

96 
Rªk
 
	`‹mp
(
fRªkšg
[0]);

97 
UIÁ_t
 
i
=0; i<
sizeoç¼ay
; i++) {

98 
UIÁ_t
 
j
=
sizeoç¼ay
-1; j>
i
; j--) {

99 ià(
fRªkšg
[
j
-1] < fRanking[j]) {

100 
‹mp
 = 
fRªkšg
[
j
-1];fRanking[j-1] = fRanking[j]; fRanking[j] =emp;

105 
UIÁ_t
 
i
=0; i<
fRªkšg
.
	`size
(); i++èfRªkšg[i].
	`S‘Rªk
( i+1 );

106 
	}
}

111 
	gTMVA
::
Rªkšg
::
	$Pršt
() const

113 
IÁ_t
 
maxL
 = 0;

114 
¡d
::
veùÜ
<
Rªk
>::
cÚ¡_™”©Ü
 
œ
 = 
fRªkšg
.
	`begš
(); i¸!ğfRªkšg.
	`’d
(); ir++ )

115 ià((*
œ
).
	`G‘V¬ŸbË
().
	`L’gth
(è> 
maxL
) maxL = (*ir).GetVariable().Length();

117 
TSŒšg
 
hlše
 = "";

118 
IÁ_t
 
i
=0; i<
maxL
+15+
fRªkšgDisüimš©ÜName
.
	`L’gth
(); i++è
hlše
 += "-";

119 
	`Log
(è<< 
kHEADER
 << "Rªkšg„esuÉ (tİ v¬ŸbË i be¡„ªked)" << 
Endl
;

120 
	`Log
(è<< 
kINFO
 << 
hlše
 << 
Endl
;

121 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
)

122 << 
¡d
::
	`£tw
(5) << "Rank : "

123 << 
¡d
::
	`£tw
(
maxL
+0) << "Variable "

124 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
)

125 << " : " << 
fRªkšgDisüimš©ÜName
 << 
Endl
;

126 
	`Log
(è<< 
kINFO
 << 
hlše
 << 
Endl
;

127 
¡d
::
veùÜ
<
Rªk
>::
cÚ¡_™”©Ü
 
œ
 = 
fRªkšg
.
	`begš
(); i¸!ğfRªkšg.
	`’d
(); ir++ ) {

128 
	`Log
(è<< 
kINFO


129 << 
	`FÜm
Ğ"%4˜: ",(*
œ
).
	`G‘Rªk
() )

130 << 
¡d
::
	`£tw
(
TM©h
::
	`Max
(
maxL
+0,9)è<< (*
œ
).
	`G‘V¬ŸbË
().
	`D©a
()

131 << 
	`FÜm
Ğ" : %3.3e", (*
œ
).
	`G‘RªkV®ue
(èè<< 
Endl
;

133 
	`Log
(è<< 
kINFO
 << 
hlše
 << 
Endl
;

134 
	}
}

139 
	gTMVA
::
Rªk
::
	$Rªk
ĞcÚ¡ 
TSŒšg
& 
v¬ŸbË
, 
DoubË_t
 
¿nkV®ue
 )

140 : 
	`fV¬ŸbË
Ğ
v¬ŸbË
 ),

141 
	`fRªkV®ue
Ğ
¿nkV®ue
 ),

142 
	`fRªk
( -1 )

144 
	}
}

149 
	gTMVA
::
Rªk
::~
	$Rªk
()

151 
	}
}

156 
BoŞ_t
 
TMVA
::
Rªk
::
İ”©Ü
< ( cÚ¡ Rªk& 
Ùh”
 ) const

158 ià(
fRªkV®ue
 < 
Ùh”
.fRªkV®ueè 
Œue
;

159  
	gçl£
;

165 
BoŞ_t
 
	gTMVA
::
Rªk
::
İ”©Ü
> ( cÚ¡ Rªk& 
Ùh”
 ) const

167 ià(
fRªkV®ue
 > 
Ùh”
.fRªkV®ueè 
Œue
;

168  
	gçl£
;

	@src/Reader.cxx

91 
	~"TMVA/R—d”.h
"

93 
	~"TMVA/CÚfig.h
"

94 
	~"TMVA/CÚfigu¿bË.h
"

95 
	~"TMVA/CÏssif›rFaùÜy.h
"

96 
	~"TMVA/D©aIÅutHªdËr.h
"

97 
	~"TMVA/D©aS‘Info.h
"

98 
	~"TMVA/D©aS‘Mªag”.h
"

99 
	~"TMVA/IM‘hod.h
"

100 
	~"TMVA/M‘hodBa£.h
"

101 
	~"TMVA/M‘hodCuts.h
"

102 
	~"TMVA/M‘hodC©egÜy.h
"

103 
	~"TMVA/MsgLogg”.h
"

104 
	~"TMVA/ToŞs.h
"

105 
	~"TMVA/Ty³s.h
"

107 
	~"TT»e.h
"

108 
	~"TL—f.h
"

109 
	~"TSŒšg.h
"

110 
	~"TCÏss.h
"

111 
	~"TH1D.h
"

112 
	~"TKey.h
"

113 
	~"TVeùÜ.h
"

114 
	~"TXMLEngše.h
"

115 
	~"TM©h.h
"

117 
	~<c¡dlib
>

119 
	~<¡ršg
>

120 
	~<veùÜ
>

121 
	~<f¡»am
>

123 
	~<io¡»am
>

128 
	gTMVA
::
R—d”
::
	$R—d”
ĞcÚ¡ 
TSŒšg
& 
theO±iÚ
, 
BoŞ_t
 
v”bo£
 )

129 : 
	`CÚfigu¿bË
Ğ
theO±iÚ
 ),

130 
	`fD©aS‘Mªag”
Ğ
NULL
 ),

131 
	`fD©aS‘Info
(),

132 
	`fV”bo£
Ğ
v”bo£
 ),

133 
	`fS’t
 ( 
kFALSE
 ),

134 
	`fCŞÜ
 ( 
kFALSE
 ),

135 
	`fC®cuÏ‹E¼Ü
(
kFALSE
),

136 
	`fMvaEv’tE¼Ü
( 0 ),

137 
	`fMvaEv’tE¼ÜUµ”
( 0 ),

138 
	$fLogg”
 ( 0 )

140 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ
fD©aIÅutHªdËr
 );

141 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
fD©aS‘Info
);

142 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

143 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

144 
	`Deş¬eO±iÚs
();

145 
	`P¬£O±iÚs
();

147 
	`In™
();

148 
	}
}

153 
	gTMVA
::
R—d”
::R—d”Ğ
¡d
::
veùÜ
<
TSŒšg
>& 
šputV¬s
, cÚ¡ TSŒšg& 
theO±iÚ
, 
BoŞ_t
 
v”bo£
 )

154 : 
CÚfigu¿bË
Ğ
theO±iÚ
 ),

155 
fD©aS‘Mªag”
Ğ
NULL
 ),

156 
fD©aS‘Info
(),

157 
fV”bo£
Ğ
v”bo£
 ),

158 
fS’t
 ( 
kFALSE
 ),

159 
fCŞÜ
 ( 
kFALSE
 ),

160 
fC®cuÏ‹E¼Ü
(
kFALSE
),

161 
fMvaEv’tE¼Ü
( 0 ),

162 
fMvaEv’tE¼ÜUµ”
( 0 ),

163 
	$fLogg”
 ( 0 )

165 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ
fD©aIÅutHªdËr
 );

166 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
fD©aS‘Info
);

167 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

168 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

169 
	`Deş¬eO±iÚs
();

170 
	`P¬£O±iÚs
();

174 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
iv¬
 = 
šputV¬s
.
	`begš
(); iv¬ !ğšputV¬s.
	`’d
(); ivar++)

175 
	`D©aInfo
().
	`AddV¬ŸbË
Ğ*
iv¬
 );

177 
	`In™
();

178 
	}
}

183 
	gTMVA
::
R—d”
::R—d”Ğ
¡d
::
veùÜ
<¡d::
¡ršg
>& 
šputV¬s
, cÚ¡ 
TSŒšg
& 
theO±iÚ
, 
BoŞ_t
 
v”bo£
 )

184 : 
CÚfigu¿bË
Ğ
theO±iÚ
 ),

185 
fD©aS‘Mªag”
Ğ
NULL
 ),

186 
fD©aS‘Info
(),

187 
fV”bo£
Ğ
v”bo£
 ),

188 
fS’t
 ( 
kFALSE
 ),

189 
fCŞÜ
 ( 
kFALSE
 ),

190 
fC®cuÏ‹E¼Ü
(
kFALSE
),

191 
fMvaEv’tE¼Ü
( 0 ),

192 
fMvaEv’tE¼ÜUµ”
( 0 ),

193 
	$fLogg”
 ( 0 )

195 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ
fD©aIÅutHªdËr
 );

196 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
fD©aS‘Info
);

197 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

198 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

199 
	`Deş¬eO±iÚs
();

200 
	`P¬£O±iÚs
();

204 
¡d
::
veùÜ
<¡d::
¡ršg
>::
™”©Ü
 
iv¬
 = 
šputV¬s
.
	`begš
(); iv¬ !ğšputV¬s.
	`’d
(); ivar++)

205 
	`D©aInfo
().
	`AddV¬ŸbË
Ğ
iv¬
->
	`c_¡r
() );

207 
	`In™
();

208 
	}
}

213 
	gTMVA
::
R—d”
::
	$R—d”
ĞcÚ¡ 
¡d
::
¡ršg
& 
v¬Names
, cÚ¡ 
TSŒšg
& 
theO±iÚ
, 
BoŞ_t
 
v”bo£
 )

214 : 
	`CÚfigu¿bË
Ğ
theO±iÚ
 ),

215 
	`fD©aS‘Mªag”
Ğ
NULL
 ),

216 
	`fD©aS‘Info
(),

217 
	`fV”bo£
Ğ
v”bo£
 ),

218 
	`fS’t
 ( 
kFALSE
 ),

219 
	`fCŞÜ
 ( 
kFALSE
 ),

220 
	`fC®cuÏ‹E¼Ü
(
kFALSE
),

221 
	`fMvaEv’tE¼Ü
( 0 ),

222 
	`fMvaEv’tE¼ÜUµ”
( 0 ),

223 
	$fLogg”
 ( 0 )

225 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ
fD©aIÅutHªdËr
 );

226 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
fD©aS‘Info
);

227 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

228 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

229 
	`Deş¬eO±iÚs
();

230 
	`P¬£O±iÚs
();

234 
	`DecodeV¬Names
(
v¬Names
);

235 
	`In™
();

236 
	}
}

241 
	gTMVA
::
R—d”
::
	$R—d”
ĞcÚ¡ 
TSŒšg
& 
v¬Names
, cÚ¡ TSŒšg& 
theO±iÚ
, 
BoŞ_t
 
v”bo£
 )

242 : 
	`CÚfigu¿bË
Ğ
theO±iÚ
 ),

243 
	`fD©aS‘Mªag”
Ğ
NULL
 ),

244 
	`fD©aS‘Info
(),

245 
	`fV”bo£
Ğ
v”bo£
 ),

246 
	`fS’t
 ( 
kFALSE
 ),

247 
	`fCŞÜ
 ( 
kFALSE
 ),

248 
	`fC®cuÏ‹E¼Ü
(
kFALSE
),

249 
	`fMvaEv’tE¼Ü
( 0 ),

250 
	`fMvaEv’tE¼ÜUµ”
( 0 ),

251 
	$fLogg”
 ( 0 )

253 
fD©aS‘Mªag”
 = 
Ãw
 
	`D©aS‘Mªag”
Ğ
fD©aIÅutHªdËr
 );

254 
fD©aS‘Mªag”
->
	`AddD©aS‘Info
(
fD©aS‘Info
);

255 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
);

256 
	`S‘CÚfigName
Ğ
	`G‘Name
() );

257 
	`Deş¬eO±iÚs
();

258 
	`P¬£O±iÚs
();

262 
	`DecodeV¬Names
(
v¬Names
);

263 
	`In™
();

264 
	}
}

269 
	gTMVA
::
R—d”
::
	$Deş¬eO±iÚs
()

271 ià(
	`gToŞs
().
	`CheckFÜS’tO±iÚ
Ğ
	`G‘O±iÚs
(è)è
	`Log
().
	`Inhib™Ouut
();

273 
	`Deş¬eO±iÚRef
Ğ
fV”bo£
, "V", "Verbose flag" );

274 
	`Deş¬eO±iÚRef
Ğ
fCŞÜ
, "Color", "Color flag (default True)" );

275 
	`Deş¬eO±iÚRef
Ğ
fS’t
, "Silent", "Boolean silent flag (default False)" );

276 
	`Deş¬eO±iÚRef
Ğ
fC®cuÏ‹E¼Ü
, "Error", "Calculatesƒrrors (default False)" );

277 
	}
}

282 
	gTMVA
::
R—d”
::~
	$R—d”
( )

284 
d–‘e
 
fD©aS‘Mªag”
;

286 
d–‘e
 
fLogg”
;

288 autØ
™
=
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++){

289 
M‘hodBa£
 * 
kl
 = 
dyÇmic_ÿ¡
<
TMVA
::M‘hodBa£*>(
™
->
£cÚd
);

290 
d–‘e
 
kl
;

292 
	}
}

297 
	gTMVA
::
R—d”
::
	$In™
( )

299 ià(
	`V”bo£
()è
fLogg”
->
	`S‘MšTy³
Ğ
kVERBOSE
 );

301 
	`gCÚfig
().
	`S‘U£CŞÜ
Ğ
fCŞÜ
 );

302 
	`gCÚfig
().
	`S‘S’t
 ( 
fS’t
 );

303 
	}
}

308 
	gTMVA
::
R—d”
::
	$AddV¬ŸbË
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, 
Flßt_t
* 
d©®šk
 )

310 
	`D©aInfo
().
	`AddV¬ŸbË
Ğ
ex´essiÚ
, "", "", 0, 0, 'F', 
kFALSE
 ,(*)
d©®šk
 );

311 
	}
}

315 
	gTMVA
::
R—d”
::
	$AddV¬ŸbË
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, 
IÁ_t
* 
d©®šk
 )

317 
	`Log
(è<< 
kFATAL
 << "R—d”::AddV¬ŸbËĞcÚ¡ TSŒšg&ƒx´essiÚ, IÁ_t* d©®šk ),hi funùiÚ i d•»ÿ‹d,…Ëa£…rovid®Èv¬ŸbË tØth»ad”‡ æßts" << 
Endl
;

319 
	`Log
(è<< 
kFATAL
 << "R—d”::AddV¬ŸbËĞcÚ¡ TSŒšg&ƒx´essiÚ, IÁ_t* d©®šk ),hi funùiÚ i d•»ÿ‹d,…Ëa£…rovid®Èv¬ŸbË tØth»ad”‡ æßts" << 
Endl
;

320 
	`D©aInfo
().
	`AddV¬ŸbË
(
ex´essiÚ
, "", "", 0, 0, 'I', 
kFALSE
, (*)
d©®šk
 );

321 
	}
}

326 
	gTMVA
::
R—d”
::
	$AddS³ù©Ü
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, 
Flßt_t
* 
d©®šk
 )

328 
	`D©aInfo
().
	`AddS³ù©Ü
Ğ
ex´essiÚ
, "", "", 0, 0, 'F', 
kFALSE
 ,(*)
d©®šk
 );

329 
	}
}

334 
	gTMVA
::
R—d”
::
	$AddS³ù©Ü
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, 
IÁ_t
* 
d©®šk
 )

336 
	`D©aInfo
().
	`AddS³ù©Ü
(
ex´essiÚ
, "", "", 0, 0, 'I', 
kFALSE
, (*)
d©®šk
 );

337 
	}
}

342 
TSŒšg
 
	gTMVA
::
R—d”
::
	$G‘M‘hodTy³FromFe
ĞcÚ¡ 
TSŒšg
& 
f’ame
 )

344 
¡d
::
if¡»am
 
	`fš
Ğ
f’ame
 );

345 ià(!
fš
.
	`good
()) {

346 
	`Log
(è<< 
kFATAL
 << "<BookMVA> fatalƒrror: "

347 << "uÇbËØİ’ iÅuˆweighˆfe: " << 
f’ame
 << 
Endl
;

350 
TSŒšg
 
	`fuÎM‘hodName
("");

351 ià(
f’ame
.
	`EndsW™h
(".xml")) {

352 
fš
.
	`şo£
();

353 #ià
ROOT_VERSION_CODE
 >ğ
	`ROOT_VERSION
(5,29,0)

354 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`P¬£Fe
(
f’ame
,gToŞs().
	`xmËngšebufãrsize
());

356 * 
doc
 = 
	`gToŞs
().
	`xmËngše
().
	`P¬£Fe
(
f’ame
);

358 * 
roÙnode
 = 
	`gToŞs
().
	`xmËngše
().
	`DocG‘RoÙEËm’t
(
doc
);

359 
	`gToŞs
().
	`R—dA‰r
(
roÙnode
, "M‘hod", 
fuÎM‘hodName
);

360 
	`gToŞs
().
	`xmËngše
().
	`F»eDoc
(
doc
);

363 
buf
[512];

364 
fš
.
	`g‘lše
(
buf
,512);

365 !
	`TSŒšg
(
buf
).
	`BegšsW™h
("M‘hod")è
fš
.
	`g‘lše
(buf,512);

366 
fuÎM‘hodName
 = 
	`TSŒšg
(
buf
);

367 
fš
.
	`şo£
();

369 
TSŒšg
 
m‘hodTy³
 = 
	`fuÎM‘hodName
(0,
fuÎM‘hodName
.
	`Index
("::"));

370 ià(
m‘hodTy³
.
	`CÚšs
(" ")èm‘hodTy³ = 
	`m‘hodTy³
(m‘hodTy³.
	`La¡
(' ')+1,m‘hodTy³.
	`L’gth
());

371  
m‘hodTy³
;

372 
	}
}

377 
	gTMVA
::
IM‘hod
* 
TMVA
::
R—d”
::
	$BookMVA
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, cÚ¡ TSŒšg& 
weightfe
 )

380 ià(
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 ) !ğfM‘hodM­.
	`’d
())

381 
	`Log
(è<< 
kFATAL
 << "<BookMVA> m‘hodag \"" << 
m‘hodTag
 << "\"‡Ì—dyƒxi¡s!" << 
Endl
;

383 
TSŒšg
 
	`m‘hodTy³
(
	`G‘M‘hodTy³FromFe
(
weightfe
));

385 
	`Log
(è<< 
kINFO
 << "Bookšg \"" << 
m‘hodTag
 << "\" oàty³ \"" << 
m‘hodTy³
 << "\" from " << 
weightfe
 << "." << 
Endl
;

387 
M‘hodBa£
* 
m‘hod
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
this
->
	`BookMVA
Ğ
Ty³s
::
	`In¡ªû
().
	`G‘M‘hodTy³
(
m‘hodTy³
),

388 
weightfe
 ) );

389 ifĞ
m‘hod
 && m‘hod->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
 ){

390 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
m‘hod
));

391 ifĞ!
m‘hC©
 )

392 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /R—d”" << 
Endl
;

393 
m‘hC©
->
fD©aS‘Mªag”
 = fDataSetManager;

396  
fM‘hodM­
[
m‘hodTag
] = 
m‘hod
;

397 
	}
}

402 
	gTMVA
::
IM‘hod
* 
TMVA
::
R—d”
::
	$BookMVA
Ğ
TMVA
::
Ty³s
::
EMVA
 
m‘hodTy³
, cÚ¡ 
TSŒšg
& 
weightfe
 )

404 
IM‘hod
* 
im
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
(
¡d
::
	`¡ršg
(
Ty³s
::In¡ªû().
	`G‘M‘hodName
Ğ
m‘hodTy³
 )),

405 
	`D©aInfo
(), 
weightfe
 );

407 
M‘hodBa£
 *
m‘hod
 = (
dyÇmic_ÿ¡
<M‘hodBa£*>(
im
));

409 ià(
m‘hod
==0è 
im
;

411 ifĞ
m‘hod
->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
 ){

412 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
m‘hod
));

413 ifĞ!
m‘hC©
 )

414 
	`Log
(è<< 
kERROR
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /R—d”" << 
Endl
;

415 
m‘hC©
->
fD©aS‘Mªag”
 = fDataSetManager;

418 
m‘hod
->
	`S‘upM‘hod
();

422 
m‘hod
->
	`Deş¬eCom·tib™yO±iÚs
();

425 
m‘hod
->
	`R—dS‹FromFe
();

428 
m‘hod
->
	`CheckS‘up
();

430 
	`Log
(è<< 
kINFO
 << "Booked cÏssif›¸\"" << 
m‘hod
->
	`G‘M‘hodName
()

431 << "\" oàty³: \"" << 
m‘hod
->
	`G‘M‘hodTy³Name
(è<< "\"" << 
Endl
;

433  
m‘hod
;

434 
	}
}

438 
	gTMVA
::
IM‘hod
* 
TMVA
::
R—d”
::
	$BookMVA
Ğ
TMVA
::
Ty³s
::
EMVA
 
m‘hodTy³
, cÚ¡ * 
xml¡r
 )

440 #ià
ROOT_VERSION_CODE
 >ğ
	`ROOT_VERSION
(5,26,00)

443 
IM‘hod
* 
im
 = 
CÏssif›rFaùÜy
::
	`In¡ªû
().
	`C»©e
(
¡d
::
	`¡ršg
(
Ty³s
::In¡ªû().
	`G‘M‘hodName
Ğ
m‘hodTy³
 )),

444 
	`D©aInfo
(), "" );

446 
M‘hodBa£
 *
m‘hod
 = (
dyÇmic_ÿ¡
<M‘hodBa£*>(
im
));

448 if(!
m‘hod
)  0;

450 ifĞ
m‘hod
->
	`G‘M‘hodTy³
(è=ğ
Ty³s
::
kC©egÜy
 ){

451 
M‘hodC©egÜy
 *
m‘hC©
 = (
dyÇmic_ÿ¡
<M‘hodC©egÜy*>(
m‘hod
));

452 ifĞ!
m‘hC©
 )

453 
	`Log
(è<< 
kFATAL
 << "M‘hod w™hy³ kC©egÜy cªnÙ bÿ¡edØM‘hodC©egÜy. /R—d”" << 
Endl
;

454 
m‘hC©
->
fD©aS‘Mªag”
 = fDataSetManager;

457 
m‘hod
->
	`S‘upM‘hod
();

461 
m‘hod
->
	`Deş¬eCom·tib™yO±iÚs
();

464 
m‘hod
->
	`R—dS‹FromXMLSŒšg
Ğ
xml¡r
 );

467 
m‘hod
->
	`CheckS‘up
();

469 
	`Log
(è<< 
kINFO
 << "Booked cÏssif›¸\"" << 
m‘hod
->
	`G‘M‘hodName
()

470 << "\" oàty³: \"" << 
m‘hod
->
	`G‘M‘hodTy³Name
(è<< "\"" << 
Endl
;

472  
m‘hod
;

474 
	`Log
(è<< 
kFATAL
 << "M‘hod R—d”::BookMVA(TMVA::Ty³s::EMVA m‘hodTy³ = " << 
m‘hodTy³


475 << ", cÚ¡ ch¬* xml¡¸ğ" << 
xml¡r


476 << " ) i nÙ‡vaabË fÜ ROOT v”siÚ ´iÜØ5.26/00." << 
Endl
;

479 
	}
}

485 
DoubË_t
 
	gTMVA
::
R—d”
::
Ev®u©eMVA
ĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>& 
šputVec
, cÚ¡ 
TSŒšg
& 
m‘hodTag
, DoubË_ˆ
aux
 )

488 
IM‘hod
* 
	gim‘h
 = 
FšdMVA
Ğ
m‘hodTag
 );

489 
M‘hodBa£
* 
	gm‘h
 = 
dyÇmic_ÿ¡
<
TMVA
::M‘hodBa£*>(
im‘h
);

490 if(
	gm‘h
==0)  0;

493 
Ev’t
* 
	gtmpEv’t
=
Ãw
 Ev’t(
šputVec
, 
D©aInfo
().
G‘NV¬ŸbËs
());

494 
UIÁ_t
 
	gi
=0; i<
	gšputVec
.
size
(); i++){

495 ià(
	gTM©h
::
IsNaN
(
šputVec
[
i
])) {

496 
Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN -->„‘uº MVA v®u-999, \Àth©' ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

497 
d–‘e
 
	gtmpEv’t
;

502 ià(
	gm‘h
->
G‘M‘hodTy³
(è=ğ
TMVA
::
Ty³s
::
kCuts
) {

503 
TMVA
::
M‘hodCuts
* 
mc
 = 
dyÇmic_ÿ¡
<TMVA::M‘hodCuts*>(
m‘h
);

504 if(
	gmc
)

505 
	gmc
->
S‘Te¡SigÇlEffic›ncy
Ğ
aux
 );

507 
DoubË_t
 
	gv®
 = 
m‘h
->
G‘MvaV®ue
Ğ
tmpEv’t
, (
fC®cuÏ‹E¼Ü
?&
fMvaEv’tE¼Ü
:0));

508 
d–‘e
 
	gtmpEv’t
;

509  
	gv®
;

516 
DoubË_t
 
	gTMVA
::
R—d”
::
Ev®u©eMVA
ĞcÚ¡ 
¡d
::
veùÜ
<DoubË_t>& 
šputVec
, cÚ¡ 
TSŒšg
& 
m‘hodTag
, DoubË_ˆ
aux
 )

519 if(
	gfTmpEv®Vec
.
size
(è!ğ
šputVec
.size())

520 
fTmpEv®Vec
.
»size
(
šputVec
.
size
());

522 
UIÁ_t
 
	gidx
=0; idx!=
šputVec
.
size
(); idx++ )

523 
	gfTmpEv®Vec
[
idx
]=
šputVec
[idx];

525  
Ev®u©eMVA
Ğ
fTmpEv®Vec
, 
m‘hodTag
, 
aux
 );

531 
DoubË_t
 
	gTMVA
::
R—d”
::
	$Ev®u©eMVA
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
aux
 )

533 
IM‘hod
* 
m‘hod
 = 0;

535 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

536 ià(
™
 =ğ
fM‘hodM­
.
	`’d
()) {

537 
	`Log
(è<< 
kINFO
 << "<EvaluateMVA> unknown classifier in map; "

538 << "you†ooked fÜ \"" << 
m‘hodTag
 << "\" w™hš‡vaabË m‘hods: " << 
Endl
;

539 
™
 = 
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++è
	`Log
(è<< " --> " << it->
fœ¡
 << 
Endl
;

540 
	`Log
(è<< "Check c®lšg sŒšg" << 
kFATAL
 << 
Endl
;

543 
m‘hod
 = 
™
->
£cÚd
;

545 
M‘hodBa£
 * 
kl
 = 
dyÇmic_ÿ¡
<
TMVA
::M‘hodBa£*>(
m‘hod
);

547 if(
kl
==0)

548 
	`Log
(è<< 
kFATAL
 << 
m‘hodTag
 << " i nÙ‡ m‘hod" << 
Endl
;

552 cÚ¡ 
Ev’t
* 
ev
 = 
kl
->
	`G‘Ev’t
();

553 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

554 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

555 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN -->„‘uº MVA v®u-999, \Àth©' ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

559  
this
->
	`Ev®u©eMVA
Ğ
kl
, 
aux
 );

560 
	}
}

565 
DoubË_t
 
	gTMVA
::
R—d”
::
	$Ev®u©eMVA
Ğ
M‘hodBa£
* 
m‘hod
, 
DoubË_t
 
aux
 )

569 ià(
m‘hod
->
	`G‘M‘hodTy³
(è=ğ
TMVA
::
Ty³s
::
kCuts
) {

570 
TMVA
::
M‘hodCuts
* 
mc
 = 
dyÇmic_ÿ¡
<TMVA::M‘hodCuts*>(
m‘hod
);

571 if(
mc
)

572 
mc
->
	`S‘Te¡SigÇlEffic›ncy
Ğ
aux
 );

575  
m‘hod
->
	`G‘MvaV®ue
Ğ(
fC®cuÏ‹E¼Ü
?&
fMvaEv’tE¼Ü
:0),

576 (
fC®cuÏ‹E¼Ü
?&
fMvaEv’tE¼ÜUµ”
:0) );

577 
	}
}

582 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
R—d”
::
	$Ev®u©eReg»ssiÚ
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
aux
 )

584 
IM‘hod
* 
m‘hod
 = 0;

586 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

587 ià(
™
 =ğ
fM‘hodM­
.
	`’d
()) {

588 
	`Log
(è<< 
kINFO
 << "<EvaluateMVA> unknown method in map; "

589 << "you†ooked fÜ \"" << 
m‘hodTag
 << "\" w™hš‡vaabË m‘hods: " << 
Endl
;

590 
™
 = 
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++è
	`Log
(è<< " --> " << it->
fœ¡
 << 
Endl
;

591 
	`Log
(è<< "Check c®lšg sŒšg" << 
kFATAL
 << 
Endl
;

593 
m‘hod
 = 
™
->
£cÚd
;

595 
M‘hodBa£
 * 
kl
 = 
dyÇmic_ÿ¡
<
TMVA
::M‘hodBa£*>(
m‘hod
);

597 if(
kl
==0)

598 
	`Log
(è<< 
kFATAL
 << 
m‘hodTag
 << " i nÙ‡ m‘hod" << 
Endl
;

601 cÚ¡ 
Ev’t
* 
ev
 = 
kl
->
	`G‘Ev’t
();

602 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

603 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

604 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN, \À»g»ssiÚ v®ue mighˆev®u©tØ.. wh© dØI know. \ÀsÜryhi w¬nšg i ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

608  
this
->
	`Ev®u©eReg»ssiÚ
Ğ
kl
, 
aux
 );

609 
	}
}

616 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
R—d”
::
	$Ev®u©eReg»ssiÚ
Ğ
M‘hodBa£
* 
m‘hod
, 
DoubË_t
 )

618 cÚ¡ 
Ev’t
* 
ev
 = 
m‘hod
->
	`G‘Ev’t
();

619 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

620 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

621 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN, \À»g»ssiÚ v®ue mighˆev®u©tØ.. wh© dØI know. \ÀsÜryhi w¬nšg i ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

624  
m‘hod
->
	`G‘Reg»ssiÚV®ues
();

625 
	}
}

631 
Flßt_t
 
	gTMVA
::
R—d”
::
	$Ev®u©eReg»ssiÚ
Ğ
UIÁ_t
 
tgtNumb”
, cÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
aux
 )

633 
Œy
 {

634  
	`Ev®u©eReg»ssiÚ
(
m‘hodTag
, 
aux
).
	`©
(
tgtNumb”
);

636 
	`ÿtch
 (
¡d
::
out_of_¿nge
 
e
) {

637 
	`Log
(è<< 
kWARNING
 << "Reg»ssiÚ could‚Ù bev®u©ed fÜ¬g‘-numb” " << 
tgtNumb”
 << 
Endl
;

640 
	}
}

647 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
R—d”
::
	$Ev®u©eMuÉişass
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
aux
 )

649 
IM‘hod
* 
m‘hod
 = 0;

651 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

652 ià(
™
 =ğ
fM‘hodM­
.
	`’d
()) {

653 
	`Log
(è<< 
kINFO
 << "<EvaluateMVA> unknown method in map; "

654 << "you†ooked fÜ \"" << 
m‘hodTag
 << "\" w™hš‡vaabË m‘hods: " << 
Endl
;

655 
™
 = 
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++è
	`Log
(è<< " --> " << it->
fœ¡
 << 
Endl
;

656 
	`Log
(è<< "Check c®lšg sŒšg" << 
kFATAL
 << 
Endl
;

658 
m‘hod
 = 
™
->
£cÚd
;

660 
M‘hodBa£
 * 
kl
 = 
dyÇmic_ÿ¡
<
TMVA
::M‘hodBa£*>(
m‘hod
);

662 if(
kl
==0)

663 
	`Log
(è<< 
kFATAL
 << 
m‘hodTag
 << " i nÙ‡ m‘hod" << 
Endl
;

667 cÚ¡ 
Ev’t
* 
ev
 = 
kl
->
	`G‘Ev’t
();

668 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

669 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

670 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN, \À»g»ssiÚ v®ue mighˆev®u©tØ.. wh© dØI know. \ÀsÜryhi w¬nšg i ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

674  
this
->
	`Ev®u©eMuÉişass
Ğ
kl
, 
aux
 );

675 
	}
}

682 cÚ¡ 
	g¡d
::
veùÜ
< 
Flßt_t
 >& 
TMVA
::
R—d”
::
	$Ev®u©eMuÉişass
Ğ
M‘hodBa£
* 
m‘hod
, 
DoubË_t
 )

684 cÚ¡ 
Ev’t
* 
ev
 = 
m‘hod
->
	`G‘Ev’t
();

685 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

686 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

687 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN, \À»g»ssiÚ v®ue mighˆev®u©tØ.. wh© dØI know. \ÀsÜryhi w¬nšg i ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

690  
m‘hod
->
	`G‘MuÉişassV®ues
();

691 
	}
}

697 
Flßt_t
 
	gTMVA
::
R—d”
::
	$Ev®u©eMuÉişass
Ğ
UIÁ_t
 
şsNumb”
, cÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
aux
 )

699 
Œy
 {

700  
	`Ev®u©eMuÉişass
(
m‘hodTag
, 
aux
).
	`©
(
şsNumb”
);

702 
	`ÿtch
 (
¡d
::
out_of_¿nge
 
e
) {

703 
	`Log
(è<< 
kWARNING
 << "MuÉişas could‚Ù bev®u©ed fÜ cÏss-numb” " << 
şsNumb”
 << 
Endl
;

706 
	}
}

712 
	gTMVA
::
IM‘hod
* 
TMVA
::
R—d”
::
	$FšdMVA
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
 )

714 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

715 ià(
™
 !ğ
fM‘hodM­
.
	`’d
()è it->
£cÚd
;

716 
	`Log
(è<< 
kERROR
 << "M‘hod " << 
m‘hodTag
 << "‚Ù found!" << 
Endl
;

718 
	}
}

724 
	gTMVA
::
M‘hodCuts
* 
TMVA
::
R—d”
::
	$FšdCutsMVA
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
 )

726  
dyÇmic_ÿ¡
<
M‘hodCuts
*>(
	`FšdMVA
(
m‘hodTag
));

727 
	}
}

732 
DoubË_t
 
	gTMVA
::
R—d”
::
	$G‘Proba
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
­_sig
, DoubË_ˆ
mvaV®
 )

734 
IM‘hod
* 
m‘hod
 = 0;

735 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

736 ià(
™
 =ğ
fM‘hodM­
.
	`’d
()) {

737 
™
 = 
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++è
	`Log
(è<< "M" << it->
fœ¡
 << 
Endl
;

738 
	`Log
(è<< 
kFATAL
 << "<Ev®u©eMVA> unknowÀşassif›¸š m­: " << 
m‘hod
 << "; "

739 << "you†ooked fÜ " << 
m‘hodTag
<< " whthavaabË m‘hod ¬: " << 
Endl
;

741 
m‘hod
 = 
™
->
£cÚd
;

743 
M‘hodBa£
* 
kl
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
m‘hod
);

744 if(
kl
==0)  -1;

747 cÚ¡ 
Ev’t
* 
ev
 = 
kl
->
	`G‘Ev’t
();

748 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

749 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

750 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN -->„‘uº MVA v®u-999, \Àth©' ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

755 ià(
mvaV®
 =ğ-9999999èmvaV® = 
kl
->
	`G‘MvaV®ue
();

757  
kl
->
	`G‘Proba
Ğ
mvaV®
, 
­_sig
 );

758 
	}
}

763 
DoubË_t
 
	gTMVA
::
R—d”
::
	$G‘R¬™y
ĞcÚ¡ 
TSŒšg
& 
m‘hodTag
, 
DoubË_t
 
mvaV®
 )

765 
IM‘hod
* 
m‘hod
 = 0;

766 
¡d
::
m­
<
TSŒšg
, 
IM‘hod
*>::
™”©Ü
 
™
 = 
fM‘hodM­
.
	`fšd
Ğ
m‘hodTag
 );

767 ià(
™
 =ğ
fM‘hodM­
.
	`’d
()) {

768 
™
 = 
fM‘hodM­
.
	`begš
(); it!=fM‘hodM­.
	`’d
(); it++è
	`Log
(è<< "M" << it->
fœ¡
 << 
Endl
;

769 
	`Log
(è<< 
kFATAL
 << "<Ev®u©eMVA> unknowÀşassif›¸š m­: \"" << 
m‘hod
 << "\"; "

770 << "you†ooked fÜ \"" << 
m‘hodTag
<< "\" whthavaabË m‘hod ¬: " << 
Endl
;

772 
m‘hod
 = 
™
->
£cÚd
;

774 
M‘hodBa£
* 
kl
 = 
dyÇmic_ÿ¡
<M‘hodBa£*>(
m‘hod
);

775 if(
kl
==0)  -1;

778 cÚ¡ 
Ev’t
* 
ev
 = 
kl
->
	`G‘Ev’t
();

779 
UIÁ_t
 
i
=0; i<
ev
->
	`G‘NV¬ŸbËs
(); i++){

780 ià(
TM©h
::
	`IsNaN
(
ev
->
	`G‘V®ue
(
i
))) {

781 
	`Log
(è<< 
kERROR
 << 
i
 << "-th v¬ŸbË oàthev’ˆi NaN -->„‘uº MVA v®u-999, \Àth©' ®ÈI cª do,…Ëa£ fix o¸»movthi ev’t." << 
Endl
;

786 ià(
mvaV®
 =ğ-9999999èmvaV® = 
kl
->
	`G‘MvaV®ue
();

788  
kl
->
	`G‘R¬™y
Ğ
mvaV®
 );

789 
	}
}

798 
	gTMVA
::
R—d”
::
	$DecodeV¬Names
ĞcÚ¡ 
¡d
::
¡ršg
& 
v¬Names
 )

800 
size_t
 
os
 = 0, 
f
 = 0;

801 
f
 !ğ
v¬Names
.
	`Ëngth
()) {

802 
f
 = 
v¬Names
.
	`fšd
Ğ':', 
os
 );

803 ià(
f
 > 
v¬Names
.
	`Ëngth
()) f = varNames.length();

804 
¡d
::
¡ršg
 
subs
 = 
v¬Names
.
	`sub¡r
Ğ
os
, 
f
-ipos ); ipos = f+1;

805 
	`D©aInfo
().
	`AddV¬ŸbË
Ğ
subs
.
	`c_¡r
() );

807 
	}
}

812 
	gTMVA
::
R—d”
::
	$DecodeV¬Names
ĞcÚ¡ 
TSŒšg
& 
v¬Names
 )

814 
TSŒšg
 
fÜm©
;

815 
IÁ_t
 
n
 = 
v¬Names
.
	`L’gth
();

816 
TSŒšg
 
fÜm©_obj
;

818 
i
=0; i< 
n
+1 ; i++) {

819 
fÜm©
.
	`Aµ’d
(
	`v¬Names
(
i
));

820 ià(
	`v¬Names
(
i
è=ğ':' || i =ğ
n
) {

821 
fÜm©
.
	`Chİ
();

822 
fÜm©_obj
 = 
fÜm©
;

823 
fÜm©_obj
.
	`R•ÏûAÎ
("@","");

824 
	`D©aInfo
().
	`AddV¬ŸbË
Ğ
fÜm©_obj
 );

825 
fÜm©
.
	`Resize
(0);

828 
	}
}

	@src/RegressionVariance.cxx

36 
	~<io¡»am
>

37 
	~"TM©h.h
"

38 
	~"TMVA/Reg»ssiÚV¬Ÿnû.h
"

40 
CÏssImp
(
TMVA
::
Reg»ssiÚV¬Ÿnû
);

70 
DoubË_t
 
	gTMVA
::
Reg»ssiÚV¬Ÿnû
::
	$G‘S•¬©iÚGaš
(cÚ¡ 
DoubË_t
 
nLeá
,

71 cÚ¡ 
DoubË_t
 
rg‘Leá
, cÚ¡ DoubË_ˆ
rg‘2Leá
,

72 cÚ¡ 
DoubË_t
 
nTÙ
,

73 cÚ¡ 
DoubË_t
 
rg‘TÙ
, cÚ¡ DoubË_ˆ
rg‘2TÙ
)

76 iàĞ
nTÙ
==
nLeá
 ||‚Left==0 )  0.;

78 
DoubË_t
 
·»ÁIndex
 = 
nTÙ
 * 
this
->
	`G‘S•¬©iÚIndex
ÒTÙ,
rg‘TÙ
,
rg‘2TÙ
);

79 
DoubË_t
 
ËáIndex
 = ( (
nTÙ
 - 
nLeá
è* 
this
->
	`G‘S•¬©iÚIndex
ÒTÙ-nLeá,
rg‘TÙ
-
rg‘Leá
,
rg‘2TÙ
-
rg‘2Leá
) );

80 
DoubË_t
 
rightIndex
 = 
nLeá
 * 
this
->
	`G‘S•¬©iÚIndex
ÒLeá,
rg‘Leá
,
rg‘2Leá
);

83  (
·»ÁIndex
 - 
ËáIndex
 - 
rightIndex
)/(parentIndex);

84 
	}
}

89 
DoubË_t
 
	gTMVA
::
Reg»ssiÚV¬Ÿnû
::
	$G‘S•¬©iÚIndex
(cÚ¡ 
DoubË_t
 
n
,

90 cÚ¡ 
DoubË_t
 
rg‘
, cÚ¡ DoubË_ˆ
rg‘2
)

93  ( 
rg‘2
 - 
rg‘
*rg‘/
n
) /‚;

95 
	}
}

	@src/Results.cxx

33 
	~"TMVA/ResuÉs.h
"

35 
	~"TMVA/MsgLogg”.h
"

36 
	~"TMVA/Ty³s.h
"

38 
	~"TG¿ph.h
"

39 
	~"TH1.h
"

40 
	~"TH2.h
"

41 
	~"TLi¡.h
"

43 
	~<veùÜ
>

45 
Çme¥aû
 
	gTMVA
 {

46 
şass
 
	gD©aS‘Info
;

52 
	gTMVA
::
ResuÉs
::
	$ResuÉs
ĞcÚ¡ 
D©aS‘Info
* 
dsi
, 
TSŒšg
 
»suÉsName
 )

53 : 
	`fT»eTy³
(
Ty³s
::
kT¿ššg
),

54 
	`fDsi
(
dsi
),

55 
	`fStÜage
Ğ
Ãw
 
	`TLi¡
() ),

56 
	`fHi¡AlŸs
Ğ
Ãw
 
¡d
::
m­
<
TSŒšg
, 
TObjeù
*> ),

57 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`FÜm
("ResuÉs%s",
»suÉsName
.
	`D©a
()), 
kINFO
) )

59 
fStÜage
->
	`S‘OwÃr
();

60 
	}
}

62 
	gTMVA
::
ResuÉs
::
	$ResuÉs
( )

63 : 
	`fT»eTy³
(
Ty³s
::
kT¿ššg
),

64 
	`fDsi
(0),

65 
	`fStÜage
Ğ
Ãw
 
	`TLi¡
() ),

66 
	`fHi¡AlŸs
Ğ
Ãw
 
¡d
::
m­
<
TSŒšg
, 
TObjeù
*> ),

67 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("ResuÉs", 
kINFO
))

69 
fStÜage
->
	`S‘OwÃr
();

70 
	}
}

76 
	gTMVA
::
ResuÉs
::~
	$ResuÉs
()

79 
d–‘e
 
fStÜage
;

80 
d–‘e
 
fHi¡AlŸs
;

81 
d–‘e
 
fLogg”
;

82 
	}
}

86 
	gTMVA
::
ResuÉs
::
	$StÜe
Ğ
TObjeù
* 
obj
, cÚ¡ * 
®Ÿs
 )

88 
TLi¡I‹r
 
	`l
(
fStÜage
);

90 * 
p
 = (*)
	`l
()) {

91 if(
p
==
obj
)

92 *
fLogg”
 << 
kFATAL
 << "Hi¡og¿m…oš‹¸" << 
p
 << "‡Ì—dyƒxi¡ š„esuÉ ¡Üage" << 
Endl
;

95 
TSŒšg
 
	`as
(
obj
->
	`G‘Name
());

96 ià(
®Ÿs
!=0è
as
=
	`TSŒšg
(alias);

97 ià(
fHi¡AlŸs
->
	`fšd
(
as
è!ğfHi¡AlŸs->
	`’d
()) {

99 *
fLogg”
 << 
kFATAL
 << "AlŸ " << 
as
 << "‡Ì—dyƒxi¡ š„esuÉ ¡Üage" << 
Endl
;

101 ifĞ
obj
->
	`Inh”™sFrom
(
TH1
::
	`CÏss
()) ) {

102 ((
TH1
*)
obj
)->
	`S‘DœeùÜy
(0);

104 
fStÜage
->
	`Add
Ğ
obj
 );

105 
fHi¡AlŸs
->
	`š£¹
(
¡d
::
·œ
<
TSŒšg
, 
TObjeù
*>(
as
,
obj
));

106 
	}
}

110 
TObjeù
* 
	gTMVA
::
ResuÉs
::
	$G‘Objeù
(cÚ¡ 
TSŒšg
 & 
®Ÿs
) const

112 
¡d
::
m­
<
TSŒšg
, 
TObjeù
*>::
™”©Ü
 
™
 = 
fHi¡AlŸs
->
	`fšd
(
®Ÿs
);

114 ià(
™
 !ğ
fHi¡AlŸs
->
	`’d
()è it->
£cÚd
;

118 
	}
}

121 
BoŞ_t
 
	gTMVA
::
ResuÉs
::
	$DÛsExi¡
(cÚ¡ 
TSŒšg
 & 
®Ÿs
) const

123 
TObjeù
* 
‹¡
 = 
	`G‘Objeù
(
®Ÿs
);

125  
‹¡
;

126 
	}
}

130 
TH1
* 
	gTMVA
::
ResuÉs
::
	$G‘Hi¡
(cÚ¡ 
TSŒšg
 & 
®Ÿs
) const

132 
TH1
* 
out
=
dyÇmic_ÿ¡
<TH1*>(
	`G‘Objeù
(
®Ÿs
));

133 ià(!
out
è
	`Log
(è<<
kWARNING
 << "You havasked fÜ hi¡og¿m " << 
®Ÿs
 << " which dÛ nÙ s“mØexi¡ iÀ*ResuÉs* .. b‘‹¸dÚ'ˆu£ iˆ" << 
Endl
;

134  
out
;

135 
	}
}

139 
TH2
* 
	gTMVA
::
ResuÉs
::
	$G‘Hi¡2D
(cÚ¡ 
TSŒšg
 & 
®Ÿs
) const

141 
TH2
* 
out
=
dyÇmic_ÿ¡
<TH2*>(
	`G‘Objeù
(
®Ÿs
));

142 ià(!
out
è
	`Log
(è<<
kWARNING
 << "You havasked fÜ 2D hi¡og¿m " << 
®Ÿs
 << " which dÛ nÙ s“mØexi¡ iÀ*ResuÉs* .. b‘‹¸dÚ'ˆu£ iˆ" << 
Endl
;

143  
out
;

144 
	}
}

147 
TG¿ph
* 
	gTMVA
::
ResuÉs
::
	$G‘G¿ph
(cÚ¡ 
TSŒšg
 & 
®Ÿs
) const

149  (
TG¿ph
*)
	`G‘Objeù
(
®Ÿs
);

150 
	}
}

156 
	gTMVA
::
ResuÉs
::
	$D–‘e
(
O±iÚ_t
 *)

158 
fStÜage
->
	`D–‘e
();

159 
fHi¡AlŸs
->
	`ş—r
();

160 
	}
}

	@src/ResultsClassification.cxx

33 
	~"TMVA/ResuÉsCÏssifiÿtiÚ.h
"

35 
	~"TMVA/MsgLogg”.h
"

36 
	~"TMVA/ResuÉs.h
"

37 
	~"TMVA/Ty³s.h
"

39 
	~"TSŒšg.h
"

41 
	~<veùÜ
>

43 
Çme¥aû
 
	gTMVA
 {

44 
şass
 
	gD©aS‘Info
;

51 
	gTMVA
::
ResuÉsCÏssifiÿtiÚ
::
	$ResuÉsCÏssifiÿtiÚ
ĞcÚ¡ 
D©aS‘Info
* 
dsi
, 
TSŒšg
 
»suÉsName
 )

52 : 
	`ResuÉs
Ğ
dsi
,
»suÉsName
 ),

53 
	`fR‘
(1),

54 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`FÜm
("ResuÉsCÏssifiÿtiÚ%s",
»suÉsName
.
	`D©a
()è, 
kINFO
) )

56 
	}
}

61 
	gTMVA
::
ResuÉsCÏssifiÿtiÚ
::~
	$ResuÉsCÏssifiÿtiÚ
()

63 
d–‘e
 
fLogg”
;

64 
	}
}

69 
	gTMVA
::
ResuÉsCÏssifiÿtiÚ
::
	$S‘V®ue
Ğ
Flßt_t
 
v®ue
, 
IÁ_t
 
›vt
 )

71 ià(
›vt
 >ğ(
IÁ_t
)
fMvaV®ues
.
	`size
()èfMvaV®ues.
	`»size
( ievt+1 );

72 
fMvaV®ues
[
›vt
] = 
v®ue
;

73 
	}
}

	@src/ResultsMulticlass.cxx

35 
	~"TMVA/ResuÉsMuÉişass.h
"

37 
	~"TMVA/D©aS‘.h
"

38 
	~"TMVA/D©aS‘Info.h
"

39 
	~"TMVA/G’‘icAlgÜ™hm.h
"

40 
	~"TMVA/G’‘icF™‹r.h
"

41 
	~"TMVA/MsgLogg”.h
"

42 
	~"TMVA/ResuÉs.h
"

43 
	~"TMVA/ROCCurve.h
"

44 
	~"TMVA/ToŞs.h
"

45 
	~"TMVA/Ty³s.h
"

47 
	~"TG¿ph.h
"

48 
	~"TH1F.h
"

49 
	~"TM©rixD.h
"

51 
	~<lim™s
>

52 
	~<veùÜ
>

58 
	gTMVA
::
ResuÉsMuÉişass
::
	$ResuÉsMuÉişass
ĞcÚ¡ 
D©aS‘Info
* 
dsi
, 
TSŒšg
 
»suÉsName
 )

59 : 
	`ResuÉs
Ğ
dsi
, 
»suÉsName
 ),

60 
	`IF™‹rT¬g‘
(),

61 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`FÜm
("ResuÉsMuÉiCÏss%s",
»suÉsName
.
	`D©a
()è, 
kINFO
) ),

62 
	`fCÏssToO±imize
(0),

63 
	`fAch›vabËEff
(
dsi
->
	`G‘NCÏs£s
()),

64 
	`fAch›vabËPur
(
dsi
->
	`G‘NCÏs£s
()),

65 
	`fBe¡Cuts
(
dsi
->
	`G‘NCÏs£s
(),
¡d
::
veùÜ
<
DoubË_t
>(dsi->
	$G‘NCÏs£s
()))

67 
	}
}

72 
TMVA
::
ResuÉsMuÉişass
::~
	$ResuÉsMuÉişass
()

74 
d–‘e
 
fLogg”
;

75 
	}
}

79 
	gTMVA
::
ResuÉsMuÉişass
::
S‘V®ue
Ğ
¡d
::
veùÜ
<
Flßt_t
>& 
v®ue
, 
IÁ_t
 
›vt
 )

81 ià(
	g›vt
 >ğ(
IÁ_t
)
fMuÉiCÏssV®ues
.
size
()èfMuÉiCÏssV®ues.
»size
Ğ
›vt
+1 );

82 
	gfMuÉiCÏssV®ues
[
›vt
] = 
v®ue
;

89 
TM©rixD
 
	gTMVA
::
ResuÉsMuÉişass
::
	$G‘CÚfusiÚM©rix
(
DoubË_t
 
effB
)

91 cÚ¡ 
D©aS‘
 *
ds
 = 
	`G‘D©aS‘
();

92 cÚ¡ 
D©aS‘Info
 *
dsi
 = 
	`G‘D©aS‘Info
();

93 
ds
->
	`S‘Cu¼’tTy³
(
	`G‘T»eTy³
());

95 
UIÁ_t
 
numCÏs£s
 = 
dsi
->
	`G‘NCÏs£s
();

96 
TM©rixD
 
	`m©
(
numCÏs£s
,‚umClasses);

99 
UIÁ_t
 
iRow
 = 0; iRow < 
numCÏs£s
; ++iRow) {

100 
UIÁ_t
 
iCŞ
 = 0; iCŞ < 
numCÏs£s
; ++iCol) {

103 ià(
iRow
 =ğ
iCŞ
) {

104 
	`m©
(
iRow
, 
iCŞ
èğ
¡d
::
num”ic_lim™s
<>::
	`qu›t_NaN
();

107 
¡d
::
veùÜ
<
Flßt_t
> 
v®ueVeùÜ
;

108 
¡d
::
veùÜ
<
BoŞ_t
> 
şassVeùÜ
;

109 
¡d
::
veùÜ
<
Flßt_t
> 
weightVeùÜ
;

111 
UIÁ_t
 
iEvt
 = 0; iEvˆ< 
ds
->
	`G‘NEv’ts
(); ++iEvt) {

112 cÚ¡ 
Ev’t
 *
ev
 = 
ds
->
	`G‘Ev’t
(
iEvt
);

113 cÚ¡ 
UIÁ_t
 
şs
 = 
ev
->
	`G‘CÏss
();

114 cÚ¡ 
Flßt_t
 
weight
 = 
ev
->
	`G‘Weight
();

115 cÚ¡ 
Flßt_t
 
mvaV®ue
 = 
fMuÉiCÏssV®ues
[
iEvt
][
iRow
];

117 ià(
şs
 !ğ
iRow
 
ªd
 cl !ğ
iCŞ
) {

121 
şassVeùÜ
.
	`push_back
(
şs
 =ğ
iRow
);

122 
weightVeùÜ
.
	`push_back
(
weight
);

123 
v®ueVeùÜ
.
	`push_back
(
mvaV®ue
);

126 
ROCCurve
 
	`roc
(
v®ueVeùÜ
, 
şassVeùÜ
, 
weightVeùÜ
);

127 
	`m©
(
iRow
, 
iCŞ
èğ
roc
.
	`G‘EffSFÜEffB
(
effB
);

131  
m©
;

132 
	}
}

136 
DoubË_t
 
	gTMVA
::
ResuÉsMuÉişass
::
E¡im©ÜFunùiÚ
Ğ
¡d
::
veùÜ
<DoubË_t> & 
cutv®ues
 ){

138 
D©aS‘
* 
ds
 = 
G‘D©aS‘
();

139 
	gds
->
S‘Cu¼’tTy³
Ğ
G‘T»eTy³
() );

143 
Flßt_t
 
	gpos™ives
[2] = {0, 0};

145 
IÁ_t
 
	g›vt
 = 0; ievˆ< 
	gds
->
G‘NEv’ts
(); ievt++) {

146 
UIÁ_t
 
	gevCÏss
 = 
fEv’tCÏs£s
[
›vt
];

147 
Flßt_t
 
	gw
 = 
fEv’tWeights
[
›vt
];

149 
BoŞ_t
 
	gb»ak_ou‹r_loİ
 = 
çl£
;

150 
UIÁ_t
 
	gişs
 = 0; iş < 
	gcutv®ues
.
size
(); ++icls) {

151 autØ
	gv®ue
 = 
fMuÉiCÏssV®ues
[
›vt
][
işs
];

152 autØ
	gcutv®ue
 = 
cutv®ues
.
©
(
işs
);

153 ià(
	gcutv®ue
 < 0. ? (-
	gv®ue
 < cutv®ueè: (+
v®ue
 <ğ
cutv®ue
)) {

154 
b»ak_ou‹r_loİ
 = 
Œue
;

159 ià(
	gb»ak_ou‹r_loİ
) {

163 
BoŞ_t
 
	gisEvCu¼CÏss
 = (
evCÏss
 =ğ
fCÏssToO±imize
);

164 
	gpos™ives
[
isEvCu¼CÏss
] +ğ
w
;

167 cÚ¡ 
Flßt_t
 
	gŒuePos™ive
 = 
pos™ives
[1];

168 cÚ¡ 
Flßt_t
 
	gçl£Pos™ive
 = 
pos™ives
[0];

170 
Flßt_t
 
	geff
 = 
ŒuePos™ive
 / 
fCÏssSumWeights
[
fCÏssToO±imize
];

171 
Flßt_t
 
	gpur
 = 
ŒuePos™ive
 / (ŒuePos™iv+ 
çl£Pos™ive
);

172 
Flßt_t
 
	geffTimesPur
 = 
eff
*
pur
;

174 
Flßt_t
 
	gtoMšimize
 = 
¡d
::
num”ic_lim™s
<>::
max
();

175 ià(
	geffTimesPur
 > 
	g¡d
::
num”ic_lim™s
<>::
mš
())

176 
toMšimize
 = 1./(
effTimesPur
);

178 
	gfAch›vabËEff
.
©
(
fCÏssToO±imize
èğ
eff
;

179 
	gfAch›vabËPur
.
©
(
fCÏssToO±imize
èğ
pur
;

181  
	gtoMšimize
;

188 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
ResuÉsMuÉişass
::
	$G‘Be¡MuÉiCÏssCuts
(
UIÁ_t
 
rg‘CÏss
){

190 cÚ¡ 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
();

191 
	`Log
(è<< 
kINFO
 << "Calculating best set of cuts for class "

192 << 
dsi
->
	`G‘CÏssInfo
Ğ
rg‘CÏss
 )->
	`G‘Name
(è<< 
Endl
;

194 
fCÏssToO±imize
 = 
rg‘CÏss
;

195 
¡d
::
veùÜ
<
IÁ”v®
*> 
	`¿nges
(
dsi
->
	`G‘NCÏs£s
(), 
Ãw
 
	`IÁ”v®
(-1,1));

197 
fCÏssSumWeights
.
	`ş—r
();

198 
fEv’tWeights
.
	`ş—r
();

199 
fEv’tCÏs£s
.
	`ş—r
();

201 
UIÁ_t
 
işs
 = 0; iş < 
dsi
->
	`G‘NCÏs£s
(); ++icls) {

202 
fCÏssSumWeights
.
	`push_back
(0);

205 
D©aS‘
 *
ds
 = 
	`G‘D©aS‘
();

206 
IÁ_t
 
›vt
 = 0; ievˆ< 
ds
->
	`G‘NEv’ts
(); ievt++) {

207 cÚ¡ 
Ev’t
 *
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

208 
fCÏssSumWeights
[
ev
->
	`G‘CÏss
()] +ğev->
	`G‘Weight
();

209 
fEv’tWeights
.
	`push_back
(
ev
->
	`G‘Weight
());

210 
fEv’tCÏs£s
.
	`push_back
(
ev
->
	`G‘CÏss
());

213 cÚ¡ 
TSŒšg
 
	`Çme
( "MulticlassGA" );

214 cÚ¡ 
TSŒšg
 
	`İts
( "PopSize=100:Steps=30" );

215 
G’‘icF™‹r
 
	`mg
Ğ*
this
, 
Çme
, 
¿nges
, 
İts
);

217 
¡d
::
veùÜ
<
DoubË_t
> 
»suÉ
;

218 
mg
.
	`Run
(
»suÉ
);

220 
fBe¡Cuts
.
	`©
(
rg‘CÏss
èğ
»suÉ
;

222 
UIÁ_t
 
n
 = 0;

223  
¡d
::
veùÜ
<
DoubË_t
>::
™”©Ü
 
™
 = 
»suÉ
.
	`begš
(); it<»suÉ.
	`’d
(); it++ ){

224 
	`Log
(è<< 
kINFO
 << " cutV®ue[" <<
dsi
->
	`G‘CÏssInfo
Ğ
n
 )->
	`G‘Name
(è<< "] = " << (*
™
è<< ";"<< 
Endl
;

225 
n
++;

228  
»suÉ
;

229 
	}
}

240 
	gTMVA
::
ResuÉsMuÉişass
::
	$C»©eMuÉişassP”fÜmªûHi¡os
(
TSŒšg
 
´efix
)

242 
D©aS‘
 *
ds
 = 
	`G‘D©aS‘
();

243 
ds
->
	`S‘Cu¼’tTy³
(
	`G‘T»eTy³
());

244 cÚ¡ 
D©aS‘Info
 *
dsi
 = 
	`G‘D©aS‘Info
();

246 
UIÁ_t
 
numCÏs£s
 = 
dsi
->
	`G‘NCÏs£s
();

248 
¡d
::
veùÜ
<¡d::veùÜ<
Flßt_t
>> *
¿wMvaRes
 = 
	`G‘V®ueVeùÜ
();

250 
size_t
 
iCÏss
 = 0; iCÏs < 
numCÏs£s
; ++iClass) {

253 
¡d
::
veùÜ
<
Flßt_t
> 
mvaRes
;

254 
¡d
::
veùÜ
<
BoŞ_t
> 
mvaResTy³s
;

255 
¡d
::
veùÜ
<
Flßt_t
> 
mvaResWeights
;

260 
mvaRes
.
	`»£rve
(
¿wMvaRes
->
	`size
());

261 autØ
™em
 : *
¿wMvaRes
) {

262 
mvaRes
.
	`push_back
(
™em
[
iCÏss
]);

265 autØ
ev’tCŞËùiÚ
 = 
ds
->
	`G‘Ev’tCŞËùiÚ
();

266 
mvaResTy³s
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

267 
mvaResWeights
.
	`»£rve
(
ev’tCŞËùiÚ
.
	`size
());

268 autØ
ev
 : 
ev’tCŞËùiÚ
) {

269 
mvaResTy³s
.
	`push_back
(
ev
->
	`G‘CÏss
(è=ğ
iCÏss
);

270 
mvaResWeights
.
	`push_back
(
ev
->
	`G‘Weight
());

274 
ROCCurve
 *
roc
 = 
Ãw
 
	`ROCCurve
(
mvaRes
, 
mvaResTy³s
, 
mvaResWeights
);

275 
TG¿ph
 *
rocG¿ph
 = 
Ãw
 
	`TG¿ph
(*(
roc
->
	`G‘ROCCurve
()));

276 
d–‘e
 
roc
;

279 
TSŒšg
 
şassName
 = 
dsi
->
	`G‘CÏssInfo
(
iCÏss
)->
	`G‘Name
();

280 
TSŒšg
 
Çme
 = 
	`FÜm
("%s_»jBvsS_%s", 
´efix
.
	`D©a
(), 
şassName
.Data());

281 
TSŒšg
 
t™Ë
 = 
	`FÜm
("%s_%s", 
´efix
.
	`D©a
(), 
şassName
.Data());

282 
rocG¿ph
->
	`S‘Name
(
Çme
);

283 
rocG¿ph
->
	`S‘T™Ë
(
t™Ë
);

286 
	`StÜe
(
rocG¿ph
);

288 
	}
}

293 
	gTMVA
::
ResuÉsMuÉişass
::
	$C»©eMuÉişassHi¡os
Ğ
TSŒšg
 
´efix
, 
IÁ_t
 
nbšs
, Int_t )

295 
	`Log
(è<< 
kINFO
 << "C»©šg muÉişas »¥Ú£ hi¡og¿ms..." << 
Endl
;

297 
D©aS‘
* 
ds
 = 
	`G‘D©aS‘
();

298 
ds
->
	`S‘Cu¼’tTy³
Ğ
	`G‘T»eTy³
() );

299 cÚ¡ 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
();

301 
¡d
::
veùÜ
<¡d::veùÜ<
TH1F
*> > 
hi¡os
;

302 
Flßt_t
 
xmš
 = 0.-0.0002;

303 
Flßt_t
 
xmax
 = 1.+0.0002;

304 
UIÁ_t
 
iCls
 = 0; iCl < 
dsi
->
	`G‘NCÏs£s
(); iCls++) {

305 
hi¡os
.
	`push_back
(
¡d
::
veùÜ
<
TH1F
*>(0));

306 
UIÁ_t
 
jCls
 = 0; jCl < 
dsi
->
	`G‘NCÏs£s
(); jCls++) {

307 
TSŒšg
 
	`Çme
(
	`FÜm
("%s_%s_´ob_fÜ_%s",
´efix
.
	`D©a
(),

308 
dsi
->
	`G‘CÏssInfo
Ğ
jCls
 )->
	`G‘Name
(),

309 
dsi
->
	`G‘CÏssInfo
Ğ
iCls
 )->
	`G‘Name
()));

310 
hi¡os
.
	`©
(
iCls
).
	`push_back
(
Ãw
 
	`TH1F
(
Çme
,Çme,
nbšs
,
xmš
,
xmax
));

314 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

315 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

316 
IÁ_t
 
şs
 = 
ev
->
	`G‘CÏss
();

317 
Flßt_t
 
w
 = 
ev
->
	`G‘Weight
();

318 
UIÁ_t
 
jCls
 = 0; jCl < 
dsi
->
	`G‘NCÏs£s
(); jCls++) {

319 
hi¡os
.
	`©
(
şs
).©(
jCls
)->
	`Fl
(
fMuÉiCÏssV®ues
[
›vt
][jCls],
w
);

322 
UIÁ_t
 
iCls
 = 0; iCl < 
dsi
->
	`G‘NCÏs£s
(); iCls++) {

323 
UIÁ_t
 
jCls
 = 0; jCl < 
dsi
->
	`G‘NCÏs£s
(); jCls++) {

324 
	`gToŞs
().
	`NÜmHi¡
Ğ
hi¡os
.
	`©
(
iCls
).©(
jCls
) );

325 
	`StÜe
(
hi¡os
.
	`©
(
iCls
).©(
jCls
));

359 
	}
}

	@src/ResultsRegression.cxx

32 
	~"TMVA/ResuÉsReg»ssiÚ.h
"

34 
	~"TMVA/D©aS‘.h
"

35 
	~"TMVA/D©aS‘Info.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/ResuÉs.h
"

38 
	~"TMVA/Ty³s.h
"

39 
	~"TMVA/V¬ŸbËInfo.h
"

41 
	~"TH1F.h
"

42 
	~"TH2F.h
"

43 
	~"TSŒšg.h
"

45 
	~<veùÜ
>

51 
	gTMVA
::
ResuÉsReg»ssiÚ
::
	$ResuÉsReg»ssiÚ
ĞcÚ¡ 
D©aS‘Info
* 
dsi
, 
TSŒšg
 
»suÉsName
 )

52 : 
	`ResuÉs
Ğ
dsi
, 
»suÉsName
 ),

53 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
(
	`FÜm
("ResuÉsReg»ssiÚ%s",
»suÉsName
.
	`D©a
()è, 
kINFO
) )

55 
	}
}

60 
	gTMVA
::
ResuÉsReg»ssiÚ
::~
	$ResuÉsReg»ssiÚ
()

62 
d–‘e
 
fLogg”
;

63 
	}
}

67 
	gTMVA
::
ResuÉsReg»ssiÚ
::
S‘V®ue
Ğ
¡d
::
veùÜ
<
Flßt_t
>& 
v®ue
, 
IÁ_t
 
›vt
 )

69 ià(
	g›vt
 >ğ(
IÁ_t
)
fRegV®ues
.
size
()èfRegV®ues.
»size
Ğ
›vt
+1 );

70 
	gfRegV®ues
[
›vt
] = 
v®ue
;

75 
TH1F
* 
	gTMVA
::
ResuÉsReg»ssiÚ
::
	$Quad¿ticDevŸtiÚ
Ğ
UIÁ_t
 
tgtNum
 , 
BoŞ_t
 
Œunÿ‹
, 
DoubË_t
 
Œuncv®ue
 )

77 
D©aS‘
* 
ds
 = 
	`G‘D©aS‘
();

78 
ds
->
	`S‘Cu¼’tTy³
Ğ
	`G‘T»eTy³
() );

79 cÚ¡ 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
();

80 
TSŒšg
 
	`Çme
Ğ
	`FÜm
("tgt_%d",
tgtNum
) );

81 
V¬ŸbËInfo
 
všf
 = 
dsi
->
	`G‘T¬g‘Info
(
tgtNum
);

82 
Flßt_t
 
xmš
=0., 
xmax
=0.;

83 ià(
Œunÿ‹
){

84 
xmax
 = 
Œuncv®ue
;

87 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

88 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

89 
¡d
::
veùÜ
<
Flßt_t
> 
»gV®
 = 
fRegV®ues
.
	`©
(
›vt
);

90 
Flßt_t
 
v®
 = 
»gV®
.
	`©
Ğ
tgtNum
 ) - 
ev
->
	`G‘T¬g‘
(gtNum );

91 
v®
 *= val;

92 
xmax
 = 
v®
> xmax? val: xmax;

95 
xmax
 *= 1.1;

96 
IÁ_t
 
nbšs
 = 500;

97 
TH1F
* 
h
 = 
Ãw
 
	`TH1F
Ğ
Çme
,‚ame, 
nbšs
, 
xmš
, 
xmax
);

98 
h
->
	`S‘DœeùÜy
(0);

99 
h
->
	`G‘Xaxis
()->
	`S‘T™Ë
("Quadratic Deviation");

100 
h
->
	`G‘Yaxis
()->
	`S‘T™Ë
("Weighted Entries");

102 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

103 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

104 
¡d
::
veùÜ
<
Flßt_t
> 
»gV®
 = 
fRegV®ues
.
	`©
(
›vt
);

105 
Flßt_t
 
v®
 = 
»gV®
.
	`©
Ğ
tgtNum
 ) - 
ev
->
	`G‘T¬g‘
(gtNum );

106 
v®
 *= val;

107 
Flßt_t
 
weight
 = 
ev
->
	`G‘Weight
();

108 ià(!
Œunÿ‹
 || 
v®
<=
Œuncv®ue
 ) 
h
->
	`Fl
Ğv®, 
weight
);

110  
h
;

111 
	}
}

115 
TH2F
* 
	gTMVA
::
ResuÉsReg»ssiÚ
::
	$DevŸtiÚAsAFunùiÚOf
Ğ
UIÁ_t
 
v¬Num
, UIÁ_ˆ
tgtNum
 )

117 
D©aS‘
* 
ds
 = 
	`G‘D©aS‘
();

118 
ds
->
	`S‘Cu¼’tTy³
Ğ
	`G‘T»eTy³
() );

120 
TSŒšg
 
	`Çme
Ğ
	`FÜm
("tgt_%d_v¬_%d",
tgtNum
, 
v¬Num
) );

121 cÚ¡ 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
();

122 
Flßt_t
 
xmš
, 
xmax
;

123 
BoŞ_t
 
keT¬g‘s
 = 
kFALSE
;

124 ià(
v¬Num
 >ğ
dsi
->
	`G‘NV¬ŸbËs
()) {

125 
keT¬g‘s
 = 
kTRUE
;

126 
v¬Num
 -ğ
dsi
->
	`G‘NV¬ŸbËs
();

128 ià(!
keT¬g‘s
) {

129 
V¬ŸbËInfo
 
všf
 = 
dsi
->
	`G‘V¬ŸbËInfo
(
v¬Num
);

130 
xmš
 = 
všf
.
	`G‘Mš
();

131 
xmax
 = 
všf
.
	`G‘Max
();

133 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

134 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

135 
Flßt_t
 
v®
 = 
ev
->
	`G‘V®ue
(
v¬Num
);

137 ià(
v®
 < 
xmš
 ) xmin = val;

138 ià(
v®
 > 
xmax
 ) xmax = val;

143 
V¬ŸbËInfo
 
všf
 = 
dsi
->
	`G‘T¬g‘Info
(
v¬Num
);

144 
xmš
 = 
všf
.
	`G‘Mš
();

145 
xmax
 = 
všf
.
	`G‘Max
();

147 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

148 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

149 
Flßt_t
 
v®
 = 
ev
->
	`G‘T¬g‘
(
v¬Num
);

151 ià(
v®
 < 
xmš
 ) xmin = val;

152 ià(
v®
 > 
xmax
 ) xmax = val;

156 
Flßt_t
 
ymš
 = 
FLT_MAX
;

157 
Flßt_t
 
ymax
 = -
FLT_MAX
;

159 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

160 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

161 
¡d
::
veùÜ
<
Flßt_t
> 
»gV®
 = 
fRegV®ues
.
	`©
(
›vt
);

163 
Flßt_t
 
diff
 = 
»gV®
.
	`©
Ğ
tgtNum
 ) - 
ev
->
	`G‘T¬g‘
(gtNum );

164 ià(
diff
 < 
ymš
 ) ymin = diff;

165 ià(
diff
 > 
ymax
 ) ymax = diff;

168 
IÁ_t
 
nxbšs
 = 50;

169 
IÁ_t
 
nybšs
 = 50;

171 
Flßt_t
 
•sÚ
 = 
TM©h
::
	`Abs
(
xmax
-
xmš
)/((Flßt_t)
nxbšs
-1);

172 
xmš
 -ğ1.01*
•sÚ
;

173 
xmax
 +ğ1.01*
•sÚ
;

175 
•sÚ
 = (
ymax
-
ymš
)/((
Flßt_t
)
nybšs
-1);

176 
ymš
 -ğ1.01*
•sÚ
;

177 
ymax
 +ğ1.01*
•sÚ
;

180 
TH2F
* 
h
 = 
Ãw
 
	`TH2F
Ğ
Çme
,‚ame, 
nxbšs
, 
xmš
, 
xmax
, 
nybšs
, 
ymš
, 
ymax
 );

181 
h
->
	`S‘DœeùÜy
(0);

183 
h
->
	`G‘Xaxis
()->
	`S‘T™Ë
Ğ(
keT¬g‘s
 ? 
dsi
->
	`G‘T¬g‘Info
(
v¬Num
).
	`G‘T™Ë
(è: dsi->
	`G‘V¬ŸbËInfo
(varNum).GetTitle() ) );

184 
TSŒšg
 
	`v¬Name
Ğ
dsi
->
	`G‘T¬g‘Info
(
tgtNum
).
	`G‘T™Ë
() );

185 
TSŒšg
 
	`yName
Ğ
v¬Name
+
	`TSŒšg
("_{regression} - ") + varName+TString("_{true}") );

186 
h
->
	`G‘Yaxis
()->
	`S‘T™Ë
Ğ
yName
 );

188 
IÁ_t
 
›vt
=0; ievt<
ds
->
	`G‘NEv’ts
(); ievt++) {

189 cÚ¡ 
Ev’t
* 
ev
 = 
ds
->
	`G‘Ev’t
(
›vt
);

190 
¡d
::
veùÜ
<
Flßt_t
> 
»gV®
 = 
fRegV®ues
.
	`©
(
›vt
);

192 
Flßt_t
 
xV®
 = (
keT¬g‘s
?
ev
->
	`G‘T¬g‘
Ğ
v¬Num
 ):ev->
	`G‘V®ue
( varNum ));

193 
Flßt_t
 
yV®
 = 
»gV®
.
	`©
Ğ
tgtNum
 ) - 
ev
->
	`G‘T¬g‘
(gtNum );

195 
h
->
	`Fl
Ğ
xV®
, 
yV®
 );

198  
h
;

199 
	}
}

203 
	gTMVA
::
ResuÉsReg»ssiÚ
::
	$C»©eDevŸtiÚHi¡og¿ms
Ğ
TSŒšg
 
´efix
 )

205 
	`Log
(è<< 
kINFO
 << "C»©v¬ŸbË hi¡og¿ms" << 
Endl
;

206 cÚ¡ 
D©aS‘Info
* 
dsi
 = 
	`G‘D©aS‘Info
();

208 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
dsi
->
	`G‘NV¬ŸbËs
(); ivar++) {

209 
UIÁ_t
 
™gt
 = 0; itgˆ< 
dsi
->
	`G‘NT¬g‘s
(); itgt++) {

210 
TH2F
* 
h
 = 
	`DevŸtiÚAsAFunùiÚOf
Ğ
iv¬
, 
™gt
 );

211 
TSŒšg
 
	`Çme
Ğ
	`FÜm
("%s_»g_v¬%d_¹gt%d",
´efix
.
	`D©a
(),
iv¬
,
™gt
) );

212 
h
->
	`S‘Name
Ğ
Çme
 );

213 
h
->
	`S‘T™Ë
Ğ
Çme
 );

214 
	`StÜe
Ğ
h
 );

217 
	`Log
(è<< 
kINFO
 << "C»©»g»ssiÚ¬g‘ hi¡og¿ms" << 
Endl
;

218 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
dsi
->
	`G‘NT¬g‘s
(); ivar++) {

219 
UIÁ_t
 
™gt
 = 0; itgˆ< 
dsi
->
	`G‘NT¬g‘s
(); itgt++) {

220 
TH2F
* 
h
 = 
	`DevŸtiÚAsAFunùiÚOf
Ğ
dsi
->
	`G‘NV¬ŸbËs
()+
iv¬
, 
™gt
 );

221 
TSŒšg
 
	`Çme
Ğ
	`FÜm
("%s_»g_tgt%d_¹gt%d",
´efix
.
	`D©a
(),
iv¬
,
™gt
) );

222 
h
->
	`S‘Name
Ğ
Çme
 );

223 
h
->
	`S‘T™Ë
Ğ
Çme
 );

224 
	`StÜe
Ğ
h
 );

228 
	`Log
(è<< 
kINFO
 << "C»©»g»ssiÚ‡v”agdevŸtiÚ" << 
Endl
;

229 
UIÁ_t
 
™gt
 = 0; itgˆ< 
dsi
->
	`G‘NT¬g‘s
(); itgt++) {

230 
TH1F
* 
h
 = 
	`Quad¿ticDevŸtiÚ
(
™gt
);

231 
TSŒšg
 
	`Çme
Ğ
	`FÜm
("%s_Quadr_DevŸtiÚ_rg‘_%d_",
´efix
.
	`D©a
(),
™gt
) );

232 
h
->
	`S‘Name
Ğ
Çme
 );

233 
h
->
	`S‘T™Ë
Ğ
Çme
 );

234 
DoubË_t
 
yq
[1], 
xq
[]={0.9};

235 
h
->
	`G‘Quªtes
(1,
yq
,
xq
);

236 
	`StÜe
Ğ
h
 );

238 
TH1F
* 
hŒunc
 = 
	`Quad¿ticDevŸtiÚ
(
™gt
, 
Œue
, 
yq
[0]);

239 
TSŒšg
 
	`Çme2
Ğ
	`FÜm
("%s_Quadr_Dev_be¡90³rc_rg‘_%d_",
´efix
.
	`D©a
(),
™gt
) );

240 
hŒunc
->
	`S‘Name
Ğ
Çme2
 );

241 
hŒunc
->
	`S‘T™Ë
Ğ
Çme2
 );

242 
	`StÜe
Ğ
hŒunc
 );

244 
	`Log
(è<< 
kINFO
 << "ResuÉ ü—‹d" << 
Endl
;

245 
	}
}

	@src/RootFinder.cxx

33 
	~"TMVA/RoÙFšd”.h
"

35 
	~"TMVA/M‘hodBa£.h
"

36 
	~"TMVA/MsgLogg”.h
"

37 
	~"TMVA/Ty³s.h
"

39 
	~"TM©h.h
"

40 
	~"TObjeù.h
"

42 
CÏssImp
(
TMVA
::
RoÙFšd”
);

47 
	gTMVA
::
RoÙFšd”
::
	$RoÙFšd”
(
TMVA
::
M‘hodBa£
 *
m‘hod
 ,

48 
DoubË_t
 
roÙMš
,

49 
DoubË_t
 
roÙMax
,

50 
IÁ_t
 
maxI‹¿tiÚs
,

51 
DoubË_t
 
absTŞ”ªû
 )

52 : 
	`fRoÙMš
Ğ
roÙMš
 ),

53 
	`fRoÙMax
Ğ
roÙMax
 ),

54 
	`fMaxI‹r
Ğ
maxI‹¿tiÚs
 ),

55 
	`fAbsTŞ
 ( 
absTŞ”ªû
 ),

56 
	`fLogg”
 ( 
Ãw
 
	`MsgLogg”
("RootFinder") )

58 
fM‘hod
=
m‘hod
;

59 
	}
}

64 
	gTMVA
::
RoÙFšd”
::~
	$RoÙFšd”
( )

66 
d–‘e
 
fLogg”
;

67 
	}
}

72 
DoubË_t
 
	gTMVA
::
RoÙFšd”
::
	$RoÙ
Ğ
DoubË_t
 
»fV®ue
 )

74 
DoubË_t
 
a
 = 
fRoÙMš
, 
b
 = 
fRoÙMax
;

75 
DoubË_t
 
ç
 = 
fM‘hod
->
	`G‘V®ueFÜRoÙ
Ğ
a
 ) - 
»fV®ue
;

76 
DoubË_t
 
fb
 = 
fM‘hod
->
	`G‘V®ueFÜRoÙ
Ğ
b
 ) - 
»fV®ue
;

77 ià(
fb
*
ç
 > 0) {

78 
	`Log
(è<< 
kWARNING
 << "<Root> initial interval w/o„oot: "

79 << "×=" << 
a
 << ", b=" << 
b
 << "),"

80 << " (Eff_a=" << 
fM‘hod
->
	`G‘V®ueFÜRoÙ
Ğ
a
 )

81 << ", Eff_b=" << 
fM‘hod
->
	`G‘V®ueFÜRoÙ
Ğ
b
 ) << "), "

82 << "(ç=" << 
ç
 << ", fb=" << 
fb
 << "), "

83 << "»fV®uğ" << 
»fV®ue
 << 
Endl
;

87 
BoŞ_t
 
	`ac_equ®
(
kFALSE
);

88 
DoubË_t
 
fc
 = 
fb
;

89 
DoubË_t
 
c
 = 0, 
d
 = 0, 
e
 = 0;

90 
IÁ_t
 
™”
ğ0; i‹¸<ğ
fMaxI‹r
; iter++) {

91 ià((
fb
 < 0 && 
fc
 < 0) || (fb > 0 && fc > 0)) {

94 
ac_equ®
 = 
kTRUE
;

95 
c
 = 
a
; 
fc
 = 
ç
;

96 
d
 = 
b
 - 
a
; 
e
 = b -‡;

99 ià(
TM©h
::
	`Abs
(
fc
è< TM©h::Abs(
fb
)) {

100 
ac_equ®
 = 
kTRUE
;

101 
a
 = 
b
; b = 
c
; c =‡;

102 
ç
 = 
fb
; fb = 
fc
; fc = fa;

105 
DoubË_t
 
tŞ
 = 0.5 * 2.2204460492503131e-16 * 
TM©h
::
	`Abs
(
b
);

106 
DoubË_t
 
m
 = 0.5 * (
c
 - 
b
);

107 ià(
fb
 =ğ0 || 
TM©h
::
	`Abs
(
m
è<ğ
tŞ
 || TM©h::Abs(fbè< 
fAbsTŞ
è 
b
;

110 ià(
TM©h
::
	`Abs
 (
e
è< 
tŞ
 || TM©h::Ab (
ç
è<ğTM©h::Ab (
fb
)è{ 
d
 = 
m
;ƒ = m; }

113 
DoubË_t
 
p
, 
q
, 
r
;

114 
DoubË_t
 
s
 = 
fb
 / 
ç
;

116 ià(
ac_equ®
è{ 
p
 = 2 * 
m
 * 
s
; 
q
 = 1 - s; }

118 
q
 = 
ç
 / 
fc
; 
r
 = 
fb
 / fc;

119 
p
 = 
s
 * (2 * 
m
 * 
q
 * (q - 
r
è- (
b
 - 
a
) * (r - 1));

120 
q
 = (q - 1è* (
r
 - 1è* (
s
 - 1);

123 ià(
p
 > 0è
q
 = -q;

124 
p
 = -p;

126 
DoubË_t
 
mš1
 = 3 * 
m
 * 
q
 - 
TM©h
::
	`Abs
 (
tŞ
 * q);

127 
DoubË_t
 
mš2
 = 
TM©h
::
	`Abs
 (
e
 * 
q
);

128 ià(2 * 
p
 < (
mš1
 < 
mš2
 ? min1 : min2)) {

130 
e
 = 
d
; d = 
p
 / 
q
;

132 { 
d
 = 
m
; 
e
 = m; }

135 
a
 = 
b
; 
ç
 = 
fb
;

137 ià(
TM©h
::
	`Abs
(
d
è> 
tŞ
è
b
 += d;

138 
b
 +ğ(
m
 > 0 ? +
tŞ
 : -tol);

140 
fb
 = 
fM‘hod
->
	`G‘V®ueFÜRoÙ
Ğ
b
 ) - 
»fV®ue
;

145 
	`Log
(è<< 
kWARNING
 << "<RoÙ> maximum i‹¿tiÚ (" << 
fMaxI‹r


146 << "è»ached befÜcÚv”g’û" << 
Endl
;

148  
b
;

149 
	}
}

	@src/Rule.cxx

49 
	~"TMVA/RuË.h
"

51 
	~"TMVA/Ev’t.h
"

52 
	~"TMVA/M‘hodBa£.h
"

53 
	~"TMVA/M‘hodRuËF™.h
"

54 
	~"TMVA/MsgLogg”.h
"

55 
	~"TMVA/RuËCut.h
"

56 
	~"TMVA/RuËF™.h
"

57 
	~"TMVA/RuËEn£mbË.h
"

58 
	~"TMVA/ToŞs.h
"

59 
	~"TMVA/Ty³s.h
"

64 
	gTMVA
::
RuË
::RuËĞ
RuËEn£mbË
 *
»
,

65 cÚ¡ 
¡d
::
veùÜ
< cÚ¡ 
Node
 * >& 
nodes
 )

66 : 
fCut
 ( 0 )

67 , 
fNÜm
 ( 1.0 )

68 , 
fSuµÜt
 ( 0.0 )

69 , 
fSigma
 ( 0.0 )

70 , 
fCÛffic›Á
 ( 0.0 )

71 , 
fImpÜnû
 ( 0.0 )

72 , 
fImpÜnûRef
 ( 1.0 )

73 , 
fRuËEn£mbË
 ( 
»
 )

74 , 
fSSB
 ( 0 )

75 , 
fSSBNeve
 ( 0 )

76 , 
fLogg”
Ğ
Ãw
 
MsgLogg”
("RuleFit") )

84 
	gfCut
 = 
Ãw
 
RuËCut
Ğ
nodes
 );

85 
	gfSSB
 = 
fCut
->
G‘Pur™y
();

86 
	gfSSBNeve
 = 
fCut
->
G‘CutNeve
();

92 
	gTMVA
::
RuË
::
	$RuË
Ğ
RuËEn£mbË
 *
»
 )

93 : 
	`fCut
 ( 0 )

94 , 
	`fNÜm
 ( 1.0 )

95 , 
	`fSuµÜt
 ( 0.0 )

96 , 
	`fSigma
 ( 0.0 )

97 , 
	`fCÛffic›Á
 ( 0.0 )

98 , 
	`fImpÜnû
 ( 0.0 )

99 , 
	`fImpÜnûRef
 ( 1.0 )

100 , 
	`fRuËEn£mbË
 ( 
»
 )

101 , 
	`fSSB
 ( 0 )

102 , 
	`fSSBNeve
 ( 0 )

103 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

105 
	}
}

110 
	gTMVA
::
RuË
::
	$RuË
()

111 : 
	`fCut
 ( 0 )

112 , 
	`fNÜm
 ( 1.0 )

113 , 
	`fSuµÜt
 ( 0.0 )

114 , 
	`fSigma
 ( 0.0 )

115 , 
	`fCÛffic›Á
 ( 0.0 )

116 , 
	`fImpÜnû
 ( 0.0 )

117 , 
	`fImpÜnûRef
 ( 1.0 )

118 , 
	`fRuËEn£mbË
 ( 0 )

119 , 
	`fSSB
 ( 0 )

120 , 
	`fSSBNeve
 ( 0 )

121 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

123 
	}
}

128 
	gTMVA
::
RuË
::~
	$RuË
()

130 
d–‘e
 
fCut
;

131 
d–‘e
 
fLogg”
;

132 
	}
}

137 
BoŞ_t
 
	gTMVA
::
RuË
::
	$CÚšsV¬ŸbË
(
UIÁ_t
 
iv
) const

139 
BoŞ_t
 
found
 = 
kFALSE
;

140 
BoŞ_t
 
dÚeLoİ
 = 
kFALSE
;

141 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

142 
UIÁ_t
 
i
 = 0;

144 !
dÚeLoİ
) {

145 
found
 = (
fCut
->
	`G‘S–eùÜ
(
i
è=ğ
iv
);

146 
i
++;

147 
dÚeLoİ
 = (
found
 || (
i
==
nv¬s
));

149  
found
;

150 
	}
}

154 
	gTMVA
::
RuË
::
	$S‘MsgTy³
Ğ
EMsgTy³
 
t
 )

156 
fLogg”
->
	`S‘MšTy³
(
t
);

157 
	}
}

170 
BoŞ_t
 
	gTMVA
::
RuË
::
	$Equ®
ĞcÚ¡ 
RuË
& 
Ùh”
, 
BoŞ_t
 
u£CutV®ue
, 
DoubË_t
 
mšdi¡
 ) const

172 
BoŞ_t
 
rv®
=
kFALSE
;

173 ià(
mšdi¡
<0è
u£CutV®ue
=
kFALSE
;

174 
DoubË_t
 
d
 = 
	`RuËDi¡
Ğ
Ùh”
, 
u£CutV®ue
 );

176 ià(
u£CutV®ue
è
rv®
 = ( (!(
d
<0)è&& (d<
mšdi¡
) );

177 
rv®
 = (!(
d
<0));

179  
rv®
;

180 
	}
}

190 
DoubË_t
 
	gTMVA
::
RuË
::
	$RuËDi¡
ĞcÚ¡ 
RuË
& 
Ùh”
, 
BoŞ_t
 
u£CutV®ue
 ) const

192 ià(
fCut
->
	`G‘Nv¬s
()!=
Ùh”
.
	`G‘RuËCut
()->GetNvars())  -1.0;

194 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

196 
IÁ_t
 
£l
;

197 
DoubË_t
 
rms
;

198 
DoubË_t
 
smš
;

199 
DoubË_t
 
smax
;

200 
DoubË_t
 
vmšA
,
vmaxA
;

201 
DoubË_t
 
vmšB
,
vmaxB
;

208 
UIÁ_t
 
š
 = 0;

209 
DoubË_t
 
sumdc2
 = 0;

210 
BoŞ_t
 
equ®
 = 
Œue
;

212 cÚ¡ 
RuËCut
 *
Ùh”Cut
 = 
Ùh”
.
	`G‘RuËCut
();

213 (
equ®
è&& (
š
<
nv¬s
)) {

215 
equ®
 = ( (
fCut
->
	`G‘S–eùÜ
(
š
è=ğ(
Ùh”Cut
->GetSelector(in))) &&

216 (
fCut
->
	`G‘CutDoMš
(
š
è=ğ(
Ùh”Cut
->GetCutDoMin(in))) &&

217 (
fCut
->
	`G‘CutDoMax
(
š
è=ğ(
Ùh”Cut
->GetCutDoMax(in))) );

219 ià(
equ®
) {

220 ià(
u£CutV®ue
) {

221 
£l
 = 
fCut
->
	`G‘S–eùÜ
(
š
);

222 
vmšA
 = 
fCut
->
	`G‘CutMš
(
š
);

223 
vmaxA
 = 
fCut
->
	`G‘CutMax
(
š
);

224 
vmšB
 = 
Ùh”
.
	`G‘RuËCut
()->
	`G‘CutMš
(
š
);

225 
vmaxB
 = 
Ùh”
.
	`G‘RuËCut
()->
	`G‘CutMax
(
š
);

227 
rms
 = 
fRuËEn£mbË
->
	`G‘RuËF™
()->
	`G‘M‘hodBa£
()->
	`G‘RMS
(
£l
);

228 
smš
=0;

229 
smax
=0;

230 ià(
fCut
->
	`G‘CutDoMš
(
š
))

231 
smš
 = ( 
rms
>0 ? (
vmšA
-
vmšB
)/rms : 0 );

232 ià(
fCut
->
	`G‘CutDoMax
(
š
))

233 
smax
 = ( 
rms
>0 ? (
vmaxA
-
vmaxB
)/rms : 0 );

234 
sumdc2
 +ğ
smš
*smš + 
smax
*smax;

238 
š
++;

240 ià(!
u£CutV®ue
è
sumdc2
 = (
equ®
 ? 0.0:-1.0);

241 
sumdc2
 = (
equ®
 ? 
	`sq¹
(sumdc2) : -1.0);

243  
sumdc2
;

244 
	}
}

249 
BoŞ_t
 
	gTMVA
::
RuË
::
İ”©Ü
==ĞcÚ¡ RuË& 
Ùh”
 ) const

251  
this
->
Equ®
Ğ
Ùh”
, 
kTRUE
, 1e-3 );

257 
BoŞ_t
 
	gTMVA
::
RuË
::
İ”©Ü
<ĞcÚ¡ RuË& 
Ùh”
 ) const

259  (
fImpÜnû
 < 
Ùh”
.
G‘ImpÜnû
());

265 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<< ( 
¡d
::o¡»am& 
os
, cÚ¡ 
	gRuË
& 
	gruË
 )

267 
	gruË
.
Pršt
Ğ
os
 );

268  
	gos
;

274 cÚ¡ 
	gTSŒšg
 & 
	gTMVA
::
RuË
::
	$G‘V¬Name
Ğ
IÁ_t
 
i
 ) const

276  
fRuËEn£mbË
->
	`G‘M‘hodBa£
()->
	`G‘IÅutLab–
(
i
);

277 
	}
}

282 
	gTMVA
::
RuË
::
	$Cİy
ĞcÚ¡ 
RuË
& 
Ùh”
 )

284 if(
this
 !ğ&
Ùh”
) {

285 
	`S‘RuËEn£mbË
Ğ
Ùh”
.
	`G‘RuËEn£mbË
() );

286 
fCut
 = 
Ãw
 
	`RuËCut
Ğ*(
Ùh”
.
	`G‘RuËCut
()) );

287 
fSSB
 = 
Ùh”
.
	`G‘SSB
();

288 
fSSBNeve
 = 
Ùh”
.
	`G‘SSBNeve
();

289 
	`S‘CÛffic›Á
(
Ùh”
.
	`G‘CÛffic›Á
());

290 
	`S‘SuµÜt
Ğ
Ùh”
.
	`G‘SuµÜt
() );

291 
	`S‘Sigma
Ğ
Ùh”
.
	`G‘Sigma
() );

292 
	`S‘NÜm
Ğ
Ùh”
.
	`G‘NÜm
() );

293 
	`C®cImpÜnû
();

294 
	`S‘ImpÜnûRef
Ğ
Ùh”
.
	`G‘ImpÜnûRef
() );

296 
	}
}

301 
	gTMVA
::
RuË
::
	$Pršt
Ğ
¡d
::
o¡»am
& 
os
 ) const

303 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

304 ià(
nv¬s
<1è
os
 << " *** WARNING - <EMPTY RULE> ***" << 
¡d
::
’dl
;

306 
IÁ_t
 
£l
;

307 
DoubË_t
 
v®mš
, 
v®max
;

309 
os
 << " ImpÜnû = " << 
	`FÜm
("%1.4f", 
fImpÜnû
/
fImpÜnûRef
è<< 
¡d
::
’dl
;

310 
os
 << " CÛffic›Á = " << 
	`FÜm
("%1.4f", 
fCÛffic›Á
è<< 
¡d
::
’dl
;

311 
os
 << " SuµÜˆ = " << 
	`FÜm
("%1.4f", 
fSuµÜt
è<< 
¡d
::
’dl
;

312 
os
 << " S/(S+Bè = " << 
	`FÜm
("%1.4f", 
fSSB
è<< 
¡d
::
’dl
;

314  
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

315 
os
 << " ";

316 
£l
 = 
fCut
->
	`G‘S–eùÜ
(
i
);

317 
v®mš
 = 
fCut
->
	`G‘CutMš
(
i
);

318 
v®max
 = 
fCut
->
	`G‘CutMax
(
i
);

320 
os
 << 
	`FÜm
("* Cuˆ%2d",
i
+1è<< " : " << 
¡d
::
æush
;

321 ià(
fCut
->
	`G‘CutDoMš
(
i
)è
os
 << 
	`FÜm
("%10.3g",
v®mš
è<< " < " << 
¡d
::
æush
;

322 
os
 << " " << 
¡d
::
æush
;

323 
os
 << 
	`G‘V¬Name
(
£l
è<< 
¡d
::
æush
;

324 ià(
fCut
->
	`G‘CutDoMax
(
i
)è
os
 << " < " << 
	`FÜm
("%10.3g",
v®max
è<< 
¡d
::
æush
;

325 
os
 << " " << 
¡d
::
æush
;

326 
os
 << 
¡d
::
’dl
;

328 
	}
}

333 
	gTMVA
::
RuË
::
	$PrštLogg”
(cÚ¡ *
t™Ë
) const

335 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

336 ià(
nv¬s
<1è
	`Log
(è<< 
kWARNING
 << "BUG TRAP: EMPTY RULE!!!" << 
Endl
;

338 
IÁ_t
 
£l
;

339 
DoubË_t
 
v®mš
, 
v®max
;

341 ià(
t™Ë
è
	`Log
(è<< 
kINFO
 <<itle;

342 
	`Log
(è<< 
kINFO


343 << "ImpÜnû = " << 
	`FÜm
("%1.4f", 
fImpÜnû
/
fImpÜnûRef
è<< 
Endl
;

345  
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

347 
	`Log
(è<< 
kINFO
 << " ";

348 
£l
 = 
fCut
->
	`G‘S–eùÜ
(
i
);

349 
v®mš
 = 
fCut
->
	`G‘CutMš
(
i
);

350 
v®max
 = 
fCut
->
	`G‘CutMax
(
i
);

352 
	`Log
(è<< 
kINFO
 << 
	`FÜm
("Cuˆ%2d",
i
+1) << " : ";

353 ià(
fCut
->
	`G‘CutDoMš
(
i
)è
	`Log
(è<< 
kINFO
 << 
	`FÜm
("%10.3g",
v®mš
) << " < ";

354 
	`Log
(è<< 
kINFO
 << " ";

355 
	`Log
(è<< 
kINFO
 << 
	`G‘V¬Name
(
£l
);

356 ià(
fCut
->
	`G‘CutDoMax
(
i
)è
	`Log
(è<< 
kINFO
 << " < " << 
	`FÜm
("%10.3g",
v®max
);

357 
	`Log
(è<< 
kINFO
 << " ";

358 
	`Log
(è<< 
Endl
;

360 
	}
}

365 
	gTMVA
::
RuË
::
	$PrštRaw
Ğ
¡d
::
o¡»am
& 
os
 ) const

367 
IÁ_t
 
dp
 = 
os
.
	`´ecisiÚ
();

368 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

369 
os
 << "Parameters: "

370 << 
¡d
::
	`£»cisiÚ
(10)

371 << 
fImpÜnû
 << " "

372 << 
fImpÜnûRef
 << " "

373 << 
fCÛffic›Á
 << " "

374 << 
fSuµÜt
 << " "

375 << 
fSigma
 << " "

376 << 
fNÜm
 << " "

377 << 
fSSB
 << " "

378 << 
fSSBNeve
 << " "

379 << 
¡d
::
’dl
; \

380 
os
 << "N(cuts): " << 
nv¬s
 << 
¡d
::
’dl
;

381  
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

382 
os
 << "Cuˆ" << 
i
 << " : " << 
¡d
::
æush
;

383 
os
 << 
fCut
->
	`G‘S–eùÜ
(
i
)

384 << 
¡d
::
	`£»cisiÚ
(10)

385 << " " << 
fCut
->
	`G‘CutMš
(
i
)

386 << " " << 
fCut
->
	`G‘CutMax
(
i
)

387 << " " << (
fCut
->
	`G‘CutDoMš
(
i
) ? "T":"F")

388 << " " << (
fCut
->
	`G‘CutDoMax
(
i
) ? "T":"F")

389 << 
¡d
::
’dl
;

391 
os
 << 
¡d
::
	`£»cisiÚ
(
dp
);

392 
	}
}

396 * 
	gTMVA
::
RuË
::
	$AddXMLTo
Ğ* 
·»Á
 ) const

398 * 
ruË
 = 
	`gToŞs
().
	`AddChd
Ğ
·»Á
, "Rule" );

399 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fCut
->
	`G‘Nv¬s
();

401 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "ImpÜnû", 
fImpÜnû
 );

402 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "Ref", 
fImpÜnûRef
 );

403 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "CÛff", 
fCÛffic›Á
 );

404 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "SuµÜt", 
fSuµÜt
 );

405 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "Sigma", 
fSigma
 );

406 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "NÜm", 
fNÜm
 );

407 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "SSB", 
fSSB
 );

408 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "SSBNeve", 
fSSBNeve
 );

409 
	`gToŞs
().
	`AddA‰r
Ğ
ruË
, "Nv¬s", 
nv¬s
 );

411 
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

412 * 
cut
 = 
	`gToŞs
().
	`AddChd
Ğ
ruË
, "Cut" );

413 
	`gToŞs
().
	`AddA‰r
Ğ
cut
, "S–eùÜ", 
fCut
->
	`G‘S–eùÜ
(
i
) );

414 
	`gToŞs
().
	`AddA‰r
Ğ
cut
, "Mš", 
fCut
->
	`G‘CutMš
(
i
) );

415 
	`gToŞs
().
	`AddA‰r
Ğ
cut
, "Max", 
fCut
->
	`G‘CutMax
(
i
) );

416 
	`gToŞs
().
	`AddA‰r
Ğ
cut
, "DoMš", (
fCut
->
	`G‘CutDoMš
(
i
) ? "T":"F") );

417 
	`gToŞs
().
	`AddA‰r
Ğ
cut
, "DoMax", (
fCut
->
	`G‘CutDoMax
(
i
) ? "T":"F") );

420  
ruË
;

421 
	}
}

426 
	gTMVA
::
RuË
::
	$R—dFromXML
Ğ* 
wghŠode
 )

428 
TSŒšg
 
nodeName
 = 
	`TSŒšg
Ğ
	`gToŞs
().
	`G‘Name
(
wghŠode
) );

429 ià(
nodeName
 !ğ"RuË"è
	`Log
(è<< 
kFATAL
 << "<R—dFromXML> UÃx³ùed‚odÇme: " <<‚odeNam<< 
Endl
;

431 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "ImpÜnû", 
fImpÜnû
 );

432 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Ref", 
fImpÜnûRef
 );

433 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "CÛff", 
fCÛffic›Á
 );

434 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "SuµÜt", 
fSuµÜt
 );

435 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Sigma", 
fSigma
 );

436 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NÜm", 
fNÜm
 );

437 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "SSB", 
fSSB
 );

438 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "SSBNeve", 
fSSBNeve
 );

440 
UIÁ_t
 
nv¬s
;

441 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Nv¬s", 
nv¬s
 );

442 ià(
fCut
è
d–‘e
 fCut;

443 
fCut
 = 
Ãw
 
	`RuËCut
();

444 
fCut
->
	`S‘Nv¬s
Ğ
nv¬s
 );

447 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
wghŠode
 );

448 
UIÁ_t
 
i
 = 0;

449 
UIÁ_t
 
ui
;

450 
DoubË_t
 
d
;

451 
Ch¬_t
 
c
;

452 
ch
) {

453 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "S–eùÜ", 
ui
 );

454 
fCut
->
	`S‘S–eùÜ
Ğ
i
, 
ui
 );

455 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Mš", 
d
 );

456 
fCut
->
	`S‘CutMš
 ( 
i
, 
d
 );

457 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "Max", 
d
 );

458 
fCut
->
	`S‘CutMax
 ( 
i
, 
d
 );

459 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "DoMš", 
c
 );

460 
fCut
->
	`S‘CutDoMš
Ğ
i
, (
c
 =ğ'T' ? 
kTRUE
 : 
kFALSE
 ) );

461 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "DoMax", 
c
 );

462 
fCut
->
	`S‘CutDoMax
Ğ
i
, (
c
 =ğ'T' ? 
kTRUE
 : 
kFALSE
 ) );

464 
i
++;

465 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

469 ià(
i
 !ğ
nv¬s
è
	`Log
(è<< 
kFATAL
 << "<R—dFromXML> Mism©ch iÀnumb” oàcuts: " << i << " !ğ" <<‚v¬ << 
Endl
;

470 
	}
}

475 
	gTMVA
::
RuË
::
	$R—dRaw
Ğ
¡d
::
i¡»am
& 
i¡r
 )

477 
TSŒšg
 
dummy
;

478 
UIÁ_t
 
nv¬s
;

479 
i¡r
 >> 
dummy


480 >> 
fImpÜnû


481 >> 
fImpÜnûRef


482 >> 
fCÛffic›Á


483 >> 
fSuµÜt


484 >> 
fSigma


485 >> 
fNÜm


486 >> 
fSSB


487 >> 
fSSBNeve
;

489 
i¡r
 >> 
dummy
 >> 
nv¬s
;

490 
DoubË_t
 
cutmš
,
cutmax
;

491 
UIÁ_t
 
£l
,
idum
;

492 
Ch¬_t
 
bA
, 
bB
;

494 ià(
fCut
è
d–‘e
 fCut;

495 
fCut
 = 
Ãw
 
	`RuËCut
();

496 
fCut
->
	`S‘Nv¬s
Ğ
nv¬s
 );

497  
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

498 
i¡r
 >> 
dummy
 >> 
idum
;

499 
i¡r
 >> 
dummy
;

500 
i¡r
 >> 
£l
 >> 
cutmš
 >> 
cutmax
 >> 
bA
 >> 
bB
;

501 
fCut
->
	`S‘S–eùÜ
(
i
,
£l
);

502 
fCut
->
	`S‘CutMš
(
i
,
cutmš
);

503 
fCut
->
	`S‘CutMax
(
i
,
cutmax
);

504 
fCut
->
	`S‘CutDoMš
(
i
,(
bA
=='T' ? 
kTRUE
:
kFALSE
));

505 
fCut
->
	`S‘CutDoMax
(
i
,(
bB
=='T' ? 
kTRUE
:
kFALSE
));

507 
	}
}

	@src/RuleCut.cxx

30 
	~<®gÜ™hm
>

31 
	~<li¡
>

33 
	~"TMVA/RuËCut.h
"

34 
	~"TMVA/DecisiÚT»e.h
"

35 
	~"TMVA/MsgLogg”.h
"

40 
	gTMVA
::
RuËCut
::RuËCutĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Node
*> & 
nodes
 )

41 : 
fCutNeve
(0),

42 
fPur™y
(0),

43 
fLogg”
(
Ãw
 
MsgLogg”
("RuleFit"))

45 
MakeCuts
Ğ
nodes
 );

51 
	gTMVA
::
RuËCut
::
	$RuËCut
()

52 : 
	`fCutNeve
(0),

53 
	`fPur™y
(0),

54 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("RuleFit"))

56 
	}
}

61 
	gTMVA
::
RuËCut
::~
	$RuËCut
() {

62 
d–‘e
 
fLogg”
;

63 
	}
}

69 
	gTMVA
::
RuËCut
::
MakeCuts
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Node
*> & 
nodes
 )

72 
UIÁ_t
 
Âodes
 = 
nodes
.
size
();

73 ià(
	gÂodes
<2) {

74 
Log
(è<< 
	gkWARNING
 << "<MakeCuts()> Em±y cuˆü—‹d." << 
	gEndl
;

79 cÚ¡ 
DecisiÚT»eNode
* 
	gdŠ
 = 
dyÇmic_ÿ¡
<cÚ¡ DecisiÚT»eNode*>(
nodes
.
back
());

80 if(!
	gdŠ
) ;

81 
	gfCutNeve
 = 
dŠ
->
G‘NEv’ts
();

82 
	gfPur™y
 = 
dŠ
->
G‘Pur™y
();

85 
	g¡d
::
	t·œ
<
	tDoubË_t
,
	tIÁ_t
> 
	tCutDœ_t
;

86 
	g¡d
::
	t·œ
<
	tIÁ_t
,
	tCutDœ_t
> 
	tS–Cut_t
;

89 
	gfS–eùÜ
.
ş—r
();

90 
	gfCutMš
.
ş—r
();

91 
	gfCutMax
.
ş—r
();

92 
	gfCutDoMš
.
ş—r
();

93 
	gfCutDoMax
.
ş—r
();

97 
	g¡d
::
li¡
<
S–Cut_t
> 
®l£l
;

98 
IÁ_t
 
	g£l
;

99 
DoubË_t
 
	gv®
;

100 
IÁ_t
 
	gdœ
;

101 cÚ¡ 
Node
 *
	gÃxtNode
;

102  
UIÁ_t
 
	gi
=0; i<
	gÂodes
-1; i++) {

103 
	gÃxtNode
 = 
nodes
[
i
+1];

104 cÚ¡ 
DecisiÚT»eNode
* 
	gdŠ_
 = 
dyÇmic_ÿ¡
<cÚ¡ DecisiÚT»eNode*>(
nodes
[
i
]);

105 if(!
	gdŠ_
) ;

106 
	g£l
 = 
dŠ_
->
G‘S–eùÜ
();

107 
	gv®
 = 
dŠ_
->
G‘CutV®ue
();

108 ià(
	gnodes
[
i
]->
G‘Right
(è=ğ
ÃxtNode
) {

109 
dœ
 = 1;

111 ià(
	gnodes
[
i
]->
G‘Leá
(è=ğ
ÃxtNode
) {

112 
dœ
 = -1;

115 
Log
(è<< 
	gkFATAL
 << "<MakeTheRuË> BUG! Should‚Ù bh”-‡À’d-nodbefÜth’d!" << 
	gEndl
;

116 
	gdœ
 = 0;

118 
	g®l£l
.
push_back
(
S–Cut_t
(
£l
,
CutDœ_t
(
v®
,
dœ
)));

121 
	g®l£l
.
sÜt
();

122 
IÁ_t
 
	g´evS–
=-1;

123 
IÁ_t
 
	gn£l
=0;

124 
BoŞ_t
 
	gfœ¡Mš
=
kTRUE
;

125 
BoŞ_t
 
	gfœ¡Max
=
kTRUE
;

126  
	g¡d
::
li¡
<
S–Cut_t
>::
cÚ¡_™”©Ü
 
™
 = 
®l£l
.
begš
(); 
	g™
!÷Î£l.
’d
(); it++ ) {

127 
	g£l
 = (*
™
).
fœ¡
;

128 
	gv®
 = (*
™
).
£cÚd
.
fœ¡
;

129 
	gdœ
 = (*
™
).
£cÚd
.second;

130 ià(
	g£l
!=
´evS–
) {

131 
fœ¡Mš
 = 
kTRUE
;

132 
	gfœ¡Max
 = 
kTRUE
;

133 
	gn£l
++;

134 
	gfS–eùÜ
.
push_back
(
£l
);

135 
	gfCutMš
.
»size
Ğ
fS–eùÜ
.
size
(),0);

136 
	gfCutMax
.
»size
Ğ
fS–eùÜ
.
size
(),0);

137 
	gfCutDoMš
.
»size
Ğ
fS–eùÜ
.
size
(), 
kFALSE
);

138 
	gfCutDoMax
.
»size
Ğ
fS–eùÜ
.
size
(), 
kFALSE
);

140  
	gdœ
 ) {

142 ià((
v®
<
fCutMš
[
n£l
-1]è|| 
fœ¡Mš
) {

143 
fCutMš
[
n£l
-1] = 
v®
;

144 
	gfCutDoMš
[
n£l
-1] = 
kTRUE
;

145 
	gfœ¡Mš
 = 
kFALSE
;

149 ià((
v®
>
fCutMax
[
n£l
-1]è|| 
fœ¡Max
) {

150 
fCutMax
[
n£l
-1] = 
v®
;

151 
	gfCutDoMax
[
n£l
-1] = 
kTRUE
;

152 
	gfœ¡Max
 = 
kFALSE
;

157 
	g´evS–
 = 
£l
;

164 
UIÁ_t
 
	gTMVA
::
RuËCut
::
	$G‘Ncuts
() const

166 
UIÁ_t
 
rv®
=0;

167 
UIÁ_t
 
i
=0; i<
fS–eùÜ
.
	`size
(); i++) {

168 ià(
fCutDoMš
[
i
]è
rv®
 += 1;

169 ià(
fCutDoMax
[
i
]è
rv®
 += 1;

171  
rv®
;

172 
	}
}

176 
BoŞ_t
 
	gTMVA
::
RuËCut
::
	$G‘CutRªge
(
IÁ_t
 
£l
,
DoubË_t
 &
rmš
, DoubË_ˆ&
rmax
, 
BoŞ_t
 &
dÜmš
, BoŞ_ˆ&
dÜmax
) const

178 
dÜmš
=
kFALSE
;

179 
dÜmax
=
kFALSE
;

180 
BoŞ_t
 
dÚe
=
kFALSE
;

181 
BoŞ_t
 
foundIt
=
kFALSE
;

182 
UIÁ_t
 
šd
=0;

183 !
dÚe
) {

184 
foundIt
 = (
	`IÁ_t
(
fS–eùÜ
[
šd
])==
£l
);

185 
šd
++;

186 
dÚe
 = (
foundIt
 || (
šd
==
fS–eùÜ
.
	`size
()));

188 ià(!
foundIt
è 
kFALSE
;

189 
rmš
 = 
fCutMš
[
šd
-1];

190 
rmax
 = 
fCutMax
[
šd
-1];

191 
dÜmš
 = 
fCutDoMš
[
šd
-1];

192 
dÜmax
 = 
fCutDoMax
[
šd
-1];

193  
kTRUE
;

194 
	}
}

	@src/RuleEnsemble.cxx

33 
	~"TMVA/RuËEn£mbË.h
"

35 
	~"TMVA/D©aS‘Info.h
"

36 
	~"TMVA/DecisiÚT»e.h
"

37 
	~"TMVA/Ev’t.h
"

38 
	~"TMVA/M‘hodBa£.h
"

39 
	~"TMVA/M‘hodRuËF™.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/RuËF™.h
"

42 
	~"TMVA/ToŞs.h
"

43 
	~"TMVA/Ty³s.h
"

45 
	~"TRªdom3.h
"

46 
	~"TH1F.h
"

48 
	~<®gÜ™hm
>

49 
	~<c¡dlib
>

50 
	~<iomª
>

51 
	~<li¡
>

56 
	gTMVA
::
RuËEn£mbË
::
	$RuËEn£mbË
Ğ
RuËF™
 *
rf
 )

57 : 
	`fL—ºšgMod–
 ( 
kFuÎ
 )

58 , 
	`fImpÜnûCut
 ( 0 )

59 , 
	`fLšQuªte
 ( 0.025 )

60 , 
	`fOff£t
 ( 0 )

61 , 
	`fAv”ageSuµÜt
 ( 0.8 )

62 , 
	`fAv”ageRuËSigma
( 0.4 )

63 , 
	`fRuËFSig
 ( 0 )

64 , 
	`fRuËNCave
 ( 0 )

65 , 
	`fRuËNCsig
 ( 0 )

66 , 
	`fRuËMšDi¡
 ( 1e-3 )

67 , 
	`fNRuËsG’”©ed
 ( 0 )

68 , 
	`fEv’t
 ( 0 )

69 , 
	`fEv’tCacheOK
 ( 
Œue
 )

70 , 
	`fRuËM­OK
 ( 
Œue
 )

71 , 
	`fRuËM­Ind0
 ( 0 )

72 , 
	`fRuËM­Ind1
 ( 0 )

73 , 
	`fRuËM­Ev’ts
 ( 0 )

74 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

76 
	`In™Ÿlize
Ğ
rf
 );

77 
	}
}

82 
	gTMVA
::
RuËEn£mbË
::
	$RuËEn£mbË
ĞcÚ¡ 
RuËEn£mbË
& 
Ùh”
 )

83 : 
	`fAv”ageSuµÜt
 ( 1 )

84 , 
	`fEv’t
(0)

85 , 
	`fRuËM­Ev’ts
(0)

86 , 
	`fRuËF™
(0)

87 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

89 
	`Cİy
Ğ
Ùh”
 );

90 
	}
}

95 
	gTMVA
::
RuËEn£mbË
::
	$RuËEn£mbË
()

96 : 
	`fL—ºšgMod–
 ( 
kFuÎ
 )

97 , 
	`fImpÜnûCut
 ( 0 )

98 , 
	`fLšQuªte
 ( 0.025 )

99 , 
	`fOff£t
 ( 0 )

100 , 
	`fImpÜnûRef
 ( 1.0 )

101 , 
	`fAv”ageSuµÜt
 ( 0.8 )

102 , 
	`fAv”ageRuËSigma
( 0.4 )

103 , 
	`fRuËFSig
 ( 0 )

104 , 
	`fRuËNCave
 ( 0 )

105 , 
	`fRuËNCsig
 ( 0 )

106 , 
	`fRuËMšDi¡
 ( 1e-3 )

107 , 
	`fNRuËsG’”©ed
 ( 0 )

108 , 
	`fEv’t
 ( 0 )

109 , 
	`fEv’tCacheOK
 ( 
Œue
 )

110 , 
	`fRuËM­OK
 ( 
Œue
 )

111 , 
	`fRuËM­Ind0
 ( 0 )

112 , 
	`fRuËM­Ind1
 ( 0 )

113 , 
	`fRuËM­Ev’ts
 ( 0 )

114 , 
	`fRuËF™
 ( 0 )

115 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

117 
	}
}

122 
	gTMVA
::
RuËEn£mbË
::~
	$RuËEn£mbË
()

124  
¡d
::
veùÜ
<
RuË
 *>::
™”©Ü
 
™rRuË
 = 
fRuËs
.
	`begš
(); iŒRuË !ğfRuËs.
	`’d
(); itrRule++ ) {

125 
d–‘e
 *
™rRuË
;

128 
d–‘e
 
fLogg”
;

129 
	}
}

134 
	gTMVA
::
RuËEn£mbË
::
	$In™Ÿlize
ĞcÚ¡ 
RuËF™
 *
rf
 )

136 
	`S‘Av”ageRuËSigma
(0.4);

137 
fRuËF™
 = 
rf
;

138 
UIÁ_t
 
nv¬s
 = 
	`G‘M‘hodBa£
()->
	`G‘Nv¬
();

139 
fV¬ImpÜnû
.
	`ş—r
();

140 
fLšPDFB
.
	`ş—r
();

141 
fLšPDFS
.
	`ş—r
();

143 
fV¬ImpÜnû
.
	`»size
Ğ
nv¬s
,0.0 );

144 
fLšPDFB
.
	`»size
Ğ
nv¬s
,0 );

145 
fLšPDFS
.
	`»size
Ğ
nv¬s
,0 );

146 
fImpÜnûRef
 = 1.0;

147 
UIÁ_t
 
i
=0; i<
nv¬s
; i++) {

148 
fLšT”mOK
.
	`push_back
(
kTRUE
);

150 
	}
}

154 
	gTMVA
::
RuËEn£mbË
::
	$S‘MsgTy³
Ğ
EMsgTy³
 
t
 ) {

155 
fLogg”
->
	`S‘MšTy³
(
t
);

156 
	}
}

162 cÚ¡ 
	gTMVA
::
M‘hodRuËF™
* 
TMVA
::
RuËEn£mbË
::
	$G‘M‘hodRuËF™
() const

164  ( 
fRuËF™
==0 ? 0:fRuËF™->
	`G‘M‘hodRuËF™
());

165 
	}
}

171 cÚ¡ 
	gTMVA
::
M‘hodBa£
* 
TMVA
::
RuËEn£mbË
::
	$G‘M‘hodBa£
() const

173  ( 
fRuËF™
==0 ? 0:fRuËF™->
	`G‘M‘hodBa£
());

174 
	}
}

179 
	gTMVA
::
RuËEn£mbË
::
	$MakeMod–
()

181 
	`MakeRuËs
Ğ
fRuËF™
->
	`G‘FÜe¡
() );

183 
	`MakeLš—rT”ms
();

185 
	`MakeRuËM­
();

187 
	`C®cRuËSuµÜt
();

189 
	`RuËSti¡ics
();

191 
	`PrštRuËG’
();

192 
	}
}

198 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$CÛffic›ÁRadius
()

200 
IÁ_t
 
ncÛffs
 = 
fRuËs
.
	`size
();

201 ià(
ncÛffs
<1)  0;

203 
DoubË_t
 
sum2
=0;

204 
DoubË_t
 
v®
;

205 
IÁ_t
 
i
=0; i<
ncÛffs
; i++) {

206 
v®
 = 
fRuËs
[
i
]->
	`G‘CÛffic›Á
();

207 
sum2
 +ğ
v®
*val;

209  
sum2
;

210 
	}
}

215 
	gTMVA
::
RuËEn£mbË
::
	$Re£tCÛffic›Ás
()

217 
fOff£t
 = 0.0;

218 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

219 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++) {

220 
fRuËs
[
i
]->
	`S‘CÛffic›Á
(0.0);

222 
	}
}

227 
	gTMVA
::
RuËEn£mbË
::
S‘CÛffic›Ás
ĞcÚ¡ 
¡d
::
veùÜ
< 
DoubË_t
 > & 
v
 )

229 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
size
();

230 ià(
	gv
.
size
()!=
ÄuËs
) {

231 
Log
(è<< 
kFATAL
 << "<S‘CÛffic›Ás> - BUG TRAP - iÅuˆveùÜ wrÚg size! Iˆi ğ" << 
v
.
size
()

232 << " wh’ iˆshould bğ" << 
ÄuËs
 << 
Endl
;

234 
UIÁ_t
 
	gi
=0; i<
	gÄuËs
; i++) {

235 
	gfRuËs
[
i
]->
S‘CÛffic›Á
(
v
[i]);

242 
	gTMVA
::
RuËEn£mbË
::
G‘CÛffic›Ás
Ğ
¡d
::
veùÜ
< 
DoubË_t
 > & 
v
 )

244 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
size
();

245 
	gv
.
»size
(
ÄuËs
);

246 ià(
	gÄuËs
==0) ;

248 
UIÁ_t
 
	gi
=0; i<
	gÄuËs
; i++) {

249 
	gv
[
i
] = (
fRuËs
[i]->
G‘CÛffic›Á
());

256 cÚ¡ 
	g¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*>* TMVA::
RuËEn£mbË
::
	$G‘T¿ššgEv’ts
() const

258  &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

259 
	}
}

264 cÚ¡ 
	gTMVA
::
Ev’t
 * 
TMVA
::
RuËEn£mbË
::
	$G‘T¿ššgEv’t
(
UIÁ_t
 
i
) const

266  
fRuËF™
->
	`G‘T¿ššgEv’t
(
i
);

267 
	}
}

272 
	gTMVA
::
RuËEn£mbË
::
	$RemoveSim¬RuËs
()

274 
	`Log
(è<< 
kVERBOSE
 << "Removšg sim¬„uËs; di¡ªû = " << 
fRuËMšDi¡
 << 
Endl
;

276 
UIÁ_t
 
ÄuËsIn
 = 
fRuËs
.
	`size
();

277 
TMVA
::
RuË
 *
fœ¡
, *
£cÚd
;

278 
¡d
::
veùÜ
< 
Ch¬_t
 > 
	`»moveMe
Ğ
ÄuËsIn
,
çl£
 );

280 
IÁ_t
 
Äem
 = 0;

281 
IÁ_t
 
»mšd
=-1;

282 
DoubË_t
 
r
;

284 
UIÁ_t
 
i
=0; i<
ÄuËsIn
; i++) {

285 ià(!
»moveMe
[
i
]) {

286 
fœ¡
 = 
fRuËs
[
i
];

287 
UIÁ_t
 
k
=
i
+1; k<
ÄuËsIn
; k++) {

288 ià(!
»moveMe
[
k
]) {

289 
£cÚd
 = 
fRuËs
[
k
];

290 
BoŞ_t
 
equ®
 = 
fœ¡
->
	`Equ®
(*
£cÚd
,
kTRUE
,
fRuËMšDi¡
);

291 ià(
equ®
) {

292 
r
 = 
gRªdom
->
	`Rndm
();

293 
»mšd
 = (
r
>0.5 ? 
k
:
i
);

296 
»mšd
 = -1;

299 ià(
»mšd
>-1) {

300 ià(!
»moveMe
[
»mšd
]) {

301 
»moveMe
[
»mšd
] = 
Œue
;

302 
Äem
++;

309 
UIÁ_t
 
šd
 = 0;

310 
RuË
 *
theRuË
;

311 
UIÁ_t
 
i
=0; i<
ÄuËsIn
; i++) {

312 ià(
»moveMe
[
i
]) {

313 
theRuË
 = 
fRuËs
[
šd
];

314 #ià
_MSC_VER
 >= 1400

315 
fRuËs
.
	`”a£
Ğ
¡d
::
veùÜ
<
RuË
 *>::
	`™”©Ü
(&fRuËs[
šd
], &fRules) );

317 
fRuËs
.
	`”a£
ĞfRuËs.
	`begš
(è+ 
šd
 );

319 
d–‘e
 
theRuË
;

320 
šd
--;

322 
šd
++;

324 
UIÁ_t
 
ÄuËsOut
 = 
fRuËs
.
	`size
();

325 
	`Log
(è<< 
kVERBOSE
 << "Removed " << 
ÄuËsIn
 - 
ÄuËsOut
 << " ouˆoà" <<‚ruËsIÀ<< "„uËs" << 
Endl
;

326 
	}
}

331 
	gTMVA
::
RuËEn£mbË
::
	$CËªupRuËs
()

333 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

334 ià(
ÄuËs
==0) ;

335 
	`Log
(è<< 
kVERBOSE
 << "Removšg„uË w™h„–©ivimpÜnû < " << 
fImpÜnûCut
 << 
Endl
;

336 ià(
fImpÜnûCut
<=0) ;

340 
RuË
 *
th”uË
;

341 
IÁ_t
 
šd
=0;

342 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++) {

343 ià(
fRuËs
[
šd
]->
	`G‘R–ImpÜnû
()<
fImpÜnûCut
) {

344 
th”uË
 = 
fRuËs
[
šd
];

345 #ià
_MSC_VER
 >= 1400

346 
fRuËs
.
	`”a£
Ğ
¡d
::
veùÜ
<
RuË
 *>::
	`™”©Ü
(&fRuËs[
šd
], &fRules) );

348 
fRuËs
.
	`”a£
ĞfRuËs.
	`begš
(è+ 
šd
 );

350 
d–‘e
 
th”uË
;

351 
šd
--;

353 
šd
++;

355 
	`Log
(è<< 
kINFO
 << "Removed " << 
ÄuËs
-
šd
 << " out of‡otal of " <<‚rules

356 << "„uË w™h impÜnû < " << 
fImpÜnûCut
 << 
Endl
;

357 
	}
}

362 
	gTMVA
::
RuËEn£mbË
::
	$CËªupLš—r
()

364 
UIÁ_t
 
Æš
 = 
fLšNÜm
.
	`size
();

365 ià(
Æš
==0) ;

366 
	`Log
(è<< 
kVERBOSE
 << "Removšg†š—¸‹rm w™h„–©ivimpÜnû < " << 
fImpÜnûCut
 << 
Endl
;

368 
fLšT”mOK
.
	`ş—r
();

369 
UIÁ_t
 
i
=0; i<
Æš
; i++) {

370 
fLšT”mOK
.
	`push_back
Ğ(
fLšImpÜnû
[
i
]/
fImpÜnûRef
 > 
fImpÜnûCut
) );

372 
	}
}

377 
	gTMVA
::
RuËEn£mbË
::
	$C®cRuËSuµÜt
()

379 
	`Log
(è<< 
kVERBOSE
 << "Ev®u©šg RuË suµÜt" << 
Endl
;

380 
DoubË_t
 
s
,
t
,
¡Ù
,
‰Ù
,
ssb
;

381 
DoubË_t
 
ssig
, 
sbkg
, 
ssum
;

382 
IÁ_t
 
šdruË
=0;

383 
¡Ù
 = 0;

384 
‰Ù
 = 0;

386 
	`S‘Av”ageRuËSigma
(0.4);

387 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = 
	`G‘T¿ššgEv’ts
();

388 
DoubË_t
 
ÄuËs
 = 
¡©ic_ÿ¡
<DoubË_t>(
fRuËs
.
	`size
());

389 
DoubË_t
 
ew
;

391 ià((
ÄuËs
>0è&& (
ev’ts
->
	`size
()>0)) {

392  
¡d
::
veùÜ
< 
RuË
 * >::
™”©Ü
 
™rRuË
=
fRuËs
.
	`begš
(); iŒRuË!=fRuËs.
	`’d
(); itrRule++ ) {

393 
s
=0.0;

394 
ssig
=0.0;

395 
sbkg
=0.0;

396  
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 * >::
cÚ¡_™”©Ü
 
™rEv’t
=
ev’ts
->
	`begš
(); iŒEv’t!óv’ts->
	`’d
(); itrEvent++ ) {

397 ià((*
™rRuË
)->
	`Ev®Ev’t
Ğ*(*
™rEv’t
) )) {

398 
ew
 = (*
™rEv’t
)->
	`G‘Weight
();

399 
s
 +ğ
ew
;

400 ià(
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(*
™rEv’t
)è
ssig
 +ğ
ew
;

401 
sbkg
 +ğ
ew
;

405 
s
 = s/
fRuËF™
->
	`G‘NEveEff
();

406 
t
 = 
s
*(1.0-s);

407 
t
 = (t<0 ? 0:
	`sq¹
(t));

408 
¡Ù
 +ğ
s
;

409 
‰Ù
 +ğ
t
;

410 
ssum
 = 
ssig
+
sbkg
;

411 
ssb
 = (
ssum
>0 ? 
	`DoubË_t
(
ssig
)/DoubË_t(ssig+
sbkg
) : 0.0 );

412 (*
™rRuË
)->
	`S‘SuµÜt
(
s
);

413 (*
™rRuË
)->
	`S‘NÜm
(
t
);

414 (*
™rRuË
)->
	`S‘SSB
Ğ
ssb
 );

415 (*
™rRuË
)->
	`S‘SSBNeve
(
	`DoubË_t
(
ssig
+
sbkg
));

416 
šdruË
++;

418 
fAv”ageSuµÜt
 = 
¡Ù
/
ÄuËs
;

419 
fAv”ageRuËSigma
 = 
TM©h
::
	`Sq¹
(
fAv”ageSuµÜt
*(1.0-fAverageSupport));

420 
	`Log
(è<< 
kVERBOSE
 << "Snd¬d devŸtiÚ oàsuµÜˆğ" << 
fAv”ageRuËSigma
 << 
Endl
;

421 
	`Log
(è<< 
kVERBOSE
 << "Av”agruË suµÜˆ = " << 
fAv”ageSuµÜt
 << 
Endl
;

423 
	}
}

428 
	gTMVA
::
RuËEn£mbË
::
	$C®cImpÜnû
()

430 
DoubË_t
 
maxRuËImp
 = 
	`C®cRuËImpÜnû
();

431 
DoubË_t
 
maxLšImp
 = 
	`C®cLšImpÜnû
();

432 
DoubË_t
 
maxImp
 = (
maxRuËImp
>
maxLšImp
 ? maxRuleImp : maxLinImp);

433 
	`S‘ImpÜnûRef
Ğ
maxImp
 );

434 
	}
}

439 
	gTMVA
::
RuËEn£mbË
::
	$S‘ImpÜnûRef
(
DoubË_t
 
im´ef
)

441  
UIÁ_t
 
i
=0; i<
fRuËs
.
	`size
(); i++ ) {

442 
fRuËs
[
i
]->
	`S‘ImpÜnûRef
(
im´ef
);

444 
fImpÜnûRef
 = 
im´ef
;

445 
	}
}

449 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$C®cRuËImpÜnû
()

451 
DoubË_t
 
maxImp
=-1.0;

452 
DoubË_t
 
imp
;

453 
IÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

454  
i
=0; i<
ÄuËs
; i++ ) {

455 
fRuËs
[
i
]->
	`C®cImpÜnû
();

456 
imp
 = 
fRuËs
[
i
]->
	`G‘ImpÜnû
();

457 ià(
imp
>
maxImp
) maxImp = imp;

459  
IÁ_t
 
i
=0; i<
ÄuËs
; i++ ) {

460 
fRuËs
[
i
]->
	`S‘ImpÜnûRef
(
maxImp
);

463  
maxImp
;

464 
	}
}

469 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$C®cLšImpÜnû
()

471 
DoubË_t
 
maxImp
=-1.0;

472 
UIÁ_t
 
nv¬s
 = 
fLšCÛffic›Ás
.
	`size
();

473 
fLšImpÜnû
.
	`»size
(
nv¬s
,0.0);

474 ià(!
	`DoLš—r
()è 
maxImp
;

483 
DoubË_t
 
imp
;

484  
UIÁ_t
 
i
=0; i<
nv¬s
; i++ ) {

485 
imp
 = 
fAv”ageRuËSigma
*
TM©h
::
	`Abs
(
fLšCÛffic›Ás
[
i
]);

486 
fLšImpÜnû
[
i
] = 
imp
;

487 ià(
imp
>
maxImp
) maxImp = imp;

489  
maxImp
;

490 
	}
}

495 
	gTMVA
::
RuËEn£mbË
::
	$C®cV¬ImpÜnû
()

497 
	`Log
(è<< 
kVERBOSE
 << "Compu‹ v¬ŸbË impÜnû" << 
Endl
;

498 
DoubË_t
 
rimp
;

499 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

500 ià(
	`G‘M‘hodBa£
()==0è
	`Log
(è<< 
kFATAL
 << "RuËEn£mbË::C®cV¬ImpÜnû(è- should‚Ù bh”e!" << 
Endl
;

501 
UIÁ_t
 
nv¬s
 = 
	`G‘M‘hodBa£
()->
	`G‘Nv¬
();

502 
UIÁ_t
 
nv¬sU£d
;

503 
DoubË_t
 
rimpN
;

504 
fV¬ImpÜnû
.
	`»size
(
nv¬s
,0);

506 ià(
	`DoRuËs
()) {

507  
UIÁ_t
 
šd
=0; ind<
ÄuËs
; ind++ ) {

508 
rimp
 = 
fRuËs
[
šd
]->
	`G‘ImpÜnû
();

509 
nv¬sU£d
 = 
fRuËs
[
šd
]->
	`G‘NumV¬sU£d
();

510 ià(
nv¬sU£d
<1)

511 
	`Log
(è<< 
kFATAL
 << "<C®cV¬ImpÜnû> V¬ŸbË fÜ impÜnû c®c!!!??? A BUG!" << 
Endl
;

512 
rimpN
 = (
nv¬sU£d
 > 0 ? 
rimp
/nvarsUsed:0.0);

513  
UIÁ_t
 
iv
=0; iv<
nv¬s
; iv++ ) {

514 ià(
fRuËs
[
šd
]->
	`CÚšsV¬ŸbË
(
iv
)) {

515 
fV¬ImpÜnû
[
iv
] +ğ
rimpN
;

521 ià(
	`DoLš—r
()) {

522  
UIÁ_t
 
iv
=0; iv<
fLšT”mOK
.
	`size
(); iv++ ) {

523 ià(
fLšT”mOK
[
iv
]è
fV¬ImpÜnû
[iv] +ğ
fLšImpÜnû
[iv];

529 
DoubË_t
 
maximp
 = 0.0;

530  
UIÁ_t
 
iv
=0; iv<
nv¬s
; iv++ ) {

531 iàĞ
fV¬ImpÜnû
[
iv
] > 
maximp
 ) maximp = fVarImportance[iv];

533 ià(
maximp
>0) {

534  
UIÁ_t
 
iv
=0; iv<
nv¬s
; iv++ ) {

535 
fV¬ImpÜnû
[
iv
] *ğ1.0/
maximp
;

538 
	}
}

545 
	gTMVA
::
RuËEn£mbË
::
S‘RuËs
ĞcÚ¡ 
¡d
::
veùÜ
<
RuË
 *> & 
ruËs
 )

547 
D–‘eRuËs
();

549 
	gfRuËs
.
»size
(
ruËs
.
size
());

550 
UIÁ_t
 
	gi
=0; i<
	gfRuËs
.
size
(); i++) {

551 
	gfRuËs
[
i
] = 
ruËs
[i];

553 
	gfEv’tCacheOK
 = 
kFALSE
;

560 
	gTMVA
::
RuËEn£mbË
::
MakeRuËs
ĞcÚ¡ 
¡d
::
veùÜ
< cÚ¡ 
DecisiÚT»e
 *> & 
fÜe¡
 )

562 
fRuËs
.
ş—r
();

563 ià(!
DoRuËs
()) ;

565 
IÁ_t
 
	gÄuËsCheck
=0;

566 
IÁ_t
 
	gÄuËs
;

567 
IÁ_t
 
	gÃndn
;

568 
DoubË_t
 
	gsumÃndn
=0;

569 
DoubË_t
 
	gsumn2
=0;

572 
UIÁ_t
 
	gÁ»es
 = 
fÜe¡
.
size
();

573  
UIÁ_t
 
	gšd
=0; ind<
	gÁ»es
; ind++ ) {

575 
MakeRuËsFromT»e
Ğ
fÜe¡
[
šd
] );

576 
	gÄuËs
 = 
C®cNRuËs
Ğ
fÜe¡
[
šd
] );

577 
	gÃndn
 = (
ÄuËs
/2) + 1;

578 
	gsumÃndn
 +ğ
Ãndn
;

579 
	gsumn2
 +ğ
Ãndn
*nendn;

580 
	gÄuËsCheck
 +ğ
ÄuËs
;

582 
DoubË_t
 
	gnm—n
 = (
Á»es
>0è? 
sumÃndn
/ntrees : 0;

583 
DoubË_t
 
	gnsigm
 = 
TM©h
::
Sq¹
Ğ
gToŞs
().
Compu‹V¬Ÿnû
(
sumn2
,
sumÃndn
,
Á»es
) );

584 
DoubË_t
 
	gndev
 = 2.0*(
nm—n
-2.0-
nsigm
)/(nmean-2.0+nsigm);

586 
Log
(è<< 
	gkVERBOSE
 << "Av”agnumb” oà’d‚ode ³¸Œ“ = " << 
	gnm—n
 << 
	gEndl
;

587 ià(
	gÁ»es
>1è
Log
(è<< 
	gkVERBOSE
 << "sigma of ditto ( ~= mean-2 ?) = "

588 << 
	gnsigm


589 << 
	gEndl
;

590 
Log
(è<< 
	gkVERBOSE
 << "DevŸtiÚ fromƒxpÚ’tŸÈmod– = " << 
	gndev
 << 
	gEndl
;

591 
Log
(è<< 
	gkVERBOSE
 << "CÜ»¥Úd tØL (eq. 13, RuËF™…´èğ" << 
	gnm—n
 << 
	gEndl
;

593 ià(
	gÄuËsCheck
 !ğ
¡©ic_ÿ¡
<
IÁ_t
>(
fRuËs
.
size
())) {

594 
Log
(è<< 
kFATAL


595 << "BUG!‚umb” oàg’”©ed‡nd…ossibË„uË dØnÙ m©ch! NÔuËsèğ " << 
fRuËs
.
size
()

596 << " !ğ" << 
ÄuËsCheck
 << 
Endl
;

598 
Log
(è<< 
	gkVERBOSE
 << "Numb” oàg’”©ed„uËs: " << 
	gfRuËs
.
size
(è<< 
	gEndl
;

601 
	gfNRuËsG’”©ed
 = 
fRuËs
.
size
();

603 
RemoveSim¬RuËs
();

605 
Re£tCÛffic›Ás
();

613 
	gTMVA
::
RuËEn£mbË
::
	$MakeLš—rT”ms
()

615 ià(!
	`DoLš—r
()) ;

617 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = 
	`G‘T¿ššgEv’ts
();

618 
UIÁ_t
 
Ãve
 = 
ev’ts
->
	`size
();

619 
UIÁ_t
 
nv¬s
 = ((*
ev’ts
)[0])->
	`G‘NV¬ŸbËs
();

620 
DoubË_t
 
v®
,
ew
;

621 
¡d
::
	t·œ
< 
	tDoubË_t
, 
	tIÁ_t
> 
	td©aTy³
;

622 
¡d
::
	t·œ
< 
	tDoubË_t
, 
	td©aTy³
 > 
	td©aPošt
;

624 
¡d
::
veùÜ
< std::veùÜ<
d©aPošt
> > 
	`v¬d©a
(
nv¬s
);

625 
¡d
::
veùÜ
< 
DoubË_t
 > 
	`v¬sum
(
nv¬s
,0.0);

626 
¡d
::
veùÜ
< 
DoubË_t
 > 
	`v¬sum2
(
nv¬s
,0.0);

631 
UIÁ_t
 
i
=0; i<
Ãve
; i++) {

632 
ew
 = ((*
ev’ts
)[
i
])->
	`G‘Weight
();

633 
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

634 
v®
 = ((*
ev’ts
)[
i
])->
	`G‘V®ue
(
v
);

635 
v¬d©a
[
v
].
	`push_back
Ğ
	`d©aPošt
Ğ
v®
, 
	`d©aTy³
(
ew
,((*
ev’ts
)[
i
])->
	`G‘CÏss
()) ) );

639 
fLšDP
.
	`ş—r
();

640 
fLšDM
.
	`ş—r
();

641 
fLšCÛffic›Ás
.
	`ş—r
();

642 
fLšNÜm
.
	`ş—r
();

643 
fLšDP
.
	`»size
(
nv¬s
,0);

644 
fLšDM
.
	`»size
(
nv¬s
,0);

645 
fLšCÛffic›Ás
.
	`»size
(
nv¬s
,0);

646 
fLšNÜm
.
	`»size
(
nv¬s
,0);

648 
DoubË_t
 
av”ageWeight
 = 
Ãve
 ? 
fRuËF™
->
	`G‘NEveEff
()/
¡©ic_ÿ¡
<Double_t>(neve) : 0;

650 
DoubË_t
 
¡dl
;

653 
DoubË_t
 
lx
;

654 
DoubË_t
 
nquªt
;

655 
DoubË_t
 
Ãff
;

656 
UIÁ_t
 
šdquªtM
;

657 
UIÁ_t
 
šdquªtP
;

659 
M‘hodBa£
 *
fMB
=
cÚ¡_ÿ¡
<M‘hodBa£ *>(
fRuËF™
->
	`G‘M‘hodBa£
());

661 
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

662 
v¬sum
[
v
] = 0;

663 
v¬sum2
[
v
] = 0;

665 
¡d
::
	`sÜt
Ğ
v¬d©a
[
v
].
	`begš
(),v¬d©a[v].
	`’d
() );

666 
nquªt
 = 
fLšQuªte
*
fRuËF™
->
	`G‘NEveEff
();

667 
Ãff
=0;

668 
UIÁ_t
 
›
=0;

670  (
›
<
Ãve
è&& (
Ãff
<
nquªt
) ) {

671 
Ãff
 +ğ
v¬d©a
[
v
][
›
].
£cÚd
.
fœ¡
;

672 
›
++;

674 
šdquªtM
 = (
›
==0 ? 0:ie-1);

676 
›
 = 
Ãve
;

677 
Ãff
=0;

678  (
›
>0è&& (
Ãff
<
nquªt
) ) {

679 
›
--;

680 
Ãff
 +ğ
v¬d©a
[
v
][
›
].
£cÚd
.
fœ¡
;

682 
šdquªtP
 = (
›
==
Ãve
 ? ie=neve-1:ie);

684 
fLšDM
[
v
] = 
v¬d©a
[v][
šdquªtM
].
fœ¡
;

685 
fLšDP
[
v
] = 
v¬d©a
[v][
šdquªtP
].
fœ¡
;

687 if(!
fMB
->
	`IsS’tFe
())

689 ià(
fLšPDFB
[
v
]è
d–‘e
 fLinPDFB[v];

690 ià(
fLšPDFS
[
v
]è
d–‘e
 fLinPDFS[v];

691 
fLšPDFB
[
v
] = 
Ãw
 
	`TH1F
(
	`FÜm
("bkgv¬%d",v),"bkgemphi¡",40,
fLšDM
[v],
fLšDP
[v]);

692 
fLšPDFS
[
v
] = 
Ãw
 
	`TH1F
(
	`FÜm
("sigv¬%d",v),"sigemphi¡",40,
fLšDM
[v],
fLšDP
[v]);

693 
fLšPDFB
[
v
]->
	`Sumw2
();

694 
fLšPDFS
[
v
]->
	`Sumw2
();

697 
IÁ_t
 
ty³
;

698 cÚ¡ 
DoubË_t
 
w
 = 1.0/
fRuËF™
->
	`G‘NEveEff
();

699 
›
=0; ie<
Ãve
; ie++) {

700 
v®
 = 
v¬d©a
[
v
][
›
].
fœ¡
;

701 
ew
 = 
v¬d©a
[
v
][
›
].
£cÚd
.
fœ¡
;

702 
ty³
 = 
v¬d©a
[
v
][
›
].
£cÚd
.second;

703 
lx
 = 
TM©h
::
	`Mš
Ğ
fLšDP
[
v
], TM©h::
	`Max
Ğ
fLšDM
[v], 
v®
 ) );

704 
v¬sum
[
v
] +ğ
ew
*
lx
;

705 
v¬sum2
[
v
] +ğ
ew
*
lx
*lx;

706 if(!
fMB
->
	`IsS’tFe
())

708 ià(
ty³
==1è
fLšPDFS
[
v
]->
	`Fl
(
lx
,
w
*
ew
);

709 
fLšPDFB
[
v
]->
	`Fl
(
lx
,
w
*
ew
);

715 
¡dl
 = 
TM©h
::
	`Sq¹
Ğ(
v¬sum2
[
v
] - (
v¬sum
[v]*v¬sum[v]/
fRuËF™
->
	`G‘NEveEff
()))/(fRuËF™->G‘NEveEff()-
av”ageWeight
) );

716 
fLšNÜm
[
v
] = 
	`C®cLšNÜm
(
¡dl
);

719 if(!
fMB
->
	`IsS’tFe
())

721 
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

722 
fLšPDFS
[
v
]->
	`Wr™e
();

723 
fLšPDFB
[
v
]->
	`Wr™e
();

726 
	}
}

731 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$PdfLš—r
Ğ
DoubË_t
 & 
nsig
, DoubË_ˆ& 
ÁÙ
 ) const

733 
UIÁ_t
 
nv¬s
=
fLšDP
.
	`size
();

735 
DoubË_t
 
f¡Ù
=0;

736 
DoubË_t
 
fbtÙ
=0;

737 
nsig
 = 0;

738 
ÁÙ
 = 
nv¬s
;

739 
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

740 
DoubË_t
 
v®
 = 
fEv’tLš—rV®
[
v
];

741 
IÁ_t
 
bš
 = 
fLšPDFS
[
v
]->
	`FšdBš
(
v®
);

742 
f¡Ù
 +ğ
fLšPDFS
[
v
]->
	`G‘BšCÚ‹Á
(
bš
);

743 
fbtÙ
 +ğ
fLšPDFB
[
v
]->
	`G‘BšCÚ‹Á
(
bš
);

745 ià(
nv¬s
<1)  0;

746 
ÁÙ
 = (
f¡Ù
+
fbtÙ
)/
	`DoubË_t
(
nv¬s
);

747 
nsig
 = (
f¡Ù
)/
	`DoubË_t
(
nv¬s
);

748  
f¡Ù
/(f¡Ù+
fbtÙ
);

749 
	}
}

755 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$PdfRuË
Ğ
DoubË_t
 & 
nsig
, DoubË_ˆ& 
ÁÙ
 ) const

757 
DoubË_t
 
sump
 = 0;

758 
DoubË_t
 
sumok
 = 0;

759 
DoubË_t
 
sumz
 = 0;

760 
DoubË_t
 
ssb
;

761 
DoubË_t
 
Ãve
;

763 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

764 
UIÁ_t
 
œ
=0; ir<
ÄuËs
; ir++) {

765 ià(
fEv’tRuËV®
[
œ
]>0) {

766 
ssb
 = 
fEv’tRuËV®
[
œ
]*
	`G‘RuËsCÚ¡
(œ)->
	`G‘SSB
();

767 
Ãve
 = 
	`G‘RuËsCÚ¡
(
œ
)->
	`G‘SSBNeve
();

768 
sump
 +ğ
ssb
*
Ãve
;

769 
sumok
 +ğ
Ãve
;

771 
sumz
 += 1.0;

774 
nsig
 = 
sump
;

775 
ÁÙ
 = 
sumok
;

777 ià(
ÁÙ
>0è 
nsig
/ntot;

779 
	}
}

785 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$FSr
ĞcÚ¡ 
Ev’t
 & 
e
 )

787 
	`S‘Ev’t
(
e
);

788 
	`Upd©eEv’tV®
();

789  
	`FSr
();

790 
	}
}

796 
DoubË_t
 
	gTMVA
::
RuËEn£mbË
::
	$FSr
() const

798 
DoubË_t
 
p
=0;

799 
DoubË_t
 
Äs
=0, 
Ät
=0;

800 
DoubË_t
 
Æs
=0, 
Æt
=0;

801 
DoubË_t
 
Á
;

802 
DoubË_t
 
´
=0;

803 
DoubË_t
 
¶
=0;

806 ià(
	`DoLš—r
()è
¶
 = 
	`PdfLš—r
(
Æs
, 
Æt
);

807 ià(
	`DoRuËs
()è
´
 = 
	`PdfRuË
(
Äs
, 
Ät
);

809 ià((
Æt
>0è&& (
Ät
>0)è
Á
=2.0;

810 
Á
=1.0;

811 
p
 = (
¶
+
´
)/
Á
;

812  2.0*
p
-1.0;

813 
	}
}

818 
	gTMVA
::
RuËEn£mbË
::
	$RuËRe¥Ú£Sts
()

821 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = 
	`G‘T¿ššgEv’ts
();

822 cÚ¡ 
UIÁ_t
 
Ãve
 = 
ev’ts
->
	`size
();

823 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
	`G‘M‘hodBa£
()->
	`G‘Nv¬
();

824 cÚ¡ 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

825 cÚ¡ 
Ev’t
 *
eveD©a
;

827 
BoŞ_t
 
sigRuË
;

828 
BoŞ_t
 
sigTag
;

829 
BoŞ_t
 
bkgTag
;

831 
BoŞ_t
 
sigTrue
;

832 
BoŞ_t
 
gged
;

834 
IÁ_t
 
nsig
=0;

835 
IÁ_t
 
nbkg
=0;

836 
IÁ_t
 
Áag
=0;

837 
IÁ_t
 
nss
=0;

838 
IÁ_t
 
nsb
=0;

839 
IÁ_t
 
nbb
=0;

840 
IÁ_t
 
nbs
=0;

841 
¡d
::
veùÜ
<
IÁ_t
> 
v¬út
;

843 
fRuËPSS
.
	`ş—r
();

844 
fRuËPSB
.
	`ş—r
();

845 
fRuËPBS
.
	`ş—r
();

846 
fRuËPBB
.
	`ş—r
();

847 
fRuËPTag
.
	`ş—r
();

849 
v¬út
.
	`»size
(
nv¬s
,0);

850 
fRuËV¬F¿c
.
	`ş—r
();

851 
fRuËV¬F¿c
.
	`»size
(
nv¬s
,0);

853  
UIÁ_t
 
i
=0; i<
ÄuËs
; i++ ) {

854  
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

855 ià(
fRuËs
[
i
]->
	`CÚšsV¬ŸbË
(
v
)è
v¬út
[v]++;

857 
sigRuË
 = 
fRuËs
[
i
]->
	`IsSigÇlRuË
();

858 ià(
sigRuË
) {

859 
nsig
++;

862 
nbkg
++;

865 
nss
=0;

866 
nsb
=0;

867 
nbs
=0;

868 
nbb
=0;

869 
Áag
=0;

871 
UIÁ_t
 
e
=0;ƒ<
Ãve
;ƒ++) {

872 
eveD©a
 = (*
ev’ts
)[
e
];

873 
gged
 = 
fRuËs
[
i
]->
	`Ev®Ev’t
(*
eveD©a
);

874 
sigTag
 = (
gged
 && 
sigRuË
);

875 
bkgTag
 = (
gged
 && (!
sigRuË
));

877 
sigTrue
 = (
eveD©a
->
	`G‘CÏss
() == 0);

878 ià(
gged
) {

879 
Áag
++;

880 ià(
sigTag
 && 
sigTrue
è
nss
++;

881 ià(
sigTag
 && !
sigTrue
è
nsb
++;

882 ià(
bkgTag
 && 
sigTrue
è
nbs
++;

883 ià(
bkgTag
 && !
sigTrue
è
nbb
++;

887 ià(
Áag
>0 && 
Ãve
 > 0) {

888 
fRuËPTag
.
	`push_back
(
	`DoubË_t
(
Áag
)/DoubË_t(
Ãve
));

889 
fRuËPSS
.
	`push_back
(
	`DoubË_t
(
nss
)/DoubË_t(
Áag
));

890 
fRuËPSB
.
	`push_back
(
	`DoubË_t
(
nsb
)/DoubË_t(
Áag
));

891 
fRuËPBS
.
	`push_back
(
	`DoubË_t
(
nbs
)/DoubË_t(
Áag
));

892 
fRuËPBB
.
	`push_back
(
	`DoubË_t
(
nbb
)/DoubË_t(
Áag
));

896 
fRuËFSig
 = (
nsig
>0è? 
¡©ic_ÿ¡
<
DoubË_t
>Òsig)/¡©ic_ÿ¡<DoubË_t>Òsig+
nbkg
) : 0;

897  
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

898 
fRuËV¬F¿c
[
v
] = (
ÄuËs
>0è? 
	`DoubË_t
(
v¬út
[v])/Double_t(nrules) : 0;

900 
	}
}

905 
	gTMVA
::
RuËEn£mbË
::
	$RuËSti¡ics
()

907 cÚ¡ 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

908 
DoubË_t
 
nc
;

909 
DoubË_t
 
sumNc
 =0;

910 
DoubË_t
 
sumNc2
=0;

911  
UIÁ_t
 
i
=0; i<
ÄuËs
; i++ ) {

912 
nc
 = 
¡©ic_ÿ¡
<
DoubË_t
>(
fRuËs
[
i
]->
	`G‘Ncuts
());

913 
sumNc
 +ğ
nc
;

914 
sumNc2
 +ğ
nc
*nc;

916 
fRuËNCave
 = 0.0;

917 
fRuËNCsig
 = 0.0;

918 ià(
ÄuËs
>0) {

919 
fRuËNCave
 = 
sumNc
/
ÄuËs
;

920 
fRuËNCsig
 = 
TM©h
::
	`Sq¹
(
	`gToŞs
().
	`Compu‹V¬Ÿnû
(
sumNc2
,
sumNc
,
ÄuËs
));

922 
	}
}

927 
	gTMVA
::
RuËEn£mbË
::
	$PrštRuËG’
() const

929 
	`Log
(è<< 
kHEADER
 << "-------------------RULE ENSEMBLE SUMMARY------------------------" << 
Endl
;

930 cÚ¡ 
M‘hodRuËF™
 *
mrf
 = 
	`G‘M‘hodRuËF™
();

931 ià(
mrf
è
	`Log
(è<< 
kINFO
 << "T»Œaššg m‘hod : " << (mrf->
	`U£Boo¡
(è? "AdaBoo¡":"Rªdom"è<< 
Endl
;

932 
	`Log
(è<< 
kINFO
 << "Numb” oàev’t ³¸Œ“ : " << 
fRuËF™
->
	`G‘NT»eSam¶e
(è<< 
Endl
;

933 
	`Log
(è<< 
kINFO
 << "Numb” oàŒ“  : " << 
fRuËF™
->
	`G‘FÜe¡
().
	`size
(è<< 
Endl
;

934 
	`Log
(è<< 
kINFO
 << "Numb” oàg’”©ed„uË  : " << 
fNRuËsG’”©ed
 << 
Endl
;

935 
	`Log
(è<< 
kINFO
 << "Idem,‡á” cËªu° : " << 
fRuËs
.
	`size
(è<< 
Endl
;

936 
	`Log
(è<< 
kINFO
 << "Av”agnumb” oàcut ³¸ruË : " << 
	`FÜm
("%8.2f",
fRuËNCave
è<< 
Endl
;

937 
	`Log
(è<< 
kINFO
 << "S´—d iÀnumb” oàcut ³¸ruË : " << 
	`FÜm
("%8.2f",
fRuËNCsig
è<< 
Endl
;

938 
	`Log
(è<< 
kVERBOSE
 << "Com¶ex™y : " << 
	`FÜm
("%8.2f",
fRuËNCave
*
fRuËNCsig
è<< 
Endl
;

939 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

940 
	`Log
(è<< 
kINFO
 << 
Endl
;

941 
	}
}

946 
	gTMVA
::
RuËEn£mbË
::
	$Pršt
() const

948 cÚ¡ 
EMsgTy³
 
kmty³
=
kINFO
;

949 cÚ¡ 
BoŞ_t
 
isDebug
 = (
fLogg”
->
	`G‘MšTy³
()<=
kDEBUG
);

951 
	`Log
(è<< 
kmty³
 << 
Endl
;

952 
	`Log
(è<< 
kmty³
 << "================================================================" << 
Endl
;

953 
	`Log
(è<< 
kmty³
 << " M o dƒ† " << 
Endl
;

954 
	`Log
(è<< 
kmty³
 << "================================================================" << 
Endl
;

956 
IÁ_t
 
šd
;

957 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
	`G‘M‘hodBa£
()->
	`G‘Nv¬
();

958 cÚ¡ 
IÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

959 cÚ¡ 
IÁ_t
 
´štN
 = 
TM©h
::
	`Mš
(10,
ÄuËs
);

960 
IÁ_t
 
maxL
 = 0;

961 
UIÁ_t
 
iv
 = 0; iv<
fV¬ImpÜnû
.
	`size
(); iv++) {

962 ià(
	`G‘M‘hodBa£
()->
	`G‘IÅutLab–
(
iv
).
	`L’gth
(è> 
maxL
) maxL = GetMethodBase()->GetInputLabel(iv).Length();

965 ià(
isDebug
) {

966 
	`Log
(è<< 
kDEBUG
 << "V¬ŸbË impÜnû:" << 
Endl
;

967 
UIÁ_t
 
iv
 = 0; iv<
fV¬ImpÜnû
.
	`size
(); iv++) {

968 
	`Log
(è<< 
kDEBUG
 << 
¡d
::
	`£tw
(
maxL
è<< 
	`G‘M‘hodBa£
()->
	`G‘IÅutLab–
(
iv
)

969 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
)

970 << " : " << 
	`FÜm
(" %3.3f",
fV¬ImpÜnû
[
iv
]è<< 
Endl
;

974 
	`Log
(è<< 
kHEADER
 << "Off£ˆ×0èğ" << 
fOff£t
 << 
Endl
;

976 ià(
	`DoLš—r
()) {

977 ià(
fLšNÜm
.
	`size
() > 0) {

978 
	`Log
(è<< 
kmty³
 << "------------------------------------" << 
Endl
;

979 
	`Log
(è<< 
kmty³
 << "Lš—¸mod– (weight uÂÜm®i£d)" << 
Endl
;

980 
	`Log
(è<< 
kmty³
 << "------------------------------------" << 
Endl
;

981 
	`Log
(è<< 
kmty³
 << 
¡d
::
	`£tw
(
maxL
) << "Variable"

982 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
) << " : "

983 << 
¡d
::
	`£tw
(11) << " Weights"

984 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
) << " : "

986 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
)

987 << 
Endl
;

988 
	`Log
(è<< 
kmty³
 << "------------------------------------" << 
Endl
;

989  
UIÁ_t
 
i
=0; i<
fLšNÜm
.
	`size
(); i++ ) {

990 
	`Log
(è<< 
kmty³
 << 
¡d
::
	`£tw
(¡d::
	`max
(
maxL
,8)è<< 
	`G‘M‘hodBa£
()->
	`G‘IÅutLab–
(
i
);

991 ià(
fLšT”mOK
[
i
]) {

992 
	`Log
(è<< 
kmty³


993 << 
¡d
::
	`»£tiosæags
(¡d::
ios
::
right
)

994 << " : " << 
	`FÜm
(" %10.3e",
fLšCÛffic›Ás
[
i
]*
fLšNÜm
[i])

995 << " : " << 
	`FÜm
(" %3.3f",
fLšImpÜnû
[
i
]/
fImpÜnûRef
è<< 
Endl
;

998 
	`Log
(è<< 
kmty³
 << "-> importance belowhreshold = "

999 << 
	`FÜm
(" %3.3f",
fLšImpÜnû
[
i
]/
fImpÜnûRef
è<< 
Endl
;

1002 
	`Log
(è<< 
kmty³
 << "------------------------------------" << 
Endl
;

1005 
	`Log
(è<< 
kmty³
 << "Lš—¸‹rm w”di§bËd" << 
Endl
;

1007 ià((!
	`DoRuËs
()è|| (
ÄuËs
==0)) {

1008 ià(!
	`DoRuËs
()) {

1009 
	`Log
(è<< 
kmty³
 << "RuË”m w”di§bËd" << 
Endl
;

1012 
	`Log
(è<< 
kmty³
 << "Ev’hough„uË w”šşuded iÀthmod–,‚Ú·s£d! " << 
ÄuËs
 << 
Endl
;

1016 
	`Log
(è<< 
kmty³
 << "Numb” oàruË ğ" << 
ÄuËs
 << 
Endl
;

1017 ià(
isDebug
) {

1018 
	`Log
(è<< 
kmty³
 << "N(cutsèš„uËs,‡v”agğ" << 
fRuËNCave
 << 
Endl
;

1019 
	`Log
(è<< 
kmty³
 << " RMS = " << 
fRuËNCsig
 << 
Endl
;

1020 
	`Log
(è<< 
kmty³
 << "F¿ùiÚ oàsigÇÈruË ğ" << 
fRuËFSig
 << 
Endl
;

1021 
	`Log
(è<< 
kmty³
 << "F¿ùiÚ oàruË cÚššg‡ v¬ŸbË (%):" << 
Endl
;

1022  
UIÁ_t
 
v
=0; v<
nv¬s
; v++) {

1023 
	`Log
(è<< 
kmty³
 << " " << 
¡d
::
	`£tw
(
maxL
è<< 
	`G‘M‘hodBa£
()->
	`G‘IÅutLab–
(
v
);

1024 
	`Log
(è<< 
kmty³
 << 
	`FÜm
(" = %2.2f",
fRuËV¬F¿c
[
v
]*100.0è<< " %" << 
Endl
;

1030 
¡d
::
li¡
< std::
·œ
<,> > 
sÜ‹dImp
;

1031 
IÁ_t
 
i
=0; i<
ÄuËs
; i++) {

1032 
sÜ‹dImp
.
	`push_back
Ğ
¡d
::
·œ
<,>Ğ
fRuËs
[
i
]->
	`G‘ImpÜnû
(),i ) );

1034 
sÜ‹dImp
.
	`sÜt
();

1036 
	`Log
(è<< 
kmty³
 << "Prštšghfœ¡ " << 
´štN
 << "„uËs, ord”ed iÀimpÜnû." << 
Endl
;

1037 
pšd
=0;

1038  
¡d
::
li¡
< std::
·œ
<,> >::
»v”£_™”©Ü
 
™·œ
 = 
sÜ‹dImp
.
	`rbegš
();

1039 
™·œ
 !ğ
sÜ‹dImp
.
	`»nd
(); itpair++ ) {

1040 
šd
 = 
™·œ
->
£cÚd
;

1044 
fRuËs
[
šd
]->
	`PrštLogg”
(
	`FÜm
("RuË %4d : ",
pšd
+1));

1045 
pšd
++;

1046 ià(
pšd
==
´štN
) {

1047 ià(
ÄuËs
==
´štN
) {

1048 
	`Log
(è<< 
kmty³
 << "AÎ„uË ´š‹d" << 
Endl
;

1051 
	`Log
(è<< 
kmty³
 << "SkpšghÃxˆ" << 
ÄuËs
-
´štN
 << "„uËs" << 
Endl
;

1057 
	`Log
(è<< 
kmty³
 << "================================================================" << 
Endl
;

1058 
	`Log
(è<< 
kmty³
 << 
Endl
;

1059 
	}
}

1064 
	gTMVA
::
RuËEn£mbË
::
	$PrštRaw
Ğ
¡d
::
o¡»am
 & 
os
 ) const

1066 
IÁ_t
 
dp
 = 
os
.
	`´ecisiÚ
();

1067 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

1070 
os
 << "ImpÜnûCutğ" << 
fImpÜnûCut
 << 
¡d
::
’dl
;

1071 
os
 << "LšQuªteğ" << 
fLšQuªte
 << 
¡d
::
’dl
;

1072 
os
 << "Av”ageSuµÜtğ" << 
fAv”ageSuµÜt
 << 
¡d
::
’dl
;

1073 
os
 << "Av”ageRuËSigmağ" << 
fAv”ageRuËSigma
 << 
¡d
::
’dl
;

1074 
os
 << "Off£tğ" << 
fOff£t
 << 
¡d
::
’dl
;

1075 
os
 << "NRuËsğ" << 
ÄuËs
 << 
¡d
::
’dl
;

1076 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++){

1077 
os
 << "***RuË " << 
i
 << 
¡d
::
’dl
;

1078 (
fRuËs
[
i
])->
	`PrštRaw
(
os
);

1080 
UIÁ_t
 
Æš—r
 = 
fLšNÜm
.
	`size
();

1082 
os
 << "NLš—rğ" << 
fLšT”mOK
.
	`size
(è<< 
¡d
::
’dl
;

1083 
UIÁ_t
 
i
=0; i<
Æš—r
; i++) {

1084 
os
 << "***Lš—¸" << 
i
 << 
¡d
::
’dl
;

1085 
os
 << 
¡d
::
	`£»cisiÚ
(10è<< (
fLšT”mOK
[
i
] ? 1:0) << " "

1086 << 
fLšCÛffic›Ás
[
i
] << " "

1087 << 
fLšNÜm
[
i
] << " "

1088 << 
fLšDM
[
i
] << " "

1089 << 
fLšDP
[
i
] << " "

1090 << 
fLšImpÜnû
[
i
] << " " << 
¡d
::
’dl
;

1092 
os
 << 
¡d
::
	`£»cisiÚ
(
dp
);

1093 
	}
}

1098 * 
	gTMVA
::
RuËEn£mbË
::
	$AddXMLTo
(* 
·»Á
) const

1100 * 
»
 = 
	`gToŞs
().
	`AddChd
Ğ
·»Á
, "Weights" );

1102 
UIÁ_t
 
ÄuËs
 = 
fRuËs
.
	`size
();

1103 
UIÁ_t
 
Æš—r
 = 
fLšNÜm
.
	`size
();

1104 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "NRuËs", 
ÄuËs
 );

1105 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "NLš—r", 
Æš—r
 );

1106 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "L—ºšgMod–", ()
fL—ºšgMod–
 );

1107 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "ImpÜnûCut", 
fImpÜnûCut
 );

1108 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "LšQuªte", 
fLšQuªte
 );

1109 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "Av”ageSuµÜt", 
fAv”ageSuµÜt
 );

1110 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "Av”ageRuËSigma", 
fAv”ageRuËSigma
 );

1111 
	`gToŞs
().
	`AddA‰r
Ğ
»
, "Off£t", 
fOff£t
 );

1112 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++è
fRuËs
[i]->
	`AddXMLTo
(
»
);

1114 
UIÁ_t
 
i
=0; i<
Æš—r
; i++) {

1115 * 
lš
 = 
	`gToŞs
().
	`AddChd
Ğ
»
, "Linear" );

1116 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "OK", (
fLšT”mOK
[
i
] ? 1:0) );

1117 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "CÛff", 
fLšCÛffic›Ás
[
i
] );

1118 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "NÜm", 
fLšNÜm
[
i
] );

1119 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "DM", 
fLšDM
[
i
] );

1120 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "DP", 
fLšDP
[
i
] );

1121 
	`gToŞs
().
	`AddA‰r
Ğ
lš
, "ImpÜnû", 
fLšImpÜnû
[
i
] );

1123  
»
;

1124 
	}
}

1129 
	gTMVA
::
RuËEn£mbË
::
	$R—dFromXML
Ğ* 
wghŠode
 )

1131 
UIÁ_t
 
ÄuËs
, 
Æš—r
;

1132 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NRuËs", 
ÄuËs
 );

1133 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "NLš—r", 
Æš—r
 );

1134 
IÁ_t
 
iL—ºšgMod–
;

1135 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "L—ºšgMod–", 
iL—ºšgMod–
 );

1136 
fL—ºšgMod–
 = (
EL—ºšgMod–
è
iL—ºšgMod–
;

1137 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "ImpÜnûCut", 
fImpÜnûCut
 );

1138 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "LšQuªte", 
fLšQuªte
 );

1139 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Av”ageSuµÜt", 
fAv”ageSuµÜt
 );

1140 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Av”ageRuËSigma", 
fAv”ageRuËSigma
 );

1141 
	`gToŞs
().
	`R—dA‰r
Ğ
wghŠode
, "Off£t", 
fOff£t
 );

1144 
	`D–‘eRuËs
();

1146 
UIÁ_t
 
i
 = 0;

1147 
fRuËs
.
	`»size
Ğ
ÄuËs
 );

1148 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
wghŠode
 );

1149 
i
=0; i<
ÄuËs
; i++) {

1150 
fRuËs
[
i
] = 
Ãw
 
	`RuË
();

1151 
fRuËs
[
i
]->
	`S‘RuËEn£mbË
Ğ
this
 );

1152 
fRuËs
[
i
]->
	`R—dFromXML
Ğ
ch
 );

1154 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1158 
fLšNÜm
 .
	`»size
Ğ
Æš—r
 );

1159 
fLšT”mOK
 .
	`»size
Ğ
Æš—r
 );

1160 
fLšCÛffic›Ás
.
	`»size
Ğ
Æš—r
 );

1161 
fLšDP
 .
	`»size
Ğ
Æš—r
 );

1162 
fLšDM
 .
	`»size
Ğ
Æš—r
 );

1163 
fLšImpÜnû
 .
	`»size
Ğ
Æš—r
 );

1165 
IÁ_t
 
iok
;

1166 
i
=0;

1167 
ch
) {

1168 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "OK", 
iok
 );

1169 
fLšT”mOK
[
i
] = (
iok
 == 1);

1170 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "CÛff", 
fLšCÛffic›Ás
[
i
] );

1171 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "NÜm", 
fLšNÜm
[
i
] );

1172 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "DM", 
fLšDM
[
i
] );

1173 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "DP", 
fLšDP
[
i
] );

1174 
	`gToŞs
().
	`R—dA‰r
Ğ
ch
, "ImpÜnû", 
fLšImpÜnû
[
i
] );

1176 
i
++;

1177 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

1179 
	}
}

1184 
	gTMVA
::
RuËEn£mbË
::
	$R—dRaw
Ğ
¡d
::
i¡»am
 & 
i¡r
 )

1186 
UIÁ_t
 
ÄuËs
;

1188 
¡d
::
¡ršg
 
dummy
;

1189 
IÁ_t
 
idum
;

1193 
i¡r
 >> 
dummy
 >> 
fImpÜnûCut
;

1194 
i¡r
 >> 
dummy
 >> 
fLšQuªte
;

1195 
i¡r
 >> 
dummy
 >> 
fAv”ageSuµÜt
;

1196 
i¡r
 >> 
dummy
 >> 
fAv”ageRuËSigma
;

1197 
i¡r
 >> 
dummy
 >> 
fOff£t
;

1198 
i¡r
 >> 
dummy
 >> 
ÄuËs
;

1202 
	`D–‘eRuËs
();

1204 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++){

1205 
i¡r
 >> 
dummy
 >> 
idum
;

1206 
fRuËs
.
	`push_back
Ğ
Ãw
 
	`RuË
() );

1207 (
fRuËs
.
	`back
())->
	`S‘RuËEn£mbË
Ğ
this
 );

1208 (
fRuËs
.
	`back
())->
	`R—dRaw
(
i¡r
);

1213 
UIÁ_t
 
Æš—r
;

1216 
i¡r
 >> 
dummy
 >> 
Æš—r
;

1218 
fLšNÜm
 .
	`»size
Ğ
Æš—r
 );

1219 
fLšT”mOK
 .
	`»size
Ğ
Æš—r
 );

1220 
fLšCÛffic›Ás
.
	`»size
Ğ
Æš—r
 );

1221 
fLšDP
 .
	`»size
Ğ
Æš—r
 );

1222 
fLšDM
 .
	`»size
Ğ
Æš—r
 );

1223 
fLšImpÜnû
 .
	`»size
Ğ
Æš—r
 );

1226 
IÁ_t
 
iok
;

1227 
UIÁ_t
 
i
=0; i<
Æš—r
; i++) {

1228 
i¡r
 >> 
dummy
 >> 
idum
;

1229 
i¡r
 >> 
iok
;

1230 
fLšT”mOK
[
i
] = (
iok
==1);

1231 
i¡r
 >> 
fLšCÛffic›Ás
[
i
];

1232 
i¡r
 >> 
fLšNÜm
[
i
];

1233 
i¡r
 >> 
fLšDM
[
i
];

1234 
i¡r
 >> 
fLšDP
[
i
];

1235 
i¡r
 >> 
fLšImpÜnû
[
i
];

1237 
	}
}

1242 
	gTMVA
::
RuËEn£mbË
::
	$Cİy
ĞcÚ¡ 
RuËEn£mbË
 & 
Ùh”
 )

1244 if(
this
 !ğ&
Ùh”
) {

1245 
fRuËF™
 = 
Ùh”
.
	`G‘RuËF™
();

1246 
fRuËMšDi¡
 = 
Ùh”
.
	`G‘RuËMšDi¡
();

1247 
fOff£t
 = 
Ùh”
.
	`G‘Off£t
();

1248 
fRuËs
 = 
Ùh”
.
	`G‘RuËsCÚ¡
();

1249 
fImpÜnûCut
 = 
Ùh”
.
	`G‘ImpÜnûCut
();

1250 
fV¬ImpÜnû
 = 
Ùh”
.
	`G‘V¬ImpÜnû
();

1251 
fL—ºšgMod–
 = 
Ùh”
.
	`G‘L—ºšgMod–
();

1252 
fLšQuªte
 = 
Ùh”
.
	`G‘LšQuªte
();

1253 
fRuËNCsig
 = 
Ùh”
.fRuleNCsig;

1254 
fAv”ageRuËSigma
 = 
Ùh”
.fAverageRuleSigma;

1255 
fEv’tCacheOK
 = 
Ùh”
.fEventCacheOK;

1256 
fImpÜnûRef
 = 
Ùh”
.fImportanceRef;

1257 
fNRuËsG’”©ed
 = 
Ùh”
.fNRulesGenerated;

1258 
fRuËFSig
 = 
Ùh”
.fRuleFSig;

1259 
fRuËM­Ind0
 = 
Ùh”
.fRuleMapInd0;

1260 
fRuËM­Ind1
 = 
Ùh”
.fRuleMapInd1;

1261 
fRuËM­OK
 = 
Ùh”
.fRuleMapOK;

1262 
fRuËNCave
 = 
Ùh”
.fRuleNCave;

1264 
	}
}

1269 
IÁ_t
 
	gTMVA
::
RuËEn£mbË
::
	$C®cNRuËs
ĞcÚ¡ 
DecisiÚT»e
 *
dŒ“
 )

1271 ià(
dŒ“
==0)  0;

1272 
Node
 *
node
 = 
dŒ“
->
	`G‘RoÙ
();

1273 
IÁ_t
 
Ãndnodes
 = 0;

1274 
	`FšdNEndNodes
Ğ
node
, 
Ãndnodes
 );

1275  2*(
Ãndnodes
-1);

1276 
	}
}

1281 
	gTMVA
::
RuËEn£mbË
::
	$FšdNEndNodes
ĞcÚ¡ 
Node
 *
node
, 
IÁ_t
 & 
Ãndnodes
 )

1283 ià(
node
==0) ;

1284 ià((
node
->
	`G‘Right
()==0è&& (node->
	`G‘Leá
()==0)) {

1285 ++
Ãndnodes
;

1288 cÚ¡ 
Node
 *
nodeR
 = 
node
->
	`G‘Right
();

1289 cÚ¡ 
Node
 *
nodeL
 = 
node
->
	`G‘Leá
();

1290 
	`FšdNEndNodes
Ğ
nodeR
, 
Ãndnodes
 );

1291 
	`FšdNEndNodes
Ğ
nodeL
, 
Ãndnodes
 );

1292 
	}
}

1297 
	gTMVA
::
RuËEn£mbË
::
	$MakeRuËsFromT»e
ĞcÚ¡ 
DecisiÚT»e
 *
dŒ“
 )

1299 
Node
 *
node
 = 
dŒ“
->
	`G‘RoÙ
();

1300 
	`AddRuË
Ğ
node
 );

1301 
	}
}

1306 
	gTMVA
::
RuËEn£mbË
::
	$AddRuË
ĞcÚ¡ 
Node
 *
node
 )

1308 ià(
node
==0) ;

1309 ià(
node
->
	`G‘P¬’t
()==0) {

1310 
	`AddRuË
Ğ
node
->
	`G‘Right
() );

1311 
	`AddRuË
Ğ
node
->
	`G‘Leá
() );

1314 
RuË
 *
ruË
 = 
	`MakeTheRuË
(
node
);

1315 ià(
ruË
) {

1316 
fRuËs
.
	`push_back
Ğ
ruË
 );

1317 
	`AddRuË
Ğ
node
->
	`G‘Right
() );

1318 
	`AddRuË
Ğ
node
->
	`G‘Leá
() );

1321 
	`Log
(è<< 
kFATAL
 << "<AddRuË> - ERROR faed iÀü—tšg‡„uË! BUG!" << 
Endl
;

1324 
	}
}

1332 
	gTMVA
::
RuË
 *
TMVA
::
RuËEn£mbË
::
	$MakeTheRuË
ĞcÚ¡ 
Node
 *
node
 )

1334 ià(
node
==0) {

1335 
	`Log
(è<< 
kFATAL
 << "<MakeTheRuË> IÅuˆnodi NULL. Should‚Ù h­³n. BUG!" << 
Endl
;

1339 ià(
node
->
	`G‘P¬’t
()==0) {

1343 
¡d
::
veùÜ
< cÚ¡ 
Node
 * > 
nodeVec
;

1344 cÚ¡ 
Node
 *
·»Á
 = 
node
;

1349 
nodeVec
.
	`push_back
Ğ
node
 );

1350 
·»Á
!=0) {

1351 
·»Á
 =…¬’t->
	`G‘P¬’t
();

1352 ià(!
·»Á
) ;

1353 cÚ¡ 
DecisiÚT»eNode
* 
dŠ
 = 
dyÇmic_ÿ¡
<cÚ¡ DecisiÚT»eNode*>(
·»Á
);

1354 ià(
dŠ
 && dŠ->
	`G‘S–eùÜ
()>=0)

1355 
nodeVec
.
	`š£¹
ĞnodeVec.
	`begš
(), 
·»Á
 );

1358 ià(
nodeVec
.
	`size
()<2) {

1359 
	`Log
(è<< 
kFATAL
 << "<MakeTheRuË> BUG! IncÚsi¡’ˆRuË!" << 
Endl
;

1362 
RuË
 *
ruË
 = 
Ãw
 
	`RuË
Ğ
this
, 
nodeVec
 );

1363 
ruË
->
	`S‘MsgTy³
Ğ
	`Log
().
	`G‘MšTy³
() );

1364  
ruË
;

1365 
	}
}

1370 
	gTMVA
::
RuËEn£mbË
::
MakeRuËM­
(cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
, 
UIÁ_t
 
ifœ¡
, UIÁ_ˆ
a¡
)

1372 
Log
(è<< 
	gkVERBOSE
 << "Makšg RuË m­ fÜ‡Îƒv’ts" << 
	gEndl
;

1374 ià(
	gev’ts
==0è
ev’ts
 = 
G‘T¿ššgEv’ts
();

1375 ià((
	gifœ¡
==0è|| (
a¡
==0è|| (
ifœ¡
>ilast)) {

1376 
ifœ¡
 = 0;

1377 
	ga¡
 = 
ev’ts
->
size
()-1;

1380 ià((
	gev’ts
!=
fRuËM­Ev’ts
) ||

1381 (
ifœ¡
!=
fRuËM­Ind0
) ||

1382 (
a¡
 !=
fRuËM­Ind1
)) {

1383 
fRuËM­OK
 = 
kFALSE
;

1386 ià(
	gfRuËM­OK
) {

1387 
Log
(è<< 
	gkVERBOSE
 << "<MakeRuËM­> M­ i ®»ady v®id" << 
	gEndl
;

1390 
	gfRuËM­Ev’ts
 = 
ev’ts
;

1391 
	gfRuËM­Ind0
 = 
ifœ¡
;

1392 
	gfRuËM­Ind1
 = 
a¡
;

1394 
UIÁ_t
 
	gÄuËs
 = 
G‘NRuËs
();

1395 ià(
	gÄuËs
==0) {

1396 
Log
(è<< 
kVERBOSE
 << "NØruË found iÀMakeRuËM­()" << 
Endl
;

1397 
	gfRuËM­OK
 = 
kTRUE
;

1403 
	g¡d
::
veùÜ
<
UIÁ_t
> 
ruËšd
;

1404 
	gfRuËM­
.
ş—r
();

1405 
UIÁ_t
 
	gi
=
ifœ¡
; i<=
a¡
; i++) {

1406 
	gruËšd
.
ş—r
();

1407 
	gfRuËM­
.
push_back
Ğ
ruËšd
 );

1408 
UIÁ_t
 
	gr
=0;„<
	gÄuËs
;„++) {

1409 ià(
	gfRuËs
[
r
]->
Ev®Ev’t
(*((*
ev’ts
)[
i
]))) {

1410 
	gfRuËM­
.
back
().
push_back
(
r
);

1414 
	gfRuËM­OK
 = 
kTRUE
;

1415 
Log
(è<< 
	gkVERBOSE
 << "MadruË m­ fÜƒv’t# " << 
	gifœ¡
 << " : " << 
	ga¡
 << 
	gEndl
;

1421 
	g¡d
::
o¡»am
& 
TMVA
::
İ”©Ü
<< ( 
¡d
::o¡»am& 
os
, cÚ¡ 
	gRuËEn£mbË
 & 
	gruËs
 )

1423 
	gos
 << "DON'T USE THIS - TO BE REMOVED" << 
	g¡d
::
’dl
;

1424 
	gruËs
.
Pršt
();

1425  
	gos
;

	@src/RuleFit.cxx

35 
	~"TMVA/RuËF™.h
"

37 
	~"TMVA/D©aS‘.h
"

38 
	~"TMVA/DecisiÚT»e.h
"

39 
	~"TMVA/Ev’t.h
"

40 
	~"TMVA/FaùÜy.h
"

41 
	~"TMVA/GšiIndex.h
"

42 
	~"TMVA/M‘hodBa£.h
"

43 
	~"TMVA/M‘hodRuËF™.h
"

44 
	~"TMVA/MsgLogg”.h
"

45 
	~"TMVA/Tim”.h
"

46 
	~"TMVA/ToŞs.h
"

47 
	~"TMVA/Ty³s.h
"

48 
	~"TMVA/S•¬©iÚBa£.h
"

50 
	~"TDœeùÜy.h
"

51 
	~"TH2F.h
"

52 
	~"TFe.h
"

53 
	~"TKey.h
"

54 
	~"TRªdom3.h
"

55 
	~"TROOT.h
"

57 
	~<®gÜ™hm
>

59 
CÏssImp
(
TMVA
::
RuËF™
);

64 
	gTMVA
::
RuËF™
::
	$RuËF™
ĞcÚ¡ 
M‘hodBa£
 *
rfba£
 )

65 : 
	`fVisHi¡sU£Imp
Ğ
kTRUE
 ),

66 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

68 
	`In™Ÿlize
Ğ
rfba£
 );

69 
¡d
::
	`¤ªd
Ğ
¿ndSEED
 );

70 
	}
}

75 
	gTMVA
::
RuËF™
::
	$RuËF™
()

76 : 
	`fNT»eSam¶e
(0)

77 , 
	`fNEveEffT¿š
(0)

78 , 
	`fM‘hodRuËF™
(0)

79 , 
	`fM‘hodBa£
(0)

80 , 
	`fVisHi¡sU£Imp
Ğ
kTRUE
 )

81 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

83 
¡d
::
	`¤ªd
Ğ
¿ndSEED
 );

84 
	}
}

89 
	gTMVA
::
RuËF™
::~
	$RuËF™
()

91 
d–‘e
 
fLogg”
;

92 
	}
}

97 
	gTMVA
::
RuËF™
::
	$In™NEveEff
()

99 
UIÁ_t
 
Ãve
 = 
fT¿ššgEv’ts
.
	`size
();

100 ià(
Ãve
==0) ;

102 
fNEveEffT¿š
 = 
	`C®cWeightSum
Ğ&
fT¿ššgEv’ts
 );

104 
	}
}

109 
	gTMVA
::
RuËF™
::
	$In™PŒs
ĞcÚ¡ 
M‘hodBa£
 *
rfba£
 )

111 
this
->
	`S‘M‘hodBa£
(
rfba£
);

112 
fRuËEn£mbË
.
	`In™Ÿlize
Ğ
this
 );

113 
fRuËF™P¬ams
.
	`S‘RuËF™
Ğ
this
 );

114 
	}
}

119 
	gTMVA
::
RuËF™
::
	$In™Ÿlize
ĞcÚ¡ 
M‘hodBa£
 *
rfba£
 )

121 
	`In™PŒs
(
rfba£
);

123 ià(
fM‘hodRuËF™
){

124 
fM‘hodRuËF™
->
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kT¿ššg
);

125 
UIÁ_t
 
Ãv’ts
 = 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

126 
¡d
::
veùÜ
<cÚ¡ 
TMVA
::
Ev’t
*> 
tmp
;

127 
LÚg64_t
 
›vt
=0; ievt<
Ãv’ts
; ievt++) {

128 cÚ¡ 
Ev’t
 *
ev’t
 = 
fM‘hodRuËF™
->
	`G‘Ev’t
(
›vt
);

129 
tmp
.
	`push_back
(
ev’t
);

131 
	`S‘T¿ššgEv’ts
Ğ
tmp
 );

135 
	`In™NEveEff
();

137 
	`MakeFÜe¡
();

140 
fRuËEn£mbË
.
	`MakeMod–
();

143 
fRuËF™P¬ams
.
	`In™
();

145 
	}
}

150 
	gTMVA
::
RuËF™
::
	$S‘M‘hodBa£
ĞcÚ¡ 
M‘hodBa£
 *
rfba£
 )

152 
fM‘hodBa£
 = 
rfba£
;

153 
fM‘hodRuËF™
 = 
dyÇmic_ÿ¡
<cÚ¡ 
M‘hodRuËF™
 *>(
rfba£
);

154 
	}
}

159 
	gTMVA
::
RuËF™
::
	$Cİy
ĞcÚ¡ 
RuËF™
& 
Ùh”
 )

161 if(
this
 !ğ&
Ùh”
) {

162 
fM‘hodRuËF™
 = 
Ùh”
.
	`G‘M‘hodRuËF™
();

163 
fM‘hodBa£
 = 
Ùh”
.
	`G‘M‘hodBa£
();

164 
fT¿ššgEv’ts
 = 
Ùh”
.
	`G‘T¿ššgEv’ts
();

167 
fFÜe¡
 = 
Ùh”
.
	`G‘FÜe¡
();

168 
fRuËEn£mbË
 = 
Ùh”
.
	`G‘RuËEn£mbË
();

170 
	}
}

175 
DoubË_t
 
	gTMVA
::
RuËF™
::
C®cWeightSum
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
, 
UIÁ_t
 
Ãve
 )

177 ià(
	gev’ts
==0)  0.0;

178 ià(
	gÃve
==0è
Ãve
=
ev’ts
->
size
();

180 
DoubË_t
 
	gsumw
=0;

181 
UIÁ_t
 
	g›
=0; ie<
	gÃve
; ie++) {

182 
	gsumw
 +ğ((*
ev’ts
)[
›
])->
G‘Weight
();

184  
	gsumw
;

190 
	gTMVA
::
RuËF™
::
	$S‘MsgTy³
Ğ
EMsgTy³
 
t
 )

192 
fLogg”
->
	`S‘MšTy³
(
t
);

193 
fRuËEn£mbË
.
	`S‘MsgTy³
(
t
);

194 
fRuËF™P¬ams
.
	`S‘MsgTy³
(
t
);

195 
	}
}

200 
	gTMVA
::
RuËF™
::
	$BudT»e
Ğ
DecisiÚT»e
 *
dt
 )

202 ià(
dt
==0) ;

203 ià(
fM‘hodRuËF™
==0) {

204 
	`Log
(è<< 
kFATAL
 << "RuËF™::BudT»e(è- A‰em±šgØbud‡»NOT from‡ M‘hodRuËF™" << 
Endl
;

206 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> 
evevec
;

207 
UIÁ_t
 
›
=0; ie<
fNT»eSam¶e
; ie++) {

208 
evevec
.
	`push_back
(
fT¿ššgEv’tsRndm
[
›
]);

210 
dt
->
	`BudT»e
(
evevec
);

211 ià(
fM‘hodRuËF™
->
	`G‘PruÃM‘hod
(è!ğ
DecisiÚT»e
::
kNoPrunšg
) {

212 
dt
->
	`S‘PruÃM‘hod
(
fM‘hodRuËF™
->
	`G‘PruÃM‘hod
());

213 
dt
->
	`S‘PruÃSŒ’gth
(
fM‘hodRuËF™
->
	`G‘PruÃSŒ’gth
());

214 
dt
->
	`PruÃT»e
();

216 
	}
}

221 
	gTMVA
::
RuËF™
::
	$MakeFÜe¡
()

223 ià(
fM‘hodRuËF™
==0) {

224 
	`Log
(è<< 
kFATAL
 << "RuËF™::BudT»e(è- A‰em±šgØbud‡»NOT from‡ M‘hodRuËF™" << 
Endl
;

226 
	`Log
(è<< 
kDEBUG
 << "C»©šg‡ fÜe¡ w™h " << 
fM‘hodRuËF™
->
	`G‘NT»es
(è<< " decisiÚ»es" << 
Endl
;

227 
	`Log
(è<< 
kDEBUG
 << "Each»i buˆusšg‡„ªdom sub§m¶w™h " << 
fNT»eSam¶e
 << "ƒv’ts" << 
Endl
;

229 
Tim”
 
	`tim”
Ğ
fM‘hodRuËF™
->
	`G‘NT»es
(), "RuleFit" );

232 
IÁ_t
 
nsig
,
nbkg
;

234 
TRªdom3
 
ºdG’
;

240 
BoŞ_t
 
u£Boo¡
 = 
fM‘hodRuËF™
->
	`U£Boo¡
();

242 ià(
u£Boo¡
è
	`SaveEv’tWeights
();

244 
IÁ_t
 
i
=0; i<
fM‘hodRuËF™
->
	`G‘NT»es
(); i++) {

246 ià(!
u£Boo¡
è
	`ReshufæeEv’ts
();

247 
nsig
=0;

248 
nbkg
=0;

249 
UIÁ_t
 
›
 = 0; ie<
fNT»eSam¶e
; ie++) {

250 ià(
fM‘hodBa£
->
	`D©aInfo
().
	`IsSigÇl
(
fT¿ššgEv’tsRndm
[
›
])è
nsig
++;

251 
nbkg
++;

256 
DecisiÚT»e
 *
dt
=
nuÎ±r
;

257 
BoŞ_t
 
ŒyAgaš
=
kTRUE
;

258 
IÁ_t
 
Ár›s
=0;

259 cÚ¡ 
IÁ_t
 
Ár›sMax
=10;

260 
DoubË_t
 
änd
 = 0.;

261 
ŒyAgaš
) {

262 
änd
 = 100*
ºdG’
.
	`UnifÜm
Ğ
fM‘hodRuËF™
->
	`G‘MšF¿cNEve
(), 0.5*fM‘hodRuËF™->
	`G‘MaxF¿cNEve
() );

263 
IÁ_t
 
işass
 = 0;

264 
BoŞ_t
 
u£Rªdomi£dT»e
 = !
u£Boo¡
;

265 
dt
 = 
Ãw
 
	`DecisiÚT»e
Ğ
fM‘hodRuËF™
->
	`G‘S•¬©iÚBa£
(), 
änd
, fM‘hodRuËF™->
	`G‘NCuts
(), &(fM‘hodRuËF™->
	`D©aInfo
()), 
işass
, 
u£Rªdomi£dT»e
);

266 
dt
->
	`S‘NV¬s
(
fM‘hodBa£
->
	`G‘Nv¬
());

268 
	`BudT»e
(
dt
);

269 ià(
dt
->
	`G‘NNodes
()<3) {

270 
d–‘e
 
dt
;

271 
dt
=0;

273 
Ár›s
++;

274 
ŒyAgaš
 = ((
dt
==0è&& (
Ár›s
<
Ár›sMax
));

276 ià(
dt
) {

277 
fFÜe¡
.
	`push_back
(
dt
);

278 ià(
u£Boo¡
è
	`Boo¡
(
dt
);

282 
	`Log
(è<< 
kWARNING
 << "------------------------------------------------------------------" << 
Endl
;

283 
	`Log
(è<< 
kWARNING
 << " Faed growšg‡»ev’‡á” " << 
Ár›sMax
 << "rŸls" << 
Endl
;

284 
	`Log
(è<< 
kWARNING
 << " PossibË sŞutiÚs: " << 
Endl
;

285 
	`Log
(è<< 
kWARNING
 << " 1. inü—£hnumb” oàŒaššgƒv’ts" << 
Endl
;

286 
	`Log
(è<< 
kWARNING
 << " 2. s‘‡†ow” mš f¿ùiÚ cuˆ(fEv’tsMš)" << 
Endl
;

287 
	`Log
(è<< 
kWARNING
 << " 3. mayb®sØdeü—£hmax f¿ùiÚ cuˆ(fEv’tsMax)" << 
Endl
;

288 
	`Log
(è<< 
kWARNING
 << " Iàthabovw¬nšg occur ¿»ly oÆy, iˆÿÀbignÜed" << 
Endl
;

289 
	`Log
(è<< 
kWARNING
 << "------------------------------------------------------------------" << 
Endl
;

292 
	`Log
(è<< 
kDEBUG
 << "BuˆŒ“ w™h mšimum cuˆ© N = " << 
änd
 <<"%ƒvents"

293 << " => NÒodesèğ" << 
fFÜe¡
.
	`back
()->
	`G‘NNodes
()

294 << " ;‚Ñr›sèğ" << 
Ár›s


295 << 
Endl
;

299 ià(
u£Boo¡
è
	`Re¡ÜeEv’tWeights
();

302 
	`FÜe¡Sti¡ics
();

303 
	}
}

308 
	gTMVA
::
RuËF™
::
	$SaveEv’tWeights
()

310 
fEv’tWeights
.
	`ş—r
();

311 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
™”©Ü
 
e
=
fT¿ššgEv’ts
.
	`begš
();ƒ!=fT¿ššgEv’ts.
	`’d
();ƒ++) {

312 
DoubË_t
 
w
 = (*
e
)->
	`G‘Boo¡Weight
();

313 
fEv’tWeights
.
	`push_back
(
w
);

315 
	}
}

320 
	gTMVA
::
RuËF™
::
	$Re¡ÜeEv’tWeights
()

322 
UIÁ_t
 
›
=0;

323 ià(
fEv’tWeights
.
	`size
(è!ğ
fT¿ššgEv’ts
.size()) {

324 
	`Log
(è<< 
kERROR
 << "RuËF™::Re¡ÜeEv’tWeights(èÿÎed w™houˆhavšg c®Ëd SaveEv’tWeights(èbefÜe!" << 
Endl
;

327 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
™”©Ü
 
e
=
fT¿ššgEv’ts
.
	`begš
();ƒ!=fT¿ššgEv’ts.
	`’d
();ƒ++) {

328 (*
e
)->
	`S‘Boo¡Weight
(
fEv’tWeights
[
›
]);

329 
›
++;

331 
	}
}

338 
	gTMVA
::
RuËF™
::
	$Boo¡
Ğ
DecisiÚT»e
 *
dt
 )

340 
DoubË_t
 
sumw
=0;

341 
DoubË_t
 
sumwçl£
=0;

343 
¡d
::
veùÜ
<
Ch¬_t
> 
cÜ»ùS–eùed
;

345 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
™”©Ü
 
e
=
fT¿ššgEv’ts
.
	`begš
();ƒ!=fT¿ššgEv’ts.
	`’d
();ƒ++) {

346 
BoŞ_t
 
isSigÇlTy³
 = (
dt
->
	`CheckEv’t
(*
e
,
kTRUE
) > 0.5 );

347 
DoubË_t
 
w
 = (*
e
)->
	`G‘Weight
();

348 
sumw
 +ğ
w
;

350 ià(
isSigÇlTy³
 =ğ
fM‘hodBa£
->
	`D©aInfo
().
	`IsSigÇl
(*
e
)) {

351 
cÜ»ùS–eùed
.
	`push_back
(
kTRUE
);

354 
sumwçl£
+ğ
w
;

355 
cÜ»ùS–eùed
.
	`push_back
(
kFALSE
);

359 
DoubË_t
 
”r
 = 
sumwçl£
/
sumw
;

363 
DoubË_t
 
boo¡Weight
 = (
”r
>0 ? (1.0-err)/err : 1000.0);

364 
DoubË_t
 
ÃwSumw
=0.0;

365 
UIÁ_t
 
›
=0;

367 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
™”©Ü
 
e
=
fT¿ššgEv’ts
.
	`begš
();ƒ!=fT¿ššgEv’ts.
	`’d
();ƒ++) {

368 ià(!
cÜ»ùS–eùed
[
›
])

369 (*
e
)->
	`S‘Boo¡Weight
Ğ(*e)->
	`G‘Boo¡Weight
(è* 
boo¡Weight
);

370 
ÃwSumw
+=(*
e
)->
	`G‘Weight
();

371 
›
++;

374 
DoubË_t
 
sÿË
 = 
sumw
/
ÃwSumw
;

375 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
™”©Ü
 
e
=
fT¿ššgEv’ts
.
	`begš
();ƒ!=fT¿ššgEv’ts.
	`’d
();ƒ++) {

376 (*
e
)->
	`S‘Boo¡Weight
Ğ(*e)->
	`G‘Boo¡Weight
(è* 
sÿË
);

378 
	`Log
(è<< 
kDEBUG
 << "boo¡Weighˆğ" << 
boo¡Weight
 << " sÿË = " << 
sÿË
 << 
Endl
;

379 
	}
}

385 
	gTMVA
::
RuËF™
::
	$FÜe¡Sti¡ics
()

387 
UIÁ_t
 
Á»es
 = 
fFÜe¡
.
	`size
();

388 ià(
Á»es
==0) ;

389 cÚ¡ 
DecisiÚT»e
 *
Œ“
;

390 
DoubË_t
 
sumn2
 = 0;

391 
DoubË_t
 
sumn
 = 0;

392 
DoubË_t
 
nd
;

393 
UIÁ_t
 
i
=0; i<
Á»es
; i++) {

394 
Œ“
 = 
fFÜe¡
[
i
];

395 
nd
 = 
	`DoubË_t
(
Œ“
->
	`G‘NNodes
());

396 
sumn
 +ğ
nd
;

397 
sumn2
 +ğ
nd
*nd;

399 
DoubË_t
 
sig
 = 
TM©h
::
	`Sq¹
Ğ
	`gToŞs
().
	`Compu‹V¬Ÿnû
Ğ
sumn2
, 
sumn
, 
Á»es
 ));

400 
	`Log
(è<< 
kVERBOSE
 << "Node š»es:‡v”ag& std dev = " << 
sumn
/
Á»es
 << " , " << 
sig
 << 
Endl
;

401 
	}
}

408 
	gTMVA
::
RuËF™
::
	$F™CÛffic›Ás
()

410 
	`Log
(è<< 
kVERBOSE
 << "F™tšg„uË/lš—¸‹rms" << 
Endl
;

411 
fRuËF™P¬ams
.
	`MakeGDP©h
();

412 
	}
}

417 
	gTMVA
::
RuËF™
::
	$C®cImpÜnû
()

419 
	`Log
(è<< 
kVERBOSE
 << "C®cuÏtšg impÜnû" << 
Endl
;

420 
fRuËEn£mbË
.
	`C®cImpÜnû
();

421 
fRuËEn£mbË
.
	`CËªupRuËs
();

422 
fRuËEn£mbË
.
	`CËªupLš—r
();

423 
fRuËEn£mbË
.
	`C®cV¬ImpÜnû
();

424 
	`Log
(è<< 
kVERBOSE
 << "Flšg„uË sti¡ics" << 
Endl
;

425 
fRuËEn£mbË
.
	`RuËRe¥Ú£Sts
();

426 
	}
}

431 
DoubË_t
 
	gTMVA
::
RuËF™
::
	$Ev®Ev’t
ĞcÚ¡ 
Ev’t
& 
e
 )

433  
fRuËEn£mbË
.
	`Ev®Ev’t
Ğ
e
 );

434 
	}
}

439 
	gTMVA
::
RuËF™
::
S‘T¿ššgEv’ts
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *>& 
–
 )

441 ià(
fM‘hodRuËF™
==0è
Log
(è<< 
kFATAL
 << "RuËF™::S‘T¿ššgEv’t - M‘hodRuËF™‚Ù in™Ÿlized" << 
Endl
;

442 
UIÁ_t
 
	gÃve
 = 
–
.
size
();

443 ià(
	gÃve
==0è
Log
(è<< 
kWARNING
 << "AÀem±y sam¶oàŒaššgƒv’t wa giv’" << 
Endl
;

446 
	gfT¿ššgEv’ts
.
ş—r
();

447 
	gfT¿ššgEv’tsRndm
.
ş—r
();

448 
UIÁ_t
 
	gi
=0; i<
	gÃve
; i++) {

449 
	gfT¿ššgEv’ts
.
push_back
(
¡©ic_ÿ¡
< cÚ¡ 
Ev’t
 *>(
–
[
i
]));

450 
	gfT¿ššgEv’tsRndm
.
push_back
(
¡©ic_ÿ¡
< cÚ¡ 
Ev’t
 *>(
–
[
i
]));

454 
	g¡d
::
¿ndom_shufæe
Ğ
fT¿ššgEv’tsRndm
.
begš
(), fT¿ššgEv’tsRndm.
’d
() );

457 
	gfNT»eSam¶e
 = 
¡©ic_ÿ¡
<
UIÁ_t
>(
Ãve
*
fM‘hodRuËF™
->
G‘T»eEveF¿c
());

458 
Log
(è<< 
	gkDEBUG
 << "Numb” oàev’t ³¸Œ“ : " << 
	gfNT»eSam¶e


459 << " ( NÓv’tsèğ" << 
	gÃve
 << " )"

460 << "„ªdomly d¿wÀw™houˆ»¶aûm’t" << 
	gEndl
;

466 
	gTMVA
::
RuËF™
::
G‘RndmSam¶eEv’ts
(
¡d
::
veùÜ
< cÚ¡ 
Ev’t
 * > & 
evevec
, 
UIÁ_t
 
Ãv’ts
)

468 
ReshufæeEv’ts
();

469 ià((
	gÃv’ts
<
	gfT¿ššgEv’tsRndm
.
size
()) && (nevents>0)) {

470 
	gevevec
.
»size
(
Ãv’ts
);

471 
UIÁ_t
 
	g›
=0; ie<
	gÃv’ts
; ie++) {

472 
	gevevec
[
›
] = 
fT¿ššgEv’tsRndm
[ie];

476 
Log
(è<< 
	gkWARNING
 << "GetRndmSampleEvents() :„equested sub sample size†argerhanotal size (BUG!).";

485 
	gTMVA
::
RuËF™
::
NÜmVisHi¡s
(
¡d
::
veùÜ
<
TH2F
 *> & 
hli¡
)

487 ià(
hli¡
.
em±y
()) ;

489 
DoubË_t
 
	gwmš
=0;

490 
DoubË_t
 
	gwmax
=0;

491 
DoubË_t
 
	gw
,
	gwm
;

492 
DoubË_t
 
	gawmš
;

493 
DoubË_t
 
	gsÿË
;

494 
UIÁ_t
 
	gi
=0; i<
	ghli¡
.
size
(); i++) {

495 
TH2F
 *
	ghs
 = 
hli¡
[
i
];

496 
	gw
 = 
hs
->
G‘Maximum
();

497 
	gwm
 = 
hs
->
G‘Mšimum
();

498 ià(
	gi
==0) {

499 
wmš
=
wm
;

500 
	gwmax
=
w
;

503 ià(
	gw
>
	gwmax
èwmax=
w
;

504 ià(
	gwm
<
	gwmš
èwmš=
wm
;

507 
	gawmš
 = 
TM©h
::
Abs
(
wmš
);

508 
DoubË_t
 
	gu£mš
,
	gu£max
;

509 ià(
	gawmš
>
	gwmax
) {

510 
	gsÿË
 = 1.0/
awmš
;

511 
	gu£mš
 = -1.0;

512 
	gu£max
 = 
sÿË
*
wmax
;

515 
	gsÿË
 = 1.0/
wmax
;

516 
	gu£mš
 = 
sÿË
*
wmš
;

517 
	gu£max
 = 1.0;

521 
UIÁ_t
 
	gi
=0; i<
	ghli¡
.
size
(); i++) {

522 
TH2F
 *
	ghs
 = 
hli¡
[
i
];

523 
	ghs
->
SÿË
(
sÿË
);

524 
	ghs
->
S‘Mšimum
(
u£mš
);

525 
	ghs
->
S‘Maximum
(
u£max
);

532 
	gTMVA
::
RuËF™
::
	$FlCut
(
TH2F
* 
h2
, cÚ¡ 
RuË
 *
ruË
, 
IÁ_t
 
všd
)

534 ià(
ruË
==0) ;

535 ià(
h2
==0) ;

537 
DoubË_t
 
rmš
, 
rmax
;

538 
BoŞ_t
 
dÜmš
,
dÜmax
;

539 
BoŞ_t
 
ruËHasV¬
 = 
ruË
->
	`G‘RuËCut
()->
	`G‘CutRªge
(
všd
,
rmš
,
rmax
,
dÜmš
,
dÜmax
);

540 ià(!
ruËHasV¬
) ;

542 
IÁ_t
 
fœ¡bš
 = 
h2
->
	`G‘Bš
(1,1,1);

543 if(
fœ¡bš
<0) firstbin=0;

544 
IÁ_t
 
Ï¡bš
 = 
h2
->
	`G‘Bš
(h2->
	`G‘NbšsX
(),1,1);

545 
IÁ_t
 
bšmš
=(
dÜmš
 ? 
h2
->
	`FšdBš
(
rmš
,0.5):
fœ¡bš
);

546 
IÁ_t
 
bšmax
=(
dÜmax
 ? 
h2
->
	`FšdBš
(
rmax
,0.5):
Ï¡bš
);

547 
IÁ_t
 
fbš
;

548 
DoubË_t
 
xbšw
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšWidth
(
fœ¡bš
);

549 
DoubË_t
 
fbmš
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšLowEdge
(
bšmš
-
fœ¡bš
+1);

550 
DoubË_t
 
lbmax
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšLowEdge
(
bšmax
-
fœ¡bš
+1)+
xbšw
;

551 
DoubË_t
 
fbäac
 = (
dÜmš
 ? ((
fbmš
+
xbšw
-
rmš
)/xbinw):1.0);

552 
DoubË_t
 
lbäac
 = (
dÜmax
 ? ((
rmax
-
lbmax
+
xbšw
)/xbinw):1.0);

553 
DoubË_t
 
f
;

554 
DoubË_t
 
xc
;

555 
DoubË_t
 
v®
;

557 
IÁ_t
 
bš
 = 
bšmš
; bš<
bšmax
+1; bin++) {

558 
fbš
 = 
bš
-
fœ¡bš
+1;

559 ià(
bš
==
bšmš
) {

560 
f
 = 
fbäac
;

562 ià(
bš
==
bšmax
) {

563 
f
 = 
lbäac
;

566 
f
 = 1.0;

568 
xc
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšC’‹r
(
fbš
);

570 ià(
fVisHi¡sU£Imp
) {

571 
v®
 = 
ruË
->
	`G‘ImpÜnû
();

574 
v®
 = 
ruË
->
	`G‘CÛffic›Á
()*ruË->
	`G‘SuµÜt
();

576 
h2
->
	`Fl
(
xc
,0.5,
v®
*
f
);

578 
	}
}

583 
	gTMVA
::
RuËF™
::
	$FlLš
(
TH2F
* 
h2
,
IÁ_t
 
všd
)

585 ià(
h2
==0) ;

586 ià(!
fRuËEn£mbË
.
	`DoLš—r
()) ;

588 
IÁ_t
 
fœ¡bš
 = 1;

589 
IÁ_t
 
Ï¡bš
 = 
h2
->
	`G‘NbšsX
();

590 
DoubË_t
 
xc
;

591 
DoubË_t
 
v®
;

592 ià(
fVisHi¡sU£Imp
) {

593 
v®
 = 
fRuËEn£mbË
.
	`G‘LšImpÜnû
(
všd
);

596 
v®
 = 
fRuËEn£mbË
.
	`G‘LšCÛffic›Ás
(
všd
);

598 
IÁ_t
 
bš
 = 
fœ¡bš
; bš<
Ï¡bš
+1; bin++) {

599 
xc
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšC’‹r
(
bš
);

600 
h2
->
	`Fl
(
xc
,0.5,
v®
);

602 
	}
}

607 
	gTMVA
::
RuËF™
::
	$FlCÜr
(
TH2F
* 
h2
,cÚ¡ 
RuË
 *
ruË
,
IÁ_t
 
vx
, IÁ_ˆ
vy
)

609 ià(
ruË
==0) ;

610 ià(
h2
==0) ;

611 
DoubË_t
 
v®
;

612 ià(
fVisHi¡sU£Imp
) {

613 
v®
 = 
ruË
->
	`G‘ImpÜnû
();

616 
v®
 = 
ruË
->
	`G‘CÛffic›Á
()*ruË->
	`G‘SuµÜt
();

619 
DoubË_t
 
rxmš
, 
rxmax
, 
rymš
, 
rymax
;

620 
BoŞ_t
 
dÜxmš
, 
dÜxmax
, 
dÜymš
, 
dÜymax
;

624 
BoŞ_t
 
ruËHasV¬X
 = 
ruË
->
	`G‘RuËCut
()->
	`G‘CutRªge
(
vx
,
rxmš
,
rxmax
,
dÜxmš
,
dÜxmax
);

625 
BoŞ_t
 
ruËHasV¬Y
 = 
ruË
->
	`G‘RuËCut
()->
	`G‘CutRªge
(
vy
,
rymš
,
rymax
,
dÜymš
,
dÜymax
);

626 ià(!(
ruËHasV¬X
 || 
ruËHasV¬Y
)) ;

628 
DoubË_t
 
vxmš
 = (
dÜxmš
 ? 
rxmš
:
h2
->
	`G‘Xaxis
()->
	`G‘Xmš
());

629 
DoubË_t
 
vxmax
 = (
dÜxmax
 ? 
rxmax
:
h2
->
	`G‘Xaxis
()->
	`G‘Xmax
());

630 
DoubË_t
 
vymš
 = (
dÜymš
 ? 
rymš
:
h2
->
	`G‘Yaxis
()->
	`G‘Xmš
());

631 
DoubË_t
 
vymax
 = (
dÜymax
 ? 
rymax
:
h2
->
	`G‘Yaxis
()->
	`G‘Xmax
());

633 
IÁ_t
 
bšxmš
 = 
h2
->
	`G‘Xaxis
()->
	`FšdBš
(
vxmš
);

634 
IÁ_t
 
bšxmax
 = 
h2
->
	`G‘Xaxis
()->
	`FšdBš
(
vxmax
);

635 
IÁ_t
 
bšymš
 = 
h2
->
	`G‘Yaxis
()->
	`FšdBš
(
vymš
);

636 
IÁ_t
 
bšymax
 = 
h2
->
	`G‘Yaxis
()->
	`FšdBš
(
vymax
);

638 
DoubË_t
 
xbšw
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšWidth
(
bšxmš
);

639 
DoubË_t
 
ybšw
 = 
h2
->
	`G‘Yaxis
()->
	`G‘BšWidth
(
bšxmš
);

640 
DoubË_t
 
xbšmš
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšLowEdge
(
bšxmš
);

641 
DoubË_t
 
xbšmax
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšLowEdge
(
bšxmax
)+
xbšw
;

642 
DoubË_t
 
ybšmš
 = 
h2
->
	`G‘Yaxis
()->
	`G‘BšLowEdge
(
bšymš
);

643 
DoubË_t
 
ybšmax
 = 
h2
->
	`G‘Yaxis
()->
	`G‘BšLowEdge
(
bšymax
)+
ybšw
;

645 
DoubË_t
 
fxbšmš
 = (
dÜxmš
 ? ((
xbšmš
+
xbšw
-
vxmš
)/xbinw):1.0);

646 
DoubË_t
 
fxbšmax
 = (
dÜxmax
 ? ((
vxmax
-
xbšmax
+
xbšw
)/xbinw):1.0);

647 
DoubË_t
 
fybšmš
 = (
dÜymš
 ? ((
ybšmš
+
ybšw
-
vymš
)/ybinw):1.0);

648 
DoubË_t
 
fybšmax
 = (
dÜymax
 ? ((
vymax
-
ybšmax
+
ybšw
)/ybinw):1.0);

650 
DoubË_t
 
fx
,
fy
;

651 
DoubË_t
 
xc
,
yc
;

653 
IÁ_t
 
bšx
 = 
bšxmš
; bšx<
bšxmax
+1; binx++) {

654 ià(
bšx
==
bšxmš
) {

655 
fx
 = 
fxbšmš
;

657 ià(
bšx
==
bšxmax
) {

658 
fx
 = 
fxbšmax
;

661 
fx
 = 1.0;

663 
xc
 = 
h2
->
	`G‘Xaxis
()->
	`G‘BšC’‹r
(
bšx
);

664 
IÁ_t
 
bšy
 = 
bšymš
; bšy<
bšymax
+1; biny++) {

665 ià(
bšy
==
bšymš
) {

666 
fy
 = 
fybšmš
;

668 ià(
bšy
==
bšymax
) {

669 
fy
 = 
fybšmax
;

672 
fy
 = 1.0;

674 
yc
 = 
h2
->
	`G‘Yaxis
()->
	`G‘BšC’‹r
(
bšy
);

675 
h2
->
	`Fl
(
xc
,
yc
,
v®
*
fx
*
fy
);

678 
	}
}

683 
	gTMVA
::
RuËF™
::
FlVisHi¡Cut
(cÚ¡ 
RuË
* 
ruË
, 
¡d
::
veùÜ
<
TH2F
 *> & 
hli¡
)

685 
IÁ_t
 
nhi¡s
 = 
hli¡
.
size
();

686 
IÁ_t
 
	gnv¬
 = 
fM‘hodBa£
->
G‘Nv¬
();

687 ià(
	gnhi¡s
!=
nv¬
è
Log
(è<< 
kFATAL
 << "BUG TRAP:‚umb” oàhi¡ i nÙƒqu®hnumb” oàv¬ŸbËs!" << 
Endl
;

689 
	g¡d
::
veùÜ
<
IÁ_t
> 
všdex
;

690 
TSŒšg
 
	gh¡r
;

692 
IÁ_t
 
	gih
=0; ih<
	gnhi¡s
; ih++) {

693 
	gh¡r
 = 
hli¡
[
ih
]->
G‘T™Ë
();

694 
IÁ_t
 
	giv
=0; iv<
	gnv¬
; iv++) {

695 ià(
	gfM‘hodBa£
->
G‘IÅutT™Ë
(
iv
è=ğ
h¡r
)

696 
všdex
.
push_back
(
iv
);

700 
IÁ_t
 
	giv
=0; iv<
	gnv¬
; iv++) {

701 ià(
	gruË
) {

702 ià(
	gruË
->
CÚšsV¬ŸbË
(
všdex
[
iv
])) {

703 
FlCut
(
hli¡
[
iv
],
ruË
,
všdex
[iv]);

707 
FlLš
(
hli¡
[
iv
],
všdex
[iv]);

714 
	gTMVA
::
RuËF™
::
FlVisHi¡CÜr
(cÚ¡ 
RuË
 * 
ruË
, 
¡d
::
veùÜ
<
TH2F
 *> & 
hli¡
)

716 ià(
ruË
==0) ;

717 
DoubË_t
 
	gruËimp
 = 
ruË
->
G‘ImpÜnû
();

718 ià(!(
	gruËimp
>0)) ;

719 ià(
	gruËimp
<
	gfRuËEn£mbË
.
G‘ImpÜnûCut
()) ;

721 
IÁ_t
 
	gnhi¡s
 = 
hli¡
.
size
();

722 
IÁ_t
 
	gnv¬
 = 
fM‘hodBa£
->
G‘Nv¬
();

723 
IÁ_t
 
	gncÜr
 = (
nv¬
*(nvar+1)/2)-nvar;

724 ià(
	gnhi¡s
!=
ncÜr
è
Log
(è<< 
kERROR
 << "BUG TRAP:‚umber of corr hists is‚ot correct!‚corr = "

725 << 
ncÜr
 << "‚v¬ = " << 
nv¬
 << "‚hi¡ ğ" << 
nhi¡s
 << 
Endl
;

727 
	g¡d
::
veùÜ
< 
¡d
::
·œ
<
IÁ_t
,
	gIÁ_t
> > 
	gvšdex
;

728 
TSŒšg
 
	gh¡r
, 
	gv¬1
, 
	gv¬2
;

729 
IÁ_t
 
	giv1
=0,
	giv2
=0;

731 
IÁ_t
 
	gih
=0; ih<
	gnhi¡s
; ih++) {

732 
	gh¡r
 = 
hli¡
[
ih
]->
G‘Name
();

733 ià(
G‘CÜrV¬s
Ğ
h¡r
, 
v¬1
, 
v¬2
 )) {

734 
	giv1
 = 
fM‘hodBa£
->
D©aInfo
().
FšdV¬Index
Ğ
v¬1
 );

735 
	giv2
 = 
fM‘hodBa£
->
D©aInfo
().
FšdV¬Index
Ğ
v¬2
 );

736 
	gvšdex
.
push_back
Ğ
¡d
::
·œ
<
IÁ_t
,IÁ_t>(
iv2
,
iv1
) );

739 
Log
(è<< 
	gkERROR
 << "BUG TRAP: should‚Ù bh”- faed g‘tšg v¬1‡nd v¬2" << 
	gEndl
;

743 
IÁ_t
 
	gih
=0; ih<
	gnhi¡s
; ih++) {

744 iàĞ(
	gruË
->
CÚšsV¬ŸbË
(
všdex
[
ih
].
fœ¡
)) ||

745 (
	gruË
->
CÚšsV¬ŸbË
(
všdex
[
ih
].
£cÚd
)) ) {

746 
FlCÜr
(
hli¡
[
ih
],
ruË
,
všdex
[ih].
fœ¡
,všdex[ih].
£cÚd
);

753 
BoŞ_t
 
	gTMVA
::
RuËF™
::
	$G‘CÜrV¬s
(
TSŒšg
 & 
t™Ë
, TSŒšg & 
v¬1
, TSŒšg & 
v¬2
)

755 
v¬1
="";

756 
v¬2
="";

757 if(!
t™Ë
.
	`BegšsW™h
("sÿt_")è 
kFALSE
;

759 
TSŒšg
 
t™ËCİy
 = 
	`t™Ë
(5,
t™Ë
.
	`L’gth
());

760 if(
t™ËCİy
.
	`Index
("_RF2D")>=0èt™ËCİy.
	`Remove
(titleCopy.Index("_RF2D"));

762 
IÁ_t
 
¥l™Pos
 = 
t™ËCİy
.
	`Index
("_vs_");

763 if(
¥l™Pos
>=0) {

764 
v¬1
 = 
	`t™ËCİy
(0,
¥l™Pos
);

765 
v¬2
 = 
	`t™ËCİy
(
¥l™Pos
+4, 
t™ËCİy
.
	`L’gth
());

766  
kTRUE
;

769 
v¬1
 = 
t™ËCİy
;

770  
kFALSE
;

772 
	}
}

776 
	gTMVA
::
RuËF™
::
	$MakeVisHi¡s
()

778 cÚ¡ 
TSŒšg
 
dœeùÜ›s
[5] = { "InputVariables_Id",

784 cÚ¡ 
TSŒšg
 
cÜrDœName
 = "CorrelationPlots";

786 
TDœeùÜy
* 
roÙDœ
 = 
fM‘hodBa£
->
	`G‘Fe
();

787 
TDœeùÜy
* 
v¬Dœ
 = 0;

788 
TDœeùÜy
* 
cÜrDœ
 = 0;

790 
TDœeùÜy
* 
m‘hodDœ
 = 
fM‘hodBa£
->
	`Ba£Dœ
();

791 
TSŒšg
 
v¬DœName
;

793 
BoŞ_t
 
dÚe
=(
roÙDœ
==0);

794 
IÁ_t
 
ty³
=0;

795 ià(
dÚe
) {

796 
	`Log
(è<< 
kWARNING
 << "NØba£dœ - BUG??" << 
Endl
;

799 !
dÚe
) {

800 
v¬Dœ
 = (
TDœeùÜy
*)
roÙDœ
->
	`G‘
Ğ
dœeùÜ›s
[
ty³
] );

801 
ty³
++;

802 
dÚe
 = ((
v¬Dœ
!=0è|| (
ty³
>4));

804 ià(
v¬Dœ
==0) {

805 
	`Log
(è<< 
kWARNING
 << "NØšpuˆv¬ŸbË dœeùÜy found - BUG?" << 
Endl
;

808 
cÜrDœ
 = (
TDœeùÜy
*)
v¬Dœ
->
	`G‘
Ğ
cÜrDœName
 );

809 ià(
cÜrDœ
==0) {

810 
	`Log
(è<< 
kWARNING
 << "NØcÜ»ÏtiÚ dœeùÜy found" << 
Endl
;

811 
	`Log
(è<< 
kWARNING
 << "Check fÜ oth” w¬nšg »Ï‹dØcÜ»ÏtiÚ hi¡og¿ms" << 
Endl
;

814 ià(
m‘hodDœ
==0) {

815 
	`Log
(è<< 
kWARNING
 << "NØruËf™ m‘hod dœeùÜy found - BUG?" << 
Endl
;

819 
v¬DœName
 = 
v¬Dœ
->
	`G‘Name
();

820 
v¬Dœ
->
	`cd
();

823 
cÜrDœ
 = (
TDœeùÜy
 *)
v¬Dœ
->
	`G‘
(
cÜrDœName
);

824 ià(
cÜrDœ
==0) {

825 
	`Log
(è<< 
kWARNING
 << "NØcÜ»ÏtiÚ dœeùÜy found : " << 
cÜrDœName
 << 
Endl
;

830 
IÁ_t
 
noPlÙs
 = ((
v¬Dœ
->
	`G‘Li¡OfKeys
())->
	`G‘EÁr›s
()) / 2;

831 
	`Log
(è<< 
kDEBUG
 << "GÙ‚umb” oà¶Ù ğ" << 
noPlÙs
 << 
Endl
;

834 
¡d
::
veùÜ
<
TH2F
 *> 
h1VeùÜ
;

835 
¡d
::
veùÜ
<
TH2F
 *> 
h2CÜrVeùÜ
;

836 
TI‹r
 
	`Ãxt
(
v¬Dœ
->
	`G‘Li¡OfKeys
());

837 
TKey
 *
key
;

838 (
key
 = (
TKey
*)
	`Ãxt
())) {

840 
TCÏss
 *
ş
 = 
gROOT
->
	`G‘CÏss
(
key
->
	`G‘CÏssName
());

841 ià(!
ş
->
	`Inh”™sFrom
(
TH1F
::
	`CÏss
())) ;

842 
TH1F
 *
sig
 = (TH1F*)
key
->
	`R—dObj
();

843 
TSŒšg
 
hÇme
ğ
sig
->
	`G‘Name
();

844 
	`Log
(è<< 
kDEBUG
 << "GÙ hi¡og¿m : " << 
hÇme
 << 
Endl
;

847 ià(
hÇme
.
	`CÚšs
("__S")){

848 
TSŒšg
 
ht™Ë
 = 
sig
->
	`G‘T™Ë
();

849 
ht™Ë
.
	`R•ÏûAÎ
("signal","");

850 
TSŒšg
 
ÃwÇme
 = 
hÇme
;

851 
ÃwÇme
.
	`R•ÏûAÎ
("__Signal","__RF");

852 
ÃwÇme
.
	`R•ÏûAÎ
("__S","__RF");

854 
m‘hodDœ
->
	`cd
();

855 
TH2F
 *
Ãwhi¡
 = 
Ãw
 
	`TH2F
(
ÃwÇme
,
ht™Ë
,
sig
->
	`G‘NbšsX
(),sig->
	`G‘Xaxis
()->
	`G‘Xmš
(),sig->G‘Xaxis()->
	`G‘Xmax
(),

856 1,
sig
->
	`G‘Yaxis
()->
	`G‘Xmš
(),sig->G‘Yaxis()->
	`G‘Xmax
());

857 
v¬Dœ
->
	`cd
();

858 
h1VeùÜ
.
	`push_back
Ğ
Ãwhi¡
 );

862 
cÜrDœ
->
	`cd
();

863 
TSŒšg
 
v¬1
,
v¬2
;

864 
TI‹r
 
	`ÃxtCÜr
(
cÜrDœ
->
	`G‘Li¡OfKeys
());

865 (
key
 = (
TKey
*)
	`ÃxtCÜr
())) {

867 
TCÏss
 *
ş
 = 
gROOT
->
	`G‘CÏss
(
key
->
	`G‘CÏssName
());

868 ià(!
ş
->
	`Inh”™sFrom
(
TH2F
::
	`CÏss
())) ;

869 
TH2F
 *
sig
 = (TH2F*)
key
->
	`R—dObj
();

870 
TSŒšg
 
hÇme
ğ
sig
->
	`G‘Name
();

873 ià((
hÇme
.
	`CÚšs
("scat_")) && (hname.Contains("_Signal"))) {

874 
	`Log
(è<< 
kDEBUG
 << "GÙ hi¡og¿m (2Dè: " << 
hÇme
 << 
Endl
;

875 
TSŒšg
 
ht™Ë
 = 
sig
->
	`G‘T™Ë
();

876 
ht™Ë
.
	`R•ÏûAÎ
("(Signal)","");

877 
TSŒšg
 
ÃwÇme
 = 
hÇme
;

878 
ÃwÇme
.
	`R•ÏûAÎ
("_Signal","_RF2D");

880 
m‘hodDœ
->
	`cd
();

881 cÚ¡ 
IÁ_t
 
»bš
=2;

882 
TH2F
 *
Ãwhi¡
 = 
Ãw
 
	`TH2F
(
ÃwÇme
,
ht™Ë
,

883 
sig
->
	`G‘NbšsX
()/
»bš
,sig->
	`G‘Xaxis
()->
	`G‘Xmš
(),sig->G‘Xaxis()->
	`G‘Xmax
(),

884 
sig
->
	`G‘NbšsY
()/
»bš
,sig->
	`G‘Yaxis
()->
	`G‘Xmš
(),sig->G‘Yaxis()->
	`G‘Xmax
());

885 ià(
	`G‘CÜrV¬s
Ğ
ÃwÇme
, 
v¬1
, 
v¬2
 )) {

886 
IÁ_t
 
iv1
 = 
fM‘hodBa£
->
	`D©aInfo
().
	`FšdV¬Index
(
v¬1
);

887 
IÁ_t
 
iv2
 = 
fM‘hodBa£
->
	`D©aInfo
().
	`FšdV¬Index
(
v¬2
);

888 ià(
iv1
<0) {

889 
sig
->
	`G‘Yaxis
()->
	`S‘T™Ë
(
v¬1
);

892 
sig
->
	`G‘Yaxis
()->
	`S‘T™Ë
(
fM‘hodBa£
->
	`G‘IÅutT™Ë
(
iv1
));

894 ià(
iv2
<0) {

895 
sig
->
	`G‘Xaxis
()->
	`S‘T™Ë
(
v¬2
);

898 
sig
->
	`G‘Xaxis
()->
	`S‘T™Ë
(
fM‘hodBa£
->
	`G‘IÅutT™Ë
(
iv2
));

901 
cÜrDœ
->
	`cd
();

902 
h2CÜrVeùÜ
.
	`push_back
Ğ
Ãwhi¡
 );

906 
v¬Dœ
->
	`cd
();

908 
UIÁ_t
 
ÄuËs
 = 
fRuËEn£mbË
.
	`G‘NRuËs
();

909 cÚ¡ 
RuË
 *
ruË
;

910 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++) {

911 
ruË
 = 
fRuËEn£mbË
.
	`G‘RuËsCÚ¡
(
i
);

912 
	`FlVisHi¡Cut
(
ruË
, 
h1VeùÜ
);

915 
	`FlVisHi¡Cut
(0, 
h1VeùÜ
);

916 
	`NÜmVisHi¡s
(
h1VeùÜ
);

919 
cÜrDœ
->
	`cd
();

921 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++) {

922 
ruË
 = 
fRuËEn£mbË
.
	`G‘RuËsCÚ¡
(
i
);

923 
	`FlVisHi¡CÜr
(
ruË
, 
h2CÜrVeùÜ
);

925 
	`NÜmVisHi¡s
(
h2CÜrVeùÜ
);

928 
m‘hodDœ
->
	`cd
();

929 
UIÁ_t
 
i
=0; i<
h1VeùÜ
.
	`size
(); i++èh1VeùÜ[i]->
	`Wr™e
();

930 
UIÁ_t
 
i
=0; i<
h2CÜrVeùÜ
.
	`size
(); i++èh2CÜrVeùÜ[i]->
	`Wr™e
();

931 
	}
}

936 
	gTMVA
::
RuËF™
::
	$MakeDebugHi¡s
()

938 
TDœeùÜy
* 
m‘hodDœ
 = 
fM‘hodBa£
->
	`Ba£Dœ
();

939 ià(
m‘hodDœ
==0) {

940 
	`Log
(è<< 
kWARNING
 << "<MakeDebugHi¡s> NØruËf™ m‘hod dœeùÜy found - bug?" << 
Endl
;

944 
m‘hodDœ
->
	`cd
();

945 
¡d
::
veùÜ
<
DoubË_t
> 
di¡ªûs
;

946 
¡d
::
veùÜ
<
DoubË_t
> 
âcuts
;

947 
¡d
::
veùÜ
<
DoubË_t
> 
âv¬s
;

948 cÚ¡ 
RuË
 *
ruËA
;

949 cÚ¡ 
RuË
 *
ruËB
;

950 
DoubË_t
 
dABmš
=1000000.0;

951 
DoubË_t
 
dABmax
=-1.0;

952 
UIÁ_t
 
ÄuËs
 = 
fRuËEn£mbË
.
	`G‘NRuËs
();

953 
UIÁ_t
 
i
=0; i<
ÄuËs
; i++) {

954 
ruËA
 = 
fRuËEn£mbË
.
	`G‘RuËsCÚ¡
(
i
);

955 
UIÁ_t
 
j
=
i
+1; j<
ÄuËs
; j++) {

956 
ruËB
 = 
fRuËEn£mbË
.
	`G‘RuËsCÚ¡
(
j
);

957 
DoubË_t
 
dAB
 = 
ruËA
->
	`RuËDi¡
Ğ*
ruËB
, 
kTRUE
 );

958 ià(
dAB
>-0.5) {

959 
UIÁ_t
 
nc
 = 
ruËA
->
	`G‘Ncuts
();

960 
UIÁ_t
 
nv
 = 
ruËA
->
	`G‘NumV¬sU£d
();

961 
di¡ªûs
.
	`push_back
(
dAB
);

962 
âcuts
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
nc
));

963 
âv¬s
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
nv
));

964 ià(
dAB
<
dABmš
) dABmin=dAB;

965 ià(
dAB
>
dABmax
) dABmax=dAB;

970 
TH1F
 *
hi¡Di¡
 = 
Ãw
 
	`TH1F
("RuËDi¡","RuË di¡ªûs",100,
dABmš
,
dABmax
);

971 
TT»e
 *
di¡Ntu¶e
 = 
Ãw
 
	`TT»e
("RuleDistNtuple","RuleDist‚tuple");

972 
DoubË_t
 
ÁDi¡
;

973 
DoubË_t
 
ÁNcuts
;

974 
DoubË_t
 
ÁNv¬s
;

975 
di¡Ntu¶e
->
	`B¿nch
("di¡", &
ÁDi¡
, "dist/D");

976 
di¡Ntu¶e
->
	`B¿nch
("ncuts",&
ÁNcuts
, "ncuts/D");

977 
di¡Ntu¶e
->
	`B¿nch
("nv¬s",&
ÁNv¬s
, "nvars/D");

979 
UIÁ_t
 
i
=0; i<
di¡ªûs
.
	`size
(); i++) {

980 
hi¡Di¡
->
	`Fl
(
di¡ªûs
[
i
]);

981 
ÁDi¡
 = 
di¡ªûs
[
i
];

982 
ÁNcuts
 = 
âcuts
[
i
];

983 
ÁNv¬s
 = 
âv¬s
[
i
];

984 
di¡Ntu¶e
->
	`Fl
();

986 
di¡Ntu¶e
->
	`Wr™e
();

987 
	}
}

	@src/RuleFitAPI.cxx

31 
	~"TMVA/RuËF™API.h
"

33 
	~"TMVA/D©aS‘.h
"

34 
	~"TMVA/D©aS‘Info.h
"

35 
	~"TMVA/M‘hodRuËF™.h
"

36 
	~"TMVA/RuËF™.h
"

37 
	~"TMVA/Tim”.h
"

38 
	~"TMVA/ToŞs.h
"

39 
	~"TMVA/Ty³s.h
"

40 
	~"TMVA/V¬ŸbËInfo.h
"

42 
	~"TROOT.h
"

43 
	~"TSy¡em.h
"

44 
	~"TM©h.h
"

46 
	~<®gÜ™hm
>

48 
CÏssImp
(
TMVA
::
RuËF™API
);

50 
	gTMVA
::
RuËF™API
::
	$RuËF™API
ĞcÚ¡ 
M‘hodRuËF™
 *
rfba£
,

51 
RuËF™
 *
ruËf™
,

52 
EMsgTy³
 
mšTy³
 = 
kINFO
 ) :

53 
	`fM‘hodRuËF™
(
rfba£
),

54 
	`fRuËF™
(
ruËf™
),

55 
	`fRFProg¿m
(
kRfT¿š
),

56 
	`fLogg”
("RuËF™API",
mšTy³
)

59 ià(
rfba£
) {

60 
	`S‘RFWÜkDœ
(
rfba£
->
	`G‘RFWÜkDœ
());

62 
	`S‘RFWÜkDœ
("./rulefit");

64 
	`In™RuËF™
();

65 
	}
}

71 
	gTMVA
::
RuËF™API
::~
	$RuËF™API
()

73 
	}
}

78 
TMVA
::
RuËF™API
::
	$W–comeMes§ge
()

80 
fLogg”
 << 
kINFO


89 << 
Endl
;

90 
	}
}

94 
	gTMVA
::
RuËF™API
::
	$HowtoS‘upRF
()

96 
fLogg”
 << 
kINFO


101 << " mkdœ " << 
fRFWÜkDœ
 << "\n\n"

118 << 
Endl
;

119 
	}
}

124 
	gTMVA
::
RuËF™API
::
	$In™RuËF™
()

126 
	`CheckRFWÜkDœ
();

127 
	`FlIÁP¬msDef
();

128 
	`FlR—lP¬msDef
();

129 
	}
}

134 
	gTMVA
::
RuËF™API
::
	$ImpÜtS‘up
()

136 
fRFIÁP¬ms
.
p
 = 
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

137 
fRFIÁP¬ms
.
max_ruËs
 = 
fM‘hodRuËF™
->
	`G‘RFNruËs
();

138 
fRFIÁP¬ms
.
Œ“_size
 = 
fM‘hodRuËF™
->
	`G‘RFN’dnodes
();

139 
fRFIÁP¬ms
.
·th_¡•s
 = 
fM‘hodRuËF™
->
	`G‘GDNP©hS‹ps
();

141 
fRFR—lP¬ms
.
·th_šc
 = 
fM‘hodRuËF™
->
	`G‘GDP©hS‹p
();

142 
fRFR—lP¬ms
.
§mp_äaù
 = 
fM‘hodRuËF™
->
	`G‘T»eEveF¿c
();

143 
fRFR—lP¬ms
.
Œim_qÁl
 = 
fM‘hodRuËF™
->
	`G‘LšQuªte
();

144 
fRFR—lP¬ms
.
cÚv_çc
 = 
fM‘hodRuËF™
->
	`G‘GDE¼SÿË
();

146 ià(
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`DoOÆyLš—r
() )

147 
fRFIÁP¬ms
.
lmode
 = 
kRfLš—r
;

148 ià(
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`DoOÆyRuËs
() )

149 
fRFIÁP¬ms
.
lmode
 = 
kRfRuËs
;

151 
fRFIÁP¬ms
.
lmode
 = 
kRfBÙh
;

152 
	}
}

157 
	gTMVA
::
RuËF™API
::
	$S‘RFWÜkDœ
(cÚ¡ * 
wdœ
)

159 
fRFWÜkDœ
 = 
wdœ
;

160 
	}
}

168 
	gTMVA
::
RuËF™API
::
	$CheckRFWÜkDœ
()

170 
TSŒšg
 
ŞdDœ
 = 
gSy¡em
->
	`pwd
();

171 ià(!
gSy¡em
->
	`cd
(
fRFWÜkDœ
)) {

172 
fLogg”
 << 
kWARNING
 << "Mu¡ c»©¨ruËf™ dœeùÜy‚amed : " << 
fRFWÜkDœ
 << 
Endl
;

173 
	`HowtoS‘upRF
();

174 
fLogg”
 << 
kFATAL
 << "S‘u°çed -‡bÜtšg!" << 
Endl
;

177 
FILE
 *
f
 = 
	`fİ’
("rf_go.exe","r");

178 ià(
f
==0) {

179 
fLogg”
 << 
kWARNING
 << "NØrf_go.exfš dœeùÜy : " << 
fRFWÜkDœ
 << 
Endl
;

180 
	`HowtoS‘upRF
();

181 
fLogg”
 << 
kFATAL
 << "S‘u°çed -‡bÜtšg!" << 
Endl
;

183 
	`fşo£
(
f
);

184 
gSy¡em
->
	`cd
(
ŞdDœ
.
	`D©a
());

185 
	}
}

190 
	gTMVA
::
RuËF™API
::
	$S‘T¿šP¬ms
()

192 
	`ImpÜtS‘up
();

194 
IÁ_t
 
n
 = 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
();

196 
fRFIÁP¬ms
.
n
 =‚;

197 
fRFProg¿m
 = 
kRfT¿š
;

198 
	}
}

203 
	gTMVA
::
RuËF™API
::
	$S‘Te¡P¬ms
()

205 
	`ImpÜtS‘up
();

206 
IÁ_t
 
n
 = 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NTe¡Ev’ts
();

208 
fRFIÁP¬ms
.
n
 =‚;

209 
fRFProg¿m
 = 
kRfP»diù
;

210 
	}
}

215 
	gTMVA
::
RuËF™API
::
	$FlR—lP¬msDef
()

217 
fRFR—lP¬ms
.
xmiss
 = 9.0e30;

218 
fRFR—lP¬ms
.
Œim_qÁl
 = 0.025;

219 
fRFR—lP¬ms
.
hub”
 = 0.8;

220 
fRFR—lP¬ms
.
š‹r_suµ
 = 3.0;

221 
fRFR—lP¬ms
.
memÜy_·r
 = 0.01;

222 
fRFR—lP¬ms
.
§mp_äaù
 = 0.5;

223 
fRFR—lP¬ms
.
·th_šc
 = 0.01;

224 
fRFR—lP¬ms
.
cÚv_çc
 = 1.1;

225 
	}
}

230 
	gTMVA
::
RuËF™API
::
	$FlIÁP¬msDef
()

232 
fRFIÁP¬ms
.
mode
 = ()
kRfCÏss
;

233 
fRFIÁP¬ms
.
lmode
 = ()
kRfBÙh
;

236 
fRFIÁP¬ms
.
max_ruËs
 = 2000;

237 
fRFIÁP¬ms
.
Œ“_size
 = 4;

238 
fRFIÁP¬ms
.
·th_¥“d
 = 2;

239 
fRFIÁP¬ms
.
·th_xv®
 = 3;

240 
fRFIÁP¬ms
.
·th_¡•s
 = 50000;

241 
fRFIÁP¬ms
.
·th_‹¡äeq
 = 100;

242 
fRFIÁP¬ms
.
Œ“_¡Üe
 = 10000000;

243 
fRFIÁP¬ms
.
ÿt_¡Üe
 = 1000000;

245 
	}
}

250 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eAÎ
()

252 
	`Wr™eIÁP¬ms
();

253 
	`Wr™eR—lP¬ms
();

254 
	`Wr™eLx
();

255 
	`Wr™eProg¿m
();

256 
	`Wr™eV¬Names
();

257 ià(
fRFProg¿m
==
kRfT¿š
è
	`Wr™eT¿š
();

258 ià(
fRFProg¿m
==
kRfP»diù
è
	`Wr™eTe¡
();

259 ià(
fRFProg¿m
==
kRfV¬imp
è
	`Wr™eR—lV¬Imp
();

260  
kTRUE
;

261 
	}
}

266 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eIÁP¬ms
()

268 
¡d
::
of¡»am
 
f
;

269 ià(!
	`O³nRFe
("š¬ms",
f
)è 
kFALSE
;

270 
	`Wr™eIÁ
(
f
,&
fRFIÁP¬ms
.
mode
,(fRFIÁP¬ms)/(
IÁ_t
));

271  
kTRUE
;

272 
	}
}

277 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eR—lP¬ms
()

279 
¡d
::
of¡»am
 
f
;

280 ià(!
	`O³nRFe
("»®·rms",
f
)è 
kFALSE
;

281 
	`Wr™eFlßt
(
f
,&
fRFR—lP¬ms
.
xmiss
,(fRFR—lP¬ms)/(
Flßt_t
));

282  
kTRUE
;

283 
	}
}

293 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eLx
()

295 
fRFLx
.
	`ş—r
();

296 
fRFLx
.
	`»size
(
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
(),1);

298 
¡d
::
of¡»am
 
f
;

299 ià(!
	`O³nRFe
("lx",
f
)è 
kFALSE
;

300 
	`Wr™eIÁ
(
f
,&
fRFLx
[0],fRFLx.
	`size
());

301  
kTRUE
;

302 
	}
}

307 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eProg¿m
()

309 
¡d
::
of¡»am
 
f
;

310 ià(!
	`O³nRFe
("´og¿m",
f
)è 
kFALSE
;

311 
TSŒšg
 
´og¿m
;

312 
fRFProg¿m
) {

313 
kRfT¿š
:

314 
´og¿m
 = "rulefit";

316 
kRfP»diù
:

317 
´og¿m
 = "rulefit_pred";

320 
kRfV¬imp
:

321 
´og¿m
 = "varimp";

324 
fRFProg¿m
 = 
kRfT¿š
;

325 
´og¿m
="rulefit";

328 
f
 << 
´og¿m
;

329  
kTRUE
;

330 
	}
}

335 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eR—lV¬Imp
()

337 
¡d
::
of¡»am
 
f
;

338 ià(!
	`O³nRFe
("»®v¬imp",
f
)è 
kFALSE
;

339 
Flßt_t
 
rvp
[2];

340 
rvp
[0] = 0.0;

341 
rvp
[1] = 0.0;

342 
	`Wr™eFlßt
(
f
,&
rvp
[0],2);

343  
kTRUE
;

344 
	}
}

349 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eRfOut
()

351 
fLogg”
 << 
kWARNING
 << "Wr™eRfOuˆi nÙ y‘ im¶em’‹d" << 
Endl
;

352  
kTRUE
;

353 
	}
}

358 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eRfStus
()

360 
fLogg”
 << 
kWARNING
 << "Wr™eRfStu i nÙ y‘ im¶em’‹d" << 
Endl
;

361  
kTRUE
;

362 
	}
}

367 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eRuËF™Mod
()

369 
fLogg”
 << 
kWARNING
 << "Wr™eRuËF™Mod i nÙ y‘ im¶em’‹d" << 
Endl
;

370  
kTRUE
;

371 
	}
}

376 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eRuËF™Sum
()

378 
fLogg”
 << 
kWARNING
 << "Wr™eRuËF™Sum i nÙ y‘ im¶em’‹d" << 
Endl
;

379  
kTRUE
;

380 
	}
}

385 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eT¿š
()

387 
¡d
::
of¡»am
 
fx
;

388 
¡d
::
of¡»am
 
fy
;

389 
¡d
::
of¡»am
 
fw
;

391 ià(!
	`O³nRFe
("Œaš.x",
fx
)è 
kFALSE
;

392 ià(!
	`O³nRFe
("Œaš.y",
fy
)è 
kFALSE
;

393 ià(!
	`O³nRFe
("Œaš.w",
fw
)è 
kFALSE
;

395 
Flßt_t
 
x
,
y
,
w
;

400 
UIÁ_t
 
iv¬
=0; iv¬<
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
(); ivar++) {

401 
IÁ_t
 
›vt
=0;›vt<
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(); ievt++) {

402 cÚ¡ 
Ev’t
 * 
ev
 = 
fM‘hodRuËF™
->
	`G‘T¿ššgEv’t
(
›vt
);

403 
x
 = 
ev
->
	`G‘V®ue
(
iv¬
);

404 
	`Wr™eFlßt
(
fx
,&
x
,1);

405 ià(
iv¬
==0) {

406 
w
 = 
ev
->
	`G‘Weight
();

407 
y
 = 
fM‘hodRuËF™
->
	`D©aInfo
().
	`IsSigÇl
(
ev
)? 1.0 : -1.0;

408 
	`Wr™eFlßt
(
fy
,&
y
,1);

409 
	`Wr™eFlßt
(
fw
,&
w
,1);

413 
fLogg”
 << 
kINFO
 << "Numb” oàŒaššg d©¨wr™‹n: " << 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NT¿ššgEv’ts
(è<< 
Endl
;

414  
kTRUE
;

415 
	}
}

420 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eTe¡
()

422 
fM‘hodRuËF™
->
	`D©a
()->
	`S‘Cu¼’tTy³
(
Ty³s
::
kTe¡šg
);

424 
¡d
::
of¡»am
 
f
;

426 ià(!
	`O³nRFe
("‹¡.x",
f
)è 
kFALSE
;

428 
Flßt_t
 
vf
;

429 
Flßt_t
 
Ãve
;

431 
Ãve
 = 
¡©ic_ÿ¡
<
Flßt_t
>(
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NEv’ts
());

432 
	`Wr™eFlßt
(
f
,&
Ãve
,1);

438 
UIÁ_t
 
iv¬
=0; iv¬<
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
(); ivar++) {

439 
IÁ_t
 
›vt
=0;›vt<
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NEv’ts
(); ievt++) {

440 
vf
 = 
fM‘hodRuËF™
->
	`G‘Ev’t
(
›vt
)->
	`G‘V®ue
(
iv¬
);

441 
	`Wr™eFlßt
(
f
,&
vf
,1);

444 
fLogg”
 << 
kINFO
 << "Numb” oà‹¡ d©¨wr™‹n: " << 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NEv’ts
(è<< 
Endl
;

446  
kTRUE
;

447 
	}
}

452 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eV¬Names
()

454 
¡d
::
of¡»am
 
f
;

455 ià(!
	`O³nRFe
("v¬Çmes",
f
)è 
kFALSE
;

456 
UIÁ_t
 
iv¬
=0; iv¬<
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
(); ivar++) {

457 
f
 << 
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘V¬ŸbËInfo
(
iv¬
).
	`G‘Ex´essiÚ
() << '\n';

459  
kTRUE
;

460 
	}
}

464 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eV¬Imp
()

468 
fLogg”
 << 
kWARNING
 << "Wr™eV¬Im°i nÙ y‘ im¶em’‹d" << 
Endl
;

469  
kTRUE
;

470 
	}
}

475 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$Wr™eYh©
()

477 
fLogg”
 << 
kWARNING
 << "Wr™eYh© i nÙ y‘ im¶em’‹d" << 
Endl
;

478  
kTRUE
;

479 
	}
}

484 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$R—dYh©
()

486 
fRFYh©
.
	`ş—r
();

488 
¡d
::
if¡»am
 
f
;

489 ià(!
	`O³nRFe
("yh©",
f
)è 
kFALSE
;

490 
IÁ_t
 
Ãve
;

491 
Flßt_t
 
xv®
;

492 
	`R—dFlßt
(
f
,&
xv®
,1);

493 
Ãve
 = 
¡©ic_ÿ¡
<
IÁ_t
>(
xv®
);

494 ià(
Ãve
!=
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NTe¡Ev’ts
()) {

495 
fLogg”
 << 
kWARNING
 << "IncÚsi¡’ˆsizoàyh© fªde¡»e!" << 
Endl
;

496 
fLogg”
 << 
kWARNING
 << "Ãvğ" << 
Ãve
 << " ,»ğ" << 
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NTe¡Ev’ts
(è<< 
Endl
;

497  
kFALSE
;

499 
IÁ_t
 
›vt
=0; ievt<
fM‘hodRuËF™
->
	`D©a
()->
	`G‘NTe¡Ev’ts
(); ievt++) {

500 
	`R—dFlßt
(
f
,&
xv®
,1);

501 
fRFYh©
.
	`push_back
(
xv®
);

503  
kTRUE
;

504 
	}
}

509 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$R—dV¬Imp
()

511 
fRFV¬Imp
.
	`ş—r
();

513 
¡d
::
if¡»am
 
f
;

514 ià(!
	`O³nRFe
("v¬imp",
f
)è 
kFALSE
;

515 
UIÁ_t
 
nv¬s
;

516 
Flßt_t
 
xv®
;

517 
Flßt_t
 
xmax
=1.0;

518 
nv¬s
=
fM‘hodRuËF™
->
	`D©aInfo
().
	`G‘NV¬ŸbËs
();

522 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

523 
	`R—dFlßt
(
f
,&
xv®
,1);

524 ià(
iv¬
==0) {

525 
xmax
=
xv®
;

527 ià(
xv®
>
xmax
) xmax=xval;

529 
fRFV¬Imp
.
	`push_back
(
xv®
);

535 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

536 
fRFV¬Imp
[
iv¬
] = fRFV¬Imp[iv¬]/
xmax
;

537 
	`R—dFlßt
(
f
,&
xv®
,1);

538 
fRFV¬ImpInd
.
	`push_back
(
	`IÁ_t
(
xv®
)-1);

540  
kTRUE
;

541 
	}
}

546 
BoŞ_t
 
	gTMVA
::
RuËF™API
::
	$R—dMod–Sum
()

548 
fRFV¬Imp
.
	`ş—r
();

550 
fLogg”
 << 
kVERBOSE
 << "R—dšg RuËF™ summ¬y fe" << 
Endl
;

551 
¡d
::
if¡»am
 
f
;

552 ià(!
	`O³nRFe
("ruËf™.sum",
f
)è 
kFALSE
;

553 
IÁ_t
 
lšes
=0;

554 
IÁ_t
 
ÄuËs
=0;

555 
IÁ_t
 
nv¬s
=0;

556 
IÁ_t
 
nv¬sO±
=0;

557 
IÁ_t
 
dumI
;

558 
Flßt_t
 
dumF
;

559 
Flßt_t
 
off£t
;

560 
DoubË_t
 
im´ef
=-1.0;

561 
DoubË_t
 
imp
;

563 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘Av”ageRuËSigma
(0.4);

590 
BoŞ_t
 
nÜuËs
;

591 
lšes
 +ğ
	`R—dIÁ
(
f
,&
ÄuËs
);

592 
nÜuËs
 = (
ÄuËs
==1);

593 
lšes
 +ğ
	`R—dIÁ
(
f
,&
dumI
);

594 
nÜuËs
 =‚ÜuË && (
dumI
==1);

595 
lšes
 +ğ
	`R—dIÁ
(
f
,&
dumI
);

596 
nÜuËs
 =‚ÜuË && (
dumI
==1);

597 
lšes
 +ğ
	`R—dIÁ
(
f
,&
dumI
);

598 
nÜuËs
 =‚ÜuË && (
dumI
==0);

599 ià(
ÄuËs
==0è
nÜuËs
=
kTRUE
;

600 ià(
nÜuËs
è
ÄuËs
 = 0;

602 
lšes
 +ğ
	`R—dIÁ
(
f
,&
nv¬s
);

603 
lšes
 +ğ
	`R—dIÁ
(
f
,&
nv¬sO±
);

604 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

605 
lšes
 +ğ
	`R—dFlßt
(
f
,&
off£t
);

606 
fLogg”
 << 
kDEBUG
 << "NÔuËsèğ" << 
ÄuËs
 << 
Endl
;

607 
fLogg”
 << 
kDEBUG
 << "N(v¬sè = " << 
nv¬s
 << 
Endl
;

608 
fLogg”
 << 
kDEBUG
 << "N(v¬sOèğ" << 
nv¬sO±
 << 
Endl
;

609 
fLogg”
 << 
kDEBUG
 << "xmis  = " << 
dumF
 << 
Endl
;

610 
fLogg”
 << 
kDEBUG
 << "off£ˆ = " << 
off£t
 << 
Endl
;

611 ià(
nv¬s
!=
nv¬sO±
) {

612 
fLogg”
 << 
kWARNING
 << "FÜm© oàruËf™.sum i ... weœd?? CÚtšušg buˆwhØknow how iˆwÈ’d...?" << 
Endl
;

614 
¡d
::
veùÜ
<
DoubË_t
> 
rfSuµ
;

615 
¡d
::
veùÜ
<
DoubË_t
> 
rfCÛf
;

616 
¡d
::
veùÜ
<
IÁ_t
> 
rfNcut
;

617 
¡d
::
veùÜ
<
RuË
 *> 
rfRuËs
;

618 ià(
nÜuËs
) {

621 
IÁ_t
 
t
=0;<8;++) {

622 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

636 
IÁ_t
 
r
=0;„<
ÄuËs
;„++) {

637 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

638 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

639 
rfSuµ
.
	`push_back
(
dumF
);

640 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

641 
rfCÛf
.
	`push_back
(
dumF
);

642 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

643 
rfNcut
.
	`push_back
(
¡©ic_ÿ¡
<>(
dumF
+0.5));

644 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

657 
IÁ_t
 
r
=0;„<
ÄuËs
;„++) {

658 
IÁ_t
 
v¬šd
;

659 
DoubË_t
 
xmš
;

660 
DoubË_t
 
xmax
;

661 
RuË
 *
ruË
 = 
Ãw
 
	`RuË
(
fRuËF™
->
	`G‘RuËEn£mbËPŒ
());

662 
rfRuËs
.
	`push_back
Ğ
ruË
 );

663 
RuËCut
 *
rfcut
 = 
Ãw
 
	`RuËCut
();

664 
rfcut
->
	`S‘Nv¬s
(
rfNcut
[
r
]);

665 
ruË
->
	`S‘RuËCut
Ğ
rfcut
 );

668 
ruË
->
	`S‘NÜm
(1.0);

669 
ruË
->
	`S‘SuµÜt
(0);

670 
ruË
->
	`S‘SSB
(0.0);

671 
ruË
->
	`S‘SSBNeve
(0.0);

672 
ruË
->
	`S‘ImpÜnûRef
(1.0);

673 
ruË
->
	`S‘SSB
(0.0);

674 
ruË
->
	`S‘SSBNeve
(0.0);

676 
ruË
->
	`S‘SuµÜt
(
rfSuµ
[
r
]);

677 
ruË
->
	`S‘CÛffic›Á
(
rfCÛf
[
r
]);

678 
ruË
->
	`C®cImpÜnû
();

679 
imp
 = 
ruË
->
	`G‘ImpÜnû
();

680 ià(
imp
>
im´ef
) impref = imp;

682 
fLogg”
 << 
kDEBUG
 << "RuË #" << 
r
 << " : " << 
nv¬s
 << 
Endl
;

683 
fLogg”
 << 
kDEBUG
 << " suµÜˆ = " << 
rfSuµ
[
r
] << 
Endl
;

684 
fLogg”
 << 
kDEBUG
 << " sigm¨ = " << 
ruË
->
	`G‘Sigma
(è<< 
Endl
;

685 
fLogg”
 << 
kDEBUG
 << " cÛfà = " << 
rfCÛf
[
r
] << 
Endl
;

686 
fLogg”
 << 
kDEBUG
 << " N(cutè = " << 
rfNcut
[
r
] << 
Endl
;

688 
IÁ_t
 
c
=0; c<
rfNcut
[
r
]; c++) {

689 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

690 
v¬šd
 = 
¡©ic_ÿ¡
<
IÁ_t
>(
dumF
+0.5)-1;

691 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

692 
xmš
 = 
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
);

693 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

694 
xmax
 = 
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
);

696 
rfcut
->
	`S‘S–eùÜ
(
c
,
v¬šd
);

697 
rfcut
->
	`S‘CutMš
(
c
,
xmš
);

698 
rfcut
->
	`S‘CutMax
(
c
,
xmax
);

701 
rfcut
->
	`S‘CutDoMš
(
c
,(
xmš
<-8.99e35 ? 
kFALSE
:
kTRUE
));

702 
rfcut
->
	`S‘CutDoMax
(
c
,(
xmax
> 8.99e35 ? 
kFALSE
:
kTRUE
));

706 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘RuËs
Ğ
rfRuËs
 );

707 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘Off£t
Ğ
off£t
 );

720 
¡d
::
veùÜ
<
IÁ_t
> 
v¬šd
;

721 
¡d
::
veùÜ
<
DoubË_t
> 
xmš
;

722 
¡d
::
veùÜ
<
DoubË_t
> 
xmax
;

723 
¡d
::
veùÜ
<
DoubË_t
> 
av”age
;

724 
¡d
::
veùÜ
<
DoubË_t
> 
¡dev
;

725 
¡d
::
veùÜ
<
DoubË_t
> 
nÜm
;

726 
¡d
::
veùÜ
<
DoubË_t
> 
cÛff
;

728 
IÁ_t
 
c
=0; c<
nv¬s
; c++) {

729 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

730 
v¬šd
.
	`push_back
(
¡©ic_ÿ¡
<
IÁ_t
>(
dumF
+0.5)-1);

731 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

732 
xmš
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
));

733 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

734 
xmax
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
));

735 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

736 
av”age
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
));

737 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

738 
¡dev
.
	`push_back
(
¡©ic_ÿ¡
<
DoubË_t
>(
dumF
));

739 
DoubË_t
 
nv
 = 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`C®cLšNÜm
(
¡dev
.
	`back
());

740 
nÜm
.
	`push_back
(
nv
);

741 
lšes
 +ğ
	`R—dFlßt
(
f
,&
dumF
);

742 
cÛff
.
	`push_back
(
dumF
/
nv
);

744 
fLogg”
 << 
kDEBUG
 << "Lš—¸#" << 
c
 << 
Endl
;

745 
fLogg”
 << 
kDEBUG
 << " v¬šd = " << 
v¬šd
.
	`back
(è<< 
Endl
;

746 
fLogg”
 << 
kDEBUG
 << " xmš = " << 
xmš
.
	`back
(è<< 
Endl
;

747 
fLogg”
 << 
kDEBUG
 << " xmax = " << 
xmax
.
	`back
(è<< 
Endl
;

748 
fLogg”
 << 
kDEBUG
 << "‡v”ag = " << 
av”age
.
	`back
(è<< 
Endl
;

749 
fLogg”
 << 
kDEBUG
 << " stdev = " << 
¡dev
.
	`back
(è<< 
Endl
;

750 
fLogg”
 << 
kDEBUG
 << " cÛfà = " << 
cÛff
.
	`back
(è<< 
Endl
;

752 ià(
xmš
.
	`size
()>0) {

753 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘LšCÛffic›Ás
(
cÛff
);

754 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘LšDM
(
xmš
);

755 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘LšDP
(
xmax
);

756 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘LšNÜm
(
nÜm
);

759 
imp
 = 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`C®cLšImpÜnû
();

760 ià(
imp
>
im´ef
) impref=imp;

761 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`S‘ImpÜnûRef
(
im´ef
);

762 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`CËªupLš—r
();

764 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
()->
	`C®cV¬ImpÜnû
();

767 
fLogg”
 << 
kDEBUG
 << "R—dšg mod– dÚe" << 
Endl
;

768  
kTRUE
;

769 
	}
}

774 
IÁ_t
 
	gTMVA
::
RuËF™API
::
	$RunRuËF™
()

776 
TSŒšg
 
ŞdDœ
 = 
gSy¡em
->
	`pwd
();

777 
TSŒšg
 
cmd
 = "./rf_go.exe";

778 
gSy¡em
->
	`cd
(
fRFWÜkDœ
.
	`D©a
());

779 
rv®
 = 
gSy¡em
->
	`Exec
(
cmd
.
	`D©a
());

780 
gSy¡em
->
	`cd
(
ŞdDœ
.
	`D©a
());

781  
rv®
;

782 
	}
}

	@src/RuleFitParams.cxx

31 
	~"TMVA/RuËF™P¬ams.h
"

33 
	~"TMVA/D©aS‘Info.h
"

34 
	~"TMVA/M‘hodRuËF™.h
"

35 
	~"TMVA/MsgLogg”.h
"

36 
	~"TMVA/RuËEn£mbË.h
"

37 
	~"TMVA/RuËF™.h
"

38 
	~"TMVA/Tim”.h
"

39 
	~"TMVA/ToŞs.h
"

40 
	~"TMVA/Ty³s.h
"

42 
	~"TT»e.h
"

43 
	~"TM©h.h
"

45 
	~<io¡»am
>

46 
	~<iomª
>

47 
	~<num”ic
>

48 
	~<®gÜ™hm
>

49 
	~<funùiÚ®
>

51 
BoŞ_t
 
	ggFIRSTTST
=
kTRUE
;

52 
BoŞ_t
 
	ggFIRSTORG
=
kTRUE
;

54 
DoubË_t
 
	ggGDIn™
=0;

55 
DoubË_t
 
	ggGDPŒ
=0;

56 
DoubË_t
 
	ggGDNÜm
=0;

57 
DoubË_t
 
	ggGDEv®
=0;

58 
DoubË_t
 
	ggGDEv®RuË
=0;

59 
DoubË_t
 
	ggGDRuËLoİ
=0;

60 
DoubË_t
 
	ggGDLšLoİ
=0;

65 
	gTMVA
::
RuËF™P¬ams
::
	$RuËF™P¬ams
()

66 : 
	`fRuËF™
 ( 0 )

67 , 
	`fRuËEn£mbË
 ( 0 )

68 , 
	`fNRuËs
 ( 0 )

69 , 
	`fNLš—r
 ( 0 )

70 , 
	`fP©hIdx1
 ( 0 )

71 , 
	`fP©hIdx2
 ( 0 )

72 , 
	`fP”fIdx1
 ( 0 )

73 , 
	`fP”fIdx2
 ( 0 )

74 , 
	`fGDNTauT¡OK
( 0 )

75 , 
	`fGDNTau
 ( 51 )

76 , 
	`fGDTauP»c
 ( 0.02 )

77 , 
	`fGDTauSÿn
 ( 1000 )

78 , 
	`fGDTauMš
 ( 0.0 )

79 , 
	`fGDTauMax
 ( 1.0 )

80 , 
	`fGDTau
 ( -1.0 )

81 , 
	`fGDP©hS‹p
 ( 0.01 )

82 , 
	`fGDNP©hS‹ps
 ( 1000 )

83 , 
	`fGDE¼SÿË
 ( 1.1 )

84 , 
	`fAv”ageTruth
( 0 )

85 , 
	`fF¡¬MedŸn
 ( 0 )

86 , 
	`fGDNtu¶e
 ( 0 )

87 , 
	`fNTRisk
 ( 0 )

88 , 
	`fNTE¼ÜR©e
 ( 0 )

89 , 
	`fNTNuv®
 ( 0 )

90 , 
	`fNTCÛfRad
 ( 0 )

91 , 
	`fNTOff£t
 ( 0 )

92 , 
	`fNTCÛff
 ( 0 )

93 , 
	`fNTLšCÛff
 ( 0 )

94 , 
	`fsigave
( 0 )

95 , 
	`fsigrms
( 0 )

96 , 
	`fbkgave
( 0 )

97 , 
	`fbkgrms
( 0 )

98 , 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("RuleFit") )

100 
	`In™
();

101 
	}
}

105 
	gTMVA
::
RuËF™P¬ams
::~
	$RuËF™P¬ams
()

107 ià(
fNTCÛff
è{ 
d–‘e
 fNTCoeff; fNTCoeff = 0; }

108 ià(
fNTLšCÛff
è{ 
d–‘e
 fNTLinCoeff;fNTLinCoeff = 0; }

109 
d–‘e
 
fLogg”
;

110 
	}
}

115 
	gTMVA
::
RuËF™P¬ams
::
	$In™
()

117 ià(
fRuËF™
==0) ;

118 ià(
fRuËF™
->
	`G‘M‘hodRuËF™
()==0) {

119 
	`Log
(è<< 
kFATAL
 << "RuËF™P¬ams::In™(è- M‘hodRuËF™…Œ i nuÎ" << 
Endl
;

121 
UIÁ_t
 
Ãve
 = 
fRuËF™
->
	`G‘T¿ššgEv’ts
().
	`size
();

123 
fRuËEn£mbË
 = 
fRuËF™
->
	`G‘RuËEn£mbËPŒ
();

124 
fNRuËs
 = 
fRuËEn£mbË
->
	`G‘NRuËs
();

125 
fNLš—r
 = 
fRuËEn£mbË
->
	`G‘NLš—r
();

131 
UIÁ_t
 
ofs
;

132 
fP”fIdx1
 = 0;

133 ià(
Ãve
>1) {

134 
fP”fIdx2
 = 
¡©ic_ÿ¡
<
UIÁ_t
>((
Ãve
-1)*
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`G‘GDV®idEveF¿c
());

137 
fP”fIdx2
 = 0;

139 
ofs
 = 
Ãve
 - 
fP”fIdx2
 - 1;

140 
fP”fIdx1
 +ğ
ofs
;

141 
fP”fIdx2
 +ğ
ofs
;

147 
fP©hIdx1
 = 0;

148 ià(
Ãve
>1) {

149 
fP©hIdx2
 = 
¡©ic_ÿ¡
<
UIÁ_t
>((
Ãve
-1)*
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`G‘GDP©hEveF¿c
());

152 
fP©hIdx2
 = 0;

157 
fNEveEffP©h
 = 0;;

158 
UIÁ_t
 
›
=
fP©hIdx1
; ie<
fP©hIdx2
+1; ie++) {

159 
fNEveEffP©h
 +ğ
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
›
);

162 
fNEveEffP”f
=0;

163 
UIÁ_t
 
›
=
fP”fIdx1
; ie<
fP”fIdx2
+1; ie++) {

164 
fNEveEffP”f
 +ğ
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
›
);

167 
	`Log
(è<< 
kVERBOSE
 << "P©h cÚ¡r. -ƒv’ˆšdex„ªgğ[ " << 
fP©hIdx1
 << ", " << 
fP©hIdx2
 << " ]"

168 << ",ƒfãùivNÓv’tsèğ" << 
fNEveEffP©h
 << 
Endl
;

169 
	`Log
(è<< 
kVERBOSE
 << "E¼Üƒ¡im. -ƒv’ˆšdex„ªgğ[ " << 
fP”fIdx1
 << ", " << 
fP”fIdx2
 << " ]"

170 << ",ƒfãùivNÓv’tsèğ" << 
fNEveEffP”f
 << 
Endl
;

172 ià(
fRuËEn£mbË
->
	`DoRuËs
())

173 
	`Log
(è<< 
kDEBUG
 << "Numb” oàruË šƒn£mbË: " << 
fNRuËs
 << 
Endl
;

175 
	`Log
(è<< 
kDEBUG
 << "RuË ¬di§bËd " << 
Endl
;

177 ià(
fRuËEn£mbË
->
	`DoLš—r
())

178 
	`Log
(è<< 
kDEBUG
 << "Numb” oàlš—¸‹rms: " << 
fNLš—r
 << 
Endl
;

180 
	`Log
(è<< 
kDEBUG
 << "Lš—¸‹rm ¬di§bËd " << 
Endl
;

181 
	}
}

186 
	gTMVA
::
RuËF™P¬ams
::
	$In™Ntu¶e
()

188 
fGDNtu¶e
ğ
Ãw
 
	`TT»e
("MonitorNtuple_RuleFitParams","RuleFit…ath search");

189 
fGDNtu¶e
->
	`B¿nch
("risk", &
fNTRisk
, "risk/D");

190 
fGDNtu¶e
->
	`B¿nch
("”rÜ", &
fNTE¼ÜR©e
,"error/D");

191 
fGDNtu¶e
->
	`B¿nch
("nuv®", &
fNTNuv®
, "nuval/D");

192 
fGDNtu¶e
->
	`B¿nch
("cÛäad", &
fNTCÛfRad
, "coefrad/D");

193 
fGDNtu¶e
->
	`B¿nch
("off£t", &
fNTOff£t
, "offset/D");

195 
fNTCÛff
 = (
fNRuËs
 >0 ? 
Ãw
 
DoubË_t
[fNRules] : 0);

196 
fNTLšCÛff
 = (
fNLš—r
>0 ? 
Ãw
 
DoubË_t
[fNLinear] : 0);

198 
UIÁ_t
 
i
=0; i<
fNRuËs
; i++) {

199 
fGDNtu¶e
->
	`B¿nch
(
	`FÜm
("a%d",
i
+1),&
fNTCÛff
[i],Form("a%d/D",i+1));

201 
UIÁ_t
 
i
=0; i<
fNLš—r
; i++) {

202 
fGDNtu¶e
->
	`B¿nch
(
	`FÜm
("b%d",
i
+1),&
fNTLšCÛff
[i],Form("b%d/D",i+1));

204 
	}
}

209 
	gTMVA
::
RuËF™P¬ams
::
Ev®u©eAv”age
Ğ
UIÁ_t
 
šd1
, UIÁ_ˆ
šd2
,

210 
¡d
::
veùÜ
<
DoubË_t
> &
av£l
,

211 
¡d
::
veùÜ
<
DoubË_t
> &
avrul
 )

213 
UIÁ_t
 
Ãve
 = 
šd2
-
šd1
+1;

214 ià(
	gÃve
<1) {

215 
Log
(è<< 
	gkFATAL
 << "<Ev®u©eAv”age> -‚Øev’t £Ëùed fÜ…©h s—rch -> BUG!" << 
	gEndl
;

218 
	gav£l
.
ş—r
();

219 
	gavrul
.
ş—r
();

221 ià(
	gfNLš—r
>0è
	gav£l
.
»size
(
fNLš—r
,0);

222 ià(
	gfNRuËs
>0è
	gavrul
.
»size
(
fNRuËs
,0);

223 cÚ¡ 
	g¡d
::
veùÜ
<
UIÁ_t
> *
ev’tRuËM­
=0;

224 
DoubË_t
 
	gew
;

225 
DoubË_t
 
	gsumew
=0;

229 ià(
	gfRuËEn£mbË
->
IsRuËM­OK
()) {

230  
UIÁ_t
 
	gi
=
šd1
; i<
	gšd2
+1; i++) {

231 
	gew
 = 
fRuËF™
->
G‘T¿ššgEv’tWeight
(
i
);

232 
	gsumew
 +ğ
ew
;

233  
UIÁ_t
 
	g£l
=0; s–<
	gfNLš—r
; sel++ ) {

234 
	gav£l
[
£l
] +ğ
ew
*
fRuËEn£mbË
->
Ev®LšEv’t
(
i
,sel);

237 
UIÁ_t
 
	gÄuËs
=0;

238 ià(
	gfRuËEn£mbË
->
DoRuËs
()) {

239 
	gev’tRuËM­
 = &(
fRuËEn£mbË
->
G‘Ev’tRuËM­
(
i
));

240 
	gÄuËs
 = (*
ev’tRuËM­
).
size
();

242 
UIÁ_t
 
	gr
=0;„<
	gÄuËs
;„++) {

243 
	gavrul
[(*
ev’tRuËM­
)[
r
]] +ğ
ew
;

248 cÚ¡ 
	g¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
G‘T¿ššgEv’ts
());

249  
UIÁ_t
 
	gi
=
šd1
; i<
	gšd2
+1; i++) {

250 
	gew
 = 
fRuËF™
->
G‘T¿ššgEv’tWeight
(
i
);

251 
	gsumew
 +ğ
ew
;

253  
	gfRuËEn£mbË
->
Ev®LšEv’t
(*((*
ev’ts
)[
i
]));

254  
	gfRuËEn£mbË
->
Ev®Ev’t
(*((*
ev’ts
)[
i
]));

256  
UIÁ_t
 
	g£l
=0; s–<
	gfNLš—r
; sel++ ) {

257 
	gav£l
[
£l
] +ğ
ew
*
fRuËEn£mbË
->
G‘Ev’tLš—rV®NÜm
(sel);

260 
UIÁ_t
 
	gr
=0;„<
	gfNRuËs
;„++) {

261 
	gavrul
[
r
] +ğ
ew
*
fRuËEn£mbË
->
G‘Ev’tRuËV®
(r);

266  
UIÁ_t
 
	g£l
=0; s–<
	gfNLš—r
; sel++ ) {

267 
	gav£l
[
£l
] = 
av£l
[£l] / 
sumew
;

270 
UIÁ_t
 
	gr
=0;„<
	gfNRuËs
;„++) {

271 
	gavrul
[
r
] = 
avrul
[r] / 
sumew
;

279 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$LossFunùiÚ
ĞcÚ¡ 
Ev’t
& 
e
 ) const

281 
DoubË_t
 
h
 = 
TM©h
::
	`Max
Ğ-1.0, TM©h::
	`Mš
(1.0,
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
e
 )) );

282 
DoubË_t
 
diff
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(&
e
)?1:-1è- 
h
;

284  
diff
*diff*
e
.
	`G‘Weight
();

285 
	}
}

291 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$LossFunùiÚ
Ğ
UIÁ_t
 
evtidx
 ) const

293 
DoubË_t
 
h
 = 
TM©h
::
	`Max
Ğ-1.0, TM©h::
	`Mš
(1.0,
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
evtidx
 )) );

294 
DoubË_t
 
diff
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(
fRuËEn£mbË
->
	`G‘RuËM­Ev’t
Ğ
evtidx
 ))?1:-1è- 
h
;

296  
diff
*diff*
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
evtidx
);

297 
	}
}

303 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$LossFunùiÚ
Ğ
UIÁ_t
 
evtidx
, UIÁ_ˆ
™au
 ) const

305 
DoubË_t
 
e
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
evtidx
 , 
fGDOfsT¡
[
™au
], 
fGDCÛfT¡
[™au], 
fGDCÛfLšT¡
[itau]);

306 
DoubË_t
 
h
 = 
TM©h
::
	`Max
Ğ-1.0, TM©h::
	`Mš
(1.0,
e
) );

307 
DoubË_t
 
diff
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(
fRuËEn£mbË
->
	`G‘RuËM­Ev’t
Ğ
evtidx
 ))?1:-1è- 
h
;

309  
diff
*diff*
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
evtidx
);

310 
	}
}

315 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$Risk
(
UIÁ_t
 
šd1
,UIÁ_ˆ
šd2
, 
DoubË_t
 
Ãff
) const

317 
UIÁ_t
 
Ãve
 = 
šd2
-
šd1
+1;

318 ià(
Ãve
<1) {

319 
	`Log
(è<< 
kFATAL
 << "<Risk> Inv®id s¹/’d indiûs! BUG!!!" << 
Endl
;

321 
DoubË_t
 
rv®
=0;

324  
UIÁ_t
 
i
=
šd1
; i<
šd2
+1; i++) {

325 
rv®
 +ğ
	`LossFunùiÚ
(
i
);

327 
rv®
 =„v®/
Ãff
;

329  
rv®
;

330 
	}
}

335 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$Risk
(
UIÁ_t
 
šd1
,UIÁ_ˆ
šd2
, 
DoubË_t
 
Ãff
, UIÁ_ˆ
™au
) const

337 
UIÁ_t
 
Ãve
 = 
šd2
-
šd1
+1;

338 ià(
Ãve
<1) {

339 
	`Log
(è<< 
kFATAL
 << "<Risk> Inv®id s¹/’d indiûs! BUG!!!" << 
Endl
;

341 
DoubË_t
 
rv®
=0;

344  
UIÁ_t
 
i
=
šd1
; i<
šd2
+1; i++) {

345 
rv®
 +ğ
	`LossFunùiÚ
(
i
,
™au
);

347 
rv®
 =„v®/
Ãff
;

349  
rv®
;

350 
	}
}

357 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$P’®ty
() const

359 
	`Log
(è<< 
kWARNING
 << "<P’®ty> Usšg unv”if›d code! Check!" << 
Endl
;

360 
DoubË_t
 
rv®
=0;

361 cÚ¡ 
¡d
::
veùÜ
<
DoubË_t
> *
lšcÛff
 = & (
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
());

362 
UIÁ_t
 
i
=0; i<
fNRuËs
; i++) {

363 
rv®
 +ğ
TM©h
::
	`Abs
(
fRuËEn£mbË
->
	`G‘RuËs
(
i
)->
	`G‘CÛffic›Á
());

365 
UIÁ_t
 
i
=0; i<
fNLš—r
; i++) {

366 
rv®
 +ğ
TM©h
::
	`Abs
((*
lšcÛff
)[
i
]);

368  
rv®
;

369 
	}
}

374 
	gTMVA
::
RuËF™P¬ams
::
	$In™GD
()

376 ià(
fGDNTau
<2) {

377 
fGDNTau
 = 1;

378 
fGDTauSÿn
 = 0;

380 ià(
fGDTau
<0.0) {

382 
fGDTauSÿn
 = 1000;

383 
fGDTauMš
 = 0.0;

384 
fGDTauMax
 = 1.0;

387 
fGDNTau
 = 1;

388 
fGDTauSÿn
 = 0;

391 
fGDTauVec
.
	`ş—r
();

392 
fGDTauVec
.
	`»size
Ğ
fGDNTau
 );

393 ià(
fGDNTau
==1) {

394 
fGDTauVec
[0] = 
fGDTau
;

398 
DoubË_t
 
du
 = (
fGDTauMax
 - 
fGDTauMš
)/
¡©ic_ÿ¡
<DoubË_t>(
fGDNTau
-1);

399 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

400 
fGDTauVec
[
™au
] = 
¡©ic_ÿ¡
<
DoubË_t
>(™au)*
du
 + 
fGDTauMš
;

401 ià(
fGDTauVec
[
™au
]>1.0) fGDTauVec[itau]=1.0;

406 
fG¿dVec
.
	`ş—r
();

407 
fG¿dVecLš
.
	`ş—r
();

408 
fG¿dVecT¡
.
	`ş—r
();

409 
fG¿dVecLšT¡
.
	`ş—r
();

410 
fGDE¼T¡
.
	`ş—r
();

411 
fGDE¼T¡OK
.
	`ş—r
();

412 
fGDOfsT¡
.
	`ş—r
();

413 
fGDCÛfT¡
.
	`ş—r
();

414 
fGDCÛfLšT¡
.
	`ş—r
();

418 
fGDCÛfT¡
.
	`»size
(
fGDNTau
);

419 
fG¿dVec
.
	`»size
(
fNRuËs
,0);

420 
fG¿dVecT¡
.
	`»size
(
fGDNTau
);

421 
UIÁ_t
 
i
=0; i<
fGDNTau
; i++) {

422 
fG¿dVecT¡
[
i
].
	`»size
(
fNRuËs
,0);

423 
fGDCÛfT¡
[
i
].
	`»size
(
fNRuËs
,0);

428 
fGDCÛfLšT¡
.
	`»size
(
fGDNTau
);

429 
fG¿dVecLš
.
	`»size
(
fNLš—r
,0);

430 
fG¿dVecLšT¡
.
	`»size
(
fGDNTau
);

431 
UIÁ_t
 
i
=0; i<
fGDNTau
; i++) {

432 
fG¿dVecLšT¡
[
i
].
	`»size
(
fNLš—r
,0);

433 
fGDCÛfLšT¡
[
i
].
	`»size
(
fNLš—r
,0);

438 
fGDE¼T¡
.
	`»size
(
fGDNTau
,0);

439 
fGDE¼T¡OK
.
	`»size
(
fGDNTau
,
kTRUE
);

440 
fGDOfsT¡
.
	`»size
(
fGDNTau
,0);

441 
fGDNTauT¡OK
 = 
fGDNTau
;

445 
	}
}

450 
IÁ_t
 
	gTMVA
::
RuËF™P¬ams
::
	$FšdGDTau
()

452 ià(
fGDNTau
<2)  0;

453 ià(
fGDTauSÿn
==0)  0;

455 ià(
fGDOfsT¡
.
	`size
()<1)

456 
	`Log
(è<< 
kFATAL
 << "BUG! FšdGDTau(èha b“ÀÿÎed BEFORE In™GD()." << 
Endl
;

458 
	`Log
(è<< 
kINFO
 << "E¡im©šghcutofà·¿m‘”au. The¡im©edimi ¨³ssimi¡iømaximum." << 
Endl
;

461 
UIÁ_t
 
nsÿn
 = 
fGDTauSÿn
;

462 
UIÁ_t
 
Ãt¡
 = 
¡d
::
	`mš
(
nsÿn
,
	`UIÁ_t
(100));

463 
UIÁ_t
 
nsÿÂed
=0;

475 
BoŞ_t
 
dŞoİ
=
kTRUE
;

476 
UIÁ_t
 

=0;

477 
UIÁ_t
 
™auMš
=0;

478 
Tim”
 
	`tim”
Ğ
nsÿn
, "RuleFit" );

479 
dŞoİ
) {

481 
	`MakeT¡G¿d›ÁVeùÜ
();

483 
	`Upd©eT¡CÛffic›Ás
();

486 
nsÿÂed
++;

487 iàĞ(

==0è|| ((+1)%
Ãt¡
==0) ) {

489 
™auMš
 = 
	`RiskP”fT¡
();

490 
	`Log
(è<< 
kVERBOSE
 << 
	`FÜm
("%4d",

+1è<< ".au = " << FÜm("%4.4f",
fGDTauVec
[
™auMš
])

491 << " =>ƒ¼Ü„©ğ" << 
fGDE¼T¡
[
™auMš
] << 
Endl
;

493 

++;

494 
dŞoİ
 = ((

<
nsÿn
è&& (
fGDNTauT¡OK
>3));

495 
gFIRSTTST
=
kFALSE
;

496 ià(
	`Log
().
	`G‘MšTy³
()>
kVERBOSE
)

497 
tim”
.
	`D¿wProg»ssB¬
(

);

503 ià(
nsÿÂed
==0) {

504 
	`Log
(è<< 
kERROR
 << "<FšdGDTau>‚umb” oàsÿÂed†oİ i z”o! Should NOT s“hi mes§ge." << 
Endl
;

506 
fGDTau
 = 
fGDTauVec
[
™auMš
];

507 
fRuËEn£mbË
->
	`S‘CÛffic›Ás
Ğ
fGDCÛfT¡
[
™auMš
] );

508 
fRuËEn£mbË
->
	`S‘LšCÛffic›Ás
Ğ
fGDCÛfLšT¡
[
™auMš
] );

509 
fRuËEn£mbË
->
	`S‘Off£t
Ğ
fGDOfsT¡
[
™auMš
] );

510 
	`Log
(è<< 
kINFO
 << "Be¡…©h found w™hau = " << 
	`FÜm
("%4.4f",
fGDTau
)

511 << "‡á” " << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

513  
nsÿn
;

514 
	}
}

539 
	gTMVA
::
RuËF™P¬ams
::
	$MakeGDP©h
()

541 
	`Log
(è<< 
kINFO
 << "GD…ath scan -he scan stops whenhe max‚um. of steps is„eached or‡ min is found"

542 << 
Endl
;

543 
	`Log
(è<< 
kVERBOSE
 << "Numb” oàev’t u£d…”…©h s‹°ğ" << 
fP©hIdx2
-
fP©hIdx1
+1 << 
Endl
;

544 
	`Log
(è<< 
kVERBOSE
 << "Numb” oàev’t u£d fÜƒ¼Üƒ¡im©iÚ = " << 
fP”fIdx2
-
fP”fIdx1
+1 << 
Endl
;

547 cÚ¡ 
BoŞ_t
 
isV”bo£
 = (
	`Log
().
	`G‘MšTy³
()<=
kVERBOSE
);

548 cÚ¡ 
BoŞ_t
 
isDebug
 = (
	`Log
().
	`G‘MšTy³
()<=
kDEBUG
);

551 
	`In™GD
();

554 
	`Ev®u©eAv”ageP©h
();

555 
	`Ev®u©eAv”ageP”f
();

558 
	`Log
(è<< 
kVERBOSE
 << "C»©šg GD…©h" << 
Endl
;

559 
	`Log
(è<< 
kVERBOSE
 << " N(¡•sè = " << 
fGDNP©hS‹ps
 << 
Endl
;

560 
	`Log
(è<< 
kVERBOSE
 << " s‹° = " << 
fGDP©hS‹p
 << 
Endl
;

561 
	`Log
(è<< 
kVERBOSE
 << " NÑauè = " << 
fGDNTau
 << 
Endl
;

562 
	`Log
(è<< 
kVERBOSE
 << " NÑau s‹psèğ" << 
fGDTauSÿn
 << 
Endl
;

563 
	`Log
(è<< 
kVERBOSE
 << "au„ªg = [ " << 
fGDTauVec
[0] << " , " << fGDTauVec[
fGDNTau
-1] << " ]" << 
Endl
;

566 ià(
isDebug
è
	`In™Ntu¶e
();

569 
IÁ_t
 
nbadrisk
=0;

570 
DoubË_t
 
Œisk
=0;

571 
DoubË_t
 
¡risk
=0;

572 
DoubË_t
 
½»v
=1e32;

575 
DoubË_t
 
”rmš
=1e32;

577 
IÁ_t
 
šdMš
=-1;

578 
¡d
::
veùÜ
<
DoubË_t
> 
cÛfsMš
;

579 
¡d
::
veùÜ
<
DoubË_t
> 
lšcÛfsMš
;

580 
DoubË_t
 
off£tMš
;

584 
şock_t
 
t0
=0;

585 
DoubË_t
 
tg¿dvec
;

586 
DoubË_t
 
tupg¿de
;

587 
DoubË_t
 
”f
;

588 
DoubË_t
 
¡g¿dvec
=0;

589 
DoubË_t
 
¡upg¿de
=0;

590 
DoubË_t
 
¡³rf
=0;

593 cÚ¡ 
UIÁ_t
 
Å»g
=5;

594 
¡d
::
veùÜ
<
DoubË_t
> 
v®x
;

595 
¡d
::
veùÜ
<
DoubË_t
> 
v®y
;

596 
¡d
::
veùÜ
<
DoubË_t
> 
v®xy
;

599 
BoŞ_t
 
docheck
;

600 
IÁ_t
 
oİ
=0;

601 
BoŞ_t
 
found
=
kFALSE
;

602 
BoŞ_t
 
riskFÏt
=
kFALSE
;

603 
BoŞ_t
 
dÚe
 = 
kFALSE
;

606 
imod
 = 
fGDNP©hS‹ps
/100;

607 ià(
imod
<100èimod = 
¡d
::
	`mš
(100,
fGDNP©hS‹ps
);

608 ià(
imod
>100) imod=100;

611 
fAv”ageTruth
 = -
	`C®cAv”ageTruth
();

612 
off£tMš
 = 
fAv”ageTruth
;

613 
fRuËEn£mbË
->
	`S‘Off£t
(
off£tMš
);

614 
fRuËEn£mbË
->
	`CË¬CÛffic›Ás
(0);

615 
fRuËEn£mbË
->
	`CË¬LšCÛffic›Ás
(0);

616 
UIÁ_t
 
i
=0; i<
fGDOfsT¡
.
	`size
(); i++) {

617 
fGDOfsT¡
[
i
] = 
off£tMš
;

619 
	`Log
(è<< 
kVERBOSE
 << "Obšed in™ŸÈoff£ˆğ" << 
off£tMš
 << 
Endl
;

622 
IÁ_t
 
Å»sÿn
 = 
	`FšdGDTau
();

632 
fNTRisk
 = 
½»v
;

633 
fNTCÛfRad
 = -1.0;

634 
fNTE¼ÜR©e
 = 0;

637 
IÁ_t
 
¡İCÚd™iÚ
=0;

639 
	`Log
(è<< 
kINFO
 << "F™tšg mod–..." << 
Endl
;

641 
Tim”
 
	`tim”
Ğ
fGDNP©hS‹ps
, "RuleFit" );

642 
	`Log
(è<< 
kWARNING
;

643 !
dÚe
) {

645 ià(
isV”bo£
è
t0
 = 
	`şock
();

646 
	`MakeG¿d›ÁVeùÜ
();

647 ià(
isV”bo£
) {

648 
tg¿dvec
 = 
	`DoubË_t
(
	`şock
()-
t0
)/
CLOCKS_PER_SEC
;

649 
¡g¿dvec
 +ğ
tg¿dvec
;

653 ià(
isV”bo£
è
t0
 = 
	`şock
();

654 
	`Upd©eCÛffic›Ás
();

655 ià(
isV”bo£
) {

656 
tupg¿de
 = 
	`DoubË_t
(
	`şock
()-
t0
)/
CLOCKS_PER_SEC
;

657 
¡upg¿de
 +ğ
tupg¿de
;

661 
docheck
 = ((
oİ
==0è||((oİ+1)%
imod
==0));

663 ià(
docheck
) {

665 ià(!
isV”bo£
)

666 
tim”
.
	`D¿wProg»ssB¬
(
oİ
);

667 
fNTNuv®
 = 
	`DoubË_t
(
oİ
)*
fGDP©hS‹p
;

668 
fNTRisk
 = 0.0;

672 ià(
isDebug
è
	`FlCÛffic›Ás
();

673 
fNTCÛfRad
 = 
fRuËEn£mbË
->
	`CÛffic›ÁRadius
();

676 
t0
 = 
	`şock
();

677 
fNTRisk
 = 
	`RiskP©h
();

678 
Œisk
 = 
	`DoubË_t
(
	`şock
()-
t0
)/
CLOCKS_PER_SEC
;

679 
¡risk
 +ğ
Œisk
;

685 ià(
fNTRisk
>=
½»v
) {

686 ià(
fNTRisk
>
½»v
) {

687 
nbadrisk
++;

688 
	`Log
(è<< "Risk(i+1)>=Risk(ièš…©h" << 
Endl
;

689 
riskFÏt
=(
nbadrisk
>3);

690 ià(
riskFÏt
) {

691 
	`Log
(è<< 
kWARNING
 << "ChaÙiøbehaviou¸oàriskƒvŞutiÚ" << 
Endl
;

692 
	`Log
(è<< "--- STOPPING MINIMISATION ---" << 
Endl
;

693 
	`Log
(è<< "Thi may bOK iàmšimum i ®»ady found" << 
Endl
;

697 
½»v
 = 
fNTRisk
;

703 ià(
isV”bo£
è
t0
 = 
	`şock
();

704 
fNTE¼ÜR©e
 = 0;

707 
DoubË_t
 
”¼oc
;

708 
DoubË_t
 
riskP”f
 = 
	`RiskP”f
();

711 
”¼oc
 = 
riskP”f
;

713 
fNTE¼ÜR©e
 = 
”¼oc
;

715 ià(
isV”bo£
) {

716 
”f
 = 
	`DoubË_t
(
	`şock
()-
t0
)/
CLOCKS_PER_SEC
;

717 
¡³rf
 +=
”f
;

723 ià(
fNTE¼ÜR©e
<=
”rmš
) {

724 
”rmš
 = 
fNTE¼ÜR©e
;

726 
šdMš
 = 
oİ
;

727 
fRuËEn£mbË
->
	`G‘CÛffic›Ás
(
cÛfsMš
);

728 
lšcÛfsMš
 = 
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
();

729 
off£tMš
 = 
fRuËEn£mbË
->
	`G‘Off£t
();

731 iàĞ
fNTE¼ÜR©e
 > 
fGDE¼SÿË
*
”rmš
è
found
 = 
kTRUE
;

735 ià(
v®x
.
	`size
()==
Å»g
) {

736 
v®x
.
	`”a£
(v®x.
	`begš
());

737 
v®y
.
	`”a£
(v®y.
	`begš
());

738 
v®xy
.
	`”a£
(v®xy.
	`begš
());

740 
v®x
.
	`push_back
(
fNTNuv®
);

741 
v®y
.
	`push_back
(
fNTE¼ÜR©e
);

742 
v®xy
.
	`push_back
(
fNTE¼ÜR©e
*
fNTNuv®
);

744 
gFIRSTORG
=
kFALSE
;

747 ià(
isDebug
è
fGDNtu¶e
->
	`Fl
();

748 ià(
isV”bo£
) {

749 
	`Log
(è<< 
kVERBOSE
 << "ParamsIRE : "

750 << 
¡d
::
	`£tw
(10)

751 << 
	`FÜm
("%8d",
oİ
+1) << " "

752 << 
	`FÜm
("%4.4f",
fNTRisk
) << " "

753 << 
	`FÜm
("%4.4f",
riskP”f
) << " "

754 << 
	`FÜm
("%4.4f",
fNTRisk
+
riskP”f
) << " "

762 << 
Endl
;

765 
oİ
++;

770 
BoŞ_t
 
’dOfLoİ
 = (
oİ
==
fGDNP©hS‹ps
);

771 iàĞ((
riskFÏt
è|| (
’dOfLoİ
)è&& (!
found
) ) {

772 ià(
riskFÏt
) {

773 
¡İCÚd™iÚ
 = 1;

775 ià(
’dOfLoİ
) {

776 
¡İCÚd™iÚ
 = 2;

778 ià(
šdMš
<0) {

779 
	`Log
(è<< 
kWARNING
 << "BUG TRAP: should‚Ù bh”- stl,hi bug i h¬mËss;)" << 
Endl
;

780 
”rmš
 = 
fNTE¼ÜR©e
;

782 
šdMš
 = 
oİ
;

783 
fRuËEn£mbË
->
	`G‘CÛffic›Ás
(
cÛfsMš
);

784 
lšcÛfsMš
 = 
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
();

785 
off£tMš
 = 
fRuËEn£mbË
->
	`G‘Off£t
();

787 
found
 = 
kTRUE
;

789 
dÚe
 = (
found
);

791 
	`Log
(è<< 
Endl
;

792 
	`Log
(è<< 
kINFO
 << "Mšimi§tiÚƒÏp£dim: " << 
tim”
.
	`G‘EÏp£dTime
(è<< " " << 
Endl
;

793 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

794 
	`Log
(è<< 
kINFO
 << "Found mšimum‡ˆ¡• " << 
šdMš
+1 << " w™hƒ¼Ü = " << 
”rmš
 << 
Endl
;

795 
	`Log
(è<< 
kINFO
 << "Reason forƒnding†oop: ";

796 
¡İCÚd™iÚ
) {

798 
	`Log
(è<< 
kINFO
 << "clear minima found";

801 
	`Log
(è<< 
kINFO
 << "chaotic behaviour of„isk";

804 
	`Log
(è<< 
kINFO
 << "end of†oop„eached";

807 
	`Log
(è<< 
kINFO
 << "unknown!";

810 
	`Log
(è<< 
Endl
;

811 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

814 iàĞ
	`DoubË_t
(
šdMš
)/DoubË_t(
Å»sÿn
+
fGDNP©hS‹ps
) < 0.05 ) {

815 
	`Log
(è<< 
kWARNING
 << "R—ched mšimumƒ¬ly iÀth£¬ch" << 
Endl
;

816 
	`Log
(è<< "Check„esuÉ ªd maybdeü—£ GDS‹°size" << 
Endl
;

821 
DoubË_t
 
sumx
 = 
¡d
::
	`accumuÏ‹
Ğ
v®x
.
	`begš
(), v®x.
	`’d
(), 
	`DoubË_t
() );

822 
DoubË_t
 
sumxy
 = 
¡d
::
	`accumuÏ‹
Ğ
v®xy
.
	`begš
(), v®xy.
	`’d
(), 
	`DoubË_t
() );

823 
DoubË_t
 
sumy
 = 
¡d
::
	`accumuÏ‹
Ğ
v®y
.
	`begš
(), v®y.
	`’d
(), 
	`DoubË_t
() );

824 
DoubË_t
 
¦İe
 = 
	`DoubË_t
(
v®x
.
	`size
())*
sumxy
 - 
sumx
*
sumy
;

825 ià(
¦İe
<0) {

826 
	`Log
(è<< 
kINFO
 << "Th”rÜ„©wa ¡Èdeü—sšg‡ˆth’d oàth·th" << 
Endl
;

827 
	`Log
(è<< 
kINFO
 << "Inü—£‚umb” oà¡• (GDNS‹ps)." << 
Endl
;

832 ià(
found
) {

833 
fRuËEn£mbË
->
	`S‘CÛffic›Ás
Ğ
cÛfsMš
 );

834 
fRuËEn£mbË
->
	`S‘LšCÛffic›Ás
Ğ
lšcÛfsMš
 );

835 
fRuËEn£mbË
->
	`S‘Off£t
Ğ
off£tMš
 );

838 
	`Log
(è<< 
kFATAL
 << "BUG TRAP: mšimum‚Ù found iÀMakeGDP©h()" << 
Endl
;

844 ià(
isV”bo£
) {

845 
DoubË_t
 
¡loİ
 = 
¡risk
 +
¡upg¿de
 + 
¡g¿dvec
 + 
¡³rf
;

846 
	`Log
(è<< 
kVERBOSE
 << "Timšg…”†oİ (ms):" << 
Endl
;

847 
	`Log
(è<< 
kVERBOSE
 << " g¿dveøğ" << 1000*
¡g¿dvec
/
oİ
 << 
Endl
;

848 
	`Log
(è<< 
kVERBOSE
 << " upg¿dğ" << 1000*
¡upg¿de
/
oİ
 << 
Endl
;

849 
	`Log
(è<< 
kVERBOSE
 << "„isk = " << 1000*
¡risk
/
oİ
 << 
Endl
;

850 
	`Log
(è<< 
kVERBOSE
 << "…”à = " << 1000*
¡³rf
/
oİ
 << 
Endl
;

851 
	`Log
(è<< 
kVERBOSE
 << "†oİ = " << 1000*
¡loİ
/
oİ
 << 
Endl
;

853 
	`Log
(è<< 
kVERBOSE
 << " GDIn™ = " << 1000*
gGDIn™
/
oİ
 << 
Endl
;

854 
	`Log
(è<< 
kVERBOSE
 << " GDPŒ = " << 1000*
gGDPŒ
/
oİ
 << 
Endl
;

855 
	`Log
(è<< 
kVERBOSE
 << " GDEv® = " << 1000*
gGDEv®
/
oİ
 << 
Endl
;

856 
	`Log
(è<< 
kVERBOSE
 << " GDEv®RuË = " << 1000*
gGDEv®RuË
/
oİ
 << 
Endl
;

857 
	`Log
(è<< 
kVERBOSE
 << " GDNÜm = " << 1000*
gGDNÜm
/
oİ
 << 
Endl
;

858 
	`Log
(è<< 
kVERBOSE
 << " GDRuËLoİ = " << 1000*
gGDRuËLoİ
/
oİ
 << 
Endl
;

859 
	`Log
(è<< 
kVERBOSE
 << " GDLšLoİ = " << 1000*
gGDLšLoİ
/
oİ
 << 
Endl
;

863 ià(
isDebug
è
fGDNtu¶e
->
	`Wr™e
();

864 
	}
}

869 
	gTMVA
::
RuËF™P¬ams
::
	$FlCÛffic›Ás
()

871 
fNTOff£t
 = 
fRuËEn£mbË
->
	`G‘Off£t
();

873 
UIÁ_t
 
i
=0; i<
fNRuËs
; i++) {

874 
fNTCÛff
[
i
] = 
fRuËEn£mbË
->
	`G‘RuËs
(i)->
	`G‘CÛffic›Á
();

876 
UIÁ_t
 
i
=0; i<
fNLš—r
; i++) {

877 
fNTLšCÛff
[
i
] = 
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
(i);

879 
	}
}

886 
	gTMVA
::
RuËF™P¬ams
::
	$C®cFSr
()

888 
	`Log
(è<< 
kWARNING
 << "<C®cFSr> Usšg unv”if›d code! Check!" << 
Endl
;

889 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

890 ià(
Ãve
<1) {

891 
	`Log
(è<< 
kFATAL
 << "<C®cFSr> Inv®id s¹/’d indiûs!" << 
Endl
;

895 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

897 
fF¡¬
.
	`ş—r
();

898 
¡d
::
veùÜ
<
DoubË_t
> 
f¡¬SÜ‹d
;

899 
DoubË_t
 
f¡¬V®
;

901 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

902 cÚ¡ 
Ev’t
& 
e
 = *(*
ev’ts
)[
i
];

903 
f¡¬V®
 = 
fRuËEn£mbË
->
	`FSr
(
e
);

904 
fF¡¬
.
	`push_back
(
f¡¬V®
);

905 
f¡¬SÜ‹d
.
	`push_back
(
f¡¬V®
);

906 ià(
TM©h
::
	`IsNaN
(
f¡¬V®
)è
	`Log
(è<< 
kFATAL
 << "F* i NAN!" << 
Endl
;

909 
¡d
::
	`sÜt
Ğ
f¡¬SÜ‹d
.
	`begš
(), f¡¬SÜ‹d.
	`’d
() );

910 
UIÁ_t
 
šd
 = 
Ãve
/2;

911 ià(
Ãve
&1) {

912 
fF¡¬MedŸn
 = 0.5*(
f¡¬SÜ‹d
[
šd
]+fstarSorted[ind-1]);

915 
fF¡¬MedŸn
 = 
f¡¬SÜ‹d
[
šd
];

917 
	}
}

926 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$O±imism
()

928 
	`Log
(è<< 
kWARNING
 << "<O±imism> Usšg unv”if›d code! Check!" << 
Endl
;

929 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

930 ià(
Ãve
<1) {

931 
	`Log
(è<< 
kFATAL
 << "<O±imism> Inv®id s¹/’d indiûs!" << 
Endl
;

934 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

936 
DoubË_t
 
sumy
=0;

937 
DoubË_t
 
sumyh©
=0;

938 
DoubË_t
 
sumyh©y
=0;

939 
DoubË_t
 
sumw2
=0;

940 
DoubË_t
 
sumw
=0;

941 
DoubË_t
 
yh©
;

942 
DoubË_t
 
y
;

943 
DoubË_t
 
w
;

945 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

946 cÚ¡ 
Ev’t
& 
e
 = *(*
ev’ts
)[
i
];

947 
yh©
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
(
i
);

948 
y
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(&
e
) ? 1.0:-1.0);

949 
w
 = 
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
i
)/
fNEveEffP”f
;

950 
sumy
 +ğ
w
*
y
;

951 
sumyh©
 +ğ
w
*
yh©
;

952 
sumyh©y
 +ğ
w
*
yh©
*
y
;

953 
sumw2
 +ğ
w
*w;

954 
sumw
 +ğ
w
;

956 
DoubË_t
 
div
 = 1.0-
sumw2
;

957 
DoubË_t
 
cov
 = 
sumyh©y
 - 
sumyh©
*
sumy
;

958  2.0*
cov
/
div
;

959 
	}
}

967 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$E¼ÜR©eReg
()

969 
	`Log
(è<< 
kWARNING
 << "<E¼ÜR©eReg> Usšg unv”if›d code! Check!" << 
Endl
;

970 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

971 ià(
Ãve
<1) {

972 
	`Log
(è<< 
kFATAL
 << "<E¼ÜR©eReg> Inv®id s¹/’d indiûs!" << 
Endl
;

974 ià(
fF¡¬
.
	`size
()!=
Ãve
) {

975 
	`Log
(è<< 
kFATAL
 << "--- RuleFitParams::ErrorRateReg() - F*‚ot initialized! BUG!!!"

976 << " F¡¬.size(èğ" << 
fF¡¬
.
	`size
(è<< " , NÓv’tsèğ" << 
Ãve
 << 
Endl
;

979 
DoubË_t
 
sF
;

981 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

983 
DoubË_t
 
sumdf
 = 0;

984 
DoubË_t
 
sumdfmed
 = 0;

990 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

991 cÚ¡ 
Ev’t
& 
e
 = *(*
ev’ts
)[
i
];

992 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
e
 );

994 
sumdf
 +ğ
TM©h
::
	`Abs
(
fF¡¬
[
i
-
fP”fIdx1
] - 
sF
);

995 
sumdfmed
 +ğ
TM©h
::
	`Abs
(
fF¡¬
[
i
-
fP”fIdx1
] - 
fF¡¬MedŸn
);

1000  
sumdf
/
sumdfmed
;

1001 
	}
}

1011 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$E¼ÜR©eBš
()

1013 
	`Log
(è<< 
kWARNING
 << "<E¼ÜR©eBš> Usšg unv”if›d code! Check!" << 
Endl
;

1014 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

1015 ià(
Ãve
<1) {

1016 
	`Log
(è<< 
kFATAL
 << "<E¼ÜR©eBš> Inv®id s¹/’d indiûs!" << 
Endl
;

1019 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1021 
DoubË_t
 
sumdfbš
 = 0;

1022 
DoubË_t
 
dÃve
 = 
	`DoubË_t
(
Ãve
);

1023 
IÁ_t
 
signF
, 
signy
;

1024 
DoubË_t
 
sF
;

1026 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

1027 cÚ¡ 
Ev’t
& 
e
 = *(*
ev’ts
)[
i
];

1028 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
e
 );

1030 
signF
 = (
sF
>0 ? +1:-1);

1032 
signy
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(&
e
) ? +1:-1);

1033 
sumdfbš
 +ğ
TM©h
::
	`Abs
(
	`DoubË_t
(
signF
-
signy
))*0.5;

1035 
DoubË_t
 
f
 = 
sumdfbš
/
dÃve
;

1037  
f
;

1038 
	}
}

1045 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
E¼ÜR©eRocRaw
Ğ
¡d
::
veùÜ
<DoubË_t> & 
sFsig
,

1046 
¡d
::
veùÜ
<
DoubË_t
> & 
sFbkg
 )

1049 
¡d
::
sÜt
(
sFsig
.
begš
(), sFsig.
’d
());

1050 
	g¡d
::
sÜt
(
sFbkg
.
begš
(), sFbkg.
’d
());

1051 cÚ¡ 
DoubË_t
 
	gmšsig
 = 
sFsig
.
äÚt
();

1052 cÚ¡ 
DoubË_t
 
	gmšbkg
 = 
sFbkg
.
äÚt
();

1053 cÚ¡ 
DoubË_t
 
	gmaxsig
 = 
sFsig
.
back
();

1054 cÚ¡ 
DoubË_t
 
	gmaxbkg
 = 
sFbkg
.
back
();

1055 cÚ¡ 
DoubË_t
 
	gmšf
 = 
¡d
::
mš
(
mšsig
,
mšbkg
);

1056 cÚ¡ 
DoubË_t
 
	gmaxf
 = 
¡d
::
max
(
maxsig
,
maxbkg
);

1057 cÚ¡ 
IÁ_t
 
	gnsig
 = IÁ_t(
sFsig
.
size
());

1058 cÚ¡ 
IÁ_t
 
	gnbkg
 = IÁ_t(
sFbkg
.
size
());

1059 cÚ¡ 
IÁ_t
 
	gÅ
 = 
¡d
::
mš
((
nsig
+
nbkg
)/4,50);

1060 cÚ¡ 
DoubË_t
 
	gdf
 = (
maxf
-
mšf
)/(
Å
-1);

1064 
DoubË_t
 
	gfcut
;

1065 
	g¡d
::
veùÜ
<
DoubË_t
>::
cÚ¡_™”©Ü
 
šd™
;

1066 
IÁ_t
 
	gÄbkg
;

1067 
IÁ_t
 
	gÃsig
;

1068 
IÁ_t
 
	g²esig
=0;

1069 
DoubË_t
 
	g»jb
=0;

1070 
DoubË_t
 
	geffs
=1.0;

1071 
DoubË_t
 
	g´ejb
=0;

1072 
DoubË_t
 
	g³ffs
=1.0;

1074 
DoubË_t
 
	gdeffs
;

1075 
DoubË_t
 
	g¬—
=0;

1076 
IÁ_t
 
	gÅok
=0;

1080 
IÁ_t
 
	gi
=0; i<
	gÅ
; i++) {

1081 
	gfcut
 = 
mšf
 + 
df
*
DoubË_t
(
i
);

1082 
	gšd™
 = 
¡d
::
fšd_if
Ğ
sFsig
.
begš
(), sFsig.
’d
(), std::
bšd2nd
(¡d::
g»©”_equ®
<
DoubË_t
>(), 
fcut
));

1083 
	gÃsig
 = 
sFsig
.
’d
()-
šd™
;

1084 ià(
	gTM©h
::
Abs
(
²esig
-
Ãsig
)>0) {

1085 
Åok
++;

1086 
	gšd™
 = 
¡d
::
fšd_if
Ğ
sFbkg
.
begš
(), sFbkg.
’d
(), std::
bšd2nd
(¡d::
g»©”_equ®
<
DoubË_t
>(), 
fcut
));

1087 
	gÄbkg
 = 
šd™
-
sFbkg
.
begš
();

1088 
	g»jb
 = 
DoubË_t
(
Äbkg
)/DoubË_t(
nbkg
);

1089 
	geffs
 = 
DoubË_t
(
Ãsig
)/DoubË_t(
nsig
);

1092 
	gdeffs
 = 
effs
-
³ffs
;

1093 
	g¬—
 +ğ0.5*
TM©h
::
Abs
(
deffs
)*(
»jb
+
´ejb
);

1094 
	g´ejb
 = 
»jb
;

1095 
	g³ffs
 = 
effs
;

1097 
	g²esig
 = 
Ãsig
;

1099 
	g¬—
 +ğ0.5*(1+
»jb
)*
effs
;

1101  (1.0-
	g¬—
);

1110 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$E¼ÜR©eRoc
()

1112 
	`Log
(è<< 
kWARNING
 << "<E¼ÜR©eRoc> Should‚Ù bu£d iÀthcu¼’ˆv”siÚ! Check!" << 
Endl
;

1113 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

1114 ià(
Ãve
<1) {

1115 
	`Log
(è<< 
kFATAL
 << "<E¼ÜR©eRoc> Inv®id s¹/’d indiûs!" << 
Endl
;

1118 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1120 
DoubË_t
 
sF
;

1122 
¡d
::
veùÜ
<
DoubË_t
> 
sFsig
;

1123 
¡d
::
veùÜ
<
DoubË_t
> 
sFbkg
;

1124 
DoubË_t
 
sumfsig
=0;

1125 
DoubË_t
 
sumfbkg
=0;

1126 
DoubË_t
 
sumf2sig
=0;

1127 
DoubË_t
 
sumf2bkg
=0;

1129 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

1130 cÚ¡ 
Ev’t
& 
e
 = *(*
ev’ts
)[
i
];

1131 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
(
i
);

1132 ià(
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(&
e
)) {

1133 
sFsig
.
	`push_back
(
sF
);

1134 
sumfsig
 +=
sF
;

1135 
sumf2sig
 +=
sF
*sF;

1138 
sFbkg
.
	`push_back
(
sF
);

1139 
sumfbkg
 +=
sF
;

1140 
sumf2bkg
 +=
sF
*sF;

1143 
fsigave
 = 
sumfsig
/
sFsig
.
	`size
();

1144 
fbkgave
 = 
sumfbkg
/
sFbkg
.
	`size
();

1145 
fsigrms
 = 
TM©h
::
	`Sq¹
(
	`gToŞs
().
	`Compu‹V¬Ÿnû
(
sumf2sig
,
sumfsig
,
sFsig
.
	`size
()));

1146 
fbkgrms
 = 
TM©h
::
	`Sq¹
(
	`gToŞs
().
	`Compu‹V¬Ÿnû
(
sumf2bkg
,
sumfbkg
,
sFbkg
.
	`size
()));

1148  
	`E¼ÜR©eRocRaw
Ğ
sFsig
, 
sFbkg
 );

1149 
	}
}

1158 
	gTMVA
::
RuËF™P¬ams
::
	$E¼ÜR©eRocT¡
()

1160 
	`Log
(è<< 
kWARNING
 << "<E¼ÜR©eRocT¡> Should‚Ù bu£d iÀthcu¼’ˆv”siÚ! Check!" << 
Endl
;

1161 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

1162 ià(
Ãve
<1) {

1163 
	`Log
(è<< 
kFATAL
 << "<E¼ÜR©eRocT¡> Inv®id s¹/’d indiûs!" << 
Endl
;

1167 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1170 
DoubË_t
 
sF
;

1171 
¡d
::
veùÜ
< std::veùÜ<
DoubË_t
> > 
sFsig
;

1172 
¡d
::
veùÜ
< std::veùÜ<
DoubË_t
> > 
sFbkg
;

1174 
sFsig
.
	`»size
Ğ
fGDNTau
 );

1175 
sFbkg
.
	`»size
Ğ
fGDNTau
 );

1178 
UIÁ_t
 
i
=
fP”fIdx1
; i<
fP”fIdx2
+1; i++) {

1179 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1182 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
i
, 
fGDOfsT¡
[
™au
], 
fGDCÛfT¡
[™au], 
fGDCÛfLšT¡
[itau] );

1183 ià(
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
((*
ev’ts
)[
i
])) {

1184 
sFsig
[
™au
].
	`push_back
(
sF
);

1187 
sFbkg
[
™au
].
	`push_back
(
sF
);

1191 
DoubË_t
 
”r
;

1193 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1194 
”r
 = 
	`E¼ÜR©eRocRaw
Ğ
sFsig
[
™au
], 
sFbkg
[itau] );

1195 
fGDE¼T¡
[
™au
] = 
”r
;

1197 
	}
}

1204 
UIÁ_t
 
	gTMVA
::
RuËF™P¬ams
::
	$RiskP”fT¡
()

1206 
UIÁ_t
 
Ãve
 = 
fP”fIdx2
-
fP”fIdx1
+1;

1207 ià(
Ãve
<1) {

1208 
	`Log
(è<< 
kFATAL
 << "<E¼ÜR©eRocT¡> Inv®id s¹/’d indiûs!" << 
Endl
;

1212 
DoubË_t
 
sumx
 = 0;

1213 
DoubË_t
 
sumx2
 = 0;

1214 
DoubË_t
 
maxx
 = -100.0;

1215 
DoubË_t
 
mšx
 = 1e30;

1216 
UIÁ_t
 
™aumš
 = 0;

1217 
UIÁ_t
 
nok
=0;

1218 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1219 ià(
fGDE¼T¡OK
[
™au
]) {

1220 
nok
++;

1221 
fGDE¼T¡
[
™au
] = 
	`RiskP”f
(itau);

1222 
sumx
 +ğ
fGDE¼T¡
[
™au
];

1223 
sumx2
 +ğ
fGDE¼T¡
[
™au
]*fGDErrTst[itau];

1224 ià(
fGDE¼T¡
[
™au
]>
maxx
) maxx=fGDErrTst[itau];

1225 ià(
fGDE¼T¡
[
™au
]<
mšx
) {

1226 
mšx
=
fGDE¼T¡
[
™au
];

1227 
™aumš
 = 
™au
;

1231 
DoubË_t
 
sigx
 = 
TM©h
::
	`Sq¹
(
	`gToŞs
().
	`Compu‹V¬Ÿnû
Ğ
sumx2
, 
sumx
, 
nok
 ) );

1232 
DoubË_t
 
maxacc
 = 
mšx
+
sigx
;

1234 ià(
nok
>0) {

1235 
nok
 = 0;

1236 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1237 ià(
fGDE¼T¡OK
[
™au
]) {

1238 ià(
fGDE¼T¡
[
™au
] > 
maxacc
) {

1239 
fGDE¼T¡OK
[
™au
] = 
kFALSE
;

1242 
nok
++;

1247 
fGDNTauT¡OK
 = 
nok
;

1248 
	`Log
(è<< 
kVERBOSE
 << "TAU: "

1249 << 
™aumš
 << " "

1250 << 
nok
 << " "

1251 << 
mšx
 << " "

1252 << 
maxx
 << " "

1253 << 
sigx
 << 
Endl
;

1255  
™aumš
;

1256 
	}
}

1262 
	gTMVA
::
RuËF™P¬ams
::
	$MakeT¡G¿d›ÁVeùÜ
()

1264 
UIÁ_t
 
Ãve
 = 
fP©hIdx1
-
fP©hIdx2
+1;

1265 ià(
Ãve
<1) {

1266 
	`Log
(è<< 
kFATAL
 << "<MakeT¡G¿d›ÁVeùÜ> Inv®id s¹/’d indiûs!" << 
Endl
;

1270 
DoubË_t
 
nÜm
 = 2.0/
fNEveEffP©h
;

1272 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1275 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1276 ià(
fGDE¼T¡OK
[
™au
]) {

1277 
UIÁ_t
 
œ
=0; ir<
fNRuËs
; ir++) {

1278 
fG¿dVecT¡
[
™au
][
œ
]=0;

1280 
UIÁ_t
 

=0; il<
fNLš—r
; il++) {

1281 
fG¿dVecLšT¡
[
™au
][

]=0;

1287 
DoubË_t
 
sF
;

1288 
DoubË_t
 
r
;

1289 
DoubË_t
 
y
;

1290 cÚ¡ 
¡d
::
veùÜ
<
UIÁ_t
> *
ev’tRuËM­
=0;

1291 
UIÁ_t
 
ršd
;

1295 
UIÁ_t
 
nsfok
=0;

1296 
UIÁ_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1297 cÚ¡ 
Ev’t
 *
e
 = (*
ev’ts
)[
i
];

1298 
UIÁ_t
 
ÄuËs
=0;

1299 ià(
fRuËEn£mbË
->
	`DoRuËs
()) {

1300 
ev’tRuËM­
 = &(
fRuËEn£mbË
->
	`G‘Ev’tRuËM­
(
i
));

1301 
ÄuËs
 = (*
ev’tRuËM­
).
	`size
();

1303 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1306 ià(
fGDE¼T¡OK
[
™au
]) {

1307 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
i
, 
fGDOfsT¡
[
™au
], 
fGDCÛfT¡
[™au], 
fGDCÛfLšT¡
[itau] );

1308 ià(
TM©h
::
	`Abs
(
sF
)<1.0) {

1309 
nsfok
++;

1310 
r
 = 0;

1311 
y
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(
e
)?1.0:-1.0);

1312 
r
 = 
nÜm
*(
y
 - 
sF
è* 
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
i
);

1314 
UIÁ_t
 
œ
=0; ir<
ÄuËs
; ir++) {

1315 
ršd
 = (*
ev’tRuËM­
)[
œ
];

1316 
fG¿dVecT¡
[
™au
][
ršd
] +ğ
r
;

1319 
UIÁ_t
 

=0; il<
fNLš—r
; il++) {

1320 
fG¿dVecLšT¡
[
™au
][

] +ğ
r
*
fRuËEn£mbË
->
	`Ev®LšEv’tRaw
Ğ,
i
, 
kTRUE
 );

1326 
	}
}

1332 
	gTMVA
::
RuËF™P¬ams
::
	$Upd©eT¡CÛffic›Ás
()

1334 
DoubË_t
 
maxr
, 
maxl
, 
ùh»sh
, 
v®
;

1336 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1337 ià(
fGDE¼T¡OK
[
™au
]) {

1339 
maxr
 = ( (
fNRuËs
>0 ?

1340 
TM©h
::
	`Abs
(*(
¡d
::
	`max_–em’t
Ğ
fG¿dVecT¡
[
™au
].
	`begš
(), fG¿dVecT¡[™au].
	`’d
(), 
	`AbsV®ue
()))):0) );

1341 
maxl
 = ( (
fNLš—r
>0 ?

1342 
TM©h
::
	`Abs
(*(
¡d
::
	`max_–em’t
Ğ
fG¿dVecLšT¡
[
™au
].
	`begš
(), fG¿dVecLšT¡[™au].
	`’d
(), 
	`AbsV®ue
()))):0) );

1345 
DoubË_t
 
maxv
 = (
maxr
>
maxl
 ? maxr:maxl);

1346 
ùh»sh
 = 
maxv
 * 
fGDTauVec
[
™au
];

1354 ià(
maxv
>0) {

1355 cÚ¡ 
DoubË_t
 
¡•SÿË
=1.0;

1356 
UIÁ_t
 
i
=0; i<
fNRuËs
; i++) {

1357 
v®
 = 
fG¿dVecT¡
[
™au
][
i
];

1359 ià(
TM©h
::
	`Abs
(
v®
)>=
ùh»sh
) {

1360 
fGDCÛfT¡
[
™au
][
i
] +ğ
fGDP©hS‹p
*
v®
*
¡•SÿË
;

1364 
UIÁ_t
 
i
=0; i<
fNLš—r
; i++) {

1365 
v®
 = 
fG¿dVecLšT¡
[
™au
][
i
];

1366 ià(
TM©h
::
	`Abs
(
v®
)>=
ùh»sh
) {

1367 
fGDCÛfLšT¡
[
™au
][
i
] +ğ
fGDP©hS‹p
*
v®
*
¡•SÿË
/
fRuËEn£mbË
->
	`G‘LšNÜm
(i);

1374 
	`C®cT¡Av”ageRe¥Ú£
();

1375 
	}
}

1380 
	gTMVA
::
RuËF™P¬ams
::
	$MakeG¿d›ÁVeùÜ
()

1382 
şock_t
 
t0
;

1384 
t0
 = 
	`şock
();

1386 
UIÁ_t
 
Ãve
 = 
fP©hIdx2
-
fP©hIdx1
+1;

1387 ià(
Ãve
<1) {

1388 
	`Log
(è<< 
kFATAL
 << "<MakeG¿d›ÁVeùÜ> Inv®id s¹/’d indiûs!" << 
Endl
;

1392 cÚ¡ 
DoubË_t
 
nÜm
 = 2.0/
fNEveEffP©h
;

1394 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1397 
UIÁ_t
 
œ
=0; ir<
fNRuËs
; ir++) {

1398 
fG¿dVec
[
œ
]=0;

1400 
UIÁ_t
 

=0; il<
fNLš—r
; il++) {

1401 
fG¿dVecLš
[

]=0;

1405 
DoubË_t
 
sF
;

1406 
DoubË_t
 
r
;

1407 
DoubË_t
 
y
;

1408 cÚ¡ 
¡d
::
veùÜ
<
UIÁ_t
> *
ev’tRuËM­
=0;

1409 
UIÁ_t
 
ršd
;

1411 
gGDIn™
 +ğ
	`DoubË_t
(
	`şock
()-
t0
)/
CLOCKS_PER_SEC
;

1413 
UIÁ_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1414 cÚ¡ 
Ev’t
 *
e
 = (*
ev’ts
)[
i
];

1417 
sF
 = 
fRuËEn£mbË
->
	`Ev®Ev’t
Ğ
i
 );

1419 ià(
TM©h
::
	`Abs
(
sF
)<1.0) {

1420 
UIÁ_t
 
ÄuËs
=0;

1421 ià(
fRuËEn£mbË
->
	`DoRuËs
()) {

1422 
ev’tRuËM­
 = &(
fRuËEn£mbË
->
	`G‘Ev’tRuËM­
(
i
));

1423 
ÄuËs
 = (*
ev’tRuËM­
).
	`size
();

1425 
y
 = (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(
e
)?1.0:-1.0);

1426 
r
 = 
nÜm
*(
y
 - 
sF
è* 
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
i
);

1428 
UIÁ_t
 
œ
=0; ir<
ÄuËs
; ir++) {

1429 
ršd
 = (*
ev’tRuËM­
)[
œ
];

1430 
fG¿dVec
[
ršd
] +ğ
r
;

1435 
UIÁ_t
 

=0; il<
fNLš—r
; il++) {

1436 
fG¿dVecLš
[

] +ğ
r
*
fRuËEn£mbË
->
	`Ev®LšEv’tRaw
Ğ, 
i
, 
kTRUE
 );

1441 
	}
}

1446 
	gTMVA
::
RuËF™P¬ams
::
	$Upd©eCÛffic›Ás
()

1448 
DoubË_t
 
maxr
 = ( (
fRuËEn£mbË
->
	`DoRuËs
() ?

1449 
TM©h
::
	`Abs
(*(
¡d
::
	`max_–em’t
Ğ
fG¿dVec
.
	`begš
(), fG¿dVec.
	`’d
(), 
	`AbsV®ue
()))):0) );

1450 
DoubË_t
 
maxl
 = ( (
fRuËEn£mbË
->
	`DoLš—r
() ?

1451 
TM©h
::
	`Abs
(*(
¡d
::
	`max_–em’t
Ğ
fG¿dVecLš
.
	`begš
(), fG¿dVecLš.
	`’d
(), 
	`AbsV®ue
()))):0) );

1453 
DoubË_t
 
maxv
 = (
maxr
>
maxl
 ? maxr:maxl);

1454 
DoubË_t
 
ùh»sh
 = 
maxv
 * 
fGDTau
;

1456 
DoubË_t
 
u£RTh»sh
;

1457 
DoubË_t
 
u£LTh»sh
;

1461 
u£RTh»sh
 = 
ùh»sh
;

1462 
u£LTh»sh
 = 
ùh»sh
;

1464 
DoubË_t
 
gv®
, 
lv®
, 
cÛf
, 
lcÛf
;

1469 ià(
maxv
>0) {

1470 
UIÁ_t
 
i
=0; i<
fG¿dVec
.
	`size
(); i++) {

1471 
gv®
 = 
fG¿dVec
[
i
];

1472 ià(
TM©h
::
	`Abs
(
gv®
)>=
u£RTh»sh
) {

1473 
cÛf
 = 
fRuËEn£mbË
->
	`G‘RuËsCÚ¡
(
i
)->
	`G‘CÛffic›Á
(è+ 
fGDP©hS‹p
*
gv®
;

1474 
fRuËEn£mbË
->
	`G‘RuËs
(
i
)->
	`S‘CÛffic›Á
(
cÛf
);

1479 
UIÁ_t
 
i
=0; i<
fG¿dVecLš
.
	`size
(); i++) {

1480 
lv®
 = 
fG¿dVecLš
[
i
];

1481 ià(
TM©h
::
	`Abs
(
lv®
)>=
u£LTh»sh
) {

1482 
lcÛf
 = 
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
(
i
è+ (
fGDP©hS‹p
*
lv®
/fRuËEn£mbË->
	`G‘LšNÜm
(i));

1483 
fRuËEn£mbË
->
	`S‘LšCÛffic›Á
(
i
,
lcÛf
);

1487 
DoubË_t
 
off£t
 = 
	`C®cAv”ageRe¥Ú£
();

1488 
fRuËEn£mbË
->
	`S‘Off£t
Ğ
off£t
 );

1490 
	}
}

1496 
	gTMVA
::
RuËF™P¬ams
::
	$C®cT¡Av”ageRe¥Ú£
()

1498 
UIÁ_t
 
™au
=0; iu<
fGDNTau
; itau++) {

1499 ià(
fGDE¼T¡OK
[
™au
]) {

1500 
fGDOfsT¡
[
™au
] = 0;

1501 
UIÁ_t
 
s
=0; s<
fNLš—r
; s++) {

1502 
fGDOfsT¡
[
™au
] -ğ
fGDCÛfLšT¡
[™au][
s
] * 
fAv”ageS–eùÜP©h
[s];

1504 
UIÁ_t
 
r
=0;„<
fNRuËs
;„++) {

1505 
fGDOfsT¡
[
™au
] -ğ
fGDCÛfT¡
[™au][
r
] * 
fAv”ageRuËP©h
[r];

1510 
	}
}

1517 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$C®cAv”ageRe¥Ú£
()

1519 
DoubË_t
 
ofs
 = 0;

1520 
UIÁ_t
 
s
=0; s<
fNLš—r
; s++) {

1521 
ofs
 -ğ
fRuËEn£mbË
->
	`G‘LšCÛffic›Ás
(
s
è* 
fAv”ageS–eùÜP©h
[s];

1523 
UIÁ_t
 
r
=0;„<
fNRuËs
;„++) {

1524 
ofs
 -ğ
fRuËEn£mbË
->
	`G‘RuËs
(
r
)->
	`G‘CÛffic›Á
(è* 
fAv”ageRuËP©h
[r];

1526  
ofs
;

1527 
	}
}

1532 
DoubË_t
 
	gTMVA
::
RuËF™P¬ams
::
	$C®cAv”ageTruth
()

1534 ià(
fP©hIdx2
<=
fP©hIdx1
) {

1535 
	`Log
(è<< 
kFATAL
 << "<C®cAv”ageTruth> Inv®id s¹/’d indiûs!" << 
Endl
;

1538 
DoubË_t
 
sum
=0;

1539 
DoubË_t
 
’sig
=0;

1540 
DoubË_t
 
’bkg
=0;

1541 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
 *> *
ev’ts
 = &(
fRuËF™
->
	`G‘T¿ššgEv’ts
());

1542 
UIÁ_t
 
i
=
fP©hIdx1
; i<
fP©hIdx2
+1; i++) {

1543 
DoubË_t
 
ew
 = 
fRuËF™
->
	`G‘T¿ššgEv’tWeight
(
i
);

1544 ià(
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
((*
ev’ts
)[
i
])è
’sig
 +ğ
ew
;

1545 
’bkg
 +ğ
ew
;

1546 
sum
 +ğ
ew
*(
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
((*
ev’ts
)[
i
])?1.0:-1.0);

1548 
	`Log
(è<< 
kVERBOSE
 << "Efãùivnumb” oàsigÇÈ/ background = " << 
’sig
 << " / " << 
’bkg
 << 
Endl
;

1550  
sum
/
fNEveEffP©h
;

1551 
	}
}

1555 
IÁ_t
 
	gTMVA
::
RuËF™P¬ams
::
	$Ty³
ĞcÚ¡ 
Ev’t
 * 
e
 ) const {

1556  (
fRuËF™
->
	`G‘M‘hodRuËF™
()->
	`D©aInfo
().
	`IsSigÇl
(
e
) ? 1:-1);

1557 
	}
}

1561 
	gTMVA
::
RuËF™P¬ams
::
	$S‘MsgTy³
Ğ
EMsgTy³
 
t
 ) {

1562 
fLogg”
->
	`S‘MšTy³
(
t
);

1563 
	}
}

	@src/SVEvent.cxx

33 
	~"TMVA/SVEv’t.h
"

35 
	~"TMVA/Ev’t.h
"

37 
	~"Rty³s.h
"

39 
	~<io¡»am
>

41 
CÏssImp
(
TMVA
::
SVEv’t
);

43 
	gTMVA
::
SVEv’t
::
	$SVEv’t
()

44 : 
	`fD©aVeùÜ
(0),

45 
	`fCweight
(1.),

46 
	`fAÍha
(0),

47 
	`fAÍha_p
(0),

48 
	`fE¼ÜCache
(0),

49 
	`fNV¬
(0),

50 
	`fTy³FÏg
(0),

51 
	`fIdx
(0),

52 
	`fNs
(0),

53 
	`fIsShršked
(0),

54 
	`fLše
(0),

55 
	$fT¬g‘
(0)

57 
	}
}

62 
	gTMVA
::
SVEv’t
::
	$SVEv’t
ĞcÚ¡ 
Ev’t
* 
ev’t
, 
Flßt_t
 
C_·r
, 
BoŞ_t
 
isSigÇl
 )

63 : 
	`fD©aVeùÜ
(
ev’t
->
	`G‘V®ues
()),

64 
	`fCweight
(
C_·r
*
ev’t
->
	`G‘Weight
()),

65 
	`fAÍha
(0),

66 
	`fAÍha_p
(0),

67 
	`fE¼ÜCache
(0),

68 
	`fNV¬
 ( 
ev’t
->
	`G‘NV¬ŸbËs
() ),

69 
	`fTy³FÏg
Ğ
isSigÇl
 ? -1 : 1 ),

70 
	`fIdx
 ( 
isSigÇl
 ? -1 : 1 ),

71 
	`fNs
(0),

72 
	`fIsShršked
(0),

73 
	`fLše
(0),

74 
	`fT¬g‘
((
ev’t
->
	`G‘NT¬g‘s
(è> 0 ?ƒv’t->
	$G‘T¬g‘
(0) : 0))

76 
	}
}

81 
TMVA
::
SVEv’t
::SVEv’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>* 
sveùÜ
, Flßt_ˆ
®pha
, 
IÁ_t
 
ty³FÏg
, 
UIÁ_t
 
ns
 )

82 : 
fD©aVeùÜ
(*
sveùÜ
),

83 
fCweight
(-1.),

84 
fAÍha
(
®pha
),

85 
fAÍha_p
(0),

86 
fE¼ÜCache
(-1.),

87 
fNV¬
(
sveùÜ
->
size
()),

88 
fTy³FÏg
(
ty³FÏg
),

89 
fIdx
(-1),

90 
fNs
(
ns
),

91 
fIsShršked
(0),

92 
fLše
(0),

93 
	$fT¬g‘
(0)

95 
	}
}

100 
	gTMVA
::
SVEv’t
::SVEv’tĞcÚ¡ 
¡d
::
veùÜ
<
Flßt_t
>* 
sveùÜ
, Flßt_ˆ
®pha
, Flßt_ˆ
®pha_p
,
IÁ_t
 
ty³FÏg
)

101 : 
fD©aVeùÜ
(*
sveùÜ
),

102 
fCweight
(-1.),

103 
fAÍha
(
®pha
),

104 
fAÍha_p
(
®pha_p
),

105 
fE¼ÜCache
(-1.),

106 
fNV¬
(
sveùÜ
->
size
()),

107 
fTy³FÏg
(
ty³FÏg
),

108 
fIdx
(-1),

109 
fNs
(0),

110 
fIsShršked
(0),

111 
fLše
(0),

112 
	$fT¬g‘
(0)

114 
	}
}

119 
	gTMVA
::
SVEv’t
::~
	$SVEv’t
()

121 ià(
fLše
 != 0) {

122 
d–‘e
 [] 
fLše
;

123 
fLše
 = 0;

125 
	}
}

130 
	gTMVA
::
SVEv’t
::
	$Pršt
Ğ
¡d
::
o¡»am
& 
os
 ) const

132 
os
 << "ty³::" << 
fTy³FÏg
 <<"¬g‘::"<< 
fT¬g‘
 << "‡Íha::" << 
fAÍha
 <<"‡Íha_p::"<< 
fAÍha_p
<< " values::" ;

133 
UIÁ_t
 
j
 =0; j < 
fD©aVeùÜ
.
	`size
();j++è
os
<<fD©aVeùÜ.
	`©
(j)<<" ";

134 
os
 << 
¡d
::
’dl
;

135 
	}
}

140 
	gTMVA
::
SVEv’t
::
	$PrštD©a
()

142 
UIÁ_t
 
i
 = 0; i < 
fNV¬
; i++è
¡d
::
cout
<<
fD©aVeùÜ
.
	`©
(i)<<" ";

143 
¡d
::
cout
<<¡d::
’dl
;

144 
	}
}

	@src/SVKernelFunction.cxx

39 
	~"TMVA/SVK”ÃlFunùiÚ.h
"

40 
	~"TMVA/SVEv’t.h
"

41 
	~"TM©h.h
"

42 
	~<veùÜ
>

47 
	gTMVA
::
SVK”ÃlFunùiÚ
::
	$SVK”ÃlFunùiÚ
()

48 : 
	`fGamma
(0.),

49 
	`fK”Ãl
(
kRBF
),

50 
	`fOrd”
(0),

51 
	`fTh‘a
(0),

52 
	$fK­·
(0)

54 
	}
}

59 
	gTMVA
::
SVK”ÃlFunùiÚ
::
	$SVK”ÃlFunùiÚ
Ğ
Flßt_t
 
gamma
 )

60 : 
	`fGamma
(
gamma
),

61 
	`fK”Ãl
(
kRBF
),

62 
	`fOrd”
(0),

63 
	`fTh‘a
(0),

64 
	$fK­·
(0)

66 
fmGamma
.
	`ş—r
();

67 
	}
}

72 
	gTMVA
::
SVK”ÃlFunùiÚ
::
	$SVK”ÃlFunùiÚ
Ğ
EK”ÃlTy³
 
k
, 
Flßt_t
 
·¿m1
, Flßt_ˆ
·¿m2
)

73 : 
	$fK”Ãl
(
k
)

75 ià(
k
==
kRBF
è{ 
fGamma
 = 
·¿m1
; }

76 ià(
k
==
kPŞynomŸl
){

77 
fOrd”
 = 
·¿m1
;

78 
fTh‘a
 = 
·¿m2
;

80 
fK”ÃlsLi¡
.
	`ş—r
();

81 
	}
}

86 
	gTMVA
::
SVK”ÃlFunùiÚ
::SVK”ÃlFunùiÚĞ
¡d
::
veùÜ
<> 
·¿ms
 ) :

87 
	$fK”Ãl
(
kMuÉiGauss
)

89 
fmGamma
.
	`ş—r
();

90  
¡d
::
veùÜ
<>::
cÚ¡_™”©Ü
 
™”
 = 
·¿ms
.
	`begš
(); i‹¸!ğ·¿ms.
	`’d
()\

91 ; ++
™”
 ){

92 
fmGamma
.
	`push_back
(*
™”
);

95 
	}
}

100 
	gTMVA
::
SVK”ÃlFunùiÚ
::SVK”ÃlFunùiÚ(
EK”ÃlTy³
 
k
, 
¡d
::
veùÜ
<EK”ÃlTy³> 
k”Ãls
, std::veùÜ<
Flßt_t
> 
gammas
, Flßt_ˆ
gamma
, Flßt_ˆ
Üd”
, Flßt_ˆ
th‘a
) :

101 
fGamma
(
gamma
),

102 
fK”Ãl
(
k
),

103 
fOrd”
(
Üd”
),

104 
	$fTh‘a
(
th‘a
)

106 
fmGamma
.
	`ş—r
();

107 
fK”ÃlsLi¡
.
	`ş—r
();

108 
fK”ÃlsLi¡
 = 
k”Ãls
;

109 
fmGamma
 = 
gammas
;

110 
	}
}

115 
	gTMVA
::
SVK”ÃlFunùiÚ
::~
	$SVK”ÃlFunùiÚ
()

117 
fmGamma
.
	`ş—r
();

118 
fK”ÃlsLi¡
.
	`ş—r
();

119 
	}
}

124 
	gTMVA
::
SVK”ÃlFunùiÚ
::
	$£tCom·tib™yP¬ams
(
EK”ÃlTy³
 
k
, 
UIÁ_t
 
Üd”
, 
Flßt_t
 
th‘a
, Flßt_ˆ
k­·
) {

125 
fK”Ãl
 = 
k
;

126 
fOrd”
 = 
Üd”
;

127 
fTh‘a
 = 
th‘a
;

128 
fK­·
 = 
k­·
;

129 
	}
}

133 
Flßt_t
 
	gTMVA
::
SVK”ÃlFunùiÚ
::
	$Ev®u©e
Ğ
SVEv’t
* 
ev1
, SVEv’t* 
ev2
 )

135 
fK”Ãl
) {

136 
kRBF
:

138 
¡d
::
veùÜ
<
Flßt_t
> *
v1
 = 
ev1
->
	`G‘D©aVeùÜ
();

139 
¡d
::
veùÜ
<
Flßt_t
> *
v2
 = 
ev2
->
	`G‘D©aVeùÜ
();

141 
Flßt_t
 
nÜm
 = 0;

142 
UIÁ_t
 
i
 = 0; i < 
v1
->
	`size
(); i++è
nÜm
 +ğ((*v1)[i] -(*
v2
)[i]) *((*v1)[i] -(*v2)[i]) ;

144  
TM©h
::
	`Exp
(-
nÜm
*
fGamma
);

146 
kMuÉiGauss
:

152 
¡d
::
veùÜ
<
Flßt_t
> *
v1
 = 
ev1
->
	`G‘D©aVeùÜ
();

153 
¡d
::
veùÜ
<
Flßt_t
> *
v2
 = 
ev2
->
	`G‘D©aVeùÜ
();

154 if(
fmGamma
.
	`size
(è!ğ
v1
->size()){

155 
¡d
::
cout
 << "Few” gamma thª iÅuˆv¬ŸbËs! #Gammasğ" << 
fmGamma
.
	`size
(è<< " #IÅuˆv¬ŸbËsğ" << 
v1
->size(è<< std::
’dl
;

156 
¡d
::
cout
 << "***>‡bÜˆ´og¿mƒxecutiÚ" << std::
’dl
;

157 
	`ex™
(1);

160 
Flßt_t
 
»suÉ
 = 1.;

161 
UIÁ_t
 
i
 = 0; i < 
v1
->
	`size
(); i++) {

162 
»suÉ
 *ğ
TM©h
::
	`Exp
Ğ-((*
v1
)[
i
] -(*
v2
)[i])*((*v1)[i] -(*v2)[i])*
fmGamma
[i] );

164  
»suÉ
;

166 
kPŞynomŸl
:

170 
¡d
::
veùÜ
<
Flßt_t
> *
v1
 = 
ev1
->
	`G‘D©aVeùÜ
();

171 
¡d
::
veùÜ
<
Flßt_t
> *
v2
 = 
ev2
->
	`G‘D©aVeùÜ
();

172 
Flßt_t
 
´od
 = 
fTh‘a
;

173 
UIÁ_t
 
idx
 = 0; idx < 
v1
->
	`size
(); idx++è
´od
 +ğ(*v1)[idx] * (*
v2
)[idx];

175 
Flßt_t
 
»suÉ
 = 1.;

176 
IÁ_t
 
i
 = 
fOrd”
;

177 
»suÉ
 = 
TM©h
::
	`Pow”
(
´od
,
i
);

178  
»suÉ
;

180 
kLš—r
:

184 
¡d
::
veùÜ
<
Flßt_t
> *
v1
 = 
ev1
->
	`G‘D©aVeùÜ
();

185 
¡d
::
veùÜ
<
Flßt_t
> *
v2
 = 
ev2
->
	`G‘D©aVeùÜ
();

186 
Flßt_t
 
´od
 = 0;

187 
UIÁ_t
 
i
 = 0; i < 
v1
->
	`size
(); i++è
´od
 +ğ(*v1)[i] * (*
v2
)[i];

188  
´od
;

190 
kSigmoid®
:

195 
¡d
::
veùÜ
<
Flßt_t
> *
v1
 = 
ev1
->
	`G‘D©aVeùÜ
();

196 
¡d
::
veùÜ
<
Flßt_t
> *
v2
 = 
ev2
->
	`G‘D©aVeùÜ
();

197 
Flßt_t
 
´od
 = 0;

198 
UIÁ_t
 
i
 = 0; i < 
v1
->
	`size
(); i++è
´od
 +ğ((*v1)[i] -(*
v2
)[i]) *((*v1)[i] -(*v2)[i]) ;

199 
´od
 *ğ
fK­·
;

200 
´od
 +ğ
fTh‘a
;

201  
TM©h
::
	`TªH
Ğ
´od
 );

203 
kProd
:

209 
Flßt_t
 
k”ÃlV®
;

210 
k”ÃlV®
 = 1;

211 
UIÁ_t
 
i
 = 0; i<
fK”ÃlsLi¡
.
	`size
(); i++){

212 
fK”Ãl
 = 
fK”ÃlsLi¡
.
	`©
(
i
);

213 
Flßt_t
 
a
 = 
	`Ev®u©e
(
ev1
,
ev2
);

214 
k”ÃlV®
 *ğ
a
;

216 
fK”Ãl
 = 
kProd
;

217  
k”ÃlV®
;

219 
kSum
:

225 
Flßt_t
 
k”ÃlV®
 = 0;

226 
UIÁ_t
 
i
 = 0; i<
fK”ÃlsLi¡
.
	`size
(); i++){

227 
fK”Ãl
 = 
fK”ÃlsLi¡
.
	`©
(
i
);

228 
Flßt_t
 
a
 = 
	`Ev®u©e
(
ev1
,
ev2
);

229 
k”ÃlV®
 +ğ
a
;

231 
fK”Ãl
 = 
kSum
;

232  
k”ÃlV®
;

236 
	}
}

	@src/SVKernelMatrix.cxx

39 
	~"TMVA/SVK”ÃlM©rix.h
"

41 
	~"TMVA/MsgLogg”.h
"

42 
	~"TMVA/SVEv’t.h
"

43 
	~"TMVA/SVK”ÃlFunùiÚ.h
"

44 
	~"TMVA/Ty³s.h
"

46 
	~"Rty³sCÜe.h
"

48 
	~<io¡»am
>

49 
	~<¡dexû±
>

54 
	gTMVA
::
SVK”ÃlM©rix
::
	$SVK”ÃlM©rix
()

55 : 
	`fSize
(0),

56 
	`fK”ÃlFunùiÚ
(0),

57 
	`fSVK”ÃlM©rix
(0),

58 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("ResuÉsReg»ssiÚ", 
kINFO
) )

60 
	}
}

65 
	gTMVA
::
SVK”ÃlM©rix
::SVK”ÃlM©rixĞ
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>* 
šputVeùÜs
, 
SVK”ÃlFunùiÚ
* 
k”ÃlFunùiÚ
 )

66 : 
fSize
(
šputVeùÜs
->
size
()),

67 
fK”ÃlFunùiÚ
(
k”ÃlFunùiÚ
),

68 
fLogg”
Ğ
Ãw
 
MsgLogg”
("SVK”ÃlM©rix", 
kINFO
) )

70 
	gfSVK”ÃlM©rix
 = 
Ãw
 
Flßt_t
*[
fSize
];

71 
	gŒy
{

72 
UIÁ_t
 
	gi
 = 0; i < 
	gfSize
; i++è
	gfSVK”ÃlM©rix
[
i
] = 
Ãw
 
Flßt_t
[i+1];

73 }
ÿtch
(...){

74 
Log
(è<< 
	gkFATAL
 << "IÅuˆd©¨toØÏrge. NÙƒnough memÜyØ®loÿ‹ memÜy fÜ SuµÜˆVeùÜ K”ÃÈM©rix. PËa£„eduûhnumb” oàšpuˆev’t Ü u£‡ difã»Á m‘hod."<<
	gEndl
;

78 
UIÁ_t
 
	gi
 = 0; i < 
	gfSize
; i++) {

79 
UIÁ_t
 
	gj
 = 0; j <=
i
; j++) {

80 
	gfSVK”ÃlM©rix
[
i
][
j
] = 
fK”ÃlFunùiÚ
->
Ev®u©e
((*
šputVeùÜs
)[i], (*inputVectors)[j]);

88 
	gTMVA
::
SVK”ÃlM©rix
::~
	$SVK”ÃlM©rix
()

90 
UIÁ_t
 
i
 = 
fSize
 -1; i > 0; i--) {

91 
d–‘e
[] 
fSVK”ÃlM©rix
[
i
];

92 
fSVK”ÃlM©rix
[
i
] = 0;

94 
d–‘e
[] 
fSVK”ÃlM©rix
;

95 
fSVK”ÃlM©rix
 = 0;

96 
	}
}

101 
Flßt_t
* 
	gTMVA
::
SVK”ÃlM©rix
::
	$G‘Lše
Ğ
UIÁ_t
 
lše
 )

103 
Flßt_t
* 
fLše
 = 
NULL
;

104 ià(
lše
 >ğ
fSize
) {

105  
NULL
;

108 
fLše
 = 
Ãw
 
Flßt_t
[
fSize
];

109  
UIÁ_t
 
i
 = 0; i <
lše
; i++)

110 
fLše
[
i
] = 
fSVK”ÃlM©rix
[
lše
][i];

111  
UIÁ_t
 
i
 = 
lše
; i < 
fSize
; i++)

112 
fLše
[
i
] = 
fSVK”ÃlM©rix
[i][
lše
];

113  
fLše
;

115 
	}
}

120 
Flßt_t
 
	gTMVA
::
SVK”ÃlM©rix
::
	$G‘EËm’t
(
UIÁ_t
 
i
, UIÁ_ˆ
j
)

122 ià(
i
 > 
j
è 
fSVK”ÃlM©rix
[i][j];

123  
fSVK”ÃlM©rix
[
j
][
i
];

124 
	}
}

	@src/SVWorkingSet.cxx

33 
	~"TMVA/SVWÜkšgS‘.h
"

35 
	~"TMVA/MsgLogg”.h
"

36 
	~"TMVA/SVEv’t.h
"

37 
	~"TMVA/SVK”ÃlFunùiÚ.h
"

38 
	~"TMVA/SVK”ÃlM©rix.h
"

39 
	~"TMVA/Ty³s.h
"

42 
	~"TM©h.h
"

43 
	~"TRªdom3.h
"

45 
	~<io¡»am
>

46 
	~<veùÜ
>

51 
	gTMVA
::
SVWÜkšgS‘
::
	$SVWÜkšgS‘
()

52 : 
	`fdoReg»ssiÚ
(
kFALSE
),

53 
	`fIÅutD©a
(0),

54 
	`fSupVec
(0),

55 
	`fKFunùiÚ
(0),

56 
	`fKM©rix
(0),

57 
	`fTEv’tUp
(0),

58 
	`fTEv’tLow
(0),

59 
	`fB_low
(1.),

60 
	`fB_up
(-1.),

61 
	`fTŞ”ªû
(0.01),

62 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
Ğ"SVWÜkšgS‘", 
kINFO
 ) )

64 
	}
}

69 
	gTMVA
::
SVWÜkšgS‘
::SVWÜkšgS‘(
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>*
šputVeùÜs
, 
SVK”ÃlFunùiÚ
* 
k”ÃlFunùiÚ
,

70 
Flßt_t
 
tŞ
, 
BoŞ_t
 
dÜeg
)

71 : 
fdoReg»ssiÚ
(
dÜeg
),

72 
fIÅutD©a
(
šputVeùÜs
),

73 
fSupVec
(0),

74 
fKFunùiÚ
(
k”ÃlFunùiÚ
),

75 
fTEv’tUp
(0),

76 
fTEv’tLow
(0),

77 
fB_low
(1.),

78 
fB_up
(-1.),

79 
fTŞ”ªû
(
tŞ
),

80 
fLogg”
Ğ
Ãw
 
MsgLogg”
Ğ"SVWÜkšgS‘", 
kINFO
 ) )

82 
	gfKM©rix
 = 
Ãw
 
TMVA
::
SVK”ÃlM©rix
(
šputVeùÜs
, 
k”ÃlFunùiÚ
);

83 
Flßt_t
 *
	g±
;

84  
UIÁ_t
 
	gi
 = 0; i < 
	gfIÅutD©a
->
size
(); i++){

85 
	g±
 = 
fKM©rix
->
G‘Lše
(
i
);

86 
	gfIÅutD©a
->
©
(
i
)->
S‘Lše
(
±
);

87 
	gfIÅutD©a
->
©
(
i
)->
S‘Ns
(i);

88 if(
	gfdoReg»ssiÚ
è
	gfIÅutD©a
->
©
(
i
)->
S‘E¼ÜCache
(
fIÅutD©a
->©(i)->
G‘T¬g‘
());

90 
TRªdom3
 
	g¿nd
;

91 
UIÁ_t
 
	gkk
 = 
¿nd
.
IÁeg”
(
fIÅutD©a
->
size
());

92 if(
	gfdoReg»ssiÚ
) {

93 
	gfTEv’tLow
 = 
fTEv’tUp
 =
fIÅutD©a
->
©
(0);

94 
	gfB_low
 = 
fTEv’tUp
 ->
G‘T¬g‘
(è- 
fTŞ”ªû
;

95 
	gfB_up
 = 
fTEv’tLow
->
G‘T¬g‘
(è+ 
fTŞ”ªû
;

99 if(
	gfIÅutD©a
->
©
(
kk
)->
G‘Ty³FÏg
()==-1){

100 
fTEv’tLow
 = 
fIÅutD©a
->
©
(
kk
);

103 
	gkk
 = 
¿nd
.
IÁeg”
(
fIÅutD©a
->
size
());

107 ià(
	gfIÅutD©a
->
©
(
kk
)->
G‘Ty³FÏg
()==1) {

108 
fTEv’tUp
 = 
fIÅutD©a
->
©
(
kk
);

111 
	gkk
 = 
¿nd
.
IÁeg”
(
fIÅutD©a
->
size
());

114 
	gfTEv’tUp
 ->
S‘E¼ÜCache
(
fTEv’tUp
->
G‘T¬g‘
());

115 
	gfTEv’tLow
->
S‘E¼ÜCache
(
fTEv’tUp
->
G‘T¬g‘
());

121 
	gTMVA
::
SVWÜkšgS‘
::~
	$SVWÜkšgS‘
()

123 ià(
fKM©rix
 !ğ0è{
d–‘e
 fKMatrix; fKMatrix = 0;}

124 
d–‘e
 
fLogg”
;

125 
	}
}

129 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$ExamšeExam¶e
Ğ
TMVA
::
SVEv’t
* 
jevt
 )

131 
SVEv’t
* 
›vt
=0;

132 
Flßt_t
 
fE¼ÜC_J
 = 0.;

133 ifĞ
jevt
->
	`G‘Idx
()==0è
fE¼ÜC_J
 = jevt->
	`G‘E¼ÜCache
();

135 
Flßt_t
 *
fKV®s
 = 
jevt
->
	`G‘Lše
();

136 
fE¼ÜC_J
 = 0.;

137 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

139 
UIÁ_t
 
k
=0;

140 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

141 if((*
idI‹r
)->
	`G‘AÍha
()>0)

142 
fE¼ÜC_J
 +ğ(*
idI‹r
)->
	`G‘AÍha
()*(*idI‹r)->
	`G‘Ty³FÏg
()*
fKV®s
[
k
];

143 
k
++;

147 
fE¼ÜC_J
 -ğ
jevt
->
	`G‘Ty³FÏg
();

148 
jevt
->
	`S‘E¼ÜCache
(
fE¼ÜC_J
);

150 if((
jevt
->
	`G‘Idx
(è=ğ1è&& (
fE¼ÜC_J
 < 
fB_up
 )){

151 
fB_up
 = 
fE¼ÜC_J
;

152 
fTEv’tUp
 = 
jevt
;

154 ià((
jevt
->
	`G‘Idx
(è=ğ-1)&&(
fE¼ÜC_J
 > 
fB_low
)) {

155 
fB_low
 = 
fE¼ÜC_J
;

156 
fTEv’tLow
 = 
jevt
;

159 
BoŞ_t
 
cÚv”ged
 = 
kTRUE
;

161 if((
jevt
->
	`G‘Idx
()>=0è&& (
fB_low
 - 
fE¼ÜC_J
 > 2*
fTŞ”ªû
)) {

162 
cÚv”ged
 = 
kFALSE
;

163 
›vt
 = 
fTEv’tLow
;

166 if((
jevt
->
	`G‘Idx
()<=0è&& (
fE¼ÜC_J
 - 
fB_up
 > 2*
fTŞ”ªû
)) {

167 
cÚv”ged
 = 
kFALSE
;

168 
›vt
 = 
fTEv’tUp
;

171 ià(
cÚv”ged
è 
kFALSE
;

173 if(
jevt
->
	`G‘Idx
()==0){

174 if(
fB_low
 - 
fE¼ÜC_J
 > fE¼ÜC_J - 
fB_up
è
›vt
 = 
fTEv’tLow
;

175 
›vt
 = 
fTEv’tUp
;

178 ià(
	`TakeS‹p
(
›vt
, 
jevt
)è 
kTRUE
;

179  
kFALSE
;

180 
	}
}

185 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$TakeS‹p
(
TMVA
::
SVEv’t
* 
›vt
,TMVA::SVEv’t* 
jevt
 )

187 ià(
›vt
 =ğ
jevt
è 
kFALSE
;

188 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

189 cÚ¡ 
Flßt_t
 
•sÚ
 = 1e-8;

191 
Flßt_t
 
ty³_I
, 
ty³_J
;

192 
Flßt_t
 
”rÜC_I
, 
”rÜC_J
;

193 
Flßt_t
 
®pha_I
, 
®pha_J
;

195 
Flßt_t
 
ÃwAÍha_I
, 
ÃwAÍha_J
;

196 
IÁ_t
 
s
;

198 
Flßt_t
 
l
, 
h
, 
lobj
 = 0, 
hobj
 = 0;

199 
Flßt_t
 
‘a
;

201 
ty³_I
 = 
›vt
->
	`G‘Ty³FÏg
();

202 
®pha_I
 = 
›vt
->
	`G‘AÍha
();

203 
”rÜC_I
 = 
›vt
->
	`G‘E¼ÜCache
();

205 
ty³_J
 = 
jevt
->
	`G‘Ty³FÏg
();

206 
®pha_J
 = 
jevt
->
	`G‘AÍha
();

207 
”rÜC_J
 = 
jevt
->
	`G‘E¼ÜCache
();

209 
s
 = 
	`IÁ_t
Ğ
ty³_I
 * 
ty³_J
 );

211 
Flßt_t
 
c_i
 = 
›vt
->
	`G‘Cweight
();

213 
Flßt_t
 
c_j
 = 
jevt
->
	`G‘Cweight
();

217 ià(
ty³_I
 =ğ
ty³_J
) {

218 
Flßt_t
 
gamma
 = 
®pha_I
 + 
®pha_J
;

220 iàĞ
c_i
 > 
c_j
 ) {

221 iàĞ
gamma
 < 
c_j
 ) {

222 
l
 = 0;

223 
h
 = 
gamma
;

226 
h
 = 
c_j
;

227 iàĞ
gamma
 < 
c_i
 )

228 
l
 = 0;

230 
l
 = 
gamma
 - 
c_i
;

234 iàĞ
gamma
 < 
c_i
 ){

235 
l
 = 0;

236 
h
 = 
gamma
;

239 
l
 = 
gamma
 - 
c_i
;

240 iàĞ
gamma
 < 
c_j
 )

241 
h
 = 
gamma
;

243 
h
 = 
c_j
;

248 
Flßt_t
 
gamma
 = 
®pha_I
 - 
®pha_J
;

249 ià(
gamma
 > 0) {

250 
l
 = 0;

251 iàĞ
gamma
 >ğ(
c_i
 - 
c_j
) )

252 
h
 = 
c_i
 - 
gamma
;

254 
h
 = 
c_j
;

257 
l
 = -
gamma
;

258 iàĞ(
c_i
 - 
c_j
è>ğ
gamma
)

259 
h
 = 
c_j
;

261 
h
 = 
c_i
 - 
gamma
;

265 ià(
l
 =ğ
h
è 
kFALSE
;

266 
Flßt_t
 
k”Ãl_II
, 
k”Ãl_IJ
, 
k”Ãl_JJ
;

268 
k”Ãl_II
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(),ievt->GetNs());

269 
k”Ãl_IJ
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(), 
jevt
->GetNs());

270 
k”Ãl_JJ
 = 
fKM©rix
->
	`G‘EËm’t
(
jevt
->
	`G‘Ns
(),jevt->GetNs());

272 
‘a
 = 2*
k”Ãl_IJ
 - 
k”Ãl_II
 - 
k”Ãl_JJ
;

273 ià(
‘a
 < 0) {

274 
ÃwAÍha_J
 = 
®pha_J
 + (
ty³_J
*Ğ
”rÜC_J
 - 
”rÜC_I
 ))/
‘a
;

275 ià(
ÃwAÍha_J
 < 
l
)‚ewAlpha_J =†;

276 ià(
ÃwAÍha_J
 > 
h
)‚ewAlpha_J = h;

282 
Flßt_t
 
c_I
 = 
‘a
/2;

283 
Flßt_t
 
c_J
 = 
ty³_J
*Ğ
”rÜC_I
 - 
”rÜC_J
 ) - 
‘a
 * 
®pha_J
;

284 
lobj
 = 
c_I
 * 
l
 *† + 
c_J
 *†;

285 
hobj
 = 
c_I
 * 
h
 * h + 
c_J
 * h;

287 ià(
lobj
 > 
hobj
 + 
•sÚ
è
ÃwAÍha_J
 = 
l
;

288 ià(
lobj
 < 
hobj
 - 
•sÚ
è
ÃwAÍha_J
 = 
h
;

289 
ÃwAÍha_J
 = 
®pha_J
;

292 ià(
TM©h
::
	`Abs
Ğ
ÃwAÍha_J
 - 
®pha_J
 ) < ( 
•sÚ
 * (‚ewAlpha_J +‡lpha_J+ƒpsilon ))){

293  
kFALSE
;

296 
ÃwAÍha_I
 = 
®pha_I
 - 
s
*Ğ
ÃwAÍha_J
 - 
®pha_J
 );

298 ià(
ÃwAÍha_I
 < 0) {

299 
ÃwAÍha_J
 +ğ
s
* 
ÃwAÍha_I
;

300 
ÃwAÍha_I
 = 0;

302 ià(
ÃwAÍha_I
 > 
c_i
) {

303 
Flßt_t
 
‹mp
 = 
ÃwAÍha_I
 - 
c_i
;

304 
ÃwAÍha_J
 +ğ
s
 * 
‹mp
;

305 
ÃwAÍha_I
 = 
c_i
;

308 
Flßt_t
 
dL_I
 = 
ty³_I
 * ( 
ÃwAÍha_I
 - 
®pha_I
 );

309 
Flßt_t
 
dL_J
 = 
ty³_J
 * ( 
ÃwAÍha_J
 - 
®pha_J
 );

311 
IÁ_t
 
k
 = 0;

312 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

313 
k
++;

314 if((*
idI‹r
)->
	`G‘Idx
()==0){

315 
Flßt_t
 
ii
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(), (*
idI‹r
)->GetNs());

316 
Flßt_t
 
jj
 = 
fKM©rix
->
	`G‘EËm’t
(
jevt
->
	`G‘Ns
(), (*
idI‹r
)->GetNs());

318 (*
idI‹r
)->
	`Upd©eE¼ÜCache
(
dL_I
 * 
ii
 + 
dL_J
 * 
jj
);

321 
›vt
->
	`S‘AÍha
(
ÃwAÍha_I
);

322 
jevt
->
	`S‘AÍha
(
ÃwAÍha_J
);

324 
	`S‘Index
(
›vt
);

325 
	`S‘Index
(
jevt
);

328 
›vt
->
	`S‘E¼ÜCache
(
”rÜC_I
 + 
dL_I
*
k”Ãl_II
 + 
dL_J
*
k”Ãl_IJ
);

329 
jevt
->
	`S‘E¼ÜCache
(
”rÜC_J
 + 
dL_I
*
k”Ãl_IJ
 + 
dL_J
*
k”Ãl_JJ
);

333 
fB_low
 = -1*1e30;

334 
fB_up
 = 1e30;

336 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

337 if((*
idI‹r
)->
	`G‘Idx
()==0){

338 if((*
idI‹r
)->
	`G‘E¼ÜCache
()> 
fB_low
){

339 
fB_low
 = (*
idI‹r
)->
	`G‘E¼ÜCache
();

340 
fTEv’tLow
 = (*
idI‹r
);

342 ifĞ(*
idI‹r
)->
	`G‘E¼ÜCache
()< 
fB_up
){

343 
fB_up
 =(*
idI‹r
)->
	`G‘E¼ÜCache
();

344 
fTEv’tUp
 = (*
idI‹r
);

350 ià(
fB_low
 < 
TM©h
::
	`Max
(
›vt
->
	`G‘E¼ÜCache
(), 
jevt
->GetErrorCache())) {

351 ià(
›vt
->
	`G‘E¼ÜCache
(è> 
fB_low
) {

352 
fB_low
 = 
›vt
->
	`G‘E¼ÜCache
();

353 
fTEv’tLow
 = 
›vt
;

356 
fB_low
 = 
jevt
->
	`G‘E¼ÜCache
();

357 
fTEv’tLow
 = 
jevt
;

361 ià(
fB_up
 > 
TM©h
::
	`Max
(
›vt
->
	`G‘E¼ÜCache
(), 
jevt
->GetErrorCache())) {

362 ià(
›vt
->
	`G‘E¼ÜCache
()< 
fB_low
) {

363 
fB_up
 =
›vt
->
	`G‘E¼ÜCache
();

364 
fTEv’tUp
 = 
›vt
;

367 
fB_up
 =
jevt
->
	`G‘E¼ÜCache
() ;

368 
fTEv’tUp
 = 
jevt
;

371  
kTRUE
;

372 
	}
}

376 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$T”mš©ed
()

378 if((
fB_up
 > 
fB_low
 - 2*
fTŞ”ªû
)è 
kTRUE
;

379  
kFALSE
;

380 
	}
}

385 
	gTMVA
::
SVWÜkšgS‘
::
	$T¿š
(
UIÁ_t
 
nMaxI‹r
)

388 
IÁ_t
 
numChªged
 = 0;

389 
IÁ_t
 
examšeAÎ
 = 1;

391 
Flßt_t
 
numChªgedOld
 = 0;

392 
IÁ_t
 
d–Chªges
 = 0;

393 
UIÁ_t
 
num™
 = 0;

395 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

397 (
numChªged
 > 0è|| (
examšeAÎ
 > 0)) {

398 ià(
fIPyCu¼’tI‹r
è*fIPyCu¼’tI‹¸ğ
num™
;

399 ià(
fEx™FromT¿ššg
 && *fExitFromTraining) ;

400 
numChªged
 = 0;

401 ià(
examšeAÎ
) {

402 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹r!=fIÅutD©a->
	`’d
(); idIter++){

403 if(!
fdoReg»ssiÚ
è
numChªged
 +ğ(
UIÁ_t
)
	`ExamšeExam¶e
(*
idI‹r
);

404 
numChªged
 +ğ(
UIÁ_t
)
	`ExamšeExam¶eReg
(*
idI‹r
);

408 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹r!=fIÅutD©a->
	`’d
(); idIter++) {

409 ià((*
idI‹r
)->
	`IsInI0
()) {

410 if(!
fdoReg»ssiÚ
è
numChªged
 +ğ(
UIÁ_t
)
	`ExamšeExam¶e
(*
idI‹r
);

411 
numChªged
 +ğ(
UIÁ_t
)
	`ExamšeExam¶eReg
(*
idI‹r
);

412 ià(
	`T”mš©ed
()) {

413 
numChªged
 = 0;

420 ià(
examšeAÎ
 == 1)ƒxamineAll = 0;

421 ià(
numChªged
 =ğ0 ||‚umChªged < 10 || 
d–Chªges
 > 3 ) 
examšeAÎ
 = 1;

423 ià(
numChªged
 =ğ
numChªgedOld
è
d–Chªges
++;

424 
d–Chªges
 = 0;

425 
numChªgedOld
 = 
numChªged
;

426 ++
num™
;

428 ià(
num™
 >ğ
nMaxI‹r
) {

429 *
fLogg”
 << 
kWARNING


431 << "T¿ššg may‚Ù bcom¶‘ed. Try u£†es Co¡…¬am‘”" << 
Endl
;

435 
	}
}

439 
	gTMVA
::
SVWÜkšgS‘
::
	$S‘Index
Ğ
TMVA
::
SVEv’t
* 
ev’t
 )

441 ifĞ(0< 
ev’t
->
	`G‘AÍha
()è&& (ev’t->G‘AÍha()<ƒv’t->
	`G‘Cweight
()))

442 
ev’t
->
	`S‘Idx
(0);

444 ifĞ
ev’t
->
	`G‘Ty³FÏg
() == 1){

445 ifĞ
ev’t
->
	`G‘AÍha
() == 0)

446 
ev’t
->
	`S‘Idx
(1);

447 ifĞ
ev’t
->
	`G‘AÍha
(è=ğev’t->
	`G‘Cweight
() )

448 
ev’t
->
	`S‘Idx
(-1);

450 ifĞ
ev’t
->
	`G‘Ty³FÏg
() == -1){

451 ifĞ
ev’t
->
	`G‘AÍha
() == 0)

452 
ev’t
->
	`S‘Idx
(-1);

453 ifĞ
ev’t
->
	`G‘AÍha
(è=ğev’t->
	`G‘Cweight
() )

454 
ev’t
->
	`S‘Idx
(1);

456 
	}
}

460 
	gTMVA
::
SVWÜkšgS‘
::
	$PrštSt
()

462 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

463 
UIÁ_t
 
couÁ”
 = 0;

464  
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++)

465 if((*
idI‹r
)->
	`G‘AÍha
(è!=0è
couÁ”
++;

466 
	}
}

470 
	g¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>* TMVA::
SVWÜkšgS‘
::
	$G‘SuµÜtVeùÜs
()

472 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

473 ifĞ
fSupVec
 !ğ0è{
d–‘e
 fSupVec; fSupVec = 0; }

474 
fSupVec
 = 
Ãw
 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>(0);

476  
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

477 if((*
idI‹r
)->
	`G‘D–AÍha
() !=0){

478 
fSupVec
->
	`push_back
((*
idI‹r
));

481  
fSupVec
;

482 
	}
}

486 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$TakeS‹pReg
(
TMVA
::
SVEv’t
* 
›vt
,TMVA::SVEv’t* 
jevt
 )

488 ià(
›vt
 =ğ
jevt
è 
kFALSE
;

489 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

490 cÚ¡ 
Flßt_t
 
•sÚ
 = 0.001*
fTŞ”ªû
;

492 cÚ¡ 
Flßt_t
 
k”Ãl_II
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(),ievt->GetNs());

493 cÚ¡ 
Flßt_t
 
k”Ãl_IJ
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(),
jevt
->GetNs());

494 cÚ¡ 
Flßt_t
 
k”Ãl_JJ
 = 
fKM©rix
->
	`G‘EËm’t
(
jevt
->
	`G‘Ns
(),jevt->GetNs());

497 cÚ¡ 
Flßt_t
 
‘a
 = -2*
k”Ãl_IJ
 + 
k”Ãl_II
 + 
k”Ãl_JJ
;

498 cÚ¡ 
Flßt_t
 
gamma
 = 
›vt
->
	`G‘D–AÍha
(è+ 
jevt
->GetDeltaAlpha();

503 
BoŞ_t
 
ÿ£A
, 
ÿ£B
, 
ÿ£C
, 
ÿ£D
, 
‹rmš©ed
;

504 
ÿ£A
 = 
ÿ£B
 = 
ÿ£C
 = 
ÿ£D
 = 
‹rmš©ed
 = 
kFALSE
;

505 
Flßt_t
 
b_®pha_i
, 
b_®pha_j
, 
b_®pha_i_p
, 
b_®pha_j_p
;

506 cÚ¡ 
Flßt_t
 
b_co¡_i
 = 
›vt
->
	`G‘Cweight
();

507 cÚ¡ 
Flßt_t
 
b_co¡_j
 = 
jevt
->
	`G‘Cweight
();

509 
b_®pha_i
 = 
›vt
->
	`G‘AÍha
();

510 
b_®pha_j
 = 
jevt
->
	`G‘AÍha
();

511 
b_®pha_i_p
 = 
›vt
->
	`G‘AÍha_p
();

512 
b_®pha_j_p
 = 
jevt
->
	`G‘AÍha_p
();

515 
Flßt_t
 
d–fi
 = 
›vt
->
	`G‘E¼ÜCache
()-
jevt
->GetErrorCache();

518 !
‹rmš©ed
) {

519 cÚ¡ 
Flßt_t
 
nuÎ
 = 0.;

520 
Flßt_t
 
low
, 
high
;

521 
Flßt_t
 
tmp_®pha_i
, 
tmp_®pha_j
;

522 
tmp_®pha_i
 = 
tmp_®pha_j
 = 0.;

525 if((
ÿ£A
 =ğ
kFALSE
è&& (
b_®pha_i
 > 0 || (
b_®pha_i_p
 =ğ0 && 
d–fi
 > 0)è&& (
b_®pha_j
 > 0 || (
b_®pha_j_p
 == 0 && deltafi < 0)))

528 
low
 = 
TM©h
::
	`Max
Ğ
nuÎ
, 
gamma
 - 
b_co¡_j
 );

529 
high
 = 
TM©h
::
	`Mš
Ğ
b_co¡_i
 , 
gamma
);

531 if(
low
<
high
){

532 
tmp_®pha_j
 = 
b_®pha_j
 - (
d–fi
/
‘a
);

533 
tmp_®pha_j
 = 
TM©h
::
	`Mš
Ñmp_®pha_j,
high
 );

534 
tmp_®pha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

535 
tmp_®pha_i
 = 
b_®pha_i
 - (
tmp_®pha_j
 - 
b_®pha_j
);

538 ifĞ
	`IsDiffSignifiÿÁ
(
b_®pha_j
,
tmp_®pha_j
, 
•sÚ
è|| IsDiffSignifiÿÁ(
b_®pha_i
,
tmp_®pha_i
,ƒpsilon)){

539 
b_®pha_j
 = 
tmp_®pha_j
;

540 
b_®pha_i
 = 
tmp_®pha_i
;

545 
‹rmš©ed
 = 
kTRUE
;

547 
ÿ£A
 = 
kTRUE
;

549 if((
ÿ£B
==
kFALSE
è&& (
b_®pha_i
>0 || (
b_®pha_i_p
==0 && 
d–fi
 >2*
•sÚ
 )è&& (
b_®pha_j_p
>0 || (
b_®pha_j
==0 && deltafi>2*epsilon)))

552 
low
 = 
TM©h
::
	`Max
Ğ
nuÎ
, 
gamma
 );

553 
high
 = 
TM©h
::
	`Mš
Ğ
b_co¡_i
 , 
b_co¡_j
 + 
gamma
);

556 if(
low
<
high
){

557 
tmp_®pha_j
 = 
b_®pha_j_p
 - ((
d–fi
-2*
•sÚ
)/
‘a
);

558 
tmp_®pha_j
 = 
TM©h
::
	`Mš
Ñmp_®pha_j,
high
);

559 
tmp_®pha_j
 = 
TM©h
::
	`Max
(
low
,tmp_alpha_j);

560 
tmp_®pha_i
 = 
b_®pha_i
 - (
tmp_®pha_j
 - 
b_®pha_j_p
);

563 ifĞ
	`IsDiffSignifiÿÁ
(
b_®pha_j_p
,
tmp_®pha_j
, 
•sÚ
è|| IsDiffSignifiÿÁ(
b_®pha_i
,
tmp_®pha_i
,ƒpsilon)){

564 
b_®pha_j_p
 = 
tmp_®pha_j
;

565 
b_®pha_i
 = 
tmp_®pha_i
;

569 
‹rmš©ed
 = 
kTRUE
;

571 
ÿ£B
 = 
kTRUE
;

573 if((
ÿ£C
==
kFALSE
è&& (
b_®pha_i_p
>0 || (
b_®pha_i
==0 && 
d–fi
 < -2*
•sÚ
 )è&& (
b_®pha_j
>0 || (
b_®pha_j_p
==0 && deltafi< -2*epsilon)))

576 
low
 = 
TM©h
::
	`Max
(
nuÎ
, -
gamma
 );

577 
high
 = 
TM©h
::
	`Mš
(
b_co¡_i
, -
gamma
+
b_co¡_j
);

579 if(
low
<
high
){

580 
tmp_®pha_j
 = 
b_®pha_j
 - ((
d–fi
+2*
•sÚ
)/
‘a
);

581 
tmp_®pha_j
 = 
TM©h
::
	`Mš
Ñmp_®pha_j,
high
 );

582 
tmp_®pha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

583 
tmp_®pha_i
 = 
b_®pha_i_p
 - (
tmp_®pha_j
 - 
b_®pha_j
);

586 ifĞ
	`IsDiffSignifiÿÁ
(
b_®pha_j
,
tmp_®pha_j
, 
•sÚ
è|| IsDiffSignifiÿÁ(
b_®pha_i_p
,
tmp_®pha_i
,ƒpsilon)){

587 
b_®pha_j
 = 
tmp_®pha_j
;

588 
b_®pha_i_p
 = 
tmp_®pha_i
;

592 
‹rmš©ed
 = 
kTRUE
;

594 
ÿ£C
 = 
kTRUE
;

596 if((
ÿ£D
 =ğ
kFALSE
) &&

597 (
b_®pha_i_p
>0 || (
b_®pha_i
==0 && 
d–fi
 <0 )) &&

598 (
b_®pha_j_p
>0 || (
b_®pha_j
==0 && 
d–fi
 >0 )))

601 
low
 = 
TM©h
::
	`Max
(
nuÎ
,-
gamma
 - 
b_co¡_j
);

602 
high
 = 
TM©h
::
	`Mš
(
b_co¡_i
, -
gamma
);

604 if(
low
<
high
){

605 
tmp_®pha_j
 = 
b_®pha_j_p
 + (
d–fi
/
‘a
);

606 
tmp_®pha_j
 = 
TM©h
::
	`Mš
Ñmp_®pha_j,
high
 );

607 
tmp_®pha_j
 = 
TM©h
::
	`Max
(
low
 ,tmp_alpha_j);

608 
tmp_®pha_i
 = 
b_®pha_i_p
 - (
tmp_®pha_j
 - 
b_®pha_j_p
);

610 ifĞ
	`IsDiffSignifiÿÁ
(
b_®pha_j_p
,
tmp_®pha_j
, 
•sÚ
è|| IsDiffSignifiÿÁ(
b_®pha_i_p
,
tmp_®pha_i
,ƒpsilon)){

611 
b_®pha_j_p
 = 
tmp_®pha_j
;

612 
b_®pha_i_p
 = 
tmp_®pha_i
;

616 
‹rmš©ed
 = 
kTRUE
;

618 
ÿ£D
 = 
kTRUE
;

621 
‹rmš©ed
 = 
kTRUE
;

624 
d–fi
 +ğ
›vt
->
	`G‘D–AÍha
()*(
k”Ãl_II
 - 
k”Ãl_IJ
è+ 
jevt
->G‘D–AÍha()*(k”Ãl_IJ - 
k”Ãl_JJ
);

626 ifĞ
	`IsDiffSignifiÿÁ
(
b_®pha_i
, 
›vt
->
	`G‘AÍha
(), 
•sÚ
) ||

627 
	`IsDiffSignifiÿÁ
(
b_®pha_j
, 
jevt
->
	`G‘AÍha
(), 
•sÚ
) ||

628 
	`IsDiffSignifiÿÁ
(
b_®pha_i_p
, 
›vt
->
	`G‘AÍha_p
(), 
•sÚ
) ||

629 
	`IsDiffSignifiÿÁ
(
b_®pha_j_p
, 
jevt
->
	`G‘AÍha_p
(), 
•sÚ
) ){

633 cÚ¡ 
Flßt_t
 
diff_®pha_i
 = 
›vt
->
	`G‘D–AÍha
()+
b_®pha_i_p
 - ievt->
	`G‘AÍha
();

634 cÚ¡ 
Flßt_t
 
diff_®pha_j
 = 
jevt
->
	`G‘D–AÍha
()+
b_®pha_j_p
 - jevt->
	`G‘AÍha
();

637 
IÁ_t
 
k
 = 0;

638 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

639 
k
++;

641 if((*
idI‹r
)->
	`G‘Idx
()==0){

642 
Flßt_t
 
k_ii
 = 
fKM©rix
->
	`G‘EËm’t
(
›vt
->
	`G‘Ns
(), (*
idI‹r
)->GetNs());

643 
Flßt_t
 
k_jj
 = 
fKM©rix
->
	`G‘EËm’t
(
jevt
->
	`G‘Ns
(), (*
idI‹r
)->GetNs());

645 (*
idI‹r
)->
	`Upd©eE¼ÜCache
(
diff_®pha_i
 * 
k_ii
 + 
diff_®pha_j
 * 
k_jj
);

650 
›vt
->
	`S‘AÍha
(
b_®pha_i
);

651 
jevt
->
	`S‘AÍha
(
b_®pha_j
);

652 
›vt
->
	`S‘AÍha_p
(
b_®pha_i_p
);

653 
jevt
->
	`S‘AÍha_p
(
b_®pha_j_p
);

659 
fB_low
 = -1*1e30;

660 
fB_up
 =1e30;

662 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

663 if((!(*
idI‹r
)->
	`IsInI3
()è&& ((*idI‹r)->
	`G‘E¼ÜCache
()> 
fB_low
)){

664 
fB_low
 = (*
idI‹r
)->
	`G‘E¼ÜCache
();

665 
fTEv’tLow
 = (*
idI‹r
);

668 if((!(*
idI‹r
)->
	`IsInI2
()è&& ((*idI‹r)->
	`G‘E¼ÜCache
()< 
fB_up
)){

669 
fB_up
 =(*
idI‹r
)->
	`G‘E¼ÜCache
();

670 
fTEv’tUp
 = (*
idI‹r
);

673  
kTRUE
;

674 }  
kFALSE
;

675 
	}
}

680 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$ExamšeExam¶eReg
(
TMVA
::
SVEv’t
* 
jevt
)

682 
Flßt_t
 
ãps
 = 1e-7;

683 
SVEv’t
* 
›vt
=0;

684 
Flßt_t
 
fE¼ÜC_J
 = 0.;

685 ifĞ
jevt
->
	`IsInI0
()) {

686 
fE¼ÜC_J
 = 
jevt
->
	`G‘E¼ÜCache
();

689 
Flßt_t
 *
fKV®s
 = 
jevt
->
	`G‘Lše
();

690 
fE¼ÜC_J
 = 0.;

691 
¡d
::
veùÜ
<
TMVA
::
SVEv’t
*>::
™”©Ü
 
idI‹r
;

693 
UIÁ_t
 
k
=0;

694 
idI‹r
 = 
fIÅutD©a
->
	`begš
(); idI‹¸!ğfIÅutD©a->
	`’d
(); idIter++){

695 
fE¼ÜC_J
 -ğ(*
idI‹r
)->
	`G‘D–AÍha
()*
fKV®s
[
k
];

696 
k
++;

699 
fE¼ÜC_J
 +ğ
jevt
->
	`G‘T¬g‘
();

700 
jevt
->
	`S‘E¼ÜCache
(
fE¼ÜC_J
);

702 if(
jevt
->
	`IsInI1
()){

703 if(
fE¼ÜC_J
 + 
ãps
 < 
fB_up
 ){

704 
fB_up
 = 
fE¼ÜC_J
 + 
ãps
;

705 
fTEv’tUp
 = 
jevt
;

707 if(
fE¼ÜC_J
 -
ãps
 > 
fB_low
) {

708 
fB_low
 = 
fE¼ÜC_J
 - 
ãps
;

709 
fTEv’tLow
 = 
jevt
;

711 }if((
jevt
->
	`IsInI2
()è&& (
fE¼ÜC_J
 + 
ãps
 > 
fB_low
)){

712 
fB_low
 = 
fE¼ÜC_J
 + 
ãps
;

713 
fTEv’tLow
 = 
jevt
;

714 }if((
jevt
->
	`IsInI3
()è&& (
fE¼ÜC_J
 - 
ãps
 < 
fB_up
)){

715 
fB_up
 = 
fE¼ÜC_J
 - 
ãps
;

716 
fTEv’tUp
 = 
jevt
;

720 
BoŞ_t
 
cÚv”ged
 = 
kTRUE
;

722 if(
jevt
->
	`IsInI0a
()){

723 ifĞ
fB_low
 -
fE¼ÜC_J
 + 
ãps
 > 2*
fTŞ”ªû
){

724 
cÚv”ged
 = 
kFALSE
;

725 
›vt
 = 
fTEv’tLow
;

726 if(
fE¼ÜC_J
-
ãps
-
fB_up
 > 
fB_low
-fErrorC_J+feps){

727 
›vt
 = 
fTEv’tUp
;

729 }if(
fE¼ÜC_J
 -
ãps
 - 
fB_up
 > 2*
fTŞ”ªû
){

730 
cÚv”ged
 = 
kFALSE
;

731 
›vt
 = 
fTEv’tUp
;

732 if(
fB_low
 - 
fE¼ÜC_J
+
ãps
 > fE¼ÜC_J-ãp -
fB_up
){

733 
›vt
 = 
fTEv’tLow
;

739 if(
jevt
->
	`IsInI0b
()){

740 ifĞ
fB_low
 -
fE¼ÜC_J
 - 
ãps
 > 2*
fTŞ”ªû
){

741 
cÚv”ged
 = 
kFALSE
;

742 
›vt
 = 
fTEv’tLow
;

743 if(
fE¼ÜC_J
+
ãps
-
fB_up
 > 
fB_low
-fErrorC_J-feps){

744 
›vt
 = 
fTEv’tUp
;

746 }if(
fE¼ÜC_J
 + 
ãps
 - 
fB_up
 > 2*
fTŞ”ªû
){

747 
cÚv”ged
 = 
kFALSE
;

748 
›vt
 = 
fTEv’tUp
;

749 if(
fB_low
 - 
fE¼ÜC_J
-
ãps
 > fE¼ÜC_J+ãp -
fB_up
){

750 
›vt
 = 
fTEv’tLow
;

756 if(
jevt
->
	`IsInI1
()){

757 ifĞ
fB_low
 -
fE¼ÜC_J
 - 
ãps
 > 2*
fTŞ”ªû
){

758 
cÚv”ged
 = 
kFALSE
;

759 
›vt
 = 
fTEv’tLow
;

760 if(
fE¼ÜC_J
+
ãps
-
fB_up
 > 
fB_low
-fErrorC_J-feps){

761 
›vt
 = 
fTEv’tUp
;

763 }if(
fE¼ÜC_J
 - 
ãps
 - 
fB_up
 > 2*
fTŞ”ªû
){

764 
cÚv”ged
 = 
kFALSE
;

765 
›vt
 = 
fTEv’tUp
;

766 if(
fB_low
 - 
fE¼ÜC_J
+
ãps
 > fE¼ÜC_J-ãp -
fB_up
){

767 
›vt
 = 
fTEv’tLow
;

773 if(
jevt
->
	`IsInI2
()){

774 ifĞ
fE¼ÜC_J
 + 
ãps
 -
fB_up
 > 2*
fTŞ”ªû
){

775 
cÚv”ged
 = 
kFALSE
;

776 
›vt
 = 
fTEv’tUp
;

781 if(
jevt
->
	`IsInI3
()){

782 if(
fB_low
 -
fE¼ÜC_J
 +
ãps
 > 2*
fTŞ”ªû
){

783 
cÚv”ged
 = 
kFALSE
;

784 
›vt
 = 
fTEv’tLow
;

788 if(
cÚv”ged
è 
kFALSE
;

789 ià(
	`TakeS‹pReg
(
›vt
, 
jevt
)è 
kTRUE
;

790  
kFALSE
;

791 
	}
}

793 
BoŞ_t
 
	gTMVA
::
SVWÜkšgS‘
::
	$IsDiffSignifiÿÁ
(
Flßt_t
 
a_i
, Flßt_ˆ
a_j
, Flßt_ˆ
•s
)

795 ifĞ
TM©h
::
	`Abs
(
a_i
 - 
a_j
è> 
•s
*×_˜+‡_j +ƒps)è 
kTRUE
;

796  
kFALSE
;

797 
	}
}

	@src/SdivSqrtSplusB.cxx

36 
	~"TM©h.h
"

37 
	~"TMVA/SdivSq¹S¶usB.h
"

39 
CÏssImp
(
TMVA
::
SdivSq¹S¶usB
);

44 
DoubË_t
 
	gTMVA
::
SdivSq¹S¶usB
::
	$G‘S•¬©iÚIndex
ĞcÚ¡ 
DoubË_t
 
s
, cÚ¡ DoubË_ˆ
b
 )

46 ià(
s
+
b
 > 0è s / 
TM©h
::
	`Sq¹
(s+b);

48 
	}
}

58 
DoubË_t
 
	gTMVA
::
SdivSq¹S¶usB
::
	$G‘S•¬©iÚGaš
(cÚ¡ 
DoubË_t
 
nS–S
, cÚ¡ DoubË_ˆ
nS–B
,

59 cÚ¡ 
DoubË_t
 
nTÙS
, cÚ¡ DoubË_ˆ
nTÙB
)

61 iàĞ(
nTÙS
-
nS–S
)=òS–S && (
nTÙB
-
nS–B
)==nSelB)  0.;

63 
DoubË_t
 
·»ÁIndex
 = (
nTÙS
+
nTÙB
è*
this
->
	`G‘S•¬©iÚIndex
(nTotS,nTotB);

65 
DoubË_t
 
ËáIndex
 = ( ((
nTÙS
 - 
nS–S
è+ (
nTÙB
 - 
nS–B
))

66 * 
this
->
	`G‘S•¬©iÚIndex
(
nTÙS
-
nS–S
,
nTÙB
-
nS–B
) );

67 
DoubË_t
 
rightIndex
 = (
nS–S
+
nS–B
è* 
this
->
	`G‘S•¬©iÚIndex
(nSelS,nSelB);

70 
DoubË_t
 
diff
 = (
·»ÁIndex
 - 
ËáIndex
 - 
rightIndex
)/(
nTÙS
+
nTÙB
);

72 if(
diff
<
fP»cisiÚCut
 ) {

79  
diff
;

80 
	}
}

	@src/SeparationBase.cxx

63 
	~"TMVA/S•¬©iÚBa£.h
"

65 
	~"TM©h.h
"

66 
	~"TSŒšg.h
"

68 
	~<io¡»am
>

69 
	~<lim™s
>

71 
CÏssImp
(
TMVA
::
S•¬©iÚBa£
);

76 
	gTMVA
::
S•¬©iÚBa£
::
	$S•¬©iÚBa£
() :

77 
	`fName
(""),

78 
	`fP»cisiÚCut
(
TM©h
::
	`Sq¹
(
¡d
::
num”ic_lim™s
<>::
	$•sÚ
()))

81 
	}
}

86 
TMVA
::
S•¬©iÚBa£
::
	$S•¬©iÚBa£
ĞcÚ¡ 
S•¬©iÚBa£
& 
s
 ) :

87 
	`fName
(
s
.
fName
),

88 
	`fP»cisiÚCut
(
TM©h
::
	`Sq¹
(
¡d
::
num”ic_lim™s
<>::
	$•sÚ
()))

91 
	}
}

101 
DoubË_t
 
TMVA
::
S•¬©iÚBa£
::
	$G‘S•¬©iÚGaš
(cÚ¡ 
DoubË_t
 
nS–S
, cÚ¡ DoubË_ˆ
nS–B
,

102 cÚ¡ 
DoubË_t
 
nTÙS
, cÚ¡ DoubË_ˆ
nTÙB
)

104 iàĞ(
nTÙS
-
nS–S
)=òS–S && (
nTÙB
-
nS–B
)==nSelB)  0.;

113 
DoubË_t
 
·»ÁIndex
 = 
this
->
	`G‘S•¬©iÚIndex
(
nTÙS
,
nTÙB
);

115 
DoubË_t
 
ËáIndex
 = ( ((
nTÙS
 - 
nS–S
è+ (
nTÙB
 - 
nS–B
))/(nTotS+nTotB)

116 * 
this
->
	`G‘S•¬©iÚIndex
(
nTÙS
-
nS–S
,
nTÙB
-
nS–B
) );

117 
DoubË_t
 
rightIndex
 = (
nS–S
+
nS–B
)/(
nTÙS
+
nTÙB
è* 
this
->
	`G‘S•¬©iÚIndex
(nSelS,nSelB);

119 
DoubË_t
 
diff
 = 
·»ÁIndex
 - 
ËáIndex
 - 
rightIndex
;

122 if(
diff
<
fP»cisiÚCut
 ) {

129  
diff
;

130 
	}
}

	@src/SimulatedAnnealing.cxx

33 
	~"TMVA/SimuÏ‹dAÂ—lšg.h
"

35 
	~"TMVA/IF™‹rT¬g‘.h
"

36 
	~"TMVA/IÁ”v®.h
"

37 
	~"TMVA/G’‘icRªge.h
"

38 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/Tim”.h
"

40 
	~"TMVA/Ty³s.h
"

42 
	~"TRªdom3.h
"

43 
	~"TM©h.h
"

45 
CÏssImp
(
TMVA
::
SimuÏ‹dAÂ—lšg
);

50 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::SimuÏ‹dAÂ—lšgĞ
IF™‹rT¬g‘
& 
rg‘
, cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*>& 
¿nges
 )

51 : 
fK”ÃlTem³¿tu»
 (
kInü—sšgAd­tive
),

52 
fF™‹rT¬g‘
 ( 
rg‘
 ),

53 
fRªdom
 ( 
Ãw
 
TRªdom3
(100) ),

54 
fRªges
 ( 
¿nges
 ),

55 
fMaxC®ls
 ( 500000 ),

56 
fIn™ŸlTem³¿tu»
 ( 1000 ),

57 
fMšTem³¿tu»
 ( 0 ),

58 
fEps
 ( 1e-10 ),

59 
fTem³¿tu»SÿË
 ( 0.06 ),

60 
fAd­tiveS³ed
 ( 1.0 ),

61 
fTem³¿tu»Ad­tiveS‹p
( 0.0 ),

62 
fU£DeçuÉSÿË
 ( 
kFALSE
 ),

63 
fU£DeçuÉTem³¿tu»
 ( 
kFALSE
 ),

64 
fLogg”
Ğ
Ãw
 
MsgLogg”
("SimulatedAnnealing") ),

65 
	$fProg»ss
(0.0)

67 
fK”ÃlTem³¿tu»
 = 
kInü—sšgAd­tive
;

68 
	}
}

73 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
	$S‘O±iÚs
Ğ
IÁ_t
 
maxC®ls
,

74 
DoubË_t
 
š™ŸlTem³¿tu»
,

75 
DoubË_t
 
mšTem³¿tu»
,

76 
DoubË_t
 
•s
,

77 
TSŒšg
 
k”ÃlTem³¿tu»S
,

78 
DoubË_t
 
‹m³¿tu»SÿË
,

79 
DoubË_t
 
ad­tiveS³ed
,

80 
DoubË_t
 
‹m³¿tu»Ad­tiveS‹p
,

81 
BoŞ_t
 
u£DeçuÉSÿË
,

82 
BoŞ_t
 
u£DeçuÉTem³¿tu»
)

84 
fMaxC®ls
 = 
maxC®ls
;

85 
fIn™ŸlTem³¿tu»
 = 
š™ŸlTem³¿tu»
;

86 
fMšTem³¿tu»
 = 
mšTem³¿tu»
;

87 
fEps
 = 
•s
;

89 ià(
k”ÃlTem³¿tu»S
 == "IncreasingAdaptive") {

90 
fK”ÃlTem³¿tu»
 = 
kInü—sšgAd­tive
;

91 
	`Log
(è<< 
kINFO
 << "Usšg inü—sšg‡d­tiv®gÜ™hm" << 
Endl
;

93 ià(
k”ÃlTem³¿tu»S
 == "DecreasingAdaptive") {

94 
fK”ÃlTem³¿tu»
 = 
kDeü—sšgAd­tive
;

95 
	`Log
(è<< 
kINFO
 << "Usšg deü—sšg‡d­tiv®gÜ™hm" << 
Endl
;

97 ià(
k”ÃlTem³¿tu»S
 == "Sqrt") {

98 
fK”ÃlTem³¿tu»
 = 
kSq¹
;

99 
	`Log
(è<< 
kINFO
 << "Usšg \"Sq¹\"‡lgÜ™hm" << 
Endl
;

101 ià(
k”ÃlTem³¿tu»S
 == "Homo") {

102 
fK”ÃlTem³¿tu»
 = 
kHomo
;

103 
	`Log
(è<< 
kINFO
 << "Usšg \"Homo\"‡lgÜ™hm" << 
Endl
;

105 ià(
k”ÃlTem³¿tu»S
 == "Log") {

106 
fK”ÃlTem³¿tu»
 = 
kLog
;

107 
	`Log
(è<< 
kINFO
 << "Usšg \"Log\"‡lgÜ™hm" << 
Endl
;

109 ià(
k”ÃlTem³¿tu»S
 == "Sin") {

110 
fK”ÃlTem³¿tu»
 = 
kSš
;

111 
	`Log
(è<< 
kINFO
 << "Usšg \"Sš\"‡lgÜ™hm" << 
Endl
;

114 
fTem³¿tu»SÿË
 = 
‹m³¿tu»SÿË
;

115 
fAd­tiveS³ed
 = 
ad­tiveS³ed
;

116 
fTem³¿tu»Ad­tiveS‹p
 = 
‹m³¿tu»Ad­tiveS‹p
;

118 
fU£DeçuÉSÿË
 = 
u£DeçuÉSÿË
;

119 
fU£DeçuÉTem³¿tu»
 = 
u£DeçuÉTem³¿tu»
;

120 
	}
}

125 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::~
	$SimuÏ‹dAÂ—lšg
()

127 
	}
}

132 
TMVA
::
SimuÏ‹dAÂ—lšg
::
FlW™hRªdomV®ues
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
·¿m‘”s
 )

134 
UIÁ_t
 
rI‹r
 = 0; 
	grI‹r
 < 
	g·¿m‘”s
.
size
();„Iter++) {

135 
	g·¿m‘”s
[
rI‹r
] = 
fRªdom
->
UnifÜm
(0.0,1.0)*(
	gfRªges
[rI‹r]->
G‘Max
(è- fRªges[rI‹r]->
G‘Mš
()) + fRanges[rIter]->GetMin();

142 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
ReWr™eP¬am‘”s
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
äom
, std::veùÜ<DoubË_t>& 
to
)

144 
UIÁ_t
 
rI‹r
 = 0; 
	grI‹r
 < 
	gäom
.
size
();„I‹r++è
	gto
[rI‹r] = 
äom
[rIter];

150 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
G’”©eNeighbour
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
·¿m‘”s
, std::veùÜ<DoubË_t>& 
ŞdP¬am‘”s
,

151 
DoubË_t
 
cu¼’tTem³¿tu»
 )

153 
ReWr™eP¬am‘”s
Ğ
·¿m‘”s
, 
ŞdP¬am‘”s
 );

155 
UIÁ_t
 
	grI‹r
=0;rI‹r<
	g·¿m‘”s
.
size
();rIter++) {

156 
DoubË_t
 
	guni
,
	gdi¡ributiÚ
,
	gsign
;

158 
	guni
 = 
fRªdom
->
UnifÜm
(0.0,1.0);

159 
	gsign
 = (
uni
 - 0.5 >= 0.0) ? (1.0) : (-1.0);

160 
	gdi¡ributiÚ
 = 
cu¼’tTem³¿tu»
 * (
TM©h
::
Pow”
(1.0 + 1.0/cu¼’tTem³¿tu», TM©h::
Abs
(2.0*
uni
 - 1.0)è-1.0)*
sign
;

161 
	g·¿m‘”s
[
rI‹r
] = 
ŞdP¬am‘”s
[rI‹r] + (
fRªges
[rI‹r]->
G‘Max
()-fRªges[rI‹r]->
G‘Mš
())*0.1*
di¡ributiÚ
;

163 
	g·¿m‘”s
[
rI‹r
] < 
	gfRªges
[rI‹r]->
G‘Mš
(è||…¬am‘”s[rI‹r] > fRªges[rI‹r]->
G‘Max
() );

169 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
SimuÏ‹dAÂ—lšg
::
G’”©eNeighbour
Ğ
¡d
::veùÜ<DoubË_t>& 
·¿m‘”s
, DoubË_ˆ
cu¼’tTem³¿tu»
 )

171 
	g¡d
::
veùÜ
<
DoubË_t
> 
ÃwP¬am‘”s
Ğ
fRªges
.
size
() );

173 
UIÁ_t
 
	grI‹r
=0;„I‹r<
	g·¿m‘”s
.
size
();„Iter++) {

174 
DoubË_t
 
	guni
,
	gdi¡ributiÚ
,
	gsign
;

176 
	guni
 = 
fRªdom
->
UnifÜm
(0.0,1.0);

177 
	gsign
 = (
uni
 - 0.5 >= 0.0) ? (1.0) : (-1.0);

178 
	gdi¡ributiÚ
 = 
cu¼’tTem³¿tu»
 * (
TM©h
::
Pow”
(1.0 + 1.0/cu¼’tTem³¿tu», TM©h::
Abs
(2.0*
uni
 - 1.0)è-1.0)*
sign
;

179 
	gÃwP¬am‘”s
[
rI‹r
] = 
·¿m‘”s
[rI‹r] + (
fRªges
[rI‹r]->
G‘Max
()-fRªges[rI‹r]->
G‘Mš
())*0.1*
di¡ributiÚ
;

181 
	gÃwP¬am‘”s
[
rI‹r
] < 
	gfRªges
[rI‹r]->
G‘Mš
(è||‚ewP¬am‘”s[rI‹r] > fRªges[rI‹r]->
G‘Max
() );

184  
	gÃwP¬am‘”s
;

190 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
	$G’”©eNewTem³¿tu»
Ğ
DoubË_t
& 
cu¼’tTem³¿tu»
, 
IÁ_t
 
I‹r
 )

192 ià(
fK”ÃlTem³¿tu»
 =ğ
kSq¹
) {

193 
cu¼’tTem³¿tu»
 = 
fIn™ŸlTem³¿tu»
/(
DoubË_t
)
TM©h
::
	`Sq¹
(
I‹r
+2è* 
fTem³¿tu»SÿË
;

195 ià(
fK”ÃlTem³¿tu»
 =ğ
kLog
) {

196 
cu¼’tTem³¿tu»
 = 
fIn™ŸlTem³¿tu»
/(
DoubË_t
)
TM©h
::
	`Log
(
I‹r
+2è* 
fTem³¿tu»SÿË
;

198 ià(
fK”ÃlTem³¿tu»
 =ğ
kHomo
) {

199 
cu¼’tTem³¿tu»
 = 
fIn™ŸlTem³¿tu»
/(
DoubË_t
)(
I‹r
+2è* 
fTem³¿tu»SÿË
;

201 ià(
fK”ÃlTem³¿tu»
 =ğ
kSš
) {

202 
cu¼’tTem³¿tu»
 = (
TM©h
::
	`Sš
Ğ(
DoubË_t
)
I‹r
 / 
fTem³¿tu»SÿË
 ) + 1.0 )/ (DoubË_t)(I‹r+1.0è* 
fIn™ŸlTem³¿tu»
 + 
fEps
;

204 ià(
fK”ÃlTem³¿tu»
 =ğ
kGeo
) {

205 
cu¼’tTem³¿tu»
 = cu¼’tTem³¿tu»*
fTem³¿tu»SÿË
;

207 ià(
fK”ÃlTem³¿tu»
 =ğ
kInü—sšgAd­tive
) {

208 
cu¼’tTem³¿tu»
 = 
fMšTem³¿tu»
 + 
fTem³¿tu»SÿË
*
TM©h
::
	`Log
(1.0+
fProg»ss
*
fAd­tiveS³ed
);

210 ià(
fK”ÃlTem³¿tu»
 =ğ
kDeü—sšgAd­tive
) {

211 
cu¼’tTem³¿tu»
 = cu¼’tTem³¿tu»*
fTem³¿tu»SÿË
;

213 
	`Log
(è<< 
kFATAL
 << "NØsuch k”Ãl!" << 
Endl
;

214 
	}
}

219 
BoŞ_t
 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
	$ShouldGoIn
Ğ
DoubË_t
 
cu¼’tF™
, DoubË_ˆ
loÿlF™
, DoubË_ˆ
cu¼’tTem³¿tu»
 )

221 ià(
cu¼’tTem³¿tu»
 < 
fEps
è 
kFALSE
;

222 
DoubË_t
 
lim
 = 
TM©h
::
	`Exp
Ğ-TM©h::
	`Abs
Ğ
cu¼’tF™
 - 
loÿlF™
 ) / 
cu¼’tTem³¿tu»
 );

223 
DoubË_t
 
´ob
 = 
fRªdom
->
	`UnifÜm
(0.0, 1.0);

224  (
´ob
 < 
lim
è? 
kTRUE
 : 
kFALSE
;

225 
	}
}

230 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
	$S‘DeçuÉSÿË
()

232 ià(
fK”ÃlTem³¿tu»
 =ğ
kSq¹
è
fTem³¿tu»SÿË
 = 1.0;

233 ià(
fK”ÃlTem³¿tu»
 =ğ
kLog
è
fTem³¿tu»SÿË
 = 1.0;

234 ià(
fK”ÃlTem³¿tu»
 =ğ
kHomo
è
fTem³¿tu»SÿË
 = 1.0;

235 ià(
fK”ÃlTem³¿tu»
 =ğ
kSš
è
fTem³¿tu»SÿË
 = 20.0;

236 ià(
fK”ÃlTem³¿tu»
 =ğ
kGeo
è
fTem³¿tu»SÿË
 = 0.99997;

237 ià(
fK”ÃlTem³¿tu»
 =ğ
kDeü—sšgAd­tive
) {

238 
fTem³¿tu»SÿË
 = 1.0;

239 
TM©h
::
	`Abs
(TM©h::
	`Pow”
(
fTem³¿tu»SÿË
,
fMaxC®ls
è* 
fIn™ŸlTem³¿tu»
 - 
fMšTem³¿tu»
) >

240 
TM©h
::
	`Abs
(TM©h::
	`Pow”
(
fTem³¿tu»SÿË
-0.000001,
fMaxC®ls
è* 
fIn™ŸlTem³¿tu»
 - 
fMšTem³¿tu»
)) {

241 
fTem³¿tu»SÿË
 -= 0.000001;

244 ià(
fK”ÃlTem³¿tu»
 =ğ
kInü—sšgAd­tive
è
fTem³¿tu»SÿË
 = 0.15*Ğ1.0 / (
DoubË_t
)(
fRªges
.
	`size
() ) );

245 
	`Log
(è<< 
kFATAL
 << "NØsuch k”Ãl!" << 
Endl
;

246 
	}
}

251 
DoubË_t
 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
G’”©eMaxTem³¿tu»
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·¿m‘”s
 )

253 
IÁ_t
 
equibrium
;

254 
BoŞ_t
 
	g¡İ³r
 = 0;

255 
DoubË_t
 
	gt
, 
	gdT
, 
	gcŞd
, 
	gd–
, 
	gd–Y
, 
	gy
, 
	gyNew
, 
	gyBe¡
, 
	gyOld
;

256 
	g¡d
::
veùÜ
<
DoubË_t
> 
x
Ğ
fRªges
.
size
(è), 
xNew
ĞfRªges.size(è), 
xBe¡
ĞfRªges.size(è), 
xOld
( fRanges.size() );

257 
	gt
 = 
fMšTem³¿tu»
;

258 
	gd–Y
 = 
cŞd
 = 0.0;

259 
	gdT
 = 
fTem³¿tu»Ad­tiveS‹p
;

260 
UIÁ_t
 
	grI‹r
 = 0;„I‹¸< 
	gx
.
size
();„Iter++)

261 
	gx
[
rI‹r
] = ( 
fRªges
[rI‹r]->
G‘Max
(è+ fRªges[rI‹r]->
G‘Mš
() ) / 2.0;

262 
	gy
 = 
yBe¡
 = 1E10;

263 
IÁ_t
 
	gi
=0; i<
	gfMaxC®ls
/50; i++) {

264 ià((
	gi
>0è&& (
	gd–Y
>0.0)) {

265 
	gcŞd
 = 
d–Y
;

266 
	g¡İ³r
 = 1;

268 
	gt
 +ğ
dT
*
i
;

269 
	gx
 = 
xOld
 = 
G’”©eNeighbour
(
x
,
t
);

270 
	gy
 = 
yOld
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
xOld
 );

271 
	gequibrium
 = 0;

272  
IÁ_t
 
	gk
=0; (k<30è&& (
	gequibrium
<=12); k++ ) {

273 
	gxNew
 = 
G’”©eNeighbour
(
x
,
t
);

275 
	gyNew
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
xNew
 );

276 
	gd–Y
 = 
yNew
 - 
y
;

277 ià(
	gd–Y
 < 0.0) {

278 
	g¡d
::
sw­
(
x
,
xNew
);

279 
	g¡d
::
sw­
(
y
,
yNew
);

280 ià(
	gy
 < 
	gyBe¡
) {

281 
	gxBe¡
 = 
x
;

282 
	gyBe¡
 = 
y
;

284 
	gd–
 = 
TM©h
::
Abs
Ğ
d–Y
 );

285 ià(
	gy
 !ğ0.0è
d–
 /ğ
y
;

286 ià(
	gyNew
 !ğ0.0è
d–
 /ğ
y
;

289 ià(
	gd–
 < 0.1è
	gequibrium
++;

290 
	gequibrium
 = 0;

292 
	gequibrium
++;

296 
	gyNew
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
xNew
 );

297 
	gd–Y
 = 
yNew
 - 
yOld
;

298 iàĞ(
	gd–Y
 < 0.0 )&&Ğ
	gyNew
 < 
	gyBe¡
)) {

299 
	gxBe¡
=
x
;

300 
	gyBe¡
 = 
yNew
;

302 
	gy
 = 
yNew
;

303 ià((
	g¡İ³r
è&& (
	gd–Y
 >ğ(100.0 * 
cŞd
))) ;

305 
	g·¿m‘”s
 = 
xBe¡
;

306  
	gt
;

312 
DoubË_t
 
	gTMVA
::
SimuÏ‹dAÂ—lšg
::
Mšimize
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·¿m‘”s
 )

314 
¡d
::
veùÜ
<
DoubË_t
> 
be¡P¬am‘”s
(
fRªges
.
size
());

315 
	g¡d
::
veùÜ
<
DoubË_t
> 
ŞdP¬am‘”s
 (
fRªges
.
size
());

317 
DoubË_t
 
	gcu¼’tTem³¿tu»
, 
	gbe¡F™
, 
	gcu¼’tF™
;

318 
IÁ_t
 
	gİtimizeC®ls
, 
	gg’”®C®ls
, 
	gequ®s
;

320 
	gequ®s
 = 0;

322 ià(
	gfU£DeçuÉTem³¿tu»
) {

323 ià(
	gfK”ÃlTem³¿tu»
 =ğ
kInü—sšgAd­tive
) {

324 
fMšTem³¿tu»
 = 
cu¼’tTem³¿tu»
 = 1e-06;

325 
FlW™hRªdomV®ues
Ğ
·¿m‘”s
 );

327 
	gfIn™ŸlTem³¿tu»
 = 
cu¼’tTem³¿tu»
 = 
G’”©eMaxTem³¿tu»
Ğ
·¿m‘”s
 );

330 ià(
	gfK”ÃlTem³¿tu»
 =ğ
kInü—sšgAd­tive
)

331 
cu¼’tTem³¿tu»
 = 
fMšTem³¿tu»
;

333 
	gcu¼’tTem³¿tu»
 = 
fIn™ŸlTem³¿tu»
;

334 
FlW™hRªdomV®ues
Ğ
·¿m‘”s
 );

337 ià(
	gfU£DeçuÉSÿË
è
S‘DeçuÉSÿË
();

339 
Log
(è<< 
	gkINFO


340 << "Tem³¿tu¸sÿË = " << 
	gfTem³¿tu»SÿË


341 << ", cu¼’ˆ‹m³¿tu» = " << 
	gcu¼’tTem³¿tu»
 << 
	gEndl
;

343 
	gbe¡P¬am‘”s
 = 
·¿m‘”s
;

344 
	gbe¡F™
 = 
cu¼’tF™
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
be¡P¬am‘”s
 );

346 
	gİtimizeC®ls
 = 
fMaxC®ls
/100;

347 
	gg’”®C®ls
 = 
fMaxC®ls
 - 
İtimizeC®ls
;

348 
	gfProg»ss
 = 0.0;

350 
Tim”
 
tim”
Ğ
fMaxC®ls
, 
fLogg”
->
G‘Sourû
().
c_¡r
() );

352 
IÁ_t
 
	g§m¶e
 = 0; sam¶< 
	gg’”®C®ls
; sample++) {

353 ià(
	gfIPyCu¼’tI‹r
è*fIPyCu¼’tI‹¸ğ
§m¶e
;

354 ià(
	gfEx™FromT¿ššg
 && *fExitFromTraining) ;

355 
G’”©eNeighbour
Ğ
·¿m‘”s
, 
ŞdP¬am‘”s
, 
cu¼’tTem³¿tu»
 );

356 
DoubË_t
 
	gloÿlF™
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
·¿m‘”s
 );

358 ià(
	gloÿlF™
 < 
	gcu¼’tF™
 || 
	gTM©h
::
Abs
(
cu¼’tF™
-
loÿlF™
è< 
fEps
) {

359 ià(
TM©h
::
Abs
(
cu¼’tF™
-
loÿlF™
è< 
fEps
) {

360 
equ®s
++;

361 ià(
	gequ®s
 >= 3)

362 
fProg»ss
+=1.0;

365 
	gfProg»ss
 = 0.0;

366 
	gequ®s
 = 0;

369 
	gcu¼’tF™
 = 
loÿlF™
;

371 ià(
	gcu¼’tF™
 < 
	gbe¡F™
) {

372 
ReWr™eP¬am‘”s
Ğ
·¿m‘”s
, 
be¡P¬am‘”s
 );

373 
	gbe¡F™
 = 
cu¼’tF™
;

377 ià(!
ShouldGoIn
(
loÿlF™
, 
cu¼’tF™
, 
cu¼’tTem³¿tu»
))

378 
ReWr™eP¬am‘”s
Ğ
ŞdP¬am‘”s
, 
·¿m‘”s
 );

380 
	gcu¼’tF™
 = 
loÿlF™
;

382 
	gfProg»ss
+=1.0;

383 
	gequ®s
 = 0;

386 
G’”©eNewTem³¿tu»
Ğ
cu¼’tTem³¿tu»
, 
§m¶e
 );

388 ià((
	gfMaxC®ls
<100è|| 
	g§m¶e
%
IÁ_t
(
fMaxC®ls
/100.0è=ğ0è
tim”
.
D¿wProg»ssB¬
Ğ
§m¶e
 );

392 
Log
(è<< 
	gkINFO
 << "EÏp£dime: " << 
	gtim”
.
G‘EÏp£dTime
()

393 << " " << 
	gEndl
;

397 
DoubË_t
 
	g¡¬tšgTem³¿tu»
 = 
fMšTem³¿tu»
*(
fRªges
.
size
())*2.0;

398 
	gcu¼’tTem³¿tu»
 = 
¡¬tšgTem³¿tu»
;

400 
IÁ_t
 
	gchªges
 = 0;

401 
IÁ_t
 
	g§m¶e
=0;§m¶e<
	gİtimizeC®ls
;sample++) {

402 
G’”©eNeighbour
Ğ
·¿m‘”s
, 
ŞdP¬am‘”s
, 
cu¼’tTem³¿tu»
 );

403 
DoubË_t
 
	gloÿlF™
 = 
fF™‹rT¬g‘
.
E¡im©ÜFunùiÚ
Ğ
·¿m‘”s
 );

405 ià(
	gloÿlF™
 < 
	gcu¼’tF™
) {

406 
	gcu¼’tF™
 = 
loÿlF™
;

407 
	gchªges
++;

409 ià(
	gcu¼’tF™
 < 
	gbe¡F™
) {

410 
ReWr™eP¬am‘”s
Ğ
·¿m‘”s
, 
be¡P¬am‘”s
 );

411 
	gbe¡F™
 = 
cu¼’tF™
;

414 
ReWr™eP¬am‘”s
Ğ
ŞdP¬am‘”s
, 
·¿m‘”s
 );

416 
	gcu¼’tTem³¿tu»
-=(
¡¬tšgTem³¿tu»
 - 
fEps
)/
İtimizeC®ls
;

419 
ReWr™eP¬am‘”s
Ğ
be¡P¬am‘”s
, 
·¿m‘”s
 );

421  
	gbe¡F™
;

	@src/SimulatedAnnealingFitter.cxx

34 
	~"TMVA/SimuÏ‹dAÂ—lšgF™‹r.h
"

36 
	~"TMVA/CÚfigu¿bË.h
"

37 
	~"TMVA/F™‹rBa£.h
"

38 
	~"TMVA/IÁ”v®.h
"

39 
	~"TMVA/MsgLogg”.h
"

40 
	~"TMVA/SimuÏ‹dAÂ—lšg.h
"

41 
	~"TMVA/Ty³s.h
"

43 
	~"Rty³s.h
"

44 
	~"TSŒšg.h
"

46 
CÏssImp
(
TMVA
::
SimuÏ‹dAÂ—lšgF™‹r
);

51 
	gTMVA
::
SimuÏ‹dAÂ—lšgF™‹r
::SimuÏ‹dAÂ—lšgF™‹rĞ
IF™‹rT¬g‘
& 
rg‘
,

52 cÚ¡ 
TSŒšg
& 
Çme
,

53 cÚ¡ 
¡d
::
veùÜ
<
IÁ”v®
*>& 
¿nges
,

54 cÚ¡ 
TSŒšg
& 
theO±iÚ
 )

55 : 
TMVA
::
	$F™‹rBa£
Ğ
rg‘
, 
Çme
, 
¿nges
, 
theO±iÚ
 )

58 
	`Deş¬eO±iÚs
();

59 
	`P¬£O±iÚs
();

60 
	}
}

74 
	gTMVA
::
SimuÏ‹dAÂ—lšgF™‹r
::
	$Deş¬eO±iÚs
()

78 
fMaxC®ls
 = 100000;

79 
fIn™ŸlTem³¿tu»
 = 1e+6;

80 
fMšTem³¿tu»
 = 1e-6;

81 
fEps
 = 1e-10;

82 
fTem³¿tu»SÿË
 = 1.0;

83 
fAd­tiveS³ed
 = 1.0;

84 
fTem³¿tu»Ad­tiveS‹p
 = 0.009875;

85 
fK”ÃlTem³¿tu»S
 = "IncAdaptive";

86 
fU£DeçuÉSÿË
 = 
kFALSE
;

87 
fU£DeçuÉTem³¿tu»
 = 
kFALSE
;

89 
	`Deş¬eO±iÚRef
(
fMaxC®ls
, "MaxCalls", "Maximum‚umber of minimisation calls");

90 
	`Deş¬eO±iÚRef
(
fIn™ŸlTem³¿tu»
, "InitialTemp", "Initialemperature");

91 
	`Deş¬eO±iÚRef
(
fMšTem³¿tu»
, "MinTemp", "Minimumemperature");

92 
	`Deş¬eO±iÚRef
(
fEps
, "Eps", "Epsilon");

93 
	`Deş¬eO±iÚRef
(
fTem³¿tu»SÿË
, "TempScale", "Temperature scale");

94 
	`Deş¬eO±iÚRef
(
fAd­tiveS³ed
, "AdaptiveSpeed", "Adaptive speed");

95 
	`Deş¬eO±iÚRef
(
fTem³¿tu»Ad­tiveS‹p
,"TempAdaptiveStep", "Step made inƒach generationemperature‡daptive");

96 
	`Deş¬eO±iÚRef
(
fU£DeçuÉSÿË
, "UseDefaultScale", "Use defaultemperature scale foremperature minimisation‡lgorithm");

97 
	`Deş¬eO±iÚRef
(
fU£DeçuÉTem³¿tu»
, "UseDefaultTemp", "Use default initialemperature");

99 
	`Deş¬eO±iÚRef
(
fK”ÃlTem³¿tu»S
, "KernelTemp", "Temperature minimisation‡lgorithm");

100 
	`AddP»DefV®
(
	`TSŒšg
("IncAdaptive"));

101 
	`AddP»DefV®
(
	`TSŒšg
("DecAdaptive"));

102 
	`AddP»DefV®
(
	`TSŒšg
("Sqrt"));

103 
	`AddP»DefV®
(
	`TSŒšg
("Log"));

104 
	`AddP»DefV®
(
	`TSŒšg
("Sin"));

105 
	`AddP»DefV®
(
	`TSŒšg
("Homo"));

106 
	`AddP»DefV®
(
	`TSŒšg
("Geo"));

107 
	}
}

112 
	gTMVA
::
SimuÏ‹dAÂ—lšgF™‹r
::
	$S‘P¬am‘”s
Ğ
IÁ_t
 
maxC®ls
,

113 
DoubË_t
 
š™ŸlTem³¿tu»
,

114 
DoubË_t
 
mšTem³¿tu»
,

115 
DoubË_t
 
•s
,

116 
TSŒšg
 
k”ÃlTem³¿tu»S
,

117 
DoubË_t
 
‹m³¿tu»SÿË
,

118 
DoubË_t
 
‹m³¿tu»Ad­tiveS‹p
,

119 
BoŞ_t
 
u£DeçuÉSÿË
,

120 
BoŞ_t
 
u£DeçuÉTem³¿tu»
)

122 
fMaxC®ls
 = 
maxC®ls
;

123 
fIn™ŸlTem³¿tu»
 = 
š™ŸlTem³¿tu»
;

124 
fMšTem³¿tu»
 = 
mšTem³¿tu»
;

125 
fEps
 = 
•s
;

126 
fK”ÃlTem³¿tu»S
 = 
k”ÃlTem³¿tu»S
;

127 
fTem³¿tu»SÿË
 = 
‹m³¿tu»SÿË
;

128 
fTem³¿tu»Ad­tiveS‹p
 = 
‹m³¿tu»Ad­tiveS‹p
;

129 
fU£DeçuÉSÿË
 = 
u£DeçuÉSÿË
;

130 
fU£DeçuÉTem³¿tu»
 = 
u£DeçuÉTem³¿tu»
;

131 
	}
}

136 
DoubË_t
 
	gTMVA
::
SimuÏ‹dAÂ—lšgF™‹r
::
Run
Ğ
¡d
::
veùÜ
<DoubË_t>& 
·rs
 )

138 
Log
(è<< 
kHEADER
 << "<SimuÏ‹dAÂ—lšgF™‹r> O±imi§tiÚ,…Ëa£ b·t›Á ... " << 
Endl
;

139 
Log
(è<< 
	gkINFO
 << "Õrog»s timšg may bšaccu¿‹ fÜ SA)" << 
	gEndl
;

141 
SimuÏ‹dAÂ—lšg
 
§
Ğ
G‘F™‹rT¬g‘
(), 
fRªges
 );

144 
	g§
.
S‘O±iÚs
Ğ
fMaxC®ls
, 
fIn™ŸlTem³¿tu»
, 
fMšTem³¿tu»
, 
fEps
, 
fK”ÃlTem³¿tu»S
,

145 
fTem³¿tu»SÿË
, 
fAd­tiveS³ed
, 
fTem³¿tu»Ad­tiveS‹p
,

146 
fU£DeçuÉSÿË
, 
fU£DeçuÉTem³¿tu»
 );

148 ià(
	gfIPyMaxI‹r
){

149 *
	gfIPyMaxI‹r
 = 
fMaxC®ls
;

150 
	g§
.
S‘IPythÚIÁ”aùive
(
fEx™FromT¿ššg
, 
fIPyCu¼’tI‹r
);

153 
DoubË_t
 
	gfú
 = 
§
.
Mšimize
Ğ
·rs
 );

155  
	gfú
;

	@src/TActivation.cxx

28 
	~"TMVA/TAùiv©iÚ.h
"

30 
	~"Rty³s.h
"

32 
CÏssImp
(
TMVA
::
TAùiv©iÚ
);

	@src/TActivationChooser.cxx

29 
	~"TMVA/TAùiv©iÚChoo£r.h
"

31 
	~<veùÜ
>

32 
	~"TSŒšg.h
"

34 
	~"TMVA/TAùiv©iÚ.h
"

35 
	~"TMVA/TAùiv©iÚId’t™y.h
"

36 
	~"TMVA/TAùiv©iÚSigmoid.h
"

37 
	~"TMVA/TAùiv©iÚTªh.h
"

38 
	~"TMVA/TAùiv©iÚReLU.h
"

39 
	~"TMVA/TAùiv©iÚRadŸl.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/Ty³s.h
"

47 
	gTMVA
::
TAùiv©iÚChoo£r
::
	$TAùiv©iÚChoo£r
() :

48 
	`fLINEAR
("linear"),

49 
	`fSIGMOID
("sigmoid"),

50 
	`fTANH
("tanh"),

51 
	`fRELU
("ReLU"),

52 
	`fRADIAL
("radial"),

53 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("TActivationChooser") )

55 
	}
}

60 
	gTMVA
::
TAùiv©iÚChoo£r
::~
	$TAùiv©iÚChoo£r
()

62 
d–‘e
 
fLogg”
;

63 
	}
}

69 
	gTMVA
::
TAùiv©iÚ
*

70 
TMVA
::
TAùiv©iÚChoo£r
::
	$C»©eAùiv©iÚ
(
EAùiv©iÚTy³
 
ty³
) const

72 
ty³
) {

73 
kLš—r
:  
Ãw
 
	`TAùiv©iÚId’t™y
();

74 
kSigmoid
:  
Ãw
 
	`TAùiv©iÚSigmoid
();

75 
kTªh
:  
Ãw
 
	`TAùiv©iÚTªh
();

76 
kReLU
:  
Ãw
 
	`TAùiv©iÚReLU
();

77 
kRadŸl
:  
Ãw
 
	`TAùiv©iÚRadŸl
();

79 
	`Log
(è<< 
kFATAL
 << "nØAùiv©iÚ funùiÚ oàty³ " << 
ty³
 << " found" << 
Endl
;

82  
NULL
;

83 
	}
}

89 
	gTMVA
::
TAùiv©iÚ
*

90 
TMVA
::
TAùiv©iÚChoo£r
::
	$C»©eAùiv©iÚ
(cÚ¡ 
TSŒšg
& 
ty³
) const

92 ià(
ty³
 =ğ
fLINEAR
è 
	`C»©eAùiv©iÚ
(
kLš—r
);

93 ià(
ty³
 =ğ
fSIGMOID
è 
	`C»©eAùiv©iÚ
(
kSigmoid
);

94 ià(
ty³
 =ğ
fTANH
è 
	`C»©eAùiv©iÚ
(
kTªh
);

95 ià(
ty³
 =ğ
fRELU
è 
	`C»©eAùiv©iÚ
(
kReLU
);

96 ià(
ty³
 =ğ
fRADIAL
è 
	`C»©eAùiv©iÚ
(
kRadŸl
);

98 
	`Log
(è<< 
kFATAL
 << "nØAùiv©iÚ funùiÚ oàty³ " << 
ty³
 << " found" << 
Endl
;

101 
	}
}

106 
	g¡d
::
veùÜ
<
TSŒšg
>*

107 
TMVA
::
TAùiv©iÚChoo£r
::
	$G‘AÎAùiv©iÚNames
() const

109 
¡d
::
veùÜ
<
TSŒšg
>* 
Çmes
 = 
Ãw
 std::vector<TString>();

110 
Çmes
->
	`push_back
(
fLINEAR
);

111 
Çmes
->
	`push_back
(
fSIGMOID
);

112 
Çmes
->
	`push_back
(
fTANH
);

113 
Çmes
->
	`push_back
(
fRELU
);

114 
Çmes
->
	`push_back
(
fRADIAL
);

115  
Çmes
;

116 
	}
}

	@src/TActivationIdentity.cxx

29 
	~"TMVA/TAùiv©iÚId’t™y.h
"

31 
	~"Rty³s.h
"

32 
	~"TSŒšg.h
"

34 
	~<io¡»am
>

36 
şass
 
	gTSŒšg
;

38 
CÏssImp
(
TMVA
::
TAùiv©iÚId’t™y
);

43 
	gTMVA
::
TAùiv©iÚId’t™y
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
 )

45 
fout
 << "doubË " << 
âcName
 << "(doubË xècÚ¡ {" << 
¡d
::
’dl
;

46 
fout
 << " // id’t™y" << 
¡d
::
’dl
;

47 
fout
 << "„‘uº x;" << 
¡d
::
’dl
;

48 
fout
 << "}" << 
¡d
::
’dl
;

49 
	}
}

	@src/TActivationRadial.cxx

31 
	~"TMVA/TAùiv©iÚRadŸl.h
"

33 
	~"TMVA/TAùiv©iÚ.h
"

35 
	~"TFÜmuÏ.h
"

36 
	~"TM©h.h
"

37 
	~"TSŒšg.h
"

39 
	~<io¡»am
>

41 cÚ¡ 
IÁ_t
 
	gUNINITIALIZED
 = -1;

43 
CÏssImp
(
TMVA
::
TAùiv©iÚRadŸl
);

48 
	gTMVA
::
TAùiv©iÚRadŸl
::
	$TAùiv©iÚRadŸl
()

50 
fEqn
 = 
Ãw
 
	`TFÜmuÏ
("Gaussian", "TMath::Exp(-x^2/2.0)");

51 
fEqnD”iv©ive
 = 
Ãw
 
	`TFÜmuÏ
("derivative", "-x*TMath::Exp(-x^2/2.0)");

52 
	}
}

57 
	gTMVA
::
TAùiv©iÚRadŸl
::~
	$TAùiv©iÚRadŸl
()

59 ià(
fEqn
 !ğ
NULL
è
d–‘e
 fEqn;

60 ià(
fEqnD”iv©ive
 !ğ
NULL
è
d–‘e
 fEqnDerivative;

61 
	}
}

66 
DoubË_t
 
	gTMVA
::
TAùiv©iÚRadŸl
::
	$Ev®
(
DoubË_t
 
¬g
)

68 ià(
fEqn
 =ğ
NULL
è 
UNINITIALIZED
;

69  
fEqn
->
	`Ev®
(
¬g
);

70 
	}
}

75 
DoubË_t
 
	gTMVA
::
TAùiv©iÚRadŸl
::
	$Ev®D”iv©ive
(
DoubË_t
 
¬g
)

77 ià(
fEqnD”iv©ive
 =ğ
NULL
è 
UNINITIALIZED
;

78  
fEqnD”iv©ive
->
	`Ev®
(
¬g
);

79 
	}
}

84 
TSŒšg
 
	gTMVA
::
TAùiv©iÚRadŸl
::
	$G‘Ex´essiÚ
()

86 
TSŒšg
 
ex´
 = "";

88 ià(
fEqn
 =ğ
NULL
è
ex´
 += "<null>";

89 
ex´
 +ğ
fEqn
->
	`G‘ExpFÜmuÏ
();

91 
ex´
 += "\t\t";

93 ià(
fEqnD”iv©ive
 =ğ
NULL
è
ex´
 += "<null>";

94 
ex´
 +ğ
fEqnD”iv©ive
->
	`G‘ExpFÜmuÏ
();

96  
ex´
;

97 
	}
}

102 
	gTMVA
::
TAùiv©iÚRadŸl
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
 )

104 
fout
 << "doubË " << 
âcName
 << "(doubË xècÚ¡ {" << 
¡d
::
’dl
;

105 
fout
 << " //„adŸl" << 
¡d
::
’dl
;

106 
fout
 << "„‘uºƒxp(-x*x/2.0);" << 
¡d
::
’dl
;

107 
fout
 << "}" << 
¡d
::
’dl
;

108 
	}
}

	@src/TActivationReLU.cxx

29 
	~"TMVA/TAùiv©iÚReLU.h
"

31 
	~"TMVA/TAùiv©iÚ.h
"

33 
	~"TFÜmuÏ.h
"

34 
	~"TM©h.h
"

35 
	~"TSŒšg.h
"

37 
	~<io¡»am
>

39 
CÏssImp
(
TMVA
::
TAùiv©iÚReLU
);

44 
	gTMVA
::
TAùiv©iÚReLU
::
	$TAùiv©iÚReLU
()

48 
	}
}

53 
TMVA
::
TAùiv©iÚReLU
::~
	$TAùiv©iÚReLU
()

55 
	}
}

60 
TSŒšg
 
TMVA
::
TAùiv©iÚReLU
::
	$G‘Ex´essiÚ
()

62 
TSŒšg
 
ex´
 = "max(0,x)";

64  
ex´
;

65 
	}
}

70 
	gTMVA
::
TAùiv©iÚReLU
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
 )

72 
fout
 << "doubË " << 
âcName
 << "(doubË xècÚ¡ {" << 
¡d
::
’dl
;

73 
fout
 << " //„eùif›d†š—¸un™" << 
¡d
::
’dl
;

74 
fout
 << "„‘uº x>0 ? x : 0; " << 
¡d
::
’dl
;

75 
fout
 << "}" << 
¡d
::
’dl
;

76 
	}
}

	@src/TActivationSigmoid.cxx

31 
	~"TMVA/TAùiv©iÚSigmoid.h
"

33 
	~"TMVA/TAùiv©iÚ.h
"

35 
	~"TFÜmuÏ.h
"

36 
	~"TM©h.h
"

37 
	~"TSŒšg.h
"

39 
	~<io¡»am
>

41 cÚ¡ 
IÁ_t
 
	gUNINITIALIZED
 = -1;

43 
CÏssImp
(
TMVA
::
TAùiv©iÚSigmoid
);

48 
	gTMVA
::
TAùiv©iÚSigmoid
::
	$TAùiv©iÚSigmoid
()

50 
fEqn
 = 
Ãw
 
	`TFÜmuÏ
("sigmoid", "1.0/(1.0+TMath::Exp(-x))");

51 
fEqnD”iv©ive
 =

52 
Ãw
 
	`TFÜmuÏ
("derivative", "TMath::Exp(-x)/(1.0+TMath::Exp(-x))^2");

53 
	}
}

58 
	gTMVA
::
TAùiv©iÚSigmoid
::~
	$TAùiv©iÚSigmoid
()

60 ià(
fEqn
 !ğ
NULL
è
d–‘e
 fEqn;

61 ià(
fEqnD”iv©ive
 !ğ
NULL
è
d–‘e
 fEqnDerivative;

62 
	}
}

67 
DoubË_t
 
	gTMVA
::
TAùiv©iÚSigmoid
::
	$Ev®
(
DoubË_t
 
¬g
)

69 ià(
fEqn
 =ğ
NULL
è 
UNINITIALIZED
;

70  
fEqn
->
	`Ev®
(
¬g
);

73 
	}
}

78 
DoubË_t
 
	gTMVA
::
TAùiv©iÚSigmoid
::
	$Ev®D”iv©ive
(
DoubË_t
 
¬g
)

80 ià(
fEqnD”iv©ive
 =ğ
NULL
è 
UNINITIALIZED
;

81  
fEqnD”iv©ive
->
	`Ev®
(
¬g
);

84 
	}
}

89 
TSŒšg
 
	gTMVA
::
TAùiv©iÚSigmoid
::
	$G‘Ex´essiÚ
()

91 
TSŒšg
 
ex´
 = "";

93 ià(
fEqn
 =ğ
NULL
è
ex´
 += "<null>";

94 
ex´
 +ğ
fEqn
->
	`G‘ExpFÜmuÏ
();

96 
ex´
 += "\t\t";

98 ià(
fEqnD”iv©ive
 =ğ
NULL
è
ex´
 += "<null>";

99 
ex´
 +ğ
fEqnD”iv©ive
->
	`G‘ExpFÜmuÏ
();

101  
ex´
;

102 
	}
}

107 
	gTMVA
::
TAùiv©iÚSigmoid
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
 )

109 
fout
 << "doubË " << 
âcName
 << "(doubË xècÚ¡ {" << 
¡d
::
’dl
;

110 
fout
 << " // sigmoid" << 
¡d
::
’dl
;

111 
fout
 << "„‘uº 1.0/(1.0+exp(-x));" << 
¡d
::
’dl
;

112 
fout
 << "}" << 
¡d
::
’dl
;

113 
	}
}

	@src/TActivationTanh.cxx

31 
	~"TMVA/TAùiv©iÚTªh.h
"

33 
	~"TMVA/TAùiv©iÚ.h
"

35 
	~"TFÜmuÏ.h
"

36 
	~"TM©h.h
"

37 
	~"TSŒšg.h
"

39 
	~<io¡»am
>

41 
CÏssImp
(
TMVA
::
TAùiv©iÚTªh
);

46 
	gTMVA
::
TAùiv©iÚTªh
::
	$TAùiv©iÚTªh
()

48 
fFAST
=
kTRUE
;

49 
	}
}

54 
	gTMVA
::
TAùiv©iÚTªh
::~
	$TAùiv©iÚTªh
()

56 
	}
}

61 
DoubË_t
 
TMVA
::
TAùiv©iÚTªh
::
	$ç¡_nh
(
DoubË_t
 
¬g
){

62 ià(
¬g
 > 4.97)  1;

63 ià(
¬g
 < -4.97)  -1;

64 
¬g2
 = 
¬g
 *‡rg;

65 
a
 = 
¬g
 * (135135.0à+ 
¬g2
 * (17325.0f +‡rg2 * (378.0f +‡rg2)));

66 
b
 = 135135.0à+ 
¬g2
 * (62370.0f +‡rg2 * (3150.0f +‡rg2 * 28.0f));

67  
a
/
b
;

68 
	}
}

73 
DoubË_t
 
	gTMVA
::
TAùiv©iÚTªh
::
	$Ev®
(
DoubË_t
 
¬g
)

75  
fFAST
 ? 
	`ç¡_nh
(
¬g
è: 
TM©h
::
	`TªH
(arg);

76 
	}
}

81 
DoubË_t
 
	gTMVA
::
TAùiv©iÚTªh
::
	$Ev®D”iv©ive
(
DoubË_t
 
¬g
)

83 
DoubË_t
 
tmp
=
	`Ev®
(
¬g
);

84  ( 1-
tmp
*tmp);

85 
	}
}

91 
TSŒšg
 
	gTMVA
::
TAùiv©iÚTªh
::
	$G‘Ex´essiÚ
()

93 
TSŒšg
 
ex´
 = "tanh(x)\t\t (1-tanh()^2)";

94  
ex´
;

95 
	}
}

100 
	gTMVA
::
TAùiv©iÚTªh
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
 )

102 
fout
 << "doubË " << 
âcName
 << "(doubË xècÚ¡ {" << 
¡d
::
’dl
;

103 
fout
 << " // hy³rbŞiøn" << 
¡d
::
’dl
;

104 
fout
 << "„‘uºªh(x);" << 
¡d
::
’dl
;

105 
fout
 << "}" << 
¡d
::
’dl
;

106 
	}
}

	@src/TNeuron.cxx

29 
	~"TMVA/TNeurÚ.h
"

31 
	~"TMVA/MsgLogg”.h
"

32 
	~"TMVA/TAùiv©iÚ.h
"

33 
	~"TMVA/ToŞs.h
"

34 
	~"TMVA/TNeurÚIÅut.h
"

35 
	~"TMVA/Ty³s.h
"

37 
	~"TH1D.h
"

38 
	~"Th»adLoÿlStÜage.h
"

39 
	~"TObjA¼ay.h
"

41 cÚ¡ 
IÁ_t
 
	gUNINITIALIZED
 = -1;

43 
usšg
 
	g¡d
::
veùÜ
;

45 
CÏssImp
(
TMVA
::
TNeurÚ
);

50 
	gTMVA
::
TNeurÚ
::
	$TNeurÚ
()

52 
	`In™NeurÚ
();

53 
	}
}

58 
	gTMVA
::
TNeurÚ
::~
	$TNeurÚ
()

60 ià(
fLšksIn
 !ğ
NULL
è
d–‘e
 fLinksIn;

61 ià(
fLšksOut
 !ğ
NULL
è
d–‘e
 fLinksOut;

62 
	}
}

67 
	gTMVA
::
TNeurÚ
::
	$In™NeurÚ
()

69 
fLšksIn
 = 
Ãw
 
	`TObjA¼ay
();

70 
fLšksOut
 = 
Ãw
 
	`TObjA¼ay
();

71 
fV®ue
 = 
UNINITIALIZED
;

72 
fAùiv©iÚV®ue
 = 
UNINITIALIZED
;

73 
fD–
 = 
UNINITIALIZED
;

74 
fDEDw
 = 
UNINITIALIZED
;

75 
fE¼Ü
 = 
UNINITIALIZED
;

76 
fAùiv©iÚ
 = 
NULL
;

77 
fFÜûdV®ue
 = 
kFALSE
;

78 
fIÅutC®cuÏtÜ
 = 
NULL
;

79 
	}
}

84 
	gTMVA
::
TNeurÚ
::
	$FÜûV®ue
(
DoubË_t
 
v®ue
)

86 
fV®ue
 = 
v®ue
;

87 
fFÜûdV®ue
 = 
kTRUE
;

88 
	}
}

93 
	gTMVA
::
TNeurÚ
::
	$C®cuÏ‹V®ue
()

95 ià(
fFÜûdV®ue
) ;

96 
fV®ue
 = 
fIÅutC®cuÏtÜ
->
	`G‘IÅut
(
this
);

97 
	}
}

102 
	gTMVA
::
TNeurÚ
::
	$C®cuÏ‹Aùiv©iÚV®ue
()

104 ià(
fAùiv©iÚ
 =ğ
NULL
) {

105 
	`PrštMes§ge
Ğ
kWARNING
 ,"No‡ctivationƒquation specified." );

106 
fAùiv©iÚV®ue
 = 
UNINITIALIZED
;

109 
fAùiv©iÚV®ue
 = 
fAùiv©iÚ
->
	`Ev®
(
fV®ue
);

110 
	}
}

115 
	gTMVA
::
TNeurÚ
::
	$C®cuÏ‹D–
()

118 ià(
	`IsIÅutNeurÚ
()) {

119 
fD–
 = 0.0;

123 
DoubË_t
 
”rÜ
;

126 ià(
	`IsOuutNeurÚ
()è
”rÜ
 = 
fE¼Ü
;

130 
”rÜ
 = 0.0;

131 
TSyÇp£
* 
syÇp£
 = 
NULL
;

136 
TObjA¼ayI‹r
 
	`™”
(
fLšksOut
);

137 
Œue
) {

138 
syÇp£
 = (
TSyÇp£
*è
™”
.
	`Next
();

139 ià(
syÇp£
 =ğ
NULL
) ;

140 
”rÜ
 +ğ
syÇp£
->
	`G‘Weigh‹dD–
();

145 
fD–
 = 
”rÜ
 * 
fAùiv©iÚ
->
	`Ev®D”iv©ive
(
	`G‘V®ue
());

146 
	}
}

151 
	gTMVA
::
TNeurÚ
::
	$S‘IÅutC®cuÏtÜ
(
TNeurÚIÅut
* 
ÿlcuÏtÜ
)

153 ià(
fIÅutC®cuÏtÜ
 !ğ
NULL
è
d–‘e
 fInputCalculator;

154 
fIÅutC®cuÏtÜ
 = 
ÿlcuÏtÜ
;

155 
	}
}

160 
	gTMVA
::
TNeurÚ
::
	$S‘Aùiv©iÚEqn
(
TAùiv©iÚ
* 
aùiv©iÚ
)

162 ià(
fAùiv©iÚ
 !ğ
NULL
è
d–‘e
 fActivation;

163 
fAùiv©iÚ
 = 
aùiv©iÚ
;

164 
	}
}

169 
	gTMVA
::
TNeurÚ
::
	$AddP»Lšk
(
TSyÇp£
* 
´e
)

171 ià(
	`IsIÅutNeurÚ
()) ;

172 
fLšksIn
->
	`Add
(
´e
);

173 
	}
}

178 
	gTMVA
::
TNeurÚ
::
	$AddPo¡Lšk
(
TSyÇp£
* 
po¡
)

180 ià(
	`IsOuutNeurÚ
()) ;

181 
fLšksOut
->
	`Add
(
po¡
);

182 
	}
}

187 
	gTMVA
::
TNeurÚ
::
	$D–‘eP»Lšks
()

189 
	`D–‘eLšksA¼ay
(
fLšksIn
);

190 
	}
}

195 
	gTMVA
::
TNeurÚ
::
	$D–‘eLšksA¼ay
(
TObjA¼ay
*& 
lšks
)

197 ià(
lšks
 =ğ
NULL
) ;

199 
TSyÇp£
* 
syÇp£
 = 
NULL
;

200 
IÁ_t
 
numLšks
 = 
lšks
->
	`G‘EÁr›sFa¡
();

201 
IÁ_t
 
i
=0; i<
numLšks
; i++) {

202 
syÇp£
 = (
TSyÇp£
*)
lšks
->
	`At
(
i
);

203 ià(
syÇp£
 !ğ
NULL
è
d–‘e
 synapse;

205 
d–‘e
 
lšks
;

206 
lšks
 = 
NULL
;

207 
	}
}

212 
	gTMVA
::
TNeurÚ
::
	$S‘E¼Ü
(
DoubË_t
 
”rÜ
)

214 ià(!
	`IsOuutNeurÚ
())

215 
	`PrštMes§ge
Ğ
kWARNING
, "Warning! Setting‡nƒrror on‡‚on-output‚euron is…robably‚ot what you wanto do." );

217 
fE¼Ü
 = 
”rÜ
;

218 
	}
}

224 
	gTMVA
::
TNeurÚ
::
	$Upd©eSyÇp£sB©ch
()

226 ià(
	`IsIÅutNeurÚ
()) ;

228 
TSyÇp£
* 
syÇp£
 = 
NULL
;

229 
TObjA¼ayI‹r
 
	`™”
(
fLšksIn
);

230 
Œue
) {

231 
syÇp£
 = (
TSyÇp£
*è
™”
.
	`Next
();

232 ià(
syÇp£
 =ğ
NULL
) ;

233 
syÇp£
->
	`C®cuÏ‹D–
();

236 
	}
}

242 
	gTMVA
::
TNeurÚ
::
	$Upd©eSyÇp£sSequ’tŸl
()

244 ià(
	`IsIÅutNeurÚ
()) ;

246 
TSyÇp£
* 
syÇp£
 = 
NULL
;

247 
TObjA¼ayI‹r
 
	`™”
(
fLšksIn
);

249 
Œue
) {

250 
syÇp£
 = (
TSyÇp£
*è
™”
.
	`Next
();

251 ià(
syÇp£
 =ğ
NULL
) ;

252 
syÇp£
->
	`In™D–
();

253 
syÇp£
->
	`C®cuÏ‹D–
();

254 
syÇp£
->
	`Adju¡Weight
();

257 
	}
}

263 
	gTMVA
::
TNeurÚ
::
	$Adju¡SyÇp£Weights
()

265 ià(
	`IsIÅutNeurÚ
()) ;

267 
TSyÇp£
* 
syÇp£
 = 
NULL
;

268 
TObjA¼ayI‹r
 
	`™”
(
fLšksIn
);

271 
Œue
) {

272 
syÇp£
 = (
TSyÇp£
*è
™”
.
	`Next
();

273 ià(
syÇp£
 =ğ
NULL
) ;

274 
syÇp£
->
	`Adju¡Weight
();

277 
	}
}

283 
	gTMVA
::
TNeurÚ
::
	$In™SyÇp£D–s
()

286 ià(
	`IsIÅutNeurÚ
()) ;

288 
TSyÇp£
* 
syÇp£
 = 
NULL
;

289 
TObjA¼ayI‹r
 
	`™”
(
fLšksIn
);

291 
Œue
) {

292 
syÇp£
 = (
TSyÇp£
*è
™”
.
	`Next
();

294 ià(
syÇp£
 =ğ
NULL
) ;

295 
syÇp£
->
	`In™D–
();

298 
	}
}

303 
	gTMVA
::
TNeurÚ
::
	$PrštLšks
(
TObjA¼ay
* 
lšks
) const

305 ià(
lšks
 =ğ
NULL
) {

306 
	`Log
(è<< 
kDEBUG
 << "\t\t\t<nÚe>" << 
Endl
;

310 
TSyÇp£
* 
syÇp£
;

312 
IÁ_t
 
numLšks
 = 
lšks
->
	`G‘EÁr›sFa¡
();

313 
IÁ_t
 
i
 = 0; i < 
numLšks
; i++) {

314 
syÇp£
 = (
TSyÇp£
*)
lšks
->
	`At
(
i
);

315 
	`Log
(è<< 
kDEBUG
 <<

316 "\t\t\tweigh: " << 
syÇp£
->
	`G‘Weight
()

317 << "\t\tw-v®ue: " << 
syÇp£
->
	`G‘Weigh‹dV®ue
()

318 << "\t\tw-d–: " << 
syÇp£
->
	`G‘Weigh‹dD–
()

319 << "\t\-¿‹: " << 
syÇp£
->
	`G‘L—ºšgR©e
()

320 << 
Endl
;

322 
	}
}

327 
	gTMVA
::
TNeurÚ
::
	$PrštAùiv©iÚEqn
()

329 ià(
fAùiv©iÚ
 !ğ
NULL
è
	`Log
(è<< 
kDEBUG
 << fAùiv©iÚ->
	`G‘Ex´essiÚ
(è<< 
Endl
;

330 
	`Log
(è<< 
kDEBUG
 << "<nÚe>" << 
Endl
;

331 
	}
}

336 
	gTMVA
::
TNeurÚ
::
	$PrštMes§ge
Ğ
EMsgTy³
 
ty³
, 
TSŒšg
 
mes§ge
)

338 
	`Log
(è<< 
ty³
 << 
mes§ge
 << 
Endl
;

339 
	}
}

343 
	gTMVA
::
MsgLogg”
& 
TMVA
::
TNeurÚ
::
	$Log
() const

345 
	`TTHREAD_TLS_DECL_ARG2
(
MsgLogg”
,
logg”
,"TNeurÚ",
kDEBUG
);

346  
logg”
;

347 
	}
}

	@src/TNeuronInput.cxx

28 
	~"TMVA/TNeurÚIÅut.h
"

30 
	~"Rty³s.h
"

32 
CÏssImp
(
TMVA
::
TNeurÚIÅut
);

	@src/TNeuronInputAbs.cxx

31 
	~"TMVA/TNeurÚIÅutAbs.h
"

33 
	~"Rty³s.h
"

35 
CÏssImp
(
TMVA
::
TNeurÚIÅutAbs
);

	@src/TNeuronInputChooser.cxx

29 
	~"TMVA/TNeurÚIÅutChoo£r.h
"

31 
	~"Rty³s.h
"

33 
CÏssImp
(
TMVA
::
TNeurÚIÅutChoo£r
);

	@src/TNeuronInputSqSum.cxx

30 
	~"TMVA/TNeurÚIÅutSqSum.h
"

32 
	~"Rty³s.h
"

34 
CÏssImp
(
TMVA
::
TNeurÚIÅutSqSum
);

	@src/TNeuronInputSum.cxx

29 
	~"TMVA/TNeurÚIÅutSum.h
"

31 
	~"Rty³s.h
"

33 
CÏssImp
(
TMVA
::
TNeurÚIÅutSum
);

	@src/TSpline1.cxx

33 
	~"TMVA/TS¶še1.h
"

35 
	~"TG¿ph.h
"

36 
	~"TM©h.h
"

38 
CÏssImp
(
TMVA
::
TS¶še1
);

44 
	gTMVA
::
TS¶še1
::
	$TS¶še1
ĞcÚ¡ 
TSŒšg
& 
t™Ë
, 
TG¿ph
* 
theG¿ph
 )

45 : 
	$fG¿ph
Ğ
theG¿ph
 )

47 
	`S‘NameT™Ë
Ğ
t™Ë
,itle );

48 
	}
}

53 
	gTMVA
::
TS¶še1
::~
	$TS¶še1
( )

55 ià(
fG¿ph
è
d–‘e
 fGraph;

56 
	}
}

61 
DoubË_t
 
	gTMVA
::
TS¶še1
::
	$Ev®
Ğ
DoubË_t
 
x
 ) const

63 
IÁ_t
 
ibš
 = 
TM©h
::
	`Bš¬yS—rch
Ğ
fG¿ph
->
	`G‘N
(),

64 
fG¿ph
->
	`G‘X
(),

65 
x
 );

66 
IÁ_t
 
nbš
 = 
fG¿ph
->
	`G‘N
();

69 ià(
ibš
 < 0 ) ibin = 0;

70 ià(
ibš
 >ğ
nbš
) ibin =‚bin - 1;

72 
IÁ_t
 
Ãxtbš
 = 
ibš
;

73 ià((
x
 > 
fG¿ph
->
	`G‘X
()[
ibš
] && ibš !ğ
nbš
-1) || ibin == 0)

74 
Ãxtbš
++;

76 
Ãxtbš
--;

79 
DoubË_t
 
dx
 = 
fG¿ph
->
	`G‘X
()[
ibš
] - fG¿ph->G‘X()[
Ãxtbš
];

80 
DoubË_t
 
dy
 = 
fG¿ph
->
	`G‘Y
()[
ibš
] - fG¿ph->G‘Y()[
Ãxtbš
];

81  
fG¿ph
->
	`G‘Y
()[
ibš
] + (
x
 - fG¿ph->
	`G‘X
()[ibš]è* 
dy
/
dx
;

82 
	}
}

87 
	gTMVA
::
TS¶še1
::
	$BudCÛff
( )

89 
	}
}

94 
TMVA
::
TS¶še1
::
	$G‘KnÙ
Ğ
IÁ_t
 , 
DoubË_t
& , Double_t& ) const

96 
	}
}

	@src/TSpline2.cxx

33 
	~"TMVA/TS¶še2.h
"

35 
	~"TG¿ph.h
"

36 
	~"TM©h.h
"

37 
	~"TS¶še.h
"

39 
CÏssImp
(
TMVA
::
TS¶še2
);

45 
	gTMVA
::
TS¶še2
::
	$TS¶še2
ĞcÚ¡ 
TSŒšg
& 
t™Ë
, 
TG¿ph
* 
theG¿ph
 )

46 : 
	$fG¿ph
Ğ
theG¿ph
 )

48 
	`S‘NameT™Ë
Ğ
t™Ë
,itle );

49 
	}
}

54 
	gTMVA
::
TS¶še2
::~
	$TS¶še2
( )

56 ià(
fG¿ph
è
d–‘e
 fGraph;

57 
	}
}

62 
DoubË_t
 
	gTMVA
::
TS¶še2
::
	$Ev®
ĞcÚ¡ 
DoubË_t
 
x
 ) const

64 
DoubË_t
 
»tv®
=0;

66 
IÁ_t
 
ibš
 = 
TM©h
::
	`Bš¬yS—rch
Ğ
fG¿ph
->
	`G‘N
(),

67 
fG¿ph
->
	`G‘X
(),

68 
x
 );

71 ià(
ibš
 < 0 ) ibin = 0;

72 ià(
ibš
 >ğ
fG¿ph
->
	`G‘N
()) ibin = fGraph->GetN() - 1;

74 
Flßt_t
 
dx
 = 0;

76 ià(
ibš
 == 0 ) {

78 
»tv®
 = 
	`Quad¿x
Ğ
x
,

79 
fG¿ph
->
	`G‘X
()[
ibš
] + 
dx
,

80 
fG¿ph
->
	`G‘X
()[
ibš
+1] + 
dx
,

81 
fG¿ph
->
	`G‘X
()[
ibš
+2] + 
dx
,

82 
fG¿ph
->
	`G‘Y
()[
ibš
],

83 
fG¿ph
->
	`G‘Y
()[
ibš
+1],

84 
fG¿ph
->
	`G‘Y
()[
ibš
+2]);

87 ià(
ibš
 >ğ(
fG¿ph
->
	`G‘N
()-2)) {

88 
ibš
 = 
fG¿ph
->
	`G‘N
() - 1;

90 
»tv®
 = 
	`Quad¿x
Ğ
x
,

91 
fG¿ph
->
	`G‘X
()[
ibš
-2] + 
dx
,

92 
fG¿ph
->
	`G‘X
()[
ibš
-1] + 
dx
,

93 
fG¿ph
->
	`G‘X
()[
ibš
] + 
dx
,

94 
fG¿ph
->
	`G‘Y
()[
ibš
-2],

95 
fG¿ph
->
	`G‘Y
()[
ibš
-1],

96 
fG¿ph
->
	`G‘Y
()[
ibš
]);

100 
»tv®
 = ( 
	`Quad¿x
Ğ
x
,

101 
fG¿ph
->
	`G‘X
()[
ibš
-1] + 
dx
,

102 
fG¿ph
->
	`G‘X
()[
ibš
] + 
dx
,

103 
fG¿ph
->
	`G‘X
()[
ibš
+1] + 
dx
,

104 
fG¿ph
->
	`G‘Y
()[
ibš
-1],

105 
fG¿ph
->
	`G‘Y
()[
ibš
],

106 
fG¿ph
->
	`G‘Y
()[
ibš
+1])

108 
	`Quad¿x
Ğ
x
, 
fG¿ph
->
	`G‘X
()[
ibš
] + 
dx
,

109 
fG¿ph
->
	`G‘X
()[
ibš
+1] + 
dx
,

110 
fG¿ph
->
	`G‘X
()[
ibš
+2] + 
dx
,

111 
fG¿ph
->
	`G‘Y
()[
ibš
],

112 
fG¿ph
->
	`G‘Y
()[
ibš
+1],

113 
fG¿ph
->
	`G‘Y
()[
ibš
+2]) )*0.5;

116  
»tv®
;

117 
	}
}

122 
	gTMVA
::
TS¶še2
::
	$BudCÛff
( )

124 
	}
}

129 
TMVA
::
TS¶še2
::
	$G‘KnÙ
Ğ
IÁ_t
 , 
DoubË_t
& , Double_t& ) const

131 
	}
}

140 
DoubË_t
 
	gTMVA
::
TS¶še2
::
	$Quad¿x
ĞcÚ¡ 
Flßt_t
 
dm
,cÚ¡ Flßt_ˆ
dm1
,cÚ¡ Flßt_ˆ
dm2
,cÚ¡ Flßt_ˆ
dm3
,

141 cÚ¡ 
Flßt_t
 
cos1
, cÚ¡ Flßt_ˆ
cos2
, cÚ¡ Flßt_ˆ
cos3
 ) const

143 
Flßt_t
 
a
 = 
cos1
*(
dm2
-
dm3
è+ 
cos2
*(dm3-
dm1
è+ 
cos3
*(dm1-dm2);

144 
Flßt_t
 
b
 = 
cos1
*(
dm2
*dm2-
dm3
*dm3è+ 
cos2
*(dm3*dm3-
dm1
*dm1è+ 
cos3
*(dm1*dm1-dm2*dm2);

145 
Flßt_t
 
c
 = 
cos1
*(
dm2
-
dm3
)*dm2*dm3 + 
cos2
*(dm3-
dm1
)*dm3*dm1 + 
cos3
*(dm1-dm2)*dm1*dm2;

147 
Flßt_t
 
d’om
 = (
dm2
-
dm3
)*(dm3-
dm1
)*(dm1-dm2);

149  (
d’om
 !ğ0.0è? (-
a
*
dm
*dm+
b
*dm-
c
)/denom : 0.0;

150 
	}
}

	@src/TSynapse.cxx

29 
	~"TMVA/TSyÇp£.h
"

31 
	~"TMVA/TNeurÚ.h
"

33 
	~"TMVA/MsgLogg”.h
"

35 
	~"TMVA/Ty³s.h
"

37 
	~"Th»adLoÿlStÜage.h
"

38 
	~"TObjeù.h
"

40 cÚ¡ 
IÁ_t
 
	gfgUNINITIALIZED
 = -1;

42 
CÏssImp
(
TMVA
::
TSyÇp£
);

47 
	gTMVA
::
TSyÇp£
::
	$TSyÇp£
()

48 : 
	`fWeight
( 0 ),

49 
	`fL—ºR©e
( 0 ),

50 
	`fD–
( 0 ),

51 
	`fDEDw
( 0 ),

52 
	`fCouÁ
( 0 ),

53 
	`fP»NeurÚ
Ğ
NULL
 ),

54 
	$fPo¡NeurÚ
Ğ
NULL
 )

56 
fWeight
 = 
fgUNINITIALIZED
;

57 
	}
}

62 
	gTMVA
::
TSyÇp£
::~
	$TSyÇp£
()

64 
	}
}

69 
TMVA
::
TSyÇp£
::
	$S‘Weight
(
DoubË_t
 
weight
)

71 
fWeight
 = 
weight
;

72 
	}
}

77 
DoubË_t
 
	gTMVA
::
TSyÇp£
::
	$G‘Weigh‹dV®ue
()

79 ià(
fP»NeurÚ
 =ğ
NULL
)

80 
	`Log
(è<< 
kFATAL
 << "<G‘Weigh‹dV®ue> syÇp£‚Ù cÚÃùedØÃurÚ" << 
Endl
;

82  (
fWeight
 * 
fP»NeurÚ
->
	`G‘Aùiv©iÚV®ue
());

83 
	}
}

88 
DoubË_t
 
	gTMVA
::
TSyÇp£
::
	$G‘Weigh‹dD–
()

90 ià(
fPo¡NeurÚ
 =ğ
NULL
)

91 
	`Log
(è<< 
kFATAL
 << "<G‘Weigh‹dD–> syÇp£‚Ù cÚÃùedØÃurÚ" << 
Endl
;

93  
fWeight
 * 
fPo¡NeurÚ
->
	`G‘D–
();

94 
	}
}

99 
	gTMVA
::
TSyÇp£
::
	$Adju¡Weight
()

101 
DoubË_t
 
wD–
 = 
fD–
 / 
fCouÁ
;

102 
fWeight
 +ğ-
fL—ºR©e
 * 
wD–
;

103 
	`In™D–
();

104 
	}
}

109 
	gTMVA
::
TSyÇp£
::
	$C®cuÏ‹D–
()

111 
fD–
 +ğ
fPo¡NeurÚ
->
	`G‘D–
(è* 
fP»NeurÚ
->
	`G‘Aùiv©iÚV®ue
();

112 
fCouÁ
++;

113 
	}
}

117 
	gTMVA
::
MsgLogg”
& 
TMVA
::
TSyÇp£
::
	$Log
() const

119 
	`TTHREAD_TLS_DECL_ARG
(
MsgLogg”
,
logg”
,"TSynapse");

120  
logg”
;

121 
	}
}

	@src/Timer.cxx

54 
	~"TMVA/Tim”.h
"

56 
	~"TMVA/CÚfig.h
"

57 
	~"TMVA/MsgLogg”.h
"

58 
	~"TMVA/ToŞs.h
"

60 
	~"TStİw©ch.h
"

62 
	~<iomª
>

63 
	~<uni¡d.h
>

65 cÚ¡ 
TSŒšg
 
	gTMVA
::
Tim”
::
fgCÏssName
 = "Timer";

66 cÚ¡ 
IÁ_t
 
	gTMVA
::
Tim”
::
fgNbšs
 = 16;

68 
CÏssImp
(
TMVA
::
Tim”
);

73 
	gTMVA
::
Tim”
::
	$Tim”
ĞcÚ¡ * 
´efix
, 
BoŞ_t
 
cŞourfulOuut
 )

74 : 
	$Tim”
(0, 
´efix
, 
cŞourfulOuut
)

76 
	}
}

84 
	gTMVA
::
Tim”
::
	$Tim”
Ğ
IÁ_t
 
ncouÁs
, cÚ¡ * 
´efix
, 
BoŞ_t
 
cŞourfulOuut
 )

85 : 
	`fNcouÁs
 ( 
ncouÁs
 ),

86 
	`fP»fix
 ( 
	`¡rcmp
(
´efix
,"")==0?
Tim”
::
fgCÏssName
:
	`TSŒšg
(prefix) ),

87 
	`fCŞourfulOuut
Ğ
cŞourfulOuut
 ),

88 
	`fP»viousProg»ss
(-1),

89 
	`fOuutToFe
(!
	`i§‰y
(
STDERR_FILENO
)),

90 
	`fProg»ssB¬SŒšgL’gth
 (0),

91 
	`fLogg”
 ( 
Ãw
 
	`MsgLogg”
Ğ
fP»fix
.
	$D©a
() ) )

93 
fCŞourfulOuut
 = fCŞourfulOuuˆ&& !
fOuutToFe
;

94 
	`Re£t
();

95 
	}
}

100 
	gTMVA
::
Tim”
::~
	$Tim”
( )

102 
d–‘e
 
fLogg”
;

103 
	}
}

105 
	gTMVA
::
Tim”
::
	$In™
Ğ
IÁ_t
 
ncouÁs
 )

108 
fNcouÁs
 = 
ncouÁs
;

109 
	`Re£t
();

110 
	}
}

115 
	gTMVA
::
Tim”
::
	$Re£t
( )

117 
TStİw©ch
::
	`S¹
Ğ
kTRUE
 );

118 
fP»viousProg»ss
 = -1;

119 
fP»viousTimeE¡im©e
.
	`CË¬
();

120 
	}
}

125 
DoubË_t
 
	gTMVA
::
Tim”
::
	$EÏp£dSecÚds
( )

127 
DoubË_t
 
¹
 = 
TStİw©ch
::
	`R—lTime
(); TStİw©ch::
	`S¹
Ğ
kFALSE
 );

128  
¹
;

129 
	}
}

134 
TSŒšg
 
	gTMVA
::
Tim”
::
	$G‘EÏp£dTime
Ğ
BoŞ_t
 
Sc›Áific
 )

136  
	`SecToText
Ğ
	`EÏp£dSecÚds
(), 
Sc›Áific
 );

137 
	}
}

142 
TSŒšg
 
	gTMVA
::
Tim”
::
	$G‘LeáTime
Ğ
IÁ_t
 
icouÁs
 )

144 
DoubË_t
 
ËáTime
 = ( 
icouÁs
 <= 0 ? -1 :

145 
icouÁs
 > 
fNcouÁs
 ? -1 :

146 
	`DoubË_t
(
fNcouÁs
 - 
icouÁs
)/DoubË_t(icouÁs)*
	`EÏp£dSecÚds
() );

148  
	`SecToText
Ğ
ËáTime
, 
kFALSE
 );

149 
	}
}

154 
	gTMVA
::
Tim”
::
	$D¿wProg»ssB¬
()

156 
fProg»ssB¬SŒšgL’gth
 = 0;

157 
fNcouÁs
++;

158 ià(
fNcouÁs
 == 1) {

159 
¡d
::
şog
 << 
fLogg”
->
	`G‘Prš‹dSourû
();

160 
¡d
::
şog
 << "Please wait ";

163 
¡d
::
şog
 << "." << std::
æush
;

164 
	}
}

169 
	gTMVA
::
Tim”
::
	$D¿wProg»ssB¬
Ğ
TSŒšg
 
theSŒšg
 )

172 
¡d
::
şog
 << 
fLogg”
->
	`G‘Prš‹dSourû
();

174 
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << "[" << gTools().Color("reset");

176 
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("wh™e_Ú_g»’"è<< gToŞs().CŞÜ("dy–low"è<< 
theSŒšg
 << gTools().Color("reset");

178 
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << "]" << gTools().Color("reset");

180 
i
 = 
fProg»ssB¬SŒšgL’gth
; i < 
theSŒšg
.
	`L’gth
 (); ++i)

181 
¡d
::
cout
 << " ";

182 
¡d
::
şog
 << "\r" << std::
æush
;

183 
fProg»ssB¬SŒšgL’gth
 = 
theSŒšg
.
	`L’gth
 ();

184 
	}
}

190 
	gTMVA
::
Tim”
::
	$D¿wProg»ssB¬
Ğ
IÁ_t
 
icouÁs
, cÚ¡ 
TSŒšg
& 
comm’t
 )

192 ià(!
	`gCÚfig
().
	`D¿wProg»ssB¬
()) ;

195 ià(
icouÁs
 > 
fNcouÁs
-1) icounts = fNcounts-1;

196 ià(
icouÁs
 < 0 ) icounts = 0;

197 
IÁ_t
 
ic
 = 
	`IÁ_t
(
	`Flßt_t
(
icouÁs
)/Flßt_t(
fNcouÁs
)*
fgNbšs
);

199 autØ
timeLeá
 = 
this
->
	`G‘LeáTime
Ğ
icouÁs
 );

202 ià(
ic
 =ğ
fP»viousProg»ss
 && 
timeLeá
 =ğ
fP»viousTimeE¡im©e
 && 
icouÁs
 !ğ
fNcouÁs
-1) ;

204 ià(
fOuutToFe
) {

205 ià(
ic
 !ğ
fP»viousProg»ss
) {

206 
¡d
::
şog
 << 
	`IÁ_t
((100*(
icouÁs
+1))/
	`Flßt_t
(
fNcouÁs
)è<< "%,imËá: " << 
timeLeá
 << std::
’dl
;

207 
fP»viousProg»ss
 = 
ic
;

211 
fP»viousProg»ss
 = 
ic
;

212 
fP»viousTimeE¡im©e
 = 
timeLeá
;

214 
¡d
::
şog
 << 
fLogg”
->
	`G‘Prš‹dSourû
();

215 ià(
fCŞourfulOuut
è
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << "[" << gTools().Color("reset");

216 
¡d
::
şog
 << "[";

217 
IÁ_t
 
i
=0; i<
ic
; i++) {

218 ià(
fCŞourfulOuut
è
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << ">" << gTools().Color("reset");

219 
¡d
::
şog
 << ">";

221 
IÁ_t
 
i
=
ic
+1; i<
fgNbšs
; i++) {

222 ià(
fCŞourfulOuut
è
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << "." << gTools().Color("reset");

223 
¡d
::
şog
 << ".";

225 ià(
fCŞourfulOuut
è
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("white_on_green") << gTools().Color("dyellow") << "]" << gTools().Color("reset");

226 
¡d
::
şog
 << "]" ;

229 ià(
fCŞourfulOuut
) {

230 
¡d
::
şog
 << 
	`gToŞs
().
	`CŞÜ
("reset") << " " ;

231 
¡d
::
şog
 << "(" << 
	`gToŞs
().
	`CŞÜ
("»d"è<< 
	`IÁ_t
((100*(
icouÁs
+1))/
	`Flßt_t
(
fNcouÁs
)) << "%" << gTools().Color("reset")

234 << 
timeLeá
 << 
	`gToŞs
().
	`CŞÜ
("reset") << ") ";

237 
¡d
::
şog
 << "] " ;

238 
¡d
::
şog
 << "(" << 
	`IÁ_t
((100*(
icouÁs
+1))/
	`Flßt_t
(
fNcouÁs
)) << "%"

239 << ", " << "timËá: " << 
timeLeá
 << ") ";

241 ià(
comm’t
 != "") {

242 
¡d
::
şog
 << "[" << 
comm’t
 << "] ";

244 
¡d
::
şog
 << "\r" << std::
æush
;

245 
	}
}

250 
TSŒšg
 
	gTMVA
::
Tim”
::
	$SecToText
Ğ
DoubË_t
 
£cÚds
, 
BoŞ_t
 
Sc›Áific
 ) const

252 
TSŒšg
 
out
 = "";

253 ià(
Sc›Áific
 ) 
out
 = 
	`FÜm
Ğ"%.3g sec", 
£cÚds
 );

254 ià(
£cÚds
 < 0 ) 
out
 = "unknown";

255 ià(
£cÚds
 <ğ300è
out
 = 
	`FÜm
Ğ"%˜£c", 
	`IÁ_t
(seconds) );

257 ià(
£cÚds
 > 3600) {

258 
IÁ_t
 
h
 = 
	`IÁ_t
(
£cÚds
/3600);

259 ià(
h
 <ğ1è
out
 = 
	`FÜm
( "%i hr : ", h );

260 
out
 = 
	`FÜm
Ğ"%˜hr : ", 
h
 );

262 
£cÚds
 = 
	`IÁ_t
(seconds)%3600;

264 
IÁ_t
 
m
 = 
	`IÁ_t
(
£cÚds
/60);

265 ià(
m
 <ğ1è
out
 +ğ
	`FÜm
( "%i min", m );

266 
out
 +ğ
	`FÜm
Ğ"%˜mšs", 
m
 );

269  (
fCŞourfulOuut
è? 
	`gToŞs
().
	`CŞÜ
("»d"è+ 
out
 + gTools().Color("reset") : out;

270 
	}
}

	@src/Tools.cxx

36 
	~"TMVA/ToŞs.h
"

38 
	~"TMVA/CÚfig.h
"

39 
	~"TMVA/Ev’t.h
"

40 
	~"TMVA/V”siÚ.h
"

41 
	~"TMVA/PDF.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/Ty³s.h
"

45 
	~"TObjSŒšg.h
"

46 
	~"TM©h.h
"

47 
	~"TSŒšg.h
"

48 
	~"TT»e.h
"

49 
	~"TL—f.h
"

50 
	~"TH1.h
"

51 
	~"TH2.h
"

52 
	~"TLi¡.h
"

53 
	~"TS¶še.h
"

54 
	~"TVeùÜ.h
"

55 
	~"TM©rixD.h
"

56 
	~"TM©rixDSymEig’.h
"

57 
	~"TVeùÜD.h
"

58 
	~"TT»eFÜmuÏ.h
"

59 
	~"TXMLEngše.h
"

60 
	~"TROOT.h
"

61 
	~"TM©rixDSymEig’.h
"

63 
	~<®gÜ™hm
>

64 
	~<c¡dlib
>

66 
usšg
 
Çme¥aû
 
	g¡d
;

68 #ià
__ılu¥lus
 > 199711L

69 
	g¡d
::
©omic
<
TMVA
::
ToŞs
*> TMVA::ToŞs::
fgToŞs
{0};

71 
	gTMVA
::
ToŞs
* 
TMVA
::ToŞs::
fgToŞs
 = 0;

74 
	gTMVA
::
ToŞs
& 
TMVA
::
	$gToŞs
(è{  
TMVA
::
ToŞs
::
	`In¡ªû
(); 
	}
}

75 
	gTMVA
::
ToŞs
& 
TMVA
::ToŞs::
	$In¡ªû
() {

76 #ià
__ılu¥lus
 > 199711L

77 if(!
fgToŞs
) {

78 
ToŞs
* 
tmp
 = 
Ãw
 
	`ToŞs
();

79 
ToŞs
* 
ex³ùed
 = 0;

80 if(! 
fgToŞs
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
,
tmp
)) {

82 
d–‘e
 
tmp
;

85  *
fgToŞs
;

87  
fgToŞs
?*(fgToŞs): *(fgToŞ ğ
Ãw
 
	`ToŞs
());

89 
	}
}

90 
	gTMVA
::
ToŞs
::
	$De¡royIn¡ªû
() {

93 #ià
__ılu¥lus
 > 199711L

94 ià(
fgToŞs
 !ğ0è{ 
d–‘e
 fgToŞs.
	`lßd
(); fgTools=0; }

96 ià(
fgToŞs
 !ğ0è{ 
d–‘e
 fgTools; fgTools=0; }

98 
	}
}

103 
	gTMVA
::
ToŞs
::
	$ToŞs
() :

104 
	`fRegexp
("$&|!%^&()'<>?= "),

105 
	`fLogg”
(
Ãw
 
	`MsgLogg”
("Tools")),

106 
	`fXMLEngše
(
Ãw
 
	$TXMLEngše
())

108 
	}
}

113 
	gTMVA
::
ToŞs
::~
	$ToŞs
()

115 
d–‘e
 
fLogg”
;

116 
d–‘e
 
fXMLEngše
;

117 
	}
}

122 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$NÜmV¬ŸbË
Ğ
DoubË_t
 
x
, DoubË_ˆ
xmš
, DoubË_ˆ
xmax
 )

124  2*(
x
 - 
xmš
)/(
xmax
 - xmin) - 1.0;

125 
	}
}

133 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$G‘S•¬©iÚ
Ğ
TH1
* 
S
, TH1* 
B
 ) const

135 
DoubË_t
 
£·¿tiÚ
 = 0;

140 ià((
S
->
	`G‘NbšsX
(è!ğ
B
->GetNbinsX()) || (S->GetNbinsX() <= 0)) {

141 
	`Log
(è<< 
kFATAL
 << "<GetSeparation> signal‡nd background"

143 << 
S
->
	`G‘NbšsX
(è<< " : " << 
B
->G‘NbšsX(è<< 
Endl
;

146 ià(
S
->
	`G‘Xaxis
()->
	`G‘Xmš
(è!ğ
B
->GetXaxis()->GetXmin() ||

147 
S
->
	`G‘Xaxis
()->
	`G‘Xmax
(è!ğ
B
->GetXaxis()->GetXmax() ||

148 
S
->
	`G‘Xaxis
()->
	`G‘Xmax
(è<ğS->G‘Xaxis()->
	`G‘Xmš
()) {

149 
	`Log
(è<< 
kINFO
 << 
S
->
	`G‘Xaxis
()->
	`G‘Xmš
(è<< " " << 
B
->GetXaxis()->GetXmin()

150 << " " << 
S
->
	`G‘Xaxis
()->
	`G‘Xmax
(è<< " " << 
B
->GetXaxis()->GetXmax()

151 << " " << 
S
->
	`G‘Xaxis
()->
	`G‘Xmax
(è<< " " << S->G‘Xaxis()->
	`G‘Xmš
(è<< 
Endl
;

152 
	`Log
(è<< 
kFATAL
 << "<GetSeparation> signal‡nd background"

153 << " hi¡og¿m havdifã»Á o¸šv®id dim’siÚs:" << 
Endl
;

156 
IÁ_t
 
n¡•
 = 
S
->
	`G‘NbšsX
();

157 
DoubË_t
 
štBš
 = (
S
->
	`G‘Xaxis
()->
	`G‘Xmax
(è- S->G‘Xaxis()->
	`G‘Xmš
())/
n¡•
;

158 
DoubË_t
 
nS
 = 
S
->
	`G‘SumOfWeights
()*
štBš
;

159 
DoubË_t
 
nB
 = 
B
->
	`G‘SumOfWeights
()*
štBš
;

161 ià(
nS
 > 0 && 
nB
 > 0) {

162 
IÁ_t
 
bš
=0; bš<
n¡•
; bin++) {

163 
DoubË_t
 
s
 = 
S
->
	`G‘BšCÚ‹Á
Ğ
bš
+1 )/
	`DoubË_t
(
nS
);

164 
DoubË_t
 
b
 = 
B
->
	`G‘BšCÚ‹Á
Ğ
bš
+1 )/
	`DoubË_t
(
nB
);

166 ià(
s
 + 
b
 > 0è
£·¿tiÚ
 += (s - b)*(s - b)/(s + b);

168 
£·¿tiÚ
 *ğ(0.5*
štBš
);

171 
	`Log
(è<< 
kWARNING
 << "<GetSeparation> histograms with zeroƒntries: "

172 << 
nS
 << " : " << 
nB
 << " cannot compute separation"

173 << 
Endl
;

174 
£·¿tiÚ
 = 0;

177  
£·¿tiÚ
;

178 
	}
}

186 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$G‘S•¬©iÚ
ĞcÚ¡ 
PDF
& 
pdfS
, cÚ¡ PDF& 
pdfB
 ) const

188 
DoubË_t
 
xmš
 = 
pdfS
.
	`G‘Xmš
();

189 
DoubË_t
 
xmax
 = 
pdfS
.
	`G‘Xmax
();

191 ià(
xmš
 !ğ
pdfB
.
	`G‘Xmš
(è|| 
xmax
 !ğpdfB.
	`G‘Xmax
()) {

192 
	`Log
(è<< 
kFATAL
 << "<GetSeparation> Mismatch in PDF†imits: "

193 << 
xmš
 << " " << 
pdfB
.
	`G‘Xmš
(è<< 
xmax
 << " " <<…dfB.
	`G‘Xmax
(è<< 
Endl
;

196 
DoubË_t
 
£·¿tiÚ
 = 0;

197 
IÁ_t
 
n¡•
 = 100;

198 
DoubË_t
 
štBš
 = (
xmax
 - 
xmš
)/
	`DoubË_t
(
n¡•
);

199 
IÁ_t
 
bš
=0; bš<
n¡•
; bin++) {

200 
DoubË_t
 
x
 = (
bš
 + 0.5)*
štBš
 + 
xmš
;

201 
DoubË_t
 
s
 = 
pdfS
.
	`G‘V®
Ğ
x
 );

202 
DoubË_t
 
b
 = 
pdfB
.
	`G‘V®
Ğ
x
 );

204 ià(
s
 + 
b
 > 0è
£·¿tiÚ
 += (s - b)*(s - b)/(s + b);

206 
£·¿tiÚ
 *ğ(0.5*
štBš
);

208  
£·¿tiÚ
;

209 
	}
}

214 
	gTMVA
::
ToŞs
::
Compu‹St
ĞcÚ¡ 
¡d
::
veùÜ
<
TMVA
::
Ev’t
*>& 
ev’ts
, std::veùÜ<
Flßt_t
>* 
v®Vec
,

215 
DoubË_t
& 
m—nS
, DoubË_t& 
m—nB
,

216 
DoubË_t
& 
rmsS
, DoubË_t& 
rmsB
,

217 
DoubË_t
& 
xmš
, DoubË_t& 
xmax
,

218 
IÁ_t
 
sigÇlCÏss
, 
BoŞ_t
 
nÜm
 )

220 ià(0 =ğ
v®Vec
)

221 
Log
(è<< 
kFATAL
 << "<ToŞs::Compu‹St> v®uveùÜ i z”Øpoš‹r" << 
Endl
;

223 iàĞ
	gev’ts
.
size
(è!ğ
v®Vec
->size() )

224 
Log
(è<< 
kWARNING
 << "<Tools::ComputeStat>ƒvent‡nd value vector have different†engths "

225 << 
ev’ts
.
size
(è<< "!=" << 
v®Vec
->size(è<< 
Endl
;

227 
LÚg64_t
 
	g’Œ›s
 = 
v®Vec
->
size
();

230 
DoubË_t
* 
	gv¬VecS
 = 
Ãw
 DoubË_t[
’Œ›s
];

231 
DoubË_t
* 
	gv¬VecB
 = 
Ãw
 DoubË_t[
’Œ›s
];

232 
DoubË_t
* 
	gwgtVecS
 = 
Ãw
 DoubË_t[
’Œ›s
];

233 
DoubË_t
* 
	gwgtVecB
 = 
Ãw
 DoubË_t[
’Œ›s
];

234 
	gxmš
 = +
DBL_MAX
;

235 
	gxmax
 = -
DBL_MAX
;

236 
LÚg64_t
 
	gnEv’tsS
 = 0;

237 
LÚg64_t
 
	gnEv’tsB
 = 0;

238 
DoubË_t
 
	gxmš_
 = 0, 
	gxmax_
 = 0;

240 ià(
	gnÜm
) {

241 
	gxmš_
 = *
¡d
::
mš
Ğ
v®Vec
->
begš
(), v®Vec->
’d
() );

242 
	gxmax_
 = *
¡d
::
max
Ğ
v®Vec
->
begš
(), v®Vec->
’d
() );

245 
IÁ_t
 
	g›vt
=0; ievt<
	g’Œ›s
; ievt++) {

246 
DoubË_t
 
	gtheV¬
 = (*
v®Vec
)[
›vt
];

247 ià(
	gnÜm
è
	gtheV¬
 = 
ToŞs
::
NÜmV¬ŸbË
Ğ
theV¬
, 
xmš_
, 
xmax_
 );

249 ià(
IÁ_t
(
ev’ts
[
›vt
]->
G‘CÏss
()è=ğ
sigÇlCÏss
 ){

250 
wgtVecS
[
nEv’tsS
] = 
ev’ts
[
›vt
]->
G‘Weight
();

251 
	gv¬VecS
[
nEv’tsS
++] = 
theV¬
;

254 
	gwgtVecB
[
nEv’tsB
] = 
ev’ts
[
›vt
]->
G‘Weight
();

255 
	gv¬VecB
[
nEv’tsB
++] = 
theV¬
;

258 ià(
	gtheV¬
 > 
	gxmax
èxmax = 
theV¬
;

259 ià(
	gtheV¬
 < 
	gxmš
èxmš = 
theV¬
;

267 
	gm—nS
 = 
TMVA
::
ToŞs
::
M—n
Ğ
nEv’tsS
, 
v¬VecS
, 
wgtVecS
 );

268 
	gm—nB
 = 
TMVA
::
ToŞs
::
M—n
Ğ
nEv’tsB
, 
v¬VecB
, 
wgtVecB
 );

269 
	grmsS
 = 
TMVA
::
ToŞs
::
RMS
 ( 
nEv’tsS
, 
v¬VecS
, 
wgtVecS
 );

270 
	grmsB
 = 
TMVA
::
ToŞs
::
RMS
 ( 
nEv’tsB
, 
v¬VecB
, 
wgtVecB
 );

272 
	gd–‘e
 [] 
	gv¬VecS
;

273 
	gd–‘e
 [] 
	gv¬VecB
;

274 
	gd–‘e
 [] 
	gwgtVecS
;

275 
	gd–‘e
 [] 
	gwgtVecB
;

283 
TM©rixD
* 
	gTMVA
::
ToŞs
::
	$G‘SQRoÙM©rix
Ğ
TM©rixDSym
* 
symM©
 )

285 
IÁ_t
 
n
 = 
symM©
->
	`G‘Nrows
();

288 
TM©rixDSymEig’
* 
eig’
 = 
Ãw
 
	`TM©rixDSymEig’
Ğ*
symM©
 );

291 
TM©rixD
* 
si
 = 
Ãw
 
	`TM©rixD
Ğ
eig’
->
	`G‘Eig’VeùÜs
() );

292 
TM©rixD
* 
s
 = 
Ãw
 
	`TM©rixD
Ğ*
si
 );

293 
si
->
	`T¿n¥o£
( *si );

296 
TM©rixD
* 
d
 = 
Ãw
 
	`TM©rixD
Ğ
n
,‚);

297 
d
->
	`MuÉ
Ğ(*
si
), (*
symM©
è); (*dè*ğ(*
s
);

300 
IÁ_t
 
i
, 
j
;

301 
DoubË_t
 
•sÚ
 = 1.0e-8;

302 
i
=0; i<
n
; i++) {

303 
j
=0; j<
n
; j++) {

304 ià((
i
 !ğ
j
 && 
TM©h
::
	`Abs
((*
d
)(i,j))/TM©h::
	`Sq¹
((*d)(i,i)*(*d)(j,j)è> 
•sÚ
) ||

305 (
i
 =ğ
j
 && (*
d
)(i,i) < 0)) {

307 
	`Log
(è<< 
kWARNING
 << "<G‘SQRoÙM©rix>ƒ¼Ü iÀm©rix dŸgÚ®iz©iÚ;…rš‹d S‡nd B" << 
Endl
;

313 
i
=0; i<
n
; i++è
j
=0; j<n; j++èià(j !ğiè(*
d
)(i,j) = 0;

316 
i
=0; i<
n
; i++è(*
d
)(i,ièğ
TM©h
::
	`Sq¹
((*d)(i,i));

318 
TM©rixD
* 
sq¹M©
 = 
Ãw
 
	`TM©rixD
Ğ
n
,‚ );

319 
sq¹M©
->
	`MuÉ
Ğ(*
s
), (*
d
) );

320 (*
sq¹M©
è*ğ(*
si
);

323 
sq¹M©
->
	`Inv”t
();

325 
d–‘e
 
eig’
;

326 
d–‘e
 
s
;

327 
d–‘e
 
si
;

328 
d–‘e
 
d
;

330  
sq¹M©
;

331 
	}
}

336 cÚ¡ 
TM©rixD
* 
	gTMVA
::
ToŞs
::
	$G‘CÜ»ÏtiÚM©rix
ĞcÚ¡ 
TM©rixD
* 
covM©
 )

339 ià(
covM©
 == 0)  0;

341 
IÁ_t
 
nv¬
 = 
covM©
->
	`G‘Nrows
();

342 ià(
nv¬
 !ğ
covM©
->
	`G‘NcŞs
())

343 
	`Log
(è<< 
kFATAL
 << "<G‘CÜ»ÏtiÚM©rix> iÅuˆm©rix‚Ù quad¿tic" << 
Endl
;

345 
	`Log
(è<< 
kWARNING
;

346 
TM©rixD
* 
cÜrM©
 = 
Ãw
 
	`TM©rixD
Ğ
nv¬
,‚var );

347 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

348 
IÁ_t
 
jv¬
=0; jv¬<
nv¬
; jvar++) {

349 ià(
iv¬
 !ğ
jv¬
) {

350 
DoubË_t
 
d
 = (*
covM©
)(
iv¬
, iv¬)*(*covM©)(
jv¬
, jvar);

351 ià(
d
 > 1E-20è(*
cÜrM©
)(
iv¬
, 
jv¬
èğ(*
covM©
)(iv¬, jv¬)/
TM©h
::
	`Sq¹
(d);

353 
	`Log
() << "<GetCorrelationMatrix> zero variances for variables "

354 << "(" << 
iv¬
 << ", " << 
jv¬
 << ")" << 
Endl
;

355 (*
cÜrM©
)(
iv¬
, 
jv¬
) = 0;

357 ià(
TM©h
::
	`Abs
Ğ(*
cÜrM©
)(
iv¬
,
jv¬
)) > 1){

358 
	`Log
(è<< 
kWARNING


359 << " EËm’ˆ cÜr("<<
iv¬
<<","<<iv¬<<")=" << (*
cÜrM©
)(iv¬,
jv¬
)

360 << " sigma2="<<
d


361 << " cov("<<
iv¬
<<","<<iv¬<<")=" <<(*
covM©
)(ivar, ivar)

362 << " cov("<<
jv¬
<<","<<jv¬<<")=" <<(*
covM©
)(jvar, jvar)

363 << 
Endl
;

367 (*
cÜrM©
)(
iv¬
, ivar) = 1.0;

370 
	`Log
(è<< 
Endl
;

371  
cÜrM©
;

372 
	}
}

377 
TH1
* 
	gTMVA
::
ToŞs
::
	$´ojNÜmTH1F
Ğ
TT»e
* 
theT»e
, cÚ¡ 
TSŒšg
& 
theV¬Name
,

378 cÚ¡ 
TSŒšg
& 
Çme
, 
IÁ_t
 
nbšs
,

379 
DoubË_t
 
xmš
, DoubË_ˆ
xmax
, cÚ¡ 
TSŒšg
& 
cut
 )

382 
xmax
 += 0.00001;

384 
TH1
* 
hi¡
 = 
Ãw
 
	`TH1F
Ğ
Çme
,‚ame, 
nbšs
, 
xmš
, 
xmax
 );

385 
hi¡
->
	`Sumw2
();

386 
theT»e
->
	`Projeù
Ğ
Çme
, 
theV¬Name
, 
cut
 );

387 
	`NÜmHi¡
Ğ
hi¡
 );

388  
hi¡
;

389 
	}
}

394 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$NÜmHi¡
Ğ
TH1
* 
theHi¡
, 
DoubË_t
 
nÜm
 )

396 ià(!
theHi¡
)  0;

398 ià(
theHi¡
->
	`G‘Sumw2N
(è=ğ0ètheHi¡->
	`Sumw2
();

399 ià(
theHi¡
->
	`G‘SumOfWeights
() != 0) {

400 
DoubË_t
 
w
 = ( 
theHi¡
->
	`G‘SumOfWeights
()

401 *(
theHi¡
->
	`G‘Xaxis
()->
	`G‘Xmax
(è-heHi¡->G‘Xaxis()->
	`G‘Xmš
())/theHi¡->
	`G‘NbšsX
() );

402 ià(
w
 > 0è
theHi¡
->
	`SÿË
Ğ
nÜm
/w );

403  
w
;

407 
	}
}

412 
TLi¡
* 
	gTMVA
::
ToŞs
::
	$P¬£FÜm©Lše
Ğ
TSŒšg
 
fÜm©SŒšg
, cÚ¡ * 
£p
 )

414 
TLi¡
* 
Ïb–Li¡
 = 
Ãw
 
	`TLi¡
();

415 
Ïb–Li¡
->
	`S‘OwÃr
();

416 
fÜm©SŒšg
.
	`Fœ¡
(
£p
)==0èfÜm©SŒšg.
	`Remove
(0,1);

418 
fÜm©SŒšg
.
	`L’gth
()>0) {

419 ià(
fÜm©SŒšg
.
	`Fœ¡
(
£p
) == -1) {

420 
Ïb–Li¡
->
	`Add
(
Ãw
 
	`TObjSŒšg
(
fÜm©SŒšg
.
	`D©a
()));

421 
fÜm©SŒšg
="";

425 
Ssiz_t
 
posS•
 = 
fÜm©SŒšg
.
	`Fœ¡
(
£p
);

426 
Ïb–Li¡
->
	`Add
(
Ãw
 
	`TObjSŒšg
(
	`TSŒšg
(
	`fÜm©SŒšg
(0,
posS•
)).
	`D©a
()));

427 
fÜm©SŒšg
.
	`Remove
(0,
posS•
+1);

429 
fÜm©SŒšg
.
	`Fœ¡
(
£p
)==0èfÜm©SŒšg.
	`Remove
(0,1);

432  
Ïb–Li¡
;

433 
	}
}

454 
	gveùÜ
<
	gIÁ_t
>* 
	gTMVA
::
ToŞs
::
P¬£ANNO±iÚSŒšg
Ğ
TSŒšg
 
theO±iÚs
, 
IÁ_t
 
nv¬
,

455 
veùÜ
<
IÁ_t
>* 
nodes
 )

457 
TLi¡
* 
	gli¡
 = 
TMVA
::
ToŞs
::
P¬£FÜm©Lše
Ğ
theO±iÚs
, ":" );

461 ià(
	gli¡
->
G‘Size
() < 1) {

462 
Log
(è<< 
	gkFATAL
 << "<P¬£ANNO±iÚSŒšg> uÄecognized o±iÚ sŒšg: " << 
	gtheO±iÚs
 << 
	gEndl
;

466 
	gnodes
->
push_back
Ğ
©oi
Ğ((
TObjSŒšg
*)
li¡
->
At
(0))->
G‘SŒšg
() ) );

468 
IÁ_t
 
	ga
;

469 ià(
	gli¡
->
G‘Size
() > 1) {

470 
IÁ_t
 
	gi
=1; i<
	gli¡
->
G‘Size
(); i++) {

471 
TSŒšg
 
	gs
 = ((
TObjSŒšg
*)
li¡
->
At
(
i
))->
G‘SŒšg
();

472 
	gs
.
ToUµ”
();

473 ià(
s
(0) == 'N') {

474 ià(
s
.
L’gth
(è> 1è
nodes
->
push_back
Ğ
nv¬
 + 
©oi
(&s[1]) );

475 
	gnodes
->
push_back
Ğ
nv¬
 );

477 ià((
	ga
 = 
©oi
Ğ
s
 )è> 0è
nodes
->
push_back
(‡toi(s ) );

479 
Log
(è<< 
	gkFATAL
 << "<P¬£ANNO±iÚSŒšg> uÄecognized o±iÚ sŒšg: " << 
	gtheO±iÚs
 << 
	gEndl
;

484  
	gnodes
;

490 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$CheckS¶šes
ĞcÚ¡ 
TH1
* 
theHi¡
, cÚ¡ 
TS¶še
* 
theS¶še
 )

492 cÚ¡ 
DoubË_t
 
§n™yCr™
 = 0.01;

494 
BoŞ_t
 
»tv®
 = 
kTRUE
;

495 
IÁ_t
 
ibš
=1; ibš<=
theHi¡
->
	`G‘NbšsX
(); ibin++) {

496 
DoubË_t
 
x
 = 
theHi¡
->
	`G‘BšC’‹r
Ğ
ibš
 );

497 
DoubË_t
 
yh
 = 
theHi¡
->
	`G‘BšCÚ‹Á
Ğ
ibš
 );

498 
DoubË_t
 
ys
 = 
theS¶še
->
	`Ev®
Ğ
x
 );

500 ià(
ys
 + 
yh
 > 0) {

501 
DoubË_t
 
dev
 = 0.5*(
ys
 - 
yh
)/(ys + yh);

502 ià(
TM©h
::
	`Abs
(
dev
è> 
§n™yCr™
) {

503 
	`Log
(è<< 
kFATAL
 << "<CheckSplines> Spline failed sanity criterion; "

504 << "„–©ivdevŸtiÚ from hi¡og¿m: " << 
dev


505 << " iÀ(bš, v®ue): (" << 
ibš
 << ", " << 
x
 << ")" << 
Endl
;

506 
»tv®
 = 
kFALSE
;

511  
»tv®
;

512 
	}
}

517 
	g¡d
::
veùÜ
<
DoubË_t
> 
TMVA
::
ToŞs
::
MVADiff
Ğ
¡d
::veùÜ<DoubË_t>& 
a
, std::veùÜ<DoubË_t>& 
b
 )

519 ià(
a
.
size
(è!ğ
b
.size()) {

520 
throw
;

522 
	gveùÜ
<
	gDoubË_t
> 
»suÉ
(
a
.
size
());

523 
UIÁ_t
 
	gi
=0; i<
	ga
.
size
();i++è
	g»suÉ
[
i
]=
a
[i]-
b
[i];

524  
	g»suÉ
;

530 
	gTMVA
::
ToŞs
::
SÿË
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
v
, DoubË_ˆ
f
 )

532 
UIÁ_t
 
	gi
=0; i<
	gv
.
size
();i++èv[
i
]*=
f
;

538 
	gTMVA
::
ToŞs
::
SÿË
Ğ
¡d
::
veùÜ
<
Flßt_t
>& 
v
, Flßt_ˆ
f
 )

540 
UIÁ_t
 
	gi
=0; i<
	gv
.
size
();i++èv[
i
]*=
f
;

549 
	gTMVA
::
ToŞs
::
U£fulSÜtAsûndšg
Ğ
¡d
::
veùÜ
<veùÜ<
DoubË_t
> >& 
v
, std::veùÜ<
TSŒšg
>* 
vs
 ){

550 
UIÁ_t
 
nA¼ays
=
v
.
size
();

551 
DoubË_t
 
	g‹mp
;

552 ià(
	gnA¼ays
 > 0) {

553 
UIÁ_t
 
	gsizeoç¼ay
=
v
[0].
size
();

554 
UIÁ_t
 
	gi
=0; i<
	gsizeoç¼ay
; i++) {

555 
UIÁ_t
 
	gj
=
sizeoç¼ay
-1; j>
	gi
; j--) {

556 ià(
	gv
[0][
j
-1] > v[0][j]) {

557 
UIÁ_t
 
	gk
=0; k< 
	gnA¼ays
; k++) {

558 
	g‹mp
 = 
v
[
k
][
j
-1]; 
	gv
[k][j-1] = v[k][j]; v[k][j] = 
‹mp
;

560 ià(
	gnuÎ±r
 !ğ
vs
) {

561 
TSŒšg
 
‹mps
 = (*
vs
)[
j
-1]; (*
	gvs
)[j-1] = (*vs)[j]; (*vs)[j] =emps;

575 
	gTMVA
::
ToŞs
::
U£fulSÜtDesûndšg
Ğ
¡d
::
veùÜ
<¡d::veùÜ<
DoubË_t
> >& 
v
, std::veùÜ<
TSŒšg
>* 
vs
 )

577 
UIÁ_t
 
nA¼ays
=
v
.
size
();

578 
DoubË_t
 
	g‹mp
;

579 ià(
	gnA¼ays
 > 0) {

580 
UIÁ_t
 
	gsizeoç¼ay
=
v
[0].
size
();

581 
UIÁ_t
 
	gi
=0; i<
	gsizeoç¼ay
; i++) {

582 
UIÁ_t
 
	gj
=
sizeoç¼ay
-1; j>
	gi
; j--) {

583 ià(
	gv
[0][
j
-1] < v[0][j]) {

584 
UIÁ_t
 
	gk
=0; k< 
	gnA¼ays
; k++) {

585 
	g‹mp
 = 
v
[
k
][
j
-1]; 
	gv
[k][j-1] = v[k][j]; v[k][j] = 
‹mp
;

587 ià(
	gnuÎ±r
 !ğ
vs
) {

588 
TSŒšg
 
‹mps
 = (*
vs
)[
j
-1]; (*
	gvs
)[j-1] = (*vs)[j]; (*vs)[j] =emps;

600 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$G‘Mutu®InfÜm©iÚ
ĞcÚ¡ 
TH2F
& 
h_
 )

602 
DoubË_t
 
hi
 = 
h_
.
	`IÁeg¿l
();

603 ià(
hi
 == 0)  -1;

606 
TH2F
 
	`h
Ğ
h_
 );

607 
h
.
	`RebšX
(2);

608 
h
.
	`RebšY
(2);

610 
DoubË_t
 
mutu®Info
 = 0.;

611 
IÁ_t
 
maxBšX
 = 
h
.
	`G‘NbšsX
();

612 
IÁ_t
 
maxBšY
 = 
h
.
	`G‘NbšsY
();

613 
IÁ_t
 
x
 = 1; x <ğ
maxBšX
; x++) {

614 
IÁ_t
 
y
 = 1; y <ğ
maxBšY
; y++) {

615 
DoubË_t
 
p_xy
 = 
h
.
	`G‘BšCÚ‹Á
(
x
,
y
)/
hi
;

616 
DoubË_t
 
p_x
 = 
h
.
	`IÁeg¿l
(
x
,x,1,
maxBšY
)/
hi
;

617 
DoubË_t
 
p_y
 = 
h
.
	`IÁeg¿l
(1,
maxBšX
,
y
,y)/
hi
;

618 ià(
p_x
 > 0. && 
p_y
 > 0. && 
p_xy
 > 0.){

619 
mutu®Info
 +ğ
p_xy
*
TM©h
::
	`Log
Õ_xy / (
p_x
 * 
p_y
));

624  
mutu®Info
;

625 
	}
}

631 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$G‘CÜ»ÏtiÚR©io
ĞcÚ¡ 
TH2F
& 
h_
 )

633 
DoubË_t
 
hi
 = 
h_
.
	`IÁeg¿l
();

634 ià(
hi
 == 0.)  -1;

637 
TH2F
 
	`h
Ğ
h_
 );

638 
h
.
	`RebšX
(2);

639 
h
.
	`RebšY
(2);

641 
DoubË_t
 
cÜrR©io
 = 0.;

642 
DoubË_t
 
y_m—n
 = 
h
.
	`ProjeùiÚY
()->
	`G‘M—n
();

643 
IÁ_t
 
ix
=1; ix<=
h
.
	`G‘NbšsX
(); ix++) {

644 
cÜrR©io
 +ğ(
h
.
	`IÁeg¿l
(
ix
,ix,1,h.
	`G‘NbšsY
())/
hi
)*
	`pow
((
	`G‘YM—n_bšX
(h,ix)-
y_m—n
),2);

646 
cÜrR©io
 /ğ
	`pow
(
h
.
	`ProjeùiÚY
()->
	`G‘RMS
(),2);

647  
cÜrR©io
;

648 
	}
}

653 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$G‘YM—n_bšX
ĞcÚ¡ 
TH2
& 
h
, 
IÁ_t
 
bš_x
 )

655 ià(
h
.
	`IÁeg¿l
(
bš_x
,bš_x,1,h.
	`G‘NbšsY
()) == 0.) { 0;}

656 
DoubË_t
 
y_bš_m—n
 = 0.;

657 
TH1
* 
py
 = 
h
.
	`ProjeùiÚY
();

658 
IÁ_t
 
y
 = 1; y <ğ
h
.
	`G‘NbšsY
(); y++){

659 
y_bš_m—n
 +ğ
h
.
	`G‘BšCÚ‹Á
(
bš_x
,
y
)*
py
->
	`G‘BšC’‹r
(y);

661 
y_bš_m—n
 /ğ
h
.
	`IÁeg¿l
(
bš_x
,bš_x,1,h.
	`G‘NbšsY
());

662  
y_bš_m—n
;

663 
	}
}

668 
TH2F
* 
	gTMVA
::
ToŞs
::
	$T¿n¥o£Hi¡
ĞcÚ¡ 
TH2F
& 
h
 )

671 ià(
h
.
	`G‘NbšsX
(è!ğh.
	`G‘NbšsY
()) {

672 
	`Log
(è<< 
kFATAL
 << "<T¿n¥o£Hi¡> cªnÙ¿n¥o£‚Ú-quad¿tiøhi¡og¿m" << 
Endl
;

675 
TH2F
 *
Œª¥o£dHi¡o
 = 
Ãw
 
	`TH2F
Ğ
h
 );

676 
IÁ_t
 
ix
=1; ix <ğ
h
.
	`G‘NbšsX
(); ix++){

677 
IÁ_t
 
iy
=1; iy <ğ
h
.
	`G‘NbšsY
(); iy++){

678 
Œª¥o£dHi¡o
->
	`S‘BšCÚ‹Á
(
iy
,
ix
,
h
.
	`G‘BšCÚ‹Á
(ix,iy));

683 
DoubË_t
 
¡©s_Şd
[7];

684 
DoubË_t
 
¡©s_Ãw
[7];

686 
h
.
	`G‘Sts
(
¡©s_Şd
);

687 
¡©s_Ãw
[0] = 
¡©s_Şd
[0];

688 
¡©s_Ãw
[1] = 
¡©s_Şd
[1];

689 
¡©s_Ãw
[2] = 
¡©s_Şd
[4];

690 
¡©s_Ãw
[3] = 
¡©s_Şd
[5];

691 
¡©s_Ãw
[4] = 
¡©s_Şd
[2];

692 
¡©s_Ãw
[5] = 
¡©s_Şd
[3];

693 
¡©s_Ãw
[6] = 
¡©s_Şd
[6];

694 
Œª¥o£dHi¡o
->
	`PutSts
(
¡©s_Ãw
);

696  
Œª¥o£dHi¡o
;

697 
	}
}

702 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$CheckFÜS’tO±iÚ
ĞcÚ¡ 
TSŒšg
& 
cs
 ) const

704 
BoŞ_t
 
isS’t
 = 
kFALSE
;

706 
TSŒšg
 
	`s
Ğ
cs
 );

707 
s
.
	`ToLow”
();

708 
s
.
	`R•ÏûAÎ
(" ","");

709 ià(
s
.
	`CÚšs
("silent") && !s.Contains("silent=f")) {

710 ià(!
s
.
	`CÚšs
("!s’t"è|| s.CÚšs("s’tñ")è
isS’t
 = 
kTRUE
;

713  
isS’t
;

714 
	}
}

719 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$CheckFÜV”bo£O±iÚ
ĞcÚ¡ 
TSŒšg
& 
cs
 ) const

721 
BoŞ_t
 
isV”bo£
 = 
kFALSE
;

723 
TSŒšg
 
	`s
Ğ
cs
 );

724 
s
.
	`ToLow”
();

725 
s
.
	`R•ÏûAÎ
(" ","");

726 
¡d
::
veùÜ
<
TSŒšg
> 
v
 = 
	`S¶™SŒšg
Ğ
s
, ':' );

727 
¡d
::
veùÜ
<
TSŒšg
>::
™”©Ü
 
™
 = 
v
.
	`begš
(); iˆ!ğv.
	`’d
(); it++) {

728 ià((*
™
 =ğ"v" || *™ =ğ"v”bo£"è&& !™->
	`CÚšs
("!")è
isV”bo£
 = 
kTRUE
;

731  
isV”bo£
;

732 
	}
}

737 
	gTMVA
::
ToŞs
::
U£fulSÜtDesûndšg
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
v
 )

739 
veùÜ
< veùÜ<
DoubË_t
> > 
v‹mp
;

740 
	gv‹mp
.
push_back
(
v
);

741 
U£fulSÜtDesûndšg
(
v‹mp
);

742 
	gv
 = 
v‹mp
[0];

748 
	gTMVA
::
ToŞs
::
U£fulSÜtAsûndšg
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
v
 )

750 
veùÜ
<veùÜ<
DoubË_t
> > 
v‹mp
;

751 
	gv‹mp
.
push_back
(
v
);

752 
U£fulSÜtAsûndšg
(
v‹mp
);

753 
	gv
 = 
v‹mp
[0];

759 
IÁ_t
 
	gTMVA
::
ToŞs
::
G‘IndexMaxEËm’t
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
v
 )

761 ià(
v
.
em±y
())  -1;

763 
IÁ_t
 
	gpos
=0; 
DoubË_t
 
	gmx
=
v
[0];

764 
UIÁ_t
 
	gi
=0; i<
	gv
.
size
(); i++){

765 ià(
	gv
[
i
] > 
	gmx
){

766 
	gmx
=
v
[
i
];

767 
	gpos
=
i
;

770  
	gpos
;

776 
IÁ_t
 
	gTMVA
::
ToŞs
::
G‘IndexMšEËm’t
Ğ
¡d
::
veùÜ
<
DoubË_t
>& 
v
 )

778 ià(
v
.
em±y
())  -1;

780 
IÁ_t
 
	gpos
=0; 
DoubË_t
 
	gmn
=
v
[0];

781 
UIÁ_t
 
	gi
=0; i<
	gv
.
size
(); i++){

782 ià(
	gv
[
i
] < 
	gmn
){

783 
	gmn
=
v
[
i
];

784 
	gpos
=
i
;

787  
	gpos
;

795 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$CÚšsReguÏrEx´essiÚ
ĞcÚ¡ 
TSŒšg
& 
s
 )

797 
BoŞ_t
 
»guÏr
 = 
kFALSE
;

798 
IÁ_t
 
i
 = 0; i < 
ToŞs
::
fRegexp
.
	`L’gth
(); i++)

799 ià(
s
.
	`CÚšs
Ğ
ToŞs
::
fRegexp
[
i
] )è{ 
»guÏr
 = 
kTRUE
; ; }

801  
»guÏr
;

802 
	}
}

809 
TSŒšg
 
	gTMVA
::
ToŞs
::
	$R•ÏûReguÏrEx´essiÚs
ĞcÚ¡ 
TSŒšg
& 
s
, cÚ¡ TSŒšg& 
r
 )

811 
TSŒšg
 
¢ew
 = 
s
;

812 
IÁ_t
 
i
 = 0; i < 
ToŞs
::
fRegexp
.
	`L’gth
(); i++)

813 
¢ew
.
	`R•ÏûAÎ
Ğ
ToŞs
::
fRegexp
[
i
], 
r
 );

815 
¢ew
.
	`R•ÏûAÎ
Ğ"::", 
r
 );

816 
¢ew
.
	`R•ÏûAÎ
( "$", "_S_" );

817 
¢ew
.
	`R•ÏûAÎ
( "&", "_A_" );

818 
¢ew
.
	`R•ÏûAÎ
( "%", "_MOD_" );

819 
¢ew
.
	`R•ÏûAÎ
( "|", "_O_" );

820 
¢ew
.
	`R•ÏûAÎ
( "*", "_T_" );

821 
¢ew
.
	`R•ÏûAÎ
( "/", "_D_" );

822 
¢ew
.
	`R•ÏûAÎ
( "+", "_P_" );

823 
¢ew
.
	`R•ÏûAÎ
( "-", "_M_" );

824 
¢ew
.
	`R•ÏûAÎ
( " ", "_" );

825 
¢ew
.
	`R•ÏûAÎ
( "[", "_" );

826 
¢ew
.
	`R•ÏûAÎ
( "]", "_" );

827 
¢ew
.
	`R•ÏûAÎ
( "=", "_E_" );

828 
¢ew
.
	`R•ÏûAÎ
( ">", "_GT_" );

829 
¢ew
.
	`R•ÏûAÎ
( "<", "_LT_" );

830 
¢ew
.
	`R•ÏûAÎ
( "(", "_" );

831 
¢ew
.
	`R•ÏûAÎ
( ")", "_" );

833  
¢ew
;

834 
	}
}

839 cÚ¡ 
	gTSŒšg
& 
	gTMVA
::
ToŞs
::
	$CŞÜ
ĞcÚ¡ 
TSŒšg
& 
c
 )

841 cÚ¡ 
TSŒšg
 
gCÌ_nÚe
 = "" ;

842 cÚ¡ 
TSŒšg
 
gCÌ_wh™e
 = "\033[1;37m";

843 cÚ¡ 
TSŒšg
 
gCÌ_bÏck
 = "\033[30m";

844 cÚ¡ 
TSŒšg
 
gCÌ_blue
 = "\033[34m";

845 cÚ¡ 
TSŒšg
 
gCÌ_»d
 = "\033[1;31m" ;

846 cÚ¡ 
TSŒšg
 
gCÌ_y–low
 = "\033[1;33m";

847 cÚ¡ 
TSŒšg
 
gCÌ_d¬k»d
 = "\033[31m";

848 cÚ¡ 
TSŒšg
 
gCÌ_d¬kg»’
 = "\033[32m";

849 cÚ¡ 
TSŒšg
 
gCÌ_d¬ky–low
 = "\033[33m";

851 cÚ¡ 
TSŒšg
 
gCÌ_bŞd
 = "\033[1m" ;

852 cÚ¡ 
TSŒšg
 
gCÌ_bÏck_b
 = "\033[30m" ;

853 cÚ¡ 
TSŒšg
 
gCÌ_lblue_b
 = "\033[1;34m" ;

854 cÚ¡ 
TSŒšg
 
gCÌ_cyª_b
 = "\033[0;36m" ;

855 cÚ¡ 
TSŒšg
 
gCÌ_lg»’_b
 = "\033[1;32m";

857 cÚ¡ 
TSŒšg
 
gCÌ_blue_bg
 = "\033[44m";

858 cÚ¡ 
TSŒšg
 
gCÌ_»d_bg
 = "\033[1;41m";

859 cÚ¡ 
TSŒšg
 
gCÌ_wh™eÚblue
 = "\033[1;44m";

860 cÚ¡ 
TSŒšg
 
gCÌ_wh™eÚg»’
 = "\033[1;42m";

861 cÚ¡ 
TSŒšg
 
gCÌ_g»y_bg
 = "\033[47m";

863 cÚ¡ 
TSŒšg
 
gCÌ_»£t
 = "\033[0m";

865 ià(!
	`gCÚfig
().
	`U£CŞÜ
()è 
gCÌ_nÚe
;

867 ià(
c
 =ğ"wh™e" )  
gCÌ_wh™e
;

868 ià(
c
 =ğ"blue" )  
gCÌ_blue
;

869 ià(
c
 =ğ"bÏck" )  
gCÌ_bÏck
;

870 ià(
c
 =ğ"lightblue"è 
gCÌ_cyª_b
;

871 ià(
c
 =ğ"y–low"è 
gCÌ_y–low
;

872 ià(
c
 =ğ"»d" )  
gCÌ_»d
;

873 ià(
c
 =ğ"d»d" )  
gCÌ_d¬k»d
;

874 ià(
c
 =ğ"dg»’"è 
gCÌ_d¬kg»’
;

875 ià(
c
 =ğ"lg»’b"è 
gCÌ_lg»’_b
;

876 ià(
c
 =ğ"dy–low"è 
gCÌ_d¬ky–low
;

878 ià(
c
 =ğ"bŞd"è 
gCÌ_bŞd
;

879 ià(
c
 =ğ"bbÏck"è 
gCÌ_bÏck_b
;

881 ià(
c
 =ğ"blue_bgd"è 
gCÌ_blue_bg
;

882 ià(
c
 =ğ"»d_bgd" )  
gCÌ_»d_bg
;

884 ià(
c
 =ğ"wh™e_Ú_blue" )  
gCÌ_wh™eÚblue
;

885 ià(
c
 =ğ"wh™e_Ú_g»’"è 
gCÌ_wh™eÚg»’
;

887 ià(
c
 =ğ"»£t"è 
gCÌ_»£t
;

889 
¡d
::
cout
 << "UnknowÀcŞÜ " << 
c
 << std::
’dl
;

890 
	`ex™
(1);

892  
gCÌ_nÚe
;

893 
	}
}

898 
	gTMVA
::
ToŞs
::
FÜm©‹dOuut
ĞcÚ¡ 
¡d
::
veùÜ
<
DoubË_t
>& 
v®ues
, cÚ¡ std::veùÜ<
TSŒšg
>& 
V
,

899 cÚ¡ 
TSŒšg
 
t™ËV¬s
, cÚ¡ TSŒšg 
t™ËV®ues
, 
MsgLogg”
& 
logg”
,

900 
TSŒšg
 
fÜm©
 )

903 
UIÁ_t
 
	gnv¬
 = 
V
.
size
();

904 ià((
	gUIÁ_t
)
	gv®ues
.
size
(è!ğ
nv¬
) {

905 
logg”
 << 
kFATAL
 << "<FormattedOutput> fatalƒrror with dimensions: "

906 << 
v®ues
.
size
(è<< " OR " << " !ğ" << 
nv¬
 << 
Endl
;

910 
UIÁ_t
 
	gmaxL
 = 7;

911 
	g¡d
::
veùÜ
<
UIÁ_t
> 
vL’gths
;

912 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; iv¬++è
	gmaxL
 = 
TM©h
::
Max
Ğ(UIÁ_t)
V
[
iv¬
].
L’gth
(), 
maxL
 );

913 
	gmaxL
 = 
TM©h
::
Max
Ğ(
UIÁ_t
)
t™ËV¬s
.
L’gth
(), 
maxL
 );

916 
UIÁ_t
 
	gmaxV
 = 7;

917 
	gmaxV
 = 
TM©h
::
Max
Ğ(
UIÁ_t
)
t™ËV®ues
.
L’gth
(è+ 1, 
maxL
 );

920 
UIÁ_t
 
	gş’
 = 
maxL
 + 
maxV
 + 3;

923 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

924 
	glogg”
 << 
	gEndl
;

927 
	glogg”
 << 
£tw
(
maxL
è<< 
	gt™ËV¬s
 << ":";

928 
	glogg”
 << 
£tw
(
maxV
+1è<< 
	gt™ËV®ues
 << ":";

929 
	glogg”
 << 
	gEndl
;

930 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

931 
	glogg”
 << 
	gEndl
;

934 
UIÁ_t
 
	gœow
=0; irow<
	gnv¬
; irow++) {

935 
	glogg”
 << 
£tw
(
maxL
è<< 
	gV
[
œow
] << ":";

936 
	glogg”
 << 
£tw
(
maxV
+1è<< 
FÜm
Ğ
fÜm©
.
D©a
(), 
v®ues
[
œow
] );

937 
	glogg”
 << 
	gEndl
;

941 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

942 
	glogg”
 << 
	gEndl
;

948 
	gTMVA
::
ToŞs
::
FÜm©‹dOuut
ĞcÚ¡ 
TM©rixD
& 
M
, cÚ¡ 
¡d
::
veùÜ
<
TSŒšg
>& 
V
, 
MsgLogg”
& 
logg”
 )

951 
UIÁ_t
 
	gnv¬
 = 
V
.
size
();

952 ià((
	gUIÁ_t
)
	gM
.
G‘NcŞs
(è!ğ
nv¬
 || (
UIÁ_t
)
M
.
G‘Nrows
() !=‚var) {

953 
logg”
 << 
kFATAL
 << "<FormattedOutput> fatalƒrror with dimensions: "

954 << 
M
.
G‘NcŞs
(è<< " OR " << M.
G‘Nrows
(è<< " !ğ" << 
nv¬
 << " ==>‡bÜt" << 
Endl
;

958 
UIÁ_t
 
	gmšL
 = 7;

959 
UIÁ_t
 
	gmaxL
 = 
mšL
;

960 
	g¡d
::
veùÜ
<
UIÁ_t
> 
vL’gths
;

961 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

962 
	gvL’gths
.
push_back
(
TM©h
::
Max
Ğ(
UIÁ_t
)
V
[
iv¬
].
L’gth
(), 
mšL
 ));

963 
	gmaxL
 = 
TM©h
::
Max
Ğ
vL’gths
.
back
(), 
maxL
 );

967 
UIÁ_t
 
	gş’
 = 
maxL
+1;

968 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnv¬
; icŞ++è
	gş’
 +ğ
vL’gths
[
icŞ
]+1;

971 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

972 
	glogg”
 << 
	gEndl
;

975 
	glogg”
 << 
£tw
(
maxL
+1) << " ";

976 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnv¬
; icŞ++è
	glogg”
 << 
£tw
(
vL’gths
[
icŞ
]+1è<< 
	gV
[icol];

977 
	glogg”
 << 
	gEndl
;

980 
UIÁ_t
 
	gœow
=0; irow<
	gnv¬
; irow++) {

981 
	glogg”
 << 
£tw
(
maxL
è<< 
	gV
[
œow
] << ":";

982 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnv¬
; icol++) {

983 
	glogg”
 << 
£tw
(
vL’gths
[
icŞ
]+1è<< 
FÜm
Ğ"%+1.3f", 
M
(
œow
,icol) );

985 
	glogg”
 << 
	gEndl
;

989 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

990 
	glogg”
 << 
	gEndl
;

996 
	gTMVA
::
ToŞs
::
FÜm©‹dOuut
ĞcÚ¡ 
TM©rixD
& 
M
,

997 cÚ¡ 
¡d
::
veùÜ
<
TSŒšg
>& 
v”t
, cÚ¡ std::veùÜ<TSŒšg>& 
hÜiz
,

998 
MsgLogg”
& 
logg”
 )

1001 
UIÁ_t
 
	gnvv¬
 = 
v”t
.
size
();

1002 
UIÁ_t
 
	gnhv¬
 = 
hÜiz
.
size
();

1005 
UIÁ_t
 
	gmšL
 = 7;

1006 
UIÁ_t
 
	gmaxL
 = 
mšL
;

1007 
	g¡d
::
veùÜ
<
UIÁ_t
> 
vL’gths
;

1008 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnvv¬
; ivar++) {

1009 
	gvL’gths
.
push_back
(
TM©h
::
Max
Ğ(
UIÁ_t
)
v”t
[
iv¬
].
L’gth
(), 
mšL
 ));

1010 
	gmaxL
 = 
TM©h
::
Max
Ğ
vL’gths
.
back
(), 
maxL
 );

1014 
UIÁ_t
 
	gmšLh
 = 7;

1015 
UIÁ_t
 
	gmaxLh
 = 
mšLh
;

1016 
	g¡d
::
veùÜ
<
UIÁ_t
> 
hL’gths
;

1017 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnhv¬
; ivar++) {

1018 
	ghL’gths
.
push_back
(
TM©h
::
Max
Ğ(
UIÁ_t
)
hÜiz
[
iv¬
].
L’gth
(), 
mšL
 ));

1019 
	gmaxLh
 = 
TM©h
::
Max
Ğ
hL’gths
.
back
(), 
maxLh
 );

1022 
UIÁ_t
 
	gş’
 = 
maxLh
+1;

1023 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnhv¬
; icŞ++è
	gş’
 +ğ
hL’gths
[
icŞ
]+1;

1026 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

1027 
	glogg”
 << 
	gEndl
;

1030 
	glogg”
 << 
£tw
(
maxL
+1) << " ";

1031 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnhv¬
; icŞ++è
	glogg”
 << 
£tw
(
hL’gths
[
icŞ
]+1è<< 
	ghÜiz
[icol];

1032 
	glogg”
 << 
	gEndl
;

1035 
UIÁ_t
 
	gœow
=0; irow<
	gnvv¬
; irow++) {

1036 
	glogg”
 << 
£tw
(
maxL
è<< 
	gv”t
[
œow
] << ":";

1037 
UIÁ_t
 
	gicŞ
=0; icŞ<
	gnhv¬
; icol++) {

1038 
	glogg”
 << 
£tw
(
hL’gths
[
icŞ
]+1è<< 
FÜm
Ğ"%+1.3f", 
M
(
œow
,icol) );

1040 
	glogg”
 << 
	gEndl
;

1044 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
	glogg”
 << "-";

1045 
	glogg”
 << 
	gEndl
;

1051 
TSŒšg
 
	gTMVA
::
ToŞs
::
	$G‘XT™ËW™hUn™
ĞcÚ¡ 
TSŒšg
& 
t™Ë
, cÚ¡ TSŒšg& 
un™
 )

1053  ( 
un™
 =ğ"" ? 
t™Ë
 : (itle + " [" + unit + "]" ) );

1054 
	}
}

1059 
TSŒšg
 
	gTMVA
::
ToŞs
::
	$G‘YT™ËW™hUn™
ĞcÚ¡ 
TH1
& 
h
, cÚ¡ 
TSŒšg
& 
un™
, 
BoŞ_t
 
nÜm®i£d
 )

1061 
TSŒšg
 
»tv®
 = ( 
nÜm®i£d
 ? "(1/N) " : "" );

1062 
»tv®
 +ğ
	`FÜm
Ğ"dN_{ }/^{ }%.3g %s", 
h
.
	`G‘Xaxis
()->
	`G‘BšWidth
(1), 
un™
.
	`D©a
() );

1063  
»tv®
;

1064 
	}
}

1069 
	gTMVA
::
ToŞs
::
	$Wr™eFlßtArb™¿ryP»cisiÚ
Ğ
Flßt_t
 
v®
, 
o¡»am
& 
os
 )

1071 
os
 << 
v®
 << " :: ";

1072 * 
c
 = &
v®
;

1073 
i
=0; i<4; i++) {

1074 
IÁ_t
 
ic
 = *((*)
c
+
i
)-'\0';

1075 ià(
ic
<0) ic+=256;

1076 
os
 << 
ic
 << " ";

1078 
os
 << ":: ";

1079 
	}
}

1084 
	gTMVA
::
ToŞs
::
	$R—dFlßtArb™¿ryP»cisiÚ
Ğ
Flßt_t
& 
v®
, 
i¡»am
& 
is
 )

1086 
Flßt_t
 
a
 = 0;

1087 
is
 >> 
a
;

1088 
TSŒšg
 
dn
;

1089 
is
 >> 
dn
;

1090 
IÁ_t
 
c
[4];

1091 * 
­
 = &
a
;

1092 
i
=0; i<4; i++) {

1093 
is
 >> 
c
[
i
];

1094 *((*)
­
+
i
èğ'\0'+
c
[i];

1096 
is
 >> 
dn
;

1097 
v®
 = 
a
;

1098 
	}
}

1105 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$HasA‰r
Ğ* 
node
, cÚ¡ * 
©ŒÇme
 )

1107  
	`xmËngše
().
	`HasA‰r
(
node
, 
©ŒÇme
);

1108 
	}
}

1113 
	gTMVA
::
ToŞs
::
	$R—dA‰r
Ğ* 
node
, cÚ¡ * 
©ŒÇme
, 
TSŒšg
& 
v®ue
 )

1115 ià(!
	`HasA‰r
(
node
, 
©ŒÇme
)) {

1116 cÚ¡ * 
nod’ame
 = 
	`xmËngše
().
	`G‘NodeName
(
node
);

1117 
	`Log
(è<< 
kFATAL
 << "TryšgØ»ad‚Ú-exi¡šg‡‰ribu‹ '" << 
©ŒÇme
 << "' from xmÈnod'" << 
nod’ame
 << "'" << 
Endl
;

1119 cÚ¡ * 
v®
 = 
	`xmËngše
().
	`G‘A‰r
(
node
, 
©ŒÇme
);

1120 
v®ue
 = 
	`TSŒšg
(
v®
);

1121 
	}
}

1126 
	gTMVA
::
ToŞs
::
	$AddA‰r
Ğ* 
node
, cÚ¡ * 
©ŒÇme
, cÚ¡ * 
v®ue
 )

1128 ifĞ
node
 == 0 ) ;

1129 
	`gToŞs
().
	`xmËngše
().
	`NewA‰r
(
node
, 0, 
©ŒÇme
, 
v®ue
 );

1130 
	}
}

1135 * 
	gTMVA
::
ToŞs
::
	$AddChd
Ğ* 
·»Á
, cÚ¡ * 
chdÇme
, cÚ¡ * 
cÚ‹Á
, 
boŞ
 
isRoÙNode
 )

1137 ifĞ!
isRoÙNode
 && 
·»Á
 == 0 )  0;

1138  
	`gToŞs
().
	`xmËngše
().
	`NewChd
(
·»Á
, 0, 
chdÇme
, 
cÚ‹Á
);

1139 
	}
}

1143 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$AddComm’t
Ğ* 
node
, cÚ¡ * 
comm’t
 ) {

1144 ifĞ
node
 =ğ0 )  
kFALSE
;

1145  
	`gToŞs
().
	`xmËngše
().
	`AddComm’t
(
node
, 
comm’t
);

1146 
	}
}

1151 * 
	gTMVA
::
ToŞs
::
	$G‘P¬’t
Ğ* 
chd
)

1153 * 
·r
 = 
	`xmËngše
().
	`G‘P¬’t
(
chd
);

1155  
·r
;

1156 
	}
}

1161 * 
	gTMVA
::
ToŞs
::
	$G‘Chd
Ğ* 
·»Á
, cÚ¡ * 
chdÇme
 )

1163 * 
ch
 = 
	`xmËngše
().
	`G‘Chd
(
·»Á
);

1164 ià(
chdÇme
 != 0) {

1165 
ch
!=0 && 
	`¡rcmp
(
	`xmËngše
().
	`G‘NodeName
(ch),
chdÇme
è!ğ0èch = xmËngše().
	`G‘Next
(ch);

1167  
ch
;

1168 
	}
}

1173 * 
	gTMVA
::
ToŞs
::
	$G‘NextChd
Ğ* 
´evchd
, cÚ¡ * 
chdÇme
 )

1175 * 
ch
 = 
	`xmËngše
().
	`G‘Next
(
´evchd
);

1176 ià(
chdÇme
 != 0) {

1177 
ch
!=0 && 
	`¡rcmp
(
	`xmËngše
().
	`G‘NodeName
(ch),
chdÇme
)!=0èch = xmËngše().
	`G‘Next
(ch);

1179  
ch
;

1180 
	}
}

1185 cÚ¡ * 
	gTMVA
::
ToŞs
::
	$G‘CÚ‹Á
Ğ* 
node
 )

1187  
	`xmËngše
().
	`G‘NodeCÚ‹Á
(
node
);

1188 
	}
}

1193 cÚ¡ * 
	gTMVA
::
ToŞs
::
	$G‘Name
Ğ* 
node
 )

1195  
	`xmËngše
().
	`G‘NodeName
(
node
);

1196 
	}
}

1201 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$AddRawLše
Ğ* 
node
, cÚ¡ * 
¿w
 )

1203  
	`xmËngše
().
	`AddRawLše
Ğ
node
, 
¿w
 );

1204 
	}
}

1210 
	g¡d
::
veùÜ
<
TSŒšg
> 
TMVA
::
ToŞs
::
	$S¶™SŒšg
(cÚ¡ 
TSŒšg
& 
theO±
, cÚ¡ 
£·¿tÜ
 ) const

1212 
¡d
::
veùÜ
<
TSŒšg
> 
¥l™V
;

1213 
TSŒšg
 
	`¥l™O±
(
theO±
);

1214 
¥l™O±
.
	`R•ÏûAÎ
("\n"," ");

1215 
¥l™O±
 = s¶™O±.
	`SŒ
(
TSŒšg
::
kBÙh
,
£·¿tÜ
);

1216 
¥l™O±
.
	`L’gth
()>0) {

1217 iàĞ!
¥l™O±
.
	`CÚšs
(
£·¿tÜ
) ) {

1218 
¥l™V
.
	`push_back
(
¥l™O±
);

1222 
TSŒšg
 
toSave
 = 
	`¥l™O±
(0,
¥l™O±
.
	`Fœ¡
(
£·¿tÜ
));

1223 
¥l™V
.
	`push_back
(
toSave
);

1224 
¥l™O±
 = 
	`¥l™O±
(¥l™O±.
	`Fœ¡
(
£·¿tÜ
),¥l™O±.
	`L’gth
());

1226 
¥l™O±
 = s¶™O±.
	`SŒ
(
TSŒšg
::
kL—dšg
,
£·¿tÜ
);

1228  
¥l™V
;

1229 
	}
}

1234 
TSŒšg
 
	gTMVA
::
ToŞs
::
	$SŒšgFromIÁ
Ğ
LÚg_t
 
i
 )

1236 
¡d
::
¡ršg¡»am
 
s
;

1237 
s
 << 
i
;

1238  
	`TSŒšg
(
s
.
	`¡r
().
	`c_¡r
());

1239 
	}
}

1244 
TSŒšg
 
	gTMVA
::
ToŞs
::
	$SŒšgFromDoubË
Ğ
DoubË_t
 
d
 )

1246 
¡d
::
¡ršg¡»am
 
s
;

1247 
s
 << 
	`FÜm
Ğ"%5.8e", 
d
 );

1248  
	`TSŒšg
(
s
.
	`¡r
().
	`c_¡r
());

1249 
	}
}

1254 
	gTMVA
::
ToŞs
::
	$Wr™eTM©rixDToXML
Ğ* 
node
, cÚ¡ * 
Çme
, 
TM©rixD
* 
m©
 )

1256 * 
m©node
 = 
	`xmËngše
().
	`NewChd
(
node
, 0, 
Çme
);

1257 
	`xmËngše
().
	`NewA‰r
(
m©node
,0,"Rows", 
	`SŒšgFromIÁ
(
m©
->
	`G‘Nrows
()) );

1258 
	`xmËngše
().
	`NewA‰r
(
m©node
,0,"CŞumns", 
	`SŒšgFromIÁ
(
m©
->
	`G‘NcŞs
()) );

1259 
¡d
::
¡ršg¡»am
 
s
;

1260 
IÁ_t
 
row
 = 0;„ow<
m©
->
	`G‘Nrows
();„ow++) {

1261 
IÁ_t
 
cŞ
 = 0; cŞ<
m©
->
	`G‘NcŞs
(); col++) {

1262 
s
 << 
	`FÜm
Ğ"%5.15", (*
m©
)[
row
][
cŞ
] );

1265 
	`xmËngše
().
	`AddRawLše
Ğ
m©node
, 
s
.
	`¡r
().
	`c_¡r
() );

1266 
	}
}

1270 
	gTMVA
::
ToŞs
::
	$Wr™eTVeùÜDToXML
Ğ* 
node
, cÚ¡ * 
Çme
, 
TVeùÜD
* 
vec
 )

1272 
TM©rixD
 
	`m©
(1,
vec
->
	`G‘NoEËm’ts
(),&((*vec)[0]));

1273 
	`Wr™eTM©rixDToXML
Ğ
node
, 
Çme
, &
m©
 );

1274 
	}
}

1278 
	gTMVA
::
ToŞs
::
	$R—dTVeùÜDFromXML
Ğ* 
node
, cÚ¡ * 
Çme
, 
TVeùÜD
* 
vec
 )

1280 
TM©rixD
 
	`m©
(1,
vec
->
	`G‘NoEËm’ts
(),&((*vec)[0]));

1281 
	`R—dTM©rixDFromXML
Ğ
node
, 
Çme
, &
m©
 );

1282 
i
=0;i<
vec
->
	`G‘NoEËm’ts
();++iè(*vec)[i] = 
m©
[0][i];

1283 
	}
}

1287 
	gTMVA
::
ToŞs
::
	$R—dTM©rixDFromXML
Ğ* 
node
, cÚ¡ * 
Çme
, 
TM©rixD
* 
m©
 )

1289 ià(
	`¡rcmp
(
	`xmËngše
().
	`G‘NodeName
(
node
),
Çme
)!=0){

1290 
	`Log
(è<< 
kWARNING
 << "Possible Error: Name of matrix in weight file"

1291 << " dÛ nÙ m©ch‚amoàm©rix…as£d‡ ¬gum’t!" << 
Endl
;

1293 
IÁ_t
 
Äows
, 
ncŞs
;

1294 
	`R—dA‰r
Ğ
node
, "Rows", 
Äows
 );

1295 
	`R—dA‰r
Ğ
node
, "CŞumns", 
ncŞs
 );

1296 ià(
m©
->
	`G‘Nrows
(è!ğ
Äows
 || m©->
	`G‘NcŞs
(è!ğ
ncŞs
){

1297 
	`Log
(è<< 
kWARNING
 << "Possible Error: Dimension of matrix in weight file"

1298 << " dÛ nÙ m©ch dim’siÚ oàm©rix…as£d‡ ¬gum’t!" << 
Endl
;

1299 
m©
->
	`ResizeTo
(
Äows
,
ncŞs
);

1301 cÚ¡ * 
cÚ‹Á
 = 
	`xmËngše
().
	`G‘NodeCÚ‹Á
(
node
);

1302 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

1303 
IÁ_t
 
row
 = 0;„ow<
Äows
;„ow++) {

1304 
IÁ_t
 
cŞ
 = 0; cŞ<
ncŞs
; col++) {

1305 
s
 >> (*
m©
)[
row
][
cŞ
];

1308 
	}
}

1313 
	gTMVA
::
ToŞs
::
	$TMVAW–comeMes§ge
()

1315 
¡d
::
cout
 << std::
’dl
;

1316 
¡d
::
cout
 << 
	`CŞÜ
("bŞd"è<< "TMVA -- ToŞk™ fÜ MuÉiv¬Ÿ‹ D©¨AÇlysis" << CŞÜ("»£t"è<< std::
’dl
;

1317 
¡d
::
cout
 << " " << "V”siÚ " << 
TMVA_RELEASE
 << ", " << 
TMVA_RELEASE_DATE
 << std::
’dl
;

1318 
¡d
::
cout
 << " " << "Cİyrighˆ(Cè2005-2010 CERN, MPI-K Heid–b”g, U oàBÚÀªd ViùÜŸ" << std::
’dl
;

1319 
¡d
::
cout
 << " " << "Hom·ge: h‰p://tmva.sf.Ãt" << std::
’dl
;

1320 
¡d
::
cout
 << " " << "C™©iÚ info: h‰p://tmva.sf.Ãt/c™eTMVA.html" << std::
’dl
;

1321 
¡d
::
cout
 << " " << "Liûn£: h‰p://tmva.sf.Ãt/LICENSE" << std::
’dl
 << std::endl;

1322 
	}
}

1327 
	gTMVA
::
ToŞs
::
	$TMVAV”siÚMes§ge
Ğ
MsgLogg”
& 
logg”
 )

1329 
logg”
 << "___________TMVA V”siÚ " << 
TMVA_RELEASE
 << ", " << 
TMVA_RELEASE_DATE


1330 << "" << 
Endl
;

1331 
	}
}

1336 
	gTMVA
::
ToŞs
::
	$ROOTV”siÚMes§ge
Ğ
MsgLogg”
& 
logg”
 )

1338 cÚ¡ * cÚ¡ 
mÚths
[] = { "Jan","Feb","Mar","Apr","May",

1341 
IÁ_t
 
id©qq
 = 
gROOT
->
	`G‘V”siÚD©e
();

1342 
IÁ_t
 
iday
 = 
id©qq
%100;

1343 
IÁ_t
 
imÚth
 = (
id©qq
/100)%100;

1344 
IÁ_t
 
iy—r
 = (
id©qq
/10000);

1345 
TSŒšg
 
v”siÚD©e
 = 
	`FÜm
("% %d, %4d",
mÚths
[
imÚth
-1],
iday
,
iy—r
);

1347 
logg”
 << 
kHEADER
 ;

1348 
logg”
 << "You‡»„uÂšg ROOT V”siÚ: " << 
gROOT
->
	`G‘V”siÚ
(è<< ", " << 
v”siÚD©e
 << 
Endl
;

1349 
	}
}

1355 
	gTMVA
::
ToŞs
::
	$TMVAW–comeMes§ge
Ğ
MsgLogg”
& 
logg”
, 
EW–comeMes§ge
 
msgTy³
 )

1357 
msgTy³
) {

1359 
kSnd¬dW–comeMsg
:

1360 
logg”
 << 
	`CŞÜ
("wh™e"è<< "TMVA -- ToŞk™ fÜ MuÉiv¬Ÿ‹ AÇlysis" << CŞÜ("»£t"è<< 
Endl
;

1361 
logg”
 << "Cİyrighˆ(Cè2005-2006 CERN, LAPP & MPI-K Heid–b”g‡nd ViùÜŸ U." << 
Endl
;

1362 
logg”
 << "Hom·gh‰p://tmva.sourûfÜge.Ãt" << 
Endl
;

1363 
logg”
 << "AÎ„ight »£rved,…Ëa£„—d h‰p://tmva.sf.Ãt/liûn£.txt" << 
Endl
 << Endl;

1366 
kIsom‘ricW–comeMsg
:

1367 
logg”
 << " ___ ___ ___ ___ " << 
Endl
;

1368 
logg”
 << " /\\ \\ /\\__\\ /\\__\\ /\\ \\ " << 
Endl
;

1369 
logg”
 << " \\:\\ \\ /::| | /:/ / /::\\ \\ " << 
Endl
;

1370 
logg”
 << " \\:\\ \\ /:|:| | /:/ / /:/\\:\\ \\ " << 
Endl
;

1371 
logg”
 << " /::\\ \\ /:/|:|__|__ /:/__/ ___ /::\\~\\:\\ \\ " << 
Endl
;

1372 
logg”
 << " /:/\\:\\__\\ /:/ |::::\\__\\ |:| | /\\__\\ /:/\\:\\ \\:\\__\\ " << 
Endl
;

1373 
logg”
 << " /:/ \\/__/ \\/__/~~/:/ / |:| |/:/ / \\/__\\:\\/:/ / " << 
Endl
;

1374 
logg”
 << "/:/ / /:/ / |:|__/:/ / \\::/ / " << 
Endl
;

1375 
logg”
 << "\\/__/ /:/ / \\::::/__/ /:/ / " << 
Endl
;

1376 
logg”
 << " /:/ / ~~~~ /:/ / " << 
Endl
;

1377 
logg”
 << " \\/__/ \\/__/ " << 
Endl
 << Endl;

1380 
kBlockW–comeMsg
:

1381 
logg”
 << 
Endl
;

1382 
logg”
 << "_|_|_|_|_| _| _| _| _| _|_| " << 
Endl
;

1383 
logg”
 << " _| _|_| _|_| _| _| _| _| " << 
Endl
;

1384 
logg”
 << " _| _| _| _| _| _| _|_|_|_| " << 
Endl
;

1385 
logg”
 << " _| _| _| _| _| _| _| " << 
Endl
;

1386 
logg”
 << " _| _| _| _| _| _| " << 
Endl
 << Endl;

1389 
kL—nW–comeMsg
:

1390 
logg”
 << 
Endl
;

1391 
logg”
 << "_/_/_/_/_/ _/ _/ _/ _/ _/_/ " << 
Endl
;

1392 
logg”
 << " _/ _/_/ _/_/ _/ _/ _/ _/ " << 
Endl
;

1393 
logg”
 << " _/ _/ _/ _/ _/ _/ _/_/_/_/ " << 
Endl
;

1394 
logg”
 << " _/ _/ _/ _/ _/ _/ _/ " << 
Endl
;

1395 
logg”
 << "_/ _/ _/ _/ _/ _/ " << 
Endl
 << Endl;

1398 
kLogoW–comeMsg
:

1399 
logg”
 << 
Endl
;

1400 
logg”
 << "_/_/_/_/_/ _| _| _| _| _|_| " << 
Endl
;

1401 
logg”
 << " _/ _|_| _|_| _| _| _| _| " << 
Endl
;

1402 
logg”
 << " _/ _| _| _| _| _| _|_|_|_| " << 
Endl
;

1403 
logg”
 << " _/ _| _| _| _| _| _| " << 
Endl
;

1404 
logg”
 << "_/ _| _| _| _| _| " << 
Endl
 << Endl;

1407 
kSm®l1W–comeMsg
:

1408 
logg”
 << " _____ __ ____ ___ " << 
Endl
;

1409 
logg”
 << "|_ _| \\/ \\ \\ / /_\\ " << 
Endl
;

1410 
logg”
 << " | | | |\\/| |\\ V / _ \\ " << 
Endl
;

1411 
logg”
 << " |_| |_| |_| \\_/_/ \\_\\" << 
Endl
 << Endl;

1414 
kSm®l2W–comeMsg
:

1415 
logg”
 << " _____ __ ____ ___ " << 
Endl
;

1416 
logg”
 << "|_ _| \\/ \\ \\ / / \\ " << 
Endl
;

1417 
logg”
 << " | | | |\\/| |\\ \\ / / _ \\ " << 
Endl
;

1418 
logg”
 << " | | | | | | \\ V / ___ \\ " << 
Endl
;

1419 
logg”
 << " |_| |_| |_| \\_/_/ \\_\\ " << 
Endl
 << Endl;

1422 
kOrigš®W–comeMsgCŞÜ
:

1423 
logg”
 << 
kINFO
 << "" << 
	`CŞÜ
("red")

1424 << "_______________________________________" << 
	`CŞÜ
("»£t"è<< 
Endl
;

1425 
logg”
 << 
kINFO
 << "" << 
	`CŞÜ
("blue")

1426 << 
	`CŞÜ
("red_bgd") << Color("bwhite") << " // " << Color("reset")

1427 << 
	`CŞÜ
("white") << Color("blue_bgd")

1428 << "|\\ /|| \\ // /\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\ " << 
	`CŞÜ
("»£t"è<< 
Endl
;

1429 
logg”
 << 
kINFO
 << ""<< 
	`CŞÜ
("blue")

1430 << 
	`CŞÜ
("red_bgd") << Color("white") << "// " << Color("reset")

1431 << 
	`CŞÜ
("white") << Color("blue_bgd")

1432 << "| \\/ || \\// /--\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\" << 
	`CŞÜ
("»£t"è<< 
Endl
;

1435 
kOrigš®W–comeMsgBW
:

1436 
logg”
 << 
kINFO
 << ""

1437 << "_______________________________________" << 
Endl
;

1438 
logg”
 << 
kINFO
 << " // "

1439 << "|\\ /|| \\ // /\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\ " << 
Endl
;

1440 
logg”
 << 
kINFO
 << "// "

1441 << "| \\/ || \\// /--\\\\\\\\\\\\\\\\\\\\\\\\ \\ \\ \\" << 
Endl
;

1445 
logg”
 << 
kFATAL
 << "unknowÀmes§gty³: " << 
msgTy³
 << 
Endl
;

1447 
	}
}

1452 
	gTMVA
::
ToŞs
::
	$TMVAC™©iÚ
Ğ
MsgLogg”
& 
logg”
, 
EC™©iÚ
 
c™Ty³
 )

1454 
c™Ty³
) {

1456 
kPÏšText
:

1457 
logg”
 << "A. HÛck”, P. S³ckmay”, J. S‹lz”, J. Th”h¯g, E. vÚ TÛºe, H. Voss" << 
Endl
;

1458 
logg”
 << "\"TMVA - ToŞk™ fÜ MuÉiv¬Ÿ‹ D©¨AÇlysis\" PoS ACAT:040,2007.ƒ-Pršt:…hysics/0703039" << 
Endl
;

1461 
kBibTeX
:

1462 
logg”
 << "@A¹işe{TMVA2007," << 
Endl
;

1463 
logg”
 << "‡uthÜ = \"HÛck”, And»a ªd S³ckmay”, P‘”‡nd S‹lz”, JÛrg " << 
Endl
;

1464 
logg”
 << "‡nd Th”h¯g, Jª‡nd vÚ TÛºe, Eckh¬d‡nd Voss, H–ge\"," << 
Endl
;

1465 
logg”
 << "™Ë = \"{TMVA: ToŞk™ fÜ muÉiv¬Ÿ‹ d©¨ª®ysis}\"," << 
Endl
;

1466 
logg”
 << " jouº® = \"PoS\"," << 
Endl
;

1467 
logg”
 << " vŞum = \"ACAT\"," << 
Endl
;

1468 
logg”
 << " y—¸ = \"2007\"," << 
Endl
;

1469 
logg”
 << "…age  = \"040\"," << 
Endl
;

1470 
logg”
 << "ƒ´šˆ = \"physics/0703039\"," << 
Endl
;

1471 
logg”
 << "‡rchiveP»fix = \"¬Xiv\"," << 
Endl
;

1472 
logg”
 << " SLACc™©iÚ = \"%%CITATION = PHYSICS/0703039;%%\"" << 
Endl
;

1473 
logg”
 << "}" << 
Endl
;

1476 
kLaTeX
:

1477 
logg”
 << "%\\c™e{TMVA2007}" << 
Endl
;

1478 
logg”
 << "\\bib™em{TMVA2007}" << 
Endl
;

1479 
logg”
 << " A.~HÛck”, P.~S³ckmay”, J.~S‹lz”, J.~Th”h¯g, E.~vÚ TÛºe, H.~Voss" << 
Endl
;

1480 
logg”
 << " %``TMVA: ToŞk™ fÜ muÉiv¬Ÿ‹ d©¨ª®ysis,''" << 
Endl
;

1481 
logg”
 << " PoS A {\\bàCAT} (2007è040" << 
Endl
;

1482 
logg”
 << " [¬Xiv:physics/0703039]." << 
Endl
;

1483 
logg”
 << " %%CITATION = POSCI,ACAT,040;%%" << 
Endl
;

1486 
kHtmlLšk
:

1488 
logg”
 << 
kHEADER
 << 
	`gToŞs
().
	`CŞÜ
("bold")

1489 << "Thªk you fÜ usšg TMVA!" << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
;

1490 
logg”
 << 
kINFO
 << 
	`gToŞs
().
	`CŞÜ
("bold")

1492 << 
	`gToŞs
().
	`CŞÜ
("»£t"è<< 
Endl
;

1494 
	}
}

1498 
BoŞ_t
 
	gTMVA
::
ToŞs
::
	$Hi¡oHasEquidi¡ªtBšs
(cÚ¡ 
TH1
& 
h
)

1500  !(
h
.
	`G‘Xaxis
()->
	`G‘Xbšs
()->
fN
);

1501 
	}
}

1505 
	g¡d
::
veùÜ
<
TM©rixDSym
*>*

1506 
TMVA
::
ToŞs
::
C®cCov¬ŸnûM©riûs
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>& 
ev’ts
, 
IÁ_t
 
maxCls
, 
V¬ŸbËT¿nsfÜmBa£
* 
ŒªsfÜmBa£
 )

1508 
	g¡d
::
veùÜ
<
Ev’t
*> 
ev’tVeùÜ
;

1509 
	g¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>::
cÚ¡_™”©Ü
 
™
 = 
ev’ts
.
begš
(), 
	g™End
 =ƒv’ts.
’d
(); 
	g™
 !ğ
™End
; ++it)

1511 
	gev’tVeùÜ
.
push_back
 (
Ãw
 
Ev’t
(*(*
™
)));

1513 
	g¡d
::
veùÜ
<
TM©rixDSym
*>* 
»tuºV®ue
 = 
C®cCov¬ŸnûM©riûs
 (
ev’tVeùÜ
, 
maxCls
, 
ŒªsfÜmBa£
);

1514 
	g¡d
::
veùÜ
<
Ev’t
*>::
cÚ¡_™”©Ü
 
™
 = 
ev’tVeùÜ
.
begš
(), 
	g™End
 =ƒv’tVeùÜ.
’d
(); 
	g™
 !ğ
™End
; ++it)

1516 
d–‘e
 (*
™
);

1518  
	g»tuºV®ue
;

1524 
	g¡d
::
veùÜ
<
TM©rixDSym
*>*

1525 
TMVA
::
ToŞs
::
C®cCov¬ŸnûM©riûs
ĞcÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
, 
IÁ_t
 
maxCls
, 
V¬ŸbËT¿nsfÜmBa£
* 
ŒªsfÜmBa£
 )

1527 ià(
	gev’ts
.
em±y
()) {

1528 
Log
(è<< 
	gkWARNING
 << " AskedØÿlcuÏ‹‡ cov¬Ÿnû m©rix fÜ‡Àem±yƒv’ˆveùÜs.. sÜry cªnÙ dØth© ->„‘uº NULL"<<
	gEndl
;

1532 
UIÁ_t
 
	gnv¬s
=0, 
	gÁgts
=0, 
	gn¥ùs
=0;

1533 ià(
	gŒªsfÜmBa£
)

1534 
	gŒªsfÜmBa£
->
CouÁV¬ŸbËTy³s
Ğ
nv¬s
, 
Ágts
, 
n¥ùs
 );

1536 
	gnv¬s
 =
ev’ts
.
©
(0)->
G‘NV¬ŸbËs
 ();

1537 
	gÁgts
 =
ev’ts
.
©
(0)->
G‘NT¬g‘s
 ();

1538 
	gn¥ùs
=
ev’ts
.
©
(0)->
G‘NS³ù©Üs
();

1543 
IÁ_t
 
	gm©Num
 = 
maxCls
;

1544 ià(
	gmaxCls
 > 1 ) 
	gm©Num
++;

1546 
	g¡d
::
veùÜ
<
TVeùÜD
*>* 
vec
 = 
Ãw
 
¡d
::veùÜ<TVeùÜD*>(
m©Num
);

1547 
	g¡d
::
veùÜ
<
TM©rixD
*>* 
m©2
 = 
Ãw
 
¡d
::veùÜ<TM©rixD*>(
m©Num
);

1548 
	g¡d
::
veùÜ
<
DoubË_t
> 
couÁ
(
m©Num
);

1549 
	gcouÁ
.
assign
(
m©Num
,0);

1551 
IÁ_t
 
	gşs
 = 0;

1552 
TVeùÜD
* 
	gv
;

1553 
TM©rixD
* 
	gm
;

1554 
UIÁ_t
 
	giv¬
=0, 
	gjv¬
=0;

1555 
	gşs
 = 0; cl < 
	gm©Num
 ; cls++) {

1556 
	gvec
->
©
(
şs
èğ
Ãw
 
TVeùÜD
(
nv¬s
);

1557 
	gm©2
->
©
(
şs
èğ
Ãw
 
TM©rixD
(
nv¬s
,nvars);

1558 
	gv
 = 
vec
->
©
(
şs
);

1559 
	gm
 = 
m©2
->
©
(
şs
);

1561 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

1562 (*
	gv
)(
	giv¬
) = 0;

1563 
	gjv¬
=0; jv¬<
	gnv¬s
; jvar++) {

1564 (*
	gm
)(
	giv¬
, 
	gjv¬
) = 0;

1570 
UIÁ_t
 
	gi
=0; i<
	gev’ts
.
size
(); i++) {

1573 cÚ¡ 
Ev’t
 * 
	gev
 = 
ev’ts
[
i
];

1574 
	gşs
 = 
ev
->
G‘CÏss
();

1575 
DoubË_t
 
	gweight
 = 
ev
->
G‘Weight
();

1577 
	g¡d
::
veùÜ
<
Flßt_t
> 
šput
;

1578 
	g¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

1580 ià(
	gŒªsfÜmBa£
) {

1581  
	gŒªsfÜmBa£
->
G‘IÅut
 (
ev
, 
šput
, 
mask
);

1583 
	giv¬
=0; iv¬<
	gnv¬s
; ++ivar) {

1584 
	gšput
.
push_back
 (
ev
->
G‘V®ue
(
iv¬
));

1588 ià(
	gmaxCls
 > 1) {

1589 
	gv
 = 
vec
->
©
(
m©Num
-1);

1590 
	gm
 = 
m©2
->
©
(
m©Num
-1);

1592 
	gcouÁ
.
©
(
m©Num
-1)+=
weight
;

1593 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

1595 
DoubË_t
 
	gxi
 = 
šput
.
©
 (
iv¬
);

1596 (*
	gv
)(
	giv¬
è+ğ
xi
*
weight
;

1597 (*
	gm
)(
	giv¬
, iv¬è+ğ(
xi
*xi*
weight
);

1599 
	gjv¬
=
iv¬
+1; jv¬<
	gnv¬s
; jvar++) {

1600 
DoubË_t
 
	gxj
 = 
šput
.
©
 (
jv¬
);

1601 (*
	gm
)(
	giv¬
, 
	gjv¬
è+ğ(
xi
*
xj
*
weight
);

1602 (*
	gm
)(
	gjv¬
, 
	giv¬
èğ(*
m
)(
iv¬
, jvar);

1607 
	gcouÁ
.
©
(
şs
)+=
weight
;

1608 
	gv
 = 
vec
->
©
(
şs
);

1609 
	gm
 = 
m©2
->
©
(
şs
);

1610 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

1611 
DoubË_t
 
	gxi
 = 
šput
.
©
 (
iv¬
);

1612 (*
	gv
)(
	giv¬
è+ğ
xi
*
weight
;

1613 (*
	gm
)(
	giv¬
, iv¬è+ğ(
xi
*xi*
weight
);

1615 
	gjv¬
=
iv¬
+1; jv¬<
	gnv¬s
; jvar++) {

1616 
DoubË_t
 
	gxj
 = 
šput
.
©
 (
jv¬
);

1617 (*
	gm
)(
	giv¬
, 
	gjv¬
è+ğ(
xi
*
xj
*
weight
);

1618 (*
	gm
)(
	gjv¬
, 
	giv¬
èğ(*
m
)(
iv¬
, jvar);

1624 
	g¡d
::
veùÜ
<
TM©rixDSym
*>* 
m©
 = 
Ãw
 
¡d
::veùÜ<TM©rixDSym*>(
m©Num
);

1625 
	gşs
 = 0; cl < 
	gm©Num
; cls++) {

1626 
	gv
 = 
vec
->
©
(
şs
);

1627 
	gm
 = 
m©2
->
©
(
şs
);

1629 
	gm©
->
©
(
şs
èğ
Ãw
 
TM©rixDSym
(
nv¬s
);

1631 
DoubË_t
 
	gn
 = 
couÁ
.
©
(
şs
);

1632 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

1633 
	gjv¬
=0; jv¬<
	gnv¬s
; jvar++) {

1634 (*(
	gm©
->
©
(
şs
)))(
	giv¬
, 
	gjv¬
èğ(*
m
)(
iv¬
, jv¬)/
	gn
 - (*
	gv
)(iv¬)*(*v)(jv¬)/(
n
*n);

1637 
d–‘e
 
	gv
;

1638 
d–‘e
 
	gm
;

1641 
d–‘e
 
	gm©2
;

1642 
d–‘e
 
	gvec
;

1644  
	gm©
;

1652 
	g‹m¶©e
 <
ty³Çme
 
	gI‹¿tÜ
,y³Çm
	gWeightI‹¿tÜ
>

1653 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$M—n
 ( 
I‹¿tÜ
 
fœ¡
, I‹¿tÜ 
Ï¡
, 
WeightI‹¿tÜ
 
w
)

1655 
DoubË_t
 
sum
 = 0;

1656 
DoubË_t
 
sumw
 = 0;

1657 
i
 = 0;

1658 ià(
w
==
NULL
)

1660  
fœ¡
 !ğ
Ï¡
 )

1666 
sum
 +ğ(*
fœ¡
);

1667 
sumw
 += 1.0 ;

1668 ++
fœ¡
;

1669 ++
i
;

1671 ià(
sumw
 <= 0) {

1672 ::
	`E¼Ü
("TMVA::Tools::Mean","sum of weights <= 0 ?!hat's‡ bitoo much of‚egativeƒvent weights :) ");

1678  
fœ¡
 !ğ
Ï¡
 )

1684 
sum
 +ğ(*
w
è* (*
fœ¡
);

1685 
sumw
 +ğ(*
w
) ;

1686 ++
w
;

1687 ++
fœ¡
;

1688 ++
i
;

1690 ià(
sumw
 <= 0) {

1691 ::
	`E¼Ü
("TMVA::Tools::Mean","sum of weights <= 0 ?!hat's‡ bitoo much of‚egativeƒvent weights :) ");

1695  
sum
/
sumw
;

1696 
	}
}

1701 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1702 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$M—n
(
LÚg64_t
 
n
, cÚ¡ 
T
 *
a
, cÚ¡ 
DoubË_t
 *
w
)

1704 ià(
w
) {

1705  
TMVA
::
ToŞs
::
	`M—n
(
a
,‡+
n
, 
w
);

1707  
TM©h
::
	`M—n
(
a
,‡+
n
);

1709 
	}
}

1716 
	g‹m¶©e
 <
ty³Çme
 
	gI‹¿tÜ
,y³Çm
	gWeightI‹¿tÜ
>

1717 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$RMS
(
I‹¿tÜ
 
fœ¡
, I‹¿tÜ 
Ï¡
, 
WeightI‹¿tÜ
 
w
)

1720 
DoubË_t
 
sum
 = 0;

1721 
DoubË_t
 
sum2
 = 0;

1722 
DoubË_t
 
sumw
 = 0;

1724 
DoubË_t
 
adoubË
;

1725 ià(
w
==
NULL
)

1727  
fœ¡
 !ğ
Ï¡
 ) {

1728 
adoubË
=
	`DoubË_t
(*
fœ¡
);

1729 
sum
 +ğ
adoubË
;

1730 
sum2
 +ğ
adoubË
*adouble;

1731 
sumw
 += 1.0;

1732 ++
fœ¡
;

1737  
fœ¡
 !ğ
Ï¡
 ) {

1738 
adoubË
=
	`DoubË_t
(*
fœ¡
);

1739 
sum
 +ğ
adoubË
 * (*
w
);

1740 
sum2
 +ğ
adoubË
*adoubË * (*
w
);

1741 
sumw
 +ğ(*
w
);

1742 ++
fœ¡
;

1743 ++
w
;

1746 
DoubË_t
 
nÜm
 = 1./
sumw
;

1747 
DoubË_t
 
m—n
 = 
sum
*
nÜm
;

1748 
DoubË_t
 
rms
 = 
TM©h
::
	`Sq¹
(TM©h::
	`Abs
(
sum2
*
nÜm
 -
m—n
*mean));

1749  
rms
;

1750 
	}
}

1757 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1758 
DoubË_t
 
	gTMVA
::
ToŞs
::
	$RMS
(
LÚg64_t
 
n
, cÚ¡ 
T
 *
a
, cÚ¡ 
DoubË_t
 *
w
)

1761 ià(
w
) {

1762  
TMVA
::
ToŞs
::
	`RMS
(
a
,‡+
n
, 
w
);

1764  
TM©h
::
	`RMS
(
a
,‡+
n
);

1766 
	}
}

1771 
TH1
* 
	gTMVA
::
ToŞs
::
	$G‘CumuÏtiveDi¡
Ğ
TH1
* 
h
)

1773 
TH1
* 
cumuÏtiveDi¡
ğ(TH1*è
h
->
	`ClÚe
(
	`FÜm
("%sCumul",h->
	`G‘T™Ë
()));

1776 
Flßt_t
 
·¹ŸlSum
 = 0;

1777 
Flßt_t
 
šv”£Sum
 = 0.;

1779 
Flßt_t
 
v®
;

1780 
IÁ_t
 
ibšEnd
=1, 
ibš
=
cumuÏtiveDi¡
->
	`G‘NbšsX
(); ibin >=ibinEnd ; ibin--){

1781 
v®
 = 
cumuÏtiveDi¡
->
	`G‘BšCÚ‹Á
(
ibš
);

1782 ià(
v®
>0è
šv”£Sum
 += val;

1784 
šv”£Sum
 = 1/inverseSum;

1786 
IÁ_t
 
ibšEnd
=1, 
ibš
=
cumuÏtiveDi¡
->
	`G‘NbšsX
(); ibin >=ibinEnd ; ibin--){

1787 
v®
 = 
cumuÏtiveDi¡
->
	`G‘BšCÚ‹Á
(
ibš
);

1788 ià(
v®
>0è
·¹ŸlSum
 += val;

1789 
cumuÏtiveDi¡
->
	`S‘BšCÚ‹Á
(
ibš
,
·¹ŸlSum
*
šv”£Sum
);

1791  
cumuÏtiveDi¡
;

1792 
	}
}

1794 
	gTMVA
::
ToŞs
::
	$R—dA‰r
(*
node
, cÚ¡ *
©ŒÇme
, &
v®ue
)

1797 cÚ¡ *
v®
 = 
	`xmËngše
().
	`G‘A‰r
(
node
, 
©ŒÇme
);

1798 ià(
v®
 =ğ
nuÎ±r
) {

1799 cÚ¡ *
nod’ame
 = 
	`xmËngše
().
	`G‘NodeName
(
node
);

1800 
	`Log
(è<< 
kFATAL
 << "TryšgØ»ad‚Ú-exi¡šg‡‰ribu‹ '" << 
©ŒÇme
 << "' from xmÈnod'" << 
nod’ame
 << "'"

1801 << 
Endl
;

1803 
v®ue
 = 
	`©of
(
v®
);

1804 
	}
}

1806 
	gTMVA
::
ToŞs
::
	$R—dA‰r
(*
node
, cÚ¡ *
©ŒÇme
, &
v®ue
)

1809 cÚ¡ *
v®
 = 
	`xmËngše
().
	`G‘A‰r
(
node
, 
©ŒÇme
);

1810 ià(
v®
 =ğ
nuÎ±r
) {

1811 cÚ¡ *
nod’ame
 = 
	`xmËngše
().
	`G‘NodeName
(
node
);

1812 
	`Log
(è<< 
kFATAL
 << "TryšgØ»ad‚Ú-exi¡šg‡‰ribu‹ '" << 
©ŒÇme
 << "' from xmÈnod'" << 
nod’ame
 << "'"

1813 << 
Endl
;

1815 
v®ue
 = 
	`©oi
(
v®
);

1816 
	}
}

1818 
	gTMVA
::
ToŞs
::
	$R—dA‰r
(*
node
, cÚ¡ *
©ŒÇme
, &
v®ue
)

1821 cÚ¡ *
v®
 = 
	`xmËngše
().
	`G‘A‰r
(
node
, 
©ŒÇme
);

1822 ià(
v®
 =ğ
nuÎ±r
) {

1823 cÚ¡ *
nod’ame
 = 
	`xmËngše
().
	`G‘NodeName
(
node
);

1824 
	`Log
(è<< 
kFATAL
 << "TryšgØ»ad‚Ú-exi¡šg‡‰ribu‹ '" << 
©ŒÇme
 << "' from xmÈnod'" << 
nod’ame
 << "'"

1825 << 
Endl
;

1827 
v®ue
 = 
	`©oi
(
v®
);

1828 
	}
}

	@src/TransformationHandler.cxx

36 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

38 
	~"TMVA/CÚfig.h
"

39 
	~"TMVA/D©aS‘.h
"

40 
	~"TMVA/D©aS‘Info.h
"

41 
	~"TMVA/Ev’t.h
"

42 
	~"TMVA/MsgLogg”.h
"

43 
	~"TMVA/Rªkšg.h
"

44 
	~"TMVA/ToŞs.h
"

45 
	~"TMVA/Ty³s.h
"

46 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

47 
	~"TMVA/V¬ŸbËGaussT¿nsfÜm.h
"

48 
	~"TMVA/V¬ŸbËInfo.h
"

49 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

50 
	~"TMVA/V¬ŸbËNÜm®izeT¿nsfÜm.h
"

51 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

52 
	~"TMVA/V¬ŸbËR—¼ªgeT¿nsfÜm.h
"

53 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

55 
	~"TAxis.h
"

56 
	~"TDœeùÜy.h
"

57 
	~"TH1.h
"

58 
	~"TH2.h
"

59 
	~"TLi¡.h
"

60 
	~"TM©h.h
"

61 
	~"TProfe.h
"

63 
	~<veùÜ
>

64 
	~<iomª
>

69 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$T¿nsfÜm©iÚHªdËr
Ğ
D©aS‘Info
& 
dsi
, cÚ¡ 
TSŒšg
& 
ÿÎ”Name
 )

70 : 
	`fD©aS‘Info
(
dsi
),

71 
	`fRoÙBa£Dœ
(0),

72 
	`fC®ËrName
 (
ÿÎ”Name
),

73 
	`fLogg”
 ( 
Ãw
 
	`MsgLogg”
(
	`TSŒšg
("TFHªdËr_" + 
ÿÎ”Name
).
	`D©a
(), 
kINFO
) )

77 
fNumC
 = (
dsi
.
	`G‘NCÏs£s
()<= 1) ? 1 : dsi.GetNClasses()+1;

79 
fV¬ŸbËSts
.
	`»size
Ğ
fNumC
 );

80 
IÁ_t
 
i
=0; i<
fNumC
; i++ ) 
fV¬ŸbËSts
.
	`©
(i).
	`»size
(
dsi
.
	`G‘NV¬ŸbËs
(è+ dsi.
	`G‘NT¬g‘s
());

81 
	}
}

86 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::~
	$T¿nsfÜm©iÚHªdËr
()

88 
¡d
::
veùÜ
<
Rªkšg
*>::
cÚ¡_™”©Ü
 
™
 = 
fRªkšg
.
	`begš
();

89 ; 
™
 !ğ
fRªkšg
.
	`’d
(); it++è
d–‘e
 *it;

91 
fT¿nsfÜm©iÚs
.
	`S‘OwÃr
();

92 
d–‘e
 
fLogg”
;

93 
	}
}

97 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$S‘C®ËrName
ĞcÚ¡ 
TSŒšg
& 
Çme
 )

99 
fC®ËrName
 = 
Çme
;

100 
fLogg”
->
	`S‘Sourû
Ğ
	`TSŒšg
("TFHªdËr_" + 
fC®ËrName
).
	`D©a
() );

101 
	}
}

105 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
* 
TMVA
::
T¿nsfÜm©iÚHªdËr
::
	$AddT¿nsfÜm©iÚ
Ğ
V¬ŸbËT¿nsfÜmBa£
 *
Œf
, 
IÁ_t
 
şs
 )

107 
TSŒšg
 
tâame
 = 
Œf
->
	`Log
().
	`G‘Name
();

108 
Œf
->
	`Log
().
	`S‘Sourû
(
	`TSŒšg
(
fC®ËrName
+"_"+
tâame
+"_TF").
	`D©a
());

109 
fT¿nsfÜm©iÚs
.
	`Add
(
Œf
);

110 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`push_back
Ğ
şs
 );

111  
Œf
;

112 
	}
}

116 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$AddSts
Ğ
IÁ_t
 
k
, 
UIÁ_t
 
iv¬
, 
DoubË_t
 
m—n
, DoubË_ˆ
rms
, DoubË_ˆ
mš
, DoubË_ˆ
max
 )

118 ià(
rms
 <= 0) {

119 
	`Log
(è<< 
kWARNING
 << "V¬ŸbË \"" << 
	`V¬ŸbË
(
iv¬
).
	`G‘Ex´essiÚ
()

121 << "==> s‘Øz”o. PËa£ checkhv¬ŸbË cÚ‹Á" << 
Endl
;

122 
rms
 = 0;

125 
V¬ŸbËSt
 
¡©
; st.
fM—n
 = 
m—n
; st.
fRMS
 = 
rms
; st.
fMš
 = 
mš
; st.
fMax
 = 
max
;

126 
fV¬ŸbËSts
.
	`©
(
k
).©(
iv¬
èğ
¡©
;

127 
	}
}

133 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$S‘T¿nsfÜm©iÚReã»nûCÏss
Ğ
IÁ_t
 
şs
 )

135 
UIÁ_t
 
i
 = 0; i < 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`size
(); i++) {

136 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`©
Ğ
i
 ) = 
şs
;

138 
	}
}

143 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
T¿nsfÜm©iÚHªdËr
::
	$T¿nsfÜm
ĞcÚ¡ 
Ev’t
* 
ev
 ) const

145 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
);

146 
¡d
::
veùÜ
<
IÁ_t
>::
cÚ¡_™”©Ü
 
rClsIt
 = 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`begš
();

147 cÚ¡ 
Ev’t
* 
ŒEv
 = 
ev
;

148 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
()) {

149 ià(
rClsIt
 =ğ
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`’d
()è
	`Log
(è<< 
kFATAL
<< "šv®id„—d iÀT¿nsfÜm©iÚHªdËr::T¿nsfÜm " <<
Endl
;

150 
ŒEv
 = 
Œf
->
	`T¿nsfÜm
ÑrEv, (*
rClsIt
) );

151 
rClsIt
++;

153  
ŒEv
;

154 
	}
}

158 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
T¿nsfÜm©iÚHªdËr
::
	$Inv”£T¿nsfÜm
ĞcÚ¡ 
Ev’t
* 
ev
, 
BoŞ_t
 
suµ»ssIfNoT¬g‘s
 ) const

160 ià(
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`em±y
()){

162  
ev
;

165 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
, 
kI‹rBackw¬d
);

166 
¡d
::
veùÜ
< 
IÁ_t
 >::
cÚ¡_™”©Ü
 
rClsIt
 = 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`’d
();

167 
rClsIt
--;

168 cÚ¡ 
Ev’t
* 
ŒEv
 = 
ev
;

169 
UIÁ_t
 
nv¬s
 = 0, 
Ágts
 = 0, 
n¥ùs
 = 0;

170 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
() ) {

171 ià(
Œf
->
	`IsC»©ed
()) {

172 
Œf
->
	`CouÁV¬ŸbËTy³s
Ğ
nv¬s
, 
Ágts
, 
n¥ùs
 );

173 ifĞ!(
suµ»ssIfNoT¬g‘s
 && 
Ágts
==0) )

174 
ŒEv
 = 
Œf
->
	`Inv”£T¿nsfÜm
(
ev
, (*
rClsIt
) );

177 --
rClsIt
;

179  
ŒEv
;

197 
	}
}

202 cÚ¡ 
	g¡d
::
veùÜ
<
TMVA
::
Ev’t
*>* TMVA::
T¿nsfÜm©iÚHªdËr
::
C®cT¿nsfÜm©iÚs
ĞcÚ¡ 
¡d
::veùÜ<Ev’t*>& 
ev’ts
,

203 
BoŞ_t
 
ü—‹NewVeùÜ
 )

205 ià(
	gfT¿nsfÜm©iÚs
.
G‘EÁr›s
() <= 0)

206  &
ev’ts
;

212 
	g¡d
::
veùÜ
<
Ev’t
*> *
ŒªsfÜmedEv’ts
 = 
Ãw
 
¡d
::veùÜ<
TMVA
::Ev’t*>(
ev’ts
.
size
());

213  
UIÁ_t
 
	g›vt
 = 0; ievt<
	gev’ts
.
size
(); ievt++)

214 
	gŒªsfÜmedEv’ts
->
©
(
›vt
èğ
Ãw
 
Ev’t
(*
ev’ts
.at(ievt));

216 
TLi¡I‹r
 
ŒIt
(&
fT¿nsfÜm©iÚs
);

217 
	g¡d
::
veùÜ
< 
IÁ_t
 >::
™”©Ü
 
rClsIt
 = 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
begš
();

218 
V¬ŸbËT¿nsfÜmBa£
 *
	gŒf
 = (V¬ŸbËT¿nsfÜmBa£*è
ŒIt
()) {

219 ià(
Œf
->
P»·»T¿nsfÜm©iÚ
(*
ŒªsfÜmedEv’ts
)) {

220 
UIÁ_t
 
›vt
 = 0; 
	g›vt
<
	gŒªsfÜmedEv’ts
->
size
(); ievt++) {

221 *(*
	gŒªsfÜmedEv’ts
)[
›vt
] = *
Œf
->
T¿nsfÜm
((*
ŒªsfÜmedEv’ts
)[›vt],(*
rClsIt
));

223 
	grClsIt
++;

227 
C®cSts
(*
ŒªsfÜmedEv’ts
);

230 
PlÙV¬ŸbËs
(*
ŒªsfÜmedEv’ts
);

234 ià(!
	gü—‹NewVeùÜ
) {

235  
UIÁ_t
 
	g›vt
 = 0; ievt<
	gŒªsfÜmedEv’ts
->
size
(); ievt++)

236 
d–‘e
 (*
ŒªsfÜmedEv’ts
)[
›vt
];

237 
d–‘e
 
	gŒªsfÜmedEv’ts
;

238 
	gŒªsfÜmedEv’ts
=
NULL
;

241  
	gŒªsfÜmedEv’ts
;

248 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
C®cSts
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
 )

250 
UIÁ_t
 
Ãvts
 = 
ev’ts
.
size
();

252 ià(
	gÃvts
==0)

253 
Log
(è<< 
kFATAL
 << "NØev’t avaabËØfšd mš, max, m—Àªd„ms" << 
Endl
;

256 cÚ¡ 
UIÁ_t
 
	gnv¬
 = 
ev’ts
[0]->
G‘NV¬ŸbËs
();

257 cÚ¡ 
UIÁ_t
 
	gÁgt
 = 
ev’ts
[0]->
G‘NT¬g‘s
();

259 
DoubË_t
 *
	gsumOfWeights
 = 
Ãw
 DoubË_t[
fNumC
];

260 
DoubË_t
* *
	gx2
 = 
Ãw
 DoubË_t*[
fNumC
];

261 
DoubË_t
* *
	gx0
 = 
Ãw
 DoubË_t*[
fNumC
];

262 
DoubË_t
* *
	gv¬Mš
 = 
Ãw
 DoubË_t*[
fNumC
];

263 
DoubË_t
* *
	gv¬Max
 = 
Ãw
 DoubË_t*[
fNumC
];

265 
IÁ_t
 
	gşs
=0; cls<
	gfNumC
; cls++) {

266 
	gsumOfWeights
[
şs
]=0;

267 
	gx2
[
şs
] = 
Ãw
 
DoubË_t
[
nv¬
+
Ágt
];

268 
	gx0
[
şs
] = 
Ãw
 
DoubË_t
[
nv¬
+
Ágt
];

269 
	gv¬Mš
[
şs
] = 
Ãw
 
DoubË_t
[
nv¬
+
Ágt
];

270 
	gv¬Max
[
şs
] = 
Ãw
 
DoubË_t
[
nv¬
+
Ágt
];

271 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
+
	gÁgt
; ivar++) {

272 
	gx0
[
şs
][
iv¬
] = 
x2
[cls][ivar] = 0;

273 
	gv¬Mš
[
şs
][
iv¬
] = 
DBL_MAX
;

274 
	gv¬Max
[
şs
][
iv¬
] = -
DBL_MAX
;

278 
UIÁ_t
 
	g›vt
=0; ievt<
	gÃvts
; ievt++) {

279 cÚ¡ 
Ev’t
* 
	gev
 = 
ev’ts
[
›vt
];

280 
IÁ_t
 
	gşs
 = 
ev
->
G‘CÏss
();

282 
DoubË_t
 
	gweight
 = 
ev
->
G‘Weight
();

283 
	gsumOfWeights
[
şs
] +ğ
weight
;

284 ià(
	gfNumC
 > 1 ) 
	gsumOfWeights
[
fNumC
-1] +ğ
weight
;

285 
UIÁ_t
 
	gv¬_tgt
 = 0; var_tgt < 2; var_tgt++ ){

286 
UIÁ_t
 
	gÆoİ
 = ( 
v¬_tgt
==0?
nv¬
:
Ágt
 );

287 
UIÁ_t
 
	giv¬
=0; iv¬<
	gÆoİ
; ivar++) {

288 
DoubË_t
 
	gx
 = ( 
v¬_tgt
==0?
ev
->
G‘V®ue
(
iv¬
):ev->
G‘T¬g‘
(ivar) );

290 ià(
	gx
 < 
	gv¬Mš
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
]èv¬Mš[şs][(v¬_tgt*nv¬)+iv¬]ğ
x
;

291 ià(
	gx
 > 
	gv¬Max
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
]èv¬Max[şs][(v¬_tgt*nv¬)+iv¬]ğ
x
;

293 
	gx0
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
] +ğ
x
*
weight
;

294 
	gx2
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
] +ğ
x
*x*
weight
;

296 ià(
	gfNumC
 > 1) {

297 ià(
	gx
 < 
	gv¬Mš
[
fNumC
-1][(
v¬_tgt
*
nv¬
)+
iv¬
]èv¬Mš[fNumC-1][(v¬_tgt*nv¬)+iv¬]ğ
x
;

298 ià(
	gx
 > 
	gv¬Max
[
fNumC
-1][(
v¬_tgt
*
nv¬
)+
iv¬
]èv¬Max[fNumC-1][(v¬_tgt*nv¬)+iv¬]ğ
x
;

300 
	gx0
[
fNumC
-1][(
v¬_tgt
*
nv¬
)+
iv¬
] +ğ
x
*
weight
;

301 
	gx2
[
fNumC
-1][(
v¬_tgt
*
nv¬
)+
iv¬
] +ğ
x
*x*
weight
;

309 
UIÁ_t
 
	gv¬_tgt
 = 0; var_tgt < 2; var_tgt++ ){

310 
UIÁ_t
 
	gÆoİ
 = ( 
v¬_tgt
==0?
nv¬
:
Ágt
 );

311 
UIÁ_t
 
	giv¬
=0; iv¬<
	gÆoİ
; ivar++) {

312 
IÁ_t
 
	gşs
 = 0; cl < 
	gfNumC
; cls++) {

313 
DoubË_t
 
	gm—n
 = 
x0
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
]/
sumOfWeights
[cls];

314 
DoubË_t
 
	grms
 = 
TM©h
::
Sq¹
Ğ
x2
[
şs
][(
v¬_tgt
*
nv¬
)+
iv¬
]/
sumOfWeights
[şs] - 
m—n
*mean);

315 
AddSts
(
şs
, (
v¬_tgt
*
nv¬
)+
iv¬
, 
m—n
, 
rms
, 
v¬Mš
[şs][(v¬_tgt*nv¬)+iv¬], 
v¬Max
[cls][(var_tgt*nvar)+ivar]);

322 
UIÁ_t
 
	gmaxL
 = 8, 
	gmaxV
 = 0;

323 
	g¡d
::
veùÜ
<
UIÁ_t
> 
vL’gths
;

324 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
+
	gÁgt
; ivar++) {

325 ifĞ
	giv¬
 < 
	gnv¬
 )

326 
	gmaxL
 = 
TM©h
::
Max
Ğ(
UIÁ_t
)
V¬ŸbË
(
iv¬
).
G‘Lab–
().
L’gth
(), 
maxL
 );

328 
	gmaxL
 = 
TM©h
::
Max
Ğ(
UIÁ_t
)
T¬g‘
(
iv¬
-
nv¬
).
G‘Lab–
().
L’gth
(), 
maxL
 );

330 
	gmaxV
 = 
maxL
 + 2;

332 
UIÁ_t
 
	gş’
 = 
maxL
 + 4*
maxV
 + 11;

333 
Log
(è<< 
	gkHEADER
 ;

338 
Log
(è<< 
	g¡d
::
£tw
(
maxL
) << "Variable";

339 
Log
(è<< " " << 
	g¡d
::
£tw
(
maxV
) << "Mean";

340 
Log
(è<< " " << 
	g¡d
::
£tw
(
maxV
) << "RMS";

341 
Log
(è<< " " << 
	g¡d
::
£tw
(
maxV
) << "[ Min ";

342 
Log
(è<< " " << 
	g¡d
::
£tw
(
maxV
è<< " Max ]"<< 
Endl
;;

343 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
Log
() << "-";

344 
Log
(è<< 
	gEndl
;

347 
TSŒšg
 
	gfÜm©
 = "%#11.5g";

348 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
+
	gÁgt
; ivar++) {

349 ifĞ
	giv¬
 < 
	gnv¬
 )

350 
Log
(è<< 
	g¡d
::
£tw
(
maxL
è<< 
V¬ŸbË
(
iv¬
).
G‘Lab–
() << ":";

352 
Log
(è<< 
	g¡d
::
£tw
(
maxL
è<< 
T¬g‘
(
iv¬
-
nv¬
).
G‘Lab–
() << ":";

353 
Log
(è<< 
	g¡d
::
£tw
(
maxV
è<< 
FÜm
Ğ
fÜm©
.
D©a
(), 
G‘M—n
(
iv¬
) );

354 
Log
(è<< 
	g¡d
::
£tw
(
maxV
è<< 
FÜm
Ğ
fÜm©
.
D©a
(), 
G‘RMS
(
iv¬
) );

355 
Log
(è<< " [" << 
	g¡d
::
£tw
(
maxV
è<< 
FÜm
Ğ
fÜm©
.
D©a
(), 
G‘Mš
(
iv¬
) );

356 
Log
(è<< 
	g¡d
::
£tw
(
maxV
è<< 
FÜm
Ğ
fÜm©
.
D©a
(), 
G‘Max
(
iv¬
) ) << " ]";

357 
Log
(è<< 
	gEndl
;

359 
UIÁ_t
 
	gi
=0; i<
	gş’
; i++è
Log
() << "-";

360 
Log
(è<< 
	gEndl
;

363 
	gd–‘e
[] 
	gsumOfWeights
;

364 
IÁ_t
 
	gşs
=0; cls<
	gfNumC
; cls++) {

365 
	gd–‘e
 [] 
	gx2
[
şs
];

366 
	gd–‘e
 [] 
	gx0
[
şs
];

367 
	gd–‘e
 [] 
	gv¬Mš
[
şs
];

368 
	gd–‘e
 [] 
	gv¬Max
[
şs
];

370 
	gd–‘e
 [] 
	gx2
;

371 
	gd–‘e
 [] 
	gx0
;

372 
	gd–‘e
 [] 
	gv¬Mš
;

373 
	gd–‘e
 [] 
	gv¬Max
;

379 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
, 
IÁ_t
 
·¹
 ) const

381 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
);

382 
¡d
::
veùÜ
< 
IÁ_t
 >::
cÚ¡_™”©Ü
 
rClsIt
 = 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`begš
();

383 
UIÁ_t
 
ŒCouÁ”
=1;

384 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
() ) {

385 
Œf
->
	`MakeFunùiÚ
(
fout
, 
âcName
, 
·¹
, 
ŒCouÁ”
++, (*
rClsIt
) );

386 
rClsIt
++;

388 ià(
·¹
==1) {

389 
IÁ_t
 
i
=0; i<
fT¿nsfÜm©iÚs
.
	`G‘Size
(); i++) {

390 
fout
 << " void In™T¿nsfÜm_"<<
i
+1<<"();" << 
¡d
::
’dl
;

391 
fout
 << " void T¿nsfÜm_"<<
i
+1<<"Ğ¡d::veùÜ<doubË> & iv, iÁ sigOrBgd ) cÚ¡;" << 
¡d
::
’dl
;

394 ià(
·¹
==2) {

395 
fout
 << 
¡d
::
’dl
;

396 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

397 
fout
 << "šlšvoid " << 
âcName
 << "::In™T¿nsfÜm()" << 
¡d
::
’dl
;

398 
fout
 << "{" << 
¡d
::
’dl
;

399 
IÁ_t
 
i
=0; i<
fT¿nsfÜm©iÚs
.
	`G‘Size
(); i++)

400 
fout
 << " In™T¿nsfÜm_"<<
i
+1<<"();" << 
¡d
::
’dl
;

401 
fout
 << "}" << 
¡d
::
’dl
;

402 
fout
 << 
¡d
::
’dl
;

403 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

404 
fout
 << "šlšvoid " << 
âcName
 << "::T¿nsfÜmĞ¡d::veùÜ<doubË>& iv, iÁ sigOrBgd ) cÚ¡" << 
¡d
::
’dl
;

405 
fout
 << "{" << 
¡d
::
’dl
;

406 
IÁ_t
 
i
=0; i<
fT¿nsfÜm©iÚs
.
	`G‘Size
(); i++)

407 
fout
 << " T¿nsfÜm_"<<
i
+1<<"Ğiv, sigOrBgd );" << 
¡d
::
’dl
;

409 
fout
 << "}" << 
¡d
::
’dl
;

411 
	}
}

416 
TSŒšg
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘Name
() const

418 
TSŒšg
 
	`Çme
("Id");

419 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
);

420 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
;

421 ià((
Œf
 = (
V¬ŸbËT¿nsfÜmBa£
*è
	`ŒIt
())) {

422 
Çme
 = 
	`TSŒšg
(
Œf
->
	`G‘ShÜtName
());

423 (
Œf
 = (
V¬ŸbËT¿nsfÜmBa£
*è
	`ŒIt
())è
Çme
 +ğ"_" + 
	`TSŒšg
Ñrf->
	`G‘ShÜtName
());

425  
Çme
;

426 
	}
}

431 
TSŒšg
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘V¬ŸbËAxisT™Ë
ĞcÚ¡ 
V¬ŸbËInfo
& 
šfo
 ) const

433 
TSŒšg
 
xt™
 = 
šfo
.
	`G‘T™Ë
();

435 ià(
fT¿nsfÜm©iÚs
.
	`G‘Size
() >= 1) {

436 ià(
fT¿nsfÜm©iÚs
.
	`G‘Size
() > 1 ||

437 ((
V¬ŸbËT¿nsfÜmBa£
*)
	`G‘T¿nsfÜm©iÚLi¡
().
	`La¡
())->
	`G‘V¬ŸbËT¿nsfÜm
(è!ğ
Ty³s
::
kId’t™y
) {

438 
xt™
 +ğ" (" + 
	`G‘Name
() + ")";

441  
xt™
;

442 
	}
}

450 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
PlÙV¬ŸbËs
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
, 
TDœeùÜy
* 
theDœeùÜy
 )

452 ià(
	gfRoÙBa£Dœ
==0 && 
theDœeùÜy
 == 0) ;

454 
Log
(è<< 
	gkDEBUG
 << "Plotƒvent variables for ";

455 ià(
	gtheDœeùÜy
 !=0è
Log
()<< 
TSŒšg
(
theDœeùÜy
->
G‘Name
()è<< 
Endl
;

456 
Log
(è<< 
G‘Name
(è<< 
	gEndl
;

459 
TSŒšg
 
	gŒªsfTy³
 = "";

460 ià(
	gtheDœeùÜy
 == 0) {

461 
ŒªsfTy³
 += "_";

462 
	gŒªsfTy³
 +ğ
G‘Name
();

464 
C®cSts
(
ev’ts
);

467 cÚ¡ 
UIÁ_t
 
	gnv¬
 = 
fD©aS‘Info
.
G‘NV¬ŸbËs
();

468 cÚ¡ 
UIÁ_t
 
	gÁgt
 = 
fD©aS‘Info
.
G‘NT¬g‘s
();

469 cÚ¡ 
IÁ_t
 
	gnşs
 = 
fD©aS‘Info
.
G‘NCÏs£s
();

473 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
TH1
*> > 
hV¬s
Ğ
nşs
 );

474 
	g¡d
::
veùÜ
<
¡d
::veùÜ<¡d::veùÜ<
TH2F
*> > > 
mycÜr
Ğ
nşs
 );

475 
	g¡d
::
veùÜ
<
¡d
::veùÜ<¡d::veùÜ<
TProfe
*> > > 
my´of
Ğ
nşs
 );

477 
IÁ_t
 
	gşs
 = 0; cl < 
	gnşs
; cls++) {

478 
	ghV¬s
.
©
(
şs
).
»size
 ( 
nv¬
+
Ágt
 );

479 
	ghV¬s
.
©
(
şs
).
assign
 ( 
nv¬
+
Ágt
, 0 );

480 
	gmycÜr
.
©
(
şs
).
»size
Ğ
nv¬
+
Ágt
 );

481 
	gmy´of
.
©
(
şs
).
»size
Ğ
nv¬
+
Ágt
 );

482 
UIÁ_t
 
	giv¬
=0; iv¬ < 
	gnv¬
+
	gÁgt
; ivar++) {

483 
	gmycÜr
.
©
(
şs
).©(
iv¬
).
»size
Ğ
nv¬
+
Ágt
 );

484 
	gmy´of
.
©
(
şs
).©(
iv¬
).
»size
Ğ
nv¬
+
Ágt
 );

485 
	gmycÜr
.
©
(
şs
).©(
iv¬
).
assign
Ğ
nv¬
+
Ágt
, 0 );

486 
	gmy´of
.
©
(
şs
).©(
iv¬
).
assign
Ğ
nv¬
+
Ágt
, 0 );

493 ià(
	gnv¬
+
	gÁgt
 > (
	gUIÁ_t
)
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
	gfMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
) {

494 
IÁ_t
 
	gnhi¡s
 = (
nv¬
+
Ágt
)*(nvar+ntgt - 1)/2;

495 
Log
(è<< 
	gkINFO
 << 
gToŞs
().
CŞÜ
("dg»’"è<< 
	gEndl
;

496 
Log
(è<< 
	gkINFO
 << "<PlÙV¬ŸbËs> WÈnÙ…roduû sÿ‰”…lÙ ==> " << 
	gEndl
;

497 
Log
(è<< 
	gkINFO


498 << "| Thnumb” oà" << 
	gnv¬
 << " iÅuˆv¬ŸbË ªd " << 
	gÁgt
 << "arget values would„equire "

499 << 
	gnhi¡s
 << "wo-dim’siÚ®" << 
	gEndl
;

500 
Log
(è<< 
	gkINFO


501 << "| hi¡og¿ms, which would occupyhcompu‹r' memÜy. NÙth©his" << 
	gEndl
;

502 
Log
(è<< 
	gkINFO


503 << "| suµ»ssiÚ dÛ nÙ havªy cÚ£qu’û fÜ you¸ª®ysis, oth”" << 
	gEndl
;

504 
Log
(è<< 
	gkINFO


505 << "|hª‚Ù di¥osšg oàthe£ sÿ‰”…lÙs. You cª modifyhmaximum" << 
	gEndl
;

506 
Log
(è<< 
	gkINFO


507 << "|‚umb” oàšpuˆv¬ŸbË ®lowedØg’”©sÿ‰”…lÙ š your" << 
	gEndl
;

508 
Log
(è<< "| süˆvŸhcommªd†še:" << 
	gEndl
;

509 
Log
(è<< 
	gkINFO


511 << 
gToŞs
().
CŞÜ
("»£t"è<< 
	gEndl
;

512 
Log
(è<< 
	gEndl
;

513 
Log
(è<< 
	gkINFO
 << "SommÜouut" << 
	gEndl
;

516 
DoubË_t
 
	gtimesRMS
 = 
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fTimesRMS
;

517 
UIÁ_t
 
	gnbšs1D
 = 
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fNbšs1D
;

518 
UIÁ_t
 
	gnbšs2D
 = 
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fNbšs2D
;

520 
UIÁ_t
 
	gv¬_tgt
 = 0; var_tgt < 2; var_tgt++) {

521 
UIÁ_t
 
	gÆoİs
 = ( 
v¬_tgt
 =ğ0? 
nv¬
:
Ágt
 );

522 
UIÁ_t
 
	giv¬
=0; iv¬<
	gÆoİs
; ivar++) {

523 cÚ¡ 
	gV¬ŸbËInfo
& 
	gšfo
 = ( 
v¬_tgt
 =ğ0 ? 
V¬ŸbË
Ğ
iv¬
 ) : 
T¬g‘
(ivar) );

524 
TSŒšg
 
	gmyV¬i
 = 
šfo
.
G‘IÁ”ÇlName
();

526 
DoubË_t
 
	gm—n
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
).
fM—n
;

527 
DoubË_t
 
	grms
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
).
fRMS
;

529 
IÁ_t
 
	gşs
 = 0; cl < 
	gnşs
; cls++) {

531 
TSŒšg
 
	gşassName
 = 
fD©aS‘Info
.
G‘CÏssInfo
(
şs
)->
G‘Name
();

534 
	gşassName
 +ğ(
Ágt
 =ğ1 && 
v¬_tgt
 == 1 ? "_target" : "");

537 
TH1
* 
	gh
 = 0;

538 ià(
	gšfo
.
G‘V¬Ty³
() == 'I') {

540 
IÁ_t
 
xmš
 = 
TM©h
::
Nšt
Ğ
G‘Mš
ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
) );

541 
IÁ_t
 
	gxmax
 = 
TM©h
::
Nšt
Ğ
G‘Max
ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
) + 1 );

542 
IÁ_t
 
	gnbšs
 = 
xmax
 - 
xmš
;

544 
	gh
 = 
Ãw
 
TH1F
Ğ
FÜm
("%s__%s%s", 
myV¬i
.
D©a
(), 
şassName
.D©a(), 
ŒªsfTy³
.Data()),

545 
šfo
.
G‘T™Ë
(), 
nbšs
, 
xmš
, 
xmax
 );

548 
DoubË_t
 
	gxmš
 = 
TM©h
::
Max
Ğ
G‘Mš
ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
), 
m—n
 - 
timesRMS
*
rms
 );

549 
DoubË_t
 
	gxmax
 = 
TM©h
::
Mš
Ğ
G‘Max
ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
), 
m—n
 + 
timesRMS
*
rms
 );

553 ià(
	gxmš
 >ğ
xmax
èxmax = 
xmš
*1.1;

554 ià(
	gxmš
 >ğ
xmax
èxmax = 
xmš
 + 1;

556 
	gxmax
 +ğ(
xmax
 - 
xmš
)/
nbšs1D
;

558 
	gh
 = 
Ãw
 
TH1F
Ğ
FÜm
("%s__%s%s", 
myV¬i
.
D©a
(), 
şassName
.D©a(), 
ŒªsfTy³
.Data()),

559 
šfo
.
G‘T™Ë
(), 
nbšs1D
, 
xmš
, 
xmax
 );

562 
	gh
->
G‘Xaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘XT™ËW™hUn™
Ğ
G‘V¬ŸbËAxisT™Ë
Ğ
šfo
 ), info.
G‘Un™
() ) );

563 
	gh
->
G‘Yaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘YT™ËW™hUn™
Ğ*
h
, 
šfo
.
G‘Un™
(), 
kFALSE
 ) );

564 
	ghV¬s
.
©
(
şs
).©((
v¬_tgt
*
nv¬
)+
iv¬
èğ
h
;

567 ià(
	gnv¬
+
	gÁgt
 <ğ(
UIÁ_t
)
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
) {

569 
UIÁ_t
 
v_t
 = 0; 
	gv_t
 < 2; v_t++) {

570 
UIÁ_t
 
	gÆ
 = ( 
v_t
==0?
nv¬
:
Ágt
 );

571 
UIÁ_t
 
	g¡¬t
 = ( 
v_t
==0? (
v¬_tgt
==0?
iv¬
+1:0):(v¬_tgt==0?
Æ
:ivar+1) );

572 
UIÁ_t
 
	gj
=
¡¬t
; j<
	gÆ
; j++) {

574 cÚ¡ 
	gV¬ŸbËInfo
& 
	gšfoj
 = ( 
v_t
 =ğ0 ? 
V¬ŸbË
Ğ
j
 ) : 
T¬g‘
(j) );

575 
TSŒšg
 
	gmyV¬j
 = 
šfoj
.
G‘IÁ”ÇlName
();

577 
DoubË_t
 
	grxmš
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v_t
*
nv¬
 )+
iv¬
).
fMš
;

578 
DoubË_t
 
	grxmax
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v_t
*
nv¬
 )+
iv¬
).
fMax
;

579 
DoubË_t
 
	grymš
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v_t
*
nv¬
 )+
j
).
fMš
;

580 
DoubË_t
 
	grymax
 = 
fV¬ŸbËSts
.
©
(
fNumC
-1).©ĞĞ
v_t
*
nv¬
 )+
j
).
fMax
;

583 
TH2F
* 
	gh2
 = 
Ãw
 TH2FĞ
FÜm
Ğ"sÿt_%s_vs_%s_%s%s" , 
myV¬j
.
D©a
(), 
myV¬i
.Data(),

584 
şassName
.
D©a
(), 
ŒªsfTy³
.Data() ),

585 
FÜm
Ğ"% v”su % (%s)%s", 
šfoj
.
G‘T™Ë
(), 
šfo
.GetTitle(),

586 
şassName
.
D©a
(), 
ŒªsfTy³
.Data() ),

587 
nbšs2D
, 
rxmš
 , 
rxmax
,

588 
nbšs2D
, 
rymš
 , 
rymax
 );

590 
	gh2
->
G‘Xaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘XT™ËW™hUn™
Ğ
G‘V¬ŸbËAxisT™Ë
Ğ
šfo
 ), infØ.
G‘Un™
() ) );

591 
	gh2
->
G‘Yaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘XT™ËW™hUn™
Ğ
G‘V¬ŸbËAxisT™Ë
Ğ
šfoj
 ), infoj.
G‘Un™
() ) );

592 
	gmycÜr
.
©
(
şs
).©((
v¬_tgt
*
nv¬
)+
iv¬
).©((
v_t
*nv¬)+
j
èğ
h2
;

595 
TProfe
* 
	gp
 = 
Ãw
 TProfeĞ
FÜm
Ğ"´of_%s_vs_%s_%s%s", 
myV¬j
.
D©a
(),

596 
myV¬i
.
D©a
(), 
şassName
.Data(),

597 
ŒªsfTy³
.
D©a
() ),

598 
FÜm
( "profile %s versus %s (%s)%s",

599 
šfoj
.
G‘T™Ë
(), 
šfo
.GetTitle(),

600 
şassName
.
D©a
(), 
ŒªsfTy³
.D©a(è), 
nbšs1D
,

601 
rxmš
, 
rxmax
 );

604 
	gp
->
G‘Xaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘XT™ËW™hUn™
Ğ
G‘V¬ŸbËAxisT™Ë
Ğ
šfo
 ), infØ.
G‘Un™
() ) );

605 
	gp
->
G‘Yaxis
()->
S‘T™Ë
Ğ
gToŞs
().
G‘XT™ËW™hUn™
Ğ
G‘V¬ŸbËAxisT™Ë
Ğ
šfoj
 ), infoj.
G‘Un™
() ) );

606 
	gmy´of
.
©
(
şs
).©((
v¬_tgt
*
nv¬
)+
iv¬
).©((
v_t
*nv¬)+
j
èğ
p
;

614 
UIÁ_t
 
	gÃvts
 = 
ev’ts
.
size
();

617 
	g¡d
::
veùÜ
<
DoubË_t
> 
x»gm—n
 ( 
nv¬
+1, 0 );

618 
	g¡d
::
veùÜ
<
DoubË_t
> 
x2»gm—n
Ğ
nv¬
+1, 0 );

619 
	g¡d
::
veùÜ
<
DoubË_t
> 
xC»gm—n
Ğ
nv¬
+1, 0 );

622 
UIÁ_t
 
	g›vt
=0; ievt<
	gÃvts
; ievt++) {

624 cÚ¡ 
Ev’t
* 
	gev
 = 
ev’ts
[
›vt
];

626 
Flßt_t
 
	gweight
 = 
ev
->
G‘Weight
();

627 
IÁ_t
 
	gşs
 = 
ev
->
G‘CÏss
();

630 ià(
	gÁgt
 == 1) {

631 
Flßt_t
 
v®r
 = 
ev
->
G‘T¬g‘
(0);

632 
	gx»gm—n
[
nv¬
] +ğ
v®r
;

633 
	gx2»gm—n
[
nv¬
] +ğ
v®r
*valr;

634 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

635 
Flßt_t
 
	gv®i
 = 
ev
->
G‘V®ue
(
iv¬
);

636 
	gx»gm—n
[
iv¬
] +ğ
v®i
;

637 
	gx2»gm—n
[
iv¬
] +ğ
v®i
*vali;

638 
	gxC»gm—n
[
iv¬
] +ğ
v®i
*
v®r
;

643 
UIÁ_t
 
	gv¬_tgt
 = 0; var_tgt < 2; var_tgt++) {

644 
UIÁ_t
 
	gÆoİs
 = ( 
v¬_tgt
 =ğ0? 
nv¬
:
Ágt
 );

645 
UIÁ_t
 
	giv¬
=0; iv¬<
	gÆoİs
; ivar++) {

646 
Flßt_t
 
	gv®i
 = ( 
v¬_tgt
 =ğ0 ? 
ev
->
G‘V®ue
(
iv¬
è:ƒv->
G‘T¬g‘
(ivar) );

649 
	ghV¬s
.
©
(
şs
).©ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
)->
Fl
Ğ
v®i
, 
weight
 );

652 ià(
	gnv¬
+
	gÁgt
 <ğ(
UIÁ_t
)
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
) {

654 
UIÁ_t
 
v_t
 = 0; 
	gv_t
 < 2; v_t++) {

655 
UIÁ_t
 
	gÆ
 = ( 
v_t
==0 ? 
nv¬
 : 
Ágt
 );

656 
UIÁ_t
 
	g¡¬t
 = ( 
v_t
==0 ? (
v¬_tgt
==0?
iv¬
+1:0è: (v¬_tgt==0?
Æ
:ivar+1) );

657 
UIÁ_t
 
	gj
=
¡¬t
; j<
	gÆ
; j++) {

658 
Flßt_t
 
	gv®j
 = ( 
v_t
 =ğ0 ? 
ev
->
G‘V®ue
(
j
è:ƒv->
G‘T¬g‘
(j) );

659 
	gmycÜr
.
©
(
şs
).©ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
).©ĞĞ
v_t
*nv¬ )+
j
)->
Fl
Ğ
v®i
, 
v®j
, 
weight
 );

660 
	gmy´of
.
©
(
şs
).©ĞĞ
v¬_tgt
*
nv¬
 )+
iv¬
).©ĞĞ
v_t
*nv¬ )+
j
)->
Fl
Ğ
v®i
, 
v®j
, 
weight
 );

669 ià(
	gÁgt
 == 1) {

670 
UIÁ_t
 
iv¬
=0; 
	giv¬
<=
nv¬
; ivar++) {

671 
	gx»gm—n
[
iv¬
] /ğ
Ãvts
;

672 
	gx2»gm—n
[
iv¬
] = 
x2»gm—n
[iv¬]/
Ãvts
 - 
x»gm—n
[ivar]*xregmean[ivar];

674 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

675 
	gxC»gm—n
[
iv¬
] = 
xC»gm—n
[iv¬]/
Ãvts
 - 
x»gm—n
[iv¬]*x»gm—n[
nv¬
];

676 
	gxC»gm—n
[
iv¬
] /ğ
TM©h
::
Sq¹
Ğ
x2»gm—n
[iv¬]*x2»gm—n[
nv¬
] );

679 
	gfRªkšg
.
push_back
Ğ
Ãw
 
Rªkšg
Ğ
G‘Name
() + "Transformation", "|Correlation witharget|" ) );

680 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

681 
DoubË_t
 
	gabscÜ
 = 
TM©h
::
Abs
Ğ
xC»gm—n
[
iv¬
] );

682 
	gfRªkšg
.
back
()->
AddRªk
Ğ
Rªk
Ğ
fD©aS‘Info
.
G‘V¬ŸbËInfo
(
iv¬
).
G‘Lab–
(), 
abscÜ
 ) );

685 ià(
	gnv¬
+
	gÁgt
 <ğ(
UIÁ_t
)
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
) {

688 
fRªkšg
.
push_back
Ğ
Ãw
 
Rªkšg
Ğ
G‘Name
() + "Transformation", "Mutual information" ) );

689 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

690 
TH2F
* 
	gh1
 = 
mycÜr
.
©
(0).©Ğ
nv¬
 ).©Ğ
iv¬
 );

691 
DoubË_t
 
	gmi
 = 
gToŞs
().
G‘Mutu®InfÜm©iÚ
Ğ*
h1
 );

692 
	gfRªkšg
.
back
()->
AddRªk
Ğ
Rªk
Ğ
fD©aS‘Info
.
G‘V¬ŸbËInfo
(
iv¬
).
G‘Lab–
(), 
mi
 ) );

696 
	gfRªkšg
.
push_back
Ğ
Ãw
 
Rªkšg
Ğ
G‘Name
() + "Transformation", "Correlation Ratio" ) );

697 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

698 
TH2F
* 
	gh2
 = 
mycÜr
.
©
(0).©Ğ
nv¬
 ).©Ğ
iv¬
 );

699 
DoubË_t
 
	gü
 = 
gToŞs
().
G‘CÜ»ÏtiÚR©io
Ğ*
h2
 );

700 
	gfRªkšg
.
back
()->
AddRªk
Ğ
Rªk
Ğ
fD©aS‘Info
.
G‘V¬ŸbËInfo
(
iv¬
).
G‘Lab–
(), 
ü
 ) );

704 
	gfRªkšg
.
push_back
Ğ
Ãw
 
Rªkšg
Ğ
G‘Name
() + "Transformation", "Correlation Ratio (T)" ) );

705 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬
; ivar++) {

706 
TH2F
* 
	gh2T
 = 
gToŞs
().
T¿n¥o£Hi¡
Ğ*
mycÜr
.
©
(0).©Ğ
nv¬
 ).©Ğ
iv¬
 ) );

707 
DoubË_t
 
	gü
 = 
gToŞs
().
G‘CÜ»ÏtiÚR©io
Ğ*
h2T
 );

708 
	gfRªkšg
.
back
()->
AddRªk
Ğ
Rªk
Ğ
fD©aS‘Info
.
G‘V¬ŸbËInfo
(
iv¬
).
G‘Lab–
(), 
ü
 ) );

709 
d–‘e
 
	gh2T
;

715 ià(
	gfD©aS‘Info
.
G‘NCÏs£s
() == 2

716 && 
fD©aS‘Info
.
G‘CÏssInfo
("SigÇl"è!ğ
NULL


717 && 
fD©aS‘Info
.
G‘CÏssInfo
("Background"è!ğ
NULL


719 
fRªkšg
.
push_back
Ğ
Ãw
 
Rªkšg
Ğ
G‘Name
() + "Transformation", "Separation" ) );

720 
UIÁ_t
 
	gi
=0; i<
	gnv¬
; i++) {

721 
DoubË_t
 
	g£p
 = 
gToŞs
().
G‘S•¬©iÚ
Ğ
hV¬s
.
©
(
fD©aS‘Info
.
G‘CÏssInfo
("SigÇl"è->
G‘Numb”
()).©(
i
),

722 
hV¬s
.
©
(
fD©aS‘Info
.
G‘CÏssInfo
("Background")->
G‘Numb”
()).©(
i
) );

723 
	gfRªkšg
.
back
()->
AddRªk
Ğ
Rªk
Ğ
hV¬s
.
©
(
fD©aS‘Info
.
G‘CÏssInfo
("SigÇl")->
G‘Numb”
()).©(
i
)->
G‘T™Ë
(),

724 
£p
 ) );

732 
TDœeùÜy
* 
	gloÿlDœ
 = 
theDœeùÜy
;

733 ià(
	gtheDœeùÜy
 == 0) {

735 
fRoÙBa£Dœ
->
cd
();

736 
TSŒšg
 
	gouutDœ
 = TString("InputVariables");

737 
TLi¡I‹r
 
ŒIt
(&
fT¿nsfÜm©iÚs
);

738 
V¬ŸbËT¿nsfÜmBa£
 *
	gŒf
 = (V¬ŸbËT¿nsfÜmBa£*è
ŒIt
())

739 
ouutDœ
 +ğ"_" + 
TSŒšg
(
Œf
->
G‘ShÜtName
());

741 
TSŒšg
 
	guniqueOuutDœ
 = 
ouutDœ
;

742 
IÁ_t
 
	gcouÁ”
 = 0;

743 
TObjeù
* 
	go
 = 
NULL
;

744  (
	go
 = 
fRoÙBa£Dœ
->
FšdObjeù
(
uniqueOuutDœ
)) != 0 ){

745 
uniqueOuutDœ
 = 
ouutDœ
+
FÜm
("_%d",
couÁ”
);

746 
Log
(è<< 
	gkINFO
 << "A " << 
	go
->
CÏssName
(è<< " w™h‚am" << o->
G‘Name
() << "‡lreadyƒxists in "

747 << 
	gfRoÙBa£Dœ
->
G‘P©h
(è<< ", I wÈŒy w™h "<<
	guniqueOuutDœ
<<"." << 
	gEndl
;

748 ++
	gcouÁ”
;

756 
	gloÿlDœ
 = 
fRoÙBa£Dœ
->
mkdœ
Ğ
uniqueOuutDœ
 );

757 
	gloÿlDœ
->
cd
();

759 
Log
(è<< 
	gkVERBOSE
 << "C»©ªd sw™chØdœeùÜy " << 
	gloÿlDœ
->
G‘P©h
(è<< 
	gEndl
;

762 
	gtheDœeùÜy
->
cd
();

765 
UIÁ_t
 
	gi
=0; i<
	gnv¬
+
	gÁgt
; i++) {

766 
IÁ_t
 
	gşs
 = 0; cl < 
	gnşs
; cls++) {

767 ià(
	ghV¬s
.
©
(
şs
).©(
i
) != 0) {

768 
hV¬s
.
©
(
şs
).©(
i
)->
Wr™e
();

769 
	ghV¬s
.
©
(
şs
).©(
i
)->
S‘DœeùÜy
(0);

770 
d–‘e
 
	ghV¬s
.
©
(
şs
).©(
i
);

776 ià(
	gnv¬
+
	gÁgt
 <ğ(
UIÁ_t
)
gCÚfig
().
G‘V¬ŸbËPlÙtšg
().
fMaxNumOfAÎowedV¬ŸbËsFÜSÿ‰”PlÙs
) {

778 
loÿlDœ
 =†oÿlDœ->
mkdœ
( "CorrelationPlots" );

779 
	gloÿlDœ
 ->
cd
();

780 
Log
(è<< 
	gkDEBUG
 << "C»©sÿ‰”‡nd…rof¶Ù š¬g‘-fdœeùÜy: " << 
	gEndl
;

781 
Log
(è<< 
	gkDEBUG
 << 
	gloÿlDœ
->
G‘P©h
(è<< 
	gEndl
;

784 
UIÁ_t
 
	gi
=0; i<
	gnv¬
+
	gÁgt
; i++) {

785 
UIÁ_t
 
	gj
=
i
+1; j<
	gnv¬
+
	gÁgt
; j++) {

786 
IÁ_t
 
	gşs
 = 0; cl < 
	gnşs
; cls++) {

787 ià(
	gmycÜr
.
©
(
şs
).©(
i
).©(
j
) != 0 ) {

788 
mycÜr
.
©
(
şs
).©(
i
).©(
j
)->
Wr™e
();

789 
	gmycÜr
.
©
(
şs
).©(
i
).©(
j
)->
S‘DœeùÜy
(0);

790 
d–‘e
 
	gmycÜr
.
©
(
şs
).©(
i
).©(
j
);

792 ià(
	gmy´of
.
©
(
şs
).©(
i
).©(
j
) != 0) {

793 
my´of
.
©
(
şs
).©(
i
).©(
j
)->
Wr™e
();

794 
	gmy´of
.
©
(
şs
).©(
i
).©(
j
)->
S‘DœeùÜy
(0);

795 
d–‘e
 
	gmy´of
.
©
(
şs
).©(
i
).©(
j
);

801 ià(
	gtheDœeùÜy
 !ğ0 ) 
theDœeùÜy
->
cd
();

802 
	gfRoÙBa£Dœ
->
cd
();

808 
	g¡d
::
veùÜ
<
TSŒšg
>* 
TMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘T¿nsfÜm©iÚSŒšgsOfLa¡T¿nsfÜm
() const

810 
V¬ŸbËT¿nsfÜmBa£
* 
Œf
 = ((V¬ŸbËT¿nsfÜmBa£*)
	`G‘T¿nsfÜm©iÚLi¡
().
	`La¡
());

811 ià(!
Œf
)  0;

812  
Œf
->
	`G‘T¿nsfÜm©iÚSŒšgs
Ğ
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`back
() );

813 
	}
}

818 cÚ¡ * 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘NameOfLa¡T¿nsfÜm
() const

820 
V¬ŸbËT¿nsfÜmBa£
* 
Œf
 = ((V¬ŸbËT¿nsfÜmBa£*)
	`G‘T¿nsfÜm©iÚLi¡
().
	`La¡
());

821 ià(!
Œf
)  0;

822  
Œf
->
	`G‘Name
();

823 
	}
}

828 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$Wr™eToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
 ) const

830 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
);

831 
¡d
::
veùÜ
< 
IÁ_t
 >::
cÚ¡_™”©Ü
 
rClsIt
 = 
fT¿nsfÜm©iÚsReã»nûCÏs£s
.
	`begš
();

833 
o
 << "NT¿nsfÜmtiÚ " << 
fT¿nsfÜm©iÚs
.
	`G‘Size
(è<< 
¡d
::
’dl
 << std::endl;

835 
CÏssInfo
* 
ci
;

836 
UIÁ_t
 
i
 = 1;

837 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
()) {

838 
o
 << "#TR -*-*-*-*-*-*-*¿nsfÜm©iÚ " << 
i
++ << ": " << 
Œf
->
	`G‘Name
(è<< " -*-*-*-*-*-*-*-" << 
¡d
::
’dl
;

839 
Œf
->
	`Wr™eT¿nsfÜm©iÚToSŒ—m
(
o
);

840 
ci
 = 
fD©aS‘Info
.
	`G‘CÏssInfo
Ğ(*
rClsIt
) );

841 
TSŒšg
 
şsName
;

842 ià(
ci
 =ğ0 ) 
şsName
 = "AllClasses";

843 
şsName
 = 
ci
->
	`G‘Name
();

844 
o
 << "Reã»nûCÏs " << 
şsName
 << 
¡d
::
’dl
;

845 
rClsIt
++;

847 
	}
}

853 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$AddXMLTo
Ğ* 
·»Á
 ) const

855 if(!
·»Á
) ;

856 * 
Œfs
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transformations");

857 
	`gToŞs
().
	`AddA‰r
Ğ
Œfs
, "NT¿nsfÜm©iÚs", 
fT¿nsfÜm©iÚs
.
	`G‘Size
() );

858 
TLi¡I‹r
 
	`ŒIt
(&
fT¿nsfÜm©iÚs
);

859 
V¬ŸbËT¿nsfÜmBa£
 *
Œf
 = (V¬ŸbËT¿nsfÜmBa£*è
	`ŒIt
()èŒf->
	`A‰achXMLTo
(
Œfs
);

860 
	}
}

864 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$R—dFromSŒ—m
Ğ
¡d
::
i¡»am
& )

866 
	`Log
(è<< 
kFATAL
 << "R—d¿nsfÜm©iÚ nÙ im¶em’‹d" << 
Endl
;

868 
	}
}

872 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$R—dFromXML
Ğ* 
Œf¢ode
 )

874 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
Œf¢ode
 );

875 
ch
) {

876 
IÁ_t
 
idxCls
 = -1;

877 
TSŒšg
 
Œâame
;

878 
	`gToŞs
().
	`R—dA‰r
(
ch
, "Name", 
Œâame
);

880 
V¬ŸbËT¿nsfÜmBa£
* 
ÃwŒf
 = 0;

882 ià(
Œâame
 == "Decorrelation" ) {

883 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËDecÜrT¿nsfÜm
(
fD©aS‘Info
);

885 ià(
Œâame
 == "PCA" ) {

886 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËPCAT¿nsfÜm
(
fD©aS‘Info
);

888 ià(
Œâame
 == "Gauss" ) {

889 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËGaussT¿nsfÜm
(
fD©aS‘Info
);

891 ià(
Œâame
 == "Uniform" ) {

892 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËGaussT¿nsfÜm
(
fD©aS‘Info
, "Uniform");

894 ià(
Œâame
 == "Normalize" ) {

895 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËNÜm®izeT¿nsfÜm
(
fD©aS‘Info
);

897 ià(
Œâame
 == "Rearrange" ) {

898 
ÃwŒf
 = 
Ãw
 
	`V¬ŸbËR—¼ªgeT¿nsfÜm
(
fD©aS‘Info
);

900 ià(
Œâame
 != "None") {

903 
	`Log
(è<< 
kFATAL
 << "<ReadFromXML> Variableransform '"

904 << 
Œâame
 << "' unknown." << 
Endl
;

906 
ÃwŒf
->
	`R—dFromXML
Ğ
ch
 );

907 
	`AddT¿nsfÜm©iÚ
Ğ
ÃwŒf
, 
idxCls
 );

908 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

910 
	}
}

915 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$PrštV¬ŸbËRªkšg
() const

918 
	`Log
(è<< 
kINFO
 << "Rªkšg iÅuˆv¬ŸbË (m‘hod un¥ecific)..." << 
Endl
;

919 
¡d
::
veùÜ
<
Rªkšg
*>::
cÚ¡_™”©Ü
 
™
 = 
fRªkšg
.
	`begš
();

920 ; 
™
 !ğ
fRªkšg
.
	`’d
(); it++è(*™)->
	`Pršt
();

921 
	}
}

925 
DoubË_t
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘M—n
Ğ
IÁ_t
 
iv¬
, IÁ_ˆ
şs
 ) const

927 
Œy
 {

928  
fV¬ŸbËSts
.
	`©
(
şs
).©(
iv¬
).
fM—n
;

930 
	`ÿtch
(...) {

931 
Œy
 {

932  
fV¬ŸbËSts
.
	`©
(
fNumC
-1).©(
iv¬
).
fM—n
;

934 
	`ÿtch
(...) {

935 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghm—Àv®ue. " << 
Endl
;

938 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghm—Àv®ue. V®u0 giv’ back" << 
Endl
;

940 
	}
}

944 
DoubË_t
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘RMS
Ğ
IÁ_t
 
iv¬
, IÁ_ˆ
şs
 ) const

946 
Œy
 {

947  
fV¬ŸbËSts
.
	`©
(
şs
).©(
iv¬
).
fRMS
;

949 
	`ÿtch
(...) {

950 
Œy
 {

951  
fV¬ŸbËSts
.
	`©
(
fNumC
-1).©(
iv¬
).
fRMS
;

953 
	`ÿtch
(...) {

954 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghRMS v®ue. " << 
Endl
;

957 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghRMS v®ue. V®u0 giv’ back" << 
Endl
;

959 
	}
}

963 
DoubË_t
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘Mš
Ğ
IÁ_t
 
iv¬
, IÁ_ˆ
şs
 ) const

965 
Œy
 {

966  
fV¬ŸbËSts
.
	`©
(
şs
).©(
iv¬
).
fMš
;

968 
	`ÿtch
(...) {

969 
Œy
 {

970  
fV¬ŸbËSts
.
	`©
(
fNumC
-1).©(
iv¬
).
fMš
;

972 
	`ÿtch
(...) {

973 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghmšimum v®ue. " << 
Endl
;

976 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghmšimum v®ue. V®u0 giv’ back" << 
Endl
;

978 
	}
}

982 
DoubË_t
 
	gTMVA
::
T¿nsfÜm©iÚHªdËr
::
	$G‘Max
Ğ
IÁ_t
 
iv¬
, IÁ_ˆ
şs
 ) const

984 
Œy
 {

985  
fV¬ŸbËSts
.
	`©
(
şs
).©(
iv¬
).
fMax
;

987 
	`ÿtch
(...) {

988 
Œy
 {

989  
fV¬ŸbËSts
.
	`©
(
fNumC
-1).©(
iv¬
).
fMax
;

991 
	`ÿtch
(...) {

992 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghmaximum v®ue. " << 
Endl
;

995 
	`Log
(è<< 
kWARNING
 << "IncÚsi¡’ˆv¬ŸbË s‹ wh’„—dšghmaximum v®ue. V®u0 giv’ back" << 
Endl
;

997 
	}
}

	@src/Types.cxx

33 
	~"TMVA/Ty³s.h
"

35 
	~"TMVA/MsgLogg”.h
"

37 
	~"Rty³sCÜe.h
"

38 
	~"TSŒšg.h
"

40 
	~<m­
>

41 
	~<io¡»am
>

42 #ià
__ılu¥lus
 > 199711L

43 
	~<mu‹x
>

46 #ià
__ılu¥lus
 > 199711L

47 
	g¡d
::
©omic
<
TMVA
::
Ty³s
*> TMVA::Ty³s::
fgTy³sPŒ
{0};

48 
	g¡d
::
mu‹x
 
gTy³sMu‹x
;

50 
	gTMVA
::
Ty³s
* 
TMVA
::Ty³s::
fgTy³sPŒ
 = 0;

56 
	gTMVA
::
Ty³s
::
	$Ty³s
()

57 : 
	`fLogg”
Ğ
Ãw
 
	`MsgLogg”
("Types") )

59 
	}
}

61 
TMVA
::
Ty³s
::~
	$Ty³s
()

64 
d–‘e
 
fLogg”
;

65 
	}
}

70 
	gTMVA
::
Ty³s
& 
TMVA
::Ty³s::
	$In¡ªû
()

72 #ià
__ılu¥lus
 > 199711L

73 if(!
fgTy³sPŒ
) {

74 
Ty³s
* 
tmp
 = 
Ãw
 
	`Ty³s
();

75 
Ty³s
* 
ex³ùed
 = 0;

76 if(!
fgTy³sPŒ
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
,
tmp
)) {

78 
d–‘e
 
tmp
;

81  *
fgTy³sPŒ
;

83  
fgTy³sPŒ
 ? *fgTy³sPŒ : *(fgTy³sPŒ = 
Ãw
 
	`Ty³s
());

85 
	}
}

90 
	gTMVA
::
Ty³s
::
	$De¡royIn¡ªû
()

92 #ià
__ılu¥lus
 > 199711L

93 ià(
fgTy³sPŒ
 !ğ0è{ 
d–‘e
 fgTy³sPŒ.
	`lßd
(); fgTypesPtr = 0; }

95 ià(
fgTy³sPŒ
 !ğ0è{ 
d–‘e
 fgTypesPtr; fgTypesPtr = 0; }

97 
	}
}

101 
BoŞ_t
 
	gTMVA
::
Ty³s
::
	$AddTy³M­pšg
Ğ
Ty³s
::
EMVA
 
m‘hod
, cÚ¡ 
TSŒšg
& 
m‘hodÇme
 )

103 #ià
__ılu¥lus
 > 199711L

104 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`gu¬d
(
gTy³sMu‹x
);

106 
¡d
::
m­
<
TSŒšg
, 
EMVA
>::
cÚ¡_™”©Ü
 
™
 = 
fSŒ2ty³
.
	`fšd
Ğ
m‘hodÇme
 );

107 ià(
™
 !ğ
fSŒ2ty³
.
	`’d
()) {

108 
	`Log
(è<< 
kFATAL


109 << "CªnÙ‡dd m‘hod " << 
m‘hodÇme


110 << "ØthÇme->ty³ m­ beÿu£ iˆexi¡ ®»ady" << 
Endl
;

111  
kFALSE
;

114 
fSŒ2ty³
[
m‘hodÇme
] = 
m‘hod
;

115  
kTRUE
;

116 
	}
}

121 
	gTMVA
::
Ty³s
::
EMVA
 
TMVA
::Ty³s::
	$G‘M‘hodTy³
ĞcÚ¡ 
TSŒšg
& 
m‘hod
 ) const

123 #ià
__ılu¥lus
 > 199711L

124 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`gu¬d
(
gTy³sMu‹x
);

126 
¡d
::
m­
<
TSŒšg
, 
EMVA
>::
cÚ¡_™”©Ü
 
™
 = 
fSŒ2ty³
.
	`fšd
Ğ
m‘hod
 );

127 ià(
™
 =ğ
fSŒ2ty³
.
	`’d
()) {

128 
	`Log
(è<< 
kFATAL
 << "UnknowÀm‘hod iÀm­: " << 
m‘hod
 << 
Endl
;

129  
kV¬ŸbË
;

131  
™
->
£cÚd
;

132 
	}
}

136 
TSŒšg
 
	gTMVA
::
Ty³s
::
	$G‘M‘hodName
Ğ
TMVA
::
Ty³s
::
EMVA
 
m‘hod
 ) const

138 #ià
__ılu¥lus
 > 199711L

139 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`gu¬d
(
gTy³sMu‹x
);

141 
¡d
::
m­
<
TSŒšg
, 
EMVA
>::
cÚ¡_™”©Ü
 
™
 = 
fSŒ2ty³
.
	`begš
();

142 ; 
™
!=
fSŒ2ty³
.
	`’d
(); it++èià(™->
£cÚd
 =ğ
m‘hod
è it->
fœ¡
;

143 
	`Log
(è<< 
kFATAL
 << "UnknowÀm‘hod index iÀm­: " << 
m‘hod
 << 
Endl
;

145 
	}
}

	@src/VarTransformHandler.cxx

21 
	~"TMVA/V¬T¿nsfÜmHªdËr.h
"

23 
	~"TMVA/CÏssif›rFaùÜy.h
"

24 
	~"TMVA/D©aLßd”.h
"

25 
	~"TMVA/Ev’t.h
"

26 
	~"TMVA/D©aIÅutHªdËr.h
"

27 
	~"TMVA/D©aS‘.h
"

28 
	~"TMVA/D©aS‘Info.h
"

29 
	~"TMVA/M‘hodBa£.h
"

30 
	~"TMVA/M‘hodDNN.h
"

31 
	~"TMVA/MsgLogg”.h
"

32 
	~"TMVA/ToŞs.h
"

33 
	~"TMVA/Ty³s.h
"

34 
	~"TMVA/V¬ŸbËInfo.h
"

36 
	~"TM©h.h
"

37 
	~"TVeùÜD.h
"

38 
	~"TFe.h
"

39 
	~"TT»e.h
"

40 
	~"TM©rix.h
"

41 
	~"TM©rixTS·r£.h
"

42 
	~"TM©rixDS·r£fwd.h
"

43 
	~"TCªvas.h
"

44 
	~"TG¿ph.h
"

45 
	~"TStyË.h
"

46 
	~"TLeg’d.h
"

47 
	~"TH2.h
"

49 
	~<®gÜ™hm
>

50 
	~<iomª
>

51 
	~<veùÜ
>

56 
	gTMVA
::
V¬T¿nsfÜmHªdËr
::
	$V¬T¿nsfÜmHªdËr
Ğ
D©aLßd”
* 
dl
 )

57 : 
	`fLogg”
 ( 
Ãw
 
	`MsgLogg”
(
	`TSŒšg
("V¬T¿nsfÜmHªdËr").
	`D©a
(), 
kINFO
) ),

58 
	`fD©aS‘Info
(
dl
->
	`G‘D©aS‘Info
()),

59 
	`fD©aLßd”
 (
dl
),

60 
	`fEv’ts
 (
fD©aS‘Info
.
	`G‘D©aS‘
()->
	$G‘Ev’tCŞËùiÚ
())

62 
	`Log
(è<< 
kINFO
 << "Numb” oàev’t - " << 
fEv’ts
.
	`size
(è<< 
Endl
;

63 
	}
}

68 
	gTMVA
::
V¬T¿nsfÜmHªdËr
::~
	$V¬T¿nsfÜmHªdËr
()

71 
d–‘e
 
fLogg”
;

72 
	}
}

91 
	gTMVA
::
D©aLßd”
* 
TMVA
::
V¬T¿nsfÜmHªdËr
::
	$V¬ŸnûTh»shŞd
(
DoubË_t
 
th»shŞd
)

93 
	`C®cNÜm
();

94 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fD©aS‘Info
.
	`G‘NV¬ŸbËs
();

95 
	`Log
(è<< 
kINFO
 << "Numb” oàv¬ŸbË befÜŒªsfÜm©iÚ: " << 
nv¬s
 << 
Endl
;

96 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬s
 = 
fD©aS‘Info
.
	`G‘V¬ŸbËInfos
();

102 
TMVA
::
D©aLßd”
 *
ŒªsfÜmedLßd”
 = 
Ãw
 TMVA::
	`D©aLßd”
("vt_transformed_dataset");

103 
	`Log
(è<< 
kINFO
 << "S–eùšg v¬ŸbË who£ v¬Ÿnû i abovth»shŞd v®uğ" << 
th»shŞd
 << 
Endl
;

104 
IÁ_t
 
maxL
 = 
fD©aS‘Info
.
	`G‘V¬ŸbËNameMaxL’gth
();

105 
maxL
 = maxL + 16;

106 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

107 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
) << "Selected Variables";

108 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(10è<< "V¬Ÿnû" << 
Endl
;

109 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

110 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

111 
DoubË_t
 
v¬Ÿnû
 = 
v¬s
[
iv¬
].
	`G‘V¬Ÿnû
();

112 ià(
v¬Ÿnû
 > 
th»shŞd
)

114 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
v¬s
[
iv¬
].
	`G‘Ex´essiÚ
();

115 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
v¬Ÿnû
 << 
Endl
;

116 
ŒªsfÜmedLßd”
->
	`AddV¬ŸbË
(
v¬s
[
iv¬
].
	`G‘Ex´essiÚ
(), v¬s[iv¬].
	`G‘V¬Ty³
());

119 
	`CİyD©aLßd”
(
ŒªsfÜmedLßd”
,
fD©aLßd”
);

120 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

123 
ŒªsfÜmedLßd”
->
	`P»·»T¿ššgAndTe¡T»e
(
fD©aLßd”
->
	`G‘D©aS‘Info
().
	`G‘Cut
("SigÇl"), fD©aLßd”->G‘D©aS‘Info().G‘Cut("Background"), fD©aLßd”->G‘D©aS‘Info().
	`G‘S¶™O±iÚs
());

124 
	`Log
(è<< 
kINFO
 << "Numb” oàv¬ŸbË aá”¿nsfÜm©iÚ: " << 
ŒªsfÜmedLßd”
->
	`G‘D©aS‘Info
().
	`G‘NV¬ŸbËs
(è<< 
Endl
;

126  
ŒªsfÜmedLßd”
;

127 
	}
}

136 
	gTMVA
::
V¬T¿nsfÜmHªdËr
::
	$Upd©eNÜm
 (
IÁ_t
 
iv¬
, 
DoubË_t
 
x
)

138 
IÁ_t
 
nv¬s
 = 
fD©aS‘Info
.
	`G‘NV¬ŸbËs
();

139 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬s
 = 
fD©aS‘Info
.
	`G‘V¬ŸbËInfos
();

140 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
rs
 = 
fD©aS‘Info
.
	`G‘T¬g‘Infos
();

141 ifĞ
iv¬
 < 
nv¬s
 ){

142 ià(
x
 < 
v¬s
[
iv¬
].
	`G‘Mš
()èv¬s[iv¬].
	`S‘Mš
(x);

143 ià(
x
 > 
v¬s
[
iv¬
].
	`G‘Max
()èv¬s[iv¬].
	`S‘Max
(x);

146 ià(
x
 < 
rs
[
iv¬
-
nv¬s
].
	`G‘Mš
()èrs[iv¬-nv¬s].
	`S‘Mš
(x);

147 ià(
x
 > 
rs
[
iv¬
-
nv¬s
].
	`G‘Max
()èrs[iv¬-nv¬s].
	`S‘Max
(x);

149 
	}
}

155 
	gTMVA
::
V¬T¿nsfÜmHªdËr
::
	$C®cNÜm
()

157 cÚ¡ 
¡d
::
veùÜ
<
TMVA
::
Ev’t
*>& 
ev’ts
 = 
fD©aS‘Info
.
	`G‘D©aS‘
()->
	`G‘Ev’tCŞËùiÚ
();

159 cÚ¡ 
UIÁ_t
 
nv¬s
 = 
fD©aS‘Info
.
	`G‘NV¬ŸbËs
();

160 cÚ¡ 
UIÁ_t
 
Ágts
 = 
fD©aS‘Info
.
	`G‘NT¬g‘s
();

161 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
v¬s
 = 
fD©aS‘Info
.
	`G‘V¬ŸbËInfos
();

162 
¡d
::
veùÜ
<
V¬ŸbËInfo
>& 
rs
 = 
fD©aS‘Info
.
	`G‘T¬g‘Infos
();

164 
UIÁ_t
 
Ãvts
 = 
ev’ts
.
	`size
();

166 
TVeùÜD
 
	`x2
Ğ
nv¬s
+
Ágts
 ); 
x2
 *= 0;

167 
TVeùÜD
 
	`x0
Ğ
nv¬s
+
Ágts
 ); 
x0
 *= 0;

168 
TVeùÜD
 
	`v0
Ğ
nv¬s
+
Ágts
 ); 
v0
 *= 0;

170 
DoubË_t
 
sumOfWeights
 = 0;

171 
UIÁ_t
 
›vt
=0; ievt<
Ãvts
; ievt++) {

172 cÚ¡ 
Ev’t
* 
ev
 = 
ev’ts
[
›vt
];

174 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

175 
sumOfWeights
 +ğ
weight
;

176 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

177 
DoubË_t
 
x
 = 
ev
->
	`G‘V®ue
(
iv¬
);

178 ià(
›vt
==0) {

179 
v¬s
[
iv¬
].
	`S‘Mš
(
x
);

180 
v¬s
[
iv¬
].
	`S‘Max
(
x
);

183 
	`Upd©eNÜm
(
iv¬
, 
x
 );

185 
	`x0
(
iv¬
è+ğ
x
*
weight
;

186 
	`x2
(
iv¬
è+ğ
x
*x*
weight
;

188 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++) {

189 
DoubË_t
 
x
 = 
ev
->
	`G‘T¬g‘
(
™gt
);

190 ià(
›vt
==0) {

191 
rs
[
™gt
].
	`S‘Mš
(
x
);

192 
rs
[
™gt
].
	`S‘Max
(
x
);

195 
	`Upd©eNÜm
Ğ
nv¬s
+
™gt
, 
x
 );

197 
	`x0
(
nv¬s
+
™gt
è+ğ
x
*
weight
;

198 
	`x2
(
nv¬s
+
™gt
è+ğ
x
*x*
weight
;

202 ià(
sumOfWeights
 <= 0) {

203 
	`Log
(è<< 
kFATAL
 << "he sum ofƒvent weights calculated for your input is == 0"

204 << " o¸exaùly: " << 
sumOfWeights
 << "h”i obviou¦y som´obËm..."<< 
Endl
;

208 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

209 
DoubË_t
 
m—n
 = 
	`x0
(
iv¬
)/
sumOfWeights
;

211 
v¬s
[
iv¬
].
	`S‘M—n
Ğ
m—n
 );

212 ià(
	`x2
(
iv¬
)/
sumOfWeights
 - 
m—n
*mean < 0) {

213 
	`Log
(è<< 
kFATAL
 << "hRMS oàyou¸špuˆv¬ŸbË " << 
iv¬


214 << "ƒv®u©e tØª imagš¬y‚umb”: sq¹("<< 
	`x2
(
iv¬
)/
sumOfWeights
 - 
m—n
*mean

216 << 
Endl
;

218 
v¬s
[
iv¬
].
	`S‘RMS
Ğ
TM©h
::
	`Sq¹
Ğ
	`x2
(iv¬)/
sumOfWeights
 - 
m—n
*mean) );

220 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++) {

221 
DoubË_t
 
m—n
 = 
	`x0
(
nv¬s
+
™gt
)/
sumOfWeights
;

222 
rs
[
™gt
].
	`S‘M—n
Ğ
m—n
 );

223 ià(
	`x2
(
nv¬s
+
™gt
)/
sumOfWeights
 - 
m—n
*mean < 0) {

224 
	`Log
(è<< 
kFATAL
 << "hRMS oàyou¸rg‘ v¬ŸbË " << 
™gt


225 << "ƒv®u©e tØª imagš¬y‚umb”: sq¹(" << 
	`x2
(
nv¬s
+
™gt
)/
sumOfWeights
 - 
m—n
*mean

227 << 
Endl
;

229 
rs
[
™gt
].
	`S‘RMS
Ğ
TM©h
::
	`Sq¹
Ğ
	`x2
(
nv¬s
+™gt)/
sumOfWeights
 - 
m—n
*mean) );

233 
UIÁ_t
 
›vt
=0; ievt<
Ãvts
; ievt++) {

234 cÚ¡ 
Ev’t
* 
ev
 = 
ev’ts
[
›vt
];

235 
DoubË_t
 
weight
 = 
ev
->
	`G‘Weight
();

237 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

238 
DoubË_t
 
x
 = 
ev
->
	`G‘V®ue
(
iv¬
);

239 
DoubË_t
 
m—n
 = 
v¬s
[
iv¬
].
	`G‘M—n
();

240 
	`v0
(
iv¬
è+ğ
weight
*(
x
-
m—n
)*(x-mean);

243 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++) {

244 
DoubË_t
 
x
 = 
ev
->
	`G‘T¬g‘
(
™gt
);

245 
DoubË_t
 
m—n
 = 
rs
[
™gt
].
	`G‘M—n
();

246 
	`v0
(
nv¬s
+
™gt
è+ğ
weight
*(
x
-
m—n
)*(x-mean);

250 
IÁ_t
 
maxL
 = 
fD©aS‘Info
.
	`G‘V¬ŸbËNameMaxL’gth
();

251 
maxL
 = maxL + 8;

252 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

253 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
) << "Variables";

254 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(10è<< "V¬Ÿnû" << 
Endl
;

255 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

258 
	`Log
(è<< 
¡d
::
	`£»cisiÚ
(5);

259 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++) {

260 
DoubË_t
 
v¬Ÿnû
 = 
	`v0
(
iv¬
)/
sumOfWeights
;

261 
v¬s
[
iv¬
].
	`S‘V¬Ÿnû
Ğ
v¬Ÿnû
 );

262 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
v¬s
[
iv¬
].
	`G‘Ex´essiÚ
();

263 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
v¬Ÿnû
 << 
Endl
;

266 
maxL
 = 
fD©aS‘Info
.
	`G‘T¬g‘NameMaxL’gth
();

267 
maxL
 = maxL + 8;

268 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

269 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
) << "Targets";

270 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(10è<< "V¬Ÿnû" << 
Endl
;

271 
	`Log
(è<< 
kINFO
 << "----------------------------------------------------------------" << 
Endl
;

273 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++) {

274 
DoubË_t
 
v¬Ÿnû
 = 
	`v0
(
nv¬s
+
™gt
)/
sumOfWeights
;

275 
rs
[
™gt
].
	`S‘V¬Ÿnû
Ğ
v¬Ÿnû
 );

276 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
rs
[
™gt
].
	`G‘Ex´essiÚ
();

277 
	`Log
(è<< 
kINFO
 << 
¡d
::
	`£tiosæags
(¡d::
ios
::
Ëá
è<< std::
	`£tw
(
maxL
è<< 
v¬Ÿnû
 << 
Endl
;

280 
	`Log
(è<< 
kINFO
 << "S‘ mšNÜm/maxNÜm fÜ v¬ŸbË to: " << 
Endl
;

281 
	`Log
(è<< 
¡d
::
	`£»cisiÚ
(3);

282 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++)

283 
	`Log
(è<< " " << 
v¬s
[
iv¬
].
	`G‘Ex´essiÚ
()

284 << "\t: [" << 
v¬s
[
iv¬
].
	`G‘Mš
(è<< "\t, " << v¬s[iv¬].
	`G‘Max
(è<< "\t] " << 
Endl
;

285 
	`Log
(è<< 
kINFO
 << "S‘ mšNÜm/maxNÜm fÜ¬g‘ to: " << 
Endl
;

286 
	`Log
(è<< 
¡d
::
	`£»cisiÚ
(3);

287 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++)

288 
	`Log
(è<< " " << 
rs
[
™gt
].
	`G‘Ex´essiÚ
()

289 << "\t: [" << 
rs
[
™gt
].
	`G‘Mš
(è<< "\t, " <<¬s[™gt].
	`G‘Max
(è<< "\t] " << 
Endl
;

290 
	`Log
(è<< 
¡d
::
	`£»cisiÚ
(5);

291 
	}
}

294 
	gTMVA
::
V¬T¿nsfÜmHªdËr
::
	$CİyD©aLßd”
(
TMVA
::
D©aLßd”
* 
des
, TMVA::D©aLßd”* 
¤c
)

296  
¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
Œ“šfo
=
¤c
->
	`D©aIÅut
().
	`Sbegš
();Œ“šfo!=¤c->D©aIÅut().
	`S’d
();treeinfo++)

298 
des
->
	`AddSigÇlT»e
Ğ(*
Œ“šfo
).
	`G‘T»e
(), (*Œ“šfo).
	`G‘Weight
(),(*Œ“šfo).
	`G‘T»eTy³
());

301  
¡d
::
veùÜ
<
T»eInfo
>::
cÚ¡_™”©Ü
 
Œ“šfo
=
¤c
->
	`D©aIÅut
().
	`Bbegš
();Œ“šfo!=¤c->D©aIÅut().
	`B’d
();treeinfo++)

303 
des
->
	`AddBackgroundT»e
Ğ(*
Œ“šfo
).
	`G‘T»e
(), (*Œ“šfo).
	`G‘Weight
(),(*Œ“šfo).
	`G‘T»eTy³
());

305 
	}
}

	@src/VariableDecorrTransform.cxx

34 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

36 
	~"TMVA/D©aS‘.h
"

37 
	~"TMVA/Ev’t.h
"

38 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/ToŞs.h
"

40 
	~"TMVA/Ty³s.h
"

41 
	~"TMVA/V¬ŸbËInfo.h
"

43 
	~"TVeùÜF.h
"

44 
	~"TVeùÜD.h
"

45 
	~"TM©rixD.h
"

46 
	~"TM©rixDBa£.h
"

48 
	~<io¡»am
>

49 
	~<iomª
>

50 
	~<®gÜ™hm
>

52 
CÏssImp
(
TMVA
::
V¬ŸbËDecÜrT¿nsfÜm
);

57 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$V¬ŸbËDecÜrT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
 )

58 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kDecÜ»Ï‹d
, "Deco" )

60 
	}
}

65 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::~
	$V¬ŸbËDecÜrT¿nsfÜm
()

67 
¡d
::
veùÜ
<
TM©rixD
*>::
™”©Ü
 
™
 = 
fDecÜrM©riûs
.
	`begš
(); iˆ!ğfDecÜrM©riûs.
	`’d
(); it++) {

68 ià((*
™
è!ğ0è
	`d–‘e
 (*it);

70 
	}
}

75 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$In™Ÿlize
()

77 
	}
}

82 
BoŞ_t
 
TMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
)

84 
In™Ÿlize
();

86 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
	gkTRUE
;

88 
Log
(è<< 
	gkINFO
 << "P»·ršghDecÜ»ÏtiÚ¿nsfÜm©iÚ..." << 
	gEndl
;

90 
IÁ_t
 
	gšputSize
 = 
fG‘
.
size
();

91 
S‘NV¬ŸbËs
(
šputSize
);

93 ià(
	gšputSize
 > 200) {

94 
Log
(è<< 
	gkINFO
 << "----------------------------------------------------------------------------"

95 << 
	gEndl
;

96 
Log
(è<< 
	gkINFO


98 << "!" << 
	gEndl
;

99 
Log
(è<< 
	gkINFO
 << "----------------------------------------------------------------------------"

100 << 
	gEndl
;

101  
	gkFALSE
;

104 
C®cSQRM©s
Ğ
ev’ts
, 
G‘NCÏs£s
() );

106 
S‘C»©ed
Ğ
kTRUE
 );

108  
	gkTRUE
;

114 
	g¡d
::
veùÜ
<
TSŒšg
>* 
TMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$G‘T¿nsfÜm©iÚSŒšgs
Ğ
IÁ_t
 
şs
 ) const

116 
IÁ_t
 
whichM©rix
 = 
şs
;

120 ià(
şs
 < 0 || cl > 
	`G‘NCÏs£s
()è
whichM©rix
 = GetNClasses();

122 
TM©rixD
* 
m
 = 
fDecÜrM©riûs
.
	`©
(
whichM©rix
);

123 ià(
m
 == 0) {

124 ià(
whichM©rix
 =ğ
	`G‘NCÏs£s
() )

125 
	`Log
(è<< 
kFATAL
 << "Transformation matrix‡ll classes is‚ot defined"

126 << 
Endl
;

128 
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ m©rix fÜ cÏs " << 
whichM©rix
 << " is‚ot defined"

129 << 
Endl
;

132 cÚ¡ 
IÁ_t
 
nv¬
 = 
fG‘
.
	`size
();

133 
¡d
::
veùÜ
<
TSŒšg
>* 
¡rVec
 = 
Ãw
 std::vector<TString>;

136 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

137 
TSŒšg
 
	`¡r
( "" );

138 
IÁ_t
 
jv¬
=0; jv¬<
nv¬
; jvar++) {

139 
¡r
 +ğ((*
m
)(
iv¬
,
jv¬
) > 0) ? " + " : " - ";

141 
Ch¬_t
 
ty³
 = 
fG‘
.
	`©
(
jv¬
).
fœ¡
;

142 
IÁ_t
 
idx
 = 
fG‘
.
	`©
(
jv¬
).
£cÚd
;

144  
ty³
 ) {

146 
¡r
 +ğ
	`FÜm
Ğ"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¬
,
jv¬
)), 
	`V¬ŸbËs
()[
idx
].
	`G‘Lab–
().
	`D©a
() );

149 
¡r
 +ğ
	`FÜm
Ğ"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¬
,
jv¬
)), 
	`T¬g‘s
()[
idx
].
	`G‘Lab–
().
	`D©a
() );

152 
¡r
 +ğ
	`FÜm
Ğ"%10.5g*[%s]", 
TM©h
::
	`Abs
((*
m
)(
iv¬
,
jv¬
)), 
	`S³ù©Üs
()[
idx
].
	`G‘Lab–
().
	`D©a
() );

155 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËDecÜrT¿nsfÜm::G‘T¿nsfÜm©iÚSŒšg : unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

158 
¡rVec
->
	`push_back
Ğ
¡r
 );

161  
¡rVec
;

162 
	}
}

167 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$T¿nsfÜm
ĞcÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

169 ià(!
	`IsC»©ed
())

170 
	`Log
(è<< 
kFATAL
 << "Transformation matrix‚ot yet created"

171 << 
Endl
;

173 
IÁ_t
 
whichM©rix
 = 
şs
;

176 ià(
şs
 < 0 || cl >ğ(è
fDecÜrM©riûs
.
	`size
()è
whichM©rix
 = fDecorrMatrices.size()-1;

183 
TM©rixD
* 
m
 = 
fDecÜrM©riûs
.
	`©
(
whichM©rix
);

184 ià(
m
 == 0) {

185 ià(
whichM©rix
 =ğ
	`G‘NCÏs£s
() )

186 
	`Log
(è<< 
kFATAL
 << "Transformation matrix‡ll classes is‚ot defined"

187 << 
Endl
;

189 
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ m©rix fÜ cÏs " << 
whichM©rix
 << " is‚ot defined"

190 << 
Endl
;

193 ià(
fT¿nsfÜmedEv’t
==0 || fT¿nsfÜmedEv’t->
	`G‘NV¬ŸbËs
()!=
ev
->GetNVariables()) {

194 ià(
fT¿nsfÜmedEv’t
!=0è{ 
d–‘e
 fTransformedEvent; fTransformedEvent = 0; }

195 
fT¿nsfÜmedEv’t
 = 
Ãw
 
	`Ev’t
();

199 cÚ¡ 
IÁ_t
 
nv¬
 = 
fG‘
.
	`size
();

201 
¡d
::
veùÜ
<
Flßt_t
> 
šput
;

202 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

203 
BoŞ_t
 
hasMaskedEÁr›s
 = 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

205 ifĞ
hasMaskedEÁr›s
 ){

206 
UIÁ_t
 
numMasked
 = 
¡d
::
	`couÁ
(
mask
.
	`begš
(), mask.
	`’d
(), (
Ch¬_t
)
kTRUE
);

207 
UIÁ_t
 
numOK
 = 
¡d
::
	`couÁ
(
mask
.
	`begš
(), mask.
	`’d
(), (
Ch¬_t
)
kFALSE
);

208 ifĞ
numMasked
>0 && 
numOK
>0 ){

209 
	`Log
(è<< 
kFATAL
 << "You mixed v¬ŸbË ªd¬g‘ šhdecÜ»ÏtiÚ¿nsfÜm©iÚ. Thi i nÙ…ossibË." << 
Endl
;

211 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
šput
, 
mask
, 
ev
 );

212  
fT¿nsfÜmedEv’t
;

215 
TVeùÜD
 
	`vec
Ğ
nv¬
 );

216 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; iv¬++è
	`vec
(iv¬èğ
šput
.
	`©
(ivar);

219 
vec
 *ğ*
m
;

221 
šput
.
	`ş—r
();

222 
IÁ_t
 
iv¬
=0; iv¬<
nv¬
; iv¬++è
šput
.
	`push_back
Ğ
	`vec
(ivar) );

224 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
šput
, 
mask
, 
ev
 );

226  
fT¿nsfÜmedEv’t
;

227 
	}
}

233 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$Inv”£T¿nsfÜm
ĞcÚ¡ 
TMVA
::
Ev’t
* cÚ¡ , 
IÁ_t
 ) const

235 
	`Log
(è<< 
kFATAL
 << "Inv”£¿nsfÜm©iÚ fÜ decÜ»ÏtiÚ¿nsfÜm©iÚ‚Ù y‘ im¶em’‹d. H’û,hi ŒªsfÜm©iÚ cªnÙ b­¶›dog‘h” w™h„eg»ssiÚ iàrg‘ should bŒªsfÜmed. PËa£ cÚùhauthÜ iàÃûs§ry." << 
Endl
;

238  
fBackT¿nsfÜmedEv’t
;

239 
	}
}

244 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
C®cSQRM©s
ĞcÚ¡ 
¡d
::
veùÜ
< 
Ev’t
*>& 
ev’ts
, 
IÁ_t
 
maxCls
 )

247 
	g¡d
::
veùÜ
<
TM©rixD
*>::
™”©Ü
 
™
 = 
fDecÜrM©riûs
.
begš
();

248 
	g™
 !ğ
fDecÜrM©riûs
.
’d
(); it++)

249 ià(0 !ğ(*
™
èè{ 
d–‘e
 (*™); *
	g™
=0; }

253 cÚ¡ 
UIÁ_t
 
	gm©Num
 = (
maxCls
<=1)?maxCls:maxCls+1;

254 
	gfDecÜrM©riûs
.
»size
Ğ
m©Num
, (
TM©rixD
*) 0 );

256 
	g¡d
::
veùÜ
<
TM©rixDSym
*>* 
covM©
 = 
gToŞs
().
C®cCov¬ŸnûM©riûs
Ğ
ev’ts
, 
maxCls
, 
this
 );

259 
UIÁ_t
 
	gşs
=0; cls<
	gm©Num
; cls++) {

260 
TM©rixD
* 
	gsqrM©
 = 
gToŞs
().
G‘SQRoÙM©rix
Ğ
covM©
->
©
(
şs
) );

261 iàĞ
	gsqrM©
==0 )

262 
Log
(è<< 
kFATAL
 << "<G‘SQRM©s> Z”Øpoš‹¸»tuºed fÜ SQR m©rix" << 
Endl
;

263 
	gfDecÜrM©riûs
[
şs
] = 
sqrM©
;

264 
d–‘e
 (*
covM©
)[
şs
];

266 
d–‘e
 
	gcovM©
;

272 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$Wr™eT¿nsfÜm©iÚToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
 ) const

274 
IÁ_t
 
şs
 = 0;

275 
IÁ_t
 
dp
 = 
o
.
	`´ecisiÚ
();

276 
¡d
::
veùÜ
<
TM©rixD
*>::
cÚ¡_™”©Ü
 
™m
 = 
fDecÜrM©riûs
.
	`begš
(); itm !ğfDecÜrM©riûs.
	`’d
(); itm++) {

277 
o
 << "# cÜ»ÏtiÚ m©rix " << 
¡d
::
’dl
;

278 
TM©rixD
* 
m©
 = (*
™m
);

279 
o
 << 
şs
 << " " << 
m©
->
	`G‘Nrows
(è<< " x " << m©->
	`G‘NcŞs
(è<< 
¡d
::
’dl
;

280 
IÁ_t
 
row
 = 0;„ow<
m©
->
	`G‘Nrows
();„ow++) {

281 
IÁ_t
 
cŞ
 = 0; cŞ<
m©
->
	`G‘NcŞs
(); col++) {

282 
o
 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< (*
m©
)[
row
][
cŞ
] << " ";

284 
o
 << 
¡d
::
’dl
;

286 
şs
++;

288 
o
 << "##" << 
¡d
::
’dl
;

289 
o
 << 
¡d
::
	`£»cisiÚ
(
dp
);

290 
	}
}

295 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$A‰achXMLTo
(* 
·»Á
)

297 * 
Œf
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transform");

298 
	`gToŞs
().
	`AddA‰r
(
Œf
,"Name", "Decorrelation");

300 
V¬ŸbËT¿nsfÜmBa£
::
	`A‰achXMLTo
Ğ
Œf
 );

302 
¡d
::
veùÜ
<
TM©rixD
*>::
cÚ¡_™”©Ü
 
™m
 = 
fDecÜrM©riûs
.
	`begš
(); itm !ğfDecÜrM©riûs.
	`’d
(); itm++) {

303 
TM©rixD
* 
m©
 = (*
™m
);

315 
	`gToŞs
().
	`Wr™eTM©rixDToXML
(
Œf
,"M©rix",
m©
);

317 
	}
}

322 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$R—dFromXML
Ğ* 
Œâode
 )

325  
¡d
::
veùÜ
<
TM©rixD
*>::
™”©Ü
 
™
 = 
fDecÜrM©riûs
.
	`begš
(); iˆ!ğfDecÜrM©riûs.
	`’d
(); it++ )

326 ifĞ(*
™
è!ğ0 ) 
	`d–‘e
 (*it);

327 
fDecÜrM©riûs
.
	`ş—r
();

329 
BoŞ_t
 
ÃwFÜm©
 = 
kFALSE
;

331 * 
š²ode
 = 
NULL
;

333 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
, "Selection");

334 ifĞ
š²ode
!=
NULL
 )

335 
ÃwFÜm©
 = 
kTRUE
;

337 * 
ch
 = 
NULL
;

338 ifĞ
ÃwFÜm©
 ){

341 
V¬ŸbËT¿nsfÜmBa£
::
	`R—dFromXML
Ğ
š²ode
 );

343 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(
š²ode
);

345 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
);

348 
ch
!=0) {

349 
IÁ_t
 
Äows
, 
ncŞs
;

350 
	`gToŞs
().
	`R—dA‰r
(
ch
, "Rows", 
Äows
);

351 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CŞumns", 
ncŞs
);

352 
TM©rixD
* 
m©
 = 
Ãw
 
	`TM©rixD
(
Äows
,
ncŞs
);

353 cÚ¡ * 
cÚ‹Á
 = 
	`gToŞs
().
	`G‘CÚ‹Á
(
ch
);

354 
¡d
::
¡ršg¡»am
 
	`s
(
cÚ‹Á
);

355 
IÁ_t
 
row
 = 0;„ow<
Äows
;„ow++) {

356 
IÁ_t
 
cŞ
 = 0; cŞ<
ncŞs
; col++) {

357 
s
 >> (*
m©
)[
row
][
cŞ
];

360 
fDecÜrM©riûs
.
	`push_back
(
m©
);

361 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

363 
	`S‘C»©ed
();

364 
	}
}

369 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$R—dT¿nsfÜm©iÚFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
, cÚ¡ 
TSŒšg
& 
şas¢ame
 )

371 
buf
[512];

372 
i¡r
.
	`g‘lše
(
buf
,512);

373 
TSŒšg
 
¡rv¬
, 
dummy
;

374 
IÁ_t
 
	`Äows
(0), 
	`ncŞs
(0);

375 
UIÁ_t
 
şassIdx
=0;

376 !(
buf
[0]=='#'&& buf[1]=='#')) {

377 * 
p
 = 
buf
;

378 *
p
==' ' || *p=='\t')…++;

379 ià(*
p
=='#' || *p=='\0') {

380 
i¡r
.
	`g‘lše
(
buf
,512);

383 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

385 
s¡r
 >> 
¡rv¬
;

386 ià(
¡rv¬
=="signal" || strvar=="background") {

387 
UIÁ_t
 
şs
=0;

388 if(
¡rv¬
=="background"è
şs
=1;

389 if(
¡rv¬
==
şas¢ame
è
şassIdx
 = 
şs
;

391 
s¡r
 >> 
Äows
 >> 
dummy
 >> 
ncŞs
;

392 ià(
fDecÜrM©riûs
.
	`size
(è<ğ
şs
 ) fDecÜrM©riûs.
	`»size
(cls+1);

393 ià(
fDecÜrM©riûs
.
	`©
(
şs
è!ğ0è
d–‘e
 fDecorrMatrices.at(cls);

394 
TM©rixD
* 
m©
 = 
fDecÜrM©riûs
.
	`©
(
şs
èğ
Ãw
 
	`TM©rixD
(
Äows
,
ncŞs
);

396 
IÁ_t
 
row
 = 0;„ow<
m©
->
	`G‘Nrows
();„ow++) {

397 
IÁ_t
 
cŞ
 = 0; cŞ<
m©
->
	`G‘NcŞs
(); col++) {

398 
i¡r
 >> (*
m©
)[
row
][
cŞ
];

402 
i¡r
.
	`g‘lše
(
buf
,512);

405 
fDecÜrM©riûs
.
	`push_back
Ğ
Ãw
 
	`TM©rixD
(*fDecÜrM©riûs[
şassIdx
]) );

407 
	`S‘C»©ed
();

408 
	}
}

413 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$PrštT¿nsfÜm©iÚ
Ğ
¡d
::
o¡»am
& )

415 
IÁ_t
 
şs
 = 0;

416 
¡d
::
veùÜ
<
TM©rixD
*>::
™”©Ü
 
™m
 = 
fDecÜrM©riûs
.
	`begš
(); itm !ğfDecÜrM©riûs.
	`’d
(); itm++) {

417 
	`Log
(è<< 
kINFO
 << "T¿nsfÜm©iÚ m©rix "<< 
şs
 <<":" << 
Endl
;

418 (*
™m
)->
	`Pršt
();

420 
	}
}

425 
	gTMVA
::
V¬ŸbËDecÜrT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
fúcName
, 
IÁ_t
 
·¹
, 
UIÁ_t
 
ŒCouÁ”
, Int_t )

427 
IÁ_t
 
dp
 = 
fout
.
	`´ecisiÚ
();

429 
UIÁ_t
 
numC
 = 
fDecÜrM©riûs
.
	`size
();

431 ià(
·¹
==1) {

432 
TM©rixD
* 
m©
 = 
fDecÜrM©riûs
.
	`©
(0);

433 
fout
 << 
¡d
::
’dl
;

434 
fout
 << " doubË fDecTF_"<<
ŒCouÁ”
<<"["<<
numC
<<"]["<<
m©
->
	`G‘Nrows
()<<"]["<<m©->
	`G‘NcŞs
()<<"];" << 
¡d
::
’dl
;

437 ià(
·¹
==2) {

438 
fout
 << 
¡d
::
’dl
;

439 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

440 
fout
 << "šlšvoid " << 
fúcName
 << "::In™T¿nsfÜm_"<<
ŒCouÁ”
<<"()" << 
¡d
::
’dl
;

441 
fout
 << "{" << 
¡d
::
’dl
;

442 
fout
 << " // DecÜ»ÏtiÚ¿nsfÜm©iÚ, in™Ÿli§tiÚ" << 
¡d
::
’dl
;

443 
UIÁ_t
 
işs
 = 0; iş < 
numC
; icls++){

444 
TM©rixD
* 
m©x
 = 
fDecÜrM©riûs
.
	`©
(
işs
);

445 
i
=0; i<
m©x
->
	`G‘Nrows
(); i++) {

446 
j
=0; j<
m©x
->
	`G‘NcŞs
(); j++) {

447 
fout
 << " fDecTF_"<<
ŒCouÁ”
<<"["<<
işs
<<"]["<<
i
<<"]["<<
j
<<"] = " << 
¡d
::
	`£»cisiÚ
(12è<< (*
m©x
)[i][j] << ";" << std::
’dl
;

451 
fout
 << "}" << 
¡d
::
’dl
;

452 
fout
 << 
¡d
::
’dl
;

453 
TM©rixD
* 
m©x
 = 
fDecÜrM©riûs
.
	`©
(0);

454 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

455 
fout
 << "šlšvoid " << 
fúcName
 << "::T¿nsfÜm_"<<
ŒCouÁ”
<<"Ğ¡d::veùÜ<doubË>& iv, iÁ clsècÚ¡" << 
¡d
::
’dl
;

456 
fout
 << "{" << 
¡d
::
’dl
;

457 
fout
 << " // DecÜ»ÏtiÚ¿nsfÜm©iÚ" << 
¡d
::
’dl
;

458 
fout
 << " ià(ş < 0 || cl > "<<
	`G‘NCÏs£s
()<<"è{"<< 
¡d
::
’dl
;

459 
fout
 << " ià("<<
	`G‘NCÏs£s
()<<" > 1 ) cl ğ"<<G‘NCÏs£s()<<";"<< 
¡d
::
’dl
;

460 
fout
 << "ƒl£ cl ğ"<<(
fDecÜrM©riûs
.
	`size
()==1?0:2)<<";"<< 
¡d
::
’dl
;

461 
fout
 << " }"<< 
¡d
::
’dl
;

463 
V¬ŸbËT¿nsfÜmBa£
::
	`MakeFunùiÚ
(
fout
, 
fúcName
, 0, 
ŒCouÁ”
, 0 );

465 
fout
 << " std::veùÜ<doubË>v;" << 
¡d
::
’dl
;

466 
fout
 << " fÜ (šˆi=0; i<"<<
m©x
->
	`G‘Nrows
()<<";i++è{" << 
¡d
::
’dl
;

467 
fout
 << " doubË v = 0;" << 
¡d
::
’dl
;

468 
fout
 << " fÜ (šˆj=0; j<"<<
m©x
->
	`G‘NcŞs
()<<"; j++)" << 
¡d
::
’dl
;

469 
fout
 << " v +ğiv[šdiûsG‘.©(j)] * fDecTF_"<<
ŒCouÁ”
<<"[şs][i][j];" << 
¡d
::
’dl
;

470 
fout
 << "v.push_back(v);" << 
¡d
::
’dl
;

471 
fout
 << " }" << 
¡d
::
’dl
;

472 
fout
 << " fÜ (šˆi=0; i<"<<
m©x
->
	`G‘Nrows
()<<";i++èiv[šdiûsPut.©(i)] =v[i];" << 
¡d
::
’dl
;

473 
fout
 << "}" << 
¡d
::
’dl
;

476 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

477 
	}
}

	@src/VariableGaussTransform.cxx

35 
	~"TMVA/V¬ŸbËGaussT¿nsfÜm.h
"

37 
	~"TMVA/D©aS‘Info.h
"

38 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/PDF.h
"

40 
	~"TMVA/ToŞs.h
"

41 
	~"TMVA/Ty³s.h
"

42 
	~"TMVA/V”siÚ.h
"

44 
	~"TCªvas.h
"

45 
	~"TG¿ph.h
"

46 
	~"TH1F.h
"

47 
	~"TM©h.h
"

48 
	~"TVeùÜF.h
"

49 
	~"TVeùÜD.h
"

51 
	~<exû±iÚ
>

52 
	~<io¡»am
>

53 
	~<iomª
>

54 
	~<li¡
>

55 
	~<lim™s
>

56 
	~<¡dexû±
>

58 
CÏssImp
(
TMVA
::
V¬ŸbËGaussT¿nsfÜm
);

65 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$V¬ŸbËGaussT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
, 
TSŒšg
 
¡rcÜ
 )

66 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kGauss
, "Gauss" ),

67 
	`fFÏtNÙGauss
(
kFALSE
),

68 
	`fPdfMšSmoÙh
(0),

69 
	`fPdfMaxSmoÙh
(0),

70 
	$fEËm’t¥”bš
(0)

72 ià(
¡rcÜ
=="UnifÜm"è{
fFÏtNÙGauss
 = 
kTRUE
;

73 
	`S‘Name
("Uniform");

75 
	}
}

80 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::~
	$V¬ŸbËGaussT¿nsfÜm
( )

82 
	`CËªUpCumuÏtiveA¼ays
();

83 
	}
}

87 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$In™Ÿlize
()

89 
	}
}

94 
BoŞ_t
 
TMVA
::
V¬ŸbËGaussT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
)

96 
In™Ÿlize
();

98 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
	gkTRUE
;

100 
Log
(è<< 
	gkINFO
 << "P»·ršghGaussŸÀŒªsfÜm©iÚ..." << 
	gEndl
;

102 
UIÁ_t
 
	gšputSize
 = 
fG‘
.
size
();

103 
S‘NV¬ŸbËs
(
šputSize
);

105 ià(
	gšputSize
 > 200) {

106 
Log
(è<< 
	gkWARNING
 << "----------------------------------------------------------------------------"

107 << 
	gEndl
;

108 
Log
(è<< 
	gkWARNING


109 << ": MÜthª 200 v¬ŸbËs, I hİyou hav’ough memÜy!!!!" << 
	gEndl
;

110 
Log
(è<< 
	gkWARNING
 << "----------------------------------------------------------------------------"

111 << 
	gEndl
;

115 
G‘CumuÏtiveDi¡
Ğ
ev’ts
 );

117 
S‘C»©ed
Ğ
kTRUE
 );

119  
	gkTRUE
;

125 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$T¿nsfÜm
(cÚ¡ 
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

127 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

133 ià(
şs
 <0 || cl >ğ(è
fCumuÏtivePDF
[0].
	`size
()) cls = fCumulativePDF[0].size()-1;

137 
UIÁ_t
 
šputSize
 = 
fG‘
.
	`size
();

139 
¡d
::
veùÜ
<
Flßt_t
> 
	`šput
(0);

140 
¡d
::
veùÜ
<
Flßt_t
> 
	`ouut
(0);

142 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

143 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

145 
¡d
::
veùÜ
<
Ch¬_t
>::
™”©Ü
 
™Mask
 = 
mask
.
	`begš
();

149 
DoubË_t
 
cumuÏÁ
;

151 
UIÁ_t
 
iv¬
=0; iv¬<
šputSize
; ivar++) {

153 iàĞ(*
™Mask
) ){

154 ++
™Mask
;

158 ià(0 !ğ
fCumuÏtivePDF
[
iv¬
][
şs
]) {

160 if(
fTMVAV”siÚ
>
	`TMVA_VERSION
(3,9,7))

161 
cumuÏÁ
 = (
fCumuÏtivePDF
[
iv¬
][
şs
])->
	`G‘V®
(
šput
.
	`©
(ivar));

163 
cumuÏÁ
 = 
	`OldCumuÏÁ
(
šput
.
	`©
(
iv¬
), 
fCumuÏtivePDF
[iv¬][
şs
]->
	`G‘Origš®Hi¡
() );

164 
cumuÏÁ
 = 
TM©h
::
	`Mš
(cumulant,1.-10e-10);

165 
cumuÏÁ
 = 
TM©h
::
	`Max
(cumulant,0.+10e-10);

167 ià(
fFÏtNÙGauss
)

168 
ouut
.
	`push_back
Ğ
cumuÏÁ
 );

171 
DoubË_t
 
maxErfInvArgRªge
 = 0.99999999;

172 
DoubË_t
 
¬g
 = 2.0*
cumuÏÁ
 - 1.0;

173 
¬g
 = 
TM©h
::
	`Mš
(+
maxErfInvArgRªge
,arg);

174 
¬g
 = 
TM©h
::
	`Max
(-
maxErfInvArgRªge
,arg);

176 
ouut
.
	`push_back
Ğ1.414213562*
TM©h
::
	`ErfInv”£
(
¬g
) );

181 ià(
fT¿nsfÜmedEv’t
==0 || fT¿nsfÜmedEv’t->
	`G‘NV¬ŸbËs
()!=
ev
->GetNVariables()) {

182 ià(
fT¿nsfÜmedEv’t
!=0è{ 
d–‘e
 fTransformedEvent; fTransformedEvent = 0; }

183 
fT¿nsfÜmedEv’t
 = 
Ãw
 
	`Ev’t
();

186 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
ouut
, 
mask
, 
ev
 );

188  
fT¿nsfÜmedEv’t
;

189 
	}
}

194 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$Inv”£T¿nsfÜm
(cÚ¡ 
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

196 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

202 ià(
şs
 <0 || cl >ğ(è
fCumuÏtivePDF
[0].
	`size
()) cls = fCumulativePDF[0].size()-1;

206 
UIÁ_t
 
šputSize
 = 
fG‘
.
	`size
();

208 
¡d
::
veùÜ
<
Flßt_t
> 
	`šput
(0);

209 
¡d
::
veùÜ
<
Flßt_t
> 
	`ouut
(0);

211 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

212 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
, 
kTRUE
 );

214 
¡d
::
veùÜ
<
Ch¬_t
>::
™”©Ü
 
™Mask
 = 
mask
.
	`begš
();

218 
DoubË_t
 
švCumuÏÁ
;

220 
UIÁ_t
 
iv¬
=0; iv¬<
šputSize
; ivar++) {

222 iàĞ(*
™Mask
) ){

223 ++
™Mask
;

227 ià(0 !ğ
fCumuÏtivePDF
[
iv¬
][
şs
]) {

228 
švCumuÏÁ
 = 
šput
.
	`©
(
iv¬
);

231 ià(!
fFÏtNÙGauss
)

232 
švCumuÏÁ
 = (
TM©h
::
	`Erf
(invCumulant/1.414213562)+1)/2.f;

235 if(
fTMVAV”siÚ
>
	`TMVA_VERSION
(4,0,0))

236 
švCumuÏÁ
 = (
fCumuÏtivePDF
[
iv¬
][
şs
])->
	`G‘V®Inv”£
(švCumuÏÁ,
kTRUE
);

238 
	`Log
(è<< 
kFATAL
 << "Inv”£ UnifÜm/Gaus ŒªsfÜm©iÚ‚Ù im¶em’‹d fÜ TMVA v”siÚ befÜ4.1.0" << 
Endl
;

240 
ouut
.
	`push_back
(
švCumuÏÁ
);

244 ià(
fBackT¿nsfÜmedEv’t
==0èfBackT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
Ğ*
ev
 );

246 
	`S‘Ouut
Ğ
fBackT¿nsfÜmedEv’t
, 
ouut
, 
mask
, 
ev
, 
kTRUE
 );

248  
fBackT¿nsfÜmedEv’t
;

249 
	}
}

254 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
G‘CumuÏtiveDi¡
ĞcÚ¡ 
¡d
::
veùÜ
< 
Ev’t
*>& 
ev’ts
 )

256 cÚ¡ 
UIÁ_t
 
šputSize
 = 
fG‘
.
size
();

260 
UIÁ_t
 
	gÃvt
 = 
ev’ts
.
size
();

262 cÚ¡ 
UIÁ_t
 
	gnCÏs£s
 = 
G‘NCÏs£s
();

263 
UIÁ_t
 
	gnumDi¡
 = 
nCÏs£s
+1;

265 ià(
G‘NCÏs£s
(è=ğ1 ) 
numDi¡
 = 
nCÏs£s
;

267 
UIÁ_t
 **
	gnbšs
 = 
Ãw
 UIÁ_t*[
numDi¡
];

269 
	g¡d
::
li¡
< 
TMVA
::
TMVAGaussPaœ
 > **
li¡sFÜBšnšg
 = 
Ãw
 
¡d
::li¡<TMVA::TMVAGaussPaœ>* [
numDi¡
];

270 
	g¡d
::
veùÜ
< 
Flßt_t
 > **
vsFÜBšnšg
 = 
Ãw
 
¡d
::veùÜ<Flßt_t>* [
numDi¡
];

271 
UIÁ_t
 
	gi
=0; i < 
	gnumDi¡
; i++) {

272 
	gli¡sFÜBšnšg
[
i
] = 
Ãw
 
¡d
::
li¡
<
TMVA
::
TMVAGaussPaœ
> [
šputSize
];

273 
	gvsFÜBšnšg
[
i
] = 
Ãw
 
¡d
::
veùÜ
<
Flßt_t
> [
šputSize
];

274 
	gnbšs
[
i
] = 
Ãw
 
UIÁ_t
[
šputSize
];

277 
	g¡d
::
veùÜ
<
Flßt_t
> 
šput
;

278 
	g¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

281 
Flßt_t
 *
	gsumOfWeights
 = 
Ãw
 Flßt_t[
numDi¡
];

282 
Flßt_t
 *
	gmšWeight
 = 
Ãw
 Flßt_t[
numDi¡
];

283 
Flßt_t
 *
	gmaxWeight
 = 
Ãw
 Flßt_t[
numDi¡
];

284 
UIÁ_t
 
	gi
=0; i<
	gnumDi¡
; i++) {

285 
	gsumOfWeights
[
i
]=0;

286 
	gmšWeight
[
i
]=10E10;

287 
	gmaxWeight
[
i
]=0;

289 
UIÁ_t
 
	g›vt
=0; ievˆ< 
	gÃvt
; ievt++) {

290 cÚ¡ 
Ev’t
* 
	gev
ğ
ev’ts
[
›vt
];

291 
IÁ_t
 
	gşs
 = 
ev
->
G‘CÏss
();

292 
Flßt_t
 
	gev’tWeight
 = 
ev
->
G‘Weight
();

293 
	gsumOfWeights
[
şs
] +ğ
ev’tWeight
;

294 ià(
	gmšWeight
[
şs
] > 
	gev’tWeight
èmšWeight[şs]=
ev’tWeight
;

295 ià(
	gmaxWeight
[
şs
] < 
	gev’tWeight
èmaxWeight[şs]=
ev’tWeight
;

296 ià(
	gnumDi¡
>1è
	gsumOfWeights
[
numDi¡
-1] +ğ
ev’tWeight
;

298 
BoŞ_t
 
	ghasMaskedEÁr›s
 = 
G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

299 ifĞ
	ghasMaskedEÁr›s
 ){

300 
Log
(è<< 
	gkWARNING
 << "Incom¶‘ev’t" << 
	gEndl
;

301 
	g¡d
::
o¡ršg¡»am
 
oss
;

302 
	gev
->
Pršt
(
oss
);

303 
Log
(è<< 
	goss
.
¡r
();

304 
Log
(è<< 
	gkFATAL
 << "T¬g‘ Ü v¬ŸbË masked by¿nsfÜm©iÚ. Aµ¬’y (aèv®ue(sèis/¬missšg iÀthi ev’t." << 
	gEndl
;

308 
IÁ_t
 
	giv¬
 = 0;

309  
	g¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅut
 = 
šput
.
begš
(), 
	g™IÅutEnd
 = iÅut.
’d
(); 
	g™IÅut
 !ğ
™IÅutEnd
; ++itInput ) {

310 
Flßt_t
 
	gv®ue
 = (*
™IÅut
);

311 
	gli¡sFÜBšnšg
[
şs
][
iv¬
].
push_back
(
TMVA
::
TMVAGaussPaœ
(
v®ue
,
ev’tWeight
));

312 ià(
	gnumDi¡
>1)
	gli¡sFÜBšnšg
[
numDi¡
-1][
iv¬
].
push_back
(
TMVA
::
TMVAGaussPaœ
(
v®ue
,
ev’tWeight
));

313 ++
	giv¬
;

316 ià(
	gnumDi¡
 > 1) {

317 
UIÁ_t
 
	giş
=0; iş<
	gnumDi¡
-1; icl++){

318 
	gmšWeight
[
numDi¡
-1] = 
TM©h
::
Mš
(
mšWeight
[
iş
],minWeight[numDist-1]);

319 
	gmaxWeight
[
numDi¡
-1] = 
TM©h
::
Max
(
maxWeight
[
iş
],maxWeight[numDist-1]);

324 cÚ¡ 
UIÁ_t
 
	gÃvmš
=10;

325 cÚ¡ 
UIÁ_t
 
	gnbšsmax
=2000;

327 
UIÁ_t
 
	giş
=0; iş< 
	gnumDi¡
; icl++){

328 
UIÁ_t
 
	giv¬
=0; iv¬<
	gšputSize
; ivar++) {

329 
	gli¡sFÜBšnšg
[
iş
][
iv¬
].
sÜt
();

330 
	g¡d
::
li¡
< 
TMVA
::
TMVAGaussPaœ
 >::
™”©Ü
 
™
;

331 
Flßt_t
 
	gsumP”Bš
 = 
sumOfWeights
[
iş
]/
nbšsmax
;

332 
	gsumP”Bš
=
TM©h
::
Max
(
mšWeight
[
iş
]*
Ãvmš
,
sumP”Bš
);

333 
Flßt_t
 
	gsum
=0;

334 
Flßt_t
 
	gev_v®ue
=
li¡sFÜBšnšg
[
iş
][
iv¬
].
begš
()->
G‘V®ue
();

335 
Flßt_t
 
	gÏ¡ev_v®ue
=
ev_v®ue
;

336 cÚ¡ 
Flßt_t
 
	g•s
 = 1.e-4;

337 
	gvsFÜBšnšg
[
iş
][
iv¬
].
push_back
(
ev_v®ue
-
•s
);

338 
	gvsFÜBšnšg
[
iş
][
iv¬
].
push_back
(
ev_v®ue
);

340 
	g™
=
li¡sFÜBšnšg
[
iş
][
iv¬
].
begš
(); iˆ!ğli¡sFÜBšnšg[iş][iv¬].
’d
(); it++){

341 
	gsum
+ğ
™
->
G‘Weight
();

342 ià(
	gsum
 >ğ
sumP”Bš
) {

343 
ev_v®ue
=
™
->
G‘V®ue
();

344 ià(
	gev_v®ue
>
	gÏ¡ev_v®ue
) {

345 
	gvsFÜBšnšg
[
iş
][
iv¬
].
push_back
(
ev_v®ue
);

346 
	gsum
 = 0.;

347 
	gÏ¡ev_v®ue
=
ev_v®ue
;

351 ià(
	gsum
!=0è
vsFÜBšnšg
[
iş
][
iv¬
].
push_back
(
li¡sFÜBšnšg
[iş][iv¬].
back
().
G‘V®ue
());

352 
	gnbšs
[
iş
][
iv¬
] = 
vsFÜBšnšg
[iş][iv¬].
size
();

356 
	gd–‘e
[] 
	gsumOfWeights
;

357 
	gd–‘e
[] 
	gmšWeight
;

358 
	gd–‘e
[] 
	gmaxWeight
;

361 
	gfCumuÏtiveDi¡
.
»size
(
šputSize
);

362 
UIÁ_t
 
	gişs
 = 0; iş < 
	gnumDi¡
; icls++) {

363 
UIÁ_t
 
	giv¬
=0; iv¬ < 
	gšputSize
; ivar++){

364 
Flßt_t
* 
	gbšnšgs
 = 
Ãw
 Flßt_t[
nbšs
[
işs
][
iv¬
]];

366 
UIÁ_t
 
	gk
 =0 ; k < 
	gnbšs
[
işs
][
iv¬
]; k++){

367 
	gbšnšgs
[
k
] = 
vsFÜBšnšg
[
işs
][
iv¬
][k];

369 
	gfCumuÏtiveDi¡
[
iv¬
].
»size
(
numDi¡
);

370 ià(0 !ğ
fCumuÏtiveDi¡
[
iv¬
][
işs
] ) {

371 
d–‘e
 
fCumuÏtiveDi¡
[
iv¬
][
işs
];

373 
	gfCumuÏtiveDi¡
[
iv¬
][
işs
] = 
Ãw
 
TH1F
(
FÜm
("Cumulative_Var%d_cls%d",ivar,icls),

374 
FÜm
("CumuÏtive_V¬%d_şs%d",
iv¬
,
işs
),

375 
nbšs
[
işs
][
iv¬
] -1,

376 
bšnšgs
);

377 
	gfCumuÏtiveDi¡
[
iv¬
][
işs
]->
S‘DœeùÜy
(0);

378 
	gd–‘e
 [] 
	gbšnšgs
;

383 
UIÁ_t
 
	gi
=0; i<
	gnumDi¡
; i++) {

384 
	gd–‘e
 [] 
	gli¡sFÜBšnšg
[
numDi¡
-
i
-1];

385 
	gd–‘e
 [] 
	gvsFÜBšnšg
[
numDi¡
-
i
-1];

386 
	gd–‘e
 [] 
	gnbšs
[
numDi¡
-
i
-1];

388 
	gd–‘e
 [] 
	gli¡sFÜBšnšg
;

389 
	gd–‘e
 [] 
	gvsFÜBšnšg
;

390 
	gd–‘e
 [] 
	gnbšs
;

393 
	g¡d
::
veùÜ
<
IÁ_t
> 
ic
(
numDi¡
);

394 
UIÁ_t
 
	g›vt
=0; ievt<
	gÃvt
; ievt++) {

396 cÚ¡ 
Ev’t
* 
	gev
ğ
ev’ts
[
›vt
];

397 
IÁ_t
 
	gşs
 = 
ev
->
G‘CÏss
();

398 
Flßt_t
 
	gev’tWeight
 = 
ev
->
G‘Weight
();

400 
G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

402 
IÁ_t
 
	giv¬
 = 0;

403  
	g¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅut
 = 
šput
.
begš
(), 
	g™IÅutEnd
 = iÅut.
’d
(); 
	g™IÅut
 !ğ
™IÅutEnd
; ++itInput ) {

404 
Flßt_t
 
	gv®ue
 = (*
™IÅut
);

405 
	gfCumuÏtiveDi¡
[
iv¬
][
şs
]->
Fl
(
v®ue
,
ev’tWeight
);

406 ià(
	gnumDi¡
>1è
	gfCumuÏtiveDi¡
[
iv¬
][
numDi¡
-1]->
Fl
(
v®ue
,
ev’tWeight
);

408 ++
	giv¬
;

413 
CËªUpCumuÏtiveA¼ays
("PDF");

416 
DoubË_t
 
	gsum
 = 0, 
	gtÙ®
=0;

417 
	gfCumuÏtivePDF
.
»size
(
šputSize
);

418 
UIÁ_t
 
	giv¬
=0; iv¬<
	gšputSize
; ivar++) {

420 
UIÁ_t
 
	gişs
=0; işs<
	gnumDi¡
; icls++) {

421 (
	gfCumuÏtiveDi¡
[
iv¬
][
işs
])->
SmoÙh
();

422 
	gsum
 = 0;

423 
	gtÙ®
 = 0.;

424 
IÁ_t
 
	gibš
=1, 
	gibšEnd
=
fCumuÏtiveDi¡
[
iv¬
][
işs
]->
G‘NbšsX
(); ibš <=
ibšEnd
 ; ibin++){

425 
Flßt_t
 
	gv®
 = (
fCumuÏtiveDi¡
[
iv¬
][
işs
])->
G‘BšCÚ‹Á
(
ibš
);

426 ià(
	gv®
>0è
	gtÙ®
 +ğ
v®
;

428 
IÁ_t
 
	gibš
=1, 
	gibšEnd
=
fCumuÏtiveDi¡
[
iv¬
][
işs
]->
G‘NbšsX
(); ibš <=
ibšEnd
 ; ibin++){

429 
Flßt_t
 
	gv®
 = (
fCumuÏtiveDi¡
[
iv¬
][
işs
])->
G‘BšCÚ‹Á
(
ibš
);

430 ià(
	gv®
>0è
	gsum
 +ğ
v®
;

431 (
	gfCumuÏtiveDi¡
[
iv¬
][
işs
])->
S‘BšCÚ‹Á
(
ibš
,
sum
/
tÙ®
);

434 
	gfCumuÏtivePDF
[
iv¬
].
push_back
(
Ãw
 
PDF
Ğ
FÜm
("GaussT¿nsfÜm v¬%d cls%d",iv¬,
işs
), 
fCumuÏtiveDi¡
[iv¬][işs], PDF::
kS¶še1
, 
fPdfMšSmoÙh
, 
fPdfMaxSmoÙh
,
kFALSE
,kFALSE));

441 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$Wr™eT¿nsfÜm©iÚToSŒ—m
Ğ
¡d
::
o¡»am
& ) const

443 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËGaussT¿nsfÜm::Wr™eT¿nsfÜm©iÚToSŒ—m i obsŞ‘e" << 
Endl
;

444 
	}
}

449 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$CËªUpCumuÏtiveA¼ays
(
TSŒšg
 
İt
) {

450 ià(
İt
 == "ALL" || opt == "PDF"){

451 
UIÁ_t
 
iv¬
=0; iv¬<
fCumuÏtivePDF
.
	`size
(); ivar++) {

452 
UIÁ_t
 
işs
=0; işs<
fCumuÏtivePDF
[
iv¬
].
	`size
(); icls++) {

453 ià(0 !ğ
fCumuÏtivePDF
[
iv¬
][
işs
]è
d–‘e
 fCumulativePDF[ivar][icls];

456 
fCumuÏtivePDF
.
	`ş—r
();

458 ià(
İt
 == "ALL" || opt == "Dist"){

459 
UIÁ_t
 
iv¬
=0; iv¬<
fCumuÏtiveDi¡
.
	`size
(); ivar++) {

460 
UIÁ_t
 
işs
=0; işs<
fCumuÏtiveDi¡
[
iv¬
].
	`size
(); icls++) {

461 ià(0 !ğ
fCumuÏtiveDi¡
[
iv¬
][
işs
]è
d–‘e
 fCumulativeDist[ivar][icls];

464 
fCumuÏtiveDi¡
.
	`ş—r
();

466 
	}
}

470 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$A‰achXMLTo
(* 
·»Á
) {

471 * 
Œfxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transform");

472 
	`gToŞs
().
	`AddA‰r
(
Œfxml
, "Name", "Gauss");

473 
	`gToŞs
().
	`AddA‰r
(
Œfxml
, "FÏtOrGauss", (
fFÏtNÙGauss
?"Flat":"Gauss") );

475 
V¬ŸbËT¿nsfÜmBa£
::
	`A‰achXMLTo
Ğ
Œfxml
 );

477 
UIÁ_t
 
nv¬
 = 
fG‘
.
	`size
();

478 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

479 * 
v¬xml
 = 
	`gToŞs
().
	`AddChd
Ğ
Œfxml
, "Variable");

481 
	`gToŞs
().
	`AddA‰r
Ğ
v¬xml
, "V¬Index", 
iv¬
 );

483 iàĞ
fCumuÏtivePDF
[
iv¬
][0]==0 ||

484 (
fCumuÏtivePDF
[
iv¬
].
	`size
()>1 && fCumulativePDF[ivar][1]==0 ))

485 
	`Log
(è<< 
kFATAL
 << "CumuÏtivhi¡og¿m fÜ v¬ŸbË " << 
iv¬
 << " dÚ'ˆexi¡, cª'ˆwr™™Øweighˆfe" << 
Endl
;

487 
UIÁ_t
 
işs
=0; işs<
fCumuÏtivePDF
[
iv¬
].
	`size
(); icls++){

488 * 
pdfxml
 = 
	`gToŞs
().
	`AddChd
Ğ
v¬xml
, 
	`FÜm
("CumuÏtivePDF_şs%d",
işs
));

489 (
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`AddXMLTo
(
pdfxml
);

492 
	}
}

497 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$R—dFromXML
Ğ* 
Œâode
 ) {

499 
	`CËªUpCumuÏtiveA¼ays
();

500 
TSŒšg
 
FÏtOrGauss
;

502 
	`gToŞs
().
	`R—dA‰r
(
Œâode
, "FÏtOrGauss", 
FÏtOrGauss
 );

504 ià(
FÏtOrGauss
 =ğ"FÏt"è
fFÏtNÙGauss
 = 
kTRUE
;

505 
fFÏtNÙGauss
 = 
kFALSE
;

507 
BoŞ_t
 
ÃwFÜm©
 = 
kFALSE
;

509 * 
š²ode
 = 
NULL
;

511 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
, "Selection");

512 ifĞ
š²ode
!=
NULL
 )

513 
ÃwFÜm©
 = 
kTRUE
;

515 * 
v¬node
 = 
NULL
;

516 ifĞ
ÃwFÜm©
 ){

519 
V¬ŸbËT¿nsfÜmBa£
::
	`R—dFromXML
Ğ
š²ode
 );

521 
v¬node
 = 
	`gToŞs
().
	`G‘NextChd
(
š²ode
);

523 
v¬node
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
);

527 
TSŒšg
 
v¬Çme
, 
hi¡Çme
, 
şas¢ame
;

528 
UIÁ_t
 
iv¬
;

529 
v¬node
) {

530 ifĞ
	`gToŞs
().
	`HasA‰r
(
v¬node
,"Name") )

531 
	`gToŞs
().
	`R—dA‰r
(
v¬node
, "Name", 
v¬Çme
);

532 
	`gToŞs
().
	`R—dA‰r
(
v¬node
, "V¬Index", 
iv¬
);

534 * 
ş¢ode
 = 
	`gToŞs
().
	`G‘Chd
Ğ
v¬node
);

536 
ş¢ode
) {

537 * 
pdâode
 = 
	`gToŞs
().
	`G‘Chd
Ğ
ş¢ode
);

538 
PDF
* 
pdfToR—d
 = 
Ãw
 
	`PDF
(
	`TSŒšg
("‹mpName"),
kFALSE
);

539 
pdfToR—d
->
	`R—dXML
(
pdâode
);

541 
fCumuÏtivePDF
.
	`»size
Ğ
iv¬
+1 );

542 
fCumuÏtivePDF
[
iv¬
].
	`push_back
(
pdfToR—d
);

543 
ş¢ode
 = 
	`gToŞs
().
	`G‘NextChd
(clsnode);

546 
v¬node
 = 
	`gToŞs
().
	`G‘NextChd
(varnode);

548 
	`S‘C»©ed
();

549 
	}
}

554 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$R—dT¿nsfÜm©iÚFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
, cÚ¡ 
TSŒšg
& 
şas¢ame
)

556 
BoŞ_t
 
addDœStus
 = 
TH1
::
	`AddDœeùÜyStus
();

557 
TH1
::
	`AddDœeùÜy
(0);

558 
buf
[512];

559 
i¡r
.
	`g‘lše
(
buf
,512);

561 
TSŒšg
 
¡rv¬
, 
dummy
;

563 !(
buf
[0]=='#'&& buf[1]=='#')) {

564 * 
p
 = 
buf
;

565 *
p
==' ' || *p=='\t')…++;

566 ià(*
p
=='#' || *p=='\0') {

567 
i¡r
.
	`g‘lše
(
buf
,512);

570 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

571 
s¡r
 >> 
¡rv¬
;

573 ià(
¡rv¬
=="CumulativeHistogram") {

574 
UIÁ_t
 
	`ty³
(0), 
	`iv¬
(0);

575 
TSŒšg
 
	`devnuÎS
(""),
	`hÇme
("");

576 
IÁ_t
 
	`nbšs
(0);

579 
s¡r
 >> 
ty³
 >> 
iv¬
 >> 
hÇme
 >> 
nbšs
 >> 
fEËm’t¥”bš
;

581 
Flßt_t
 *
Bšnšgs
 = 
Ãw
 Flßt_t[
nbšs
+1];

582 
Flßt_t
 
v®
;

583 
i¡r
 >> 
devnuÎS
;

584 
IÁ_t
 
ibš
=0; ibš<
nbšs
+1; ibin++) {

585 
i¡r
 >> 
v®
;

586 
Bšnšgs
[
ibš
]=
v®
;

589 if(
iv¬
>=
fCumuÏtiveDi¡
.
	`size
()èfCumuÏtiveDi¡.
	`»size
(ivar+1);

590 if(
ty³
>=
fCumuÏtiveDi¡
[
iv¬
].
	`size
()èfCumuÏtiveDi¡[iv¬].
	`»size
(type+1);

592 
TH1F
 * 
hi¡ToR—d
 = 
fCumuÏtiveDi¡
[
iv¬
][
ty³
];

593 iàĞ
hi¡ToR—d
 !=0 ) 
d–‘e
 histToRead;

595 
hi¡ToR—d
 = 
Ãw
 
	`TH1F
Ğ
hÇme
, hÇme, 
nbšs
, 
Bšnšgs
 );

596 
hi¡ToR—d
->
	`S‘DœeùÜy
(0);

597 
fCumuÏtiveDi¡
[
iv¬
][
ty³
]=
hi¡ToR—d
;

599 
i¡r
 >> 
devnuÎS
;

600 
IÁ_t
 
ibš
=0; ibš<
nbšs
; ibin++) {

601 
i¡r
 >> 
v®
;

602 
hi¡ToR—d
->
	`S‘BšCÚ‹Á
(
ibš
+1,
v®
);

605 
PDF
* 
pdf
 = 
Ãw
 
	`PDF
(
hÇme
,
hi¡ToR—d
,PDF::
kS¶še0
, 0, 0, 
kFALSE
, kFALSE);

607 
fCumuÏtivePDF
.
	`»size
(
iv¬
+1);

608 
fCumuÏtivePDF
[
iv¬
].
	`»size
(
ty³
+1);

609 
fCumuÏtivePDF
[
iv¬
][
ty³
] = 
pdf
;

610 
d–‘e
 [] 
Bšnšgs
;

614 ià(
¡rv¬
=="Uniform") {

615 
s¡r
 >> 
fFÏtNÙGauss
;

616 
i¡r
.
	`g‘lše
(
buf
,512);

620 
i¡r
.
	`g‘lše
(
buf
,512);

622 
TH1
::
	`AddDœeùÜy
(
addDœStus
);

624 
UIÁ_t
 
şassIdx
=(
şas¢ame
=="signal")?0:1;

625 
UIÁ_t
 
iv¬
=0; iv¬<
fCumuÏtivePDF
.
	`size
(); ++ivar) {

626 
PDF
* 
¤c
 = 
fCumuÏtivePDF
[
iv¬
][
şassIdx
];

627 
fCumuÏtivePDF
[
iv¬
].
	`push_back
(
Ãw
 
	`PDF
(
¤c
->
	`G‘Name
(),
fCumuÏtiveDi¡
[iv¬][
şassIdx
],
PDF
::
kS¶še0
, 0, 0, 
kFALSE
, kFALSE) );

630 
	`S‘TMVAV”siÚ
(
	`TMVA_VERSION
(3,9,7));

632 
	`S‘C»©ed
();

633 
	}
}

637 
DoubË_t
 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$OldCumuÏÁ
(
Flßt_t
 
x
, 
TH1
* 
h
 ) const {

639 
IÁ_t
 
bš
 = 
h
->
	`FšdBš
(
x
);

640 
bš
 = 
TM©h
::
	`Max
(bin,1);

641 
bš
 = 
TM©h
::
	`Mš
(bš,
h
->
	`G‘NbšsX
());

643 
DoubË_t
 
cumuÏÁ
;

644 
DoubË_t
 
x0
, 
x1
, 
y0
, 
y1
;

645 
DoubË_t
 
tÙ®
 = 
h
->
	`G‘NbšsX
()*
fEËm’t¥”bš
;

646 
DoubË_t
 
supmš
 = 0.5/
tÙ®
;

648 
x0
 = 
h
->
	`G‘BšLowEdge
(
TM©h
::
	`Max
(
bš
,1));

649 
x1
 = 
h
->
	`G‘BšLowEdge
(
TM©h
::
	`Mš
(
bš
,h->
	`G‘NbšsX
())+1);

651 
y0
 = 
h
->
	`G‘BšCÚ‹Á
(
TM©h
::
	`Max
(
bš
-1,0));

652 
y1
 = 
h
->
	`G‘BšCÚ‹Á
(
TM©h
::
	`Mš
(
bš
, h->
	`G‘NbšsX
()+1));

654 ià(
bš
 == 0) {

655 
y0
 = 
supmš
;

656 
y1
 = 
supmš
;

658 ià(
bš
 == 1) {

659 
y0
 = 
supmš
;

661 ià(
bš
 > 
h
->
	`G‘NbšsX
()) {

662 
y0
 = 1.-
supmš
;

663 
y1
 = 1.-
supmš
;

665 ià(
bš
 =ğ
h
->
	`G‘NbšsX
()) {

666 
y1
 = 1.-
supmš
;

669 ià(
x0
 =ğ
x1
) {

670 
cumuÏÁ
 = 
y1
;

672 
cumuÏÁ
 = 
y0
 + (
y1
-y0)*(
x
-
x0
)/(
x1
-x0);

675 ià(
x
 <ğ
h
->
	`G‘BšLowEdge
(1)){

676 
cumuÏÁ
 = 
supmš
;

678 ià(
x
 >ğ
h
->
	`G‘BšLowEdge
(h->
	`G‘NbšsX
()+1)){

679 
cumuÏÁ
 = 1-
supmš
;

681  
cumuÏÁ
;

682 
	}
}

687 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$PrštT¿nsfÜm©iÚ
Ğ
¡d
::
o¡»am
& )

689 
IÁ_t
 
şs
 = 0;

690 
	`Log
(è<< 
kINFO
 << "I dØnÙ know y‘ howØ´šˆthis...†ook iÀthweighˆf" << 
şs
 << ":" << 
Endl
;

691 
şs
++;

692 
	}
}

698 
	gTMVA
::
V¬ŸbËGaussT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
fúcName
,

699 
IÁ_t
 
·¹
, 
UIÁ_t
 
ŒCouÁ”
, Int_t )

701 cÚ¡ 
UIÁ_t
 
nv¬
 = 
fG‘
.
	`size
();

702 
UIÁ_t
 
numDi¡
 = 
	`G‘NCÏs£s
() + 1;

703 
IÁ_t
 
nBšs
 = -1;

704 
UIÁ_t
 
işs
=0; işs<
numDi¡
; icls++) {

705 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

706 
IÁ_t
 
nbš
=(
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`G‘G¿ph
()->
	`G‘N
();

707 ià(
nbš
 > 
nBšs
)‚Bins=nbin;

712 ià(
·¹
==1) {

713 
fout
 << 
¡d
::
’dl
;

714 
fout
 << " iÁ‚v¬;" << 
¡d
::
’dl
;

715 
fout
 << 
¡d
::
’dl
;

717 
fout
 << " doubË cumuÏtiveDi¡["<<
nv¬
<<"]["<<
numDi¡
<<"]["<<
nBšs
+1<<"];"<<
¡d
::
’dl
;

718 
fout
 << " doubË X["<<
nv¬
<<"]["<<
numDi¡
<<"]["<<
nBšs
+1<<"];"<<
¡d
::
’dl
;

719 
fout
 << " doubË xMš["<<
nv¬
<<"]["<<
numDi¡
<<"];"<<
¡d
::
’dl
;

720 
fout
 << " doubË xMax["<<
nv¬
<<"]["<<
numDi¡
<<"];"<<
¡d
::
’dl
;

721 
fout
 << " iÁ‚bšs["<<
nv¬
<<"]["<<
numDi¡
<<"];"<<
¡d
::
’dl
;

723 ià(
·¹
==2) {

724 
fout
 << 
¡d
::
’dl
;

725 
fout
 << "#šşud\"m©h.h\"" << 
¡d
::
’dl
;

726 
fout
 << 
¡d
::
’dl
;

727 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

728 
fout
 << "šlšvoid " << 
fúcName
 << "::In™T¿nsfÜm_"<<
ŒCouÁ”
<<"()" << 
¡d
::
’dl
;

729 
fout
 << "{" << 
¡d
::
’dl
;

730 
fout
 << " // Gauss/UnifÜm¿nsfÜm©iÚ, in™Ÿli§tiÚ" << 
¡d
::
’dl
;

731 
fout
 << "‚v¬=" << 
nv¬
 << ";" << 
¡d
::
’dl
;

732 
UIÁ_t
 
işs
=0; işs<
numDi¡
; icls++) {

733 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

734 
IÁ_t
 
nbš
=(
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`G‘G¿ph
()->
	`G‘N
();

735 
fout
 << "‚bšs["<<
iv¬
<<"]["<<
işs
<<"]="<<
nbš
<<";"<<
¡d
::
’dl
;

742 
UIÁ_t
 
işs
=0; işs<
numDi¡
; icls++) {

743 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬
; ivar++) {

745 
Œy
{

747 
Ch¬_t
 
ty³
 = 
fG‘
.
	`©
(
iv¬
).
fœ¡
;

748 ifĞ
ty³
 != 'v' ){

749 
	`Log
(è<< 
kWARNING
 << "MakeCÏs fÜhGaus ŒªsfÜm©iÚ wÜk Úly fÜhŒªsfÜm©iÚ oàv¬ŸbËs. ThŒªsfÜm©iÚ oàrg‘s/¥eù©Ü i nÙ im¶em’‹d." << 
Endl
;

751 }
	`ÿtch
Ğ
¡d
::
out_of_¿nge
 
exû±
 ){

752 
	`Log
(è<< 
kWARNING
 << "MakeCÏs fÜhGaus ŒªsfÜm©iÚ s—rched fÜ‡‚Úƒxi¡šg v¬ŸbË index (" << 
iv¬
 << ")" << 
Endl
;

757 
DoubË_t
 
xmn
 = (
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`G‘G¿ph
()->
	`G‘X
()[0];

758 
DoubË_t
 
xmx
 = (
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`G‘G¿ph
()->
	`G‘X
()[(fCumuÏtivePDF[iv¬][işs])->G‘G¿ph()->
	`G‘N
()-1];

760 
fout
 << " xMš["<<
iv¬
<<"]["<<
işs
<<"]="<< 
	`gToŞs
().
	`SŒšgFromDoubË
(
xmn
)<<";"<<
¡d
::
’dl
;

761 
fout
 << " xMax["<<
iv¬
<<"]["<<
işs
<<"]="<<
	`gToŞs
().
	`SŒšgFromDoubË
(
xmx
)<<";"<<
¡d
::
’dl
;

762 
IÁ_t
 
ibš
=0; ibš<(
fCumuÏtivePDF
[
iv¬
][
işs
])->
	`G‘G¿ph
()->
	`G‘N
(); ibin++) {

763 
fout
 << " cumuÏtiveDi¡[" << 
iv¬
 << "]["<< 
işs
<< "]["<<
ibš
<<"]="<< 
	`gToŞs
().
	`SŒšgFromDoubË
((
fCumuÏtivePDF
[iv¬][işs])->
	`G‘G¿ph
()->
	`G‘Y
()[ibš])<< ";"<<
¡d
::
’dl
;

764 
fout
 << " X[" << 
iv¬
 << "]["<< 
işs
<< "]["<<
ibš
<<"]="<< 
	`gToŞs
().
	`SŒšgFromDoubË
((
fCumuÏtivePDF
[iv¬][işs])->
	`G‘G¿ph
()->
	`G‘X
()[ibš])<< ";"<<
¡d
::
’dl
;

769 
fout
 << "}" << 
¡d
::
’dl
;

770 
fout
 << 
¡d
::
’dl
;

771 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

772 
fout
 << "šlšvoid " << 
fúcName
 << "::T¿nsfÜm_"<<
ŒCouÁ”
<<"Ğ¡d::veùÜ<doubË>& iv, iÁ clsInècÚ¡" << 
¡d
::
’dl
;

773 
fout
 << "{" << 
¡d
::
’dl
;

774 
fout
 << " // Gauss/UnifÜm¿nsfÜm©iÚ" << 
¡d
::
’dl
;

775 
fout
 << " iÁ cls=şsIn;" << 
¡d
::
’dl
;

776 
fout
 << " ià(ş < 0 || cl > "<<
	`G‘NCÏs£s
()<<"è{"<< 
¡d
::
’dl
;

777 
fout
 << " ià("<<
	`G‘NCÏs£s
()<<" > 1 ) cl ğ"<<G‘NCÏs£s()<<";"<< 
¡d
::
’dl
;

778 
fout
 << "ƒl£ cl ğ"<<(
fCumuÏtivePDF
[0].
	`size
()==1?0:2)<<";"<< 
¡d
::
’dl
;

779 
fout
 << " }"<< 
¡d
::
’dl
;

781 
fout
 << " // cİyhv¬ŸbË which‡» gošgØbŒªsfÜmed "<< 
¡d
::
’dl
;

782 
V¬ŸbËT¿nsfÜmBa£
::
	`MakeFunùiÚ
(
fout
, 
fúcName
, 0, 
ŒCouÁ”
, 0 );

783 
fout
 << " stiø¡d::veùÜ<doubË> dv; "<< 
¡d
::
’dl
;

784 
fout
 << " dv.»sizeÒv¬); "<< 
¡d
::
’dl
;

785 
fout
 << " fÜ (šˆiv¬=0; iv¬<nv¬; iv¬++èdv[iv¬] = iv[šdiûsG‘.©(iv¬)]; "<< 
¡d
::
’dl
;

786 
fout
 << " "<< 
¡d
::
’dl
;

787 
fout
 << " boŞ FÏtNÙGaus ğ"<< (
fFÏtNÙGauss
? "Œue": "çl£"è<<"; "<< 
¡d
::
’dl
;

788 
fout
 << " doubË cumuÏÁ; "<< 
¡d
::
’dl
;

789 
fout
 << " //cÚ¡ iÁ‚v¬ = "<<
nv¬
<<"; "<< 
¡d
::
’dl
;

790 
fout
 << " fÜ (šˆiv¬=0; iv¬<nv¬; iv¬++è{ "<< 
¡d
::
’dl
;

791 
fout
 << " iÁ‚bš =‚bšs[iv¬][şs]; "<< 
¡d
::
’dl
;

792 
fout
 << " iÁ ibš=0; "<< 
¡d
::
’dl
;

793 
fout
 << " wh(dv[iv¬] > X[iv¬][şs][ibš]èibš++; "<< 
¡d
::
’dl
;

794 
fout
 << " "<< 
¡d
::
’dl
;

795 
fout
 << " ià(ibš<0è{ ibš=0;} "<< 
¡d
::
’dl
;

796 
fout
 << " ià(ibš>òbšè{ ibšòbš-1;} "<< 
¡d
::
’dl
;

797 
fout
 << " iÁ‚extbš = ibš; "<< 
¡d
::
’dl
;

798 
fout
 << " ià((dv[iv¬] > X[iv¬][şs][ibš] && ibš !òbš-1è|| ibš==0è "<< 
¡d
::
’dl
;

799 
fout
 << "‚extbš++; "<< 
¡d
::
’dl
;

800 
fout
 << "ƒl£ "<< 
¡d
::
’dl
;

801 
fout
 << "‚extbš--; "<< 
¡d
::
’dl
;

802 
fout
 << " "<< 
¡d
::
’dl
;

803 
fout
 << " doubË dx = X[iv¬][şs][ibš]- X[iv¬][şs][Ãxtbš]; "<< 
¡d
::
’dl
;

804 
fout
 << " doubË dy = cumuÏtiveDi¡[iv¬][şs][ibš] - cumuÏtiveDi¡[iv¬][şs][Ãxtbš]; "<< 
¡d
::
’dl
;

805 
fout
 << " cumuÏÁ = cumuÏtiveDi¡[iv¬][şs][ibš] + (dv[iv¬] - X[iv¬][şs][ibš])* dy/dx;"<< 
¡d
::
’dl
;

806 
fout
 << " "<< 
¡d
::
’dl
;

807 
fout
 << " "<< 
¡d
::
’dl
;

808 
fout
 << " ià(cumuÏÁ>1.-10e-10ècumuÏÁ = 1.-10e-10; "<< 
¡d
::
’dl
;

809 
fout
 << " ià(cumuÏÁ<10e-10è cumuÏÁ = 10e-10; "<< 
¡d
::
’dl
;

810 
fout
 << " ià(FÏtNÙGaussèdv[iv¬] = cumuÏÁ; "<< 
¡d
::
’dl
;

811 
fout
 << "ƒl£ { "<< 
¡d
::
’dl
;

812 
fout
 << " doubË maxErfInvArgRªgğ0.99999999; "<< 
¡d
::
’dl
;

813 
fout
 << " doubË‡rg = 2.0*cumuÏÁ - 1.0; "<< 
¡d
::
’dl
;

814 
fout
 << " ià×rg > maxErfInvArgRªgeè¬gğmaxErfInvArgRªge; "<< 
¡d
::
’dl
;

815 
fout
 << " ià×rg < -maxErfInvArgRªgeè¬g=-maxErfInvArgRªge; "<< 
¡d
::
’dl
;

816 
fout
 << " doubË inv”f=0., s=1. ; "<< 
¡d
::
’dl
;

817 
fout
 << " wh(¡°>1.e-10){; "<< 
¡d
::
’dl
;

818 
fout
 << " iàÓrf(šv”f)>¬gèšv”à-=¡°; "<< 
¡d
::
’dl
;

819 
fout
 << "ƒl£ iàÓrf(šv”f)<÷rg &&ƒrf(šv”f+¡p)>÷rgè¡p=¡p/5. ; "<< 
¡d
::
’dl
;

820 
fout
 << "ƒl£ inv”à+ğ¡p; "<< 
¡d
::
’dl
;

821 
fout
 << " } ; "<< 
¡d
::
’dl
;

822 
fout
 << " //dv[iv¬] = 1.414213562*TM©h::ErfInv”£×rg); "<< 
¡d
::
’dl
;

823 
fout
 << " dv[iv¬] = 1.414213562* inv”f; "<< 
¡d
::
’dl
;

824 
fout
 << " } "<< 
¡d
::
’dl
;

825 
fout
 << " } "<< 
¡d
::
’dl
;

826 
fout
 << " // cİyhŒªsfÜmed v¬ŸbË back "<< 
¡d
::
’dl
;

827 
fout
 << " fÜ (šˆiv¬=0; iv¬<nv¬; iv¬++èiv[šdiûsPut.©(iv¬)] = dv[iv¬]; "<< 
¡d
::
’dl
;

828 
fout
 << "} "<< 
¡d
::
’dl
;

830 
	}
}

	@src/VariableIdentityTransform.cxx

32 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

34 
	~"TMVA/Ev’t.h
"

35 
	~"TMVA/MsgLogg”.h
"

36 
	~"TMVA/SVEv’t.h
"

37 
	~"TMVA/Ty³s.h
"

38 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

40 
	~"Rty³s.h
"

41 
	~"TSŒšg.h
"

43 
	~<io¡»am
>

45 
Çme¥aû
 
	gTMVA
 {

46 
şass
 
	gD©aS‘Info
;

49 
CÏssImp
(
TMVA
::
V¬ŸbËId’t™yT¿nsfÜm
);

54 
	gTMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$V¬ŸbËId’t™yT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
 )

55 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kId’t™y
, "Id" )

57 
	}
}

62 
	gTMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$In™Ÿlize
()

64 
	}
}

69 
BoŞ_t
 
TMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
)

71 
In™Ÿlize
();

73 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
	gkTRUE
;

75 
Log
(è<< 
	gkDEBUG
 << "P»·ršghId’t™y¿nsfÜm©iÚ..." << 
	gEndl
;

77 ifĞ
	gfG‘
.
size
(è< 
	gev’ts
[0]->
G‘NV¬ŸbËs
() )

78 
Log
(è<< 
	gkFATAL
 << "Id’t™y¿nsfÜm dÛ nÙ‡Îow fÜ‡ s–eùiÚ oàšpuˆv¬ŸbËs. PËa£„emovthv¬ŸbË s–eùiÚ o±iÚ‡nd…uˆÚly 'I'." << 
	gEndl
;

80 
S‘NV¬ŸbËs
(
ev’ts
[0]->
G‘NV¬ŸbËs
());

82 
S‘C»©ed
Ğ
kTRUE
 );

84  
	gkTRUE
;

91 
	gTMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$A‰achXMLTo
( * )

93 
	}
}

98 
TMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$R—dFromXML
( * )

101 
	}
}

106 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$T¿nsfÜm
 (cÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 ) const

108  
ev
;

109 
	}
}

114 
	gTMVA
::
V¬ŸbËId’t™yT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
âcName
,

115 
IÁ_t
 , 
UIÁ_t
 
ŒCouÁ”
, Int_t )

117 
fout
 << "šlšvoid " << 
âcName
 << "::In™T¿nsfÜm_Id’t™y_" << 
ŒCouÁ”
 << "(è{}" << 
¡d
::
’dl
;

118 
fout
 << 
¡d
::
’dl
;

119 
fout
 << "šlšvoid " << 
âcName
 << "::T¿nsfÜm_Id’t™y_" << 
ŒCouÁ”
 << "(cÚ¡ std::veùÜ<doubË> &, iÁècÚ¡ {}" << 
¡d
::
’dl
;

120 
	}
}

	@src/VariableImportance.cxx

12 
	~"TMVA/V¬ŸbËImpÜnû.h
"

14 
	~"TMVA/CÚfig.h
"

15 
	~"TMVA/D©aS‘Info.h
"

16 
	~"TMVA/Env–İe.h
"

17 
	~"TMVA/FaùÜy.h
"

18 
	~"TMVA/O±iÚM­.h
"

19 
	~"TMVA/M‘hodBa£.h
"

20 
	~"TMVA/M‘hodC©egÜy.h
"

21 
	~"TMVA/MsgLogg”.h
"

22 
	~"TMVA/Ty³s.h
"

23 
	~"TMVA/V¬T¿nsfÜmHªdËr.h
"

25 
	~"TAxis.h
"

26 
	~"TG¿ph.h
"

27 
	~"TCªvas.h
"

28 
	~"TH1.h
"

29 
	~"TRªdom3.h
"

30 
	~"TStyË.h
"

31 
	~"TSy¡em.h
"

33 
	~<b™£t
>

34 
	~<io¡»am
>

35 
	~<memÜy
>

36 
	~<ut™y
>

40 
	#NBITS
 32

	)

44 
	gTMVA
::
V¬ŸbËImpÜnûResuÉ
::
	$V¬ŸbËImpÜnûResuÉ
():
	`fImpÜnûV®ues
("VariableImportance"),

45 
	$fImpÜnûHi¡
(
nuÎ±r
)

48 
	}
}

52 
	gTMVA
::
V¬ŸbËImpÜnûResuÉ
::
	$V¬ŸbËImpÜnûResuÉ
(cÚ¡ 
V¬ŸbËImpÜnûResuÉ
 &
obj
)

54 
fImpÜnûV®ues
 = 
obj
.fImportanceValues;

55 
fImpÜnûHi¡
 = 
obj
.fImportanceHist;

56 
	}
}

60 
	gTMVA
::
V¬ŸbËImpÜnûResuÉ
::
	$Pršt
() const

62 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

63 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

65 
MsgLogg”
 
	`fLogg”
("VariableImportance");

66 if(
fTy³
==
VITy³
::
kShÜt
)

68 
fLogg”
<<
kINFO
<<"V¬ŸbË ImpÜnû ResuÉ (ShÜt)"<<
Endl
;

69 }if(
fTy³
==
VITy³
::
kAÎ
)

71 
fLogg”
<<
kINFO
<<"V¬ŸbË ImpÜnû ResuÉ (AÎ)"<<
Endl
;

73 
fLogg”
<<
kINFO
<<"V¬ŸbË ImpÜnû ResuÉ (Rªdom)"<<
Endl
;

76 
fImpÜnûV®ues
.
	`Pršt
();

77 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

78 
	}
}

82 
TCªvas
* 
	gTMVA
::
V¬ŸbËImpÜnûResuÉ
::
	$D¿w
(cÚ¡ 
TSŒšg
 
Çme
) const

84 
TCªvas
 *
c
=
Ãw
 
	`TCªvas
(
Çme
.
	`D©a
());

85 
fImpÜnûHi¡
->
	`D¿w
("");

86 
fImpÜnûHi¡
->
	`G‘Xaxis
()->
	`S‘T™Ë
(" Variable Names ");

87 
fImpÜnûHi¡
->
	`G‘Yaxis
()->
	`S‘T™Ë
(" Importance (%) ");

88 
c
->
	`D¿w
();

89  
c
;

90 
	}
}

94 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$V¬ŸbËImpÜnû
(
TMVA
::
D©aLßd”
 *
d©®ßd”
):TMVA::
	`Env–İe
("V¬ŸbËImpÜnû",d©®ßd”,
nuÎ±r
),
	$fTy³
(
VITy³
::
kShÜt
)

96 
fCÏssif›r
=
¡d
::
unique_±r
<
FaùÜy
>(
Ãw
 
TMVA
::
	`FaùÜy
("VariableImportance","!V:!ROC:!ModelPersistence:Silent:Color:!DrawProgressBar:AnalysisType=Classification"));

97 
	}
}

101 
	gTMVA
::
V¬ŸbËImpÜnû
::~
	$V¬ŸbËImpÜnû
()

103 
fCÏssif›r
=
nuÎ±r
;

104 
	}
}

108 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$Ev®u©e
()

110 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

111 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

112 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

115 if(
fTy³
==
VITy³
::
kShÜt
)

117 
	`Ev®u©eImpÜnûShÜt
();

118 }if(
fTy³
==
VITy³
::
kAÎ
)

120 
	`Ev®u©eImpÜnûAÎ
();

122 
UIÁ_t
 
nb™s
=
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

123 if(
nb™s
<10)

124 
	`Log
()<<
kERROR
<<"Running variable importance with†esshat 10 varibales in Random mode "<<

125 "ÿÀtØ´oduû incÚsi¡’„esuÉs"<<
Endl
;

126 
	`Ev®u©eImpÜnûRªdom
(
	`pow
(
nb™s
,2));

128 
fResuÉs
.
fTy³
 = fType;

129 
TMVA
::
MsgLogg”
::
	`EÇbËOuut
();

130 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kFALSE
);

131 
	`Log
()<<
kINFO
<<"Ev®u©iÚ dÚe."<<
Endl
;

132 
TMVA
::
	`gCÚfig
().
	`S‘S’t
(
kTRUE
);

133 
	}
}

137 
ULÚg_t
 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$Sum
(
ULÚg_t
 
i
)

139 
ULÚg_t
 
sum
=0;

140 
ULÚg_t
 
n
=0;n<
i
;n++è
sum
+=
	`pow
(2,n);

141  
sum
;

142 
	}
}

146 
TH1F
* 
	gTMVA
::
V¬ŸbËImpÜnû
::
G‘ImpÜnû
(cÚ¡ 
UIÁ_t
 
nb™s
,
¡d
::
veùÜ
<
Flßt_t
> &
impÜnûs
,¡d::veùÜ<
TSŒšg
> &
v¬Names
)

148 
TH1F
 *
vihi¡
 = 
Ãw
 TH1F("vihi¡", "", 
nb™s
, 0,‚bits);

150 
	ggStyË
->
S‘O±St
(000000);

152 
Flßt_t
 
	gnÜm®iz©iÚ
 = 0.0;

153 
UIÁ_t
 
	gi
 = 0; i < 
	gnb™s
; i++è
	gnÜm®iz©iÚ
 +ğ
impÜnûs
[
i
];

155 
Flßt_t
 
	groc
 = 0.0;

157 
	ggStyË
->
S‘T™ËXOff£t
(0.4);

158 
	ggStyË
->
S‘T™ËXOff£t
(1.2);

161 
UIÁ_t
 
	gi
 = 1; i < 
	gnb™s
 + 1; i++) {

162 
	groc
 = 100.0 * 
impÜnûs
[
i
 - 1] / 
nÜm®iz©iÚ
;

163 
	gvihi¡
->
G‘Xaxis
()->
S‘BšLab–
(
i
, 
v¬Names
[˜- 1].
D©a
());

164 
	gvihi¡
->
S‘BšCÚ‹Á
(
i
, 
roc
);

167 
	gvihi¡
->
Lab–sO±iÚ
("v >", "X");

168 
	gvihi¡
->
S‘B¬Width
(0.97);

169 
	gvihi¡
->
S‘FlCŞÜ
(
TCŞÜ
::
G‘CŞÜ
("#006600"));

171 
	gvihi¡
->
G‘Xaxis
()->
S‘T™Ë
(" Variable Names ");

172 
	gvihi¡
->
G‘Xaxis
()->
S‘T™ËSize
(0.045);

173 
	gvihi¡
->
G‘Xaxis
()->
C’‹rT™Ë
();

174 
	gvihi¡
->
G‘Xaxis
()->
S‘T™ËOff£t
(1.24);

176 
	gvihi¡
->
G‘Yaxis
()->
S‘T™Ë
(" Importance (%)");

177 
	gvihi¡
->
G‘Yaxis
()->
S‘T™ËSize
(0.045);

178 
	gvihi¡
->
G‘Yaxis
()->
C’‹rT™Ë
();

179 
	gvihi¡
->
G‘Yaxis
()->
S‘T™ËOff£t
(1.24);

181 
	gvihi¡
->
G‘Yaxis
()->
S‘RªgeU£r
(-7, 50);

182 
	gvihi¡
->
S‘DœeùÜy
(0);

184  
	gvihi¡
;

189 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$Ev®u©eImpÜnûShÜt
()

191 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

192 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

193 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

195 
ušt32_t
 
x
 = 0;

196 
ušt32_t
 
y
 = 0;

198 cÚ¡ 
UIÁ_t
 
nb™s
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

199 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

201 
ULÚg_t
 
¿nge
 = 
	`Sum
(
nb™s
);

204 
¡d
::
veùÜ
<
Flßt_t
> 
	`impÜnûs
(
nb™s
);

205 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++)
impÜnûs
[i] = 0;

207 
Flßt_t
 
SROC
, 
SSROC
;

209 
x
 = 
¿nge
;

211 
¡d
::
b™£t
<
NBITS
> 
	`xb™£t
(
x
);

212 ià(
x
 =ğ0è
	`Log
()<<
kFATAL
<<"Error:‚eed‡t†east one variable.";

216 
TMVA
::
D©aLßd”
 *
£eddl
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

219 
UIÁ_t
 
šdex
 = 0; index < 
nb™s
; index++){

220 ià(
xb™£t
[
šdex
]è
£eddl
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

224 
	`D©aLßd”Cİy
(
£eddl
,
fD©aLßd”
.
	`g‘
());

227 
fCÏssif›r
->
	`BookM‘hod
(
£eddl
, 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

230 
fCÏssif›r
->
	`T¿šAÎM‘hods
();

231 
fCÏssif›r
->
	`Te¡AÎM‘hods
();

232 
fCÏssif›r
->
	`Ev®u©eAÎM‘hods
();

235 
SROC
 = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

237 
d–‘e
 
£eddl
;

238 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

239 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

241 
ušt32_t
 
i
 = 0; i < 
NBITS
; ++i) {

242 ià(
x
 & (1 << 
i
)) {

243 
y
 = 
x
 & ~(1 << 
i
);

244 
¡d
::
b™£t
<
NBITS
> 
	`yb™£t
(
y
);

248 
DoubË_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

249 ià(
y
 == 0) {

250 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

255 
TMVA
::
D©aLßd”
 *
sub£eddl
 = 
Ãw
 TMVA::
	`D©aLßd”
(
yb™£t
.
	`to_¡ršg
());

257 
UIÁ_t
 
šdex
 = 0; index < 
nb™s
; index++) {

258 ià(
yb™£t
[
šdex
]è
sub£eddl
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

262 
	`D©aLßd”Cİy
(
sub£eddl
,
fD©aLßd”
.
	`g‘
());

265 
fCÏssif›r
->
	`BookM‘hod
(
sub£eddl
, 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

268 
fCÏssif›r
->
	`T¿šAÎM‘hods
();

269 
fCÏssif›r
->
	`Te¡AÎM‘hods
();

270 
fCÏssif›r
->
	`Ev®u©eAÎM‘hods
();

273 
SSROC
 = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
yb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

274 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

276 
d–‘e
 
sub£eddl
;

277 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

278 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

281 
Flßt_t
 
nÜm®iz©iÚ
 = 0.0;

282 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++è
nÜm®iz©iÚ
 +ğ
impÜnûs
[i];

284 
UIÁ_t
 
i
=0;i<
nb™s
;i++){

286 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=(100.0 * 
impÜnûs
[i] / 
nÜm®iz©iÚ
);

288 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=fResuÉs.fImpÜnûV®ues.
G‘V®ue
<
TSŒšg
>(varNames[i])+" % ";

290 
fResuÉs
.
fImpÜnûHi¡
 = 
¡d
::
sh¬ed_±r
<
TH1F
>(
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
));

291 
	}
}

295 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$Ev®u©eImpÜnûRªdom
(
UIÁ_t
 
£eds
)

297 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

298 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

299 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

301 
TRªdom3
 *
¿ng’
 = 
Ãw
 
	`TRªdom3
(0);

303 
ušt32_t
 
x
 = 0;

304 
ušt32_t
 
y
 = 0;

307 cÚ¡ 
UIÁ_t
 
nb™s
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

308 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

310 
ULÚg_t
 
¿nge
 = 
	`pow
(2, 
nb™s
);

313 
¡d
::
veùÜ
<
Flßt_t
> 
	`impÜnûs
(
nb™s
);

314 
Flßt_t
 
impÜnûs_nÜm
 = 0;

316 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++)
impÜnûs
[i] = 0;

318 
Flßt_t
 
SROC
, 
SSROC
;

320 
x
 = 
¿nge
;

322 
UIÁ_t
 
n
 = 0;‚ < 
£eds
;‚++) {

323 
x
 = 
¿ng’
 -> 
	`IÁeg”
(
¿nge
);

325 
¡d
::
b™£t
<
NBITS
> 
	`xb™£t
(
x
);

326 ià(
x
 == 0) ;

330 
TMVA
::
D©aLßd”
 *
£eddl
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

333 
UIÁ_t
 
šdex
 = 0; index < 
nb™s
; index++) {

334 ià(
xb™£t
[
šdex
]è
£eddl
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

338 
	`D©aLßd”Cİy
(
£eddl
,
fD©aLßd”
.
	`g‘
());

341 
fCÏssif›r
->
	`BookM‘hod
(
£eddl
, 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

344 
fCÏssif›r
->
	`T¿šAÎM‘hods
();

345 
fCÏssif›r
->
	`Te¡AÎM‘hods
();

346 
fCÏssif›r
->
	`Ev®u©eAÎM‘hods
();

349 
SROC
 = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

351 
d–‘e
 
£eddl
;

352 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

353 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

355 
ušt32_t
 
i
 = 0; i < 32; ++i) {

356 ià(
x
 & (1 << 
i
)) {

357 
y
 = 
x
 & ~(1 << 
i
);

358 
¡d
::
b™£t
<
NBITS
> 
	`yb™£t
(
y
);

362 
DoubË_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

363 ià(
y
 == 0) {

364 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

365 
impÜnûs_nÜm
 +ğ
impÜnûs
[
ny
];

370 
TMVA
::
D©aLßd”
 *
sub£eddl
 = 
Ãw
 TMVA::
	`D©aLßd”
(
yb™£t
.
	`to_¡ršg
());

372 
UIÁ_t
 
šdex
 = 0; index < 
nb™s
; index++) {

373 ià(
yb™£t
[
šdex
]è
sub£eddl
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

377 
	`D©aLßd”Cİy
(
sub£eddl
,
fD©aLßd”
.
	`g‘
());

380 
fCÏssif›r
->
	`BookM‘hod
(
sub£eddl
, 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

383 
fCÏssif›r
->
	`T¿šAÎM‘hods
();

384 
fCÏssif›r
->
	`Te¡AÎM‘hods
();

385 
fCÏssif›r
->
	`Ev®u©eAÎM‘hods
();

388 
SSROC
 = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
yb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

389 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

391 
d–‘e
 
sub£eddl
;

392 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

393 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

398 
Flßt_t
 
nÜm®iz©iÚ
 = 0.0;

399 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++è
nÜm®iz©iÚ
 +ğ
impÜnûs
[i];

401 
UIÁ_t
 
i
=0;i<
nb™s
;i++){

403 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=(100.0 * 
impÜnûs
[i] / 
nÜm®iz©iÚ
);

405 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=fResuÉs.fImpÜnûV®ues.
G‘V®ue
<
TSŒšg
>(varNames[i])+" % ";

407 
fResuÉs
.
fImpÜnûHi¡
 = 
¡d
::
sh¬ed_±r
<
TH1F
>(
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
));

408 
d–‘e
 
¿ng’
;

410 
	}
}

414 
	gTMVA
::
V¬ŸbËImpÜnû
::
	$Ev®u©eImpÜnûAÎ
()

417 
TSŒšg
 
m‘hodName
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodName");

418 
TSŒšg
 
m‘hodT™Ë
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodTitle");

419 
TSŒšg
 
m‘hodO±iÚs
 = 
fM‘hod
.
G‘V®ue
<TString>("MethodOptions");

421 
ušt32_t
 
x
 = 0;

422 
ušt32_t
 
y
 = 0;

425 cÚ¡ 
UIÁ_t
 
nb™s
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘NV¬ŸbËs
();

426 
¡d
::
veùÜ
<
TSŒšg
> 
v¬Names
 = 
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘Li¡OfV¬ŸbËs
();

428 
ULÚg_t
 
¿nge
 = 
	`pow
(2, 
nb™s
);

431 
¡d
::
veùÜ
<
Flßt_t
> 
	`impÜnûs
(
nb™s
);

434 
¡d
::
veùÜ
<
Flßt_t
> 
	`ROC
(
¿nge
);

435 
ROC
[0]=0.5;

436 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++è
impÜnûs
[i] = 0;

438 
Flßt_t
 
SROC
, 
SSROC
;

439  
x
 = 1; x <
¿nge
 ; x++) {

441 
¡d
::
b™£t
<
NBITS
> 
	`xb™£t
(
x
);

442 ià(
x
 == 0) ;

445 
TMVA
::
D©aLßd”
 *
£eddl
 = 
Ãw
 TMVA::
	`D©aLßd”
(
xb™£t
.
	`to_¡ršg
());

448 
UIÁ_t
 
šdex
 = 0; index < 
nb™s
; index++) {

449 ià(
xb™£t
[
šdex
]è
£eddl
->
	`AddV¬ŸbË
(
v¬Names
[index], 'F');

452 
	`D©aLßd”Cİy
(
£eddl
,
fD©aLßd”
.
	`g‘
());

454 
£eddl
->
	`P»·»T¿ššgAndTe¡T»e
(
fD©aLßd”
->
	`G‘DeçuÉD©aS‘Info
().
	`G‘Cut
("SigÇl"), fD©aLßd”->G‘DeçuÉD©aS‘Info().G‘Cut("Background"), fD©aLßd”->G‘DeçuÉD©aS‘Info().
	`G‘S¶™O±iÚs
());

457 
fCÏssif›r
->
	`BookM‘hod
(
£eddl
, 
m‘hodName
, 
m‘hodT™Ë
, 
m‘hodO±iÚs
);

460 
fCÏssif›r
->
	`T¿šAÎM‘hods
();

461 
fCÏssif›r
->
	`Te¡AÎM‘hods
();

462 
fCÏssif›r
->
	`Ev®u©eAÎM‘hods
();

465 
ROC
[
x
] = 
fCÏssif›r
->
	`G‘ROCIÁeg¿l
(
xb™£t
.
	`to_¡ršg
(), 
m‘hodT™Ë
);

467 
d–‘e
 
£eddl
;

468 
fCÏssif›r
->
	`D–‘eAÎM‘hods
();

469 
fCÏssif›r
->
fM‘hodsM­
.
	`ş—r
();

473  
x
 = 0; x <
¿nge
 ; x++)

475 
SROC
=
ROC
[
x
];

476 
ušt32_t
 
i
 = 0; i < 
NBITS
; ++i) {

477 ià(
x
 & (1 << 
i
)) {

478 
y
 = 
x
 & ~(1 << 
i
);

479 
¡d
::
b™£t
<
NBITS
> 
	`yb™£t
(
y
);

481 
Flßt_t
 
ny
 = 
	`log
(
x
 - 
y
) / 0.693147;

482 ià(
y
 == 0) {

483 
impÜnûs
[
ny
] = 
SROC
 - 0.5;

488 
SSROC
 = 
ROC
[
y
];

489 
impÜnûs
[
ny
] +ğ
SROC
 - 
SSROC
;

494 
Flßt_t
 
nÜm®iz©iÚ
 = 0.0;

495 
UIÁ_t
 
i
 = 0; i < 
nb™s
; i++è
nÜm®iz©iÚ
 +ğ
impÜnûs
[i];

497 
UIÁ_t
 
i
=0;i<
nb™s
;i++){

499 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=(100.0 * 
impÜnûs
[i] / 
nÜm®iz©iÚ
);

501 
fResuÉs
.
fImpÜnûV®ues
[
v¬Names
[
i
]]=fResuÉs.fImpÜnûV®ues.
G‘V®ue
<
TSŒšg
>(varNames[i])+" % ";

503 
fResuÉs
.
fImpÜnûHi¡
 = 
¡d
::
sh¬ed_±r
<
TH1F
>(
	`G‘ImpÜnû
(
nb™s
,
impÜnûs
,
v¬Names
));

504 
	}
}

	@src/VariableInfo.cxx

34 
	~"TMVA/V¬ŸbËInfo.h
"

36 
	~"TMVA/ToŞs.h
"

38 
	~"TM©h.h
"

39 
	~"TNamed.h
"

41 
	~<iomª
>

42 
	~<s¡»am
>

47 
	gTMVA
::
V¬ŸbËInfo
::
	$V¬ŸbËInfo
ĞcÚ¡ 
TSŒšg
& 
ex´essiÚ
, cÚ¡ TSŒšg& 
t™Ë
, cÚ¡ TSŒšg& 
un™
,

48 
IÁ_t
 
v¬CouÁ”
,

49 
v¬Ty³
, * 
ex‹º®
,

50 
DoubË_t
 
mš
, DoubË_ˆ
max
, 
BoŞ_t
 
nÜm®ized
 )

51 : 
	`TNamed
(
t™Ë
.
	`D©a
(),title.Data()),

52 
	`fEx´essiÚ
 ( 
ex´essiÚ
 ),

53 
	`fUn™
 ( 
un™
 ),

54 
	`fV¬Ty³
 ( 
v¬Ty³
 ),

55 
	`fXm—nNÜm
 ( 0 ),

56 
	`fXrmsNÜm
 ( 0 ),

57 
	`fXv¬ŸnûNÜm
( 0 ),

58 
	`fNÜm®ized
 ( 
nÜm®ized
 ),

59 
	`fEx‹º®D©a
 ( 
ex‹º®
 ),

60 
	$fV¬CouÁ”
 ( 
v¬CouÁ”
 )

62 iàĞ
TM©h
::
	`Abs
(
max
 - 
mš
è<ğ
FLT_MIN
 ) {

63 
fXmšNÜm
 = 
FLT_MAX
;

64 
fXmaxNÜm
 = -
FLT_MAX
;

67 
fXmšNÜm
 = 
mš
;

68 
fXmaxNÜm
 = 
max
;

71 ià(
ex´essiÚ
.
	`CÚšs
(":=")) {

72 
Ssiz_t
 
šdex
 = 
ex´essiÚ
.
	`Index
(":=");

73 
fEx´essiÚ
 = 
	`ex´essiÚ
(
šdex
+2,
ex´essiÚ
.
	`Sizeof
()-index-2);

74 
fLab–
 = 
	`ex´essiÚ
(0,
šdex
);

75 
fLab–
 = fLab–.
	`R•ÏûAÎ
(" ","");

77 
fLab–
 = 
	`G‘Ex´essiÚ
();

79 ià(
fT™Ë
 =ğ""èfT™Ë = 
fLab–
;

80 
fIÁ”ÇlName
 = 
	`gToŞs
().
	`R•ÏûReguÏrEx´essiÚs
Ğ
fLab–
, "_" );

81 
	}
}

86 
	gTMVA
::
V¬ŸbËInfo
::
	$V¬ŸbËInfo
()

87 : 
	`TNamed
(),

88 
	`fEx´essiÚ
 (""),

89 
	`fV¬Ty³
 ('\0'),

90 
	`fXm—nNÜm
 ( 0 ),

91 
	`fXrmsNÜm
 ( 0 ),

92 
	`fXv¬ŸnûNÜm
( 0 ),

93 
	`fNÜm®ized
 ( 
kFALSE
 ),

94 
	`fEx‹º®D©a
 ( 0 ),

95 
	$fV¬CouÁ”
 ( 0 )

97 
fXmšNÜm
 = 1e30;

98 
fXmaxNÜm
 = -1e30;

99 
fLab–
 = 
	`G‘Ex´essiÚ
();

100 
fT™Ë
 = 
fLab–
;

101 
fName
 = 
fT™Ë
;

102 
fUn™
 = "";

103 
fIÁ”ÇlName
 = 
	`gToŞs
().
	`R•ÏûReguÏrEx´essiÚs
Ğ
fLab–
, "_" );

104 
	}
}

109 
	gTMVA
::
V¬ŸbËInfo
::
	$V¬ŸbËInfo
ĞcÚ¡ 
V¬ŸbËInfo
& 
Ùh”
 )

110 : 
	`TNamed
(
Ùh”
),

111 
	`fEx´essiÚ
 ( 
Ùh”
.
fEx´essiÚ
 ),

112 
	`fIÁ”ÇlName
 ( 
Ùh”
.
fIÁ”ÇlName
 ),

113 
	`fLab–
 ( 
Ùh”
.
fLab–
 ),

114 
	`fUn™
 ( 
Ùh”
.
fUn™
 ),

115 
	`fV¬Ty³
 ( 
Ùh”
.
fV¬Ty³
 ),

116 
	`fXmšNÜm
 ( 
Ùh”
.
fXmšNÜm
 ),

117 
	`fXmaxNÜm
 ( 
Ùh”
.
fXmaxNÜm
 ),

118 
	`fXm—nNÜm
 ( 
Ùh”
.
fXm—nNÜm
 ),

119 
	`fXrmsNÜm
 ( 
Ùh”
.
fXrmsNÜm
 ),

120 
	`fXv¬ŸnûNÜm
Ğ
Ùh”
.
fXv¬ŸnûNÜm
 ),

121 
	`fNÜm®ized
 ( 
Ùh”
.
fNÜm®ized
 ),

122 
	`fEx‹º®D©a
 ( 
Ùh”
.
fEx‹º®D©a
 ),

123 
	$fV¬CouÁ”
 ( 
Ùh”
.
fV¬CouÁ”
 )

125 
	}
}

130 
	gTMVA
::
V¬ŸbËInfo
& 
TMVA
::V¬ŸbËInfo::
İ”©Ü
=(cÚ¡ V¬ŸbËInfo& 
rhs
)

132 ià(
this
 !=& 
rhs
) {

133 
fEx´essiÚ
 = 
rhs
.fExpression;

134 
	gfIÁ”ÇlName
 = 
rhs
.
fIÁ”ÇlName
;

135 
	gfV¬Ty³
 = 
rhs
.
fV¬Ty³
;

136 
	gfXmšNÜm
 = 
rhs
.
fXmšNÜm
;

137 
	gfXmaxNÜm
 = 
rhs
.
fXmaxNÜm
;

138 
	gfT™Ë
 = 
rhs
.
fT™Ë
;

139 
	gfName
 = 
rhs
.
fName
;

141  *
	gthis
;

147 
	gTMVA
::
V¬ŸbËInfo
::
	$Wr™eToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
 ) const

149 
UIÁ_t
 
nc
 = 
TM©h
::
	`Max
Ğ30, TM©h::MaxĞ
	`G‘Ex´essiÚ
().
	`L’gth
()+1, 
	`G‘IÁ”ÇlName
().Length()+1 ) );

150 
TSŒšg
 
	`expBr
(
	`FÜm
("\'%s\'",
	`G‘Ex´essiÚ
().
	`D©a
()));

151 
o
 << 
¡d
::
	`£tw
(
nc
è<< 
	`G‘Ex´essiÚ
();

152 
o
 << 
¡d
::
	`£tw
(
nc
è<< 
	`G‘IÁ”ÇlName
();

153 
o
 << 
¡d
::
	`£tw
(
nc
è<< 
	`G‘Lab–
();

154 
o
 << 
¡d
::
	`£tw
(
nc
è<< 
	`G‘T™Ë
();

155 
o
 << 
¡d
::
	`£tw
(
nc
è<< 
	`G‘Un™
();

156 
o
 << " \'" << 
fV¬Ty³
 << "\' ";

157 
o
 << "[" << 
¡d
::
	`£»cisiÚ
(12è<< 
	`G‘Mš
(è<< "," << std::£»cisiÚ(12è<< 
	`G‘Max
(è<< "]" << std::
’dl
;

158 
	}
}

163 
	gTMVA
::
V¬ŸbËInfo
::
	$R—dFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
 )

167 
TSŒšg
 
exp
, 
v¬Çme
, 
v¬ty³
, 
mšmax
, 
mš¡r
, 
max¡r
;

168 
i¡r
 >> 
exp
 >> 
v¬Çme
 >> 
v¬ty³
 >> 
mšmax
;

169 
exp
.
	`SŒ
(
TSŒšg
::
kBÙh
, '\'');

170 
mšmax
 = mšmax.
	`SŒ
(
TSŒšg
::
kL—dšg
, '[');

171 
mšmax
 = mšmax.
	`SŒ
(
TSŒšg
::
kT¿šg
, ']');

172 
mš¡r
 = 
	`mšmax
(0,
mšmax
.
	`Fœ¡
(','));

173 
max¡r
 = 
	`mšmax
(1+
mšmax
.
	`Fœ¡
(','),mšmax.
	`L’gth
());

174 
DoubË_t
 
mš
, 
max
;

175 
¡d
::
¡ršg¡»am
 
	`¡rmš
(
mš¡r
.
	`D©a
());

176 
¡d
::
¡ršg¡»am
 
	`¡rmax
(
max¡r
.
	`D©a
());

177 
¡rmš
 >> 
mš
;

178 
¡rmax
 >> 
max
;

179 
	`S‘Ex´essiÚ
 ( 
exp
 );

180 
	`S‘IÁ”ÇlV¬Name
Ğ
v¬Çme
 );

181 
	`S‘Lab–
 ( 
v¬Çme
 );

182 
	`S‘T™Ë
 ( 
v¬Çme
 );

183 
	`S‘Un™
 ( "" );

184 
	`S‘V¬Ty³
 ( 
v¬ty³
[1] );

185 
	`S‘Mš
 ( 
mš
 );

186 
	`S‘Max
 ( 
max
 );

187 
	}
}

192 
	gTMVA
::
V¬ŸbËInfo
::
	$AddToXML
Ğ* 
v¬node
 )

194 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Ex´essiÚ", 
	`G‘Ex´essiÚ
() );

195 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Lab–", 
	`G‘Lab–
() );

196 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "T™Ë", 
	`G‘T™Ë
() );

197 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Un™", 
	`G‘Un™
() );

198 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "IÁ”Çl", 
	`G‘IÁ”ÇlName
() );

200 
TSŒšg
 
	`ty³SŒ
(" ");

201 
ty³SŒ
[0] = 
	`G‘V¬Ty³
();

202 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Ty³", 
ty³SŒ
 );

203 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Mš", gToŞs().
	`SŒšgFromDoubË
(
	`G‘Mš
()) );

204 
	`gToŞs
().
	`AddA‰r
Ğ
v¬node
, "Max", gToŞs().
	`SŒšgFromDoubË
(
	`G‘Max
()) );

205 
	}
}

210 
	gTMVA
::
V¬ŸbËInfo
::
	$R—dFromXML
Ğ* 
v¬node
 )

212 
TSŒšg
 
ty³
;

213 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Ex´essiÚ", 
fEx´essiÚ
 );

214 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Lab–", 
fLab–
 );

215 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "T™Ë", 
fT™Ë
 );

216 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Un™", 
fUn™
 );

217 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "IÁ”Çl", 
fIÁ”ÇlName
 );

218 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Ty³", 
ty³
 );

219 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Mš", 
fXmšNÜm
 );

220 
	`gToŞs
().
	`R—dA‰r
Ğ
v¬node
, "Max", 
fXmaxNÜm
 );

222 
	`S‘V¬Ty³
(
ty³
[0]);

223 
	}
}

	@src/VariableNormalizeTransform.cxx

35 
	~"TMVA/V¬ŸbËNÜm®izeT¿nsfÜm.h
"

37 
	~"TMVA/D©aS‘.h
"

38 
	~"TMVA/D©aS‘Info.h
"

39 
	~"TMVA/Ev’t.h
"

40 
	~"TMVA/MsgLogg”.h
"

41 
	~"TMVA/ToŞs.h
"

42 
	~"TMVA/Ty³s.h
"

43 
	~"TMVA/V¬ŸbËInfo.h
"

45 
	~"TM©rixD.h
"

46 
	~"TM©rixDBa£.h
"

47 
	~"TVeùÜD.h
"

48 
	~"TVeùÜF.h
"

50 
	~<io¡»am
>

51 
	~<iomª
>

52 
	~<cæßt
>

54 
CÏssImp
(
TMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
);

59 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$V¬ŸbËNÜm®izeT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
 )

60 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kNÜm®ized
, "Norm" )

62 
	}
}

66 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::~
	$V¬ŸbËNÜm®izeT¿nsfÜm
() {

67 
	}
}

72 
TMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$In™Ÿlize
()

74 
UIÁ_t
 
šputSize
 = 
fG‘
.
	`size
();

75 
IÁ_t
 
numC
 = 
	`G‘NCÏs£s
()+1;

76 ià(
	`G‘NCÏs£s
(è<ğ1 ) 
numC
 = 1;

78 
fMš
.
	`»size
Ğ
numC
 );

79 
fMax
.
	`»size
Ğ
numC
 );

80 
IÁ_t
 
i
=0; i<
numC
; i++) {

81 
fMš
.
	`©
(
i
).
	`»size
(
šputSize
);

82 
fMax
.
	`©
(
i
).
	`»size
(
šputSize
);

83 
fMš
.
	`©
(
i
).
	`assign
(
šputSize
, 0);

84 
fMax
.
	`©
(
i
).
	`assign
(
šputSize
, 0);

86 
	}
}

91 
BoŞ_t
 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
)

93 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
kTRUE
;

95 
Log
(è<< 
	gkDEBUG
 << "\tP»·ršghŒªsfÜm©iÚ." << 
	gEndl
;

97 
In™Ÿlize
();

99 
C®cNÜm®iz©iÚP¬ams
Ğ
ev’ts
 );

101 
S‘C»©ed
Ğ
kTRUE
 );

103  
	gkTRUE
;

109 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$T¿nsfÜm
ĞcÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

111 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

120 ià(
şs
 < 0 || cl >ğ(è
fMš
.
	`size
()) cls = fMin.size()-1;

123 
FlßtVeùÜ
 
šput
;

124 
FlßtVeùÜ
 
ouut
;

125 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

126 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

128 ià(
fT¿nsfÜmedEv’t
==0èfT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
();

130 
Flßt_t
 
mš
,
max
;

131 cÚ¡ 
FlßtVeùÜ
& 
mšVeùÜ
 = 
fMš
.
	`©
(
şs
);

132 cÚ¡ 
FlßtVeùÜ
& 
maxVeùÜ
 = 
fMax
.
	`©
(
şs
);

134 
UIÁ_t
 
iidx
 = 0;

135 
¡d
::
veùÜ
<
Ch¬_t
>::
™”©Ü
 
™Mask
 = 
mask
.
	`begš
();

136  
¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅ
 = 
šput
.
	`begš
(), 
™IÅEnd
 = iÅut.
	`’d
(); itInp != itInpEnd; ++itInp) {

137 ifĞ(*
™Mask
) ){

138 ++
iidx
;

139 ++
™Mask
;

144 
Flßt_t
 
v®
 = (*
™IÅ
);

146 
mš
 = 
mšVeùÜ
.
	`©
(
iidx
);

147 
max
 = 
maxVeùÜ
.
	`©
(
iidx
);

148 
Flßt_t
 
off£t
 = 
mš
;

149 
Flßt_t
 
sÿË
 = 1.0/(
max
-
mš
);

151 
Flßt_t
 
v®nÜm
 = (
v®
-
off£t
)*
sÿË
 * 2 - 1;

152 
ouut
.
	`push_back
Ğ
v®nÜm
 );

154 ++
iidx
;

155 ++
™Mask
;

158 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
ouut
, 
mask
, 
ev
 );

159  
fT¿nsfÜmedEv’t
;

160 
	}
}

165 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$Inv”£T¿nsfÜm
(cÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

167 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

171 ià(
şs
 < 0 || cl > 
	`G‘NCÏs£s
()) {

172 ià(
	`G‘NCÏs£s
(è> 1 ) 
şs
 = GetNClasses();

173 
şs
 = 0;

176 
FlßtVeùÜ
 
šput
;

177 
FlßtVeùÜ
 
ouut
;

178 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

179 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
, 
kTRUE
 );

181 ià(
fBackT¿nsfÜmedEv’t
==0èfBackT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
Ğ*
ev
 );

183 
Flßt_t
 
mš
,
max
;

184 cÚ¡ 
FlßtVeùÜ
& 
mšVeùÜ
 = 
fMš
.
	`©
(
şs
);

185 cÚ¡ 
FlßtVeùÜ
& 
maxVeùÜ
 = 
fMax
.
	`©
(
şs
);

187 
UIÁ_t
 
iidx
 = 0;

188  
¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅ
 = 
šput
.
	`begš
(), 
™IÅEnd
 = iÅut.
	`’d
(); itInp != itInpEnd; ++itInp) {

189 
Flßt_t
 
v®
 = (*
™IÅ
);

191 
mš
 = 
mšVeùÜ
.
	`©
(
iidx
);

192 
max
 = 
maxVeùÜ
.
	`©
(
iidx
);

193 
Flßt_t
 
off£t
 = 
mš
;

194 
Flßt_t
 
sÿË
 = 1.0/(
max
-
mš
);

196 
Flßt_t
 
v®nÜm
 = 
off£t
+((
v®
+1)/(
sÿË
 * 2));

197 
ouut
.
	`push_back
Ğ
v®nÜm
 );

199 ++
iidx
;

202 
	`S‘Ouut
Ğ
fBackT¿nsfÜmedEv’t
, 
ouut
, 
mask
, 
ev
, 
kTRUE
 );

204  
fBackT¿nsfÜmedEv’t
;

205 
	}
}

210 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
C®cNÜm®iz©iÚP¬ams
ĞcÚ¡ 
¡d
::
veùÜ
< 
Ev’t
*>& 
ev’ts
 )

212 ià(
ev’ts
.
size
() <= 1)

213 
Log
(è<< 
kFATAL
 << "NÙƒnoughƒv’t (found " << 
ev’ts
.
size
(è<< "ètØÿlcuÏ‹hnÜm®iz©iÚ" << 
Endl
;

215 
FlßtVeùÜ
 
	gšput
;

216 
	g¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

218 
UIÁ_t
 
	gšputSize
 = 
fG‘
.
size
();

220 cÚ¡ 
UIÁ_t
 
	gnCls
 = 
G‘NCÏs£s
();

221 
IÁ_t
 
	gnumC
 = 
nCls
+1;

222 
IÁ_t
 
	g®l
 = 
nCls
;

223 ià(
	gnCls
 <= 1 ) {

224 
numC
 = 1;

225 
	g®l
 = 0;

228 
UIÁ_t
 
	gišp
=0; išp<
	gšputSize
; ++iinp) {

229 
IÁ_t
 
	gic
 = 0; iø< 
	gnumC
; ic++) {

230 
	gfMš
.
©
(
ic
).©(
išp
èğ
FLT_MAX
;

231 
	gfMax
.
©
(
ic
).©(
išp
èğ-
FLT_MAX
;

235 
	g¡d
::
veùÜ
<
Ev’t
*>::
cÚ¡_™”©Ü
 
evIt
 = 
ev’ts
.
begš
();

236 ;
	gevIt
!=
ev’ts
.
’d
();evIt++) {

237 cÚ¡ 
	gTMVA
::
Ev’t
* 
ev’t
 = (*
evIt
);

239 
UIÁ_t
 
	gşs
 = (*
evIt
)->
G‘CÏss
();

241 
	gFlßtVeùÜ
& 
	gmšVeùÜ
 = 
fMš
.
©
(
şs
);

242 
	gFlßtVeùÜ
& 
	gmaxVeùÜ
 = 
fMax
.
©
(
şs
);

244 
	gFlßtVeùÜ
& 
	gmšVeùÜAÎ
 = 
fMš
.
©
(
®l
);

245 
	gFlßtVeùÜ
& 
	gmaxVeùÜAÎ
 = 
fMax
.
©
(
®l
);

247 
G‘IÅut
(
ev’t
,
šput
,
mask
);

248 
UIÁ_t
 
	giidx
 = 0;

249  
	g¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅ
 = 
šput
.
begš
(), 
	g™IÅEnd
 = iÅut.
’d
(); 
	g™IÅ
 !ğ
™IÅEnd
; ++itInp) {

250 
Flßt_t
 
	gv®
 = (*
™IÅ
);

252 ifĞ
	gmšVeùÜ
.
©
(
iidx
è> 
	gv®
 ) mšVeùÜ.©(iidxèğ
v®
;

253 ifĞ
	gmaxVeùÜ
.
©
(
iidx
è< 
	gv®
 ) maxVeùÜ.©(iidxèğ
v®
;

255 ià(
	gnCls
 != 1) {

256 ià(
mšVeùÜAÎ
.
©
(
iidx
è> 
v®
) minVectorAll.at(iidx) = val;

257 ià(
	gmaxVeùÜAÎ
.
©
(
iidx
è< 
	gv®
èmaxVeùÜAÎ.©(iidxèğ
v®
;

260 ++
	giidx
;

270 
	g¡d
::
veùÜ
<
TSŒšg
>* 
TMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$G‘T¿nsfÜm©iÚSŒšgs
Ğ
IÁ_t
 
şs
 ) const

274 ià(
şs
 < 0 || cl > 
	`G‘NCÏs£s
()) cls = GetNClasses();

276 
Flßt_t
 
mš
, 
max
;

277 cÚ¡ 
UIÁ_t
 
size
 = 
fG‘
.
	`size
();

278 
¡d
::
veùÜ
<
TSŒšg
>* 
¡rVec
 = 
Ãw
 std::veùÜ<TSŒšg>(
size
);

280 
UIÁ_t
 
išp
 = 0;

281  
ItV¬Ty³IdxCÚ¡
 
™G‘
 = 
fG‘
.
	`begš
(), 
™G‘End
 = fG‘.
	`’d
(); itGet != itGetEnd; ++itGet ) {

282 
mš
 = 
fMš
.
	`©
(
şs
).©(
išp
);

283 
max
 = 
fMax
.
	`©
(
şs
).©(
išp
);

285 
Ch¬_t
 
ty³
 = (*
™G‘
).
fœ¡
;

286 
UIÁ_t
 
idx
 = (*
™G‘
).
£cÚd
;

287 
Flßt_t
 
off£t
 = 
mš
;

288 
Flßt_t
 
sÿË
 = 1.0/(
max
-
mš
);

289 
TSŒšg
 
	`¡r
("");

290 
V¬ŸbËInfo
& 
v¬Info
 = (
ty³
=='v'?
fDsi
.
	`G‘V¬ŸbËInfo
(
idx
):Ñy³=='t'?fDsi.
	`G‘T¬g‘Info
(idx):fDsi.
	`G‘S³ù©ÜInfo
(idx)));

292 ià(
off£t
 < 0è
¡r
 = 
	`FÜm
Ğ"2*%g*([%s] + %gè- 1", 
sÿË
, 
v¬Info
.
	`G‘Lab–
().
	`D©a
(), -offset );

293 
¡r
 = 
	`FÜm
Ğ"2*%g*([%s] - %gè- 1", 
sÿË
, 
v¬Info
.
	`G‘Lab–
().
	`D©a
(), 
off£t
 );

294 (*
¡rVec
)[
išp
] = 
¡r
;

296 ++
išp
;

299  
¡rVec
;

300 
	}
}

305 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$Wr™eT¿nsfÜm©iÚToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
 ) const

307 
o
 << "# mš max fÜ‡Î v¬ŸbË fÜ‡Î cÏs£ Úaá”hÙh”‡nd‡ ¨Ï¡ƒÁry fÜ‡Î cÏs£ tog‘h”" << 
¡d
::
’dl
;

309 
IÁ_t
 
numC
 = 
	`G‘NCÏs£s
()+1;

310 ià(
	`G‘NCÏs£s
(è<ğ1 ) 
numC
 = 1;

312 
UIÁ_t
 
nv¬s
 = 
	`G‘NV¬ŸbËs
();

313 
UIÁ_t
 
Ágts
 = 
	`G‘NT¬g‘s
();

315 
IÁ_t
 
işs
 = 0; iş < 
numC
; icls++ ) {

316 
o
 << 
işs
 << 
¡d
::
’dl
;

317 
UIÁ_t
 
iv¬
=0; iv¬<
nv¬s
; ivar++)

318 
o
 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< 
fMš
.
	`©
(
işs
).©(
iv¬
) << " "

319 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< 
fMax
.
	`©
(
işs
).©(
iv¬
è<< std::
’dl
;

320 
UIÁ_t
 
™gt
=0; itgt<
Ágts
; itgt++)

321 
o
 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< 
fMš
.
	`©
(
işs
).©(
nv¬s
+
™gt
) << " "

322 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< 
fMax
.
	`©
(
işs
).©(
nv¬s
+
™gt
è<< std::
’dl
;

324 
o
 << "##" << 
¡d
::
’dl
;

325 
	}
}

330 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$A‰achXMLTo
(* 
·»Á
)

332 * 
Œfxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transform");

333 
	`gToŞs
().
	`AddA‰r
(
Œfxml
, "Name", "Normalize");

334 
V¬ŸbËT¿nsfÜmBa£
::
	`A‰achXMLTo
Ğ
Œfxml
 );

336 
IÁ_t
 
numC
 = (
	`G‘NCÏs£s
()<= 1)?1:GetNClasses()+1;

338  
IÁ_t
 
işs
=0; işs<
numC
; icls++ ) {

339 * 
şsxml
 = 
	`gToŞs
().
	`AddChd
(
Œfxml
, "Class");

340 
	`gToŞs
().
	`AddA‰r
(
şsxml
, "CÏssIndex", 
işs
);

341 * 
špxml
 = 
	`gToŞs
().
	`AddChd
(
şsxml
, "Ranges");

342 
UIÁ_t
 
išp
 = 0;

343  
ItV¬Ty³Idx
 
™G‘
 = 
fG‘
.
	`begš
(), 
™G‘End
 = fG‘.
	`’d
(); itGet != itGetEnd; ++itGet ) {

344 * 
mmxml
 = 
	`gToŞs
().
	`AddChd
(
špxml
, "Range");

345 
	`gToŞs
().
	`AddA‰r
(
mmxml
, "Index", 
išp
);

346 
	`gToŞs
().
	`AddA‰r
(
mmxml
, "Mš", 
fMš
.
	`©
(
işs
).©(
išp
) );

347 
	`gToŞs
().
	`AddA‰r
(
mmxml
, "Max", 
fMax
.
	`©
(
işs
).©(
išp
) );

348 ++
išp
;

351 
	}
}

356 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$R—dFromXML
Ğ* 
Œâode
 )

358 
BoŞ_t
 
ÃwFÜm©
 = 
kFALSE
;

360 * 
š²ode
 = 
NULL
;

362 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
, "Selection");

363 ifĞ
š²ode
 !ğ
NULL
 )

364 
ÃwFÜm©
 = 
kTRUE
;

366 ifĞ
ÃwFÜm©
 ){

369 
V¬ŸbËT¿nsfÜmBa£
::
	`R—dFromXML
Ğ
š²ode
 );

373 
UIÁ_t
 
size
 = 
fG‘
.
	`size
();

374 
UIÁ_t
 
şassšdex
, 
idx
;

376 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
Œâode
, "Class" );

377 
ch
) {

378 
IÁ_t
 
ci
 = 0;

379 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏssIndex", 
ci
);

380 
şassšdex
 = 
	`UIÁ_t
(
ci
);

382 
fMš
.
	`»size
(
şassšdex
+1);

383 
fMax
.
	`»size
(
şassšdex
+1);

385 
fMš
[
şassšdex
].
	`»size
(
size
,
	`Flßt_t
(0));

386 
fMax
[
şassšdex
].
	`»size
(
size
,
	`Flßt_t
(0));

388 * 
şch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
ch
 );

389 
şch
) {

390 
TSŒšg
 
	`nodeName
(
	`gToŞs
().
	`G‘Name
(
şch
));

391 if(
nodeName
=="Ranges") {

392 * 
v¬ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
şch
 );

393 
v¬ch
) {

394 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "Index", 
idx
);

395 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "Mš", 
fMš
[
şassšdex
][
idx
]);

396 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "Max", 
fMax
[
şassšdex
][
idx
]);

397 
v¬ch
 = 
	`gToŞs
().
	`G‘NextChd
( varch );

400 
şch
 = 
	`gToŞs
().
	`G‘NextChd
( clch );

402 
ch
 = 
	`gToŞs
().
	`G‘NextChd
( ch );

404 
	`S‘C»©ed
();

409 
UIÁ_t
 
şassšdex
, 
v¬šdex
, 
tgtšdex
, 
nv¬s
, 
Ágts
;

411 
	`gToŞs
().
	`R—dA‰r
(
Œâode
, "NV¬ŸbËs", 
nv¬s
);

413 
	`gToŞs
().
	`R—dA‰r
(
Œâode
, "NT¬g‘s", 
Ágts
);

416  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ){

417 
fG‘
.
	`push_back
(
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
));

419  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ){

420 
fG‘
.
	`push_back
(
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
));

422 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
Œâode
 );

423 
ch
) {

424 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏssIndex", 
şassšdex
);

426 
fMš
.
	`»size
(
şassšdex
+1);

427 
fMax
.
	`»size
(
şassšdex
+1);

428 
fMš
[
şassšdex
].
	`»size
(
nv¬s
+
Ágts
,
	`Flßt_t
(0));

429 
fMax
[
şassšdex
].
	`»size
(
nv¬s
+
Ágts
,
	`Flßt_t
(0));

431 * 
şch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
ch
 );

432 
şch
) {

433 
TSŒšg
 
	`nodeName
(
	`gToŞs
().
	`G‘Name
(
şch
));

434 if(
nodeName
=="Variables") {

435 * 
v¬ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
şch
 );

436 
v¬ch
) {

437 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "V¬Index", 
v¬šdex
);

438 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "Mš", 
fMš
[
şassšdex
][
v¬šdex
]);

439 
	`gToŞs
().
	`R—dA‰r
(
v¬ch
, "Max", 
fMax
[
şassšdex
][
v¬šdex
]);

440 
v¬ch
 = 
	`gToŞs
().
	`G‘NextChd
( varch );

442 } ià(
nodeName
=="Targets") {

443 * 
tgtch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
şch
 );

444 
tgtch
) {

445 
	`gToŞs
().
	`R—dA‰r
(
tgtch
, "T¬g‘Index", 
tgtšdex
);

446 
	`gToŞs
().
	`R—dA‰r
(
tgtch
, "Mš", 
fMš
[
şassšdex
][
nv¬s
+
tgtšdex
]);

447 
	`gToŞs
().
	`R—dA‰r
(
tgtch
, "Max", 
fMax
[
şassšdex
][
nv¬s
+
tgtšdex
]);

448 
tgtch
 = 
	`gToŞs
().
	`G‘NextChd
(gtch );

451 
şch
 = 
	`gToŞs
().
	`G‘NextChd
( clch );

453 
ch
 = 
	`gToŞs
().
	`G‘NextChd
( ch );

455 
	`S‘C»©ed
();

456 
	}
}

463 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
BudT¿nsfÜm©iÚFromV¬Info
ĞcÚ¡ 
¡d
::
veùÜ
<
TMVA
::
V¬ŸbËInfo
>& 
v¬
 )

465 
UIÁ_t
 
nv¬s
 = 
G‘NV¬ŸbËs
();

467 if(
	gv¬
.
size
(è!ğ
nv¬s
)

468 
Log
(è<< 
kFATAL
 << "<BuildTransformationFromVarInfo> can't buildransformation,"

469 << " sšûhnumb” oàv¬ŸbË di§g»e" << 
Endl
;

471 
UIÁ_t
 
	gnumC
 = (
G‘NCÏs£s
()<=1)?1:GetNClasses()+1;

472 
	gfMš
.
ş—r
();fMš.
»size
Ğ
numC
 );

473 
	gfMax
.
ş—r
();fMax.
»size
Ğ
numC
 );

476 
UIÁ_t
 
	gşs
=0; cls<
	gnumC
; ++cls) {

477 
	gfMš
[
şs
].
»size
(
nv¬s
+
G‘NT¬g‘s
(),0);

478 
	gfMax
[
şs
].
»size
(
nv¬s
+
G‘NT¬g‘s
(),0);

479 
UIÁ_t
 
vidx
(0);

480 
	g¡d
::
veùÜ
<
TMVA
::
V¬ŸbËInfo
>::
cÚ¡_™”©Ü
 
v
 = 
v¬
.
begš
(); 
	gv
!=v¬.
’d
(); ++v, ++
	gvidx
) {

481 
	gfMš
[
şs
][
vidx
] = 
v
->
G‘Mš
();

482 
	gfMax
[
şs
][
vidx
] = 
v
->
G‘Max
();

483 
	gfG‘
.
push_back
(
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
vidx
));

486 
S‘C»©ed
();

492 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$R—dT¿nsfÜm©iÚFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
, cÚ¡ 
TSŒšg
& )

494 
UIÁ_t
 
nv¬s
 = 
	`G‘NV¬ŸbËs
();

495 
UIÁ_t
 
Ágts
 = 
	`G‘NT¬g‘s
();

496  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ){

497 
fG‘
.
	`push_back
(
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
));

499  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ){

500 
fG‘
.
	`push_back
(
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
));

502 
buf
[512];

503 
buf2
[512];

504 
i¡r
.
	`g‘lše
(
buf
,512);

505 
TSŒšg
 
¡rv¬
, 
dummy
;

506 
IÁ_t
 
işs
;

507 
TSŒšg
 
‹¡
;

508 !(
buf
[0]=='#'&& buf[1]=='#')) {

509 * 
p
 = 
buf
;

510 *
p
==' ' || *p=='\t')…++;

511 ià(*
p
=='#' || *p=='\0') {

512 
i¡r
.
	`g‘lše
(
buf
,512);

515 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

516 
s¡r
 >> 
işs
;

517 
UIÁ_t
 
iv¬
=0;iv¬<
nv¬s
;ivar++) {

518 
i¡r
.
	`g‘lše
(
buf2
,512);

519 
¡d
::
¡ršg¡»am
 
	`s¡r2
(
buf2
);

520 
s¡r2
 >> 
fMš
[
işs
][
iv¬
] >> 
fMax
[icls][ivar];

522 
UIÁ_t
 
™gt
=0;™gt<
Ágts
;itgt++) {

523 
i¡r
.
	`g‘lše
(
buf2
,512);

524 
¡d
::
¡ršg¡»am
 
	`s¡r2
(
buf2
);

525 
s¡r2
 >> 
fMš
[
işs
][
nv¬s
+
™gt
] >> 
fMax
[icls][nvars+itgt];

527 
i¡r
.
	`g‘lše
(
buf
,512);

529 
	`S‘C»©ed
();

530 
	}
}

535 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$PrštT¿nsfÜm©iÚ
Ğ
¡d
::
o¡»am
& )

537 
IÁ_t
 
nCls
 = 
	`G‘NCÏs£s
();

538 
IÁ_t
 
numC
 = 
nCls
+1;

539 ià(
nCls
 <ğ1 ) 
numC
 = 1;

540 
IÁ_t
 
işs
 = 0; iş < 
numC
; icls++ ) {

541 ifĞ
işs
 =ğ
nCls
 )

542 
	`Log
(è<< 
kINFO
 << "T¿nsfÜm©iÚ fÜ‡Î cÏs£ ba£d oÀthe£„ªges:" << 
Endl
;

544 
	`Log
(è<< 
kINFO
 << "T¿nsfÜm©iÚ fÜ cÏs " << 
işs
 << " ba£d oÀthe£„ªges:" << 
Endl
;

545 
UIÁ_t
 
išp
 = 0;

546  
ItV¬Ty³IdxCÚ¡
 
™G‘
 = 
fG‘
.
	`begš
(), 
™G‘End
 = fG‘.
	`’d
(); itGet != itGetEnd; ++itGet ){

547 
Ch¬_t
 
ty³
 = (*
™G‘
).
fœ¡
;

548 
UIÁ_t
 
idx
 = (*
™G‘
).
£cÚd
;

550 
TSŒšg
 
ty³SŒšg
 = (
ty³
=='v'?"Variable: ": (type=='t'?"Target : ":"Spectator : ") );

551 
	`Log
(è<< 
ty³SŒšg
.
	`D©a
(è<< 
¡d
::
	`£tw
(20è<< 
fMš
[
işs
][
idx
] << std::£tw(20è<< 
fMax
[işs][idx] << 
Endl
;

553 ++
išp
;

556 
	}
}

562 
	gTMVA
::
V¬ŸbËNÜm®izeT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
fúcName
,

563 
IÁ_t
 
·¹
, 
UIÁ_t
 
ŒCouÁ”
, Int_t )

565 
UIÁ_t
 
nV¬
 = 
fG‘
.
	`size
();

566 
UIÁ_t
 
numC
 = 
fMš
.
	`size
();

567 ià(
·¹
==1) {

568 
fout
 << 
¡d
::
’dl
;

569 
fout
 << " doubË fMš_"<<
ŒCouÁ”
<<"["<<
numC
<<"]["<<
nV¬
<<"];" << 
¡d
::
’dl
;

570 
fout
 << " doubË fMax_"<<
ŒCouÁ”
<<"["<<
numC
<<"]["<<
nV¬
<<"];" << 
¡d
::
’dl
;

573 ià(
·¹
==2) {

574 
fout
 << 
¡d
::
’dl
;

575 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

576 
fout
 << "šlšvoid " << 
fúcName
 << "::In™T¿nsfÜm_"<<
ŒCouÁ”
<<"()" << 
¡d
::
’dl
;

577 
fout
 << "{" << 
¡d
::
’dl
;

578 
fout
 << " // NÜm®iz©iÚ¿nsfÜm©iÚ, in™Ÿli§tiÚ" << 
¡d
::
’dl
;

579 
UIÁ_t
 
iv¬
=0; iv¬<
nV¬
; ivar++) {

580 
UIÁ_t
 
işs
 = 0; iş < 
numC
; icls++) {

581 
DoubË_t
 
mš
 = 
TM©h
::
	`Mš
Ğ
FLT_MAX
, 
fMš
.
	`©
(
işs
).©(
iv¬
) );

582 
DoubË_t
 
max
 = 
TM©h
::
	`Max
(-
FLT_MAX
, 
fMax
.
	`©
(
işs
).©(
iv¬
) );

583 
fout
 << " fMš_"<<
ŒCouÁ”
<<"["<<
işs
<<"]["<<
iv¬
<<"] = " << 
¡d
::
	`£»cisiÚ
(12)

584 << 
mš
 << ";" << 
¡d
::
’dl
;

585 
fout
 << " fMax_"<<
ŒCouÁ”
<<"["<<
işs
<<"]["<<
iv¬
<<"] = " << 
¡d
::
	`£»cisiÚ
(12)

586 << 
max
 << ";" << 
¡d
::
’dl
;

589 
fout
 << "}" << 
¡d
::
’dl
;

590 
fout
 << 
¡d
::
’dl
;

591 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

592 
fout
 << "šlšvoid " << 
fúcName
 << "::T¿nsfÜm_"<<
ŒCouÁ”
<<"Ğ¡d::veùÜ<doubË>& iv, iÁ clsècÚ¡" << 
¡d
::
’dl
;

593 
fout
 << "{" << 
¡d
::
’dl
;

594 
fout
 << " // NÜm®iz©iÚ¿nsfÜm©iÚ" << 
¡d
::
’dl
;

595 
fout
 << " ià(ş < 0 || cl > "<<
	`G‘NCÏs£s
()<<"è{"<< 
¡d
::
’dl
;

596 
fout
 << " ià("<<
	`G‘NCÏs£s
()<<" > 1 ) cl ğ"<<G‘NCÏs£s()<<";"<< 
¡d
::
’dl
;

597 
fout
 << "ƒl£ cl ğ"<<(
fMš
.
	`size
()==1?0:2)<<";"<< 
¡d
::
’dl
;

598 
fout
 << " }"<< 
¡d
::
’dl
;

599 
fout
 << " cÚ¡ iÁ‚V¬ = " << 
nV¬
 << ";" << 
¡d
::
’dl
 << std::endl;

600 
fout
 << " // g‘ indiû oàu£d v¬ŸbËs" << 
¡d
::
’dl
;

601 
V¬ŸbËT¿nsfÜmBa£
::
	`MakeFunùiÚ
(
fout
, 
fúcName
, 0, 
ŒCouÁ”
, 0 );

602 
fout
 << " stiø¡d::veùÜ<doubË> dv;" << 
¡d
::
’dl
;

603 
fout
 << " dv.»sizeÒV¬);" << 
¡d
::
’dl
;

604 
fout
 << " fÜ (šˆiv¬=0; iv¬<nV¬; iv¬++èdv[iv¬] = iv[šdiûsG‘.©(iv¬)];" << 
¡d
::
’dl
;

606 
fout
 << " fÜ (šˆiv¬=0;iv¬<"<<
nV¬
<<";iv¬++è{" << 
¡d
::
’dl
;

607 
fout
 << " doubË off£ˆğfMš_"<<
ŒCouÁ”
<<"[şs][iv¬];" << 
¡d
::
’dl
;

608 
fout
 << " doubË sÿË = 1.0/(fMax_"<<
ŒCouÁ”
<<"[şs][iv¬]-fMš_"<<ŒCouÁ”<<"[şs][iv¬]);" << 
¡d
::
’dl
;

609 
fout
 << " iv[šdiûsPut.©(iv¬)] = (dv[iv¬]-off£t)*sÿË * 2 - 1;" << 
¡d
::
’dl
;

610 
fout
 << " }" << 
¡d
::
’dl
;

611 
fout
 << "}" << 
¡d
::
’dl
;

613 
	}
}

	@src/VariablePCATransform.cxx

35 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

37 
	~"TMVA/D©aS‘.h
"

38 
	~"TMVA/Ev’t.h
"

39 
	~"TMVA/MsgLogg”.h
"

40 
	~"TMVA/ToŞs.h
"

41 
	~"TMVA/Ty³s.h
"

43 
	~"TM©rixD.h
"

44 
	~"TM©rixDBa£.h
"

45 
	~"TPršc®.h
"

46 
	~"TVeùÜD.h
"

47 
	~"TVeùÜF.h
"

49 
	~<io¡»am
>

50 
	~<iomª
>

51 
	~<¡dexû±
>

52 
	~<®gÜ™hm
>

54 
CÏssImp
(
TMVA
::
V¬ŸbËPCAT¿nsfÜm
);

59 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$V¬ŸbËPCAT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
 )

60 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kPCA
, "PCA" )

62 
	}
}

67 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::~
	$V¬ŸbËPCAT¿nsfÜm
()

69 
UIÁ_t
 
i
=0; i<
fM—nV®ues
.
	`size
(); i++) {

70 ià(
fM—nV®ues
.
	`©
(
i
è!ğ0è
d–‘e
 fMeanValues.at(i);

71 ià(
fEig’VeùÜs
.
	`©
(
i
è!ğ0è
d–‘e
 fEigenVectors.at(i);

73 
	}
}

81 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$In™Ÿlize
()

83 
	}
}

89 
BoŞ_t
 
TMVA
::
V¬ŸbËPCAT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& 
ev’ts
)

91 
In™Ÿlize
();

93 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
	gkTRUE
;

95 
Log
(è<< 
	gkINFO
 << "P»·ršghPršcË CompÚ’ˆ(PCAèŒªsfÜm©iÚ..." << 
	gEndl
;

97 
UIÁ_t
 
	gšputSize
 = 
fG‘
.
size
();

99 
S‘NV¬ŸbËs
(
šputSize
);

102 ià(
	gšputSize
 <= 1) {

103 
Log
(è<< 
kFATAL
 << "CªnÙ…”fÜm PCA¿nsfÜm©iÚ fÜ " << 
šputSize
 << " v¬ŸbË oÆy" << 
Endl
;

104  
	gkFALSE
;

107 ià(
	gšputSize
 > 200) {

108 
Log
(è<< 
	gkINFO
 << "----------------------------------------------------------------------------"

109 << 
	gEndl
;

110 
Log
(è<< 
	gkINFO


111 << ": MÜthª 200 v¬ŸbËs, wÈnÙ c®cuÏ‹ PCA!" << 
	gEndl
;

112 
Log
(è<< 
	gkINFO
 << "----------------------------------------------------------------------------"

113 << 
	gEndl
;

114  
	gkFALSE
;

117 
C®cuÏ‹Pršc®CompÚ’ts
Ğ
ev’ts
 );

119 
S‘C»©ed
Ğ
kTRUE
 );

121  
	gkTRUE
;

127 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$T¿nsfÜm
ĞcÚ¡ 
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

129 ià(!
	`IsC»©ed
())  0;

140 ià(
şs
 < 0 || cl >ğ(è
fM—nV®ues
.
	`size
()) cls = fMeanValues.size()-1;

145 ià(
fT¿nsfÜmedEv’t
==0 ) {

146 
fT¿nsfÜmedEv’t
 = 
Ãw
 
	`Ev’t
();

149 
¡d
::
veùÜ
<
Flßt_t
> 
šput
;

150 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

151 
¡d
::
veùÜ
<
Flßt_t
> 
´šc®CompÚ’ts
;

153 
BoŞ_t
 
hasMaskedEÁr›s
 = 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

155 ifĞ
hasMaskedEÁr›s
 ){

156 
UIÁ_t
 
numMasked
 = 
¡d
::
	`couÁ
(
mask
.
	`begš
(), mask.
	`’d
(), (
Ch¬_t
)
kTRUE
);

157 
UIÁ_t
 
numOK
 = 
¡d
::
	`couÁ
(
mask
.
	`begš
(), mask.
	`’d
(), (
Ch¬_t
)
kFALSE
);

158 ifĞ
numMasked
>0 && 
numOK
>0 ){

159 
	`Log
(è<< 
kFATAL
 << "You mixed v¬ŸbË ªd¬g‘ šhdecÜ»ÏtiÚ¿nsfÜm©iÚ. Thi i nÙ…ossibË." << 
Endl
;

161 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
šput
, 
mask
, 
ev
 );

162  
fT¿nsfÜmedEv’t
;

165 
	`X2P
Ğ
´šc®CompÚ’ts
, 
šput
, 
şs
 );

166 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
´šc®CompÚ’ts
, 
mask
, 
ev
 );

168  
fT¿nsfÜmedEv’t
;

169 
	}
}

176 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$Inv”£T¿nsfÜm
ĞcÚ¡ 
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 
şs
 ) const

178 ià(!
	`IsC»©ed
())  0;

180 cÚ¡ 
UIÁ_t
 
nCls
 = 
	`G‘NCÏs£s
();

186 ià(
şs
 < 0 || 
	`UIÁ_t
(şsè> 
nCls
èş ğ(
fM—nV®ues
.
	`size
()==1?0:2);

189 ià(
fBackT¿nsfÜmedEv’t
==0 ) fBackT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
();

191 
¡d
::
veùÜ
<
Flßt_t
> 
´šc®CompÚ’ts
;

192 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

193 
¡d
::
veùÜ
<
Flßt_t
> 
ouut
;

195 
	`G‘IÅut
Ğ
ev
, 
´šc®CompÚ’ts
, 
mask
, 
kTRUE
 );

196 
	`P2X
Ğ
ouut
, 
´šc®CompÚ’ts
, 
şs
 );

197 
	`S‘Ouut
Ğ
fBackT¿nsfÜmedEv’t
, 
ouut
, 
mask
, 
ev
, 
kTRUE
 );

199  
fBackT¿nsfÜmedEv’t
;

200 
	}
}

206 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
C®cuÏ‹Pršc®CompÚ’ts
ĞcÚ¡ 
¡d
::
veùÜ
< 
Ev’t
*>& 
ev’ts
 )

208 
UIÁ_t
 
nv¬s
 = 0, 
	gÁgts
 = 0, 
	gn¥ùs
 = 0;

209 
CouÁV¬ŸbËTy³s
Ğ
nv¬s
, 
Ágts
, 
n¥ùs
 );

210 ifĞ
	gnv¬s
>0 && 
	gÁgts
>0 )

211 
Log
(è<< 
	gkFATAL
 << "V¬ŸbË ªd¬g‘ ÿÂÙ bmixed iÀPCA¿nsfÜm©iÚ." << 
	gEndl
;

213 cÚ¡ 
IÁ_t
 
	gšputSize
 = 
fG‘
.
size
();

216 cÚ¡ 
UIÁ_t
 
	gnCls
 = 
G‘NCÏs£s
();

217 cÚ¡ 
UIÁ_t
 
	gmaxPCA
 = (
nCls
<=1) ?‚Cls :‚Cls+1;

220 
	g¡d
::
veùÜ
<
TPršc®
*> 
pÿ
(
maxPCA
);

221 
UIÁ_t
 
	gi
=0; i<
	gmaxPCA
; i++è
	gpÿ
[
i
] = 
Ãw
 
TPršc®
(
nv¬s
,"");

226 
LÚg64_t
 
	g›vt
, 
	g’Œ›s
 = 
ev’ts
.
size
();

227 
DoubË_t
 *
	gdvec
 = 
Ãw
 DoubË_t[
šputSize
];

229 
	g¡d
::
veùÜ
<
Flßt_t
> 
šput
;

230 
	g¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

231 
	g›vt
=0; ievt<
	g’Œ›s
; ievt++) {

232 cÚ¡ 
Ev’t
* 
	gev
 = 
ev’ts
[
›vt
];

233 
UIÁ_t
 
	gşs
 = 
ev
->
G‘CÏss
();

235 
BoŞ_t
 
	ghasMaskedEÁr›s
 = 
G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

236 ià(
	ghasMaskedEÁr›s
){

237 
Log
(è<< 
	gkWARNING
 << "Pršˆev’ˆwhichrigg” ªƒ¼Ü" << 
	gEndl
;

238 
	g¡d
::
o¡ršg¡»am
 
oss
;

239 
	gev
->
Pršt
(
oss
);

240 
Log
(è<< 
	goss
.
¡r
();

241 
Log
(è<< 
	gkFATAL
 << "MaskedƒÁr› found iÀev’ˆ»ad iÀwh’ c®cuÏtšgh´šc® compÚ’t fÜhPCA¿nsfÜm©iÚ." << 
	gEndl
;

244 
UIÁ_t
 
	gišp
 = 0;

245  
	g¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™IÅ
 = 
šput
.
begš
(), 
	g™IÅEnd
 = iÅut.
’d
(); 
	g™IÅ
 !ğ
™IÅEnd
; ++itInp )

247 
Flßt_t
 
	gv®ue
 = (*
™IÅ
);

248 
	gdvec
[
išp
] = (
DoubË_t
)
v®ue
;

249 ++
	gišp
;

252 
	gpÿ
.
©
(
şs
)->
AddRow
Ğ
dvec
 );

253 ià(
	gnCls
 > 1è
	gpÿ
.
©
(
maxPCA
-1)->
AddRow
Ğ
dvec
 );

257 
UIÁ_t
 
	gi
=0; i<
	gfM—nV®ues
.
size
(); i++èià(fM—nV®ues[
i
] !ğ0è
d–‘e
 
fM—nV®ues
[i];

258 
UIÁ_t
 
	gi
=0; i<
	gfEig’VeùÜs
.
size
(); i++èià(fEig’VeùÜs[
i
] !ğ0è
d–‘e
 
fEig’VeùÜs
[i];

259 
	gfM—nV®ues
.
»size
(
maxPCA
,0);

260 
	gfEig’VeùÜs
.
»size
(
maxPCA
,0);

262 
UIÁ_t
 
	gi
=0; i<
	gmaxPCA
; i++ ) {

263 
	gpÿ
.
©
(
i
)->
MakePršc®s
();

266 
	gfM—nV®ues
[
i
] = 
Ãw
 
TVeùÜD
Ğ*(
pÿ
.
©
(i)->
G‘M—nV®ues
()) );

267 
	gfEig’VeùÜs
[
i
] = 
Ãw
 
TM©rixD
Ğ*(
pÿ
.
©
(i)->
G‘Eig’VeùÜs
()) );

270 
UIÁ_t
 
	gi
=0; i<
	gmaxPCA
; i++è
d–‘e
 
	gpÿ
.
©
(
i
);

271 
	gd–‘e
 [] 
	gdvec
;

280 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
X2P
Ğ
¡d
::
veùÜ
<
Flßt_t
>& 
pc
, cÚ¡ std::veùÜ<Flßt_t>& 
x
, 
IÁ_t
 
şs
 ) const

282 cÚ¡ 
IÁ_t
 
	gnIÅut
 = 
x
.
size
();

283 
	gpc
.
assign
(
nIÅut
,0);

285 
IÁ_t
 
	gi
 = 0; i < 
	gnIÅut
; i++) {

286 
DoubË_t
 
	gpv
 = 0;

287 
IÁ_t
 
	gj
 = 0; j < 
	gnIÅut
; j++)

288 
	gpv
 +ğ(((
DoubË_t
)
x
.
©
(
j
)è- (*
fM—nV®ues
.©(
şs
))(j)è* (*
fEig’VeùÜs
.©(şs))(j,
	gi
);

289 
	gpc
[
i
] = 
pv
;

299 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
P2X
Ğ
¡d
::
veùÜ
<
Flßt_t
>& 
x
, cÚ¡ std::veùÜ<Flßt_t>& 
pc
, 
IÁ_t
 
şs
 ) const

301 cÚ¡ 
IÁ_t
 
	gnIÅut
 = 
pc
.
size
();

302 
	gx
.
assign
(
nIÅut
,0);

304 
IÁ_t
 
	gi
 = 0; i < 
	gnIÅut
; i++) {

305 
DoubË_t
 
	gxv
 = 0;

306 
IÁ_t
 
	gj
 = 0; j < 
	gnIÅut
; j++)

307 
	gxv
 +ğ(((
DoubË_t
)
pc
.
©
(
j
)è* (*
fEig’VeùÜs
.©(
şs
))(
i
,
	gj
èè+ (*
	gfM—nV®ues
.at(cls))(j);

308 
	gx
[
i
] = 
xv
;

315 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$Wr™eT¿nsfÜm©iÚToSŒ—m
Ğ
¡d
::
o¡»am
& 
o
 ) const

317 
IÁ_t
 
sbTy³
=0; sbType<2; sbType++) {

318 
o
 << "# PCA m—Àv®ue " << 
¡d
::
’dl
;

319 cÚ¡ 
TVeùÜD
* 
m—ns
 = 
fM—nV®ues
[
sbTy³
];

320 
o
 << (
sbTy³
==0 ? "SigÇl" : "Background"è<< " " << 
m—ns
->
	`G‘Nrows
(è<< 
¡d
::
’dl
;

321 
IÁ_t
 
row
 = 0;„ow<
m—ns
->
	`G‘Nrows
();„ow++) {

322 
o
 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< (*
m—ns
)[
row
];

324 
o
 << 
¡d
::
’dl
;

326 
o
 << "##" << 
¡d
::
’dl
;

329 
IÁ_t
 
sbTy³
=0; sbType<2; sbType++) {

330 
o
 << "# PCAƒig’veùÜ " << 
¡d
::
’dl
;

331 cÚ¡ 
TM©rixD
* 
m©
 = 
fEig’VeùÜs
[
sbTy³
];

332 
o
 << (
sbTy³
==0 ? "SigÇl" : "Background"è<< " " << 
m©
->
	`G‘Nrows
(è<< " x " << m©->
	`G‘NcŞs
(è<< 
¡d
::
’dl
;

333 
IÁ_t
 
row
 = 0;„ow<
m©
->
	`G‘Nrows
();„ow++) {

334 
IÁ_t
 
cŞ
 = 0; cŞ<
m©
->
	`G‘NcŞs
(); col++) {

335 
o
 << 
¡d
::
	`£»cisiÚ
(12è<< std::
	`£tw
(20è<< (*
m©
)[
row
][
cŞ
] << " ";

337 
o
 << 
¡d
::
’dl
;

340 
o
 << "##" << 
¡d
::
’dl
;

341 
	}
}

346 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$A‰achXMLTo
(* 
·»Á
) {

347 * 
Œfxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transform");

348 
	`gToŞs
().
	`AddA‰r
(
Œfxml
, "Name", "PCA");

350 
V¬ŸbËT¿nsfÜmBa£
::
	`A‰achXMLTo
Ğ
Œfxml
 );

353 
UIÁ_t
 
sbTy³
=0; sbTy³<
fM—nV®ues
.
	`size
(); sbType++) {

354 * 
m—nxml
 = 
	`gToŞs
().
	`AddChd
Ğ
Œfxml
, "Statistics");

355 cÚ¡ 
TVeùÜD
* 
m—ns
 = 
fM—nV®ues
[
sbTy³
];

356 
	`gToŞs
().
	`AddA‰r
Ğ
m—nxml
, "CÏss", (
sbTy³
==0 ? "Signal" :(sbType==1 ? "Background":"Combined")) );

357 
	`gToŞs
().
	`AddA‰r
Ğ
m—nxml
, "CÏssIndex", 
sbTy³
 );

358 
	`gToŞs
().
	`AddA‰r
Ğ
m—nxml
, "NRows", 
m—ns
->
	`G‘Nrows
() );

359 
TSŒšg
 
m—nsdef
 = "";

360 
IÁ_t
 
row
 = 0;„ow<
m—ns
->
	`G‘Nrows
();„ow++)

361 
m—nsdef
 +ğ
	`gToŞs
().
	`SŒšgFromDoubË
((*
m—ns
)[
row
]) + " ";

362 
	`gToŞs
().
	`AddRawLše
Ğ
m—nxml
, 
m—nsdef
 );

366 
UIÁ_t
 
sbTy³
=0; sbTy³<
fEig’VeùÜs
.
	`size
(); sbType++) {

367 * 
evxml
 = 
	`gToŞs
().
	`AddChd
Ğ
Œfxml
, "Eigenvectors");

368 cÚ¡ 
TM©rixD
* 
m©
 = 
fEig’VeùÜs
[
sbTy³
];

369 
	`gToŞs
().
	`AddA‰r
Ğ
evxml
, "CÏss", (
sbTy³
==0 ? "Signal" :(sbType==1 ? "Background":"Combined") ) );

370 
	`gToŞs
().
	`AddA‰r
Ğ
evxml
, "CÏssIndex", 
sbTy³
 );

371 
	`gToŞs
().
	`AddA‰r
Ğ
evxml
, "NRows", 
m©
->
	`G‘Nrows
() );

372 
	`gToŞs
().
	`AddA‰r
Ğ
evxml
, "NCŞs", 
m©
->
	`G‘NcŞs
() );

373 
TSŒšg
 
evdef
 = "";

374 
IÁ_t
 
row
 = 0;„ow<
m©
->
	`G‘Nrows
();„ow++)

375 
IÁ_t
 
cŞ
 = 0; cŞ<
m©
->
	`G‘NcŞs
(); col++)

376 
evdef
 +ğ
	`gToŞs
().
	`SŒšgFromDoubË
((*
m©
)[
row
][
cŞ
]) + " ";

377 
	`gToŞs
().
	`AddRawLše
Ğ
evxml
, 
evdef
 );

379 
	}
}

384 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$R—dFromXML
Ğ* 
Œâode
 )

386 
IÁ_t
 
Äows
, 
ncŞs
;

387 
UIÁ_t
 
şsIdx
;

388 
TSŒšg
 
şas¡y³
;

389 
TSŒšg
 
nodeName
;

391 
BoŞ_t
 
ÃwFÜm©
 = 
kFALSE
;

393 * 
š²ode
 = 
NULL
;

395 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
, "Selection");

396 ifĞ
š²ode
!=
NULL
 )

397 
ÃwFÜm©
 = 
kTRUE
;

399 ifĞ
ÃwFÜm©
 ){

402 
V¬ŸbËT¿nsfÜmBa£
::
	`R—dFromXML
Ğ
š²ode
 );

406 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
);

407 
ch
) {

408 
nodeName
 = 
	`gToŞs
().
	`G‘Name
(
ch
);

409 ià(
nodeName
 == "Statistics") {

411 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏss", 
şas¡y³
);

412 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏssIndex", 
şsIdx
);

413 
	`gToŞs
().
	`R—dA‰r
(
ch
, "NRows", 
Äows
);

416 ià(
fM—nV®ues
.
	`size
()<=
şsIdx
èfM—nV®ues.
	`»size
(clsIdx+1,0);

417 ià(
fM—nV®ues
[
şsIdx
]==0èfM—nV®ues[şsIdx] = 
Ãw
 
	`TVeùÜD
Ğ
Äows
 );

418 
fM—nV®ues
[
şsIdx
]->
	`ResizeTo
Ğ
Äows
 );

421 
¡d
::
¡ršg¡»am
 
	`s
(
	`gToŞs
().
	`G‘CÚ‹Á
(
ch
));

422 
IÁ_t
 
row
 = 0;„ow<
Äows
;„ow++è
s
 >> (*
fM—nV®ues
[
şsIdx
])(row);

424 iàĞ
nodeName
 == "Eigenvectors" ) {

426 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏss", 
şas¡y³
);

427 
	`gToŞs
().
	`R—dA‰r
(
ch
, "CÏssIndex", 
şsIdx
);

428 
	`gToŞs
().
	`R—dA‰r
(
ch
, "NRows", 
Äows
);

429 
	`gToŞs
().
	`R—dA‰r
(
ch
, "NCŞs", 
ncŞs
);

431 ià(
fEig’VeùÜs
.
	`size
()<=
şsIdx
èfEig’VeùÜs.
	`»size
(clsIdx+1,0);

432 ià(
fEig’VeùÜs
[
şsIdx
]==0èfEig’VeùÜs[şsIdx] = 
Ãw
 
	`TM©rixD
Ğ
Äows
, 
ncŞs
 );

433 
fEig’VeùÜs
[
şsIdx
]->
	`ResizeTo
Ğ
Äows
, 
ncŞs
 );

436 
¡d
::
¡ršg¡»am
 
	`s
(
	`gToŞs
().
	`G‘CÚ‹Á
(
ch
));

437 
IÁ_t
 
row
 = 0;„ow<
Äows
;„ow++)

438 
IÁ_t
 
cŞ
 = 0; cŞ<
ncŞs
; col++)

439 
s
 >> (*
fEig’VeùÜs
[
şsIdx
])[
row
][
cŞ
];

441 
ch
 = 
	`gToŞs
().
	`G‘NextChd
(ch);

444 
	`S‘C»©ed
();

445 
	}
}

450 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$R—dT¿nsfÜm©iÚFromSŒ—m
Ğ
¡d
::
i¡»am
& 
i¡r
, cÚ¡ 
TSŒšg
& 
şas¢ame
 )

452 
buf
[512];

453 
i¡r
.
	`g‘lše
(
buf
,512);

454 
TSŒšg
 
¡rv¬
, 
dummy
;

455 
IÁ_t
 
	`Äows
(0), 
	`ncŞs
(0);

456 
UIÁ_t
 
şassIdx
=(
şas¢ame
=="signal"?0:1);

458 
UIÁ_t
 
i
=0; i<
fM—nV®ues
.
	`size
(); i++) {

459 ià(
fM—nV®ues
.
	`©
(
i
è!ğ0è
d–‘e
 fMeanValues.at(i);

460 ià(
fEig’VeùÜs
.
	`©
(
i
è!ğ0è
d–‘e
 fEigenVectors.at(i);

462 
fM—nV®ues
.
	`»size
(3);

463 
fEig’VeùÜs
.
	`»size
(3);

465 
	`Log
(è<< 
kINFO
 << "V¬ŸbËPCAT¿nsfÜm::R—dT¿nsfÜm©iÚFromSŒ—m(): " << 
Endl
;

467 !(
buf
[0]=='#'&& buf[1]=='#')) {

468 * 
p
 = 
buf
;

469 *
p
==' ' || *p=='\t')…++;

470 ià(*
p
=='#' || *p=='\0') {

471 
i¡r
.
	`g‘lše
(
buf
,512);

474 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

475 
s¡r
 >> 
¡rv¬
;

476 ià(
¡rv¬
=="signal" || strvar=="background") {

478 
s¡r
 >> 
Äows
;

479 
IÁ_t
 
sbTy³
 = (
¡rv¬
=="signal" ? 0 : 1);

481 ià(
fM—nV®ues
[
sbTy³
] =ğ0èfM—nV®ues[sbTy³] = 
Ãw
 
	`TVeùÜD
Ğ
Äows
 );

482 
fM—nV®ues
[
sbTy³
]->
	`ResizeTo
Ğ
Äows
 );

485 
IÁ_t
 
row
 = 0;„ow<
Äows
;„ow++è
i¡r
 >> (*
fM—nV®ues
[
sbTy³
])(row);

489 
i¡r
.
	`g‘lše
(
buf
,512);

493 
i¡r
.
	`g‘lše
(
buf
,512);

494 !(
buf
[0]=='#'&& buf[1]=='#')) {

495 * 
p
 = 
buf
;

496 *
p
==' ' || *p=='\t')…++;

497 ià(*
p
=='#' || *p=='\0') {

498 
i¡r
.
	`g‘lše
(
buf
,512);

501 
¡d
::
¡ršg¡»am
 
	`s¡r
(
buf
);

502 
s¡r
 >> 
¡rv¬
;

503 ià(
¡rv¬
=="signal" || strvar=="background") {

506 
s¡r
 >> 
Äows
 >> 
dummy
 >> 
ncŞs
;

507 
IÁ_t
 
sbTy³
 = (
¡rv¬
=="signal" ? 0 : 1);

509 ià(
fEig’VeùÜs
[
sbTy³
] =ğ0èfEig’VeùÜs[sbTy³] = 
Ãw
 
	`TM©rixD
Ğ
Äows
, 
ncŞs
 );

510 
fEig’VeùÜs
[
sbTy³
]->
	`ResizeTo
Ğ
Äows
, 
ncŞs
 );

513 
IÁ_t
 
row
 = 0;„ow<
fEig’VeùÜs
[
sbTy³
]->
	`G‘Nrows
();„ow++) {

514 
IÁ_t
 
cŞ
 = 0; cŞ<
fEig’VeùÜs
[
sbTy³
]->
	`G‘NcŞs
(); col++) {

515 
i¡r
 >> (*
fEig’VeùÜs
[
sbTy³
])[
row
][
cŞ
];

520 
i¡r
.
	`g‘lše
(
buf
,512);

522 
fM—nV®ues
[2] = 
Ãw
 
	`TVeùÜD
Ğ*fM—nV®ues[
şassIdx
] );

523 
fEig’VeùÜs
[2] = 
Ãw
 
	`TM©rixD
Ğ*fEig’VeùÜs[
şassIdx
] );

525 
	`S‘C»©ed
();

526 
	}
}

531 
	gTMVA
::
V¬ŸbËPCAT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& 
fúcName
,

532 
IÁ_t
 
·¹
, 
UIÁ_t
 
ŒCouÁ”
, Int_t )

534 
UIÁ_t
 
nv¬
 = 
fEig’VeùÜs
[0]->
	`G‘Nrows
();

537 
UIÁ_t
 
numC
 = 
fM—nV®ues
.
	`size
();

538 ià(
·¹
==1) {

539 
fout
 << 
¡d
::
’dl
;

540 
fout
 << " void X2P_"<<
ŒCouÁ”
<<"ĞcÚ¡ doubË*, doubË*, iÁ ) cÚ¡;" << 
¡d
::
’dl
;

541 
fout
 << " doubË fM—nV®ues_"<<
ŒCouÁ”
<<"["<<
numC
<<"]["

542 << 
fM—nV®ues
[0]->
	`G‘Nrows
(è<< "];" << 
¡d
::
’dl
;

543 
fout
 << " doubË fEig’VeùÜs_"<<
ŒCouÁ”
<<"["<<
numC
<<"]["

544 << 
fEig’VeùÜs
[0]->
	`G‘Nrows
() << "]["

545 << 
fEig’VeùÜs
[0]->
	`G‘NcŞs
(è<<"];" << 
¡d
::
’dl
;

546 
fout
 << 
¡d
::
’dl
;

550 ià(
numC
>1){

551 ià(
fM—nV®ues
[0]->
	`G‘Nrows
() != fMeanValues[1]->GetNrows() ||

552 
fEig’VeùÜs
[0]->
	`G‘Nrows
() != fEigenVectors[1]->GetNrows() ||

553 
fEig’VeùÜs
[0]->
	`G‘NcŞs
() != fEigenVectors[1]->GetNcols()) {

554 
	`Log
(è<< 
kFATAL
 << "<MakeFunùiÚ> Mism©ch iÀveùÜ/m©rix dim’siÚs" << 
Endl
;

558 ià(
·¹
==2) {

560 
fout
 << 
¡d
::
’dl
;

561 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

562 
fout
 << "šlšvoid " << 
fúcName
 << "::X2P_"<<
ŒCouÁ”
<<"ĞcÚ¡ doubË* x, doubË*…, iÁ index ) cÚ¡" << 
¡d
::
’dl
;

563 
fout
 << "{" << 
¡d
::
’dl
;

564 
fout
 << " // C®cuÏ‹h´šc® compÚ’t äomhÜigš® d©¨veùÜ" << 
¡d
::
’dl
;

565 
fout
 << " // x,‡nd„‘uº iˆš… (funùiÚƒxŒaùed from TPršc®::X2P)" << 
¡d
::
’dl
;

566 
fout
 << " // It' thu£r »¥Úsib™yØmaksu»h© bÙh x‡nd…‡»" << 
¡d
::
’dl
;

567 
fout
 << " // oàthrighˆsiz(i.e., memÜy mu¡ b®loÿ‹d fÜ…)." << 
¡d
::
’dl
;

568 
fout
 << " cÚ¡ iÁ‚V¬ = " << 
nv¬
 << ";" << 
¡d
::
’dl
;

569 
fout
 << 
¡d
::
’dl
;

570 
fout
 << " fÜ (šˆ˜ğ0; i <‚V¬; i++è{" << 
¡d
::
’dl
;

571 
fout
 << "…[i] = 0;" << 
¡d
::
’dl
;

572 
fout
 << " fÜ (šˆj = 0; j <‚V¬; j++èp[i] +ğ(x[j] - fM—nV®ues_"<<
ŒCouÁ”
<<"[šdex][j]è* fEig’VeùÜs_"<<ŒCouÁ”<<"[šdex][j][i];" << 
¡d
::
’dl
;

573 
fout
 << " }" << 
¡d
::
’dl
;

574 
fout
 << "}" << 
¡d
::
’dl
;

575 
fout
 << 
¡d
::
’dl
;

576 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

577 
fout
 << "šlšvoid " << 
fúcName
 << "::In™T¿nsfÜm_"<<
ŒCouÁ”
<<"()" << 
¡d
::
’dl
;

578 
fout
 << "{" << 
¡d
::
’dl
;

579 
fout
 << " // PCA¿nsfÜm©iÚ, in™Ÿli§tiÚ" << 
¡d
::
’dl
;

582 
fout
 << " // in™Ÿli£ veùÜ oàm—Àv®ues" << 
¡d
::
’dl
;

583 
¡d
::
¡»amsize
 
dp
 = 
fout
.
	`´ecisiÚ
();

584 
UIÁ_t
 
šdex
=0; index<
numC
; index++) {

585 
i
=0; i<
fM—nV®ues
[
šdex
]->
	`G‘Nrows
(); i++) {

586 
fout
 << " fM—nV®ues_"<<
ŒCouÁ”
<<"["<<
šdex
<<"]["<<
i
<<"] = " << 
¡d
::
	`£»cisiÚ
(12)

587 << (*
fM—nV®ues
[
šdex
])(
i
è<< ";" << 
¡d
::
’dl
;

592 
fout
 << 
¡d
::
’dl
;

593 
fout
 << " // in™Ÿli£ m©rix oàeig’veùÜs" << 
¡d
::
’dl
;

594 
UIÁ_t
 
šdex
=0; index<
numC
; index++) {

595 
i
=0; i<
fEig’VeùÜs
[
šdex
]->
	`G‘Nrows
(); i++) {

596 
j
=0; j<
fEig’VeùÜs
[
šdex
]->
	`G‘NcŞs
(); j++) {

597 
fout
 << " fEig’VeùÜs_"<<
ŒCouÁ”
<<"["<<
šdex
<<"]["<<
i
<<"]["<<
j
<<"] = " << 
¡d
::
	`£»cisiÚ
(12)

598 << (*
fEig’VeùÜs
[
šdex
])(
i
,
j
è<< ";" << 
¡d
::
’dl
;

602 
fout
 << 
¡d
::
	`£»cisiÚ
(
dp
);

603 
fout
 << "}" << 
¡d
::
’dl
;

604 
fout
 << 
¡d
::
’dl
;

605 
fout
 << "//_______________________________________________________________________" << 
¡d
::
’dl
;

606 
fout
 << "šlšvoid " << 
fúcName
 << "::T¿nsfÜm_"<<
ŒCouÁ”
<<"Ğ¡d::veùÜ<doubË>& iv, iÁ cl ècÚ¡" << 
¡d
::
’dl
;

607 
fout
 << "{" << 
¡d
::
’dl
;

608 
fout
 << " // PCA¿nsfÜm©iÚ" << 
¡d
::
’dl
;

609 
fout
 << " cÚ¡ iÁ‚V¬ = " << 
nv¬
 << ";" << 
¡d
::
’dl
;

610 
fout
 << " doubË *dv =‚ew doubË[nV¬];" << 
¡d
::
’dl
;

611 
fout
 << " doubË *rv =‚ew doubË[nV¬];" << 
¡d
::
’dl
;

612 
fout
 << " ià(ş < 0 || cl > "<<
	`G‘NCÏs£s
()<<"è{"<< 
¡d
::
’dl
;

613 
fout
 << " ià("<<
	`G‘NCÏs£s
()<<" > 1 ) cl ğ"<<G‘NCÏs£s()<<";"<< 
¡d
::
’dl
;

614 
fout
 << "ƒl£ cl ğ"<<(
numC
==1?0:2)<<";"<< 
¡d
::
’dl
;

615 
fout
 << " }"<< 
¡d
::
’dl
;

617 
V¬ŸbËT¿nsfÜmBa£
::
	`MakeFunùiÚ
(
fout
, 
fúcName
, 0, 
ŒCouÁ”
, 0 );

619 
fout
 << " fÜ (šˆiv¬=0; iv¬<nV¬; iv¬++èdv[iv¬] = iv[šdiûsG‘.©(iv¬)];" << 
¡d
::
’dl
;

621 
fout
 << 
¡d
::
’dl
;

622 
fout
 << " // P”fÜm PCA‡nd…uˆ™ iÁØPCAedƒv’t Œ“" << 
¡d
::
’dl
;

623 
fout
 << "his->X2P_"<<
ŒCouÁ”
<<"Ğdv,„v, cl );" << 
¡d
::
’dl
;

624 
fout
 << " fÜ (šˆiv¬=0; iv¬<nV¬; iv¬++èiv[šdiûsPut.©(iv¬)] =„v[iv¬];" << 
¡d
::
’dl
;

626 
fout
 << 
¡d
::
’dl
;

627 
fout
 << " d–‘[] dv;" << 
¡d
::
’dl
;

628 
fout
 << " d–‘[]„v;" << 
¡d
::
’dl
;

629 
fout
 << "}" << 
¡d
::
’dl
;

631 
	}
}

	@src/VariableRearrangeTransform.cxx

30 
	~"TMVA/V¬ŸbËR—¼ªgeT¿nsfÜm.h
"

32 
	~"TMVA/D©aS‘.h
"

33 
	~"TMVA/Ev’t.h
"

34 
	~"TMVA/MsgLogg”.h
"

35 
	~"TMVA/ToŞs.h
"

36 
	~"TMVA/Ty³s.h
"

38 
	~<io¡»am
>

39 
	~<iomª
>

40 
	~<¡dexû±
>

42 
CÏssImp
(
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
);

47 
	gTMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$V¬ŸbËR—¼ªgeT¿nsfÜm
Ğ
D©aS‘Info
& 
dsi
 )

48 : 
	`V¬ŸbËT¿nsfÜmBa£
Ğ
dsi
, 
Ty³s
::
kR—¼ªged
, "Rearrange" )

50 
	}
}

54 
	gTMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::~
	$V¬ŸbËR—¼ªgeT¿nsfÜm
() {

55 
	}
}

61 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$In™Ÿlize
()

63 
	}
}

68 
BoŞ_t
 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
P»·»T¿nsfÜm©iÚ
 (cÚ¡ 
¡d
::
veùÜ
<
Ev’t
*>& )

70 ià(!
IsEÇbËd
(è|| 
IsC»©ed
()è 
kTRUE
;

72 
UIÁ_t
 
	gnv¬s
 = 0, 
	gÁgts
 = 0, 
	gn¥ùs
 = 0;

73 
CouÁV¬ŸbËTy³s
Ğ
nv¬s
, 
Ágts
, 
n¥ùs
 );

74 ià(
	gÁgts
>0è
Log
(è<< 
	gkFATAL
 << "T¬g‘ u£d iÀR—¼ªge-ŒªsfÜm©iÚ." << 
	gEndl
;

76 
S‘C»©ed
Ğ
kTRUE
 );

77  
	gkTRUE
;

82 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$T¿nsfÜm
ĞcÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 ) const

84 ià(!
	`IsEÇbËd
()è 
ev
;

87 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

89 ià(
fT¿nsfÜmedEv’t
==0èfT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
();

91 
FlßtVeùÜ
 
šput
;

92 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

93 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
 );

94 
	`S‘Ouut
Ğ
fT¿nsfÜmedEv’t
, 
šput
, 
mask
, 
ev
 );

96  
fT¿nsfÜmedEv’t
;

97 
	}
}

101 cÚ¡ 
	gTMVA
::
Ev’t
* 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$Inv”£T¿nsfÜm
ĞcÚ¡ 
TMVA
::
Ev’t
* cÚ¡ 
ev
, 
IÁ_t
 ) const

103 ià(!
	`IsEÇbËd
()è 
ev
;

106 ià(!
	`IsC»©ed
()è
	`Log
(è<< 
kFATAL
 << "T¿nsfÜm©iÚ‚Ù y‘ c»©ed" << 
Endl
;

108 ià(
fBackT¿nsfÜmedEv’t
==0èfBackT¿nsfÜmedEv’ˆğ
Ãw
 
	`Ev’t
Ğ*
ev
 );

110 
FlßtVeùÜ
 
šput
;

111 
¡d
::
veùÜ
<
Ch¬_t
> 
mask
;

112 
	`G‘IÅut
Ğ
ev
, 
šput
, 
mask
, 
kTRUE
 );

113 
	`S‘Ouut
Ğ
fBackT¿nsfÜmedEv’t
, 
šput
, 
mask
, 
ev
, 
kTRUE
 );

115  
fBackT¿nsfÜmedEv’t
;

116 
	}
}

122 
	g¡d
::
veùÜ
<
TSŒšg
>* 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$G‘T¿nsfÜm©iÚSŒšgs
Ğ
IÁ_t
 ) const

124 cÚ¡ 
UIÁ_t
 
size
 = 
fG‘
.
	`size
();

125 
¡d
::
veùÜ
<
TSŒšg
>* 
¡rVec
 = 
Ãw
 std::veùÜ<TSŒšg>(
size
);

127  
¡rVec
;

128 
	}
}

133 
	gTMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$A‰achXMLTo
(* 
·»Á
)

135 * 
Œfxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Transform");

136 
	`gToŞs
().
	`AddA‰r
(
Œfxml
, "Name", "Rearrange");

138 
V¬ŸbËT¿nsfÜmBa£
::
	`A‰achXMLTo
Ğ
Œfxml
 );

139 
	}
}

144 
	gTMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$R—dFromXML
Ğ* 
Œâode
 )

147 * 
š²ode
 = 
NULL
;

149 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
(
Œâode
, "Selection");

150 if(
š²ode
 =ğ
NULL
)

151 
	`Log
(è<< 
kFATAL
 << "UnknowÀweighˆffÜm© fÜ¿nsfÜm©iÚs. (Œ›dØ»ad iÀ'»¬¿nge'¿nsfÜm)" << 
Endl
;

153 
V¬ŸbËT¿nsfÜmBa£
::
	`R—dFromXML
Ğ
š²ode
 );

155 
	`S‘C»©ed
();

156 
	}
}

161 
	gTMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$PrštT¿nsfÜm©iÚ
Ğ
¡d
::
o¡»am
& )

163 
	}
}

168 
TMVA
::
V¬ŸbËR—¼ªgeT¿nsfÜm
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& , cÚ¡ 
TSŒšg
& ,

169 
IÁ_t
 , 
UIÁ_t
 , Int_t )

171 
	}
}

	@src/VariableTransform.cxx

28 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

29 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

30 
	~"TMVA/V¬ŸbËId’t™yT¿nsfÜm.h
"

31 
	~"TMVA/V¬ŸbËDecÜrT¿nsfÜm.h
"

32 
	~"TMVA/V¬ŸbËInfo.h
"

33 
	~"TMVA/V¬ŸbËPCAT¿nsfÜm.h
"

34 
	~"TMVA/V¬ŸbËGaussT¿nsfÜm.h
"

35 
	~"TMVA/V¬ŸbËNÜm®izeT¿nsfÜm.h
"

37 
	~"TMVA/CÚfig.h
"

38 
	~"TMVA/D©aS‘Info.h
"

39 
	~"TMVA/MsgLogg”.h
"

40 
	~"TMVA/Rªkšg.h
"

41 
	~"TMVA/ToŞs.h
"

42 
	~"TMVA/Ty³s.h
"

43 
	~"TMVA/V¬ŸbËInfo.h
"

44 
	~"TMVA/V”siÚ.h
"

45 
	~"TMVA/T¿nsfÜm©iÚHªdËr.h
"

46 
	~"TMVA/MsgLogg”.h
"

48 
	~"TH1.h
"

49 
	~"TH2.h
"

50 
	~"THashTabË.h
"

51 
	~"TLi¡.h
"

52 
	~"TM©h.h
"

53 
	~"TProfe.h
"

54 
	~"TVeùÜD.h
"

56 
	~<®gÜ™hm
>

57 
	~<ÿs£¹
>

58 
	~<exû±iÚ
>

59 
	~<iomª
>

60 
	~<¡dexû±
>

61 
	~<£t
>

66 
Çme¥aû
 
	gTMVA
 {

67 
C»©eV¬ŸbËT¿nsfÜms
ĞcÚ¡ 
TSŒšg
& 
ŒafoDefš™iÚIn
,

68 
TMVA
::
D©aS‘Info
& 
d©aInfo
,

69 
TMVA
::
T¿nsfÜm©iÚHªdËr
& 
ŒªsfÜm©iÚHªdËr
,

70 
TMVA
::
MsgLogg”
& 
log
 )

72 
TSŒšg
 
ŒafoDefš™iÚ
(
ŒafoDefš™iÚIn
);

73 ià(
	gŒafoDefš™iÚ
 == "None") ;

77 
TSŒšg
 
ŒafoDefš™iÚCheck
(
ŒafoDefš™iÚIn
);

78 
	gÅ¬tŸl
 = 0, 
	gÁ¿fo
=0;

79 
IÁ_t
 
	gpos
 = 0, 
	gsiz
 = 
ŒafoDefš™iÚ
.
Sizeof
();…os < siz; ++pos) {

80 
TSŒšg
 
	gch
 = 
ŒafoDefš™iÚ
(
pos
,1);

81 iàĞ
	gch
 =ğ"(" ) 
Å¬tŸl
++;

82 iàĞ
	gch
 =ğ"+" || 
ch
 =ğ","è
Á¿fo
++;

84 ià(
	gÅ¬tŸl
>1) {

85 
	glog
 << 
	gkWARNING
 << "Thu£ oàmuÉË…¬tŸÈv¬ŸbË¿nsfÜm©iÚ duršgh­¶iÿtiÚ…ha£ cª b´İ”ly invoked vŸh\"R—d”\", buˆ™ i nÙ y‘ im¶em’‹d iÀ\"MakeCÏss\",hü—tiÚ mechªism fÜ snd®ÚC++‡µliÿtiÚ cÏs£s. Th¡ªd®ÚC++ cÏs ´oduûd byhi Œaššg job i thu INCOMPLETE AND MUST NOT BE USED! ThŒªsfÜm©iÚ iÀque¡iÚ is: " << 
	gŒafoDefš™iÚIn
 << 
	gEndl
;

93 
IÁ_t
 
	g·»ÁhesisCouÁ
 = 0;

94 
IÁ_t
 
	gpos™iÚ
 = 0, 
	gsize
 = 
ŒafoDefš™iÚ
.
Sizeof
();…osition < size; ++position) {

95 
TSŒšg
 
	gch
 = 
ŒafoDefš™iÚ
(
pos™iÚ
,1);

96 ià(
	gch
 =ğ"("è++
·»ÁhesisCouÁ
;

97 ià(
	gch
 =ğ")"è--
·»ÁhesisCouÁ
;

98 ià(
	gch
 =ğ"," && 
·»ÁhesisCouÁ
 =ğ0è
ŒafoDefš™iÚ
.
R•Ïû
(
pos™iÚ
,1,'+');

101 
TLi¡
* 
	gŒLi¡
 = 
gToŞs
().
P¬£FÜm©Lše
Ğ
ŒafoDefš™iÚ
, "+" );

102 
TLi¡I‹r
 
ŒIt
(
ŒLi¡
);

103 
TObjSŒšg
* 
	gos
 = (TObjSŒšg*)
ŒIt
()) {

104 
TSŒšg
 
tdef
 = 
os
->
G‘SŒšg
();

105 
IÁ_t
 
	gidxCls
 = -1;

107 
TSŒšg
 
	gv¬ŸbËs
 = "";

108 ià(
	gtdef
.
CÚšs
("(")) {

109 
Ssiz_t
 
	g·rS¹
 = 
tdef
.
Index
( "(" );

110 
Ssiz_t
 
	g·rL’
 = 
tdef
.
Index
Ğ")", 
·rS¹
 )-
	g·rS¹
+1;

112 
	gv¬ŸbËs
 = 
tdef
(
·rS¹
,
·rL’
);

113 
	gtdef
.
Remove
(
·rS¹
,
·rL’
);

114 
	gv¬ŸbËs
.
Remove
(
·rL’
-1,1);

115 
	gv¬ŸbËs
.
Remove
(0,1);

118 
TLi¡
* 
	gŒClsLi¡
 = 
gToŞs
().
P¬£FÜm©Lše
Ğ
tdef
, "_" );

119 
TLi¡I‹r
 
ŒClsIt
(
ŒClsLi¡
);

120 ià(
	gŒClsLi¡
->
G‘Size
(è< 1è
	glog
 << 
	gkFATAL
 <<
FÜm
("D©a£t[%s] : ",
d©aInfo
.
G‘Name
())<< "IncÜ»ù¿nsfÜm©iÚ sŒšg…rovided." << 
	gEndl
;

121 cÚ¡ 
	gTSŒšg
& 
	gŒName
 = ((
TObjSŒšg
*)
ŒClsLi¡
->
At
(0))->
G‘SŒšg
();

123 ià(
	gŒClsLi¡
->
G‘EÁr›s
() > 1) {

124 
TSŒšg
 
	gŒCls
 = "AllClasses";

125 
CÏssInfo
 *
	gci
 = 
NULL
;

126 
	gŒCls
 = ((
TObjSŒšg
*)
ŒClsLi¡
->
At
(1))->
G‘SŒšg
();

127 ià(
	gŒCls
 != "AllClasses") {

128 
ci
 = 
d©aInfo
.
G‘CÏssInfo
Ğ
ŒCls
 );

129 ià(
	gci
 =ğ
NULL
)

130 
log
 << 
kFATAL
 <<
FÜm
("D©a£t[%s] : ",
d©aInfo
.
G‘Name
())<< "CÏs " << 
	gŒCls
 << "‚ot known for variableransformation "

131 << 
	gŒName
 << ",…Ëa£ check." << 
	gEndl
;

133 
	gidxCls
 = 
ci
->
G‘Numb”
();

137 
V¬ŸbËT¿nsfÜmBa£
* 
	gŒªsfÜm©iÚ
 = 
NULL
;

138 ià(
	gŒName
 =ğ"I" || 
ŒName
 == "Ident" ||rName == "Identity") {

139 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_";

140 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËId’t™yT¿nsfÜm
Ğ
d©aInfo
);

142 ià(
	gŒName
 =ğ"D" || 
ŒName
 == "Deco" ||rName == "Decorrelate") {

143 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_";

144 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËDecÜrT¿nsfÜm
Ğ
d©aInfo
);

146 ià(
	gŒName
 =ğ"P" || 
ŒName
 == "PCA") {

147 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_";

148 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËPCAT¿nsfÜm
 ( 
d©aInfo
);

150 ià(
	gŒName
 =ğ"U" || 
ŒName
 == "Uniform") {

151 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_,_T_";

152 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËGaussT¿nsfÜm
 ( 
d©aInfo
, "Uniform" );

154 ià(
	gŒName
 =ğ"G" || 
ŒName
 == "Gauss") {

155 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_";

156 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËGaussT¿nsfÜm
 ( 
d©aInfo
);

158 ià(
	gŒName
 =ğ"N" || 
ŒName
 == "Norm" ||rName == "Normalise" ||rName == "Normalize") {

159 ià(
v¬ŸbËs
.
L’gth
() == 0) variables = "_V_,_T_";

160 
	gŒªsfÜm©iÚ
 = 
Ãw
 
V¬ŸbËNÜm®izeT¿nsfÜm
Ğ
d©aInfo
);

162 
	glog
 << 
	gkFATAL
 <<
FÜm
("D©a£t[%s] : ",
d©aInfo
.
G‘Name
())<< "<ProcessOptions> Variableransform '"

163 << 
	gŒName
 << "' unknown." << 
	gEndl
;

166 ià(
	gŒªsfÜm©iÚ
) {

167 
CÏssInfo
* 
	gşsInfo
 = 
d©aInfo
.
G‘CÏssInfo
(
idxCls
);

168 ià(
	gşsInfo
 )

169 
	glog
 << 
	gkHEADER
 <<
FÜm
("[%s] : ",
d©aInfo
.
G‘Name
())

170 << "C»©T¿nsfÜm©iÚ \"" << 
	gŒName
 << "\" with„eference class "

171 << 
	gşsInfo
->
G‘Name
(è<< "=("<< 
	gidxCls
 <<")"<<
	gEndl
 << Endl;

173 
	glog
 << 
	gkHEADER
 <<
FÜm
("[%s] : ",
d©aInfo
.
G‘Name
())

174 << "C»©T¿nsfÜm©iÚ \"" << 
	gŒName
 << "\" w™hƒv’t äom‡Î cÏs£s." << 
	gEndl
 << Endl;

176 
	gŒªsfÜm©iÚ
->
S–eùIÅut
Ğ
v¬ŸbËs
 );

177 
	gŒªsfÜm©iÚHªdËr
.
AddT¿nsfÜm©iÚ
(
ŒªsfÜm©iÚ
, 
idxCls
);

	@src/VariableTransformBase.cxx

33 
	~"TMVA/V¬ŸbËT¿nsfÜmBa£.h
"

35 
	~"TMVA/CÚfig.h
"

36 
	~"TMVA/D©aS‘Info.h
"

37 
	~"TMVA/MsgLogg”.h
"

38 
	~"TMVA/Rªkšg.h
"

39 
	~"TMVA/ToŞs.h
"

40 
	~"TMVA/Ty³s.h
"

41 
	~"TMVA/V¬ŸbËInfo.h
"

42 
	~"TMVA/V”siÚ.h
"

44 
	~"TH1.h
"

45 
	~"TH2.h
"

46 
	~"THashTabË.h
"

47 
	~"TLi¡.h
"

48 
	~"TM©h.h
"

49 
	~"TProfe.h
"

50 
	~"TVeùÜD.h
"

52 
	~<®gÜ™hm
>

53 
	~<ÿs£¹
>

54 
	~<exû±iÚ
>

55 
	~<iomª
>

56 
	~<¡dexû±
>

57 
	~<£t
>

59 
boŞ
 
	gadvªûd
;

61 
CÏssImp
(
TMVA
::
V¬ŸbËT¿nsfÜmBa£
);

66 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$V¬ŸbËT¿nsfÜmBa£
Ğ
D©aS‘Info
& 
dsi
,

67 
Ty³s
::
EV¬ŸbËT¿nsfÜm
 
tf
,

68 cÚ¡ 
TSŒšg
& 
ŒfName
 )

69 : 
	`TObjeù
(),

70 
	`fDsi
(
dsi
),

71 
	`fDsiOuut
(
NULL
),

72 
	`fT¿nsfÜmedEv’t
(0),

73 
	`fBackT¿nsfÜmedEv’t
(0),

74 
	`fV¬ŸbËT¿nsfÜm
(
tf
),

75 
	`fEÇbËd
Ğ
kTRUE
 ),

76 
	`fC»©ed
Ğ
kFALSE
 ),

77 
	`fNÜm®i£
Ğ
kFALSE
 ),

78 
	`fT¿nsfÜmName
(
ŒfName
),

79 
	`fV¬ŸbËTy³sA»CouÁed
(
çl£
),

80 
	`fNV¬ŸbËs
(0),

81 
	`fNT¬g‘s
(0),

82 
	`fNS³ù©Üs
(0),

83 
	`fSÜtG‘
(
kTRUE
),

84 
	`fTMVAV”siÚ
(
TMVA_VERSION_CODE
),

85 
	$fLogg”
( 0 )

87 
fLogg”
 = 
Ãw
 
	`MsgLogg”
(
this
, 
kINFO
);

88 
UIÁ_t
 
iv¬
 = 0; iv¬ < 
fDsi
.
	`G‘NV¬ŸbËs
(); ivar++) {

89 
fV¬ŸbËs
.
	`push_back
Ğ
	`V¬ŸbËInfo
Ğ
fDsi
.
	`G‘V¬ŸbËInfo
(
iv¬
) ) );

91 
UIÁ_t
 
™gt
 = 0; itgˆ< 
fDsi
.
	`G‘NT¬g‘s
(); itgt++) {

92 
fT¬g‘s
.
	`push_back
Ğ
	`V¬ŸbËInfo
Ğ
fDsi
.
	`G‘T¬g‘Info
(
™gt
) ) );

94 
UIÁ_t
 
i¥ù
 = 0; i¥ù < 
fDsi
.
	`G‘NS³ù©Üs
(); ispct++) {

95 
fT¬g‘s
.
	`push_back
Ğ
	`V¬ŸbËInfo
Ğ
fDsi
.
	`G‘S³ù©ÜInfo
(
i¥ù
) ) );

97 
	}
}

101 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::~
	$V¬ŸbËT¿nsfÜmBa£
()

103 ià(
fT¿nsfÜmedEv’t
!=0è
d–‘e
 fTransformedEvent;

104 ià(
fBackT¿nsfÜmedEv’t
!=0è
d–‘e
 fBackTransformedEvent;

106 
d–‘e
 
fLogg”
;

107 
	}
}

112 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$S–eùIÅut
ĞcÚ¡ 
TSŒšg
& 
_šputV¬ŸbËs
, 
BoŞ_t
 
putIÁoV¬ŸbËs
 )

114 
TSŒšg
 
šputV¬ŸbËs
 = 
_šputV¬ŸbËs
;

117 
fG‘
.
	`ş—r
();

119 
UIÁ_t
 
nv¬s
 = 
	`G‘NV¬ŸbËs
();

120 
UIÁ_t
 
Ágts
 = 
	`G‘NT¬g‘s
();

121 
UIÁ_t
 
n¥ùs
 = 
	`G‘NS³ù©Üs
();

123 
¡d
::
	t£t
<
	tIÁ_t
> 
	tS–eùedIndiûs
;

125 
S–eùedIndiûs
 
v¬Indiûs
;

126 
S–eùedIndiûs
 
tgtIndiûs
;

127 
S–eùedIndiûs
 
¥ùIndiûs
;

129 ià(
šputV¬ŸbËs
 == "")

131 
šputV¬ŸbËs
 = "_V_,_T_";

134 
TLi¡
* 
šLi¡
 = 
	`gToŞs
().
	`P¬£FÜm©Lše
Ğ
šputV¬ŸbËs
, "," );

135 
TLi¡I‹r
 
	`šIt
(
šLi¡
);

136 
TObjSŒšg
* 
os
 = (TObjSŒšg*)
	`šIt
()) {

138 
TSŒšg
 
v¬ŸbËs
 = 
os
->
	`G‘SŒšg
();

140 ifĞ
v¬ŸbËs
.
	`BegšsW™h
("_"è&& v¬ŸbËs.
	`EndsW™h
("_") ) {

141 
v¬ŸbËs
.
	`Remove
( 0,1);

142 
v¬ŸbËs
.
	`Remove
Ğv¬ŸbËs.
	`L’gth
()-1,1 );

144 ifĞ
v¬ŸbËs
.
	`BegšsW™h
("V") ) {

145 
v¬ŸbËs
.
	`Remove
(0,1);

146 ifĞ
v¬ŸbËs
.
	`L’gth
() == 0 ){

147  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ) {

148 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
) );

149 
v¬Indiûs
.
	`š£¹
Ğ
iv¬
 );

152 
UIÁ_t
 
idx
 = 
v¬ŸbËs
.
	`Atoi
();

153 ifĞ
idx
 >ğ
nv¬s
 )

154 
	`Log
(è<< 
kFATAL
 << "You s–eùed v¬ŸbË w™h index : " << 
idx
 << " oàÚly " << 
nv¬s
 << " v¬ŸbËs." << 
Endl
;

155 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
idx
) );

156 
v¬Indiûs
.
	`š£¹
Ğ
idx
 );

158 }ifĞ
v¬ŸbËs
.
	`BegšsW™h
("T") ) {

159 
v¬ŸbËs
.
	`Remove
(0,1);

160 ifĞ
v¬ŸbËs
.
	`L’gth
() == 0 ){

161  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ) {

162 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
) );

163 
tgtIndiûs
.
	`š£¹
Ğ
™gt
 );

166 
UIÁ_t
 
idx
 = 
v¬ŸbËs
.
	`Atoi
();

167 ifĞ
idx
 >ğ
Ágts
 )

168 
	`Log
(è<< 
kFATAL
 << "You s–eùed¬g‘ w™h index : " << 
idx
 << " oàÚly " << 
Ágts
 << "¬g‘s." << 
Endl
;

169 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
idx
) );

170 
tgtIndiûs
.
	`š£¹
Ğ
idx
 );

172 }ifĞ
v¬ŸbËs
.
	`BegšsW™h
("S") ) {

173 
v¬ŸbËs
.
	`Remove
(0,1);

174 ifĞ
v¬ŸbËs
.
	`L’gth
() == 0 ){

175  
UIÁ_t
 
i¥ù
 = 0; i¥ù < 
n¥ùs
; ++ispct ) {

176 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
i¥ù
) );

177 
¥ùIndiûs
.
	`š£¹
Ğ
i¥ù
 );

180 
UIÁ_t
 
idx
 = 
v¬ŸbËs
.
	`Atoi
();

181 ifĞ
idx
 >ğ
n¥ùs
 )

182 
	`Log
(è<< 
kFATAL
 << "You s–eùed s³ù©Ü w™h index : " << 
idx
 << " oàÚly " << 
n¥ùs
 << " s³ù©Üs." << 
Endl
;

183 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
idx
) );

184 
¥ùIndiûs
.
	`š£¹
Ğ
idx
 );

186 }ifĞ
	`TSŒšg
("REARRANGE").
	`BegšsW™h
(
v¬ŸbËs
) ) {

187 
	`ToggËIÅutSÜtOrd”
Ğ
kFALSE
 );

188 ifĞ!
fSÜtG‘
 )

189 
	`Log
(è<< 
kINFO
 << "V¬ŸbË„—¼ªgem’ˆ£ˆŒue: V¬ŸbË ord” giv’ iÀŒªsfÜm©iÚ o±iÚ i u£d fÜ iÅuˆtØŒªsfÜm©iÚ!" << 
Endl
;

193 
IÁ_t
 
numIndiûs
 = 
v¬Indiûs
.
	`size
()+
tgtIndiûs
.size()+
¥ùIndiûs
.size();

194  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ) {

195 ifĞ
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
iv¬
 ).
	`G‘Lab–
(è=ğ
v¬ŸbËs
 ) {

196 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
) );

197 
v¬Indiûs
.
	`š£¹
Ğ
iv¬
 );

201  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ) {

202 ifĞ
fDsi
.
	`G‘T¬g‘Info
Ğ
™gt
 ).
	`G‘Lab–
(è=ğ
v¬ŸbËs
 ) {

203 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
) );

204 
tgtIndiûs
.
	`š£¹
Ğ
™gt
 );

208  
UIÁ_t
 
i¥ù
 = 0; i¥ù < 
n¥ùs
; ++ispct ) {

209 ifĞ
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
i¥ù
 ).
	`G‘Lab–
(è=ğ
v¬ŸbËs
 ) {

210 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
i¥ù
) );

211 
¥ùIndiûs
.
	`š£¹
Ğ
i¥ù
 );

215 
IÁ_t
 
numIndiûsEndOfLoİ
 = 
v¬Indiûs
.
	`size
()+
tgtIndiûs
.size()+
¥ùIndiûs
.size();

216 ifĞ
numIndiûsEndOfLoİ
 =ğ
numIndiûs
 )

217 
	`Log
(è<< 
kWARNING
 << "E¼Ü‡ˆ·rsšghİtiÚ fÜhv¬ŸbË¿nsfÜm©iÚs: V¬ŸbË/T¬g‘/S³ù©Ü '" << 
v¬ŸbËs
.
	`D©a
(è<< "'‚Ù found." << 
Endl
;

218 
numIndiûs
 = 
numIndiûsEndOfLoİ
;

223 ifĞ
putIÁoV¬ŸbËs
 ) {

224 
IÁ_t
 
idx
 = 0;

225  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
v¬Indiûs
.
	`begš
(), 
™End
 = v¬Indiûs.
	`’d
(); it != itEnd; ++it ) {

226 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
idx
) );

227 ++
idx
;

229  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
tgtIndiûs
.
	`begš
(), 
™End
 =gtIndiûs.
	`’d
(); it != itEnd; ++it ) {

230 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
idx
) );

231 ++
idx
;

233  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
¥ùIndiûs
.
	`begš
(), 
™End
 = spùIndiûs.
	`’d
(); it != itEnd; ++it ) {

234 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
idx
) );

235 ++
idx
;

238  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
v¬Indiûs
.
	`begš
(), 
™End
 = v¬Indiûs.
	`’d
(); it != itEnd; ++it ) {

239 
IÁ_t
 
idx
 = (*
™
);

240 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
idx
) );

242  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
tgtIndiûs
.
	`begš
(), 
™End
 =gtIndiûs.
	`’d
(); it != itEnd; ++it ) {

243 
IÁ_t
 
idx
 = (*
™
);

244 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
idx
) );

246  
S–eùedIndiûs
::
™”©Ü
 
™
 = 
¥ùIndiûs
.
	`begš
(), 
™End
 = spùIndiûs.
	`’d
(); it != itEnd; ++it ) {

247 
IÁ_t
 
idx
 = (*
™
);

248 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
idx
) );

252 ifĞ
fSÜtG‘
 ) {

253 
fG‘
.
	`ş—r
();

254 
fG‘
.
	`assign
Ğ
fPut
.
	`begš
(), fPut.
	`’d
() );

258 
	`Log
(è<< 
kHEADER
 << "T¿nsfÜm©iÚ, V¬ŸbË s–eùiÚ : " << 
Endl
;

261 cÚ¡ 
D©aS‘Info
* 
ouutDsiPŒ
 = (
fDsiOuut
? &(*fDsiOuutè: &
fDsi
 );

265 
ItV¬Ty³Idx
 
™G‘
 = 
fG‘
.
	`begš
(), 
™G‘End
 = fG‘.
	`’d
();

266 
ItV¬Ty³Idx
 
™Put
 = 
fPut
.
	`begš
();

267  ; 
™G‘
 !ğ
™G‘End
; ++itGet ) {

268 
TSŒšg
 
šputTy³SŒšg
 = "?";

270 
Ch¬_t
 
šputTy³
 = (*
™G‘
).
fœ¡
;

271 
IÁ_t
 
šputIdx
 = (*
™G‘
).
£cÚd
;

273 
TSŒšg
 
šputLab–
 = "NOT FOND";

274 ifĞ
šputTy³
 == 'v' ) {

275 
šputLab–
 = 
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
šputIdx
 ).
	`G‘Lab–
();

276 
šputTy³SŒšg
 = "variable";

278 ifĞ
šputTy³
 == 't' ){

279 
šputLab–
 = 
fDsi
.
	`G‘T¬g‘Info
Ğ
šputIdx
 ).
	`G‘Lab–
();

280 
šputTy³SŒšg
 = "target";

282 ifĞ
šputTy³
 == 's' ){

283 
šputLab–
 = 
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
šputIdx
 ).
	`G‘Lab–
();

284 
šputTy³SŒšg
 = "spectator";

287 
TSŒšg
 
ouutTy³SŒšg
 = "?";

289 
Ch¬_t
 
ouutTy³
 = (*
™Put
).
fœ¡
;

290 
IÁ_t
 
ouutIdx
 = (*
™Put
).
£cÚd
;

292 
TSŒšg
 
ouutLab–
 = "NOT FOUND";

293 ifĞ
ouutTy³
 == 'v' ) {

294 
ouutLab–
 = 
ouutDsiPŒ
->
	`G‘V¬ŸbËInfo
Ğ
ouutIdx
 ).
	`G‘Lab–
();

295 
ouutTy³SŒšg
 = "variable";

297 ifĞ
ouutTy³
 == 't' ){

298 
ouutLab–
 = 
ouutDsiPŒ
->
	`G‘T¬g‘Info
Ğ
ouutIdx
 ).
	`G‘Lab–
();

299 
ouutTy³SŒšg
 = "target";

301 ifĞ
ouutTy³
 == 's' ){

302 
ouutLab–
 = 
ouutDsiPŒ
->
	`G‘S³ù©ÜInfo
Ğ
ouutIdx
 ).
	`G‘Lab–
();

303 
ouutTy³SŒšg
 = "spectator";

305 
	`Log
(è<< 
kINFO
 << "IÅuˆ: " << 
šputTy³SŒšg
.
	`D©a
(è<< " '" << 
šputLab–
.D©a(è<< "'" << " <---> " << "Ouuˆ: " << 
ouutTy³SŒšg
.D©a(è<< " '" << 
ouutLab–
.D©a(è<< "'" << 
Endl
;

306 
	`Log
(è<< 
kDEBUG
 << "\t(šdex=" << 
šputIdx
 << ")." << "\t(šdex=" << 
ouutIdx
 << ")." << 
Endl
;

308 ++
™Put
;

311 
	}
}

317 
BoŞ_t
 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
G‘IÅut
ĞcÚ¡ 
Ev’t
* 
ev’t
, 
¡d
::
veùÜ
<
Flßt_t
>& 
šput
, std::veùÜ<
Ch¬_t
>& 
mask
, BoŞ_ˆ
backT¿nsfÜm©iÚ
 ) const

319 
ItV¬Ty³IdxCÚ¡
 
	g™EÁry
;

320 
ItV¬Ty³IdxCÚ¡
 
	g™EÁryEnd
;

322 
	gšput
.
ş—r
();

323 
	gmask
.
ş—r
();

325 ifĞ
	gbackT¿nsfÜm©iÚ
 && !
	gfPut
.
em±y
() ){

326 
	g™EÁry
 = 
fPut
.
begš
();

327 
	g™EÁryEnd
 = 
fPut
.
’d
();

328 
	gšput
.
»£rve
(
fPut
.
size
());

331 
	g™EÁry
 = 
fG‘
.
begš
();

332 
	g™EÁryEnd
 = 
fG‘
.
’d
();

333 
	gšput
.
»£rve
(
fG‘
.
size
() );

336 
BoŞ_t
 
	ghasMaskedEÁr›s
 = 
kFALSE
;

338  ; 
	g™EÁry
 !ğ
™EÁryEnd
; ++itEntry ) {

339 
Ch¬_t
 
	gty³
 = (*
™EÁry
).
fœ¡
;

340 
IÁ_t
 
	gidx
 = (*
™EÁry
).
£cÚd
;

342 
	gŒy
{

343  
	gty³
 ) {

345 
šput
.
push_back
Ğ
ev’t
->
G‘V®ue
(
idx
) );

348 
šput
.
push_back
Ğ
ev’t
->
G‘T¬g‘
(
idx
) );

351 
šput
.
push_back
Ğ
ev’t
->
G‘S³ù©Ü
(
idx
) );

354 
Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/G‘IÅuˆ: unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

356 
	gmask
.
push_back
(
kFALSE
);

358 
ÿtch
(
¡d
::
out_of_¿nge
& ){

359 
šput
.
push_back
(0.f);

360 
	gmask
.
push_back
(
kTRUE
);

361 
	ghasMaskedEÁr›s
 = 
kTRUE
;

364  
	ghasMaskedEÁr›s
;

370 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
S‘Ouut
Ğ
Ev’t
* 
ev’t
, 
¡d
::
veùÜ
<
Flßt_t
>& 
ouut
, std::veùÜ<
Ch¬_t
>& 
mask
, cÚ¡ Ev’t* 
ŞdEv’t
, 
BoŞ_t
 
backT¿nsfÜm©iÚ
 ) const

372 
	g¡d
::
veùÜ
<
Flßt_t
>::
™”©Ü
 
™Ouut
 = 
ouut
.
begš
();

373 
	g¡d
::
veùÜ
<
Ch¬_t
>::
™”©Ü
 
™Mask
 = 
mask
.
begš
();

375 ifĞ
	gŞdEv’t
 )

376 
	gev’t
->
CİyV¬V®ues
Ğ*
ŞdEv’t
 );

378 
	gŒy
 {

380 
ItV¬Ty³IdxCÚ¡
 
	g™EÁry
;

381 
ItV¬Ty³IdxCÚ¡
 
	g™EÁryEnd
;

383 ifĞ
	gbackT¿nsfÜm©iÚ
 || 
	gfPut
.
em±y
() ){

384 
	g™EÁry
 = 
fG‘
.
begš
();

385 
	g™EÁryEnd
 = 
fG‘
.
’d
();

388 
	g™EÁry
 = 
fPut
.
begš
();

389 
	g™EÁryEnd
 = 
fPut
.
’d
();

393  ; 
	g™EÁry
 !ğ
™EÁryEnd
; ++itEntry ) {

395 ifĞ(*
	g™Mask
) ){

399 
Ch¬_t
 
	gty³
 = (*
™EÁry
).
fœ¡
;

400 
IÁ_t
 
	gidx
 = (*
™EÁry
).
£cÚd
;

401 ià(
	g™Ouut
 =ğ
ouut
.
’d
()è
Log
(è<< 
kFATAL
 << "R—d beyÚd‡¼ay bound¬› š V¬ŸbËT¿nsfÜmBa£::S‘Ouut"<<
Endl
;

402 
Flßt_t
 
	gv®ue
 = (*
™Ouut
);

404  
	gty³
 ) {

406 
ev’t
->
S‘V®
Ğ
idx
, 
v®ue
 );

409 
ev’t
->
S‘T¬g‘
Ğ
idx
, 
v®ue
 );

412 
ev’t
->
S‘S³ù©Ü
Ğ
idx
, 
v®ue
 );

415 
Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/G‘IÅuˆ: unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

417 ifĞ!(*
	g™Mask
èè++
	g™Ouut
;

418 ++
	g™Mask
;

421 }
ÿtch
Ğ
¡d
::
exû±iÚ
& 
exû±
 ){

422 
Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/S‘Ouuˆ:ƒxû±iÚ/" << 
exû±
.
wh©
(è<< 
Endl
;

423 
	gthrow
;

431 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$CouÁV¬ŸbËTy³s
Ğ
UIÁ_t
& 
nv¬s
, UIÁ_t& 
Ágts
, UIÁ_t& 
n¥ùs
 ) const

433 ifĞ
fV¬ŸbËTy³sA»CouÁed
 ){

434 
nv¬s
 = 
fNV¬ŸbËs
;

435 
Ágts
 = 
fNT¬g‘s
;

436 
n¥ùs
 = 
fNS³ù©Üs
;

440 
nv¬s
 = 
Ágts
 = 
n¥ùs
 = 0;

442  
ItV¬Ty³IdxCÚ¡
 
™EÁry
 = 
fG‘
.
	`begš
(), 
™EÁryEnd
 = fG‘.
	`’d
(); itEntry != itEntryEnd; ++itEntry ) {

443 
Ch¬_t
 
ty³
 = (*
™EÁry
).
fœ¡
;

445  
ty³
 ) {

447 
nv¬s
++;

450 
Ágts
++;

453 
n¥ùs
++;

456 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/G‘V¬ŸbËTy³Numb” : unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

460 
fNV¬ŸbËs
 = 
nv¬s
;

461 
fNT¬g‘s
 = 
Ágts
;

462 
fNS³ù©Üs
 = 
n¥ùs
;

464 
fV¬ŸbËTy³sA»CouÁed
 = 
Œue
;

465 
	}
}

472 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
C®cNÜm
ĞcÚ¡ 
¡d
::
veùÜ
<cÚ¡ 
Ev’t
*>& 
ev’ts
 )

474 ià(!
IsC»©ed
()) ;

476 cÚ¡ 
UIÁ_t
 
	gnv¬s
 = 
G‘NV¬ŸbËs
();

477 cÚ¡ 
UIÁ_t
 
	gÁgts
 = 
G‘NT¬g‘s
();

479 
UIÁ_t
 
	gÃvts
 = 
ev’ts
.
size
();

481 
TVeùÜD
 
x2
Ğ
nv¬s
+
Ágts
 ); 
	gx2
 *= 0;

482 
TVeùÜD
 
x0
Ğ
nv¬s
+
Ágts
 ); 
	gx0
 *= 0;

483 
TVeùÜD
 
v0
Ğ
nv¬s
+
Ágts
 ); 
	gv0
 *= 0;

485 
DoubË_t
 
	gsumOfWeights
 = 0;

486 
UIÁ_t
 
	g›vt
=0; ievt<
	gÃvts
; ievt++) {

487 cÚ¡ 
Ev’t
* 
	gev
 = 
ev’ts
[
›vt
];

489 
DoubË_t
 
	gweight
 = 
ev
->
G‘Weight
();

490 
	gsumOfWeights
 +ğ
weight
;

491 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

492 
DoubË_t
 
	gx
 = 
ev
->
G‘V®ue
(
iv¬
);

493 ià(
	g›vt
==0) {

494 
V¬ŸbËs
().
©
(
iv¬
).
S‘Mš
(
x
);

495 
V¬ŸbËs
().
©
(
iv¬
).
S‘Max
(
x
);

498 
Upd©eNÜm
Ğ
iv¬
, 
x
 );

500 
x0
(
iv¬
è+ğ
x
*
weight
;

501 
x2
(
iv¬
è+ğ
x
*x*
weight
;

503 
UIÁ_t
 
	g™gt
=0; itgt<
	gÁgts
; itgt++) {

504 
DoubË_t
 
	gx
 = 
ev
->
G‘T¬g‘
(
™gt
);

505 ià(
	g›vt
==0) {

506 
T¬g‘s
().
©
(
™gt
).
S‘Mš
(
x
);

507 
T¬g‘s
().
©
(
™gt
).
S‘Max
(
x
);

510 
Upd©eNÜm
Ğ
nv¬s
+
™gt
, 
x
 );

512 
x0
(
nv¬s
+
™gt
è+ğ
x
*
weight
;

513 
x2
(
nv¬s
+
™gt
è+ğ
x
*x*
weight
;

517 ià(
	gsumOfWeights
 <= 0) {

518 
Log
(è<< 
kFATAL
 << "he sum ofƒvent weights calculated for your input is == 0"

519 << " o¸exaùly: " << 
sumOfWeights
 << "h”i obviou¦y som´obËm..."<< 
Endl
;

523 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

524 
DoubË_t
 
	gm—n
 = 
x0
(
iv¬
)/
sumOfWeights
;

526 
V¬ŸbËs
().
©
(
iv¬
).
S‘M—n
Ğ
m—n
 );

527 ià(
x2
(
iv¬
)/
	gsumOfWeights
 - 
m—n
*
	gm—n
 < 0) {

528 
Log
(è<< 
	gkFATAL
 << "hRMS oàyou¸špuˆv¬ŸbË " << 
	giv¬


529 << "ƒv®u©e tØª imagš¬y‚umb”: sq¹("<< 
x2
(
iv¬
)/
	gsumOfWeights
 - 
m—n
*
	gm—n


531 << 
	gEndl
;

533 
V¬ŸbËs
().
©
(
iv¬
).
S‘RMS
Ğ
TM©h
::
Sq¹
Ğ
x2
(iv¬)/
sumOfWeights
 - 
m—n
*mean) );

535 
UIÁ_t
 
	g™gt
=0; itgt<
	gÁgts
; itgt++) {

536 
DoubË_t
 
	gm—n
 = 
x0
(
nv¬s
+
™gt
)/
sumOfWeights
;

537 
T¬g‘s
().
©
(
™gt
).
S‘M—n
Ğ
m—n
 );

538 ià(
x2
(
nv¬s
+
™gt
)/
	gsumOfWeights
 - 
m—n
*
	gm—n
 < 0) {

539 
Log
(è<< 
	gkFATAL
 << "hRMS oàyou¸rg‘ v¬ŸbË " << 
	g™gt


540 << "ƒv®u©e tØª imagš¬y‚umb”: sq¹(" << 
x2
(
nv¬s
+
™gt
)/
	gsumOfWeights
 - 
m—n
*
	gm—n


542 << 
	gEndl
;

544 
T¬g‘s
().
©
(
™gt
).
S‘RMS
Ğ
TM©h
::
Sq¹
Ğ
x2
(
nv¬s
+™gt)/
sumOfWeights
 - 
m—n
*mean) );

547 
UIÁ_t
 
	g›vt
=0; ievt<
	gÃvts
; ievt++) {

548 cÚ¡ 
Ev’t
* 
	gev
 = 
ev’ts
[
›vt
];

549 
DoubË_t
 
	gweight
 = 
ev
->
G‘Weight
();

550 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

551 
DoubË_t
 
	gx
 = 
ev
->
G‘V®ue
(
iv¬
);

552 
DoubË_t
 
	gm—n
 = 
V¬ŸbËs
().
©
(
iv¬
).
G‘M—n
();

553 
v0
(
iv¬
è+ğ
weight
*(
x
-
m—n
)*(x-mean);

555 
UIÁ_t
 
	g™gt
=0; itgt<
	gÁgts
; itgt++) {

556 
DoubË_t
 
	gx
 = 
ev
->
G‘T¬g‘
(
™gt
);

557 
DoubË_t
 
	gm—n
 = 
T¬g‘s
().
©
(
™gt
).
G‘M—n
();

558 
v0
(
nv¬s
+
™gt
è+ğ
weight
*(
x
-
m—n
)*(x-mean);

564 
UIÁ_t
 
	giv¬
=0; iv¬<
	gnv¬s
; ivar++) {

565 
DoubË_t
 
	gv¬Ÿnû
 = 
v0
(
iv¬
)/
sumOfWeights
;

566 
V¬ŸbËs
().
©
(
iv¬
).
S‘V¬Ÿnû
Ğ
v¬Ÿnû
 );

567 
Log
(è<< 
	gkINFO
 << "V¬ŸbË " << 
V¬ŸbËs
().
©
(
iv¬
).
G‘Ex´essiÚ
(è<<" v¬Ÿnû = " << 
	gv¬Ÿnû
 << 
	gEndl
;

569 
UIÁ_t
 
	g™gt
=0; itgt<
	gÁgts
; itgt++) {

570 
DoubË_t
 
	gv¬Ÿnû
 = 
v0
(
nv¬s
+
™gt
)/
sumOfWeights
;

571 
T¬g‘s
().
©
(
™gt
).
S‘V¬Ÿnû
Ğ
v¬Ÿnû
 );

572 
Log
(è<< 
	gkINFO
 << "T¬g‘ " << 
T¬g‘s
().
©
(
™gt
).
G‘Ex´essiÚ
(è<<" v¬Ÿnû = " << 
	gv¬Ÿnû
 << 
	gEndl
;

575 
Log
(è<< 
	gkVERBOSE
 << "S‘ mšNÜm/maxNÜm fÜ v¬ŸbË to: " << 
	gEndl
;

576 
Log
(è<< 
	g¡d
::
£»cisiÚ
(3);

577 
UIÁ_t
 
	giv¬
=0; iv¬<
G‘NV¬ŸbËs
(); ivar++)

578 
Log
(è<< " " << 
V¬ŸbËs
().
©
(
iv¬
).
G‘IÁ”ÇlName
()

579 << "\t: [" << 
V¬ŸbËs
().
©
(
iv¬
).
G‘Mš
(è<< "\t, " << V¬ŸbËs().©(iv¬).
G‘Max
(è<< "\t] " << 
	gEndl
;

580 
Log
(è<< 
	gkVERBOSE
 << "S‘ mšNÜm/maxNÜm fÜ¬g‘ to: " << 
	gEndl
;

581 
Log
(è<< 
	g¡d
::
£»cisiÚ
(3);

582 
UIÁ_t
 
	g™gt
=0; itgt<
G‘NT¬g‘s
(); itgt++)

583 
Log
(è<< " " << 
T¬g‘s
().
©
(
™gt
).
G‘IÁ”ÇlName
()

584 << "\t: [" << 
T¬g‘s
().
©
(
™gt
).
G‘Mš
(è<< "\t, " << T¬g‘s().©(™gt).
G‘Max
(è<< "\t] " << 
	gEndl
;

585 
Log
(è<< 
	g¡d
::
£»cisiÚ
(5);

593 
	g¡d
::
veùÜ
<
TSŒšg
>* 
TMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$G‘T¿nsfÜm©iÚSŒšgs
Ğ
IÁ_t
 ) const

595 
¡d
::
veùÜ
<
TSŒšg
>* 
¡rVec
 = 
Ãw
 std::vector<TString>;

596 
UIÁ_t
 
iv¬
=0; iv¬<
	`G‘NV¬ŸbËs
(); ivar++) {

597 
¡rVec
->
	`push_back
Ğ
	`V¬ŸbËs
()[
iv¬
].
	`G‘Lab–
() + "_[transformed]");

600  
¡rVec
;

601 
	}
}

607 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$Upd©eNÜm
 ( 
IÁ_t
 
iv¬
, 
DoubË_t
 
x
 )

609 
IÁ_t
 
nv¬s
 = 
fDsi
.
	`G‘NV¬ŸbËs
();

610 ifĞ
iv¬
 < 
nv¬s
 ){

611 ià(
x
 < 
	`V¬ŸbËs
().
	`©
(
iv¬
).
	`G‘Mš
()èV¬ŸbËs().©(iv¬).
	`S‘Mš
(x);

612 ià(
x
 > 
	`V¬ŸbËs
().
	`©
(
iv¬
).
	`G‘Max
()èV¬ŸbËs().©(iv¬).
	`S‘Max
(x);

614 ià(
x
 < 
	`T¬g‘s
().
	`©
(
iv¬
-
nv¬s
).
	`G‘Mš
()èT¬g‘s().©(iv¬-nv¬s).
	`S‘Mš
(x);

615 ià(
x
 > 
	`T¬g‘s
().
	`©
(
iv¬
-
nv¬s
).
	`G‘Max
()èT¬g‘s().©(iv¬-nv¬s).
	`S‘Max
(x);

617 
	}
}

622 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$A‰achXMLTo
(* 
·»Á
)

624 * 
£lxml
 = 
	`gToŞs
().
	`AddChd
(
·»Á
, "Selection");

626 * 
špxml
 = 
	`gToŞs
().
	`AddChd
(
£lxml
, "Input");

627 
	`gToŞs
().
	`AddA‰r
(
špxml
, "NIÅuts", 
fG‘
.
	`size
() );

630 cÚ¡ 
D©aS‘Info
* 
ouutDsiPŒ
 = (
fDsiOuut
? fDsiOuuˆ: &
fDsi
 );

632  
ItV¬Ty³Idx
 
™G‘
 = 
fG‘
.
	`begš
(), 
™G‘End
 = fG‘.
	`’d
(); itGet != itGetEnd; ++itGet ) {

633 
UIÁ_t
 
idx
 = (*
™G‘
).
£cÚd
;

634 
Ch¬_t
 
ty³
 = (*
™G‘
).
fœ¡
;

636 
TSŒšg
 
Ïb–
 = "";

637 
TSŒšg
 
ex´essiÚ
 = "";

638 
TSŒšg
 
ty³SŒšg
 = "";

639  
ty³
 ){

641 
ty³SŒšg
 = "Variable";

642 
Ïb–
 = 
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
idx
 ).
	`G‘Lab–
();

643 
ex´essiÚ
 = 
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

646 
ty³SŒšg
 = "Target";

647 
Ïb–
 = 
fDsi
.
	`G‘T¬g‘Info
Ğ
idx
 ).
	`G‘Lab–
();

648 
ex´essiÚ
 = 
fDsi
.
	`G‘T¬g‘Info
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

651 
ty³SŒšg
 = "Spectator";

652 
Ïb–
 = 
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
idx
 ).
	`G‘Lab–
();

653 
ex´essiÚ
 = 
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

656 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/A‰achXMLTØunknowÀv¬ŸbËy³ '" << 
ty³
 << "'." << 
Endl
;

659 * 
idxxml
 = 
	`gToŞs
().
	`AddChd
(
špxml
, "Input");

661 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Ty³", 
ty³SŒšg
);

662 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Lab–", 
Ïb–
);

663 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Ex´essiÚ", 
ex´essiÚ
);

667 * 
outxml
 = 
	`gToŞs
().
	`AddChd
(
£lxml
, "Output");

668 
	`gToŞs
().
	`AddA‰r
(
outxml
, "NOuuts", 
fPut
.
	`size
() );

670  
ItV¬Ty³Idx
 
™Put
 = 
fPut
.
	`begš
(), 
™PutEnd
 = fPut.
	`’d
(); itPut != itPutEnd; ++itPut ) {

671 
UIÁ_t
 
idx
 = (*
™Put
).
£cÚd
;

672 
Ch¬_t
 
ty³
 = (*
™Put
).
fœ¡
;

674 
TSŒšg
 
Ïb–
 = "";

675 
TSŒšg
 
ex´essiÚ
 = "";

676 
TSŒšg
 
ty³SŒšg
 = "";

677  
ty³
 ){

679 
ty³SŒšg
 = "Variable";

680 
Ïb–
 = 
ouutDsiPŒ
->
	`G‘V¬ŸbËInfo
Ğ
idx
 ).
	`G‘Lab–
();

681 
ex´essiÚ
 = 
ouutDsiPŒ
->
	`G‘V¬ŸbËInfo
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

684 
ty³SŒšg
 = "Target";

685 
Ïb–
 = 
ouutDsiPŒ
->
	`G‘T¬g‘Info
Ğ
idx
 ).
	`G‘Lab–
();

686 
ex´essiÚ
 = 
ouutDsiPŒ
->
	`G‘T¬g‘Info
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

689 
ty³SŒšg
 = "Spectator";

690 
Ïb–
 = 
ouutDsiPŒ
->
	`G‘S³ù©ÜInfo
Ğ
idx
 ).
	`G‘Lab–
();

691 
ex´essiÚ
 = 
ouutDsiPŒ
->
	`G‘S³ù©ÜInfo
Ğ
idx
 ).
	`G‘Ex´essiÚ
();

694 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/A‰achXMLTØunknowÀv¬ŸbËy³ '" << 
ty³
 << "'." << 
Endl
;

697 * 
idxxml
 = 
	`gToŞs
().
	`AddChd
(
outxml
, "Output");

699 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Ty³", 
ty³SŒšg
);

700 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Lab–", 
Ïb–
);

701 
	`gToŞs
().
	`AddA‰r
(
idxxml
, "Ex´essiÚ", 
ex´essiÚ
);

705 
	}
}

710 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$R—dFromXML
Ğ* 
£Êode
 )

712 * 
š²ode
 = 
	`gToŞs
().
	`G‘Chd
Ğ
£Êode
 );

713 * 
ouŠode
 = 
	`gToŞs
().
	`G‘NextChd
Ğ
š²ode
 );

715 
UIÁ_t
 
nv¬s
 = 
	`G‘NV¬ŸbËs
();

716 
UIÁ_t
 
Ágts
 = 
	`G‘NT¬g‘s
();

717 
UIÁ_t
 
n¥ùs
 = 
	`G‘NS³ù©Üs
();

720 
fG‘
.
	`ş—r
();

722 
UIÁ_t
 
nIÅuts
 = 0;

723 
	`gToŞs
().
	`R—dA‰r
(
š²ode
, "NIÅuts", 
nIÅuts
);

725 * 
ch
 = 
	`gToŞs
().
	`G‘Chd
Ğ
š²ode
 );

726 
ch
) {

727 
TSŒšg
 
ty³SŒšg
 = "";

728 
TSŒšg
 
Ïb–
 = "";

729 
TSŒšg
 
ex´essiÚ
 = "";

731 
	`gToŞs
().
	`R—dA‰r
(
ch
, "Ty³", 
ty³SŒšg
);

732 
	`gToŞs
().
	`R—dA‰r
(
ch
, "Lab–", 
Ïb–
);

733 
	`gToŞs
().
	`R—dA‰r
(
ch
, "Ex´essiÚ", 
ex´essiÚ
);

735 ifĞ
ty³SŒšg
 == "Variable" ){

736  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ) {

737 ifĞ
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
iv¬
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

738 
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
iv¬
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
) {

739 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
) );

743 }ifĞ
ty³SŒšg
 == "Target" ){

744  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ) {

745 ifĞ
fDsi
.
	`G‘T¬g‘Info
Ğ
™gt
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

746 
fDsi
.
	`G‘T¬g‘Info
Ğ
™gt
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
 ) {

747 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
) );

751 }ifĞ
ty³SŒšg
 == "Spectator" ){

752  
UIÁ_t
 
i¥ù
 = 0; i¥ù < 
n¥ùs
; ++ispct ) {

753 ifĞ
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
i¥ù
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

754 
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
i¥ù
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
 ) {

755 
fG‘
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
i¥ù
) );

760 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜm©iÚBa£/R—dFromXML : unknowÀty³ '" << 
ty³SŒšg
 << "'." << 
Endl
;

762 
ch
 = 
	`gToŞs
().
	`G‘NextChd
( ch );

765 
	`as£¹
Ğ
nIÅuts
 =ğ
fG‘
.
	`size
() );

768 
fPut
.
	`ş—r
();

770 
UIÁ_t
 
nOuuts
 = 0;

771 
	`gToŞs
().
	`R—dA‰r
(
ouŠode
, "NOuuts", 
nOuuts
);

773 * 
chOut
 = 
	`gToŞs
().
	`G‘Chd
Ğ
ouŠode
 );

774 
chOut
) {

775 
TSŒšg
 
ty³SŒšg
 = "";

776 
TSŒšg
 
Ïb–
 = "";

777 
TSŒšg
 
ex´essiÚ
 = "";

779 
	`gToŞs
().
	`R—dA‰r
(
chOut
, "Ty³", 
ty³SŒšg
);

780 
	`gToŞs
().
	`R—dA‰r
(
chOut
, "Lab–", 
Ïb–
);

781 
	`gToŞs
().
	`R—dA‰r
(
chOut
, "Ex´essiÚ", 
ex´essiÚ
);

783 ifĞ
ty³SŒšg
 == "Variable" ){

784  
UIÁ_t
 
iv¬
 = 0; iv¬ < 
nv¬s
; ++ivar ) {

785 ifĞ
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
iv¬
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

786 
fDsi
.
	`G‘V¬ŸbËInfo
Ğ
iv¬
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
 ) {

787 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('v',
iv¬
) );

791 }ifĞ
ty³SŒšg
 == "Target" ){

792  
UIÁ_t
 
™gt
 = 0; itgˆ< 
Ágts
; ++itgt ) {

793 ifĞ
fDsi
.
	`G‘T¬g‘Info
Ğ
™gt
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

794 
fDsi
.
	`G‘T¬g‘Info
Ğ
™gt
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
 ) {

795 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('t',
™gt
) );

799 }ifĞ
ty³SŒšg
 == "Spectator" ){

800  
UIÁ_t
 
i¥ù
 = 0; i¥ù < 
n¥ùs
; ++ispct ) {

801 ifĞ
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
i¥ù
 ).
	`G‘Lab–
(è=ğ
Ïb–
 ||

802 
fDsi
.
	`G‘S³ù©ÜInfo
Ğ
i¥ù
 ).
	`G‘Ex´essiÚ
(è=ğ
ex´essiÚ
 ) {

803 
fPut
.
	`push_back
Ğ
¡d
::
·œ
<
Ch¬_t
,
UIÁ_t
>('s',
i¥ù
) );

808 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜm©iÚBa£/R—dFromXML : unknowÀty³ '" << 
ty³SŒšg
 << "'." << 
Endl
;

810 
chOut
 = 
	`gToŞs
().
	`G‘NextChd
( chOut );

813 
	`as£¹
Ğ
nOuuts
 =ğ
fPut
.
	`size
() );

814 
	}
}

819 
	gTMVA
::
V¬ŸbËT¿nsfÜmBa£
::
	$MakeFunùiÚ
Ğ
¡d
::
o¡»am
& 
fout
, cÚ¡ 
TSŒšg
& , 
IÁ_t
 
·¹
,

820 
UIÁ_t
 , 
IÁ_t
 )

822 ifĞ
·¹
 == 0 ){

823 
fout
 << 
¡d
::
’dl
;

824 
fout
 << " // defšthšdiû oàthv¬ŸbË which‡»¿nsfÜmed byhi ŒªsfÜm©iÚ" << 
¡d
::
’dl
;

825 
fout
 << " stiø¡d::veùÜ<št> indiûsG‘;" << 
¡d
::
’dl
;

826 
fout
 << " stiø¡d::veùÜ<št> indiûsPut;" << 
¡d
::
’dl
 << std::endl;

827 
fout
 << " iàĞšdiûsG‘.em±y(èè{ " << 
¡d
::
’dl
;

828 
fout
 << " indiûsG‘.»£rve(fNv¬s);" << 
¡d
::
’dl
;

830  
ItV¬Ty³IdxCÚ¡
 
™EÁry
 = 
fG‘
.
	`begš
(), 
™EÁryEnd
 = fG‘.
	`’d
(); itEntry != itEntryEnd; ++itEntry ) {

831 
Ch¬_t
 
ty³
 = (*
™EÁry
).
fœ¡
;

832 
IÁ_t
 
idx
 = (*
™EÁry
).
£cÚd
;

834  
ty³
 ) {

836 
fout
 << " indiûsG‘.push_backĞ" << 
idx
 << ");" << 
¡d
::
’dl
;

839 
	`Log
(è<< 
kWARNING
 << "MakeCÏs dÛ¢'ˆwÜk w™h¿nsfÜm©iÚ oàrg‘s. Th»suÉ wÈbwrÚg!" << 
Endl
;

842 
	`Log
(è<< 
kWARNING
 << "MakeCÏs dÛ¢'ˆwÜk w™h¿nsfÜm©iÚ oà¥eù©Üs. Th»suÉ wÈbwrÚg!" << 
Endl
;

845 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/G‘IÅuˆ: unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

848 
fout
 << " } " << 
¡d
::
’dl
;

849 
fout
 << " iàĞšdiûsPut.em±y(èè{ " << 
¡d
::
’dl
;

850 
fout
 << " indiûsPut.»£rve(fNv¬s);" << 
¡d
::
’dl
;

852  
ItV¬Ty³IdxCÚ¡
 
™EÁry
 = 
fPut
.
	`begš
(), 
™EÁryEnd
 = fPut.
	`’d
(); itEntry != itEntryEnd; ++itEntry ) {

853 
Ch¬_t
 
ty³
 = (*
™EÁry
).
fœ¡
;

854 
IÁ_t
 
idx
 = (*
™EÁry
).
£cÚd
;

856  
ty³
 ) {

858 
fout
 << " indiûsPut.push_backĞ" << 
idx
 << ");" << 
¡d
::
’dl
;

861 
	`Log
(è<< 
kWARNING
 << "MakeCÏs dÛ¢'ˆwÜk w™h¿nsfÜm©iÚ oàrg‘s. Th»suÉ wÈbwrÚg!" << 
Endl
;

864 
	`Log
(è<< 
kWARNING
 << "MakeCÏs dÛ¢'ˆwÜk w™h¿nsfÜm©iÚ oà¥eù©Üs. Th»suÉ wÈbwrÚg!" << 
Endl
;

867 
	`Log
(è<< 
kFATAL
 << "V¬ŸbËT¿nsfÜmBa£/PutIÅuˆ: unknowÀty³ '" << 
ty³
 << "'." << 
Endl
;

871 
fout
 << " } " << 
¡d
::
’dl
;

872 
fout
 << 
¡d
::
’dl
;

874 }ifĞ
·¹
 == 1){

876 
	}
}

	@src/Volume.cxx

36 
	~"TMVA/VŞume.h
"

38 
	~"TMVA/MsgLogg”.h
"

39 
	~"TMVA/ToŞs.h
"

40 
	~"TMVA/Ty³s.h
"

42 
	~<¡dexû±
>

47 
	gTMVA
::
VŞume
::VŞumeĞ
¡d
::
veùÜ
<
DoubË_t
>* 
l
, std::veùÜ<DoubË_t>* 
u
 )

48 : 
fLow”
Ğ
l
 ),

49 
fUµ”
Ğ
u
 ),

50 
	$fOwÃrSh
 (
kFALSE
){

51 
	}
}

56 
	gTMVA
::
VŞume
::VŞumeĞ
¡d
::
veùÜ
<
Flßt_t
>* 
l
, std::veùÜ<Flßt_t>* 
u
 )

58 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
l
->
size
() );

59 
	gfUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
u
->
size
() );

60 
	gfOwÃrSh
 = 
kTRUE
;

62 
UIÁ_t
 
	giv¬
=0; iv¬<
	gl
->
size
(); ivar++) {

63 (*
	gfLow”
)[
iv¬
] = 
DoubË_t
((*
l
)[ivar]);

64 (*
	gfUµ”
)[
iv¬
] = 
DoubË_t
((*
u
)[ivar]);

71 
	gTMVA
::
VŞume
::
	$VŞume
Ğ
DoubË_t
* 
l
, DoubË_t* 
u
, 
IÁ_t
 
nv¬
 )

73 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
nv¬
 );

74 
fUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
nv¬
 );

75 
fOwÃrSh
 = 
kTRUE
;

77 
iv¬
=0; iv¬<
nv¬
; ivar++) {

78 (*
fLow”
)[
iv¬
] = 
l
[ivar];

79 (*
fUµ”
)[
iv¬
] = 
u
[ivar];

81 
	}
}

86 
	gTMVA
::
VŞume
::
	$VŞume
Ğ
Flßt_t
* 
l
, Flßt_t* 
u
, 
IÁ_t
 
nv¬
 )

88 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
nv¬
 );

89 
fUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ
nv¬
 );

90 
fOwÃrSh
 = 
kTRUE
;

92 
iv¬
=0; iv¬<
nv¬
; ivar++) {

93 (*
fLow”
)[
iv¬
] = 
	`DoubË_t
(
l
[ivar]);

94 (*
fUµ”
)[
iv¬
] = 
	`DoubË_t
(
u
[ivar]);

96 
	}
}

101 
	gTMVA
::
VŞume
::
	$VŞume
Ğ
DoubË_t
 
l
, DoubË_ˆ
u
 )

103 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>(1);

104 
fUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>(1);

105 
fOwÃrSh
 = 
kTRUE
;

106 (*
fLow”
)[0] = 
l
;

107 (*
fUµ”
)[0] = 
u
;

108 
	}
}

113 
	gTMVA
::
VŞume
::
	$VŞume
Ğ
Flßt_t
 
l
, Flßt_ˆ
u
 )

115 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>(1);

116 
fUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>(1);

117 
fOwÃrSh
 = 
kTRUE
;

118 (*
fLow”
)[0] = 
	`DoubË_t
(
l
);

119 (*
fUµ”
)[0] = 
	`DoubË_t
(
u
);

120 
	}
}

125 
	gTMVA
::
VŞume
::
	$VŞume
Ğ
VŞume
& 
V
 )

127 
fLow”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ*
V
.fLower );

128 
fUµ”
 = 
Ãw
 
¡d
::
veùÜ
<
DoubË_t
>Ğ*
V
.fUpper );

129 
fOwÃrSh
 = 
kTRUE
;

130 
	}
}

135 
	gTMVA
::
VŞume
::~
	$VŞume
( )

138 ià(
fOwÃrSh
è
this
->
	`D–‘e
();

139 
	}
}

144 
	gTMVA
::
VŞume
::
	$D–‘e
( )

146 ià(
NULL
 !ğ
fLow”
è{ 
d–‘e
 fLower; fLower = NULL; }

147 ià(
NULL
 !ğ
fUµ”
è{ 
d–‘e
 fUpper; fUpper = NULL; }

148 
	}
}

153 
	gTMVA
::
VŞume
::
	$SÿË
Ğ
DoubË_t
 
f
 )

155 
	`gToŞs
().
	`SÿË
(*
fLow”
,
f
);

156 
	`gToŞs
().
	`SÿË
(*
fUµ”
,
f
);

157 
	}
}

162 
	gTMVA
::
VŞume
::
	$SÿËIÁ”v®
Ğ
DoubË_t
 
f
 )

164 
UIÁ_t
 
iv¬
=0; iv¬<
fLow”
->
	`size
(); ivar++) {

165 
DoubË_t
 
lo
 = 0.5*((*
fLow”
)[
iv¬
]*(1.0 + 
f
è+ (*
fUµ”
)[ivar]*(1.0 - f));

166 
DoubË_t
 
up
 = 0.5*((*
fLow”
)[
iv¬
]*(1.0 - 
f
è+ (*
fUµ”
)[ivar]*(1.0 + f));

167 (*
fLow”
)[
iv¬
] = 
lo
;

168 (*
fUµ”
)[
iv¬
] = 
up
;

170 
	}
}

175 
	gTMVA
::
VŞume
::
	$Pršt
( ) const

177 
MsgLogg”
 
	`fLogg”
( "Volume" );

178 
UIÁ_t
 
iv¬
=0; iv¬<
fLow”
->
	`size
(); ivar++) {

179 
fLogg”
 << 
kINFO
 << "... VŞume: v¬: " << 
iv¬
 << "\t(fLower, fUpper) = ("

180 << (*
fLow”
)[
iv¬
] << "\ˆ" << (*
fUµ”
)[iv¬] <<")"<< 
Endl
;

182 
	}
}

	@test/DNN/DAE/TestDataLoader.cxx

16 
	~"Te¡D©aLßd”.h
"

17 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

20 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

22 
	$maš
() {

23 
‹¡D©aLßd”
<
TReã»nû
<
DoubË_t
>>();

24 
¡d
::
cout
 << "Testing„eference data†oader: Mex.„el.ƒrror = ";

25 
¡d
::
cout
 << std::
’dl
;

26 
	}
}

	@test/DNN/DAE/TestDenoiseAEProp.cxx

16 
	~<cm©h
>

17 
	~<io¡»am
>

19 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

20 
	~"TMVA/DNN/FunùiÚs.h
"

21 
	~"Te¡D’oi£AE.h
"

23 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

25 
usšg
 
	gM©rix_t
 = 
ty³Çme
 
TReã»nû
<>::
M©rix_t
;

27 
	$‹¡1
() {

28 
šputVeùÜ
[][10] =

124 
size_t
 
tÙ®RowsIÅut
 = (
šputVeùÜ
) / (inputVector[0]);

125 
size_t
 
tÙ®CŞumnsIÅut
 = (
šputVeùÜ
[0]) / (inputVector[0][0]);

126 
size_t
 
com´es£dUn™s
 = 5;

127 
cÜru±iÚLev–
 = 0.2;

128 
Ë¬nšgR©e
 = 0.1;

129 
size_t
 
fB©chSize
 = 
tÙ®RowsIÅut
;

131 
¡d
::
veùÜ
<
M©rix_t
> 
šput
;

132 
size_t
 
i
 = 0; i < 
tÙ®RowsIÅut
; i++) {

133 
šput
.
	`em¶aû_back
(
tÙ®CŞumnsIÅut
, 1);

136 
¡d
::
veùÜ
<
M©rix_t
> 
cÜru±edIÅut
;

137 
size_t
 
i
 = 0; i < 
tÙ®RowsIÅut
; i++) {

138 
cÜru±edIÅut
.
	`em¶aû_back
(
tÙ®CŞumnsIÅut
, 1);

141 
¡d
::
veùÜ
<
M©rix_t
> 
com´es£dIÅut
;

142 
size_t
 
i
 = 0; i < 
tÙ®RowsIÅut
; i++) {

143 
com´es£dIÅut
.
	`em¶aû_back
(
com´es£dUn™s
, 1);

146 
¡d
::
veùÜ
<
M©rix_t
> 
»cÚ¡ruùedIÅut
;

147 
size_t
 
i
 = 0; i < 
tÙ®RowsIÅut
; i++) {

148 
»cÚ¡ruùedIÅut
.
	`em¶aû_back
(
tÙ®CŞumnsIÅut
, 1);

151 
M©rix_t
 
	`Weights
(
com´es£dUn™s
, 
tÙ®CŞumnsIÅut
);

152 
	`¿ndomM©rix
(
Weights
);

154 
M©rix_t
 
	`fHBŸ£s
(
com´es£dUn™s
, 1);

155 
size_t
 
i
 = 0; i < (size_t)
fHBŸ£s
.
	`G‘Nrows
(); i++) {

156 
size_t
 
j
 = 0; j < (size_t)
fHBŸ£s
.
	`G‘NcŞs
(); j++) {

157 
	`fHBŸ£s
(
i
, 
j
) = 0;

161 
M©rix_t
 
	`fVBŸ£s
(
tÙ®CŞumnsIÅut
, 1);

162 
size_t
 
i
 = 0; i < (size_t)
fVBŸ£s
.
	`G‘Nrows
(); i++) {

163 
size_t
 
j
 = 0; j < (size_t)
fVBŸ£s
.
	`G‘NcŞs
(); j++) {

164 
	`fVBŸ£s
(
i
, 
j
) = 0;

168 
M©rix_t
 
	`VBŸsE¼Ü
(
tÙ®CŞumnsIÅut
, 1);

169 
M©rix_t
 
	`HBŸsE¼Ü
(
com´es£dUn™s
, 1);

183 
size_t
 
i
 = 0; i < 
tÙ®RowsIÅut
; i++) {

184 
size_t
 
j
 = 0; j < (size_t)
šput
[
i
].
	`G‘Nrows
(); j++) {

185 
size_t
 
k
 = 0; k < (size_t)
šput
[
i
].
	`G‘NcŞs
(); k++) {

186 
šput
[
i
](
j
, 
k
èğ
šputVeùÜ
[i][j];

197 
¡d
::
cout
 << "cÜru±šg iÅut" << std::
’dl
;

198 
‹¡CÜru±IÅut
<
TReã»nû
<>>(
šput
[
i
], 
cÜru±edIÅut
[i],

199 
cÜru±iÚLev–
);

201 
¡d
::
cout
 << "com´es£dIÅut" << std::
’dl
;

202 
‹¡EncodeIÅut
<
TReã»nû
<>>(
cÜru±edIÅut
[
i
], 
com´es£dIÅut
[i],

203 
Weights
);

205 
¡d
::
cout
 << "»cÚ¡ruùedIÅut" << std::
’dl
;

206 
‹¡RecÚ¡ruùIÅut
<
TReã»nû
<>>(
com´es£dIÅut
[
i
],

207 
»cÚ¡ruùedIÅut
[
i
], 
Weights
);

209 
¡d
::
cout
 << "Upd©šg weights" << std::
’dl
;

210 
‹¡Upd©eP¬am‘”
<
TReã»nû
<>>(

211 
šput
[
i
], 
cÜru±edIÅut
[i], 
com´es£dIÅut
[i], 
»cÚ¡ruùedIÅut
[i],

212 
fVBŸ£s
, 
fHBŸ£s
, 
Weights
, 
VBŸsE¼Ü
, 
HBŸsE¼Ü
, 
Ë¬nšgR©e
,

213 
fB©chSize
);

215 
	}
}

216 
	$maš
() {

217 
¡d
::
cout
 << "Te¡šg fÜ…rİag©iÚ" << std::
’dl
;

218 
	`‹¡1
();

219 
	}
}

	@test/DNN/DAE/TestLayer.cxx

12 
	~"Te¡Lay”.h
"

13 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

14 
	~<io¡»am
>

16 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

17 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maš
()

22 
¡d
::
cout
 << "Te¡šg s¹ed" << std::
’dl
;

24 
‹¡Lay”
<
TReã»nû
<>>();

26 
¡d
::
cout
 << "Te¡šg fÜ…¬am‘” upd©iÚ" << std::
’dl
;

27 
‹¡T¿ššg
<
TReã»nû
<>>();

29 
	}
}

	@test/DNN/DAE/TestLogistic.cxx

12 
	~"Te¡Logi¡ic.h
"

13 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

14 
	~<io¡»am
>

16 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

17 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maš
()

22 
¡d
::
cout
 << "Te¡šg s¹ed" << std::
’dl
;

24 
‹¡Logi¡ic
<
TReã»nû
<>>();

25 
¡d
::
cout
 << "T¿nsfÜm Lay”" << std::
’dl
;

29 
	}
}

	@test/DNN/DAE/TestLogisticRegressionLayer.cxx

17 
	~<io¡»am
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

21 
	~"TMVA/DNN/FunùiÚs.h
"

22 
	~"Te¡Logi¡icReg»ssiÚLay”.h
"

23 
	~"Te¡UtsAE.h
"

25 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

26 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

28 
usšg
 
	gM©rix_t
 = 
ty³Çme
 
TReã»nû
<>::
M©rix_t
;

30 
	$‹¡
()

32 
Œaš_X
[][6] = {

40 
Œaš_Y
[][2] = {

50 
‹¡_X
[][6] = {

56 
Ë¬nšgR©e
=0.1;

57 
size_t
 
fB©chSize
 =6;

58 
size_t
 
tÙ®RowsT¿šIÅut
ğ(
Œaš_X
)/(train_X[0]);

59 
size_t
 
tÙ®CŞumnsT¿šIÅut
 = (
Œaš_X
[0]) / (train_X[0][0]);

60 
¡d
::
cout
<<"T¿š iÅ "<<
tÙ®RowsT¿šIÅut
<<" "<<
tÙ®CŞumnsT¿šIÅut
<<¡d::
’dl
;

61 
¡d
::
veùÜ
<
M©rix_t
> 
T¿šX
;

62 
size_t
 
i
=0; i<
tÙ®RowsT¿šIÅut
;i++)

64 
T¿šX
.
	`em¶aû_back
(
tÙ®CŞumnsT¿šIÅut
,1);

66 
¡d
::
cout
<<"siz"<<
T¿šX
.
	`size
()<<¡d::
’dl
;

71 
size_t
 
tÙ®RowsT¿šOuut
ğ(
Œaš_Y
)/(train_Y[0]);

72 
size_t
 
tÙ®CŞumnsT¿šOuut
 = (
Œaš_Y
[0]) / (train_Y[0][0]);

73 
¡d
::
cout
<<"T¿š ouˆ"<<
tÙ®RowsT¿šOuut
<<" "<<
tÙ®CŞumnsT¿šOuut
<<¡d::
’dl
;

75 
¡d
::
veùÜ
<
M©rix_t
> 
T¿šY
;

76 
size_t
 
i
=0; i<
tÙ®RowsT¿šOuut
;i++)

78 
T¿šY
.
	`em¶aû_back
(
tÙ®CŞumnsT¿šOuut
,1);

80 
¡d
::
cout
<<"siz"<<
T¿šY
.
	`size
()<<¡d::
’dl
;

84 
size_t
 
tÙ®RowsTe¡IÅut
ğ(
‹¡_X
)/(test_X[0]);

85 
size_t
 
tÙ®CŞumnsTe¡IÅut
 = (
‹¡_X
[0]) / (test_X[0][0]);

86 
¡d
::
cout
<<"Te¡ IÅ "<<
tÙ®RowsTe¡IÅut
<<" "<<
tÙ®CŞumnsTe¡IÅut
<<¡d::
’dl
;

88 
¡d
::
veùÜ
<
M©rix_t
> 
Te¡X
;

89 
size_t
 
i
=0; i<
tÙ®RowsTe¡IÅut
;i++)

91 
Te¡X
.
	`em¶aû_back
(
tÙ®CŞumnsTe¡IÅut
,1);

93 
¡d
::
cout
<<"siz"<<
Te¡X
.
	`size
()<<¡d::
’dl
;

96 
size_t
 
tÙ®RowsTe¡Ouut
= 2;

97 
size_t
 
tÙ®CŞumnsTe¡Ouut
 = 2;

99 
¡d
::
veùÜ
<
M©rix_t
> 
Te¡Y
;

100 
size_t
 
i
=0; i<
tÙ®RowsTe¡Ouut
;i++)

102 
Te¡Y
.
	`em¶aû_back
(
tÙ®CŞumnsTe¡Ouut
,1);

104 
¡d
::
cout
<<"sizoà‹¡ ouˆ"<<
Te¡Y
.
	`size
()<<¡d::
’dl
;

107 
M©rix_t
 
	`p
(
tÙ®CŞumnsTe¡Ouut
,1);

108 
M©rix_t
 
	`difã»nû
(
tÙ®CŞumnsTe¡Ouut
,1);

109 
M©rix_t
 
	`Weights
(
tÙ®CŞumnsTe¡Ouut
,
tÙ®CŞumnsT¿šIÅut
);

110 
	`¿ndomM©rix
(
Weights
);

111 
¡d
::
cout
<<"Weight "<<
Weights
.
	`G‘Nrows
()<<" "<<Weights.
	`G‘NcŞs
()<<¡d::
’dl
;

122 
M©rix_t
 
	`BŸ£s
(
tÙ®CŞumnsTe¡Ouut
,1);

123 
size_t
 
•och
=0;epoch<1000;epoch++){

124 
size_t
 
i
=0; i<
tÙ®RowsT¿šIÅut
; i++)

126  
size_t
 
j
=0; j<(size_t)
T¿šX
[
i
].
	`G‘Nrows
(); j++)

128 
size_t
 
k
=0; k<(size_t)
T¿šX
[
i
].
	`G‘NcŞs
(); k++)

130 
T¿šX
[
i
](
j
,
k
èğ
Œaš_X
[i][j];

143 
¡d
::
cout
<<¡d::
’dl
;

144 
size_t
 
j
=0; j<(size_t)
T¿šY
[
i
].
	`G‘Nrows
(); j++)

146 
size_t
 
k
=0; k<(size_t)
T¿šY
[
i
].
	`G‘NcŞs
(); k++)

148 
T¿šY
[
i
](
j
,
k
èğ
Œaš_Y
[i][j];

162 
¡d
::
cout
<<"ü©šg… m©rix" << std::
’dl
;

163 
‹¡FÜw¬dLogReg
<
TReã»nû
<>>(
T¿šX
[
i
],
p
, 
Weights
);

165 
¡d
::
cout
<<"Addšg BŸ m©rixØgiv’ M©rix"<<¡d::
’dl
;

166 
‹¡AddBŸ£s
<
TReã»nû
<>>(
p
,
BŸ£s
);

168 
¡d
::
cout
<<¡d::
’dl
;

169 
¡d
::
cout
<<"Giv’ M©rix‡á” Soámax O³¿tiÚ"<<¡d::
’dl
;

170 
‹¡SoámaxAE
<
TReã»nû
<>>(
p
);

171 
¡d
::
cout
<<¡d::
’dl
;

173 
¡d
::
cout
<<"upd©šg…¬am‘”s" << std::
’dl
;

174 
‹¡Upd©eP¬amsLogReg
<
TReã»nû
<>>(
T¿šX
[
i
],
T¿šY
[i], 
difã»nû
,
p
,

175 
Weights
,
BŸ£s
,
Ë¬nšgR©e
,
fB©chSize
);

181 
¡d
::
cout
<<"ouut"<<¡d::
’dl
;

182 
size_t
 
i
=0;i<
tÙ®RowsTe¡Ouut
;i++)

184 
size_t
 
j
=0;j<(size_t)
Te¡X
[
i
].
	`G‘Nrows
();j++)

186 
size_t
 
k
=0;k<(size_t)
Te¡X
[
i
].
	`G‘NcŞs
();k++)

188 
Te¡X
[
i
](
j
,
k
)=
‹¡_X
[i][j];

191 
¡d
::
cout
<<"´ediùšg" << std::
’dl
;

192 
‹¡FÜw¬dLogReg
<
TReã»nû
<>>(
Te¡X
[
i
],
Te¡Y
[i], 
Weights
);

193 
¡d
::
cout
<<"Addšg BŸ m©rixØgiv’ M©rix"<<¡d::
’dl
;

194 
‹¡AddBŸ£s
<
TReã»nû
<>>(
Te¡Y
[
i
],
BŸ£s
);

196 
¡d
::
cout
<<¡d::
’dl
;

197 
¡d
::
cout
<<"Giv’ M©rix‡á” Soámax O³¿tiÚ"<<¡d::
’dl
;

198 
‹¡SoámaxAE
<
TReã»nû
<>>(
Te¡Y
[
i
]);

199 
¡d
::
cout
<<¡d::
’dl
;

201 
	}
}

202 
	$maš
()

204 
	`‹¡
();

205 
	}
}

	@test/DNN/DAE/TestStackedLayers.cxx

12 
	~"Te¡SckedLay”s.h
"

13 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

14 
	~<io¡»am
>

16 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

17 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

19 
	$maš
()

22 
¡d
::
cout
 << "Te¡šg s¹ed" << std::
’dl
;

24 
‹¡Scked
<
TReã»nû
<>>();

29 
	}
}

	@test/DNN/DAE/TestTransformLayer.cxx

17 
	~<io¡»am
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

21 
	~"Te¡T¿nsfÜmLay”.h
"

23 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

77 
usšg
 
	gM©rix_t
 = 
ty³Çme
 
TReã»nû
<>::
M©rix_t
;

79 
	$maš
()

84 
¡d
::
cout
<<"Te¡šg¿nsfÜm Lay”"<<¡d::
’dl
<<std::endl;

85 
M©rix_t
 
	`A
(6,1);

86 
A
=(
‹¡T¿nsfÜm
<
TReã»nû
<>>());

88 
¡d
::
cout
<< "Te¡šg¿nsfÜm: "<<¡d::
’dl
;

90 
size_t
 
m
,
n
;

91 
m
=
A
.
	`G‘Nrows
();

92 
n
=
A
.
	`G‘NcŞs
();

93 
size_t
 
i
; i<
m
;i++)

95 
size_t
 
j
;j<
n
;j++)

97 
¡d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

99 
¡d
::
cout
<<¡d::
’dl
;

101 
	}
}

	@test/DNN/DAE/TestUtilsAE.cxx

17 
	~<io¡»am
>

18 
	~<cm©h
>

20 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

21 
	~"TMVA/DNN/FunùiÚs.h
"

22 
	~"Te¡UtsAE.h
"

24 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

25 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
::
DAE
;

27 
usšg
 
	gM©rix_t
 = 
ty³Çme
 
TReã»nû
<>::
M©rix_t
;

29 
	$‹¡1
()

31 
M©rix_t
 
	`A
(5,1);

32 
	`¿ndomM©rix
(
A
);

34 
¡d
::
cout
<<"Giv’ M©rix"<<¡d::
’dl
;

35 
size_t
 
i
=0; i < (size_t)
A
.
	`G‘Nrows
(); i++)

37 
size_t
 
j
=0; j < (size_tè
A
.
	`G‘NcŞs
();j++)

39 
¡d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

41 
¡d
::
cout
<<¡d::
’dl
;

43 
¡d
::
cout
<<¡d::
’dl
;

45 
M©rix_t
 
	`BŸ£s
(5,1);

46 
	`¿ndomM©rix
(
BŸ£s
);

48 
¡d
::
cout
<<"BŸ M©rix"<<¡d::
’dl
;

49 
size_t
 
i
=0; i < (size_t)
BŸ£s
.
	`G‘Nrows
(); i++)

51 
size_t
 
j
=0; j < (size_tè
BŸ£s
.
	`G‘NcŞs
();j++)

53 
¡d
::
cout
<<
	`BŸ£s
(
i
,
j
)<<"\t";

55 
¡d
::
cout
<<¡d::
’dl
;

57 
¡d
::
cout
<<¡d::
’dl
;

59 
¡d
::
cout
<<"Addšg BŸ m©rixØgiv’ M©rix"<<¡d::
’dl
;

60 
‹¡AddBŸ£s
<
TReã»nû
<>>(
A
,
BŸ£s
);

61 
¡d
::
cout
<<¡d::
’dl
;

62 
¡d
::
cout
<<"Giv’ M©rix‡á” Soámax O³¿tiÚ"<<¡d::
’dl
;

63 
‹¡SoámaxAE
<
TReã»nû
<>>(
A
);

64 
¡d
::
cout
<<¡d::
’dl
;

65 
	}
}

66 
	$‹¡2
()

68 
M©rix_t
 
	`A
(5,4);

69 
	`¿ndomM©rix
(
A
);

71 
¡d
::
cout
<<"Giv’ M©rix"<<¡d::
’dl
;

72 
size_t
 
i
=0; i < (size_t)
A
.
	`G‘Nrows
(); i++)

74 
size_t
 
j
=0; j < (size_tè
A
.
	`G‘NcŞs
();j++)

76 
¡d
::
cout
<<
	`A
(
i
,
j
)<<"\t";

78 
¡d
::
cout
<<¡d::
’dl
;

80 
¡d
::
cout
<<¡d::
’dl
;

82 
M©rix_t
 
	`BŸ£s
(5,1);

83 
	`¿ndomM©rix
(
BŸ£s
);

85 
¡d
::
cout
<<"BŸ M©rix"<<¡d::
’dl
;

86 
size_t
 
i
=0; i < (size_t)
BŸ£s
.
	`G‘Nrows
(); i++)

88 
size_t
 
j
=0; j < (size_tè
BŸ£s
.
	`G‘NcŞs
();j++)

90 
¡d
::
cout
<<
	`BŸ£s
(
i
,
j
)<<"\t";

92 
¡d
::
cout
<<¡d::
’dl
;

94 
¡d
::
cout
<<¡d::
’dl
;

96 
¡d
::
cout
<<"Giv’ M©rix‡á” Soámax O³¿tiÚ"<<¡d::
’dl
;

97 
‹¡SoámaxAE
<
TReã»nû
<>>(
A
);

98 
¡d
::
cout
<<¡d::
’dl
;

100 
¡d
::
cout
<<"Addšg BŸ m©rixØgiv’ M©rix"<<¡d::
’dl
;

101 
‹¡AddBŸ£s
<
TReã»nû
<>>(
A
,
BŸ£s
);

102 
¡d
::
cout
<<¡d::
’dl
;

105 
	}
}

107 
	$maš
()

109 
	`‹¡1
();

110 
	`‹¡2
();

111 
	}
}

	@test/DNN/TestActivationFunctions.cxx

17 
	~<io¡»am
>

18 
	~"Te¡Aùiv©iÚFunùiÚs.h
"

20 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

22 
	$maš
()

24 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

25 
¡d
::
cout
 << "Te¡šg Aùiv©iÚ FunùiÚs:" << std::
’dl
;

27 
SÿÏr_t
 
”rÜ
;

31 
”rÜ
 = 
‹¡Id’t™y
<
TReã»nû
<
SÿÏr_t
>>(10);

32 
¡d
::
cout
 << "Testing identity‡ctivation: ";

33 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

34 ià(
”rÜ
 > 1e-10)

37 
”rÜ
 = 
‹¡Id’t™yD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

38 
¡d
::
cout
 << "Testing identity‡ctivation derivative: ";

39 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

40 ià(
”rÜ
 > 1e-10)

45 
”rÜ
 = 
‹¡R–u
<
TReã»nû
<
SÿÏr_t
>>(10);

46 
¡d
::
cout
 << "Testing ReLU‡ctivation: ";

47 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

48 ià(
”rÜ
 > 1e-10)

51 
”rÜ
 = 
‹¡R–uD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

52 
¡d
::
cout
 << "Testing ReLU‡ctivation derivative: ";

53 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

54 ià(
”rÜ
 > 1e-10)

59 
”rÜ
 = 
‹¡Sigmoid
<
TReã»nû
<
SÿÏr_t
>>(10);

60 
¡d
::
cout
 << "Testing Sigmoid‡ctivation: ";

61 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

62 ià(
”rÜ
 > 1e-10)

65 
”rÜ
 = 
‹¡SigmoidD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

66 
¡d
::
cout
 << "Testing Sigmoid‡ctivation derivative: ";

67 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

68 ià(
”rÜ
 > 1e-10)

73 
”rÜ
 = 
‹¡Tªh
<
TReã»nû
<
SÿÏr_t
>>(10);

74 
¡d
::
cout
 << "Testing TanH‡ctivation: ";

75 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

76 ià(
”rÜ
 > 1e-10)

79 
”rÜ
 = 
‹¡TªhD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

80 
¡d
::
cout
 << "Testing TanH‡ctivation derivative: ";

81 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

82 ià(
”rÜ
 > 1e-10)

87 
”rÜ
 = 
‹¡Symm‘ricR–uD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

88 
¡d
::
cout
 << "Testing Symm. ReLU‡ctivation: ";

89 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

90 ià(
”rÜ
 > 1e-10)

93 
”rÜ
 = 
‹¡Symm‘ricR–uD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

94 
¡d
::
cout
 << "Testing Symm. ReLU‡ctivation derivative: ";

95 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

96 ià(
”rÜ
 > 1e-10)

101 
”rÜ
 = 
‹¡SoáSign
<
TReã»nû
<
SÿÏr_t
>>(10);

102 
¡d
::
cout
 << "Testing Soft Sign‡ctivation: ";

103 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

104 ià(
”rÜ
 > 1e-10)

107 
”rÜ
 = 
‹¡SoáSignD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

108 
¡d
::
cout
 << "Testing Soft Sign‡ctivation derivative: ";

109 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

110 ià(
”rÜ
 > 1e-10)

115 
”rÜ
 = 
‹¡Gauss
<
TReã»nû
<
SÿÏr_t
>>(10);

116 
¡d
::
cout
 << "Testing Gauss‡ctivation: ";

117 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

118 ià(
”rÜ
 > 1e-10)

121 
”rÜ
 = 
‹¡GaussD”iv©ive
<
TReã»nû
<
SÿÏr_t
>>(10);

122 
¡d
::
cout
 << "Testing Gauss‡ctivation derivative: ";

123 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

124 ià(
”rÜ
 > 1e-10)

128 
	}
}

	@test/DNN/TestActivationFunctionsCpu.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

19 
	~"Ut™y.h
"

20 
	~"Te¡Aùiv©iÚFunùiÚs.h
"

22 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
	$maš
()

26 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

28 
¡d
::
cout
 << "Te¡šg Aùiv©iÚ FunùiÚs:" << std::
’dl
;

30 
”rÜ
;

34 
”rÜ
 = 
‹¡Id’t™y
<
TCpu
<
SÿÏr_t
>>(10);

35 
¡d
::
cout
 << "Testing identity‡ctivation: ";

36 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

37 ià(
”rÜ
 > 1e-10)

40 
”rÜ
 = 
‹¡Id’t™yD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

41 
¡d
::
cout
 << "Testing identity‡ctivation derivative: ";

42 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

43 ià(
”rÜ
 > 1e-10)

48 
”rÜ
 = 
‹¡R–u
<
TCpu
<
SÿÏr_t
>>(10);

49 
¡d
::
cout
 << "Testing ReLU‡ctivation: ";

50 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

51 ià(
”rÜ
 > 1e-10)

54 
”rÜ
 = 
‹¡R–uD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

55 
¡d
::
cout
 << "Testing ReLU‡ctivation derivative: ";

56 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

57 ià(
”rÜ
 > 1e-10)

62 
”rÜ
 = 
‹¡Sigmoid
<
TCpu
<
SÿÏr_t
>>(10);

63 
¡d
::
cout
 << "Testing Sigmoid‡ctivation: ";

64 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

65 ià(
”rÜ
 > 1e-10)

68 
”rÜ
 = 
‹¡SigmoidD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

69 
¡d
::
cout
 << "Testing Sigmoid‡ctivation derivative: ";

70 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

71 ià(
”rÜ
 > 1e-10)

76 
”rÜ
 = 
‹¡Tªh
<
TCpu
<
SÿÏr_t
>>(10);

77 
¡d
::
cout
 << "Testing TanH‡ctivation: ";

78 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

79 ià(
”rÜ
 > 1e-10)

82 
”rÜ
 = 
‹¡TªhD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

83 
¡d
::
cout
 << "Testing TanH‡ctivation derivative: ";

84 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

85 ià(
”rÜ
 > 1e-10)

90 
”rÜ
 = 
‹¡Symm‘ricR–u
<
TCpu
<
SÿÏr_t
>>(10);

91 
¡d
::
cout
 << "Testing Symm. ReLU‡ctivation: ";

92 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

93 ià(
”rÜ
 > 1e-10)

96 
”rÜ
 = 
‹¡Symm‘ricR–uD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

97 
¡d
::
cout
 << "Testing Symm. ReLU‡ctivation derivative: ";

98 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

99 ià(
”rÜ
 > 1e-10)

104 
”rÜ
 = 
‹¡SoáSign
<
TCpu
<
SÿÏr_t
>>(10);

105 
¡d
::
cout
 << "Testing Soft Sign‡ctivation: ";

106 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

107 ià(
”rÜ
 > 1e-10)

110 
”rÜ
 = 
‹¡SoáSignD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

111 
¡d
::
cout
 << "Testing Soft Sign‡ctivation derivative: ";

112 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

113 ià(
”rÜ
 > 1e-10)

118 
”rÜ
 = 
‹¡Gauss
<
TCpu
<
SÿÏr_t
>>(10);

119 
¡d
::
cout
 << "Testing Gauss‡ctivation: ";

120 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

121 ià(
”rÜ
 > 1e-10)

124 
”rÜ
 = 
‹¡GaussD”iv©ive
<
TCpu
<
SÿÏr_t
>>(10);

125 
¡d
::
cout
 << "Testing Gauss‡ctivation derivative: ";

126 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

127 ià(
”rÜ
 > 1e-10)

131 
	}
}

	@test/DNN/TestActivationFunctionsCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

19 
	~"Ut™y.h
"

20 
	~"Te¡Aùiv©iÚFunùiÚs.h
"

22 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
	$maš
()

26 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

28 
¡d
::
cout
 << "Te¡šg Aùiv©iÚ FunùiÚs:" << std::
’dl
;

30 
”rÜ
;

34 
”rÜ
 = 
‹¡Id’t™y
<
TCuda
<
SÿÏr_t
>>(10);

35 
¡d
::
cout
 << "Testing identity‡ctivation: ";

36 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

37 ià(
”rÜ
 > 1e-5)

40 
”rÜ
 = 
‹¡Id’t™yD”iv©ive
<
TCuda
<
SÿÏr_t
>>(10);

41 
¡d
::
cout
 << "Testing identity‡ctivation derivative: ";

42 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

43 ià(
”rÜ
 > 1e-5)

48 
”rÜ
 = 
‹¡R–u
<
TCuda
<
SÿÏr_t
>>(10);

49 
¡d
::
cout
 << "Testing ReLU‡ctivation: ";

50 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

51 ià(
”rÜ
 > 1e-5)

54 
”rÜ
 = 
‹¡R–uD”iv©ive
<
TCuda
<
SÿÏr_t
>>(10);

55 
¡d
::
cout
 << "Testing ReLU‡ctivation derivative: ";

56 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

57 ià(
”rÜ
 > 1e-5)

62 
”rÜ
 = 
‹¡Sigmoid
<
TCuda
<
SÿÏr_t
>>(10);

63 
¡d
::
cout
 << "Testing Sigmoid‡ctivation: ";

64 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

65 ià(
”rÜ
 > 1e-5)

68 
”rÜ
 = 
‹¡SigmoidD”iv©ive
<
TCuda
<
SÿÏr_t
>>(10);

69 
¡d
::
cout
 << "Testing Sigmoid‡ctivation derivative: ";

70 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

71 ià(
”rÜ
 > 1e-5)

74 
	}
}

	@test/DNN/TestBackpropagation.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~"Te¡Back´İag©iÚ.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
¡d
::
cout
 << "Te¡šg Back´İag©iÚ:" << std::
’dl
;

27 
”rÜ
;

33 
”rÜ
 = 
‹¡Back´İag©iÚWeightsLš—r
<
TReã»nû
<>>(1.0);

34 ià(
”rÜ
 > 1e-3)

37 
”rÜ
 = 
‹¡Back´İag©iÚL1ReguÏriz©iÚ
<
TReã»nû
<>>(1e-2);

38 ià(
”rÜ
 > 1e-3)

41 
”rÜ
 = 
‹¡Back´İag©iÚL2ReguÏriz©iÚ
<
TReã»nû
<>>(1.0);

42 ià(
”rÜ
 > 1e-3)

45 
”rÜ
 = 
‹¡Back´İag©iÚBŸ£sLš—r
<
TReã»nû
<>>(1.0);

46 ià(
”rÜ
 > 1e-3)

50 
	}
}

	@test/DNN/TestBackpropagationCpu.cxx

17 
	~"TM©rix.h
"

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

19 
	~"Te¡Back´İag©iÚ.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

26 
¡d
::
cout
 << "Te¡šg Back´İag©iÚ:" << std::
’dl
;

28 
”rÜ
;

29 
œ‘
 = 0;

31 
”rÜ
 = 
‹¡Back´İag©iÚWeightsLš—r
<
TCpu
<
SÿÏr_t
>>(1.0);

32 ià(
”rÜ
 > 1e-3)

33 
œ‘
++;

35 
”rÜ
 = 
‹¡Back´İag©iÚL1ReguÏriz©iÚ
<
TCpu
<
SÿÏr_t
>>(1e-2);

36 ià(
”rÜ
 > 1e-3)

37 
œ‘
++;

39 
”rÜ
 = 
‹¡Back´İag©iÚL2ReguÏriz©iÚ
<
TCpu
<
SÿÏr_t
>>(1.0);

40 ià(
”rÜ
 > 1e-3)

41 
œ‘
++;

43 
”rÜ
 = 
‹¡Back´İag©iÚBŸ£sLš—r
<
TCpu
<
SÿÏr_t
>>(1.0);

44 ià(
”rÜ
 > 1e-3)

45 
œ‘
++;

47  
œ‘
;

48 
	}
}

	@test/DNN/TestBackpropagationCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

19 
	~"TM©rix.h
"

20 
	~"Te¡Back´İag©iÚ.h
"

22 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
	$maš
()

26 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

28 
¡d
::
cout
 << "Te¡šg Back´İag©iÚ:" << std::
’dl
;

29 
”rÜ
;

30 
”rÜ
 = 
‹¡Back´İag©iÚWeightsLš—r
<
TCuda
<
SÿÏr_t
>>(1.0);

31 ià(
”rÜ
 > 1e-3)

33 
”rÜ
 = 
‹¡Back´İag©iÚL1ReguÏriz©iÚ
<
TCuda
<
SÿÏr_t
>>(1e-2);

34 ià(
”rÜ
 > 1e-3)

36 
”rÜ
 = 
‹¡Back´İag©iÚL2ReguÏriz©iÚ
<
TCuda
<
SÿÏr_t
>>(1.0);

37 ià(
”rÜ
 > 1e-3)

39 
”rÜ
 = 
‹¡Back´İag©iÚBŸ£sLš—r
<
TCuda
<
SÿÏr_t
>>(1.0);

40 ià(
”rÜ
 > 1e-3)

43 
	}
}

	@test/DNN/TestCuda.cxx

1 
	~"Ut™y.h
"

2 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

3 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

4 
	~<¡dlib.h
>

6 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

9 
DoubË_t
 
	$‹¡MuÉly
()

11 cÚ¡ 
size_t
 
Áe¡s
 = 100;

13 
DoubË_t
 
maximumE¼Ü
 = 0;

15 
size_t
 
i
 = 0; i < 
Áe¡s
; i++) {

16 
size_t
 
m
, 
n
, 
k
;

17 
m
 = 
	`¿nd
() % 50 + 1;

18 
n
 = 
	`¿nd
() % 50 + 1;

19 
k
 = 
	`¿nd
() % 50 + 1;

21 
TM©rixT
<
DoubË_t
> 
	`A
(
m
,
k
), 
	`AT
(k,mè, 
	`B
(k,
n
), 
	`BT
Ò,k), 
	`C
(m,n);

22 
	`¿ndomM©rix
(
A
);

23 
	`¿ndomM©rix
(
AT
);

24 
	`¿ndomM©rix
(
B
);

25 
	`¿ndomM©rix
(
BT
);

26 
TCudaM©rix
 
	`ACuda
(
A
), 
	`ATCuda
(
AT
), 
	`BCuda
(
B
), 
	`BTCuda
(
BT
), 
	`CCuda
(
C
);

28 
TReã»nû
<
DoubË_t
>::
	`MuÉlyT¿n¥o£
(
C
, 
A
, 
BT
);

29 
TCuda
<
çl£
>::
	`MuÉlyT¿n¥o£
(
CCuda
, 
ACuda
, 
BTCuda
);

30 
TM©rixT
<
DoubË_t
> 
	`CRef
(
CCuda
);

31 
DoubË_t
 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
C
, 
CRef
);

32 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

34 
C
.
	`MuÉ
(
A
,
B
);

35 
TCuda
<
çl£
>::
	`MuÉly
(
CCuda
, 
ACuda
, 
BCuda
);

36 
CRef
 = 
CCuda
;

37 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
C
, 
CRef
);

38 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

40 
C
.
	`TMuÉ
(
AT
,
B
);

41 
TCuda
<
çl£
>::
	`T¿n¥o£MuÉly
(
CCuda
, 
ATCuda
, 
BCuda
);

42 
CRef
 = 
CCuda
;

43 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
C
, 
CRef
);

44 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

46  
maximumE¼Ü
;

47 
	}
}

50 
DoubË_t
 
	$‹¡AddRowWi£
()

52 cÚ¡ 
size_t
 
Áe¡s
 = 10;

54 
DoubË_t
 
maximumE¼Ü
 = 0;

56 
size_t
 
i
 = 0; i < 
Áe¡s
; i++) {

57 
size_t
 
m
, 
n
;

58 
m
 = 
	`¿nd
() % 50 + 1;

59 
n
 = 
	`¿nd
() % 50 + 1;

61 
TM©rixT
<
DoubË_t
> 
	`A
(
m
,
n
), 
	`B
(m,n), 
	`th‘a
(n,1);

63 
	`¿ndomM©rix
(
th‘a
);

64 
TCudaM©rix
 
	`ACuda
(
A
), 
	`BCuda
(
B
), 
	`th‘aCuda
(
th‘a
);

66 
TReã»nû
<
DoubË_t
>::
	`AddRowWi£
(
A
, 
th‘a
);

67 
TCuda
<
çl£
>::
	`AddRowWi£
(
ACuda
,
th‘aCuda
);

68 
TM©rixT
<
DoubË_t
> 
	`ARef
(
ACuda
);

70 
DoubË_t
 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
A
, 
ARef
);

71 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

73  
maximumE¼Ü
;

74 
	}
}

77 
DoubË_t
 
	$‹¡Hadam¬d
()

79 cÚ¡ 
size_t
 
Áe¡s
 = 10;

80 
DoubË_t
 
maximumE¼Ü
 = 0;

82 
size_t
 
i
 = 0; i < 
Áe¡s
; i++) {

83 
size_t
 
m
, 
n
;

84 
m
 = 
	`¿nd
() % 10 + 1;

85 
n
 = 
	`¿nd
() % 10 + 1;

87 
TM©rixT
<
DoubË_t
> 
	`A
(
m
,
n
), 
	`B
(m,n);

88 
	`¿ndomM©rix
(
A
);

89 
	`¿ndomM©rix
(
B
);

90 
TCudaM©rix
 
	`ACuda
(
A
), 
	`BCuda
(
B
);

92 
size_t
 
j
 = 0; j < (size_tè
A
.
	`G‘Nrows
(); j++) {

93 
size_t
 
k
 = 0; k < (size_tè
A
.
	`G‘NcŞs
(); k++) {

94 
	`A
(
j
,
k
è*ğ
	`B
(j,k);

98 
TCuda
<
çl£
>::
	`Hadam¬d
(
ACuda
, 
BCuda
);

99 
TM©rixT
<
DoubË_t
> 
	`ARef
(
ACuda
);

100 
DoubË_t
 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
A
, 
ARef
);

101 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

103  
maximumE¼Ü
;

104 
	}
}

107 
DoubË_t
 
	$‹¡ReduùiÚ
()

109 cÚ¡ 
size_t
 
Áe¡s
 = 10;

110 
DoubË_t
 
maximumE¼Ü
 = 0;

112 
size_t
 
i
 = 0; i < 
Áe¡s
; i++) {

113 
size_t
 
m
, 
n
;

114 
m
 = 
	`¿nd
() % 1000 + 1;

115 
n
 = 
	`¿nd
() % 1000 + 1;

117 
TM©rixT
<
DoubË_t
> 
	`A
(
m
,
n
);

119 
size_t
 
j
 = 0; j < 
m
; j++) {

120 
size_t
 
k
 = 0; k < 
n
; k++) {

121 
	`A
(
j
,
k
) = 1.0;

124 
TCudaM©rix
 
	`ACuda
(
A
);

126 
TCudaM©rix
 
	`BCuda
(1,
n
);

127 
TCuda
<
çl£
>::
	`In™ŸlizeZ”o
(
BCuda
);

128 
DoubË_t
 
s
 = 
TCuda
<
çl£
>::
	`Sum
(
A
);

129 
TCuda
<
çl£
>::
	`SumCŞumns
(
BCuda
, 
ACuda
);

130 
TM©rixT
<
DoubË_t
> 
	`B
(
BCuda
);

132 
DoubË_t
 
”rÜ
 = 
s
 - ((DoubË_tè
m
 * 
n
);

133 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

135 
size_t
 
j
 = 0; j < 
n
; j++) {

137 
”rÜ
 = 
¡d
::
	`abs
(
	`B
(0,
j
è- 
m
);

138 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

141  
maximumE¼Ü
;

142 
	}
}

145 
DoubË_t
 
	$‹¡SÿËAdd
()

147 cÚ¡ 
size_t
 
Áe¡s
 = 10;

148 
DoubË_t
 
maximumE¼Ü
 = 0;

150 
size_t
 
i
 = 0; i < 
Áe¡s
; i++) {

151 
size_t
 
m
, 
n
;

152 
m
 = 
	`¿nd
() % 1000 + 1;

153 
n
 = 
	`¿nd
() % 1000 + 1;

155 
TM©rixT
<
DoubË_t
> 
	`A
(
m
,
n
), 
	`B
(m,n);

157 
	`¿ndomM©rix
(
A
);

158 
	`¿ndomM©rix
(
B
);

160 
TCudaM©rix
 
	`ACuda
(
A
);

161 
TCudaM©rix
 
	`BCuda
(
B
);

163 
DoubË_t
 
b‘a
 = ((DoubË_tè
	`¿nd
()è/ ((DoubË_tè
RAND_MAX
);

164 
TReã»nû
<
DoubË_t
>::
	`SÿËAdd
(
A
, 
B
, 
b‘a
);

165 
TCuda
<
çl£
>::
	`SÿËAdd
(
ACuda
, 
BCuda
, 
b‘a
);

167 
DoubË_t
 
”rÜ
 = 
	`maximumR–©iveE¼Ü
(
A
, (
TM©rixT
<DoubË_t>è
ACuda
);

168 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

170  
maximumE¼Ü
;

171 
	}
}

174 
	$maš
()

176 
DoubË_t
 
”rÜ
;

177 
”rÜ
 = 
	`‹¡ReduùiÚ
();

178 
¡d
::
cout
 << "Testing„eduction: max.„el.ƒrror = ";

179 
¡d
::
cout
 << 
”rÜ
 << std::
’dl
;

181 
”rÜ
 = 
	`‹¡SÿËAdd
();

182 
¡d
::
cout
 << "Testing scale_add: max.„el.ƒrror = ";

183 
¡d
::
cout
 << 
”rÜ
 << std::
’dl
;

185 
”rÜ
 = 
	`‹¡Hadam¬d
();

186 
¡d
::
cout
 << "Testing hadamard: max.„el.ƒrror = ";

187 
¡d
::
cout
 << 
”rÜ
 << std::
’dl
;

189 
”rÜ
 = 
	`‹¡MuÉly
();

190 
¡d
::
cout
 << "Testing multiplication: max.„el.ƒrror = ";

191 
¡d
::
cout
 << 
”rÜ
 << std::
’dl
;

193 
”rÜ
 = 
	`‹¡AddRowWi£
();

194 
¡d
::
cout
 << "Testing‡dd_row_wise: max.„el.ƒrror = ";

195 
¡d
::
cout
 << 
”rÜ
 << std::
’dl
;

196 
	}
}

	@test/DNN/TestDataLoader.cxx

16 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

17 
	~"Te¡D©aLßd”.h
"

19 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

21 
	$maš
 ()

23 
DoubË_t
 
”rÜ
 = 
‹¡Id’t™y
<
TReã»nû
<Double_t>>();

24 
¡d
::
cout
 << "Te¡šg„eã»nû d©¨lßd”: Mex.„–.ƒ¼Ü = " << 
”rÜ
;

25 
¡d
::
cout
 << std::
’dl
;

26 
	}
}

	@test/DNN/TestDataLoaderCpu.cxx

16 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

17 
	~"Te¡D©aLßd”.h
"

19 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

21 
	$maš
 ()

23 
usšg
 
SÿÏr_t
 = 
R—l_t
;

25 
¡d
::
cout
 << "Te¡šg d©¨lßd”:" << std::
’dl
;

27 
SÿÏr_t
 
maximumE¼Ü
 = 0.0;

29 
SÿÏr_t
 
”rÜ
 = 
‹¡Sum
<
TCpu
<Scalar_t>>();

30 
¡d
::
cout
 << "Sum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

31 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

32 
”rÜ
 = 
‹¡Id’t™y
<
TCpu
<
SÿÏr_t
>>();

33 
¡d
::
cout
 << "Id’t™y: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

34 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

36 ià(
maximumE¼Ü
 > 1e-3) {

39 
	}
}

	@test/DNN/TestDataLoaderCuda.cxx

16 
	~<io¡»am
>

17 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

18 
	~"Te¡D©aLßd”.h
"

20 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

22 
	$maš
()

24 
¡d
::
cout
 << "Te¡šg d©¨lßd”:" << std::
’dl
;

25 
usšg
 
SÿÏr_t
 = 
R—l_t
;

27 
SÿÏr_t
 
maximumE¼Ü
 = 0.0;

29 
SÿÏr_t
 
”rÜ
 = 
‹¡Sum
<
TCuda
<Scalar_t>>();

30 
¡d
::
cout
 << "Sum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

31 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

32 
”rÜ
 = 
‹¡Id’t™y
<
TCuda
<
SÿÏr_t
>>();

33 
¡d
::
cout
 << "Id’t™y: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

34 
maximumE¼Ü
 = 
¡d
::
	`max
(
”rÜ
, maximumError);

36 ià(
maximumE¼Ü
 > 1e-3) {

40 
	}
}

	@test/DNN/TestDerivatives.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~"Te¡D”iv©ives.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

26 
”rÜ
;

32 
¡d
::
cout
 << "Aùiv©iÚ FunùiÚs:" << std::
’dl
;

33 
”rÜ
 = 
‹¡Aùiv©iÚFunùiÚD”iv©ives
<
TReã»nû
<>>();

34 
¡d
::
cout
 << "Total : ";

35 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
	`´št_”rÜ
(
”rÜ
);

36 
¡d
::
cout
 << std::
’dl
 << std::endl;

37 ià(
”rÜ
 > 1e-5)

44 
¡d
::
cout
 << "Los FunùiÚs:" << std::
’dl
;

45 
”rÜ
 = 
‹¡LossFunùiÚG¿d›Ás
<
TReã»nû
<>>();

46 
¡d
::
cout
 << "Total : ";

47 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
	`´št_”rÜ
(
”rÜ
);

48 
¡d
::
cout
 << std::
’dl
 << std::endl;

49 ià(
”rÜ
 > 1e-5)

56 
¡d
::
cout
 << "ReguÏriz©iÚ:" << std::
’dl
;

57 
”rÜ
 = 
‹¡ReguÏriz©iÚG¿d›Ás
<
TReã»nû
<>>();

58 
¡d
::
cout
 << "Total : ";

59 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
	`´št_”rÜ
(
”rÜ
);

60 
¡d
::
cout
 << std::
’dl
 << std::endl;

61 ià(
”rÜ
 > 1e-5)

65 
	}
}

	@test/DNN/TestDerivativesCpu.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

19 
	~"Te¡D”iv©ives.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

27 
”rÜ
;

33 
¡d
::
cout
 << "Aùiv©iÚ FunùiÚs:" << std::
’dl
;

34 
”rÜ
 = 
‹¡Aùiv©iÚFunùiÚD”iv©ives
<
TCpu
<
SÿÏr_t
>>();

35 
¡d
::
cout
 << "Total : ";

36 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

37 
¡d
::
cout
 << std::
’dl
 << std::endl;

38 ià(
”rÜ
 > 1e-3)

45 
¡d
::
cout
 << "Los FunùiÚs:" << std::
’dl
;

46 
”rÜ
 = 
‹¡LossFunùiÚG¿d›Ás
<
TCpu
<
SÿÏr_t
>>();

47 
¡d
::
cout
 << "Total : ";

48 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

49 
¡d
::
cout
 << std::
’dl
 << std::endl;

50 ià(
”rÜ
 > 1e-3)

57 
¡d
::
cout
 << "ReguÏriz©iÚ:" << std::
’dl
;

58 
”rÜ
 = 
‹¡ReguÏriz©iÚG¿d›Ás
<
TCpu
<
SÿÏr_t
>>();

59 
¡d
::
cout
 << "Total : ";

60 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

61 
¡d
::
cout
 << std::
’dl
 << std::endl;

62 ià(
”rÜ
 > 1e-3)

66 
	}
}

	@test/DNN/TestDerivativesCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

19 
	~"Te¡D”iv©ives.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

26 
DoubË_t
 
”rÜ
;

32 
¡d
::
cout
 << "Aùiv©iÚ FunùiÚs:" << std::
’dl
;

33 
”rÜ
 = 
‹¡Aùiv©iÚFunùiÚD”iv©ives
<
TCuda
<
SÿÏr_t
>>();

34 
¡d
::
cout
 << "Total : ";

35 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

36 
¡d
::
cout
 << std::
’dl
 << std::endl;

37 ià(
”rÜ
 > 1e-2)

44 
¡d
::
cout
 << "Los FunùiÚs:" << std::
’dl
;

45 
”rÜ
 = 
‹¡LossFunùiÚG¿d›Ás
<
TCuda
<
SÿÏr_t
>>();

46 
¡d
::
cout
 << "Total : ";

47 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

48 
¡d
::
cout
 << std::
’dl
 << std::endl;

49 ià(
”rÜ
 > 1e-3)

56 
¡d
::
cout
 << "ReguÏriz©iÚ:" << std::
’dl
;

57 
”rÜ
 = 
‹¡ReguÏriz©iÚG¿d›Ás
<
TCuda
<
SÿÏr_t
>>();

58 
¡d
::
cout
 << "Total : ";

59 
¡d
::
cout
 << "Maximum R–©ivE¼Ü = " << 
”rÜ
;

60 
¡d
::
cout
 << std::
’dl
 << std::endl;

61 ià(
”rÜ
 > 1e-3)

65 
	}
}

	@test/DNN/TestLossFunctions.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~"Te¡LossFunùiÚs.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
¡d
::
cout
 << "Te¡šg Los FunùiÚs:" << std::
’dl
 << std::endl;

27 
”rÜ
;

33 
”rÜ
 = 
‹¡M—nSqu¬edE¼Ü
<
TReã»nû
<>>(10);

34 
¡d
::
cout
 << "Testing mean squaredƒrror†oss: ";

35 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

36 ià(
”rÜ
 > 1e-10)

39 
”rÜ
 = 
‹¡M—nSqu¬edE¼ÜG¿d›Ás
<
TReã»nû
<>>(10);

40 
¡d
::
cout
 << "Testing mean squaredƒrror gradient: ";

41 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

42 ià(
”rÜ
 > 1e-10)

49 
”rÜ
 = 
‹¡CrossEÁrİy
<
TReã»nû
<>>(10);

50 
¡d
::
cout
 << "Testing crossƒntropy†oss: ";

51 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

52 ià(
”rÜ
 > 1e-10)

55 
”rÜ
 = 
‹¡CrossEÁrİyG¿d›Ás
<
TReã»nû
<>>(10);

56 
¡d
::
cout
 << "Testing crossƒntropy gradient: ";

57 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

58 ià(
”rÜ
 > 1e-10)

60 
	}
}

	@test/DNN/TestLossFunctionsCpu.cxx

18 
	~<io¡»am
>

19 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

20 
	~"Te¡LossFunùiÚs.h
"

22 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

24 
	$maš
()

26 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

28 
¡d
::
cout
 << "Te¡šg Los FunùiÚs:" << std::
’dl
 << std::endl;

30 
”rÜ
;

36 
”rÜ
 = 
‹¡M—nSqu¬edE¼Ü
<
TCpu
<
SÿÏr_t
>>(10);

37 
¡d
::
cout
 << "Testing mean squaredƒrror†oss: ";

38 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

39 ià(
”rÜ
 > 1e-3)

42 
”rÜ
 = 
‹¡M—nSqu¬edE¼ÜG¿d›Ás
<
TCpu
<
SÿÏr_t
>>(10);

43 
¡d
::
cout
 << "Testing mean squaredƒrror gradient: ";

44 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

45 ià(
”rÜ
 > 1e-3)

52 
”rÜ
 = 
‹¡CrossEÁrİy
<
TCpu
<
SÿÏr_t
>>(10);

53 
¡d
::
cout
 << "Testing crossƒntropy†oss: ";

54 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

55 ià(
”rÜ
 > 1e-3)

58 
”rÜ
 = 
‹¡CrossEÁrİyG¿d›Ás
<
TCpu
<
SÿÏr_t
>>(10);

59 
¡d
::
cout
 << "Testing mean squaredƒrror gradient: ";

60 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

61 ià(
”rÜ
 > 1e-3)

68 
”rÜ
 = 
‹¡SoámaxCrossEÁrİy
<
TCpu
<
SÿÏr_t
>>(10);

69 
¡d
::
cout
 << "Testing softmax crossƒntropy†oss: ";

70 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

71 ià(
”rÜ
 > 1e-3)

74 
”rÜ
 = 
‹¡SoámaxCrossEÁrİyG¿d›Ás
<
TCpu
<
SÿÏr_t
>>(10);

75 
¡d
::
cout
 << "Testing softmax crossƒntropy gradient: ";

76 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

77 ià(
”rÜ
 > 1e-3)

79 
	}
}

	@test/DNN/TestLossFunctionsCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

19 
	~"Te¡LossFunùiÚs.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
usšg
 
SÿÏr_t
 = 
DoubË_t
;

26 
¡d
::
cout
 << "Te¡šg Los FunùiÚs:" << std::
’dl
 << std::endl;

28 
”rÜ
;

34 
”rÜ
 = 
‹¡M—nSqu¬edE¼Ü
<
TCuda
<
SÿÏr_t
>>(10);

35 
¡d
::
cout
 << "Testing mean squaredƒrror†oss: ";

36 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

37 ià(
”rÜ
 > 1e-3)

40 
”rÜ
 = 
‹¡M—nSqu¬edE¼ÜG¿d›Ás
<
TCuda
<
SÿÏr_t
>>(10);

41 
¡d
::
cout
 << "Testing mean squaredƒrror gradient: ";

42 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

43 ià(
”rÜ
 > 1e-3)

50 
”rÜ
 = 
‹¡CrossEÁrİy
<
TCuda
<
SÿÏr_t
>>(10);

51 
¡d
::
cout
 << "Testing crossƒntropy†oss: ";

52 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

53 ià(
”rÜ
 > 1e-3)

56 
”rÜ
 = 
‹¡CrossEÁrİyG¿d›Ás
<
TCuda
<
SÿÏr_t
>>(10);

57 
¡d
::
cout
 << "Testing mean squaredƒrror gradient: ";

58 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

59 ià(
”rÜ
 > 1e-3)

66 
”rÜ
 = 
‹¡SoámaxCrossEÁrİy
<
TCuda
<
SÿÏr_t
>>(10);

67 
¡d
::
cout
 << "Testing softmax crossƒntropy†oss: ";

68 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

69 ià(
”rÜ
 > 1e-3)

72 
”rÜ
 = 
‹¡SoámaxCrossEÁrİyG¿d›Ás
<
TCuda
<
SÿÏr_t
>>(10);

73 
¡d
::
cout
 << "Testing softmax crossƒntropy gradient: ";

74 
¡d
::
cout
 << "maximum„–©iv”rÜ = " << 
	`´št_”rÜ
(
”rÜ
è<< std::
’dl
;

75 ià(
”rÜ
 > 1e-3)

77 
	}
}

	@test/DNN/TestMatrixArithmeticCpu.cxx

16 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

17 
	~"Te¡M©rixAr™hm‘ic.h
"

19 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

21 
	$maš
()

23 
¡d
::
cout
 << "Te¡šg CPU m©rix‡r™hm‘iø(doubË):" << std::
’dl
;

25 
DoubË_t
 
”rÜ
 = 
‹¡MuÉliÿtiÚ
<
TCpu
<Double_t>>(10);

26 
¡d
::
cout
 << "MuÉliÿtiÚ: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

27 ià(
”rÜ
 > 1e-3)

30 
”rÜ
 = 
‹¡SumCŞumns
<
TCpu
<
DoubË_t
>>(1);

31 
¡d
::
cout
 << "CŞumÀSum: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

32 ià(
”rÜ
 > 1e-3)

35 
¡d
::
cout
 << "Te¡šg CPU m©rix‡r™hm‘iø(æßt):" << std::
’dl
;

37 
”rÜ
 = 
‹¡MuÉliÿtiÚ
<
TCpu
<
R—l_t
>>(10);

38 
¡d
::
cout
 << "MuÉliÿtiÚ: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

39 ià(
”rÜ
 > 1e-1)

42 
”rÜ
 = 
‹¡SumCŞumns
<
TCpu
<
R—l_t
>>(1);

43 
¡d
::
cout
 << "CŞumÀSum: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

44 ià(
”rÜ
 > 1e-1)

46 
	}
}

	@test/DNN/TestMatrixArithmeticCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

19 
	~"Te¡M©rixAr™hm‘ic.h
"

21 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

23 
	$maš
()

25 
¡d
::
cout
 << "Te¡šg CUDA m©rix‡r™hm‘iø(doubË):" << std::
’dl
;

27 
DoubË_t
 
”rÜ
 = 
‹¡MuÉliÿtiÚ
<
TCuda
<Double_t>>(10);

28 
¡d
::
cout
 << "MuÉliÿtiÚ: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

29 ià(
”rÜ
 > 1e-3)

32 
”rÜ
 = 
‹¡SumCŞumns
<
TCuda
<
DoubË_t
>>(1);

33 
¡d
::
cout
 << "CŞumÀSum: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

34 ià(
”rÜ
 > 1e-3)

37 
¡d
::
cout
 << "Te¡šg CUDA m©rix‡r™hm‘iø(æßt):" << std::
’dl
;

39 
”rÜ
 = 
‹¡MuÉliÿtiÚ
<
TCuda
<
R—l_t
>>(10);

40 
¡d
::
cout
 << "MuÉliÿtiÚ: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

41 ià(
”rÜ
 > 1)

44 
”rÜ
 = 
‹¡SumCŞumns
<
TCuda
<
R—l_t
>>(1);

45 
¡d
::
cout
 << "CŞumÀSum: " << "Max.„–.ƒ¼Ü: " << 
”rÜ
 << std::
’dl
;

46 ià(
”rÜ
 > 1e-3)

48 
	}
}

	@test/DNN/TestMinimization.cxx

20 
	~<io¡»am
>

21 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

22 
	~"Te¡Mšimiz©iÚ.h
"

24 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

26 
	$maš
()

28 
‹¡Mšimiz©iÚ
<
TReã»nû
<>>();

29 
	}
}

	@test/DNN/TestMinimizationCpu.cxx

19 
	~<io¡»am
>

20 
	~"TMVA/DNN/Arch™eùu»s/Cpu.h
"

21 
	~"Te¡Mšimiz©iÚ.h
"

23 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

25 
	$maš
()

28 
¡d
::
cout
 << "Te¡šg mšimiz©iÚ: (sšgË…»cisiÚ)" << std::
’dl
;

30 
DoubË_t
 
”rÜ
 = 
‹¡Mšimiz©iÚ
<
TCpu
<
R—l_t
>>();

31 
¡d
::
cout
 << "G¿d›Á DesûÁ: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

32 ià(
”rÜ
 > 1e-3) {

36 
”rÜ
 = 
‹¡Mšimiz©iÚMom’tum
<
TCpu
<
R—l_t
>>();

37 
¡d
::
cout
 << "Mom’tum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

38 ià(
”rÜ
 > 1e-3) {

41 
¡d
::
cout
 << std::
’dl
 << "Testing minimization: (double…recision)" << std::endl;

43 
”rÜ
 = 
‹¡Mšimiz©iÚ
<
TCpu
<
DoubË_t
>>();

44 
¡d
::
cout
 << "G¿d›Á DesûÁ: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

45 ià(
”rÜ
 > 1e-5) {

49 
”rÜ
 = 
‹¡Mšimiz©iÚMom’tum
<
TCpu
<
DoubË_t
>>();

50 
¡d
::
cout
 << "Mom’tum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

51 ià(
”rÜ
 > 1e-5) {

55 
	}
}

	@test/DNN/TestMinimizationCuda.cxx

17 
	~<io¡»am
>

18 
	~"TMVA/DNN/Arch™eùu»s/Reã»nû.h
"

19 
	~"TMVA/DNN/Arch™eùu»s/Cuda.h
"

20 
	~"TMVA/DNN/Mšimiz”s.h
"

21 
	~"Te¡Mšimiz©iÚ.h
"

23 
usšg
 
Çme¥aû
 
	gTMVA
::
DNN
;

25 
	$maš
()

27 
¡d
::
cout
 << "Te¡šg mšimiz©iÚ: (sšgË…»cisiÚ)" << std::
’dl
;

29 
DoubË_t
 
”rÜ
 = 
‹¡Mšimiz©iÚ
<
TCuda
<
R—l_t
>>();

30 
¡d
::
cout
 << "G¿d›Á DesûÁ: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

31 ià(
”rÜ
 > 1) {

35 
”rÜ
 = 
‹¡Mšimiz©iÚMom’tum
<
TCuda
<
R—l_t
>>();

36 
¡d
::
cout
 << "Mom’tum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

37 ià(
”rÜ
 > 1) {

40 
¡d
::
cout
 << std::
’dl
 << "Testing minimization: (double…recision)" << std::endl;

42 
”rÜ
 = 
‹¡Mšimiz©iÚ
<
TCuda
<
DoubË_t
>>();

43 
¡d
::
cout
 << "G¿d›Á DesûÁ: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

44 ià(
”rÜ
 > 1e-3) {

48 
”rÜ
 = 
‹¡Mšimiz©iÚMom’tum
<
TCuda
<
DoubË_t
>>();

49 
¡d
::
cout
 << "Mom’tum: Maximum„–©iv”rÜ = " << 
”rÜ
 << std::
’dl
;

50 ià(
”rÜ
 > 1e-3) {

53 
	}
}

	@/usr/include/assert.h

23 #ifdef 
_ASSERT_H


25 #undeà
_ASSERT_H


26 #undeà
as£¹


27 #undeà
__ASSERT_VOID_CAST


29 #ifdef 
__USE_GNU


30 #undeà
as£¹_³¼Ü


35 
	#_ASSERT_H
 1

	)

36 
	~<ã©u»s.h
>

38 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

39 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

41 
	#__ASSERT_VOID_CAST
 ()

	)

49 #ifdef 
NDEBUG


51 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

59 #ifdef 
__USE_GNU


60 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

65 
__BEGIN_DECLS


68 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

69 
__lše
, cÚ¡ *
__funùiÚ
)

70 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

73 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

74 
__lše
, cÚ¡ *
__funùiÚ
)

75 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

80 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

81 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

84 
__END_DECLS


86 
	#as£¹
(
ex´
) \

87 ((
ex´
) \

88 ? 
	`__ASSERT_VOID_CAST
 (0) \

89 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

91 #ifdef 
__USE_GNU


92 
	#as£¹_³¼Ü
(
”ºum
) \

93 (!(
”ºum
) \

94 ? 
	`__ASSERT_VOID_CAST
 (0) \

95 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

103 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

104 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

106 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

107 
	#__ASSERT_FUNCTION
 
__func__


	)

109 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

116 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


118 #undeà
¡©ic_as£¹


119 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/math.h

24 #iâdef 
_MATH_H


25 
	#_MATH_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 
	~<b™s/huge_v®.h
>

34 #ifdeà
__USE_ISOC99


35 
	~<b™s/huge_v®f.h
>

36 
	~<b™s/huge_v®l.h
>

39 
	~<b™s/šf.h
>

42 
	~<b™s/Çn.h
>

46 
	~<b™s/m©hdef.h
>

53 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

54 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

55 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

56 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

57 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

58 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

59 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

60 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

61 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

62 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

63 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

64 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

66 
	#_MdoubË_
 

	)

67 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

68 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

69 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

70 
	~<b™s/m©hÿÎs.h
>

71 #undeà
_MdoubË_


72 #undeà
_MdoubË_BEGIN_NAMESPACE


73 #undeà
_MdoubË_END_NAMESPACE


74 #undeà
__MATH_PRECNAME


76 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


82 #iâdeà
_Mæßt_


83 
	#_Mæßt_
 

	)

85 
	#_MdoubË_
 
_Mæßt_


	)

86 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

87 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

88 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

89 
	~<b™s/m©hÿÎs.h
>

90 #undeà
_MdoubË_


91 #undeà
_MdoubË_BEGIN_NAMESPACE


92 #undeà
_MdoubË_END_NAMESPACE


93 #undeà
__MATH_PRECNAME


95 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

96 || 
defšed
 
__LDBL_COMPAT


97 #ifdeà
__LDBL_COMPAT


99 #ifdeà
__USE_ISOC99


100 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

101 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

102 #ifdeà
__REDIRECT_NTH


103 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

104 
__Ædbl_Ãx‰ow¬df
)

105 
	`__©Œibu‹__
 ((
__cÚ¡__
));

106 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

107 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

108 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

109 (
__x
, 
__y
),

110 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

114 #undeà
__MATHDECL_1


115 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

116 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

117 
¬gs
, 
®Ÿs
)

	)

118 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

119 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

125 #iâdeà
_MlÚg_doubË_


126 
	#_MlÚg_doubË_
 

	)

128 
	#_MdoubË_
 
_MlÚg_doubË_


	)

129 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

130 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

131 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

132 
	#__MATH_DECLARE_LDOUBLE
 1

	)

133 
	~<b™s/m©hÿÎs.h
>

134 #undeà
_MdoubË_


135 #undeà
_MdoubË_BEGIN_NAMESPACE


136 #undeà
_MdoubË_END_NAMESPACE


137 #undeà
__MATH_PRECNAME


142 #undeà
__MATHDECL_1


143 #undeà
__MATHDECL


144 #undeà
__MATHCALL


147 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


149 
signgam
;

154 #ifdeà
__USE_ISOC99


192 
FP_NAN
 =

193 
	#FP_NAN
 0

	)

194 
FP_NAN
,

195 
FP_INFINITE
 =

196 
	#FP_INFINITE
 1

	)

197 
FP_INFINITE
,

198 
FP_ZERO
 =

199 
	#FP_ZERO
 2

	)

200 
FP_ZERO
,

201 
FP_SUBNORMAL
 =

202 
	#FP_SUBNORMAL
 3

	)

203 
FP_SUBNORMAL
,

204 
FP_NORMAL
 =

205 
	#FP_NORMAL
 4

	)

206 
FP_NORMAL


210 #ifdeà
__NO_LONG_DOUBLE_MATH


211 
	#åşassify
(
x
) \

212 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

214 
	#åşassify
(
x
) \

215 ( (
x
) ==  () \

216 ? 
	`__åşassifyf
 (
x
) \

217 :  (
x
) ==  () \

218 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

222 #ifdeà
__NO_LONG_DOUBLE_MATH


223 
	#signb™
(
x
) \

224 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

226 
	#signb™
(
x
) \

227 ( (
x
) ==  () \

228 ? 
	`__signb™f
 (
x
) \

229 :  (
x
) ==  () \

230 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

234 #ifdeà
__NO_LONG_DOUBLE_MATH


235 
	#isfš™e
(
x
) \

236 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

238 
	#isfš™e
(
x
) \

239 ( (
x
) ==  () \

240 ? 
	`__fš™ef
 (
x
) \

241 :  (
x
) ==  () \

242 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

246 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

250 #ifdeà
__NO_LONG_DOUBLE_MATH


251 
	#i¢ª
(
x
) \

252 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

254 
	#i¢ª
(
x
) \

255 ( (
x
) ==  () \

256 ? 
	`__i¢ªf
 (
x
) \

257 :  (
x
) ==  () \

258 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

262 #ifdeà
__NO_LONG_DOUBLE_MATH


263 
	#isšf
(
x
) \

264 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

266 
	#isšf
(
x
) \

267 ( (
x
) ==  () \

268 ? 
	`__isšff
 (
x
) \

269 :  (
x
) ==  () \

270 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

274 
	#MATH_ERRNO
 1

	)

275 
	#MATH_ERREXCEPT
 2

	)

280 #iâdeà
__FAST_MATH__


281 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

286 #ifdef 
__USE_MISC


290 
_IEEE_
 = -1,

291 
_SVID_
,

292 
_XOPEN_
,

293 
_POSIX_
,

294 
_ISOC_


295 } 
	t_LIB_VERSION_TYPE
;

300 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

304 #ifdeà
__USE_SVID


310 #ifdeà
__ılu¥lus


311 
__exû±iÚ


313 
exû±iÚ


316 
ty³
;

317 *
Çme
;

318 
¬g1
;

319 
¬g2
;

320 
»tv®
;

321 
	}
};

323 #ifdeà
__ılu¥lus


324 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

326 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

329 
	#X_TLOSS
 1.41484755040568800000e+16

	)

332 
	#DOMAIN
 1

	)

333 
	#SING
 2

	)

334 
	#OVERFLOW
 3

	)

335 
	#UNDERFLOW
 4

	)

336 
	#TLOSS
 5

	)

337 
	#PLOSS
 6

	)

340 
	#HUGE
 3.40282347e+38F

	)

344 #ifdeà
__USE_XOPEN


346 
	#MAXFLOAT
 3.40282347e+38F

	)

353 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


354 
	#M_E
 2.7182818284590452354

	)

355 
	#M_LOG2E
 1.4426950408889634074

	)

356 
	#M_LOG10E
 0.43429448190325182765

	)

357 
	#M_LN2
 0.69314718055994530942

	)

358 
	#M_LN10
 2.30258509299404568402

	)

359 
	#M_PI
 3.14159265358979323846

	)

360 
	#M_PI_2
 1.57079632679489661923

	)

361 
	#M_PI_4
 0.78539816339744830962

	)

362 
	#M_1_PI
 0.31830988618379067154

	)

363 
	#M_2_PI
 0.63661977236758134308

	)

364 
	#M_2_SQRTPI
 1.12837916709551257390

	)

365 
	#M_SQRT2
 1.41421356237309504880

	)

366 
	#M_SQRT1_2
 0.70710678118654752440

	)

372 #ifdeà
__USE_GNU


373 
	#M_El
 2.718281828459045235360287471352662498L

	)

374 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

375 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

376 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

377 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

378 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

379 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

380 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

381 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

382 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

383 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

384 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

385 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

392 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


393 
	#__NO_MATH_INLINES
 1

	)

396 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

403 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

404 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

405 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

406 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

407 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

408 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

412 #ifdeà
__USE_EXTERN_INLINES


413 
	~<b™s/m©hšlše.h
>

418 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

419 
	~<b™s/m©h-fš™e.h
>

422 #ifdeà
__USE_ISOC99


426 #iâdeà
isg»©”


427 
	#isg»©”
(
x
, 
y
) \

428 (
__ex‹nsiÚ__
 \

429 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

430 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

434 #iâdeà
isg»©”equ®


435 
	#isg»©”equ®
(
x
, 
y
) \

436 (
__ex‹nsiÚ__
 \

437 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

438 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

442 #iâdeà
i¦ess


443 
	#i¦ess
(
x
, 
y
) \

444 (
__ex‹nsiÚ__
 \

445 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

446 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

450 #iâdeà
i¦es£qu®


451 
	#i¦es£qu®
(
x
, 
y
) \

452 (
__ex‹nsiÚ__
 \

453 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

454 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

458 #iâdeà
i¦essg»©”


459 
	#i¦essg»©”
(
x
, 
y
) \

460 (
__ex‹nsiÚ__
 \

461 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

462 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

466 #iâdeà
isunÜd”ed


467 
	#isunÜd”ed
(
u
, 
v
) \

468 (
__ex‹nsiÚ__
 \

469 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

470 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

475 
	g__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__a
;

422 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

423 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

424 
	$”ªd48_r
 (
__xsubi
[3],

425 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

426 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

429 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

430 *
__»¡riù
 
__»suÉ
)

431 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

432 
	$Äªd48_r
 (
__xsubi
[3],

433 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

434 *
__»¡riù
 
__»suÉ
)

435 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

439 *
__»¡riù
 
__»suÉ
)

440 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

441 
	$j¿nd48_r
 (
__xsubi
[3],

442 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

443 *
__»¡riù
 
__»suÉ
)

444 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

448 
__THROW
 
	`__nÚnuÎ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$lcÚg48_r
 (
__·¿m
[7],

454 
d¿nd48_d©a
 *
__bufãr
)

455 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

461 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


462 
	#__m®loc_ªd_ÿÎoc_defšed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

467 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

468 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

482 
	$ä“
 (*
__±r
è
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$cä“
 (*
__±r
è
__THROW
;

490 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


491 
	~<®loÿ.h
>

494 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

495 || 
defšed
 
__USE_BSD


497 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

500 #ifdeà
__USE_XOPEN2K


502 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

503 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

506 #ifdeà
__USE_ISOC11


508 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

509 
__THROW
 
__wur
 
	`__©Œibu‹__
 ((
__m®loc__
, 
	`__®loc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

518 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

520 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


522 #ifdeà
__ılu¥lus


523 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

526 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

535 
__THROW
 
	`__nÚnuÎ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

544 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


548 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

550 
__END_NAMESPACE_STD


552 #ifdeà
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

564 
__END_NAMESPACE_STD


566 #ifdeà
__USE_GNU


569 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

570 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

573 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


577 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

580 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


583 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

584 
__THROW
 
	`__nÚnuÎ
 ((2));

587 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$ş—»nv
 (è
__THROW
;

598 #ià
defšed
 
__USE_MISC
 \

599 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

605 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

609 || 
defšed
 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

760 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

761 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

762 #ifdeà
__USE_GNU


763 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

764 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

765 
	`__nÚnuÎ
 ((1, 4));

770 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

771 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

772 
__END_NAMESPACE_STD


774 #ifdeà
__USE_ISOC99


775 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

776 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__num”
, 
__d’om
)

785 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

787 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

793 
__d’om
)

794 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

795 
__END_NAMESPACE_C99


799 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

800 || 
defšed
 
__USE_SVID


807 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

808 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

813 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

814 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

819 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

820 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

823 #ifdeà
__USE_MISC


825 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

826 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

827 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

828 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

829 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

830 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

831 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

832 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

837 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

838 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

839 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

841 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

842 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

845 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

846 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

847 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

863 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

866 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

870 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

871 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

873 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

874 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifdeà
__USE_SVID


884 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

888 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


895 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

896 *cÚ¡ *
__»¡riù
 
__tok’s
,

897 **
__»¡riù
 
__v®u•
)

898 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

902 #ifdeà
__USE_XOPEN


904 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

910 #ifdeà
__USE_XOPEN2KXSI


912 
	$posix_İ’±
 (
__oæag
è
__wur
;

915 #ifdeà
__USE_XOPEN


920 
	$g¿Á±
 (
__fd
è
__THROW
;

924 
	$uÆock±
 (
__fd
è
__THROW
;

929 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

932 #ifdeà
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

937 
__THROW
 
	`__nÚnuÎ
 ((2));

940 
	`g‘±
 ();

943 #ifdeà
__USE_BSD


947 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

948 
__THROW
 
	`__nÚnuÎ
 ((1));

951 
	~<b™s/¡dlib-æßt.h
>

954 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


955 
	~<b™s/¡dlib.h
>

957 #ifdeà
__LDBL_COMPAT


958 
	~<b™s/¡dlib-ldbl.h
>

962 #undeà
__Ãed_m®loc_ªd_ÿÎoc


964 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

69 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

74 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 #ifdeà
__OPTIMIZE__


78 
__ex‹º_®ways_šlše
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


81  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

84 
__ex‹º_®ways_šlše
 const *

85 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


87  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifdeà
__USE_GNU


100 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

128 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

129 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

137 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

151 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
 
	`__nÚnuÎ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifdeà
__USE_XOPEN2K8


159 
	~<xloÿË.h
>

162 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

163 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

165 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

166 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

169 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

170 || 
defšed
 
__USE_XOPEN2K8


172 *
	$¡rdup
 (cÚ¡ *
__s
)

173 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

179 #ià
defšed
 
__USE_XOPEN2K8


180 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

181 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

184 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


186 
	#¡rdu·
(
s
) \

187 (
__ex‹nsiÚ__
 \

189 cÚ¡ *
__Şd
 = (
s
); \

190 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

191 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

192 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

193 
	}
}))

	)

196 
	#¡ºdu·
(
s
, 
n
) \

197 (
__ex‹nsiÚ__
 \

199 cÚ¡ *
__Şd
 = (
s
); \

200 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

201 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

202 
__Ãw
[
__Ën
] = '\0'; \

203 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
¡rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

214 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

217 #ifdeà
__OPTIMIZE__


218 
__ex‹º_®ways_šlše
 *

219 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


221  
__butš_¡rchr
 (
__s
, 
__c
);

224 
__ex‹º_®ways_šlše
 const *

225 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


227  
__butš_¡rchr
 (
__s
, 
__c
);

232 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

233 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

236 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`¡¼chr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

241 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

244 #ifdeà
__OPTIMIZE__


245 
__ex‹º_®ways_šlše
 *

246 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


248  
	`__butš_¡¼chr
 (
__s
, 
__c
);

251 
__ex‹º_®ways_šlše
 const *

252 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


254  
	`__butš_¡¼chr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

260 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifdeà
__USE_GNU


267 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

270 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

274 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

282 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

285 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

292 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

293 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

294 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

296 #ifdeà
__OPTIMIZE__


297 
__ex‹º_®ways_šlše
 *

298 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


300  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

303 
__ex‹º_®ways_šlše
 const *

304 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


306  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

309 
	}
}

311 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

312 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

315 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

319 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

320 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

321 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

323 #ifdeà
__OPTIMIZE__


324 
__ex‹º_®ways_šlše
 *

325 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


327  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

330 
__ex‹º_®ways_šlše
 const *

331 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


333  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

336 
	}
}

338 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

339 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

344 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

345 
__THROW
 
	`__nÚnuÎ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

351 cÚ¡ *
__»¡riù
 
__d–im
,

352 **
__»¡riù
 
__§ve_±r
)

353 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

354 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


355 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

360 #ifdeà
__USE_GNU


362 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

364 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

365 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

366 cÚ¡ *
__ÃedË
)

367 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

370 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

374 #ifdeà
__USE_GNU


378 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

379 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

380 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

384 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

385 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

386 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

387 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

388 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

389 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

396 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

403 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

410 
__END_NAMESPACE_STD


411 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


419 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


422 #ifdeà
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

424 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

425 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

427 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

428 
__THROW
 
	`__nÚnuÎ
 ((2));

429 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

434 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

435 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

439 #ifdeà
__USE_XOPEN2K8


441 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

447 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

449 #ifdeà
__USE_BSD


451 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

452 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

455 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

458 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

462 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`šdex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

467 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

470 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__ex‹º_®ways_šlše
 *

472 
	`šdex
 (*
__s
, 
__c
è
__THROW


474  
	`__butš_šdex
 (
__s
, 
__c
);

477 
__ex‹º_®ways_šlše
 const *

478 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


480  
	`__butš_šdex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

486 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

490 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`ršdex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

495 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

498 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__ex‹º_®ways_šlše
 *

500 
	`ršdex
 (*
__s
, 
__c
è
__THROW


502  
	`__butš_ršdex
 (
__s
, 
__c
);

505 
__ex‹º_®ways_šlše
 const *

506 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


508  
	`__butš_ršdex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

514 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

519 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

523 #ifdef 
__USE_GNU


524 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

525 #ifdeà
__GNUC__


526 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

527 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

532 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

533 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

536 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

544 
__loÿË_t
 
__loc
)

545 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

547 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

548 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

549 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

556 cÚ¡ *
__»¡riù
 
__d–im
)

557 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

565 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

566 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

567 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

572 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

573 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

575 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

576 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

583 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

586 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

589 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #iâdeà
ba£Çme


596 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£Çme
 (*
__f’ame
)

598 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

599 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

602 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

609 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

610 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


630 
	~<b™s/¡ršg.h
>

633 
	~<b™s/¡ršg2.h
>

636 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


638 
	~<b™s/¡ršg3.h
>

642 
__END_DECLS


	@/usr/include/tbb/tbb.h

29 #iâdeà
__TBB_tbb_H


30 
	#__TBB_tbb_H


	)

40 #ià
TBB_PREVIEW_AGGREGATOR


41 
	~"agg»g©Ü.h
"

43 
	~"®igÃd_¥aû.h
"

44 
	~"©omic.h
"

45 
	~"blocked_¿nge.h
"

46 
	~"blocked_¿nge2d.h
"

47 
	~"blocked_¿nge3d.h
"

48 
	~"ÿche_®igÃd_®loÿtÜ.h
"

49 
	~"combšabË.h
"

50 
	~"cÚcu¼’t_unÜd”ed_m­.h
"

51 
	~"cÚcu¼’t_hash_m­.h
"

52 
	~"cÚcu¼’t_queue.h
"

53 
	~"cÚcu¼’t_veùÜ.h
"

54 
	~"ü™iÿl_£ùiÚ.h
"

55 
	~"’um”abË_th»ad_¥ecific.h
"

56 
	~"mu‹x.h
"

57 
	~"nuÎ_mu‹x.h
"

58 
	~"nuÎ_rw_mu‹x.h
"

59 
	~"·¿Î–_do.h
"

60 
	~"·¿Î–_fÜ.h
"

61 
	~"·¿Î–_fÜ_—ch.h
"

62 
	~"·¿Î–_švoke.h
"

63 
	~"·¿Î–_»duû.h
"

64 
	~"·¿Î–_sÿn.h
"

65 
	~"·¿Î–_sÜt.h
"

66 
	~"·¹™iÚ”.h
"

67 
	~"p–še.h
"

68 
	~"queušg_mu‹x.h
"

69 
	~"queušg_rw_mu‹x.h
"

70 
	~"»ad”_wr™”_lock.h
"

71 
	~"cÚcu¼’t_´iÜ™y_queue.h
"

72 
	~"»cursive_mu‹x.h
"

73 
	~"¥š_mu‹x.h
"

74 
	~"¥š_rw_mu‹x.h
"

75 
	~"sk.h
"

76 
	~"sk_group.h
"

77 
	~"sk_scheduËr_š™.h
"

78 
	~"sk_scheduËr_ob£rv”.h
"

79 
	~"tbb_®loÿtÜ.h
"

80 
	~"tbb_exû±iÚ.h
"

81 
	~"tbb_th»ad.h
"

82 
	~"tick_couÁ.h
"

	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

635 #iâdeà
__FAVOR_BSD


636 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

638 #ifdeà
__REDIRECT_NTH


639 
__pid_t
 
	`__REDIRECT_NTH
 (
g‘pg½
, (__pid_ˆ
__pid
), 
__g‘pgid
);

641 
	#g‘pg½
 
__g‘pgid


	)

646 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

647 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


648 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

655 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

657 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


668 #iâdeà
__FAVOR_BSD


672 
	$£g½
 (è
__THROW
;

677 #ifdeà
__REDIRECT_NTH


678 
	`__REDIRECT_NTH
 (
£g½
, (
__pid_t
 
__pid
, __pid_ˆ
__pg½
), 
£gid
);

680 
	#£g½
 
£gid


	)

689 
__pid_t
 
	$£tsid
 (è
__THROW
;

691 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


693 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

697 
__uid_t
 
	$g‘uid
 (è
__THROW
;

700 
__uid_t
 
	$g‘euid
 (è
__THROW
;

703 
__gid_t
 
	$g‘gid
 (è
__THROW
;

706 
__gid_t
 
	$g‘egid
 (è
__THROW
;

711 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

713 #ifdef 
__USE_GNU


715 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

724 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


727 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

730 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


732 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

741 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


744 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

747 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


749 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

752 #ifdeà
__USE_GNU


755 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

756 
__THROW
;

760 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

761 
__THROW
;

765 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

766 
__THROW
 
__wur
;

770 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

780 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

781 || 
defšed
 
__USE_BSD


786 
__pid_t
 
	$vfÜk
 (è
__THROW
;

792 *
	$‰yÇme
 (
__fd
è
__THROW
;

796 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

797 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

801 
	$i§‰y
 (
__fd
è
__THROW
;

803 #ià
defšed
 
__USE_BSD
 \

804 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

807 
	$‰y¦Ù
 (è
__THROW
;

812 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

813 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

815 #ifdeà
__USE_ATFILE


818 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

819 cÚ¡ *
__to
, 
__æags
)

820 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

823 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


825 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

826 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

831 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

832 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

833 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

836 #ifdeà
__USE_ATFILE


838 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

839 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

842 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

843 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

844 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

848 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

850 #ifdeà
__USE_ATFILE


852 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

853 
__THROW
 
	`__nÚnuÎ
 ((2));

857 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

861 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

864 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

871 *
	`g‘logš
 ();

872 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


879 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

882 #ifdef 
__USE_BSD


884 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

888 #ifdef 
__USE_POSIX2


892 
	#__Ãed_g‘İt


	)

893 
	~<g‘İt.h
>

897 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


901 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

905 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

908 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

909 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

913 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

919 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

920 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

921 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

922 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

928 
	$vhªgup
 (è
__THROW
;

931 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

939 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

940 
size_t
 
__off£t
, 
__sÿË
)

941 
__THROW
 
	`__nÚnuÎ
 ((1));

947 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

951 *
	$g‘u£rsh–l
 (è
__THROW
;

952 
	$’du£rsh–l
 (è
__THROW
;

953 
	$£tu£rsh–l
 (è
__THROW
;

959 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

963 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

966 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

970 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

978 
	`fsync
 (
__fd
);

981 #ifdeà
__USE_GNU


984 
	$syncfs
 (
__fd
è
__THROW
;

988 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


991 
	`g‘ho¡id
 ();

994 
	$sync
 (è
__THROW
;

997 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


1000 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

1005 
	$g‘dbËsize
 (è
__THROW
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


1014 #iâdeà
__USE_FILE_OFFSET64


1015 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

1016 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1020 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1021 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1023 
	#Œunÿ‹
 
Œunÿ‹64


	)

1026 #ifdeà
__USE_LARGEFILE64


1027 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1028 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1033 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1034 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1037 #iâdeà
__USE_FILE_OFFSET64


1038 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1040 #ifdeà
__REDIRECT_NTH


1041 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1042 
árunÿ‹64
è
__wur
;

1044 
	#árunÿ‹
 
árunÿ‹64


	)

1047 #ifdeà
__USE_LARGEFILE64


1048 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1054 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1055 || 
defšed
 
__USE_MISC


1059 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1065 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1069 #ifdeà
__USE_MISC


1080 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1085 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1097 
	#F_ULOCK
 0

	)

1098 
	#F_LOCK
 1

	)

1099 
	#F_TLOCK
 2

	)

1100 
	#F_TEST
 3

	)

1102 #iâdeà
__USE_FILE_OFFSET64


1103 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1105 #ifdeà
__REDIRECT


1106 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1107 
lockf64
è
__wur
;

1109 
	#lockf
 
lockf64


	)

1112 #ifdeà
__USE_LARGEFILE64


1113 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1118 #ifdeà
__USE_GNU


1123 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1124 (
__ex‹nsiÚ__
 \

1125 ({ 
__»suÉ
; \

1126 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1127 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1128 
__»suÉ
; 
	}
}))

	)

1131 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1134 
fd©async
 (
__fdes
);

1140 #ifdef 
__USE_XOPEN


1142 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1143 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1147 
	$’üy±
 (*
__block
, 
__edæag
è
__THROW
 
	`__nÚnuÎ
 ((1));

1154 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1155 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1161 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1163 *
	$ù”mid
 (*
__s
è
__THROW
;

1168 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1169 
	~<b™s/uni¡d.h
>

1172 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/confname.h

20 #iâdeà
_UNISTD_H


27 
	m_PC_LINK_MAX
,

28 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

29 
	m_PC_MAX_CANON
,

30 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

31 
	m_PC_MAX_INPUT
,

32 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

33 
	m_PC_NAME_MAX
,

34 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

35 
	m_PC_PATH_MAX
,

36 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

37 
	m_PC_PIPE_BUF
,

38 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

39 
	m_PC_CHOWN_RESTRICTED
,

40 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

41 
	m_PC_NO_TRUNC
,

42 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

43 
	m_PC_VDISABLE
,

44 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

45 
	m_PC_SYNC_IO
,

46 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

47 
	m_PC_ASYNC_IO
,

48 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

49 
	m_PC_PRIO_IO
,

50 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

51 
	m_PC_SOCK_MAXBUF
,

52 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

53 
	m_PC_FILESIZEBITS
,

54 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

55 
	m_PC_REC_INCR_XFER_SIZE
,

56 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

57 
	m_PC_REC_MAX_XFER_SIZE
,

58 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

59 
	m_PC_REC_MIN_XFER_SIZE
,

60 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

61 
	m_PC_REC_XFER_ALIGN
,

62 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

63 
	m_PC_ALLOC_SIZE_MIN
,

64 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

65 
	m_PC_SYMLINK_MAX
,

66 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

67 
	m_PC_2_SYMLINKS


68 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

74 
	m_SC_ARG_MAX
,

75 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

76 
	m_SC_CHILD_MAX
,

77 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

78 
	m_SC_CLK_TCK
,

79 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

80 
	m_SC_NGROUPS_MAX
,

81 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

82 
	m_SC_OPEN_MAX
,

83 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

84 
	m_SC_STREAM_MAX
,

85 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

86 
	m_SC_TZNAME_MAX
,

87 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

88 
	m_SC_JOB_CONTROL
,

89 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

90 
	m_SC_SAVED_IDS
,

91 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

92 
	m_SC_REALTIME_SIGNALS
,

93 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

94 
	m_SC_PRIORITY_SCHEDULING
,

95 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

96 
	m_SC_TIMERS
,

97 
	#_SC_TIMERS
 
_SC_TIMERS


	)

98 
	m_SC_ASYNCHRONOUS_IO
,

99 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

100 
	m_SC_PRIORITIZED_IO
,

101 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

102 
	m_SC_SYNCHRONIZED_IO
,

103 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

104 
	m_SC_FSYNC
,

105 
	#_SC_FSYNC
 
_SC_FSYNC


	)

106 
	m_SC_MAPPED_FILES
,

107 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

108 
	m_SC_MEMLOCK
,

109 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

110 
	m_SC_MEMLOCK_RANGE
,

111 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

112 
	m_SC_MEMORY_PROTECTION
,

113 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

114 
	m_SC_MESSAGE_PASSING
,

115 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

116 
	m_SC_SEMAPHORES
,

117 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

118 
	m_SC_SHARED_MEMORY_OBJECTS
,

119 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

120 
	m_SC_AIO_LISTIO_MAX
,

121 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

122 
	m_SC_AIO_MAX
,

123 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

124 
	m_SC_AIO_PRIO_DELTA_MAX
,

125 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

126 
	m_SC_DELAYTIMER_MAX
,

127 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

128 
	m_SC_MQ_OPEN_MAX
,

129 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

130 
	m_SC_MQ_PRIO_MAX
,

131 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

132 
	m_SC_VERSION
,

133 
	#_SC_VERSION
 
_SC_VERSION


	)

134 
	m_SC_PAGESIZE
,

135 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

136 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

137 
	m_SC_RTSIG_MAX
,

138 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

139 
	m_SC_SEM_NSEMS_MAX
,

140 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

141 
	m_SC_SEM_VALUE_MAX
,

142 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

143 
	m_SC_SIGQUEUE_MAX
,

144 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

145 
	m_SC_TIMER_MAX
,

146 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

150 
	m_SC_BC_BASE_MAX
,

151 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

152 
	m_SC_BC_DIM_MAX
,

153 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

154 
	m_SC_BC_SCALE_MAX
,

155 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

156 
	m_SC_BC_STRING_MAX
,

157 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

158 
	m_SC_COLL_WEIGHTS_MAX
,

159 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

160 
	m_SC_EQUIV_CLASS_MAX
,

161 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

162 
	m_SC_EXPR_NEST_MAX
,

163 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

164 
	m_SC_LINE_MAX
,

165 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

166 
	m_SC_RE_DUP_MAX
,

167 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

168 
	m_SC_CHARCLASS_NAME_MAX
,

169 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

171 
	m_SC_2_VERSION
,

172 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

173 
	m_SC_2_C_BIND
,

174 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

175 
	m_SC_2_C_DEV
,

176 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

177 
	m_SC_2_FORT_DEV
,

178 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

179 
	m_SC_2_FORT_RUN
,

180 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

181 
	m_SC_2_SW_DEV
,

182 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

183 
	m_SC_2_LOCALEDEF
,

184 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

186 
	m_SC_PII
,

187 
	#_SC_PII
 
_SC_PII


	)

188 
	m_SC_PII_XTI
,

189 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

190 
	m_SC_PII_SOCKET
,

191 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

192 
	m_SC_PII_INTERNET
,

193 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

194 
	m_SC_PII_OSI
,

195 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

196 
	m_SC_POLL
,

197 
	#_SC_POLL
 
_SC_POLL


	)

198 
	m_SC_SELECT
,

199 
	#_SC_SELECT
 
_SC_SELECT


	)

200 
	m_SC_UIO_MAXIOV
,

201 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

202 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

203 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

204 
	m_SC_PII_INTERNET_STREAM
,

205 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

206 
	m_SC_PII_INTERNET_DGRAM
,

207 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

208 
	m_SC_PII_OSI_COTS
,

209 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

210 
	m_SC_PII_OSI_CLTS
,

211 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

212 
	m_SC_PII_OSI_M
,

213 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

214 
	m_SC_T_IOV_MAX
,

215 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

218 
	m_SC_THREADS
,

219 
	#_SC_THREADS
 
_SC_THREADS


	)

220 
	m_SC_THREAD_SAFE_FUNCTIONS
,

221 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

222 
	m_SC_GETGR_R_SIZE_MAX
,

223 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

224 
	m_SC_GETPW_R_SIZE_MAX
,

225 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

226 
	m_SC_LOGIN_NAME_MAX
,

227 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

228 
	m_SC_TTY_NAME_MAX
,

229 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

230 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

231 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

232 
	m_SC_THREAD_KEYS_MAX
,

233 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

234 
	m_SC_THREAD_STACK_MIN
,

235 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

236 
	m_SC_THREAD_THREADS_MAX
,

237 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

238 
	m_SC_THREAD_ATTR_STACKADDR
,

239 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

240 
	m_SC_THREAD_ATTR_STACKSIZE
,

241 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

242 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

243 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

244 
	m_SC_THREAD_PRIO_INHERIT
,

245 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

246 
	m_SC_THREAD_PRIO_PROTECT
,

247 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

248 
	m_SC_THREAD_PROCESS_SHARED
,

249 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

251 
	m_SC_NPROCESSORS_CONF
,

252 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

253 
	m_SC_NPROCESSORS_ONLN
,

254 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

255 
	m_SC_PHYS_PAGES
,

256 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

257 
	m_SC_AVPHYS_PAGES
,

258 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

259 
	m_SC_ATEXIT_MAX
,

260 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

261 
	m_SC_PASS_MAX
,

262 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

264 
	m_SC_XOPEN_VERSION
,

265 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

266 
	m_SC_XOPEN_XCU_VERSION
,

267 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

268 
	m_SC_XOPEN_UNIX
,

269 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

270 
	m_SC_XOPEN_CRYPT
,

271 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

272 
	m_SC_XOPEN_ENH_I18N
,

273 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

274 
	m_SC_XOPEN_SHM
,

275 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

277 
	m_SC_2_CHAR_TERM
,

278 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

279 
	m_SC_2_C_VERSION
,

280 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

281 
	m_SC_2_UPE
,

282 
	#_SC_2_UPE
 
_SC_2_UPE


	)

284 
	m_SC_XOPEN_XPG2
,

285 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

286 
	m_SC_XOPEN_XPG3
,

287 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

288 
	m_SC_XOPEN_XPG4
,

289 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

291 
	m_SC_CHAR_BIT
,

292 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

293 
	m_SC_CHAR_MAX
,

294 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

295 
	m_SC_CHAR_MIN
,

296 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

297 
	m_SC_INT_MAX
,

298 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

299 
	m_SC_INT_MIN
,

300 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

301 
	m_SC_LONG_BIT
,

302 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

303 
	m_SC_WORD_BIT
,

304 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

305 
	m_SC_MB_LEN_MAX
,

306 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

307 
	m_SC_NZERO
,

308 
	#_SC_NZERO
 
_SC_NZERO


	)

309 
	m_SC_SSIZE_MAX
,

310 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

311 
	m_SC_SCHAR_MAX
,

312 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

313 
	m_SC_SCHAR_MIN
,

314 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

315 
	m_SC_SHRT_MAX
,

316 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

317 
	m_SC_SHRT_MIN
,

318 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

319 
	m_SC_UCHAR_MAX
,

320 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

321 
	m_SC_UINT_MAX
,

322 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

323 
	m_SC_ULONG_MAX
,

324 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

325 
	m_SC_USHRT_MAX
,

326 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

328 
	m_SC_NL_ARGMAX
,

329 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

330 
	m_SC_NL_LANGMAX
,

331 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

332 
	m_SC_NL_MSGMAX
,

333 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

334 
	m_SC_NL_NMAX
,

335 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

336 
	m_SC_NL_SETMAX
,

337 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

338 
	m_SC_NL_TEXTMAX
,

339 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

341 
	m_SC_XBS5_ILP32_OFF32
,

342 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

343 
	m_SC_XBS5_ILP32_OFFBIG
,

344 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

345 
	m_SC_XBS5_LP64_OFF64
,

346 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

347 
	m_SC_XBS5_LPBIG_OFFBIG
,

348 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

350 
	m_SC_XOPEN_LEGACY
,

351 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

352 
	m_SC_XOPEN_REALTIME
,

353 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

354 
	m_SC_XOPEN_REALTIME_THREADS
,

355 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

357 
	m_SC_ADVISORY_INFO
,

358 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

359 
	m_SC_BARRIERS
,

360 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

361 
	m_SC_BASE
,

362 
	#_SC_BASE
 
_SC_BASE


	)

363 
	m_SC_C_LANG_SUPPORT
,

364 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

365 
	m_SC_C_LANG_SUPPORT_R
,

366 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

367 
	m_SC_CLOCK_SELECTION
,

368 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

369 
	m_SC_CPUTIME
,

370 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

371 
	m_SC_THREAD_CPUTIME
,

372 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

373 
	m_SC_DEVICE_IO
,

374 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

375 
	m_SC_DEVICE_SPECIFIC
,

376 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

377 
	m_SC_DEVICE_SPECIFIC_R
,

378 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

379 
	m_SC_FD_MGMT
,

380 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

381 
	m_SC_FIFO
,

382 
	#_SC_FIFO
 
_SC_FIFO


	)

383 
	m_SC_PIPE
,

384 
	#_SC_PIPE
 
_SC_PIPE


	)

385 
	m_SC_FILE_ATTRIBUTES
,

386 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

387 
	m_SC_FILE_LOCKING
,

388 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

389 
	m_SC_FILE_SYSTEM
,

390 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

391 
	m_SC_MONOTONIC_CLOCK
,

392 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

393 
	m_SC_MULTI_PROCESS
,

394 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

395 
	m_SC_SINGLE_PROCESS
,

396 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

397 
	m_SC_NETWORKING
,

398 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

399 
	m_SC_READER_WRITER_LOCKS
,

400 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

401 
	m_SC_SPIN_LOCKS
,

402 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

403 
	m_SC_REGEXP
,

404 
	#_SC_REGEXP
 
_SC_REGEXP


	)

405 
	m_SC_REGEX_VERSION
,

406 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

407 
	m_SC_SHELL
,

408 
	#_SC_SHELL
 
_SC_SHELL


	)

409 
	m_SC_SIGNALS
,

410 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

411 
	m_SC_SPAWN
,

412 
	#_SC_SPAWN
 
_SC_SPAWN


	)

413 
	m_SC_SPORADIC_SERVER
,

414 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

415 
	m_SC_THREAD_SPORADIC_SERVER
,

416 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

417 
	m_SC_SYSTEM_DATABASE
,

418 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

419 
	m_SC_SYSTEM_DATABASE_R
,

420 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

421 
	m_SC_TIMEOUTS
,

422 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

423 
	m_SC_TYPED_MEMORY_OBJECTS
,

424 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

425 
	m_SC_USER_GROUPS
,

426 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

427 
	m_SC_USER_GROUPS_R
,

428 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

429 
	m_SC_2_PBS
,

430 
	#_SC_2_PBS
 
_SC_2_PBS


	)

431 
	m_SC_2_PBS_ACCOUNTING
,

432 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

433 
	m_SC_2_PBS_LOCATE
,

434 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

435 
	m_SC_2_PBS_MESSAGE
,

436 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

437 
	m_SC_2_PBS_TRACK
,

438 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

439 
	m_SC_SYMLOOP_MAX
,

440 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

441 
	m_SC_STREAMS
,

442 
	#_SC_STREAMS
 
_SC_STREAMS


	)

443 
	m_SC_2_PBS_CHECKPOINT
,

444 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

446 
	m_SC_V6_ILP32_OFF32
,

447 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

448 
	m_SC_V6_ILP32_OFFBIG
,

449 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

450 
	m_SC_V6_LP64_OFF64
,

451 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

452 
	m_SC_V6_LPBIG_OFFBIG
,

453 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

455 
	m_SC_HOST_NAME_MAX
,

456 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

457 
	m_SC_TRACE
,

458 
	#_SC_TRACE
 
_SC_TRACE


	)

459 
	m_SC_TRACE_EVENT_FILTER
,

460 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

461 
	m_SC_TRACE_INHERIT
,

462 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

463 
	m_SC_TRACE_LOG
,

464 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

466 
	m_SC_LEVEL1_ICACHE_SIZE
,

467 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

468 
	m_SC_LEVEL1_ICACHE_ASSOC
,

469 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

470 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

471 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

472 
	m_SC_LEVEL1_DCACHE_SIZE
,

473 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

474 
	m_SC_LEVEL1_DCACHE_ASSOC
,

475 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

476 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

477 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

478 
	m_SC_LEVEL2_CACHE_SIZE
,

479 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

480 
	m_SC_LEVEL2_CACHE_ASSOC
,

481 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

482 
	m_SC_LEVEL2_CACHE_LINESIZE
,

483 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

484 
	m_SC_LEVEL3_CACHE_SIZE
,

485 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

486 
	m_SC_LEVEL3_CACHE_ASSOC
,

487 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

488 
	m_SC_LEVEL3_CACHE_LINESIZE
,

489 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

490 
	m_SC_LEVEL4_CACHE_SIZE
,

491 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

492 
	m_SC_LEVEL4_CACHE_ASSOC
,

493 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

494 
	m_SC_LEVEL4_CACHE_LINESIZE
,

495 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

498 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

499 
	#_SC_IPV6
 
_SC_IPV6


	)

500 
	m_SC_RAW_SOCKETS
,

501 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

503 
	m_SC_V7_ILP32_OFF32
,

504 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

505 
	m_SC_V7_ILP32_OFFBIG
,

506 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

507 
	m_SC_V7_LP64_OFF64
,

508 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

509 
	m_SC_V7_LPBIG_OFFBIG
,

510 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

512 
	m_SC_SS_REPL_MAX
,

513 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

515 
	m_SC_TRACE_EVENT_NAME_MAX
,

516 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

517 
	m_SC_TRACE_NAME_MAX
,

518 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

519 
	m_SC_TRACE_SYS_MAX
,

520 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

521 
	m_SC_TRACE_USER_EVENT_MAX
,

522 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

524 
	m_SC_XOPEN_STREAMS
,

525 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

527 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

528 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

529 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


530 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

536 
	m_CS_PATH
,

537 
	#_CS_PATH
 
_CS_PATH


	)

539 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

540 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

541 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

543 
	m_CS_GNU_LIBC_VERSION
,

544 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

545 
	m_CS_GNU_LIBPTHREAD_VERSION
,

546 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

548 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

549 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

550 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

552 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

553 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

554 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

556 
	m_CS_LFS_CFLAGS
 = 1000,

557 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

558 
	m_CS_LFS_LDFLAGS
,

559 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

560 
	m_CS_LFS_LIBS
,

561 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

562 
	m_CS_LFS_LINTFLAGS
,

563 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

564 
	m_CS_LFS64_CFLAGS
,

565 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

566 
	m_CS_LFS64_LDFLAGS
,

567 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

568 
	m_CS_LFS64_LIBS
,

569 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

570 
	m_CS_LFS64_LINTFLAGS
,

571 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

573 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

574 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

575 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

576 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

577 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

578 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

579 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

580 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

581 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

582 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

583 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

584 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

585 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

586 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

587 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

588 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

589 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

590 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

591 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

592 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

593 
	m_CS_XBS5_LP64_OFF64_LIBS
,

594 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

595 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

596 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

597 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

598 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

599 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

600 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

601 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

602 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

603 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

604 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

606 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

607 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

608 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

609 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

610 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

611 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

612 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

613 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

614 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

615 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

616 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

617 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

618 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

619 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

620 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

621 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

622 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

623 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

624 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

625 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

626 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

627 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

628 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

629 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

630 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

631 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

632 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

633 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

634 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

635 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

636 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

637 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

639 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

640 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

641 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

642 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

643 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

644 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

645 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

646 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

647 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

648 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

649 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

650 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

651 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

652 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

653 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

654 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

655 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

656 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

657 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

658 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

659 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

660 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

661 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

662 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

663 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

664 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

665 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

666 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

667 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

668 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

669 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

670 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

672 
	m_CS_V6_ENV
,

673 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

674 
	m_CS_V7_ENV


675 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/environments.h

18 #iâdeà
_UNISTD_H


22 
	~<b™s/wÜdsize.h
>

42 #ià
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFF32
 1

	)

70 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

71 
	#_POSIX_V6_ILP32_OFF32
 1

	)

72 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

73 
	#_XBS5_ILP32_OFF32
 1

	)

74 
	#_XBS5_ILP32_OFFBIG
 1

	)

91 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

92 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

93 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

94 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

95 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

96 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

19 #ifdeà
_ERRNO_H


21 #undeà
EDOM


22 #undeà
EILSEQ


23 #undeà
ERANGE


24 
	~<lšux/”ºo.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #iâdeà
ECANCELED


31 
	#ECANCELED
 125

	)

35 #iâdeà
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #iâdeà
ERFKILL


41 
	#ERFKILL
 132

	)

44 #iâdeà
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #iâdeà
__ASSEMBLER__


50 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

52 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


54 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

59 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/huge_val.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VAL
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

36 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

44 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


45 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

47 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


48 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

51 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

52 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VALF
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7f800000UL }).
__d
)

	)

40 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


46 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

49 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

50 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

27 #–ià
__GNUC_PREREQ
(2,96)

28 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 0x1.0
p32767L
)

	)

31 
	#__HUGE_VALL_by‹s
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

33 
	#__huge_v®l_t
 uniÚ { 
__c
[12]; 
__ld
; }

	)

34 #ifdeà
__GNUC__


35 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 \

36 ((
__huge_v®l_t
è{ 
__c
: 
__HUGE_VALL_by‹s
 }).
__ld
)

	)

38 
__huge_v®l_t
 
	g__huge_v®l
 = { 
__HUGE_VALL_by‹s
 };

39 
	#HUGE_VALL
 (
__huge_v®l
.
__ld
)

	)

	@/usr/include/bits/inf.h

19 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__butš_šff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #iâdeà
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_fš™e
);

25 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_fš™e
);

26 #ifdeà
__MATH_DECLARE_LDOUBLE


27 #ifdeà
__NO_LONG_DOUBLE_MATH


28 
__REDIRECT_NTH
 (
aco¦
, (), 
__acos_fš™e
);

30 
__REDIRECT_NTH
 (
aco¦
, (), 
__aco¦_fš™e
);

34 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


36 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_fš™e
);

37 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_fš™e
);

38 #ifdeà
__MATH_DECLARE_LDOUBLE


39 #ifdeà
__NO_LONG_DOUBLE_MATH


40 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_fš™e
);

42 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_fš™e
);

48 
__REDIRECT_NTH
 (
asš
, (), 
__asš_fš™e
);

49 
__REDIRECT_NTH
 (
asšf
, (), 
__asšf_fš™e
);

50 #ifdeà
__MATH_DECLARE_LDOUBLE


51 #ifdeà
__NO_LONG_DOUBLE_MATH


52 
__REDIRECT_NTH
 (
asšl
, (), 
__asš_fš™e
);

54 
__REDIRECT_NTH
 (
asšl
, (), 
__asšl_fš™e
);

59 
__REDIRECT_NTH
 (
©ª2
, (, ), 
__©ª2_fš™e
);

60 
__REDIRECT_NTH
 (
©ª2f
, (, ), 
__©ª2f_fš™e
);

61 #ifdeà
__MATH_DECLARE_LDOUBLE


62 #ifdeà
__NO_LONG_DOUBLE_MATH


63 
__REDIRECT_NTH
 (
©ª2l
, (, ),

64 
__©ª2_fš™e
);

66 
__REDIRECT_NTH
 (
©ª2l
, (, ),

67 
__©ª2l_fš™e
);

71 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


73 
__REDIRECT_NTH
 (
©ªh
, (), 
__©ªh_fš™e
);

74 
__REDIRECT_NTH
 (
©ªhf
, (), 
__©ªhf_fš™e
);

75 #ifdeà
__MATH_DECLARE_LDOUBLE


76 #ifdeà
__NO_LONG_DOUBLE_MATH


77 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªh_fš™e
);

79 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªhl_fš™e
);

85 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_fš™e
);

86 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_fš™e
);

87 #ifdeà
__MATH_DECLARE_LDOUBLE


88 #ifdeà
__NO_LONG_DOUBLE_MATH


89 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_fš™e
);

91 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_fš™e
);

96 
__REDIRECT_NTH
 (
exp
, (), 
__exp_fš™e
);

97 
__REDIRECT_NTH
 (
expf
, (), 
__expf_fš™e
);

98 #ifdeà
__MATH_DECLARE_LDOUBLE


99 #ifdeà
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
ex¶
, (), 
__exp_fš™e
);

102 
__REDIRECT_NTH
 (
ex¶
, (), 
__ex¶_fš™e
);

106 #ifdeà
__USE_GNU


108 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_fš™e
);

109 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_fš™e
);

110 #ifdeà
__MATH_DECLARE_LDOUBLE


111 #ifdeà
__NO_LONG_DOUBLE_MATH


112 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_fš™e
);

114 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_fš™e
);

119 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_fš™e
);

120 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_fš™e
);

121 #ifdeà
__MATH_DECLARE_LDOUBLE


122 #ifdeà
__NO_LONG_DOUBLE_MATH


123 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_fš™e
);

125 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_fš™e
);

130 #ifdeà
__USE_ISOC99


132 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_fš™e
);

133 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_fš™e
);

134 #ifdeà
__MATH_DECLARE_LDOUBLE


135 #ifdeà
__NO_LONG_DOUBLE_MATH


136 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_fš™e
);

138 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_fš™e
);

144 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_fš™e
);

145 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_fš™e
);

146 #ifdeà
__MATH_DECLARE_LDOUBLE


147 #ifdeà
__NO_LONG_DOUBLE_MATH


148 
__REDIRECT_NTH
 (
fmodl
, (, ),

149 
__fmod_fš™e
);

151 
__REDIRECT_NTH
 (
fmodl
, (, ),

152 
__fmodl_fš™e
);

156 #ifdeà
__USE_ISOC99


158 
__REDIRECT_NTH
 (
hypÙ
, (, ), 
__hypÙ_fš™e
);

159 
__REDIRECT_NTH
 (
hypÙf
, (, ), 
__hypÙf_fš™e
);

160 #ifdeà
__MATH_DECLARE_LDOUBLE


161 #ifdeà
__NO_LONG_DOUBLE_MATH


162 
__REDIRECT_NTH
 (
hypÙl
, (, ),

163 
__hypÙ_fš™e
);

165 
__REDIRECT_NTH
 (
hypÙl
, (, ),

166 
__hypÙl_fš™e
);

171 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


173 
__REDIRECT_NTH
 (
j0
, (), 
__j0_fš™e
);

174 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_fš™e
);

175 #ifdeà
__MATH_DECLARE_LDOUBLE


176 #ifdeà
__NO_LONG_DOUBLE_MATH


177 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_fš™e
);

179 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_fš™e
);

184 
__REDIRECT_NTH
 (
y0
, (), 
__y0_fš™e
);

185 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_fš™e
);

186 #ifdeà
__MATH_DECLARE_LDOUBLE


187 #ifdeà
__NO_LONG_DOUBLE_MATH


188 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_fš™e
);

190 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_fš™e
);

195 
__REDIRECT_NTH
 (
j1
, (), 
__j1_fš™e
);

196 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_fš™e
);

197 #ifdeà
__MATH_DECLARE_LDOUBLE


198 #ifdeà
__NO_LONG_DOUBLE_MATH


199 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_fš™e
);

201 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_fš™e
);

206 
__REDIRECT_NTH
 (
y1
, (), 
__y1_fš™e
);

207 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_fš™e
);

208 #ifdeà
__MATH_DECLARE_LDOUBLE


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_fš™e
);

212 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_fš™e
);

217 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_fš™e
);

218 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_fš™e
);

219 #ifdeà
__MATH_DECLARE_LDOUBLE


220 #ifdeà
__NO_LONG_DOUBLE_MATH


221 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jn_fš™e
);

223 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jÆ_fš™e
);

228 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_fš™e
);

229 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_fš™e
);

230 #ifdeà
__MATH_DECLARE_LDOUBLE


231 #ifdeà
__NO_LONG_DOUBLE_MATH


232 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yn_fš™e
);

234 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yÆ_fš™e
);

239 #ifdeà
__USE_MISC


241 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_fš™e
);

242 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_fš™e
);

243 #ifdeà
__MATH_DECLARE_LDOUBLE


244 #ifdeà
__NO_LONG_DOUBLE_MATH


245 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

246 
__lgamma_r_fš™e
);

248 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

249 
__lgamm®_r_fš™e
);

254 #ià((
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99
) \

255 && 
defšed
 
	g__ex‹º_®ways_šlše
)

257 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamma
 (
__d
))

259 #ifdeà
__USE_ISOC99


260 
__loÿl_signgam
 = 0;

261  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

263  
	`lgamma_r
 (
__d
, &
signgam
);

265 
	}
}

266 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgammaf
 (
__d
))

268 #ifdeà
__USE_ISOC99


269 
__loÿl_signgam
 = 0;

270  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

272  
	`lgammaf_r
 (
__d
, &
signgam
);

274 
	}
}

275 #ifdeà
__MATH_DECLARE_LDOUBLE


276 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamm®
 (
__d
))

278 #ifdeà
__USE_ISOC99


279 
__loÿl_signgam
 = 0;

280  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

282  
	`lgamm®_r
 (
__d
, &
signgam
);

284 
	}
}

288 #ià((
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
) \

289 && 
defšed
 
	g__ex‹º_®ways_šlše
)

291 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamma
 (
__d
))

293 #ifdeà
__USE_ISOC99


294 
__loÿl_signgam
 = 0;

295  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

297  
	`lgamma_r
 (
__d
, &
signgam
);

299 
	}
}

300 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gammaf
 (
__d
))

302 #ifdeà
__USE_ISOC99


303 
__loÿl_signgam
 = 0;

304  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

306  
	`lgammaf_r
 (
__d
, &
signgam
);

308 
	}
}

309 #ifdeà
__MATH_DECLARE_LDOUBLE


310 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamm®
 (
__d
))

312 #ifdeà
__USE_ISOC99


313 
__loÿl_signgam
 = 0;

314  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

316  
	`lgamm®_r
 (
__d
, &
signgam
);

318 
	}
}

323 
__REDIRECT_NTH
 (
log
, (), 
__log_fš™e
);

324 
__REDIRECT_NTH
 (
logf
, (), 
__logf_fš™e
);

325 #ifdeà
__MATH_DECLARE_LDOUBLE


326 #ifdeà
__NO_LONG_DOUBLE_MATH


327 
__REDIRECT_NTH
 (
logl
, (), 
__log_fš™e
);

329 
__REDIRECT_NTH
 (
logl
, (), 
__logl_fš™e
);

334 
__REDIRECT_NTH
 (
log10
, (), 
__log10_fš™e
);

335 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_fš™e
);

336 #ifdeà
__MATH_DECLARE_LDOUBLE


337 #ifdeà
__NO_LONG_DOUBLE_MATH


338 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_fš™e
);

340 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_fš™e
);

344 #ifdeà
__USE_ISOC99


346 
__REDIRECT_NTH
 (
log2
, (), 
__log2_fš™e
);

347 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_fš™e
);

348 #ifdeà
__MATH_DECLARE_LDOUBLE


349 #ifdeà
__NO_LONG_DOUBLE_MATH


350 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_fš™e
);

352 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_fš™e
);

358 
__REDIRECT_NTH
 (
ldexp
, (, ), 
sÿlbn
);

359 
__REDIRECT_NTH
 (
ldexpf
, (, ), 
sÿlbnf
);

360 #ifdeà
__MATH_DECLARE_LDOUBLE


361 
__REDIRECT_NTH
 (
ldex¶
, (, ), 
sÿlbÆ
);

365 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_fš™e
);

366 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_fš™e
);

367 #ifdeà
__MATH_DECLARE_LDOUBLE


368 #ifdeà
__NO_LONG_DOUBLE_MATH


369 
__REDIRECT_NTH
 (
powl
, (, ),

370 
__pow_fš™e
);

372 
__REDIRECT_NTH
 (
powl
, (, ),

373 
__powl_fš™e
);

378 
__REDIRECT_NTH
 (
»mašd”
, (, ), 
__»mašd”_fš™e
);

379 
__REDIRECT_NTH
 (
»mašd”f
, (, ), 
__»mašd”f_fš™e
);

380 #ifdeà
__MATH_DECLARE_LDOUBLE


381 #ifdeà
__NO_LONG_DOUBLE_MATH


382 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

383 
__»mašd”_fš™e
);

385 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

386 
__»mašd”l_fš™e
);

390 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


392 
__REDIRECT_NTH
 (
sÿlb
, (, ), 
__sÿlb_fš™e
);

393 
__REDIRECT_NTH
 (
sÿlbf
, (, ), 
__sÿlbf_fš™e
);

394 #ifdeà
__MATH_DECLARE_LDOUBLE


395 #ifdeà
__NO_LONG_DOUBLE_MATH


396 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

397 
__sÿlb_fš™e
);

399 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

400 
__sÿlbl_fš™e
);

406 
__REDIRECT_NTH
 (
sšh
, (), 
__sšh_fš™e
);

407 
__REDIRECT_NTH
 (
sšhf
, (), 
__sšhf_fš™e
);

408 #ifdeà
__MATH_DECLARE_LDOUBLE


409 #ifdeà
__NO_LONG_DOUBLE_MATH


410 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšh_fš™e
);

412 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšhl_fš™e
);

417 
__REDIRECT_NTH
 (
sq¹
, (), 
__sq¹_fš™e
);

418 
__REDIRECT_NTH
 (
sq¹f
, (), 
__sq¹f_fš™e
);

419 #ifdeà
__MATH_DECLARE_LDOUBLE


420 #ifdeà
__NO_LONG_DOUBLE_MATH


421 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹_fš™e
);

423 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹l_fš™e
);

427 #ià
defšed
 
__USE_ISOC99
 && defšed 
__ex‹º_®ways_šlše


429 
__gamma_r_fš™e
 (, *);

430 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamma
 (
__d
))

432 
__loÿl_signgam
 = 0;

433 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

434  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

435 
	}
}

436 
__gammaf_r_fš™e
 (, *);

437 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgammaf
 (
__d
))

439 
__loÿl_signgam
 = 0;

440 
__»s
 = 
	`__gammaf_r_fš™e
 (
__d
, &
__loÿl_signgam
);

441  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

442 
	}
}

443 #ifdeà
__MATH_DECLARE_LDOUBLE


444 
__gamm®_r_fš™e
 (, *);

445 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamm®
 (
__d
))

447 
__loÿl_signgam
 = 0;

448 #ifdeà
__NO_LONG_DOUBLE_MATH


449 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

451 
__»s
 = 
	`__gamm®_r_fš™e
 (
__d
, &
__loÿl_signgam
);

453  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

454 
	}
}

	@/usr/include/bits/mathcalls.h

45 #iâdeà
_MATH_H


52 
_MdoubË_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

56 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

58 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

60 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

63 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

65 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

67 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

74 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

76 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

77 
	g_MdoubË_END_NAMESPACE


79 #ifdeà
__USE_GNU


81 
__MATHDECL
 (,
sšcos
,,

82 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

85 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

90 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

92 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubË_BEGIN_NAMESPACE


100 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

103 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

109 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
))

116 
__©Œibu‹__
 ((
__nÚnuÎ__
 (2)));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (cÚ¡ *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALLX
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

342 
__MATHCALLX
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

346 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


22 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #ià
defšed
 
__x86_64__
 || (defšed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tæßt_t
;

29 
	tdoubË_t
;

35 
	tæßt_t
;

37 
	tdoubË_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #ià
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #ià
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #ià
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #iâdeà
_MATH_H


23 #iâdeà
__ex‹º_®ways_šlše


24 
	#__MATH_INLINE
 
__šlše


	)

26 
	#__MATH_INLINE
 
__ex‹º_®ways_šlše


	)

30 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

32 #ià!
__GNUC_PREREQ
 (2,97)

37 #undeà
isg»©”


38 #undeà
isg»©”equ®


39 #undeà
i¦ess


40 #undeà
i¦es£qu®


41 #undeà
i¦essg»©”


42 #undeà
isunÜd”ed


43 #ifdeà
__i686__


46 
	#isg»©”
(
x
, 
y
) \

47 ({ 
__»suÉ
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__»suÉ
; })

	)

51 
	#isg»©”equ®
(
x
, 
y
) \

52 ({ 
__»suÉ
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__»suÉ
; })

	)

57 
	#i¦ess
(
x
, 
y
) \

58 ({ 
__»suÉ
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__»suÉ
; })

	)

63 
	#i¦es£qu®
(
x
, 
y
) \

64 ({ 
__»suÉ
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__»suÉ
; })

	)

69 
	#i¦essg»©”
(
x
, 
y
) \

70 ({ 
__»suÉ
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__»suÉ
; })

	)

75 
	#isunÜd”ed
(
x
, 
y
) \

76 ({ 
__»suÉ
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__»suÉ
; })

	)

82 
	#isg»©”
(
x
, 
y
) \

83 ({ 
__»suÉ
; \

84 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

85 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__»suÉ
; })

	)

88 
	#isg»©”equ®
(
x
, 
y
) \

89 ({ 
__»suÉ
; \

90 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

91 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__»suÉ
; })

	)

94 
	#i¦ess
(
x
, 
y
) \

95 ({ 
__»suÉ
; \

96 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

97 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__»suÉ
; })

	)

100 
	#i¦es£qu®
(
x
, 
y
) \

101 ({ 
__»suÉ
; \

102 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

103 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__»suÉ
; })

	)

106 
	#i¦essg»©”
(
x
, 
y
) \

107 ({ 
__»suÉ
; \

108 
	`__asm__
 ("fucompp; fnstsw;estb $0x44, %%ah; setz %%al" \

109 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__»suÉ
; })

	)

112 
	#isunÜd”ed
(
x
, 
y
) \

113 ({ 
__»suÉ
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__»suÉ
; })

	)

122 #ià
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signb™f
 (
__x
))

129 #ifdeà
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signb™
 (
__x
))

141 #ifdeà
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signb™l
 (
__x
))

153 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #ià
__GNUC_PREREQ
 (2, 8)

165 #ià!
__GNUC_PREREQ
 (3, 4è&& !
defšed
 
__NO_MATH_INLINES
 \

166 && 
defšed
 
	g__OPTIMIZE__


170 #ifdeà
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifdeà
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ìštf
 (
__x
))

178 
__»s
;

183 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

184  
__»s
;

185 
	}
}

187 #ifdeà
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ìšt
 (
__x
))

191 
__»s
;

196 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

197  
__»s
;

198 
	}
}

200 #ifdeà
__x86_64__


201 
__MATH_INLINE
 

202 
__NTH
 (
	$Îrštf
 (
__x
))

204 
__»s
;

209 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

210  
__»s
;

211 
	}
}

212 
__MATH_INLINE
 

213 
__NTH
 (
	$Îršt
 (
__x
))

215 
__»s
;

220 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

221  
__»s
;

222 
	}
}

225 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

226 && 
defšed
 
__SSE2_MATH__


228 
__MATH_INLINE
 

229 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

231 #ifdeà
__AVX__


232 
__»s
;

233 
	`__asm
 ("vmaxs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

234  
__»s
;

236 
	`__asm
 ("maxs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

237  
__x
;

239 
	}
}

240 
__MATH_INLINE
 

241 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

243 #ifdeà
__AVX__


244 
__»s
;

245 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

246  
__»s
;

248 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

249  
__x
;

251 
	}
}

254 
__MATH_INLINE
 

255 
__NTH
 (
	$fmšf
 (
__x
, 
__y
))

257 #ifdeà
__AVX__


258 
__»s
;

259 
	`__asm
 ("vmšs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

260  
__»s
;

262 
	`__asm
 ("mšs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

263  
__x
;

265 
	}
}

266 
__MATH_INLINE
 

267 
__NTH
 (
	$fmš
 (
__x
, 
__y
))

269 #ifdeà
__AVX__


270 
__»s
;

271 
	`__asm
 ("vmšsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

272  
__»s
;

274 
	`__asm
 ("mšsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

275  
__x
;

277 
	}
}

280 
	g__END_NAMESPACE_C99


283 #ià
defšed
 
__SSE4_1__
 && defšed 
__SSE2_MATH__


284 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


285 
__BEGIN_NAMESPACE_C99


288 
__MATH_INLINE
 

289 
__NTH
 (
	$ršt
 (
__x
))

291 
__»s
;

296 
__asm
 
	`__vŞ©e__
 ("roundsd $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

297  
__»s
;

298 
	}
}

299 
__MATH_INLINE
 

300 
__NTH
 (
	$rštf
 (
__x
))

302 
__»s
;

307 
__asm
 
	`__vŞ©e__
 ("rounds $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

308  
__»s
;

309 
	}
}

311 #ifdeà
__USE_ISOC99


313 
__MATH_INLINE
 

314 
__NTH
 (
	$Ã¬byšt
 (
__x
))

316 
__»s
;

321 
__asm
 
	`__vŞ©e__
 ("roundsd $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

322  
__»s
;

323 
	}
}

324 
__MATH_INLINE
 

325 
__NTH
 (
	$Ã¬byštf
 (
__x
))

327 
__»s
;

332 
__asm
 
	`__vŞ©e__
 ("rounds $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

333  
__»s
;

334 
	}
}

337 
	g__END_NAMESPACE_C99


340 
__BEGIN_NAMESPACE_STD


342 
__MATH_INLINE
 

343 
__NTH
 (
	$û
 (
__x
))

345 
__»s
;

346 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

347  
__»s
;

348 
	}
}

349 
__END_NAMESPACE_STD


351 
__BEGIN_NAMESPACE_C99


352 
__MATH_INLINE
 

353 
__NTH
 (
	$ûf
 (
__x
))

355 
__»s
;

356 
	`__asm
 ("rounds $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

357  
__»s
;

358 
	}
}

359 
__END_NAMESPACE_C99


361 
__BEGIN_NAMESPACE_STD


363 
__MATH_INLINE
 

364 
__NTH
 (
	$æoÜ
 (
__x
))

366 
__»s
;

367 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

368  
__»s
;

369 
	}
}

370 
__END_NAMESPACE_STD


372 
__BEGIN_NAMESPACE_C99


373 
__MATH_INLINE
 

374 
__NTH
 (
	$æoÜf
 (
__x
))

376 
__»s
;

377 
	`__asm
 ("rounds $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

378  
__»s
;

379 
	}
}

380 
	g__END_NAMESPACE_C99


385 #iâdeà
__x86_64__


386 #ià((!
defšed
 
__NO_MATH_INLINES
 || defšed 
__LIBC_INTERNAL_MATH_INLINES
) \

387 && 
defšed
 
	g__OPTIMIZE__
)

391 #undeà
m©h_”rhªdlšg


400 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


401 
	#__šlše_m©hİ
(
func
, 
İ
) \

402 
	`__šlše_m©hİ_
 (, 
func
, 
İ
) \

403 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

404 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

405 
	#__šlše_m©hİNP
(
func
, 
İ
) \

406 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
) \

407 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

408 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

410 
	#__šlše_m©hİ
(
func
, 
İ
) \

411 
	`__šlše_m©hİ_
 (, 
func
, 
İ
)

	)

412 
	#__šlše_m©hİNP
(
func
, 
İ
) \

413 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
)

	)

416 
	#__šlše_m©hİ_
(
æßt_ty³
, 
func
, 
İ
) \

417 
	`__šlše_m©hİ_deş_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

418 
	#__šlše_m©hİNP_
(
æßt_ty³
, 
func
, 
İ
) \

419 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

422 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


423 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

424 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
) \

425 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

426 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

427 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

428 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
) \

429 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

430 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

432 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

433 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
)

	)

434 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

435 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
)

	)

438 
	#__šlše_m©hİ_deş_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

439 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

440 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, 
·¿ms
)

	)

442 
	#__šlše_m©hİ_deşNP_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

443 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
__x
)) \

445 
æßt_ty³
 
__»suÉ
; \

446 
__asm
 
	`__vŞ©e__
 (
İ
 : "ñ" (
__»suÉ
è: 
·¿ms
); \

447  
__»suÉ
; \

448 }

	)

451 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


452 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

453 
	`__šlše_m©hcode_
 (, 
func
, 
¬g
, 
code
) \

454 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

455 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

456 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

457 
	`__šlše_m©hcodeNP_
 (, 
func
, 
¬g
, 
code
) \

458 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

459 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

460 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

461 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

462 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

463 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

464 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

465 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

466 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

467 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

468 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

469 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

470 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

471 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

472 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

473 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

474 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

475 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

477 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

478 
	`__šlše_m©hcode_
 (, 
func
, (
¬g
), 
code
)

	)

479 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

480 
	`__šlše_m©hcodeNP_
 (, 
func
, (
¬g
), 
code
)

	)

481 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

482 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

483 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

484 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

485 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

486 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

487 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

488 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

491 
	#__šlše_m©hcode_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

492 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

493 
	`__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
)

	)

495 
	#__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

496 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g
)) \

498 
code
; \

499 }

	)

502 
	#__šlše_m©hcode2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

503 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³è
__THROW
; \

504 
	`__šlše_m©hcodeNP2_
 (
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

506 
	#__šlše_m©hcodeNP2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

507 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
)) \

509 
code
; \

510 }

	)

512 
	#__šlše_m©hcode3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

513 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³, flßt_ty³è
__THROW
; \

514 
	`__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

516 
	#__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

517 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
, \

518 
æßt_ty³
 
¬g3
)) \

520 
code
; \

521 }

	)

525 #ià!
defšed
 
__NO_MATH_INLINES
 && defšed 
__OPTIMIZE__


529 #ifdeà
__FAST_MATH__


530 #ifdeà
__USE_GNU


531 
	#__sšcos_code
 \

532 
__co¤
; \

533 
__sšr
; \

534 
__swtmp
; \

535 
__asm
 
__vŞ©e__
 \

550 : "ñ" (
__co¤
), "=u" (
__sšr
), "÷" (
__swtmp
è: "0" (
__x
)); \

551 *
__sšx
 = 
__sšr
; \

552 *
__cosx
 = 
__co¤


	)

554 
__MATH_INLINE
 

555 
__NTH
 (
	$__sšcos
 (
__x
, *
__sšx
, *
__cosx
))

557 
__sšcos_code
;

558 
	}
}

560 
__MATH_INLINE
 

561 
__NTH
 (
	$__sšcosf
 (
__x
, *
__sšx
, *
__cosx
))

563 
__sšcos_code
;

564 
	}
}

566 
__MATH_INLINE
 

567 
__NTH
 (
	$__sšco¦
 (
__x
, *
__sšx
, *
__cosx
))

569 
__sšcos_code
;

570 
	}
}

577 #ià
__GNUC_PREREQ
 (3, 5)

578 
	#__expm1_code
 \

579 
__‹mp
; \

580 
__‹mp
 = 
	`__butš_expm1l
 (
__x
); \

581  
__‹mp
 ? __‹m°: 
__x


	)

583 
	#__expm1_code
 \

584 
__v®ue
; \

585 
__expÚ’t
; \

586 
__‹mp
; \

587 
__asm
 
__vŞ©e__
 \

596 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

597 
__asm
 
__vŞ©e__
 \

599 : "ñ" (
__‹mp
è: "0" (1.0), "u" (
__expÚ’t
)); \

600 
__‹mp
 -= 1.0; \

601 
__‹mp
 +ğ
__v®ue
; \

602  
__‹mp
 ? __‹m°: 
__x


	)

604 
	$__šlše_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

606 #ià
	`__GNUC_PREREQ
 (3, 4)

607 
	`__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
,  
	$__butš_ex¶
 (
__x
))

609 
	#__exp_code
 \

610 
__v®ue
; \

611 
__expÚ’t
; \

612 
__asm
 
__vŞ©e__
 \

620 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

621 
__v®ue
 += 1.0; \

622 
__asm
 
__vŞ©e__
 \

624 : "ñ" (
__v®ue
è: "0" (__v®ue), "u" (
__expÚ’t
)); \

625  
__v®ue


	)

626 
	$__šlše_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

627 
	$__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
, 
__exp_code
)

631 #ià!
	`__GNUC_PREREQ
 (3, 5)

632 
	`__šlše_m©hcodeNP
 (
n
, 
__x
, \

633 
__v®ue
; \

634 
__v®ue2
 
	`__©Œibu‹__
 ((
__unu£d__
)); \

635 
__asm
 
__vŞ©e__
 \

637 : "ñ" (
__v®ue2
), "=u" (
__v®ue
è: "0" (
__x
)); \

638  
__v®ue
)

643 #ià
	`__GNUC_PREREQ
 (3, 4)

644 
	`__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
,

645  
	$__butš_©ª2l
 (
__y
, 
__x
))

647 
	#__©ª2_code
 \

648 
__v®ue
; \

649 
__asm
 
__vŞ©e__
 \

651 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "st(1)"); \

652  
__v®ue


	)

653 #ifdeà
__FAST_MATH__


654 
	$__šlše_m©hcodeNP2
 (
©ª2
, 
__y
, 
__x
, 
__©ª2_code
)

656 
	$__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
, 
__©ª2_code
)

660 #ià
defšed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

661 
	`__šlše_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

662 
__v®ue
; \

663 
__asm
 
__vŞ©e__
 \

668 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

669  
__v®ue
)

673 #ifdeà
__FAST_MATH__


674 #ià!
	`__GNUC_PREREQ
 (3,3)

675 
	`__šlše_m©hİNP
 (
sq¹
, "fsqrt")

676 
	`__šlše_m©hİNP_
 (, 
__sq¹l
, "fsqrt")

677 
	#__libc_sq¹l
(
n
è
	`__sq¹l
 (n)

	)

679 
	#__libc_sq¹l
(
n
è
	`__butš_sq¹l
 (n)

	)

683 #ià
	`__GNUC_PREREQ
 (2, 8)

684 
	`__šlše_m©hcodeNP_
 (, 
çbs
, 
__x
,  
	$__butš_çbs
 (
__x
))

685 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


686 
	`__šlše_m©hcodeNP_
 (, 
çbsf
, 
__x
,  
	$__butš_çbsf
 (
__x
))

687 
	`__šlše_m©hcodeNP_
 (, 
çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

689 
	`__šlše_m©hcodeNP_
 (, 
__çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

691 
	`__šlše_m©hİ
 (
çbs
, "fabs")

692 
	`__šlše_m©hİ_
 (, 
__çb¦
, "fabs")

695 #ifdeà
__FAST_MATH__


696 #ià!
	`__GNUC_PREREQ
 (3, 4)

698 
	`__šlše_m©hİNP
 (
sš
, "fsin")

700 
	`__šlše_m©hİNP
 (
cos
, "fcos")

702 
	`__šlše_m©hİ_deşNP
 (
log
, "ædÊ2; fxch; fyl2x", "0" (
__x
) : "st(1)")

705 #ià!
	`__GNUC_PREREQ
 (3, 5)

706 
	`__šlše_m©hİ_deşNP
 (
log10
, "ædlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

708 
	`__šlše_m©hcodeNP
 (
asš
, 
__x
,  
	`__©ª2l
 (__x, 
	`__libc_sq¹l
 (1.0 - __x * __x)))

709 
	`__šlše_m©hcodeNP
 (
acos
, 
__x
,  
	`__©ª2l
 (
	`__libc_sq¹l
 (1.0 - __x * __x), __x))

712 #ià!
	`__GNUC_PREREQ
 (3, 4)

713 
	`__šlše_m©hİ_deşNP
 (
©ª
, "æd1; f·n", "0" (
__x
) : "st(1)")

717 
	`__šlše_m©hcode_
 (, 
__sgn1l
, 
__x
, \

718 
__ex‹nsiÚ__
 uniÚ { 
__xld
; 
__xi
[3]; } 
__n
 = \

719 { 
__xld
: 
__x
 
	}
}; \

720 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

721 
	g__n
.
	g__xi
[1] = 0x80000000; \

722 
	g__n
.
	g__xi
[0] = 0; \

723  
	g__n
.
	g__xld
)

726 #ifdeà
__FAST_MATH__


728 
__šlše_m©hcodeNP
 (
sšh
, 
__x
, \

729 
__exm1
 = 
__expm1l
 (
__çb¦
 (
__x
)); \

730  0.5 * (
__exm1
 / (__exm1 + 1.0è+ __exm1è* 
	$__sgn1l
 (
__x
))

732 
	`__šlše_m©hcodeNP
 (
cosh
, 
__x
, \

733 
__ex
 = 
	`__ex¶
 (
__x
); \

734  0.5 * (
__ex
 + 1.0 / __ex))

736 
	`__šlše_m©hcodeNP
 (
nh
, 
__x
, \

737 
__exm1
 = 
	`__expm1l
 (-
	`__çb¦
 (
__x
 + __x)); \

738  
__exm1
 / (__exm1 + 2.0è* 
	`__sgn1l
 (-
__x
))

741 
	`__šlše_m©hcodeNP
 (
æoÜ
, 
__x
, \

742 
__v®ue
; \

743 
__ignÜe
; \

744 
__cw
; \

745 
__cwtmp
; \

746 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

754 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

755 "=m" (
__cw
) \

756 : "0" (
__x
)); \

757  
__v®ue
)

759 
	`__šlše_m©hcodeNP
 (
û
, 
__x
, \

760 
__v®ue
; \

761 
__ignÜe
; \

762 
__cw
; \

763 
__cwtmp
; \

764 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

772 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

773 "=m" (
__cw
) \

774 : "0" (
__x
)); \

775  
__v®ue
)

777 #ifdeà
__FAST_MATH__


778 
	#__ldexp_code
 \

779 
__v®ue
; \

780 
__asm
 
__vŞ©e__
 \

782 : "ñ" (
__v®ue
è: "0" (
__x
), "u" ((è
__y
)); \

783  
__v®ue


	)

785 
__MATH_INLINE
 

786 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

788 
__ldexp_code
;

789 
	}
}

794 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


796 #ifdeà
__FAST_MATH__


797 
	$__šlše_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

801 
	#__M_SQRT2
 1.41421356237309504880L

	)

803 #ià!
	`__GNUC_PREREQ
 (3, 5)

804 
	`__šlše_m©hcodeNP
 (
log1p
, 
__x
, \

805 
__v®ue
; \

806 ià(
	`__çb¦
 (
__x
è>ğ1.0 - 0.5 * 
__M_SQRT2
) \

807 
__v®ue
 = 
	`logl
 (1.0 + 
__x
); \

809 
__asm
 
__vŞ©e__
 \

813 : "ñ" (
__v®ue
è: "0" (
__x
) : "st(1)"); \

814  
__v®ue
)

819 
	`__šlše_m©hcodeNP
 (
asšh
, 
__x
, \

820 
__y
 = 
	`__çb¦
 (
__x
); \

821  (
	`log1¶
 (
__y
 * __y / (
	`__libc_sq¹l
 (__y * __y + 1.0) + 1.0) + __y) \

822 * 
	$__sgn1l
 (
__x
)))

824 
	`__šlše_m©hcodeNP
 (
acosh
, 
__x
, \

825  
	`logl
 (
__x
 + 
	`__libc_sq¹l
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

827 
	`__šlše_m©hcodeNP
 (
©ªh
, 
__x
, \

828 
__y
 = 
	`__çb¦
 (
__x
); \

829  -0.5 * 
	`log1¶
 (-(
__y
 + __yè/ (1.0 + __y)è* 
	$__sgn1l
 (
__x
))

832 
	`__šlše_m©hcodeNP2
 (
hypÙ
, 
__x
, 
__y
,

833  
	`__libc_sq¹l
 (
__x
 * __x + 
__y
 * __y))

835 #ià!
	`__GNUC_PREREQ
 (3, 5)

836 
	`__šlše_m©hcodeNP
(
logb
, 
__x
, \

837 
__v®ue
; \

838 
__junk
; \

839 
__asm
 
__vŞ©e__
 \

841 : "ñ" (
__junk
), "=u" (
__v®ue
è: "0" (
__x
)); \

842  
__v®ue
)

848 #ifdeà
__USE_ISOC99


849 #ifdeà
__FAST_MATH__


851 #ià!
	`__GNUC_PREREQ
 (3, 5)

852 
	`__šlše_m©hİ_deşNP
 (
log2
, "æd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

855 
__MATH_INLINE
 

856 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

858 
__ldexp_code
;

859 
	}
}

861 
__MATH_INLINE
 

862 
__NTH
 (
	$ldex¶
 (
__x
, 
__y
))

864 
__ldexp_code
;

865 
	}
}

867 
__šlše_m©hİNP
 (
ršt
, "frndint")

870 
	#__Ìšt_code
 \

871 
__ÌšŒes
; \

872 
__asm__
 
__vŞ©e__
 \

874 : "=m" (
__ÌšŒes
è: "t" (
__x
) : "st"); \

875  
__ÌšŒes


	)

876 
__MATH_INLINE
 

877 
__NTH
 (
	$Ìštf
 (
__x
))

879 
__Ìšt_code
;

880 
	}
}

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ìšt
 (
__x
))

884 
__Ìšt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$Ìš
 (
__x
))

889 
__Ìšt_code
;

890 
	}
}

891 #undeà
__Ìšt_code


893 
	#__Îršt_code
 \

894 
__ÎršŒes
; \

895 
__asm__
 
__vŞ©e__
 \

897 : "=m" (
__ÎršŒes
è: "t" (
__x
) : "st"); \

898  
__ÎršŒes


	)

899 
__MATH_INLINE
 

900 
__NTH
 (
	$Îrštf
 (
__x
))

902 
__Îršt_code
;

903 
	}
}

904 
__MATH_INLINE
 

905 
__NTH
 (
	$Îršt
 (
__x
))

907 
__Îršt_code
;

908 
	}
}

909 
__MATH_INLINE
 

910 
__NTH
 (
	$Îrš
 (
__x
))

912 
__Îršt_code
;

913 
	}
}

914 #undeà
__Îršt_code


919 #ifdeà
__USE_MISC


921 #ià
defšed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

922 
__šlše_m©hcodeNP2
 (
d»m
, 
__x
, 
__y
, \

923 
__v®ue
; \

924 
__şobb”ed
; \

925 
__asm
 
__vŞ©e__
 \

930 : "ñ" (
__v®ue
), "=&a" (
__şobb”ed
è: "0" (
__x
), "u" (
__y
) : "cc"); \

931  
__v®ue
)

936 
__MATH_INLINE
 

937 
__NTH
 (
	$__fš™e
 (
__x
))

939  (
__ex‹nsiÚ__


940 (((((uniÚ { 
__d
; 
__i
[2]; }è{__d: 
__x
}).__i[1]

942 
	}
}

947 #undeà
__©ª2_code


948 #ifdeà
__FAST_MATH__


949 #undeà
__expm1_code


950 #undeà
__exp_code


951 #undeà
__sšcos_code


958 #ifdeà
__LIBC_INTERNAL_MATH_INLINES


959 
__šlše_m©hİ
 (
__›“754_sq¹
, "fsqrt")

960 
__šlše_m©hcode2
 (
__›“754_©ª2
, 
__y
, 
__x
,

961 
__v®ue
;

962 
__asm
 
__vŞ©e__
 ("fpatan\n\t"

963 : "ñ" (
__v®ue
)

964 : "0" (
__x
), "u" (
__y
) : "st(1)");

965  
__v®ue
;)

	@/usr/include/bits/nan.h

19 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

30 #–ià
defšed
 
__GNUC__


32 
	#NAN
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

44 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


45 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

48 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


49 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

50 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/posix_opt.h

19 #iâdef 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

29 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

32 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

35 
	#_POSIX_FSYNC
 200809L

	)

38 
	#_POSIX_MAPPED_FILES
 200809L

	)

41 
	#_POSIX_MEMLOCK
 200809L

	)

44 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

47 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

50 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

54 
	#_POSIX_VDISABLE
 '\0'

	)

57 
	#_POSIX_NO_TRUNC
 1

	)

60 
	#_XOPEN_REALTIME
 1

	)

63 
	#_XOPEN_REALTIME_THREADS
 1

	)

66 
	#_XOPEN_SHM
 1

	)

69 
	#_POSIX_THREADS
 200809L

	)

72 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

73 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

76 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

79 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

85 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

89 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

91 #ifdeà
__USE_XOPEN2K8


93 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

96 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

100 
	#_POSIX_SEMAPHORES
 200809L

	)

103 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

106 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

107 
	#_POSIX_ASYNC_IO
 1

	)

109 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

111 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

114 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

117 
	#_LFS_LARGEFILE
 1

	)

118 
	#_LFS64_LARGEFILE
 1

	)

119 
	#_LFS64_STDIO
 1

	)

122 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

125 
	#_POSIX_CPUTIME
 0

	)

128 
	#_POSIX_THREAD_CPUTIME
 0

	)

131 
	#_POSIX_REGEXP
 1

	)

134 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

137 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_TIMEOUTS
 200809L

	)

143 
	#_POSIX_SPIN_LOCKS
 200809L

	)

146 
	#_POSIX_SPAWN
 200809L

	)

149 
	#_POSIX_TIMERS
 200809L

	)

152 
	#_POSIX_BARRIERS
 200809L

	)

155 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

158 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

161 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

164 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

167 
	#_POSIX_ADVISORY_INFO
 200809L

	)

170 
	#_POSIX_IPV6
 200809L

	)

173 
	#_POSIX_RAW_SOCKETS
 200809L

	)

176 
	#_POSIX2_CHAR_TERM
 200809L

	)

179 
	#_POSIX_SPORADIC_SERVER
 -1

	)

180 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_TRACE
 -1

	)

184 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

185 
	#_POSIX_TRACE_INHERIT
 -1

	)

186 
	#_POSIX_TRACE_LOG
 -1

	)

189 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

192 
	#_XOPEN_STREAMS
 -1

	)

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__ex‹º_šlše
 

26 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

28  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

26 
__END_NAMESPACE_C99


29 #ifdeà
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

33 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


34 #ifdeà
__USE_MISC


35 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

39 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sŞved
,

25 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sŞved
,

32 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

39 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

68 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

118 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

149 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/string.h

19 #iâdeà
_STRING_H


24 
	#_STRING_ARCH_uÇligÃd
 1

	)

28 #ià!
defšed
 
__x86_64__
 && (defšed 
__i486__
 || defšed 
__³Áium__
 \

29 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

30 || 
defšed
 
	g__nocÚa__
 || defšed 
	g__©om__
 \

31 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__cÜei7__
 \

32 || 
defšed
 
	g__k6__
 || defšed 
	g__geode__
 \

33 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

34 || 
defšed
 
	g__amdçm10__
)

38 #ià!
defšed
 
__NO_STRING_INLINES
 && defšed 
__USE_STRING_INLINES
 \

39 && 
defšed
 
	g__GNUC__
 && __GNUC__ >ğ2 && !
__BOUNDED_POINTERS__


41 #iâdeà
__STRING_INLINE


42 #iâdeà
__ex‹º_šlše


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 
	#__STRING_SMALL_GET16
(
¤c
, 
idx
) \

51 ((((cÚ¡ *è(
¤c
))[
idx
 + 1] << 8) \

52 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
¤c
, 
idx
) \

54 (((((cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

55 | ((cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

56 | ((cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

57 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_memıy
 1

	)

62 
	#memıy
(
de¡
, 
¤c
, 
n
) \

63 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

64 ? 
	`__memıy_c
 ((
de¡
), (
¤c
), (
n
)) \

65 : 
	`__memıy_g
 ((
de¡
), (
¤c
), (
n
))))

	)

66 
	#__memıy_c
(
de¡
, 
¤c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de¡
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__memıy_by4
 (
de¡
, 
¤c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__memıy_by2
 (
de¡
, 
¤c
, 
n
) \

73 : 
	`__memıy_g
 (
de¡
, 
¤c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de¡
;

83 
__asm__
 
__vŞ©e__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 4)

94  
__de¡
;

95 
	}
}

97 
__STRING_INLINE
 *
__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de¡
;

105 
__asm__
 
__vŞ©e__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 2)

121  
__de¡
;

122 
	}
}

124 
__STRING_INLINE
 *
__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de¡
;

131 
__asm__
 
__vŞ©e__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__¤c
),

145 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
)

147  
__de¡
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #iâdeà
_FORCE_INLINES


154 
	#memmove
(
de¡
, 
¤c
, 
n
è
	`__memmove_g
 (de¡, src,‚)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, cÚ¡ *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de¡
;

164 ià(
__de¡
 < 
__¤c
)

165 
__asm__
 
__vŞ©e__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

170 : "0" (
__n
), "1" (
__¤c
), "2" (
__tmp
),

171 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

173 
__asm__
 
__vŞ©e__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

179 : "0" (
__n
), "1" (__À- 1 + (cÚ¡ *è
__¤c
),

180 "2" (
__n
 - 1 + (*è
__tmp
),

181 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

182  
__de¡
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #iâdeà
_FORCE_INLINES


189 #iâdeà
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__»s
;

196 
__asm__
 
__vŞ©e__


204 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

209  
__»s
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__butš_cÚ¡ªt_p
 (
c
) \

223 ? (
	`__butš_cÚ¡ªt_p
 (
n
) \

224 ? 
	`__mem£t_cú
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__butš_cÚ¡ªt_p
 (
n
) \

227 ? 
	`__mem£t_gú
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
è({ *
__s
 = (s); \

231 *((*è
__s
èğ(è(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((è((è(
c
))) * 0x01010101; \

247 ià((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vŞ©e__
 ("" : "ô" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (è
__c
; \

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (è
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (è
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (è
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_cú
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_cú_by4
 (
s
, ((è((è(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_cú_by2
 (
s
, \

317 ((è((è(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_cú_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_cú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifdeà
__i686__


330 
__asm__
 
__vŞ©e__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vŞ©e__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_cú_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_cú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifdeà
__i686__


361 
__asm__
 
__vŞ©e__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vŞ©e__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_gú
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_gú_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_gú_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vŞ©e__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vŞ©e__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #iâdeà
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifdeà
__i686__


449 
__d1
;

451 *
__»s
;

452 ià(
__n
 == 0)

453  
NULL
;

454 #ifdeà
__i686__


455 
__asm__
 
__vŞ©e__


459 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vŞ©e__


470 : "=D" (
__»s
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

475  
__»s
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #iâdeà
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifdeà
__i686__


488 
__d1
;

490 *
__»s
;

491 ià(
__n
 == 0)

492  
NULL
;

493 #ifdeà
__i686__


494 
__asm__
 
__vŞ©e__


500 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vŞ©e__


512 : "=D" (
__»s
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

517  
__»s
;

518 
	}
}

519 #ifdeà
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
è
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_¿wmemchr
 1

	)

526 
__STRING_INLINE
 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

528 #iâdeà
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

532 
__d0
;

533 *
__»s
;

534 
__asm__
 
__vŞ©e__


537 : "=D" (
__»s
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

541  
__»s
 - 1;

542 
	}
}

543 #ifdeà
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

547  
	`__¿wmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_¡¾’
 1

	)

555 
	#¡¾’
(
¡r
) \

556 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¡r
) \

557 ? 
	`__butš_¡¾’
 (
¡r
) \

558 : 
	`__¡¾’_g
 (
¡r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__¡¾’_g
 (cÚ¡ *
__¡r
);

561 
__STRING_INLINE
 
size_t


562 
	$__¡¾’_g
 (cÚ¡ *
__¡r
)

564 
__dummy
;

565 cÚ¡ *
__tmp
 = 
__¡r
;

566 
__asm__
 
__vŞ©e__


572 : "ô" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__¡r
),

574 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¡r
)

576  
__tmp
 - 
__¡r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_¡rıy
 1

	)

582 
	#¡rıy
(
de¡
, 
¤c
) \

583 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

584 ? ( ((
¤c
)[0]è=ğ1 && 
	`¡¾’
 (src) + 1 <= 8 \

585 ? 
	`__¡rıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

586 : (*è
	`memıy
 ((*è(
de¡
), \

587 (cÚ¡ *è(
¤c
), \

588 
	`¡¾’
 (
¤c
) + 1)) \

589 : 
	`__¡rıy_g
 ((
de¡
), (
¤c
))))

	)

591 
	#__¡rıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

592 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*è
__de¡
; \

599 
¤ş’
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

609 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

617 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

622 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

627 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

629 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

638 (*è
__de¡
; }))

	)

640 
__STRING_INLINE
 *
__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

642 
__STRING_INLINE
 *

643 
	$__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

645 *
__tmp
 = 
__de¡
;

646 
__dummy
;

647 
__asm__
 
__vŞ©e__


656 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

658 : "0" (
__¤c
), "1" (
__tmp
),

659 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

661  
__de¡
;

662 
	}
}

665 #ifdeà
__USE_GNU


666 
	#_HAVE_STRING_ARCH_¡pıy
 1

	)

668 
	#__¡pıy
(
de¡
, 
¤c
) \

669 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

670 ? (
	`¡¾’
 (
¤c
) + 1 <= 8 \

671 ? 
	`__¡pıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

672 : 
	`__¡pıy_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1)) \

673 : 
	`__¡pıy_g
 ((
de¡
), (
¤c
))))

	)

674 
	#__¡pıy_c
(
de¡
, 
¤c
, 
¤ş’
) \

675 ((
¤ş’
) % 4 == 0 \

676 ? 
	`__mempıy_by4
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

677 : ((
¤ş’
) % 2 == 0 \

678 ? 
	`__mempıy_by2
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

679 : 
	`__mempıy_byn
 (
de¡
, 
¤c
, 
¤ş’
è- 1))

	)

682 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 ((de¡), (¤c))

	)

684 
	#__¡pıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

685 (
	`__ex‹nsiÚ__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*è(
de¡
); \

691 
¤ş’
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

698 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

702 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

707 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

711 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

716 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

718 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

722 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

724 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

729 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

731 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

734 (*è
__u
; }))

	)

736 
__STRING_INLINE
 *
__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

737 
size_t
 
__¤ş’
);

739 
__STRING_INLINE
 *

740 
	$__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

742 *
__tmp
 = 
__de¡
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vŞ©e__


752 : "=&r" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

759 
size_t
 
__¤ş’
);

761 
__STRING_INLINE
 *

762 
	$__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

764 *
__tmp
 = 
__de¡
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vŞ©e__


779 : "=&q" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
),

780 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

781 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

782 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
,

788 
size_t
 
__¤ş’
);

790 
__STRING_INLINE
 *

791 
	$__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de¡
;

795 
__asm__
 
__vŞ©e__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

808 : "0" (
__tmp
), "1" (
__¤ş’
), "2" (
__¤c
),

809 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

816 
__STRING_INLINE
 *

817 
	$__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

819 *
__tmp
 = 
__de¡
;

820 
__dummy
;

821 
__asm__
 
__vŞ©e__


830 : "=&r" (
__¤c
), "ô" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

832 : "0" (
__¤c
), "1" (
__tmp
),

833 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_¡ºıy
 1

	)

842 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

843 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

844 ? ((
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

845 ? (*è
	`memıy
 ((*è(
de¡
), \

846 (cÚ¡ *è(
¤c
), 
n
) \

847 : 
	`__¡ºıy_cg
 ((
de¡
), (
¤c
), 
	`¡¾’
 (¤cè+ 1, 
n
))) \

848 : 
	`__¡ºıy_gg
 ((
de¡
), (
¤c
), 
n
)))

	)

849 
	#__¡ºıy_cg
(
de¡
, 
¤c
, 
¤ş’
, 
n
) \

850 (((
¤ş’
) % 4 == 0) \

851 ? 
	`__¡ºıy_by4
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

852 : (((
¤ş’
) % 2 == 0) \

853 ? 
	`__¡ºıy_by2
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

854 : 
	`__¡ºıy_byn
 (
de¡
, 
¤c
, 
¤ş’
, 
n
)))

	)

856 
__STRING_INLINE
 *
__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[],

857 
size_t
 
__¤ş’
, size_ˆ
__n
);

859 
__STRING_INLINE
 *

860 
	$__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

862 *
__tmp
 = 
__de¡
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vŞ©e__


872 : "=&r" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

873 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

874 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4),

875 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

877 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

878  
__de¡
;

879 
	}
}

881 
__STRING_INLINE
 *
__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[],

882 
size_t
 
__¤ş’
, size_ˆ
__n
);

884 
__STRING_INLINE
 *

885 
	$__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

887 *
__tmp
 = 
__de¡
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vŞ©e__


902 : "=&q" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

903 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

904 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

905 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

907 (è
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__¤ş’
);

908  
__de¡
;

909 
	}
}

911 
__STRING_INLINE
 *
__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[],

912 
size_t
 
__¤ş’
, size_ˆ
__n
);

914 
__STRING_INLINE
 *

915 
	$__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de¡
;

919 
__asm__
 
__vŞ©e__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

932 : "1" (
__¤ş’
), "0" (
__tmp
),"2" (
__¤c
),

933 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

935 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

936  
__de¡
;

937 
	}
}

939 
__STRING_INLINE
 *
__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de¡
;

946 
__dummy
;

947 ià(
__n
 > 0)

948 
__asm__
 
__vŞ©e__


964 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__¤c
), "1" (
__tmp
), "3" (
__n
)

968  
__de¡
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_¡rÿt
 1

	)

974 
	#¡rÿt
(
de¡
, 
¤c
) \

975 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

976 ? 
	`__¡rÿt_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

977 : 
	`__¡rÿt_g
 ((
de¡
), (
¤c
))))

	)

979 
__STRING_INLINE
 *
__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[],

980 
size_t
 
__¤ş’
);

982 
__STRING_INLINE
 *

983 
	$__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
)

985 #ifdeà
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vŞ©e__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

992 : "0" (
__de¡
), "1" (0xffffffff), "a" (0),

993 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de¡
 - 1;

998 
__asm__
 
__vŞ©e__


1003 : "ô" (
__tmp
),

1004 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1005 : "0" (
__tmp
),

1006 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

1009 (è
	`memıy
 (
__tmp
, 
__¤c
, 
__¤ş’
);

1010  
__de¡
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
);

1015 
__STRING_INLINE
 *

1016 
	$__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
)

1018 *
__tmp
 = 
__de¡
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vŞ©e__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
),

1033 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1034 : "1" (
__tmp
), "2" (
__¤c
),

1035 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

1037  
__de¡
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_¡ºÿt
 1

	)

1043 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

1044 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

1045 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

1046 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

1047 ? 
	`¡rÿt
 (
__de¡
, (
¤c
)) \

1048 : (*(*)
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

1049 (cÚ¡ *è(
¤c
), \

1050 (
n
)èğ0, 
__de¡
)) \

1051 : 
	`__¡ºÿt_g
 (
__de¡
, (
¤c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de¡
;

1060 
__dummy
;

1061 #ifdeà
__i686__


1062 
__asm__
 
__vŞ©e__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__¤c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__¤c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vŞ©e__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
)

1102  
__de¡
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_¡rcmp
 1

	)

1108 
	#¡rcmp
(
s1
, 
s2
) \

1109 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

1110 && ( ((
s1
)[0]è!ğ1 || 
	`¡¾’
 (s1) >= 4) \

1111 && ( ((
s2
)[0]è!ğ1 || 
	`¡¾’
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

1113 (
	`¡¾’
 (
s1
è< sŒËÀ(
s2
) \

1114 ? 
	`¡¾’
 (
s1
è: sŒËÀ(
s2
)) + 1) \

1115 : (
	`__butš_cÚ¡ªt_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (
s1
) < 4 \

1117 ? (
	`__butš_cÚ¡ªt_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1119 (cÚ¡ *è(
s2
), \

1120 
	`¡¾’
 (
s1
)) \

1121 : 
	`__¡rcmp_cg
 ((cÚ¡ *è(
s1
), \

1122 (cÚ¡ *è(
s2
), \

1123 
	`¡¾’
 (
s1
))) \

1124 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (s2) < 4 \

1126 ? (
	`__butš_cÚ¡ªt_p
 (
s1
) \

1127 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1128 (cÚ¡ *è(
s2
), \

1129 
	`¡¾’
 (
s2
)) \

1130 : 
	`__¡rcmp_gc
 ((cÚ¡ *è(
s1
), \

1131 (cÚ¡ *è(
s2
), \

1132 
	`¡¾’
 (
s2
))) \

1133 : 
	`__¡rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = (
s1
)[0] - (
s2
)[0]; \

1137 ià(
l
 > 0 && 
__»suÉ
 == 0) \

1139 
__»suÉ
 = (
s1
)[1] - (
s2
)[1]; \

1140 ià(
l
 > 1 && 
__»suÉ
 == 0) \

1142 
__»suÉ
 = (
s1
)[2] - (
s2
)[2]; \

1143 ià(
l
 > 2 && 
__»suÉ
 == 0) \

1144 
__»suÉ
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__»suÉ
; }))

	)

1149 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = (
s2
); \

1151 
__»suÉ
 = (
s1
)[0] - 
__s2
[0]; \

1152 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

1154 
__»suÉ
 = (
s1
)[1] - 
__s2
[1]; \

1155 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

1157 
__»suÉ
 = (
s1
)[2] - 
__s2
[2]; \

1158 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

1159 
__»suÉ
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__»suÉ
; }))

	)

1164 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = (
s1
); \

1166 
__»suÉ
 = 
__s1
[0] - (
s2
)[0]; \

1167 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

1169 
__»suÉ
 = 
__s1
[1] - (
s2
)[1]; \

1170 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

1172 
__»suÉ
 = 
__s1
[2] - (
s2
)[2]; \

1173 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

1174 
__»suÉ
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__»suÉ
; }))

	)

1179 
__STRING_INLINE
 
__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

1184 
__»s
;

1185 
__asm__
 
__vŞ©e__


1201 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__»s
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_¡ºcmp
 1

	)

1212 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`¡¾’
 (s1è< ((
size_t
è(
n
)) \

1214 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`¡¾’
 (s2è< ((
size_t
è(
n
))\

1216 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__¡ºcmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

1225 
__»s
;

1226 
__asm__
 
__vŞ©e__


1245 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

1250  
__»s
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_¡rchr
 1

	)

1256 
	#_USE_STRING_ARCH_¡rchr
 1

	)

1257 
	#¡rchr
(
s
, 
c
) \

1258 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*è
	`__¿wmemchr
 ((
s
), (
c
)) \

1261 : 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__¡rchr_c
 (cÚ¡ *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__¡rchr_c
 (cÚ¡ *
__s
, 
__c
)

1269 
__d0
;

1270 *
__»s
;

1271 
__asm__
 
__vŞ©e__


1281 : "ô" (
__»s
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1285  
__»s
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__¡rchr_g
 (cÚ¡ *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__¡rchr_g
 (cÚ¡ *
__s
, 
__c
)

1293 
__d0
;

1294 *
__»s
;

1295 
__asm__
 
__vŞ©e__


1306 : "ô" (
__»s
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1310  
__»s
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_¡rchºul
 1

	)

1316 
	#__¡rchºul
(
s
, 
c
) \

1317 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*è
	`__¿wmemchr
 ((
s
), 
c
) \

1320 : 
	`__¡rchºul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__¡rchºul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
)

1328 
__d0
;

1329 *
__»s
;

1330 
__asm__
 
__vŞ©e__


1340 : "ô" (
__»s
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1344  
__»s
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
)

1352 
__d0
;

1353 *
__»s
;

1354 
__asm__
 
__vŞ©e__


1365 : "ô" (
__»s
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1369  
__»s
;

1370 
	}
}

1371 #ifdeà
__USE_GNU


1372 
	#¡rchºul
(
s
, 
c
è
	`__¡rchºul
 ((s), (c))

	)

1376 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_šdex
 1

	)

1379 
	#šdex
(
s
, 
c
) \

1380 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1381 ? 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_¡¼chr
 1

	)

1388 
	#¡¼chr
(
s
, 
c
) \

1389 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1390 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1393 #ifdeà
__i686__


1394 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__»s
;

1401 
__asm__
 
__vŞ©e__


1409 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1413  
__»s
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__»s
;

1423 
__asm__
 
__vŞ©e__


1432 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1436  
__»s
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__»s
;

1446 
__asm__
 
__vŞ©e__


1456 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1460  
__»s
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__»s
;

1470 
__asm__
 
__vŞ©e__


1481 : "ô" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1485  
__»s
;

1486 
	}
}

1490 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_ršdex
 1

	)

1493 
	#ršdex
(
s
, 
c
) \

1494 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1495 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_¡rc¥n
 1

	)

1503 
	#¡rc¥n
(
s
, 
»jeù
) \

1504 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
»jeù
) &&  ((reject)[0]) == 1 \

1505 ? ((
»jeù
)[0] == '\0' \

1506 ? 
	`¡¾’
 (
s
) \

1507 : ((
»jeù
)[1] == '\0' \

1508 ? 
	`__¡rc¥n_c1
 ((
s
), (((
»jeù
)[0] << 8) & 0xff00)) \

1509 : 
	`__¡rc¥n_cg
 ((
s
), (
»jeù
), 
	`¡¾’
 (reject)))) \

1510 : 
	`__¡rc¥n_g
 ((
s
), (
»jeù
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

1514 #iâdeà
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

1518 
__d0
;

1519 *
__»s
;

1520 
__asm__
 
__vŞ©e__


1529 : "ô" (
__»s
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__»jeù
),

1531 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__»s
 - 1è- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[],

1538 
size_t
 
__»jeù_Ën
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[], 
size_t
 
__»jeù_Ën
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 cÚ¡ *
__»s
;

1545 
__asm__
 
__vŞ©e__


1556 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__»jeù
), "g" (
__»jeù_Ën
)

1559  (
__»s
 - 1è- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
);

1563 #ifdeà
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 cÚ¡ *
__»s
;

1570 
__asm__
 
__vŞ©e__


1587 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__»jeù
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__»s
 - 1è- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 cÚ¡ *
__»s
;

1598 
__asm__
 
__vŞ©e__


1612 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__»jeù
), "b" (__reject)

1616  (
__»s
 - 1è- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_¡r¥n
 1

	)

1624 
	#¡r¥n
(
s
, 
acû±
) \

1625 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1626 ? ((
acû±
)[0] == '\0' \

1627 ? ((è(
s
), 0) \

1628 : ((
acû±
)[1] == '\0' \

1629 ? 
	`__¡r¥n_c1
 ((
s
), (((
acû±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__¡r¥n_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1631 : 
	`__¡r¥n_g
 ((
s
), (
acû±
))))

	)

1633 #iâdeà
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1639 
__d0
;

1640 *
__»s
;

1642 
__asm__
 
__vŞ©e__


1648 : "ô" (
__»s
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__acû±
),

1650 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__»s
 - 1è- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1657 
size_t
 
__acû±_Ën
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 cÚ¡ *
__»s
;

1664 
__asm__
 
__vŞ©e__


1675 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__acû±
), "g" (
__acû±_Ën
),

1679 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__acû±_Ën
]; } *)
__acû±
)

1682  (
__»s
 - 1è- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1686 #ifdeà
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 cÚ¡ *
__»s
;

1693 
__asm__
 
__vŞ©e__


1709 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__»s
 - 1è- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 cÚ¡ *
__»s
;

1720 
__asm__
 
__vŞ©e__


1734 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__acû±
), "b" (__accept)

1737  (
__»s
 - 1è- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_¡½brk
 1

	)

1744 
	#¡½brk
(
s
, 
acû±
) \

1745 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1746 ? ((
acû±
)[0] == '\0' \

1747 ? ((è(
s
), (*) 0) \

1748 : ((
acû±
)[1] == '\0' \

1749 ? 
	`¡rchr
 ((
s
), (
acû±
)[0]) \

1750 : 
	`__¡½brk_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1751 : 
	`__¡½brk_g
 ((
s
), (
acû±
))))

	)

1753 
__STRING_INLINE
 *
__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1754 
size_t
 
__acû±_Ën
);

1756 
__STRING_INLINE
 *

1757 
	$__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__»s
;

1761 
__asm__
 
__vŞ©e__


1776 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__acû±
), "g" (
__acû±_Ën
)

1779  
__»s
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1783 #ifdeà
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__»s
;

1790 
__asm__
 
__vŞ©e__


1811 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__»s
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__»s
;

1822 
__asm__
 
__vŞ©e__


1841 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__acû±
)

1844  
__»s
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_¡r¡r
 1

	)

1851 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1852 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
) &&  ((needle)[0]) == 1 \

1853 ? ((
ÃedË
)[0] == '\0' \

1854 ? (
hay¡ack
) \

1855 : ((
ÃedË
)[1] == '\0' \

1856 ? 
	`¡rchr
 ((
hay¡ack
), (
ÃedË
)[0]) \

1857 : 
	`__¡r¡r_cg
 ((
hay¡ack
), (
ÃedË
), \

1858 
	`¡¾’
 (
ÃedË
)))) \

1859 : 
	`__¡r¡r_g
 ((
hay¡ack
), (
ÃedË
))))

	)

1863 
__STRING_INLINE
 *
__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
,

1864 cÚ¡ 
__ÃedË
[],

1865 
size_t
 
__ÃedË_Ën
);

1867 
__STRING_INLINE
 *

1868 
	$__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
, cÚ¡ 
__ÃedË
[],

1869 
size_t
 
__ÃedË_Ën
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__»s
;

1873 
__asm__
 
__vŞ©e__


1886 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__ÃedË_Ën
), "1" (
__hay¡ack
), "d" (
__ÃedË
)

1889  
__»s
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__¡r¡r_g
 (cÚ¡ *
__hay¡ack
,

1893 cÚ¡ *
__ÃedË
);

1894 #ifdeà
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__»s
;

1901 
__asm__
 
__vŞ©e__


1920 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1922 "d" (
__ÃedË
)

1924  
__»s
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__»s
;

1932 
__asm__
 
__vŞ©e__


1949 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1951 "b" (
__ÃedË
)

1953  
__»s
;

1954 
	}
}

1960 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1961 #ifdeà
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
wÜd
è(
	`__butš_cÚ¡ªt_p
 (word) \

1964 ? 
	`__butš_ffs
 (
wÜd
) \

1965 : ({ 
__út
, 
__tmp
; \

1966 
__asm__
 
__vŞ©e__
 \

1969 : "=&r" (
__út
), "ô" (
__tmp
) \

1970 : "rm" (
wÜd
), "1" (-1)); \

1971 
__út
 + 1; }))

	)

1973 #iâdeà
ff¦


1974 
	#ff¦
(
wÜd
è
	`ffs
(wÜd)

	)

1979 #iâdeà
_FORCE_INLINES


1980 #undeà
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #iâdeà
_STRING_H


24 #ià!
defšed
 
__NO_STRING_INLINES
 && !defšed 
__BOUNDED_POINTERS__


41 #iâdeà
__STRING_INLINE


42 #ifdeà
__ılu¥lus


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

49 #ià
_STRING_ARCH_uÇligÃd


51 
	~<’dŸn.h
>

52 
	~<b™s/ty³s.h
>

54 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

56 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

57 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

59 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

60 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

61 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

62 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

65 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

66 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

68 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

69 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

70 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

71 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 ¡ruù { 
__¬r
[
N
]; } \

78 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #undeà
__STRING2_COPY_TYPE


92 
	#__¡ršg2_1b±r_p
(
__x
) \

93 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ğ1)

	)

96 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


97 #ià!
__GNUC_PREREQ
 (3, 0)

98 #ià
_STRING_ARCH_uÇligÃd


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

109 *((
__ušt8_t
 *è
__s
èğ(__ušt8_tè
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

121 (è(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (è
__c
 * 0x0101; \

134 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (è
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (è
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (è
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #ià
__GNUC_PREREQ
 (2, 91)

194 
	#__bz”o
(
s
, 
n
è
	`__butš_mem£t
 (s, '\0',‚)

	)

202 #ifdeà
__USE_GNU


203 #ià!
defšed
 
_HAVE_STRING_ARCH_mempıy
 || defšed 
_FORCE_INLINES


204 #iâdeà
_HAVE_STRING_ARCH_mempıy


205 #ià
__GNUC_PREREQ
 (3, 4)

206 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__butš_mempıy
 (de¡, src,‚)

	)

207 #–ià
__GNUC_PREREQ
 (3, 0)

208 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

209 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

210 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

211 ? 
	`__butš_memıy
 (
de¡
, 
¤c
, 
n
) + (n) \

212 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

214 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

215 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

216 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

217 ? 
	`__mempıy_sm®l
 (
de¡
, 
	`__mempıy_¬gs
 (
¤c
), 
n
) \

218 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

222 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy
 (de¡, src,‚)

	)

225 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


226 #ià
_STRING_ARCH_uÇligÃd


227 #iâdeà
_FORCE_INLINES


228 
	#__mempıy_¬gs
(
¤c
) \

229 ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[2], \

230 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[6], \

231 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

236 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , , , ,

237 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

238 
__ušt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__mempıy_sm®l
 (*
__de¡1
,

241 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

242 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

243 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

244 
size_t
 
__¤ş’
)

247 
__ušt32_t
 
__ui
;

248 
__ušt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de¡1
;

252 (è
__¤ş’
)

255 
__u
->
__c
 = 
__¤c0_1
;

256 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__¤c0_2
;

260 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__¤c0_2
;

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__¤c2_1
;

266 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__¤c0_4
;

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__¤c0_4
;

274 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__¤c4_1
;

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__¤c0_4
;

280 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__¤c4_2
;

282 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__¤c0_4
;

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__¤c4_2
;

288 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__¤c6_1
;

290 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__¤c0_4
;

294 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__¤c4_4
;

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

299  (*è
__u
;

300 
	}
}

302 #iâdeà
_FORCE_INLINES


303 
	#__mempıy_¬gs
(
¤c
) \

304 ((cÚ¡ *è(
¤c
))[0], \

305 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1] } }), \

307 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

309 ((cÚ¡ *è(
¤c
))[2] } }), \

310 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

312 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3] } }), \

313 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

315 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

316 ((cÚ¡ *è(
¤c
))[4] } }), \

317 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

319 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

320 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5] } }), \

321 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

323 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

324 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

325 ((cÚ¡ *è(
¤c
))[6] } }), \

326 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

328 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

329 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

330 ((cÚ¡ *è(
¤c
))[6], ((cÚ¡ *è(¤c))[7] } })

	)

332 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__mempıy_sm®l
 (*
__de¡
, 
__¤c1
,

341 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

342 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

343 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

344 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sÿ2
;

349 
__STRING2_COPY_ARR3
 
__sÿ3
;

350 
__STRING2_COPY_ARR4
 
__sÿ4
;

351 
__STRING2_COPY_ARR5
 
__sÿ5
;

352 
__STRING2_COPY_ARR6
 
__sÿ6
;

353 
__STRING2_COPY_ARR7
 
__sÿ7
;

354 
__STRING2_COPY_ARR8
 
__sÿ8
;

355 } *
__u
 = 
__de¡
;

356 (è
__¤ş’
)

359 
__u
->
__c
 = 
__¤c1
;

362 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

365 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

368 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

371 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

374 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

377 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

380 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

383  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤ş’
);

384 
	}
}

392 #iâdeà
_HAVE_STRING_ARCH_¡rchr


393 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

394 #ià
__GNUC_PREREQ
 (3, 2)

395 
	#¡rchr
(
s
, 
c
) \

396 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
è&& !__butš_cÚ¡ªt_°(
s
) \

397 && (
c
) == '\0' \

398 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

399 : 
	`__butš_¡rchr
 (
s
, 
c
)))

	)

401 
	#¡rchr
(
s
, 
c
) \

402 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

403 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

404 : 
	`¡rchr
 (
s
, 
c
)))

	)

410 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
defšed
 
	g_FORCE_INLINES


412 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#¡rıy
(
de¡
, 
¤c
) \

414 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

415 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

416 ? 
	`__¡rıy_sm®l
 (
de¡
, 
	`__¡rıy_¬gs
 (
¤c
), \

417 
	`¡¾’
 (
¤c
) + 1) \

418 : (*è
	`memıy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

419 : 
	`¡rıy
 (
de¡
, 
¤c
)))

	)

422 #ià
_STRING_ARCH_uÇligÃd


423 #iâdeà
_FORCE_INLINES


424 
	#__¡rıy_¬gs
(
¤c
) \

425 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

430 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

431 
__ušt32_t
, __ušt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__¡rıy_sm®l
 (*
__de¡
,

434 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

435 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

436 
size_t
 
__¤ş’
)

439 
__ušt32_t
 
__ui
;

440 
__ušt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*è
__de¡
;

443 (è
__¤ş’
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__¤c0_2
;

452 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__¤c0_4
;

460 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__¤c0_4
;

466 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__¤c4_2
;

470 
__u
->
__ui
 = 
__¤c0_4
;

471 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__¤c4_2
;

473 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__¤c0_4
;

478 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__¤c4_4
;

482  
__de¡
;

483 
	}
}

485 #iâdeà
_FORCE_INLINES


486 
	#__¡rıy_¬gs
(
¤c
) \

487 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

489 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

492 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

494 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

495 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

497 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

499 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

501 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

502 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

503 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

505 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

506 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

508 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

510 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

511 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

512 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__¡rıy_sm®l
 (*
__de¡
,

523 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

524 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

525 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

526 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sÿ2
;

531 
__STRING2_COPY_ARR3
 
__sÿ3
;

532 
__STRING2_COPY_ARR4
 
__sÿ4
;

533 
__STRING2_COPY_ARR5
 
__sÿ5
;

534 
__STRING2_COPY_ARR6
 
__sÿ6
;

535 
__STRING2_COPY_ARR7
 
__sÿ7
;

536 
__STRING2_COPY_ARR8
 
__sÿ8
;

537 } *
__u
 = (*è
__de¡
;

538 (è
__¤ş’
)

541 
__u
->
__c
 = '\0';

544 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

547 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

550 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

553 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

556 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

559 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

562 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

565  
__de¡
;

566 
	}
}

572 #ifdeà
__USE_GNU


573 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pıy
 || defšed 
_FORCE_INLINES


574 #iâdeà
_HAVE_STRING_ARCH_¡pıy


575 #ià
__GNUC_PREREQ
 (3, 4)

576 
	#__¡pıy
(
de¡
, 
¤c
è
	`__butš_¡pıy
 (de¡, src)

	)

577 #–ià
__GNUC_PREREQ
 (3, 0)

578 
	#__¡pıy
(
de¡
, 
¤c
) \

579 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

580 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

581 ? 
	`__butš_¡rıy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

582 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

584 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

586 
	#__¡pıy
(
de¡
, 
¤c
) \

587 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

588 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

589 ? 
	`__¡pıy_sm®l
 (
de¡
, 
	`__¡pıy_¬gs
 (
¤c
), \

590 
	`¡¾’
 (
¤c
) + 1) \

591 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

593 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

597 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 (de¡, src)

	)

600 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


601 #ià
_STRING_ARCH_uÇligÃd


602 #iâdeà
_FORCE_INLINES


603 
	#__¡pıy_¬gs
(
¤c
) \

604 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

609 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

610 
__ušt32_t
, __ušt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__¡pıy_sm®l
 (*
__de¡
,

613 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

614 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

615 
size_t
 
__¤ş’
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*è
__de¡
;

623 (è
__¤ş’
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__¤c0_2
;

630 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__¤c0_2
;

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__¤c0_4
;

639 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__¤c0_4
;

643 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__¤c0_4
;

648 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__¤c4_2
;

650 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__¤c0_4
;

654 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__¤c4_2
;

656 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__¤c0_4
;

661 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__¤c4_4
;

663 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #iâdeà
_FORCE_INLINES


670 
	#__¡pıy_¬gs
(
¤c
) \

671 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

673 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

676 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

678 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

679 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

681 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

683 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

685 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

686 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

687 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

689 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

690 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

692 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

694 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

695 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

696 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__¡pıy_sm®l
 (*
__de¡
,

707 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

708 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

709 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

710 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sÿ2
;

715 
__STRING2_COPY_ARR3
 
__sÿ3
;

716 
__STRING2_COPY_ARR4
 
__sÿ4
;

717 
__STRING2_COPY_ARR5
 
__sÿ5
;

718 
__STRING2_COPY_ARR6
 
__sÿ6
;

719 
__STRING2_COPY_ARR7
 
__sÿ7
;

720 
__STRING2_COPY_ARR8
 
__sÿ8
;

721 } *
__u
 = (*è
__de¡
;

722 (è
__¤ş’
)

725 
__u
->
__c
 = '\0';

728 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

731 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

734 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

737 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

740 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

743 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

746 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

749  
__de¡
 + 
__¤ş’
 - 1;

750 
	}
}

758 #iâdeà
_HAVE_STRING_ARCH_¡ºıy


759 #ià
__GNUC_PREREQ
 (3, 2)

760 
	#¡ºıy
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºıy
 (de¡, src,‚)

	)

762 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

763 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

764 ? (
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

765 ? (*è
	`memıy
 (
de¡
, 
¤c
, 
n
) \

766 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)) \

767 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)))

	)

773 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


774 #ifdeà
_USE_STRING_ARCH_¡rchr


775 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

776 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

777 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

778 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

779 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

780 : (*((*è
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

781 
¤c
, 
n
)èğ'\0', 
__de¡
)) \

782 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

783 #–ià
__GNUC_PREREQ
 (3, 2)

784 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºÿt
 (de¡, src,‚)

	)

786 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

787 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

788 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

789 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

790 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

797 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


798 #ià
__GNUC_PREREQ
 (3, 2)

799 
	#¡rcmp
(
s1
, 
s2
) \

800 
__ex‹nsiÚ__
 \

801 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

802 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

803 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

804 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

805 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

806 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

807 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

808 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

809 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

810 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

811 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

812 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

813 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

814 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

815 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

816 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

817 : 
	`__butš_¡rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#¡rcmp
(
s1
, 
s2
) \

820 
__ex‹nsiÚ__
 \

821 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

822 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

823 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

824 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

825 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

826 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

827 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

829 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

830 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

831 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

832 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

833 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

834 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

835 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

836 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

837 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

838 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

843 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

844 - ((cÚ¡ *è(cÚ¡ *)(
s2
))[0]); \

845 ià(
l
 > 0 && 
__»suÉ
 == 0) \

847 
__»suÉ
 = (((const *) \

848 (cÚ¡ *è(
s1
))[1] \

850 (cÚ¡ *è(
s2
))[1]); \

851 ià(
l
 > 1 && 
__»suÉ
 == 0) \

853 
__»suÉ
 = \

855 (cÚ¡ *è(
s1
))[2] \

857 (cÚ¡ *è(
s2
))[2]); \

858 ià(
l
 > 2 && 
__»suÉ
 == 0) \

859 
__»suÉ
 = \

861 (cÚ¡ *è(
s1
))[3] \

863 (cÚ¡ *è(
s2
))[3]); \

866 
__»suÉ
; }))

	)

868 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = \

870 (cÚ¡ *è(cÚ¡ *è(
s2
); \

871 
__»suÉ
 = \

872 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

873 - 
__s2
[0]); \

874 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

876 
__»suÉ
 = (((const *) \

877 (cÚ¡ *è(
s1
))[1] - 
__s2
[1]); \

878 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

880 
__»suÉ
 = (((const *) \

881 (cÚ¡ *è(
s1
))[2] - 
__s2
[2]); \

882 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

883 
__»suÉ
 = (((const *) \

884 (cÚ¡ *è(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__»suÉ
; }))

	)

890 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

891 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = \

892 (cÚ¡ *è(cÚ¡ *è(
s1
); \

893 
__»suÉ
 = \

894 
__s1
[0] - ((const *) \

895 (cÚ¡ *è(
s2
))[0]; \

896 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

898 
__»suÉ
 = (
__s1
[1] \

900 (cÚ¡ *è(
s2
))[1]); \

901 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

903 
__»suÉ
 = \

904 (
__s1
[2] - ((const *) \

905 (cÚ¡ *è(
s2
))[2]); \

906 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

907 
__»suÉ
 = \

908 (
__s1
[3] \

910 (cÚ¡ *è(
s2
))[3]); \

913 
__»suÉ
; }))

	)

918 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


919 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

920 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

921 && ((
	`__butš_cÚ¡ªt_p
 (
s1
) \

922 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

923 || (
	`__butš_cÚ¡ªt_p
 (
s2
) \

924 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

925 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

931 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


932 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


933 #ià
__GNUC_PREREQ
 (3, 2)

934 
	#¡rc¥n
(
s
, 
»jeù
) \

935 
__ex‹nsiÚ__
 \

936 ({ 
__r0
, 
__r1
, 
__r2
; \

937 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

938 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

939 ? 
	`__butš_¡rc¥n
 (
s
, 
»jeù
) \

940 : ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

941 ? 
	`¡¾’
 (
s
) \

942 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

943 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

944 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

945 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

946 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

947 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

948 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)))))) \

949 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

951 
	#¡rc¥n
(
s
, 
»jeù
) \

952 
__ex‹nsiÚ__
 \

953 ({ 
__r0
, 
__r1
, 
__r2
; \

954 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

955 ? ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

956 ? 
	`¡¾’
 (
s
) \

957 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

958 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

959 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

960 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

961 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

962 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

963 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

964 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

968 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

969 
__STRING_INLINE
 
size_t


970 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

972 
size_t
 
__»suÉ
 = 0;

973 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù
)

974 ++
__»suÉ
;

975  
__»suÉ
;

976 
	}
}

978 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
,

979 
__»jeù2
);

980 
__STRING_INLINE
 
size_t


981 
	$__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
)

983 
size_t
 
__»suÉ
 = 0;

984 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


985 && 
__s
[
__»suÉ
] !ğ
__»jeù2
)

986 ++
__»suÉ
;

987  
__»suÉ
;

988 
	}
}

990 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
,

991 
__»jeù2
, 
__»jeù3
);

992 
__STRING_INLINE
 
size_t


993 
	$__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
,

994 
__»jeù3
)

996 
size_t
 
__»suÉ
 = 0;

997 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


998 && 
__s
[
__»suÉ
] !ğ
__»jeù2
 && __s[__»suÉ] !ğ
__»jeù3
)

999 ++
__»suÉ
;

1000  
__»suÉ
;

1001 
	}
}

1007 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


1008 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


1009 #ià
__GNUC_PREREQ
 (3, 2)

1010 
	#¡r¥n
(
s
, 
acû±
) \

1011 
__ex‹nsiÚ__
 \

1012 ({ 
__a0
, 
__a1
, 
__a2
; \

1013 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1014 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1015 ? 
	`__butš_¡r¥n
 (
s
, 
acû±
) \

1016 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1017 ? ((è(
s
), (
size_t
) 0) \

1018 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1019 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1020 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1021 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1022 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1023 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1024 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)))))) \

1025 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)); })

	)

1027 
	#¡r¥n
(
s
, 
acû±
) \

1028 
__ex‹nsiÚ__
 \

1029 ({ 
__a0
, 
__a1
, 
__a2
; \

1030 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1031 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1032 ? ((è(
s
), (
size_t
) 0) \

1033 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1034 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1035 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1036 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1037 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1038 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1039 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1040 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1044 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1045 
__STRING_INLINE
 
size_t


1046 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1048 
size_t
 
__»suÉ
 = 0;

1050 
__s
[
__»suÉ
] =ğ
__acû±
)

1051 ++
__»suÉ
;

1052  
__»suÉ
;

1053 
	}
}

1055 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1056 
__acû±2
);

1057 
__STRING_INLINE
 
size_t


1058 
	$__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1060 
size_t
 
__»suÉ
 = 0;

1062 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2
)

1063 ++
__»suÉ
;

1064  
__»suÉ
;

1065 
	}
}

1067 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1068 
__acû±2
, 
__acû±3
);

1069 
__STRING_INLINE
 
size_t


1070 
	$__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1072 
size_t
 
__»suÉ
 = 0;

1074 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2


1075 || 
__s
[
__»suÉ
] =ğ
__acû±3
)

1076 ++
__»suÉ
;

1077  
__»suÉ
;

1078 
	}
}

1083 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1084 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1085 #ià
__GNUC_PREREQ
 (3, 2)

1086 
	#¡½brk
(
s
, 
acû±
) \

1087 
__ex‹nsiÚ__
 \

1088 ({ 
__a0
, 
__a1
, 
__a2
; \

1089 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1090 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1091 ? 
	`__butš_¡½brk
 (
s
, 
acû±
) \

1092 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1093 ? ((è(
s
), (*è
NULL
) \

1094 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1095 ? 
	`__butš_¡rchr
 (
s
, 
__a0
) \

1096 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1097 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1098 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1099 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1100 : 
	`__butš_¡½brk
 (
s
, 
acû±
)))))) \

1101 : 
	`__butš_¡½brk
 (
s
, 
acû±
)); })

	)

1103 
	#¡½brk
(
s
, 
acû±
) \

1104 
__ex‹nsiÚ__
 \

1105 ({ 
__a0
, 
__a1
, 
__a2
; \

1106 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1107 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1108 ? ((è(
s
), (*è
NULL
) \

1109 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1110 ? 
	`¡rchr
 (
s
, 
__a0
) \

1111 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1112 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1113 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1114 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1115 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1116 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1120 
__STRING_INLINE
 *
__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1121 
__acû±2
);

1122 
__STRING_INLINE
 *

1123 
	$__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1126 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2
)

1127 ++
__s
;

1128  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1129 
	}
}

1131 
__STRING_INLINE
 *
__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1132 
__acû±2
, 
__acû±3
);

1133 
__STRING_INLINE
 *

1134 
	$__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1137 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2


1138 && *
__s
 !ğ
__acû±3
)

1139 ++
__s
;

1140  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1141 
	}
}

1147 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1148 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1149 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1150 ? (((cÚ¡ *è(
ÃedË
))[0] == '\0' \

1151 ? (*è(
size_t
è(
hay¡ack
) \

1152 : (((cÚ¡ *è(
ÃedË
))[1] == '\0' \

1153 ? 
	`¡rchr
 (
hay¡ack
, \

1154 ((cÚ¡ *è(
ÃedË
))[0]) \

1155 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1156 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1160 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1161 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1162 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1163 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1164 && ((cÚ¡ *è(
£p
))[0] != '\0' \

1165 && ((cÚ¡ *è(
£p
))[1] == '\0' \

1166 ? 
	`__¡¹ok_r_1c
 (
s
, ((cÚ¡ *è(
£p
))[0], 
Ãx
) \

1167 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1170 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1171 
__STRING_INLINE
 *

1172 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1174 *
__»suÉ
;

1175 ià(
__s
 =ğ
NULL
)

1176 
__s
 = *
__Ãx
;

1177 *
__s
 =ğ
__£p
)

1178 ++
__s
;

1179 
__»suÉ
 = 
NULL
;

1180 ià(*
__s
 != '\0')

1182 
__»suÉ
 = 
__s
++;

1183 *
__s
 != '\0')

1184 ià(*
__s
++ =ğ
__£p
)

1186 
__s
[-1] = '\0';

1190 *
__Ãx
 = 
__s
;

1191  
__»suÉ
;

1192 
	}
}

1193 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1194 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1199 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1200 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1202 *
__¡r£p_g
 (**
__¡ršgp
, cÚ¡ *
__d–im
);

1203 
	#__¡r£p
(
s
, 
»jeù
) \

1204 
__ex‹nsiÚ__
 \

1205 ({ 
__r0
, 
__r1
, 
__r2
; \

1206 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1207 && (
__r0
 = ((cÚ¡ *è(
»jeù
))[0], \

1208 ((cÚ¡ *è(
»jeù
))[0] != '\0') \

1209 ? ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], \

1210 ((cÚ¡ *è(
»jeù
))[1] == '\0') \

1211 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1212 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

1213 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1214 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

1215 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1216 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1217 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1220 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1221 
__STRING_INLINE
 *

1222 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1224 *
__»tv®
 = *
__s
;

1225 ià(
__»tv®
 !ğ
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1226 *(*
__s
)++ = '\0';

1227  
__»tv®
;

1228 
	}
}

1230 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1231 
__STRING_INLINE
 *

1232 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1234 *
__»tv®
 = *
__s
;

1235 ià(
__»tv®
 !ğ
NULL
)

1237 *
__ı
 = 
__»tv®
;

1240 ià(*
__ı
 == '\0')

1242 
__ı
 = 
NULL
;

1245 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
)

1247 *
__ı
++ = '\0';

1250 ++
__ı
;

1252 *
__s
 = 
__ı
;

1254  
__»tv®
;

1255 
	}
}

1257 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1258 
__»jeù3
);

1259 
__STRING_INLINE
 *

1260 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1262 *
__»tv®
 = *
__s
;

1263 ià(
__»tv®
 !ğ
NULL
)

1265 *
__ı
 = 
__»tv®
;

1268 ià(*
__ı
 == '\0')

1270 
__ı
 = 
NULL
;

1273 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
 || *__ı =ğ
__»jeù3
)

1275 *
__ı
++ = '\0';

1278 ++
__ı
;

1280 *
__s
 = 
__ı
;

1282  
__»tv®
;

1283 
	}
}

1284 #ifdeà
__USE_BSD


1285 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1292 #ifdeà
__USE_MISC


1294 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1295 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1296 
	~<¡dlib.h
>

1299 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1301 *
	$__¡rdup
 (cÚ¡ *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1302 
	#__¡rdup
(
s
) \

1303 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1304 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1305 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1306 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1307 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1308 ià(
__»tv®
 !ğ
NULL
) \

1309 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, 
__Ën
); \

1310 
__»tv®
; 
	}
})) \

1311 : 
	`__¡rdup
 (
s
)))

	)

1313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1314 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1318 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1320 *
	$__¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

1321 
__THROW
 
__©Œibu‹_m®loc__
;

1322 
	#__¡ºdup
(
s
, 
n
) \

1323 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1324 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1325 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1326 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1327 
size_t
 
__n
 = (
n
); \

1328 *
__»tv®
; \

1329 ià(
__n
 < 
__Ën
) \

1330 
__Ën
 = 
__n
 + 1; \

1331 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1332 ià(
__»tv®
 !ğ
NULL
) \

1334 
__»tv®
[
__Ën
 - 1] = '\0'; \

1335 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, \

1336 
__Ën
 - 1); \

1338 
__»tv®
; 
	}
})) \

1339 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1341 #ifdeà
__USE_GNU


1342 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1348 #iâdeà
_FORCE_INLINES


1349 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #iâdeà
_STRING_H


22 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

25 #iâdeà
__ılu¥lus


29 #undeà
memıy


30 #undeà
memmove


31 #undeà
mem£t


32 #undeà
¡rÿt


33 #undeà
¡rıy


34 #undeà
¡ºÿt


35 #undeà
¡ºıy


36 #ifdeà
__USE_GNU


37 #undeà
mempıy


38 #undeà
¡pıy


40 #ifdeà
__USE_BSD


41 #undeà
bcİy


42 #undeà
bz”o


47 
__fÜtify_funùiÚ
 *

48 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

49 
size_t
 
__Ën
))

51  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__fÜtify_funùiÚ
 *

55 
__NTH
 (
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__Ën
))

57  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifdeà
__USE_GNU


61 
__fÜtify_funùiÚ
 *

62 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

63 
size_t
 
__Ën
))

65  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__fÜtify_funùiÚ
 *

76 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

78 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

79 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

81 
	`__w¬n_mem£t_z”o_Ën
 ();

82  
__de¡
;

84  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifdeà
__USE_BSD


88 
__fÜtify_funùiÚ
 

89 
__NTH
 (
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

91 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__fÜtify_funùiÚ
 

95 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

97 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__fÜtify_funùiÚ
 *

102 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

104  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifdeà
__USE_GNU


108 
__fÜtify_funùiÚ
 *

109 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

111  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__fÜtify_funùiÚ
 *

117 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

118 
size_t
 
__Ën
))

120  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__¡²ıy_chk
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

125 
size_t
 
__de¡Ën
è
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
, cÚ¡ *
__¤c
,

127 
size_t
 
__n
), 
¡²ıy
);

129 
__fÜtify_funùiÚ
 *

130 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
))

132 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

133 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À<ğ
	`__bos
 (
__de¡
)))

134  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

136 
	}
}

139 
__fÜtify_funùiÚ
 *

140 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

142  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__fÜtify_funùiÚ
 *

147 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

148 
size_t
 
__Ën
))

150  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

45 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

54 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

60 
	m__v®
[2];

61 } 
	t__quad_t
;

64 
__u_lÚg
 
	m__v®
[2];

65 } 
	t__u_quad_t
;

98 
	#__S16_TYPE
 

	)

99 
	#__U16_TYPE
 

	)

100 
	#__S32_TYPE
 

	)

101 
	#__U32_TYPE
 

	)

102 
	#__SLONGWORD_TYPE
 

	)

103 
	#__ULONGWORD_TYPE
 

	)

104 #ià
__WORDSIZE
 == 32

105 
	#__SQUAD_TYPE
 
__quad_t


	)

106 
	#__UQUAD_TYPE
 
__u_quad_t


	)

107 
	#__SWORD_TYPE
 

	)

108 
	#__UWORD_TYPE
 

	)

109 
	#__SLONG32_TYPE
 

	)

110 
	#__ULONG32_TYPE
 

	)

111 
	#__S64_TYPE
 
__quad_t


	)

112 
	#__U64_TYPE
 
__u_quad_t


	)

115 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

116 #–ià
__WORDSIZE
 == 64

117 
	t__SQUAD_TYPE
 

	)

118 
	t__UQUAD_TYPE
 

	)

119 
	t__SWORD_TYPE
 

	)

120 
	t__UWORD_TYPE
 

	)

121 
	t__SLONG32_TYPE
 

	)

122 
	t__ULONG32_TYPE
 

	)

123 
	t__S64_TYPE
 

	)

124 
	t__U64_TYPE
 

	)

126 
	t__STD_TYPE
 

	)

130 
	~<b™s/ty³sizes.h
>

133 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

134 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

135 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

136 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

137 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

138 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

139 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

140 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

141 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

142 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

143 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

144 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

145 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

146 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

147 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

148 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

149 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

150 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

152 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

153 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

156 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

159 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

162 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

167 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

168 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

171 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

172 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

175 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

176 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

179 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

181 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

186 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

190 
__off64_t
 
	t__loff_t
;

191 
__quad_t
 *
	t__qaddr_t
;

192 *
	t__ÿddr_t
;

195 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

198 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

201 #undeà
__STD_TYPE


	@/usr/include/bits/unistd.h

19 #iâdeà
_UNISTD_H


23 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

24 
size_t
 
__buæ’
è
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

26 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

29 
size_t
 
__buæ’
), 
__»ad_chk
)

30 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

33 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


34 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

36 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

38 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

39  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

41 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

42  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

44  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

45 
	}
}

47 #ifdeà
__USE_UNIX98


48 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

50 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

54 
__off_t
 
__off£t
), 
´—d
è
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

57 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

61 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__´—d64_chk
)

67 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

70 #iâdeà
__USE_FILE_OFFSET64


71 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


72 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

74 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

76 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

77  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

79 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

80  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

84 
	}
}

86 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


87 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

89 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

91 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

92  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

94 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

95  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

100 
	}
}

103 #ifdeà
__USE_LARGEFILE64


104 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


105 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

107 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

109 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

110  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

112 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

113  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

118 
	}
}

122 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


123 
ssize_t
 
	$__»adlšk_chk
 (cÚ¡ *
__»¡riù
 
__·th
,

124 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

125 
size_t
 
__buæ’
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

128 (cÚ¡ *
__»¡riù
 
__·th
,

129 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

130 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

132 (cÚ¡ *
__»¡riù
 
__·th
,

133 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

134 
size_t
 
__buæ’
), 
__»adlšk_chk
)

135 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

138 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


139 
	`__NTH
 (
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

140 
size_t
 
__Ën
))

142 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

144 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

145  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

147 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

148  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

150  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

151 
	}
}

154 #ifdeà
__USE_ATFILE


155 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

156 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

157 
size_t
 
__buæ’
)

158 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

160 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

161 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

162 
»adlšk©
)

163 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

165 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

166 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

167 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

168 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

172 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


173 
	`__NTH
 (
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

174 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

176 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

178 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

179  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

181 ià(
__Ën
 > 
	`__bos
 (
__buf
))

182  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

183 
	`__bos
 (
__buf
));

185  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

186 
	}
}

189 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

192 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

193 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

194 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

195 
__g‘cwd_chk
)

196 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

199 
__fÜtify_funùiÚ
 
__wur
 *

200 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

202 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

204 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

205  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 ià(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

211 
	}
}

213 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


214 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

215 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

216 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

217 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

220 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

221 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

223 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

224  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__g‘wd_w¬n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

230 
size_t
 
__buæ’
è
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

232 
size_t
 
__Ën
), 
cÚf¡r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

234 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

235 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

236 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

239 
__fÜtify_funùiÚ
 
size_t


240 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

242 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

244 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

245  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

247 ià(
	`__bos
 (
__buf
è< 
__Ën
)

248  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

250  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

251 
	}
}

254 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

257 
g‘groups
è
__wur
;

258 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

259 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

260 
__g‘groups_chk
)

261 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

264 
__fÜtify_funùiÚ
 

265 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

267 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

269 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

270  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

272 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

273  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

275  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

276 
	}
}

279 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

280 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

281 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

282 
size_t
 
__buæ’
), 
‰yÇme_r
)

283 
	`__nÚnuÎ
 ((2));

284 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

286 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

287 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

290 
__fÜtify_funùiÚ
 

291 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

293 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

295 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

296  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

298 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

299  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

301  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

302 
	}
}

305 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


306 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

307 
	`__nÚnuÎ
 ((1));

308 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

309 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

310 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

311 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

312 
__g‘logš_r_chk
)

313 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

316 
__fÜtify_funùiÚ
 

317 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

319 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

321 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

322  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

324 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

325  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

327  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

328 
	}
}

332 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


333 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

336 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

337 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

338 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

339 
__g‘ho¡Çme_chk
)

340 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

343 
__fÜtify_funùiÚ
 

344 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

346 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

349  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

351 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

352  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

354  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

355 
	}
}

359 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

360 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

361 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

362 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

363 
size_t
 
__buæ’
),

364 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

365 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

366 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

367 
__g‘domašÇme_chk
)

368 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

372 
__fÜtify_funùiÚ
 

373 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

375 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

377 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

378  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

380 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

381  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

383  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

384 
	}
}

	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<’dŸn.h
>

66 
	uwa™


68 
	mw_¡©us
;

71 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


72 
	m__w_‹rmsig
:7;

73 
	m__w_cÜedump
:1;

74 
	m__w_»tcode
:8;

77 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


79 
	m__w_»tcode
:8;

80 
	m__w_cÜedump
:1;

81 
	m__w_‹rmsig
:7;

83 } 
	m__wa™_‹rmš©ed
;

86 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


87 
	m__w_¡İv®
:8;

88 
	m__w_¡İsig
:8;

91 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


93 
	m__w_¡İsig
:8;

94 
	m__w_¡İv®
:8;

96 } 
	m__wa™_¡İ³d
;

99 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

100 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

101 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

102 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

103 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #undeà
__USE_ISOC11


99 #undeà
__USE_ISOC99


100 #undeà
__USE_ISOC95


101 #undeà
__USE_ISOCXX11


102 #undeà
__USE_POSIX


103 #undeà
__USE_POSIX2


104 #undeà
__USE_POSIX199309


105 #undeà
__USE_POSIX199506


106 #undeà
__USE_XOPEN


107 #undeà
__USE_XOPEN_EXTENDED


108 #undeà
__USE_UNIX98


109 #undeà
__USE_XOPEN2K


110 #undeà
__USE_XOPEN2KXSI


111 #undeà
__USE_XOPEN2K8


112 #undeà
__USE_XOPEN2K8XSI


113 #undeà
__USE_LARGEFILE


114 #undeà
__USE_LARGEFILE64


115 #undeà
__USE_FILE_OFFSET64


116 #undeà
__USE_BSD


117 #undeà
__USE_SVID


118 #undeà
__USE_MISC


119 #undeà
__USE_ATFILE


120 #undeà
__USE_GNU


121 #undeà
__USE_REENTRANT


122 #undeà
__USE_FORTIFY_LEVEL


123 #undeà
__FAVOR_BSD


124 #undeà
__KERNEL_STRICT_NAMES


128 #iâdeà
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

144 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

151 #ià
defšed
 
_BSD_SOURCE
 && \

152 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

153 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifdeà
_GNU_SOURCE


159 #undeà
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #undeà
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #undeà
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #undeà
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #undeà
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #undeà
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #undeà
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #undeà
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #undeà
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #undeà
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #undeà
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

186 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

187 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #ià(
defšed
 
_ISOC11_SOURCE
 \

194 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

200 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

206 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

215 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #undeà
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #undeà
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #undeà
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #ià(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #undeà
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #ià(
_XOPEN_SOURCE
 - 0) >= 600

274 #ià(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #undeà
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #undeà
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifdeà
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifdeà
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifdeà
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

329 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

330 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
compšg
 
w™h
 
İtimiz©iÚ
 (-
O
)

331 #–ià!
__GNUC_PREREQ
 (4, 1)

332 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
GCC
 4.1 
Ü
 
Ï‹r


333 #–ià
_FORTIFY_SOURCE
 > 1

334 
	#__USE_FORTIFY_LEVEL
 2

	)

336 
	#__USE_FORTIFY_LEVEL
 1

	)

339 #iâdeà
__USE_FORTIFY_LEVEL


340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<¡dc-´edef.h
>

353 #undeà
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 17

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

362 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

365 #ià
defšed
 
__GNUC__
 \

366 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

367 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

368 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

369 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

373 #iâdeà
__ASSEMBLER__


374 #iâdeà
_SYS_CDEFS_H


375 
	~<sys/cdefs.h
>

380 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


381 
	#__USE_LARGEFILE
 1

	)

382 
	#__USE_LARGEFILE64
 1

	)

388 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

389 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

390 && 
defšed
 
	g__ex‹º_šlše


391 
	#__USE_EXTERN_INLINES
 1

	)

399 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

20 #iâdeà
_GETOPT_H


22 #iâdeà
__Ãed_g‘İt


23 
	#_GETOPT_H
 1

	)

33 #ià!
defšed
 
__GNU_LIBRARY__


34 
	~<ùy³.h
>

37 #iâdeà
__THROW


38 #iâdeà
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

41 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__ılu¥lus


58 *
İrg
;

72 
İtšd
;

77 
İ‹¼
;

81 
İtİt
;

83 #iâdeà
__Ãed_g‘İt


105 
	sİtiÚ


107 cÚ¡ *
	gÇme
;

110 
	ghas_¬g
;

111 *
	gæag
;

112 
	gv®
;

117 
	#no_¬gum’t
 0

	)

118 
	#»quœed_¬gum’t
 1

	)

119 
	#İtiÚ®_¬gum’t
 2

	)

147 #ifdeà
__GNU_LIBRARY__


151 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

152 
__THROW
;

154 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

155 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


159 #ifdeà
__REDIRECT


160 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

161 cÚ¡ *
__shÜtİts
),

162 
__posix_g‘İt
);

164 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

165 cÚ¡ *
__shÜtİts
è
__THROW
;

166 
	#g‘İt
 
__posix_g‘İt


	)

170 
g‘İt
 ();

173 #iâdeà
__Ãed_g‘İt


174 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

175 cÚ¡ *
__shÜtİts
,

176 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

177 
__THROW
;

178 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

179 cÚ¡ *
__shÜtİts
,

180 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

181 
__THROW
;

185 #ifdef 
__ılu¥lus


190 #undeà
__Ãed_g‘İt


	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_BSD


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_BSD


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_şock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_şockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

167 #–ià
__GLIBC_HAVE_LONG_LONG


168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

178 #–ià
__GLIBC_HAVE_LONG_LONG


179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
__±h»ad_li¡_t
 
	m__li¡
;

106 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

108 
	m__nu£rs
;

109 
__ex‹nsiÚ__
 union

111 
	m__¥šs
;

112 
__±h»ad_¦i¡_t
 
	m__li¡
;

115 } 
	m__d©a
;

116 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

117 
	m__®ign
;

118 } 
	t±h»ad_mu‹x_t
;

122 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

123 
	m__®ign
;

124 } 
	t±h»ad_mu‹x©Œ_t
;

133 
	m__lock
;

134 
	m__fu‹x
;

135 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

136 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

137 
__ex‹nsiÚ__
 
	m__wok’_£q
;

138 *
	m__mu‹x
;

139 
	m__nwa™”s
;

140 
	m__brßdÿ¡_£q
;

141 } 
	m__d©a
;

142 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

143 
__ex‹nsiÚ__
 
	m__®ign
;

144 } 
	t±h»ad_cÚd_t
;

148 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

149 
	m__®ign
;

150 } 
	t±h»ad_cÚd©Œ_t
;

154 
	t±h»ad_key_t
;

158 
	t±h»ad_Úû_t
;

161 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


166 #ifdeà
__x86_64__


169 
	m__lock
;

170 
	m__Ä_»ad”s
;

171 
	m__»ad”s_wakeup
;

172 
	m__wr™”_wakeup
;

173 
	m__Ä_»ad”s_queued
;

174 
	m__Ä_wr™”s_queued
;

175 
	m__wr™”
;

176 
	m__sh¬ed
;

177 
	m__·d1
;

178 
	m__·d2
;

181 
	m__æags
;

182 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

183 } 
	m__d©a
;

187 
	m__lock
;

188 
	m__Ä_»ad”s
;

189 
	m__»ad”s_wakeup
;

190 
	m__wr™”_wakeup
;

191 
	m__Ä_»ad”s_queued
;

192 
	m__Ä_wr™”s_queued
;

195 
	m__æags
;

196 
	m__sh¬ed
;

197 
	m__·d1
;

198 
	m__·d2
;

199 
	m__wr™”
;

200 } 
	m__d©a
;

202 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

203 
	m__®ign
;

204 } 
	t±h»ad_rwlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_rwlock©Œ_t
;

214 #ifdeà
__USE_XOPEN2K


216 vŞ©
	t±h»ad_¥šlock_t
;

223 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

224 
	m__®ign
;

225 } 
	t±h»ad_b¬r›r_t
;

229 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

230 
	m__®ign
;

231 } 
	t±h»ad_b¬r›¿‰r_t
;

235 #iâdeà
__x86_64__


237 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifdeà
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/ctype.h

23 #iâdef 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 
	g__BEGIN_DECLS


31 #iâdeà
_ISb™


40 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#_ISb™
(
b™
è(1 << (b™))

	)

44 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

49 
	m_ISuµ”
 = 
_ISb™
 (0),

50 
	m_ISlow”
 = 
_ISb™
 (1),

51 
	m_IS®pha
 = 
_ISb™
 (2),

52 
	m_ISdig™
 = 
_ISb™
 (3),

53 
	m_ISxdig™
 = 
_ISb™
 (4),

54 
	m_IS¥aû
 = 
_ISb™
 (5),

55 
	m_IS´št
 = 
_ISb™
 (6),

56 
	m_ISg¿ph
 = 
_ISb™
 (7),

57 
	m_ISbÏnk
 = 
_ISb™
 (8),

58 
	m_ISúŒl
 = 
_ISb™
 (9),

59 
	m_ISpunù
 = 
_ISb™
 (10),

60 
	m_IS®num
 = 
_ISb™
 (11)

80 cÚ¡ **
	$__ùy³_b_loc
 ()

81 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

82 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

83 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

84 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

85 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

88 #iâdeà
__ılu¥lus


89 
	#__isùy³
(
c
, 
ty³
) \

90 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 #–ià
defšed
 
__USE_EXTERN_INLINES


92 
	#__isùy³_f
(
ty³
) \

93 
__ex‹º_šlše
 \

94 
is
##
	`ty³
 (
__c
è
__THROW
 \

96  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

97 
	}

	)
}

100 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

101 
	#__tßscii
(
c
è((cè& 0x7fè

	)

103 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__exùy³
 (
i§Êum
);

112 
__exùy³
 (
i§Íha
);

113 
__exùy³
 (
isúŒl
);

114 
__exùy³
 (
isdig™
);

115 
__exùy³
 (
i¦ow”
);

116 
__exùy³
 (
isg¿ph
);

117 
__exùy³
 (
i¥ršt
);

118 
__exùy³
 (
i¥unù
);

119 
__exùy³
 (
is¥aû
);

120 
__exùy³
 (
isuµ”
);

121 
__exùy³
 (
isxdig™
);

125 
	$tŞow”
 (
__c
è
__THROW
;

128 
	$touµ”
 (
__c
è
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__exùy³
 (
isbÏnk
);

139 
__END_NAMESPACE_C99


142 #ifdeà
__USE_GNU


144 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

147 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


151 
	$i§scii
 (
__c
è
__THROW
;

155 
	$tßscii
 (
__c
è
__THROW
;

159 
	`__exùy³
 (
_touµ”
);

160 
	`__exùy³
 (
_tŞow”
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

165 (
__ex‹nsiÚ__
 \

166 ({ 
__»s
; \

167 ià( (
c
) > 1) \

169 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

175 
__»s
 = 
f
 
¬gs
; \

178 
__»s
 = (
a
)[(è(
c
)]; \

179 
__»s
; 
	}
}))

	)

181 #ià!
defšed
 
__NO_CTYPE


182 #ifdeà
__isùy³_f


183 
	$__isùy³_f
 (
®num
)

184 
	$__isùy³_f
 (
®pha
)

185 
	$__isùy³_f
 (
úŒl
)

186 
	$__isùy³_f
 (
dig™
)

187 
	$__isùy³_f
 (
low”
)

188 
	$__isùy³_f
 (
g¿ph
)

189 
	$__isùy³_f
 (
´št
)

190 
	$__isùy³_f
 (
punù
)

191 
	$__isùy³_f
 (
¥aû
)

192 
	$__isùy³_f
 (
uµ”
)

193 
	$__isùy³_f
 (
xdig™
)

194 #ifdeà
__USE_ISOC99


195 
	$__isùy³_f
 (
bÏnk
)

197 #–ià
defšed
 
__isùy³


198 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

199 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

200 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

201 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

202 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

203 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

204 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

205 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

206 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

207 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

208 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

209 #ifdeà
__USE_ISOC99


210 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

214 #ifdeà
__USE_EXTERN_INLINES


215 
__ex‹º_šlše
 

216 
	`__NTH
 (
	$tŞow”
 (
__c
))

218  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

219 
	}
}

221 
__ex‹º_šlše
 

222 
__NTH
 (
	$touµ”
 (
__c
))

224  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

225 
	}
}

228 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


229 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

230 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

233 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


234 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

235 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

237 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

238 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

244 #ifdeà
__USE_XOPEN2K8


258 
	~<xloÿË.h
>

262 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

263 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

265 
	#__exùy³_l
(
Çme
) \

266 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

272 
__exùy³_l
 (
i§Êum_l
);

273 
__exùy³_l
 (
i§Íha_l
);

274 
__exùy³_l
 (
isúŒl_l
);

275 
__exùy³_l
 (
isdig™_l
);

276 
__exùy³_l
 (
i¦ow”_l
);

277 
__exùy³_l
 (
isg¿ph_l
);

278 
__exùy³_l
 (
i¥ršt_l
);

279 
__exùy³_l
 (
i¥unù_l
);

280 
__exùy³_l
 (
is¥aû_l
);

281 
__exùy³_l
 (
isuµ”_l
);

282 
__exùy³_l
 (
isxdig™_l
);

284 
__exùy³_l
 (
isbÏnk_l
);

288 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

289 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

293 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

295 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


296 
	#__tŞow”_l
(
c
, 
loÿË
) \

297 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

298 
	#__touµ”_l
(
c
, 
loÿË
) \

299 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

300 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

301 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

305 #iâdeà
__NO_CTYPE


306 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

307 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

308 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

309 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

310 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

311 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

312 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

313 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

314 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

315 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

316 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

318 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

320 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


321 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

322 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

325 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

326 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

327 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

328 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

329 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

330 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

331 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

332 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

333 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

334 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

335 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

337 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

339 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


340 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

341 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 #ià
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

81 
	#htobe16
(
x
è(x)

	)

82 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

83 
	#be16toh
(
x
è(x)

	)

84 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

86 
	#htobe32
(
x
è(x)

	)

87 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

88 
	#be32toh
(
x
è(x)

	)

89 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

91 #ià
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
è(x)

	)

93 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

94 
	#be64toh
(
x
è(x)

	)

95 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/”ºo.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	#__STDC_IEC_559__
 1

	)

31 
	#__STDC_IEC_559_COMPLEX__
 1

	)

35 
	#__STDC_ISO_10646__
 201103L

	)

38 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

19 #iâdef 
_SYS_CDEFS_H


20 
	#_SYS_CDEFS_H
 1

	)

23 #iâdeà
_FEATURES_H


24 
	~<ã©u»s.h
>

30 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


35 #undeà
__P


36 #undeà
__PMT


38 #ifdeà
__GNUC__


42 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


43 
	#__LEAF
 , 
__Ëaf__


	)

44 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

46 
	#__LEAF


	)

47 
	#__LEAF_ATTR


	)

55 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

56 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

57 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

58 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

60 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

65 
	#__THROW


	)

66 
	#__THROWNL


	)

67 
	#__NTH
(
fù
è
	)
fct

73 
	#__šlše


	)

75 
	#__THROW


	)

76 
	#__THROWNL


	)

77 
	#__NTH
(
fù
è
	)
fct

83 
	#__P
(
¬gs
è
	)
args

84 
	#__PMT
(
¬gs
è
	)
args

89 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

90 
	#__STRING
(
x
è#x

	)

93 
	#__±r_t
 *

	)

94 
	#__lÚg_doubË_t
 

	)

98 #ifdef 
__ılu¥lus


99 
	#__BEGIN_DECLS
 "C" {

	)

100 
	#__END_DECLS
 }

	)

102 
	#__BEGIN_DECLS


	)

103 
	#__END_DECLS


	)

112 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


113 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

114 
	#__END_NAMESPACE_STD
 }

	)

115 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

116 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

117 
	#__END_NAMESPACE_C99
 }

	)

118 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

123 
	#__BEGIN_NAMESPACE_STD


	)

124 
	#__END_NAMESPACE_STD


	)

125 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

126 
	#__BEGIN_NAMESPACE_C99


	)

127 
	#__END_NAMESPACE_C99


	)

128 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

133 #iâdeà
__BOUNDED_POINTERS__


134 
	#__bounded


	)

135 
	#__unbounded


	)

136 
	#__±rv®ue


	)

141 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

142 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

144 #ià
__GNUC_PREREQ
 (4,3)

145 
	#__w¬ndeş
(
Çme
, 
msg
) \

146 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

147 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

148 
	#__”rÜdeş
(
Çme
, 
msg
) \

149 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

151 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

152 
	#__w¬Ç‰r
(
msg
)

	)

153 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

157 #ià
__GNUC_PREREQ
 (2,97)

159 
	#__æex¬r
 []

	)

161 #ifdeà
__GNUC__


162 
	#__æex¬r
 [0]

	)

164 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

165 
	#__æex¬r
 []

	)

168 
	#__æex¬r
 [1]

	)

184 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

186 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

187 #ifdeà
__ılu¥lus


188 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

189 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

190 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

191 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

193 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

194 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

195 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

196 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

198 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

199 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

212 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

213 
	#__©Œibu‹__
(
xyz
è

	)

219 #ià
__GNUC_PREREQ
 (2,96)

220 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

222 
	#__©Œibu‹_m®loc__


	)

228 #ià
__GNUC_PREREQ
 (2,96)

229 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

231 
	#__©Œibu‹_pu»__


	)

235 #ià
__GNUC_PREREQ
 (2,5)

236 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

238 
	#__©Œibu‹_cÚ¡__


	)

244 #ià
__GNUC_PREREQ
 (3,1)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

246 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

248 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

249 
	#__©Œibu‹_nošlše__


	)

253 #ià
__GNUC_PREREQ
 (3,2)

254 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

256 
	#__©Œibu‹_d•»ÿ‹d__


	)

265 #ià
__GNUC_PREREQ
 (2,8)

266 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

268 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

275 #ià
__GNUC_PREREQ
 (2,97)

276 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

277 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

279 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

284 #ià
__GNUC_PREREQ
 (3,3)

285 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

287 
	#__nÚnuÎ
(
·¿ms
)

	)

292 #ià
__GNUC_PREREQ
 (3,4)

293 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

294 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

295 #ià
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

299 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

301 #iâdeà
__wur


302 
	#__wur


	)

306 #ià
__GNUC_PREREQ
 (3,2)

307 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

309 
	#__®ways_šlše
 
__šlše


	)

314 #ià
__GNUC_PREREQ
 (4,3)

315 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

317 
	#__©Œibu‹_¬tificŸl__


	)

329 #ià(!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
defšed
 
__şªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

331 || 
defšed
 
__GNUC_GNU_INLINE__
)))

332 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


333 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

334 
	#__ex‹º_®ways_šlše
 \

335 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

337 
	#__ex‹º_šlše
 
__šlše


	)

338 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

342 #ifdeà
__ex‹º_®ways_šlše


343 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

348 #ià
__GNUC_PREREQ
 (4,3)

349 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

350 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

357 #ià!
__GNUC_PREREQ
 (2,8)

358 
	#__ex‹nsiÚ__


	)

362 #ià!
__GNUC_PREREQ
 (2,92)

363 
	#__»¡riù


	)

369 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


370 
	#__»¡riù_¬r
 
__»¡riù


	)

372 #ifdeà
__GNUC__


373 
	#__»¡riù_¬r


	)

375 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__»¡riù_¬r
 
»¡riù


	)

379 
	#__»¡riù_¬r


	)

384 #ià
__GNUC__
 >= 3

385 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
((cÚd), 0)

	)

386 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
((cÚd), 1)

	)

388 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

389 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

392 
	~<b™s/wÜdsize.h
>

394 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


395 
	#__LDBL_COMPAT
 1

	)

396 #ifdeà
__REDIRECT


397 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

398 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

399 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

400 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

401 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

402 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

403 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

404 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

405 
	#__LDBL_REDIR_DECL
(
Çme
) \

406 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

407 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

408 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

409 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

410 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

413 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


414 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

415 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

416 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

417 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

418 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

419 #ifdeà
__REDIRECT


420 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

421 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

422 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

20 #iâdeà
_SYS_SYSMACROS_H


21 
	#_SYS_SYSMACROS_H
 1

	)

23 
	~<ã©u»s.h
>

28 #ifdeà
__GLIBC_HAVE_LONG_LONG


29 
__BEGIN_DECLS


31 
__ex‹nsiÚ__


32 
	$gnu_dev_majÜ
 (
__dev
)

33 
__THROW
 
__©Œibu‹_cÚ¡__
;

34 
__ex‹nsiÚ__


35 
	$gnu_dev_mšÜ
 (
__dev
)

36 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 
__ex‹nsiÚ__


38 
	$gnu_dev_makedev
 (
__majÜ
,

39 
__mšÜ
)

40 
__THROW
 
__©Œibu‹_cÚ¡__
;

42 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


43 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

44 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

46  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

47 
	}
}

49 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

50 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

52  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

53 
	}
}

55 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

56 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

58  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

59 | (((è(
__mšÜ
 & ~0xff)) << 12)

60 | (((è(
__majÜ
 & ~0xfff)) << 32));

61 
	}
}

63 
	g__END_DECLS


66 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

67 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

68 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__butš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__butš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

137 #–ià
__GLIBC_HAVE_LONG_LONG


138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

20 #iâdef 
_SIGSET_H_ty³s


21 
	#_SIGSET_H_ty³s
 1

	)

23 
	t__sig_©omic_t
;

27 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

30 
	m__v®
[
_SIGSET_NWORDS
];

31 } 
	t__sig£t_t
;

42 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


43 
	#_SIGSET_H_âs
 1

	)

45 #iâdeà
_EXTERN_INLINE


46 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

50 
	#__sigmask
(
sig
) \

51 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

54 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

56 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

57 
	#__sigem±y£t
(
£t
) \

58 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

59 
sig£t_t
 *
__£t
 = (
£t
); \

60 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

61 0; }))

	)

62 
	#__sigfl£t
(
£t
) \

63 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

64 
sig£t_t
 *
__£t
 = (
£t
); \

65 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

66 0; }))

	)

68 #ifdeà
__USE_GNU


72 
	#__sigi£m±y£t
(
£t
) \

73 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

74 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

75 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

76 !
__»t
 && --
__út
 >= 0) \

77 
__»t
 = 
__£t
->
__v®
[
__út
]; \

78 
__»t
 =ğ0; }))

	)

79 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

80 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

81 
sig£t_t
 *
__de¡
 = (
de¡
); \

82 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

83 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

84 --
__út
 >= 0) \

85 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

86 & 
__right
->
__v®
[
__út
]); \

87 0; }))

	)

88 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

89 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

90 
sig£t_t
 *
__de¡
 = (
de¡
); \

91 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

92 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

93 --
__út
 >= 0) \

94 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

95 | 
__right
->
__v®
[
__út
]); \

96 0; }))

	)

103 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

104 
__sigadd£t
 (
__sig£t_t
 *, );

105 
__sigd–£t
 (
__sig£t_t
 *, );

107 #ifdeà
__USE_EXTERN_INLINES


108 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

109 
_EXTERN_INLINE
 \

110 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

112 
__mask
 = 
	`__sigmask
 (
__sig
); \

113 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

114  
BODY
; \

115 }

	)

117 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

118 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

119 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

121 #undeà
__SIGSETFN


	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

82 
	#TIMER_ABSTIME
 1

	)

85 #ifdeà
__USE_GNU


86 
	~<b™s/timex.h
>

88 
__BEGIN_DECLS


91 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

93 
__END_DECLS


99 #undeà
__Ãed_timev®


	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

111 
	#EHWPOISON
 133

	)

	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@
1
.
1
/usr/include
266
7079
src/BDTEventWrapper.cxx
src/BinarySearchTree.cxx
src/BinarySearchTreeNode.cxx
src/BinaryTree.cxx
src/CCPruner.cxx
src/CCTreeWrapper.cxx
src/ClassInfo.cxx
src/ClassifierFactory.cxx
src/Config.cxx
src/Configurable.cxx
src/ConvergenceTest.cxx
src/CostComplexityPruneTool.cxx
src/CrossEntropy.cxx
src/CrossValidation.cxx
src/DNN/Architectures/Cpu.cxx
src/DNN/Architectures/Cpu/ActivationFunctions.cxx
src/DNN/Architectures/Cpu/Arithmetic.cxx
src/DNN/Architectures/Cpu/CpuBuffer.cxx
src/DNN/Architectures/Cpu/CpuMatrix.cxx
src/DNN/Architectures/Cpu/DataLoader.cxx
src/DNN/Architectures/Cpu/DenoisePropagation.cxx
src/DNN/Architectures/Cpu/Dropout.cxx
src/DNN/Architectures/Cpu/Initialization.cxx
src/DNN/Architectures/Cpu/LossFunctions.cxx
src/DNN/Architectures/Cpu/OutputFunctions.cxx
src/DNN/Architectures/Cpu/Propagation.cxx
src/DNN/Architectures/Cpu/Regularization.cxx
src/DNN/Architectures/Cuda/CudaBuffers.cxx
src/DNN/Architectures/Reference.cxx
src/DNN/Architectures/Reference/ActivationFunctions.cxx
src/DNN/Architectures/Reference/DenoisePropagation.cxx
src/DNN/Architectures/Reference/Dropout.cxx
src/DNN/Architectures/Reference/Initialization.cxx
src/DNN/Architectures/Reference/LossFunctions.cxx
src/DNN/Architectures/Reference/OutputFunctions.cxx
src/DNN/Architectures/Reference/Propagation.cxx
src/DNN/Architectures/Reference/Regularization.cxx
src/DNN/DataLoader.cxx
src/DataInputHandler.cxx
src/DataLoader.cxx
src/DataSet.cxx
src/DataSetFactory.cxx
src/DataSetInfo.cxx
src/DataSetManager.cxx
src/DecisionTree.cxx
src/DecisionTreeNode.cxx
src/Envelope.cxx
src/Event.cxx
src/ExpectedErrorPruneTool.cxx
src/Factory.cxx
src/FitterBase.cxx
src/GeneticAlgorithm.cxx
src/GeneticFitter.cxx
src/GeneticGenes.cxx
src/GeneticPopulation.cxx
src/GeneticRange.cxx
src/GiniIndex.cxx
src/GiniIndexWithLaplace.cxx
src/HyperParameterOptimisation.cxx
src/IFitterTarget.cxx
src/IMethod.cxx
src/Interval.cxx
src/KDEKernel.cxx
src/LDA.cxx
src/LogInterval.cxx
src/LossFunction.cxx
src/MCFitter.cxx
src/MethodANNBase.cxx
src/MethodBDT.cxx
src/MethodBase.cxx
src/MethodBayesClassifier.cxx
src/MethodBoost.cxx
src/MethodCFMlpANN.cxx
src/MethodCFMlpANN_Utils.cxx
src/MethodCategory.cxx
src/MethodCompositeBase.cxx
src/MethodCuts.cxx
src/MethodDAE.cxx
src/MethodDNN.cxx
src/MethodDT.cxx
src/MethodFDA.cxx
src/MethodFisher.cxx
src/MethodHMatrix.cxx
src/MethodKNN.cxx
src/MethodLD.cxx
src/MethodLikelihood.cxx
src/MethodMLP.cxx
src/MethodPDEFoam.cxx
src/MethodPDERS.cxx
src/MethodPlugins.cxx
src/MethodRuleFit.cxx
src/MethodSVM.cxx
src/MethodTMlpANN.cxx
src/MinuitFitter.cxx
src/MinuitWrapper.cxx
src/MisClassificationError.cxx
src/ModulekNN.cxx
src/MsgLogger.cxx
src/NeuralNet.cxx
src/Node.cxx
src/OptimizeConfigParameters.cxx
src/Option.cxx
src/OptionMap.cxx
src/PDEFoam.cxx
src/PDEFoamCell.cxx
src/PDEFoamDecisionTree.cxx
src/PDEFoamDecisionTreeDensity.cxx
src/PDEFoamDensityBase.cxx
src/PDEFoamDiscriminant.cxx
src/PDEFoamDiscriminantDensity.cxx
src/PDEFoamEvent.cxx
src/PDEFoamEventDensity.cxx
src/PDEFoamKernelBase.cxx
src/PDEFoamKernelGauss.cxx
src/PDEFoamKernelLinN.cxx
src/PDEFoamKernelTrivial.cxx
src/PDEFoamMultiTarget.cxx
src/PDEFoamTarget.cxx
src/PDEFoamTargetDensity.cxx
src/PDEFoamVect.cxx
src/PDF.cxx
src/QuickMVAProbEstimator.cxx
src/ROCCalc.cxx
src/ROCCurve.cxx
src/Ranking.cxx
src/Reader.cxx
src/RegressionVariance.cxx
src/Results.cxx
src/ResultsClassification.cxx
src/ResultsMulticlass.cxx
src/ResultsRegression.cxx
src/RootFinder.cxx
src/Rule.cxx
src/RuleCut.cxx
src/RuleEnsemble.cxx
src/RuleFit.cxx
src/RuleFitAPI.cxx
src/RuleFitParams.cxx
src/SVEvent.cxx
src/SVKernelFunction.cxx
src/SVKernelMatrix.cxx
src/SVWorkingSet.cxx
src/SdivSqrtSplusB.cxx
src/SeparationBase.cxx
src/SimulatedAnnealing.cxx
src/SimulatedAnnealingFitter.cxx
src/TActivation.cxx
src/TActivationChooser.cxx
src/TActivationIdentity.cxx
src/TActivationRadial.cxx
src/TActivationReLU.cxx
src/TActivationSigmoid.cxx
src/TActivationTanh.cxx
src/TNeuron.cxx
src/TNeuronInput.cxx
src/TNeuronInputAbs.cxx
src/TNeuronInputChooser.cxx
src/TNeuronInputSqSum.cxx
src/TNeuronInputSum.cxx
src/TSpline1.cxx
src/TSpline2.cxx
src/TSynapse.cxx
src/Timer.cxx
src/Tools.cxx
src/TransformationHandler.cxx
src/Types.cxx
src/VarTransformHandler.cxx
src/VariableDecorrTransform.cxx
src/VariableGaussTransform.cxx
src/VariableIdentityTransform.cxx
src/VariableImportance.cxx
src/VariableInfo.cxx
src/VariableNormalizeTransform.cxx
src/VariablePCATransform.cxx
src/VariableRearrangeTransform.cxx
src/VariableTransform.cxx
src/VariableTransformBase.cxx
src/Volume.cxx
test/DNN/DAE/TestDataLoader.cxx
test/DNN/DAE/TestDenoiseAEProp.cxx
test/DNN/DAE/TestLayer.cxx
test/DNN/DAE/TestLogistic.cxx
test/DNN/DAE/TestLogisticRegressionLayer.cxx
test/DNN/DAE/TestStackedLayers.cxx
test/DNN/DAE/TestTransformLayer.cxx
test/DNN/DAE/TestUtilsAE.cxx
test/DNN/TestActivationFunctions.cxx
test/DNN/TestActivationFunctionsCpu.cxx
test/DNN/TestActivationFunctionsCuda.cxx
test/DNN/TestBackpropagation.cxx
test/DNN/TestBackpropagationCpu.cxx
test/DNN/TestBackpropagationCuda.cxx
test/DNN/TestCuda.cxx
test/DNN/TestDataLoader.cxx
test/DNN/TestDataLoaderCpu.cxx
test/DNN/TestDataLoaderCuda.cxx
test/DNN/TestDerivatives.cxx
test/DNN/TestDerivativesCpu.cxx
test/DNN/TestDerivativesCuda.cxx
test/DNN/TestLossFunctions.cxx
test/DNN/TestLossFunctionsCpu.cxx
test/DNN/TestLossFunctionsCuda.cxx
test/DNN/TestMatrixArithmeticCpu.cxx
test/DNN/TestMatrixArithmeticCuda.cxx
test/DNN/TestMinimization.cxx
test/DNN/TestMinimizationCpu.cxx
test/DNN/TestMinimizationCuda.cxx
/usr/include/assert.h
/usr/include/errno.h
/usr/include/math.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/tbb/tbb.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/confname.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/posix_opt.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/sys/types.h
/usr/include/xlocale.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/typesizes.h
/usr/include/bits/wordsize.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/time.h
/usr/include/asm/errno.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
/usr/include/bits/time.h
/usr/include/gnu/stubs-64.h
/usr/include/asm-generic/errno.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/timex.h
/usr/include/asm-generic/errno-base.h
